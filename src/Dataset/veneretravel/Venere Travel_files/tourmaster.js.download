!function(t){"use strict";function e(t,e,a){if(void 0!==a&&0!=a){var i=new Date,s=i.getTime()+1e3*parseInt(a);i.setTime(s),a=i.toGMTString()}document.cookie=t+"="+encodeURIComponent(e)+";expires="+a+";path=/"}function a(e){var a=t('<div class="tourmaster-lightbox-wrapper" ></div>').hide(),o=t('<div class="tourmaster-lightbox-content-cell" ></div>');a.append(o),o.wrap(t('<div class="tourmaster-lightbox-content-row" ></div>')),o.append(e),t("body").append(a),a.fadeIn(300),s(a),i(a),a.on("click",".tourmaster-lightbox-close",function(){a.fadeOut(300,function(){t(this).remove()})}),o.find("form").each(function(){t(this).submit(function(){var e=!0,a=t(this).find(".tourmaster-lb-submit-error");return a.slideUp(200),t(this).find("input[data-required], select[data-required], textarea[data-required]").each(function(){t(this).val()||(e=!1)}),e||a.slideDown(200),e})})}function i(e){e.find(".tourmaster-review-form-rating, .tourmaster-tour-search-field-rating").each(function(){t(this).children(".tourmaster-rating-select").click(function(){t(this).siblings("input").val(t(this).attr("data-rating-score")),t(this).is("i")&&t(this).removeClass().addClass("tourmaster-rating-select fa fa-star-half-empty"),t(this).prevAll("i").removeClass().addClass("tourmaster-rating-select fa fa-star"),t(this).nextAll("i").removeClass().addClass("tourmaster-rating-select fa fa-star-o")})})}function s(e){if(void 0===e)var a=t(".tourmaster-date-select"),i=t(".tourmaster-file-label");else var a=e.find(".tourmaster-date-select"),i=e.find(".tourmaster-file-label");a.on("change","select",function(){var e=t(this).closest(".tourmaster-date-select"),a=0,i=0,s=0;e.find("select[data-type]").each(function(){"date"==t(this).attr("data-type")?a=parseInt(t(this).val()):"month"==t(this).attr("data-type")?i=parseInt(t(this).val()):"year"==t(this).attr("data-type")&&(s=parseInt(t(this).val()))}),a>0&&i>0&&s>0&&e.siblings("input[name]").val(s+"-"+i+"-"+a)}),i.on("change",'input[type="file"]',function(){var e=t(this).siblings(".tourmaster-file-label-text");t(this).val()?e.html(t(this).val().split("\\").pop()):e.html(e.attr("data-default"))})}function o(e,a){a.animate({opacity:.2},200),t.ajax({type:"POST",url:a.attr("data-ajax-url"),data:e,dataType:"json",error:function(t,e,i){a.animate({opacity:1},200),console.log(t,e,i)},success:function(t){if(void 0!==t.content){var e=a.outerHeight();a.html(t.content);var i=a.outerHeight();a.css({height:e}),a.animate({height:i},200,function(){a.css({height:"auto"})})}a.animate({opacity:1},200)}})}function r(e,a,i){var a=t.extend({beforeSend:function(t,e){},error:function(t,e,a){console.log(t,e,a)},success:function(t){}},a),i=t.extend({action:"tourmaster_tour_booking"},i);t.ajax({type:"POST",url:e,data:i,dataType:"json",beforeSend:a.beforeSend,error:a.error,success:a.success})}function n(e){var a={};return e.find("input[name], select[name], textarea[name]").each(function(){a[t(this).attr("name")]=t(this).val()}),a}function d(e){var a={};return e.find("input[name], select[name], textarea[name]").each(function(){var e=t(this).attr("name");if(t(this).is('[type="checkbox"]'))i=t(this).is(":checked")?t(this).val():0;else if(t(this).is('[type="radio"]')){if(t(this).is(":checked"))i=t(this).val()}else var i=t(this).val();e.endsWith("[]")?(e=e.substr(0,e.length-2),"object"!=typeof a[e]&&(a[e]=[]),a[e].push(i)):a[t(this).attr("name")]=i}),a}var c="desktop";"function"==typeof window.matchMedia?(t(window).on("resize tourmaster-set-display",function(){c=window.matchMedia("(max-width: 419px)").matches?"mobile-portrait":window.matchMedia("(max-width: 767px)").matches?"mobile-landscape":window.matchMedia("(max-width: 999px)").matches?"tablet":"desktop"}),t(window).trigger("tourmaster-set-display")):(t(window).on("resize tourmaster-set-display",function(){c=t(window).innerWidth()<=419?"mobile-portrait":t(window).innerWidth()<=767?"mobile-landscape":t(window).innerWidth()<=999?"tablet":"desktop"}),t(window).trigger("tourmaster-set-display"));var u=function(t,e,a){var i;return function(){function s(){a||t.apply(o,r),i=null}var o=this,r=arguments;i?clearTimeout(i):a&&t.apply(o,r),i=setTimeout(s,e)}};window.tourmaster_front_confirm_box=function(e){var a=t.extend({head:"",text:"",sub:"",yes:"",no:"",success:function(){}},e),i=t('<div class="tourmaster-conform-box-overlay"></div>').appendTo(t("body")),s=t('<span class="tourmaster-confirm-box-button tourmaster-yes">'+a.yes+"</span>"),o=t('<span class="tourmaster-confirm-box-button tourmaster-no">'+a.no+"</span>"),r=t('<div class="tourmaster-confirm-box-wrapper">\t\t\t\t<div class="tourmaster-confirm-box-head">'+a.head+'</div>\t\t\t\t<div class="tourmaster-confirm-box-content-wrapper" >\t\t\t\t\t<div class="tourmaster-confirm-box-text">'+a.text+'</div>\t\t\t\t\t<div class="tourmaster-confirm-box-sub">'+a.sub+"</div>\t\t\t\t</div>\t\t\t</div>").insertAfter(i);t('<div class="tourmaster-confirm-box-button-wrapper"></div>').append(o).append(s).appendTo(r),r.css({"margin-left":-r.outerWidth()/2,"margin-top":-r.outerHeight()/2}),i.css({opacity:0}).animate({opacity:.6},200),r.css({opacity:0}).animate({opacity:1},200),s.click(function(){"function"==typeof a.success&&a.success(),i.fadeOut(200,function(){t(this).remove()}),r.fadeOut(200,function(){t(this).remove()})}),o.click(function(){i.fadeOut(200,function(){t(this).remove()}),r.fadeOut(200,function(){t(this).remove()})})},t.fn.tourmaster_single_review=function(){var e=t(this).find("#tourmaster-single-review-filter"),a=t(this).find("#tourmaster-single-review-content"),i=e.find("[data-sort-by]"),s=e.find("#tourmaster-filter-by");i.click(function(){if(t(this).hasClass("tourmaster-active"))return!1;t(this).addClass("tourmaster-active").siblings("[data-sort-by]").removeClass("tourmaster-active"),o({action:"get_single_tour_review",tour_id:a.attr("data-tour-id"),sort_by:t(this).attr("data-sort-by"),filter_by:s.val()},a)}),s.change(function(){o({action:"get_single_tour_review",tour_id:a.attr("data-tour-id"),sort_by:i.filter(".tourmaster-active").attr("data-sort-by"),filter_by:t(this).val()},a)}),a.on("click","[data-paged]",function(){o({action:"get_single_tour_review",tour_id:a.attr("data-tour-id"),paged:t(this).attr("data-paged"),sort_by:i.filter(".tourmaster-active").attr("data-sort-by"),filter_by:s.val()},a)})},t.fn.tourmaster_datepicker=function(){t(this).each(function(){var e=t(this).siblings(".tourmaster-datepicker-alt"),a=t(this).attr("data-date-format");if(t(this).attr("data-tour-date")){var i=t(this).attr("data-tour-range"),s=0,o=JSON.parse(t(this).attr("data-tour-date")),r=t(this).val(),n=r;t(this).datepicker({dateFormat:a,altFormat:"yy-mm-dd",altField:e,changeMonth:!0,changeYear:!0,minDate:new Date(o[0]),maxDate:new Date(o[o.length-1]),beforeShowDay:function(t){r=t.getFullYear()+"-",r+=("0"+(t.getMonth()+1)).slice(-2)+"-",r+=("0"+t.getDate()).slice(-2);var e="";return n==r&&(s=i),s>0&&(s--,e="tourmaster-highlight"),o.indexOf(r)>=0?[!0,e,""]:[!1,e,""]},onSelect:function(t,a){n=a.selectedYear+"-",n+=("0"+(a.selectedMonth+1)).slice(-2)+"-",n+=("0"+a.selectedDay).slice(-2),e.trigger("change")},beforeShow:function(e,a){var i=t(a).datepicker("widget");i.css("margin-left",t(e).outerWidth()-i.outerWidth()),i.css("margin-top",-2)},closeText:TMi18n.closeText,currentText:TMi18n.currentText,monthNames:TMi18n.monthNames,monthNamesShort:TMi18n.monthNamesShort,dayNames:TMi18n.dayNames,dayNamesShort:TMi18n.dayNamesShort,dayNamesMin:TMi18n.dayNamesMin,firstDay:TMi18n.firstDay});var d=new Date(r+"T00:00:00+00:00");d=new Date(d.getTime()+6e4*d.getTimezoneOffset()),t(this).datepicker("setDate",d)}else t(this).datepicker({dateFormat:a,altFormat:"yy-mm-dd",altField:e,changeMonth:!0,changeYear:!0})})},t.fn.tourmaster_tour_booking=function(){var i=t(this),s=t(this).attr("data-ajax-url");t(this).on("change",'input[name="tour-date"], select[name="tour-date"]',function(){i.find("[data-step]").each(function(){t(this).attr("data-step")>1&&t(this).slideUp(200,function(){t(this).remove()})}),r(s,{success:function(e){if(void 0!==e.content){var a=t(e.content).hide();i.append(a),a.slideDown(200)}}},{data:n(i)})}),t(this).on("change",'select[name="tour-room"]',function(){var e=t(this).closest(".tourmaster-tour-booking-room"),a=e.siblings(".tourmaster-tour-booking-room-template").children(),i=e.siblings(".tourmaster-tour-booking-people-container"),s=!1;if(t(this).val()&&0==i.length&&((i=t('<div class="tourmaster-tour-booking-people-container" data-step="999" ></div>').hide()).insertAfter(e),s=!0),t(this).val()){var o=parseInt(t(this).val())-i.children().length;if(o>0)for(var r=0;r<o;r++){var n=a.clone();n.attr("data-step",3),n.find(".tourmaster-tour-booking-room-text > span").html(i.children().length+1),i.append(n),s||(n.hide(),n.slideDown(200))}else o<0&&i.children("div").slice(o).slideUp(200,function(){t(this).remove()});s&&i.slideDown(200)}else i.length>0&&i.slideUp(200,function(){t(this).remove()})}),t(this).on("click",'input[type="submit"]',function(){var o=!0,n=t(this),c=t(this).siblings(".tourmaster-tour-booking-submit-error"),u=t(this).siblings(".tourmaster-tour-booking-error-max-people"),l=0;return c.filter(".tourmaster-temp").slideUp(200,function(){t(this).remove()}),i.find("[data-step]").each(function(){var e=t(this).attr("data-step");if(1==e||2==e)t(this).find("input[name], select[name]").each(function(){""==t(this).val()&&(o=!1)});else if(3==e){var a=0;t(this).find("select[name]").each(function(){""!=t(this).val()&&(a+=parseInt(t(this).val()))}),a<=0?o=!1:t(this).attr("data-max-ppl")&&a>t(this).attr("data-max-ppl")?o="error2":l+=a}}),o?"error2"==o?(c.slideUp(200),u.slideDown(200)):(c.slideUp(200),u.slideUp(200),n.animate({opacity:.5}),r(s,{success:function(s){if("success"==s.status)if(o&&n.attr("data-ask-login")){var r=n.siblings('[data-tmlb-id="'+n.attr("data-ask-login")+'"]').clone();0==r.length&&(r=i.closest("form").siblings('[data-tmlb-id="'+n.attr("data-ask-login")+'"]').clone()),a(r);c=d(i);e("tourmaster-booking-detail",JSON.stringify(c),0)}else{var c=d(i);e("tourmaster-booking-detail",JSON.stringify(c),0),i.submit()}else if(void 0!==s.message){var u=t('<div class="tourmaster-tour-booking-submit-error tourmaster-temp" ></div>').html(s.message);u.insertAfter(n),u.slideDown(200)}n.animate({opacity:1})}},{action:"tourmaster_tour_booking_amount_check",tour_id:i.find('[name="tour-id"]').val(),tour_date:i.find('[name="tour-date"]').val(),traveller:l})):(c.slideDown(200),u.slideUp(200)),!1})},t.fn.tourmaster_tour_booking_sticky=function(){t(this).each(function(){var e=t(this).closest(".tourmaster-template-wrapper"),a=t(this),i=t(this).siblings(".tourmaster-tour-booking-bar-anchor"),s=parseInt(t("html").css("margin-top")),o=parseInt(i.css("margin-left"));t(this).addClass("tourmaster-start-script"),e.siblings(".tourmaster-single-header").addClass("tourmaster-start-script");var r=t(this).children(".tourmaster-tour-booking-bar-outer").children(".tourmaster-header-price");a.css("margin-top",-r.outerHeight()),i.css("margin-top",-r.outerHeight()),e.css("min-height",a.height()-r.outerHeight()),t(window).resize(function(){a.css("margin-top",-r.outerHeight()),i.css("margin-top",-r.outerHeight()),e.css("min-height",a.height()-r.outerHeight()),a.css({position:"",top:"",left:"","margin-top":i.css("margin-top")}),a.removeClass("tourmaster-fixed tourmaster-top tourmaster-bottom tourmaster-lock")});var n=0;t(window).on("scroll resize",function(){var r=!0;"mobile-landscape"!=c&&"mobile-portrait"!=c&&"tablet"!=c||(r=!1);var d=n>t(window).scrollTop()?"up":"down";n=t(window).scrollTop(),r&&t(window).scrollTop()+s+0>i.offset().top?t(window).height()>a.outerHeight()+0?t(window).scrollTop()+a.outerHeight()+s+0>e.offset().top+e.outerHeight()?a.hasClass("tourmaster-fixed-lock")||(a.css({position:"absolute",top:e.outerHeight()-a.outerHeight()-0,left:"auto","margin-top":0}),a.removeClass("tourmaster-fixed"),a.addClass("tourmaster-fixed-lock")):a.hasClass("tourmaster-fixed")||(a.css({position:"fixed",top:0+s,left:i.offset().left-o,"margin-top":0}),a.removeClass("tourmaster-fixed-lock"),a.addClass("tourmaster-fixed")):"down"==d?a.hasClass("tourmaster-top")?(a.css({position:"absolute",top:t(window).scrollTop()+0+s-a.parent().offset().top,left:"auto","margin-top":0}),a.removeClass("tourmaster-top"),a.addClass("tourmaster-lock")):t(window).scrollTop()+t(window).height()>e.offset().top+e.outerHeight()?a.hasClass("tourmaster-lock")||(a.css({position:"absolute",top:e.outerHeight()-a.outerHeight(),left:"auto","margin-top":0}),a.removeClass("tourmaster-bottom"),a.addClass("tourmaster-lock")):t(window).scrollTop()+t(window).height()>a.offset().top+a.outerHeight()&&(a.hasClass("tourmaster-bottom")||(a.css({position:"fixed",top:t(window).height()-a.outerHeight(),left:i.offset().left-o,"margin-top":0}),a.removeClass("tourmaster-top tourmaster-lock"),a.addClass("tourmaster-bottom"))):a.hasClass("tourmaster-bottom")?(a.css({position:"absolute",top:t(window).scrollTop()+t(window).height()-a.outerHeight()-a.parent().offset().top,left:"auto","margin-top":0}),a.removeClass("tourmaster-bottom"),a.addClass("tourmaster-lock")):a.hasClass("tourmaster-lock")&&t(window).scrollTop()+s+0<a.offset().top&&(a.css({position:"fixed",top:0+s,left:i.offset().left-o,"margin-top":0}),a.removeClass("tourmaster-bottom tourmaster-lock"),a.addClass("tourmaster-top")):(a.hasClass("tourmaster-fixed")||a.hasClass("tourmaster-top")||a.hasClass("tourmaster-bottom")||a.hasClass("tourmaster-lock"))&&(a.css({position:"",top:"",left:"","margin-top":i.css("margin-top")}),a.removeClass("tourmaster-fixed tourmaster-top tourmaster-bottom tourmaster-lock"))})})};var l=function(){var e=this;e.form=t("#tourmaster-payment-template-wrapper"),e.sidebar=e.form.find("#tourmaster-tour-booking-bar-inner"),e.sidebar_wrap=e.form.find("#tourmaster-tour-booking-bar-wrap"),e.content=e.form.find("#tourmaster-tour-payment-content"),e.payment_step=t("#tourmaster-payment-step-wrap"),e.payment_template=t("#tourmaster-page-wrapper"),e.init()};l.prototype={init:function(){var e=this;e.bind_script(),e.bind_script_recurring(),e.form.on("click",".tourmaster-payment-step",function(){var a=e.get_booking_detail();t(this).attr("data-name")&&(a[t(this).attr("data-name")]=t(this).attr("data-value")),t(this).attr("data-step")&&(a.step=t(this).attr("data-step")),e.check_required_field()&&e.change_step({booking_detail:a})}),e.payment_step.on("click",".tourmaster-payment-step-item",function(){if(t(this).hasClass("tourmaster-enable")){var a=e.get_booking_detail();t(this).attr("data-step")&&(a.step=t(this).attr("data-step")),e.check_required_field()&&e.change_step({booking_detail:a})}}),e.form.on("change input",".tourmaster-payment-service-form-wrap input",u(function(){var a=e.get_booking_detail();t(this).attr("data-step")&&(a.step=3),e.change_step({booking_detail:a,sub_action:"update_sidebar"})},1e3)),e.form.on("change",'input[name="payment-type"]',function(){var e=t(this).closest(".tourmaster-tour-booking-bar-total-price-wrap"),a=e.siblings(".tourmaster-tour-booking-bar-deposit-text");t(this).is(":checked")&&("full"==t(this).val()?(e.removeClass("tourmaster-deposit"),a.slideUp(200)):"partial"==t(this).val()&&(e.addClass("tourmaster-deposit"),a.slideDown(200)))})},animate_content:function(t,e){var a=t.outerHeight();t.html(e);var i=t.outerHeight();t.css({height:a}),t.animate({height:i},function(){t.css({height:"auto"},1e3)})},bind_script_recurring:function(){var e=this;e.content.find("#tourmaster-payment-method-or").each(function(){var e=(t(this).width()-t(this).children(".tourmaster-middle").width()-40)/2;t(this).children(".tourmaster-left, .tourmaster-right").css("width",e)}),t(window).resize(function(){e.content.find("#tourmaster-payment-method-or").each(function(){var e=(t(this).width()-t(this).children(".tourmaster-middle").width()-40)/2;t(this).children(".tourmaster-left, .tourmaster-right").css("width",e)})})},bind_script:function(){var e=this;e.sidebar.on("click","#tourmaster-tour-booking-bar-price-breakdown-link",function(){t(this).siblings(".tourmaster-price-breakdown").slideToggle(200)}),e.sidebar.on("click",".tourmaster-tour-booking-bar-date-edit",function(){var a=t(this).siblings("form"),i=e.get_booking_detail();a.append(t('<input name="tour_temp" />').val(JSON.stringify(i))),a.submit()}),e.sidebar.on("click",".tourmaster-tour-booking-bar-coupon-validate",function(){var a=t(this).siblings('[name="coupon-code"]'),i=t(this).siblings(".tourmaster-tour-booking-coupon-message");t.ajax({type:"POST",url:t(this).attr("data-ajax-url"),data:{coupon_code:a.val(),tour_id:t(this).attr("data-tour-id"),action:"tourmaster_validate_coupon_code"},dataType:"json",beforeSend:function(){a.animate({opacity:.3}),i.slideUp(150),i.removeClass("tourmaster-success tourmaster-failed")},error:function(t,e,a){console.log(t,e,a)},success:function(t){if(a.animate({opacity:1}),"success"==t.status){var s=e.get_booking_detail();e.change_step({booking_detail:s,sub_action:"update_sidebar"})}else i.addClass("tourmaster-"+t.status),i.html(t.message),i.slideDown(150)}})}),e.content.on("click","#tourmaster-payment-billing-copy",function(){if(t(this).is(":checked")){var e=t(this).closest(".tourmaster-payment-billing-wrap"),a=e.siblings(".tourmaster-payment-contact-wrap");e.find("[data-contact-detail]").each(function(){var e=a.find('[name="'+t(this).attr("data-contact-detail")+'"]');t(this).val(e.val())})}}),e.content.on("click","[data-tmlb]",function(){a(t(this).siblings('[data-tmlb-id="'+t(this).attr("data-tmlb")+'"]').clone())}),e.content.on("click","[data-method]",function(){var a=t(this).attr("data-action"),i=t(this).attr("data-action-type");if("ajax"==t(this).attr("data-method")){var s=e.get_booking_detail();e.change_step({action:a,type:i,booking_detail:s})}}),e.content.on("click",".goodlayers-payment-plugin-complete",function(){e.change_step({action:"tourmaster_payment_plugin_complete",step:4})})},check_required_field:function(){var e=this,a=!0,i=e.form.find(".tourmaster-tour-booking-required-error");if(i.length&&(i.slideUp(200),e.form.find("input[data-required], select[data-required], textarea[data-required]").each(function(){t(this).val()||(t(this).addClass("tourmaster-validate-error"),a=!1)}),!a)){i.slideDown(200);var s=i.offset().top-t(window).height()+200;s>0&&t("body").animate({scrollTop:s},600,"easeOutQuad")}return a},get_booking_detail:function(){var t=this,e={};t.form.attr("data-booking-detail")&&(e=JSON.parse(t.form.attr("data-booking-detail")));var a=d(t.form);for(var i in a)e[i]=a[i];return t.form.attr("data-booking-detail",JSON.stringify(e)),e},change_step:function(a,i){var s=this,a=t.extend({action:"tourmaster_payment_template"},a),i=t.extend({beforeSend:function(){void 0!==a.sub_action&&"update_sidebar"==a.sub_action||(s.content.animate({opacity:.1}),t("body").animate({scrollTop:s.payment_template.offset().top},600,"easeOutQuad")),s.sidebar.animate({opacity:.1})},error:function(t,e,a){console.log(t,e,a)},success:function(i){if(void 0!==i.content&&s.animate_content(s.content,i.content),void 0!==i.sidebar&&s.animate_content(s.sidebar,i.sidebar),void 0!==i.cookie){var o=JSON.stringify(i.cookie);e("tourmaster-booking-detail",o,0),s.form.attr("data-booking-detail",o)}if(void 0!==a.booking_detail||void 0!==a.step){if(void 0!==a.step)r=a.step;else var r=a.booking_detail.step;s.payment_step.find(".tourmaster-payment-step-item").each(function(){4==r?t(this).addClass("tourmaster-checked").removeClass("tourmaster-current tourmaster-enable"):1==t(this).attr("data-step")?t(this).addClass("tourmaster-checked").removeClass("tourmaster-current tourmaster-enable"):t(this).attr("data-step")==r?t(this).addClass("tourmaster-current").removeClass("tourmaster-checked tourmaster-enable"):t(this).attr("data-step")<r?t(this).addClass("tourmaster-enable").removeClass("tourmaster-checked tourmaster-current"):t(this).removeClass("tourmaster-checked tourmaster-current tourmaster-enable")})}s.content.animate({opacity:1}),s.sidebar.animate({opacity:1}),s.bind_script_recurring()}},i);t.ajax({type:"POST",url:s.form.attr("data-ajax-url"),data:a,dataType:"json",beforeSend:i.beforeSend,error:i.error,success:i.success})}},t(document).ready(function(){var o=t("body");t("[data-confirm]").click(function(){var e=t(this);return tourmaster_front_confirm_box({head:e.attr("data-confirm"),text:e.attr("data-confirm-text"),sub:e.attr("data-confirm-sub"),yes:e.attr("data-confirm-yes"),no:e.attr("data-confirm-no"),success:function(){window.location.href=e.attr("href")}}),!1}),t(".tourmaster-tour-item-style-grid").each(function(){var e=0,a=t(".tourmaster-tour-grid.tourmaster-tour-frame .tourmaster-tour-content-wrap");a.each(function(){t(this).outerHeight()>e&&(e=t(this).outerHeight())}),a.each(function(){var a=e-t(this).outerHeight()+parseInt(t(this).css("padding-bottom"));t(this).css("padding-bottom",a)}),t(window).resize(function(){e=0,a.css("padding-bottom",8),a.each(function(){t(this).outerHeight()>e&&(e=t(this).outerHeight())}),a.each(function(){var a=e-t(this).outerHeight()+parseInt(t(this).css("padding-bottom"));t(this).css("padding-bottom",a)})})}),t(".tourmaster-center-tour-content").each(function(){var e=t(this).siblings(".tourmaster-content-left").outerHeight();t(this).css({"padding-top":0,"padding-bottom":0});var a=(e-t(this).outerHeight())/2;a=a>0?a:0,t(this).css({"padding-top":a,"padding-bottom":a}),t(window).resize(function(){var e=t(this).siblings(".tourmaster-content-left").outerHeight();t(this).css({"padding-top":0,"padding-bottom":0});var a=(e-t(this).outerHeight())/2;a=a>0?a:0,t(this).css({"padding-top":a,"padding-bottom":a})})}),t("[data-rel=tipsy]").tipsy({fade:!0,gravity:"se"}),t("[data-tmlb]").on("click",function(){a(t(this).siblings('[data-tmlb-id="'+t(this).attr("data-tmlb")+'"]').clone())});var r=t(".tourmaster-tour-search-item");r.length&&(i(r),r.find(".tourmaster-type-filter-title i").click(function(){var e=t(this).parent().siblings(".tourmaster-type-filter-item-wrap");t(this).hasClass("tourmaster-active")?(t(this).removeClass("tourmaster-active"),e.slideUp(200)):(t(this).addClass("tourmaster-active"),e.slideDown(200))})),t(".tourmaster-user-top-bar").each(function(){if(t(this).hasClass("tourmaster-user")){var e=t(this).children(".tourmaster-user-top-bar-nav").children(".tourmaster-user-top-bar-nav-inner");t(this).hover(function(){e.fadeIn(200)},function(){e.fadeOut(200)})}}),t(".tourmaster-datepicker").tourmaster_datepicker(),o.hasClass("single-tour")?(t("#tourmaster-single-tour-booking-fields").tourmaster_tour_booking(),t("#tourmaster-tour-booking-bar-wrap").tourmaster_tour_booking_sticky(),t("#tourmaster-enquiry-form").find('input[type="submit"]').click(function(){if(t(this).hasClass("tourmaster-now-loading"))return!1;var e=t(this).closest("form"),a=t(this),i=e.find(".tourmaster-enquiry-form-message"),s=!0;return e.find("input[data-required], select[data-required], textarea[data-required]").each(function(){t(this).val()||(s=!1)}),s?(i.slideUp(300),a.addClass("tourmaster-now-loading"),t.ajax({type:"POST",url:e.attr("data-ajax-url"),data:{action:e.attr("data-action"),data:d(e)},dataType:"json",error:function(t,e,a){console.log(t,e,a)},success:function(t){a.removeClass("tourmaster-now-loading"),void 0!==t.message&&("success"==t.status?i.removeClass("tourmaster-failed").addClass("tourmaster-success"):i.removeClass("tourmaster-success").addClass("tourmaster-failed"),i.html(t.message),i.slideDown(300))}})):e.attr("data-validate-error")&&(i.removeClass("tourmaster-success").addClass("tourmaster-failed"),i.html(e.attr("data-validate-error")),i.slideDown(300)),!1}),t("#tourmaster-save-wish-list").click(function(){t(this).hasClass("tourmaster-active")||(t(this).addClass("tourmaster-active"),t.ajax({type:"POST",url:t(this).attr("data-ajax-url"),data:{action:"tourmaster_add_wish_list","tour-id":t(this).attr("data-tour-id")},dataType:"json"}))}),t("#tourmaster-single-review").tourmaster_single_review(),t("#tourmaster-urgency-message").click(function(){var a=t(this).attr("data-expire");a||(a=3600),e("tourmaster-urgency-message","1",a),t(this).fadeOut(200,function(){t(this).remove()})}),t("#tourmaster-booking-tab-title").children().click(function(){if(t(this).hasClass("tourmaster-active"))return!1;t(this).addClass("tourmaster-active").siblings().removeClass("tourmaster-active");var e=t(this).attr("data-tourmaster-tab");t(this).parent().siblings(".tourmaster-booking-tab-content").each(function(){t(this).is('[data-tourmaster-tab="'+e+'"]')?t(this).fadeIn(200,function(){t(this).addClass("tourmaster-active")}):t(this).removeClass("tourmaster-active").hide()})})):o.hasClass("tourmaster-template-user")?(s(),t(".tourmaster-print").click(function(){var e=t(this).attr("data-id");if(e){var a=t(t("#"+e).html());t("body").children().css("display","none"),t("body").append(a),window.print(),a.remove(),t("body").children().css("display","")}})):o.hasClass("tourmaster-template-payment")&&new l}),t(window).load(function(){t("body");var e=t("#tourmaster-content-navigation-item-outer");if(!t("body").is(".wp-admin")&&e.length){window.traveltour_anchor_offset=e.height();var a=e.parent(),i=parseInt(t("html").css("margin-top")),s=e.find(".tourmaster-content-navigation-slider");e.find(".tourmaster-active").each(function(){s.css({width:t(this).outerWidth(),left:t(this).position().left})}),e.on("tourmaster-change",function(){var e=t(this).find(".tourmaster-active");e.hasClass("tourmaster-slidebar-active")||(e.addClass("tourmaster-slidebar-active"),s.animate({width:e.outerWidth(),left:e.position().left},{queue:!1,duration:200}))}),t(window).resize(function(){e.trigger("tourmaster-change")}),e.each(function(){t(this).find(".tourmaster-content-navigation-tab").hover(function(){s.animate({width:t(this).outerWidth(),left:t(this).position().left},{queue:!1,duration:150})},function(){var e=t(this).parent().children(".tourmaster-slidebar-active");e.length&&s.animate({width:e.outerWidth(),left:e.position().left},{queue:!1,duration:150})})}),t(window).scroll(function(){"mobile-landscape"!=c&&"mobile-portrait"!=c&&"tablet"!=c&&(t(this).scrollTop()+i>a.offset().top?e.hasClass("tourmaster-fixed")||(e.parent().css("height",e.parent().height()),e.addClass("tourmaster-fixed"),window.traveltour_anchor_offset=e.height()):e.hasClass("tourmaster-fixed")&&(e.parent().css("height","auto"),e.removeClass("tourmaster-fixed")))})}})}(jQuery),function(t){function e(t,e){return"function"==typeof t?t.call(e):t}function a(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}function i(e,a){this.$element=t(e),this.options=a,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var a=this.getTitle();if(a&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](a),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s,o=t.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),r=i[0].offsetWidth,n=i[0].offsetHeight,d=e(this.options.gravity,this.$element[0]);switch(d.charAt(0)){case"n":s={top:o.top+o.height+this.options.offset,left:o.left+o.width/2-r/2};break;case"s":s={top:o.top-n-this.options.offset,left:o.left+o.width/2-r/2};break;case"e":s={top:o.top+o.height/2-n/2,left:o.left-r-this.options.offset};break;case"w":s={top:o.top+o.height/2-n/2,left:o.left+o.width+this.options.offset}}2==d.length&&("w"==d.charAt(1)?s.left=o.left+o.width/2-15:s.left=o.left+o.width/2-r+15),i.css(s).addClass("tipsy-"+d),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+d.charAt(0),this.options.className&&i.addClass(e(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){t(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t=this.$element,e=this.options;this.fixTitle();var a;return"string"==typeof(e=this.options).title?a=t.attr("title"==e.title?"original-title":e.title):"function"==typeof e.title&&(a=e.title.call(t[0])),(a=(""+a).replace(/(^\s*|\s*$)/,""))||e.fallback},tip:function(){return this.$tip||(this.$tip=t('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},t.fn.tipsy=function(e){function a(a){var s=t.data(a,"tipsy");return s||(s=new i(a,t.fn.tipsy.elementOptions(a,e)),t.data(a,"tipsy",s)),s}function s(){var t=a(this);t.hoverState="in",0==e.delayIn?t.show():(t.fixTitle(),setTimeout(function(){"in"==t.hoverState&&t.show()},e.delayIn))}function o(){var t=a(this);t.hoverState="out",0==e.delayOut?t.hide():setTimeout(function(){"out"==t.hoverState&&t.hide()},e.delayOut)}if(!0===e)return this.data("tipsy");if("string"==typeof e){var r=this.data("tipsy");return r&&r[e](),this}if((e=t.extend({},t.fn.tipsy.defaults,e)).live||this.each(function(){a(this)}),"manual"!=e.trigger){var n=e.live?"live":"bind",d="hover"==e.trigger?"mouseenter":"focus",c="hover"==e.trigger?"mouseleave":"blur";this[n](d,s)[n](c,o)}return this},t.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},t.fn.tipsy.revalidate=function(){t(".tipsy").each(function(){var e=t.data(this,"tipsy-pointee");e&&a(e)||t(this).remove()})},t.fn.tipsy.elementOptions=function(e,a){return t.metadata?t.extend({},a,t(e).metadata()):a},t.fn.tipsy.autoNS=function(){return t(this).offset().top>t(document).scrollTop()+t(window).height()/2?"s":"n"},t.fn.tipsy.autoWE=function(){return t(this).offset().left>t(document).scrollLeft()+t(window).width()/2?"e":"w"},t.fn.tipsy.autoBounds=function(e,a){return function(){var i={ns:a[0],ew:a.length>1&&a[1]},s=t(document).scrollTop()+e,o=t(document).scrollLeft()+e,r=t(this);return r.offset().top<s&&(i.ns="n"),r.offset().left<o&&(i.ew="w"),t(window).width()+t(document).scrollLeft()-r.offset().left<e&&(i.ew="e"),t(window).height()+t(document).scrollTop()-r.offset().top<e&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(jQuery);