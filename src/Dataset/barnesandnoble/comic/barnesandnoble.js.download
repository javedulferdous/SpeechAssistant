//! Copyright 2020 Smarter Remarketer, Inc.
try{!function(a,b,c){if("undefined"==typeof c||c&&!c.loaded){"function"!=typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var d=!1;a.shqChromeOnsiteResponse=[];var e,f="2.7.17",g=[".barnesandnoble.com"],h="tr2.smarterhq.io",i="app1",j="onsiteshq.smarterhq.io",k="",l="api/v3/onsite",m="api/productViews",n="450",o=!0,p=!1,q="//"+j+"/"+l+"/",r=!0,s="bnslfzpupy-1",t=!1,u=!1,v=function(a){return a},w=function(a,b){return a},x=[],y="",z=!1,A=function(a){return!0},B=function(){},C=function(){return!1},D=function(){return!1},E=function(){},F=!0,G=function(){return!0},H=function(a){return!1},I=function(){return a.digitalData},J=function(a,b){var c=a;return(""+b).split(".").forEach(function(a){null!==c&&(c="undefined"==typeof c[a]?null:c[a])}),c},K=function(a){if(a&&a.indexOf("quickview")>-1){var b,c=a.split("?"),d=c[1],e=(c[0],d?Qb(d):{}),f=e?e.ean:"",g=I();return f&&g.product&&(b=g.product.filter(function(a,b){return a&&a.productInfo&&a.productInfo.sku===f})[0]),b?b.productInfo:null}},L=function(){return J(a,"digitalData.page.pageInfo.pageType")},M=function(a){var b=I();return b&&b.page&&b.page.pageInfo?a?b.page.pageInfo?b.page.pageInfo[a]:null:b.page.pageInfo:null},N=function(a,b){var c=I();return c&&c.product?void 0===a?c.product:a>-1&&!b?c.product[a]:a>-1&&b&&c.product[a]?c.product[a][b]:null:null},O=function(a,b,c){var d=I();if(d&&d.user&&d.user[0]&&d.user[0].profile&&d.user[0].profile[0]){var e=d.user[0].profile&&d.user[0].profile[0];return void 0!==a&&void 0===b&&void 0===c?e[a]:void 0!==a&&void 0!==b&&void 0===c&&e[a]?e[a][b]:void 0!==a&&void 0!==b&&void 0!==c&&e[a]&&e[a][b]?e[a][b][c]:e.profile}return null},P=function(a){var b=[],c=[];if(a&&a.length){for(var d=0;d<a.length;d++){var e=a[d],f=e.price,g=e.productInfo,h=e.quantity;g&&g.sku&&(b.push({productId:g.sku,qty:h?h:1,price:f&&f.basePrice?f.basePrice:1}),c.push({custom_productid:g.sku,custom_product_name:g.productName?g.productName:null,productId_scraped:g.sku}))}return{cartItems:b,customProductDetails:c}}return hb("COULD NOT FIND CART ITEMS","warn"),{}},Q=function(a,b){if(a){var c=a.price?a.price.basePrice:1,d=P(a.item),e=d.cartItems,f=d.customProductDetails;e&&e.length?Dd({pageType:"cart",cartItems:e,cartTotal:c,scraped_products:f}):0===b?ee():hb("ERROR PROCESSING CART","error",arguments)}else hb("COULD NOT FIND CART OBJECT","error")},R=function(a){var b,c=I();return c.cart&&c.cart.price&&void 0!==c.cart.price.basePrice&&(b=c.cart.price.basePrice),c?"total"===a?b:"process"!==a?c.cart:void Q(c.cart,b):(hb("could not get cart object","error"),null)},S=function(a,b,c){if("quickview"===L()){var d=K(c.url);if(d&&d.sku){var e="https://prodimage.images-bn.com/pimages/"+d.sku+"_p0_v2_s550x406.jpg";Dd({pageType:"product",productId:d.sku,scraped_products:[{custom_image_url:e?e:null,custom_product_url:d.productURL?d.productURL:null,custom_productid:d.sku,custom_product_name:d.productName?d.productName:null,productId_scraped:d.sku}]})}}},T=[],U=[{label:"mount quickview watcher",code:function(){a.jQuery&&a.jQuery(b).ajaxComplete(S)}},{label:"Product Page",code:function(){if("pdp"===M("pageType")){var a=N(0,"productInfo"),c=b.getElementById("pdpMainImage")?b.getElementById("pdpMainImage").src:"";a&&a.sku?Dd({pageType:"product",productId:a.sku,scraped_products:[{custom_image_url:c?c:null,custom_product_url:a.productURL?a.productURL:null,custom_productid:a.sku,custom_product_name:a.productName?a.productName:null,productId_scraped:a.sku}]}):hb("Could not get product ID","error",a)}}},{label:"Collect Customer Key",code:function(){setTimeout(function(){if(!Nb.get("shq_custKey_col")){var a=O("profileInfo","customerKey");a&&(Dd({pageType:"category",catName:"capturedCustomerKey",catId:"capturedCustomerKey",ctid:a}),hb("Customer Key Collected","ok",a),Nb.set("shq_custKey_col",!0))}},2e3)}},{label:"Category",code:function(){if("category"===M("pageType")||"storefront"===M("pageType")){var a=M("pageName");if(a){var b=a.split(":").pop();Dd({pageType:"category",catName:b,catId:b})}}}},{label:"Checkout",code:function(){var a=M("pageType"),b=Nb.get("shq_checkoutFired");if(a&&"checkout"===a.toLowerCase()){"true"!==b&&(Td(),Nb.set("shq_checkoutFired","true"));var c=M("pageName");c&&(c.toLowerCase().indexOf("delivery")>-1?Dd({pageType:"category",catName:"checkout_shipping",catId:"checkout_shipping"}):c.toLowerCase().indexOf("payment")>-1&&Dd({pageType:"category",catName:"checkout_payment",catId:"checkout_payment"}))}else Nb.set("shq_checkoutFired","false")}},{label:"Cart",code:function(){var a=M("pageType");a&&"cart"===a.toLowerCase()&&R("process")}},{label:"Purchase",code:function(){var b=M("pageType");if(b&&"receipt"===b.toLowerCase()){var c=J(a,"digitalData.transaction");if(c){var d=c.item,e=c.transactionID,f=c.total&&c.total.basePrice?c.total.basePrice:1,g={};if(d&&d.length){for(var h=[],i=0;i<d.length;i++){var j=d[i];if(j.productInfo&&j.productInfo.sku){var k=j.productInfo.sku,l=j.price&&j.price.basePrice?j.price.basePrice:1,m=j.quantity?j.quantity:1;h.push({productId:k,qty:m,price:l})}}h.length?g.orderItems=h:g.usebasket=!0}else g.usebasket=!0;g.usebasket||(g.total=f),g.orderid=e?e:"noOrderId-"+Jc(),g.pageType="purchase",Dd(g)}}}},{label:"Search",code:function(){var a=M("pageType");if(a&&"onsite search"===a.toLowerCase()){var c=b.getElementById("searchBarBN")?b.getElementById("searchBarBN").value:"";c&&Dd({pageType:"search",searchPhrase:c})}}},{label:"listen for cart changes",code:function(){var a=R("total"),b=a,c=setInterval(function(){try{b=R("total"),b!==a&&(R("process"),a=b)}catch(d){hb("error monitoring for cart total","error",d),clearInterval(c)}},1e3)}}],V=[],W=[],X=[],Y=[],Z=[],$=[],_=[],aa=[],ba=!1,ca=!1,da=1.5,ea=!1,fa=!1,ga=!0,ha="always",ia=5,ja=20,ka=!1,la={product:!1,category:!1,search:!1,other:!1},ma=["432236d3-5e0f-5d7f-a53f-aacccdf1315b","348a71fb-b0ec-5289-b547-5cb2b823a622","cf0aa52e-efcc-5a2c-95a2-380f94d26b2e","dac0a41d-7a55-5e70-8e3d-575efbdbd70b","49b443f5-c6b0-557d-85e8-12e41946e949","2c92c18f-2538-5857-afb8-df3af6b3b37c","a34d78e3-8a6c-5402-8069-5b30fe36836c","264f3f93-d54a-5f23-ada4-858a3e51091d","f3fcb6e9-c271-5872-9d49-e2ba626dbefa","ca69ba3d-4679-5181-9263-29616b04db79","788a8723-c3b2-5df6-aad5-1a5fa8f14b1f","7ef80ff3-5ee8-5ed2-a72f-e6e1eca536a2","1be080e7-b8de-51d8-8da0-667e310c6ec9","6e587909-252e-57e0-ae89-0ebd2e5862c7","00003426-2e36-5f9f-bdd2-ed870a09988c","d0ceea74-de05-584c-b1ee-b1ab3b14a6b4","17c53e80-d36a-55d3-8e8b-92d62aaec845","f599889b-9eab-588b-96fd-d8ebc488a667","a4e82bd9-66ff-5b96-ac14-5dd68b77e9b6","88ba7332-b563-510e-83e9-759a4a6a0c40","b9f31b82-f564-5b18-9e73-b8719721fff2","d818b736-6506-5793-bc74-4b4365c50265","299a8662-c5c8-5fff-b014-457ee4d68b22","70594799-7f88-56c4-95f9-d74a2498ebb7","0e5b9e78-6286-5b0c-aaec-11f5c2a0ec29","daf3fc54-b44a-5a72-a0eb-44b66c59678e","80871c2c-f0ff-5f32-8842-dfa056261775","c4bc05e6-0996-54fc-90da-aadd135c0a9e","aa5fa7d6-fb95-5baa-a480-5fb85c77b504","cf8aad0b-1cc9-563f-b036-e2fe1c147ed7","5ee41f8e-0bbc-5a61-a217-d18b32fb00e2","b2e0611d-5068-5d02-8f1c-cb438ea288a9","48f8aed5-1f5b-5881-b53a-8c25b79e6397","76f7352f-43af-5a52-9fdd-3c168fc6d6a2","5c152194-edfd-58d4-ba25-a3721189b908"],na=null,oa=[],pa="utm_campaign",qa="st",ra="sourceId",sa="utm_term",ta="utm_content",ua="mi_u",va="smtrid",wa="scenid",xa=null,ya=null,za="false",Aa="smtrotr",Ba=!1,Ca=Ba,Da={},Ea={},Fa="//"+h+"/"+i+"/",Ga=null,Ha=2048,Ia="smtrrmkr",Ja="mdllgx",Ka="smtrsession",La="^",Ma="|",Na=!1,Oa="srDbg",Pa="SmarterHandler.ashx",Qa="OnsiteHandler.ashx",Ra="smtr1x1.gif",Sa="_smtr.postprocess",Ta="_smtr.onsite",Ua="",Va=function(){var a=M("pageType");return a&&"receipt"===a.toLowerCase},Wa=null,Xa=1,Ya=function(){},Za={eReview:xa||{Min:1,Max:5},EmailType:ya||{account:0,transact:1,marketing:2,alert:3,click:4},AddressType:{billing:1,shipping:2,mailing:3},PhoneType:{home:1,work:2,mobile:3,other:4},FunType:{Checkout:1,Shipping:2,Payment:3,Promo:4,Gift:5},PageType:{Product:0,Search:1,Cart:2,Category:3,Purchase:4,Other:5,ForceCookie:5,OnSiteLoad:6,OnSiteInteraction:7,OnSiteLoadInlineTags:8,OnSitePauseTargets:9},PayType:{unknown:-1,cc:0,visa:1,mc:2,amex:3,pp:4,bml:5,other:6,disc:7,google:8,gc:9,diners:10,jcb:11,amazon:12},PaymentInt:{cn:"icn",em:"iem",ey:"iey",cvv:"icvv"},ShipType:{other:-1,free:0,nextday:1,twoday:2,threeday:3,standard:4,fedex2day:5,fedexonight:6,willcall:7,pickup:8,ground:9,special:10,overnight:11,express:12,usps:13,supersaver:14,fedex3day:15,fedexstd:16,fedexsmpost:17,rush:18,premium:19,upssurepost:20,uspspriority:21},productList:{listId:{favorites:0,wishlist:1,wishList:1},listActionType:{add:0,qtyChange:1,qtychange:1,removeproduct:2,removeProduct:2,remove:2,removeAll:3,removeall:3}},trackRecs:{source:{shopper:1,person:1,product:2,products:2},action:{view:1,click:2}},strikeIron:{1:"valid",2:"domain_confirmed",3:"high_risk",4:"invalid_or_dead",5:"error"}},$a="https://"+h+"/v2/"+s,_a="https://strikeiron.smarterhq.io/v1/"+s,ab={email:$a+"/emails",strikeiron:{validate:_a+"/verifyEmail"},cart:{view:$a+"/cart",add:$a+"/cart/add",qty:$a+"/cart/quantity",remove:$a+"/cart/remove",empty:$a+"/cart/empty"}},bb={error:"#e25151",warning:"#ffd800",warn:"#ffd800","standard log":"#00d8ff","default":"#00d8ff",ok:"#57e050",purple:"#af7adb",info:"#00d8ff"},cb=na?!0:!1,db={email_matching_parameter:ua,trackingString:{singleParam:cb,campaign:cb?na.campaign:pa,medium:cb?na.medium:qa,content:cb?na.content:ta,term:cb?na.term:sa,source:cb?na.source:ra,singleParamDelim:cb?na.delim:null,singleParamKey:cb?na.param:null},web_personalization_enabled:Ba},eb=!1,fb=!1,gb={cInternal:!1,set check(a){this.cInternal=a,this.dispatch()},waiting:!1,get check(){return this.cInternal},cbFuncs:[],cbArgs:[],watch:function(a,b){this.cbFuncs.push(a),this.cbArgs.push(b)},dispatch:function(){for(var a=this.cbFuncs,b=this.cbArgs,c=a.length,d=0;c>d;d++){var e=a.pop(),f=b.pop();hb("Queuing request with the updated cookie","ok",[e,f]),e.apply(null,f)}}},hb=function(b,c,d,e){if(a._shqdbl.push({message:b,logType:c,auxContent:d}),e||fb){c=c?c.toLowerCase():"default";var f=bb[c]?bb[c]:bb["default"];a.console.log("%cSHQ LOG: %c"+b,"color:"+bb.purple+";font-size:16px;font-weight:bold;","color:"+f+";font-size:16px;font-weight:bold;",d)}},ib=function(b){var c=b+" IS A DEPRECATED FUNCTION",d=jb(a.location.href,"shq_debugging_enabled",!0),e="click here to enable SHQ debugger logging: "+d;hb(c,"error",e,!0)},jb=function(a,b,c){if(a&&void 0!==b&&void 0!==c){var d,e;return e=a.indexOf("?")>-1?"&":"?",d=a+e+b+"="+c}return hb("Could not add query string parameter because param or value are undefined","error"),!1},kb=function(a){var b=/^([a-zA-Z0-9_\-\.\+]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;return a?b.test(a):!1},lb=function(){},mb=!1,nb=function(){hb("modal close hook","log",b.querySelector(".shq_force_close")),b.querySelector(".shq_force_close")&&b.querySelector(".shq_force_close").addEventListener("click",function(){lb()})},ob=function(a){if("object"!=typeof a||null===a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=ob(a[c]));return b},pb=new Date,qb=function(){var a={expiresAt:null,path:"/",domain:null,secure:o,samesite:"none"},c=function(b){var c=ob(a);return"object"==typeof b&&null!==b&&("object"==typeof b.expiresAt&&b.expiresAt instanceof Date&&(c.expiresAt=b.expiresAt),"string"==typeof b.path&&""!==b.path&&(c.path=b.path),"string"==typeof b.domain&&""!==b.domain&&(c.domain=b.domain),b.secure===!0&&(c.secure=b.secure),b.samesite&&(c.samesite=b.samesite)),c},d=function(a){return a=c(a),("object"==typeof a.expiresAt&&a.expiresAt instanceof Date?"; expires="+a.expiresAt.toGMTString():"")+"; path="+a.path+("string"==typeof a.domain?"; domain="+a.domain:"")+(a.samesite?"; samesite="+a.samesite:"")+(a.secure===!0?"; secure":"")},e=function(){var a,c,d,e,f={},g=b.cookie.split(";");for(a=0;a<g.length;a+=1){c=g[a].split("="),d=c[0].replace(/^\s*/,"").replace(/\s*$/,"");try{e=decodeURIComponent(c[1])}catch(h){e=c[1]}f[d]=e}return f},f=e(),g=function(a,b){return b&&b===!0&&(f=e()),"undefined"!=typeof f[a]?f[a]:null},h=function(a){return a&&a===!0&&(f=e()),f},i=function(a,c,e){var f=e||{};("undefined"==typeof c||null===c)&&(c="",f.expiresAt=new Date(pb.getTime()+-31536e6)),k&&(f.path=k);var g=d(f);b.cookie=a+"="+encodeURIComponent(c)+g},j=function(a,b){i(a,null,b)},l=function(){var a=!1,b="_s_R",c="data";return i(b,c),g(b,!0)===c&&(j(b),a=!0),a};return{get:g,getAll:h,set:i,del:j,test:l}}(),rb=(function(){try{new a.CustomEvent("test")}catch(c){var d=function(a,c){var d;return c=c||{bubbles:!1,cancelable:!1,detail:void 0},d=b.createEvent("CustomEvent"),d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d};d.prototype=a.Event.prototype,a.CustomEvent=d}}(),function(a){a=a||{};var b=Ub("onLanguage",a);id=Za.PageType.Language,Tc({action:"language",browserLanguage:a.language,clientSiteLanguage:a.clientSiteLanguage},!0,null,b)}),sb=function(b){try{a._smtr.postprocess(b)}catch(c){}},tb=function(a){try{Vc("jsonRequestError",a,a.readyState,"Invalid ReadyState")}catch(b){}},ub=function(a,b,c){try{var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(d.status>=200&&d.status<400?"undefined"!=typeof b&&b(JSON.parse(d.responseText)):"undefined"!=typeof c&&c(d))},d.open("GET",a,!0),d.send()}catch(e){}},vb=function(a){a=a||{};var b=Ub("onExperienceView",a);Tc({action:"onexperienceview",onsiteExperienceId:Fb.ExperienceId,onsiteContentId:Fb.ContentId,onsiteTargetId:Fb.TargetId,scenarioId:Fb.ScenarioId,UTCDateTime:(new Date).getTime().toString()},!0,null,b)},wb=function(){return y?y:ad(pa)},xb={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return xb.Android()||xb.BlackBerry()||xb.iOS()||xb.Opera()||xb.Windows()}},yb=navigator&&navigator.userAgent?navigator.userAgent:"",zb=function(a){var b=new Date;return b.setTime(b.getTime()+864e5*a),b},Ab=function(a){return"string"!=typeof a||-1===a.toLowerCase().indexOf(b.domain.toLowerCase())&&-1===b.domain.toLowerCase().indexOf(a.toLowerCase())?!1:!0},Bb=function(){var a=null;if(g&&Array.isArray(g))for(var b=0;b<g.length;b++)if(Ab(g[b])){a=g[b];break}return a},Cb=function(a){var b={};if(a&&a.ce&&(b.expiresAt=zb(a.ce)),a&&a.cp&&(b.path=a.cp),a&&a.cd)b.domain=a.cd;else{var c=Bb();c&&(b.domain=c)}return a&&a.samesite&&(b.samesite=a.samesite),a&&a.secure&&(b.secure=a.secure),b},Db=function(){var a,b={blockReqs:1,rethrowErrors:2,logOnErrorEvt:4,testFlag:16};a=qb.get(Oa);var c=a||0,d=null!==a,e=function(){qb.set(Oa,c,Cb({ce:"1",cp:"/",samesite:"none",secure:o}))};return{check:function(a){return b[a]?c&b[a]:0},set:function(a){var d=b[a]?c|=b[a]:0;return e(),d},setNoCookie:function(a){var e=b[a]&&!d?c|=b[a]:0;return e},clear:function(a){var d=b[a]?c&=~b[a]:0;return e(),d},toggle:function(a){var d=b[a]?c^=b[a]:0;return e(),d}}}(),Eb=function(a){return Db.toggle(a)?!0:!1};e=qb.get(Ia);var Fb,Gb=null,Hb={loiid:null,sessionid:null,sessionChanged:!1,newVisitor:!e,prevSessionTimestamp:null},Ib=function(a){if(a){var b=a.split("^");b[1]&&(Hb.loiid=b[1]),b[2]&&(Hb.sessionid&&Hb.sessionid!==b[2]&&(Hb.prevSessionid=Hb.sessionid,Hb.sessionChanged=!0),Hb.sessionid=b[2]),b[0]&&(Hb.prevSessionTimestamp=b[0])}},Jb=function(a){var b=6e4,c=b*ja,d=a/1e4-621355968e5,e=(new Date).getTime(),f=e-d;return f>c?(hb("Cookie Session Expired","warn"),!0):!1},Kb=function(){var a=(new Date).getTime(),b=1e4*(a+621355968e5);return b},Lb=function(a){if(e){var b=e.split("^");return b[0]=a,e=b.join("^"),Ib(e),qb.set(Ia,e,Cb({ce:"730",cp:k,samesite:"none",secure:o})),e}return Dd({pageType:"other",cu:!0}),!1},Mb="00000000-0000-0000-0000-000000000000",Nb=function(){var a,b={};a=qb.get(Ka);var c=function(){a="";for(var c in b)if(b.hasOwnProperty(c)){if(a.length>4e3)break;a+=c+(b[c]?Ma+b[c]:""),a+=La}var d=a.lastIndexOf(La);-1!==d&&(a=a.slice(0,d));var e=Bb(),f=new Date(pb.getTime()+60*ja*1e3);qb.set(Ka,a,e?{domain:e,expiresAt:f,secure:o,samesite:"none"}:{expiresAt:f,samesite:"none",secure:o})};if(a){for(var d=a.split(La),e=0;e<d.length;e++)if(d[e]){var f=d[e].split(Ma);f[0]&&(b[f[0]]=f.length>1?f[1]:null)}c()}return{get:function(a){return b[a]?b[a]:null},set:function(a,d){return"undefined"==typeof d&&(d=null),b.hasOwnProperty(a)&&b[a]===d?!1:(b[a]=d,c(),!0)},remove:function(a){return b.hasOwnProperty(a)?(delete b[a],c(),!0):!1},updateTimeout:function(){var a=0;for(var d in b)if(b.hasOwnProperty(d)){a++;break}a>0&&c()}}}(),Ob=[],Pb=function(a){var b=Object.prototype.toString.call(a);return("object"==typeof a||"function"==typeof a)&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(b)&&"length"in a&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)?!0:!1},Qb=function(a){return a?(a.indexOf("?")>-1&&(a=a.replace(/\?/g,"")),JSON.parse('{"'+decodeURI(a.replace(/&/g,'","').replace(/=/g,'":"'))+'"}')):void 0},Rb=function(a,b,c,d){try{if("undefined"!=typeof a&&Array.isArray(a)&&a.length>0)for(var e=0;e<a.length;e++){var f=a[e];try{c=c||[],"function"==typeof f?f.apply(this,c):"object"==typeof f&&"function"==typeof f.code&&("undefined"==typeof a[e].condition||"boolean"==typeof a[e].condition&&a[e].condition||"function"==typeof a[e].condition&&a[e].condition(c,d)===!0)&&f.code.apply(this,c)}catch(g){Vc((b?b+": ":"executeFuncBlock: ")+(f.label?f.label:""),g,1001)}}}catch(g){Vc("executeFuncBlock: "+b,g,1e3)}},Sb=[],Tb=function(a){return ib("getSrObjList"),Sb},Ub=function(b,c){var d={action:b,passed:ob(c),srPageView:[],srImgReq:[]};return Sb.push(d),a._shqdbl.push({"tracking event":d.action,eventBody:d}),fb&&a.console.log("%cSHQ TRACKING EVENT: %c"+d.action,"color:#af7adb;font-size:16px;font-weight:bold;","color:#00d8ff;font-size:16px;font-weight:bold;",d),d},Vb=function(){try{return a.location.pathname.toLowerCase()}catch(b){return Vc("pnlc",b,7,"couldn't read pathname!"),""}}(),Wb=function(a){if("string"==typeof a)return-1!==Vb.indexOf(a.toLowerCase());if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(Wb(a[b]))return!0;return!1}return!1},Xb=function(){try{var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=a.location.search.substring(1),g={};for(b=d.exec(f);b;){try{g[e(b[1]).toLowerCase()]=e(b[2])}catch(h){g[e(b[1]).toLowerCase()]=""}b=d.exec(f)}return g}catch(h){return Vc("readUrlParams",h,8,"couldn't read url params"),{}}},Yb=Xb(),Zb=function(a){var b=null;if(Yb&&Yb[a]){var c=decodeURIComponent(Yb[a]);c.indexOf("?")>-1&&(c=c.split("?")[1]),b=c?Qb(c):null}return b},$b=function(a){var b,c="";if(Yb&&Yb[a.toLowerCase()])c=Yb&&Yb[a.toLowerCase()]?Yb[a.toLowerCase()]:null;else if(Array.isArray(oa)&&oa.length)for(var d=0;d<oa.length;d++)b=Zb(oa[d]),b&&b[a]&&(c=b[a]);else oa&&"string"==typeof oa&&(b=Zb(oa),b&&b[a]&&(c=b[a]));return c},_b=function(a){var b=location.hash.match(new RegExp(a+"=([^&]*)"));return b?b[1]:null},ac=function(){var c=function(a,b,c,d){for(var e=!0,f=0,g=a.length;g>f;f++)ac(a[f],b,c,d)||(e=!1);return e},d=function(){Uc("addEvent","could not attach to element")};return b.addEventListener?function(b,e,f,g){var h=!1;return b&&b.nodeName||b===a?(b.addEventListener(e,f,g),h=!0):b&&(Array.isArray(b)||Pb(b))?h=c(b,e,f,g):d(),h}:function(b,e,f,g){var h=!1;return b&&b.nodeName||b===a?(b.attachEvent("on"+e,function(){return f.call(b,a.event)}),h=!0):b&&Array.isArray(b)?h=c(b,e,f,g):d(),h}}(),bc=function(a){var b=null;return a&&a.value&&(b=a.value),b},cc=function(a){return bc(b.getElementById(a))},dc=function(a){return b.evaluate?b.evaluate(a,b,null,9,null).singleNodeValue:null},ec=function(){if(!b.getElementById("shq_injected_content")&&Ba){var a=b.createElement("div");a.id="shq_injected_content",b.body.appendChild(a)}},fc=function(a){var b=a?a.offsetHeight:0;return b},gc=function(a,c,d,e){var f=(a.elId,c.modal),g=c.body,h=c.topEl,i=c.arrow,j=a.extraTabHeight;if(j&&!Number(j)?(j=0,hb("Extra Tab Height can not be converted to a number","error",a)):j=Number(j),a.isDrawer){var k;if(0===d){if(k=fc(f)+j,f.setAttribute("isclosed",!0),!eb){tc("Modal Close",a.gaName);var l=new CustomEvent("shqModalClosed",{detail:{modalName:a.name}});b.dispatchEvent(l)}}else k=fc(g)+j;f.style.bottom=-1*k+"px",f.setAttribute("isopen",!1),i&&(i.style.transform="rotate(0deg)")}else h.style.display="none",h.setAttribute("aria-hidden",!0)},hc=function(a,b,c){var d=b.modal;if(d){d.removeAttribute("aria-hidden"),d.style.display="block",d.parentElement.style.display="block",d.style.bottom=0,d.setAttribute("isopen",!0);var e=b.arrow;tc("Impression",a.gaName),c&&vb(c),e&&(e.style.transform="rotate(180deg)")}},ic=function(){for(var a=b.querySelectorAll(".shq_style_inject"),c=0;c<a.length;c++){var d=a[c].innerHTML,e=b.createElement("style");e.classList.add("shq_style"),e.innerHTML=d,b.head.appendChild(e),a[c].parentNode.removeChild(a[c])}},jc=function(a,b){if(a&&a.querySelectorAll("img").length>0)for(var c=a.querySelectorAll("img"),d=0;d<c.length;d++)c[d].getAttribute("alt")||(0===d?c[d].setAttribute("alt",b):c[d].setAttribute("alt",b+" "+d),hb("Forced Image Alt","error",c[d])),c[d].getAttribute("src")||c[d].dataset.src||(c[d].remove(),hb("Removed IMG with no source","error"))},kc=function(a){var b=a.querySelectorAll("a");if(b.length>0)for(var c=0;c<b.length;c++)b[c].getAttribute("href")||(b[c].setAttribute("href","#"),hb("Forced Link HREF","error",b[c]))},lc=function(a){var b=a.querySelectorAll("input");if(b.length>0)for(var c=0;c<b.length;c++){var d=b[c];d.getAttribute("aria-label")||(hb("Forced aria-label for Input","error",d),d.getAttribute("type")?d.setAttribute("aria-label",d.getAttribute("type")):d.getAttribute("placeholder")?d.setAttribute("aria-label",d.getAttribute("placeholder")):d.getAttribute("value")?d.setAttribute("aria-label",d.getAttribute("value")):d.classList&&d.setAttribute("aria-label",d.classList[0]))}},mc=function(a,b,c,d,e){hb("validating email using strikeiron","ok",a),d&&d.classList.add("shq_pending"),Zc({method:"POST",url:ab.strikeiron.validate,body:{email:a}},function(a){hb("strike iron response","log",a),e&&e(a,b,c,d)})},nc=function(c,d,e,f,g){e.externalpost?Ya(e,d,g):setTimeout(function(){var d=b.querySelector(f+" .shq_form")?b.querySelector(f+" .shq_form"):f?b.querySelector(f+" form"):null,g=b.querySelector(f+" .shq_email_input"),h=b.querySelector(f+" .shq_input_button"),i=c.querySelector(".shq_email_success"),j=c.querySelector(".shq_email_default"),k=c.querySelector(".shq_email_error");jc(k,"Please try again"),jc(i,"Thank you for subscribing"),jc(j,"Please sign up to receive emails"),jc(c,"Modal Image"),kc(c),lc(c),i&&i.setAttribute("aria-hidden",!0),k&&k.setAttribute("aria-hidden",!0);var l=function(a){var b=[!0,null,null,null];if(a){for(var c=a.querySelectorAll("input[required='true']")||[],d=0;d<c.length;d++)if(c[d]){var e=!1,f=c[d],g=f.dataset?f.dataset.shqErrorMessage:null;switch(f.type){case"text":e=f.value;break;case"email":e=kb(f.value);break;case"checkbox":e=f.checked;break;default:e=!0}if(e)continue;return hb("Missing Required Field","error",f),[e,g,f]}return b}return b},m=function(f){f.preventDefault();var h=l(d),m=c.querySelector(".shq_error_message"),n=function(){c.classList.remove("error"),k&&k.setAttribute("aria-hidden",!0),c.classList.add("success"),i&&(i.removeAttribute("aria-hidden"),i.style.disply="block",hb("success slide","log",i)),j&&j.setAttribute("aria-hidden",!0),Od({email:g.value,type:e.emailType}),Dd({pageType:"category",catId:"email_captured_"+e.name,catName:"email_capture_intercept"}),tc("Email Collected",e.gaName);var a={};if(d)for(var f=d.getElementsByTagName("input"),h=0;h<f.length;h++)f[h].hasAttribute("name")&&f[h].value&&(a[f[h].name]=f[h].value);var l=d&&d.action?d.action:"",m=new CustomEvent("shqEmailCollected",{detail:{modalName:e.name,modalOptions:e,email:g.value,formData:a,formAction:l}});b.dispatchEvent(m),eb=!0},o=function(a){kb(g.value)||hb("email failed validation","error",g.value),c.classList.add("error"),k&&k.removeAttribute("aria-hidden"),i&&i.setAttribute("aria-hidden",!0),a[1]&&m&&(m.textContent=a[1]),a[2]&&a[2].classList.add("shq_input_error")},p=function(a,b,c,d){if(a&&a.categoryId){var e,f=b&&b.dataset?b.dataset.shqErrorMessage:null,g=c.getStrikeIronErrors();if(g){var h=Za.strikeIron[a.categoryId];h&&g&&g[h]?e=g[h]:(e=f,hb("Could not find custom Strike Iron error for "+h,"error",arguments))}else e=f;d&&d.classList.remove("shq_pending"),1===a.categoryId?n():o([!0,e,b,null])}};if(!eb&&kb(g.value)&&h[0])if(za===!0)if(a.FreshAddress&&"function"==typeof a.FreshAddress){var q={emps:!1,rtc_timeout:1200};a.FreshAddress.validateEmail(g.value,q).then(function(a){var b=function(a){var b={passedValidation:!1,userMessage1:"",userMessage2:""};return a.isServiceError()?(b.passedValidation=!0,b):(a.isValid()?a.hasSuggest()?(b.userMessage1="We may have detected a typo.",b.userMessage2="- Did you mean to type "+a.getSuggEmail()+"?"):b.passedValidation=!0:a.isError()||a.isWarning()?a.hasSuggest()?(b.userMessage1=a.getErrorResponse()+".",b.userMessage2="- Did you mean to type "+a.getSuggEmail()+"?"):b.userMessage1=a.getErrorResponse()+".":b.passedValidation=!0,b)},d=b(a),e=function(a){a.passedValidation===!0?n():c.classList.add("error")};e(d)})}else Vc("Fresh Address Email Validation","none","none","Fresh Address client-side library not included"),n();else e.useStrikeIron?mc(g.value,g,e,c,p):n();else o(h)};d&&ac(d,"submit",function(a){m(a)},!1),h&&ac(h,"click",function(a){m(a)},!1),pc(g,m,"event")},0)},oc=!1,pc=function(a,b,c){a&&a.addEventListener("keypress",function(a){"Enter"===a.key&&"function"==typeof b&&(c?"event"===c&&b(a):b())})},qc=function(a){if(a&&a.length)for(var b=0;b<a.length;b++){var c=a[b];c&&c.dataset.src?c.dataset.src!==c.src?c.src=c.dataset.src:hb("data-src and src have the same value","error",c):hb("could not find data-src for image","error",c)}},rc=function(c,d){if(!c.nodeName)return c;var e=c&&c.querySelector("#shq_content_settings")?c.querySelector("#shq_content_settings").dataset:c.dataset,f={type:e.type?e.type.toLowerCase():null,name:e.name?e.name.toLowerCase():d.ExperienceName.replace(/\s/g,"_").toLowerCase(),gaName:e.name?d.ExperienceName.replace(/-/g,"_").toLowerCase():d.ExperienceId,elId:c.getAttribute("id"),emailCollection:e.emailCollection?"true"===e.emailCollection.toLowerCase():!1,emailType:e.emailType?e.emailType.toLowerCase():"marketing",fireEvent:e.fireEvent?e.fireEvent.toLowerCase():null,fireDelay:e.fireDelay?parseInt(e.fireDelay,0):1e3,fireClickTarget:e.fireClickTarget?e.fireClickTarget:null,fireAnimation:e.fireAnimation?e.fireAnimation.toLowerCase():null,supressFirstPage:e.supressFirstPage?"true"===e.supressFirstPage.toLowerCase():!1,suppressFirstPage:e.suppressFirstPage?"true"===e.suppressFirstPage.toLowerCase():!1,suppressUseDomain:e.suppressUseDomain?e.suppressUseDomain.toLowerCase():!1,supressMobile:e.supressMobile?"true"===e.supressMobile.toLowerCase():!1,suppressMobile:e.suppressMobile?"true"===e.suppressMobile.toLowerCase():!1,suppressmobile:e.suppressmobile?"true"===e.suppressmobile.toLowerCase():!1,supressmobile:e.supressMobile?"true"===e.supressMobile.toLowerCase():!1,forceFrequencyCap:e.forceFrequencyCap?"true"===e.forceFrequencyCap.toLowerCase():!1,exitImageSrc:e.exitImageSrc?e.exitImageSrc:"https://global.smarterhq.io/Global/shq_global_x.png",externalpost:e.externalpost?e.externalpost:!1,position:e.position?e.position:"bottom",size:e.size?e.size:"medium",displaySpeed:e.displaySpeed?e.displaySpeed:"fast",displayEase:e.displayEase?e.displayEase:!0,isDrawer:e.isDrawer?e.isDrawer:!1,showtab:e.showtab?e.showtab:!1,tabdelay:e.tabdelay?e.tabdelay:0,preventInlineStyle:e.preventInlineStyle?e.preventInlineStyle:!1,preventOverlay:e.preventOverlay?e.preventOverlay:!1,suppressLoggedIn:e.suppressLoggedIn?e.suppressLoggedIn:!1,requireLogin:e.requireLogin?e.requireLogin:!1,exitAttributes:e.exitAttributes?e.exitAttributes:!1,bypassInputFocus:e.bypassInputFocus?e.bypassInputFocus:!1,customExitButton:e.customExitButton?e.customExitButton:!1,extraTabHeight:e.extraTabHeight?e.extraTabHeight:0,useStrikeIron:e.useStrikeIron?e.useStrikeIron:!1,getStrikeIronErrors:function(){if(b.getElementById("shq_strikeiron_error_mapping")){var a=null;try{a=JSON.parse(b.getElementById("shq_strikeiron_error_mapping").textContent.trim())}catch(c){a=null,hb("could not parse JSON from strike iron mapping element",c)}return a}return null}};if(hb("Modal Options","log",f),"modal"===f.type||"sticky_modal"===f.type){if(null===f.name)return hb("Onsite Injected Content is missing required setting: data-name","error",d),c.style.cssText="display: none;",c;if(null===f.fireEvent)return hb("Onsite Injected Content is missing required setting: data-fire-event","error",d),c.style.cssText="display: none;",c;if("click"===f.fireEvent&&"null"===f.fireClickTarget&&hb("Onsite Injected Content is missing required setting: data-fire-click-target","error",d),f.forceFrequencyCap&&Nb.get("modalFreqCap")&&Nb.get("modalFreqCap").indexOf(d.ExperienceId)>-1)return c.style.cssText="display: none;",hb("Experience has been hidden by the Frequency Cap Fallback","error",d),Nb.get("loggedFreqCapError")||(Vc("modalFrequencyCapFallbackFired",null,8,"Frequency cap fallback was fired by the JS. User "+Hb.loiid+" received modal more than once. This log will only fire once during their session but but js will continue to freqcap during session. Debug Object: "+JSON.stringify({user:Hb,experience:d,modal:f})),Nb.set("loggedFreqCapError",!0)),c;var h=function(a){if(f.forceFrequencyCap){var b=Nb.get("modalFreqCap");b&&-1===b.indexOf(a)?b.push(a):b=[a],Nb.set("modalFreqCap",b)}};if(!f.supressFirstPage&&!f.suppressFirstPage||p){if((f.supressFirstPage||f.suppressFirstPage)&&p){if(""===b.referrer||-1===b.referrer.indexOf(g[0]))return c.style.cssText="display: none",c}else if(f.suppressUseDomain&&(""===b.referrer||-1===b.referrer.indexOf(f.suppressUseDomain)))return c.style.cssText="display: none",c}else if(""===b.referrer||-1===b.referrer.indexOf(b.location.hostname))return c.style.cssText="display: none",c;if(f.requireLogin||f.suppressLoggedIn){if(D&&D()&&f.suppressLoggedIn)return c.style.cssText="display: none",hb("Login prevented "+f.name+" from rendering","warning",f),c;if(D&&!D()&&f.requireLogin)return c.style.cssText="display: none",hb("Login required for "+f.name+" to render","warning",f),c}if((f.supressMobile||f.suppressMobile||f.suppressmobile||f.supressmobile)&&xb.any())return c.style.cssText="display: none",c;if(!oc){var i=b.createElement("style"),j=f.preventOverlay?"":"height:100%;";i.id="shq_default_modal",i.innerHTML=".shq_modal_container{position:fixed;top:0;left:0;width:100%;"+j+"text-align:center;z-index:999999}.shq_modal_overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);z-index:1}.shq_modal{position:relative;margin:5vh auto 0;z-index:99}.shq_exit{position:absolute;top:5px;right:5px;width:15px;height:15px;cursor:pointer}",b.head.appendChild(i),oc=!0}var k,l=b.createElement("div"),m=b.createElement("div"),n=f.customExitButton?null:b.createElement("img");b.getElementById("shq_injected_content");if(n||(n=c.getElementsByClassName("shq_exit")[0]),l.id="shq_modal_"+f.name,k="#"+l.id,f.parentSelector=k,l.className="shq_modal_container","sticky_modal"!==f.type&&(l.style.display="none",l.setAttribute("aria-hidden",!0)),m.id="shq_overlay_"+f.name,m.className="shq_modal_overlay",n.className="shq_exit",n.alt="Click to close",n.src=f.exitImageSrc,n.getAttribute("aria-label")||n.setAttribute("aria-label","close"),f.exitAttributes){var o;try{o=JSON.parse(f.exitAttributes.replace(/'/g,'"'))}catch(q){hb("Could not resolve exit attributes","error",q)}if(o)for(var r in o)r&&(hb('Exit attribute "'+r+'" was set to "'+o[r]+'"',"log"),"tabindex"===r.toLowerCase()?n.tabIndex=o[r]:n.setAttribute(r,o[r]))}"sticky_modal"!==f.type?(l.style.overflowY="scroll",m.style.position="fixed"):(c.style.position="fixed",l.style.display="block",
c.style.bottom="-1000px",c.style.width="100%",c.style.transition="bottom "+f.displaySpeed+"s ",n.style.right="20px",c.isVisible=!1),tc("Injected",f.gaName),f.customExitButton||c.appendChild(n),f.preventOverlay||l.appendChild(m),l.appendChild(c);var s=c.querySelector(".shq_force_close");hb("custom exit","log",s),c=l;var t=c.childNodes?c.childNodes[0]:null,u=t?{tab:t.querySelector(".shq_drawer_tab"),body:t.querySelector(".shq_drawer_content")?t.querySelector(".shq_drawer_content"):t.querySelector(".shq_inner_modal"),arrow:t.querySelector(".drawer_arrow"),modal:t,topEl:c}:{},v=function(){if(!mb&&d.ExperienceId&&-1===Ob.indexOf(d.ExperienceId)){var a=l.querySelectorAll("img[data-src]");qc(a),"sticky_modal"!==f.type?(l.style.display="block",l.removeAttribute("aria-hidden")):hc(f,u,d),tc("Impression",f.gaName),vb(d);var c=new CustomEvent("shqModalReceived",{detail:{modalName:f.name}});b.dispatchEvent(c),Ob.push(d.ExperienceId),uc(d),Dd("sticky_modal"!==f.type?{pageType:"category",catId:f.name+"modal_received",catName:"generic_modal_received"}:{pageType:"category",catId:f.name+"sticky_modal_received",catName:"generic_sticky_modal_received"}),l.querySelector("input")&&!f.bypassInputFocus&&l.querySelector("input").focus(),f.bypassInputFocus&&hb("Bypassed input focus","warning"),h(d.ExperienceId)}},w=function(){if("sticky_modal"!==f.type?l.style.cssText="display: none":gc(f,u,0,d),l.setAttribute("aria-hidden",!0),!eb){tc("Modal Close",f.gaName);var a=new CustomEvent("shqModalClosed",{detail:{modalName:f.name}});b.dispatchEvent(a)}};lb=w,ac(n,"click",w,!1),ac(m,"click",w,!1),ac(b,"keyup",function(a){27===a.keyCode&&w()},!1),s&&ac(s,"click",w,!1);var x=function(a){var b=a&&a.srcElement&&a.srcElement.classList.value&&a.srcElement.classList.value.indexOf("close")>-1?!0:!1;!b&&t&&"true"===t.getAttribute("isopen")?gc(f,u,1,d):b?hb('Clicked element has a class containing the string "close". Drawer handling logic bypassed',"warn",a):hc(f,u,d)};if(f.isDrawer){var y=u.tab;y&&(y.addEventListener("click",x),pc(y,x)),f.showtab&&(f.tabdelay?setTimeout(function(){gc(f,u,1,d)},f.tabdelay):gc(f,u,1,d))}if("exit"===f.fireEvent){var z=function(a){var b=0,c=a.clientY;return b>=c?!0:void(b=c)};xb.any()||ac(b.documentElement,"mouseleave",function A(a){z(a)&&(v(),mb||b.documentElement.removeEventListener("mouseleave",A))},!1),xb.any()&&!f.supressMobile&&setTimeout(v,f.fireDelay)}else"timeout"===f.fireEvent?setTimeout(v,f.fireDelay):"click"===f.fireEvent?b.querySelectorAll(f.fireClickTarget)?setTimeout(function(){ac(b.querySelectorAll(f.fireClickTarget),"click",v,!1)},100):a.console.log("%cSHQ WARNING : %cCan't find %c'data-fire-click-target' %cin the DOM. Make sure you CSS selector is valid.","color:#F95E59; font-weight: bold;","color:black;","color:#00C389;","color:black;"):a.console.log("%cSHQ WARNING : %cUnsupported Fire Event passed in %c'data-fire-event'. %cPlease use 'exit', 'timeout', or 'click'.","color:#F95E59; font-weight: bold;","color:black;","color:#00C389;","color:black;");f.emailCollection&&nc(l,c,f,k,d)}return"modal"!==f.type&&tc("Impression",f.gaName),c},sc=function(a,b){if(ga&&Aa){var c=[b.TargetId,b.ExperienceId,b.ContentId];b.ExperienceName&&c.push(encodeURI(b.ExperienceName).replace(/_/g,"-"));for(var d=a.getElementsByTagName("A"),e=0;e<d.length;e++){var f=d[e].href;d[e].getAttribute("href")&&"#"!==d[e].getAttribute("href").substr(0,1)&&(f+=(f.split("?")[1]?"&":"?")+Aa+"="+c.join("_"),d[e].setAttribute("href",f))}}},tc=function(b,c){d&&(c=c?c.replace(/_/g,"-"):"Missing-Experience-Name",setTimeout(function(){if(a.ga){var d=a.ga.getAll&&a.ga.getAll().length?a.ga.getAll()[0].get("name")+".send":"send";a.ga(d,{hitType:"event",eventCategory:"SHQOnSiteExperience",eventAction:"SHQ Onsite - "+b,eventLabel:"SHQ Onsite - "+c,nonInteraction:!0})}else a._gaq&&a._gaq.push(["_trackEvent","SHQOnSiteExperience","SHQ Onsite - "+b,"SHQ Onsite - "+c,"",!0])},250))},uc=function(a){"undefined"!=typeof a.TargetId&&"undefined"!=typeof a.ContentItemRowId&&Da[a.TargetId]!==a.ContentItemRowId&&(Da[a.TargetId]=a.ContentItemRowId)},vc=function(a){return"undefined"!=typeof a.TargetId&&"undefined"!=typeof a.ContentItemRowId?Da[a.TargetId]===a.ContentItemRowId?!0:!1:void 0},wc=function(a){if(null!==Ua){if("string"==typeof Ua&&Ua.length>0)return"*"===Ua||Ua===a.ExperienceId;if(Array.isArray(Ua)&&Ua.length>0){for(var b=0;b<Ua.length;b++)if("*"===Ua[b]||Ua[b]===a.ExperienceId)return!0;return!1}}return!1},xc=function(a,b){var c=!1;if(a&&b&&b.length)for(var d=0;d<b.length;d++)b[d]&&b[d].toLowerCase()===a.toLowerCase()&&(c=!0);return c},yc=function(a){if(a){var b="";return b="null"===a.toLowerCase()?"":xc(a,ma)?"":a}},zc=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.dataset,f=d.getAttribute("cartStep");e&&e.threshold&&f&&(b[f]=Number(e.threshold))}return b},Ac=function(a,b,c,d){var e=Array.from(a),f=0,g=!1,h=d.querySelector(".shq_cart_success");e.forEach(function(){var a=e[f];if(a.getAttribute("cartStep")===b){a.style.display="block",a.removeAttribute("aria-hidden");var d=a.querySelector(".shq-ammount-left"),h=a.querySelector(".shq-percent-left"),i=a.querySelector(".shq-percent-progress"),j=a.querySelector(".shq-cart-total");h&&(h.innerHTML=Math.round((a.dataset.threshold-c)/c*100),g=!0),d&&(d.innerHTML=a.dataset.threshold-c,g=!0),i&&(i.innerHTML=c/a.dataset.threshold*100),j&&(j.innerHTML=c)}else a.style.display="none",a.setAttribute("aria-hidden",!0);f++}),!g&&f&&h?(h.style.display="block",h.removeAttribute("aria-hidden")):h&&(h.style.display="none",h.setAttribute("aria-hidden",!0))},Bc=function(a,b){for(var c in a)if(b<a[c])return c},Cc=function(a){hb("cartThresholdHandler","log",a);var c=a.querySelector("#shq-cart-default"),d=a.getElementsByClassName("shq_cart_step"),e=zc(d),f=B(),g=0;f&&(g=Bc(e,f),g&&c?c.style.display="none":c&&(c.style.display="block"),Ac(d,g,f,a)),b.addEventListener("shq_cart_event",function(b){Number(b.detail.cartTotal)&&Ac(d,Bc(e,b.detail.cartTotal),b.detail.cartTotal,a),hb("cart threshold updated","log",a)})},Dc=function(a,c){Rb(Y,"preOnsiteReplacement",a);for(var d=0,e=0;e<a.length;e++){var f=a[e];if(Fb=f,!vc(f)&&!wc(f))if("undefined"==typeof f.IsHoldout||null===f.IsHoldout||f.IsHoldout!==!0){var g=f.TargetHtmlId?b.getElementById(f.TargetHtmlId):dc(f.TargetXPath);if(g){d+=1;var h=g.parentNode;if(h&&"A"===h.tagName&&!f.DoNotWrapInDiv&&(g=h,h=g.parentNode),h){var i=[f],j=b.createElement("div");if(j.style.cssText="display:inline-block",j.className="onsite_replacement",j.id="replacement_"+e,j.innerHTML=f.Content,f.DoNotWrapInDiv&&(j=j.firstChild),f.TargetHtmlId&&"shq_injected_content"===f.TargetHtmlId)hb("Content Replacement","log",a),j=rc(j,f),b.getElementById("shq_injected_content").appendChild(j),nb(),Rb($,"postOnsiteSpecificReplacement",i);else{hb("Content Replacement","log",a),h.replaceChild(j,g),vb(f);var k=f.gaName?f.gaName:f.ExperienceName;tc("Impression",k),j&&j.dataset&&"multistep"===j.dataset.thresholdType&&Cc(j)}Rb(_,"postOnsiteSpecificReplacement",i),uc(f),sc(j,f)}}else d||hb("ERR WP target not found","error",f)}else tc("Holdout",f.gaName),uc(f)}return Rb(Z,"postOnsiteReplacement",a),ic(),d},Ec=function(a){if("undefined"!=typeof a.osr&&(a=a.osr),a.NoExperiencesOnPage)return ea=!0,!1;var b=a.ExperienceContent;if(b&&b.length>0){var c=Dc(b,!1);0===c&&Hc(function(){c=Dc(b,!0),0===c&&setTimeout(function(){Dc(b,!0)},1e3)})}},Fc=function(b){if(r)return void qe(b);if(!Ba||ea||a.location.href.indexOf("disableOnSite")>-1)return!1;var c={};c.bv=f,c.utc=Ic(),c.utm_campaign=wb(),c.ctid=yc($b(ua)),c.loiid=$b(va),c.scenarioid=$b(wa),c.pt=Za.PageType.OnSiteInteraction,c.href=a.location.href,c.hostn=a.location.hostname,c.pathn=Vb,c.isNewVisitor=Hb.newVisitor,c.aid=n,c.campaign=ad(pa),c.isEmailProvided=Md;var d=Kc(!1)+(Qa||"OnsiteHandler.ashx")+"?r="+Jc()+"&i="+s;e&&(d+="&modalc="+e),Ta&&(d+="&cb="+Ta),d+=Oc(c);var g=_c();g&&(d+="&ref="+_c()),Xc(d,null)},Gc=function(b,c,d){if(r)return void qe(d);if(!Ba||ea||a.location.href.indexOf("disableOnSite")>-1)return!1;var g=c||{};g.bv=f,g.utc=Ic(),g.utm_campaign=wb(),g.ctid=yc($b(ua)),g.loiid=$b(va),g.scenarioid=$b(wa),g.pt=b,g.href=a.location.href,g.hostn=a.location.hostname,g.pathn=Vb,g.newVstr=Hb.newVisitor,g.aid=n,g.cmpgn=wb()?!0:!1,g.emailProvided=Md;var h=Kc(!1)+(Qa||"OnsiteHandler.ashx")+"?r="+Jc()+"&i="+s;e&&(h+="&modalc="+e),Ta&&(h+="&cb="+Ta),h+=Oc(g);var i=_c();i&&(h+="&ref="+_c()),Xc(h,d||null)},Hc=function(c){var d=!1,e=function(){if(!i.isReady){if(!b.body)return setTimeout(e,1);i.isReady=!0,c()}},f=function(){b.addEventListener?b.removeEventListener("DOMContentLoaded",f,!1):b.detachEvent("onreadystatechange",f),e()},g=function(){if(!i.isReady){try{b.documentElement.doScroll("left")}catch(a){return void setTimeout(g,1)}e()}},h=function(){var c=!1;if(!d)if(d=!0,"loading"!==b.readyState&&e(),b.addEventListener)b.addEventListener("DOMContentLoaded",f,!1),a.addEventListener("load",f,!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",f),a.attachEvent("onload",f);try{c=null===a.frameElement}catch(h){}b.documentElement.doScroll&&c&&g()}},i=function(a){d=!1,i.isReady=!1,"function"==typeof a&&(c=a),h()};return h(),i.isReady=!1,i},Ic=function(){var a=pb.getTimezoneOffset();return a},Jc=function(){return Math.floor(2e9*Math.random())},Kc=function(b){return b?"https:"+Fa:a.location.protocol+Fa},Lc=function(b){return b?"https:"+q:a.location.protocol+q},Mc=function(b){var c="//"+j+"/"+l+"/preview/";return b?"https:"+c:a.location.protocol+c},Nc=function(a){return a?a.replace(/'/g,""):""},Oc=function(a,b){var c="";for(var d in a)if(a.hasOwnProperty(d))switch(typeof a[d]){case"number":case"boolean":c+=b&&-1===c.indexOf("?")?"?"+d+"="+encodeURIComponent(a[d]):"&"+d+"="+encodeURIComponent(a[d]);break;case"string":a[d]&&a[d].length>0&&(c+=b&&-1===c.indexOf("?")?"?"+d+"="+encodeURIComponent(Nc(a[d])):"&"+d+"="+encodeURIComponent(Nc(a[d])))}return c},Pc=function(){return t?!1:pe?!0:(pe=!0,setTimeout(function(){pe=!1},3e3),!1)},Qc=function(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){var d="",e=a[c];switch(typeof e){case"number":case"boolean":d=c+"="+encodeURIComponent(e);break;case"string":e&&e.length>0&&(d=c+"="+encodeURIComponent(Nc(e)))}d.length>0&&(b+=b.length>0?"&":"?",b+=d)}return b},Rc=function(){if(void 0===e&&(e=qb.get(Ia),void 0===e||null===e||0===e.length))return null;var a=e.split("^");return a.length>2?a[1]:void 0},Sc=function(){if(void 0===e&&(e=qb.get(Ia),void 0===e||null===e||0===e.length))return null;var a=e.split("^");return a.length>2?a[2]:void 0},Tc=function(b,c,d,g){if(C()||!e&&F)!e&&F?(gb.waiting||(gb.waiting=!0,Dd({pageType:"other",cu:!0})),gb.watch(Tc,arguments),hb("Waiting for valid cookie","warning",arguments)):hb("REQUESTS BLOCKED BY DO NOT TRACK","error");else{var h,i=new Image(1,1),j=b.action;b["class"];if(b.action&&delete b.action,b=b||{},"signal"!==j){(!e||0===e.length&&"log"!==j)&&(b.oldaction=j,j="log"),j&&"log"===j&&(b.u=a.location.href),Db.check("passDbgFlag")&&(b.dbg=1);var k=Hb.sessionid&&Hb.sessionid===Mb&&Gb?Gb:e;b.url?(h=b.url,delete b.url,h+=Oc(b,!0)):(h=Kc(c),h+=Ra+"?r="+Jc()+"&action="+j+"&i="+s,k&&(h+="&modalc="+encodeURIComponent(k)),b.bv=f,h+=Oc(b,!1))}else if(b.signalSettings)if(b.signalSettings.parameters){var l=b.signalSettings.url?b.signalSettings.url:"s.thebrighttag.com/px";h="https://"+l+"?"+Oc(b.signalSettings.parameters),hb("Dropping Signal pixel","log",{src:h})}else hb("NO SIGNAL PARAMETERS SET","error");else hb("NO SIGNAL SETTINGS FOUND","error");if(g&&g.srImgReq&&Array.isArray(g.srImgReq)&&g.srImgReq.push({data:b,src:h}),ca&&d&&"function"==typeof d){var m=!1;i.onload=function(){i.onload=null,m===!1&&(m=!0,d(!0),j&&"log"!==j&&!Pc()&&(r?qe(j):Fc(j)))}}else j&&"log"!==j&&"onexperienceview"!==j&&!Pc()&&(r?i.onload=function(){qe(j)}:i.onload=function(){Fc(j)});Db.check("blockReqs")||(i.src=h.substr(0,Ha))}},Uc=function(a,b){try{var c=b?b:"NoMsg";b&&b.message&&(c=b.message),Na===!0&&Tc({action:"log",method:a,errmsg:c,ua:yb},!1,null)}catch(d){Ga={code:3,obj:d,location:"srvrLogError"}}},Vc=function(a,b,c,d){Ga={code:c,obj:b,location:a,message:d},d&&(b?b.message||(b.message=d):b=d),hb("Error Caught","error",Ga),Uc(a,b)},Wc=function(b,c,d){try{var e={msg:b,url:c,num:d,href:a.location.href},f=Oc(e);Uc("onError",f)}catch(g){Ga={code:3,obj:g,location:"onError"}}return!0},Xc=function(a,c){if(C()||!(e||a.indexOf("cu=true")>-1)&&F)!e&&F?(gb.waiting||(gb.waiting=!0,Dd({pageType:"other",cu:!0})),gb.watch(Xc,arguments),hb("Waiting for valid cookie","warning",arguments)):hb("REQUESTS BLOCKED BY DO NOT TRACK","error");else if(-1===a.indexOf("modalc")&&-1===a.indexOf("cu=true")&&-1===a.indexOf(j)&&(a+="&modalc="+e,hb("Adding cookie to ashx request","log",[e,arguments])),Db.check("blockReqs")||C())C()&&hb("REQUESTS BLOCKED BY DO NOT TRACK","error");else{var d=b.createElement("script");d.async=!0,d.src=a.substr(0,Ha);var f=b.getElementsByTagName("script")[0];if(f.parentNode.insertBefore(d,f),ca&&c&&"function"==typeof c){var g=!1;d.onload=d.onreadystatechange=function(){var a=d.readyState;(!a||/complete|loaded/.test(d.readyState))&&(d.onload=null,d.onreadystatechange=null,g===!1&&(g=!0,c(!0)))},setTimeout(function(){g===!1&&(g=!0,c(!1))},1e3*da)}}},Yc=function(a){var b=a.url,c=a.body,d=c?btoa(JSON.stringify(c)):null;if(b&&d)if(d.length<Ha)hb("SENDING GET FALLBACK","warn",a),Tc({url:b,event:d});else if(hb("Event request exceeds "+Ha+" characters. Breaking event up into multiple requests","warn",c),a.body.Event){var e=a.body.CookieId,f=a.body.SessionId,g=a.body.Event.UtcTimestamp;if(a.body.Event.Items)for(var h=a.body.Event.Items,i=a.body.Event.CartId,j=a.body.Event.Total,k=0;k<h.length;k++){var l={};l.CookieId=e,l.SessionId=f,l.Event={},l.Event.UtcTimestamp=g,l.Event.Total=j,l.Event.CartId=i,l.Event.items=[h[k]];var m=btoa(JSON.stringify(l));m.length>Ha?hb("could not send product because object exceeds "+Ha+" characters","error",l):Tc({url:b,event:m})}else hb("Could not send event because object exceeds "+Ha+" characters and an alternative is not configured","error",a.body.Event)}},Zc=function(a,b){function c(b,c){if(!(-1!==b.url.indexOf("strikeiron")||b.body.SessionId&&b.body.CookieId)){var d=Rc(),e=Sc();if(!d||!e)return hb("CookieId or SessionId could not be resolved. Request canceled","error",arguments),!1;b.body.CookieId=d,b.body.SessionId=e,hb("Had to get CookieId and/or SessionId on the last step of the post request. Something went wrong upstream.","warn",arguments)}var f=$c(b);return null!==f?(f.onload=function(){if(204===f.status||f.responseText.length>0)c(JSON.parse(f.responseText));else if(f.responseText){var a=JSON.parse(f.responseText);c(null,a)}Lb(Kb()),Ba&&qe(),Nb.updateTimeout(),Cd=!0},f.onerror=function(){c("Request failed.")},f.send(JSON.stringify(b.body)),!0):(Yc(a),!0)}if(Ib(e),a&&-1===a.url.indexOf("clientfeeds")){var d=Rc(),f=Sc();return e&&d&&f||!F?Hb.prevSessionTimestamp&&Jb(Hb.prevSessionTimestamp)?(gb.waiting||(gb.waiting=!0,Dd({pageType:"other",cu:!0})),hb("waiting for updated session","warn",arguments),gb.watch(Zc,arguments),!0):(a.body.CookieId=Rc(),a.body.SessionId=Sc(),c(a,b)):(gb.waiting||(gb.waiting=!0,Dd({pageType:"other",cu:!0})),hb("Waiting for valid cookie","warning",arguments),gb.watch(Zc,arguments),!0)}return c(a,b)},$c=function(a){var b=new XMLHttpRequest;return"withCredentials"in b?(b.open(a.method,a.url,!0),b.setRequestHeader("Content-Type","application/json"),b.setRequestHeader("Accept","application/json")):b=null,b},_c=function(){var c=null;if(b.referrer&&b.referrer.length>0)try{var d=b.referrer.split("/")[2].split("."),e=a.location.hostname.split(".");d.length>=2&&e.length>=2&&d[d.length-2]!==e[e.length-2]&&(c=b.referrer)}catch(f){Vc("getReferrer",f,5)}return c},ad=function(a){if("string"==typeof a)return $b(a);if(Array.isArray(a))for(var b=0;b<a.length;b++){var c=$b(a[b]);if(c)return c}return"function"==typeof a?a.call():null},bd=function(a){pa=a},cd=function(a){qa=a},dd=function(a){ra=a},ed=function(a){sa=a},fd=function(a){ta=a},gd=function(){try{var b,c,d,e,f;if(na&&na.param&&$b(na.param)&&na.delim){var g=$b(na.param),h="string"==typeof g?g.split(na.delim):null,i=function(a){if(Array.isArray(a)){for(var b=null,c=0;c<a.length;c++){var d=i(a[c]);d&&b?b+=na.delim+d:d&&(b=d)}return b}return null!==a&&a<h.length?h[a]:null};h&&Array.isArray(h)&&(b=wb()?wb():i(na.campaign),c=i(na.medium),d=i(na.source),e=i(na.term),f=i(na.content))}else b=wb(),c=ad(qa),d=ad(ra),e=ad(sa),f=ad(ta);var j={action:"campaign",pageId:Ed,utm_campaign:b,utm_medium:c,utm_source:d,utm_term:e,utm_content:f,ref:_c()},k=null;if(j.ref&&0===j.ref.length&&j.utm_campaign&&j.utm_campaign.length&&0===j.utm_campaign.length){k=$b("gclid");var l=$b("gdftrk");j.utm_campaign=k&&k.length&&k.length>0?"GoogleAdwords":l&&l.length&&l.length>0?"GoogleAffiliateNetwork":""}if(("GoogleAdwords"===j.utm_campaign||"GoogleAffiliateNetwork"===j.utm_campaign)&&(j.ref="http://www.google.com"),k=$b("gclid"),k&&k.length>0&&(j.utm_campaign="GoogleAdwords",j.utm_source="google",j.utm_content=k),j.href=a.location.href,!j.utm_content||""===j.utm_content){var m=ad(ta);m&&m.length>0&&(j.utm_content=m)}(j.utm_campaign||j.utm_source||j.utm_medium||j.utm_term||j.utm_content||j.ref&&j.ref.length>0)&&("function"==typeof v?(j=v(j),null!==j&&Tc(j,!1,null)):Tc(j,!1,null))}catch(n){Vc("processMarketingInfo",n,4)}},hd=function(a,b,c){try{a&&a[b]&&(a[c]=a[b],delete a[b])}catch(d){Vc("renameProp",d,5,"failed renaming prop "+b+" to "+c)}},id=Za.PageType.Other,jd=function(b,c){try{if(b&&(!Wb(aa)||null===e)&&"none"!==b.pageType){b.bv=f,b.utc=Ic(),b.utm_campaign=wb(),b.ctid=yc(void 0!==c.passed.ctid?c.passed.ctid:$b(ua)),b.mobiledeviceid=void 0!==c.passed.mobiledeviceid?c.passed.mobiledeviceid:null,b.pushid=void 0!==c.passed.pushid?c.passed.pushid:null,b.loiid=$b(va),b.scenarioid=$b(wa),b.pt=id,b.href=void 0!==c.passed.href?c.passed.href:a.location.href,b.hostn=a.location.hostname,b.pathn=Vb,b.ref=_c(),b.cu=c.passed.cu,b.scraped_products&&Zd(b.scraped_products);var d=void 0!==b.jf?b.jf:!1;b.pageType&&delete b.pageType,b.temp&&delete b.temp;var g=Kc(!1)+Pa+"?r="+Jc()+"&i="+s;e&&(g+="&modalc="+e),Sa&&(g+="&cb="+Sa),a.shqChromeExtensionOn&&(g+="&diag=true"),g+=Oc(b),c&&c.srPageView&&Array.isArray(c.srPageView)&&c.srPageView.push({data:b,src:g}),d?ub(g,sb,tb):Xc(g,b.callback||null)}}catch(h){Vc("submitPageView",h,6)}},kd=null,ld=function(a,b){if(a&&a.productId&&a.productId!==kd){kd=a.productId;var c=pd;c&&c.length&&c.length>0?a.t=c.substr(0,120):a.productName&&a.productName.length&&a.productName.length>0?a.t=a.productName.substr(0,120):a.t=a.productId.substr(0,120),a.productId.length&&a.productId.length>40&&(a.productId=a.productId.substr(0,40),Vc("productView",{},201,"productId truncated!")),hd(a,"productId","pid"),hd(a,"price","pr"),hd(a,"productName","pn"),hd(a,"catName","cn"),a.masterId=null,id=Za.PageType.Product,jd(a,b)}},md=function(a,b){a&&!a.catId&&(a.catId=a.catName&&a.catName.replace?a.catName.replace(/\W/g,""):""),a.catId.length&&a.catId.length>64&&(a.catId=a.catId.substr(0,64));var c=pd;a.t=c&&c.length>0?c.substr(0,120):a.catName.substr(0,120),hd(a,"catId","cid"),hd(a,"catName","cn"),id=Za.PageType.Category,jd(a,b)},nd=function(a,b){hd(a,"searchPhrase","sp"),id=Za.PageType.Search,jd(a,b)},od=function(a){return a?a.replace(/&/g,"","g").replace(/"/g,"","g").replace(/'/g,"","g").replace(/</g,"","g").replace(/>/g,"","g"):""},pd=od(b.title),qd=function(a){return a&&"string"==typeof a?a.replace(/[$,]/gi,""):null},rd=function(a){var b="number"==typeof a?a:qd(a);return isNaN(b)&&(b=.01,Vc("moneyToIntString",{},20,"Was passed NaN value")),null!==b&&(b=Math.round(100*parseFloat(b).toFixed(2))),b},sd=function(a,b,c){if(a.cartItems&&a.cartItems.length>0){for(var d=a.cartItems,e=[],f=0;f<d.length;f++)d[f].productId?(d[f].productId.length&&d[f].productId.length>64&&(d[f].productId=d[f].productId.substr(0,64),hb("productId truncated!","error",d[f.productId])),e.push({ProductId:d[f].productId,UnitPrice:Number(d[f].price).toFixed(2),Quantity:Number(d[f].qty)})):hb("missing product ID","error",d[f]);return e}},td=function(a,c,d){if(a||(a={}),a.cartItems&&(a.Items=sd(a),delete a.cartItems),a.cartTotal&&Number(a.cartTotal)?(a.Total=Number(Number(a.cartTotal).toFixed(2)),delete a.cartTotal,b.dispatchEvent(new CustomEvent("shq_cart_event",{detail:a}))):a.Total&&Number(a.Total)?(a.Total=Number(Number(a.Total).toFixed(2)),b.dispatchEvent(new CustomEvent("shq_cart_event",{detail:a}))):"empty"!==c&&(a.Total=null),a.Items)for(var e=0;e<a.Items.length;e++){var f=a.Items[e];f.UnitPrice&&Number(f.UnitPrice)?f.UnitPrice=Number(Number(f.UnitPrice).toFixed(2)):f.UnitPrice&&(hb("UnitPrice value "+f.UnitPrice+" could not be converted to number","Error"),delete f.UnitPrice),f.Quantity&&Number(f.Quantity)?f.Quantity=Number(f.Quantity):0===f.Quantity||Number(f.Quantity)||(hb("Quantity value "+f.Quantity+" could not be converted to number","Error"),delete f.Quantity),f.ProductId&&"string"!=typeof f.ProductId&&(hb("Converting product ID to a string","warn",f.ProductId),f.ProductId=f.ProductId.toString())}a.scraped_products&&Zd(a.scraped_products),a.cartId?(a.CartId=a.cartId,delete a.cartId):a.CartId||(a.CartId=null),a.UtcTimestamp=Nd(),"empty"===c||a.Items&&a.Items.length?(Cd=!0,Zc({method:"POST",url:ab.cart[c],body:{Event:a}})):a.Items&&!a.Items.length&&hb("Could not process cart interaction because there were no valid products passed","error",a)},ud=function(a,b){if(a&&(a.orderId||a.orderid)){var c={action:"purchase",orderid:a.orderId,total:rd(a.total)};a.usebasket&&(c.usebasket=a.usebasket,(1===c.total||"1"===c.total)&&delete c.total),Tc(c,!1,null,b)}else Vc("purchase img req",null,2e3,"no order obj or orderid!");if(a&&a.orderItems&&a.orderItems.length){for(var d=a.orderItems,e=!1,f=0;f<d.length;f++)d[f]&&("string"==typeof d[f].productId&&d[f].productId.length>0||"number"==typeof d[f].productId)?(d[f].productId.length&&d[f].productId.length>64&&(d[f].productId=d[f].productId.substr(0,64),Vc("purchaseRequests",{},201,"productId truncated!")),Tc({action:"purchase_item",orderid:a.orderId,total:rd(a.total),tax:rd(a.tax),shipping:rd(a.shipping),city:a.city,state:a.state,country:a.country,pid:d[f].productId,mid:d[f].masterId,sku:d[f].sku,quantity:d[f].qty,price:rd(d[f].price),brand:d[f].brand},!1,null,b)):e=!0;e&&Vc("purchase item img req(s)",null,2001,"problem with one or more product IDs during purchase_item request")}},vd=function(a,b){},wd=!1,xd=function(a,b){if(id=Za.PageType.Purchase,a&&a.orders&&a.orders.length&&(a.logpwp=!0,a.orderid=a.orders[0].orderId,a.total=rd(a.orders[0].total)),jd(a,b),a&&a.orders&&a.orders.length)for(var c=a.orders,d=0;d<c.length;d++)ud(c[d],b);else a&&a.orderItems&&a.orderItems.length?ud(a,b):Uc("purchaseView","orders null or non array");wd=!0},yd=function(a,b){jd(a,b)},zd=function(a,b){Td()},Ad=0,Bd=function(a){if(e)if(Array.isArray(a)&&a.length>0){var b={};b.instanceId=s,b.cookie=e,b.id=Jc(),b.products=a,Ad&&(hb("Cookie is now present. Sending product views request.","warning",b),Ad=0);var c={url:Kc()+m,method:"POST",body:b};Zc(c,function(b){b?(Ad&&hb("Retry worked. Product views sent.","ok"),e||(e=b,qb.set(Ia,b,Cb({ce:"1",cp:"/",samesite:"none",secure:o})),Ib(b)),Ub("productViews",a)):Ub("productViews ERROR","no response from server")})}else hb("No products for mass view!","error");else 5>Ad?(hb("Firing pagetype other to update cookie","warning"),Dd({pageType:"other"}),Ad+=1,setTimeout(function(){hb("Retrying product views","warning",Ad),Bd(a)},500)):hb("Too many tries to update cookie. Product views failed.","error")},Cd=!1,Dd=function(a){try{Cd||(Cd=!0,"object"!=typeof a.temp?a.temp={initialRequest:!0}:a.temp.initialRequest=!0),Rb(W,"prePageView",[a]);var b=Ub("pageView",a);if(a&&a.pageType){var c={product:ld,category:md,search:nd,cart:re.view,checkout:zd,purchase:xd,ignore:"undefined"!=typeof customIgnoreView?customIgnoreView:vd},d=c[a.pageType]||yd;Hb.newVisitor||"object"!=typeof la||la[a.pageType]!==!0||$b(ua)||ka===!0&&"!"!==Nb.get("-SR-")?d(a,b):(gd(),Nb.updateTimeout())}else Vc("pageView",{},101,"pageView called with no data or type!"),yd(a,b)}catch(e){Vc("pageView",e,100)}},Ed=null,Fd=!1,Gd=function(b){try{a.shqChromeExtensionOn&&b.osr&&(a.shqOnsiteEnabled=!0,a.postMessage({smtrOnsite:JSON.stringify(b.osr)},"*")),"undefined"==typeof b.osr||Pc()||(hb("Web Personalization Recieved","info",b.osr),Ec(b.osr)),Fd&&!wd||b.osr||(Fd=!0,b&&b.cv&&qb.set(Ia,b.cv,Cb({ce:b.ce,cp:b.cp,samesite:"none",secure:o})),qb.get(Ja)&&qb.del(Ja,Cb({ce:.007,cp:b.cp})),Ed=b.pr,e!==b.cv&&(Gb=e),Ib(b.cv),Nb.updateTimeout(),ka===!0&&Nb.set("-SR-","!"),id!==Za.PageType.Purchase&&b&&b.cv&&(e=b.cv,gb.waiting&&(gb.check=!0,gb.waiting=!1)),gd(),Rb(X,"postProcess",[b])),"undefined"==typeof b.doOnsiteRequest||b.doOnsiteRequest!==!0||pe||(r=!0,qe("pageView"))}catch(c){Vc("onPostProcess",c,200)}},Hd=function(a){Ub("addToCart",a);re.add(a)},Id=function(a){if(Ub("sessionData",a),a&&a.flag){var b=!!a.value,c=Nb.set(a.flag,b?a.value:null);c&&Dd({pageType:"category",catId:a.flag+(b?"^"+a.value:""),catName:"Session Data: "+a.flag+(b?" - "+a.value:"")})}},Jd=function(b){h=b,Fa="//"+h+"/"+i+"/",a.localStorage.setItem("trackingDomainForced",b),hb("forced tracking domain","warning",{url:b})},Kd=function(){localStorage&&localStorage.getItem("trackingDomainForced")&&(h=a.localStorage.getItem("trackingDomainForced"),Fa="//"+h+"/"+i+"/",hb("forced tracking domain","warning",{url:h}))},Ld=function(a){var b=Ub("onProdReview",a);a&&Tc({action:"prod_review",pid:a.productId?a.productId:a.masterId?a.masterId:null,rate:a.rating?a.rating:null,sku:a.sku?a.sku:null,brand:a.brand?a.brand:null},!1,null,b)},Md=!1,Nd=function(){function a(a){return 10>a?"0"+a:a}var b=new Date,c=[b.getUTCFullYear(),a(b.getUTCMonth()+1),a(b.getUTCDate())].join("-"),d=[a(b.getUTCHours()),a(b.getUTCMinutes()),a(b.getUTCSeconds())].join(":"),e=b.getUTCMilliseconds(),f=c+"T"+d+"."+e+"Z";return f},Od=function(a){var b=Ub("onEmail",a),c=A(a.email);if(a&&!a.email?hb("Email not provided","error",a):a?c||hb("email has been supressed by custom email screening logic","error",arguments):hb("Email object not provided","error",a),a&&a.email&&(a.type||a.email_type)&&("string"==typeof a.type||"string"==typeof a.email_type)&&c){var d=/"/g,e=a.email;d.test(e)&&(a.email=a.email.replace(d,""));var f=a.type?a.type.toLowerCase():a.email_type?a.email_type:null,g=Za.EmailType[f];if("undefined"!=typeof g&&a.email)if(kb(a.email)||a.is_hash){var h=a.oi?a.oi===!0:g===Za.EmailType.marketing,i={Email:a.email.trim(),EmailTypeId:g,IsOptIn:h?!0:!1,UtcTimestamp:Nd()},j=Zc({method:"POST",url:ab.email,body:{Event:i}});if(j||z)z&&hb("Email not sent - CORS is not available and the get request fallback is dissabled","error",arguments);else{var k=a.completed&&"function"==typeof a.completed?a.completed:null;Tc({action:"email",value:a.email.trim(),et:g,oi:h,is_hash:a.is_hash},!0,k,b)}Md=!0}else!a.email||kb(a.email)||a.is_hash||hb("Email failed validation","error",a);else Uc("onEmail","email type"+a.type+"not recognized")}else Uc("onEmail","onEmail error")},Pd=function(a){var b=Ub("onAddress",a);if(a&&(a.address1||a.address2||a.address3||a.city||a.state||a.zip||a.country)){var c=Za.AddressType[a.type.toLowerCase()];if("undefined"!=typeof c){var d={action:"address",type:c};a.address1&&"string"==typeof a.address1&&(d.addr1=a.address1),a.address2&&"string"==typeof a.address2&&(d.addr2=a.address2),a.address3&&"string"==typeof a.address3&&(d.addr3=a.address3),a.city&&"string"==typeof a.city&&(d.city=a.city),a.state&&"string"==typeof a.state&&(d.state=a.state),a.zip&&"string"==typeof a.zip&&(d.zip=a.zip),a.country&&"string"==typeof a.country&&(d.country=a.country),a.copyaddressto&&"undefined"!==Za.AddressType[a.copyaddressto.toLowerCase()]&&(d.copyaddressto=Za.AddressType[a.copyaddressto.toLowerCase()]),Tc(d,!0,null,b)}else Uc("onAddress","Address type"+a.type+"not recognized")}else Uc("onAddress","onAddress error")},Qd=function(a){var b=Ub("onPhone",a);if(a&&a.number&&a.type&&"string"==typeof a.type){var c=Za.PhoneType[a.type.toLowerCase()];if("undefined"!=typeof c){var d=a.oi?a.oi===!0:!1;Tc({action:"phone",value:a.number,type:c,oi:d},!0,null,b)}else Uc("onPhone","phone type"+a.type+"not recognized")}else Uc("onPhone","onPhone error")},Rd=function(a){var b=Ub("onName",a);a&&(a.first||a.middle||a.last)&&Tc({action:"name",fname:a.first,mname:a.middle,lname:a.last},!0,null,b)},Sd=!1,Td=function(a){var b=Ub("onCheckout",a);Sd||(Tc({action:"checkout",value:a&&a.value?a.value:"Page",dfint:a&&a.countOverride?a.countOverride:null},!1,null,b),Sd=!0)},Ud=null,Vd=function(a){var b=Ub("onShip",a);if(a&&a.value&&a.value.toLowerCase&&a.value!==Ud){var c=Za.ShipType[a.value.toLowerCase()];"undefined"!=typeof c?(Tc({action:"ship_change",value:c,text:a.value,dfint:a.isDefault},!1,null,b),Ud=a.value):Uc("onShip","shipping type"+a.value+"not recognized")}else Uc("onShip","error with shipObj")},Wd=!1,Xd=!1,Yd=function(a){var b=Ub("onPayment",a);if(a&&a.type){var c=Za.PayType[a.type.toLowerCase()];"undefined"==typeof c&&(c=Za.PayType.unknown);var d={action:"payment",pt:c};a.interaction&&Za.PaymentInt[a.interaction]&&(d[Za.PaymentInt[a.interaction]]=!0,"em"===a.interaction?(Xd=!0,Wd&&(d.ied=!0)):"ey"===a.interaction&&(Wd=!0,Xd&&(d.ied=!0))),Tc(d,!1,null,b)}else Uc("onPayment","error with payObj")},Zd=function(a){var b=Ub("onCustomProduct",a);if(a&&"object"==typeof a&&!Array.isArray(a)&&(a=[a]),a&&Array.isArray(a))for(var c=0;c<a.length;c++){var d=[a[c]],e=JSON.stringify(d);Tc({action:"product_scrape",scraped_products:e},!1,null,b)}},$d="",_d=function(a){var b=Ub("onPromo",a);a&&a.code!==$d&&(Tc({action:"funint",funinttype:Za.FunType.Promo,funintval:a.id,code:a.code},!1,null,b),$d=a.code)},ae=!1,be=function(a){var b=Ub("onGift",a);!ae&&a&&Tc({action:"funint",funinttype:Za.FunType.Gift,funintval:a.id},!1,null,b)},ce=!1,de=function(a){var b=Ub("onCrm",a);!ce&&a&&Tc({action:"crm",custId:a.custId,dwId:a.dwId,daId:a.daId,crmId:a.crmId,loyaltyId:a.loyaltyId,mobiledeviceid:a.mobiledeviceid,omsid:a.omsid},!1,null,b)},ee=function(a){Ub("onCartEmpty",a);re.empty(a)},fe=function(a){var b=a.split("_");if(!(b.length<3)){var c=b[3]?decodeURI(b[3]).toLowerCase():b[1];setTimeout(function(){tc("Click",c)},1e3);var d=Ub("onOnSiteClickThrough",a);Tc({action:"onsite_clickthrough",onsiteTargetId:b[0],onsiteExperienceId:b[1],onsiteContentId:b[2]},!1,function(){},d)}},ge=function(a,b){a&&b&&Tc({action:"unsub",scenarioid:b,loiid:a})},he=!1,ie=function(){try{he||(he=!0,hb("Basescript Settings","info",db),hb("Visitor Info","info",Hb),Rb(U,"pageReady"))}catch(a){Vc("onPageReady",a,3)}},je=function(a){var b="",c=a.source?a.source.toLowerCase():"",d=a.action?a.action.toLowerCase():"",e=a.products?a.products:a.product?a.product:"";if(x&&H&&d&&"object"==typeof x&&x.indexOf(d.toLowerCase())>-1)H(a);else if(c&&d&&e){var f=Za.trackRecs.action[d]?Za.trackRecs.action[d]:"",g=Za.trackRecs.source[c]?Za.trackRecs.source[c]:"",h="";h="string"==typeof e?e:"object"==typeof e&&Array.isArray(e)?e.join():"";var i=Ub("trackRecs",a);f&&g&&h?Tc({action:"prec",productList:h,raId:f,rsId:g},!1,function(){},i):(b="incorrect data passed|client:"+n,Vc("trackRecs","Request build error",4010,b))}else b="not enough recs tracking data|client:"+n,Vc("trackRecs","recsTrackingError",3980,b)},ke=function(a){var b=a.action&&void 0!==Za.productList.listActionType[a.action.toLowerCase()]?Za.productList.listActionType[a.action.toLowerCase()]:-1,c=-1,d=a.productId,e=a.price,f=a.qty,g={},h=a.customList;a.listId&&(Za.productList.listId[a.listId]>-1?(c=Za.productList.listId[a.listId],g.lid=Za.productList.listId[a.listId]):h&&(c=a.listId,g.lid=a.listId)),d&&(g.pid=d),f&&(g.quantity=f),c&&(g.lid=c),b&&(g.at=b),e&&(g.price=e),-1!==b&&(g.at=b),g.action="list";var i=Ub("onProductList",a);if(d&&-1!==b&&-1!==c||3===b&&-1!==c)Tc(g,!1,function(){},i);else{var j="Missing required data from listData object|client:"+n;Vc("onProductList","List Data Error",4075,j)}},le=function(){return ib("getErrObj"),Ga},me=function(){return ib("getVisitorObj"),Hb},ne=function(){var b=a;b.cookies=qb,
b.debug=Db,b.addEvent=ac,b.pageReady=Hc,b.sessionData=Nb,b.moneyToIntString=rd,b.cleanMoneyFrmtOnly=qd,b.isPage=Wb,b.getUrlParamVal=$b,b.getElemIdValue=cc,b.getElemValue=bc,b.logError=Vc,b.getReferrer=_c,b.processMarketingInfo=gd,b.getElementByXpath=dc},oe=function(){if("undefined"!=typeof a.console&&a.console&&a.console.log){a.console.log("available calls for _smtr.push():");for(var b in te)te.hasOwnProperty(b)&&a.console.log(b)}},pe=!1,qe=function(b){if(!Ba||ea||a.location.href.indexOf("disableOnSite")>-1)return!1;try{var c=u?!1:Hb.newVisitor,d="";Ob&&Ob.length>0&&(d=Ob.join());var e={instanceId:s,loiId:Rc(),sessionId:Sc(),url:a.location.href,callback:"_smtr.postprocess",r:Jc(),isNewVisitor:c,accountId:n,campaign:wb(),isEmailProvided:Md,espSubIdProvided:$b(ua)?!0:!1,expIds:d,ref:_c()?_c():a.location.href};if((a.shqChromeExtensionOn||fb)&&(e.includeDiagnostics="true"),"function"==typeof w&&(e=w(e,b)),"function"==typeof w&&(e=w(e,b)),null!==e){var f=Lc(!1)+Qc(e),g="forceOnsiteExperience".toLowerCase(),h=null;if("undefined"!=typeof Yb)h=$b(g);else{var i=Xb();h=i[g],h||(h=null)}h&&(e.experienceId=h,f=Mc(!1)+Qc(e)),Xc(f,null)}}catch(j){Vc("submitPageView",j,6)}},re={view:function(a){td(a,"view"),Ub("cartView",a)},add:function(a){td(a,"add"),Ub("cartAdd",a)},qty:function(a){td(a,"qty"),Ub("cartQuantity",a)},remove:function(a){td(a,"remove"),Ub("cartRemove",a)},empty:function(a){td(a,"empty"),Ub("cartEmpty",a)}},se={onPostProcess:Gd,logError:Uc},te={pageView:Dd,onPostProcess:Gd,logError:Uc,addToCart:Hd,sessionData:Id,onDLProcess:E,onProdReview:Ld,onLanguage:rb,onExperienceView:vb,onEmail:Od,onemail:Od,onCheckout:Td,onAddress:Pd,onName:Rd,onPhone:Qd,onShip:Vd,onPayment:Yd,onPromo:_d,onGift:be,onCRM:de,onCrm:de,onOnSiteClickThrough:fe,productViews:Bd,setCampNameKey:bd,setCampMediumKey:cd,setCampSourceKey:dd,setCampTermKey:ed,setCampContentKey:fd,trackRecs:je,toggleDebugCookie:Eb,getSrObjList:Tb,getErrObj:le,getVisitorObj:me,exposeTools:ne,listInterface:oe,onsiteReceivedData:Ec,onsitePageRequest:Gc,onProductList:ke,onCustomProduct:Zd,testDomain:Jd,onCartView:re.view,onCartAdd:re.add,onCartQty:re.qty,onCartRemove:re.remove,onCartEmpty:re.empty};"true"===$b("shq_debugging_enabled")?(a.localStorage.setItem("shq_debugging_enabled",!0),a.console.log("%cSHQ DEBUGGING %cENABLED","color:#af7adb;font-size:16px;font-weight:bold;","color:#57e050;font-size:16px;font-weight:bold;")):"false"===$b("shq_debugging_enabled")&&(a.localStorage.removeItem("shq_debugging_enabled"),fb=!1,a.console.log("%cSHQ DEBUGGING %cDISABLED","color:#af7adb;font-size:16px;font-weight:bold;","color:#e25151;font-size:16px;font-weight:bold;")),a._shqdbl=[],fb=localStorage&&"true"===localStorage.getItem("shq_debugging_enabled")?!0:!1;var ue=0,ve=function(){if(ue+=1,e){if(Ib(e),Ea.parameters){if(Ea.parameters.loiid&&Hb.loiid)Ea.parameters.loiid=Hb.loiid;else if(Ea.parameters.loiid&&!Hb.loiid)return hb("NO LOIID FOR FOUND FOR SIGNAL PIXEL","error",Hb),!1;if(Ea.parameters.sessionId&&Hb.sessionid)Ea.parameters.sessionId=Hb.sessionid;else if(Ea.parameters.sessionId&&!Hb.sessionid)return hb("NO SESSIONID FOR FOUND FOR SIGNAL PIXEL","error",Hb),!1;Tc({action:"signal",signalSettings:Ea}),Nb.set("spx",!0)}}else hb("Could not find srcookie for signal","warning","trying again in 1 second"),5>ue&&setTimeout(ve,1e3)};Ea&&Ea.enabled&&(Ea.oncePerSession&&!Nb.get("spx")?ve():Ea.oncePerSession||ve()),Kd(),o||hb("SECURE COOKIE DISABLED","error","THIS SHOULD ONLY BE FALSE IF THE SITE DOES NOT HAVE SSL"),Rb(T,"jsLoaded"),Ba&&Ca&&(e?qe():Dd({pageType:"other"})),Hc(ie),Hc(ec),ba&&(a.onerror=Wc),e||(e=qb.get(Ja));if(Ib(e),fa&&va&&$b(va)&&wa){var we=$b(wa)||0;ge($b(va),we)}if(Va()&&"number"==typeof Xa&&a.setTimeout(function(){if(!wd){var a=Wa||"failsafe-"+Jc();Dd({pageType:"purchase",orders:[{orderId:a,usebasket:!0}]}),Vc("purchase failsafe",{},"10000","purchase failsafe sent")}},1e3*Xa),ga&&Aa&&($b(Aa)||_b(Aa))){var xe=$b(Aa)||_b(Aa);fe(xe)}ha&&"number"==typeof ia&&("always"===ha||"firstPageLoad"===ha&&!e)&&a.setTimeout(function(){Cd||Dd({pageType:"other",code:"to"})},1e3*ia);for(var ye={getSrObjList:!0,getErrObj:!0,getVisitorObj:!0},ze=c||[],Ae={push:function(a){try{if(Array.isArray(a)&&ye[a[0]]||G(a)){if(!(ze.length>0))return Ae.exec(a);ze.push(a)}else hb("Blocked external event push","warn",a)}catch(b){Vc("_smtr.push",b,2)}return 1},exec:function(a){try{if(a&&a.length>0){var b=a.shift();if(te.hasOwnProperty(b)&&"function"==typeof te[b])return null===e&&(e=qb.get(Ia),Ib(e)),Rb(V,"preExec",a,b),te[b].apply(null,a);Vc("_smtr.exec method "+b+" doesn't exist.",{},3)}}catch(c){Vc("_smtr.exec",c,2)}return 1},postprocess:function(a){Gd(a)},onsite:function(a){Ec(a)},baseVer:f,loaded:!0};ze.length>0;)Ae.exec(ze.shift());a._shqDebug={strikeironValidate:mc},a.SmtrRmkr=se,ze.srVal&&(Ae.srVal=ze.srVal),a._smtr=Ae}}(this,this.document,this._smtr)}catch(loaderr){try{var _smtrErr=[{code:1,obj:loaderr}]}catch(finalerr){}}