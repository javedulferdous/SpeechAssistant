(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+Jne":function(e,t,n){"use strict";n.r(t),n.d(t,"Map",(function(){return r.a})),n.d(t,"MapWithRadius",(function(){return P})),n.d(t,"MapWithMarkers",(function(){return k.a}));var r=n("s+8a"),o=(n("rE2o"),n("ioFf"),n("a1Th"),n("Btvt"),n("I5cv"),n("/SS/"),n("q1tI")),a=n.n(o),i=n("2QGg"),c=function(e,t){return{id:"maine",type:"fill",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:function(e){for(var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.6,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:48,i={latitude:e[1],longitude:e[0]},c=o,l=[],u=c/(111.32*Math.cos(i.latitude*Math.PI/180)),s=c/110.574,p=0;p<a;p++)t=p/a*(2*Math.PI),n=u*Math.cos(t),r=s*Math.sin(t),l.push([i.longitude+n,i.latitude+r]);return l.push(l[0]),[l]}([e,t],.4)}}},layout:{},paint:{"fill-outline-color":"rgb(94,150,255)","fill-color":"rgba(144,215,255, 0.5)","fill-opacity":.8}}};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=y(t);if(f()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this)}return n=i,(r=[{key:"drawCircle",value:function(e,t){var n=this;this.map.on("load",(function(){var r=c(e,t);n.map.addLayer(r)}))}}])&&u(n.prototype,r),o&&u(n,o),i}(i.a);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,e);var t,n,o,i,c=(t=l,function(){var e,n=w(t);if(_()){var r=w(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return v(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).drawCircle=t.drawCircle.bind(g(t)),t}return n=l,(o=[{key:"drawCircle",value:function(e){var t=this.props,n=t.longitude,r=t.latitude;e.drawCircle(n,r)}},{key:"render",value:function(){var e=this.props,t=e.longitude,n=e.latitude,o=e.zoom,i=e.isDragDisabled,c=new d;return a.a.createElement("div",{className:"experience-map-container"},a.a.createElement(r.a,{map:c,longitude:t,latitude:n,zoom:o,showOnMap:this.drawCircle,isDragDisabled:i}))}}])&&m(n.prototype,o),i&&m(n,i),l}(o.Component),k=n("dppL")},"2QGg":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("4ZJM"),o=n.n(r),a=n("9GRU"),i=n("jSnb"),c=n("EcYI");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"coordinates",void 0),u(this,"zoom",void 0),u(this,"_map",void 0),u(this,"_button",void 0),u(this,"_container",void 0),this.coordinates=t,this.zoom=n}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){var t=this;return this._container=document.createElement("div"),this._button=document.createElement("button"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._button.setAttribute("title","Re-center"),this._button.setAttribute("aria-label","Re-center"),this._button.className="mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container.appendChild(this._button),this._container.addEventListener("click",(function(){return e.flyTo({center:t.coordinates,zoom:t.zoom})})),this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}])&&l(t.prototype,n),r&&l(t,r),e}(),p=n("a8iE");function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=!1,d=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="map")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.map=null,o.a.accessToken=a.f,y||(o.a.setRTLTextPlugin(a.g,(function(e){return console.error(e)})),y=!0)}var t,n,l;return t=e,(n=[{key:"setDragPan",value:function(e){e&&Object(i.a)("xsmall","small")?this.map.dragPan.disable():this.map.dragPan.enable()}},{key:"initialiseMap",value:function(e,t,n,a){var i=this,l=n-.5;this.map=new r.Map({container:"c-map",style:c.a,center:[e,t],zoom:l}),this.setDragPan(a),window.addEventListener("resize",Object(p.a)((function(){i.setDragPan(a)}),100)),this.map.on("dataloading",(function(){i.map.resize()})),this.map.addControl(new o.a.FullscreenControl),this.map.addControl(new o.a.NavigationControl),this.map.addControl(new s([e,t],l))}}])&&f(t.prototype,n),l&&f(t,l),e}()},EcYI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r="mapbox://styles/mrandmrssmith/cjwkdp8cl1bll1dtfzk1x1na6",o="https://api.mapbox.com/styles/v1/mrandmrssmith/cjwkdp8cl1bll1dtfzk1x1na6/static"},dppL:function(e,t,n){"use strict";n.d(t,"a",(function(){return ie}));n("rE2o"),n("ioFf"),n("a1Th"),n("I5cv"),n("/SS/"),n("f3/d"),n("VRzm"),n("Btvt"),n("ls82");var r=n("q1tI"),o=n.n(r),a=n("KAy6");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,l=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"type",void 0),i(this,"features",void 0),this.type="FeatureCollection",this.features=t},u=n("2QGg");!function(e){e[e.selected_hotel=0]="selected_hotel",e[e.selected_villa=1]="selected_villa",e[e.unclustered_villa=2]="unclustered_villa",e[e.unclustered_hotel=3]="unclustered_hotel",e[e.available_hotel=4]="available_hotel",e[e.available_villa=5]="available_villa",e[e.unavailable_hotel=6]="unavailable_hotel",e[e.unavailable_villa=7]="unavailable_villa"}(c||(c={}));var s=function(e,t){var n=["all",["!has","point_count"]],r=["in","type","Properties_Hotel"],o=["in","type","Properties_Villa","Properties_HotelRoomVilla"],a=["in","available",!0],i=["in","available",!1],l=["in","id",t],u=["!in","id",t],s=[].concat(n,t?[r,u]:[r]),p=[].concat(n,t?[o,u]:[o]),f=[].concat(n,t?[o,l]:[o]),y=[].concat(n,t?[r,l]:[r]),d=[].concat(n,[r,a]),h=[].concat(n,[o,a]),m=[].concat(n,[r,i]),b=[].concat(n,[o,i]);switch(e){case c.available_hotel:return d;case c.available_villa:return h;case c.unavailable_hotel:return m;case c.unavailable_villa:return b;case c.selected_hotel:return y;case c.selected_villa:return f;case c.unclustered_villa:return p;case c.unclustered_hotel:return s}},p={id:"clusters",type:"circle",source:"allMarkers",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#740316",100,"#740316",750,"#740316"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}},f={id:"cluster-count",type:"symbol",source:"allMarkers",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#FFF"}},y=function(e){return{id:"unclustered-point-hotel",type:"symbol",source:"allMarkers",filter:s(c.unclustered_hotel,e),layout:{"icon-image":"hotel","icon-size":.65}}},d=function(e){return{id:"selected-hotel",type:"symbol",source:"allMarkers",filter:s(c.selected_hotel,e),layout:{"icon-image":"hotel-selected","icon-ignore-placement":!0,"icon-size":.65}}},h=function(e){return{id:"unclustered-point-villa",type:"symbol",source:"allMarkers",filter:s(c.unclustered_villa,e),layout:{"icon-image":"villa","icon-ignore-placement":!0,"icon-size":.65}}},m=function(e){return{id:"selected-villa",type:"symbol",source:"allMarkers",filter:s(c.selected_villa,e),layout:{"icon-image":"villa-selected","icon-size":.65}}},b=function(){return{id:"available-point-hotel",type:"symbol",source:"allMarkers",filter:s(c.available_hotel),layout:{"icon-image":"hotel","icon-size":.65}}},v=function(){return{id:"unavailable-point-hotel",type:"symbol",source:"allMarkers",filter:s(c.unavailable_hotel),paint:{"icon-opacity":.4},layout:{"icon-image":"hotel","icon-size":.65}}},g=function(){return{id:"available-point-villa",type:"symbol",source:"allMarkers",filter:s(c.available_villa),layout:{"icon-image":"villa","icon-ignore-placement":!0,"icon-size":.65}}},_=function(){return{id:"unavailable-point-villa",type:"symbol",source:"allMarkers",filter:s(c.unavailable_villa),paint:{"icon-opacity":.4},layout:{"icon-image":"villa","icon-ignore-placement":!0,"icon-size":.65}}};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=S(t);if(j()){var r=S(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return O(this,e)});function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this),n=M(t),o=void 0,(r="popup")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.popup=e,t}return n=i,(r=[{key:"addFeatureToMap",value:function(e,t){var n=this;this.map.on("load",(function(){n.map.on("click",y().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",h().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",m().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",d().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",b().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",g().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",_().id,(function(e){n.popup.addPopup(e,n.map,t)})),n.map.on("click",v().id,(function(e){n.popup.addPopup(e,n.map,t)}))}))}}])&&P(n.prototype,r),o&&P(n,o),i}(u.a),R=(n("XfO3"),n("HEwt"),n("rGqo"),n("4ZJM")),C=n.n(R);function T(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.mapType=n}var t,n,r;return t=e,(n=[{key:"initialiseMapBoxMarker",value:function(e,t){var n=this;e.loaded()?this.addMarkers(e,t):e.on("load",(function(){n.addMarkers(e,t)})),e.on("click","clusters",(function(t){n.addBehaviourToCluster(t,e)}))}},{key:"loadImage",value:function(e,t,n){e.loadImage("".concat(window.location.origin,"/bundles/familysystem/images/maps/").concat(t,".png"),(function(r,o){if(r)throw r;e.addImage("".concat(t),o),e.addLayer(n)}))}},{key:"addMarkers",value:function(e,t){var n=this.id,r=this.mapType,o={type:"geojson",data:t,cluster:!0,clusterMaxZoom:14,clusterRadius:50};e.addSource("allMarkers",o).addLayer(p).addLayer(f),"availability"===r?(this.loadImage(e,"hotel-unavailable",v()),this.loadImage(e,"villa-unavailable",_()),this.loadImage(e,"hotel",b()),this.loadImage(e,"villa",g())):"default"!==r&&r||(this.loadImage(e,"hotel",y(n)),this.loadImage(e,"villa",h(n)),n&&(this.loadImage(e,"villa-selected",m(n)),this.loadImage(e,"hotel-selected",d(n))))}},{key:"calculateBounds",value:function(e){var t=e.map((function(e){return e.geometry.coordinates})),n=[],r=[],o=t.reduce((function(e,t){return n.push(t[0]),r.push(t[1]),{long:n,lat:r}}),{}),a=new R.LngLat(Math.min.apply(Math,T(o.long)),Math.min.apply(Math,T(o.lat))),i=new R.LngLat(Math.max.apply(Math,T(o.long)),Math.max.apply(Math,T(o.lat)));return new R.LngLatBounds(a,i)}},{key:"addBehaviourToCluster",value:function(e,t){var n=this,r=t.queryRenderedFeatures(e.point,{layers:[p.id]}),o=r[0].properties.cluster_id,a=r[0].properties.point_count;t.getSource(p.source).getClusterLeaves(o,a,0,(function(e,r){var o=n.calculateBounds(r);t.fitBounds(o,{padding:50})}))}}])&&x(t.prototype,n),r&&x(t,r),e}(),N=n("je+L"),F=(n("91GP"),n("Tc8f"));function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=function(e){return L({},{property_id:e},Object(F.a)())},A=function(e){if(e){var t=new Date(e),n=t.getDate(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return"".concat(n," ").concat(r)}};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"displayPopup",value:function(e,t,n,r){var o=z(t),a=A(o.date_from),i=A(o.date_to),c=this.createPopup(e,'<div class="c-mapPopup c-mapPopup--loading" />',n);N.a.getMapPropertyDetail(o).then((function(e){if(Array.isArray(e))c.setHTML('<div class="c-mapPopup">No data available</div>');else{var t={url:"".concat(window.location.origin).concat(e.property_url),img:e.image_url,name:e.name,location:e.location,highlights:e.highlights,label:e.rate_label,price:e.lowest_rate,currency:e.currency,onRequest:e.on_request,unavailable:e.unavailable,startDate:a,endDate:i},n=r(t);c.setHTML(n)}})).catch((function(){c.setHTML('<div class="c-mapPopup">Please try again later!</div>')}))}},{key:"createPopup",value:function(e,t,n){return new C.a.Popup({offset:[-5,10],anchor:"bottom"}).setLngLat(e).setHTML(t).addTo(n)}},{key:"addPopup",value:function(e,t,n){for(var r=e.features[0].geometry.coordinates,o=e.features[0].properties.id;Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;t.flyTo({center:r,offset:[-20,130]}),this.displayPopup(r,o,t,n)}}])&&B(t.prototype,n),r&&B(t,r),e}(),G=n("s+8a"),H=n("EcEN"),J=n.n(H),U=function(e){var t=e.url,n=e.img,a=e.name,i=e.location,c=e.highlights,l=e.label,u=e.price,s=e.currency,p=e.onRequest,f=e.unavailable,y=e.startDate,d=e.endDate,h=function(e){var t,n,a;return e.onRequest?(t="For availability, call",n=o.a.createElement("a",{className:"c-mapPopup__link--onrequest",href:"tel:03301003180",title:"Call us on 0330 100 3180"},"0330 100 3180"),a="onrequest"):e.unavailable?(t="Chosen dates are",n="unavailable",a="unavailable"):(t=e.label,n=o.a.createElement(r.Fragment,null,o.a.createElement("span",{className:"c-mapPopup__inputCurrency",dangerouslySetInnerHTML:{__html:e.currency}}),o.a.createElement("span",{className:"c-mapPopup__inputRate"},e.price)),a=""),{label:t,input:n,inputClass:a}}({price:u,label:l,currency:s,onRequest:p,unavailable:f});return o.a.createElement("div",{className:"c-mapPopup"},o.a.createElement("a",{className:"c-mapPopup__link",href:t},o.a.createElement("img",{className:"c-mapPopup__image",src:n}),o.a.createElement("h4",{className:"c-mapPopup__name"},a)),o.a.createElement("p",{className:"c-mapPopup__location"},i),o.a.createElement("ul",{className:"c-mapPopup__highlights"},c.map((function(e){return o.a.createElement("li",{className:"c-mapPopup__highlightsItem",key:J()()},e)}))),o.a.createElement("ul",{className:"c-mapPopup__search flex-row-top"},y&&d&&o.a.createElement("li",{className:"c-mapPopup__field c-mapPopup__field--date"},o.a.createElement("span",{className:"c-mapPopup__label"},"Dates searched"),o.a.createElement("span",{className:"c-mapPopup__input"},y," - ",d)),o.a.createElement("li",{className:"c-mapPopup__field"},o.a.createElement("span",{className:"c-mapPopup__label"},h.label),o.a.createElement("span",{className:"c-mapPopup__input c-mapPopup__input--".concat(h.inputClass)},h.input))))};function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"type",void 0),V(this,"coordinates",void 0),this.type="Point",this.coordinates=t};var Y=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.type=n,this.available=r};function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,"geometry",void 0),Z(this,"properties",void 0),Z(this,"type",void 0),this.type="Feature",this.geometry=t,this.properties=n},X=function(e){var t=[];return new Promise((function(n,r){N.a.getMapAllData(e).then((function(e){for(var r=e.length;r>=0;r--){var o=e[r];if(o){var a=new W(new Q([o.hotel.map_long,o.hotel.map_lat]),new Y(o.property_id,o.type,o.available));t.push(a)}}n(new l(t))})).catch((function(e){r(e)}))}))};function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(u,e);var t,n,r,i,c=(t=u,function(){var e,n=ae(t);if(oe()){var r=ae(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ne(this,e)});function u(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=c.call(this,e),n=re(t),o=void 0,(r="MapBox")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={markers:{type:"",features:[]}},t.MapBox=new E(new q),t.createMarkers=t.createMarkers.bind(re(t)),t.filterMarkers=t.filterMarkers.bind(re(t)),t}return n=u,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.markersApiArgs,r=t.id,o=t.mapType,a=t.showFilters,i=this.MapBox;X(n).then((function(t){t&&e.setState({markers:t},(function(){!function(){var n=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$(a,r,o,i,c,"next",e)}function c(e){$(a,r,o,i,c,"throw",e)}i(void 0)}))}}(regeneratorRuntime.mark((function n(){var c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=new Promise((function(n,c){var u=t.features;a&&a.propertyType&&(u=e.filterMarkers(t,a.propertyType));var s=new l(u);n(new I(r,o).initialiseMapBoxMarker(i.map,s))})),n.next=3,c;case 3:return u=n.sent,n.abrupt("return",u);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}))}))}},{key:"filterMarkers",value:function(e,t){return e.features.filter((function(e){var n=e.properties.type;return"all"===t?e.properties.type:"string"==typeof t?e.properties.type===t:Array.isArray(t)?t.indexOf(n)>-1:void 0}))}},{key:"handleMarkersView",value:function(e,t){var n=t.map,r=this.state.markers,o=this.filterMarkers(r,e),a=new l(o);n.getSource("allMarkers").setData(a)}},{key:"createMarkers",value:function(e){var t=this.props.markersApiArgs;e.addFeatureToMap(t,this.renderPopup)}},{key:"renderPopup",value:function(e){return Object(a.renderToStaticMarkup)(o.a.createElement(U,{url:e.url,img:e.img,name:e.name,location:e.location,highlights:e.highlights,label:e.label,price:e.price,currency:e.currency,onRequest:e.onRequest,unavailable:e.unavailable,startDate:e.startDate,endDate:e.endDate}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.longitude,r=t.latitude,a=t.zoom,i=t.address,c=t.isDragDisabled,l=t.showFilters;return o.a.createElement(G.a,{map:this.MapBox,longitude:n,latitude:r,zoom:a,showOnMap:this.createMarkers,address:i,isDragDisabled:c,showFilters:l,handleMarkersView:function(t,n){return e.handleMarkersView(t,n)}})}}])&&ee(n.prototype,r),i&&ee(n,i),u}(r.Component)},jSnb:function(e,t,n){"use strict";n("INYr"),n("rGqo"),n("yt8O"),n("Btvt"),n("hhXQ");var r=n("p31e"),o=n("bYU7");t.a=function(e,t){var n=Object.values(o.b),a=function(e,t){return t.findIndex((function(t){return t===e}))},i=a(e.toUpperCase(),n),c=a(t.toUpperCase(),n)+1,l=n.slice(i,c),u=Object(r.a)();return-1!==l.indexOf(u)}},"s+8a":function(e,t,n){"use strict";n("rE2o"),n("ioFf"),n("a1Th"),n("Btvt"),n("I5cv"),n("/SS/");var r=n("q1tI"),o=n.n(r),a=n("9GRU");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.Component;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,r,i,c=(t=l,function(){var e,n=g(t);if(v()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={selectedPropertyFilter:null},t.handleFilterClick=t.handleFilterClick.bind(b(t)),t}return n=l,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.map,n=e.longitude,r=e.latitude,o=e.zoom,a=e.showOnMap,i=e.isDragDisabled,c=e.showFilters;c&&c.propertyType&&this.setState({selectedPropertyFilter:c.propertyType}),t.initialiseMap(n,r,o,i),a&&a(t)}},{key:"handleFilterClick",value:function(e){var t=this.props,n=t.map;(0,t.handleMarkersView)(e,n),this.setState({selectedPropertyFilter:e})}},{key:"render",value:function(){var e=this.props,t=e.address,n=(e.showFilters,this.state.selectedPropertyFilter,"".concat(a.c).concat(encodeURIComponent(t)));return o.a.createElement("div",{id:"c-map",className:"c-map"},t&&o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n,className:"c-map__direction"},"Get directions"),!1)}}])&&d(n.prototype,r),i&&d(n,i),l}(r.Component);t.a=_}}]);
//# sourceMappingURL=MapWithMarkers.bff1c110.js.map