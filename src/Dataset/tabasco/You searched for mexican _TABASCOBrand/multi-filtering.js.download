window.currentCourse||(window.currentCourse=""),function(){var a=function(){var a=this,b=1,c=$("#mfilter"),d=$("#mfilter__wrap"),e=$("#mfilter__submit"),f=$("#mfilter__clear"),g=$(".loader__overlay"),h=$("#mfilter__info"),i=$("#mfilter__result-count"),j=$(".mfilter__toggle--trigger");this.orderby="date",this.defaultResults=!0,this.postCount=0,this.activeTerms=0,this.action=0===document.querySelectorAll(".plp").length?"ajax-recipes":"product-search";var k="ajax-recipes"===this.action?"ajax-content":"plp__product-list",l=document.getElementById(k);console.dir(l),this.mode="ajax-recipes"===this.action?"recipes":"product",this.toggleOverlay=function(){c.hasClass("mfilter--overlay-active")?c.removeClass("mfilter--overlay-active"):c.addClass("mfilter--overlay-active")},this.showCount=function(b){var c=b;if(c>0){var d=1===c?" Result":" Results",e=c+d+" Available";i.text(e)}if(a.activeTerms>0?h.removeClass("mfilter__info--hidden"):(h.addClass("mfilter__info--hidden"),a.setBtnCount(0,!1)),$("body").hasClass("search")&&!isNaN(c))$(".search-results-wrapper__results-total-count").text(c);else try{$(".search-results-wrapper__results-total")[0].remove()}catch(f){}$(".mfilter__tag--hidden").removeClass("mfilter__tag--hidden")},this.getPostCount=function(){var b=$("#pagination--ajax");a.postCount=parseInt(b.data("postCount"),10),a.showCount(a.postCount),a.activeTerms>0?a.setBtnCount(a.postCount,!0):a.setBtnCount(0,!1)},this.ajaxCall=function(b,f,h){var i=a.orderby,j=a.order,f=f?f:!1,h=void 0!==h&&h===!1?!1:!0;g.removeClass("loader__overlay--hidden");var k=0;d&&d.length&&(k=d.offset().top-140),(f||c.hasClass("mfilter--overlay-active"))&&$("html, body").animate({scrollTop:k},300);var m={order_by:i,action:this.action,course:currentCourse,sauce:q.sauce,"dish-type":q["dish-type"],"cuisine-type":q["cuisine-type"],ingredient:q.ingredient,"cooking-method":q["cooking-method"],current_page:b,is_search:$("body").hasClass("search"),search_term:$('[name="s"]').val(),size:q.size,heat:q.heat,order:j};if(console.dir(m),h)for(var n in q)if(Array.isArray(q[n])&&q[n].length&&void 0!==q[n].length&&q[n].length>0){for(var o=0,p=0;p<q[n].length;p++)void 0!==window.ga&&(ga(ga.getAll()[0].get("name")+".send","event",window.currentCourse,"filtering",q[n][p],q[n].length),ga(ga.getAll()[0].get("name")+".send","event",window.currentCourse,"filtering",n,q[n][p],q[n].length+"filters-selected-per-"+n+"-tab"),o++);void 0!==window.ga&&ga(ga.getAll()[0].get("name")+".send","event",window.currentCourse,"filtering",n,o)}e.addClass("mfilter__submit--loading"),$.ajax({url:ajaxUrl,data:m,success:function(b){if("ok"===$.trim(b));else{var c=document.createRange();c&&l&&c.selectNode(l);var d=c.createContextualFragment(b);l&&(l.innerHTML="",l.appendChild(d)),a.getPostCount(),g.addClass("loader__overlay--hidden");var f=$(".recipe-card--animate-in"),h=10;if(f.each(function(){var a=$(this);setTimeout(function(){a.removeClass("recipe-card--hidden")},h),h+=100}),$(".recipe-grid__ajax-content .swiper-container").length>0){var i=28,j={pagination:".swiper-pagination",loop:!1,nextButton:document.querySelector(".swiper-button-next"),prevButton:document.querySelector(".swiper-button-prev"),slidesPerView:4,spaceBetween:i,centeredSlides:!1,watchSlidesProgress:!0,watchSlidesVisibility:!0,a11y:!0,breakpoints:{800:{slidesPerView:2,spaceBetween:i,centeredSlides:!1},600:{slidesPerView:1,spaceBetween:28,centeredSlides:!1}},onInit:function(a){if(window.TB){var b=a.container[0].querySelectorAll("img.lazy");TB.fixLazyLoad(b)}}};new Swiper(".recipe-grid__ajax-content .swiper-container",j)}}e.removeClass("mfilter__submit--loading")}}).done(function(){})},this.ajaxQtyCall=function(){var b={order_by:"date",action:this.action,"check-quantity":!0,is_search:$("body").hasClass("search"),course:currentCourse,sauce:q.sauce,"dish-type":q["dish-type"],"cuisine-type":q["cuisine-type"],ingredient:q.ingredient,"cooking-method":q["cooking-method"],search_term:$('[name="s"]').val(),size:q.size,heat:q.heat};console.log("args"),console.dir(b),$.ajax({url:ajaxUrl,data:b,success:function(b){"ok"===$.trim(b)||(a.postCount=parseInt(b,10),a.checkFilterQty(a.postCount),a.setBtnCount(a.postCount,!0))}}).done(function(){e.removeClass("mfilter__submit--loading")})},this.paginationClick=function(c){var d=parseInt(document.querySelector(".pagination").getAttribute("data-current-page")),e=parseInt($(c).html());c.hasClass("next")&&(e=d+=1),c.hasClass("prev")&&(e=d-=1),b=e,void 0!==window.ga&&ga(ga.getAll()[0].get("name")+".send","event","filtering","pagination"),a.ajaxCall(b,!0,!1)},this.accordToggle=function(a){var b=$(a),c=$(".mfilter__tab-btn"),d=b.data("target-group"),e=$(".mfilter__group"),f=$('.mfilter__group[data-group="'+d+'"]');f.hasClass("mfilter__group--open")?(b.removeClass("mfilter__tab-btn--active"),f.removeClass("mfilter__group--open"),b.blur()):(c.removeClass("mfilter__tab-btn--active"),b.addClass("mfilter__tab-btn--active"),e.removeClass("mfilter__group--open"),f.addClass("mfilter__group--open"),b.blur()),$(".mfilter__group--open").length>0?$(".mfilter__groups-wrap").removeClass("mfilter__groups-wrap--empty"):$(".mfilter__groups-wrap").addClass("mfilter__groups-wrap--empty")},this.toggleBtns=function(){var a=$(".mfilter__group--open"),b=$(".mfilter__apply-bar");a.length>0?b.addClass("mfilter__apply-bar--visible"):b.removeClass("mfilter__apply-bar--visible")},this.setBtnCount=function(a,b){$(".mfilter__btn-count").text(b?" ("+a+" Results)":"")},this.checkFilterQty=function(b){var c=$(".mfilter__option-input:checked");a.activeTerms=c.length,b>0&&c.length>0?(e.prop("disabled",!1),f.removeClass("mfilter__clear--hidden")):(b>0&&!this.defaultResults?e.prop("enabled",!0):e.prop("disabled",!0),c.length>0?f.removeClass("mfilter__clear--hidden"):f.addClass("mfilter__clear--hidden"))},this.clearTaxArray=function(){for(var b in q)void 0!==q[b]&&q[b].length>0&&(q[b]=[]);a.activeTerms=0},this.clearFilters=function(){var b=$(".mfilter__option-input:checked");b.each(function(){this.checked=!1}),a.clearTaxArray(),a.defaultResults||(void 0!==window.ga&&ga(ga.getAll()[0].get("name")+".send","event","filtering","clear"),a.ajaxCall(1)),f.addClass("mfilter__clear--hidden"),e.prop("disabled",!0),m.innerHTML="",h.addClass("mfilter__info--hidden")};var m=document.getElementById("mfilter__tag-wrap"),n=document.createRange();m&&n.selectNode(m),this.appendTag=function(a,b,c){if("heat"===a){for(var d="",e=0;e<parseInt(c);e++)d+=window.svgs.pepper;c=d}$tag='<span class="mfilter__tag mfilter__tag--hidden" data-target="'+a+"-filter-term-"+b+'">'+c+'<span class="mfilter__tag-close" data-tax="'+a+'" data-tag="'+b+'"></span></span>';var f=n.createContextualFragment($tag);m.appendChild(f)};var o=$("body");o.on("click","#pagination--ajax .page-numbers",function(){return a.paginationClick($(this)),!1}),j.on("click",function(){a.toggleOverlay()});var p=$(".mfilter__group"),q={};p.map(function(){q[$(this).data("group")]=[]}),$("body").on("click",".mfilter__tag-close",function(){var c=$(this),d=c.parent(".mfilter__tag"),e=c.data("tax"),f=c.data("tag"),g=$("input[type=checkbox][value="+f+"]");0!==a.activeTerms&&(a.activeTerms=a.activeTerms-1),d.remove(),g.prop("checked",!1),q[e].pop(f),b=1,void 0!==window.ga&&ga(ga.getAll()[0].get("name")+".send","event","filtering","remove-single"),a.ajaxCall(b,!1,!1)});var r=$(".mfilter__option-input");r.on("click",function(){var b=$(this),c=b.attr("id"),d=b.parents(".mfilter__group").data("group"),f=b.val(),g=$('.mfilter__tag[data-target="'+c+'"]');g.remove(),b[0].checked?(q[d].push(f),a.appendTag(d,f,b[0].name)):q[d].pop(f),e.addClass("mfilter__submit--loading"),a.ajaxQtyCall()}),"recipes"===a.mode&&a.ajaxCall(b,!1,!1),e.on("click",function(){return b=1,a.ajaxCall(b),a.defaultResults=!1,a.accordToggle($(".mfilter__tab-btn--active")),a.toggleBtns(),a.toggleOverlay(),!1}),f.on("click",function(){a.clearFilters(),a.toggleBtns(),a.setBtnCount(0,!1),a.defaultResults=!0});var s=$(".mfilter__tab-btn");s.on("click",function(){a.accordToggle($(this)),a.toggleBtns()});var t=$("#mfilter__sort-select");t.on("change",function(){a.orderby=this.value;var c=$('option[value="'+this.value+'"]').data("order");a.order=c?c.toUpperCase():"",void 0!==window.ga&&ga(ga.getAll()[0].get("name")+".send","event","sorting",a.orderby),a.ajaxCall(b,!1,!1)})};if(window.TB){new a}else window.onTBExistsFunctions.push(function(){new a})}();