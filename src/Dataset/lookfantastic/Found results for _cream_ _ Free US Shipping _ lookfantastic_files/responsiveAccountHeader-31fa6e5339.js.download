"use strict";define(["app","$window"],function(e,t){var n;return function n(){var o={},r={selectors:{accountHeaderButton:"#responsiveAccountHeader_openAccountButtonMobile",basketHeaderButton:"#responsiveFlyoutBasket_openBasketButtonMobile",accountOverlay:".responsiveAccountHeader_overlay"}},u=function t(n){return o.element=n,o.accountHeaderButton=o.element.querySelector(o.config.selectors.accountHeaderButton),o.accountOverlay=document.querySelector(o.config.selectors.accountOverlay),o.basketHeaderButton=document.querySelector(o.config.selectors.basketHeaderButton),o.headerBreakpoint=1200,o.windowWidthPrevious=o.getWindowWidth(),o.mobileLayout=o.windowWidthPrevious<o.headerBreakpoint,e.subscribe("header/closeAccountResponsive",o.toggleAccountFlyoutMenu),o.bind(),o},i=function e(){o.accountHeaderButton.addEventListener("click",o.toggleAccountFlyoutMenu),o.accountOverlay.addEventListener("click",o.toggleAccountFlyoutMenu),t.addEventListener("optimizedResize",o.resizeEvent,false),l("resize","optimizedResize")},c=function t(){o.expanded=!("true"===o.accountHeaderButton.getAttribute("aria-expanded")),"true"===o.basketHeaderButton.getAttribute("aria-expanded")&&e.publish("header/closeBasketResponsive"),o.accountHeaderButton.setAttribute("aria-expanded",o.expanded),o.expanded?(document.addEventListener("keydown",o.escapeListener),document.body.classList.add("popup-no-scroll")):(document.removeEventListener("keydown",o.escapeListener),document.body.classList.remove("popup-no-scroll"))},a=function e(t){"Escape"!==t.key&&"Esc"!==t.key||o.toggleAccountFlyoutMenu()},d=function e(){return t.innerWidth},s=function e(){o.windowWidthCurrent=o.getWindowWidth(),o.mobileLayout&&o.windowWidthCurrent>o.headerBreakpoint&&o.expanded&&o.toggleAccountFlyoutMenu(),o.mobileLayout=o.windowWidthCurrent<o.headerBreakpoint},l=function e(n,o,r){var u=false,i=function e(){if(u)return;u=true,requestAnimationFrame(function(){r.dispatchEvent(new CustomEvent(o)),u=false})};(r=r||t).addEventListener(n,i)};return o.config=r,o.init=u,o.bind=i,o.toggleAccountFlyoutMenu=c,o.getWindowWidth=d,o.resizeEvent=s,o.escapeListener=a,o}});
//# sourceMappingURL=responsiveAccountHeader-31fa6e5339.js.map
