"use strict";define(["app"],function(e){var i;return function i(){var n={},a={selectors:{component:"[data-component=productSingleImage]",image:"[data-product-single-image]",imageSize:"data-image-size",loading:"[data-loading]"},subscribeChannels:{image:"productSingleImage/newImage"},classes:{loadingShow:"productSingleImage_loading-show"}},o=function i(a){n.element=a,n.loading=n.element.querySelector(n.config.selectors.loading),n.imageSize=n.element.getAttribute(n.config.selectors.imageSize);var o=e.subscribe(n.config.subscribeChannels.image,n.getNewImage);return n.checkSubscribeMessages(o,n.getNewImage),n},g=function e(i){var a=document.createElement("div");a.innerHTML=i;var o,g=a.querySelector(n.config.selectors.component).querySelector(n.config.selectors.image),c=n.element.querySelector(n.config.selectors.image);g&&(n.element.removeChild(c),n.element.appendChild(g))},c=function i(a){n.showLoading();var o=n.imageSize?"?imageSize="+n.imageSize:"";e.ajax.get({url:"/"+a+".image"+o,success:n.imageSuccessHandler,error:n.imageErrorHandler})},s=function e(i){n.imageReceived(i),n.hideLoading()},r=function e(){n.hideLoading(),console.error("ERROR: Could not retrieve child product image")},t=function e(i,n){var a;i.messages.length>0&&n(i.messages.slice(-1)[0])},l=function i(){e.element.addClass(n.config.classes.loadingShow,n.loading)},m=function i(){e.element.removeClass(n.config.classes.loadingShow,n.loading)};return n.init=o,n.config=a,n.imageReceived=g,n.getNewImage=c,n.imageSuccessHandler=s,n.imageErrorHandler=r,n.checkSubscribeMessages=t,n.showLoading=l,n.hideLoading=m,n}});
//# sourceMappingURL=productSingleImage-c74e2e2cd0.js.map
