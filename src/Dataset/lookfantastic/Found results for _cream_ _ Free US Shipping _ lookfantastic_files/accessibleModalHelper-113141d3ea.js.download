"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||false,s.configurable=true,"value"in s&&(s.writable=true),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}define(["$window","accessibilityFocusHelper"],function(e,t){var n;return function(){function n(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;_classCallCheck(this,n),this.containerElement=e,this.closeHandler=t,this.delay=a,e&&this.load(s)}return _createClass(n,[{key:"load",value:function n(s){var a=this;this.setUpFocusVariables(),e.setTimeout(function(){s?t.focus(s):a.firstFocusableEl&&a.firstFocusableEl.focus()},this.delay),this.addKeyBoardHandler()}},{key:"reload",value:function e(t,n){t&&(this.containerElement=t,this.load(n))}},{key:"refresh",value:function e(t){t&&(this.containerElement=t,this.setUpFocusVariables())}},{key:"close",value:function e(){this.removeKeyBoardHandler(),this.focusedElBeforeOpen.focus()}},{key:"setUpFocusVariables",value:function e(){this.focusedElBeforeOpen=this.focusedElBeforeOpen||document.activeElement;var t=this.containerElement.querySelectorAll('a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');this.focusableEls=Array.prototype.slice.call(t).filter(function(e){return e.offsetParent}).filter(function(e){return"-1"!==e.getAttribute("tabindex")}),this.firstFocusableEl=this.focusableEls[0],this.lastFocusableEl=this.focusableEls[this.focusableEls.length-1]}},{key:"keyboardHandler",value:function e(t){var n=this,s=function e(){document.activeElement===n.firstFocusableEl&&(t.preventDefault(),n.lastFocusableEl.focus())},a=function e(){document.activeElement===n.lastFocusableEl&&(t.preventDefault(),n.firstFocusableEl.focus())};switch(t.key){case"Tab":t.shiftKey?s():a();break;case"Esc":case"Escape":t.stopPropagation(),this.closeHandler();break;default:break}}},{key:"addKeyBoardHandler",value:function e(){this.eventListener=this.keyboardHandler.bind(this),document.addEventListener("keydown",this.eventListener)}},{key:"removeKeyBoardHandler",value:function e(){document.removeEventListener("keydown",this.eventListener)}}]),n}()});
//# sourceMappingURL=accessibleModalHelper-113141d3ea.js.map
