"use strict";define(["app"],function(e){var r;return function r(){var t={},c={selectors:{component:"[data-component=productPrice]",rrp:"[data-product-price=rrp]",price:"[data-product-price=price]",saving:"[data-product-price=saving]",schemaPrice:"[data-schema=price]",recurringPayment:"[data-product-price=recurringPayment]",fromPrice:'[data-product-price="fromPrice"]',professionalPricingBanner:"[data-product-price=professionalPricingBanner]",optionTerm:"[data-product-price=paymentOptionTerm]",monthSingular:"[data-product-price=optionMonthTextSingular]",monthPlural:"[data-product-price=optionMonthTextPlural]",recurringPaymentText:"[data-product-price=recurringPaymentText]",fastTrackSwitch:".fastTrack_onProductPage",OTPMessage:".productPrice_subscribeAndSave_oneTimePurchase_message",subscribeMessage:".productPrice_subscribeAndSave_subscribe_message",subscribeAndSaveMessagesWrapper:".productPrice_subscribeAndSave_message",upsellMessage:".productPrice_subscribeAndSave_subscribe_upsellMessage"},channels:{price:"productPrice/newPrice",subscribeAndSaveContractsContractIdChange:"subscribeAndSaveContracts/changeContractId",upsellMessage:"productPrice/upsellMessage"},attributes:{subscribeAndSave:"data-subscribe-and-save",productId:"data-product-id",subscriptionContractId:"data-contract-id"}},s=function e(r,c){return t.element=r,t.productId=r.getAttribute(t.config.attributes.productId),c?t.changeSubscribeAndSaveMessage(t.isSubsTab):t.subscribeToChannels(),t},a=function r(c,s,a){var n=document.querySelector(t.config.selectors.fastTrackSwitch),i="/"+c+".price",o=[];n&&o.push("useCookieForFastTrackFiltration="+n.getAttribute("data-switch-enabled"));var u=t.element.getAttribute(t.config.attributes.subscribeAndSave);u&&o.push("enableSubscribeAndSave="+u),s&&o.push("subscriptionContractId="+s),void 0!==a&&(o.push("isSubscriptionTab="+a),t.isSubsTab=a);var d=o.join("&");d&&(i+="?"+d),e.ajax.get({url:i,success:t.successHandler,error:t.errorHandler})},n=function e(r){var c=t.element.parentNode;c.innerHTML=r;var s=c.querySelector("[data-component=productPrice]");t.init(s,true)},i=function e(){console.error("ERROR: Could not retrieve new price options")},o=function r(c){var s=t.element.querySelector(t.config.selectors.OTPMessage),a=t.element.querySelector(t.config.selectors.subscribeMessage);if(s&&s.setAttribute("data-visible",!c),a&&a.setAttribute("data-visible",c),a){var n=t.element.querySelector(t.config.selectors.upsellMessage);n&&e.publish(t.config.channels.upsellMessage,n.innerHTML)}else e.publish(t.config.channels.upsellMessage)},u=function e(r){var c=t.element.querySelector(t.config.selectors.subscribeAndSaveMessagesWrapper),s=null;c&&(s=c.getAttribute(t.config.attributes.subscriptionContractId)),t.productId!==r&&(t.productId=r),t.getNewPrice(r,s)},d=function e(r,c){t.getNewPrice(t.productId,r,c)},p=function r(){e.subscribe(t.config.channels.price,t.updatePriceFromProductIdChange),e.subscribe(t.config.channels.subscribeAndSaveContractsContractIdChange,t.updatePriceFromContractIdChange)};return t.init=s,t.config=c,t.getNewPrice=a,t.successHandler=n,t.errorHandler=i,t.changeSubscribeAndSaveMessage=o,t.subscribeToChannels=p,t.updatePriceFromProductIdChange=u,t.updatePriceFromContractIdChange=d,t}});
//# sourceMappingURL=productPrice-6654397904.js.map
