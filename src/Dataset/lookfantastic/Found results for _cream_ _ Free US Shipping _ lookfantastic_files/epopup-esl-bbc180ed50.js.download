"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||false,s.configurable=true,"value"in s&&(s.writable=true),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}define(["app","siteObj","accessibleModalHelper"],function(e,t,n){var s;return function(){function s(e,o,l,i,a,c){var r=this;_classCallCheck(this,s),this.ariaLabel=a||t.props&&t.props.accessibility.close||"Close",this.central=l,this.type=void 0===e?"undefined":_typeof(e),this.className=o,this.closeButtonCallback=c,this.closeSVG='<svg class="epopupCloseSVG" width="22" height="22" viewBox="-3 -4 20 20" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M8.414 7l5.293-5.293c.391-.391.391-1.023 0-1.414s-1.023-.391-1.414 0l-5.293 5.293-5.293-5.293c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l5.293 5.293-5.293 5.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293.256 0 .512-.098.707-.293l5.293-5.293 5.293 5.293c.195.195.451.293.707.293.256 0 .512-.098.707-.293.391-.391.391-1.023 0-1.414l-5.293-5.293"/>\n                       </svg>',this.closeButton="<button type='button' id=\"epopup-close-button\" class='epopupClose js-popup-close-btn epopupClose--defaultStyle' aria-label='"+this.ariaLabel+"'>"+this.closeSVG+"</button>",this.popupDiv="<div id='popup' data-component='ePopup' data-componentLoad='helper' class='popup-overlay popupOverlay' role='dialog' tabindex=\"-1\">\n                            <div class='js-popup-container popupContainer' role='dialog' tabindex=\"-1\" aria-labelledby='popup-title'>\n                                <div class='js-popup-content popupContent'></div>\n                            </div>\n                        </div>",this.existing=!!document.querySelector('[data-component="ePopup"]'),this.existing||this.createNew(),this.elements=this.getElements(),this.screen=this.getScreenSize(),this.content=this.getContent(e,i),this.insertContent(),this.show(),this.style(),this.centralisation(),this.addCloseHandler();var p=this.getElements().content;this.accessibleModalHelper=new n(p,function(){return r.closeHandler(r)},p.querySelector("[data-popup-title]")),window.addEventListener("resize",this.centralisation.bind(this))}return _createClass(s,[{key:"reloadAccessibilityHelper",value:function e(t){this.accessibleModalHelper.load(t)}},{key:"createNew",value:function e(){document.body.insertAdjacentHTML("beforeend",this.popupDiv)}},{key:"getContent",value:function e(t,n){return"string"!==this.type&&n?t.cloneNode(true):t}},{key:"getElements",value:function e(){return{html:document.documentElement,popup:document.querySelector('[data-component="ePopup"]'),content:document.querySelector(".js-popup-content"),container:document.querySelector(".js-popup-container")}}},{key:"getScreenSize",value:function e(){return{width:this.elements.html.clientWidth,height:this.elements.html.clientHeight}}},{key:"insertContent",value:function e(){this.existing&&this.clearContent(),this.className&&this.elements.popup.classList.add(this.className),this.content&&("string"===this.type?this.elements.content.innerHTML=this.content:this.elements.content.appendChild(this.content)),this.elements.content.insertAdjacentHTML("beforeend",this.closeButton);var t=this.elements.content.querySelector("[data-close-button-class]");if(t){var n=t.dataset.closeButtonClass,s=this.elements.content.querySelector("#epopup-close-button");s.classList.remove("epopupClose--defaultStyle"),s.classList.add(n)}var o=this.elements.content.querySelector("[data-popup-title]");o&&o.setAttribute("id","popup-title")}},{key:"clearContent",value:function e(){this.elements.popup.className="popup-overlay popupOverlay",this.elements.content.innerHTML=""}},{key:"show",value:function t(){e.element.addClass("active",this.elements.popup),"ugcCarousel_popupOverlay"!==this.className&&e.element.addClass("js-popup-lock",this.elements.html)}},{key:"style",value:function e(){var t=this.elements.html.clientWidth,n=this.screen.width-t;this.elements.html.style.marginRight=n+" px",this.elements.container.style.top=""}},{key:"centralisation",value:function e(){var t=this.elements.html.clientHeight,n,s=(1-this.elements.container.clientHeight/t)/2*100;s>0&&(this.elements.container.style.top=s+"%")}},{key:"addCloseHandler",value:function e(){var t=this;document.querySelector(".popupOverlay").addEventListener("click",function e(n){var s=document.querySelector(".popupOverlay"),o=document.querySelector("#epopup-close-button");if(n.target===o||n.target===s)return document.querySelector(".popupOverlay").removeEventListener("click",e),t.closeHandler(t)})}},{key:"closeHandler",value:function t(n){n.close(),e.publish("epopup/default-close")}},{key:"close",value:function t(){e.element.removeClass("active",this.elements.popup),e.element.removeClass("js-popup-lock",this.elements.html),e.element.removeAttribute("style",this.elements.html),window.removeEventListener("resize",this.centralisation),this.accessibleModalHelper&&this.accessibleModalHelper.close(),this.closeButtonCallback&&this.closeButtonCallback()}}]),s}()});
//# sourceMappingURL=epopup-esl-bbc180ed50.js.map
