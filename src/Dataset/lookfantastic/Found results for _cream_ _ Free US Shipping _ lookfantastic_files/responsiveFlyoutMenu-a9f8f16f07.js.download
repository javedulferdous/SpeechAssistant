"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}define(["app","$window","accessibleModalHelper"],function(e,n,t){var o=400,s;return function o(){var s={},l={attribs:{modClass:"data-modifier-class",dropdownOpenOnClick:false,dropdownOpened:null,dropdownToOpen:null,dropdownActive:"data-js-dropdown-active",hasSubnav:"data-js-element",menuExpand:"data-expand-class",linkLevel:"data-js-nav-level",levelOneClassJsSuffix:"-slide",jsNavigationIndex:"data-js-nav-index"},selectors:{menu:".responsiveFlyoutMenu_menu",menuStickyRow:"[data-js-element=responsiveFlyoutMenu_menuStickyRow]",menuStickyRowControl:"[data-js-menu-sticky-row-control]",menuButton:"[data-js-element=menuButton]",closeMenu:"[data-js-element=responsiveFlyoutMenu_closeMenu]",menuHome:"[data-js-element=responsiveFlyoutMenu_homeButton]",backToPrev:"[data-js-element=responsiveFlyoutMenu_backToPrev]",flyoutSlider:"[data-flyout]",subNav:"[data-js-element=subnav]",subNavLink:"[data-js-element=subnavLink], [data-js-element=subnavLink-complex]",subnavLinkSelector:"* > [data-js-element=subnavLink]",hasSubnav:"[data-js-element=hasSubnav]",menuUnderlay:"[data-js-element=menuUnderlay]",mobileUnderlay:"[data-js-element=smallMenuUnderlay]",levelOneContainer:".responsiveFlyoutMenu_levelOne",levelTwoContainer:".responsiveFlyoutMenu_levelTwo",cardsLevelContainer:".responsiveFlyoutMenu_levelTwoInner-cards",levelOneLink:'[data-js-nav-level="1"]',levelTwoLink:'[data-js-nav-level="2"]',listsToHideWhenClosed:".responsiveFlyoutMenu_levelTwoList, .brandsAToZ_brandGroups, .responsiveFlyoutMenu_featuredList",subMenu:".responsiveSubMenu",levelTwoInnerContainer:".responsiveFlyoutMenu_levelTwoInner",fastTrackSubmenuLink:"[data-fastTrack-submenu-link]",responsiveSubMenuList:"responsiveSubMenu_list",jsNavigationIndex:"[data-js-nav-index]",responsiveFlyoutMenuLevelOneLink:".responsiveFlyoutMenu_levelOneLink",brandsAToZDropdown:".brandsAToZ_dropdown",brandsAToZLevelTwoSelector:".brandsAToZ_brandGroup",brandsAToZLevelThreeSelector:".brandsAToZ_brandItem > a",flyoutMenuLevelTwoSelector:".responsiveFlyoutMenu_levelTwoLink:not(.responsiveFlyoutMenu_levelTwoLandingPageLink), .responsiveFlyoutMenu_menuCard",flyoutMenuLevelThreeSelector:".responsiveFlyoutMenu_levelThreeLink:not(.responsiveFlyoutMenu_levelThreeLandingPageLink)",featuredList:".responsiveFlyoutMenu_featuredList",focusableElements:'a, input, select, button, [tabindex="0"]',navigationItemsToDisableWhenClosed:"[data-js-nav-index]:not(.responsiveFlyoutMenu_levelOneLink)",mobilePanelLevelTwo:".responsiveFlyoutMenu_mobilePanel_levelTwo",mobilePanelLevelThree:".responsiveFlyoutMenu_mobilePanel_levelThree",flyoutLevelTwoItem:".responsiveFlyoutMenu_levelTwoItem",flyoutLevelThree:".responsiveFlyoutMenu_levelThree",waterfallFlyOut:".waterfallFlyOut"},classNames:{popUpLock:"js-popup-lock",slideTransform:"responsiveFlyoutMenu_transform",homeButtonShow:"responsiveFlyoutMenu_menuHomeButton-show",backButtonShow:"responsiveFlyoutMenu_menuBackButton-show",stickyMenuShadow:"responsiveFlyoutMenu_menuStickyRow-shadow",menuShowClass:"responsiveFlyoutMenu_menu-show",menuUnderlayClass:"responsiveFlyoutMenu_menuUnderlay-show",dynamicDropdownClass:"responsiveFlyoutMenu_levelOneItem-dynamic",landingPageLink:"responsiveFlyoutMenu_levelTwoLandingPageLink",dropdownShow:"active",dropdownTransformClass:"responsiveFlyoutMenu_levelTwoInner-transform",dropdownOpenedClass:"responsiveFlyoutMenu_levelTwoInner-opened",hidePanelLeftClass:"responsiveFlyoutMenu_mobilePanel_hideLeft",showPanelClass:"responsiveFlyoutMenu_mobilePanel_show",active:"active"},focusableElements:'a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'},a=void 0,r=function e(n){return s.element=n,"ontouchstart"in document.documentElement&&(s.config.attribs.dropdownOpenOnClick=true),s.mobileNavMenuStatus="close",s.menu=s.element.querySelector(s.config.selectors.menu),s.menuStickyRow=s.element.querySelector(s.config.selectors.menuStickyRow),s.menuStickyRowControl=s.element.querySelectorAll(s.config.selectors.menuStickyRowControl),s.menuButton=document.querySelector(s.config.selectors.menuButton),s.closeMenu=s.element.querySelector(s.config.selectors.closeMenu),s.menuShow=s.menuButton.getAttribute(s.config.attribs.modClass),s.flyoutSlides=s.element.querySelectorAll(s.config.selectors.flyoutSlider),s.subNav=s.element.querySelectorAll(s.config.selectors.subNav),s.subNavLink=s.element.querySelectorAll(s.config.selectors.subNavLink),s.menuHome=s.element.querySelector(s.config.selectors.menuHome),s.backToPrev=s.element.querySelector(s.config.selectors.backToPrev),s.hasSubnav=s.element.querySelectorAll(s.config.selectors.hasSubnav),s.menuUnderlay=document.querySelector(s.config.selectors.menuUnderlay),s.smallMenuUnderlay=s.element.querySelector(s.config.selectors.mobileUnderlay),s.levelOneContainer=s.element.querySelector(s.config.selectors.levelOneContainer),s.levelTwoContainers=s.element.querySelectorAll(s.config.selectors.levelTwoContainer),s.cardsLevelContainers=s.element.querySelectorAll(s.config.selectors.cardsLevelContainer),s.subMenu=s.element.querySelector(s.config.selectors.subMenu),s.subMenuElements=s.subMenu.querySelectorAll(s.config.selectors.focusableElements),s.levelOneLinks=s.element.querySelectorAll(s.config.selectors.levelOneLink),s.fastTrackSubmenuLink=s.element.querySelector(s.config.selectors.fastTrackSubmenuLink),s.responsiveSubMenuList=s.element.querySelector(s.config.selectors.responsiveSubMenuList),s.mobilePanelLevelTwo=s.element.querySelector(s.config.selectors.mobilePanelLevelTwo),s.mobilePanelLevelThree=s.element.querySelector(s.config.selectors.mobilePanelLevelThree),s.flyoutLevelTwoItem=s.element.querySelectorAll(s.config.selectors.flyoutLevelTwoItem),s.flyoutLevelThree=s.element.querySelectorAll(s.config.selectors.flyoutLevelThree),s.waterfallFlyOut=s.element.querySelector(s.config.selectors.waterfallFlyOut),s.headerBreakpoint=1200,s.levelOne="1",s.levelTwo="2",s.levelThree="3",s.currentLevel=1,s.bind(),s.equaliseCardHeights(),s.levelOneElements=[].concat(_toConsumableArray(s.menuStickyRowControl),_toConsumableArray(s.levelOneLinks),_toConsumableArray(s.subMenuElements)),s.getWindowWidth()>=s.headerBreakpoint?(s.disableElements(s.element.querySelectorAll(s.config.selectors.focusableElements)),s.enableElements(s.element.querySelectorAll("["+s.config.attribs.linkLevel+"='"+s.levelOne+"']"))):(s.disableElements(s.element.querySelectorAll(s.config.selectors.focusableElements)),s.enableElement(s.menuButton)),s.levelsWithFeatures=[],s.setUpKeyboardNavigation(),s},i=function e(){s.menuButton.addEventListener("click",s.open),s.closeMenu.addEventListener("click",s.close),s.smallMenuUnderlay.addEventListener("click",s.close),s.backToPrev.addEventListener("click",s.back),s.fastTrackSubmenuLink&&s.fastTrackSubmenuLink.addEventListener("click",s.triggerGATracking),Array.from(s.flyoutSlides).map(function(e,n){e.setAttribute("data-subnav-index",n),e.addEventListener("click",s.triggerSlide,false),n===s.flyoutSlides.length-1&&(s.allSubnavLinksFound=true)}),Array.from(s.flyoutSlides).map(function(e){return e.addEventListener("scroll",s.addShadow,false)}),Array.from(s.flyoutSlides).map(function(e){return e.addEventListener("transitionend",s.removeShadow,false)}),s.mobilePanelLevelTwo.addEventListener("scroll",s.addShadow,false),s.mobilePanelLevelTwo.addEventListener("transitionend",s.removeShadow,false),s.mobilePanelLevelThree.addEventListener("scroll",s.addShadow,false),s.mobilePanelLevelThree.addEventListener("transitionend",s.removeShadow,false),s.waterfallFlyOut&&(s.flyoutLevelTwoItem.forEach(function(e){e.addEventListener("mouseenter",function(){s.flyoutLevelTwoItem.forEach(function(e){e.classList.remove(s.config.classNames.active)}),e.classList.add(s.config.classNames.active),s.flyoutLevelThree.forEach(function(e){e.classList.remove(s.config.classNames.active)}),e.querySelector(s.config.selectors.flyoutLevelThree).classList.add(s.config.classNames.active)})}),s.levelTwoContainers.forEach(function(e){e.addEventListener("mouseleave",function(){s.flyoutLevelThree.forEach(function(e){e.classList.remove(s.config.classNames.active)}),s.flyoutLevelTwoItem.forEach(function(e){e.classList.remove(s.config.classNames.active)})})})),s.config.attribs.dropdownOpenOnClick?(n.addEventListener("click",function(e){s.hideMenuUnderlay(),s.config.attribs.lastDropdownOpened&&s.config.attribs.lastDropdownOpened.removeAttribute(s.config.attribs.dropdownActive)}),s.menuUnderlay.addEventListener("click",s.handleMenuUnderlayEvent),s.menuUnderlay.addEventListener("touchstart",function(){return setTimeout(s.handleMenuUnderlayEvent,50)},{passive:true}),Array.from(s.hasSubnav).map(function(e){return e.addEventListener("click",s.handleTouch,false)})):(Array.from(s.levelOneContainer.children).map(function(e){if(e.classList[0]!==s.config.classNames.dynamicDropdownClass&&!e.classList.contains(s.config.selectors.responsiveSubMenuList)&&"LI"===e.tagName){var n=e.classList[0];e.classList.remove(n),e.classList.add(n+s.config.attribs.levelOneClassJsSuffix)}e.addEventListener("mouseenter",function(){return s.openDesktopSubMenu(e)},false)}),s.element.addEventListener("mouseleave",s.closeDesktopSubMenu)),s.hasSubnav[0]&&s.hasSubnav[0].classList.contains(s.config.classNames.dynamicDropdownClass)?(s.sizeDropdownMenu(),n.addEventListener("optimizedResize",s.sizeDropdownMenu,false)):n.addEventListener("optimizedResize",s.resizeEvent,false),A("resize","optimizedResize")},c=function e(t){a&&n.clearTimeout(a),a=t.hasAttribute(s.config.attribs.hasSubnav)?n.setTimeout(function(){s.dropdownToOpen=t,s.dropdownToOpen.querySelectorAll(s.config.selectors.subNavLink).forEach(function(e){return e.setAttribute("aria-expanded","true")}),s.enableElements(s.getNavigationItemsInDropdown(s.dropdownToOpen)),s.dropdownToOpen.classList.add(s.config.classNames.dropdownShow),s.dropdownToOpen.querySelectorAll(s.config.selectors.listsToHideWhenClosed).forEach(function(e){return e.removeAttribute("aria-hidden")}),s.dropdownOpened&&s.dropdownToOpen!==s.dropdownOpened?s.dropdownToOpen.querySelector(s.config.selectors.levelTwoInnerContainer).classList.add(s.config.classNames.dropdownOpenedClass):s.dropdownToOpen.querySelector(s.config.selectors.levelTwoInnerContainer).classList.add(s.config.classNames.dropdownTransformClass),s.closeDesktopSubMenu(),s.showMenuUnderlay()},200):n.setTimeout(function(){s.closeDesktopSubMenu()},200)},u=function e(){if(a&&n.clearTimeout(a),s.dropdownOpened){s.dropdownOpened.classList.remove(s.config.classNames.dropdownShow);var t=s.dropdownOpened.querySelector(s.config.selectors.levelTwoInnerContainer);t&&(t&&t.classList.contains(s.config.classNames.dropdownOpenedClass)?t.classList.remove(s.config.classNames.dropdownOpenedClass):t.classList.remove(s.config.classNames.dropdownTransformClass)),s.disableElements(s.getNavigationItemsInDropdown(s.dropdownOpened)),s.dropdownOpened.querySelectorAll(s.config.selectors.subNavLink).forEach(function(e){return e.setAttribute("aria-expanded","false")}),s.dropdownOpened.querySelectorAll(s.config.selectors.listsToHideWhenClosed).forEach(function(e){return e.setAttribute("aria-hidden","true")})}s.dropdownOpened=s.dropdownToOpen?s.dropdownToOpen:null,s.dropdownToOpen=null,s.hideMenuUnderlay()},d=function n(){e.publish("tracking/record","Fast Track Engagement","Clicked Fast Pass | Header")},m=function e(n){"close"===s.mobileNavMenuStatus&&(s.config.attribs.lastDropdownOpened&&s.config.attribs.lastDropdownOpened!==n.target&&(s.config.attribs.lastDropdownOpened.removeAttribute(s.config.attribs.dropdownActive),s.config.attribs.lastDropdownOpened.parentNode.classList.remove(s.config.classNames.dropdownShow)),n.target.hasAttribute(s.config.attribs.dropdownActive)?(n.target.removeAttribute(s.config.attribs.dropdownActive),n.target.parentNode.classList.remove(s.config.classNames.dropdownShow),s.hideMenuUnderlay()):(n.preventDefault(),s.showMenuUnderlay(),n.target.setAttribute(s.config.attribs.dropdownActive,""),n.target.parentNode.classList.contains(s.config.classNames.dynamicDropdownClass)&&n.target.parentNode.classList.add(s.config.classNames.dropdownShow),s.config.attribs.lastDropdownOpened=n.target))},f=function e(n){var t;n.target.scrollTop>5?s.menuStickyRow.classList.add(s.config.classNames.stickyMenuShadow):s.menuStickyRow.classList.remove(s.config.classNames.stickyMenuShadow)},v=function e(){s.menuStickyRow.classList.remove(s.config.classNames.stickyMenuShadow)},p=function o(){s.prevScrollTop=n.pageYOffset,s.menuButton.classList.add(s.menuShow),s.menuButton.setAttribute("aria-expanded","true"),s.menuButton.parentElement.classList.add("responsiveFlyoutMenu-overlay"),s.menu.classList.add(s.config.classNames.menuShowClass),s.smallMenuUnderlay.classList.add(s.config.classNames.menuUnderlayClass),s.mobileNavMenuStatus="open",document.documentElement.classList.add(s.config.classNames.popUpLock),document.body.style.top=-s.prevScrollTop+"px",s.enableElements(s.levelOneElements),s.disableElements([s.menuButton,s.backToPrev]),s.accessibleModalHelper=new t(s.menu,s.close,null,0),e.publish("columbo/track","responsiveFlyoutMenu","open","mobile menu")},b=function n(){s.menuButton.classList.remove(s.menuShow),s.menuButton.setAttribute("aria-expanded","false"),s.menuButton.parentElement.classList.remove("responsiveFlyoutMenu-overlay"),s.menu.classList.remove(s.config.classNames.menuShowClass),s.smallMenuUnderlay.classList.remove(s.config.classNames.menuUnderlayClass),s.mobileNavMenuStatus="close",document.documentElement.classList.remove(s.config.classNames.popUpLock),document.body.style.top="",e.element.scrollTo(s.prevScrollTop),s.resetMenu(),s.disableElements(s.element.querySelectorAll(s.config.focusableElements)),s.enableElement(s.menuButton),s.accessibleModalHelper&&s.accessibleModalHelper.close(),e.publish("columbo/track","responsiveFlyoutMenu","close","mobile menu")},g=function e(){"open"===s.mobileNavMenuStatus&&(2===s.currentLevel?(s.mobilePanelLevelTwo.classList.remove(s.config.classNames.showPanelClass),s.levelOneContainer.classList.remove(s.config.classNames.hidePanelLeftClass),s.backToPrev.classList.remove(s.config.classNames.backButtonShow),s.menuHome.classList.add(s.config.classNames.homeButtonShow),s.currentLevel=1,s.manageFocusOnSlide(s.mobilePanelLevelTwo,1,s.levelOneContainer)):3===s.currentLevel&&(s.mobilePanelLevelThree.classList.remove(s.config.classNames.showPanelClass),s.mobilePanelLevelTwo.classList.remove(s.config.classNames.hidePanelLeftClass),s.manageFocusOnSlide(s.mobilePanelLevelThree,2,s.mobilePanelLevelTwo),s.currentLevel=2))},y=function e(){Array.from(s.flyoutSlides).map(function(e){e.classList.contains(s.config.classNames.slideTransform)&&e.classList.remove(s.config.classNames.slideTransform)}),Array.from(s.subNav).map(function(e){return e.scrollTop=0}),s.backToPrev.classList.remove(s.config.classNames.backButtonShow),s.menuHome.classList.add(s.config.classNames.homeButtonShow),s.currentLevel=1,s.levelOneContainer.classList.remove(s.config.classNames.hidePanelLeftClass),s.mobilePanelLevelTwo.classList.remove(s.config.classNames.showPanelClass,s.config.classNames.hidePanelLeftClass),s.mobilePanelLevelThree.classList.remove(s.config.classNames.showPanelClass,s.config.classNames.hidePanelLeftClass)},L=function e(){s.menuUnderlay.classList.add(s.config.classNames.menuUnderlayClass)},h=function e(){s.menuUnderlay.classList.remove(s.config.classNames.menuUnderlayClass)},w=function e(n){var t;if(n.stopPropagation(),!n.target.className.includes("hasChildren")||"close"===s.mobileNavMenuStatus)return;if(n.preventDefault(),"open"===s.mobileNavMenuStatus){var o=n.target.nextElementSibling;if(o){var l=n.target.getAttribute(s.config.attribs.linkLevel),a=Number(l)+1;if(2===a){s.backToPrev.classList.add(s.config.classNames.backButtonShow),s.menuHome.classList.remove(s.config.classNames.homeButtonShow),s.levelOneContainer.classList.add(s.config.classNames.hidePanelLeftClass);var r=o.classList.contains("responsiveFlyoutMenu_levelTwo-cards"),i=o.querySelector(".responsiveFlyoutMenu_levelTwoList");s.slideToPanel(2,i,r),s.currentLevel=2}else 3===a&&(s.slideToPanel(3,o),s.currentLevel=3)}}},S=function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=void 0;if(2===n)l=s.mobilePanelLevelTwo;else{if(3!==n)return;l=s.mobilePanelLevelThree}l.innerHTML="",l.appendChild(t.cloneNode(true)),l.querySelectorAll("a").forEach(function(e){return e.addEventListener("click",s.triggerSlide,false)}),2===n?o?l.classList.add("responsiveFlyoutMenu_mobilePanel_hasCards"):l.classList.remove("responsiveFlyoutMenu_mobilePanel_hasCards"):3===n&&s.mobilePanelLevelTwo.classList.add(s.config.classNames.hidePanelLeftClass),l.classList.add(s.config.classNames.showPanelClass),s.manageFocusOnSlide(l,n,l)},T=function e(n,t,o){s.disableElements(s.element.querySelectorAll(s.config.focusableElements));var l=o.querySelectorAll("["+s.config.attribs.linkLevel+"='"+t+"']");1===t?s.enableElements([].concat(_toConsumableArray(s.menuStickyRowControl),_toConsumableArray(l),_toConsumableArray(s.subMenuElements))):s.enableElements([].concat(_toConsumableArray(s.menuStickyRowControl),_toConsumableArray(l))),n.addEventListener("transitionend",function e(){s.accessibleModalHelper&&l&&s.accessibleModalHelper.reload(s.element,l[0]),n.removeEventListener("transitionend",e)})},k=function e(){s.getWindowWidth()>s.headerBreakpoint?(s.menuButton.classList.remove(s.menuShow),s.mobileNavMenuStatus="close",s.smallMenuUnderlay.classList.remove(s.config.classNames.menuUnderlayClass),s.resetMenu(),s.disableElements(s.element.querySelectorAll(s.config.focusableElements)),s.enableElements(s.element.querySelectorAll("["+s.config.attribs.linkLevel+"='"+s.levelOne+"']")),s.element.querySelectorAll(s.config.selectors.listsToHideWhenClosed).forEach(function(e){return e.setAttribute("aria-hidden","true")})):(s.menuUnderlay.classList.remove(s.config.classNames.menuUnderlayClass),s.element.querySelectorAll(s.config.selectors.listsToHideWhenClosed).forEach(function(e){return e.removeAttribute("aria-hidden")}),"close"===s.mobileNavMenuStatus&&(s.disableElements(s.element.querySelectorAll(s.config.focusableElements)),s.enableElement(s.menuButton)))},M=function e(){return n.innerWidth},A=function e(t,o,s){var l=false,a=function e(){if(l)return;l=true,requestAnimationFrame(function(){s.dispatchEvent(new CustomEvent(o)),l=false})};(s=s||n).addEventListener(t,a)},C=function e(){var n=s.element.getBoundingClientRect().right-s.element.getBoundingClientRect().left,t=s.element.getBoundingClientRect().left;s.levelTwoContainers.forEach(function(e){"100%"===e.style.left&&(e.style.left=0,e.style.right="unset");var o=e.getBoundingClientRect().right-e.getBoundingClientRect().left,l=e.parentNode.getBoundingClientRect().left,a=e.parentNode.getBoundingClientRect().right-e.parentNode.getBoundingClientRect().left;if(s.getWindowWidth()>=s.headerBreakpoint){if(Math.abs(n-o)>5){e.style.left="auto";var r,i,c=o/2-a/2-(l+o-n)+t;o+(c=c<0?0:c)>n?(e.style.left=0,e.style.right="auto"):e.style.right=c+"px"}}else e.style.left="100%",e.style.right=0}),s.resizeEvent()},E=function e(n){s.menuUnderlay.classList.contains(s.config.classNames.menuUnderlayClass)&&(n&&"click"===n.type&&n.preventDefault(),s.config.attribs.lastDropdownOpened&&(s.config.attribs.lastDropdownOpened.removeAttribute(s.config.attribs.dropdownActive),s.hideMenuUnderlay()))},N=function e(){s.cardsLevelContainers.length>0&&Array.from(s.cardsLevelContainers).map(function(e){var t=e.firstElementChild,o=-1;Array.from(t.children).map(function(e){if(!e.firstElementChild.classList.contains(s.config.classNames.landingPageLink)){var t=n.getComputedStyle(e.firstElementChild).getPropertyValue("height"),l=parseFloat(t.substring(0,t.indexOf("px")));l>o&&(o=l)}}),o>0&&Array.from(t.children).map(function(e){e.firstElementChild.classList.contains(s.config.classNames.landingPageLink)||(e.firstElementChild.style.height=o+"px")})})},O=function e(){var t=s.config.selectors;s.element.querySelectorAll(t.responsiveFlyoutMenuLevelOneLink).forEach(function(e,n){e.setAttribute(s.config.attribs.jsNavigationIndex,""+n);var o=e.nextElementSibling;if(o){var l=o.querySelector(t.brandsAToZDropdown),a=l?t.brandsAToZLevelTwoSelector:t.flyoutMenuLevelTwoSelector,r=l?t.brandsAToZLevelThreeSelector:t.flyoutMenuLevelThreeSelector,i=o.querySelector(t.featuredList);i&&(s.levelsWithFeatures.push(""+n),i.querySelectorAll(r).forEach(function(e,t){e.setAttribute(s.config.attribs.jsNavigationIndex,n+".0."+t)})),o.querySelectorAll(a).forEach(function(e,t){if(i&&0===t)return;e.setAttribute(s.config.attribs.jsNavigationIndex,n+"."+t),e.nextElementSibling&&e.nextElementSibling.querySelectorAll(r).forEach(function(e,o){e.setAttribute(s.config.attribs.jsNavigationIndex,n+"."+t+"."+o)})})}}),s.element.querySelectorAll(t.jsNavigationIndex).forEach(function(e){e.addEventListener("keydown",function(e){if(s.getWindowWidth()<s.headerBreakpoint)return;var t=s.getNextNavigationKey(e.key,e.target.getAttribute(s.config.attribs.jsNavigationIndex),s.levelsWithFeatures),o=t.newIndex,l=t.shouldOpenNav,a=t.shouldCloseNav,r=t.shouldPreventDefault,i=s.element.querySelector('[data-js-nav-index="'+o+'"]');l&&s.openDesktopSubMenu(e.target.parentElement),a&&s.closeDesktopSubMenu(),i&&(l?n.setTimeout(function(){return i.focus()},250):i.focus()),r&&e.preventDefault()})})},P=function e(n,t,o){var s=true,l=false,a=false,r=t.split("."),i=r.length,c=o.includes(r[0]),u=c&&"0"===r[0]&&"0"===r[1];switch(n){case"ArrowLeft":case"Left":u||r.push(""+(parseInt(r.pop())-1));break;case"ArrowRight":case"Right":u?r=[r[0],"1"]:r.push(""+(parseInt(r.pop())+1));break;case"Space":case"ArrowDown":case"Down":3===i?r.push(""+(parseInt(r.pop())+1)):(r.push("0"),1===i&&(l=true));break;case"ArrowUp":case"Up":var d=parseInt(r.pop());3===i&&d>0?r.push(""+(d-1)):2===i&&(a=true);break;case"Escape":case"Esc":r=[r[0]],i>1&&(a=true);break;case"Tab":s=false,1===i&&(a=true);break;default:s=false}var m=r.join(".");if(c&&"0.0"===m){switch(n){case"ArrowLeft":case"ArrowDown":case"Space":r.push("0");break;case"ArrowUp":r.pop(),a=true;break}m=r.join(".")}return{newIndex:m,shouldOpenNav:l,shouldCloseNav:a,shouldPreventDefault:s}},F=function e(n){return n.querySelectorAll(s.config.selectors.navigationItemsToDisableWhenClosed)},q=function e(n){if(!n)return;n.setAttribute("tabindex","0"),n.removeAttribute("aria-hidden")},_=function e(n){if(!n)return;n.setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true")},U=function e(n){n&&Array.prototype.slice.call(n).forEach(function(e){return s.enableElement(e)})},B=function e(n){n&&Array.prototype.slice.call(n).forEach(function(e){return s.disableElement(e)})};return s.config=l,s.init=r,s.bind=i,s.openDesktopSubMenu=c,s.closeDesktopSubMenu=u,s.triggerSlide=w,s.open=p,s.close=b,s.back=g,s.resetMenu=y,s.showMenuUnderlay=L,s.hideMenuUnderlay=h,s.resizeEvent=k,s.addShadow=f,s.removeShadow=v,s.getWindowWidth=M,s.sizeDropdownMenu=C,s.handleTouch=m,s.handleMenuUnderlayEvent=E,s.equaliseCardHeights=N,s.triggerGATracking=d,s.setUpKeyboardNavigation=O,s.getNextNavigationKey=P,s.getNavigationItemsInDropdown=F,s.enableElement=q,s.disableElement=_,s.enableElements=U,s.disableElements=B,s.slideToPanel=S,s.manageFocusOnSlide=T,s}});
//# sourceMappingURL=responsiveFlyoutMenu-a9f8f16f07.js.map
