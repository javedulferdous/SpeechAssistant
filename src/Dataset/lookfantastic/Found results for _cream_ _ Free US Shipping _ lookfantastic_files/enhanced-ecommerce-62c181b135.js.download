define(["app","siteObj","$console"],function(e,t,a){"use strict";var n={enEcommerceValues:function(n,r){var i=e.element.closest(".js-product-price",n).element,o=void 0!==i.innerText?i.innerText.replace(/[^\d.,]/g,""):"",l=e.element.closest("span[data-product-price]",n).element,c=e.element.getAttribute("data-product-price",l).replace(/[^\d.,]/g,""),u=o||c,p=e.element.closest("input.qty-picker",n).element,d=void 0!==p.value?p.value:1;true===r&&(p=e.element.closest("span[data-product-quantity]",n).element,d=parseInt(e.element.getAttribute("data-product-quantity",p)));var s=e.element.closest("span[data-product-title]",n).element,m=e.element.getAttribute("data-product-title",s).replace(/(\r\n|\n|\r)/gm,""),g=e.element.getAttribute("data-product-brand",s),v=e.element.closest("span[data-product-master-product-id]",n).element,f=e.element.getAttribute("data-product-master-product-id",v),b;if("product"===t.type&&!t.productVariationID){var y=window.location.href,V=y.indexOf("variation="),I=[],A=null;b="",V>-1&&(I=y.split("?")).map(function(e){a.log(e),e.indexOf("variation=")>-1&&(A=e.split("="),b=A[1])})}var T=t.productVariationID||b||null,O=e.element.closest("span[data-product-id]",n).element,x=e.element.getAttribute("data-product-id",O),j="";f&&true!==f||(f=false),j=f||x;var q=e.element.closestI("span[data-product-position]",n).element,D=parseInt(e.element.getAttribute("data-product-position",q));return[{name:m,id:j,masterId:f||"",variationSku:T||x||"",price:u,brand:g||" ",category:" ",variant:t.productTitle||" ",quantity:d,coupon:" ",list:t.sectionName||t.page||t.type,position:D||0,pageType:t.page||t.type}]},sendValues:function(a,r,i,o,l){var c=a.target,u;if((e.element.getAttribute("class",c)||"").indexOf(r)>-1){var p=n.enEcommerceValues(c,l||false);e.publish("tracking/ecommerce",i,o,"products",p,t.currencyType)}},productPageVariations:function(e){n.clearSiteObjValues(),t.productVariationID=e.productId.toString(),t.productTitle=e.title},clearSiteObjValues:function(){t.productVariationID=null,t.productTitle=null}};return n});
//# sourceMappingURL=enhanced-ecommerce-62c181b135.js.map
