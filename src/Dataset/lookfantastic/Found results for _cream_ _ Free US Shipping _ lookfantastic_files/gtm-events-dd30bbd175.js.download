"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("gtmEvents",["app","siteObj","$console"],function(e,t,r){var n={init:function t(){window.dataLayer=window.dataLayer||[],e.subscribe("tracking/record",function(e,t,r,i){n._record(e,t,r,i)}),e.subscribe("tracking/recordEach",function(e,t){n._record(e,t)}),e.subscribe("tracking/widget",function(e){n._widgetTrack(e)}),e.subscribe("tracking/pyop",function(e){n._pyopTrack(e)}),e.subscribe("tracking/ecommerce",function(e,t,r,i,c){n._ecommerce(e,t,r,i,c)}),e.subscribe("tracking/fieldtiming",function(e,t,r,i){n._fieldtiming(e,t,r,i)})},_gtmEventTrack:function e(n){if(t.debugFlag&&r.debug("%cGTM Event","background: #222; color: #2196f3",n),"object"===(void 0===n?"undefined":_typeof(n)))return window.dataLayer.push(n),true;return false},_record:function e(t,r,n,i){return this._gtmEventTrack({event:"elysiumEvent",eventData:{eventCategory:t,eventAction:r,eventLabel:n,eventLabelValue:i,eventPage:window.location.pathname}})},_defaultTrack:function e(t,r,n){var i={};if(null!==t&&""!==t)return i[t]=void 0===n?null:n,i.type=r,this._gtmEventTrack(i);return false},_widgetTrack:function t(r){var n=r,i=e.element.getAttribute("href",n),c=e.element.getAttribute("data-block-type",n),o=e.element.getAttribute("data-block-name",n),a=e.element.closest(".trackwidget",n);return c=c?" "+c:a?a.getAttribute("data-block-type"):"",o||a&&(o=a.getAttribute("data-block-name")),null!==o&&""!==o?o.replace(/[^a-zA-Z0-9. ]/g,""):o="No widget description",this._gtmEventTrack({event:"elysiumEvent",eventData:{eventCategory:"Widget Track"+c,eventAction:i,eventLabel:o,eventPage:window.location.pathname}})},_pyopTrack:function t(r){var n,i=e.element.getAttribute("href",r).split("=")[1];return this._gtmEventTrack({event:"elysiumEvent",eventData:{eventCategory:"PYOP",eventAction:i,eventLabel:"click",eventPage:window.location.pathname}})},_ecommerce:function e(t,r,n,i,c){var o={event:t,ecommerce:{}};switch(r){case"remove":case"add":o.ecommerce[r]={},n&&(o.ecommerce[r][n]=i);break;default:break}return c&&(o.ecommerce.currencyCode=c),this._gtmEventTrack(o)},_fieldtiming:function e(t,r,n,i){var c={event:"formTimer",formtiming:{timingCategory:t,timingVariable:r,timingLabel:n,timingValue:i}};return this._gtmEventTrack(c)},getPrice:function n(i,c){try{var o;if("myprotein"===t.siteCode||"massint"===t.siteCode||"pmint"===t.siteCode){if("product"===i)return[o=t.productPrice.split(";")[1]||t.productPrice,t.currencyType];if("list"===i){try{o=e.select(".price-box .price").elements[0][0].innerText.split(/\n/)[1].slice(1,-1)}catch(e){r.error("Error getting price")}return o||(o=c.parentNode.parentNode.querySelectorAll(".price span")[0].innerText),[o,t.currencyType]}}else{if("product"===i)return[o=t.productPrice.split(";")[1]||t.productPrice,t.currencyType];if("list"===i)return[e.select(".price span:first-child").elements[0][0].innerText.slice(1,-1),t.currencyType]}}catch(e){r.error("Error finding price: "+e)}},buildArgs:function e(){for(var t=[],r=0;r<arguments.length;r++)if(Array.isArray(arguments[r]))for(var n=0;n<arguments[r].length;n++)t.push(arguments[r][n]);else t.push(arguments[r]);return t},getSku:function e(r,n){var i=n;if(n||(i=t.page||t.type),!arguments.length||"product"===i)return t.productID;return r.split("/")[r.split("/").length-1].split(".")[0]},bannerLink:function t(r){if(!r)return null;var n=r,i;while(!i)e.element.hasClass("carouselMain__imageContainer",r)?i=n.parentNode.href:e.element.hasClass("carousel-main",r)?i="Unable to find href":n=n.parentNode;return i}};return n.init(),n});
//# sourceMappingURL=gtm-events-dd30bbd175.js.map
