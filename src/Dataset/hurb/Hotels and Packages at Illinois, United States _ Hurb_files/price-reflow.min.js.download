var HU=HU||{};if(HU.priceReflow=HU.priceReflow||{},HU.priceReflow.loader=function(a){"use strict";var b="active",c="original",d="before_after",e=0;a.baseUrl=HU.priceReflow.baseUrl||"//skuprice.hurb.com/api/v1",a.priceUrl=HU.priceReflow.baseUrl+"/price",a.tagpriceUrl=HU.priceReflow.baseUrl+"/tagprice",a.preloadCss=HU.priceReflow.preloadCss||null,a.afterloadCss=HU.priceReflow.afterloadCss||null,a.modes={PASSIVE:"passive",ACTIVE:b},a.mode=HU.priceReflow.mode||b,a.version=HU.priceReflow.version||null,a.fullPrice=HU.priceReflow.fullPrice||!1,a.fullPriceTaxesText=HU.priceReflow.fullPriceTaxesText||{},a.fullPriceSKUTypePrefix=HU.priceReflow.fullPriceSKUTypePrefix||/.*/,a.sessionStorageTTL=300,a.SKUs=[],a.SKUsOriginalPrice={},a.skuPrefixesWithDate=HU.priceReflow.skuPrefixesWithDate||["NHU","OMN","JNP","HSYS"],a.skuPrefixesWithoutDate=HU.priceReflow.skuPrefixesWithoutDate||["LGPKG","LGTKT"],a.skuPrefixes=HU.priceReflow.skuPrefixes||a.skuPrefixesWithDate.concat(a.skuPrefixesWithoutDate),a.currency=HU.priceReflow.currency||"BRL",a.locale=HU.priceReflow.locale||"pt",a.pos=HU.priceReflow.pos||"br",a.currencySymbols=HU.priceReflow.currencySymbols||{AED:"د.إ",ANG:"ƒ",ARS:"ARS$",AUD:"AUD$",AZN:"₼",BHD:".د.ب",BOB:"$b",BRL:"R$",BTC:"฿",CAD:"CAD$",CHF:"CHF",CLP:"CLP$",CNY:"¥",COP:"COP$",CUC:"CUC$",CUP:"₱",CZK:"Kč",EGP:"£",EUR:"€",GBP:"£",HKD:"HKD$",ILS:"₪",INR:"₹",JPY:"¥",MKD:"ден",MXN:"MXN$",PEN:"S/.",PYG:"Gs",RUB:"₽",SAR:"﷼",USD:"$",UYU:"$U",VEF:"Bs",ZAR:"R"},a.currencySuffix=HU.priceReflow.currencySuffix||"",a.tags=a.tags||[],a.i18nCookieName=a.i18nCookieName||"__hurbl10n",a.displayStrategies={ORIGINAL:c,FINAL:"final",BEFORE_AFTER:d},a.displayStrategy=a.displayStrategy||d,a.__init=function(){a.priceUrl=HU.priceReflow.baseUrl+"/price",a.tagpriceUrl=HU.priceReflow.baseUrl+"/tagprice",a.preloadCss=HU.priceReflow.preloadCss||null,a.afterloadCss=HU.priceReflow.afterloadCss||null;var b=a.parseL10nCookie(a.getCookie(a.i18nCookieName));b&&(a.currency=b.currency||a.currency,a.locale=b.locale||a.locale,a.pos=b.pos||a.pos)},a.loadCSS=function(){if(0===jQuery("link.priceReflow").length){var b=HU.priceReflow.baseUrl;jQuery("script.priceReflow").length>0&&(b=jQuery("script.priceReflow")[0].src.split("/").slice(0,-2).join("/"));var c=document.createElement("link");if(c.type="text/css",c.rel="stylesheet",c.media="all",a.preloadCss&&(c.href=a.preloadCss,c.className="priceReflowPreload",document.body.appendChild(c)),c.href=b+"/stylesheets/price-reflow.min.css",c.className="priceReflow",document.body.appendChild(c),a.afterloadCss){var d=document.createElement("link");d.type="text/css",d.rel="stylesheet",d.media="all",d.href=a.afterloadCss,d.className="priceReflowAfterload",setTimeout(function(){document.body.appendChild(d)},200)}}},a.getQueryParam=function(a){var b=new RegExp(a+"=([^&]*)");return b.test(window.location.search.slice(1))?b.exec(window.location.search.slice(1))[1]:null},a.getCookie=function(a){var b=new RegExp(a+"=([^;\\s?]*)");return b.test(document.cookie)?decodeURIComponent(b.exec(document.cookie)[1]):null},a.parseL10nCookie=function(a){function b(a){return Object.prototype.hasOwnProperty.call(c,a)}if(!a)return null;for(var c={pos:"pos",l:"locale",c:"currency"},d={},e=a.split("."),f=0;f<e.length;f++){var g=e[f],h=g.split("=");2===h.length&&b(h[0])&&(d[c[h[0]]]=h[1])}return d},a.SKULookup=function(){a.__init(),a.SKUs=[];for(var c=jQuery("*[data-promotion-sku]"),d=0;d<c.length;d++)if(c[d]&&c[d].dataset){var e=c[d].dataset.promotionSku;-1===e.search(/{{/)&&(-1===a.SKUs.indexOf(e)&&a.SKUs.push(e),a.mode===b&&(a.SKUsOriginalPrice[e]=!0,jQuery(c[d]).find(".promotion-price").addClass("price-loading")))}a.loadCSS(),a.priceFetch()},jQuery(a).off("SKULookup").on("SKULookup",a.SKULookup),a.buildRequestURLFromPayload=function(a){return(a.tags.length>0?HU.priceReflow.tagpriceUrl:HU.priceReflow.priceUrl)+"?"+jQuery.param({currency:a.currency,locale:a.locale,pos:a.pos})},a.buildRequestPayload=function(a){return{skus:a.skus,tags:a.tags}},a.ajax=function(c){jQuery.support.cors=!0,jQuery.ajax({url:a.buildRequestURLFromPayload(c),timeout:8e3,type:"POST",data:JSON.stringify(a.buildRequestPayload(c)),contentType:"application/json; charset=utf-8",dataType:"JSON",crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(b){if(sessionStorage)try{var d=sessionStorage.priceReflow?JSON.parse(sessionStorage.priceReflow):{};d[a.hashCode(JSON.stringify(c))]={ttl:Date.now()+1e3*a.sessionStorageTTL,pl:b.items},sessionStorage.priceReflow=JSON.stringify(d)}catch(a){console&&console.warn&&console.warn("HU.priceReflow error: "+a)}a.priceUpdate(b.items,c.tags,{type:b.type})}).fail(function(c){try{c=JSON.stringify(c),console&&console.warn&&console.warn("HU.priceReflow error: "+c)}catch(a){console&&console.warn&&console.warn("HU.priceReflow error: "+a)}jQuery(a).triggerHandler("priceFetchError",c),a.mode===b&&a.putOriginalPriceBack()})},a.hashCode=function(b){var c=a.getQueryParam("cmp")||"",d=a.getCookie("cmp")||"",e=a.getQueryParam("prm")||"",f=a.getCookie("prm")||"";return[b.split("").reduce(function(a,b){return(a=(a<<5)-a+b.charCodeAt(0))&a},0),"cQ"+c,"cC"+d,"pQ"+e,"pC"+f].join(":")},a.fetchPricesFor=function(b){var c=a.hashCode(JSON.stringify(b)),d=!1;if(sessionStorage.priceReflow)try{var e=JSON.parse(sessionStorage.priceReflow);e&&e[c]&&(e[c].ttl>Date.now()?d=e[c].pl:delete e[c],sessionStorage.priceReflow=JSON.stringify(e))}catch(a){console&&console.warn&&console.warn("HU.priceReflow error: "+a)}d?a.priceUpdate(d,b.tags,{type:b.type}):a.ajax(b)},a.priceFetch=function(){if(0!==a.SKUs.length){a.tags=a.tags.filter(function(a,b,c){return c.indexOf(a)===b});for(var b=0;b<a.tags.length;b++)a.fetchPricesFor({skus:a.SKUs,currency:a.currency,locale:a.locale,pos:a.pos,tags:a.tags[b].split("|")});a.tags&&0!==a.tags.length||a.fetchPricesFor({skus:a.SKUs,currency:a.currency,locale:a.locale,pos:a.pos,tags:[]})}},jQuery(a).off("priceFetch").on("priceFetch",a.priceFetch),a.formatMoney=function(a,b,c,d){return b=isNaN(b=Math.abs(b))?2:b,c=void 0===c?".":c,d=void 0===d?",":d,s=a<0?"-":"",i=parseInt(a=Math.abs(+a||0).toFixed(b))+"",j=(j=i.length)>3?j%3:0,s+(j?i.substr(0,j)+d:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-i).toFixed(b).slice(2):"")},a.daysBetween=function(a,b){var c=a.getTime(),d=b.getTime(),e=d-c;return Math.round(e/864e5)},a.getfullPriceTaxesText=function(){var b=a.fullPriceTaxesText;return b&&b instanceof Object&&(b=b[a.locale]?b[a.locale]:b[a.locale.split("-")[0]]?b[a.locale.split("-")[0]]:b.en),b},a.priceUpdate=function(c,d,f){if(!(c instanceof Object))return void(a.mode===b&&a.putOriginalPriceBack());var g=f&&f.type||e;for(var h in c)if({}.hasOwnProperty.call(c,h)&&!c[h].error){var i=c[h].amount,j=i,k=i,l=0;if(c[h].taxes&&c[h].taxes.length>0)for(var m=0;m<c[h].taxes.length;m++)l+=c[h].taxes[m].amount;k+=l;var n=k,o=!1;c[h].discount&&(o=!0,n-=c[h].discount.amount),a.fullPrice&&0===h.search(a.fullPriceSKUTypePrefix)&&(j=k);var p=n/k;j*=p;var q=(1-p).toFixed(4);q<.001&&(o=!1);var r=1,s=h.split("-");if(a.skuPrefixesWithDate.indexOf(s[0])>-1&&0!==parseInt(s[2],10)){var t=parseInt(s[3],36).toFixed(0),u=parseInt(s[2],36).toFixed(0);t=new Date(t.substring(0,4),t.substring(4,6)-1,t.substring(6,8),12),u=new Date(u.substring(0,4),u.substring(4,6)-1,u.substring(6,8),12),r=a.daysBetween(u,t)}var v=c[h].currency,w=v||a.currency;a.currencySymbols[v||a.currency]&&(w=a.currencySymbols[v||a.currency]),jQuery(a).triggerHandler("priceUpdate",{sku:h,hasTags:c[h].hasTags,tags:d,hasDiscount:o,discountFactor:q,priceDivisor:r,originalPrice:i,originalUnitPrice:i/r,price:j,taxes:l,unitPrice:j/r,currencySymbol:w,type:g})}},jQuery(a).on("priceUpdate",function(d,f){if(a.mode===b){var g=f.sku,h=f.unitPrice,i=f.hasDiscount,j=f.originalPrice,k=f.priceDivisor,l=f.discountFactor,m=f.tags,n=f.price,o=f.currencySymbol,p=f.type;a.displayStrategy===c&&p===e&&(h=f.originalPrice);var q=jQuery('*[data-promotion-sku="'+g+'"]');q.each(function(){var b=jQuery(this),c=b.find(".promotion-price"),d=b.find(".promotion-price-original"),e=b.find(".promotion-price-original-currency-symbol"),r=b.find(".promotion-price-currency-symbol"),s=b.find(".promotion-tag"),t=b.find(".promotion-tag-discount"),u=b.find(".promotion-taxes"),v=parseFloat(b.attr("data-promotion-multiplier")||1),w=v<=1;if(r.html(o),c.html(Math.ceil(h)*(w?1:v)).data("price",h).attr("data-price",h),a.fullPrice&&0===g.search(a.fullPriceSKUTypePrefix)&&(u.html(a.getfullPriceTaxesText()),u.parents(".promotion-taxes-box").addClass("promotion-taxes_apply")),a.displayStrategy===a.displayStrategies.BEFORE_AFTER&&1!==p||(i=!1),i){var x=Math.ceil(j/(w?k:1)),y=x+a.currencySuffix;0===r.length&&(y=o+y),e.html(o),d.html(y),d.data("promotion-price-original",x).attr("data-promotion-price-original",x),t.addClass("range-"+Math.floor(10*l)).addClass("range"),q.addClass("range-"+Math.floor(10*l)),t.html((l>0?"-":"")+Math.floor(100*l)+"%")}else d.css("display","none"),e.css("display","none"),t.removeClass("range").removeClass("range-"+Math.floor(10*l)).css("display","none"),q.removeClass("range-"+Math.floor(10*l)),s.css("display","none");c.removeClass("price-loading"),f.hasTags&&m&&m.constructor===Array&&m.length>0&&(s.addClass("tag-container").addClass("tag-"+m[0]),q.addClass("promotion-sku-tag-"+m[0])),b.parents(".page-package").length&&(b.hasClass("offer-top--box")&&b.data("price",Math.ceil(n/k)),b.find(".offer-options--box-right").data("price",Math.ceil(n/k)))}),delete a.SKUsOriginalPrice[g],a.putOriginalPriceBack()}}),a.putOriginalPriceBack=function(){for(var b in a.SKUsOriginalPrice)({}).hasOwnProperty.call(a.SKUsOriginalPrice,b)&&(jQuery('*[data-promotion-sku="'+b+'"] .promotion-price-currency-symbol').text(""),jQuery('*[data-promotion-sku="'+b+'"] .promotion-price').text("-"),jQuery('*[data-promotion-sku="'+b+'"] .promotion-price').removeClass("price-loading"))},a.watch=function(b,c){jQuery(window).on(b,a[c||"SKULookup"])},jQuery(window).on("HU.hotel.availability.done",a.SKULookup),jQuery(window).on("HU.searchResults.done",a.SKULookup),a.SKULookup()},"undefined"==typeof jQuery){var headTag=document.getElementsByTagName("head")[0],jqTag=document.createElement("script");jqTag.type="text/javascript",jqTag.src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js",jqTag.onload=function(){jQuery.noConflict(),function(){HU.priceReflow.loader(HU.priceReflow)}()},headTag.appendChild(jqTag)}else!function(){HU.priceReflow.loader(HU.priceReflow)}();