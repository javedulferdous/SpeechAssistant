(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("GuidedNavigationWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,g){"use strict";e.when("A","s-url-parameters").register("inscx-guided-navigation-controller",function(c,h){function e(){var a=[],b;for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(d[b]);return a}function g(){var a=document.getElementById("guided-apply");0<e().length?c.show(a):c.hide(a)}function p(a,
b,c){var e,d="",d=c.map(function(a){return a.key}).join("|");return a.split(",").map(function(a){return(e=a.split(":")[0])&&e===b?e+":"+d:a}).join(",")}function k(a){var b=l(document.getElementById(a.key));d[a.key]=a;b.addClass("inscx-guided-search-recommendation-pill-clicked")}function m(a){var b=l(document.getElementById(a.key));d[a.key]=null;b.removeClass("inscx-guided-search-recommendation-pill-clicked")}function q(a){d[a.key]?m(a):k(a)}function n(){var a;var b,c=e(),d=c[c.length-1];d?(b=h.parseQueryString(d.searchUrl),
!0===d.isMultiSelect&&(a=h.getParamValue(b,"rh"),a=p(a,d.shortId,c),h.setParamValue(b,"rh",a))):b=h.parseQueryString(f.location.search);a=h.paramsToString(b,!0);document.getElementById("guided-apply").setAttribute("t_href",encodeURI(a));f.location.search=a}var l=c.$,d={};c.declarative("guided-recommendation-apply","click",n);c.declarative("guided-recommendation-click","click",function(a){a=a.data;var b;a&&(!1===a.isMultiSelect?(b=e(),b.forEach(function(a){m(a)}),k(a),n()):(q(a),g()))})})});
/* ******** */
(function(e){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,c=f?f("SearchFollowButtonAssets",""):d;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,d,f){e.when("jQuery","rush-framework","af").register("rdx-follow-button",function(c,e){function k(a){d.ue&&d.ue.tag&&d.ue.count&&(d.ue.tag(a,"searchEntityFollow"),d.ue.count(a+"Count",1))}function l(a){a.removeClass("aok-hidden")}e.registerComponent("rdx-follow-button","rdx-follow-button",
function(a){function e(a){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find(".rdx-follow-button-button").attr("aria-label",t);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){p(a)});l(b)}function m(a){b.addClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(n);b.find(".rdx-follow-button-button").attr("aria-label",
u);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-follow-icon").addClass("rdx-follow-button-following-icon");b.unbind().click(function(){v(a)});l(b)}function w(){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){"undefined"!==typeof sessionStorage&&(sessionStorage.followKey=
h);d.location.href=x});l(b)}function p(a){c.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",url:y,data:JSON.stringify({authenticity_token:a,entity_id:h,category:q,ref:z}),success:function(){m(a)},error:function(){e();r.removeClass("aok-hidden");k("EntityFollowError")}})}function v(a){c.ajax({type:"DELETE",url:A+"\x26"+c.param({authenticity_token:a}),data:{},success:function(){e(a)},error:function(){m(a);r.removeClass("aok-hidden");k("EntityUnfollowError")}})}function B(){c.ajax({type:"GET",
url:C,data:{},success:function(a){if(a.isFollowable)if(a.signedIn)if(a.isFollowing)m(a.csrf);else{var b;b=h;var c;c=/rdx-entity-follow=([^#&]+)/.exec(d.location.search);(c&&2===c.length?c[1]:f)!==b||"undefined"===typeof sessionStorage?b=!1:(c=sessionStorage.followKey,sessionStorage.removeItem("followKey"),b=c===b);b?p(a.csrf):e(a.csrf)}else w()},error:function(){k("EntityFollowStatusError")}})}var b=c(a.elem()).find(".rdx-follow-button"),r=c(a.elem()).find(".rdx-follow-button-alert"),h=a.prop("entityID"),
q=a.prop("entityType"),C=a.prop("followStatusUrl"),y=a.prop("followUrl"),A=a.prop("unfollowUrl"),x=a.prop("flexSignInUrl"),g=a.prop("followText"),n=a.prop("followingText"),t=a.prop("followARIALabel"),u=a.prop("followingARIALabel"),z=a.prop("followReftag");"undefined"!==typeof h&&"undefined"!==typeof q&&("undefined"===typeof g&&(g="Follow"),"undefined"===typeof n&&(n="Following"),B())})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("SearchEntityWidgetAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("jQuery","a-truncate").register("rdx-entity-paragraph-common",function(c,b){return{rdxEntityLineHeightOverride:function(a){c(a.elem()).find(".rdx-entity-paragraph").each(function(a,b){a=c(b);b=a.attr("data-a-max-rows");a.css({"line-height":"1.5em","max-height":1.5*b+"em"})})},rdxEntityParagraphARIATruncate:function(a){a=
c(a.elem());a.find(".a-truncate-full").attr("aria-hidden","true");a.find(".a-truncate-cut").attr("aria-hidden","false")},rdxEntityUpdateParagraphTruncate:function(a){a=c(a.elem()).find(".a-truncate");b.get(a).update()}}});"use strict";b.when("rush-framework","rdx-entity-paragraph-common").register("rdx-entity-paragraph-truncate",function(c,b){c.registerComponent("rdx-entity-paragraph-truncate","rdx-entity-paragraph-truncate",function(a){b.rdxEntityLineHeightOverride(a);b.rdxEntityParagraphARIATruncate(a);
b.rdxEntityUpdateParagraphTruncate(a)})})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,p=m._namespace||m.attributeErrors,g=p?p("SearchWebAskAndAssistWidgetAssets",""):m;g.guardFatal?g.guardFatal(l)(g,window):g.execute(function(){l(g,window)})})(function(l,m,p){l.when("A","rush-framework","s-ana-widget-tracking-utils","s-ana-url-utils","ready").register("s-ana-widget",function(g,l,d,a){function b(a,c){var b=t.extend({},a);c&&c.forEach(function(a){delete b[a]});return b}function v(b,c,u){u=t.extend({},u);var e;u.n="n:"+b.join(",n:");
for(e in c)c.hasOwnProperty(e)&&(u[e]=c[e].join("|"));return a.buildSearchQueryString(u)}function f(a,c,b){var e={};e.ref=c.refMaker;e.rh=b;e.k=a.k;e.dm="true";e.dc="true";return e}function y(x,c,d,e){var g=a.getQueryParameters(m.location.href),h=a.getSearchParametersMap(g);e=b(h,e);x=v(c,x,e);return location.origin+"/s"+d.percolateParameters+"\x26"+t.param(f(g,d,x))}function r(a,c,b){for(var e=0,d={},h,n,k,g=[],e=0;e<c.length;e++)for(k in n=b[e],h=c[e],h=a[h],h=h.answersList,n=h[n],n=n.refinements,
n)d.hasOwnProperty(k)?(g=d[k].concat(n[k]),d[k]=g.filter(function(a,c){return g.indexOf(a)===c})):d[k]=n[k];return d}function q(b,c,g,e,v){return function(h){h=t(h.currentTarget);var n=c.currentQuestionId,k;k=h.data("answer-index");var f=e[n].answersList[k].nextQuestionId;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswer");c.questionPath.push(n);c.answerIndexList.push(k);k=d.incrementAndFetchQuestionIndex(c);d.updateSelectedAnswer(b,h);if(!f){h=c.questions;n=c.metadata;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess");
d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefresh");d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectedAnswerCount",k);k=r(h,c.questionPath,c.answerIndexList);var f=c.questionPath,m=c.answerIndexList,l=n.scopedNodeList,p,q,w;for(p=0;p<f.length;p++)w=f[p],q=m[p],w=h[w],q=w.answersList[q].additionalScope,l=l.concat(q);h=y(k,l,n,v);c.questionPath.pop();c.answerIndexList.pop();d.decrementAndFetchQuestionIndex(c);a.navigateTo(h);return h}c.currentQuestionId=f;d.renderNextQuestion(b,
k,g,e,n,f);d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess")}}function p(a,c,b,e){return function(){var g=c.currentQuestionId,h=c.questionPath.pop(),f=a.find(".s-ana-answer-button-list[data-question-id\x3d"+h+"]"),k=c.answerIndexList.pop(),f=f.children(".s-ana-answer[data-answer-index\x3d"+k+"]");d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBack");k=d.decrementAndFetchQuestionIndex(c);d.renderNextQuestion(a,k,b,e,g,h);c.currentQuestionId=h;d.updateSelectedAnswer(a,
f);d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBackSuccess")}}var t=g.$;l.registerComponent("s-ana-widget","s-ana-widget",function(a){a=t(a.elem());var c=a.data("widget-data")||{},b=c.metadata,e=c.questions;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoad");c.currentIndex=c.currentIndex?c.currentIndex:0;c.currentQuestionId=b.firstQuestionId;c.questionPath=c.questionPath?c.questionPath:[];c.answerIndexList=c.answerIndexList?c.answerIndexList:[];b&&0<a.find(".s-ana-answer").length&&
(a.find(".s-ana-answer").click(q(a,c,b,e,b.refinementBinList)),a.find(".s-ana-back-button").click(p(a,c,b,e)));d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoadSuccess")});return{cleanUpSearchParameterMap:b,buildSearchQueryString:v,buildQueryParameters:f,createAnswerClickHandler:q,createBackButtonHandler:p,buildUrl:y}});l.when("R","rush-router-pattern-parser","s-ana-widget-tracking-utils").register("s-ana-url-utils",function(g,l,d){return{getQueryParameters:function(a){a=(a||"").split("?");
a=1<a.length?a.slice(1).join("?"):a[0];return l.parseQueryString(a)},getSearchParametersMap:function(a){var b={},d,f;if(a&&a.rh)for(a=a.rh.split(","),f=0;f<a.length;f++)d=a[f].split(":"),b[d[0]]=d[1];return b},buildSearchQueryString:function(a){var b,d=[];for(b in a)"n"===b?d.push(a[b]):d.push(b+":"+a[b]);return d.join(",")},navigateTo:function(a){var b={};b.url=a;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefreshSuccess");g.to(b)}}});l.when("A","ready").register("s-ana-widget-tracking-utils",
function(g){function l(a,b){0===b?a.find(".s-ana-back-button").addClass("aok-hidden"):a.find(".s-ana-back-button").removeClass("aok-hidden")}function d(a,b,d,f){a.find(".s-ana-question").addClass("s-ana-hidden-element");a.find(".s-ana-question-index").text(b.indexList[d]);a.find(".s-ana-question-text").text(f.questionString);a.find(".s-ana-question").removeClass("s-ana-hidden-element")}return{updateSelectedAnswer:function(a,b){a.find(".s-ana-answer").removeClass("s-ana-answer-button-selected");b.addClass("s-ana-answer-button-selected")},
renderNextQuestion:function(a,b,p,f,m,r){m=a.find(".s-ana-answer-button-list[data-question-id\x3d"+m+"]");f=f[r];r=a.find(".s-ana-answer-button-list[data-question-id\x3d"+r+"]");var q=a.find(".s-ana-footer");m.addClass("s-ana-hidden-element");d(a,p,b,f);l(a,b);r.removeClass("s-ana-hidden-element");g.fadeOut(q,"0","ease-in",function(){g.fadeIn(q,"500","ease-in",function(){})})},updateClientSideMetricCounter:function(a,b){b=b?b:1;m.ue&&m.ue.count&&m.ue.count(a,(m.ue.count(a)||0)+b)},incrementAndFetchQuestionIndex:function(a){var b=
a.currentIndex;b++;return a.currentIndex=b},decrementAndFetchQuestionIndex:function(a){var b=a.currentIndex;b--;return a.currentIndex=b}}})});
/* ******** */
(function(e){var n=window.AmazonUIPageJS||window.P,r=n._namespace||n.attributeErrors,c=r?r("SearchWebKnowledgeWidgetAssets",""):n;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,n,r){e.when("A","s-web-application-controller","rush-util","tab-nav-util").register("tab-nav-ajax",function(c,d,e,h){return{ajaxTabClick:function(c){var b=c.selectedTab.$tab;c=b.attr("id");var a=b.attr("data-ajaxUrl"),l=b.closest("[data-widgetId]").attr("data-widgetId"),b=b.closest("[data-uuid]").attr("data-uuid"),
m="",g=!1;e.isNullOrUndefined(l)||2!==l.split(":").length||(m=l.split(":")[0]);l={uuid:b,ajaxUrl:a};(g=h.checkCriticalDataMissing(l))?h.logMissingCriticalData(l,m):(h.logMetric("tab_navigation:"+m),d.requestPartialContent(a,{suffix:":"+b+":"+c})["catch"](function(){h.logMetric("tab_navigation:"+m+":ajax_call_failure")}))}}});e.when("A","jQuery","rush-framework","s-actions","rush-util","tab-nav-util","tab-nav-ajax","a-carousel-framework").register("know-tab-nav",function(c,d,e,h,k,b,a,l){e.registerComponent("s-tab-navigation-component",
"s-tab-navigation-component",function(m){var g=m.elem(),e=d(g),g=e.closest("[data-uuid]").attr("data-uuid"),t=e.closest("[data-widgetId]").attr("data-widgetId"),f=b.getMatchingElement(e,".a-carousel-container"),p=e.closest(".a-tab-content"),n=b.getActiveTabHeight(e),u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]"),r="",x=!1,v=p.attr("id"),w=p.closest(".a-tab-container").find(".know-tab-nav-tabs-set").find("li.know-tab-nav-tab-header#"+b.escapeSpecialHashCharacter(v)),q=b.getMatchingElement(f,
"[id*\x3dtab-navigation-asin-header]");k.isNullOrUndefined(t)||2!==t.split(":").length||(r=t.split(":")[0]);t={uuid:g,carousel:f,tabContent:p,initialActiveTabHeight:n};(x=b.checkCriticalComponentDataInvalid(t))?b.logMissingCriticalData(t,r):(m.on(h.LOAD_SEARCH_PAGE+":"+g+":"+v,function(){u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]");!p.is(".a-hidden")&&0<u.length&&(f.addClass("aok-hidden"),u.height(n),u.html('\x3cdiv class\x3d"a-spinner-wrapper know-tab-nav-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e'))}),
m.on(h.RESULT_ITEM_READY+":"+g+":"+v,function(a){var c=p.attr("id"),d=document.createElement("div");k.isNullOrUndefined(a)||k.isBlank(c)?b.logMetric("tab_navigation:"+r+":ajax_asin_invalid"):(a=a.item.html,d.innerHTML=a,d=d.firstElementChild.getAttribute("data-asin"),k.isNotBlank(d)&&!p.is(".a-hidden")&&(d="#tab-navigation-replace-"+b.escapeSpecialHashCharacter(c)+"-"+d,d=e.find(d)[0],k.isNullOrUndefined(d)||(a=b.getAsinContent(a),0<a.length&&(m.replace(d,a[0].innerHTML),k.isNullOrUndefined(u)||0!==
p.find("[id*\x3dtab-navigation-replace]").length||(u.remove(),f.removeClass("aok-hidden"),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+b.escapeSpecialHashCharacter(c)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(c)),0<q.length?f.height()-q.outerHeight(!0):f.height()),l.createAll(),l.initializeAll())))))}),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+
b.escapeSpecialHashCharacter(v)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(v)),0<q.length?f.height()-q.outerHeight(!0):f.height()),b.setLineClampClass(b.getMatchingElement(f,"#tab-navigation-tab-link-line-clamp-"+b.escapeSpecialHashCharacter(v))),c.on("a:tabs:"+g+":"+p.data("a-name")+":select",a.ajaxTabClick),w.removeClass("know-tab-nav-disable-tab"),w.addClass("know-tab-nav-enable-tab"))})});e.when("jQuery","rush-util").register("tab-nav-util",
function(c,d){function e(a,b){var d=c(a),g;b.forEach(function(a){g=d.find(a);0<g.length&&(d=g)});return d.children()}function h(a){return(a.match(/(\s|^)s-line-clamp-\d+(?!\S)\b/g)||[]).map(c.trim)}function k(a){c(a).removeClass(function(a,b){return h(b).join(" ")}).addClass("s-line-clamp-2")}function b(a){var b=n.ue;b&&b.tag&&b.tag(a)}return{getAsinContent:function(a){a=e(a,[".template\\\x3dSEARCH_RESULTS",".s-latency-cf-section",".s-card-container"]);a.find(".a-spacing-medium").removeClass("a-spacing-medium");
a.find('[class*\x3d"status-badge"]').remove();k(a.find("[class*\x3ds-line-clamp]"));return a},findLineClampClass:h,getActiveTabHeight:function(a){a=c(a).closest(".a-tab-container").find(".a-tab-content").not(".a-hidden").height();return d.isNullOrUndefined(a)?400:a},escapeSpecialHashCharacter:function(a){return a.replace(/#/g,"\\#")},logMetric:b,checkCriticalDataMissing:function(a){for(var b in a)if(d.isNullOrUndefined(a[b])||d.isBlank(a[b]))return!0;return!1},checkCriticalComponentDataInvalid:function(a){return d.isNullOrUndefined(a.uuid)||
d.isBlank(a.uuid)||0>=c(a.carousel).length||0>=c(a.tabContent).length||!d.isNumber(a.initialActiveTabHeight)?!0:!1},logMissingCriticalData:function(a,c){for(var e in a)(d.isNullOrUndefined(a[e])||d.isBlank(a[e]))&&b("tab-navigation:"+c+":"+e)},getMatchingElement:function(a,b){return c(a).find(b)},setElementHeight:function(a,b){c(a).height(b)},setLineClampClass:k,setCSSPropertyForObject:function(a,b,c){d.isNullOrUndefined(c)||a.css(b,c)}}})});
/* ******** */
(function(n){var k=window.AmazonUIPageJS||window.P,m=k._namespace||k.attributeErrors,e=m?m("SearchWebSpecBasedShoppingWidgetAssets",""):k;e.guardFatal?e.guardFatal(n)(e,window):e.execute(function(){n(e,window)})})(function(n,k,m){n.when("A").register("s-sbs-metrics",function(e){var v=e.$;return{logFeatureLatencyMetric:function(e,h){k.uet&&v.isFunction(k.uet)&&k.uet(e,h,{wb:1})},sendLatencyMetricsToServer:function(e){k.uex&&v.isFunction(k.uex)&&k.uex("ld",e,{wb:1})}}});n.when("A","R","rush-router-pattern-parser").register("s-sbs-widget-common",
function(e,v,l){var h=e.$;return{getQueryParameters:function(){var a=(k.location.href||"").split("?"),a=1<a.length?a.slice(1).join("?"):a[0];return l.parseQueryString(a)},getActiveRefinementBinIds:function(a){return a.find(".sbs-refinement-bin").map(function(a,b){return h(b).data("refinement-bin-id")}).get()},getSearchParametersMap:function(a){var d={},b,c;if(a.rh!==m)for(a=a.rh.split(","),c=0;c<a.length;c++)b=a[c].split(":"),d[b[0]]=b[1];return d},getNodeListString:function(a){var d="",b,c;for(c=
0;c<a.length;c++)b=a[c],""!==d&&(d+=","),d=d+"n:"+b;return d},buildSearchQueryString:function(a){var d,b="";for(d in a)""!==b&&"n"!==d&&(b+=","),"nodeScope"===d?b+=a[d]:"n"!==d&&(b=b+d+":"+a[d]);return b},setQueryParameter:function(a,d,b,c){a=(a.data("widget")||{}).metadata;a!==m&&a.hasOwnProperty(b)&&(b=a[b],b!==m&&""!==b&&(d[c]=b));return d},addLinkParameters:function(a,d){(a=(a.data("widget")||{}).linkParams)&&h.each(a,function(a,c){d[a]=c});return d},showWidget:function(a){a.find(".sbs-widget-expander-content").removeClass("aok-hidden");
a.find(".sbs-spinner-container").addClass("aok-hidden")},hideWidget:function(a){a.find(".sbs-widget-expander-content").addClass("aok-hidden");a.find(".sbs-spinner-container").removeClass("aok-hidden");a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden")},scrollToTarget:function(a){a&&h(a).closest(".sbs-refinement-bin").scrollTop(a.offsetTop-a.parentElement.offsetTop+5)},updatePopularRefinementsVisibility:function(a){var d=0,b=
a.find("input:checked").length;a.find(".sbs-featured-refinement").toggleClass("aok-hidden",0<b);0===b&&(a.find("div.sbs-featured-refinement").each(function(a,b){"none"!==h(b).css("display")&&d++}),a.find(".sbs-refinement-list-divider").toggleClass("aok-hidden",0===d))},incrementClientSideMetricCounter:function(a){k.ue&&k.ue.count&&k.ue.count(a,(k.ue.count(a)||0)+1)},toggleVisibilityForEachBin:function(a){a.find(".sbs-refinement-bin").each(function(a,b){0<h(b).find(".sbs-refinement-container").not(".sbs-ineligible-hidden").not(".sbs-tagging-hidden").length?
h(b).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):h(b).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")})},updateActiveCheckMarkVisibility:function(a){var d=a.data("stateRefinementsMap"),b;a.find(".sbs-refinement-bin").each(function(a,g){b=h(g).attr("data-refinement-bin-id");d.hasOwnProperty(b)||h(g).closest(".sbs-refinement-bin-cell").find(".sbs-active-checkmark").addClass("aok-hidden")})},navigateTo:function(a){var d={};d.url=a;v.to(d)}}});n.when("A","s-sbs-eligible-refinements",
"s-sbs-widget-common").register("s-sbs-widget-tagging",function(e,k,l){function h(a){return d.map(a.split(" "),function(a){if(-1<a.indexOf("sbs-refinement-tag-"))return a.substring(19)})[0]}function a(a,c,g,e){var h=(g.data("widget")||{}).tagLabels,r=g.data("stateRefinementsMap"),p,w,x;h!==m&&1<h.length&&(-1<h.indexOf(a)||"sbsTagButtonAll"===a)&&(h.forEach(function(t){t===a?g.find(".sbs-refinement-container.sbs-refinement-tag-"+t).removeClass("sbs-tagging-hidden"):!1===c?g.find(".sbs-refinement-container.sbs-refinement-tag-"+
t).each(function(a,b){g.find(b).addClass("sbs-tagging-hidden");p=d(b).find(":input");!0===p.prop("checked")&&(p.prop("checked",!1),w=d(b).attr("data-refinement-id"),x=d(b).closest(".sbs-refinement-bin").attr("data-refinement-bin-id"),k.updateStateRefinementsMap(g,w,x,!1,"checkbox"===p[0].type))}):g.find(".sbs-refinement-container.sbs-refinement-tag-"+t).removeClass("sbs-tagging-hidden")}),r!==m&&0<Object.keys(r).length&&e?(l.hideWidget(g),k.updateEligibleRefinements("",g)):e&&"sbsTagButtonAll"===
a?(g.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden"),g.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden"),l.toggleVisibilityForEachBin(g)):e&&(g.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden"),l.toggleVisibilityForEachBin(g)))}var d=e.$;return{getTag:h,updateTaggedRefinementsVisibility:a,verifyTaggedSelectedRefinements:function(b){var c=(b.data("widget")||{}).tagLabels,d=[];
c!==m&&1<c.length&&(c.forEach(function(a){0<b.find(".sbs-refinement-tag-"+a).find("input:checked").length&&d.push(a)}),b.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),d.length===c.length||0===d.length?b.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"):d.forEach(function(c){a(c,!1,b,!1);b.find(".sbs-tag-button-"+c).addClass("a-button-selected sbs-tag-button-selected")}))},taggedRefinement:function(b,c,g){var e=(g.data("widget")||{}).tagLabels,
h,l;e!==m&&1<e.length&&(e=d(b).find(":input"),h=!0,l=0,"checkbox"===e.prop("type")&&(h=d(b).find(":input").prop("checked")),h?0===g.find(".sbs-tagging-hidden").length&&(g.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),g.find(".sbs-tag-button-"+c).addClass("a-button-selected sbs-tag-button-selected"),a(c,!1,g,!1)):(g.find(".sbs-refinement-container.sbs-refinement-tag-"+c).each(function(a,c){!0===d(c).find(":input").prop("checked")&&d(c).data("refinement-id")!==d(b).data("refinement-id")&&
l++}),0===l&&(g.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),g.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"),a(c,!0,g,!1))))},tagButtonHandler:function(b,c){d(b).hasClass("sbs-tag-button-selected")||("sbs-tag-button-all"===d(b).find(":input").data("button-id")?(a("sbsTagButtonAll",!1,c,!0),c.find("div[class*\x3d'sbs-refinement-tag']").removeClass("sbs-tagging-hidden")):a(h(b.className),!1,c,!0),l.updateActiveCheckMarkVisibility(c),
c.find(".sbs-tag-button").removeClass("sbs-tag-button-selected"),d(b).addClass("sbs-tag-button-selected"),l.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSTagButtonClick"))}}});n.when("A","s-sbs-widget-common").register("s-sbs-widget-feedback",function(e,k){function l(a,c){var d=(c.data("widget")||{}).metadata;d!==m&&d.hasOwnProperty("formsUrl")&&(d=d.formsUrl,c.find(".sbs-feedback-form").find("input[name\x3d__token_]").val(a.csrfToken.token),c.find(".sbs-feedback-selected-refinements-text-area").find("textarea").val(JSON.stringify(k.getQueryParameters())),
e.post(d,{paramsFormat:"string",params:c.find(".sbs-feedback-form").serialize(),success:function(){},error:function(a,b,c){n.log("Status: "+b+";Error: "+c,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function h(a){var c=(a.data("widget")||{}).metadata;c!==m&&c.hasOwnProperty("sbsWidgetFormUrl")&&(c=c.sbsWidgetFormUrl,e.get(c,{accepts:"application/json",success:function(c){c.hasOwnProperty("csrfToken")&&c.csrfToken.hasOwnProperty("token")&&l(c,a)},error:function(a,c,b){n.log("Status: "+c+";Error: "+b,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}
function a(a,c){c.find(".sbs-heading-container").find(".sbs-heading-text").each(function(a,c){d(c).addClass("sbs-feedback-hidden aok-hidden")});c.find(".sbs-heading-block").find("[headingId\x3d"+a+"]").removeClass("sbs-feedback-hidden aok-hidden");c.find(".sbs-free-text-container").removeClass("sbs-feedback-hidden aok-hidden");c.find(".sbs-feedback-form-submit-button-container").removeClass("sbs-feedback-hidden aok-hidden")}var d=e.$;return{sendFeedbackToForm:l,submitFeedback:h,toggleFeedbackContent:a,
createFeedbackQuestionButtonClickHandler:function(b){return function(c){var e=d(c.currentTarget);c.preventDefault();b.find(".sbs-radio-button-container").find("input:checked").each(function(a,c){d(c).prop("checked",!1)});c=e.find(":input");c.prop("checked",!0);c=c.attr("id");a(c,b)}},createFeedbackSubmitButtonClickHandler:function(a){return function(c){c.preventDefault();a.find(".sbs-feedback-form").fadeOut("slow",function(){a.find(".sbs-feedback-post-submit-container").removeClass("sbs-feedback-hidden aok-hidden").css("display",
"none").fadeIn("slow");a.find(".sbs-feedback-post-submit-content").focus()});h(a)}}}});n.register("s-sbs-afs-template",function(){return{getAFSRequestTemplate:function(e){e=e.data("activeRefinementBinsArray")||[];return{pageNumber:"1",asinCountPerPage:"10",filters:[{runLevel:"1",filterId:"sbs",filterType:"refinementsearch",filterParameters:{OptionalMap:{size:"1","include-refinements":"true","feature-set-definitions":'{"REFINEMENTS": {"deliveryDayRefinement": "enabledWithoutBinning","enableRefinementDiscriminators": "false","enableSmartRefinements": "true"}}',
"active-refinement-ids":JSON.stringify(e)}}}]}}}});n.when("A","s-sbs-metrics","s-sbs-widget-common","s-sbs-afs-template").register("s-sbs-eligible-refinements",function(e,k,l,h){function a(a,c,b){c=c.toString();a.hasOwnProperty(b)?-1===a[b].indexOf(c)&&(a[b]+="|"+c):a[b]=c;return a}function d(a,c,b){var d;c=c.toString();a.hasOwnProperty(b)&&(d=a[b].split("|"),c=d.indexOf(c),-1<c&&(d.splice(c,1),0<d.length?a[b]=d.join("|"):delete a[b]));return a}function b(a,c){var b=[],d=!1,e=p(c),f;if(0!==Object.keys(a).length)for(c=
0;c<a.values.length;c++)"0"===a.values[c].notAvailable&&b.push(a.values[c].id);if(e.hasClass("sbs-featured-refinement-bin")){if(e.find(".sbs-button-list-item").addClass("sbs-ineligible-hidden"),e.find(".a-button-selected").closest(".sbs-refinement-container").each(function(a,c){f=p(c).find(":input").data("refinement-id").toString();-1===b.indexOf(f)&&b.push(f)}),0!==b.length)for(c=0;c<b.length;c++)e.find("[data-refinement-id\x3d'"+b[c]+"']").closest(".sbs-button-list-item").removeClass("sbs-ineligible-hidden")}else if(e.find(".sbs-refinement-container").addClass("sbs-ineligible-hidden"),
e.find("input:checked").closest(".sbs-refinement-container").each(function(a,c){f=p(c).data("refinement-id").toString();-1===b.indexOf(f)&&b.push(f)}),0!==b.length)for(c=0;c<b.length;c++)e.find("[data-refinement-id\x3d'"+b[c]+"']").removeClass("sbs-ineligible-hidden");0<e.find(".sbs-refinement-container").not(".sbs-ineligible-hidden").not(".sbs-tagging-hidden").length&&(d=!0);return d}function c(a,c,d){var e,g=a.additionalFilterData["*value*"].sbs.refinements,f,q,y;d.find(".sbs-refinement-bin").each(function(a,
d){y=p(d).data("refinement-bin-id");if(y!==c&&"n"!==y){f=!1;q={};for(e=0;e<g.length;e++)if(g[e].shortId===y){q=g[e];break}(f=b(q,d))?p(d).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):p(d).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")}l.updatePopularRefinementsVisibility(p(d))})}function g(a){var c={};Object.keys(a).sort().forEach(function(b){c[b]=a[b]});delete c["feature-set-definitions"];return JSON.stringify(c)}function m(a){var c=(a.data("widget")||{}).scopedBrowseNodeIds;
a=a.data("stateRefinementsMap");var b="";c&&(b=c.join(","));b&&a&&a.n?-1===c.indexOf(a.n)&&(b+=","+a.n):a&&a.n&&(b=a.n);return b}function u(a){var c=a.data("stateRefinementsMap"),b=(a.data("widget")||{}).metadata,d=m(a),e,f;if(b&&c&&d){e=h.getAFSRequestTemplate(a);a=e.filters[0].filterParameters.OptionalMap;a["search-alias"]=b.searchAlias;a["session-id"]=b.sessionId;a["marketplace-id"]=b.marketplace;a.store=b.store;a.keywords=b.marketplaceDefaultLanguageKeyword.toLowerCase();a.node=d;for(f in c)"n"!==
f&&(b=c[f].split("|"),b.sort(),a[f]=b.join("|"));e.filters[0].filterParameters.OptionalMap=a}return e}function r(a,b,d,e){var h,f={},q=d.data("cachedCalls");l.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCall");q&&(f=q);k.logFeatureLatencyMetric("bb","SBSAFSAjaxCall");p.ajax({type:"POST",url:"/gp/sfx/get-filtered-asins.html",dataType:"json",timeout:5E3,xhrFields:{withCredentials:!0},data:{afsRequest:JSON.stringify(a)},success:function(q){q.hasOwnProperty("additionalFilterData")&&
q.additionalFilterData&&0<q.additionalFilterData["*value*"].sbs.refinements.length&&(h=g(a.filters[0].filterParameters.OptionalMap),f[h]=q,d.data("cachedCalls",f),c(q,b,d),l.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCallSuccess"))},error:function(a,c,b){l.incrementClientSideMetricCounter("timeout"===c?"HCXEffortlessShoppingSBSWidgetAFSCallTimeout":"HCXEffortlessShoppingSBSWidgetAFSCallFailed");n.log("Status: "+c+";Error: "+b,"SBS_WIDGET_ELIGIBLE_REFINEMENTS_CALL_ERROR")},
complete:function(){k.logFeatureLatencyMetric("cf","SBSAFSAjaxCall");l.showWidget(d);l.scrollToTarget(e);k.sendLatencyMetricsToServer("SBSAFSAjaxCall")}})}var p=e.$;return{addRefinement:a,removeRefinement:d,updateRefinementsDisplayedInBin:b,processResponse:c,buildKey:g,buildNodeList:m,getAFSRequest:u,callAFS:r,updateStateRefinementsMap:function(c,b,e,g,h){var f=c.data("stateRefinementsMap");f&&(h?f=g?a(f,b,e):d(f,b,e):(f.hasOwnProperty(e)&&delete f[e],g&&(f=a(f,b,e))),c.data("stateRefinementsMap",
f))},updateEligibleRefinements:function(a,b,d){var h,k=u(b),f=b.data("cachedCalls"),q;k?(f&&(h=g(k.filters[0].filterParameters.OptionalMap),h in f&&(q=f[h])),q?e.delay(function(){c(q,a,b);l.showWidget(b);l.scrollToTarget(d)},150):r(k,a,b,d)):l.showWidget(b)}}});n.when("A","rush-framework","a-button","s-sbs-metrics","s-sbs-widget-common","s-sbs-widget-tagging","s-sbs-widget-feedback","s-sbs-eligible-refinements").register("s-sbs-widget",function(e,k,l,h,a,d,b,c){function g(c,b){(c=(c.data("widget")||
{}).scopedBrowseNodeIds)||(c=[]);c=a.getNodeListString(c);b.n&&(c+=",n:"+b.n);return c}function n(a,c){for(var b in c)"n"!==b&&(""===c[b]?delete a[b]:a[b]=c[b]);return a}function u(a){var c={},b;a.find(".sbs-refinement-bin").each(function(a,b){var d=f(b).data("refinement-bin-id");a=f(b).find("input:checked").closest(".sbs-refinement-container");c[d]="";0<a.length&&f(a).each(function(a,b){""===c[d]?c[d]=f(b).data("refinement-id"):(new RegExp("(^"+f(b).data("refinement-id")+")|(\\|"+f(b).data("refinement-id")+
")")).test(c[d])||(c[d]+="|"+f(b).data("refinement-id"))})});b=a.find(".sbs-featured-refinement-bin");0<b.length&&(b=b[0],a=a.find(".sbs-featured-refinement-button.a-button-selected"),0<a.length&&(c[f(b).data("refinement-bin-id")]=f(a[0]).find(":input").data("refinement-id")));return c}function r(c){var b,d,e;b=a.getQueryParameters();d=a.getSearchParametersMap(b);e=u(c);d=n(d,e);d.nodeScope=g(c,e);b.rh=a.buildSearchQueryString(d);b=a.setQueryParameter(c,b,"keyword","k");b=a.setQueryParameter(c,b,
"refMarker","ref");b=a.setQueryParameter(c,b,"persistId","pid");b.page=1;b=a.addLinkParameters(c,b);return location.origin+location.pathname+"?"+f.param(b)}function p(b){return function(d){var e=d.selectedButton.$button[0];d=f(b.find(".sbs-featured-refinement-bin")[0]).data("refinement-bin-id");e=f(e).find(":input").data("refinement-id");a.hideWidget(b);b.find(".sbs-refinement-bin").scrollTop(0);"n"===d&&(b.find(".sbs-refinement-bin input:checked").each(function(a,b){f(b).prop("checked",!1)}),b.data("stateRefinementsMap",
{}));c.updateStateRefinementsMap(b,e,d,!0,!1);d=r(b);a.navigateTo(d)}}function w(a){return function(b){d.tagButtonHandler(b.selectedButton.$button[0],a)}}function x(a){a.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected");a.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected");a.find(".sbs-active-checkmark").addClass("aok-hidden");a.find(".sbs-featured-refinement-button").removeClass("a-button-selected");a.find(".sbs-refinement-bin input:checked").each(function(b,
c){a.find(c).prop("checked",!1)});a.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden");a.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-button-list-item.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-refinement-bin-cell").removeClass("aok-hidden");a.find(".sbs-featured-refinement").removeClass("aok-hidden");a.find(".sbs-refinement-bin").scrollTop(0);a.find(".sbs-no-results-alert").addClass("aok-hidden");
a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden");a.data("stateRefinementsMap",{})}function t(a){return function(b){b.preventDefault();x(a)}}function z(b){return function(e){var h=f(e.currentTarget);e=h.closest(".sbs-refinement-container");var g=e.data("refinement-id"),k=e.closest(".sbs-refinement-bin"),l=k.data("refinement-bin-id"),n=h.prop("checked"),h="checkbox"===h.prop("type"),m;a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClick");a.hideWidget(b);
h?k.find("[data-refinement-id\x3d'"+g+"']").each(function(a,b){f(b).find(":input").prop("checked",n);!f(b).hasClass("sbs-featured-refinement")&&n&&(m=f(b).closest("li").get(0))}):(k.find("input:checked").each(function(a,b){f(b).prop("checked",!1)}),k.find("[data-refinement-id\x3d'"+g+"']").each(function(a,b){f(b).find(":input").prop("checked",!0);f(b).hasClass("sbs-featured-refinement")||(m=f(b).closest("li").get(0))}));if(k=d.getTag(e.attr("class")))d.taggedRefinement(e,k,b),m||(m=e.closest("li").get(0));
c.updateStateRefinementsMap(b,g,l,n,h);e=r(b);a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClickSuccess");a.navigateTo(e)}}function A(b){var e=!1,h=(b.data("widget")||{}).metadata,g=a.getQueryParameters(),g=a.getSearchParametersMap(g),k=a.getActiveRefinementBinIds(b),l,m;a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoad");b.find(".sbs-refinement-container").each(function(a,b){l=f(b).find(".a-link-normal");0<l.length&&l.attr("tabIndex","-1")});g.n&&
(m=b.find(".sbs-featured-refinement-button.a-button-selected"),0<m.length&&g.n===m.first().find(":input").data("refinement-id").toString()||delete g.n);b.data("stateRefinementsMap",g);b.data("activeRefinementBinsArray",k);h&&(e="true"===h.hasSelectedRefinements.toLowerCase());e?(a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinements"),d.verifyTaggedSelectedRefinements(b),c.updateEligibleRefinements("",b),a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinementsSuccess")):
(b.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"),a.showWidget(b));a.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadSuccess")}var f=e.$;k.registerComponent("s-sbs-widget","s-sbs-widget",function(a){var c=f(a.elem()),d=c.data("widget")||{},g=d.scopedBrowseNodeIds,k=d.linkParams,l=d.metadata,d=d.tagLabels;h.logFeatureLatencyMetric("bb","SBSWidgetLoad");g&&k&&l&&0<c.find(".es-sbs-top-slot-widget").length&&((d===m||2>d.length)&&c.find(".sbs-tags-section").hide(),
A(c),c.find(".sbs-refinement-container").delegate("input","change",z(c)),c.find(".sbs-reset-filters").click(t(c)),e.on("a:button-group:featuredRefinementButtons:toggle",p(c)),e.on("a:button-group:tagButtons:toggle",w(c)),c.find(".sbs-feedback-form").submit(b.createFeedbackSubmitButtonClickHandler(c)),c.find(".sbs-yes-button").click(b.createFeedbackQuestionButtonClickHandler(c)),c.find(".sbs-no-button").click(b.createFeedbackQuestionButtonClickHandler(c)),a.teardown=function(){e.off("a:button-group:featuredRefinementButtons:toggle");
e.off("a:button-group:tagButtons:toggle")});h.logFeatureLatencyMetric("cf","SBSWidgetLoad");h.sendLatencyMetricsToServer("SBSWidgetLoad")});return{createFeaturedRefinementButtonToggleHandler:p,createResetFiltersClickHandler:t,createRefinementClickHandler:z,updateNodeScopeWithSelectedSubtype:g,addSelectedRefinements:n,getSelectedRefinements:u,buildNavigationUrl:r,onWidgetLoad:A}})});
/* ******** */
(function(a){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,c=d?d("SearchWebFeedbackWidgetAssets",""):b;c.guardFatal?c.guardFatal(a)(c,window):c.execute(function(){a(c,window)})})(function(a,b,d){"use strict";a.when("A","rush-framework","a-button").register("s-feedback-widget",function(c,a,b){var d=c.$;a.registerComponent("s-feedback-widget","s-feedback-widget",function(a){function h(a){a.removeClass("aok-hidden")}var e=d(a.elem()),k=b(".s-feedback-submit-button");e.find("form").submit(function(b){var f=
d(b.target),g=f.find('textarea[name\x3d"response"]'),l=e.find(".s-feedback-error"),m=e.find(".s-feedback-response-needed"),n=e.find(".s-feedback-response-too-long"),p=e.find(".s-feedback-pre-submit"),q=e.find(".s-feedback-success");b.preventDefault();k.disable();l.addClass("aok-hidden");""===g.val()?(h(m),k.enable()):1E5<g.val().length?(h(n),k.enable()):(p.addClass("aok-hidden"),h(q),b=f.attr("action"),g=f.attr("method"),f=f.serialize(),c.ajax(b,{method:g,params:f,paramsFormat:"string",contentType:"application/x-www-form-urlencoded",
error:function(){a.log.fatal("Failed to post feedback data to endpoint.")}}));return!1})})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("LoomSponsoredProductsAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("A","rush-framework").register("sp-sponsored-result",function(c,b){function e(a){a=a.elem();a=c.$(a).find(".s-image");if(0<a.length){a=(a=a.is(":visible"))?0:1;var b=f("sp_hidden")||0;f("sp_hidden",b+a);a=f("sp_delivered")||0;f("sp_delivered",a+1)}}var f=d.ue&&d.ue.count;f&&
b.registerComponent("sp-sponsored-result","sp-sponsored-result",e)})});
/* ******** */
(function(l){var r=window.AmazonUIPageJS||window.P,v=r._namespace||r.attributeErrors,d=v?v("QuantitySelectorAssets",""):r;d.guardFatal?d.guardFatal(l)(d,window):d.execute(function(){l(d,window)})})(function(l,r,v){l.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(d,a,c){function e(){b&&b.enableCheckoutCompatibility&&g()}function g(){d.$('span[id^\x3d"'+a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){d.$(this)[0].style.color="#B12704"});
d.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=d.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),d.$('button[id^\x3d"'+a+'-announce"]').each(function(){d.$(this)[0].style.paddingRight="17px"}))})}function u(a){function b(a){return d.$(a+"-announce")}return function(a){return new b(a)}}function k(b){var e=function(a,e){var c=a+"-extradata",g=b.state(c);if(null==e)return c=b.state(a),e=d.$.extend({},c,g);g=d.$.extend({},g,e);b.state(c,
g)};e.parse=function(){for(var e=d.$(a.getQsWidgetGenericStateSelectorQuery()),f=a.getQsWidgetConfigurationId(""),q=0;q<e.length;q++){var g=e[q].getAttribute("data-a-state");if((g=c.parseJSON(g).key)&&g.substring(0,f.length)==f){var p=b.state(g);p&&p.id||(p=c.parseJSON(e[q].innerHTML),b.state(g,p))}}};e.replace=function(a,e){a+="-extradata";"function"===typeof b.state.replace?b.state.replace(a,e):b.state(a,e)};return{state:e}}var b;l.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",
function(a,b){l.register("QuantitySelectorAUIDeps",function(){return{aUtil:c,aState:a.object,aButton:b.object,initialize:e}})});(function(){for(var e=d.$(a.getQsWidgetGenericStateSelectorQuery()),g=a.getQsWidgetGlobalConfigurationId(),h=0;h<e.length;h++){var f=e[h].getAttribute("data-a-state");if((f=c.parseJSON(f).key)&&f.substring(0,g.length)==g){b=c.parseJSON(e[h].innerHTML);break}}})();(function(){b&&b.enableCheckoutCompatibility?(l.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",
function(a){l.register("QuantitySelectorAUIDeps_AState",function(){return{object:k(a)}})}),l.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",function(a){l.register("QuantitySelectorAUIDeps_AButton",function(){return{object:u(a)}})}),d.on("checkout:afterReload",function(){d.trigger(a.getQsWidgetEventInitialize(),!1)})):(l.when("a-state").execute("qsAUIDeps-a-state-register",function(a){l.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),l.when("a-button").execute("qsAUIDeps-a-button-register",
function(a){l.register("QuantitySelectorAUIDeps_AButton",function(){return{object:a}})}));d.on("a:pageUpdate ready",function(){d.trigger(a.getQsWidgetEventInitialize(),!1)})})();e()});"use strict";l.when("A").register("QuantitySelectorConstants",function(d){var a={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},c={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},
getQsWidgetEventLoadStatesAndInitialize:function(){return"quantity-selector-widget:loadStatesAndInitialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},
getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},
getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},getQsWidgetConfigurationId:function(a){return"qs-widget-configuration-"+a},getQsWidgetStateScriptSelectorQuery:function(a){return"script[data-a-state*\x3d'qs-widget-configuration-"+
a+"'], "+("div[data-a-state*\x3d'qs-widget-configuration-"+a+"']")},getQsWidgetGenericStateSelectorQuery:function(){return"script[type\x3d'a-state'], div[data-a-state]"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetDivSelectorQueryForWidgetContainers:function(){return"div[id^\x3dqs-widget-container-]"},getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetDivSelectorQueryForSpinners:function(){return"div[id^\x3dqs-widget-spinner-]"},getQsWidgetCheckboxId:function(a){return"qs-widget-checkbox-"+
a},getQsWidgetInputSelectorQueryForCheckboxes:function(){return"input[id^\x3dqs-widget-checkbox-]"},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetDropdownItemId:function(a,
c){return"qs-widget-dropdown-item-"+c+"-"+a},getQsWidgetDropdownItemAriaId:function(a,c){return"qs-widget-dropdown-item-aria-"+c+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,c){return"qs-widget-dropdown-item-quantitySuffix-"+c+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+
a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+
a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryId:function(){return"qs-widget-summary-"},getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+
a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+
a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},
getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+a},getQsWidgetBottomSheetHeightConfig:function(){return a},
getQsWidgetBottomSheetDropDownScrollFactor:function(){return c}}});"use strict";l.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(d,a,c){function e(d){return(d=a.getQsWidgetConfiguration(d).metadata)?c.aUtil.parseJSON(d):null}return{isWeblabEnabled:function(a,c,d){a:{if((a=e(a))&&a.weblabs)for(var b=0;b<a.weblabs.length;b++){var n=a.weblabs[b];if(n.weblabName==c){c=n.treatment;break a}}c=null}return null==c?d:"T1"==c?!0:!1},getMetaConfiguration:function(a,
c){return(a=e(a))?a[c]:null}}});"use strict";l.when("A","QuantitySelectorAUIDeps","QuantitySelectorConstants").register("QuantitySelectorMetrics",function(d,a,c){function e(a){r.ue&&r.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}return{incrementInitializeCount:function(a,c){var d="QuantitySelector-Initialize",d=a?d+"-Success-Count":d+"-Failed-Count";e(c?d+":mobile":d+":desktop")},incrementInvalidIdCount:function(){e("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(a,c,d){a="QuantitySelector-TriggerAction-"+
a;a=c?a+"-Success-Count":a+"-Failed-Count";e(d?a+":mobile":a+":desktop")},incrementChangeLinkCount:function(){e("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(a){var c="QuantitySelector-ShowPopup-Count";e(a?c+":mobile":c+":desktop")},logLatencyMetric:function(a,c){a="QuantitySelector-TimeTo-"+a;r.ue&&r.ue.count&&a&&"undefined"!==typeof r.ue_t0&&ue.count(a,c-r.ue_t0)},logCsm:function(d,e){var k=a.aState.state(c.getQsWidgetConfigurationId(d));if(k&&(d="mobile"==k.viewType.toLowerCase()?
"mob":"dsk",(k=k.qsCsm)&&k.almBrandRefMarker&&k.pageRefMarker)){var b;a:{b=k.sellingUomDimension;var n=k.pricingUomDimension;if(b&&n){var p="s";switch(b){case "count":p+="u";break;case "weight":p+="w";break;default:b=void 0;break a}p+="p";switch(n){case "count":p+="u";break;case "weight":p+="w";break;default:b=void 0;break a}b=p}else b=void 0}b&&(e={pageType:k.pageType,subPageType:k.subPageType,pageTypeId:k.pageTypeId,storeName:k.tabId,programRegionId:k.programRegionId,hitType:k.hitType,refMarker:k.almBrandRefMarker+
"_"+d+"_"+k.pageRefMarker+"_qs_"+e+"_"+b},r.ue&&r.ue.event&&ue.event(e,"quantityselector_attr","quantityselector.QuantityselectorMetrics.1"))}}}});"use strict";l.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(d,a,c,e){function g(b){var c=e.aState.state(a.getQsWidgetConfigurationId(b));c&&c.id||(u(b),c=e.aState.state(a.getQsWidgetConfigurationId(b)));return c}function u(b){var c=a.getQsWidgetConfigurationId(b);b=a.getQsWidgetStateScriptSelectorQuery(b);
b=d.$(b).first();b=e.aUtil.parseJSON(b.html());e.aState.state(c,b)}function k(){for(var b=[],c=d.$(a.getQsWidgetGenericStateSelectorQuery()),p=a.getQsWidgetConfigurationId(""),h=0;h<c.length;h++){var f=c[h].getAttribute("data-a-state");(f=e.aUtil.parseJSON(f).key)&&f.substring(0,p.length)==p&&(f=f.substring(p.length),b.push(f))}return b}d.on(a.getQsWidgetEventTriggerAction(),function(b,n,p){var h=g(b),f=h.selectedId,q=h.selectedQuantity;n||(n=h.actionId);var w="mobile"==h.viewType.toLowerCase(),t=
!1;if(f)for(var k=0;k<h.qsItems.length;k++)if(h.qsItems[k].id==f){var t=e.aUtil.parseJSON(h.staticData),u=e.aUtil.parseJSON(h.qsItems[k].data),t=d.$.extend({qsUID:b,tunneledData:p},t,u);d.trigger(a.getQsWidgetEventAction(n),t);c.incrementTriggerActionCount(n,!0,w);t=!0}q&&(t=e.aUtil.parseJSON(h.staticData),t=d.$.extend({qsUID:b,tunneledData:p},t,{quantity:q}),d.trigger(a.getQsWidgetEventAction(n),t),c.incrementTriggerActionCount(n,!0,w),t=!0);t||c.incrementTriggerActionCount(n,!1,w)});d.on(a.getQsWidgetEventConfigureList(),
function(a){"function"===typeof a&&a(k())});d.on(a.getQsWidgetEventConfigureGet(),function(a,c){a=g(a);"function"===typeof c&&c(a)});d.on(a.getQsWidgetEventConfigureSet(),function(b,c){e.aState.state.replace(a.getQsWidgetConfigurationId(b),c);d.trigger(a.getQsWidgetEventInitialize(),!0,b)});return{getQsWidgetConfiguration:g,loadQsWidgetStateConfiguration:u,saveOriginalSettings:function(b){var c=a.getQsWidgetConfigurationId(b)+"-original",d=e.aState.state(c);d&&d.id||(b=g(b),e.aState.state(c,b))},
loadOriginalSettings:function(b){var c=a.getQsWidgetConfigurationId(b)+"-original";(c=e.aState.state(c))&&c.id&&e.aState.state.replace(a.getQsWidgetConfigurationId(b),c)},setEnable:function(b,c){c={enable:c};e.aState.state(a.getQsWidgetConfigurationId(b),c)},setInitialized:function(b){e.aState.state(a.getQsWidgetConfigurationId(b),{initialized:!0})},setSelectedId:function(b,c){c={selectedId:c,selectedQuantity:null};e.aState.state(a.getQsWidgetConfigurationId(b),c)},setSelectedQuantity:function(b,
c){c={selectedId:null,selectedQuantity:c};e.aState.state(a.getQsWidgetConfigurationId(b),c)},setData:function(b,c){e.aState.state(a.getQsWidgetConfigurationId(b),c)},getQsUIDs:k}});"use strict";l.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps").register("QuantitySelectorUtils",function(d,a,c,e){function g(a){return"true"==a||1==a?!0:!1}function u(m){return"mobile"==a.getQsWidgetConfiguration(m).viewType.toLowerCase()?!0:!1}function k(m){m=a.getQsWidgetConfiguration(m);
return g(m.showConfirmationView)?!0:!1}function b(m){m=a.getQsWidgetConfiguration(m);return g(m.allowZeroQuantity)?!0:!1}function n(a){var b=d.$("#"+c.getQsWidgetQuantityChangelinkId(a));a=d.$("#"+c.getQsWidgetTextInputUpdateButtonId(a));b.attr("draggable","false");a.attr("draggable","false")}function p(a){return d.$("#"+c.getQsWidgetContainerId(a))}function h(a){return e.aButton("#"+c.getQsWidgetButtonId(a))}function f(a){return d.$("#"+c.getQsWidgetDropdownContainerId(a))}function q(a){return d.$("#"+
c.getQsWidgetDropdownViewId(a))}function w(a){return d.$("#"+c.getQsWidgetDropdownUnorderedListId(a))}function t(a){return d.$("#"+c.getQsWidgetTextInputId(a))}function l(m,b){m=a.getQsWidgetConfiguration(m);for(var c=0;c<m.qsItems.length;c++)if(m.qsItems[c].id==b)return m.qsItems[c]}function r(m){var c=a.getQsWidgetConfiguration(m).selectedId;return c?c:A(m)}function A(m){m=a.getQsWidgetConfiguration(m);if(m.qsItems)for(var c=0;c<m.qsItems.length;c++)if(g(m.qsItems[c].isSelected))return m.qsItems[c].id}
function y(m){return a.getQsWidgetConfiguration(m).selectedQuantity}function v(a,c){return(b(a)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(c)}function B(a){if(a){var b=d.$("#"+c.getQsWidgetCheckboxId(a)),f=p(a);a=d.$("#"+c.getQsWidgetSpinnerId(a))}else b=d.$(c.getQsWidgetInputSelectorQueryForCheckboxes()),a=d.$(c.getQsWidgetDivSelectorQueryForSpinners()),f=d.$(c.getQsWidgetDivSelectorQueryForWidgetContainers());b.remove();a.removeClass("qs-widget-visible");a.addClass("qs-widget-hidden");
f.removeClass("qs-widget-hidden")}var x=[];return{isInitialized:function(m){return(m=a.getQsWidgetConfiguration(m))?m.initialized:!1},isMobile:u,isQsWidgetEnabled:function(m){m=a.getQsWidgetConfiguration(m);return m.hasOwnProperty("enable")?g(m.enable):!0},isConfirmationViewEnabled:k,isAllowZeroQuantityEnabled:b,isInitialViewDropdown:function(m){return a.getQsWidgetConfiguration(m).initialView.toLowerCase()==c.getQsWidgetInitialViewDropdown()?!0:!1},getQsWidgetBottomSheetConfig:function(m){var b=
a.getQsWidgetConfiguration(m),f=c.getQsWidgetBottomSheetHeightConfig(),d=0;b.summaryDisclaimerText||(d=k(m)?f.disclaimerTextAdjustmentWithAtc:f.disclaimerTextAdjustment);return k(m)?{closeMessage:b.bottomSheetCancelText,height:f.heightWithAtc-d}:{closeMessage:b.bottomSheetDoneText,height:f.height-d}},isActionTriggerOnConfirmation:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==c.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==
c.getQsWidgetActionTriggerOnSelect()?!0:!1},isTextInputRequired:function(a,c){a=l(a,c).quantityText;return"+"==a.substr(a.length-1)?{result:!0,initialQuantityText:a.substr(0,a.length-1)}:{result:!1}},initializeWidget:function(a){var b=r(a);b?d.trigger(c.getQsWidgetEventSelectId(),a,b,!1,function(){n(a)}):(b=y(a))&&d.trigger(c.getQsWidgetEventSelectQuantity(),a,b,!1,function(){n(a)});B(a)},activateWidget:function(a){var b=x.indexOf(a);-1<b&&x.splice(b,1);setTimeout(function(){x.push(a)},c.getQsWidgetActivateDebounce())},
deactivateWidget:function(a){a=x.indexOf(a);-1<a&&x.splice(a,1)},getActivatedQsWidgets:function(){return x},hideComponent:function(a,b){a.addClass("aok-hidden")},showComponent:function(a){a.removeClass("aok-hidden")},isComponentVisible:function(a){return!a.hasClass("aok-hidden")},setComponentVisibility:function(a,b){b?a.css("visibility","visible"):a.css("visibility","hidden")},setHtml:function(a,b){a.html(b)},setQsWidgetContainerMinWidthAndHeight:function(a){a=p(a);a.css("min-width",a.width()+"px");
a.css("min-height",a.height()+"px")},resetQsWidgetContainerMinWidthAndHeight:function(a){a=p(a);a.css("min-width","0px");a.css("min-height","0px")},enableQsWidget:function(b){var c=h(b),f=t(b);c.enable();f.removeClass("a-form-disabled");f.addClass("a-form-normal");f.removeAttr("disabled");a.setEnable(b,!0)},disableQsWidget:function(b){var c=h(b),f=t(b);c.disable();f.removeClass("a-form-normal");f.addClass("a-form-disabled");f.attr("disabled","disabled");a.setEnable(b,!1)},popOutDropDownContainer:function(a){var b=
p(a).offset();a=f(a);a.appendTo(document.body);a.css({left:b.left,top:b.top})},getQsWidgetButtonContainer:function(a){return d.$("#"+c.getQsWidgetButtonContainerId(a))},getQsWidgetButtonAsComponent:h,getQsWidgetButton:function(a){return d.$("#"+c.getQsWidgetButtonId(a)+"-announce")},getQsWidgetDropdownContainer:f,getQsWidgetDropdownElement:function(a){return d.$("#"+c.getQsWidgetDropdownId(a))},getQsWidgetDropdownViewSelector:q,getQsWidgetDropdownUnorderedListElement:w,getQsWidgetDropdownItemElement:function(a,
b){return d.$("#"+c.getQsWidgetDropdownItemAriaId(a,b))},getQsWidgetTextInputContainer:function(a){return d.$("#"+c.getQsWidgetTextInputContainerId(a))},getQsWidgetTextInputElement:t,getQsWidgetTextInputUpdateButtonContainer:function(a){return d.$("#"+c.getQsWidgetTextInputUpdateButtonContainerId(a))},getQsWidgetQuantityContainer:function(a){return d.$("#"+c.getQsWidgetQuantityContainerId(a))},getQsWidgetQuantityElement:function(a){return d.$("#"+c.getQsWidgetQuantityId(a))},getQsWidgetQuantitySuffixElement:function(a){return d.$("#"+
c.getQsWidgetQuantitySuffixId(a))},getQsWidgetInitialViewSuffixElement:function(a){return d.$("#"+c.getQsWidgetInitialViewSuffixId(a))},getQsWidgetSummaryAtcButton:function(a){return d.$("#"+c.getQsWidgetSummaryAtcId(a))},getQsWidgetSummaryContainer:function(a){return d.$("#"+c.getQsWidgetSummaryPriceId(a))},getQsWidgetSummaryPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceSymbolId(a))},getQsWidgetSummaryPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceWholeId(a))},
getQsWidgetSummaryPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceFractionId(a))},getQsWidgetSummaryPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceDecimalId(a))},getQsWidgetFooterPriceContainer:function(a){return d.$("#"+c.getQsWidgetFooterPriceContainerId(a))},getQsWidgetFooterPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceSymbolId(a))},getQsWidgetFooterPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceWholeId(a))},
getQsWidgetFooterPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceFractionId(a))},getQsWidgetFooterPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceDecimalId(a))},getQsWidgetFooterQuantitySuffixContainer:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixContainerId(a))},getQsWidgetFooterQuantitySuffixElement:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixId(a))},getQsWidgetBottomSheetQuantitySuffixElement:function(a){return d.$("#"+
c.getQsWidgetBottomSheetQuantitySuffixId(a))},getQsItem:l,getSelectedQsItemId:r,getInitialSelectedQsItemId:A,getSelectedQuantity:y,getQsItemFromQuantityText:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var f=0;f<b.length;f++)if(c.toLowerCase()==b[f].quantityText.toLowerCase()||parseFloat(c)==parseFloat(b[f].quantityText))return b[f]},getFocusedQsItemIdInBottomSheet:function(b){var f=q(b).scrollTop(),d=c.getQsWidgetBottomSheetDropDownScrollFactor();f=parseInt((f-d.constant+
d.adjustment)/d.increment);b=a.getQsWidgetConfiguration(b).qsItems;b=0>f?b[0].id:f>=b.length?b[b.length-1].id:b[f].id;return b},getIndexFromIdInBottomSheet:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return 0;for(var f=0;f<b.length;f++)if(c==b[f].id)return f},saveQsWidgetDropdownTopPosition:function(b){var c=w(b);c&&(c=c.position().top,a.setData(b,{scrollTop:c}));return!1},setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(b){a.setData(b,
{scrollTop:c.getQsWidgetDropdownScrollMetricThreshold()})},isQsWidgetDropdownScrolled:function(b){var f=w(b);return f?(f=f.position().top,(b=a.getQsWidgetConfiguration(b).scrollTop)?Math.abs(f-b)>c.getQsWidgetDropdownScrollMetricThreshold():!1):!1},generateQsDropdownDOM:function(b){var f="",d=a.getQsWidgetConfiguration(b),q=d.qsItems,d=d.selectedId,e=u(b);if(!q)return"";for(var h=0;h<q.length;h++){var n,p=q[h].id,w=q[h].quantityText;if(e){n=b;var g=c.getQsWidgetDropdownItemId(n,p),t=c.getQsWidgetDropdownItemAriaId(n,
p),k=c.getQsWidgetDropdownItemDecl();n='\x3cspan class\x3d"a-declarative" data-action\x3d"'+k+'" data-'+k+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+n+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+g+'" aria-labelledby\x3d"'+t+'" class\x3d"qs-widget-dropdown-li"\x3e'+w+"\x3c/li\x3e\x3c/span\x3e"}else{n=b;var l=q[h].quantityTextAbbreviatedSuffix,g=q[h].id==d,t=c.getQsWidgetDropdownItemId(n,p),k=c.getQsWidgetDropdownItemAriaId(n,p),r=c.getQsWidgetDropdownItemQuantitySuffixId(n,
p),z=c.getQsWidgetDropdownDecl(n),v="";l&&(v='\x3cspan id\x3d"'+r+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+l+"\x3c/span\x3e");l="false";r="qs-widget-dropdown-link";g&&(l="true",r+=" qs-widget-dropdown-link-active aok-block aok-nowrap");n='\x3cspan class\x3d"a-declarative" data-action\x3d"'+z+'" data-'+z+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+n+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+t+'" aria-labelledby\x3d"'+k+'" aria-checked\x3d"'+l+
'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"0" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+k+'" class\x3d"'+r+'"\x3e'+w+"\x26nbsp;\x26nbsp;"+v+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}f+=n}return f},isQsWidgetTextInputValid:v,validateQsWidgetTextInput:function(a){var b=t(a),f=b.val();a=v(a,f);var d=b.parent().hasClass(c.getQsWidgetAuiInputTextWrapperClass())?b.parent():b;if(a)return b.val(f.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),d.removeClass("a-form-error"),
d.addClass("a-form-normal"),!0;d.removeClass("a-form-normal");d.addClass("a-form-error");return!1},isUserClickInSummary:function(a){var b=c.getQsWidgetSummaryId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,b.length)==b)return!0;a=a.parentElement}return!1},hideSpinner:B}});"use strict";l.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants").register("QuantitySelectorWidget",function(d,a,c,e){function g(b){a.deactivateWidget(b);var c=a.getQsWidgetButtonContainer(b),
d=a.getQsWidgetDropdownContainer(b),h=a.getQsWidgetDropdownElement(b),f=a.getQsWidgetQuantityContainer(b),q=a.getQsWidgetSummaryAtcButton(b),e=a.getQsWidgetFooterPriceContainer(b),g=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(e,!0);a.setComponentVisibility(g,!0);e=a.getQsWidgetTextInputContainer(b);a.isComponentVisible(e)||a.showComponent(c);a.hideComponent(d);a.hideComponent(h);a.hideComponent(f);a.hideComponent(q);a.resetQsWidgetContainerMinWidthAndHeight(b)}function l(b,
n,p){var h=a.getQsItem(b,n),f=h.quantityText,q=h.quantityTextAbbreviatedSuffix,g=h.quantityTextFullSuffix,k=h.selectedText,h=h.price,u=a.getQsWidgetSummaryPriceSymbolElement(b),r=a.getQsWidgetSummaryPriceWholeElement(b),v=a.getQsWidgetSummaryPriceFractionElement(b),y=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(u,h.currencySymbol);a.setHtml(r,h.wholeValue);a.setHtml(v,h.fractionValue);a.setHtml(y,h.decimalSeparator);u=a.getQsWidgetQuantityElement(b);a.setHtml(u,f);f=a.getQsWidgetQuantitySuffixElement(b);
q&&g?(a.setHtml(f,q),q=a.getQsWidgetInitialViewSuffixElement(b),a.setHtml(q,g)):a.setHtml(f,"");q=a.getQsWidgetFooterPriceSymbolElement(b);f=a.getQsWidgetFooterPriceWholeElement(b);u=a.getQsWidgetFooterPriceFractionElement(b);r=a.getQsWidgetFooterPriceDecimalElement(b);a.setHtml(q,h.currencySymbol);a.setHtml(f,h.wholeValue);a.setHtml(u,h.fractionValue);a.setHtml(r,h.decimalSeparator);g&&(h=a.getQsWidgetFooterQuantitySuffixElement(b),a.setHtml(h,g));a.isInitialViewDropdown(b)&&(a.getQsWidgetButtonAsComponent(b).text(k),
g="Current quantity "+k+". Click to change quantity",a.getQsWidgetButton(b).attr("aria-label",g));c.setSelectedId(b,n);p&&d.trigger(e.getQsWidgetEventTriggerAction(),b)}function k(b,n){var g=a.getQsWidgetTextInputElement(b),h=g.val(),f=a.getQsWidgetButtonContainer(b),q=a.getQsWidgetTextInputContainer(b),k=a.getQsWidgetTextInputUpdateButtonContainer(b),t=a.getQsItemFromQuantityText(b,h);a.hideComponent(k);t?(a.hideComponent(q),a.showComponent(f),l(b,t.id,n)):(a.hideComponent(f),a.showComponent(q),
g.blur(),c.setSelectedQuantity(b,h),n&&d.trigger(e.getQsWidgetEventTriggerAction(),b))}d.on(e.getQsWidgetEventSelectId(),function(b,c,d,e){l(b,c,d);c=a.getQsWidgetButtonContainer(b);d=a.getQsWidgetTextInputContainer(b);b=a.getQsWidgetTextInputUpdateButtonContainer(b);a.hideComponent(b);a.hideComponent(d);a.showComponent(c);e&&e()});d.on(e.getQsWidgetEventSelectQuantity(),function(b,c,d,e){a.getQsWidgetTextInputElement(b).val(c);k(b,d);e&&e()});return{hideAllPopover:function(){for(var b=a.getActivatedQsWidgets(),
c=0;c<b.length;c++)g(b[c])},showPopover:function(b){a.activateWidget(b);a.setQsWidgetContainerMinWidthAndHeight(b);var d=a.getQsWidgetDropdownUnorderedListElement(b),e=a.getQsWidgetButtonContainer(b),h=a.getQsWidgetDropdownContainer(b),f=a.getQsWidgetDropdownElement(b),q=a.getQsWidgetQuantityContainer(b),g=a.getQsWidgetSummaryAtcButton(b);a.setHtml(d,a.generateQsDropdownDOM(b));var d=a.getQsWidgetFooterPriceContainer(b),k=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(d,!1);
a.setComponentVisibility(k,!1);a.showComponent(f);a.hideComponent(q);a.hideComponent(g);a.showComponent(h);a.hideComponent(e);a.popOutDropDownContainer(b);h=c.getQsWidgetConfiguration(b);if(e=h.qsItems)h=h.selectedId,null===h&&(h=e[0].id),a.getQsWidgetDropdownItemElement(b,h).focus()},showConfirmation:function(b){a.activateWidget(b);var c=a.getQsWidgetButtonContainer(b),d=a.getQsWidgetDropdownContainer(b),e=a.getQsWidgetDropdownElement(b),f=a.getQsWidgetQuantityContainer(b);b=a.getQsWidgetSummaryAtcButton(b);
a.hideComponent(e);a.showComponent(f);a.showComponent(b);a.showComponent(d);a.hideComponent(c)},showPrice:function(b,c){c=a.getQsItem(b,c).price;var d=a.getQsWidgetSummaryPriceSymbolElement(b),e=a.getQsWidgetSummaryPriceWholeElement(b),f=a.getQsWidgetSummaryPriceFractionElement(b);b=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(d,c.currencySymbol);a.setHtml(e,c.wholeValue);a.setHtml(f,c.fractionValue);a.setHtml(b,c.decimalSeparator)},selectOption:l,showTextInput:function(b,c){var d=a.getQsWidgetTextInputContainer(b),
e=a.getQsWidgetTextInputUpdateButtonContainer(b),f=a.getQsWidgetButtonContainer(b);a.hideComponent(f);a.showComponent(d);var q=a.getQsWidgetTextInputElement(b);c&&q.val(c);c=q.val();a.isQsWidgetTextInputValid(b,c)&&a.getSelectedQuantity(b)!==c?a.showComponent(e):a.hideComponent(e);setTimeout(function(){q.focus()},200)},validateAndSelectQuantity:k,selectConfirmation:function(b){a.isActionTriggerOnConfirmation(b)&&d.trigger(e.getQsWidgetEventTriggerAction(),b);g(b)}}});"use strict";l.when("A","QuantitySelectorWidget",
"QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata").register("QuantitySelector",function(d,a,c,e,g,l,k,b){function n(a,d){try{var g=c.isMobile(d)}catch(h){h instanceof TypeError&&l.incrementInvalidIdCount();return}try{if(!c.isInitialized(d)||a)eval(b.getMetaConfiguration(d,"script")),e.setInitialized(d),e.saveOriginalSettings(d),c.initializeWidget(d),c.isQsWidgetEnabled(d)?c.enableQsWidget(d):c.disableQsWidget(d),
l.incrementInitializeCount(!0,g)}catch(h){l.incrementInitializeCount(!1,g)}}function p(a){e.loadQsWidgetStateConfiguration(a);n(!0,a)}d.declarative(g.getQsWidgetButtonDecl(),"click",function(b){var d=b.data.qsUID;(b=c.isMobile(d))?a.showBottomSheet(d):a.showPopover(d);l.incrementShowPopup(b);c.isInitialViewDropdown(d)?l.logCsm(d,"cqd"):l.logCsm(d,"ccq");setTimeout(function(){c.saveQsWidgetDropdownTopPosition(d)},250)});d.declarative(g.getQsWidgetDropdownDecl(),"click",function(b){var d=b.data.qsUID;
b=b.data.id;var e=c.isActionTriggerOnSelect(d),g=c.isTextInputRequired(d,b),h=c.isConfirmationViewEnabled(d),k=c.isQsWidgetDropdownScrolled(d);h?k?(c.setQsWidgetDropdownScrolled(d),l.logCsm(d,"dcq_scl")):(c.clearQsWidgetDropdownScrolled(d),l.logCsm(d,"dcq")):k?l.logCsm(d,"dsq_scl"):l.logCsm(d,"dsq");a.selectOption(d,b,e&&!g.result);g.result?a.showTextInput(d,g.initialQuantityText):h&&a.showConfirmation(d)});d.declarative(g.getQsWidgetDropdownItemDecl(),"click",function(b){a.alignQsItem(b.data.qsUID,
b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"focusin",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseenter",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseleave",function(b){b=b.data.qsUID;var c=e.getQsWidgetConfiguration(b).selectedId;a.showPrice(b,c)});d.declarative(g.getQsWidgetQuantityChangelinkDecl(),"click",function(b){b=b.data.qsUID;a.showPopover(b);l.incrementChangeLinkCount();
c.saveQsWidgetDropdownTopPosition(b);l.logCsm(b,"ccl")});d.declarative(g.getQsWidgetSummaryAtcDecl(),"click",function(b){b=b.data.qsUID;a.selectConfirmation(b);c.isQsWidgetDropdownScrolled(b)?l.logCsm(b,"atc_scl"):l.logCsm(b,"atc")});d.declarative(g.getQsWidgetTextInputDecl(),"keydown",function(a){var b=a.data.qsUID,d=a.$event.which;8==d||9==d||13==d||37<=d&&40>=d||46==d||(!(48<=d&&57>=d||96<=d&&105>=d)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||a.$event.metaKey?a.$event.preventDefault():
3<=c.getQsWidgetTextInputElement(b).val().length&&a.$event.preventDefault())});d.declarative(g.getQsWidgetTextInputDecl(),"keyup",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&13==b.$event.keyCode?(b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,b)):a.showTextInput(d)});d.declarative(g.getQsWidgetTextInputDecl(),"focusout",function(b){b=b.data.qsUID;if(""===c.getQsWidgetTextInputElement(b).val()){var d;d=(d=e.getQsWidgetConfiguration(b).selectedId)?c.getQsItem(b,d).selectedText:
c.getSelectedQuantity(b);a.showTextInput(b,d);c.validateQsWidgetTextInput(b)}});d.declarative(g.getQsWidgetTextInputDecl(),"change",function(b){a.showTextInput(b.data.qsUID)});d.declarative(g.getQsWidgetTextInputUpdateButtonDecl(),"click",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&(d=b.data.qsUID,b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,b))});d.$(document).click(function(b){0!=c.getActivatedQsWidgets().length&&(c.isUserClickInSummary(b)||a.hideAllPopover())});
d.$(r).resize(function(){a.hideAllPopover()});d.on(g.getQsWidgetEventInitialize(),function(a,b){k.initialize();if("string"==typeof b)n(a,b);else{b=e.getQsUIDs();for(var c=0;c<b.length;c++)n(a,b[c])}});d.on(g.getQsWidgetEventLoadStatesAndInitialize(),function(){for(var a=e.getQsUIDs(),b=0;b<a.length;b++){var d=a[b];c.isInitialized(d)||p(d)}});d.on(g.getQsWidgetEventConfigureEnable(),function(a){c.enableQsWidget(a)});d.on(g.getQsWidgetEventConfigureDisable(),function(a){c.disableQsWidget(a)});d.on(g.getQsWidgetEventConfigureReset(),
function(a){for(var b=e.getQsUIDs(),c=0;c<b.length;c++){var h=b[c];if("string"!==typeof a||a==h)e.loadOriginalSettings(h),d.trigger(g.getQsWidgetEventInitialize(),!0,h)}});var h=d.now();l.logLatencyMetric("JSReady",h);return{loadStateAndInitializeWidget:p}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("ConsumablesATCActionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,u=p._namespace||p.attributeErrors,a=u?u("QuantitySliderAssets",""):p;a.guardFatal?a.guardFatal(l)(a,window):a.execute(function(){l(a,window)})})(function(l,p,u){l.when("A").register("qs-cart-count-handler",function(a){var d=a.$,f={DEFAULT:function(g,e,b,h,f){a.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:g,clientName:e},success:function(a){a&&a.isOK&&a.total?d.isFunction(h)&&h(a.total.numActiveItem):l.log("Malformed get-cart-count response for sessionId\x3d"+
g,"ERROR",b)},error:function(){l.log("Failed to retrieve get-cart-count response for sessionId\x3d"+g,"ERROR",b);d.isFunction(f)&&f()}})},UFG:function(d,a,b,h,f){}};return{getTotalCartCount:function(a,e){return(d.isFunction(f[e])?f[e]:f.DEFAULT)(a.request.sessionId,a.clientName,a.attribution,a.onSuccess,a.onError)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-utils").register("qs-cart-update-handler",function(a,d,f){function g(a){n||(n="quantity-slider-widget-"+a);return n}function e(a,
h){if(!h.atcFormSubmitDisabled){if((a=a.$target&&a.$target.closest(".qs-atc-form"))&&0!==a.length)return a;l.log("Missing $form object","ERROR",g(h.clientName))}}function b(b,r,f){a.trigger(d.ACTIONS.ADD_TO_CART_SUBMIT_START,{asin:b,cartType:r.cartType,clientName:r.clientName,isQSAction:f,request:r});h(b,r,!0,f)}function h(h,b,e,c){var q=b.cartType,n=JSON.stringify(c?f.getQSRequestObject(b,e,q):f.getATCRequestObject(b,q)),m=f.getAjaxUrl(b,e,q);m&&k.ajax({url:m,type:f.getHttpMethodType(e,q),data:n,
headers:f.getHeadersForRequest(b,e,q),xhrFields:{withCredentials:!0},success:function(m,q,k){m.jqXHR=k;delete t[h];(m=f.adaptResponseObject(m,b,e,b.cartType))?(d.setUpdatedQSParamsForAsin(h,{quantityInCart:m.quantity,cartItemId:m.itemId}),a.trigger(e?d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS:d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,{asin:h,cartType:b.cartType,request:b,response:m,clientName:b.clientName,attribution:g(b.clientName),isQSAction:c,isDecreaseQuantityAction:!e}),d.logUrl(b.loggingUrl)):l.log("Invalid Response from the server",
"ERROR",g(b.clientName))},error:function(m){delete t[h];m=m||{};l.log("Ajax request failed with type: "+(e?"addItems":"modifyItems")+", status code: "+m.status+", error: "+m.responseText,"ERROR",g(b.clientName));a.trigger(d.ACTIONS.QS_CART_SUBMIT_ERROR,{asin:h,cartType:q,clientName:b.clientName,isQSAction:c,isDecreaseQuantityAction:!e,isMaxOrderQuantityReached:b.quantityInCart>=b.maxOrderQuantity,response:m,request:b});e&&b.$form&&b.$form.submit()}})}var k=a.$,n="",t={};a.declarative("qs-add-to-cart-trigger",
"click",function(a){var h=a.data&&a.data.asin,f=d.getQSParamsForAsin(h);a.$event&&a.$event.preventDefault();t[h]||(t[h]=!0,f.isMultipleAsinsSubmitting=1<Object.keys(t).length,f.$form=e(a,f),f.triggeringEvent=a,b(h,f,!1))});a.declarative("qs-slider-widget-trigger","click",function(f){var g=f.data&&f.data.asin,k=d.getQSParamsForAsin(g),c=f.$target[0]&&f.$target[0].className||"",q=a.contains(c,"qs-increase-quantity")||a.contains(c,"qs-decrease-quantity"),c=a.contains(c,"qs-decrease-quantity");f.$event&&
f.$event.preventDefault();q&&!t[g]&&(t[g]=!0,k.isMultipleAsinsSubmitting=1<Object.keys(t).length,k.triggeringEvent=f,c?(a.trigger(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,{asin:g,cartType:k.cartType,clientName:k.clientName,isQSAction:!0,isDecreaseQuantityAction:!0,request:k}),h(g,k,!1,!0)):(k.$form=e(f,k),b(g,k,!0)))});return{setAttribution:function(b){n=b}}});"use strict";l.when("A","qs-fresh-cart-update-utils","ready").register("qs-cart-update-utils",function(a,d){function f(c){var b=c.quantityInCart||
0;return{items:[{asin:c.asinId,offerListingId:c.offerListingId,quantity:b<c.minOrderQuantity?c.minOrderQuantity-b:1}]}}function g(c,b,a){return(e.isFunction(b[a])?b[a]:b.DEFAULT)(c)}var e=a.$,b={DEFAULT:f,UFG:d.getUfgCartRequestObject},h={DEFAULT:f,UFG:d.getUfgCartRequestObject},k={DEFAULT:function(c){var b=c.quantityInCart||0,a;a=c.cartItemId;a=!a||"C"!==a[0]&&"S"!==a[0]?a:a.substring(1);return{items:[{id:a,quantity:b<=c.minOrderQuantity?0:b-1}]}},UFG:d.getUfgCartRequestObject},n={DEFAULT:function(c){return c.ajaxCartUrl},
UFG:function(c){return c.addToCartUrl}},l={DEFAULT:function(c){return c.ajaxCartUrl}},p={DEFAULT:function(c){return(c=c.entity&&c.entity.items&&c.entity.items[0])?{itemId:c.id,quantity:c.quantity,isTotal:!0}:null},UFG:d.ufgCartResponseAdapter},r={DEFAULT:function(c,b){c=(b.quantityInCart||0)-1;return 0>c?null:{itemId:c?b.cartItemId:"",quantity:c,isTotal:!0}},UFG:d.ufgCartResponseAdapter},u={DEFAULT:"POST",UFG:"POST"},c={DEFAULT:"PUT",UFG:"POST"},q={DEFAULT:function(c){return{"x-api-csrf-token":c.csrfToken,
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"'}},UFG:function(c){return{"Content-Type":"application/json"}}},w={DEFAULT:function(c){return{"x-api-csrf-token":c.csrfToken,Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items.request/v1"'}},UFG:function(c){return{"Content-Type":"application/json"}}};
return{getATCRequestObject:function(c,a){return g(c,b,a)},getQSRequestObject:function(c,b,a){return g(c,b?h:k,a)},adaptResponseObject:function(c,b,a,h){a=a?p:r;return(e.isFunction(a[h])?a[h]:a.DEFAULT)(c,b)},getHttpMethodType:function(b,a){b=b?u:c;return b[a]?b[a]:b.DEFAULT},getHeadersForRequest:function(c,b,a){b=b?q:w;return(e.isFunction(b[a])?b[a]:b.DEFAULT)(c)},getAjaxUrl:function(c,b,a){return g(c,b?n:l,a)}}});"use strict";l.when("A","ready").register("qs-fresh-cart-update-utils",function(a){function d(a,
d){return d&&d.items?d.items.find(function(d){return d.ASIN===a}):null}return{getUfgCartRequestObject:function(a){return a.additionalInput},ufgCartResponseAdapter:function(a,g){return(g=d(g.asinId,a.clientResponseModel))?{itemId:g.itemId,quantity:g.quantity,isTotal:!0,rawResponse:a}:{itemId:"invalidItemId",quantity:0,isTotal:!0,rawResponse:a}}}});"use strict";l.when("A","quantity-slider-utils").register("quantity-slider-metrics-handler",function(a,d){function f(a,b){return"QuantitySliderWidget::"+
a+"::"+(b?b+"::":"")}function g(b){var a=p.ue;"undefined"!==typeof a&&a.count(b,1)}function e(a,e){d.assert(a&&e.clientName,"Missing required properties while logging metrics");var n=e.isQSAction?e.isDecreaseQuantityAction?b.QS_DECREASE:b.QS_INCREASE:b.ATC;a=f(e.clientName,e.cartType)+a+"::"+n;g(a)}var b={ATC:"ATC",QS_INCREASE:"QSIncrease",QS_DECREASE:"QSDecrease"};return{logRequestStartMetrics:function(a){e("CountStart",a)},logRequestSuccessMetrics:function(a){e("CountSuccess",a)},logRequestErrorMetrics:function(a){e("CountError",
a)},logMaxQuantityReachedMetric:function(a){a=f(a.clientName,a.cartType)+"MaxQuantityReached";g(a)},logMultipleAsinsSubmittingMetric:function(a){a=f(a.clientName,a.cartType)+"MultipleAsinsSubmitting";g(a)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-handler","quantity-slider-metrics-handler").register("quantity-slider-widget",function(a,d,f,g){function e(c){return"."+c+"-qs-slider-button"}function b(c,a){c=e(c)+" .qs-decrease-quantity";a?d.disableButton(c):d.enableButton(c)}
function h(c,a){c=e(c)+" .qs-increase-quantity";a?d.disableButton(c):d.enableButton(c)}function k(c,a){c="."+c+"-qs-add-to-cart-button .qs-slider-atc-button";a?d.disableButton(c):d.enableButton(c)}function n(c){c.isQSAction&&(c.isDecreaseQuantityAction?d.deselectButton(e(c.asin)+" .qs-decrease-quantity"):d.deselectButton(e(c.asin)+" .qs-increase-quantity"))}function l(c){d.toggleDomNodeVisibility("."+c.asin+"-qs-slider-spinner",!1);var a=c.asin;c.isQSAction?(b(a,!1),h(a,!1)):k(a,!1);n(c);d.assert(c.asin&&
c.request&&c.response&&c.response.quantity!==u,"Required properties missing in payload object for UpdateQSWidget");r(c.asin,c.response.quantity,c.request.maxOrderQuantity);c.request.enableQuantityLimitMessage&&d.toggleDomNodeVisibility("."+c.asin+"-qs-quantity-limit-message",c.response.quantity>=c.request.maxOrderQuantity);d.updateTotalCartCountOnUI(c,c.cartType);g.logRequestSuccessMetrics(c)}function p(a){d.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!0);var e=a.asin;a.isQSAction?(b(e,
!0),h(e,!0)):k(e,!0);g.logRequestStartMetrics(a);a.request&&a.request.isMultipleAsinsSubmitting&&g.logMultipleAsinsSubmittingMetric(a)}function r(a,b,f){var g="."+a+"-qs-add-to-cart-button",k=e(a);0<b?(d.changeATCtoQS(g,k),g=v("."+a+"-qs-qty-present-in-cart"),Number.isInteger(b)&&g.html(b),h(a,b>=f)):(d.changeQStoATC(g,k),h(a,!1))}var v=a.$;Number.isInteger||(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&-9007199254740992<a&&9007199254740992>a&&Math.floor(a)===a});a.on(d.ACTIONS.ADD_TO_CART_SUBMIT_START,
function(a){p(a)});a.on(d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){l(a)},1500);a.response.quantity===a.request.maxOrderQuantity&&g.logMaxQuantityReachedMetric(a)});a.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,function(a){p(a)});a.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){l(a)},1500)});a.on(d.ACTIONS.QS_CART_SUBMIT_ERROR,function(a){d.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!1);if(a.isQSAction&&a.isMaxOrderQuantityReached)b(a.asin,
!1);else{var e=a.asin;a.isQSAction?(b(e,!1),h(e,!1)):k(e,!1)}n(a);g.logRequestErrorMetrics(a)});return{ACTIONS:d.ACTIONS,CART_IDEMPOTENT_REQUEST_DELAY:1500,setAttribution:f.setAttribution,updateQuantitySliderWidget:r}});"use strict";l.when("A","qs-cart-count-handler","a-button").register("quantity-slider-utils",function(a,d,f){function g(a){return e("."+a+"-qs-slider-data").first().data("qs-model")}var e=a.$;return{ACTIONS:{ADD_TO_CART_SUBMIT_START:"quantity-slider:add-to-cart-start",ADD_TO_CART_SUBMIT_SUCCESS:"quantity-slider:add-to-cart-success",
REMOVE_FROM_CART_SUBMIT_START:"quantity-slider:remove-from-cart-start",REMOVE_FROM_CART_SUBMIT_SUCCESS:"quantity-slider:remove-from-cart-success",QS_CART_SUBMIT_ERROR:"quantity-slider:cart-submit-error"},assert:function(a,d){if(!a)throw Error(d);},changeATCtoQS:function(b,d){e(b).hasClass("aok-hidden")||(a.hide(b),a.show(d))},changeQStoATC:function(b,d){e(d).hasClass("aok-hidden")||(a.hide(d),a.show(b))},disableButton:function(a){f(e(a)).disable()},deselectButton:function(a){a=f(e(a));a.isEnabled()&&
a.setStatus("normal")},enableButton:function(a){f(e(a)).enable()},getQSParamsForAsin:g,setUpdatedQSParamsForAsin:function(b,d){var f=g(b);e("."+b+"-qs-slider-data").data(a.extend(f,d))},toggleDomNodeVisibility:function(b,d){d?a.show(b):a.hide(b)},updateTotalCartCountOnUI:function(b,f){b=a.extend({},b);b.onSuccess=function(a){p.$Nav&&p.$Nav.when("api.setCartCount").run(function(b){b(a)});l.when("mash").execute("quantity-slider-mash-update",function(b){b.cart&&e.isFunction(b.cart.didUpdate)&&b.cart.didUpdate({newCartQuantity:a})})};
d.getTotalCartCount(b,f)},logUrl:function(b){b&&a.post(b)}}})});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,r=f._namespace||f.attributeErrors,b=r?r("ALMCartActionAssets",""):f;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,f,r){d.when("A").register("alm-cart-action-query-string-utils",function(b){function c(c,m){var h=e(c),g=a(c);h?m["discoveredAsins.0"]=c.asin:g&&(c=b.filter(c.items,function(a){return e(a)}),c=b.map(c,function(a){return a.asin}),b.each(c,function(a,e){m["discoveredAsins."+e.toString()]=a}));return m}
function a(a){return a&&a.items&&b.$.isArray(a.items)&&0<a.items.length}function e(a){return a&&a.asin&&"string"===typeof a.asin&&""!==a.asin}return{addQueryStringParamsToUrl:function(a,e){var h={};if(e&&e.reftag){var g=e.reftag;"string"===typeof g&&""!==g&&(h.ref_=g)}if(e&&e.queryLogInfoParams){var g=e.queryLogInfoParams,k;for(k in g)g.hasOwnProperty(k)&&"string"===typeof k&&""!==k&&"string"===typeof g[k]&&""!==g[k]&&(h[k]=g[k])}c(e,h);(e=b.$.param(h))&&"string"===typeof e&&""!==e&&(a+="?"+e);return a}}});
"use strict";d.when("A","jQuery").register("afx-add-all-helper",function(b,c){return{updateQuantityForAsin:function(a,e,b){a&&e&&!isNaN(b)&&c("#"+a).closest("form").find("#afx-add-all-"+e+"-quantity").attr("value",b)}}});"use strict";d.when("A","jQuery","a-button").register("fx-atfc-button-utils",function(b,c,a){function e(a){return"atfc-spinner-"+(a.asin?a.asin:a.clientId?a.clientId:"noAsin")}var q=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");b&&b.length&&
(q=!0,a=e(a.data),b.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),c("#"+a).css({width:b.outerWidth()+"px"}),c("#"+a).css({height:b.outerHeight()+"px"}),b.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button");a=e(a.data);a=c("#"+a);b&&b.length&&a&&a.length&&(q=!1,b.css("visibility","visible"),b.unwrap())},shouldDisableButtonClicks:function(){return q}}});"use strict";d.when("fresh-shared-add-to-cart-v2","qs-fresh-shared-add-to-cart").register("fresh-add-to-cart",
function(b,c){function a(a){b.attachCallbacks(a)}b.initialize("desktop");c.initialize("desktop");return{addToFreshCart:function(b){a(b)},attachCallbacks:a,updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}});"use strict";d.when("shared-alm-multi-add-to-cart").register("alm-multi-add-to-cart",function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{multiAddToCart:function(a){c(a)},attachCallbacks:c,attachPreHandler:function(a){b.attachPreHandler(a)}}});
"use strict";d.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,c){return{addToFreshCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});"use strict";d.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(c){var a=
"/fom/add-to-fresh-order";c.reftag!==r&&(a+="/ref\x3d"+c.reftag);c.data!==r&&c.data.csrfToken&&(a+="?csrf\x3d"+encodeURIComponent(c.data.csrfToken));b.post(a,{success:c.success,error:c.error,params:JSON.stringify(c.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}});
"use strict";d.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function c(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var e=c(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:e})},resolve:function(a){var e=c(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:e})},substitute:function(a){a=c(a.data);a.sourceUrl=f.location.pathname+f.location.search;
a=b.$.param(a);f.location.href="/afx/cartconflicts/resolve/substitute?"+a}}});"use strict";d.when("A").register("afx-get-cart-count",function(b){return function(c){b.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:c.sessionID,clientName:"SharedFreshHandler"},success:c.success,error:c.error})}});"use strict";d.when("A","alm-cart-action-query-string-utils").register("alm-multi-add-to-cart-proxy",function(b,c){return{multiAddToCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtocart/multiple",
a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)}}});"use strict";d.register("afx-callbacks-helper",function(b){function c(b){var c=b in a;!c&&d.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,d,m){b=b in a?b:"default";c(b)&&a[b].success&&a[b].success(d,m)},error:function(b,d,m,h){b=b in a?b:"default";c(b)&&a[b].error&&a[b].error(d,
m,h)}}});"use strict";d.register("afx-preHandler-helper",function(b){var c={};return{addPreHandler:function(a){c[a.clientID||"default"]=a},getPreHandler:function(a){return c[a]}}});"use strict";d.register("afx-csm-metrics-utils",function(){var b={},c=function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,e){a=Date.now()-b[a];c(e,a)},setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,
b){f.ue&&f.uet&&a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:c,sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});"use strict";d.register("add-to-cart-common-utils",function(){return{vibrate:function(){return f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}}});"use strict";d.when("A","a-modal").register("fresh-atfc-modal-utils",
function(b,c){return{removeModal:function(){var a=c.get("fresh-add-to-cart-modal");a&&c.remove(a)},showModal:function(a,e,d){e&&(e={name:"fresh-add-to-cart-modal",header:e.header,inlineContent:e.body,footer:e.footer},"desktop"===d&&(e.width=325),c.create(a.$currentTarget,e).show(),b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){c.remove(a.popover)}))}}});"use strict";d.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper",
"fresh-atfc-ewc-helper").register("fresh-atfc-error-modal-utils",function(b,c,a,e,q,f,h){function g(a,c,e,g){d.when("a-modal").execute("showModal",function(d){c||k(a);a.data.quantity&&(f.updateQuantity("fresh-clear-slot-button",a.data.quantity),f.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity));var n={name:"fresh-add-to-cart-error-modal",header:c.header,inlineContent:c.errorMessage,footer:c.footer,data:{event:a,response:g}};"desktop"===e&&(n.width=325);d.create(a.$currentTarget,
n).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){h.refreshCart(a.data.sessionID);d.remove(b.popover)})})}function k(b,e){a.showGenericErrorModal({success:function(a,k,d){a&&(a=c.parseJSON(d.http.response),n(b,a,e))},error:function(){d.log("Failed to get the generic error modal","Error");g(b,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
e)}})}function n(a,b,c){var k=b.errorModalHtml,d=q.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in d&&e.increment(d[b.clientResponseModel.uberCartStatus.errorStatusCode]);g(a,k,c,b)}return{removeModal:function(){d.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:g,showGenericErrorModal:k,parseResponseAndShowErrorModal:n}});"use strict";
d.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",function(b,c,a,e){function q(a){e({sessionID:a,success:function(a){a&&a.isOK&&a.total&&f(a.total.numActiveItem)},error:function(){d.log("Failed to get cart count","Error",a)}})}function f(a){d.when("nav.setCartCount").execute(function(b){b(a)});d.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var h;d.when("EWC").execute("add-to-cart-refresh",
function(a){h=a});d.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){h!==r&&"function"===typeof h.refresh?h.refresh():q(a)}}});"use strict";d.when("A","afx-storeIntroductionSheet-helper","afx-cpi-helper").register("f3-consumables-atc-helper",function(b,c,a){return{handleAddToCart:function(e,d,f){d.storeIntroductionSheetHtml&&d.storeIntroductionSheetHtml.content?c.render(e,d,f):d.renderUFGCartProgressIndicator?a.render(e):b.trigger("fresh-atfc:success","false",{almBrandId:e.brandId})}}});
"use strict";d.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ALM_MULTI_ATC_COUNT:"almMultiAddToCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ALM_MULTI_ATC_COUNT_SUCCESS:"almMultiAddToCartCountSuccess",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ALM_MULTI_ATC_COUNT_ERROR_MODAL:"almMultiAddToCartCountErrorModal",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED:"almMultiAddToCartCountErrorUnexpected",
ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",ATFC_STORE_INTRODUCTION_SHEET:"afxStoreIntroductionSheet",ATFC_OCX_STORE_INTRODUCTION_SHEET:"afxOfferComparisonStoreIntroductionSheet",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",
ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(e){a[e]=
b[e]+":"+c});return a}}});"use strict";d.when("A").register("afx-quantity-helper",function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}});"use strict";d.when("A","afx-csm-metrics-utils","afx-metrics-helper").register("afx-storeIntroductionSheet-helper",function(b,c,a){function e(a,b){var c=b?400:190;d.when("a-sheet").execute(function(e){e.create({inlineContent:a,
closeType:"icon",height:c}).show();f("mobile",b)})}function f(b,e){b=a.getMetricsForDevice(b);e?c.increment(b.ATFC_OCX_STORE_INTRODUCTION_SHEET):c.increment(b.ATFC_STORE_INTRODUCTION_SHEET)}function m(){b.show(b.$("#sis-background"));b.$("body").css({overflow:"hidden"});b.$("#offer-comparison-store-introduction-side-sheet-container").show(function(){g({right:"0px"})});f("desktop",!0)}function h(){var a=b.$("#offer-comparison-store-introduction-side-sheet-container").width()+30;g({right:"-"+a+"px"},
function(){b.$("#offer-comparison-store-introduction-side-sheet-container").remove()});b.$("body").css({overflow:"scroll"});b.hide(b.$("#sis-background"));b.$("#offer-comparison-store-introduction-side-sheet-background-container").remove()}function g(a,c){b.animate(b.$("#offer-comparison-store-introduction-side-sheet-container"),a,300,"ease-out",c)}b.declarative("close-offer-comparison-store-introduction-side-sheet","click",function(a){h()});return{render:function(a,c,d){c=c.storeIntroductionSheetHtml.content;
a=a.additionalParams&&a.additionalParams.shouldRenderSIS;"mobile"===d?e(c,a):"desktop"===d&&(b.$("body").append(c),m())}}});"use strict";d.when("A").register("afx-cpi-helper",function(b){return{render:function(c){b.trigger("consumables-atc:success",{atcAction:{ASIN:c.asin,numberOfItems:c.quantity,operationType:"ADDED"},programDetails:{programType:"UFG",brandId:c.brandId,storeId:c.storeId},requestOverrides:{responseType:"HTML","cart-progress-indicator":{messageType:"topsheet"}}})}}});"use strict";
d.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(e,d,f){!0===e.isSuccess?!0===e.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(f,d,"Failed to call getconflictsummary")},error:a.error})}}});"use strict";d.when("A","afx-atfc-v2-proxy","fx-atfo-proxy",
"fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("fresh-shared-add-to-cart-v2",function(b,c,a,e,f,m,h,g,k,n,x,l,y,t){return{updateQuantity:h.updateQuantity,attachCallbacks:g.addCallbacks,updateAddAllQuantityForAsin:l.updateQuantityForAsin,initialize:function(l){function w(a){return a.isItemSoldByCount?
!JSON.parse(a.isItemSoldByCount):a.pickingStrategy?"bulk"===a.pickingStrategy||"catch"===a.pickingStrategy:!1}function p(a,b,d,k){t.vibrate();a.data.amountInUom===r&&w(a.data)&&(a.data.amountInUom=a.data.quantity,a.data.quantity=1);c.addToFreshCart({data:a.data,success:function(c,k,h){200===h.status&&(f.increment(u.ATFC_SUCCESSFUL_ADD_COUNT),k=u.ATFC_CTCF+":lineItemBucket:"+z(c),f.endWidgetTimer(b,k),x.refreshCart(a.data.sessionID),g.success(a.data.clientID,a,c.clientResponseModel),y.handleAddToCart(a.data,
c,l));n.removeModal();e.showButtonAndRemoveSpinner(a);d&&d()},error:function(c,d,h){var w=u.ATFC_CTCF,m=c.responseText,p;n.removeModal();m&&(p=JSON.parse(m),w=u.ATFC_CTCF+":lineItemBucket:"+z(p.clientResponseModel));400===c.status&&p?(f.increment(u.ATFC_ERROR_MODAL_COUNT),n.parseResponseAndShowErrorModal(a,p,l)):403===c.status?location.reload():(f.increment(u.ATFC_UNEXPECTED_ERROR_COUNT),n.showGenericErrorModal(a,l),g.error(a.data.clientID,a,c,d,h));f.endWidgetTimer(b,w);e.showButtonAndRemoveSpinner(a);
k&&k()}})}function A(a,c){f.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=h.getQuantity(a.$target);p(a,c,function(){location.reload()})},error:function(){d.log("Failed to clear reservation");n.showGenericErrorModal(a,l)}})}function z(a){return a.items&&Math.ceil(a.items.length/5)}var u=m.getMetricsForDevice(l),v=u.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",
function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c={data:a};if(a.tunneledData&&a.tunneledData.$target){var d=a.tunneledData.$target,c=b.$.extend(c,{$target:d,$currentTarget:d,$declarativeTarget:d});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),e.hideButtonAndRenderSpinner(c);p(c,v)});
b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;A(a,v)});b.declarative("fresh-add-to-cart","click",function(a){f.startWidgetTimer(v);f.increment(u.ATFC_COUNT);e.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(e.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=h.getQuantity(a.$target),p(a,v)))});b.declarative("fresh-add-to-cart-alcohol",
"click",function(a){a.$currentTarget.context.disabled=!0;f.startWidgetTimer(v);a.data.quantity=h.getQuantity(a.$target);p(a,v)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;n.removeModal();k.execute({data:a.data,error:function(b,c,e){n.showGenericErrorModal(a,l);g.error(a.data.clientID,a,b,c,e)}})});b.declarative("fresh-add-to-order","click",function(b){e.shouldDisableButtonClicks()||(e.hideButtonAndRenderSpinner(b),t.vibrate(),a.addToFreshOrder({data:b.data,
success:function(a,c,d){200===d.http.status&&g.success(b.data.clientID,b,a.clientResponseModel);e.showButtonAndRemoveSpinner(b)},error:function(c,d,f){n.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),n.parseResponseAndShowErrorModal(b,c,l);else if(401===c.http.status)location.reload();else{var k=a.getFallbackErrorModalHtml();n.showModal(b,k,l);g.error(b.data.clientID,b,c,d,f)}e.showButtonAndRemoveSpinner(b)}}))})}}});"use strict";d.when("A","alm-multi-add-to-cart-proxy","fx-atfc-button-utils",
"afx-csm-metrics-utils","afx-metrics-helper","afx-callbacks-helper","afx-preHandler-helper","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("shared-alm-multi-add-to-cart",function(b,c,a,e,d,f,h,g,k,n,x){return{attachCallbacks:f.addCallbacks,attachPreHandler:h.addPreHandler,initialize:function(l){function y(b,d,h,q){x.vibrate();c.multiAddToCart({data:b.data,success:function(c,d,p){200===p.status&&(e.increment(t.ALM_MULTI_ATC_COUNT_SUCCESS),
k.refreshCart(b.data.sessionID),f.success(b.data.clientId,b,c),n.handleAddToCart(b.data,c,l));g.removeModal();a.showButtonAndRemoveSpinner(b);h&&h()},error:function(c,d,k){a.showButtonAndRemoveSpinner(b);var h;g.removeModal();c.responseText&&(h=JSON.parse(c.responseText));400===c.status&&h?(e.increment(t.ALM_MULTI_ATC_COUNT_ERROR_MODAL),g.parseResponseAndShowErrorModal(b,h,l)):403===c.status?location.reload():(e.increment(t.ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED),g.showGenericErrorModal(b,l));f.error(b.data.clientId,
b,c,d,k);q&&q()}})}var t=d.getMetricsForDevice(l),r=t.ATFC_LATENCY_SCOPE+Date.now();b.declarative("alm-multi-add-to-cart","click",function(b){e.increment(t.ALM_MULTI_ATC_COUNT);var c=h.getPreHandler(b.data.clientId);c&&c.preHandle&&(c=c.preHandle(b))&&(b=c);c=b.$currentTarget.find("input");!b.data.items||1>b.data.items.length||a.shouldDisableButtonClicks()||c.is(":disabled")||(a.hideButtonAndRenderSpinner(b),y(b,r))})}}});d.when("A","f3-consumables-atc-helper","fresh-atfc-ewc-helper","afx-callbacks-helper",
"fresh-atfc-error-modal-utils","add-to-cart-common-utils").register("qs-fresh-shared-add-to-cart",function(b,c,a,e,d,f){return{initialize:function(h){function g(b){var f=b.response.rawResponse,g=f.jqXHR,l=b.request,m=l.triggeringEvent;m.data=l.additionalInput;200===g.status&&(a.refreshCart(l.sessionId),e.success(b.clientName,m,f.clientResponseModel),c.handleAddToCart(m.data,f,h));d.removeModal()}b.on("quantity-slider:add-to-cart-start",function(a){f.vibrate()});b.on("quantity-slider:remove-from-cart-start",
function(a){f.vibrate()});b.on("quantity-slider:remove-from-cart-success",function(a){g(a)});b.on("quantity-slider:add-to-cart-success",function(a){g(a)});b.on("quantity-slider:cart-submit-error",function(a){var b=a.request.triggeringEvent,c=a.response,f=c.responseText,g;d.removeModal();f&&(g=JSON.parse(f));b.data=a.request.additionalInput;400===c.status&&g?d.showModal(b,g.errorModalHtml,h):403===c.status?location.reload():(d.showGenericErrorModal(b,h),e.error(a.clientName,b,c,"error",c.statusText))})}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,c=m?m("APEAdaptiveSkyscraperWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,m){"use strict";e.when("Rush","s-web-application-controller","ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-execute","ape-adaptive-skyscraper-metrics","s-skyscraper-slot","af").execute("ape-adaptive-skyscraper",function(c,f,e,u,B){function v(){try{u.execute()}catch(b){B.incrementMetric(e.METRIC_ERROR)}}
c.on(f.ACTIONS.LOAD_SEARCH_PAGE_COMPLETE,function(){setTimeout(v,e.PAGINATION_EXECUTE_TIMEOUT)});v()});"use strict";e.register("ape-adaptive-skyscraper-constants",function(){return{RESEND_ACTIVATE_EVENT_TIMEOUT:600,PAGINATION_EXECUTE_TIMEOUT:600,METRIC_DONE:"adplacements:adaptive-skyscraper:done",METRIC_ERROR:"adplacements:adaptive-skyscraper:error",METRIC_NO_ADAP_SKYS:"adplacements:adaptive-skyscraper:no-adaptive-skyscrapers",METRIC_NO_BLOCKING:"adplacements:adaptive-skyscraper:no-blocking-elements",
METRIC_NO_SPACE:"adplacements:adaptive-skyscraper:no-space"}});"use strict";e.when("ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-metrics","A").register("ape-adaptive-skyscraper-execute",function(c,e,m){function u(e){function f(){var b=e.querySelector("iframe");b&&b.contentWindow&&b.contentWindow.postMessage&&m.$.isFunction(b.contentWindow.postMessage)&&b.contentWindow.postMessage(JSON.stringify({action:"TRIGGER",eventName:"adaptiveSkyReady"}),"*")}f();setTimeout(f,c.RESEND_ACTIVATE_EVENT_TIMEOUT)}
return{execute:function(){function m(){function a(a){a=q[String(a)].querySelector("div");a.style.display="none";a.style.marginTop=""}function d(a,d){a=q[String(a)].querySelector("div");a.style.display="block";a.style.marginTop=String(d)+"px"}var h,l;h=1;for(l=0;h<n&&l<r.length;h++)"active"!==t[h]?a(h):(d(h,r[l]),l++);for(;h<n;h++)a(h)}function v(a){var d;if(a.data){try{d=JSON.parse(a.data)}catch(h){d={}}d&&d.frameId&&d.action&&"COLLAPSE"===d.action&&(a=x[d.frameId],"number"===typeof a&&0!==a&&(t[a]=
"inactive",m()))}}var b,q={},y,r=[],z,x={},n=0,A=f.innerHeight,w=[],t={};b={tops:[],bottoms:[]};b=function(){var a={},d,h,l,p={},b=0,g={},k=document.getElementsByClassName("slot\x3dSKYSCRAPER template\x3dSAFE_FRAME");0>=k.length&&(k=document.getElementsByClassName("slot\x3dLEFT template\x3dSAFE_FRAME"));for(l=0;l<k.length;l++)d=k[l].children[0],h=d.getElementsByTagName("iframe")[0].getAttribute("data-frame-id"),a[b]=d,p[h]=b,g[b]="active",b++;return{cachedFrameContainers:a,numByFrameId:p,numSkyscrapers:b,
skyscraperStates:g}}();q=b.cachedFrameContainers;x=b.numByFrameId;n=b.numSkyscrapers;t=b.skyscraperStates;1>=n?function(a,d){e.incrementMetric(c.METRIC_NO_ADAP_SKYS);d&&u(a["0"])}(q,1===n):(z=Math.ceil(q["0"].offsetTop+619+A),y=function(){var a=document.getElementsByClassName("s-result-list");if(0>=a.length)return 0;a=a[a.length-1];return Math.ceil(a.offsetTop+a.offsetHeight)}(),b=document.getElementsByClassName?document.getElementsByClassName("AdHolder"):document.querySelector(".AdHolder"),(!b||
b.length&&0>=b.length)&&e.incrementMetric(c.METRIC_NO_BLOCKING),b=function(a,d,h){var b=[h],p=[d],e={},g={},k,c,f;if(0>=a.length)return{tops:b,bottoms:p};for(k=0;k<a.length;k++)c=Math.floor(a[k].offsetTop),f=Math.ceil(c+a[k].offsetHeight),c>d&&c<h&&!e[c]&&(b.push(c),e[c]=!0),f>=d&&f<h&&!g[f]&&(p.push(f),g[f]=!0);[b,p].forEach(function(a){a.sort(function(a,d){return a-d})});return{tops:b,bottoms:p}}(b,z,y),w=function(a,d){for(var h=[],b=0,c=0,f=0,g=a.length+d.length,k,e;f<g&&c<d.length&&b<a.length;)f++,
k=d[c],e=a[b],k>=e?b++:c<d.length-2&&d[c+1]<e?c++:619>e-k?c++:(h.push([k,e]),c++,b++);return w=h}(b.tops,b.bottoms),r=function(a,d,b,c){var e=[];d=d.reverse();var f=1;a=Number(a.offsetTop);var g,k;if(0>=d.length)return e;for(g=d.pop();f<b&&g;)g[0]<a&&(g[0]=a),g[0]>g[1]||619>g[1]-g[0]?((k=d.pop())&&g[0]>k[0]&&(k[0]=g[0]),g=k):(e.push(g[0]-a-619),f++,a=g[0],g[0]+=619+c);return e}(q["0"],w,n,A),function(a,d){var b;if(!(a.length>=d||(a=d-a.length-1,0>=a)))for(b=0;b<a;b++)t[d-b-1]="inactive"}(r,n),0>=
r.length&&e.incrementMetric(c.METRIC_NO_SPACE),function(a,b,c,e){function f(a){return function(b){try{a(b)}catch(d){}}}a.addEventListener?a.addEventListener(b,f(c),!0===e):a.attachEvent&&a.attachEvent("on"+b,f(c))}(f,"message",v),m(),function(a,b){var c;for(c=0;c<a;c++)"active"===b[c]&&u(q[String(c)])}(n,t),e.incrementMetric(c.METRIC_DONE))}}});"use strict";e.register("ape-adaptive-skyscraper-metrics",function(){return{incrementMetric:function(c){f.ue&&f.ue.count&&c&&f.ue.count(c,(f.ue.count(c)||
0)+1)}}})});
/* ******** */
(function(q){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,f=n?n("SponsoredBrandsVideoAssets",""):l;f.guardFatal?f.guardFatal(q)(f,window):f.execute(function(){q(f,window)})})(function(q,l,n){q.when("A","rush-framework","sbv-single-product","sbv-slideshow-product-mixin").register("sbv-slideshow-single-product",function(f,k,c,g){var e=function(){this.attribution=this.name="sbv-slideshow-single-product"};f.mixin(e.prototype,g);var d=new e;k.registerComponent(d.name,d.attribution,
function(e){var b=f.$(e.elem()),a=b.find(".sbv-product:first"),a=0===a.length?b.children().get(-1):a.get(0);d.setup(b,a,e,c)})});"use strict";q.when("A","rush-framework","sbv-video-single-mixin","sbv-single-product","sbv-store-ingress").register("sbv-video-single-product",function(f,k,c,g,e){var d=function(){this.attribution=this.name="sbv-video-single-product"};f.mixin(d.prototype,c);var t=new d;k.registerComponent(t.name,t.attribution,function(d){var a=f.$(d.elem()),h=a.find(".sbv-product:first").get(0),
c=a.find(".sbv-store-ingress:first").get(0);t.setup(a,h,c,d,g,e)})});"use strict";q.when("A","rush-framework","sbv-single-link","sbv-video-single-mixin").register("sbv-video-single-link",function(f,k,c,g){var e=function(){this.attribution=this.name="sbv-video-single-link"};f.mixin(e.prototype,g);var d=new e;k.registerComponent(d.name,d.attribution,function(e){var b=f.$(e.elem()),a=b.find(".sbv-link:first").get(0);d.setup(b,a,null,e,c,null)})});q.when("A","sbv-video","sbv-metrics-manager","sbv-automated-test-metrics-client",
"sbv-platform-compatibility","sbv-latency-event-handler").register("sbv-video-single-mixin",function(f,k,c,g,e){return{setup:function(d,g,b,a,h,C){var w=d.find(".sbv-video:first");e.setAppVersion(a.prop("appVersion"));var r=c.builder().withMetricsIdentifier(a.prop("metricsIdentifier")).withSlotId(a.prop("slotId")).withWidgetIndex(a.prop("widgetIndex")).withDeviceEnv(a.prop("deviceEnv")||"").withDeviceOs(a.prop("deviceOs")||"").withDeviceType(a.prop("deviceType")||"").withDevicePlatformVersion(a.prop("devicePlatformVersion")||
"").withDeviceModel(a.prop("deviceModel")||"").withDeviceMake(a.prop("deviceMake")||"").withAppVersion(a.prop("appVersion")||"").withStage(a.prop("stage")).withClientId(a.prop("clientId")).withWeblabs(a.prop("weblabs")).withLanguage(a.prop("language")).withVideoPreviewImageSrc(a.prop("videoPreviewImageSrc")).withVideoSrc(a.prop("videoSrc")).withHasAudio("true"===a.prop("hasAudio")).withStoreName(a.prop("storeName")||"").withStoreUrl(a.prop("storeUrl")||"").withStoreCta(a.prop("storeCta")||"").withMarketplaceId(a.prop("marketplaceId")).withWidgetType(a.prop("widgetType")).withWidgetGroupId(a.prop("widgetGroupId")).withPageType(a.prop("pageType")).withPageNumber(a.prop("pageNumber")).withSushiSourceGroupEndpoint(a.prop("sushiSourceGroupEndpoint")).build();
d.hasClass("aok-hidden")&&(d.hasClass("sbv-abd")||d.hasClass("sbv-domain-check"))?r.reportAdRenderSuppressed():(r.reportAceVideoResponseReceived(),d=d.hasClass("sbv-domain-check")&&d.data("sbv-domain-verification")?k.initialize(w.get(0),r,d.data("sbv-domain-verification")):k.initialize(w.get(0),r),h.initialize(g,r,d),C&&b&&C.initialize(b,r,d),a.prop("trackingPixelUrl")&&f.$.ajax({url:a.prop("trackingPixelUrl"),type:"GET",crossDomain:!0}))}}});q.when("base-mixin","sbv-slideshow").register("sbv-slideshow-product-mixin",
function(f,k){return{setup:function(c,g,e,d){var t=c.find(".sbv-slideshow-view-container:first").get(0);c=f.setup(c,e).build();c.reportSlideshowWidgetResponseReceived();t=k.initialize(t,c);d.initialize(g,c,t)}}});q.when("A","3p-promise").register("sbv-adblock-detector",function(f,k){var c={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}};return{timeoutPromise:function(g){return new k(function(e,d){var c=setTimeout(function(){clearTimeout(c);e()},g)})},fetchWrapper:function(g,e,
d){d=this.timeoutPromise(d);g=l.fetch(g,e);return k.race([g,d])},init:function(){if(f.$(".sbv-video-single-product").find(".sbv-compliant-abd").length)return this.fetchWrapper("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_\x3d1607460946161",c,2E3)}}});q.when("af","ready").register("sbv-latency-event-handler");q.when("A").register("sbv-single-link",function(f){function k(){this.init=function(c,g,e){f.$(c).find("a").click(function(){g.reportLinkClicked(e&&e.getVideoCurrentTimeMs())});
f.$(c).find(".sbv-link-cta-container").click(function(){g.reportCallToActionClicked(e&&e.getVideoCurrentTimeMs())});f.$(c).find(".sbv-link-img-container").click(function(){g.reportImageClicked(e&&e.getVideoCurrentTimeMs())});f.$(c).find(".sbv-link-headline").click(function(){g.reportHeadlineClicked(e&&e.getVideoCurrentTimeMs())})}}return{initialize:function(c,g,e){(new k).init(c,g,e)}}});"use strict";q.when("A","sbv-sushi-client").register("sbv-metrics-manager",function(f,k){function c(b){function a(a){var h=
f.$.extend({},r);h[d.EVENT_TYPE]=a;h[d.METRICS_SEQUENCE_NUMBER]=g++;h[d.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return h}function h(a,h){c&&c.processEvent(a,t);x&&x.processEvent(a)}var g=0,c=k.newClient(l,b,"AceVisClientMetrics"),r=null,x=null;this.setSushiClient=function(a){c=a};this.setDefaultEventAttributes=function(a){r=f.$.extend({},a);r[d.USER_AGENT]=navigator.userAgent};this.setAutomatedTestMetricsClient=function(a){x=a};this.reportAceVideoResponseReceived=
function(){var d=a(e.ACE_VIDEO_RESPONSE_RECEIVED);h(d)};this.reportAdBlockDetected=function(){var d=a(e.AD_BLOCK_DETECTED);h(d)};this.reportAdRenderSuppressed=function(){var d=a(e.AD_RENDER_SUPPRESSED);h(d)};this.reportSlideshowWidgetResponseReceived=function(){var d=a(e.SLIDESHOW_WIDGET_RESPONSE_RECEIVED);h(d)};this.reportSlideshowClicked=function(b,m){var c=a(e.SLIDESHOW_CLICKED);c[d.SLIDESHOW_TOTAL_SLIDES]=b;c[d.SLIDESHOW_CURRENT_INDEX]=m;h(c)};this.reportSlideshowSwiped=function(b){var m=a(e.SLIDESHOW_SWIPED);
m[d.SLIDESHOW_TOTAL_SLIDES]=b;h(m)};this.reportSlideshowOnScreen=function(b){var m=a(e.SLIDESHOW_ON_SCREEN);m[d.SLIDESHOW_TOTAL_SLIDES]=b;h(m)};this.reportSlideshowOffScreen=function(b,m){var c=a(e.SLIDESHOW_OFF_SCREEN);c[d.SLIDESHOW_TOTAL_SLIDES]=b;c[d.TIME_ON_SCREEN_MS]=m;h(c)};this.reportSlideshowLoop=function(b,m){var c=a(e.SLIDESHOW_LOOP);c[d.SLIDESHOW_TOTAL_SLIDES]=b;c[d.SLIDESHOW_LOOP_COUNT]=m;h(c)};this.reportSlideshowLoadFailed=function(b,m){var c=a(e.SLIDESHOW_LOAD_FAILED);c[d.SLIDESHOW_TOTAL_SLIDES]=
b;c[d.SLIDESHOW_LOAD_ERROR]=m;h(c)};this.reportSlideshowLoadCompleted=function(b){var m=a(e.SLIDESHOW_LOAD_COMPLETED);m[d.SLIDESHOW_TOTAL_SLIDES]=b;h(m)};this.reportAdFeedbackLoadFailed=function(b){var m=a(e.AD_FEEDBACK_LOAD_FAILED);m[d.STATUS_CODE]=b;h(m)};this.reportAdFeedbackLoadSucceeded=function(b){var m=a(e.AD_FEEDBACK_LOAD_SUCCEEDED);m[d.STATUS_CODE]=b;h(m)};this.reportAdFeedbackPopoverOpened=function(){var b=a(e.AD_FEEDBACK_POPOVER_OPENED);h(b)};this.reportPreviewImageLoadSuccess=function(b,
m){var c=a(e.PREVIEW_IMAGE_LOAD_SUCCESS);c[d.LOAD_TIME_MS]=b;c[d.RETRY_COUNT]=m;h(c)};this.reportPreviewImageLoadFailure=function(b,m){var c=a(e.PREVIEW_IMAGE_LOAD_FAILURE);c[d.LOAD_TIME_MS]=b;c[d.STATUS_CODE]=m;h(c)};this.reportVideoReadyForPlayback=function(b,m,c,g){var f=a(e.VIDEO_READY_FOR_PLAYBACK);f[d.LOAD_TIME_MS]=b;f[d.RETRY_COUNT]=m;f[d.PERCENT_DOWNLOADED]=c;f[d.VIDEO_TOTAL_LENGTH_MS]=g;h(f)};this.reportVideoPlaybackInitiated=function(b){var c=a(e.VIDEO_PLAYBACK_INITIATED);c[d.VIDEO_CURRENT_TIME_MS]=
b;h(c)};this.reportVideoPlaybackStarted=function(b,c,g){var f=a(e.VIDEO_PLAYBACK_STARTED);f[d.VIDEO_CURRENT_TIME_MS]=b;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=g;h(f)};this.reportTimeToFirstFrame=function(b,c,g){var f=a(e.TIME_TO_FIRST_FRAME);f[d.LOAD_TIME_MS]=b;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=g;h(f)};this.reportVideoBufferingStarted=function(b,c,g){var f=a(e.VIDEO_BUFFERING_STARTED);f[d.VIDEO_CURRENT_TIME_MS]=b;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=g;h(f)};this.reportVideoBufferingEnded=
function(b,c,g){var f=a(e.VIDEO_BUFFERING_ENDED);f[d.VIDEO_CURRENT_TIME_MS]=b;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=g;h(f)};this.reportVideoPlaybackFailure=function(b,c,f){var g=a(e.VIDEO_PLAYBACK_FAILURE);g[d.VIDEO_CURRENT_TIME_MS]=b;g[d.ERROR_MESSAGE]=c;g[d.ERROR_CODE]=f;h(g)};this.reportVideoDurationPlayed=function(b,c,g){var f=a(e.VIDEO_DURATION_PLAYED);f[d.VIDEO_BOUNDRY_CROSSED_TIME_MS]=b;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=g;h(f)};this.reportPlaybackCompleted=function(b,c){var f=
a(e.PLAYBACK_COMPLETED);f[d.VIDEO_CURRENT_TIME_MS]=b;f[d.DROPPED_FRAMES]=c;h(f)};this.reportVideoOnScreen=function(b){var c=a(e.VIDEO_ON_SCREEN);c[d.PERCENT_DOWNLOADED]=b;h(c)};this.reportVideoOffScreen=function(b,c,f){var g=a(e.VIDEO_OFF_SCREEN);g[d.TIME_ON_SCREEN_MS]=b;g[d.WAS_BUFFERING]=c;g[d.VIDEO_CURRENT_TIME_MS]=f;h(g)};this.reportVideoView=function(b,f){var g=a(e.VIDEO_VIEW);g[d.CONTINUOUS_PLAYBACK_DURATION_MS]=b;h(g);f&&c&&c.flush(c,!0)};this.reportVideoPauseInitiated=function(b){var c=a(e.VIDEO_PAUSED_INITIATED);
c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportVideoPaused=function(b,c,f){var g=a(e.VIDEO_PAUSED);g[d.VIDEO_CURRENT_TIME_MS]=b;g[d.PERCENT_DOWNLOADED]=c;g[d.DROPPED_FRAMES]=f;h(g)};this.reportVideoSoundOn=function(b,c){var g=a(e.VIDEO_SOUND_ON);g[d.VIDEO_CURRENT_TIME_MS]=b;g[d.SOUND_TOGGLE_METHOD]=c;h(g)};this.reportVideoSoundOff=function(b,c){var g=a(e.VIDEO_SOUND_OFF);g[d.VIDEO_CURRENT_TIME_MS]=b;g[d.SOUND_TOGGLE_METHOD]=c;h(g)};this.reportVideoClicked=function(b){var c=a(e.VIDEO_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=
b;h(c)};this.reportProductClicked=function(b){var c=a(e.PRODUCT_CLICKED);b!==n&&(c[d.VIDEO_CURRENT_TIME_MS]=b);h(c)};this.reportProductTitleClicked=function(){var b=a(e.PRODUCT_TITLE_CLICKED);h(b)};this.reportProductReviewCountClicked=function(){var b=a(e.PRODUCT_REVIEW_COUNT_CLICKED);h(b)};this.reportProductPriceClicked=function(){var b=a(e.PRODUCT_PRICE_CLICKED);h(b)};this.reportLinkClicked=function(b){var c=a(e.LINK_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportCallToActionClicked=function(b){var c=
a(e.CALL_TO_ACTION_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportHeadlineClicked=function(b){var c=a(e.HEADLINE_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportImageClicked=function(b){var c=a(e.IMAGE_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportStoreIngressClicked=function(b){var c=a(e.STORE_INGRESS_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportBlankScreenLoadFailure=function(){var b=a(e.BLANK_SCREEN_LOAD_FAILURE);h(b)};this.reportPlaybackFailedToStartAfterPlay=
function(){var b=a(e.PLAYBACK_FAILED_TO_START_AFTER_PLAY);h(b)};this.reportAudioToggleIconDisplayed=function(){var b=a(e.AUDIO_TOGGLE_ICON_DISPLAYED);h(b)};this.reportPlayButtonShown=function(){var b=a(e.PLAY_BUTTON_SHOWN);h(b)};this.reportPlayButtonClicked=function(b){var c=a(e.PLAY_BUTTON_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportDurationTickerDisplayed=function(b){var c=a(e.VIDEO_DURATION_TICKER_SHOWN);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportVideoAborted=function(b){var c=a(e.VIDEO_ABORTED);
c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportVideoSuspended=function(b){var c=a(e.VIDEO_SUSPENDED);c[d.VIDEO_CURRENT_TIME_MS]=b;h(c)};this.reportVideoPlayPromiseRejected=function(b){var c=a(e.VIDEO_PLAY_PROMISE_REJECTED);c[d.ERROR_MESSAGE]=b;h(c)};this.reportVideoPlayPromiseNotSupported=function(){var b=a(e.VIDEO_PLAY_PROMISE_NOT_SUPPORTED);h(b)};this.reportDebugInfoCopiedSuccess=function(b){var c=a(e.DEBUG_INFO_COPIED_SUCCESS);c[d.DEBUG_INFO_CONTENT]=b;h(c)};this.reportDebugInfoCopiedFailure=function(b){var c=
a(e.DEBUG_INFO_COPIED_FAILURE);c[d.ERROR_MESSAGE]=b;h(c)};this.reportDebugInfoCopiedMessageShown=function(){var b=a(e.DEBUG_INFO_COPIED_MESSAGE_SHOWN);h(b)};this.reportDebugInfoCopiedMessageHidden=function(){var b=a(e.DEBUG_INFO_COPIED_MESSAGE_HIDDEN);h(b)};this.getDebugMetricAttributes=function(){var a=r[d.METRICS_IDENTIFIER],h=r[d.CLIENT_ID],c;a:{if(b&&(c=b.split("-")[1])){c=c.split(".")[0].toUpperCase();break a}c="UNKNOWN"}return{metricsIdentifier:a,clientId:h,region:c,stage:r[d.STAGE]}}}function g(){function b(){var b=
[];b[d.METRICS_IDENTIFIER]=a;b[d.WIDGET_INDEX]=e;b[d.DEVICE_ENV]=g;b[d.DEVICE_OS]=f;b[d.DEVICE_TYPE]=t;b[d.DEVICE_PLATFORM_VERSION]=k;b[d.DEVICE_MODEL]=m;b[d.DEVICE_MAKE]=p;b[d.APP_VERSION]=l;b[d.STAGE]=y;b[d.SLOT_ID]=h;b[d.CLIENT_ID]=D;b[d.WEBLABS]=E;b[d.LANGUAGE]=q;b[d.VIDEO_PREVIEW_IMAGE_SRC]=F;b[d.VIDEO_SRC]=G;b[d.HAS_AUDIO]=H;b[d.STORE_NAME]=I;b[d.STORE_URL]=J;b[d.STORE_CTA]=K;b[d.MARKETPLACE_ID]=L;b[d.WIDGET_TYPE]=M;b[d.WIDGET_GROUP_ID]=N;b[d.PAGE_TYPE]=O;b[d.PAGE_NUMBER]=A;return b}var a=n,
h=n,e=n,g=n,f=n,t=n,k=n,m=n,p=n,l=n,y=n,D=n,E=n,q=n,F=n,G=n,H=n,I=n,J=n,K=n,L=n,P="https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",B=n,M=n,N=n,O=n,A=n,z=n;this.withMetricsIdentifier=function(b){a=b;return this};this.withSlotId=function(a){h=a;return this};this.withWidgetIndex=function(a){e=a;return this};this.withDeviceEnv=function(a){g=a;return this};this.withDeviceOs=function(a){f=a;return this};this.withDeviceType=function(a){t=a;return this};this.withDevicePlatformVersion=
function(a){k=a;return this};this.withDeviceModel=function(a){m=a;return this};this.withDeviceMake=function(a){p=a;return this};this.withAppVersion=function(a){l=a;return this};this.withStage=function(a){y=a;return this};this.withClientId=function(a){D=a;return this};this.withWeblabs=function(a){E=a;return this};this.withLanguage=function(a){q=a;return this};this.withVideoPreviewImageSrc=function(a){F=a;return this};this.withVideoSrc=function(a){G=a;return this};this.withHasAudio=function(a){H=a;
return this};this.withStoreName=function(a){I=a;return this};this.withStoreUrl=function(a){J=a;return this};this.withStoreCta=function(a){K=a;return this};this.withMarketplaceId=function(a){L=a;return this};this.withSushiSourceGroupEndpoint=function(a){P=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events";return this};this.withAutomatedTestMetricsClient=function(a){B=a;return this};this.withWidgetType=function(a){M=a;return this};this.withWidgetGroupId=function(a){N=a;
return this};this.withPageType=function(a){O=a;return this};this.withPageNumber=function(a){if(a){var b=parseInt(a,10);if(!isNaN(b))return A=b,this}A=a;return this};this.build=function(){z=new c(P);B!==n&&z.setAutomatedTestMetricsClient(B);z.setDefaultEventAttributes(b());return z}}var e={ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",AD_BLOCK_DETECTED:"AdBlockDetected",AD_RENDER_SUPPRESSED:"AdRenderSuppressed",AUDIO_TOGGLE_ICON_DISPLAYED:"AudioToggleIconDisplayed",BLANK_SCREEN_LOAD_FAILURE:"BlankScreenLoadFailure",
CALL_TO_ACTION_CLICKED:"CallToActionClicked",AD_FEEDBACK_LOAD_FAILED:"AdFeedbackLoadFailed",AD_FEEDBACK_LOAD_SUCCEEDED:"AdFeedbackLoadSucceeded",AD_FEEDBACK_POPOVER_OPENED:"AdFeedbackPopoverOpened",DEBUG_INFO_COPIED_SUCCESS:"DebugInfoCopiedSuccess",DEBUG_INFO_COPIED_FAILURE:"DebugInfoCopiedFailure",DEBUG_INFO_COPIED_MESSAGE_SHOWN:"DebugInfoCopiedMessageShown",DEBUG_INFO_COPIED_MESSAGE_HIDDEN:"DebugInfoCopiedMessageHidden",HEADLINE_CLICKED:"HeadlineClicked",IMAGE_CLICKED:"ImageClicked",LINK_CLICKED:"LinkClicked",
NO_VIDEO_SRC_ON_ELEMENT:"NoVideoSrcOnElement",PLAY_BUTTON_CLICKED:"PlayButtonClicked",PLAY_BUTTON_SHOWN:"PlayButtonShown",PLAYBACK_COMPLETED:"PlaybackCompleted",PREVIEW_IMAGE_LOAD_FAILURE:"PreviewImageLoadFailure",PREVIEW_IMAGE_LOAD_SUCCESS:"PreviewImageLoadSuccess",PRODUCT_CLICKED:"ProductClicked",PRODUCT_TITLE_CLICKED:"ProductTitleClicked",PRODUCT_REVIEW_COUNT_CLICKED:"ProductReviewCountClicked",PRODUCT_PRICE_CLICKED:"ProductPriceClicked",STORE_INGRESS_CLICKED:"StoreIngressClicked",TIME_TO_FIRST_FRAME:"TimeToFirstFrame",
VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",VIDEO_CLICKED:"VideoClicked",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_DURATION_TICKER_SHOWN:"VideoDurationTickerShown",VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_INITIATED:"VideoPausedInitiated",VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",
VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",VIDEO_SOUND_OFF:"VideoSoundOff",VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_VIEW:"VideoView",PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_ABORTED:"VideoAborted",VIDEO_SUSPENDED:"VideoSuspended",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected",VIDEO_PLAY_PROMISE_NOT_SUPPORTED:"VideoPlayPromiseNotSupported",SLIDESHOW_WIDGET_RESPONSE_RECEIVED:"SlideshowWidgetResponseReceived",SLIDESHOW_CLICKED:"SlideshowClicked",SLIDESHOW_SWIPED:"SlideshowSwiped",
SLIDESHOW_ON_SCREEN:"SlideshowOnScreen",SLIDESHOW_OFF_SCREEN:"SlideshowOffScreen",SLIDESHOW_LOOP:"SlideshowLoop",SLIDESHOW_LOAD_COMPLETED:"SlideshowLoadCompleted",SLIDESHOW_LOAD_FAILED:"SlideshowLoadFailed",SLIDESHOW_IMAGE_LOAD_ERROR:"SlideshowImageLoadError",SLIDESHOW_IMAGE_LOAD_SUCCESS:"SlideshowImageLoadSuccess"},d={APP_VERSION:"appVersion",CLIENT_ID:"clientId",CONTINUOUS_PLAYBACK_DURATION_MS:"continuousPlaybackDurationMs",DEVICE_MAKE:"deviceMake",DEVICE_MODEL:"deviceModel",DEVICE_ENV:"deviceEnv",
DEVICE_OS:"deviceOs",DEVICE_TYPE:"deviceType",DEVICE_PLATFORM_VERSION:"devicePlatformVersion",DEBUG_INFO_CONTENT:"debugInfoContent",DROPPED_FRAMES:"droppedFrames",ERROR_MESSAGE:"errorMessage",ERROR_CODE:"errorCode",EVENT_TYPE:"eventType",HAS_AUDIO:"hasAudio",LOAD_TIME_MS:"loadTimeMs",MARKETPLACE_ID:"marketplaceId",METRICS_SEQUENCE_NUMBER:"metricsSequenceNumber",METRICS_IDENTIFIER:"metricsIdentifier",NETWORK_TYPE:"networkType",PAGE_TYPE:"pageType",PAGE_NUMBER:"pageNumber",PERCENT_DOWNLOADED:"percentDownloaded",
RETRY_COUNT:"retryCount",LANGUAGE:"language",SLOT_ID:"slotId",SOUND_TOGGLE_METHOD:"soundToggleMethod",STAGE:"stage",STATUS_CODE:"statusCode",STORE_CTA:"storeCta",STORE_NAME:"storeName",STORE_URL:"storeUrl",TIME_ON_SCREEN_MS:"timeOnScreenMs",USER_AGENT:"userAgent",VIDEO_BOUNDRY_CROSSED_TIME_MS:"videoBoundaryCrossedTimeMs",VIDEO_CURRENT_TIME_MS:"videoCurrentTimeMs",VIDEO_SRC:"videoSrc",VIDEO_PREVIEW_IMAGE_SRC:"videoPreviewImageSrc",VIDEO_TOTAL_LENGTH_MS:"videoTotalLengthMs",WAS_BUFFERING:"wasBuffering",
WIDGET_INDEX:"widgetIndex",WEBLABS:"weblabs",WIDGET_TYPE:"widgetType",WIDGET_GROUP_ID:"widgetGroupId",SLIDESHOW_LOOP_COUNT:"slideshowLoopCount",SLIDESHOW_CURRENT_INDEX:"slideshowCurrentIndex",SLIDESHOW_TOTAL_SLIDES:"slideshowTotalSlides"},t={n:1};return{EVENT_TYPES:e,SOUND_TOGGLE_OFF_CAUSE:{ICON_TAP:"IconTap",VIDEO_OFF_SCREEN:"VideoOffScreen"},SOUND_TOGGLE_ON_CAUSE:{ICON_TAP:"IconTap"},DEFAULT_SUSHI_SOURCE_GROUP_ENDPOINT:"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",
builder:function(){return new g}}});q.register("sbv-transportation-client",function(){var f=function(){},k=function(){function c(){if(l.XDomainRequest){var e=new l.XDomainRequest;e.onerror=f;e.ontimeout=f;e.onprogress=f;e.onload=f;e.timeout=0;return e}if(l.XMLHttpRequest){e=new l.XMLHttpRequest;if(!("withCredentials"in e))throw"";return e}return null}return{send:function(e,d){if(d&&e){var f=c();if(!f)throw"";f.open("POST",e,!0);f.setRequestHeader&&f.setRequestHeader("Content-type","text/plain");f.send(d)}},
isSupported:!0}}(),c=function(){return{send:function(c,e){if(c&&e&&!l.navigator.sendBeacon(c,e))throw"";},isSupported:!!l.navigator.sendBeacon}}();return{ajaxClient:k,beaconClient:c}});q.when("sbv-transportation-client","sbv-event-manager").register("sbv-sushi-client",function(f,k){function c(c,d,t){this.endpoint=d;this.window=c;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=
0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=f;var b=this;this.compressor=function(a){function b(c){if(c)switch(typeof c){case "number":return!(isNaN(c)||Infinity===c)&&c.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return c.length>a.dictionaryIndex.length;default:return!0}return!1}function c(b){a.eventsDictionary[b]="#"+a.dictionaryIndex++;a.reverseEventsDictionary[a.eventsDictionary[b]]=
b;return a.eventsDictionary[b]}function d(e){if(b(e)){var f=0;e instanceof Array?f=2:e instanceof Function?f=null:e instanceof Object&&(f=1);switch(f){case 0:return a.eventsDictionary[e]?a.eventsDictionary[e]:c(e);case 2:for(var m=[],f=0;f<e.length;f++)m[f]=d(e[f]);return m;case 1:f={};for(m in e)Object.prototype.hasOwnProperty.call(e,m)&&(f[a.eventsDictionary[m]?a.eventsDictionary[m]:c(m)]=-1===g.indexOf(m)?d(e[m]):e[m]);return f}}return e}return{compressData:d,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},
events:a.eventsQueue})}}}(this);this.onBeforeUnload=function(){!0!==b.unloadHandlerCalled&&(b.flush(b,!0),b.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){}return null};this.resetBatch=function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0};this.sendWithClient=function(a){if(null==this.endpoint||""===this.endpoint)this.ueCount("SushiClientEndpointMissing");
else{if(a.isSupported){var b=this.compressor.buildPOSTObject();return a.send(this.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{return this.sendWithClient(b)}catch(c){}}return null};this.flush=function(a,b){a.eventsQueue.length&&(b||!1!==a.window.navigator.onLine)&&(b=a.eventsQueue.length,a.sendWithPriority(a.transportationClient.beaconClient,a.transportationClient.ajaxClient),a.resetBatch(),a.ueCount("EventsSent",b))};this.startHighPriorityQueueTimer=
function(){0===this.highPriorityFlushInterval?this.flush(this,!1):this.highPriorityTimer||(this.highPriorityTimer=setTimeout(this.flush,this.highPriorityFlushInterval,this,!1))};this.startLowPriorityQueueTimer=function(){this.lowPriorityTimer||(this.lowPriorityTimer=setTimeout(this.flush,this.lowPriorityFlushInterval,this,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+this.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()};
this.encodeEvent=function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this,!0);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)};this.addEvent=function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){this.eventSequence++;1E3<this.eventSequence&&
this.ueCount("SushiClientMaxCallsReached");return 1E3<this.eventSequence};this.isValidAPICall=function(a){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")};this.ueCount=function(a,b){if("undefined"!==typeof ue&&ue&&ue.count)return b=0===b?0:b||(ue.count(t+":"+a)||0)+1,ue.count(t+":"+a,b),b};this.processEvent=function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess"):this.ueCount("ClientEventsFailed");
return c};k.addEventListener(l,"beforeunload",100,this.onBeforeUnload);k.addEventListener(document,"visibilitychange",100,this.onBeforeUnload);k.addEventListener(l,"blur",100,this.onBeforeUnload);k.addEventListener(l,"pagehide",100,this.onBeforeUnload);l.app||(l.app={});var a=l.app.willDisappear;l.app.willDisappear=function(){a&&a();b.onBeforeUnload()}}var g=["messageId","timestamp"];return{newClient:function(e,d,f){return new c(e,d,f)}}});q.when("A").register("sbv-automated-test-metrics-client",
function(f){function k(c){this.videoSingleProduct=c;this.processEvent=function(c){var e=this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR");e===n&&(e=[]);e.push(c);this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR",e)}}return{newClient:function(c){return new k(c)}}});q.when("A").register("sbv-platform-compatibility",function(f){function k(){return f.capabilities.isAmazonApp&&f.capabilities.ios}var c=null,g=navigator;return{isIOS:function(){return f.capabilities.ios},isIOSWebView:k,
canUseViewWillDisappearToReportMetrics:function(){if(!k()||!c)return!1;var e=c.split(".");if(2>e.length)return!1;var d=parseInt(e[0]),e=parseInt(e[1]);return 13<d||13===d&&18<=e},setAppVersion:function(e){c=e},isSafari:function(){return!(!g.vendor||!g.vendor.match(/apple/i))},isWebView:function(){return f.capabilities.isAmazonApp},_setNavigator:function(c){g=c}}});q.when("A").register("sbv-single-product",function(f){function k(){this.init=function(c,g,e){f.$(c).find("a").click(function(){var c=e&&
e.getVideoCurrentTimeMs&&e.getVideoCurrentTimeMs();g.reportProductClicked(c)});var d=f.$(c).find(".sbv-product-img");d.data("imgsrc")&&d.attr("src",d.data("imgsrc"));d=f.$(c).find(".faceout-product-title");f.$(d).find("a").click(function(){g.reportProductTitleClicked()});d=f.$(c).find(".faceout-product-review");f.$(d).find("a").click(function(){g.reportProductReviewCountClicked()});c=f.$(c).find(".faceout-product-price");f.$(c).find("a").click(function(){g.reportProductPriceClicked()})}}return{encodeSearchTerms:function(c){encodedSearchTerms=
"";"undefined"!=typeof l.btoa&&c&&(encodedSearchTerms=btoa(c.replace(/%([0-9A-F]{2})/g,function(c,e){return String.fromCharCode("0x"+e)})));return encodedSearchTerms},loadAdFeedback:function(c){var g=document.querySelector(".sbv-ad-feedback"),e=f.$(".sbv-sponsored-label");if(g){var d=f.$(g).data("slotname"),k=f.$(g).data("searchkeywords"),k=this.encodeSearchTerms(k),d=JSON.stringify({adPlacementMetaData:{adElementId:"video_single_product",pageType:"Search",slotName:d,pageUrl:"",searchTerms:k},adCreativeMetaData:{adNetwork:"aax",
adProgramId:1010,adImpressionId:"",adCreativeId:"",adId:""}}),d=l.location.protocol+"//"+l.location.hostname+"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html?pl\x3d"+encodeURIComponent(d),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState&&200===b.status){var a=JSON.parse(b.responseText);if(a&&"ok"===a.status){"html"in a&&a.html&&(g.innerHTML=a.html,c.reportAdFeedbackLoadSucceeded(b.status));if("script"in a&&a.script){var d=document.createElement("script");d.type="text/javascript";
d.innerHTML=a.script;g.appendChild(d)}f.$(".sbv-ad-feedback a").click(function(){c.reportAdFeedbackPopoverOpened()})}else e.removeClass("aok-hidden"),c.reportAdFeedbackLoadFailed(b.status)}};b.open("GET",d,!0);b.send()}},initialize:function(c,f,e){(new k).init(c,f,e);this.loadAdFeedback(f)}}});q.when("A").register("sbv-store-ingress",function(f){function k(){this.init=function(c,g,e){f.$(c).find("a").click(function(){g.reportStoreIngressClicked(e&&e.getVideoCurrentTimeMs())})}}return{initialize:function(c,
f,e){(new k).init(c,f,e)}}});q.register("sbv-retryable",function(){return function(f,k,c,g){function e(){0<b?(b--,d()):(a.cancel(),t())}var d=f,t=g,b=k,a=this;this._init=function(){d();this._intervalID=setInterval(e,c)};this.cancel=function(){clearInterval(this._intervalID)};this._init()}});q.when("A","sbv-video-mixin").register("sbv-video",function(f,k){var c=function(){this.metricsManager=this.$muteClickRegion=this.$unmuteIcon=this.$muteIcon=this.videoPlayer=null;this.onScreenStartTime=0;this.videoTag=
null};f.mixin(c.prototype,k);return{initialize:function(f,e,d){var k=new c;k.init(f,e,d);return k}}});q.when("A","sbv-viewability-manager","sbv-metrics-manager","sbv-video-player-builder","sbv-platform-compatibility","3p-promise","sbv-adblock-detector").register("sbv-video-mixin",function(f,k,c,g,e,d,n){return{load:function(){this.videoPlayer.load()},toggleAudio:function(){var b=!this.videoPlayer.isMuted();this.setMuteStatus(b,b?c.SOUND_TOGGLE_OFF_CAUSE.ICON_TAP:c.SOUND_TOGGLE_ON_CAUSE.ICON_TAP)},
setMuteButtonStatus:function(b){var a=this.$muteIcon,c=this.$unmuteIcon;b?(a.css("fill-opacity",1),c.css("fill-opacity",0)):(a.css("fill-opacity",0),c.css("fill-opacity",1))},setMuteStatus:function(b,a){var c=this.videoPlayer,d=this.metricsManager;this.setMuteButtonStatus(b);b?(c.mute(),d&&d.reportVideoSoundOff(c.getCurrentTimeMs(),a)):(c.unmute(),d&&d.reportVideoSoundOn(c.getCurrentTimeMs(),a))},initPreviewImage:function(){this.videoTag.setAttribute("poster",this.videoTag.dataset.videopreviewsrc)},
displayMuteClickRegion:function(b){b?(this.$muteClickRegion.addClass("aok-block"),this.$muteClickRegion.removeClass("aok-hidden"),this.metricsManager.reportAudioToggleIconDisplayed()):(this.$muteClickRegion.addClass("aok-hidden"),this.$muteClickRegion.removeClass("aok-block"))},showPlayButton:function(b){b?(this.$playButtonClickRegion.removeClass("aok-hidden"),this.metricsManager.reportPlayButtonShown()):(this.$playButtonClickRegion.addClass("aok-hidden"),k.registerElement(this.videoTag,.5,!0,!0,
!0,this.onFiftyPercentViewability.bind(this)),k.registerElement(this.videoTag,.01,!0,!0,!0,this.onOnePercentViewability.bind(this)))},manualPlay:function(){var b=this.videoPlayer,a=this.metricsManager;this.showPlayButton(!1);b.play();a.reportPlayButtonClicked(b.getCurrentTimeMs());a.reportVideoPlaybackInitiated(b.getCurrentTimeMs())},onOnePercentViewability:function(b,a){b=this.videoPlayer;var d=this.metricsManager;a?(this.onScreenStartTime=this.getCurrentTimeMs(),d.reportVideoOnScreen(b.getPercentDownloaded())):
(b.isMuted()||this.setMuteStatus(!0,c.SOUND_TOGGLE_OFF_CAUSE.VIDEO_OFF_SCREEN),a=this.getCurrentTimeMs()-this.onScreenStartTime,d.reportVideoOffScreen(a,0!=this.videoBufferingStartTime,b.getCurrentTimeMs()),this.onScreenStartTime=0,b.seekToStart(),b.resetContinuousPlaybackDurationMs())},onFiftyPercentViewability:function(b,a){b=this.videoPlayer;var c=this.metricsManager;a?(b.play(),b.resetContinuousPlaybackDurationMs(),c.reportVideoPlaybackInitiated(b.getCurrentTimeMs()),this.viewSessionStartTime=
this.getCurrentTimeMs()):(b.pause(),c.reportVideoPauseInitiated(b.getCurrentTimeMs()),c.reportVideoView(b.getContinuousPlaybackDurationMs(),e.isIOSWebView()),b.resetContinuousPlaybackDurationMs(),this.viewSessionBufferingDuration=0)},onVideoReadyForPlayback:function(b,a,c,d){this.metricsManager.reportVideoReadyForPlayback(b,a,c,d)},onVideoPlaybackFailure:function(b,a,c){this.displayMuteClickRegion(!1);this.metricsManager.reportVideoPlaybackFailure(b,c,a)},onVideoPlaying:function(b,a,c){this.displayMuteClickRegion(!0);
this.metricsManager.reportVideoPlaybackStarted(b,a,c)},onVideoPlaybackPaused:function(b,a,c){this.displayMuteClickRegion(!1);this.metricsManager.reportVideoPaused(b,a,c)},onVideoBufferingStarted:function(b,a,c){var d=this.metricsManager;this.videoBufferingStartTime=this.getCurrentTimeMs();d.reportVideoBufferingStarted(b,a,c)},getCurrentTimeMs:function(){return Date.now()},onVideoBufferingEnded:function(b,a,c){var d=this.metricsManager;this.videoBufferingStartTime=0;d.reportVideoBufferingEnded(b,a,
c)},onTimeToFirstFrame:function(b,a,c){this.metricsManager.reportTimeToFirstFrame(b,a,c)},onPlaybackCompleted:function(b,a){this.metricsManager.reportPlaybackCompleted(b,a)},onDurationPlayed:function(b,a,c){this.metricsManager.reportVideoDurationPlayed(b,a,c)},onContinuousDurationPlayed:function(b){this.metricsManager.reportVideoView(b,!0)},logClick:function(){var b=this.videoPlayer,a=this.metricsManager;a&&a.reportVideoClicked(b.getCurrentTimeMs())},getVideoCurrentTimeMs:function(){return this.videoPlayer.getCurrentTimeMs()},
onVideoAborted:function(b){var a=this.metricsManager;a&&a.reportVideoAborted(b)},onVideoSuspended:function(b){var a=this.metricsManager;a&&a.reportVideoSuspended(b)},onVideoPlayPromiseRejected:function(b){var a=this.metricsManager;e.isIOS()&&null!==b&&""!==b&&b.startsWith("NotAllowedError")&&this.showPlayButton(!0);a&&a.reportVideoPlayPromiseRejected(b)},onVideoPlayPromiseNotSupported:function(){var b=this.metricsManager;b&&b.reportVideoPlayPromiseNotSupported()},init:function(b,a,c){function l(a,
b,c){p.onDurationPlayed(a,b,c)}function w(a){p.onContinuousDurationPlayed(a)}function r(a,b){p.onOnePercentViewability(a,b)}function q(a,b){p.onFiftyPercentViewability(a,b)}function u(){p.load();k.registerElement(p.videoTag,.5,!0,!0,!0,q);k.registerElement(p.videoTag,.01,!0,!0,!0,r)}function m(a){return a.then(function(a){return{value:a,status:"fulfilled"}},function(a){return{reason:a,status:"rejected"}})}b=f.$(b);this.videoTag=b.find("video:first").get(0);var p=this;p.metricsManager=a;p.initPreviewImage();
var v=g.builder(this.videoTag).withVideoReadyForPlaybackHandler(function(a,b,c,d){p.onVideoReadyForPlayback(a,b,c,d)}).withTimeToFirstFrameHandler(function(a,b,c){p.onTimeToFirstFrame(a,b,c)}).withVideoPlaybackFailureHandler(function(a,b,c){p.onVideoPlaybackFailure(a,b,c)}).withVideoPlayingHandler(function(a,b,c){p.onVideoPlaying(a,b,c)}).withVideoPlaybackPausedHandler(function(a,b,c){p.onVideoPlaybackPaused(a,b,c)}).withPlaybackCompletedHandler(function(a,b){p.onPlaybackCompleted(a,b)}).withVideoBufferingStartedHandler(function(a,
b,c){p.onVideoBufferingStarted(a,b,c)}).withVideoBufferingEndedHandler(function(a,b,c){p.onVideoBufferingEnded(a,b,c)}).withVideoPlayedToBoundaryHandler(2E3,l).withVideoPlayedToBoundaryHandler(15E3,l).withVideoPlaybackFailedAfterPlayErrorCallback(function(){a.reportPlaybackFailedToStartAfterPlay()}).withVideoAbortedHandler(function(a){p.onVideoAborted(a)}).withVideoSuspendedHandler(function(a){p.onVideoSuspended(a)}).withVideoPlayPromiseRejectedHandler(function(a){p.onVideoPlayPromiseRejected(a)}).withVideoPlayPromiseNotSupportedHandler(function(){p.onVideoPlayPromiseNotSupported()});
e.isIOSWebView()&&!e.canUseViewWillDisappearToReportMetrics()&&(v=v.withVideoPlayedToContinuousBoundaryHandler(2E3,w));v=v.build();p.videoPlayer=v;b.find("a").click(function(){p.logClick()});var y=b.find('[data-itemid\x3d"sbv-video-mute-click-region"]');p.$muteClickRegion=y;p.$muteIcon=b.find('[data-itemid\x3d"sbv-video-mute-icon"]');p.$unmuteIcon=b.find('[data-itemid\x3d"sbv-video-unmute-icon"]');p.setMuteButtonStatus(v.isMuted());y.click(function(){p.toggleAudio()});b=b.find('[data-itemid\x3d"sbv-video-play-click-region"]');
p.$playButtonClickRegion=b;b.click(function(){p.manualPlay()});(b=n.init())?d.all([c,b].map(m)).then(function(b){var c=b[0];b=b[1];"fulfilled"===c.status&&"fulfilled"===b.status?u():"fulfilled"===c.status&&"rejected"===b.status&&navigator.onLine&&(p.showPlayButton(!0),a.reportAdBlockDetected())}):u()}}});q.when("A","sbv-slideshow-mixin").register("sbv-slideshow",function(f,k){var c=function(){this.metricsManager=this.carousel=n;this.numOfSlides=this.currentSlideIndex=0};f.mixin(c.prototype,k);return{initialize:function(f,
e){var d=new c;d.init(f,e);e.reportSlideshowLoadCompleted(d.numOfSlides);return d}}});q.when("A","a-carousel-framework","sbv-viewability-manager","sbv-metrics-manager").register("sbv-slideshow-mixin",function(f,k,c,g){var e=0,d=0,l=0,b=this,a=function(a,c){b.carousel===n?b.metricsManager.reportSlideshowLoadFailed(b.numOfSlides,"slideshow.carousel is undefined"):c?(d=f.interval(function(){e+=1},1),b.metricsManager.reportSlideshowOnScreen(b.numOfSlides),h(!0)):(b.status="IDLE",b.metricsManager.reportSlideshowOffScreen(b.numOfSlides,
e),clearInterval(d),e=0,h(!1))},h=function(a){a&&b.autoRotate===n?b.autoRotate=f.interval(function(){b.status="AUTO_PLAYING";b.carousel.gotoNextPage({accessibleSafe:!0})},2500):(l=0,b.autoRotate!==n&&(clearInterval(b.autoRotate),b.autoRotate=n))};return{onFiftyPercentViewability:a,autoPlay:h,init:function(d,e){var g=f.$(d),n=g.get(0);b=this;b.metricsManager=e;k.onInit("sbv-slideshow-carousel",function(d){b.carousel=d;b.numOfSlides=b.carousel.getAttr("totalPages");b.status="IDLE";d=b.carousel.dom.$viewport;
f.on("a:pan-horizontal:"+d[0].id,function(a){b.status="SWIPING";h(!1);a.ended&&h(!0)});d.bind(f.action.end,function(a){"SWIPING"===b.status&&b.metricsManager.reportSlideshowSwiped(b.numOfSlides);h(!0)});g.find("a").click(function(){b.metricsManager.reportSlideshowClicked(b.numOfSlides,b.currentSlideIndex)});f.on("a:carousel:sbv-slideshow-carousel:change:pageNumber",function(a){var c=a.newValue-1;b.currentSlideIndex=c;var d=a.oldValue-1;0===c&&d===b.numOfSlides-1&&(l+=1,b.metricsManager.reportSlideshowLoop(b.numOfSlides,
l));f.$(".sbv-slideshow-pagination-container").each(function(){f.$(this).children("ul").children("li:eq("+d+")").removeClass("a-selected");f.$(this).children("ul").children("li:eq("+c+")").addClass("a-selected")})});c.registerElement(n,.5,!0,!0,!0,a)});return this}}});"use strict";q.when("sbv-retryable","sbv-platform-compatibility").register("sbv-video-player-builder",function(f,k){function c(b){var a=this,c=0,d=0;this._videoElement=b;this._onVideoBufferingEnded=this._onVideoBufferingStarted=this._onPlaybackCompleted=
this._onPlaybackPaused=this._onVideoPlaying=this._onVideoPlaybackFailure=this._onTimeToFirstFrame=this._onVideoReadyForPlayback=n;this._lastOnTimeUpdateCurrentTimeMs=0;this._boundaryChecks=[];this._continuousDurationBoundaryChecks=[];this._retryable=null;this._registerEventListeners=function(){var b=a._videoElement;b.oncanplay=function(){return a._handleVideoReadyForPlaybackEvent()};b.onerror=function(){!a._assetLoaded&&3>a._retryLoadCount?(a._retryLoadCount++,setTimeout(a._videoElement.load.bind(a._videoElement),
2E3)):a._handleVideoPlaybackFailureEvent()};b.onplaying=function(){a._handleFirstFramePlayedEvent();a._playbackstate===l.BUFFERING&&a._onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate!==l.END&&a._onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate=l.PLAYING};b.onpause=function(){a._videoElement.currentTime!==a._videoElement.duration&&(a._playbackstate=l.PAUSED,a._onPlaybackPaused(a.getCurrentTimeMs(),
a.getPercentDownloaded(),a.getDroppedFrames()))};b.onended=function(){a._playbackstate=l.END;var b=a.getDurationMs();d+=b-c;c=0;a._onPlaybackCompleted(a.getDurationMs(),a.getDroppedFrames());a._playInternal()};b.onwaiting=function(){a._playbackstate=l.BUFFERING;a._onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};b.ontimeupdate=function(){a.cancelPlayRetryable();var b=a.getCurrentTimeMs(),c=a.getContinuousPlaybackDurationMs();a._continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(c)});
a._boundaryChecks.forEach(function(c){c.reportIfBoundaryCrossed(a._lastOnTimeUpdateCurrentTimeMs,b,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a._lastOnTimeUpdateCurrentTimeMs=b};b.onabort=function(){var b=a.getCurrentTimeMs();a._onAborted(b)};b.onsuspend=function(){var b=a.getCurrentTimeMs();a._onSuspended(b)}};this._getDateTime=function(){return Date.now()};this._playInternal=function(){a._initiatedPlayTime||(a._initiatedPlayTime=a._getDateTime());var b=a._videoElement.play();
b?b.catch(function(b){var c="Unknown";"string"===typeof b?c=b:b instanceof DOMException&&(c=b.name+": "+b.message);a._onVideoPlayPromiseRejected(c)}):a._onVideoPlayPromiseNotSupported()};this.cancelPlayRetryable=function(){a._retryable&&(a._retryable.cancel(),a._retryable=null)};this._init=function(){a._playbackstate=l.INITIATED;a._loadStartTime=a._getDateTime();a._assetLoaded=!1;a._retryLoadCount=0;a._firstFramePlayed=!1;a._initiatedPlayTime=n};this._init();this._registerEventListeners();this._handleVideoReadyForPlaybackEvent=
function(){if(!a._assetLoaded){var b=a._getDateTime()-a._loadStartTime;a._onVideoReadyForPlayback(b,a._retryLoadCount,a.getPercentDownloaded(),a.getDurationMs());a._assetLoaded=!0}};this._handleFirstFramePlayedEvent=function(){if(!a._firstFramePlayed){var b=a._getDateTime()-a._initiatedPlayTime;a._onTimeToFirstFrame(b,a.getPercentDownloaded(),a.getDroppedFrames());a._firstFramePlayed=!0}};this._handleVideoPlaybackFailureEvent=function(){var b=a._videoElement;if(b.error){var c="UNKNOWN";if(b.error.code)switch(b.error.code){case 1:c=
"MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c=b.error.code.toString()}a._onVideoPlaybackFailure(a.getCurrentTimeMs(),c,b.error.message)}};this.addVideoReadyForPlaybackListener=function(b){a._onVideoReadyForPlayback=b;4==a._videoElement.readyState&&(a._onVideoReadyForPlayback(0,0,a.getPercentDownloaded(),a.getDurationMs()),a._assetLoaded=!0)};this.addVideoPlaybackFailureListener=function(b){a._onVideoPlaybackFailure=
b;if(a._videoElement.error&&a._videoElement.error.code)a._videoElement.onerror()};this.play=function(){k.isIOS()?(a._retryable&&a.cancelPlayRetryable(),a._retryable=new f(a._playInternal,10,200,function(){a._assetLoaded&&null!=a._playbackFailedAfterPlayErrorCallback&&a._playbackFailedAfterPlayErrorCallback()})):a._playInternal()};this.pause=function(){a.cancelPlayRetryable();a._videoElement.pause()};this.seekToStart=function(){var b=a.getCurrentTimeMs();d+=b-c;c=0;a._lastOnTimeUpdateCurrentTimeMs=
0;a._videoElement.currentTime=0};this.mute=function(){a._videoElement.muted=!0};this.unmute=function(){a._videoElement.muted=!1};this.isMuted=function(){return a._videoElement.muted};this.getCurrentTimeMs=function(){return Math.round(1E3*a._videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a._videoElement.duration)};this.getDroppedFrames=function(){return a._videoElement.getVideoPlaybackQuality?a._videoElement.getVideoPlaybackQuality().droppedVideoFrames:a._videoElement.webkitDroppedFrameCount!=
n?a._videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return d+(a.getCurrentTimeMs()-c)};this.resetContinuousPlaybackDurationMs=function(){var b=a.getCurrentTimeMs();d=0;c=b===a.getDurationMs()?0:b;a._continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var b=a._videoElement.buffered,c=0;if(b){for(var d=0;d<b.length;d++)c+=b.end(d)-b.start(d);return c/a._videoElement.duration}return 0};this.load=function(){a._videoElement.load()}}
function g(b,a){this.reportIfBoundaryCrossed=function(c,d,e,f,g){!isNaN(b)&&0<=b&&b<=e&&(c<=d?b>c&&b<=d&&a(b,f,g):(0<b&&b<=d||b>c&&b<=e)&&a(b,f,g))}}function e(b,a){var c=!1;this.resetReported=function(){c=!1};this.reportIfBoundaryCrossed=function(d){var e;if(e=!c)e=!isNaN(b)&&0<=b&&b<d;e&&(c=!0,a(d))}}function d(b){var a=this;this._videoPlayer=new c(b);this.withVideoReadyForPlaybackHandler=function(b){a._videoPlayer.addVideoReadyForPlaybackListener(b);return a};this.withTimeToFirstFrameHandler=function(b){a._videoPlayer._onTimeToFirstFrame=
b;return a};this.withVideoPlaybackFailureHandler=function(b){a._videoPlayer.addVideoPlaybackFailureListener(b);return a};this.withVideoPlayingHandler=function(b){a._videoPlayer._onVideoPlaying=b;return a};this.withVideoPlaybackPausedHandler=function(b){a._videoPlayer._onPlaybackPaused=b;return a};this.withPlaybackCompletedHandler=function(b){a._videoPlayer._onPlaybackCompleted=b;return a};this.withVideoBufferingStartedHandler=function(b){a._videoPlayer._onVideoBufferingStarted=b;return a};this.withVideoBufferingEndedHandler=
function(b){a._videoPlayer._onVideoBufferingEnded=b;return a};this.withVideoPlayedToBoundaryHandler=function(b,c){a._videoPlayer._boundaryChecks.push(new g(b,c));return a};this.withVideoPlayedToContinuousBoundaryHandler=function(b,c){a._videoPlayer._continuousDurationBoundaryChecks.push(new e(b,c));return a};this.withVideoPlaybackFailedAfterPlayErrorCallback=function(b){a._videoPlayer._playbackFailedAfterPlayErrorCallback=b;return a};this.withVideoAbortedHandler=function(b){a._videoPlayer._onAborted=
b;return a};this.withVideoSuspendedHandler=function(b){a._videoPlayer._onSuspended=b;return a};this.withVideoPlayPromiseRejectedHandler=function(b){a._videoPlayer._onVideoPlayPromiseRejected=b;return a};this.withVideoPlayPromiseNotSupportedHandler=function(b){a._videoPlayer._onVideoPlayPromiseNotSupported=b;return a};this.build=function(){var b=a._videoPlayer;if(b._onVideoReadyForPlayback&&b._onTimeToFirstFrame&&b._onVideoPlaybackFailure&&b._onVideoPlaying&&b._onPlaybackPaused&&b._onPlaybackCompleted&&
b._onVideoBufferingStarted&&b._onVideoBufferingEnded&&b._onAborted&&b._onSuspended&&b._onVideoPlayPromiseRejected&&b._onVideoPlayPromiseNotSupported)return a._videoPlayer;throw Error("Need implements all event listeners");}}var l={PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",INITIATED:"initiated",END:"ended"};return{builder:function(b){return new d(b)}}});q.register("sbv-event-manager",function(){function f(c){var e=0,d;for(d in c)e++;return e}function k(f,e){return function(d){c[f][e].listeners.forEach(function(c){c.callback&&
c.callback(d)})}}var c={};return{addEventListener:function(f,e,d,l){c[f]||(c[f]={});c[f][e]||(c[f][e]={listeners:[],generatedCallback:k(f,e)},f.addEventListener(e,c[f][e].generatedCallback));c[f][e].listeners.push({priority:d,callback:l});c[f][e].listeners.sort(function(b,a){return b.priority-a.priority})},removeEventListener:function(g,e,d,k){c[g]&&c[g][e]&&(c[g][e].listeners=c[g][e].listeners.filter(function(b){return b.priority!==d||b.callback!==k}),0===c[g][e].listeners.length&&(g.removeEventListener(e,
c[g][e].generatedCallback),delete c[g][e],f(c[g])&&delete c[g]))}}});"use strict";q.when("A","amzn-safe-frame-viewability","sbv-platform-compatibility","sbv-event-manager").register("sbv-viewability-manager",function(f,k,c,g){function e(a,b){a.isInView=b;a.callback(a.ratio,b);a.recurring||r(a.element,a.ratio,a.dispatchOnElementInView,a.dispatchOnElementOutOfView,a.recurring)}function d(a,b){a.dispatchOnElementInView&&b>=a.ratio&&!a.isInView&&e(a,!0);a.dispatchOnElementOutOfView&&b<a.ratio&&a.isInView&&
e(a,!1)}function n(a){d(a,0)}function b(a){var b=k.geom(a.element);d(a,b&&b.self&&b.self.iv||0)}function a(){u.forEach(n)}function h(){u.forEach(b)}function q(){document.hidden?a():setTimeout(h,50)}function w(){a();h()}function r(b,d,e,k,n){var p=u.length;u=u.filter(function(a){return!(a.element===b&&a.ratio===d&&a.dispatchOnElementInView===e&&a.dispatchOnElementOutOfView===k&&a.recurring===n)});0===u.length&&(f.off("afterReady",m),f.off(f.constants.BROWSER_EVENTS.SCROLL,m),f.off(f.constants.BROWSER_EVENTS.RESIZE,
m),f.off(f.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,m),g.removeEventListener(document,"visibilitychange",1,q),g.removeEventListener(l,"beforeunload",1,a),c.isWebView()||(g.removeEventListener(l,"focus",1,h),g.removeEventListener(l,"blur",1,a)),c.isSafari()&&!c.isWebView()&&(g.removeEventListener(l,"pagehide",1,a),g.removeEventListener(l,"pageshow",1,h),g.removeEventListener(l,"popstate",1,w)));return p!==u.length}function x(){c.canUseViewWillDisappearToReportMetrics()&&!v&&(v=!0,l.app||(l.app=
{}),p=l.app.willDisappear,l.app.willDisappear=function(){a();p&&p()})}var u=[],m,p,v=!1;m=f.throttle(function(){u.forEach(b)},50);return{registerElement:function(d,e,k,n,p,r){d={element:d,ratio:e,dispatchOnElementInView:k,dispatchOnElementOutOfView:n,recurring:p,callback:r};0===u.length&&(f.on("afterReady",m),f.on(f.constants.BROWSER_EVENTS.SCROLL,m),f.on(f.constants.BROWSER_EVENTS.RESIZE,m),f.on(f.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,m),g.addEventListener(document,"visibilitychange",1,q),
c.isWebView()||(g.addEventListener(l,"focus",1,h),g.addEventListener(l,"blur",1,a)),c.isSafari()&&!c.isWebView()&&(g.addEventListener(l,"pagehide",1,a),g.addEventListener(l,"pageshow",1,h),g.addEventListener(l,"popstate",1,w)),x());u.push(d);b(d);return d},deregisterElement:r,_handleRatioInViewChange:d,_onBrowserVisibilityChange:q}})});
/* ******** */
(function(b){var h=window.AmazonUIPageJS||window.P,e=h._namespace||h.attributeErrors,a=e?e("SearchQuestionAnswerWidgetAssets",""):h;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,h,e){b.when("A","ready").execute("aspa-partial-collapse-expander",function(a){a.on("a:expander:qna_answer_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-partial-collapse-header").addClass("aok-hidden");a.expander.$expander.find(".a-expander-partial-collapse-content").addClass("aspa-padding-none")});
a.on("a:expander:qna_question_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-section-header").addClass("a-text-bold");b.when("a-expander").execute("aspa-question-expander",function(a){a.initializeExpanders()})});a.on("a:expander:qna_question_expander:toggle:collapse",function(a){a.expander.$expander.find(".a-expander-section-header").removeClass("a-text-bold")})});"use strict";b.when("jQuery","rush-framework","a-button").register("aspa-voting-component",function(a,b,e){function q(a,
c){for(var d=0;d<a.length;++d)if(a[d].name===c)return a[d].value;return null}function z(b){var c={};a.map(b,function(a){c[a.name]=a.value});return c}function l(b){function c(){m.addClass("aok-hidden");n.addClass("aok-hidden");r.removeClass("aok-hidden")}function d(){t.removeClass("aok-hidden")}function e(a){401===a.status?(k.unbind("submit"),k.submit()):(m.removeClass("aok-hidden"),n.removeClass("aok-hidden"))}function u(a){401!==a.status&&r.addClass("aok-hidden")}function l(){for(var a={},b=0;b<
f.length;++b)"csm-producer"!==f[b].name&&"csm-schema"!==f[b].name&&(a[f[b].name]=f[b].value);h.ue&&h.ue.event&&h.ue.event(a,v,w);m.addClass("aok-hidden");n.addClass("aok-hidden");t.removeClass("aok-hidden")}var k=a(b.currentTarget),g=k.closest(".aspa-feedback-container"),m=g.find(".aspa-vote-buttons"),r=g.find(".aspa-loading-section"),t=g.find(".aspa-success-section"),n=g.find(".aspa-error-section"),g=k.attr("action"),x=k.attr("method"),f=k.serializeArray(),p=z(f),v=q(f,"csm-producer"),w=q(f,"csm-schema"),
y={"X-Requested-With":"XMLHttpRequest"};b.preventDefault();g?"application/json"===p.contentType?(delete p.contentType,a.ajax({url:g,type:x,contentType:"application/json",data:JSON.stringify(p),withCredentials:!0,headers:y,beforeSend:c,success:d,error:e,complete:u})):a.ajax({url:g,type:x,data:f,withCredentials:!0,headers:y,beforeSend:c,success:d,error:e,complete:u}):v&&w&&l()}b.registerComponent("aspa-voting-component","aspa-voting-component",function(b){b=a(b.elem()).find(".aspa-vote-form");var c=
e(".aspa-upvote-button"),d=e(".aspa-downvote-button");c.isEnabled()||c.enable();d.isEnabled()||d.enable();b.submit(l)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PantryCPIMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(f){var h=window.AmazonUIPageJS||window.P,u=h._namespace||h.attributeErrors,a=u?u("SearchWebVSEVideoWidgetAssets",""):h;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,h,u){f.register("vse-search-utils",function(){function a(a){var b,e;"undefined"!==typeof a&&(b=h.ue)&&(e=b.count(a)||0,b.count(a,e+1))}return{postCountMetric:a,postTimeMetric:function(a,b){var e;"undefined"!==typeof a&&"undefined"!==typeof b&&(e=h.ue)&&e.count(a,b)},logError:function(a,
b,e,c){h.ueLogError&&h.ueLogError(c,{logLevel:a,attribution:b,message:e})},logHideWidgetMetrics:function(d){a("vse_search_widget_hidden");d.trigger("vse:search:widget:hidden")},getAssetSpec:function(a,b){a=a.$(b.currentTarget);b=a.parent().data();var e=a.closest("li").index(),c=a.find(".vse-video-image").data("img");return{contentId:b.asin,title:b.title,vendorName:b.vendorName,vendorCode:b.vendorCode,referenceUrl:b.referenceUrl,referenceLinkTitle:b.referenceTitle,videoUrl:b.videoUrl,$el:a,duration:b.duration,
imageUrl:c,sponsored:b.sponsored|0,videoVoteContainer:{},productAsin:b.productAsin,refTag:"vse-s-ic-"+e,relatedProducts:b.relatedProducts,sponsorProducts:b.sponsorProducts,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoRefId,index:a.closest("li").index()}},reSize:function(a){a.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight})},getModalFactory:function(a){var b=null;a.capabilities.mobile?f.now("a-secondary-view").execute("vse-search-secondary-view-factory",function(a){b=a}):
f.now("a-modal").execute("vse-search-modal-factory",function(a){b=a});return b},refTagRecorder:function(a,b,e,c){c=c||0;if(!(3<=c)){var l=this;a.post("/gp/mobile/tag/?ref\x3dvse_vws_vc_"+b+e,{error:function(){l.refTagRecorder(a,b,e,++c)}})}}}});f.when("vse-search-utils").execute("vse-search-ajax-calls",function(a){f.register("vse-search-preLoadCallHook",function(){function d(b,e){try{var c=b.A,l=b.request,f=b.block,h=b.handleFailure,r=b.handleSuccess;e--;var p=3-e-1,g=c.now();c.ajax("/vap/ew/componentbuilder",
{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||4E3,withCredentials:!0,success:function(b){var d=c.now()-g;a.postTimeMetric("vse_search:preload:success:",d);a.postCountMetric("vse_search:preload:success:"+l.page+":"+l.placement+":"+p);c.$(f).html(b);r(c,l,b)},error:function(k){a.postCountMetric("vse_search:preload:error:"+l.page+":"+l.placement+":"+p);(0===k.http.status||500<=k.http.status&&599>=k.http.status)&&0<e?d(b,e):(a.postCountMetric("vse_search:preload:error:"),
h(c,k))}})}catch(k){a.logError("FATAL","vse_search","[vse_search_preLoadCallHook] ",k)}}return{get:function(a,e,c,l,f){d({A:a,block:e,request:c,handleFailure:f,handleSuccess:l},3)}}});f.register("vse-search-lazyLoadCallHook",function(){function d(b,e,c){try{var l=b.A,f=b.context,h=b.handleFailure,r=b.handleSuccess,p=atob(e.attr("data-configuration")),g=JSON.parse(p),k={pageContext:f,configuration:g},x=l.now();c--;var w=3-c-1;l.ajax("/vap/ew/subcomponent/"+g.type,{params:k,paramsFormat:"json",method:"post",
contentType:"application/json",timeout:f.timeout||4E3,withCredentials:!0,success:function(b){var d=l.now()-x;a.postTimeMetric("vse_search:lazyload:success:",d);a.postCountMetric("vse_search:lazyload:success:"+k.page+":"+k.placement+":"+w);e.html(b);r(l,k,b,g.type)},error:function(f){a.postCountMetric("vse_search:lazyload:error:"+k.page+":"+k.placement+":"+w);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<c?d(b,e,c):(a.postCountMetric("vse_search:lazyload:error:"),h(l,k,f,g.type))}})}catch(t){a.logError("FATAL",
"vse_search","[vse_search_lazyLoadCallHook] ",t)}}return{get:function(a,e,c,f,h){var v=a.$;v(e+" div[data-configuration]").each(function(){d({A:a,context:c,handleFailure:h,handleSuccess:f},v(this),3)})}}})});"use strict";f.when("A","vse-search-utils","vse-search-preLoadCallHook","vse-search-lazyLoadCallHook","rush-framework").register("vse-search-widget",function(a,d,b,e,c){a.$(".vse-search-video-carousel").delegate(".vse-video-card.vse-avoid-clicks","click",function(){d.postCountMetric("vse-search.widgetClickedBeforeRushFramework")});
c.registerComponent("vse-search-widget","vse-search-widget",function(c){try{var h=a.now();d.postTimeMetric("vse-search-preload-load-time",h);var v,r,p,g,k=!1,x=!1,w=!1,t=!0,u=!1,n=c.elem();f.when("af").execute("vse-search-widget-load-images-lazily",function(){a.loadDescendantImagesManually(a.$(n));a.trigger("a:image:vse:manualLoaded")});c=function G(){if(n)if(w)a.off("scroll",G);else if(a.onScreen(a.$(n),0)){var b=a.now()-h;k?(d.postCountMetric("vse-search.widgetViewedWithLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithLightboxWidgetsDuration",
b)):(d.postCountMetric("vse-search.widgetViewedWithNoLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithNoLightboxWidgetsDuration",b));d.postTimeMetric("vse-search-preload.pageLoadToWidgetViewedDuration",b);w=!0}};c();a.on("scroll",c);var A=a.$(n).attr("data-page-state");if(A){var H=atob(A),m=JSON.parse(H);g=m.clientPrefix;var I=m.popoverTriggerId,q=m.popoverContainerId,B=m.popoverName,y=m.initialVideo,J=m.celQueryStringParam,z=m.videoDataList,C=0;p={requester:m.requester,clientPrefix:g,
page:m.page,placement:m.placement,device:m.device,locale:m.locale,requestId:m.requestId,sessionId:m.sessionId,customerId:m.customerId,marketplaceID:m.marketplaceID,metadata:m.metadata,videoDataList:z,video:{contentID:y.contentId,contentIDType:"ASIN",videoURL:y.videoURL,imageURL:y.videoImageUrl},product:{contentID:y.relatedProductsAsins,contentIDType:"ASIN"}};var D=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+":failed")},E=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+
":succeeded")};b.get(a,"#"+q+" .vse-search-video-block",p,function(a){t=!1;f.when("VSEComponentAssets").execute("vse-search-preload-success",function(){k=!0;x&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedBeforePreload"));a.delay(function(){d.reSize(a)},500)});a.trigger("vse:"+g+":preload:succeeded")},function(a){k=!1;a.trigger("vse:"+g+":preload:failed");d.logHideWidgetMetrics(a)});a.$(n).find(".vse-search-video-carousel").delegate(".vse-video-card a",
"click",function(b){if(!t){b.preventDefault();var c=d.getModalFactory(a);r=d.getAssetSpec(a,b);a.objectIsEmpty(c)?(t=!0,d.logHideWidgetMetrics(a)):(v=c.get(a.$("#"+I)),a.objectIsEmpty(v)?(t=!0,d.logHideWidgetMetrics(a)):(v.show(),d.refTagRecorder(a,r.index,J,0)))}});a.on("a:popover:afterShow:"+B,function(b){x=!0;a.$(b.popover.$popover).addClass(a.$("#"+q).data("cssClass"));C++;k&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),1===C&&(e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedAfterPreload")));
d.reSize(a)});a.on("a:popover:beforeHide:"+B,function(){k&&(a.trigger("vse:"+g+":page:lightBoxClosed"),a.$("#"+q+" .vse-placeholder").addClass("aok-hidden"),a.$("#"+q+" .vse-search-video-block").removeClass("vse-search-absolute-lb"))});a.on(g+":vse:player:registered",function(){a.$("#"+q+" .vse-search-video-block").first().animate({opacity:1})});a.declarative(g+"-carousel-see-more","click touch",function(){a.$(n).find(".vse-video-card").first().find(".vse-carousel-item").click()});a.on(g+":vse:sushiMetrics",
function(b){var c=z.map(function(a){return a.contentId}).join(","),d=function(){f.when("A","a-carousel-framework").execute("vse-carousel-metric-handler",function(a,c){var d=c.getCarousel(a.$(n).find(".vse-search-video-carousel")),e=d.getAttr("name"),f=[];z.map(function(a){f.push({videoAsin:a.contentId,impressionRecorded:!1})});c=function F(){for(var c=d.getAttr("pageNumber"),h=d.getAttr("pageSize"),k=d.getAttr("totalPages"),g=0;g<Math.min(c*h,f.length);g++)if(!f[g].impressionRecorded){var l=b.buildSushiPayload({eventName:"vse-search.thumbnailImpression",
stringPayload:"",intPayload:1,videoAsin:f[g].videoAsin});b.postMetric.emitSushiMetric(l,b.endpoint);f[g].impressionRecorded=!0}c===k&&(a.off("a:carousel:"+e+":change:pageSize",F),a.off("a:carousel:"+e+":change:pageNumber",F))};c();a.on("a:carousel:"+e+":change:pageSize",c);a.on("a:carousel:"+e+":change:pageNumber",c)})},e=function K(){if(n)if(u)a.off("scroll",K);else if(a.onScreen(a.$(n),0)){var e=b.buildSushiPayload({eventName:"vse-search.pageView",stringPayload:"",intPayload:1,videoAsinList:c});
b.postMetric.emitSushiMetric(e,b.endpoint);d();u=!0}},h=b.buildSushiPayload({eventName:"vse-search.pageRender",stringPayload:"",intPayload:1,videoAsinList:c});b.postMetric.emitSushiMetric(h,b.endpoint);e();a.on("scroll",e)});a.$(n).find(".vse-sm-link").removeClass("vse-avoid-clicks");a.$(n).find(".vse-video-card").removeClass("vse-avoid-clicks");a.$(n).find(".vse-search-container-spinner").addClass("aok-hidden");d.postTimeMetric("vse-search.timeToRemoveSpinner",a.now()-h)}else d.logHideWidgetMetrics(a),
d.postCountMetric("vse-search-preload-page-state-not-found")}catch(L){t=!0,d.logHideWidgetMetrics(a)}})})});
/* ******** */
(function(t){var p=window.AmazonUIPageJS||window.P,v=p._namespace||p.attributeErrors,h=v?v("MiraiDiscoverWidgetSearchWebAssets",""):p;h.guardFatal?h.guardFatal(t)(h,window):h.execute(function(){t(h,window)})})(function(t,p,v){t.when("A","ready").register("mirai-discover-constants",function(){return{BOX_ID_PREFIX:"sbl-item-box-",GET_RECOMMENDATION:"getRecommendationsRS",GET_RECOMMENDATION_ADD_LIKE:"getRecommendationsForLikeRS",GET_RECOMMENDATION_ADD_DISLIKE:"getRecommendationsForDislikeRS",LIKE_PREFIX:"L",
DISLIKE_PREFIX:"D",SBL_WEBSITE_ADDRESS_PREFIX:"/discover/",SBL_FLIP_BOX_CLASS:"sbl-item-box-flip",DESKTOP_NUM_ROWS_PER_SHOW_MORE:2,MOBILE_NUM_ROWS_PER_SHOW_MORE:2,INITIAL_ITEM_COUNT_DESKTOP:8,INITIAL_ITEM_COUNT_MOBILE:4,END_OF_RECOMMENDATIONS_START_INDEX:-1,RATINGS_HALF_STAR_THRESHOLD:.5,RATINGS_MAX_STAR:5,AUI_EMPTY_IMAGE_URL:"https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/grey-pixel.gif",HTTP_ERROR_NO_CONTENT:204,AUI_HIDDEN_CLASS:"aok-hidden",ANIMATION_DURATION_MILLISECONDS:500,
ITEMS_SECTION_ANIMATION_DURATION_MILLISECONDS:200,SCROLL_ANIMATION_MILLISECONDS:500,SCROLL_HEIGHT_MULTIPLIER:1.3,NUMBER_TWO:2,CHANGEOVER_FADE_IN:200,CHANGEOVER_FADE_OUT:200,CHANGEOVER_SHOW_DELAY:5E3,RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY:5E3,DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION:275,LINK_TO_REVIEW_SECTION_TAG:"#customerReviews"}});t.when("A","ready").register("mirai-discover-utils",function(){return{getElementData:function(h){var d=h.data();d&&d.asin&&(d.asin=h.attr("data-asin"));d&&d.refinements&&(d.refinements=
h.attr("data-refinements"));return d},getHiddenElementWidthById:function(h){h=document.getElementById(h);return parseInt(p.getComputedStyle(h).getPropertyValue("width"),10)},escapeSelector:function(h){return h.toString().replace(/(:|\.|\[|\]|,|=|@|\>|\<)/g,"\\$1")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-helpers",function(h,d,b,l){return{refMarkerPrefix:"sbl_swb",generateAsinToDpURL:function(a,b,c,d,h){d=d.split("?");return"/dp/"+
a+"/ref\x3d"+this.refMarkerPrefix+(b?"_m_":"_")+c+"?"+(1<d.length?d[1]:"").replace(h,a)},scrollTwoPixelsToActivateLazyLoad:function(){d("html, body").animate({scrollTop:d(p).scrollTop()+b.NUMBER_TWO},b.SCROLL_ANIMATION_MILLISECONDS)},changePageScrollTopIfRequire:function(a,g,c){var h=d(p).scrollTop();a=a.offset().top+g+c-(h+d(p).height());1<a?d("html, body").animate({scrollTop:h+a},b.ANIMATION_DURATION_MILLISECONDS):this.scrollTwoPixelsToActivateLazyLoad()},showNoContentChangeover:function(a,g){var c=
a.find("#sbl-no-content-message"),d=g.find(".sbl-item-detail-row");a=a.find(".sbl-items-row").offset();c.removeClass(b.AUI_HIDDEN_CLASS);c.css({top:d.offset().top-a.top,left:g.position().left,width:g.width()});c.stop(!0,!0).fadeIn(b.CHANGEOVER_FADE_IN).delay(b.CHANGEOVER_SHOW_DELAY).fadeOut(b.CHANGEOVER_FADE_OUT)},getCurrentBoxesAsinsOnPage:function(a){return a.find(".sbl-item-box").map(function(){return l.getElementData(d(this)).asin}).get()},getNumItemsPerRow:function(a){return Math.round(a.width()/
a.children().eq(0).width())},updateReviewStars:function(a,g,c,d,h){var k=a.find(".sbl-item-review-stars"),f=a.find(".sbl-item-review-count");a=a.find("span.a-declarative");var e;if(!g||g<b.RATINGS_HALF_STAR_THRESHOLD)0<a.length?a.remove():k.remove(),f.remove();for(e=0;e<=b.RATINGS_MAX_STAR;e++)k.removeClass("a-star-small-"+e).removeClass("a-star-small-"+e+"-5");e=Math.floor(g);k.addClass("a-star-small-"+e+(g-e>=b.RATINGS_HALF_STAR_THRESHOLD?"-5":""));f.text(c);f.is("a")&&f.attr("href",h+b.LINK_TO_REVIEW_SECTION_TAG);
0<a.length&&(g=JSON.parse(a.attr("data-a-popover")),g.url+="\x26asin\x3d"+d,a.attr("data-a-popover",JSON.stringify(g)))},updateShowMoreSectionStatus:function(a,g){g===b.END_OF_RECOMMENDATIONS_START_INDEX?a.find("#sbl-show-more").hide():a.find("#sbl-show-more").show()},updatePriceInformation:function(a,g,c){c.price&&(a.find(".a-offscreen").text(c.price),a.find(".a-price-whole").text(c.priceWhole),a.find(".a-price-fraction").text(c.priceFraction),a.find(".a-price-symbol").text(c.currencySymbol),a.removeClass(b.AUI_HIDDEN_CLASS));
c.basisPrice&&(g.text(c.basisPrice),g.removeClass(b.AUI_HIDDEN_CLASS))},swapBoxOnThePage:function(a,g,c,d,h){var k=a.find("#sbl-item-box-empty");a=k.find(".sbl-item-rating").clone();var f=k.find(".sbl-item-price").clone(),e=f.find(".sbl-item-price-current"),u=f.find(".sbl-item-price-original"),k=k.find(".sbl-item-prime").clone(),w,B;if(null===g||0===g.length||c===v)return!1;B=l.getElementData(g).asin;g.attr("data-asin",c.asin);g.data("asin",c.asin);g.attr("data-physical-id",c.physicalId);g.data("physicalId",
c.physicalId);g.attr("id",b.BOX_ID_PREFIX+c.asin);w=g.find(".sbl-item-top").children("a");d=this.generateAsinToDpURL(c.asin,d,h,w.attr("href"),B);w.attr("href",d);this.updatePriceInformation(e,u,c);g.find(".sbl-item-price").replaceWith(f);c.prime?k.find(".sbl-item-prime-icon").removeClass(b.AUI_HIDDEN_CLASS):k.find(".sbl-item-prime-icon").addClass(b.AUI_HIDDEN_CLASS);k.append(c.deliveryMessage);g.find(".sbl-item-prime").replaceWith(k);g.find(".sbl-button").removeClass("selected");g.removeClass("sbl-item-disliked");
h=g.find(".sbl-item-image");f=c.imageUrl;e=c.title;h.attr("src",b.AUI_EMPTY_IMAGE_URL);h.attr("data-src",f);h.data("src",f);h.addClass("a-lazy-loaded");h.attr("alt",e);h.attr("title",e);this.updateReviewStars(a,c.rating,c.ratingCount,c.asin,d);g.find(".sbl-item-rating").replaceWith(a);return!0},animateFadeColorBox:function(a){a=a.find(".sbl-item-box-inner-fade");a.removeClass(b.AUI_HIDDEN_CLASS);a.css("opacity",1);a.show();a.animate({opacity:0},b.ANIMATION_DURATION_MILLISECONDS,function(){d(this).hide()})},
resetHeightToAuto:function(){d(this).height("auto")},removeHrefFromShowMoreElement:function(){d("#sbl-show-more").removeAttr("href")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-refinements",function(h,d,b,l){function a(a){a.find("#sbl-refinement-prime-button .sbl-prime-toggle").removeClass("sbl-prime-toggle-selected")}function g(a,c,f,e,k){var g=n.find("#sbl-selected-refinement-row"),d=g.find("#sbl-selected-refinement-empty").clone();
f=k?k:f+(e?": "+e:"");d.attr("data-refinement-element-id",c);d.attr("id","sbl-selected-refinement-"+a);d.find(".sbl-selected-refinement-item-title").text(f);d.removeClass(b.AUI_HIDDEN_CLASS);g.append(d)}function c(a){a=n.find("#sbl-selected-refinement-"+l.escapeSelector(a));0<a.length&&a.remove()}var n,m,k=!1,f=[],e;return e={getRefinements:function(){return f},updateRefinementItemStatus:function(a){var b=l.getElementData(a),e=b.refinementChildId,k=a.closest(".sbl-refinement-item-row"),h=l.getElementData(k),
q=h.refinementType,r=n.find("#sbl-refinement-"+q+"-button");"base"===h.refinementSource&&(e="@"+q+":"+b.refinementChildId);h=f.indexOf(e);-1<h?(f.splice(h,1),a.removeClass("sbl-selected"),c(b.refinementChildId)):("review"===q&&k.find(".sbl-refinement-item.sbl-selected").each(function(){var a=l.getElementData(d(this)).refinementChildId,b=f.indexOf("@review:"+a);c(a);d(this).removeClass("sbl-selected");-1<b&&f.splice(b,1)}),f.push(e),a.addClass("sbl-selected"),g(b.refinementChildId,a.attr("id"),r.find(".sbl-refinement-title").text(),
b.refinementChildName,"review"===q?m.replace("${count}",b.refinementChildId):v));a=k.find(".sbl-refinement-item.sbl-selected").length;e=r.find("#sbl-refinement-"+q+"-selected");0<a?("review"===q?(e.text(m.replace("${count}",b.refinementChildId)),r.find(".sbl-refinement-title").hide()):e.text(" ("+a+")"),r.addClass("sbl-selected")):(e.text(""),r.removeClass("sbl-selected"),"review"===q&&r.find(".sbl-refinement-title").show())},setItemClearAction:function(a){h.declarative("sblRefinementItemClearAll",
"click",function(b){b=b.$declarativeParent.closest(".sbl-refinement-item-row");var e=l.getElementData(b),k=e.refinementType;b=b.find(".sbl-refinement-item.sbl-selected");var g;0<b.length&&(b.each(function(){var a=l.getElementData(d(this)),b=a.refinementChildId;"base"===e.refinementSource&&(b="@"+k+":"+a.refinementChildId);b=f.indexOf(b);-1<b&&(f.splice(b,1),d(this).removeClass("sbl-selected"),c(a.refinementChildId))}),b=n.find("#sbl-refinement-"+k+"-button"),g=b.find("#sbl-refinement-"+k+"-selected"),
g.text(""),b.removeClass("sbl-selected"),"review"===k&&b.find(".sbl-refinement-title").show(),a())})},setClearAllAction:function(b,e){h.declarative("sblRefinementsClearAll","click",function(){f=[];d(".sbl-refinement-item.sbl-selected").each(function(){d(this).removeClass("sbl-selected")});n.find(".sbl-refinement-button.sbl-selected").each(function(){var a=d(this);a.removeClass("sbl-selected");a.find(".sbl-refinement-selected").text("");a.find(".sbl-refinement-title").show()});n.find(".sbl-selected-refinement-item").each(function(){var a=
d(this);l.getElementData(a).refinementElementId&&a.remove()});a(b);e()})},updateSelectedRefinementRowShowStatus:function(){0<f.length?d("#sbl-selected-refinement-row").removeClass(b.AUI_HIDDEN_CLASS):d("#sbl-selected-refinement-row").addClass(b.AUI_HIDDEN_CLASS)},setCurrentSelectedFilter:function(a){var b;if(a)for(b=a.split(","),a=0;a<b.length;a++)e.updateRefinementItemStatus(n.find("#sbl-refinement-item-"+b[a])),e.updateSelectedRefinementRowShowStatus()},setRefinementItemAction:function(a,b){h.declarative("sblRefinementItem",
"click",function(f){k=!0;e.updateRefinementItemStatus(f.$declarativeParent.find(".sbl-refinement-item"));a||b()});h.declarative("sblRefinementPrimeButton","click",function(a){var e=a.$declarativeParent.find(".sbl-prime-toggle");e.hasClass("sbl-prime-toggle-selected")?(a=f.indexOf("@prime"),-1<a&&f.splice(a,1),e.removeClass("sbl-prime-toggle-selected")):(f.push("@prime"),e.addClass("sbl-prime-toggle-selected"));b()});if(a)h.on("a:sheet:beforeHide",function(){k&&(k=!1,b())})},setSelectedRefinementItemAction:function(a){h.declarative("sblSelectedRefinementItem",
"click",function(b){b=l.getElementData(b.$declarativeParent.closest(".sbl-selected-refinement-item"));e.updateRefinementItemStatus(d("#"+l.escapeSelector(b.refinementElementId)));a()})},constructRefinements:function(b,k,c,g,d,h){f=[];n=c;m=h;e.setRefinementItemAction(b,g);e.setItemClearAction(g);e.setClearAllAction(k,g);e.setCurrentSelectedFilter(d);e.setSelectedRefinementItemAction(g);a(k)},resetRefinementsState:function(b,e){n=e;f=[];k=!1;a(b)}}});t.when("A","jQuery","mirai-discover-constants",
"mirai-discover-utils","ready").register("mirai-discover-like-dislike-actions",function(h,d,b,l){var a=[],g=[],c=[],n=0,m={getPositiveAsins:function(){return a},getNegativeAsins:function(){return g},getIteration:function(){return n},increaseIterationByOne:function(){n++},isPositiveAndNegativeEmpty:function(){return 0===a.length&&0===g.length},addLikeStatus:function(k,f){var e=k.find(".sbl-button");-1===c.indexOf(b.LIKE_PREFIX+f.asin)&&(c.push(b.LIKE_PREFIX+f.asin),a.push({asin:f.asin,iteration:n}));
e.addClass("selected");setTimeout(function(){e.removeClass("selected")},b.RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY)},deleteLikeStatus:function(k,f){var e;for(e=0;e<a.length;e++)if(a[e].asin===f.asin){a.splice(e,1);break}for(e=0;e<c.length;e++)if(c[e]===b.LIKE_PREFIX+f.asin){c.splice(e,1);break}k.find(".sbl-button").removeClass("selected")},addDislikeStatus:function(a,f){-1===c.indexOf(b.DISLIKE_PREFIX+f.asin)&&(c.push(b.DISLIKE_PREFIX+f.asin),g.push({asin:f.asin,iteration:n}));a.addClass("sbl-item-disliked")},
deleteDislikeStatus:function(a,f){var e=!1,d;for(d=0;d<g.length;d++)if(g[d].asin===f.asin){g.splice(d,1);e=!0;break}for(d=0;d<c.length;d++)if(c[d]===b.DISLIKE_PREFIX+f.asin){c.splice(d,1);break}e&&a.removeClass("sbl-item-disliked")},setLikeStatusForNewItemIfRequired:function(a,f){-1<c.indexOf(b.LIKE_PREFIX+f.asin)&&this.addLikeStatus(a,f)},setOnClickFunction:function(a){h.declarative("sblItemLike","click",function(f){f=f.$declarativeParent.closest(".sbl-item-box");var e=f.index()+1,c=l.getElementData(f);
m.increaseIterationByOne();m.deleteDislikeStatus(f,c);m.addLikeStatus(f,c);a(c,!0,b.GET_RECOMMENDATION_ADD_LIKE,e)});h.declarative("sblItemDislike","click",function(c){c=c.$declarativeParent.closest(".sbl-item-box");var e,d;c.hasClass("sbl-item-disliked")||(e=c.index()+1,d=l.getElementData(c),m.increaseIterationByOne(),m.deleteLikeStatus(c,d),m.addDislikeStatus(c,d),a(d,!1,b.GET_RECOMMENDATION_ADD_DISLIKE,e))})},resetLikeDislikeState:function(){a=[];g=[];c=[];n=0}};return m});"use strict";t.when("A",
"jQuery","mirai-discover-constants","mirai-discover-utils","mirai-discover-helpers","mirai-discover-refinements","mirai-discover-like-dislike-actions","ready").execute("mirai-discover-main",function(h,d,b,l,a,g,c){function n(){var d,r,l,n,m,z,x,y;e!==b.END_OF_RECOMMENDATIONS_START_INDEX&&(u&&(u.abort(),u=null),d=a.getCurrentBoxesAsinsOnPage(k),r=f.find(".sbl-item-box"),l=r.first(),n=f.height(),m=Math.round(l.outerHeight()),z=a.getNumItemsPerRow(f),x=w?b.MOBILE_NUM_ROWS_PER_SHOW_MORE:b.DESKTOP_NUM_ROWS_PER_SHOW_MORE,
x*=z,y=Math.ceil(f.height()/m),r=r.length<y*z?y*z-r.length:0,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:d,start:e,count:x+r,iteration:c.getIteration(),filters:g.getRefinements()},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,q,r=d.rsRecommendationItemList;e=d.nextStart;g=l.clone();
g.removeClass(b.SBL_FLIP_BOX_CLASS);for(d=0;d<r.length;d++)h=g.clone(),q=r[d],a.swapBoxOnThePage(k,h,q,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,q),f.append(h),h.css("opacity",0),h.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS);a.changePageScrollTopIfRequire(f,n,m/b.NUMBER_TWO);a.updateShowMoreSectionStatus(k,e)},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}}))}function m(){var b;(k=d("#sbl-row"))&&
0<k.length&&(b=l.getElementData(k),t=b.browseNode,a.refMarkerPrefix=b.refMarkerPrefix,w=k.hasClass("sbl-row-mobile"),f=k.find("#sbl-items-row"),c.setOnClickFunction(v),h.declarative("sblShowMore","click",n),g.constructRefinements(w,k,k.find("#sbl-refinement-row"),p,b.refinements,b.translationFilterStarsAndUp),a.removeHrefFromShowMoreElement())}var k,f,e=null,u=null,w=!1,t,p,v;v=function(q,r,l,n){var m,z=0,x,y,p,v,A;u&&(u.abort(),u=null);c.isPositiveAndNegativeEmpty()||(m=a.getCurrentBoxesAsinsOnPage(k),
x=k.find("#"+b.BOX_ID_PREFIX+q.asin),e===b.END_OF_RECOMMENDATIONS_START_INDEX?a.showNoContentChangeover(k,x):(y=f.find(".sbl-item-box"),p=x.index(),v=a.getNumItemsPerRow(f),A=p+(v-p%v)-1,A>y.length-1&&(z=A-y.length+1,A=y.length-1),p=r?v:1,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+l,{method:"post",params:{browseNode:t,asin:q.asin,physicalId:q.physicalId,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:m,count:p+z,iteration:c.getIteration(),asinIndex:n,filters:g.getRefinements()},
paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(f){var g,h,q,l,n,m=f.rsRecommendationItemList;e=f.nextStart;if(e===b.END_OF_RECOMMENDATIONS_START_INDEX&&0===m.length)a.showNoContentChangeover(k,x);else if(g=y.first().clone(),g.removeClass(b.SBL_FLIP_BOX_CLASS),r){h=d(y[A]);q=Math.round(x.outerHeight());for(f=m.length-1;0<=f;f--)l=g.clone(),n=m[f],a.swapBoxOnThePage(k,l,n,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(l,
n),h.after(l),0===z||f>z?(l.height(0),l.animate({height:b.DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION},b.ANIMATION_DURATION_MILLISECONDS,a.resetHeightToAuto),a.animateFadeColorBox(l)):(l.css("opacity",0),l.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS));a.updateShowMoreSectionStatus(k,e);a.changePageScrollTopIfRequire(x,q,q*b.SCROLL_HEIGHT_MULTIPLIER)}else a.swapBoxOnThePage(k,x,m[0],w,c.getIteration()),a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&
(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}})))};p=function(){var l,n,m;u&&(u.abort(),u=null);g.updateSelectedRefinementRowShowStatus();l=f.find(".sbl-item-box");n=l.first();m=w?b.INITIAL_ITEM_COUNT_MOBILE:b.INITIAL_ITEM_COUNT_DESKTOP;c.getPositiveAsins().length>m&&(m=c.getPositiveAsins().length+b.NUMBER_TWO);u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:[],
count:m,iteration:c.getIteration(),filters:g.getRefinements(),isFilterChange:!0},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,m,p=d.rsRecommendationItemList;e=d.nextStart;g=n.clone();g.removeClass(b.SBL_FLIP_BOX_CLASS);l.remove();for(d=0;d<p.length;d++)h=g.clone(),m=p[d],a.swapBoxOnThePage(k,h,m,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,m),f.append(h);k.find("#sbl-no-results-section").addClass(b.AUI_HIDDEN_CLASS);
a.updateShowMoreSectionStatus(k,e);a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){if(c.http.status===b.HTTP_ERROR_NO_CONTENT)for(e=b.END_OF_RECOMMENDATIONS_START_INDEX,k.find("#sbl-no-results-section").removeClass(b.AUI_HIDDEN_CLASS),c=1;c<l.length;c++)d(l[c]).remove();a.updateShowMoreSectionStatus(k,e)},indicator:k.find("#sbl-loading-section")})};h.on("a:pageUpdate",function(){var b;k&&0<k.length?(b=d("#sbl-row"))&&0<b.length&&k[0]!==b[0]&&(k=b,f=k.find("#sbl-items-row"),e=null,c.resetLikeDislikeState(),
g.resetRefinementsState(k,k.find("#sbl-refinement-row")),a.removeHrefFromShowMoreElement()):m()});m()})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,e=l?l("ListsCommonUtilityAssets",""):h;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,h,l){g.when("A").register("al-ajax-response-state-parser",function(e){var b=e.$;return{getState:function(d){d=b(d).filter("#listsAjaxResponseStateSection");var a=b("#listsAjaxResponseStateSection");a&&0<=a.length&&a.remove();b(d).appendTo("body");e.state.parse();d=e.state("listsAjaxResponseState")||
{};return{hasError:d.hasError,authRequired:d.authRequired,authUrl:d.authUrl,error:d.error}}}});"use strict";g.when("A","al-bottomsheet-with-fallback","iphone-x-detector").register("bottom-sheet-utils",function(e,b,d){var a=e.$;e.declarative("al-sheet-with-fallback","click",function(f){f.$event.preventDefault();var a=f.data;f=b.create(b.buildComponentParams(a.componentName,a.showCloseButton,d.getAdjustedHeightPx(a.bottomsheetHeight),a.popoverHeight,a.popoverWidth,a.headerForPopover,a.viewLabel,a.viewDescription?
a.viewDescription:a.viewLabel,a.paddingForPopover,a.closeMessage),f.$target);b.show(f)});return{raiseBottomsheet:function(b){b=a(b).parents(".a-sheet-web-container");b.css("z-index",1E4);b.siblings(".a-sheet-lightbox").css("z-index",8E3)}}});"use strict";g.when("A").register("al-bottomsheet-with-fallback",function(e){function b(c){h.ueLogError&&h.ueLogError({logLevel:"ERROR",message:c})}var d,a;g.when("a-sheet").execute(function(c){d=c});g.when("a-modal").execute(function(c){a=c});var f=function(c){if(c)return d?
d.get(c.name):a.get(c.name);b("No ComponentParams specified. Please generate componentParams using .create(component)")},p={IS_POPOVER_LABEL:"IS_POPOVER",IS_BOTTOMSHEET_LABEL:"IS_BOTTOMSHEET"};return{create:function(c,f){if(c)return d?d.create(c):a.create(f,c),c;b("No ComponentParams specified. Please generate componentParams using .create(component)")},show:function(c){(c=f(c))?c.show():b("No View Created. Please create a view first by calling .create(component)")},hide:function(c){(c=f(c))?c.hide():
b("No View Created. Please create a view first by calling .create(component)")},changeHeight:function(c,a,e){var g=f(c);g?d?(g.changeHeight({height:a,duration:e}),c.bottomsheetHeight=a):(g.update({height:a}),c.popoverHeight=a):b("No View Found. Please create a view first by calling .create(component)")},remove:function(c){(c=f(c))?c.$container.remove():b("No View Created. Please create a view first by calling .create(component)")},exists:function(c){return f(c)?!0:!1},onCloseExecute:function(c,a,
f){if("function"!==typeof a)b("Expected onCloseFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeHide":"afterHide")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},onOpenExecute:function(c,a,f){if("function"!==typeof a)b("Expected onOpenFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeShow":"afterShow")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},
buildComponentParams:function(a,b,f,e,g,h,u,y,v,w){var x=d!==l,k={viewTypeLabel:x?p.IS_BOTTOMSHEET_LABEL:p.IS_POPOVER_LABEL,name:a};x?(k.closeType=w?"message":b?"icon":l,k.closeMessage=w,k.height=f,k.sheetLabel=u,k.sheetDescription=y,k.preloadDomId=a):(k.closeButton=b,k.height=e,k.width=g,k.dataStrategy="preload",k.header=h,k.hideHeader=h===l,k.padding=v!==l?v:"none",k.popoverLabel=u);return k},VIEW_TYPE_LABELS:p}});"use strict";g.when("A").register("lists-dpx-common-utils",function(e){return{urlParamValue:function(b){for(var d=
h.location.search.substring(1).split("\x26"),a=0;a<d.length;a++){var f=d[a].split("\x3d");if(f[0]===b)return f[1]}}}});"use strict";g.when("A").register("iphone-x-detector",function(){function e(){try{var a=b();d.forEach(function(b){if(-1<a.indexOf(b))return!0})}catch(f){}return!1}function b(){try{var a;a:{for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("amzn-app-ctxt\x3d")){a=c.substring(14,c.length);break a}}a=
null}if(a){var e=a.match(/"v":.*%2C*/);if(e)return e.toString().toLowerCase()}}catch(g){}return""}var d=["iphone10","iphone11"];return{isIphoneX:e,getDeviceType:b,getAdjustedHeightPx:function(a){try{if(a=parseInt(a,10),e())return a+40}catch(b){}return a}}});"use strict";g.when("A").register("amazon-lists-csrf-utils",function(e){return{addCsrfToken:function(b){var d=e.$("[data-amazon-lists-csrf-token]");0!==d.length&&(b["anti-csrftoken-a2z"]=d.attr("data-amazon-lists-csrf-token"))},hasCsrfToken:function(b){b=
b["anti-csrftoken-a2z"];return""!==b&&b!==l}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("lists-ajax-handler",function(e,b){function d(a){b.hasCsrfToken(a)||b.addCsrfToken(a)}function a(a,c){"function"===typeof a?a(c):r("callableFunction passed in is not callable: "+a)}function f(a,c,b){m(a);b&&m(n(a,b));c&&m(n(a,c));c&&b&&m(n(a,c,b))}function g(a){m("lists_ajax_before_send");a&&m(n("lists_ajax_before_send",a))}function c(a){try{return a.replaceAll("/","_")}catch(c){r("Replace all failed for URL: "+
a)}}function n(a,c,b){return[a,c,b].filter(function(a){return""!==a&&a!==l}).join(":")}function m(a){q&&q.count(a,(q.count(a)||0)+1)}function r(a){h.ueLogError(l,{logLevel:"ERROR",attribution:"ListsCommonUtilityAssets::ListsAjaxHandler",message:a})}var t=e.$,q=h.ue;return{post:function(b){var e=b.headers||[];d(e);var h=c(b.url);g(h);t.ajax({type:"POST",url:b.url,cache:b.isCached,headers:e,data:b.params,timeout:b.timeout,success:function(c,d){f("lists_ajax_success",h,d);a(b.successCallback,c)},error:function(c,
d){f("lists_ajax_error",h,d);a(b.errorCallback)}})},get:function(b){var d=c(b.url);g(d);t.ajax({type:"GET",url:b.url,headers:b.headers,cache:b.isCached,data:b.params,timeout:b.timeout,success:function(c,e){f("lists_ajax_success",d,e);a(b.successCallback,c)},error:function(c,e){f("lists_ajax_error",d,e);a(b.errorCallback)}})}}})});
/* ******** */
(function(g){var e=window.AmazonUIPageJS||window.P,l=e._namespace||e.attributeErrors,c=l?l("ListsCreateAssets",""):e;c.guardFatal?c.guardFatal(g)(c,window):c.execute(function(){g(c,window)})})(function(g,e,l){g.when("A","al-bottomsheet-with-fallback","al-ajax-response-state-parser","create-new-list-hz","bottom-sheet-utils","lists-dpx-common-utils").execute(function(c,f,z,v,m,d){function t(){m.raiseBottomsheet("#create-list-form-wrapper")}function b(a){n.ajax({type:"GET",url:"/hz/wishlist/create",
data:{createIngressName:a.createIngressName},success:A,error:function(a,b,c){r("Failed to fetch CreateList-Form. Status: "+b+"; Error: "+c)},timeout:2E4})}function A(a){var b=n(a).filter("#createlist-form-container");a=z.getState(a);a.authRequired&&a.authUrl?e.location.href=a.authUrl:a.hasError?r("CreateList form has error \x3d "+a.error):(n("#create-list-form-wrapper").html(b),p("#create-list-form-spinner"),u("#create-list-form-wrapper"))}function p(a){n(a).addClass("aok-hidden")}function u(a){n(a).removeClass("aok-hidden")}
function r(a){f.changeHeight(h,110);p("#create-list-form-spinner");p("#create-list-form-wrapper");u("#createlist-form-loading-error-section");e.ueLogError&&e.ueLogError({logLevel:"FATAL",message:a});if(!y())f.onCloseExecute(h,k,!1)}function k(){p("#createlist-form-loading-error-section");p("#create-list-form-wrapper");u("#create-list-form-spinner");e.location.reload()}function q(a,b,c){r("List creation failed. Status: "+b+"; Error: "+c)}function B(a){a.hasError?r("List creation failed with Error: "+
a.error):e.location="/hz/wishlist/ls/"+a.listExternalId}function y(){return"DETAIL_PAGE"===(c.state("createListIngressState")||{}).ingressName&&w}var n=c.$,w,x,h;c.declarative("awl-create-list-bottomsheet","click",function(a){var d=a.data||{};c.state("createListIngressState",{ingressName:d.ingressName});var e=d.componentName;e&&"function"==typeof uet&&uet("bb",e,{wb:1});e=a.data||{};h=f.create(f.buildComponentParams(e.componentName,!0,340,430,400,l,e.viewName,e.viewDescription,l,l),a.$target);f.show(h);
if(y())f.onOpenExecute(h,t);b(d);(a=d.componentName)&&"function"==typeof uet&&uet("cf",a,{wb:1});a&&"function"==typeof uex&&uex("ld",a,{wb:1})});c.declarative("create-list-bottomsheet-submit","click",function(a){a=a.data||{};var b=n("#createlist-list-name-textinput").val();b===l||0===b.length?n("#createlist-list-name-textinput").parent("div").addClass("a-form-error"):(p("#createlist-form-loading-error-section"),p("#create-list-form-wrapper"),u("#create-list-form-spinner"),a.listName=b,(b=d.urlParamValue("createAndAddAsin"))&&
0<b.length&&(a.asin=b),y()?((b=w.getAsin())&&0<b.length&&(a.asin=b),v(a,w.handleSuccess,w.handleError)):"HEARTS_BOTTOMSHEET"===(c.state("createListIngressState")||{}).ingressName&&x?(a.isDefault=!0,f.hide(h),v(a,x.onCreateSuccess,x.onCreateError)):v(a,B,q))});g.when("dp-create-list-handler").execute(function(a){w=a});g.when("hearts-create-list-handler").execute(function(a){x=a});c.on("a:expander:create-list-learn-more-popover:toggle:expand",function(){h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?
f.changeHeight(h,425):f.changeHeight(h,580)});c.on("a:expander:create-list-learn-more-popover:toggle:collapse",function(){f.changeHeight(h,340);h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?f.changeHeight(h,340):f.changeHeight(h,430)});c.declarative("createlist-list-name-validation",["keyup"],function(a){0!==a.$target.context.value.length&&n("#createlist-list-name-textinput").parent("div").hasClass("a-form-error")&&n("#createlist-list-name-textinput").parent("div").removeClass("a-form-error")})});
"use strict";g.when("A","create-new-list-hz","a-modal","lists-dpx-common-utils").register("create-utils",function(c,f,g,v){function m(b){b&&"function"==typeof uet&&uet("cf",b,{wb:1});b&&"function"==typeof uex&&uex("ld",b,{wb:1})}var d=c.$,t=function(b){b="#"+(b.formId||"addToCart");0===d(b).length&&(b="#atwl-form");return b};c.declarative("show-create-list",["click touchstart"],function(b){b.$event.preventDefault();var d=b.data;if(d.url||d.name)"function"==typeof uet&&uet("bb","create-list-dp-widget",
{wb:1}),g.create(b.$target,d).show({padding:"none"}),m("create-list-dp-widget");c.on("a:popover:afterHide:redesigned-create-list",function(){g.remove("redesigned-create-list")})});c.declarative("list-name-validation",["keyup"],function(b){0!==b.$target.context.value.length&&d("#alert-list-name").is(":visible")&&(d("#alert-list-name").addClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).removeClass("a-form-error")}))});return{submitCreate:function(b,g,p){b.$event.preventDefault();
var u=d("#create-list-form").closest(".a-popover"),r=d("#list-name").val();if(""===r)d("#alert-list-name").removeClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).addClass("a-form-error")});else{var k={},q=c.state("popoverState")||{},q=t(q),m=v.urlParamValue("createAndAddAsin");m&&1<m.length&&(k.asin=m);"1"===d("#is-create-and-add").val()&&(q=d(q).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),"undefined"!==q&&(k.asin=d.trim(q)));
d("#create-list-loading").removeClass("aok-hidden");u.find("#popover-spinner .a-popover-loading").show();d("#create-list-form").addClass("aok-hidden");k.listName=r;k.sid=b.data.sessionId;k.vendorId=b.data.sourceVendorId;k.privacyStatus=b.data.privacyStatus;k.listType=b.data.listType;if(b=e.ue?e.ue.rid:l)k.relatedRequestID=b;f(k,g,p)}}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("create-new-list-hz",function(c,f){var g=c.$;return function(c,m,d){var t=[];f.addCsrfToken(t);var b=
e.ue?e.ue.rid:l;b&&(c.relatedRequestID=b);c.isJson=!0;return g.ajax("/hz/wishlist/create/newlist",{type:"POST",headers:t,data:c,success:m,error:d,timeout:1E4})}})});
/* ******** */
(function(m){var n=window.AmazonUIPageJS||window.P,p=n._namespace||n.attributeErrors,c=p?p("HeartsAssets",""):n;c.guardFatal?c.guardFatal(m)(c,window):c.execute(function(){m(c,window)})})(function(m,n,p){"use strict";m.when("A","content-margin-utils","hearts-logging-utils","heart-error-utils","hearts-enabled").register("heart-icon-event-handlers-module",function(c,f,b,h){var e={},d;c.declarative("lists-hearts-heart-action","click",function(a){var q=a.data||{},k=a.$currentTarget.closest(".amazon-lists-heart-container"),
f=k.find(".amazon-lists-heart-icon-container"),h=k.find(".amazon-lists-filled-heart"),x=k.find(".amazon-lists-empty-heart"),r=k.find("[aria-checked]"),t=k.find(".amazon-lists-heart-flyout");if(1===h.length&&1===x.length&&1===t.length){a.$event.stopPropagation();a.$event.preventDefault();var u=q.itemExternalId;u in e||(e[u]=!0,k={itemExternalId:u,$heartsContainer:k,$heartsIconContainer:f,$filledHeart:h,$emptyHeart:x,$heartButton:r,isFilledByAttribute:0<r.length,$flyout:t},f=q.flyoutMarginSelector,
h=k.isFilledByAttribute?"true"===k.$heartButton.attr("aria-checked"):k.$emptyHeart.hasClass("aok-hidden"),h?(v(k),b.incrementCount(b.REMOVE_FROM_HEARTS_COUNTER),b.logEventDetails(a.$event),a=k.$heartsContainer.data("heartsListId"),a===p&&d!==p&&(a=d),c.post("/hz/wishlist/hearts/remove",{headers:y(q),params:z(q,a),success:l(k,f,q.isShortenedResponseView),error:n(k)})):(w(k),b.incrementCount(b.ADD_TO_HEARTS_COUNTER),b.logEventDetails(a.$event),c.post("/hz/wishlist/hearts/add",{headers:y(q),params:z(q),
success:m(k,f,q.isShortenedResponseView),error:g(k)})))}});var m=function(a,q,f){return function(b){delete e[a.itemExternalId];if(b.hasError)v(a),h.showError(a,b.errorContent,f,q);else{var c=b.listExternalId;a.$heartsContainer.data("heartsListId",c);d===p&&(d=c);t(a,b.flyoutContent,q);r(a.itemExternalId,!0)}}},g=function(a){return function(){delete e[a.itemExternalId];v(a)}},l=function(a,b,f){return function(c){delete e[a.itemExternalId];if(c.hasError)w(a),h.showError(a,c.errorContent,f,b);else{var g=
a.$heartsContainer,l=c.listExternalId;g.data("heartsListId",l);d===p&&(d=l);g.data("heartsListId")&&g.removeData("heartsListId");t(a,c.flyoutContent,b);r(a.itemExternalId,!1)}}},n=function(a){return function(){delete e[a.itemExternalId];w(a)}},r=function(a,b){c.trigger("hearts:stateChange",{itemExternalId:a,isHearted:b})},z=function(a,b){a={vendorId:a.vendorId||"listsadoption.hearts.unknown",itemType:a.itemType.toLowerCase(),itemExternalId:a.itemExternalId,isShortenedResponseView:a.isShortenedResponseView};
b&&(a.listExternalId=b);return a},y=function(a){var b=[];a.antiCsrfToken&&(b["anti-csrftoken-a2z"]=a.antiCsrfToken);return b},w=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","true"):(a.$emptyHeart.addClass("aok-hidden"),a.$filledHeart.removeClass("aok-hidden"))},v=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","false"):(a.$filledHeart.addClass("aok-hidden"),a.$emptyHeart.removeClass("aok-hidden"))},t=function(a,b,e){var h=a.$flyout,d=a.$heartsContainer,
g=d.data("timer");g&&clearTimeout(g);h.html(b);b=h.find(".amazon-lists-heart-list-name-template");b.remove();g=a.$flyout.find(".amazon-lists-heart-flyout-text");g.html(g.html().replace("LIST_NAME",b[0].outerHTML));h.removeClass("aok-hidden");b=d.attr("style");d.attr("style","");g=h.outerWidth(!0)+2+1;e=f.getMaxHeartsContainerWidth(d,e);e=Math.min(g,e);h.addClass("aok-hidden");d.attr("style",b);c.animate(d,{width:e},300,"ease-out",function(){h.removeClass("aok-hidden");var b=c.delay(function(){A(a)},
5E3);d.data("timer",b)})},A=function(a){var b=a.$flyout;b.html("");c.animate(a.$heartsContainer,{width:34},300,"ease-out",function(){b.addClass("aok-hidden")})};(function(){var a=document.createElement("style");document.head.appendChild(a);a.sheet.insertRule(".amazon-lists-heart-container.amazon-lists-heart-container{visibility: visible;opacity: 0.95;}",0)})()});"use strict";m.when("A","hearts-logging-utils","hearts-enabled").register("heart-flyout-event-handlers",function(c,f){c.declarative("amazon-lists-heart-add-flyout-action",
"click",function(b){var c=b.data||{};b.$event.stopPropagation();b.$event.preventDefault();f.incrementCount(f.CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER);c.listExternalId&&(n.location.href="/hz/wishlist/ls/"+c.listExternalId)})});"use strict";m.when("A","hearts-enabled").register("content-margin-utils",function(c){return{getMaxHeartsContainerWidth:function(f,b){var h=.8*c.$(n).width(),e=0;f=f.closest(b);1===f.length&&(h=f.width(),e=4);return h-e},getErrorDisplayWidth:function(c,b){c=c.closest(b);return 1===
c.length?c.width():null}}});"use strict";m.when("hearts-enabled").register("hearts-logging-utils",function(){var c=n.ue,f=function(b){c&&c.count(b,(c.count(b)||0)+1)};return{ADD_TO_HEARTS_COUNTER:"addToHeartsList",REMOVE_FROM_HEARTS_COUNTER:"removeFromHeartsList",CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER:"clickAddToHeartsListToast",MOVE_ITEM_COUNTER:"reusablehearts:moveToList",CHANGE_DEFAULT_AND_MOVE_COUNTER:"reusablehearts:changeDefaultAndMove",CREATE_LIST_COUNTER:"reusablehearts:createList",incrementCount:f,
logEventDetails:function(b){if("undefined"!==typeof b){var c=b.offsetX-13;b=b.offsetY-10;if("undefined"!==typeof c&&"undefined"!==typeof b){var e,d;17<c?e="Right":-17>c&&(e="Left");17<b?d="Bottom":-17>b&&(d="Top");e&&f("heartsListClickMargin"+e);d&&(f("heartsListClickMargin"+d),e&&f("heartsListClickMargin"+d+e))}}}}});m.when("A","content-margin-utils","hearts-enabled").register("heart-error-utils",function(c,f){var b=function(b,e){var d=b.$heartsContainer,f=b.$heartsIconContainer,g=b.$flyout;c.animate(d,
e?{height:0,"margin-top":0}:{width:0},300,"ease-out",function(){d.addClass("aok-hidden");d.removeClass("amazon-lists-popup-error-container");d.addClass("amazon-lists-heart-container");d.attr("style","");f.removeClass("aok-hidden");g.html("");g.addClass("amazon-lists-heart-flyout");e&&g.addClass("aok-nowrap");d.removeClass("aok-hidden")})};return{showError:function(h,e,d,m){var g=h.$flyout,l=h.$heartsContainer,n=h.$heartsIconContainer,r,p;d?r=f.getErrorDisplayWidth(l,m):p=f.getMaxHeartsContainerWidth(l,
m);if(null!==r||null!==p)l.addClass("aok-hidden"),n.addClass("aok-hidden"),l.removeClass("amazon-lists-heart-container"),d?l.addClass("amazon-lists-popup-error-container"):l.addClass("amazon-lists-flyout-error-container"),d?(g.width(r),l.height(0),l.css("margin",0),l.css("top",0)):l.width(0),l.removeClass("aok-hidden"),g.html(e),g.removeClass("amazon-lists-heart-flyout"),d&&g.removeClass("aok-nowrap"),g.removeClass("aok-hidden"),g.children().first().width("100%"),d?(e=g.height(),e={height:e,"margin-top":-1*
e}):e={width:Math.min(g.width(),p)},c.animate(l,e,300,"ease-out",function(){g.removeClass("aok-hidden");c.delay(function(){b(h,d)},5E3)})}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,f=m?m("SearchMultiQuestionWidgetAssets",""):l;f.guardFatal?f.guardFatal(k)(f,window):f.execute(function(){k(f,window)})})(function(k,l,m){k.when("rush-dispatcher","rush-util").register("cse-multi-question-actions",function(f,b){return{listeners:{update:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:update-selections"},apply:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");
return c+":multi-question:apply-selections"},remove:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:remove-selections"}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-multi-question-actions").register("cse-question-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={answered:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:answered"},previousAnswered:function(a){d(b.isNotBlank(a),
"questionId must be a non-empty string");return a+":question:previous-answered"},hide:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:hide-question"},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:show-question"}};return{listeners:h,triggers:{updateSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.update(a),e)},applySelections:function(a,e){d(b.isNotBlank(a),
"widget must be a non-empty string");return g(c.listeners.apply(a),e)},removeSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.remove(a),e)},updatePrevious:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(h.previousAnswered(a),e)},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.show(a))},hide:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.hide(a),
{questionToShow:e})}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-question-actions").register("cse-answer-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={deselect:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":answer:deselect"}};return{listeners:h,triggers:{selected:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(c.listeners.answered(a),e)},deselect:function(a,c){d(b.isNotBlank(a),
"questionId must be a non-empty string");d(b.isNotBlank(c),"uuid must be a non-empty string");return g(h.deselect(a),{selectedUuid:c})}}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AEEDiscoveryDeepCheckPromiseAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,k=n?n("PostsSharedFeedAssets","PostsSharedFeedAssets"):m;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,m,n){var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p=function(){function g(f,e){for(var a=0;a<e.length;a++){var b=
e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(f,e,a){e&&g(f.prototype,e);a&&g(f,a);return f}}();l.now("posts-sushi-client").execute(function(g){"undefined"===typeof g&&l.register("posts-sushi-client",function(){var f=["messageId","timestamp"];return function(){function e(a,b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.endpoint=b;this.window=a;this.eventsQueue=[];this.eventsDictionary=
{};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(b){var f=function(){};b=function(){var b=function(){if(a.XDomainRequest){var d=new a.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(a.XMLHttpRequest){d=new a.XMLHttpRequest;
if(!("withCredentials"in d))throw"";return d}return null};return{send:function(a,c){if(c&&a){var h=b();if(!h)throw"";h.open("POST",a,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");h.send(c)}},isSupported:!0}}();var e=function(){return{send:function(b,d){if(b&&d&&!a.navigator.sendBeacon(b,d))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();return{ajaxClient:b,beaconClient:e}}(this);this.compressor=function(a){var b=
function(d){if(d)switch("undefined"===typeof d?"undefined":k(d)){case "number":return!(d!==d||Infinity===d)&&d.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return d.length>a.dictionaryIndex.length;default:return!0}return!1},e=function(d){a.eventsDictionary[d]||(a.eventsDictionary[d]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[d]]=d);return a.eventsDictionary[d]},g=function(a){if(b(a)){var c=0;a instanceof Array?c=2:a instanceof Function?c=null:
a instanceof Object&&(c=1);switch(c){case 0:return e(a);case 2:for(var h=[],c=0;c<a.length;c++)h[c]=g(a[c]);return h;case 1:c={};for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(c[e(h)]=-1===f.indexOf(h)?g(a[h]):a[h]);return c}}return a};return{compressData:g,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}p(e,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&(this.flush(this),this.unloadHandlerCalled=!0)}},
{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(b){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();
return a.send(this.endpoint,b)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(a=0;a<b.length;a++){c=b[a];try{return this.sendWithClient(c)}catch(f){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===this.highPriorityFlushInterval?this.flush(this):
this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||{}).n?this.startHighPriorityQueueTimer():
this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},{key:"isMaxCallsReached",
value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("ACEPostsMetrics:"+a,0===b?0:b||(ue.count("ACEPostsMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a,
this.options)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return c}}]);return e}()})});"use strict";l.now("posts-clamp").execute(function(g){"undefined"===typeof g&&l.register("posts-clamp",function(){return function(f,e){function a(a,b){m.getComputedStyle||(m.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var d=/(-([a-z]){1})/g;"float"==
b&&(b="styleFloat");d.test(b)&&(b=b.replace(d,function(a,b,d){return d.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return m.getComputedStyle(a).getPropertyValue(b)}function b(b){var c=a(f,"line-height");"normal"==c&&(c=1.2*parseInt(a(f,"font-size")));return parseInt(c)*b}function c(a){if(a.lastChild.children&&0<a.lastChild.children.length)return c(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&
a.lastChild.nodeValue!=e.truncationChar)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return c(f)}function g(a,b){if(b&&!(f.clientHeight<=b))for(;f.clientHeight>b;){var c=a.nodeValue.split("");if(1<c.length){do{c.pop();var e=c.join("");a.nodeValue=e}while(/[\s\n,.]+/.test(c[c.length-1])&&1<c.length)}k&&(f.innerHTML=a.nodeValue+k.innerHTML)}}if(f!==n){e=e||{};var l=e.clamp||2,k;e.truncationHTML&&(k=document.createElement("span"),k.innerHTML=e.truncationHTML);l=b(l);g(c(f),l)}}})})});
/* ******** */
(function(p){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,q=n?n("BrandFollowButtonJS",""):l;q.guardFatal?q.guardFatal(p)(q,window):q.execute(function(){p(q,window)})})(function(p,l,n){var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"===typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u=function(){function f(b,a){for(var e=0;e<a.length;e++){var g=a[e];g.enumerable=
g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,a,e){a&&f(b.prototype,a);e&&f(b,e);return b}}();p.when("A").register("brand-follow-constants",function(){return{Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR:"span[class*\x3dbrand-follow-button-container]",Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR:"span[class*\x3dbrand-follow-button]",Brand_FOLLOW_BUTTON_SELECTOR:"button[data-bfid]",Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR:'button[data-bfid][data-showtooltip\x3d"true"]',
BRAND_FOLLOW_STATUS_MAP:"brand-follow-status",BRAND_FOLLOW_STATUS:{FOLLOWING:"following",NOT_FOLLOWING:"not_following",PENDING:"pending",NOT_SIGNED_IN:"not_signed_in",ERROR:"error"},BRAND_FOLLOW_CSRF_KEY:"brand-follow-csrf",BRAND_FOLLOW_CSRF_DATA_KEY:"csrf",BRAND_FOLLOW_LAST_CLICK_EVENT_MAP:"brand-follow-last-click-event-map",BFID_DATA_KEY:"bfid",FOLLOW_STATUS_DATA_KEY:"followstatus",FOLLOW_TEXT_DATA_KEY:"followtext",FOLLOWING_TEXT_DATA_KEY:"followingtext",REQUEST_ID_DATA_KEY:"requestid",PLACEMENT_TYPE_DATA_KEY:"placementtype",
PLACEMENT_SUB_TYPE_DATA_KEY:"placementsubtype",PLACEMENT_ID_DATA_KEY:"placementid",COMPONENT_TYPE_DATA_KEY:"componenttype",COMPONENT_ID_DATA_KEY:"componentid",ELEMENT_TYPE_DATA_KEY:"elementtype",ELEMENT_ID_DATA_KEY:"elementid",TOOLTIP_TEXT_DATA_KEY:"tooltiptext",ARIA_LABEL_KEY:"aria-label",ARIA_LABEL_FOLLOW_DATA_KEY:"arialabelfollow",ARIA_LABEL_FOLLOWING_DATA_KEY:"arialabelfollowing",HIDE_TOOLTIP_KEY:"brand_follow_hide_tooltip",TOOLTIP_DISPLAY_TIME:5E3,TOOLTIP_STATUS_SHOWN:"SHOWN",TOOLTIP_STATUS_NOT_SHOWN:"NOT_SHOWN",
TOOLTIP_STATUS_DISABLED:"DISABLED",FOLLOW_AJAX_TIMEOUT:2E3,FOLLOW_AJAX_RETRIES:2,FOLLOW_ENDPOINT:"/followv2/follow",FOLLOW_ENTITY_TYPE:"brand",FOLLOW_REF_TAG:"bft",FOLLOW_CSM_PREFIX:"BrandFollow",FOLLOW_CSM_SUCCESS:"Success",FOLLOW_CSM_FAIL:"Fail",FOLLOW_CSM_FOLLOW:"Follow",FOLLOW_CSM_UNFOLLOW:"Unfollow",FOLLOW_CSM_GET_FOLLOW_STATUS:"GetFollowStatus",HTTP_GET:"GET",HTTP_POST:"POST",HTTP_DELETE:"DELETE",SIGN_IN_PORTAL:"/ap/signin",AUTH_PORTAL_ASSOC_HANDLE:{"amazon.com":"usflex","amazon.co.uk":"gbflex",
"amazon.de":"deflex","amazon.fr":"frflex","amazon.es":"esflex","amazon.in":"inflex","amazon.it":"itflex","amazon.co.jp":"jpflex","amazon.ca":"caflex"},BREAKPOINTS:{MOBILE:840},SUSHI_ENDPOINT:{gamma:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Gamma.ClientEvents",prod:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Prod.ClientEvents"},EVENT_TYPE:{FOLLOW:"Follow",UNFOLLOW:"Unfollow"}}});"use strict";p.when("A","brand-follow-constants").register("brand-follow-auth-portal-link-builder",
function(f,b){return{signin:function(){var a={"openid.ns":"http://specs.openid.net/auth/2.0","openid.claimed_id":"http://specs.openid.net/auth/2.0/identifier_select","openid.identity":"http://specs.openid.net/auth/2.0/identifier_select","openid.mode":"checkid_setup","openid.return_to":l.location.href,"openid.assoc_handle":b.AUTH_PORTAL_ASSOC_HANDLE[l.location.hostname.replace(/.+?(?=amazon)/,"")]};return b.SIGN_IN_PORTAL+"?"+f.$.param(a)}}});"use strict";p.register("brand-follow-csm-helper",function(){return{incrementCSMCounter:function(f,
b){l.ue&&l.ue.count&&l.ue.count(f,(l.ue.count(f)||0)+1,b)},logBodyBegin:function(f){"function"==typeof uet&&uet("bb",f,{wb:1})},sendCsmMetrics:function(f){"function"==typeof uex&&uex("ld",f,{wb:1})}}});"use strict";p.when("A","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-data-storage-helper",function(f,b,a){var e={set:function(a,k,e){var b={};b[k]=e;f.state(a,b)},get:function(a){return f.state(a)},setFollowStatus:function(a,k){e.set(b.BRAND_FOLLOW_STATUS_MAP,a,k)},getFollowStatus:function(a){var k=
e.get(b.BRAND_FOLLOW_STATUS_MAP);return k===n?n:k[a]},setLastClickEvent:function(a,k){e.set(b.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP,a,k)},getLastClickEvent:function(g){var k=b.FOLLOW_CSM_PREFIX+":dataStorageHelper:getLastClickAction";a.incrementCSMCounter(k);var f=e.get(b.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP);if(f===n)return a.incrementCSMCounter(k+":emptyMap"),n;(g=f[g])||a.incrementCSMCounter(k+":notFoundInMap");return g},setCsrf:function(a){e.set(b.BRAND_FOLLOW_CSRF_KEY,b.BRAND_FOLLOW_CSRF_DATA_KEY,a)},
getCsrf:function(){var a=e.get(b.BRAND_FOLLOW_CSRF_KEY);return a===n?n:a[b.BRAND_FOLLOW_CSRF_DATA_KEY]}};return e});"use strict";p.when("A","brand-follow-constants","brand-follow-data-storage-helper","brand-follow-csm-helper").register("brand-follow-afs-helper",function(f,b,a,e){var g={makeCallToAfs:function(a,g,h,c,d,r){var t=b.FOLLOW_CSM_PREFIX+":"+a;e.incrementCSMCounter(t);(function v(p){e.logBodyBegin(r);f.$.ajax({url:g,type:a,headers:{Accept:"application/json","Content-Type":"application/json"},
data:h,dataType:"json",timeout:b.FOLLOW_AJAX_TIMEOUT,success:function(a,d,k){e.incrementCSMCounter(t+":"+b.FOLLOW_CSM_SUCCESS);e.sendCsmMetrics(r);"function"===typeof c&&c(a,d,k)},error:function(c,g,h){if("timeout"===g&&p)e.incrementCSMCounter(t+":timeout"),v(--p);else{var f=t+":"+b.FOLLOW_CSM_FAIL;e.incrementCSMCounter(f);"timeout"===g&&e.incrementCSMCounter(f+":timeout");e.sendCsmMetrics(r);l.ueLogError&&l.ueLogError({logLevel:"WARN",attribution:"BrandFollowKataComponentAssets",message:"AFS "+a+
" call failed with status "+g+", error thrown: "+h});"function"===typeof d&&d(c,g,h)}}})})(b.FOLLOW_AJAX_RETRIES)},getFollowStatusAndInitCsrf:function(e,f,h,c){g.makeCallToAfs(b.HTTP_GET,b.FOLLOW_ENDPOINT+"/"+e+"_"+b.FOLLOW_ENTITY_TYPE,{ref:b.FOLLOW_REF_TAG},function(d,e,b){d.signedIn?(a.setCsrf(d.csrf),"function"===typeof f&&f(d)):"function"===typeof c&&c()},h,b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_GET_FOLLOW_STATUS)},follow:function(e,f,h,c){var d=b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_FOLLOW,r=function(){g.makeCallToAfs(b.HTTP_POST,
b.FOLLOW_ENDPOINT,JSON.stringify({authenticity_token:a.getCsrf(),entity_id:e,category:b.FOLLOW_ENTITY_TYPE,ref:b.FOLLOW_REF_TAG}),f,h,d)};a.getCsrf()===n?g.getFollowStatusAndInitCsrf(e,r,n,c):r()},unfollow:function(e,m,h){var c=b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_UNFOLLOW,d=function(){g.makeCallToAfs(b.HTTP_DELETE,b.FOLLOW_ENDPOINT+"/"+e+"_"+b.FOLLOW_ENTITY_TYPE+"?"+f.$.param({authenticity_token:a.getCsrf(),ref:b.FOLLOW_REF_TAG}),n,m,h,c)};a.getCsrf()===n?g.getFollowStatusAndInitCsrf(e,d):d()}};
return g});"use strict";p.when("A").register("brand-follow-button-tooltip-factory",function(f){f=f.$;var b=f("\x3cdiv class\x3d'brand-follow-tooltip-root'/\x3e").appendTo("body");return{getOrCreateTooltip:function(){0===b.children().length&&b.append("\x3cdiv role\x3d'tooltip' class\x3d'bf-tooltip' id\x3d'bf-tooltip' aria-hidden\x3d'true' style\x3d'z-index: 299; visibility: hidden; opacity: 0;'\x3e\x3cdiv class\x3d'bf-tooltip-inner'\x3eFollow to see more from this brand on Amazon\x3c/div\x3e\x3cdiv class\x3d'bf-arrow-border'\x3e\x3cdiv class\x3d'bf-arrow'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");
return b.children().first()}}});"use strict";p.when("A").register("brand-follow-button-tooltip-position",function(f){function b(){if(1===f.viewport().zoom)return{top:0,left:0};h||(h=m('\x3cspan id\x3d"bf-tooltip-offset-tracker"\x3e\x3c/span\x3e'),m("body").prepend(h));var c;m.withoutRtl(function(){c=h.offset()});return c}function a(c,a){var e=f.viewport(),k=b(),g,h;m.withoutRtl(function(){g=a.offset();h=c.offset()});g.top-=k.top;g.left-=k.left;h.top-=k.top;h.left-=k.left;var l=a.outerWidth(),p=a.outerHeight(),
n=c.outerWidth(!0),q=c.outerHeight(!0);return{windowWidth:e.width,windowHeight:e.height,windowTop:e.scrollTop,windowLeft:e.scrollLeft,windowRight:e.scrollLeft+e.width,windowBottom:e.scrollTop+e.height,zoomTop:k.top,zoomLeft:k.left,triggerWidth:l+1,triggerHeight:p,triggerTop:g.top-1,triggerLeft:g.left-1,triggerRight:g.left+l+1,triggerBottom:g.top+p+1,triggerVerticalCenter:g.top+p/2,triggerHorizontalCenter:g.left+l/2,popoverWidth:n,popoverHeight:q,popoverTop:h.top,popoverLeft:h.left,popoverRight:h.left+
n,popoverBottom:h.top+q,popoverVerticalCenter:h.top+q/2,popoverHorizontalCenter:h.left+n/2}}function e(c){return c.removeClass("a-arrow-top a-arrow-bottom a-arrow-left a-arrow-right")}function g(c){var a={deltaTop:0},e;a.top=c.triggerVerticalCenter-c.popoverHeight/2;a.top<c.windowTop+15?(e=Math.min(c.windowTop+15,c.triggerTop-15),a.deltaTop=a.top-e,a.top=e):a.top+c.popoverHeight>c.windowBottom-15&&(e=Math.min(15,c.windowBottom-c.triggerBottom+15),a.deltaTop=a.top+c.popoverHeight-(c.windowBottom-e),
a.top=c.windowBottom-e-c.popoverHeight);return a}function k(a){var d={deltaLeft:0},e;d.left=a.triggerHorizontalCenter-a.popoverWidth/2;15>d.left?(e=Math.min(15,a.triggerLeft-15),d.deltaLeft=d.left-e,d.left=e):d.left+a.popoverWidth>a.windowRight-15&&(e=Math.min(15,a.windowRight-a.triggerRight+15),d.deltaLeft=d.left+a.popoverWidth-(a.windowRight-e),d.left=a.windowRight-e-a.popoverWidth);return d}var m=f.$;m(l);var h=null;return{windowCenter:function(c){c=a(c.$popover,c.$trigger);var d={};d.top=(c.windowHeight-
c.popoverHeight)/2;d.left=(c.windowWidth-c.popoverWidth)/2;0>d.top&&(d.top=0);return d},windowTop:function(c){c=a(c.$popover,c.$trigger);var d={top:0};d.left=c.windowWidth/2-c.popoverWidth/2;return d},windowFullWidth:function(a){return{top:0,left:0}},triggerRight:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=g(d);c.left=d.triggerRight;e(b).addClass("a-arrow-right");b.find(".bf-arrow-border").css("top",d.popoverHeight/2+c.deltaTop);return c},triggerLeft:function(c,d){var b=c.$popover;
c=c.$trigger;d||(d=a(b,c));c=g(d);c.left=d.triggerLeft-d.popoverWidth;c.left=0<c.left?c.left:0;e(b).addClass("a-arrow-left");b.find(".bf-arrow-border").css("top",d.popoverHeight/2+c.deltaTop);return c},triggerTop:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=k(d);c.top=d.triggerTop-d.popoverHeight;e(b).addClass("a-arrow-top");b.find(".bf-arrow-border").css("left",d.popoverWidth/2+c.deltaLeft);return c},triggerBottom:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=k(d);c.top=
d.triggerBottom;e(b).addClass("a-arrow-bottom");b.find(".bf-arrow-border").css("left",d.popoverWidth/2+c.deltaLeft);return c},triggerHorizontal:function(c,d){var e=c.$popover,b=c.$trigger;d||(d=a(e,b));return d.triggerLeft-d.windowLeft>d.windowRight-d.triggerRight?this.triggerLeft(c,d):this.triggerRight(c,d)},triggerVertical:function(c,d){var e=c.$popover,b=c.$trigger;d=d?d:a(e,b);return d.triggerTop-d.windowTop>d.popoverHeight+15?this.triggerTop(c,d):this.triggerBottom(c,d)},triggerVerticalAlignLeft:function(c,
d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c={};var k=0,g=0,h=d.windowBottom-d.triggerBottom;c.left=d.triggerLeft;c.top=h>d.popoverHeight?d.triggerBottom+3:d.triggerTop-d.popoverHeight-3;15>c.left?(g=Math.min(15,d.triggerLeft-15),k=c.left-g,c.left=g):c.left+d.popoverWidth>d.windowRight-15&&(g=Math.min(15,d.windowRight-d.triggerRight+15),k=c.left+d.popoverWidth-(d.windowRight-g),c.left=d.windowRight-g-d.popoverWidth);e(b).addClass(h>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");m.withoutRtl(function(){b.find(".bf-arrow-border").css("left",
d.triggerWidth/2+k)});return c},triggerBottomAlignRight:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c={};var k=0,g=0,h=d.windowBottom-d.triggerBottom;c.left=d.triggerRight-d.popoverWidth;c.top=d.triggerBottom+3;15>c.left?(g=Math.max(0,c.left),k=g-c.left,c.left=g):c.left+d.popoverWidth>d.windowRight-15&&(g=Math.min(15,d.windowRight-d.triggerRight+15),k=c.left+d.popoverWidth-(d.windowRight-g),c.left=d.windowRight-g-d.popoverWidth);e(b).addClass(h>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");
m.withoutRtl(function(){b.find(".bf-arrow-border").css("right",d.triggerWidth/2+k)});return c},customPosition:function(c,d){return d.call(this,{popover:c,$popover:c.$popover,$trigger:c.$trigger,measure:a})}}});"use strict";p.when("A","brand-follow-button-tooltip-factory","brand-follow-button-tooltip-position","brand-follow-constants").register("brand-follow-button-tooltip",function(f,b,a,e){var g=f.$;return{show:function(k){var f=b.getOrCreateTooltip(),h=g(k);k=h.data(e.TOOLTIP_TEXT_DATA_KEY);h=a.triggerBottomAlignRight({$popover:f,
$trigger:h});k&&f.find(".bf-tooltip-inner").first().text(k);f.css({top:h.top+"px",left:h.left+6+"px",visibility:"visible",opacity:1,transition:"opacity 0.5s"})},hide:function(){b.getOrCreateTooltip().css({visibility:"hidden",opacity:0,transition:"visibility 0s 0.5s, opacity 0.5s linear"})}}});"use strict";p.register("brand-follow-sushi-client",function(){var f=["messageId","timestamp"];return function(){function b(a,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.endpoint=e;this.window=a;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(e){var b=function(){};e=function(){var e=function(){if(a.XDomainRequest){var c=new a.XDomainRequest;c.onerror=b;c.ontimeout=b;c.onprogress=b;
c.onload=b;c.timeout=0;return c}if(a.XMLHttpRequest){c=new a.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{send:function(a,d){if(d&&a){var b=e();if(!b)throw"";b.open("POST",a,!0);b.setRequestHeader&&b.setRequestHeader("Content-type","text/plain");b.send(d)}},isSupported:!0}}();var f=function(){return{send:function(e,c){if(e&&c&&!a.navigator.sendBeacon(e,c))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();
return{ajaxClient:e,beaconClient:f}}(this);this.compressor=function(a){var e=function(c){if(c)switch("undefined"===typeof c?"undefined":q(c)){case "number":return!(c!==c||Infinity===c)&&c.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return c.length>a.dictionaryIndex.length;default:return!0}return!1},b=function(c){a.eventsDictionary[c]||(a.eventsDictionary[c]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[c]]=c);return a.eventsDictionary[c]},h=function(a){if(e(a)){var d=
0;a instanceof Array?d=2:a instanceof Function?d=null:a instanceof Object&&(d=1);switch(d){case 0:return b(a);case 2:for(var g=[],d=0;d<a.length;d++)g[d]=h(a[d]);return g;case 1:d={};for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&(d[b(g)]=-1===f.indexOf(g)?h(a[g]):a[g]);return d}}return a};return{compressData:h,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}u(b,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&
(this.flush(this),this.unloadHandlerCalled=!0)}},{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(e){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var e=
this.compressor.buildPOSTObject();return a.send(this.endpoint,e)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,e=Array(a),b=0;b<a;b++)e[b]=arguments[b];for(a=0;a<e.length;a++){b=e[a];try{return this.sendWithClient(b)}catch(k){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===
this.highPriorityFlushInterval?this.flush(this):this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>
a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||
{}).n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,g){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(g)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var g=this.stringify(a);return g?(this.encodeEvent(a,g,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},
{key:"isMaxCallsReached",value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("BrandFollowMetrics:"+a,0===b?0:b||(ue.count("BrandFollowMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var g=this.unloadHandlerCalled=
!1;this.options=b||{};this.isValidAPICall(a,this.options)&&(g=this.addEvent(a,this.options));g?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return g}}]);return b}()});"use strict";p.when("A","brand-follow-sushi-client","brand-follow-constants").register("brand-follow-metrics-client",function(f,b,a){var e=f.$;f=document.domain;f=0===f.indexOf("www.amazon")||0===f.indexOf("smile.amazon");var g=new b(l,
a.SUSHI_ENDPOINT[f?"prod":"gamma"]);return{getAttributeMapFromElement:function(b){var g=e(b).data(a.BFID_DATA_KEY),h=e(b).data(a.REQUEST_ID_DATA_KEY),c=e(b).data(a.PLACEMENT_TYPE_DATA_KEY),d=e(b).data(a.PLACEMENT_SUB_TYPE_DATA_KEY),f=e(b).data(a.PLACEMENT_ID_DATA_KEY),l=e(b).data(a.COMPONENT_TYPE_DATA_KEY),p=e(b).data(a.COMPONENT_ID_DATA_KEY),n=e(b).data(a.ELEMENT_TYPE_DATA_KEY);b=e(b).data(a.ELEMENT_ID_DATA_KEY);return{bfid:g,request_id:h,placement_type:c,placement_sub_type:d,placement_id:f,component_type:l,
component_id:p,element_type:n,element_id:b}},buildFollowButtonClickMetricEvent:function(a,b,e){a=this.getAttributeMapFromElement(a);return{bfid:a.bfid,request_id:a.request_id,placement_type:a.placement_type,placement_sub_type:a.placement_sub_type,placement_id:a.placement_id,component_type:a.component_type,component_id:a.component_id,element_type:a.element_type,element_id:a.element_id,event_type:b,tooltip_status:l.brandFollowTooltipStatus,timestamp:Date.now(),event_source:l.location.href,schema_version:1}},
processMetricEvent:function(a,b){g.processEvent(a,b)}}});"use strict";p.when("A","brand-follow-constants","brand-follow-button-tooltip","brand-follow-data-storage-helper").execute("brand-follow-tooltip-helper",function(f,b,a,e){var g=f.$;f.on("brandFollow:followButton:loaded",function(){var e;try{e="true"!==localStorage.getItem(b.HIDE_TOOLTIP_KEY)}catch(d){e=!1}if(e)if(e=g(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR),e.length)if(f.capabilities.mobile||f.capabilities.tablet||screen.width<=b.BREAKPOINTS.MOBILE){var c=
e.get(0);a.show(c);l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_SHOWN;k(c)?m():g(l).scroll(f.throttle(function(){k(c)&&m()},200))}else g(b.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave"),g(b.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave",function(c){"mouseenter"===c.type?(a.show(c.target),l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_SHOWN,localStorage.setItem(b.HIDE_TOOLTIP_KEY,
"true")):"mouseleave"===c.type&&a.hide()});else l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_DISABLED;else l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_NOT_SHOWN});var k=function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(l.innerHeight||document.documentElement.clientHeight)&&a.right<=(l.innerWidth||document.documentElement.clientWidth)},m=function(){localStorage.setItem(b.HIDE_TOOLTIP_KEY,"true");setTimeout(function(){a.hide()},b.TOOLTIP_DISPLAY_TIME)}});"use strict";p.when("A",
"brand-follow-data-storage-helper","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-shared-utils",function(f,b,a,e){var g=f.$;l.BrandFollowSharedUtils={getLastClickAction:function(f){var m=a.FOLLOW_CSM_PREFIX+":sharedUtils:getLastClickAction";e.incrementCSMCounter(m);var h;h=a.FOLLOW_CSM_PREFIX+":sharedUtils:getBFID";e.incrementCSMCounter(h);f?"string"===typeof f?h=f:f instanceof Element&&1===f.nodeType?((f=g(f).find(a.Brand_FOLLOW_BUTTON_SELECTOR).andSelf().filter(a.Brand_FOLLOW_BUTTON_SELECTOR).first().data(a.BFID_DATA_KEY))||
e.incrementCSMCounter(h+":notFound"),h=f):(e.incrementCSMCounter(h+":unknownInput"),h=void 0):h=void 0;h||e.incrementCSMCounter(m+":emptyBFID");(h=b.getLastClickEvent(h))||e.incrementCSMCounter(m+":emptyResponse");return h},isFollowing:function(e){return b.getFollowStatus(e)===a.BRAND_FOLLOW_STATUS.FOLLOWING}}});"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants").register("on-brand-follow-status-change",function(f,b,a){var e=f.$;f.state.bind("brand-follow-status",
function(f,k){for(var m in k)k.hasOwnProperty(m)&&k[m]&&(b.getFollowStatus(m)===a.BRAND_FOLLOW_STATUS.FOLLOWING?e("[data-bfid\x3d'"+m+"']").each(function(){e(this).text(e(this).data(a.FOLLOWING_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))}):e("[data-bfid\x3d'"+m+"']").each(function(){e(this).text(e(this).data(a.FOLLOW_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOW_DATA_KEY))}))})});"use strict";p.when("A").register("brand-follow-button-event-helper",
function(f){return{triggerFollowButtonLoadedEvent:function(){f.trigger("brandFollow:followButton:loaded")},triggerFollowButtonRedirectionEvent:function(b){f.trigger("brandFollow:followButton:redirectToAuthPortal",b)}}});"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-auth-portal-link-builder","brand-follow-button-event-helper","brand-follow-metrics-client","brand-follow-csm-helper").register("brand-follow-button-click-handler",
function(f,b,a,e,g,k,m,h){var c=f.$;f.on("brandFollow:followButton:loaded",function(){c(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click");c(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click",function(d){var f=a.FOLLOW_CSM_PREFIX+":clickHandler";h.incrementCSMCounter(f);var p=c(this).find(a.Brand_FOLLOW_BUTTON_SELECTOR).first(),n=p.data(a.BFID_DATA_KEY);if(n){var q=b.getFollowStatus(n);q||(q=p.data(a.FOLLOW_STATUS_DATA_KEY)?
a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);switch(q){case a.BRAND_FOLLOW_STATUS.FOLLOWING:h.incrementCSMCounter(f+":status:following");b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);b.setLastClickEvent(n,a.EVENT_TYPE.UNFOLLOW);e.unfollow(n,function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);var c=m.buildFollowButtonClickMetricEvent(p,a.EVENT_TYPE.UNFOLLOW,d);m.processMetricEvent(c,{n:1})},function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING)});
break;case a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING:h.incrementCSMCounter(f+":status:not_following");b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);b.setLastClickEvent(n,a.EVENT_TYPE.FOLLOW);e.follow(n,function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING);var c=m.buildFollowButtonClickMetricEvent(p,a.EVENT_TYPE.FOLLOW,d);m.processMetricEvent(c,{n:1})},function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){k.triggerFollowButtonRedirectionEvent(d);var a=g.signin();
l.location.assign(a)});break;case a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN:h.incrementCSMCounter(f+":status:not_signed_in");k.triggerFollowButtonRedirectionEvent(d);f=g.signin();l.location.assign(f);break;case a.BRAND_FOLLOW_STATUS.ERROR:h.incrementCSMCounter(f+":status:error");k.triggerFollowButtonLoadedEvent();break;case a.BRAND_FOLLOW_STATUS.PENDING:h.incrementCSMCounter(f+":status:pending");d.stopPropagation();break;default:h.incrementCSMCounter(f+":status:unknown")}}else h.incrementCSMCounter(f+":emptyBFID")})})});
"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-button-event-helper","on-brand-follow-status-change","ready").register("brand-follow-button-initializer",function(f,b,a,e,g){f.on("brandFollow:followButton:loaded",function(){f.$(a.Brand_FOLLOW_BUTTON_SELECTOR).each(function(){var g=f.$(this),m=g.data(a.BFID_DATA_KEY);if(m!==n){var h=b.getFollowStatus(m);h===n||h===a.BRAND_FOLLOW_STATUS.ERROR?(g=g.data(a.FOLLOW_STATUS_DATA_KEY),
""!==g?b.setFollowStatus(m,g?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING):(b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.PENDING),e.getFollowStatusAndInitCsrf(m,function(c){b.setFollowStatus(m,c.isFollowing?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.ERROR)},function(){b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN)}))):h===a.BRAND_FOLLOW_STATUS.FOLLOWING?(g.text(g.data(a.FOLLOWING_TEXT_DATA_KEY)),
g.attr(a.ARIA_LABEL_KEY,g.data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))):(g.text(g.data(a.FOLLOW_TEXT_DATA_KEY)),g.attr(a.ARIA_LABEL_KEY,g.data(a.ARIA_LABEL_FOLLOW_DATA_KEY)))}})});g.triggerFollowButtonLoadedEvent()});"use strict";p.when("A","brand-follow-constants","brand-follow-button-event-helper","ready").execute("brand-follow-button-mutation-observer",function(f,b,a){var e=f.$;(function(){var g=l.MutationObserver||l.WebKitMutationObserver||l.MozMutationObserver;g!==n&&(new g(function(g,f){var h;f=!1;
for(var c=0;c<g.length;c++){h=g[c];if("childList"!==h.type)break;h=h.addedNodes;for(var d,l=0;l<h.length;l++)if(d=h[l],0!==e(d).find(b.Brand_FOLLOW_BUTTON_SELECTOR).length){f=!0;break}if(f){a.triggerFollowButtonLoadedEvent();break}}})).observe(document,{childList:!0,subtree:!0})})()})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("BrandFollowKataComponentAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,f=l?l("PostsSearchWidgetAssets",""):h;f.guardFatal?f.guardFatal(g)(f,window):f.execute(function(){g(f,window)})})(function(g,h,l){g.when("A","rush-framework","related-posts-search-metrics-client","related-posts-carousel-view","af","ready").register("related-posts-search-widget",function(f,h,k,c){h.registerComponent("related-posts-search-widget","related-posts-search-widget",function(b){var e=f.$(b.elem());b={sushiEndpoint:b.prop("sushiEndpoint"),
requestId:b.prop("requestId"),pageType:b.prop("pageType"),pageId:b.prop("pageId"),appMode:b.prop("appMode"),platform:b.prop("platform"),mShopBuild:b.prop("mShopBuild")};e=new c(e);b=new k(e,b);e.initEvents(b);e.$carousel.length||b.emitCsmCounter("PostsCarouselWidgetExpectedButNotLoaded")})});"use strict";g.when("A","a-carousel-framework","posts-carousel-linkto","af","ready").register("related-posts-carousel-view",function(f,g,k){function c(a){this.$carouselContainer=a.find(".posts-feed-preview-wrapper");
this.$carousel=a.find(".related-posts-carousel-container")}var b=f.$,e=!1;c.prototype.getCarouselElement=function(){return this.$carousel};c.prototype.initEvents=function(a){var d=this;g.onInit("posts-feed-preview-carousel",function(c){e?a.emitCsmCounter("PostsCarouselWidgetAlreadyInitialized"):c?(a.emitCsmCounter("PostsCarouselWidgetInitialized"),d.auiCarousel=c,f.on(f.constants.BROWSER_EVENTS.SCROLL,function(){a.handleUserScroll()}),c.onChange("px",function(){a.handleUserScroll()}),b(".posts-feed-preview-card").click(function(d){a.handleUserClick(d)}),
h.addEventListener("beforeunload",function(){a.handleUnload()}),h.addEventListener("pagehide",function(){a.handleUnload()}),h.addEventListener("DOMContentLoaded",function(){a.handlePageLoad()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&a.handleUnload();"visible"===document.visibilityState&&a.handlePageLoad()}),d.$carouselContainer.delegate("[data-target-href]","click",function(a){var e=a.target,c=d.$carouselContainer.get(0),m=b(a.target).attr("data-target-href");
if(null===m||m===l)m=b(a.target).closest("[data-target-href]").attr("data-target-href");for(;e&&e!==c;){if(e.hasAttribute("ignore-data-target-href"))return!1;e=e.parentNode}if("string"===typeof m&&m.length)return k.execute(m),!1}),d.$carouselContainer.delegate(".posts-feed-preview-link","mousedown keydown",function(a){switch(a.type){case "mousedown":b(a.target).addClass("posts-feed-preview-link-remove-outline");break;case "keydown":b(a.target).removeClass("posts-feed-preview-link-remove-outline")}}),
e=!0,a.initialize()):a.emitCsmCounter("PostsCarouselWidgetCarouselNotFound")})};return c});"use strict";g.when("A","posts-sushi-client","related-posts-measure","af","ready").register("related-posts-search-metrics-client",function(f,g,k){function c(a,d){this.carouselView=a;this.metricConfig=d;this.state={postVisibilityEventStates:{},postImpressionMetadata:{},carouselOnScreen:!1,unloadHandled:!1};this.sushiClient=new g(h,this.metricConfig.sushiEndpoint)}var b={PostImpression:2,PostPartialImpression:1,
CarouselOffScreen:1,PostClick:1,PostView:2,PostOffScreen:1,PageEgress:1},e=f.$;c.prototype.initialize=function(){this.isCarouselOutOfViewPort()||this.checkPostsClientSideMetrics()};c.prototype.handlePageLoad=function(){this.carouselInstance=this.generateInstanceId();this.requestInstance=this.generateInstanceId()};c.prototype.generateInstanceId=function(){return Math.round(Math.floor(999999*Math.random())+1)};c.prototype.emitCsmCounter=function(a){this.sushiClient.ueCount(a)};c.prototype.decorateMetricPayload=
function(a){a.request_id=this.metricConfig.requestId;a.request_instance=this.requestInstance;a.carousel_instance=this.carouselInstance;a.page_type=this.metricConfig.pageType;a.page_id=this.metricConfig.pageId;a.app_mode=this.metricConfig.appMode;a.app_build="1.0";a.platform=this.metricConfig.platform;this.metricConfig.mShopBuild&&(a.mshop_build=this.metricConfig.mShopBuild);a.event_version=b[a.event_type];return a};c.prototype.handleUserScroll=function(){this.checkPostsClientSideMetrics()};c.prototype.getOriginPx=
function(a){a=e("#"+a);var d=a.offset();return a.length?d.left+","+d.top:"-1,-1"};c.prototype.postOriginsAreInvalid=function(){for(var a=e(".posts-feed-preview-card"),d=null,b=!1,c=-1,f=this.carouselView.getCarouselElement().is(":visible"),h=0;h<a.length;h++){var g=e(a[h]),k=g.attr("id");if(g=g.is(":visible")){-1===c&&(c=h);k=this.getOriginPx(k);if(d){if(a=k===d)this.emitCsmCounter("PostsCarouselInvalidOrigins:LastVisible:"+(b?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CurVisible:"+
(g?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CarouselVisible:"+(f?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:FirstVisibleIndex:"+c);return a}d=k;b=g}}this.emitCsmCounter("PostsCarouselInvalidOrigins:NoCardsVisible:"+(d?"false":"true"));this.emitCsmCounter("PostsCarouselInvalidOrigins:CardsInvis:CarouselVisible:"+(f?"true":"false"));return!0};c.prototype.checkPostsClientSideMetrics=function(){if(this.postOriginsAreInvalid()){this.emitCsmCounter("PostsCarouselInvalidOrigins");
var a=!this.isCarouselOutOfViewPort();this.emitCsmCounter("PostsCarouselInvalidOrigins:OnScreen:"+(a?"true":"false"))}else this.checkPostImpressionMetrics(),this.checkPostCarouselOffScreenMetric()};c.prototype.checkPostImpressionMetrics=function(){for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),f=b.attr("data-post-rank");this.checkPostViewMetric(c,f);this.checkPostOffScreenMetric(c,f);b.is(":visible")&&(this.checkPostPartialImpressionMetric(c,f),this.checkPostImpressionMetric(c,
f))}};c.prototype.postEventEmittedSinceComingOnScreen=function(a,d){return this.state.postVisibilityEventStates[d]?this.state.postVisibilityEventStates[d][a]||!1:!1};c.prototype.shouldEmitMetrics=function(a,d){return!this.postEventEmittedSinceComingOnScreen(a,d)};c.prototype.checkPostCarouselOffScreenMetric=function(){if(this.state.carouselOnScreen&&this.isCarouselOutOfViewPort()){this.state.carouselOnScreen=!1;var a=this.decorateMetricPayload({event_type:"CarouselOffScreen"});this.sushiClient.processEvent(a,
{n:1});this.carouselInstance=this.generateInstanceId()}};c.prototype.checkPostPartialImpressionMetric=function(a,d){this.shouldEmitMetrics("PostPartialImpression",a)&&this.isPartialImpression(a)&&(this.state.carouselOnScreen=!0,d=this.buildPostEvent("PostPartialImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostPartialImpression"))};c.prototype.isPartialImpression=function(a){a=k.getElementViewportExtents(a);return(a.isTopInViewport||a.isBottomInViewport)&&(a.isLeftInViewport||
a.isRightInViewport)};c.prototype.checkPostViewMetric=function(a,d){if(this.shouldEmitMetrics("PostView",a)&&this.isView(a)){d=this.buildPostEvent("PostView",a,d);var b=f.now()-this.state.postVisibilityEventStates[a].PostImpression;0<b&&36E5>b&&(d.dwell_time_ms=Math.round(b));this.sushiClient.processEvent(d,{n:1});this.updateImpressionState(a,"PostView")}};c.prototype.isView=function(a){if(this.postEventEmittedSinceComingOnScreen("PostImpression",a))return a=k.getElementViewportAreas(a),a.viewportArea<
.5*a.totalArea};c.prototype.checkPostImpressionMetric=function(a,d){this.shouldEmitMetrics("PostImpression",a)&&this.isImpression(a)&&(d=this.buildPostEvent("PostImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostImpression",f.now()))};c.prototype.isImpression=function(a){a=k.getElementViewportAreas(a);return a.viewportArea>=.5*a.totalArea};c.prototype.checkPostOffScreenMetric=function(a,d){this.isPostOutOfViewPort(a)&&this.postEventEmittedSinceComingOnScreen("PostPartialImpression",
a)&&(d=this.buildPostEvent("PostOffScreen",a,d),this.sushiClient.processEvent(d,{n:1}),this.state.postVisibilityEventStates[a].PostImpression=!1,this.state.postVisibilityEventStates[a].PostPartialImpression=!1,this.state.postVisibilityEventStates[a].PostView=!1)};c.prototype.isPostOutOfViewPort=function(a){return!f.onScreen(e("#"+a),0)};c.prototype.isCarouselOutOfViewPort=function(){return!f.onScreen(this.carouselView.getCarouselElement(),0)};c.prototype.buildPostEvent=function(a,d,b){return this.decorateMetricPayload({event_type:a,
post_id:d.split("Posts-")[1],rank:parseInt(b,10),origin_px:this.getOriginPx(d)})};c.prototype.updateImpressionState=function(a,d,b){var c=this.state.postVisibilityEventStates[a]||{};c[d]="undefined"===typeof b?!0:b;this.state.postVisibilityEventStates[a]=c};c.prototype.handleUserClick=function(a){var d=e(a.target),b=d.attr("data-post-id"),c=d.attr("data-post-rank"),f=d.attr("data-click-target");if(null===b||null===c||b===l||c===l)c=d.closest(".posts-feed-preview-card"),b=c.attr("id"),c=c.attr("data-post-rank");
if(null===f||f===l)f=d.closest("[data-click-target]"),f=null!==f&&f!==l?f.attr("data-click-target"):"UNKNOWN";var g=this.buildPostEvent("PostClick",b,c);g.click_target=f;"FollowButton"===f&&h.BrandFollowSharedUtils&&e.isFunction(h.BrandFollowSharedUtils.getLastClickAction)&&(g.click_action=h.BrandFollowSharedUtils.getLastClickAction(a.target));this.sushiClient.processEvent(g,{n:1});a=d.closest("[data-click-action]");null!==a&&a!==l&&"Egress"===a.attr("data-click-action")&&"FollowButton"!==f&&(a=a.attr("data-target-destination")||
"NONE",this.emitPageEgressMetric(b,c,a,f))};c.prototype.emitPageEgressMetric=function(a,d,b,c){a=this.buildPostEvent("PageEgress",a,d);a.destination_type=b;a.click_target=c;this.sushiClient.processEvent(a,{n:1})};c.prototype.handleUnload=function(){if(!this.state.unloadHandled){this.state.unloadHandled=!0;for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),b=b.attr("data-post-rank");if(this.postEventEmittedSinceComingOnScreen("PostImpression",c)&&this.shouldEmitMetrics("PostView",
c)){var b=this.buildPostEvent("PostView",c,b),g=f.now()-this.state.postVisibilityEventStates[c].PostImpression;0<g&&36E5>g&&(b.dwell_time_ms=Math.round(g));this.sushiClient.processEvent(b,{n:1});this.updateImpressionState(c,"PostView")}}this.state.carouselOnScreen&&(a=this.decorateMetricPayload({event_type:"CarouselOffScreen"}),this.sushiClient.processEvent(a,{n:1}),this.state.carouselOnScreen=!1);this.state.carouselInstance=this.generateInstanceId();this.sushiClient.onBeforeUnload()}};return c});
"use strict";g.when("A","af","ready").register("related-posts-measure",function(f){function g(){var b=c(h),e=b.scrollTop(),a=b.scrollLeft(),d=h.innerHeight||b.height(),b=h.innerWidth||b.width();return{top:e,left:a,height:d,width:b,bottom:e+d,right:a+b}}function k(b){var c=b.offset(),a=c.top,c=c.left,d=b.height();b=b.width();return{top:a,left:c,height:d,width:b,bottom:a+d,right:c+b}}var c=f.$;return{getElementViewportAreas:function(b){b=c("#"+b);var e=g(),a=e.width*e.height,d=k(b),h=d.width*d.height,
e=Math.max(Math.min(d.right,e.right)-Math.max(d.left,e.left),0)*Math.max(Math.min(d.bottom,e.bottom)-Math.max(d.top,e.top),0);return b.length&&f.onScreen(b,0)?{totalArea:h,viewportArea:e,totalViewportArea:a}:{totalArea:1,viewportArea:0,totalViewportArea:a}},getElementViewportExtents:function(b){b=c("#"+b);var e=g(),a=k(b);return b.length&&f.onScreen(b,0)?{isTopInViewport:a.top>=e.top&&a.top<e.bottom,isBottomInViewport:a.bottom>=e.top&&a.bottom<e.bottom,isLeftInViewport:a.left>=e.left&&a.left<e.right,
isRightInViewport:a.right>=e.left&&a.right<e.right}:{isTopInViewport:!1,isBottomInViewport:!1,isLeftInViewport:!1,isRightInViewport:!1}},getViewportCoordinates:g,getElementLocation:k}});g.when("af","ready").register("posts-carousel-linkto",function(){return{execute:function(f){h.location.href=f}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PrelaunchAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("INSearchCXAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MoreLikeThisAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchCountdownAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
