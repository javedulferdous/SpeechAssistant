(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("GuidedNavigationWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,g){"use strict";e.when("A","s-url-parameters").register("inscx-guided-navigation-controller",function(c,h){function e(){var a=[],b;for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(d[b]);return a}function g(){var a=document.getElementById("guided-apply");0<e().length?c.show(a):c.hide(a)}function p(a,
b,c){var e,d="",d=c.map(function(a){return a.key}).join("|");return a.split(",").map(function(a){return(e=a.split(":")[0])&&e===b?e+":"+d:a}).join(",")}function k(a){var b=l(document.getElementById(a.key));d[a.key]=a;b.addClass("inscx-guided-search-recommendation-pill-clicked")}function m(a){var b=l(document.getElementById(a.key));d[a.key]=null;b.removeClass("inscx-guided-search-recommendation-pill-clicked")}function q(a){d[a.key]?m(a):k(a)}function n(){var a;var b,c=e(),d=c[c.length-1];d?(b=h.parseQueryString(d.searchUrl),
!0===d.isMultiSelect&&(a=h.getParamValue(b,"rh"),a=p(a,d.shortId,c),h.setParamValue(b,"rh",a))):b=h.parseQueryString(f.location.search);a=h.paramsToString(b,!0);document.getElementById("guided-apply").href=a;f.location.search=a}var l=c.$,d={};c.declarative("guided-recommendation-apply","click",n);c.declarative("guided-recommendation-click","click",function(a){a=a.data;var b;a&&(!1===a.isMultiSelect?(b=e(),b.forEach(function(a){m(a)}),k(a),n()):(q(a),g()))})})});
/* ******** */
(function(e){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,c=f?f("SearchFollowButtonAssets",""):d;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,d,f){e.when("jQuery","rush-framework","af").register("rdx-follow-button",function(c,e){function k(a){d.ue&&d.ue.tag&&d.ue.count&&(d.ue.tag(a,"searchEntityFollow"),d.ue.count(a+"Count",1))}function l(a){a.removeClass("aok-hidden")}e.registerComponent("rdx-follow-button","rdx-follow-button",
function(a){function e(a){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find(".rdx-follow-button-button").attr("aria-label",t);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){p(a)});l(b)}function m(a){b.addClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(n);b.find(".rdx-follow-button-button").attr("aria-label",
u);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-follow-icon").addClass("rdx-follow-button-following-icon");b.unbind().click(function(){v(a)});l(b)}function w(){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){"undefined"!==typeof sessionStorage&&(sessionStorage.followKey=
h);d.location.href=x});l(b)}function p(a){c.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",url:y,data:JSON.stringify({authenticity_token:a,entity_id:h,category:q,ref:z}),success:function(){m(a)},error:function(){e();r.removeClass("aok-hidden");k("EntityFollowError")}})}function v(a){c.ajax({type:"DELETE",url:A+"\x26"+c.param({authenticity_token:a}),data:{},success:function(){e(a)},error:function(){m(a);r.removeClass("aok-hidden");k("EntityUnfollowError")}})}function B(){c.ajax({type:"GET",
url:C,data:{},success:function(a){if(a.isFollowable)if(a.signedIn)if(a.isFollowing)m(a.csrf);else{var b;b=h;var c;c=/rdx-entity-follow=([^#&]+)/.exec(d.location.search);(c&&2===c.length?c[1]:f)!==b||"undefined"===typeof sessionStorage?b=!1:(c=sessionStorage.followKey,sessionStorage.removeItem("followKey"),b=c===b);b?p(a.csrf):e(a.csrf)}else w()},error:function(){k("EntityFollowStatusError")}})}var b=c(a.elem()).find(".rdx-follow-button"),r=c(a.elem()).find(".rdx-follow-button-alert"),h=a.prop("entityID"),
q=a.prop("entityType"),C=a.prop("followStatusUrl"),y=a.prop("followUrl"),A=a.prop("unfollowUrl"),x=a.prop("flexSignInUrl"),g=a.prop("followText"),n=a.prop("followingText"),t=a.prop("followARIALabel"),u=a.prop("followingARIALabel"),z=a.prop("followReftag");"undefined"!==typeof h&&"undefined"!==typeof q&&("undefined"===typeof g&&(g="Follow"),"undefined"===typeof n&&(n="Following"),B())})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("SearchEntityWidgetAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("jQuery","a-truncate").register("rdx-entity-paragraph-common",function(c,b){return{rdxEntityLineHeightOverride:function(a){c(a.elem()).find(".rdx-entity-paragraph").each(function(a,b){a=c(b);b=a.attr("data-a-max-rows");a.css({"line-height":"1.5em","max-height":1.5*b+"em"})})},rdxEntityParagraphARIATruncate:function(a){a=
c(a.elem());a.find(".a-truncate-full").attr("aria-hidden","true");a.find(".a-truncate-cut").attr("aria-hidden","false")},rdxEntityUpdateParagraphTruncate:function(a){a=c(a.elem()).find(".a-truncate");b.get(a).update()}}});"use strict";b.when("rush-framework","rdx-entity-paragraph-common").register("rdx-entity-paragraph-truncate",function(c,b){c.registerComponent("rdx-entity-paragraph-truncate","rdx-entity-paragraph-truncate",function(a){b.rdxEntityLineHeightOverride(a);b.rdxEntityParagraphARIATruncate(a);
b.rdxEntityUpdateParagraphTruncate(a)})})});
/* ******** */
(function(n){var e=window.AmazonUIPageJS||window.P,p=e._namespace||e.attributeErrors,a=p?p("SearchWebAskAndAssistWidgetAssets",""):e;a.guardFatal?a.guardFatal(n)(a,window):a.execute(function(){n(a,window)})})(function(n,e,p){n.when("A","rush-framework","s-ana-widget-tracking-utils","s-ana-url-utils","ready").register("s-ana-widget",function(a,c,d,k){function m(a,b){var k=q.extend({},a);b&&b.forEach(function(b){delete k[b]});return k}function l(a,b,r){r=q.extend({},r);var f;r.n="n:"+a.join(",n:");
for(f in b)b.hasOwnProperty(f)&&(r[f]=b[f].join("|"));return k.buildSearchQueryString(r)}function u(a,b,k){var f={};f.ref=b.refMaker;f.rh=k;f.k=a.k;f.dm="true";f.dc="true";return f}function n(a,b,d,f){var c=k.getQueryParameters(e.location.href),g=k.getSearchParametersMap(c);f=m(g,f);a=l(b,a,f);return location.origin+"/s"+d.percolateParameters+"\x26"+q.param(u(c,d,a))}function p(a,b,k){for(var f=0,d={},g,c,h,m=[],f=0;f<b.length;f++)for(h in c=k[f],g=b[f],g=a[g],g=g.answersList,c=g[c],c=c.refinements,
c)d.hasOwnProperty(h)?(m=d[h].concat(c[h]),d[h]=m.filter(function(b,a){return m.indexOf(b)===a})):d[h]=c[h];return d}function y(a,b,c,f,m){return function(g){g=q(g.currentTarget);var l=b.currentQuestionId,h;h=g.data("answer-index");var e=f[l].answersList[h].nextQuestionId;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswer");b.questionPath.push(l);b.answerIndexList.push(h);h=d.incrementAndFetchQuestionIndex(b);d.updateSelectedAnswer(a,g);if(!e){g=b.questions;l=b.metadata;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess");
d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefresh");d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectedAnswerCount",h);h=p(g,b.questionPath,b.answerIndexList);var e=b.questionPath,u=b.answerIndexList,x=l.scopedNodeList,t,v,w;for(t=0;t<e.length;t++)w=e[t],v=u[t],w=g[w],v=w.answersList[v].additionalScope,x=x.concat(v);g=n(h,x,l,m);b.questionPath.pop();b.answerIndexList.pop();d.decrementAndFetchQuestionIndex(b);k.navigateTo(g);return g}b.currentQuestionId=e;d.renderNextQuestion(a,
h,c,f,l,e);d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess")}}function z(a,b,k,c){return function(){var m=b.currentQuestionId,g=b.questionPath.pop(),l=a.find(".s-ana-answer-button-list[data-question-id\x3d"+g+"]"),h=b.answerIndexList.pop(),l=l.children(".s-ana-answer[data-answer-index\x3d"+h+"]");d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBack");h=d.decrementAndFetchQuestionIndex(b);d.renderNextQuestion(a,h,k,c,m,g);b.currentQuestionId=g;d.updateSelectedAnswer(a,
l);d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBackSuccess")}}var q=a.$;c.registerComponent("s-ana-widget","s-ana-widget",function(a){a=q(a.elem());var b=a.data("widget-data")||{},k=b.metadata,c=b.questions;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoad");b.currentIndex=b.currentIndex?b.currentIndex:0;b.currentQuestionId=k.firstQuestionId;b.questionPath=b.questionPath?b.questionPath:[];b.answerIndexList=b.answerIndexList?b.answerIndexList:[];k&&0<a.find(".s-ana-answer").length&&
(a.find(".s-ana-answer").click(y(a,b,k,c,k.refinementBinList)),a.find(".s-ana-back-button").click(z(a,b,k,c)));d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoadSuccess")});return{cleanUpSearchParameterMap:m,buildSearchQueryString:l,buildQueryParameters:u,createAnswerClickHandler:y,createBackButtonHandler:z,buildUrl:n}});n.when("R","rush-router-pattern-parser","s-ana-widget-tracking-utils").register("s-ana-url-utils",function(a,c,d){return{getQueryParameters:function(a){a=(a||"").split("?");
a=1<a.length?a.slice(1).join("?"):a[0];return c.parseQueryString(a)},getSearchParametersMap:function(a){var c={},d,e;if(a&&a.rh)for(a=a.rh.split(","),e=0;e<a.length;e++)d=a[e].split(":"),c[d[0]]=d[1];return c},buildSearchQueryString:function(a){var c,d=[];for(c in a)"n"===c?d.push(a[c]):d.push(c+":"+a[c]);return d.join(",")},navigateTo:function(c){var e={};e.url=c;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefreshSuccess");a.to(e)}}});n.when("A","ready").register("s-ana-widget-tracking-utils",
function(){return{updateSelectedAnswer:function(a,c){a.find(".s-ana-answer").removeClass("s-ana-answer-button-selected");c.addClass("s-ana-answer-button-selected")},renderNextQuestion:function(a,c,d,e,m,l){m=a.find(".s-ana-answer-button-list[data-question-id\x3d"+m+"]");e=e[l];l=a.find(".s-ana-answer-button-list[data-question-id\x3d"+l+"]");m.addClass("s-ana-hidden-element");a.find(".s-ana-question").addClass("s-ana-hidden-element");a.find(".s-ana-question-index").text(d.indexList[c]);a.find(".s-ana-question-text").text(e.questionString);
a.find(".s-ana-question").removeClass("s-ana-hidden-element");0===c?a.find(".s-ana-back-button").addClass("aok-hidden"):a.find(".s-ana-back-button").removeClass("aok-hidden");l.removeClass("s-ana-hidden-element")},updateClientSideMetricCounter:function(a,c){c=c?c:1;e.ue&&e.ue.count&&e.ue.count(a,(e.ue.count(a)||0)+c)},incrementAndFetchQuestionIndex:function(a){var c=a.currentIndex;c++;return a.currentIndex=c},decrementAndFetchQuestionIndex:function(a){var c=a.currentIndex;c--;return a.currentIndex=
c}}})});
/* ******** */
(function(e){var n=window.AmazonUIPageJS||window.P,r=n._namespace||n.attributeErrors,c=r?r("SearchWebKnowledgeWidgetAssets",""):n;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,n,r){e.when("A","s-web-application-controller","rush-util","tab-nav-util").register("tab-nav-ajax",function(c,d,e,h){return{ajaxTabClick:function(c){var b=c.selectedTab.$tab;c=b.attr("id");var a=b.attr("data-ajaxUrl"),l=b.closest("[data-widgetId]").attr("data-widgetId"),b=b.closest("[data-uuid]").attr("data-uuid"),
m="",g=!1;e.isNullOrUndefined(l)||2!==l.split(":").length||(m=l.split(":")[0]);l={uuid:b,ajaxUrl:a};(g=h.checkCriticalDataMissing(l))?h.logMissingCriticalData(l,m):(h.logMetric("tab_navigation:"+m),d.requestPartialContent(a,{suffix:":"+b+":"+c})["catch"](function(){h.logMetric("tab_navigation:"+m+":ajax_call_failure")}))}}});e.when("A","jQuery","rush-framework","s-actions","rush-util","tab-nav-util","tab-nav-ajax","a-carousel-framework").register("know-tab-nav",function(c,d,e,h,k,b,a,l){e.registerComponent("s-tab-navigation-component",
"s-tab-navigation-component",function(m){var g=m.elem(),e=d(g),g=e.closest("[data-uuid]").attr("data-uuid"),t=e.closest("[data-widgetId]").attr("data-widgetId"),f=b.getMatchingElement(e,".a-carousel-container"),p=e.closest(".a-tab-content"),n=b.getActiveTabHeight(e),u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]"),r="",x=!1,v=p.attr("id"),w=p.closest(".a-tab-container").find(".know-tab-nav-tabs-set").find("li.know-tab-nav-tab-header#"+b.escapeSpecialHashCharacter(v)),q=b.getMatchingElement(f,
"[id*\x3dtab-navigation-asin-header]");k.isNullOrUndefined(t)||2!==t.split(":").length||(r=t.split(":")[0]);t={uuid:g,carousel:f,tabContent:p,initialActiveTabHeight:n};(x=b.checkCriticalComponentDataInvalid(t))?b.logMissingCriticalData(t,r):(m.on(h.LOAD_SEARCH_PAGE+":"+g+":"+v,function(){u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]");!p.is(".a-hidden")&&0<u.length&&(f.addClass("aok-hidden"),u.height(n),u.html('\x3cdiv class\x3d"a-spinner-wrapper know-tab-nav-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e'))}),
m.on(h.RESULT_ITEM_READY+":"+g+":"+v,function(a){var c=p.attr("id"),d=document.createElement("div");k.isNullOrUndefined(a)||k.isBlank(c)?b.logMetric("tab_navigation:"+r+":ajax_asin_invalid"):(a=a.item.html,d.innerHTML=a,d=d.firstElementChild.getAttribute("data-asin"),k.isNotBlank(d)&&!p.is(".a-hidden")&&(d="#tab-navigation-replace-"+b.escapeSpecialHashCharacter(c)+"-"+d,d=e.find(d)[0],k.isNullOrUndefined(d)||(a=b.getAsinContent(a),0<a.length&&(m.replace(d,a[0].innerHTML),k.isNullOrUndefined(u)||0!==
p.find("[id*\x3dtab-navigation-replace]").length||(u.remove(),f.removeClass("aok-hidden"),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+b.escapeSpecialHashCharacter(c)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(c)),0<q.length?f.height()-q.outerHeight(!0):f.height()),l.createAll(),l.initializeAll())))))}),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+
b.escapeSpecialHashCharacter(v)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(v)),0<q.length?f.height()-q.outerHeight(!0):f.height()),b.setLineClampClass(b.getMatchingElement(f,"#tab-navigation-tab-link-line-clamp-"+b.escapeSpecialHashCharacter(v))),c.on("a:tabs:"+g+":"+p.data("a-name")+":select",a.ajaxTabClick),w.removeClass("know-tab-nav-disable-tab"),w.addClass("know-tab-nav-enable-tab"))})});e.when("jQuery","rush-util").register("tab-nav-util",
function(c,d){function e(a,b){var d=c(a),g;b.forEach(function(a){g=d.find(a);0<g.length&&(d=g)});return d.children()}function h(a){return(a.match(/(\s|^)s-line-clamp-\d+(?!\S)\b/g)||[]).map(c.trim)}function k(a){c(a).removeClass(function(a,b){return h(b).join(" ")}).addClass("s-line-clamp-2")}function b(a){var b=n.ue;b&&b.tag&&b.tag(a)}return{getAsinContent:function(a){a=e(a,[".template\\\x3dSEARCH_RESULTS",".s-latency-cf-section",".s-card-container"]);a.find(".a-spacing-medium").removeClass("a-spacing-medium");
a.find('[class*\x3d"status-badge"]').remove();k(a.find("[class*\x3ds-line-clamp]"));return a},findLineClampClass:h,getActiveTabHeight:function(a){a=c(a).closest(".a-tab-container").find(".a-tab-content").not(".a-hidden").height();return d.isNullOrUndefined(a)?400:a},escapeSpecialHashCharacter:function(a){return a.replace(/#/g,"\\#")},logMetric:b,checkCriticalDataMissing:function(a){for(var b in a)if(d.isNullOrUndefined(a[b])||d.isBlank(a[b]))return!0;return!1},checkCriticalComponentDataInvalid:function(a){return d.isNullOrUndefined(a.uuid)||
d.isBlank(a.uuid)||0>=c(a.carousel).length||0>=c(a.tabContent).length||!d.isNumber(a.initialActiveTabHeight)?!0:!1},logMissingCriticalData:function(a,c){for(var e in a)(d.isNullOrUndefined(a[e])||d.isBlank(a[e]))&&b("tab-navigation:"+c+":"+e)},getMatchingElement:function(a,b){return c(a).find(b)},setElementHeight:function(a,b){c(a).height(b)},setLineClampClass:k,setCSSPropertyForObject:function(a,b,c){d.isNullOrUndefined(c)||a.css(b,c)}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,f=n?n("SearchWebSpecBasedShoppingWidgetAssets",""):l;f.guardFatal?f.guardFatal(k)(f,window):f.execute(function(){k(f,window)})})(function(k,l,n){k.when("A","R","rush-router-pattern-parser").register("s-sbs-widget-common",function(f,p,k){function e(b){l.ue&&l.ue.count&&l.ue.count(b,(l.ue.count(b)||0)+1)}var h=f.$;return{getQueryParameters:function(){var b=(l.location.href||"").split("?"),b=1<b.length?b.slice(1).join("?"):
b[0];return k.parseQueryString(b)},getActiveRefinementBinIds:function(b){return b.find(".sbs-refinement-bin").map(function(b,a){return h(a).data("refinement-bin-id")}).get()},getSearchParametersMap:function(b){var c={},a,d;if(b.rh!==n)for(b=b.rh.split(","),d=0;d<b.length;d++)a=b[d].split(":"),c[a[0]]=a[1];return c},getNodeListString:function(b){var c="",a,d;for(d=0;d<b.length;d++)a=b[d],""!==c&&(c+=","),c=c+"n:"+a;return c},buildSearchQueryString:function(b){var c,a="";for(c in b)""!==a&&"n"!==c&&
(a+=","),"nodeScope"===c?a+=b[c]:"n"!==c&&(a=a+c+":"+b[c]);return a},setQueryParameter:function(b,c,a,d){b=(b.data("widget")||{}).metadata;b!==n&&b.hasOwnProperty(a)&&(a=b[a],a!==n&&""!==a&&(c[d]=a));return c},addLinkParameters:function(b,c){(b=(b.data("widget")||{}).linkParams)&&h.each(b,function(b,d){c[b]=d});return c},showWidget:function(b){b.find(".sbs-widget-expander-content").removeClass("aok-hidden");b.find(".sbs-spinner-container").addClass("aok-hidden")},hideWidget:function(b){b.find(".sbs-widget-expander-content").addClass("aok-hidden");
b.find(".sbs-spinner-container").removeClass("aok-hidden");b.find(".sbs-no-results-alert").addClass("aok-hidden");b.find(".sbs-feedback-post-submit-container").addClass("aok-hidden")},toggleMainUI:function(b){e("HCXEffortlessShoppingSBSToggleButtonClick");f.capabilities.ios?b.find(".sbs-widget-expander-content").toggle():b.find(".sbs-widget-expander-content").slideToggle(200);b.find(".sbs-expander-icon").toggleClass("sbs-expander-hidden sbs-expander-shown")},scrollToTarget:function(b){b&&h(b).closest(".sbs-refinement-bin").scrollTop(b.offsetTop-
b.parentElement.offsetTop+5)},updatePopularRefinementsVisibility:function(b){var c=0,a=b.find("input:checked").length;b.find(".sbs-featured-refinement").toggleClass("aok-hidden",0<a);0===a&&(b.find("div.sbs-featured-refinement").each(function(b,a){"none"!==h(a).css("display")&&c++}),b.find(".sbs-refinement-list-divider").toggleClass("aok-hidden",0===c))},incrementClientSideMetricCounter:e,navigateTo:function(b){var c={};c.url=b;p.to(c)}}});k.when("A","s-sbs-eligible-refinements").register("s-sbs-widget-tagging",
function(f,p){function k(b){return h.map(b.split(" "),function(b){if(-1<b.indexOf("sbs-refinement-tag-"))return b.substring(19)})[0]}function e(b,c,a){var d=(a.data("widget")||{}).tagLabels,e;d!==n&&1<d.length&&-1<d.indexOf(b)&&d.forEach(function(d){d===b?a.find(".sbs-refinement-container.sbs-refinement-tag-"+d).removeClass("sbs-tagging-hidden"):!1===c?a.find(".sbs-refinement-container.sbs-refinement-tag-"+d).each(function(b,r){a.find(r).addClass("sbs-tagging-hidden");e=h(r).find(":input");!0===e.prop("checked")&&
(e.prop("checked",!1),p.updateStateRefinementsMap(a,r.id,h(r).closest(".sbs-refinement-bin").attr("id"),!1,"checkbox"===r.type))}):a.find(".sbs-refinement-container.sbs-refinement-tag-"+d).removeClass("sbs-tagging-hidden")})}var h=f.$;return{getTag:k,updateTaggedRefinementsVisibility:e,verifyTaggedSelectedRefinements:function(b){var c=(b.data("widget")||{}).tagLabels,a=[];c!==n&&1<c.length&&(c.forEach(function(c){0<b.find(".sbs-refinement-tag-"+c).find("input:checked").length&&a.push(c)}),b.find(".sbs-tag-button").removeClass("a-button-selected"),
a.length===c.length||0===a.length?b.find(".sbs-tag-button-all").addClass("a-button-selected"):a.forEach(function(a){e(a,!1,b);b.find(".sbs-tag-button-"+a).addClass("a-button-selected")}))},taggedRefinement:function(b,c,a){var d=(a.data("widget")||{}).tagLabels,f,k;d!==n&&1<d.length&&(d=h(b).find(":input"),f=!0,k=0,"checkbox"===d.prop("type")&&(f=h(b).find(":input").prop("checked")),f?0===a.find(".sbs-tagging-hidden").length&&(a.find(".sbs-tag-button").removeClass("a-button-selected"),a.find(".sbs-tag-button-"+
c).addClass("a-button-selected"),e(c,!1,a)):(a.find(".sbs-refinement-container.sbs-refinement-tag-"+c).each(function(a,c){!0===h(c).find(":input").prop("checked")&&h(c).data("refinement-id")!==h(b).data("refinement-id")&&k++}),0===k&&(a.find(".sbs-tag-button").removeClass("a-button-selected"),a.find(".sbs-tag-button-all").addClass("a-button-selected"),e(c,!0,a))))},tagButtonHandler:function(b,c){"sbs-tag-button-all"===h(b).find(":input").data("button-id")?c.find("div[class*\x3d'sbs-refinement-tag']").removeClass("sbs-tagging-hidden"):
e(k(b.className),!1,c)}}});k.when("A","s-sbs-widget-common").register("s-sbs-widget-feedback",function(f,p){function l(b,a){var d=(a.data("widget")||{}).metadata;d!==n&&d.hasOwnProperty("formsUrl")&&(d=d.formsUrl,a.find(".sbs-feedback-form").find("input[name\x3d__token_]").val(b.csrfToken.token),a.find(".sbs-feedback-selected-refinements-text-area").find("textarea").val(JSON.stringify(p.getQueryParameters())),f.post(d,{paramsFormat:"string",params:a.find(".sbs-feedback-form").serialize(),success:function(){},
error:function(b,a,c){k.log("Status: "+a+";Error: "+c,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function e(b){var a=(b.data("widget")||{}).metadata;a!==n&&a.hasOwnProperty("sbsWidgetFormUrl")&&(a=a.sbsWidgetFormUrl,f.get(a,{accepts:"application/json",success:function(a){a.hasOwnProperty("csrfToken")&&a.csrfToken.hasOwnProperty("token")&&l(a,b)},error:function(b,a,c){k.log("Status: "+a+";Error: "+c,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function h(c,a){a.find(".sbs-heading-container").find(".sbs-heading-text").each(function(a,
c){b(c).addClass("sbs-feedback-hidden aok-hidden")});a.find(".sbs-heading-block").find("[headingId\x3d"+c+"]").removeClass("sbs-feedback-hidden aok-hidden");a.find(".sbs-free-text-container").removeClass("sbs-feedback-hidden aok-hidden");a.find(".sbs-feedback-form-submit-button-container").removeClass("sbs-feedback-hidden aok-hidden")}var b=f.$;return{sendFeedbackToForm:l,submitFeedback:e,toggleFeedbackContent:h,createFeedbackQuestionButtonClickHandler:function(c){return function(a){var e=b(a.currentTarget);
a.preventDefault();c.find(".sbs-radio-button-container").find("input:checked").each(function(a,c){b(c).prop("checked",!1)});a=e.find(":input");a.prop("checked",!0);a=a.attr("id");h(a,c)}},createFeedbackSubmitButtonClickHandler:function(b){return function(a){a.preventDefault();b.find(".sbs-feedback-form").fadeOut("slow",function(){b.find(".sbs-feedback-post-submit-container").removeClass("sbs-feedback-hidden aok-hidden").css("display","none").fadeIn("slow");b.find(".sbs-feedback-post-submit-content").focus()});
e(b)}}}});k.register("s-sbs-afs-template",function(){return{getAFSRequestTemplate:function(f){f=f.data("activeRefinementBinsArray")||[];return{pageNumber:"1",asinCountPerPage:"10",filters:[{runLevel:"1",filterId:"sbs",filterType:"refinementsearch",filterParameters:{OptionalMap:{size:"1","include-refinements":"true","feature-set-definitions":'{"REFINEMENTS": {"deliveryDayRefinement": "enabledWithoutBinning","enableRefinementDiscriminators": "false","enableSmartRefinements": "true"}}',"active-refinement-ids":JSON.stringify(f)}}}]}}}});
k.when("A","s-sbs-widget-common","s-sbs-afs-template","ready").register("s-sbs-eligible-refinements",function(f,p,l){function e(b,a,c){a=a.toString();b.hasOwnProperty(c)?-1===b[c].indexOf(a)&&(b[c]+="|"+a):b[c]=a;return b}function h(b,a,c){var e;a=a.toString();b.hasOwnProperty(c)&&(e=b[c].split("|"),a=e.indexOf(a),-1<a&&(e.splice(a,1),0<e.length?b[c]=e.join("|"):delete b[c]));return b}function b(b,a){var c=[],e=!1,d=q(a),g;if(0!==Object.keys(b).length)for(a=0;a<b.values.length;a++)"0"===b.values[a].notAvailable&&
c.push(b.values[a].id);if(d.hasClass("sbs-featured-refinement-bin")){if(d.find(".sbs-button-list-item").addClass("sbs-ineligible-hidden"),d.find(".a-button-selected").closest(".sbs-refinement-container").each(function(b,a){g=q(a).find(":input").data("refinement-id").toString();-1===c.indexOf(g)&&c.push(g)}),0!==c.length)for(a=0;a<c.length;a++)d.find("[data-refinement-id\x3d'"+c[a]+"']").closest(".sbs-button-list-item").removeClass("sbs-ineligible-hidden")}else if(d.find(".sbs-refinement-container").addClass("sbs-ineligible-hidden"),
d.find("input:checked").closest(".sbs-refinement-container").each(function(a,b){g=q(b).data("refinement-id").toString();-1===c.indexOf(g)&&c.push(g)}),0!==c.length)for(a=0;a<c.length;a++)d.find("[data-refinement-id\x3d'"+c[a]+"']").removeClass("sbs-ineligible-hidden");0<d.find(".sbs-refinement-container").not(".sbs-ineligible-hidden").length&&(e=!0);return e}function c(a,c,e){var d,f=a.additionalFilterData["*value*"].sbs.refinements,g,h,m;e.find(".sbs-refinement-bin").each(function(a,u){m=q(u).data("refinement-bin-id");
if(m!==c&&"n"!==m){g=!1;h={};for(d=0;d<f.length;d++)if(f[d].shortId===m){h=f[d];break}(g=b(h,u))?q(u).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):q(u).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")}p.updatePopularRefinementsVisibility(q(u))})}function a(a){var b={};Object.keys(a).sort().forEach(function(c){b[c]=a[c]});delete b["feature-set-definitions"];return JSON.stringify(b)}function d(a){var b=(a.data("widget")||{}).scopedBrowseNodeIds;a=a.data("stateRefinementsMap");
var c="";b&&(c=b.join(","));c&&a&&a.n?-1===b.indexOf(a.n)&&(c+=","+a.n):a&&a.n&&(c=a.n);return c}function n(a){var b=a.data("stateRefinementsMap"),c=(a.data("widget")||{}).metadata,e=d(a),f,g;if(c&&b&&e){f=l.getAFSRequestTemplate(a);a=f.filters[0].filterParameters.OptionalMap;a["search-alias"]=c.searchAlias;a["session-id"]=c.sessionId;a["marketplace-id"]=c.marketplace;a.store=c.store;a.keywords=c.marketplaceDefaultLanguageKeyword.toLowerCase();a.node=e;for(g in b)"n"!==g&&(c=b[g].split("|"),c.sort(),
a[g]=c.join("|"));f.filters[0].filterParameters.OptionalMap=a}return f}function t(b,e,d,f){var h,g={},n=d.data("cachedCalls");p.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCall");n&&(g=n);q.ajax({type:"POST",url:"/gp/sfx/get-filtered-asins.html",dataType:"json",timeout:3E3,xhrFields:{withCredentials:!0},data:{afsRequest:JSON.stringify(b)},success:function(f){f.hasOwnProperty("additionalFilterData")&&f.additionalFilterData&&0<f.additionalFilterData["*value*"].sbs.refinements.length&&
(h=a(b.filters[0].filterParameters.OptionalMap),g[h]=f,d.data("cachedCalls",g),c(f,e,d),p.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCallSuccess"))},error:function(a,b,c){p.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCallFailed");k.log("Status: "+b+";Error: "+c,"SBS_WIDGET_ELIGIBLE_REFINEMENTS_CALL_ERROR")},complete:function(){p.showWidget(d);p.scrollToTarget(f)}})}var q=f.$;return{addRefinement:e,removeRefinement:h,updateRefinementsDisplayedInBin:b,
processResponse:c,buildKey:a,buildNodeList:d,getAFSRequest:n,callAFS:t,updateStateRefinementsMap:function(a,b,c,d,f){var g=a.data("stateRefinementsMap");g&&(f?g=d?e(g,b,c):h(g,b,c):(g.hasOwnProperty(c)&&delete g[c],d&&(g=e(g,b,c))),a.data("stateRefinementsMap",g))},updateEligibleRefinements:function(b,d,e){var h,k=n(d),g=d.data("cachedCalls"),l;k?(g&&(h=a(k.filters[0].filterParameters.OptionalMap),h in g&&(l=g[h])),l?f.delay(function(){c(l,b,d);p.showWidget(d);p.scrollToTarget(e)},150):t(k,b,d,e)):
p.showWidget(d)}}});k.when("A","rush-framework","a-button","s-sbs-widget-common","s-sbs-widget-tagging","s-sbs-widget-feedback","s-sbs-eligible-refinements","ready").register("s-sbs-widget",function(f,k,l,e,h,b,c){function a(a){0<a.find(".sbs-refinement-bin input:checked").length||0<a.find(".sbs-featured-refinement-button.a-button-selected").length?l(a.find(".sbs-reset-filters-button")).enable():l(a.find(".sbs-reset-filters-button")).disable()}function d(a,b){(a=(a.data("widget")||{}).scopedBrowseNodeIds)||
(a=[]);a=e.getNodeListString(a);b.n&&(a+=",n:"+b.n);return a}function v(a,b){for(var c in b)"n"!==c&&(""===b[c]?delete a[c]:a[c]=b[c]);return a}function t(a){var b={},c;a.find(".sbs-refinement-bin").each(function(a,c){var d=m(c).data("refinement-bin-id");a=m(c).find("input:checked").closest(".sbs-refinement-container");b[d]="";0<a.length&&m(a).each(function(a,c){""===b[d]?b[d]=m(c).data("refinement-id"):(new RegExp("(^"+m(c).data("refinement-id")+")|(\\|"+m(c).data("refinement-id")+")")).test(b[d])||
(b[d]+="|"+m(c).data("refinement-id"))})});c=a.find(".sbs-featured-refinement-bin");0<c.length&&(c=c[0],a=a.find(".sbs-featured-refinement-button.a-button-selected"),0<a.length&&(b[m(c).data("refinement-bin-id")]=m(a[0]).find(":input").data("refinement-id")));return b}function q(a){var b,c,f;b=e.getQueryParameters();c=e.getSearchParametersMap(b);f=t(a);c=v(c,f);c.nodeScope=d(a,f);b.rh=e.buildSearchQueryString(c);b=e.setQueryParameter(a,b,"keyword","k");b=e.setQueryParameter(a,b,"refMarker","ref");
b=e.setQueryParameter(a,b,"persistId","pid");b.page=1;b=e.addLinkParameters(a,b);return location.origin+location.pathname+"?"+m.param(b)}function r(a){return function(b){var d=b.selectedButton.$button[0];b=m(a.find(".sbs-featured-refinement-bin")[0]).data("refinement-bin-id");d=m(d).find(":input").data("refinement-id");e.hideWidget(a);a.find(".sbs-refinement-bin").scrollTop(0);"n"===b&&(a.find(".sbs-refinement-bin input:checked").each(function(a,b){m(b).prop("checked",!1)}),a.data("stateRefinementsMap",
{}));c.updateStateRefinementsMap(a,d,b,!0,!1);b=q(a);e.navigateTo(b)}}function z(b){return function(c){h.tagButtonHandler(c.selectedButton.$button[0],b);a(b)}}function A(a){a.find(".sbs-tag-button").removeClass("a-button-selected");a.find(".sbs-tag-button-all").addClass("a-button-selected");a.find(".sbs-active-checkmark").addClass("aok-hidden");a.find(".sbs-featured-refinement-button").removeClass("a-button-selected");a.find(".sbs-refinement-bin input:checked").each(function(b,c){a.find(c).prop("checked",
!1)});a.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden");a.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-button-list-item.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-refinement-bin-cell").removeClass("aok-hidden");a.find(".sbs-reset-filters-button").addClass("a-button-disabled");a.find(".sbs-featured-refinement").removeClass("aok-hidden");a.find(".sbs-refinement-bin").scrollTop(0);
a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden");a.data("stateRefinementsMap",{})}function w(a){return function(){A(a)}}function x(a){return function(b){var d=m(b.currentTarget);b=d.closest(".sbs-refinement-container");var f=b.data("refinement-id"),g=b.closest(".sbs-refinement-bin"),k=g.data("refinement-bin-id"),l=d.prop("checked"),d="checkbox"===d.prop("type"),n;e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClick");
e.hideWidget(a);d?g.find("[data-refinement-id\x3d'"+f+"']").each(function(a,b){m(b).find(":input").prop("checked",l);!m(b).hasClass("sbs-featured-refinement")&&l&&(n=m(b).closest("li").get(0))}):(g.find("input:checked").each(function(a,b){m(b).prop("checked",!1)}),g.find("[data-refinement-id\x3d'"+f+"']").each(function(a,b){m(b).find(":input").prop("checked",!0);m(b).hasClass("sbs-featured-refinement")||(n=m(b).closest("li").get(0))}));if(g=h.getTag(b.attr("class")))h.taggedRefinement(b,g,a),n||(n=
b.closest("li").get(0));c.updateStateRefinementsMap(a,f,k,l,d);b=q(a);e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClickSuccess");e.navigateTo(b)}}function g(a){return function(){e.toggleMainUI(a)}}function y(b){var d=!1,f=(b.data("widget")||{}).metadata,g=e.getQueryParameters(),g=e.getSearchParametersMap(g),k=e.getActiveRefinementBinIds(b),l,n;e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoad");b.find(".sbs-refinement-container").each(function(a,
b){l=m(b).find(".a-link-normal");0<l.length&&l.attr("tabIndex","-1")});g.n&&(n=b.find(".sbs-featured-refinement-button.a-button-selected"),0<n.length&&g.n===n.first().find(":input").data("refinement-id").toString()||delete g.n);b.data("stateRefinementsMap",g);b.data("activeRefinementBinsArray",k);a(b);f&&(d="true"===f.hasSelectedRefinements.toLowerCase());d?(e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinements"),h.verifyTaggedSelectedRefinements(b),c.updateEligibleRefinements("",
b),e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinementsSuccess")):(b.find(".sbs-tag-button-all").addClass("a-button-selected"),e.showWidget(b));e.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadSuccess")}var m=f.$;k.registerComponent("s-sbs-widget","s-sbs-widget",function(a){var c=m(a.elem()),d=c.data("widget")||{},e=d.linkParams,h=d.metadata,k=d.tagLabels;d.scopedBrowseNodeIds&&e&&h&&0<c.find(".es-sbs-top-slot-widget").length&&((k===n||2>k.length)&&
c.find(".sbs-tags-section").hide(),y(c),c.find(".sbs-refinement-container").delegate("input","change",x(c)),c.find(".sbs-reset-filters-button").click(w(c)),c.find(".sbs-widget-heading").click(g(c)),f.on("a:button-group:featuredRefinementButtons:toggle",r(c)),f.on("a:button-group:tagButtons:toggle",z(c)),c.find(".sbs-feedback-form").submit(b.createFeedbackSubmitButtonClickHandler(c)),c.find(".sbs-yes-button").click(b.createFeedbackQuestionButtonClickHandler(c)),c.find(".sbs-no-button").click(b.createFeedbackQuestionButtonClickHandler(c)),
a.teardown=function(){f.off("a:button-group:featuredRefinementButtons:toggle");f.off("a:button-group:tagButtons:toggle")})});return{updateResetFiltersButtonState:a,createFeaturedRefinementButtonToggleHandler:r,createResetFiltersClickHandler:w,createRefinementClickHandler:x,updateNodeScopeWithSelectedSubtype:d,addSelectedRefinements:v,getSelectedRefinements:t,buildNavigationUrl:q,createWidgetExpanderClickHandler:g,onWidgetLoad:y}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchWebFeedbackWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("LoomSponsoredProductsAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("A","rush-framework").register("sp-sponsored-result",function(c,b){function e(a){a=a.elem();a=c.$(a).find(".s-image");if(0<a.length){a=(a=a.is(":visible"))?0:1;var b=f("sp_hidden")||0;f("sp_hidden",b+a);a=f("sp_delivered")||0;f("sp_delivered",a+1)}}var f=d.ue&&d.ue.count;f&&
b.registerComponent("sp-sponsored-result","sp-sponsored-result",e)})});
/* ******** */
(function(l){var t=window.AmazonUIPageJS||window.P,v=t._namespace||t.attributeErrors,d=v?v("QuantitySelectorAssets",""):t;d.guardFatal?d.guardFatal(l)(d,window):d.execute(function(){l(d,window)})})(function(l,t,v){l.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(d,a,c){function e(){b&&b.enableCheckoutCompatibility&&g()}function g(){d.$('span[id^\x3d"'+a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){d.$(this)[0].style.color="#B12704"});
d.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=d.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),d.$('button[id^\x3d"'+a+'-announce"]').each(function(){d.$(this)[0].style.paddingRight="17px"}))})}function u(a){function b(a){return d.$(a+"-announce")}return function(a){return new b(a)}}function k(b){var e=function(a,e){var c=a+"-extradata",g=b.state(c);if(null==e)return c=b.state(a),e=d.$.extend({},c,g);g=d.$.extend({},g,e);b.state(c,
g)};e.parse=function(){for(var e=d.$(a.getQsWidgetGenericStateSelectorQuery()),f=a.getQsWidgetConfigurationId(""),q=0;q<e.length;q++){var g=e[q].getAttribute("data-a-state");if((g=c.parseJSON(g).key)&&g.substring(0,f.length)==f){var p=b.state(g);p&&p.id||(p=c.parseJSON(e[q].innerHTML),b.state(g,p))}}};e.replace=function(a,e){a+="-extradata";"function"===typeof b.state.replace?b.state.replace(a,e):b.state(a,e)};return{state:e}}var b;l.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",
function(a,b){l.register("QuantitySelectorAUIDeps",function(){return{aUtil:c,aState:a.object,aButton:b.object,initialize:e}})});(function(){for(var e=d.$(a.getQsWidgetGenericStateSelectorQuery()),g=a.getQsWidgetGlobalConfigurationId(),h=0;h<e.length;h++){var f=e[h].getAttribute("data-a-state");if((f=c.parseJSON(f).key)&&f.substring(0,g.length)==g){b=c.parseJSON(e[h].innerHTML);break}}})();(function(){b&&b.enableCheckoutCompatibility?(l.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",
function(a){l.register("QuantitySelectorAUIDeps_AState",function(){return{object:k(a)}})}),l.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",function(a){l.register("QuantitySelectorAUIDeps_AButton",function(){return{object:u(a)}})}),d.on("checkout:afterReload",function(){d.trigger(a.getQsWidgetEventInitialize(),!1)})):(l.when("a-state").execute("qsAUIDeps-a-state-register",function(a){l.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),l.when("a-button").execute("qsAUIDeps-a-button-register",
function(a){l.register("QuantitySelectorAUIDeps_AButton",function(){return{object:a}})}));d.on("a:pageUpdate ready",function(){d.trigger(a.getQsWidgetEventInitialize(),!1)})})();e()});"use strict";l.when("A").register("QuantitySelectorConstants",function(d){var a={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},c={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},
getQsWidgetEventLoadStatesAndInitialize:function(){return"quantity-selector-widget:loadStatesAndInitialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},
getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},
getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},getQsWidgetConfigurationId:function(a){return"qs-widget-configuration-"+a},getQsWidgetStateScriptSelectorQuery:function(a){return"script[data-a-state*\x3d'qs-widget-configuration-"+
a+"'], "+("div[data-a-state*\x3d'qs-widget-configuration-"+a+"']")},getQsWidgetGenericStateSelectorQuery:function(){return"script[type\x3d'a-state'], div[data-a-state]"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetDivSelectorQueryForWidgetContainers:function(){return"div[id^\x3dqs-widget-container-]"},getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetDivSelectorQueryForSpinners:function(){return"div[id^\x3dqs-widget-spinner-]"},getQsWidgetCheckboxId:function(a){return"qs-widget-checkbox-"+
a},getQsWidgetInputSelectorQueryForCheckboxes:function(){return"input[id^\x3dqs-widget-checkbox-]"},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetDropdownItemId:function(a,
c){return"qs-widget-dropdown-item-"+c+"-"+a},getQsWidgetDropdownItemAriaId:function(a,c){return"qs-widget-dropdown-item-aria-"+c+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,c){return"qs-widget-dropdown-item-quantitySuffix-"+c+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+
a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+
a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryId:function(){return"qs-widget-summary-"},getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+
a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+
a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},
getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+a},getQsWidgetBottomSheetHeightConfig:function(){return a},
getQsWidgetBottomSheetDropDownScrollFactor:function(){return c}}});"use strict";l.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(d,a,c){function e(d){return(d=a.getQsWidgetConfiguration(d).metadata)?c.aUtil.parseJSON(d):null}return{isWeblabEnabled:function(a,c,d){a:{if((a=e(a))&&a.weblabs)for(var b=0;b<a.weblabs.length;b++){var n=a.weblabs[b];if(n.weblabName==c){c=n.treatment;break a}}c=null}return null==c?d:"T1"==c?!0:!1},getMetaConfiguration:function(a,
c){return(a=e(a))?a[c]:null}}});"use strict";l.when("A","QuantitySelectorAUIDeps","QuantitySelectorConstants").register("QuantitySelectorMetrics",function(d,a,c){function e(a){t.ue&&t.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}return{incrementInitializeCount:function(a,c){var d="QuantitySelector-Initialize",d=a?d+"-Success-Count":d+"-Failed-Count";e(c?d+":mobile":d+":desktop")},incrementInvalidIdCount:function(){e("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(a,c,d){a="QuantitySelector-TriggerAction-"+
a;a=c?a+"-Success-Count":a+"-Failed-Count";e(d?a+":mobile":a+":desktop")},incrementChangeLinkCount:function(){e("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(a){var c="QuantitySelector-ShowPopup-Count";e(a?c+":mobile":c+":desktop")},logLatencyMetric:function(a,c){},logCsm:function(d,e){var k=a.aState.state(c.getQsWidgetConfigurationId(d));if(k&&(d="mobile"==k.viewType.toLowerCase()?"mob":"dsk",(k=k.qsCsm)&&k.almBrandRefMarker&&k.pageRefMarker)){var b;a:{b=k.sellingUomDimension;
var n=k.pricingUomDimension;if(b&&n){var p="s";switch(b){case "count":p+="u";break;case "weight":p+="w";break;default:b=void 0;break a}p+="p";switch(n){case "count":p+="u";break;case "weight":p+="w";break;default:b=void 0;break a}b=p}else b=void 0}b&&(e={pageType:k.pageType,subPageType:k.subPageType,pageTypeId:k.pageTypeId,storeName:k.tabId,programRegionId:k.programRegionId,hitType:k.hitType,refMarker:k.almBrandRefMarker+"_"+d+"_"+k.pageRefMarker+"_qs_"+e+"_"+b},t.ue&&t.ue.event&&ue.event(e,"quantityselector_attr",
"quantityselector.QuantityselectorMetrics.1"))}}}});"use strict";l.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(d,a,c,e){function g(b){var c=e.aState.state(a.getQsWidgetConfigurationId(b));c&&c.id||(u(b),c=e.aState.state(a.getQsWidgetConfigurationId(b)));return c}function u(b){var c=a.getQsWidgetConfigurationId(b);b=a.getQsWidgetStateScriptSelectorQuery(b);b=d.$(b).first();b=e.aUtil.parseJSON(b.html());e.aState.state(c,
b)}function k(){for(var b=[],c=d.$(a.getQsWidgetGenericStateSelectorQuery()),p=a.getQsWidgetConfigurationId(""),h=0;h<c.length;h++){var f=c[h].getAttribute("data-a-state");(f=e.aUtil.parseJSON(f).key)&&f.substring(0,p.length)==p&&(f=f.substring(p.length),b.push(f))}return b}d.on(a.getQsWidgetEventTriggerAction(),function(b,n,p){var h=g(b),f=h.selectedId,q=h.selectedQuantity;n||(n=h.actionId);var w="mobile"==h.viewType.toLowerCase(),r=!1;if(f)for(var k=0;k<h.qsItems.length;k++)if(h.qsItems[k].id==
f){var r=e.aUtil.parseJSON(h.staticData),u=e.aUtil.parseJSON(h.qsItems[k].data),r=d.$.extend({qsUID:b,tunneledData:p},r,u);d.trigger(a.getQsWidgetEventAction(n),r);c.incrementTriggerActionCount(n,!0,w);r=!0}q&&(r=e.aUtil.parseJSON(h.staticData),r=d.$.extend({qsUID:b,tunneledData:p},r,{quantity:q}),d.trigger(a.getQsWidgetEventAction(n),r),c.incrementTriggerActionCount(n,!0,w),r=!0);r||c.incrementTriggerActionCount(n,!1,w)});d.on(a.getQsWidgetEventConfigureList(),function(a){"function"===typeof a&&
a(k())});d.on(a.getQsWidgetEventConfigureGet(),function(a,c){a=g(a);"function"===typeof c&&c(a)});d.on(a.getQsWidgetEventConfigureSet(),function(b,c){e.aState.state.replace(a.getQsWidgetConfigurationId(b),c);d.trigger(a.getQsWidgetEventInitialize(),!0,b)});return{getQsWidgetConfiguration:g,loadQsWidgetStateConfiguration:u,saveOriginalSettings:function(b){var c=a.getQsWidgetConfigurationId(b)+"-original",d=e.aState.state(c);d&&d.id||(b=g(b),e.aState.state(c,b))},loadOriginalSettings:function(b){var c=
a.getQsWidgetConfigurationId(b)+"-original";(c=e.aState.state(c))&&c.id&&e.aState.state.replace(a.getQsWidgetConfigurationId(b),c)},setEnable:function(b,c){c={enable:c};e.aState.state(a.getQsWidgetConfigurationId(b),c)},setInitialized:function(b){e.aState.state(a.getQsWidgetConfigurationId(b),{initialized:!0})},setSelectedId:function(b,c){c={selectedId:c,selectedQuantity:null};e.aState.state(a.getQsWidgetConfigurationId(b),c)},setSelectedQuantity:function(b,c){c={selectedId:null,selectedQuantity:c};
e.aState.state(a.getQsWidgetConfigurationId(b),c)},setData:function(b,c){e.aState.state(a.getQsWidgetConfigurationId(b),c)},getQsUIDs:k}});"use strict";l.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps").register("QuantitySelectorUtils",function(d,a,c,e){function g(a){return"true"==a||1==a?!0:!1}function u(m){return"mobile"==a.getQsWidgetConfiguration(m).viewType.toLowerCase()?!0:!1}function k(m){m=a.getQsWidgetConfiguration(m);return g(m.showConfirmationView)?
!0:!1}function b(m){m=a.getQsWidgetConfiguration(m);return g(m.allowZeroQuantity)?!0:!1}function n(a){var b=d.$("#"+c.getQsWidgetQuantityChangelinkId(a));a=d.$("#"+c.getQsWidgetTextInputUpdateButtonId(a));b.attr("draggable","false");a.attr("draggable","false")}function p(a){return d.$("#"+c.getQsWidgetContainerId(a))}function h(a){return e.aButton("#"+c.getQsWidgetButtonId(a))}function f(a){return d.$("#"+c.getQsWidgetDropdownContainerId(a))}function q(a){return d.$("#"+c.getQsWidgetDropdownViewId(a))}
function w(a){return d.$("#"+c.getQsWidgetDropdownUnorderedListId(a))}function r(a){return d.$("#"+c.getQsWidgetTextInputId(a))}function l(m,b){m=a.getQsWidgetConfiguration(m);for(var c=0;c<m.qsItems.length;c++)if(m.qsItems[c].id==b)return m.qsItems[c]}function t(m){var c=a.getQsWidgetConfiguration(m).selectedId;return c?c:A(m)}function A(m){m=a.getQsWidgetConfiguration(m);if(m.qsItems)for(var c=0;c<m.qsItems.length;c++)if(g(m.qsItems[c].isSelected))return m.qsItems[c].id}function y(m){return a.getQsWidgetConfiguration(m).selectedQuantity}
function v(a,c){return(b(a)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(c)}function B(a){if(a){var b=d.$("#"+c.getQsWidgetCheckboxId(a)),f=p(a);a=d.$("#"+c.getQsWidgetSpinnerId(a))}else b=d.$(c.getQsWidgetInputSelectorQueryForCheckboxes()),a=d.$(c.getQsWidgetDivSelectorQueryForSpinners()),f=d.$(c.getQsWidgetDivSelectorQueryForWidgetContainers());b.remove();a.removeClass("qs-widget-visible");a.addClass("qs-widget-hidden");f.removeClass("qs-widget-hidden")}var x=[];return{isInitialized:function(m){return(m=
a.getQsWidgetConfiguration(m))?m.initialized:!1},isMobile:u,isQsWidgetEnabled:function(m){m=a.getQsWidgetConfiguration(m);return m.hasOwnProperty("enable")?g(m.enable):!0},isConfirmationViewEnabled:k,isAllowZeroQuantityEnabled:b,isInitialViewDropdown:function(m){return a.getQsWidgetConfiguration(m).initialView.toLowerCase()==c.getQsWidgetInitialViewDropdown()?!0:!1},getQsWidgetBottomSheetConfig:function(m){var b=a.getQsWidgetConfiguration(m),f=c.getQsWidgetBottomSheetHeightConfig(),d=0;b.summaryDisclaimerText||
(d=k(m)?f.disclaimerTextAdjustmentWithAtc:f.disclaimerTextAdjustment);return k(m)?{closeMessage:b.bottomSheetCancelText,height:f.heightWithAtc-d}:{closeMessage:b.bottomSheetDoneText,height:f.height-d}},isActionTriggerOnConfirmation:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==c.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==c.getQsWidgetActionTriggerOnSelect()?!0:
!1},isTextInputRequired:function(a,c){a=l(a,c).quantityText;return"+"==a.substr(a.length-1)?{result:!0,initialQuantityText:a.substr(0,a.length-1)}:{result:!1}},initializeWidget:function(a){var b=t(a);b?d.trigger(c.getQsWidgetEventSelectId(),a,b,!1,function(){n(a)}):(b=y(a))&&d.trigger(c.getQsWidgetEventSelectQuantity(),a,b,!1,function(){n(a)});B(a)},activateWidget:function(a){var b=x.indexOf(a);-1<b&&x.splice(b,1);setTimeout(function(){x.push(a)},c.getQsWidgetActivateDebounce())},deactivateWidget:function(a){a=
x.indexOf(a);-1<a&&x.splice(a,1)},getActivatedQsWidgets:function(){return x},hideComponent:function(a,b){a.addClass("aok-hidden")},showComponent:function(a){a.removeClass("aok-hidden")},isComponentVisible:function(a){return!a.hasClass("aok-hidden")},setComponentVisibility:function(a,b){b?a.css("visibility","visible"):a.css("visibility","hidden")},setHtml:function(a,b){a.html(b)},setQsWidgetContainerMinWidthAndHeight:function(a){a=p(a);a.css("min-width",a.width()+"px");a.css("min-height",a.height()+
"px")},resetQsWidgetContainerMinWidthAndHeight:function(a){a=p(a);a.css("min-width","0px");a.css("min-height","0px")},enableQsWidget:function(b){var c=h(b),f=r(b);c.enable();f.removeClass("a-form-disabled");f.addClass("a-form-normal");f.removeAttr("disabled");a.setEnable(b,!0)},disableQsWidget:function(b){var c=h(b),f=r(b);c.disable();f.removeClass("a-form-normal");f.addClass("a-form-disabled");f.attr("disabled","disabled");a.setEnable(b,!1)},popOutDropDownContainer:function(a){var b=p(a).offset();
a=f(a);a.appendTo(document.body);a.css({left:b.left,top:b.top})},getQsWidgetButtonContainer:function(a){return d.$("#"+c.getQsWidgetButtonContainerId(a))},getQsWidgetButtonAsComponent:h,getQsWidgetButton:function(a){return d.$("#"+c.getQsWidgetButtonId(a)+"-announce")},getQsWidgetDropdownContainer:f,getQsWidgetDropdownElement:function(a){return d.$("#"+c.getQsWidgetDropdownId(a))},getQsWidgetDropdownViewSelector:q,getQsWidgetDropdownUnorderedListElement:w,getQsWidgetDropdownItemElement:function(a,
b){return d.$("#"+c.getQsWidgetDropdownItemAriaId(a,b))},getQsWidgetTextInputContainer:function(a){return d.$("#"+c.getQsWidgetTextInputContainerId(a))},getQsWidgetTextInputElement:r,getQsWidgetTextInputUpdateButtonContainer:function(a){return d.$("#"+c.getQsWidgetTextInputUpdateButtonContainerId(a))},getQsWidgetQuantityContainer:function(a){return d.$("#"+c.getQsWidgetQuantityContainerId(a))},getQsWidgetQuantityElement:function(a){return d.$("#"+c.getQsWidgetQuantityId(a))},getQsWidgetQuantitySuffixElement:function(a){return d.$("#"+
c.getQsWidgetQuantitySuffixId(a))},getQsWidgetInitialViewSuffixElement:function(a){return d.$("#"+c.getQsWidgetInitialViewSuffixId(a))},getQsWidgetSummaryAtcButton:function(a){return d.$("#"+c.getQsWidgetSummaryAtcId(a))},getQsWidgetSummaryContainer:function(a){return d.$("#"+c.getQsWidgetSummaryPriceId(a))},getQsWidgetSummaryPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceSymbolId(a))},getQsWidgetSummaryPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceWholeId(a))},
getQsWidgetSummaryPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceFractionId(a))},getQsWidgetSummaryPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceDecimalId(a))},getQsWidgetFooterPriceContainer:function(a){return d.$("#"+c.getQsWidgetFooterPriceContainerId(a))},getQsWidgetFooterPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceSymbolId(a))},getQsWidgetFooterPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceWholeId(a))},
getQsWidgetFooterPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceFractionId(a))},getQsWidgetFooterPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceDecimalId(a))},getQsWidgetFooterQuantitySuffixContainer:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixContainerId(a))},getQsWidgetFooterQuantitySuffixElement:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixId(a))},getQsWidgetBottomSheetQuantitySuffixElement:function(a){return d.$("#"+
c.getQsWidgetBottomSheetQuantitySuffixId(a))},getQsItem:l,getSelectedQsItemId:t,getInitialSelectedQsItemId:A,getSelectedQuantity:y,getQsItemFromQuantityText:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var f=0;f<b.length;f++)if(c.toLowerCase()==b[f].quantityText.toLowerCase()||parseFloat(c)==parseFloat(b[f].quantityText))return b[f]},getFocusedQsItemIdInBottomSheet:function(b){var f=q(b).scrollTop(),d=c.getQsWidgetBottomSheetDropDownScrollFactor();f=parseInt((f-d.constant+
d.adjustment)/d.increment);b=a.getQsWidgetConfiguration(b).qsItems;b=0>f?b[0].id:f>=b.length?b[b.length-1].id:b[f].id;return b},getIndexFromIdInBottomSheet:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return 0;for(var f=0;f<b.length;f++)if(c==b[f].id)return f},saveQsWidgetDropdownTopPosition:function(b){var c=w(b);c&&(c=c.position().top,a.setData(b,{scrollTop:c}));return!1},setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(b){a.setData(b,
{scrollTop:c.getQsWidgetDropdownScrollMetricThreshold()})},isQsWidgetDropdownScrolled:function(b){var f=w(b);return f?(f=f.position().top,(b=a.getQsWidgetConfiguration(b).scrollTop)?Math.abs(f-b)>c.getQsWidgetDropdownScrollMetricThreshold():!1):!1},generateQsDropdownDOM:function(b){var f="",d=a.getQsWidgetConfiguration(b),q=d.qsItems,d=d.selectedId,e=u(b);if(!q)return"";for(var h=0;h<q.length;h++){var n,p=q[h].id,w=q[h].quantityText;if(e){n=b;var g=c.getQsWidgetDropdownItemId(n,p),r=c.getQsWidgetDropdownItemAriaId(n,
p),k=c.getQsWidgetDropdownItemDecl();n='\x3cspan class\x3d"a-declarative" data-action\x3d"'+k+'" data-'+k+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+n+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+g+'" aria-labelledby\x3d"'+r+'" class\x3d"qs-widget-dropdown-li"\x3e'+w+"\x3c/li\x3e\x3c/span\x3e"}else{n=b;var l=q[h].quantityTextAbbreviatedSuffix,g=q[h].id==d,r=c.getQsWidgetDropdownItemId(n,p),k=c.getQsWidgetDropdownItemAriaId(n,p),t=c.getQsWidgetDropdownItemQuantitySuffixId(n,
p),z=c.getQsWidgetDropdownDecl(n),v="";l&&(v='\x3cspan id\x3d"'+t+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+l+"\x3c/span\x3e");l="false";t="qs-widget-dropdown-link";g&&(l="true",t+=" qs-widget-dropdown-link-active aok-block aok-nowrap");n='\x3cspan class\x3d"a-declarative" data-action\x3d"'+z+'" data-'+z+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+n+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+r+'" aria-labelledby\x3d"'+k+'" aria-checked\x3d"'+l+
'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"0" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+k+'" class\x3d"'+t+'"\x3e'+w+"\x26nbsp;\x26nbsp;"+v+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}f+=n}return f},isQsWidgetTextInputValid:v,validateQsWidgetTextInput:function(a){var b=r(a),f=b.val();a=v(a,f);var d=b.parent().hasClass(c.getQsWidgetAuiInputTextWrapperClass())?b.parent():b;if(a)return b.val(f.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),d.removeClass("a-form-error"),
d.addClass("a-form-normal"),!0;d.removeClass("a-form-normal");d.addClass("a-form-error");return!1},isUserClickInSummary:function(a){var b=c.getQsWidgetSummaryId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,b.length)==b)return!0;a=a.parentElement}return!1},hideSpinner:B}});"use strict";l.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants").register("QuantitySelectorWidget",function(d,a,c,e){function g(b){a.deactivateWidget(b);var c=a.getQsWidgetButtonContainer(b),
d=a.getQsWidgetDropdownContainer(b),h=a.getQsWidgetDropdownElement(b),f=a.getQsWidgetQuantityContainer(b),q=a.getQsWidgetSummaryAtcButton(b),e=a.getQsWidgetFooterPriceContainer(b),g=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(e,!0);a.setComponentVisibility(g,!0);e=a.getQsWidgetTextInputContainer(b);a.isComponentVisible(e)||a.showComponent(c);a.hideComponent(d);a.hideComponent(h);a.hideComponent(f);a.hideComponent(q);a.resetQsWidgetContainerMinWidthAndHeight(b)}function l(b,
n,p){var h=a.getQsItem(b,n),f=h.quantityText,q=h.quantityTextAbbreviatedSuffix,g=h.quantityTextFullSuffix,k=h.selectedText,h=h.price,u=a.getQsWidgetSummaryPriceSymbolElement(b),t=a.getQsWidgetSummaryPriceWholeElement(b),v=a.getQsWidgetSummaryPriceFractionElement(b),y=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(u,h.currencySymbol);a.setHtml(t,h.wholeValue);a.setHtml(v,h.fractionValue);a.setHtml(y,h.decimalSeparator);u=a.getQsWidgetQuantityElement(b);a.setHtml(u,f);f=a.getQsWidgetQuantitySuffixElement(b);
q&&g?(a.setHtml(f,q),q=a.getQsWidgetInitialViewSuffixElement(b),a.setHtml(q,g)):a.setHtml(f,"");q=a.getQsWidgetFooterPriceSymbolElement(b);f=a.getQsWidgetFooterPriceWholeElement(b);u=a.getQsWidgetFooterPriceFractionElement(b);t=a.getQsWidgetFooterPriceDecimalElement(b);a.setHtml(q,h.currencySymbol);a.setHtml(f,h.wholeValue);a.setHtml(u,h.fractionValue);a.setHtml(t,h.decimalSeparator);g&&(h=a.getQsWidgetFooterQuantitySuffixElement(b),a.setHtml(h,g));a.isInitialViewDropdown(b)&&(a.getQsWidgetButtonAsComponent(b).text(k),
g="Current quantity "+k+". Click to change quantity",a.getQsWidgetButton(b).attr("aria-label",g));c.setSelectedId(b,n);p&&d.trigger(e.getQsWidgetEventTriggerAction(),b)}function k(b,n){var g=a.getQsWidgetTextInputElement(b),h=g.val(),f=a.getQsWidgetButtonContainer(b),q=a.getQsWidgetTextInputContainer(b),k=a.getQsWidgetTextInputUpdateButtonContainer(b),r=a.getQsItemFromQuantityText(b,h);a.hideComponent(k);r?(a.hideComponent(q),a.showComponent(f),l(b,r.id,n)):(a.hideComponent(f),a.showComponent(q),
g.blur(),c.setSelectedQuantity(b,h),n&&d.trigger(e.getQsWidgetEventTriggerAction(),b))}d.on(e.getQsWidgetEventSelectId(),function(b,c,d,e){l(b,c,d);c=a.getQsWidgetButtonContainer(b);d=a.getQsWidgetTextInputContainer(b);b=a.getQsWidgetTextInputUpdateButtonContainer(b);a.hideComponent(b);a.hideComponent(d);a.showComponent(c);e&&e()});d.on(e.getQsWidgetEventSelectQuantity(),function(b,c,d,e){a.getQsWidgetTextInputElement(b).val(c);k(b,d);e&&e()});return{hideAllPopover:function(){for(var b=a.getActivatedQsWidgets(),
c=0;c<b.length;c++)g(b[c])},showPopover:function(b){a.activateWidget(b);a.setQsWidgetContainerMinWidthAndHeight(b);var d=a.getQsWidgetDropdownUnorderedListElement(b),e=a.getQsWidgetButtonContainer(b),h=a.getQsWidgetDropdownContainer(b),f=a.getQsWidgetDropdownElement(b),q=a.getQsWidgetQuantityContainer(b),g=a.getQsWidgetSummaryAtcButton(b);a.setHtml(d,a.generateQsDropdownDOM(b));var d=a.getQsWidgetFooterPriceContainer(b),k=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(d,!1);
a.setComponentVisibility(k,!1);a.showComponent(f);a.hideComponent(q);a.hideComponent(g);a.showComponent(h);a.hideComponent(e);a.popOutDropDownContainer(b);h=c.getQsWidgetConfiguration(b);if(e=h.qsItems)h=h.selectedId,null===h&&(h=e[0].id),a.getQsWidgetDropdownItemElement(b,h).focus()},showConfirmation:function(b){a.activateWidget(b);var c=a.getQsWidgetButtonContainer(b),d=a.getQsWidgetDropdownContainer(b),e=a.getQsWidgetDropdownElement(b),f=a.getQsWidgetQuantityContainer(b);b=a.getQsWidgetSummaryAtcButton(b);
a.hideComponent(e);a.showComponent(f);a.showComponent(b);a.showComponent(d);a.hideComponent(c)},showPrice:function(b,c){c=a.getQsItem(b,c).price;var d=a.getQsWidgetSummaryPriceSymbolElement(b),e=a.getQsWidgetSummaryPriceWholeElement(b),f=a.getQsWidgetSummaryPriceFractionElement(b);b=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(d,c.currencySymbol);a.setHtml(e,c.wholeValue);a.setHtml(f,c.fractionValue);a.setHtml(b,c.decimalSeparator)},selectOption:l,showTextInput:function(b,c){var d=a.getQsWidgetTextInputContainer(b),
e=a.getQsWidgetTextInputUpdateButtonContainer(b),f=a.getQsWidgetButtonContainer(b);a.hideComponent(f);a.showComponent(d);var q=a.getQsWidgetTextInputElement(b);c&&q.val(c);c=q.val();a.isQsWidgetTextInputValid(b,c)&&a.getSelectedQuantity(b)!==c?a.showComponent(e):a.hideComponent(e);setTimeout(function(){q.focus()},200)},validateAndSelectQuantity:k,selectConfirmation:function(b){a.isActionTriggerOnConfirmation(b)&&d.trigger(e.getQsWidgetEventTriggerAction(),b);g(b)}}});"use strict";l.when("A","QuantitySelectorWidget",
"QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata").register("QuantitySelector",function(d,a,c,e,g,l,k,b){function n(a,d){try{var g=c.isMobile(d)}catch(h){h instanceof TypeError&&l.incrementInvalidIdCount();return}try{if(!c.isInitialized(d)||a)eval(b.getMetaConfiguration(d,"script")),e.setInitialized(d),e.saveOriginalSettings(d),c.initializeWidget(d),c.isQsWidgetEnabled(d)?c.enableQsWidget(d):c.disableQsWidget(d),
l.incrementInitializeCount(!0,g)}catch(h){l.incrementInitializeCount(!1,g)}}function p(a){e.loadQsWidgetStateConfiguration(a);n(!0,a)}d.declarative(g.getQsWidgetButtonDecl(),"click",function(b){var d=b.data.qsUID;(b=c.isMobile(d))?a.showBottomSheet(d):a.showPopover(d);l.incrementShowPopup(b);c.isInitialViewDropdown(d)?l.logCsm(d,"cqd"):l.logCsm(d,"ccq");setTimeout(function(){c.saveQsWidgetDropdownTopPosition(d)},250)});d.declarative(g.getQsWidgetDropdownDecl(),"click",function(b){var d=b.data.qsUID;
b=b.data.id;var e=c.isActionTriggerOnSelect(d),g=c.isTextInputRequired(d,b),h=c.isConfirmationViewEnabled(d),k=c.isQsWidgetDropdownScrolled(d);h?k?(c.setQsWidgetDropdownScrolled(d),l.logCsm(d,"dcq_scl")):(c.clearQsWidgetDropdownScrolled(d),l.logCsm(d,"dcq")):k?l.logCsm(d,"dsq_scl"):l.logCsm(d,"dsq");a.selectOption(d,b,e&&!g.result);g.result?a.showTextInput(d,g.initialQuantityText):h&&a.showConfirmation(d)});d.declarative(g.getQsWidgetDropdownItemDecl(),"click",function(b){a.alignQsItem(b.data.qsUID,
b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"focusin",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseenter",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseleave",function(b){b=b.data.qsUID;var c=e.getQsWidgetConfiguration(b).selectedId;a.showPrice(b,c)});d.declarative(g.getQsWidgetQuantityChangelinkDecl(),"click",function(b){b=b.data.qsUID;a.showPopover(b);l.incrementChangeLinkCount();
c.saveQsWidgetDropdownTopPosition(b);l.logCsm(b,"ccl")});d.declarative(g.getQsWidgetSummaryAtcDecl(),"click",function(b){b=b.data.qsUID;a.selectConfirmation(b);c.isQsWidgetDropdownScrolled(b)?l.logCsm(b,"atc_scl"):l.logCsm(b,"atc")});d.declarative(g.getQsWidgetTextInputDecl(),"keydown",function(a){var b=a.data.qsUID,d=a.$event.which;8==d||9==d||13==d||37<=d&&40>=d||46==d||(!(48<=d&&57>=d||96<=d&&105>=d)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||a.$event.metaKey?a.$event.preventDefault():
3<=c.getQsWidgetTextInputElement(b).val().length&&a.$event.preventDefault())});d.declarative(g.getQsWidgetTextInputDecl(),"keyup",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&13==b.$event.keyCode?(b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,b)):a.showTextInput(d)});d.declarative(g.getQsWidgetTextInputDecl(),"focusout",function(b){b=b.data.qsUID;if(""===c.getQsWidgetTextInputElement(b).val()){var d;d=(d=e.getQsWidgetConfiguration(b).selectedId)?c.getQsItem(b,d).selectedText:
c.getSelectedQuantity(b);a.showTextInput(b,d);c.validateQsWidgetTextInput(b)}});d.declarative(g.getQsWidgetTextInputDecl(),"change",function(b){a.showTextInput(b.data.qsUID)});d.declarative(g.getQsWidgetTextInputUpdateButtonDecl(),"click",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&(d=b.data.qsUID,b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,b))});d.$(document).click(function(b){0!=c.getActivatedQsWidgets().length&&(c.isUserClickInSummary(b)||a.hideAllPopover())});
d.$(t).resize(function(){a.hideAllPopover()});d.on(g.getQsWidgetEventInitialize(),function(a,b){k.initialize();if("string"==typeof b)n(a,b);else{b=e.getQsUIDs();for(var c=0;c<b.length;c++)n(a,b[c])}});d.on(g.getQsWidgetEventLoadStatesAndInitialize(),function(){for(var a=e.getQsUIDs(),b=0;b<a.length;b++){var d=a[b];c.isInitialized(d)||p(d)}});d.on(g.getQsWidgetEventConfigureEnable(),function(a){c.enableQsWidget(a)});d.on(g.getQsWidgetEventConfigureDisable(),function(a){c.disableQsWidget(a)});d.on(g.getQsWidgetEventConfigureReset(),
function(a){for(var b=e.getQsUIDs(),c=0;c<b.length;c++){var h=b[c];if("string"!==typeof a||a==h)e.loadOriginalSettings(h),d.trigger(g.getQsWidgetEventInitialize(),!0,h)}});var h=d.now();l.logLatencyMetric("JSReady",h);return{loadStateAndInitializeWidget:p}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("ConsumablesATCActionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,q=f._namespace||f.attributeErrors,b=q?q("ALMCartActionAssets",""):f;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,f,q){d.when("A").register("alm-cart-action-query-string-utils",function(b){function c(c,l){var d=e(c),g=a(c);d?l["discoveredAsins.0"]=c.asin:g&&(c=b.filter(c.items,function(a){return e(a)}),c=b.map(c,function(a){return a.asin}),b.each(c,function(a,e){l["discoveredAsins."+e.toString()]=a}));return l}
function a(a){return a&&a.items&&b.$.isArray(a.items)&&0<a.items.length}function e(a){return a&&a.asin&&"string"===typeof a.asin&&""!==a.asin}return{addQueryStringParamsToUrl:function(a,e){var d={};if(e&&e.reftag){var g=e.reftag;"string"===typeof g&&""!==g&&(d.ref_=g)}if(e&&e.queryLogInfoParams){var g=e.queryLogInfoParams,k;for(k in g)g.hasOwnProperty(k)&&"string"===typeof k&&""!==k&&"string"===typeof g[k]&&""!==g[k]&&(d[k]=g[k])}c(e,d);(e=b.$.param(d))&&"string"===typeof e&&""!==e&&(a+="?"+e);return a}}});
"use strict";d.when("A","jQuery").register("afx-add-all-helper",function(b,c){return{updateQuantityForAsin:function(a,e,b){a&&e&&!isNaN(b)&&c("#"+a).closest("form").find("#afx-add-all-"+e+"-quantity").attr("value",b)}}});"use strict";d.when("A","jQuery","a-button").register("fx-atfc-button-utils",function(b,c,a){function e(a){return"atfc-spinner-"+(a.asin?a.asin:a.clientId?a.clientId:"noAsin")}var d=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");b&&b.length&&
(d=!0,a=e(a.data),b.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),c("#"+a).css({width:b.outerWidth()+"px"}),c("#"+a).css({height:b.outerHeight()+"px"}),b.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button");a=e(a.data);a=c("#"+a);b&&b.length&&a&&a.length&&(d=!1,b.css("visibility","visible"),b.unwrap())},shouldDisableButtonClicks:function(){return d}}});"use strict";d.when("fresh-shared-add-to-cart-v2").register("fresh-add-to-cart",
function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{addToFreshCart:function(a){c(a)},attachCallbacks:c,updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}});"use strict";d.when("shared-alm-multi-add-to-cart").register("alm-multi-add-to-cart",function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{multiAddToCart:function(a){c(a)},attachCallbacks:c,attachPreHandler:function(a){b.attachPreHandler(a)}}});"use strict";
d.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,c){return{addToFreshCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});"use strict";d.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(c){var a=
"/fom/add-to-fresh-order";c.reftag!==q&&(a+="/ref\x3d"+c.reftag);c.data!==q&&c.data.csrfToken&&(a+="?csrf\x3d"+encodeURIComponent(c.data.csrfToken));b.post(a,{success:c.success,error:c.error,params:JSON.stringify(c.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}});
"use strict";d.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function c(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var e=c(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:e})},resolve:function(a){var e=c(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:e})},substitute:function(a){a=c(a.data);a.sourceUrl=f.location.pathname+f.location.search;
a=b.$.param(a);f.location.href="/afx/cartconflicts/resolve/substitute?"+a}}});"use strict";d.when("A").register("afx-get-cart-count",function(b){return function(c){b.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:c.sessionID,clientName:"SharedFreshHandler"},success:c.success,error:c.error})}});"use strict";d.when("A","alm-cart-action-query-string-utils").register("alm-multi-add-to-cart-proxy",function(b,c){return{multiAddToCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtocart/multiple",
a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)}}});"use strict";d.register("afx-callbacks-helper",function(b){function c(b){var c=b in a;!c&&d.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,d,f){b=b in a?b:"default";c(b)&&a[b].success&&a[b].success(d,f)},error:function(b,d,f,h){b=b in a?b:"default";c(b)&&a[b].error&&a[b].error(d,
f,h)}}});"use strict";d.register("afx-preHandler-helper",function(b){var c={};return{addPreHandler:function(a){c[a.clientID||"default"]=a},getPreHandler:function(a){return c[a]}}});"use strict";d.register("afx-csm-metrics-utils",function(){var b={},c=function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,e){a=Date.now()-b[a];c(e,a)},setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,
b){f.ue&&f.uet&&a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:c,sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});"use strict";d.when("A","a-modal").register("fresh-atfc-modal-utils",function(b,c){return{removeModal:function(){var a=c.get("fresh-add-to-cart-modal");a&&c.remove(a)},showModal:function(a,e,d){e&&(e={name:"fresh-add-to-cart-modal",header:e.header,inlineContent:e.body,footer:e.footer},"desktop"===d&&
(e.width=325),c.create(a.$currentTarget,e).show(),b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){c.remove(a.popover)}))}}});"use strict";d.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","fresh-atfc-ewc-helper").register("fresh-atfc-error-modal-utils",function(b,c,a,e,f,l,h){function g(a,c,e,g){d.when("a-modal").execute("showModal",function(d){c||k(a);a.data.quantity&&(l.updateQuantity("fresh-clear-slot-button",a.data.quantity),
l.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity));var f={name:"fresh-add-to-cart-error-modal",header:c.header,inlineContent:c.errorMessage,footer:c.footer,data:{event:a,response:g}};"desktop"===e&&(f.width=325);d.create(a.$currentTarget,f).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){h.refreshCart(a.data.sessionID);d.remove(b.popover)})})}function k(b,e){a.showGenericErrorModal({success:function(a,d,g){a&&(a=c.parseJSON(g.http.response),
m(b,a,e))},error:function(){d.log("Failed to get the generic error modal","Error");g(b,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
e)}})}function m(a,b,c){var d=b.errorModalHtml,k=f.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in k&&e.increment(k[b.clientResponseModel.uberCartStatus.errorStatusCode]);g(a,d,c,b)}return{removeModal:function(){d.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:g,showGenericErrorModal:k,parseResponseAndShowErrorModal:m}});"use strict";
d.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",function(b,c,a,e){function f(a){e({sessionID:a,success:function(a){a&&a.isOK&&a.total&&l(a.total.numActiveItem)},error:function(){d.log("Failed to get cart count","Error",a)}})}function l(a){d.when("nav.setCartCount").execute(function(b){b(a)});d.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var h;d.when("EWC").execute("add-to-cart-refresh",
function(a){h=a});d.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){h!==q&&"function"===typeof h.refresh?h.refresh():f(a)}}});"use strict";d.when("A","afx-storeIntroductionSheet-helper","afx-cpi-helper").register("f3-consumables-atc-helper",function(b,c,a){return{handleAddToCart:function(e,d,f){d.storeIntroductionSheetHtml&&d.storeIntroductionSheetHtml.content?c.render(e,d,f):d.renderUFGCartProgressIndicator?a.render(e):b.trigger("fresh-atfc:success","false",{almBrandId:e.brandId})}}});
"use strict";d.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ALM_MULTI_ATC_COUNT:"almMultiAddToCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ALM_MULTI_ATC_COUNT_SUCCESS:"almMultiAddToCartCountSuccess",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ALM_MULTI_ATC_COUNT_ERROR_MODAL:"almMultiAddToCartCountErrorModal",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED:"almMultiAddToCartCountErrorUnexpected",
ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",ATFC_STORE_INTRODUCTION_SHEET:"afxStoreIntroductionSheet",ATFC_OCX_STORE_INTRODUCTION_SHEET:"afxOfferComparisonStoreIntroductionSheet",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",
ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(e){a[e]=
b[e]+":"+c});return a}}});"use strict";d.when("A").register("afx-quantity-helper",function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}});"use strict";d.when("A","afx-csm-metrics-utils","afx-metrics-helper").register("afx-storeIntroductionSheet-helper",function(b,c,a){function e(a,b){var c=b?400:190;d.when("a-sheet").execute(function(e){e.create({inlineContent:a,
closeType:"icon",height:c}).show();f("mobile",b)})}function f(b,e){b=a.getMetricsForDevice(b);e?c.increment(b.ATFC_OCX_STORE_INTRODUCTION_SHEET):c.increment(b.ATFC_STORE_INTRODUCTION_SHEET)}function l(){b.show(b.$("#sis-background"));b.$("body").css({overflow:"hidden"});b.$("#offer-comparison-store-introduction-side-sheet-container").show(function(){g({right:"0px"})});f("desktop",!0)}function h(){var a=b.$("#offer-comparison-store-introduction-side-sheet-container").width()+30;g({right:"-"+a+"px"},
function(){b.$("#offer-comparison-store-introduction-side-sheet-container").remove()});b.$("body").css({overflow:"scroll"});b.hide(b.$("#sis-background"));b.$("#offer-comparison-store-introduction-side-sheet-background-container").remove()}function g(a,c){b.animate(b.$("#offer-comparison-store-introduction-side-sheet-container"),a,300,"ease-out",c)}b.declarative("close-offer-comparison-store-introduction-side-sheet","click",function(a){h()});return{render:function(a,c,d){c=c.storeIntroductionSheetHtml.content;
a=a.additionalParams&&a.additionalParams.shouldRenderSIS;"mobile"===d?e(c,a):"desktop"===d&&(b.$("body").append(c),l())}}});"use strict";d.when("A").register("afx-cpi-helper",function(b){return{render:function(c){b.trigger("consumables-atc:success",{atcAction:{ASIN:c.asin,numberOfItems:c.quantity,operationType:"ADDED"},programDetails:{programType:"UFG",brandId:c.brandId,storeId:c.storeId},requestOverrides:{responseType:"HTML","cart-progress-indicator":{messageType:"topsheet"}}})}}});"use strict";
d.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(e,d,f){!0===e.isSuccess?!0===e.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(f,d,"Failed to call getconflictsummary")},error:a.error})}}});"use strict";d.when("A","afx-atfc-v2-proxy","fx-atfo-proxy",
"fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","f3-consumables-atc-helper").register("fresh-shared-add-to-cart-v2",function(b,c,a,e,n,l,h,g,k,m,A,x,t){return{updateQuantity:h.updateQuantity,attachCallbacks:g.addCallbacks,updateAddAllQuantityForAsin:x.updateQuantityForAsin,initialize:function(p){function u(a){return a.isItemSoldByCount?
!JSON.parse(a.isItemSoldByCount):a.pickingStrategy?"bulk"===a.pickingStrategy||"catch"===a.pickingStrategy:!1}function w(a,b,d,f){y();a.data.amountInUom===q&&u(a.data)&&(a.data.amountInUom=a.data.quantity,a.data.quantity=1);c.addToFreshCart({data:a.data,success:function(c,f,u){200===u.status&&(n.increment(r.ATFC_SUCCESSFUL_ADD_COUNT),f=r.ATFC_CTCF+":lineItemBucket:"+z(c),n.endWidgetTimer(b,f),A.refreshCart(a.data.sessionID),g.success(a.data.clientID,a,c.clientResponseModel),t.handleAddToCart(a.data,
c,p));m.removeModal();e.showButtonAndRemoveSpinner(a);d&&d()},error:function(c,d,u){var h=r.ATFC_CTCF,k=c.responseText,l;m.removeModal();k&&(l=JSON.parse(k),h=r.ATFC_CTCF+":lineItemBucket:"+z(l.clientResponseModel));400===c.status&&l?(n.increment(r.ATFC_ERROR_MODAL_COUNT),m.parseResponseAndShowErrorModal(a,l,p)):403===c.status?location.reload():(n.increment(r.ATFC_UNEXPECTED_ERROR_COUNT),m.showGenericErrorModal(a,p),g.error(a.data.clientID,a,c,d,u));n.endWidgetTimer(b,h);e.showButtonAndRemoveSpinner(a);
f&&f()}})}function B(a,c){n.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=h.getQuantity(a.$target);w(a,c,function(){location.reload()})},error:function(){d.log("Failed to clear reservation");m.showGenericErrorModal(a,p)}})}function y(){return f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}function z(a){return a.items&&
Math.ceil(a.items.length/5)}var r=l.getMetricsForDevice(p),v=r.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c={data:a};if(a.tunneledData&&a.tunneledData.$target){var d=a.tunneledData.$target,c=b.$.extend(c,{$target:d,$currentTarget:d,$declarativeTarget:d});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+
a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),e.hideButtonAndRenderSpinner(c);w(c,v)});b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;B(a,v)});b.declarative("fresh-add-to-cart","click",function(a){n.startWidgetTimer(v);n.increment(r.ATFC_COUNT);e.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(e.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,
"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=h.getQuantity(a.$target),w(a,v)))});b.declarative("fresh-add-to-cart-alcohol","click",function(a){a.$currentTarget.context.disabled=!0;n.startWidgetTimer(v);a.data.quantity=h.getQuantity(a.$target);w(a,v)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;m.removeModal();k.execute({data:a.data,error:function(b,c,d){m.showGenericErrorModal(a,p);g.error(a.data.clientID,a,b,c,d)}})});
b.declarative("fresh-add-to-order","click",function(b){e.shouldDisableButtonClicks()||(e.hideButtonAndRenderSpinner(b),y(),a.addToFreshOrder({data:b.data,success:function(a,c,d){200===d.http.status&&g.success(b.data.clientID,b,a.clientResponseModel);e.showButtonAndRemoveSpinner(b)},error:function(c,d,f){m.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),m.parseResponseAndShowErrorModal(b,c,p);else if(401===c.http.status)location.reload();else{var u=a.getFallbackErrorModalHtml();m.showModal(b,
u,p);g.error(b.data.clientID,b,c,d,f)}e.showButtonAndRemoveSpinner(b)}}))})}}});"use strict";d.when("A","alm-multi-add-to-cart-proxy","fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-callbacks-helper","afx-preHandler-helper","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","f3-consumables-atc-helper").register("shared-alm-multi-add-to-cart",function(b,c,a,d,n,l,h,g,k,m){return{attachCallbacks:l.addCallbacks,attachPreHandler:h.addPreHandler,initialize:function(q){function x(b,
h,n,p){f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50);c.multiAddToCart({data:b.data,success:function(c,f,h){200===h.status&&(d.increment(t.ALM_MULTI_ATC_COUNT_SUCCESS),k.refreshCart(b.data.sessionID),l.success(b.data.clientId,b,c),m.handleAddToCart(b.data,c,q));g.removeModal();a.showButtonAndRemoveSpinner(b);n&&n()},error:function(c,f,h){a.showButtonAndRemoveSpinner(b);var k;g.removeModal();c.responseText&&
(k=JSON.parse(c.responseText));400===c.status&&k?(d.increment(t.ALM_MULTI_ATC_COUNT_ERROR_MODAL),g.parseResponseAndShowErrorModal(b,k,q)):403===c.status?location.reload():(d.increment(t.ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED),g.showGenericErrorModal(b,q));l.error(b.data.clientId,b,c,f,h);p&&p()}})}var t=n.getMetricsForDevice(q),p=t.ATFC_LATENCY_SCOPE+Date.now();b.declarative("alm-multi-add-to-cart","click",function(b){d.increment(t.ALM_MULTI_ATC_COUNT);var c=b.$currentTarget.find("input");!b.data.items||
1>b.data.items.length||a.shouldDisableButtonClicks()||c.is(":disabled")||(a.hideButtonAndRenderSpinner(b),(c=h.getPreHandler(b.data.clientId))&&c.preHandle&&c.preHandle(),x(b,p))})}}})});
/* ******** */
(function(f){var b=window.AmazonUIPageJS||window.P,q=b._namespace||b.attributeErrors,e=q?q("APEAdaptiveSkyscraperWidgetAssets",""):b;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,b,q){"use strict";f.when("Rush","s-web-application-controller","ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-execute","ape-adaptive-skyscraper-metrics","s-skyscraper-slot","af").execute("ape-adaptive-skyscraper",function(e,b,f,u,v){function c(){try{u.execute()}catch(e){v.incrementMetric(f.METRIC_ERROR)}}
e.on(b.ACTIONS.LOAD_SEARCH_PAGE_COMPLETE,function(){setTimeout(c,f.PAGINATION_EXECUTE_TIMEOUT)});c()});"use strict";f.register("ape-adaptive-skyscraper-constants",function(){return{RESEND_ACTIVATE_EVENT_TIMEOUT:600,PAGINATION_EXECUTE_TIMEOUT:600,METRIC_DONE:"adplacements:adaptive-skyscraper:done",METRIC_ERROR:"adplacements:adaptive-skyscraper:error",METRIC_NO_ADAP_SKYS:"adplacements:adaptive-skyscraper:no-adaptive-skyscrapers",METRIC_NO_BLOCKING:"adplacements:adaptive-skyscraper:no-blocking-elements",
METRIC_NO_SPACE:"adplacements:adaptive-skyscraper:no-space"}});"use strict";f.when("ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-metrics").register("ape-adaptive-skyscraper-execute",function(e,f){function q(f){function b(){f.querySelector("iframe").contentWindow.postMessage(JSON.stringify({action:"TRIGGER",eventName:"adaptiveSkyReady"}),"*")}b();setTimeout(b,e.RESEND_ACTIVATE_EVENT_TIMEOUT)}return{execute:function(){function u(){function a(a){a=m[String(a)].querySelector("div");a.style.display=
"none";a.style.marginTop=""}function d(a,d){a=m[String(a)].querySelector("div");a.style.display="block";a.style.marginTop=String(d)+"px"}var g,k;g=1;for(k=0;g<l&&k<r.length;g++)"active"!==t[g]?a(g):(d(g,r[k]),k++);for(;g<l;g++)a(g)}function v(a){var d;if(a.data){try{d=JSON.parse(a.data)}catch(g){d={}}d&&d.frameId&&d.action&&"COLLAPSE"===d.action&&(a=x[d.frameId],"number"===typeof a&&0!==a&&(t[a]="inactive",u()))}}var c,m={},y,r=[],z,x={},l=0,A=b.innerHeight,w=[],t={};c={tops:[],bottoms:[]};c=function(){var a=
{},d,g,k,n={},e=0,p={},h=document.getElementsByClassName("slot\x3dSKYSCRAPER template\x3dSAFE_FRAME");0>=h.length&&(h=document.getElementsByClassName("slot\x3dLEFT template\x3dSAFE_FRAME"));for(k=0;k<h.length;k++)d=h[k].children[0],g=d.getElementsByTagName("iframe")[0].getAttribute("data-frame-id"),a[e]=d,n[g]=e,p[e]="active",e++;return{cachedFrameContainers:a,numByFrameId:n,numSkyscrapers:e,skyscraperStates:p}}();m=c.cachedFrameContainers;x=c.numByFrameId;l=c.numSkyscrapers;t=c.skyscraperStates;
1>=l?function(a,d){f.incrementMetric(e.METRIC_NO_ADAP_SKYS);d&&q(a["0"])}(m,1===l):(z=Math.ceil(m["0"].offsetTop+619+A),y=function(){var a=document.getElementsByClassName("s-result-list");if(0>=a.length)return 0;a=a[a.length-1];return Math.ceil(a.offsetTop+a.offsetHeight)}(),c=document.getElementsByClassName?document.getElementsByClassName("AdHolder"):document.querySelector(".AdHolder"),(!c||c.length&&0>=c.length)&&f.incrementMetric(e.METRIC_NO_BLOCKING),c=function(a,d,g){var e=[g],n=[d],f={},p={},
h,c,b;if(0>=a.length)return{tops:e,bottoms:n};for(h=0;h<a.length;h++)c=Math.floor(a[h].offsetTop),b=Math.ceil(c+a[h].offsetHeight),c>d&&c<g&&!f[c]&&(e.push(c),f[c]=!0),b>=d&&b<g&&!p[b]&&(n.push(b),p[b]=!0);[e,n].forEach(function(a){a.sort(function(a,d){return a-d})});return{tops:e,bottoms:n}}(c,z,y),w=function(a,d){for(var g=[],e=0,c=0,b=0,p=a.length+d.length,h,f;b<p&&c<d.length&&e<a.length;)b++,h=d[c],f=a[e],h>=f?e++:c<d.length-2&&d[c+1]<f?c++:619>f-h?c++:(g.push([h,f]),c++,e++);return w=g}(c.tops,
c.bottoms),r=function(a,d,g,e){var c=[];d=d.reverse();var f=1;a=Number(a.offsetTop);var b,h;if(0>=d.length)return c;for(b=d.pop();f<g&&b;)b[0]<a&&(b[0]=a),b[0]>b[1]||619>b[1]-b[0]?((h=d.pop())&&b[0]>h[0]&&(h[0]=b[0]),b=h):(c.push(b[0]-a-619),f++,a=b[0],b[0]+=619+e);return c}(m["0"],w,l,A),function(a,d){var b;if(!(a.length>=d||(a=d-a.length-1,0>=a)))for(b=0;b<a;b++)t[d-b-1]="inactive"}(r,l),0>=r.length&&f.incrementMetric(e.METRIC_NO_SPACE),function(a,b,c,e){function f(a){return function(b){try{a(b)}catch(d){}}}
a.addEventListener?a.addEventListener(b,f(c),!0===e):a.attachEvent&&a.attachEvent("on"+b,f(c))}(b,"message",v),u(),function(a,b){var c;for(c=0;c<a;c++)"active"===b[c]&&q(m[String(c)])}(l,t),f.incrementMetric(e.METRIC_DONE))}}});"use strict";f.register("ape-adaptive-skyscraper-metrics",function(){return{incrementMetric:function(e){b.ue&&b.ue.count&&e&&b.ue.count(e,(b.ue.count(e)||0)+1)}}})});
/* ******** */
(function(n){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,g=q?q("SponsoredBrandsVideoAssets",""):p;g.guardFatal?g.guardFatal(n)(g,window):g.execute(function(){n(g,window)})})(function(n,p,q){"use strict";n.when("A","rush-framework","sbv-single-product","sbv-video-single-mixin").register("sbv-video-single-product",function(g,l,h,c){var d=function(){this.attribution=this.name="sbv-video-single-product"};g.mixin(d.prototype,c);var b=new d;l.registerComponent(b.name,b.attribution,
function(d){var f=g.$(d.elem()),a=f.find(".sbv-product:first"),a=0===a.length?f.children().get(-1):a.get(0);b.setup(f,a,d,h)})});"use strict";n.when("A","rush-framework","sbv-single-link","sbv-video-single-mixin").register("sbv-video-single-link",function(g,l,h,c){var d=function(){this.attribution=this.name="sbv-video-single-link"};g.mixin(d.prototype,c);var b=new d;l.registerComponent(b.name,b.attribution,function(d){var f=g.$(d.elem()),a=f.find(".sbv-link:first");b.setup(f,a,d,h)})});n.when("A",
"sbv-video","sbv-metrics-manager","sbv-automated-test-metrics-client","sbv-platform-compatibility","sbv-weblabs","sbv-latency-event-handler").register("sbv-video-single-mixin",function(g,l,h,c,d,b){return{setup:function(e,f,a,k){var c=e.find(".sbv-video:first");d.setAppVersion(a.prop("appVersion"));e=h.builder().withMetricsIdentifier(a.prop("metricsIdentifier")).withSlotId(a.prop("slotId")).withWidgetIndex(a.prop("widgetIndex")).withDeviceEnv(a.prop("deviceEnv")||"").withDeviceOs(a.prop("deviceOs")||
"").withDeviceType(a.prop("deviceType")||"").withDevicePlatformVersion(a.prop("devicePlatformVersion")||"").withDeviceModel(a.prop("deviceModel")||"").withDeviceMake(a.prop("deviceMake")||"").withAppVersion(a.prop("appVersion")||"").withStage(a.prop("stage")).withClientId(a.prop("clientId")).withWeblabs(b).withLanguage(a.prop("language")).withVideoPreviewImageSrc(a.prop("videoPreviewImageSrc")).withVideoSrc(a.prop("videoSrc")).withHasAudio("true"===a.prop("hasAudio")).withMarketplaceId(a.prop("marketplaceId")).withWidgetType(a.prop("widgetType")).withWidgetGroupId(a.prop("widgetGroupId")).withSushiSourceGroupEndpoint(a.prop("sushiSourceGroupEndpoint")).build();
e.reportAceVideoResponseReceived();c=l.initialize(c.get(0),e);k.initialize(f,e,c);a.prop("trackingPixelUrl")&&g.$.ajax({url:a.prop("trackingPixelUrl"),type:"GET",crossDomain:!0})}}});n.when("af","ready").register("sbv-latency-event-handler");n.when("A").register("sbv-single-link",function(g){function l(){this.init=function(h,c,d){g.$(h).find("a").click(function(){c.reportLinkClicked(d&&d.getVideoCurrentTimeMs())});g.$(h).find(".sbv-link-cta-container").click(function(){c.reportCallToActionClicked(d&&
d.getVideoCurrentTimeMs())});g.$(h).find(".sbv-link-img-container").click(function(){c.reportImageClicked(d&&d.getVideoCurrentTimeMs())});g.$(h).find(".sbv-link-headline").click(function(){c.reportHeadlineClicked(d&&d.getVideoCurrentTimeMs())})}}return{initialize:function(g,c,d){(new l).init(g,c,d)}}});"use strict";n.when("A","sbv-sushi-client").register("sbv-metrics-manager",function(g,l){function h(c){function a(a){var k=g.$.extend({},v);k[b.EVENT_TYPE]=a;k[b.METRICS_SEQUENCE_NUMBER]=h++;k[b.NETWORK_TYPE]=
navigator&&navigator.connection&&navigator.connection.type;return k}function k(a,k){u&&u.processEvent(a,e);t&&t.processEvent(a)}var h=0,u=l.newClient(p,c,"AceVisClientMetrics"),v=null,t=null;this.setSushiClient=function(a){u=a};this.setDefaultEventAttributes=function(a){v=g.$.extend({},a);v[b.USER_AGENT]=navigator.userAgent};this.setAutomatedTestMetricsClient=function(a){t=a};this.reportAceVideoResponseReceived=function(){var b=a(d.ACE_VIDEO_RESPONSE_RECEIVED);k(b)};this.reportAdFeedbackLoadFailed=
function(m){var r=a(d.AD_FEEDBACK_LOAD_FAILED);r[b.STATUS_CODE]=m;k(r)};this.reportAdFeedbackLoadSucceeded=function(m){var r=a(d.AD_FEEDBACK_LOAD_SUCCEEDED);r[b.STATUS_CODE]=m;k(r)};this.reportAdFeedbackPopoverOpened=function(){var b=a(d.AD_FEEDBACK_POPOVER_OPENED);k(b)};this.reportPreviewImageLoadSuccess=function(m,r){var c=a(d.PREVIEW_IMAGE_LOAD_SUCCESS);c[b.LOAD_TIME_MS]=m;c[b.RETRY_COUNT]=r;k(c)};this.reportPreviewImageLoadFailure=function(m,r){var c=a(d.PREVIEW_IMAGE_LOAD_FAILURE);c[b.LOAD_TIME_MS]=
m;c[b.STATUS_CODE]=r;k(c)};this.reportVideoReadyForPlayback=function(m,r,c){var e=a(d.VIDEO_READY_FOR_PLAYBACK);e[b.LOAD_TIME_MS]=m;e[b.RETRY_COUNT]=r;e[b.PERCENT_DOWNLOADED]=c;k(e)};this.reportVideoPlaybackInitiated=function(m){var r=a(d.VIDEO_PLAYBACK_INITIATED);r[b.VIDEO_CURRENT_TIME_MS]=m;k(r)};this.reportVideoPlaybackStarted=function(m,r,c){var e=a(d.VIDEO_PLAYBACK_STARTED);e[b.VIDEO_CURRENT_TIME_MS]=m;e[b.PERCENT_DOWNLOADED]=r;e[b.DROPPED_FRAMES]=c;k(e)};this.reportTimeToFirstFrame=function(m,
r,c){var e=a(d.TIME_TO_FIRST_FRAME);e[b.LOAD_TIME_MS]=m;e[b.PERCENT_DOWNLOADED]=r;e[b.DROPPED_FRAMES]=c;k(e)};this.reportVideoBufferingStarted=function(m,c,e){var f=a(d.VIDEO_BUFFERING_STARTED);f[b.VIDEO_CURRENT_TIME_MS]=m;f[b.PERCENT_DOWNLOADED]=c;f[b.DROPPED_FRAMES]=e;k(f)};this.reportVideoBufferingEnded=function(m,c,e){var f=a(d.VIDEO_BUFFERING_ENDED);f[b.VIDEO_CURRENT_TIME_MS]=m;f[b.PERCENT_DOWNLOADED]=c;f[b.DROPPED_FRAMES]=e;k(f)};this.reportVideoPlaybackFailure=function(m,c,e){var f=a(d.VIDEO_PLAYBACK_FAILURE);
f[b.VIDEO_CURRENT_TIME_MS]=m;f[b.ERROR_MESSAGE]=c;f[b.ERROR_CODE]=e;k(f)};this.reportVideoDurationPlayed=function(m,c,e){var f=a(d.VIDEO_DURATION_PLAYED);f[b.VIDEO_BOUNDRY_CROSSED_TIME_MS]=m;f[b.PERCENT_DOWNLOADED]=c;f[b.DROPPED_FRAMES]=e;k(f)};this.reportPlaybackCompleted=function(m,c){var e=a(d.PLAYBACK_COMPLETED);e[b.VIDEO_CURRENT_TIME_MS]=m;e[b.DROPPED_FRAMES]=c;k(e)};this.reportVideoOnScreen=function(m){var c=a(d.VIDEO_ON_SCREEN);c[b.PERCENT_DOWNLOADED]=m;k(c)};this.reportVideoOffScreen=function(m,
c,e){var f=a(d.VIDEO_OFF_SCREEN);f[b.TIME_ON_SCREEN_MS]=m;f[b.WAS_BUFFERING]=c;f[b.VIDEO_CURRENT_TIME_MS]=e;k(f)};this.reportVideoView=function(m,c){var e=a(d.VIDEO_VIEW);e[b.CONTINUOUS_PLAYBACK_DURATION_MS]=m;k(e);c&&u&&u.flush(u,!0)};this.reportVideoPauseInitiated=function(m){var c=a(d.VIDEO_PAUSED_INITIATED);c[b.VIDEO_CURRENT_TIME_MS]=m;k(c)};this.reportVideoPaused=function(m,c,e){var f=a(d.VIDEO_PAUSED);f[b.VIDEO_CURRENT_TIME_MS]=m;f[b.PERCENT_DOWNLOADED]=c;f[b.DROPPED_FRAMES]=e;k(f)};this.reportVideoSoundOn=
function(c,e){var f=a(d.VIDEO_SOUND_ON);f[b.VIDEO_CURRENT_TIME_MS]=c;f[b.SOUND_TOGGLE_METHOD]=e;k(f)};this.reportVideoSoundOff=function(c,e){var f=a(d.VIDEO_SOUND_OFF);f[b.VIDEO_CURRENT_TIME_MS]=c;f[b.SOUND_TOGGLE_METHOD]=e;k(f)};this.reportVideoClicked=function(c){var e=a(d.VIDEO_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportProductClicked=function(c){var e=a(d.PRODUCT_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportProductTitleClicked=function(){var b=a(d.PRODUCT_TITLE_CLICKED);
k(b)};this.reportProductReviewCountClicked=function(){var b=a(d.PRODUCT_REVIEW_COUNT_CLICKED);k(b)};this.reportProductPriceClicked=function(){var b=a(d.PRODUCT_PRICE_CLICKED);k(b)};this.reportLinkClicked=function(c){var e=a(d.LINK_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportCallToActionClicked=function(c){var e=a(d.CALL_TO_ACTION_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportHeadlineClicked=function(c){var e=a(d.HEADLINE_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportImageClicked=
function(c){var e=a(d.IMAGE_CLICKED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportBlankScreenLoadFailure=function(){var b=a(d.BLANK_SCREEN_LOAD_FAILURE);k(b)};this.reportPlaybackFailedToStartAfterPlay=function(){var b=a(d.PLAYBACK_FAILED_TO_START_AFTER_PLAY);k(b)};this.reportAudioToggleIconDisplayed=function(){var b=a(d.AUDIO_TOGGLE_ICON_DISPLAYED);k(b)};this.reportPlayButtonShown=function(){var b=a(d.PLAY_BUTTON_SHOWN);k(b)};this.reportPlayButtonClicked=function(c){var e=a(d.PLAY_BUTTON_CLICKED);
e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportDurationTickerDisplayed=function(c){var e=a(d.VIDEO_DURATION_TICKER_SHOWN);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportVideoHoverCTAShown=function(e){var c=a(d.VIDEO_HOVER_CTA_SHOWN);c[b.VIDEO_CURRENT_TIME_MS]=e;k(c)};this.reportVideoHoverCTAHidden=function(c){var e=a(d.VIDEO_HOVER_CTA_HIDDEN);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportVideoAborted=function(e){var c=a(d.VIDEO_ABORTED);c[b.VIDEO_CURRENT_TIME_MS]=e;k(c)};this.reportVideoSuspended=function(c){var e=
a(d.VIDEO_SUSPENDED);e[b.VIDEO_CURRENT_TIME_MS]=c;k(e)};this.reportVideoPlayPromiseRejected=function(e){var c=a(d.VIDEO_PLAY_PROMISE_REJECTED);c[b.ERROR_MESSAGE]=e;k(c)};this.reportVideoPlayPromiseNotSupported=function(){var b=a(d.VIDEO_PLAY_PROMISE_NOT_SUPPORTED);k(b)}}function c(){function c(){var f=[];f[b.METRICS_IDENTIFIER]=a;f[b.WIDGET_INDEX]=e;f[b.DEVICE_ENV]=d;f[b.DEVICE_OS]=g;f[b.DEVICE_TYPE]=t;f[b.DEVICE_PLATFORM_VERSION]=m;f[b.DEVICE_MODEL]=l;f[b.DEVICE_MAKE]=p;f[b.APP_VERSION]=n;f[b.STAGE]=
B;f[b.SLOT_ID]=k;f[b.CLIENT_ID]=C;f[b.WEBLABS]=D;f[b.LANGUAGE]=E;f[b.VIDEO_PREVIEW_IMAGE_SRC]=F;f[b.VIDEO_SRC]=w;f[b.HAS_AUDIO]=G;f[b.MARKETPLACE_ID]=H;f[b.WIDGET_TYPE]=I;f[b.WIDGET_GROUP_ID]=J;return f}var a=q,k=q,e=q,d=q,g=q,t=q,m=q,l=q,p=q,n=q,B=q,C=q,D=q,E=q,F=q,w=q,G=q,H=q,K="https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",z=q,I=q,J=q,x=q;this.withMetricsIdentifier=function(b){a=b;return this};this.withSlotId=function(a){k=a;return this};this.withWidgetIndex=function(a){e=
a;return this};this.withDeviceEnv=function(a){d=a;return this};this.withDeviceOs=function(a){g=a;return this};this.withDeviceType=function(a){t=a;return this};this.withDevicePlatformVersion=function(a){m=a;return this};this.withDeviceModel=function(a){l=a;return this};this.withDeviceMake=function(a){p=a;return this};this.withAppVersion=function(a){n=a;return this};this.withStage=function(a){B=a;return this};this.withClientId=function(a){C=a;return this};this.withWeblabs=function(a){D=a;return this};
this.withLanguage=function(a){E=a;return this};this.withVideoPreviewImageSrc=function(a){F=a;return this};this.withVideoSrc=function(a){w=a;return this};this.withHasAudio=function(a){G=a;return this};this.withMarketplaceId=function(a){H=a;return this};this.withSushiSourceGroupEndpoint=function(a){K=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events";return this};this.withAutomatedTestMetricsClient=function(a){z=a;return this};this.withWidgetType=function(a){I=a;return this};
this.withWidgetGroupId=function(a){J=a;return this};this.build=function(){x=new h(K);z!==q&&x.setAutomatedTestMetricsClient(z);x.setDefaultEventAttributes(c());return x}}var d={ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",AUDIO_TOGGLE_ICON_DISPLAYED:"AudioToggleIconDisplayed",BLANK_SCREEN_LOAD_FAILURE:"BlankScreenLoadFailure",CALL_TO_ACTION_CLICKED:"CallToActionClicked",AD_FEEDBACK_LOAD_FAILED:"AdFeedbackLoadFailed",AD_FEEDBACK_LOAD_SUCCEEDED:"AdFeedbackLoadSucceeded",AD_FEEDBACK_POPOVER_OPENED:"AdFeedbackPopoverOpened",
HEADLINE_CLICKED:"HeadlineClicked",IMAGE_CLICKED:"ImageClicked",LINK_CLICKED:"LinkClicked",NO_VIDEO_SRC_ON_ELEMENT:"NoVideoSrcOnElement",PLAY_BUTTON_CLICKED:"PlayButtonClicked",PLAY_BUTTON_SHOWN:"PlayButtonShown",PLAYBACK_COMPLETED:"PlaybackCompleted",PREVIEW_IMAGE_LOAD_FAILURE:"PreviewImageLoadFailure",PREVIEW_IMAGE_LOAD_SUCCESS:"PreviewImageLoadSuccess",PRODUCT_CLICKED:"ProductClicked",PRODUCT_TITLE_CLICKED:"ProductTitleClicked",PRODUCT_REVIEW_COUNT_CLICKED:"ProductReviewCountClicked",PRODUCT_PRICE_CLICKED:"ProductPriceClicked",
TIME_TO_FIRST_FRAME:"TimeToFirstFrame",VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",VIDEO_CLICKED:"VideoClicked",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_DURATION_TICKER_SHOWN:"VideoDurationTickerShown",VIDEO_HOVER_CTA_HIDDEN:"VideoHoverCTAHidden",VIDEO_HOVER_CTA_SHOWN:"VideoHoverCTAShown",VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_INITIATED:"VideoPausedInitiated",VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",
VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",VIDEO_SOUND_OFF:"VideoSoundOff",VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_VIEW:"VideoView",PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_ABORTED:"VideoAborted",VIDEO_SUSPENDED:"VideoSuspended",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected",VIDEO_PLAY_PROMISE_NOT_SUPPORTED:"VideoPlayPromiseNotSupported"},b={APP_VERSION:"appVersion",
CLIENT_ID:"clientId",CONTINUOUS_PLAYBACK_DURATION_MS:"continuousPlaybackDurationMs",DEVICE_MAKE:"deviceMake",DEVICE_MODEL:"deviceModel",DEVICE_ENV:"deviceEnv",DEVICE_OS:"deviceOs",DEVICE_TYPE:"deviceType",DEVICE_PLATFORM_VERSION:"devicePlatformVersion",DROPPED_FRAMES:"droppedFrames",ERROR_MESSAGE:"errorMessage",ERROR_CODE:"errorCode",EVENT_TYPE:"eventType",HAS_AUDIO:"hasAudio",LOAD_TIME_MS:"loadTimeMs",MARKETPLACE_ID:"marketplaceId",METRICS_SEQUENCE_NUMBER:"metricsSequenceNumber",METRICS_IDENTIFIER:"metricsIdentifier",
NETWORK_TYPE:"networkType",PERCENT_DOWNLOADED:"percentDownloaded",RETRY_COUNT:"retryCount",LANGUAGE:"language",SLOT_ID:"slotId",SOUND_TOGGLE_METHOD:"soundToggleMethod",STAGE:"stage",STATUS_CODE:"statusCode",TIME_ON_SCREEN_MS:"timeOnScreenMs",USER_AGENT:"userAgent",VIDEO_BOUNDRY_CROSSED_TIME_MS:"videoBoundaryCrossedTimeMs",VIDEO_CURRENT_TIME_MS:"videoCurrentTimeMs",VIDEO_SRC:"videoSrc",VIDEO_PREVIEW_IMAGE_SRC:"videoPreviewImageSrc",WAS_BUFFERING:"wasBuffering",WIDGET_INDEX:"widgetIndex",WEBLABS:"weblabs",
WIDGET_TYPE:"widgetType",WIDGET_GROUP_ID:"widgetGroupId"},e={n:1};return{EVENT_TYPES:d,SOUND_TOGGLE_OFF_CAUSE:{ICON_TAP:"IconTap",VIDEO_OFF_SCREEN:"VideoOffScreen"},SOUND_TOGGLE_ON_CAUSE:{ICON_TAP:"IconTap"},DEFAULT_SUSHI_SOURCE_GROUP_ENDPOINT:"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",builder:function(){return new c}}});n.register("sbv-transportation-client",function(){var g=function(){},l=function(){function c(){if(p.XDomainRequest){var c=new p.XDomainRequest;c.onerror=
g;c.ontimeout=g;c.onprogress=g;c.onload=g;c.timeout=0;return c}if(p.XMLHttpRequest){c=new p.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null}return{send:function(d,b){if(b&&d){var e=c();if(!e)throw"";e.open("POST",d,!0);e.setRequestHeader&&e.setRequestHeader("Content-type","text/plain");e.send(b)}},isSupported:!0}}(),h=function(){return{send:function(c,d){if(c&&d&&!p.navigator.sendBeacon(c,d))throw"";},isSupported:!!p.navigator.sendBeacon}}();return{ajaxClient:l,beaconClient:h}});
n.when("sbv-transportation-client","sbv-event-manager").register("sbv-sushi-client",function(g,l){function h(d,b,e){this.endpoint=b;this.window=d;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=g;var f=this;this.compressor=function(a){function b(c){if(c)switch(typeof c){case "number":return!(isNaN(c)||
Infinity===c)&&c.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return c.length>a.dictionaryIndex.length;default:return!0}return!1}function e(b){a.eventsDictionary[b]="#"+a.dictionaryIndex++;a.reverseEventsDictionary[a.eventsDictionary[b]]=b;return a.eventsDictionary[b]}function f(d){if(b(d)){var g=0;d instanceof Array?g=2:d instanceof Function?g=null:d instanceof Object&&(g=1);switch(g){case 0:return a.eventsDictionary[d]?a.eventsDictionary[d]:e(d);case 2:for(var h=
[],g=0;g<d.length;g++)h[g]=f(d[g]);return h;case 1:g={};for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&(g[a.eventsDictionary[h]?a.eventsDictionary[h]:e(h)]=-1===c.indexOf(h)?f(d[h]):d[h]);return g}}return d}return{compressData:f,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this);this.onBeforeUnload=function(){!0!==f.unloadHandlerCalled&&(f.flush(f,!0),f.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){}return null};
this.resetBatch=function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0};this.sendWithClient=function(a){if(null==this.endpoint||""===this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();return a.send(this.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{return this.sendWithClient(b)}catch(c){}}return null};
this.flush=function(a,b){a.eventsQueue.length&&(b||!1!==a.window.navigator.onLine)&&(b=a.eventsQueue.length,a.sendWithPriority(a.transportationClient.beaconClient,a.transportationClient.ajaxClient),a.resetBatch(),a.ueCount("EventsSent",b))};this.startHighPriorityQueueTimer=function(){0===this.highPriorityFlushInterval?this.flush(this,!1):this.highPriorityTimer||(this.highPriorityTimer=setTimeout(this.flush,this.highPriorityFlushInterval,this,!1))};this.startLowPriorityQueueTimer=function(){this.lowPriorityTimer||
(this.lowPriorityTimer=setTimeout(this.flush,this.lowPriorityFlushInterval,this,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+this.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};
this.decorateEvent=function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()};this.encodeEvent=function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this,!0);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)};
this.addEvent=function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){this.eventSequence++;1E3<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 1E3<this.eventSequence};this.isValidAPICall=function(a){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")};this.ueCount=function(a,b){if("undefined"!==typeof ue&&
ue&&ue.count)return b=0===b?0:b||(ue.count(e+":"+a)||0)+1,ue.count(e+":"+a,b),b};this.processEvent=function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess"):this.ueCount("ClientEventsFailed");return c};l.addEventListener(p,"beforeunload",100,this.onBeforeUnload);l.addEventListener(document,"visibilitychange",100,this.onBeforeUnload);l.addEventListener(p,"blur",100,this.onBeforeUnload);l.addEventListener(p,
"pagehide",100,this.onBeforeUnload);p.app||(p.app={});var a=p.app.willDisappear;p.app.willDisappear=function(){a&&a();f.onBeforeUnload()}}var c=["messageId","timestamp"];return{newClient:function(c,b,e){return new h(c,b,e)}}});n.when("A").register("sbv-automated-test-metrics-client",function(g){function l(g){this.videoSingleProduct=g;this.processEvent=function(c){var d=this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR");d===q&&(d=[]);d.push(c);this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR",
d)}}return{newClient:function(g){return new l(g)}}});n.when("A").register("sbv-platform-compatibility",function(g){function l(){return g.capabilities.isAmazonApp&&g.capabilities.ios}var h=null,c=navigator;return{isIOS:function(){return g.capabilities.ios},isIOSWebView:l,canUseViewWillDisappearToReportMetrics:function(){if(!l()||!h)return!1;var c=h.split(".");if(2>c.length)return!1;var b=parseInt(c[0]),c=parseInt(c[1]);return 13<b||13===b&&18<=c},setAppVersion:function(c){h=c},isSafari:function(){return!(!c.vendor||
!c.vendor.match(/apple/i))},isWebView:function(){return g.capabilities.isAmazonApp},_setNavigator:function(d){c=d}}});n.when("A").register("sbv-single-product",function(g){function l(){this.init=function(h,c,d){g.$(h).find("a").click(function(){c.reportProductClicked(d&&d.getVideoCurrentTimeMs())});var b=g.$(h).find(".sbv-product-img");b.data("imgsrc")&&b.attr("src",b.data("imgsrc"));b=g.$(h).find(".faceout-product-title");g.$(b).find("a").click(function(){c.reportProductTitleClicked()});b=g.$(h).find(".faceout-product-review");
g.$(b).find("a").click(function(){c.reportProductReviewCountClicked()});h=g.$(h).find(".faceout-product-price");g.$(h).find("a").click(function(){c.reportProductPriceClicked()})}}return{loadAdFeedback:function(h){var c=document.querySelector(".sbv-ad-feedback"),d=g.$(".sbv-sponsored-label");if(c){var b=g.$(c).data("slotname"),e=g.$(c).data("searchkeywords"),f="";"undefined"!=typeof p.btoa&&e&&(f=btoa(e.replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)})));var b=JSON.stringify({adPlacementMetaData:{adElementId:"video_single_product",
pageType:"Search",slotName:b,pageUrl:"",searchTerms:f},adCreativeMetaData:{adNetwork:"aax",adProgramId:1010,adImpressionId:"",adCreativeId:"",adId:""}}),b=p.location.protocol+"//"+p.location.hostname+"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html?pl\x3d"+encodeURIComponent(b),a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var b=JSON.parse(a.responseText);if(b&&"ok"===b.status){"html"in b&&b.html&&(c.innerHTML=b.html,h.reportAdFeedbackLoadSucceeded(a.status));
if("script"in b&&b.script){var e=document.createElement("script");e.type="text/javascript";e.innerHTML=b.script;c.appendChild(e)}g.$(".sbv-ad-feedback a").click(function(){h.reportAdFeedbackPopoverOpened()})}else d.removeClass("aok-hidden"),h.reportAdFeedbackLoadFailed(a.status)}};a.open("GET",b,!0);a.send()}},initialize:function(g,c,d){(new l).init(g,c,d);this.loadAdFeedback(c)}}});n.register("sbv-retryable",function(){return function(g,l,h,c){function d(){0<f?(f--,b()):(a.cancel(),e())}var b=g,
e=c,f=l,a=this;this._init=function(){b();this._intervalID=setInterval(d,h)};this.cancel=function(){clearInterval(this._intervalID)};this._init()}});n.when("A","sbv-video-mixin").register("sbv-video",function(g,l){var h=function(){this.metricsManager=this.$muteClickRegion=this.$unmuteIcon=this.$muteIcon=this.videoPlayer=null;this.onScreenStartTime=0;this.videoTag=null};g.mixin(h.prototype,l);return{initialize:function(c,d){var b=new h;b.init(c,d);return b}}});n.when("A","sbv-viewability-manager","sbv-metrics-manager",
"sbv-video-player-builder","sbv-platform-compatibility").register("sbv-video-mixin",function(g,l,h,c,d){return{load:function(){this.videoPlayer.load()},toggleAudio:function(){var b=!this.videoPlayer.isMuted();this.setMuteStatus(b,b?h.SOUND_TOGGLE_OFF_CAUSE.ICON_TAP:h.SOUND_TOGGLE_ON_CAUSE.ICON_TAP)},setMuteButtonStatus:function(b){var c=this.$muteIcon,f=this.$unmuteIcon;b?(c.css("fill-opacity",1),f.css("fill-opacity",0)):(c.css("fill-opacity",0),f.css("fill-opacity",1))},setMuteStatus:function(b,
c){var f=this.videoPlayer,a=this.metricsManager;this.setMuteButtonStatus(b);b?(f.mute(),a&&a.reportVideoSoundOff(f.getCurrentTimeMs(),c)):(f.unmute(),a&&a.reportVideoSoundOn(f.getCurrentTimeMs(),c))},initPreviewImage:function(){this.videoTag.setAttribute("poster",this.videoTag.dataset.videopreviewsrc)},displayMuteClickRegion:function(b){b?(this.$muteClickRegion.addClass("aok-block"),this.$muteClickRegion.removeClass("aok-hidden"),this.metricsManager.reportAudioToggleIconDisplayed()):(this.$muteClickRegion.addClass("aok-hidden"),
this.$muteClickRegion.removeClass("aok-block"))},showPlayButton:function(b){b?(this.$playButtonClickRegion.removeClass("aok-hidden"),this.metricsManager.reportPlayButtonShown()):this.$playButtonClickRegion.addClass("aok-hidden")},showVideoCTA:function(b){b?(this.$videoCTA.removeClass("aok-hidden"),this.metricsManager.reportVideoHoverCTAShown(this.videoPlayer.getCurrentTimeMs())):(this.$videoCTA.addClass("aok-hidden"),this.metricsManager.reportVideoHoverCTAHidden(this.videoPlayer.getCurrentTimeMs()))},
manualPlay:function(){var b=this.videoPlayer,c=this.metricsManager;this.showPlayButton(!1);b.play();c.reportPlayButtonClicked(b.getCurrentTimeMs());c.reportVideoPlaybackInitiated(b.getCurrentTimeMs())},onOnePercentViewability:function(b,c){b=this.videoPlayer;var f=this.metricsManager;c?(this.onScreenStartTime=this.getCurrentTimeMs(),f.reportVideoOnScreen(b.getPercentDownloaded())):(b.isMuted()||this.setMuteStatus(!0,h.SOUND_TOGGLE_OFF_CAUSE.VIDEO_OFF_SCREEN),c=this.getCurrentTimeMs()-this.onScreenStartTime,
f.reportVideoOffScreen(c,0!=this.videoBufferingStartTime,b.getCurrentTimeMs()),this.onScreenStartTime=0,b.seekToStart(),b.resetContinuousPlaybackDurationMs())},onFiftyPercentViewability:function(b,c){b=this.videoPlayer;var f=this.metricsManager;c?(b.play(),b.resetContinuousPlaybackDurationMs(),f.reportVideoPlaybackInitiated(b.getCurrentTimeMs()),this.viewSessionStartTime=this.getCurrentTimeMs()):(b.pause(),f.reportVideoPauseInitiated(b.getCurrentTimeMs()),f.reportVideoView(b.getContinuousPlaybackDurationMs(),
d.isIOSWebView()),b.resetContinuousPlaybackDurationMs(),this.viewSessionBufferingDuration=0)},onVideoReadyForPlayback:function(b,c,f){this.metricsManager.reportVideoReadyForPlayback(b,c,f)},onVideoPlaybackFailure:function(b,c,f){this.displayMuteClickRegion(!1);this.metricsManager.reportVideoPlaybackFailure(b,f,c)},onVideoPlaying:function(b,c,f){this.displayMuteClickRegion(!0);this.metricsManager.reportVideoPlaybackStarted(b,c,f)},onVideoPlaybackPaused:function(b,c,f){this.displayMuteClickRegion(!1);
this.metricsManager.reportVideoPaused(b,c,f)},onVideoBufferingStarted:function(b,c,f){var a=this.metricsManager;this.videoBufferingStartTime=this.getCurrentTimeMs();a.reportVideoBufferingStarted(b,c,f)},getCurrentTimeMs:function(){return Date.now()},onVideoBufferingEnded:function(b,c,f){var a=this.metricsManager;this.videoBufferingStartTime=0;a.reportVideoBufferingEnded(b,c,f)},onTimeToFirstFrame:function(b,c,f){this.metricsManager.reportTimeToFirstFrame(b,c,f)},onPlaybackCompleted:function(b,c){this.metricsManager.reportPlaybackCompleted(b,
c)},onDurationPlayed:function(b,c,f){this.metricsManager.reportVideoDurationPlayed(b,c,f)},onContinuousDurationPlayed:function(b){this.metricsManager.reportVideoView(b,!0)},logClick:function(){var b=this.videoPlayer,c=this.metricsManager;c&&c.reportVideoClicked(b.getCurrentTimeMs())},getVideoCurrentTimeMs:function(){return this.videoPlayer.getCurrentTimeMs()},onVideoAborted:function(b){var c=this.metricsManager;c&&c.reportVideoAborted(b)},onVideoSuspended:function(b){var c=this.metricsManager;c&&
c.reportVideoSuspended(b)},onVideoPlayPromiseRejected:function(b){var c=this.metricsManager;d.isIOS()&&null!==b&&""!==b&&b.startsWith("NotAllowedError")&&this.showPlayButton(!0);c&&c.reportVideoPlayPromiseRejected(b)},onVideoPlayPromiseNotSupported:function(){var b=this.metricsManager;b&&b.reportVideoPlayPromiseNotSupported()},init:function(b,e){function f(a,b,c){k.onDurationPlayed(a,b,c)}function a(a){k.onContinuousDurationPlayed(a)}b=g.$(b);this.videoTag=b.find("video:first").get(0);var k=this;
k.metricsManager=e;k.initPreviewImage();var h=c.builder(this.videoTag).withVideoReadyForPlaybackHandler(function(a,b,c){k.onVideoReadyForPlayback(a,b,c)}).withTimeToFirstFrameHandler(function(a,b,c){k.onTimeToFirstFrame(a,b,c)}).withVideoPlaybackFailureHandler(function(a,b,c){k.onVideoPlaybackFailure(a,b,c)}).withVideoPlayingHandler(function(a,b,c){k.onVideoPlaying(a,b,c)}).withVideoPlaybackPausedHandler(function(a,b,c){k.onVideoPlaybackPaused(a,b,c)}).withPlaybackCompletedHandler(function(a,b){k.onPlaybackCompleted(a,
b)}).withVideoBufferingStartedHandler(function(a,b,c){k.onVideoBufferingStarted(a,b,c)}).withVideoBufferingEndedHandler(function(a,b,c){k.onVideoBufferingEnded(a,b,c)}).withVideoPlayedToBoundaryHandler(2E3,f).withVideoPlayedToBoundaryHandler(15E3,f).withVideoPlaybackFailedAfterPlayErrorCallback(function(){e.reportPlaybackFailedToStartAfterPlay()}).withVideoAbortedHandler(function(a){k.onVideoAborted(a)}).withVideoSuspendedHandler(function(a){k.onVideoSuspended(a)}).withVideoPlayPromiseRejectedHandler(function(a){k.onVideoPlayPromiseRejected(a)}).withVideoPlayPromiseNotSupportedHandler(function(){k.onVideoPlayPromiseNotSupported()});
d.isIOSWebView()&&!d.canUseViewWillDisappearToReportMetrics()&&(h=h.withVideoPlayedToContinuousBoundaryHandler(2E3,a));h=h.build();k.videoPlayer=h;b.find("a").click(function(){k.logClick()});var u=b.find('[data-itemid\x3d"sbv-video-mute-click-region"]');k.$muteClickRegion=u;k.$muteIcon=b.find('[data-itemid\x3d"sbv-video-mute-icon"]');k.$unmuteIcon=b.find('[data-itemid\x3d"sbv-video-unmute-icon"]');k.setMuteButtonStatus(h.isMuted());u.click(function(){k.toggleAudio()});h=b.find('[data-itemid\x3d"sbv-video-play-click-region"]');
k.$playButtonClickRegion=h;h.click(function(){k.manualPlay()});if(h=b.find(".sbv-video-hover-cta-container"))k.$videoCTA=h,b.find(".sbv-video-overlay").hover(function(){k.showVideoCTA(!0)},function(){k.showVideoCTA(!1)});k.load();l.registerElement(this.videoTag,.5,!0,!0,!0,function(a,b){k.onFiftyPercentViewability(a,b)});l.registerElement(this.videoTag,.01,!0,!0,!0,function(a,b){k.onOnePercentViewability(a,b)})}}});"use strict";n.when("sbv-retryable","sbv-platform-compatibility").register("sbv-video-player-builder",
function(g,l){function h(b){var a=this,c=0,d=0;this._videoElement=b;this._onVideoBufferingEnded=this._onVideoBufferingStarted=this._onPlaybackCompleted=this._onPlaybackPaused=this._onVideoPlaying=this._onVideoPlaybackFailure=this._onTimeToFirstFrame=this._onVideoReadyForPlayback=q;this._lastOnTimeUpdateCurrentTimeMs=0;this._boundaryChecks=[];this._continuousDurationBoundaryChecks=[];this._retryable=null;this._registerEventListeners=function(){var b=a._videoElement;b.oncanplay=function(){return a._handleVideoReadyForPlaybackEvent()};
b.onerror=function(){!a._assetLoaded&&3>a._retryLoadCount?(a._retryLoadCount++,setTimeout(a._videoElement.load,2E3)):a._handleVideoPlaybackFailureEvent()};b.onplaying=function(){a._handleFirstFramePlayedEvent();a._playbackstate===e.BUFFERING&&a._onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate!==e.END&&a._onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate=e.PLAYING};b.onpause=function(){a._videoElement.currentTime!==
a._videoElement.duration&&(a._playbackstate=e.PAUSED,a._onPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};b.onended=function(){a._playbackstate=e.END;var b=a.getDurationMs();d+=b-c;c=0;a._onPlaybackCompleted(a.getDurationMs(),a.getDroppedFrames());a._playInternal()};b.onwaiting=function(){a._playbackstate=e.BUFFERING;a._onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};b.ontimeupdate=function(){a.cancelPlayRetryable();
var b=a.getCurrentTimeMs(),c=a.getContinuousPlaybackDurationMs();a._continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(c)});a._boundaryChecks.forEach(function(c){c.reportIfBoundaryCrossed(a._lastOnTimeUpdateCurrentTimeMs,b,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a._lastOnTimeUpdateCurrentTimeMs=b};b.onabort=function(){var b=a.getCurrentTimeMs();a._onAborted(b)};b.onsuspend=function(){var b=a.getCurrentTimeMs();a._onSuspended(b)}};this._getDateTime=
function(){return Date.now()};this._playInternal=function(){a._initiatedPlayTime||(a._initiatedPlayTime=a._getDateTime());var b=a._videoElement.play();b?b.catch(function(b){var c="Unknown";"string"===typeof b?c=b:b instanceof DOMException&&(c=b.name+": "+b.message);a._onVideoPlayPromiseRejected(c)}):a._onVideoPlayPromiseNotSupported()};this.cancelPlayRetryable=function(){a._retryable&&(a._retryable.cancel(),a._retryable=null)};this._init=function(){a._playbackstate=e.INITIATED;a._loadStartTime=a._getDateTime();
a._assetLoaded=!1;a._retryLoadCount=0;a._firstFramePlayed=!1;a._initiatedPlayTime=q};this._init();this._registerEventListeners();this._handleVideoReadyForPlaybackEvent=function(){if(!a._assetLoaded){var b=a._getDateTime()-a._loadStartTime;a._onVideoReadyForPlayback(b,a._retryLoadCount,a.getPercentDownloaded());a._assetLoaded=!0}};this._handleFirstFramePlayedEvent=function(){if(!a._firstFramePlayed){var b=a._getDateTime()-a._initiatedPlayTime;a._onTimeToFirstFrame(b,a.getPercentDownloaded(),a.getDroppedFrames());
a._firstFramePlayed=!0}};this._handleVideoPlaybackFailureEvent=function(){var b=a._videoElement;if(b.error){var c="UNKNOWN";if(b.error.code)switch(b.error.code){case 1:c="MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c=b.error.code.toString()}a._onVideoPlaybackFailure(a.getCurrentTimeMs(),c,b.error.message)}};this.addVideoReadyForPlaybackListener=function(b){a._onVideoReadyForPlayback=b;4==a._videoElement.readyState&&
(a._onVideoReadyForPlayback(0,0,a.getPercentDownloaded()),a._assetLoaded=!0)};this.addVideoPlaybackFailureListener=function(b){a._onVideoPlaybackFailure=b;if(a._videoElement.error&&a._videoElement.error.code)a._videoElement.onerror()};this.play=function(){l.isIOS()?(a._retryable&&a.cancelPlayRetryable(),a._retryable=new g(a._playInternal,10,200,function(){a._assetLoaded&&null!=a._playbackFailedAfterPlayErrorCallback&&a._playbackFailedAfterPlayErrorCallback()})):a._playInternal()};this.pause=function(){a.cancelPlayRetryable();
a._videoElement.pause()};this.seekToStart=function(){var b=a.getCurrentTimeMs();d+=b-c;c=0;a._lastOnTimeUpdateCurrentTimeMs=0;a._videoElement.currentTime=0};this.mute=function(){a._videoElement.muted=!0};this.unmute=function(){a._videoElement.muted=!1};this.isMuted=function(){return a._videoElement.muted};this.getCurrentTimeMs=function(){return Math.round(1E3*a._videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a._videoElement.duration)};this.getDroppedFrames=function(){return a._videoElement.getVideoPlaybackQuality?
a._videoElement.getVideoPlaybackQuality().droppedVideoFrames:a._videoElement.webkitDroppedFrameCount!=q?a._videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return d+(a.getCurrentTimeMs()-c)};this.resetContinuousPlaybackDurationMs=function(){var b=a.getCurrentTimeMs();d=0;c=b===a.getDurationMs()?0:b;a._continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var b=a._videoElement.buffered,c=0;if(b){for(var d=
0;d<b.length;d++)c+=b.end(d)-b.start(d);return c/a._videoElement.duration}return 0};this.load=function(){a._videoElement.load()}}function c(b,a){this.reportIfBoundaryCrossed=function(c,d,e,g,h){!isNaN(b)&&0<=b&&b<=e&&(c<=d?b>c&&b<=d&&a(b,g,h):(0<b&&b<=d||b>c&&b<=e)&&a(b,g,h))}}function d(b,a){var c=!1;this.resetReported=function(){c=!1};this.reportIfBoundaryCrossed=function(d){var e;if(e=!c)e=!isNaN(b)&&0<=b&&b<d;e&&(c=!0,a(d))}}function b(b){var a=this;this._videoPlayer=new h(b);this.withVideoReadyForPlaybackHandler=
function(b){a._videoPlayer.addVideoReadyForPlaybackListener(b);return a};this.withTimeToFirstFrameHandler=function(b){a._videoPlayer._onTimeToFirstFrame=b;return a};this.withVideoPlaybackFailureHandler=function(b){a._videoPlayer.addVideoPlaybackFailureListener(b);return a};this.withVideoPlayingHandler=function(b){a._videoPlayer._onVideoPlaying=b;return a};this.withVideoPlaybackPausedHandler=function(b){a._videoPlayer._onPlaybackPaused=b;return a};this.withPlaybackCompletedHandler=function(b){a._videoPlayer._onPlaybackCompleted=
b;return a};this.withVideoBufferingStartedHandler=function(b){a._videoPlayer._onVideoBufferingStarted=b;return a};this.withVideoBufferingEndedHandler=function(b){a._videoPlayer._onVideoBufferingEnded=b;return a};this.withVideoPlayedToBoundaryHandler=function(b,d){a._videoPlayer._boundaryChecks.push(new c(b,d));return a};this.withVideoPlayedToContinuousBoundaryHandler=function(b,c){a._videoPlayer._continuousDurationBoundaryChecks.push(new d(b,c));return a};this.withVideoPlaybackFailedAfterPlayErrorCallback=
function(b){a._videoPlayer._playbackFailedAfterPlayErrorCallback=b;return a};this.withVideoAbortedHandler=function(b){a._videoPlayer._onAborted=b;return a};this.withVideoSuspendedHandler=function(b){a._videoPlayer._onSuspended=b;return a};this.withVideoPlayPromiseRejectedHandler=function(b){a._videoPlayer._onVideoPlayPromiseRejected=b;return a};this.withVideoPlayPromiseNotSupportedHandler=function(b){a._videoPlayer._onVideoPlayPromiseNotSupported=b;return a};this.build=function(){var b=a._videoPlayer;
if(b._onVideoReadyForPlayback&&b._onTimeToFirstFrame&&b._onVideoPlaybackFailure&&b._onVideoPlaying&&b._onPlaybackPaused&&b._onPlaybackCompleted&&b._onVideoBufferingStarted&&b._onVideoBufferingEnded&&b._onAborted&&b._onSuspended&&b._onVideoPlayPromiseRejected&&b._onVideoPlayPromiseNotSupported)return a._videoPlayer;throw Error("Need implements all event listeners");}}var e={PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",INITIATED:"initiated",END:"ended"};return{builder:function(c){return new b(c)}}});
n.register("sbv-event-manager",function(){function g(c){var d=0,b;for(b in c)d++;return d}function l(c,d){return function(b){h[c][d].listeners.forEach(function(c){c.callback&&c.callback(b)})}}var h={};return{addEventListener:function(c,d,b,e){h[c]||(h[c]={});h[c][d]||(h[c][d]={listeners:[],generatedCallback:l(c,d)},c.addEventListener(d,h[c][d].generatedCallback));h[c][d].listeners.push({priority:b,callback:e});h[c][d].listeners.sort(function(b,a){return b.priority-a.priority})},removeEventListener:function(c,
d,b,e){h[c]&&h[c][d]&&(h[c][d].listeners=h[c][d].listeners.filter(function(c){return c.priority!==b||c.callback!==e}),0===h[c][d].listeners.length&&(c.removeEventListener(d,h[c][d].generatedCallback),delete h[c][d],g(h[c])&&delete h[c]))}}});"use strict";n.when("A","amzn-safe-frame-viewability","sbv-platform-compatibility","sbv-event-manager").register("sbv-viewability-manager",function(g,l,h,c){function d(a,b){a.isInView=b;a.callback(a.ratio,b);a.recurring||v(a.element,a.ratio,a.dispatchOnElementInView,
a.dispatchOnElementOutOfView,a.recurring)}function b(a,b){a.dispatchOnElementInView&&b>=a.ratio&&!a.isInView&&d(a,!0);a.dispatchOnElementOutOfView&&b<a.ratio&&a.isInView&&d(a,!1)}function e(a){b(a,0)}function f(a){var c=l.geom(a.element);b(a,c&&c.self&&c.self.iv||0)}function a(){m.forEach(e)}function k(){m.forEach(f)}function n(){document.hidden?a():setTimeout(k,50)}function q(){a();k()}function v(b,d,e,f,l){var t=m.length;m=m.filter(function(a){return!(a.element===b&&a.ratio===d&&a.dispatchOnElementInView===
e&&a.dispatchOnElementOutOfView===f&&a.recurring===l)});0===m.length&&(g.off("afterReady",r),g.off(g.constants.BROWSER_EVENTS.SCROLL,r),g.off(g.constants.BROWSER_EVENTS.RESIZE,r),g.off(g.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,r),c.removeEventListener(document,"visibilitychange",1,n),c.removeEventListener(p,"beforeunload",1,a),h.isWebView()||(c.removeEventListener(p,"focus",1,k),c.removeEventListener(p,"blur",1,a)),h.isSafari()&&!h.isWebView()&&(c.removeEventListener(p,"pagehide",1,a),c.removeEventListener(p,
"pageshow",1,k),c.removeEventListener(p,"popstate",1,q)));return t!==m.length}function t(){h.canUseViewWillDisappearToReportMetrics()&&!A&&(A=!0,p.app||(p.app={}),y=p.app.willDisappear,p.app.willDisappear=function(){a();y&&y()})}var m=[],r,y,A=!1;r=g.throttle(function(){m.forEach(f)},50);return{registerElement:function(b,d,e,l,v,w){b={element:b,ratio:d,dispatchOnElementInView:e,dispatchOnElementOutOfView:l,recurring:v,callback:w};0===m.length&&(g.on("afterReady",r),g.on(g.constants.BROWSER_EVENTS.SCROLL,
r),g.on(g.constants.BROWSER_EVENTS.RESIZE,r),g.on(g.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,r),c.addEventListener(document,"visibilitychange",1,n),h.isWebView()||(c.addEventListener(p,"focus",1,k),c.addEventListener(p,"blur",1,a)),h.isSafari()&&!h.isWebView()&&(c.addEventListener(p,"pagehide",1,a),c.addEventListener(p,"pageshow",1,k),c.addEventListener(p,"popstate",1,q)),t());m.push(b);f(b);return b},deregisterElement:v,_handleRatioInViewChange:b,_onBrowserVisibilityChange:n}});n.declare("sbv-chrome-v84-fix",
{weblab:"SBV_291486",treatment:"T1"});n.declare("sbv-product-image-latency",{weblab:"SBV_284505",treatment:"C"});n.when("sbv-product-image-latency","sbv-tablet-mshop-jsp","sbv-chrome-v84-fix","sbv-asin-faceout-rebuild","sbv-video-duration-ticker","sbv-ad-feedback","sbv-video-hover-cta","sbv-transcode-settings","sbv-eu-translations","sbv-search-sangria").register("sbv-weblab-manager",function(){for(var g=[],l=0;l<arguments.length;l++)g.push(arguments[l]);return{getWeblabs:function(){return g}}});n.when("sbv-weblab-manager").register("sbv-weblabs",
function(g){g=g.getWeblabs();for(var l=[],h=0;h<g.length;h++)l.push(g[h].weblab+":"+g[h].treatment);return l.sort().join(",")});n.declare("sbv-tablet-mshop-jsp",{weblab:"SBV_255850",treatment:"T1"});n.declare("sbv-asin-faceout-rebuild",{weblab:"SBV_275884",treatment:"T1"});n.declare("sbv-search-sangria",{weblab:"SEARCH_275310",treatment:"T1"});n.declare("sbv-video-duration-ticker",{weblab:"SBV_302530",treatment:"T1"});n.declare("sbv-ad-feedback",{weblab:"SBV_266303",treatment:"T1"});n.declare("sbv-video-hover-cta",
{weblab:"SBV_303509",treatment:"C"});n.declare("sbv-transcode-settings",{weblab:"SBV_291884",treatment:"C"});n.declare("sbv-eu-translations",{weblab:"SBV_303762",treatment:"C"})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,e=c._namespace||c.attributeErrors,a=e?e("SearchQuestionAnswerWidgetAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,e){b.when("A","ready").execute("aspa-partial-collapse-expander",function(a){a.on("a:expander:qna_answer_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-partial-collapse-header").addClass("aok-hidden");a.expander.$expander.find(".a-expander-partial-collapse-content").addClass("aspa-padding-none")});
a.on("a:expander:qna_question_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-section-header").addClass("a-text-bold");b.when("a-expander").execute("aspa-question-expander",function(a){a.initializeExpanders()})});a.on("a:expander:qna_question_expander:toggle:collapse",function(a){a.expander.$expander.find(".a-expander-section-header").removeClass("a-text-bold")})});"use strict";b.when("jQuery","rush-framework","a-button").register("aspa-voting-component",function(a,b,e){function n(a,
b){for(var d=0;d<a.length;++d)if(a[d].name===b)return a[d].value;return null}function k(b){function e(){l.addClass("aok-hidden");m.addClass("aok-hidden");p.removeClass("aok-hidden")}function d(){q.removeClass("aok-hidden")}function k(a){401===a.status?(h.unbind("submit"),h.submit()):(l.removeClass("aok-hidden"),m.removeClass("aok-hidden"))}function u(a){401!==a.status&&p.addClass("aok-hidden")}function v(){for(var a={},b=0;b<f.length;++b)"csm-producer"!==f[b].name&&"csm-schema"!==f[b].name&&(a[f[b].name]=
f[b].value);c.ue&&c.ue.event&&c.ue.event(a,r,t);l.addClass("aok-hidden");m.addClass("aok-hidden");q.removeClass("aok-hidden")}var h=a(b.currentTarget),g=h.closest(".aspa-feedback-container"),l=g.find(".aspa-vote-buttons"),p=g.find(".aspa-loading-section"),q=g.find(".aspa-success-section"),m=g.find(".aspa-error-section"),g=h.attr("action"),w=h.attr("method"),f=h.serializeArray(),r=n(f,"csm-producer"),t=n(f,"csm-schema"),x={"X-Requested-With":"XMLHttpRequest"};b.preventDefault();g?a.ajax({url:g,type:w,
data:f,withCredentials:!0,headers:x,beforeSend:e,success:d,error:k,complete:u}):r&&t&&v()}b.registerComponent("aspa-voting-component","aspa-voting-component",function(b){b=a(b.elem()).find(".aspa-vote-form");var c=e(".aspa-upvote-button"),d=e(".aspa-downvote-button");c.isEnabled()||c.enable();d.isEnabled()||d.enable();b.submit(k)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PantryCPIMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,u=p._namespace||p.attributeErrors,c=u?u("QuantitySliderAssets",""):p;c.guardFatal?c.guardFatal(l)(c,window):c.execute(function(){l(c,window)})})(function(l,p,u){l.when("A").register("qs-cart-count-handler",function(c){function d(d,e,a,h,k){c.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:d,clientName:e},success:function(c){c&&c.isOK&&c.total?m.isFunction(h)&&h(c.total.numActiveItem):l.log("Malformed get-cart-count response for sessionId\x3d"+
d,"ERROR",a)},error:function(){l.log("Failed to retrieve get-cart-count response for sessionId\x3d"+d,"ERROR",a);m.isFunction(k)&&k()}})}var m=c.$;return{getTotalCartCount:function(c,e){return d(c.request.sessionId,c.clientName,c.attribution,c.onSuccess,c.onError)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-utils").register("qs-cart-update-handler",function(c,d,m){function f(c){t||(t="quantity-slider-widget-"+c);return t}function e(c,h){if((c=c.$target&&c.$target.closest(".qs-atc-form"))&&
0!==c.length)return c;l.log("Missing $form object","ERROR",f(h.clientName))}function a(a,r,g){c.trigger(d.ACTIONS.ADD_TO_CART_SUBMIT_START,{asin:a,cartType:r.cartType,clientName:r.clientName,isQSAction:g,request:r});h(a,r,!0,g)}function h(h,a,g,b){var n=a.cartType,e=JSON.stringify(b?m.getQSRequestObject(a,g,n):m.getATCRequestObject(a,n));a.ajaxCartUrl&&k.ajax({url:a.ajaxCartUrl,type:m.getHttpMethodType(g,n),data:e,headers:m.getHeadersForRequest(a,g,n),xhrFields:{withCredentials:!0},success:function(n){delete q[h];
(n=m.adaptResponseObject(n,a,g,a.cartType))?(d.setUpdatedQSParamsForAsin(h,{quantityInCart:n.quantity,cartItemId:n.itemId}),c.trigger(g?d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS:d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,{asin:h,cartType:a.cartType,request:a,response:n,clientName:a.clientName,attribution:f(a.clientName),isQSAction:b,isDecreaseQuantityAction:!g}),d.logUrl(a.loggingUrl)):l.log("Invalid Response from the server","ERROR",f(a.clientName))},error:function(e){delete q[h];e=e||{};l.log("Ajax request failed with type: "+
(g?"addItems":"modifyItems")+", status code: "+e.status+", error: "+e.responseText,"ERROR",f(a.clientName));c.trigger(d.ACTIONS.QS_CART_SUBMIT_ERROR,{asin:h,cartType:n,clientName:a.clientName,isQSAction:b,isDecreaseQuantityAction:!g,isMaxOrderQuantityReached:a.quantityInCart>=a.maxOrderQuantity});g&&a.$form&&a.$form.submit()}})}var k=c.$,t="",q={};c.declarative("qs-add-to-cart-trigger","click",function(c){var h=c.data&&c.data.asin,g=d.getQSParamsForAsin(h);c.$event&&c.$event.preventDefault();q[h]||
(q[h]=!0,g.isMultipleAsinsSubmitting=1<Object.keys(q).length,g.$form=e(c,g),a(h,g,!1))});c.declarative("qs-slider-widget-trigger","click",function(k){var f=k.data&&k.data.asin,g=d.getQSParamsForAsin(f),b=k.$target[0]&&k.$target[0].className||"",n=c.contains(b,"qs-increase-quantity")||c.contains(b,"qs-decrease-quantity"),b=c.contains(b,"qs-decrease-quantity");k.$event&&k.$event.preventDefault();n&&!q[f]&&(q[f]=!0,g.isMultipleAsinsSubmitting=1<Object.keys(q).length,b?(c.trigger(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,
{asin:f,cartType:g.cartType,clientName:g.clientName,isQSAction:!0,isDecreaseQuantityAction:!0,request:g}),h(f,g,!1,!0)):(g.$form=e(k,g),a(f,g,!0)))});return{setAttribution:function(a){t=a}}});"use strict";l.when("A","ready").register("qs-cart-update-utils",function(c){function d(b){var a=b.quantityInCart||0;return{items:[{asin:b.asinId,offerListingId:b.offerListingId,quantity:a<b.minOrderQuantity?b.minOrderQuantity-a:1}]}}function m(b,a,c){return(f.isFunction(a[c])?a[c]:a.DEFAULT)(b)}var f=c.$,e=
{DEFAULT:d},a={DEFAULT:d},h={DEFAULT:function(b){var a=b.quantityInCart||0,c;c=b.cartItemId;c=!c||"C"!==c[0]&&"S"!==c[0]?c:c.substring(1);return{items:[{id:c,quantity:a<=b.minOrderQuantity?0:a-1}]}}},k={DEFAULT:function(b){return(b=b.entity&&b.entity.items&&b.entity.items[0])?{itemId:b.id,quantity:b.quantity,isTotal:!0}:null}},t={DEFAULT:function(b,a){b=(a.quantityInCart||0)-1;return 0>b?null:{itemId:b?a.cartItemId:"",quantity:b,isTotal:!0}}},l={DEFAULT:"POST"},p={DEFAULT:"PUT"},r={DEFAULT:function(b){return{"x-api-csrf-token":b.csrfToken,
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"'}}},g={DEFAULT:function(b){return{"x-api-csrf-token":b.csrfToken,Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items.request/v1"'}}};return{getATCRequestObject:function(b,a){return m(b,e,a)},getQSRequestObject:function(b,c,d){return m(b,
c?a:h,d)},adaptResponseObject:function(b,a,c,h){c=c?k:t;return(f.isFunction(c[h])?c[h]:c.DEFAULT)(b,a)},getHttpMethodType:function(b,a){b=b?l:p;return b[a]?b[a]:b.DEFAULT},getHeadersForRequest:function(b,a,c){a=a?r:g;return(f.isFunction(a[c])?a[c]:a.DEFAULT)(b)}}});"use strict";l.when("A","quantity-slider-utils").register("quantity-slider-metrics-handler",function(c,d){function m(a,c){return"QuantitySliderWidget::"+a+"::"+(c?c+"::":"")}function f(a){var c=p.ue;"undefined"!==typeof c&&c.count(a,1)}
function e(c,e){d.assert(c&&e.clientName,"Missing required properties while logging metrics");var l=e.isQSAction?e.isDecreaseQuantityAction?a.QS_DECREASE:a.QS_INCREASE:a.ATC;c=m(e.clientName,e.cartType)+c+"::"+l;f(c)}var a={ATC:"ATC",QS_INCREASE:"QSIncrease",QS_DECREASE:"QSDecrease"};return{logRequestStartMetrics:function(a){e("CountStart",a)},logRequestSuccessMetrics:function(a){e("CountSuccess",a)},logRequestErrorMetrics:function(a){e("CountError",a)},logMaxQuantityReachedMetric:function(a){a=m(a.clientName,
a.cartType)+"MaxQuantityReached";f(a)},logMultipleAsinsSubmittingMetric:function(a){a=m(a.clientName,a.cartType)+"MultipleAsinsSubmitting";f(a)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-handler","quantity-slider-metrics-handler").register("quantity-slider-widget",function(c,d,m,f){function e(b){return"."+b+"-qs-slider-button"}function a(b,a){b=e(b)+" .qs-decrease-quantity";a?d.disableButton(b):d.enableButton(b)}function h(b,a){b=e(b)+" .qs-increase-quantity";a?d.disableButton(b):
d.enableButton(b)}function k(b,a){b="."+b+"-qs-add-to-cart-button .qs-slider-atc-button";a?d.disableButton(b):d.enableButton(b)}function l(b){b.isQSAction&&(b.isDecreaseQuantityAction?d.deselectButton(e(b.asin)+" .qs-decrease-quantity"):d.deselectButton(e(b.asin)+" .qs-increase-quantity"))}function q(b){d.toggleDomNodeVisibility("."+b.asin+"-qs-slider-spinner",!1);var c=b.asin;b.isQSAction?(a(c,!1),h(c,!1)):k(c,!1);l(b);d.assert(b.asin&&b.request&&b.response&&b.response.quantity!==u,"Required properties missing in payload object for UpdateQSWidget");
r(b.asin,b.response.quantity,b.request.maxOrderQuantity);b.request.enableQuantityLimitMessage&&d.toggleDomNodeVisibility("."+b.asin+"-qs-quantity-limit-message",b.response.quantity>=b.request.maxOrderQuantity);d.updateTotalCartCountOnUI(b,b.cartType);f.logRequestSuccessMetrics(b)}function p(b){d.toggleDomNodeVisibility("."+b.asin+"-qs-slider-spinner",!0);var c=b.asin;b.isQSAction?(a(c,!0),h(c,!0)):k(c,!0);f.logRequestStartMetrics(b);b.request&&b.request.isMultipleAsinsSubmitting&&f.logMultipleAsinsSubmittingMetric(b)}
function r(b,a,c){var f="."+b+"-qs-add-to-cart-button",k=e(b);0<a?(d.changeATCtoQS(f,k),f=g("."+b+"-qs-qty-present-in-cart"),Number.isInteger(a)&&f.html(a),h(b,a>=c)):(d.changeQStoATC(f,k),h(b,!1))}var g=c.$;Number.isInteger||(Number.isInteger=function(b){return"number"===typeof b&&isFinite(b)&&-9007199254740992<b&&9007199254740992>b&&Math.floor(b)===b});c.on(d.ACTIONS.ADD_TO_CART_SUBMIT_START,function(b){p(b)});c.on(d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS,function(b){setTimeout(function(){q(b)},1500);
b.response.quantity===b.request.maxOrderQuantity&&f.logMaxQuantityReachedMetric(b)});c.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,function(b){p(b)});c.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,function(b){setTimeout(function(){q(b)},1500)});c.on(d.ACTIONS.QS_CART_SUBMIT_ERROR,function(b){d.toggleDomNodeVisibility("."+b.asin+"-qs-slider-spinner",!1);if(b.isQSAction&&b.isMaxOrderQuantityReached)a(b.asin,!1);else{var c=b.asin;b.isQSAction?(a(c,!1),h(c,!1)):k(c,!1)}l(b);f.logRequestErrorMetrics(b)});
return{ACTIONS:d.ACTIONS,CART_IDEMPOTENT_REQUEST_DELAY:1500,setAttribution:m.setAttribution,updateQuantitySliderWidget:r}});"use strict";l.when("A","qs-cart-count-handler","a-button").register("quantity-slider-utils",function(c,d,m){function f(a){return e("."+a+"-qs-slider-data").first().data("qs-model")}var e=c.$;return{ACTIONS:{ADD_TO_CART_SUBMIT_START:"quantity-slider:add-to-cart-start",ADD_TO_CART_SUBMIT_SUCCESS:"quantity-slider:add-to-cart-success",REMOVE_FROM_CART_SUBMIT_START:"quantity-slider:remove-from-cart-start",
REMOVE_FROM_CART_SUBMIT_SUCCESS:"quantity-slider:remove-from-cart-success",QS_CART_SUBMIT_ERROR:"quantity-slider:cart-submit-error"},assert:function(a,c){if(!a)throw Error(c);},changeATCtoQS:function(a,d){e(a).hasClass("aok-hidden")||(c.hide(a),c.show(d))},changeQStoATC:function(a,d){e(d).hasClass("aok-hidden")||(c.hide(d),c.show(a))},disableButton:function(a){m(e(a)).disable()},deselectButton:function(a){a=m(e(a));a.isEnabled()&&a.setStatus("normal")},enableButton:function(a){m(e(a)).enable()},getQSParamsForAsin:f,
setUpdatedQSParamsForAsin:function(a,d){var k=f(a);e("."+a+"-qs-slider-data").data(c.extend(k,d))},toggleDomNodeVisibility:function(a,d){d?c.show(a):c.hide(a)},updateTotalCartCountOnUI:function(a,f){a=c.extend({},a);a.onSuccess=function(a){p.$Nav&&p.$Nav.when("api.setCartCount").run(function(c){c(a)});l.when("mash").execute("quantity-slider-mash-update",function(c){c.cart&&e.isFunction(c.cart.didUpdate)&&c.cart.didUpdate({newCartQuantity:a})})};d.getTotalCartCount(a,f)},logUrl:function(a){a&&c.post(a)}}})});
/* ******** */
(function(f){var h=window.AmazonUIPageJS||window.P,u=h._namespace||h.attributeErrors,a=u?u("SearchWebVSEVideoWidgetAssets",""):h;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,h,u){f.register("vse-search-utils",function(){function a(a){var b,e;"undefined"!==typeof a&&(b=h.ue)&&(e=b.count(a)||0,b.count(a,e+1))}return{postCountMetric:a,postTimeMetric:function(a,b){var e;"undefined"!==typeof a&&"undefined"!==typeof b&&(e=h.ue)&&e.count(a,b)},logError:function(a,
b,e,c){h.ueLogError&&h.ueLogError(c,{logLevel:a,attribution:b,message:e})},logHideWidgetMetrics:function(d){a("vse_search_widget_hidden");d.trigger("vse:search:widget:hidden")},getAssetSpec:function(a,b){a=a.$(b.currentTarget);b=a.parent().data();var e=a.closest("li").index(),c=a.find(".vse-video-image").data("img");return{contentId:b.asin,title:b.title,vendorName:b.vendorName,vendorCode:b.vendorCode,referenceUrl:b.referenceUrl,referenceLinkTitle:b.referenceTitle,videoUrl:b.videoUrl,$el:a,duration:b.duration,
imageUrl:c,sponsored:b.sponsored|0,videoVoteContainer:{},productAsin:b.productAsin,refTag:"vse-s-ic-"+e,relatedProducts:b.relatedProducts,sponsorProducts:b.sponsorProducts,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoRefId,index:a.closest("li").index()}},reSize:function(a){a.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight})},getModalFactory:function(a){var b=null;a.capabilities.mobile?f.now("a-secondary-view").execute("vse-search-secondary-view-factory",function(a){b=a}):
f.now("a-modal").execute("vse-search-modal-factory",function(a){b=a});return b},refTagRecorder:function(a,b,e,c){c=c||0;if(!(3<=c)){var l=this;a.post("/gp/mobile/tag/?ref\x3dvse_vws_vc_"+b+e,{error:function(){l.refTagRecorder(a,b,e,++c)}})}}}});f.when("vse-search-utils").execute("vse-search-ajax-calls",function(a){f.register("vse-search-preLoadCallHook",function(){function d(b,e){try{var c=b.A,l=b.request,f=b.block,h=b.handleFailure,r=b.handleSuccess;e--;var p=3-e-1,g=c.now();c.ajax("/vap/ew/componentbuilder",
{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||4E3,withCredentials:!0,success:function(b){var d=c.now()-g;a.postTimeMetric("vse_search:preload:success:",d);a.postCountMetric("vse_search:preload:success:"+l.page+":"+l.placement+":"+p);c.$(f).html(b);r(c,l,b)},error:function(k){a.postCountMetric("vse_search:preload:error:"+l.page+":"+l.placement+":"+p);(0===k.http.status||500<=k.http.status&&599>=k.http.status)&&0<e?d(b,e):(a.postCountMetric("vse_search:preload:error:"),
h(c,k))}})}catch(k){a.logError("FATAL","vse_search","[vse_search_preLoadCallHook] ",k)}}return{get:function(a,e,c,l,f){d({A:a,block:e,request:c,handleFailure:f,handleSuccess:l},3)}}});f.register("vse-search-lazyLoadCallHook",function(){function d(b,e,c){try{var l=b.A,f=b.context,h=b.handleFailure,r=b.handleSuccess,p=atob(e.attr("data-configuration")),g=JSON.parse(p),k={pageContext:f,configuration:g},x=l.now();c--;var w=3-c-1;l.ajax("/vap/ew/subcomponent/"+g.type,{params:k,paramsFormat:"json",method:"post",
contentType:"application/json",timeout:f.timeout||4E3,withCredentials:!0,success:function(b){var d=l.now()-x;a.postTimeMetric("vse_search:lazyload:success:",d);a.postCountMetric("vse_search:lazyload:success:"+k.page+":"+k.placement+":"+w);e.html(b);r(l,k,b,g.type)},error:function(f){a.postCountMetric("vse_search:lazyload:error:"+k.page+":"+k.placement+":"+w);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<c?d(b,e,c):(a.postCountMetric("vse_search:lazyload:error:"),h(l,k,f,g.type))}})}catch(t){a.logError("FATAL",
"vse_search","[vse_search_lazyLoadCallHook] ",t)}}return{get:function(a,e,c,f,h){var v=a.$;v(e+" div[data-configuration]").each(function(){d({A:a,context:c,handleFailure:h,handleSuccess:f},v(this),3)})}}})});"use strict";f.when("A","vse-search-utils","vse-search-preLoadCallHook","vse-search-lazyLoadCallHook","rush-framework").register("vse-search-widget",function(a,d,b,e,c){a.$(".vse-search-video-carousel").delegate(".vse-video-card.vse-avoid-clicks","click",function(){d.postCountMetric("vse-search.widgetClickedBeforeRushFramework")});
c.registerComponent("vse-search-widget","vse-search-widget",function(c){try{var h=a.now();d.postTimeMetric("vse-search-preload-load-time",h);var v,r,p,g,k=!1,x=!1,w=!1,t=!0,u=!1,n=c.elem();f.when("af").execute("vse-search-widget-load-images-lazily",function(){a.loadDescendantImagesManually(a.$(n));a.trigger("a:image:vse:manualLoaded")});c=function G(){if(n)if(w)a.off("scroll",G);else if(a.onScreen(a.$(n),0)){var b=a.now()-h;k?(d.postCountMetric("vse-search.widgetViewedWithLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithLightboxWidgetsDuration",
b)):(d.postCountMetric("vse-search.widgetViewedWithNoLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithNoLightboxWidgetsDuration",b));d.postTimeMetric("vse-search-preload.pageLoadToWidgetViewedDuration",b);w=!0}};c();a.on("scroll",c);var A=a.$(n).attr("data-page-state");if(A){var H=atob(A),m=JSON.parse(H);g=m.clientPrefix;var I=m.popoverTriggerId,q=m.popoverContainerId,B=m.popoverName,y=m.initialVideo,J=m.celQueryStringParam,z=m.videoDataList,C=0;p={requester:m.requester,clientPrefix:g,
page:m.page,placement:m.placement,device:m.device,locale:m.locale,requestId:m.requestId,sessionId:m.sessionId,customerId:m.customerId,marketplaceID:m.marketplaceID,metadata:m.metadata,videoDataList:z,video:{contentID:y.contentId,contentIDType:"ASIN",videoURL:y.videoURL,imageURL:y.videoImageUrl},product:{contentID:y.relatedProductsAsins,contentIDType:"ASIN"}};var D=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+":failed")},E=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+
":succeeded")};b.get(a,"#"+q+" .vse-search-video-block",p,function(a){t=!1;f.when("VSEComponentAssets").execute("vse-search-preload-success",function(){k=!0;x&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedBeforePreload"));a.delay(function(){d.reSize(a)},500)});a.trigger("vse:"+g+":preload:succeeded")},function(a){k=!1;a.trigger("vse:"+g+":preload:failed");d.logHideWidgetMetrics(a)});a.$(n).find(".vse-search-video-carousel").delegate(".vse-video-card a",
"click",function(b){if(!t){b.preventDefault();var c=d.getModalFactory(a);r=d.getAssetSpec(a,b);a.objectIsEmpty(c)?(t=!0,d.logHideWidgetMetrics(a)):(v=c.get(a.$("#"+I)),a.objectIsEmpty(v)?(t=!0,d.logHideWidgetMetrics(a)):(v.show(),d.refTagRecorder(a,r.index,J,0)))}});a.on("a:popover:afterShow:"+B,function(b){x=!0;a.$(b.popover.$popover).addClass(a.$("#"+q).data("cssClass"));C++;k&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),1===C&&(e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedAfterPreload")));
d.reSize(a)});a.on("a:popover:beforeHide:"+B,function(){k&&(a.trigger("vse:"+g+":page:lightBoxClosed"),a.$("#"+q+" .vse-placeholder").addClass("aok-hidden"),a.$("#"+q+" .vse-search-video-block").removeClass("vse-search-absolute-lb"))});a.on(g+":vse:player:registered",function(){a.$("#"+q+" .vse-search-video-block").first().animate({opacity:1})});a.declarative(g+"-carousel-see-more","click touch",function(){a.$(n).find(".vse-video-card").first().find(".vse-carousel-item").click()});a.on(g+":vse:sushiMetrics",
function(b){var c=z.map(function(a){return a.contentId}).join(","),d=function(){f.when("A","a-carousel-framework").execute("vse-carousel-metric-handler",function(a,c){var d=c.getCarousel(a.$(n).find(".vse-search-video-carousel")),e=d.getAttr("name"),f=[];z.map(function(a){f.push({videoAsin:a.contentId,impressionRecorded:!1})});c=function F(){for(var c=d.getAttr("pageNumber"),h=d.getAttr("pageSize"),k=d.getAttr("totalPages"),g=0;g<Math.min(c*h,f.length);g++)if(!f[g].impressionRecorded){var l=b.buildSushiPayload({eventName:"vse-search.thumbnailImpression",
stringPayload:"",intPayload:1,videoAsin:f[g].videoAsin});b.postMetric.emitSushiMetric(l,b.endpoint);f[g].impressionRecorded=!0}c===k&&(a.off("a:carousel:"+e+":change:pageSize",F),a.off("a:carousel:"+e+":change:pageNumber",F))};c();a.on("a:carousel:"+e+":change:pageSize",c);a.on("a:carousel:"+e+":change:pageNumber",c)})},e=function K(){if(n)if(u)a.off("scroll",K);else if(a.onScreen(a.$(n),0)){var e=b.buildSushiPayload({eventName:"vse-search.pageView",stringPayload:"",intPayload:1,videoAsinList:c});
b.postMetric.emitSushiMetric(e,b.endpoint);d();u=!0}},h=b.buildSushiPayload({eventName:"vse-search.pageRender",stringPayload:"",intPayload:1,videoAsinList:c});b.postMetric.emitSushiMetric(h,b.endpoint);e();a.on("scroll",e)});a.$(n).find(".vse-sm-link").removeClass("vse-avoid-clicks");a.$(n).find(".vse-video-card").removeClass("vse-avoid-clicks");a.$(n).find(".vse-search-container-spinner").addClass("aok-hidden");d.postTimeMetric("vse-search.timeToRemoveSpinner",a.now()-h)}else d.logHideWidgetMetrics(a),
d.postCountMetric("vse-search-preload-page-state-not-found")}catch(L){t=!0,d.logHideWidgetMetrics(a)}})})});
/* ******** */
(function(t){var p=window.AmazonUIPageJS||window.P,v=p._namespace||p.attributeErrors,h=v?v("MiraiDiscoverWidgetSearchWebAssets",""):p;h.guardFatal?h.guardFatal(t)(h,window):h.execute(function(){t(h,window)})})(function(t,p,v){t.when("A","ready").register("mirai-discover-constants",function(){return{BOX_ID_PREFIX:"sbl-item-box-",GET_RECOMMENDATION:"getRecommendationsRS",GET_RECOMMENDATION_ADD_LIKE:"getRecommendationsForLikeRS",GET_RECOMMENDATION_ADD_DISLIKE:"getRecommendationsForDislikeRS",LIKE_PREFIX:"L",
DISLIKE_PREFIX:"D",SBL_WEBSITE_ADDRESS_PREFIX:"/discover/",SBL_FLIP_BOX_CLASS:"sbl-item-box-flip",DESKTOP_NUM_ROWS_PER_SHOW_MORE:2,MOBILE_NUM_ROWS_PER_SHOW_MORE:2,INITIAL_ITEM_COUNT_DESKTOP:8,INITIAL_ITEM_COUNT_MOBILE:4,END_OF_RECOMMENDATIONS_START_INDEX:-1,RATINGS_HALF_STAR_THRESHOLD:.5,RATINGS_MAX_STAR:5,AUI_EMPTY_IMAGE_URL:"https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/grey-pixel.gif",HTTP_ERROR_NO_CONTENT:204,AUI_HIDDEN_CLASS:"aok-hidden",ANIMATION_DURATION_MILLISECONDS:500,
ITEMS_SECTION_ANIMATION_DURATION_MILLISECONDS:200,SCROLL_ANIMATION_MILLISECONDS:500,SCROLL_HEIGHT_MULTIPLIER:1.3,NUMBER_TWO:2,CHANGEOVER_FADE_IN:200,CHANGEOVER_FADE_OUT:200,CHANGEOVER_SHOW_DELAY:5E3,RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY:5E3,DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION:275,LINK_TO_REVIEW_SECTION_TAG:"#customerReviews"}});t.when("A","ready").register("mirai-discover-utils",function(){return{getElementData:function(h){var d=h.data();d&&d.asin&&(d.asin=h.attr("data-asin"));d&&d.refinements&&(d.refinements=
h.attr("data-refinements"));return d},getHiddenElementWidthById:function(h){h=document.getElementById(h);return parseInt(p.getComputedStyle(h).getPropertyValue("width"),10)},escapeSelector:function(h){return h.toString().replace(/(:|\.|\[|\]|,|=|@|\>|\<)/g,"\\$1")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-helpers",function(h,d,b,l){return{refMarkerPrefix:"sbl_swb",generateAsinToDpURL:function(a,b,c,d,h){d=d.split("?");return"/dp/"+
a+"/ref\x3d"+this.refMarkerPrefix+(b?"_m_":"_")+c+"?"+(1<d.length?d[1]:"").replace(h,a)},scrollTwoPixelsToActivateLazyLoad:function(){d("html, body").animate({scrollTop:d(p).scrollTop()+b.NUMBER_TWO},b.SCROLL_ANIMATION_MILLISECONDS)},changePageScrollTopIfRequire:function(a,g,c){var h=d(p).scrollTop();a=a.offset().top+g+c-(h+d(p).height());1<a?d("html, body").animate({scrollTop:h+a},b.ANIMATION_DURATION_MILLISECONDS):this.scrollTwoPixelsToActivateLazyLoad()},showNoContentChangeover:function(a,g){var c=
a.find("#sbl-no-content-message"),d=g.find(".sbl-item-detail-row");a=a.find(".sbl-items-row").offset();c.removeClass(b.AUI_HIDDEN_CLASS);c.css({top:d.offset().top-a.top,left:g.position().left,width:g.width()});c.stop(!0,!0).fadeIn(b.CHANGEOVER_FADE_IN).delay(b.CHANGEOVER_SHOW_DELAY).fadeOut(b.CHANGEOVER_FADE_OUT)},getCurrentBoxesAsinsOnPage:function(a){return a.find(".sbl-item-box").map(function(){return l.getElementData(d(this)).asin}).get()},getNumItemsPerRow:function(a){return Math.round(a.width()/
a.children().eq(0).width())},updateReviewStars:function(a,g,c,d,h){var k=a.find(".sbl-item-review-stars"),f=a.find(".sbl-item-review-count");a=a.find("span.a-declarative");var e;if(!g||g<b.RATINGS_HALF_STAR_THRESHOLD)0<a.length?a.remove():k.remove(),f.remove();for(e=0;e<=b.RATINGS_MAX_STAR;e++)k.removeClass("a-star-small-"+e).removeClass("a-star-small-"+e+"-5");e=Math.floor(g);k.addClass("a-star-small-"+e+(g-e>=b.RATINGS_HALF_STAR_THRESHOLD?"-5":""));f.text(c);f.is("a")&&f.attr("href",h+b.LINK_TO_REVIEW_SECTION_TAG);
0<a.length&&(g=JSON.parse(a.attr("data-a-popover")),g.url+="\x26asin\x3d"+d,a.attr("data-a-popover",JSON.stringify(g)))},updateShowMoreSectionStatus:function(a,g){g===b.END_OF_RECOMMENDATIONS_START_INDEX?a.find("#sbl-show-more").hide():a.find("#sbl-show-more").show()},updatePriceInformation:function(a,g,c){c.price&&(a.find(".a-offscreen").text(c.price),a.find(".a-price-whole").text(c.priceWhole),a.find(".a-price-fraction").text(c.priceFraction),a.find(".a-price-symbol").text(c.currencySymbol),a.removeClass(b.AUI_HIDDEN_CLASS));
c.basisPrice&&(g.text(c.basisPrice),g.removeClass(b.AUI_HIDDEN_CLASS))},swapBoxOnThePage:function(a,g,c,d,h){var k=a.find("#sbl-item-box-empty");a=k.find(".sbl-item-rating").clone();var f=k.find(".sbl-item-price").clone(),e=f.find(".sbl-item-price-current"),u=f.find(".sbl-item-price-original"),k=k.find(".sbl-item-prime").clone(),w,B;if(null===g||0===g.length||c===v)return!1;B=l.getElementData(g).asin;g.attr("data-asin",c.asin);g.data("asin",c.asin);g.attr("data-physical-id",c.physicalId);g.data("physicalId",
c.physicalId);g.attr("id",b.BOX_ID_PREFIX+c.asin);w=g.find(".sbl-item-top").children("a");d=this.generateAsinToDpURL(c.asin,d,h,w.attr("href"),B);w.attr("href",d);this.updatePriceInformation(e,u,c);g.find(".sbl-item-price").replaceWith(f);c.prime?k.find(".sbl-item-prime-icon").removeClass(b.AUI_HIDDEN_CLASS):k.find(".sbl-item-prime-icon").addClass(b.AUI_HIDDEN_CLASS);k.append(c.deliveryMessage);g.find(".sbl-item-prime").replaceWith(k);g.find(".sbl-button").removeClass("selected");g.removeClass("sbl-item-disliked");
h=g.find(".sbl-item-image");f=c.imageUrl;e=c.title;h.attr("src",b.AUI_EMPTY_IMAGE_URL);h.attr("data-src",f);h.data("src",f);h.addClass("a-lazy-loaded");h.attr("alt",e);h.attr("title",e);this.updateReviewStars(a,c.rating,c.ratingCount,c.asin,d);g.find(".sbl-item-rating").replaceWith(a);return!0},animateFadeColorBox:function(a){a=a.find(".sbl-item-box-inner-fade");a.removeClass(b.AUI_HIDDEN_CLASS);a.css("opacity",1);a.show();a.animate({opacity:0},b.ANIMATION_DURATION_MILLISECONDS,function(){d(this).hide()})},
resetHeightToAuto:function(){d(this).height("auto")},removeHrefFromShowMoreElement:function(){d("#sbl-show-more").removeAttr("href")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-refinements",function(h,d,b,l){function a(a){a.find("#sbl-refinement-prime-button .sbl-prime-toggle").removeClass("sbl-prime-toggle-selected")}function g(a,c,f,e,k){var g=n.find("#sbl-selected-refinement-row"),d=g.find("#sbl-selected-refinement-empty").clone();
f=k?k:f+(e?": "+e:"");d.attr("data-refinement-element-id",c);d.attr("id","sbl-selected-refinement-"+a);d.find(".sbl-selected-refinement-item-title").text(f);d.removeClass(b.AUI_HIDDEN_CLASS);g.append(d)}function c(a){a=n.find("#sbl-selected-refinement-"+l.escapeSelector(a));0<a.length&&a.remove()}var n,m,k=!1,f=[],e;return e={getRefinements:function(){return f},updateRefinementItemStatus:function(a){var b=l.getElementData(a),e=b.refinementChildId,k=a.closest(".sbl-refinement-item-row"),h=l.getElementData(k),
q=h.refinementType,r=n.find("#sbl-refinement-"+q+"-button");"base"===h.refinementSource&&(e="@"+q+":"+b.refinementChildId);h=f.indexOf(e);-1<h?(f.splice(h,1),a.removeClass("sbl-selected"),c(b.refinementChildId)):("review"===q&&k.find(".sbl-refinement-item.sbl-selected").each(function(){var a=l.getElementData(d(this)).refinementChildId,b=f.indexOf("@review:"+a);c(a);d(this).removeClass("sbl-selected");-1<b&&f.splice(b,1)}),f.push(e),a.addClass("sbl-selected"),g(b.refinementChildId,a.attr("id"),r.find(".sbl-refinement-title").text(),
b.refinementChildName,"review"===q?m.replace("${count}",b.refinementChildId):v));a=k.find(".sbl-refinement-item.sbl-selected").length;e=r.find("#sbl-refinement-"+q+"-selected");0<a?("review"===q?(e.text(m.replace("${count}",b.refinementChildId)),r.find(".sbl-refinement-title").hide()):e.text(" ("+a+")"),r.addClass("sbl-selected")):(e.text(""),r.removeClass("sbl-selected"),"review"===q&&r.find(".sbl-refinement-title").show())},setItemClearAction:function(a){h.declarative("sblRefinementItemClearAll",
"click",function(b){b=b.$declarativeParent.closest(".sbl-refinement-item-row");var e=l.getElementData(b),k=e.refinementType;b=b.find(".sbl-refinement-item.sbl-selected");var g;0<b.length&&(b.each(function(){var a=l.getElementData(d(this)),b=a.refinementChildId;"base"===e.refinementSource&&(b="@"+k+":"+a.refinementChildId);b=f.indexOf(b);-1<b&&(f.splice(b,1),d(this).removeClass("sbl-selected"),c(a.refinementChildId))}),b=n.find("#sbl-refinement-"+k+"-button"),g=b.find("#sbl-refinement-"+k+"-selected"),
g.text(""),b.removeClass("sbl-selected"),"review"===k&&b.find(".sbl-refinement-title").show(),a())})},setClearAllAction:function(b,e){h.declarative("sblRefinementsClearAll","click",function(){f=[];d(".sbl-refinement-item.sbl-selected").each(function(){d(this).removeClass("sbl-selected")});n.find(".sbl-refinement-button.sbl-selected").each(function(){var a=d(this);a.removeClass("sbl-selected");a.find(".sbl-refinement-selected").text("");a.find(".sbl-refinement-title").show()});n.find(".sbl-selected-refinement-item").each(function(){var a=
d(this);l.getElementData(a).refinementElementId&&a.remove()});a(b);e()})},updateSelectedRefinementRowShowStatus:function(){0<f.length?d("#sbl-selected-refinement-row").removeClass(b.AUI_HIDDEN_CLASS):d("#sbl-selected-refinement-row").addClass(b.AUI_HIDDEN_CLASS)},setCurrentSelectedFilter:function(a){var b;if(a)for(b=a.split(","),a=0;a<b.length;a++)e.updateRefinementItemStatus(n.find("#sbl-refinement-item-"+b[a])),e.updateSelectedRefinementRowShowStatus()},setRefinementItemAction:function(a,b){h.declarative("sblRefinementItem",
"click",function(f){k=!0;e.updateRefinementItemStatus(f.$declarativeParent.find(".sbl-refinement-item"));a||b()});h.declarative("sblRefinementPrimeButton","click",function(a){var e=a.$declarativeParent.find(".sbl-prime-toggle");e.hasClass("sbl-prime-toggle-selected")?(a=f.indexOf("@prime"),-1<a&&f.splice(a,1),e.removeClass("sbl-prime-toggle-selected")):(f.push("@prime"),e.addClass("sbl-prime-toggle-selected"));b()});if(a)h.on("a:sheet:beforeHide",function(){k&&(k=!1,b())})},setSelectedRefinementItemAction:function(a){h.declarative("sblSelectedRefinementItem",
"click",function(b){b=l.getElementData(b.$declarativeParent.closest(".sbl-selected-refinement-item"));e.updateRefinementItemStatus(d("#"+l.escapeSelector(b.refinementElementId)));a()})},constructRefinements:function(b,k,c,g,d,h){f=[];n=c;m=h;e.setRefinementItemAction(b,g);e.setItemClearAction(g);e.setClearAllAction(k,g);e.setCurrentSelectedFilter(d);e.setSelectedRefinementItemAction(g);a(k)},resetRefinementsState:function(b,e){n=e;f=[];k=!1;a(b)}}});t.when("A","jQuery","mirai-discover-constants",
"mirai-discover-utils","ready").register("mirai-discover-like-dislike-actions",function(h,d,b,l){var a=[],g=[],c=[],n=0,m={getPositiveAsins:function(){return a},getNegativeAsins:function(){return g},getIteration:function(){return n},increaseIterationByOne:function(){n++},isPositiveAndNegativeEmpty:function(){return 0===a.length&&0===g.length},addLikeStatus:function(k,f){var e=k.find(".sbl-button");-1===c.indexOf(b.LIKE_PREFIX+f.asin)&&(c.push(b.LIKE_PREFIX+f.asin),a.push({asin:f.asin,iteration:n}));
e.addClass("selected");setTimeout(function(){e.removeClass("selected")},b.RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY)},deleteLikeStatus:function(k,f){var e;for(e=0;e<a.length;e++)if(a[e].asin===f.asin){a.splice(e,1);break}for(e=0;e<c.length;e++)if(c[e]===b.LIKE_PREFIX+f.asin){c.splice(e,1);break}k.find(".sbl-button").removeClass("selected")},addDislikeStatus:function(a,f){-1===c.indexOf(b.DISLIKE_PREFIX+f.asin)&&(c.push(b.DISLIKE_PREFIX+f.asin),g.push({asin:f.asin,iteration:n}));a.addClass("sbl-item-disliked")},
deleteDislikeStatus:function(a,f){var e=!1,d;for(d=0;d<g.length;d++)if(g[d].asin===f.asin){g.splice(d,1);e=!0;break}for(d=0;d<c.length;d++)if(c[d]===b.DISLIKE_PREFIX+f.asin){c.splice(d,1);break}e&&a.removeClass("sbl-item-disliked")},setLikeStatusForNewItemIfRequired:function(a,f){-1<c.indexOf(b.LIKE_PREFIX+f.asin)&&this.addLikeStatus(a,f)},setOnClickFunction:function(a){h.declarative("sblItemLike","click",function(f){f=f.$declarativeParent.closest(".sbl-item-box");var e=f.index()+1,c=l.getElementData(f);
m.increaseIterationByOne();m.deleteDislikeStatus(f,c);m.addLikeStatus(f,c);a(c,!0,b.GET_RECOMMENDATION_ADD_LIKE,e)});h.declarative("sblItemDislike","click",function(c){c=c.$declarativeParent.closest(".sbl-item-box");var e,d;c.hasClass("sbl-item-disliked")||(e=c.index()+1,d=l.getElementData(c),m.increaseIterationByOne(),m.deleteLikeStatus(c,d),m.addDislikeStatus(c,d),a(d,!1,b.GET_RECOMMENDATION_ADD_DISLIKE,e))})},resetLikeDislikeState:function(){a=[];g=[];c=[];n=0}};return m});"use strict";t.when("A",
"jQuery","mirai-discover-constants","mirai-discover-utils","mirai-discover-helpers","mirai-discover-refinements","mirai-discover-like-dislike-actions","ready").execute("mirai-discover-main",function(h,d,b,l,a,g,c){function n(){var d,r,l,n,m,z,x,y;e!==b.END_OF_RECOMMENDATIONS_START_INDEX&&(u&&(u.abort(),u=null),d=a.getCurrentBoxesAsinsOnPage(k),r=f.find(".sbl-item-box"),l=r.first(),n=f.height(),m=Math.round(l.outerHeight()),z=a.getNumItemsPerRow(f),x=w?b.MOBILE_NUM_ROWS_PER_SHOW_MORE:b.DESKTOP_NUM_ROWS_PER_SHOW_MORE,
x*=z,y=Math.ceil(f.height()/m),r=r.length<y*z?y*z-r.length:0,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:d,start:e,count:x+r,iteration:c.getIteration(),filters:g.getRefinements()},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,q,r=d.rsRecommendationItemList;e=d.nextStart;g=l.clone();
g.removeClass(b.SBL_FLIP_BOX_CLASS);for(d=0;d<r.length;d++)h=g.clone(),q=r[d],a.swapBoxOnThePage(k,h,q,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,q),f.append(h),h.css("opacity",0),h.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS);a.changePageScrollTopIfRequire(f,n,m/b.NUMBER_TWO);a.updateShowMoreSectionStatus(k,e)},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}}))}function m(){var b;(k=d("#sbl-row"))&&
0<k.length&&(b=l.getElementData(k),t=b.browseNode,a.refMarkerPrefix=b.refMarkerPrefix,w=k.hasClass("sbl-row-mobile"),f=k.find("#sbl-items-row"),c.setOnClickFunction(v),h.declarative("sblShowMore","click",n),g.constructRefinements(w,k,k.find("#sbl-refinement-row"),p,b.refinements,b.translationFilterStarsAndUp),a.removeHrefFromShowMoreElement())}var k,f,e=null,u=null,w=!1,t,p,v;v=function(q,r,l,n){var m,z=0,x,y,p,v,A;u&&(u.abort(),u=null);c.isPositiveAndNegativeEmpty()||(m=a.getCurrentBoxesAsinsOnPage(k),
x=k.find("#"+b.BOX_ID_PREFIX+q.asin),e===b.END_OF_RECOMMENDATIONS_START_INDEX?a.showNoContentChangeover(k,x):(y=f.find(".sbl-item-box"),p=x.index(),v=a.getNumItemsPerRow(f),A=p+(v-p%v)-1,A>y.length-1&&(z=A-y.length+1,A=y.length-1),p=r?v:1,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+l,{method:"post",params:{browseNode:t,asin:q.asin,physicalId:q.physicalId,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:m,count:p+z,iteration:c.getIteration(),asinIndex:n,filters:g.getRefinements()},
paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(f){var g,h,q,l,n,m=f.rsRecommendationItemList;e=f.nextStart;if(e===b.END_OF_RECOMMENDATIONS_START_INDEX&&0===m.length)a.showNoContentChangeover(k,x);else if(g=y.first().clone(),g.removeClass(b.SBL_FLIP_BOX_CLASS),r){h=d(y[A]);q=Math.round(x.outerHeight());for(f=m.length-1;0<=f;f--)l=g.clone(),n=m[f],a.swapBoxOnThePage(k,l,n,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(l,
n),h.after(l),0===z||f>z?(l.height(0),l.animate({height:b.DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION},b.ANIMATION_DURATION_MILLISECONDS,a.resetHeightToAuto),a.animateFadeColorBox(l)):(l.css("opacity",0),l.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS));a.updateShowMoreSectionStatus(k,e);a.changePageScrollTopIfRequire(x,q,q*b.SCROLL_HEIGHT_MULTIPLIER)}else a.swapBoxOnThePage(k,x,m[0],w,c.getIteration()),a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&
(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}})))};p=function(){var l,n,m;u&&(u.abort(),u=null);g.updateSelectedRefinementRowShowStatus();l=f.find(".sbl-item-box");n=l.first();m=w?b.INITIAL_ITEM_COUNT_MOBILE:b.INITIAL_ITEM_COUNT_DESKTOP;c.getPositiveAsins().length>m&&(m=c.getPositiveAsins().length+b.NUMBER_TWO);u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:[],
count:m,iteration:c.getIteration(),filters:g.getRefinements(),isFilterChange:!0},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,m,p=d.rsRecommendationItemList;e=d.nextStart;g=n.clone();g.removeClass(b.SBL_FLIP_BOX_CLASS);l.remove();for(d=0;d<p.length;d++)h=g.clone(),m=p[d],a.swapBoxOnThePage(k,h,m,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,m),f.append(h);k.find("#sbl-no-results-section").addClass(b.AUI_HIDDEN_CLASS);
a.updateShowMoreSectionStatus(k,e);a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){if(c.http.status===b.HTTP_ERROR_NO_CONTENT)for(e=b.END_OF_RECOMMENDATIONS_START_INDEX,k.find("#sbl-no-results-section").removeClass(b.AUI_HIDDEN_CLASS),c=1;c<l.length;c++)d(l[c]).remove();a.updateShowMoreSectionStatus(k,e)},indicator:k.find("#sbl-loading-section")})};h.on("a:pageUpdate",function(){var b;k&&0<k.length?(b=d("#sbl-row"))&&0<b.length&&k[0]!==b[0]&&(k=b,f=k.find("#sbl-items-row"),e=null,c.resetLikeDislikeState(),
g.resetRefinementsState(k,k.find("#sbl-refinement-row")),a.removeHrefFromShowMoreElement()):m()});m()})});
/* ******** */
(function(g){var k=window.AmazonUIPageJS||window.P,l=k._namespace||k.attributeErrors,d=l?l("ListsCommonUtilityAssets",""):k;d.guardFatal?d.guardFatal(g)(d,window):d.execute(function(){g(d,window)})})(function(g,k,l){g.when("A").register("al-ajax-response-state-parser",function(d){var e=d.$;return{getState:function(c){c=e(c).filter("#listsAjaxResponseStateSection");var a=e("#listsAjaxResponseStateSection");a&&0<=a.length&&a.remove();e(c).appendTo("body");d.state.parse();c=d.state("listsAjaxResponseState")||
{};return{hasError:c.hasError,authRequired:c.authRequired,authUrl:c.authUrl,error:c.error}}}});"use strict";g.when("A","al-bottomsheet-with-fallback","iphone-x-detector").register("bottom-sheet-utils",function(d,e,c){var a=d.$;d.declarative("al-sheet-with-fallback","click",function(f){f.$event.preventDefault();var a=f.data;f=e.create(e.buildComponentParams(a.componentName,a.showCloseButton,c.getAdjustedHeightPx(a.bottomsheetHeight),a.popoverHeight,a.popoverWidth,a.headerForPopover,a.viewLabel,a.viewDescription?
a.viewDescription:a.viewLabel,a.paddingForPopover,a.closeMessage),f.$target);e.show(f)});return{raiseBottomsheet:function(c){c=a(c).parents(".a-sheet-web-container");c.css("z-index",1E4);c.siblings(".a-sheet-lightbox").css("z-index",8E3)}}});"use strict";g.when("A").register("al-bottomsheet-with-fallback",function(d){function e(b){k.ueLogError&&k.ueLogError({logLevel:"ERROR",message:b})}var c,a;g.when("a-sheet").execute(function(b){c=b});g.when("a-modal").execute(function(b){a=b});var f=function(b){if(b)return c?
c.get(b.name):a.get(b.name);e("No ComponentParams specified. Please generate componentParams using .create(component)")},m={IS_POPOVER_LABEL:"IS_POPOVER",IS_BOTTOMSHEET_LABEL:"IS_BOTTOMSHEET"};return{create:function(b,d){if(b)return c?c.create(b):a.create(d,b),b;e("No ComponentParams specified. Please generate componentParams using .create(component)")},show:function(b){(b=f(b))?b.show():e("No View Created. Please create a view first by calling .create(component)")},hide:function(b){(b=f(b))?b.hide():
e("No View Created. Please create a view first by calling .create(component)")},changeHeight:function(b,a,d){var g=f(b);g?c?(g.changeHeight({height:a,duration:d}),b.bottomsheetHeight=a):(g.update({height:a}),b.popoverHeight=a):e("No View Found. Please create a view first by calling .create(component)")},remove:function(b){(b=f(b))?b.$container.remove():e("No View Created. Please create a view first by calling .create(component)")},exists:function(b){return f(b)?!0:!1},onCloseExecute:function(b,a,
f){if("function"!==typeof a)e("Expected onCloseFunction to be of type function");else if(b)d.on((c?"a:sheet":"a:popover")+":"+(f?"beforeHide":"afterHide")+":"+b.name,a);else e("No ComponentParams specified. Please generate componentParams using .create(component)")},onOpenExecute:function(b,a,f){if("function"!==typeof a)e("Expected onOpenFunction to be of type function");else if(b)d.on((c?"a:sheet":"a:popover")+":"+(f?"beforeShow":"afterShow")+":"+b.name,a);else e("No ComponentParams specified. Please generate componentParams using .create(component)")},
buildComponentParams:function(a,d,e,f,g,k,n,t,p,q){var r=c!==l,h={viewTypeLabel:r?m.IS_BOTTOMSHEET_LABEL:m.IS_POPOVER_LABEL,name:a};r?(h.closeType=q?"message":d?"icon":l,h.closeMessage=q,h.height=e,h.sheetLabel=n,h.sheetDescription=t,h.preloadDomId=a):(h.closeButton=d,h.height=f,h.width=g,h.dataStrategy="preload",h.header=k,h.hideHeader=k===l,h.padding=p!==l?p:"none",h.popoverLabel=n);return h},VIEW_TYPE_LABELS:m}});"use strict";g.when("A").register("lists-dpx-common-utils",function(d){return{urlParamValue:function(d){for(var c=
k.location.search.substring(1).split("\x26"),a=0;a<c.length;a++){var f=c[a].split("\x3d");if(f[0]===d)return f[1]}}}});"use strict";g.when("A").register("iphone-x-detector",function(){function d(){try{var a=e();c.forEach(function(c){if(-1<a.indexOf(c))return!0})}catch(d){}return!1}function e(){try{var a;a:{for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var b=c[d];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf("amzn-app-ctxt\x3d")){a=b.substring(14,b.length);break a}}a=
null}if(a){var e=a.match(/"v":.*%2C*/);if(e)return e.toString().toLowerCase()}}catch(g){}return""}var c=["iphone10","iphone11"];return{isIphoneX:d,getDeviceType:e,getAdjustedHeightPx:function(a){try{if(a=parseInt(a,10),d())return a+40}catch(c){}return a}}});"use strict";g.when("A").register("amazon-lists-csrf-utils",function(d){return{addCsrfToken:function(e){var c=d.$("[data-amazon-lists-csrf-token]");0!=c.length&&(e["anti-csrftoken-a2z"]=c.attr("data-amazon-lists-csrf-token"))}}})});
/* ******** */
(function(h){var g=window.AmazonUIPageJS||window.P,k=g._namespace||g.attributeErrors,c=k?k("ListsCreateAssets",""):g;c.guardFatal?c.guardFatal(h)(c,window):c.execute(function(){h(c,window)})})(function(h,g,k){h.when("A","al-bottomsheet-with-fallback","al-ajax-response-state-parser","create-new-list-hz","bottom-sheet-utils","lists-dpx-common-utils").execute(function(c,e,z,w,A,d){function x(){A.raiseBottomsheet("#create-list-form-wrapper")}function b(a){m.ajax({type:"GET",url:"/hz/wishlist/create",
data:{createIngressName:a.createIngressName},success:B,error:function(a,b,c){p("Failed to fetch CreateList-Form. Status: "+b+"; Error: "+c)},timeout:2E4})}function B(a){var b=m(a).filter("#createlist-form-container");a=z.getState(a);a.authRequired&&a.authUrl?g.location.href=a.authUrl:a.hasError?p("CreateList form has error \x3d "+a.error):(m("#create-list-form-wrapper").html(b),q("#create-list-form-spinner"),r("#create-list-form-wrapper"))}function q(a){m(a).addClass("aok-hidden")}function r(a){m(a).removeClass("aok-hidden")}
function p(a){e.changeHeight(l,110);q("#create-list-form-spinner");q("#create-list-form-wrapper");r("#createlist-form-loading-error-section");g.ueLogError&&g.ueLogError({logLevel:"FATAL",message:a});if(!y())e.onCloseExecute(l,f,!1)}function f(){q("#createlist-form-loading-error-section");q("#create-list-form-wrapper");r("#create-list-form-spinner");g.location.reload()}function n(a,b,c){p("List creation failed. Status: "+b+"; Error: "+c)}function t(a){a.hasError?p("List creation failed with Error: "+
a.error):g.location="/hz/wishlist/ls/"+a.listExternalId}function y(){return"DETAIL_PAGE"===(c.state("createListIngressState")||{}).ingressName&&u}var m=c.$,u,v,l;c.declarative("awl-create-list-bottomsheet","click",function(a){var d=a.data||{};c.state("createListIngressState",{ingressName:d.ingressName});var f=d.componentName;f&&"function"==typeof uet&&uet("bb",f,{wb:1});f=a.data||{};l=e.create(e.buildComponentParams(f.componentName,!0,340,430,400,k,f.viewName,f.viewDescription,k,k),a.$target);e.show(l);
if(y())e.onOpenExecute(l,x);b(d);(a=d.componentName)&&"function"==typeof uet&&uet("cf",a,{wb:1});a&&"function"==typeof uex&&uex("ld",a,{wb:1})});c.declarative("create-list-bottomsheet-submit","click",function(a){a=a.data||{};var b=m("#createlist-list-name-textinput").val();b===k||0===b.length?m("#createlist-list-name-textinput").parent("div").addClass("a-form-error"):(q("#createlist-form-loading-error-section"),q("#create-list-form-wrapper"),r("#create-list-form-spinner"),a.listName=b,(b=d.urlParamValue("createAndAddAsin"))&&
0<b.length&&(a.asin=b),y()?((b=u.getAsin())&&0<b.length&&(a.asin=b),w(a,u.handleSuccess,u.handleError)):"HEARTS_BOTTOMSHEET"===(c.state("createListIngressState")||{}).ingressName&&v?(a.isDefault=!0,e.hide(l),w(a,v.onCreateSuccess,v.onCreateError)):w(a,t,n))});h.when("dp-create-list-handler").execute(function(a){u=a});h.when("hearts-create-list-handler").execute(function(a){v=a});c.on("a:expander:create-list-learn-more-popover:toggle:expand",function(){l.viewTypeLabel===e.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?
e.changeHeight(l,425):e.changeHeight(l,580)});c.on("a:expander:create-list-learn-more-popover:toggle:collapse",function(){e.changeHeight(l,340);l.viewTypeLabel===e.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?e.changeHeight(l,340):e.changeHeight(l,430)});c.declarative("createlist-list-name-validation",["keyup"],function(a){0!==a.$target.context.value.length&&m("#createlist-list-name-textinput").parent("div").hasClass("a-form-error")&&m("#createlist-list-name-textinput").parent("div").removeClass("a-form-error")})});
"use strict";h.when("A","create-new-list-hz","a-modal","lists-dpx-common-utils").register("create-utils",function(c,e,g,h){function k(b){b&&"function"==typeof uet&&uet("cf",b,{wb:1});b&&"function"==typeof uex&&uex("ld",b,{wb:1})}var d=c.$,x=function(b){b="#"+(b.formId||"addToCart");0===d(b).length&&(b="#atwl-form");return b};c.declarative("show-create-list",["click touchstart"],function(b){b.$event.preventDefault();var d=b.data;if(d.url||d.name)"function"==typeof uet&&uet("bb","create-list-dp-widget",
{wb:1}),g.create(b.$target,d).show({padding:"none"}),k("create-list-dp-widget");c.on("a:popover:afterHide:redesigned-create-list",function(){g.remove("redesigned-create-list")})});c.declarative("list-name-validation",["keyup"],function(b){0!==b.$target.context.value.length&&d("#alert-list-name").is(":visible")&&(d("#alert-list-name").addClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).removeClass("a-form-error")}))});return{submitCreate:function(b,g,k){b.$event.preventDefault();
var r=d("#create-list-form").closest(".a-popover"),p=d("#list-name").val();if(""===p)d("#alert-list-name").removeClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).addClass("a-form-error")});else{var f={},n=c.state("popoverState")||{},n=x(n),t=h.urlParamValue("createAndAddAsin");t&&1<t.length&&(f.asin=t);"1"===d("#is-create-and-add").val()&&(n=d(n).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),"undefined"!==n&&(f.asin=d.trim(n)));
d("#create-list-loading").removeClass("aok-hidden");r.find("#popover-spinner .a-popover-loading").show();d("#create-list-form").addClass("aok-hidden");f.listName=p;f.sid=b.data.sessionId;f.vendorId=b.data.sourceVendorId;f.privacyStatus=b.data.privacyStatus;f.listType=b.data.listType;e(f,g,k)}}}});"use strict";h.when("A","amazon-lists-csrf-utils").register("create-new-list-hz",function(c,e){var g=c.$;return function(c,k,d){var h=[];e.addCsrfToken(h);c.isJson=!0;return g.ajax("/hz/wishlist/create/newlist",
{type:"POST",headers:h,data:c,success:k,error:d,timeout:1E4})}})});
/* ******** */
(function(m){var n=window.AmazonUIPageJS||window.P,p=n._namespace||n.attributeErrors,c=p?p("HeartsAssets",""):n;c.guardFatal?c.guardFatal(m)(c,window):c.execute(function(){m(c,window)})})(function(m,n,p){"use strict";m.when("A","content-margin-utils","hearts-logging-utils","heart-error-utils","hearts-enabled").register("heart-icon-event-handlers-module",function(c,f,b,h){var e={},d;c.declarative("lists-hearts-heart-action","click",function(a){var q=a.data||{},k=a.$currentTarget.closest(".amazon-lists-heart-container"),
f=k.find(".amazon-lists-heart-icon-container"),h=k.find(".amazon-lists-filled-heart"),x=k.find(".amazon-lists-empty-heart"),r=k.find("[aria-checked]"),t=k.find(".amazon-lists-heart-flyout");if(1===h.length&&1===x.length&&1===t.length){a.$event.stopPropagation();a.$event.preventDefault();var u=q.itemExternalId;u in e||(e[u]=!0,k={itemExternalId:u,$heartsContainer:k,$heartsIconContainer:f,$filledHeart:h,$emptyHeart:x,$heartButton:r,isFilledByAttribute:0<r.length,$flyout:t},f=q.flyoutMarginSelector,
h=k.isFilledByAttribute?"true"===k.$heartButton.attr("aria-checked"):k.$emptyHeart.hasClass("aok-hidden"),h?(v(k),b.incrementCount(b.REMOVE_FROM_HEARTS_COUNTER),b.logEventDetails(a.$event),a=k.$heartsContainer.data("heartsListId"),a===p&&d!==p&&(a=d),c.post("/hz/wishlist/hearts/remove",{headers:y(q),params:z(q,a),success:l(k,f,q.isShortenedResponseView),error:n(k)})):(w(k),b.incrementCount(b.ADD_TO_HEARTS_COUNTER),b.logEventDetails(a.$event),c.post("/hz/wishlist/hearts/add",{headers:y(q),params:z(q),
success:m(k,f,q.isShortenedResponseView),error:g(k)})))}});var m=function(a,q,f){return function(b){delete e[a.itemExternalId];if(b.hasError)v(a),h.showError(a,b.errorContent,f,q);else{var c=b.listExternalId;a.$heartsContainer.data("heartsListId",c);d===p&&(d=c);t(a,b.flyoutContent,q);r(a.itemExternalId,!0)}}},g=function(a){return function(){delete e[a.itemExternalId];v(a)}},l=function(a,b,f){return function(c){delete e[a.itemExternalId];if(c.hasError)w(a),h.showError(a,c.errorContent,f,b);else{var g=
a.$heartsContainer,l=c.listExternalId;g.data("heartsListId",l);d===p&&(d=l);g.data("heartsListId")&&g.removeData("heartsListId");t(a,c.flyoutContent,b);r(a.itemExternalId,!1)}}},n=function(a){return function(){delete e[a.itemExternalId];w(a)}},r=function(a,b){c.trigger("hearts:stateChange",{itemExternalId:a,isHearted:b})},z=function(a,b){a={vendorId:a.vendorId||"listsadoption.hearts.unknown",itemType:a.itemType.toLowerCase(),itemExternalId:a.itemExternalId,isShortenedResponseView:a.isShortenedResponseView};
b&&(a.listExternalId=b);return a},y=function(a){var b=[];a.antiCsrfToken&&(b["anti-csrftoken-a2z"]=a.antiCsrfToken);return b},w=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","true"):(a.$emptyHeart.addClass("aok-hidden"),a.$filledHeart.removeClass("aok-hidden"))},v=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","false"):(a.$filledHeart.addClass("aok-hidden"),a.$emptyHeart.removeClass("aok-hidden"))},t=function(a,b,e){var h=a.$flyout,d=a.$heartsContainer,
g=d.data("timer");g&&clearTimeout(g);h.html(b);b=h.find(".amazon-lists-heart-list-name-template");b.remove();g=a.$flyout.find(".amazon-lists-heart-flyout-text");g.html(g.html().replace("LIST_NAME",b[0].outerHTML));h.removeClass("aok-hidden");b=d.attr("style");d.attr("style","");g=h.outerWidth(!0)+2+1;e=f.getMaxHeartsContainerWidth(d,e);e=Math.min(g,e);h.addClass("aok-hidden");d.attr("style",b);c.animate(d,{width:e},300,"ease-out",function(){h.removeClass("aok-hidden");var b=c.delay(function(){A(a)},
5E3);d.data("timer",b)})},A=function(a){var b=a.$flyout;b.html("");c.animate(a.$heartsContainer,{width:34},300,"ease-out",function(){b.addClass("aok-hidden")})};(function(){var a=document.createElement("style");document.head.appendChild(a);a.sheet.insertRule(".amazon-lists-heart-container.amazon-lists-heart-container{visibility: visible;opacity: 0.95;}",0)})()});"use strict";m.when("A","hearts-logging-utils","hearts-enabled").register("heart-flyout-event-handlers",function(c,f){c.declarative("amazon-lists-heart-add-flyout-action",
"click",function(b){var c=b.data||{};b.$event.stopPropagation();b.$event.preventDefault();f.incrementCount(f.CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER);c.listExternalId&&(n.location.href="/hz/wishlist/ls/"+c.listExternalId)})});"use strict";m.when("A","hearts-enabled").register("content-margin-utils",function(c){return{getMaxHeartsContainerWidth:function(f,b){var h=.8*c.$(n).width(),e=0;f=f.closest(b);1===f.length&&(h=f.width(),e=4);return h-e},getErrorDisplayWidth:function(c,b){c=c.closest(b);return 1===
c.length?c.width():null}}});"use strict";m.when("hearts-enabled").register("hearts-logging-utils",function(){var c=n.ue,f=function(b){c&&c.count(b,(c.count(b)||0)+1)};return{ADD_TO_HEARTS_COUNTER:"addToHeartsList",REMOVE_FROM_HEARTS_COUNTER:"removeFromHeartsList",CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER:"clickAddToHeartsListToast",MOVE_ITEM_COUNTER:"reusablehearts:moveToList",CHANGE_DEFAULT_AND_MOVE_COUNTER:"reusablehearts:changeDefaultAndMove",CREATE_LIST_COUNTER:"reusablehearts:createList",incrementCount:f,
logEventDetails:function(b){if("undefined"!==typeof b){var c=b.offsetX-13;b=b.offsetY-10;if("undefined"!==typeof c&&"undefined"!==typeof b){var e,d;17<c?e="Right":-17>c&&(e="Left");17<b?d="Bottom":-17>b&&(d="Top");e&&f("heartsListClickMargin"+e);d&&(f("heartsListClickMargin"+d),e&&f("heartsListClickMargin"+d+e))}}}}});m.when("A","content-margin-utils","hearts-enabled").register("heart-error-utils",function(c,f){var b=function(b,e){var d=b.$heartsContainer,f=b.$heartsIconContainer,g=b.$flyout;c.animate(d,
e?{height:0,"margin-top":0}:{width:0},300,"ease-out",function(){d.addClass("aok-hidden");d.removeClass("amazon-lists-popup-error-container");d.addClass("amazon-lists-heart-container");d.attr("style","");f.removeClass("aok-hidden");g.html("");g.addClass("amazon-lists-heart-flyout");e&&g.addClass("aok-nowrap");d.removeClass("aok-hidden")})};return{showError:function(h,e,d,m){var g=h.$flyout,l=h.$heartsContainer,n=h.$heartsIconContainer,r,p;d?r=f.getErrorDisplayWidth(l,m):p=f.getMaxHeartsContainerWidth(l,
m);if(null!==r||null!==p)l.addClass("aok-hidden"),n.addClass("aok-hidden"),l.removeClass("amazon-lists-heart-container"),d?l.addClass("amazon-lists-popup-error-container"):l.addClass("amazon-lists-flyout-error-container"),d?(g.width(r),l.height(0),l.css("margin",0),l.css("top",0)):l.width(0),l.removeClass("aok-hidden"),g.html(e),g.removeClass("amazon-lists-heart-flyout"),d&&g.removeClass("aok-nowrap"),g.removeClass("aok-hidden"),g.children().first().width("100%"),d?(e=g.height(),e={height:e,"margin-top":-1*
e}):e={width:Math.min(g.width(),p)},c.animate(l,e,300,"ease-out",function(){g.removeClass("aok-hidden");c.delay(function(){b(h,d)},5E3)})}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,f=m?m("SearchMultiQuestionWidgetAssets",""):l;f.guardFatal?f.guardFatal(k)(f,window):f.execute(function(){k(f,window)})})(function(k,l,m){k.when("rush-dispatcher","rush-util").register("cse-multi-question-actions",function(f,b){return{listeners:{update:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:update-selections"},apply:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");
return c+":multi-question:apply-selections"},remove:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:remove-selections"}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-multi-question-actions").register("cse-question-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={answered:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:answered"},previousAnswered:function(a){d(b.isNotBlank(a),
"questionId must be a non-empty string");return a+":question:previous-answered"},hide:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:hide-question"},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:show-question"}};return{listeners:h,triggers:{updateSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.update(a),e)},applySelections:function(a,e){d(b.isNotBlank(a),
"widget must be a non-empty string");return g(c.listeners.apply(a),e)},removeSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.remove(a),e)},updatePrevious:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(h.previousAnswered(a),e)},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.show(a))},hide:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.hide(a),
{questionToShow:e})}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-question-actions").register("cse-answer-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={deselect:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":answer:deselect"}};return{listeners:h,triggers:{selected:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(c.listeners.answered(a),e)},deselect:function(a,c){d(b.isNotBlank(a),
"questionId must be a non-empty string");d(b.isNotBlank(c),"uuid must be a non-empty string");return g(h.deselect(a),{selectedUuid:c})}}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AEEDiscoveryDeepCheckPromiseAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,k=n?n("PostsSharedFeedAssets","PostsSharedFeedAssets"):m;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,m,n){var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p=function(){function g(f,e){for(var a=0;a<e.length;a++){var b=
e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(f,e,a){e&&g(f.prototype,e);a&&g(f,a);return f}}();l.now("posts-sushi-client").execute(function(g){"undefined"===typeof g&&l.register("posts-sushi-client",function(){var f=["messageId","timestamp"];return function(){function e(a,b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.endpoint=b;this.window=a;this.eventsQueue=[];this.eventsDictionary=
{};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(b){var f=function(){};b=function(){var b=function(){if(a.XDomainRequest){var d=new a.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(a.XMLHttpRequest){d=new a.XMLHttpRequest;
if(!("withCredentials"in d))throw"";return d}return null};return{send:function(a,c){if(c&&a){var h=b();if(!h)throw"";h.open("POST",a,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");h.send(c)}},isSupported:!0}}();var e=function(){return{send:function(b,d){if(b&&d&&!a.navigator.sendBeacon(b,d))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();return{ajaxClient:b,beaconClient:e}}(this);this.compressor=function(a){var b=
function(d){if(d)switch("undefined"===typeof d?"undefined":k(d)){case "number":return!(d!==d||Infinity===d)&&d.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return d.length>a.dictionaryIndex.length;default:return!0}return!1},e=function(d){a.eventsDictionary[d]||(a.eventsDictionary[d]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[d]]=d);return a.eventsDictionary[d]},g=function(a){if(b(a)){var c=0;a instanceof Array?c=2:a instanceof Function?c=null:
a instanceof Object&&(c=1);switch(c){case 0:return e(a);case 2:for(var h=[],c=0;c<a.length;c++)h[c]=g(a[c]);return h;case 1:c={};for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(c[e(h)]=-1===f.indexOf(h)?g(a[h]):a[h]);return c}}return a};return{compressData:g,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}p(e,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&(this.flush(this),this.unloadHandlerCalled=!0)}},
{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(b){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();
return a.send(this.endpoint,b)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(a=0;a<b.length;a++){c=b[a];try{return this.sendWithClient(c)}catch(f){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===this.highPriorityFlushInterval?this.flush(this):
this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||{}).n?this.startHighPriorityQueueTimer():
this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},{key:"isMaxCallsReached",
value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("ACEPostsMetrics:"+a,0===b?0:b||(ue.count("ACEPostsMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a,
this.options)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return c}}]);return e}()})});"use strict";l.now("posts-clamp").execute(function(g){"undefined"===typeof g&&l.register("posts-clamp",function(){return function(f,e){function a(a,b){m.getComputedStyle||(m.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var d=/(-([a-z]){1})/g;"float"==
b&&(b="styleFloat");d.test(b)&&(b=b.replace(d,function(a,b,d){return d.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return m.getComputedStyle(a).getPropertyValue(b)}function b(b){var c=a(f,"line-height");"normal"==c&&(c=1.2*parseInt(a(f,"font-size")));return parseInt(c)*b}function c(a){if(a.lastChild.children&&0<a.lastChild.children.length)return c(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&
a.lastChild.nodeValue!=e.truncationChar)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return c(f)}function g(a,b){if(b&&!(f.clientHeight<=b))for(;f.clientHeight>b;){var c=a.nodeValue.split("");if(1<c.length){do{c.pop();var e=c.join("");a.nodeValue=e}while(/[\s\n,.]+/.test(c[c.length-1])&&1<c.length)}k&&(f.innerHTML=a.nodeValue+k.innerHTML)}}if(f!==n){e=e||{};var l=e.clamp||2,k;e.truncationHTML&&(k=document.createElement("span"),k.innerHTML=e.truncationHTML);l=b(l);g(c(f),l)}}})})});
/* ******** */
(function(p){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,q=n?n("BrandFollowKataComponentAssets",""):l;q.guardFatal?q.guardFatal(p)(q,window):q.execute(function(){p(q,window)})})(function(p,l,n){var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"===typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u=function(){function f(b,a){for(var e=0;e<a.length;e++){var g=a[e];
g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,a,e){a&&f(b.prototype,a);e&&f(b,e);return b}}();p.when("A").register("brand-follow-constants",function(){return{Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR:".brand-follow-button-container",Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR:".brand-follow-button",Brand_FOLLOW_BUTTON_SELECTOR:"button[data-bfid]",Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR:'button[data-bfid][data-showtooltip\x3d"true"]',
BRAND_FOLLOW_STATUS_MAP:"brand-follow-status",BRAND_FOLLOW_STATUS:{FOLLOWING:"following",NOT_FOLLOWING:"not_following",PENDING:"pending",NOT_SIGNED_IN:"not_signed_in",ERROR:"error"},BRAND_FOLLOW_CSRF_KEY:"brand-follow-csrf",BRAND_FOLLOW_CSRF_DATA_KEY:"csrf",BRAND_FOLLOW_LAST_CLICK_EVENT_MAP:"brand-follow-last-click-event-map",BFID_DATA_KEY:"bfid",FOLLOW_STATUS_DATA_KEY:"followstatus",FOLLOW_TEXT_DATA_KEY:"followtext",FOLLOWING_TEXT_DATA_KEY:"followingtext",REQUEST_ID_DATA_KEY:"requestid",PLACEMENT_TYPE_DATA_KEY:"placementtype",
PLACEMENT_SUB_TYPE_DATA_KEY:"placementsubtype",PLACEMENT_ID_DATA_KEY:"placementid",COMPONENT_TYPE_DATA_KEY:"componenttype",COMPONENT_ID_DATA_KEY:"componentid",ELEMENT_TYPE_DATA_KEY:"elementtype",ELEMENT_ID_DATA_KEY:"elementid",TOOLTIP_TEXT_DATA_KEY:"tooltiptext",ARIA_LABEL_KEY:"aria-label",ARIA_LABEL_FOLLOW_DATA_KEY:"arialabelfollow",ARIA_LABEL_FOLLOWING_DATA_KEY:"arialabelfollowing",HIDE_TOOLTIP_KEY:"brand_follow_hide_tooltip",TOOLTIP_DISPLAY_TIME:5E3,TOOLTIP_STATUS_SHOWN:"SHOWN",TOOLTIP_STATUS_NOT_SHOWN:"NOT_SHOWN",
TOOLTIP_STATUS_DISABLED:"DISABLED",FOLLOW_AJAX_TIMEOUT:2E3,FOLLOW_AJAX_RETRIES:2,FOLLOW_ENDPOINT:"/followv2/follow",FOLLOW_ENTITY_TYPE:"brand",FOLLOW_REF_TAG:"bft",FOLLOW_CSM_PREFIX:"BrandFollow",FOLLOW_CSM_SUCCESS:"Success",FOLLOW_CSM_FAIL:"Fail",FOLLOW_CSM_FOLLOW:"Follow",FOLLOW_CSM_UNFOLLOW:"Unfollow",FOLLOW_CSM_GET_FOLLOW_STATUS:"GetFollowStatus",HTTP_GET:"GET",HTTP_POST:"POST",HTTP_DELETE:"DELETE",SIGN_IN_PORTAL:"/ap/signin",AUTH_PORTAL_ASSOC_HANDLE:{"amazon.com":"usflex","amazon.co.uk":"gbflex",
"amazon.de":"deflex","amazon.fr":"frflex","amazon.es":"esflex","amazon.in":"inflex","amazon.it":"itflex","amazon.co.jp":"jpflex","amazon.ca":"caflex"},SUSHI_ENDPOINT:{gamma:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Gamma.ClientEvents",prod:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Prod.ClientEvents"},EVENT_TYPE:{FOLLOW:"Follow",UNFOLLOW:"Unfollow"}}});"use strict";p.when("A","brand-follow-constants").register("brand-follow-auth-portal-link-builder",
function(f,b){return{signin:function(){var a={"openid.ns":"http://specs.openid.net/auth/2.0","openid.claimed_id":"http://specs.openid.net/auth/2.0/identifier_select","openid.identity":"http://specs.openid.net/auth/2.0/identifier_select","openid.mode":"checkid_setup","openid.return_to":l.location.href,"openid.assoc_handle":b.AUTH_PORTAL_ASSOC_HANDLE[l.location.hostname.replace(/.+?(?=amazon)/,"")]};return b.SIGN_IN_PORTAL+"?"+f.$.param(a)}}});"use strict";p.register("brand-follow-csm-helper",function(){return{incrementCSMCounter:function(f,
b){l.ue&&l.ue.count&&l.ue.count(f,(l.ue.count(f)||0)+1,b)},logBodyBegin:function(f){"function"==typeof uet&&uet("bb",f,{wb:1})},sendCsmMetrics:function(f){"function"==typeof uex&&uex("ld",f,{wb:1})}}});"use strict";p.when("A","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-data-storage-helper",function(f,b,a){var e={set:function(a,k,e){var b={};b[k]=e;f.state(a,b)},get:function(a){return f.state(a)},setFollowStatus:function(a,k){e.set(b.BRAND_FOLLOW_STATUS_MAP,a,k)},getFollowStatus:function(a){var k=
e.get(b.BRAND_FOLLOW_STATUS_MAP);return k===n?n:k[a]},setLastClickEvent:function(a,k){e.set(b.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP,a,k)},getLastClickEvent:function(g){var k=b.FOLLOW_CSM_PREFIX+":dataStorageHelper:getLastClickAction";a.incrementCSMCounter(k);var f=e.get(b.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP);if(f===n)return a.incrementCSMCounter(k+":emptyMap"),n;(g=f[g])||a.incrementCSMCounter(k+":notFoundInMap");return g},setCsrf:function(a){e.set(b.BRAND_FOLLOW_CSRF_KEY,b.BRAND_FOLLOW_CSRF_DATA_KEY,a)},
getCsrf:function(){var a=e.get(b.BRAND_FOLLOW_CSRF_KEY);return a===n?n:a[b.BRAND_FOLLOW_CSRF_DATA_KEY]}};return e});"use strict";p.when("A","brand-follow-constants","brand-follow-data-storage-helper","brand-follow-csm-helper").register("brand-follow-afs-helper",function(f,b,a,e){var g={makeCallToAfs:function(a,g,h,c,d,r){var t=b.FOLLOW_CSM_PREFIX+":"+a;e.incrementCSMCounter(t);(function v(p){e.logBodyBegin(r);f.$.ajax({url:g,type:a,headers:{Accept:"application/json","Content-Type":"application/json"},
data:h,dataType:"json",timeout:b.FOLLOW_AJAX_TIMEOUT,success:function(a,d,k){e.incrementCSMCounter(t+":"+b.FOLLOW_CSM_SUCCESS);e.sendCsmMetrics(r);"function"===typeof c&&c(a,d,k)},error:function(c,g,h){if("timeout"===g&&p)e.incrementCSMCounter(t+":timeout"),v(--p);else{var f=t+":"+b.FOLLOW_CSM_FAIL;e.incrementCSMCounter(f);"timeout"===g&&e.incrementCSMCounter(f+":timeout");e.sendCsmMetrics(r);l.ueLogError&&l.ueLogError({logLevel:"WARN",attribution:"BrandFollowKataComponentAssets",message:"AFS "+a+
" call failed with status "+g+", error thrown: "+h});"function"===typeof d&&d(c,g,h)}}})})(b.FOLLOW_AJAX_RETRIES)},getFollowStatusAndInitCsrf:function(e,f,h,c){g.makeCallToAfs(b.HTTP_GET,b.FOLLOW_ENDPOINT+"/"+e+"_"+b.FOLLOW_ENTITY_TYPE,{ref:b.FOLLOW_REF_TAG},function(d,e,b){d.signedIn?(a.setCsrf(d.csrf),"function"===typeof f&&f(d)):"function"===typeof c&&c()},h,b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_GET_FOLLOW_STATUS)},follow:function(e,f,h,c){var d=b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_FOLLOW,r=function(){g.makeCallToAfs(b.HTTP_POST,
b.FOLLOW_ENDPOINT,JSON.stringify({authenticity_token:a.getCsrf(),entity_id:e,category:b.FOLLOW_ENTITY_TYPE,ref:b.FOLLOW_REF_TAG}),f,h,d)};a.getCsrf()===n?g.getFollowStatusAndInitCsrf(e,r,n,c):r()},unfollow:function(e,m,h){var c=b.FOLLOW_CSM_PREFIX+":"+b.FOLLOW_CSM_UNFOLLOW,d=function(){g.makeCallToAfs(b.HTTP_DELETE,b.FOLLOW_ENDPOINT+"/"+e+"_"+b.FOLLOW_ENTITY_TYPE+"?"+f.$.param({authenticity_token:a.getCsrf(),ref:b.FOLLOW_REF_TAG}),n,m,h,c)};a.getCsrf()===n?g.getFollowStatusAndInitCsrf(e,d):d()}};
return g});"use strict";p.when("A").register("brand-follow-button-tooltip-factory",function(f){f=f.$;var b=f("\x3cdiv class\x3d'brand-follow-tooltip-root'/\x3e").appendTo("body");return{getOrCreateTooltip:function(){0===b.children().length&&b.append("\x3cdiv role\x3d'tooltip' class\x3d'bf-tooltip' id\x3d'bf-tooltip' aria-hidden\x3d'true' style\x3d'z-index: 299; visibility: hidden; opacity: 0;'\x3e\x3cdiv class\x3d'bf-tooltip-inner'\x3eFollow to see more from this brand on Amazon\x3c/div\x3e\x3cdiv class\x3d'bf-arrow-border'\x3e\x3cdiv class\x3d'bf-arrow'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");
return b.children().first()}}});"use strict";p.when("A").register("brand-follow-button-tooltip-position",function(f){function b(){if(1===f.viewport().zoom)return{top:0,left:0};h||(h=m('\x3cspan id\x3d"bf-tooltip-offset-tracker"\x3e\x3c/span\x3e'),m("body").prepend(h));var c;m.withoutRtl(function(){c=h.offset()});return c}function a(c,a){var e=f.viewport(),k=b(),g,h;m.withoutRtl(function(){g=a.offset();h=c.offset()});g.top-=k.top;g.left-=k.left;h.top-=k.top;h.left-=k.left;var l=a.outerWidth(),p=a.outerHeight(),
n=c.outerWidth(!0),q=c.outerHeight(!0);return{windowWidth:e.width,windowHeight:e.height,windowTop:e.scrollTop,windowLeft:e.scrollLeft,windowRight:e.scrollLeft+e.width,windowBottom:e.scrollTop+e.height,zoomTop:k.top,zoomLeft:k.left,triggerWidth:l+1,triggerHeight:p,triggerTop:g.top-1,triggerLeft:g.left-1,triggerRight:g.left+l+1,triggerBottom:g.top+p+1,triggerVerticalCenter:g.top+p/2,triggerHorizontalCenter:g.left+l/2,popoverWidth:n,popoverHeight:q,popoverTop:h.top,popoverLeft:h.left,popoverRight:h.left+
n,popoverBottom:h.top+q,popoverVerticalCenter:h.top+q/2,popoverHorizontalCenter:h.left+n/2}}function e(c){return c.removeClass("a-arrow-top a-arrow-bottom a-arrow-left a-arrow-right")}function g(c){var a={deltaTop:0},e;a.top=c.triggerVerticalCenter-c.popoverHeight/2;a.top<c.windowTop+15?(e=Math.min(c.windowTop+15,c.triggerTop-15),a.deltaTop=a.top-e,a.top=e):a.top+c.popoverHeight>c.windowBottom-15&&(e=Math.min(15,c.windowBottom-c.triggerBottom+15),a.deltaTop=a.top+c.popoverHeight-(c.windowBottom-e),
a.top=c.windowBottom-e-c.popoverHeight);return a}function k(a){var d={deltaLeft:0},e;d.left=a.triggerHorizontalCenter-a.popoverWidth/2;15>d.left?(e=Math.min(15,a.triggerLeft-15),d.deltaLeft=d.left-e,d.left=e):d.left+a.popoverWidth>a.windowRight-15&&(e=Math.min(15,a.windowRight-a.triggerRight+15),d.deltaLeft=d.left+a.popoverWidth-(a.windowRight-e),d.left=a.windowRight-e-a.popoverWidth);return d}var m=f.$;m(l);var h=null;return{windowCenter:function(c){c=a(c.$popover,c.$trigger);var d={};d.top=(c.windowHeight-
c.popoverHeight)/2;d.left=(c.windowWidth-c.popoverWidth)/2;0>d.top&&(d.top=0);return d},windowTop:function(c){c=a(c.$popover,c.$trigger);var d={top:0};d.left=c.windowWidth/2-c.popoverWidth/2;return d},windowFullWidth:function(a){return{top:0,left:0}},triggerRight:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=g(d);c.left=d.triggerRight;e(b).addClass("a-arrow-right");b.find(".bf-arrow-border").css("top",d.popoverHeight/2+c.deltaTop);return c},triggerLeft:function(c,d){var b=c.$popover;
c=c.$trigger;d||(d=a(b,c));c=g(d);c.left=d.triggerLeft-d.popoverWidth;c.left=0<c.left?c.left:0;e(b).addClass("a-arrow-left");b.find(".bf-arrow-border").css("top",d.popoverHeight/2+c.deltaTop);return c},triggerTop:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=k(d);c.top=d.triggerTop-d.popoverHeight;e(b).addClass("a-arrow-top");b.find(".bf-arrow-border").css("left",d.popoverWidth/2+c.deltaLeft);return c},triggerBottom:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c=k(d);c.top=
d.triggerBottom;e(b).addClass("a-arrow-bottom");b.find(".bf-arrow-border").css("left",d.popoverWidth/2+c.deltaLeft);return c},triggerHorizontal:function(c,d){var e=c.$popover,b=c.$trigger;d||(d=a(e,b));return d.triggerLeft-d.windowLeft>d.windowRight-d.triggerRight?this.triggerLeft(c,d):this.triggerRight(c,d)},triggerVertical:function(c,d){var e=c.$popover,b=c.$trigger;d=d?d:a(e,b);return d.triggerTop-d.windowTop>d.popoverHeight+15?this.triggerTop(c,d):this.triggerBottom(c,d)},triggerVerticalAlignLeft:function(c,
d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c={};var k=0,g=0,h=d.windowBottom-d.triggerBottom;c.left=d.triggerLeft;c.top=h>d.popoverHeight?d.triggerBottom+3:d.triggerTop-d.popoverHeight-3;15>c.left?(g=Math.min(15,d.triggerLeft-15),k=c.left-g,c.left=g):c.left+d.popoverWidth>d.windowRight-15&&(g=Math.min(15,d.windowRight-d.triggerRight+15),k=c.left+d.popoverWidth-(d.windowRight-g),c.left=d.windowRight-g-d.popoverWidth);e(b).addClass(h>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");m.withoutRtl(function(){b.find(".bf-arrow-border").css("left",
d.triggerWidth/2+k)});return c},triggerBottomAlignRight:function(c,d){var b=c.$popover;c=c.$trigger;d||(d=a(b,c));c={};var k=0,g=0,h=d.windowBottom-d.triggerBottom;c.left=d.triggerRight-d.popoverWidth;c.top=d.triggerBottom+3;15>c.left?(g=Math.min(15,d.triggerLeft-15),k=c.left-g,c.left=g):c.left+d.popoverWidth>d.windowRight-15&&(g=Math.min(15,d.windowRight-d.triggerRight+15),k=c.left+d.popoverWidth-(d.windowRight-g),c.left=d.windowRight-g-d.popoverWidth);e(b).addClass(h>d.popoverHeight?"a-arrow-bottom":
"a-arrow-top");m.withoutRtl(function(){b.find(".bf-arrow-border").css("right",d.triggerWidth/2+k)});return c},customPosition:function(c,d){return d.call(this,{popover:c,$popover:c.$popover,$trigger:c.$trigger,measure:a})}}});"use strict";p.when("A","brand-follow-button-tooltip-factory","brand-follow-button-tooltip-position","brand-follow-constants").register("brand-follow-button-tooltip",function(f,b,a,e){var g=f.$;return{show:function(k){var f=b.getOrCreateTooltip(),h=g(k);k=h.data(e.TOOLTIP_TEXT_DATA_KEY);
h=a.triggerBottomAlignRight({$popover:f,$trigger:h});k&&f.find(".bf-tooltip-inner").first().text(k);f.css({top:h.top+"px",left:h.left+6+"px",visibility:"visible",opacity:1,transition:"opacity 0.5s"})},hide:function(){b.getOrCreateTooltip().css({visibility:"hidden",opacity:0,transition:"visibility 0s 0.5s, opacity 0.5s linear"})}}});"use strict";p.register("brand-follow-sushi-client",function(){var f=["messageId","timestamp"];return function(){function b(a,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.endpoint=e;this.window=a;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(e){var b=function(){};e=function(){var e=function(){if(a.XDomainRequest){var c=new a.XDomainRequest;c.onerror=b;c.ontimeout=b;c.onprogress=b;
c.onload=b;c.timeout=0;return c}if(a.XMLHttpRequest){c=new a.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{send:function(a,d){if(d&&a){var b=e();if(!b)throw"";b.open("POST",a,!0);b.setRequestHeader&&b.setRequestHeader("Content-type","text/plain");b.send(d)}},isSupported:!0}}();var f=function(){return{send:function(e,c){if(e&&c&&!a.navigator.sendBeacon(e,c))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();
return{ajaxClient:e,beaconClient:f}}(this);this.compressor=function(a){var e=function(c){if(c)switch("undefined"===typeof c?"undefined":q(c)){case "number":return!(c!==c||Infinity===c)&&c.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return c.length>a.dictionaryIndex.length;default:return!0}return!1},b=function(c){a.eventsDictionary[c]||(a.eventsDictionary[c]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[c]]=c);return a.eventsDictionary[c]},h=function(a){if(e(a)){var d=
0;a instanceof Array?d=2:a instanceof Function?d=null:a instanceof Object&&(d=1);switch(d){case 0:return b(a);case 2:for(var g=[],d=0;d<a.length;d++)g[d]=h(a[d]);return g;case 1:d={};for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&(d[b(g)]=-1===f.indexOf(g)?h(a[g]):a[g]);return d}}return a};return{compressData:h,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}u(b,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&
(this.flush(this),this.unloadHandlerCalled=!0)}},{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(e){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var e=
this.compressor.buildPOSTObject();return a.send(this.endpoint,e)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,e=Array(a),b=0;b<a;b++)e[b]=arguments[b];for(a=0;a<e.length;a++){b=e[a];try{return this.sendWithClient(b)}catch(k){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===
this.highPriorityFlushInterval?this.flush(this):this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>
a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||
{}).n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,g){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(g)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var g=this.stringify(a);return g?(this.encodeEvent(a,g,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},
{key:"isMaxCallsReached",value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("BrandFollowMetrics:"+a,0===b?0:b||(ue.count("BrandFollowMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var g=this.unloadHandlerCalled=
!1;this.options=b||{};this.isValidAPICall(a,this.options)&&(g=this.addEvent(a,this.options));g?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return g}}]);return b}()});"use strict";p.when("A","brand-follow-sushi-client","brand-follow-constants").register("brand-follow-metrics-client",function(f,b,a){var e=f.$;f=document.domain;f=0===f.indexOf("www.amazon")||0===f.indexOf("smile.amazon");var g=new b(l,
a.SUSHI_ENDPOINT[f?"prod":"gamma"]);return{getAttributeMapFromElement:function(b){var g=e(b).data(a.BFID_DATA_KEY),h=e(b).data(a.REQUEST_ID_DATA_KEY),c=e(b).data(a.PLACEMENT_TYPE_DATA_KEY),d=e(b).data(a.PLACEMENT_SUB_TYPE_DATA_KEY),f=e(b).data(a.PLACEMENT_ID_DATA_KEY),l=e(b).data(a.COMPONENT_TYPE_DATA_KEY),p=e(b).data(a.COMPONENT_ID_DATA_KEY),n=e(b).data(a.ELEMENT_TYPE_DATA_KEY);b=e(b).data(a.ELEMENT_ID_DATA_KEY);return{bfid:g,request_id:h,placement_type:c,placement_sub_type:d,placement_id:f,component_type:l,
component_id:p,element_type:n,element_id:b}},buildFollowButtonClickMetricEvent:function(a,b,e){a=this.getAttributeMapFromElement(a);return{bfid:a.bfid,request_id:a.request_id,placement_type:a.placement_type,placement_sub_type:a.placement_sub_type,placement_id:a.placement_id,component_type:a.component_type,component_id:a.component_id,element_type:a.element_type,element_id:a.element_id,event_type:b,tooltip_status:l.brandFollowTooltipStatus,timestamp:Date.now(),event_source:l.location.href,schema_version:1}},
processMetricEvent:function(a,b){g.processEvent(a,b)}}});"use strict";p.when("A","brand-follow-constants","brand-follow-button-tooltip","brand-follow-data-storage-helper").execute("brand-follow-tooltip-helper",function(f,b,a,e){var g=f.$;f.on("brandFollow:followButton:loaded",function(){var e;try{e="true"!==localStorage.getItem(b.HIDE_TOOLTIP_KEY)}catch(d){e=!1}if(e)if(e=g(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR),e.length)if(f.capabilities.mobile||f.capabilities.tablet){var c=e.get(0);a.show(c);
l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_SHOWN;k(c)?m():g(l).scroll(f.throttle(function(){k(c)&&m()},200))}else g(b.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave"),g(b.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(b.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave",function(c){"mouseenter"===c.type?(a.show(c.target),l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_SHOWN,localStorage.setItem(b.HIDE_TOOLTIP_KEY,
"true")):"mouseleave"===c.type&&a.hide()});else l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_DISABLED;else l.brandFollowTooltipStatus=b.TOOLTIP_STATUS_NOT_SHOWN});var k=function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(l.innerHeight||document.documentElement.clientHeight)&&a.right<=(l.innerWidth||document.documentElement.clientWidth)},m=function(){localStorage.setItem(b.HIDE_TOOLTIP_KEY,"true");setTimeout(function(){a.hide()},b.TOOLTIP_DISPLAY_TIME)}});"use strict";p.when("A",
"brand-follow-data-storage-helper","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-shared-utils",function(f,b,a,e){var g=f.$;l.BrandFollowSharedUtils={getLastClickAction:function(f){var m=a.FOLLOW_CSM_PREFIX+":sharedUtils:getLastClickAction";e.incrementCSMCounter(m);var h;h=a.FOLLOW_CSM_PREFIX+":sharedUtils:getBFID";e.incrementCSMCounter(h);f?"string"===typeof f?h=f:f instanceof Element&&1===f.nodeType?((f=g(f).find(a.Brand_FOLLOW_BUTTON_SELECTOR).andSelf().filter(a.Brand_FOLLOW_BUTTON_SELECTOR).first().data(a.BFID_DATA_KEY))||
e.incrementCSMCounter(h+":notFound"),h=f):(e.incrementCSMCounter(h+":unknownInput"),h=void 0):h=void 0;h||e.incrementCSMCounter(m+":emptyBFID");(h=b.getLastClickEvent(h))||e.incrementCSMCounter(m+":emptyResponse");return h},isFollowing:function(e){return b.getFollowStatus(e)===a.BRAND_FOLLOW_STATUS.FOLLOWING}}});"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants").register("on-brand-follow-status-change",function(f,b,a){var e=f.$;f.state.bind("brand-follow-status",
function(f,k){for(var m in k)k.hasOwnProperty(m)&&k[m]&&(b.getFollowStatus(m)===a.BRAND_FOLLOW_STATUS.FOLLOWING?e("[data-bfid\x3d'"+m+"']").each(function(){e(this).text(e(this).data(a.FOLLOWING_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))}):e("[data-bfid\x3d'"+m+"']").each(function(){e(this).text(e(this).data(a.FOLLOW_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOW_DATA_KEY))}))})});"use strict";p.when("A").register("brand-follow-button-event-helper",
function(f){return{triggerFollowButtonLoadedEvent:function(){f.trigger("brandFollow:followButton:loaded")},triggerFollowButtonRedirectionEvent:function(b){f.trigger("brandFollow:followButton:redirectToAuthPortal",b)}}});"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-auth-portal-link-builder","brand-follow-button-event-helper","brand-follow-metrics-client","brand-follow-csm-helper").register("brand-follow-button-click-handler",
function(f,b,a,e,g,k,m,h){var c=f.$;f.on("brandFollow:followButton:loaded",function(){c(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click");c(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click",function(d){var f=a.FOLLOW_CSM_PREFIX+":clickHandler";h.incrementCSMCounter(f);var p=c(this).find(a.Brand_FOLLOW_BUTTON_SELECTOR).first(),n=p.data(a.BFID_DATA_KEY);if(n){var q=b.getFollowStatus(n);q||(q=p.data(a.FOLLOW_STATUS_DATA_KEY)?
a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);switch(q){case a.BRAND_FOLLOW_STATUS.FOLLOWING:h.incrementCSMCounter(f+":status:following");b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);b.setLastClickEvent(n,a.EVENT_TYPE.UNFOLLOW);e.unfollow(n,function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);var c=m.buildFollowButtonClickMetricEvent(p,a.EVENT_TYPE.UNFOLLOW,d);m.processMetricEvent(c,{n:1})},function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING)});
break;case a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING:h.incrementCSMCounter(f+":status:not_following");b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);b.setLastClickEvent(n,a.EVENT_TYPE.FOLLOW);e.follow(n,function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING);var c=m.buildFollowButtonClickMetricEvent(p,a.EVENT_TYPE.FOLLOW,d);m.processMetricEvent(c,{n:1})},function(){b.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){k.triggerFollowButtonRedirectionEvent(d);var a=g.signin();
l.location.assign(a)});break;case a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN:h.incrementCSMCounter(f+":status:not_signed_in");k.triggerFollowButtonRedirectionEvent(d);f=g.signin();l.location.assign(f);break;case a.BRAND_FOLLOW_STATUS.ERROR:h.incrementCSMCounter(f+":status:error");k.triggerFollowButtonLoadedEvent();break;case a.BRAND_FOLLOW_STATUS.PENDING:h.incrementCSMCounter(f+":status:pending");d.stopPropagation();break;default:h.incrementCSMCounter(f+":status:unknown")}}else h.incrementCSMCounter(f+":emptyBFID")})})});
"use strict";p.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-button-event-helper","on-brand-follow-status-change","ready").register("brand-follow-button-initializer",function(f,b,a,e,g){f.on("brandFollow:followButton:loaded",function(){f.$(a.Brand_FOLLOW_BUTTON_SELECTOR).each(function(){var g=f.$(this),m=g.data(a.BFID_DATA_KEY);if(m!==n){var h=b.getFollowStatus(m);h===n||h===a.BRAND_FOLLOW_STATUS.ERROR?(g=g.data(a.FOLLOW_STATUS_DATA_KEY),
""!==g?b.setFollowStatus(m,g?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING):(b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.PENDING),e.getFollowStatusAndInitCsrf(m,function(c){b.setFollowStatus(m,c.isFollowing?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.ERROR)},function(){b.setFollowStatus(m,a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN)}))):h===a.BRAND_FOLLOW_STATUS.FOLLOWING?(g.text(g.data(a.FOLLOWING_TEXT_DATA_KEY)),
g.attr(a.ARIA_LABEL_KEY,g.data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))):(g.text(g.data(a.FOLLOW_TEXT_DATA_KEY)),g.attr(a.ARIA_LABEL_KEY,g.data(a.ARIA_LABEL_FOLLOW_DATA_KEY)))}})});g.triggerFollowButtonLoadedEvent()});"use strict";p.when("A","brand-follow-constants","brand-follow-button-event-helper","ready").execute("brand-follow-button-mutation-observer",function(f,b,a){var e=f.$;(function(){var g=l.MutationObserver||l.WebKitMutationObserver||l.MozMutationObserver;g!==n&&(new g(function(g,f){var h;f=!1;
for(var c=0;c<g.length;c++){h=g[c];if("childList"!==h.type)break;h=h.addedNodes;for(var d,l=0;l<h.length;l++)if(d=h[l],0!==e(d).find(b.Brand_FOLLOW_BUTTON_SELECTOR).length){f=!0;break}if(f){a.triggerFollowButtonLoadedEvent();break}}})).observe(document,{childList:!0,subtree:!0})})()})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,f=l?l("PostsSearchWidgetAssets",""):h;f.guardFatal?f.guardFatal(g)(f,window):f.execute(function(){g(f,window)})})(function(g,h,l){g.when("A","rush-framework","related-posts-search-metrics-client","related-posts-carousel-view","af","ready").register("related-posts-search-widget",function(f,h,k,c){h.registerComponent("related-posts-search-widget","related-posts-search-widget",function(b){var e=f.$(b.elem());b={sushiEndpoint:b.prop("sushiEndpoint"),
requestId:b.prop("requestId"),pageType:b.prop("pageType"),pageId:b.prop("pageId"),appMode:b.prop("appMode"),platform:b.prop("platform"),mShopBuild:b.prop("mShopBuild")};e=new c(e);b=new k(e,b);e.initEvents(b);e.$carousel.length||b.emitCsmCounter("PostsCarouselWidgetExpectedButNotLoaded")})});"use strict";g.when("A","a-carousel-framework","posts-carousel-linkto","af","ready").register("related-posts-carousel-view",function(f,g,k){function c(a){this.$carouselContainer=a.find(".posts-feed-preview-wrapper");
this.$carousel=a.find(".related-posts-carousel-container")}var b=f.$,e=!1;c.prototype.getCarouselElement=function(){return this.$carousel};c.prototype.initEvents=function(a){var d=this;g.onInit("posts-feed-preview-carousel",function(c){e?a.emitCsmCounter("PostsCarouselWidgetAlreadyInitialized"):c?(a.emitCsmCounter("PostsCarouselWidgetInitialized"),d.auiCarousel=c,f.on(f.constants.BROWSER_EVENTS.SCROLL,function(){a.handleUserScroll()}),c.onChange("px",function(){a.handleUserScroll()}),b(".posts-feed-preview-card").click(function(d){a.handleUserClick(d)}),
h.addEventListener("beforeunload",function(){a.handleUnload()}),h.addEventListener("pagehide",function(){a.handleUnload()}),h.addEventListener("DOMContentLoaded",function(){a.handlePageLoad()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&a.handleUnload();"visible"===document.visibilityState&&a.handlePageLoad()}),d.$carouselContainer.delegate("[data-target-href]","click",function(a){var e=a.target,c=d.$carouselContainer.get(0),m=b(a.target).attr("data-target-href");
if(null===m||m===l)m=b(a.target).closest("[data-target-href]").attr("data-target-href");for(;e&&e!==c;){if(e.hasAttribute("ignore-data-target-href"))return!1;e=e.parentNode}if("string"===typeof m&&m.length)return k.execute(m),!1}),d.$carouselContainer.delegate(".posts-feed-preview-link","mousedown keydown",function(a){switch(a.type){case "mousedown":b(a.target).addClass("posts-feed-preview-link-remove-outline");break;case "keydown":b(a.target).removeClass("posts-feed-preview-link-remove-outline")}}),
e=!0,a.initialize()):a.emitCsmCounter("PostsCarouselWidgetCarouselNotFound")})};return c});"use strict";g.when("A","posts-sushi-client","related-posts-measure","af","ready").register("related-posts-search-metrics-client",function(f,g,k){function c(a,d){this.carouselView=a;this.metricConfig=d;this.state={postVisibilityEventStates:{},postImpressionMetadata:{},carouselOnScreen:!1,unloadHandled:!1};this.sushiClient=new g(h,this.metricConfig.sushiEndpoint)}var b={PostImpression:2,PostPartialImpression:1,
CarouselOffScreen:1,PostClick:1,PostView:2,PostOffScreen:1,PageEgress:1},e=f.$;c.prototype.initialize=function(){this.isCarouselOutOfViewPort()||this.checkPostsClientSideMetrics()};c.prototype.handlePageLoad=function(){this.carouselInstance=this.generateInstanceId();this.requestInstance=this.generateInstanceId()};c.prototype.generateInstanceId=function(){return Math.round(Math.floor(999999*Math.random())+1)};c.prototype.emitCsmCounter=function(a){this.sushiClient.ueCount(a)};c.prototype.decorateMetricPayload=
function(a){a.request_id=this.metricConfig.requestId;a.request_instance=this.requestInstance;a.carousel_instance=this.carouselInstance;a.page_type=this.metricConfig.pageType;a.page_id=this.metricConfig.pageId;a.app_mode=this.metricConfig.appMode;a.app_build="1.0";a.platform=this.metricConfig.platform;this.metricConfig.mShopBuild&&(a.mshop_build=this.metricConfig.mShopBuild);a.event_version=b[a.event_type];return a};c.prototype.handleUserScroll=function(){this.checkPostsClientSideMetrics()};c.prototype.getOriginPx=
function(a){a=e("#"+a);var d=a.offset();return a.length?d.left+","+d.top:"-1,-1"};c.prototype.postOriginsAreInvalid=function(){for(var a=e(".posts-feed-preview-card"),d=null,b=!1,c=-1,f=this.carouselView.getCarouselElement().is(":visible"),h=0;h<a.length;h++){var g=e(a[h]),k=g.attr("id");if(g=g.is(":visible")){-1===c&&(c=h);k=this.getOriginPx(k);if(d){if(a=k===d)this.emitCsmCounter("PostsCarouselInvalidOrigins:LastVisible:"+(b?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CurVisible:"+
(g?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CarouselVisible:"+(f?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:FirstVisibleIndex:"+c);return a}d=k;b=g}}this.emitCsmCounter("PostsCarouselInvalidOrigins:NoCardsVisible:"+(d?"false":"true"));this.emitCsmCounter("PostsCarouselInvalidOrigins:CardsInvis:CarouselVisible:"+(f?"true":"false"));return!0};c.prototype.checkPostsClientSideMetrics=function(){if(this.postOriginsAreInvalid()){this.emitCsmCounter("PostsCarouselInvalidOrigins");
var a=!this.isCarouselOutOfViewPort();this.emitCsmCounter("PostsCarouselInvalidOrigins:OnScreen:"+(a?"true":"false"))}else this.checkPostImpressionMetrics(),this.checkPostCarouselOffScreenMetric()};c.prototype.checkPostImpressionMetrics=function(){for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),f=b.attr("data-post-rank");this.checkPostViewMetric(c,f);this.checkPostOffScreenMetric(c,f);b.is(":visible")&&(this.checkPostPartialImpressionMetric(c,f),this.checkPostImpressionMetric(c,
f))}};c.prototype.postEventEmittedSinceComingOnScreen=function(a,d){return this.state.postVisibilityEventStates[d]?this.state.postVisibilityEventStates[d][a]||!1:!1};c.prototype.shouldEmitMetrics=function(a,d){return!this.postEventEmittedSinceComingOnScreen(a,d)};c.prototype.checkPostCarouselOffScreenMetric=function(){if(this.state.carouselOnScreen&&this.isCarouselOutOfViewPort()){this.state.carouselOnScreen=!1;var a=this.decorateMetricPayload({event_type:"CarouselOffScreen"});this.sushiClient.processEvent(a,
{n:1});this.carouselInstance=this.generateInstanceId()}};c.prototype.checkPostPartialImpressionMetric=function(a,d){this.shouldEmitMetrics("PostPartialImpression",a)&&this.isPartialImpression(a)&&(this.state.carouselOnScreen=!0,d=this.buildPostEvent("PostPartialImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostPartialImpression"))};c.prototype.isPartialImpression=function(a){a=k.getElementViewportExtents(a);return(a.isTopInViewport||a.isBottomInViewport)&&(a.isLeftInViewport||
a.isRightInViewport)};c.prototype.checkPostViewMetric=function(a,d){if(this.shouldEmitMetrics("PostView",a)&&this.isView(a)){d=this.buildPostEvent("PostView",a,d);var b=f.now()-this.state.postVisibilityEventStates[a].PostImpression;0<b&&36E5>b&&(d.dwell_time_ms=Math.round(b));this.sushiClient.processEvent(d,{n:1});this.updateImpressionState(a,"PostView")}};c.prototype.isView=function(a){if(this.postEventEmittedSinceComingOnScreen("PostImpression",a))return a=k.getElementViewportAreas(a),a.viewportArea<
.5*a.totalArea};c.prototype.checkPostImpressionMetric=function(a,d){this.shouldEmitMetrics("PostImpression",a)&&this.isImpression(a)&&(d=this.buildPostEvent("PostImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostImpression",f.now()))};c.prototype.isImpression=function(a){a=k.getElementViewportAreas(a);return a.viewportArea>=.5*a.totalArea};c.prototype.checkPostOffScreenMetric=function(a,d){this.isPostOutOfViewPort(a)&&this.postEventEmittedSinceComingOnScreen("PostPartialImpression",
a)&&(d=this.buildPostEvent("PostOffScreen",a,d),this.sushiClient.processEvent(d,{n:1}),this.state.postVisibilityEventStates[a].PostImpression=!1,this.state.postVisibilityEventStates[a].PostPartialImpression=!1,this.state.postVisibilityEventStates[a].PostView=!1)};c.prototype.isPostOutOfViewPort=function(a){return!f.onScreen(e("#"+a),0)};c.prototype.isCarouselOutOfViewPort=function(){return!f.onScreen(this.carouselView.getCarouselElement(),0)};c.prototype.buildPostEvent=function(a,d,b){return this.decorateMetricPayload({event_type:a,
post_id:d.split("Posts-")[1],rank:parseInt(b,10),origin_px:this.getOriginPx(d)})};c.prototype.updateImpressionState=function(a,d,b){var c=this.state.postVisibilityEventStates[a]||{};c[d]="undefined"===typeof b?!0:b;this.state.postVisibilityEventStates[a]=c};c.prototype.handleUserClick=function(a){var d=e(a.target),b=d.attr("data-post-id"),c=d.attr("data-post-rank"),f=d.attr("data-click-target");if(null===b||null===c||b===l||c===l)c=d.closest(".posts-feed-preview-card"),b=c.attr("id"),c=c.attr("data-post-rank");
if(null===f||f===l)f=d.closest("[data-click-target]"),f=null!==f&&f!==l?f.attr("data-click-target"):"UNKNOWN";var g=this.buildPostEvent("PostClick",b,c);g.click_target=f;"FollowButton"===f&&h.BrandFollowSharedUtils&&e.isFunction(h.BrandFollowSharedUtils.getLastClickAction)&&(g.click_action=h.BrandFollowSharedUtils.getLastClickAction(a.target));this.sushiClient.processEvent(g,{n:1});a=d.closest("[data-click-action]");null!==a&&a!==l&&"Egress"===a.attr("data-click-action")&&"FollowButton"!==f&&(a=a.attr("data-target-destination")||
"NONE",this.emitPageEgressMetric(b,c,a,f))};c.prototype.emitPageEgressMetric=function(a,d,b,c){a=this.buildPostEvent("PageEgress",a,d);a.destination_type=b;a.click_target=c;this.sushiClient.processEvent(a,{n:1})};c.prototype.handleUnload=function(){if(!this.state.unloadHandled){this.state.unloadHandled=!0;for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),b=b.attr("data-post-rank");if(this.postEventEmittedSinceComingOnScreen("PostImpression",c)&&this.shouldEmitMetrics("PostView",
c)){var b=this.buildPostEvent("PostView",c,b),g=f.now()-this.state.postVisibilityEventStates[c].PostImpression;0<g&&36E5>g&&(b.dwell_time_ms=Math.round(g));this.sushiClient.processEvent(b,{n:1});this.updateImpressionState(c,"PostView")}}this.state.carouselOnScreen&&(a=this.decorateMetricPayload({event_type:"CarouselOffScreen"}),this.sushiClient.processEvent(a,{n:1}),this.state.carouselOnScreen=!1);this.state.carouselInstance=this.generateInstanceId();this.sushiClient.onBeforeUnload()}};return c});
"use strict";g.when("A","af","ready").register("related-posts-measure",function(f){function g(){var b=c(h),e=b.scrollTop(),a=b.scrollLeft(),d=h.innerHeight||b.height(),b=h.innerWidth||b.width();return{top:e,left:a,height:d,width:b,bottom:e+d,right:a+b}}function k(b){var c=b.offset(),a=c.top,c=c.left,d=b.height();b=b.width();return{top:a,left:c,height:d,width:b,bottom:a+d,right:c+b}}var c=f.$;return{getElementViewportAreas:function(b){b=c("#"+b);var e=g(),a=e.width*e.height,d=k(b),h=d.width*d.height,
e=Math.max(Math.min(d.right,e.right)-Math.max(d.left,e.left),0)*Math.max(Math.min(d.bottom,e.bottom)-Math.max(d.top,e.top),0);return b.length&&f.onScreen(b,0)?{totalArea:h,viewportArea:e,totalViewportArea:a}:{totalArea:1,viewportArea:0,totalViewportArea:a}},getElementViewportExtents:function(b){b=c("#"+b);var e=g(),a=k(b);return b.length&&f.onScreen(b,0)?{isTopInViewport:a.top>=e.top&&a.top<e.bottom,isBottomInViewport:a.bottom>=e.top&&a.bottom<e.bottom,isLeftInViewport:a.left>=e.left&&a.left<e.right,
isRightInViewport:a.right>=e.left&&a.right<e.right}:{isTopInViewport:!1,isBottomInViewport:!1,isLeftInViewport:!1,isRightInViewport:!1}},getViewportCoordinates:g,getElementLocation:k}});g.when("af","ready").register("posts-carousel-linkto",function(){return{execute:function(f){h.location.href=f}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PrelaunchAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("INSearchCXAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MoreLikeThisAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchCountdownAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
