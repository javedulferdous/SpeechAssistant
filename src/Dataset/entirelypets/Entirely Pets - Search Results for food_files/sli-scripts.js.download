SLI.initScripts=(function(window,undefined){window.SLI=window.SLI||{};SLI.scripts=SLI.scripts||{};window.SLI.console={log:window.console?console.log:function(a){}};SLI.paramPosition=function(url,param){var paramBit="&"+param+"=";var paramStart=url.indexOf(paramBit);if(paramStart==-1){paramStart=url.indexOf("?"+param+"=")}var paramEnd=url.indexOf("&",paramStart+1);return{start:(paramStart<0)?null:paramStart+paramBit.length,end:(paramEnd<0)?null:paramEnd}};SLI.paramFromUrl=function(url,param){var pos=SLI.paramPosition(url,param);
return pos.start?decodeURIComponent(url.substring(pos.start,pos.end||url.length)):""};function afPosition(href){var afStart=href.indexOf("&af=");if(afStart==-1){afStart=href.indexOf("?af=")}var afEnd=href.indexOf("&",afStart+1);return{start:(afStart===-1)?null:afStart+4,end:(afEnd===-1)?null:afEnd}}function afFromUrl(href){var afPos=afPosition(href);if(afPos.end){href=afPos.start?href.substring(afPos.start,afPos.end):""}else{href=afPos.start?href.substring(afPos.start):""}return href.replace(/%20/g," ").replace(/%3[aA]/g,":")
}function replaceAfInUrl(af,href){af=!!af?"af="+af:"";var afPos=afPosition(href);if(afPos.start){var tmp=href.substring(0,afPos.start-4);if(afPos.end){tmp=urlCat(tmp,href.substring(afPos.end))}href=tmp}return urlCat(href,af)}function urlCat(href,appendage){if(typeof appendage==="undefined"||appendage==""){return href}var separator=href.indexOf("?")==-1?"?":"&";if(appendage.charAt(0)=="?"||appendage.charAt(0)=="&"){appendage=appendage.substr(1)}return href+separator+appendage}function tokeniseAf(af){var afParts=af.split(" ");
var tokens=[];for(var i=0;i<afParts.length;i++){var tokenParts=afParts[i].split(":");if(tokenParts[0]&&tokenParts[1]){tokens.push({facet:tokenParts[0],value:tokenParts[1]})}}return tokens}function afFromTokens(tokens){var af="";for(var i=0;i<tokens.length;i++){if(tokens[i].facet&&tokens[i].value){af+=tokens[i].facet+":"+tokens[i].value+" "}}return af.replace(/\s+$/,"")}function updateFacet(tokens,facet,value,prepend){var facetIndex=-1;for(var i=0;i<tokens.length;i++){if(tokens[i].facet===facet){if(!prepend){facetIndex=i;
if(tokens[i].value===value){tokens.splice(i,1);break}tokens[i].value=value}else{if(tokens[i].value===value){facetIndex=i;tokens.splice(i,1);break}}}}if(facetIndex===-1){tokens.unshift({facet:facet,value:value})}return tokens}function facetsFrom(tokens,facet,value){var facetIndex=-1;for(var i=0;i<tokens.length;i++){if(tokens[i].facet===facet){if(!!value&&tokens[i].value===value){facetIndex=i;break}else{if(!value){facetIndex=i;break}}}}if(facetIndex!==-1){return tokens.slice(facetIndex)}else{return tokens}}processFacets=function(extraHref,facet,value,multi){var facetUrl=window.SLI.facetUrl||window.facet_url;
if(!facetUrl){facetUrl=""}var href=urlCat(facetUrl,extraHref);if(!facet){return href}var afTokens=tokeniseAf(afFromUrl(href));if(!value){value=""}afTokens=updateFacet(afTokens,facet,value,(multi&&value));return replaceAfInUrl(afFromTokens(afTokens),href)};removeFacets=function(extraHref,facet,value){var facetUrl=window.SLI.facetUrl||window.facet_url;if(!facetUrl){facetUrl=""}var href=urlCat(facetUrl,extraHref);if(!facet){return href}var afTokens=tokeniseAf(afFromUrl(href));afTokens=facetsFrom(afTokens,facet,value);
return replaceAfInUrl(afFromTokens(afTokens),href)};resetFacets=function(extraHref){var facetUrl=window.SLI.facetUrl||window.facet_url;if(!facetUrl){facetUrl=""}facetUrl=facetUrl.replace(/&af=[^&]+/,"").replace(/\?af=[^&]+/,"?").replace(/\?&/,"?");if(facetUrl.slice(-1)=="?"){facetUrl=facetUrl.slice(0,-1)}return urlCat(facetUrl,extraHref)};window.SLI._processFacets=processFacets;window.SLI._resetFacets=resetFacets;window.SLI._removeFacets=removeFacets;window.SLI.processFacets=function(extraHref,facet,value,multi){document.location=processFacets(extraHref,facet,value,multi)
};window.SLI.resetFacets=function(extraHref){document.location=resetFacets(extraHref)};window.SLI.removeFacets=function(extraHref,facet,value){document.location=removeFacets(extraHref,facet,value)};if(!window.facet_url&&!window.SLI.facetUrl&&typeof console.log==="function"){console.log("SLI Critical JavaScript error. Facet URL is not defined.")}SLI.jQuery.equalizeHeight=function(options){var new_height=0;var first_item=0;var elem_selector=options.element;var elements=SLI.jQuery(elem_selector);elements.each(function(i,n){var item=SLI.jQuery(n);
var item2=SLI.jQuery(elements[i+1]);if(i==(elements.length-1)){var title_height=item.height();if(title_height>new_height){new_height=title_height}elements.slice(first_item,(i+1)).height(new_height)}else{var top=item.length==0?0:item.offset().top;var top2=item2.length==0?0:item2.offset().top;var title_height=item.height();if(title_height>new_height){new_height=title_height}if(top2>top){elements.slice(first_item,(i+1)).height(new_height);new_height=0;first_item=i+1}}})};SLI.scripts.getObjectKeys=function(obj){var keys=[];
for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}return keys};SLI.scripts.invertObject=function(obj){var result={};var keys=SLI.scripts.getObjectKeys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};SLI.scripts.createEscaper=function(map){var escaper=function(match){return map[match]};var keys=SLI.scripts.getObjectKeys(map);var source="(?:"+keys.join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string===null?"":""+string;
return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};var unescapeMap={"&quot;":'"',"&#34;":'"',"&#034;":'"',"&amp;":"&","&#38;":"&","&#038;":"&","&#39;":"'","&#039;":"'","&#x2F;":"/","&lt;":"<","&#60;":"<","&#060;":"<","&#x3D;":"=","&gt;":">","&#62;":">","&#062;":">","&#x60;":"`"};var escapeMap=SLI.scripts.invertObject(unescapeMap);SLI.scripts.escapeHtml=SLI.scripts.createEscaper(escapeMap);SLI.scripts.unescapeHtml=SLI.scripts.createEscaper(unescapeMap)});SLI.initScipts=SLI.initScripts;
if(!SLI.jQuery&&typeof SLI.jQuery==="undefined"){var hasON=!!window.jQuery&&!!window.jQuery.fn&&!!window.jQuery.fn.on;if(window.jQuery&&hasON){SLI.jQuery=window.jQuery;SLI.initScripts(window,undefined)}else{location.hostname.match(/[^\/]+\.cfe\.nz/)?console.error("no jquery"):console.log("no jquery");SLI.addScript("//assets.resultspage.com/js/jquery-1.9.1.min.js",function(){SLI.jQuery=jQuery.noConflict(true);SLI.initScripts(window,undefined)})}}else{SLI.initScripts(window,undefined)};