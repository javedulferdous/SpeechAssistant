/*! permutive-javascript-sdk v13.0.0-RC.31 (web) (built 2020-10-29 08:53:47 GMT+0000) */!function(e){function t(t){for(var n,i,c=t[0],a=t[1],o=0,u=[];o<c.length;o++)i=c[o],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(s&&s(t);u.length;)u.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(){return Promise.resolve()},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var c=window.permutiveWebpack=window.permutiveWebpack||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var s=a;i(i.s=33)}([function(e,t,n){"use strict";n.d(t,"l",(function(){return r})),n.d(t,"k",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return _})),n.d(t,"m",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return y})),n.d(t,"i",(function(){return v}));n(4);var r=function(e){return"Some"===e._tag},i=function(e){return"None"===e._tag},c={_tag:"None"},a=function(e){return{_tag:"Some",value:e}};function o(e){return null==e?c:a(e)}function s(e){return function(t){return e(t)?a(t):c}}function u(e){return"Right"===e._tag?c:a(e.left)}function l(e){return"Left"===e._tag?c:a(e.right)}var p=function(e){return"Left"===e._tag?c:a(e.right)};function d(e,t){return function(n){return i(n)?e():t(n.value)}}var _=function(e){return function(t){return i(t)?e():t.value}};var f=function(e,t){return i(e)?c:a(t(e.value))},g=function(e,t){return i(e)?c:t(e.value)},h=function(e){return function(t){return f(t,e)}},m=function(e){return function(t){return g(t,e)}};function y(e){return{equals:function(t,n){return t===n||(i(t)?i(n):!i(n)&&e.equals(t.value,n.value))}}}function v(e){return{equals:y(e).equals,compare:function(t,n){return t===n?0:r(t)?r(n)?e.compare(t.value,n.value):1:-1}}}},function(e,t,n){"use strict";n.d(t,"bb",(function(){return a})),n.d(t,"Vb",(function(){return o})),n.d(t,"fb",(function(){return s})),n.d(t,"db",(function(){return l})),n.d(t,"cb",(function(){return p})),n.d(t,"eb",(function(){return d})),n.d(t,"qb",(function(){return _})),n.d(t,"zb",(function(){return f})),n.d(t,"Eb",(function(){return g})),n.d(t,"W",(function(){return h})),n.d(t,"X",(function(){return m})),n.d(t,"ab",(function(){return y})),n.d(t,"Ib",(function(){return v})),n.d(t,"Jb",(function(){return b})),n.d(t,"kb",(function(){return w})),n.d(t,"lb",(function(){return O})),n.d(t,"mb",(function(){return k})),n.d(t,"pb",(function(){return q})),n.d(t,"C",(function(){return j})),n.d(t,"Mb",(function(){return E})),n.d(t,"gb",(function(){return P})),n.d(t,"nb",(function(){return S})),n.d(t,"Rb",(function(){return I})),n.d(t,"hb",(function(){return x})),n.d(t,"Sb",(function(){return M})),n.d(t,"Ub",(function(){return T})),n.d(t,"Tb",(function(){return C})),n.d(t,"Pb",(function(){return D})),n.d(t,"F",(function(){return R})),n.d(t,"H",(function(){return L})),n.d(t,"G",(function(){return N})),n.d(t,"S",(function(){return U})),n.d(t,"Q",(function(){return B})),n.d(t,"R",(function(){return K})),n.d(t,"T",(function(){return W})),n.d(t,"V",(function(){return z})),n.d(t,"U",(function(){return Q})),n.d(t,"ib",(function(){return $})),n.d(t,"fc",(function(){return F})),n.d(t,"D",(function(){return G})),n.d(t,"tb",(function(){return J})),n.d(t,"Fb",(function(){return H})),n.d(t,"Gb",(function(){return V})),n.d(t,"ob",(function(){return Y})),n.d(t,"Nb",(function(){return X})),n.d(t,"jc",(function(){return Z})),n.d(t,"ic",(function(){return ee})),n.d(t,"ec",(function(){return te})),n.d(t,"Hb",(function(){return ne})),n.d(t,"J",(function(){return re})),n.d(t,"ac",(function(){return ie})),n.d(t,"Ob",(function(){return ce})),n.d(t,"y",(function(){return ae})),n.d(t,"Qb",(function(){return oe})),n.d(t,"z",(function(){return se})),n.d(t,"B",(function(){return ue})),n.d(t,"Zb",(function(){return le})),n.d(t,"jb",(function(){return pe})),n.d(t,"E",(function(){return de})),n.d(t,"ub",(function(){return _e})),n.d(t,"o",(function(){return Be})),n.d(t,"p",(function(){return Ke})),n.d(t,"q",(function(){return We})),n.d(t,"s",(function(){return ze})),n.d(t,"v",(function(){return Qe})),n.d(t,"x",(function(){return $e})),n.d(t,"w",(function(){return Fe})),n.d(t,"I",(function(){return Ge})),n.d(t,"rb",(function(){return Je})),n.d(t,"sb",(function(){return He})),n.d(t,"A",(function(){return Ve})),n.d(t,"Kb",(function(){return Ye})),n.d(t,"M",(function(){return Xe})),n.d(t,"N",(function(){return Ze})),n.d(t,"vb",(function(){return et})),n.d(t,"yb",(function(){return tt})),n.d(t,"wb",(function(){return nt})),n.d(t,"xb",(function(){return rt})),n.d(t,"O",(function(){return it})),n.d(t,"P",(function(){return ct})),n.d(t,"L",(function(){return at})),n.d(t,"Y",(function(){return ot})),n.d(t,"Z",(function(){return st})),n.d(t,"Ab",(function(){return ut})),n.d(t,"Db",(function(){return lt})),n.d(t,"Bb",(function(){return pt})),n.d(t,"Cb",(function(){return dt})),n.d(t,"Wb",(function(){return _t})),n.d(t,"Lb",(function(){return ft})),n.d(t,"Xb",(function(){return gt})),n.d(t,"hc",(function(){return ht})),n.d(t,"gc",(function(){return mt})),n.d(t,"Yb",(function(){return yt})),n.d(t,"i",(function(){return bt})),n.d(t,"j",(function(){return wt})),n.d(t,"c",(function(){return Ot})),n.d(t,"k",(function(){return kt})),n.d(t,"a",(function(){return qt})),n.d(t,"b",(function(){return jt})),n.d(t,"d",(function(){return Et})),n.d(t,"e",(function(){return Pt})),n.d(t,"f",(function(){return St})),n.d(t,"g",(function(){return It})),n.d(t,"h",(function(){return xt})),n.d(t,"l",(function(){return Mt})),n.d(t,"m",(function(){return Tt})),n.d(t,"n",(function(){return Ct})),n.d(t,"cc",(function(){return At})),n.d(t,"dc",(function(){return Dt})),n.d(t,"bc",(function(){return Rt})),n.d(t,"K",(function(){return Lt})),n.d(t,"u",(function(){return Nt})),n.d(t,"t",(function(){return Ut})),n.d(t,"r",(function(){return Bt}));var r=n(4),i=n(0),c=n(8);function a(e){var t=e.length;if(0===t)return Lt;for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function o(e){for(var t=e.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function s(e){return{show:function(t){return"["+t.map(e.show).join(", ")+"]"}}}var u=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),c=0;c<n;c++)i[c]=e[c];for(c=0;c<r;c++)i[c+n]=t[c];return i};function l(){return{concat:u,empty:Lt}}function p(e){return{equals:function(t,n){return t===n||t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}}}function d(e){return Object(c.b)((function(t,n){for(var r=t.length,i=n.length,a=Math.min(r,i),o=0;o<a;o++){var s=e.compare(t[o],n[o]);if(0!==s)return s}return c.i.compare(r,i)}))}function _(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}function f(e,t){return _(t-e+1,(function(t){return e+t}))}function g(e,t){return _(e,(function(){return t}))}function h(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r].length;var i=Array(t),c=0;for(r=0;r<n;r++){for(var a=e[r],o=a.length,s=0;s<o;s++)i[s+c]=a[s];c+=o}return i}function m(e,t){return function(n){return w(n)?e():t(n[0],n.slice(1))}}function y(e,t){return function(n){return w(n)?e():t(n.slice(0,n.length-1),n[n.length-1])}}function v(e,t){return function(n){var r=n.length,i=new Array(r+1);i[0]=e;for(var c=0;c<r;c++)i[c+1]=t(i[c],n[c]);return i}}function b(e,t){return function(n){var r=n.length,i=new Array(r+1);i[r]=e;for(var c=r-1;c>=0;c--)i[c]=t(n[c],i[c+1]);return i}}function w(e){return 0===e.length}function O(e){return e.length>0}function k(e,t){return e<0||e>=t.length}function q(e,t){return void 0===t?function(t){return q(e,t)}:k(e,t)?i.n:Object(i.o)(t[e])}function j(e,t){if(void 0===t)return function(t){return j(e,t)};for(var n=t.length,r=Array(n+1),i=0;i<n;i++)r[i+1]=t[i];return r[0]=e,r}function E(e,t){for(var n=e.length,r=Array(n+1),i=0;i<n;i++)r[i]=e[i];return r[n]=t,r}function P(e){return w(e)?i.n:Object(i.o)(e[0])}function S(e){return q(e.length-1,e)}function I(e){return w(e)?i.n:Object(i.o)(e.slice(1))}function x(e){var t=e.length;return 0===t?i.n:Object(i.o)(e.slice(0,t-1))}function M(e){return function(t){return t.slice(0,e)}}function T(e){return function(t){return 0===e?Lt:t.slice(-e)}}function C(e){return function(t){for(var n=A(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];return r}}var A=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function D(e){return function(t){for(var n=A(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];var c=t.length,a=Array(c-n);for(i=n;i<c;i++)a[i-n]=t[i];return{init:r,rest:a}}}function R(e){return function(t){return t.slice(e,t.length)}}function L(e){return function(t){return t.slice(0,t.length-e)}}function N(e){return function(t){for(var n=A(t,e),r=t.length,i=Array(r-n),c=n;c<r;c++)i[c-n]=t[c];return i}}function U(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(i.o)(r);return i.n}}function B(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(i.o)(t[r]);return i.n}}function K(e){return function(t){for(var n=t.length,r=0;r<n;r++){var c=e(t[r]);if(Object(i.l)(c))return c}return i.n}}function W(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(i.o)(t[n]);return i.n}}function z(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(Object(i.l)(r))return r}return i.n}}function Q(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(i.o)(n);return i.n}}function $(e,t){return function(n){return e<0||e>n.length?i.n:Object(i.o)(At(e,t,n))}}function F(e,t){return function(n){return k(e,n)?i.n:Object(i.o)(Dt(e,t,n))}}function G(e){return function(t){return k(e,t)?i.n:Object(i.o)(Rt(e,t))}}function J(e,t){return function(n){return k(e,n)?i.n:Object(i.o)(Dt(e,t(n[e]),n))}}function H(e){return w(e)?e:e.slice().reverse()}function V(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Right"===i._tag&&t.push(i.right)}return t}function Y(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Left"===i._tag&&t.push(i.left)}return t}var X=function(e){return function(t){return w(t)?t:t.slice().sort(e.compare)}};function Z(e,t,n){for(var r=[],i=Math.min(e.length,t.length),c=0;c<i;c++)r[c]=n(e[c],t[c]);return r}function ee(e,t){return void 0===t?function(t){return ee(t,e)}:Z(e,t,(function(e,t){return[e,t]}))}function te(e){for(var t=[],n=[],r=0;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]}function ne(e){return function(t){var n=t.length;return 0===e||n<=1||n===Math.abs(e)?t:e<0?ne(n+e)(t):t.slice(-e).concat(t.slice(0,n-e))}}function re(e){return function(t,n){if(void 0===n){var r=re(e);return function(e){return r(t,e)}}for(var i,c=0,a=n.length;c<a;c++)if(i=n[c],e.equals(i,t))return!0;return!1}}function ie(e){var t=re(e);return function(e){for(var n=[],r=e.length,i=0;i<r;i++){var c=e[i];t(c,n)||n.push(c)}return r===n.length?e:n}}function ce(e){var t=Object(c.d)();return X(e.reduce(t.concat,t.empty))}var ae=function(e){return function(t){for(var n=[],r=t;O(r);){var i=e(r),c=i[0],a=i[1];n.push(c),r=a}return n}};function oe(e){return function(t){return[t.slice(0,e),t.slice(e)]}}function se(e){var t=ae(oe(e));return function(n){return 0===n.length?Lt:k(e-1,n)?[n]:t(n)}}function ue(e,t,n){void 0===n&&(n=function(){return!0});var r=function(e,i){return 0===i.length?n.apply(void 0,e)?[t.apply(void 0,e)]:Lt:ve(i[0],(function(t){return r(E(e,t),i.slice(1))}))};return r(Lt,e)}function le(e){var t=re(e);return function(n,r){if(void 0===r){var i=le(e);return function(e){return i(e,n)}}return u(n,r.filter((function(e){return!t(e,n)})))}}function pe(e){var t=re(e);return function(n,r){if(void 0===r){var i=pe(e);return function(e){return i(e,n)}}return n.filter((function(e){return t(e,r)}))}}function de(e){var t=re(e);return function(n,r){if(void 0===r){var i=de(e);return function(e){return i(e,n)}}return n.filter((function(e){return!t(e,r)}))}}var _e=function(e){return[e]},fe=function(){return Lt},ge=function(e,t){return e.map((function(e){return t(e)}))},he=function(e,t){return e.map((function(e,n){return t(n,e)}))},me=function(e,t){return h(ge(e,(function(e){return ge(t,e)})))},ye=function(e,t){for(var n=0,r=e.length,i=new Array(r),c=0;c<r;c++){n+=(s=t(c,e[c])).length,i[c]=s}var a=Array(n),o=0;for(c=0;c<r;c++){for(var s,u=(s=i[c]).length,l=0;l<u;l++)a[l+o]=s[l];o+=u}return a},ve=function(e,t){return ye(e,(function(e,n){return t(n)}))},be=function(e,t){return Ce(e,(function(e,n){return t(n)}))},we=function(e,t){return e.filter(t)},Oe=function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var c=e[i];t(i,c)?r.push(c):n.push(c)}return{left:n,right:r}},ke=function(e,t){return Oe(e,(function(e,n){return t(n)}))},qe=function(e,t){return je(e,(function(e,n){return t(n)}))},je=function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var c=t(i,e[i]);"Left"===c._tag?n.push(c.left):r.push(c.right)}return{left:n,right:r}},Ee=function(e,t){return u(e,t())},Pe=function(e,t,n){return xe(e,t,(function(e,t,r){return n(t,r)}))},Se=function(e){var t=Me(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},Ie=function(e,t,n){return Te(e,t,(function(e,t,r){return n(t,r)}))},xe=function(e,t,n){for(var r=e.length,i=t,c=0;c<r;c++)i=n(c,i,e[c]);return i},Me=function(e){return function(t,n){return t.reduce((function(t,r,i){return e.concat(t,n(i,r))}),e.empty)}},Te=function(e,t,n){return e.reduceRight((function(e,t,r){return n(r,t,e)}),t)},Ce=function(e,t){for(var n=[],r=0;r<e.length;r++){var c=t(r,e[r]);Object(i.l)(c)&&n.push(c.value)}return n},Ae=function(e,t){return e.filter((function(e,n){return t(n,e)}))},De=function(e,t){return e.map((function(e,n,r){return t(r.slice(n))}))},Re=function(e){var t=Le(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},Le=function(e){return function(t,n){return xe(t,e.of(fe()),(function(t,r,i){return e.ap(e.map(r,(function(e){return function(t){return E(e,t)}})),n(t,i))}))}},Ne=function(e){var t=Re(e);return function(n,r){return e.map(t(n,r),Ve)}},Ue=function(e){var t=Re(e);return function(n,r){return e.map(t(n,r),Ye)}},Be=function(e){return function(t){return Ee(t,e)}},Ke=function(e){return function(t){return me(t,e)}},We=function(e){return function(t){return me(ge(t,(function(e){return function(){return e}})),e)}},ze=function(e){return function(t){return me(ge(t,(function(){return function(e){return e}})),e)}},Qe=function(e){return function(t){return ve(t,e)}},$e=function(e){return function(t){return ye(t,e)}},Fe=function(e){return function(t){return ve(t,(function(t){return ge(e(t),(function(){return t}))}))}},Ge=function(e){return De(e,r.e)},Je=function(e){return function(t){return ge(t,e)}},He=function(e){return function(t){return he(t,e)}},Ve=function(e){return be(e,r.e)},Ye=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var c=i[r];"Left"===c._tag?t.push(c.left):n.push(c.right)}return{left:t,right:n}},Xe=function(e){return function(t){return we(t,e)}},Ze=function(e){return function(t){return be(t,e)}},et=function(e){return function(t){return ke(t,e)}},tt=function(e){return function(t){return Oe(t,e)}},nt=function(e){return function(t){return qe(t,e)}},rt=function(e){return function(t){return je(t,e)}},it=function(e){return function(t){return Ce(t,e)}},ct=function(e){return function(t){return Ae(t,e)}},at=function(e){return function(t){return De(t,e)}},ot=function(e){var t=Se(e);return function(e){return function(n){return t(n,e)}}},st=function(e){var t=Me(e);return function(e){return function(n){return t(n,e)}}},ut=function(e,t){return function(n){return Pe(n,e,t)}},lt=function(e,t){return function(n){return xe(n,e,t)}},pt=function(e,t){return function(n){return Ie(n,e,t)}},dt=function(e,t){return function(n){return Te(n,e,t)}},_t=function(e){var t=Re(e);return function(e){return function(n){return t(n,e)}}},ft=function(e){return function(t){return Pe(t,e.of(fe()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return E(e,t)}})),n)}))}},gt=function(e){var t=Le(e);return function(e){return function(n){return t(n,e)}}},ht=function(e){var t=Ne(e);return function(e){return function(n){return t(n,e)}}},mt=function(e){var t=Ue(e);return function(e){return function(n){return t(n,e)}}},yt=function(e,t){for(var n=[],r=e;;){var c=t(r);if(!Object(i.l)(c))break;var a=c.value,o=a[0],s=a[1];n.push(o),r=s}return n},vt="ReadonlyArray",bt={URI:vt,map:ge},wt={URI:vt,map:ge,mapWithIndex:he},Ot={URI:vt,map:ge,ap:me,of:_e},kt={URI:vt,map:ge,ap:me,of:_e,chain:ve},qt={URI:vt,map:ge,alt:Ee},jt={URI:vt,map:ge,ap:me,of:_e,alt:Ee,zero:fe},Et={URI:vt,map:ge,extend:De},Pt={URI:vt,map:ge,compact:Ve,separate:Ye,filter:we,filterMap:be,partition:ke,partitionMap:qe},St={URI:vt,map:ge,mapWithIndex:he,compact:Ve,separate:Ye,filter:we,filterMap:be,partition:ke,partitionMap:qe,partitionMapWithIndex:je,partitionWithIndex:Oe,filterMapWithIndex:Ce,filterWithIndex:Ae},It={URI:vt,reduce:Pe,foldMap:Se,reduceRight:Ie},xt={URI:vt,reduce:Pe,foldMap:Se,reduceRight:Ie,reduceWithIndex:xe,foldMapWithIndex:Me,reduceRightWithIndex:Te},Mt={URI:vt,map:ge,reduce:Pe,foldMap:Se,reduceRight:Ie,traverse:Re,sequence:ft},Tt={URI:vt,map:ge,mapWithIndex:he,reduce:Pe,foldMap:Se,reduceRight:Ie,reduceWithIndex:xe,foldMapWithIndex:Me,reduceRightWithIndex:Te,traverse:Re,sequence:ft,traverseWithIndex:Le},Ct={URI:vt,map:ge,compact:Ve,separate:Ye,filter:we,filterMap:be,partition:ke,partitionMap:qe,reduce:Pe,foldMap:Se,reduceRight:Ie,traverse:Re,sequence:ft,wither:Ne,wilt:Ue};function At(e,t,n){var r=n.slice();return r.splice(e,0,t),r}function Dt(e,t,n){if(n[e]===t)return n;var r=n.slice();return r[e]=t,r}function Rt(e,t){var n=t.slice();return n.splice(e,1),n}var Lt=[],Nt=function(e){return Je(Object(r.a)(e))},Ut=function(e,t){return Qe((function(n){return Object(r.f)(t(n),Je((function(t){return Object(r.b)(n,e,t)})))}))},Bt=function(e,t){return Object(r.d)(Je((function(t){return function(n){return Object(r.b)(t,e,n)}})),Ke(t))}},function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"m",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"o",(function(){return p})),n.d(t,"q",(function(){return d})),n.d(t,"s",(function(){return _})),n.d(t,"c",(function(){return f})),n.d(t,"r",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"p",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return w}));const r=()=>({kind:"null",value:null}),i=e=>({kind:"string",value:e}),c=e=>({kind:"number",value:e}),a=e=>({kind:"array",value:e}),o=e=>({kind:"object",value:e}),s=e=>e,u=()=>({kind:"bottom"}),l=e=>({kind:"inner",a:e}),p=e=>({kind:"top",error:e}),d=e=>({kind:"unbounded",group:e}),_=(e,t)=>({kind:"windowed",key:t,group:e}),f=(e,t,n)=>({kind:"countLimit",n:n,limit:t,group:e}),g=(e,t,n)=>({kind:"uniqueLimit",n:n,limit:t,group:e}),h=e=>({kind:"numberGroup",group:e}),m=e=>({kind:"stringGroup",group:e}),y=e=>({kind:"tuple",tuple:e}),v=e=>({state:e}),b=(e,t)=>({commands:e,payload:t}),w=e=>e},function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"n",(function(){return i})),n.d(t,"o",(function(){return c})),n.d(t,"r",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"t",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"s",(function(){return p})),n.d(t,"p",(function(){return q})),n.d(t,"c",(function(){return j})),n.d(t,"q",(function(){return E})),n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return M})),n.d(t,"k",(function(){return A})),n.d(t,"i",(function(){return D})),n.d(t,"l",(function(){return R})),n.d(t,"h",(function(){return L})),n.d(t,"e",(function(){return N}));n(4);var r=function(e){return"Left"===e._tag},i=function(e){return"Right"===e._tag},c=function(e){return{_tag:"Left",left:e}},a=function(e){return{_tag:"Right",right:e}};function o(e){return function(t){return null==t?c(e):a(t)}}function s(e,t){try{return a(e())}catch(e){return c(t(e))}}function u(e,t){return function(n){return r(n)?e(n.left):t(n.right)}}var l=function(e){return function(t){return r(t)?e(t.left):t.right}};function p(e){return r(e)?a(e.left):c(e.right)}var d=function(e,t){return r(e)?e:a(t(e.right))},_=function(e,t){return r(e)?e:r(t)?t:a(e.right(t.right))},f=function(e,t){return r(e)?e:t(e.right)},g=function(e,t,n){return r(e)?t:n(t,e.right)},h=function(e){return function(t,n){return r(t)?e.empty:n(t.right)}},m=function(e,t,n){return r(e)?t:n(e.right,t)},y=function(e){return function(t,n){return r(t)?e.of(c(t.left)):e.map(n(t.right),a)}},v=function(e,t,n){return r(e)?c(t(e.left)):a(n(e.right))},b=function(e,t){return r(e)?c(t(e.left)):e},w=function(e,t){return r(e)?t():e},O=function(e,t){return r(e)?e:a(t(e))},k=function(e,t){return function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}(t(e),(function(e){return r(e)?a(c(e.left)):r(e.right)?c(t(e.right.left)):a(a(e.right.right))}))},q=function(e){return function(t){return d(t,e)}},j=function(e,t){return function(n){return v(n,e,t)}},E=function(e){return function(t){return b(t,e)}},P=function(e){return function(t){return _(t,e)}},S=P,I=a,x=function(e){return function(t){return f(t,e)}},M=x,T=function(e){return function(t){return r(t)?e.of(c(t.left)):e.map(t.right,a)}},C="Either";function A(e){return{concat:function(t,n){return r(n)?t:r(t)?n:a(e.concat(t.right,n.right))}}}function D(e){return{concat:function(t,n){return r(t)?t:r(n)?n:a(e.concat(t.right,n.right))}}}function R(e){var t=function(e){var t=c(e.empty);return{URI:C,_E:void 0,map:d,compact:function(e){return r(e)?e:"None"===e.right._tag?t:a(e.right.value)},separate:function(e){return r(e)?{left:e,right:e}:r(e.right)?{left:a(e.right.left),right:t}:{left:t,right:a(e.right.right)}},filter:function(e,n){return r(e)||n(e.right)?e:t},filterMap:function(e,n){if(r(e))return e;var i=n(e.right);return"None"===i._tag?t:a(i.value)},partition:function(e,n){return r(e)?{left:e,right:e}:n(e.right)?{left:t,right:a(e.right)}:{left:a(e.right),right:t}},partitionMap:function(e,n){if(r(e))return{left:e,right:e};var i=n(e.right);return r(i)?{left:a(i.left),right:t}:{left:t,right:a(i.right)}}}}(e);return{URI:C,_E:void 0,map:d,compact:t.compact,separate:t.separate,filter:t.filter,filterMap:t.filterMap,partition:t.partition,partitionMap:t.partitionMap,traverse:y,sequence:T,reduce:g,foldMap:h,reduceRight:m,wither:function(e){var n=y(e);return function(r,i){return e.map(n(r,i),t.compact)}},wilt:function(e){var n=y(e);return function(r,i){return e.map(n(r,i),t.separate)}}}}function L(e){return{URI:C,_E:void 0,map:d,ap:function(t,n){return r(t)?r(n)?c(e.concat(t.left,n.left)):t:r(n)?n:a(t.right(n.right))},of:I}}var N={URI:C,map:d,of:a,ap:_,chain:f,reduce:g,foldMap:h,reduceRight:m,traverse:y,sequence:T,bimap:v,mapLeft:b,alt:w,extend:O,chainRec:k,throwError:c}},function(e,t,n){"use strict";function r(e){return e}n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=function(){};function c(e,t,n,r,i,c,a,o,s){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return c(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(c(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(a(c(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return s(o(a(c(i(r(n(t(e.apply(this,arguments)))))))))}}}function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function o(e,t,n,r,i,c,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return c(i(r(n(t(e)))));case 7:return a(c(i(r(n(t(e))))));case 8:return o(a(c(i(r(n(t(e)))))));case 9:return s(o(a(c(i(r(n(t(e))))))));case 10:return u(s(o(a(c(i(r(n(t(e)))))))))}}var s=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},u=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return _})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"m",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return w}));var r=n(6),i=n(0),c=n(11),a=n(7);function o(...e){return e.reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}function s(e,...t){return t.reduce((e,t)=>e?e[t]:void 0,e)}function u(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function l(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),reject:t,resolve:e}}function p(e,t,n=!1,c=20){let a=0;const o=s=>new Promise(u=>Promise.resolve(t()).then(t=>t?Promise.resolve(e()).then(e=>u(Object(i.o)(e))):Object(r.a)(a++,e=>e<c?setTimeout(()=>u(o(s*(n?2:1))),s):u(i.n))));return o(50)}function d(...e){return t=>e.reduce((e,t)=>Promise.resolve(e).then(t),t)}function _(e){const t={equals:(t,n)=>t[0]===n[0]&&e.equals(t[1],n[1])},n=Object(a.i)(t);return Object(c.a)(e=>Object.entries(e))(n)}function f(e){if("string"==typeof e){const t=+e;if(!isNaN(t))return t}return e}function g(e,t){const n=t=>{if(!r&&t)return r=!0,e()};let r=!1;["blur","visibilitychange"].forEach(e=>{window.addEventListener(e,()=>n(document.hidden&&function(e){return/Mobi|Android/i.test(e)}(t)))}),["beforeunload","pagehide"].forEach(e=>{window.addEventListener(e,()=>n(!0))})}function h(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function m(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function y(e,t){const n=Object.keys(e),r=n.length,c={};for(let a=0;a<r;a++){const r=n[a],o=t(r,e[r]);Object(i.l)(o)&&(c[r]=o.value)}return c}function v(...e){const t={},n=e.length;for(let r=0;r<n;r++){const[n,i]=e[r];t[n]=i}return t}function b(e,t){return y(e,(e,n)=>t(e)?Object(i.o)(n):i.n)}function w(e){return/^((?!chrome|android).)*safari/i.test(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),i=r.f},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"h",(function(){return a})),n.d(t,"o",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"l",(function(){return d})),n.d(t,"m",(function(){return _})),n.d(t,"q",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"k",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"p",(function(){return b}));var r=n(1),i=(r.fb,r.db,r.cb),c=r.eb,a=(r.qb,r.zb,r.Eb,r.W),o=(r.X,r.ab,r.Ib,r.Jb,r.kb,r.lb,r.mb,r.pb,r.C,r.Mb,r.gb,r.nb,r.Rb,r.hb,r.Sb);r.Ub;function s(e){return r.Pb(e)}var u=r.F,l=(r.H,r.G);r.S;function p(e){return r.Q(e)}r.R;r.V,r.U,r.Vb,r.ib,r.fc,r.D,r.tb;var d=r.Fb,_=(r.Gb,r.ob,r.Nb),f=r.jc,g=(r.ic,r.ec,r.Hb,r.J);r.ac,r.Ob,r.y,r.Qb,r.z;r.Zb;var h=r.jb,m=r.E,y=(r.ub,r.k.map,r.k.ap,r.k.chain,r.j.mapWithIndex,r.e.filter,r.e.filterMap,r.e.partition,r.e.partitionMap,r.f.filterWithIndex,r.f.filterMapWithIndex,r.f.partitionWithIndex,r.f.partitionMapWithIndex,r.g.reduce,r.g.foldMap,r.g.reduceRight,r.l.traverse,r.b.alt,r.h.reduceWithIndex,r.h.foldMapWithIndex,r.h.reduceRightWithIndex,r.m.traverseWithIndex,r.d.extend,r.n.wither,r.n.wilt,r.rb,r.p,r.q,r.s,r.v),v=(r.x,r.w,r.sb,r.A),b=(r.Kb,r.M,r.N,r.vb,r.yb,r.wb,r.xb,r.o,r.O,r.P,r.L,r.I,r.Y,r.Z,r.Ab,r.Db,r.Bb,r.Cb,r.Wb);r.Lb,r.Xb,r.hc,r.gc,r.Yb,r.b.zero,r.cc,r.dc,r.bc,r.u,r.t,r.r},function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h}));var r=n(18);function i(e,t){return e<t?-1:e>t?1:0}function c(e,t){return e===t}var a={equals:c,compare:i},o={equals:c,compare:i};function s(e){return function(t,n){return-1===e.compare(t,n)}}function u(e){return function(t,n){return 1===e.compare(t,n)}}function l(e){return function(t,n){return-1!==e.compare(t,n)}}function p(e){return function(t,n){return 1===e.compare(t,n)?n:t}}function d(e){return function(t,n){return-1===e.compare(t,n)?n:t}}function _(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}}function f(){return{concat:{concat:function(e,t){return _((function(n,i){return r.b.concat(e.compare(n,i),t.compare(n,i))}))}}.concat,empty:_((function(){return 0}))}}var g=function(e,t){return _((function(n,r){return e.compare(t(n),t(r))}))},h=function(e){return function(t){return g(t,e)}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n(3);n(0);var i=n(4),c=n(10),a=Object(i.d)(r.o,c.h),o=Object(i.d)(r.r,c.h),s=(r.r,r.o,c.e,function(e){return r.m(e)?a(e.left):o(e.right)}),u=function(e){return function(t){return"None"===t._tag?a(e()):o(t.value)}};function l(e,t){return function(){return e().then(r.r,(function(e){return r.o(t(e))}))}}r.f,c.d;var p=function(e){return function(t){return Object(i.f)(t,c.d(r.f(e,c.h)))}};r.s;var d=function(e){return c.g(r.p(e))},_=(r.c,c.g,function(e){return function(t){return Object(i.f)(t,c.d(r.f(a,e)))}}),f=_;i.e},function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return _})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n(4),i=function(e){return function(){return Promise.resolve(e())}};var c=function(e,t){return function(){return e().then(t)}},a=function(e,t){return function(){return Promise.all([e(),t()]).then((function(e){return(0,e[0])(e[1])}))}},o=function(e,t){return function(){return e().then((function(e){return t(e)()}))}},s=function(e){return function(t){return c(t,e)}},u=function(e){return function(t){return a(t,e)}},l=function(e){return function(){return Promise.resolve(e)}},p=function(e){return function(t){return o(t,e)}},d=(r.e,"Task");function _(e){return{concat:function(t,n){return function(){return t().then((function(t){return n().then((function(n){return e.concat(t,n)}))}))}}}}var f={URI:d,map:c,ap:a,of:l},g={URI:d,map:c,of:l,ap:a,chain:o}},function(e,t,n){"use strict";function r(e){return{equals:function(t,n){return t===n||e(t,n)}}}n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var i=function(e){return function(t){return c(t,e)}},c=function(e,t){return r((function(n,r){return e.equals(t(n),t(r))}))},a={equals:function(e,t){return e===t}};var o=a,s=a,u=a;function l(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));const r=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},s(e)),i=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},s(e)),c=(e,t)=>Object.assign({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},s(t)),a=e=>void 0!==e.request_id,o=e=>void 0!==e.properties,s=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(5),i=n(0);const c=(e,t)=>e in t,a=e=>Object.entries(e).filter(([e,t])=>{var n;return!0===(null===(n=t.result)||void 0===n?void 0:n.result)}).map(([e,t])=>parseInt(e,10)),o=e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!0}),{}),s=e=>Object(r.j)(e,(e,t)=>t.state?Object(i.o)({[t.checksum]:t.state}):i.n),u=(e,t,n)=>e.filter(e=>{var r,i,c,a;return(null===(i=null===(r=null==e?void 0:e.properties)||void 0===r?void 0:r.client)||void 0===i?void 0:i.type)===t&&(null===(a=null===(c=null==e?void 0:e.properties)||void 0===c?void 0:c.client)||void 0===a?void 0:a.domain)===n}),l=(e,t=100)=>{const n={SegmentEntry:1,SegmentExit:1,ThirdPartySegments:1,PageviewEngagement:1,SlotClicked:1,SlotRendered:1,SlotViewable:1,Reaction:1,PrebidBid:1,PrebidBids:1,rtaBid:1};return e.filter(e=>!n[e.name]).slice(-1*t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return O}));var r,i=n(3),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+t.name+")"),new e(n,t.is,(function(e,n){var c=r.validate(e,n);return Object(i.m)(c)?c:t.validate(c.right,n)}),this.encode===o&&t.encode===o?o:function(e){return r.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),o=function(e){return e},s=i.o,u=function(e,t,n){return s([{value:e,context:t,message:n}])},l=i.r,p=(new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="NullType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="UndefinedType",t}return c(t,e),t}(a))),d=(new(function(e){function t(){var t=e.call(this,"void",p.is,p.validate,o)||this;return t._tag="VoidType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),l,o)||this;return t._tag="UnknownType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="StringType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="NumberType",t}return c(t,e),t}(a))),_=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="BigIntType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="BooleanType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="AnyArrayType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="AnyDictionaryType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="FunctionType",t}return c(t,e),t}(a)),function(e){function t(t,n,r,i,c,a){var o=e.call(this,t,n,r,i)||this;return o.type=c,o.predicate=a,o._tag="RefinementType",o}return c(t,e),t}(a)),f=(h(d,(function(e){return Number.isInteger(e)}),"Int"),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.value=c,a._tag="LiteralType",a}c(t,e)}(a),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.keys=c,a._tag="KeyofType",a}c(t,e)}(a),Object.prototype.hasOwnProperty,function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.runDefinition=c,a._tag="RecursiveType",a}return c(t,e),t}(a));Object.defineProperty(f.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});(function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.type=c,a._tag="ArrayType",a}c(t,e)})(a),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.props=c,a._tag="InterfaceType",a}c(t,e)}(a),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.props=c,a._tag="PartialType",a}c(t,e)}(a),function(e){function t(t,n,r,i,c,a){var o=e.call(this,t,n,r,i)||this;return o.domain=c,o.codomain=a,o._tag="DictionaryType",o}c(t,e)}(a);var g=function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.types=c,a._tag="UnionType",a}return c(t,e),t}(a);!function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.types=c,a._tag="IntersectionType",a}c(t,e)}(a);!function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.types=c,a._tag="TupleType",a}c(t,e)}(a);(function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.type=c,a._tag="ReadonlyType",a}c(t,e)})(a),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.type=c,a._tag="ReadonlyArrayType",a}c(t,e)}(a),function(e){function t(t,n,r,i,c,a){var o=e.call(this,t,n,r,i,c)||this;return o.tag=a,o}c(t,e)}(g),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.type=c,a._tag="ExactType",a}c(t,e)}(a),new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return u(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),l,o)||this;return t._tag="AnyType",t}return c(t,e),t}(a)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?l(e):u(e,n)}),o)||this;return t._tag="ObjectType",t}return c(t,e),t}(a));function h(e,t,n){var r;return void 0===n&&(n="("+e.name+" | "+(((r=t).displayName||r.name||"<function"+r.length+">")+")")),new _(n,(function(n){return e.is(n)&&t(n)}),(function(n,r){var c=e.validate(n,r);if(Object(i.m)(c))return c;var a=c.right;return t(a)?l(a):u(a,r)}),e.encode,e,t)}h(d,Number.isInteger,"Integer"),function(e){function t(t,n,r,i,c){var a=e.call(this,t,n,r,i)||this;return a.props=c,a._tag="StrictType",a}c(t,e)}(a);var m=n(2),y=n(7),v=n(6),b=n(4);function w(e){switch(e.kind){case"null":return k.encode(e);case"string":return q.encode(e);case"number":return j.encode(e);case"array":return E.encode(e);case"object":return P.encode(e)}}function O(e){return null===e?k.decode(e):"number"==typeof e?j.decode(e):"string"==typeof e?q.decode(e):Array.isArray(e)?E.decode(e):P.decode(e)}const k=new a("simpleNullCodec",e=>{const t=e;return"null"===t.kind&&null===t.value},(e,t)=>null===e?l(Object(m.j)()):u(e,t),e=>e.value),q=new a("simpleStringCodec",e=>{const t=e;return"string"===t.kind&&"string"==typeof t.value},(e,t)=>"string"==typeof e?l(Object(m.m)(e)):u(e,t),e=>e.value),j=new a("simpleNumberCodec",e=>{const t=e;return"number"===t.kind&&"number"==typeof t.value},(e,t)=>"number"==typeof e?l(Object(m.k)(e)):u(e,t),e=>e.value),E=new a("simpleArrayCodec",e=>{const t=e;return"array"===t.kind&&Array.isArray(t.value)},(e,t)=>{if(Array.isArray(e)){const t=Object(y.p)(i.e)(O)(e);return Object(i.p)(m.i)(t)}return u(e,t)},e=>e.value.map(w)),P=new a("simpleObjectCodec",e=>"object"===e.kind,(e,t)=>{if(e&&e.constructor===Object){const t=Object(y.p)(i.e)(([e,t])=>Object(v.a)(O(t),Object(i.p)(t=>Object(b.g)(e,t))))(Object.entries(e));return Object(i.p)(e=>Object(m.l)(new Map([...e])))(t)}return u(e,t)},e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,([e,t])=>({[e]:w(t)})))});new a("simpleJsonCodec",e=>k.is(e)||j.is(e)||q.is(e)||E.is(e)||P.is(e),O,w)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(0),i=n(7),c=n(6),a=n(4),o=n(11);class s{constructor(e,t,n){this._internals=e,this.permutive=t,this.network=n,this.providers={},this.identities=this._internals.state.getPermutiveData("identities")||{},this.aliases=this._internals.state.getPermutiveData("aliases")||{}}prepareThirdPartyIdentities(){const e=this._internals.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=[Promise.resolve().then(n.bind(null,39))];return Promise.all(t).then(e=>Promise.all(e.map(e=>e.make(this._internals,this.network,this.permutive)))).then(e=>Object(c.a)(Object(i.b)(e),e=>Promise.all(e.map(e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve(Object(a.g)(e,this.getCachedIdentity(e.tag))))))).then(e=>e.map(([e,t])=>(this.providers[e.tag]=e,this.setIdentityAndAliasIfPresent(e.tag,t,e.ttlInSeconds)))).then(()=>this._internals.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e))}getIdentities(e=!1){const t=t=>this.identities[t].value&&(!e||this.providers[t].usedForThirdPartyData);return Object.keys(this.identities).reduce((e,n)=>Object.assign(Object.assign({},e),t(n)?{[n]:this.identities[n].value}:{}),{})}getAliasesFromIdentifyArg(e){if("string"!=typeof e&&"object"!=typeof e||null===e||""===e)throw new Error("Identify must be passed a non-empty string or list of aliases, value passed was '"+e+"'");return"string"==typeof e?[{id:e,tag:"default"}]:e}aliasMapToPrioritizedList(e){const t={default:0,appnexus:1},n=e=>Object(r.k)(this._internals.identities.getCachedIdentity(e))?0:e in t?t[e]+1:1;return Object.keys(e).map(t=>({id:e[t],tag:t,priority:n(t)}))}shouldAskForNewIdentity(e){const t=Object(r.d)(this.identities[e.tag]);return Object(r.b)(()=>!0,t=>this.isIdentityExpired(e.tag))(t)}getCachedIdentity(e){return this.identities[e]?Object(r.d)(this.identities[e].value):r.n}setIdentityAndAliasIfPresent(e,t,n=86400){return Object(r.b)(()=>{this.identities[e]={expiry:Date.now()+Math.floor(1e3*n)},this._internals.state.setPermutiveData("identities",this.identities)},t=>{this.identities[e]={value:t,expiry:Date.now()+Math.floor(1e3*n)},this.setAlias(t,e),this._internals.state.setPermutiveData("identities",this.identities)})(t)}setAlias(e,t){this.aliases[t]=e,this._internals.state.setPermutiveData("aliases",this.aliases)}retrieveIdentity(e){return e.getId().then(t=>"skipped"===t.type?Object(a.g)(e,r.n):Object(c.a)(t.result,t=>this._internals.metrics.track({name:Object(r.l)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}}),n=>Object(a.g)(e,t.result)))}isIdentityExpired(e){return Date.now()>=this.identities[e].expiry}}const u=(e,t,n,r)=>{const c={"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some(e=>n.indexOf(e)>-1)&&Object(i.k)(o.d)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!l[e]||Object(i.k)(o.d)(t,n).length>0}}[e];return!!c&&c(r,t,n)},l={}},function(e,t,n){"use strict";n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return H}));var r=n(2),i=n(8);const c=(e,t)=>{switch(e.kind){case"bottom":return Object(r.a)();case"inner":return Object(r.e)(t(e.a));case"top":return Object(r.o)(e.error)}},a=e=>Object(i.b)((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return i.j.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")});var o=n(0),s=(n(4),n(1));var u=s.C;s.Mb;function l(e){return s.lb(e)?Object(o.o)(e):o.n}s.fb;s.Fb;var p=s.cb;s.ub;s.jc,s.ic,s.ec,s.i.map,s.j.mapWithIndex,s.c.ap,s.k.chain,s.d.extend,s.g.reduce,s.g.foldMap,s.g.reduceRight,s.l.traverse,s.a.alt,s.h.reduceWithIndex,s.h.foldMapWithIndex,s.h.reduceRightWithIndex,s.m.traverseWithIndex,s.o,s.p,s.q,s.s,s.v,s.w,s.I,s.L,s.W,s.rb,s.sb,s.Ab,s.Db,s.Bb,s.Cb,s.Wb,s.Lb,s.Xb;var d=u,_=function(e){return l(s.bb(e))},f=p;var g=n(7),h=n(3),m=n(18);function y(e,t){return Object(g.b)(e.map(t))}function v(e,t,n,r){const c=(e,t)=>{if(0===e.length)return Object(g.b)(t.map(e=>Object(o.o)({1:e[1],2:n(o.n,Object(o.o)(e[2]))})));if(0===t.length)return Object(g.b)(e.map(e=>Object(o.o)({1:e[1],2:n(Object(o.o)(e[2]),o.n)})));if(e.length>0&&t.length>0&&Object(i.f)(r)(e[0][1],t[0][1])){const[r,...i]=e,a=r[1],s=r[2];return d({1:a,2:n(Object(o.o)(s),o.n)},c(i,t))}if(e.length>0&&t.length>0&&Object(i.e)(r)(e[0][1],t[0][1])){const[r,...i]=t,a=r[1],s=r[2];return d({1:a,2:n(o.n,Object(o.o)(s))},c(e,i))}if(e.length>0&&t.length>0){const[r,...i]=e,[a,...s]=t,u=r[1],l=r[2],p=a[2];return d({1:u,2:n(Object(o.o)(l),Object(o.o)(p))},c(i,s))}throw new Error("Non exhaustive match in mapOption2")},a=Object(i.a)(e=>e[1])(r),s=(e=>{const t=y(e,e=>Object(o.l)(e[2])?Object(o.o)({1:e[1],2:e[2].value}):o.n);return 0===t.length?o.n:Object(o.o)(t)})(c(Object(g.m)(a)([...e].map(e=>({1:e[0],2:e[1]}))),Object(g.m)(a)([...t].map(e=>({1:e[0],2:e[1]})))));return Object(o.m)(e=>new Map(e.map(e=>[e[1],e[2]])))(s)}function b(e,t,n,r){const c=Object(i.a)(e=>e[0])(r),a=Object(g.m)(c)([...t]).reduceRight((e,t)=>{if(Object(h.m)(e)){const r=n(t[1],e.left);return Object(o.l)(r)?Object(h.o)(r.value):Object(h.r)(t[0])}return e},Object(h.o)(e));return Object(o.c)(a)}function w(e,t){return new Map([...e].map(t))}function O(e,t){return new Map([...e].filter(t))}var k=n(11),q=n(6);function j(e){return Object(o.m)(M)(function(e){switch(e.state.kind){case"top":return Object(o.o)(Object(r.m)(e.state.error));case"bottom":return o.n;case"inner":return function(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return E(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?Object(o.o)(Object(r.i)(function(e,t){const n=Object(o.m)(e=>d(e,t))(e);return Object(o.h)(()=>t)(n)}(Object(o.m)(e=>Object(r.m)(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}};return e.map(e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2])).join("")}(e)))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return Object(r.j)();case"top":return Object(r.m)(e.error);case"inner":return Object(r.k)(e.a)}};switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n=e.group,y([P,S,e=>Object(q.a)(e,x,r.l,o.o)],e=>e(n));case"numberGroup":return(e=>y([P,I,e=>Object(q.a)(e,x,e=>w(e,([e,t])=>[JSON.stringify(e),t]),r.l,o.o)],t=>t(e)))(e.group)}var n}(e.payload)))):o.n}(e.state.a)}}(e))}function E(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||Object(o.l)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||Object(o.l)(e.limit)}}function P(e){switch(e.kind){case"unbounded":return o.n;case"windowed":return Object(o.o)(Object(r.m)("w"));case"countLimit":return Object(o.o)(Object(r.m)(1===e.n?"x":"x"+e.n));case"uniqueLimit":return Object(o.o)(Object(r.m)(1===e.n?"u":"u"+e.n))}}function S(e){switch(e.kind){case"unbounded":return o.n;case"windowed":return Object(o.o)(Object(r.m)(Object(o.l)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return Object(o.o)(Object(r.m)(Object(o.l)(e.limit)?e.limit.value:""))}}function I(e){switch(e.kind){case"unbounded":return o.n;case"windowed":return Object(o.l)(e.key)?Object(o.o)(Object(r.k)(e.key.value)):Object(o.o)(Object(r.j)());case"countLimit":case"uniqueLimit":return Object(o.l)(e.limit)?Object(o.o)(Object(r.k)(e.limit.value)):Object(o.o)(Object(r.j)())}}function x(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function M(e){switch(e.kind){case"array":return 0===e.value.length?Object(r.j)():1===e.value.length?M(e.value[0]):Object(r.i)(e.value.map(M));case"object":return Object(q.a)(O(e.value,([e,t])=>"null"!==t.kind),e=>w(e,e=>[e[0],M(e[1])]),r.l);default:return e}}function T(e){const t=e=>{if(0===e.length)return Object(r.a)();const t=(e=>{if(4!==e.length)return o.n;const[t,n,r,i]=e;if("string"===t.kind&&"string"===n.kind&&"object"===i.kind){const e=Object(o.e)(e=>C(e[1].value)&&A(e[2].value))({1:t,2:n});return Object(o.m)(e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:i.value}))(e)}return o.n})(e);if(Object(o.l)(t)){const{prim:e,grp:n,cutoff:i,m:c}=t.value,a=D(i,c,R(n));return"string"==typeof a?Object(r.o)(a):Object(r.e)(Object(r.f)(L(e),a))}const n=(e=>{if(3!==e.length)return o.n;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=Object(o.e)(e=>A(e.value))(t);return Object(o.m)(e=>({grp:e.value,cutoff:n,m:r.value}))(e)}return o.n})(e);if(Object(o.l)(n)){const{grp:e,cutoff:t,m:i}=n.value,c=D(t,i,R(e));return"string"==typeof c?Object(r.o)(c):Object(r.e)(Object(r.f)(o.n,c))}const i=(e=>{if(2!==e.length)return o.n;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=Object(o.e)(e=>C(e.value))(t);return Object(o.m)(e=>({prim:e.value,m:n.value}))(e)}return o.n})(e);if(Object(o.l)(i)){const{prim:e,m:t}=i.value;return Object(r.e)(Object(r.f)(L(e),Object(r.n)(Object(r.q)(t))))}const c=(e=>{if(1!==e.length)return o.n;const[t]=e;return"object"===t.kind?Object(o.o)({m:t.value}):o.n})(e);if(Object(o.l)(c)){const{m:e}=c.value;return Object(r.e)(Object(r.f)(o.n,Object(r.n)(Object(r.q)(e))))}const a=(e=>{if(e.length<1)return o.n;const[t,...n]=e;if("string"===t.kind){const e=Object(o.e)(e=>C(e.value))(t);return Object(o.m)(e=>({prim:e.value,rest:n}))(e)}return o.n})(e);if(Object(o.l)(a)){const{prim:e,rest:t}=a.value;return Object(r.e)(Object(r.f)(L(e),N(t)))}return Object(r.e)(Object(r.f)(o.n,N(e)))},n=e=>{switch(e.kind){case"array":return Object(g.a)(n)(e.value);default:return[e]}};switch(e.kind){case"null":return Object(r.d)(Object(r.a)());default:return Object(r.d)(t(n(e)))}}function C(e){const t=e.split("");switch(!0){case 0===t.length:return!1;default:{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every(e=>-1!=="pmvn0123456789".indexOf(e))}}}function A(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map(e=>!isNaN(parseInt(e))).indexOf(!1)}}}function D(e,t,n){switch(e.kind){case"string":return Object(r.n)(n({1:Object(o.o)(e.value),2:t}));case"number":case"null":return Object(r.g)(n({1:"null"===e.kind?o.n:Object(o.o)(e.value),2:O(w(t,([e,t])=>[Number(e),t]),e=>!isNaN(e[0]))}));default:return"{bad cutoff}"}}function R(e){const t=e=>t=>Object(r.r)(t[2],t[1],e),n=e=>t=>Object(r.c)(t[2],t[1],e),i=e.split("");switch(!0){case"w"===i[0]&&void 0===i[1]:return e=>Object(r.s)(e[2],e[1]);case"u"===i[0]&&void 0===i[1]:return t(1);case"u"===i[0]&&void 0!==i[1]:return t(parseInt(i.slice(1).join("")));case"x"===i[0]&&void 0===i[1]:return n(1);case"x"===i[0]&&void 0!==i[1]:return n(parseInt(i.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function L(e){return Object(o.m)(r.h)(_(function e(t,n){const r=n(t);return Object(o.h)(()=>[])(Object(o.m)(t=>[t[1]].concat(e(t[2],n)))(r))}(e,e=>{const t=e.split("");if(0===t.length)return o.n;const[n,...r]=t,i=(e=>{switch(e){case"p":return Object(o.o)("add");case"m":return Object(o.o)("mul");case"v":return Object(o.o)("max");case"n":return Object(o.o)("min");default:return o.n}})(n);return Object(o.m)(e=>{const{init:t,rest:n}=Object(g.n)(e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t})(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}})(i)})))}function N(e){return Object(r.p)(e.map(U))}function U(e){switch(e.kind){case"number":return Object(r.e)(e.value);case"string":return Object(r.o)(e.value);case"null":return Object(r.a)();case"object":return Object(r.o)("{object}");case"array":return Object(r.o)("{array}")}}const B=Object(r.b)({strategy:(e,t,n)=>r=>{if(Object(o.k)(n))return t;if("delta"===e&&Object(o.k)(t))return o.n;if(Object(o.k)(t))return n;if(Object(o.l)(t)&&Object(o.l)(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,c,o,s)=>{const u=Object(g.j)(a(s));if("append"===e&&"add"===t)return Object(g.q)(n,c,G(o.plus));if("append"===e&&"mul"===t)return Object(g.q)(n,c,G(o.times));if("append"===e&&"max"===t)return Object(i.g)(u)(n,c);if("join"===e&&"add"===t)return Object(g.q)(n,c,G(Object(i.g)(s)));if("join"===e&&"mul"===t)return Object(g.q)(n,c,G(Object(i.g)(s)));if("join"===e&&"max"===t)return Object(i.g)(u)(n,c);if("min"===t)return B.operation(e,"max",n,c,o,function(e){return Object(i.b)((t,n)=>Object(m.a)(e.compare(t,n)))}(s));if("delta"===e&&"max"===t)return Object(i.e)(u)(n,c)?n:c.map(r.a);if("delta"===e)return Object(g.q)(n,c,(e,t)=>Object(i.e)(a(s))(e,t)?e:Object(r.a)());throw new Error("Non exhaustive match in combineCommand.operation")}}),K={plus:(e,t)=>e+t,times:(e,t)=>e*t};function W(e,t,n,c){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,a=t.group;return Object(o.h)(r.a)(Object(o.m)(e=>Object(r.e)(Object(r.q)(e)))(v(i,a,n,c)))}if("windowed"===e.kind&&"windowed"===t.kind){const a=e.key,s=e.group,u=t.key,l=t.group,p=Object(i.g)(Object(o.i)(c))(a,u);return Object(o.h)(r.a)(Object(o.m)(e=>Object(r.e)(Object(r.s)(e,p)))(v(s,l,n,c)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const a=e.n,s=t.n;if(a===s){const s=e.limit,u=e.group,l=t.limit,p=t.group,d=Object(i.g)(Object(o.i)(c))(s,l);return Object(o.h)(r.a)(Object(o.m)(e=>Object(r.e)(Object(r.c)(e,d,a)))(v(u,p,n,c)))}return Object(r.o)("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const a=e.n,s=t.n;if(a===s){const s=e.limit,u=e.group,l=t.limit,p=t.group,d=Object(i.g)(Object(o.i)(c))(s,l);return Object(o.h)(r.a)(Object(o.m)(e=>Object(r.e)(Object(r.r)(e,d,a)))(v(u,p,n,c)))}return Object(r.o)("Non matching counts")}return Object(r.o)("Non matching group types")}function z(e,t,n){return Object(o.h)(r.j)(function e(t,n){const a=n=>(r,i)=>B.strategy(t,r,i)(e(t,n)),s=(e,n,s)=>{if("stringGroup"===n.kind&&"stringGroup"===s.kind){const t=W(n.group,s.group,a(e),i.j);return c(t,e=>Object(r.n)($(e,i.j)))}if("numberGroup"===n.kind&&"numberGroup"===s.kind){const t=W(n.group,s.group,a(e),i.i);return c(t,e=>Object(r.g)($(e,i.i)))}if("tuple"===n.kind&&"tuple"===s.kind){const c=Object(o.l)(e)?e.value:[];return Object(r.e)(Object(r.p)(function(e,t,n,i,c,a){const o=(e,t)=>({1:Object(g.o)(e)(t).concat([...Array(Math.max(0,e-t.length))].map(r.a)),2:Object(g.d)(e)(t)}),s=(t,n,r)=>{if(0===t.length)return B.operation(e,"max",n,r,c,a);if(0===n.length)return r;if(0===r.length)return n;if(t.length>0){const[i,...u]=t,l=o(i[2],n),p=l[1],d=l[2],_=o(i[2],r),f=_[1],g=_[2];return B.operation(e,i[1],p,f,c,a).concat(s(u,d,g))}throw new Error("Non exhaustive match in recurse")};return Object(g.l)(Object(g.e)(e=>"bottom"===e.kind)(Object(g.l)(s(t,n,i))))}(t,c,n.tuple,s.tuple,K,i.i)))}throw new Error(`Non matching payload. Got ${n.kind} and ${s.kind}`)},u=(e,t)=>{if(Object(o.f)(f(Object(k.e)({1:k.d,2:k.c}))).equals(e.commands,t.commands)){const i=Object(o.k)(e.commands)?n:e.commands,a=s(i,e.payload,t.payload);return c(a,t=>Object(r.f)(e.commands,t))}throw new Error(`Non matching primitive strings. Got ${JSON.stringify(e)} and ${JSON.stringify(t)}`)};return(e,t)=>j(Object(r.d)(F(u,T(e).state,T(t).state)))}(e,o.n)(t,n))}function Q(e,t,n){const r=Object(o.m)(t=>O(e,([e,r])=>Object(i.c)(n)(e,t)))(t);return Object(o.h)(()=>e)(r)}function $(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return Object(o.k)(e.key)?e:Object(r.s)(Q(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,c=e.n,a=e.group,s=b(c,a,(e,t)=>t<=1?o.n:Object(o.o)(t-1),t),u=Object(i.g)(Object(o.i)(t))(n,s);return Object(r.c)(Q(a,u,t),u,c)}case"uniqueLimit":{const n=e.limit,c=e.n,a=e.group,s=(e,t)=>{switch(e.kind){case"object":{const n=[...e.value.keys(),...t.keys()],r=new Set(n);return r.size>=c?o.n:Object(o.o)(r)}default:return o.n}},u=b(new Set,a,s,t),l=Object(i.g)(Object(o.i)(t))(n,u);return Object(r.r)(Q(a,l,t),l,c)}}}function F(e,t,n){if("inner"===t.kind&&"inner"===n.kind)return e(t.a,n.a);if("bottom"===t.kind)return n;if("bottom"===n.kind)return t;if("top"===t.kind&&"top"===n.kind)return Object(r.o)(Object(i.g)(i.j)(t.error,n.error));if("top"===t.kind)return t;if("top"===n.kind)return n;throw new Error("Non exhaustive match in extend")}function G(e){return(t,n)=>F((t,n)=>Object(r.e)(e(t,n)),t,n)}function J(e,t){return z("join",e,t)}function H(e,t){return z("delta",e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(5);class i{track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}class c{constructor(e,t,n){this.sdkInitTimestamp=e,this._internals=t,this.permutive=n,this.sendFrequencyInSeconds=5,this.pendingMetrics=[],this.pendingTimers={},this.permutive.ready(()=>{window.setInterval(this.processPending.bind(this),1e3*this.sendFrequencyInSeconds),Object(r.n)(()=>{this.processPending.bind(this)},navigator.userAgent)}),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=performance.now();this.track({name:e,value:(n-this.sdkInitTimestamp)/1e3,labels:t})}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=performance.now();this.track({name:e,value:(r-n.startTime)/1e3,labels:n.labels}),delete this.pendingTimers[t]}}processPending(){this.pendingMetrics.length>0&&(this._internals.api.metrics({context:{environment:"web",events_count:this._internals.state.eventsCache.all().length,segments_count:this._internals.queryManager.userSegments.length},items:this.pendingMetrics}),this.pendingMetrics=[])}generateRandomKey(e){return`${e}-${[...Array(24)].map(()=>Math.random().toString(36)[2]).join("")}`}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r={concat:function(e,t){return 0!==e?e:t},empty:0};function i(e){switch(e){case-1:return 1;case 1:return-1;default:return 0}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));class r{}class i{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.replacementMap)}enrich(e){const t=[{},!0];for(let n=0;n<Object.keys(e[0]).length;n++){const r=Object.keys(e[0])[n],i=e[0][r];switch(!0){case"string"==typeof i&&"$"===i[0]:const[e,n]=this.isPropertyReplaceable(i);t[0][r]=e?n:i,t[1]=!!e&&t[1];break;case null!==i&&"object"==typeof i&&i.constructor===Object:const c=this.enrich([i,t[1]]);t[0][r]=c[0],t[1]=t[1]&&c[1];break;default:t[0][r]=i}}return t}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.config=e,this.clientErrorsSent=0}getEndpointUrl(e,t){return`${this.config.apiProtocol}://${this.config.apiHost}/${t||this.config.apiVersion}${e}`}req(e,t){const n=-1===e.url.indexOf("?")?"?":"&",r=`${e.url}${n}k=${this.config.apiKey}`,i=e.method||"GET",c=e.data?JSON.stringify(e.data):"",a=e.contentType?e.contentType:"application/json";if(t&&navigator.sendBeacon){if(navigator.sendBeacon(r,c))return e.success&&e.success(c),Promise.resolve();{const t="Failed to queue beacon";return e.error&&e.error(t),Promise.reject(t)}}return this.ajax({type:i,url:r,contentType:a,dataType:e.dataType?e.dataType:"json",data:c,timeout:this.config.requestTimeout,xhrFields:e.xhrFields}).then(t=>(e.success&&e.success(t),t),t=>{throw e.error&&e.error(t),new Error(t)})}ajax(e){return new Promise((t,n)=>{const r={},i=e.dataType?e.dataType:"json",c=new XMLHttpRequest;var a,o;if(e.contentType&&(a="Content-Type",o=e.contentType,r[a.toLowerCase()]=[a,o]),"binary"===e.dataType&&(c.responseType="arraybuffer"),c.onload=function(){const e=c.getResponseHeader("content-type");if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";n(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("application/octet-stream"===e){const e=this.responseText?JSON.parse(window.atob(this.responseText)):null;t(e)}else if("json"===i){const e=this.responseText?JSON.parse(this.responseText):null;t(e)}else t("text"===i?this.responseText:this.response)},c.onerror=()=>{this.error("Failed AJAX request"),n(new TypeError("Network request failed"))},c.ontimeout=()=>{this.error("AJAX request timed out"),n(new TypeError("Network request timed out"))},c.open(e.type?e.type:"GET",e.url,!0),e.timeout&&(c.timeout=e.timeout),e.xhrFields)for(const t in e.xhrFields)c[t]=e.xhrFields[t];Object.keys(r).forEach(e=>{const t=r[e];c.setRequestHeader(t[0],t[1])}),c.send(e.data?e.data:null)})}error(e,t){if(this.config.sendClientErrors){if(this.clientErrorsSent>3)return;this.clientErrorsSent+=1;const n={user_id:t||"",domain:window.location.hostname?window.location.hostname:"",url:window.location.href?window.location.href:"",referrer:document.referrer?document.referrer:"",user_agent:navigator.userAgent?navigator.userAgent:"",error_message:"",stack_trace:"",additional_details:""};e instanceof Error?(void 0!==e.message&&(n.error_message=e.message.toString()),void 0!==e.stack&&(n.stack_trace=e.stack.toString())):n.additional_details=e.toString(),this.req({url:this.getEndpointUrl("/internal/errors"),method:"POST",data:n,contentType:"text/plain",dataType:"text"},!1)}else window.console&&(window.console.error?window.console.error("[Permutive]",e):window.console.log&&window.console.log("[Permutive]",e))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15);class i{constructor(e,t){this.userId=e,this.aliases=t,this.resource="userIdentify",this.query=()=>{const e=this.aliases.map(({id:e,tag:t,priority:n})=>`{id: "${e}", tag: "${t}", priority: ${n}}`).join(",");return Object(r.b)("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",this.aliases.map(e=>e.id),window.location.hostname,this.userId)?"":`\n      userIdentify: user(user_id: "${this.userId}") {\n        identity(aliases: [${e}]) {\n          identify {\n            id\n          }\n        }\n      }\n    `}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5);const i={default:{environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",apiVersion:"v2.0",apiProtocol:"https",loggingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+function(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if((null==n?void 0:n.length)>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return(null==t?void 0:t.length)>0?t[0]:(null==r?void 0:r.length)>0?"localhost":""}(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setFullYear(e.getFullYear()+3),e.toUTCString()}(),permutiveDataKey:"permutive-data",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"7c6db7ee-7cf2-4f9a-853a-78875d37e2bb.partner.permutive.app",consentRequired:!1},production:{},development:{apiProtocol:"http",loggingEnabled:!0,sendClientErrors:!1}};const c=e=>Object(r.k)(i.default,i[e.environment]||{},e)},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t,n,i){try{try{var c;try{c=new window.Blob([e])}catch(t){(c=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),c=c.getBlob()}var a=r.createObjectURL(c),o=new window[t](a,n);return r.revokeObjectURL(a),o}catch(r){return new window[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new window[t](i,n)}}},function(e,t,n){"use strict";var r=0;function i(e,t){var n=t.data;if(Array.isArray(n)&&!(n.length<2)){var r=n[0],i=n[1],c=n[2],a=e._callbacks[r];a&&(delete e._callbacks[r],a(i,c))}}function c(e){var t=this;t._worker=e,t._callbacks={},e.addEventListener("message",(function(e){i(t,e)}))}c.prototype.postMessage=function(e){var t=this,n=r++,c=[n,e];return new Promise((function(e,r){if(t._callbacks[n]=function(t,n){if(t)return r(new Error(t.message));e(n)},void 0!==t._worker.controller){var a=new MessageChannel;a.port1.onmessage=function(e){i(t,e)},t._worker.controller.postMessage(c,[a.port2])}else t._worker.postMessage(c)}))},e.exports=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),i=n(6),c=n(16),a=n(14),o=n(2),s=n(5),u=n(13),l=n(4);class p{constructor(e){this._internals=e,this.fetchedUnseenState=!1,this.stateOffset=this._internals.state.getPermutiveData("state_offset")||0,this.lastSentStateMap=Object(u.f)(this._internals.state.getPermutiveData("internal_query_states")||{})}sync(e,t=this._internals.queryManager.stateMap.value,n=this.stateOffset,s=!this.fetchedUnseenState){const l=Object(i.a)(Object(u.f)(t),a.a,Object(r.j)(e=>Object(o.l)(new Map))),p=Object(i.a)(Object(a.a)(this.lastSentStateMap),Object(r.j)(e=>Object(o.l)(new Map))),d=Object(i.a)(Object(c.a)(l,p),e=>Object(a.b)(e))||{};return s||Object.keys(d).length>0?(()=>this._internals.api.state(d,n,e,s).then(e=>this.isStateResponse(e)?this.handleStateResponse(e):{},e=>(this._internals.network.error(e,this._internals.state.userId),{})).then(e=>(this.fetchedUnseenState=!0,this.lastSentStateMap=Object(u.f)(this._internals.queryManager.stateMap.value),e)))():Promise.resolve({})}resetSync(){return Promise.all([this.sync(!1,{},0,!0),this._internals.thirdParty.segments(),this._internals.models.getModels()]).then(([e,t,n])=>this._internals.queryManager.bootstrap([]).then(e=>this._internals.queryManager.updateEnvironment({segments:Object(s.k)({"1p":this._internals.queryManager.userSegmentsMap},t),lookalikeModels:n})))}reset(){this.lastSentStateMap={}}handleStateResponse(e){const t=Object(r.t)(()=>JSON.parse(e.state),e=>this._internals.network.error("Failed to parse State API response, got "+e,this._internals.state.userId)),n=e=>e?this._internals.queryManager.updateExternalState(e):Object(l.c)();return Object(r.n)(t)?Object(i.a)(e.state_offset,e=>this.stateOffset=e,e=>this._internals.state.setPermutiveData("state_offset",e),e=>n(t.right),e=>t.right):{}}isStateResponse(e){return!!e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.userId=e,this.resource="outOfSdkUserEvents",this.query=()=>`\n    outOfSdkUserEvents: user(user_id: "${this.userId}") {\n      out_of_sdk_events {\n          id\n          name\n          time\n          session_id\n          view_id\n          properties\n        }\n      }\n    `}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function i(e,t,n){return function(r){for(var c=Array(n.length+1),a=0;a<n.length;a++)c[a]=n[a];return c[n.length]=r,0===t?e.apply(null,c):i(e,t-1,c)}}var c={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function a(e){return c.hasOwnProperty(e)||(c[e]=i(r.g,e-1,[])),c[e]}function o(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=a(r),c=e.map(t[0],i),o=1;o<r;o++)c=e.ap(c,t[o]);return c}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));class r{constructor(e,t,n,r,i,c,a){this.permutive=e,this._internals=t,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=c,this.workspaceLevelConfig=a}activateEveryTime(){return"EveryTime"===this.triggerType}activateOnEntry(){return"OnEntry"===this.triggerType}activateOnExit(){return"OnExit"===this.triggerType}trackImpression(e){const t={reaction_id:this.id,type:"impression"};this.permutive.track("Reaction",t,e),this._internals.log("impression: ",t)}trackConversion(e){const t={reaction_id:this.id,type:"conversion"};this.permutive.track("Reaction",t,e),this._internals.log("conversion: ",t)}}class i{constructor(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.addons={overlays:{workspaces:[{activations:[]}],auto_init:!0,activationConfigs:[]},web:{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{workspaces:[{activations:[]}],auto_init:!0,activationConfigs:[]},dfp:{workspaces:[{activations:[],networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1}],auto_init:!0,networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1,activationConfigs:[]}},this.optimisedActivationsConfig={dfp:{dfp:[47082,47083,50438,52396,52397,52398,50432,38322,26385,26377,25141,25010,25009,25007,25005,25004,25003,25002,25e3,24998,24997,24996,24995,24994,24040,50442,50443,47749,47750,50444,47751,47752,47864,47753,47865,50445,47755,47651,47652,47654,47281,47282,47292,46461,51619,47862,51645,49050,46274,49048,49052,47174,48309,52461,52464,50635,52465,52466,50692,47917,47918,47919,47920,47921,47924,47922,50702,47923,52483,47925,47926,47929,47930,47933,47932,47931,47934,49089,47935,47936,52388,47937,47938,47939,50712,52096,50713,52097],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(this.addons[e]?this.addons[e].activationConfigs:[]).filter(e=>this.areContextCriteriaSatisfied(e)).map(e=>new r(this.permutive,this._internals,e.id,e.segment_code,e.trigger_type,e.config,e.workspaceLevelConfig))}areContextCriteriaSatisfied(e){const t=e.context_criteria,n=e=>{const t=this.context[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}var c=n(12),a=n(3),o=n(0),s=n(9),u=n(6);class l{constructor(e){this._internals=e}put(e,t){return Object(u.a)(this._internals.getNamespacedStorageKey(String(t)),t=>window.localStorage.setItem(t,JSON.stringify(e)),e=>Promise.resolve(t))}get(e){return Object(u.a)(this._internals.getNamespacedStorageKey(String(e)),e=>JSON.parse(window.localStorage.getItem(e)),e=>Promise.resolve(e))}delete(e){return Object(u.a)(this._internals.getNamespacedStorageKey(String(e)),e=>Promise.resolve(window.localStorage.removeItem(e)))}deleteStore(){return Promise.resolve()}migrateIfRequired(){return Promise.resolve()}}let p,d;const _=new WeakMap,f=new WeakMap,g=new WeakMap,h=new WeakMap,m=new WeakMap;let y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return f.get(e);if("objectStoreNames"===t)return e.objectStoreNames||g.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function v(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(d||(d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(O(this),t),w(_.get(this))}:function(...t){return w(e.apply(O(this),t))}:function(t,...n){const r=e.call(O(this),t,...n);return g.set(r,t.sort?t.sort():[t]),w(r)}}function b(e){return"function"==typeof e?v(e):(e instanceof IDBTransaction&&function(e){if(f.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",c),e.removeEventListener("abort",c)},i=()=>{t(),r()},c=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",c),e.addEventListener("abort",c)});f.set(e,t)}(e),t=e,(p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,y):e);var t}function w(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",c)},i=()=>{t(w(e.result)),r()},c=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",c)});return t.then(t=>{t instanceof IDBCursor&&_.set(t,e)}).catch(()=>{}),m.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=b(e);return t!==e&&(h.set(e,t),m.set(t,e)),t}const O=e=>m.get(e);function k(e,t,{blocked:n,upgrade:r,blocking:i,terminated:c}={}){const a=indexedDB.open(e,t),o=w(a);return r&&a.addEventListener("upgradeneeded",e=>{r(w(a.result),e.oldVersion,e.newVersion,w(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(e=>{c&&e.addEventListener("close",()=>c()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}const q=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],E=new Map;function P(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(E.get(t))return E.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=j.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!q.includes(n))return;const c=async function(e,...t){const c=this.transaction(e,i?"readwrite":"readonly");let a=c.store;r&&(a=a.index(t.shift()));const o=await a[n](...t);return i&&await c.done,o};return E.set(t,c),c}y=(e=>({...e,get:(t,n,r)=>P(t,n)||e.get(t,n,r),has:(t,n)=>!!P(t,n)||e.has(t,n)}))(y);var S=n(7),I=n(5),x=n(4);class M{constructor(e,t,n,r,i,c){this._internals=e,this.cryptoAlg=t,this.idb=n,this.mainObjectStore=r,this.keyObjectStore=i,this.keyObjectKey=c,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.cryptoKey=this.getOrGenerateKey()}static initialise(e,t,n,r,i,c,o){const u=["development"===e.config.environment?window.isSecureContext:"https:"===window.location.protocol,!(Object(I.g)(navigator.userAgent)&&["f036e56c-2514-4246-bf83-1659326fe3f8"].indexOf("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb")>-1)].every(e=>!0===e),l=(e,t,n)=>t.includes(n)?Object(x.c)():e.createObjectStore(n),p=u?Object(a.t)(()=>k(n,o,{upgrade:e=>{const t=[...e.objectStoreNames];l(e,t,r),l(e,t,i)}}),e=>String(e)):Object(a.o)("Connection not attempted. Default to localStorage");return Object(a.f)(e=>Object(s.e)(e),n=>Object(s.h)(()=>n.then(n=>new M(e,t,n,r,i,c)),e=>String(e)))(p)}put(e,t){return this.cryptoKey.then(n=>Object(u.a)(JSON.stringify(e),e=>new Promise((r,i)=>{this.cryptoAlg.encrypt(n,e).then(e=>Object(u.a)(this._internals.getNamespacedStorageKey(String(t)),n=>this.resetIfRequired(this.puts++).then(i=>this.idb.put(this.mainObjectStore,e,n).then(e=>r(t)))),e=>i(e))})))}get(e){return this.cryptoKey.then(t=>Object(u.a)(this._internals.getNamespacedStorageKey(String(e)),e=>this.idb.get(this.mainObjectStore,e).then(e=>e?this.cryptoAlg.decrypt(t,e):null).then(JSON.parse)))}delete(e){return Object(u.a)(this._internals.getNamespacedStorageKey(String(e)),e=>this.idb.delete(this.mainObjectStore,e))}migrateIfRequired(){const e=Object(u.a)(this._internals.getExternalData(A),e=>e?Object(s.g)(JSON.parse(e)):Object(s.e)(null)),t=Object(s.h)(()=>this.idb.get("events","permutive-events-cache"),e=>{});return Promise.all([e(),t()]).then(e=>e.filter(a.n).map(e=>e.right).filter(e=>e)).then(S.h).then(e=>Object(u.a)(e,e=>e.forEach(e=>this._internals.state.eventsCache.add(Object(c.a)(e),{persistOnDisk:!1})),e=>this._internals.removeExternalData(A))).then(e=>-1!==[...this.idb.objectStoreNames].indexOf("events")?this.idb.delete("events","permutive-events-cache"):Promise.resolve())}deleteStore(){return Promise.resolve(this.idb.close()).then(e=>function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),w(n).then(()=>{})}(this.idb.name))}getOrGenerateKey(){return Object(u.a)(this._internals.getNamespacedStorageKey(this.keyObjectKey),e=>this.idb.get(this.keyObjectStore,e).then(e=>e||this.storeGivenOrGeneratedKey()))}storeGivenOrGeneratedKey(e){return(e||this.cryptoAlg.generateKey(!1)).then(e=>Object(u.a)(this._internals.getNamespacedStorageKey(this.keyObjectKey),t=>this.idb.put(this.keyObjectStore,e,t),t=>e),e=>Promise.reject(e))}resetIfRequired(e){const t=this.idb.name,n=this.idb.version;return Object(I.g)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.deleteStore().then(e=>k(t,n,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}})).then(e=>{this.idb=e,this.storeGivenOrGeneratedKey(this.cryptoKey)}):Promise.resolve()}}class T{constructor(e,t,n,r,i,c){this._internals=e,this.cryptoAlg=t,this.dbName=n,this.mainObjectStore=r,this.keyObjectStore=i,this.keyObjectKey=c,this.version=3,this.db=M.initialise(this._internals,this.cryptoAlg,this.dbName,this.mainObjectStore,this.keyObjectStore,this.keyObjectKey,this.version)().then(Object(a.j)(e=>new l(this._internals)))}put(e,t){return Object(s.h)(()=>this.db.then(n=>n.put(e,t)),e=>String(e))}get(e){return Object(s.h)(()=>this.db.then(t=>t.get(e)).then(o.d),e=>String(e))}delete(e){return Object(s.h)(()=>this.db.then(t=>t.delete(e)),e=>String(e))}deleteStore(){return Object(s.h)(()=>this.db.then(e=>e.deleteStore()),e=>String(e))}migrateIfRequired(){return Object(s.h)(()=>this.db.then(e=>e.migrateIfRequired()),e=>String(e))}}class C{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then(e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer})}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]}_decrypt(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}const A="permutive-events-cache";class D{constructor(e,t){this.state=e,this._internals=t,this.EVENTS_CACHE_OBJECT_STORE="events",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="events",this.eventPutQueue=Promise.resolve(),this.eventsCache=[],this.eventCacheSizeInBytes=0,this.eventStore=new T(this._internals,new C,"7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",`${this.EVENTS_CACHE_OBJECT_STORE}_${this.state.userId}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${this.state.userId}`,this.CRYPTO_KEY_OBJECT_KEY)}all(){return this.eventsCache}add(e,t){const{persistOnDisk:n}=t;return Object(u.a)(this.eventsCache.push(e),e=>n?this.flush():Object(x.c)(),t=>e)}loadFromDisk(){const e=[];return this.eventStore.migrateIfRequired()().then(Object(a.f)(t=>(this._internals.network.error("Failed to migrate events cache. Got "+JSON.stringify(t)),this.reset().then(t=>e)),()=>{const t=this._internals.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{});return this.eventStore.get(A)().then(n=>{this._internals.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",t);const r=Object(o.b)(()=>Promise.resolve(e),e=>Object(u.a)(this.eventCacheSizeInBytes=2*JSON.stringify(e).length,t=>{this._internals.metrics.track({name:"sdk_events_cache_byte_total",value:this.eventCacheSizeInBytes,labels:{}}),this._internals.metrics.track({name:"sdk_events_cache_size_total",value:e.length,labels:{}})},t=>e.map(e=>this.deserializeAndAdd(e,{persistOnDisk:!1})),e=>Promise.resolve(e)));return Object(a.f)(t=>(this._internals.network.error("Error fetching data from store. Got "+t),this.reset().then(t=>e)),r)(n)})}))}processUnseenEvents(e){this._internals.log("Got out-of-SDK events from the API",e);const t=Object(u.a)(e,e=>e.map(e=>this.deserializeAndAdd(e,{persistOnDisk:!1}))),n=t.length>0?this.flush.bind(this):x.c;return Object(u.a)(n(),e=>t)}reset(){return this._internals.log("Resetting Events Cache"),this.eventsCache=[],this.eventCacheSizeInBytes=0,this.eventStore.deleteStore()().then(()=>(this.eventStore=new T(this._internals,new C,"7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",`${this.EVENTS_CACHE_OBJECT_STORE}_${this.state.userId}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${this.state.userId}`,this.CRYPTO_KEY_OBJECT_KEY),this.flush()))}flush(){let e=JSON.stringify(this.eventsCache),t=1;for(;e.length>this._internals.config.eventsCacheLimitBytes/2;)this.eventsCache.splice(0,t),t*=2,e=JSON.stringify(this.eventsCache);this._internals.log("Writing cache (#e)",this.eventsCache.length),this.eventCacheSizeInBytes=2*e.length,this.eventPutQueue=this.eventPutQueue.then(e=>this.eventStore.put(this.eventsCache.map(c.e),A)().then(x.c))}deserializeAndAdd(e,t){const{persistOnDisk:n}=t;return Object(u.a)(e,c.a,e=>this.add(e,{persistOnDisk:n}))}getStateSizeInBytes(){return this.eventCacheSizeInBytes}}class R{constructor(e){this._internals=e,this.queue=[],this.nextNotify=null,e.messages.on("permutive:taskQueue:update",()=>{this.execute()})}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this._internals.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];if(i.complete)n+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute(()=>{this.notify()}))}}this.queue.splice(0,n)}size(){return this.queue.length}}class L{constructor(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.taskQueue=new R(this._internals);const r=this._internals.getNamespacedStorageKey(e.config.permutiveDataKey),c=localStorage.getItem(r);this.permutiveDataByteSize=null===c?0:2*c.length,this.permutiveData=null===c?{}:JSON.parse(c);const a=Object(o.h)(()=>Object(o.h)(I.o)(this.getUserIdFromLocalStorage()))(this.getUserIdFromCookie());this.setUserId(a),this.viewId=Object(I.o)(),this.context.view_id=this.viewId,this.eventSourceId=this.getPermutiveData("event-source-id")||this.generateAndStoreEventSourceId(),this.eventsCache=new D(this,this._internals),this.activationManager=new i(this._internals,this.permutive,this.context)}setUserId(e){this._internals.setCookie(this._internals.config.cookieName,e,!0),this._internals.setExternalData(this._internals.config.cookieName,e),this.userId=e}getPermutiveData(e){return this.permutiveData[e]}setPermutiveData(e,t){this.permutiveData[e]=t;const n=this._internals.getNamespacedStorageKey(this._internals.config.permutiveDataKey),r=JSON.stringify(this.permutiveData);this.permutiveDataByteSize=2*r.length,this._internals.makeSafe(()=>{localStorage.setItem(n,r)})()}getClient(){let e="";return e=document.title?document.title:"",{type:"web",user_agent:navigator.userAgent||"",url:window.location.href||"",domain:window.location.hostname||"",title:e,referrer:document.referrer||""}}getStateSizeInBytes(){return this.permutiveDataByteSize+this.eventsCache.getStateSizeInBytes()}reset(){return this._internals.log("Resetting State"),Promise.resolve(Object(u.a)(this._internals.deleteCookie(this._internals.config.cookieName),e=>this._internals.removeExternalData(this._internals.config.cookieName),e=>this._internals.queryManager.reset(),e=>this.permutiveData={},e=>this.permutiveDataByteSize=0,e=>localStorage.removeItem(this._internals.config.permutiveDataKey)))}generateAndStoreEventSourceId(){const e=Object(I.o)();return this.setPermutiveData("event-source-id",e),e}getUserIdFromStorageIfValid(e){const t=Object(o.e)(I.h);return Object(u.a)("cookie"===e?this._internals.getCookie(this._internals.config.cookieName):this._internals.getExternalData(this._internals.config.cookieName),o.d,Object(o.a)(t))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(5);class i{constructor(e,t){this._internals=e,(t=t||{}).timeout_seconds=t.timeout_seconds||1800,t.session_data_key=t.session_data_key||"permutive-session",this.options=t,this.session_id=null,this.initialize()}getSessionId(){return this.session_id}newSession(e){return{session_id:Object(r.o)(),last_updated:e}}initialize(){const e=new Date,t=this._internals.getCookie(this.options.session_data_key);let n=this.decodeSessionData(t);if(null===n)n=this.newSession(e);else{const t=this.options.timeout_seconds;e>new Date(n.last_updated.getTime()+1e3*t)?n=this.newSession(e):n.last_updated=e}this.persistSessionData(n),this.session_id=n.session_id}decodeSessionData(e){let t=null;try{t=JSON.parse(e)}catch(e){return null}return null!==t&&"object"==typeof t&&t.hasOwnProperty("session_id")&&t.hasOwnProperty("last_updated")&&(t.last_updated=new Date(t.last_updated),!isNaN(t.last_updated.getTime()))?t:null}persistSessionData(e){e.last_updated=e.last_updated.toISOString(),this._internals.setCookie(this.options.session_data_key,JSON.stringify(e))}}const c={success:e=>{},error:(e,t)=>{}};class a{constructor(e){this._internals=e}graphql(e,t=c){return this._internals.network.req({url:`${this._internals.config.apiProtocol}://${this._internals.config.apiHost}/graphql`,method:"POST",success:t.success,error:t.error,data:{query:e},contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)}identify(e,t=c){const n=this._internals.identities.aliasMapToPrioritizedList(this._internals.identities.aliases);return this._internals.network.req({url:this._internals.network.getEndpointUrl("/identify"),method:"POST",data:{user_id:this._internals.state.userId,aliases:n.concat(e.map(e=>Object.assign(Object.assign({},e),{priority:0})))},success:t.success,error:t.error,contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)}metrics(e,t=c){return this._internals.network.req({url:this._internals.network.getEndpointUrl("/internal/metrics"),method:"POST",data:e,contentType:"text/plain",dataType:"text",success:t.success,error:t.error},!1)}track(e,t,n){return this._internals.network.req({url:[""+this._internals.network.getEndpointUrl((Array.isArray(e)?"/batch":"")+"/events"),"?enrich="+!!t.includeResponseBody,"&sdkp="+!n].join(""),method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},n)}tpdUsage(e,t=c){return this._internals.network.req({url:this._internals.network.getEndpointUrl("/tpd/usage"),method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},!1)}reset(){return this._internals.network.req({url:this._internals.network.getEndpointUrl("/reset"),method:"POST",xhrFields:{withCredentials:!0},contentType:"text/plain"},!1)}segmentSync(e,t){return this._internals.network.ajax({url:`https://${this._internals.config.segmentSyncApiHost}/sync/${e}`,type:"POST",data:"value="+encodeURIComponent(t),contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0}})}models(e){const t="binary"===e?"bin":"json";return this._internals.network.ajax({url:`https://${this._internals.config.cdnBaseUrl}/models/7c6db7ee-7cf2-4f9a-853a-78875d37e2bb-models.${t}`,dataType:e})}state(e,t,n,r,i=!1){return this._internals.network.req({url:`${this._internals.network.getEndpointUrl(""+(i?"/state/legacy":"/state"),"v1.0")}?fetch_unseen=${r}`,method:"POST",data:{group_id:this._internals.state.userId,event_source_id:this._internals.state.eventSourceId,state:JSON.stringify(e),last_seen_offset:t},contentType:"text/plain"},n)}migrateOutOfSDKEvents(e,t,n=c){return this._internals.network.req({url:`${this._internals.network.getEndpointUrl("/out-of-sdk-events/delete")}?user_id=${e}`,method:"POST",data:t,success:n.success,error:n.error,contentType:"text/plain"},!1)}inferDemographicSegments(e,t=c){return this._internals.network.req({url:""+this._internals.network.getEndpointUrl("/demographic/infer"),method:"POST",contentType:"text/plain",data:e,success:t.success,error:t.error},!1)}}class o{constructor(){this.promises={}}addPromise(e,t,n,r){e in this.promises||(this.promises[e]={}),this.promises[e][t]=r,window.setTimeout(()=>{this.resolvePromise(e,t)},n)}createPromise(e,t,n){this.addPromise(e,t,n,Object(r.b)())}getPromise(e,t){return Object(r.i)(this.promises,e,t)}resolvePromise(e,t){const n=this.getPromise(e,t);return void 0!==n?(n.resolve(),n):void 0}getPromisesByCategory(e){const t=Object(r.i)(this.promises,e)||{};return Object.keys(t).map(e=>t[e])}}var s=n(19);class u{constructor(e){this._internals=e,this.queries={},this.promises={}}register(e){const t=Object(r.b)();return this.queries[e.resource]=e.query(),this.promises[e.resource]=t,t.promise}run(){if(0===Object.keys(this.queries).length)return Promise.resolve();const e=Object(r.b)();return this._internals.api.graphql(this.toQueryString(this.queries),{success:t=>{Object.keys(this.promises).forEach(e=>{const n=t.data[e];n?this.promises[e].resolve(n):this.promises[e].reject("Could not find a graphql response for resource "+e)}),e.resolve()},error:t=>{console.error(t),Object.keys(this.promises).forEach(e=>this.promises[e].reject()),e.reject()}}),e.promise}toQueryString(e){return`{ ${Object.keys(e).map(t=>e[t]).join(" ")} }`}}class l{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),this.listeners.forEach(n=>{this.handle(e,t,n)})}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),c=r||i;if(c)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}c&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}function p(e){var t={},n=[];(e=e||this).on=function(n,r,i){return(t[n]=t[n]||[]).push([r,i]),e},e.off=function(r,i){r||(t={});for(var c=t[r]||n,a=c.length=i?c.length:0;a--;)i==c[a][0]&&c.splice(a,1);return e},e.once=function(t,r){var i=n.slice.call(arguments,2),c=function(){r(i),e.off(t,c)};return e.on(t,c),e},e.emit=function(r){for(var i,c=t[r]||n,a=c.length>0?c.slice(0,c.length):c,o=0;i=a[o++];)i[0].apply(i[1],n.slice.call(arguments,1));return e}}var d=n(12);class _{constructor(e){this._internals=e,this.timeoutDuration=500,this.maxWaitTime=5e3,this.requests=[],setInterval(()=>{this.requests.length>0&&this.flush()},this.maxWaitTime),Object(r.n)(()=>{this.requests.length>0&&this.flush(!0)},navigator.userAgent)}add(e,t,n){this.resetTimeout(),this.requests.push([e,t,n])}flush(e=!1){const t=[...this.requests];e||this.trackMetrics(t),this._internals.stateSync.sync(e),this._internals.api.track(t.map(e=>e[0]),{},e).then(e=>this.isBatchResponse(e)?this.handleBatchResponse(e,t):null,e=>this._internals.network.error(e)).catch(e=>this._internals.network.error(e)),this.requests=[]}handleBatchResponse(e,t){e.map(e=>e.body).forEach((e,n)=>{const r=t.map(e=>e[0])[n],i=t[n][1],c=t[n][2];Object(d.c)(e)?this.handleTrackError(e,r,i.error):this.handleTrackResponse(e,r,i.success,c)})}handleTrackResponse(e,t,n,r){const i=Object(d.b)(e,t);n(i),"never"!==r&&(this._internals.state.eventsCache.add(i,{persistOnDisk:!0}),this._internals.eventHandler.newEvent(Object(d.e)(i),null))}handleTrackError(e,t,n){const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};n(e.error.message),this._internals.eventHandler.newEvent(r,e),console.error(e)}setTimeout(e){return window.setTimeout(()=>this.flush(),e)}resetTimeout(){clearTimeout(this.timeout),this.timeout=this.setTimeout(this.timeoutDuration)}trackMetrics(e){this._internals.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this._internals.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e.map(e=>e[0])).length,labels:{}})}isBatchResponse(e){return!!e}}class f{constructor(e,t,n=[],r={},c=new l,d=new o,f=new p,g=new s.a){this.config=e,this.network=t,this.blockers=n,this.addons=r,this.eventHandler=c,this.promises=d,this.messages=f,this.enrichers=g,this.isReady=!1,this.isRealtime=!1,this.listenForBlockers=!0,this.sessionManager=new i(this),this.eventsBatch=new _(this),this.api=new a(this),this.graphql=new u(this),this.models={getModels:()=>Promise.resolve({})}}makeSafe(e){return(...t)=>{try{return e(...t)}catch(e){this.network.error(e,this.state.userId)}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}log(...e){this.config.loggingEnabled&&window.console&&window.console.log&&(e.splice(0,0,"[Permutive]"),console.log(...e))}setAsReady(){this.isReady=!0,this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v13.0.0-RC.31"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}})),this.messages.emit("permutive:ready")}setAsRealtime(){this.isRealtime=!0,this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{})}addBlocker(e){this.blockers.push(e),this.log("<blockers> added blocker "+e),this.messages.on(e,()=>{if(this.listenForBlockers){const t=this.blockers.indexOf(e);t>=0&&(this.blockers.splice(t,1),this.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.log("<blockers> complete"))}})}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}setCookie(e,t,n=!1){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain))return!1;const r=this.getNamespacedStorageKey(e);document.cookie=[encodeURIComponent(r),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("")}getCookie(e,t=!1){const n=t?e:this.getNamespacedStorageKey(e),r=new RegExp(encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}getExternalData(e){const t=this.getNamespacedStorageKey(e);return localStorage.getItem(t)}setExternalData(e,t){const n=this.getNamespacedStorageKey(e);this.makeSafe(()=>{localStorage.setItem(n,t)})()}removeExternalData(e){const t=this.getNamespacedStorageKey(e);localStorage.removeItem(t)}arraysEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(5),i=n(15);class c{constructor(e,t={}){this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.description=t.description||"",this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task(()=>{this.complete=!0,e()})}}var a=n(12),o=n(6),s=n(0);const u=(e,t)=>new Promise(n=>{e(t,2,e=>{n(e)})}),l={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,lotame:95};var p=n(4);class d{constructor(e,t,n){this._internals=e,this.network=t,this.context=n,this.initialisedAddons=[]}identify(e){this._internals.log("<call> identify",e);const t=this._internals.identities.getAliasesFromIdentifyArg(e),n=Object(r.b)(),a=t.map(e=>e.id).concat(Object.entries(this._internals.identities.aliases).map(e=>e[1]));if("string"==typeof e&&Object(i.b)("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",a,window.location.hostname,this._internals.state.userId))return n.resolve(),n.promise;return this._internals.state.taskQueue.add(new c(e=>{this._internals.log("<task> identify ",t);const r=this._internals.state.userId;this._internals.api.identify(t).then(i=>i.user_id===r?Object(o.a)(this._internals.log("<done> identify ",t),t=>e(),e=>n.resolve()):this._internals.state.reset().then(e=>Object(o.a)(this._internals.state.setUserId(i.user_id),e=>this._internals.state.eventsCache.reset(),e=>this._internals.stateSync.resetSync())).then(r=>{this._internals.log("<done> identify",t),e(),n.resolve()})).then(e=>t.forEach(e=>this._internals.identities.setAlias(e.id,e.tag)))},{wait_prev:!0,block_next:!0})),n.promise}on(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!1})}once(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!0})}track(...e){const[t,n,i]=[e[0],e[1]||{},e[2]||{}];this._internals.log("<call> track",t);const o=Object(r.b)();if(!this._internals.api)return this.network.error("The API hasn't been loaded."),o.reject(),o.promise;const s=!!i.isAnalyticsOnly,u=this._internals.sessionManager.getSessionId(),l=this._internals.state.viewId,p={success:i.success||(e=>{}),error:i.error||((e,t)=>{})};return this._internals.state.taskQueue.add(new c(e=>{this._internals.log("<task> track",t);const c=s?null:this._internals.metrics.startTimer("sdk_events_api_roundtrip_seconds",{}),d=s?null:this._internals.metrics.startTimer("sdk_events_overall_processing_seconds",{}),[_,f]=this._internals.enrichers.enrich([n,!0]);this._internals.metrics.track({name:f?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const g=Object.assign(Object.assign({},_),{client:this._internals.state.getClient()}),h=function(e,t){return e.isMemoryOnly?"memoryOnly":e.useBeacon?"deferred":e.isAnalyticsOnly?"never":t?"immediate":"onResponse"}(i,f),m={user_id:this._internals.state.userId,name:t,segments:this._internals.queryManager.userSegments,properties:g,session_id:u,view_id:l},y={name:t,properties:g,session_id:u,view_id:l,time:new Date},v=e=>{const t=this._internals.metrics.startTimer("sdk_events_querylanguage_seconds",{});return this._internals.queryManager.process([e]).then(()=>{this._internals.metrics.stopTimer("sdk_events_querylanguage_seconds",t),this._internals.metrics.stopTimer("sdk_events_overall_processing_seconds",d)})},b=e=>(this._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",c),Object(a.c)(e)?w(e):O(e)),w=e=>{this._internals.log("Tracking failed with reason",e);const t={name:m.name,session_id:m.session_id,view_id:m.view_id,properties:m.properties,id:null,time:new Date};return Promise.resolve({event:t,error:e})},O=e=>{const t=Object(a.d)(e)?Object(a.a)(Object.assign(Object.assign({},e),{session_id:m.session_id,view_id:m.view_id})):Object(a.b)(e,m);return Promise.resolve({event:t,error:null})},k=e=>Promise.resolve(e.error?p.error(e.error.error.message):p.success(e.event)),q=e=>(e.error||this._internals.state.eventsCache.add(e.event,{persistOnDisk:!0}),Promise.resolve(e)),j=e=>(this._internals.eventHandler.newEvent(Object(a.e)(e.event),e.error),Promise.resolve(e.event));let E;switch(h){case"immediate":E=Object(r.e)(([e,t])=>Promise.all([v(e),this._internals.eventsBatch.add(t,p,h),Promise.resolve(e)]),([e,t,n])=>Promise.resolve(n));break;case"memoryOnly":E=([e,t])=>v(e).then(t=>e);break;case"onResponse":E=Object(r.e)(([e,t])=>this._internals.api.track(t,{includeResponseBody:!0},!1),e=>b(e),e=>Promise.all([k(e),q(e),v(e.event),j(e)]),([e,t,n,r])=>Promise.resolve(r));break;case"deferred":E=Object(r.e)(([e,t])=>Promise.all([this._internals.api.track(t,{includeResponseBody:!f},!0),Promise.resolve(e)]),([e,t])=>j({event:t,error:null}));break;case"never":E=([e,t])=>(this._internals.eventsBatch.add(t,p,h),Promise.resolve(e))}E([y,m]).then(t=>(o.resolve(t),this._internals.log("<done> track",t.name),e(),Promise.resolve(t))).catch(e=>{this._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",c),p.error(e),this.network.error(e,this._internals.state.userId)})})),o.promise}trigger(e,t,n){const i=Object(r.b)();this._internals.log("<call> trigger",e),this._internals.triggerListeners=this._internals.triggerListeners||[];return this._internals.state.taskQueue.add(new c(t=>{this._internals.log("<task> trigger",e);const r=this._internals.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))}));this._internals.triggerListeners.push(r),this._internals.log("<done> trigger",e),t()})),i.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=Object(r.b)();this._internals.log("<call> segment",e);return this._internals.state.taskQueue.add(new c(r=>{this._internals.log("<task> segment",e);const i=this._internals.queryManager.stateMap.value[e];i&&(t(i.result.result),n.resolve()),this._internals.log("<done> segment",e),r()})),n.promise}segments(e,t="all"){const n=Object(r.b)();this._internals.log("<call> segments");return this._internals.state.taskQueue.add(new c(r=>{this._internals.log("<task> segments ("+t+")");const i=i=>{e(i),n.resolve(i),this._internals.log("<done> segments ("+t+")"),r()};"dfp"===t?this._internals.messages.once("permutive:dfp:ready",()=>{i(this._internals.addons.dfp.liveSegments)}):i(this._internals.queryManager.userSegments)})),n.promise}reset(){return Promise.all([this._internals.api.reset(),this._internals.state.reset(),this._internals.stateSync.reset(),this._internals.queryManager.bootstrap([])]).then(([e])=>{this._internals.state.setUserId(e.id),this._internals.state.eventsCache.reset(),this._internals.messages.emit("permutive:reset")})}addon(e,t){if(-1===this.initialisedAddons.indexOf(e)){this.initialisedAddons.push(e);const r=Object.assign(Object.assign({},t),{_internals:this._internals,permutive:this,network:this.network,context:this.context});switch(e){case"web":Promise.resolve().then(n.bind(null,37)).then(e=>this._internals.addons.web=new e.WebAddon(r));break;case"publishers":0;break;case"overlays":Promise.resolve().then(n.bind(null,35)).then(e=>this._internals.addons.overlays=new e.OverlaysAddon(r));break;case"scriptrunner":Promise.resolve().then(n.bind(null,36)).then(e=>this._internals.addons.scriptrunner=new e.ScriptRunnerAddon(r));break;case"dfp":Promise.resolve().then(n.bind(null,34)).then(e=>this._internals.addons.dfp=new e.DFPAddon(r));break;case"smart":case"nativo":case"freewheel":case"facebook_pixel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"aol":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"tradedesk":0;break;case"ddp":case"dbm":case"appnexus":case"pubmatic":case"lotame":0}}else"web"===e&&!0!==t.auto_init&&this._internals.addons.web.reset(t)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this._internals.addons.tradedesk=new e.Addon(t);break;case"ddp":this._internals.addons.ddp=new e.Addon(t);break;case"appnexus":this._internals.addons.appnexus=new e.Addon(t);break;case"pubmatic":this._internals.addons.pubmatic=new e.Addon(t);break;case"lotame":this._internals.addons.lotame=new e.Addon(t)}},i=t=>t[l[e.key]]?n():Object(p.c)();return(e=>{const t=e.__tcfapi,n={type:"aborted"},i=["tcloaded","useractioncomplete"];return t?Object(r.a)(()=>u(t,"getTCData"),()=>u(t,"getTCData").then(e=>"loaded"===(null==e?void 0:e.cmpStatus)&&i.includes(null==e?void 0:e.eventStatus))).then(Object(s.b)(()=>n,e=>({type:"loaded",data:e}))):Promise.resolve({type:"missing"})})(window).then(e=>{switch(e.type){case"missing":return n();case"aborted":return Object(p.c)();case"loaded":return Object(o.a)((t=e.data).gdprApplies?Object(s.o)(t.vendor.consents):s.n,Object(s.b)(n,i))}var t})}ready(e,t="initialised"){const n=Object(r.b)(),i=()=>{e(),n.resolve()};switch(t){case"initialised":this._internals.isReady?i():this._internals.messages.on("permutive:ready",i);break;case"realtime":this._internals.isRealtime?i():this._internals.messages.once("permutive:ready",i)}return n.promise}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(5),i=n(23),c=n.n(i),a=function(){return c()('/*! permutive-javascript-sdk v13.0.0-RC.31 (web) (built 2020-10-29 08:53:34 GMT+0000) */!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";e.exports=function(e){function t(e,t,n,a){function i(t){"function"!=typeof self.postMessage?e.ports[0].postMessage(t):self.postMessage(t)}n?("undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",n),i([t,{message:n.message}])):i([t,null,a])}self.addEventListener("message",(function(n){var a=n.data;if(Array.isArray(a)&&2===a.length){var i=a[0],o=a[1];"function"!=typeof e?t(n,i,new Error("Please pass a function into register().")):function(e,n,a,i){var o,r=function(e,t){try{return{res:e(t)}}catch(e){return{err:e}}}(n,i);r.err?t(e,a,r.err):!(o=r.res)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then?t(e,a,null,r.res):r.res.then((function(n){t(e,a,null,n)}),(function(n){t(e,a,n)}))}(n,e,i,o)}}))}},function(e,t,n){"use strict";function a(e){return e}n.r(t),n.d(t,"effects",(function(){return pn})),n.d(t,"bootstrap",(function(){return un})),n.d(t,"updateEnvironment",(function(){return sn})),n.d(t,"process",(function(){return ln})),n.d(t,"processOne",(function(){return yn})),n.d(t,"migrateDirect",(function(){return dn})),n.d(t,"migrateViaEventsCache",(function(){return gn})),n.d(t,"setSegmentActivationWithStateMap",(function(){return fn}));function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function o(e,t,n,a,i,o,r,c,p,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return a(n(t(e)));case 5:return i(a(n(t(e))));case 6:return o(i(a(n(t(e)))));case 7:return r(o(i(a(n(t(e))))));case 8:return c(r(o(i(a(n(t(e)))))));case 9:return p(c(r(o(i(a(n(t(e))))))));case 10:return u(p(c(r(o(i(a(n(t(e)))))))))}}var r=function(e){return"Left"===e._tag},c=function(e){return{_tag:"Left",left:e}},p=function(e){return{_tag:"Right",right:e}};function u(e,t){try{return p(e())}catch(e){return c(t(e))}}var s=function(e){return function(t){return r(t)?e(t.left):t.right}};var l=function(e,t){return r(e)?e:p(t(e.right))},y=function(e,t){return r(e)?e:r(t)?t:p(e.right(t.right))},d=function(e,t){return r(e)?e:t(e.right)},g=function(e,t,n){return r(e)?t:n(t,e.right)},f=function(e){return function(t,n){return r(t)?e.empty:n(t.right)}},q=function(e,t,n){return r(e)?t:n(e.right,t)},_=function(e){return function(t,n){return r(t)?e.of(c(t.left)):e.map(n(t.right),p)}},m=function(e,t,n){return r(e)?c(t(e.left)):p(n(e.right))},v=function(e,t){return r(e)?c(t(e.left)):e},w=function(e,t){return r(e)?t():e},h=function(e,t){return r(e)?e:p(t(e))},b=function(e,t){return function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}(t(e),(function(e){return r(e)?p(c(e.left)):r(e.right)?c(t(e.right.left)):p(p(e.right.right))}))},k=function(e){return function(t){return l(t,e)}},x=p,P=function(e){return function(t){return r(t)?e.of(c(t.left)):e.map(t.right,p)}},S=c,I="Either";var O={URI:I,map:l,of:x,ap:y,chain:d,reduce:g,foldMap:f,reduceRight:q,traverse:_,sequence:P,bimap:m,mapLeft:v,alt:w,extend:h,chainRec:b,throwError:S};var j,A=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Q=function(){function e(e,t,n,a){this.name=e,this.is=t,this.validate=n,this.encode=a,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var a=this;return void 0===n&&(n="pipe("+this.name+", "+t.name+")"),new e(n,t.is,(function(e,n){var i=a.validate(e,n);return r(i)?i:t.validate(i.right,n)}),this.encode===z&&t.encode===z?z:function(e){return a.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),z=function(e){return e},M=c,T=function(e,t,n){return M([{value:e,context:t,message:n}])},N=p,C=(new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="NullType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="UndefinedType",t}return A(t,e),t}(Q))),L=(new(function(e){function t(){var t=e.call(this,"void",C.is,C.validate,z)||this;return t._tag="VoidType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),N,z)||this;return t._tag="UnknownType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="StringType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="NumberType",t}return A(t,e),t}(Q))),E=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="BigIntType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="BooleanType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="AnyArrayType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="AnyDictionaryType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="FunctionType",t}return A(t,e),t}(Q)),function(e){function t(t,n,a,i,o,r){var c=e.call(this,t,n,a,i)||this;return c.type=o,c.predicate=r,c._tag="RefinementType",c}return A(t,e),t}(Q)),U=(V(L,(function(e){return Number.isInteger(e)}),"Int"),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.value=o,r._tag="LiteralType",r}A(t,e)}(Q),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.keys=o,r._tag="KeyofType",r}A(t,e)}(Q),Object.prototype.hasOwnProperty,function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.runDefinition=o,r._tag="RecursiveType",r}return A(t,e),t}(Q));Object.defineProperty(U.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});(function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.type=o,r._tag="ArrayType",r}A(t,e)})(Q),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.props=o,r._tag="InterfaceType",r}A(t,e)}(Q),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.props=o,r._tag="PartialType",r}A(t,e)}(Q),function(e){function t(t,n,a,i,o,r){var c=e.call(this,t,n,a,i)||this;return c.domain=o,c.codomain=r,c._tag="DictionaryType",c}A(t,e)}(Q);var G=function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.types=o,r._tag="UnionType",r}return A(t,e),t}(Q);!function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.types=o,r._tag="IntersectionType",r}A(t,e)}(Q);!function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.types=o,r._tag="TupleType",r}A(t,e)}(Q);(function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.type=o,r._tag="ReadonlyType",r}A(t,e)})(Q),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.type=o,r._tag="ReadonlyArrayType",r}A(t,e)}(Q),function(e){function t(t,n,a,i,o,r){var c=e.call(this,t,n,a,i,o)||this;return c.tag=r,c}A(t,e)}(G),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.type=o,r._tag="ExactType",r}A(t,e)}(Q),new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return T(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),N,z)||this;return t._tag="AnyType",t}return A(t,e),t}(Q)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?N(e):T(e,n)}),z)||this;return t._tag="ObjectType",t}return A(t,e),t}(Q));function V(e,t,n){var a;return void 0===n&&(n="("+e.name+" | "+(((a=t).displayName||a.name||"<function"+a.length+">")+")")),new E(n,(function(n){return e.is(n)&&t(n)}),(function(n,a){var i=e.validate(n,a);if(r(i))return i;var o=i.right;return t(o)?N(o):T(o,a)}),e.encode,e,t)}V(L,Number.isInteger,"Integer"),function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,i)||this;return r.props=o,r._tag="StrictType",r}A(t,e)}(Q);const D=()=>({kind:"null",value:null}),R=e=>({kind:"string",value:e}),F=e=>({kind:"number",value:e}),Y=e=>({kind:"array",value:e}),$=e=>({kind:"object",value:e}),B=e=>e,J=()=>({kind:"bottom"}),K=e=>({kind:"inner",a:e}),W=e=>({kind:"top",error:e}),H=e=>({kind:"unbounded",group:e}),X=(e,t)=>({kind:"windowed",key:t,group:e}),Z=(e,t,n)=>({kind:"countLimit",n:n,limit:t,group:e}),ee=(e,t,n)=>({kind:"uniqueLimit",n:n,limit:t,group:e}),te=e=>({kind:"numberGroup",group:e}),ne=e=>({kind:"stringGroup",group:e}),ae=e=>({kind:"tuple",tuple:e}),ie=e=>({state:e}),oe=(e,t)=>({commands:e,payload:t});var re=function(e){return"Some"===e._tag},ce=function(e){return"None"===e._tag},pe={_tag:"None"},ue=function(e){return{_tag:"Some",value:e}};function se(e){return function(t){return e(t)?ue(t):pe}}var le=function(e){return function(t){return ce(t)?e():t.value}};var ye=function(e,t){return ce(e)?pe:ue(t(e.value))},de=function(e){return function(t){return ye(t,e)}};function ge(e){return{equals:function(t,n){return t===n||(ce(t)?ce(n):!ce(n)&&e.equals(t.value,n.value))}}}function fe(e){return{equals:ge(e).equals,compare:function(t,n){return t===n?0:re(t)?re(n)?e.compare(t.value,n.value):1:-1}}}function qe(e,t){return e<t?-1:e>t?1:0}function _e(e,t){return e===t}var me={equals:_e,compare:qe},ve={equals:_e,compare:qe};function we(e){return function(t,n){return-1===e.compare(t,n)}}function he(e){return function(t,n){return 1===e.compare(t,n)}}function be(e){return function(t,n){return-1===e.compare(t,n)?n:t}}function ke(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}}var xe=function(e,t){return ke((function(n,a){return e.compare(t(n),t(a))}))},Pe=function(e){return function(t){return xe(t,e)}};var Se=function(e,t){var n=e.length;if(0===n)return t;var a=t.length;if(0===a)return e;for(var i=Array(n+a),o=0;o<n;o++)i[o]=e[o];for(o=0;o<a;o++)i[o+n]=t[o];return i};function Ie(e){return{equals:function(t,n){return t===n||t.length===n.length&&t.every((function(t,a){return e.equals(t,n[a])}))}}}function Oe(e){return 0===e.length}function je(e){return e.length>0}function Ae(e,t){if(void 0===t)return function(t){return Ae(e,t)};for(var n=t.length,a=Array(n+1),i=0;i<n;i++)a[i+1]=t[i];return a[0]=e,a}function Qe(e,t){for(var n=e.length,a=Array(n+1),i=0;i<n;i++)a[i]=e[i];return a[n]=t,a}var ze=function(e,t){for(var n=e.length,a=0;a<n&&t(e[a]);a++);return a};function Me(e){return Oe(e)?e:e.slice().reverse()}var Te=function(e){return function(t){return Oe(t)?t:t.slice().sort(e.compare)}};function Ne(e,t,n){for(var a=[],i=Math.min(e.length,t.length),o=0;o<i;o++)a[o]=n(e[o],t[o]);return a}function Ce(e){return function(t,n){if(void 0===n){var a=Ce(e);return function(e){return a(t,e)}}for(var i,o=0,r=n.length;o<r;o++)if(i=n[o],e.equals(i,t))return!0;return!1}}var Le=function(){return Je},Ee=function(e,t){for(var n=0,a=e.length,i=new Array(a),o=0;o<a;o++){n+=(p=t(o,e[o])).length,i[o]=p}var r=Array(n),c=0;for(o=0;o<a;o++){for(var p,u=(p=i[o]).length,s=0;s<u;s++)r[s+c]=p[s];c+=u}return r},Ue=function(e,t){return Ee(e,(function(e,n){return t(n)}))},Ge=function(e,t){return De(e,(function(e,n){return t(n)}))},Ve=function(e,t,n){for(var a=e.length,i=t,o=0;o<a;o++)i=n(o,i,e[o]);return i},De=function(e,t){for(var n=[],a=0;a<e.length;a++){var i=t(a,e[a]);re(i)&&n.push(i.value)}return n},Re=function(e){var t=Fe(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},Fe=function(e){return function(t,n){return Ve(t,e.of(Le()),(function(t,a,i){return e.ap(e.map(a,(function(e){return function(t){return Qe(e,t)}})),n(t,i))}))}},Ye=function(e){return function(t){return Ue(t,e)}},$e=function(e){return Ge(e,a)},Be=function(e){var t=Re(e);return function(e){return function(n){return t(n,e)}}};var Je=[],Ke=function(e){return ke((function(t,n){for(var a=t.length,i=n.length,o=Math.min(a,i),r=0;r<o;r++){var c=e.compare(t[r],n[r]);if(0!==c)return c}return ve.compare(a,i)}))},We=function(e){return function(t){return t.slice(0,e)}};function He(e){return function(e){return function(t){for(var n=ze(t,e),a=Array(n),i=0;i<n;i++)a[i]=t[i];var o=t.length,r=Array(o-n);for(i=n;i<o;i++)r[i-n]=t[i];return{init:a,rest:r}}}(e)}var Xe=function(e){return function(t){return t.slice(e,t.length)}},Ze=function(e){return function(t){for(var n=ze(t,e),a=t.length,i=Array(a-n),o=n;o<a;o++)i[o-n]=t[o];return i}};var et=Me,tt=Te,nt=Ne;var at=function e(t){var n=Ce(t);return function(a,i){if(void 0===i){var o=e(t);return function(e){return o(e,a)}}return Se(a,i.filter((function(e){return!n(e,a)})))}},it=Ye,ot=$e,rt=Be,ct=o;function pt(e){switch(e.kind){case"null":return st.encode(e);case"string":return lt.encode(e);case"number":return yt.encode(e);case"array":return dt.encode(e);case"object":return gt.encode(e)}}function ut(e){return null===e?st.decode(e):"number"==typeof e?yt.decode(e):"string"==typeof e?lt.decode(e):Array.isArray(e)?dt.decode(e):gt.decode(e)}const st=new Q("simpleNullCodec",e=>{const t=e;return"null"===t.kind&&null===t.value},(e,t)=>null===e?N({kind:"null",value:null}):T(e,t),e=>e.value),lt=new Q("simpleStringCodec",e=>{const t=e;return"string"===t.kind&&"string"==typeof t.value},(e,t)=>"string"==typeof e?N(R(e)):T(e,t),e=>e.value),yt=new Q("simpleNumberCodec",e=>{const t=e;return"number"===t.kind&&"number"==typeof t.value},(e,t)=>"number"==typeof e?N(F(e)):T(e,t),e=>e.value),dt=new Q("simpleArrayCodec",e=>{const t=e;return"array"===t.kind&&Array.isArray(t.value)},(e,t)=>{if(Array.isArray(e)){const t=rt(O)(ut)(e);return k(Y)(t)}return T(e,t)},e=>e.value.map(pt)),gt=new Q("simpleObjectCodec",e=>"object"===e.kind,(e,t)=>{if(e&&e.constructor===Object){const t=rt(O)(([e,t])=>ct(ut(t),k(t=>i(e,t))))(Object.entries(e));return k(e=>$(new Map([...e])))(t)}return T(e,t)},e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,([e,t])=>({[e]:pt(t)})))});new Q("simpleJsonCodec",e=>st.is(e)||yt.is(e)||lt.is(e)||dt.is(e)||gt.is(e),ut,pt);var ft=n(0),qt=n.n(ft);const _t=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return K(t(e.a));case"top":return W(e.error)}},mt=e=>ke((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return me.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")});function vt(e){return je(e)?ue(e):pe}var wt=Ae,ht=function(e){return vt(function(e){var t=e.length;if(0===t)return Je;for(var n=Array(t),a=0;a<t;a++)n[a]=e[a];return n}(e))},bt=Ie;function kt(e,t){return ot(e.map(t))}function xt(e,t,n,a){const i=(e,t)=>{if(0===e.length)return ot(t.map(e=>ue({1:e[1],2:n(pe,ue(e[2]))})));if(0===t.length)return ot(e.map(e=>ue({1:e[1],2:n(ue(e[2]),pe)})));if(e.length>0&&t.length>0&&we(a)(e[0][1],t[0][1])){const[a,...o]=e,r=a[1],c=a[2];return wt({1:r,2:n(ue(c),pe)},i(o,t))}if(e.length>0&&t.length>0&&he(a)(e[0][1],t[0][1])){const[a,...o]=t,r=a[1],c=a[2];return wt({1:r,2:n(pe,ue(c))},i(e,o))}if(e.length>0&&t.length>0){const[a,...o]=e,[r,...c]=t,p=a[1],u=a[2],s=r[2];return wt({1:p,2:n(ue(u),ue(s))},i(o,c))}throw new Error("Non exhaustive match in mapOption2")},o=Pe(e=>e[1])(a),r=(e=>{const t=kt(e,e=>re(e[2])?ue({1:e[1],2:e[2].value}):pe);return 0===t.length?pe:ue(t)})(i(tt(o)([...e].map(e=>({1:e[0],2:e[1]}))),tt(o)([...t].map(e=>({1:e[0],2:e[1]})))));return de(e=>new Map(e.map(e=>[e[1],e[2]])))(r)}function Pt(e,t,n,a){const i=Pe(e=>e[0])(a),o=tt(i)([...t]).reduceRight((e,t)=>{if(r(e)){const a=n(t[1],e.left);return re(a)?c(a.value):p(t[0])}return e},c(e));return"Left"===(u=o)._tag?pe:ue(u.right);var u}function St(e,t){return new Map([...e].map(t))}function It(e,t){return new Map([...e].filter(t))}function Ot(e){return{equals:function(t,n){return t===n||e(t,n)}}}var jt={equals:function(e,t){return e===t}};var At=jt,Qt=jt;function zt(e){return de(Et)(function(e){switch(e.state.kind){case"top":return ue(R(e.state.error));case"bottom":return pe;case"inner":return function(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return Mt(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?ue(Y(function(e,t){const n=de(e=>wt(e,t))(e);return le(()=>t)(n)}(de(e=>R(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}};return e.map(e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2])).join("")}(e)))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return R(e.error);case"inner":return F(e.a)}};switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n=e.group,kt([Tt,Nt,e=>ct(e,Lt,$,ue)],e=>e(n));case"numberGroup":return(e=>kt([Tt,Ct,e=>ct(e,Lt,e=>St(e,([e,t])=>[JSON.stringify(e),t]),$,ue)],t=>t(e)))(e.group)}var n}(e.payload)))):pe}(e.state.a)}}(e))}function Mt(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||re(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||re(e.limit)}}function Tt(e){switch(e.kind){case"unbounded":return pe;case"windowed":return ue(R("w"));case"countLimit":return ue(R(1===e.n?"x":"x"+e.n));case"uniqueLimit":return ue(R(1===e.n?"u":"u"+e.n))}}function Nt(e){switch(e.kind){case"unbounded":return pe;case"windowed":return ue(R(re(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return ue(R(re(e.limit)?e.limit.value:""))}}function Ct(e){switch(e.kind){case"unbounded":return pe;case"windowed":return re(e.key)?ue(F(e.key.value)):ue({kind:"null",value:null});case"countLimit":case"uniqueLimit":return re(e.limit)?ue(F(e.limit.value)):ue({kind:"null",value:null})}}function Lt(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Et(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Et(e.value[0]):Y(e.value.map(Et));case"object":return ct(It(e.value,([e,t])=>"null"!==t.kind),e=>St(e,e=>[e[0],Et(e[1])]),$);default:return e}}function Ut(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return pe;const[t,n,a,i]=e;if("string"===t.kind&&"string"===n.kind&&"object"===i.kind){const e=se(e=>Gt(e[1].value)&&Vt(e[2].value))({1:t,2:n});return de(e=>({prim:e[1].value,grp:e[2].value,cutoff:a,m:i.value}))(e)}return pe})(e);if(re(t)){const{prim:e,grp:n,cutoff:a,m:i}=t.value,o=Dt(a,i,Rt(n));return"string"==typeof o?W(o):K(oe(Ft(e),o))}const n=(e=>{if(3!==e.length)return pe;const[t,n,a]=e;if("string"===t.kind&&"object"===a.kind){const e=se(e=>Vt(e.value))(t);return de(e=>({grp:e.value,cutoff:n,m:a.value}))(e)}return pe})(e);if(re(n)){const{grp:e,cutoff:t,m:a}=n.value,i=Dt(t,a,Rt(e));return"string"==typeof i?W(i):K(oe(pe,i))}const a=(e=>{if(2!==e.length)return pe;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=se(e=>Gt(e.value))(t);return de(e=>({prim:e.value,m:n.value}))(e)}return pe})(e);if(re(a)){const{prim:e,m:t}=a.value;return K(oe(Ft(e),ne(H(t))))}const i=(e=>{if(1!==e.length)return pe;const[t]=e;return"object"===t.kind?ue({m:t.value}):pe})(e);if(re(i)){const{m:e}=i.value;return K(oe(pe,ne(H(e))))}const o=(e=>{if(e.length<1)return pe;const[t,...n]=e;if("string"===t.kind){const e=se(e=>Gt(e.value))(t);return de(e=>({prim:e.value,rest:n}))(e)}return pe})(e);if(re(o)){const{prim:e,rest:t}=o.value;return K(oe(Ft(e),Yt(t)))}return K(oe(pe,Yt(e)))},n=e=>{switch(e.kind){case"array":return it(n)(e.value);default:return[e]}};switch(e.kind){case"null":return ie({kind:"bottom"});default:return ie(t(n(e)))}}function Gt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;default:{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every(e=>-1!=="pmvn0123456789".indexOf(e))}}}function Vt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map(e=>!isNaN(parseInt(e))).indexOf(!1)}}}function Dt(e,t,n){switch(e.kind){case"string":return ne(n({1:ue(e.value),2:t}));case"number":case"null":return te(n({1:"null"===e.kind?pe:ue(e.value),2:It(St(t,([e,t])=>[Number(e),t]),e=>!isNaN(e[0]))}));default:return"{bad cutoff}"}}function Rt(e){const t=e=>t=>ee(t[2],t[1],e),n=e=>t=>Z(t[2],t[1],e),a=e.split("");switch(!0){case"w"===a[0]&&void 0===a[1]:return e=>X(e[2],e[1]);case"u"===a[0]&&void 0===a[1]:return t(1);case"u"===a[0]&&void 0!==a[1]:return t(parseInt(a.slice(1).join("")));case"x"===a[0]&&void 0===a[1]:return n(1);case"x"===a[0]&&void 0!==a[1]:return n(parseInt(a.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Ft(e){return de(B)(ht(function e(t,n){const a=n(t);return le(()=>[])(de(t=>[t[1]].concat(e(t[2],n)))(a))}(e,e=>{const t=e.split("");if(0===t.length)return pe;const[n,...a]=t,i=(e=>{switch(e){case"p":return ue("add");case"m":return ue("mul");case"v":return ue("max");case"n":return ue("min");default:return pe}})(n);return de(e=>{const{init:t,rest:n}=He(e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t})(a);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}})(i)})))}function Yt(e){return ae(e.map($t))}function $t(e){switch(e.kind){case"number":return K(e.value);case"string":return W(e.value);case"null":return{kind:"bottom"};case"object":return W("{object}");case"array":return W("{array}")}}const Bt={strategy:(e,t,n)=>a=>{if(ce(n))return t;if("delta"===e&&ce(t))return pe;if(ce(t))return n;if(re(t)&&re(n))return a(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,a,i,o)=>{const r=Ke(mt(o));if("append"===e&&"add"===t)return nt(n,a,en(i.plus));if("append"===e&&"mul"===t)return nt(n,a,en(i.times));if("append"===e&&"max"===t)return be(r)(n,a);if("join"===e&&"add"===t)return nt(n,a,en(be(o)));if("join"===e&&"mul"===t)return nt(n,a,en(be(o)));if("join"===e&&"max"===t)return be(r)(n,a);if("min"===t)return Bt.operation(e,"max",n,a,i,function(e){return ke((t,n)=>function(e){switch(e){case-1:return 1;case 1:return-1;default:return 0}}(e.compare(t,n)))}(o));if("delta"===e&&"max"===t)return he(r)(n,a)?n:a.map(J);if("delta"===e)return nt(n,a,(e,t)=>he(mt(o))(e,t)?e:{kind:"bottom"});throw new Error("Non exhaustive match in combineCommand.operation")}},Jt={plus:(e,t)=>e+t,times:(e,t)=>e*t};function Kt(e,t,n,a){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,o=t.group;return le(J)(de(e=>K(H(e)))(xt(i,o,n,a)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,o=e.group,r=t.key,c=t.group,p=be(fe(a))(i,r);return le(J)(de(e=>K(X(e,p)))(xt(o,c,n,a)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,r=e.group,c=t.limit,p=t.group,u=be(fe(a))(o,c);return le(J)(de(e=>K(Z(e,u,i)))(xt(r,p,n,a)))}return W("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,r=e.group,c=t.limit,p=t.group,u=be(fe(a))(o,c);return le(J)(de(e=>K(ee(e,u,i)))(xt(r,p,n,a)))}return W("Non matching counts")}return W("Non matching group types")}function Wt(e,t,n){return le(D)(function e(t,n){const a=n=>(a,i)=>Bt.strategy(t,a,i)(e(t,n)),i=(e,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const t=Kt(n.group,i.group,a(e),me);return _t(t,e=>ne(Xt(e,me)))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const t=Kt(n.group,i.group,a(e),ve);return _t(t,e=>te(Xt(e,ve)))}if("tuple"===n.kind&&"tuple"===i.kind){const a=re(e)?e.value:[];return K(ae(function(e,t,n,a,i,o){const r=(e,t)=>({1:We(e)(t).concat([...Array(Math.max(0,e-t.length))].map(J)),2:Xe(e)(t)}),c=(t,n,a)=>{if(0===t.length)return Bt.operation(e,"max",n,a,i,o);if(0===n.length)return a;if(0===a.length)return n;if(t.length>0){const[p,...u]=t,s=r(p[2],n),l=s[1],y=s[2],d=r(p[2],a),g=d[1],f=d[2];return Bt.operation(e,p[1],l,g,i,o).concat(c(u,y,f))}throw new Error("Non exhaustive match in recurse")};return et(Ze(e=>"bottom"===e.kind)(et(c(t,n,a))))}(t,a,n.tuple,i.tuple,Jt,ve)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)},o=(e,t)=>{var a;if(ge(bt((a={1:At,2:Qt},Ot((function(e,t){for(var n in a)if(!a[n].equals(e[n],t[n]))return!1;return!0}))))).equals(e.commands,t.commands)){const a=ce(e.commands)?n:e.commands,o=i(a,e.payload,t.payload);return _t(o,t=>oe(e.commands,t))}throw new Error(`Non matching primitive strings. Got ${JSON.stringify(e)} and ${JSON.stringify(t)}`)};return(e,t)=>zt(ie(Zt(o,Ut(e).state,Ut(t).state)))}(e,pe)(t,n))}function Ht(e,t,n){const a=de(t=>It(e,([e,a])=>{return(i=n,function(e,t){return-1!==i.compare(e,t)})(e,t);var i}))(t);return le(()=>e)(a)}function Xt(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return ce(e.key)?e:X(Ht(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,a=e.n,i=e.group,o=Pt(a,i,(e,t)=>t<=1?pe:ue(t-1),t),r=be(fe(t))(n,o);return Z(Ht(i,r,t),r,a)}case"uniqueLimit":{const n=e.limit,a=e.n,i=e.group,o=(e,t)=>{switch(e.kind){case"object":{const n=[...e.value.keys(),...t.keys()],i=new Set(n);return i.size>=a?pe:ue(i)}default:return pe}},r=Pt(new Set,i,o,t),c=be(fe(t))(n,r);return ee(Ht(i,c,t),c,a)}}}function Zt(e,t,n){if("inner"===t.kind&&"inner"===n.kind)return e(t.a,n.a);if("bottom"===t.kind)return n;if("bottom"===n.kind)return t;if("top"===t.kind&&"top"===n.kind)return W(be(me)(t.error,n.error));if("top"===t.kind)return t;if("top"===n.kind)return n;throw new Error("Non exhaustive match in extend")}function en(e){return(t,n)=>Zt((t,n)=>K(e(t,n)),t,n)}function tn(e,t){return Wt("append",e,t)}function nn(e,t){const n=Object.keys(e),a=n.length,i={};for(let o=0;o<a;o++){const a=n[o],r=t(a,e[a]);re(r)&&(i[a]=r.value)}return i}var an=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};const[on,rn]=i({23918:(cn=(()=>{function e(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function t(e,t,n=o){let a=t.reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===a?null:n(a)}function n(e,t){var n=t.slice();return n.unshift(e),n}let a=(e,a,i=o)=>t(e,n("properties",a),i);function i(e){const t=Object.keys(e);for(var n=t.length,a=new Array(n);n--;)a[n]=[t[n],e[t[n]]];return a}let o=e=>e,r=e=>!0,c=(e,t)=>n=>e(n)&&t(n),p=(e,t)=>n=>e(n)||t(n),u=e=>t=>!e(t),s=(e,t)=>n=>n>=e&&n<=t,l=e=>new Date(e).getTime(),y=e=>t(e,["time"],l),d=(e,n)=>t(n,e,l),g=(e,n,a,i,o,r)=>c=>{const p=t(c,e,e=>e.filter(i).map(e=>t(e,n)).reduce(o,r));return a(null===p?r:p)},f=e=>t=>"string"==typeof e&&"string"==typeof t&&t.toLowerCase().indexOf(e.toLowerCase())>-1,q=e=>t=>null!=t&&"object"==typeof t&&t.indexOf(e)>=0;function _(e,n,a,i,o){const r=t(e.getSegments(),[n,a])||!1;return o&&(i||r)&&e.setSegmentActivation(n,a,o),r}function m(e,n,a){return t(e.getSegments(),[n,a])||!1}let v=(e,n,a=18e5)=>i=>({a:{m:(e,t)=>[t[0],i.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:i.a.z,t[1])],z:[[],i.a.z]},p:(a,o)=>[[e(a)],t(o,n)===e(a)?i.p(a,o):i.a.z],r:(t,n)=>i.r(t,n[0]!=[]&&n[0][0]===e(t)?n[1]:i.a.z),d:i.d.sq||{l:(o,r)=>{let c=t(o,n),p=e(r);if(c!==p)return null;let u=i.d.l(o,r);if(!(Array.isArray(u)&&u.length>1))return null;let[s,...l]=u,d=+(y(o)||r.getCurrentTime()),g=Math.floor(d/a),f={};return f[g]={},f[g][p]=1===l.length?l[0]:l,[s,"u",null,f]},i:(t,n)=>{if(!Array.isArray(t)||"object"!=typeof t[3])return[[],i.a.z];let a=e(n),o=t[3];return[[a],Object.keys(o).map(e=>o[e][a]).filter(e=>e).map(e=>i.d.i([t[0]].concat(e))).reduce(i.a.m,i.a.z)]}}}),w=v(e=>e.getCurrentSession(),["session_id"],18e5),h=v(e=>e.getCurrentView(),["view_id"],3e5);function b(e,n,a,i=1){return{a:{m:(e,t)=>e.concat(t).slice(-a),z:[]},p:(a,i)=>t(i,["name"])===n?[e.p(a,i)]:[],r:(t,n)=>e.r(t,n.reduce((t,n)=>e.a.m(t,n),e.a.z)),d:e.d.ftn||{l:(n,o)=>{const r=e.d.l(n,o),c=t(n,["time"],l)*i;return r&&[r[0],"x"+a,null,{[c]:2==r.length?r[1]:r.slice(1)}]},i:(t,n)=>t?Object.keys(t[3]||{}).sort().reverse().map(e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]]).map(t=>e.d.i(t,n)):[]}}}let k=(e,t)=>null===e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t},x=(e,t)=>e&&t?e(t):null,P=(e,t,n)=>n&&n.result&&Array.isArray(n.result)?k(x(e.d&&e.d.m,{result:n.result[0]}),x(t.d&&t.d.m,{result:n.result[1]})):null;return{q:function(e){const t=(t,n)=>({result:e.r(t,n)});return{initial:t=>({result:e.a.z}),update:(t,n,a)=>({result:e.a.m(n.result,e.p(t,a))}),result:(e,n)=>t(e,n.result),lift:(t,n)=>e.d.l(t,n),interpret:(n,a)=>t(a,e.d.i(n,a)),migrate:t=>t&&e.d.m?e.d.m(t):null,m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:e=>e.reduce(c),acq:function(e,t){return{p:(n,a)=>[e.p(n,a),t.p(n,a)],r:(n,a)=>e.r(n,a[0])&&t.r(n,a[1]),a:{z:[e.a.z,t.a.z],m:(n,a)=>[e.a.m(n[0],a[0]),t.a.m(n[1],a[1])]},d:{l:(n,a)=>k(e.d.l(n,a),t.d.l(n,a)),i:(n,a)=>n?[e.d.i(n.a||null,a),t.d.i(n.b||null,a)]:[e.a.z,t.a.z],m:n=>P(e,t,n)}}},af_i:(e,n,a=r)=>i=>t(i,e,e=>e.filter(a).map(n).reduce((e,t)=>e&&t,!0))&&!0,af_l:(e,n,a=r)=>i=>{const o=t(i,e,e=>e.filter(a).length);return n(null===o?0:o)},af_m:(e,n,a,i=r)=>o=>{const r=t(o,e,e=>e.filter(i));return null===r||0===r.length?a(0):a(r.map(e=>t(e,n)).reduce((e,t)=>e+t,0)/r.length)},af_n:(e,t,n,a=r)=>g(e,t,n,a,(e,t)=>Math.min(e,t),Number.POSITIVE_INFINITY),af_p:(e,t,n,a=r)=>g(e,t,n,a,(e,t)=>e*t,1),af_s:(e,t,n,a=r)=>g(e,t,n,a,(e,t)=>e+t,0),af_u:(e,n,a=r)=>i=>t(i,e,e=>e.filter(a).map(n).reduce((e,t)=>e||t,!1))||!1,af_x:(e,t,n,a=r)=>g(e,t,n,a,(e,t)=>Math.max(e,t),Number.NEGATIVE_INFINITY),as:(e,a,i)=>o=>i.reduce((i,r)=>i&&e(r)(t(o,n("properties",a))),!0),c:q,c_:(e,n)=>a=>q(n)(t(a,e)),ctu:function(e,n,a,i){return{a:i?{m:(e,t)=>e.filter(e=>-1===t.indexOf(e)).concat(t).slice(-i),z:[]}:{m:(e,t)=>e.filter(e=>-1===t.indexOf(e)).concat(t),z:[]},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):[],r:(e,t)=>t,d:{l:()=>null,i:()=>[]}}},ctv:function(e,n,a,i){function o(e,t){const n=e=>({k:e.k,c:1+e.c}),a={arr:[],add:{k:t,c:1}};return t?(e=>e.arr.concat(e.add))(e.reduce((e,t)=>e.add.k===t.k?{arr:e.arr,add:n(t)}:{arr:e.arr.concat(t),add:e.add},a)):e}return{a:i?{m:(e,t)=>o(e,t).slice(-i),z:[]}:{m:(e,t)=>o(e,t),z:[]},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):null,r:(e,t)=>t.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.k]:t.c}),{}),d:{l:e=>null,i:e=>[]}}},ctw:function(e,n,a,i){return{a:i?{m:(e,t)=>e.concat(t).slice(-i),z:[]}:{m:(e,t)=>e.concat(t),z:[]},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):[],r:(e,t)=>t,d:{l:()=>null,i:()=>[]}}},cw:function(e,n,a=o){return{a:{m:(e,t)=>e+t,z:0},p:(a,i)=>t(i,["name"])===e&&n(i)?1:0,r:(e,t)=>a(t),d:{l:a=>t(a,["name"])===e&&n(a)?["p",1]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,m:e=>e&&e.result?["p",e.result]:null}}},e:e=>t=>t===e,e_:(e,n)=>a=>t(a,e)===n,fm:function(e,t){return{p:t.p,r:(n,a)=>e(t.r(n,a)),a:t.a,d:t.d}},ftn:function(e,n,a){return{a:{m:(e,t)=>e.concat(t.slice(0,a-e.length)),z:[]},p:(a,i)=>t(i,["name"])===n?[e.p(a,i)]:[],r:(t,n)=>e.r(t,n.reduce((t,n)=>e.a.m(t,n),e.a.z)),d:b(e,n,a,-1).d}},fw:function(e,n,a,i=o){return{a:{m:(e,t)=>null===e?t:e,z:null},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):null,r:(e,t)=>t,d:{l:a=>t(a,["name"])===e&&n(a)?["p",1]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,m:e=>e&&e.result?["p",e.result]:null}}},g:e=>t=>t>e,g_:(e,n)=>a=>t(a,e)>n,gb:function(e,a,i){return{a:{m:(n,i)=>Object.keys(n).concat(Object.keys(i)).filter((e,t,n)=>n.indexOf(e)===t).sort((e,a)=>Math.max(t(n,[a,1]),t(i,[a,1]))-Math.max(t(n,[e,1]),t(i,[e,1]))).slice(0,a).reduce((a,o)=>{const r=e.a.m(t(n,[o,0])||e.a.z,t(i,[o,0])||e.a.z);return a[o]=[r,Math.max(t(n,[o,1]),t(i,[o,1]))],a},{}),z:{}},p:(a,o)=>{const r=t(o,n("properties",i)),c=e.p(a,o);return null==r||null==(p=c)||"object"==typeof p&&0===Object.keys(p).length||p===e.a.z?{}:{[r]:[c,t(o,["time"],l)]};var p},r:(t,n)=>{const a={};return Object.keys(n).forEach(i=>a[i]=e.r(t,n[i][0])),a},d:{l:()=>null,i:()=>({})}}},ge:e=>t=>t>=e,ge_:(e,n)=>a=>t(a,e)>=n,i_:o,ifp:function(e){let t=(t,n)=>m(t,"1p",e);return{a:{m:(e,t)=>t,z:!1},p:t,r:(e,t)=>t,d:{l:(e,n)=>["v2",+l(y(e)||n.getCurrentTime()),+t(n)],i:e=>Array.isArray(e)&&(!!+e[2]||!1)}}},isp:function(e,t,n,a){return{a:{m:(e,t)=>t,z:!1},p:(n,a)=>m(n,e,t),r:(i,o)=>_(i,e,t,n,a),d:{l:(e,t)=>null,i:e=>Array.isArray(e)&&(!!+e[2]||!1)}}},itp:function(e,t,n,a){return{a:{m:(e,t)=>t,z:!1},p:(n,a)=>m(n,e,t),r:(i,o)=>_(i,e,t,n,a),d:{l:(e,t)=>null,i:e=>Array.isArray(e)&&(!!+e[2]||!1)}}},k:t,l:e=>t=>t<e,l_:(e,n)=>a=>t(a,e)<n,le:e=>t=>t<=e,le_:(e,n)=>a=>t(a,e)<=n,lm:function(e,t){let n=(t,n)=>function(e,t,n){const a=e||{},o=t[n]||{};var r=(o["1p"]||{}).const||0;const c=i(o);for(var p in c){const e=i(c[p][1]);for(var u in e)!0===(a[c[p][0]]||{})[e[u][0]]&&(r+=e[u][1])}return s=r,1/(1+Math.pow(Math.E,-s));var s}(t.getSegments(),t.getLookalikeModels(),e);return{a:{m:(e,t)=>t,z:[]},p:(e,t)=>[n(e)],r:(e,n)=>!!n[0]&&t(n[0]),d:{l:(e,t)=>["v2",+l(y(e)||t.getCurrentTime()),+n(t)],i:e=>Array.isArray(e)?[+e[2]]||!1:[]}}},ltn:b,mnw:function(e,n,a,i=o){var r=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:r},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):r,r:(e,t)=>i(t),d:{l:i=>t(i,["name"])===e&&n(i)?["n",t(i,a)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:r}}},mxw:function(e,n,a,i=o){const r=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:r},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):r,r:(e,t)=>i(t),d:{l:i=>t(i,["name"])===e&&n(i)?["v",t(i,a)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:r}}},n0:u(o),n:e=>t=>t!==e,nt:u,n_:(e,n)=>a=>t(a,e)!==n,o:e=>e.reduce(p),ocq:function(e,t){return{p:(n,a)=>[e.p(n,a),t.p(n,a)],r:(n,a)=>e.r(n,a[0])||t.r(n,a[1]),a:{z:[e.a.z,t.a.z],m:(n,a)=>[e.a.m(n[0],a[0]),t.a.m(n[1],a[1])]},d:{l:(n,a)=>k(e.d.l(n,a),t.d.l(n,a)),i:(n,a)=>n?[e.d.i(n.a||null,a),t.d.i(n.b||null,a)]:[e.a.z,t.a.z],m:n=>P(e,t,n)}}},oe:i,os:(e,a,i)=>o=>i.reduce((i,r)=>i||e(r)(t(o,n("properties",a))),!1),pb:(e,t,n)=>i=>s(t,n)(a(i,e)),pc:(e,a)=>i=>{const o=t(i,n("properties",e));return null!=o&&"object"==typeof o&&o.indexOf(a)>=0},pe:(e,t)=>n=>a(n,e)===t,pg:(e,t)=>n=>a(n,e)>t,pge:(e,t)=>n=>a(n,e)>=t,pl:(e,t)=>n=>a(n,e)<t,ple:(e,t)=>n=>a(n,e)<=t,pn:(e,t)=>n=>a(n,e)!==t,ps:(e,t)=>n=>f(t)(a(n,e)),pw:function(e,n,a,i=o){return{a:{m:(e,t)=>e*t,z:1},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):1,r:(e,t)=>i(t),d:{l:i=>{return t(i,["name"])===e&&n(i)?(o=t(i,a))>=1?["m2p",o]:o>0?["m2p",null,1/o]:0==o?["m2p",0]:o>-1?["m2p",null,1/o,1]:["m2p",o,null,1]:null;var o},i:e=>{return e?Array.isArray(e)?0===(t=e.slice(1))[0]?0:Math.pow(-1,t[2]||0)*(t[0]||1)/(t[1]||1):e:1;var t}}}},s:f,s_:(e,n)=>a=>f(n)(t(a,e)),scq:function(e,t,n=o){return{p:(n,a)=>[e.p(n,a),t.p(n,a)],r:(a,i)=>n(e.r(a,i[0])+t.r(a,i[1])),a:{z:[e.a.z,t.a.z],m:(n,a)=>[e.a.m(n[0],a[0]),t.a.m(n[1],a[1])]},d:{l:(n,a)=>k(e.d.l(n,a),t.d.l(n,a)),i:(n,a)=>n?[e.d.i(n.a||null,a),t.d.i(n.b||null,a)]:[e.a.z,t.a.z],m:n=>P(e,t,n)}}},sq:w,sw:function(e,n,a,i=o){return{a:{m:(e,t)=>e+t,z:0},p:(i,o)=>t(o,["name"])===e&&n(o)?t(o,a):0,r:(e,t)=>i(t),d:{l:i=>{return(a=>t(a,["name"])===e&&n(a))(i)?(o=t(i,a))<0?["p2",null,-o]:["p2",o]:null;var o},i:e=>{return e?Array.isArray(e)?((t=e.slice(1))[0]||0)-(t[1]||0):e:0;var t}}}},t:r,tb:(e,t)=>n=>s(e,t)(y(n)),te:e=>t=>y(t)===e,te_:(e,t)=>n=>d(e,n)===t,tg:e=>t=>y(t)>e,tg_:(e,t)=>n=>d(e,n)>t,tge:e=>t=>y(t)>=e,tge_:(e,t)=>n=>d(e,n)>=t,ti:l,tl:e=>t=>y(t)<e,tl_:(e,t)=>n=>d(e,n)<t,tle:e=>t=>y(t)<e,tle_:(e,t)=>n=>d(e,n)<t,tn:e=>t=>y(t)!==e,tn_:(e,t)=>n=>d(e,n)!==t,tw:function(n,a,i){const o=i||100,r=Math.ceil(a/o),c=e=>Math.floor(e/r),p=(e,t,n)=>[c(e-a),{[c(t)]:n}],u=(e,t)=>{const a=Math.max(e[0],t[0]),i=Object.keys(e[1]).filter(e=>e>=a).concat(Object.keys(t[1]).filter(e=>e>=a)).filter((e,t,n)=>n.indexOf(e)===t).reduce((a,i)=>{const o=n.a.m(e[1][i]||n.a.z,t[1][i]||n.a.z);return o!==n.a.z&&(a[i]=o),a},{});return[a,i]},s=[Number.NEGATIVE_INFINITY,{}],y=e=>{const t=t=>t.map(([t,n,a])=>p(e.t,a,t)).reduce(u,s);return u(t(e.in),t(e.out))},d=t=>{if(void 0!==t.result)return d(t.result);if(void 0!==t.w)return d(y(t));const[a,i]=t;let o=null,r={};for(let t in i){let a=n.d.m({result:i[t]});a&&Array.isArray(a)&&(o=a[0],r[t]=e(a.slice(1)))}return o&&[o,"w",t[0],r]};return{a:{m:(e,t)=>{const n=e.w?y(e):e;return u(n,t)},z:s},p:(e,a)=>p(e.getCurrentTime(),t(a,["time"],l),n.p(e,a)),r:(e,t)=>{const a=(t.w?y(t):t)[1];return n.r(e,Object.keys(a).reduce((e,t)=>n.a.m(e,a[t]),n.a.z))},d:n.d.tw||{l:(e,a)=>{let i=n.d.l(e,a);return i&&[i[0],"w",...p(a.getCurrentTime(),t(e,["time"],l),i.slice(1))]},i:(e,t)=>{let a=Array.isArray(e)?e:[];return[a[2]||null,Object.keys(a[3]||{}).map(e=>({[e]:n.d.i(a[3][e],t)})).reduce((e,t)=>(Object.keys(t).forEach(n=>e[n]=t[n]),e),{})]},m:n.d.m&&d}}},vgw:function(e,n,a,i=o){const r={v:0,k:0};return{a:{m:(e,t)=>{var n=e.k+t.k;return{v:n?e.v+t.k*(t.v-e.v)/n:0,k:n}},z:r},p:(i,o)=>t(o,["name"])===e&&n(o)?{v:t(o,a),k:1}:r,r:(e,t)=>i(t.v),d:{l:i=>{return t(i,["name"])===e&&n(i)?0==(o=t(i,a))?["p3",1]:o<0?["p3",1,null,-o]:["p3",1,o]:null;var o},i:e=>{return e?Array.isArray(e)?{v:(((t=e.slice(1))[1]||0)-(t[2]||0))/(t[0]||1),k:t[0]||0}:void 0:r;var t}}}},vq:h}})()).q(cn.cw("Pageview",cn.t,cn.ge(1))),23972:cn.q(cn.cw("Pageview",cn.t,cn.ge(1))),24040:cn.q(cn.cw("Pageview",cn.pe(["geo_info","country"],"United States"),cn.ge(1))),24994:cn.q(cn.ocq(cn.ocq(cn.tw(cn.cw("LinkClick",cn.o([cn.os(cn.s,["dest_url"],["eco tourism","ecotourism","sustainable"])]),cn.ge(1)),36288e5),cn.tw(cn.cw("Pageview",cn.o([cn.os(cn.s,["article","name"],["eco","sustainable"])]),cn.ge(1)),48384e5)),cn.cw("Pageview",cn.pe(["categorySlug"],"sustainable-travel"),cn.ge(2)))),24995:cn.q(cn.cw("LinkClick",cn.ps(["dest_url"],"shop"),cn.ge(1))),24996:cn.q(cn.cw("LinkClick",cn.ps(["dest_url"],"thorntree"),cn.ge(1))),24997:cn.q(cn.ocq(cn.ocq(cn.cw("LinkClick",cn.pe(["dest_url"],"family"),cn.ge(1)),cn.scq(cn.cw("PageviewComplete",cn.a([cn.ps(["article","name"],"family"),cn.pge(["aggregations","PageviewEngagement","engaged_time"],5)])),cn.vq(cn.sw("PageviewEngagement",cn.ps(["article","name"],"family"),["properties","engaged_time"],cn.ge(5))),cn.ge(2))),cn.cw("Pageview",cn.o([cn.os(cn.e,["categorySlug"],["family-holidays","family-travel-snaps"])]),cn.ge(2)))),24998:cn.q(cn.cw("Pageview",cn.a([cn.pe(["geo_info","country"],"United States"),cn.ps(["client","url"],"europe")]),cn.ge(1))),25e3:cn.q(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"hotels"),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25002:cn.q(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"attractions"),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25003:cn.q(cn.cw("Pageview",cn.a([cn.o([cn.os(cn.s,["client","url"],["eating","restaurants"])]),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25004:cn.q(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"tours"),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25005:cn.q(cn.scq(cn.sq(cn.sw("PageviewComplete",cn.t,["properties","aggregations","PageviewEngagement","engaged_time"])),cn.vq(cn.sw("PageviewEngagement",cn.t,["properties","engaged_time"])),cn.ge(30))),25007:cn.q(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"sport"),cn.nt(cn.ps(["client","url"],"hotels")),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25009:cn.q(cn.cw("Pageview",cn.a([cn.o([cn.os(cn.s,["client","url"],["flights","travel-insurance","bookings"])]),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25010:cn.q(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"video"),cn.pe(["geo_info","country"],"United States")]),cn.ge(1))),25141:cn.q(cn.cw("Pageview",cn.ps(["client","url"],"croatia"),cn.ge(1))),26377:cn.q(cn.cw("Pageview",cn.ps(["client","url"],"luxury"),cn.ge(1))),26385:cn.q(cn.itp("eyeota","13438",!1,"26385")),38322:cn.q(cn.cw("Pageview",cn.t,cn.ge(1))),46274:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","1662",!1,"46274"),cn.itp("eyeota","324",!1,"46274")),cn.itp("eyeota","35799",!1,"46274")),cn.itp("eyeota","35804",!1,"46274")),cn.itp("eyeota","1664",!1,"46274")),cn.itp("liveramp_IPSOS","1002008356",!1,"46274")),cn.itp("eyeota_onaudience","15124",!1,"46274")),cn.itp("eyeota","35797",!1,"46274")),cn.itp("eyeota","35423",!1,"46274")),cn.itp("eyeota","35801",!1,"46274")),cn.itp("eyeota_experian","28011",!1,"46274")),cn.itp("eyeota_onaudience","15128",!1,"46274")),cn.itp("eyeota_onaudience","15127",!1,"46274")),cn.itp("eyeota_dataxpand","29634",!1,"46274")),cn.itp("eyeota_dataxpand","29633",!1,"46274")),cn.itp("eyeota_experian","22122",!1,"46274")),cn.itp("eyeota_experian","22126",!1,"46274")),cn.itp("eyeota_experian","22124",!1,"46274")),cn.itp("eyeota_experian","22127",!1,"46274")),cn.itp("eyeota_experian","22125",!1,"46274")),cn.itp("eyeota_experian","22127",!1,"46274")),cn.itp("eyeota_experian","22123",!1,"46274")),cn.itp("eyeota","35803",!1,"46274")),cn.itp("eyeota","35804",!1,"46274")),cn.itp("eyeota","35799",!1,"46274")),cn.itp("eyeota","35798",!1,"46274")),cn.itp("eyeota_experian","22832",!1,"46274")),cn.itp("eyeota_experian","22833",!1,"46274")),cn.itp("eyeota_experian","22834",!1,"46274")),cn.itp("eyeota","13038",!1,"46274")),cn.itp("eyeota_dataxpand","29626",!1,"46274")),cn.itp("eyeota","1662",!1,"46274")),cn.itp("eyeota","322",!1,"46274"))),46461:cn.q(cn.cw("Pageview",cn.o([cn.af_l(["properties","articles"],cn.ge(1),cn.o([cn.c_(["tags"],"Food"),cn.c_(["tags"],"Wine"),cn.c_(["tags"],"Cocktails"),cn.c_(["tags"],"Cooking & Recipes"),cn.c_(["tags"],"Beer"),cn.c_(["tags"],"Vegetarian & Vegan"),cn.c_(["tags"],"Sweets & Desserts")])),cn.ps(["categorySlug"],"food-and-drink"),cn.os(cn.s,["article","title"],["food","drink","wine","beer","beverage","restaurant","foodie","cocktail","alcohol","meal","recipe","cook","chef","bar"]),cn.os(cn.s,["article","name"],["food","drink","wine","beer","beverage","restaurant","foodie","cocktail","alcohol","meal","recipe","cook","chef","bar"])]),cn.ge(1))),46462:cn.q(cn.tw(cn.cw("Pageview",cn.a([cn.pe(["geo_info","country"],"United States"),cn.af_l(["properties","destinations"],cn.ge(1),cn.e_(["continent"],"europe"))]),cn.ge(3)),2592e6)),47082:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15147",!1,"47082"),cn.itp("eyeota","35639",!1,"47082")),cn.itp("eyeota","35925",!1,"47082")),cn.itp("eyeota","35932",!1,"47082")),cn.itp("eyeota_statsocial","23257",!1,"47082")),cn.itp("eyeota_bombora","14386",!1,"47082")),cn.itp("eyeota_dataxpand","14670",!1,"47082")),cn.itp("eyeota_onaudience","15166",!1,"47082")),cn.itp("eyeota_dataxpand","14572",!1,"47082")),cn.itp("eyeota","35928",!1,"47082")),cn.itp("eyeota","35930",!1,"47082")),cn.itp("eyeota","35927",!1,"47082")),cn.itp("eyeota_onaudience","15072",!1,"47082")),cn.itp("eyeota","1635",!1,"47082")),cn.itp("eyeota_experian","27996",!1,"47082"))),47083:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","35925",!1,"47083"),cn.itp("eyeota","35932",!1,"47083")),cn.itp("eyeota_statsocial","23257",!1,"47083")),cn.itp("eyeota_bombora","14386",!1,"47083")),cn.itp("eyeota_onaudience","15166",!1,"47083")),cn.itp("eyeota_dataxpand","14572",!1,"47083")),cn.itp("eyeota","35928",!1,"47083")),cn.itp("eyeota","35930",!1,"47083")),cn.itp("eyeota","35927",!1,"47083")),cn.itp("eyeota_onaudience","15072",!1,"47083")),cn.itp("eyeota","1635",!1,"47083")),cn.itp("eyeota_experian","27996",!1,"47083")),cn.itp("eyeota_experian","28015",!1,"47083")),cn.itp("eyeota","35866",!1,"47083")),cn.itp("eyeota_experian","30264",!1,"47083")),cn.itp("eyeota_dataxpand","29585",!1,"47083")),cn.itp("eyeota_bombora","14384",!1,"47083")),cn.itp("eyeota_experian","30639",!1,"47083")),cn.itp("eyeota_onaudience","15206",!1,"47083")),cn.itp("eyeota","13438",!1,"47083")),cn.itp("eyeota","1574",!1,"47083")),cn.itp("eyeota","1728",!1,"47083"))),47174:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.tw(cn.cw("Pageview",cn.o([cn.os(cn.s,["article","name"],["disney","orlando","theme park","theme parks","magic kingdom","universal studios","epcot","disneyland"]),cn.os(cn.s,["article","title"],["disney","orlando","theme park","theme parks","magic kingdom","universal studios","epcot","disneyland"]),cn.ps(["content","city"],"orlando"),cn.os(cn.s,["categorySlug"],["theme park","theme parks","orlando","disney","disneyland"]),cn.af_u(["properties","destinations"],cn.s_(["city"],"orlando")),cn.ps(["place","city"],"orlando"),cn.ps(["place","destination"],"orlando"),cn.ps(["content","city"],"orlando"),cn.os(cn.s,["pageSlug"],["disney","disneyland","orlando","theme park","theme parks","magic kingdom","epcot"])]),cn.ge(1)),145152e5),cn.itp("eyeota_onaudience","28534",!1,"47174")),cn.itp("liveramp_PlaceIQ","1002440486",!1,"47174")),cn.itp("liveramp_PlaceIQ","1002440476",!1,"47174")),cn.itp("liveramp_PlaceIQ","1002440496",!1,"47174")),cn.itp("eyeota","1541",!1,"47174"))),47281:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.os(cn.s,["categorySlug"],["tech","technology","Digital"])]),cn.ge(1)),7776e6)),47282:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15092",!1,"47282"),cn.itp("eyeota_dataxpand","14736",!1,"47282")),cn.itp("eyeota_onaudience","15186",!1,"47282")),cn.itp("eyeota_experian","28024",!1,"47282")),cn.itp("eyeota_onaudience","15199",!1,"47282")),cn.itp("eyeota_mastercard","41904",!1,"47282")),cn.itp("eyeota_dataxpand","14692",!1,"47282")),cn.itp("liveramp_IPSOS","1002977076",!1,"47282")),cn.itp("eyeota_experian","22594",!1,"47282")),cn.itp("eyeota_experian","22597",!1,"47282")),cn.itp("eyeota_experian","22595",!1,"47282")),cn.itp("eyeota_statsocial","23311",!1,"47282")),cn.itp("eyeota_bombora","13935",!1,"47282")),cn.itp("eyeota_bombora","14174",!1,"47282")),cn.itp("eyeota_onaudience","15199",!1,"47282")),cn.itp("eyeota_stirista","32930",!1,"47282")),cn.itp("eyeota","1504",!1,"47282")),cn.itp("eyeota","37",!1,"47282")),cn.itp("eyeota","6591",!1,"47282")),cn.itp("eyeota","35282",!1,"47282")),cn.itp("eyeota","12932",!1,"47282")),cn.itp("eyeota","35300",!1,"47282")),cn.itp("eyeota_experian","30614",!1,"47282")),cn.itp("eyeota_experian","30616",!1,"47282")),cn.itp("liveramp_IPSOS","1003133196",!1,"47282")),cn.itp("eyeota","50",!1,"47282")),cn.itp("eyeota_mastercard","41864",!1,"47282")),cn.itp("liveramp_IPSOS","1003133026",!1,"47282")),cn.itp("eyeota_bombora","14195",!1,"47282")),cn.itp("liveramp_PlaceIQ","1002437646",!1,"47282")),cn.itp("liveramp_IPSOS","1002976936",!1,"47282"))),47292:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.cw("Pageview",cn.o([cn.os(cn.e,["categorySlug"],["luxury-travel","shopping","beaches-and-islands","romance-travel"]),cn.pe(["siteSection"],"bookings")]),cn.ge(1)),cn.itp("eyeota","35944",!1,"47292")),cn.itp("eyeota","35796",!1,"47292")),cn.itp("eyeota","35848",!1,"47292")),cn.itp("eyeota","36003",!1,"47292")),cn.itp("eyeota_statsocial","23345",!1,"47292")),cn.itp("eyeota","13438",!1,"47292")),cn.itp("eyeota","1659",!1,"47292")),cn.itp("eyeota","1574",!1,"47292")),cn.itp("eyeota_experian","16866",!1,"47292")),cn.itp("liveramp_IPSOS","1004367559",!1,"47292")),cn.itp("eyeota_dataxpand","14511",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445206",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445196",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445216",!1,"47292")),cn.itp("eyeota","36020",!1,"47292")),cn.itp("eyeota","36001",!1,"47292")),cn.itp("eyeota","13443",!1,"47292")),cn.itp("eyeota_dataxpand","14746",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002444916",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445666",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002444506",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002444596",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445376",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445206",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002444316",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002445786",!1,"47292")),cn.itp("liveramp_PlaceIQ","1002444656",!1,"47292")),cn.itp("eyeota_dataxpand","14742",!1,"47292")),cn.itp("eyeota_dataxpand","14746",!1,"47292")),cn.itp("eyeota_mastercard","40951",!1,"47292")),cn.itp("eyeota_mastercard","40928",!1,"47292")),cn.itp("eyeota_onaudience","15010",!1,"47292")),cn.itp("eyeota_onaudience","15205",!1,"47292"))),47296:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.pe(["pageSlug"],"north-america"),cn.af_u(["properties","destinations"],cn.e_(["continent"],"north-america")),cn.pe(["place","continent"],"north-america")]),cn.ge(1)),2592e6)),47297:cn.q(cn.itp("eyeota","331",!1,"47297")),47628:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["content","continent"],"antarctica"),cn.af_u(["properties","destinations"],cn.e_(["continent"],"antarctica"))]),cn.ge(1)),2592e6)),47650:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","30136",!1,"47650"),cn.itp("liveramp_PlaceIQ","1002615626",!1,"47650")),cn.itp("liveramp_PlaceIQ","1002437036",!1,"47650")),cn.itp("eyeota_mastercard","41789",!1,"47650")),cn.itp("comscore","318246US",!1,"47650")))),47651:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14300",!1,"47651"),cn.itp("eyeota_stirista","26141",!1,"47651")),cn.itp("eyeota","35436",!1,"47651")),cn.itp("eyeota","6681",!1,"47651")),cn.itp("eyeota","301",!1,"47651")),cn.itp("eyeota","243",!1,"47651")),cn.itp("eyeota_mastercard","41860",!1,"47651")),cn.itp("eyeota_experian","21467",!1,"47651")),cn.itp("eyeota_dataxpand","14507",!1,"47651")),cn.itp("eyeota_onaudience","14931",!1,"47651")),cn.itp("eyeota_onaudience","14933",!1,"47651")),cn.itp("eyeota_onaudience","14934",!1,"47651")),cn.itp("eyeota_onaudience","14932",!1,"47651"))),47652:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14299",!1,"47652"),cn.itp("eyeota_stirista","26140",!1,"47652")),cn.itp("eyeota","35435",!1,"47652")),cn.itp("eyeota","300",!1,"47652")),cn.itp("eyeota","6680",!1,"47652")),cn.itp("eyeota","242",!1,"47652")),cn.itp("eyeota_mastercard","41859",!1,"47652")),cn.itp("eyeota_experian","21466",!1,"47652")),cn.itp("eyeota_dataxpand","14506",!1,"47652")),cn.itp("eyeota_dataxpand","14794",!1,"47652")),cn.itp("eyeota_onaudience","14929",!1,"47652")),cn.itp("eyeota_onaudience","14927",!1,"47652")),cn.itp("eyeota_onaudience","14925",!1,"47652")),cn.itp("eyeota_onaudience","14926",!1,"47652")),cn.itp("eyeota_onaudience","14928",!1,"47652"))),47653:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.e_(["continent"],"europe")),cn.ge(1)),2592e6)),47654:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.os(cn.s,["categorySlug"],["asia","pacific"]),cn.os(cn.e,["content","continent"],["asia","Asia"]),cn.os(cn.s,["content","region"],["southeast-asia","asia"]),cn.os(cn.e,["place","ctt"],["asia","pacific"]),cn.pe(["place","continent"],"asia"),cn.af_u(["properties","destinations"],cn.o([cn.s_(["continent"],"asia"),cn.s_(["continent"],"Asia")])),cn.os(cn.s,["pageSlug"],["asia","pacific"]),cn.os(cn.s,["place","region"],["asia","pacific"]),cn.os(cn.s,["slug"],["asia","pacific"]),cn.os(cn.s,["place","slug"],["asia","pacific"])]),cn.ge(1)),2592e6)),47721:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.o([cn.s_(["country"],"england"),cn.s_(["country"],"united-kingdom"),cn.s_(["country"],"united kingdom")])),cn.ge(1)),2592e6)),47723:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"italy")),cn.ge(1)),2592e6)),47730:cn.q(cn.itp("eyeota","332",!1,"47730")),47733:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.pe(["pageSlug"],"canada"),cn.pe(["place","country"],"canada"),cn.af_u(["properties","destinations"],cn.e_(["country"],"canada"))]),cn.ge(1)),2592e6)),47734:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.pe(["pageSlug"],"usa"),cn.pe(["place","country"],"usa"),cn.af_u(["properties","destinations"],cn.e_(["country"],"usa"))]),cn.ge(1)),2592e6)),47736:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.pe(["place","country"],"mexico"),cn.pe(["pageSlug"],"mexico"),cn.af_u(["properties","destinations"],cn.e_(["country"],"mexico"))]),cn.ge(1)),2592e6)),47749:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("liveramp_PlaceIQ","1002437046",!1,"47749"),cn.itp("eyeota_mastercard","41790",!1,"47749")),cn.itp("eyeota_experian","41311",!1,"47749")),cn.itp("comscore","225346US",!1,"47749")),cn.itp("comscore","325346US",!1,"47749")),cn.itp("comscore","125346US",!1,"47749")))),47750:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.itp("liveramp_PlaceIQ","1002437056",!1,"47750"),cn.itp("eyeota_mastercard","41791",!1,"47750")),cn.itp("eyeota_experian","41312",!1,"47750")))),47751:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.itp("liveramp_PlaceIQ","1002437066",!1,"47751"),cn.itp("eyeota_mastercard","41792",!1,"47751")),cn.itp("eyeota_experian","41313",!1,"47751")))),47752:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.itp("liveramp_PlaceIQ","1002437076",!1,"47752"),cn.itp("eyeota_experian","41314",!1,"47752")))),47753:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","30143",!1,"47753"),cn.itp("eyeota_experian","30142",!1,"47753")),cn.itp("eyeota_experian","30141",!1,"47753")),cn.itp("liveramp_PlaceIQ","1002437086",!1,"47753")),cn.itp("eyeota_experian","41316",!1,"47753")),cn.itp("eyeota_experian","41315",!1,"47753")))),47755:cn.q(cn.tw(cn.cw("Pageview",cn.a([cn.o([cn.os(cn.s,["geo_info","city"],["Orlando","Miami","New York City","Boston","Los Angeles"])]),cn.o([cn.os(cn.e,["categorySlug"],["food-and-drink","adventure-travel"])])]),cn.ge(1)),7776e6)),47756:cn.q(cn.acq(cn.tw(cn.cw("Pageview",cn.o([cn.os(cn.s,["geo_info","city"],["Miami","Orlando","Boston","New York City","Los Angeles"])]),cn.ge(1)),7776e6),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15206",!1,"47756"),cn.itp("eyeota_experian","27512",!1,"47756")),cn.itp("eyeota_dataxpand","14569",!1,"47756")),cn.itp("eyeota_statsocial","25932",!1,"47756")),cn.itp("eyeota_onaudience","15072",!1,"47756")),cn.itp("eyeota","1635",!1,"47756")),cn.itp("eyeota","35397",!1,"47756")),cn.itp("eyeota_experian","27996",!1,"47756")),cn.itp("eyeota_dataxpand","14672",!1,"47756")))),47846:cn.q(cn.acq(cn.tw(cn.cw("Pageview",cn.pe(["geo_info","country"],"United States"),cn.ge(1)),7776e6),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","324",!1,"47846"),cn.itp("eyeota_onaudience","14937",!1,"47846")),cn.itp("eyeota","324",!1,"47846")),cn.itp("eyeota","1664",!1,"47846")),cn.itp("eyeota_experian","22833",!1,"47846")),cn.itp("eyeota_experian","22124",!1,"47846")),cn.itp("eyeota_experian","22124",!1,"47846")),cn.itp("eyeota_experian","22125",!1,"47846")))),47862:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["content","continent"],"africa"),cn.ps(["place","continent"],"africa"),cn.ps(["place","ctt"],"africa"),cn.ps(["place","dest"],"africa"),cn.ps(["place","destination"],"africa"),cn.af_u(["properties","destinations"],cn.s_(["continent"],"africa"))]),cn.ge(1)),2592e6)),47863:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_stirista","26060",!1,"47863"),cn.itp("eyeota","35466",!1,"47863")),cn.itp("eyeota","35463",!1,"47863")),cn.itp("eyeota","35468",!1,"47863")),cn.itp("eyeota_experian","21461",!1,"47863")),cn.itp("liveramp_PlaceIQ","1002615596",!1,"47863"))),47864:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14287",!1,"47864"),cn.itp("eyeota_experian","21462",!1,"47864")),cn.itp("eyeota_experian","22988",!1,"47864")),cn.itp("eyeota","35471",!1,"47864"))),47865:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14288",!1,"47865"),cn.itp("eyeota","35470",!1,"47865")),cn.itp("eyeota_experian","21463",!1,"47865")),cn.itp("eyeota_experian","22989",!1,"47865")),cn.itp("eyeota_experian","41347",!1,"47865"))),47894:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"wales")),cn.ge(1)),2592e6)),47895:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"ireland")),cn.ge(1)),2592e6)),47896:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"spain")),cn.ge(1)),2592e6)),47897:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"greece")),cn.ge(1)),2592e6)),47898:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"germany")),cn.ge(1)),2592e6)),47899:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"scotland")),cn.ge(1)),2592e6)),47900:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"france")),cn.ge(1)),2592e6)),47901:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"portugal")),cn.ge(1)),2592e6)),47903:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"turkey")),cn.ge(1)),2592e6)),47917:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"india"),cn.pe(["content","country"],"india"),cn.pe(["place","country"],"india"),cn.ps(["place","destination"],"india"),cn.af_u(["properties","destinations"],cn.e_(["country"],"india")),cn.ps(["pageSlug"],"india"),cn.ps(["place","dest"],"india"),cn.ps(["slug"],"india")]),cn.ge(1)),2592e6)),47918:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.pe(["categorySlug"],"vietnam"),cn.pe(["content","country"],"vietnam"),cn.pe(["place","country"],"vietnam"),cn.pe(["place","destination"],"vietnam"),cn.af_u(["properties","destinations"],cn.e_(["country"],"vietnam")),cn.ps(["pageSlug"],"vietnam"),cn.pe(["place","dest"],"vietnam"),cn.ps(["slug"],"vietnam")]),cn.ge(1)),2592e6)),47919:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"japan"),cn.pe(["content","country"],"japan"),cn.pe(["place","country"],"japan"),cn.ps(["place","destination"],"japan"),cn.af_u(["properties","destinations"],cn.e_(["country"],"japan")),cn.ps(["pageSlug"],"japan"),cn.ps(["place","dest"],"japan"),cn.ps(["slug"],"japan")]),cn.ge(1)),2592e6)),47920:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"thailand"),cn.pe(["content","country"],"thailand"),cn.pe(["place","country"],"thailand"),cn.ps(["place","destination"],"thailand"),cn.af_u(["properties","destinations"],cn.e_(["country"],"thailand")),cn.ps(["pageSlug"],"thailand"),cn.ps(["place","dest"],"thailand"),cn.ps(["slug"],"thailand")]),cn.ge(1)),2592e6)),47921:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"china"),cn.pe(["content","country"],"china"),cn.pe(["place","country"],"china"),cn.ps(["place","destination"],"china"),cn.af_u(["properties","destinations"],cn.o([cn.e_(["country"],"china"),cn.e_(["country"],"China")])),cn.ps(["pageSlug"],"china"),cn.ps(["place","dest"],"china"),cn.ps(["slug"],"china")]),cn.ge(1)),2592e6)),47922:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"indonesia"),cn.pe(["content","country"],"indonesia"),cn.pe(["place","country"],"indonesia"),cn.ps(["place","destination"],"indonesia"),cn.af_u(["properties","destinations"],cn.e_(["country"],"indonesia")),cn.ps(["pageSlug"],"indonesia"),cn.ps(["place","dest"],"indonesia"),cn.ps(["slug"],"indonesia")]),cn.ge(1)),2592e6)),47923:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"philippines"),cn.pe(["content","country"],"philippines"),cn.pe(["place","country"],"philippines"),cn.ps(["place","destination"],"philippines"),cn.af_u(["properties","destinations"],cn.e_(["country"],"philippines")),cn.ps(["pageSlug"],"philippines"),cn.ps(["place","dest"],"philippines"),cn.ps(["slug"],"philippines")]),cn.ge(1)),2592e6)),47924:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"cambodia"),cn.pe(["content","country"],"cambodia"),cn.pe(["place","country"],"cambodia"),cn.ps(["place","destination"],"cambodia"),cn.af_u(["properties","destinations"],cn.e_(["country"],"cambodia")),cn.ps(["pageSlug"],"cambodia"),cn.ps(["place","dest"],"cambodia"),cn.ps(["slug"],"cambodia")]),cn.ge(1)),2592e6)),47925:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"malaysia"),cn.pe(["content","country"],"malaysia"),cn.pe(["place","country"],"malaysia"),cn.ps(["place","destination"],"malaysia"),cn.af_u(["properties","destinations"],cn.e_(["country"],"malaysia")),cn.ps(["pageSlug"],"malaysia"),cn.ps(["place","dest"],"malaysia"),cn.ps(["slug"],"malaysia")]),cn.ge(1)),2592e6)),47926:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"new-zealand"),cn.pe(["content","country"],"new-zealand"),cn.pe(["place","country"],"new-zealand"),cn.ps(["place","destination"],"new-zealand"),cn.af_u(["properties","destinations"],cn.e_(["country"],"new-zealand")),cn.ps(["pageSlug"],"new-zealand"),cn.ps(["place","dest"],"new-zealand"),cn.ps(["slug"],"new-zealand")]),cn.ge(1)),2592e6)),47929:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"tokyo"),cn.pe(["content","city"],"tokyo"),cn.ps(["place","destination"],"tokyo"),cn.af_u(["properties","destinations"],cn.e_(["city"],"tokyo")),cn.ps(["pageSlug"],"tokyo"),cn.ps(["place","dest"],"tokyo"),cn.ps(["slug"],"tokyo")]),cn.ge(1)),2592e6)),47930:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"bangkok"),cn.pe(["content","city"],"bangkok"),cn.ps(["place","destination"],"bangkok"),cn.af_u(["properties","destinations"],cn.e_(["city"],"bangkok")),cn.ps(["pageSlug"],"bangkok"),cn.ps(["place","dest"],"bangkok"),cn.ps(["slug"],"bangkok")]),cn.ge(1)),2592e6)),47931:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"hoi-an"),cn.pe(["content","city"],"hoi-an"),cn.ps(["place","destination"],"hoi-an"),cn.af_u(["properties","destinations"],cn.e_(["city"],"hoi-an")),cn.ps(["pageSlug"],"hoi-an"),cn.ps(["place","dest"],"hoi-an"),cn.ps(["slug"],"hoi-an")]),cn.ge(1)),2592e6)),47932:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"dubai"),cn.pe(["content","city"],"dubai"),cn.ps(["place","destination"],"dubai"),cn.af_u(["properties","destinations"],cn.e_(["city"],"dubai")),cn.ps(["pageSlug"],"dubai"),cn.ps(["place","dest"],"dubai"),cn.ps(["slug"],"dubai")]),cn.ge(1)),2592e6)),47933:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"seoul"),cn.pe(["content","city"],"seoul"),cn.ps(["place","destination"],"seoul"),cn.af_u(["properties","destinations"],cn.e_(["city"],"seoul")),cn.ps(["pageSlug"],"seoul"),cn.ps(["place","dest"],"seoul"),cn.ps(["slug"],"seoul")]),cn.ge(1)),2592e6)),47934:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"taipei"),cn.pe(["content","city"],"taipei"),cn.ps(["place","destination"],"taipei"),cn.af_u(["properties","destinations"],cn.e_(["city"],"taipei")),cn.ps(["pageSlug"],"taipei"),cn.ps(["place","dest"],"taipei"),cn.ps(["slug"],"taipei")]),cn.ge(1)),2592e6)),47935:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"kyoto"),cn.pe(["content","city"],"kyoto"),cn.ps(["place","destination"],"kyoto"),cn.af_u(["properties","destinations"],cn.e_(["city"],"kyoto")),cn.ps(["pageSlug"],"kyoto"),cn.ps(["place","dest"],"kyoto"),cn.ps(["slug"],"kyoto")]),cn.ge(1)),2592e6)),47936:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"hanoi"),cn.pe(["content","city"],"hanoi"),cn.ps(["place","destination"],"hanoi"),cn.af_u(["properties","destinations"],cn.e_(["city"],"hanoi")),cn.ps(["pageSlug"],"hanoi"),cn.ps(["place","dest"],"hanoi"),cn.ps(["slug"],"hanoi")]),cn.ge(1)),2592e6)),47937:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"delhi"),cn.pe(["content","city"],"delhi"),cn.ps(["place","destination"],"delhi"),cn.af_u(["properties","destinations"],cn.e_(["city"],"delhi")),cn.ps(["pageSlug"],"delhi"),cn.ps(["place","dest"],"delhi"),cn.ps(["slug"],"delhi")]),cn.ge(1)),2592e6)),47938:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"hong-kong"),cn.pe(["content","city"],"hong-kong"),cn.ps(["place","destination"],"hong-kong"),cn.af_u(["properties","destinations"],cn.e_(["city"],"hong-kong")),cn.ps(["pageSlug"],"hong-kong"),cn.ps(["place","dest"],"hong-kong"),cn.ps(["slug"],"hong-kong")]),cn.ge(1)),2592e6)),47939:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"singapore"),cn.pe(["content","country"],"singapore"),cn.pe(["place","country"],"singapore"),cn.ps(["place","destination"],"singapore"),cn.af_u(["properties","destinations"],cn.e_(["country"],"singapore")),cn.ps(["pageSlug"],"singapore"),cn.ps(["place","dest"],"singapore"),cn.ps(["slug"],"singapore")]),cn.ge(1)),2592e6)),47940:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["city"],"london")),cn.ge(1)),2592e6)),47941:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["city"],"paris")),cn.ge(1)),2592e6)),47942:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["city"],"rome")),cn.ge(1)),2592e6)),47943:cn.q(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14303",!1,"47943"),cn.itp("eyeota","238",!1,"47943")),cn.itp("eyeota_experian","23018",!1,"47943"))),47944:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_bombora","14306",!1,"47944"),cn.itp("eyeota_bombora","14301",!1,"47944")),cn.itp("liveramp_PlaceIQ","1002437396",!1,"47944")),cn.itp("liveramp_PlaceIQ","1002437406",!1,"47944")),cn.itp("eyeota_stirista","26066",!1,"47944"))),47945:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","302",!1,"47945"),cn.itp("eyeota_bombora","14304",!1,"47945")),cn.itp("eyeota","6684",!1,"47945")),cn.itp("eyeota","35590",!1,"47945"))),48010:cn.q(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["categorySlug"],"australia"),cn.ps(["content","country"],"australia"),cn.af_u(["properties","destinations"],cn.s_(["country"],"australia")),cn.ps(["pageSlug"],"australia")]),cn.ge(1)),7776e6)),48261:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.e_(["region"],"new-south-wales")),cn.ge(1)),7776e6)),48262:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["region"],"queensland")),cn.ge(1)),7776e6)),48263:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["region"],"northern-territory"),cn.s_(["country"],"australia")),cn.ge(1)),7776e6)),48264:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.e_(["region"],"western-australia")),cn.ge(1)),7776e6)),48265:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.e_(["region"],"south-australia")),cn.ge(1)),7776e6)),48266:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["region"],"victoria")),cn.ge(1)),7776e6)),48267:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["region"],"tasmania")),cn.ge(1)),7776e6)),48309:cn.q(cn.tw(cn.cw("Pageview",cn.pe(["geo_info","country"],"Ireland"),cn.ge(1)),7776e6)),49048:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"nigeria")),cn.ge(1)),2592e6)),49050:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"tanzania")),cn.ge(1)),2592e6)),49052:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"ghana")),cn.ge(1)),2592e6)),49089:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"kenya")),cn.ge(1)),2592e6)),49109:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["city"],"sydney")),cn.ge(1)),7776e6)),49149:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["city"],"melbourne")),cn.ge(1)),7776e6)),50432:cn.q(cn.acq(cn.tw(cn.cw("Pageview",cn.pe(["geo_info","country"],"United Kingdom"),cn.ge(1)),7776e6),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_statsocial","23277",!1,"50432"),cn.itp("eyeota","1696",!1,"50432")),cn.itp("eyeota_experian","22847",!1,"50432")),cn.itp("eyeota_dataxpand","29624",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440206",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440196",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440216",!1,"50432")),cn.itp("eyeota_experian","39426",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440136",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440116",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440036",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440026",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440096",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440086",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440106",!1,"50432")),cn.itp("liveramp_PlaceIQ","1002440016",!1,"50432")),cn.itp("eyeota_dataxpand","29624",!1,"50432")),cn.itp("eyeota_experian","39467",!1,"50432")),cn.itp("eyeota_experian","39469",!1,"50432")),cn.itp("eyeota_experian","22612",!1,"50432")),cn.itp("eyeota_dataxpand","29625",!1,"50432")),cn.itp("eyeota_experian","39471",!1,"50432")),cn.itp("eyeota_experian","39466",!1,"50432")),cn.itp("eyeota_experian","39466",!1,"50432")),cn.itp("eyeota_experian","39472",!1,"50432")),cn.itp("eyeota_experian","17105",!1,"50432")),cn.itp("eyeota","35849",!1,"50432")),cn.itp("eyeota","1536",!1,"50432")),cn.itp("liveramp_PlaceIQ","1004245449",!1,"50432")),cn.itp("liveramp_PlaceIQ","1004245429",!1,"50432")),cn.itp("liveramp_PlaceIQ","1004245439",!1,"50432")),cn.itp("eyeota_onaudience","28522",!1,"50432")),cn.itp("eyeota_onaudience","28519",!1,"50432")),cn.itp("eyeota_onaudience","28521",!1,"50432")),cn.itp("eyeota_onaudience","28523",!1,"50432")),cn.itp("eyeota_experian","22267",!1,"50432")),cn.itp("eyeota_experian","22265",!1,"50432")),cn.itp("eyeota_experian","22264",!1,"50432")),cn.itp("eyeota_experian","22268",!1,"50432")),cn.itp("eyeota_experian","22120",!1,"50432")),cn.itp("eyeota_experian","22121",!1,"50432")),cn.itp("eyeota_bombora","14395",!1,"50432")),cn.itp("eyeota_bombora","14390",!1,"50432")),cn.itp("eyeota_bombora","14396",!1,"50432")),cn.itp("eyeota_bombora","14392",!1,"50432")),cn.itp("eyeota_bombora","14397",!1,"50432")),cn.itp("eyeota_bombora","14389",!1,"50432")),cn.itp("eyeota_bombora","14393",!1,"50432")),cn.itp("eyeota_bombora","14391",!1,"50432")),cn.itp("eyeota_onaudience","14998",!1,"50432")),cn.itp("eyeota_onaudience","14997",!1,"50432")),cn.itp("eyeota_onaudience","14996",!1,"50432")))),50438:cn.q(cn.tw(cn.cw("Pageview",cn.a([cn.pe(["geo_info","country"],"United Kingdom"),cn.o([cn.os(cn.s,["categorySlug"],["adventure-travel","explore","wildlife-and-nature","sports-fitness"])])]),cn.ge(1)),7776e6)),50442:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"ethiopia")),cn.ge(1)),2592e6)),50443:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"mauritius")),cn.ge(1)),2592e6)),50444:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"egypt")),cn.ge(1)),2592e6)),50445:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.s_(["country"],"morocco")),cn.ge(1)),2592e6)),50446:cn.q(cn.tw(cn.cw("Pageview",cn.af_u(["properties","destinations"],cn.o([cn.s_(["country"],"south-africa"),cn.s_(["country"],"south africa"),cn.s_(["country"],"south_africa")])),cn.ge(1)),2592e6)),50562:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","10185",!1,"50562"),cn.itp("eyeota_onaudience","14977",!1,"50562")),cn.itp("eyeota","35721",!1,"50562")),cn.itp("eyeota_onaudience","15041",!1,"50562"))),50563:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","35461",!1,"50563"),cn.itp("eyeota_statsocial","23114",!1,"50563")),cn.itp("eyeota_experian","30509",!1,"50563")),cn.itp("eyeota","6699",!1,"50563")),cn.itp("eyeota","6700",!1,"50563")),cn.itp("eyeota","6701",!1,"50563")),cn.itp("eyeota","13039",!1,"50563")),cn.itp("eyeota_mastercard","41854",!1,"50563")),cn.itp("liveramp_PlaceIQ","1002440796",!1,"50563")),cn.itp("liveramp_PlaceIQ","1002615636",!1,"50563")),cn.itp("eyeota_experian","30158",!1,"50563")),cn.itp("liveramp_PlaceIQ","1002437116",!1,"50563")),cn.itp("liveramp_PlaceIQ","1002437136",!1,"50563")),cn.itp("eyeota","35462",!1,"50563")),cn.itp("eyeota","35465",!1,"50563")),cn.itp("eyeota","35464",!1,"50563")),cn.itp("eyeota","35463",!1,"50563"))),50564:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","35998",!1,"50564"),cn.itp("eyeota","35940",!1,"50564")),cn.itp("eyeota","13440",!1,"50564")),cn.itp("liveramp_PlaceIQ","1002444666",!1,"50564")),cn.itp("eyeota_experian","30632",!1,"50564")),cn.itp("eyeota_experian","22962",!1,"50564"))),50635:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","22873",!1,"50635"),cn.itp("eyeota_experian","22043",!1,"50635")),cn.itp("eyeota_experian","22044",!1,"50635")),cn.itp("eyeota_dataxpand","14742",!1,"50635")),cn.itp("eyeota_dataxpand","14749",!1,"50635")),cn.itp("eyeota_dataxpand","14747",!1,"50635")),cn.itp("eyeota_experian","27575",!1,"50635")),cn.itp("eyeota_dataxpand","14748",!1,"50635")),cn.itp("eyeota_dataxpand","14743",!1,"50635")),cn.itp("eyeota_dataxpand","14746",!1,"50635")),cn.itp("eyeota_experian","22872",!1,"50635")))),50692:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","13439",!1,"50692"),cn.itp("eyeota","1543",!1,"50692")),cn.itp("eyeota","13439",!1,"50692")),cn.itp("eyeota_experian","22961",!1,"50692")),cn.itp("eyeota_dataxpand","14744",!1,"50692")),cn.itp("eyeota","6739",!1,"50692")),cn.itp("liveramp_PlaceIQ","1002444496",!1,"50692")),cn.itp("liveramp_PlaceIQ","1002444516",!1,"50692")),cn.itp("liveramp_PlaceIQ","1002444506",!1,"50692")),cn.itp("liveramp_IPSOS","1004367549",!1,"50692")),cn.itp("liveramp_IPSOS","1004367539",!1,"50692")),cn.itp("eyeota_experian","22035",!1,"50692"))),50702:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","13438",!1,"50702"),cn.itp("eyeota","1574",!1,"50702")),cn.itp("eyeota","1728",!1,"50702")),cn.itp("eyeota_mastercard","19553",!1,"50702")),cn.itp("eyeota_mastercard","19512",!1,"50702")),cn.itp("eyeota","36003",!1,"50702")),cn.itp("eyeota","35944",!1,"50702")),cn.itp("eyeota_statsocial","23345",!1,"50702")),cn.itp("liveramp_PlaceIQ","1002445216",!1,"50702")),cn.itp("liveramp_PlaceIQ","1002445196",!1,"50702")),cn.itp("liveramp_PlaceIQ","1002445486",!1,"50702")),cn.itp("eyeota","35944",!1,"50702")),cn.itp("eyeota_statsocial","23345",!1,"50702")),cn.itp("liveramp_PlaceIQ","1002445486",!1,"50702")),cn.itp("eyeota_experian","16866",!1,"50702")),cn.itp("liveramp_IPSOS","1004367559",!1,"50702")))),50712:cn.q(cn.acq(cn.cw("Pageview",cn.t,cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_dataxpand","29622",!1,"50712"),cn.itp("eyeota_mastercard","41861",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440136",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440116",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440036",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440026",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440146",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440126",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440046",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440096",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440086",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440106",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440016",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440156",!1,"50712")),cn.itp("eyeota_dataxpand","14574",!1,"50712")),cn.itp("eyeota_experian","22847",!1,"50712")),cn.itp("eyeota_experian","39467",!1,"50712")),cn.itp("eyeota_dataxpand","29624",!1,"50712")),cn.itp("eyeota_experian","39471",!1,"50712")),cn.itp("eyeota_experian","39466",!1,"50712")),cn.itp("eyeota_experian","39472",!1,"50712")),cn.itp("eyeota_experian","17105",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440206",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440196",!1,"50712")),cn.itp("liveramp_PlaceIQ","1002440216",!1,"50712")),cn.itp("eyeota_experian","39426",!1,"50712")),cn.itp("eyeota_experian","22120",!1,"50712")),cn.itp("eyeota_experian","22121",!1,"50712")))),50713:cn.q(cn.acq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15092",!1,"50713"),cn.itp("eyeota_dataxpand","14736",!1,"50713")),cn.itp("eyeota_onaudience","15186",!1,"50713")),cn.itp("eyeota_experian","28024",!1,"50713")),cn.itp("eyeota_onaudience","15199",!1,"50713")),cn.itp("eyeota_mastercard","41904",!1,"50713")),cn.itp("eyeota_dataxpand","14692",!1,"50713")),cn.itp("liveramp_IPSOS","1002977076",!1,"50713")),cn.itp("eyeota_experian","22594",!1,"50713")),cn.itp("eyeota_experian","22597",!1,"50713")),cn.itp("eyeota_experian","22595",!1,"50713")),cn.itp("eyeota_statsocial","23311",!1,"50713")),cn.itp("eyeota_bombora","13935",!1,"50713")),cn.itp("eyeota_bombora","14174",!1,"50713")),cn.itp("eyeota_onaudience","15199",!1,"50713")),cn.itp("eyeota_stirista","32930",!1,"50713")),cn.itp("eyeota","1504",!1,"50713")),cn.itp("eyeota","37",!1,"50713")),cn.itp("eyeota","6591",!1,"50713")),cn.itp("eyeota","35282",!1,"50713")),cn.itp("eyeota","12932",!1,"50713")),cn.itp("eyeota","35300",!1,"50713")),cn.itp("eyeota_experian","30614",!1,"50713")),cn.itp("eyeota_experian","30616",!1,"50713")),cn.itp("liveramp_IPSOS","1003133196",!1,"50713")),cn.itp("eyeota","50",!1,"50713")),cn.itp("eyeota_mastercard","41864",!1,"50713")),cn.itp("liveramp_IPSOS","1003133026",!1,"50713")),cn.itp("eyeota_bombora","14195",!1,"50713")),cn.itp("liveramp_PlaceIQ","1002437646",!1,"50713")),cn.itp("liveramp_IPSOS","1002976936",!1,"50713")),cn.tw(cn.cw("Pageview",cn.t,cn.ge(1)),2592e6))),51619:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.cw("Pageview",cn.o([cn.os(cn.s,["pageSlug"],["family","nomad","nomadic","road trip","road-trip","road-trips","road trips","rv","rving"])]),cn.ge(1)),cn.itp("eyeota","34743",!1,"51619")),cn.itp("eyeota","34666",!1,"51619")),cn.itp("eyeota","34666",!1,"51619")),cn.itp("eyeota","12770",!1,"51619"))),51645:cn.q(cn.ocq(cn.ocq(cn.tw(cn.cw("Pageview",cn.a([cn.af_u(["properties","pois"],cn.s_(["type"],"hotels")),cn.af_u(["properties","destinations"],cn.s_(["city"],"orlando"))]),cn.ge(1)),7776e6),cn.tw(cn.cw("Pageview",cn.a([cn.af_u(["properties","pois"],cn.s_(["type"],"hotels")),cn.af_u(["properties","destinations"],cn.s_(["region"],"orlando"))]),cn.ge(1)),2592e6)),cn.tw(cn.cw("Pageview",cn.a([cn.ps(["client","url"],"hotels"),cn.af_u(["properties","destinations"],cn.s_(["city"],"orlando"))]),cn.ge(1)),2592e6))),52010:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","36000",!1,"52010"),cn.itp("eyeota_experian","27619",!1,"52010")),cn.itp("eyeota","13435",!1,"52010")),cn.itp("eyeota_dataxpand","14575",!1,"52010")),cn.itp("eyeota","326",!1,"52010"))),52012:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","35571",!1,"52012"),cn.itp("eyeota","35564",!1,"52012")),cn.itp("eyeota_onaudience","15016",!1,"52012")),cn.itp("eyeota_experian","27618",!1,"52012")),cn.itp("eyeota_onaudience","15141",!1,"52012"))),52013:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","35938",!1,"52013"),cn.itp("eyeota_experian","27615",!1,"52013")),cn.itp("eyeota_experian","30568",!1,"52013")),cn.itp("eyeota","1542",!1,"52013"))),52096:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15206",!1,"52096"),cn.itp("eyeota_experian","27512",!1,"52096")),cn.itp("eyeota_dataxpand","14569",!1,"52096")),cn.itp("eyeota_statsocial","25932",!1,"52096")),cn.itp("eyeota_experian","16864",!1,"52096"))),52097:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","36012",!1,"52097"),cn.itp("eyeota","1560",!1,"52097")),cn.itp("eyeota","35990",!1,"52097")),cn.itp("eyeota","13429",!1,"52097")),cn.itp("eyeota","13437",!1,"52097")),cn.itp("eyeota_experian","21417",!1,"52097")),cn.itp("eyeota_experian","21415",!1,"52097")),cn.itp("eyeota_experian","21416",!1,"52097")),cn.itp("eyeota_experian","39804",!1,"52097")),cn.itp("eyeota_dataxpand","14572",!1,"52097")),cn.itp("eyeota_experian","39816",!1,"52097")),cn.itp("eyeota_dataxpand","29622",!1,"52097")),cn.itp("eyeota_mastercard","41861",!1,"52097")),cn.itp("eyeota_onaudience","15072",!1,"52097")),cn.itp("eyeota_mastercard","41867",!1,"52097")),cn.itp("eyeota_experian","27996",!1,"52097")),cn.itp("eyeota","1635",!1,"52097")),cn.itp("eyeota_bombora","14376",!1,"52097")),cn.itp("eyeota_onaudience","15076",!1,"52097")),cn.itp("eyeota","1645",!1,"52097")),cn.itp("eyeota_experian","22821",!1,"52097"))),52388:cn.q(cn.acq(cn.cw("Pageview",cn.ps(["geo_info","country"],"United Kingdom"),cn.ge(1)),cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","22872",!1,"52388"),cn.itp("eyeota_experian","27573",!1,"52388")),cn.itp("eyeota_dataxpand","14746",!1,"52388")),cn.itp("eyeota_experian","22031",!1,"52388")),cn.itp("eyeota_experian","22032",!1,"52388")),cn.itp("eyeota_dataxpand","14745",!1,"52388")),cn.itp("eyeota_statsocial","23136",!1,"52388")),cn.itp("eyeota","1467",!1,"52388")),cn.itp("eyeota","35702",!1,"52388")),cn.itp("eyeota_mastercard","41088",!1,"52388")),cn.itp("eyeota_statsocial","23338",!1,"52388")),cn.itp("eyeota_dataxpand","14743",!1,"52388")),cn.itp("eyeota_mastercard","41003",!1,"52388")),cn.itp("eyeota_mastercard","41586",!1,"52388")),cn.itp("eyeota_mastercard","41161",!1,"52388")),cn.itp("eyeota_mastercard","40928",!1,"52388")),cn.itp("eyeota_mastercard","41527",!1,"52388")),cn.itp("eyeota_mastercard","41527",!1,"52388")),cn.itp("eyeota_mastercard","41102",!1,"52388")),cn.itp("eyeota_experian","30562",!1,"52388")),cn.itp("eyeota_experian","30587",!1,"52388")),cn.itp("eyeota_mastercard","39126",!1,"52388")),cn.itp("eyeota_mastercard","39153",!1,"52388")),cn.itp("eyeota_mastercard","39160",!1,"52388")),cn.itp("eyeota_mastercard","39133",!1,"52388")),cn.itp("eyeota_mastercard","19550",!1,"52388")),cn.itp("eyeota_mastercard","19500",!1,"52388")))),52396:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_onaudience","15072",!1,"52396"),cn.itp("eyeota","1635",!1,"52396")),cn.itp("eyeota_mastercard","41867",!1,"52396")),cn.itp("eyeota_experian","27996",!1,"52396")),cn.itp("eyeota_dataxpand","14672",!1,"52396")),cn.itp("eyeota_dataxpand","14873",!1,"52396")),cn.itp("eyeota_experian","30589",!1,"52396")),cn.itp("eyeota_bombora","14373",!1,"52396")),cn.itp("eyeota_mastercard","41042",!1,"52396")),cn.itp("eyeota_mastercard","19503",!1,"52396")),cn.itp("eyeota_experian","22645",!1,"52396")),cn.itp("eyeota_experian","21383",!1,"52396"))),52397:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","39803",!1,"52397"),cn.itp("eyeota_experian","39804",!1,"52397")),cn.itp("eyeota_dataxpand","14572",!1,"52397")),cn.itp("liveramp_PlaceIQ","1002440036",!1,"52397")),cn.itp("liveramp_PlaceIQ","1002440026",!1,"52397")),cn.itp("liveramp_PlaceIQ","1002440046",!1,"52397")),cn.itp("eyeota","35925",!1,"52397")),cn.itp("eyeota","1701",!1,"52397")),cn.itp("eyeota_bombora","14396",!1,"52397")),cn.itp("eyeota_onaudience","15171",!1,"52397")),cn.itp("eyeota","1700",!1,"52397"))),52398:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","36022",!1,"52398"),cn.itp("eyeota_experian","39861",!1,"52398")),cn.itp("eyeota_experian","39862",!1,"52398")),cn.itp("eyeota","57",!1,"52398")),cn.itp("liveramp_IPSOS","1002976976",!1,"52398")),cn.itp("eyeota_experian","18551",!1,"52398")),cn.itp("eyeota_experian","16867",!1,"52398")),cn.itp("eyeota","1588",!1,"52398")),cn.itp("eyeota","6747",!1,"52398")),cn.itp("eyeota","6744",!1,"52398"))),52461:cn.q(cn.ocq(cn.itp("liveramp_PlaceIQ","1002440816",!1,"52461"),cn.itp("eyeota_experian","23057",!1,"52461"))),52464:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_statsocial","23117",!1,"52464"),cn.itp("eyeota","35767",!1,"52464")),cn.itp("eyeota","35609",!1,"52464")),cn.itp("eyeota_dataxpand","14584",!1,"52464")),cn.itp("eyeota","13183",!1,"52464")),cn.itp("eyeota_experian","22814",!1,"52464")),cn.itp("eyeota","35610",!1,"52464")),cn.itp("eyeota","1607",!1,"52464"))),52465:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota_experian","39805",!1,"52465"),cn.itp("eyeota_experian","39805",!1,"52465")),cn.itp("eyeota_experian","30640",!1,"52465")),cn.itp("eyeota","35789",!1,"52465"))),52466:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.itp("eyeota","4001",!1,"52466"),cn.itp("eyeota","35628",!1,"52466")),cn.itp("eyeota_stirista","32931",!1,"52466")),cn.itp("eyeota_stirista","32983",!1,"52466")),cn.itp("eyeota_stirista","32956",!1,"52466")),cn.itp("eyeota","3999",!1,"52466")),cn.itp("eyeota","3986",!1,"52466")),cn.itp("eyeota","4005",!1,"52466"))),52483:cn.q(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.ocq(cn.tw(cn.cw("Pageview",cn.o([cn.ps(["article","name"],"cabo"),cn.ps(["article","title"],"cabo"),cn.ps(["content","city"],"cabo"),cn.ps(["place","dest"],"cabo"),cn.ps(["place","destination"],"cabo"),cn.ps(["pageSlug"],"cabo")]),cn.ge(1)),2592e6),cn.itp("eyeota","13438",!1,"52483")),cn.itp("eyeota","1574",!1,"52483")),cn.itp("eyeota","1728",!1,"52483")),cn.itp("eyeota","36003",!1,"52483")),cn.itp("eyeota","35944",!1,"52483")),cn.itp("eyeota_statsocial","23345",!1,"52483")),cn.itp("eyeota_experian","16866",!1,"52483")),cn.itp("eyeota_bombora","14304",!1,"52483")),cn.itp("liveramp_IPSOS","1004367569",!1,"52483")),cn.itp("eyeota","302",!1,"52483")))}||{},[].map(String)||[]);var cn;let pn={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};qt()((function(e){switch(e.type){case"bootstrap":return un(e.stateMap,...e.payload);case"updateEnvironment":return sn(e.stateMap,...e.payload);case"process":return ln(e.stateMap,...e.payload);case"migrateDirect":return dn(...e.payload);case"migrateViaCache":return gn(...e.payload)}}));const un=(e,t,n,a,i)=>{pn={getCurrentTime:()=>new Date,getCurrentSession:()=>a.sessionId,getCurrentView:()=>a.viewId,getSegments:()=>a.segments,getLookalikeModels:()=>a.lookalikeModels,setSegmentActivation:(e,t)=>{}};const o=nn(t,(t,n)=>{var a;return(null===(a=e[t])||void 0===a?void 0:a.checksum)===n?pe:ue({checksum:n,state:null,result:on[t].interpret(null,pn),activations:{}})}),r=ln(o,n,i);return{stateMap:Object.assign(Object.assign({},e),r.stateMap),errors:r.errors}},sn=(e,t,n,a=!0)=>{const i=n.segments?pn.getSegments():{};return pn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pn),n.viewId?{getCurrentView:()=>n.viewId}:{}),n.sessionId?{getCurrentSession:()=>n.sessionId}:{}),n.lookalikeModels?{getLookalikeModels:()=>n.lookalikeModels}:{}),n.segments?{getSegments:()=>Object.assign(Object.assign({},i),n.segments),setSegmentActivation:fn(e)}:{}),a?yn(e,t,{}):{stateMap:e,errors:[]}},ln=(e,t,n)=>n.reduce(({stateMap:e,errors:n},a)=>{const i=yn(e,t,a);return{stateMap:i.stateMap,errors:n.concat(i.errors)}},{stateMap:e,errors:[]}),yn=(e,t,n)=>{const a=D,i=(e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!0}),{}))((e=>Object.entries(e).filter(([e,t])=>{var n;return!0===(null===(n=t.result)||void 0===n?void 0:n.result)}).map(([e,t])=>parseInt(e,10)))(e)),o=sn(e,t,{segments:{"1p":i}},!1),r=o.stateMap,c=(e,i)=>{const{is_segment:o,id:r}=i,c=an(i,["is_segment","id"]),p=on[e],u=p.lift(n,pn),l=ct(ut(c.state),s(a)),y=ct(ut(u),s(a),e=>tn(l,e)),d=tn(y,t[e]?ct(ut(t[e]),s(a)):a());return Object.assign(Object.assign({},c),{state:pt(y),result:p.interpret(pt(d),pn)})},p=o.errors,u={},l=Object.entries(r),y=l.length;for(let e=0;e<y;e++){const t=l[e][0],n=l[e][1];let a=n;try{a=c(t,n)}catch(e){p.push(`Failed to interpret query ${t}. Got ${e}`)}u[t]=a}return{stateMap:u,errors:p}},dn=(e,t)=>({stateMap:nn(t,(t,n)=>{const a=on[t],i=u(()=>a.migrate(n.state),e=>String(e)),o=ct(i,s(e=>null));return o&&(null==e?void 0:e[t])===n.checksum?ue(Object.assign(Object.assign({},n),{state:o})):pe}),errors:[]}),gn=(e,t,n)=>{const a=(i=e=>rn.includes(e),nn(e,(e,t)=>i(e)?ue(t):pe));var i;return un({},a,{},t,n)},fn=e=>(t,n,a)=>{var o;return ct(null===(o=e[a])||void 0===o?void 0:o.activations,e=>i(t in e,e),([e,a])=>a[t]=e?at(At)(a[t],[n]):[n])}}]);',"Worker",void 0,void 0)},o=n(3),s=n(24),u=n.n(s),l=n(7),p=n(11),d=n(14),_=n(2),f=n(16),g=n(6),h=n(13),m=n(0),y=n(4);class v{constructor(e,t){this._internals=e,this.permutive=t,this.CACHED_SEGMENTS_STORAGE_KEY="_psegs",this.queryMetadata={23918:"0c8b70cdb7",23972:"0c8b70cdb7",24040:"c784c76f7e",24994:"8729b79f6b",24995:"f06b8d2319",24996:"23aa5da699",24997:"e9a177b21a",24998:"bc3118acc8",25e3:"4cc4f735aa",25002:"c71bef5e1d",25003:"296fe2dcf1",25004:"498418b737",25005:"32e9780ca6",25007:"fbf68fd30d",25009:"ddf123c0e5",25010:"06bb17768c",25141:"f748241aee",26377:"9c86f9e9cd",26385:"23dc5a5be9",38322:"0c8b70cdb7",46274:"ace1dcfe1c",46461:"b9de4aa495",46462:"d92bdfc813",47082:"215611d135",47083:"f793f5e1e4",47174:"b21cbdca98",47281:"9888b11a3e",47282:"cf609cad65",47292:"d067309975",47296:"9b4fdc8d94",47297:"c07e52e268",47628:"6a9e47ccd2",47650:"0e234cee75",47651:"9c8b2846f8",47652:"6cf38cde23",47653:"345ea0c1e6",47654:"f6d350e58c",47721:"df9661337d",47723:"82ad429f5d",47730:"3004ccf38f",47733:"2229c3fcd4",47734:"0df2234db9",47736:"2daee34d1b",47749:"1cd0eb9203",47750:"2f1541fd30",47751:"cbf87fa862",47752:"438289c81f",47753:"f27f42208f",47755:"363fa058c2",47756:"8ef41f553f",47846:"22e73df4aa",47862:"703fbbbecb",47863:"94c3b717ed",47864:"a58a5451cd",47865:"aedbe1a472",47894:"1f9507de48",47895:"3e74ce2d0c",47896:"9b2e2ffd0b",47897:"eee4386a77",47898:"19c61940ac",47899:"508e12b514",47900:"dc7c4918f7",47901:"856fb0f3dc",47903:"3a939ca68b",47917:"a5366ee05e",47918:"2d55a9e09a",47919:"193c0cfd4c",47920:"286b1e5e0e",47921:"83898edc21",47922:"f04a12c3cc",47923:"ca871fe6a4",47924:"932f37985c",47925:"2d1293afb6",47926:"6187f8bc87",47929:"b3ce636c49",47930:"dfa9358c1c",47931:"55a0974014",47932:"e9e0915070",47933:"e17f6fe41b",47934:"a3255bc876",47935:"cd45d75cb2",47936:"2e7747a7dc",47937:"a0a443eeb9",47938:"1e43d1a9fd",47939:"bd7c83f39e",47940:"acff113f88",47941:"17b5d5db49",47942:"90f559fe35",47943:"4619993f32",47944:"6be76e26af",47945:"533a1d8626",48010:"d03987db20",48261:"ffd88e717e",48262:"7faf500c2e",48263:"95898934b4",48264:"7ef2e03324",48265:"32e81b66a6",48266:"7ede4b28a1",48267:"53c33b8cf7",48309:"4723c895c2",49048:"b7dcf4e541",49050:"73bf01b9ff",49052:"1b47412aca",49089:"2939784c4a",49109:"222179c5c0",49149:"7f37d324b7",50432:"f4c31aa851",50438:"5919b6af34",50442:"c9060e3cd5",50443:"419056c45b",50444:"d4f61b0b8a",50445:"74d1098be7",50446:"4c8299f021",50562:"8166fbeb3c",50563:"0e87156402",50564:"2e8710335b",50635:"793be86a66",50692:"29d56963f3",50702:"07921e826b",50712:"e911d9452e",50713:"cf2c556eae",51619:"e640ea95f9",51645:"ff4aae3249",52010:"9544048c24",52012:"1229ae1be9",52013:"6abe8753da",52096:"281f5b7dc6",52097:"79ccff7bd1",52388:"447c324116",52396:"f340caa690",52397:"137fa4d0e9",52398:"a4288e1f29",52461:"20332e33e5",52464:"102cf522f4",52465:"30a2503c63",52466:"629088ea6d",52483:"f4427296b0"},this.isWorkerReady=!1,this.extStateMap={},this.userSegments=[],this.userSegmentsMap={},this.segmentTransitionEdgeOnly=!0,this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set;const n=this._internals.getExternalData(this.CACHED_SEGMENTS_STORAGE_KEY);this.userSegments=(JSON.parse(n)||[]).filter(e=>Object(h.c)(e,this.queryMetadata)),this.userSegmentsMap=Object(h.e)(this.userSegments);const i=this._internals.state.getPermutiveData("internal_query_states")||{},c=this._internals.state.getPermutiveData("external_query_states")||{},o=Object(r.d)(i,e=>{var t;return(null===(t=i[e])||void 0===t?void 0:t.checksum)===this.queryMetadata[e]});this.extStateMap=Object(r.d)(c,e=>Object(h.c)(e,this.queryMetadata)),this._internals.state.setPermutiveData("external_query_states",this.extStateMap),this.stateMap={value:o,promise:Promise.resolve(o)},this.queryWorker=new u.a(new a)}bootstrap(e){return this.migrateIfRequired(e).then(([e,t,n])=>this.postMessage({type:"bootstrap",payload:[this.queryMetadata,this.extStateMap,{segments:Object.assign({"1p":this.userSegmentsMap},t),sessionId:this._internals.sessionManager.getSessionId(),viewId:this._internals.state.viewId,lookalikeModels:n},e]}))}updateEnvironment(e){return this.postMessage({type:"updateEnvironment",payload:[this.extStateMap,e]})}process(e){return this.postMessage({type:"process",payload:[this.extStateMap,e]})}updateExternalState(e){const t=Object(r.j)(e,(e,t)=>{const n=this.queryMetadata[e];return t[n]?Object(m.c)(Object(d.a)(t[n])):m.n}),n=Object(r.j)(this.extStateMap,(e,t)=>Object(m.c)(Object(d.a)(t))),i=Object(r.j)(Object.assign(Object.assign({},n),t),(e,t)=>n[e]?Object(m.o)(Object(d.b)(Object(f.b)(t,n[e]))):Object(m.o)(Object(d.b)(t)));this._internals.state.setPermutiveData("external_query_states",i),this.extStateMap=i}postMessage(e){return this.stateMap.promise=this.stateMap.promise.then(t=>this.queryWorker.postMessage(Object.assign(Object.assign({},e),{stateMap:t}))).then(({stateMap:e,errors:t})=>this.onStateChange(e,t)).catch(e=>(this._internals.network.error("Error during query execution. Got "+e,this._internals.state.userId),this.stateMap.value))}onStateChange(e,t){return Object(g.a)(t.length>0?this._internals.network.error("QL error(s). Got "+t.join("; "),this._internals.state.userId):{},t=>this.stateMap.value=e,e=>this.isWorkerReady?this.onStateChangeReady(e):e)}onStateChangeReady(e){const t=Object(h.d)(e),n=[...Object(l.c)(p.c)(t,this.userSegments).map(t=>[t,!0,e[t].id]),...Object(l.c)(p.c)(this.userSegments,t).map(t=>[t,!1,e[t].id])];return this.userSegments=t,this.userSegmentsMap=Object(h.e)(t),this._internals.log("Writing new segment and query state cache",e),this._internals.setExternalData(this.CACHED_SEGMENTS_STORAGE_KEY,JSON.stringify(this.userSegments)),this._internals.state.setPermutiveData("internal_query_states",e),n.forEach(([e,t,n])=>{this.trackTransition(t,n,e),this._internals.messages.emit("permutive:query:changed",{queryCode:e,result:{result:t}})}),Object(g.a)(n.length>0,e=>e?this._internals.messages.emit("permutive:segments:updated"):{},t=>e)}migrateIfRequired(e){const t=this._internals.state.getPermutiveData("query_states"),n=()=>{const n=this._internals.metrics.startTimer("sdk_direct_state_migration_seconds",{});return this.queryWorker.postMessage({type:"migrateDirect",payload:[this.queryMetadata,Object(r.d)(t,e=>Object(h.c)(e,this.queryMetadata))]}).then(r=>this.onStateMigrateSuccess(t,e,r.stateMap,n)).catch(t=>this.onStateMigrateError(e,t))},i=()=>this._internals.api.migrateOutOfSDKEvents(this._internals.state.userId,e.map(e=>e.id).filter(e=>e)).catch(e=>this._internals.network.error("Error migrating out-of-SDK events. Got "+String(e),this._internals.state.userId));return t?(()=>{const e=this._internals.metrics.startTimer("sdk_overall_state_migration_seconds",{});return Promise.all([this._internals.thirdParty.segments(),this._internals.models.getModels(),n(),i()]).then(([t,n,r,i])=>(this._internals.metrics.stopTimer("sdk_overall_state_migration_seconds",e),Object(y.g)(r,t,n)))})():Promise.resolve([e,{},{}])}onStateMigrateSuccess(e,t,n,i){this._internals.metrics.stopTimer("sdk_direct_state_migration_seconds",i),this._internals.log("Beginning migration. Migrated query state is",n),this._internals.metrics.track({name:"sdk_success_migration_count",value:1,labels:{}});const c=Object(h.a)(t,100);return(n=>{const i=this._internals.metrics.startTimer("sdk_cache_replay_migration_seconds",{});return this.queryWorker.postMessage({type:"migrateViaCache",payload:[this.queryMetadata,{segments:{"1p":this.userSegmentsMap},sessionId:this._internals.sessionManager.getSessionId(),viewId:this._internals.state.viewId,lookalikeModels:{}},c]}).then(c=>{this._internals.metrics.stopTimer("sdk_cache_replay_migration_seconds",i);const a=c.stateMap;this._internals.log("Recreated state via events cache. Got",a);const s=e=>Object(g.a)(Object(r.j)(e,(e,t)=>Object(m.d)(t.state)),d.a,Object(o.j)(e=>(this._internals.network.error("Failed to decode state. Got "+e,this._internals.state.userId),Object(_.l)(new Map)))),u=s(a),l=s(n),p=Object(g.a)(Object(o.t)(()=>Object(f.b)(l,u),e=>"Failed to join migrated state and state recreated via the events cache. Got "+e),Object(o.j)(e=>Object(g.a)(this._internals.network.error(e,this._internals.state.userId),()=>l)),e=>Object(d.b)(e)),y=Object.entries(e).filter(([e,t])=>Object(h.c)(e,this.queryMetadata)).map(([e,t])=>[e,Object.assign(Object.assign({},t),{state:null})]),v=Object(r.m)(...y);this.stateMap.value=v,this.stateMap.promise=Promise.resolve(this.stateMap.value),this._internals.log("Sending full picture of legacy state to state/legacy/ ",p),this._internals.log("Purging events cache. Current cache is ",t);const b=Object(r.j)(this.queryMetadata,(e,t)=>(null==p?void 0:p[e])?Object(m.o)({[t]:p[e]}):m.n);return Promise.all([this._internals.api.state(b,0,!1,!1,!0),this._internals.state.eventsCache.reset()]).then(n=>{const r=this.filterCacheAndFlush(t);this._internals.log("Purged cache. New cache is ",r),this._internals.state.setPermutiveData("query_states",null);const i=p?Object(o.t)(()=>this.updateExternalState(b),e=>String(e)):Object(o.r)(null);return Object(o.m)(i)?Object(g.a)(i.left,t=>this._internals.network.error(`\n                    Failed to store migrated state.\n                    Old state was ${JSON.stringify(e)}.\n                    New state was ${JSON.stringify(p)}.\n                    Error was ${t}\n                  `,this._internals.state.userId),e=>this._internals.log("Migration failed. Check network tab"),e=>r):Object(g.a)(this._internals.log("Migration completed successfully"),e=>[])})})})(n).catch(e=>this.onStateMigrateError(t,e))}onStateMigrateError(e,t){return this._internals.log("Migration failed. Check network tab"),this._internals.network.error("Exception during migration process. Got "+t,this._internals.state.userId),this._internals.metrics.track({name:"sdk_failed_migration_count",value:1,labels:{}}),this._internals.state.eventsCache.reset().then(t=>Object(g.a)(this._internals.state.setPermutiveData("query_states",null),t=>this.filterCacheAndFlush(e)))}filterCacheAndFlush(e){const t=Object(h.b)(e,"web",window.location.hostname),n=t.length;return t.forEach((e,t)=>this._internals.state.eventsCache.add(e,{persistOnDisk:t===n-1})),t}trackTransition(e,t,n){const r=Object.assign({segment_id:t,segment_number:n},{});e?this.segmentEntryQueryCodes.add(n):this.segmentExitQueryCodes.add(n),this.permutive.track(e?"SegmentEntry":"SegmentExit",r,{isMemoryOnly:this.segmentTransitionEdgeOnly})}reset(){this._internals.removeExternalData(this.CACHED_SEGMENTS_STORAGE_KEY),this._internals.state.setPermutiveData("internal_query_states",{}),this._internals.state.setPermutiveData("external_query_states",{}),this.userSegments=[],this.userSegmentsMap={},this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this._internals.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5);class i{constructor(e,t){this.userId=e,this.aliases=t,this.resource="userTPD",this.query=()=>{const e=this.aliases.map(({id:e,tag:t,priority:n})=>`{id: "${e}", tag: "${t}", priority: ${n}}`).join(",");return`\n      userTPD: user(user_id: "${this.userId}") {\n        identity(aliases: [${e}]) {\n          tpd {\n            name\n            segments\n          }\n        }\n      }\n    `}}}var c=n(11),a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const o={permutive:"1",eyeota:"2",skimlinks:"4",comscore:"5",eyeota_bombora:"6",eyeota_aimmatic:"7",eyeota_alc:"8",eyeota_amberdata:"9",eyeota_caci:"10",eyeota_corelogic:"11",eyeota_dlg:"12",eyeota_dataxpand:"13",eyeota_dunbradstreet:"14",eyeota_experian:"15",eyeota_gbgtransactis:"16",eyeota_gfk:"17",eyeota_rdaresearch:"18",eyeota_kantarmedia:"19",eyeota_mastercard:"20",eyeota_meritdirect:"21",eyeota_netsprint:"22",eyeota_nri:"23",eyeota_onaudience:"24",eyeota_pacificdatapartners:"25",eyeota_plungedigital:"26",eyeota_roymorgan:"27",eyeota_schober:"28",eyeota_sharethis:"30",eyeota_skimlinks:"31",eyeota_specialists:"32",eyeota_statsocial:"33",eyeota_stirista:"34",eyeota_yougov:"36"};class s{constructor(e,t,n){this._internals=e,this.permutive=t,this.network=n,this._internals.log("Enabling tpd reporting"),this._internals.messages.on("permutive:segments:updated",()=>{this.reportUsage()});const r=this._internals.state.getPermutiveData("third-party-data");this.userSegments=this.isValidState(r)?r:{},this.lastCheckedSession=this._internals.state.getPermutiveData("third-party-data-session-id")||""}segments(){if(this.segmentsPromise)return this.segmentsPromise;const e=this._internals.sessionManager.getSessionId();if(this.lastCheckedSession===e)return Promise.resolve(this.userSegments);const t=Object(r.b)();this.lastCheckedSession=e;const n=this._internals.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),a=Object.assign(Object.assign({},this._internals.identities.getIdentities(!0)),this._internals.identities.aliases);if(Object.keys(a).length>0){const e=new i(this._internals.state.userId||Object(r.o)(),this._internals.identities.aliasMapToPrioritizedList(a));this._internals.graphql.register(e).then(e=>{const n=this.graphQLTPDResponseToSegmentMap(e);this.updateCache(n),t.resolve(n)}).catch(e=>{this.network.error("Third Party Data segments retrieval failed with reason: "+e,this._internals.state.userId),t.resolve({})})}else t.resolve({});const o=this._internals.promises.getPromisesByCategory("tpd"),s=Promise.all(o.map(e=>e.promise)).then(e=>t.promise).then(e=>this.userSegments);return s.then(t=>{this._internals.state.setPermutiveData("third-party-data-session-id",e),this._internals.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n);const i=this._internals.state.getPermutiveData("third-party-data");i&&Object(r.c)(Object(r.c)(c.b)).equals(i,t)||(this._internals.state.setPermutiveData("third-party-data",this.userSegments),Object.entries(t||{}).forEach(([e,t])=>{i&&Object(r.c)(c.b).equals(i[e],t)||this.fireSegments(e,Object.keys(t))}))}),this.segmentsPromise=s,this.segmentsPromise}addSegments(e,t){this.updateCache({[e]:this.listToSegmentMap(t)})}getActivationMetadata(){const e=this.tpdUsage(this._internals.queryManager.stateMap.value),t={};for(const n in e)if(e.hasOwnProperty(n)){const r=[],i=Object.assign({},e[n]);Object.keys(i).forEach(e=>{i[e].forEach(t=>{r.push([n,o[e],t].join("-"))})}),t[n]=r}return t}updateCache(e){this.userSegments=Object(r.k)(this.userSegments,e)}fireSegments(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t},{isAnalyticsOnly:!0})}reportUsage(){const e=this.tpdUsage(this._internals.queryManager.stateMap.value),t=Object(r.f)(JSON.stringify(e));if(this._internals.state.getPermutiveData("third-party-data-usage")!==t&&Object.keys(e).length>0){this._internals.state.setPermutiveData("third-party-data-usage",t);const n={user_id:this._internals.state.userId,time:new Date,tpd_segments:e};this._internals.api.tpdUsage(n)}}graphQLTPDResponseToSegmentMap(e){return e.identity.tpd.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:this.listToSegmentMap(t.segments)}),{})}listToSegmentMap(e){return e.reduce((e,t)=>(e[t]=!0,e),{})}isValidState(e){return void 0===(null==e?void 0:e.expiry_time)}tpdUsage(e){const t={},n=Object.keys(e),r=n.length;for(let i=0;i<r;i++){const r=n[i],c=e[r],{activations:o}=c;a(c,["activations"]);Object.keys(o).length>0&&(t[r]=o)}return t}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"canRun",(function(){return canRun})),__webpack_require__.d(__webpack_exports__,"getTag",(function(){return getTag})),__webpack_require__.d(__webpack_exports__,"makeConfig",(function(){return makeConfig})),__webpack_require__.d(__webpack_exports__,"hasConsent",(function(){return hasConsent}));var _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),_core_state_PermutiveState__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29),_core_metrics_PermutiveMetrics__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(17),_PermutiveMethods__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(30),_http_graphql_GraphQLIdentify__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(21),_Config__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),_core_queries_QueryManager__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(31),fp_ts_es6_Option__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(0),fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3),fp_ts_es6_Apply__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(27),fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(6),fp_ts_es6_Array__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7),fp_ts_es6_Eq__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(11),fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9),fp_ts_es6_Task__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(10),fp_ts_es6_function__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(4),_core_third_party_PermutiveThirdParty__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(32),_core_state_PermutiveStateSync__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(25),_http_graphql_GraphQLOutOfSDKEvents__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(26);const sdkInitTimestamp=window.performance.now(),canRun=e=>{const t="function"==typeof e.Map?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(new e.Map([["a",1]])):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("Maps not supported"),n="function"==typeof e.Set?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(new e.Set([1,2])):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("Sets not supported"),r=Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.d)(e=>1===e.size?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(null):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("Iterable Maps not supported"))(t),i=Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.d)(e=>2===e.size?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(null):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("Iterable Sets not supported"))(n),c=e.Worker&&e.Blob?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(null):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("WebWorkers not supported"),a=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"],o=Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.t)(()=>{e.localStorage.setItem("_permutive_ls_test","_permutive_ls_test"),e.localStorage.removeItem("_permutive_ls_test")},t=>e.localStorage&&0===e.localStorage.remainingSpace||a.some(e=>-1!==String(t).indexOf(e))?"localStorage quota exceeded":"localStorage not supported");return Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(Object(fp_ts_es6_Apply__WEBPACK_IMPORTED_MODULE_12__.a)(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.e)(r,i,o,c),t=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.f)(t=>e)(Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.b)(t)))},getTag=e=>Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.g)("Can't find permutive tag on the page")(e.permutive),fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.b),makeConfig=e=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.g)(Object.assign(Object.assign({},e),{config:Object(_Config__WEBPACK_IMPORTED_MODULE_8__.a)(e.config)})),makeNetwork=e=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.g)([e,new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_0__.a(e.config)]),validateConsentThenCache=e=>"object"==typeof e&&Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(window.localStorage.setItem("permutive-consent",JSON.stringify(e)),t=>{var n;return e.opt_in&&(null===(n=e.token)||void 0===n?void 0:n.length)>0}),consentThenInit=e=>t=>Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(validateConsentThenCache(t),t=>t?init(e)():null),hasConsent=e=>{const[t,n]=e;window.permutive.consent=consentThenInit(e);const r=Object(fp_ts_es6_Array__WEBPACK_IMPORTED_MODULE_14__.f)(fp_ts_es6_Eq__WEBPACK_IMPORTED_MODULE_15__.d)("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]),i=Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.d)(e=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.d)(e=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.d)(e=>Object(fp_ts_es6_Task__WEBPACK_IMPORTED_MODULE_17__.h)(!1))(r?Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.h)(()=>n.req({url:n.getEndpointUrl("/geoip"),method:"GET"},!1).then(e=>"Israel"===Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.i)(e,"geo_info","country")&&validateConsentThenCache({opt_in:!0,token:"whitelisted-geo"})),e=>n.error("Failed to retrieve geo location information required for consent. Got "+e)):Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.g)(!t.config.consentRequired)))(Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.c)(fp_ts_es6_function__WEBPACK_IMPORTED_MODULE_18__.c)((()=>{const e=JSON.parse(window.localStorage.getItem("permutive-consent"));return e?Object(fp_ts_es6_Option__WEBPACK_IMPORTED_MODULE_10__.o)(validateConsentThenCache(e)):fp_ts_es6_Option__WEBPACK_IMPORTED_MODULE_10__.n})())))(Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.c)(fp_ts_es6_function__WEBPACK_IMPORTED_MODULE_18__.c)((()=>{const e=Object(fp_ts_es6_Array__WEBPACK_IMPORTED_MODULE_14__.g)(e=>"consent"===e.functionName)(t.q);return Object(fp_ts_es6_Option__WEBPACK_IMPORTED_MODULE_10__.m)(e=>validateConsentThenCache(e.arguments[0]))(e)})()));return Object(fp_ts_es6_Task__WEBPACK_IMPORTED_MODULE_17__.g)(e=>e?Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.r)(Object(fp_ts_es6_function__WEBPACK_IMPORTED_MODULE_18__.g)(t,n)):Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.o)("No consent to run on the page"))(i)},init=tagAndNetwork=>Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.h)(()=>{window.permutive.consent=validateConsentThenCache;const[tag,network]=tagAndNetwork,context=Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.k)(tag.context||{},{path:window.location.pathname,url:window.location.href,referrer:document.referrer}),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_4__.a(tag.config,network),permutiveMethods=new _PermutiveMethods__WEBPACK_IMPORTED_MODULE_6__.a(_internals,network,context);_internals.state=new _core_state_PermutiveState__WEBPACK_IMPORTED_MODULE_1__.a(_internals,permutiveMethods,context),_internals.stateSync=new _core_state_PermutiveStateSync__WEBPACK_IMPORTED_MODULE_20__.a(_internals),_internals.queryManager=new _core_queries_QueryManager__WEBPACK_IMPORTED_MODULE_9__.a(_internals,permutiveMethods),_internals.thirdParty=new _core_third_party_PermutiveThirdParty__WEBPACK_IMPORTED_MODULE_19__.a(_internals,permutiveMethods,network),_internals.identities=new _core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_3__.a(_internals,permutiveMethods,network);const isMetricsUser=_internals.state.getPermutiveData("metricsEnabled");_internals.metrics=!0===isMetricsUser?new _core_metrics_PermutiveMetrics__WEBPACK_IMPORTED_MODULE_5__.a(sdkInitTimestamp,_internals,permutiveMethods):!1===isMetricsUser?new _core_metrics_PermutiveMetrics__WEBPACK_IMPORTED_MODULE_5__.b:Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(Math.random()<=_internals.config.metricsSamplingPercentage/100,e=>[_internals.state.setPermutiveData("metricsEnabled",e),e],([e,t])=>t?new _core_metrics_PermutiveMetrics__WEBPACK_IMPORTED_MODULE_5__.a(sdkInitTimestamp,_internals,permutiveMethods):new _core_metrics_PermutiveMetrics__WEBPACK_IMPORTED_MODULE_5__.b);const permutiveShell=Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.k)(tag,{consent:window.permutive.consent},{q:window.permutive.q},{context:context},{addons:_internals.addons});[].forEach(s=>{try{eval(s)}catch(e){network.error(Object.assign(Object.assign({},e),{message:"Error running custom script "+s}),_internals.state.userId)}}),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",()=>{const e=Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.k)(permutiveShell,{identify:permutiveMethods.identify.bind(permutiveMethods),on:permutiveMethods.on.bind(permutiveMethods),once:permutiveMethods.once.bind(permutiveMethods),track:permutiveMethods.track.bind(permutiveMethods),trigger:permutiveMethods.trigger.bind(permutiveMethods),query:permutiveMethods.query.bind(permutiveMethods),segment:permutiveMethods.segment.bind(permutiveMethods),segments:permutiveMethods.segments.bind(permutiveMethods),reset:permutiveMethods.reset.bind(permutiveMethods),ready:permutiveMethods.ready.bind(permutiveMethods),addon:permutiveMethods.addon.bind(permutiveMethods)});window.permutive=Object.assign(Object.assign({},e),{q:[]}),_internals.setAsReady();const t=["identify","trigger","addon","track"];permutiveShell.q.filter(e=>"consent"!==e.functionName).sort((e,n)=>{const r=t.indexOf(e.functionName),i=t.indexOf(n.functionName);return-1===r?-1===i?0:1:-1===i?-1:r-i}).forEach(t=>{t.functionName in e?e[t.functionName].apply(permutiveMethods,t.arguments):network.error(`Function "permutive.${t.functionName}" does not exist.`,_internals.state.userId)})});const loadAddon=e=>e.load(permutiveShell.q,permutiveMethods,_internals,network),addons=[Promise.resolve().then(__webpack_require__.bind(null,34)),Promise.resolve().then(__webpack_require__.bind(null,35)),Promise.resolve().then(__webpack_require__.bind(null,36)),Promise.resolve().then(__webpack_require__.bind(null,37))];addons.forEach(e=>e.then(loadAddon));const registerEnricher=e=>e.register(_internals,permutiveShell.context,permutiveShell.config),enrichers=[Promise.resolve().then(__webpack_require__.bind(null,38))];enrichers.forEach(e=>e.then(registerEnricher));const registerCloudSegments=e=>e.register(_internals,permutiveShell.context,permutiveShell.config),cloudSegmentsModules=[];cloudSegmentsModules.forEach(e=>e.then(registerCloudSegments));const aliasesMap=_internals.identities.aliases,graphQLIdentify=()=>{const e=Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.b)(),t=()=>permutiveShell.q.findIndex(e=>"identify"===e.functionName);let n=t();for(;n>-1;){const e=permutiveShell.q.splice(n,1)[0];_internals.identities.getAliasesFromIdentifyArg(e.arguments[0]).forEach(e=>_internals.identities.setAlias(e.id,e.tag)),n=t()}const r=_internals.state.userId,i=new _http_graphql_GraphQLIdentify__WEBPACK_IMPORTED_MODULE_7__.a(r,_internals.identities.aliasMapToPrioritizedList(aliasesMap));return _internals.graphql.register(i).then(t=>(t=>{const n=_internals.identities.aliases,i=t.user_id;i!==r?(_internals.log("Got different user id from API: "+i),_internals.state.reset().then(e=>Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(_internals.state.setUserId(i),e=>Object.entries(n).forEach(([e,t])=>_internals.identities.setAlias(t,e)),e=>_internals.state.eventsCache.reset())).then(t=>e.resolve({identityChanged:!0,userId:i}))):e.resolve({identityChanged:!1})})({user_id:t.identity.identify.id})).catch(t=>{network.error(`Couldn't set identity for user ${r}. Got ${t}`,r),e.resolve({identityChanged:!1})}),_internals.log("Starting identification... Current aliases are:",aliasesMap),e.promise.then(e=>{_internals.messages.emit("permutive:user:ready"),_internals.log("<done> init identity ",e)}),e.promise},onIdentityChanged=()=>(_internals.log("Identity has changed"),_internals.stateSync.resetSync()),onIdentityRemained=e=>(_internals.log("Identity hasn't changed, got these unseen out-of-SDK events",e),_internals.state.eventsCache.loadFromDisk().then(t=>{_internals.log("Loaded local event cache",t);const n=_internals.state.eventsCache.processUnseenEvents(e);return _internals.queryManager.bootstrap(t).then(()=>_internals.queryManager.process(n))})),resetOrDoNothing=()=>Object(_core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_3__.b)("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",_internals.identities.aliasMapToPrioritizedList(aliasesMap).map(e=>e.id),window.location.hostname,_internals.state.userId)?permutiveMethods.reset():Promise.resolve();return resetOrDoNothing().then(()=>_internals.identities.prepareThirdPartyIdentities()).then(e=>{_internals.thirdParty.segments();const t=graphQLIdentify(),n=_internals.graphql.register(new _http_graphql_GraphQLOutOfSDKEvents__WEBPACK_IMPORTED_MODULE_21__.a(_internals.state.userId));return _internals.graphql.run(),Promise.all([t,n]).catch(e=>[{identityChanged:!1},{out_of_sdk_events:[]}]).then(([e,t])=>e.identityChanged?onIdentityChanged():onIdentityRemained(t.out_of_sdk_events))}).then(()=>(permutiveShell.context.user_id=_internals.state.userId,Promise.all([_internals.thirdParty.segments(),_internals.models.getModels()]).then(([e,t])=>(_internals.log("Loaded TPD segments and lookalike models",e,t),_internals.queryManager.updateEnvironment({segments:Object(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_2__.k)({"1p":_internals.queryManager.userSegmentsMap},e),lookalikeModels:t}))))).then(()=>{_internals.queryManager.setAsReady(),_internals.messages.emit("permutive:api:ready"),_internals.metrics.track({name:"sdk_local_storage_byte_total",value:_internals.state.getStateSizeInBytes(),labels:{}}),_internals.metrics.track({name:"sdk_query_states_byte_total",value:_internals.queryManager.getStateSizeInBytes(),labels:{}})})},e=>"Exception during initialisation. Got "+e),initialisationSequence=Object(fp_ts_es6_pipeable__WEBPACK_IMPORTED_MODULE_13__.a)(Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.g)(window),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(canRun),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(getTag),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(makeConfig),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(makeNetwork),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(hasConsent),Object(fp_ts_es6_TaskEither__WEBPACK_IMPORTED_MODULE_16__.a)(init));initialisationSequence().then(Object(fp_ts_es6_Either__WEBPACK_IMPORTED_MODULE_11__.f)(e=>console.warn("Permutive was not initialized. "+e),fp_ts_es6_function__WEBPACK_IMPORTED_MODULE_18__.c))},function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return o})),n.d(t,"DFPAddon",(function(){return s}));var r=n(5),i=n(7),c=n(11);const a={},o=(e,t,n)=>{e.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){t.ready(n.makeSafe(()=>{let e=0;googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().length>0&&googletag.pubads().getSlots().forEach((function(t){t.getResponseInformation()&&e++}));const t=0===e?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";n.metrics.track({name:t,value:1,labels:{target:"dfp"}})}),"realtime");const e=function(){const e=n.getExternalData("_pdfps");return e?JSON.parse(e):[]}();googletag.cmd.push((function(){googletag.pubads().setTargeting("permutive",e.map(String))}));const i=function(e){const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return t},c=function(e){try{let n=!1;window.addEventListener("blur",(function(){if(n){const n=a[e];n&&t.track("SlotClicked",n)}})),document.getElementById(e).addEventListener("mouseover",(function(){n=!0})),document.getElementById(e).addEventListener("mouseout",(function(){n=!1}))}catch(e){}};googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().forEach((function(e){const t=e.getResponseInformation();if(t){const n=e.getSlotElementId(),o={advertiser_id:Object(r.l)(t.advertiserId),campaign_id:Object(r.l)(t.campaignId),line_item_id:Object(r.l)(t.lineItemId),creative_id:Object(r.l)(t.creativeId),is_empty:!1,service_name:"publisher_ads",slot:i(e)};a[n]=o,c(n)}})),googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){const t=e,n=t.slot.getSlotElementId(),o={advertiser_id:Object(r.l)(t.advertiserId),campaign_id:Object(r.l)(t.campaignId),line_item_id:Object(r.l)(t.lineItemId),creative_id:Object(r.l)(t.creativeId),is_empty:t.isEmpty,service_name:t.serviceName,slot:i(e.slot)};if(t.size){const[e,n,...r]=t.size;"number"==typeof e&&"number"==typeof n&&(o.width=e,o.height=n)}a[n]=o,c(n)})),googletag.pubads().addEventListener("impressionViewable",(function(e){const n=e.slot.getResponseInformation();n&&t.track("SlotViewable",{advertiser_id:Object(r.l)(n.advertiserId),campaign_id:Object(r.l)(n.campaignId),line_item_id:Object(r.l)(n.lineItemId),creative_id:Object(r.l)(n.creativeId),service_name:e.serviceName,slot:i(e.slot)})}))})),window.addEventListener("message",(function(e){try{const n=JSON.parse(e.data);if(n.permutive_type&&"google_ad_click"===n.permutive_type){const e=n.data.ad_unit_path,i=Object(r.l)(n.data.creative_id);let c=void 0;Object.keys(a).forEach(t=>{void 0!==a[t].slot&&a[t].slot.ad_unit_path===e&&a[t].creative_id===i&&(c=a[t])}),c=c||{line_item_id:Object(r.l)(n.data.line_item_id),advertiser_id:Object(r.l)(n.data.advertiser_id),campaign_id:Object(r.l)(n.data.order_id),creative_id:Object(r.l)(i),is_empty:!1},t.track("SlotClicked",c)}}catch(e){}}),!1)}))};class s{constructor(e){this.trackedTargetingLimitMetric=!1,this._internals=e._internals;const t=this._internals.getExternalData("_pdfps");this.liveSegments=t?JSON.parse(t):[],this.eligibleSegments={};const n=this._internals.state.activationManager.getSpecializedActivations("dfp");for(let e=0;e<n.dfp.length;e++){const t=n.dfp[e];this.eligibleSegments[t]=t}for(const e in n.dfp_legacy)if(n.dfp_legacy.hasOwnProperty(e)){const t=n.dfp_legacy[e];this.eligibleSegments[e]=t}const r=this._internals.queryManager.userSegments;this.updateSegments(this.filterSegments(r)),this._internals.messages.emit("permutive:dfp:ready"),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe(()=>{const e=this._internals.queryManager.userSegments;this.updateIfNecessary(e)})),this._internals.messages.on("permutive:reset",this._internals.makeSafe(()=>{this._internals.removeExternalData("_pdfps"),this._internals.deleteCookie("_pdfps"),this.liveSegments=[]}))}updateIfNecessary(e){const t=this.filterSegments(e);this._internals.arraysEqual(t,this.liveSegments)||this.updateSegments(t)}updateSegments(e){const t=Object(i.f)(c.d)("7c6db7ee-7cf2-4f9a-853a-78875d37e2bb",["5d79bce7-5d2b-427e-a6c4-b89b6c7bf048","99db7a95-b06a-4ea9-857c-f73ba0a25c19","f5b3be27-f789-4ef1-8867-37c67da5b361","3aba5292-ba75-422b-8715-bd21146f7836","bd1cec50-00d1-4ce9-9572-785857419a1e"])?this.processActivations(this._internals.thirdParty.getActivationMetadata()):[];let n=e.concat(t);encodeURIComponent(JSON.stringify(n)).length>1500&&(n=e,this.trackedTargetingLimitMetric||(this._internals.metrics.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),this.trackedTargetingLimitMetric=!0)),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(()=>googletag.pubads().setTargeting("permutive",n.map(String).concat(["rts"])));const r=JSON.stringify(n.map(String));this._internals.setExternalData("_pdfps",r),"boolean"==typeof{workspaces:[{activations:[],networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1}],auto_init:!0,networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1,activationConfigs:[]}.sync_segments_cookie&&{workspaces:[{activations:[],networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1}],auto_init:!0,networks:[{name:"Lonely Planet Global Inc [Operative]",network_code:"9885583"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1,activationConfigs:[]}.sync_segments_cookie&&this._internals.api.segmentSync("_pdfps",r),this.liveSegments=e}filterSegments(e){return e.filter(e=>e in this.eligibleSegments).map(e=>this.eligibleSegments[e])}processActivations(e){const t=[];for(const n in e)if(e.hasOwnProperty(n)&&n in this.eligibleSegments)for(let r=0;r<e[n].length;r++)t.push(e[n][r]);return t}}},function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return r})),n.d(t,"OverlaysAddon",(function(){return i}));const r=(e,t,n)=>{e.unshift({functionName:"addon",arguments:["overlays",{}]})};class i{constructor(e){const t=this;this.permutive=e.permutive,this._internals=e._internals,this.activations=this._internals.state.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let e=0;e<this.activations.length;e++){const n=this.activations[e],r=n.config,i=this.buildOverlayCss(r,e);document.head.insertAdjacentHTML("beforeend",i);const c=this.buildOverlayBody(r,e);document.body.insertAdjacentHTML("beforeend",c);const a="permutive-overlay-"+e,o=document.getElementById(a),s=o.getElementsByClassName("close")[0],u=o.getElementsByClassName("content")[0],l=()=>{o.style.visibility="hidden",o.style.opacity="0"},p=e=>{u.contains(e.target)||(l(),o.removeEventListener("click",p))};s.addEventListener("click",l),o.addEventListener("click",p),[].slice.call(o.getElementsByTagName("a")).slice(1).forEach(e=>{e.addEventListener("click",(function(){n.trackConversion({useBeacon:!0})}))});const d=o.getElementsByTagName("form")[0];d&&d.addEventListener("submit",(function(e){e.preventDefault(),n.trackConversion({success:function(){d.submit()}})}));const _=function(e,n){t.showOverlay(e),n.trackImpression()};n.activateEveryTime()?this.permutive.segment(n.segmentCode,this._internals.makeSafe(e=>{e?_(a,n):this.permutive.trigger(n.segmentCode,"result",(function(e){e.result&&_(a,n)}))})):n.activateOnEntry()?this.permutive.trigger(n.segmentCode,"result",this._internals.makeSafe((function(e){e.result&&_(a,n)}))):n.activateOnExit()&&this.permutive.trigger(n.segmentCode,"result",this._internals.makeSafe((function(e){e.result||_(a,n)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){let n="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(n='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):n=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",n).replace(/<img /g,"<img onload='window.permutive.addons.overlays.loadedImage(\"permutive-overlay-"+t+"\")' ")}showOverlay(e){const t=document.getElementById(""+e),n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},r=t.getElementsByTagName("img");if(r.length>0){let t=0;const i=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<r.length)?(t+=1,setTimeout(i,500)):n()};i()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"load",(function(){return load})),__webpack_require__.d(__webpack_exports__,"ScriptRunnerAddon",(function(){return ScriptRunnerAddon}));const load=(e,t,n)=>{e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this._internals=options._internals,this.network=options.network,this.activations=this._internals.state.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],run=activation=>{const script=activation.config.script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e.message="Error running custom script: "+e.message,this.network.error(e,this._internals.state.userId)}};activation.activateEveryTime()?this.permutive.segment(activation.segmentCode,e=>{e?run(activation):this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result&&run(activation)}))}):activation.activateOnEntry()?this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result&&run(activation)})):activation.activateOnExit()&&this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result||run(activation)}))}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return o})),n.d(t,"WebAddon",(function(){return s}));var r=n(5),i=n(0);const c=["mousemove","click","scroll"],a=["email","tel","submit","reset","button","file","password","radio","checkbox"],o=(e,t,n)=>{0};class s{constructor(e){this.dirtyState=!1,this.initialised=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.engagementEdgeOnly=!0,this.segmentTransitionEdgeOnly=!0,this.trackPageviewEngagement="boolean"!=typeof{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_pageview_engagement||{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_pageview_engagement,this.trackPageviewComplete="boolean"!=typeof{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_pageview_complete||{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_pageview_complete,this.trackFormSubmission="boolean"!=typeof{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_form_submission||{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_form_submission,this.trackLinkClick="boolean"!=typeof{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_link_click||{workspaces:[{activations:[],add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0}],auto_init:!1,add_alchemy_entities:!1,add_alchemy_taxonomy:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}.track_link_click,this.pageviewCompleteTimeoutDuration=6e5,this.hasPageviewCompleteFired=!1,this.permutive=e.permutive,this._internals=e._internals,this.context=e.context,this.eventInterval=e.eventInterval||5,this.page=e.page||{},this.sendPageviewEvent(),(e.dirtyEvents||c).map(e=>{window.addEventListener(e,()=>{this.dirtyState=!0,this.trackPageviewComplete&&this.resetTimeout()})}),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners,!1),this.trackPageviewEngagement&&(this.timerHandle=this.registerEngagementInterval(this.eventInterval)),this.trackPageviewComplete&&(this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration),Object(r.n)(()=>this.hasPageviewCompleteFired?null:this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion),navigator.userAgent)),this.initialised=!0}sendPageviewEvent(){const e=Object.assign(Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),{}),this.enrichmentProperties(this.context.isArticle)),this.page?this.page:{}),t={success:()=>{this.initialised||this._internals.metrics.trackTimeSinceInit("sdk_first_event_tracked_task_duration_seconds",{})}};this.permutive.track("Pageview",e,t).then(e=>{this._internals.messages.emit("permutive:event:pageview",e)})}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}sendEngagementEvent(e){const{engaged_time:t,total_engaged_time:n,completion:r,total_completion:i}=this.updateState(e),c=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:t,total_engaged_time:n},this.page),{completion:r,total_completion:i});this.permutive.track("PageviewEngagement",c,{isMemoryOnly:this.engagementEdgeOnly})}sendPageviewCompleteEvent(e,t,n=!0){const r=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},this.enrichmentProperties(this.context.isArticle)),this.page),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},{completion:t})},this.segmentTransitionEdgeOnly?{SegmentEntry:Array.from(this._internals.queryManager.segmentEntryQueryCodes),SegmentExit:Array.from(this._internals.queryManager.segmentExitQueryCodes)}:{})});this.permutive.track("PageviewComplete",r,{useBeacon:n}),this.hasPageviewCompleteFired=!0}reset(e){this._internals.state.viewId=Object(r.o)(),this.page=e.page||null,this.trackPageviewComplete&&(this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion,!1),this.hasPageviewCompleteFired=!1),this.totalCompletion=0,this.totalEngagedTime=0,this.sendPageviewEvent(),this.trackPageviewEngagement&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.eventInterval))}serializeForm(e){return[].slice.call(e.getElementsByTagName("input"),0).filter(e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==a.indexOf(e.type.toLowerCase()))).map(e=>({name:e.name||e.id,value:e.value})).filter(e=>e.value.length<120)}enrichmentProperties(e){return Object.assign(Object.assign(Object.assign({},{}),{}),{})}registerEngagementInterval(e){return setInterval(()=>{this.dirtyState&&this.sendEngagementEvent(e)},1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=n=>e(n)?Object(i.o)(n):n.parentElement?e(n.parentElement)?Object(i.o)(n.parentElement):t(n.parentElement):i.n;this.trackFormSubmission&&[].slice.call(document.getElementsByTagName("form"),0).forEach(e=>{e.addEventListener("submit",this._internals.makeSafe(this.sendFormSubmissionEvent.bind(this)))}),this.trackLinkClick&&document.body.addEventListener("click",e=>{if(e.target instanceof Element){const n=t(e.target);return Object(i.b)(()=>{},t=>this.sendLinkClickEvent(t,((e,t)=>!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,t)))(n)}})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e}setPageviewCompleteTimeout(e){return window.setTimeout(()=>this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion,!1),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"GraphQLGeoIP",(function(){return a})),n.d(t,"register",(function(){return o}));var r=n(5),i=n(19);class c extends i.b{constructor(e){super(),this.replacementMap={$ip_geo_info:e.geo,$ip_isp_info:e.isp,$ip_address:e.ip,$ip_address_hash:e.ip_hash}}}class a{constructor(e){this.resource="geoip",this.query=()=>`geoip { ${[this.config.includeGeo?"geo { continent country city province postal_code }":"",this.config.includeISP?"isp { isp organization autonomous_system_number autonomous_system_organization }":"",this.config.includeIP?"ip":"",this.config.includeIPHash?"ip_hash":""].join(" ")} }`,this.config=e}}const o=(e,t)=>{const n=e=>{e.isp&&(t.isp=e.isp.isp,t.organization=e.isp.organization,t.autonomous_system_number=e.isp.autonomous_system_number,t.autonomous_system_organization=e.isp.autonomous_system_organization),e.geo&&(t.continent=e.geo.continent,t.country=e.geo.country,t.city=e.geo.city,t.province=e.geo.province,t.postal_code=e.geo.postal_code)},i=e.state.getPermutiveData("enricher:geoip");if(i&&i.session_id===e.sessionManager.getSessionId())n(i.data),e.enrichers.register(new c(i.data));else{const t={includeGeo:Object(r.i)({geoip:{}},"geoip","include_geo")||!0,includeISP:Object(r.i)({geoip:{}},"geoip","include_isp")||!0,includeIPHash:Object(r.i)({geoip:{}},"geoip","include_ip_hash")||!0,includeIP:Object(r.i)({geoip:{}},"geoip","include_ip")||!1};e.graphql.register(new a(t)).then(t=>{n(t),e.state.setPermutiveData("enricher:geoip",{session_id:e.sessionManager.getSessionId(),data:t}),e.enrichers.register(new c(t))}).catch(t=>e.network.error("Error while registering the geoip enricher: got "+t))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AppNexusIdentityProvider",(function(){return a})),n.d(t,"make",(function(){return o}));var r=n(0),i=n(6),c=n(5);class a{constructor(e,t){this._internals=e,this.network=t,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["0","-1"]}getId(){return Object(c.g)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.network.ajax({url:this.url,xhrFields:{withCredentials:!0},timeout:3e3}).then(e=>({type:"attempted",result:Object(i.a)(Object(r.e)(e=>e.uid&&this.isValidAlias(e.uid))(e),Object(r.m)(e=>e.uid))}),e=>Object(i.a)(this.network.error(`Failed to retrieve third-party identity for ${this.tag}. Got ${e}`,this._internals.state.userId),e=>({type:"attempted",result:r.n})))}isValidAlias(e){return-1===this.invalidAliases.indexOf(e)}}const o=(e,t)=>Promise.resolve(Object(r.o)(new a(e,t)))}]);