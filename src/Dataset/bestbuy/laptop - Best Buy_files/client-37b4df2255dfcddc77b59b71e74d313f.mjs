!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=41)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e,t){e.exports=_},function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=r(1)},function(e,t){e.exports=r(12)},function(e,t){e.exports=r(0)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r(2),o=r.n(n),i=r(0),a=r.n(i),s=r(1);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,l(t).call(this,e,r))).state={isClient:e.renderClientOnly||"object"===("undefined"==typeof window?"undefined":u(window)),html:"",isHydrated:!1},n}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.a.Component),r=t,(n=[{key:"filterIllegalQueryParams",value:function(e){var t=e.query;t&&Object.keys(t).forEach((function(e){e.startsWith("_")&&(console.error("LibEmbeddedComponent: Illegal query param ".concat(e,". Query params cannot be prefixed with '_'")),delete t[e])}))}},{key:"fetchHtml",value:function(e){var t=this,r=this.context.log,n=this.props,o=n.onInitError,i=n.onInitSuccess;return this.filterIllegalQueryParams(e),Object(s.fetchComponent)(e).then((function(e){t.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({},e,{isHydrated:!0})),e.renderCallback||i(h(e))})).catch((function(t){r&&r.error("LibEmbeddedComponent: Failed to fetch embedded component ".concat(Object(s.buildComponentPath)(e)),t),o(t)}))}},{key:"executeRenderCallback",value:function(){var e=this.props,t=e.onInitError,r=e.onInitSuccess;if(this.state.renderCallback){try{this.state.renderCallback(this.ref)}catch(e){return void t(e)}finally{this.setState({renderCallback:null})}r(h(this.state))}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.creatorNamespace,r=e.componentId,n=e.contractVersion,o=e.onInitSuccess,i=e.parentInstanceId,a="div[id^=".concat(t,"-").concat(r,"]"),c="csi\\:component[cn^=".concat(t,"]");if(this.ref.querySelector(a)||this.ref.querySelector(c)){var u={creatorNamespace:t,componentId:r,contractVersion:n};s.afterServerRender?Object(s.afterServerRender)(u,i,this.ref):console.warn("This page is using an outdated version of @gvp/lib-embedded-component-renderer that doesn't support afterServerRender"),o(h(this.state))}else this.fetchHtml(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(s.buildComponentPath)(e),r=Object(s.buildComponentPath)(this.props);"undefined"!=typeof window&&t!==r&&(this.state.renderCallback&&this.setState({renderCallback:null}),this.fetchHtml(e))}},{key:"componentDidUpdate",value:function(){this.executeRenderCallback()}},{key:"shouldComponentUpdate",value:function(e,t){var r=t.html!==this.state.html;return t.isHydrated&&r}},{key:"render",value:function(){var e=this,t=this.state.html;this.state.isClient||(t=Object(s.getComponentIncludeString)(this.props));var r={__html:t};return o.a.createElement("div",{ref:function(t){return e.ref=t},suppressHydrationWarning:!0,dangerouslySetInnerHTML:r})}}])&&d(r.prototype,n),t}();function h(){return{didServerRender:""!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).html.trim()}}f.defaultProps={layoutClassList:"",onError:"continue",onInitError:function(){},onInitSuccess:function(){},query:{}},f.propTypes={creatorNamespace:a.a.string.isRequired,componentId:a.a.string.isRequired,contractVersion:a.a.string.isRequired,renderClientOnly:a.a.bool,layoutClassList:a.a.string,parentInstanceId:a.a.string.isRequired,query:a.a.object,onInitError:a.a.func,onInitSuccess:a.a.func,onError:a.a.oneOf(["failParent","continue"])},f.contextTypes={log:a.a.object}}])},function(e,t){e.exports=Redux},function(e,t){e.exports=ReactRedux},function(e,t){e.exports=analyticsQ},function(e,t,r){var n=r(28);e.exports=function(e){return e.url?"string"==typeof e.data?Promise.reject(new TypeError("Recommendations services can only take `options.data` as Object")):(e.data=Object.assign({apiKey:"D50"},{pageSize:e.pageSize,datasetVersion:e.datasetVersion,page:e.page},e.data||{}),n(e.url+"?"+(t=e.data,Object.keys(t).reduce((function(e,r){var n=t[r];return n&&e.push(r+"="+n),e}),[]).join("&")),{timeout:e.timeout||1e3}).promise.then((function(t){return e.plmt&&e.plmt in t&&(t=t[e.plmt]),Object.assign({carouselHeaderText:e.carouselHeaderText},t)}))):Promise.reject(new TypeError("GenericService cannot be called without `options.url`"));var t}},function(e,t){e.exports=function(){return["qa","test","omnitank"].some((function(e){return-1!==window.location.host.indexOf(e)}))?"//context.test.bestbuy.com":["dev","localhost","docker"].some((function(e){return-1!==window.location.host.indexOf(e)}))?"//"+window.location.host:-1!==window.location.host.indexOf("stage")?"//context.stage.bestbuy.com":"//context.bestbuy.com"}},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=actionLog},function(e,t,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var a=o.apply(null,n);a&&e.push(a)}else if("object"===i)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},function(e,t){e.exports=EmbeddedComponentRenderer},function(e,t){e.exports={creatorNamespace:"shop",componentId:"product-carousels",componentVersion:"",contractVersion:"v1",assetBasePath:"dist/client"}},function(e){e.exports=JSON.parse('{"a":"6.18.4"}')},function(e,t){e.exports=ReduxThunk},function(e,t,r){var n={ALSO_BOUGHT:r(27),TRENDING:r(29),MOST_VIEWED:r(30),RECENTLY_VIEWED:r(31),UNIFIED:r(32)},o=function(){};o.prototype.request=function(e,t){return"object"==typeof e?(t=e,e="UNIFIED"):window.console&&console.warn&&console.warn("sc-recommendations-service: passing API name as the first parameter is deprecated. In the next major version of this component, UNIFIED will be the only type of recommender supported."),n[e].call(this,t)},e.exports=new o},function(e,t){e.exports=falcor},function(e,t,r){e.exports=r(33)},function(e,t){e.exports=patternLibrary},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports={version:"bEnzdc"}},function(e){e.exports=JSON.parse('{"app":{},"metaLayer":{}}')},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(2);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[],this.ticking,this.listenerAttached,this.scrolling=!1,this.topStart,this.scrollEndTimeout=500}var t,r,i;return t=e,(r=[{key:"appear",value:function(e,t,r){this.listenerAttached||this.bindScrollListener();var n=this.buildItem(e,t,r);return this.items.push(n),this.checkItem(n),function(){this.items=this.items.filter((function(e){return n!==e}))}.bind(this)}},{key:"buildItem",value:function(e,t,r){return{el:e,cb:t,fired:!1,offset:"number"==typeof r?r:(r=r||{}).offset||0,type:r.type||"lazy",alwaysFire:r.alwaysFire||!1,reverse:r.reverse||!1,alwaysUseOffset:r.alwaysUseOffset||!1,alwaysUseProvidedOffset:r.alwaysUseProvidedOffset||!1}}},{key:"setScrollEndTimeout",value:function(e){this.scrollEndTimeout=e}},{key:"bindScrollListener",value:function(){this.listenerAttached=!0,window.addEventListener("scroll",this.getBoundOnScrollFunc())}},{key:"getBoundOnScrollFunc",value:function(){return this.onScroll.bind(this)}},{key:"onScroll",value:function(){var e=this;this.setScrollEndTimer(),this.ticking||(this.ticking=!0,window.requestAnimationFrame((function(){e.ticking=!1,e.checkInView()})))}},{key:"setScrollEndTimer",value:function(){var e=this;this.scrolling||(this.topStart=n.a.getScrollTop()),window.clearTimeout(this.scrolling),this.scrolling=window.setTimeout((function(){e.handleScrollEnd()}),this.scrollEndTimeout)}},{key:"checkInView",value:function(){if(this.topStart&&this.topStart>n.a.getScrollTop()){var e=this.items.filter((function(e){return!0!==e.reverse})),t=this.items.filter((function(e){return!0===e.reverse})).reverse();e.forEach(this.checkItem.bind(this)),t.forEach(this.checkItem.bind(this))}else this.items.forEach(this.checkItem.bind(this))}},{key:"checkItem",value:function(e){if((!e.fired||e.alwaysFire)&&n.a.isElementInView(e.el,e.offset,e.alwaysUseOffset,e.alwaysUseProvidedOffset))switch(e.type){case"explicit":this.scrolling||(e.fired=!0,e.cb()),e.wasInView=!0;break;case"lazy":default:e.fired=!0,e.cb()}}},{key:"handleScrollEnd",value:function(){this.scrolling=!1,this.checkInView(),this.topStart=null}}])&&o(t.prototype,r),i&&o(t,i),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new(r(0).a),o=n.appear.bind(n);o.setScrollEndTimeout=n.setScrollEndTimeout.bind(n),t.default=o},function(e,t,r){"use strict";t.a={getScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowHeight:function(){return window.innerHeight},isElementInView:function(e,t,r,n){var o=e.getBoundingClientRect(),i=o.top,a=o.bottom;if(!i&&!a)return!1;var s=this.getWindowHeight();t=t||0,!n&&Math.abs(t)>s&&(t=-Math.abs(s));var c=i+t<s&&a+t>=0;return r?c:c||i<s&&a>=0}}}])},e.exports=n()},function(e,t){e.exports=initializer},,function(e,t,r){var n=window.metaLayer,o="shop/product-carousels/dist/client/",i=n?n.env_assets+"/"+o:o;r.p=i},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e){var t=e.sku||"";return/^\d+(?:(?:,\d+)+)?$/.test(t)?((e=e||{}).url=e.url||o()+"/api/item/"+t+"/alsobought.json",e.carouselHeaderText=e.carouselHeaderText||"Customers Who Bought Also Bought",n(e)):Promise.reject(new TypeError("Also Bought API requires a numeric `options.sku`"))}},function(e,t){var r=0;e.exports=function(e,t){var n,o,i,a,s=(t=t||{}).prefix||"__jp",c=t.param||"callback",u=t.timeout?t.timeout:15e3,d=document.getElementsByTagName("script")[0]||document.head,l=function(){},p=s+r++;return i=function(){n&&n.parentNode&&n.parentNode.removeChild(n),window[p]=l,o&&clearTimeout(o)},{promise:new Promise((function(t,r){u&&(o=setTimeout((function(){i(),r(new Error("Timeout"))}),u)),window[p]=function(e){i(),t(e)},e=(e+=(~e.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(p)).replace("?&","?"),(n=document.createElement("script")).src=e,d.parentNode.insertBefore(n,d),a=function(){window[p]&&(i(),r(new Error("Canceled")))}})),cancel:a}}},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e){return e=Object.assign({url:o()+"/api/trending/items/viewed.json",carouselHeaderText:"Trending Products"},e||{}),n(e)}},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e){return e.category?((e=e||{}).url=e.url||o()+"/api/category/"+e.category+"/items/popular.json",e.carouselHeaderText=e.carouselHeaderText||"Most popular products",n(e)):Promise.reject(new TypeError("Most Viewed API requires `options.category`"))}},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e){return e.contextID?((e=e||{}).url=e.url||o()+"/api/context/"+e.contextID+"/items/viewed.json",carouselHeaderText=e.carouselHeaderText||"Recently Viewed Products",n(e)):Promise.reject(new TypeError("Recently Viewed API requires `options.contextID`"))}},function(e,t,r){var n=r(7),o=r(8),i={contextID:"c_id",sku:"item",plmt:"plmt",src:"src",subplmt:"subplmt",pageSize:"pageSize",category:"cat",searchTerm:"st",storeIds:"storeIds",facets:"facets"};e.exports=function(e){if(!(e=Object.assign({url:o()+"/api/recommendations/list",carouselHeaderText:"Recommended Products"},e||{})).plmt)return Promise.reject(new TypeError("Unified API requires `options.plmt`"));if(!e.src)return Promise.reject(new TypeError("Unified API requires `options.src`"));var t=(document.cookie.split("; ")||[]).reduce((function(e,t){var r=t.split(/=(.+)/);return e[r[0]]=r[1],e}),{});return e.data=Object.assign({c_id:t.context_id,ut_id:t.ut,vt:t.vt},e.data||{}),Object.keys(i).forEach((function(t){var r=e[t],n=i[t];r&&(e.data[n]=r)})),n(e)}},function(e,t,r){var n=r(34),o=r(38);Array.isArray;function i(e,t){var r;for(r in t)e[r]=t[r];return e}function a(e,t){(this._jsongUrl=e,"number"==typeof t)&&(t={timeout:t});this._config=i({timeout:15e3,headers:{}},t||{})}a.prototype={constructor:a,buildQueryObject:o,get:function(e){var t=i(this.buildQueryObject(this._jsongUrl,"GET",{paths:e,method:"get"}),this._config);return n("GET",t,this)},set:function(e){var t;this._config.headers&&this._config.headers["Content-Type"]&&this._config.headers["Content-Type"].match(/application\/json/)?t=i({url:this._jsongUrl,data:JSON.stringify({jsonGraph:JSON.stringify(e),method:"set"})},this._config):(t=i(this.buildQueryObject(this._jsongUrl,"POST",{jsonGraph:e,method:"set"}),this._config)).headers["Content-Type"]="application/x-www-form-urlencoded";return n("POST",t,this)},call:function(e,t,r,o){t=t||[],r=r||[],o=o||[];var a,s=[];this._config.headers&&this._config.headers["Content-Type"]&&this._config.headers["Content-Type"].match(/application\/json/)?a=i({url:this._jsongUrl,data:JSON.stringify({method:"call",callPath:JSON.stringify(e),arguments:JSON.stringify(t),pathSuffixes:JSON.stringify(r),paths:JSON.stringify(o)})},this._config):(s.push("method=call"),s.push("callPath="+encodeURIComponent(JSON.stringify(e))),s.push("arguments="+encodeURIComponent(JSON.stringify(t))),s.push("pathSuffixes="+encodeURIComponent(JSON.stringify(r))),s.push("paths="+encodeURIComponent(JSON.stringify(o))),(a=i(this.buildQueryObject(this._jsongUrl,"POST",s.join("&")),this._config)).headers["Content-Type"]="application/x-www-form-urlencoded");return n("POST",a,this)}},a.FetchHttpSource=a,a.default=a,e.exports=a},function(e,t,r){var n=r(35),{mergeResponses:o,breakQueryIntoSubQueries:i,getQueryVariable:a}=r(37),s=Object.prototype.hasOwnProperty,c=function(){};function u(){}function d(e,t,r){return u.create((function(u){t.onResponse||(t.onResponse=c);var d,l={method:e||"GET",crossDomain:!1,async:!0,headers:{},responseType:"json"};for(d in t)s.call(t,d)&&(l[d]=t[d]);null!=r.onBeforeRequest&&r.onBeforeRequest(l);var p={};l.crossDomain&&(p.mode="cors"),p.method=l.method,p.headers=l.headers||{},p.credentials=l.credentials||"omit",p.agent=l.agent||void 0,p.timeout=l.timeout||void 0,l.data&&(p.body=l.data);var f=a(l.url,"paths"),h=a(l.url,"method"),m=JSON.parse(decodeURIComponent(f||'""')),y=i(m,t.maxQuerySize||7e3),v=l.url.split("?")[0],g=[];for(var b in y){var E=y[b],I=void 0;I=void 0===f?v:v+"?paths="+encodeURIComponent(JSON.stringify(E))+"&method="+h;var S=n(I,p).then(e=>{var r={};if(e.headers.entries)for(var n of e.headers.entries()){var o=n[0],i=n[1];r[o]=i}else e.headers.forEach((e,t)=>{r[t]=e});return e.ok?Promise.resolve(e.json()).then(n=>Promise.resolve(t.onResponse(l.url,e.status,p.headers,r,n,t)).then(()=>n)):Promise.resolve(t.onResponse(l.url,e.status,p.headers,r,void 0,t)).then(()=>{throw new Error("Response code "+e.status)})});g.push(S)}return Promise.all(g).then(e=>{var t=e.reduce((e,t)=>o(t,e),{});u.onNext(t),u.onCompleted()}).catch(e=>{u.onError(e)}),function(){}}))}u.create=function(e){var t=new u;return t.subscribe=function(t,r,n){var o;return"function"==typeof(o=e("function"==typeof t?{onNext:t,onError:r||c,onCompleted:n||c}:t))?{dispose:o}:o},t},e.exports=function(e,t,r){if(void 0===t.retry||0===t.retry)return d(e,t,r);var n=t.retry,o=d(e,t,r);return u.create((function(i){o.subscribe(e=>{i.onNext(e),i.onCompleted()},function e(t,r,n,o,i){return function(a){r<=0?t.onError(a):d(n,o,i).subscribe(e=>{t.onNext(e),t.onCompleted()},e(t,r-1,n,o,i),()=>{})}}(i,n,e,t,r),()=>{})}))}},function(e,t,r){r(36),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};h.prototype.append=function(e,t){e=l(e),t=p(t);var r=this.map[e];this.map[e]=r?r+","+t:t},h.prototype.delete=function(e){delete this.map[l(e)]},h.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},h.prototype.set=function(e,t){this.map[l(e)]=p(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var d=[301,302,303,307,308];S.redirect=function(e,t){if(-1===d.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},e.Headers=h,e.Request=E,e.Response=S,e.fetch=function(e,t){return new Promise((function(r,o){var i=new E(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new S(o,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function p(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=y(t);return t.readAsArrayBuffer(e),r}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(n&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&n&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,r,n=m(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=y(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}function E(e,t){var r,n,o=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),u.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function I(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t){e.exports={mergeResponses:function e(t,r){for(var n in t)"string"==typeof t[n]||"number"==typeof t[n]||"boolean"==typeof t[n]||null===t[n]||void 0===t[n]?r[n]=t[n]:(r[n]=r[n]||{},r[n]=e(t[n],r[n]));return r},breakQueryIntoSubQueries:function e(t,r){if(t.length<=2)return[t];if(encodeURIComponent(JSON.stringify(t)).length<=r)return[t];for(var n=Math.ceil(t.length/2),o=[],i=[],a=0;a<n;a++)o.push(t[a]);for(;a<t.length;a++)i.push(t[a]);return e(o).concat(e(i))},getQueryVariable:function(e,t){for(var r=e.split("?"),n=(r.length>1?r[1].substring(0):"").split("&"),o=0;o<n.length;o++){var i=n[o].split("=");if(decodeURIComponent(i[0])==t)return i[1]}}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=[],o={url:e},i=-1!==e.indexOf("?")?"&":"?";return"string"==typeof r?n.push(r):Object.keys(r).forEach((function(e){var t="object"==typeof r[e]?JSON.stringify(r[e]):r[e];n.push(e+"="+encodeURIComponent(t))})),"GET"===t?o.url+=i+n.join("&"):o.data=n.join("&"),o}},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t),r.d(t,"init",(function(){return Eo}));var n={};r.r(n),r.d(n,"ADD_ADD_ON_ITEM",(function(){return q})),r.d(n,"ADD_DEVICE",(function(){return Qe})),r.d(n,"ADD_DEVICE_MODAL",(function(){return Me})),r.d(n,"ADD_LINE_ITEM",(function(){return W})),r.d(n,"ADD_SKU_TO_COMPARE",(function(){return we})),r.d(n,"ADD_TO_CART_SUCCESS",(function(){return We})),r.d(n,"BUYING_OPTIONS_ANCHOR",(function(){return ve})),r.d(n,"CHANGE_SKU",(function(){return F})),r.d(n,"CLEAR_ALERT",(function(){return ue})),r.d(n,"CLEAR_SEARCH",(function(){return gt})),r.d(n,"DANGER_ALERT",(function(){return se})),r.d(n,"DEBUG",(function(){return te})),r.d(n,"DEREGISTER_CART_ITEMS",(function(){return Nt})),r.d(n,"DEVICE_DETAILS_MODAL",(function(){return He})),r.d(n,"DISPLAY_ALERT",(function(){return ne})),r.d(n,"ERROR",(function(){return ee})),r.d(n,"INFO",(function(){return Z})),r.d(n,"INFO_ALERT",(function(){return ie})),r.d(n,"INTERRUPTION_PERMISSION_RESPONSE",(function(){return St})),r.d(n,"INTERRUPTION_STATUS_UPDATE",(function(){return _t})),r.d(n,"LOG",(function(){return X})),r.d(n,"MANUFACTURE_CONTENT_ANCHOR",(function(){return ge})),r.d(n,"MODAL_CLOSED",(function(){return qe})),r.d(n,"MODAL_OPENED",(function(){return Fe})),r.d(n,"QUESTIONS_ANSWERS_ANCHOR",(function(){return be})),r.d(n,"RATINGS_REVIEWS_ANCHOR",(function(){return Ee})),r.d(n,"REFRESH_DEVICE_CONFIGURATION",(function(){return Ce})),r.d(n,"REGISTER_CART_ITEMS",(function(){return kt})),r.d(n,"REMOVE_ADD_ON_ITEM",(function(){return z})),r.d(n,"REMOVE_DEVICE",(function(){return Xe})),r.d(n,"REMOVE_LINE_ITEM",(function(){return Q})),r.d(n,"REMOVE_SKU_FROM_COMPARE",(function(){return Re})),r.d(n,"REQUEST_INTERRUPTION_PERMISSION",(function(){return Et})),r.d(n,"RETURN_FORM",(function(){return Pt})),r.d(n,"SET_ACTIVATED_PRICING_OPTION",(function(){return yt})),r.d(n,"SET_ANCHOR",(function(){return Te})),r.d(n,"SET_DESTINATION_ZIP_CODE",(function(){return me})),r.d(n,"SET_DEVICE_LIST_COUNT",(function(){return tt})),r.d(n,"SET_DEVICE_LIST_FILTER",(function(){return nt})),r.d(n,"SET_DEVICE_LIST_PAGE",(function(){return $e})),r.d(n,"SET_DEVICE_LIST_SEARCH",(function(){return it})),r.d(n,"SET_DEVICE_LIST_SORT",(function(){return st})),r.d(n,"SET_EASY_REPLENISH",(function(){return lt})),r.d(n,"SET_FACET_VIEW_VISIBILITY",(function(){return M})),r.d(n,"SET_FORM",(function(){return Ot})),r.d(n,"SET_PROTECTION_PLAN",(function(){return Ae})),r.d(n,"SET_SAVED_ITEMS_SKU_STATE",(function(){return De})),r.d(n,"SET_SELECTED_INSTALLATION_SKU",(function(){return ze})),r.d(n,"SET_SELECTED_NEARBY_STORE_ID_LIST",(function(){return fe})),r.d(n,"SET_SKU_LIST_FACET_LIST",(function(){return j})),r.d(n,"SET_SKU_LIST_PAGE",(function(){return U})),r.d(n,"SET_SKU_LIST_SORT",(function(){return D})),r.d(n,"SET_STORE_ID",(function(){return le})),r.d(n,"SET_TIME_BASED_SUBSCRIPTION",(function(){return ut})),r.d(n,"SET_VEHICLE",(function(){return je})),r.d(n,"SKU_CARD_ADD_TO_CART_CLICKED",(function(){return ht})),r.d(n,"SKU_CARD_PDP_CLICKED",(function(){return ft})),r.d(n,"SPECIFICATIONS_ANCHOR",(function(){return Ie})),r.d(n,"STEPUP_ANCHOR",(function(){return Se})),r.d(n,"SUCCESS_ALERT",(function(){return oe})),r.d(n,"USER_LIST_MODIFIED",(function(){return Ue})),r.d(n,"WARN",(function(){return $})),r.d(n,"WARNING_ALERT",(function(){return ae})),r.d(n,"addAddOnItem",(function(){return K})),r.d(n,"addDevice",(function(){return Ye})),r.d(n,"addLineItem",(function(){return J})),r.d(n,"addSkuToCompare",(function(){return Pe})),r.d(n,"addToCartSuccess",(function(){return Je})),r.d(n,"changeSku",(function(){return B})),r.d(n,"clearAlert",(function(){return de})),r.d(n,"clearSearch",(function(){return bt})),r.d(n,"deregisterCartItems",(function(){return Dt})),r.d(n,"displayAlert",(function(){return ce})),r.d(n,"interruptionPermissionResponse",(function(){return Tt})),r.d(n,"interruptionStatusUpdate",(function(){return Ct})),r.d(n,"log",(function(){return re})),r.d(n,"modalClosed",(function(){return Ke})),r.d(n,"modalOpened",(function(){return Be})),r.d(n,"refreshDeviceConfiguration",(function(){return Oe})),r.d(n,"registerCartItems",(function(){return At})),r.d(n,"removeAddOnItem",(function(){return G})),r.d(n,"removeDevice",(function(){return Ze})),r.d(n,"removeLineItem",(function(){return Y})),r.d(n,"removeSkuFromCompare",(function(){return ke})),r.d(n,"requestInterruptionPermission",(function(){return It})),r.d(n,"returnForm",(function(){return Rt})),r.d(n,"setActivatedPricingOption",(function(){return vt})),r.d(n,"setAnchor",(function(){return _e})),r.d(n,"setDestinationZipCode",(function(){return ye})),r.d(n,"setDeviceListCount",(function(){return rt})),r.d(n,"setDeviceListFilter",(function(){return ot})),r.d(n,"setDeviceListPage",(function(){return et})),r.d(n,"setDeviceListSearch",(function(){return at})),r.d(n,"setDeviceListSort",(function(){return ct})),r.d(n,"setEasyReplenish",(function(){return pt})),r.d(n,"setFacetViewVisibility",(function(){return H})),r.d(n,"setForm",(function(){return wt})),r.d(n,"setProtectionPlan",(function(){return Ne})),r.d(n,"setSavedItemsSkuState",(function(){return Le})),r.d(n,"setSelectedInstallationSku",(function(){return Ge})),r.d(n,"setSelectedNearbyStoreIdList",(function(){return he})),r.d(n,"setSkuListFacetList",(function(){return x})),r.d(n,"setSkuListPage",(function(){return V})),r.d(n,"setSkuListSort",(function(){return L})),r.d(n,"setStoreId",(function(){return pe})),r.d(n,"setTimeBasedSubscription",(function(){return dt})),r.d(n,"setVehicle",(function(){return xe})),r.d(n,"skuCardEvent",(function(){return mt})),r.d(n,"userListModified",(function(){return Ve}));r(26);var o=r(0),i=r.n(o),a=r(9),s=r.n(a),c=r(2),u=r.n(c),d=r(5),l=r(13),p=r(14),f=()=>{var e=window.metaLayer||window._metaLayer;return{metaLayer:{device_deviceClass:Object(c.get)(e,"device_deviceClass","l"),env_assets:Object(c.get)(e,"env_assets","https://www.bestbuy.com/~assets/bby/_com"),env_falcor:Object(c.get)(e,"env_falcor","https://pw-non-srvcmpwrv-app-elb-ia.bestbuy.com"),env_pisces:Object(c.get)(e,"env_pisces","https://pisces.bbystatic.com")}}},h=r(4),m=r(15),y=r.n(m),v="ADD_CAROUSEL_PRODUCT_IDS",g="ADD_PRODUCTS",b="SET_HIDE_CAROUSELS",E="HIDE_PRODUCT_LOADER",I="SHOW_PRODUCT_LOADER",S="TRACK_DISPATCHED_CRITEO_SKU_ID",T="UPDATE_CAROUSEL",_="UPDATE_CONFIG",C="UPDATE_PRODUCT",O="RESET_TO_DEFAULT_STATE",w={addCarouselProductIds:(e,t)=>({type:v,carouselKey:e,productIds:t}),addProducts:e=>({type:g,products:e}),hideProductLoader:e=>({type:E,productId:e}),resetToDefaultState:()=>({type:O}),showProductLoader:e=>({type:I,productId:e}),updateCarousel:(e,t)=>({type:T,carouselKey:e,updatedCarousel:t}),updateConfig:e=>({type:_,config:e}),updateProduct:(e,t)=>({type:C,productId:e,product:t}),setHideCarousels:e=>(void 0===e&&(e=!0),{type:b,payload:e}),trackDispatchedCriteoSkuId:e=>({type:S,payload:{skuId:e}})};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var R={instanceId:null,driverSkuId:null,placement:null,subplacements:[],recommend:5,pageLength:3,shouldShowAddToCart:!0,shouldShowCompare:!1,shouldShowSaveForLater:!1,deviceClass:"l",layout:"standard",useCategory:!1,tooltipPosition:"top"};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){switch(void 0===e&&(e={}),t.type){case v:return k({},e,{productIds:[...e.productIds||[],...t.productIds]});case T:var{updatedCarousel:r}=t;return k({},e,r)}return e}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var D="SET_SKU_LIST_SORT";function L(e){return{type:D,sort:e}}var j="SET_SKU_LIST_FACET_LIST";function x(e){return{type:j,facetList:e}}var U="SET_SKU_LIST_PAGE";function V(e){return{type:U,page:e}}var M="SET_FACET_VIEW_VISIBILITY";function H(e,t){return{type:M,isVisible:e,facetField:t}}var F="CHANGE_SKU";function B(e){return{type:F,skuId:e}}var q="ADD_ADD_ON_ITEM";function K(e){var{skuId:t}=e;return{type:q,payload:{skuId:t}}}var z="REMOVE_ADD_ON_ITEM";function G(e){var{skuId:t}=e;return{type:z,payload:{skuId:t}}}var W="ADD_LINE_ITEM";function J(e){return{type:W,lineItemId:e}}var Q="REMOVE_LINE_ITEM";function Y(e){return{type:Q,lineItemId:e}}var X="LOG",Z="INFO",$="WARN",ee="ERROR",te="DEBUG";function re(e,t,r,n,o,i,a){return{type:X,level:e,message:t,error:r,componentId:o,creatorNamespace:n,contractVersion:i,instanceId:a}}var ne="DISPLAY_ALERT",oe="SUCCESS_ALERT",ie="INFO_ALERT",ae="WARNING_ALERT",se="DANGER_ALERT";function ce(e,t){return{id:Math.random().toString(10),type:ne,level:e,message:t}}var ue="CLEAR_ALERT";function de(e){return{displayAlertId:e.id,type:ue}}var le="SET_STORE_ID";function pe(e){if(!e)throw new Error("Set store requires the storeId.");return{type:le,storeId:e}}var fe="SET_SELECTED_NEARBY_STORE_ID_LIST";function he(e){return{type:fe,payload:{storeIdList:e}}}var me="SET_DESTINATION_ZIP_CODE";function ye(e){return function(e){if("string"!=typeof e||5!==e.length)throw new Error("Invalid zip code provided to action creator.")}(e),{type:me,destinationZipCode:e}}var ve="BUYING_OPTIONS_ANCHOR",ge="MANUFACTURE_CONTENT_ANCHOR",be="QUESTIONS_ANSWERS_ANCHOR",Ee="RATINGS_REVIEWS_ANCHOR",Ie="SPECIFICATIONS_ANCHOR",Se="STEPUP_ANCHOR",Te="SET_ANCHOR";function _e(e,t){return{type:Te,to:e,timeStamp:t}}var Ce="REFRESH_DEVICE_CONFIGURATION";function Oe(e){return{type:Ce,deviceId:e}}var we="ADD_SKU_TO_COMPARE";function Pe(e){return{type:we,skuId:e}}var Re="REMOVE_SKU_FROM_COMPARE";function ke(e){return{type:Re,skuId:e}}var Ae="SET_PROTECTION_PLAN";function Ne(e){return{type:Ae,skuId:e}}var De="SET_SAVED_ITEMS_SKU_STATE";function Le(e,t){return{type:De,isSaved:t,skuId:e}}var je="SET_VEHICLE";function xe(e,t){var r=!1;if((null===e&&null===t||"number"==typeof e&&"string"==typeof t&&e>=0&&t)&&(r=!0),!r)throw new Error("One or more required parameters is missing or invalid.");return{type:je,vehicleId:e,vehicleYear:t}}var Ue="USER_LIST_MODIFIED";function Ve(e,t){return{type:Ue,uuid:e,listType:t}}var Me="ADD_DEVICE_MODAL",He="DEVICE_DETAILS_MODAL",Fe="MODAL_OPENED";function Be(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),{type:Fe,modalType:e,params:Object.assign({},t)}}var qe="MODAL_CLOSED";function Ke(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),{type:qe,modalType:e,params:Object.assign({},t)}}var ze="SET_SELECTED_INSTALLATION_SKU";function Ge(e){return{type:ze,payload:{skuId:e}}}var We="ADD_TO_CART_SUCCESS",Je=e=>{var{cartCount:t,cartSubTotal:r,items:n=[],lineId:o,skuId:i}=e;return{type:We,payload:{cartCount:t,cartSubTotal:r,skuId:i,lineId:o,items:n}}},Qe="ADD_DEVICE";function Ye(e){return{type:Qe,deviceUuid:e}}var Xe="REMOVE_DEVICE";function Ze(e){return{type:Xe,deviceUuid:e}}var $e="SET_DEVICE_LIST_PAGE",et=()=>({type:$e}),tt="SET_DEVICE_LIST_COUNT",rt=e=>({type:tt,count:e}),nt="SET_DEVICE_LIST_FILTER",ot=e=>{var{filter:t,groupUuid:r}=e;return{type:nt,filter:t,groupUuid:r}},it="SET_DEVICE_LIST_SEARCH",at=e=>({type:it,search:e}),st="SET_DEVICE_LIST_SORT",ct=e=>({type:st,sort:e}),ut="SET_TIME_BASED_SUBSCRIPTION",dt=(e,t)=>({type:ut,frequency:e,units:t}),lt="SET_EASY_REPLENISH",pt=e=>({type:lt,replenishId:e}),ft="SKU_CARD_PDP_CLICKED",ht="SKU_CARD_ADD_TO_CART_CLICKED",mt=e=>{var{skuCardEventType:t,epValue:r,skuId:n,instanceId:o}=e;return{type:t,epValue:r,skuId:n,instanceId:o}},yt="SET_ACTIVATED_PRICING_OPTION",vt=e=>{var{skuId:t="",mobileContract:r,retailOption:n}=e;return{type:yt,skuId:t,mobileContract:r,retailOption:n}},gt="CLEAR_SEARCH",bt=e=>{var{instanceId:t}=e;return{type:gt,payload:{instanceId:t}}},Et="REQUEST_INTERRUPTION_PERMISSION",It=e=>{var{deviceClass:t,interruptionId:r,interruptionType:n,placement:o,requestedInterruptionDuration:i,options:a}=e;return{type:Et,payload:{deviceClass:t,interruptionId:r,interruptionType:n,placement:o,requestedInterruptionDuration:i,options:a}}},St="INTERRUPTION_PERMISSION_RESPONSE",Tt=e=>{var{interruptionDuration:t,interruptionId:r,interruptionType:n,permissionGranted:o,reason:i}=e;return{type:St,payload:{interruptionDuration:t,interruptionId:r,interruptionType:n,permissionGranted:o,reason:i}}},_t="INTERRUPTION_STATUS_UPDATE",Ct=e=>{var{interruptionId:t,status:r,interruptionType:n,placement:o}=e;return{type:_t,payload:{interruptionId:t,interruptionType:n,placement:o,status:r}}},Ot="SET_FORM",wt=function(e,t){return void 0===t&&(t="defaultId"),{type:Ot,payload:{formData:e,formId:t}}},Pt="RETURN_FORM",Rt=function(e,t,r){return void 0===t&&(t="defaultId"),void 0===r&&(r=!1),{type:Pt,payload:{formData:e,formId:t,isFormValid:r}}},kt="REGISTER_CART_ITEMS",At=e=>{var{cartItems:t}=e;if(!t||!t.every(e=>e&&e.itemKey&&e.skuId))throw new Error("Invalid cartItems: "+JSON.stringify(t)+". Each cartItem must have an itemKey and a skuId");return{type:kt,payload:t}},Nt="DEREGISTER_CART_ITEMS",Dt=e=>{var{itemKeys:t}=e;return{type:Nt,payload:t}};function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var jt=function(e){return void 0===e&&(e=[]),e.reduce((e,t)=>{var{facetField:r,value:n}=t;return Lt({},e,{[r]:e[r]?[...e[r],n]:[n]})},{})};function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ut={hideCarousels:!1},Vt=Object(h.combineReducers)({config:function(e,t){switch(void 0===e&&(e=R),t.type){case _:var{config:r}=t;return P({},e,r);default:return e}},products:function(e,t){switch(void 0===e&&(e={}),t.type){case g:var{products:r}=t,n=r.reduce((e,t)=>N({},e,{[t.id]:t}),{});return N({},n,e);case C:var{productId:o,product:i}=t;return N({},e,{[o]:N({},e[o]||{},i,{id:o})});case O:return{}}return e},loadingProductIds:function(e,t){switch(void 0===e&&(e=[]),t.type){case E:return e.filter(e=>e!==t.productId);case I:return[...e,t.productId];case O:return[]}return e},refreshedProductIds:function(e,t){switch(void 0===e&&(e=[]),t.type){case C:return[...e,t.productId];case O:return[]}return e},carousels:function(e,t){switch(void 0===e&&(e={}),t.type){case v:case T:var{carouselKey:r}=t;return k({},e,{[r]:A(e[r],t)});case O:return k({},Object.keys(e).reduce((e,t)=>k({},e,{[t]:{key:t,title:"  ",productIds:[],isLoading:!0}}),{}))}return e},dispatchedCriteoSkuIds:function(e,t){switch(void 0===e&&(e=[]),t.type){case S:return[...e,t.payload.skuId]}return e},hideCarouselsReducer:function(e,t){switch(void 0===e&&(e=Ut),t.type){case b:return xt({},e,{hideCarousels:t.payload});case O:return xt({},Ut)}return e},facetsReducer:function(e,t){switch(void 0===e&&(e={}),t.type){case j:var{facetList:r}=t;return jt(r)}return e}}),Mt=Object(h.combineReducers)({app:Vt,metaLayer:function(e){return void 0===e&&(e={}),e}}),Ht=r(10),Ft=e=>t=>r=>{var o=t(r);return-1===Object.keys(n).indexOf(r.type)||r.meta&&r.meta.incoming||Object(Ht.dispatch)(r,e.getState().app.config.instanceId),o};var Bt=r(16),qt=r.n(Bt),Kt=r(17),zt=r.n(Kt),Gt=r(18),Wt=r.n(Gt);function Jt(){return{get:()=>new Promise}}var Qt=function(){if("undefined"==typeof window)return Jt();var{metaLayer:e,_metaLayer:t}=window,{env_falcor:r}=e||t;if(!r)return Jt();var n=new Wt.a(r.replace(/\/$/,"")+"/model.json",{credentials:"same-origin",maxQuerySize:99999999}),o=new zt.a.Model({maxRetries:12,source:n,comparator(e,t,r){void 0===t&&o.invalidate(r)},errorSelector(e){e.$expires=0}});return o}();function Yt(){return(Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Xt=/(\d+)\.\.(\d+)/;function Zt(e,t){return r=>{var n={};return t.forEach(t=>{(function e(t){if(!Xt.test(t))return[t];for(var[r,n]=t.match(Xt).slice(1),o=[],i=r;i<=n;i++)o.push(t.replace(Xt,i));return u.a.flattenDeep(o.map(t=>e(t)))})(t).forEach(t=>{var o=u.a.get(r,"json."+e+"."+t);u.a.set(n,t,o)})}),n}}class $t{static fetch(e){var t=Object.keys(e),r=function(e){var t=[];return Object.keys(e).forEach(r=>{var{route:n,dataKeys:o}=e[r];o.forEach(e=>{t.push({routerKey:r,route:n,dataKey:e})})}),t}(e).map(e=>{var{route:t,dataKey:r}=e;return t+"."+r}),n=t.reduce((t,r)=>{var{route:n,dataKeys:o}=e[r];return Yt({},t,{[r]:Zt(n,o)})},{});return Qt.get(...r).then(e=>t.reduce((t,r)=>Yt({},t,{[r]:(0,n[r])(e)}),{}))}static fetchStaggered(e){var t=Object.keys(e),r=t.reduce((t,r)=>{var{route:n,dataKeys:o}=e[r],i=$t.fetchRouteData(n,o);return t.concat(i)},[]);return Promise.all(r).then(e=>t.reduce((t,r,n)=>Yt({},t,{[r]:e[n]}),{}))}static fetchRouteData(e,t){var r=Zt(e,t);return Qt.get(...t.map(t=>e+"."+t)).then(r)}}function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tr(e,t){return void 0===t&&(t=!1),r=>function(e,t,r){return void 0===r&&(r={}),Object.keys(t).reduce((r,n)=>{var o=t[n];switch(typeof o){case"string":r[n]=u.a.get(e,o.replace(/@/g,n));break;case"function":r[n]=o(e)}return r},r)}(r,e,t?er({},r):{})}var rr=tr({src:e=>{var{product:t}=e,r=t.images.find(e=>{var{primary:t}=e;return t}),{piscesHref:n}=r||{};return n||""},alt:"product.names.short"}),nr=tr({rating:"reviews.averageOverallRating.rounded",total:"reviews.totalReviewCount"}),or=tr({id:"product.skuId",url:"sites.relativePdpUrl",image:rr,title:"product.names.short",description:"product.descriptions.short",reviews:nr,department:"dcs.department.id",class:"dcs.class.id",subclass:"dcs.subclass.id"});function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sr=function(e){if(!e||!e.hasOwnProperty("map"))throw new Error("map required");var t=e.map;return Array.isArray(t)?t:"object"===ir(t)&&null!==t?Object.keys(t).map((function(e){return t[e]})):[]},cr=tr({id:"sites.comboId",url:"sites.sites.bbypres.relativePdpUrl",title:"product.names.short",driverSkuId:"combo.driverSku.skuId",skuIds:e=>{var{combo:t}=e;return sr({map:t.products.all}).reduce((e,t)=>{var r;for(r=0;r<t.quantity;r++)e.push(t.skuId);return e},[])}}),ur=tr({id:"@",ep:"@",productType:()=>"SKU",sponsoredClickURL:"@",sponsoredImpressionURL:"@",sponsoredProduct:"@"}),dr=tr({title:"@",ep:"@",recommendedSkus:e=>e._entries.map(ur)});var lr="SKU",pr="COMBO";function fr(e){var t=document.cookie.match(e+"=([^;]*)");return t?t[1]:void 0}function hr(e,t){var r=e.getBoundingClientRect(),n=Math.abs((r.bottom-r.top)*(r.right-r.left)),o=Math.max(r.left,0),i=Math.min(r.right,window.innerWidth),a=Math.min(r.bottom,window.innerHeight),s=Math.max(r.top,0),c=0,u=0;return o<i&&a>s&&(c=Math.abs((i-o)*(a-s)),u=Math.trunc(c/n*100)),u>=t}var mr=(e,t)=>Object(c.uniq)([e,...t].filter(e=>!isNaN(e)&&e)).join(",");var yr=e=>Object.keys(e).map(t=>t+":"+encodeURIComponent(e[t].join("~"))).join(";"),vr=tr({id:"@",productType:e=>e.type,ep:"@",sponsoredClickURL:e=>e.tags&&e.tags.sponsoredClickUrl,sponsoredImpressionURL:e=>e.tags&&e.tags.sponsoredImpressionUrl,sponsoredProduct:"tags.@"}),gr=tr({title:"@",ep:"@",recommendedSkus:e=>e.recommendations.map(vr)});function br(e){if(!e.placement)return Promise.reject(new TypeError("Unified v2 API requires `placement`"));if(!e.site)return Promise.reject(new TypeError("Unified v2 API requires `site`"));var t=fr("vt")||"",r=fr("ut")||"",n=fr("locStoreId")||"",o=e.v2RecommendationsDomain+"/api/recommender/v2/unified/site/"+e.site+"/placement/"+e.placement+"?vt="+t+"&ut="+r+"&pageSize="+e.pageSize+"&skus="+e.skus+"&categories="+e.categories+"&subplmts="+e.subplacements+"&storeIds="+n+"&combos="+e.comboIds+"&st="+e.searchTerm;return fetch(o,{method:"GET",headers:{"X-API-KEY":e.v2RecommendationsApiKey,"X-CLIENT-ID":e.v2RecommendationsClientId}}).then(e=>{if(!e.ok)throw new Error("V2 recommendations fetch failed with status: "+e.status+" and message: "+e.statusText);return 204===e.status?{}:e.json()})}function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class Ir{static fetchSku(e){return $t.fetch({product:{route:'shop.magellan.v2.product.skus["'+e+'"]',dataKeys:["skuId","images[0..30].primary","images[0..30].piscesHref","names.title","names.short","descriptions.short"]},dcs:{route:'shop.magellan.v1.item.skus["'+e+'"]',dataKeys:["class.id","department.id","subclass.id"]},sites:{route:'shop.magellan.v1.sites.skuId["'+e+'"].sites.bbypres',dataKeys:["relativePdpUrl"]}}).then(or)}static fetchCombo(e){return $t.fetch({product:{route:'shop.magellan.v2.combo.product.combos["'+e+'"]',dataKeys:["names.short"]},sites:{route:'shop.magellan.v1.combo.sites.combos["'+e+'"]',dataKeys:["comboId","sites.bbypres.relativePdpUrl"]},combo:{route:'shop.magellan.v1.combo.combos["'+e+'"]',dataKeys:["products.all","driverSku.skuId"]}}).then(cr)}static fetchHierarchy(e){return $t.fetch({hierarchy:{route:"shop.magellan.v2.hierarchy.skus['"+e+"'].hierarchies.bbypres[0]",dataKeys:["href"]}})}static fetchRecommendations(e){var t,{category:r="",dataTimeout:n,deviceClass:o,driverSkuId:i,limit:a=3,placement:s,recSkuIdsBlacklist:c,searchTerm:u,subplacements:d,facets:l,displayCombos:p,v2RecommendationsApiKey:f,v2RecommendationsClientId:h,v2RecommendationsDomain:m,comboIds:y}=e;t=p?br({categories:r||"",comboIds:y||"",pageSize:a,placement:s,searchTerm:u||"",skus:mr(i,c)||"",site:"dotcom-"+o,subplacements:d.join(","),timeout:n,v2RecommendationsApiKey:f||"",v2RecommendationsClientId:h||"",v2RecommendationsDomain:m||""}):qt.a.request({category:r,pageSize:a,plmt:s,searchTerm:u,sku:mr(i,c),src:"dotcom-"+o,subplmt:d.join(","),timeout:n,facets:Object.keys(l).length?yr(l):null});var v=p?gr:dr;return t.then(e=>d.reduce((t,r)=>Er({},t,{[r]:v(e[r])}),{}))}}function Sr(e,t){return e===t}function Tr(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function _r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var Cr=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,a=n.pop(),s=_r(n),c=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=a,u.dependencies=s,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr,r=null,n=null;return function(){return Tr(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));var Or=e=>e.app,wr=Cr(Or,e=>{var{config:t}=e;return t}),Pr=Cr(Or,e=>{var{facetsReducer:t}=e;return t}),Rr=Cr(Or,e=>{var{hideCarouselsReducer:t}=e;return t}),kr=Cr(wr,e=>{var{deviceClass:t}=e;return t}),Ar=Cr(Pr,e=>e),Nr=Cr(Rr,e=>{var{hideCarousels:t}=e;return t}),Dr=Cr(wr,e=>{var{instanceId:t}=e;return t}),Lr=Cr(wr,e=>{var{addToCartReportingVariables:t}=e;return t}),jr=Cr(wr,e=>{var{layout:t}=e;return t}),xr=Cr(wr,e=>{var{driverSkuId:t}=e;return t}),Ur=Cr([Or],e=>{var{products:t}=e;return t}),Vr=(e,t)=>Ur(t)[e].driverSkuId,Mr=(e,t)=>Ur(t)[e].skuIds,Hr=(e,t)=>Ur(t)[e].productType===pr,Fr=Cr(wr,e=>{var{shouldIncludeCombosInCarousel:t}=e;return t}),Br=Cr(wr,e=>{var{abt1768Value:t}=e;return t}),qr=Cr(Br,Fr,(e,t)=>!(!e||"B"!==e.toUpperCase())||(!e||"A"!==e.toUpperCase())&&t),Kr=Cr(wr,e=>{var{shouldShowAddToCart:t}=e;return t});function zr(e,t){var{updateCarousel:r,addCarouselProductIds:n}=w,{title:o,ep:i,recommendedSkus:a}=t;return t=>{var s=a.map(e=>{var{id:t}=e;return t});t(n(e,s)),t(r(e,{title:o,ep:i,isLoading:!1}))}}function Gr(){var{addProducts:e,setHideCarousels:t}=w;return(r,n)=>{r((e,t)=>{"undefined"!=typeof window&&void 0!==window.__ABT1768&&e(w.updateConfig({abt1768Value:window.__ABT1768}))});var o,{dataTimeout:i,deviceClass:a,driverSkuId:s,placement:c,subplacements:u,searchTerm:d,recommend:l,recSkuIdsBlacklist:p,useCategory:f,overrideRecommendedSkuIds:h,overrideTitle:m,v2RecommendationsApiKey:y,v2RecommendationsClientId:v,v2RecommendationsDomain:g,comboIds:b}=n().app.config,E=Ar(n()),I=qr(n());return h&&h.length>0?function(e){var{dispatch:t,addProducts:r,overrideRecommendedSkuIds:n,overrideTitle:o}=e,i=n.map(e=>({id:e,productType:lr,source:"override"})),a={title:o,ep:"carousel",recommendedSkus:i};return t(r(i)),t(zr("carousel",a)),Promise.resolve({carousel:a})}({dispatch:r,addProducts:e,overrideRecommendedSkuIds:h,overrideTitle:m}):f?(o=s,Ir.fetchHierarchy(o).then(e=>{var t,{hierarchy:r}=e;return(t=r.href)?t.split("/").pop():null})).then(n=>Wr({dataTimeout:i,driverSkuId:s,placement:c,subplacements:u,deviceClass:a,recommend:l,recSkuIdsBlacklist:p,dispatch:r,addProducts:e,setHideCarousels:t,category:n,searchTerm:d,facets:E,displayCombos:I,v2RecommendationsApiKey:y,v2RecommendationsClientId:v,v2RecommendationsDomain:g,comboIds:b})):Wr({dataTimeout:i,driverSkuId:s,placement:c,subplacements:u,deviceClass:a,recommend:l,recSkuIdsBlacklist:p,dispatch:r,addProducts:e,setHideCarousels:t,searchTerm:d,facets:E,displayCombos:I,v2RecommendationsApiKey:y,v2RecommendationsClientId:v,v2RecommendationsDomain:g,comboIds:b})}}function Wr(e){var{dataTimeout:t,driverSkuId:r,placement:n,subplacements:o,deviceClass:i,recommend:a,recSkuIdsBlacklist:s,dispatch:c,addProducts:d,setHideCarousels:l,category:p,searchTerm:f,facets:h,displayCombos:m,v2RecommendationsApiKey:y,v2RecommendationsClientId:v,v2RecommendationsDomain:g,comboIds:b}=e;return Ir.fetchRecommendations({category:p,dataTimeout:t,deviceClass:i,driverSkuId:r,limit:a,placement:n,recSkuIdsBlacklist:s,searchTerm:f,subplacements:o,facets:h,displayCombos:m,v2RecommendationsApiKey:y,v2RecommendationsClientId:v,v2RecommendationsDomain:g,comboIds:b}).then(e=>{var t=!0;return u.a.forEach(e,(e,r)=>{var{recommendedSkus:n}=e;n.length&&(t=!1),c(d(n)),c(zr(r,e))}),t&&c(l(!0)),e}).catch(e=>{c(l(!0))})}var Jr=r(1),Qr=r.n(Jr);function Yr(e){var t={transform:"translateX(-"+100*e.page+"%)"};return i.a.createElement("ul",{className:"child-items",style:t},e.items.map((t,r)=>{var n={width:(100/e.itemsPerSlide).toFixed(5)+"%",visibility:e.visibleChildIndices.includes(r)?"visible":"hidden"},o=e.visibleChildIndices[0]===r,a=!e.isPaginating&&o&&e.focusFirstVisibleChild?i.a.cloneElement(t,{isFocused:!0}):t;return i.a.createElement("li",{key:r,style:n},a)}))}function Xr(e){var{itemCount:t,title:r,showPageNumber:n,showHeadingUnderline:o,currentPage:a,totalPages:s}=e;return i.a.createElement("div",{className:"header-wrapper"},i.a.createElement("div",{className:"header clearfix"},i.a.createElement("h2",{className:"title v-fw-medium"},r," ",i.a.createElement("span",{className:"sr-only"},"carousel"),t>=0?i.a.createElement("span",{className:"item-count body-copy"},"(",t," Items)"):null),n&&i.a.createElement("div",{className:"header-page-tracker","aria-live":"polite"},"Page ",i.a.createElement("span",{className:"v-fw-medium pager-paging-current"},a)," of ",i.a.createElement("span",{className:"v-fw-medium pager-paging-total"},s))),o&&i.a.createElement("div",{className:"v-divide-bottom"}))}Yr.propTypes={itemsPerSlide:Qr.a.number,visibleChildIndices:Qr.a.arrayOf(Qr.a.number),items:Qr.a.arrayOf(Qr.a.element),isPaginating:Qr.a.bool,focusFirstVisibleChild:Qr.a.bool,page:Qr.a.number},Xr.propTypes={itemCount:Qr.a.number,title:Qr.a.string.isRequired,showPageNumber:Qr.a.bool,showHeadingUnderline:Qr.a.bool,currentPage:Qr.a.number,totalPages:Qr.a.number};var Zr=r(19);function $r(e){var{direction:t="left",size:r="large",onAction:n=(()=>{}),disabled:o}=e;return i.a.createElement("button",{className:"arrow-"+t+" "+r+" "+(o?"disabled":""),disabled:o,onClick:e=>n(e)},i.a.createElement(Zr.PLSVG,{icon:"Caret_"+("left"===t?"Left":"Right")+"_Line_Sm",className:"ficon-size-mini","aria-hidden":"true"}),i.a.createElement("span",{className:"sr-only"},"left"===t?"Previous":"Next"))}function en(e,t){return Math.ceil(e.length/t)}$r.propTypes={direction:Qr.a.oneOf(["left","right"]),size:Qr.a.oneOf(["small","medium","large"]),onAction:Qr.a.func,disabled:Qr.a.bool};class tn extends i.a.Component{constructor(e){super(e),this.state={page:0,isPaginating:!1,isKeyPressed:!1},this.lastEmittedPage=-1,this.didManuallyPaginate=!1}componentDidMount(){this.emitOnPage(this.state.page)}render(){var{deviceClass:e,title:t,children:r,itemsPerSlide:n,showHeader:o=!!t,showHeadingUnderline:a,showItemCount:s,showPageNumber:c,focusOnlyOnPagination:u}=this.props,{isPaginating:d}=this.state,l=i.a.Children.toArray(r),p=en(l,n),f="s"===e,h=l.length,m=d||f?l.map((e,t)=>t):function(e,t){for(var r=e*t,n=r+t,o=[],i=r;i<n;i++)o.push(i);return o}(this.state.page,n),y=!f&&l.length>1;return i.a.createElement("div",{className:"pager-carousel "+(f?"small-view":"")},o&&i.a.createElement(Xr,{itemCount:s?h:-1,title:t,showPageNumber:y&&c,showHeadingUnderline:a,currentPage:this.state.page+1,totalPages:p}),i.a.createElement("div",{className:"pager-carousel-content"},y&&i.a.createElement($r,{direction:"left",size:"large",disabled:this.isPreviousDisabled(),onAction:e=>this.prevSlide(e)}),i.a.createElement("div",{className:"child-items-wrapper",onScroll:e=>this.onScroll(e)},i.a.createElement(Yr,{items:l,page:this.state.page,isPaginating:this.state.isPaginating,isKeyPressed:this.state.isKeyPressed,itemsPerSlide:n,visibleChildIndices:m,focusFirstVisibleChild:!u||this.didManuallyPaginate})),y&&i.a.createElement($r,{direction:"right",size:"large",disabled:this.isNextDisabled(),onAction:e=>this.nextSlide(e)})))}emitOnPage(e){var{onPage:t}=this.props;this.lastEmittedPage=e,"function"==typeof t&&t(e)}onScroll(e){var{clientWidth:t,scrollLeft:r}=e.currentTarget,n=Math.ceil(r/t);n!==this.lastEmittedPage&&this.emitOnPage(n)}changeSlide(e){this.state.isPaginating||(this.didManuallyPaginate=!0,this.setState({page:e,isPaginating:!0}),this.emitOnPage(e),setTimeout(()=>{this.setState({isPaginating:!1})},500))}nextSlide(e){this.isNextDisabled()||(this.setFocus(e),this.changeSlide(this.state.page+1))}prevSlide(e){this.isPreviousDisabled()||(this.setFocus(e),this.changeSlide(this.state.page-1))}setFocus(e){e.preventDefault(),"keypress"!==e.type||13!==e.charCode&&32!==e.charCode?this.setState({isKeyPressed:!1}):this.setState({isKeyPressed:!0})}isPreviousDisabled(){return this.state.page<1}isNextDisabled(){var e=i.a.Children.toArray(this.props.children);return this.state.page>=en(e,this.props.itemsPerSlide)-1}}tn.propTypes={deviceClass:Qr.a.string,itemsPerSlide:Qr.a.number,title:Qr.a.string,children:Qr.a.any,showHeader:Qr.a.bool,showHeadingUnderline:Qr.a.bool,showItemCount:Qr.a.bool,showPageNumber:Qr.a.bool,focusOnlyOnPagination:Qr.a.bool,onPage:Qr.a.func};var rn=r(20),nn=r.n(rn);function on(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function an(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(Object(r),!0).forEach((function(t){nn()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class sn extends i.a.Component{constructor(e){super(e),this.state={scrollOffset:0},this.menuListElement=null,this.childElements=[],this.inViewIndices=[],this.firstNewVisibleIndex=void 0}render(){var{deviceClass:e,title:t,showHeadingUnderline:r}=this.props,n="s"!==e,o=this.shouldDisableLeft(),a=this.getMenuItems(),s=this.shouldDisableRight();return i.a.createElement("div",{className:"menu-carousel "+(n?"large-view":"small-view")},t&&i.a.createElement(Xr,{title:t,showHeadingUnderline:r}),i.a.createElement("div",{className:"menu-carousel-content"},i.a.createElement($r,{direction:"left",size:"small",disabled:o,onAction:()=>this.onClickLeft()}),i.a.createElement("div",{className:"menu-list-wrapper"},i.a.createElement("ul",{role:"tablist",className:"menu-list",ref:e=>this.menuListRef(e),style:this.getMenuListStyle(),onTransitionEnd:e=>this.onTransitionEnd(e)},a.map((e,t)=>i.a.createElement("li",{role:"presentation",key:t,className:"category-option "+(e.element.category===e.element.selectedCategory?"selected":"")},e.element)))),i.a.createElement($r,{direction:"right",size:"small",disabled:s,onAction:()=>this.onClickRight()})))}menuListRef(e){this.menuListElement||(this.menuListElement=e,this.forceUpdate())}isVisible(e){var{scrollOffset:t}=this.state,{clientWidth:r}=this.menuListElement,n=t+r,{offsetLeft:o,offsetWidth:i}=e;return o+i<=n&&o>=t}getMenuItems(){var[e,t]=this.props.menuItems.reduce((e,t,r)=>{var n={ref:e=>this.childElements[r]=s.a.findDOMNode(e)};return this.menuListElement&&"s"!==this.props.deviceClass&&(this.isVisible(this.childElements[r])?e[1].push(r):(n.tabIndex=-1,n["aria-hidden"]=!0)),e[0].push(an(an({},t),{},{element:i.a.cloneElement(t.element,n)})),e},[[],[]]),r=t.find(e=>-1===this.inViewIndices.indexOf(e));return void 0!==r&&(this.firstNewVisibleIndex=r),this.inViewIndices=t,e}getMaxScrollOffset(){if(this.menuListElement){var{scrollWidth:e,clientWidth:t}=this.menuListElement;return e-t}return 0}getMenuListStyle(){var e="translateX(-"+this.state.scrollOffset+"px)";return{transform:e,WebkitTransform:e,MozTransform:e}}getLeftClippedChildElement(){for(var{scrollOffset:e}=this.state,t=e,r=this.childElements.length-1;r>=0;r--){var n=this.childElements[r],{offsetLeft:o}=n;if(o<t)return n}return null}getRightClippedChildElement(){var{scrollOffset:e}=this.state,{clientWidth:t}=this.menuListElement,r=e+t;for(var n of this.childElements){var{offsetLeft:o,offsetWidth:i}=n;if(o+i>r)return n}return null}onClickLeft(){var e=this.getLeftClippedChildElement();e?this.scrollTo(e.offsetLeft+e.offsetWidth-this.menuListElement.clientWidth):this.scrollTo(0)}onClickRight(){var e=this.getRightClippedChildElement(),{scrollFactor:t=1}=this.props;if(e){var r=this.menuListElement.clientWidth*(1-t);this.scrollTo(e.offsetLeft-r)}else this.scrollTo(this.getMaxScrollOffset())}onTransitionEnd(e){e.target===this.menuListElement&&void 0!==this.firstNewVisibleIndex&&(this.childElements[this.firstNewVisibleIndex].focus(),this.firstNewVisibleIndex=void 0)}scrollTo(e){this.setState({scrollOffset:this.clamp(e,0,this.getMaxScrollOffset())})}shouldDisableLeft(){return 0===this.state.scrollOffset}shouldDisableRight(){return this.state.scrollOffset>=this.getMaxScrollOffset()||null===this.getRightClippedChildElement()}clamp(e,t,r){return e<t?t:e>r?r:e}}sn.propTypes={deviceClass:Qr.a.string,children:Qr.a.any,title:Qr.a.string,showHeadingUnderline:Qr.a.bool,scrollFactor:Qr.a.number,menuItems:Qr.a.array};var cn=r(11),un=r.n(cn),dn=r(3),ln=r.n(dn),pn=Qr.a.shape({src:Qr.a.string,alt:Qr.a.string.isRequired,layout:Qr.a.string,maxSize:Qr.a.string}),fn={image:pn.isRequired,productType:Qr.a.string.isRequired,productId:Qr.a.string.isRequired,instanceId:Qr.a.string.isRequired};r(39);function hn(e){var{layout:t,image:r,maxSize:n,productType:o,productId:a,instanceId:s}=e,c="image-block-"+t;return o===pr?i.a.createElement("div",{className:c+"__mp-media-wrapper"},i.a.createElement(ln.a,{componentId:"mp-media-gallery",contractVersion:"v1",creatorNamespace:"shop",isClient:!0,onError:"continue",parentInstanceId:s,query:{comboId:a,deviceClass:"s"}})):i.a.createElement("div",{className:c+"__image-wrapper"},mn(r,n,t))}var mn=(e,t,r)=>{var n="image-block-"+r,{env_pisces:o}=f().metaLayer,a=o+"/BestBuy_US/store/images/global/misc/unavailable.png;"+t;return e&&e.src?i.a.createElement("img",{src:e.src+";"+t,alt:e.alt,className:n+"-img"}):i.a.createElement("img",{src:a,alt:"Coming soon",className:n+"-img"})};function yn(e){var t,{id:r,productType:n,index:o,subplacement:a,instanceId:s}=e,c={index:o,subplacement:a,layout:"mini",context:"product-carousel-v2"};return n===pr?(c.comboId=r,c.context="product-carousels",t="combo-price"):(c.skuId=r,t="price"),i.a.createElement("div",{className:"product-block-reviews-wrapper"},i.a.createElement(ln.a,{creatorNamespace:"pricing",componentId:t,contractVersion:"v1",query:c,isClient:!0,parentInstanceId:s}))}hn.propTypes=fn,yn.propTypes={id:Qr.a.string.isRequired,productType:Qr.a.string.isRequired,index:Qr.a.number,subplacement:Qr.a.string,instanceId:Qr.a.string.isRequired};var vn=e=>{var{onProductClick:t,deviceClass:r,id:n,instanceId:o,isCombo:a,driverSkuId:s,skuIds:c}=e,u={deviceClass:r,renderStyle:"miniStandard",hideEmptyStars:!0};return a?(u.comboId=n,s&&(u.driverSku=s),u.skuList=c.join(",")):u.skuId=n,i.a.createElement("div",{role:"presentation",className:"product-block-reviews-wrapper",onClick:t},i.a.createElement(ln.a,{isClient:!0,creatorNamespace:"user-generated-content",componentId:"ugc-stats",contractVersion:"v2",parentInstanceId:o,query:u,onError:"continue"}))};vn.propTypes={onProductClick:Qr.a.func,deviceClass:Qr.a.string.isRequired,id:Qr.a.string.isRequired,instanceId:Qr.a.string.isRequired,driverSkuId:Qr.a.string,isCombo:Qr.a.bool.isRequired,skuIds:Qr.a.arrayOf(Qr.a.string)};var gn=Object(d.connect)((e,t)=>{var{id:r,onProductClick:n}=t,o=Hr(r,e);return{id:r,isCombo:o,onProductClick:n,deviceClass:kr(e),driverSkuId:Vr(r,e),instanceId:Dr(e),skuIds:o?Mr(r,e):[]}},{})(vn),bn={shouldShowAddToCart:Qr.a.bool,shouldShowCompare:Qr.a.bool,shouldShowSaveForLater:Qr.a.bool,layout:Qr.a.string},En=Qr.a.shape({skuId:Qr.a.string,image:pn,title:Qr.a.string,description:Qr.a.string,ep:Qr.a.string,instanceId:Qr.a.string,productType:Qr.a.string}),In={dispatchedCriteoSkuIds:Qr.a.array,skuId:Qr.a.string,product:En.isRequired,isRefreshed:Qr.a.bool,isLoading:Qr.a.bool,isFocused:Qr.a.bool,isInView:Qr.a.bool,index:Qr.a.number,subplacement:Qr.a.string,layout:Qr.a.string,hasDynamicTitleHeight:Qr.a.bool,cssClass:Qr.a.string,instanceId:Qr.a.string.isRequired,atcButtonSize:Qr.a.string,tooltipPosition:Qr.a.string,isLastVisibleItem:Qr.a.bool},Sn=r(12),Tn={addToCartReportingVariables:Qr.a.object,product:Qr.a.shape({id:Qr.a.string.isRequired,productType:Qr.a.string.isRequired,skuIds:Qr.a.arrayOf(Qr.a.string),buttonState:Qr.a.string,source:Qr.a.string,price:Qr.a.string,sponsoredProduct:Qr.a.string,title:Qr.a.string}),instanceId:Qr.a.string,showAddToCartButton:Qr.a.bool,atcButtonSize:Qr.a.string},_n=r(6),Cn=["cartAddLocation","pageName","epValue","currencyCode","purchaseId","orderId","merchPageName","taskName","recognized","rzTier","headerFooter","shelfDisplay","upgradeEligibility","payTypeList","questionsAnswers","searchRelevancyTerm","partyID","profileId","itemsInCart","contextId","searchTermSuccess","searchTermFailure","geekSquadContractID","searchTermPromo","abTest65","abTest69","BVload","userToken","visitorToken","trackVariant","offerId","checkoutType","headerBannerClick","searchLocation","templateName","widgetImpression","widgetClick","searchResultsNum","errorCodeList","headerBannerString","skuId","productAvailability","tealeafId","dealsProductList","EPload","userSearchTermSuccess","userSearchTermFailure","internalSearchTerm","searchAutocomplete","reportedPageType","pageType","checkoutOptimizedFlags","recipeType","orderState","orderZip","campaignLatency","checkoutPwpSuccess","scProducts","scEvents","previousLid","lidTrack","campaignId","channel","hierarchy","moduleState","pageCampaign","listFacetsString","visitorId","seePriceIn","videoTrackingString","abTest20","epClick","searchRelevancyRank","fastTrackCheckout","icmp","ccApplication","confirmIt","abTest66","abTest67","abTest68","BVinteraction","marketingEvolutionUuid","productFindingMethod","findingMethod","listViewType","categoryId","internalCampaign","lastFacetSelected","language","lastLink","errorCodes","clickAction","searchTerm","legacyCodebase","payWithPoints","renewalsBundleList","errorLocation","linkName","viewSize","autoCompleteCategory"],On={asValidator:e=>function(t,r){if(void 0===r&&(r=t+" does not pass validation"),!e(t))throw new Error(r)},contractMap(e){Object.keys(e).forEach(e=>{var t="bb"===e.split(".")[0],r=-1===Cn.indexOf(e);if(!t&&r)throw new Error("object has invalid properties, should be a context variable or a contract map variable")})},type:{isObject:e=>e&&"object"==typeof e&&e.constructor===Object,isArray:e=>Array.isArray(e),isBool:e=>"boolean"==typeof e,isNumber:e=>"number"==typeof e&&isFinite(e),isString:e=>"string"==typeof e||e instanceof String},isEmail:e=>/\S+@\S+\.\S+/.test(e),templateName(e){var{templateName:t=!1,reportingVariables:r=!1}=void 0!==e&&e,n=!!(r&&r.templateName&&r["bb.templateName"]);return!(!t||!r||!r.templateName&&!r["bb.templateName"])||n},reportingVariables:e=>{if(null!=e){var t=On.asValidator(On.type.isObject),r=On.asValidator(On.type.isString);t(e,"`reportingVariables` should be an object or undefined"),On.contractMap(e);var n=["experimentName","treatmentGroup"],o=["experience"];void 0!==e["bb.experimentList"]&&(On.asValidator(On.type.isArray)(e["bb.experimentList"],"'bb.experimentList' must be an Array"),e["bb.experimentList"].forEach(e=>{t(e,"Each experiment in 'bb.experimentList' must be an Object"),n.forEach(t=>{r(e[t],"'"+t+"' is a required string in each experiment of bb.experimentList")}),o.forEach(t=>{e[t]&&r(e[t],"'"+t+"' must be a string if present in an experiment of bb.experimentList")})}))}},adobe:e=>{var t=e=>On.reportingVariables(e&&e.reportingVariables);if(On.type.isObject(e)){if(t(e),e.skus)for(var r of e.skus)t(r)}else if(On.type.isArray(e))for(var n of e)t(n)}},wn=On,Pn=function(e,t){return void 0===t&&(t={}),function(r){void 0===r&&(r=t),wn.adobe(r);var n=e(r);return wn.type.isObject(r)&&(n.reportingVariables=n.reportingVariables||r.reportingVariables),n}}(e=>{var{context:t,sku:r}=e;return{type:"CLICK",context:t,sku:r}});function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kn(e){var{isString:t,isObject:r}=wn.type;if(!r(e))throw new Error("spanEvent error: eventData is not an object");if(!t(e.eventType))throw new Error("spanEvent error : eventType is required! got "+e.eventType+" instead");return Rn({type:"SPAN_EVENT"},e)}function An(){return(An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Nn(e){var{isString:t,isObject:r}=wn.type;if(!r(e))throw new Error("tmsEvent error: eventData is not an object");if(!t(e.eventType))throw new Error("tmsEvent error : eventType is required! got "+e.eventType+" instead");return An({type:"TMS_EVENT"},e)}function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ln(e){var{apeReward:t,product:r,instanceId:n}=e,{id:o,ep:i,source:a,productType:s}=r;if("override"!==a){var c={context:"recommendations",sku:s===pr?null:o,reportingVariables:{epClick:i}};r.sponsoredProduct&&xn({id:o,product:r},n),t&&Vn({apeReward:t,instanceId:n,product:r}),Object(_n.dispatch)(Pn(c),n),function(e){var{epValue:t,skuId:r,instanceId:n}=e,o=kn({eventType:"RECS_CLICK",pageType:"product-carousel",epValue:t,skuId:r});Object(_n.dispatch)(o,n)}({epValue:i,skuId:o,instanceId:n})}}function jn(e){var{instanceId:t,product:r}=e,{id:n,ep:o,sponsoredProduct:i,source:a,productType:s}=r;if("override"!==a){var c={context:"recommendations",sku:s===pr?null:n,value:{epClick:o}};Object(_n.dispatch)(function(e){var{context:t,sku:r,value:n}=e;if(!n)throw new Error("please provide a value for buttonClick action");if(!(("object"==typeof n||"string"==typeof n)&&"function"!=typeof n))throw new Error("value should be a string or object");return"string"!=typeof n&&wn.contractMap(n),{type:"BUTTON_CLICK",context:t,value:n,sku:r}}(c),t),i&&Un({id:n,ep:o,instanceId:t}),function(e){var{epValue:t,skuId:r,instanceId:n}=e,o=kn({eventType:"RECS_ADD_TO_CART",pageType:"product-carousel",epValue:t,skuId:r});Object(_n.dispatch)(o,n)}({epValue:o,skuId:n,instanceId:t})}}var xn=(e,t)=>{var{id:r,product:n}=e,o=Nn({eventType:"clickBeacon",epValue:n.ep,skuId:r});Object(_n.dispatch)(o,t)},Un=e=>{var{id:t,ep:r,instanceId:n}=e,o=Nn({eventType:"clickBeacon",epValue:r,skuId:t});Object(_n.dispatch)(o,n)},Vn=e=>{var{apeReward:t,instanceId:r,product:n}=e,{id:o,department:i,subclass:a}=n,s=kn(Dn({},t,{skuId:o,department:{id:i},class:{id:n.class},subclass:{id:a}}));Object(_n.dispatch)(s,r)};function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Hn(e){var{addToCartReportingVariables:t,product:r,instanceId:n,showAddToCartButton:o,atcButtonSize:a,driverSku:s}=e;if(!o)return null;var c,{id:u,productType:d,title:l}=r,p=Mn({"bb.skuName":l},t),f=n+"-add-to-cart-"+u,h={blockLevel:"true",buttonStyle:"outline",context:"carousel",destinationZipCode:new Sn.CsiVar("location.destinationZipCode"),disableAttachModal:"true",disableGoToCart:"true",enableAddedToCartMessage:"true",instanceId:f,reportingVariables:JSON.stringify(p),storeId:new Sn.CsiVar("location.storeId"),size:a};return s&&(h.driverSku=s),d===pr?(h.comboId=u,c="combo-add-to-cart-button"):(h.skuId=u,c="add-to-cart-button"),i.a.createElement("div",{onClick:()=>{window&&window.EventManager&&window.EventManager.trigger("attachModal:cartButton:clicked"),jn({instanceId:n,product:r})}},i.a.createElement(ln.a,{creatorNamespace:"fulfillment",componentId:c,contractVersion:"v1",query:h,parentInstanceId:n,isClient:!0,disableAttachModal:!0,disableGoToCart:!0}))}Hn.propTypes=Tn;var Fn=Object(d.connect)(e=>({addToCartReportingVariables:Lr(e),showAddToCartButton:Kr(e),driverSku:xr(e)}),{})(Hn);var Bn=
/**
  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
  @version v2.5.9
  @link https://github.com/yowainwright/shave#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)
  @license MIT
**/
function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t||isNaN(t))throw Error("maxHeight is required");var n="string"==typeof e?document.querySelectorAll(e):e;if(n){var o=r.character||"&mldr;",i=r.classname||"js-shave",a="boolean"!=typeof r.spaces||r.spaces,s='<span class="js-shave-char">'.concat(o,"</span>");"length"in n||(n=[n]);for(var c=0;c<n.length;c+=1){var u=n[c],d=u.style,l=u.querySelector(".".concat(i)),p=void 0===u.textContent?"innerText":"textContent";l&&(u.removeChild(u.querySelector(".js-shave-char")),u[p]=u[p]);var f=u[p],h=a?f.split(" "):f;if(!(h.length<2)){var m=d.height;d.height="auto";var y=d.maxHeight;if(d.maxHeight="none",u.offsetHeight<=t)d.height=m,d.maxHeight=y;else{for(var v=h.length-1,g=0,b=void 0;g<v;)b=g+v+1>>1,u[p]=a?h.slice(0,b).join(" "):h.slice(0,b),u.insertAdjacentHTML("beforeend",s),u.offsetHeight>t?v=b-1:g=b;u[p]=a?h.slice(0,v).join(" "):h.slice(0,v),u.insertAdjacentHTML("beforeend",s);var E=a?" ".concat(h.slice(v).join(" ")):h.slice(v),I=document.createTextNode(E),S=document.createElement("span");S.classList.add(i),S.style.display="none",S.appendChild(I),u.insertAdjacentElement("beforeend",S),d.height=m,d.maxHeight=y}}}}},qn={title:Qr.a.string.isRequired,hasDynamicTitleHeight:Qr.a.bool,layout:Qr.a.string};class Kn extends i.a.Component{componentDidMount(){this.shaveTitle(),window&&window.addEventListener("resize",()=>this.shaveTitle())}componentWillUnmount(){window&&window.removeEventListener("resize",()=>this.shaveTitle())}render(){var{title:e,hasDynamicTitleHeight:t=!1,layout:r}=this.props;return i.a.createElement("div",{ref:e=>this.node=e,className:"title-block"},i.a.createElement("div",{className:"title-block__title "+("standard"===r?"standard-layout":"")+" "+(t?"auto-height":""),dangerouslySetInnerHTML:{__html:e}}))}shaveTitle(){var e=this.node.querySelector(".title-block__title"),t=e.clientHeight||1;Bn(e,t)}}Kn.propTypes=qn;var zn=Object(d.connect)(e=>({layout:jr(e)}),{})(Kn);function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wn(e){var{instanceId:t,isFocused:r,layout:n,onProductClick:o,product:a,shouldShowCompare:s,atcButtonSize:c}=e,u="product-block-"+n;return i.a.createElement("div",{className:""+u},i.a.createElement("div",{className:u+"__image-anchor"},i.a.createElement("a",{href:a.url,className:u+"__image-block",onClick:o,ref:e=>{r&&e&&e.focus()},tabIndex:"0"},i.a.createElement(hn,{layout:n,image:a.image,maxSize:"maxHeight=180;maxWidth=180",productType:a.productType,productId:a.id,instanceId:t}))),i.a.createElement("div",{className:u+"__title-block-wrapper"},i.a.createElement("a",{href:a.url,onClick:o},i.a.createElement(zn,{title:a.title,hasDynamicTitleHeight:a.hasDynamicTitleHeight}))),i.a.createElement("div",{className:u+"__reviews-wrapper"},i.a.createElement(gn,{id:a.id,onProductClick:o})),i.a.createElement(yn,{id:a.id,productType:a.productType,index:a.index,subplacement:a.subplacement,instanceId:t}),i.a.createElement("div",{className:u+"__compare-wrapper"},s&&i.a.createElement(ln.a,{creatorNamespace:"shop",componentId:"compare-checkbox",contractVersion:"v1",query:{skuId:a.id},onError:"continue",isClient:!0,parentInstanceId:t})),i.a.createElement("div",{className:u+"__addToCart"},i.a.createElement(Fn,{product:a,instanceId:t,atcButtonSize:c,sponsoredProduct:a.sponsoredProduct})))}function Jn(){return(Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qn(e){var{layout:t,product:r,isFocused:n,onProductClick:o,instanceId:a,shouldShowCompare:s}=e;return i.a.createElement("div",{className:t+"__micro-product"},i.a.createElement("div",{className:t+"__image-anchor"},i.a.createElement("a",{href:r.url,className:t+"__image-block",onClick:o,ref:e=>{n&&e&&e.focus()}},i.a.createElement(hn,{layout:t,image:r.image,url:r.url,maxSize:"maxHeight=50;maxWidth=50",productType:r.productType,productId:r.id,instanceId:a}))),i.a.createElement("div",{className:t+"__content"},i.a.createElement("a",{href:r.url,onClick:o},i.a.createElement(zn,{title:r.title,hasDynamicTitleHeight:r.hasDynamicTitleHeight,url:r.url})),i.a.createElement("div",{className:t+"__reviews-wrapper"},i.a.createElement(gn,{id:r.id,onProductClick:o})),s&&i.a.createElement("div",{className:t+"__compare-wrapper"},i.a.createElement("a",{onClick:()=>{return e=r.id,void Object(_n.dispatch)(Pn({sku:e,reportingVariables:{linkName:"Compare Tray: Recommendations: Product Compare"}}));var e}},i.a.createElement(ln.a,{creatorNamespace:"shop",componentId:"compare-checkbox",contractVersion:"v1",query:{skuId:r.id},onError:"continue",isClient:!0,parentInstanceId:a})))))}function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xn(e){var{className:t,instanceId:r,isFocused:n,layout:o,onProductClick:a,product:s,shouldShowCompare:c,shouldShowSaveForLater:u,atcButtonSize:d,tooltipPosition:l}=e,p="product-block-"+o;return i.a.createElement("div",{className:p+" "+(t||"")},i.a.createElement("a",{href:s.url,onClick:a,ref:e=>{n&&e&&e.focus()},tabIndex:"0"},i.a.createElement("div",{className:p+"_image-block"},i.a.createElement(hn,{image:s.image,maxSize:"maxHeight=150;maxWidth=170",layout:o,productType:s.productType,productId:s.id,instanceId:r})),i.a.createElement("div",{className:p+"__content"},i.a.createElement(zn,{title:s.title,hasDynamicTitleHeight:s.hasDynamicTitleHeight}))),i.a.createElement("div",{className:p+"__middle-block"},i.a.createElement(gn,{id:s.id,onProductClick:a}),i.a.createElement(yn,{id:s.id,productType:s.productType,index:s.index,subplacement:s.subplacement,instanceId:r})),i.a.createElement("div",{className:p+"__config-block-addToCart"},i.a.createElement(Fn,{product:s,instanceId:r,atcButtonSize:d})),i.a.createElement("div",{className:p+"__config-block"},c&&i.a.createElement("div",{className:p+"__config-block-compare"},i.a.createElement(ln.a,{creatorNamespace:"shop",componentId:"compare-checkbox",contractVersion:"v1",query:{skuId:s.id},onError:"continue",isClient:!0,parentInstanceId:r})),u&&i.a.createElement("div",{className:p+"__config-block-save"},i.a.createElement(ln.a,{creatorNamespace:"shop",componentId:"save-for-later",contractVersion:"v1",query:{skuId:s.id,tooltipPosition:l},onError:"continue",isClient:!0,assetBasePath:"dist/client",parentInstanceId:r}))))}function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Wn.propTypes=Gn({maxSize:Qr.a.string,shouldShowCompare:Qr.a.bool.isRequired},In),Qn.propTypes=Jn({maxSize:Qr.a.string,shouldShowCompare:Qr.a.bool},In),Xn.propTypes=Yn({className:Qr.a.string,maxSize:Qr.a.string},In);function $n(e){var{shouldShowAddToCart:t,shouldShowCompare:r,shouldShowSaveForLater:n,layout:o}=e;return i.a.createElement("div",{className:"product-block-"+o+"__placeholder"},i.a.createElement("div",{className:"product-block-"+o+"__placeholder-display shimmer"}),i.a.createElement("div",{className:"product-block-"+o+"__placeholder-title shimmer"}),i.a.createElement("div",{className:"product-block-"+o+"__placeholder-reviews shimmer"}),i.a.createElement("div",{className:"product-block-"+o+"__placeholder-price shimmer"}),t||r||n&&i.a.createElement("div",{className:"product-block__placeholder-add-to-cart shimmer"}))}$n.propTypes=bn;class eo extends i.a.Component{constructor(){super(),u.a.bindAll(this,"onProductClick")}componentDidMount(){var e=hr.bind(this,this.myDiv),t=window.setInterval(()=>{e(50)&&this.props.isInView&&(window.clearInterval(t),this.handleCriteoEvents())},650)}shouldComponentUpdate(e){var{isRefreshed:t,isFocused:r,isInView:n,product:o}=this.props;return t!==e.isRefreshed||r!==e.isFocused||o!==e.product||n!==e.isInView}handleCriteoEvents(){var{trackDispatchedCriteoSkuId:e,dispatchedCriteoSkuIds:t,instanceId:r,product:n}=this.props,{id:o,sponsoredProduct:i}=n;o&&i&&-1===t.indexOf(o)&&(e(o),(e=>{var{instanceId:t,product:r}=e,{ep:n,id:o,sponsoredClickURL:i,sponsoredImpressionURL:a,source:s}=r;if("override"!==s){var c=Nn({carouselIdentifier:n,clickBeacon:i,eventType:"impressionBeacon",impressionBeacon:a,sku:o});Object(_n.dispatch)(c,t)}})({instanceId:r,product:n}))}render(){var e,{product:t,shouldShowAddToCart:r=!0,shouldShowCompare:n=!1,shouldShowSaveForLater:o=!1,skuClassName:a,isRefreshed:s,isInView:c,isFocused:u,layout:d,instanceId:l,atcButtonSize:p,tooltipPosition:f,isLastVisibleItem:h}=this.props,m=t.productType===pr,y=un()("product-block",{"fade in":!0,"auto-height":!r,mini:"mini"===d,"show-vert-pipe":"standard"===d&&!h}),v="undefined"==typeof window;switch(d){case"mini":e=i.a.createElement(Wn,{instanceId:l,isFocused:u,isRefreshed:s,layout:d,onProductClick:this.onProductClick,product:t,shouldShowCompare:!m&&n,atcButtonSize:p});break;case"micro":e=i.a.createElement(Qn,{layout:d,product:t,isRefreshed:s,isFocused:u,url:t.url,onProductClick:this.onProductClick,atcButtonSize:p,instanceId:l,shouldShowCompare:!m&&n});break;default:e=i.a.createElement(Xn,{className:m?"":a,instanceId:l,isFocused:u,isRefreshed:s,layout:d,onProductClick:this.onProductClick,product:t,shouldShowCompare:!m&&n,shouldShowSaveForLater:!m&&o,atcButtonSize:p,tooltipPosition:f})}return i.a.createElement("div",{className:y,style:this.getStyles(),ref:e=>this.myDiv=e},s?e:i.a.createElement("span",{suppressHydrationWarning:!0},!v&&c&&i.a.createElement($n,{shouldShowAddToCart:r,shouldShowCompare:n,shouldShowSaveForLater:o,layout:d})))}getStyles(){var{index:e,totalNumberOfProducts:t}=this.props,r=.1*e+"s";return{animationDelay:r,WebkitAnimationDelay:r,MozAnimationDelay:r,zIndex:t-e}}customProductClickEvent(e){var{index:t,product:r}=this.props;return e.payload={productId:r.id,productPosition:t+1,type:"PRODUCT_CLICK"},e}onProductClick(e){this.customProductClickEvent(e),Ln(this.props)}}eo.propTypes=Zn({skuClassName:Qr.a.string},In),eo.defaultProps={dispatchedCriteoSkuIds:[]};var to=Object(d.connect)((e,t)=>{var{app:r}=e,{productId:n}=t,{apeReward:o,shouldShowAddToCart:i,shouldShowCompare:a,shouldShowSaveForLater:s,layout:c,instanceId:u,tooltipPosition:d}=r.config,{dispatchedCriteoSkuIds:l}=r,p=r.products[n]||{},f=r.refreshedProductIds.indexOf(n)>-1,h=[];return a&&h.push("compare"),s&&h.push("save"),{apeReward:o,dispatchedCriteoSkuIds:l,product:p,isRefreshed:f,shouldShowAddToCart:i,shouldShowCompare:a,shouldShowSaveForLater:s,skuClassName:h.join(" "),layout:c,instanceId:u,tooltipPosition:d,totalNumberOfProducts:Object.keys(r.products).length}},e=>Object(h.bindActionCreators)({trackDispatchedCriteoSkuId:w.trackDispatchedCriteoSkuId},e))(eo),ro=Qr.a.shape({key:Qr.a.string,title:Qr.a.string,ep:Qr.a.string,productIds:Qr.a.arrayOf(Qr.a.string),isLoading:Qr.a.bool}),no={deviceClass:Qr.a.string,carousel:ro.isRequired,shouldShowHeadingUnderline:Qr.a.bool,refreshCarouselPage:Qr.a.func.isRequired};class oo extends i.a.Component{constructor(){super(),u.a.bindAll(this,"refreshPage"),this.state={page:0}}componentDidUpdate(e){var t=e.carousel.productIds.length,r=this.props.carousel.productIds.length;0===t&&r>0&&this.refreshPage(this.state.page)}render(){var{pageLength:e,shouldShowHeadingUnderline:t,deviceClass:r="l",itemsPerSlide:n,carousel:o,category:a,layout:s}=this.props,{page:c}=this.state,{title:u,productIds:d=[],isLoading:l,key:p}=o,f=!l&&d.length>0,h=l||!f?function(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r}(e,"0"):d,m=un()("product-carousel",{squish:!(l||f),mini:"mini"===s}),y="s"===r?"small":"medium";return i.a.createElement("div",{className:m+" "+s+" "+("s"===r?"sv":"lv")+" page-length-"+e},i.a.createElement(tn,{deviceClass:r,itemsPerSlide:n,showHeadingUnderline:t,showItemCount:!l,title:"micro"!==s?u:null,onPage:this.refreshPage,focusOnlyOnPagination:!0,category:a},h.map((t,n)=>{var o=(e=>{var{currentPage:t,pageLength:r,productIndex:n,deviceClass:o}=e;return"s"===o||n>=t*r&&n<(t+1)*r})({currentPage:c,pageLength:e,productIndex:n,deviceClass:r}),a=(e=>{var{productIndex:t,productIdsToUse:r,deviceClass:n,pageLength:o}=e;return t+1===r.length||"l"===n&&(t+1)%o==0})({productIndex:n,productIdsToUse:h,deviceClass:r,pageLength:e});return i.a.createElement(to,{key:n,productId:t,isInView:o,index:n,subplacement:p,atcButtonSize:y,isLastVisibleItem:a})})))}refreshPage(e){this.setState({page:e});for(var{refreshCarouselPage:t}=this.props,{key:r}=this.props.carousel,n=e;n<=e+oo.PAGE_PRELOAD_LIMIT;n++)t(r,n)}}function io(e,t){return(r,n)=>{var{app:o}=n(),{pageLength:i}=o.config,{productIds:a}=o.carousels[e],s=i*t,c=s+i;if(s>=a.length)return Promise.resolve();var u=a.slice(s,c);return Promise.all(u.map(e=>r(function(e){var{hideProductLoader:t,showProductLoader:r,updateProduct:n}=w;return(o,i)=>{var{loadingProductIds:a,refreshedProductIds:s}=i().app;return[...a,...s].indexOf(e)>-1?Promise.resolve():(o(r(e)),(Hr(e,i())?Ir.fetchCombo(e):Ir.fetchSku(e)).then(r=>{o(t(e)),o(n(e,r))}))}}(e))))}}oo.propTypes=no,oo.PAGE_PRELOAD_LIMIT=1;var ao=Object(d.connect)(e=>{var{app:t}=e,{pageLength:r,deviceClass:n,shouldShowHeadingUnderline:o,layout:i,itemsPerSlide:a,category:s}=t.config;return{pageLength:r,deviceClass:n,shouldShowHeadingUnderline:o,itemsPerSlide:a,category:s,layout:i}},e=>Object(h.bindActionCreators)({refreshCarouselPage:io},e))(oo),so={config:Qr.a.object.isRequired,carousels:ro.isRequired,fetchRecommendations:Qr.a.func.isRequired},co=r(21),uo=(r(40),""+co.version);class lo extends i.a.Component{componentDidMount(){this.fetchData()}componentDidUpdate(e){var{config:{instanceId:t},hideCarousels:r,facets:n,resetToDefaultState:o}=this.props,{hideCarousels:i,facets:a}=e;r!==i&&this.applySpacingClass(!r,t),u.a.isEqual(n,a)||(o(),this.fetchData())}fetchData(){this.props.fetchRecommendations().then(e=>this.onFetchRecommendations(e,this.props.instanceId))}render(){var{config:e,carousels:t,hideCarousels:r}=this.props,{subplacements:n,showEmptyCarouselListMessage:o}=e,a=n.filter(e=>{var r=t[e];return r&&(r.isLoading||r.productIds.length)});return!a.length||r?o?i.a.createElement("div",{className:uo+" empty-carousel-list-message"},"We don’t have similar items to show you right now. But check back soon!"):null:i.a.createElement("div",{className:uo},a.map((e,r)=>i.a.createElement(ao,{key:r,carousel:t[e]})))}onFetchRecommendations(e,t){u.a.forEach(e,e=>{var{recommendedSkus:r,ep:n}=e,o=r.filter(e=>"override"!==e.source).map(e=>{var{id:t}=e;return t}),i=r.filter(e=>!!e.sponsoredProduct&&e.productType!==pr).map(e=>{var{id:t}=e;return t});o.length>0&&(function(e){var{epValue:t,skuList:r,instanceId:n}=e,o=kn({_send:!0,eventType:"RECS_LOAD",pageType:"product-carousel",epValue:t,skuList:r.join(",")});Object(_n.dispatch)(o,n)}({epValue:n,skuList:o,instanceId:t}),(e=>{var{criteoSkus:t,epValue:r,instanceId:n}=e,o=Nn({eventType:"pageBeacon",epValue:r,criteoSkus:t});Object(_n.dispatch)(o,n)})({criteoSkus:i,epValue:n,instanceId:t}))})}applySpacingClass(e,t){"undefined"!=typeof window&&window.initializer&&window.initializer.applyLayoutClassList&&window.initializer.applyLayoutClassList(e,t)}}function po(){return(po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}lo.propTypes=so;var fo=Object(d.connect)(e=>po({},Object.assign({},e.app),{facets:Ar(e),hideCarousels:Nr(e),instanceId:Dr(e)}),e=>Object(h.bindActionCreators)({fetchRecommendations:Gr,resetToDefaultState:w.resetToDefaultState},e))(lo),ho=r(22),mo=r(23),yo=r.n(mo),vo=r(24),go=r.n(vo);function bo(){return(bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Eo=function(e,t,r){void 0===r&&(r={});var n,o,s,u=document.querySelector(t),l=f(),p=Object(c.defaultsDeep)(Object.assign({},r),l,ho),m=(n=p,o=e,s="function"==typeof __REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:o})||h.compose,Object(h.createStore)(Mt,n,s(Object(h.applyMiddleware)(y.a,Ft)))),v=function(e){var t=e.name;if(!t)throw new Error("name required");var r=ar("undefined"!=typeof window&&document.cookie.match("(?:^|\\s)".concat(t,"=([^;]*)"))||[],2);return r[0],r[1]}({name:"bby.attach.carouselVersion"});(e=>{var t=Dr(e.getState());Object(Ht.listen)((t,r)=>{e.dispatch(bo({},t,{meta:bo({},t.meta,{incoming:!0,source:r})}))},t)})(m),yo()(u,()=>{Object(a.hydrate)(i.a.createElement(d.Provider,{store:m},"v2"===v?i.a.createElement("div",null,"product-carousels v2 placeholder"):i.a.createElement(fo,null)),u)},-800)},Io={componentId:l.componentId,contractVersion:l.contractVersion,creatorNamespace:l.creatorNamespace,componentVersion:p.a};window.initializer?window.initializer.registerComponent(Io,Eo):go.a.registerComponent(Io,Eo)}]);
//# sourceMappingURL=client-37b4df2255dfcddc77b59b71e74d313f.mjs.map