!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e){t.exports=React},function(t,e){t.exports=PropTypes},function(t,e){t.exports=patternLibrary},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.r(e),n.d(e,"ADD_ADD_ON_ITEM",(function(){return _})),n.d(e,"ADD_DEVICE",(function(){return Lt})),n.d(e,"ADD_DEVICE_MODAL",(function(){return Et})),n.d(e,"ADD_LINE_ITEM",(function(){return T})),n.d(e,"ADD_SKU_TO_COMPARE",(function(){return nt})),n.d(e,"ADD_TO_CART_SUCCESS",(function(){return Tt})),n.d(e,"BUYING_OPTIONS_ANCHOR",(function(){return Y})),n.d(e,"CHANGE_SKU",(function(){return E})),n.d(e,"CLEAR_ALERT",(function(){return F})),n.d(e,"CLEAR_SEARCH",(function(){return Xt})),n.d(e,"DANGER_ALERT",(function(){return V})),n.d(e,"DEBUG",(function(){return k})),n.d(e,"DEREGISTER_CART_ITEMS",(function(){return oe})),n.d(e,"DEVICE_DETAILS_MODAL",(function(){return ft})),n.d(e,"DISPLAY_ALERT",(function(){return N})),n.d(e,"ERROR",(function(){return g})),n.d(e,"INFO",(function(){return A})),n.d(e,"INFO_ALERT",(function(){return M})),n.d(e,"INTERRUPTION_PERMISSION_RESPONSE",(function(){return Qt})),n.d(e,"INTERRUPTION_STATUS_UPDATE",(function(){return $t})),n.d(e,"LOG",(function(){return R})),n.d(e,"MANUFACTURE_CONTENT_ANCHOR",(function(){return X})),n.d(e,"MODAL_CLOSED",(function(){return mt})),n.d(e,"MODAL_OPENED",(function(){return _t})),n.d(e,"QUESTIONS_ANSWERS_ANCHOR",(function(){return W})),n.d(e,"RATINGS_REVIEWS_ANCHOR",(function(){return z})),n.d(e,"REFRESH_DEVICE_CONFIGURATION",(function(){return tt})),n.d(e,"REGISTER_CART_ITEMS",(function(){return se})),n.d(e,"REMOVE_ADD_ON_ITEM",(function(){return I})),n.d(e,"REMOVE_DEVICE",(function(){return Rt})),n.d(e,"REMOVE_LINE_ITEM",(function(){return L})),n.d(e,"REMOVE_SKU_FROM_COMPARE",(function(){return it})),n.d(e,"REQUEST_INTERRUPTION_PERMISSION",(function(){return zt})),n.d(e,"RETURN_FORM",(function(){return re})),n.d(e,"SET_ACTIVATED_PRICING_OPTION",(function(){return Ht})),n.d(e,"SET_ANCHOR",(function(){return J})),n.d(e,"SET_DESTINATION_ZIP_CODE",(function(){return K})),n.d(e,"SET_DEVICE_LIST_COUNT",(function(){return kt})),n.d(e,"SET_DEVICE_LIST_FILTER",(function(){return Nt})),n.d(e,"SET_DEVICE_LIST_PAGE",(function(){return Ot})),n.d(e,"SET_DEVICE_LIST_SEARCH",(function(){return Mt})),n.d(e,"SET_DEVICE_LIST_SORT",(function(){return Vt})),n.d(e,"SET_EASY_REPLENISH",(function(){return Gt})),n.d(e,"SET_FACET_VIEW_VISIBILITY",(function(){return p})),n.d(e,"SET_FORM",(function(){return ee})),n.d(e,"SET_OPENBOX_STORE_DEPRECATED",(function(){return ce})),n.d(e,"SET_PROTECTION_PLAN",(function(){return at})),n.d(e,"SET_SAVED_ITEMS_SKU_STATE",(function(){return ut})),n.d(e,"SET_SEARCH_ZIP_CODE",(function(){return m})),n.d(e,"SET_SELECTED_INSTALLATION_SKU",(function(){return It})),n.d(e,"SET_SELECTED_NEARBY_STORE_ID_LIST",(function(){return B})),n.d(e,"SET_SKU_LIST_FACET_LIST",(function(){return u})),n.d(e,"SET_SKU_LIST_PAGE",(function(){return d})),n.d(e,"SET_SKU_LIST_SORT",(function(){return a})),n.d(e,"SET_STORE_ID",(function(){return G})),n.d(e,"SET_TIME_BASED_SUBSCRIPTION",(function(){return Ft})),n.d(e,"SET_VEHICLE",(function(){return dt})),n.d(e,"SKU_CARD_ADD_TO_CART_CLICKED",(function(){return qt})),n.d(e,"SKU_CARD_PDP_CLICKED",(function(){return Bt})),n.d(e,"SPECIFICATIONS_ANCHOR",(function(){return Z})),n.d(e,"STEPUP_ANCHOR",(function(){return Q})),n.d(e,"SUCCESS_ALERT",(function(){return P})),n.d(e,"USER_LIST_MODIFIED",(function(){return pt})),n.d(e,"WARN",(function(){return O})),n.d(e,"WARNING_ALERT",(function(){return w})),n.d(e,"addAddOnItem",(function(){return S})),n.d(e,"addDevice",(function(){return bt})),n.d(e,"addLineItem",(function(){return y})),n.d(e,"addSkuToCompare",(function(){return rt})),n.d(e,"addToCartSuccess",(function(){return yt})),n.d(e,"changeSku",(function(){return f})),n.d(e,"clearAlert",(function(){return j})),n.d(e,"clearSearch",(function(){return Wt})),n.d(e,"deregisterCartItems",(function(){return ue})),n.d(e,"displayAlert",(function(){return U})),n.d(e,"interruptionPermissionResponse",(function(){return Jt})),n.d(e,"interruptionStatusUpdate",(function(){return te})),n.d(e,"log",(function(){return D})),n.d(e,"modalClosed",(function(){return vt})),n.d(e,"modalOpened",(function(){return St})),n.d(e,"refreshDeviceConfiguration",(function(){return et})),n.d(e,"registerCartItems",(function(){return ae})),n.d(e,"removeAddOnItem",(function(){return C})),n.d(e,"removeDevice",(function(){return At})),n.d(e,"removeLineItem",(function(){return b})),n.d(e,"removeSkuFromCompare",(function(){return st})),n.d(e,"requestInterruptionPermission",(function(){return Zt})),n.d(e,"returnForm",(function(){return ie})),n.d(e,"setActivatedPricingOption",(function(){return Yt})),n.d(e,"setAnchor",(function(){return $})),n.d(e,"setDeprecatedOpenboxStoreChanged",(function(){return de})),n.d(e,"setDestinationZipCode",(function(){return H})),n.d(e,"setDeviceListCount",(function(){return Dt})),n.d(e,"setDeviceListFilter",(function(){return Pt})),n.d(e,"setDeviceListPage",(function(){return gt})),n.d(e,"setDeviceListSearch",(function(){return wt})),n.d(e,"setDeviceListSort",(function(){return Ut})),n.d(e,"setEasyReplenish",(function(){return xt})),n.d(e,"setFacetViewVisibility",(function(){return h})),n.d(e,"setForm",(function(){return ne})),n.d(e,"setProtectionPlan",(function(){return ot})),n.d(e,"setSavedItemsSkuState",(function(){return ct})),n.d(e,"setSearchZipCode",(function(){return v})),n.d(e,"setSelectedInstallationSku",(function(){return Ct})),n.d(e,"setSelectedNearbyStoreIdList",(function(){return q})),n.d(e,"setSkuListFacetList",(function(){return c})),n.d(e,"setSkuListPage",(function(){return l})),n.d(e,"setSkuListSort",(function(){return o})),n.d(e,"setStoreId",(function(){return x})),n.d(e,"setTimeBasedSubscription",(function(){return jt})),n.d(e,"setVehicle",(function(){return lt})),n.d(e,"skuCardEvent",(function(){return Kt})),n.d(e,"userListModified",(function(){return ht}));var a="SET_SKU_LIST_SORT";function o(t){return{type:a,sort:t}}var u="SET_SKU_LIST_FACET_LIST";function c(t){return{type:u,facetList:t}}var d="SET_SKU_LIST_PAGE";function l(t){return{type:d,page:t}}var p="SET_FACET_VIEW_VISIBILITY";function h(t,e){return{type:p,isVisible:t,facetField:e}}var E="CHANGE_SKU";function f(t){return{type:E,skuId:t}}var _="ADD_ADD_ON_ITEM";function S(t){var e=t.skuId;return{type:_,payload:{skuId:e}}}var m="SET_SEARCH_ZIP_CODE";function v(t){var e=t.zipcode;return{type:m,payload:{zipcode:e}}}var I="REMOVE_ADD_ON_ITEM";function C(t){var e=t.skuId;return{type:I,payload:{skuId:e}}}var T="ADD_LINE_ITEM";function y(t){return{type:T,lineItemId:t}}var L="REMOVE_LINE_ITEM";function b(t){return{type:L,lineItemId:t}}var R="LOG",A="INFO",O="WARN",g="ERROR",k="DEBUG";function D(t,e,n,r,i,s,a){return{type:R,level:t,message:e,error:n,componentId:i,creatorNamespace:r,contractVersion:s,instanceId:a}}var N="DISPLAY_ALERT",P="SUCCESS_ALERT",M="INFO_ALERT",w="WARNING_ALERT",V="DANGER_ALERT";function U(t,e){return{id:Math.random().toString(10),type:N,level:t,message:e}}var F="CLEAR_ALERT";function j(t){return{displayAlertId:t.id,type:F}}var G="SET_STORE_ID";function x(t){if(!t)throw new Error("Set store requires the storeId.");return{type:G,storeId:t}}var B="SET_SELECTED_NEARBY_STORE_ID_LIST";function q(t){return{type:B,payload:{storeIdList:t}}}var K="SET_DESTINATION_ZIP_CODE";function H(t){return function(t){if("string"!=typeof t||5!==t.length)throw new Error("Invalid zip code provided to action creator.")}(t),{type:K,destinationZipCode:t}}var Y="BUYING_OPTIONS_ANCHOR",X="MANUFACTURE_CONTENT_ANCHOR",W="QUESTIONS_ANSWERS_ANCHOR",z="RATINGS_REVIEWS_ANCHOR",Z="SPECIFICATIONS_ANCHOR",Q="STEPUP_ANCHOR",J="SET_ANCHOR";function $(t,e){return{type:J,to:t,timeStamp:e}}var tt="REFRESH_DEVICE_CONFIGURATION";function et(t){return{type:tt,deviceId:t}}var nt="ADD_SKU_TO_COMPARE";function rt(t){return{type:nt,skuId:t}}var it="REMOVE_SKU_FROM_COMPARE";function st(t){return{type:it,skuId:t}}var at="SET_PROTECTION_PLAN";function ot(t){return{type:at,skuId:t}}var ut="SET_SAVED_ITEMS_SKU_STATE";function ct(t,e){return{type:ut,isSaved:e,skuId:t}}var dt="SET_VEHICLE";function lt(t,e){var n=!1;if((null===t&&null===e||"number"==typeof t&&"string"==typeof e&&t>=0&&e)&&(n=!0),!n)throw new Error("One or more required parameters is missing or invalid.");return{type:dt,vehicleId:t,vehicleYear:e}}var pt="USER_LIST_MODIFIED";function ht(t,e){return{type:pt,uuid:t,listType:e}}var Et="ADD_DEVICE_MODAL",ft="DEVICE_DETAILS_MODAL",_t="MODAL_OPENED";function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:_t,modalType:t,params:s({},e)}}var mt="MODAL_CLOSED";function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:mt,modalType:t,params:s({},e)}}var It="SET_SELECTED_INSTALLATION_SKU";function Ct(t){return{type:It,payload:{skuId:t}}}var Tt="ADD_TO_CART_SUCCESS",yt=function(t){var e=t.cartCount,n=t.cartSubTotal,r=t.items,i=void 0===r?[]:r,s=t.lineId,a=t.skuId;return{type:Tt,payload:{cartCount:e,cartSubTotal:n,skuId:a,lineId:s,items:i}}},Lt="ADD_DEVICE";function bt(t){return{type:Lt,deviceUuid:t}}var Rt="REMOVE_DEVICE";function At(t){return{type:Rt,deviceUuid:t}}var Ot="SET_DEVICE_LIST_PAGE",gt=function(){return{type:Ot}},kt="SET_DEVICE_LIST_COUNT",Dt=function(t){return{type:kt,count:t}},Nt="SET_DEVICE_LIST_FILTER",Pt=function(t){var e=t.filter,n=t.groupUuid;return{type:Nt,filter:e,groupUuid:n}},Mt="SET_DEVICE_LIST_SEARCH",wt=function(t){return{type:Mt,search:t}},Vt="SET_DEVICE_LIST_SORT",Ut=function(t){return{type:Vt,sort:t}},Ft="SET_TIME_BASED_SUBSCRIPTION",jt=function(t,e){return{type:Ft,frequency:t,units:e}},Gt="SET_EASY_REPLENISH",xt=function(t){return{type:Gt,replenishId:t}},Bt="SKU_CARD_PDP_CLICKED",qt="SKU_CARD_ADD_TO_CART_CLICKED",Kt=function(t){return{type:t.skuCardEventType,epValue:t.epValue,skuId:t.skuId,instanceId:t.instanceId}},Ht="SET_ACTIVATED_PRICING_OPTION",Yt=function(t){var e=t.skuId,n=void 0===e?"":e,r=t.mobileContract,i=t.retailOption;return{type:Ht,skuId:n,mobileContract:r,retailOption:i}},Xt="CLEAR_SEARCH",Wt=function(t){var e=t.instanceId;return{type:Xt,payload:{instanceId:e}}},zt="REQUEST_INTERRUPTION_PERMISSION",Zt=function(t){var e=t.deviceClass,n=t.interruptionId,r=t.interruptionType,i=t.placement,s=t.requestedInterruptionDuration,a=t.options;return{type:zt,payload:{deviceClass:e,interruptionId:n,interruptionType:r,placement:i,requestedInterruptionDuration:s,options:a}}},Qt="INTERRUPTION_PERMISSION_RESPONSE",Jt=function(t){var e=t.interruptionDuration,n=t.interruptionId,r=t.interruptionType,i=t.permissionGranted,s=t.reason;return{type:Qt,payload:{interruptionDuration:e,interruptionId:n,interruptionType:r,permissionGranted:i,reason:s}}},$t="INTERRUPTION_STATUS_UPDATE",te=function(t){var e=t.interruptionId,n=t.status,r=t.interruptionType,i=t.placement;return{type:$t,payload:{interruptionId:e,interruptionType:r,placement:i,status:n}}},ee="SET_FORM",ne=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defaultId";return{type:ee,payload:{formData:t,formId:e}}},re="RETURN_FORM",ie=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defaultId",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:re,payload:{formData:t,formId:e,isFormValid:n}}},se="REGISTER_CART_ITEMS",ae=function(t){var e=t.cartItems;if(!e||!e.every((function(t){return t&&t.itemKey&&t.skuId})))throw new Error("Invalid cartItems: ".concat(JSON.stringify(e),". Each cartItem must have an itemKey and a skuId"));return{type:se,payload:e}},oe="DEREGISTER_CART_ITEMS",ue=function(t){var e=t.itemKeys;return{type:oe,payload:e}},ce="SET_OPENBOX_STORE_DEPRECATED";function de(t){return{type:ce,payload:t}}},function(t,e){t.exports={creatorNamespace:"shop",componentId:"save-for-later",componentVersion:"",contractVersion:"v1",assetBasePath:"dist/client"}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.warn=e.debug=e.info=e.setInstanceId=e.setComponentDescriptor=e.setStore=e.LogProvider=void 0;var i,s,a,o=n(3),u=r(n(12));function c(t,e,n){var r=o.log(t,e,n,a&&a.creatorNamespace,a&&a.componentId,a&&a.contractVersion,s);i&&i.dispatch?i.dispatch(r):"undefined"!=typeof actionLog&&actionLog.dispatch(r,s)}e.LogProvider=u.default,e.setStore=function(t){i=t},e.setInstanceId=function(t){s=t},e.setComponentDescriptor=function(t){a=t},e.info=function(t,e){c(o.INFO,t,e)},e.warn=function(t,e){c(o.WARN,t,e)},e.error=function(t,e){c(o.ERROR,t,e)},e.debug=function(t,e){c(o.DEBUG,t,e)}},function(t,e){t.exports=actionLog},function(t,e){t.exports=ReactDOM},function(t,e){t.exports=initializer},function(t,e){t.exports=analyticsQ},function(t,e,n){var r=window.metaLayer||window._metaLayer,i="node-cusoweb/shop/save-for-later/dist/client/",s=r?r.env_assets+"/"+i:i;n.p=s},function(t,e,n){},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&s(e,t,n);return a(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(5),d=u(n(1)),l=o(n(0)),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildContext=function(){var t=this.props,e=t.componentId,n=t.creatorNamespace,r=t.contractVersion,i=t.instanceId,s=t.store;return c.setStore(s),c.setInstanceId(i),c.setComponentDescriptor({componentId:e,creatorNamespace:n,contractVersion:r}),{log:{debug:c.debug,error:c.error,info:c.info,warn:c.warn}}},e.prototype.render=function(){return l.Children.only(this.props.children)},e.childContextTypes={log:d.default.shape({debug:d.default.func.isRequired,error:d.default.func.isRequired,info:d.default.func.isRequired,warn:d.default.func.isRequired})},e.propTypes={children:d.default.object.isRequired,componentId:d.default.string.isRequired,creatorNamespace:d.default.string.isRequired,contractVersion:d.default.string.isRequired,instanceId:d.default.string.isRequired,store:d.default.object.isRequired},e}(l.default.Component);e.default=p},function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return Y}));n(10);var r=n(0),i=n.n(r),s=n(7),a=n(8),o=n.n(a),u=n(1),c=n.n(u),d=n.p+"images/8aa4114a886312db19fb769e8b66b476.svg",l=i.a.forwardRef((t,e)=>i.a.createElement("button",{ref:e,"data-track":"Save for Later: Saved",className:"save-for-later-save",onClick:t.handleClick,"aria-expanded":t.ariaExpanded},i.a.createElement("img",{src:d,alt:""}),"Saved"));l.propTypes={handleClick:c.a.func.isRequired,ariaExpanded:c.a.bool.isRequired},l.displayName="SavedButton";var p=l,h=n.p+"images/bc3fd7b891476cb5c74e82497352c6c9.svg",E=i.a.forwardRef((t,e)=>i.a.createElement("button",{ref:e,className:"save-for-later-save",onClick:t.handleClick,"aria-expanded":t.ariaExpanded},i.a.createElement("img",{src:h,alt:""}),"Save"));E.propTypes={handleClick:c.a.func.isRequired,ariaExpanded:c.a.bool.isRequired},E.displayName="SaveForLaterButton";var f=E,_={SAVED:"SAVED",ITEM_ALREADY_EXISTS:"ALREADY_SAVED",SKU_ALREADY_EXISTS:"SKU_ALREADY_EXISTS",COMBO_ALREADY_EXISTS:"COMBO_ALREADY_EXISTS",SOMETHING_WRONG:"SOMETHING_WRONG",MAXIMUM_ITEMS:"FULL"};function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var m=t=>{var{entityId:e,entityType:n,isCombo:r}=t||{},i={type:n};r?i.comboId=e:i.skuId=e;var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),credentials:"include"};return fetch("/list-api/rest/v1/list/saveditems/items",s).then(t=>t.json()).then(t=>{return t.errors?{error:!0,status:(e=t.errors[0].errorCode,Object.keys(_).indexOf(e)>=0?_[e]:_.SOMETHING_WRONG)}:S({},t,{error:!1,status:_.SAVED});var e}).catch(t=>({error:!0,errorCode:"FETCH_ERROR",originalError:t}))},v=n(2),I=t=>{var{status:e,children:n,deviceClass:r,handleCloseModal:i,showStatus:s,tooltipPosition:a}=t,o=C(e);return"s"===r?T(n,i,o):y(n,i,o,a)},C=t=>{switch(t){case _.SAVED:return i.a.createElement(L,null);case _.ITEM_ALREADY_EXISTS:case _.SKU_ALREADY_EXISTS:case _.COMBO_ALREADY_EXISTS:return i.a.createElement(b,null);case _.SOMETHING_WRONG:return i.a.createElement(R,null);case _.MAXIMUM_ITEMS:return i.a.createElement(A,null);default:return i.a.createElement(R,null)}},T=(t,e,n)=>i.a.createElement("div",null,i.a.createElement(v.PLPortal,null,i.a.createElement(v.PLModal,{size:"small-view",onClose:e},n)),t),y=(t,e,n,r)=>i.a.createElement(v.PLOverlayWrapper,{isVisible:!0,onChange:e,overlay:()=>n,position:r,id:"save-for-later-tooltip"},t),L=()=>i.a.createElement("div",null,i.a.createElement("span",{key:"1",className:"tooltip-success"},i.a.createElement(v.PLSVG,{className:"tooltip-icon",fill:v.webGreen,width:16,height:16,icon:"confirm"}),"Saved"),i.a.createElement("div",{key:"2"},i.a.createElement("a",{"data-track":"Save for Later: Go to your saved items",href:"/site/customer/lists/manage/saveditems"},"Go to your saved items"))),b=()=>i.a.createElement("div",null,i.a.createElement("span",{key:"1",className:"tooltip-success"},i.a.createElement(v.PLSVG,{className:"tooltip-icon",fill:v.webGreen,width:16,height:16,icon:"confirm"}),"Already saved"),i.a.createElement("div",{key:"2"},i.a.createElement("a",{"data-track":"Save for Later: Go to your saved items",href:"/site/customer/lists/manage/saveditems"},"Go to your saved items"))),R=()=>i.a.createElement("div",null,i.a.createElement("span",{key:"1",className:"tooltip-error"},i.a.createElement(v.PLSVG,{className:"tooltip-icon",fill:v.valueRed,width:16,height:16,icon:"alert-triangle"}),"Something went wrong."),i.a.createElement("p",{key:"2"},"Please try again later.")),A=()=>i.a.createElement("div",null,i.a.createElement("span",{key:"1",className:"tooltip-error"},i.a.createElement(v.PLSVG,{className:"tooltip-icon",fill:v.valueRed,width:16,height:16,icon:"alert-triangle"}),"This item could not be saved."),i.a.createElement("p",{key:"2"},"Your saved items list is full."),i.a.createElement("div",{key:"3"},i.a.createElement("a",{href:"/site/customer/lists/manage/saveditems"},"Manage your saved items")));I.propTypes={deviceClass:c.a.string.isRequired,status:c.a.string.isRequired,tooltipPosition:c.a.string.isRequired,handleCloseModal:c.a.func.isRequired};var O=I,g=n(9);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t){var e,n=t.context,r=t.sku,i=t.value;if(!i)throw new Error("please provide a value for buttonClick action");if(!((e=i)&&"object"===k(e)&&e.constructor===Object||function(t){return"string"==typeof t||t instanceof String}(i)))throw new Error("value should be a string or object");return{type:"BUTTON_CLICK",context:n,value:i,sku:r}}var N=n(3);class P extends i.a.Component{componentDidMount(){this.input.focus()}componentDidUpdate(){this.props.error&&this.input.focus()}render(){var{handleChange:t,error:e}=this.props;return i.a.createElement("div",{className:"form-group form-create "+(e&&"has-error")},i.a.createElement("label",{htmlFor:"create-new-list"},"Create a new list"),i.a.createElement("input",{ref:t=>{this.input=t},maxLength:"49",type:"text",className:"form-control",id:"create-new-list","aria-describedby":"create-list-error",placeholder:"Ex: My Wish List",onChange:t}),e&&i.a.createElement("small",{id:"create-list-error",className:"help-block"},e))}}P.propTypes={error:c.a.string,handleChange:c.a.func};class M extends r.Component{constructor(t){super(t),this.inputValue,this.state={view:!1,create:!1,showConfirmation:!1,newLists:[],savedItemsChecked:!1,lists:{allIds:[],byId:{}},error:!1,saveToListsError:!1,isGuest:!1,checkedCount:0},this._onInputChange=this._onInputChange.bind(this),this._onSaveClick=this._onSaveClick.bind(this),this._showCreate=this._showCreate.bind(this),this._showView=this._showView.bind(this),this._onCheckboxClickCreated=this._onCheckboxClickCreated.bind(this),this._onCheckboxClickCustom=this._onCheckboxClickCustom.bind(this),this._onAddSkuToLists=this._onAddSkuToLists.bind(this),this._onCheckboxClickSavedItems=this._onCheckboxClickSavedItems.bind(this),this._getContent=this._getContent.bind(this)}componentDidMount(){this._fetchCustomLists()}render(){var{deviceClass:t,closeModal:e}=this.props,n=this._getContent();return i.a.createElement(v.PLModal,{autoFocus:"false",size:"s"===t?"small-view":"small",onClose:e},i.a.createElement("div",{className:"custom-lists-modal"},i.a.createElement("h1",{className:"modal-title"},"Add to a list"),n))}_getContent(){var{create:t,view:e,isGuest:n}=this.state;return n?this._signInCreateAccount():t?this._create():e?this._view():void 0}_signInCreateAccount(){return i.a.createElement("div",{className:"sign-in-container"},i.a.createElement("div",{className:"modal-body"},i.a.createElement("a",{href:"/identity/global/signin"},"Sign in")," or ",i.a.createElement("a",{href:"/identity/global/createAccount"},"create an account")," to add items to a list."))}_create(){var{error:t}=this.state;return i.a.createElement("div",{className:"create"},i.a.createElement("div",{className:"modal-body"},i.a.createElement(P,{error:t,handleChange:this._onInputChange}),i.a.createElement("div",{className:"form-actions"},i.a.createElement(v.PLButton,{buttonStyle:"link",size:"small",onClick:this._onSaveClick,"data-track":"Product: Create New List"},"Save"),i.a.createElement("div",{className:"form-action-divider"}),i.a.createElement(v.PLButton,{buttonStyle:"link",size:"small",onClick:this._showView},"Cancel"))))}_view(){return i.a.createElement("div",{className:"view"},i.a.createElement("fieldset",null,i.a.createElement("legend",{className:"sub-title"}," Select one or more: "),i.a.createElement("div",{className:"modal-body"},i.a.createElement("div",{className:"form-group form-view"},this._savedItemsCheckbox(),this._customListsList(),this._newListsList()),i.a.createElement("div",{className:"form-actions-top"},i.a.createElement(v.PLButton,{buttonStyle:"link",size:"small",onClick:this._showCreate,iconPosition:"leading"},i.a.createElement("i",{className:"ficon-plus plus plus-sm"},i.a.createElement("span",{className:"sr-only"},"Loading Icon")),"Create a new list")),i.a.createElement("div",{className:"form-actions-bottom "+(this.state.showConfirmation&&"confirmation")},this.state.showConfirmation?i.a.createElement("h4",{className:"item-added-confirmation fade-in"},i.a.createElement("i",{className:"ficon-checkmark"})," Added!"):this._addSkuToListButton()),this.state.saveToListsError&&i.a.createElement("div",{className:"form-action-error"},i.a.createElement("small",null,i.a.createElement("i",{className:"ficon-alert-triangle"}),"Something went wrong. Please try that again.")))))}_savedItemsCheckbox(){if("savedItems"!==this.props.activeList)return i.a.createElement(v.PLCheckbox,{checked:this.state.savedItemsChecked,key:"saved-items",value:"saved-items",size:"small",disabled:!1,onChange:this._onCheckboxClickSavedItems},"Saved Items")}_addSkuToListButton(){if(this.state.checkedCount>0||this.state.savedItemsChecked)return i.a.createElement(v.PLButton,{buttonStyle:"secondary",size:"medium",onClick:this._onAddSkuToLists,"data-track":"Product: Add to List",blockLevel:!0},"Add to List")}_customListsList(){var t=this.state.lists.allIds.filter(t=>t!==this.props.activeList);if(t.length>0)return t.map(t=>i.a.createElement(v.PLCheckbox,{key:t,value:t,size:"small",disabled:!1,onChange:this._onCheckboxClickCustom,checked:this.state.lists.byId[t].isChecked},this.state.lists.byId[t]["short-description"]))}_newListsList(){if(this.state.newLists.length>0)return this.state.newLists.map(t=>i.a.createElement(v.PLCheckbox,{key:t["short-description"],value:t["short-description"],size:"small",disabled:!1,onChange:this._onCheckboxClickCreated,checked:t.isChecked},t["short-description"]))}_onAddSkuToLists(){var t=[],e=this.state.newLists.filter(t=>t.isChecked);if(e)for(var n=0;n<e.length;n++)t.push(this._saveNewList(e[n]["short-description"],e[n].type));var r=this.state.lists.allIds.filter(t=>this.state.lists.byId[t].isChecked);if(r)for(var i=0;i<r.length;i++)t.push(this._saveSkuToList(r[i],this.state.lists.byId[r[i]].type));this.state.savedItemsChecked&&t.push(this._saveSkuToSavedItems()),Promise.all(t).then(t=>{this.setState({showConfirmation:!0,saveToListsError:!1}),this._closeOnTimeout(this.props.closeModal)}).catch(t=>{this.setState({saveToListsError:!0})})}_onCheckboxClickCreated(t){var e=Object.assign([],this.state.newLists),n=e.findIndex(e=>e["short-description"]===t.target.value);if(n>=0){e[n].isChecked=t.target.checked;var r=this.state.checkedCount;t.target.checked?r++:r--,this.setState({newLists:e,checkedCount:r})}}_onCheckboxClickCustom(t){var e=Object.assign({},this.state.lists);if(e.byId[t.target.value]){e.byId[t.target.value].isChecked=t.target.checked;var n=this.state.checkedCount;t.target.checked?n++:n--,this.setState({lists:e,checkedCount:n})}}_onCheckboxClickSavedItems(t){this.setState({savedItemsChecked:t.target.checked})}_fetchCustomLists(){var{instanceId:t,dispatch:e}=this.props;fetch("/cuso-api/user/lists",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}).then(t=>t.json()).then(t=>{if("Guest"===t.authenticationStatus)this.setState({isGuest:!0});else{var e=this.state.lists;e.allIds=t.lists.allIds,e.byId=t.lists.byId,this.setState({lists:e,view:!0})}}).catch(n=>{e(Object(N.displayAlert)(n),t)})}_saveNewList(t,e){return(t=>{var e={"short-description":t,editable:!1,occasion:"createyourownlist","occasion-notes":{},"occasion-date":"","privacy-setting":"private","list-notes":{"first-name":"","last-name":""},"created-on-channel":"www.bestbuy.com"};return fetch("/cuso-api/profile/rest/giftregistry/add",{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(t=>t.json())})(t).then(t=>this._saveSkuToList(t.uuid,t.type))}_saveSkuToList(t,e){var{skuId:n,instanceId:r,dispatch:i}=this.props;return((t,e,n)=>{var r={sku:t,"required-quantity":1};return fetch("/cuso-api/profile/rest/customer/lists/"+n+"/"+e+"/listitem",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(t=>t.json())})(n,t,e).then(e=>(i(Object(N.userListModified)(t,"createyourown"),r),e))}_saveSkuToSavedItems(){var{skuId:t,entityId:e,entityType:n,isCombo:r,instanceId:i,dispatch:s}=this.props;return m({skuId:t,entityId:e||t,entityType:n,isCombo:r}).then(t=>(s(Object(N.userListModified)(t.id,"savedItems"),i),t))}_onSaveClick(){if(this.inputValue&&!this._inputErrors(this.inputValue)){var t=this.state.newLists;t.push({"short-description":this.inputValue,isChecked:!0});var e=this.state.checkedCount;e++,this.inputValue="",this.setState({newLists:t,view:!0,create:!1,error:!1,checkedCount:e})}else this.setState({error:this._inputErrors(this.inputValue)})}_closeOnTimeout(t){setTimeout(()=>{t()},750)}_inputErrors(t){return!t||!t.length>0?"Please enter a list name":t&&t.length>=50?"Maximum of 50 characters":void 0}_showCreate(){this.setState({view:!1,create:!0,error:!1})}_showView(){this.setState({view:!0,create:!1,error:!1})}_onInputChange(t){this.inputValue=t.target.value}}M.propTypes={skuId:c.a.string.isRequired,entityId:c.a.string,entityType:c.a.string,isCombo:c.a.bool.isRequired,deviceClass:c.a.string,closeModal:c.a.func,dispatch:c.a.func,instanceId:c.a.string,activeList:c.a.string};class w extends r.Component{constructor(t){super(t),this.state={showModal:!1},this._openModal=this._openModal.bind(this),this._closeModal=this._closeModal.bind(this)}componentDidUpdate(){var t;!this.state.showModal&&this.triggerGetsFocus&&(this.triggerGetsFocus=!1,null===(t=this.trigger)||void 0===t||t.focus());this.state.showModal&&(this.triggerGetsFocus=!0)}render(){var{deviceClass:t,skuId:e,dispatch:n,instanceId:r,activeList:s}=this.props;return i.a.createElement("div",{className:"custom-lists "+("s"===t?"sv":"lv")},i.a.createElement(v.PLButton,{inputRef:t=>{this.trigger=t},buttonStyle:"link",size:"small",onClick:this._openModal},"Add to list"),this.state.showModal&&this._AddSkuToListModal(t,e,n,r,s))}_AddSkuToListModal(t,e,n,r,s){var{entityId:a,isCombo:o}=this.props;if(this.state.showModal)return i.a.createElement(M,{key:e,skuId:e,entityId:a,isCombo:o,deviceClass:t,closeModal:this._closeModal,dispatch:n,instanceId:r,activeList:s})}_openModal(){this.setState({showModal:!0})}_closeModal(){this.setState({showModal:!1})}}w.propTypes={skuId:c.a.string.isRequired,entityId:c.a.string,entityType:c.a.string,isCombo:c.a.bool.isRequired,deviceClass:c.a.string,instanceId:c.a.string,activeList:c.a.string,dispatch:c.a.func};var V=w;function U(){return(U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}class F extends r.Component{constructor(t){super(t),this.state={isSaved:t.isSkuInList,status:t.isSkuInList?_.ITEM_ALREADY_EXISTS:null},this.buttonRef=i.a.createRef(),this._setupSavedListener=this._setupSavedListener.bind(this),this._savedButton=this._savedButton.bind(this),this._saveForLaterButton=this._saveForLaterButton.bind(this),this._handleAlreadySaved=this._handleAlreadySaved.bind(this),this._handleCloseModal=this._handleCloseModal.bind(this),this._setButtonStatus=this._setButtonStatus.bind(this),this.handleSaveForLater=this.handleSaveForLater.bind(this),this._fireAnalyticsEvents=this._fireAnalyticsEvents.bind(this)}componentDidMount(){if(!this.props.disableSaveForLater){var t="s"===document.cookie.replace(/(?:(?:^|.*;\s*)bby_rdp\s*=\s*([^;]*).*$)|^.*$/,"$1")?"s":"l";this._setupSavedListener(),this.setState({deviceClass:t})}}componentDidUpdate(t){this.buttonRef.current&&this.state.showStatus!==t.showStatus&&this.state.showStatus&&this.buttonRef.current.focus()}render(){var{isSaved:t,deviceClass:e}=this.state,{enableCustomLists:n,skuId:r,dispatch:s,instanceId:a,activeList:o,disableSaveForLater:u}=this.props;return u?i.a.createElement("div",{className:"save-for-later"}):e&&n?i.a.createElement("div",{className:"save-for-later"},i.a.createElement(V,{skuId:r,deviceClass:e,dispatch:s,instanceId:a,activeList:o})):i.a.createElement("div",{className:"save-for-later"},t?this._savedButton():this._saveForLaterButton())}_setupSavedListener(){var{instanceId:t,listen:e}=this.props;e(t=>{this._setButtonStatus(t)},t)}_setButtonStatus(t){var{skuId:e}=this.props;t.type===N.SET_SAVED_ITEMS_SKU_STATE&&t.skuId===e&&this.setState({isSaved:t.isSaved,status:_.SAVED,showStatus:!1})}handleSaveForLater(){var{skuId:t,entityId:e,entityType:n,isCombo:r,instanceId:i,dispatch:s}=this.props;m({entityId:e,entityType:n,isCombo:r}).then(n=>{var r=this._isSkuSaved(n);r&&s(Object(N.setSavedItemsSkuState)(t||e,!0),i),this._fireAnalyticsEvents(n),this.setState({isSaved:r,status:n.status,showStatus:n.status!==_.SAVED})})}_isSkuSaved(t){return!t.error||t.status===_.ITEM_ALREADY_EXISTS||t.status===_.COMBO_ALREADY_EXISTS||t.status===_.SKU_ALREADY_EXISTS}_fireAnalyticsEvents(t){var{skuId:e}=this.props;t.status===_.SAVED&&Object(g.dispatch)(D({sku:e,value:{linkName:"Save for Later","bb.saveForLater":1}}))}_handleAlreadySaved(){var{status:t}=this.state;t===_.ITEM_ALREADY_EXISTS||t===_.COMBO_ALREADY_EXISTS||t===_.SKU_ALREADY_EXISTS?this.setState({status:_.SAVED,showStatus:!0}):this.setState({showStatus:!0})}_handleCloseModal(){this.setState({showStatus:!1},()=>{this.buttonRef.current&&this.buttonRef.current.focus()})}_savedButton(){var{status:t,showStatus:e,deviceClass:n}=this.state,{tooltipPosition:r}=this.props,s=i.a.createElement(p,{ref:this.buttonRef,handleClick:this._handleAlreadySaved,ariaExpanded:e});return e?i.a.createElement(O,{deviceClass:n,handleCloseModal:this._handleCloseModal,status:t,tooltipPosition:r},s):s}_saveForLaterButton(){var{status:t,showStatus:e,deviceClass:n}=this.state,{tooltipPosition:r}=this.props,s=i.a.createElement(f,U({ref:this.buttonRef,handleClick:this.handleSaveForLater},e?{"aria-expanded":e}:""));return e?i.a.createElement(O,{deviceClass:n,handleCloseModal:this._handleCloseModal,status:t,tooltipPosition:r},s):s}}F.propTypes={skuId:c.a.string,entityId:c.a.string,entityType:c.a.string,isCombo:c.a.bool.isRequired,tooltipPosition:c.a.string,instanceId:c.a.string.isRequired,listen:c.a.func.isRequired,dispatch:c.a.func.isRequired,enableCustomLists:c.a.bool,activeList:c.a.string,isSkuInList:c.a.bool,disableSaveForLater:c.a.bool};var j=F,G=n(6),x=(n(11),t=>{var{skuId:e,entityId:n,entityType:r,isCombo:s,instanceId:a,enableCustomLists:o,activeList:u,tooltipPosition:c,isSkuInList:d,disableSaveForLater:l}=t;return i.a.createElement("div",{className:"appContainer"},i.a.createElement(j,{skuId:e,entityId:n,entityType:r,isCombo:s,isSkuInList:d,listen:G.listen,dispatch:G.dispatch,instanceId:a,enableCustomLists:o,activeList:u,tooltipPosition:c,disableSaveForLater:l}))});x.propTypes={instanceId:c.a.string.isRequired,entityType:c.a.string.isRequired,entityId:c.a.string,skuId:c.a.string,isCombo:c.a.bool,tooltipPosition:c.a.string.isRequired,enableCustomLists:c.a.bool,activeList:c.a.string,isSkuInList:c.a.bool,disableSaveForLater:c.a.bool};var B=x,q=n(5),K=n(4),H={componentId:K.componentId,contractVersion:K.contractVersion,creatorNamespace:K.creatorNamespace},Y=function(t,e,n,r){void 0===n&&(n={});var a=document.querySelector(e);window.performance.mark("Save-for-Later-Component:init:"+t),Object(s.hydrate)(i.a.createElement(q.LogProvider,{instanceId:t,componentId:K.componentId,creatorNamespace:K.creatorNamespace,contractVersion:K.contractVersion},i.a.createElement(B,{instanceId:t,skuId:n.app.skuId,entityId:n.app.entityId,entityType:n.app.entityType,isCombo:n.app.isCombo,isSkuInList:n.app.isSkuInList,enableCustomLists:n.app.enableCustomLists,activeList:n.app.activeList,tooltipPosition:n.app.tooltipPosition,disableSaveForLater:n.disableSaveForLater})),a,()=>{window.performance.mark("Save-for-Later-Component:hydrate-complete:"+t),window.performance.measure("Save-for-Later-Component:"+t,"Save-for-Later-Component:init:"+t,"Save-for-Later-Component:hydrate-complete:"+t)})};o.a.registerComponent(H,Y)}]);
//# sourceMappingURL=client-e062236836a6d807d09a1bf4b38465c8.mjs.map