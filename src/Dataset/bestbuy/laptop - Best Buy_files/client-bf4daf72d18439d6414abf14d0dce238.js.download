!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=31)}([function(e,t){e.exports=PropTypes},function(e,t){e.exports=React},function(e,t){e.exports=patternLibrary},function(e,t){e.exports=actionLog},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(3),o=function(e){var t=e.creatorNamespace,r=e.componentId,o=e.contractVersion,a=function(e){return e=Object(n.a)(e),Object.keys(e).sort().reduce((function(t,r){r=encodeURIComponent(r);var n=encodeURIComponent(e[r]);return t.push(r+"="+n),t}),[]).join("&")}(e.query);return"/"+t+"/"+r+"/"+o+(a?"?"+a:"")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,r.d(t,"getComponentIncludeString",(function(){return c})),r.d(t,"renderComponent",(function(){return i}));var n=r(2),o=r(0),a=r(5);function i(e){return Promise.resolve({html:c(e),scripts:[],styles:[]})}function c(e){var t=e.creatorNamespace,r=e.componentId,n=e.contractVersion,o=e.query,a=void 0===o?{}:o,i=e.onError,c=void 0===i?"continue":i,u={cn:t,cid:r,ver:n,query:Object.keys(a).reduce((function(e,t,r){return e.concat([encodeURIComponent(t)+"="+s(a[t])])}),[]).join("&"),onError:c};return"<csi:component "+Object.keys(u).reduce((function(e,t){var r=u[t];return"query"!==t||r?(e+" "+t+'="'+r+'"').trim():e}),"")+" />"}function s(e){return e instanceof a.a?e.toString():encodeURIComponent(e)}r.d(t,"buildComponentPath",(function(){return o.a})),r.d(t,"CsiVar",(function(){return a.a})),r.d(t,"fetchComponent",(function(){return n.a}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=function(e,t){var r=Object(n.a)(e),o="/site/canopy/component";if("undefined"!=typeof configService){var c=configService.getServiceConfig("embeddedComponentRenderer");c.defaults={clientUrl:"/site/canopy/component"},o=c.get("clientUrl").replace(/\/$/,"")}var s=""+o+r;return fetch(s,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw new Error("Failed to fetch "+s);return e.text().then((function(e){var t=a(e),n=i(e);return{html:e,path:r,renderCallback:function(){t.length&&t.forEach((function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.body.appendChild(t)})),n.length&&n.forEach((function(e){eval.call(window,e)}))}}}))}))},a=function(e){for(var t=/<script\b.*\b(src="(.*)").*[^>]/g,r=[],n=void 0;null!==(n=t.exec(e));)r.push(n[2]);return r},i=function(e){for(var t=/<script>([\s\S]*?)<\/script>/gm,r=[],n=void 0;null!==(n=t.exec(e));)r.push(n[1]);return r}},function(e,t,r){"use strict";var o=r(4),a=r.n(o),i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)};t.a=function(e){var t=Object.assign({},e),r=c();return Object.keys(t).forEach((function(e){var n=t[e];if("object"===(void 0===n?"undefined":i(n))&&null!==n){var o=n.name.split(".")[0];t[e]="query"===o?a.a.get(r,n.name,n.defaultValue||""):n.toString()}})),t};var c=function(){return{query:s()}},s=function(){return u(window.location.search.replace(/^\?/,""),"&")},u=function(e,t){var r={};return e.split(t).forEach((function(e){var t=e.split("=");t.length>1&&(r[t[0].trim()]=t[1].trim())})),r}},function(e,t){e.exports=r(25)},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.defaultValue=void 0!==r?r.toString():void 0}return n(e,[{key:"toString",value:function(){var e=this.defaultValue?"|'"+this.defaultValue+"'":"";return"$(csi."+this.name+e+")"}}]),e}()}]))},function(e,t){e.exports=jQuery},function(e,t){e.exports={creatorNamespace:"shop",componentId:"compare-tray",componentVersion:"",contractVersion:"v1",assetBasePath:"dist/client"}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageHandler=t.CookieHandler=void 0;var n=a(r(26)),o=a(r(27));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.CookieHandler=n,t.LocalStorageHandler=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.error=t.warn=t.debug=t.info=t.setInstanceId=t.setComponentDescriptor=t.setStore=t.LogProvider=void 0;var o,a,i,c=r(29),s=n(r(30));function u(e,t,r){var n=c.log(e,t,r,i&&i.creatorNamespace,i&&i.componentId,i&&i.contractVersion,a);o&&o.dispatch?o.dispatch(n):"undefined"!=typeof actionLog&&actionLog.dispatch(n,a)}t.LogProvider=s.default,t.setStore=function(e){o=e},t.setInstanceId=function(e){a=e},t.setComponentDescriptor=function(e){i=e},t.info=function(e,t){u(c.INFO,e,t)},t.warn=function(e,t){u(c.WARN,e,t)},t.error=function(e,t){u(c.ERROR,e,t)},t.debug=function(e,t){u(c.DEBUG,e,t)}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=analyticsQ},function(e,t,r){"use strict";function n(e,t,r){if(!t)throw Error("maxHeight is required");var n="string"==typeof e?document.querySelectorAll(e):e;"length"in n||(n=[n]);for(var o="â€¦",a="js-shave",i=!0,c=r&&r.character||o,s=r&&r.classname||a,u=(!r||!1!==r.spaces)&&i,l='<span class="js-shave-char">'+c+"</span>",f=0;f<n.length;f++){var d=n[f],p=d.querySelector("."+s),m=void 0===d.textContent?"innerText":"textContent";if(p){var y=d.querySelector(".js-shave-char");y[m]=u?" ":"";var h=d[m];d.removeChild(y),d[m]=h}var v=d[m],S=u?v.split(" "):v;if(!(S.length<2)){var _=d.style.height;d.style.height="auto";var b=d.style.maxHeight;if(d.style.maxHeight="none",d.offsetHeight<t)d.style.height=_,d.style.maxHeight=b;else{for(var E=S.length-1,g=0,I=void 0;g<E;)I=g+E+1>>1,d[m]=u?S.slice(0,I).join(" "):S.slice(0,I),d.insertAdjacentHTML("beforeend",l),d.offsetHeight>t?E=u?I-1:I-2:g=I;d[m]=u?S.slice(0,E).join(" "):S.slice(0,E),d.insertAdjacentHTML("beforeend",l);var T=u?S.slice(E).join(" "):S.slice(E);d.insertAdjacentHTML("beforeend",'<span class="'+s+'" style="display:none;">'+T+"</span>"),d.style.height=_,d.style.maxHeight=b}}}}if("undefined"!=typeof window){var o=window.$||window.jQuery||window.Zepto;o&&(o.fn.shave=function(e,t){return n(this,e,t),this})}e.exports=n},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(23);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(7),o=r(24);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(8),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(28));function i(e,t){return JSON.parse(e.get(t))}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handler=t;try{this.handler.init()}catch(e){this.handler=o.CookieHandler,this.handler.init()}}return n(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("string"!=typeof e)throw new TypeError("key must be a string");var r=i(this.handler,e);return r?r.value:void 0===t?null:t}},{key:"getMeta",value:function(e){if("string"!=typeof e)throw new TypeError("key must be a string");var t=i(this.handler,e);return t?t.meta:null}},{key:"remove",value:function(e){if("string"!=typeof e)throw new TypeError("key must be a string");return this.handler.remove(e)}},{key:"set",value:function(e,t,r){if("string"!=typeof e)throw new TypeError("key must be a string");var n=this.handler,o=new Date;r||(r={}),r.expireAt||(r.expireSec>=0?(r.expireAt=new Date(o),r.expireAt.setSeconds(r.expireAt.getSeconds()+r.expireSec)):r.ExpiresAt?r.expireAt=r.ExpiresAt:r.expires>=0&&(r.expireAt=new Date(o),r.expireAt.setMinutes(r.expireAt.getMinutes()+r.expires)));var c={CreatedAt:o,ModifiedAt:o,ExpiresAt:r&&r.expireAt||null},s=i(n,e);s&&(c.CreatedAt=s.meta?s.meta.CreatedAt:new Date(o));var u=JSON.stringify({meta:c,value:t});if(!r.skipValidation){if(a.hasCreditCard(u))throw new Error("Cannot store strings that look like credit card numbers");if(a.hasEmailAddress(u))throw new Error("Cannot store email addresses");if(a.hasSsn(u))throw new Error("Cannot store ssn")}return n.set(e,u,r)}}],[{key:"createDefault",value:function(){var t=void 0;try{t=new e(o.LocalStorageHandler)}catch(r){t=new e(o.CookieHandler)}return t}}]),e}();c.handlers={CookieHandler:o.CookieHandler,LocalStorageHandler:o.LocalStorageHandler},t.default=c},function(e,t){e.exports=initializer},function(e,t,r){var n=window.metaLayer||window._metaLayer,o=n?"".concat(n.env_assets,"/").concat("shop/compare-tray/dist/client/"):"shop/compare-tray/dist/client/";r.p=o},function(e,t,r){},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){},t.get=function(e){for(var t=encodeURIComponent(e),r=n.r().split("; "),o=0;o<r.length;o++)if(r[o].substr(0,t.length+1)===t+"=")return decodeURIComponent(r[o].substr(t.length+1));return null},t.set=o,t.remove=function(e,t){return o(e,"",{domain:t&&t.domain,expireAt:new Date(0)}),!0};var n={r:function(){return document.cookie},w:function(e){document.cookie=e}};function o(e,t,r){var o,a=[encodeURIComponent(e)+"="+encodeURIComponent(t)];r&&r.expireAt&&a.push("expires="+r.expireAt.toUTCString()),a.push("path="+(r&&r.path||"/"),"domain="+((o=r&&r.domain)?o.replace(/^\.?/,"."):"."+window.location.hostname.split(".").slice(-2).join("."))),r&&r.secure&&a.push("secure"),n.w(a.join("; ")+"; ")}t.c=n},function(e,t,r){"use strict";function n(e){return sessionStorage.removeItem(e),localStorage.removeItem("d_"+e),localStorage.removeItem("e_"+e),!0}Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){localStorage.setItem("test","1"),localStorage.removeItem("test"),sessionStorage.setItem("test","1"),sessionStorage.removeItem("test")},t.get=function(e){var t=sessionStorage.getItem(e);if(t)return t;if(new Date(localStorage.getItem("e_"+e))<new Date)return n(e),null;return localStorage.getItem("d_"+e)},t.set=function(e,t,r){r&&r.expireAt?(localStorage.setItem("e_"+e,r.expireAt),localStorage.setItem("d_"+e,t)):sessionStorage.setItem(e,t)},t.remove=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=/\d{4}-?\d{4}-?\d{4}-?\d{4}/,a=/\d{3}-\d{2}-\d{4}/i;t.hasEmailAddress=function(e){return n.test(e)},t.hasCreditCard=function(e){return o.test(e)},t.hasSsn=function(e){return a.test(e)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,"ADD_ADD_ON_ITEM",(function(){return h})),r.d(t,"ADD_DEVICE",(function(){return Te})),r.d(t,"ADD_DEVICE_MODAL",(function(){return me})),r.d(t,"ADD_LINE_ITEM",(function(){return g})),r.d(t,"ADD_SKU_TO_COMPARE",(function(){return re})),r.d(t,"ADD_TO_CART_SUCCESS",(function(){return ge})),r.d(t,"BUYING_OPTIONS_ANCHOR",(function(){return W})),r.d(t,"CHANGE_SKU",(function(){return m})),r.d(t,"CLEAR_ALERT",(function(){return U})),r.d(t,"CLEAR_SEARCH",(function(){return ze})),r.d(t,"DANGER_ALERT",(function(){return j})),r.d(t,"DEBUG",(function(){return w})),r.d(t,"DEREGISTER_CART_ITEMS",(function(){return ct})),r.d(t,"DEVICE_DETAILS_MODAL",(function(){return ye})),r.d(t,"DISPLAY_ALERT",(function(){return L})),r.d(t,"ERROR",(function(){return P})),r.d(t,"INFO",(function(){return O})),r.d(t,"INFO_ALERT",(function(){return D})),r.d(t,"INTERRUPTION_PERMISSION_RESPONSE",(function(){return Xe})),r.d(t,"INTERRUPTION_STATUS_UPDATE",(function(){return Je})),r.d(t,"LOG",(function(){return R})),r.d(t,"MANUFACTURE_CONTENT_ANCHOR",(function(){return z})),r.d(t,"MODAL_CLOSED",(function(){return Se})),r.d(t,"MODAL_OPENED",(function(){return he})),r.d(t,"QUESTIONS_ANSWERS_ANCHOR",(function(){return Y})),r.d(t,"RATINGS_REVIEWS_ANCHOR",(function(){return Q})),r.d(t,"REFRESH_DEVICE_CONFIGURATION",(function(){return ee})),r.d(t,"REGISTER_CART_ITEMS",(function(){return at})),r.d(t,"REMOVE_ADD_ON_ITEM",(function(){return b})),r.d(t,"REMOVE_DEVICE",(function(){return Re})),r.d(t,"REMOVE_LINE_ITEM",(function(){return T})),r.d(t,"REMOVE_SKU_FROM_COMPARE",(function(){return oe})),r.d(t,"REQUEST_INTERRUPTION_PERMISSION",(function(){return Qe})),r.d(t,"RETURN_FORM",(function(){return nt})),r.d(t,"SET_ACTIVATED_PRICING_OPTION",(function(){return Ke})),r.d(t,"SET_ANCHOR",(function(){return $})),r.d(t,"SET_DESTINATION_ZIP_CODE",(function(){return G})),r.d(t,"SET_DEVICE_LIST_COUNT",(function(){return we})),r.d(t,"SET_DEVICE_LIST_FILTER",(function(){return Le})),r.d(t,"SET_DEVICE_LIST_PAGE",(function(){return ke})),r.d(t,"SET_DEVICE_LIST_SEARCH",(function(){return De})),r.d(t,"SET_DEVICE_LIST_SORT",(function(){return je})),r.d(t,"SET_EASY_REPLENISH",(function(){return He})),r.d(t,"SET_FACET_VIEW_VISIBILITY",(function(){return d})),r.d(t,"SET_FORM",(function(){return tt})),r.d(t,"SET_OPENBOX_STORE_DEPRECATED",(function(){return ut})),r.d(t,"SET_PROTECTION_PLAN",(function(){return ie})),r.d(t,"SET_SAVED_ITEMS_SKU_STATE",(function(){return se})),r.d(t,"SET_SEARCH_ZIP_CODE",(function(){return S})),r.d(t,"SET_SELECTED_INSTALLATION_SKU",(function(){return be})),r.d(t,"SET_SELECTED_NEARBY_STORE_ID_LIST",(function(){return q})),r.d(t,"SET_SKU_LIST_FACET_LIST",(function(){return s})),r.d(t,"SET_SKU_LIST_PAGE",(function(){return l})),r.d(t,"SET_SKU_LIST_SORT",(function(){return i})),r.d(t,"SET_STORE_ID",(function(){return H})),r.d(t,"SET_TIME_BASED_SUBSCRIPTION",(function(){return Ue})),r.d(t,"SET_VEHICLE",(function(){return le})),r.d(t,"SKU_CARD_ADD_TO_CART_CLICKED",(function(){return Be})),r.d(t,"SKU_CARD_PDP_CLICKED",(function(){return qe})),r.d(t,"SPECIFICATIONS_ANCHOR",(function(){return Z})),r.d(t,"STEPUP_ANCHOR",(function(){return X})),r.d(t,"SUCCESS_ALERT",(function(){return N})),r.d(t,"USER_LIST_MODIFIED",(function(){return de})),r.d(t,"WARN",(function(){return k})),r.d(t,"WARNING_ALERT",(function(){return M})),r.d(t,"addAddOnItem",(function(){return v})),r.d(t,"addDevice",(function(){return Ce})),r.d(t,"addLineItem",(function(){return I})),r.d(t,"addSkuToCompare",(function(){return ne})),r.d(t,"addToCartSuccess",(function(){return Ie})),r.d(t,"changeSku",(function(){return y})),r.d(t,"clearAlert",(function(){return V})),r.d(t,"clearSearch",(function(){return Ye})),r.d(t,"deregisterCartItems",(function(){return st})),r.d(t,"displayAlert",(function(){return x})),r.d(t,"interruptionPermissionResponse",(function(){return $e})),r.d(t,"interruptionStatusUpdate",(function(){return et})),r.d(t,"log",(function(){return A})),r.d(t,"modalClosed",(function(){return _e})),r.d(t,"modalOpened",(function(){return ve})),r.d(t,"refreshDeviceConfiguration",(function(){return te})),r.d(t,"registerCartItems",(function(){return it})),r.d(t,"removeAddOnItem",(function(){return E})),r.d(t,"removeDevice",(function(){return Oe})),r.d(t,"removeLineItem",(function(){return C})),r.d(t,"removeSkuFromCompare",(function(){return ae})),r.d(t,"requestInterruptionPermission",(function(){return Ze})),r.d(t,"returnForm",(function(){return ot})),r.d(t,"setActivatedPricingOption",(function(){return We})),r.d(t,"setAnchor",(function(){return J})),r.d(t,"setDeprecatedOpenboxStoreChanged",(function(){return lt})),r.d(t,"setDestinationZipCode",(function(){return K})),r.d(t,"setDeviceListCount",(function(){return Ae})),r.d(t,"setDeviceListFilter",(function(){return Ne})),r.d(t,"setDeviceListPage",(function(){return Pe})),r.d(t,"setDeviceListSearch",(function(){return Me})),r.d(t,"setDeviceListSort",(function(){return xe})),r.d(t,"setEasyReplenish",(function(){return Fe})),r.d(t,"setFacetViewVisibility",(function(){return p})),r.d(t,"setForm",(function(){return rt})),r.d(t,"setProtectionPlan",(function(){return ce})),r.d(t,"setSavedItemsSkuState",(function(){return ue})),r.d(t,"setSearchZipCode",(function(){return _})),r.d(t,"setSelectedInstallationSku",(function(){return Ee})),r.d(t,"setSelectedNearbyStoreIdList",(function(){return B})),r.d(t,"setSkuListFacetList",(function(){return u})),r.d(t,"setSkuListPage",(function(){return f})),r.d(t,"setSkuListSort",(function(){return c})),r.d(t,"setStoreId",(function(){return F})),r.d(t,"setTimeBasedSubscription",(function(){return Ve})),r.d(t,"setVehicle",(function(){return fe})),r.d(t,"skuCardEvent",(function(){return Ge})),r.d(t,"userListModified",(function(){return pe}));var i="SET_SKU_LIST_SORT";function c(e){return{type:i,sort:e}}var s="SET_SKU_LIST_FACET_LIST";function u(e){return{type:s,facetList:e}}var l="SET_SKU_LIST_PAGE";function f(e){return{type:l,page:e}}var d="SET_FACET_VIEW_VISIBILITY";function p(e,t){return{type:d,isVisible:e,facetField:t}}var m="CHANGE_SKU";function y(e){return{type:m,skuId:e}}var h="ADD_ADD_ON_ITEM";function v(e){var t=e.skuId;return{type:h,payload:{skuId:t}}}var S="SET_SEARCH_ZIP_CODE";function _(e){var t=e.zipcode;return{type:S,payload:{zipcode:t}}}var b="REMOVE_ADD_ON_ITEM";function E(e){var t=e.skuId;return{type:b,payload:{skuId:t}}}var g="ADD_LINE_ITEM";function I(e){return{type:g,lineItemId:e}}var T="REMOVE_LINE_ITEM";function C(e){return{type:T,lineItemId:e}}var R="LOG",O="INFO",k="WARN",P="ERROR",w="DEBUG";function A(e,t,r,n,o,a,i){return{type:R,level:e,message:t,error:r,componentId:o,creatorNamespace:n,contractVersion:a,instanceId:i}}var L="DISPLAY_ALERT",N="SUCCESS_ALERT",D="INFO_ALERT",M="WARNING_ALERT",j="DANGER_ALERT";function x(e,t){return{id:Math.random().toString(10),type:L,level:e,message:t}}var U="CLEAR_ALERT";function V(e){return{displayAlertId:e.id,type:U}}var H="SET_STORE_ID";function F(e){if(!e)throw new Error("Set store requires the storeId.");return{type:H,storeId:e}}var q="SET_SELECTED_NEARBY_STORE_ID_LIST";function B(e){return{type:q,payload:{storeIdList:e}}}var G="SET_DESTINATION_ZIP_CODE";function K(e){return function(e){if("string"!=typeof e||5!==e.length)throw new Error("Invalid zip code provided to action creator.")}(e),{type:G,destinationZipCode:e}}var W="BUYING_OPTIONS_ANCHOR",z="MANUFACTURE_CONTENT_ANCHOR",Y="QUESTIONS_ANSWERS_ANCHOR",Q="RATINGS_REVIEWS_ANCHOR",Z="SPECIFICATIONS_ANCHOR",X="STEPUP_ANCHOR",$="SET_ANCHOR";function J(e,t){return{type:$,to:e,timeStamp:t}}var ee="REFRESH_DEVICE_CONFIGURATION";function te(e){return{type:ee,deviceId:e}}var re="ADD_SKU_TO_COMPARE";function ne(e){return{type:re,skuId:e}}var oe="REMOVE_SKU_FROM_COMPARE";function ae(e){return{type:oe,skuId:e}}var ie="SET_PROTECTION_PLAN";function ce(e){return{type:ie,skuId:e}}var se="SET_SAVED_ITEMS_SKU_STATE";function ue(e,t){return{type:se,isSaved:t,skuId:e}}var le="SET_VEHICLE";function fe(e,t){var r=!1;if((null===e&&null===t||"number"==typeof e&&"string"==typeof t&&e>=0&&t)&&(r=!0),!r)throw new Error("One or more required parameters is missing or invalid.");return{type:le,vehicleId:e,vehicleYear:t}}var de="USER_LIST_MODIFIED";function pe(e,t){return{type:de,uuid:e,listType:t}}var me="ADD_DEVICE_MODAL",ye="DEVICE_DETAILS_MODAL",he="MODAL_OPENED";function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:he,modalType:e,params:a({},t)}}var Se="MODAL_CLOSED";function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:Se,modalType:e,params:a({},t)}}var be="SET_SELECTED_INSTALLATION_SKU";function Ee(e){return{type:be,payload:{skuId:e}}}var ge="ADD_TO_CART_SUCCESS",Ie=function(e){var t=e.cartCount,r=e.cartSubTotal,n=e.items,o=void 0===n?[]:n,a=e.lineId,i=e.skuId;return{type:ge,payload:{cartCount:t,cartSubTotal:r,skuId:i,lineId:a,items:o}}},Te="ADD_DEVICE";function Ce(e){return{type:Te,deviceUuid:e}}var Re="REMOVE_DEVICE";function Oe(e){return{type:Re,deviceUuid:e}}var ke="SET_DEVICE_LIST_PAGE",Pe=function(){return{type:ke}},we="SET_DEVICE_LIST_COUNT",Ae=function(e){return{type:we,count:e}},Le="SET_DEVICE_LIST_FILTER",Ne=function(e){var t=e.filter,r=e.groupUuid;return{type:Le,filter:t,groupUuid:r}},De="SET_DEVICE_LIST_SEARCH",Me=function(e){return{type:De,search:e}},je="SET_DEVICE_LIST_SORT",xe=function(e){return{type:je,sort:e}},Ue="SET_TIME_BASED_SUBSCRIPTION",Ve=function(e,t){return{type:Ue,frequency:e,units:t}},He="SET_EASY_REPLENISH",Fe=function(e){return{type:He,replenishId:e}},qe="SKU_CARD_PDP_CLICKED",Be="SKU_CARD_ADD_TO_CART_CLICKED",Ge=function(e){return{type:e.skuCardEventType,epValue:e.epValue,skuId:e.skuId,instanceId:e.instanceId}},Ke="SET_ACTIVATED_PRICING_OPTION",We=function(e){var t=e.skuId,r=void 0===t?"":t,n=e.mobileContract,o=e.retailOption;return{type:Ke,skuId:r,mobileContract:n,retailOption:o}},ze="CLEAR_SEARCH",Ye=function(e){var t=e.instanceId;return{type:ze,payload:{instanceId:t}}},Qe="REQUEST_INTERRUPTION_PERMISSION",Ze=function(e){var t=e.deviceClass,r=e.interruptionId,n=e.interruptionType,o=e.placement,a=e.requestedInterruptionDuration,i=e.options;return{type:Qe,payload:{deviceClass:t,interruptionId:r,interruptionType:n,placement:o,requestedInterruptionDuration:a,options:i}}},Xe="INTERRUPTION_PERMISSION_RESPONSE",$e=function(e){var t=e.interruptionDuration,r=e.interruptionId,n=e.interruptionType,o=e.permissionGranted,a=e.reason;return{type:Xe,payload:{interruptionDuration:t,interruptionId:r,interruptionType:n,permissionGranted:o,reason:a}}},Je="INTERRUPTION_STATUS_UPDATE",et=function(e){var t=e.interruptionId,r=e.status,n=e.interruptionType,o=e.placement;return{type:Je,payload:{interruptionId:t,interruptionType:n,placement:o,status:r}}},tt="SET_FORM",rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defaultId";return{type:tt,payload:{formData:e,formId:t}}},nt="RETURN_FORM",ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defaultId",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:nt,payload:{formData:e,formId:t,isFormValid:r}}},at="REGISTER_CART_ITEMS",it=function(e){var t=e.cartItems;if(!t||!t.every((function(e){return e&&e.itemKey&&e.skuId})))throw new Error("Invalid cartItems: ".concat(JSON.stringify(t),". Each cartItem must have an itemKey and a skuId"));return{type:at,payload:t}},ct="DEREGISTER_CART_ITEMS",st=function(e){var t=e.itemKeys;return{type:ct,payload:t}},ut="SET_OPENBOX_STORE_DEPRECATED";function lt(e){return{type:ut,payload:e}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(9),l=s(r(0)),f=c(r(1)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.componentId,r=e.creatorNamespace,n=e.contractVersion,o=e.instanceId,a=e.store;return u.setStore(a),u.setInstanceId(o),u.setComponentDescriptor({componentId:t,creatorNamespace:r,contractVersion:n}),{log:{debug:u.debug,error:u.error,info:u.info,warn:u.warn}}},t.prototype.render=function(){return f.Children.only(this.props.children)},t.childContextTypes={log:l.default.shape({debug:l.default.func.isRequired,error:l.default.func.isRequired,info:l.default.func.isRequired,warn:l.default.func.isRequired})},t.propTypes={children:l.default.object.isRequired,componentId:l.default.string.isRequired,creatorNamespace:l.default.string.isRequired,contractVersion:l.default.string.isRequired,instanceId:l.default.string.isRequired,store:l.default.object.isRequired},t}(f.default.Component);t.default=d},function(e,t,r){"use strict";r.r(t),r.d(t,"init",(function(){return at}));r(21);var n=r(1),o=r.n(n),a=r(11),i=r(0),c=r.n(i),s=(r(22),r(3)),u=r(5),l=r.n(u),f=r(2),d=8,p=55,m=50,y="Previous Product",h="Next Product",v="left",S="right",_={x:50,y:25,width:20,height:20,stroke:f.pureWhite,fill:f.pureWhite,icon:"Close_Cancel_Line"},b="EXPANDED_VIEW",E="COLLAPSED_VIEW",g=["LEGACY_VIEW",b,E],I=r(12);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e){var t,r=e.context,n=e.sku,o=e.value;if(!o)throw new Error("please provide a value for buttonClick action");if(!((t=o)&&"object"===T(t)&&t.constructor===Object||function(e){return"string"==typeof e||e instanceof String}(o)))throw new Error("value should be a string or object");return{type:"BUTTON_CLICK",context:r,value:o,sku:n}}var R=function(e){I.dispatch(C(e))},O=function(e){var t=e.compareTrayMode,r=e.toggle_tray_view,n=e.skus,a=e.deviceClass;if(0===n.length||![b,E].includes(t)||"s"===a)return null;var i=t===b?"Caret_Down_Line_Sm":"Caret_Up_Line_Sm",c=t===E,s={width:15,height:15,stroke:f.pureWhite,fill:f.pureWhite,icon:i,className:i};return o.a.createElement("div",{className:"toggle-container"},o.a.createElement("div",{className:"toggle-view"},o.a.createElement(f.PLButton,{buttonStyle:"unstyled",className:"toggle-button",size:"small","data-cy":"toggle-button","aria-label":"Show less compare details","aria-pressed":c,onClick:function(){r(),R({value:{linkName:t===b?"Compare Tray: Collapse":"Compare Tray: Expand"}})}},o.a.createElement(f.PLSVG,s))))};O.propTypes={compareTrayMode:c.a.string,deviceClass:c.a.string,toggle_tray_view:c.a.func,skus:c.a.array};function k(e){return{type:"REMOVE_SKU_FROM_COMPARE",skuId:e}}var P=r(13),w=r.n(P),A=r(14),L=r.n(A),N=r(7),D=r.n(N),M=r(15),j=r.n(M),x=r(16),U=r.n(x),V=r(17),H=r.n(V),F=r(18),q=r.n(F),B=r(10),G=r.n(B),K=r(4);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){L()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G()(e);if(t){var o=G()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return q()(this,r)}}var Q=function(e){H()(r,e);var t=Y(r);function r(e,n){var o;return j()(this,r),(o=t.call(this,e,n)).state={isClient:e.renderClientOnly||"object"===("undefined"==typeof window?"undefined":D()(window)),html:"",fetchedComponentHtml:!1},o}return U()(r,[{key:"filterIllegalQueryParams",value:function(e){var t=e.query;t&&Object.keys(t).forEach((function(e){e.startsWith("_")&&(console.error("LibEmbeddedComponent: Illegal query param ".concat(e,". Query params cannot be prefixed with '_'")),delete t[e])}))}},{key:"fetchHtml",value:function(e){var t=this,r=this.context.log,n=this.props,o=n.onInitError,a=n.onInitSuccess;return this.filterIllegalQueryParams(e),Object(K.fetchComponent)(e).then((function(e){t.setState(z(z({},e),{},{fetchedComponentHtml:!0})),e.renderCallback||a(Z(e))})).catch((function(t){r&&r.error("LibEmbeddedComponent: Failed to fetch embedded component ".concat(Object(K.buildComponentPath)(e)),t),o(t)}))}},{key:"executeRenderCallback",value:function(){var e=this.props,t=e.onInitError,r=e.onInitSuccess;if(this.state.renderCallback){try{this.state.renderCallback(this.ref)}catch(e){return void t(e)}finally{this.setState({renderCallback:null})}r(Z(this.state))}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.creatorNamespace,r=e.componentId,n=e.contractVersion,o=e.onInitSuccess,a=e.parentInstanceId,i="div[id^=".concat(t,"-").concat(r,"]"),c="csi\\:component[cn^=".concat(t,"]");if(this.ref.querySelector(i)||this.ref.querySelector(c)){var s={creatorNamespace:t,componentId:r,contractVersion:n};K.afterServerRender?Object(K.afterServerRender)(s,a,this.ref):console.warn("This page is using an outdated version of @gvp/lib-embedded-component-renderer that doesn't support afterServerRender"),o(Z(this.state))}else this.fetchHtml(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(K.buildComponentPath)(e),r=Object(K.buildComponentPath)(this.props);"undefined"!=typeof window&&t!==r&&(this.state.renderCallback&&this.setState({renderCallback:null}),this.fetchHtml(e))}},{key:"componentDidUpdate",value:function(){this.executeRenderCallback()}},{key:"shouldComponentUpdate",value:function(e,t){var r=t.html!==this.state.html,n=t.fetchedComponentHtml&&!this.state.fetchedComponentHtml;return t.isHydrated&&r||n}},{key:"render",value:function(){var e=this,t=this.state.html;this.state.isClient||(t=Object(K.getComponentIncludeString)(this.props));var r={__html:t};return o.a.createElement("div",{ref:function(t){return e.ref=t},suppressHydrationWarning:!0,dangerouslySetInnerHTML:r})}}]),r}(o.a.Component);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{didServerRender:""!==e.html.trim()}}Q.defaultProps={layoutClassList:"",onError:"continue",onInitError:function(){},onInitSuccess:function(){},query:{}},Q.propTypes={creatorNamespace:c.a.string.isRequired,componentId:c.a.string.isRequired,contractVersion:c.a.string.isRequired,renderClientOnly:c.a.bool,layoutClassList:c.a.string,parentInstanceId:c.a.string.isRequired,query:c.a.object,onInitError:c.a.func,onInitSuccess:c.a.func,onError:c.a.oneOf(["failParent","continue"])},Q.contextTypes={log:c.a.object};var X=Q,$=function(e){var t=e.skuId;return o.a.createElement("div",{className:"compare-tray-price"},o.a.createElement(X,{creatorNamespace:"pricing",componentId:"price",contractVersion:"v1",query:{skuId:t,context:"price-block",layout:"single",bold:"true"},onError:"failParent",isClient:!0}))};function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t,r){return t&&te(e.prototype,t),r&&te(e,r),e}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var o=ce(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}$.propTypes={skuId:c.a.string.isRequired};var se={piscesServer:c.a.string,onRemove:c.a.func,sku:c.a.shape({skuId:c.a.string,imagePath:c.a.string,title:c.a.string,url:c.a.string,imgPath:c.a.string}),leftPos:c.a.number,skuIndex:c.a.number,focusIndex:c.a.number,visibility:c.a.StyleProperties,compareTrayMode:c.a.string,childRefsList:c.a.func},ue=function(e){ne(r,e);var t=ae(r);function r(e){var n;return ee(this,r),(n=t.call(this,e)).anchorRef=o.a.createRef(),n}return re(r,[{key:"componentDidMount",value:function(){this.props.childRefsList&&this.props.childRefsList(this.anchorRef)}},{key:"render",value:function(){var e=this.props,t=e.sku,r=e.piscesServer,n=e.onRemove,a=e.leftPos,i=e.skuIndex;if(!t)return o.a.createElement("li",{className:"empty"});var c,s=t.title,u=t.imagePath?t.imagePath:t.imgPath,l=p;return c=u?"".concat(r,"/image2/").concat(u,";canvasHeight=").concat(l,";canvasWidth=").concat(l):"http://img.bbystatic.com/BestBuy_US/store/ee/2017/global/general/compare_blank_image.png",o.a.createElement("li",{"data-cy":"compare-item-".concat(i+1),style:{transform:"translateX(".concat(a,"px)")}},o.a.createElement("div",{className:"compare-image-container"},o.a.createElement("img",{className:"compare-image-container-img",src:c,alt:s,ref:this.anchorRef,id:i,tabIndex:"-1"})),o.a.createElement("button",{"data-cy":"compare-close",className:"compare-remove-button","aria-label":"Remove from Compare tray",onClick:n.bind(this,t.skuId,i)},o.a.createElement(f.PLSVG,_)))}}]),r}(o.a.Component);ue.propTypes=se;var le=function(e){ne(r,e);var t=ae(r);function r(e){var n;return ee(this,r),(n=t.call(this,e)).anchorRef=o.a.createRef(),n}return re(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.sku,n=t.skuIndex,a=t.piscesServer,i=t.onRemove,c=t.leftPos,s=t.visibility,u=t.compareTrayMode;if(!r)return o.a.createElement("li",{className:"empty"});var l=r.title,d=r.url,p=r.skuId,y=r.imagePath?r.imagePath:r.imgPath,h=m,v="http://images.bbystatic.com/pdp/images/missing-image-large.png";y&&(v="".concat(a,"/image2/").concat(y,";canvasHeight=").concat(h,";canvasWidth=").concat(h));var S=u===b;return o.a.createElement("li",{"data-cy":"compare-item-".concat(n+1),className:"compare-tray-item",style:{transform:"translateX(".concat(c,"px)"),visibility:s},ref:function(t){return e.carouselItemRef=t},tabIndex:"-1"},o.a.createElement("div",{id:"compare-item-".concat(n+1),className:"product-container"},o.a.createElement("div",{className:"compare-link-content"},o.a.createElement("a",{href:d,ref:this.anchorRef,id:n},o.a.createElement("div",{className:"compare-image-container"},o.a.createElement("img",{className:"compare-image-container-img",src:v,alt:""})),o.a.createElement("div",{className:"compare-text-container"},o.a.createElement("span",{className:"compare-title",ref:function(t){e.title=t}},l||""))),S?o.a.createElement($,{skuId:p}):null),S?o.a.createElement("button",{"data-cy":"compare-close",className:"compare-remove-button","aria-label":"Remove from Compare tray",onClick:i.bind(this,r.skuId,n)},o.a.createElement(f.PLSVG,_)):null))}},{key:"shaveTitle",value:function(){this.title&&w()(this.title,49,{spaces:!1})}},{key:"componentDidMount",value:function(){this.shaveTitle(),this.props.childRefsList&&this.props.childRefsList(this.anchorRef)}},{key:"componentDidUpdate",value:function(e,t){var r=this;this.shaveTitle(),this.props.focusIndex+1===this.props.skuIndex&&setTimeout((function(){r.carouselItemRef.focus()}),340)}}]),r}(o.a.Component);le.propTypes=se;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var de=function(e){if("s"===e.deviceClass)return null;var t={className:e.compareTrayMode===b?"tray-clear-all-btn body-copy-lg":"tray-clear-all-btn","aria-label":"Clear all compared items","data-track":"FixedElement:Clear All",onClick:function(){return e.skus.map((function(t){Object(s.dispatch)(k(t.skuId),e.instanceId)})),e.removeAllSkus(),void R({value:{linkName:"Compare Tray: Clear all"}})},"data-cy":"clear-all-btn"};return o.a.createElement("button",fe({},t,{ref:e.clearAllRef}),"Clear all")};de.propTypes={removeAllSkus:c.a.func,instanceId:c.a.string,skus:c.a.array,deviceClass:c.a.string.isRequired,clearAllCompareDataTrack:c.a.func,compareTrayMode:c.a.string,clearAllRef:c.a.func};var pe=function(e){var t=["compare-button","btn","btn-secondary"];"s"===e.deviceClass&&t.push("btn-block");var r,n,a={className:t.join(" "),href:(r=e.skus,n=[],Array.isArray(r)&&r.forEach((function(e){e.skuId&&n.push(e.skuId)})),"/site/compare?skus=".concat(n.join(","))),"aria-label":"Compare selected items","data-track":"FixedElement:Compare","data-cy":"compare-btn",onClick:function(){return R({value:{linkName:"Compare Tray: Compare"}})}},i=o.a.createElement(f.PLModal,{size:"s"===e.deviceClass?"small-view":"medium",onClose:e.hideLimitModal,className:"shop-compare-tray-limit-modal"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("p",{tabIndex:-1,ref:e.modalRef,className:"modal-title"},"You can compare up to 8 items at a time.")),o.a.createElement("div",{className:"modal-body"},o.a.createElement("button",{className:"btn btn-primary btn-block",onClick:e.hideLimitModal},"Okay, Got It.")));return o.a.createElement(o.a.Fragment,null,e.showLimitModal&&i,o.a.createElement("div",{className:"comparison-actions"},e.showClearButton?o.a.createElement(de,e):null,o.a.createElement("a",a,"Compare ","s"===e.deviceClass?"(".concat(e.skus.length,")"):"")))};pe.defaultProps={showLimitModal:!1},pe.propTypes={deviceClass:c.a.string.isRequired,skus:c.a.array.isRequired,hideLimitModal:c.a.func,showLimitModal:c.a.bool,showClearButton:c.a.bool,modalRef:c.a.func};var me=pe,ye=function(e){var t=e.arrowType===S?"Caret_Right_Line_Sm":"Caret_Left_Line_Sm",r=e.arrowState?"disabled":"enabled",n=e.arrowType===S?h:y;return o.a.createElement("button",{disabled:e.arrowState,"aria-label":e.ariaLabel,"aria-disabled":e.ariaDisabled,className:e.dataAttribute,onClick:e.onClick,"data-cy":e.dataAttribute,"data-track":e.dataTrack},e.compareTrayMode===b?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"sr-only"},n),o.a.createElement(f.PLSVG,{icon:t,className:r})):null)};ye.propTypes={onClick:c.a.func,arrowState:c.a.string,ariaLabel:c.a.string,ariaDisabled:c.a.bool,dataAttribute:c.a.string,compareTrayMode:c.a.string,arrowType:c.a.string,dataTrack:c.a.string};var he=ye;function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ie(e);if(t){var o=Ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ge(this,r)}}function ge(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,r,n,a=Ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).anchorRef=o.a.createRef(),t}return t=i,(r=[{key:"componentDidMount",value:function(){this.props.childRefsList&&this.props.childRefsList(this.anchorRef)}},{key:"render",value:function(){var e=this.props,t=e.sku,r=e.piscesServer,n=e.onRemove,a=e.skuIndex;if(!t)return o.a.createElement("li",{className:"empty"});var i=t.url,c=t.imagePath?t.imagePath:t.imgPath,s=m,u="http://images.bbystatic.com/pdp/images/missing-image-large.png";c&&(u="".concat(r,"/image2/").concat(c,";canvasHeight=").concat(s,";canvasWidth=").concat(s));var l={x:50,y:25,width:20,height:20,stroke:f.pureWhite};return o.a.createElement("li",{"data-cy":"compare-item-".concat(a+1)},o.a.createElement("div",{id:"compare-item-".concat(a+1),className:"product-container"},o.a.createElement("a",{href:i,ref:this.anchorRef,id:a},o.a.createElement("div",{className:"compare-image-container"},o.a.createElement("img",{className:"compare-image-container-img img-responsive",src:u,alt:""}))),o.a.createElement(f.PLButton,{"data-cy":"compare-close",className:"compare-remove-button","aria-label":"Remove from compare tray",onClick:n.bind(this,t.skuId,a)},o.a.createElement(f.PLSVG,Se({icon:"Close_Cancel_Line",fill:f.pureWhite},l)))))}}])&&_e(t.prototype,r),n&&_e(t,n),i}(o.a.Component);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Te.propTypes={piscesServer:c.a.string,onRemove:c.a.func,sku:c.a.shape({skuId:c.a.string,imagePath:c.a.string,url:c.a.string,showRecommendations:c.a.bool,imgPath:c.a.string}),skuIndex:c.a.number,childRefsList:c.a.func};var Oe=function(e){var t=e.skus,r=e.deviceClass,n=e.piscesServer,a=e.showLimitModal,i=e.comparisonItems,c=e.onSkuRemoved,s=e.modalRef,u=a?"comparison-limit-modal-open":"";return o.a.createElement("div",{className:"comparison-container comparison-container-".concat(r," ").concat(u," collapsed-variant"),"aria-labelledby":"compare-items-heading"},o.a.createElement("div",{className:"comparison"},o.a.createElement("div",{className:"container-tray body-copy-lg"},o.a.createElement("h2",{className:"compare-heading",id:"compare-items-heading"},"Compare ",o.a.createElement("span",null,"(","".concat(t.length),")")),o.a.createElement("ul",{className:"compare-ul-tray","aria-label":"Compared Items"},i.map((function(t,r){var a="object"===Re(t)&&t.skuId?"comparison-item-".concat(t.skuId):"comparison-index-".concat(r);return o.a.createElement(Te,Ce({sku:t,skuIndex:r,key:a,onRemove:c,piscesServer:n},e))}))),o.a.createElement(de,e),o.a.createElement(me,Ce({modalRef:s},e,{showLimitModal:a,showClearButton:!1})))))};function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Me(e);if(t){var o=Me(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ne(this,r)}}function Ne(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Oe.propTypes={piscesServer:c.a.string,skus:c.a.arrayOf(c.a.shape({skuId:c.a.string,imagePath:c.a.string,title:c.a.string,url:c.a.string})),deviceClass:c.a.string,showLimitModal:c.a.bool,comparisonItems:c.a.array,onSkuRemoved:c.a.func,modalRef:c.a.object};var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(i,e);var t,r,n,a=Le(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={showLimitModal:t.props.showLimitModal,closeCurrentProductCard:void 0,arrowPositionStyle:{position:"relative",left:void 0,display:"none"}},t.limitModalRef=null,t.clearAllRef=null,t.compareTitleRefs=[],t.setNextTitleFocus=t.setNextTitleFocus.bind(De(t)),t}return t=i,(r=[{key:"componentDidUpdate",value:function(e,t){this.state.showLimitModal&&t.showLimitModal!==this.state.showLimitModal&&this.limitModalRef&&this.limitModalRef.focus()}},{key:"componentWillUpdate",value:function(e,t){e.compareTrayMode!==this.props.compareTrayMode&&(this.compareTitleRefs=[])}},{key:"onSkuRemoved",value:function(e,t){var r=this.props,n=r.instanceId,o=r.removeSku;Object(s.dispatch)(k(e),n),o(e),this.sendAnalytics(e),this.setNextTitleFocus(t)}},{key:"setNextTitleFocus",value:function(e){var t=this;this.compareTitleRefs.splice(e,1),this.props.skus.length>1&&setTimeout((function(){t.compareTitleRefs[e]&&t.compareTitleRefs[e].current?t.compareTitleRefs[e].current.focus():t.clearAllRef.focus()}),10)}},{key:"childRefsList",value:function(e){e.current&&this.compareTitleRefs.push(e)}},{key:"sendAnalytics",value:function(e){try{R({sku:e,value:{"bb.compareRemove":1,linkName:"Compare Tray: Remove Product"},context:{}})}catch(e){console.log("Unable to send Compare Tray: Remove Product analytics because ".concat(e))}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.skus,r=e.skus,n=e.showLimitModal;[t,r].every(Array.isArray)&&this.setState({showLimitModal:n})}},{key:"render",value:function(){var e=this,t=this.props,r=t.skus,n=t.leftProducts,a=t.leftPos,i=t.deviceClass,c=t.moveTrayLeft,s=t.moveTrayRight,u=t.piscesServer,l=t.showNavButtons,f=t.arrowClickState,p=t.compareTrayMode;if(!Array.isArray(r)||r.length<1)return null;for(var m=[],_=0;_<d;_++)m[_]=r[_];if(this.props.compareTrayMode===E&&"l"===i)return o.a.createElement(Oe,Pe({showLimitModal:this.state.showLimitModal,onSkuRemoved:this.onSkuRemoved.bind(this),comparisonItems:m,modalRef:function(t){return e.limitModalRef=t},childRefsList:this.childRefsList.bind(this),clearAllRef:function(t){return e.clearAllRef=t}},this.props));var g="s"===i?ue:le,I=!(r.length>this.props.defaultProducts&&r.length>n)&&"disabled",T=!(n>this.props.defaultProducts)&&"disabled",C=this.state.showLimitModal?"comparison-limit-modal-open":"",R="l"===i&&p===b?"expanded-variant":"legacy-variant";return o.a.createElement("div",{className:"comparison-container comparison-container-".concat(i," ").concat(C," ").concat(R),"aria-labelledby":"compare-items-heading"},o.a.createElement("div",{className:"comparison"},o.a.createElement("h2",{className:"compare-heading",id:"compare-items-heading"},"Compare ",o.a.createElement("span",null,"(","".concat(r.length),")")),o.a.createElement("div",{className:"container-tray"},"l"===i&&l?o.a.createElement(he,{dataAttribute:"arrow-left",arrowType:v,arrowState:T,ariaLabel:y,ariaDisabled:!!T,onClick:function(e){return c(!0)},compareTrayMode:p,dataTrack:"Compare Tray: Left Arrow"}):null,o.a.createElement("ul",{className:"compare-ul-tray","aria-label":"Compared Items"},m.map((function(t,r){var i="object"===ke(t)&&t.skuId?"comparison-item-".concat(t.skuId):"comparison-index-".concat(r);return o.a.createElement(g,{sku:t,skuIndex:r,key:i,onRemove:e.onSkuRemoved.bind(e),piscesServer:u,leftPos:a,focusIndex:f?f===v?n-5:n-2:-2,visibility:r<=n-5||r>n-1?"hidden":"visible",compareTrayMode:p,childRefsList:e.childRefsList.bind(e)})}))),"l"===i&&l?o.a.createElement(he,{dataAttribute:"arrow-right",arrowType:S,arrowState:I,ariaLabel:h,ariaDisabled:!!I,onClick:function(e){return s(!0)},compareTrayMode:p,dataTrack:"Compare Tray: Right Arrow"}):null),o.a.createElement(me,Pe({modalRef:function(t){return e.limitModalRef=t},clearAllRef:function(t){return e.clearAllRef=t}},this.props,{showLimitModal:this.state.showLimitModal,showClearButton:this.props.showClearButton}))))}}])&&we(t.prototype,r),n&&we(t,n),i}(o.a.Component);je.defaultProps={deviceClass:"l"},je.propTypes={removeAllSkus:c.a.func,removeSku:c.a.func,comparePageServer:c.a.string,piscesServer:c.a.string,skus:c.a.arrayOf(c.a.shape({skuId:c.a.string,imagePath:c.a.string,title:c.a.string,url:c.a.string})),deviceClass:c.a.string,clearAllCompareDataTrack:c.a.string,instanceId:c.a.string,showLimitModal:c.a.bool,hideLimitModal:c.a.func,moveTrayLeft:c.a.func,moveTrayRight:c.a.func,leftProducts:c.a.number,leftPos:c.a.number,defaultProducts:c.a.number,toggleRecomendations:c.a.func,showNavButtons:c.a.bool,showClearButton:c.a.bool,arrowClickState:c.a.string,compareTrayMode:c.a.string};var xe=je,Ue=r(8),Ve=r(19);function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fe=new(r.n(Ve).a)(Ue.LocalStorageHandler),qe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"_getSkus",value:function(){var e=Fe.get("listPageCompare");return null!==e?e:{skus:[]}}},{key:"itemIsInCompareTray",value:function(e){return this._getSkus().skus.some((function(t){return t.skuId===e}))}},{key:"getCompareItems",value:function(){return this._getSkus().skus}},{key:"removeAllCompareItems",value:function(){Fe.set("listPageCompare",{skus:[]})}},{key:"addItemToCompareTray",value:function(e){if(e.skuId&&e.altText&&e.title&&e.url){var t=this._getSkus(),r=t.skus.filter((function(t){return t.skuId!==e.skuId}));r.push(e),t.skus=r,Fe.set("listPageCompare",t)}}},{key:"removeCompareItem",value:function(e){var t=this._getSkus().skus;t=t.filter((function(t){return t.skuId!==e})),Fe.set("listPageCompare",{skus:t})}},{key:"getTrayView",value:function(){var e=Fe.get("CURRENT_TRAY_VIEW");return e&&g.includes(e)?e:null}},{key:"updateTrayView",value:function(e){Fe.set("CURRENT_TRAY_VIEW",e)}}])&&He(t.prototype,r),n&&He(t,n),e}());function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e){var t=function(e){if("object"!==Be(e)||0===Object.values(e).length)return;var t=Object.values(e).filter((function(e){return e.primary}));if(t&&t.length)return t[0].piscesHref;var r=Object.values(e);if(r&&r.length)return r[0].piscesHref}(e);if(!(t&&t.length>=25&&"data:image/svg+xml;base64"===t.substr(0,25))&&t)return t.split("/image2/")[1].split(";")[0]}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xe(e);if(t){var o=Xe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Qe(this,r)}}function Qe(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?Ze(e):t}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(i,e);var t,r,n,a=Ye(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).defaultProducts=4,t.defaultPos=0,t.tileSize=230,t.state={deviceClass:"l",skus:[],leftProducts:t.defaultProducts,leftPos:t.defaultPos,tileSize:t.tileSize,showNavButtons:!0,showClearButton:!0,ariaAlertMsg:null,arrowClickState:null,compareTrayMode:t.props.compareTrayMode},t._setupListener=t._setupListener.bind(Ze(t)),t._getListenAction=t._getListenAction.bind(Ze(t)),t._isSkuIdInCurrentList=t._isSkuIdInCurrentList.bind(Ze(t)),t._compareListLimitReached=t._compareListLimitReached.bind(Ze(t)),t._removeSku=t._removeSku.bind(Ze(t)),t._removeAllSkus=t._removeAllSkus.bind(Ze(t)),t._updateScreenReaderMsg=t._updateScreenReaderMsg.bind(Ze(t)),t.moveTrayLeft=t.moveTrayLeft.bind(Ze(t)),t.moveTrayRight=t.moveTrayRight.bind(Ze(t)),t.hideLimitModal=t.hideLimitModal.bind(Ze(t)),t.moveToLastAddedProductLarge=t.moveToLastAddedProductLarge.bind(Ze(t)),t.moveProductSmall=t.moveProductSmall.bind(Ze(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){var e="s"===document.cookie.replace(/(?:(?:^|.*;\s*)bby_rdp\s*=\s*([^;]*).*$)|^.*$/,"$1")?"s":"l";this.setState({deviceClass:e}),this._setupListener(),this._fetchTrayViewFromStorage(),this._loadSkusFromStorage()}},{key:"_setupListener",value:function(){var e=this,t=this.props.instanceId;Object(s.listen)((function(t){e._getListenAction(t)}),t)}},{key:"_loadSkusFromStorage",value:function(){var e=this,t=qe.getCompareItems();Array.isArray(t)&&(t.forEach((function(t){Object(s.dispatch)({type:"ADD_SKU_TO_COMPARE",skuId:t.skuId},e.props.instanceId)})),this.setState({skus:t}))}},{key:"moveTrayLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state.skus.length>=this.defaultProducts){var t=this.state.leftPos===this.defaultPos?this.state.leftPos:this.state.leftPos+this.state.tileSize,r=this.state.leftProducts===this.defaultProducts?this.state.leftProducts:this.state.leftProducts-1;l()(".comparison-container ul.compare-ul-tray li.compare-tray-item").css("transform","translateX(".concat(t,"px)")),this.showHideInvisibleEl("#compare-item-",this.state.leftProducts-this.defaultProducts,"flex"),this.showHideInvisibleEl("#see-more-like-button-",this.state.leftProducts-this.defaultProducts-1,"block"),this.setState({leftPos:t,leftProducts:r,arrowClickState:e?"left":null})}}},{key:"moveTrayRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state.skus.length>this.defaultProducts){var t=this.state.leftPos-this.state.tileSize,r=this.state.leftProducts+1;l()(".comparison-container ul.compare-ul-tray li.compare-tray-item").css("transform","translateX(".concat(t,"px)")),this.showHideInvisibleEl("#compare-item-",r-this.defaultProducts,"none"),this.showHideInvisibleEl("#see-more-like-button-",r-this.defaultProducts-1,"none"),this.setState({leftPos:t,leftProducts:r,arrowClickState:e?"right":null})}}},{key:"showHideInvisibleEl",value:function(e,t,r){this.state.compareTrayMode!==E&&l()("".concat(e).concat(t)).css("display",r)}},{key:"moveToLastAddedProductLarge",value:function(){if(this.state.compareTrayMode===E)return!1;if(this.state.skus.length>this.defaultProducts){for(var e=this.state.skus.length-this.defaultProducts,t=1;t<=e;t++)this.showHideInvisibleEl("#compare-item-",t,"none"),this.showHideInvisibleEl("#see-more-like-button-",t-1,"none");var r=this.state.tileSize,n=e*-r,o=this.state.skus.length;l()(".comparison-container ul.compare-ul-tray li.compare-tray-item").css("transform","translateX(".concat(n,"px)")),this.setState({leftPos:n,leftProducts:o,tileSize:r})}}},{key:"moveProductSmall",value:function(e){if(this.state.skus.length>this.defaultProducts){var t=this.state.skus.length-this.defaultProducts,r=l()(".comparison-container ul.compare-ul-tray li").outerWidth()+17,n=t*r-("remove"===e?r:0);l()(".comparison-container ul").scrollLeft(n)}}},{key:"_getListenAction",value:function(e){switch(e.type){case"ADD_SKU_TO_COMPARE":this._addSku(e.skuId);break;case"REMOVE_SKU_FROM_COMPARE":this._removeSku(e.skuId)}}},{key:"_addSku",value:function(e){var t=this,r=this.props.instanceId,n=Object.assign({},this.state);this._compareListLimitReached()?(n.showLimitModal=!0,this.setState(n),Object(s.dispatch)(k(e),r)):this._isSkuIdInCurrentList(e)||this._hydrateSku(e).then((function(r){var o,a={skuId:(o=r.json.shop.magellan.v2.product.skus[e]).skuId,altText:o.names.short,imgPath:Ge(o.images.all),title:o.names.short,url:o.links.seoPdpUrl.href};n.skus.push(a),qe.addItemToCompareTray(a),t.setState(n),t._updateScreenReaderMsg("Product added to compare tray."),"s"===t.state.deviceClass?t.moveProductSmall("add"):t.moveToLastAddedProductLarge()})).catch((function(t){throw Object(s.dispatch)(k(e),r),new Error("Failed to fetch summaries from Falcor. Error message from Falcor: ".concat(t.message))}))}},{key:"_removeSku",value:function(e){var t=Object.assign([],this.state.skus);t=t.filter((function(t){return t.skuId!==e})),this.setState({skus:t,showLimitModal:!1}),qe.removeCompareItem(e),"s"===this.state.deviceClass?this.moveProductSmall("remove"):this.moveTrayLeft(),this._updateScreenReaderMsg("Product removed from compare tray.")}},{key:"_removeAllSkus",value:function(){this.setState({skus:[],showLimitModal:!1,leftProducts:this.defaultProducts,leftPos:this.defaultPos}),qe.removeAllCompareItems(),this._updateScreenReaderMsg("All products removed from compare tray.")}},{key:"_updateScreenReaderMsg",value:function(e){var t=this;this.setState({ariaAlertMsg:null},(function(){t.setState({ariaAlertMsg:e})}))}},{key:"_hydrateSku",value:function(e){return window.falcorModel.get(["shop","magellan","v2","product","skus",e,"skuId"],["shop","magellan","v2","product","skus",e,"names","short"],["shop","magellan","v2","product","skus",e,"images","all"],["shop","magellan","v2","product","skus",e,"links","seoPdpUrl","href"])}},{key:"_isSkuIdInCurrentList",value:function(e){return this.state.skus.filter((function(t){return t.skuId===e})).length>0}},{key:"_compareListLimitReached",value:function(){return this.state.skus.length>=8}},{key:"hideLimitModal",value:function(){this.setState({showLimitModal:!1})}},{key:"toggle_tray_view",value:function(){var e=this.state.compareTrayMode===b?E:b;this.setState({compareTrayMode:e}),qe.updateTrayView(e)}},{key:"_fetchTrayViewFromStorage",value:function(){var e=qe.getTrayView();e&&this.setState({compareTrayMode:e})}},{key:"render",value:function(){var e=this.state,t=e.skus,r=e.compareTrayMode,n=this.props,a=n.instanceId,i=n.env_pisces,c=n.env_appServer,s=this.props.compareTrayMode===b?o.a.createElement(O,{deviceClass:this.state.deviceClass,skus:t,compareTrayMode:r,toggle_tray_view:this.toggle_tray_view.bind(this)}):null;return o.a.createElement("section",{"aria-label":"Compare Tray",className:"compare-tray"},s,o.a.createElement(xe,{skus:t,showLimitModal:this.state.showLimitModal,removeSku:this._removeSku,removeAllSkus:this._removeAllSkus,instanceId:a,deviceClass:this.state.deviceClass,comparePageServer:c,piscesServer:i,leftPos:this.state.leftPos,leftProducts:this.state.leftProducts,moveTrayLeft:this.moveTrayLeft,moveTrayRight:this.moveTrayRight,hideLimitModal:this.hideLimitModal,defaultProducts:this.defaultProducts,defaultPos:this.defaultPos,showNavButtons:this.state.showNavButtons,showClearButton:this.state.showClearButton,arrowClickState:this.state.arrowClickState,compareTrayMode:this.state.compareTrayMode}),o.a.createElement("div",{className:"aria-alert sr-only","aria-live":"polite"},this.state.ariaAlertMsg))}}])&&We(t.prototype,r),n&&We(t,n),i}(o.a.Component);$e.propTypes={env_pisces:c.a.string,env_appServer:c.a.string,instanceId:c.a.string,compareTrayMode:c.a.string};var Je=function(e){var t=e.instanceId,r=e.env_appServer,n=e.env_pisces,a=e.compareTrayMode;return o.a.createElement($e,{env_pisces:n,env_appServer:r,listen:s.listen,dispatch:s.dispatch,instanceId:t,compareTrayMode:a})};Je.propTypes={env_appServer:c.a.string,env_pisces:c.a.string,instanceId:c.a.string.isRequired,compareTrayMode:c.a.string};var et=Je,tt=r(20),rt=r(9),nt=r(6),ot={componentId:nt.componentId,contractVersion:nt.contractVersion,creatorNamespace:nt.creatorNamespace},at=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{metaLayer:{},app:{}},n=document.querySelector(t);Object(a.hydrate)(o.a.createElement(rt.LogProvider,{instanceId:e,componentId:nt.componentId,creatorNamespace:nt.creatorNamespace,contractVersion:nt.contractVersion},o.a.createElement(et,{instanceId:e,env_appServer:r.metaLayer.env_appServer,env_pisces:r.metaLayer.env_piscesUrl,compareTrayMode:r.app.compareTrayMode})),n)};tt.registerComponent(ot,at)}]);
//# sourceMappingURL=client-bf4daf72d18439d6414abf14d0dce238.js.map