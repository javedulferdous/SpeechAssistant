!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ADD_ADD_ON_ITEM",(function(){return l})),n.d(e,"ADD_DEVICE",(function(){return Ct})),n.d(e,"ADD_DEVICE_MODAL",(function(){return pt})),n.d(e,"ADD_LINE_ITEM",(function(){return y})),n.d(e,"ADD_SKU_TO_COMPARE",(function(){return X})),n.d(e,"ADD_TO_CART_SUCCESS",(function(){return yt})),n.d(e,"BUYING_OPTIONS_ANCHOR",(function(){return G})),n.d(e,"CHANGE_SKU",(function(){return p})),n.d(e,"CLEAR_ALERT",(function(){return M})),n.d(e,"CLEAR_SEARCH",(function(){return Kt})),n.d(e,"DANGER_ALERT",(function(){return P})),n.d(e,"DEBUG",(function(){return D})),n.d(e,"DEREGISTER_CART_ITEMS",(function(){return oe})),n.d(e,"DEVICE_DETAILS_MODAL",(function(){return ft})),n.d(e,"DISPLAY_ALERT",(function(){return v})),n.d(e,"ERROR",(function(){return b})),n.d(e,"INFO",(function(){return g})),n.d(e,"INFO_ALERT",(function(){return w})),n.d(e,"INTERRUPTION_PERMISSION_RESPONSE",(function(){return zt})),n.d(e,"INTERRUPTION_STATUS_UPDATE",(function(){return Wt})),n.d(e,"LOG",(function(){return O})),n.d(e,"MANUFACTURE_CONTENT_ANCHOR",(function(){return K})),n.d(e,"MODAL_CLOSED",(function(){return It})),n.d(e,"MODAL_OPENED",(function(){return lt})),n.d(e,"QUESTIONS_ANSWERS_ANCHOR",(function(){return $})),n.d(e,"RATINGS_REVIEWS_ANCHOR",(function(){return q})),n.d(e,"REFRESH_DEVICE_CONFIGURATION",(function(){return Q})),n.d(e,"REGISTER_CART_ITEMS",(function(){return ne})),n.d(e,"REMOVE_ADD_ON_ITEM",(function(){return h})),n.d(e,"REMOVE_DEVICE",(function(){return Ot})),n.d(e,"REMOVE_LINE_ITEM",(function(){return C})),n.d(e,"REMOVE_SKU_FROM_COMPARE",(function(){return et})),n.d(e,"REQUEST_INTERRUPTION_PERMISSION",(function(){return qt})),n.d(e,"RETURN_FORM",(function(){return te})),n.d(e,"SET_ACTIVATED_PRICING_OPTION",(function(){return Ft})),n.d(e,"SET_ANCHOR",(function(){return Y})),n.d(e,"SET_DESTINATION_ZIP_CODE",(function(){return H})),n.d(e,"SET_DEVICE_LIST_COUNT",(function(){return Dt})),n.d(e,"SET_DEVICE_LIST_FILTER",(function(){return vt})),n.d(e,"SET_DEVICE_LIST_PAGE",(function(){return At})),n.d(e,"SET_DEVICE_LIST_SEARCH",(function(){return wt})),n.d(e,"SET_DEVICE_LIST_SORT",(function(){return Pt})),n.d(e,"SET_EASY_REPLENISH",(function(){return kt})),n.d(e,"SET_FACET_VIEW_VISIBILITY",(function(){return u})),n.d(e,"SET_FORM",(function(){return Jt})),n.d(e,"SET_OPENBOX_STORE_DEPRECATED",(function(){return se})),n.d(e,"SET_PROTECTION_PLAN",(function(){return rt})),n.d(e,"SET_SAVED_ITEMS_SKU_STATE",(function(){return it})),n.d(e,"SET_SEARCH_ZIP_CODE",(function(){return I})),n.d(e,"SET_SELECTED_INSTALLATION_SKU",(function(){return ht})),n.d(e,"SET_SELECTED_NEARBY_STORE_ID_LIST",(function(){return x})),n.d(e,"SET_SKU_LIST_FACET_LIST",(function(){return i})),n.d(e,"SET_SKU_LIST_PAGE",(function(){return c})),n.d(e,"SET_SKU_LIST_SORT",(function(){return r})),n.d(e,"SET_STORE_ID",(function(){return k})),n.d(e,"SET_TIME_BASED_SUBSCRIPTION",(function(){return Mt})),n.d(e,"SET_VEHICLE",(function(){return ct})),n.d(e,"SKU_CARD_ADD_TO_CART_CLICKED",(function(){return Zt})),n.d(e,"SKU_CARD_PDP_CLICKED",(function(){return xt})),n.d(e,"SPECIFICATIONS_ANCHOR",(function(){return B})),n.d(e,"STEPUP_ANCHOR",(function(){return z})),n.d(e,"SUCCESS_ALERT",(function(){return N})),n.d(e,"USER_LIST_MODIFIED",(function(){return ut})),n.d(e,"WARN",(function(){return A})),n.d(e,"WARNING_ALERT",(function(){return L})),n.d(e,"addAddOnItem",(function(){return E})),n.d(e,"addDevice",(function(){return mt})),n.d(e,"addLineItem",(function(){return T})),n.d(e,"addSkuToCompare",(function(){return tt})),n.d(e,"addToCartSuccess",(function(){return Tt})),n.d(e,"changeSku",(function(){return f})),n.d(e,"clearAlert",(function(){return U})),n.d(e,"clearSearch",(function(){return $t})),n.d(e,"deregisterCartItems",(function(){return ie})),n.d(e,"displayAlert",(function(){return j})),n.d(e,"interruptionPermissionResponse",(function(){return Yt})),n.d(e,"interruptionStatusUpdate",(function(){return Qt})),n.d(e,"log",(function(){return R})),n.d(e,"modalClosed",(function(){return St})),n.d(e,"modalOpened",(function(){return Et})),n.d(e,"refreshDeviceConfiguration",(function(){return J})),n.d(e,"registerCartItems",(function(){return re})),n.d(e,"removeAddOnItem",(function(){return _})),n.d(e,"removeDevice",(function(){return gt})),n.d(e,"removeLineItem",(function(){return m})),n.d(e,"removeSkuFromCompare",(function(){return nt})),n.d(e,"requestInterruptionPermission",(function(){return Bt})),n.d(e,"returnForm",(function(){return ee})),n.d(e,"setActivatedPricingOption",(function(){return Gt})),n.d(e,"setAnchor",(function(){return W})),n.d(e,"setDeprecatedOpenboxStoreChanged",(function(){return ce})),n.d(e,"setDestinationZipCode",(function(){return F})),n.d(e,"setDeviceListCount",(function(){return Rt})),n.d(e,"setDeviceListFilter",(function(){return Nt})),n.d(e,"setDeviceListPage",(function(){return bt})),n.d(e,"setDeviceListSearch",(function(){return Lt})),n.d(e,"setDeviceListSort",(function(){return jt})),n.d(e,"setEasyReplenish",(function(){return Vt})),n.d(e,"setFacetViewVisibility",(function(){return d})),n.d(e,"setForm",(function(){return Xt})),n.d(e,"setProtectionPlan",(function(){return ot})),n.d(e,"setSavedItemsSkuState",(function(){return st})),n.d(e,"setSearchZipCode",(function(){return S})),n.d(e,"setSelectedInstallationSku",(function(){return _t})),n.d(e,"setSelectedNearbyStoreIdList",(function(){return Z})),n.d(e,"setSkuListFacetList",(function(){return s})),n.d(e,"setSkuListPage",(function(){return a})),n.d(e,"setSkuListSort",(function(){return o})),n.d(e,"setStoreId",(function(){return V})),n.d(e,"setTimeBasedSubscription",(function(){return Ut})),n.d(e,"setVehicle",(function(){return at})),n.d(e,"skuCardEvent",(function(){return Ht})),n.d(e,"userListModified",(function(){return dt}));const r="SET_SKU_LIST_SORT";function o(t){return{type:r,sort:t}}const i="SET_SKU_LIST_FACET_LIST";function s(t){return{type:i,facetList:t}}const c="SET_SKU_LIST_PAGE";function a(t){return{type:c,page:t}}const u="SET_FACET_VIEW_VISIBILITY";function d(t,e){return{type:u,isVisible:t,facetField:e}}const p="CHANGE_SKU";function f(t){return{type:p,skuId:t}}const l="ADD_ADD_ON_ITEM";function E({skuId:t}){return{type:l,payload:{skuId:t}}}const I="SET_SEARCH_ZIP_CODE";function S({zipcode:t}){return{type:I,payload:{zipcode:t}}}const h="REMOVE_ADD_ON_ITEM";function _({skuId:t}){return{type:h,payload:{skuId:t}}}const y="ADD_LINE_ITEM";function T(t){return{type:y,lineItemId:t}}const C="REMOVE_LINE_ITEM";function m(t){return{type:C,lineItemId:t}}const O="LOG",g="INFO",A="WARN",b="ERROR",D="DEBUG";function R(t,e,n,r,o,i,s){return{type:O,level:t,message:e,error:n,componentId:o,creatorNamespace:r,contractVersion:i,instanceId:s}}const v="DISPLAY_ALERT",N="SUCCESS_ALERT",w="INFO_ALERT",L="WARNING_ALERT",P="DANGER_ALERT";function j(t,e){return{id:Math.random().toString(10),type:v,level:t,message:e}}const M="CLEAR_ALERT";function U(t){return{displayAlertId:t.id,type:M}}const k="SET_STORE_ID";function V(t){if(!t)throw new Error("Set store requires the storeId.");return{type:k,storeId:t}}const x="SET_SELECTED_NEARBY_STORE_ID_LIST";function Z(t){return{type:x,payload:{storeIdList:t}}}const H="SET_DESTINATION_ZIP_CODE";function F(t){return function(t){if("string"!=typeof t||5!==t.length)throw new Error("Invalid zip code provided to action creator.")}(t),{type:H,destinationZipCode:t}}const G="BUYING_OPTIONS_ANCHOR",K="MANUFACTURE_CONTENT_ANCHOR",$="QUESTIONS_ANSWERS_ANCHOR",q="RATINGS_REVIEWS_ANCHOR",B="SPECIFICATIONS_ANCHOR",z="STEPUP_ANCHOR",Y="SET_ANCHOR";function W(t,e){return{type:Y,to:t,timeStamp:e}}const Q="REFRESH_DEVICE_CONFIGURATION";function J(t){return{type:Q,deviceId:t}}const X="ADD_SKU_TO_COMPARE";function tt(t){return{type:X,skuId:t}}const et="REMOVE_SKU_FROM_COMPARE";function nt(t){return{type:et,skuId:t}}const rt="SET_PROTECTION_PLAN";function ot(t){return{type:rt,skuId:t}}const it="SET_SAVED_ITEMS_SKU_STATE";function st(t,e){return{type:it,isSaved:e,skuId:t}}const ct="SET_VEHICLE";function at(t,e){let n=!1;if((null===t&&null===e||"number"==typeof t&&"string"==typeof e&&t>=0&&e)&&(n=!0),!n)throw new Error("One or more required parameters is missing or invalid.");return{type:ct,vehicleId:t,vehicleYear:e}}const ut="USER_LIST_MODIFIED";function dt(t,e){return{type:ut,uuid:t,listType:e}}const pt="ADD_DEVICE_MODAL",ft="DEVICE_DETAILS_MODAL",lt="MODAL_OPENED";function Et(t="",e={}){return{type:lt,modalType:t,params:Object.assign({},e)}}const It="MODAL_CLOSED";function St(t="",e={}){return{type:It,modalType:t,params:Object.assign({},e)}}const ht="SET_SELECTED_INSTALLATION_SKU";function _t(t){return{type:ht,payload:{skuId:t}}}const yt="ADD_TO_CART_SUCCESS",Tt=({cartCount:t,cartSubTotal:e,items:n=[],lineId:r,skuId:o})=>({type:yt,payload:{cartCount:t,cartSubTotal:e,skuId:o,lineId:r,items:n}}),Ct="ADD_DEVICE";function mt(t){return{type:Ct,deviceUuid:t}}const Ot="REMOVE_DEVICE";function gt(t){return{type:Ot,deviceUuid:t}}const At="SET_DEVICE_LIST_PAGE",bt=()=>({type:At}),Dt="SET_DEVICE_LIST_COUNT",Rt=t=>({type:Dt,count:t}),vt="SET_DEVICE_LIST_FILTER",Nt=({filter:t,groupUuid:e})=>({type:vt,filter:t,groupUuid:e}),wt="SET_DEVICE_LIST_SEARCH",Lt=t=>({type:wt,search:t}),Pt="SET_DEVICE_LIST_SORT",jt=t=>({type:Pt,sort:t}),Mt="SET_TIME_BASED_SUBSCRIPTION",Ut=(t,e)=>({type:Mt,frequency:t,units:e}),kt="SET_EASY_REPLENISH",Vt=t=>({type:kt,replenishId:t}),xt="SKU_CARD_PDP_CLICKED",Zt="SKU_CARD_ADD_TO_CART_CLICKED",Ht=({skuCardEventType:t,epValue:e,skuId:n,instanceId:r})=>({type:t,epValue:e,skuId:n,instanceId:r}),Ft="SET_ACTIVATED_PRICING_OPTION",Gt=({skuId:t="",mobileContract:e,retailOption:n})=>({type:Ft,skuId:t,mobileContract:e,retailOption:n}),Kt="CLEAR_SEARCH",$t=({instanceId:t})=>({type:Kt,payload:{instanceId:t}}),qt="REQUEST_INTERRUPTION_PERMISSION",Bt=({deviceClass:t,interruptionId:e,interruptionType:n,placement:r,requestedInterruptionDuration:o,options:i})=>({type:qt,payload:{deviceClass:t,interruptionId:e,interruptionType:n,placement:r,requestedInterruptionDuration:o,options:i}}),zt="INTERRUPTION_PERMISSION_RESPONSE",Yt=({interruptionDuration:t,interruptionId:e,interruptionType:n,permissionGranted:r,reason:o})=>({type:zt,payload:{interruptionDuration:t,interruptionId:e,interruptionType:n,permissionGranted:r,reason:o}}),Wt="INTERRUPTION_STATUS_UPDATE",Qt=({interruptionId:t,status:e,interruptionType:n,placement:r})=>({type:Wt,payload:{interruptionId:t,interruptionType:n,placement:r,status:e}}),Jt="SET_FORM",Xt=(t,e="defaultId")=>({type:Jt,payload:{formData:t,formId:e}}),te="RETURN_FORM",ee=(t,e="defaultId",n=!1)=>({type:te,payload:{formData:t,formId:e,isFormValid:n}}),ne="REGISTER_CART_ITEMS",re=({cartItems:t})=>{if(!t||!t.every(t=>t&&t.itemKey&&t.skuId))throw new Error(`Invalid cartItems: ${JSON.stringify(t)}. Each cartItem must have an itemKey and a skuId`);return{type:ne,payload:t}},oe="DEREGISTER_CART_ITEMS",ie=({itemKeys:t})=>({type:oe,payload:t}),se="SET_OPENBOX_STORE_DEPRECATED";function ce(t){return{type:se,payload:t}}},function(t,e){t.exports={creatorNamespace:"shop",componentId:"location-persistence",componentVersion:"",contractVersion:"v1",assetBasePath:"dist/client"}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.warn=e.debug=e.info=e.setInstanceId=e.setComponentDescriptor=e.setStore=e.LogProvider=void 0;var o,i,s,c=n(0),a=r(n(15));function u(t,e,n){var r=c.log(t,e,n,s&&s.creatorNamespace,s&&s.componentId,s&&s.contractVersion,i);o&&o.dispatch?o.dispatch(r):"undefined"!=typeof actionLog&&actionLog.dispatch(r,i)}e.LogProvider=a.default,e.setStore=function(t){o=t},e.setInstanceId=function(t){i=t},e.setComponentDescriptor=function(t){s=t},e.info=function(t,e){u(c.INFO,t,e)},e.warn=function(t,e){u(c.WARN,t,e)},e.error=function(t,e){u(c.ERROR,t,e)},e.debug=function(t,e){u(c.DEBUG,t,e)}},function(t,e){t.exports=actionLog},function(t,e){t.exports=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorageHandler=e.CookieHandler=void 0;var r=i(n(12)),o=i(n(13));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.CookieHandler=r,e.LocalStorageHandler=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(5),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(14));function s(t,e){return JSON.parse(t.get(e))}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e;try{this.handler.init()}catch(t){this.handler=o.CookieHandler,this.handler.init()}}return r(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("string"!=typeof t)throw new TypeError("key must be a string");var n=s(this.handler,t);return n?n.value:void 0===e?null:e}},{key:"getMeta",value:function(t){if("string"!=typeof t)throw new TypeError("key must be a string");var e=s(this.handler,t);return e?e.meta:null}},{key:"remove",value:function(t){if("string"!=typeof t)throw new TypeError("key must be a string");return this.handler.remove(t)}},{key:"set",value:function(t,e,n){if("string"!=typeof t)throw new TypeError("key must be a string");var r=this.handler,o=new Date;n||(n={}),n.expireAt||(n.expireSec>=0?(n.expireAt=new Date(o),n.expireAt.setSeconds(n.expireAt.getSeconds()+n.expireSec)):n.ExpiresAt?n.expireAt=n.ExpiresAt:n.expires>=0&&(n.expireAt=new Date(o),n.expireAt.setMinutes(n.expireAt.getMinutes()+n.expires)));var c={CreatedAt:o,ModifiedAt:o,ExpiresAt:n&&n.expireAt||null},a=s(r,t);a&&(c.CreatedAt=a.meta?a.meta.CreatedAt:new Date(o));var u=JSON.stringify({meta:c,value:e});if(!n.skipValidation){if(i.hasCreditCard(u))throw new Error("Cannot store strings that look like credit card numbers");if(i.hasEmailAddress(u))throw new Error("Cannot store email addresses");if(i.hasSsn(u))throw new Error("Cannot store ssn")}return r.set(t,u,n)}}],[{key:"createDefault",value:function(){var e=void 0;try{e=new t(o.LocalStorageHandler)}catch(n){e=new t(o.CookieHandler)}return e}}]),t}();c.handlers={CookieHandler:o.CookieHandler,LocalStorageHandler:o.LocalStorageHandler},e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Fetch=class{constructor(t){this.falcorModel=t}buildStoreApiPath(...t){return["shop","magellan","v2","storeId","stores",...t]}fetchStoreZip(t){const e=this.buildStoreApiPath(t,"zipCode");return this.falcorModel.getValue(e).then(null,e=>{throw new Error(`Failed to fetch store zip with provided store id ${t}. Falcor error ${e}`)})}}},function(t,e){t.exports=createFetchService},function(t,e){t.exports=initializer},function(t){t.exports=JSON.parse('{"a":"2.0.57"}')},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){},e.get=function(t){for(var e=encodeURIComponent(t),n=r.r().split("; "),o=0;o<n.length;o++)if(n[o].substr(0,e.length+1)===e+"=")return decodeURIComponent(n[o].substr(e.length+1));return null},e.set=o,e.remove=function(t,e){return o(t,"",{domain:e&&e.domain,expireAt:new Date(0)}),!0};var r={r:function(){return document.cookie},w:function(t){document.cookie=t}};function o(t,e,n){var o,i=[encodeURIComponent(t)+"="+encodeURIComponent(e)];n&&n.expireAt&&i.push("expires="+n.expireAt.toUTCString()),i.push("path="+(n&&n.path||"/"),"domain="+((o=n&&n.domain)?o.replace(/^\.?/,"."):"."+window.location.hostname.split(".").slice(-2).join("."))),n&&n.secure&&i.push("secure"),r.w(i.join("; ")+"; ")}e.c=r},function(t,e,n){"use strict";function r(t){return sessionStorage.removeItem(t),localStorage.removeItem("d_"+t),localStorage.removeItem("e_"+t),!0}Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){localStorage.setItem("test","1"),localStorage.removeItem("test"),sessionStorage.setItem("test","1"),sessionStorage.removeItem("test")},e.get=function(t){var e=sessionStorage.getItem(t);if(e)return e;if(new Date(localStorage.getItem("e_"+t))<new Date)return r(t),null;return localStorage.getItem("d_"+t)},e.set=function(t,e,n){n&&n.expireAt?(localStorage.setItem("e_"+t,n.expireAt),localStorage.setItem("d_"+t,e)):sessionStorage.setItem(t,e)},e.remove=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=/\d{4}-?\d{4}-?\d{4}-?\d{4}/,i=/\d{3}-\d{2}-\d{4}/i;e.hasEmailAddress=function(t){return r.test(t)},e.hasCreditCard=function(t){return o.test(t)},e.hasSsn=function(t){return i.test(t)}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),d=a(n(16)),p=c(n(17)),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getChildContext=function(){var t=this.props,e=t.componentId,n=t.creatorNamespace,r=t.contractVersion,o=t.instanceId,i=t.store;return u.setStore(i),u.setInstanceId(o),u.setComponentDescriptor({componentId:e,creatorNamespace:n,contractVersion:r}),{log:{debug:u.debug,error:u.error,info:u.info,warn:u.warn}}},e.prototype.render=function(){return p.Children.only(this.props.children)},e.childContextTypes={log:d.default.shape({debug:d.default.func.isRequired,error:d.default.func.isRequired,info:d.default.func.isRequired,warn:d.default.func.isRequired})},e.propTypes={children:d.default.object.isRequired,componentId:d.default.string.isRequired,creatorNamespace:d.default.string.isRequired,contractVersion:d.default.string.isRequired,instanceId:d.default.string.isRequired,store:d.default.object.isRequired},e}(p.default.Component);e.default=f},function(t,e){t.exports=PropTypes},function(t,e){t.exports=React},function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return G}));const r={geo:"G",akamai:"A",customerProvided:"C"},o={types:"Store",storeTypes:"BigBox",status:"Open"};var i=n(3),s=n(5),c=n(6),a=n.n(c),u=n(4),d=n(7);const p={locStoreId:["store","storeId"],locDestZip:["destination","zipCode"],locStoreZip:["store","zipCode"],locPhysicalZip:["physical","zipCode"],source:["physical","source"],storeCapture:["store","storeHydratedCaptureTime"],physicalCapture:["physical","captureTime"]};class f{constructor(t){this.persistenceManager=new a.a(s.CookieHandler),this.fetch=new d.Fetch(t)}set(t){const e=this.buildOldCookie(t);this.persistenceManager.set("sc-location-v2",e,{expireSec:31536e3,skipValidation:!0,domain:".bestbuy.com"})}buildOldCookie(t){const e=this.get("sc-location-v2");return Object.keys(t).forEach(n=>{const r=t[n],o=p[n];o&&r&&Object(u.set)(e,o,r)}),JSON.stringify(e)}get(){const t=this.persistenceManager.get("sc-location-v2");try{return JSON.parse(t)||{}}catch(t){return{}}}getKey(t){const e=this.get();return Object(u.get)(e,p[t])}get destinationZipCode(){return this.getKey("locDestZip")}set destinationZipCode(t){this.set({locDestZip:t})}get storeId(){return this.getKey("locStoreId")}get source(){return this.getKey("source")}set storeId(t){this.fetch.fetchStoreZip(t).then(e=>{e&&this.set({locStoreId:t,locStoreZip:e,storeCapture:new Date})})}geoLocated(t){this.set({locPhysicalZip:t.destinationZipCode,source:t.source,physicalCapture:new Date}),this.destinationZipCode=t.destinationZipCode,this.storeId=t.storeId}}var l=n(0);function E(t){const e=[];return Object.keys(t).forEach(n=>{void 0!==t[n]&&e.push(`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`)}),e.join("&")}function I(t){window.analyticsQ&&window.analyticsQ.dispatch&&window.analyticsQ.dispatch(t)}class S{constructor(t,e){this.compatibility=new f(e),this.instanceId=t}updateNewCookie(t,e,n=!1){e&&n?this.storeId=t:this.makeTheUpdate()}makeTheUpdate(){const t=this.compatibility.storeId?this.compatibility.storeId.toString():this.compatibility.storeId;var e,n;("string"==typeof(e=t)&&e.length||"number"==typeof e&&!isNaN(e))&&this.storeId!==t&&(this.set("locStoreId",t),Object(i.dispatch)(Object(l.setStoreId)(this.storeId),this.instanceId)),"string"==typeof(n=this.compatibility.destinationZipCode)&&5===n.length&&this.destinationZipCode!==this.compatibility.destinationZipCode&&(this.set("locDestZip",this.compatibility.destinationZipCode),Object(i.dispatch)(Object(l.setDestinationZipCode)(this.destinationZipCode),this.instanceId))}isLocationCached(){return!(!this.storeId||!this.destinationZipCode)}geoLocated(t){this.compatibility.geoLocated(t),this.set("locDestZip",t.destinationZipCode),this.set("locStoreId",t.storeId)}get destinationZipCode(){return this.get("locDestZip")}set destinationZipCode(t){this.set("locDestZip",t),this.compatibility.destinationZipCode=t}get storeId(){return this.get("locStoreId")}set storeId(t){this.set("locStoreId",t),this.compatibility.storeId=t}get analyticsStoreId(){return this.get("analyticsStoreId")}set analyticsStoreId(t){this.set("analyticsStoreId",t)}get analyticsToken(){return this.get("analyticsToken")}set analyticsToken(t){this.set("analyticsToken",t)}set(t,e){const n=new Date;n.setSeconds(n.getSeconds()+31536e3),document.cookie=`${t}=${e}; expires=${n.toUTCString()}; path=/; domain=.bestbuy.com`}get(t){const e=encodeURIComponent(t);let n;return document.cookie.split("; ").some(t=>t.substr(0,e.length)===e&&(n=t.substr(e.length+1),!0)),n}}var h=n(8),_=n.n(h),y=n(1),T=n(2);T.headers={};const C=_()(y,T,"location-persistence");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var O=function(t){return t&&"object"===m(t)&&t.constructor===Object},g=function(t){return Array.isArray(t)},A=function(t){return"string"==typeof t||t instanceof String},b=function(t){return/\S+@\S+\.\S+/.test(t)},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=t(n);if(O(n)&&(r.reportingVariables=r.reportingVariables||n.reportingVariables),r.reportingVariables&&!O(r.reportingVariables))throw new Error("`reportingVariables` should be an object or undefined");return r}},R=D((function(t){var e=t.clientErrors,n=t.serverErrors;if(e){if(!O(e))throw new Error("error expects clientErrors to be an object");Object.values(e).forEach((function(t){if(!g(t))throw new Error("clientErrors object keys must be an array containing at least one string value");t.forEach((function(t){if(!A(t))throw new Error("clientErrorObject only accepts an object where the value of the keys are required to be an array of strings");if(b(t))throw new Error("clientErrorObjects cannot contain email addresses!")}))}))}if(n){if(!g(n))throw new Error("error expects serverErrors to be an array");n.forEach((function(t){if(!O(t))throw new Error("action creator expects an array of objects");if(!t.errorCode)throw new Error("action requires error objects to have an errorCode property");if(b(t.errorCode))throw new Error("errorCode cannot contain any personal data! email addresses are not allowed.")}))}return{type:"ERROR",clientErrors:e,serverErrors:n}}));function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var N=D((function(t){var e=t.context,n=t.deviceClass,r=t.pageType,o=t.templateName,i=t.findingMethod,s=t.searchData,c=t.blueprintName,a=t.skus;if(s&&!O(s))throw new Error("SearchData should be an object, received a type: ".concat(v(s)," instead"));if(c&&!A(c))throw new Error("blueprint name is not a string, received a type: ".concat(v(c)," instead"));return{type:"TRACK_DATA",context:e,deviceClass:n,pageType:r,findingMethod:i,templateName:o,blueprintName:c,searchData:s,skus:a}}));function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(){return C("/location/v1/US/approximate").then(t=>t.ok?t.text():void 0).then(t=>({physicalZipCode:t,source:r.akamai}))}function j(t,e,n="US",r={}){const o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({panCodes:[]},r);o.pancodes=o.panCodes.join(",");const i=E(o);return C(`/location/v1/${n}/geocoordinate/${t},${e}?${i}`).then(t=>t.ok?t.json():void 0).then(t=>t&&t.locationData||[])}function M(t){return C(t).then(t=>t.ok?t.json():void 0).then(t=>t&&t.storeData||[])}function U(t,e){return C(`/profile/rest/preferred/locations/${t}/store/${e}`,{method:"POST"}).catch(()=>{})}function k(t,e,{type:n}={}){if(window&&window.falcorModel){const r=function(t){return["shop","magellan","v2","storeId","stores",t]}(t),o=r.concat([["storeType","status"]]);return window.falcorModel.get(o).then(o=>{const{status:i,storeType:s}=Object(u.get)(o,["json",...r]),c=e.get("ut")||e.get("vt");if(!("Open"===i&&"Big Box"===s||c===e.analyticsToken&&t===e.analyticsStoreId)){e.analyticsStoreId=t,e.analyticsToken=c;const{reportingVariables:r,clientErrors:o}=function(t){return{reportingVariables:{"bb.errorCode":"An invalid store has been set as preferred store","bb.selectedStoreID":t},clientErrors:{locationPersistence:[t+" is not a valid store"]}}}(t);switch(n){case"error":I(R({reportingVariables:r,clientErrors:o}));break;default:I(N({reportingVariables:r}))}}}).catch(e=>{Object(T.error)(`Error while fetching store type and status for store ${t} : `,e)})}}class V{constructor(t,e){this.instanceId=t,this.persistence=new S(this.instanceId,e);const n=window.location.search.match("[?&]extStoreId=([^&]*)");this.hasExtStoreId=!!n,this.extStoreId=n&&n[1]}init(t={}){const{updateOldCookie:e,useExtStoreIdValue:n,writeExtStoreIdToProfile:o,restrictLocDestZipUpdate:s,getShippingAddress:c}=t;!function(t,e){const n=e.get("ut");Object(i.listen)(t=>{switch(t.type){case l.SET_STORE_ID:k(t.storeId,e,{type:"error"}),n&&U(n,t.storeId),e.storeId=t.storeId;break;case l.SET_DESTINATION_ZIP_CODE:e.destinationZipCode=t.destinationZipCode}},t)}(this.instanceId,this.persistence),this.persistence.updateNewCookie(this.extStoreId,e,this.hasExtStoreId);const a=this.persistence.get("ut"),d=this.persistence.isLocationCached();if("undef"===this.persistence.destinationZipCode&&(this.persistence.destinationZipCode=void 0),d&&!a)return k(this.persistence.storeId,this.persistence),Promise.resolve(this.persistence.storeId);if(a){const{customerProvided:t}=r;return C("/browse-api/1.0/storeLocator?zipcode=raas").then(t=>t.ok?t.json():void 0).then(t=>Object(u.get)(t,"preferredStores.values[0]",{})).catch(()=>({})).then(({id:e,zipCode:r})=>{if(e||r){if(s)if(this.persistence.destinationZipCode)r=this.persistence.destinationZipCode;else{if(c)return function(t){return C("/profile/rest/c/address/shipping").then(t=>t.ok?t.json():void 0).then(e=>Object.assign(e,{id:t})).catch(()=>({address:[],id:t}))}(e);r=this.persistence.get("customerZipCode").split("|")[0]}return o&&this.hasExtStoreId&&U(a,this.extStoreId),n&&this.hasExtStoreId?this.createLocationObject(t,r,this.extStoreId):this.createLocationObject(t,r,e)}return this.getUserLocation(n)}).then(e=>{let r;if(e.address&&Array.isArray(e.address)){const i=e.address;if(i.length>0){const t=i.filter(({primary:t})=>t);r=t.length>0?t[0].postalCode:this.persistence.get("customerZipCode").split("|")[0]}else r=this.persistence.get("customerZipCode").split("|")[0];return o&&this.hasExtStoreId&&U(a,this.extStoreId),n&&this.hasExtStoreId?this.createLocationObject(t,r,this.extStoreId):this.createLocationObject(t,r,e.id)}return e})}return this.getUserLocation()}createLocationObject(t,e,n){return this.setLocation({source:t,destinationZipCode:e,storeId:n})}getUserLocation(){return this.getBrowserLocation().then(t=>t&&t.latitude&&t.longitude?j(t.latitude,t.longitude).then(e=>{if(e&&e.length){const n=e[0];return t.physicalZipCode=n.zipCode,t.source=r.geo,t}}):P(),P).then(t=>this.extStoreId?(t.storeId=this.extStoreId,t.destinationZipCode=t.physicalZipCode,k(t.storeId,this.persistence),t):this.fetchStore(t)).then(t=>{if(t)return this.setLocation(t)})}setLocation(t){return this.persistence.geoLocated(t),Object(i.dispatch)(Object(l.setStoreId)(t.storeId),this.instanceId),Object(i.dispatch)(Object(l.setDestinationZipCode)(t.destinationZipCode),this.instanceId),k(t.storeId,this.persistence,{}),t.storeId}fetchStore(t){let e=Promise.resolve();return t&&t.latitude&&t.longitude?e=function(t,e,n="US",r=o){return M(`/location/v1/${n}/store/geocoordinate/${t},${e}?${E(r)}`)}(t.latitude,t.longitude):t&&t.physicalZipCode&&(e=function(t,e="US",n=o){return M(`/location/v1/${e}/store/zipcode/${t}?${E(n)}`)}(t.physicalZipCode)),e.then(e=>{if(e&&e.length){const n=e[0].id;return k(n,this.persistence),{source:t.source,destinationZipCode:t.physicalZipCode,storeId:n}}})}getBrowserLocation(){if(!this.browserSupportsGeoLocation())return Promise.reject();const t=window.navigator.geolocation;return new Promise((e,n)=>{t.getCurrentPosition(t=>{const n=t&&t.coords||{};e(n)},n,{enableHighAccuracy:!1,timeout:3e4,maximumAge:0})})}browserSupportsGeoLocation(){return!!(window&&window.navigator&&window.navigator.geolocation)}}var x=n(9),Z=n.n(x),H=n(10);const F={componentId:y.componentId,contractVersion:y.contractVersion,creatorNamespace:y.creatorNamespace,componentVersion:H.a},G=(t,e,n={})=>{Object(T.setInstanceId)(t),I(function(t,e,n,r){if(!t||!A(t))throw Error("instanceId is required to register a component");if((!e||e&&!A(e))&&console.warn("An optional componentType will be deprecated. It will be required in the future."),n){if(!O(n))throw Error("componentDescriptor is not an object");if(!A(n.creatorNamespace))throw Error("componentDescriptor.creatorNamespace is required to register a component");if(!A(n.componentId))throw Error("componentDescriptor.componentId is required to register a component");if(!A(n.contractVersion))throw Error("componentDescriptor.contractVersion is required to register a component")}return{type:"REGISTER_COMPONENT",instanceId:t,componentType:e,componentDescriptor:n,apeData:r}}(t,`${y.creatorNamespace}-${y.componentId}-${y.contractVersion}`));return new V(t,window.falcorModel).init(n.liveConfig).then(()=>{I(function(t){if(!t)throw Error("instanceId is required to declare a component is ready");return{type:"COMPONENT_READY",instanceId:t}}(t))})};Z.a.registerComponent(F,G)}]);
//# sourceMappingURL=client-e2a10c1ab87a3eb304241dff537958cd.mjs.map