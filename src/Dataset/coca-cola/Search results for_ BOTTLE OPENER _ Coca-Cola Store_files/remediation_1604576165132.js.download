"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e,t){h[e]||(h[e]=[]),-1===h[e].indexOf(t)&&h[e].push(t)}function t(e,t){if(!(!h[e]instanceof Array)){var r=h[e].indexOf(t);-1!==r&&h[e].splice(r,1)}}function r(){b.postMessage({action:"remediation",type:"all-helpers-executed",data:{origin:location.origin,path:location.pathname,data:{loading:UserWayWidgetApp.remediationHelpersLoading}}})}function n(){b.postMessage({action:"remediation",type:"get-site-info",data:{origin:location.origin,path:location.pathname}})}function i(){y.push("needToFix"),a()}function a(){b.postMessage({action:"remediation",type:"remediation-count",data:A.needToFix})}function o(e,t){A.needToFix[e]=t,-1!==y.indexOf("needToFix")&&a()}function u(e){b.postMessage({action:"remediation",type:e.type,data:e.data})}function l(e,t,r,n){var i={method:"POST",url:m+"/remediation/"+e,header:{"Content-Type":"application/json"},body:{userId:UserWayWidgetApp.ContextHolder.config.services.userId,siteId:UserWayWidgetApp.ContextHolder.config.services.siteId}};if(t&&(i.body.elements=t),"object"===(void 0===r?"undefined":_typeof(r))&&Object.keys(r).map(function(e){i.body[e]=r[e]}),!(UserWayWidgetApp.remediationHelpersLoading>0)||n)return b.request(i);v.push(i)}function c(e,t,r,n){return e.filter(function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE||-1!==["STYLE","SCRIPT"].indexOf(e.nodeName))return!1;if("function"==typeof n){var r=n(e);if("boolean"==typeof r)return r}return-1===t.indexOf(e)&&(t.push(e),!0)})}function s(e){var t=JSON.parse(e.data.data),r=t.elements.map(function(e){return[e,b.isVisible(e)]});b.postMessage({action:"remediation",type:"element-is-visible",data:{key:t.key,elements:r}})}function d(e){var t=document.querySelectorAll("."+T.className);t.length&&t.forEach(function(e){b.resetInlineStyles(e,T.attrMarker,T.styles),e.classList.remove(T.className)});var r=[],n=e.data.data.type,i=e.data.data.value.toLowerCase();switch(n){case"xpath":r=[b.getByXpath(i)];break;case"href":var a=document.querySelectorAll("[href]"),o=!0,u=!1,l=void 0;try{for(var c,s=a[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;d.href.toLowerCase().indexOf(i)>-1&&r.push(d)}}catch(e){u=!0,l=e}finally{try{!o&&s.return&&s.return()}finally{if(u)throw l}}break;case"src":var f=document.querySelectorAll("[src]"),p=!0,A=!1,g=void 0;try{for(var h,m=f[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var v=h.value;v.src.toLowerCase().indexOf(i)>-1&&r.push(v)}}catch(e){A=!0,g=e}finally{try{!p&&m.return&&m.return()}finally{if(A)throw g}}}for(var E=0;E<r.length;E++){var y=r[E];y.classList.add(T.className),b.applyInlineStyles(y,T.attrMarker,T.styles),E||y.scrollIntoView()}}function f(e,t){o(e,t),-1===E.indexOf(e)&&(E.push(e),UserWayWidgetApp.remediationHelpersLoading--),0===UserWayWidgetApp.remediationHelpersLoading&&(v.forEach(function(e){return b.request(e)}),v=[],b.fireUserWayRemediationCompletedEvent({enabled:!0}),r())}var p,A=UserWayWidgetApp.addLib("remediation",g),g=UserWayWidgetApp.getLib("remediationConfig"),b=UserWayWidgetApp.getLib("util"),h={},m="https://api.userway.org/api",v=[],E=[],y=[],T={attrMarker:"uw-remediation",className:"uw-remediation-highlighting",styles:(p={border:"dashed 2px #c00"},_defineProperty(p,"border-radius","3px"),_defineProperty(p,"box-shadow","0 0 0 4px yellow, inset 0 0 0 4px yellow"),p)};A.DATA_ATTRIBUTE_NAME="data-uw-remediation",A.totalProcessed={},A.needToFix={},A.addListener=e,A.removeListener=t,A.sendPM=u,A.sendBE=l,A.filterItems=c,A.updateToDoCount=f,UserWayWidgetApp.remediationHelpersLoading=9,function(){window.addEventListener("message",function(e){var t=e.data||{};t.isUserWay&&"remediation"===t.action&&h[t.type]instanceof Array&&h[t.type].forEach(function(t){t(e)})})}(),e("get-site-info",n),e("remediation-count",i),e("element-is-visible",s),e("element-highlight",d),e("all-helpers-executed",r)}(),function(){function e(){p.totalProcessed.MISSING_ALT=0,p.needToFix.MISSING_ALT=0,a(n([].slice.call(document.querySelectorAll("img")))),window.addEventListener("popstate",function(){h=[],m=[],v=[],E=[],a(n([].slice.call(document.querySelectorAll("img"))))},!1),g.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,t){if(t&&(!t||t.length)){var r=n([].slice.call(t));r.length&&a(r)}})}function t(e){function t(){return new Promise(function(t,r){var n=new Image;n.onload=function(){var e=this.width,r=this.height;t(e>50&&r>50&&e<8e3&&r<8e3)},n.onerror=function(){r()},n.src=e.src})}function n(e){e.setAttribute("alt",T),e.setAttribute(p.DATA_ATTRIBUTE_NAME,"image")}function a(){return L.indexOf(UserWayWidgetApp.ContextHolder.config.services.userId)>-1}return new Promise(function(o,u){var l=e.getAttribute("alt");l=l?l.trim().toLowerCase():null;var c=!e.hasAttribute("alt"),s="true"===e.getAttribute("aria-hidden")||"presentation"===e.getAttribute("role"),d=new RegExp("^(data:image)"),f=d.test(e.src)?e.src:e.src.split("?")[0],A={};if(null!=b[f])return b[f].decorative?i(e):b[f].alt&&e.setAttribute("alt",b[f].alt),e.setAttribute(p.DATA_ATTRIBUTE_NAME,"image"),A={sendPM:b[f]},void o(A);if(!f)return c?i(e):e.setAttribute("aria-hidden","true"),A.sendPM=r(e,{approved:!c,decorative:!0}),void o(A);if(s)return c&&(i(e),d.test(f)),A.sendPM=r(e,{approved:!c,decorative:!0}),void o(A);if(-1!==f.indexOf("maps.googleapis.com")||-1!==f.indexOf("avatar"))return c&&i(e),A.sendPM=r(e,{approved:!c,decorative:!0}),void o(A);var g=c||!l;if(d.test(f))return g&&i(e),A.sendPM=r(e,{approved:!g,decorative:g}),void o(A);if(/.+\.svg$/.test(f))return g&&i(e),A.sendPM=r(e,{approved:!g,decorative:g}),void o(A);if(!g){return/(\.tif|\.tiff|\.bmp|\.jpg|\.jpeg|\.gif|\.png|\.eps|\.raw|\.cr2|\.nef|\.orf|\.sr2)$/.test(l)?void t().then(function(t){t&&(y?i(e):a()?n(e):A.sendBE={src:f}),A.sendPM=r(e,{approved:!t}),o(A)}).catch(function(){o({sendPM:r(e,{approved:!1})})}):void o({sendPM:r(e,{approved:!0})})}return g?void t().then(function(t){!t||y?i(e):a()?n(e):A.sendBE={src:f,fixed:!1},A.sendPM=r(e,{approved:!1,decorative:!t}),o(A)}).catch(function(){o({sendPM:r(e,{approved:!1})})}):void 0})}function r(e,t){return t=t||{},{src:e.src,alt:e.alt||"",approved:null!=t.approved&&t.approved,decorative:null!=t.decorative&&t.decorative,autofix:null!=t.autofix&&t.autofix,xpath:A.xpath(e)}}function n(e){return e.filter(function(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE||"IMG"!==e.nodeName)&&(!e.classList.contains("uw-widget-hidden-img")&&(-1===m.indexOf(e)&&(m.push(e),!0)))})}function i(e){e.setAttribute("aria-hidden","true"),e.setAttribute("alt","")}function a(e){e&&e.length?Promise.all(e.map(function(e){return t(e)})).then(function(e){var t=[],r=[];if(e.forEach(function(e){u(t,e.sendBE),l(r,e.sendPM)}),r.length){h=h.concat(r),s(),c();var n=h.filter(function(e){return!!e.src&&!e.approved});p.updateToDoCount("MISSING_ALT",n.length),A.fireUserWayLifeCycleEvent(A.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED)}else p.updateToDoCount("MISSING_ALT",0),A.fireUserWayLifeCycleEvent(A.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED);t.length&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId&&null!=UserWayWidgetApp.ContextHolder.config.services.userId&&p.sendBE("missing-alt",t)}):(p.updateToDoCount("MISSING_ALT",0),A.fireUserWayLifeCycleEvent(A.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED))}function o(e){document.querySelectorAll('[src="'+e.src+'"]').forEach(function(t){e.decorative?i(t):(t.removeAttribute("aria-hidden"),t.setAttribute("alt",e.alt)),t.setAttribute(p.DATA_ATTRIBUTE_NAME,"image")})}function u(e,t){if(null!=t&&-1===v.indexOf(t.src))return v.push(t.src),e.push(t),!0}function l(e,t){null!=t&&-1===E.indexOf(t.src)&&(E.push(t.src),e.push(t))}function c(){d({count:h.length})}function s(){d({imagesFixed:h})}function d(e){p.sendPM({type:"image-alt",data:e})}var f=UserWayWidgetApp.getLib("remediationConfig").alt,p=UserWayWidgetApp.getLib("remediation"),A=UserWayWidgetApp.getLib("util"),g=UserWayWidgetApp.getLib("event_emitter"),b={},h=[],m=[],v=[],E=[],y=f.quotaExceeded,T="Real estate photo",L=[52764];p.addListener("image-alt",function(e){e.data&&"images"===e.data.data?s():c()}),p.addListener("image-alt-update",function(e){e.data&&e.data.data&&o(e.data.data)}),f.resources?A.request({method:"GET",url:f.resources}).then(function(t){t&&t.response&&JSON.parse(t.response).MissingAlts.forEach(function(e){var t=e.src;t=t.split("?")[0],e.src=t,b[t]=e}),e()},function(e){p.updateToDoCount("MISSING_ALT",0),console.warn("Can't load descriptions.")}):f.enabled&&e()}(),function(){function e(e,t){return(e+"$"+t).toLowerCase()}function t(){setTimeout(function(){s.totalProcessed.VAGUE_LINK=0,s.needToFix.VAGUE_LINK=0,n(r([].slice.call(document.querySelectorAll("a[href]")))),f.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,t){if(t&&(!t||t.length)){var i=r([].slice.call(t));i.length&&n(i)}})},1e3)}function r(e){return e.filter(function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE||"A"!==e.nodeName)return!1;var t=e.href;if(!t||!/(^http|^tel:|^mailto:)/.test(t))return!1;var r=e.hasAttribute("aria-label")?e.getAttribute("aria-label"):null;if(r&&r.trim())return!1;var n=e.hasAttribute("aria-labelledby")?e.getAttribute("aria-labelledby"):null;return(!n||!n.trim())&&(-1===b.indexOf(e)&&(b.push(e),!0))})}function n(t){var r=[],n=[],i=0;if(t&&t.length&&(t.forEach(function(t){var o=a(t),u=void 0;if(o){if(/^tel:|^mailto:/.test(t.getAttribute("href")))u=o;else if(-1===["here","click here","download","download now","click","click this","this","link","more","read more","please click here","continue reading"].indexOf(o))return;var c=e(t.href,o);p[c]?(u=p[c].correction,n.push(p[c])):u||(u=l(t),r.push({href:t.href,term:o,correction:u,approved:!1}),n.push({href:t.href,term:o,correction:u,approved:!1}),i++),t.setAttribute("aria-label",u),t.setAttribute(s.DATA_ATTRIBUTE_NAME,"link")}}),n.length&&(A=A.concat(n),g=n,o(),u()),h+=i,0!==i&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId&&null!=UserWayWidgetApp.ContextHolder.config.services.userId)){var c=location.pathname;s.sendBE("vague-links/count",{total:h,page:c})}s.updateToDoCount("VAGUE_LINK",n.length?A.filter(function(e){return!!e.term&&!!e.href&&!e.approved}).length:0)}function i(e){d.postMessage({action:"remediation",type:"vague-link",data:e})}function a(e){var t=e.textContent?e.textContent:null,r=/tel:(.+)/,n=/mailto:(.+)/,i=e.hasAttribute("href")?e.getAttribute("href"):null;return r.test(i)?i.replace(r,"call $1"):n.test(i)?i.replace(n,"send an email to $1"):t&&t.trim()?d.customTrim(t).replace(/[^A-Za-z0-9\s]/g,"").replace(/\s{2,}/g," ").toLowerCase():null}function o(){i({links:A})}function u(){i({count:A.length})}function l(e){function t(e){if(!e)return null;if(-1!==["h1","h2","h3","h4","h5","h6"].indexOf(e.nodeName.toLowerCase()))return e.textContent;var t=e.querySelectorAll("h1,h2,h3,h4,h5,h6");return t.length?t[0].textContent:null}for(var r=e.parentElement,n=e;d.customTrim(r.textContent)===d.customTrim(e.textContent);)n=r,r=r.parentElement;for(var i=n.previousElementSibling,a=t(i);i&&i.parentElement===r&&!a;)i=i.previousElementSibling,a=i?t(i):null;if(a)return[e.textContent,a].join(" ");var o=function(e,t){for(var r=void 0,n=[],i=d.instantiateTreeWalker(e);r=i.nextNode();)n.push({node:r,target:r.parentElement===t});return n}(r,e).map(function(e){return{text:d.customTrim(e.node.textContent),target:e.target}}).filter(function(e){return!!e.text}),u="",l="",c="";l=o.find(function(e){return e.target});var s=o.indexOf(l);l=l?l.text:"";var f=[];if(s&&(f=o[s-1].text.split(/[.!?]+/),u=f.pop(),u=u?u.trim():""),s+1<o.length){c=o[s+1].text.split(/[.!?]+/).shift(),c=c?c.trim():""}return u||c||(u=f.length?f.pop():""),[u,l,c].filter(function(e){return!!e}).join(" ")}var c=UserWayWidgetApp.getLib("remediationConfig").vagueLinks||{},s=UserWayWidgetApp.getLib("remediation"),d=UserWayWidgetApp.getLib("util"),f=UserWayWidgetApp.getLib("event_emitter"),p={},A=[],g=[],b=[],h=0;s.addListener("vague-link",function(e){e.data&&"links"===e.data.data?o():u()}),c.resources?d.request({method:"GET",url:c.resources}).then(function(r){r&&r.response&&(JSON.parse(r.response).VagueLinks.forEach(function(t){p[e(t.href,t.term)]=t}),t())},function(e){console.warn("Can't load descriptions.")}):c.enabled&&t()}(),function(){function e(){s.totalProcessed.SOCIAL_SENSITIVITY=0,s.needToFix.SOCIAL_SENSITIVITY=0,a(d.getElementsWithText(document,!0)),window.addEventListener("popstate",function(){b=0,a(d.getElementsWithText(document,!0))},!1),f.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,t){if(t&&(!t||t.length)){var r=[].slice.call(t).reduce(function(e,t){if(void 0!==e)return e=e.concat(d.getElementsWithText(t,!0))},[]);r&&r.length&&a(r)}})}function t(){for(var e="",t=Object.keys(g).length;t--;){var r=Object.keys(g)[t];e+="("+g[r].t.replace(/(\s)/g,"\\s+")+")",t&&(e+="|")}return e="(?:\\W)"+e+"(?:\\W)",new RegExp(e,"gi")}function r(e){for(var t=Object.keys(g).length;t--;){var r=Object.keys(g)[t],n=g[r],i=n.t;if(e.trim().toLowerCase()===i.trim().toLowerCase())return r}throw"Unexpected term: "+e}function n(e,t,r){for(var n=m.length;n--;){var i=m[n];if(i.phraseId+""===e&&i.type===t&&i.xpath===r&&!i.ignored)return i.correction}return null}function i(e,t,r){for(var n=m.length;n--;){var i=m[n];if(i.phraseId+""===e&&i.type===t&&i.xpath===r&&i.ignored)return!0}return!1}function a(e){var a=0;if(e&&e.length){var c=t();e.forEach(function(e){var t=" "+d.customTrim(e.textContent)+" ",u="INNER_TEXT",l=t.match(c);if(l){a+=l.length;for(var f=d.xpath(e.parentElement),p=0;p<l.length;p++){for(var g=l[p],b=0,m=0;m<p;m++){l[m].toLowerCase()===g.toLowerCase()&&b++}var v=d.hashString(f+g+b)+"",E=r(g),y=i(E,u,v),T=n(E,u,v),L=!!T||y;L&&h++,T&&!y&&(o(e,g,T),e.setAttribute(s.DATA_ATTRIBUTE_NAME,"social-sensitivity")),A.push({xpath:f,xpathHash:v,type:u,term:g,approved:L,ignored:y,phraseId:E,correction:L?T:null})}}}),b+=a,0!==a&&(u(),l()),0!==a&&UserWayWidgetApp.ContextHolder.config.services.siteId&&s.sendBE("moderation/count",null,{total:b,approved:h,page:location.pathname,siteId:UserWayWidgetApp.ContextHolder.config.services.siteId})}s.updateToDoCount("SOCIAL_SENSITIVITY",b?A.filter(function(e){return!e.approved}).length:0)}function o(e,t,r){var n=new RegExp(t,"g"),i=e.textContent;e.textContent=i.replace(n,r)}function u(){s.sendPM({type:"social-sensitivity",data:{elements:A}})}function l(){s.sendPM({type:"social-sensitivity",data:{count:A.length}})}var c=UserWayWidgetApp.getLib("remediationConfig").moderator,s=UserWayWidgetApp.getLib("remediation"),d=UserWayWidgetApp.getLib("util"),f=UserWayWidgetApp.getLib("event_emitter"),p=location.pathname,A=[],g={},b=0,h=0,m={};if(s.addListener("social-sensitivity",function(e){u()}),c.enabled&&c.resources){var v=c.resources+UserWayWidgetApp.ContextHolder.config.services.siteId+"/"+d.hashString(p);d.request({method:"GET",url:v}).then(function(t){if(t&&t.response&&404!==JSON.parse(t.response).code){var r=JSON.parse(t.response);g=r.Dictionary,m=r.ContentModeration}e()},function(e){console.warn("Can't load resources.")})}else c.enabled&&e()}();var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e){return!!e&&(("function"!=typeof e.hasAttribute||!e.hasAttribute("data-uw-ai-autofix"))&&(!!(e.tagName&&["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName.toUpperCase())>-1)||"function"==typeof e.getAttribute&&"heading"===e.getAttribute("role")))}function t(){return[].slice.call(document.querySelectorAll('h1, h2, h3, h4, h5, h6, [role="heading"]'))}function r(){var e=document.querySelector('[data-uw-ai-autofix="h1"]');e&&e.parentElement.removeChild(e);var t=document.querySelectorAll('[data-uw-ai-autofix="level"]');t.length&&t.forEach(function(e){e.removeAttribute("data-uw-ai-autofix"),e.removeAttribute("aria-level"),e.removeAttribute("role")});var r=document.querySelectorAll('[data-uw-ai-autofix="hide"]');r.length&&r.forEach(function(e){e.removeAttribute("data-uw-ai-autofix"),e.removeAttribute("aria-hidden"),e.removeAttribute("role");var t=e.querySelector(".uw-ai-autofix-hide");t&&e.removeChild(t)})}function n(){setTimeout(function(){f.totalProcessed.HEADING=0,f.needToFix.HEADING=0,l(t()),window.addEventListener("popstate",function(){h=0,l(t())},!1),A.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(n,i){if(i&&(!i||i.length)){[].slice.call(i).filter(function(t){return e(t)}).length&&(r(),l(t()))}})},1500)}function i(e){if("ADD-H1"===e.type){var t=document.querySelector('[role="heading"][aria-level="1"]');t.setAttribute(f.DATA_ATTRIBUTE_NAME,"heading"),t.textContent=e.content}}function a(e,t){e.setAttribute("role","heading"),e.setAttribute("aria-level",""+t),e.setAttribute(f.DATA_ATTRIBUTE_NAME,"heading")}function o(e){function n(){r(),l(t())}var i={characterData:!1,attributes:!1,childList:!0,subtree:!1};m=new MutationObserver(n),e.forEach(function(e){m.observe(e,i)})}function u(e){var t=document.createElement("div"),r=document.querySelector("div.uwy"),n=b["ADD-H1"]&&b["ADD-H1"].$all,i=b["ADD-H1"]&&b["ADD-H1"][e],o=!!i,u=i||n,l=u&&u.correction?u.correction:document.title;return a(t,1),t.setAttribute("style","clip: rect(1px, 1px, 1px, 1px)!important;height:1px!important;width:1px!important;overflow:hidden!important;position:absolute!important;top:0!important;left:0!important;z-index:-1!important;opacity:0!important"),t.setAttribute("data-uw-ai-autofix","h1"),t.setAttribute(f.DATA_ATTRIBUTE_NAME,"heading"),t.innerText=l,r.parentNode.insertBefore(t,r.nextSibling),g.push({type:"ADD-H1",level:1,previousLevel:0,content:l,autofix:!0,approved:o}),[t,!!u]}function l(e){var t=location.pathname,r=0;g=[],m&&m.disconnect(),m=null;var n=[];if(e&&e.length){if(!("H1"===e[0].nodeName||e[0].hasAttribute("aria-level")&&"1"===e[0].getAttribute("aria-level"))){var i=u(t),l=_slicedToArray(i,2),d=l[0],A=l[1];e.unshift(d),A||r++}for(var v=void 0,E=0,y=void 0,T=0,L=e.length;T<L;T++){var _=p.xpath(e[T]);v=function(e){return/(h\d)/i.test(e.nodeName)?+e.nodeName.slice(1):+e.getAttribute("aria-level")}(e[T]);var N=p.composeElementTextRepresentation(e[T]);if(1===v&&e[T].hasAttribute("data-uw-ai-autofix"))E=1;else if(y={type:"CONTENT",level:v,content:N,approved:!0,xpath:_,autofix:!0},N&&1===v&&0!==T)e[T].setAttribute("role","presentation"),e[T].setAttribute(f.DATA_ATTRIBUTE_NAME,"heading"),e[T].setAttribute("data-uw-ai-autofix","hide");else if(N&&N.trim())if(v>E+1){var I=b.LEVEL&&b.LEVEL.$all&&b.LEVEL.$all[_]&&b.LEVEL.$all[_].correction,x=b.LEVEL&&b.LEVEL[t]&&b.LEVEL[t][_]&&b.LEVEL[t][_].correction,S=!!x&&b.LEVEL[t][_].approved,W=x||I;y.previousLevel=v,y.approved=!1;var w=E+1;y.type="LEVEL",e[T].setAttribute("data-uw-ai-autofix","level"),y.level=w,a(e[T],w),E++,W&&W===""+w||r++,y.approved=S,g.push(y),n.push(e[T])}else E=v,g.push(y);else{e[T].setAttribute("role","presentation"),e[T].setAttribute("aria-hidden",!0),e[T].setAttribute(f.DATA_ATTRIBUTE_NAME,"heading"),p.addScreenRearedElement(e[T],"Empty heading","uw-ai-autofix-hide"),y.type="HIDE",e[T].setAttribute("data-uw-ai-autofix","hide");var C=b.HIDE&&b.HIDE.$all&&b.HIDE.$all[_],U=b.HIDE&&b.HIDE[t]&&b.HIDE[t][_],O=U||C;O||r++,y.approved=!!O&&O.approved,g.push(y),n.push(e[T])}}if(h+=r,0!==r&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId&&null!=UserWayWidgetApp.ContextHolder.config.services.userId){var M=location.pathname;f.sendBE("headings/count",null,{total:h,approved:h,page:M})}g.length&&(c(),s()),n.length&&o(n)}f.updateToDoCount("HEADING",g.length?g.filter(function(e){return!e.approved}).length:0)}function c(){f.sendPM({type:"heading",data:{headings:g}})}function s(){f.sendPM({type:"heading",data:{count:g.length}})}var d=UserWayWidgetApp.getLib("remediationConfig").headings||{},f=UserWayWidgetApp.getLib("remediation"),p=UserWayWidgetApp.getLib("util"),A=UserWayWidgetApp.getLib("event_emitter"),g=[],b={},h=0,m=void 0;f.addListener("heading",function(e){e.data&&"data"===e.data.data?c():s()}),f.addListener("heading-update",function(e){e.data&&e.data.data&&i(e.data.data)}),d.resources?p.request({method:"GET",url:d.resources}).then(function(e){e&&e.response&&JSON.parse(e.response).Headings.forEach(function(e){var t=null!=e.page?e.page:"$all";b[e.type]=b[e.type]||{},b[e.type][t]=b[e.type][t]||{},e.xpath?b[e.type][t][e.xpath]=e:b[e.type][t]=e}),n()},function(e){console.warn("Can't load descriptions.")}):d.enabled&&n()}();var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(){var e=["INPUT","TEXTAREA","SELECT"],t=function(e){return!e.type||-1!==["text","password","email","tel","number","textarea","select-one"].indexOf(e.type)};setTimeout(function(){p.totalProcessed.FORM_LABEL=0,p.needToFix.FORM_LABEL=0,c(p.filterItems([].slice.call(document.querySelectorAll(e.join().toLowerCase())),m,e,t)),window.addEventListener("popstate",function(){m=[],b=[],v=0,E=0,c(p.filterItems([].slice.call(document.querySelectorAll(e.join().toLowerCase())),m,e,t))},!1),g.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){if(n&&(!n||n.length)){var i=p.filterItems([].slice.call(n),m,e,function(r){return r.tagName&&-1!==e.indexOf(r.tagName)&&t(r)});i.length&&c(i)}})},1e3)}function t(e){var t=e.xpath&&A.getByXpath(e.xpath);t&&(t.setAttribute("aria-label",e.correction),e.required?(t.setAttribute("required","true"),t.setAttribute("aria-required","true")):(t.removeAttribute("required"),t.removeAttribute("aria-required")))}function r(e){return("string"==typeof e?e:e.textContent).replace(/\r\n|\r|\n|\t/g," ").replace(/( )+/g," ").trim()}function n(e){var t=e.split(" "),r="",n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,c=document.getElementById(l),s=c.textContent;s&&(r+=s+" ")}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}function i(e){function t(e){return e?"LABEL"===e.tagName?e:t(e.parentNode):null}if(e.hasAttribute("aria-label"))return[e.getAttribute("aria-label"),null];if(e.hasAttribute("aria-labelledby"))return[n(e.getAttribute("aria-labelledby")),null];var i=t(e.parentNode);if(i){var a=r(i);return a?[a,null]:[null,i]}if(e.id){var o=function(e){for(var t=document.getElementsByTagName("LABEL"),r=0;r<t.length;r++)if(t[r].htmlFor===e)return t[r];return null}(e.id);if(o){var u=r(o);return u?[u,null]:[null,o]}}return[null,null]}function a(e){var t=e.getAttribute("class")||"";e.getAttribute("name")&&(t+=""+e.getAttribute("name"));var r=null;if(e.type){var n=e.type;if(n)switch(n){case"number":r="Number";var i=/(qua|qty|quantity)/,a=/(count|cnt)/;i.test(t)?r="Quantity":t.indexOf("age")>-1?r="Age":a.test(t)&&(r="Count");break;case"email":r="Enter email address";break;case"select-one":r="Select";/(search|srch)/.test(t)?r="Search":t.indexOf("name")>-1&&(r="Select name")}}return r}function o(e){return"fill the field"}function u(e){var t=i(e),r=_slicedToArray(t,2),n=r[0],u=r[1],l=A.hashString(A.xpath(e)),c=null,s="";if(h[l])c=h[l],s=c.correction;else if(!n){var d=e.placeholder,f=e.title,p=a(e),g=o(e);d&&d.trim()?s=d:f&&f.trim()?s=f:p?s=p:g&&(s=g),s=s.trim().toLowerCase()}var b=void 0;c&&c.hasOwnProperty("required")&&(b=c.required,b?(e.setAttribute("required","true"),e.setAttribute("aria-required","true")):(e.removeAttribute("required"),e.removeAttribute("aria-required"))),void 0===b&&(b=e.hasAttribute("required")||e.hasAttribute("aria-required")),s&&(u?A.addScreenRearedElement(u,s,"uw-ai-autofix-label"):e.setAttribute("aria-label",s));var m={originalLabel:n,correctedLabel:s,required:b};return c&&(m.loaded=c),m}function l(e){function t(e){return e.valueMissing?"Please, fill the required field.":"Please, fill in valid data."}function r(e){var r=e.target;if(r&&!r.validity.valid){if(r.getAttribute("data-uw-error"))return;r.classList.add("uw-invalid"),r.scrollIntoView({block:"center",behavior:"smooth"}),r.setAttribute("aria-invalid","true");var n="uw-error-"+y++;r.setAttribute("data-uw-error",n);var i=document.createElement("span");i.id=n,i.className="uw-error",i.innerText=t(r.validity),r.parentNode.insertBefore(i,r.nextSibling);var a=r.getAttribute("aria-describedby");r.setAttribute("aria-describedby",a+" "+n)}}function n(e){var r=e.target;if(r){var n=r.getAttribute("data-uw-error");if(!n)return;var i=document.getElementById(n);if(r.validity.valid){i&&i.parentNode.removeChild(i);var a=r.getAttribute("aria-describedby"),o=a.split(" ").filter(function(e){return e!==n}).join(" ");o?r.setAttribute("aria-describedby",o):r.removeAttribute("aria-describedby"),r.classList.remove("uw-invalid"),r.removeAttribute("aria-invalid"),r.removeAttribute("data-uw-error")}else i&&(i.innerText=t(r.validity))}}e&&"function"==typeof e.getAttribute&&!e.getAttribute("data-uw-validation")&&(e.setAttribute("data-uw-validation","true"),e.addEventListener("invalid",r),e.addEventListener("change",r),e.addEventListener("input",n))}function c(e){var t=0;if(e&&e.length){for(var r=0,n=e.length;r<n;r++){l(e[r]);var i=u(e[r]),a=i.originalLabel,o=i.correctedLabel,c=A.xpath(e[r]),f=e[r].hasAttribute("type")?e[r].getAttribute("type"):"text";"TEXTAREA"===e[r].tagName&&(f="textarea"),"SELECT"===e[r].tagName&&(f="select");var g={type:f,xpath:c,xpathHash:A.hashString(c),label:a,required:i.required,correction:o,approved:!!a||!!i.loaded};a||(t++,v++,e[r].setAttribute(p.DATA_ATTRIBUTE_NAME,"form"),i.loaded&&E++),b.push(g)}0!==t&&UserWayWidgetApp.ContextHolder.config.services.siteId&&p.sendBE("forms/count",null,{total:v,approved:E,page:location.pathname,siteId:UserWayWidgetApp.ContextHolder.config.services.siteId}),b.length&&(s(),d())}p.updateToDoCount("FORM_LABEL",b.length?b.filter(function(e){return!e.approved}).length:0)}function s(){p.sendPM({type:"form-label",data:{elements:b}})}function d(){p.sendPM({type:"form-label",data:{count:b.length}})}var f=UserWayWidgetApp.getLib("remediationConfig").forms||{},p=UserWayWidgetApp.getLib("remediation"),A=UserWayWidgetApp.getLib("util"),g=UserWayWidgetApp.getLib("event_emitter"),b=[],h={},m=[],v=0,E=0,y=0;if(p.addListener("form-label",function(e){e.data&&"data"===e.data.data?s():d()}),p.addListener("form-label-update",function(e){e.data&&e.data.data&&t(e.data.data)}),f.resources){var T=f.resources+UserWayWidgetApp.ContextHolder.config.services.siteId+"/"+A.hashString(location.pathname);A.request({method:"GET",url:T}).then(function(t){t&&t.response&&JSON.parse(t.response).FormViolations.forEach(function(e){h[e.xpath]=e}),e()},function(e){console.warn("Can't load descriptions.")})}else f.enabled&&e()}(),function(){function e(e){return e.filter(function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE||"A"!==e.nodeName)return!1;var t=e.href;return!(!t||!/^http/.test(t))&&(!(!e.hasAttribute("target")||"_self"===e.getAttribute("target"))&&(-1===c.indexOf(e)&&(c.push(e),!0)))})}function t(e){var t=0;e&&e.length&&(e.forEach(function(e){var n=r(e);if(n&&-1===n.indexOf("new window")&&-1===n.indexOf("new tab")){var i="_blank"===e.getAttribute("target")?" - opens in new tab":" - opens in new window",o=void 0;o=e.hasAttribute("aria-label")?e.getAttribute("aria-label"):n,e.setAttribute("aria-label",o+i),e.setAttribute(a.DATA_ATTRIBUTE_NAME,"redirect"),t++}}),l+=t,0!==t&&(a.totalProcessed.EXTERNAL_LINK_TARGETS=l),0!==t&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId&&a.sendBE("external-links/count",null,{total:l,page:s})),a.updateToDoCount("EXTERNAL_LINK_TARGETS",l||0),i()}function r(e){var t=e.hasAttribute("aria-label")?e.getAttribute("aria-label"):null,r=e.hasAttribute("aria-labelledby")?e.getAttribute("aria-labelledby"):null;return t||(r?o.getLabelledByElements(r):o.composeElementTextRepresentation(e))}function n(e){o.postMessage({action:"remediation",type:"redirect-link",data:e})}function i(){n({count:l})}var a=(UserWayWidgetApp.getLib("remediationConfig").redirect,UserWayWidgetApp.getLib("remediation")),o=UserWayWidgetApp.getLib("util"),u=UserWayWidgetApp.getLib("event_emitter"),l=0,c=[],s=location.pathname;a.addListener("redirect-link",function(){i()}),function(){setTimeout(function(){a.totalProcessed.EXTERNAL_LINK_TARGETS=0,a.needToFix.EXTERNAL_LINK_TARGETS=0,t(e([].slice.call(document.querySelectorAll("a[href]")))),window.addEventListener("popstate",function(){l=0,t(e([].slice.call(document.querySelectorAll("a[href]"))))},!1),u.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){if(n&&(!n||n.length)){var i=e([].slice.call(n));1===i.length&&i[0].id&&i[0].id.indexOf("powered_by_pixle")>-1||i&&i.length&&t(i)}})},1500)}()}(),function(){function e(e){return e.filter(function(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE||"VIDEO"!==e.nodeName&&"IFRAME"!==e.nodeName)&&(-1===l.indexOf(e)&&(l.push(e),!0))})}function t(e){var t=0;if(e.forEach(function(e){if("IFRAME"===e.nodeName){var r=e.getAttribute("src");r&&(r.toLowerCase().indexOf("youtube.com")||r.toLowerCase().indexOf("vimeo.com"))&&(r.indexOf("autoplay=1")>-1||r.indexOf("autoplay=true"))&&(r.indexOf("mute=1")>-1||r.indexOf("mute=true")>-1)&&(e.setAttribute(i.DATA_ATTRIBUTE_NAME,"autoplay-video"),t++)}else"VIDEO"===e.nodeName&&e.hasAttribute("autoplay")&&e.hasAttribute("muted")&&(e.setAttribute(i.DATA_ATTRIBUTE_NAME,"autoplay-video"),t++)}),u+=t,i.totalProcessed.AUTO_PLAY_VIDEO=u,0!==t&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId){var r=location.pathname;i.sendBE("autoplay-video/count",null,{total:u,page:r})}i.updateToDoCount("AUTO_PLAY_VIDEO",u||0),n()}function r(e){a.postMessage({action:"remediation",type:"autoplay-video",data:e})}function n(){r({count:u})}var i=(UserWayWidgetApp.getLib("remediationConfig").redirect,UserWayWidgetApp.getLib("remediation")),a=UserWayWidgetApp.getLib("util"),o=UserWayWidgetApp.getLib("event_emitter"),u=0,l=[];i.addListener("autoplay-video",function(){n()}),function(){setTimeout(function(){i.totalProcessed.AUTO_PLAY_VIDEO=0,t(e([].slice.call(document.querySelectorAll("iframe[src], video")))),window.addEventListener("popstate",function(){u=0,t(e([].slice.call(document.querySelectorAll("iframe[src], video"))))},!1),o.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){if(n&&(!n||n.length)){var i=e([].slice.call(n));i&&i.length&&t(i)}})},1500)}()}(),function(){function e(e){return!!["A","INPUT","BUTTON","SELECT","TEXTAREA"].includes(e.tagName)||!!e.hasAttribute("tabindex")}function t(e){var t=e.getAttribute("aria-label")||e.textContent;return t&&t.trim()?t.trim().toLowerCase():null}function r(){var r=document.querySelector("main"),n=document.querySelector('[role="main"]'),i=document.querySelector("h1"),a=document.querySelectorAll("h2, h3, h4, h5, h6"),o=a.length?a[0]:null,u=r||n||i||o;if(!u)return!0;var l=document.querySelectorAll("body *"),c=0,s=!0,d=!1,f=void 0;try{for(var p,A=l[Symbol.iterator]();!(s=(p=A.next()).done);s=!0){var g=p.value;if(g===u)break;if(!g.id||"userwayAccessibilityIcon"!==g.id){if(e(g)&&++c<3){var b=t(g)
;if(b&&(b.toLowerCase().indexOf("skip")>-1||b.toLowerCase().indexOf("pass")>-1||b.toLowerCase().indexOf("jump")>-1))return!0}if(c>5)break}}}catch(e){d=!0,f=e}finally{try{!s&&A.return&&A.return()}finally{if(d)throw f}}return c>0&&c<=5}function n(){var e=location.pathname;-1===l.indexOf(e)&&r()?(c=1,document.querySelector("body").setAttribute(o.DATA_ATTRIBUTE_NAME,"skip-navigation")):c=0,o.totalProcessed.SKIP_NAVIGATION_LINK=c,0!==c&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId&&(l.push(e),o.sendBE("skip-navigation/count",null,{total:c,page:e})),o.updateToDoCount("SKIP_NAVIGATION_LINK",c||0),a()}function i(e){u.postMessage({action:"remediation",type:"skip-navigation",data:e})}function a(){i({count:c})}var o=UserWayWidgetApp.getLib("remediation"),u=UserWayWidgetApp.getLib("util"),l=[],c=0;o.addListener("skip-navigation",function(){a()}),function(){setTimeout(function(){o.totalProcessed.SKIP_NAVIGATION_LINK=0,window.addEventListener("popstate",n,!1),n()},1500)}()}(),function(){function e(e){var t=0;if(e.forEach(function(e){e.setAttribute("role","presentation"),e.setAttribute(i.DATA_ATTRIBUTE_NAME,"screen-reader"),t++}),o+=t,i.totalProcessed.SCREEN_READER_BASIC=o,0!==t&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId){var r=location.pathname;i.sendBE("screen-reader/count",null,{total:o,page:r})}i.updateToDoCount("SCREEN_READER_BASIC",o||0),n()}function t(e){return e.filter(function(e){return!!["BR","HR"].includes(e.tagName)&&(!e.getAttribute("role")&&e)})}function r(e){a.postMessage({action:"remediation",type:"screen-reader",data:e})}function n(){r({count:o})}var i=UserWayWidgetApp.getLib("remediation"),a=UserWayWidgetApp.getLib("util"),o=0,u=UserWayWidgetApp.getLib("event_emitter");i.addListener("screen-reader",function(){n()}),function(){setTimeout(function(){i.totalProcessed.SCREEN_READER_BASIC=0,e(t([].slice.call(document.querySelectorAll("br,hr")))),window.addEventListener("popstate",function(){o=0,e(t([].slice.call(document.querySelectorAll("br,hr"))))},!1),u.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){!n||n&&!n.length||e(t([].slice.call(n)))})},1500)}()}(),function(){function e(e){n.postMessage({action:"remediation",type:"autofocus",data:e})}function t(){e({count:i})}var r=UserWayWidgetApp.getLib("remediation"),n=(UserWayWidgetApp.getLib("remediationConfig").autofocus,UserWayWidgetApp.getLib("util")),i=0;r.addListener("autofocus",function(){t()})}(),function(){function e(e){var t=0;if(e.forEach(function(e){e.setAttribute(i.DATA_ATTRIBUTE_NAME,"marquee"),u.push(e),t++}),o+=t,i.totalProcessed.MARQUEE=o,0!==t&&null!=UserWayWidgetApp.ContextHolder.config.services.siteId){var r=location.pathname;i.sendBE("marquee/count",null,{total:o,page:r})}i.updateToDoCount("MARQUEE",o||0),n()}function t(e){return e.filter(function(e){return"MARQUEE"===e.tagName&&(-1===u.indexOf(e)&&e)})}function r(e){a.postMessage({action:"remediation",type:"marquee",data:e})}function n(){r({count:o})}var i=UserWayWidgetApp.getLib("remediation"),a=UserWayWidgetApp.getLib("util"),o=0,u=[],l=UserWayWidgetApp.getLib("event_emitter");i.addListener("marquee",function(){n()}),function(){setTimeout(function(){i.totalProcessed.MARQUEE=0,e(t([].slice.call(document.querySelectorAll("marquee")))),window.addEventListener("popstate",function(){o=0,e(t([].slice.call(document.querySelectorAll("marquee"))))},!1),l.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){!n||n&&!n.length||e(t([].slice.call(n)))})},1500)}()}(),function(){function e(e){n.postMessage({action:"remediation",type:"lang",data:e})}function t(){e({count:i})}var r=UserWayWidgetApp.getLib("remediation"),n=UserWayWidgetApp.getLib("util"),i=(UserWayWidgetApp.getLib("event_emitter"),0);r.addListener("lang",function(){t()})}(),function(){function e(){return r([].slice.call(document.querySelectorAll('a, [role="link"], button, [role="button"], input[type="button"], input[type="submit"], input[type="reset"]')))}function t(){n(e())}function r(e){return e.filter(function(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&!o(e)})}function n(e){e.forEach(function(e){if(!i(e)){if(!Array.prototype.slice.call(e.childNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).find(function(t){return i(e,t)})&&e.getAttribute("href")&&0===e.href.indexOf("http"))return a(e,e.href.split("//")[1].split("/")[0]);("a"===e.tagName.toLowerCase()||"function"===e.getAttribute&&"link"===e.getAttribute("role"))&&""===e.getAttribute("href")&&e.setAttribute("href","#");var t=e.getAttribute("role");if("BUTTON"===e.tagName.toUpperCase()||t&&"button"===t)return a(e,"button");if("INPUT"===e.tagName.toUpperCase()&&"submit"===e.type)return a(e,"submit");if("INPUT"===e.tagName.toUpperCase()&&"reset"===e.type)return a(e,"reset");a(e,"Empty control")}})}function i(e,t){t=t||e;var r=A.find(function(e){return t.href&&-1!==t.href.indexOf(e)});if(r)return a(e,r);var n=Array.prototype.slice.call(t.classList).map(function(e){return e.toLowerCase()}),i=A.find(function(e){return n.find(function(t){return-1!==t.indexOf(e)})&&e});if(i||b.find(function(e){return n.find(function(t){var r=e.re.test(t)&&t.replace(e.re,e.replacer);if(r)return i=r,!0})}),i)return a(e,i);var o=/^url\("(.+)"\)$/.exec(window.getComputedStyle(t).backgroundImage);o=o&&o.length>1?o[1]:"";var u=A.find(function(e){return-1!==o.indexOf(e)});if(u)return a(e,u);var l=g.find(function(e){return n.find(function(t){return-1!==t.indexOf(e)})&&e});return!!l&&a(e,l)}function a(e,t){return e.setAttribute("aria-label",t),e.setAttribute(s.DATA_ATTRIBUTE_NAME,"empty-link"),e.querySelector("img")&&d.addScreenRearedElement(e,t),!0}function o(e){var t=e.getAttribute("aria-label"),r=e.getAttribute("aria-describedby");if(r&&(t+=l(r)),t&&t.trim())return t.trim().toLowerCase();var n=e.getAttribute("aria-labelledby");if(n&&(t+=l(n)),t&&t.trim())return t.trim().toLowerCase();if((t=e.textContent?e.textContent:null)&&t.trim())return t.trim().toLowerCase();var i=e.querySelector('img, *[role="img"]');return i&&(t=u(i))&&t.trim()?t.trim().toLowerCase():null}function u(e){var t=e.alt;if(t&&t.trim())return t.trim();var r=e.getAttribute("aria-label");if(r&&r.trim())return r.trim();var n=e.getAttribute("aria-describedby");if(n){var i=l(n);if(i)return i}var a=e.getAttribute("aria-labelledby");if(a){var o=l(a);if(o)return o}return null}function l(e){var t=e.split(" "),r="";return t.forEach(function(e){e=e.trim();var t=document.getElementById(e);r+=t&&t.textContent?t.textContent:""}),r}var c=(UserWayWidgetApp.getLib("remediationConfig").emptyLinks,UserWayWidgetApp.getLib("remediationConfig").alt||{}),s=UserWayWidgetApp.getLib("remediation"),d=UserWayWidgetApp.getLib("util"),f=UserWayWidgetApp.getLib("event_emitter"),p=0,A=["Facebook","YouTube","WhatsApp","Instagram","Twitter","Reddit","LinkedIn","Viber","Pinterest","Telegram"].map(function(e){return e.toLowerCase()}),g=["prev","next","scroll","top","bottom","expand","collapse","click","open","close"],b=[{re:/(fa-)(.+)/,replacer:"$2"}];s.addListener("empty-link",function(e){e.data&&e.data.data}),function(){function i(){window.addEventListener("popstate",function(){p=0,n(e())},!1),f.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,t){if(t&&(!t||t.length)){t=t.filter(function(e){if("function"==typeof e.getAttribute){var t=e.getAttribute("role"),r=t&&["link","button"].indexOf(t)>-1;return!!(["A","BUTTON"].indexOf(e.tagName.toUpperCase())>-1||r)||"INPUT"===e.tagName.toUpperCase()&&e.type&&["button","submit","reset"].indexOf(e.type)>-1}});var i=r([].slice.call(t));i.length&&n(i)}}),s.totalProcessed.EMPT_LINK=0,s.needToFix.EMPT_LINK=0,t(),window.document.removeEventListener(d.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED,i)}c.enabled&&!d.firedEvents[d.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED]?window.document.addEventListener(d.LIFE_CYCLE_EVENT.REMEDIATION_IMAGE_ALT_FINISHED,i):setTimeout(i,2e3),window.document.addEventListener(d.PROCESSING_EVENT.REMEDIATION_FORCE_RERUN,t)}()}(),function(){function e(e){var t=["a"].concat(s,_toConsumableArray(s.map(function(e){return'[role="'+e+'"]'}))).join(",");return e.querySelectorAll(t).length>0}function t(t){return t.filter(function(t){if(t.classList&&t.classList.contains("betterbot_botInfoText"))return t.setAttribute(c.BETTERBOT_CHAT,"true"),!0;if("function"==typeof t.getAttribute&&s.indexOf(t.getAttribute("role"))>-1&&!e(t))return t.setAttribute(c.HAS_ROLE_NO_TABINDEX,"true"),!0;var r=!1,n=!1;if("function"==typeof t.hasAttribute){var i=!0,a=!1,o=void 0;try{for(var u,l=d[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var p=u.value;if(t.hasAttribute(p)){n=!1,r=!0;var A=!0,g=!1,b=void 0;try{for(var h,m=f[Symbol.iterator]();!(A=(h=m.next()).done);A=!0){var v=h.value;t.hasAttribute(v)&&(n=!0)}}catch(e){g=!0,b=e}finally{try{!A&&m.return&&m.return()}finally{if(g)throw b}}}}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}}return!(!r||n)&&(t.setAttribute(c.HAS_ONCLICK_NO_ONKEYPRESS,"true"),!0)})}function r(e){var t=0;e.forEach(function(e){e.hasAttribute(c.BETTERBOT_CHAT)&&"kb-betterbot"!==e.getAttribute(a.DATA_ATTRIBUTE_NAME)&&(e.setAttribute("tabindex","0"),e.setAttribute("role","button"),e.setAttribute("aria-label","Start chat with us"),e.setAttribute(a.DATA_ATTRIBUTE_NAME,"kb-betterbot"),e.addEventListener("keypress",function(t){"Enter"!==t.code&&13!==t.keyCode&&"Space"!==t.code&&32!==t.keyCode||(t.preventDefault(),e.click())}),t++),e.hasAttribute(c.HAS_ROLE_NO_TABINDEX)&&"kb-role-tb"!==e.getAttribute(a.DATA_ATTRIBUTE_NAME)&&(e.setAttribute("tabindex","0"),e.setAttribute(a.DATA_ATTRIBUTE_NAME,"kb-role-tb")),e.hasAttribute(c.HAS_ONCLICK_NO_ONKEYPRESS)&&"kb-onclick"!==e.getAttribute(a.DATA_ATTRIBUTE_NAME)&&(e.addEventListener("keypress",function(t){"Enter"!==t.code&&"Space"!==t.code||e.click()}),e.setAttribute(a.DATA_ATTRIBUTE_NAME,"kb-onclick"))}),l+=t,t&&console.log("kb-support helper. Fixed:",l),i()}function n(e){o.postMessage({action:"remediation",type:"kb-support",data:e})}function i(){n({count:l})}var a=UserWayWidgetApp.getLib("remediation"),o=UserWayWidgetApp.getLib("util"),u=UserWayWidgetApp.getLib("event_emitter"),l=0,c={BETTERBOT_CHAT:"uw-ai-keynav-fix-betterbot",HAS_ROLE_NO_TABINDEX:"uw-ai-keynav-fix-role",HAS_ONCLICK_NO_ONKEYPRESS:"uw-ai-keynav-fix-click"},s=["link","button","menuitem","checkbox"],d=["onclick"],f=["onkeydown","onkeyup","onkeypress"];a.addListener("kb-support",function(){i()}),setTimeout(function(){r(t([].slice.call(document.querySelectorAll("body *")))),window.addEventListener("popstate",function(){l=0,r(t([].slice.call(document.querySelectorAll("body *"))))},!1),u.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,n){!n||n&&!n.length||r(t(n))})},1500)}(),function(){function e(){var e=A.contrastIssues;A.contrastIssues=[],e.forEach(function(e){var t=e.element,r=e.contrastData,n=r[0],i=(r[1],r[2],e.isLightFg),a=e.isLightBg;1===n?(t.setAttribute("data-uw-contrast-bg-"+(i?"black":"white"),""),t.style.setProperty("background-color",i?"black":"white","important")):(t.setAttribute("data-uw-contrast-fg-"+(a?"black":"white"),""),t.style.setProperty("color",a?"black":"white","important"))})}function t(e){var t=!1;if(!e)return!1;for(var r=e.childNodes,n=0;n<r.length;n++)if(3===r[n].nodeType&&r[n].nodeValue.length>0&&-1===r[n].nodeValue.search(/^\s+$/i)){t=!0;break}return"INPUT"===e.tagName&&e.value.length>0&&["text","button","email","number","password","reset","submit","tel","url","button"].includes(e.type)&&(t=!0),"SELECT"===e.tagName&&e.options.length>0&&(t=!0),t}function r(e,a,o,u){e||(e=u||document.body,a=n(e,"fg"),"0"===(o=n(e,"bg"))[3]&&(o=["255","255","255","1","rgb(255, 255, 255)"]),t(e)&&i(e,a,o));for(var l=0;e.children&&l<e.children.length;l++)if(child=e.children[l],"SVG"!==child.tagName.toUpperCase()&&"SCRIPT"!==child.tagName&&"IMG"!==child.tagName&&"STYLE"!==child.tagName)if(0===child.offsetWidth||0===child.offsetHeight)child.childNodes&&r(child,a,o);else{var c=n(child,"fg"),s=n(child,"bg");"0"===c[3]&&(c=a),"0"===s[3]&&(s=o),t(child)&&1===parseFloat(s[3])?c!==a||s!==o?(i(child,c,s),r(child,c,s)):r(child,c,s):child.childNodes&&r(child,c,s)}}function n(e,t){var r=getComputedStyle(e);if("fg"===t){var n=r.color.replace(/[^\d,.]/g,"").split(",");return n[3]||(n[3]="1"),n[4]=r.color,n}var i=r.backgroundColor.replace(/[^\d,.]/g,"").split(",");return i[3]||(i[3]="1"),(r.background.indexOf("linear-gradient")>-1||r.opacity<1||"none"!==r.filter)&&(i[3]=".1"),i[4]=r.backgroundColor,i}function i(e,t,r){var n={},i=new g(t),u=new g(r),l=i.contrast(u),c=l.ratio;if(c){var s=c+":1";n.ratio=Number(c),n.contrastratio=s;var d=window.getComputedStyle(e),f=d.getPropertyValue("font-size"),p=d.getPropertyValue("font-weight"),b=72*Number(f.substring(0,f.length-2))/96,h=b>=18||b>=14&&("bold"===p||parseInt(p)>=700),m=void 0;if(c>=4.5)return;if(c>=3&&h)return;m=h?3:4.5;var v=o(t[4]),E=o(r[4]),y=[a(n.ratio),v,E,!1];A.contrastIssues.push({contrastData:y,isLightFg:i.isLight(),isLightBg:u.isLight(),expectedRatio:m,element:e})}}function a(e){if(-1!==(e=String(e)).indexOf(".")){var t=e.split(".");return 1===t.length?Number(e):Number(t[0]+"."+t[1].charAt(0)+t[1].charAt(1))}return Number(e)}function o(e){var t=e.indexOf(",")>-1?",":" ",r=(+(e=e.substr(4).split(")")[0].split(t))[0]).toString(16),n=(+e[1]).toString(16),i=(+e[2]).toString(16);return 1===r.length&&(r="0"+r),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),"#"+r+n+i}function u(){document.querySelectorAll(v).forEach(function(e){e.parentElement.removeChild(e)})}function l(){document.querySelectorAll(".slick-dots").forEach(function(e){e.parentElement.removeChild(e)})}function c(e){e.forEach(function(e){if(e&&e.getAttribute){["aria-labelledby","aria-describedby"].forEach(function(t){var r=e.getAttribute(t);if(r){var n=!1;r.split(" ").forEach(function(e){document.getElementById(e)&&(n=!0)}),n||(e.removeAttribute(t),e.setAttribute("data-"+t,r))}})}})}function s(e){e.forEach(function(e){if(e&&e.getAttribute&&e.hasAttribute("role")){var t=e.getAttribute("role");if(["menu","menubar"].includes(t)){0===e.querySelectorAll('[role="menuitem"],[role="menuitemcheckbox"],[role="menuitemradio"]').length&&(e.removeAttribute("role"),e.setAttribute("data-role",t))}}})}function d(){var e=document.getElementById("skiplinks");if(e){e.querySelectorAll("a[href]").forEach(function(e){var t=e.href&&-1!==e.href.indexOf("#")&&e.href.split("#").pop();if(t){document.getElementById(t)||e.removeAttribute("href")}})}}function f(){document.querySelectorAll("label").forEach(function(e){0===e.innerHTML.trim().length&&e.parentNode.removeChild(e)})}var p=UserWayWidgetApp.getLib("util"),A={};A.contrastIssues=[];var g=function(e){if("transparent"===e)e=[0,0,0,0];else if("string"==typeof e){var t=e;if(!(e=t.match(/rgba?\(([\d.]+), ([\d.]+), ([\d.]+)(?:, ([\d.]+))?\)/)))throw new Error("Invalid string: "+t);e.shift()}void 0===e[3]&&(e[3]=1),e=e.map(function(e){return Math.round1(e,3)}),this.rgba=e};g.prototype={get rgb(){return this.rgba.slice(0,3)},get alpha(){return this.rgba[3]},set alpha(e){this.rgba[3]=e},get luminance(){for(var e=this.rgba.slice(),t=0;t<3;t++){var r=e[t];r=(r/=255)<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),e[t]=r}return.2126*e[0]+.7152*e[1]+.0722*e[2]},clone:function(){return new g(this.rgba)},isLight:function(){return 1-(.299*this.rgba[0]+.587*this.rgba[1]+.114*this.rgba[2])/255<.7},overlayOn:function(e){var t=this.clone(),r=this.alpha;if(r>=1)return t;for(var n=0;n<3;n++)t.rgba[n]=t.rgba[n]*r+e.rgba[n]*e.rgba[3]*(1-r);return t.rgba[3]=r+e.rgba[3]*(1-r),t},contrast:function(e){if(this.alpha>=1){e.alpha<1&&(e=e.overlayOn(this));var t=this.luminance+.05,r=e.luminance+.05,n=t/r;return r>t&&(n=1/n),{ratio:n}}return!1}},Math.round1=function(){var e=Math.round;return function(t,r){r=+r||0;var n=Math.pow(10,r);return e(t*n)/n}}();var b="wave.min.js",h="wave_sidebar_container",m="wave5_iconbox",v=".wave5icon,.wave5text";!function(){c(document.querySelectorAll("[aria-labelledby],[aria-describedby]")),s(document.querySelectorAll('[role="menu"],[role="menubar"]'));var t=new MutationObserver(function(e){e.forEach(function(e){c([e.target])})}),n=new MutationObserver(function(t){t.forEach(function(t){r(void 0,void 0,void 0,t.target),e()})});new MutationObserver(function(i,a){i.forEach(function(i){var o=i.addedNodes;c(o),s(o),o.forEach(function(i){if(1===i.nodeType)if("SCRIPT"===i.tagName){var o=i.src||"";o.indexOf(b)}else i.id===h?i.style.visibility="hidden":i.id===m&&(a.disconnect(),u(),l(),d(),f(),r(),e(),n.observe(document.documentElement,{subtree:!0,attributes:!0,attributeFilter:["class","style"]}),p.fireForceRemediationRerunEvent(),t.observe(document.documentElement,{attributes:!0,subtree:!0,attributeFilter:["aria-labelledby","aria-describedby"]}),c(document.querySelectorAll("[aria-labelledby],[aria-describedby]")),setTimeout(function(){window.wave&&window.wave.fn.newReport().then(function(e){var t=document.getElementById(h);t&&(t.style.visibility="visible")})},500))})})}).observe(document.documentElement,{childList:!0,subtree:!0})}()}(),function(){function e(e,t){function r(e,t){return("label"===t.nodeName?[t]:[]).concat(e===t?r(t.parentElement):[])}var n=[];return t||(t=document.body),e.forEach(function(e){if(e&&"function"==typeof e.hasAttribute){var i=e.hasAttribute("id")&&e.getAttribute("id"),a=e.hasAttribute("aria-labelledby")&&e.getAttribute("aria-labelledby"),o=i?t.querySelectorAll('label[for="'+i+'"]'):[],u=a?t.querySelectorAll('label[id="'+a+'"]'):[],l=r(t,e);if(!(o.length+u.length+l.length<=1)){if(o.length<=1&&u.length<=1&&l.length<=1){var c=[o,u,l].filter(function(e){return e});if(2===c.length&&c[0]===c[1]||3===c.length&&c[0]===c[1]===c[2])return}var s={el:e};o.length&&(s.forId=i,s.labelsForId=o),u.length&&(s.labelledBy=a,s.labelsLabelledBy=u),l.length&&(s.perentLabels=l),n.push(s)}}}),n}function t(e){e.forEach(function(e){if(!e.forId&&!e.labelledBy||e.perentLabels.length,!e.forId&&!e.perentLabels){var t=document.querySelectorAll(a).filter(function(t){return t.hasAttribute("aria-labelledby")&&t.getAttribute("aria-labelledby")===e.labelledBy}).forEach(function(t,n){var i=r();t.setAttribute("aria-labelledby",i),e.labelsLabelledBy[n]&&e.labelsLabelledBy[n].setAttribute("id",i)});e.labelsLabelledBy.slice(t.length).forEach(function(e){return e.removeAttribute("id")})}if(!e.labelledBy&&!e.perentLabels){var n=document.querySelectorAll(a).filter(function(t){return t.hasAttribute("id")&&t.getAttribute("id")===e.forId}).slice(1).forEach(function(t,n){var i=r();t.setAttribute("aria-labelledby",i),e.labelsForId[n]&&e.labelsForId[n].removeAttribute("for")||e.labelsForId[n].setAttribute("id",i)});e.labelsForId.slice(n.length).forEach(function(e){return e.removeAttribute("for")})}})}function r(){return("userway_id_"+Math.random()).slice(2)}var n=(UserWayWidgetApp.getLib("remediationConfig").form_label,UserWayWidgetApp.getLib("remediation")),i=(UserWayWidgetApp.getLib("util"),UserWayWidgetApp.getLib("event_emitter")),a="input:not([type=image]):not([type=submit]):not([type=reset]):not([type=button]):not([type=hidden]), select, textarea";!function(){n.totalProcessed.MISSING_ALT=0,n.needToFix.MISSING_ALT=0,t(e([].slice.call(document.querySelectorAll(a)))),window.addEventListener("popstate",function(){t(e([].slice.call(document.querySelectorAll(a))))},!1),i.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(r,n){if(n&&(!n||n.length)){var i=[].concat(n.map(function(e){return e.parentElement?e.parentElement.querySelectorAll(a):[]}));i.length&&t(e(i))}})}()}(),function(){function e(e){for(var t=e.parentNode,r=e.firstChild;r;)t.insertBefore(r,e),r=e.firstChild;t.removeChild(e)}function t(t){[].slice.call(document.querySelectorAll("a[href]")).filter(function(e){return e.href&&r(e)===t}).forEach(function(t){e(t)})}function r(e){var t=e.href&&e.href.trim();return t.length>0?t=t.split("?")[0].split("#")[0]:""}function n(e){try{var t=e.hostname;return d.indexOf(t)>-1}catch(e){return!1}}function i(i){return i.filter(function(i){if(!i||i.nodeType!==Node.ELEMENT_NODE||"A"!==i.nodeName)return!1;var a=r(i);return a?!/(^tel:|^mailto:)/.test(a)&&(!n(i)&&(c.has(a)?(s.has(a)&&!s.get(a)&&t(a),!1):(c.add(a),!0))):void e(i)})}function a(n){var i=[];n&&n.length&&n.forEach(function(n){var a=r(n);if(!a)return void e(n);s.has(a)&&!s.get(a)?t(a):i.push(n)}),u.sendBE("broken-links",null,{page:location.pathname,fullPage:location.href,links:i.map(function(e){return r(e)}),fullLinks:i.map(function(e){return e.href})},!0).then(function(e){var n=e&&e.response&&JSON.parse(e.response);n&&n.statuses&&i.forEach(function(e,i){var a=r(e);s.set(a,n.statuses[i]),n.statuses[i]||t(a)})})}var o=UserWayWidgetApp.getLib("remediationConfig").brokenLinks||{},u=UserWayWidgetApp.getLib("remediation"),l=UserWayWidgetApp.getLib("event_emitter"),c=new Set,s=new Map,d=["localhost","userway.dev"];o.enabled&&!o.quotaExceeded&&function(){setTimeout(function(){u.totalProcessed.BROKEN_LINK=0,u.needToFix.BROKEN_LINK=0,a(i([].slice.call(document.querySelectorAll("a[href]")))),window.addEventListener("popstate",function(){a(i([].slice.call(document.querySelectorAll("a[href]"))))},!1),l.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(e,t){if(t&&(!t||t.length)){var r=i([].slice.call(t));r.length&&a(r)}})},1e3)}()}(),function(){function e(e){var t,r,n=null!=e?(t=[]).concat.apply(t,_toConsumableArray(e.map(function(e){return e&&"function"==typeof e.querySelectorAll?[].slice.call(e.querySelectorAll(".flatpickr-calendar *")):[]}))):[].slice.call(document.querySelectorAll(".flatpickr-calendar *"));n.filter(function(e){return"function"==typeof e.getAttribute&&e.getAttribute("tabindex")<0}).forEach(function(e){return e.setAttribute("tabindex","0")}),n=null!=e?(r=[]).concat.apply(r,_toConsumableArray(e.map(function(e){return e&&"function"==typeof e.querySelectorAll?[].slice.call(e.querySelectorAll(".flatpickr-input")):[]}))):[].slice.call(document.querySelectorAll(".flatpickr-input")),n.forEach(function(e){!e.getAttribute("aria-label")&&e.getAttribute("placeholder")&&e.setAttribute("aria-label",e.getAttribute("placeholder"))})}var t=UserWayWidgetApp.getLib("event_emitter");!function(){setTimeout(function(){e(),window.addEventListener("popstate",function(){e()},!1),t.on("USERWAY_TARGET_SITE_DOM_CHANGED_EVENT",function(t,r){var n=[];[].slice.call(r).forEach(function(e){var t="BODY"===e.tagName?e.parentElement:e;null!=t&&-1===n.indexOf(t)&&n.push(t)}),e(n)})},1e3)}()}();