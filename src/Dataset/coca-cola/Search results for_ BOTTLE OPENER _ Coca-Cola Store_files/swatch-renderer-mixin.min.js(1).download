define(['jquery','underscore'],function($,_){'use strict';return function(widget){$.widget('mage.SwatchRenderer',widget,{_init:function(){const $widget=this;this.table=$('table#names');this.isSixPackPdp=$('body').hasClass('catalog-product-view-personalized-bottle-six-pack');this._super();if(this.isSixPackPdp){this.table.find('tfoot a').on({click:$.proxy(function(e){$widget._UpdatePrice();},this)});$('a.remove-name').live({click:$.proxy(function(e){$widget._UpdatePrice();},this)});}},_getNewPrices:function(){let newPrices=this._super(),qty,priceBox,discount;if(this.isSixPackPdp){qty=this.table.find('tbody .input-text').length;if(qty>0){priceBox=$('.product-info-main .price-box');discount=Math.floor(qty/6)*5;if(!_.isEmpty(newPrices.basePrice)){newPrices.finalPrice.amount=(newPrices.basePrice.amount*qty)-discount;newPrices.oldPrice.amount=newPrices.basePrice.amount*qty;}
priceBox.css('visibility','visible');}}
return newPrices;},});return $.mage.SwatchRenderer;}});