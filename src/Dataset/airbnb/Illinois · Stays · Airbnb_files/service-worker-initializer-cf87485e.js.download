/*! For license information please see service-worker-initializer-f46f1e13.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([["be95"],{"+0oR":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r,i=n("ilXw"),o=n.n(i),a=n("kfzt");function c(e){var t=s();e(t),t.createInstances()}function s(){if(!r){r=new a.a;var e=o.a.get("injectorInstances");Array.isArray(e)&&r.provideHydrationInstances(e)}return r}},"0P7S":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("Qyje"),i=n.n(r),o=n("yCVm");function a(e){var t=e.params,n=e.pathname,r=void 0===n?window.location.pathname:n,a=e.search,c=void 0===a?window.location.search:a;if(!t||0===Object.keys(t).length)return r+c;var s=Object.assign({},Object(o.a)(c),t),u=i.a.stringify(s,{arrayFormat:"brackets"});return u.length>0?"".concat(r,"?").concat(u):r}},"16Al":function(e,t,n){"use strict";var r=n("WbBG");function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1Fup":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return v}));var r=n("xk4V"),i=n.n(r),o=n("qJkm"),a=n("Jhmp"),c=n("hwnc"),s=Object(c.a)("Push:Device Id",Object(c.b)("#b95f6f","#fff"));function u(){return o.a.current().id}function f(){return Object(a.a)("airbnb_push_notifications","push_token_id").then((function(e){if(e){var t=e.split(":"),n=babelHelpers.slicedToArray(t,2);return{userId:+n[0],deviceId:n[1]}}}))}function l(){return f().then((function(e){return null==e?void 0:e.userId}))}function d(e,t){return!(!(null==t?void 0:t.deviceId)||(null==t?void 0:t.userId)!==e)}function p(){var e=u();return e?f().then((function(t){return d(e,t)})):Promise.resolve(!1)}function v(e){var t=e||u();if(!t){var n="Cannot create device id with no user id";return s((function(){return n})),Promise.reject(n)}return f().then((function(e){var n=null==e?void 0:e.deviceId;if(n&&d(t,e))return s((function(){return'Using "'.concat(n,'" as stored device push id')})),Promise.resolve(n);var r=i()();return Object(a.b)("airbnb_push_notifications","push_token_id",function(e){var t=e.deviceId,n=e.userId;return"".concat(n).concat(":").concat(t)}({deviceId:r,userId:t})),r}))}},"2mql":function(e,t,n){"use strict";var r=n("r36Y"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function s(e){return r.isMemo(e)?a:c[e.$$typeof]||i}c[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var u=Object.defineProperty,f=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,v=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(v){var i=p(n);i&&i!==v&&e(t,i,r)}var a=f(n);l&&(a=a.concat(l(n)));for(var c=s(t),h=s(n),b=0;b<a.length;++b){var g=a[b];if(!(o[g]||r&&r[g]||h&&h[g]||c&&c[g])){var m=d(n,g);try{u(t,g,m)}catch(e){}}}return t}return t}},"33yf":function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),c=a,s=0;s<a;s++)if(i[s]!==o[s]){c=s;break}var u=[];for(s=c;s<i.length;s++)u.push("..");return(u=u.concat(o.slice(c))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(i=!1,r=a+1),46===c?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("8oxB"))},"4fW3":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cVPA"),i=n.n(r),o=n("33yf"),a=n.n(o);function c(e){return a.a.join("/public/static/sw/",e.replace(/\.js/,".".concat(i.a.locale(),".js")))}},"5mXr":function(e,t,n){"use strict";var r={RookeryMessagePackageEvent:n("Ficp").a};t.a=r},"7saC":function(e,t,n){"use strict";e.exports=Array.isArray},"8sS/":function(e,t,n){"use strict";n.r(t),n.d(t,"getInitializeOptions",(function(){return f})),n.d(t,"default",(function(){return l}));var r=n("ilXw"),i=n.n(r),o=n("ANar"),a=n("qJkm"),c=n("LrVU"),s=n("D/bq"),u=n("acAX");function f(){return navigator&&navigator.serviceWorker?navigator.serviceWorker.ready.then((function(e){if(e&&e.active){var t,n,r="homes-host-loop"===i.a.get("layout-init").tracking_context.controller?"GLOBAL_HOST":"GLOBAL_TRAVEL",o=e.active.scriptURL.split("/"),a="/".concat(o[o.length-1]);return{datadogTags:(t="registered_path:".concat(a),n="unknown",Object(u.d)()?n="android":Object(u.h)()&&(n="ios"),["os:".concat(n),"browser:".concat(Object(u.b)()),t].join(",")),appType:r,serviceWorkerRegistration:e}}})):Promise.resolve(void 0)}function l(e){var t=e.datadogTags;"undefined"!=typeof Notification&&"denied"===Notification.permission&&Object(o.a)("service_worker.push_permission_denied",1,t),Object(c.a)()&&(a.a.isLoggedIn()?Object(s.d)():Object(s.a)())}},Bgua:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(Array.isArray(e))return e.map((function(e){return r(e)}));var t=e.replace("//","/");return t.startsWith("/")||(t="/".concat(t)),t}function i(e,t,n){return e.map((function(e){var o=function(e,t){if(!e.path)return null;if("function"==typeof e.path)return r(e.path(t));if(Array.isArray(e.path)){var n=[];return Array.isArray(t)?(t.forEach((function(t){e.path.forEach((function(e){n.push(r("".concat(r(t)).concat(r(e))))}))})),n):(e.path.forEach((function(e){n.push(r("".concat(r(t)).concat(r(e))))})),n)}return Array.isArray(t)?t.map((function(t){return r("".concat(r(t)).concat(r(e.path)))})):r("".concat(t).concat(r(e.path)))}(e,t);o&&n(o);var a=o||t;if(null!=e.serverConfig)throw new TypeError("Cannot use serverConfig in the browser");var c={app:e.app,topLevelProjectName:e.topLevelProjectName,component:e.component,exact:e.exact,key:e.key,routes:e.routes?i(e.routes,a,n):[],scripts:e.scripts,serverConfig:e.serverConfig||{},options:e.options||{},routeConfigName:e.routeConfigName,header:e.header,footer:e.footer};return o&&(c.path=o),c}))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Set;return i(e,t,(function(e){if(n.has(e))throw new Error('E01(https://air/hl-E01): Duplicate route found for: "'.concat(e,'"'));n.add(e)}))}n.d(t,"a",(function(){return o}))},"CX+m":function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{id:e,options:t}}n.d(t,"a",(function(){return r}))},Copi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,c=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,f=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,v=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case l:case d:case a:case s:case c:case v:return e;default:switch(e=e&&e.$$typeof){case f:case p:case u:return e;default:return t}}case b:case h:case o:return t}}}function m(e){return g(e)===d}t.typeOf=g,t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=f,t.ContextProvider=u,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=b,t.Memo=h,t.Portal=o,t.Profiler=s,t.StrictMode=c,t.Suspense=v,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===s||e===c||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===h||e.$$typeof===u||e.$$typeof===f||e.$$typeof===p)},t.isAsyncMode=function(e){return m(e)||g(e)===l},t.isConcurrentMode=m,t.isContextConsumer=function(e){return g(e)===f},t.isContextProvider=function(e){return g(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return g(e)===p},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===b},t.isMemo=function(e){return g(e)===h},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===s},t.isStrictMode=function(e){return g(e)===c},t.isSuspense=function(e){return g(e)===v}},"D/bq":function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return w}));var r=n("ilXw"),i=n.n(r),o=n("qJkm"),a=n("ANar"),c=n("hwnc"),s=n("tpgv"),u=n("1Fup"),f=n("vyz3"),l=n("ECVA"),d=n("LrVU"),p=n("8sS/"),v=Object(c.a)("Push:Initialize",Object(c.b)("#b95f6f","#fff"));function h(e,t){var n=i.a.get("layout-init").tracking_context,r=void 0===n?{}:n;return Object(p.getInitializeOptions)().then((function(n){if(!n)return Promise.reject(new Error("No options available"));var i=n.appType;return Object(u.a)(t).then((function(n){return{appType:i,appVersion:"".concat(r.controller,":").concat(r.version),buildType:"RELEASE",deviceType:Object(f.a)(),deviceVersion:navigator.userAgent,nativeDeviceId:n,timeStamp:String((new Date).getTime()),token:JSON.stringify(e),tokenType:"VAPID",userId:t||o.a.current().id}}))}))}function b(){return Object(d.a)()?Object(p.getInitializeOptions)().then((function(n){if(!n)throw v((function(){return'No options available, was "initialize" called for push notifications?'})),new Error("No options available");return e=n.datadogTags,(t=n.serviceWorkerRegistration).pushManager.getSubscription()})).then((function(n){if(!n){var r,o=i.a.get("pushNotificationsKey");return v((function(){return'Initializing push notifications with key "'.concat(o,'".')})),t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o}).then(h).then((function(t){return r=t,Object(a.a)("service_worker.push_subscribe_success",1,e),v((function(){return["Subscription generated",t]})),Object(l.a)(t)})).catch((function(t){var n={extra:r,fingerprint:["PushUnsubscribeFailure"]};return Object(s.b)(t,n),Object(a.a)("service_worker.push_subscribe_failure",1,e),v((function(){return["Failed to subscribe, removing native subscription",t]})),y()}))}v((function(){return["Found existing push subscription, not updating upstream service.",n]}))})).catch((function(t){"No options available"!==t.message&&(Object(a.a)("service_worker.push_subscribe_unknown_failure",1,e),Object(s.b)(t,{fingerprint:(null==t?void 0:t.message)?["PushUnknownFailure",null==t?void 0:t.message]:void 0}))})):Promise.resolve();var e,t}function g(){return Object(u.c)().then((function(e){return e?b():(v((function(){return"user has not opted in, attempt to find and clear invalid push subscription"})),y())}))}function m(){return Object(p.getInitializeOptions)().then((function(e){if(!e)return!1;var t=e.serviceWorkerRegistration;return Object(u.c)().then((function(e){return!!e&&t.pushManager.getSubscription().then((function(e){return!!e}))}))}))}function y(){return Object(p.getInitializeOptions)().then((function(e){return e?e.serviceWorkerRegistration.pushManager.getSubscription().then((function(t){if(!t)return v((function(){return"clearing push subscription: there was no active subscription"})),Promise.resolve(!0);function n(){return v((function(){return"clearing push subscription: push subscription unsubscribed"})),Object(u.b)().then((function(e){return e?h(void 0,e).then((function(e){return Object(l.a)(e).then((function(){return v((function(){return"successfully cleared push token from pleiades"})),Promise.resolve(!0)})).catch((function(){return v((function(){return"error clearing push token from pleiades"})),Promise.resolve(!0)}))})):Promise.resolve(!0)}))}return t.unsubscribe().then(n).catch((function(t){return Object(s.b)(t),Object(a.a)("web_push.opt_in.unsubscribe_failure",1,null==e?void 0:e.datadogTags),n()}))})):Promise.resolve(!0)})).catch((function(e){return Object(s.b)(e),Promise.resolve(!1)}))}function w(){var e;return Object(d.b)().then((function(t){return e=t,Object(p.getInitializeOptions)()})).then((function(t){return!!t&&(e?(Object(a.a)("web_push.opt_in.permission_granted",1,null==t?void 0:t.datadogTags),Object(u.c)().then((function(e){if(e)return Object(a.a)("web_push.opt_in.device_id_cached",1,null==t?void 0:t.datadogTags),v((function(){return"user has a valid device id cached"})),b().then((function(){return!0})).catch((function(){return!0}));Object(a.a)("web_push.opt_in.no_device_id_cached",1,null==t?void 0:t.datadogTags),v((function(){return"user does not have a valid device id cached, clearing subscription"}));var n=function(){return b().then((function(){return!0}))};return y().then(n).catch(n)}))):(Object(a.a)("web_push.opt_in.permission_denied",1,null==t?void 0:t.datadogTags),!1))}))}},ECVA:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("+0oR"),i=n("oSOv"),o=n("hwnc"),a=n("tpgv"),c=n("vZiA"),s=Object(o.a)("Push:Send Token",Object(o.b)("#b95f6f","#fff"));function u(e){var t=Object(r.a)().get(i.c);return t?t.mutate({mutation:c.a,variables:{request:e}}).then((function(t){var n,r,i=t.errors,o=t.data;if(i&&(null==i?void 0:i.length)>0){var c,u,f="Failed to send push token due to network error";s((function(){return[f,i]}));var l={extra:Object.assign({},i[0],e),fingerprint:["PushTokenUpdateFailure"]},d=new Error(null!==(c=null===(u=i[0])||void 0===u?void 0:u.message)&&void 0!==c?c:f);throw Object(a.b)(d,l),d}return s((function(){return["Sent push token to upstream server",o]})),null==o||null===(n=o.pleiades)||void 0===n||null===(r=n.writeToken)||void 0===r?void 0:r.deviceId})):(Object(a.b)(new Error("Unable to send push token due to no registered niobe client")),Promise.resolve(void 0))}},EYUP:function(e,t,n){"use strict";n.r(t);var r=n("rPoc"),i=n("g8Fj"),o=n("ANar"),a=n("Ri7V"),c=n("hwnc"),s=n("EqMp"),u=n("acAX"),f=n("2jR3"),l=n("yCVm"),d=n("w4U7"),p=n("D/bq"),v=n("/bk8"),h=n("uky3"),b=n("5mXr"),g=n("BIvM"),m=n("4fW3"),y=Object(c.a)("ServiceWorker",Object(c.b)("rebeccapurple","#fff"));function w(e,t){var n=new URLSearchParams;Object.keys(t).forEach((function(e){var r=t[e];r&&n.append(e,String(r))}));var r=String(n);return r.length?"".concat(e,"?").concat(r):e}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{appType:"GLOBAL_TRAVEL",pushNotifications:!1,deliverAppShellExperiment:!1,deliverPreCachingExperiment:!1,datadogTags:""},n=t.appType,c=t.datadogTags,u=t.pushNotifications,v=t.deliverAppShellExperiment,_=t.deliverPreCachingExperiment,O=Object(l.a)(),k=O.force_staging,j=O.force_env,A=O.sw_disable_niobe_cache,E=O.sw_pwa_disable_niobe_cache,P=Object(g.default)("is-metro")&&!0,I=w(P?Object(m.a)(e):e,{deliver_app_shell_experiment:v,deliver_pre_caching_experiment:_,force_staging:k,force_env:j,sw_disable_niobe_cache:A||a.a.getBootstrap("sw_disable_niobe_cache"),sw_pwa_disable_niobe_cache:E||a.a.getBootstrap("sw_pwa_disable_niobe_cache")}),S=new r.a(I);y((function(){return"installing, verifying or updating ".concat(I,", see https://air/service-workers for debugging guides.")})),Object(s.c)((function(){y((function(){return"Login complete, clearing shell cache"})),S.messageSW({type:"CLEAR_SHELL_CACHE"}),Object(o.a)("service_worker.login_and_clear_cache",1,c),u&&Object(p.d)()})),Object(s.d)((function(){y((function(){return"Logout complete, clearing shell cache"})),S.messageSW({type:"CLEAR_SHELL_CACHE"}),Object(o.a)("service_worker.logout_and_clear_cache",1,c),Object(p.a)().then((function(){y((function(){return"cleared push subscription"}))}))})),S.addEventListener("installed",(function(e){Object(o.a)("service_worker.installation",1,c),e.isUpdate?(Object(o.a)("service_worker.version_updated",1,c),y((function(){return'updated installation completed for "'.concat(c,'"')}))):(Object(o.a)("service_worker.first_installation",1,c),y((function(){return'first installation completed for "'.concat(c,'"')})))})),S.addEventListener("controlling",(function(e){e.sw&&Object(r.b)(e.sw,{type:"FLUSH_MESSAGES"}),Object(o.a)("service_worker.controlling",1,c),y((function(){return'now controlling the page for "'.concat(c,'"')}))})),S.addEventListener("message",(function(e){switch(e.data.type){case"AIRDOG_BUMP":if("string"==typeof e.data.event)Object(o.a)("service_worker.message.".concat(e.data.event),1,c);else{var t=e.data.event,n=t.name,r=t.count,a=t.tags;Object(o.a)("service_worker.message.".concat(n),r,[c,a].filter(Boolean).join(","))}break;case"LOG_JITNEY_EVENT":i.a.logJitneyEvent({event_data:e.data.eventData,schema:b.a[e.data.schemaName]});break;case"SW_ERROR":Object(o.a)("service_worker.worker_error",1,c),Object(f.b)(e.data.error);break;case"NOTIFICATION_CLICKED":Object(o.a)("service_worker.push_notification_clicked",1,c),Object(h.a)(e.data.payload)}})),S.addEventListener("activated",(function(e){!e.isUpdate&&u&&navigator.serviceWorker.getRegistration().then((function(e){e&&(y((function(){return"initializing push notifications in activate"})),Object(d.a)({serviceWorkerRegistration:e,datadogTags:c,appType:n}))})),Object(o.a)("service_worker.activated_new_version",1,c),y((function(){return'activated new version for "'.concat(c,'"')}))})),S.addEventListener("waiting",(function(e){e.sw&&Object(r.b)(e.sw,{type:"SKIP_WAITING"}).then((function(e){e?(y((function(){return"Manual reload signal in development received, reloading page"})),location.reload(!0)):y((function(){return"Automatic service worker activation failed, you may need to hard refresh the page to get the new worker."}))})),Object(o.a)("service_worker.waiting_to_install",1,c)})),S.register().then((function(e){e&&u&&(e.active?(y((function(){return"initializing push notifications with active registration"})),Object(d.a)({serviceWorkerRegistration:e,appType:n,datadogTags:c})):y((function(){return"no active worker, waiting to activate for push notifications"}))),Object(o.a)("service_worker.registration",1,null==c?void 0:c.split(","),!0)})).catch((function(e){y((function(){return["service worker registration failed",e]})),"SecurityError"!==(null==e?void 0:e.name)&&(Object(o.a)("service_worker.failed_installation",1,c),Object(f.c)(e,{tags:{service_worker_error_type:"service_worker.failed_installation"}}))}))}t.default=function(e,t){if("undefined"!=typeof navigator&&navigator.serviceWorker){var n=function(e){var t="unknown";return Object(u.d)()?t="android":Object(u.h)()&&(t="ios"),["os:".concat(t),"browser:".concat(Object(u.b)()),e].join(",")}("registered_path:".concat(e));if(e){Object(o.a)("service_worker.initialization_attempt",1,null==n?void 0:n.split(","),!0),Object(l.a)().forceResetServiceWorker&&Object(v.a)({legacyOnly:!1}).then((function(){window.location.search=window.location.search.replace("forceResetServiceWorker","swResetComplete")}));var r=a.a.getBootstrap("disable_all_service_workers"),i=a.a.getBootstrap("temporarily_disable_service_workers_for_me"),c='skipping start of the service worker due to user opted out, remove your user from "temporarily_disable_service_workers_for_me" to opt back in.',s=r||i;Object(v.a)({legacyOnly:!s,serviceWorkerPath:e,datadogTags:n}).then((function(){s?y((function(){return i?c:"service workers are globally disabled, skipping start"})):_(e,Object.assign({datadogTags:n},t))})).catch((function(r){s?y((function(){return i?c:"service workers are globally disabled, skipping start"})):(_(e,Object.assign({datadogTags:n},t)),Object(o.a)("service_worker.initialization_failed",1,n),Object(f.c)(r,{extra:{service_worker_error_type:"service_worker.initialization_failed"}}))}))}else navigator.serviceWorker.getRegistrations().then((function(e){e.length&&(y((function(){return"No service worker was registered but one is active, removing and if in development, reloading the page."})),Object(v.a)({legacyOnly:!1}).finally((function(){0})))})).catch((function(e){y((function(){return["Unable to fully remove old service worker registrations",e]})),"SecurityError"!==(null==e?void 0:e.name)&&Object(f.c)(e,{tags:{service_worker_error_type:"service_worker.failed_uninstallation"}})}))}}},Ficp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={defaultProps:{schema:"com.airbnb.jitney.event.logging.Rookery:RookeryMessagePackageEvent:1.0.0",event_name:"rookery_message_package"},propTypes:{},fullyQualifiedName:"Rookery.v1.RookeryMessagePackageEvent"}},Ghbi:function(e,t,n){"use strict";e.exports=Object.assign},LrVU:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l}));var r=n("ANar"),i=n("hwnc"),o=n("64oY"),a=n("8sS/"),c=n("1Fup"),s=Object(i.a)("Push:Permissions",Object(i.b)("#b95f6f","#fff"));function u(){return"undefined"!=typeof Notification&&"granted"===Notification.permission}function f(){return Object(o.b)()?"denied"===Notification.permission?Promise.resolve(!1):"granted"===Notification.permission?Promise.resolve(!0):(s((function(){return"Attempting to request permissions"})),Notification.requestPermission().then((function(t){return e=t,s((function(){return"Resulting permission: ".concat(e)})),Object(a.getInitializeOptions)()})).then((function(t){if(!t)return!1;var n=t.datadogTags;return Object(r.a)("service_worker.push_notifications.permission_".concat(e),1,n),"granted"===e}))):Promise.resolve(!1);var e}function l(){return(u()?Object(c.c)():Promise.resolve(!1)).then((function(e){return!e&&("undefined"==typeof Notification?(s((function(){return"Not showing push notifications since theyâ€™re not supported"})),!1):"denied"!==Notification.permission||(s((function(){return"Not showing push notifications due to not having permission"})),!1))}))}},"V/vL":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n("Ty5D"),i=n("wx14"),o=n("q1tI"),a=n.n(o);function c(e,t,n){return void 0===n&&(n=[]),e.some((function(e){var i=e.path?Object(r.g)(t,e):n.length?n[n.length-1].match:r.c.computeRootMatch(t);return i&&(n.push({route:e,match:i}),e.routes&&c(e.routes,t,n)),i})),n}function s(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?a.a.createElement(r.e,n,e.map((function(e,n){return a.a.createElement(r.b,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(Object(i.a)({},n,{},t,{route:e})):a.a.createElement(e.component,Object(i.a)({},n,t,{route:e}))}})}))):null}},VbXa:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},WbBG:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"dy+6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("mKPX");function i(e){var t=e.pathname,n=e.routes,i=e.exitRoutes;return Object(r.b)(n||[],t)&&(!i||!Object(r.b)(i,t))}},kfzt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("CX+m"),i=function(){function e(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.instances=new Map,this.providers=new Map,this.mapKeys=new Map,this.consumerId=0,this.pendingInstances=new Map,this.traceTokens=new Set,this.parent=t.parent,this.id=t.id||"",this.span=t.span||t.parent&&t.parent.span,t.installers&&t.installers.forEach((function(t){return t(e)}))}var t=e.prototype;return t.get=function(e){if(this.instances.has(e.id))return this.instances.get(e.id);var t=this.defaultProvider(e);return this.instances.set(e.id,t),t},t.getAsync=function(e){if(this.pendingInstances.has(e.id))return this.pendingInstances.get(e.id);try{var t=Promise.resolve(this.get(e));return this.pendingInstances.set(e.id,t),t}catch(e){return Promise.reject(e)}},t.provideHydrationInstances=function(e){var t=this;if(this.instances.size>0)throw new Error("Already installed hydration instances.");e.forEach((function(e){var n=babelHelpers.slicedToArray(e,2),r=n[0],i=n[1];t.instances.set(r,i),t.pendingInstances.set(r,Promise.resolve(i))}))},t.getHydrationInstances=function(){var e=this;return Array.from(this.providers.values()).reduce((function(t,n){var r=babelHelpers.slicedToArray(n,3)[2];return void 0===r.type&&r.options.hydrate&&t.push([r.id,e.get(r)]),t}),[])},t.provide=function(e,t,n,r){this.providers.set(e.id,[t,n,e])},t.consume=function(e,t,n){this.consumerId+=1;var i=e.map((function(e){return e.id})).join(","),o=Object(r.a)("consumer,".concat(this.consumerId,"(").concat(i,")"));this.provide(o,e,t,n)},t.createInstances=function(){var e=this;return this.collectAncestorInstances(this.parent),this.mapKeys.clear(),this.providers.forEach((function(t){var n=babelHelpers.slicedToArray(t,3)[2];if("key"===n.type){var r=n.map,i=e.mapKeys.get(r.id)||[];i.push(n),e.mapKeys.set(r.id,i),!e.providers.has(r.id)&&r.options.getDefault&&e.provide(r,[],(function(){return e.defaultProvider(r)}))}})),Promise.all([].concat(babelHelpers.toConsumableArray(Array.from(this.providers.values()).map((function(t){var n=babelHelpers.slicedToArray(t,3)[2];return e.createInstance(n,[])}))),babelHelpers.toConsumableArray(this.pendingInstances.values()))).then((function(){})).catch((function(e){return e instanceof Error&&setTimeout((function(){throw e})),Promise.reject(e)}))},t.collectAncestorInstances=function(e){var t=this;e&&(e.pendingInstances.forEach((function(e,n){t.providers.has(n)||t.pendingInstances.has(n)||t.pendingInstances.set(n,e.then((function(e){return t.assignMapKeys(e,n)})).then((function(e){return t.instances.set(n,e),e})))})),e.providers.forEach((function(e,n){t.providers.has(n)||t.providers.set(n,e)})),this.collectAncestorInstances(e.parent))},t.defaultProvider=function(e){if(void 0!==e.type||!e.options.getDefault)throw this.providers.has(e.id)?new Error("Token '".concat(e.id,"' has no instance and no default. Did you forget to call createInstances()?")):new Error("Token '".concat(e.id,"' has no provider and no default. Did you forget to install a provider?"));return e.options.getDefault()},t.assignMapKeys=function(e,t){var n=this,r=this.mapKeys.get(t);if(!r||"object"!==babelHelpers.typeof(e))return e;var i=Object.assign({},e);return Promise.all(r.map((function(e){return n.createInstance(e,[t])}))).then((function(e){return e.forEach((function(e,t){i[r[t].key]=e})),i}))},t.createInstance=function(e,t){var n=this,r=e.id;if(t.includes(r))return Promise.reject(new Error("Cycle in dependency graph: ".concat([].concat(babelHelpers.toConsumableArray(t),[r]).join(" -> "))));var i=this.pendingInstances.get(r);if(i)return i;var o=this.providers.get(r)||[[],function(){return n.defaultProvider(e)},e],a=babelHelpers.slicedToArray(o,2),c=a[0],s=a[1],u=Promise.all(c.map((function(e){return"promise"===e.type?null:n.createInstance(e,[].concat(babelHelpers.toConsumableArray(t),[r]))}))).then((function(e){var t=c.map((function(t,i){return"promise"===t.type?n.createInstance(t.token,[r]):e[i]}));return s.apply(void 0,babelHelpers.toConsumableArray(t))})).then((function(e){return n.assignMapKeys(e,r)})).then((function(e){return n.instances.set(r,e),e}));return this.pendingInstances.set(r,u),u},e}()},mKPX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n("V/vL"),i=n("Bgua");function o(e,t){var n=t.match(/[^#?]+/),o=Object(i.a)(e,"/");return n?Object(r.a)(o,n[0]):[]}function a(e,t){return o(e,t).some((function(e){return e.match.isExact}))}},mjkm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.fingerprint;return(n=e.call(this,"string"==typeof t?t:t.message)||this).fingerprint=i,"string"!=typeof t&&(n.cause=t),n}return babelHelpers.inheritsLoose(t,e),t}(babelHelpers.wrapNativeSuper(Error))},oSOv:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c}));var r=n("CX+m"),i=Object(r.a)("NiobeClientToken"),o=Object(r.a)("NiobeBetaClientToken"),a=Object(r.a)("NiobeApolloClientToken"),c=Object(r.a)("NiobeMinimalistClientToken")},r36Y:function(e,t,n){"use strict";e.exports=n("Copi")},rPoc:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return r}));try{self["workbox:window:5.1.4"]&&_()}catch(r){}function r(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[r.port2])}))}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:5.1.4"]&&_()}catch(r){}var c=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function s(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var u=function(e,t){this.type=e,Object.assign(this,t)};function f(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function l(){}var d=function(e){var t,n;function o(t,n){var r,i;return void 0===n&&(n={}),(r=e.call(this)||this).t={},r.i=0,r.o=new c,r.u=new c,r.s=new c,r.v=0,r.h=new Set,r.l=function(){var e=r.m,t=e.installing;r.i>0||!s(t.scriptURL,r.g)||performance.now()>r.v+6e4?(r.p=t,e.removeEventListener("updatefound",r.l)):(r.P=t,r.h.add(t),r.o.resolve(t)),++r.i,t.addEventListener("statechange",r.S)},r.S=function(e){var t=r.m,n=e.target,i=n.state,o=n===r.p,a=o?"external":"",c={sw:n,originalEvent:e};!o&&r.j&&(c.isUpdate=!0),r.dispatchEvent(new u(a+i,c)),"installed"===i?r.A=self.setTimeout((function(){"installed"===i&&t.waiting===n&&r.dispatchEvent(new u(a+"waiting",c))}),200):"activating"===i&&(clearTimeout(r.A),o||r.u.resolve(n))},r.O=function(e){var t=r.P;t===navigator.serviceWorker.controller&&(r.dispatchEvent(new u("controlling",{sw:t,originalEvent:e,isUpdate:r.j})),r.s.resolve(t))},r.U=(i=function(e){var t=e.data,n=e.source;return f(r.getSW(),(function(){r.h.has(n)&&r.dispatchEvent(new u("message",{data:t,sw:n,originalEvent:e}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(e){return Promise.reject(e)}}),r.g=t,r.t=n,navigator.serviceWorker.addEventListener("message",r.U),r}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,l,d=o.prototype;return d.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var r=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return p(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return r.j=Boolean(navigator.serviceWorker.controller),r.I=r.M(),f(r.R(),(function(e){r.m=e,r.I&&(r.P=r.I,r.u.resolve(r.I),r.s.resolve(r.I),r.I.addEventListener("statechange",r.S,{once:!0}));var t=r.m.waiting;return t&&s(t.scriptURL,r.g)&&(r.P=t,Promise.resolve().then((function(){r.dispatchEvent(new u("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),r.P&&(r.o.resolve(r.P),r.h.add(r.P)),r.m.addEventListener("updatefound",r.l),navigator.serviceWorker.addEventListener("controllerchange",r.O,{once:!0}),r.m}))}))}catch(e){return Promise.reject(e)}},d.update=function(){try{return this.m?p(this.m.update()):void 0}catch(e){return Promise.reject(e)}},d.getSW=function(){try{return void 0!==this.P?this.P:this.o.promise}catch(e){return Promise.reject(e)}},d.messageSW=function(e){try{return f(this.getSW(),(function(t){return r(t,e)}))}catch(e){return Promise.reject(e)}},d.M=function(){var e=navigator.serviceWorker.controller;return e&&s(e.scriptURL,this.g)?e:void 0},d.R=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return f(navigator.serviceWorker.register(e.g,e.t),(function(t){return e.v=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},a=o,(l=[{key:"active",get:function(){return this.u.promise}},{key:"controlling",get:function(){return this.s.promise}}])&&i(a.prototype,l),o}(function(){function e(){this.k=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.B(e).add(t)},t.removeEventListener=function(e,t){this.B(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=a(this.B(e.type));!(t=n()).done;)(0,t.value)(e)},t.B=function(e){return this.k.has(e)||this.k.set(e,new Set),this.k.get(e)},e}());function p(e,t){if(!t)return e&&e.then?e.then(l):Promise.resolve()}},rkMX:function(e,t,n){"use strict";n.r(t),n.d(t,"PleiadesAppType",(function(){return r})),n.d(t,"PleiadesMobileBuildType",(function(){return i})),n.d(t,"PleiadesMobileStatus",(function(){return o})),n.d(t,"PleiadesTokenType",(function(){return a}));var r={ALPHA:"ALPHA",BETA:"BETA",CHINA_HOST:"CHINA_HOST",CHINA_TRAVEL:"CHINA_TRAVEL",DEV:"DEV",GLOBAL_HOST:"GLOBAL_HOST",GLOBAL_TRAVEL:"GLOBAL_TRAVEL",UNDEFINED:"UNDEFINED"},i={ALPHA:"ALPHA",BETA:"BETA",CHINA:"CHINA",DEBUG:"DEBUG",QA:"QA",RELEASE:"RELEASE",UNDEFINED:"UNDEFINED"},o={LOG_IN:"LOG_IN",LOG_OUT:"LOG_OUT",UNDEFINED:"UNDEFINED",VISITOR:"VISITOR"},a={APNS:"APNS",FCM:"FCM",GCM:"GCM",JPUSH:"JPUSH",UNDEFINED:"UNDEFINED",VAPID:"VAPID"},c=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"SendPushTokenMutation"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"request"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"PleiadesWriteTokenRequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"pleiades"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"__typename"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"writeToken"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"request"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"__typename"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"deviceId"},"arguments":[],"directives":[]}]}}]}}]}}],"operationType":"MUTATION"}');c.operationId="1bcc069f80f3b154f36cc144ec00d63a52746d63e35d4151e20cf67ef908a14b",c.integrityHash="d1aedfbfd01e4cc1c5d61afd7a774f9229615ed2db5064b469e1e911f7f40e94",t.default=c},tpgv:function(e,t,n){"use strict";var r=n("2jR3");n.d(t,"b",(function(){return r.b}));var i=n("mjkm");n.d(t,"a",(function(){return i.a}))},uky3:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("dy+6"),i=n("6Tiy"),o=n("hwnc"),a=n("+0oR"),c=n("D23X"),s=n("zLkY"),u=Object(o.a)("Push:NotificationHandler");function f(e){if(e){var t=new URL(e,window.location.origin),n=Object(i.a)(t.search),o=window.location.origin===t.origin,f=Object(a.a)().get(s.a),l=f.exitRoutes,d=f.routes;o&&Object(r.a)({exitRoutes:l,pathname:t.pathname,routes:d})?Object(c.b)(t.pathname,{params:n}):window.location.assign(t.href)}else u((function(){return"No URL provided to dispatchNotification, this is likely a bug"}))}},vZiA:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n("rkMX").default||n("rkMX")},vyz3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("acAX");function i(){var e=navigator.userAgent;return Object(r.d)(e)?"ANDROID_VAPID":Object(r.k)(e)?"IPHONE_VAPID":Object(r.j)(e)?"IPAD_VAPID":"DESKTOP_VAPID"}},w4U7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){var t,r;(t=new Promise((function(e){Promise.resolve().then(function(t){e(babelHelpers.interopRequireWildcard(n("8sS/")))}.bind(null,n)).catch(n.oe)})),r="service-worker-push-notification-initializer",t.chunkName=r,t).then((function(t){(0,t.default)(e)}))}},zLkY:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("CX+m"),i=Object(r.a)("AppRoutesToken",{getDefault:function(){return{}}})}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/service-worker-initializer-f46f1e13.js.map