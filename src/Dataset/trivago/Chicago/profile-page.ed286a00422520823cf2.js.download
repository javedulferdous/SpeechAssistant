(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{2310:function(e,t,n){"use strict";n.r(t),n.d(t,"backButtonHandlers",(function(){return R})),n.d(t,"backButtonSelectors",(function(){return U}));var r=n(37),c=n(5),o=n(6),i=n(3),a=n(15),s=n(0),l=n(2289),u=n(2278),b=n(2279),O=n(2286),p=n(2292),f=n(2288),m=n(2245),j=(n(12),n(1)),d={},v=["class","icon-ic icon-center h-phone deal_arrow icon-rtl fill-white"],_=n(1096).default,g=["class","back-string"],h=["class","settings-menu__list-item settings-menu__list-item--back"],y=["class","settings-menu__list-element"];d.render=function(e){var t;t=e.isHomepage?window.translate("go_to_search"):window.translate("back_to_search"),Object(s.elementOpen)("li","L#:'!r3",y),Object(s.elementOpen)("a","jd7M2b)",h,"href",e.link,"ref",e.backButton),Object(s.elementOpen)("span","general/arrow-s",v),n(23).default(_),Object(s.elementClose)("span"),Object(s.elementOpen)("span","P97j'84",g),Object(s.text)(t),Object(s.elementClose)("span"),Object(s.elementClose)("a"),Object(s.elementClose)("li")};var w=n(84),E=n(461),S=n(268),C=n(464),P=n(4),I=n(7),k=n(114),A=n(98),M=function(e){return e.search.concepts.length<1},B=Object(a.createSelector)(M,(function(e){return e.location.routesMap}),i.dc,(function(e,t,n){var r=e?Object(i.ib)():Object(i.ib)(n);return Object(A.actionToPath)(r,t,i.fc)})),U=Object(a.createStructuredSelector)({isHomepage:M,link:B}),x=n(2);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){return i.m.dispatch(Object(i.ib)())},R={homepage:T,search:function(){var e=i.m.getState(),t=e.location.prev.query,n=e.search.concepts,r=!0,c=!1;if(void 0!==t){var o=t.hasList,a=void 0===o?1:o,s=t.hasMap;r=!!a;var l=n.some(x.Db);c=void 0===s?!l:s}var u=Object(i.dc)(e);i.m.dispatch(Object(i.ib)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{hasList:r,hasMap:c})))},default:T},L=function(e){var t=e.isHomepage?R.homepage:R.search;Object(P.b)("100:2472:2"),t()},N=Object(I.createComponent)((function(e){var t=e.subscribe,n=Object(I.attachEvent)("click"),r=n[0],c=n[1],o=Object(k.a)(i.m).pipe(Object(w.a)(U),Object(E.a)());return t(c.pipe(Object(S.a)((function(e){return e.preventDefault()})),Object(C.a)(o,(function(e,t){return t})),Object(S.a)(L))),Object(I.combine)(o,{backButton:r})}),(function(e){return d.render(e)})),F=n(2290),V=n(11),z={},H=["class","get-your-guide-program__wrapper"],W=["class","settings-menu__list-item settings-menu__list-item--active"],Y=["class","settings-menu__list-item settings-menu__list-item--logout","href","#logout"],X=["class","settings-menu__list"],q=["class","settings-menu"],J=["class","profile__area profile__area--centralized profile__guarantees","id","guarantees"],K=["class","profile__area profile__area--centralized profile__recently-viewed","id","recently-viewed"],Q=["class","profile__area profile__area--centralized profile__sync-accounts","id","sync-accounts"],Z=["class","account__headline"],$=["class","profile__area profile__area--centralized profile__account-details","id","account-details"],ee=["class","profile__area profile__area--centralized","id","booking-overview"],te=["class","profile__area profile__area--centralized","id","payment-methods"],ne=["class","profile__area profile__area--centralized","id","support-center"],re=["class","profile__content"],ce=["class","profile"],oe=["class","fs-container fs-container--profile"];z.render=function(e){var t=Object(j.createSubContext)(e);t.isExpressBookingActivated=Object(V.d)("WEB-40402"),t.isSupportCenterActive=Object(o.c)("support-center"),t.isGuaranteesActivated=Object(o.c)("guarantees"),t.isGetYourGuideDiscountProgramActivated=Object(V.d)("WEB-53516"),t.isGeniusAccountActivated=Object(V.d)("WEB-53274"),Object(s.elementOpen)("div","z`q2Ej}",oe,"ref",t.scrollArea),t.isGetYourGuideDiscountProgramActivated&&(Object(s.elementOpen)("div",";#l(OO[",H),Object(s.component)(F.a,"GetYourGuideDiscount",{mountedIn:"profilePage"}),Object(s.elementClose)("div")),Object(s.elementOpen)("section","profile",ce),Object(s.elementOpen)("nav","t8CAo9-",q),Object(s.elementOpen)("ul","0X7$>-X",X),Object(s.component)(N,""+t.backBtn),function(){for(var e=t.menuItems,n=0,r=e.length,c=e[0],o=r-1,i=!0;n<r;c=e[++n])if(null!==t.user&&"not-members"!=c.availability||null===t.user&&("all"==c.availability||"not-members"==c.availability)){if(Object(s.elementOpen)("li",null,null),t.activeSectionId==c.id||null===t.activeSectionId&&i)Object(s.elementOpen)("a","item-active",W),Object(s.text)(c.label),Object(s.elementClose)("a");else{Object(s.elementOpenStart)("a","item-inactive",null,"data-for",c.id);for(var a=0,l=Object(j.attrs)({ref:t.menuItem,href:"#"+c.id,class:"settings-menu__list-item"}),u=l.length;a<u;a+=2)Object(s.attr)(l[a],l[a+1]);Object(s.elementOpenEnd)(),Object(s.text)(c.label),Object(s.elementClose)("a")}Object(s.elementClose)("li"),i=!1,0===--o}}(),null!==t.user&&(Object(s.elementOpen)("li",null,null),Object(s.elementOpen)("a","yPoXO'E",Y,"ref",t.logoutBtn),Object(s.text)(window.translate("logoff")),Object(s.elementClose)("a"),Object(s.elementClose)("li")),Object(s.elementClose)("ul"),Object(s.elementClose)("nav"),Object(s.elementOpen)("div","|aF|Y,H",re,"ref",t.sections),t.isGuaranteesActivated&&(Object(s.elementOpen)("div","hCqz16;",J),Object(s.component)(m.b,"GuaranteesProgram",{inProfilePage:!0}),Object(s.elementClose)("div")),Object(s.elementOpen)("section","M?UOkbQ",K),Object(s.component)(f.a,"recently-viewed",{isAboveScreenMedium:t.isAboveScreenMedium,user:t.user,showAllItems:t.recentlyViewedExpanded}),Object(s.elementClose)("section"),null===t.user&&t.isGeniusAccountActivated&&(Object(s.elementOpen)("section","`wG'3R0",Q),Object(s.component)(p.a,"sync-accounts"),Object(s.elementClose)("section")),null!==t.user&&(Object(s.elementOpen)("section","O7=wa4u",$),Object(s.elementOpen)("h2","]?M>+Fu",Z),Object(s.text)(window.translate("accountsettings_member")),Object(s.elementClose)("h2"),Object(s.component)(O.a,"account-details",{isAboveScreenMedium:t.isAboveScreenMedium,user:t.user}),Object(s.elementClose)("section")),t.isExpressBookingActivated&&(Object(s.elementOpen)("section","nXAg@8#",ee),Object(b.a)(Object(j.createSubContext)(t,{expressBookingIframeUrl:t.expressBookingIframeUrl,user:t.user})),Object(s.elementClose)("section")),t.isExpressBookingActivated&&(Object(s.elementOpen)("section",":H4k{M~",te),Object(u.a)(Object(j.createSubContext)(t,{paymentMethodsIframeUrl:t.paymentMethodsIframeUrl,user:t.user})),Object(s.elementClose)("section")),t.isSupportCenterActive&&(Object(s.elementOpen)("section","DiLMgh@",ne),Object(s.component)(l.a,"support-center"),Object(s.elementClose)("section")),Object(s.elementClose)("div"),Object(s.elementClose)("section"),Object(s.elementClose)("div")};var ie=n(19),ae=n(582),se=n(908),le=n(106),ue=n(900),be=function(e,t){for(var n=function(e){var t={active:"",sections:e,offsets:[]};return t.offsets=Object.values(e.childNodes).map((function(e){return{el:e,offsetTop:e.offsetTop,offsetBottom:e.offsetTop+e.offsetHeight}})),t}(t),r=e.scrollTop+70,c="",o=0;o<n.offsets.length;o++){var i=n.offsets[o];if(r<i.offsetBottom&&r>i.offsetTop&&n.active!==i.el.id){n.active=i.el.id,c=i.el.id;break}}return c},Oe=n(358),pe=n(96),fe=["account-verification"],me=Object(a.createStructuredSelector)({activeSectionId:function(e){return e.header.activeSection}}),je=Object(ie.withRefs)((function(e){return{scrollArea:function(t){return Object(ae.a)(t,"scroll").pipe(Object(se.a)(100),Object(w.a)((function(){return be(t,e.refs.sections)})),Object(le.a)((function(e){return e&&!fe.includes(e)})),Object(S.a)((function(e){i.m.dispatch(Object(i.bb)(e,Date.now(),"profileMenu","scroll"))}))).subscribe()},menuItem:function(e){return Object(ae.a)(e,"click").pipe(Object(w.a)((function(){return e.getAttribute("href").replace("#","")})),Object(S.a)((function(e){return Object(P.b)("100:2472:"+Oe.r[e].sectionSideNav)})),Object(ue.a)(120),Object(S.a)((function(e){return i.m.dispatch(Object(i.bb)(e,Date.now(),"profileMenu"))}))).subscribe()},sections:function(t){return e.refs.sections=t,{unsubscribe:function(){e.refs.sections=null}}},logoutBtn:function(e){return Object(ae.a)(e,"click").subscribe((function(){Object(P.b)("100:2472:34"),i.m.dispatch(Object(i.O)())}))}}})),de=Object(ie.lifecycle)({componentDidMount:function(){var e=this.props.anchor;e&&i.m.dispatch(Object(i.cb)(e.substring(1)))}}),ve=Object(ie.withProps)({menuItems:Oe.w}),_e=Object(ie.compose)(Object(r.connect)(me),ve,je,de,Object(pe.b)())(Object(c.createComponent)((function(e){return z.render(e)}))),ge={},he=["class","profile-wrapper account"];ge.render=function(e){Object(s.elementOpen)("div","F5:jdZ,",he),e.isProfilePageDisplayed&&Object(s.component)(_e,"profile",{user:e.user,expressBookingIframeUrl:e.expressBookingIframeUrl,paymentMethodsIframeUrl:e.paymentMethodsIframeUrl,isAboveScreenMedium:e.isAboveScreenMedium,anchor:e.anchor,recentlyViewedExpanded:e.recentlyViewedExpanded}),Object(s.elementClose)("div")};var ye=n(33),we=n(20);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe={expressBookingIframeUrl:"",paymentMethodsIframeUrl:""},Ie=n(2243),ke=Object(V.d)("WEB-40402"),Ae=[].concat((ke?["bookingOverview","paymentSettings"]:[]).map((function(e){return Object(Oe.h)(e,"profile")}))),Me=Ie.a.apply(void 0,Ae),Be=n(26),Ue=Object(a.createStructuredSelector)({user:function(e){return e.security.user},isAboveScreenMedium:function(e){return e.browser.viewport.isAboveScreenMedium},isProfilePageDisplayed:ye.isOnProfilePageSelector,recentlyViewedExpanded:function(e){return e.header.recentlyViewedExpanded},anchor:function(e){return e.location.search}}),xe=Object(r.connect)(Ue)(Object(c.createComponent)((function(e){return ge.render(e)}),(function(e,t){void 0===e&&(e=Pe);var n=t.type,r=t.payload;switch(n){case c.RECEIVE_PROPS:return Se({},e,{},r,{expressBookingIframeUrl:"",paymentMethodsIframeUrl:""});case"RECEPTION_OF_BOOKING_OVERVIEW_URL_SUCCESSFUL":return Se({},e,{expressBookingIframeUrl:Object(Oe.n)(r)});case"RECEPTION_OF_BOOKING_OVERVIEW_URL_FAILED":return Se({},e,{expressBookingIframeUrl:""});case"RECEPTION_OF_PAYMENT_SETTINGS_URL_SUCCESSFUL":return Se({},e,{paymentMethodsIframeUrl:Object(Oe.n)(r)});case"RECEPTION_OF_PAYMENT_SETTINGS_URL_FAILED":return Se({},e,{paymentMethodsIframeUrl:""});default:return e}}),Object(Be.applyMiddleware)(Object(we.o)(Me)))),De=Object(r.provide)(i.m,xe),Ge=document.getElementById("js-profile-page");Ge&&Object(c.render)(Ge,De);var Te=document.getElementById("js-delete-account-acknowledgement"),Re=Oe.B.getCookie(),Le=1===parseInt(Re,10),Ne=Object(r.provide)(i.m,Oe.a);Le&&Te&&Object(c.render)(Te,Ne)}}]);
//# sourceMappingURL=profile-page.ed286a00422520823cf2.js.map