(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{2558:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(0),i=n(26),c=n(101),O=n.n(c),a=n(19),u=(n(12),{RECONNECTING:window.translate("toast_bar_reconnecting"),RECONNECT_FAILED:window.translate("toast_bar_reconnect_failed"),ONLINE:window.translate("toast_bar_online"),OFFLINE:window.translate("toast_bar_offline"),RETRY:window.translate("toast_bar_retry"),RECONNECT:window.translate("offline_page_retry"),GEOLOCATION_DENIED:window.translate("geolocation_denied")}),E=1,s=2,N=3,_=["ON_CANCEL_HIDE","ON_CANCEL_RECONNECT_TIMEOUT","ON_CHECK_NETWORK_STATUS","ON_HIDE","ON_HIDE_IN_FUTURE","ON_NETWORK_STATUS_CHANGE","ON_RECONNECT","ON_RECONNECT_FAILURE","ON_SHOW","ON_GEOLOCATION_DENIED","ON_GEOLOCATION_RESET"].reduce((function(e,t){return(e[t]=t)&&e}),{}),l=function(e){return e.reconnecting===s?u.RECONNECTING:e.reconnecting===N?u.RECONNECT_FAILED:e.isOnline?e.isGeolocationDenied?u.GEOLOCATION_DENIED:e.isOnline?u.ONLINE:void 0:u.OFFLINE},p=function(e){return!1===e.isOnline&&e.reconnecting===E||e.reconnecting===N},d=function(e){return e.reconnecting===N?u.RETRY:u.RECONNECT},f=n(1),C={},b=["class","toast-bar__message"],T=["id","js_toast_bar"];C.render=function(e){var t;if(t=!e.isServerSide&&null!=e.isShown&&""!==e.isShown&&e.isShown,Object(o.elementOpen)("div","toast-bar",T,"class",Object(f.classes)({base:"toast-bar","toast-bar--hidden":!t})),t){Object(o.elementOpen)("p","o;g4e%'",b),Object(o.text)(null!=e.text&&""!==e.text?e.text:""),Object(o.elementClose)("p"),Object(o.elementOpenStart)("button",null,null,"class",Object(f.classes)({base:"toast-bar__action","is-hidden":!(null!=e.isButtonShown&&""!==e.isButtonShown&&e.isButtonShown)}));for(var n=0,r=Object(f.attrs)({type:"button",onclick:null!=e.reconnect&&""!==e.reconnect?e.reconnect:""}),i=r.length;n<i;n+=2)Object(o.attr)(r[n],r[n+1]);Object(o.elementOpenEnd)(),Object(o.text)(null!=e.buttonText&&""!==e.buttonText?e.buttonText:window.translate("toast_bar_online")),Object(o.elementClose)("button")}Object(o.elementClose)("div")};var w=Object(a.mapProps)((function(e){var t=e.state;return{text:l(t),buttonText:d(t),isButtonShown:p(t),isShown:t.isShown,reconnect:t.reconnect}}))(Object(r.createComponent)((function(e){return C.render(e)})));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={isShown:!1,isOnline:!0,reconnecting:E,hideTimeoutId:void 0,isGeolocationDenied:!1},j=function(e,t){void 0===e&&(e=R);var n=t.type,o=t.payload;switch(n){case r.RECEIVE_PROPS:return I({},e,{},o);case _.ON_SHOW:return I({},e,{isShown:!0});case _.ON_HIDE:return I({},e,{isShown:!1});case _.ON_HIDE_IN_FUTURE:return I({},e,{hideTimeoutId:o});case _.ON_NETWORK_STATUS_CHANGE:return I({},e,{isOnline:o,reconnecting:E});case _.ON_RECONNECT:return I({},e,{reconnecting:s,reconnectTimeoutId:o});case _.ON_CANCEL_RECONNECT:return I({},e,{reconnecting:E});case _.ON_RECONNECT_FAILURE:return I({},e,{reconnecting:N});case _.ON_GEOLOCATION_DENIED:return I({},e,{isGeolocationDenied:!0});case _.ON_GEOLOCATION_RESET:return I({},e,{isGeolocationDenied:!1});default:return e}},D={reconnect:function(){return{type:_.ON_RECONNECT}},checkNetworkStatus:function(){return{type:_.ON_CHECK_NETWORK_STATUS}},cancelHide:function(){return{type:_.ON_CANCEL_HIDE}},cancelReconnectTimeout:function(){return{type:_.ON_CANCEL_RECONNECT_TIMEOUT}},geolocationDenied:function(){return{type:_.ON_GEOLOCATION_DENIED}},geolocationReset:function(){return{type:_.ON_GEOLOCATION_RESET}}},g=Object(i.dispatchToState)(D),v=Object(a.compose)(Object(a.lifecycle)({componentDidMount:function(){var e=this.getState(),t=e.checkNetworkStatus,n=e.geolocationDenied;window.addEventListener("online",t),window.addEventListener("offline",t),window.addEventListener("geolocationDenied",n)},componentWillUnmount:function(){var e=this.getState(),t=e.checkNetworkStatus,n=e.cancelHide,r=e.geolocationDenied,o=e.geolocationReset;window.removeEventListener("online",t),window.removeEventListener("offline",t),window.removeEventListener("geolocationDenied",r),o(),n()}})),h={render:function(e){return Object(o.elementOpen)("div"),Object(o.component)(w,"toast-bar",{state:e}),Object(o.elementClose)("div")}},m=n(4),L=null,A=m.b,H=function(){L&&A("100:2316:5:295:"+new Date(Date.now()-L).getSeconds())};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){return function(t){return function(n){(n.type===_.ON_HIDE_IN_FUTURE||n.type===_.ON_CANCEL_HIDE)&&clearTimeout(e.getState().hideTimeoutId),t(n)}}};var W=function(e){return function(t){return function(n){return function(e,t,n,r){if(n.type===_.ON_RECONNECT){var o=setTimeout((function(){e.dispatch({type:r?_.ON_CANCEL_RECONNECT:_.ON_RECONNECT_FAILURE})}),2e3);return t(P({},n,{payload:P({},n.payload,{timeoutId:o})}))}"ON_CANCEL_RECONNECT_TIMEOUT"===n.type&&clearTimeout(e.getState().reconnectTimeoutId),t(n)}(e,t,n,navigator.onLine)}}};var k=function(e){return function(t){return function(n){return function(e,t,n,r){if(n.type===_.ON_CHECK_NETWORK_STATUS){if(!1===r)e.dispatch({type:_.ON_SHOW}),e.dispatch({type:_.ON_CANCEL_HIDE});else{var o=setTimeout((function(){e.dispatch({type:_.ON_HIDE})}),3e3);e.dispatch({type:_.ON_HIDE_IN_FUTURE,payload:o})}e.dispatch({type:_.ON_NETWORK_STATUS_CHANGE,payload:r})}t(n)}(e,t,n,navigator.onLine)}}},K=function(e,t,n,r){return n.type===_.ON_RECONNECT_FAILURE&&A("100:2316:4"),n.type===_.ON_RECONNECT&&A("100:2316:3"),n.type===_.ON_CHECK_NETWORK_STATUS&&(r?(A("100:2316:2"),H()):(A("100:2316:1"),L=Date.now())),t(n)},x=function(e){return function(e){return function(t){return K(0,e,t,navigator.onLine)}}},M=function(e){return function(t){return function(n){if("ON_GEOLOCATION_DENIED"===n.type){e.dispatch({type:_.ON_SHOW});var r=setTimeout((function(){e.dispatch({type:_.ON_HIDE}),e.dispatch({type:_.ON_GEOLOCATION_RESET})}),3e3);e.dispatch({type:_.ON_HIDE_IN_FUTURE,payload:r})}return t(n)}}};t.default=function(e){var t=[F,k,x,W,M];Object(r.render)(e,function(e){return v(Object(r.createComponent)(h,O()(j,g),i.applyMiddleware.apply(void 0,e)))}(t),{})}}}]);
//# sourceMappingURL=toast-bar.69346791abae84ccd6e8.js.map