var siteurl="",domain="",noteCategory="recentsearchairv2",IsTestingEnable=!1,httpService={invoke:function(e,t,i,a,r,n){var l=new XMLHttpRequest;for(var o in l.onreadystatechange=function(){4===l.readyState&&n(l)},l.open(e,t,!0),l.timeout=r,a)l.setRequestHeader(o,a[o]);l.send(i)}},noteServiceLib={isEnable:!0,Save:function(e){if(null!==JSON.parse(e)){("localhost"===window.location.hostname||IsTestingEnable)&&"m.staging.cheapoair.com"===window.location.hostname?(siteurl=location.protocol+"//m.cheapoair.com/profiles/PublicApi/v2/PersonNote/",domain="www.cheapoair.com"):(siteurl=notebase.getNoteServiceURL()+"/profiles/PublicApi/v2/PersonNote/",domain=window.location.hostname);try{var t={"X-DomainId":domain,"Content-Type":"application/json",dataType:"json"};"localhost"===window.location.hostname?t["X-Debug"]="true":notebase.checkPreliveCookie()?t["X-Debug"]="true":t["X-Debug"]="false";httpService.invoke("POST",siteurl,e,t,600,function(e){if(200!==e.status)return!1;var t=notebase.getCookie("FP-RecentSearch"),i=JSON.parse(e.responseText);notebase.setCookie("FP-RecentSearch",t+"&"+i)})}catch(e){}}},Update:function(e){if(null!==JSON.parse(e)){("localhost"===window.location.hostname||IsTestingEnable)&&"m.staging.cheapoair.com"===window.location.hostname?(siteurl=location.protocol+"//m.cheapoair.com/profiles/PublicApi/v2/PersonNote/",domain="www.cheapoair.com"):(siteurl=notebase.getNoteServiceURL()+"/profiles/PublicApi/v2/PersonNote/",domain=window.location.hostname);try{var t={"X-DomainId":domain,"Content-Type":"application/json",dataType:"json"};"localhost"===window.location.hostname?t["X-Debug"]="true":notebase.checkPreliveCookie()?t["X-Debug"]="true":t["X-Debug"]="false";httpService.invoke("PUT",siteurl,e,t,600,function(e){if(200!==e.status)return!1})}catch(e){}}},Get:function(e,t){var i=notebase.getAnonymousId(),a=notebase.getPersonGuid();if(!(null==e||validateNoteArgs.isEmptyNullOrUndefined(i)&&validateNoteArgs.isEmptyNullOrUndefined(a))){"localhost"===window.location.hostname?(siteurl="https://www.cheapoair.com/profiles/PublicApi/v1/PersonNote/?category_=recentsearchairv2&take_=6",domain="www.cheapoair.com"):(siteurl=notebase.getNoteServiceURL()+"/profiles/PublicApi/v1/PersonNote?category_="+e+"&take_="+t,domain=window.location.hostname);try{var r={"X-DomainId":domain,"X-AID":i,"Content-Type":"application/json"};validateNoteArgs.isEmptyNullOrUndefined(a)||(r["X-PersonGuid"]=a),"localhost"===window.location.hostname?r["X-Debug"]="true":notebase.checkPreliveCookie()?r["X-Debug"]="true":r["X-Debug"]="false";httpService.invoke("GET",siteurl,null,r,500,function(e){return 200===e.status&&JSON.parse(e.responseText)})}catch(e){}}},ValidateAndSaveNoteArg:function(e){var t=recentSearchNoteAir;t.NoteArgs=e.NoteArgs;try{if(e.NoteArgs.length>0&&!validateNoteArgs.isEmptyNullOrUndefined(e.NoteArgs[0].Data)){var i=e.NoteArgs[0].Data;if(validateNoteArgs.isEmptyNullOrUndefined(i.SearchDetail)||!validateNoteArgs.isValidatSearchDetailArgs(i.SearchDetail))return"Please Provide Serach Details";t.NoteArgs[0].Data.SearchDetail=i.SearchDetail,notebase.setCookie("FP-RecentSearch",notebase.generateKey(i.SearchDetail)),!validateNoteArgs.isEmptyNullOrUndefined(i.ContractDetail)&&validateNoteArgs.isValidContractDetailArgs(i.ContractDetail)&&(t.NoteArgs[0].Data.ContractDetail=i.ContractDetail),!validateNoteArgs.isEmptyNullOrUndefined(i.FareDetails)&&validateNoteArgs.isValidFareDetailArgs(i.FareDetails)&&(t.NoteArgs[0].Data.FareDetails=i.FareDetails),!validateNoteArgs.isEmptyNullOrUndefined(i.PaxDetails)&&validateNoteArgs.isValidPaxDetailArgs(i.PaxDetails)&&(t.NoteArgs[0].PersonalInfo=notebase.setPersonalInfo(i.PaxDetails.Email),i.PaxDetails.Email="",t.NoteArgs[0].Data.PaxDetails=i.PaxDetails),!validateNoteArgs.isEmptyNullOrUndefined(i.DeviceDetails)&&validateNoteArgs.isValidDeviceDetailsArgs(i.DeviceDetails)&&(t.NoteArgs[0].Data.DeviceDetails=i.DeviceDetails),!validateNoteArgs.isEmptyNullOrUndefined(i.TrafficSource)&&validateNoteArgs.isValidTrafficSourceArgs(i.TrafficSource)&&(t.NoteArgs[0].Data.TrafficSource=i.TrafficSource),t.NoteArgs[0].Data.RefreshDateTime=i.RefreshDateTime,t.NoteArgs[0].Data.PriceExpireDuration=i.PriceExpireDuration,t.NoteArgs[0].Data.PriceExDateTime=notebase.updateDate(i.PriceExDateTime),t.NoteArgs[0].Data.ServerName=i.ServerName,t.NoteArgs[0].Data.SessionToken=i.SessionToken,t.NoteArgs[0].Data.LangCode=i.LangCode,t.NoteArgs[0].Data.BookingGuid="00000000-0000-0000-0000-000000000000",t.NoteArgs[0].Data.DeepLinkUrl=i.DeepLinkUrl,t.NoteArgs[0].SaveOn=e.NoteArgs[0].SaveOn,t.NoteArgs[0].ArgsLabel=notebase.generateKey(i.SearchDetail),t.NoteArgs[0].ArgsCategory=e.NoteArgs[0].ArgsCategory,t.NoteArgs[0].Locale=e.NoteArgs[0].Locale,t.NoteArgs[0].MetaData.ContentType="application/json"}if(validateNoteArgs.isEmptyNullOrUndefined(e.PersonGuid))if(validateNoteArgs.isEmptyNullOrUndefined(notebase.getFPTravellerCookie()))t.PersonGuid="00000000-0000-0000-0000-000000000000";else{var a=notebase.getFPTravellerCookie().split("&");a.length>1&&a[1].split("=").length>1?t.PersonGuid=a[1].split("=")[1]:t.PersonGuid="00000000-0000-0000-0000-000000000000"}else t.PersonGuid=e.PersonGuid;if(t.NoteCategory="recentsearchairv2",validateNoteArgs.isEmptyNullOrUndefined(e.Id)){if(validateNoteArgs.isEmptyNullOrUndefined(notebase.getCookie("uid")))return"Please Provide Anonymous Id";t.Id=notebase.getCookie("uid")}else t.Id=e.Id;noteServiceLib.Save(JSON.stringify(t))}catch(e){"object"==typeof console&&console.log("Error -- ValidateAndSaveNoteArg-- "+e.message)}},ValidateAndUpdateNoteArg:function(e,t){var i=new upadteRecentsearcNoteArg;if(i.NoteCategory=noteCategory,i.ArgumentId=t,i.PartialNoteDataList=[],validateNoteArgs.isEmptyNullOrUndefined(notebase.getCookie("uid"))||(i.AnonymousId=notebase.getCookie("uid")),!validateNoteArgs.isEmptyNullOrUndefined(notebase.getFPTravellerCookie())){var a=notebase.getFPTravellerCookie().split("&");a.length>1&&a[1].split("=").length>1&&(i.PersonGuid=a[1].split("=")[1])}try{if(e.NoteArgs.length>0&&!validateNoteArgs.isEmptyNullOrUndefined(e.NoteArgs[0].Data)){var r=e.NoteArgs[0].Data;if(!validateNoteArgs.isEmptyNullOrUndefined(r.SearchDetail)&&validateNoteArgs.isValidatSearchDetailArgs(r.SearchDetail)){var n=new partialNoteData("Data.SearchDetail",r.SearchDetail);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.ContractDetail)&&validateNoteArgs.isValidContractDetailArgs(r.ContractDetail)){n=new partialNoteData("Data.ContractDetail",r.ContractDetail);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.FareDetails)&&validateNoteArgs.isValidFareDetailArgs(r.FareDetails)){n=new partialNoteData("Data.FareDetails",r.FareDetails);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.PaxDetails)&&validateNoteArgs.isValidPaxDetailArgs(r.PaxDetails)){n=new partialNoteData("Data.PaxDetails",r.PaxDetails);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.DeviceDetails)&&validateNoteArgs.isValidDeviceDetailsArgs(r.DeviceDetails)){n=new partialNoteData("Data.DeviceDetails",r.DeviceDetails);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.TrafficSource)&&validateNoteArgs.isValidTrafficSourceArgs(r.TrafficSource)){n=new partialNoteData("Data.TrafficSource",r.TrafficSource);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.RefreshDateTime)&&validateNoteArgs.isValidDate(r.RefreshDateTime)){n=new partialNoteData("Data.RefreshDateTime",r.RefreshDateTime);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.PriceExDateTime)&&validateNoteArgs.isValidDate(r.PriceExDateTime)){n=new partialNoteData("Data.PriceExDateTime",notebase.updateDate(r.PriceExDateTime));i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.PriceExpireDuration)&&validateNoteArgs.isNumeric(r.PriceExpireDuration)){n=new partialNoteData("Data.PriceExpireDuration",r.PriceExpireDuration);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.ServerName)){n=new partialNoteData("Data.ServerName",r.ServerName);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.SessionToken)&&validateNoteArgs.isAlphanumeric(r.SessionToken)){n=new partialNoteData("Data.SessionToken",r.SessionToken);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.BookingGuid)){n=new partialNoteData("Data.BookingGuid",r.BookingGuid);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.LangCode)){n=new partialNoteData("Data.LangCode",r.LangCode);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(r.DeepLinkUrl)){n=new partialNoteData("Data.DeepLinkUrl",r.DeepLinkUrl);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(e.NoteArgs[0].ArgsCategory)&&validateNoteArgs.isAlpha(e.NoteArgs[0].ArgsCategory)){n=new partialNoteData("ArgsCategory",e.NoteArgs[0].ArgsCategory);i.PartialNoteDataList.push(n)}if(!validateNoteArgs.isEmptyNullOrUndefined(e.NoteArgs[0].PersonalInfo)){n=new partialNoteData("PersonalInfo",e.NoteArgs[0].PersonalInfo);i.PartialNoteDataList.push(n)}}noteServiceLib.Update(JSON.stringify(i))}catch(e){"object"==typeof console&&console.log("Error -- ValidateAndUpdateNoteArg-- "+e.message)}},onListingPageLoad:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t="",i=JSON.parse(notebase.getCookie("FP-RefreshData"));validateNoteArgs.isEmptyNullOrUndefined(i)&&(i=new isRefresh(0,0),notebase.setCookie("FP-RefreshData",JSON.stringify(i)));var a=JSON.parse(e),r="",n=notebase.getCookie("FP-RecentSearch");validateNoteArgs.isEmptyNullOrUndefined(n)||(n=n.split("&")[0]);try{validateNoteArgs.isEmptyNullOrUndefined(n)||(r=notebase.getCookie("FP-RecentSearch").split("&")[1]);var l=a.NoteArgs[0].Data.SearchDetail;if(validateNoteArgs.isEmptyNullOrUndefined(r))0===i.onListingPageOnSaveEvent&&("Please Provide Anonymous Id"===(t=noteServiceLib.ValidateAndSaveNoteArg(a))&&"Please Provide Serach Details"===t||(i.onListingPageOnSaveEvent=1,notebase.setCookie("FP-RefreshData",JSON.stringify(i))));else if(validateNoteArgs.isEmptyNullOrUndefined(n)&&validateNoteArgs.isEmptyNullOrUndefined(l)){if(validateNoteArgs.isEmptyNullOrUndefined(l))return"Invalid Serach Details";notebase.generateKey(l),noteServiceLib.ValidateAndUpdateNoteArg(a,r)}else if(n===notebase.generateKey(l))noteServiceLib.ValidateAndUpdateNoteArg(a,r);else{"Please Provide Anonymous Id"!==(t=noteServiceLib.ValidateAndSaveNoteArg(a))&&"Please Provide Serach Details"!==t&&(i.onListingPageOnSaveEvent=1,notebase.setCookie("FP-RefreshData",JSON.stringify(i)))}}catch(e){console.log("Error -- ListingPageLoad "+e.message)}}},onListingPageSearchClick:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t=JSON.parse(notebase.getCookie("FP-RefreshData"));validateNoteArgs.isEmptyNullOrUndefined(t)&&(t=new isRefresh(0,0),notebase.setCookie("FP-RefreshData",JSON.stringify(t)));var i=JSON.parse(e),a="",r=notebase.getCookie("FP-RecentSearch");validateNoteArgs.isEmptyNullOrUndefined(r)||(r=r.split("&")[0]);try{validateNoteArgs.isEmptyNullOrUndefined(r)||(a=notebase.getCookie("FP-RecentSearch").split("&")[1]);var n=i.NoteArgs[0].Data.SearchDetail;if(validateNoteArgs.isEmptyNullOrUndefined(r)&&validateNoteArgs.isEmptyNullOrUndefined(n)){if(validateNoteArgs.isEmptyNullOrUndefined(n))return"Invalid Serach Details";notebase.generateKey(n),noteServiceLib.ValidateAndUpdateNoteArg(i,a)}else if(r===notebase.generateKey(n))noteServiceLib.ValidateAndUpdateNoteArg(i,a);else{var l=noteServiceLib.ValidateAndSaveNoteArg(i);"Please Provide Anonymous Id"!==l&&"Please Provide Serach Details"!==l&&(t.onListingPageOnSaveEvent=1,notebase.setCookie("FP-RefreshData",JSON.stringify(t)))}}catch(e){console.log("Error -- ListingPageSearchClick "+e.message)}}},onPaymentPageLoad:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t="",i=JSON.parse(notebase.getCookie("FP-RefreshData"));validateNoteArgs.isEmptyNullOrUndefined(i)&&(i=new isRefresh(0,0),notebase.setCookie("FP-RefreshData",JSON.stringify(i)));var a=JSON.parse(e),r="",n=notebase.getCookie("FP-RecentSearch");validateNoteArgs.isEmptyNullOrUndefined(n)||(n=n.split("&")[0]);try{validateNoteArgs.isEmptyNullOrUndefined(n)||(r=notebase.getCookie("FP-RecentSearch").split("&")[1]);var l=a.NoteArgs[0].Data.SearchDetail;if(validateNoteArgs.isEmptyNullOrUndefined(r))0===i.onPaymentPageOnSaveEvent&&("Please Provide Anonymous Id"===(t=noteServiceLib.ValidateAndSaveNoteArg(a))&&"Please Provide Serach Details"===t||(i.onPaymentPageOnSaveEvent=1,notebase.setCookie("FP-RefreshData",JSON.stringify(i))));else if(validateNoteArgs.isEmptyNullOrUndefined(n)&&validateNoteArgs.isEmptyNullOrUndefined(l)){if(validateNoteArgs.isEmptyNullOrUndefined(l))return"Invalid Serach Details";notebase.generateKey(l),noteServiceLib.ValidateAndUpdateNoteArg(a,r)}else if(n===notebase.generateKey(l))noteServiceLib.ValidateAndUpdateNoteArg(a,r);else{"Please Provide Anonymous Id"!==(t=noteServiceLib.ValidateAndSaveNoteArg(a))&&"Please Provide Serach Details"!==t&&(i.onPaymentPageOnSaveEvent=1,notebase.setCookie("FP-RefreshData",JSON.stringify(i)))}}catch(e){console.log("Error -- PaymentPageLoad"+e.message)}}},onPaymentPageCurrencyChange:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t=JSON.parse(e),i="",a=notebase.getCookie("FP-RecentSearch").split("&")[0];try{validateNoteArgs.isEmptyNullOrUndefined(a)||(i=notebase.getCookie("FP-RecentSearch").split("&")[1]),noteServiceLib.ValidateAndUpdateNoteArg(t,i)}catch(e){"object"==typeof console&&console.log("Error -- PaymentPageCuryrencChange -- "+e.message)}}},onBtnBookClick:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t=JSON.parse(e),i="",a=notebase.getCookie("FP-RecentSearch").split("&")[0];try{validateNoteArgs.isEmptyNullOrUndefined(a)||(i=notebase.getCookie("FP-RecentSearch").split("&")[1]),noteServiceLib.ValidateAndUpdateNoteArg(t,i)}catch(e){"object"==typeof console&&console.log("Error -- BtnBookClick-- "+e.message)}}},onBlurRetypeEmail:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t=JSON.parse(e),i="",a=notebase.getCookie("FP-RecentSearch").split("&")[0];try{validateNoteArgs.isEmptyNullOrUndefined(a)||(i=notebase.getCookie("FP-RecentSearch").split("&")[1]),noteServiceLib.ValidateAndUpdateNoteArg(t,i)}catch(e){"object"==typeof console&&console.log("Error -- onBlurRetypeEmail-- "+e.message)}}},beforeConfirmationPage:function(e){if(!1!==this.isEnable){if("undefined"===e||""===e)return!1;var t=JSON.parse(e),i="",a=notebase.getCookie("FP-RecentSearch").split("&")[0];try{validateNoteArgs.isEmptyNullOrUndefined(a)||(i=notebase.getCookie("FP-RecentSearch").split("&")[1]),noteServiceLib.ValidateAndUpdateNoteArg(t,i)}catch(e){"object"==typeof console&&console.log("Error -- beforeConfirmationPage-- "+e.message)}}}},constants={ONEWAYTRIP:"ONEWAYTRIP",ROUNDTRIP:"ROUNDTRIP",MULTICITY:"MULTICITY",OPENJAW:"OPENJAW",RecentSearch:"RS"},tripEnum={ONEWAYTRIP:"1",ROUNDTRIP:"2",OPENJAW:"3",MULTICITY:"4"},notebase={getNoteServiceURL:function(){var e=notebase.getCookie("awsrouter");return siteurl=validateNoteArgs.isEmptyNullOrUndefined(e)?"":location.protocol+"//api.cheapoair.com"},setAwsRouterCookie:function(e){var t=notebase.getCookie("awsrouter");if(validateNoteArgs.isEmptyNullOrUndefined(t)){var i=this.getFactor(e);0==(Math.floor(2147483647*Math.random())+1)%i&&notebase.writeCookie("awsrouter","true",180)}},getFactor:function(e){return Math.floor(100/e)},writeCookie:function(e,t,i){var a=new Date;i=i||365,a.setTime(+a+864e5*i),window.document.cookie=e+"="+t+"; expires="+a.toGMTString()+"; path=/"},printLog:function(e,t){},setPersonalInfo:function(e){return{Email:e}},getAnonymousId:function(){return this.getCookie("uid")},getPersonGuid:function(){var e=this.getFPTravellerCookie().split("&");return e.length>1&&e[1].split("=").length>1?e[1].split("=")[1]:null},isCookieExist:function(e){"use strict";for(var t=document.cookie.split("; "),i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},isDataExistInLocalStorage:function(e){"use strict";return null!==localStorage.getItem(e)},removeAllCookie:function(){"use strict";for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var i=e[t].trim().split("=")[0];0===i.indexOf(constants.RecentSearch)&&this.eraseCookie(i)}},updateDate:function(e){if(!validateNoteArgs.isEmptyNullOrUndefined(e)){var t=new Date(Date.parse(e));return t=new Date(new Date(t).setDate(t.getDate()+1)).toISOString()}},generateKey:function(e){"use strict";var t="",i="";if(null!==e&&null!==e.TripType&&0!==e.Segments.length){if(e.TripType!==constants.ONEWAYTRIP&&e.TripType!==tripEnum.ONEWAYTRIP){var a=e.Segments.length;t=this.getFormattedDate(e.Segments[0].Date),i=this.getFormattedDate(e.Segments[a-1].Date);var r="";return e.TripType===constants.ROUNDTRIP||e.TripType===tripEnum.ROUNDTRIP?(r=tripEnum.ROUNDTRIP,e.Segments[0].Origin+e.Segments[a-1].Origin+"-"+r+"-"+t.replace(/-/g,"")+i.replace(/-/g,"")):e.TripType===constants.MULTICITY||e.TripType===tripEnum.MULTICITY?(r=tripEnum.MULTICITY,e.Segments[0].Origin+e.Segments[a-1].Destination+"-"+r+"-"+t.replace(/-/g,"")+i.replace(/-/g,"")):(r=tripEnum.OPENJAW,e.Segments[0].Origin+e.Segments[a-1].Destination+"-"+r+"-"+t.replace(/-/g,"")+i.replace(/-/g,""))}return t=this.getFormattedDate(e.Segments[0].Date),e.Segments[0].Origin+e.Segments[0].Destination+"-"+tripEnum.ONEWAYTRIP+"-"+t.replace(/-/g,"")}},getFormattedDate:function(e){var t=new Date(e),i=t.getMonth()+1;return t.getFullYear()+"-"+i+"-"+t.getDate()},validateSegment:function(e){"use strict";return null!==e&&(null!==e.tripType&&(0!==e.segments.length&&(e.tripType===constants.ONEWAYTRIP&&null!==e.segments[0].origin&&null!==e.segments[0].destination&&null!==e.segments[0].date||e.tripType===constants.ROUNDTRIP&&e.segments.length>1&&null!==e.segments[1].origin&&null!==e.segments[1].destination&&null!==e.segments[1].date||void 0)))},checkPreliveCookie:function(){"use strict";for(var e=document.cookie.split("; "),t=0;t<e.length;t++)if("_____MKT_STG1_____=true"==e[t]||"_____MKT_STG2_____=true"==e[t]||"_____MKT_PRELIVE1_____=true"==e[t]||"_____MKT_PRELIVE2_____=true"==e[t]||"_____MKT_PRELIVE3_____=true"==e[t]||"_____MKT_PRELIVE4_____=true"==e[t])return!0;return!1},getRootDomainNameFromUrl:function(){var e=location.host.split("."),t=".";for(i=1;i<=e.length-1;i++)t+=e[i],e.length-1>i&&(t+=".");return t},setCookie:function(e,t){document.cookie=e+"="+t+notebase.setCookieExpiryTime()+";domain="+notebase.getRootDomainNameFromUrl()+"; path=/"},setDataInLocalStorage:function(e,t){localStorage.setItem(e,t)},setCookieExpiryTime:function(){var e=new Date;return e.setTime(+e+31536e6),"; expires="+e.toUTCString()},setCookiePath:function(){return"; path=/"},checkDataIsNullOrUndefined:function(e){return null!==e},isSameJsonObject:function(e,t){return JSON.stringify(e).toLowerCase()==JSON.stringify(t).toLowerCase()},getFPTravellerCookie:function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)FPTraveller\s*\=\s*([^;]*).*$)|^.*$/,"$1");return e&&-1!==e.indexOf("ProfileUserId")?e:this.getCookie("FPTraveller")},getCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var r=i[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},getJsonDataByKey:function(e){return localStorage?localStorage.getItem(e):notebase.getCookie(e)},eraseCookie:function(e){var t=new Date;t.setTime(t.getTime()+-864e5);var i="; expires="+t.toGMTString();document.cookie=e+"="+i},clearlocalStorage:function(){for(keys=Object.keys(localStorage),i=0;i<keys.length;i++)key=localStorage.key(i),key.substring(0,3)===constants+"-"&&localStorage.removeItem(key)},convertDate:function(e){function t(e){return e<10?"0"+e:e}var i=new Date(e);return[t(i.getMonth()+1),t(i.getDate()),i.getFullYear()].join("/")},generateDeepLinkForList:function(e){var t="",i=location.protocol+"//"+window.location.hostname,a=e.SearchDetails.Travelers,r=e.SearchDetails.Segments;if(r.length>0)if("ROUNDTRIP"==e.SearchDetails.TripType)for(var n=0;n<r.length;n++)t+="&d1="+r[n].Origin+"&r1="+r[n].Destination+"&dt1="+this.convertDate(r[n].Date)+"&tm1=1100",t+="&d2="+r[n+=1].Origin+"&r2="+r[n].Destination+"&dt2="+this.convertDate(r[n].Date)+"&tm2=1100";else t="&d1="+r[0].Origin+"&r1="+r[0].Destination+"&dt1="+this.convertDate(r[0].Date)+"&tm1=1100";return i+"/default.aspx?tabid=1832"+(t+="&ad="+a.Adults+"&sr="+a.Seniors+"&ch="+a.Child+"&is="+a.SeatInfants+"&il="+a.InfantsOnLap+"&class="+e.SearchDetails.ServiceClass+"&ns=False")}},validateNoteArgs={isValidatSearchDetailArgs:function(e){"use strict";var t=!1;if(validateNoteArgs.isEmptyNullOrUndefined(e))return!1;if(validateNoteArgs.isEmptyNullOrUndefined(e.SearchDateTime)||!validateNoteArgs.isValidDate(e.SearchDateTime)||validateNoteArgs.isEmptyNullOrUndefined(e.TripType)||!validateNoteArgs.isAlpha(e.TripType)||validateNoteArgs.isEmptyNullOrUndefined(e.Segments)||validateNoteArgs.isEmptyNullOrUndefined(e.ServiceClass)||validateNoteArgs.isEmptyNullOrUndefined(e.IsFlexibleDate)||validateNoteArgs.isEmptyNullOrUndefined(e.IsDirectFlight)||validateNoteArgs.isEmptyNullOrUndefined(e.IsNearbyAirports)||validateNoteArgs.isEmptyNullOrUndefined(e.Travelers)||validateNoteArgs.isEmptyNullOrUndefined(e.RefineSearchFilter))return!1;var i=e.Segments,a=e.Travelers;e.refineSearchFilter;if(validateNoteArgs.isEmptyNullOrUndefined(a.Adults)||validateNoteArgs.isEmptyNullOrUndefined(a.Seniors)||validateNoteArgs.isEmptyNullOrUndefined(a.Youth)||validateNoteArgs.isEmptyNullOrUndefined(a.Child)||validateNoteArgs.isEmptyNullOrUndefined(a.Kid)||validateNoteArgs.isEmptyNullOrUndefined(a.InfantsOnLap)||validateNoteArgs.isEmptyNullOrUndefined(a.SeatInfants)||!validateNoteArgs.isNumeric(a.Adults)||!validateNoteArgs.isNumeric(a.Seniors)||validateNoteArgs.isEmptyNullOrUndefined(a.Youth)||!validateNoteArgs.isNumeric(a.Child)||!validateNoteArgs.isNumeric(a.Kid)||!validateNoteArgs.isNumeric(a.InfantsOnLap)||!validateNoteArgs.isNumeric(a.SeatInfants))return!1;if(t=!0,e.TripType==constants.ONEWAYTRIP){if(!validateNoteArgs.isValidSegment(i[0]))return!1;t=!0}else for(var r=0;r<i.length;r++){if(!validateNoteArgs.isValidSegment(i[r]))return!1;t=!0}if(validateNoteArgs.isEmptyNullOrUndefined(e.PreferredAirLine))t=!0;else{if(!validateNoteArgs.isAlpha(e.PreferredAirLine))return!1;t=!0}return t},isValidPaxDetailArgs:function(e){"use strict";var t=!1;if(validateNoteArgs.isEmptyNullOrUndefined(e))return!1;if(validateNoteArgs.isEmptyNullOrUndefined(e.LastName))t=!0;else{if(!validateNoteArgs.isNameValid(e.LastName))return!1;t=!0}if(validateNoteArgs.isEmptyNullOrUndefined(e.FirstName))t=!0;else{if(!validateNoteArgs.isNameValid(e.FirstName))return!1;t=!0}return t},isValidContractDetailArgs:function(e){"use strict";var t=!1;if(validateNoteArgs.isEmptyNullOrUndefined(e))return!1;if(!validateNoteArgs.isEmptyNullOrUndefined(e.Trips)&&e.Trips.length>0)for(var i=e.Trips,a=0;a<i.length;a++){if(!validateNoteArgs.isValidFlightsDetailsArgs(i[a]))return!1;t=!0}return t},isValidFlightsDetailsArgs:function(e){"use strict";for(var t=!1,i=0;i<e.Flights.length;i++){if(validateNoteArgs.isEmptyNullOrUndefined(e.Flights[i].Origin)||validateNoteArgs.isEmptyNullOrUndefined(e.Flights[i].Destination)||!validateNoteArgs.isAlphanumeric(e.Flights[i].Airline)||validateNoteArgs.isEmptyNullOrUndefined(e.Flights[i].FlightNo)||validateNoteArgs.isEmptyNullOrUndefined(e.Flights[i].ArrivalDateTime)||validateNoteArgs.isEmptyNullOrUndefined(e.Flights[i].DepartureDateTime)||!validateNoteArgs.isAlphanumeric(e.Flights[i].FlightNo)||!validateNoteArgs.isValidDate(e.Flights[i].ArrivalDateTime)||!validateNoteArgs.isValidDate(e.Flights[i].DepartureDateTime)||!validateNoteArgs.isValidCityCode(e.Flights[i].Origin)||!validateNoteArgs.isValidCityCode(e.Flights[i].Destination))return!1;t=!0}return t},isValidDate:function(e){return"Invalid Date"!==new Date(e).toDateString()},isValidSegment:function(e){return!(validateNoteArgs.isEmptyNullOrUndefined(e.Origin)||validateNoteArgs.isEmptyNullOrUndefined(e.Destination)||validateNoteArgs.isEmptyNullOrUndefined(e.Date)||!validateNoteArgs.isValidDate(e.Date)||!validateNoteArgs.isValidCityCode(e.Origin)||!validateNoteArgs.isValidCityCode(e.Destination))},isValidCityCode:function(e){return!(!validateNoteArgs.isAlpha(e)||3!==e.length)},isValidFareDetailArgs:function(e){"use strict";if(validateNoteArgs.isEmptyNullOrUndefined(e))return!1;if(!validateNoteArgs.isEmptyNullOrUndefined(e.ActualCurrencyInfo)&&!validateNoteArgs.isEmptyNullOrUndefined(e.DisplayCurrencyInfo)){var t=e.ActualCurrencyInfo,i=e.DisplayCurrencyInfo;if(!validateNoteArgs.isEmptyNullOrUndefined(t.ISOCode)&&!validateNoteArgs.isEmptyNullOrUndefined(t.Ratio)&&!validateNoteArgs.isEmptyNullOrUndefined(t.Symbol)&&!validateNoteArgs.isEmptyNullOrUndefined(i.ISOCode)&&!validateNoteArgs.isEmptyNullOrUndefined(i.Ratio)&&!validateNoteArgs.isEmptyNullOrUndefined(i.Symbol)&&validateNoteArgs.isAlpha(t.ISOCode)&&validateNoteArgs.isNumericFloat(t.Ratio)&&!validateNoteArgs.isNumeric(t.Symbol)&&validateNoteArgs.isAlpha(i.ISOCode)&&validateNoteArgs.isNumericFloat(i.Ratio)&&!validateNoteArgs.isNumeric(i.Symbol)&&!validateNoteArgs.isEmptyNullOrUndefined(e.BaseFare)&&!validateNoteArgs.isEmptyNullOrUndefined(e.Tax))return!0}return!1},isValidTrafficSourceArgs:function(e){"use strict";return!validateNoteArgs.isEmptyNullOrUndefined(e)&&(!validateNoteArgs.isEmptyNullOrUndefined(e.AffiliateCode)&&!validateNoteArgs.isEmptyNullOrUndefined(e.AffiliateSubCode))},isValidDeviceDetailsArgs:function(e){"use strict";return!validateNoteArgs.isEmptyNullOrUndefined(e)&&!(validateNoteArgs.isEmptyNullOrUndefined(e.DeviceId)||validateNoteArgs.isEmptyNullOrUndefined(e.UserAgent)||!validateNoteArgs.isAlphanumeric(e.DeviceId))},isNameValid:function(e){return/^[a-zA-Z\s-\']+$/.test(e)&&/^[a-zA-Z]/.test(e)},isEmptyNullOrUndefined:function(e){return null==e||""===e},isValidEmail:function(e){return/^[a-z0-9]((\+|_|-|\.)?[a-z0-9]){0,}\@[a-z0-9]((\.|-)?[a-z0-9]){0,}\.[a-z]{2,4}$/i.test(e)},isAlphanumeric:function(e){return/^[a-zA-Z0-9]+$/.test(e)},isAlphanumericWithSpace:function(e){return/^[a-zA-Z0-9]+\s[a-zA-Z0-9]+$/.test(e)},isAlpha:function(e){return/^[a-zA-Z ]+$/.test(e)},isNumeric:function(e){return/^[0-9]+$/.test(e)},isNumericFloat:function(e){return/^[0-9.]+$/.test(e)},isSymbol:function(e){var t=/[a-zA-Z0-9]/;return e.length>=1&&!t.test(e)}},recentSearchNoteAir={RecordMigrated:!1,NoteArgs:[],PersonGuid:null,NoteCategory:null,Id:null},NoteArgs={id:null,personInfoId:null,Data:{SearchDetail:{SearchDateTime:null,TripType:null,Segments:[],Travelers:{Adults:null,Seniors:null,Youth:null,Child:null,Kid:null,InfantsOnLap:null,SeatInfants:null},ServiceClass:null,PreferredAirLine:null,IsFlexibleDate:null,IsNearbyAirports:null,IsDirectFlight:null,RefineSearchFilter:{StopFilter:{NonStopUnCheck:!0,UncheckNonstop:null,OnlyNonstop:null,Uncheck1stop:null,Only1stop:null,Uncheck2stops:null,Only2stops:null},FlightTimesFilter:{GoingDepartFlightTime:null,GoingArriveFlightTime:null,ReturnDepartFlightTime:null,ReturnArriveFlightTime:null},ConnectionTimeFilter:{ConnectionTime:null},DateTilter:{FlexibleDateChecked:null,FlexibleDateUnchecked:null},AirportFilter:{AlternateAirportChecked:null,AlternateAirportUnchecked:null,DepartingFrom:{AirportName:null,OnlyAirportName:null}},ArrivingAt:{AirportName:null,OnlyAirportName:null},ConnectingIn:{AirportName:null,OnlyAirportName:null},AirlineFilter:{AirlineByCarrier:{AirportName:null,OnlyAirportName:null}},AirlineByAlliance:{AirportName:null,OnlyAirportName:null},MatrixFilter:{NonstopClicked:null,StopClicked1:null,StopClicked2:null,AirlineNameClicked:null}}},ContractDetail:{Trips:[]},FareDetails:{ActualCurrencyInfo:{ISOCode:null,Ratio:null,Symbol:null},DisplayCurrencyInfo:{ISOCode:null,Ratio:null,Symbol:null},BaseFare:null,Tax:null},PaxDetails:{FirstName:null,LastName:null,Email:null,IsNLSubscribed:null},DeviceDetails:{DeviceId:null,UserAgent:null},TrafficSource:{AffiliateCode:null,AffiliateSubCode:null,RequestedSource:null,PlatformName:null,PageReferrer:null,FlowType:null},RefreshDateTime:null,PriceExDateTime:null,PriceExpireDuration:null,ServerName:null,ClientIp:null,SessionToken:null,LangCode:null,BookingGuid:null,DeepLinkUrl:null},PersonalInfo:null,SaveOn:null,ArgsLabel:null,ArgsCategory:"",Locale:null,MetaData:{ContentType:null}},PersonalInfo={Email:null},segment={origin:null,destination:null,date:null},Trip={Flights:[]},Flight={Origin:null,Destination:null,DepartureDateTime:null,ArrivalDateTime:null,FlightNo:null,Airline:null},upadteRecentsearcNoteArg=function(e,t,i){this.ArgumentId=e,this.NoteCategory=t,this.PartialNoteDataList=i,this.PersonGuid="",this.AnonymousId=""},partialNoteData=function(e,t){this.Path=e,this.Data=t},isRefresh=function(e,t){this.onListingPageOnSaveEvent=e,this.onPaymentPageOnSaveEvent=t},PersonaService={Get:function(e,t){var i="",a="";if(validateNoteArgs.isEmptyNullOrUndefined(notebase.getCookie("uid"))||notebase.getCookie("uid"),!this.isPersonGuidIsExistInFpTravellerCookie()&&(e>0||!validateNoteArgs.isEmptyNullOrUndefined(t))){a=validateNoteArgs.isEmptyNullOrUndefined(t)?"":t,i=validateNoteArgs.isEmptyNullOrUndefined(e)?"":e,"localhost"===window.location.hostname?(siteurl="https://www.cheapoair.com/profiles/PublicApi/v1/PersonNote/GetPersona?signupSource=WebAPI-AudienceIdMapper&audienceId="+i+"&email="+a,domain="www.cheapoair.com"):(siteurl=notebase.getNoteServiceURL()+"/profiles/PublicApi/v1/PersonNote/GetPersona?signupSource=WebAPI-AudienceIdMapper&audienceId="+i+"&email="+a,domain=window.location.hostname);var r=notebase.getAnonymousId(),n=notebase.getPersonGuid(),l=notebase.getFPTravellerCookie();try{var o={"X-DomainId":domain,"X-AID":r,"Content-Type":"application/json"};validateNoteArgs.isEmptyNullOrUndefined(n)||(o["X-PersonGuid"]=n),"localhost"===window.location.hostname?o["X-Debug"]="true":notebase.checkPreliveCookie()?o["X-Debug"]="true":o["X-Debug"]="false";httpService.invoke("GET",siteurl,null,o,500,function(e){if(200!==e.status)return!1;var t=JSON.parse(e.responseText);notebase.setCookie("FPTraveller",l+"&ProfileUserId="+t)})}catch(e){console.log(e)}}},isPersonGuidIsExistInFpTravellerCookie:function(){var e=!1;if(!validateNoteArgs.isEmptyNullOrUndefined(notebase.getFPTravellerCookie())){var t=notebase.getFPTravellerCookie().split("&");t.length>1&&t[1].split("=").length>1&&(e=!0)}return e}};