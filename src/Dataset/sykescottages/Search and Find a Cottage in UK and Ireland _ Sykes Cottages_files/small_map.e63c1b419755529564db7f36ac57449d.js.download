$((function(){"use strict";var a="",e=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);$("[data-role=view-small-map]").click((function(i){i.preventDefault();var t=$(this).hasClass("small-map-close"),o=$(this).parent(),n=$("[data-role=view-small-map]"),s=$(this).parents("#search_results li").find("[data-role=view-small-map-button]");if($(".view-small-map-button").find("span.viewmap").show(),$(".view-small-map-button").find("span.viewphoto").hide(),$(".view_small_map").remove(),$("[data-id="+a+"] .property-image>a:not('.view-on-map')").show(),$("[data-id="+a+"] .prop-image-container > a").css("opacity",1),$("[data-id="+a+"] .rating").show(),$("[data-id="+a+"] .prop-image-container>a:not('.view-on-map')").show(),$("[data-id="+a+"] .prop-image-container .slider-buttons").show(),n.removeClass("small-map-close"),t)s.length&&(s.find("span.viewmap").show(),s.find("span.viewphoto").hide());else{a=$(this).attr("data-id");var l=$("[data-id="+a+"] .prop-image").width(),d="<div class='view_small_map'><div id='smallmap'></div></div>";$("[data-id="+a+"] .prop-image-container .slider-buttons").hide(),$("[data-id="+a+"] .prop-image-container").append(d),$("[data-id="+a+"] .property-image>a").hide(),$("[data-id="+a+"] .rating").hide(),$("[data-id="+a+"] .property-image").append(d),function(a,e){eventTracker.fireEvent("MapLog","Google","Search-Desktop",!0);var i={lat:parseFloat(a),lng:parseFloat(e)},t=new google.maps.Map(document.getElementById("smallmap"),{zoom:10,center:i,disableDefaultUI:!0});"undefined"!=typeof miniMapZoom&&miniMapZoom?t.setZoom(8):t.setZoom(11),new google.maps.Marker({position:i,map:t})}(o.find(".map_lat").val(),o.find(".map_lon").val()),$(this).addClass("small-map-close"),s.find("span.viewmap").hide(),s.find("span.viewphoto").show(),"undefined"!=typeof largerImages10249&&largerImages10249?($("[data-id="+a+"] .view_small_map").css("max-width","100%"),$("[data-id="+a+"] .view_small_map").css("position","absolute"),$("[data-id="+a+"] .view_small_map").css("top","0"),$("[data-id="+a+"] .view_small_map").css("z-index","100"),$("[data-id="+a+"] .view_small_map").width(l),$("[data-id="+a+"] .prop-image-container > a:not(.view-small-map-button)").css("opacity",0)):$("[data-id="+a+"] .prop-image-container>a:not(.view-small-map-button)").hide()}s.length&&!e&&$(".view-small-map-button").not(s).hide(),"undefined"!=typeof largerImages10249&&largerImages10249&&$(window).resize((function(){var a=$(".prop-image-container").width();$(".view_small_map").width(a)}))})),$("[data-role=view-small-map-button]").click((function(a){$(this).parents("#search_results li").find("[data-role=view-small-map]").trigger("click"),eventTracker.fireEvent("SearchResults","Click Map/Image","KEP-7026 - ViewMap Button")})),e?$(this).find("[data-role=view-small-map-button]").show():($(".prop-image-container").mouseover((function(){$(this).find("[data-role=view-small-map-button]").show()})),$(".prop-image-container").mouseout((function(){$(this).find("[data-role=view-small-map-button]").hide()})))}));