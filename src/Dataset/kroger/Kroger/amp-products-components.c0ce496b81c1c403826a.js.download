(window.webpackJsonp=window.webpackJsonp||[]).push([["@kroger/amp-products-components"],{"5z8o":function(t,e,r){},"9HY6":function(t,e,r){},I328:function(t,e,r){"use strict";r.r(e),r.d(e,"reducers",(function(){return l})),r.d(e,"CmsProductList",(function(){return at})),r.d(e,"FilteredTabsByProductList",(function(){return ht}));var n,a,o,i=r("ANjH"),s={},c=((n={upcs:[],metadata:s}).loaded=!1,n.loading=!1,n.error=!1,n.errorMsg="",n),u=((a={hero:[]}).loaded=!1,a.loading=!1,a.error=!1,a.errorMsg="",r("G4qV")),d=function(t){return function(e,r){return function(t,e){return t&&t.products&&t.products[e]}(e,r)&&e.products[r][t]}},p=Object(u.a)((function(t,e){return t&&t.products&&t.products[e]}),d("upcs"),d("metadata"),d("q"),d("loaded"),d("loading"),d("error"),d("errorMsg"),(function(t,e,r,n,a,o,i,u){var d;return t?((d={upcs:e,metadata:r||s,q:n}).loaded=a,d.loading=o,d.error=i,d.errorMsg=u,d):c})),l={ampproducts:Object(i.c)({products:(o="products",function(t,e){var r,n,a,i,s,u;void 0===t&&(t={});var d=e.type,p=e.payload,l=e.gridId,m=e.error;switch(d){case"ampproducts/"+o+"/GET_RESOURCE_REQUEST":return Object.assign({},t,((n={})[l]=Object.assign({},c,((r={}).loading=!0,r)),n));case"ampproducts/"+o+"/GET_RESOURCE_OK":return Object.assign({},t,((i={})[l]=Object.assign({},c,((a={}).loaded=!0,a.upcs=p[l].upcs,a.metadata=p[l].metadata,a.q=p[l].q,a.tax=p[l].tax,a.brand=p[l].brand,a)),i));case"ampproducts/"+o+"/GET_RESOURCE_ERROR":return Object.assign({},t,((u={})[l]=Object.assign({},c,((s={}).error=!0,s.errorMsg=m,s)),u));default:return t}})})},m=r("8OQS"),f=r.n(m),h=r("pVnL"),g=r.n(h),b=r("VbXa"),v=r.n(b),E=r("q1tI"),y=r.n(E),N=r("17x9"),T=r.n(N),C=r("BtTy"),O=r("/MKj"),S=r("dCAT"),I=r("UpSj"),P=r.n(I),j=r("cTvX"),R=function(t){return[1,2,3,4,6].reduce((function(e,r){return t===r&&(e+="u-ppr"+r+" u-ppr"+r+"-abv u-ppr"+r+"-blw "),t<r&&(e+="u-ppr"+r+"-blw "),t>r&&(e+="u-ppr"+r+"-abv "),e}),"")},x=P()({getWidth:function(t){var e=t&&t.querySelector(".ProductGridContainer"),r=e&&e.clientWidth,n=t&&t.clientWidth;return{grid:r||n||1024,container:n||1024}},getHeight:function(t){return t&&t.clientHeight||1024},elementResize:!0}),w=function(t){return function(e){var r,n=e.ppr||(((r=e.containerWidth.grid)<=380?2:r<=580&&2)||r<=767&&3||r<=963&&4||r<=1159&&5||6),a=e.mode,o="grid"===(void 0===a?"grid":a)?{max:n,maxItems:n}:{},i=g()({},e,{},o,{ppr:n,conatinerWidth:e.containerWidth.container});return y.a.createElement("div",{className:R(n)},y.a.createElement(t,i))}},M=r("PJYZ"),_=r.n(M),z=r("UCtt"),G=r("CTMT"),k=r("Fu1v"),q=r("Pn2e"),A=function(t){return{type:"ampproducts/yellowtagplaceholder/SELECT_PREFERRED_STORE",scenarioName:"select_preferred_store",payload:g()({},t)}},L=r("woIj"),U={componentName:"sale items for you",usageContext:"select preferred store"},W=function(t){function e(e){var r;return(r=t.call(this,e)||this).handleClick=r.handleClick.bind(_()(r)),r}v()(e,t);var r=e.prototype;return r.handleClick=function(){this.props.openDropdown(),this.props.selectStore(U)},r.render=function(){var t=this.props,e=t.message,r=t.btnText,n=t.seamlessShipEnabled,a=t.className,o=t.style;return(y.a.createElement(y.a.Fragment,null,y.a.createElement(z.a,{size:"m",className:a+" block",style:o},e),y.a.createElement("div",{className:"flex justify-center items-center h-72"},n?y.a.createElement(k.a,{buttonText:r,buttonPosition:"center"}):y.a.createElement(G.a,{kind:"primary",onClick:this.handleClick},r))))},e}(y.a.Component);W.defaultProps={openDropdown:function(){},selectStore:function(){},seamlessShipEnabled:!1};var F=Object(O.connect)((function(t){return{seamlessShipEnabled:L.d.getToggleOnState(t,"seamlessShipEnabled")}}),(function(t){return{openDropdown:function(){return t(Object(q.c)())},selectStore:function(e){return t(A(e))}}}))(W),D=r("sEfC"),H=r.n(D),B=r("NW6+"),Q=r("Hb59"),V=(r("9HY6"),"error-container pt-72 block text-center"),J=function(t){function e(e){var r;return(r=t.call(this,e)||this).getGridDebounced=H()(r.props.getGrid,500),r}v()(e,t);var r=e.prototype;return r.componentDidMount=function(){this.props.memoize&&this.props.loaded||this.getGrid(this.props)},r.UNSAFE_componentWillReceiveProps=function(t){var e=this.props,r=e.catId,n=e.tax,a=e.q;r===t.catId&&n===t.tax&&a===t.q||this.getGrid(t)},r.getGrid=function(t){this.getGridDebounced(g()({},t))},r.constructError=function(t,e){var r=this.props,n=r.errorMsg,a=r.brand,o=void 0===a?"":a,i=r.catId,s=void 0===i?"":i,c=r.tax,u=void 0===c?"":c,d=r.q,p=void 0===d?"":d,l=r.monet,m=void 0===l?"false":l,f=r.pzn,h=void 0===f?"false":f,g=r.title,b=new Error(t+": "+JSON.stringify({errorMsg:n,title:g,brand:o,catId:s,tax:u,q:p,monet:m,pzn:h}));return b.name=e,b},r.renderError=function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(B.c,{error:this.constructError("Error Failed fetching product list","Failed to load products"),componentName:e.displayName,caughtBy:e.displayName,options:{scenarioName:Q.d.CONTENT_WARNING,usageContext:Q.e.CONTENT_WARNING}}),y.a.createElement(z.a,{size:"m",className:V},"We're sorry, but there was a problem displaying ",this.props.title," ","products. Please try again. If the problem persists, please"," ",y.a.createElement("a",{href:"/hc/help/contact-us",title:"Contact customer service."}," ","contact Customer Service")," ","for assistance."))},r.getCopy=function(t){var e,r;return 0===t.length?(r="Weâ€™re sorry, but your selected store has no products in this department. Please change your store to view products from this department.",e="Change store"):(r="To see the most current offers, please select a store.",e="Select A Store"),{btnText:e,message:r}},r.render=function(){var t=this.props,r=t.error,n=t.loading,a=t.loaded,o=this.props,i=o.upcs,s=void 0===i?[]:i,c=f()(o,["upcs"]),u={"data-qa":this.props["data-qa"]};if(r)return this.renderError();if("NONE"===c.modalityType&&delete c.modalityType,a&&!n&&0===s.length){var d=this.getCopy(s),p=d.message,l=d.btnText;return(y.a.createElement(y.a.Fragment,null,y.a.createElement(B.c,{error:this.constructError("Error No products found","No products found"),componentName:e.displayName,caughtBy:e.displayName,options:{scenarioName:Q.d.CONTENT_WARNING,usageContext:Q.e.CONTENT_WARNING}}),y.a.createElement(F,g()({},this.props,{message:p,btnText:l,className:V}))))}return(y.a.createElement("div",g()({className:"ProductList"},u),y.a.createElement(C.i,g()({},c,{upcs:s}))))},e}(y.a.Component);J.displayName="ProductList";var K,Y={getGrid:function(t){var e=void 0===t?{}:t,r=e.ads,n=void 0===r?"":r,a=e.brand,o=void 0===a?"":a,i=e.count,s=void 0===i?"10":i,c=e.divisionId,u=void 0===c?"":c,d=e.facets,p=void 0===d?"":d,l=e.fulfillmentMethods,m=void 0===l?"PICKUP,DELIVERY,SHIP,IN_STORE":l,f=e.gridId,h=void 0===f?"productGrid":f,g=e.monet,b=void 0===g?"NONE":g,v=e.nutritionValues,E=void 0===v?"":v,y=e.pageOffset,N=void 0===y?"":y,T=e.projections,C=void 0===T?"products.compact":T,O=e.pzn,I=void 0===O?"RELEVANCE":O,P=e.q,j=void 0===P?"":P,R=e.sortOrder,x=void 0===R?"":R,w=e.storeId,M=void 0===w?"":w,_=e.tax,z=void 0===_?"":_;return function(t){t({gridId:h,type:"ampproducts/products/GET_RESOURCE_REQUEST"});var e,r,a,i,c,d=function(t){return t.reduce((function(t,e){return e.placementId&&(t[e.upc]={monetization:{monetization_payload:e.placementId,impression_id:e.placementId}}),t}),{})},l=function(e){void 0===e&&(e=[]),t({gridId:h,errors:e,type:"ampproducts/products/GET_RESOURCE_ERROR"})};return S.a.get("/atlas/v1/search/v1/products-search?"+(e=new URLSearchParams,i=function(t,r){return r&&r.length&&e.append(t,r),e},r=i,a=",",c=function(t,e){return"string"==typeof e&&e.length?e.split(a).reduce((function(e,n){return r(t,n.trim())}),""):null},[i("option.personalization",I),c("option.facets",p),i("option.monetization","TRUE"!==b&&b),i("option.ads",n),i("page.size",s.toString()),i("page.offset",N.toString()),i("sort",x),i("projections",C),i("filter.locationId",""+u+M),i("filter.keyword",j),c("filter.taxonomies",z),c("filter.fulfillmentMethods",m),c("filter.brands",o),c("filter.nutritionValues",E)].filter((function(t){return t})).reduce((function(t,e){return e}),{})).toString()).then((function(t){return t.data})).then((function(e){return e.errors?l(e.errors):(r=e.data.productsSearch,void t({gridId:h,type:"ampproducts/products/GET_RESOURCE_OK",payload:(n={},n[h]={upcs:r.map((function(t){return t.upc})),metadata:d(r),q:j,tax:z,brand:o},n)}));var r,n})).catch((function(t){l(t)}))}}},X=(K=Object(O.connect)((function(t,e){var r=p(t.ampproducts,e.gridId);return{upcs:r.upcs,metadata:r.metadata,loading:r.loading,loaded:r.loaded,error:r.error}}),Y,(function(t,e,r){return r.test?Object.assign({},t,e,r):Object.assign({},r,t,e)}))(J),Object(j.b)(Object(j.i)("PPRAware"),x,Object(j.i)(Object(j.p)(K,"wrapWithPPRClasses")),j.k,w)(K));X.displayName="ConnectedProductList",X.propTypes={catId:T.a.string,tax:T.a.string,count:T.a.number,title:T.a.string,q:T.a.string,gridId:T.a.string,shipmentType:T.a.string,monet:T.a.string,pzn:T.a.string,memoize:T.a.bool,modalityType:T.a.string,empathy:T.a.bool},X.defaultProps={"data-qa":"productList",empathy:!1,gridId:"productList",title:"Start My List",modalityType:"NONE"};var Z=X,$=r("SjGZ"),tt=function(t){var e=function(e){function r(){return e.apply(this,arguments)||this}return v()(r,e),r.prototype.render=function(){var e=this.props,r=e.currentShoppingContext,n=r.storeNumber,a=r.divisionNumber,o=f()(e,["currentShoppingContext"]);return(y.a.createElement(t,g()({storeId:n||"",divisionId:a||""},o)))},r}(y.a.Component);return Object(O.connect)((function(t,e){return{currentShoppingContext:Object($.b)(t,e.modalityType||"NONE")}}))(e)},et=r("aCH8"),rt=r.n(et),nt=function(t){return function(e){function r(){return e.apply(this,arguments)||this}v()(r,e);var n=r.prototype;return n.hashProps=function(){return rt()(JSON.stringify(this.props))},n.render=function(){return y.a.createElement(t,g()({},this.props,{gridId:this.hashProps()}))},r}(y.a.Component)}(tt(Z));nt.displayName="CmsProductList";var at=nt,ot=r("2d9X"),it=function(t){var e,r=t.tabItems,n=t.alignment;e="left"===n?"tabs-class-align-left":"right"===n?"tabs-class-align-right":"";var a=""+r.map((function(t){return t.tabName})).join("-");return(y.a.createElement("div",{className:"tabs-container"},y.a.createElement(ot.a,{key:a,tabsClass:"kdsTabsContent "+e+" ",tabs:r.map((function(t){return{tab:y.a.createElement(y.a.Fragment,null,y.a.createElement(z.a,{size:"l"},t.tabName)),content:t.content}}))})))},st=r("7WxJ");r("5z8o");function ct(t){var e=t.tabName,r=t.content;return(y.a.createElement("div",{className:"filtered-tabs-single-tab-container"},y.a.createElement("div",{className:"filtered-tabs-single-tab-heading"},y.a.createElement(z.a,{size:"l"},e)),y.a.createElement("section",{className:"filtered-tabs-single-tab-content"},r)))}var ut=function(t,e,r){return[t,e,r].filter(Boolean).join("-")},dt=r("3UD0"),pt=function(t){function e(e){var r;r=t.call(this,e)||this;var n={};return e.tabItems.forEach((function(t){n[t.tabName]=!1})),r.state={activeTabsMap:n,loading:!0},r}v()(e,t),e.getProductListContent=function(t){return t.content.find((function(t){return"products"===t.props.feedType}))},e.getContentAwareTabsItemsToProductSearchQueryMap=function(t){var r={};return t.tabItems.forEach((function(t){if("products"===t.contentAware){var n=e.getProductListContent(t);n&&n.props&&(r[t.tabName]=ut(n.props.q,n.props.tax,n.props.brand))}})),r},e.isAllProductsFetched=function(t,e){var r=Object.values(t),n=Object.keys(e);return r.every((function(t){return n.includes(t)}))},e.getTabsToBeDisplayed=function(t,e,r,n){return t.tabItems.forEach((function(t){if("products"===t.contentAware){var a=n[t.tabName],o=r[a];o&&o.length>0&&!e[t.tabName]&&(e[t.tabName]=t),o&&0===o.length&&e[t.tabName]&&(e[t.tabName]=!1)}else e[t.tabName]=t})),e},e.getDerivedStateFromProps=function(t,r){var n=e.getContentAwareTabsItemsToProductSearchQueryMap(t),a=r.activeTabsMap,o=r.loading;return e.isAllProductsFetched(n,t.productsSearchQueryUPCsMap)&&(a=e.getTabsToBeDisplayed(t,r.activeTabsMap,t.productsSearchQueryUPCsMap,n),o=!1),{activeTabsMap:a,loading:o}};var r=e.prototype;return r.renderContentAwareProductListContent=function(){var t=this;return(y.a.createElement("div",{className:"filtered-tabs-product-list-renderer"},this.props.tabItems.filter((function(t){return"products"===t.contentAware})).map((function(e){return y.a.createElement("div",{key:e.tabName},t.setMemoizePropToComponent(e.content.find((function(t){return"products"===t.props.feedType}))))}))))},r.shouldSingleTabCollapse=function(){return"collapse"===this.props.singleTabBehavior},r.setMemoizePropToComponent=function(t){return y.a.cloneElement(t,{memoize:!0})},r.render=function(){var t=this,e=Object.values(this.state.activeTabsMap).filter((function(t){return t}));return e.forEach((function(e){var r=e.content.findIndex((function(t){return"products"===t.props.feedType}));if(r>=0){var n=t.setMemoizePropToComponent(e.content[r]);e.content[r]=n}})),y.a.createElement(dt.h,null,y.a.createElement("div",{className:"mt-40"},this.props.headerText&&y.a.createElement(z.a,{tag:"h2",className:"mb-16  kds-Heading kds-Heading--xl max-w-full text-center "},this.props.headerText),this.renderContentAwareProductListContent(),this.state.loading&&y.a.createElement(st.a,null),this.shouldSingleTabCollapse()&&1===e.length&&y.a.createElement(ct,{tabName:e[0].tabName,content:e[0].content}),(this.shouldSingleTabCollapse()&&e.length>1||!this.shouldSingleTabCollapse())&&y.a.createElement(it,{tabItems:e,alignment:this.props.alignment})))},e}(y.a.Component),lt=function(t){return function(e){return e&&e[t]}},mt=Object(u.a)(lt("upcs"),lt("q"),lt("tax"),lt("brand"),lt("loaded"),(function(t,e,r,n,a){var o={};return a&&(o[ut(e,r,n)]=t),o})),ft=Object(u.a)((function(t){return t.ampproducts&&t.ampproducts.products}),(function(t){var e={};return Object.keys(t).forEach((function(r){Object.assign(e,mt(t[r]))})),e})),ht=Object(O.connect)((function(t){return{productsSearchQueryUPCsMap:ft(t)}}),null)(tt(pt))}}]);
//# sourceMappingURL=amp-products-components.c0ce496b81c1c403826a.js.map