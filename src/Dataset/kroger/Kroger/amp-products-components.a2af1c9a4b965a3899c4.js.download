(window.webpackJsonp=window.webpackJsonp||[]).push([["@kroger/amp-products-components","kroger-component-manifest/src/components/ModalityButton"],{"5z8o":function(t,e,n){},"9HY6":function(t,e,n){},Fu1v:function(t,e,n){"use strict";n.r(e),n.d(e,"DumbModalityButton",(function(){return c}));var r=n("q1tI"),o=n.n(r),a=n("CTMT"),i=n("/MKj"),s=(n("17x9"),n("XCLq")),c=function(t){var e=t.openModalitySelector,n=t.buttonText,r=t.sendAnalytics,i=t.buttonPosition,s=void 0===i?"left":i,c=t.buttonType,u=void 0===c?"primary":c,d="";return d="center"===s?"m-auto":"right"===s?"ml-auto":"mr-auto",o.a.createElement("div",{className:"ModalityButtonWrapper flex"},o.a.createElement(a.a,{className:"amp-modalityButton "+d,kind:u,onClick:function(){e(),r(n)}},n))},u={openModalitySelector:s.a.OPEN_MODALITY_MODAL,sendAnalytics:function(t){return function(e){return e({type:"MODALITY_BUTTON/OPEN_MODAL_ANALYTICS",payload:{componentName:"amp button",scenarioName:"start-navigate",usageContext:t,destination:"/"}})}}},d=Object(i.connect)(null,u)(c);e.default=d},I328:function(t,e,n){"use strict";n.r(e),n.d(e,"reducers",(function(){return l})),n.d(e,"CmsProductList",(function(){return ot})),n.d(e,"FilteredTabsByProductList",(function(){return ht}));var r,o,a,i=n("ANjH"),s={},c=((r={upcs:[],metadata:s}).loaded=!1,r.loading=!1,r.error=!1,r.errorMsg="",r),u=((o={hero:[]}).loaded=!1,o.loading=!1,o.error=!1,o.errorMsg="",n("G4qV")),d=function(t){return function(e,n){return function(t,e){return t&&t.products&&t.products[e]}(e,n)&&e.products[n][t]}},p=Object(u.a)((function(t,e){return t&&t.products&&t.products[e]}),d("upcs"),d("metadata"),d("q"),d("loaded"),d("loading"),d("error"),d("errorMsg"),(function(t,e,n,r,o,a,i,u){var d;return t?((d={upcs:e,metadata:n||s,q:r}).loaded=o,d.loading=a,d.error=i,d.errorMsg=u,d):c})),l={ampproducts:Object(i.c)({products:(a="products",function(t,e){var n,r,o,i,s,u;void 0===t&&(t={});var d=e.type,p=e.payload,l=e.gridId,m=e.error;switch(d){case"ampproducts/"+a+"/GET_RESOURCE_REQUEST":return Object.assign({},t,((r={})[l]=Object.assign({},c,((n={}).loading=!0,n)),r));case"ampproducts/"+a+"/GET_RESOURCE_OK":return Object.assign({},t,((i={})[l]=Object.assign({},c,((o={}).loaded=!0,o.upcs=p[l].upcs,o.metadata=p[l].metadata,o.q=p[l].q,o.tax=p[l].tax,o.brand=p[l].brand,o)),i));case"ampproducts/"+a+"/GET_RESOURCE_ERROR":return Object.assign({},t,((u={})[l]=Object.assign({},c,((s={}).error=!0,s.errorMsg=m,s)),u));default:return t}})})},m=n("8OQS"),f=n.n(m),h=n("pVnL"),g=n.n(h),b=n("VbXa"),v=n.n(b),y=n("q1tI"),E=n.n(y),N=n("17x9"),T=n.n(N),C=n("BtTy"),O=n("/MKj"),S=n("dCAT"),I=n("UpSj"),w=n.n(I),P=n("cTvX"),j=function(t){return[1,2,3,4,6].reduce((function(e,n){return t===n&&(e+="u-ppr"+n+" u-ppr"+n+"-abv u-ppr"+n+"-blw "),t<n&&(e+="u-ppr"+n+"-blw "),t>n&&(e+="u-ppr"+n+"-abv "),e}),"")},x=w()({getWidth:function(t){var e=t&&t.querySelector(".ProductGridContainer"),n=e&&e.clientWidth,r=t&&t.clientWidth;return{grid:n||r||1024,container:r||1024}},getHeight:function(t){return t&&t.clientHeight||1024},elementResize:!0}),R=function(t){return function(e){var n,r=e.ppr||(((n=e.containerWidth.grid)<=380||n<=580?2:n<=767&&3)||n<=963&&4||n<=1159&&5||6),o=e.mode,a="grid"===(void 0===o?"grid":o)?{max:r,maxItems:r}:{},i=g()({},e,a,{ppr:r,conatinerWidth:e.containerWidth.container});return E.a.createElement("div",{className:j(r)},E.a.createElement(t,i))}},M=n("PJYZ"),_=n.n(M),k=n("UCtt"),A=n("CTMT"),z=n("Fu1v"),W=n("Pn2e"),q=function(t){return{type:"ampproducts/yellowtagplaceholder/SELECT_PREFERRED_STORE",scenarioName:"select_preferred_store",payload:g()({},t)}},L=n("woIj"),D={componentName:"sale items for you",usageContext:"select preferred store"},G=function(t){function e(e){var n;return(n=t.call(this,e)||this).handleClick=n.handleClick.bind(_()(n)),n}v()(e,t);var n=e.prototype;return n.handleClick=function(){this.props.openDropdown(),this.props.selectStore(D)},n.render=function(){var t=this.props,e=t.message,n=t.btnText,r=t.seamlessShipEnabled,o=t.className,a=t.style;return E.a.createElement(E.a.Fragment,null,E.a.createElement(k.a,{size:"m",className:o+" block",style:a},e),E.a.createElement("div",{className:"flex justify-center items-center h-72"},r?E.a.createElement(z.default,{buttonText:n,buttonPosition:"center"}):E.a.createElement(A.a,{kind:"primary",onClick:this.handleClick},n)))},e}(E.a.Component);G.defaultProps={openDropdown:function(){},selectStore:function(){},seamlessShipEnabled:!1};var U=Object(O.connect)((function(t){return{seamlessShipEnabled:L.d.getToggleOnState(t,"seamlessShipEnabled")}}),(function(t){return{openDropdown:function(){return t(Object(W.c)())},selectStore:function(e){return t(q(e))}}}))(G),F=n("sEfC"),H=n.n(F),B=n("NW6+"),Q=n("Hb59"),V=(n("9HY6"),"error-container pt-72 block text-center"),Y=function(t){function e(e){var n;return(n=t.call(this,e)||this).getGridDebounced=H()(n.props.getGrid,500),n}v()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.memoize&&this.props.loaded||this.getGrid(this.props)},n.UNSAFE_componentWillReceiveProps=function(t){var e=this.props,n=e.catId,r=e.tax,o=e.q;n===t.catId&&r===t.tax&&o===t.q||this.getGrid(t)},n.getGrid=function(t){this.getGridDebounced(g()({},t))},n.constructError=function(t,e){var n=this.props,r=n.errorMsg,o=n.brand,a=void 0===o?"":o,i=n.catId,s=void 0===i?"":i,c=n.tax,u=void 0===c?"":c,d=n.q,p=void 0===d?"":d,l=n.monet,m=void 0===l?"false":l,f=n.pzn,h=void 0===f?"false":f,g=n.title,b=new Error(t+": "+JSON.stringify({errorMsg:r,title:g,brand:a,catId:s,tax:u,q:p,monet:m,pzn:h}));return b.name=e,b},n.renderError=function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement(B.c,{error:this.constructError("Error Failed fetching product list","Failed to load products"),componentName:e.displayName,caughtBy:e.displayName,options:{scenarioName:Q.d.CONTENT_WARNING,usageContext:Q.e.CONTENT_WARNING}}),E.a.createElement(k.a,{size:"m",className:V},"We're sorry, but there was a problem displaying ",this.props.title," ","products. Please try again. If the problem persists, please"," ",E.a.createElement("a",{href:"/hc/help/contact-us",title:"Contact customer service."}," ","contact Customer Service")," ","for assistance."))},n.getCopy=function(t){var e,n;return 0===t.length?(n="Weâ€™re sorry, but your selected store has no products in this department. Please change your store to view products from this department.",e="Change store"):(n="To see the most current offers, please select a store.",e="Select A Store"),{btnText:e,message:n}},n.render=function(){var t=this.props,n=t.error,r=t.loading,o=t.loaded,a=this.props,i=a.upcs,s=void 0===i?[]:i,c=f()(a,["upcs"]),u={"data-qa":this.props["data-qa"]};if(n)return this.renderError();if("NONE"===c.modalityType&&delete c.modalityType,o&&!r&&0===s.length){var d=this.getCopy(s),p=d.message,l=d.btnText;return E.a.createElement(E.a.Fragment,null,E.a.createElement(B.c,{error:this.constructError("Error No products found","No products found"),componentName:e.displayName,caughtBy:e.displayName,options:{scenarioName:Q.d.CONTENT_WARNING,usageContext:Q.e.CONTENT_WARNING}}),E.a.createElement(U,g()({},this.props,{message:p,btnText:l,className:V})))}return E.a.createElement("div",g()({className:"ProductList"},u),E.a.createElement(C.i,g()({},c,{upcs:s})))},e}(E.a.Component);Y.displayName="ProductList";var J,K={getGrid:function(t){var e=void 0===t?{}:t,n=e.ads,r=void 0===n?"":n,o=e.brand,a=void 0===o?"":o,i=e.count,s=void 0===i?"10":i,c=e.divisionId,u=void 0===c?"":c,d=e.facets,p=void 0===d?"":d,l=e.fulfillmentMethods,m=void 0===l?"PICKUP,DELIVERY,SHIP,IN_STORE":l,f=e.gridId,h=void 0===f?"productGrid":f,g=e.monet,b=void 0===g?"NONE":g,v=e.nutritionValues,y=void 0===v?"":v,E=e.pageOffset,N=void 0===E?"":E,T=e.projections,C=void 0===T?"products.compact":T,O=e.pzn,I=void 0===O?"RELEVANCE":O,w=e.q,P=void 0===w?"":w,j=e.sortOrder,x=void 0===j?"":j,R=e.storeId,M=void 0===R?"":R,_=e.tax,k=void 0===_?"":_;return function(t){t({gridId:h,type:"ampproducts/products/GET_RESOURCE_REQUEST"});var e,n,o,i,c,d=function(t){return t.reduce((function(t,e){return e.placementId&&(t[e.upc]={monetization:{monetization_payload:e.placementId,impression_id:e.placementId}}),t}),{})},l=function(e){void 0===e&&(e=[]),t({gridId:h,errors:e,type:"ampproducts/products/GET_RESOURCE_ERROR"})};return S.a.get("/atlas/v1/search/v1/products-search?"+(e=new URLSearchParams,i=function(t,n){return n&&n.length&&e.append(t,n),e},n=i,o=",",c=function(t,e){return"string"==typeof e&&e.length?e.split(o).reduce((function(e,r){return n(t,r.trim())}),""):null},[i("option.personalization",I),c("option.facets",p),i("option.monetization","TRUE"!==b&&b),i("option.ads",r),i("page.size",s.toString()),i("page.offset",N.toString()),i("sort",x),i("projections",C),i("filter.locationId",""+u+M),i("filter.keyword",P),c("filter.taxonomies",k),c("filter.fulfillmentMethods",m),c("filter.brands",a),c("filter.nutritionValues",y)].filter((function(t){return t})).reduce((function(t,e){return e}),{})).toString()).then((function(t){return t.data})).then((function(e){return e.errors?l(e.errors):(n=e.data.productsSearch,void t({gridId:h,type:"ampproducts/products/GET_RESOURCE_OK",payload:(r={},r[h]={upcs:n.map((function(t){return t.upc})),metadata:d(n),q:P,tax:k,brand:a},r)}));var n,r})).catch((function(t){l(t)}))}}},X=(J=Object(O.connect)((function(t,e){var n=p(t.ampproducts,e.gridId);return{upcs:n.upcs,metadata:n.metadata,loading:n.loading,loaded:n.loaded,error:n.error}}),K,(function(t,e,n){return n.test?Object.assign({},t,e,n):Object.assign({},n,t,e)}))(Y),Object(P.b)(Object(P.i)("PPRAware"),x,Object(P.i)(Object(P.p)(J,"wrapWithPPRClasses")),P.k,R)(J));X.displayName="ConnectedProductList",X.propTypes={catId:T.a.string,tax:T.a.string,count:T.a.number,title:T.a.string,q:T.a.string,gridId:T.a.string,shipmentType:T.a.string,monet:T.a.string,pzn:T.a.string,memoize:T.a.bool,modalityType:T.a.string,empathy:T.a.bool},X.defaultProps={"data-qa":"productList",empathy:!1,gridId:"productList",title:"Start My List",modalityType:"NONE"};var Z=X,$=n("SjGZ"),tt=function(t){var e=function(e){function n(){return e.apply(this,arguments)||this}return v()(n,e),n.prototype.render=function(){var e=this.props,n=e.currentShoppingContext,r=n.storeNumber,o=n.divisionNumber,a=f()(e,["currentShoppingContext"]);return E.a.createElement(t,g()({storeId:r||"",divisionId:o||""},a))},n}(E.a.Component);return Object(O.connect)((function(t,e){return{currentShoppingContext:Object($.b)(t,e.modalityType||"NONE")}}))(e)},et=n("aCH8"),nt=n.n(et),rt=function(t){return function(e){function n(){return e.apply(this,arguments)||this}v()(n,e);var r=n.prototype;return r.hashProps=function(){return nt()(JSON.stringify(this.props))},r.render=function(){return E.a.createElement(t,g()({},this.props,{gridId:this.hashProps()}))},n}(E.a.Component)}(tt(Z));rt.displayName="CmsProductList";var ot=rt,at=n("2d9X"),it=function(t){var e,n=t.tabItems,r=t.alignment;e="left"===r?"tabs-class-align-left":"right"===r?"tabs-class-align-right":"";var o=""+n.map((function(t){return t.tabName})).join("-");return E.a.createElement("div",{className:"tabs-container"},E.a.createElement(at.a,{key:o,tabsClass:"kdsTabsContent "+e+" ",tabs:n.map((function(t){return{tab:E.a.createElement(E.a.Fragment,null,E.a.createElement(k.a,{size:"l"},t.tabName)),content:t.content}}))}))},st=n("7WxJ");n("5z8o");function ct(t){var e=t.tabName,n=t.content;return E.a.createElement("div",{className:"filtered-tabs-single-tab-container"},E.a.createElement("div",{className:"filtered-tabs-single-tab-heading"},E.a.createElement(k.a,{size:"l"},e)),E.a.createElement("section",{className:"filtered-tabs-single-tab-content"},n))}var ut=function(t,e,n){return[t,e,n].filter(Boolean).join("-")},dt=n("r/x8"),pt=function(t){function e(e){var n;n=t.call(this,e)||this;var r={};return e.tabItems.forEach((function(t){r[t.tabName]=!1})),n.state={activeTabsMap:r,loading:!0},n}v()(e,t),e.getProductListContent=function(t){return t.content.find((function(t){return"products"===t.props.feedType}))},e.getContentAwareTabsItemsToProductSearchQueryMap=function(t){var n={};return t.tabItems.forEach((function(t){if("products"===t.contentAware){var r=e.getProductListContent(t);r&&r.props&&(n[t.tabName]=ut(r.props.q,r.props.tax,r.props.brand))}})),n},e.isAllProductsFetched=function(t,e){var n=Object.values(t),r=Object.keys(e);return n.every((function(t){return r.includes(t)}))},e.getTabsToBeDisplayed=function(t,e,n,r){return t.tabItems.forEach((function(t){if("products"===t.contentAware){var o=r[t.tabName],a=n[o];a&&a.length>0&&!e[t.tabName]&&(e[t.tabName]=t),a&&0===a.length&&e[t.tabName]&&(e[t.tabName]=!1)}else e[t.tabName]=t})),e},e.getDerivedStateFromProps=function(t,n){var r=e.getContentAwareTabsItemsToProductSearchQueryMap(t),o=n.activeTabsMap,a=n.loading;return e.isAllProductsFetched(r,t.productsSearchQueryUPCsMap)&&(o=e.getTabsToBeDisplayed(t,n.activeTabsMap,t.productsSearchQueryUPCsMap,r),a=!1),{activeTabsMap:o,loading:a}};var n=e.prototype;return n.renderContentAwareProductListContent=function(){var t=this;return E.a.createElement("div",{className:"filtered-tabs-product-list-renderer"},this.props.tabItems.filter((function(t){return"products"===t.contentAware})).map((function(e){return E.a.createElement("div",{key:e.tabName},t.setMemoizePropToComponent(e.content.find((function(t){return"products"===t.props.feedType}))))})))},n.shouldSingleTabCollapse=function(){return"collapse"===this.props.singleTabBehavior},n.setMemoizePropToComponent=function(t){return E.a.cloneElement(t,{memoize:!0})},n.render=function(){var t=this,e=Object.values(this.state.activeTabsMap).filter((function(t){return t}));return e.forEach((function(e){var n=e.content.findIndex((function(t){return"products"===t.props.feedType}));if(n>=0){var r=t.setMemoizePropToComponent(e.content[n]);e.content[n]=r}})),E.a.createElement(dt.b,null,E.a.createElement("div",{className:"mt-40"},this.props.headerText&&E.a.createElement(k.a,{tag:"h2",className:"mb-16  kds-Heading kds-Heading--xl max-w-full text-center "},this.props.headerText),this.renderContentAwareProductListContent(),this.state.loading&&E.a.createElement(st.a,null),this.shouldSingleTabCollapse()&&1===e.length&&E.a.createElement(ct,{tabName:e[0].tabName,content:e[0].content}),(this.shouldSingleTabCollapse()&&e.length>1||!this.shouldSingleTabCollapse())&&E.a.createElement(it,{tabItems:e,alignment:this.props.alignment})))},e}(E.a.Component),lt=function(t){return function(e){return e&&e[t]}},mt=Object(u.a)(lt("upcs"),lt("q"),lt("tax"),lt("brand"),lt("loaded"),(function(t,e,n,r,o){var a={};return o&&(a[ut(e,n,r)]=t),a})),ft=Object(u.a)((function(t){return t.ampproducts&&t.ampproducts.products}),(function(t){var e={};return Object.keys(t).forEach((function(n){Object.assign(e,mt(t[n]))})),e})),ht=Object(O.connect)((function(t){return{productsSearchQueryUPCsMap:ft(t)}}),null)(tt(pt))},UpSj:function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n("q1tI"),u=n("iegG"),d={width:"100%",height:"100%",padding:0,border:0};function p(t){return t.clientWidth}function l(t){return t.clientHeight}t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.getHeight,n=void 0===e?l:e,m=t.getWidth,f=void 0===m?p:m,h=t.containerStyle,g=void 0===h?d:h,b=t.elementResize,v=void 0!==b&&b;return function(t){return function(e){function d(){var t,e,r;a(this,d);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return e=r=i(this,(t=Object.getPrototypeOf(d)).call.apply(t,[this].concat(s))),r.state={},r.updateDimensions=function(){var t=r.refs.container,e=f(t),o=n(t);e===r.state.containerWidth&&o===r.state.containerHeight||r.setState({containerWidth:e,containerHeight:o})},r.onResize=function(){r.rqf||(r.rqf=r.getWindow().requestAnimationFrame((function(){r.rqf=null,r.updateDimensions()})))},i(r,e)}return s(d,e),o(d,[{key:"getWindow",value:function(){return this.refs.container&&this.refs.container.ownerDocument.defaultView||window}},{key:"componentDidMount",value:function(){if(!this.refs.container)throw new Error("Cannot find container div");this.updateDimensions(),v?u(this.refs.container,this.updateDimensions):this.getWindow().addEventListener("resize",this.onResize,!1)}},{key:"componentWillUnmount",value:function(){this.getWindow().removeEventListener("resize",this.onResize)}},{key:"getWrappedInstance",value:function(){this.refs.wrappedInstance}},{key:"render",value:function(){return c.createElement("div",{style:g,ref:"container"},(this.state.containerWidth||this.state.containerHeight)&&c.createElement(t,r({},this.state,this.props,{updateDimensions:this.updateDimensions,ref:"wrappedInstance"})))}}]),d}(c.Component)}}}}]);
//# sourceMappingURL=amp-products-components.a2af1c9a4b965a3899c4.js.map