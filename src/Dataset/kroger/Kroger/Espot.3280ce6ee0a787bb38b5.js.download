(window.webpackJsonp=window.webpackJsonp||[]).push([["@kroger/site-building-components/src/components/Espot","@kroger/site-building-components/src/components/CmsImageNav"],{"5XcW":function(e,t,n){e.exports=n.p+"2b9cbcd7089d6c53a6e49b3f3096eff5.png"},lq4G:function(e,t,n){"use strict";n.r(t),n.d(t,"ESpot",(function(){return g}));var a=n("8OQS"),i=n.n(a),s=n("pVnL"),r=n.n(s),o=n("VbXa"),l=n.n(o),m=n("q1tI"),c=n.n(m),p=(n("17x9"),n("xHTH")),u=n("/MKj"),d=function(e){return{type:"departmentpage/espot/MONETIZED_ESPOT_RENDER",payload:r()({usageContext:"make a good impression",componentName:"espot",scenarioName:"make_a_good_impression"},e)}},h=function(e){return e&&e.search&&e.search.searchAll&&e.search.searchAll.response&&e.search.searchAll.response.espots},g=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.dispatchClickstreamData()},n.componentDidUpdate=function(e){this.props.isMonetized&&((this.props.espotOmnitureData&&this.props.espotOmnitureData.impression_id)!==(e.espotOmnitureData&&e.espotOmnitureData.impression_id)&&this.dispatchClickstreamData())},n.getMonetization=function(){var e=this.props.monetizationData?this.props.monetizationData:r()({kpm:Boolean(this.props.isMonetized)},this.props.espotOmnitureData,{espotName:this.props.espotItems&&this.props.espotItems[0]&&this.props.espotItems[0].altText||void 0}),t=this.props.espotItems&&this.props.espotItems[0]&&this.props.espotItems[0].omnitureTitle||void 0;return void 0!==t&&(e.omnitureTitle=t),e},n.dispatchClickstreamData=function(){this.props.isMonetized&&this.props.sendClickstream(this.getMonetization())},n.render=function(){var e=this.props,t=e.espotItems,n=(e.espotOmnitureData,i()(e,["espotItems","espotOmnitureData"]));return c.a.createElement(p.default,r()({navItems:t,isEspot:!0,monetization:this.getMonetization()},n))},t}(c.a.Component);g.defaultProps={columns:{mobile:1,desktop:1}};t.default=Object(u.connect)((function(e,t){var n=h(e);return r()({espotOmnitureData:n&&n[0]},t)}),(function(e){return{sendClickstream:function(t){return e(d(t))}}}))(g)},tqCI:function(e,t,n){},wOCb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?e.replace(/[^a-zA-Z0-9]/g," ").replace(/\s\s+/g," ").toLowerCase().trim():""}},xHTH:function(e,t,n){"use strict";n.r(t);var a=n("pVnL"),i=n.n(a),s=n("8OQS"),r=n.n(s),o=n("q1tI"),l=n.n(o),m=n("PJYZ"),c=n.n(m),p=n("VbXa"),u=n.n(p),d=n("/MKj"),h=n("acPk"),g=n("wOCb"),f=n("YTD2"),v=n("BUFb"),b=n("TSje"),k=n("KdP7"),I=(n("17x9"),function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hidden:!1,currentWidthLabel:""},n.setCurrentWidth=n.debounce(n.setCurrentWidth.bind(c()(n))),n.handleOnError=n.handleOnError.bind(c()(n),t.hideOnError),n}u()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.hideOnError&&window.MutationObserver&&window.addEventListener("resize",this.setCurrentWidth)},n.componentWillUnmount=function(){window.MutationObserver&&window.removeEventListener("resize",this.setCurrentWidth)},n.handleOnError=function(e,t){e&&"error"===t.type&&this.setState({hidden:!0})},n.getPicture=function(){var e=this.props,t=e.imageSet,n=e.altText,a=e.tabletMinWidth,i=e.desktopMinWidth,s=t.imageDesktop||t.imageTablet||t.imageMobile;return l.a.createElement("picture",{onError:this.handleOnError},t.imageMobile&&l.a.createElement("source",{srcSet:t.imageMobile,media:"(max-width: "+(t.imageTablet?a:i)+"px)"}),t.imageTablet&&l.a.createElement("source",{srcSet:t.imageTablet,media:"(max-width: "+i+"px)"}),l.a.createElement(f.a,{lazyLoadProps:{height:350,offset:100,once:!0}},l.a.createElement("img",{className:"ImageLink-image block mx-auto w-full",src:s,alt:n}),l.a.createElement(v.a,{name:"ImageLink"})))},n.getCurrentWidth=function(e,t){var n="";return window.innerWidth>=e?n="Desktop":window.innerWidth<e&&window.innerWidth>=t?n="Tablet":window.innerWidth<t&&(n="Mobile"),n},n.setCurrentWidth=function(){var e=this.props,t=this.state.currentWidthLabel,n=this.getCurrentWidth(e.desktopMinWidth,e.tabletMinWidth);n!==t&&this.setState({currentWidthLabel:n,hidden:!1})},n.debounce=function(e,t){var n,a=arguments,i=this;return void 0===t&&(t=250),function(){var s=a,r=!n;clearTimeout(n),n=setTimeout((function(){n=null}),t),r&&e.apply(i,s)}},n.renderComponent=function(e,t,n){return l.a.createElement(e,t,n)},n.getPayload=function(e,t){return"espot"===e.componentName?i()({usageContext:"espot click",espotSource:e.componentName},e,{espotName:t}):i()({usageContext:t},e)},n.getDocumentURL=function(e){return e.data.document.url},n.createEspotOverlay=function(){var e=this.props,t=e.isEspot,n=e.overlayText;return t&&n&&""!==n.trim()&&l.a.createElement("div",{className:"espot-overlay absolute pin-l pin-r pin-b h-64 flex items-center justify-between text-left bg-default-50 text-default-900"},l.a.createElement(b.a,{size:"l",className:"mt-0 mb-1 ml-16"},n),l.a.createElement(k.a,{className:"mt-0 mr-16 mb-0 ml-8 "}))},n.getComponentChildren=function(){return l.a.createElement(l.a.Fragment,null,this.getPicture(),this.createEspotOverlay())},n.render=function(){var e,t=this.state.hidden,n=this.props,a=n.linkTitle,s=n.inverse,r=n.headerText,o=n.subText,m=n.altText,c=n.url,p=n.omnitureTag,u=n.openInNewTab,d=n.usageMetrics,f=n.isEspot,v=n.document,b=s?" text-default-50":"",k={title:a||o||m||r,className:"ImageLink w-full block"},I="div",w=""===p?o||m||a||r:p,x=this.getPayload(d,Object(g.a)(w));if(f&&v){var E=this.getDocumentURL(v);I=h.a,k=Object.assign({},k,{to:E,payload:x,target:"_blank"})}else if(c&&(I=h.a,k=Object.assign({},k,{to:c,payload:x}),f&&u)){var O={target:"_blank"};e=O,k=Object.assign({},k,i()({},O,{aProps:e}))}return!t&&l.a.createElement("div",{className:"ImageLink-wrapper block mx-auto text-center"},this.renderComponent(I,k,this.getComponentChildren()),r&&this.renderComponent(I,Object.assign({},k,i()({tabIndex:-1},e,{className:"ImageLink-headerText block heading-l kds-Link kds-Link--implied kds-Link--xl font-secondary "+b})),r),o&&this.renderComponent(I,Object.assign({},k,i()({tabIndex:-1},e,{className:"ImageLink-subText kds-Link kds-Link--l kds-Link--implied p-6 "+b})),o))},t}(l.a.Component));I.defaultProps={imageSet:{imageMobile:"",imageTablet:"",imageDesktop:""},url:"",altText:"",omnitureTag:"",linkTitle:"",inverse:!1,headerText:"",subText:"",desktopMinWidth:640,tabletMinWidth:420,hideOnError:!1,usageMetrics:{}};var w=I,x=function(e){return{type:"departmentpage/imagenav/TOGGLE_VIEW_ALL",payload:i()({},e)}},E=n("i8i4"),O=n.n(E),C=n("5XcW"),N=n.n(C),T=(n("tqCI"),function(e){function t(t){var n;n=e.call(this,t)||this;var a=t.navItems,i=n.getNavItemsToRender(a);return n.state={navItemsToRender:i,expanded:!1},n.handleOnClick=n.handleOnClick.bind(c()(n)),n.focus=n.focus.bind(c()(n)),n}u()(t,e);var n=t.prototype;return n.getNavItemsToRender=function(e){return this.props.showAllItems||e.length<=6?e:e.slice(0,5)},n.UNSAFE_componentWillReceiveProps=function(e){var t=e.navItems,n=this.getNavItemsToRender(t);JSON.stringify(e.navItems)!==JSON.stringify(this.props.navItems)&&this.setState({expanded:!1,navItemsToRender:n})},n.componentDidUpdate=function(){return this.state.expanded?this.focus():null},n.focus=function(){O.a.findDOMNode(this.refs.image0).children[0].focus()},n.imageNavAlignmentClass=function(){return this.props.alignment?"ImageNav-align-"+this.props.alignment.toLowerCase():"ImageNav-align-left"},n.renderViewAllLink=function(){var e=this.props,t=e.inverse,n=e.navItems,a=e.columns,i=a.mobile,s=a.desktop;if(e.showAllItems)return null;var r=t?" text-default-50":"";return n.length>6&&!this.state.expanded?l.a.createElement("div",{key:"viewAll",className:"ImageNav-itemWrapper ImageNav-viewAll text-center my-8 \n        col-mobile-"+i+"\n        col-desktop-"+s},l.a.createElement("button",{className:"ImageLink w-full block",onClick:this.handleOnClick},l.a.createElement("picture",null,l.a.createElement(f.a,{lazyLoadProps:{height:350,offset:100,once:!0}},l.a.createElement("img",{className:"ImageLink-image block mx-auto w-full",src:N.a,alt:"View All"})))),l.a.createElement("button",{className:"ImageLink-subText kds-Link kds-Link--l kds-Link--implied p-6"+r,onClick:this.handleOnClick},"View All")):null},n.handleOnClick=function(){this.props.viewAllOmniture({componentName:"txnmy",usageContext:"view all"}),this.setState({navItemsToRender:this.props.navItems,expanded:!0})},n.render=function(){var e=this.props,t=e.columns,n=t.mobile,a=t.desktop,s=e.isEspot,o=e.style,m=void 0===o?{}:o,c=e.espotPosition,p=e.monetization,u=e.usageMetrics,d=e.showAllItems,h=r()(e,["columns","isEspot","style","espotPosition","monetization","usageMetrics","showAllItems"]),g=!!d||this.state.expanded;return l.a.createElement("div",{className:"ImageNav flex flex-wrap w-full mx-auto expanded-"+g+" "+this.imageNavAlignmentClass(),style:m},this.state.expanded&&l.a.createElement("p",{"aria-live":"assertive",className:"ViewAllAccessibility screen-reader"},"New items have been added to the page!"),this.state.navItemsToRender.map((function(e,t){var r=i()({},e),o=i()({componentName:s?"espot":"txnmy",scenarioName:s?"espot_click":"route_change",itemIndex:s?c+t+1:t+1},p,u),m=s?" espot rounded-8 overflow-hidden":"",d=s&&r&&r.elevated?" elevated-8":"",g=s&&r&&r.overlayText&&""!==r.overlayText.trim()?" relative":"";return l.a.createElement("div",{key:t,className:"ImageNav-itemWrapper col-mobile-"+n+" col-desktop-"+a+m+d+g},l.a.createElement(w,i()({},r,h,{isEspot:s,usageMetrics:o,ref:"image"+t})))})),this.renderViewAllLink())},t}(l.a.Component));T.defaultProps={navItems:[{}],columns:{mobile:3,desktop:6},alignment:"",isEspot:!1,espotPosition:0,usageMetrics:{},inverse:!1};var y=Object(d.connect)((function(e,t){return t}),(function(e){return{viewAllOmniture:function(t){return e(x(t))}}}))(T),L=function(e){var t=e.navItems,n=r()(e,["navItems"]);return l.a.createElement(y,i()({navItems:t.map((function(e){var t=e.imageSet,n=r()(e,["imageSet"]),a={};return"object"==typeof t&&("object"==typeof t.data&&t.data.hasOwnProperty("images")&&Array.isArray(t.data.images)?a=t.data.images.reduce((function(e,t){var n,a;return Object.assign(e,((n={})["image"+(a=t.target,a.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})))]=t.url,n))}),{}):Object.keys(t).forEach((function(e){var n=((t[e].data||{}).images||[{url:""}])[0].url;n&&(a[e]=n)}))),i()({imageSet:a},n)}))},n))};L.defaultProps={navItems:[{imageSet:{}}]};t.default=L}}]);
//# sourceMappingURL=Espot.3280ce6ee0a787bb38b5.js.map