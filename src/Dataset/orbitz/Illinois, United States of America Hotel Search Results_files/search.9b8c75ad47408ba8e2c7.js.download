(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"5lYd":function(e,t,r){r.r(t),r.d(t,"ExitIntent",(function(){return v}));var n,a=r("Mn8c"),i=r("GiK3"),l=r("Dhs5"),o=r("vc39"),s=r("MxYd"),c=r("5uXs"),u=r("emUk"),p=r("ZOI4"),d=r("KaGk"),m=r("qFFX"),h=r("Flpp"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},y=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},k=function(e){function t(t){var r=e.call(this,t)||this;return r.closeBtnRef=null,r.closeBtnRef=i.createRef(),r}return f(t,e),t.prototype.componentDidMount=function(){this.setFocus()},t.prototype.setFocus=function(){this.closeBtnRef&&this.closeBtnRef.current&&"function"==typeof this.closeBtnRef.current.focus&&this.closeBtnRef.current.focus()},t.prototype.render=function(){var e=this.props,t=e.exitIntent,r=e.handleDismiss,n=e.analytics.setupTracker("ExitIntent","close exit intent pop up"),a=t.message,l={className:"uitk-type-center",padding:{blockend:"two"}};return i.createElement(c.UitkDialog,{animation:c.UitkDialogAnimationType.SLIDEUP},i.createElement(u.UitkFigure,{className:"all-image-fit-cover",src:t.backgroundImageUrl,"data-stid":"exit-intent-background-image"},i.createElement(s.UitkOverlayToolbar,{type:s.ToolbarType.CLOSE,action:r,buttonRef:this.closeBtnRef,analytics:n}),i.createElement(m.UitkSpacing,{className:"pwa-theme--color-white",padding:{inline:"twelve",blockend:"six"}},i.createElement(p.UitkLayoutFlex,{direction:"column",justifyContent:"center"},i.createElement("div",null,i.createElement(p.UitkLayoutFlexItem,null,i.createElement(m.UitkSpacing,g({},l),i.createElement("div",null,i.createElement("img",{width:"180",src:t.logoUrl,alt:"Brand Logo"})))),i.createElement(p.UitkLayoutFlexItem,null,i.createElement(m.UitkSpacing,g({},l),i.createElement("p",null,i.createElement(h.UitkText,{size:600,weight:"bold"},a.headingOne),i.createElement(h.UitkText,{size:600,weight:"bold"},a.headingTwo),i.createElement(h.UitkText,{size:900,weight:"bold"},a.percentOff)))),i.createElement(p.UitkLayoutFlexItem,null,i.createElement(m.UitkSpacing,g({},l),i.createElement("p",null,i.createElement(h.UitkText,{size:500},a.headingThree),i.createElement(h.UitkText,{size:700,weight:"bold"},a.couponCode)))),i.createElement(p.UitkLayoutFlexItem,null,i.createElement(m.UitkSpacing,g({},l),i.createElement("p",null,i.createElement(h.UitkText,{size:200,inline:!0},a.termsAndConditionsOne)," ",i.createElement(d.UitkLink,{inline:!0,theme:d.UitkLinkTheme.REVERSE,type:d.UitkLinkTypeSize.SMALL},i.createElement("a",{href:t.clickHereLinkUrl,target:"_blank",rel:"noopener"},a.clickHere))," ",i.createElement(h.UitkText,{size:200,inline:!0},a.termsAndConditionsTwo)))))))))},t=y([Object(a.inject)("analytics")],t)}(i.Component),v=Object(a.inject)("analytics","routeStore")((function(e){var t=e.analytics,r=e.exitIntent,n=e.routeStore,a=e.showOnce,s=function(){return n.goBack()},c=function(){var e=n.search.includes("pwaOverlay"),r=localStorage.getItem("hide-exit-intent"),i="function"==typeof(null==t?void 0:t.trackEvent);return e||a&&r?null:(localStorage.setItem("hide-exit-intent","true"),n.updateSearch({pwaDialog:"exit-intent"}),i&&t.trackEvent(".ExitIntent.Triggered","Exit Intent pop up was triggered",null),void u())},u=function(){return document.body.removeEventListener("mouseleave",c)};return i.useEffect((function(){return document.body.addEventListener("mouseleave",c),u}),[]),i.createElement(o.ErrorBoundary,{label:"exit.intent.error.boundary"},i.createElement(l.QueryRoute,{query:{pwaDialog:"exit-intent"}},i.createElement(o.Layer,{id:"exit-intent",onDismiss:s},i.createElement(k,{exitIntent:r,handleDismiss:s}))))}))},"6nn/":function(e,t,r){r.r(t),r.d(t,"Playback",(function(){return _})),r.d(t,"ChangeSearchForm",(function(){return M}));var n,a=r("Mn8c"),i=r("y986"),l=r("F8kA"),o=r("GiK3"),s=r("zqAW"),c=r("AQYs"),u=r("vc39"),p=r("5uZZ"),d=r("rp9/"),m=r("Wgar"),h=r("ZOI4"),f=r("KaGk"),g=r("qFFX"),y=r("Flpp"),k=r("2eDV"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=function(){return(b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},E=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},S=Object(s.ClickTracker)(l.Link),O=Object(s.ClickTracker)(d.UitkButton),_=function(e){function t(t){var r=e.call(this,t)||this;r.afterSubmit=r.afterSubmit.bind(r),r.handleExpand=r.handleExpand.bind(r),r.onUpdateResults=r.onUpdateResults.bind(r);var n=t.searchResults,a=t.routeStore;return null==n||n.setExpandForm(a.queryParams.expandForm),r.state={jsEnabled:!1,showDatepicker:!1,searchFormExpanded:null==n?void 0:n.expandForm},r}return v(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({jsEnabled:!0}),this.disposerUiPageOpenDatePickerEvent=Object(i.observe)(this.props.uiPage,(function(t){if("remove"!==t.type){var r=t.newValue;"openNewDatePickerEvent"===t.name&&r&&e.setState({searchFormExpanded:!0})}}))},t.prototype.componentWillUnmount=function(){var e=this.props.searchResults;e&&(e.expandForm=!1),this.disposerUiPageOpenDatePickerEvent&&this.disposerUiPageOpenDatePickerEvent()},t.prototype.componentDidUpdate=function(){var e=this.props.routeStore,t=e&&e.updateSearch&&"function"==typeof e.updateSearch,r=e&&e.queryParams&&e.queryParams.startDate;this.state.showDatepicker&&t&&r&&(this.setState({showDatepicker:!1}),e.updateSearch({pwaDialog:"datepicker-start"}))},Object.defineProperty(t.prototype,"searchDateRange",{get:function(){var e=this.props,t=e.l10n,r=e.searchResults.searchCriteria;if(!r||!r.startDate||!r.endDate)return"";var n=t.formatDateString(r.startDate,{skeleton:"MMMd"}),a=t.formatDateString(r.endDate,{skeleton:"MMMd"});return t.formatText("hotels.searchResults.playback.dateRange",n,a)},enumerable:!1,configurable:!0}),t.prototype.afterSubmit=function(e){var t=e.packageType,r=e.isMobile;this.setState({searchFormExpanded:!(r&&t)})},t.prototype.onUpdateResults=function(){this.props.searchResults.clearDefaultRequestFields(),this.props.searchResults.shouldFetch=!0},t.prototype.handleExpand=function(){var e=this;this.setState({searchFormExpanded:!this.state.searchFormExpanded},(function(){e.sendTracking(e.state.searchFormExpanded?"ChangeSearch":"CloseForm")}))},t.prototype.sendTracking=function(e){var t=this.props.analytics;t&&"function"==typeof t.trackEvent&&t.trackEvent(":"+e,"Edit search form",null)},t.prototype.render=function(){var e=this.state.jsEnabled,t=this.props,r=t.searchResults,n=t.l10n,a=t.bookingNextProperty,i=t.shouldShowMultiItemWizardFields,l=t.packageType,s=t.context,p=r.searchCriteria,k=p&&p.destination,v=r&&r.isLoading,E=r&&r.searchedDestination,_=v?k:k||E||o.createElement(c.LocalizedText,{message:"hotels.searchResults.playback.destinationMissing.text"}),C=p&&p.guestCount,w=1===C?"hotels.searchResults.singleGuest":"hotels.searchResults.numberOfGuests",x=s&&s.deviceInformation&&s.deviceInformation.mobile,R={onUpdateResults:this.onUpdateResults,afterSubmit:this.afterSubmit,l10n:n,shouldShowMultiItemWizardFields:i,packageType:l,searchResults:r,isMobile:x,bookingNextProperty:a},F=o.createElement(h.UitkLayoutFlex,{dataTestId:"section-hotel-search"},o.createElement(h.UitkLayoutFlexItem,{alignSelf:"center"},o.createElement(g.UitkSpacing,{margin:{inlineend:"two"}},o.createElement(m.UitkIcon,{description:n.formatText("hotels.searchResults.backToSearchResults.a11yLabel"),id:"playback-icon",name:"search",size:m.UitkIconSize.MEDIUM,title:n.formatText("hotels.searchResults.title")}))),o.createElement(h.UitkLayoutFlexItem,null,o.createElement(g.UitkSpacing,{margin:{block:"two",inlinestart:"one"}},o.createElement(y.UitkText,{align:"left",overflow:"truncate"},o.createElement(y.UitkText,{dataTestId:"content-location-title",overflow:"truncate",size:400,weight:"medium"},_),o.createElement(o.Fragment,null,o.createElement(y.UitkText,{dataTestId:"playback-date-range",inline:!0,size:200,weight:"medium"},this.searchDateRange),C&&o.createElement(g.UitkSpacing,{padding:{inline:"two"}},o.createElement(y.UitkText,{dataTestId:"playback-guest-count",inline:!0,size:200,weight:"medium"},o.createElement(c.LocalizedText,{message:w,data:[C]})))))))),T=o.createElement(S,{"data-stid":"playback-action",linkName:"Edit search form",rfrr:":ChangeSearch",to:"/Hotels"},o.createElement(g.UitkSpacing,{margin:{block:"one"},padding:{inlinestart:"three",inlineend:"three"}},F)),L=o.createElement(d.UitkTertiaryButton,{"data-stid":"form_expander",isFullWidth:!0,onClick:this.handleExpand},o.createElement(y.UitkText,{overflow:"truncate"},F)),P=o.createElement(h.UitkLayoutFlex,{justifyContent:"center"},o.createElement(g.UitkSpacing,{padding:{blockend:"four",blockstart:"four"}},o.createElement(O,{linkName:"Close search form",onClick:this.handleExpand,align:f.UitkLinkAlign.CENTER,className:"uitk-button-tertiary","data-stid":"close-search-form"},o.createElement(c.LocalizedText,{message:"hotels.searchResults.close.text"}))));return o.createElement(u.Viewport,null,o.createElement(u.ViewSmall,null,o.createElement("div",{"data-stid":"section-hotel-search"},!this.state.searchFormExpanded&&o.createElement("h2",{className:"is-visually-hidden"},o.createElement(c.LocalizedText,{message:"hotels.infosite.availabilityWizard.changeSearch.a11yLabel"})),e?o.createElement(o.Fragment,null,o.createElement(M,b({isHidden:!this.state.searchFormExpanded},R)),!this.state.searchFormExpanded&&L):T,this.state.searchFormExpanded&&P)),o.createElement(u.ViewMedium,null,o.createElement(M,b({},R))))},t=E([c.withLocalization,Object(a.inject)("analytics","context","routeStore","searchResults","uiPage"),a.observer],t)}(o.Component),M=function(e){var t=e.searchResults,r=e.onUpdateResults,n=e.afterSubmit,a=e.bookingNextProperty,i=void 0!==a&&a,l=e.shouldShowMultiItemWizardFields,s=e.isMobile,u=e.packageType,d=e.l10n,m=e.isHidden,h=void 0!==m&&m,f=t&&t.sortAndFilter,v=[];u&&u!==p.PackageType.HC?v.push("origin","destination","rooms","cabinClass","dateRange","directFlights","partialStayCheckbox","partialStayDateRange"):v.push("destination","dateRange","rooms","pickUpTime","dropOffTime");var E=Object.keys(v).map((function(e){var t;return(t={})[e]="uitk-cell all-y-gutter-two m-cell-1-1 l-cell-1-3 xl-cell-1-3",t})),S=b({className:"uitk-grid l-x-gutter-three all-x-gutter-two all-y-gutter-two",callToAction:d.formatText("hotels.search.form.submit.label"),model:t&&t.searchCriteria,sortAndFilterOptions:f&&f.options,sortAndFilterDefaults:f&&f.defaults,provideDefaultSubmitButton:!0,autoSubmit:!u},{shouldShowMultiItemWizardFields:l,packageType:u,isMobile:s,afterSubmit:n,ignoreFields:["startDate","endDate","partialStayStartDate","partialStayEndDate"],displayFields:v,onUpdateResults:r,wrapperClasses:E});return o.createElement(g.UitkSpacing,{margin:"two","data-stid":"section-hotel-search",className:h?"is-hidden":""},o.createElement("div",null,i&&o.createElement(g.UitkSpacing,{margin:{blockend:"two"}},o.createElement(y.UitkText,{size:400,className:"pwa-theme--grey-700",weight:"bold"},o.createElement(c.LocalizedText,{message:"hotels.searchResults.multiProperty.searchCriteria.header"}))),o.createElement("h2",{className:"is-visually-hidden"},o.createElement(c.LocalizedText,{message:"hotels.infosite.availabilityWizard.changeSearch.a11yLabel"})),o.createElement(k.SearchForm,b({},S))))}},"AqV/":function(e,t){e.exports=function(e){function t(r,n,a){this.extend(t,e.maps.OverlayView),this.map_=r,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=a||{};this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.markerLabel_=i.markerLabel,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.zoomOnClick_=!0,null!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,null!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(r),this.prevZoom_=this.map_.getZoom();var l=this;e.maps.event.addListener(this.map_,"zoom_changed",(function(){var e=l.map_.getZoom(),t=l.map_.minZoom||0,r=Math.min(l.map_.maxZoom||100,l.map_.mapTypes[l.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),r),l.prevZoom_!=e&&(l.prevZoom_=e,l.resetViewport())})),e.maps.event.addListener(this.map_,"idle",(function(){l.redraw()})),n&&(n.length||Object.keys(n).length)&&this.addMarkers(n,!1)}function r(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.lowestPrice_=null,this.lowestPriceLabel_="",this.isSoldOut_=!0,this.clusterIcon_=new n(this,e.getStyles(),e.getGridSize())}function n(t,r){t.getMarkerClusterer().extend(n,e.maps.OverlayView),this.styles_=r,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}return t.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},t.prototype.onAdd=function(){this.setReady_(!0)},t.prototype.draw=function(){},t.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({height:e,width:e})},t.prototype.fitMapToMarkers=function(){for(var t,r=this.getMarkers(),n=new e.maps.LatLngBounds,a=0;t=r[a];a++)n.extend(t.getPosition());this.map_.fitBounds(n)},t.prototype.setStyles=function(e){this.styles_=e},t.prototype.getStyles=function(){return this.styles_},t.prototype.isZoomOnClick=function(){return this.zoomOnClick_},t.prototype.isAverageCenter=function(){return this.averageCenter_},t.prototype.getMarkers=function(){return this.markers_},t.prototype.getTotalMarkers=function(){return this.markers_.length},t.prototype.setMaxZoom=function(e){this.maxZoom_=e},t.prototype.getMaxZoom=function(){return this.maxZoom_},t.prototype.calculator_=function(e,t){for(var r=0,n=e.length,a=n;0!==a;)a=parseInt(a/10,10),r++;return{text:n,index:r=Math.min(r,t)}},t.prototype.setCalculator=function(e){this.calculator_=e},t.prototype.getCalculator=function(){return this.calculator_},t.prototype.addMarkers=function(e,t){if(e.length)for(var r=0;n=e[r];r++)this.pushMarkerTo_(n);else if(Object.keys(e).length)for(var n in e)this.pushMarkerTo_(e[n]);t||this.redraw()},t.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var r=this;e.maps.event.addListener(t,"dragend",(function(){t.isAdded=!1,r.repaint()}))}this.markers_.push(t)},t.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},t.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,n=0;r=this.markers_[n];n++)if(r==e){t=n;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},t.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r)&&(this.resetViewport(),this.redraw(),!0)},t.prototype.removeMarkers=function(e,t){for(var r,n=e===this.getMarkers()?e.slice():e,a=!1,i=0;r=n[i];i++){var l=this.removeMarker_(r);a=a||l}if(!t&&a)return this.resetViewport(),this.redraw(),!0},t.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},t.prototype.getTotalClusters=function(){return this.clusters_.length},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_=e},t.prototype.getGridSize=function(){return this.gridSize_},t.prototype.setGridSize=function(e){this.gridSize_=e},t.prototype.getMinClusterSize=function(){return this.minClusterSize_},t.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},t.prototype.getExtendedBounds=function(t){var r=this.getProjection(),n=new e.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),a=new e.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=r.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var l=r.fromLatLngToDivPixel(a);l.x-=this.gridSize_,l.y+=this.gridSize_;var o=r.fromDivPixelToLatLng(i),s=r.fromDivPixelToLatLng(l);return t.extend(o),t.extend(s),t},t.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},t.prototype.updateMarker=function(e,t){this.markers_[t].setMap(null),this.markers_[t]=e},t.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();var n;for(r=0;n=this.markers_[r];r++)n.isAdded=!1,e&&n.setMap(null);this.clusters_=[]},t.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout((function(){for(var t,r=0;t=e[r];r++)t.remove()}),0)},t.prototype.redraw=function(){this.createClusters_()},t.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,n=(t.lng()-e.lng())*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},t.prototype.addToClosestCluster_=function(e){for(var t,n=4e4,a=null,i=(e.getPosition(),0);t=this.clusters_[i];i++){var l=t.getCenter();if(l){var o=this.distanceBetweenPoints_(l,e.getPosition());o<n&&(n=o,a=t)}}a&&a.isMarkerInClusterBounds(e)?a.addMarker(e):((t=new r(this)).addMarker(e),this.clusters_.push(t))},t.prototype.createClusters_=function(){if(this.ready_)for(var t,r=new e.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(r),a=0;t=this.markers_[a];a++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},r.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,n=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,a=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new e.maps.LatLng(n,a),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var i=this.markers_.length;if(i<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),i==this.minClusterSize_)for(var l=0;l<i;l++)this.markers_[l].setMap(null);if(i>=this.minClusterSize_&&t.setMap(null),!!t.label){var o=parseInt(t.label.text.replace(/\D/g,""),10);Number.isNaN(o)||(!this.lowestPrice_||o<this.lowestPrice_)&&(this.lowestPrice_=o,this.lowestPriceLabel_=t.label.text),this.isSoldOut_&&(this.isSoldOut_=!1)}return this.updateIcon(),!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,r=new e.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),a=0;t=n[a];a++)r.extend(t.getPosition());return r},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new e.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,n=0;r=this.markers_[n];n++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var a=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,a);this.clusterIcon_.setCenter(this.center_),i.text=this.markerClusterer_.markerLabel_(i.text,this.lowestPriceLabel_,this.isSoldOut_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},n.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();e.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},n.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=["uitk-type-200","map__marker-cluster"];this.cluster_.isSoldOut_&&t.push("map__marker-cluster--sold-out"),this.div_.classList.add.apply(this.div_.classList,t),this.div_.innerHTML=this.sums_.text}var r=this.getPanes();r.overlayMouseTarget.appendChild(this.div_),r.overlayMouseTarget.style.zIndex=200;var n=this;e.maps.event.addDomListener(this.div_,"click",(function(){n.triggerClusterClick()}))},n.prototype.draw=function(){if(this.visible_){var t=this.cluster_.getMarkerClusterer();e.maps.event.trigger(t,"drawcluster",this.cluster_);var r=this.getProjection().fromLatLngToDivPixel(this.center_);this.div_.style.top=r.y-this.div_.clientHeight+"px",this.div_.style.left=r.x-this.div_.clientWidth/2+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){this.getPosFromLatLng_(this.center_);this.div_.style.display=""}this.visible_=!0},n.prototype.remove=function(){this.setMap(null)},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=this.text_)},n.prototype.setCenter=function(e){this.center_=e},t}},B6gz:function(e,t,r){r.r(t),r.d(t,"Sidebar",(function(){return m}));var n,a=r("Mn8c"),i=r("GiK3"),l=r("AQYs"),o=r("Y7N9"),s=r("qFFX"),c=r("uX+Z"),u=r("2eDV"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.scrollToTop=function(){window.scrollTo(0,0)},t.prototype.render=function(){var e=this.props,t=e.searchResults,r=e.isActive,n=e.withFilters,a=t&&t.searchCriteria,l=a&&a.regionId,p=a&&a.latLong,d=a&&a.group,m=this.props.l10n.formatText,h=t&&t.searchCriteria,f=t&&t.sortAndFilter&&t.sortAndFilter.options,g=t&&t.sortAndFilter&&t.sortAndFilter.defaults,y=t&&t.searchAndFilterDisplayOptions&&t.searchAndFilterDisplayOptions.filters,k=y&&y.displayFields,v=y&&y.ignoreFields,b=t&&t.map&&t.map.staticMapSrc,E=Boolean(this.props.routeStore&&this.props.routeStore.queryParams&&this.props.routeStore.queryParams.pwaOverlay&&"map"===this.props.routeStore.queryParams.pwaOverlay),S=l||p||d||f,O=k&&k.filter((function(e){return"sort"!==e}));return i.createElement(i.Fragment,null,S&&i.createElement("section",{"data-stid":"desktop-sidebar"},t&&t.map&&i.createElement(o.Experiment,{name:"PWA_SORT_TNL_THROTTLE"},i.createElement(o.ExperimentControl,null,i.createElement(o.Experiment,{name:"PWA_Redesign_Sort_and_Filter_Phase_1"},i.createElement(o.ExperimentControl,null,i.createElement(s.UitkSpacing,{border:["blockend"],padding:{blockend:"six"}},i.createElement("div",null,i.createElement(c.a,{isActive:r,mapImage:b})))),i.createElement(o.ExperimentVariant,{bucket:1},i.createElement("div",null,i.createElement(c.a,{isActive:r,mapImage:b}))))),i.createElement(o.ExperimentVariant,{bucket:1},i.createElement(s.UitkSpacing,{border:["blockend"],padding:{blockend:"six"}},i.createElement("div",null,i.createElement(c.a,{isActive:r,mapImage:b}))))),n&&i.createElement(i.Fragment,null,i.createElement("h2",{className:"is-visually-hidden"},m("hotels.searchResults.filtersDialog.title")),!E&&i.createElement(o.Experiment,{name:"PWA_SORT_TNL_THROTTLE"},i.createElement(o.ExperimentControl,null,i.createElement(o.Experiment,{name:"PWA_Redesign_Sort_and_Filter_Phase_1"},i.createElement(o.ExperimentControl,null,i.createElement(s.UitkSpacing,{padding:{blockend:"twelve"}},i.createElement(u.SearchForm,{model:h,sortAndFilterOptions:f,sortAndFilterDefaults:g,provideDefaultSubmitButton:!1,displayFields:k,ignoreFields:v,autoSubmit:!0,searchable:!0,afterSubmit:this.scrollToTop}))),i.createElement(o.ExperimentVariant,{bucket:1},i.createElement(s.UitkSpacing,{padding:{blockend:"twelve"}},i.createElement(u.SearchForm,{model:h,sortAndFilterOptions:f,sortAndFilterDefaults:g,provideDefaultSubmitButton:!1,displayFields:O,ignoreFields:v,autoSubmit:!0,searchable:!0,afterSubmit:this.scrollToTop}))))),i.createElement(o.ExperimentVariant,{bucket:1},i.createElement(s.UitkSpacing,{padding:{blockend:"twelve"}},i.createElement(u.SearchForm,{model:h,sortAndFilterOptions:f,sortAndFilterDefaults:g,provideDefaultSubmitButton:!1,displayFields:k,ignoreFields:v,autoSubmit:!0,searchable:!0,afterSubmit:this.scrollToTop})))))))},t.defaultProps={isActive:!1,l10n:null,withFilters:!0},t=d([l.withLocalization,Object(a.inject)("searchResults","routeStore"),a.observer],t)}(i.Component)},"Cc/f":function(e,t,r){r.r(t),r.d(t,"Tools",(function(){return Q}));var n=r("Mn8c"),a=r("GiK3"),i=r("AQYs"),l=r("vc39"),o=r("ZOI4"),s=r("rp9/"),c=r("qFFX"),u=r("KuJi"),p=r("uX+Z"),d=r("zBEt"),m=r("9kkh"),h=r("KaGk"),f=r("zmhr"),g=r("3u11"),y=r("OAwv"),k=function(){return(k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},v=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)l.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return l},b=function(e){var t=v(a.useState(!1),2),r=t[0],n=t[1],i=e.analytics,l=e.defaults,o=e.disabled,s=e.pill,c=e.routeStore;if(r||!s||!s.label)return null;var u=s.name,p=s.label,d=s.value,m=function(){if(s.query&&s.query.length>0)c.updateSearch(s.query);else if(s.generated){var e=k({},c.queryParams),t=s.value,r="price"===s.name,n=t&&t.toString().indexOf(",")>=0;if(r&&n)e[s.name]="",c.updateSearch(Object(y.stringify)(e));else if(l&&l[s.name])e[s.name]=l[s.name],c.updateSearch(Object(y.stringify)(e));else{var a=e[s.name],i=void 0;i=a instanceof Array?a.filter((function(e){return!Object(g.b)(e,t)})):Object(g.b)(a,t)?"":a,e[s.name]=i,c.updateSearch(Object(y.stringify)(e))}}},h=function(e){document&&document.dispatchEvent&&"function"==typeof document.dispatchEvent&&CustomEvent&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:e,filterData:s}}))},b="string"==typeof d?d.replace(/,/g,"-"):d,E="playback-filter-pill-"+u+"-"+b;return a.createElement(f.UitkRemovablePill,{id:E,key:E,onClick:function(){var e;e="playback."+u+"."+d,i.clickTracker("."+e,e)(),m(),n(!0),h("remove")},disabled:o},a.createElement("span",{className:"playback-pill-grid-item-label"},p))};b.displayName="PlaybackFilterPill";var E,S=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),O=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.removeAllFilters=function(){var e=t.props,r=e.searchResults,n=e.routeStore;r.clearFilters(n)},t}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.analytics,r=e.routeStore,n=e.searchResults,l=e.wrapPills,o=e.centerPills,s=n&&n.sortAndFilter,c=n&&n.isLoading,u=s&&s.pills||[],p=s&&s.defaults,f=[],g=Object(m.classNames)({"uitk-scroll-horizontal":!l,"uitk-flex-wrap":l,"uitk-flex-justify-content-center":o,"all-l-padding-one":!l},"uitk-flex playback-pill-grid");if(u.forEach((function(e){var n=a.createElement(b,{key:"playback-filter-"+e.name+"-"+e.value,pill:e,disabled:c,routeStore:r,defaults:p,analytics:t});f.push(n)})),f.length>0){var y=1===f.length?"hotels.searchResults.singleFilter.a11yLabel":"hotels.searchResults.multiFilters.a11yLabel";return a.createElement("section",{className:g},a.createElement("h3",{className:"is-visually-hidden"},a.createElement(i.LocalizedText,{message:y})),f,a.createElement(d.AbacusExperiment,{name:"PWA_Remove_all_filters"},a.createElement(d.AbacusControl,null),a.createElement(d.AbacusVariant,{bucket:1},l&&u.length>1&&a.createElement("div",{className:"all-y-padding-two"},a.createElement(h.UitkLink,{type:h.UitkLinkTypeSize.SMALL,inline:!0,onClick:this.removeAllFilters,analytics:t&&t.setupTracker("playback.removeAllFilters","Remove all filters applied",null)},a.createElement("button",{disabled:c},a.createElement(i.LocalizedText,{message:"hotels.searchResults.playbackFilter.removeAllFilters.linkText"})))))))}return null},t=O([Object(n.inject)("searchResults","routeStore","analytics"),n.observer],t)}(a.Component),M=r("Y7N9"),C=r("MHdE"),w=r("Flpp"),x=r("F8kA"),R=r("zqAW"),F=r("Wgar"),T=r("wbeY"),L=r("Dhs5"),P=r("acEa"),j=r("5uXs"),N=Object(n.inject)("routeStore")((function(e){var t=e.dialogName,r=e.linkUrl,n=e.message,i=e.text,o=e.routeStore,s=Object(P.useLocalization)().formatText;if(!r||!n||!i)return null;return a.createElement(L.DialogRoute,{id:t},a.createElement(l.Layer,{id:"results-header"},a.createElement(j.UitkDialog,null,a.createElement(j.UitkDialogContent,null,n),a.createElement(j.UitkDialogFooter,{buttonOne:{onClick:function(){window.open(r)},text:i,type:"tertiary"},buttonTwo:{onClick:function(){o.goBack()},text:s("close"),type:"tertiary"}}))))}));N.displayName="LegalDialog";var A=function(){return(A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},D=Object(R.ClickTracker)(x.Link),I=Object(R.ClickTracker)("a"),U=Object(n.inject)("routeStore")((function(e){var t=e.icon,r=e.link,n=e.label,i=e.linkName,l=e.value,o=e.dialogTrigger,s=e.routeStore;return a.createElement(a.Fragment,null,o?a.createElement(a.Fragment,null,a.createElement(T.a,{type:200},a.createElement(D,{to:s.pathname+"?"+s.mergeQueryString(s.search,{pwaDialog:o.dialogName}),linkName:l,rfrr:o.referrerId},a.createElement(w.UitkText,{weight:"bold"},l),t&&a.createElement(F.UitkIcon,{name:t.id,title:n}))),a.createElement(N,A({dialogName:o.dialogName},o.actionDetails))):a.createElement(T.a,{type:200},a.createElement(I,{href:r.url,linkName:i||l,rfrr:r.referrerId,target:"_blank",rel:"noopener"},a.createElement(w.UitkText,{weight:"bold"},l),t&&a.createElement(F.UitkIcon,{name:t.id,title:n}))))}));U.displayName="HeaderMessageLink";var B=r("2eDV"),z=r("dZRP"),H=function(){return(H=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},V=Object(n.inject)("searchResults")(Object(n.observer)((function(e){var t=e.resultsSummary,r=e.isLoading,n=e.l10n,i=e.loyaltyMessagingModel,o=e.searchCriteria,s=e.searchResults,u=s.isError,p=s.isEmpty,d=o&&o.misId?"multiItem":"hotels",m=s&&s.searchCriteria,h=s&&s.sortAndFilter&&s.sortAndFilter.options,f=s&&s.searchAndFilterDisplayOptions&&s.searchAndFilterDisplayOptions.filters,g=n.formatText(d+".searchResults.loadingMessage.text"),y=function(){return a.createElement(a.Fragment,null,r&&a.createElement(c.UitkSpacing,{padding:{blockend:"two"}},a.createElement(w.UitkText,{inline:!1,align:"left",theme:"secondary"},g)))};return a.createElement("header",{className:"tools__summary"},a.createElement(l.Viewport,null,a.createElement(l.ViewSmall,null,a.createElement(a.Fragment,null,!p&&!u&&a.createElement(a.Fragment,null,i&&a.createElement(z.a,{model:i,searchCriteria:o}),a.createElement(y,null),!r&&a.createElement(W,{resultsSummary:t})))),a.createElement(l.ViewLarge,null,a.createElement(C.UitkLayoutGrid,{columns:8},a.createElement(C.UitkLayoutGridItem,{colSpan:5},a.createElement("div",null,!p&&!u&&a.createElement(a.Fragment,null,i&&a.createElement(z.a,{model:i,searchCriteria:o}),a.createElement(y,null),!r&&a.createElement(W,{resultsSummary:t})))),a.createElement(C.UitkLayoutGridItem,{colSpan:3},a.createElement("div",null,a.createElement(M.Experiment,{name:"PWA_SORT_TNL_THROTTLE"},a.createElement(M.ExperimentControl,null,a.createElement(M.Experiment,{name:"PWA_Redesign_Sort_and_Filter_Phase_1"},a.createElement(M.ExperimentControl,null),a.createElement(M.ExperimentVariant,{bucket:1},a.createElement(B.SearchForm,{model:m,sortAndFilterOptions:h,sortAndFilterDefaults:s&&s.sortAndFilter&&s.sortAndFilter.defaults,provideDefaultSubmitButton:!1,displayFields:["sort"],ignoreFields:f&&f.ignoreFields,autoSubmit:!0,searchable:!0})))),a.createElement(M.ExperimentVariant,{bucket:1}))))))))})));V.displayName="ResultsHeader";var W=function(e){var t=e.resultsSummary;return t&&0!==t.length?a.createElement("div",{"data-stid":"results-header-messages"},t.map((function(e,t){var r=e.link,n=e.value,i=e.dialogTrigger;return n?a.createElement(c.UitkSpacing,{padding:{blockend:"one"},key:"header-message-"+t},r||i?a.createElement(U,H({},e,{"data-stid":"results-header-message"})):a.createElement(w.UitkText,{align:"left",size:200,weight:"bold","data-stid":"results-header-message",key:"header-message-"+t},n)):null}))):null};W.displayName="HeaderMessages";var G=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(){return(q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Z=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},Q=function(e){function t(t){var r=e.call(this,t)||this;return r.state={toolsActive:!1},r.searchToolsWrapper=a.createRef(),r}return G(t,e),t.prototype.componentDidMount=function(){this.setState({toolsActive:!0})},t.prototype.render=function(){var e=this.props,t=e.l10n,r=e.searchResults,n=e.withMapButton,i=e.withFilterButton;if(!r)return null;var o=r.isLoading,s=r.loyaltyMessagingModel,u=r.searchCriteria,p=r.sortAndFilter,d=r.resultsSummary,m=p&&p.pills,h=r&&r.searchAndFilterDisplayOptions&&r.searchAndFilterDisplayOptions.filters,f={resultsSummary:d,isLoading:o,l10n:t,loyaltyMessagingModel:s,searchCriteria:u},g={isActive:this.state.toolsActive,filters:h,dialogTitle:t.formatText("hotels.searchResults.filtersDialog.title"),withMapButton:n,withFilterButton:i},y=m&&m.length>0;return a.createElement(c.UitkSpacing,{margin:{blockstart:"one"}},a.createElement("section",{"data-stid":"tools",ref:this.searchToolsWrapper.value},a.createElement(X,q({},g)),y&&a.createElement(c.UitkSpacing,{padding:{blockend:"three"}},a.createElement("div",null,a.createElement(l.Viewport,null,a.createElement(l.ViewSmall,null,a.createElement(_,null)),a.createElement(l.ViewLarge,null,a.createElement(_,{wrapPills:!0}))))),a.createElement(V,q({},f))))},t.defaultProps={l10n:null,withMapButton:!1,withFilterButton:!1},t=Z([i.withLocalization,Object(n.inject)("searchResults"),n.observer],t)}(a.Component),K=function(e){var t=e.isActive,r=e.filters,n=e.dialogTitle,i=e.withFilterButton,l=e.withMapButton;return a.createElement(c.UitkSpacing,{"data-stid":"tools__actions"},a.createElement(o.UitkLayoutFlex,null,i&&a.createElement(o.UitkLayoutFlexItem,{grow:2,"data-stid":"filters-toggle-button"},a.createElement(c.UitkSpacing,{margin:"one",padding:{blockend:"three"}},a.createElement("div",null,a.createElement(u.a,{buttonComponent:s.UitkSecondaryButton,isActive:t,isFullWidth:!0,label:"hotels.searchResults.openFiltersDialog.label",a11yMessage:"hotels.searchResults.appliedFiltersCount.a11yLabel",rfrr:":FilterControl",stid:"open-hotel-filters",filters:r,dialogParam:"filter",dialogTitle:n})))),l&&a.createElement(o.UitkLayoutFlexItem,{grow:1,"data-stid":"map-toggle-button"},a.createElement(c.UitkSpacing,{margin:"one"},a.createElement("div",null,a.createElement(p.a,{isActive:t}))))))},X=function(e){var t=e.isActive,r=e.filters,n=e.dialogTitle,i=e.withFilterButton,o=e.withMapButton;return a.createElement(l.Viewport,null,a.createElement(l.ViewSmall,null,a.createElement(K,{isActive:t,filters:r,dialogTitle:n,withFilterButton:!0,withMapButton:!0})),a.createElement(l.ViewLarge,null,a.createElement(a.Fragment,null)),a.createElement(l.ViewExtraLarge,null,a.createElement(K,{isActive:t,filters:r,dialogTitle:n,withMapButton:o,withFilterButton:i})))}},KuJi:function(e,t,r){r.d(t,"a",(function(){return R}));var n=r("Mn8c"),a=r("F8kA"),i=r("GiK3"),l=r("zqAW"),o=r("vc39"),s=r("AQYs"),c=r("Dhs5"),u=r("5uXs"),p=r("qFFX"),d=Object(i.createContext)({});var m=r("rp9/"),h=r("MxYd"),f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},g=function(e){var t=e.analytics,r=e.l10n,n=e.dialogTitle,a=e.closeDialog,l=e.clearFilters,o=Object(i.useContext)(d),c=o&&o.displayFieldsActiveLength>0,u={action:a,iconLabel:r.formatText("hotels.searchResults.filtersDialog.closeButton.label"),header:n,analytics:t&&t.setupTracker("CloseFilterDialog","close search filters dialog"),actionContent:i.createElement(m.UitkTertiaryButton,{type:"reset",disabled:!c,onClick:l,text:i.createElement(s.LocalizedText,{message:"hotels.searchResults.filtersDialog.clearButton.label"})})};return i.createElement(h.UitkToolbar,f({},u))},y=r("2eDV"),k=r("X4mx"),v=Object(l.ClickTracker)(m.UitkPrimaryFloatingButton),b=function(e){var t=e.buttonRef;return i.createElement(k.UitkScrim,{type:k.UitkScrimType.BUTTON},i.createElement(v,{"data-stid":"submit-hotel-filters",domRef:t,type:"submit",isFullWidth:!0,size:m.UitkButtonSize.LARGE,text:i.createElement(s.LocalizedText,{message:"hotels.searchResults.filtersDialog.submitButton.label"}),rfrr:"FilterControlDone",linkName:"done search filters dialog"}))};b.displayName="SearchFormBottomSection";var E,S=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},_=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},M=function(e){function t(t){var r=e.call(this,t)||this;return r.buttonRef=i.createRef(),r.onChange=function(){r.setState({formRef:r.state.formRef})},r.clearFilters=r.clearFilters.bind(r),r.closeDialog=r.closeDialog.bind(r),r.formRefCallback=r.formRefCallback.bind(r),r.getSearchFormBottomSection=r.getSearchFormBottomSection.bind(r),r.onChange=r.onChange.bind(r),r.clearFilters=r.clearFilters.bind(r),r.state={formRef:null},r}return S(t,e),t.prototype.formRefCallback=function(e){e?this.setState({formRef:e.wrappedInstance?e.wrappedInstance:e}):this.setState({formRef:null})},t.prototype.closeDialog=function(){"function"==typeof this.props.onDismiss&&this.props.onDismiss()},t.prototype.clearFilters=function(){var e=this.state.formRef;e&&"function"==typeof e.clearDisplayfields&&(e.clearDisplayfields(),this.setState({formRef:this.state.formRef}))},t.prototype.getSearchFormBottomSection=function(){return i.createElement(b,{buttonRef:this.buttonRef})},t.prototype.render=function(){var e=this.props,t=e.searchResults,r=e.filters,n=t&&t.searchCriteria,a=t&&t.sortAndFilter,l=a&&a.options,o=a&&a.defaults,c=r&&r.displayFields,m=r&&r.ignoreFields,h={dialogShow:!0,animation:u.UitkDialogAnimationType.SLIDEUP};return i.createElement(d.Provider,{value:this.state.formRef},i.createElement(u.UitkFullscreenDialog,O({},h),i.createElement(g,O({"data-stid":"filters-top-bar"},{analytics:this.props.analytics,l10n:this.props.l10n,dialogTitle:this.props.dialogTitle,closeDialog:this.closeDialog,clearFilters:this.clearFilters})),i.createElement(u.UitkDialogContent,{zeroPadding:!0},i.createElement(p.UitkSpacing,{padding:{blockend:"twelve"}},i.createElement(y.SearchForm,{onChange:this.onChange,formRef:this.formRefCallback,model:n,sortAndFilterOptions:l,sortAndFilterDefaults:o,renderSearchFormBottomSection:this.getSearchFormBottomSection,provideDefaultSubmitButton:!1,displayFields:c,fieldsWrapper:{Tag:u.UitkDialogContent},ignoreFields:m,fieldNameOverrides:{amenityIcons:"amenities"},searchable:!0}))),i.createElement("span",{className:"is-visually-hidden"},i.createElement(s.LocalizedText,{message:"hotels.searchResults.filtersDialog.a11yLabel"}))))},t=_([s.withLocalization,Object(n.inject)("analytics")],t)}(i.Component),C=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w=function(){return(w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},x=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},R=function(e){function t(t){var r=e.call(this,t)||this;return r.filtersBtn=i.createRef(),r.onDismiss=r.onDismiss.bind(r),r}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,r=void 0!==t&&t,n=e.searchResults,a=e.routeStore,l=e.buttonComponent,s=e.isFullWidth,u=e.label,p=e.a11yMessage,d=e.rfrr,m=e.stid,h=e.filters,f=e.dialogParam,g=e.dialogTitle,y=e.l10n;return i.createElement(i.Fragment,null,i.createElement(F,{a11yMessage:p,buttonComponent:l,dialogParam:f,filtersBtn:this.filtersBtn,isActive:r,isFullWidth:s,l10n:y,label:u,rfrr:d,routeStore:a,searchResults:n,stid:m}),i.createElement(c.QueryRoute,{query:{pwaDialog:f}},i.createElement(o.Layer,{id:"tools-filterdrawer",onDismiss:this.onDismiss},i.createElement(M,w({searchCriteria:n.searchCriteria,onDismiss:this.onDismiss},{searchResults:n,filters:h,dialogTitle:g})))))},t.prototype.onDismiss=function(){var e,t,r,n,a=null===(t=null===(e=this.props)||void 0===e?void 0:e.routeStore)||void 0===t?void 0:t.goBack,i=null===(n=null===(r=this.filtersBtn)||void 0===r?void 0:r.current)||void 0===n?void 0:n.focus;"function"==typeof a&&this.props.routeStore.goBack(),"function"==typeof i&&this.filtersBtn.current.focus()},t=x([s.withLocalization,Object(n.inject)("routeStore","searchResults"),n.observer],t)}(i.Component),F=function(e){var t,r=e.a11yMessage,n=e.buttonComponent,o=e.dialogParam,s=e.filtersBtn,c=e.isActive,u=e.isFullWidth,p=e.l10n,d=e.label,m=e.rfrr,h=e.routeStore,f=e.searchResults,g=e.stid,y=f.isLoading,k=f.isError,v=f.sortAndFilter,b=null===(t=null==v?void 0:v.options)||void 0===t?void 0:t.appliedFilterCount,E=Object(l.ClickTracker)(n),S=b>0,O=(S?p.formatText(r,b)+", ":"")+p.formatText(d),_=v&&Object.keys(v).length>0,M=h.mergeQueryString(h.search,{pwaDialog:o}),C=c&&_?{tag:a.Link,role:"button",to:{pathname:h.pathname,search:M}}:{};return i.createElement(E,w({innerRef:s,"data-stid":g,disabled:!c||y||k||null,linkName:"Launch filters takeover",rfrr:m,icon:S?null:"tune",badgeText:S?b:null,badgeType:"notification-1",text:p.formatText(d),isFullWidth:u,"aria-label":O},C))}},VGq8:function(e,t,r){r.r(t),r.d(t,"PropertySearchListings",(function(){return le}));var n=r("GiK3"),a=r("Mn8c"),i=r("zqAW"),l=r("vc39"),o=r("Avz1"),s=r("ZOI4"),c=r("rp9/"),u=r("qFFX"),p=r("KAgu"),d=r("sfv7"),m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)l.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return l},h=function(e){var t=m(n.useState(!1),2),r=t[0],a=t[1],i=n.useRef(null);n.useEffect((function(){var e=i.current;e&&e.addEventListener("mesoAd",(function(e){e&&e.detail&&("AD-LOAD-PASS"===e.detail.code&&a(!0),"AD-LOAD-EMPTY"===e.detail.code&&a(!1))}))}),[]);var o=e.errorBoundaryLabel,s=e.uci,c=e.className;return n.createElement(l.ErrorBoundary,{label:o},n.createElement("li",{"data-stid":"meso-native",className:r?c:""},n.createElement("meso-native",{ref:i,uci:s,nativetype:"tile",isfluid:!0,adslot:s,"data-testid":"meso-native"})),n.createElement(d.a,{pageName:"page.Hotels.Search"}))};h.displayName="MesoBrandResultListing",h.defaultProps={errorBoundaryLabel:"hotel.meso"};var f,g=r("Sdx3"),y=function(){return(y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},k=((f={})[g.SearchPageName.HC]={slots:{7:{viewSmall:{id:"CL3",uci:"CL3"}},10:{viewSmall:{id:"CL6",uci:"CL6"}},13:{viewSmall:{id:"CL9",uci:"CL9"}}}},f[g.SearchPageName.FH]={slots:{7:{viewSmall:{id:"CL3",uci:"CL3"}},10:{viewSmall:{id:"CL6",uci:"CL6"}},13:{viewSmall:{id:"CL9",uci:"CL9"}}}},f),v=function(e){var t=e.slotIndex,r=e.classNames,a=e.pageId,i=k[a].slots[t];return n.createElement(n.Fragment,null,n.createElement(l.ErrorBoundary,{label:"meso.display.ad"},n.createElement(l.Viewport,null,n.createElement(l.ViewMedium,null),n.createElement(l.ViewSmall,null,n.createElement(s.UitkLayoutFlex,{className:""+r,justifyContent:"center",tag:"li"},n.createElement("meso-display-ad",y({},i.viewSmall)))))))};v.displayName="MesoInlineAdComponent";var b=r("KmD6"),E=r("eKs6"),S=r("XDQ7"),O=r("Flpp"),_=n.memo((function(e){var t=e.model,r=t.value,a=t.size,i=t.level,o=e.className;return n.createElement(l.ErrorBoundary,{label:"hotel.search.listingTitle"},n.createElement("li",{className:"uitk-cell "+o},n.createElement("div",{className:"all-t-padding-three"},n.createElement(O.UitkHeading,{level:i,size:a},r))))}));_.displayName="ListTitle";var M=r("2o8M"),C=r("dGjh"),w=r("29+M"),x=r("/5Tq"),R=r("ss7p"),F=r("emUk"),T=r("MHdE"),L=r("KaGk"),P=r("Wgar"),j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var N=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e&&"function"==typeof e&&e.apply(void 0,t)},A=function(e){var t,r=e.analyticsCallback,a=e.data,i=a.label,l=a.resource,o=a.icon,s=a.analytics;return Object(n.createElement)(L.UitkLink,{iconPos:L.UitkLinkAlign.RIGHT,align:L.UitkLinkAlign.RIGHT,onClickCapture:function(){return N(r,s.referrerId,s.linkName)},inline:!0},Object(n.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:l.value},i,(null===(t=o)||void 0===t?void 0:t.id)&&Object(n.createElement)(P.UitkIcon,{name:o.id})))};A.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CrossSellButtonActionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrossSellButtonAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"label"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"referrerId"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"linkName"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:207,source:{body:"\n  fragment CrossSellButtonActionFragment on CrossSellButtonAction {\n    label\n    resource {\n      value          \n    }\n    icon {\n      id\n    }\n    analytics {\n      referrerId,\n      linkName\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},A.displayName="CrossSellButtonAction",A.fragment.__typename="CrossSellButtonAction";var D=function(e){var t=e.analyticsCallback,r=e.data,a=r.label,i=r.resource,l=r.analytics;return Object(n.createElement)(L.UitkLink,{align:L.UitkLinkAlign.RIGHT,onClickCapture:function(){return N(t,l.referrerId,l.linkName)},inline:!0},Object(n.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:i.value},a))};D.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CrossSellLinkActionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrossSellLinkAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"label"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"linkName"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"referrerId"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:176,source:{body:"\n  fragment CrossSellLinkActionFragment on CrossSellLinkAction {\n    label\n    resource {\n      value          \n    }\n    analytics {\n      linkName\n      referrerId\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},D.displayName="CrossSellLinkAction",D.fragment.__typename="CrossSellLinkAction";var I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"StaticCrossSellQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"crossSellProduct"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CrossSellProductType"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchContext"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MultiItemSearchContextInput"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"staticMultiItemCrossSell"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"crossSellProduct"},value:{kind:"Variable",name:{kind:"Name",value:"crossSellProduct"}}},{kind:"Argument",name:{kind:"Name",value:"searchContext"},value:{kind:"Variable",name:{kind:"Name",value:"searchContext"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"crossSellOptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"primary"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"secondaries"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CrossSellLinkActionFragment"},directives:[]}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"actionBar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrossSellButtonAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CrossSellButtonActionFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrossSellLinkAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CrossSellLinkActionFragment"},directives:[]}]}}]}}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"impressionAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"referrerId"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"linkName"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}].concat(A.fragment.definitions,D.fragment.definitions),loc:{start:0,end:788,source:{body:"\n  query StaticCrossSellQuery (\n    $context: ContextInput!,\n    $crossSellProduct: CrossSellProductType!,\n    $searchContext: MultiItemSearchContextInput!\n  ) {\n    staticMultiItemCrossSell (\n      context: $context\n      crossSellProduct: $crossSellProduct\n      searchContext: $searchContext\n    ) {\n      crossSellOptions {\n        primary\n        secondaries\n        image {\n          url\n        }\n        action {\n          ...CrossSellLinkActionFragment\n        }\n        actionBar {\n          ...on CrossSellButtonAction {\n            ...CrossSellButtonActionFragment\n          }\n          ...on CrossSellLinkAction {\n            ...CrossSellLinkActionFragment\n          }\n        }\n      }\n      impressionAnalytics {\n        referrerId\n        linkName\n      }\n    }\n  }\n  \n  \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},U=[A,D],B=function(e){var t,r,a=e.inputs,i=e.skipSsr,l=e.analyticsCallback,o=e.noResultsFallback,s=Object(x.useBexApi)().context,c=j(j({},a),{context:s}),u=Object(w.e)(I,{variables:c,ssr:!i}),p=u.data,d=u.error,m=u.loading;if(Object(n.useEffect)((function(){if(p){var e=p.staticMultiItemCrossSell.impressionAnalytics,t=e.referrerId,r=e.linkName;N(l,t,r)}d&&N(l,"mit.static.xsell.graphql.error","Multi-Item static cross sell error")}),[l,p,d]),m)return null;if(d||!p)return o?Object(n.createElement)(o,null):null;var h=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)l.push(n.value)}catch(d){a={error:d}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return l}(p.staticMultiItemCrossSell.crossSellOptions,1)[0],f=h.primary,g=h.secondaries,y=h.image,k=h.action,v=k.label,b=k.resource,E=k.analytics,S=h.actionBar,_=null===(t=g)||void 0===t?void 0:t.map((function(e,t){return Object(n.createElement)(O.UitkSubheading,{key:"secondary-message-"+t},e)})),M=null===(r=S)||void 0===r?void 0:r.map((function(e,t){var r=U.find((function(t){return t.fragment.__typename===e.__typename}));return Object(n.createElement)(r,{key:"action-bar-"+t,data:Object(C.a)(r.fragment,e),analyticsCallback:l})}));return Object(n.createElement)(R.UitkCardAloha,{"data-stid":"static-cross-sell__main"},Object(n.createElement)(T.UitkLayoutGrid,{columns:{small:1,medium:3}},Object(n.createElement)(n.Fragment,null,y&&Object(n.createElement)(T.UitkLayoutGridItem,null,Object(n.createElement)(R.UitkCardMedia,null,Object(n.createElement)(F.UitkFigure,{ratio:F.UitkFigureAspectRatioType.R16_9},Object(n.createElement)(F.UitkImage,{src:y.url})))),Object(n.createElement)(T.UitkLayoutGridItem,{colSpan:{medium:2}},Object(n.createElement)(R.UitkCardAlohaContentSection,null,Object(n.createElement)(O.UitkHeading,{level:4,size:400},f),Object(n.createElement)("div",{className:"all-t-margin-two"},_))),Object(n.createElement)(T.UitkLayoutGridItem,{colSpan:"all",className:"uitk-type-right"},Object(n.createElement)(R.UitkCardAlohaActionArea,{"data-stid":"static-cross-sell__action-bar"},M)))),Object(n.createElement)(R.UitkCardAlohaLink,null,Object(n.createElement)("a",{onClickCapture:function(){return N(l,E.referrerId,E.linkName)},"data-stid":"static-cross-sell__card-link",target:"_blank",rel:"noopener noreferrer",href:b.value},v)))};B.displayName="StaticMultiItemCrossSell";var z=r("2vO8"),H=r("4XcF"),V=r("NhMs"),W=r("EQuc"),G=function(){return(G=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},q=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},Z=n.memo((function(e){var t,r=e.fallbackListingViewModel,a=e.className,i=e.analytics,l=q(e,["fallbackListingViewModel","className","analytics"]);return(t=r)&&"MessageResult"===t.__typename?n.createElement(W.a,G({},l,{model:r,className:a,analytics:i})):null})),Q=function(){return(Q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},K=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},X=n.memo((function(e){var t=e.model,r=t.crossSellProductType,a=t.fallbackListingViewModel,i=e.className,l=e.crossSell,o=e.analytics,s=K(e,["model","className","crossSell","analytics"]),c=Object(H.b)(),u=Object(V.e)(),p=Object(z.a)(c,u,!1),d=n.useCallback(function(e){return function(t,r){return e.trackEvent(t,r,null,null,!0)}}(o),[o]),m=n.useCallback((function(){return n.createElement(Z,Q({},s,{className:i?i.replace("listing",""):i,analytics:o,fallbackListingViewModel:a}))}),[i,o,a,s]);return r?n.createElement("li",{className:i},n.createElement(l,{skipSsr:!0,inputs:{crossSellProduct:r,searchContext:{properties:[p]}},analyticsCallback:d,noResultsFallback:m})):null}));X.displayName="StaticMultiItemCrossSellWrapperComponent";var Y=function(e){return n.createElement(X,Q({},e,{crossSell:B}))};Y.displayName="StaticMultiItemCrossSellWrapper";var J=function(){return(J=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},ee=function(e){var t=e.model,r=e.resultType,a=$(e,["model","resultType"]);switch(r){case o.a.MESSAGING:case o.a.FREE_CANCELLATION:return n.createElement(M.MessagingCard,J({model:t},a));case o.a.LIST_TITLE:return n.createElement(_,J({model:t,resultType:r},a));case o.a.STATIC_LODGING_MULTI_ITEM_CROSS_SELL:return n.createElement(Y,J({model:t,resultType:r},a));case o.a.HOTEL:default:return n.createElement(E.a,{propertyListing:t},n.createElement(S.a,J({model:Object(b.m)(t)},a)))}},te=function(){return(te=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},re=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},ne=new Array(6).fill({model:{}}),ae=Object(i.ClickTracker)(c.UitkSecondaryButton),ie=function(e,t){return t+function(e){return e.filter((function(e){return e.resultType!==o.a.HOTEL})).length}(e)},le=Object(a.inject)("searchResults","analytics","routeStore","advertising")(Object(a.observer)((function(e){var t,r=e.searchResults,a=e.analytics,i=e.routeStore,l=e.advertising,o=e.setResultRef,s=e.showMoreLabel,c=e.handleShowMore,u=e.fetchOnScrollResolved,p=r.hotelsMaxDisplay>=(null===(t=r.properties)||void 0===t?void 0:t.length),d=":LoadMore"+r.getPageLoadNumber();return n.createElement(n.Fragment,null,n.createElement(oe,{analytics:a,routeStore:i,triggeredPageName:l.triggeredPageName,setResultRef:o,propertySearchListings:r.propertySearchListings,searchCriteria:r.searchCriteria,hotelsMaxDisplay:r.hotelsMaxDisplay,isLoading:r.isLoading}),n.createElement(se,{allHotelsDisplayed:p,onClickHandler:c,rfrr:d,linkName:"Show more results",isLoading:r.isLoading,text:s,searchResults:r,fetchOnScrollResolved:u}))}))),oe=function(e){var t=e.analytics,r=e.routeStore,a=e.setResultRef,i=e.triggeredPageName,l=e.propertySearchListings,s=e.searchCriteria,c=e.hotelsMaxDisplay,d=e.isLoading;Object(n.useEffect)((function(){return function(){return p.a.dequeueAll("HSR")}}));var m=s.endDate,f=s.startDate,g=d&&(!l||0===l.length),y=g?ne:function(e,t){return e?e.slice(0,ie(e,t)):[]}(l,c),b=-1;return n.createElement("section",{className:"results","data-stid":"section-results"},n.createElement("ol",{className:"results-list no-bullet"},y.map((function(e,l){return b+=e.resultType===o.a.HOTEL?1:0,n.createElement(n.Fragment,{key:"resultListing-"+l},11===b&&n.createElement(u.UitkSpacing,{padding:{blockstart:"three"}},n.createElement(h,{uci:"RL1",errorBoundaryLabel:"hotel.search.meso"})),(c=b,(s=i)&&k[s]&&Object.keys(k[s].slots).indexOf(c.toString())>-1&&n.createElement(v,{key:"mesoInlineAd"+b,slotIndex:b,classNames:"listing",pageId:i})),n.createElement(u.UitkSpacing,{padding:{blockstart:"three"}},n.createElement(ee,te({lazyLoadImg:l>=3,loading:g,className:"listing","data-stid":e.dataStid},e,{startDate:f,endDate:m,index:l,setResultRef:a,routeStore:r,analytics:t}))));var s,c}))))},se=function(e){var t=e.allHotelsDisplayed,r=e.onClickHandler,a=e.isLoading,i=e.searchResults,o=e.fetchOnScrollResolved,c=re(e,["allHotelsDisplayed","onClickHandler","isLoading","searchResults","fetchOnScrollResolved"]),p=i.isReducedPayloadExperimentV1,d=!p&&a;return p&&t&&o||!p&&t?null:n.createElement(l.ErrorBoundary,{label:"hotel.search.showMoreResultsButton"},n.createElement(u.UitkSpacing,{padding:{blockstart:"three"}},n.createElement(s.UitkLayoutFlex,{justifyContent:"center",tag:"section"},n.createElement(ae,te({disabled:d,"data-stid":"show-more-results",onClick:r},c)))))}},bT9q:function(e,t,r){r.r(t),r.d(t,"LoyaltyEducationDialog",(function(){return M}));var n=r("Mn8c"),a=r("GiK3"),i=r("vc39"),l=r("MxYd"),o=r("5uXs"),s=r("zqAW"),c=r("rp9/"),u=r("X4mx"),p=r("8aRD"),d=r("Wgar"),m=function(e){var t=e.perks;return t?a.createElement("div",{className:"all-b-margin-three"},t.icon?t.descriptions.map((function(e,r){return a.createElement("li",{className:"uitk-grid all-t-margin-two",key:r},a.createElement(d.UitkIcon,{name:t.icon,className:"uitk-cell all-cell-shrink all-r-margin-two",size:d.UitkIconSize.SMALL}),a.createElement("span",{className:"uitk-cell all-cell-3-4 uitk-type-paragraph-300"},e))})):a.createElement("ul",{className:"uitk-type-list-300"},t.descriptions.map((function(e,t){return a.createElement("li",{key:t},e)})))):null};m.displayName="LoyaltyEducationPerksContent";var h=function(e){var t=e.title,r=e.perks,n=e.description;return a.createElement(a.Fragment,null,t&&a.createElement("h4",{className:"uitk-type-heading-300 all-b-margin-one uitk-type-bold"},t),a.createElement(m,{perks:r}),n&&a.createElement("p",{className:"uitk-type-paragraph-300 all-b-margin-three"},n))},f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},g=function(e){var t=e.content;return t?a.createElement(a.Fragment,null,a.createElement("p",{className:"uitk-type-paragraph-300 all-b-margin-three"},t.description),t.programFeatures.map((function(e){return a.createElement(h,f({key:e.toString()},e))}))):null};g.displayName="LoyaltyPointsEducationContent";var y=r("/B06"),k=function(e){var t=e.content;return t?a.createElement(a.Fragment,null,a.createElement(m,{perks:t.perks}),t.joinProgramText&&a.createElement("p",{className:"uitk-type-paragraph-300 all-b-margin-three"},t.joinProgramText)):null};k.displayName="LoyaltyProgramEducationContent";var v,b=function(e){var t=e.type,r=e.content;switch(t){case y.a.POINTS:return a.createElement(g,{content:r});case y.a.PROGRAM:return a.createElement(k,{content:r});default:return null}},E=Object(s.ClickTracker)(p.a),S=function(e){var t=e.loyaltyEducation;if(!t)return null;var r=t.title,n=t.content,i=t.action;return a.createElement(a.Fragment,null,r&&a.createElement("h1",{className:"uitk-type-heading-600 uitk-type-bold all-y-margin-four"},r),n&&a.createElement("section",null,a.createElement(b,{type:n._type,content:n})),i&&i.text&&a.createElement(u.UitkScrim,{type:u.UitkScrimType.BUTTON},a.createElement(E,{to:i.href,rfrr:i.rfrr,linkName:"Rewards Dialog Button"},a.createElement(c.UitkPrimaryButton,{id:"join-rewards-btn",text:i.text,"data-stid":"join-rewards-btn",isFullWidth:!0,size:c.UitkButtonSize.LARGE}))))},O=(v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDismiss=function(){t.props.routeStore.goBack()},t}return O(t,e),t.prototype.render=function(){var e=this.props.analytics.setupTracker("RewardsEducationDialog.Close","Rewards Education Dialog"),t=this.props.loyaltyEducation;return a.createElement(i.Layer,{id:"join-rewards",onDismiss:this.handleDismiss},a.createElement(o.UitkFullscreenDialog,{dialogShow:!0},a.createElement(l.UitkToolbar,{type:l.ToolbarType.CLOSE,action:this.handleDismiss,analytics:e}),a.createElement(o.UitkDialogContent,null,a.createElement(S,{loyaltyEducation:t}))))},t=_([Object(n.inject)("routeStore","analytics")],t)}(a.Component)},"fUy/":function(e,t,r){var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},l=r("Mn8c"),o=l.inject,s=l.observer,c=r("GiK3"),u=r("vc39"),p=u.ErrorBoundary,d=u.ViewExtraLarge,m=u.ViewLarge,h=u.ViewMedium,f=u.Viewport,g=u.ViewSmall,y=r("Dhs5").QueryRoute,k=r("AQYs").withLocalization,v=r("4Pih").CustomerNotificationLocation,b=r("fboL").VirtualAgentControl,E=r("Sdx3").SearchPageName,S=r("5uZZ").MitStep,O=r("9kkh").classNames,_=r("9kkh").liveAnnounce,M=r("ZaxM").UitkEmptyState,C=r("MHdE"),w=C.UitkLayoutGrid,x=C.UitkLayoutGridItem,R=r("qFFX").UitkSpacing,F=r("CNfa").CustomerNotifications,T=r("5lYd").ExitIntent,L=r("bT9q").LoyaltyEducationDialog,P=r("hJRV").MainRegion,j=r("nY/O").MasterPage,N=r("+2MM").MesoFooter,A=r("F5Ss").MesoIntentMediaExp,D=r("c+zd").MesoSideRail,I=r("d333").MitHeader,U=r("LtQA").MitMessageHeader,B=r("4Vwg").MultiItem,z=r("6nn/").Playback,H=r("VGq8").PropertySearchListings,V=r("Da3f").RewardsEducationDialog,W=r("B6gz").Sidebar,G=r("VsoX").SideRailRegion,q=r("va8f").ToolbarRegion,Z=r("Cc/f").Tools,Q=r("FpWH"),K=j.wrappedComponent.toolbarTypes,X=j.wrappedComponent.sideRailTypes,Y=function(e){function t(t){var r=e.call(this,t)||this;return r.resultRefs=[],r.fetchOnScrollCalled=!1,r.queueShowMore=!1,r.handleLinkActionFromErrorMessage=function(e){if(e){var t=r.props.analytics,n=e.analytics.referrerId,a=e.resource&&e.resource.relativePath;n&&t&&"function"==typeof t.trackEvent&&t.trackEvent(n,"MultiItem Error",null,null,!0),window.location.replace(a)}else r.handleRetry(":errorOnSearch","MultiItem Retry Search")},r.handleOnDismiss=r.handleOnDismiss.bind(r),r.handleRetry=r.handleRetry.bind(r),r.handleShowMore=r.handleShowMore.bind(r),r.markUsable=r.markUsable.bind(r),r.setResultRef=r.setResultRef.bind(r),r.fetchOnScroll=r.fetchOnScroll.bind(r),r.state={jsEnabled:!1,fetchOnScrollResolved:!1},r.props.searchResults&&r.props.searchResults.searchCriteria&&"true"===r.props.searchResults.searchCriteria.multiProp&&r.props.multiItem&&r.props.multiItem.getOrCreateCart(r.props.context),r}return a(t,e),Object.defineProperty(t.prototype,"backToChangeSearchQuery",{get:function(){var e=this.props.routeStore;if(e&&"function"==typeof e.mergeQueryString)return e.mergeQueryString(e.search,{pwaOverlay:"changeSearch"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){var e=this.props,t=e.searchResults,r=e.uiPage;return t.isLoading&&!r.displayProgressIndicator},enumerable:!1,configurable:!0}),t.prototype.markUsable=function(e,t){var r=this.props,n=r.analytics,a=r.searchResults;e&&!t&&(n.markPageUsable(),a.pageUsableMarked=!0)},t.prototype.componentDidMount=function(){var e=this.props.searchResults,t=e.usable,r=e.pageUsableMarked;this.markUsable(t,r),this.announceLoadingState(),this.trackDisambiguationSearch(),this.trackSearchResultsError(),this.setState({jsEnabled:!0})},t.prototype.shouldComponentUpdate=function(e,t){var r=e.searchResults,n=r.usable,a=r.pageUsableMarked;this.markUsable&&this.markUsable(n,a);var i=this.state.jsEnabled!==t.jsEnabled,l=void 0===this.props.location&&"object"==typeof(null==e?void 0:e.location);return!(i||l)},t.prototype.trackDisambiguationSearch=function(){if(this.props.multiItem&&this.props.multiItem.isDisambigSearch()&&this.props.analytics&&"function"==typeof this.props.analytics.trackEvent){this.props.analytics.trackEvent(this.props.multiItem.referrer,"package disambig search",null,[{name:"SearchResultsDisambig",error:!1}])}},t.prototype.trackSearchResultsError=function(){var e=this.props.searchResults,t=e.isEmpty,r=e.isError;(t||r)&&this.props.analytics&&"function"==typeof this.props.analytics.trackEvent&&this.props.analytics.trackEvent("SorryMessage","SorryMessage",null)},t.prototype.componentDidUpdate=function(){this.announceLoadingState()},t.prototype.announceLoadingState=function(){var e,t=this.props.searchResults,r=t.isLoading,n=t.isError,a=t.isEmpty,i=this.props.l10n;(e=r?i.formatText("hotels.searchResults.resultsLoading.liveAnnounce"):n?i.formatText("hotels.searchResults.errorRetrievingResults.liveAnnounce"):a?i.formatText("hotels.searchResults.emptyResults.liveAnnounce"):i.formatText("hotels.searchResults.resultsUpdated.liveAnnounce"))!==this.lastLoadingStateMessage&&(_(e,"assertive"),this.lastLoadingStateMessage=e)},t.prototype.handleOnDismiss=function(){var e=this.props.routeStore;e&&"function"==typeof e.goBack&&e.goBack()},t.prototype.setResultRef=function(e,t){var r=this;null!==e&&this.resultRefs[t]!==e&&(this.resultRefs[t]=e,10===t?Q.subscribe("window",e,{didEnter:function(){return r.props.searchResults.setHotelsMaxDisplayToTotalRenderCount()},isAbove:function(){return r.props.searchResults.setHotelsMaxDisplayToTotalRenderCount()}},{extendBoundingBoxToBottomOfPage:!0,triggerOnce:!0}):this.props.searchResults.isReducedPayloadExperimentV1&&25===t&&(this.fetchOnScrollCalled=!1,Q.subscribe("window",e,{didEnter:function(){return r.fetchOnScroll()},isAbove:function(){return r.fetchOnScroll()}},{extendBoundingBoxToBottomOfPage:!0,triggerOnce:!0})))},t.prototype.render=function(){var e=this.props,t=e.context,r=e.experiment,n=e.analytics,a=e.page,i=e.l10n,l=e.searchResults,o=e.multiItem,s=e.virtualAgentControlStore,u=Number(l&&l.searchCriteria&&l.searchCriteria.regionId)?l.searchCriteria.regionId:"",k=l&&l.rewardsDialogContent&&l.rewardsDialogContent.rewardsEducation,_=l&&l.loyaltyEducation,M=o&&o.cartInfo&&"mixAndMatch"===o.cartInfo.identifier,C=O("search-results"),w=(null==a?void 0:a.pageName)||E.SA;return M&&o.itemCount>0&&o.emptyCart(t),c.createElement(j,{className:C,loading:this.loading,route:this.props.route,searchCriteria:l.searchCriteria,navigationTabs:l.navigationTabs,sideRailType:X.NEXT_TO_MAIN_AND_TOOLBAR,toolbarType:K.NORMAL,pageHeader:l.resultsHeading},c.createElement(q,{className:"search-results-toolbar"},c.createElement(z,{bookingNextProperty:o&&o.isTouchedCart&&!o.isPackageShoppingPath(),shouldShowMultiItemWizardFields:o&&o.isPackageShoppingPath(),packageType:o&&o.getPackageType()})),c.createElement(P,{className:"search-results__main s-x-margin-two"},c.createElement(F,{location:v.AFTER_HEADER,regionId:u}),(null==o?void 0:o.isPackageShoppingPath)&&"function"==typeof o.isPackageShoppingPath&&o.isPackageShoppingPath()&&c.createElement(c.Fragment,null,c.createElement(I,{l10n:i,packageType:o.multiItemContext.packageType,currentStepName:S.HOTEL}),c.createElement(f,null,c.createElement(g,null,c.createElement(U,{l10n:i,localizedMessage:"multiItem.stepIndicator.hotel"})),c.createElement(h,null,c.createElement(U,{l10n:i,localizedMessage:"multiItem.hsrTitle.hc"})))),c.createElement(R,{padding:{small:{block:"three"},medium:{blockstart:"one"},large:{blockstart:"three"}}},c.createElement("div",{className:"search-results-listing"},c.createElement(f,null,c.createElement(g,null,c.createElement(ee,{analytics:n}),this.renderResults()),c.createElement(h,null,c.createElement(ee,{analytics:n}),this.renderResults()),c.createElement(m,null,c.createElement(J,{jsEnabled:this.state.jsEnabled,results:this.renderResults(),showTools:!0})),c.createElement(d,null,c.createElement($,{context:t,analytics:n,jsEnabled:this.state.jsEnabled,results:this.renderResults(),showTools:!0,searchResults:l}))))),c.createElement(F,{location:v.FOOTER,regionId:u}),c.createElement(A,{pageName:w,searchCriteria:l.searchCriteria}),c.createElement(y,{query:{pwaDialog:"rewardsEducation"}},c.createElement(V,{rewardsEducation:k})),c.createElement(y,{query:{pwaDialog:"loyaltyEducation"}},c.createElement(L,{loyaltyEducation:_})),l.exitIntent&&c.createElement(p,{label:"hotel.search.exitIntent"},c.createElement(T,{showOnce:!0,exitIntent:l.exitIntent})),o&&!o.isPackageShoppingPath()&&c.createElement(B,{analytics:n,pageName:w}),s.shouldInjectChatbot(t,a,r)&&c.createElement(b,{applicationName:"shopping-pwa",pageName:w,clientOverrides:{subscribedEvents:[s.VAC_WIDGET_OPENED_EVENT,s.VAC_WIDGET_CLOSED_EVENT],eventHandler:function(e){return s.eventHandler(n,e)}}})),c.createElement(G,null,c.createElement(D,{pageName:w})))},t.prototype.renderResults=function(){var e=this.props.searchResults.legalDisclaimer,t=this.props,r=t.l10n,n=t.page,a=(null==n?void 0:n.pageName)||E.SA;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"is-visually-hidden"},r.formatText("hotels.search.results.heading")),c.createElement(H,{setResultRef:this.setResultRef,showMoreLabel:r.formatText("hotels.searchResults.paginationButton.label"),handleShowMore:this.handleShowMore,fetchOnScrollResolved:this.state.fetchOnScrollResolved}),this.renderErrorMessage(),c.createElement(N,{pageName:a}),(null==e?void 0:e.content)&&c.createElement(R,{padding:{block:"six"}},c.createElement("p",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.content.filter((function(e){return"HTML"===e.markupType})).map((function(e){return e.text})).join("<br/><br/>")}})))},t.prototype.refreshAds=function(){document&&CustomEvent&&"function"==typeof document.dispatchEvent&&document.dispatchEvent(new CustomEvent("mesoTriggeredRefresh",{detail:{type:"impressionRefresh"}}))},t.prototype.showMoreHotels=function(){var e=this,t=this.props,r=t.analytics,n=t.context,a=t.multiItem,i=t.searchResults,l=t.experiment;this.props.uiPage.showProgressIndicator(400),i.showMoreHotels(r,n,a,l).then((function(t){e.resultRefs[t].focus()}))},t.prototype.fetchOnScroll=function(){var e=this;if(!this.fetchOnScrollCalled){var t=this.props,r=t.analytics,n=t.context,a=t.multiItem,i=t.searchResults,l=t.experiment;this.fetchOnScrollCalled=!0,i.showMoreHotels(r,n,a,l).then((function(){e.setState({fetchOnScrollResolved:!0},(function(){e.queueShowMore&&e.handleShowMore()}))}))}},t.prototype.handleShowMore=function(){!this.props.searchResults.isReducedPayloadExperimentV1||this.state.fetchOnScrollResolved?(this.refreshAds(),this.showMoreHotels()):(this.props.uiPage.showProgressIndicator(),this.queueShowMore=!0)},t.prototype.handleRetry=function(e,t){var r=this.props,n=r.routeStore,a=r.searchResults,i=r.analytics;e&&t&&i&&"function"==typeof i.trackEvent&&i.trackEvent(e,t,null,null,!0),n?(a.shouldFetch=!0,n.updateSearch(n.search)):window.location.reload()},t.prototype.renderErrorMessage=function(){var e=this,t=this.props.searchResults||{},r=t.isError,n=t.isEmpty,a=t.searchCriteria,i=t.errorResponse,l=this.props.l10n,o=a&&a.misId;if(r||n){if(o){if(i)return c.createElement(R,{padding:{blockstart:"six",blockend:"twelve"}},c.createElement("div",{className:"uitk-type-center"},c.createElement(M,{icon:"search",heading:i.header,body:i.body,buttonText:i.button.primary,headingLevel:"h2",onClick:function(){return e.handleLinkActionFromErrorMessage(i.button.action)},className:"all-t-padding-three multi-item-retry-search"})));var s=l.formatText("multiItem.searchResults.error.text"),u=l.formatText("multiItem.searchResults.tryAgain.text"),p=l.formatText("multiItem.searchResults.retryButton.label");return c.createElement(R,{padding:{blockstart:"six",blockend:"twelve"}},c.createElement("div",{className:"uitk-type-center"},c.createElement(M,{icon:"search",heading:s,body:u,buttonText:p,headingLevel:"h2",onClick:function(){return e.handleRetry(":errorOnSearch","MultiItem Retry Search")},className:"all-t-padding-three multi-item-retry-search"})))}var d=!r&&n?l.formatText("hotels.searchResults.emptyResults.text"):l.formatText("hotels.searchResults.error.text"),m=r?l.formatText("hotels.searchResults.error.cta"):"";return c.createElement(R,{padding:{blockend:"twelve"}},c.createElement("div",{className:"uitk-type-center","data-stid":"empty-state-error"},c.createElement(R,{padding:{blockstart:"three"}},c.createElement(M,{icon:"error",heading:d,buttonText:m,headingLevel:"h2",onClick:function(){return e.handleRetry(":errorOnSearch","Try Again on error")},className:"pwa-theme--grey-400"}))))}return null},t=i([k,o("searchResults","page","context","uiPage","analytics","routeStore","experiment","multiItem","virtualAgentControlStore"),s],t)}(c.Component),J=function(e){var t=e.analytics,r=e.jsEnabled,n=e.results,a=e.showTools;return c.createElement(w,{columns:4,space:"six"},c.createElement(x,null,c.createElement("div",null,c.createElement(W,{isActive:r}))),c.createElement(x,{colSpan:3},c.createElement("div",null,a&&c.createElement(ee,{analytics:t}),n)))},$=function(e){var t=e.analytics,r=e.jsEnabled,n=e.results,a=e.showTools;return c.createElement(w,{columns:4,space:"six"},c.createElement(x,null,c.createElement("div",null,c.createElement(W,{isActive:r}))),c.createElement(x,{colSpan:3},c.createElement("div",null,a&&c.createElement(ee,{analytics:t}),n)))},ee=function(e){var t=e.analytics;return c.createElement(p,{label:"hotel.search.tools"},c.createElement(Z,{analytics:t}))};e.exports=Y},"uX+Z":function(e,t,r){r.d(t,"a",(function(){return Ee}));var n,a=r("Mn8c"),i=r("F8kA"),l=r("GiK3"),o=r("zqAW"),s=r("vc39"),c=r("AQYs"),u=r("Dhs5"),p=r("ss7p"),d=r("emUk"),m=r("KaGk"),h=r("rp9/"),f=r("y986"),g=r("zBEt"),y=r("KmD6"),k=r("NhMs"),v=r("MxYd"),b=r("5uXs"),E=r("ZOI4"),S=r("9NCh"),O=r("a3o4"),_=r("qFFX"),M=r("AqV/"),C=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),w=function(){return(w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},x=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},R=function(e){function t(t){var r=e.call(this,t)||this;return r.addEventsToMarkerClusterer=r.addEventsToMarkerClusterer.bind(r),r.createGoogleMapsMarker=r.createGoogleMapsMarker.bind(r),r.createMarkerClusterer=r.createMarkerClusterer.bind(r),r.createPin=r.createPin.bind(r),r.getUpdatedMarkerIndex=r.getUpdatedMarkerIndex.bind(r),r.hasHeartIcon=r.hasHeartIcon.bind(r),r.updateSingleMarker=r.updateSingleMarker.bind(r),r.filterFavoritedShortlistModels=r.filterFavoritedShortlistModels.bind(r),r.interactedWithFavoriteLocally=r.interactedWithFavoriteLocally.bind(r),r}return C(t,e),t.prototype.shouldComponentUpdate=function(e){return e.map!==this.props.map||e.google!==this.props.google||e.searchChanged||e.singleMarkerChanged},t.prototype.render=function(){var e=this,t=this.props,r=t.google,n=t.map,a=t.onMapClick;if(n&&r){if(!this.markerClusterer||this.props.searchChanged&&!this.props.singleMarkerChanged){this.props.markers.filter((function(t){return e.isSoldOut(t)})).map((function(t,r){return e.createGoogleMapsMarker(t,r)}));var i=this.props.markers.filter((function(t){return!e.isSoldOut(t)&&!e.isAirport(t)&&!e.isLandmark(t)})).map((function(t,r){return e.createGoogleMapsMarker(t,r)}));this.createMarkerClusterer(i),this.addEventsToMarkerClusterer(this.markerClusterer),this.props.markers.filter((function(t){return e.isLandmark(t)||e.isAirport(t)})).map((function(t,r){return e.createGoogleMapsMarker(t,r)}))}else this.props.singleMarkerChanged&&this.updateSingleMarker(this.getUpdatedMarkerIndex());r&&r.maps&&r.maps.event&&r.maps.event.addDomListener(n,"mouseup",(function(){e.props.markerSelected&&"function"==typeof a&&a()}))}return null},t.prototype.createMarkerClusterer=function(e){this.markerClusterer&&this.markerClusterer.clearMarkers();var t=this.props,r=t.map,n=t.google,a=t.l10n,i=M(n),l={gridSize:40,minimumClusterSize:10,averageCenter:!0,maxZoom:21,markerLabel:function(e,t,r){return r?a.formatText("maps.markers.cluster.soldOut.label",e):a.formatText("maps.markers.cluster.available.label",e,t)}};this.markerClusterer=new i(r,e,l),this.props.onMarkersUpdate()},t.prototype.addEventsToMarkerClusterer=function(e){var t=this.props,r=t.google,n=t.onClusterDraw,a=t.onClusterSelect;e.addListener("clusterclick",(function(){a()})),r.maps&&r.maps.event&&r.maps.event.addListenerOnce(e,"drawcluster",(function(){n()}))},t.prototype.createGoogleMapsMarker=function(e,t,r){var n=this.props,a=n.google,i=n.onSelect,l=this.hasHeartIcon(e),o=this.createPin(e,l,t);return(e.sheet||e.isActionable)&&(o.marker.addListener("click",(function(){i(o)})),a.maps&&a.maps.event&&a.maps.event.addDomListener(o.marker.anchor,"click",(function(){i(o)})),r&&i(o)),o.marker.hotel=e.sheet?e.sheet:e.hotel,o.marker.hotelId=e.sheet?e.sheet.id:e.hotel.hotelId,o.marker.isFavorited=l,o.marker.isSoldOut=this.isSoldOut(e),o.marker.label={text:e.label},o.marker.position=o.marker.getPosition(),o.marker},t.prototype.isLandmark=function(e){return e.icon&&"LANDMARK"===e.icon},t.prototype.isAirport=function(e){return e.icon&&"AIRPORT"===e.icon},t.prototype.isSoldOut=function(e){return!(!e.icon||"SOLD_OUT"!==e.icon)||e.isSoldOut},t.prototype.createPin=function(e,t,r){var n=this.props,a={hasHeartIcon:t,zIndex:r,google:n.google,map:n.map,position:e.position,hotel:e.hotel,sheet:e.sheet};if(this.isSoldOut(e))return new O.d(a);var i=this.isLandmark(e),l=this.isAirport(e),o=w(w({},a),{label:e.label});return i?new O.b(o):l?new O.a(o):new O.c(o)},t.prototype.filterFavoritedShortlistModels=function(e){return e&&e.filter((function(e){var t,r;return null===(r=null===(t=null==e?void 0:e.model)||void 0===t?void 0:t.shortlistModel)||void 0===r?void 0:r.favorited}))},t.prototype.interactedWithFavoriteLocally=function(e){return"boolean"==typeof e},t.prototype.hasHeartIcon=function(e){var t=this.props,r=t.shouldShowHeartIcon,n=t.shortlist,a=t.propertySearchListings,i=this.filterFavoritedShortlistModels(a).find((function(t){return t.model.id===(e.sheet?e.sheet.id:e.hotel.id)})),l=n.hotel&&n.hotel.favoritedLocally&&n.hotel.favoritedLocally[e.sheet?e.sheet.id:e.hotel.id];return this.interactedWithFavoriteLocally(l)?r&&l:r&&i},t.prototype.getUpdatedMarkerIndex=function(){var e=this.props.hotelIdFromMap;return e&&this.markerClusterer&&this.markerClusterer.markers_&&this.markerClusterer.markers_.length>0?this.markerClusterer.markers_.findIndex((function(t){return(t.sheet?t.sheet.id:t.hotelId)===e})):-1},t.prototype.updateSingleMarker=function(e){var t=this.props,r=t.markers,n=t.shortlist;if(null!=e&&r[e]){var a=r&&this.createGoogleMapsMarker(r[e],e,!0);a.isFavorited=!a.isFavorited,this.markerClusterer&&this.markerClusterer.updateMarker(a,e),n.resetHotelIdFromMap(),this.props.onSingleMarkerUpdate()}},t=x([c.withLocalization,Object(a.inject)("shortlist"),a.observer],t)}(l.Component),F=r("HC0p"),T=r("9kkh"),L=r("2T4e"),P=r("t+LK"),j=r("Wgar"),N=r("wbeY"),A=r("2lj/"),D=r("e2LE"),I=r("gXyH"),U=function(){return(U=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},B=Object(o.ClickTracker)(i.Link),z=r("NT6K"),H=r("S2NO"),V=function(){return(V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},W=Object(o.ClickTracker)(i.Link),G=function(e){var t=e.sheet,r=e.selectedHotel,n=e.onClick,a=e.onFavoriteClick,i=e.isVisible,o=e.l10n;if(!t)return null;var s=T.classNames("uitk-cell","all-cell-3-4","all-l-padding-three","all-b-padding-three"),c=r&&2===Object.keys(r).length&&Object.keys(r).includes("id")&&Object.keys(r).includes("title"),u={onClick:n,rfrr:"ModuleMapPinnedPropertyLink",to:t.linkOff||""},p=T.classNames("uitk-grid","hsr-map-sheet");return l.createElement(F.a,{className:p,isVisible:i},l.createElement("div",{className:"uitk-cell all-cell-1-4"},l.createElement(Q,{linkOff:t.linkOff,onClick:n,photoUrl:t.photoUrl,rfrrHotelLink:"ModuleMapPinnedPropertyLink"})),l.createElement("div",{className:s},l.createElement(X,{sheet:t,isPOI:c,hotel:r,l10n:o,onFavoriteClick:a,rfrrHeart:"ModuleMapPinnedPropertyHeart"})),!c&&l.createElement(H.a,null,l.createElement(q,V({},u))),t.primaryBadge&&l.createElement(J,{primaryBadge:t.primaryBadge}))},q=function(e){return l.createElement(p.UitkCardLink,null,l.createElement(W,V({linkName:"View hotel"},e)))},Z=function(e){var t=e.subtitle;return l.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-200__medium map-viewer__info-sheet-reviews"},l.createElement("span",{className:"map-viewer__info-sheet-reviews--rating"},t))},Q=function(e){var t=e.linkOff,r=e.onClick,n=e.photoUrl,a=e.rfrrHotelLink;return n?l.createElement(W,{linkName:"View hotel",onClick:r,rfrr:a,to:t||""},l.createElement(d.UitkFigure,{className:"all-image-fit-cover",src:n})):l.createElement(d.UitkFigure,{className:"all-image-fit-cover"},l.createElement(d.UitkImage,{placeholderImage:!0,alt:""}))},K=function(e){var t=e.hotel,r=e.l10n,n=e.onClick,a=e.rfrrHeart,i=e.sheet,o=t.hotelId,s=t.shortlistModel;return o&&s?l.createElement(L.a,{category:"hotel",shortlistModel:s,id:""+o,key:o,labelRemove:r.formatText("hotels.searchResults.shortlist.removeFromList.a11yLabel",name),labelSave:r.formatText("hotels.searchResults.shortlist.saveToList.a11yLabel",i.name),onClick:n,onSaveMessage:r.formatText("hotels.searchResults.shortlist.saveToList.notification",name),referralObject:{favorite:{rfrr:a+".SaveFavorite"},unfavorite:{rfrr:a+".RemoveFavorite"}},rfrr:a}):null},X=function(e){var t=e.hotel,r=e.isPOI,n=e.l10n,a=e.onFavoriteClick,i=e.rfrrHeart,o=e.sheet,s=o.distanceFromPOI,c=o.subtitle,u=o.title,p=o.vipMessage,d=t&&t.hotelId,m=d&&t.shortlistModel?"":"all-r-padding-three";return l.createElement("div",{className:"uitk-grid"},l.createElement("div",{className:"uitk-grid"},l.createElement("div",{className:"uitk-cell all-cell-fill all-t-padding-three "+m,"data-stid":"hsr-map-sheet-content"},p&&l.createElement("div",{className:"uitk-type-200 uitk-type-medium map-vip"},p),l.createElement("div",{className:"uitk-type-500 uitk-type-bold truncate map-viewer__info-sheet-name"},u),s&&l.createElement(Y,{distanceFromPOI:s}),c&&l.createElement(Z,{subtitle:c})),t&&l.createElement(K,{hotel:t,l10n:n,onClick:a,rfrrHeart:i,sheet:o})),!r&&l.createElement($,{sheet:o,l10n:n,hotelId:d}))},Y=function(e){var t=e.distanceFromPOI;return l.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-200__medium pwa-theme--grey-700 map-viewer__info-sheet-poi"},t)},J=function(e){var t=e.primaryBadge;if(!t)return null;var r={primary:t};return l.createElement(z.a,{propertyListingBadgeModel:r,travelAd:null})},$=Object(a.inject)("routeStore")((function(e){var t=e.hotelId,r=e.l10n,n=e.routeStore,a=e.sheet,i=a.secondaryBadgeText,o=a.secondaryBadgeTheme,s=a.leadPrice,u=a.priceMessages,p=a.strikeoutPrice,d=a.strikeoutDisclaimer,m=a.options;if(!s)return l.createElement("div",{className:"uitk-cell uitk-type-400 map-viewer__info-sheet-price map-viewer__info-sheet-price--soldout"},l.createElement(c.LocalizedText,{message:"maps.sheets.hotel.soldOut.text"}));var h=t?"priceDisclaimerDialogMap-"+t:"priceDisclaimerDialogMap",f=n.mergeQueryString(n.search,{pwaDialogNested:h}),g=function(){n.goBack()},y={pathname:n.pathname,search:f};return l.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-right all-t-padding-two all-r-padding-three"},i&&o&&l.createElement(l.Fragment,null,o===I.Theme.VIP_ACCESS?l.createElement(P.UitkVipBadge,{text:i}):l.createElement(P.UitkBadge,{text:i,theme:P.UitkBadgeTheme[o]})),l.createElement("div",{className:"uitk-grid all-grid-align-end all-t-padding-half all-cell-1-2 map-viewer__info-sheet-price"},m&&m.length>0&&l.createElement("div",{className:"uitk-grid all-grid-align-middle all-grid-align-end"},m.map((function(e,r){return l.createElement(D.a,U({key:t+"-price-option-"+r},{option:e,strikeoutDisclaimer:d,query:y,dialogId:h,dialogType:"pwaDialogNested",routeStoreGoBack:g,wrapPrice:!1,priceFontWeight:"600",viewed:!1}))}))),(!m||0===m.length)&&p&&l.createElement(l.Fragment,null,d?l.createElement(l.Fragment,null,l.createElement(N.a,{className:"uitk-cell all-cell-fill all-cell-align-end uitk-type-300 uitk-type-medium\n                  all-x-padding-one all-t-padding-half map-viewer__info-sheet-price--strikethrough"},l.createElement(B,{linkName:"Price Disclaimer Dialog",rfrr:".Price.DisclaimerDialog.Map",to:{pathname:n.pathname,search:f}},l.createElement(j.UitkIcon,{name:"info_outline",className:"pwa-theme--grey-700 all-r-padding-half"}),l.createElement("del",null,l.createElement("span",{className:"is-visually-hidden map-viewer__info-sheet-price--strikethrough--a11y"},r.formatText("hotels.infosite.rateInfoDialog.strikeOut",p)),l.createElement("span",{className:"map-viewer__info-sheet-price--strikethrough--text pwa-theme--grey-700","aria-hidden":"true"},p)))),l.createElement(A.a,{dialogId:h,dialogType:"pwaDialogNested",disclaimerText:d,handleClose:g,innerHTML:!0,layerId:"price-disclaimer-dialog-map",disclaimerTextId:"price-disclaimer-text"})):l.createElement("del",{className:"uitk-cell all-cell-fill uitk-type-right uitk-type-300 uitk-type-medium all-x-padding-one\n                all-t-padding-half map-viewer__info-sheet-price--strikethrough"},l.createElement("span",{className:"is-visually-hidden map-viewer__info-sheet-price--strikethrough--a11y"},r.formatText("hotels.infosite.rateInfoDialog.strikeOut",p)),l.createElement("span",{className:"map-viewer__info-sheet-price--strikethrough--text pwa-theme--grey-700","aria-hidden":"true"},p)),s&&l.createElement("div",{className:"uitk-cell all-cell-shrink all-cell-1-2 uitk-type-bold uitk-type-600"},s)),(!m||0===m.length)&&!p&&l.createElement(l.Fragment,null,s&&l.createElement("div",{className:"uitk-cell all-cell-shrink all-cell-1-2 uitk-type-bold uitk-type-600"},s)),u&&l.createElement("div",{className:"uitk-cell all-cell-1-1","data-stid":"price-messages"},u.map((function(e){return l.createElement("div",{className:"pwa-theme--grey-700 uitk-type-100",key:e},e)})))))})),ee=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),te=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSheetClick=function(){var e,r=t.props,n=r.searchResults,a=r.selectedHotel,i=r.selectedMarker,l=a;if(null===(e=i.sheet)||void 0===e?void 0:e.id){var o=n.findProperty(i.sheet.id.toString(),i.sheet.travelAd);o&&(l=o)}t.props.currentHotel.setSearchResultAsCurrentHotel(Object(y.m)(l))},t}return ee(t,e),t.prototype.render=function(){var e=this.props,t=e.l10n,r=e.onFavoriteClick,n=e.selectedMarker,a=e.selectedHotel;return a&&n&&n.sheet?l.createElement(G,{sheet:n.sheet,isVisible:!0,onClick:this.onSheetClick,onFavoriteClick:r,selectedHotel:Object(y.m)(a),l10n:t}):null},t=te([c.withLocalization,Object(a.inject)("routeStore","analytics","searchResults","shortlist","experiment","currentHotel"),a.observer],t)}(l.Component),ne=r("KuJi"),ae=r("XDQ7"),ie=r("rV+b"),le=r("EbQm"),oe=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),se=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},ce=function(e){function t(t){var r=e.call(this,t)||this;return r.setUpAnalyticsTrackers(t.analytics),r.onMapSearch=r.onMapSearch.bind(r),r}return oe(t,e),t.prototype.render=function(){var e=this.props,t=e.messageDismissed,r=e.searchInProgress,n=e.searchMessage,a=e.showSearchButton,i=e.multiItem,o=i&&i.isPackageShoppingPath();return l.createElement(l.Fragment,null,(a||r)&&!o&&l.createElement(S.a,{type:"absolute",position:{top:"twelve",left:"center",zindex:"layer2"},cloneElement:!0},l.createElement(_.UitkSpacing,{margin:{blockstart:"twelve"}},l.createElement(h.UitkSecondaryFloatingButton,{className:"elevation-4",disabled:r,onClick:this.onMapSearch},l.createElement(c.LocalizedText,{message:"maps.viewer.searchButton.text"})))),l.createElement(S.a,{type:"absolute",position:{top:"center",left:"center",zindex:"layer7"},cloneElement:!0},l.createElement(ie.b,{visible:r})),l.createElement(le.UitkToast,{show:!!n,onDismiss:t},n))},t.prototype.setUpAnalyticsTrackers=function(e){var t,r=function(){return null};e&&e.clickTracker?(t=e.clickTracker.bind(e),this.trackMapSearch=t("Module.Map.Search.Button","User clicking the map search button on PWA HSR Map",null,r)):this.trackMapSearch=r},t.prototype.onMapSearch=function(){this.trackMapSearch();var e=this.props.center,t=e.lat()+","+e.lng();this.props.routeStore.updateSearch({regionId:"",destination:"",selected:"",poi:"",latLong:t})},t=se([Object(a.inject)("routeStore","analytics","multiItem"),a.observer],t)}(l.Component),ue=function(e){var t=e.messagingModel;return l.createElement(F.a,{className:"uitk-flex uitk-flex-align-items-center all-x-padding-three all-y-padding-three uitk-type-300 uitk-flex-column uitk-type-center map-messaging",isVisible:!0},t&&t.titleModel&&t.titleModel.text&&l.createElement("span",{className:"uitk-type-bold"},t.titleModel.text),t&&t.subtitleModel&&t.subtitleModel.text&&l.createElement(l.Fragment,null,t.subtitleModel.text))},pe=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),de=function(){return(de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},me=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},he=function(e){function t(t){var r=e.call(this,t)||this;return r.setUpAnalyticsTrackers(t.analytics),r.dismissSheet=r.dismissSheet.bind(r),r.onFavoriteClick=r.onFavoriteClick.bind(r),r.onMapPan=r.onMapPan.bind(r),r.onMarkerSelect=r.onMarkerSelect.bind(r),r.onMarkersUpdate=r.onMarkersUpdate.bind(r),r.onSingleMarkerUpdate=r.onSingleMarkerUpdate.bind(r),r.zIndex=t.searchResults.map&&t.searchResults.map.markers&&t.searchResults.map.markers.length?t.searchResults.properties.length:0,r.state={markerSelected:!1,searchChanged:!1,selectedHotel:void 0,selectedMarker:null,singleMarkerChanged:!1},r}return pe(t,e),t.prototype.setUpAnalyticsTrackers=function(e){var t=function(){return null},r=e&&e.clickTracker?e.clickTracker.bind(e):t;this.trackMapPan=r("Module.Map.Pan","User panning PWA HSR Map",null,t),this.trackMapZoomIn=r("Module.Map.Zoom.In","User zooming in on PWA HSR Map",null,t),this.trackMapZoomOut=r("Module.Map.Zoom.Out","User zooming out on PWA HSR Map",null,t),this.trackMarkerSelect=r("Module.Map.HotelSelect","User selecting a pin on the PWA HSR map",null,t),this.trackClusterDisplayed=r("Module.Map.HotelClusterDisplayed","User has seen at least one cluster on the PWA HSR map",null,t),this.trackClusterSelect=r("Module.Map.HotelClusterSelect","User selecting a cluster on the PWA HSR map",null,t)},t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.routeStore,n=t.shortlist,a=t.searchResults,i=t.analytics;this.cancelHotelWatch=Object(f.autorun)((function(){var t;r.state&&r.state.selectedHotelId&&r.state.selectedHotelId!==e.state.selectedHotel&&e.setState({selectedHotel:a.findProperty(r.state.selectedHotelId,null===(t=r.state.selectedHotel)||void 0===t?void 0:t.travelAd),selectedMarker:e.findSelectedHotel(r.state.selectedHotelId)}),a.hasAtLeastOneProperty&&e.setState({searchChanged:!0,selectedHotel:void 0,selectedMarker:null,markerSelected:!1})})),this.cancelShortlistWatch=Object(f.autorun)((function(){n.isLoading||0!==Object.keys(n.hotel.favoritedLocally).length||e.setState({searchChanged:!0})})),a&&a.map&&a.map.filterDisplayOptions&&a.map.filterDisplayOptions.filters&&i&&"function"==typeof i.trackEvent&&i.trackEvent(".MapFilters.Imp","Showing map filters",null)},t.prototype.componentWillUnmount=function(){this.cancelHotelWatch&&(this.cancelHotelWatch(),this.cancelHotelWatch=void 0),this.cancelShortlistWatch&&(this.cancelShortlistWatch(),this.cancelShortlistWatch=void 0)},t.prototype.deDuplicateMarkers=function(e){var t={};return e&&e.length?e.filter((function(e){var r=e&&e.sheet,n=e&&e.hotel,a=r?r.id:n&&n.id,i=a&&!t[a];return a&&(t[a]=!0),i})):[]},t.prototype.render=function(){var e=this.props,t=e.context,r=e.searchResults,n=e.shortlist,a=this.state,i=a.markerSelected,o=a.searchChanged,s=a.selectedHotelId,c=a.singleMarkerChanged,u=r&&r.map,p=u&&u.filterDisplayOptions&&u.filterDisplayOptions.filters,d={type:v.ToolbarType.CLOSE,header:r.searchedDestination,subtext:u&&u.subtitle,iconLabel:this.props.l10n.formatText("maps.closeButton.label")},m=this.props.analytics.setupTracker(".Module.Map.Link","Close Map Dialog"),f=de(de({},u),{locale:t.locale,onPan:this.onMapPan,onZoomIn:this.trackMapZoomIn,onZoomOut:this.trackMapZoomOut,pageName:"HotelSearch",clickablePOIs:!1}),y={markers:u&&u.markers?this.deDuplicateMarkers(u.markers):[],markerSelected:i,experiment:this.props.experiment,onClusterDraw:this.trackClusterDisplayed,onClusterSelect:this.trackClusterSelect,onMapClick:this.dismissSheet,onSelect:this.onMarkerSelect,onSingleMarkerUpdate:this.onSingleMarkerUpdate,onMarkersUpdate:this.onMarkersUpdate,withClustering:!0,searchChanged:o,singleMarkerChanged:c,hotelIdFromMap:s,propertySearchListings:null==r?void 0:r.propertySearchListings},k=this.state.selectedHotel&&this.state.selectedMarker&&this.state.selectedMarker.sheet,E={l10n:this.props.l10n,mapCenter:this.state.center,selectedHotel:this.state.selectedHotel,selectedMarker:this.state.selectedMarker,onFavoriteClick:this.onFavoriteClick,mapModel:u,showSheet:k,searchResults:r,mapProps:f,clusteringMarkersProps:y,shortlist:n};return l.createElement(b.UitkFullscreenDialog,de({},{dialogShow:!0,strictFullscreen:!0}),l.createElement(v.UitkToolbar,de({},d,{action:this.props.onDismiss,analytics:m,actionContent:p&&l.createElement(ne.a,{buttonComponent:h.UitkTertiaryButton,isActive:!0,isFullWidth:!1,label:"hotels.searchResults.openMapFiltersDialog.label",a11yMessage:"hotels.searchResults.appliedFiltersCount.a11yLabel",rfrr:":MapFilters",stid:"open-map-filters",filters:p,dialogParam:"map-filter",dialogTitle:this.props.l10n.formatText("hotels.searchResults.openMapFiltersDialog.label")})})),l.createElement(g.AbacusExperiment,{name:"srp_map_travelads"},l.createElement(g.AbacusControl,null,l.createElement(fe,de({},E))),l.createElement(g.AbacusVariant,{bucket:1},l.createElement(fe,de({},E)))))},t.prototype.onFavoriteClick=function(){this.setState({singleMarkerChanged:!0})},t.prototype.onMapPan=function(e,t){this.props.searchResults.displaySearchButton(),this.setState({center:e,zoom:t}),this.trackMapPan()},t.prototype.onMarkerSelect=function(e){this.setState({selectedHotelId:e.sheet?e.sheet.id:e.hotel.hotelId}),this.trackMarkerSelect(),this.selectMarker(e)},t.prototype.onSingleMarkerUpdate=function(){this.setState({singleMarkerChanged:!1})},t.prototype.onMarkersUpdate=function(){this.setState({searchChanged:!1})},t.prototype.selectMarker=function(e){this.state.selectedMarker&&"function"==typeof this.state.selectedMarker.blur&&this.state.selectedMarker.blur(),this.zIndex+=1,e&&"function"==typeof e.focus&&e.focus(this.zIndex),this.setState({markerSelected:!0,selectedMarker:e,selectedHotel:this.findSelectedHotelGivenMarker(e)})},t.prototype.findSelectedHotelGivenMarker=function(e){if(e&&e.sheet){var t=e.sheet.id&&this.props.searchResults.findProperty(e.sheet.id.toString(),e.sheet.travelAd);return t||e.sheet}return e.hotel},t.prototype.findSelectedHotel=function(e){if(e){var t=this.props.searchResults.map.markers,r=t&&t.find((function(t){return t.id&&t.id===e}));return r&&r.hotel||null}},t.prototype.dismissSheet=function(){var e=this.state.selectedMarker;e&&"function"==typeof e.blur&&e.blur(),this.setState({markerSelected:!1})},t=me([c.withLocalization,Object(a.inject)("analytics","context","currentHotel","experiment","routeStore","searchResults","shortlist"),a.observer],t)}(l.Component),fe=Object(a.inject)("searchResults")((function(e){var t=e.mapModel,r=e.showSheet,n=e.searchResults,a=e.mapProps,i=e.clusteringMarkersProps,o=e.l10n,c=e.mapCenter,u=e.selectedHotel,p=e.selectedMarker,d=e.onFavoriteClick,m=e.shortlist,h=t&&t.messagingModel,f={selectedHotel:u,selectedMarker:p,onFavoriteClick:d},g=u&&-1!==parseInt(u.id,10);return l.createElement(l.Fragment,null,l.createElement(ce,{messageDismissed:n.dismissMapMessage,showSearchButton:t.showSearchButton,searchMessage:n.error?o.formatText("maps.viewer.searchError.text"):t.searchMessage,searchInProgress:n.isLoading,center:c}),t.markers&&l.createElement(s.ErrorBoundary,{label:"hsr.map.errorboundary"},l.createElement(O.e,de({},a),l.createElement(R,de({},i,{shouldShowHeartIcon:!0})))),r&&l.createElement(s.Viewport,null,l.createElement(s.ViewSmall,null,l.createElement(re,de({},f))),l.createElement(s.ViewMedium,null,l.createElement(l.Fragment,null,g&&l.createElement(k.b,{propertyListing:u},l.createElement(S.a,{type:"absolute",position:{bottom:"zero"},cloneElement:!1,tag:"div",className:"uitk-cell"},l.createElement(E.UitkLayoutFlex,{justifyContent:"center"},l.createElement(E.UitkLayoutFlexItem,{grow:1,maxWidth:890},l.createElement("div",null,l.createElement(_.UitkSpacing,{margin:"three"},l.createElement(ae.a,{className:"listing",model:Object(y.m)(u),mapListingView:!0,shortlist:m,onFavoriteClick:d}))))))),!g&&l.createElement(re,de({},f))))),h&&!r&&l.createElement(ue,de({},{messagingModel:h})))})),ge=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ye=function(){return(ye=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ke=function(e,t,r,n){var a,i=arguments.length,l=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(l=(i<3?a(l):i>3?a(t,r,l):a(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l},ve=Object(o.ClickTracker)(i.Link),be=Object(o.ClickTracker)(h.UitkSecondaryButton),Ee=function(e){function t(t){var r=e.call(this,t)||this;return r.onMapDialogClosed=r.onMapDialogClosed.bind(r),r.mapBtn=l.createRef(),r}return ge(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.isActive,n=t.searchResults,a=t.routeStore,o=t.mapImage,h=n.isLoading,f=n.isError,g=n.isEmpty,y=n&&n.map,k=a.mergeQueryString(a.search,{pwaOverlay:"map"}),v={pathname:a.pathname,search:k},b=r&&y&&Object.keys(y).length>0?{tag:i.Link,to:v,role:"button"}:{};return l.createElement(l.Fragment,null,l.createElement(u.QueryRoute,{query:{pwaOverlay:"map"}},l.createElement(s.Layer,{id:"tools-map"},l.createElement(he,{onDismiss:this.onMapDialogClosed}))),o&&l.createElement(p.UitkCardAloha,null,l.createElement(d.UitkFigure,{ratio:d.UitkFigureAspectRatioType.R21_9},l.createElement(d.UitkImage,{alt:"",src:o})),l.createElement(p.UitkCardAlohaContentSection,null,l.createElement(m.UitkLink,{inline:!0,align:m.UitkLinkAlign.CENTER},l.createElement("div",{"aria-hidden":"true"},l.createElement(c.LocalizedText,{message:"hotels.searchResults.openMapDialog.label"})))),l.createElement(p.UitkCardAlohaLink,null,l.createElement(ve,{linkName:"Launch dynamic map",rfrr:"Module.MapOpen.Link",to:v,innerRef:function(t){e.mapBtn=t}},l.createElement(c.LocalizedText,{message:"hotels.searchResults.openMapDialog.label"})))),!o&&l.createElement(be,ye({"data-stid":"open-dynamic-map",disabled:!r||h||f||g||null,linkName:"Launch dynamic map",rfrr:"Module.MapOpen.Link",icon:"map",text:l.createElement(c.LocalizedText,{message:"hotels.searchResults.openMapDialog.label"}),isFullWidth:!0},b)))},t.prototype.onMapDialogClosed=function(){this.props.routeStore.updateSearch({pwaOverlay:void 0}),this.mapBtn&&"function"==typeof this.mapBtn.focus&&this.mapBtn.focus()},t.defaultProps={isActive:!1},t=ke([Object(a.inject)("searchResults","routeStore"),a.observer],t)}(l.Component)}}]);
//# sourceMappingURL=search.9b8c75ad47408ba8e2c7.js.map