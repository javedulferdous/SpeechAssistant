// For license information, see `https://assets.adobedtm.com/b714f0d8126e/c733dac6d95d/7f3c9ee05d8b/EX0e5eae59f738459bb33dff554b864666-libraryCode_source.js`.
function md5(e){if(e)return e=e.toLowerCase().trim(),CryptoJS.MD5(e).toString()}function sha3(e){if(e)return e=e.toLowerCase().trim(),CryptoJS.SHA3(e).toString()}function getTimeStamp(){try{var e=(new Date).toUTCString()}catch(t){e=""}return e}function uniqueValues(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e)&&(t[e]=!0)})}function getRefQueryParam(e){return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null==(e=RegExp("[\\?&]"+e+"=([^&#]*)").exec(document.referrer))?"":e[1]}function titleCase(e){return e.replace(/-/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function catArr(e){for(var t=[],i=0;i<e.length;i++)t.push(titleCase(e[i]));return t}function getMetaDescription(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)if("description"==e[t].getAttribute("name"))return e[t].getAttribute("content");return""}function getMetaKeywords(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)if("keywords"==e[t].getAttribute("name"))return e[t].getAttribute("content");return""}function set_h3(){if(h3=new String(domain+window.location.pathname),"/"==h3.charAt(h3.length-1)){for(var e=new String,t=0;t<h3.length-1;t++)e+=h3.charAt(t);h3=e}for(var i=h3.indexOf("/");-1!=i;)h3=h3.replace("/",":"),i=h3.indexOf("/");return h3}function dateStamp(){var e=new Date;return[e.getMonth()+1,e.getDate(),e.getFullYear()]}function AppMeasurement_Module_ActivityMap(l){function e(){var e=t.pageYOffset+(t.innerHeight||0);e&&+p<e&&(p=e)}function i(){if(d.scrollReachSelector){var t=l.d.querySelector&&l.d.querySelector(d.scrollReachSelector);t?(p=t.scrollTop||0,t.addEventListener("scroll",function(){var e;(e=t&&t.scrollTop+t.clientHeight||0)>p&&(p=e)})):0<r--&&setTimeout(i,1e3)}}function n(e,t){var i,a,r;if(e&&t&&(i=d.c[t]||(d.c[t]=t.split(","))))for(r=0;r<i.length&&(a=i[r++]);)if(-1<e.indexOf(a))return null;return u=1,e}function s(e,t,i,a,r){var n,s;if(e.dataset&&(s=e.dataset[t])?n=s:e.getAttribute&&((s=e.getAttribute("data-"+i))?n=s:(s=e.getAttribute(i))&&(n=s)),!n&&l.useForcedLinkTracking&&r){var o;if(e=e.onclick?""+e.onclick:"",varValue="",a&&e&&0<=(t=e.indexOf(a))){for(t+=a.length;t<e.length;)if(i=e.charAt(t++),0<="'\"".indexOf(i)){o=i;break}for(s=!1;t<e.length&&o&&(i=e.charAt(t),s||i!==o);)"\\"===i?s=!0:(varValue+=i,s=!1),t++}(o=varValue)&&(l.w[a]=o)}return n||r&&l.w[a]}function o(e,t,i){var a;return(a=d[t](e,i))&&(u?(u=0,a):n(h(a),d[t+"Exclusions"]))}function c(e,t,i){var a;if(e&&!(1===(a=e.nodeType)&&(a=e.nodeName)&&(a=a.toUpperCase())&&_[a])&&(1===e.nodeType&&(a=e.nodeValue)&&(t[t.length]=a),i.a||i.t||i.s||!e.getAttribute||((a=e.getAttribute("alt"))?i.a=a:(a=e.getAttribute("title"))?i.t=a:"IMG"==(""+e.nodeName).toUpperCase()&&(a=e.getAttribute("src")||e.src)&&(i.s=a)),(a=e.childNodes)&&a.length))for(e=0;e<a.length;e++)c(a[e],t,i)}function h(e){if(null==e||null==e)return e;try{return e.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \xa0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \xa0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \xa0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}","mg")," ").substring(0,254)}catch(t){}}var d=this;d.s=l;var t=window;t.s_c_in||(t.s_c_il=[],t.s_c_in=0),d._il=t.s_c_il,d._in=t.s_c_in,d._il[d._in]=d,t.s_c_in++,d._c="s_m";var a,p=0,r=60;d.c={};var u=0,_={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};d._g=function(){var e,t,i,a=l.contextData,r=l.linkObject;(e=l.pageName||l.pageURL)&&(t=o(r,"link",l.linkName))&&(i=o(r,"region"))&&(a["a.activitymap.page"]=e.substring(0,255),a["a.activitymap.link"]=128<t.length?t.substring(0,128):t,a["a.activitymap.region"]=127<i.length?i.substring(0,127):i,0<p&&(a["a.activitymap.xy"]=10*Math.floor(p/10)),a["a.activitymap.pageIDType"]=l.pageName?1:0)},d.e=function(){d.trackScrollReach&&!a&&(d.scrollReachSelector?i():(e(),t.addEventListener&&t.addEventListener("scroll",e,!1)),a=!0)},d.link=function(e,t){var i;if(t)i=n(h(t),d.linkExclusions);else if((i=e)&&!(i=s(e,"sObjectId","s-object-id","s_objectID",1))){var a,r;(r=n(h(e.innerText||e.textContent),d.linkExclusions))||(c(e,a=[],i={a:void 0,t:void 0,s:void 0}),(r=n(h(a.join(""))))||(r=n(h(i.a?i.a:i.t?i.t:i.s?i.s:void 0)))||!(a=(a=e.tagName)&&a.toUpperCase?a.toUpperCase():"")||("INPUT"==a||"SUBMIT"==a&&e.value?r=n(h(e.value)):"IMAGE"==a&&e.src&&(r=n(h(e.src))))),i=r}return i},d.region=function(e){for(var t,i=d.regionIDAttribute||"id";e&&(e=e.parentNode);){if(t=s(e,i,i,i))return t;if("BODY"==e.nodeName)return"BODY"}}}function AppMeasurement(d){var u=this;u.version="2.17.0";var p=window;p.s_c_in||(p.s_c_il=[],p.s_c_in=0),u._il=p.s_c_il,u._in=p.s_c_in,u._il[u._in]=u,p.s_c_in++,u._c="s_c";var _=p.AppMeasurement.ec;_||(_=null);var c,g,f,m=p;try{for(c=m.parent,g=m.location;c&&c.location&&g&&""+c.location!=""+g&&m.location&&""+c.location!=""+m.location&&c.location.host==g.host;)c=(m=c).parent}catch(t){}u.C=function(e){try{console.log(e)}catch(t){}},u.Pa=function(e){return""+parseInt(e)==""+e},u.replace=function(e,t,i){return!e||e.indexOf(t)<0?e:e.split(t).join(i)},u.escape=function(e){var t,i;if(!e)return e;for(e=encodeURIComponent(e),t=0;t<7;t++)i="+~!*()'".substring(t,t+1),0<=e.indexOf(i)&&(e=u.replace(e,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return e},u.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?u.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(t){}return unescape(e)},u.Kb=function(){var e,t=p.location.hostname,i=u.fpCookieDomainPeriods;if(i||(i=u.cookieDomainPeriods),t&&!u.Ia&&!/^[0-9.]+$/.test(t)&&(i=2<(i=i?parseInt(i):2)?i:2,0<=(e=t.lastIndexOf(".")))){for(;0<=e&&1<i;)e=t.lastIndexOf(".",e-1),i--;u.Ia=0<e?t.substring(e):t}return u.Ia},u.c_r=u.cookieRead=function(e){e=u.escape(e);var t=" "+u.d.cookie,i=t.indexOf(" "+e+"="),a=i<0?i:t.indexOf(";",i);return"[[B]]"!=(e=i<0?"":u.unescape(t.substring(i+2+e.length,a<0?t.length:a)))?e:""},u.c_w=u.cookieWrite=function(e,t,i){var a,r=u.Kb(),n=u.cookieLifetime;return t=""+t,n=n?(""+n).toUpperCase():"",i&&"SESSION"!=n&&"NONE"!=n&&((a=""!=t?parseInt(n||0):-60)?(i=new Date).setTime(i.getTime()+1e3*a):1===i&&(a=(i=new Date).getYear(),i.setYear(a+2+(a<1900?1900:0)))),e&&"NONE"!=n?(u.d.cookie=u.escape(e)+"="+u.escape(""!=t?t:"[[B]]")+"; path=/;"+(i&&"SESSION"!=n?" expires="+i.toUTCString()+";":"")+(r?" domain="+r+";":""),u.cookieRead(e)==t):0},u.Hb=function(){var e=u.Util.getIeVersion();"number"==typeof e&&e<10&&(u.unsupportedBrowser=!0,u.ub(u,function(){}))},u.ub=function(e,t){for(var i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&(e[i]=t)},u.K=[],u.ea=function(e,t,i){if(u.Ja)return 0;u.maxDelay||(u.maxDelay=250);var a=0,r=(new Date).getTime()+u.maxDelay,n=u.d.visibilityState,s=["webkitvisibilitychange","visibilitychange"];if(n||(n=u.d.webkitVisibilityState),n&&"prerender"==n){if(!u.fa)for(u.fa=1,i=0;i<s.length;i++)u.d.addEventListener(s[i],function(){var e=u.d.visibilityState;e||(e=u.d.webkitVisibilityState),"visible"==e&&(u.fa=0,u.delayReady())});a=1,r=0}else i||u.u("_d")&&(a=1);return a&&(u.K.push({m:e,a:t,t:r}),u.fa||setTimeout(u.delayReady,u.maxDelay)),a},u.delayReady=function(){var e,t=(new Date).getTime(),i=0;for(u.u("_d")?i=1:u.ya();0<u.K.length;){if(e=u.K.shift(),i&&!e.t&&e.t>t){u.K.unshift(e),setTimeout(u.delayReady,parseInt(u.maxDelay/2));break}u.Ja=1,u[e.m].apply(u,e.a),u.Ja=0}},u.setAccount=u.sa=function(e){var t,i;if(!u.ea("setAccount",arguments))if(u.account=e,u.allAccounts)for(t=u.allAccounts.concat(e.split(",")),u.allAccounts=[],t.sort(),i=0;i<t.length;i++)0!=i&&t[i-1]==t[i]||u.allAccounts.push(t[i]);else u.allAccounts=e.split(",")},u.foreachVar=function(e,t){var i,a,r,n,s="";for(r=a="",u.lightProfileID?(i=u.O,(s=u.lightTrackVars)&&(s=","+s+","+u.ka.join(",")+",")):(i=u.g,(u.pe||u.linkType)&&(s=u.linkTrackVars,a=u.linkTrackEvents,u.pe&&(r=u.pe.substring(0,1).toUpperCase()+u.pe.substring(1),u[r]&&(s=u[r].ac,a=u[r].$b))),s&&(s=","+s+","+u.F.join(",")+","),a&&s&&(s+=",events,")),t&&(t=","+t+","),a=0;a<i.length;a++)r=i[a],(n=u[r])&&(!s||0<=s.indexOf(","+r+","))&&(!t||0<=t.indexOf(","+r+","))&&e(r,n)},u.o=function(e,t,i,a,r){var n,s,o,l,c="",h=0;if("contextData"==e&&(e="c"),t){for(n in t)if(!(Object.prototype[n]||r&&n.substring(0,r.length)!=r)&&t[n]&&(!i||0<=i.indexOf(","+(a?a+".":"")+n+","))){if(o=!1,h)for(s=0;s<h.length;s++)if(n.substring(0,h[s].length)==h[s]){o=!0;break}if(!o&&(""==c&&(c+="&"+e+"."),s=t[n],r&&(n=n.substring(r.length)),0<n.length))if(0<(o=n.indexOf(".")))o=(r||"")+(s=n.substring(0,o))+".",h||(h=[]),h.push(o),c+=u.o(s,t,i,a,o);else if("boolean"==typeof s&&(s=s?"true":"false"),s){if("retrieveLightData"==a&&r.indexOf(".contextData.")<0)switch(o=n.substring(0,4),l=n.substring(4),n){case"transactionID":n="xact";break;case"channel":n="ch";break;case"campaign":n="v0";break;default:u.Pa(l)&&("prop"==o?n="c"+l:"eVar"==o?n="v"+l:"list"==o?n="l"+l:"hier"==o&&(n="h"+l,s=s.substring(0,255)))}c+="&"+u.escape(n)+"="+u.escape(s)}}""!=c&&(c+="&."+e)}return c},u.usePostbacks=0,u.Nb=function(){var e,t,i,a,r,n,s,o,l="",c="",h="",d=a="",p=u.T();if(u.lightProfileID?(e=u.O,(c=u.lightTrackVars)&&(c=","+c+","+u.ka.join(",")+",")):(e=u.g,(u.pe||u.linkType)&&(c=u.linkTrackVars,h=u.linkTrackEvents,u.pe&&(a=u.pe.substring(0,1).toUpperCase()+u.pe.substring(1),u[a]&&(c=u[a].ac,h=u[a].$b))),c&&(c=","+c+","+u.F.join(",")+","),h&&(h=","+h+",",c&&(c+=",events,")),u.events2&&(d+=(""!=d?",":"")+u.events2)),p&&p.getCustomerIDs){if(a=_,r=p.getCustomerIDs())for(t in r)Object.prototype[t]||"object"==typeof(i=r[t])&&(a||(a={}),i.id&&(a[t+".id"]=i.id),i.authState&&(a[t+".as"]=i.authState));a&&(l+=u.o("cid",a))}for(u.AudienceManagement&&u.AudienceManagement.isReady()&&(l+=u.o("d",u.AudienceManagement.getEventCallConfigParams())),t=0;t<e.length;t++){if(a=e[t],r=u[a],i=a.substring(0,4),n=a.substring(4),r||("events"==a&&d?(r=d,d=""):"marketingCloudOrgID"==a&&p&&u.V("ECID")&&(r=p.marketingCloudOrgID)),r&&(!c||0<=c.indexOf(","+a+","))){switch(a){case"customerPerspective":a="cp";break;case"marketingCloudOrgID":a="mcorgid";break;case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",255<r.length&&(u.pageURLRest=r.substring(255),r=r.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",u.ssl&&u.visitorMigrationServerSecure&&(r="");break;case"visitorMigrationServerSecure":a="vmf",!u.ssl&&u.visitorMigrationServer&&(r="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(d&&(r+=(""!=r?",":"")+d),h)for(n=r.split(","),r="",i=0;i<n.length;i++)0<=(o=(s=n[i]).indexOf("="))&&(s=s.substring(0,o)),0<=(o=s.indexOf(":"))&&(s=s.substring(0,o)),0<=h.indexOf(","+s+",")&&(r+=(r?",":"")+n[i]);break;case"events2":r="";break;case"contextData":l+=u.o("c",u[a],c,a),r="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",u.lightProfileID||(r="");break;case"lightIncrementBy":a="mti",u.lightProfileID||(r="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":u.retrieveLightProfiles&&(l+=u.o("mts",u[a],c,a)),r="";break;default:u.Pa(n)&&("prop"==i?a="c"+n:"eVar"==i?a="v"+n:"list"==i?a="l"+n:"hier"==i&&(a="h"+n,r=r.substring(0,255)))}r&&(l+="&"+a+"="+("pev"!=a.substring(0,3)?u.escape(r):r))}"pev3"==a&&u.e&&(l+=u.e)}return u.ja&&(l+="&lrt="+u.ja,u.ja=null),l},u.B=function(e){var t=e.tagName;return"undefined"!=""+e.hc||"undefined"!=""+e.Wb&&"HTML"!=(""+e.Wb).toUpperCase()?"":("SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},u.La=function(e){var t,i,a,r=p.location,n=e.href?e.href:"";return t=n.indexOf(":"),i=n.indexOf("?"),a=n.indexOf("/"),n&&(t<0||0<=i&&i<t||0<=a&&a<t)&&(i=e.protocol&&1<e.protocol.length?e.protocol:r.protocol?r.protocol:"",t=r.pathname.lastIndexOf("/"),n=(i?i+"//":"")+(e.host?e.host:r.host?r.host:"")+("/"!=n.substring(0,1)?r.pathname.substring(0,t<0?0:t)+"/":"")+n),n},u.L=function(e){var t,i,a=u.B(e),r="",n=0;return a&&(t=e.protocol,i=e.onclick,!e.href||"A"!=a&&"AREA"!=a||i&&t&&!(t.toLowerCase().indexOf("javascript")<0)?i?(r=u.replace(u.replace(u.replace(u.replace(""+i,"\r",""),"\n",""),"\t","")," ",""),n=2):"INPUT"==a||"SUBMIT"==a?(e.value?r=e.value:e.innerText?r=e.innerText:e.textContent&&(r=e.textContent),n=3):"IMAGE"==a&&e.src&&(r=e.src):r=u.La(e),r)?{id:r.substring(0,100),type:n}:0},u.fc=function(e){for(var t=u.B(e),i=u.L(e);e&&!i&&"BODY"!=t;)(e=e.parentElement?e.parentElement:e.parentNode)&&(t=u.B(e),i=u.L(e));return i&&"BODY"!=t||(e=0),e&&(0<=(t=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=t.indexOf(".trackLink("))&&(e=0),e},u.Vb=function(){var e,t,i,a,r=u.linkObject,n=u.linkType,s=u.linkURL;if(u.la=1,r||(u.la=0,r=u.clickObject),r){for(e=u.B(r),t=u.L(r);r&&!t&&"BODY"!=e;)(r=r.parentElement?r.parentElement:r.parentNode)&&(e=u.B(r),t=u.L(r));if(t&&"BODY"!=e||(r=0),r&&!u.linkObject){var o=r.onclick?""+r.onclick:"";(0<=o.indexOf(".tl(")||0<=o.indexOf(".trackLink("))&&(r=0)}}else u.la=1;if(!s&&r&&(s=u.La(r)),s&&!u.linkLeaveQueryString&&(0<=(i=s.indexOf("?"))&&(s=s.substring(0,i))),!n&&s){var l,c=0,h=0;if(u.trackDownloadLinks&&u.linkDownloadFileTypes)for(i=(o=s.toLowerCase()).indexOf("?"),a=o.indexOf("#"),0<=i?0<=a&&a<i&&(i=a):i=a,0<=i&&(o=o.substring(0,i)),i=u.linkDownloadFileTypes.toLowerCase().split(","),a=0;a<i.length;a++)(l=i[a])&&o.substring(o.length-(l.length+1))=="."+l&&(n="d");if(u.trackExternalLinks&&!n&&(o=s.toLowerCase(),u.Oa(o)&&(u.linkInternalFilters||(u.linkInternalFilters=p.location.hostname),i=0,u.linkExternalFilters?(i=u.linkExternalFilters.toLowerCase().split(","),c=1):u.linkInternalFilters&&(i=u.linkInternalFilters.toLowerCase().split(",")),i))){for(a=0;a<i.length;a++)l=i[a],0<=o.indexOf(l)&&(h=1);h?c&&(n="e"):c||(n="e")}}u.linkObject=r,u.linkURL=s,u.linkType=n,(u.trackClickMap||u.trackInlineStats)&&(u.e="",r&&(n=u.pageName,s=1,r=r.sourceIndex,n||(n=u.pageURL,s=0),p.s_objectID&&(t.id=p.s_objectID,r=t.type=1),n&&t&&t.id&&e&&(u.e="&pid="+u.escape(n.substring(0,255))+(s?"&pidt="+s:"")+"&oid="+u.escape(t.id.substring(0,100))+(t.type?"&oidt="+t.type:"")+"&ot="+e+(r?"&oi="+r:""))))},u.Ob=function(){var e=u.la,t=u.linkType,i=u.linkURL,a=u.linkName;if(t&&(i||a)&&("d"!=(t=t.toLowerCase())&&"e"!=t&&(t="o"),u.pe="lnk_"+t,u.pev1=i?u.escape(i):"",u.pev2=a?u.escape(a):"",e=1),u.abort&&(e=0),u.trackClickMap||u.trackInlineStats||u.Rb()){t={},i=0;var r,n,s,o=(l=u.pb())?l.split("&"):0,l=0;if(o)for(r=0;r<o.length;r++)n=o[r].split("="),a=u.unescape(n[0]).split(","),t[n=u.unescape(n[1])]=a;for(s in a=u.account.split(","),r={},u.contextData)s&&!Object.prototype[s]&&"a.activitymap."==s.substring(0,14)&&(r[s]=u.contextData[s],u.contextData[s]="");if(u.e=u.o("c",r)+(u.e?u.e:""),e||u.e){for(n in e&&!u.e&&(l=1),t)if(!Object.prototype[n])for(s=0;s<a.length;s++)for(l&&((o=t[n].join(","))==u.account&&(u.e+=("&"!=n.charAt(0)?"&":"")+n,t[n]=[],i=1)),r=0;r<t[n].length;r++)(o=t[n][r])==a[s]&&(l&&(u.e+="&u="+u.escape(o)+("&"!=n.charAt(0)?"&":"")+n+"&u=0"),t[n].splice(r,1),i=1);if(e||(i=1),i){for(n in l="",r=2,!e&&u.e&&(l=u.escape(a.join(","))+"="+u.escape(u.e),r=1),t)!Object.prototype[n]&&0<r&&0<t[n].length&&(l+=(l?"&":"")+u.escape(t[n].join(","))+"="+u.escape(n),r--);u.wb(l)}}}return e},u.pb=function(){return u.useLinkTrackSessionStorage?u.Ca()?p.sessionStorage.getItem(u.P):void 0:u.cookieRead(u.P)},u.Ca=function(){return!!p.sessionStorage},u.wb=function(e){u.useLinkTrackSessionStorage?u.Ca()&&p.sessionStorage.setItem(u.P,e):u.cookieWrite(u.P,e)},u.Pb=function(){if(!u.Zb){var e,t,i=new Date,a=m.location,r=t=e="",n="",s="",o="1.2",l=u.cookieWrite("s_cc","true",0)?"Y":"N",c="",h="";if(i.setUTCDate&&(o="1.3",(0).toPrecision&&(o="1.5",(i=[]).forEach))){o="1.6",t=0,e={};try{(t=new Iterator(e)).next&&(o="1.7",i.reduce&&((o="1.8").trim&&(o="1.8.1",Date.parse&&(o="1.8.2",Object.create&&(o="1.8.5")))))}catch(d){}}e=screen.width+"x"+screen.height,r=navigator.javaEnabled()?"Y":"N",t=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,n=u.w.innerWidth?u.w.innerWidth:u.d.documentElement.offsetWidth,s=u.w.innerHeight?u.w.innerHeight:u.d.documentElement.offsetHeight;try{u.b.addBehavior("#default#homePage"),c=u.b.gc(a)?"Y":"N"}catch(g){}try{u.b.addBehavior("#default#clientCaps"),h=u.b.connectionType}catch(f){}u.resolution=e,u.colorDepth=t,u.javascriptVersion=o,u.javaEnabled=r,u.cookiesEnabled=l,u.browserWidth=n,u.browserHeight=s,u.connectionType=h,u.homepage=c,u.Zb=1}},u.Q={},u.loadModule=function(t,e){var i=u.Q[t];if(!i){i=p["AppMeasurement_Module_"+t]?new p["AppMeasurement_Module_"+t](u):{},u.Q[t]=u[t]=i,i.ib=function(){return i.sb},i.xb=function(e){(i.sb=e)&&(u[t+"_onLoad"]=e,u.ea(t+"_onLoad",[u,i],1)||e(u,i))};try{Object.defineProperty?Object.defineProperty(i,"onLoad",{get:i.ib,set:i.xb}):i._olc=1}catch(a){i._olc=1}}e&&(u[t+"_onLoad"]=e,u.ea(t+"_onLoad",[u,i],1)||e(u,i))},u.u=function(e){var t,i;for(t in u.Q)if(!Object.prototype[t]&&(i=u.Q[t])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(u,i)),i[e]&&i[e]()))return 1;return 0},u.Rb=function(){return!(!u.ActivityMap||!u.ActivityMap._c)},u.Sb=function(){var e=Math.floor(1e13*Math.random()),t=u.visitorSampling,i=u.visitorSamplingGroup,a=(i="s_vsn_"+(u.visitorNamespace?u.visitorNamespace:u.account)+(i?"_"+i:""),u.cookieRead(i));if(t){if(t*=100,a&&(a=parseInt(a)),!a){if(!u.cookieWrite(i,e))return 0;a=e}if(t<a%1e4)return 0}return 1},u.S=function(e,t){var i,a,r,n,s,o,l;for(l={},i=0;i<2;i++)for(a=0<i?u.Ea:u.g,r=0;r<a.length;r++)if((s=e[n=a[r]])||e["!"+n]){if(s&&!t&&("contextData"==n||"retrieveLightData"==n)&&u[n])for(o in u[n])s[o]||(s[o]=u[n][o]);u[n]||(l["!"+n]=1),l[n]=u[n],u[n]=s}return l},u.cc=function(e){var t,i,a,r;for(t=0;t<2;t++)for(i=0<t?u.Ea:u.g,a=0;a<i.length;a++)e[r=i[a]]=u[r],e[r]||"prop"!==r.substring(0,4)&&"eVar"!==r.substring(0,4)&&"hier"!==r.substring(0,4)&&"list"!==r.substring(0,4)&&"channel"!==r&&"events"!==r&&"eventList"!==r&&"products"!==r&&"productList"!==r&&"purchaseID"!==r&&"transactionID"!==r&&"state"!==r&&"zip"!==r&&"campaign"!==r&&"events2"!==r&&"latitude"!==r&&"longitude"!==r&&"ms_a"!==r&&"contextData"!==r&&"supplementalDataID"!==r&&"tnt"!==r&&"timestamp"!==r&&"abort"!==r&&"useBeacon"!==r&&"linkObject"!==r&&"clickObject"!==r&&"linkType"!==r&&"linkName"!==r&&"linkURL"!==r&&"bodyClickTarget"!==r&&"bodyClickFunction"!==r||(e["!"+r]=1)},u.Jb=function(e){var t,i,a,r,n,s,o=0,l="",c="";if(e&&255<e.length&&(0<(i=(t=""+e).indexOf("?"))&&(s=t.substring(i+1),a=0,"http://"==(r=(t=t.substring(0,i)).toLowerCase()).substring(0,7)?a+=7:"https://"==r.substring(0,8)&&(a+=8),0<(i=r.indexOf("/",a))&&(r=r.substring(a,i),n=t.substring(i),t=t.substring(0,i),0<=r.indexOf("google")?o=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")?o=",p,ei,":0<=r.indexOf("baidu.")&&(o=",wd,word,"),o&&s)))){if((e=s.split("&"))&&1<e.length){for(a=0;a<e.length;a++)0<(i=(r=e[a]).indexOf("="))&&0<=o.indexOf(","+r.substring(0,i)+",")?l+=(l?"&":"")+r:c+=(c?"&":"")+r;l&&c?s=l+"&"+c:c=""}e=t+(0<(i=253-(s.length-c.length)-t.length)?n.substring(0,i):"")+"?"+s}return e},u.bb=function(t){var e=u.d.visibilityState,i=["webkitvisibilitychange","visibilitychange"];if(e||(e=u.d.webkitVisibilityState),e&&"prerender"==e){if(t)for(e=0;e<i.length;e++)u.d.addEventListener(i[e],function(){var e=u.d.visibilityState;e||(e=u.d.webkitVisibilityState),"visible"==e&&t()});return!1}return!0},u.ba=!1,u.H=!1,u.zb=function(){u.H=!0,u.p()},u.I=!1,u.Ab=function(e){u.marketingCloudVisitorID=e.MCMID,u.visitorOptedOut=e.MCOPTOUT,u.analyticsVisitorID=e.MCAID,u.audienceManagerLocationHint=e.MCAAMLH,u.audienceManagerBlob=e.MCAAMB,u.I=!1,u.p()},u.ab=function(e){return u.maxDelay||(u.maxDelay=250),!u.u("_d")||(e&&setTimeout(function(){e()},u.maxDelay),!1)},u.Z=!1,u.G=!1,u.ya=function(){u.G=!0,u.p()},u.isReadyToTrack=function(){var e=!0;return!(!u.mb()||!u.kb())&&(u.ob()||(e=!1),u.rb()||(e=!1),e)},u.mb=function(){return u.ba||u.H||(u.bb(u.zb)?u.H=!0:u.ba=!0),!(u.ba&&!u.H)},u.kb=function(){var e=u.va();if(e){if(!u.ra&&!u.aa)return e.fetchPermissions(u.tb,!0),!(u.aa=!0);if(!u.ra)return!1;if(!e.isApproved(e.Categories.ANALYTICS))return!1}return!0},u.V=function(e){var t=u.va();return!(t&&!t.isApproved(t.Categories[e]))},u.va=function(){return p.adobe&&p.adobe.optIn?p.adobe.optIn:null},u.Y=!0,u.ob=function(){var e=u.T();return!e||!e.getVisitorValues||(u.Y&&(u.Y=!1,u.I||(u.I=!0,e.getVisitorValues(u.Ab))),!u.I)},u.T=function(){var e=u.visitor;return e&&!e.isAllowed()&&(e=null),e},u.rb=function(){return u.Z||u.G||(u.ab(u.ya)?u.G=!0:u.Z=!0),!(u.Z&&!u.G)},u.aa=!1,u.tb=function(){u.aa=!1,u.ra=!0},u.j=_,u.q=0,u.callbackWhenReadyToTrack=function(e,t,i){var a;(a={}).Eb=e,a.Db=t,a.Bb=i,u.j==_&&(u.j=[]),u.j.push(a),0==u.q&&(u.q=setInterval(u.p,100))},u.p=function(){var e;if(u.isReadyToTrack()&&(u.yb(),u.j!=_))for(;0<u.j.length;)(e=u.j.shift()).Db.apply(e.Eb,e.Bb)},u.yb=function(){u.q&&(clearInterval(u.q),u.q=0)},u.ta=function(e){var t,i={};if(u.cc(i),e!=_)for(t in e)i[t]=e[t];u.callbackWhenReadyToTrack(u,u.Da,[i]),u.Ba()},u.Lb=function(){var e,t=u.cookieRead("s_fid"),i="",a="";e=8;var r=4;if(!t||t.indexOf("-")<0){for(t=0;t<16;t++)e=Math.floor(Math.random()*e),i+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*r),a+="0123456789ABCDEF".substring(e,e+1),e=r=16;t=i+"-"+a}return u.cookieWrite("s_fid",t,1)||(t=0),t},u.Da=function(e){var t,i=new Date,a="s"+Math.floor(i.getTime()/108e5)%10+Math.floor(1e13*Math.random()),r=i.getYear(),n=(r="t="+u.escape(i.getDate()+"/"+i.getMonth()+"/"+(r<1900?r+1900:r)+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+" "+i.getDay()+" "+i.getTimezoneOffset()),u.T());e&&(t=u.S(e,1)),u.Sb()&&!u.visitorOptedOut&&(u.wa()||(u.fid=u.Lb()),u.Vb(),u.usePlugins&&u.doPlugins&&u.doPlugins(u),u.account&&(u.abort||(u.trackOffline&&!u.timestamp&&(u.timestamp=Math.floor(i.getTime()/1e3)),e=p.location,u.pageURL||(u.pageURL=e.href?e.href:e),u.referrer||u.Za||(e=u.Util.getQueryParam("adobe_mc_ref",null,null,!0),u.referrer=e||void 0===e?void 0===e?"":e:m.document.referrer),u.Za=1,u.referrer=u.Jb(u.referrer),u.u("_g")),u.Ob()&&!u.abort&&(n&&u.V("TARGET")&&!u.supplementalDataID&&n.getSupplementalDataID&&(u.supplementalDataID=n.getSupplementalDataID("AppMeasurement:"+u._in,!u.expectSupplementalData)),u.V("AAM")||(u.contextData["cm.ssf"]=1),u.Pb(),r+=u.Nb(),u.qb(a,r),u.u("_t"),u.referrer=""))),u.Ba(),t&&u.S(t,1)},u.t=u.track=function(e,t){t&&u.S(t),u.Y=!0,u.isReadyToTrack()?null!=u.j&&0<u.j.length?(u.ta(e),u.p()):u.Da(e):u.ta(e)},u.Ba=function(){u.abort=u.supplementalDataID=u.timestamp=u.pageURLRest=u.linkObject=u.clickObject=u.linkURL=u.linkName=u.linkType=p.s_objectID=u.pe=u.pev1=u.pev2=u.pev3=u.e=u.lightProfileID=u.useBeacon=u.referrer=0},u.Aa=[],u.registerPreTrackCallback=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);"function"==typeof e?u.Aa.push([e,t]):u.debugTracking&&u.C("DEBUG: Non function type passed to registerPreTrackCallback")},u.fb=function(e){u.ua(u.Aa,e)},u.za=[],u.registerPostTrackCallback=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);"function"==typeof e?u.za.push([e,t]):u.debugTracking&&u.C("DEBUG: Non function type passed to registerPostTrackCallback")},u.eb=function(e){u.ua(u.za,e)},u.ua=function(e,t){if("object"==typeof e)for(var i=0;i<e.length;i++){var a=e[i][0],r=e[i][1].slice();if(r.unshift(t),"function"==typeof a)try{a.apply(null,r)}catch(n){u.debugTracking&&u.C(n.message)}}},u.tl=u.trackLink=function(e,t,i,a,r){return u.linkObject=e,u.linkType=t,u.linkName=i,r&&(u.bodyClickTarget=e,u.bodyClickFunction=r),u.track(a)},u.trackLight=function(e,t,i,a){return u.lightProfileID=e,u.lightStoreForSeconds=t,u.lightIncrementBy=i,u.track(a)},u.clearVars=function(){var e,t;for(e=0;e<u.g.length;e++)("prop"==(t=u.g[e]).substring(0,4)||"eVar"==t.substring(0,4)||"hier"==t.substring(0,4)||"list"==t.substring(0,4)||"channel"==t||"events"==t||"eventList"==t||"products"==t||"productList"==t||"purchaseID"==t||"transactionID"==t||"state"==t||"zip"==t||"campaign"==t)&&(u[t]=void 0)},u.tagContainerMarker="",u.qb=function(e,t){var i=u.gb()+"/"+e+"?AQB=1&ndh=1&pf=1&"+(u.xa()?"callback=s_c_il["+u._in+"].doPostbacks&et=1&":"")+t+"&AQE=1";u.fb(i),u.cb(i),u.U()},u.gb=function(){var e=u.hb();return"http"+(u.ssl?"s":"")+"://"+e+"/b/ss/"+u.account+"/"+(u.mobile?"5.":"")+(u.xa()?"10":"1")+"/JS-"+u.version+(u.Yb?"T":"")+(u.tagContainerMarker?"-"+u.tagContainerMarker:"")},u.xa=function(){return u.AudienceManagement&&u.AudienceManagement.isReady()||0!=u.usePostbacks},u.hb=function(){var e=u.dc,t=u.trackingServer;return t?u.trackingServerSecure&&u.ssl&&(t=u.trackingServerSecure):("d1"==(e=e?(""+e).toLowerCase():"d1")?e="112":"d2"==e&&(e="122"),t=u.jb()+"."+e+".2o7.net"),t},u.jb=function(){var e=u.visitorNamespace;return e||(e=(e=u.account.split(",")[0]).replace(/[^0-9a-z]/gi,"")),e},u.Ya=/{(%?)(.*?)(%?)}/,u.bc=RegExp(u.Ya.source,"g"),u.Ib=function(e){if("object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var i=e.dests[t];if("string"==typeof i.c&&"aa."==i.id.substr(0,3))for(var a=i.c.match(u.bc),r=0;r<a.length;++r){var n=a[r],s=n.match(u.Ya),o="";"%"==s[1]&&"timezone_offset"==s[2]?o=(new Date).getTimezoneOffset():"%"==s[1]&&"timestampz"==s[2]&&(o=u.Mb()),i.c=i.c.replace(n,u.escape(o))}}},u.Mb=function(){var e=new Date,t=new Date(6e4*Math.abs(e.getTimezoneOffset()));return u.k(4,e.getFullYear())+"-"+u.k(2,e.getMonth()+1)+"-"+u.k(2,e.getDate())+"T"+u.k(2,e.getHours())+":"+u.k(2,e.getMinutes())+":"+u.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+u.k(2,t.getUTCHours())+":"+u.k(2,t.getUTCMinutes())},u.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},u.pa={},u.doPostbacks=function(e){if("object"==typeof e)if(u.Ib(e),"object"==typeof u.AudienceManagement&&"function"==typeof u.AudienceManagement.isReady&&u.AudienceManagement.isReady()&&"function"==typeof u.AudienceManagement.passData)u.AudienceManagement.passData(e);else if("object"==typeof e&&"object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var i=e.dests[t];"object"==typeof i&&"string"==typeof i.c&&"string"==typeof i.id&&"aa."==i.id.substr(0,3)&&(u.pa[i.id]=new Image,u.pa[i.id].alt="",u.pa[i.id].src=i.c)}},u.cb=function(e){u.i||u.Qb(),u.i.push(e),u.ia=u.A(),u.Wa()},u.Qb=function(){u.i=u.Tb(),u.i||(u.i=[])},u.Tb=function(){var e,t;if(u.oa()){try{(t=p.localStorage.getItem(u.ma()))&&(e=p.JSON.parse(t))}catch(i){}return e}},u.oa=function(){var e=!0;return u.trackOffline&&u.offlineFilename&&p.localStorage&&p.JSON||(e=!1),e},u.Ma=function(){var e=0;return u.i&&(e=u.i.length),u.l&&e++,e},u.U=function(){if(!u.l||(u.v&&u.v.complete&&u.v.D&&u.v.R(),!u.l))if(u.Na=_,u.na)u.ia>u.N&&u.Ua(u.i),u.qa(500);else{var e=u.Cb();0<e?u.qa(e):(e=u.Ka())&&(u.l=1,u.Ub(e),u.Xb(e))}},u.qa=function(e){u.Na||(e||(e=0),u.Na=setTimeout(u.U,e))},u.Cb=function(){var e;return!u.trackOffline||u.offlineThrottleDelay<=0?0:(e=u.A()-u.Sa,u.offlineThrottleDelay<e?0:u.offlineThrottleDelay-e)},u.Ka=function(){if(0<u.i.length)return u.i.shift()},u.Ub=function(e){if(u.debugTracking){var t,i="AppMeasurement Debug: "+e;for(e=e.split("&"),t=0;t<e.length;t++)i+="\n\t"+u.unescape(e[t]);u.C(i)}},u.wa=function(){return u.marketingCloudVisitorID||u.analyticsVisitorID},u.X=!1;try{f=JSON.parse('{"x":"y"}')}catch(i){f=null}for(f&&"y"==f.x?(u.X=!0,u.W=function(e){return JSON.parse(e)}):p.$&&p.$.parseJSON?(u.W=function(e){return p.$.parseJSON(e)},u.X=!0):u.W=function(){return null},u.Xb=function(e){var t,i,a;if(u.lb(e)&&(i=1,t={send:function(e){u.useBeacon=!1,navigator.sendBeacon(e)?t.R():t.ga()}}),!t&&u.wa()&&2047<e.length&&(u.$a()&&(i=2,t=new XMLHttpRequest),t&&(u.AudienceManagement&&u.AudienceManagement.isReady()||0!=u.usePostbacks)&&(u.X?t.Fa=!0:t=0)),!t&&u.Xa&&(e=e.substring(0,2047)),!t&&u.d.createElement&&(0!=u.usePostbacks||u.AudienceManagement&&u.AudienceManagement.isReady())&&(t=u.d.createElement("SCRIPT"))&&"async"in t&&((a=(a=u.d.getElementsByTagName("HEAD"))&&a[0]?a[0]:u.d.body)?(t.type="text/javascript",t.setAttribute("async","async"),i=3):t=0),t||((t=new Image).alt="",t.abort||"undefined"==typeof p.InstallTrigger||(t.abort=function(){t.src=_})),t.Ta=Date.now(),t.Ha=function(){try{t.D&&(clearTimeout(t.D),t.D=0)}catch(u){}},t.onload=t.R=function(){if(t.Ta&&(u.ja=Date.now()-t.Ta),u.eb(e),t.Ha(),u.Gb(),u.ca(),u.l=0,u.U(),t.Fa){t.Fa=!1;try{u.doPostbacks(u.W(t.responseText))}catch(i){}}},t.onabort=t.onerror=t.ga=function(){t.Ha(),(u.trackOffline||u.na)&&u.l&&u.i.unshift(u.Fb),u.l=0,u.ia>u.N&&u.Ua(u.i),u.ca(),u.qa(500)},t.onreadystatechange=function(){4==t.readyState&&(200==t.status?t.R():t.ga())},u.Sa=u.A(),1===i)t.send(e);else if(2===i)a=e.indexOf("?"),i=e.substring(0,a),a=(a=e.substring(a+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),t.open("POST",i,!0),t.withCredentials=!0,t.send(a);else if(t.src=e,3===i){if(u.Qa)try{a.removeChild(u.Qa)}catch(r){}a.firstChild?a.insertBefore(t,a.firstChild):a.appendChild(t),u.Qa=u.v}t.D=setTimeout(function(){t.D&&(t.complete?t.R():(u.trackOffline&&t.abort&&t.abort(),t.ga()))},5e3),u.Fb=e,u.v=p["s_i_"+u.replace(u.account,",","_")]=t,(u.useForcedLinkTracking&&u.J||u.bodyClickFunction)&&(u.forcedLinkTrackingTimeout||(u.forcedLinkTrackingTimeout=250),u.da=setTimeout(u.ca,u.forcedLinkTrackingTimeout))},u.lb=function(e){var t=!1;return navigator.sendBeacon&&(u.nb(e)?t=!0:u.useBeacon&&(t=!0)),u.vb(e)&&(t=!1),t},u.nb=function(e){return!!(e&&0<e.indexOf("pe=lnk_e"))},u.vb=function(e){return 64e3<=e.length},u.$a=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},u.Gb=function(){if(u.oa()&&!(u.Ra>u.N))try{p.localStorage.removeItem(u.ma()),u.Ra=u.A()}catch(e){}},u.Ua=function(e){if(u.oa()){u.Wa();try{p.localStorage.setItem(u.ma(),p.JSON.stringify(e)),u.N=u.A()}catch(t){}}},u.Wa=function(){if(u.trackOffline)for((!u.offlineLimit||u.offlineLimit<=0)&&(u.offlineLimit=10);u.i.length>u.offlineLimit;)u.Ka()},u.forceOffline=function(){u.na=!0},u.forceOnline=function(){u.na=!1},u.ma=function(){return u.offlineFilename+"-"+u.visitorNamespace+u.account},u.A=function(){return(new Date).getTime()},u.Oa=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},u.setTagContainer=function(e){var t,i,a;for(u.Yb=e,t=0;t<u._il.length;t++)if((i=u._il[t])&&"s_l"==i._c&&i.tagContainerName==e){if(u.S(i),i.lmq)for(t=0;t<i.lmq.length;t++)a=i.lmq[t],u.loadModule(a.n);if(i.ml)for(a in i.ml)if(u[a])for(t in e=u[a],a=i.ml[a])!Object.prototype[t]&&("function"!=typeof a[t]||(""+a[t]).indexOf("s_c_il")<0)&&(e[t]=a[t]);if(i.mmq)for(t=0;t<i.mmq.length;t++)a=i.mmq[t],u[a.m]&&((e=u[a.m])[a.f]&&"function"==typeof e[a.f]&&(a.a?e[a.f].apply(e,a.a):e[a.f].apply(e)));if(i.tq)for(t=0;t<i.tq.length;t++)u.track(i.tq[t]);i.s=u;break}},u.Util={urlEncode:u.escape,urlDecode:u.unescape,cookieRead:u.cookieRead,cookieWrite:u.cookieWrite,getQueryParam:function(e,t,i,a){var r,n="";return t||(t=u.pageURL?u.pageURL:p.location),i=i||"&",e&&t?(r=(t=""+t).indexOf("?"))<0?n:(t=i+t.substring(r+1)+i,a&&(0<=t.indexOf(i+e+i)||0<=t.indexOf(i+e+"="+i))?void 0:(0<=(r=t.indexOf("#"))&&(t=t.substr(0,r)+i),(r=t.indexOf(i+e+"="))<0||(0<=(r=(t=t.substring(r+i.length+e.length+1)).indexOf(i))&&(t=t.substring(0,r)),0<t.length&&(n=u.unescape(t))),n)):n},getIeVersion:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return e}return null}},
u.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),u.g=u.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),u.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),u.O=u.ka.slice(0),u.Ea="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),c=0;c<=250;c++)c<76&&(u.g.push("prop"+c),u.O.push("prop"+c)),u.g.push("eVar"+c),u.O.push("eVar"+c),c<6&&u.g.push("hier"+c),c<4&&u.g.push("list"+c);c="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),u.g=u.g.concat(c),u.F=u.F.concat(c),u.ssl=0<=p.location.protocol.toLowerCase().indexOf("https"),u.charSet="UTF-8",u.contextData={},u.offlineThrottleDelay=0,u.offlineFilename="AppMeasurement.offline",u.P="s_sq",u.Sa=0,u.ia=0,u.N=0,u.Ra=0,u.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",u.w=p,u.d=p.document;try{if(u.Xa=!1,navigator){var e=navigator.userAgent;("Microsoft Internet Explorer"==navigator.appName||0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")&&0<=e.indexOf("Windows NT 6"))&&(u.Xa=!0)}}catch(a){}u.ca=function(){u.da&&(p.clearTimeout(u.da),u.da=_),u.bodyClickTarget&&u.J&&u.bodyClickTarget.dispatchEvent(u.J),u.bodyClickFunction&&("function"==typeof u.bodyClickFunction?u.bodyClickFunction():u.bodyClickTarget&&u.bodyClickTarget.href&&(u.d.location=u.bodyClickTarget.href)),u.bodyClickTarget=u.J=u.bodyClickFunction=0},u.Va=function(){u.b=u.d.body,u.b?(u.r=function(e){var t,i,a,r,n;if(!(u.d&&u.d.getElementById("cppXYctnr")||e&&e["s_fe_"+u._in])){if(u.Ga){if(!u.useForcedLinkTracking)return u.b.removeEventListener("click",u.r,!0),void(u.Ga=u.useForcedLinkTracking=0);u.b.removeEventListener("click",u.r,!1)}else u.useForcedLinkTracking=0;u.clickObject=e.srcElement?e.srcElement:e.target;try{if(!u.clickObject||u.M&&u.M==u.clickObject||!(u.clickObject.tagName||u.clickObject.parentElement||u.clickObject.parentNode))u.clickObject=0;else{var s=u.M=u.clickObject;if(u.ha&&(clearTimeout(u.ha),u.ha=0),u.ha=setTimeout(function(){u.M==s&&(u.M=0)},1e4),a=u.Ma(),u.track(),a<u.Ma()&&u.useForcedLinkTracking&&e.target){for(r=e.target;r&&r!=u.b&&"A"!=r.tagName.toUpperCase()&&"AREA"!=r.tagName.toUpperCase();)r=r.parentNode;if(r&&(n=r.href,u.Oa(n)||(n=0),i=r.target,e.target.dispatchEvent&&n&&(!i||"_self"==i||"_top"==i||"_parent"==i||p.name&&i==p.name))){try{t=u.d.createEvent("MouseEvents")}catch(o){t=new p.MouseEvent}if(t){try{t.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(c){t=0}t&&(t["s_fe_"+u._in]=t.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),u.bodyClickTarget=e.target,u.J=t)}}}}}catch(l){u.clickObject=0}}},u.b&&u.b.attachEvent?u.b.attachEvent("onclick",u.r):u.b&&u.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&u.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&p.MouseEvent)&&(u.Ga=1,u.useForcedLinkTracking=1,u.b.addEventListener("click",u.r,!0)),u.b.addEventListener("click",u.r,!1))):setTimeout(u.Va,30)},u.Hb(),u.ic||(d?u.setAccount(d):u.C("Error, missing Report Suite ID in AppMeasurement initialization"),u.Va(),u.loadModule("ActivityMap"))}function s_gi(e){var t,i,a,r,n,s=window.s_c_il,o=e.split(","),l=0;if(s)for(i=0;!l&&i<s.length;){if("s_c"==(t=s[i])._c&&(t.account||t.oun))if(t.account&&t.account==e)l=1;else for(a=t.account?t.account:t.oun,a=t.allAccounts?t.allAccounts:a.split(","),r=0;r<o.length;r++)for(n=0;n<a.length;n++)o[r]==a[n]&&(l=1);i++}return l?t.setAccount&&t.setAccount(e):t=new AppMeasurement(e),t}function s_pgicq(){var e,t,i,a=window,r=a.s_giq;if(r)for(e=0;e<r.length;e++)(i=s_gi((t=r[e]).oun)).setAccount(t.un),i.setTagContainer(t.tagContainerName);a.s_giq=0}_satellite.logger.log(">> Loading Custom Adobe Analytics Library >");try{window.performance&&window.performance.mark("adobelaunch_adobeanalytics_load")}catch(err){dctfl.log(err)}var s_account=_satellite.getVar("reportSuites"),trackingServer=_satellite.getVar("trackingServer"),trackingSecureServer=_satellite.getVar("trackingSecureServer"),s=s_gi(s_account),domain=location.host.replace("www.",""),defaultLinkTrackVars=["eVar1","eVar12","eVar13","eVar17","eVar2","eVar20","eVar21","eVar24","eVar25","eVar29","eVar4","eVar44","eVar5","eVar51","eVar53","eVar54","eVar74","list1","prop1","prop14","prop15","prop2","prop4","prop42","prop44","prop48","prop5","prop60","prop62","prop63","prop64","prop64","prop75","eVar38"];s.registerPostTrackCallback(function(){s.pageType&&(dctfl.log("Clearing s.pageType"),s.pageType="")}),s._tpDST={2019:"3/10,11/3",2020:"3/8,11/1",2021:"3/14,11/7",2022:"3/13,11/6",2023:"3/12,11/5",2024:"3/10,11/3",2025:"3/9,11/2",2026:"3/8,11/1",2027:"3/14,11/7",2028:"3/12,11/5",2029:"3/11,11/4",2030:"3/10,11/3"},_satellite.getVar("isEU")&&(s._tpDST={2019:"3/31,10/27",2020:"3/29,10/25",2021:"3/28,10/31",2022:"3/27,10/22",2023:"3/26,10/29",2024:"3/31,10/27",2025:"3/30,10/26",2026:"3/29,10/25",2027:"3/28,10/31",2028:"3/26,10/29",2029:"3/25,10/28",2030:"3/31,10/27"}),s.fsdRules={ssn:"(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}",account_num:"[0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]",cc_num:"[0-9][0-9][0-9][0-9][0-9][0-9]",email_addy:"[A-Za-z0-9](([_.-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([.-]?[a-zA-Z0-9]+)*).([A-Za-z]{2,})"},s.fsdruleset={all:["account_num","email_addy","cc_num"]},s.usePlugins=!0,s.doPlugins=function(e){_satellite.logger.log(">> Adobe Analytics Plugins Function > ");var t=!0,i="";i=_satellite.getVar("marketingCloudVisitorID"),1==e.getVisitStart("s_vs")&&(!0,setTimeout(function(){_satellite.track("visit:start",{})},1),e.events=e.apl(e.events,"event102",",",1),e.prop43=getTimeStamp()+"|"+i),"undefined"!=typeof e.linkType&&e.linkType&&(t=!1),dctfl.log("analytics isPageView:",t),e.eVar12=_satellite.getVar("previousPageType"),e.eVar13=_satellite.getVar("previousPageName"),e.prop14="D=v12",e.prop15="D=v13";var a=_satellite.getVar("pageType"),r=_satellite.getVar("pathNameWithoutLocale"),n=r.replace(".html","").slice(1).split("/");e.pageName=e.eVar1=_satellite.getVar("pageName"),e.prop1="D=pageName";var s=_satellite.getVar("pageURL");e.eVar2=e.prop2=s,e.eVar3=e.prop3=_satellite.getVar("getDocumentTitle"),e.server=window.location.host.split("/").join(""),e.server=-1<e.server.indexOf(":")?e.server=e.server.match("(.*):")[1]:e.server,e.eVar4=e.prop4=e.server,e.eVar5=e.prop5=e.currentPageType=a,-1<r.search(/category|brand/i)&&(e.eVar10=e.prop10=n.slice(1).join("|")),"Category"===a?e.eVar6=e.prop6=n[1]:"Subcategory"===a?(e.eVar6=e.prop6=n[1],e.eVar7=e.prop7=n[2]):"Subsubcategory"===a?(e.eVar6=e.prop6=n[1],e.eVar7=e.prop7=n[2],e.eVar8=e.prop8=n[3]):"Subsubsubcategory"===a?(e.eVar6=e.prop6=n[1],e.eVar7=e.prop7=n[2],e.eVar8=e.prop8=n[3],e.eVar9=e.prop9=n[4]):"Supercategory"===a?(e.eVar6=e.prop6=n[1],e.eVar7=e.prop7=n[2],e.eVar8=e.prop8=n[3],e.eVar9=e.prop9=n[4]):"Brand"===a&&(2===n.length?(e.eVar6=e.prop6=n[0],e.eVar7=e.prop7=n[1]):3===n.length&&(e.eVar6=e.prop6=n[1],e.eVar7=e.prop7=n[2])),e.prop44=_satellite.getVar("cookieStats");var o=_satellite.getVar("searchResults"),l=_satellite.getVar("enteredSearchTerm"),c=_satellite.getVar("searchTerm"),h=_satellite.getVar("searchInteraction"),d=_satellite.getVar("searchTermAutocorrect"),p=_satellite.getVar("typedSearchTerm"),u=_satellite.getVar("predictiveSearchType");""==h&&(h=e.searchInteraction,e.searchInteraction="");var _="";try{_=localStorage.getItem("searchInteractionValue")}catch(M){dctfl.log(M)}if(-1<a.toLowerCase().indexOf("category")||-1<a.toLowerCase().indexOf("brand")||-1<a.toLowerCase().indexOf("search")){if(h!=undefined&&""!=h){switch(_satellite.logger.log("Search Interaction: "+h),h){case"sort changed":e.prop11=e.eVar11=p,e.prop50=e.eVar50=c,e.prop72=e.eVar72=d,e.eVar82=u,e.events=e.apl(e.events,"event146",",",1),_satellite.getVar("searchTermAutocorrect")&&(e.events=e.apl(e.events,"event165",",",1));break;case"left facet panel changed":e.prop11=e.eVar11=p,e.prop50=e.eVar50=c,e.prop72=e.eVar72=d,e.eVar82=u,e.prop52=_,e.events=e.apl(e.events,"event125",",",1),e.events=e.apl(e.events,"event169",",",1),_satellite.getVar("searchTermAutocorrect")&&(e.events=e.apl(e.events,"event165",",",1));break;case"top facet panel changed":e.prop11=e.eVar11=p,e.prop50=e.eVar50=c,e.prop72=e.eVar72=d,e.eVar82=u,e.prop52=_,e.events=e.apl(e.events,"event125",",",1),e.events=e.apl(e.events,"event170",",",1),_satellite.getVar("searchTermAutocorrect")&&(e.events=e.apl(e.events,"event165",",",1))}(-1<a.toLowerCase().indexOf("category")||-1<a.toLowerCase().indexOf("brand"))&&(e.prop11=e.eVar11="",e.prop50=e.eVar50="",e.prop72=e.eVar72="",e.eVar82="")}}else h="";if((-1<a.toLowerCase().indexOf("category")||-1<a.toLowerCase().indexOf("brand")||-1<a.toLowerCase().indexOf("search"))&&"order search"!==a.toLowerCase()&&t)if(0===o&&""!==o){e.events=e.apl(e.events,"event160",",",1),e.events=e.apl(e.events,"event41",",",1),e.events=e.apl(e.events,"event43=0",",",1);try{-1<e.products.indexOf("imp")?e.products=e.products:e.products=";null search"}catch(M){e.products=";null search"}}else e.events=e.apl(e.events,"event43="+o,",",1);-1==a.toLowerCase().indexOf("category")&&-1==a.toLowerCase().indexOf("brand")&&-1==a.toLowerCase().indexOf("search")&&-1==a.toLowerCase().indexOf("product")&&-1==a.toLowerCase().indexOf("cart")&&-1==a.toLowerCase().indexOf("checkout")&&-1==a.toLowerCase().indexOf("confirm")&&l!==undefined&&""!==l&&(e.products!=undefined&&""!=e.products||(e.products=";non-product search")),"order search"===a.toLowerCase()&&(e.products!=undefined&&""!=e.products||(e.products=";non-product search")),h!=undefined&&""!=h||(-1<a.toLowerCase().indexOf("search")?(e.events=e.apl(e.events,"event160",",",1),l!==undefined&&""!==l?(e.prop11=e.eVar11=p,e.prop50=e.eVar50=c,e.prop72=e.eVar72=d,e.eVar82=u,e.events=e.apl(e.events,"event40",",",1),_satellite.getVar("searchTermAutocorrect")&&(e.events=e.apl(e.events,"event165",",",1))):c!==undefined&&""!==c&&(e.prop50=e.eVar50=c,e.events=e.apl(e.events,"event160",",",1))):l!==undefined&&""!==l&&(e.prop11=e.eVar11=p,e.prop50=e.eVar50=c,e.eVar82=u,e.events=e.apl(e.events,"event40",",",1),e.events=e.apl(e.events,"event160",",",1))),""!=e.prop50&&e.prop50!=undefined?(_satellite.logger.log("s.prop50="+e.prop50),_satellite.logger.log("s.events="+e.events),_satellite.logger.log("s.products="+e.products)):h!=undefined&&""!=h&&(_satellite.logger.log("s.prop50="+e.prop50),_satellite.logger.log("s.events="+e.events),_satellite.logger.log("s.products="+e.products)),l!==undefined&&""!==l&&-1===a.toLowerCase().indexOf("category")&&"search"!==a.toLowerCase()&&"null search"!==a.toLowerCase()&&"brand"!==a.toLowerCase()&&(e.events=e.apl(e.events,"event4",",",1));try{localStorage.removeItem("predictiveSearchTerm"),localStorage.removeItem("predictiveSearchType"),localStorage.removeItem("enteredSearchTerm"),localStorage.removeItem("typedSearchTerm"),localStorage.removeItem("pdpSearchTerm"),localStorage.removeItem("searchTerm"),localStorage.removeItem("searchValue"),localStorage.removeItem("searchInput")}catch(M){}e.eVar74=i,e.prop18=_satellite.getVar("language"),!0===_satellite.getVar("isLimitedWeb")?e.prop63="limitedweb:true":e.prop63="limitedweb:false";var g=_satellite.getVar("productAffinitySegmentValues");g&&(e.list1=e.apl(e.list1,g,","));var f=_satellite.getVar("targetActivities");if(f&&(e.list1=e.apl(e.list1,f,",")),!0===_satellite.getVar("DNT")&&(e.list1=e.apl(e.list1,"segment=dnt:true",",")),_satellite.getVar("isUS")){var m=_satellite.getVar("ccpaOptOutStatus")||"";m&&(e.list1=e.apl(e.list1,"segment=ccpa:"+m,","))}var v=_satellite.getVar("TargetingCookiesEnabled");e.list1=e.apl(e.list1,"segment=targetingcookies:"+v,","),"string"==typeof e.linkTrackVars&&0<e.linkTrackVars.length?e.linkTrackVars=defaultLinkTrackVars.join(",")+","+e.linkTrackVars:e.linkTrackVars=defaultLinkTrackVars.join(","),e.eVar53=_satellite.getVar("dctSessionID"),"e"===e.linkType&&(e.events=""),e.prop75=_satellite.getVar("buildVersion"),e.eVar16=e.getDaysSinceLastVisit("s_lv"),e.eVar17=_satellite.getVar("getTimeParting"),e.eVar30=_satellite.getVar("trackUserP");try{if(_satellite.getVar("userEmailAddress"))!0===_satellite.getVar("EmailTrackingEnabled")?e.eVar44=_satellite.getVar("md5Email"):e.eVar44="email-supressed",e.eVar24=_satellite.getVar("userAge");else if(localStorage.getItem("md5value")){var y=localStorage.getItem("md5value").trim().toLowerCase();6<y.length&&1<y.indexOf("@")?!0===_satellite.getVar("EmailTrackingEnabled")?e.eVar44=md5(y):e.eVar44="email-supressed":!0===_satellite.getVar("EmailTrackingEnabled")?6<y.length&&1<y.indexOf("@")?e.eVar44=md5(y):e.eVar44=y:e.eVar44="email-supressed"}else if(_satellite.getVar("dtm_em")){var b=_satellite.getVar("dtm_em").trim().toLowerCase().replace(/^0x/g,"");6<b.length&&-1===b.indexOf("@")&&(!0===_satellite.getVar("EmailTrackingEnabled")?(e.eVar44=b,localStorage.setItem("md5Value",b)):e.eVar44="email-supressed")}}catch(M){dctfl.log(M)}try{e.prop46=_satellite.getVar("browserWidth")}catch(M){}try{if(_satellite.cookie.get("userStatus"))-1<_satellite.cookie.get("userStatus").toLowerCase().indexOf("registered")&&(e.eVar19="registered")}catch(M){}try{"Y"==_satellite.getVar("userLoggedInState")?e.eVar20="y":"N"==_satellite.getVar("userLoggedInState")&&(e.eVar20="n")}catch(M){dctfl.log("user logged in state not defined")}var k=_satellite.getVar("bannerUserFlag");""!==k&&(e.eVar25=k),e.eVar21=_satellite.getVar("LoyaltyMemberGuid"),e.events=e.apl(e.events,"event101",",",1),e.eVar98=e.getVisitNum("m","s_vnum"),e.eVar73=_satellite.getVar("campaignSID"),e.eVar48=_satellite.getVar("campaignRANEAID");var I=_satellite.getVar("siteID");I&&(e.eVar42=-1!==I.indexOf("-")?I.split("-")[0]:I),e.campaign=_satellite.getVar("campaign"),e.eVar90=_satellite.getVar("UTMCampaignParameters"),e.eVar94=_satellite.getVar("campaignGCLID"),_satellite.logger.log("LOCATION: s.pageURL: "+e.pageURL),e.pageURL!==window.location.href&&_satellite.logger.log("LOCATION: s.pageURL not updated: "+window.location.href),e.pageURL=s,-1<e.pageURL.indexOf("?")?-1<e.pageURL.split("?")[1].indexOf("#")?(e.prop62=e.pageURL.split("?")[0],e.prop60=e.pageURL.split("?")[1].split("#")[0]):(e.prop62=e.pageURL.split("?")[0],e.prop60=e.pageURL.split("?")[1]):(-1<e.pageURL.indexOf("#")?e.prop62=e.pageURL.split("#")[0]:e.prop62=e.pageURL,e.prop60="no query string"),e.prop51=document.title,e.prop54=getMetaDescription(),e.prop55=getMetaKeywords();var T=e.eVar44;try{T!=undefined&&""!=T&&"undefined"!=typeof Visitor&&e.visitor.setCustomerIDs({md5_custid:{id:T,authState:Visitor.AuthState.AUTHENTICATED}})}catch(M){dctfl.log("Setting Customer ID via MD5 in visitor object failed")}try{e.prop64="hidden:"+_satellite.getVar("documentHidden")+"|focus:"+_satellite.getVar("documentHasFocus")}catch(M){dctfl.log(M)}var A=_satellite.getVar("mystoreID");if(A&&(e.eVar38=A),e.prop65=e.getTimeBetweenEvents("event102","f","purchase","f","s_pr_tbe65"),e.prop66=e.getTimeBetweenEvents("prodView","f","purchase","f","s_pr_tbe66"),e.prop67=e.getTimeBetweenEvents("scOpen","f","purchase","f","s_pr_tbe67"),e.prop68=e.getTimeBetweenEvents("scCheckout","f","purchase","f","s_pr_tbe68"),e.prop71=e.getTimeBetweenEvents("event11","f","purchase","f","s_pr_tbe71"),e.hier1=e.pageName,e.hier2=set_h3(),e.events=e.resetGetCartOpen(),e.prop21=_satellite.getVar("ASPComponents"),document.referrer){var E=_satellite.getVar("alternativeReferrer");E&&("empty"!=E?(e.referrer=E,_satellite.logger.log("Using alternative referrer: "+E),e.eVar99=document.referrer):(_satellite.logger.log("Persisted referrer was empty"),e.eVar99="empty"))}if(e.contextData["cm.ssf"]="1","object"==typeof e.contextData){var S=Object.keys(e.contextData).map(function(e){return"contextData."+e});S&&0<S.length&&(e.linkTrackVars=S.join(",")+","+e.linkTrackVars)}var w=uniqueValues(e.linkTrackVars.split(","));e.linkTrackVars=w.join(",");var D=["prop2","eVar2","prop62","prop47"];e.pageName&&(e.pageName=e.pageName.toLowerCase());for(var P=1;P<=75;P++){var N="prop"+P;-1===D.indexOf(N)&&"string"==typeof e[N]&&-1===e[N].indexOf("D=")&&0<e[N].length&&(e[N]=e[N].toLowerCase().substring(0,100))}for(P=1;P<=250;P++){N="eVar"+P;-1===D.indexOf(N)&&"string"==typeof e[N]&&-1===e[N].indexOf("D=")&&0<e[N].length&&(e[N]=e[N].toLowerCase().substring(0,255))}for(P=1;P<=5;P++){N="hier"+P;-1===D.indexOf(N)&&"string"==typeof e[N]&&-1===e[N].indexOf("D=")&&0<e[N].length&&(e[N]=e[N].toLowerCase())}for(P=1;P<=3;P++){N="list"+P;-1===D.indexOf(N)&&"string"==typeof e[N]&&-1===e[N].indexOf("D=")&&0<e[N].length&&(e[N]=e[N].toLowerCase())}};var CryptoJS=CryptoJS||function(o,i){var a=Object.create||function(){function t(){}return function(e){return t.prototype=e,e=new t,t.prototype=null,e}}(),e={},t=e.lib={},r=t.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=i?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var r=0;r<e;r++)t[a+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(a+r)%4*8;else for(r=0;r<e;r+=4)t[a+r>>>2]=i[r>>>2];return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=o.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],a=function(e){var t=987654321;return function(){return((((t=36969*(65535&t)+(t>>16)&4294967295)<<16)+(e=18e3*(65535&e)+(e>>16)&4294967295)&4294967295)/4294967296+.5)*(.5<o.random()?1:-1)}},r=0;r<e;r+=4){var n=a(4294967296*(t||o.random()));t=987654071*n(),i.push(4294967296*n()|0)}return new l.init(i,e)}}),n=e.enc={},s=n.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++){var r=t[a>>>2]>>>24-a%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new l.init(i,t/2)}},c=n.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++)i.push(String.fromCharCode(t[a>>>2]>>>24-a%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new l.init(i,t)}},h=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,i=this._data,a=i.words,r=i.sigBytes,n=this.blockSize,s=r/(4*n);if(e=(s=e?o.ceil(s):o.max((0|s)-this._minBufferSize,0))*n,r=o.min(4*e,r),e){for(t=0;t<e;t+=n)this._doProcessBlock(a,t);t=a.splice(0,e),i.sigBytes-=r}return new l.init(t,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new p.HMAC.init(i,t).finalize(e)}}});var p=e.algo={};return e}(Math);!function(n){function T(e,t,i,a,r,n,s){return((e=e+(t&i|~t&a)+r+s)<<n|e>>>32-n)+t}function A(e,t,i,a,r,n,s){return((e=e+(t&a|i&~a)+r+s)<<n|e>>>32-n)+t}function E(e,t,i,a,r,n,s){return((e=e+(t^i^a)+r+s)<<n|e>>>32-n)+t}function S(e,t,i,a,r,n,s){return((e=e+(i^(t|~a))+r+s)<<n|e>>>32-n)+t}var e=CryptoJS,t=e.lib,i=t.WordArray,a=t.Hasher;t=e.algo;var w=[];!function(){for(var e=0;e<64;e++)w[e]=4294967296*n.abs(n.sin(e+1))|0}(),t=t.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var a=t+i,r=e[a];e[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}i=this._hash.words,a=e[t+0],r=e[t+1];var n=e[t+2],s=e[t+3],o=e[t+4],l=e[t+5],c=e[t+6],h=e[t+7],d=e[t+8],p=e[t+9],u=e[t+10],_=e[t+11],g=e[t+12],f=e[t+13],m=e[t+14],v=e[t+15],y=i[0],b=i[1],k=i[2],I=i[3];b=S(b=S(b=S(b=S(b=E(b=E(b=E(b=E(b=A(b=A(b=A(b=A(b=T(b=T(b=T(b=T(b,k=T(k,I=T(I,y=T(y,b,k,I,a,7,w[0]),b,k,r,12,w[1]),y,b,n,17,w[2]),I,y,s,22,w[3]),k=T(k,I=T(I,y=T(y,b,k,I,o,7,w[4]),b,k,l,12,w[5]),y,b,c,17,w[6]),I,y,h,22,w[7]),k=T(k,I=T(I,y=T(y,b,k,I,d,7,w[8]),b,k,p,12,w[9]),y,b,u,17,w[10]),I,y,_,22,w[11]),k=T(k,I=T(I,y=T(y,b,k,I,g,7,w[12]),b,k,f,12,w[13]),y,b,m,17,w[14]),I,y,v,22,w[15]),k=A(k,I=A(I,y=A(y,b,k,I,r,5,w[16]),b,k,c,9,w[17]),y,b,_,14,w[18]),I,y,a,20,w[19]),k=A(k,I=A(I,y=A(y,b,k,I,l,5,w[20]),b,k,u,9,w[21]),y,b,v,14,w[22]),I,y,o,20,w[23]),k=A(k,I=A(I,y=A(y,b,k,I,p,5,w[24]),b,k,m,9,w[25]),y,b,s,14,w[26]),I,y,d,20,w[27]),k=A(k,I=A(I,y=A(y,b,k,I,f,5,w[28]),b,k,n,9,w[29]),y,b,h,14,w[30]),I,y,g,20,w[31]),k=E(k,I=E(I,y=E(y,b,k,I,l,4,w[32]),b,k,d,11,w[33]),y,b,_,16,w[34]),I,y,m,23,w[35]),k=E(k,I=E(I,y=E(y,b,k,I,r,4,w[36]),b,k,o,11,w[37]),y,b,h,16,w[38]),I,y,u,23,w[39]),k=E(k,I=E(I,y=E(y,b,k,I,f,4,w[40]),b,k,a,11,w[41]),y,b,s,16,w[42]),I,y,c,23,w[43]),k=E(k,I=E(I,y=E(y,b,k,I,p,4,w[44]),b,k,g,11,w[45]),y,b,v,16,w[46]),I,y,n,23,w[47]),k=S(k,I=S(I,y=S(y,b,k,I,a,6,w[48]),b,k,h,10,w[49]),y,b,m,15,w[50]),I,y,l,21,w[51]),k=S(k,I=S(I,y=S(y,b,k,I,g,6,w[52]),b,k,s,10,w[53]),y,b,u,15,w[54]),I,y,r,21,w[55]),k=S(k,I=S(I,y=S(y,b,k,I,d,6,w[56]),b,k,v,10,w[57]),y,b,c,15,w[58]),I,y,f,21,w[59]),k=S(k,I=S(I,y=S(y,b,k,I,o,6,w[60]),b,k,_,10,w[61]),y,b,n,15,w[62]),I,y,p,21,w[63]),i[0]=i[0]+y|0,i[1]=i[1]+b|0,i[2]=i[2]+k|0,i[3]=i[3]+I|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32;var r=n.floor(i/4294967296);for(t[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,i=0;i<4;i++)a=t[i],t[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return e},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=a._createHelper(t)}(Math),function(i){var e=CryptoJS,t=e.lib,r=t.Base,n=t.WordArray;(e=e.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=i?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],a=0;a<t;a++){var r=e[a];i.push(r.high),i.push(r.low)}return n.create(i,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),i=t.length,a=0;a<i;a++)t[a]=t[a].clone();return e}})}(),function(o){var e=CryptoJS,t=e.lib,l=t.WordArray,a=t.Hasher,s=e.x64.Word;t=e.algo;var h=[],d=[],p=[];!function(){for(var e=1,t=0,i=0;i<24;i++){h[e+5*t]=(i+1)*(i+2)/2%64;var a=(2*e+3*t)%5;e=t%5,t=a}for(e=0;e<5;e++)for(t=0;t<5;t++)d[e+5*t]=t+(2*e+3*t)%5*5;for(e=1,t=0;t<24;t++){for(var r=a=i=0;r<7;r++){if(1&e){var n=(1<<r)-1;n<32?a^=1<<n:i^=1<<n-32}e=128&e?e<<1^113:e<<1}p[t]=s.create(i,a)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=s.create()}(),t=t.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,a=this.blockSize/2,r=0;r<a;r++){var n=e[t+2*r],s=e[t+2*r+1];n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);var o=i[r];o.high^=s,o.low^=n}for(a=0;a<24;a++){for(r=0;r<5;r++){for(var l=n=0,c=0;c<5;c++)n^=(o=i[r+5*c]).high,l^=o.low;(o=u[r]).high=n,o.low=l}for(r=0;r<5;r++)for(o=u[(r+4)%5],s=(n=u[(r+1)%5]).high,c=n.low,n=o.high^(s<<1|c>>>31),l=o.low^(c<<1|s>>>31),c=0;c<5;c++)(o=i[r+5*c]).high^=n,o.low^=l;for(s=1;s<25;s++)r=(o=i[s]).high,o=o.low,(c=h[s])<32?(n=r<<c|o>>>32-c,l=o<<c|r>>>32-c):(n=o<<c-32|r>>>64-c,l=r<<c-32|o>>>64-c),(o=u[d[s]]).high=n,o.low=l;for(o=u[0],r=i[0],o.high=r.high,o.low=r.low,r=0;r<5;r++)for(c=0;c<5;c++)o=i[s=r+5*c],n=u[s],s=u[(r+1)%5+5*c],l=u[(r+2)%5+5*c],o.high=n.high^~s.high&l.high,o.low=n.low^~s.low&l.low;o=i[0],r=p[a],o.high^=r.high,o.low^=r.low}},_doFinalize:function(){var e=this._data,t=e.words,i=8*e.sigBytes,a=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(o.ceil((i+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*t.length,this._process(),e=this._state,i=(t=this.cfg.outputLength/8)/8,a=[];for(var r=0;r<i;r++){var n=e[r],s=n.high;s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n=16711935&((n=n.low)<<8|n>>>24)|4278255360&(n<<24|n>>>8),a.push(n),a.push(s)}return new l.init(a,t)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}}),e.SHA3=a._createHelper(t)}(Math),s.filterSensitiveData=function(e){var t={orig:"",ruleset:"all",repltext:""};for(var i in t)"undefined"==typeof e[i]&&(e[i]=t[i]);var a=e.orig;for(r in rs=s.fsdruleset[e.ruleset],rs)rx=new RegExp(s.fsdRules[rs[r]]),rx.test(a)&&(a=""!=e.repltext?e.repltext:"FILTERED:"+rs[r]);return a},s.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.pt=new Function("x","d","f","a","var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return'';"),s.p_fo=new Function("n","var s=this;if(!s.__fo){s.__fo=new Object;}if(!s.__fo[n]){s.__fo[n]=new Object;return 1;}else {return 0;}"),s.join=new Function("v","p","var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);else str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;"),s.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"),s.inList=new Function("v","l","d","var s=this,ar=Array(),i=0,d=(d)?d:',';if(typeof(l)=='string'){if(s.split)ar=s.split(l,d);else if(l.split)ar=l.split(d);else return-1}else ar=l;while(i<ar.length){if(v==ar[i])return true;i++}return false;"),s.repl=new Function("x","o","n","var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o,i+l)}return x"),s.wd=window,s.fl=new Function("x","l","return x?(''+x).substring(0,l):x"),s.pt=new Function("x","d","f","a","var s=this,t=x,z=0,y,r,l='length';while(t){y=t.indexOf(d);y=y<0?t[l]:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d[l];t=x.substring(z,x[l]);t=z<x[l]?t:''}return''"),s.rep=new Function("x","o","n","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(o);else if(!o)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(o,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=o.length}}x='';j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(n);else for(i=1;i<j;i++)x+=n+a[i]}}return x"),s.ape=new Function("x","var s=this,h='0123456789ABCDEF',f='+~!*()\\'',i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent(x);for(i=0;i<f.length;i++){n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,'%'+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x"),s.epa=new Function("x","var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unescape(x)}return y');return tcf(x)}else return unescape(x)}return y"),s.parseUri=new Function("u","if(u){u=u+'';u=u.indexOf(':')<0&&u.indexOf('//')!=0?(u.indexOf('/')==0?'/':'//')+u:u}u=u?u+'':window.location.href;var e,a=document.createElement('a'),l=['href','protocol','host','hostname','port','pathname','search','hash'],p,r={href:u,toString:function(){return this.href}};a.setAttribute('href',u);for(e=1;e<l.length;e++){p=l[e];r[p]=a[p]||''}delete a;p=r.pathname||'';if(p.indexOf('/')!=0)r.pathname='/'+p;return r"),s.gtfs=new Function("var w=window,l=w.location,d=document,u;if(!l.origin)l.origin=l.protocol+'//'+l.hostname+(l.port?':'+l.port:'');u=l!=w.parent.location?d.referrer:d.location;return{location:s.parseUri(u)}"),s.getVisitStart=new Function("c","var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);if(s.c_r(c)){v=0}if(!s.c_w(c,1,t)){s.c_w(c,1,0)}if(!s.c_r(c)){v=0}return v;"),s.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),s.getTimeParting=new Function("h","z",
"var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}"),s.resetGetCartOpen=new Function("var s=this,t=new Date,e=s.events?s.events:'';t.setTime(t.getTime()+10000);if(e.indexOf('purchase')>-1){if(s.c_r('s_scOpen')||e.indexOf('scOpen')>-1){if(!s.c_w('s_scOpen','',t)){s.c_w('s_scOpen','',0);}}}return e"),s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),s.getVisitNum=new Function("tp","c","c2","var s=this,e=new Date,cval,cvisit,ct=e.getTime(),d;if(!tp){tp='m';}if(tp=='m'||tp=='w'||tp=='d'){eo=s.endof(tp),y=eo.getTime();e.setTime(y);}else {d=tp*86400000;e.setTime(ct+d);}if(!c){c='s_vnum';}if(!c2){c2='s_invisit';}cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisit){if(str){e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {return 'unknown visit number';}}else {if(str){str++;k=cval.substring(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {s.c_w(c,e.getTime()+'&vn=1',e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return 1;}}"),s.dimo=new Function("m","y","var d=new Date(y,m+1,0);return d.getDate();"),s.endof=new Function("x","var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);if(x=='m'){d=s.dimo(t.getMonth(),t.getFullYear())-t.getDate()+1;}else if(x=='w'){d=7-t.getDay();}else {d=1;}t.setDate(t.getDate()+d);return t;"),s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;"),s.getTimeBetweenEvents=new Function("v1","v1fl","v2","v2fl","cn","e","fmt","rv","var s=this,v1p=false,v2p=false,v1a=s.split(v1,','),v2a=s.split(v2,','),rva=rv?s.split(rv,','):[],t1,t2='',d=new Date(),x=new Date();cn=cn?cn:'s_tbe';fmt=fmt?fmt:'f';e=e?e:0;for(var i=0;i<rva.length;++i){if(s.inList(rva[i],s.events,',')){x.setDate(x.getDate()-1);s.c_w(cn,'',x);return'';}}t1=s.c_r(cn);x.setTime(x.getTime()+e*86400000);for(var i=0;i<v1a.length&&!v1p;++i){v1p=s.inList(v1a[i],s.events,',');}for(var i=0;i<v2a.length&&!v2p;++i){v2p=s.inList(v2a[i],s.events,',');}if(v1a.length==1&&v2a.length==1&&v1==v2){if(v1p&&v2p){s.c_w(cn,d.getTime(),e?x:0);if(t1){t2=(d.getTime()-t1)/1000;}}}else{if(v1p&&(v1fl=='l'||!t1)){s.c_w(cn,d.getTime(),e?x:0);}if(v2p&&t1){if(v2fl=='f'){x.setDate(x.getDate()-1);s.c_w(cn,'',x);}t2=(d.getTime()-t1)/1000;}}return t2?s.fmt_t2(t2,fmt):'';"),s.fmt_t2=new Function("t","fmt","if(fmt=='d'){return t/86400;}else if(fmt=='h'){return t/3600;}else if(fmt=='m'){return t/60;}else if(fmt=='s'){return t;}else{var td=86400,th=3600,tm=60,r=5,u,un;if(t>td){u=td;un='days';}else if(t>th){u=th;un='hours';}else if(t>tm){r=2;u=tm;un='minutes';}else{r=.2;u=1;un='seconds';}t=t*r/u;return(Math.round(t)/r)+' '+un;}"),s.visitorNamespace="footlocker",s.trackingServer=trackingServer,s.trackingServerSecure=trackingSecureServer,AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.ADB={})}("undefined"!=typeof self?self:this,function(e){var t={};(function(){var j;!function(e){if(void 0===y)var y={};if(void 0===a)var a={};if(void 0===t)var t={};if(t.radio||(t.radio={}),t.plugin||(t.plugin={}),void 0===i)var i={};i.clock||(i.clock={}),function(){"use strict";function d(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function s(e,t){return e<<t|e>>>32-t}function o(e,t,i,a,r,n){return d(s(d(d(t,e),d(a,n)),r),i)}function p(e,t,i,a,r,n,s){return o(t&i|~t&a,e,t,r,n,s)}function u(e,t,i,a,r,n,s){return o(t&a|i&~a,e,t,r,n,s)}function _(e,t,i,a,r,n,s){return o(t^i^a,e,t,r,n,s)}function g(e,t,i,a,r,n,s){return o(i^(t|~a),e,t,r,n,s)}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var i,a,r,n,s,o=1732584193,l=-271733879,c=-1732584194,h=271733878;for(i=0;i<e.length;i+=16)l=g(l=g(l=g(l=g(l=_(l=_(l=_(l=_(l=u(l=u(l=u(l=u(l=p(l=p(l=p(l=p(r=l,c=p(n=c,h=p(s=h,o=p(a=o,l,c,h,e[i],7,-680876936),l,c,e[i+1],12,-389564586),o,l,e[i+2],17,606105819),h,o,e[i+3],22,-1044525330),c=p(c,h=p(h,o=p(o,l,c,h,e[i+4],7,-176418897),l,c,e[i+5],12,1200080426),o,l,e[i+6],17,-1473231341),h,o,e[i+7],22,-45705983),c=p(c,h=p(h,o=p(o,l,c,h,e[i+8],7,1770035416),l,c,e[i+9],12,-1958414417),o,l,e[i+10],17,-42063),h,o,e[i+11],22,-1990404162),c=p(c,h=p(h,o=p(o,l,c,h,e[i+12],7,1804603682),l,c,e[i+13],12,-40341101),o,l,e[i+14],17,-1502002290),h,o,e[i+15],22,1236535329),c=u(c,h=u(h,o=u(o,l,c,h,e[i+1],5,-165796510),l,c,e[i+6],9,-1069501632),o,l,e[i+11],14,643717713),h,o,e[i],20,-373897302),c=u(c,h=u(h,o=u(o,l,c,h,e[i+5],5,-701558691),l,c,e[i+10],9,38016083),o,l,e[i+15],14,-660478335),h,o,e[i+4],20,-405537848),c=u(c,h=u(h,o=u(o,l,c,h,e[i+9],5,568446438),l,c,e[i+14],9,-1019803690),o,l,e[i+3],14,-187363961),h,o,e[i+8],20,1163531501),c=u(c,h=u(h,o=u(o,l,c,h,e[i+13],5,-1444681467),l,c,e[i+2],9,-51403784),o,l,e[i+7],14,1735328473),h,o,e[i+12],20,-1926607734),c=_(c,h=_(h,o=_(o,l,c,h,e[i+5],4,-378558),l,c,e[i+8],11,-2022574463),o,l,e[i+11],16,1839030562),h,o,e[i+14],23,-35309556),c=_(c,h=_(h,o=_(o,l,c,h,e[i+1],4,-1530992060),l,c,e[i+4],11,1272893353),o,l,e[i+7],16,-155497632),h,o,e[i+10],23,-1094730640),c=_(c,h=_(h,o=_(o,l,c,h,e[i+13],4,681279174),l,c,e[i],11,-358537222),o,l,e[i+3],16,-722521979),h,o,e[i+6],23,76029189),c=_(c,h=_(h,o=_(o,l,c,h,e[i+9],4,-640364487),l,c,e[i+12],11,-421815835),o,l,e[i+15],16,530742520),h,o,e[i+2],23,-995338651),c=g(c,h=g(h,o=g(o,l,c,h,e[i],6,-198630844),l,c,e[i+7],10,1126891415),o,l,e[i+14],15,-1416354905),h,o,e[i+5],21,-57434055),c=g(c,h=g(h,o=g(o,l,c,h,e[i+12],6,1700485571),l,c,e[i+3],10,-1894986606),o,l,e[i+10],15,-1051523),h,o,e[i+1],21,-2054922799),c=g(c,h=g(h,o=g(o,l,c,h,e[i+8],6,1873313359),l,c,e[i+15],10,-30611744),o,l,e[i+6],15,-1560198380),h,o,e[i+13],21,1309151649),c=g(c,h=g(h,o=g(o,l,c,h,e[i+4],6,-145523070),l,c,e[i+11],10,-1120210379),o,l,e[i+2],15,718787259),h,o,e[i+9],21,-343485551),o=d(o,a),l=d(l,r),c=d(c,n),h=d(h,s);return[o,l,c,h]}function c(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function h(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function t(e){return c(l(h(e),8*e.length))}function i(e,t){var i,a,r=h(e),n=[],s=[];for(n[15]=s[15]=void 0,16<r.length&&(r=l(r,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^r[i],s[i]=1549556828^r[i];return a=l(n.concat(h(t)),512+8*t.length),c(l(s.concat(a),640))}function a(e){var t,i,a="0123456789abcdef",r="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=a.charAt(t>>>4&15)+a.charAt(15&t);return r}function r(e){return unescape(encodeURIComponent(e))}function n(e){return t(r(e))}function f(e){return a(n(e))}function m(e,t){return i(r(e),r(t))}function v(e,t){return a(m(e,t))}function e(e,t,i){return t?i?m(t,e):v(t,e):i?n(e):f(e)}y.md5=e}(),function(){"use strict";var e={startsWith:function(e,t){return 0==e.indexOf(t)}};y.StringUtils=e}(),function(){"use strict";var r={clone:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},merge:function(e,t){var i=r.clone(e);for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return i},append:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}};y.ObjectUtils=r}(),function(){"use strict";function l(e){if(null==e)return!0;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return!1;return!0}function i(e,t){if("string"!=typeof e||"string"!=typeof t)return NaN;var i=e.split("."),a=t.split(".");if(!l(i)||!l(a))return NaN;for(var r=Math.max(i.length,a.length),n=0;n<r;++n){var s=null!=i[n]?i[n]:"0",o=null!=a[n]?a[n]:"0";if(s=Number(s),(o=Number(o))<s)return 1;if(s<o)return-1}return 0}var e={isGreaterThan:function(e,t){return 0<i(e,t)},isGreaterThanEqual:function(e,t){return 0<=i(e,t)},isLessThan:function(e,t){return i(e,t)<0},isLessThanEqual:function(e,t){return i(e,t)<=0},isSame:function(e,t){return 0===i(e,t)},isDifferent:function(e,t){return 0!==i(e,t)}};y.VersionUtils=e}(),function(e){"use strict";function t(e,t,i){this.fn=e,this.ctx=t,this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(t),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var t=this;!function i(){var e=t._queue.shift();e?t._runCommand(e,function(){t._isSuspended||i()}):t._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function i(){e.run(),null!=t&&t.call(a)}var a=this;if(0==this._lastTs)i();else{var r=(new Date).getTime(),n=r-this._lastTs;this._lastTs=r,n<this._delay?setTimeout(i,this._delay-n):i()}},e.radio.CommandQueue=t}(t),function(e){"use strict";function s(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function n(e,t){if(e===t)return!0;for(var i=(e||"").split(s.SEPARATOR),a=(t||"").split(s.SEPARATOR),r=!0,n=0;n<i.length;n++)r=r&&(i[n]===s.WILDCARD||i[n]===a[n]);return r}s.WILDCARD="*",s.SEPARATOR=":",s.prototype.toString=function(){return"<channel: "+this._name+">"},s.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(a,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},s.prototype.on=function(e,t,i){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:i}))},s.prototype.off=function(e,t,i){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!i)return void(this._listeners={});if(e)this._removeListener(e,t,i);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,i)}},s.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&n(t,e.name))for(var i=this._listeners[t].slice(0),a=0;a<i.length;a++){var r=i[a];r.fn.call(r.ctx,e)}},s.prototype.comply=function(e,t,i){this._isShutDown||(this._commands[e]={cmd:t,ctx:i})},s.prototype.command=function(e,t){if(!this._isShutDown){var i=this._commands[e];if(!i)return void this._logger.warn(a,"#command > No command handler for: "+e);i.cmd.call(i.ctx,t)}},s.prototype.reply=function(e,t,i){this._isShutDown||(this._requests[e]={fn:t,ctx:i})},s.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(a,"#request > No request handler for: "+e),null)}},s.prototype._removeListener=function(e,t,i){t="function"==typeof t?t:null;var a=this._listeners[e];if(a){if(!a.length||null==t&&!i)return void delete this._listeners[e];for(var r=0;r<a.length;r++){var n=a[r];null!==t&&t!==n.fn||i&&i!==n.ctx||this._listeners[e].splice(r,1)}}};var a="radio::Channel";e.radio.Channel=s}(t),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var i=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new i(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(t),function(){"use strict";function e(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}t.extend=e}(),function(e){"use strict";function t(){}t.prototype.write=function(){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(t),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(t),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(t),function(e){"use strict";function t(){this._logWriter=new i}function n(e){return e<10?"00"+e:e<100?"0"+e:""+e}var i=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,a,t)},t.prototype.warn=function(e,t){this._log(e,s,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,i){if(t==o||this._enabled){var a="",r=new Date;a+="["+r.toTimeString()+"."+n(r.getMilliseconds())+"] ["+t+"] ",a+="["+e+"] "+i,this._logWriter.write(a)}};var a="INFO",r="DEBUG",s="WARN",o="ERROR";e.Logger=t}(t),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+i.SEPARATOR+this._eventName},e.Trigger=t}(t),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(t),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},t.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var a,r,n=!1;for(r in this._events)if(e===r){n=!0;break}if(n){for(a=this._events[r].length-1;0<=a;a--){var s=this._events[r][a];t===s.cb&&i===s.ctx&&this._events[r].splice(a,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,i;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var a=this._events[t].slice(0),r=a.length;for(i=0;i<r;i++)a[i].cb.call(a[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,i;if(e){for(i in this._events)if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;0<=t;t--){this._events[i][t].ctx===e&&this._events[i].splice(t,1)}this._events[i].length||delete this._events[i]}}else this._events={}},e.EventDispatcher=t}(t),function(e){"use strict";function t(){}function i(e,t){this.url=e||null,this.method=t,this._xmlhttp=null}function n(){n.__super__.constructor.call(this),this._connection=null}var s=e.Event,a=e.EventDispatcher;t.GET="GET",n.RESPONSE="response",n.INSTANCE="instance",e.extend(n,a),n.prototype.close=function(){this.removeAllListeners(null)},n.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},n.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var i=new window.XMLHttpRequest;"withCredentials"in i&&(t=i).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var a={},r=a[n.INSTANCE]=this;t.onload=function(){if(t.status&&400<=parseInt(t.status,10))return this.onerror();a[n.RESPONSE]=t.responseText,r.dispatchEvent(new s(s.SUCCESS,a))},t.onerror=function(){r.dispatchEvent(new s(s.ERROR,a))}}return t},n.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[n.RESPONSE]="",(t[n.INSTANCE]=this).dispatchEvent(new s(s.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=i,e.URLLoader=n}(t),function(){"use strict";var t="2.2.1.229",e="1bf77a",i={getVersion:function(){return"js-"+t+"-"+e},getMajor:function(){return i.getNumberAtPosition(0)},getMinor:function(){return i.getNumberAtPosition(1)},getMicro:function(){return i.getNumberAtPosition(2)},getPatch:function(){return i.getNumberAtPosition(3)},getBuild:function(){return e},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};a.Version=i}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(a),function(){"use strict";function e(){this.debugLogging=!1}a.HeartbeatConfig=e}(),function(e){"use strict";function t(){}t.prototype.onError=function(){},e.HeartbeatDelegate=t}(a),function(e){"use strict";function t(){}t.prototype.configure=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(t),function(e){"use strict";function t(e,t,i,a){this.trigger=e,this.action=i,this.plugin=t,this._paramMappings={},this.mergeParams(a)}var a=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var i=new a(e,t);this._paramMappings.hasOwnProperty(i.getKeyName())&&delete this._paramMappings[i.getKeyName()]},e.plugin.Behaviour=t}(t),function(e){"use strict";function t(e,t,i){this._pluginName=e,this._key=t,this._paramName=i||e+a.SEPARATOR+t}var a=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+a.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(t),function(e){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new t(this._logger),this._dataChannel=this._radio.channel(r),this._ctrlChannel=this._radio.channel(o)}var a=e.Event,t=e.radio.Radio,n=e.radio.Channel,s=e.plugin.Behaviour;i.ERROR="error",i.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},i.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},i.prototype.pluginExists=function(e){return!!this._plugins[e]},i.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},i.prototype.on=function(e,t,i,a){this._dataChannel.on(e+n.SEPARATOR+t,i,a)},i.prototype.off=function(e,t,i,a){var r=e&&t?e+n.SEPARATOR+t:null;this._dataChannel.off(r,i,a)},i.prototype.trigger=function(e){var t=e.name,i=this._behaviours[t];if(i){var a,r,n,s,o,l={},c={};for(a=0;a<i.length;a++)if(s=(n=i[a]).getParams())for(r=0;r<s.length;r++)l[(o=s[r]).getPluginName()]=l[o.getPluginName()]||[],o.key in l[o.getPluginName()]||l[o.getPluginName()].push(o.getKey());for(var h in l)l.hasOwnProperty(h)&&(c[h]=this.request(h,l[h]));for(a=0;a<i.length;a++){var d={_behaviour:n=i[a],_eventData:e.data||{}};if(s=n.getParams()){for(r=0;r<s.length;r++)d[(o=s[r]).getParamName()]=c[o.getPluginName()]?c[o.getPluginName()][o.getKey()]:null;this.command(n.plugin.getName(),n.action,d)}}}this._dataChannel.trigger(e)},i.prototype.request=function(e,t){var i=this._plugins[e];return i&&t&&0!=t.length?i.resolveData(t):null},i.prototype.raise=function(e){this._errorInfo=e;var t=new a(i.ERROR,e);this._ctrlChannel.trigger(t)},i.prototype.getErrorInfo=function(){return this._errorInfo},i.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},i.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+n.SEPARATOR+t,i,e)},i.prototype.command=function(e,t,i){this._dataChannel.command(e+n.SEPARATOR+t,i)},i.prototype.registerBehaviour=function(e,t,i,a){var r=e.getName(),n=new s(e,t,i,a);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(n)};var r="data_channel",o="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=i}(t),function(e,t){"use strict";function i(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new a}var a=e.Logger,r=e.Trigger,n=e.Event,s=t.ErrorInfo;i.INITIALIZED="initialized",i.prototype.configure=function(){},i.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new s("Invalid state.","Plugin already destroyed."))},i.prototype.setup=function(){this._trigger(i.INITIALIZED),this._isInitialized=!0},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},i.prototype.enable=function(){this._isEnabled=!0,this._enabled()},i.prototype.disable=function(){this._isEnabled=!1,this._disabled()},i.prototype.getName=function(){return this._name},i.prototype.getLogger=function(){return this._logger},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var i=0;i<e.length;i++){var a=e[i];this._dataResolver.hasOwnProperty(a)&&(t=t||{},"function"==typeof this._dataResolver[a]?t[a]=this._dataResolver[a].call(this):t[a]=this._dataResolver[a])}return t},i.prototype.toString=function(){return"<plugin: "+this._name+">"},i.prototype._enabled=function(){},i.prototype._disabled=function(){},i.prototype._teardown=function(){},i.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},i.prototype._trigger=function(e,t){var i=n.createFromTrigger(new r(this.getName(),e));i.data=t,this._pluginManager.trigger(i)},e.plugin.BasePlugin=i}(t,a),function(e){"use strict";function a(e,t,i){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==i?i:n,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var i=this;this._clock=window.setInterval(function(){i._onTick()},1e3*s)}a.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},a.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-i/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},a.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},t.prototype.createTimer=function(e,t,i){this._timers[e]=new a(e,t,i)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#resumeTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!0,t&&i.reset())},t.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#pauseTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!1,t&&i.reset())},t.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(1<t.interval&&this._logger.debug(r,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=n&&t.repeatCount--):this.destroyTimer(t.name))}};var r="service.clock::TimerManager",n=-1,s=.25,i=1e3*s;e.clock.TimerDescriptor=a,e.clock.TimerManager=t}(i),function(e,t,i){"use strict";function a(e){if(a.__super__.constructor.call(this,o),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=i.clock.TimerManager,s=t.StringUtils,n=e.plugin.BasePlugin;e.extend(a,n),a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,h,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},a.prototype._teardown=function(){this._timerManager.destroy()},a.prototype._cmdCreate=function(e){var t=e[_]||v;this._timerManager.createTimer(e[p],e[u],t)},a.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[f])},a.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[f])},a.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},a.prototype.onTick=function(e,t,i){e+=".tick";var a={};a[p]=e,a[u]=t,a[g]=i,this._trigger(e,a)},a.prototype._setupDataResolver=function(){var n={},t=this._timerManager;n[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var a=e[i];if(t=t||{},s.startsWith(a,m)){var r=a.split(m+".");0<r.length&&(t[a]=n[m].call(this,r[1]))}}return t}};var o="service.clock",l="create",c="pause",h="resume",d="destroy",p="name",u="interval",_="repeat_count",g="tick",f="reset",m="is_paused",v=-1;i.clock.ClockService=a}(t,y,i),function(e,t,i){"use strict";function a(e,t){if(this._logger=new r,this._pluginManager=new n(this._logger),this._pluginManager.addPlugin(new s(this._logger)),t)for(var i=0;i<t.length;i++)this._pluginManager.addPlugin(t[i]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,n=e.plugin.PluginManager,s=t.clock.ClockService;a.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(o,"Instance is destroyed.")},a.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var o="Heartbeat";i.Heartbeat=a}(t,i,a),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=t),e.ADB.va||(e.ADB.va=a),e.ADB.va.utils||(e.ADB.va.utils=y),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(){"use strict";var e={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};t.AssetType=e}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(){"use strict";function e(){this.debugLogging=!1}t.VideoPlayerPluginConfig=e}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},
t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,o),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var a=e.plugin.ParamMapping,r=e.Trigger,n=e.plugin.BasePlugin,s=t.VideoPlayerPluginConfig;e.extend(i,n),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof s))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype._cmdVideoIdleStart=function(){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},i.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(g),this._trigger(f),e.isInAd&&(this._trigger(T),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(E),this._isTrackingAd=!0),e.isInChapter&&this._trigger(C),this._trigger(b)),this._videoIdle=!1},i.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(g),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(f)}},i.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},i.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(u),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},i.prototype.beginReporting=function(){this._logger.info(this._logTag,"#beginReporting()"),this._canProcess()&&this._startSessionIfNeeded("beginReporting")&&this._trigger(F)},i.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(b),this._startPlayheadTimer())},i.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()){this._stopPlayheadTimer();var e={};e[Y]=!1,this._isPaused=!0,this._trigger(k,e)}},i.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(D))},i.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(P),this._startPlayheadTimer())},i.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(N))},i.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(M),this._startPlayheadTimer())},i.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var i={};i[j]=e,(t=void 0===t||!!t)?this._trigger(m,i):(this._trigger(v),this._trigger(_,i))}},i.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(y,e)},i.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(C)},i.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(O)},i.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(V)},i.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(T),this._isTrackingAdBreak=!0)},i.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(A),this._isTrackingAdBreak=!1)},i.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(E),this._isTrackingAd=!0)},i.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(S),this._isTrackingAd=!1)},i.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(w),this._isTrackingAd=!1)},i.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(R)},i.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[H]=d,t[U]=e,this._trigger(B,t)}},i.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[H]=h,t[U]=e,this._trigger(B,t)}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,L),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,x),this,"handleVideoIdleResume",[new a(l,"ad.isInAdBreak","isInAdBreak"),new a(l,"ad.isInAd","isInAd"),new a(l,"chapter.isInChapter","isInChapter")])},i.prototype._setupDataResolver=function(){function i(){return l.video||(l.video=c._delegate.getVideoInfo(),c._logger.info(c._logTag,"Data from delegate > VideoInfo: "+l.video)),l.video}function a(){return l.ad||(l.ad=c._delegate.getAdInfo(),c._logger.info(c._logTag,"Data from delegate > AdInfo: "+l.ad)),l.ad}function r(){return l.pod||(l.pod=c._delegate.getAdBreakInfo(),c._logger.info(c._logTag,"Data from delegate > AdBreakInfo: "+l.pod)),l.pod}function n(){return l.chapter||(l.chapter=c._delegate.getChapterInfo(),c._logger.info(c._logTag,"Data from delegate > ChapterInfo: "+l.chapter)),l.chapter}function s(){return l.qos||(l.qos=c._delegate.getQoSInfo(),c._logger.info(c._logTag,"Data from delegate > QoSInfo: "+l.qos)),l.qos}var o={},l={},c=this;o["video.id"]=function(){var e=i(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving video.id: "+t),t},o["video.name"]=function(){var e=i(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving video.name: "+t),t},o["video.length"]=function(){var e=i(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving video.length: "+t),t},o["video.playerName"]=function(){var e=i(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving video.playerName: "+t),t},o["video.mediaType"]=function(){var e=i(),t=e?e.mediaType:null;return c._logger.debug(c._logTag,"Resolving video.mediaType: "+t),t},o["video.streamType"]=function(){var e=i(),t=e?e.streamType:null;return c._logger.debug(c._logTag,"Resolving video.streamType: "+t),t},o["video.playhead"]=function(){var e=i(),t=e?e.playhead:NaN;return c._logger.debug(c._logTag,"Resolving video.playhead: "+t),t},o["video.resumed"]=function(){var e=i(),t=!!e&&e.resumed;return c._logger.debug(c._logTag,"Resolving video.resumed: "+t),t},o["video.playheadStalled"]=function(){return this._playheadStalled},o["pod.name"]=function(){var e=r(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving pod.name: "+t),t},o["pod.playerName"]=function(){var e=r(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving pod.playerName: "+t),t},o["pod.position"]=function(){var e=r(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving pod.position: "+t),t},o["pod.startTime"]=function(){var e=r(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving pod.startTime: "+t),t},o["ad.isInAd"]=function(){var e=null!=a();return c._logger.debug(c._logTag,"Resolving ad.isInAd: "+e),e},o["ad.isInAdBreak"]=function(){var e=null!=r();return c._logger.debug(c._logTag,"Resolving ad.isInAdBreak: "+e),e},o["ad.id"]=function(){var e=a(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving ad.id: "+t),t},o["ad.name"]=function(){var e=a(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving ad.name: "+t),t},o["ad.length"]=function(){var e=a(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving ad.length: "+t),t},o["ad.position"]=function(){var e=a(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving ad.position: "+t),t},o["ad.granularTracking"]=function(){var e=a(),t=!!e&&e.granularTracking;return c._logger.debug(c._logTag,"Resolving ad.granularTracking: "+t),t},o["ad.trackingInterval"]=function(){var e=K;return c._logger.debug(c._logTag,"Resolving ad.trackingInterval: "+e),e},o["chapter.isInChapter"]=function(){var e=null!=n();return c._logger.debug(c._logTag,"Resolving chapter.isInChapter: "+e),e},o["chapter.name"]=function(){var e=n(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving chapter.name: "+t),t},o["chapter.length"]=function(){var e=n(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving chapter.length: "+t),t},o["chapter.position"]=function(){var e=n(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving chapter.position: "+t),t},o["chapter.startTime"]=function(){var e=n(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving chapter.startTime: "+t),t},o["qos.bitrate"]=function(){var e=s(),t=e?e.bitrate:NaN;return c._logger.debug(c._logTag,"Resolving qos.bitrate: "+t),t},o["qos.fps"]=function(){var e=s(),t=e?e.fps:NaN;return c._logger.debug(c._logTag,"Resolving qos.fps: "+t),t},o["qos.droppedFrames"]=function(){var e=s(),t=e?e.droppedFrames:NaN;return c._logger.debug(c._logTag,"Resolving qos.droppedFrames: "+t),t},o["qos.startupTime"]=function(){var e=s(),t=e?1e3*e.startupTime:NaN;return c._logger.debug(c._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;l={};for(var t=null,i=0;i<e.length;i++){var a=e[i];(t=t||{})[a]=o.hasOwnProperty(a)?o[a].call(this):null}return t}},i.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(k)))},i.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(b)))},i.prototype._startPlayheadTimer=function(){var i=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval(function(){if(i._canProcess()){var e=i._dataResolver(["ad.isInAd","video.playhead"]);if(i._isTrackingAdBreak)i._playheadStalled&&i._trackExitStall();else{var t=e["video.playhead"];t!=i._previousPlayhead?i._trackExitStall():0<=i._previousPlayhead&&t==i._previousPlayhead&&++i._stalledPlayheadCount==z&&i._trackPlayheadStall(),t!=i._previousPlayhead&&0<t&&!i._contentStarted&&(i._isPaused||i._isBuffering||i._isSeeking||(i._logger.info(i._logTag,"#_playheadTimer playhead progress to: "+t),i._trigger(I),i._contentStarted=!0)),i._previousPlayhead=t}}},q))},i.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},i.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},i.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var o="player",l=o,c="adobe-heartbeat",h="sourceErrorExternal",d="sourceErrorSDK",p="video_load",u="video_unload",_="video_session_end",g="video_start",f="video_resume",m="video_complete",v="video_skip",y="timed_metadata",b="play",k="pause",I="content_start",T="adbreak_start",A="adbreak_complete",E="ad_start",S="ad_complete",w="ad_skip",D="buffer_start",P="buffer_complete",N="seek_start",M="seek_complete",C="chapter_start",O="chapter_complete",V="chapter_skip",R="bitrate_change",B="track_error",L="video_idle_start",x="video_idle_resume",F="video_begin_reporting",j="callback",Y="filter_report",H="source",U="error_id",q=1001,K=1,z=2;t.VideoPlayerPlugin=i}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function a(e,t,i,a,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+i,this._logger=r,this._isDestroyed=!1,this._createTimer(i,a),this._installHandlers()}var i=e.Event;a.KEY_NAME="name",a.KEY_INTERVAL="interval",a.KEY_RESET="reset",a.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[a.KEY_NAME]=r+"."+this._name,t[a.KEY_RESET]=e,this._pluginManager.command(n,l,t)},a.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[a.KEY_NAME]=r+"."+this._name,t[a.KEY_RESET]=e,this._pluginManager.command(n,o,t)},a.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[a.KEY_NAME]=r+"."+this._name,this._pluginManager.command(n,c,e)}},a.prototype.setInterval=function(e){var t=h+"."+r+"."+this._name,i=this._pluginManager.request(n,[t])[t];this.pause(!0),this._createTimer(this._name,e),i||this.resume(!0)},a.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(a.KEY_RESET)&&(t=e[a.KEY_RESET]),this.resume(t)},a.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(a.KEY_RESET)&&(t=e[a.KEY_RESET]),this.pause(t)},a.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))},a.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(n,r+"."+this._name+".tick",this._onTick,this)},a.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},a.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var i={};i[a.KEY_NAME]=r+"."+this._name,i[a.KEY_INTERVAL]=this._interval,this._pluginManager.command(n,s,i)};var r="heartbeat",n="service.clock",s="create",o="pause",l="resume",c="destroy",h="is_paused";t.clock.Timer=a}(e.ADB.core,t),function(e,t){"use strict";function a(e,t,i){a.__super__.constructor.call(this,e,t,n,o,i)}var i=e.Event,r=t.clock.Timer;e.extend(a,r),a.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");s<t?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(s)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(o)},a.prototype._getSettings=function(){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new i(l))},a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)};var n="check_status",s=600,o=180,l="clock:check_status.tick",c="clock:check_status.get_settings",h="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=a}(e.ADB.core,t),function(e,t){"use strict";function a(e,t,i){a.__super__.constructor.call(this,e,t,r,n,i),this._doNotOverrideInterval=!1}var i=t.clock.Timer;e.extend(a,i),a.prototype._onCheckStatusComplete=function(e){var t=e.data[s];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(n)},a.prototype._onUpdateReportingInterval=function(e){var t=e.data[s];if(this._doNotOverrideInterval=!!e.data[o],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(n)},a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(s,function(){return this._interval},this)};var r="reporting",n=10,s="reporting_interval",o="do_not_override_interval",l="reporting:update_interval",c="net:check_status_complete";t.clock.ReportingTimer=a}(e.ADB.core,t),function(e,t){"use strict";function a(e,t,i){a.__super__.constructor.call(this,e,t,r,n,i)}var i=t.clock.Timer;e.extend(a,i);var r="idle",n=1800;t.clock.IdleTimer=a}(e.ADB.core,t),function(e,t){"use strict";function a(e,t,i){a.__super__.constructor.call(this,e,t,r,n,i)}var i=t.clock.Timer;e.extend(a,i);var r="flush_filter",n=.25;t.clock.FlushFilterTimer=a}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!i)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new n(e,t,i),this._checkStatusTimer=new a(e,t,i),this._flushFilterTimer=new r(e,t,i),this._idleTimer=new s(e,t,i)}var a=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,n=t.clock.ReportingTimer,s=t.clock.IdleTimer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=i}(e.ADB.core,t),function(e,t){"use strict";function a(e,t){this.value=e,this.hint=t}function i(e){this.realm=e,this.data={}}a.HINT_SHORT="short",i.prototype.setField=function(e,t,i){this.data[e]=new a(t,i)},i.prototype._createAccessor=function(t,i,a){var r=this;return function(e){return arguments.length&&(r[t]=e,r.setField(i,arguments[0],a)),r[t]}},t.model.Dao=i,t.model.DaoField=a}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&e instanceof i){var t=arguments[0];this.adId(t.adId()),this.sid(t.sid()),this.resolver(t.resolver()),this.podId(t.podId()),this.podPosition(t.podPosition()),this.podOffset(t.podOffset()),this.podName(t.podName()),this.adLength(t.adLength()),this.adName(t.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var a=t.model.Dao;e.extend(i,a),t.model.AdDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&e instanceof i){var t=arguments[0];this.reportSuiteId(t.reportSuiteId()),this.trackingServer(t.trackingServer()),this.ssl(t.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var a=t.model.Dao,r=t.model.DaoField;e.extend(i,a),t.model.AdobeAnalyticsDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&e instanceof i){var t=arguments[0];this.id(t.id()),this.sid(t.sid()),this.name(t.name()),this.position(t.position()),this.length(t.length()),this.offset(t.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var a=t.model.Dao;e.extend(i,a),t.model.ChapterDao=i}(e.ADB.core,t),function(e,t){"use strict";function r(e){if(r.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&e instanceof r){var t=arguments[0];this.type(t.type()),this.name(t.name()),this.videoId(t.videoId()),this.publisher(t.publisher()),this.length(t.length());var i=t.adData()?new n(t.adData()):null;this.adData(i);var a=t.chapterData()?new s(t.chapterData()):null;this.chapterData(a)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var i=t.model.Dao,n=t.model.AdDao,s=t.model.ChapterDao;e.extend(r,i),r.TYPE_AD="ad",r.TYPE_MAIN_CONTENT="main",t.model.AssetDao=r}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&e instanceof i){var t=arguments[0];this.type(t.type()),this.duration(t.duration()),this.playhead(t.playhead()),this.id(t.id()),this.source(t.source()),this.ts(t.ts()),this.prevTs(t.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var a=t.model.Dao;e.extend(i,a),i.EVENT_TYPE_AA_START="aa_start",i.EVENT_TYPE_AA_AD_START="aa_ad_start",i.EVENT_TYPE_START="start",i.EVENT_TYPE_RESUME="resume",i.EVENT_TYPE_CHAPTER_START="chapter_start",i.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",i.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",i.EVENT_TYPE_PLAY="play",i.EVENT_TYPE_PAUSE="pause",i.EVENT_TYPE_STALL="stall",i.EVENT_TYPE_BUFFER="buffer",i.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",i.EVENT_TYPE_ERROR="error",i.EVENT_TYPE_COMPLETE="complete",i.EVENT_TYPE_SKIP="skip",i.EVENT_TYPE_END="end",t.model.EventDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&e instanceof i){var t=arguments[0];this.bitrate(t.bitrate()),this.fps(t.fps()),this.droppedFrames(t.droppedFrames()),this.startupTime(t.startupTime()),this.isStartupTimeOverridden=t.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var a=t.model.Dao;e.extend(i,a),t.model.QoSDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&e instanceof i){var t=arguments[0];this.ovp(t.ovp()),this.sdk(t.sdk()),this.channel(t.channel()),this.playerName(t.playerName()),this.libVersion(t.libVersion()),this.apiLevel(t.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var a=t.model.Dao;e.extend(i,a);var r="unknown";t.model.ServiceProviderDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&e instanceof i){var t=arguments[0];this.sessionId(t.sessionId())}else this.sessionId(null)}var a=t.model.Dao;e.extend(i,a),t.model.SessionDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&e instanceof i){var t=arguments[0];this.type(t.type())}else this.type(null)}var a=t.model.Dao;e.extend(i,a),t.model.StreamDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&e instanceof i){var t=arguments[0];this.analyticsVisitorId(t.analyticsVisitorId()),this.marketingCloudVisitorId(t.marketingCloudVisitorId()),this.visitorId(t.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var a=t.model.Dao;e.extend(i,a),t.model.UserDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&e instanceof i){var t=arguments[0];this.audienceManagerBlob(t.audienceManagerBlob()),this.audienceManagerLocationHint(t.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var a=t.model.Dao;e.extend(i,a),t.model.AudienceManagerDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i,a,r){this.eventData=new s,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(i),this.assetData=new o(e._assetData),this.streamData=new l(e._streamData),this.qosData=new c(e._qosData),this.cuserData=n.clone(e._cuserData),this.meta=a,this.callback=r,this.filterReport=!0}var n=e.ObjectUtils,s=t.model.EventDao,o=t.model.AssetDao,l=t.model.StreamDao,c=t.model.QoSDao;t.model.TrackItem=i}(e.ADB.va.utils,t),function(e,t){"use strict";function i(e,t,i,a,r,n){this.adobeAnalyticsData=e,this.userData=t,this.aamData=i,this.serviceProviderData=a,this.sessionData=r,this.eventData=new o(n.eventData),this.assetData=new l(n.assetData),this.streamData=new c(n.streamData),this.qosData=new h(n.qosData),this.cuserData=s.clone(n.cuserData),this.meta=s.clone(n.meta),this.callback=n.callback,this.filterReport=n.filterReport}var s=e.ObjectUtils,o=t.model.EventDao,l=t.model.AssetDao,c=t.model.StreamDao,h=t.model.QoSDao;t.model.CUserDao,t.model.Report=i}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(){},t.prototype.serializeDao=function(){},t.prototype.serializeMap=function(){},t.prototype.serializeNumber=function(){},t.prototype.serializeString=function(){},e.model.ISerializer=t}(t),function(e,t){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var l=t.model.Dao,n=t.model.DaoField,a=t.model.ISerializer;e.extend(i,a),i.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},i.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},i.prototype.serializeMap=function(e,t){
var i=[],a=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&i.push("s:"+a+":"+r+"="+window.encodeURIComponent(e[r]));return i.join("&")},i.prototype.serializeNumber=function(e,t,i,a){var r=s;return null==t||isNaN(t)?null:(a===n.HINT_SHORT&&(r=o),r+":"+i+":"+e+"="+Math.floor(t))},i.prototype.serializeString=function(e,t,i){return t?r+":"+i+":"+e+"="+window.encodeURIComponent(t):null},i.prototype._processDao=function(e){var t=[];for(var i in e.data)if(e.data.hasOwnProperty(i)){var a=e.data[i],r=a.value,n=a.hint,s=null,o=e.realm;if(null==r)continue;"number"==typeof r?s=this.serializeNumber(i,r,o,n):"string"==typeof r?s=this.serializeString(i,r,o,n):r instanceof l?s=this.serializeDao(r):this._logger.warn(c,"#_processDao() > Unable to serialize DAO. Field: "+i+". Value: "+r+"."),s&&t.push(s)}return t};var c="ah::QuerystringSerializer",s="l",o="h",r="s";t.model.QuerystringSerializer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}i.prototype.parse=function(){var e,t,i,a,r,n,s;window.DOMParser?n=(new window.DOMParser).parseFromString(this._data,"text/xml"):((n=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(this._data)),(s=parseInt(n.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=s),(s=parseInt(n.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=s),(s=parseInt(n.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(i=1==s),n.getElementsByTagName("trackingDisabled")[0]&&(a=1==(s=parseInt(n.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10))),n.getElementsByTagName("nielsenEnabled")[0]?r=1==(s=parseInt(n.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10)):r=!0;var o={};return o[c]=e,o[h]=t,o[d]=i,o[u]=a,o[p]=r,this._logger.debug(l,"#parse() > Obtained configuration settings."),o};var l="ah::SettingsParser",c="reporting_interval",h="check_status_interval",d="track_external_errors",p="nielsen_enabled",u="tracking_disabled";t.network.SettingsParser=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._beginReporting=!1,this._sendingRequest=!1,this._requestsQueue=[],this._quietMode=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new a(t),this._installEventListeners()}var o=e.Event,l=e.URLRequestMethod,c=e.URLRequest,h=e.URLLoader,d=t.network.SettingsParser,a=t.model.QuerystringSerializer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(p,"#destroy()"),this._uninstallEventListeners())},i.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(p,"#_onApiConfig(sb_server="+t[r]+", check_status_server="+t[n]+", publisher="+t[s]+", quiet_mode="+t[u]+", ssl="+t[_]+")"),this._trackingServer=this._updateRequestProtocol(t[r],t[_]),this._checkStatusServer=this._updateRequestProtocol(t[n],t[_]),this._publisher=t[s],this._quietMode=t[u],this._isConfigured=!0},i.prototype._onBeginReporting=function(){this._logger.debug(p,"#_onBeginReporting()"),this._beginReporting=!0,this._sendNextRequest(),this._onClockCheckStatusTick()},i.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var i=t[g];if(this._prevReportSent&&this._prevReportSent.eventData&&i.eventData&&this._prevReportSent.eventData.playhead==i.eventData.playhead&&this._prevReportSent.eventData.ts==i.eventData.ts&&this._prevReportSent.eventData.prevTs==i.eventData.prevTs&&this._prevReportSent.eventData.type==i.eventData.type)this._logger.debug(p,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r);else{this._prevReportSent=i;var a=this._serializer.serializeReport(i),r=this._trackingServer+"/?"+a.serializedOutput;this._processRequest(r,a.callback)}}else this._logger.warn(p,"#_onFilterReportAvailable() > Unable to send request: not configured.")},i.prototype._processRequest=function(e,t){this._requestsQueue.push({url:e,callback:t}),this._sendNextRequest()},i.prototype._sendNextRequest=function(){if(this._beginReporting)if(this._sendingRequest)this._logger.debug(p,"#_sendNextRequest() > Exiting as we are currently sending a request.");else{var e=this._requestsQueue.shift();if(e){this._sendingRequest=!0,this._logger.debug(p,"#_sendNextRequest() > "+e.url);var t=this,i=new h,a=function(){i.close(),e.callback&&e.callback.call(null),t._sendingRequest=!1,t._sendNextRequest()},r=function(){a()},n=function(){t._logger.warn(p,"#_onFilterReportAvailable() > Failed to send heartbeat report."),a()};if(!this._quietMode){i.addEventListener(o.SUCCESS,r,this),i.addEventListener(o.ERROR,n,this);var s=new c(e.url,l.GET);i.load(s)}}else this._logger.debug(p,"#_sendNextRequest() > Exiting as we have no requests to send.")}else this._logger.debug(p,"#_sendNextRequest() > Exiting as we have not started reporting.")},i.prototype._onClockCheckStatusTick=function(){function e(e){if(e.data){var t=new d(e.data.response,i._logger).parse();t?i._channel.trigger(new o(b,t)):i._logger.warn(p,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}s.close()}function t(){i._logger.warn(p,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),s.close()}if(this._isConfigured)if(this._publisher)if(this._beginReporting){var i=this,a=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),r=this._checkStatusServer+a+".xml?r="+(new Date).getTime(),n=new c(r,l.GET),s=new h;s.addEventListener(o.SUCCESS,e,this),s.addEventListener(o.ERROR,t,this),this._logger.debug(p,"#_onClockCheckStatusTick() > Get new settings from: "+r),s.load(n)}else this._logger.debug(p,"#_onClockCheckStatusTick() > Exiting as we have not started reporting.");else this._logger.warn(p,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(p,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},i.prototype._updateRequestProtocol=function(e,t){var i=e;return 0===i.indexOf("http://")?i=i.slice(7):0===i.indexOf("https://")&&(i=i.slice(8)),t?"https://"+i:"http://"+i},i.prototype._installEventListeners=function(){this._channel.on(f,this._onApiConfig,this),this._channel.on(m,this._onBeginReporting,this),this._channel.on(v,this._onFilterReportAvailable,this),this._channel.on(y,this._onClockCheckStatusTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var p="ah::Network",r="tracking_server",n="check_status_server",s="publisher",u="quiet_mode",_="ssl",g="report",f="api:config",m="api:video_begin_reporting",v="filter:data_available",y="clock:check_status.tick",b="net:check_status_complete";t.network.Network=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new n,this._installEventListeners()}function c(e){var t=[];return e&&e.forEach(function(e){e.eventData.type()==s.EVENT_TYPE_PAUSE||e.eventData.type()==s.EVENT_TYPE_STALL||e.eventData.type()==s.EVENT_TYPE_BUFFER?(!e.filterReport||e.eventData.duration()>b)&&t.push(e):t.push(e)}),t}function h(e){var t=-1,i=-1,a=[];return e.forEach(function(e){e.eventData.type()==s.EVENT_TYPE_START?e.assetData.type()==u.TYPE_MAIN_CONTENT?-1==t?t=a.push(e)-1:(e.eventData.prevTs(-1),a[t]=e):-1==i?i=a.push(e)-1:(e.eventData.prevTs(-1),a[i]=e):a.push(e)}),a}function d(i){var a=[];return i.forEach(function(e){if(e.eventData.type()==s.EVENT_TYPE_PLAY){if(e.eventData.duration()>y)a.push(e);else if(0==e.eventData.duration()&&e.assetData.type()==u.TYPE_MAIN_CONTENT){var t=r(i);t.indexOf(e)==t.length-1&&a.push(e)}}else a.push(e)}),a}function r(e){var t=[];return e.forEach(function(e){e.eventData.type()!=s.EVENT_TYPE_PLAY&&e.eventData.type()!=s.EVENT_TYPE_BUFFER&&e.eventData.type()!=s.EVENT_TYPE_START||t.push(e)}),t}var a=e.radio.Command,n=e.radio.CommandQueue,p=e.Event,s=t.model.EventDao,u=t.model.AssetDao;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(I,"#destroy()"),this._uninstallEventListeners(),this.clear())},i.prototype.clear=function(){this._logger.debug(I,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},i.prototype.flush=function(){this._workQueue.addCommand(new a(this._flushBufferReport,this))},i.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[f];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[],this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var a={};a[g]=!0,a[m]=1,this._channel.command(v,a)}}},i.prototype._flushBufferReport=function(){function e(e){if(e)for(var t=0;t<e.length;t++){var i=e[t],a=i.sessionData.sessionId();n._tsHistory[a]=n._tsHistory[a]||{};var r=i.eventData.type()+"."+(i.assetData.type()==u.TYPE_AD?i.assetData.adData().adId():i.assetData.videoId());n._tsHistory[a].hasOwnProperty(r)&&i.eventData.prevTs(n._tsHistory[a][r]),n._tsHistory[a][r]=i.eventData.ts()}}if(!this._isDestroyed){var n=this;for(var t in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(t)){var i=d(h(c(this._reportBuffer[t])));e(i);for(var a=0;a<i.length;a++){var r=i[a],s={};s[f]=r,this._channel.trigger(new p(_,s))}}this._reportBuffer={};var o=this._channel.request(k),l=this._tsHistory[o]||{};this._tsHistory={},this._tsHistory[o]=l,this._isBufferingInProgress=!1}},i.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new a(this._bufferReport,this,[t]))},i.prototype._onClockFlushFilterTick=function(){this.flush()},i.prototype._installEventListeners=function(){this._channel.on(o,this._onContextReportAvailable,this),this._channel.on(l,this._onClockFlushFilterTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var o="context:report_available",_="filter:data_available",l="clock:flush_filter.tick",g="reset",f="report",m="repeat_count",v="clock:flush_filter.resume",y=250,b=250,k="session_id",I="ah::ReportFilter";t.filter.ReportFilter=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=i}(e.ADB.va,t),function(e,t){"use strict";function i(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var a=t.model.Report;i.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new a(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=i}(e.ADB.core,t),function(e,t,i,a){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=pe,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new h,this._userData=new d,this._aamData=new p,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new b(this,this._logger),this._inputDataValidator=new k(function(e){this._logger.error(I,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new n(A,e))},this),this._trackExternalErrors=!0,this._installEventListeners()}var s=i.md5,o=i.ObjectUtils,n=e.Event,l=a.model.SessionDao,c=a.model.AdobeAnalyticsDao,h=a.model.ServiceProviderDao,d=a.model.UserDao,p=a.model.AudienceManagerDao,u=a.model.EventDao,_=a.model.AssetDao,g=a.model.StreamDao,f=a.model.QoSDao,m=a.model.AdDao,v=a.model.ChapterDao,y=a.model.TrackItem,b=a.context.ReportFactory,k=a.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(I,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(I,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(i)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(I,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(I,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(){this._logger.debug(I,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(I,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var i=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,a=new y(this,u.EVENT_TYPE_START,t.playhead,i,t._eventData[N]);this._sendHit(a)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var i=new y(this,u.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(I,"#_onApiVideoSessionEnd()");var t=e.data;if(this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var i=new y(this,u.EVENT_TYPE_END,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(I,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var i=new y(this,u.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiVideoSkip=function(e){this._logger.debug(I,"#_onApiVideoSkip()");var t=e.data;if(this._checkCall("_onApiVideoSkip")){var i=new y(this,u.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(I,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiPause=function(e){this._logger.debug(I,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=t.playheadStalled?u.EVENT_TYPE_STALL:u.EVENT_TYPE_PAUSE,a=new y(this,i,t.playhead,null,t._eventData[N]);t._eventData.hasOwnProperty(M)&&(a.filterReport=t._eventData[M]),this._sendHit(a)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(I,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiAdBreakStart=function(e){this._logger.debug(I,"#_onApiAdBreakStart()");var t=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._updateLastInbandItemToBuffering())},r.prototype._onApiAdBreakComplete=function(e){this._logger.debug(I,"#_onApiAdBreakComplete()");var t=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._restoreLastInbandItem())},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){var i=new m;i.adId(t.adId),i.adName(t.adName),i.adLength(t.adLength),i.resolver(t.podPlayerName),i.podId(s(this._assetData.videoId())+"_"+t.podPosition),i.podPosition(t.adPosition+""),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i),this._assetData.type(_.TYPE_AD),this._updateQoSInfo(t);var a=o.merge(t.metaVideo,t.metaAd);a=t.metaNielsen?o.merge(a,t.metaNielsen):a,a=t.metaAdNielsen?o.merge(a,t.metaAdNielsen):a;var r=new y(this,u.EVENT_TYPE_START,t.playhead,a,t._eventData[N]);if(this._sendHit(r),this._restoreLastInbandItem(),t.adGranularTracking){var n=t.adTrackingInterval?t.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(n,!0)}}},r.prototype._onApiAdComplete=function(e){this._logger.debug(I,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(I,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[N]);this._sendHit(i),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiAdSkip=function(e){this._logger.debug(I,"#_onApiAdSkip()");var t=e.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(I,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var i=new v;i.id(s(this._assetData.videoId())+"_"+t.chapterPosition),i.name(t.chapterName),i.length(t.chapterLength),i.position(t.chapterPosition),i.offset(t.chapterOffset),i.sid(this._generateSessionId()),this._assetData.chapterData(i),this._updateQoSInfo(t);var a=o.merge(t.metaVideo,t.metaChapter),r=new y(this,u.EVENT_TYPE_CHAPTER_START,t.playhead,a,t._eventData[N]);r.assetData.adData(null),r.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(I,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(I,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiChapterSkip=function(e){this._logger.debug(I,"#_onApiChapterSkip()");var t=e.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(I,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(I,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===T){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_ERROR,0,null,t._eventData[N]);i.eventData.id(t._eventData.error_id),i.eventData.source(t._eventData.source),this._sendHit(i)}}else this._logger.warn(I,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(I,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id),i.eventData.source(t.source),this._sendHit(i)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(I,"#_onApiQuantumEnd(interval="+this._channel.request(w)+")");var t=e.data;if(this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var i=this._lastInBandItem;if(i){this._updateQoSInfo(t);var a=new y(this,i.eventData.type(),t.playhead,i.meta,i.callback);a.filterReport=i.filterReport,this._sendHit(a,!0)}}},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[V],this._reportingInterval=t[R],this._reportingInterval||(this._reportingInterval=pe),this._logger.debug(I,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(){var e=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(e),this._logger.debug(I,"#_resetSessionId(new sessionId="+e+")")},r.prototype._installEventListeners=function(){this._channel.on(L,this._onApiAnalyticsStart,this),this._channel.on(x,this._onApiAnalyticsAdStart,this),this._channel.on(F,this._onApiVideoLoad,this),this._channel.on(j,this._onApiVideoUnload,this),this._channel.on(Y,this._onApiVideoStart,this),this._channel.on(H,this._onApiVideoComplete,this),this._channel.on(U,this._onApiVideoSkip,this),this._channel.on(q,this._onApiVideoResume,this),this._channel.on(K,this._onApiVideoSessionEnd,this),this._channel.on(z,this._onApiAdBreakStart,this),this._channel.on(W,this._onApiAdBreakComplete,this),this._channel.on(Q,this._onApiAdStart,this),this._channel.on(G,this._onApiAdComplete,this),this._channel.on(J,this._onApiAdSkip,this),this._channel.on(X,this._onApiPlay,this),this._channel.on(Z,this._onApiPause,this),this._channel.on($,this._onApiBufferStart,this),this._channel.on(ee,this._onApiChapterStart,this),this._channel.on(te,this._onApiChapterComplete,this),this._channel.on(ie,this._onApiChapterSkip,this),this._channel.on(ne,this._onApiBitrateChange,this),this._channel.on(ae,this._onApiTrackError,this),this._channel.on(re,this._onApiTrackInternalError,this),this._channel.on(se,this._onApiQuantumEnd,this),this._channel.on(le,this._onNetworkCheckStatusComplete,this),this._channel.on(P,this._onResetSessionId,this),this._channel.reply(D,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(I,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new g,this._qosData=new f,this._sessionData=new l,this._assetData=new _,this._cuserData=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(I,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(I,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateReportingInterval=function(e,t){var i={};i[B]=!!t,i[R]=e,this._channel.trigger(new n(ce,i))},
r.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,i=(new Date).getTime(),a=t.assetData.type()===_.TYPE_AD||e.assetData.type()===_.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),n=Math.abs(i-t.eventData.ts()),s=Math.abs(r-n),o=n;he<o?(this._logger.warn(I," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+o+")exceeds 10mins"),o=0):t.eventData.type()==u.EVENT_TYPE_PLAY&&!a&&!this._doNotOverrideEventDuration&&de<s&&(o=Math.min(r,n),this._logger.warn(I," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+o+" as calculated error delta ("+s+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(o),t.eventData.ts(i),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==u.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());var t=new y(this,u.EVENT_TYPE_BUFFER,e,null,null);t.assetData.adData(null),t.assetData.type(_.TYPE_MAIN_CONTENT),this._lastInBandItem=t},r.prototype._restoreLastInbandItem=function(){if(null!=this._stashedLastInBandItem){var e=null;this._stashedLastInBandItem.eventData.type()==u.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==_.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null));var t=new y(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback);t.filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=t,this._stashedLastInBandItem=null}},r.prototype._flushLastInbandItem=function(e){if(this._lastInBandItem){this._updateQoSInfo(e);var t=new y(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback);this._sendHit(t,!0)}},r.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var i={};if(i[C]=t,this._channel.trigger(new n(oe,i)),t.eventData.type()==u.EVENT_TYPE_START||t.eventData.type()==u.EVENT_TYPE_PLAY||t.eventData.type()==u.EVENT_TYPE_PAUSE||t.eventData.type()==u.EVENT_TYPE_STALL||t.eventData.type()==u.EVENT_TYPE_BUFFER){var a={};a[O]=!0,this._channel.command(E,a)}},r.prototype._sendHit=function(e,t){switch(e.eventData.type()){case u.EVENT_TYPE_START:case u.EVENT_TYPE_PLAY:case u.EVENT_TYPE_PAUSE:case u.EVENT_TYPE_STALL:case u.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==u.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case u.EVENT_TYPE_COMPLETE:case u.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==u.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==_.TYPE_MAIN_CONTENT){this._lastInBandItem=null,this._stashedLastInBandItem=null;var i={};i[O]=!0,this._channel.command(S,i)}else e.assetData.type()==_.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(_.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case u.EVENT_TYPE_CHAPTER_START:case u.EVENT_TYPE_CHAPTER_COMPLETE:case u.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==u.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==u.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var I="ah::Context",T="sourceErrorSDK",A="error",E="clock:reporting.resume",S="clock:reporting.pause",w="reporting_interval",D="session_id",P="reset_session_id",N="callback",M="filter_report",C="report",O="reset",V="track_external_errors",R="reporting_interval",B="do_not_override_interval",L="api:aa_start",x="api:aa_ad_start",F="api:video_load",j="api:video_unload",Y="api:video_start",H="api:video_complete",U="api:video_skip",q="api:video_resume",K="api:video_session_end",z="api:adbreak_start",W="api:adbreak_complete",Q="api:ad_start",G="api:ad_complete",J="api:ad_skip",X="api:play",Z="api:pause",$="api:buffer_start",ee="api:chapter_start",te="api:chapter_complete",ie="api:chapter_skip",ae="api:track_error",re="api:track_internal_error",ne="api:bitrate_change",se="api:quantum_end",oe="context:report_available",le="net:check_status_complete",ce="reporting:update_interval",he=6e5,de=2e3,pe=10;a.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(){"use strict";function e(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=i,this.sdk=i,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var i="unknown";t.AdobeHeartbeatPluginConfig=e}(),function(e){"use strict";function t(){}t.prototype.onError=function(){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,i){"use strict";function a(e){a.__super__.constructor.call(this,f),this._radio=new l(this._logger),this._channel=this._radio.channel(A),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new u(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,n=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,h=t.Version,d=i.context.Context,p=i.filter.ReportFilter,u=i.network.Network,_=i.clock.Clock,g=i.AdobeHeartbeatPluginConfig;e.extend(a,s),a.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof g))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",i={};i[oe]=this._config.trackingServer,i[le]=t,i[ce]=this._config.publisher,i[he]=this._config.quietMode,i[de]=this._config.ssl,this._channel.trigger(new r(fe,i)),this._isConfigured=!0},a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._channel.on(E,this._onError,this),this._clock=new _(this._pluginManager,this._channel,this._logger),this._channel.command(Ye),this._channel.trigger(new r(Qe)),this._channel.on(ue,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},a.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},a.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):a.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},a.prototype._cmdAnalyticsError=function(){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(E,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._cmdAnalyticsStart=function(e){this._canProcess()&&this._channel.trigger(new r(_e,e))},a.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(ge,e))},a.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ve,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(me,e)),this._isTrackingSessionActive=!0)},a.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ve,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},a.prototype._cmdBeginReporting=function(){this._canProcess()&&this._channel.trigger(new r(Fe,{}))},a.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},a.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._filter.flush())},a.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},a.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(ke,e))},a.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(Ie,e))},a.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(Ne,e)),this._isPaused=!0,this._runIdleTimer(!0))},a.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ae,e))},a.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ee,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Se,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},a.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new r(De,e))},a.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Me,e)),this._isBuffering=!0,this._runIdleTimer(!0))},a.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(Ne,e)):this._resumePlaybackIfPossible(e))},a.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ne,e)),this._isSeeking=!0,this._runIdleTimer(!0))},a.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ce,e))},a.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Oe,e))},a.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Ve,e))},a.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Le,e))},a.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(Re,e))},a.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(xe,e))},a.prototype._onCheckStatusComplete=function(e){if(this._canProcess()){var t=!1;e&&e.data&&e.data[pe]&&(t=e.data[pe]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled()}},a.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new r(Te,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(Z))},a.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[ne]=je,t[se]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(Be,t)),this._runReportingTimer(!1),this._trigger(E,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},a.prototype._runIdleTimer=function(e){var t={};t[re]=!0,e?this._channel.command(ze,t):this._channel.command(We,t)},a.prototype._runFlushFilterTimer=function(e){var t={};t[re]=!0,e?this._channel.command(qe,t):this._channel.command(Ke,t)},a.prototype._runReportingTimer=function(e){var t={};t[re]=!0,e?this._channel.command(He,t):this._channel.command(Ue,t)},a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new n(y,D),this,"handleVideoLoad",[new o(v,"rsid","rsid"),new o(v,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new n(y,P),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new n(y,te),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new n(y,N),this,"handleVideoSessionEnd",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(y,M),this,"handleVideoStart",[new o(y,"video.id","videoId"),new o(y,"video.name","videoName"),new o(y,"video.length","videoLength"),new o(y,"video.playhead","playhead"),new o(y,"video.playerName","playerName"),new o(y,"video.streamType","streamType"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"rsid","rsid"),new o(v,"tracking_server","trackingServer"),new o(v,"channel","channel"),new o(v,"meta.video.*","metaVideo"),new o(v,"ssl","useSsl"),new o(b,"meta","metaNielsen"),new o(m,"publisher","publisher"),new o(m,"sdk","sdk"),new o(m,"ovp","ovp"),new o(m,"version","version"),new o(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new n(y,O),this,"handleVideoComplete",[new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,V),this,"handleVideoSkip",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,C),this,"handleVideoResume",[new o(y,"video.id","videoId"),new o(y,"video.name","videoName"),new o(y,"video.length","videoLength"),new o(y,"video.playhead","playhead"),new o(y,"video.playerName","playerName"),new o(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new n(y,R),this,"handlePlay",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,B),this,"handlePause",[new o(y,"video.playhead","playhead"),new o(y,"video.playheadStalled","playheadStalled"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,x),this,"handleAdBreakStart",[new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,F),this,"handleAdBreakComplete",[new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,j),this,"handleAdStart",[new o(y,"video.playhead","playhead"),new o(y,"ad.id","adId"),new o(y,"ad.name","adName"),new o(y,"ad.length","adLength"),new o(y,"ad.position","adPosition"),new o(y,"ad.granularTracking","adGranularTracking"),new o(y,"ad.trackingInterval","adTrackingInterval"),new o(y,"pod.name","podName"),new o(y,"pod.playerName","podPlayerName"),new o(y,"pod.position","podPosition"),new o(y,"pod.startTime","podSecond"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"meta.video.*","metaVideo"),new o(v,"meta.ad.*","metaAd"),new o(b,"meta","metaNielsen"),new o(b,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new n(y,Y),this,"handleAdComplete",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,H),this,"handleAdSkip",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,U),this,"handleBufferStart",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,q),this,"handleBufferComplete",[new o(y,"video.playhead","playhead"),new o(y,"video.playheadStalled","playheadStalled"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,K),this,"handleSeekStart",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(y,z),this,"handleSeekComplete",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAd","isInAd"),new o(y,"ad.id","adId"),new o(y,"ad.position","adPosition"),new o(y,"pod.playerName","podPlayerName"),new o(y,"pod.position","podPosition"),new o(y,"chapter.isInChapter","isInChapter"),new o(y,"chapter.position","chapterPosition"),new o(y,"chapter.name","chapterName"),new o(y,"chapter.length","chapterLength"),new o(y,"chapter.startTime","chapterOffset"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,W),this,"handleChapterStart",[new o(y,"video.playhead","playhead"),new o(y,"chapter.position","chapterPosition"),new o(y,"chapter.name","chapterName"),new o(y,"chapter.length","chapterLength"),new o(y,"chapter.startTime","chapterOffset"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"meta.video.*","metaVideo"),new o(v,"meta.chapter.*","metaChapter"),new o(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new n(y,Q),this,"handleChapterComplete",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,G),this,"handleChapterSkip",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,J),this,"handleBitrateChange",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,X),this,"handleTrackError"),this._pluginManager.registerBehaviour(new n(k,ie),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,L),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(k,ae),this,"handleIdleTick",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(m,ee),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(v,E),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new n(v,S),this,"handleAnalyticsStart",[new o(v,"vid","vid"),new o(v,"aid","aid"),new o(v,"mid","mid"),new o(v,"customerIDs","customerIDs"),new o(v,"blob","blob"),new o(v,"loc_hint","loc_hint"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(v,w),this,"handleAnalyticsAdStart",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")])},a.prototype._setupDataResolver=function(){var r={},e=this;r.version=function(){return h.getVersion()},r.api_level=function(){return h.getApiLevel()},r.tracking_server=function(){return e._config?e._config.trackingServer:null},r.publisher=function(){return e._config?e._config.publisher:null},r.quiet_mode=function(){return!!e._config&&e._config.quietMode},r.ovp=function(){return e._config?e._config.ovp:null},r.sdk=function(){return e._config?e._config.sdk:null},r.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},r.psdk_version=function(){return e._config?e._config.__psdkVersion:null},r.session_id=function(){return e._channel.request(I)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var a=e[i];(t=t||{})[a]=r.hasOwnProperty(a)?r[a].call(this):null}return t}},a.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new r(Pe,e)),this._runIdleTimer(!1))},a.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new r(T)),this._trigger($),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var f="adobe-heartbeat",m=f,v="adobe-analytics",y="player",b="nielsen",k="service.clock",I="session_id",T="reset_session_id",A="heartbeat-channel",E="error",S="aa_start",w="sc_ad_start",D="video_load",P="video_unload",N="video_session_end",M="video_start",C="video_resume",O="video_complete",V="video_skip",R="play",B="pause",L="content_start",x="adbreak_start",F="adbreak_complete",j="ad_start",Y="ad_complete",H="ad_skip",U="buffer_start",q="buffer_complete",K="seek_start",z="seek_complete",W="chapter_start",Q="chapter_complete",G="chapter_skip",J="bitrate_change",X="track_error",Z="video_idle_start",$="video_idle_resume",ee="quantum_close",te="video_begin_reporting",ie="heartbeat.reporting"+".tick",ae="heartbeat.idle"+".tick",re="reset",ne="source",se="error_id",oe="tracking_server",le="check_status_server",ce="publisher",he="quiet_mode",de="ssl",pe="tracking_disabled",ue="net:check_status_complete",_e="api:aa_start",ge="api:aa_ad_start",fe="api:config",me="api:video_load",ve="api:video_unload",ye="api:video_start",be="api:video_complete",ke="api:video_skip",Ie="api:video_resume",Te="api:video_session_end",Ae="api:adbreak_start",Ee="api:adbreak_complete",Se="api:ad_start",we="api:ad_complete",De="api:ad_skip",Pe="api:play",Ne="api:pause",Me="api:buffer_start",Ce="api:chapter_start",Oe="api:chapter_complete",Ve="api:chapter_skip",Re="api:track_error",Be="api:track_internal_error",Le="api:bitrate_change",xe="api:quantum_end",Fe="api:video_begin_reporting",je="sourceErrorHeartbeat",Ye="clock:check_status.resume",He="clock:reporting.resume",Ue="clock:reporting.pause",qe="clock:flush_filter.resume",Ke="clock:flush_filter.pause",ze="clock:idle.resume",We="clock:idle.pause",Qe="clock:check_status.get_settings";i.AdobeHeartbeatPlugin=a}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===i)var i={};!function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=i}(e.ADB.va,i),function(){"use strict";function e(){this.channel=t,this.debugLogging=!1}var t="";i.AdobeAnalyticsPluginConfig=e}(),function(e){"use strict";function t(){}t.prototype.onError=function(){},e.AdobeAnalyticsPluginDelegate=t}(i),function(e,t,i,a){"use strict";function r(e){this._aaPlugin=e}function n(e,t){if(n.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._appMeasurementBridge=new r(this),this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._appMeasurementReady=!1,this._beginReporting=!1,this._workQueue=new d(!0,T),this._inputDataValidator=new m(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(A,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var s=e.Trigger,o=e.plugin.BasePlugin,l=e.plugin.ParamMapping,c=e.radio.Channel,h=e.radio.Command,d=e.radio.CommandQueue,p=t.ErrorInfo,u=i.md5,_=i.StringUtils,g=i.ObjectUtils,f=a.AdobeAnalyticsPluginConfig,m=a.InputDataValidator;r.prototype.onAppMeasurementReady=function(){this._aaPlugin&&this._aaPlugin._onAppMeasurementReady()},r.prototype.release=function(){this._aaPlugin=null},e.extend(n,o),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady(
):this._appMeasurement.callbackWhenReadyToTrack(this._appMeasurementBridge,this._appMeasurementBridge.onAppMeasurementReady,[]),n.__super__.setup.call(this)},n.prototype.setVideoMetadata=function(e){this._videoMetadata=g.clone(e)},n.prototype.setAdMetadata=function(e){this._adMetadata=g.clone(e)},n.prototype.setChapterMetadata=function(e){this._chapterMetadata=g.clone(e)},n.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._appMeasurementBridge.release()},n.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):n.__super__._canProcess.call(this)},n.prototype._cmdVideoLoad=function(){this._errorInfo=null},n.prototype._cmdBeginReporting=function(){this._logger.debug(this._logTag,"#_cmdBeginReporting()"),this._beginReporting=!0,this._resumeWorkQueue()},n.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new h(this._executeOpen,this,[e]))},n.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new h(this._executeOpenAd,this,[e]))},n.prototype._cmdHeartbeatPluginError=function(){this._errorInfo||(this._errorInfo=new p("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},n.prototype._track=function(e){try{var t=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},n.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(var i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(t[i]=e.metaVideo[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(t[i]=e.metaNielsen[i]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0.0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var a={};a.contextData=t,"audio"===e.mediaType?(a.pev3=w,a.ms_a="1"):a.pev3=E,a.pe=e.isPrimetime?N:P,this._track(a);var r=this;setTimeout(function(){r._trigger(O,e)},0)}},n.prototype._executeOpenAd=function(e){var t=u(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var i={};for(a in e.metaVideo)e.metaVideo.hasOwnProperty(a)&&(i[a]=e.metaVideo[a]);for(a in e.metaAd)e.metaAd.hasOwnProperty(a)&&(i[a]=e.metaAd[a]);if(e.metaNielsen)for(var a in e.metaNielsen)e.metaNielsen.hasOwnProperty(a)&&(i[a]=e.metaNielsen[a]);i["a.contentType"]=e.streamType,i["a.media.name"]=e.videoId,i["a.media.playerName"]=e.playerName,i["a.media.channel"]=e.channel||"",i["a.media.vsid"]=e.sessionId,i["a.media.friendlyName"]=e.videoName||"",i["a.media.length"]=Math.floor(e.videoLength)||"0.0",i["a.media.ad.name"]=e.adId,i["a.media.ad.friendlyName"]=e.adName||"",i["a.media.ad.podFriendlyName"]=e.podName||"",i["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",i["a.media.ad.playerName"]=e.podPlayerName,i["a.media.ad.pod"]=t,i["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",i["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",i["a.media.ad.view"]=!0;var r={};r.contextData=i,"audio"===e.mediaType?(r.pev3=D,r.ms_a="1"):r.pev3=S,r.pe=e.isPrimetime?C:M,this._track(r);var n=this;setTimeout(function(){n._trigger(V,e)},0)}},n.prototype._setupDataResolver=function(){var r={},n=this;r.rsid=function(){return n._appMeasurement.account},r.tracking_server=function(){return n._appMeasurement.ssl&&n._appMeasurement.trackingServerSecure?n._appMeasurement.trackingServerSecure:n._appMeasurement.trackingServer},r.ssl=function(){return n._appMeasurement.ssl},r.vid=function(){return n._appMeasurement.visitorID},r.aid=function(){return n._appMeasurement.analyticsVisitorID},r.mid=function(){return n._appMeasurement.marketingCloudVisitorID},r.blob=function(){return n._appMeasurement.audienceManagerBlob},r.loc_hint=function(){return n._appMeasurement.audienceManagerLocationHint?parseInt(n._appMeasurement.audienceManagerLocationHint):""},r.customerIDs=function(){var e={},t=n._appMeasurement.visitor.getCustomerIDs();for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];if("object"==typeof a){for(var r in a)a.hasOwnProperty(r)&&("authState"==r?e[i+".as"]=a[r]:e[i+"."+r]=a[r]);e[i+".as"]||(e[i+".as"]="0")}}return e},r.channel=function(){return n._config?n._config.channel:null},r.meta=function(e){var t=e.split(".");if(t.length<2)return null;var i=t.shift();switch(e=t.join("."),i){case"video":return e==c.WILDCARD?n._videoMetadata:n._videoMetadata[e];case"ad":return e==c.WILDCARD?n._adMetadata:n._adMetadata[e];case"chapter":return e==c.WILDCARD?n._chapterMetadata:n._chapterMetadata[e];default:return null}},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var a=e[i];t=t||{},_.startsWith(a,"meta.")?t[a]=r.meta(a.split("meta.")[1]):t[a]=r.hasOwnProperty(a)?r[a].call(this):null}return t}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new s(k,R),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new s(k,x),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new s(k,B),this,"handleVideoStart",[new l(k,"video.id","videoId"),new l(k,"video.mediaType","mediaType"),new l(k,"video.streamType","streamType"),new l(k,"video.name","videoName"),new l(k,"video.length","videoLength"),new l(k,"video.playerName","playerName"),new l(k,"video.streamType","streamType"),new l(I,"is_primetime","isPrimetime"),new l(I,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(k,L),this,"handleAdStart",[new l(k,"video.id","videoId"),new l(k,"video.mediaType","mediaType"),new l(k,"video.streamType","streamType"),new l(k,"video.playhead","playhead"),new l(k,"video.playerName","playerName"),new l(k,"video.name","videoName"),new l(k,"video.length","videoLength"),new l(k,"ad.id","adId"),new l(k,"ad.length","adLength"),new l(k,"ad.position","adPosition"),new l(k,"ad.name","adName"),new l(k,"pod.name","podName"),new l(k,"pod.position","podPosition"),new l(k,"pod.playerName","podPlayerName"),new l(k,"pod.startTime","podSecond"),new l(I,"is_primetime","isPrimetime"),new l(I,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(y,"meta.ad.*","metaAd"),new l(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(I,A),this,"handleHeartbeatPluginError")},n.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"#_onAppMeasurementReady"),this._appMeasurementReady=!0,this._resumeWorkQueue()},n.prototype._resumeWorkQueue=function(){this._appMeasurementReady&&this._beginReporting&&(this._logger.debug(this._logTag,"#_resumeWorkQueue"),this._workQueue.resume())};var v="adobe-analytics",y=v,b="nielsen",k="player",I="adobe-heartbeat",T=2e3,A="error",E="video",S="videoAd",w="audio",D="audioAd",P="ms_s",N="msp_s",M="msa_s",C="mspa_s",O="aa_start",V="sc_ad_start",R="video_load",B="video_start",L="ad_start",x="video_begin_reporting";a.AdobeAnalyticsPlugin=n}(e.ADB.core,e.ADB.va,e.ADB.va.utils,i),function(e){"use strict";var t={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},i={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},a={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};e.VideoMetadataKeys=t,e.AudioMetadataKeys=i,e.AdMetadataKeys=a}(i),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=i)}(this),function(e,t){"use strict";function i(){this._processAction=!0,this._store={}}function c(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}i.prototype.setRuleName=function(e){this._ruleName=e},i.prototype.getRuleName=function(){return this._ruleName},i.prototype.setData=function(e,t){this._store[e]=t},i.prototype.getData=function(e){return this._store[e]},i.prototype.shouldProcessAction=function(){return this._processAction},i.prototype.stopProcessingAction=function(){this._processAction=!1},i.prototype.startProcessingAction=function(){this._processAction=!0},c.createContext=function(){return new i},c.createPredicate=function(e,t,i){return{fn:e,expectedValue:t,msg:i}},c.prototype.registerRule=function(e,t,i,a,r){this._rules.push({name:e,desc:t,preconditions:i,actions:a,scope:r})},c.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},c.prototype._handleFailure=function(e,t){this._logger.error(h,e.desc+" -  "+t.msg)},c.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},c.prototype.processRule=function(e,t){var i=!0,a=this._getRule(e);if(a){var r=a.scope;t||(t=c.createContext()),t.setRuleName(e);for(var n=!1,s=0;s<a.preconditions.length;++s){var o=a.preconditions[s];if(n=!!o.fn.call(r,t)!==o.expectedValue){this._handleFailure(a,o);break}}if(n)i=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(r,t),s=0;s<a.actions.length;++s){var l=a.actions[s];if(!t.shouldProcessAction()){this._logger.info(h,"Stopping actions for "+a.desc);break}l.call(r,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(r,t)}}else this._logger.warn(h,"No registered event found for ruleName "+e),i=!1;return i};var h="RuleEngine";t._RuleEngine=c}((j=this).ADB.core,j.ADB.va),function(e,t){"use strict";function r(e,t,i){this.taskFn=e,this.scope=t,this.interval=i,this.remainingInterval=i}function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}r.prototype.elapsedTime=function(e){this.remainingInterval-=e},r.prototype.shouldExecute=function(){return this.remainingInterval<=0},r.prototype.execute=function(){this.taskFn.call(this.scope)},i.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},i.prototype._runTasksForTime=function(e){var t=[],i=e-this._lastTickTime;this._lastTickTime=e;for(var a=0;a<this._tasks.length;){var r=this._tasks[a];r.elapsedTime(i),r.shouldExecute()?(t.push(r),this._tasks.splice(a,1)):++a}for(this._checkStopTimer(),a=0;a<t.length;++a)t[a].execute()},i.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},i.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(n,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval(function(){e._onTick()},a))},i.prototype._stopTimer=function(){this._timer&&(this._logger.info(n,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},i.prototype._checkStartTimer=function(){0<this._tasks.length&&this._startTimer()},i.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},i.prototype._removeTask=function(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return e.splice(i,1),!0;return!1},i.prototype.scheduleTask=function(e,t,i){if(this._logger.info(n,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");var a=new r(e,t,i);return this._tasks.push(a),this._checkStartTimer(),a},i.prototype.cancelTask=function(e){this._logger.info(n,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},i.prototype.pauseTask=function(e){this._logger.info(n,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},i.prototype.resumeTask=function(e){this._logger.info(n,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},i.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var n="TaskScheduler",a=250;t._TaskScheduler=i}(j.ADB.core,j.ADB.va),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(j.ADB.va),function(e){"use strict";function r(){this.data={}}var t=e.plugins.videoplayer.VideoInfo,i=e.plugins.videoplayer.AdBreakInfo,a=e.plugins.videoplayer.AdInfo,n=e.plugins.videoplayer.ChapterInfo,s=e.plugins.videoplayer.QoSInfo;r.MEDIAINFO_KEY_NAME="a.name",r.MEDIAINFO_KEY_VIDEOID="a.videoId",r.MEDIAINFO_KEY_ADID="a.adId",r.MEDIAINFO_KEY_LENGTH="a.length",r.MEDIAINFO_KEY_PLAYHEAD="a.playhead",r.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",r.MEDIAINFO_KEY_STREAMTYPE="a.streamType",r.MEDIAINFO_KEY_POSITION="a.position",r.MEDIAINFO_KEY_STARTTIME="a.startTime",r.MEDIAINFO_KEY_BITRATE="a.bitrate",r.MEDIAINFO_KEY_FPS="a.fps",r.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",r.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",r.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",r.prototype.setValue=function(e,t){this.data[e]=t},r.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},r.prototype.createVideoInfo=function(){var e=new t;return e.id=null!=this.getValue(r.MEDIAINFO_KEY_VIDEOID)?this.getValue(r.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(r.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(r.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(r.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(r.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(r.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(r.MEDIAINFO_KEY_STREAMTYPE):"",e},r.prototype.createAdBreakInfo=function(){var e=new i;return e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTTIME)?this.getValue(r.MEDIAINFO_KEY_STARTTIME):0,e},r.prototype.createAdInfo=function(){var e=new a;return e.id=null!=this.getValue(r.MEDIAINFO_KEY_ADID)?this.getValue(r.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e},r.prototype.createChapterInfo=function(){var e=new n;return e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTTIME)?this.getValue(r.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e},r.prototype.createQoSInfo=function(){var e=new s;return e.bitrate=null!=this.getValue(r.MEDIAINFO_KEY_BITRATE)?this.getValue(r.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(r.MEDIAINFO_KEY_FPS)?this.getValue(r.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(r.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(r.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(r.MEDIAINFO_KEY_STARTUPTIME):0,e},r.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var t=[r.MEDIAINFO_KEY_NAME,r.MEDIAINFO_KEY_VIDEOID,r.MEDIAINFO_KEY_ADID,r.MEDIAINFO_KEY_LENGTH,r.MEDIAINFO_KEY_PLAYHEAD,r.MEDIAINFO_KEY_STREAMTYPE,r.MEDIAINFO_KEY_MEDIATYPE,r.MEDIAINFO_KEY_POSITION,r.MEDIAINFO_KEY_STARTTIME,r.MEDIAINFO_KEY_BITRATE,r.MEDIAINFO_KEY_FPS,r.MEDIAINFO_KEY_DROPPEDFRAMES,r.MEDIAINFO_KEY_STARTUPTIME,r.MEDIAINFO_KEY_TIMEDMETADATA],i=0;i<t.length;++i){var a=t[i];if(this.getValue(a)!==e.getValue(a))return!1}return!0},e.MediaObject=r}(j.ADB.va),function(e){"use strict";function a(e,t){if(!t)throw new Error("Visitor instance cannot be NULL");this._visitor=t,this._logger=e,this._status=a.OPT_UNKNOWN,this._optInFetchPermissionsCallback=this._optInFetchPermissionsCallback.bind(this)}var r="PrivacyManager";a.prototype.getStatus=function(){return this._status},a.prototype.configure=function(e){this.reset(),this._callback=e,this._optIn=window.adobe&&window.adobe.optIn?window.adobe.optIn:void 0,this._optIn&&this._optIn.doesOptInApply?(this._logger.info(r,"OptIn service enabled"),this._waitingForOptInCallback=!0,this._optInMediaApproved=!1):this._logger.info(r,"OptIn service does not apply"),this._waitingForVisitorCallback=!0,this._visitorOptOut=!1,this._fetchVisitorOptOut(),this._fetchOptIn(),this._updateStatus()},a.prototype.reset=function(){this._unsubscribeOptIn(),this._status=a.OPT_UNKNOWN,this._callback=null},a.prototype._fetchVisitorOptOut=function(){this._logger.info(r,"Fetching Visitor.isOptedOut");try{var t=this;this._visitor.isOptedOut(function(e){t._logger.info(r,"Visitor.isOptedOut : "+e),t._waitingForVisitorCallback=!1,t._visitorOptOut=e,t._updateStatus()},void 0,!0)}catch(t){this._logger.warn(r,"Error fetching Visitor.isOptedOut"),this._waitingForVisitorCallback=!1}},a.prototype._fetchOptIn=function(){try{if(!this._optIn||!this._optIn.doesOptInApply)return;this._logger.info(r,"Fetching permissions from OptIn service"),this._optInListenerRegistered||(this._optIn.fetchPermissions(this._optInFetchPermissionsCallback,!0),this._optInListenerRegistered=!0)}catch(e){this._logger.warn(r,"Error fetching permissions from OptIn service"),this._waitingForOptInCallback=!1}},a.prototype._unsubscribeOptIn=function(){try{this._optIn&&this._optInListenerRegistered&&(this._optIn.off("complete",this._optInFetchPermissionsCallback),this._optInListenerRegistered=!1)}catch(e){this._logger.error(r,"Error unsubscribing from OptIn service")}},a.prototype._optInFetchPermissionsCallback=function(){this._waitingForOptInCallback=!1;var e=this._optIn.isApproved(this._optIn.Categories.ECID),t=this._optIn.isApproved(this._optIn.Categories.ANALYTICS),i=void 0===this._optIn.Categories.MEDIA_ANALYTICS||this._optIn.isApproved(this._optIn.Categories.MEDIA_ANALYTICS);this._optInMediaApproved=e&&t&&i,this._logger.info(r,"OptIn fetchPermissions ECID : "+e+" Analytics : "+t+" Media : "+i),this._updateStatus()},a.prototype._updateStatus=function(){if(!(this._waitingForVisitorCallback||this._optIn&&this._optIn.doesOptInApply&&this._waitingForOptInCallback)){var e=this._visitorOptOut||this._optIn&&this._optIn.doesOptInApply&&!this._optInMediaApproved,t=e?a.OPT_OUT:a.OPT_IN;if(this._status!==t){this._logger.info(r,"Privacy changed from "+this._status+" to "+t),this._status=t;var i=this;setTimeout(function(){try{i._callback&&i._callback(t)}catch(e){}},0)}}},a.OPT_OUT="optout",a.OPT_IN="optin",a.OPT_UNKNOWN="optunknown",e._PrivacyManager=a}(j.ADB.va),function(e,t){"use strict";function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function n(e){n.__super__.constructor.call(this),this._heartbeat=e}e.extend(i,t.plugins.aa.AdobeAnalyticsPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.ah.AdobeHeartbeatPluginDelegate),a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},a.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._onDelegateTrackingDisabled()},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(n,t.plugins.videoplayer.VideoPlayerPluginDelegate),n.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},n.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},n.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},n.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},n.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=i,t._MediaHeartbeatPluginDelegate=a,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=n}(j.ADB.core,j.ADB.va),function(e,i){"use strict";function a(e,t){a.__super__.constructor.call(this),this._heartbeat=e,this._logger=t,this._validator=new i.plugins.nielsen.MetadataValidator(t)}var t="MediaHeartbeatNielsenPluginDelegate",r={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};i.plugins.nielsen&&e.extend(a,i.plugins.nielsen.NielsenPluginDelegate),a.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},a.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(r.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},a.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},i.plugins.nielsen&&(i._NielsenObjectKey=r,i._NielsenPluginDelegate=a)}(j.ADB.core,j.ADB.va),function(e,a){"use strict";function t(){}function o(e,t,i){if(this._appMeasurement=i||j.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!e)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!t||"object"!=typeof t||!t.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=t,this._delegate=e,this._debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new r,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new v(this._logger),this._taskScheduler=new y(this._logger),this._privacyManager=new b(this._logger,this._appMeasurement.visitor),this._resetState(),this._setupRules()}var r=e.Logger,l=a.MediaObject,i=a.Heartbeat,n=a.HeartbeatConfig,s=a._ADBMediaHeartbeatDelegate,c=a.plugins.videoplayer.VideoPlayerPlugin,h=a.plugins.videoplayer.VideoPlayerPluginConfig,d=a._MediaHeartbeatVideoPlayerPluginDelegate,p=a.plugins.aa.AdobeAnalyticsPlugin,u=a.plugins.aa.AdobeAnalyticsPluginConfig,_=a._MediaAnalyticsPluginDelegate,g=a.plugins.ah.AdobeHeartbeatPlugin,f=a.plugins.ah.AdobeHeartbeatPluginConfig,m=a._MediaHeartbeatPluginDelegate,v=a._RuleEngine,y=a._TaskScheduler,b=a._PrivacyManager,k=a.utils.ObjectUtils,I=a.utils.VersionUtils;if(t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.MediaType={Video:"video",Audio:"audio"},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},o.VideoMetadataKeys=a.plugins.aa.VideoMetadataKeys,o.AudioMetadataKeys=a.plugins.aa.AudioMetadataKeys,o.AdMetadataKeys=a.plugins.aa.AdMetadataKeys,o.createMediaObject=function(e,t,i,a,r){var n=new l;n.setValue(l.MEDIAINFO_KEY_VIDEOID,t),n.setValue(l.MEDIAINFO_KEY_NAME,e),n.setValue(l.MEDIAINFO_KEY_LENGTH,i),n.setValue(l.MEDIAINFO_KEY_PLAYHEAD,0);var s=a||o.StreamType.VOD;return n.setValue(l.MEDIAINFO_KEY_STREAMTYPE,s),("string"!=typeof r||r!=o.MediaType.Video&&r!=o.MediaType.Audio)&&(r=o.MediaType.Video),n.setValue(l.MEDIAINFO_KEY_MEDIATYPE,r),n},o.createAdBreakObject=function(e,t,i){var a=new l;return a.setValue(l.MEDIAINFO_KEY_NAME,e),a.setValue(l.MEDIAINFO_KEY_POSITION,t),a.setValue(l.MEDIAINFO_KEY_STARTTIME,i),a},o.createAdObject=function(e,t,i,a){var r=new l;return r.setValue(l.MEDIAINFO_KEY_NAME,e),r.setValue(l.MEDIAINFO_KEY_ADID,t),r.setValue(l.MEDIAINFO_KEY_POSITION,i),r.setValue(l.MEDIAINFO_KEY_LENGTH,a),r},o.createChapterObject=function(e,t,i,a){var r=new l;return r.setValue(l.MEDIAINFO_KEY_NAME,e),r.setValue(l.MEDIAINFO_KEY_POSITION,t),r.setValue(l.MEDIAINFO_KEY_LENGTH,i),r.setValue(l.MEDIAINFO_KEY_STARTTIME,a),r},o.createQoSObject=function(e,t,i,a){var r=new l;return r.setValue(l.MEDIAINFO_KEY_BITRATE,e),r.setValue(l.MEDIAINFO_KEY_FPS,i),r.setValue(l.MEDIAINFO_KEY_DROPPEDFRAMES,a),r.setValue(l.MEDIAINFO_KEY_STARTUPTIME,t),r},o.createTimedMetadataObject=function(e){var t=new l;return t.setValue(l.MEDIAINFO_KEY_TIMEDMETADATA,e),t},o.version=function(){return a.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){this._logger.info(D,"#::trackSessionStart()");var i=v.createContext();i.setData(P,e),i.setData(V,this._cleanContextData(t)),this._processRule(S.SessionStart,i)},o.prototype.trackPlay=function(){this._logger.info(D,"#::trackPlay()"),this._processRule(S.Play)},o.prototype.trackPause=function(){this._logger.info(D,"#::trackPause()"),this._processRule(S.Pause)},o.prototype.trackComplete=function(){this._logger.info(D,"#::trackComplete()"),this._processRule(S.VideoComplete)},o.prototype.trackSessionEnd=function(){this._logger.info(D,"#::trackSessionEnd()"),this._processRule(S.SessionEnd)},o.prototype.trackError=function(e){this._logger.info(D,"#::trackError()");var t=v.createContext();t.setData(R,e),this._processRule(S.Error,t)},o.prototype.trackEvent=function(e,t,i){this._logger.info(D,"#::trackEvent() - "+e);var a,r=v.createContext();switch(e){case o.Event.AdBreakStart:r.setData(N,t),r.setData(V,this._cleanContextData(i)),a=S.AdBreakStart;break;case o.Event.AdBreakComplete:a=S.AdBreakComplete;break;case o.Event.AdStart:r.setData(M,t),r.setData(V,this._cleanContextData(i)),a=S.AdStart;break;case o.Event.AdComplete:a=S.AdComplete;break;case o.Event.AdSkip:a=S.AdSkip;break;case o.Event.SeekStart:a=S.SeekStart;break;case o.Event.SeekComplete:a=S.SeekComplete;break;case o.Event.ChapterStart:r.setData(C,t),r.setData(V,this._cleanContextData(i)),a=S.ChapterStart;break;case o.Event.ChapterComplete:a=S.ChapterComplete;break;case o.Event.ChapterSkip:a=S.ChapterSkip;break;case o.Event.BufferStart:a=S.BufferStart;break;case o.Event.BufferComplete:a=S.BufferComplete;break;case o.Event.BitrateChange:a=S.BitrateChange;break;case o.Event.TimedMetadataUpdate:a=S.TimedMetadataUpdate,r.setData(O,t);break;default:return void this._logger.error(D,"Incorrect event name.")}this._processRule(a,r)},a.plugins.nielsen){var T=a.MediaHeartbeatConfig;T.prototype.nielsenConfigKey=void 0,T.prototype.nielsenAppInfo=void 0;var A=a._NielsenObjectKey;o.MediaObjectKey.NielsenContentMetadata=A.NielsenContentMetadata,o.MediaObjectKey.NielsenAdMetadata=A.NielsenAdMetadata,o.MediaObjectKey.NielsenChannelMetadata=A.NielsenChannelMetadata,o.NielsenContentMetadataKeys=a.plugins.nielsen.ContentMetadataKeys,o.NielsenChannelMetadataKeys=a.plugins.nielsen.ChannelMetadataKeys,o.NielsenAdMetadataKeys=a.plugins.nielsen.AdMetadataKeys,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}o.prototype._setState=function(e,t){this._mediaState[e]=t},o.prototype._isInState=function(e){return this._mediaState[e]},o.prototype._isTrackingDisabled=function(){return this._mediaHeartbeatDisabled},o.prototype._isInSession=function(){return this._isInState(E.Session)},o.prototype._isInMedia=function(){return this._isInState(E.Media)},o.prototype._isInAd=function(){return this._isInState(E.Ad)},o.prototype._isInAdBreak=function(){return this._isInState(E.AdBreak)},o.prototype._isInChapter=function(){return this._isInState(E.Chapter)},o.prototype._isInPlay=function(){return this._isInState(E.PlayPause)},o.prototype._isInPause=function(){return!this._isInState(E.PlayPause)},o.prototype._isInBuffer=function(){return this._isInState(E.Buffer)},o.prototype._isInSeek=function(){return this._isInState(E.Seek)},o.prototype._isPlatformTrackingSupported=function(){return!this._appMeasurement.unsupportedBrowser},o.prototype._isAudioTrackingSupported=function(e){return e.getData(P).getValue(l.MEDIAINFO_KEY_MEDIATYPE)!==o.MediaType.Audio||I.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},o.prototype._isValidMediaObject=function(e){var t=e.getData(P);if(t&&t instanceof l){var i=t.getValue(o.MediaObjectKey.MediaResumed);null!=i&&"boolean"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var a=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);null!=a&&(("string"==typeof a||"number"==typeof a)&&!isNaN(a)||this._logger.warn(D,
"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds."));var r=t.getValue(o.MediaObjectKey.StandardMediaMetadata);return null!=r&&"object"!=typeof r&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isValidAdBreakObject=function(e){var t=e.getData(N);return t&&t instanceof l},o.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(N);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},o.prototype._isValidAdObject=function(e){var t=e.getData(M);if(t&&t instanceof l){var i=t.getValue(x);null!=i&&"boolean"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var a=t.getValue(o.MediaObjectKey.StandardAdMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isDifferentAdObject=function(e){var t=e.getData(M);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},o.prototype._isValidChapterObject=function(e){var t=e.getData(C);return t&&t instanceof l},o.prototype._isDifferentChapterObject=function(e){var t=e.getData(C);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},o.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(O);if(t&&t instanceof l){var i=t.getValue(l.MEDIAINFO_KEY_TIMEDMETADATA);return i&&"string"==typeof i}return!1},o.prototype._shouldAllowPlayerStateChange=function(){return!(this._isInState(E.AdBreak)&&!this._isInState(E.Ad))},o.prototype._didBeginReporting=function(){return this._isInState(E.Reporting)},o.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(D,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(S.Play))},o.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case S.SeekStart:case S.BufferStart:this._logger.info(D,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case S.SeekComplete:case S.BufferComplete:this._logger.info(D,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case S.Play:this._logger.info(D,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case S.Pause:this._logger.info(D,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case S.AdBreakStart:this._logger.info(D,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case S.Play:this._logger.info(D,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playUnhandledFromPrerollWaitTime=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case S.Pause:this._logger.info(D,"Received trackPause before first trackPlay."),this._prerollWaitEnabled=!1;break;case S.AdBreakStart:this._logger.info(D,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},o.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===S.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===S.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==S.AdStart||this._isInState(E.FPlayPause)||this._cmdPlay(e),this._prerollWaitEnabled||!this._playUnhandledFromPrerollWaitTime||t!==S.BufferComplete&&t!==S.SeekComplete&&t!==S.AdBreakComplete||this._isInState(E.FPlayPause)||this._isInState(E.Buffer)||this._isInState(E.Seek)||(this._logger.info(D,"Executing pending API:trackPlay. This case most likely happens tracking Preroll AdBreak without any Ads."),this._cmdPlay(e))},o.prototype._cmdConfigure=function(){this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat(),this._privacyManager.configure(this._onPrivacyChange.bind(this))},o.prototype._cmdBeginReporting=function(){this._playerPlugin&&this._playerPlugin.beginReporting(),this._setState(E.Reporting,!0)},o.prototype._cmdSessionStart=function(e){var t=e.getData(P),i=e.getData(V);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var a=t.getValue(o.MediaObjectKey.StandardMediaMetadata);a&&"object"==typeof a||(a=null);var r=t.getValue(o.MediaObjectKey.MediaResumed);"boolean"==typeof r&&(this._videoInfo.resumed=r);var n=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof n&&"number"!=typeof n||isNaN(n)||(this._prerollWaitTime=Number(n),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var s=this._prepareMetadata(a,i);s[B]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(s),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(E.Session,!0),this._setState(E.Media,!0)},o.prototype._destroyHeartbeat=function(e,t){e&&e.trackVideoUnload(),t&&t.destroy()},o.prototype._cmdVideoEnd=function(e){var t=e.getRuleName()===S.VideoComplete;if(this._isInState(E.Reporting)){var i=this,a=this._heartbeat,r=this._playerPlugin;this._playerPlugin.trackComplete(function(){i._destroyHeartbeat(r,a)},t)}else this._destroyHeartbeat(this._playerPlugin,this._heartbeat);this._setState(E.Media,!1)},o.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(D,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},o.prototype._cmdSessionEnd=function(){this._setState(E.Session,!1),this._resetState()},o.prototype._cmdDisableTracking=function(){this._logger.info(D,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},o.prototype._cmdBufferStart=function(){this._playerPlugin.trackBufferStart(),this._setState(E.Buffer,!0)},o.prototype._cmdBufferComplete=function(){this._isInState(E.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(E.Buffer,!1)},o.prototype._cmdSeekStart=function(){this._playerPlugin.trackSeekStart(),this._setState(E.Seek,!0)},o.prototype._cmdSeekComplete=function(){this._isInState(E.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(E.Seek,!1)},o.prototype._cmdPlay=function(){this._playerPlugin.trackPlay(),this._setState(E.PlayPause,!0),this._setState(E.FPlayPause,!0),this._playUnhandledFromPrerollWaitTime=!1},o.prototype._cmdPause=function(){this._playerPlugin.trackPause(),this._setState(E.PlayPause,!1),this._setState(E.FPlayPause,!0)},o.prototype._cmdAdBreakStart=function(e){var t=e.getData(N);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(E.AdBreak,!0)},o.prototype._cmdAdBreakComplete=function(){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(E.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(E.AdBreak,!1)},o.prototype._cmdAdStart=function(e){var t=e.getData(M),i=e.getData(V);this._currentAdObject=t,this._adInfo=t.createAdInfo();var a=t.getValue(x);"boolean"==typeof a&&(this._adInfo.granularTracking=a);var r=t.getValue(o.MediaObjectKey.StandardAdMetadata);r&&"object"==typeof r||(r=null);var n=this._prepareMetadata(r,i);this._aaPlugin.setAdMetadata(n),this._playerPlugin.trackAdStart(),this._setState(E.Ad,!0)},o.prototype._cmdAdComplete=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(E.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(E.Ad,!1)},o.prototype._cmdAdSkip=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(E.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(E.Ad,!1)},o.prototype._cmdChapterStart=function(e){var t=e.getData(C),i=e.getData(V);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();var a=this._prepareMetadata(null,i);this._aaPlugin.setChapterMetadata(a),this._playerPlugin.trackChapterStart(),this._setState(E.Chapter,!0)},o.prototype._cmdChapterComplete=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(E.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(E.Chapter,!1)},o.prototype._cmdChapterSkip=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(E.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(E.Chapter,!1)},o.prototype._cmdError=function(e){var t=e.getData(R);t||(t="unknown_error_id"),this._playerPlugin.trackVideoPlayerError(t)},o.prototype._cmdBitrate=function(){this._playerPlugin.trackBitrateChange()},o.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(O).getValue(l.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},o.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},o.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(S.SessionStart,"API:trackSessionStart",[v.createPredicate(this._isPlatformTrackingSupported,!0,w.ErrUnSupportedPlatform),v.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled),v.createPredicate(this._isInSession,!1,w.ErrInSession),v.createPredicate(this._isValidMediaObject,!0,w.ErrInvalidMediaObject),v.createPredicate(this._isAudioTrackingSupported,!0,w.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(S.SessionEnd,"API:trackSessionEnd",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(S.VideoComplete,"API:trackComplete",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(S.Error,"API:trackError",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(S.Play,"API:trackPlay",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(S.Pause,"API:trackPause",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),v.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),v.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(S.BufferStart,"API:trackEvent(BufferStart)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),v.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),v.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(S.BufferComplete,"API:trackEvent(BufferComplete)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),v.createPredicate(this._isInBuffer,!0,w.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(S.SeekStart,"API:trackEvent(SeekStart)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),v.createPredicate(this._isInSeek,!1,w.ErrInSeek),v.createPredicate(this._isInBuffer,!1,w.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(S.SeekComplete,"API:trackEvent(SeekComplete)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),v.createPredicate(this._isInSeek,!0,w.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(S.AdBreakStart,"API:trackEvent(AdBreakStart)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isValidAdBreakObject,!0,w.ErrInvalidAdBreakObject),v.createPredicate(this._isDifferentAdBreakObject,!0,w.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(S.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(S.AdStart,"API:trackEvent(AdStart)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),v.createPredicate(this._isValidAdObject,!0,w.ErrInvalidAdObject),v.createPredicate(this._isDifferentAdObject,!0,w.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(S.AdComplete,"API:trackEvent(AdComplete)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),v.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(S.AdSkip,"API:trackEvent(AdSkip)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),v.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(S.ChapterStart,"API:trackEvent(ChapterStart)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isValidChapterObject,!0,w.ErrInvalidChapterObject),v.createPredicate(this._isDifferentChapterObject,!0,w.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(S.ChapterComplete,"API:trackEvent(ChapterComplete)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(S.ChapterSkip,"API:trackEvent(ChapterSkip)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(S.BitrateChange,"API:trackEvent(BitrateChange)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(S.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._isValidTimedMetadataObject,!0,w.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this),this._ruleEngine.registerRule(S.DisableTracking,"Internal::DisableTracking",[v.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(S.BeginReporting,"Internal::BeginReporting",[v.createPredicate(this._isInSession,!0,w.ErrNotInSession),v.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),v.createPredicate(this._didBeginReporting,!1,w.ErrBeginReporting)],[this._cmdBeginReporting],this)},o.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new p(this._appMeasurement,new _(this));var e=new u;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},o.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new g(new m(this));var t=new f(this._config.trackingServer,e);t.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:"";var i=this._primetimeTVSDKVersion();i&&0<i.length&&(t.__primetime=!0,t.__psdkVersion=i),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},o.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new c(new d(this));var e=new h;e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},o.prototype._configureOtherPlugins=function(){if(a.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new a.plugins.nielsen.NielsenPlugin(new a._NielsenPluginDelegate(this,this._logger));var e=new a.plugins.nielsen.NielsenPluginConfig;e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}},o.prototype._configureHeartbeat=function(){var e=new n;e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new i(new s(this),this._plugins),this._heartbeat.configure(e)},o.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._privacyManager.reset(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=F,this._playReceived=!1,this._playUnhandledFromPrerollWaitTime=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},o.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(L):null},o.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(t[i]=a)}return t},o.prototype._prepareMetadata=function(e,t){var i={};if(t&&k.append(i,t),e){var a=this._cleanContextData(e);k.append(i,a)}return delete i[B],i},o.prototype._onDelegateError=function(e){this._logger.error(D,e.getMessage()+" | "+e.getDetails())},o.prototype._onDelegateTrackingDisabled=function(){this._processRule(S.SessionEnd),this._processRule(S.DisableTracking)},o.prototype._onPrivacyChange=function(e){this._logger.info(D,"#_onPrivacyChange: Privacy Status: "+e),e===b.OPT_IN?this._processRule(S.BeginReporting):e===b.OPT_OUT&&this._processRule(S.SessionEnd)};var E={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8,Reporting:9},S={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20,BeginReporting:21},w={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content.",ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrBeginReporting:"MediaHeartbeat has already started reporting."},D="MediaHeartbeat",P="key_media_object",N="key_adbreak_object",M="key_ad_object",C="key_chapter_object",O="key_timed_metadata_object",V="key_custom_metadata",R="key_error_id",B="a.media.streamType",L="a.__pttvsdkVersion",x="granular_ad_tracking",F=250;a._MediaHeartbeatRule=S,a._MediaHeartbeatErrorMessage=w,a.MediaHeartbeatDelegate=t,a.MediaHeartbeat=o,a.MediaHeartbeat._debugLogging=!1}(j.ADB.core,j.ADB.va),j.ADB||(j.ADB={}),j.ADB.core||(j.ADB.core=core),j.ADB.va||(j.ADB.va=va),j.ADB.va.plugins||(j.ADB.va.plugins={})}).call(t),e.va=t.ADB.va,e.core=t.ADB.core});