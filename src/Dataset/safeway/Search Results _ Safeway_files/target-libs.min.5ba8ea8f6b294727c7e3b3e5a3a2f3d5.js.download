window.Granite=window.Granite||{};
Granite.Sling={SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"};
(function(e,g){e.Util=function(){var e={patchText:function(c,b){if(b)if(g.isArray(b))for(var d=0;d<b.length;d++)c=c.replace("{"+d+"}",b[d]);else c=c.replace("{0}",b);return c},getTopWindow:function(){var c=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;c.parent&&c!==c.parent&&c.parent.location.href;)c=c.parent}catch(b){}return c},setIFrameMode:function(c){this.iFrameTopWindow=c||window},applyDefaults:function(){for(var c,b=arguments[0]||{},d=1;d<arguments.length;d++){c=arguments[d];
for(var h in c){var k=c[h];c.hasOwnProperty(h)&&void 0!==k&&(b[h]=null===k||"object"!==typeof k||k instanceof Array?k instanceof Array?k.slice(0):k:e.applyDefaults(b[h],k))}}return b},getKeyCode:function(c){return c.keyCode?c.keyCode:c.which}};return e}()})(Granite,jQuery);
(function(e,g,q,c){e.HTTP=function(){var b=null,d=/^(?:http|https):\/\/[^/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/,h=/[^\w-.~%:/?[\]@!$&'()*+,;=]/,k=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,n=!1,l={getSchemeAndAuthority:function(a){if(!a)return"";a=k.exec(a);return null===a?"":[a[1],a[3]].join("")},getContextPath:function(){return b},detectContextPath:function(){try{if(window.CQURLInfo)b=CQURLInfo.contextPath||
"";else{for(var a=document.getElementsByTagName("script"),f=0;f<a.length;f++){var c=d.exec(a[f].src);if(c){b=c[1];return}}b=""}}catch(u){}},externalize:function(a){try{0===a.indexOf("/")&&b&&0!==a.indexOf(b+"/")&&(a=b+a)}catch(f){}return a},internalize:function(a,f){if("/"===a.charAt(0))return b===a?"":b&&0===a.indexOf(b+"/")?a.substring(b.length):a;f||(f=document);f=l.getSchemeAndAuthority(f.location.href);var c=l.getSchemeAndAuthority(a);return f===c?a.substring(c.length+(b?b.length:0)):a},getPath:function(a){if(a)a=
l.removeParameters(a),a=l.removeAnchor(a);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;a=window.location.pathname}a=l.internalize(a);var b=a.indexOf(".",a.lastIndexOf("/"));-1!==b&&(a=a.substring(0,b));return a},removeAnchor:function(a){var b=a.indexOf("#");return 0<=b?a.substring(0,b):a},removeParameters:function(a){var b=a.indexOf("?");return 0<=b?a.substring(0,b):a},encodePathOfURI:function(a){for(var b=["?","#"],c=[a],d,r=0,m=b.length;r<m;r++)if(d=b[r],0<=a.indexOf(d)){c=
a.split(d);break}h.test(c[0])&&(c[0]=l.encodePath(c[0]));return c.join(d)},encodePath:function(a){a=encodeURI(a);a=a.replace(/%5B/g,"[").replace(/%5D/g,"]");a=a.replace(/\?/g,"%3F");return a=a.replace(/#/g,"%23")},handleLoginRedirect:function(){if(!n){n=!0;alert(e.I18n.get("Your request could not be completed because you have been signed out."));var a=g.getTopWindow().document.location;a.href=l.externalize("/")+"?resource\x3d"+encodeURIComponent(a.pathname+a.search+a.hash)}},getXhrHook:function(a,
b,d){b=b||"GET";return window.G_XHR_HOOK&&c.isFunction(G_XHR_HOOK)?(a={url:a,method:b},d&&(a.params=d),G_XHR_HOOK(a)):null},eval:function(a){"object"!==typeof a&&(a=c.ajax({url:a,type:"get",async:!1}));try{return eval("("+(a.body?a.body:a.responseText)+")")}catch(f){}return null}};return l}()})(Granite,Granite.Util,Granite.Sling,jQuery);
(function(e,g,q,c,b){g.I18n=function(){var d={},h="/libs/cq/i18n/dict.",k=".json",g=void 0,l=!1,a=null,f={},p=!1,u=function(a){if(p)return h+a+k;var m=b("html").attr("data-i18n-dictionary-src");return m?m.replace("{locale}",encodeURIComponent(a)).replace("{+locale}",a):h+a+k};f.LOCALE_DEFAULT="en";f.PSEUDO_LANGUAGE="zz";f.PSEUDO_PATTERN_KEY="_pseudoPattern_";f.init=function(a){a=a||{};this.setLocale(a.locale);this.setUrlPrefix(a.urlPrefix);this.setUrlSuffix(a.urlSuffix)};f.setLocale=function(a){a&&
(g=a)};f.getLocale=function(){b.isFunction(g)&&(g=g());return g||e.documentElement.lang||f.LOCALE_DEFAULT};f.setUrlPrefix=function(a){a&&(h=a,p=!0)};f.setUrlSuffix=function(a){a&&(k=a,p=!0)};f.getDictionary=function(a){a=a||f.getLocale();if(!d[a]){l=0===a.indexOf(f.PSEUDO_LANGUAGE);try{var m=b.ajax(u(a),{async:!1,dataType:"json"});d[a]=b.parseJSON(m.responseText)}catch(t){}d[a]||(d[a]={})}return d[a]};f.get=function(a,b,c){var m;var d=f.getDictionary();var t=l?f.PSEUDO_PATTERN_KEY:c?a+" (("+c+"))":
a;d&&(m=d[t]);m||(m=a);l&&(m=m.replace("{string}",a).replace("{comment}",c?c:""));return q.patchText(m,b)};f.getVar=function(a,b){return a?f.get(a,null,b):null};f.getLanguages=function(){if(!a)try{var d=c.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");b.each(d,function(a,b){b.title=f.getVar(b.language);b.title&&b.country&&"*"!==b.country&&(b.title+=" ("+f.getVar(b.country)+")")});a=d}catch(m){a={}}return a};f.parseLocale=function(a){if(!a)return null;var b=a.indexOf("_");0>b&&(b=
a.indexOf("-"));if(0>b){var c=a;b=null}else c=a.substring(0,b),b=a.substring(b+1);return{code:a,language:c,country:b}};return f}()})(document,Granite,Granite.Util,Granite.HTTP,jQuery);
(function(e,g){e.TouchIndicator=new function(){var e={visibility:"hidden",position:"absolute",width:"30px",height:"30px","-webkit-border-radius":"20px","border-radius":"20px",border:"5px solid orange","-webkit-user-select":"none","user-select":"none",opacity:"0.5","z-index":"2000","pointer-events":"none"},c={},b=[];return{debugWithMouse:!1,init:function(){var b=this;g(document).on("touchstart.touchindicator touchmove.touchindicator touchend.touchindicator",function(c){b.update(c.originalEvent.touches);
return!0});if(this.debugWithMouse)g(document).on("mousemove.touchindicator",function(c){c.identifer="fake";b.update([c]);return!0})},update:function(d){for(var h,k,n={},l=0;l<d.length;l++){var a=d[l];k=a.identifier;h=c[k];h||(h=b.pop(),h||(h=g("\x3cdiv\x3e\x3c/div\x3e").css(e),g("body").append(h)));n[k]=h;h.offset({left:a.pageX-20,top:a.pageY-20});h.css("visibility","visible")}for(k in c)c.hasOwnProperty(k)&&!n[k]&&(h=c[k],h.css("visibility","hidden"),b.push(h));c=n}}}})(Granite,jQuery);
(function(e,g,q,c){e.OptOutUtil=function(){var b={},d=[],e=[];b.init=function(b){b&&(d=b.cookieNames?b.cookieNames:d,e=b.whitelistCookieNames?b.whitelistCookieNames:e)};b.getCookieNames=function(){return d};b.getWhitelistCookieNames=function(){return e};b.isOptedOut=function(){for(var d=document.cookie.split(";"),e=0;e<d.length;e++){var g=c.trim(d[e].split("\x3d")[0]);if(-1<c.inArray(g,b.getCookieNames()))return!0}return!1};b.maySetCookie=function(d){return!(b.isOptedOut()&&-1===c.inArray(d,b.getWhitelistCookieNames()))};
return b}()})(Granite,Granite.Util,Granite.HTTP,jQuery);Granite.OptOutUtil.init(window.GraniteOptOutConfig);Granite.HTTP.detectContextPath();
(function(e,g,q){g.Granite=g.Granite||{};g.Granite.$=g.Granite.$||e;g._g=g._g||{};g._g.$=g._g.$||e;var c=Granite.HTTP;e.ajaxSetup({externalize:!0,encodePath:!0,hook:!0,beforeSend:function(b,d){"undefined"!==typeof G_IS_HOOKED&&G_IS_HOOKED(d.url)||(d.externalize&&(d.url=c.externalize(d.url)),d.encodePath&&(d.url=c.encodePathOfURI(d.url)));d.hook&&(b=c.getXhrHook(d.url,d.type,d.data))&&(d.url=b.url,b.params&&("GET"===d.type.toUpperCase()?d.url+="?"+e.param(b.params):d.data=e.param(b.params)))},statusCode:{403:function(b){"Authentication Failed"===
b.getResponseHeader("X-Reason")&&c.handleLoginRedirect()}}});e.ajaxSettings.traditional=!0})(jQuery,this);
(function(e){function g(){this._handler=[]}function q(a){var b="//"+document.location.host,c=document.location.protocol+b;return a===c||a.slice(0,c.length+1)===c+"/"||a===b||a.slice(0,b.length+1)===b+"/"||!/^(\/\/|http:|https:).*/.test(a)}function c(a){e.console&&console.warn("CSRF data not available;The data may be unavailable by design, such as during non-authenticated requests: "+a)}function b(){var b=new g;l=b;var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)try{a=
JSON.parse(d.responseText).token,b.resolve(a)}catch(v){c(v),b.reject(d.responseText)}};d.open("GET",n,!0);d.send();return b}function d(){var b=new XMLHttpRequest;b.open("GET",n,!1);b.send();try{return a=JSON.parse(b.responseText).token}catch(t){c(t)}}function h(b){var c=b.getAttribute("action");"GET"===b.method.toUpperCase()||c&&!q(c)||(a||d(),a&&(c=b.querySelector('input[name\x3d":cq_csrf_token"]'),c||(c=document.createElement("input"),c.setAttribute("type","hidden"),c.setAttribute("name",":cq_csrf_token"),
b.appendChild(c)),c.setAttribute("value",a)))}function k(a){var b=function(a){a=a.target;"FORM"===a.nodeName&&h(a)};a.addEventListener?a.addEventListener("submit",b,!0):a.attachEvent&&a.attachEvent("submit",b)}e.Granite=e.Granite||{};if(!e.Granite.csrf){e.Granite.csrf={initialised:!1,refreshToken:b,_clearToken:function(){a=void 0;b()}};g.prototype={then:function(a,b){this._handler.push({resolve:a,reject:b})},resolve:function(){this._execute("resolve",arguments)},reject:function(){this._execute("reject",
arguments)},_execute:function(a,b){if(null===this._handler)throw Error("Promise already completed.");for(var c=0,d=this._handler.length;c<d;c++)this._handler[c][a].apply(e,b);this.then=function(c,d){("resolve"===a?c:d).apply(e,b)};this._handler=null}};var n=Granite.HTTP.externalize("/libs/granite/csrf/token.json"),l,a;b();k(document);var f=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(a,b,c){q(b)&&"get"!==a.toLowerCase()&&(this._csrf=!0,this._async=c);return f.apply(this,arguments)};
var p=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){if(this._csrf)if(a)this.setRequestHeader("CSRF-Token",a),p.apply(this,arguments);else if(!1===this._async)d(),a&&this.setRequestHeader("CSRF-Token",a),p.apply(this,arguments);else{var b=this,c=Array.prototype.slice.call(arguments);l.then(function(a){b.setRequestHeader("CSRF-Token",a);p.apply(b,c)},function(){p.apply(b,c)})}else p.apply(this,arguments)};var u=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=
function(){h(this);return u.apply(this,arguments)};if(e.Node){var r=Node.prototype.appendChild;Node.prototype.appendChild=function(){var a=r.apply(this,arguments);if("IFRAME"===a.nodeName)try{a.contentWindow&&!a._csrf&&(a._csrf=!0,k(a.contentWindow.document))}catch(t){a.src&&a.src.length&&q(a.src)&&e.console&&console.error("Unable to attach CSRF token to an iframe element on the same origin")}return a}}setInterval(function(){b()},3E5)}})(window);window.$CQ=_g.$;