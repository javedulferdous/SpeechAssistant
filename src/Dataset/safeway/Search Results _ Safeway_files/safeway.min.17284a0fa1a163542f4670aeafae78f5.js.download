(function(){var c="";this.init=function(){if($(".set-store-interstitial").length&&SWY.CONFIGSERVICE.isWCMModeDisabled()){this.targetStoreId=AB.COMMON.getURLParameterByName("storeId");var a=AB.COMMON.getURLParameterByName("target");c=a;this.bindEvents();this.showModal();this.showSpinner();this.checkRequest(this.targetStoreId,a)?this.showError():AB.COMMON.authorize()?this.handleAuthFlow(this.targetStoreId,this.targetUrl):this.handleGuestFlow(this.targetStoreId)}};this.showModal=function(){var a=$(".set-store-interstitial .set-store-wrapper"),
b=window.ActiveXObject||"ActiveXObject"in window,d=/Trident/.test(window.navigator.userAgent);(b||d)&&a.removeClass("fade");a.modal({backdrop:"static",keyboard:!1,show:!0});$(document).on("hidden.bs.modal",".set-store-wrapper",function(){$(".modal-content.resize").removeClass("resize")})};this.showSpinner=function(){$(".set-store-interstitial .continue-spinner").removeClass("mask")};this.hideSpinner=function(){$(".set-store-interstitial .continue-spinner").addClass("mask")};this.showError=function(){$(".set-store-interstitial .set-store-error").removeClass("mask");
$(".set-store-interstitial .modal-content").addClass("resize");this.hideSpinner()};this.checkRequest=function(a,b){var d=!1;a?b&&b in AB.SETSTORE.redirects?this.targetUrl=AB.SETSTORE.redirects[b]:(a=AB.COMMON.getURLParameterByName("goto"))?SWY.ENFORCEMENTUTILS.isTrustedDomain(a)?this.targetUrl=a:d=!0:d=!0:d=!0;return d};this.handleGuestFlow=function(a){var b=this,d;c&&(d="shop"===c.toLowerCase()?"DUG":"J4U");this.getNewStoreInfoObj({id:a},!0,d,function(a){AB.COMMON.updateUserSession(a);window.location.href=
b.targetUrl})};this.handleAuthFlow=function(a,b){if(a!==AB.userInfo.j4u.storeId){var d=this,f=$.Deferred(),e=$.Deferred();StoreAddressComp.getStoreAddressFromXapi(a,"",function(a){var b=$(".set-store-interstitial .target-store");d.updateStoreInfo(b,a);f.resolve()},function(){f.reject()});StoreAddressComp.getStoreAddressFromXapi(AB.userInfo.j4u.storeId,"",function(a){var b=$(".set-store-interstitial .current-store");d.updateStoreInfo(b,a);e.resolve()},function(){e.reject()});$.when(f,e).done(function(){d.hideSpinner();
$(".set-store-interstitial .change-store-title").removeClass("mask");$(".set-store-interstitial .store-selection-content").removeClass("mask");$(".set-store-interstitial .set-store-footer").removeClass("mask")}).fail(function(){d.showError()})}else window.location.href=b};this.updateStoreInfo=function(a,b){var d=a.find(".store-logo img"),f=a.find(".store-address");a.data("info",JSON.stringify(b));a=b.storeAddressModel.storeRewards.polarisBannerName;d.attr("src",b.storeAddressModel.storeRewards.storeLogoURL+
"?$fulfillment$\x26defaultImage\x3dNot_Available");d.attr("alt",a+" logo");d.attr("aria-label",a);f.html(b.storeAddressModel.address.line1+"\x3cbr/\x3e"+b.storeAddressModel.address.city+", "+b.storeAddressModel.address.state+" "+b.storeAddressModel.address.zipcode)};this.bindEvents=function(){var a=this;$(".set-store-interstitial .close-icon").bind("click",function(b){a.doCancel(b,a)});$(".set-store-interstitial .cancel-link").bind("click",function(b){a.doCancel(b,a)});$(".set-store-interstitial .continue-btn").bind("click",
function(b){a.doContinue(b,a)})};this.doCancel=function(a,b){window.location.href=document.referrer?document.referrer:"/"};this.doContinue=function(a,b){a=$(".set-store-interstitial .target-store");a=JSON.parse(a.data("info"));var d=a.storeAddressModel.storeRewards.polarisBannerName,f;c&&(f="shop"===c.toLowerCase()?"DUG":"J4U");this.getNewStoreInfoObj(a,null,f,function(a){AB.COMMON.updateUserSession(a,null,function(a){a.success&&(SWY.CONFIGSERVICE.getResolvedBanner()!==d?(a=b.targetUrl.replace(SWY.CONFIGSERVICE.getResolvedBanner(),
d),window.location=window.location.protocol+"//"+AB.COMMON.buildHost(d)+SWY.ssoPath+"?goto\x3d"+a):window.location.href=b.targetUrl)})})};this.ecomStoreSetCallback=function(a){SWY.STORESELECTION.updateStoreSelectionInCookie(a);AB.userInfo.prepareSharedInfo();SWY.STORESELECTION.updateStoreLocationInLocalStorage(a);AB.SYNDICATEDCOOKIE.init();window.location.href=a.targetUrl};this.getNewStoreInfoObj=function(a,b,d,f){var e={info:{COMMON:{},J4U:{},SHOP:{}}},c="";c=b?SWY.CONFIGSERVICE.getResolvedBanner():
a.storeAddressModel.storeRewards.polarisBannerName;e.info.COMMON.preference=d?d:"J4U";AB.CHECKPROFILE.getDerivedEcomStore(c,b?a.id:a.storeAddressModel.storeRewards.storeId).then(function(a){if(a)if(b&&(e.info.COMMON.Selection="query"),!0===a.validRequest.isValid?(e.info.J4U.storeId=a.validRequest.store.storeId,e.info.J4U.zipcode=a.validRequest.store.zipcode,e.info.SHOP.storeId=a.validRequest.ecomStore.storeId,e.info.SHOP.zipcode=a.validRequest.ecomStore.zipcode):(e.info.J4U.storeId=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultStoreId,
e.info.J4U.zipcode=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultZipcode,e.info.SHOP.storeId=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultZipcode),"function"===typeof f)f(e);else return e}).catch(function(a){e.info.J4U.storeId=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultStoreId;e.info.J4U.zipcode=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultZipcode;e.info.SHOP.storeId=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultStoreId;e.info.SHOP.zipcode=SWY.CONFIGSERVICE.storeResolutionConfig.bannerDefaultZipcode;
if("function"===typeof f)f(e);else return e})}}).call(AB.SETSTORE);
function displayModUnitBanner(){var c=$(".mod-unit-unified-proxy"),a=AB.userInfo.userType.toLowerCase(),b="r"===a||"c"===a?!0:!1;"undefined"!=typeof c&&0<c.length&&(c.each(function(){b&&$(this).children().hasClass("show-auth-banner")?($(this).find(".mod-unit__authorized-banner").show(),$(this).find(".mod-unit__default-banner").hide()):($(this).find(".mod-unit__authorized-banner").hide(),$(this).find(".mod-unit__default-banner").show());$(this).find("a").on("click",function(){if(window.digitalData&&
window.digitalData.pageFilter){var a="",b=$(this).closest(".mod-unit-unified-proxy"),c="bannerClicked|"+b.find(".mod-unit__headline").text().trim().replace(/\s/g,""),g=$(".mod-unit-unified-proxy:visible").not(".elevaate-banner-carousel-container .mod-unit-unified-proxy, .mod-unit-carousel-container .mod-unit-unified-proxy").add(".elevaate-banner-carousel-container").add(".mod-unit-carousel-container");if(!b.is(".elevaate-banner-carousel-container .mod-unit-unified-proxy"))if(b.is(".mod-unit-carousel-container .mod-unit-unified-proxy")){var h=
b.closest(".mod-unit-carousel-container");a=h.find("[id][data-slick-index] .mod-unit-unified-proxy");g=g.index(h)+1;b=a.index(b)+1;a=(10>g?"R0"+g:"R"+g)+"#"+(10>b?"S0"+b:"S"+b)}else b=g.index(b)+1,a=10>b?"R0"+b:"R"+b;window.digitalData.pageFilter.recommendationType="notRecommended";window.digitalData.pageFilter.mediaType="banner";window.digitalData.pageFilter.placement=a;window.digitalData.link={linkName:c};c=JSON.stringify({event:"linkClick",link:window.digitalData.link,page:window.digitalData.pageDetails,
pageFilter:window.digitalData.pageFilter});localStorage.setItem("bannerClickedDatalayer",c)}})}),(c.parent().hasClass("col-lg-6 col-xl-6")||c.parent().hasClass("col-lg-4 col-xl-4")||c.parent().hasClass("col-md-6 col-lg-6")||c.parent().hasClass("col-md-4 col-lg-4"))&&c.parent().addClass("mod-full-width"))}displayModUnitBanner();AB.COMMON.siteCoreUPreInit=function(){};AB.COMMON.doCoreInit=function(){AB.SETSTORE.init()};
$(document).ready(function(){var c=document.getElementsByClassName("s7_parameters");if(c)for(var a=0;a<c.length;a++){var b="s7_videoview"+a;document.getElementById("s7_videoview").setAttribute("id","s7_videoview"+a);(new s7viewers.VideoViewer({containerId:b,params:{asset:c[a].getAttribute("data-asset"),serverurl:c[a].getAttribute("data-serverurl"),contenturl:c[a].getAttribute("data-contenturl"),config:c[a].getAttribute("data-config"),emailurl:c[a].getAttribute("data-emaiurl"),videoserverurl:c[a].getAttribute("data-videoserverurl")}})).init()}});