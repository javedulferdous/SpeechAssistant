(new R9.logger).time("combined");(function(c,e){c.createComponentClass("hotels.results.HotelResultItemLoader",{itemPlaceholder:void 0,itemContainer:void 0,options:{stickyHeaderOffset:0},init:function(){this.itemPlaceholder=this.getChildElement("itemPlaceholder");this.itemContainer=this.getChildElement("itemContainer");this.options.stickyHeaderOffset=this.options.stickyHeaderOffset||0},addEventHandlers:function(){this.subscribe("hotels.results.loadResultItem",this.loadResultItem.bind(this))},loadResultItem:function(a){var b=this;
if(a&&a.resultId&&a.searchId){b.itemContainer.empty();b.itemContainer.hide();b.itemPlaceholder.show();var d=b.itemPlaceholder.offset().top-b.options.stickyHeaderOffset;try{window.scrollTo({top:d,behavior:"smooth"})}catch(f){e(window).scrollTop(d)}c.ajax.execute("hotels.results.AjaxableHotelResultItem",{appendTo:b.itemContainer,replace:!1,data:{resultId:a.resultId,searchId:a.searchId,isBusinessMode:a.isBusinessMode,approvalStateName:a.approvalStateName,travelPolicyApprovalModeName:a.travelPolicyApprovalModeName}}).then(function(){b.itemPlaceholder.hide();
b.itemContainer.show();a.noExpand||c.events.publish("hotels.results.openPageOrToggle",{resultId:a.resultId,force:!0,tab:"overview"})},function(){})}}})})(R9,jQuery);(function(a,e){a.createComponentClass("common.kn.rp.Inline",{addEventHandlers:function(){var c=this;this.element.on("keypress",function(b){switch(b.which){case a.globals.keyCodes.SPACE:case a.globals.keyCodes.RETURN:c.element.click()}});var d=this.getChildElement("skip");d.length&&d.click(function(b){b.stopPropagation();b=e("[tabbable]");var a=b.index(c.element)+1;a>=b.length&&(a=0);b.eq(a).get(0).focus()})}})})(R9,jQuery);(function(b,g){var e=b.config.getBoolean("ui.trips-optimistic-updates.enabled",!1);b.createComponentClass("common.trips.SaveToTrips",{tripId:null,tripName:null,autoSaveTripId:null,autoSaveTripName:null,noSaveCallbackNeeded:!1,savedAutomatically:!1,isPending:!1,successReload:!1,removeInPlace:!1,options:{resultId:"",searchId:"",tripId:null,tripName:null,isSaveInPlaceEnabled:!1,loggingSubPageId:"resultsinline",alertSaveMessageEnabled:!1,resultElementId:null,savingDrawerEnabled:!1},init:function(){this.tripId=
this.options.tripId;this.tripName=this.options.tripName},addEventHandlers:function(){var a=this;this.subscribe("trips.hotels.saveHotel",this.onSaveHotel.bind(this));this.subscribe("trips.hotels.removeHotel",this.onRemoveHotel.bind(this));this.subscribe("hotel.inline.detail.loaded",{resultId:this.options.resultId},this.onInlineDetailsLoaded.bind(this));this.subscribe("trips.auto.save.data",this.onAutoSaveTripData.bind(this));this.subscribe("trips.auto.save.clear",this.onAutoSaveTripClearData.bind(this));
this.subscribe("trips.move.event.finished",this.updateTripId.bind(this));this.subscribe("watchlist.results.removed",{resultId:this.options.resultId},function(b){a.onRemove(b.requestData,b.responseData)});this.options.savingDrawerEnabled&&this.subscribe("p13n.saving.save.result.to.trip",function(b){a.options.resultId===b.resultId&&b.callerId===a.id()&&a.instantSave(b.encodedTripId,b.forceCreateNew)})},inlineComponentsReady:function(){this.options.isSaveInPlaceEnabled&&this.tripId&&b.events.publish("common.results.inline.save.sync",
{resultId:this.options.resultId,autoSaveTripId:this.tripId,tripName:this.tripName})},isSaved:function(){return!!this.tripId},updateTripId:function(a){a.optimisticMove||a.resultId!==this.options.resultId||(this.tripId=a.tripId,this.tripName=a.tripName)},onRemoveHotel:function(a){this.options.resultId===a.hid&&this.removeFromTrips()},onSaveHotel:function(a){this.options.resultId===a.hid&&this.handleSaveTrip()},onSaveAction:function(a){this.isPending||(b.events.publish("common.results.refreshing"),this.isSaved()?
this.removeFromTrips():(this.savedAutomatically=!!a,b.Analytics.api.trackEvent({subPageId:this.options.loggingSubPageId,category:"save-result"}),this.handleSaveTrip(),b.events.publish("result.mouseOut",this.options.resultId)))},handleSaveTrip:function(){this.autoSaveTripId?this.instantSave(this.autoSaveTripId):(this.instantSave(),b.events.publish("gtm.update",{event:"addToTrips",pixelContext:{hotelId:this.options.resultId}}))},handleSaveInDrawer:function(){b.events.publish("p13n.saving.drawer.open",
{open:!0});b.events.publish("p13n.saving.drawer.trip-list.show",{resultId:this.options.resultId,callerId:this.id()})},instantSave:function(a,c){var d=this,h=!(!a||!this.autoSaveTripName),f={resultId:d.options.resultId,searchId:d.options.searchId,providerCode:"",showPrice:"",savedAutomatically:d.savedAutomatically};a&&(f.encodedTripId=a);this.options.savingDrawerEnabled&&(c?f.forceCreateNewTrip=!0:f.forceNoNewTrip=!0);g.ajax({url:b.globals.remoteHost+"/s/run/saveToMyTrips/save",type:"post",data:f,
dataType:"json",headers:{"X-CSRF":b.globals.formtoken}}).done(function(c){d.isPending=!1;if(!d.noSaveCallbackNeeded){if(c.success)d.onSave(c,!0),b.hotels&&b.events.publish("gtm.update",{event:"addToTrips",pixelContext:{hotelId:d.options.resultId}}),d.options.savingDrawerEnabled&&!a&&b.events.publish("p13n.saving.saved.to.new.trip",{tripId:c.tripID});else if(d.options.savingDrawerEnabled&&!c.error)d.handleSaveInDrawer();else d.onSaveError(c.error);d.successReload&&d.reload()}}).fail(function(a){d.onSaveError(a.error);
d.successReload&&d.reload()});e&&h?(this.onSave({eventId:!1,tripID:a,tripName:this.autoSaveTripName},!0,!0),this.noSaveCallbackNeeded=!0):this.isPending=!0},onSaveError:function(){b.Analytics.api.trackEvent({subPageId:"saved-select",category:"error"});this.onCancel({resultId:this.options.resultId})},onRemoveError:function(){},reload:function(){setTimeout(function(){window.location.reload(!0)},300)},triggerSaved:function(a){b.events.publish("resultItem.saved",{resultItemId:this.options.resultId,tripId:a.tripID,
tripName:a.tripName,tripUrl:a.tripUrl,eventID:a.eventID,savedAutomatically:this.savedAutomatically,responseData:a,resultItemElId:this.options.resultElementId});this.options.alertSaveMessageEnabled&&b.events.publish("resultItem.alert.saved",{resultItemId:this.options.resultId,tripName:a.tripName,tripUrl:a.tripUrl})},triggerRemoved:function(a,c,d){b.events.publish("resultItem.removed",{resultItemId:this.options.resultId,tripId:a,resultItemElId:this.options.resultElementId,eventIds:c,tripRemoved:d})},
saveToTrip:function(a){var c=this;a||this.logger.error("Trip id is not defined");b.action.execute("common/trips/ajax/SaveToTrip",{tripId:a,resultId:c.options.resultId,searchId:c.options.searchId}).success(function(a){if(a.success)c.onSave(a.data,!0),b.hotels&&b.events.publish("gtm.update",{event:"addToTrips",pixelContext:{hotelId:c.options.resultId}});else c.onSaveError(a.data.errorMsg)}).error(function(){c.onSaveError()})},triggerSaveSync:function(a){b.events.publish("common.results.inline.save.sync",
a)},onSave:function(a,c,d){if(c||a.callerId===this.id())g("#"+a.dialogId).remove(),this.triggerSaved(a),this.triggerSaveSync({autoSaveTripId:this.autoSaveTripId,resultId:this.options.resultId,encodedTripId:a.tripID,tripName:a.tripName}),b.storage.set("hotels.results.saveToTrips.tripId",a.tripID),b.events.publish("trips.add",{tripId:a.tripID}),b.events.publish("common.results.updateTripId",{resultId:this.options.resultId,tripId:a.tripID,tripName:a.tripName}),d||b.events.publish("trips.auto.save.data",
{tripId:a.tripID,tripName:a.tripName}),this.unsubscribe("trips.save.done"),this.unsubscribe("trips.save.cancel")},onAutoSaveTripData:function(a,b){null!=a&&"object"===typeof a&&(b=a.tripName,a=a.tripId);a&&(this.autoSaveTripId=a,this.autoSaveTripName=b)},onAutoSaveTripClearData:function(){this.autoSaveTripName=this.autoSaveTripId=null},onInlineDetailsLoaded:function(){this.triggerSaveSync({autoSaveTripId:this.autoSaveTripId,resultId:this.options.resultId})},onCancel:function(){this.isPending=!1;b.Analytics.api.trackEvent({subPageId:"saved-select",
category:"close"});this.unsubscribe("trips.save.done");this.unsubscribe("trips.save.cancel")},removeFromTrips:function(){b.Analytics.api.trackEvent({subPageId:"saved",category:"remove-saved"});var a=this,c={tripId:this.tripId,resultId:this.options.resultId,searchId:this.options.searchId};g.ajax({url:"/s/run/saveToMyTrips/remove",type:"POST",data:JSON.stringify(c),contentType:"application/json; charset\x3dutf-8"}).done(function(b){a.isPending=!1;if(!e)if(b.success)a.onRemove(c,b);else a.onRemoveError()}).fail(this.onRemoveError.bind(this));
if(e)this.onRemove(c,{eventIds:[],tripRemoved:!1});else this.isPending=!0},onRemove:function(a,c){this.tripId=null;this.options.removeInPlace||this.options.isSaveInPlaceEnabled||e||b.events.publish("resultspage.results.refresh",{doRefreshUserStatus:!0});b.events.publish("common.results.inline.remove.sync",{resultId:this.options.resultId,remove:!0});this.triggerRemoved(a.tripId,c.eventIds,c.tripRemoved);b.events.publish("trips.remove",{tripId:a.tripId});b.events.publish("common.results.updateTripId",
{resultId:this.options.resultId,tripId:null,tripName:null});c.tripRemoved&&b.events.publish("trips.auto.save.clear")}})})(R9,jQuery);(function(b){b.createComponentClass("common.results.SaveToTripsButton","common.trips.SaveToTrips",{button:null,saveStatesInitialized:!1,forcedStateReset:!1,isProcessing:!1,unsavedIcon:null,options:{vertical:null,initialStateSaved:!1,pinSavedText:!1,disableForcedHoverState:!1,killWatchlist:!1,tooltipDirection:"top",tooltipCss:null,saveTooltipText:"Save",allowPermanentPinned:!0,trackingEnabled:!1,hideLabel:!1,savingDrawerEnabled:!1,navDrawerEnabled:!1},init:function(a){this.base(a);this.button=this.getChildElement("button");
this.buttonContent=this.getChildElement("buttonContent");this.unsavedIcon=this.element.find(".js-unsaved-icon")},addEventHandlers:function(){var a=this;this.base();this.registerEvent("click",this.button,function(c){c.stopPropagation();a.options.savingDrawerEnabled&&b.globals.anon?a.options.navDrawerEnabled?b.authentication.showLogin():b.authentication.showLogin({success:function(){b.globals.analytics.loginState="loggedin";b.globals.anon=!1;b.events.publish("social.response.loaded",!0);b.events.publish("header.auth.reload");
a.handleSaveClick()},preventClose:!1}):a.handleSaveClick()});this.subscribe(["common.results.inline.save.sync","common.results.inline.remove.sync"],{resultId:this.options.resultId},this.syncSaveUI.bind(this));this.subscribe("common.results.ResultActionMenu.hidden",{resultId:this.options.resultId},this.resetState.bind(this,!0));this.subscribe("common.results.ResultActionMenu.reset",{resultId:this.options.resultId},this.resetState.bind(this,!0));this.subscribe("common.results.ResultActionsMenu.pinned.mouseenter",
{resultId:this.options.resultId},this.togglePinnedHoverState.bind(this,!0));this.subscribe("common.results.ResultActionsMenu.pinned.mouseleave",{resultId:this.options.resultId},this.togglePinnedHoverState.bind(this,!1));this.options.savingDrawerEnabled&&this.subscribe("p13n.saving.header.close-drawer",this.handleCancelLoadingState.bind(this))},inlineComponentsReady:function(){this.options.killWatchlist&&this.unsavedIcon&&this.unsavedIcon.toolTip({position:this.options.tooltipDirection,extraClass:this.options.tooltipCss,
activation:"hover",color:"black",role:"note",content:this.options.saveTooltipText})},handleSaveClick:function(){this.options.vertical&&b.events.publish(this.options.vertical+".results.interaction",this.options.resultId);this.initializeSaveStates();this.onSaveAction(!1);this.resetState(!1);this.isSaved()?this.toggleRemovingState(!0):this.toggleSavingState(!0,!0);this.trackChange()},initializeSaveStates:function(){if(!this.saveStatesInitialized){var a=b.template.render("alternateSaveStates",{loaderId:this.id("loader"),
savedLabelId:this.id("savedLabel"),removedLabelId:this.id("removedLabel"),injectSaved:!this.options.initialStateSaved,withLabel:!this.options.hideLabel});this.buttonContent.append(a);this.saveStatesInitialized=!0}},toggleVisibility:function(a,b,d,e){a="string"===typeof a?this.getChildElement(a):a;a.attr("aria-hidden",!d);this.swapClassesToggle(a,b+"--hidden",b+"--visible",!d);void 0!==e&&a.attr("aria-busy",e)},handleCancelLoadingState:function(){this.isProcessing&&(this.toggleVisibility("loader",
"Button__Loader",!1),this.swapClassesToggle(this.getChildElement("button"),"Button--loading","Button--default",!1),b.events.publish("common.results.SaveToTripsButton.cancel"))},toggleSavingState:function(a,c){this.toggleVisibility("loader","Button__Loader",a,a);this.swapClassesToggle(this.getChildElement("button"),"Button--default","Button--loading",!a);this.isProcessing=a;c=c&&this.options.allowPermanentPinned;b.events.publish(a?"common.results.SaveToTripsButton.saving":"common.results.SaveToTripsButton.saved",
{resultId:this.options.resultId,pinActions:!!c})},toggleRemovingState:function(a){this.toggleVisibility("loader","Button__Loader",a,a);this.swapClassesToggle(this.getChildElement("button"),"Button--default","Button--loading",!a);this.isProcessing=a;b.events.publish(a?"common.results.SaveToTripsButton.removing":"common.results.SaveToTripsButton.removeComplete",{resultId:this.options.resultId})},toggleSavedState:function(a){var c=this.options.disableForcedHoverState?!a:!a&&!this.forcedStateReset;c?
this.toggleRemovingState(!1):this.toggleSavingState(!1,!0);this.toggleVisibility(this.element.find(".js-saved-icon"),"Button__Icon",a);this.toggleVisibility(this.unsavedIcon,"Button__Icon",!a);this.toggleVisibility("savedLabel","Button__Label",a&&!this.forcedStateReset);this.toggleVisibility("removedLabel","Button__Label",c);b.events.publish("common.results.SaveToTripsButton.saveComplete",{resultId:this.options.resultId})},togglePinnedHoverState:function(a){this.isProcessing||this.toggleVisibility("savedLabel",
"Button__Label",!a&&this.options.pinSavedText)},resetState:function(a){this.toggleVisibility("savedLabel","Button__Label",!1);this.toggleVisibility("removedLabel","Button__Label",!1);this.forcedStateReset=!!a},syncSaveUI:function(a){this.initializeSaveStates();a.remove&&this.toggleSavedState(!1);var b=a.tripID||a.encodedTripId;!this.isSaved()&&b&&(this.tripId=b,this.toggleSavedState(!0));this.onAutoSaveTripData(a.autoSaveTripId,a.tripName)},trackChange:function(){if(this.trackingEnabled()){var a=
b.question.ask("results.HorizonResult.index.of."+this.options.uiResultId);this.isSaved()?b.VestigoEvents.watchlist.remove(this.options.resultId,a):b.VestigoEvents.watchlist.add(this.options.resultId,a)}},trackingEnabled:function(){return this.options.trackingEnabled&&b.Vestigo}})})(R9);(function(b,e){var f=b.Common.Utils.Browsers.supportsHover();b.createComponentClass("common.results.ResultActionsMenu",{visible:!1,processing:!1,detailsOpen:!1,pinned:!1,shareBtn:null,delayedAction:null,hideTimeout:null,compactTimeout:null,options:{resultId:null,uiResultId:null,searchId:null,isLoggedIn:null,resultElementId:null,isInitiallyPinned:!1,alwaysVisible:!1,detailsEnabled:!1,pinSavedText:!1,killWatchlist:!1,shareTooltipText:"Share",checkHoverSupport:!1,businessEventState:null,tooltipDirection:"top",
tooltipCss:null,isBusinessMode:!1,trackingEnabled:!1,useCityNameSharing:!1},init:function(){this.pinned=this.options.isInitiallyPinned&&!(this.options.isBusinessMode&&null!==this.options.businessEventState);this.shareBtn=this.getChildElement("share")},addEventHandlers:function(){var a=this;if(!this.options.alwaysVisible){var b=e("#"+this.options.resultElementId);if(b.length){var c=!this.options.checkHoverSupport||f;this.registerEvent(c?"mouseenter focus":"focus",b,function(){a.delayedToggle(!0,50);
a.handleMouseEnter()});this.registerEvent(c?"mouseleave unfocus":"unfocus",b,function(){a.handleHide();a.handleMouseLeave()})}this.subscribe("result.hoverActions.hideAll",this.handleHideAll.bind(this))}this.options.detailsEnabled&&(this.subscribe("result.details.opened",{resultId:this.options.uiResultId},this.toggleDetailsOpen.bind(this,!0)),this.subscribe("result.details.closed",{resultId:this.options.uiResultId},this.toggleDetailsOpen.bind(this,!1)));this.subscribe("common.results.SaveToTripsButton.saving",
{resultId:this.options.resultId},function(b){a.pinned=b&&b.pinActions;a.toggleCompactState(!a.options.alwaysVisible);a.processing=!0});this.subscribe("common.results.SaveToTripsButton.saved",{resultId:this.options.resultId},function(b){a.pinned=b&&b.pinActions;a.processing=!1});this.subscribe("common.results.SaveToTripsButton.removing",{resultId:this.options.resultId},function(){a.toggleCompactState(!a.options.alwaysVisible);a.processing=!0});this.subscribe("common.results.SaveToTripsButton.removeComplete",
{resultId:this.options.resultId},function(){a.pinned=!1;a.processing=!1});this.subscribe("common.results.SaveToTripsButton.cancel",function(){a.pinned=!1;a.processing=!1;a.toggleCompactState(!1)});this.registerEvent("click",this.shareBtn,this.share.bind(this));this.options.detailsEnabled&&this.registerEvent("click",this.getChildElement("showDetails"),this.toggleDetails.bind(this));this.options.isBusinessMode&&this.subscribe("common.results.updateBusinessEvent.pending",{resultId:this.options.resultId},
this.removeSaveHeartButton.bind(this));this.answer("horizon.saveToTrips."+this.options.resultId,function(){return!0})},inlineComponentsReady:function(){this.options.killWatchlist&&this.shareBtn.toolTip({position:this.options.tooltipDirection,extraClass:this.options.tooltipCss,activation:"hover",color:"black",role:"note",content:this.options.shareTooltipText})},handleMouseEnter:function(){this.pinned&&(b.events.publish("common.results.ResultActionsMenu.pinned.mouseenter",{resultId:this.options.resultId}),
this.processing||this.toggleCompactState(!1))},handleMouseLeave:function(){this.pinned?(b.events.publish("common.results.ResultActionsMenu.pinned.mouseleave",{resultId:this.options.resultId}),this.options.hideDelay?(window.clearTimeout(this.compactTimeout),this.compactTimeout=window.setTimeout(this.toggleCompactState.bind(this,!0),this.options.hideDelay)):this.toggleCompactState(!0)):(b.events.publish("common.results.ResultActionMenu.reset",{resultId:this.options.resultId}),this.toggleCompactState(!1))},
toggleVisibility:function(a){this.swapClassesToggle(this.element,"Container--hidden","Container--visible",!a);this.element.attr("aria-hidden",!a);(this.visible=a)&&this.element.addClass(this.getStlBlock("Container--exposed"))},show:function(){this.visible||(b.events.publish("result.hoverActions.hideAll",{excludeResultId:this.options.resultId}),this.toggleVisibility(!0))},delayedToggle:function(a,b){var c=this,d=e.Deferred();a&&window.clearTimeout(this.hideTimeout);if(this.delayedAction)return d.reject();
this.delayedAction=window.setTimeout(function(){a?c.show():c.hide();c.delayedAction=null;d.resolve()},b);return d.promise()},hide:function(){this.delayedAction&&(window.clearTimeout(this.delayedAction),this.delayedAction=null);this.visible&&(this.pinned=this.processing=!1,this.toggleVisibility(!1),this.toggleCompactState(!1),b.events.publish("common.results.ResultActionMenu.hidden",{resultId:this.options.resultId}))},handleHide:function(){this.pinned||(this.options.hideDelay?(window.clearTimeout(this.hideTimeout),
this.hideTimeout=window.setTimeout(this.hide.bind(this),this.options.hideDelay)):this.hide())},handleHideAll:function(a){a&&a.excludeResultId!==this.options.resultId&&!this.pinned&&this.hide()},toggleDetailsOpen:function(a){this.detailsOpen=a},share:function(){b.events.publish("share",{resultId:this.options.resultId,searchId:this.options.searchId,useCityNames:this.options.useCityNameSharing});b.Analytics.api.trackEvent({category:"ResultItem",action:"fastShareClick"});this.trackingEnabled()&&b.VestigoEvents.share.open(this.options.resultId,
b.question.ask("results.HorizonResult.index.of."+this.options.uiResultId))},toggleDetails:function(){var a=this.detailsOpen;a?b.events.publish("result.details.close",this.options.uiResultId):b.events.publish("result.details.open",{resultId:this.options.uiResultId,activeTab:"overview"});b.Analytics.api.trackEvent({category:"details",action:a?"close":"open",label:"actionsMenu"})},removeSaveHeartButton:function(){this.options.hideSaveToTripButton=!0;this.pinned=this.options.isInitiallyPinned&&!this.options.hideSaveToTripButton;
this.getChildElement("saveCol").remove();this.swapClasses(this.getChildElement("shareCol"),"Container__Col--hidden","Container__Col--visible")},toggleCompactState:function(a){!a&&this.options.hideDelay&&window.clearTimeout(this.compactTimeout);this.swapClassesToggle(this.getChildElement("saveCol"),"Container__SaveCol--collapsed","Container__SaveCol--expanded",!a);this.swapClassesToggle(this.getChildElement("shareCol"),"Container__Col--visible","Container__Col--hidden",!a);this.element.toggleClass(this.getStlBlock("Container--exposed"),
!a);this.options.detailsEnabled?this.swapClassesToggle(this.getChildElement("detailsCol"),"Container__Col--visible","Container__Col--hidden",!a):!this.getChildElement("saveCol").length&&a&&this.toggleVisibility(!a)},trackingEnabled:function(){return this.options.trackingEnabled&&b.Vestigo}})})(R9,jQuery);(function(b,c){b.createComponentClass("hotels.results.WatermarkClickOut",{watermarkLink:null,options:{mappedBookingCode:"",imgId:"",subscribeToRatesTable:!1},init:function(){this.watermarkLink=this.getChildElement("watermarkLink")},addEventHandlers:function(){this.watermarkLink.on("click",function(a){a.stopPropagation()});this.options.subscribeToRatesTable&&this.subscribe("hotels.ratesTable.multibookLoaded",this.updateWatermarkLink.bind(this));this.subscribe("hotels.results.carousel.resize",this.updateWatermarkDimensions.bind(this))},
updateWatermarkDimensions:function(a){a&&(a.width&&a.widthAspectRatio&&this.element.width(Math.floor(a.width*a.widthAspectRatio)),a.height&&a.heightAspectRatio&&this.element.height(Math.floor(a.height*a.heightAspectRatio)))},updateWatermarkLink:function(a){var b=this;a&&a.multibookData&&(a=a.multibookData.find(function(a){return a.code===b.options.mappedBookingCode}))&&a.url&&(this.watermarkLink.attr("href",this.buildBookingUrl(a.url)),this.updateDisplay(!0))},buildBookingUrl:function(a){return a+
("\x26imgclick\x3d"+this.options.imgId)},updateDisplay:function(a){this.element.attr("data-enabled",a)}})})(R9,jQuery);(function(a,e){a.createComponentClass("hotels.results.HotelResultPhotoColumn",{options:{resultId:"",targetTab:"overview",searchCompleted:!1,showLightbox:!1,showBigCarousel:!1,bookingLinkMapJSON:""},timer:null,cleanBanner:null,init:function(){},addEventHandlers:function(){var d=this;(this.cleanBanner=this.getChildElement("covid"))&&this.registerEvent("click",d.cleanBanner,function(b){b.stopPropagation();e("body").click();a.Analytics.api.trackEvent("hotel/result/covid-clean/click");b=d.cleanBanner.attr("data-brand");
a.events.publish("hotels.results.covid.cleanModal.show",{brand:b})});if(this.options.showWorstPriceDisclaimer){var c=this.getChildElement("goodDeal");c&&c.toolTip({content:function(){return c.data("message")},position:"top",showImmediately:!1})}this.options.searchCompleted&&(this.registerEvent("click",this.getChildElement("thumb"),this.onGalleryClick.bind(this)),this.registerEvent("keypress",this.getChildElement("thumb"),function(b){if(b.which===a.globals.keyCodes.SPACE||b.which===a.globals.keyCodes.RETURN)d.onGalleryClick(b)}))},
onGalleryClick:function(d){var c=this;d.stopPropagation();e("body").click();a.Analytics.api.trackEvent("hotel/result/image/click");a.events.publish("select.force.close");a.events.publish("forceDismiss.DatePicker");a.events.publish("common.dropdown.closeAll");var b=function(){a.events.publish("track.result.details.open",{resultId:c.options.resultId,source:"image"})};this.options.showBigCarousel?(a.events.publish("hotels.bigCarousel.show",{hid:this.options.resultId,index:0,bookingLinkMapJSON:this.options.bookingLinkMapJSON}),
b()):this.options.showLightbox?(a.events.publish("hotels.popupDetails.show",{hid:this.options.resultId,index:0,bookingLinkMapJSON:this.options.bookingLinkMapJSON}),b()):e(d.target).closest(".next,.prev").length||a.events.publish("hotels.results.openPageOrToggle",{resultId:this.options.resultId,force:null,tab:this.options.targetTab,source:"image"})},inlineComponentsReady:function(){this.base();if(this.cleanBanner){if(1<this.element.find(".deal-banner").length){var a=e(this.element.find(".deal-banner")[0]).innerWidth(),
c=e(this.element.find(".deal-banner")[0]).position().left;this.cleanBanner.css({left:a+c+10+"px"})}this.cleanBanner.removeClass("hidden")}}})})(R9,jQuery);(function(b,f){b.createComponentClass("hotels.results.HotelResultInfoColumn",{title:null,locationCol:null,nearbyPlaces:null,attempts:0,verification:null,curatedListBanner:null,loggingCategory:"curatedResultBadge",options:{toolTipEnabled:!1,isSEO:!1,resultId:"",imgURL:"",compareModalEnabled:!1,obviLocationLinksEnabled:!1,displayPrice:""},nearbyTypesNoHotel:"amusement_park art_gallery aquarium stadium park museum bowling_alley zoo university movie_theater".split(" "),init:function(){this.locationContainer=
this.getChildElement("locationContainer");this.nearbyPlaces=this.getChildElement("nearbyPlaces");this.curatedListBanner=this.getChildElement("curatedListCallout");this.options.compareModalEnabled&&(this.compareToggle=this.getChildElement("compareToggle")[f.fn.styleJamCheckbox?"styleJamCheckbox":"checkbox"]({click:b.Common.Utils.debounce(this.handleCompareCheckboxClick.bind(this),100)}).getWidget());this.verification=this.element.find(".verified");1===this.element.find(".ttdTooltipInfo").length&&this.element.find(".remCount").toolTip({content:this.element.find(".ttdTooltipInfo"),
position:top})},openWhisky:function(){jq("#"+this.options.resultId+"-booking-bookButton").click();return!1},addEventHandlers:function(){var a=this,d="";this.options.obviLocationLinksEnabled&&(d="locObvi/");(this.title=this.getChildElement("title").find(".titleContainer"))&&this.options.toolTipEnabled&&this.title.toolTip({content:a.title.data("message"),showImmediately:!1});if(this.curatedListBanner&&this.curatedListBanner.length){this.subscribe("resultspage.streaming.done",function(){b.Analytics.api.trackEvent({category:a.loggingCategory,
action:"impression"})});var e=this.curatedListBanner.clone().css({maxWidth:"initial",visibility:"hidden"}).appendTo("body");283<e.width()&&this.curatedListBanner.toolTip({content:a.curatedListBanner.data("title"),position:"top",showImmediately:!1});e.remove();this.registerEvent("click",this.curatedListBanner,function(){b.Analytics.api.trackEvent({category:a.loggingCategory,action:"click"})})}this.registerEvent("click",this.getChildElement("showReviews"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",
action:d+"reviews/click"});a.openPageOrToggle({tab:"reviews"})});this.registerEvent("click",this.getChildElement("title"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"title/click"});a.options.isSEO||a.openPageOrToggle({tab:"overview",source:"name"})});this.registerEvent("click",this.getChildElement("amenitiesContainer"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"amenities/click"});a.openPageOrToggle({tab:"overview"})});
this.registerEvent("click",this.getChildElement("ratingAddress"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"address/click"});a.openPageOrToggle({tab:"map"})});this.registerEvent("click",this.getChildElement("info-ratingAddress"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"address/click"});a.openPageOrToggle({tab:"map"})});this.registerEvent("click",this.getChildElement("distanceDisplay").find("span"),function(c){c.stopPropagation();
b.Analytics.api.trackEvent({category:"results",action:d+"distance/click"});a.openPageOrToggle({tab:"map"})});this.registerEvent("click",this.locationContainer,function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"location/click"});a.openPageOrToggle({tab:"map"})});this.registerEvent("click",this.getChildElement("info-showReviews"),function(c){c.stopPropagation();b.Analytics.api.trackEvent({category:"results",action:d+"reviews/click"});a.openPageOrToggle({tab:"reviews"})});
this.options.compareModalEnabled&&(this.subscribe("hotels.results.compare.modal.addHotel",{resultId:this.options.resultId},function(){a.compareToggle.setChecked(!0)}),this.subscribe("hotels.results.compare.modal.removeHotel",{resultId:this.options.resultId},function(){a.compareToggle.setChecked(!1)}),this.subscribe("hotels.results.compare.modal.setEnabled",function(b){a.compareToggle.getValue()||a.compareToggle.setEnabled(b.enabled)}));var f=this.getChildElement("bookedInfoIcon");f.toolTip({content:function(){return f.data("message")},
position:"top",showImmediately:!1});var g=this.getChildElement("savedInfoIcon");g.toolTip({content:function(){return g.data("message")},position:"top",showImmediately:!1});var e=this.getChildElement("p13nInfoBubble"),h=e.find(".tooltipAnchor");e.toolTip({positionTarget:h,content:function(){return h.data("message")},position:"top",extraClass:"p13nHotelLabelTooltip",orientation:"start",showImmediately:!1})},inlineComponentsReady:function(){if(this.options.compareModalEnabled){var a=b.question.ask("hotels.results.compare.hotelsInBin");
a&&a.length&&(-1<a.indexOf(this.options.resultId)?this.compareToggle.setChecked(!0):3===a.length&&this.compareToggle.setEnabled(!1))}},openPageOrToggle:function(a){var d="overview",e=null;a&&(d=a.hasOwnProperty("tab")?a.tab:"overview",e=a.hasOwnProperty("force")?a.force:null);b.events.publish("hotels.results.openPageOrToggle",{resultId:this.options.resultId,force:e,tab:d,source:a.source})},handleCompareCheckboxClick:function(){b.Analytics.api.trackEvent({subPageId:"resultItem",category:"compareToggle",
action:"click"});var a={resultId:this.options.resultId,hotelName:f(this.title[0]).html(),imgURL:this.options.imgURL,price:this.options.displayPrice};this.compareToggle.getValue()?b.events.publish("hotels.results.compare.modal.addHotel",a):b.events.publish("hotels.results.compare.modal.removeHotel",a)}})})(R9,jQuery);(function(b){b.createComponentClass("common.booking.HorizontalMultibookProvider",{bookingLink:null,options:{resultId:"",hackerStayCore:!1,hackerStayCoreModalParams:{},markPriceDifference:!1},init:function(){this.bookingLink=this.getChildElement("bookingLink");var a=this.getChildElement("genius-message");a&&a.length?a.toolTip({content:a.data("message"),extraClass:"halfWidth",activation:"click"}):this.options.markPriceDifference?(a=this.getChildElement("price-difference"),a.toolTip({content:a.data("message"),
extraClass:"halfWidth",activation:"click"})):this.options.markProviderDirect&&(a=this.getChildElement("provider-direct"),a.toolTip({content:a.data("message"),extraClass:"halfWidth",activation:"click"}));(a=this.getChildElement("nonInstantBookIcon"))&&a.toolTip({content:a.data("message"),showImmediately:!1,activation:"click"})},addEventHandlers:function(){var a=this;this.bookingLink.length&&this.options.hackerStayCore&&this.registerEvent("click",this.bookingLink,function(){b.events.publish("hotels.results.HackerStayDetailsModal.open",
a.options.hackerStayCoreModalParams)})}})})(R9);(function(b,e){var d=b.config.getBoolean("ui.horizon.logging.loadingClick",!0);b.createComponentClass("common.booking.MultiBookDropdownItem",{data:{},anchor:null,options:{resultId:"",tagLayerOptions:{},hackerStayCore:!1,hackerStayCoreModalParams:{}},addEventHandlers:function(){var a=this;a.anchor=this.element.find("a");this.registerEvent("click",this.anchor,function(c){c.stopPropagation(c);a.options.hackerStayCore?b.events.publish("hotels.results.HackerStayDetailsModal.open",a.options.hackerStayCoreModalParams):
a.handleClick();return!1});var c=this.getChildElement("nonInstantBookIcon");c.length&&c.toolTip({content:c.data("message"),showImmediately:!1})},handleClick:function(a,c){this.data={resultId:this.options.resultId,uiResultId:this.options.uiResultId,url:this.anchor.attr("href"),code:this.anchor.data("code"),fareCode:this.options.optionData&&this.options.optionData.fareFamilyCode,name:this.anchor.data("name"),target:this.anchor.data("target"),clickoutWarningDialog:this.options.clickoutWarning&&!this.options.splitResultView,
clickoutDetailsDialog:this.options.clickoutDetailsDialog,noExternalRedirect:this.options.preventExternalRedirect,splitProvider:this.options.hackerStayCore,splitResultView:this.options.splitResultView};b.events.publish("clickout.open",{data:this.data,element:this.element,event:a,callback:this.logSelectEvent.bind(this,c)});b.events.publish("tagDataLayer.clickout",this.options.tagLayerOptions)},logSelectEvent:function(a){a=a||"booking-link";this.options.hackerStayCore||b.Analytics.api.trackEvent({category:a,
action:"click",label:this.options.loggingPrefix,value:void 0});d&&!b.question.ask("resultspage.poll.ended")&&b.Analytics.api.trackEvent({category:a,action:"loading-click",label:this.options.loggingPrefix,value:void 0})}})})(R9,jQuery);(function(c,d){c.createComponentClass("common.booking.DropdownMultibookProvidersList",{templates:{multibookItem:"multibookDropdownItem",overflowLink:"multibookOverflowLink"},options:{loggingPrefix:"",promoParams:null,analyticsTrackingEvent:null,resultId:"",foreignWarnTooltip:"",showMultibookOverflow:!0,providerTagList:null},overflowProvidersCount:0,privateRatesButton:null,providersGrid:null,list:null,init:function(){this.list=this.getChildElement("list");this.multibookOverflow=this.getChildElement("overflow");
this.privateRatesButton=this.getChildElement("inlinePrivateRatesButton");this.providersGrid=this.getChildElement("providersGrid")},addEventHandlers:function(){var a=this;a.privateRatesButton&&a.privateRatesButton.length&&window.requestAnimationFrame(function(){60<a.providersGrid.innerHeight()&&a.privateRatesButton.addClass("mini")});a.registerEvent("click",a.element.find(".bookingLink[data-name]"),a.linkClicked.bind(a));a.registerEvent("click",a.list.find(".Common-Booking-MultiBookDropdownItem"),
a.linkClicked.bind(a));a.element.find(".foreignProvider").toolTip({content:a.options.foreignWarnTooltip,position:"top",showImmediately:!1});a.getChildElement("inlinePrivateRatesButton").click(function(){c.Analytics.api.trackEvent({category:a.options.loggingPrefix+"/multibook",action:"signIn",label:"privateRateButton"});var b=d.extend({regurl:a.options.promoParams.promo},a.options.promoParams);c.authentication.showLogin(b)});a.getChildElement("privateRatesButton").click(function(){var b=d.extend({regurl:a.options.promoParams.promo},
a.options.promoParams);c.authentication.showLogin(b)});a.multibookOverflow.click(a.overflowClicked.bind(a));a.element.find(".foreignProvider").toolTip({content:a.options.foreignWarnTooltip,position:"right",showImmediately:!1});a.list.find(".bookingLink.hasPenalty").toolTip({content:a.options.hasPenaltyTooltip,position:"right",showImmediately:!1});a.subscribe(a.getEvent("multibook.reset"),function(){a.list.html("");a.element.removeClass("ShowDropdown").removeClass("Show")});a.subscribe("DropdownDialog.close",
{id:a.id("dropdown")},function(){c.Analytics.api.trackEvent(a.options.loggingPrefix+"/multibook/close")})},overflowClicked:function(){c.events.publish("multibook.overflowLink.clicked");this.options.showMultibookOverflow?this.list.addClass("showOverflow"):this.closeDropdown()},linkClicked:function(a){var b=this;d(a.currentTarget).attr("href")&&(c.events.publish("clickout.open",{data:{resultId:b.options.resultId},element:d(a.currentTarget),event:a,callback:function(){b.options.analyticsTrackingEvent&&
c.Analytics.api.trackEvent(b.options.analyticsTrackingEvent)}}),null!==b.options.providerTagList&&(a=b.findSelectedProviderOptions(d(a.currentTarget).data()),null!==a&&(a.resultId=b.options.resultId,c.events.publish("hotel.clickout",a))))},findSelectedProviderOptions:function(a){for(var b=0;b<this.options.providerTagList.length;b++)if(this.options.providerTagList[b].providerName===a.name&&this.options.providerTagList[b].providerCode===a.code)return this.options.providerTagList[b];return null},getEvent:function(a){return a+
(this.options.resultId?"."+this.options.resultId:"")},closeDropdown:function(){this.getChildElement("dropdown").getWidget().close()}})})(R9,jQuery);function ownKeys(c,d){var b=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);d&&(a=a.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}));b.push.apply(b,a)}return b}
function _objectSpread(c){for(var d=1;d<arguments.length;d++){var b=null!=arguments[d]?arguments[d]:{};d%2?ownKeys(b,!0).forEach(function(a){_defineProperty(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}
function _defineProperty(c,d,b){d in c?Object.defineProperty(c,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[d]=b;return c}
(function(c,d){c.createComponentClass("hotels.results.HotelResultBookingColumnV2",{bookButton:null,providerLink:null,providerInfo:null,freebiesTooltip:null,resultOptionsMenu:null,options:{resultId:"",searchId:"",bestProvider:null,showBestValueBadge:!1,isCallForPrice:!1,isHackerStayBigPrice:!1,bestTagLayerOptions:{},isBigPriceHackerStayCore:!1,hackerStayCoreModalParams:{},showWorstPriceDisclaimer:!1,providerUrl:"",providerTargetWindow:"",loggingPrefix:"",disableBookButton:!1,animationDelay:400,swapColors:!1},
init:function(){this.bookButton=this.getChildElement("bookButton");this.providerLink=this.getChildElement("provider");this.providerInfo=this.options.bestProvider;this.freebiesTooltip=this.getChildElement("freebiesTooltip");this.resultOptionsMenu=this.getChildElement("optionsMenu");this.priceTrendDirection=this.getChildElement("priceTrendDirection");this.memberRateClickout=this.getChildElement("memberRateClickout");this.memberRateSavings=this.getChildElement("memberRatesSavings");this.savingsTooltip=
this.getChildElement("savingsTooltip");this.geniusRateTooltip=this.getChildElement("geniusRateTooltip")},addEventHandlers:function(){var b=this;this.options.isCallForPrice?this.registerEvent("click",this.providerLink,function(){c.Analytics.api.trackEvent("/call/click")}):this.options.disableBookButton||(this.registerEvent("click",this.bookButton,this.providerClicked.bind(this,"buttonClicked")),this.registerEvent("click",this.providerLink,this.providerClicked.bind(this,"linkClicked")),this.memberRateClickout&&
this.memberRateClickout.length&&this.registerEvent("click",this.memberRateClickout,this.providerClicked.bind(this,"memberRateHeaderClicked")),this.memberRateSavings&&this.memberRateSavings.length&&this.registerEvent("click",this.memberRateSavings,this.providerClicked.bind(this,"memberRateSavingsPercentClicked")));this.savingsTooltip&&this.savingsTooltip.length&&this.registerEvent("click",this.savingsTooltip,function(){return!1});this.freebiesTooltip&&this.freebiesTooltip.length&&this.registerEvent("click",
this.freebiesTooltip,function(){c.events.publish("hotels.results.freebiesModal.show")});this.geniusRateTooltip&&this.geniusRateTooltip.length&&this.registerEvent("mouseenter",this.geniusRateTooltip,function(){c.Analytics.api.trackEvent("/hotel/results/geniusTooltip")});this.registerEvent("click",this.resultOptionsMenu,function(){c.events.publish("hotels.results.item.optionsMenu.show",{resultId:b.options.resultId})});if(this.options.showWorstPriceDisclaimer){var a=this.getChildElement("strikePrice");
a.toolTip({content:a.data("message")})}this.options.showBestValueBadge&&(a=this.getChildElement("bestValue"),a.toolTip({content:a.data("message")}));(a=this.getChildElement("savingsTooltip"))&&a.toolTip({content:a.data("message"),showImmediately:!1});(a=this.getChildElement("geniusRateTooltip"))&&a.toolTip({content:a.data("message"),showImmediately:!1});(a=this.getChildElement("nonInstantIcon"))&&a.toolTip({content:a.data("message"),showImmediately:!1});this.priceTrendDirection&&this.priceTrendDirection.length&&
!this.options.swapColors&&(this.providerLink.on("mouseenter",function(){b.swapClasses(b.priceTrendDirection,"Provider__Price--PredictionLabel__DirectionStandard","Provider__Price--PredictionLabel__DirectionStandard--hover")}),this.providerLink.on("mouseleave",function(){b.swapClasses(b.priceTrendDirection,"Provider__Price--PredictionLabel__DirectionStandard--hover","Provider__Price--PredictionLabel__DirectionStandard")}),this.providerLink.on("focus",function(){b.swapClasses(b.priceTrendDirection,
"Provider__Price--PredictionLabel__DirectionStandard","Provider__Price--PredictionLabel__DirectionStandard--hover")}),this.providerLink.on("blur",function(){b.swapClasses(b.priceTrendDirection,"Provider__Price--PredictionLabel__DirectionStandard--hover","Provider__Price--PredictionLabel__DirectionStandard")}))},providerClicked:function(b,a){a.stopPropagation();if(this.options.isBigPriceHackerStayCore)c.events.publish("hotels.results.HackerStayDetailsModal.open",this.options.hackerStayCoreModalParams);
else if(this.providerInfo){var e="%s/multibook/%s%s".format(this.options.loggingPrefix,b,this.providerInfo.priceInfo?"/"+this.providerInfo.priceInfo:"");c.events.publish("clickout.open",{data:_objectSpread({},this.providerInfo,{resultId:this.options.resultId}),element:d(a.currentTarget),event:a,callback:function(){c.Analytics.api.trackEvent(e)}});c.events.publish("hotel.clickout",this.options.bestTagLayerOptions)}else this.options.providerUrl&&window.open(this.options.providerUrl,this.options.providerTargetWindow)}})})(R9,
jQuery);(function(c,f){c.createComponentClass("hotels.results.HotelResultBookingColumn",{bookButton:null,bestProvider:null,fastShare:null,options:{resultId:"",searchId:"",bestProvider:null,isCallForPrice:!1,cancellationToolTipEnabled:!1,isHackerStayBigPrice:!1,underpricedAvailable:!1,promoParams:null,showWorstPriceDisclaimer:!1,showHackerStaySavings:!1,bestTagLayerOptions:{},isBigPriceHackerStayCore:!1,hackerStayCoreModalParams:{}},init:function(){this.bookButton=this.getChildElement("bookButton");this.bestProvider=
this.options.bestProvider;if(this.options.isHackerStayBigPrice){var a=this.element.find(".hackerBadge");0<a.length&&a.toolTip({content:a.data("message"),extraClass:this.options.tooltipExtraClass})}this.options.underpricedAvailable&&(a=this.getChildElement("underpricedInfoIcon"),0<a.length&&a.toolTip({content:a.data("message"),extraClass:this.options.tooltipExtraClass}));if(this.options.showWorstPriceDisclaimer||this.options.showHackerStaySavings){var b=this.getChildElement("worstPrice");0<b.length&&
b.toolTip({content:function(){return b.data("message")},position:"top",showImmediately:!1})}},addEventHandlers:function(){var a=this;this.registerEvent("click",this.getChildElement("signInButton"),function(b){b.preventDefault();b.stopPropagation();b=f.extend({regurl:a.options.promoParams.promo},a.options.promoParams);c.authentication.showLogin(b)});this.getChildElement("roomCompare").click(function(){a.compareRoomsClicked(f(this))});this.bookButton.off("click");this.bookButton.hasClass("noAction")||
this.registerEvent("click",this.bookButton,function(b){if(a.options.isBigPriceHackerStayCore)c.events.publish("hotels.results.HackerStayDetailsModal.open",a.options.hackerStayCoreModalParams);else{if(a.bestProvider){var d="%s/multibook/buttonClicked%s".format(a.options.loggingPrefix,a.bestProvider.priceInfo?"/"+a.bestProvider.priceInfo:"");c.events.publish("clickout.open",{data:{resultId:a.options.resultId,code:a.bestProvider.code,name:a.bestProvider.name,splitProvider:a.bestProvider.splitProvider,
url:a.bestProvider.url},element:f(b.currentTarget),event:b,callback:function(){c.Analytics.api.trackEvent(d)}});c.events.publish("hotel.clickout",a.options.bestTagLayerOptions)}b.stopPropagation()}});var b=this.getChildElement("featured");b.attr("href")===a.options.noPriceFlag&&(b.attr("href","javascript:void(0)"),b.removeAttr("target"),this.registerEvent("click",b,function(){a.options.isCallForPrice?b.parent().toggleClass("showPriceSource"):c.events.publish("hotels.results.openPageOrToggle",{resultId:a.options.resultId,
force:!0,tab:"overview"})}));this.registerEvent("click",b,function(b){b.stopPropagation();c.Analytics.api.trackEvent("result/featuredPrice/click");if(a.options.isBigPriceHackerStayCore)return c.events.publish("hotels.results.HackerStayDetailsModal.open",a.options.hackerStayCoreModalParams),!1;c.events.publish("clickout.open",{data:{resultId:a.options.resultId},element:f(b.currentTarget),event:b});c.events.publish("hotel.clickout",a.options.bestTagLayerOptions)});if(this.options.cancellationToolTipEnabled){var d=
this.getChildElement("cancellationInfoIcon");0<d.length&&d.toolTip({content:d.data("message"),extraClass:"halfWidth "});this.registerEvent("mouseenter",d,function(){c.Analytics.api.trackEvent("freecancel/tooltip/hover")});this.registerEvent("click",d,function(){c.Analytics.api.trackEvent("freecancel/tooltip/click")})}var e=a.getChildElement("underpricedTooltip");this.registerEvent("mouseenter",this.element.find(".col-underpriced"),function(b){a.positionPopover(this,e);e.fadeIn("fast");jq("body").append(e)});
this.registerEvent("mouseleave",this.element.find(".col-underpriced"),function(b){e.fadeOut("fast",function(){a.element.append(e)})})},providerClicked:function(a,b,d){c.events.publish("multibook.providerClicked",{resultId:this.options.resultId,afterclickIgnore:d});c.events.publish("provider.book.click",{resultId:this.options.resultId,providerName:b,providerCode:a})},compareRoomsClicked:function(a){var b=a.attr("data-target")||"_blank";a=a.attr("data-url");c.Analytics.api.trackEvent("results/whisky/compare");
window.open(a,b)},positionPopover:function(a,b){a=jq(a).offset();b.css({top:a.top+85,left:a.left-jq(b).outerWidth()-13})}})})(R9,jQuery);(function(a,c){a.createComponentClass("hotels.results.SimpleResultFooter",{verification:null,init:function(){(this.verification=this.element.find(".verified"))&&a.Analytics.api.trackEvent({category:"impression",action:"hotel/result/empreview/"+this.options.searchId+"/"+this.options.resultId})},addEventHandlers:function(){var a=this;if(this.verification)a.element.on("keypress",function(b){b.stopPropagation();a.toggleDetails()})},toggleDetails:function(){a.events.publish("hotels.results.openPageOrToggle",
{resultId:this.options.resultId,force:null,tab:"overview"})}})})(R9,jQuery);(function(c,b){c.createComponentClass("hotels.results.HotelClickOutDataLayer",{options:{resultId:"",searchId:"",providerName:null,providerCode:null,providerCurrency:null,price:null,startDate:null,endDate:null,hotelName:null,hotelId:null,brandNam:null,brandI:null,parentBrandId:null,starRating:null},addEventHandlers:function(){var d=this;this.subscribe(["hotel.clickout","tagDataLayer.clickout"],{resultId:d.options.resultId},function(e){var a=e||{},a=b.extend(d.options,a);b.each(a,function(c,b){""!==
b&&null!==b||delete a[c]});if("undefined"===typeof a.price||"checkrate"===a.price||"info"===a.price||-1===a.price)a.price=null;c.events.publish("tags.dataLayer.push",a)})}})})(R9,jQuery);(function(c,p){c.createComponentClass("hotels.common.HotelInteractHistory",{options:{maxHistoryItems:30,expirationDelayHours:360,structureVersion:"v2"},localHistory:null,pageTab:"hotels",storedInteractions:null,init:function(){this.bindLocalHistory()},addEventHandlers:function(){this.subscribe("previousHotels.clearClicked",this.clearInteractions.bind(this))},bindLocalHistory:function(){this.localHistory=new c.common.utils.history.UserHistory({tab:this.pageTab,persistLocalStorage:!0})},getInteractions:function(){var a=
this;if(this.storedInteractions=this.localHistory.get("interactions"))this.storedInteractions=this.storedInteractions.slice(),this.storedInteractions=this.storedInteractions.filter(function(b){return null!==b&&b.version&&b.version===a.options.structureVersion&&!a.isExpired(b.expiresAt)});return this.storedInteractions},pushInteractionData:function(a,b,c,d,e,f,g,h,k,l,m,n){a={version:this.options.structureVersion,hotelId:a,cityId:b,arriveDate:c,departDate:d,cheapestPrice:e,createdAt:this.createExpirationTimestamp(),
expiresAt:this.createExpirationTimestamp(this.options.expirationDelayHours),hotelName:f,showRating:g,starRatingDestinyHotel:h,useStarRatingDestinyHotel:k,userRating:l,userRatingDescription:m,searchUrl:n};this.localHistory.pushHotelInteractHistoryItem("interactions",a,this.options.maxHistoryItems)},createExpirationTimestamp:function(a){return moment().add(a||0,"hours").toDate()},isExpired:function(a){return 0<moment().diff(moment(a))},clearInteractions:function(){this.localHistory.set("interactions",
[])}})})(window.R9,window.jQuery);(function(c,e){var f=c.config.getString("ui.horizon.common.core.focusOutlineClass","a11y-focused"),g=c.config.getBoolean("ui.horizon.logging.loadingClick",!0);c.createComponentClass("base.results.HorizonResult",{detailsComponentUrl:null,open:!1,options:{resultId:null,uiResultId:null,searchId:null,openDetailsTab:"",detailsEnabled:!0,showDetailsLinkVisible:!1,promoParams:null,isSEO:!1,alwaysOpen:!1,tripTicketSleeveEnabled:!1,listIndex:-1,verticalSymbol:"",outlineWrapperOnFocus:!1,trackingEnabled:!1},
awaitingDetails:!1,hasDetails:!1,detailsContainer:e(),inlineContent:null,cheapest:null,lastActiveTab:null,init:function(){var a=this.options;this.cheapest=this.getChildElement("cheapest");this.detailsWrapper=this.getChildElement("detailsWrapper");this.detailsContent=this.getChildElement("detailsContent");this.open=this.element.hasClass("DetailOpen");this.hasDetails=!!a.openDetailsTab||this.element.hasClass("DetailOpen");this.defaultTicketHeader=this.getChildElement("ticketHeader--default");this.defaultTicketSleeve=
this.getChildElement("ticketSleeve--default");this.overlayTicketHeader=this.getChildElement("ticketHeader--overlay");this.overlayTicketSleeve=this.getChildElement("ticketSleeve--overlay");this.open&&(this.lastActiveTab=c.question.ask("active.tab.of.result.details."+this.options.resultId))},addEventHandlers:function(){var a=this;this.subscribe("result.details.open",{resultId:this.options.uiResultId},function(b){a.ensureOpened(b.activeTab,b.force)});this.subscribe("result.details.toggle",{resultId:this.options.uiResultId},
function(b){a.open?a.ensureClosed():a.ensureOpened(b.activeTab,b.force)});this.subscribe("result.details.close",this.options.uiResultId,function(){a.ensureClosed()});this.subscribe("result.details.opened",{resultId:this.options.uiResultId},function(){a.element.addClass("Opened LastOpened")});this.subscribe("result.details.opened",{resultId:this.options.uiResultId},function(b){a.options.uiResultId!==b.resultId&&a.element.removeClass("LastOpened")});this.subscribe("result.details.adjusted",this.options.uiResultId,
function(){a.toggleHeight()});this.registerEvent("click",this.cheapest,function(b){c.events.publish("clickout.open",{data:{resultId:a.options.resultId},element:e(b.currentTarget),event:b,callback:function(){c.Analytics.api.trackEvent("resultItem/cheapest/clickthrough")}})});var d=this.getChildElement("skip");d.length&&this.registerEvent("click",d,function(b){b=e("[tabbable]");var c=b.index(a.element)+1;c>=b.length&&(c=0);b.eq(c).get(0).focus()});a.options.tripTicketSleeveEnabled&&(this.subscribe("resultItem.saved",
{resultItemId:this.options.resultId},function(b){a.addTripTicketHeader(a.options.resultId,b.tripId)}),this.subscribe("resultItem.removed",{resultItemId:this.options.resultId},function(){a.removeTripTicketHeader()}));this.options.outlineWrapperOnFocus&&(this.registerEvent("focus",this.element,this.toggleWrapperFocus.bind(this,!0)),this.registerEvent("blur",this.element,this.toggleWrapperFocus.bind(this,!1)));this.answer("results.HorizonResult.index.of."+this.options.uiResultId,function(){return a.options.listIndex});
this.options.detailsEnabled&&this.subscribe("result.details.tab.changed",{resultId:a.options.resultId},function(b){(a.lastActiveTab=b.activeTab)&&a.trackDetailsCategory({resultId:a.options.resultId,activeTab:b.activeTab})});this.subscribe("track.result.details.open",{resultId:this.options.uiResultId},function(b){a.trackDetailsCategory(b)})},inlineComponentsReady:function(){this.markFirstRendered();this.options.isSEO||this.toggleHeight()},markFirstRendered:function(){c.utils.performance.mark("first_result_rendered")},
toggleOpen:function(a,d,b){if(this.options.detailsEnabled){if("undefined"!==typeof a&&null!==a)if(a){var e=c.config.getBoolean("ui.horizon.flights.details.skipForce",!1);e&&this.open?this.ensureOpened(d,a):e||this.ensureOpened(d,a)}else this.ensureClosed();else this.open=this.options.alwaysOpen||!this.open,this.toggleHeight(),this[this.open?"detailsDidOpen":"detailsDidClose"](d);this.trackDetailsToggle(b)}},ensureOpened:function(a,c){this.options.detailsEnabled&&(!this.open||c?(this.open=!0,this.toggleHeight(),
this.detailsDidOpen(a)):this.toggleHeight())},detailsDidOpen:function(a){this.lastActiveTab=a;this.element.toggleClass("DetailOpen",!0);(this.detailsWrapper.length?this.detailsWrapper:this.detailsContent).attr("aria-expanded",!0);c.events.publish("result.details.opened",{resultId:this.options.uiResultId,activeTab:a});this.trackDetailsCategory({activeTab:a,resultId:this.options.uiResultId})},ensureClosed:function(){this.options.detailsEnabled&&(this.open?(this.open=!1,this.toggleHeight(),this.detailsDidClose()):
this.toggleHeight())},detailsDidClose:function(){this.element.toggleClass("DetailOpen",!1);(this.detailsWrapper.length?this.detailsWrapper:this.detailsContent).attr("aria-expanded",!1);c.events.publish("result.details.closed",{resultId:this.options.uiResultId})},trackDetailsToggle:function(a){var d="inlinedetails",b=this.open?"show":"hide";a&&(d=d+"/"+a);c.Analytics.api.trackEvent({category:d,action:b});g&&!c.question.ask("resultspage.poll.ended")&&c.Analytics.api.trackEvent({category:"inlinedetails",
action:"loading-click"+(a?"/"+a:""),label:b})},toggleHeight:function(){var a=this;this.open?(this.detailsWrapper.css("display","block"),this.detailsWrapper.css("height","auto")):(this.detailsWrapper.height(0),this.detailsWrapper.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(c){0===a.detailsWrapper.height()&&a.detailsWrapper.css("display","none")}))},addTripTicketHeader:function(a,d){var b=this;c.ajax.execute("common/trips/TripResultHeader",{data:{resultId:a,
activeTripId:d,listIndex:b.options.listIndex,verticalSymbol:b.options.verticalSymbol},appendTo:b.overlayTicketHeader,replace:!0}).done(function(a){b.showOverlayTicketHeader()})},removeTripTicketHeader:function(){this.overlayTicketHeader.empty();this.hideOverlayTicketHeader()},showOverlayTicketHeader:function(){this.defaultTicketHeader.addClass("hidden");this.defaultTicketSleeve.addClass("hidden");this.overlayTicketHeader.removeClass("hidden");this.overlayTicketSleeve.removeClass("hidden")},hideOverlayTicketHeader:function(){this.overlayTicketHeader.addClass("hidden");
this.overlayTicketSleeve.addClass("hidden");this.defaultTicketHeader.removeClass("hidden");this.defaultTicketSleeve.removeClass("hidden")},toggleWrapperFocus:function(a){this.element.find(".resultWrapper").toggleClass(f,a)},trackingEnabled:function(){return this.options.trackingEnabled&&c.Vestigo},trackDetailsCategory:function(a){a.activeTab=a.activeTab||"overview";if(this.trackingEnabled()){var d=c.VestigoType.ResultDetailsCategory[a.activeTab];d&&c.VestigoEvents.resultdetails.category(d,a.resultId,
this.options.listIndex,c.VestigoType.Visible.show,a.source?c.VestigoType.ResultDetailsSource[a.source]:void 0)}}})})(R9,jQuery);(function(c,d){c.createComponentClass("hotels.results.HotelResultItem","base.results.HorizonResult",{initTab:"overview",title:null,currentTab:"overview",heightSet:!1,options:{resultId:"",toolTipEnabled:!1,noPriceFlag:"",showHotelLinkVisible:!0,tripId:null,displayPrice:null,perNightUSDPrice:"",cheapestUSDPricePerNight:"",isCallForPrice:!1,stars:null,brand:null,phone:"",checkinDate:null,checkoutDate:null,formattedCheckinDate:null,formattedCheckoutDate:null,cancellationToolTipEnabled:!1,isSEO:!1,isBuzzResult:!1,
disableEventsUntilSearchCompleted:!0,preloadDetails:!1,preloadDetailsOnHover:!1,preloadDetailsOnClick:!1,preloadedTabsOnClick:[],scrollIntoViewOnExpand:!1,photosFirst:!1,isSelectedHotel:!1,isMomondo:!1,isBusinessMode:!1,travelPolicyApprovalModeName:"NO_APPROVAL",businessEventState:null,bookOnBehalfActionState:null,doesClickOpenDetailsPage:!1},init:function(){this.base();this.dataResultId=this.element.data("resultid");var a=this.options;a.isUserLoggedIn&&c.storage.get("hotels.results.watch.pending")&&
c.storage.get("hotels.results.watch.pending")===parseInt(this.dataResultId,10)&&(c.storage.remove("hotels.results.watch.pending"),this.handleWatch());this.adjustHBOFontSize();a.isSEO&&(this.hasDetails=!0,this.open=!1)},addEventHandlers:function(){this.base();var a=this;this.options.isBuzzResult||(this.options.disableEventsUntilSearchCompleted?this.options.searchCompleted&&this.setInlineDetailsEvents():this.setInlineDetailsEvents());!this.options.isBuzzResult&&this.options.searchCompleted&&this.setDebugPanelEvents();
this.registerEvent("mouseleave",function(){c.events.publish("hotel.result.mouseleave",{resultId:a.options.resultId})});this.subscribe("common.results.updateTripId",function(b){b&&b.hasOwnProperty("tripId")&&b.hasOwnProperty("resultId")&&a.options.resultId===b.resultId&&(a.options.tripId=b.tripId)});this.trackBookit();this.subscribe("watch",{resultId:this.options.resultId,searchId:this.options.searchId},a.toggleWatch.bind(a));this.subscribe("watching",{resultId:a.options.resultId,searchId:a.options.searchId},
function(){a.options.hasActivePriceAlert=!0});this.subscribe("showPriceAlertDriveBy",{resultId:a.options.resultId,searchId:a.options.searchId},this.showDriveByAlertDialog.bind(this));this.registerEvent("click","hbo",function(){var b=d(this).data("href");c.Analytics.api.trackEvent("/hbo/clicked/"+a.options.brand);window.open(b)});this.registerEvent("click","hbo a",function(a){a.stopPropagation()});this.options.isSEO&&this.subscribe("hotel.inline.detail.changeTab",{resultId:a.options.resultId},function(b){a.options.currentTab!==
b.tab&&(d(".inlineTab[data-tab\x3d'"+b.tab+"']",a.element).addClass("active"),c.events.publish("hotel.inline.detail.tabs.showClose",{resultId:a.options.resultId}))});this.subscribe("hotels.results.openPageOrToggle",function(b){!(b&&b.hasOwnProperty("resultId")&&b.resultId===a.options.resultId&&b.hasOwnProperty("force")&&b.hasOwnProperty("tab"))||b.dontOpenDetailsPage&&a.options.doesClickOpenDetailsPage||(a.openDetailsPageOrToggleOpen(a.options.isSEO||b.force,b.tab),a.trackDetailsCategory({resultId:b.resultId,
activeTab:b.tab,source:b.source}))});this.subscribe("hotels.results.openDetails",function(b){b&&b.hasOwnProperty("resultId")&&b.resultId===a.options.resultId&&a.openDetailsPage(b.tab)});this.subscribe("hotels.results.interaction",function(b){b===a.options.resultId&&a.saveHotelInteraction()});this.registerEvent("click",d(".badge-transitBus",this.element),function(b){a.openDetailsPageOrToggleOpen(null,"map");b.stopPropagation()});this.getChildElement("details-skip").click(function(){a.openDetailsPageOrToggleOpen(!0)})},
setInlineDetailsEvents:function(){var a=this;this.registerEvent("click",function(b){1>d(b.target).closest("a,button,.tabContent,.inlineTabs,.titleContainer,.inline-detail-link,.showMoreMultiBookOptions,.detailsWrapper,.searchFormFieldWrapper,.moreDetails,.Hotels-Cityhotels-ResultItemSearchForm,.locationContainer,.reviewGrid,.address,.roomCompare,.compare-toggle-wrapper,.js-freebies-tooltip,.js-htc-skip-open,.Common-Results-Mercury-HotelRecommendation,.location-link").length&&(d(b.target).hasClass("js-show-deals-trigger")?
a.openDetailsPageOrToggleOpen(null,"rates"):d(b.target).hasClass("deal-banner")?a.openDetailsPageOrToggleOpen(null,"rates"):a.openDetailsPageOrToggleOpen(null),c.events.publish("hotel.result.click",{resultId:a.options.resultId}))});this.subscribe("result.details.tab.changed",{resultId:a.options.resultId},function(b){a.currentTab=b.activeTab});this.registerEvent("click",this.getChildElement("detailsLink"),function(){a.openDetailsPageOrToggleOpen(null,null)})},setDebugPanelEvents:function(){var a=this;
this.subscribe("common.result.admin.rankingdebug.show",{},function(){a.openRankingDebugPanel()});this.subscribe("common.result.admin.rankingdebug.hide",{},function(){a.closeRankingDebugPanel()});this.registerEvent("click",this.getChildElement("show-rank-debug-link"),function(b){b.stopPropagation();a.toggleRankingDebugPanel()});this.registerEvent("click",this.getChildElement("hide-rank-debug-link"),function(b){b.stopPropagation();a.toggleRankingDebugPanel()})},toggleWatch:function(){if(this.options.isUserLoggedIn)this.handleWatch();
else{c.storage.set("hotels.results.watch.pending",this.dataResultId);var a={promoType:"watch",promo:"watch",showSingleImage:!0,messageParams:[this.options.name,[this.options.formattedCheckinDate,this.options.formattedCheckoutDate].join(" - ")]};c.authentication.showLogin(a)}},handleWatch:function(){var a=this,b=moment(this.options.checkinDate),e=moment(this.options.checkoutDate),b={method:"post",headers:{"X-CSRF":c.globals.formtoken},data:{dt:5,startDate:b.format(c.globals.apiDateFormat),endDate:e.format(c.globals.apiDateFormat),
sendFrequency:1,"deliveryType[]":"email",citycode:this.options.ctid,hid:this.options.hotelId,rooms:this.options.rooms,guests:this.options.guests,email:!0}};d.ajax("/h/hermes/prefs/ajax/alert/v1",b).then(function(b){b.success&&(a.watchId=b.alertId,c.events.publish("watching",{resultId:a.options.resultId,searchId:a.options.searchId}))})},openDetailsPageOrToggleOpen:function(a,b){a=this.options.detailsPageURL;this.options.doesClickOpenDetailsPage&&a&&this.openDetailsPage(b);!this.open&&this.options.scrollIntoViewOnExpand&&
this.scrollIntoView();c.events.publish("hotel.inline.detail.scroll",{resultId:this.options.resultId})},openDetailsPage:function(a){var b=this.options.detailsPageURL;a&&(b=0<b.indexOf("#")?b.replace(/#(\w)+/,"#"+a):b+"#"+a);c.Analytics.api.trackEvent({category:"hotelResultItem",action:"openDetailsPage"});this.options.detailsPageInSameWindow?window.location.href=b:window.open(b,this.options.resultId)},scrollIntoView:function(){var a=this.element.offset().top,b=a+this.element.height()+400,c=d(window).height()+
d(window).scrollTop();b>c&&d("html, body").animate({scrollTop:a-10},300)},toggleRankingDebugPanel:function(){this.getChildElement("show-rank-debug-link").toggle();this.getChildElement("hide-rank-debug-link").toggle();this.getChildElement("ranking-debug-panel").toggle()},openRankingDebugPanel:function(){this.getChildElement("show-rank-debug-link").hide();this.getChildElement("hide-rank-debug-link").show();this.getChildElement("ranking-debug-panel").show()},closeRankingDebugPanel:function(){this.getChildElement("show-rank-debug-link").show();
this.getChildElement("hide-rank-debug-link").hide();this.getChildElement("ranking-debug-panel").hide()},trackBookit:function(){var a=this;c.config.getBoolean("ui.tracking.gtm.bookit.enabled",!1)&&this.subscribe("provider.book.click",function(b){if(a.options.resultId===b.resultId){var e=-1<["KAYAK","SWOODOO","CHECKFELIX"].indexOf(b.providerName)?"checkout":"book",f=d.extend(b,{pageType:"interstitial",rate:1,hotelName:a.options.name,brand:a.options.brand,brandId:a.options.brandId,parentBrandId:a.options.parentBrandId,
starRating:a.options.stars});setTimeout(function(){c.events.publish("gtm.update",{event:e,pageId:e,subPageId:b.providerName,pixelContext:f})},1)}})},adjustHBOFontSize:function(){var a=this.element.find(".hbo-message"),b;a.length&&a.width()>a.closest(".hbo").width()&&(b=parseInt(a.css("fontSize"),10)-1,11<=b&&(a.css({fontSize:parseInt(a.css("fontSize"),10)-1}),this.adjustHBOFontSize.call(this)))},showDriveByAlertDialog:function(){c.ajax.execute("hotels/results/HotelPriceAlertDriveBy",{data:{searchId:this.options.searchId,
resultId:this.options.resultId},replace:!0})}})})(R9,jQuery);(new R9.logger).timeEnd("combined");