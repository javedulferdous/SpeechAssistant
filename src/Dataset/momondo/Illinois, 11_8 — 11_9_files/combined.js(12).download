(new R9.logger).time("combined");(function(f){function g(a,b,e){var c=Array.isArray,d=(new Date).getTime();b=isNaN(b)?2:b;e=isNaN(e)?864E5:e;if(1>b)return!1;if(c&&!c(a)||!c&&"[object Array]"!==Object.prototype.toString.call(a))a=[];if(!a||a.length<b)return a?a.concat(d):[d];for(c=0;c<b;c++)if(isNaN(a[c])&&(a[c]=0),d-a[c]>e)return a[c]=d,a;return!1}function h(a,b){if(!f.storage.isAvailable()||!a)return null;(a=f.storage.get(a))||(a={});b in a||(a[b]=[]);return a}f.publish("common.compareto.dialog.TimeUtil",{DeltaTimer:function(a,
b){function e(){var d=Date.now(),g=Math.max((b||0)-(d-f),0);c=setTimeout(e,g);f=d+g;a(d)}var c,d,f;this.start=function(a){d=setTimeout(e,a?a:0);return f=Date.now()};this.stop=function(){clearTimeout(c);clearTimeout(d);return f}},canStartTimer:function(a,b,e,c){return(a=h(a,b))&&-1!==e?!!g(a[b],e,c):!0},addToStorage:function(a,b,e,c){var d=h(a,b);return d?(e=g(d[b],e,c))?(d[b]=e,f.storage.set(a,d),!0):!1:!1}})})(window.R9);(function(c,d){c.createComponentClass("common.compareto.dialog.CompareToModalDialog",{options:{searchId:"",trackEventCategory:"TimeOutRightRailsDialog",vertical:"",logImpressionsAndClicks:!1},destroySuffix:"destroy",idleTimer:null,destroyedTimer:!1,init:function(){var a=this.options;c.events.publish("dialogs.close");c.events.publish("FilterDropdownDialog.close");this.dialogEl=this.getChildElement("dialog");this.dialog=this.dialogEl.dialog({openImmediately:!0,onClose:d.proxy(this.onDialogClose,this)}).getWidget();
c.Analytics.api.trackEvent({category:a.trackEventCategory,action:"dialog-open"});this.updateStorage()},updateStorage:function(){var a=this.options,b=a.modalSettings;return c.common.compareto.dialog.TimeUtil.addToStorage(b.storageKey,a.vertical,b.rateLimitCount,b.rateLimitPeriod)},addEventHandlers:function(){var a=this,b=a.options;a.subscribe("resultspage.searchId.changed",function(c){var e=b.searchId;c&&e!==c.searchId&&a.dialog.close()});a.subscribe("resultspage.cleanup",function(){a.dialog.close()});
a.bindCompareAllButton();a.getChildElement("close").on("click",function(){c.Analytics.api.trackEvent({category:b.trackEventCategory,action:"close-icon-click"});a.dialog.close()});var e=d(".provider-item-row",a.getChildElement("dialog-content"));this.logImpressions(e);e.on("click",function(b){a.options.logImpressionsAndClicks&&c.Analytics.api.trackEvent({category:"rr",action:"popup",label:d(b.currentTarget).data("providerCode"),value:"click"})})},bindCompareAllButton:function(){var a=this,b=a.options,
e={type:b.vertical,placement:b.placement,searchId:b.searchId},d=a.getChildElement("compareAll");d.on("click",function(){window["@r9/cmp2-ui"].onDirectClick(b.compareToItems,e);a.options.logImpressionsAndClicks&&c.Analytics.api.trackEvent({category:"rr",action:"popup",label:"compareAll",value:"click"})});d.on("mouseup",function(){window["@r9/cmp2-ui"].onDirectMouseUp(b.compareToItems,e)});d.on("mousedown",function(){window["@r9/cmp2-ui"].onDirectMouseDown(b.compareToItems,e)})},onDialogClose:function(){c.Analytics.api.trackEvent({category:this.options.trackEventCategory,
action:"dialog-close"});this.element.remove();this.destroy()},logImpressions:function(a){this.options.logImpressionsAndClicks&&a.each(function(){c.Analytics.api.trackEvent({category:"rr",action:"popup",label:d(this).data("providerCode"),value:"impression"})})}})})(R9,jQuery);function validateEmail(a){if(!a||!a.match)return!1;a=a.match(/^[A-Z0-9._%+-]{1,63}@(?:[A-Z0-9-]+\.){1,125}[A-Z]{2,63}$/i);return!!(a&&a[0]&&a[0].length)}function replaceArgs(){for(var a=arguments[0],b=1;b<=arguments.length;b++)a=a.replace("{"+(b-1)+"}",arguments[b]);return a}R9.metacookie=R9.metacookie||{};R9.metacookie.saveQueue=R9.metacookie.saveQueue||[];
function saveQueuedMetaCookie(){if(0!=R9.metacookie.saveQueue.length){var a=R9.metacookie.saveQueue[0];jq.ajax({type:"POST",url:"/k/cookie",data:{action:"setmeta",metacookie:a.name,metavalue:a.value,formtoken:R9.globals.formtoken},complete:function(){R9.metacookie.saveQueue.shift();saveQueuedMetaCookie()},success:function(){a.callback()}})}}function setMetaCookie(a,b,c){R9.metacookie.saveQueue.push({name:a,value:b,callback:c||jq.noop});1==R9.metacookie.saveQueue.length&&saveQueuedMetaCookie()}
function deleteMetaCookie(a,b){"function"!==typeof b&&(b=$.noop);jq.ajax({type:"POST",url:"/k/cookie",data:{action:"deletemeta",metacookie:a,formtoken:R9.globals.formtoken},success:b})}jq.ajaxPrefilter("script",function(a){a.cache=!0});(function(c){c.createComponentClass("common.core.RealUserMeasurementsComponent",{options:{fullstoryEnabled:!1},trackedSubmit:!1,addEventHandlers:function(){this.base();this.subscribe("searchform.submit",this.onSearchSubmit.bind(this))},onSearchSubmit:function(a){if(!this.trackedSubmit&&this.options.fullstoryEnabled&&window&&"FS"in window&&a&&a.vertical){this.trackedSubmit=!0;a="did"+this.fixCase(a.vertical)+"Search_bool";var b={};b[a]=!0;FS.setUserVars(b)}},fixCase:function(a){return a.toLowerCase().replace(/(^| )(\w)/g,
function(a){return a.toUpperCase()})}})})(R9);(function(a,c){a.createComponentClass("common.core.MarketingId",{options:{syncUrl:"/s/run/kmkid/sync",setUrl:"/s/run/kmkid/set",suggestedKmkid:null,masterHost:null,runSyncScript:!1},init:function(){this.options.runSyncScript&&this.runSyncAndSet()},runSyncAndSet:function(){c.ajax({type:"POST",url:this.options.masterHost+this.options.syncUrl,data:{suggestedKmkid:this.options.suggestedKmkid},xhrFields:{withCredentials:!0},success:this.onSyncFinished.bind(this)})},onSyncFinished:function(b){b&&(window.R9&&
a.globals&&a.globals.analytics&&a.globals.analytics.pixelContext&&(a.globals.analytics.pixelContext.kmkid=b.kmkid),this.runSet(b.kmkid))},runSet:function(b){c.ajax({type:"POST",headers:{"X-CSRF":a.globals.formtoken},url:this.options.setUrl,data:{kmkid:b}})}})})(R9,jQuery);(function(d,f,e,c){d.createComponentClass("common.core.FullyInvisibleCaptcha",{options:{enabled:!1},init:function(){var a=this;this.options.enabled&&(this.setupCaptchaCallback(),this.initAPI().then(function(){a.fireCaptcha()}))},setupCaptchaCallback:function(){var a=this;c.onReCaptchaSubmit=function(b){a.captchaResult(b)};c.onReCaptchaError=function(a){console.log(a)}},initAPI:function(){var a=f.Deferred();c.recaptchaReady=function(){a.resolve()};var b=e.createElement("script");b.type="text/javascript";
b.async=!0;b.src="https://www.google.com/recaptcha/api.js?onload\x3drecaptchaReady\x26render\x3dexplicit";e.getElementById("recaptcha-root").appendChild(b);return a},fireCaptcha:function(){"undefined"!==typeof grecaptcha&&(grecaptcha.render("captcha",{},!0),grecaptcha.execute())},captchaResult:function(a){d.action.execute("common.core.FullyInvisibleCaptchaAction",{data:a})}})})(R9,jQuery,document,window);(function(e,d){e.createComponentClass("common.core.FastlyTiming",{options:{runTest:!1,measurementUrl:"/fastly-timer",logUrl:"/s/run/fastlytimerlog"},init:function(){this.options.runTest&&this.runTimingRequest()},runTimingRequest:function(){d.ajax({type:"POST",url:this.options.measurementUrl,success:this.logResult.bind(this)})},logResult:function(c,a,b){b&&c&&c.cluster&&(a=b.getResponseHeader("x-served-by"),b=b.getResponseHeader("x-timer"),a&&b&&(a=a.split(" "),a=a[a.length-1].split("-"),d.ajax({type:"POST",
url:this.options.logUrl,data:{cluster:c.cluster,timer:b,fastlyNode:a[a.length-1]}})))}})})(R9,jQuery);(new R9.logger).timeEnd("combined");