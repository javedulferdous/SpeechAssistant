(this.$WP=this.$WP||[]).push(["T18SZK",(e,i)=>{"use strict";var a,n,t,l,s,r,d,o,u,m,c,v,k,p,N,f,S,T,y,g,I,_,b,h,F,D,w=()=>"invalidateAndRefetch",C=()=>{var e,i=g("t12247_auto_trips_on_h"),[t]=a(k),l=!!a(p).userId,s=(null==t||null==(e=t.params)?void 0:e.geoId)||1,[{fetching:r,data:d},o]=I({query:F,variables:{geoId:s},executeWhen:l&&i?"immediately":"never"},{addItemToTrip:w,tripsRemoveItem:w,tripsRemoveReference:w,createTrip:w,Trips_createTrip:w}),u=n(()=>{o({requestPolicy:"network-only"})},[o]);return[{fetching:r,recentTrip:null==d?void 0:d.userTrip,geoId:s},u]},A=e=>t("div",{className:e.isMobile?"_58bbjk0O":null},t(_,{saveObject:{id:e.id,type:e.type},allowPopStatModal:!0},(i,a)=>t(b,{active:a,onClick:i,decorated:!1,bookmarkStyle:"outline",bookmarkSize:"20",asButton:!0,fullWidth:e.isMobile},()=>"Save to Trip"))),O=e=>{var i,a,n,t,[l]=h({query:D,variables:{locationId:e||1},pause:!e});return l.fetching||l.error?null:null==(i=l.data)||null==(a=i.locations)||null==(n=a[0])||null==(t=n.names)?void 0:t.name},E=({onDismiss:e,isMobile:i,geoId:a})=>{var n=O(a);return n?t("div",{className:"_12r4NoIO"},t(f,{on:"bottom",from:i?"center":"left",offset:20}),t("div",{className:"_3mQ4NuiB"},"Let's keep planning!"),t("div",{className:"_2hyMBkip"},"See a hotel that looks good to you? Simply click",t("span",{className:"uHf06eIT"},t("span",{className:"_2dG5sx_G"},t(u,{name:"heart"}))),"to save and view it on a map for your upcoming trip to ",n,"."),t(c,{variant:"primary",onClick:e},"Got it!")):null},G=(e,i)=>((null==e?void 0:e.detailCounts)||[]).filter({hotels:e=>"ACCOMMODATION"===(null==e?void 0:e.locationType),restaurants:e=>"EATERY"===(null==e?void 0:e.locationType),attractions:e=>"ATTRACTION"===(null==e?void 0:e.locationType)||"ACTIVITY"===(null==e?void 0:e.locationType)||"attractionproduct"===(null==e?void 0:e.saveType)}[i]).map(e=>(null==e?void 0:e.count)||0).reduce((e,i)=>e+i,0),L=({footerShownCallback:e})=>{var i,c,{viewportCategory:f}=a(N),[g]=a(k),I=(null==g||null==(i=g.params)?void 0:i.detailId)||null,_="MOBILE"===f,[{fetching:b,recentTrip:h,geoId:F}]=C(),{userId:D}=a(p),w=null==h||null==(c=h.route)?void 0:c.url,O=T(),L=y(),[R,M]=((e,i,a)=>{var t=l(2e3),d=l(3e3),[o,u]=s(!1),m=n(()=>u(!1),[u]);return r(()=>{if(!e)return()=>{};var i=setTimeout(()=>u(!0),t.current);return()=>clearTimeout(i)},[e,t]),r(()=>{if(!o)return()=>{};var e=setTimeout(m,d.current);return()=>clearTimeout(e)},[o,m,d]),r(()=>o?(window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}):()=>{},[o,m]),[o,m]})((e=>{if(e){var i=Date.parse(e);return Date.now()-i<=5e3}return!1})(null==h?void 0:h.created)),H=!b&&void 0!==(null==h?void 0:h.id)&&(e=>{if(e){var i=Date.parse(e);if((Date.now()-i)/864e5>30)return!1}return!0})(null==h?void 0:h.updated);return e&&e(H),r(()=>{if(H){var e=null==h?void 0:h.id;e&&D&&S.set("mostRecentlyAddedToTrip",{tripId:e,userId:D},144e5),L({trips:{element:"view_persistent_footer",tripId:null==h?void 0:h.id}})}},[H,L,h,D]),H?t(d,null,t("div",{className:"_3TlU80Rt"},t("div",{className:"_3a8eRcap"},t("div",{className:"_21u7223h"},t("div",{className:"_261yvqcH"},null==h?void 0:h.title),t("div",{className:"_3sSxTaN0"},t(u,{name:"heart",size:22}),t("span",{className:"GE1Hu-rA"},null==h?void 0:h.size))),t("div",{className:"_3h2YK5Is"},t(u,{name:"hotels",size:22}),t("span",{className:"GE1Hu-rA"},G(h,"hotels")),t(u,{name:"attractions",size:22}),t("span",{className:"GE1Hu-rA"},G(h,"attractions")),t(u,{name:"restaurants",size:22}),t("span",{className:"GE1Hu-rA"},G(h,"restaurants")))),t("div",{className:"_2JTeoANH"},I&&t("div",{className:o("Cnv_3-tG","_1KdqP_6N")},t(A,{isMobile:_,id:I,type:"location"})),t("div",{className:"Cnv_3-tG"},t("a",{href:w},t(m,{legacyStyled:!1,fullWidth:_,size:_?"small":"medium",onClick:()=>{O({Trips:{elementClick:{element:"omni_trip_view"}}})}},t(v,{id:"cx_trips_view_cta"})))))),R&&t(E,{onDismiss:M,isMobile:_,geoId:F})):null};return[()=>{(F=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"UserTripsForGeo"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"geoId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"userTrip"},"name":{"kind":"Name","value":"Trips_userTripsForGeo"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"geoId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"updated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"created"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"size"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"detailCounts"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"saveType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationType"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"owner"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"profile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":313}}')).__key=0xf9f341fd4761,F.loc.source={body:"f9f341fd4761"},(D=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"LocationNameQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"locations"},"name":{"kind":"Name","value":"LocationSelection_getLocations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"names"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":162}}')).__key=80285370345082,D.loc.source={body:"4904e4fae67a"},e("default",L),e({useLocationName:O,useUserTripForGeo:C})},[e=>(a=e.useContext,n=e.useCallback,t=e.createElement,l=e.useRef,s=e.useState,r=e.useEffect,d=e.Fragment),e=>o=e.default,e=>u=e.default,e=>(m=e.default,c=e.BorderlessButton),e=>v=e.default,e=>(k=e.Route,p=e.Visitor,N=e.Device),e=>f=e.Arrow,e=>S=e.default,e=>T=e.useInteractionLogger,e=>y=e.useImpressionLogger,e=>g=e.featureIsEnabled,e=>I=e.useInvalidatableQuery,e=>_=e.QueriedTripFlowSelector,e=>b=e.BookmarkIcon,e=>h=e.useQuery]]},["cDcdfi","jSLlaY","OMqGt0","eFikmI","0DsHEV","2R4xv2","z2XL6d","jaCyxS","fsml46","30t50h","-i3PJS","OnmvvE","HZtvHO","vF730k","5X2em-"]]);
