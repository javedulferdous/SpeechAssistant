(this.$WP=this.$WP||[]).push(["RYK9JE",(e,t)=>{"use strict";var r,a,s,n,i,o=e=>{for(var{rooms:t,adults:r,children:a}=e,s=t>0&&a?Math.floor(a.length/t):0,n=a?a.length-s*t:0,i=[],o=0,l=0;l<t;++l){var d;if(d=l<n?s+1:s){var h=Math.min(o+d,a.length),c=a.slice(o,h);o=h,i.push(c.join(","))}}return[""+t,""+r,i.join(":")].filter(e=>!!e.length).join("_")},l=e=>{var[t,r,a=""]=e?e.split("_"):[];return{rooms:parseInt(t,10),adults:parseInt(r,10),children:a.split(s).filter(e=>!!e.length).map(e=>parseInt(e,10))}},d=e=>!(isNaN(e)||e%1!=0),h=(e,t,r)=>d(e)&&e>=t&&e<=r,c=(e,t,r,a=-1)=>d(e)?Math.min(r,Math.max(t,e)):a,u=null,g=e=>{var t;if(e)try{var s=o(e);r().dispatch(a.travelerInfo.setHotelsTravelerInfo(void 0,s,void 0)),(t=s)&&fetch("/UpdateSessionDatesAjax",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin",body:"uguests="+t}),(e=>{globalThis.require(["trjs!ta/Core/TA.FireEvent","trjs!ta/util/Error","trjs!hotels/RoomsGuests"],(t,r,a)=>{u||(u=new a),u.update({nRooms:e.rooms,nAdults:e.adults,childrenAges:e.children});var s=u.updateStore();t.fireEvent("onLegacyGuestsChanged",s),t.fireEvent("searchFieldsChanged");try{window.ta.page.processNewTravelInfo&&window.ta.page.processNewTravelInfo()}catch(e){r.record(e,"page-dates-interface: Failed to update with new guests")}})})(e)}catch(e){}},p={};return[()=>{s=new RegExp(",|:"),n={rooms:1,adults:2,children:[]},i={limits:{MIN_ROOMS:1,MAX_ROOMS:8,MIN_ADULTS:1,MAX_ADULTS:32,MIN_CHILDREN:0,MAX_CHILDREN:20,MIN_CHILD_AGE:0,MAX_CHILD_AGE:17},isValid:e=>{if(!e)return!1;var{rooms:t,adults:r,children:a}=e,s=h(t,1,8),n=h(r,1,32),i=a&&h(a.length,0,20)&&a.every(e=>h(e,0,17));return s&&n&&i},validate:(e,t)=>{var{rooms:r,adults:a,children:s}=e,{rooms:n,adults:i,children:o=[]}=t,l=c(r,1,8,1),d=c(a,1,32,2),h=((e,t,r,a=-1)=>e?e.map(e=>c(e,t,r,a)):[])(s,-1,17,-1),u=c(h.length,0,20);if(l!==n)d=c(d,l,4*l),u=c(u,0,10*l);else if(d!==i||u!==o.length){var g=Math.ceil(d/4),p=Math.ceil(u/10),v=Math.max(g,p);l=c(l,v,d),u=c(u,0,10*l)}return{rooms:l,adults:d,children:h=h.slice(0,u)}}},e("default",p),e({DEFAULT_GUEST_INFO:n,HotelsValidation:i,decode:l,encode:o,isIntegerInRange:h,setHotelsPageGuests:g})},[e=>(r=e.getStore,a=e.actions)]]},["aunxON"]]);
