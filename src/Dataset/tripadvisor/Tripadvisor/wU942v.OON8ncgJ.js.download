(this.$WP=this.$WP||[]).push(["wU942v",(e,t)=>{"use strict";var r,a,i,n,o,l,_,s,d,u,g=["Restaurant_Review","Attraction_Review","Hotel_Review"],c=()=>{var e,t,r=null==(e=window)||null==(t=e.navigator)?void 0:t.connection;return r?[r.effectiveType||"unknown",r.type||"unknown"]:["unknown","unknown"]},v=()=>{if(n("hard_gate_excl_disable_domain_direct")||n("ml_hard_gate_master")||n("ml_hard_gate_dt"))return!1;var e=i.get("firstEntryServlet");return"Home"===e||"Tourism"===e||"MobileTourism"===e},m=e=>{var t=i.get("sponsoredListingIdClicked");return n("ungate_sponsored_listing_clicks")&&t&&t===e},w=e=>{var t=s();return r(()=>{((e,t)=>{var{action:r,totalViews:a,name:i,servlet:n}=t,o=l.includes(n),[s,d]=c(),u=_(),g=[r];o&&g.push("hotels"),a&&g.push(a),e({module:o?i+"_hotels":i,action:g.join("_"),context:`${n||"unknown"}|${s}|${d}|${u.toString()}`})})(t,e),e.fn&&e.fn()},[e,t])},h=()=>i.get("mlShouldGate"),k=()=>i.get("requiredLoginPagesViewed")||[],p=(e,t)=>k().some(r=>r.servlet===e&&r.pageId===t),f=(e,t)=>{if(!p(e,t)){var r=k();r.push({servlet:e,pageId:t}),i.set("requiredLoginPagesViewed",r,18e5)}},E=()=>i.get("restaurantBookingClickedIds")||[],R=e=>{var t=E();return t.splice(t.indexOf(e),1),i.set("restaurantBookingClickedIds",t,18e5),t},S=(e,t,r)=>{if(!o.includes(t)||!n("ungate_restaurant_booking_clicks"))return!1;var a=n("restaurant_booking_click_ungates_single"),i=n("restaurant_booking_click_ungates_all"),l=n("select_restaurants_booking_click_ungates"),_=E(),s="Restaurant_Review"===t&&_.includes(e);l&&e&&s&&!r&&(_=R(e),s=!1);var d=l&&a&&s&&"Restaurant_Review"===t&&r;return _.length>0&&(s||d||i)},C=e=>{if(n("ungate_restaurant_booking_clicks")){var t=i.get("restaurantBookingClickedIds")||[];t.push(e),i.set("restaurantBookingClickedIds",t,18e5)}},I=e=>{var t,r,a,i,n,o,l;switch(e.meta.initialServletName){case"ShowTopic":case"MobileShowTopic":return null==(t=e.route)?void 0:t.ft;case"Profile":return null==(r=e.route)?void 0:r.username;case"ShowUserReviews":case"MobileShowUserReviews":return null==(a=e.route)?void 0:a.src;case"FAQ_Answers":case"MobileFAQ_Answers":return null==(i=e.route)?void 0:i.t;case"Trips":return null==(n=e.route)?void 0:n.tripId;default:return(null==(o=e.page)?void 0:o.detailId)||(null==(l=e.page)?void 0:l.geoId)}},P=(e,t,r,a,i,n)=>{var o=[e.toString(),t];o.push(r||0===r?r:"unknown"),o.push((!!a).toString()),n({module:i,action:"gating_ml_model_decision",context:o.join("|")})},T=e=>{if(!n("review_detail_hard_gate_master_dt"))return k().length;var t=k();return(n("review_detail_hard_gate_dt_other_servlets")?t.filter(e=>!g.includes(e.servlet)):t.filter(t=>t.servlet===e)).length},V=(e,t)=>{a(()=>{!e&&t&&i.set("requiredLoginActivated",(new Date).getTime())},[e,t])},b=()=>{var e=i.get("requiredLoginActivated");return e?new Date(e):null},A=(e,t,r,a,o,l,_="memx_mobile_hardgate_pageview")=>{if(d){var s=T(o),g=s>=1&&!r,c=h();return g&&null===c?(P(e,s+1,t,a,_,l),(e=>{var t=h(),r=null===t?e:!!t;return i.set("mlShouldGate",r,18e5),r})(e)):!!c}if(u){var v=(m=parseInt(i.get("mlHardGatePageViewCount"),10),w=isNaN(m)?1:m+1,i.set("mlHardGatePageViewCount",w,18e5),w);return P(e,v,t,a,_,l),!(!n("ml_hard_gate_targeting_logic")&&!n("ml_hard_gate_no_reqlo"))||e}var m,w;return!0};return[()=>{d=n("ml_hard_gate_model_v1")||n("ml_hard_gate_model_v2")||n("ml_hard_gate_model_v2_excl_hotels"),u=n("ml_hard_gate_model_v1_reevaluate_on_page_view")||n("ml_hard_gate_model_v2_reevaluate_on_page_view")||n("ml_hard_gate_dt_v1_master")||n("ml_hard_gate_dt_v2_master")||n("ml_hard_gate_dt_v3_master"),e({ML_PAGE_VIEWED_KEY:"mlHardGatePageViewCount",MODAL_NAME:"memx_mobile_hardgate_pageview",PAGE_COUNT_TRIGGER:2,PREVIOUSLY_VIEWED_PAGES_KEY:"requiredLoginPagesViewed",addPageToViewed:f,cameDomainDirect:v,findPageIdentifier:I,gatingEligibility:A,getConnectionType:c,getCurrentPageViewCount:T,getHardGateViewTimestamp:b,getPagesViewed:k,getRestaurantBookingClickedIds:E,isFromSponsoredClick:m,isUngatedByRestaurantBookingClick:S,pageHasBeenViewed:p,removeIdFromRestaurantBookingClickedIds:R,storeRestaurantBookingButtonClick:C,useHardGateViewRecord:V,useTrackAndDelegateCallback:w})},[e=>(r=e.useCallback,a=e.useEffect),e=>i=e.default,e=>n=e.featureIsEnabled,e=>(o=e.RESTAURANTS_SERVLETS,l=e.HOTEL_SERVLETS,_=e.isEligibleForOneTap),e=>s=e.useGARecorder]]},["cDcdfi","jaCyxS","-i3PJS","MWFqPp","fsml46"]]);
