(this.$WP=this.$WP||[]).push(["PiTJFd",(e,a)=>{"use strict";var t,r,i,l,d,o,n,s,u,_,p,v,T,m=({trip:e,messageType:a,onCtaClick:i})=>{var n,s=t(()=>{var a,t;i&&i(),(null==(a=e.route)?void 0:a.url)&&(window.location=null==(t=e.route)?void 0:t.url)},[i,e]),u=r("div",{onClick:s},r(l,{id:"stat_modal_view_trip_v2"}));switch(a){case"CREATED":n=r(d,{id:"create_trip_success_toast_with_bold",args:{TripName:v((null==e?void 0:e.title)||"")}});break;case"SAVED":n=r(d,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:v((null==e?void 0:e.title)||"")}});break;default:n=null}return r(o,{cta:u},r(T,{element:"savedToast",trip:e},r("span",{className:"IG_1KSi_"},n)))},c=({trip:e,onUndo:a})=>{var t,i=r("div",{onClick:a},r(l,{id:"stat_modal_undo"}));return r(o,{cta:i},r(T,{element:"unsaveToast",trip:e},r("span",{className:"IG_1KSi_"},r(d,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:v(null==e?void 0:e.title),TripLink:(null==(t=e.route)?void 0:t.url)||"",TripClass:"_-0lxWGBX"}}))))},h=({trip:e,hideCta:a,onCtaClick:i})=>{var n,s=t(()=>{i()},[i]),u=r("div",{onClick:s},r(l,{id:"stat_modal_change"}));return r(o,{cta:a?null:u},r(T,{element:"savedToast",trip:e},r("span",{className:"IG_1KSi_"},r(d,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:v(null==e?void 0:e.title),TripLink:(null==(n=e.route)?void 0:n.url)||"",TripClass:"_-0lxWGBX"}}))))},I=({onUndo:e})=>{var a=r("div",{onClick:e},r(l,{id:"stat_modal_undo"}));return r(o,{cta:a},r(l,{id:"stat_modal_removed_from_tripname",args:{sTripName:r(l,{id:"m1_trips_my_saves_header"})}}))},C=()=>{var[e,a]=i(n),[,d]=s(u),v=t((e,a)=>d({tripId:e,referenceId:""+a.id,referenceType:a.type,allowDuplicates:!1}).then(e=>{var a,t,r,i,l,d,o,n=null==e||null==(a=e.data)?void 0:a.addItemToTrip,s=null==e||null==(t=e.data)||null==(r=t.addItemToTrip)?void 0:r.trip,u=null==e||null==(i=e.data)||null==(l=i.addItemToTrip)||null==(d=l.errors)||null==(o=d[0])?void 0:o.error;return{trip:s,error:n?null:{query:"ADD_ITEM_TO_TRIP",tripsError:u||void 0}}}).catch(()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})),[d]),T=t((a,t,i)=>{var l=r(m,{trip:a,messageType:t,onCtaClick:i});e({node:l})},[e]),C=t((a,t,i)=>{var l=r(c,{trip:a,onUndo:()=>{v(a.id,t).then(e=>{i&&i(e.trip,e.error)})}});e({node:l})},[v,e]),y=t((t,i,l,d=8e3)=>{var o=r(h,{trip:t,onCtaClick:()=>{i&&i(),a()},hideCta:l});e({node:o,timeout:d})},[e,a]),k=t(()=>{var a=r(o,null,r(l,{id:"m1_trips_save_success_stat_d2"}));e({node:a})},[e]),[,A]=s(_),E=t(e=>A({id:""+e.id,type:e.type}).then(e=>{var a;return{isAdded:!!(null==e||null==(a=e.data)?void 0:a.MySaves_addToMySavesSingle)}}).catch(()=>({isAdded:!1})),[A]),S=t((a,t)=>{var i=r(I,{onUndo:()=>{E(a).then(e=>{t(e.isAdded)})}});e({node:i})},[e,E]),f=t(a=>e({node:r(o,null,a)}),[e]);return{launchViewTripToast:T,launchRemoveFromTripToast:C,launchAutoSavedToTripToast:y,launchAddItemToMySavesToast:k,launchRemoveItemFromMySavesToast:S,launchErrorTripToast:t(a=>{var t=r(o,null,r(p,{query:a.query,error:a.tripsError}));e({node:t})},[e]),launchToastMessage:f}};return[()=>{e("default",C)},[e=>(t=e.useCallback,r=e.createElement,i=e.useContext),e=>(l=e.default,d=e.UnsafeLocalize),e=>(o=e.ToastItem,n=e.Toast),e=>s=e.useMutation,e=>(u=e.AddItemToTrip,_=e.AddItemToMySaves),e=>p=e.default,e=>v=e.escapeHtml,e=>T=e.TripsImpression]]},["cDcdfi","0DsHEV","Q7TAd7","5X2em-","RXx5aI","9I0t-6","WkP2XE","c_rvp5"]]);
