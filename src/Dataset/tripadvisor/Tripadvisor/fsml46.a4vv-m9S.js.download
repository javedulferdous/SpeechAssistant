(this.$WP=this.$WP||[]).push(["fsml46",(e,t)=>{"use strict";var n,a,i,r,o,l,c,u,d,s=!1,m=e=>{var t=(()=>{try{return JSON.parse(localStorage.getItem("interaction_mutation_buffer")||"[]")}catch(e){}return[]})();t.length>0&&!s?(s=!0,e({interactions:t}).then(()=>{(e=>{try{var t=JSON.parse(localStorage.getItem("interaction_mutation_buffer")||"[]");localStorage.setItem("interaction_mutation_buffer",JSON.stringify(t.filter(t=>e.every(e=>!r(t,e)))))}catch(e){}})(t)}).finally(()=>{s=!1})):t.length>0&&s&&setTimeout(()=>m(e),3e3)},v=()=>{var[,e]=c(u),[,{uid:t}]=n(o);return a(n=>{(e=>{try{var t=JSON.parse(localStorage.getItem("interaction_mutation_buffer")||"[]");t.push(e),localStorage.setItem("interaction_mutation_buffer",JSON.stringify(t))}catch(e){}})(Object.assign({pageUid:t,eventTimestampMs:(new Date).getTime()},n)),setTimeout(()=>m(e),3e3)},[e,t])},f=()=>{var[,e]=c(u);i(()=>{requestIdleCallback(()=>{m(e)})},[e])},g=e=>{if(0===e.length)return Promise.resolve();var t=new URLSearchParams("?batched=true");return e.forEach((e,n)=>{e.forEach((e,a)=>{void 0!==e&&t.append(`data[${n}][${a}]`,e)})}),fetch("/GARecord",{method:"POST",body:t.toString(),credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}}).catch(e=>{console.error(e)})},p=e=>{var t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{"eventId"!==e&&t.append(e,n)}),t},k=!1,h=()=>{if(k)S();else{k=!0;try{var e=localStorage.getItem("interaction_buffer"),t=e?JSON.parse(e):[];g(t.map(p)).then(()=>{var e=localStorage.getItem("interaction_buffer"),n=e?JSON.parse(e):[];localStorage.setItem("interaction_buffer",JSON.stringify(n.filter(e=>t.every(t=>!r(t,e)))))}).finally(()=>{k=!1})}catch(e){k=!1}}},I=null,S=()=>{null!==I&&clearTimeout(I),I=setTimeout(h,1e3)},b=e=>{try{var t=localStorage.getItem("interaction_buffer"),n=t?JSON.parse(t):[];n.push(e),localStorage.setItem("interaction_buffer",JSON.stringify(n))}catch(e){return!1}return S(),!0},y=e=>{var t={eventId:Math.random().toString()};e.forEach((e,n)=>{t[n]=e}),b(t)||g([e])},N=e=>{try{var t;return(null==(t=e.match(/^\/([a-zA-Z0-9_]+)/))?void 0:t[1])||"Home"}catch(e){return"Unknown"}},_=()=>{var[{page:e,params:t},{uid:i}]=n(o),{userId:r}=n(l),c=(null==t?void 0:t.detailId)||void 0,u=(null==t?void 0:t.geoId)||void 0;return a(t=>{var n="Unknown"===e?(e=>{try{var t,n;return(null==(t=e.match(/-d([0-9]+)/))?void 0:t[1])||(null==(n=e.match(/-g([0-9]+)/))?void 0:n[1])||void 0}catch(e){return}})(window.location.pathname):c||u||void 0,a={gac:t.module,gaa:t.action,gal:t.context,gav:t.value,gani:t.nonInteraction,gasl:null!=t.location?t.location:n,gass:"Unknown"===e?N(window.location.pathname):e,gapu:i,gams:null!==r,eventId:Math.random().toString()};b(a)||g([p(a)])},[e,c,u,i,r])},O=e=>{var t=_(),{module:n,action:i,context:r,value:o,location:l,nonInteraction:c}=e||{};return a(()=>{n&&i&&t({module:n,action:i,context:r,value:o,location:l,nonInteraction:c})},[t,n,i,r,o,l,c])};return[()=>{(u=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractions"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"interactions"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Impressions_InteractionInput"}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Impressions_postInteractions"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"interactions"}}}],"directives":[]}]}}],"loc":{"start":0,"end":140}}')).__key=0xfddc3e66a204,u.loc.source={body:"fddc3e66a204"},(d=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractionV4"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"InteractionV4Input"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"logInteractionV4"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"interaction"},"value":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}}}],"directives":[]}]}}],"loc":{"start":0,"end":119}}')).__key=0x790de86432c2,d.loc.source={body:"790de86432c2"},"undefined"!=typeof requestIdleCallback&&requestIdleCallback(S),e({LogInteractionV4:d,enqueue:y,useGARecordCallback:O,useGARecorder:_,useInteractionLogger:v,useSubmitInteractionBufferEffect:f})},[e=>(n=e.useContext,a=e.useCallback,i=e.useEffect),e=>r=e.default,e=>(o=e.Route,l=e.Visitor),e=>c=e.useMutation]]},["cDcdfi","YwNsO_","2R4xv2","5X2em-"]]);
