(this.$WP=this.$WP||[]).push(["F8raOV",(e,r)=>{"use strict";var t,a,n,i,l=e=>{if(e.indexOf("?")>=0)return null;for(var r=e.match(/\.([a-z]*[_|.])?(?:html|xml)$/),t=(r?e.substring(0,r.index):e).split("-"),a={},n=0;n<t.length;n++){var i=t[n],l=null,s=null,u=i.match(/^a_([a-zA-Z]+)\.(.+)$/);if(null!=u)[,l,s]=u,s=s.replace(/\+/g," ").replace(/%([0-9a-fA-F]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16))).replace(/__(2D|26|3F|2E|2F|5F)__/g,(e,r)=>String.fromCharCode(parseInt(r,16)));else if(i.length>=3&&(i.startsWith("zf")||i.startsWith("zu")||i.startsWith("zr")||i.startsWith("zs")||i.startsWith("zam")))l=i.substring(0,3),s=i.substring(3);else if(i){l=i.substring(0,1),s=i.substring(1);var p=l[0];if(p===p.toUpperCase()||/\d/.test(p)||"_"===p)continue}null!==l&&null!==s&&(a[l]=s)}return a},s=()=>{var e=new Map;return t.forEach(r=>{e.has(r.servletName)||e.set(r.servletName,[]),e.get(r.servletName).push(r)}),e},u=e=>{try{var r;return(null==(r=e.match(/^\/([a-zA-Z0-9_]+)/))?void 0:r[1])||"Home"}catch(e){return null}},p=e=>(console.error("Route parser not implemented for "+e),null),f=e=>{var r=new URLSearchParams(e.substr(e.indexOf("?")));return Object.fromEntries(r)},o=(e,r)=>{var t=new Set,a=new Set;return e.pageParameters.forEach(e=>{"object"==typeof e.type?e.type.filters.forEach(e=>a.add(e.urlName)):"CANONICAL"===e.category&&(e.required?t:a).add(e.urlName)}),void 0===Array.from(t.keys()).find(e=>!r[e])&&void 0===Object.keys(r).find(e=>!t.has(e)&&!a.has(e))},m=(e,r,t)=>{n||(n=s());var a,i=n.get(e);return i?(t&&(a=i.find(e=>e.pageName===t&&o(e,r))),a||(a=i.find(e=>o(e,r))),a||null):null},g=(e,r)=>{n||(n=s());var t=u(e);if(!t)return null;var a=n.get(t);if(!a)return null;var i=((e,r)=>({DashDelimited:l,SlashDelimited:p,QueryParamsOnly:f}[r](e.split("#")[0])))(e,a[0].urlFormat);if(!i)return null;var o=m(t,i,r);return o?{pageDef:o,parsedPath:i,servletName:t}:null},v=e=>{var r;return i||(r=new Map,t.forEach(e=>{var{pageName:t}=e;r.has(t)||r.set(t,e)}),i=r),i.get(e)},h=(e,r)=>{var t={Integer:e=>parseInt(e,10),String:e=>e,Boolean:e=>"true"===e.toLowerCase(),Number:e=>parseFloat(e),IntegerList:e=>[...new Set(e.split(",").map(e=>parseInt(e,10)))],StringList:e=>[...new Set(e.split(","))]},a=e=>{if("STATIC_ROUTE_ONLY"===e.category)return e.staticValue;if("string"==typeof e.type){var n=r[e.urlName];if(void 0===n)return null;var i=t[e.type];if(i){if(e.offsetNickname){var l=new RegExp("^"+e.offsetNickname);return i(n.replace(l,""))}return i(n)}return console.error(`Unsupported  ${e.urlName} pageParameter type ${e.type}`),null}return e.type.filters.map(e=>[e.apiName,a(e)]).filter(([,e])=>null!==e).map(([e,r])=>{return{id:e,value:(t=r,Array.isArray(t)?t.map(e=>String(e)):[String(t)])};var t})},n={};return e.forEach(e=>{var r=a(e);null!==r&&(n[e.apiName]=r)}),n},c={AttractionsFusion:"Attractions",AttractionProductsFusion:"Attraction_Products"},d=e=>{var{page:r}=e,t=c[r];if(t){var a=((e,r)=>{var{path:t,page:a,params:n}=e;if(a===r)return null;var{pageDef:i,parsedPath:l,servletName:s}=g(t,a)||{};if(!i||!l||!s)return null;var u=m(s,l,r);if(!u)return null;if(i===u)return e;var p=n,f=new Map;i.pageParameters.flatMap(e=>"string"!=typeof e.type&&"Filters"===e.type.name?e.type.filters:e).filter(e=>"SKIPPABLE"===(null==e?void 0:e.category)).forEach(e=>f.set(e.apiName,e)),Object.keys(n).forEach(e=>{var r,t=p[e];if(t){var a=f.get(e);a&&("StringList"!==a.type&&"IntegerList"!==a.type||(l[a.urlName]=t.join(a.delimiter)),"Filters"===(null==(r=a.type)?void 0:r.name)?t.forEach(({id:e,value:r})=>{var t=f.get(e);t&&(l[t.urlName]=r.join(t.delimiter))}):l[a.urlName]=""+t)}});var o=h(u.pageParameters,l),v=-1===t.indexOf("#")?"":t.split("#")[1];return{page:u.pageName,path:t,params:o,fragment:v}})(e,t);return null!=a?a:e}return e},y=e=>{var{pageDef:r,parsedPath:t}=g(e)||{};if(!t||!r)return null;var n=h(r.pageParameters,t),i=-1===e.indexOf("#")?"":e.split("#")[1],l={page:r.pageName,path:e,params:n,fragment:i};if(l&&"ClientLink"===l.page){var s=(e=>{if(e&&"ClientLink"===e.page){var r=e.params.dev?e.params.value:(e=>{if(!e)return e;try{var r=a(e);return r.substring(4,r.length-4)}catch(r){return e}})(e.params.value),t=(n=r)&&n.startsWith("/")?"/"===n?"Home":u(n):null;if(t&&"ClientLink"!==t)return r}var n;return null})(l);return s?y(s)||Object.assign({},l,{},{params:{value:s},path:s}):null}return l};return[()=>{e({getBackwardsCompatRoute:d,getPageDefForPage:v,getRouteFromPath:y,getServlet:u})},[e=>t=e.routes,e=>a=e.decode]]},["w31zLi","gGW5sO"]]);
