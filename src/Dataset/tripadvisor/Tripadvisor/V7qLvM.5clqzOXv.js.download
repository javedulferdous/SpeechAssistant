(this.$WP=this.$WP||[]).push(["V7qLvM",(t,e)=>{"use strict";var o,i,a,s,n,r,l,h,p,c,d,m,g,S,u,v,f,w=t=>t?"FULL_SCREEN":"KEEP_DATE_PICKER",E=".MOBILE_SORT_FILTER_BUTTONS",R=()=>window&&window.location&&"#MAPVIEW"===window.location.hash;return[()=>{v=class extends o{constructor(...t){super(...t),this.state={mapState:"CLOSE",positionFromTop:null,openMode:null,blockScroll:!0},this.mapRadio=null,this.openMap=()=>{history.replaceState(null,document.title,"#MAPVIEW"),this.checkHash()},this.closeMap=()=>{this.mapRadio&&this.mapRadio.emit("close-trigger-clicked"),this.mapRadio&&this.mapRadio.emit("show-bg-leaf-placement"),(()=>{var t=window.location.toString();if(t.indexOf("#")>0){var e=t.substring(0,t.indexOf("#"));window.history.replaceState({},document.title,e)}})(),this.checkHash()},this.toggleMap=t=>{t?this.openMap():this.closeMap()},this.prepareToShowMap=t=>(this.mapRadio&&this.mapRadio.emit("hide-bg-leaf-placement"),new Promise(e=>{if(t&&"FULL_SCREEN"!==t){var{doc:o,win:i}={doc:document,win:window},a=this.props.isVacationPackageServlet?o.querySelector(E):o.querySelector("#PERSISTENT_TRIP_SEARCH_BAR"),s=i.pageYOffset||o&&o.documentElement&&o.documentElement.scrollTop,n=this.props.isVacationPackageServlet&&this.props.isIOSSafari&&window.innerWidth>window.innerHeight?55:0,r=a?a.getBoundingClientRect().top-n:0,l=a?a.getBoundingClientRect().height:0,h=o.querySelector(E),p=h?h.getBoundingClientRect():null,c=p&&p.height?p.top-r+p.height:l,d=o.querySelector("#taplc_global_nav_0")?o.querySelector("#taplc_global_nav_0"):null,g=d?d.getBoundingClientRect().height:0,u=()=>{if(m("om_btb_gating_atf"))return Math.abs(i.pageYOffset-g)<1&&(e(c),!0);var t=i.pageYOffset||o&&o.documentElement&&o.documentElement.scrollTop;return Math.abs(t-(r+s))<1&&(e(c),!0)};if(!u()){var v=S(()=>{u()&&i.removeEventListener("scroll",v)},100);i.addEventListener("scroll",v),i.scrollTo({top:m("om_btb_gating_atf")?g:r+s,behavior:"smooth"})}}else e(0)})),this.checkHash=()=>{var t=R(),e=w(this.props.isDesktop);e&&"FULL_SCREEN"!==e?(t&&"OPEN"!==this.state.mapState&&this.prepareToShowMap(e).then(t=>{var o=document.querySelector(E),i=m("om_btb_gating_atf")&&o?o.offsetHeight:t;this.setState({mapState:"OPENING",positionFromTop:(i||0)+"px",openMode:e}),setTimeout(()=>{this.setState({mapState:"OPEN"})},0)}),t||"CLOSE"===this.state.mapState||(this.setState({mapState:"CLOSING",openMode:null}),setTimeout(()=>{this.setState({mapState:"CLOSE"})},200))):this.setState({mapState:t?"OPEN":"CLOSE"})},this.resizeCustomOverlay=t=>{if(R()){var e=w(this.props.isDesktop);(t||e&&e!==this.state.openMode)&&this.prepareToShowMap(e).then(t=>{this.setState({positionFromTop:(t||0)+"px",openMode:e})})}},this.orientationchangeHandler=()=>{setTimeout(this.repositionOverLay,100)},this.repositionOverLay=()=>{if(R()){var t=w(this.props.isDesktop);this.props.isIOSSafari&&this.unblockScroll(),this.prepareToShowMap(t).then(e=>{this.setState({positionFromTop:(e||0)+"px",openMode:t,blockScroll:!0})})}},this.isNotClosed=()=>"CLOSE"!==this.state.mapState,this.getStateClass=()=>{var t=["_1zrKSeda"];return"OPEN"===this.state.mapState&&t.push("_2ZGZkq5_"),g(t)},this.unblockScroll=()=>{"undefined"!=typeof document&&document.body&&document.body.style&&(document.body.style.removeProperty("position"),this.setState({blockScroll:!1}))}}componentDidMount(){this.mapRadio=n("h-map"),this.mapRadio&&this.mapRadio.on("open-trigger-clicked",this.openMap),this.mapRadio&&this.mapRadio.on("toggle-trigger-clicked",this.toggleMap),this.mapRadio&&this.mapRadio.on("resize-overlay",this.resizeCustomOverlay),setTimeout(this.checkHash,10),window.addEventListener("popstate",this.checkHash),window.addEventListener("hashchange",this.checkHash,!1),window.addEventListener("orientationchange",this.orientationchangeHandler)}componentWillUnmount(){this.mapRadio&&this.mapRadio.off("open-trigger-clicked",this.openMap),this.mapRadio&&this.mapRadio.off("toggle-trigger-clicked",this.toggleMap),this.mapRadio&&this.mapRadio.off("resize-overlay",this.resizeCustomOverlay),window.removeEventListener("popstate",this.checkHash),window.removeEventListener("hashchange",this.checkHash),window.removeEventListener("orientationchange",this.orientationchangeHandler)}render(){var t=this.isNotClosed()&&i(p,{component:()=>e("j5kmnF")},({Component:t,errored:o,loading:a})=>a?i("div",{className:"_23d6-U1E"},i(c,null)):o?i("div",{className:"_23d6-U1E"},i(d,{refetch:()=>{window&&window.location&&window.location.reload()}})):t?i(t,{doNotAlsoShowHotels:this.props.doNotAlsoShowHotels},(t,o,a)=>i(p,{component:()=>e("6gU0uK")},({Component:e})=>e?i(e,{onClose:()=>{this.closeMap(),this.mapRadio&&this.mapRadio.emit("toggle-trigger-clicked",!1)},data:t,actions:o,closeable:!0,spTrackingHandler:a,proximitySearchDisabled:this.props.proximitySearchDisabled,isVacationPackageServlet:this.props.isVacationPackageServlet}):null)):null);return this.state.positionFromTop?this.isNotClosed()?i(a,null,i(r,{callback:this.resizeCustomOverlay,throttle:200}),i(h,{blockScroll:!1,fixed:!0,top:this.state.positionFromTop||"0",left:"0",bottom:"0",right:"0",zIndex:this.props.zIndex?this.props.zIndex:"9990"},this.state.blockScroll&&i(u,null),i("div",{className:this.getStateClass()},t))):null:i(a,null,this.isNotClosed()&&i(l,{disableAutoFocus:!0},t))}},f=s((t,e)=>Object.assign({},e,{isDesktop:"DESKTOP"===t.meta.device.viewportCategory,isIOSSafari:"IOS"===t.meta.device.os.family&&"SAFARI"===t.meta.device.browser.family}))(v),t("default",f)},[t=>(o=t.PureComponent,i=t.createElement,a=t.Fragment),t=>s=t.connect,t=>n=t.default,t=>r=t.default,t=>l=t.default,t=>h=t.default,t=>p=t.Load,t=>c=t.LoadingSpinner,t=>d=t.LoadingErrorMessage,t=>m=t.featureIsEnabled,t=>g=t.default,t=>S=t.default,t=>u=t.BlockScroll]]},["cDcdfi","h74DsO","l6BSGt","_g8cls","iuYvTO","cFqhC1","asW43G","V08PS7","AjUfyu","-i3PJS","jSLlaY","gsKhh7","xegF5W"]]);
