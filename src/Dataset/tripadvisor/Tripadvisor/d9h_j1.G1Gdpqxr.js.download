(this.$WP=this.$WP||[]).push(["d9h_j1",(e,t)=>{"use strict";var i,a,r,s,l,n,h,c,o,d,u={},p={min:-1,max:-1},g={min:0,max:100},m=e=>{var t=e.split(",");if(t.length<4)return"";var a,r=parseFloat(t[1]),s=t[2],l=t.slice(3).join(",");return a=r<0?i("hsx_any_distance"):i("mi"===s?"common_dist_mi":"common_dist_km",{0:""+r}),i("distance_from_poi",{0:a,1:l})},f=e=>{if(!e.length)return!1;var t=e.split(",");if(t&&t.length){var[i,a]=t;if("-1"===i&&"-1"===a)return!1}return!0},v=e=>{var t=0;return Object.keys(e.filters).forEach(i=>{var a=e.filters[i],r=a.getSelectedCount();"cat"===i&&r>=3||("trating"!==i?("pRange"!==i||f(a.get()))&&"pop"!==i&&(t+=r):t+=Math.min(1,r))}),t},F=(e,t)=>t.map(t=>{var a=Object.assign({},t),r=t.value.split("_"),s=r[0],l=2===r.length&&""!==e.get(s)&&("catTag"===s||"zfc"===s),n=2===r.length?r[1]:"",h=!1,c=e.isSelected(r[0],n);if("catTag"!==s&&"cat"!==s||2!==r.length)"trating"===s&&(c=c&&e.forFilter(s,e=>{var{values:t}=e;return parseInt(r[1],10)===Math.min(...Object.keys(t).map(e=>parseInt(e,10)))}));else{var o=e.get(s);"cat"===s?(h="1"===r[1])&&(c="1"===o):h="9189"===r[1]&&""===o||"9189"===o}return Object.assign(a,{selected:c,additiveCounts:l,label:h?i("hotels_only"):t.label})}),b=(e,t)=>{var i=[...e].reverse().map(e=>String(e.value));return i.slice(i.indexOf(t))},y=(e,t,r)=>{var s=[];return t.forEach(t=>{s=s.concat(((e,t,r,s)=>{var{paramName:l,trackingName:n}=t,h=e.get(l);if(""===h)return[];if("price"===t.filterType){if(!f(h))return[];var c=((e,t)=>{var r=e.split(",");if(r.length>=2){var s=parseInt(r[0],10),l=parseInt(r[1],10);return((e,t,r)=>{if(r&&e===t)return a.formatCurrency(t);var s=a.formatCurrencyInteger(e),l=a.formatCurrencyInteger(t);return i(r?"common_price_range_currency_plus_v3":"common_price_range_v3",{0:s,1:l})})(s<0?0:s,l<0?t:l,l<0)}return""})(h,s.getRangeMax());return[{param:l,value:h||"",label:c,tracker:n,valueTracker:c,index:r}]}if("checkbox"===t.filterType||"checkboxSearch"===t.filterType||"hclass"===t.filterType){var o=t.choices.filter(t=>e.isSelected(l,t.value)).map((e,t)=>({param:l,value:e.value,label:e.label,tracker:n,valueTracker:e.tracker,index:r+t}));return"cat"===l&&o.length>=3||"pop"===l?[]:o}if("trating"===t.filterType){var d=[...t.choices].reverse().map(e=>String(e.value));return[t.choices.filter(t=>e.isSelected(l,t.value)).map((e,t)=>({param:l,value:d.slice(d.indexOf(e.value)).join(","),label:e.label,tracker:n,valueTracker:e.tracker,index:r+t})).pop()]}if("walkability"===t.filterType){var u=h.split(",");if(2!==u.length)return[];var[p,g]=u;return[{param:l,value:h,label:i("h_walkability_filter_pill_v2",{nMinWalkability:p,nMaxWalkability:g}),tracker:n,valueTracker:h,index:r}]}if("distanceFrom"===t.filterType)return[{param:l,value:h,label:m(h),tracker:n,valueTracker:h,index:r}];if("hotelBrandSearch"===t.filterType){var v=h.split(","),{presetBrands:F}=t;return v.filter(e=>!!e).map(e=>{var t=e.split("_");return{param:l,value:e,label:(()=>{if("h"===t[0])return s.getHotelNameFromValue(e);if(t.length<2)return"";var i=F&&F.find(e=>e.value===t[1]);return i?i.name:s.getHotelNameFromValue(e)})()||"",tracker:n,valueTracker:e,index:r}})}return"staticListSearch"===t.filterType?t.presetOptions.filter(({details:{id:i}})=>i&&e.isSelected(t.paramName,i.toString())).map((e,t)=>({param:l,value:e.value,label:e.name,tracker:n,valueTracker:String(e.details.id),index:r+t})):"radioButton"===t.filterType?t.choices.filter(t=>e.isSelected(l,t.value)).map((e,t)=>({param:l,value:e.value,label:e.label,tracker:n,valueTracker:e.tracker,index:r+t})):(console.error("Unknown filter type during selection gathering "+t.filterType),[])})(e,t,s.length,r))}),s};return[()=>{e("SingleValueFilter",r=class e{constructor(e,t,i,a){this.param=void 0,this.value=void 0,this.excludeClearAll=void 0,this.modified=void 0,this.param=e,this.excludeClearAll=i,this.value=t,this.modified=a}clone(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}set(e){this.modified=this.modified||e!==this.value,this.value=e}get(){return this.value}getDisplayValues(){return{}}getSelectedCount(){return this.get()&&"cat"!==this.param?1:0}isSelected(e){return this.value===e}clear(){this.set("")}clearAll(){this.set("")}format(e){return e}parse(e){return e}isModified(){return this.modified}}),e("KeyValueFilter",s=class e{constructor(e,t,i,a){this.param=void 0,this.values=void 0,this.excludeClearAll=void 0,this.modified=void 0,this.param=e,this.excludeClearAll=i,this.values=this.parse(t).reduce((e,t)=>Object.assign({},e,{[t.key]:t.value}),{}),this.modified=a}clone(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}set(e){this.parse(e).forEach(e=>{this.modified=this.modified||!Object.prototype.hasOwnProperty.call(this.values,e.key)||this.values[e.key]!==e.value,this.values[e.key]=e.value})}get(){return this.format(this.values)}getDisplayValues(){return{}}getSelectedCount(){return this.get()?Object.keys(this.values).length:0}getMap(){return Object.assign({},this.values)}clear(e){e.split(",").filter(e=>""!==e).map(e=>e.split("#")).filter(e=>2===e.length&&""!==e[0]&&""!==e[1]).map(e=>e[0]).forEach(e=>{Object.prototype.hasOwnProperty.call(this.values,e)&&(this.modified=!0,delete this.values[e])})}clearAll(){this.modified=this.modified||Object.keys(this.values).length>0,this.values={}}parse(e){return e.split(",").filter(e=>""!==e).map(e=>e.split("#")).filter(e=>2===e.length&&""!==e[0]&&""!==e[1]).map(e=>({key:e[0],value:e[1]}))}format(e){return Object.entries(e).map(e=>e.join("#")).join(",")}isModified(){return this.modified}}),e("MultiValueFilter",l=class e{constructor(e,t,i,a,r){this.param=void 0,this.values=void 0,this.displayValues=void 0,this.excludeClearAll=void 0,this.modified=void 0,this.param=e,this.excludeClearAll=i,this.values=this.parse(t).reduce((e,t)=>Object.assign({},e,{[t]:!0}),{}),this.modified=!!a,this.displayValues=r}clone(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}set(e){e.split(",").forEach(e=>{this.modified=this.modified||!this.values[e],this.values[e]=!0})}get(){return Object.keys(this.values).join(",")}getDisplayValues(){return this.displayValues}getSelectedCount(){return this.get()?Object.keys(this.values).length:0}isSelected(e){return this.values[e]}clear(e){e.split(",").forEach(e=>{this.values[e]&&(delete this.values[e],this.modified=!0)})}clearAll(){this.modified=this.modified||Object.keys(this.values).length>0,this.values={}}parse(e){return e.split(",").filter(e=>!!e)}format(e){return e.join(",")}isModified(){return this.modified}}),e("PageFilters",n=class e{constructor(){this.filters={}}clone(){var t=new e;return Object.keys(this.filters).forEach(e=>{t.filters[e]=this.filters[e].clone()}),t}addFilter(e,t,i,a,n){var h;switch(e){case"single":h=new r(t,i,a,!1);break;case"multi":h=new l(t,i,a,!1,n);break;case"kv":h=new s(t,i,a,!1);break;default:throw new Error("Unknown filter type specified: "+e)}this.filters[t]=h}forFilter(e,t){var i=this.filters[e];return i&&t(i)}set(e,t){return this.forFilter(e,e=>{var i=e.get();return e.set(t),i!==e.get()})}setAll(e,t){return this.forFilter(e,e=>{var i=e.get();return e.clearAll(),t.forEach(t=>e.set(t)),i!==e.get()})}get(e){return this.forFilter(e,e=>e.get())||""}getAll(){return Object.keys(this.filters).reduce((e,t)=>Object.assign({},e,{[t]:this.filters[t].get()}),{})}clear(e,t){return t?this.forFilter(e,e=>{var i=e.get();return e.clear(t),i!==e.get()}):this.clearAll(e)}clearAll(e){if(!e){var t=!1;return Object.keys(this.filters).forEach(e=>{var i=this.filters[e];if(!i.excludeClearAll){var a=i.get();i.clearAll(),t=t||a!==i.get()}}),t}return this.forFilter(e,e=>{var t=e.get();return e.clearAll(),t!==e.get()})}isModified(e){return!!this.forFilter(e,e=>e.isModified())}isSelected(e,t){return!!this.forFilter(e,e=>e.isSelected&&e.isSelected(t))}getKeyValueMap(e){return this.forFilter(e,e=>e.getMap&&e.getMap())}}),n.fromSelectedFilterResponse=e=>{var t=new n;return e&&e.length?(e.forEach(e=>{t.addFilter(e.filterType,e.param,e.value,e.excludeFromClearAll,e.displayValues)}),t):t},o=new Set,d={poiTextInput:"",distFrom:void 0},e("FiltersSharedUIState",h=class e{constructor(e,t,i){if(this.expandedFilters=o,this.rangeMax=0,this.priceRange=p,this.distanceFrom=d,this.hotelBrandSearchText="",this.hotelBrandSearchDisplayVals=u,this.mainListMatchCount=-1,this.isLoading=!1,this.isDistanceFromFilterDisabled=!1,this.walkabilityRange=g,e){var a=e.get("pRange"),r=a&&a.split(",");r.length>2&&(this.priceRange={min:parseInt(r[0],10),max:parseInt(r[1],10)});var s=e.get("distFrom"),l=s&&s.split(",")||[];if(l.length>=4){var n=parseFloat(l[1]),h=l.slice(3).join(",");this.distanceFrom={poiTextInput:h,distFrom:n}}var c=e.get("wlk");if(c.length>0){var m=c.split(",");if(2===m.length){var f=parseInt(m[0],10),v=parseInt(m[1],10);isNaN(f)||isNaN(v)||(this.walkabilityRange={min:f,max:v})}}if(this.hotelBrandSearchText=e.get("bs_text"),this.hotelBrandSearchDisplayVals=e.filters.bs&&e.filters.bs.getDisplayValues()||{},i&&!isNaN(i)&&(this.mainListMatchCount=i),t)for(var F=0;F<t.length;F++){var b=t[F];if("price"===b.filterType&&"pRange"===b.paramName&&b.rangeMax){this.rangeMax=b.rangeMax;break}}this.isLoading=!1,this.isDistanceFromFilterDisabled=!1}}isFilterExpanded(e){return this.expandedFilters.has(e)}getRangeMax(){return this.rangeMax}getPriceRange(){return this.priceRange}getDistanceFrom(){return this.distanceFrom}getHotelBrandSearchText(){return this.hotelBrandSearchText}getDisplayValues(){return this.hotelBrandSearchDisplayVals}getHotelNameFromValue(e){return this.hotelBrandSearchDisplayVals&&this.hotelBrandSearchDisplayVals[e]}getMainListMatchCount(){return this.mainListMatchCount}getIsLoading(){return this.isLoading}getIsDistanceFromFilterDisabled(){return this.isDistanceFromFilterDisabled}getWalkabilityRange(){return this.walkabilityRange}setField(e,t){switch(e){case"expandedFilters":this.expandedFilters=t;break;case"rangeMax":this.rangeMax=t;break;case"pRange":this.priceRange=t;break;case"distFrom":this.distanceFrom=t;break;case"bs_text":this.hotelBrandSearchText=t;break;case"bs_display_vals":this.hotelBrandSearchDisplayVals=t;break;case"main_list_match_count":this.mainListMatchCount=t;break;case"is_loading":this.isLoading=t;break;case"disableDistFrom":this.isDistanceFromFilterDisabled=t;break;case"wlk":this.walkabilityRange=t}}clearField(e){e&&"expandedFilters"!==e||(this.expandedFilters=o),e&&"pRange"!==e||(this.priceRange=p),e&&"distFrom"!==e||(this.distanceFrom=d),e&&"bs_text"!==e||(this.hotelBrandSearchText=""),e&&"bs_display_vals"!==e||(this.hotelBrandSearchDisplayVals=u),e&&"main_list_match_count"!==e||(this.mainListMatchCount=-1),e&&"is_loading"!==e||(this.isLoading=!1),e&&"disableDistFrom"!==e||(this.isDistanceFromFilterDisabled=!1),e&&"wlk"!==e||(this.walkabilityRange=g)}clone(){var t=new e;return t.setField("expandedFilters",this.expandedFilters),t.setField("rangeMax",this.rangeMax),t.setField("pRange",this.priceRange),t.setField("distFrom",this.distanceFrom),t.setField("bs_text",this.hotelBrandSearchText),t.setField("bs_display_vals",this.hotelBrandSearchDisplayVals),t.setField("main_list_match_count",this.mainListMatchCount),t.setField("is_loading",this.isLoading),t.setField("disableDistFrom",this.isDistanceFromFilterDisabled),t.setField("wlk",this.walkabilityRange),t}}),e("FilterCounts",c=class{constructor(e,t){this.countsMap={},this.filterCountsEnabled=!1,e&&(this.countsMap=e,this.filterCountsEnabled=t)}hasCounts(){return this.countsMap&&this.countsMap.length}getCount(e,t){var i=this.countsMap[e];return i&&i[t]||0}isEnabled(){return this.filterCountsEnabled}}),e({DISABLE_DISTANCE_FROM_FILTER:"disableDistFrom",DISTANCE_FROM:"distFrom",EXPANDED_FILTERS:"expandedFilters",FilterCounts:c,FiltersSharedUIState:h,HOTEL_BRAND_SEARCH_DISPLAY_VALS:"bs_display_vals",HOTEL_BRAND_SEARCH_TEXT:"bs_text",IS_LOADING:"is_loading",KeyValueFilter:s,MAIN_LIST_MATCH_COUNT:"main_list_match_count",MultiValueFilter:l,PRICE_RANGE:"pRange",PageFilters:n,RANGE_MAX:"rangeMax",SingleValueFilter:r,WALKABILITY_RANGE:"wlk",gatherSelections:y,getPopularitySelectionsAndCounts:F,getSelectedFiltersCount:v,getValidTravelerRatingSelections:b})},[e=>(i=e.localize,a=e.globalize)]]},["535agn"]]);
