(this.$WP=this.$WP||[]).push(["MlvYp6",(e,r)=>{"use strict";var t,o,i,a,n,l,d,s,u,p,c,v,m,f,I,g,T,h,C,R,b=({loggedInUserId:e,args:{title:r,scrollToReference:n},onClose:l,loading:d,data:s,error:u,isIOSSafari:v})=>{var m=s&&s.tripsGetOne,g=m&&T(m,e),h=o(()=>{window.location.reload(!0)},[]);i(()=>{g&&h()},[g,h]),i(()=>{d||m||!u||(c.error("A service error occurred in the TripModal query",u),h())},[d,m,u,h]);var[R,b]=a(!1);return t(I,{title:!R&&r,onClose:l},t(p,{onError:h,errorRenderer:()=>t(f,null)},!m||d||g?t(f,null):t(C,{trip:m,scrollToReference:n,onMobileMapMaximized:v?b:void 0})))},y=e=>{var r=e.args.id,o=({variables:{tripId:e}})=>e===r?"invalidateAndRefetch":"validate",[i]=h({query:g,variables:{tripId:r,socialReference:m("social_at_referencing_profile_links")}},{addItemToTrip:o,tripsRemoveItem:o,tripsRemoveReference:o,updateTrip:o,organizeTrip:o,addTripItemComment:o,updateTripComment:o,tripsCommentsRemoveOne:o});return t(b,Object.assign({},e,{loading:i.fetching,data:i.data,error:i.error}))},w=()=>{var e=n(l),{route:{tripModal:r,isBoosted:i},navigate:a}=e,u=function(e,r){if(null==e)return{};var t,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e.route,["tripModal","isBoosted"]),p=o(()=>{var e,r;null!=(null==(e=window)||null==(r=e.history)?void 0:r.state)?(document.dispatchEvent(new CustomEvent("modalClosingEvent")),window.history.back()):a(u)},[a,u]);return r&&"object"==typeof r&&r.id?t(d.Provider,{value:{isBoosted:i,itemType:"TRIP",itemId:""+r.id}},t(s.Provider,{value:{tripId:r.id}},t(R,{args:r,onClose:p}))):null};return[()=>{C=v.onUsage(()=>r("MlvYp6/X2gdwD"),"TripModalContent",t(f,null)),R=u(e=>({loggedInUserId:e.auth.loggedInUserId,isIOSSafari:"SAFARI"===e.meta.device.browser.family&&"IOS"===e.meta.device.os.family}))(y),e("default",w)},[e=>(t=e.createElement,o=e.useCallback,i=e.useEffect,a=e.useState,n=e.useContext),e=>l=e.RouteContext,e=>d=e.default,e=>s=e.SponsorshipTrackingContext,e=>u=e.connect,e=>p=e.ErrorBoundary,e=>c=e.default,e=>v=e.component,e=>m=e.featureIsEnabled,e=>(f=e.TripDetailSkeletonLoader,I=e.TripModalViewLayout),e=>g=e.GetFullTrip,e=>T=e.isTripUser,e=>h=e.useInvalidatableQuery]]},["cDcdfi","N4pTU2","6KWcSB","U-DhDC","h74DsO","nIW_Rw","4LU1Ax","pLbCP4","-i3PJS","6hAP4j","RXx5aI","eFKnUp","OnmvvE"]]);
