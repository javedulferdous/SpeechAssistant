(this.$WP=this.$WP||[]).push(["_KhVZh",(n,e)=>{"use strict";var a,i,t,s,o,r,m,p,c,l,_=(n,e)=>{var a;if((n.width||0)<1||(n.height||0)<1)return console.error(`StaticMapSnapshot - Width (${n.width}) and height (${n.height}) params must be positive values`),null;if(n.zoom&&(n.zoom<1||n.zoom>19))return console.error(`StaticMapSnapshot - Zoom (${n.zoom}) must be between 1 and 19.`),null;var i,t,s={center:[n.center.lat,n.center.lng].join(","),width:n.width,height:n.height,zoom:n.zoom,geoId:n.geoId,servletName:n.servlet,scale:n.scale,forceMapProvider:n.forceMapProvider},o=(i=s,t=[],Object.keys(i).forEach(n=>{var e=i[n];if(null!=e){var a=e.toString();t.push([encodeURIComponent(n),encodeURIComponent(a)].join("="))}}),t.join("&"));return(null==(a=n.markers)?void 0:a.length)&&(o+="&"+(n=>{var e={};return n&&n.length?(n.forEach(n=>{if(n){var a=n.iconUrl,i=[n.position.lat,n.position.lng];e[a]?e[a].push(i):e[a]=[i]}}),Object.keys(e).map(n=>`markers=${n}|${e[n].join("|")}`).join("&")):""})(n.markers)),n.useImageTag&&(o+="&redirectKey="+e),"/data/1.0/maps/staticmap?"+o},g=n=>{var[e,g]=a(null),{locale:{code:u}}=i(p),{securityToken:h}=i(c),v=m(),d=_(n,h),[P,f]=a(d),A=t(l(n=>f(_(n,h)),100),[h]),C=s(null);return o(()=>{n.useImageTag&&A(n)},[n,A]),o(()=>{if(!n.useImageTag&&d){var e=setTimeout(()=>{var n=fetch(d,{credentials:"same-origin"});C.current=n,n.then(n=>n.json()).then(e=>{n===C.current&&(g(e.url),v({module:"staticmap",action:"load",context:e.mapProvider}))}).catch(e=>{n===C.current&&(g(null),v({module:"staticmap",action:"failed",context:d}),console.error("Error loading snapshot",e))})},100);return()=>{clearTimeout(e)}}},[n.useImageTag,d,v]),o(()=>{n.useImageTag&&P&&v({module:"staticmap",action:"load",context:"zh-Hans"===u?"STATIC_MAP_AUTONAVI":"STATIC_MAP_GOOGLE"})},[n.useImageTag,P,u,v]),n.useImageTag&&P?r("img",{"data-test-target":"staticMapSnapshot",alt:n.alt,className:n.imgClassName,src:P}):r("span",{"data-test-target":"staticMapSnapshot"},e&&r("img",{alt:n.alt,className:n.imgClassName,src:e}))},u={attractionPin:"img2/maps/icons/component_map_pins_v1/A_Pin_Small.png",miniAttractionPin:"img2/maps/icons/component_map_pins_v1/A_Pin_xs.png",anchorAttractionPin:"img2/maps/icons/responsive_map_pins_v2/AR_Anchor_pin.png",hotelPin:"img2/maps/icons/component_map_pins_v1/H_Pin_Small.png",miniHotelPin:"img2/maps/icons/component_map_pins_v1/H_Pin_xs.png",anchorHotelPin:"img2/maps/icons/responsive_map_pins_v2/H_Anchor_pin.png",restaurantPin:"img2/maps/icons/component_map_pins_v1/R_Pin_Small.png",miniRestaurantPin:"img2/maps/icons/component_map_pins_v1/R_Pin_xs.png",anchorRestaurantPin:"img2/maps/icons/responsive_map_pins_v2/R_Anchor_pin.png",rentalPin:"img2/maps/icons/responsive_map_pins_v1/VR_green_pin.png",anchorRentalPin:"img2/maps/icons/responsive_map_pins_v2/VR_Anchor_pin.png",carPin:"img2/maps/icons/component_map_pins_v1/C_Pin_Small.png",miniCarPin:"img2/maps/icons/component_map_pins_v1/C_Pin_xs.png",anchorCarPin:"img2/maps/icons/responsive_map_pins_v2/C_Anchor_pin.png"};return[()=>{g.defaultProps={imgClassName:null,alt:"",scale:1,zoom:13,forceMapProvider:null,markers:[]},n("default",g),n("SnapshotAssetCatalogue",u)},[n=>(a=n.useState,i=n.useContext,t=n.useCallback,s=n.useRef,o=n.useEffect,r=n.createElement),n=>m=n.useGARecorder,n=>(p=n.Environment,c=n.Device),n=>l=n.default]]},["cDcdfi","fsml46","2R4xv2","gsKhh7"]]);
