MooTools.More={"version":"1.4.0.1","build":"a4244edf2aa97ac8a196fc96082dd35af1abab87"};Class.Mutators.Binds=function(binds){if(!this.prototype.initialize){this.implement("initialize",function(){});}return Array.from(binds).concat(this.prototype.Binds||[]);};Class.Mutators.initialize=function(initialize){return function(){Array.from(this.Binds).each(function(name){var original=this[name];if(original){this[name]=original.bind(this);}},this);return initialize.apply(this,arguments);};};String.implement({parseQueryString:function(decodeKeys,decodeValues){if(decodeKeys==null){decodeKeys=true;}if(decodeValues==null){decodeValues=true;}var vars=this.split(/[&;]/),object={};if(!vars.length){return object;}vars.each(function(val){var index=val.indexOf("=")+1,value=index?val.substr(index):"",keys=index?val.substr(0,index-1).match(/([^\]\[]+|(\B)(?=\]))/g):[val],obj=object;
if(!keys){return;}if(decodeValues){value=decodeURIComponent(value);}keys.each(function(key,i){if(decodeKeys){key=decodeURIComponent(key);}var current=obj[key];if(i<keys.length-1){obj=obj[key]=current||{};}else{if(typeOf(current)=="array"){current.push(value);}else{obj[key]=current!=null?[current,value]:value;}}});});return object;},cleanQueryString:function(method){return this.split("&").filter(function(val){var index=val.indexOf("="),key=index<0?"":val.substr(0,index),value=val.substr(index+1);return method?method.call(null,key,value):(value||value===0);}).join("&");}});(function(){if(this.Hash){return;}var Hash=this.Hash=new Type("Hash",function(object){if(typeOf(object)=="hash"){object=Object.clone(object.getClean());}for(var key in object){this[key]=object[key];}return this;});this.$H=function(object){return new Hash(object);
};Hash.implement({forEach:function(fn,bind){Object.forEach(this,fn,bind);},getClean:function(){var clean={};for(var key in this){if(this.hasOwnProperty(key)){clean[key]=this[key];}}return clean;},getLength:function(){var length=0;for(var key in this){if(this.hasOwnProperty(key)){length++;}}return length;}});Hash.alias("each","forEach");Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(value){return Object.keyOf(this,value);},hasValue:function(value){return Object.contains(this,value);},extend:function(properties){Hash.each(properties||{},function(value,key){Hash.set(this,key,value);},this);return this;},combine:function(properties){Hash.each(properties||{},function(value,key){Hash.include(this,key,value);},this);return this;},erase:function(key){if(this.hasOwnProperty(key)){delete this[key];
}return this;},get:function(key){return(this.hasOwnProperty(key))?this[key]:null;},set:function(key,value){if(!this[key]||this.hasOwnProperty(key)){this[key]=value;}return this;},empty:function(){Hash.each(this,function(value,key){delete this[key];},this);return this;},include:function(key,value){if(this[key]==undefined){this[key]=value;}return this;},map:function(fn,bind){return new Hash(Object.map(this,fn,bind));},filter:function(fn,bind){return new Hash(Object.filter(this,fn,bind));},every:function(fn,bind){return Object.every(this,fn,bind);},some:function(fn,bind){return Object.some(this,fn,bind);},getKeys:function(){return Object.keys(this);},getValues:function(){return Object.values(this);},toQueryString:function(base){return Object.toQueryString(this,base);}});Hash.alias({indexOf:"keyOf",contains:"hasValue"});
})();(function(){var getStylesList=function(styles,planes){var list=[];Object.each(planes,function(directions){Object.each(directions,function(edge){styles.each(function(style){list.push(style+"-"+edge+(style=="border"?"-width":""));});});});return list;};var calculateEdgeSize=function(edge,styles){var total=0;Object.each(styles,function(value,style){if(style.test(edge)){total=total+value.toInt();}});return total;};var isVisible=function(el){return !!(!el||el.offsetHeight||el.offsetWidth);};Element.implement({measure:function(fn){if(isVisible(this)){return fn.call(this);}var parent=this.getParent(),toMeasure=[];while(!isVisible(parent)&&parent!=document.body){toMeasure.push(parent.expose());parent=parent.getParent();}var restore=this.expose(),result=fn.call(this);restore();toMeasure.each(function(restore){restore();
});return result;},expose:function(){if(this.getStyle("display")!="none"){return function(){};}var before=this.style.cssText;this.setStyles({display:"block",position:"absolute",visibility:"hidden"});return function(){this.style.cssText=before;}.bind(this);},getDimensions:function(options){options=Object.merge({computeSize:false},options);var dim={x:0,y:0};var getSize=function(el,options){return(options.computeSize)?el.getComputedSize(options):el.getSize();};var parent=this.getParent("body");if(parent&&this.getStyle("display")=="none"){dim=this.measure(function(){return getSize(this,options);});}else{if(parent){try{dim=getSize(this,options);}catch(e){}}}return Object.append(dim,(dim.x||dim.x===0)?{width:dim.x,height:dim.y}:{x:dim.width,y:dim.height});},getComputedSize:function(options){options=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},options);
var styles={},size={width:0,height:0},dimensions;if(options.mode=="vertical"){delete size.width;delete options.planes.width;}else{if(options.mode=="horizontal"){delete size.height;delete options.planes.height;}}getStylesList(options.styles,options.planes).each(function(style){styles[style]=this.getStyle(style).toInt();},this);Object.each(options.planes,function(edges,plane){var capitalized=plane.capitalize(),style=this.getStyle(plane);if(style=="auto"&&!dimensions){dimensions=this.getDimensions();}style=styles[plane]=(style=="auto")?dimensions[plane]:style.toInt();size["total"+capitalized]=style;edges.each(function(edge){var edgesize=calculateEdgeSize(edge,styles);size["computed"+edge.capitalize()]=edgesize;size["total"+capitalized]+=edgesize;});},this);return Object.append(size,styles);}});
})();(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:true},initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);if(typeOf(this.element)!="element"){this.element=document.id(this.element.getDocument().body);}if(this.options.wheelStops){var stopper=this.element,cancel=this.cancel.pass(false,this);this.addEvent("start",function(){stopper.addEvent("mousewheel",cancel);},true);this.addEvent("complete",function(){stopper.removeEvent("mousewheel",cancel);},true);}},set:function(){var now=Array.flatten(arguments);if(Browser.firefox){now=[Math.round(now[0]),Math.round(now[1])];}this.element.scrollTo(now[0],now[1]);return this;},compute:function(from,to,delta){return[0,1].map(function(i){return Fx.compute(from[i],to[i],delta);
});},start:function(x,y){if(!this.check(x,y)){return this;}var scroll=this.element.getScroll();return this.parent([scroll.x,scroll.y],[x,y]);},calculateScroll:function(x,y){var element=this.element,scrollSize=element.getScrollSize(),scroll=element.getScroll(),size=element.getSize(),offset=this.options.offset,values={x:x,y:y};for(var z in values){if(!values[z]&&values[z]!==0){values[z]=scroll[z];}if(typeOf(values[z])!="number"){values[z]=scrollSize[z]-size[z];}values[z]+=offset[z];}return[values.x,values.y];},toTop:function(){return this.start.apply(this,this.calculateScroll(false,0));},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,false));},toRight:function(){return this.start.apply(this,this.calculateScroll("right",false));},toBottom:function(){return this.start.apply(this,this.calculateScroll(false,"bottom"));
},toElement:function(el,axes){axes=axes?Array.from(axes):["x","y"];var scroll=isBody(this.element)?{x:0,y:0}:this.element.getScroll();var position=Object.map(document.id(el).getPosition(this.element),function(value,axis){return axes.contains(axis)?value+scroll[axis]:false;});return this.start.apply(this,this.calculateScroll(position.x,position.y));},toElementEdge:function(el,axes,offset){axes=axes?Array.from(axes):["x","y"];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize(),edge={x:position.x+size.x,y:position.y+size.y};["x","y"].each(function(axis){if(axes.contains(axis)){if(edge[axis]>scroll[axis]+containerSize[axis]){to[axis]=edge[axis]-containerSize[axis];}if(position[axis]<scroll[axis]){to[axis]=position[axis];
}}if(to[axis]==null){to[axis]=scroll[axis];}if(offset&&offset[axis]){to[axis]=to[axis]+offset[axis];}},this);if(to.x!=scroll.x||to.y!=scroll.y){this.start(to.x,to.y);}return this;},toElementCenter:function(el,axes,offset){axes=axes?Array.from(axes):["x","y"];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize();["x","y"].each(function(axis){if(axes.contains(axis)){to[axis]=position[axis]-(containerSize[axis]-size[axis])/2;}if(to[axis]==null){to[axis]=scroll[axis];}if(offset&&offset[axis]){to[axis]=to[axis]+offset[axis];}},this);if(to.x!=scroll.x||to.y!=scroll.y){this.start(to.x,to.y);}return this;}});function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);}})();Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:false,hideOverflow:true,resetHeight:false},initialize:function(element,options){element=this.element=this.subject=document.id(element);
this.parent(options);options=this.options;var wrapper=element.retrieve("wrapper"),styles=element.getStyles("margin","position","overflow");if(options.hideOverflow){styles=Object.append(styles,{overflow:"hidden"});}if(options.wrapper){wrapper=document.id(options.wrapper).setStyles(styles);}if(!wrapper){wrapper=new Element("div",{styles:styles}).wraps(element);}element.store("wrapper",wrapper).setStyle("margin",0);if(element.getStyle("overflow")=="visible"){element.setStyle("overflow","hidden");}this.now=[];this.open=true;this.wrapper=wrapper;this.addEvent("complete",function(){this.open=(wrapper["offset"+this.layout.capitalize()]!=0);if(this.open&&this.options.resetHeight){wrapper.setStyle("height","");}},true);},vertical:function(){this.margin="margin-top";this.layout="height";this.offset=this.element.offsetHeight;
},horizontal:function(){this.margin="margin-left";this.layout="width";this.offset=this.element.offsetWidth;},set:function(now){this.element.setStyle(this.margin,now[0]);this.wrapper.setStyle(this.layout,now[1]);return this;},compute:function(from,to,delta){return[0,1].map(function(i){return Fx.compute(from[i],to[i],delta);});},start:function(how,mode){if(!this.check(how,mode)){return this;}this[mode||this.options.mode]();var margin=this.element.getStyle(this.margin).toInt(),layout=this.wrapper.getStyle(this.layout).toInt(),caseIn=[[margin,layout],[0,this.offset]],caseOut=[[margin,layout],[-this.offset,0]],start;switch(how){case"in":start=caseIn;break;case"out":start=caseOut;break;case"toggle":start=(layout==0)?caseIn:caseOut;}return this.parent(start[0],start[1]);},slideIn:function(mode){return this.start("in",mode);
},slideOut:function(mode){return this.start("out",mode);},hide:function(mode){this[mode||this.options.mode]();this.open=false;return this.set([-this.offset,0]);},show:function(mode){this[mode||this.options.mode]();this.open=true;return this.set([0,this.offset]);},toggle:function(mode){return this.start("toggle",mode);}});Element.Properties.slide={set:function(options){this.get("slide").cancel().setOptions(options);return this;},get:function(){var slide=this.retrieve("slide");if(!slide){slide=new Fx.Slide(this,{link:"cancel"});this.store("slide",slide);}return slide;}};Element.implement({slide:function(how,mode){how=how||"toggle";var slide=this.get("slide"),toggle;switch(how){case"hide":slide.hide(mode);break;case"show":slide.show(mode);break;case"toggle":var flag=this.retrieve("slide:flag",slide.open);
slide[flag?"slideOut":"slideIn"](mode);this.store("slide:flag",!flag);toggle=true;break;default:slide.start(how,mode);}if(!toggle){this.eliminate("slide:flag");}return this;}});Fx.SmoothScroll=new Class({Extends:Fx.Scroll,options:{axes:["x","y"]},initialize:function(options,context){context=context||document;this.doc=context.getDocument();this.parent(this.doc,options);var win=context.getWindow(),location=win.location.href.match(/^[^#]*/)[0]+"#",links=$$(this.options.links||this.doc.links);links.each(function(link){if(!link.href){return;}if(link.href.indexOf(location)!=0){return;}var anchor=link.href.substr(location.length);if(anchor){this.useLink(link,anchor);}},this);this.addEvent("complete",function(){win.location.hash=this.anchor;this.element.scrollTo(this.to[0],this.to[1]);},true);},useLink:function(link,anchor){link.addEvent("click",function(event){var el=document.id(anchor)||this.doc.getElement("a[name="+anchor+"]");
if(!el){return;}event.preventDefault();this.toElement(el,this.options.axes).chain(function(){this.fireEvent("scrolledTo",[link,el]);}.bind(this));this.anchor=anchor;}.bind(this));return this;}});var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:false,style:true,limit:false,handle:false,invert:false,preventDefault:false,stopPropagation:false,modifiers:{x:"left",y:"top"}},initialize:function(){var params=Array.link(arguments,{"options":Type.isObject,"element":function(obj){return obj!=null;}});this.element=document.id(params.element);this.document=this.element.getDocument();this.setOptions(params.options||{});var htype=typeOf(this.options.handle);this.handles=((htype=="array"||htype=="collection")?$$(this.options.handle):document.id(this.options.handle))||this.element;
this.mouse={"now":{},"pos":{}};this.value={"start":{},"now":{}};this.selection=(Browser.ie)?"selectstart":"mousedown";if(Browser.ie&&!Drag.ondragstartFixed){document.ondragstart=Function.from(false);Drag.ondragstartFixed=true;}this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.from(false)};this.attach();},attach:function(){this.handles.addEvent("mousedown",this.bound.start);return this;},detach:function(){this.handles.removeEvent("mousedown",this.bound.start);return this;},start:function(event){var options=this.options;if(event.rightClick){return;}if(options.preventDefault){event.preventDefault();}if(options.stopPropagation){event.stopPropagation();}this.mouse.start=event.page;
this.fireEvent("beforeStart",this.element);var limit=options.limit;this.limit={x:[],y:[]};var z,coordinates;for(z in options.modifiers){if(!options.modifiers[z]){continue;}var style=this.element.getStyle(options.modifiers[z]);if(style&&!style.match(/px$/)){if(!coordinates){coordinates=this.element.getCoordinates(this.element.getOffsetParent());}style=coordinates[options.modifiers[z]];}if(options.style){this.value.now[z]=(style||0).toInt();}else{this.value.now[z]=this.element[options.modifiers[z]];}if(options.invert){this.value.now[z]*=-1;}this.mouse.pos[z]=event.page[z]-this.value.now[z];if(limit&&limit[z]){var i=2;while(i--){var limitZI=limit[z][i];if(limitZI||limitZI===0){this.limit[z][i]=(typeof limitZI=="function")?limitZI():limitZI;}}}}if(typeOf(this.options.grid)=="number"){this.options.grid={x:this.options.grid,y:this.options.grid};
}var events={mousemove:this.bound.check,mouseup:this.bound.cancel};events[this.selection]=this.bound.eventStop;this.document.addEvents(events);},check:function(event){if(this.options.preventDefault){event.preventDefault();}var distance=Math.round(Math.sqrt(Math.pow(event.page.x-this.mouse.start.x,2)+Math.pow(event.page.y-this.mouse.start.y,2)));if(distance>this.options.snap){this.cancel();this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop});this.fireEvent("start",[this.element,event]).fireEvent("snap",this.element);}},drag:function(event){var options=this.options;if(options.preventDefault){event.preventDefault();}this.mouse.now=event.page;for(var z in options.modifiers){if(!options.modifiers[z]){continue;}this.value.now[z]=this.mouse.now[z]-this.mouse.pos[z];if(options.invert){this.value.now[z]*=-1;
}if(options.limit&&this.limit[z]){if((this.limit[z][1]||this.limit[z][1]===0)&&(this.value.now[z]>this.limit[z][1])){this.value.now[z]=this.limit[z][1];}else{if((this.limit[z][0]||this.limit[z][0]===0)&&(this.value.now[z]<this.limit[z][0])){this.value.now[z]=this.limit[z][0];}}}if(options.grid[z]){this.value.now[z]-=((this.value.now[z]-(this.limit[z][0]||0))%options.grid[z]);}if(options.style){this.element.setStyle(options.modifiers[z],this.value.now[z]+options.unit);}else{this.element[options.modifiers[z]]=this.value.now[z];}}this.fireEvent("drag",[this.element,event]);},cancel:function(event){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});if(event){this.document.removeEvent(this.selection,this.bound.eventStop);this.fireEvent("cancel",this.element);}},stop:function(event){var events={mousemove:this.bound.drag,mouseup:this.bound.stop};
events[this.selection]=this.bound.eventStop;this.document.removeEvents(events);if(event){this.fireEvent("complete",[this.element,event]);}}});Element.implement({makeResizable:function(options){var drag=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},options));this.store("resizer",drag);return drag.addEvent("drag",function(){this.fireEvent("resize",drag);}.bind(this));}});Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:false,precalculate:false,includeMargins:true,checkDroppables:true},initialize:function(element,options){this.parent(element,options);element=this.element;this.droppables=$$(this.options.droppables);this.container=document.id(this.options.container);if(this.container&&typeOf(this.container)!="element"){this.container=document.id(this.container.getDocument().body);
}if(this.options.style){if(this.options.modifiers.x=="left"&&this.options.modifiers.y=="top"){var parent=element.getOffsetParent(),styles=element.getStyles("left","top");if(parent&&(styles.left=="auto"||styles.top=="auto")){element.setPosition(element.getPosition(parent));}}if(element.getStyle("position")=="static"){element.setStyle("position","absolute");}}this.addEvent("start",this.checkDroppables,true);this.overed=null;},start:function(event){if(this.container){this.options.limit=this.calculateLimit();}if(this.options.precalculate){this.positions=this.droppables.map(function(el){return el.getCoordinates();});}this.parent(event);},calculateLimit:function(){var element=this.element,container=this.container,offsetParent=document.id(element.getOffsetParent())||document.body,containerCoordinates=container.getCoordinates(offsetParent),elementMargin={},elementBorder={},containerMargin={},containerBorder={},offsetParentPadding={};
["top","right","bottom","left"].each(function(pad){elementMargin[pad]=element.getStyle("margin-"+pad).toInt();elementBorder[pad]=element.getStyle("border-"+pad).toInt();containerMargin[pad]=container.getStyle("margin-"+pad).toInt();containerBorder[pad]=container.getStyle("border-"+pad).toInt();offsetParentPadding[pad]=offsetParent.getStyle("padding-"+pad).toInt();},this);var width=element.offsetWidth+elementMargin.left+elementMargin.right,height=element.offsetHeight+elementMargin.top+elementMargin.bottom,left=0,top=0,right=containerCoordinates.right-containerBorder.right-width,bottom=containerCoordinates.bottom-containerBorder.bottom-height;if(this.options.includeMargins){left+=elementMargin.left;top+=elementMargin.top;}else{right+=elementMargin.right;bottom+=elementMargin.bottom;}if(element.getStyle("position")=="relative"){var coords=element.getCoordinates(offsetParent);
coords.left-=element.getStyle("left").toInt();coords.top-=element.getStyle("top").toInt();left-=coords.left;top-=coords.top;if(container.getStyle("position")!="relative"){left+=containerBorder.left;top+=containerBorder.top;}right+=elementMargin.left-coords.left;bottom+=elementMargin.top-coords.top;if(container!=offsetParent){left+=containerMargin.left+offsetParentPadding.left;top+=((Browser.ie6||Browser.ie7)?0:containerMargin.top)+offsetParentPadding.top;}}else{left-=elementMargin.left;top-=elementMargin.top;if(container!=offsetParent){left+=containerCoordinates.left+containerBorder.left;top+=containerCoordinates.top+containerBorder.top;}}return{x:[left,right],y:[top,bottom]};},getDroppableCoordinates:function(element){var position=element.getCoordinates();if(element.getStyle("position")=="fixed"){var scroll=window.getScroll();
position.left+=scroll.x;position.right+=scroll.x;position.top+=scroll.y;position.bottom+=scroll.y;}return position;},checkDroppables:function(){var overed=this.droppables.filter(function(el,i){el=this.positions?this.positions[i]:this.getDroppableCoordinates(el);var now=this.mouse.now;return(now.x>el.left&&now.x<el.right&&now.y<el.bottom&&now.y>el.top);},this).getLast();if(this.overed!=overed){if(this.overed){this.fireEvent("leave",[this.element,this.overed]);}if(overed){this.fireEvent("enter",[this.element,overed]);}this.overed=overed;}},drag:function(event){this.parent(event);if(this.options.checkDroppables&&this.droppables.length){this.checkDroppables();}},stop:function(event){this.checkDroppables();this.fireEvent("drop",[this.element,this.overed,event]);this.overed=null;return this.parent(event);
}});Element.implement({makeDraggable:function(options){var drag=new Drag.Move(this,options);this.store("dragger",drag);return drag;}});var Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(position){this.setKnobPosition(position);},initialStep:0,snap:false,offset:0,range:false,wheel:false,steps:100,mode:"horizontal"},initialize:function(element,knob,options){this.setOptions(options);options=this.options;this.element=document.id(element);knob=this.knob=document.id(knob);this.previousChange=this.previousEnd=this.step=-1;var limit={},modifiers={x:false,y:false};switch(options.mode){case"vertical":this.axis="y";this.property="top";this.offset="offsetHeight";break;case"horizontal":this.axis="x";this.property="left";this.offset="offsetWidth";
}this.setSliderDimensions();this.setRange(options.range);if(knob.getStyle("position")=="static"){knob.setStyle("position","relative");}knob.setStyle(this.property,-options.offset);modifiers[this.axis]=this.property;limit[this.axis]=[-options.offset,this.full-options.offset];var dragOptions={snap:0,limit:limit,modifiers:modifiers,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:(function(){this.isDragging=true;}).bind(this),onCancel:function(){this.isDragging=false;}.bind(this),onComplete:function(){this.isDragging=false;this.draggedKnob();this.end();}.bind(this)};if(options.snap){this.setSnap(dragOptions);}this.drag=new Drag(knob,dragOptions);this.attach();if(options.initialStep!=null){this.set(options.initialStep);}},attach:function(){this.element.addEvent("mousedown",this.clickedElement);
if(this.options.wheel){this.element.addEvent("mousewheel",this.scrolledElement);}this.drag.attach();return this;},detach:function(){this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement);this.drag.detach();return this;},autosize:function(){this.setSliderDimensions().setKnobPosition(this.toPosition(this.step));this.drag.options.limit[this.axis]=[-this.options.offset,this.full-this.options.offset];if(this.options.snap){this.setSnap();}return this;},setSnap:function(options){if(!options){options=this.drag.options;}options.grid=Math.ceil(this.stepWidth);options.limit[this.axis][1]=this.full;return this;},setKnobPosition:function(position){if(this.options.snap){position=this.toPosition(this.step);}this.knob.setStyle(this.property,position);return this;
},setSliderDimensions:function(){this.full=this.element.measure(function(){this.half=this.knob[this.offset]/2;return this.element[this.offset]-this.knob[this.offset]+(this.options.offset*2);}.bind(this));return this;},set:function(step){if(!((this.range>0)^(step<this.min))){step=this.min;}if(!((this.range>0)^(step>this.max))){step=this.max;}this.step=Math.round(step);return this.checkStep().fireEvent("tick",this.toPosition(this.step)).end();},setRange:function(range,pos){this.min=Array.pick([range[0],0]);this.max=Array.pick([range[1],this.options.steps]);this.range=this.max-this.min;this.steps=this.options.steps||this.full;this.stepSize=Math.abs(this.range)/this.steps;this.stepWidth=this.stepSize*this.full/Math.abs(this.range);if(range){this.set(Array.pick([pos,this.step]).floor(this.min).max(this.max));
}return this;},clickedElement:function(event){if(this.isDragging||event.target==this.knob){return;}var dir=this.range<0?-1:1,position=event.page[this.axis]-this.element.getPosition()[this.axis]-this.half;position=position.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+dir*this.toStep(position));this.checkStep().fireEvent("tick",position).end();},scrolledElement:function(event){var mode=(this.options.mode=="horizontal")?(event.wheel<0):(event.wheel>0);this.set(this.step+(mode?-1:1)*this.stepSize);event.stop();},draggedKnob:function(){var dir=this.range<0?-1:1,position=this.drag.value.now[this.axis];position=position.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+dir*this.toStep(position));this.checkStep();},checkStep:function(){var step=this.step;
if(this.previousChange!=step){this.previousChange=step;this.fireEvent("change",step);}return this;},end:function(){var step=this.step;if(this.previousEnd!==step){this.previousEnd=step;this.fireEvent("complete",step+"");}return this;},toStep:function(position){var step=(position+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?Math.round(step-=step%this.stepSize):step;},toPosition:function(step){return(this.full*Math.abs(this.min-step))/(this.steps*this.stepSize)-this.options.offset;}});var Asset={javascript:function(source,properties){if(!properties){properties={};}var script=new Element("script",{src:source,type:"text/javascript"}),doc=properties.document||document,load=properties.onload||properties.onLoad;delete properties.onload;delete properties.onLoad;delete properties.document;
if(load){if(typeof script.onreadystatechange!="undefined"){script.addEvent("readystatechange",function(){if(["loaded","complete"].contains(this.readyState)){load.call(this);}});}else{script.addEvent("load",load);}}return script.set(properties).inject(doc.head);},css:function(source,properties){if(!properties){properties={};}var link=new Element("link",{rel:"stylesheet",media:"screen",type:"text/css",href:source});var load=properties.onload||properties.onLoad,doc=properties.document||document;delete properties.onload;delete properties.onLoad;delete properties.document;if(load){link.addEvent("load",load);}return link.set(properties).inject(doc.head);},image:function(source,properties){if(!properties){properties={};}var image=new Image(),element=document.id(image)||new Element("img");["load","abort","error"].each(function(name){var type="on"+name,cap="on"+name.capitalize(),event=properties[type]||properties[cap]||function(){};
delete properties[cap];delete properties[type];image[type]=function(){if(!image){return;}if(!element.parentNode){element.width=image.width;element.height=image.height;}image=image.onload=image.onabort=image.onerror=null;event.delay(1,element,element);element.fireEvent(name,element,1);};});image.src=element.src=source;if(image&&image.complete){image.onload.delay(1);}return element.set(properties);},images:function(sources,options){sources=Array.from(sources);var fn=function(){},counter=0;options=Object.merge({onComplete:fn,onProgress:fn,onError:fn,properties:{}},options);return new Elements(sources.map(function(source,index){return Asset.image(source,Object.append(options.properties,{onload:function(){counter++;options.onProgress.call(this,counter,index,source);if(counter==sources.length){options.onComplete();
}},onerror:function(){counter++;options.onError.call(this,counter,index,source);if(counter==sources.length){options.onComplete();}}}));}));}};(function(){var read=function(option,element){return(option)?(typeOf(option)=="function"?option(element):element.get(option)):"";};this.Tips=new Class({Implements:[Events,Options],options:{onShow:function(){this.tip.setStyle("display","block");},onHide:function(){this.tip.setStyle("display","none");},title:"title",text:function(element){return element.get("rel")||element.get("href");},showDelay:100,hideDelay:100,className:"tip-wrap",offset:{x:16,y:16},windowPadding:{x:0,y:0},fixed:false,waiAria:true},initialize:function(){var params=Array.link(arguments,{options:Type.isObject,elements:function(obj){return obj!=null;}});this.setOptions(params.options);
if(params.elements){this.attach(params.elements);}this.container=new Element("div",{"class":"tip"});if(this.options.id){this.container.set("id",this.options.id);if(this.options.waiAria){this.attachWaiAria();}}},toElement:function(){if(this.tip){return this.tip;}this.tip=new Element("div",{"class":this.options.className,styles:{position:"absolute",top:0,left:0}}).adopt(new Element("div",{"class":"tip-top"}),this.container,new Element("div",{"class":"tip-bottom"}));return this.tip;},attachWaiAria:function(){var id=this.options.id;this.container.set("role","tooltip");if(!this.waiAria){this.waiAria={show:function(element){if(id){element.set("aria-describedby",id);}this.container.set("aria-hidden","false");},hide:function(element){if(id){element.erase("aria-describedby");}this.container.set("aria-hidden","true");
}};}this.addEvents(this.waiAria);},detachWaiAria:function(){if(this.waiAria){this.container.erase("role");this.container.erase("aria-hidden");this.removeEvents(this.waiAria);}},attach:function(elements){$$(elements).each(function(element){var title=read(this.options.title,element),text=read(this.options.text,element);element.set("title","").store("tip:native",title).retrieve("tip:title",title);element.retrieve("tip:text",text);this.fireEvent("attach",[element]);var events=["enter","leave"];if(!this.options.fixed){events.push("move");}events.each(function(value){var event=element.retrieve("tip:"+value);if(!event){event=function(event){this["element"+value.capitalize()].apply(this,[event,element]);}.bind(this);}element.store("tip:"+value,event).addEvent("mouse"+value,event);},this);},this);return this;
},detach:function(elements){$$(elements).each(function(element){["enter","leave","move"].each(function(value){element.removeEvent("mouse"+value,element.retrieve("tip:"+value)).eliminate("tip:"+value);});this.fireEvent("detach",[element]);if(this.options.title=="title"){var original=element.retrieve("tip:native");if(original){element.set("title",original);}}},this);return this;},elementEnter:function(event,element){clearTimeout(this.timer);this.timer=(function(){this.container.empty();["title","text"].each(function(value){var content=element.retrieve("tip:"+value);var div=this["_"+value+"Element"]=new Element("div",{"class":"tip-"+value}).inject(this.container);if(content){this.fill(div,content);}},this);this.show(element);this.position((this.options.fixed)?{page:element.getPosition()}:event);
}).delay(this.options.showDelay,this);},elementLeave:function(event,element){clearTimeout(this.timer);this.timer=this.hide.delay(this.options.hideDelay,this,element);this.fireForParent(event,element);},setTitle:function(title){if(this._titleElement){this._titleElement.empty();this.fill(this._titleElement,title);}return this;},setText:function(text){if(this._textElement){this._textElement.empty();this.fill(this._textElement,text);}return this;},fireForParent:function(event,element){element=element.getParent();if(!element||element==document.body){return;}if(element.retrieve("tip:enter")){element.fireEvent("mouseenter",event);}else{this.fireForParent(event,element);}},elementMove:function(event,element){this.position(event);},position:function(event){if(!this.tip){document.id(this);}var size=window.getSize(),scroll=window.getScroll(),tip={x:this.tip.offsetWidth,y:this.tip.offsetHeight},props={x:"left",y:"top"},bounds={y:false,x2:false,y2:false,x:false},obj={};
for(var z in props){obj[props[z]]=event.page[z]+this.options.offset[z];if(obj[props[z]]<0){bounds[z]=true;}if((obj[props[z]]+tip[z]-scroll[z])>size[z]-this.options.windowPadding[z]){obj[props[z]]=event.page[z]-this.options.offset[z]-tip[z];bounds[z+"2"]=true;}}this.fireEvent("bound",bounds);this.tip.setStyles(obj);},fill:function(element,contents){if(typeof contents=="string"){element.set("html",contents);}else{element.adopt(contents);}},show:function(element){if(!this.tip){document.id(this);}if(!this.tip.getParent()){this.tip.inject(document.body);}this.fireEvent("show",[this.tip,element]);},hide:function(element){if(!this.tip){document.id(this);}this.fireEvent("hide",[this.tip,element]);}});})();Elements.from=function(text,excludeScripts){if(excludeScripts||excludeScripts==null){text=text.stripScripts();
}var container,match=text.match(/^\s*<(t[dhr]|tbody|tfoot|thead)/i);if(match){container=new Element("table");var tag=match[1].toLowerCase();if(["td","th","tr"].contains(tag)){container=new Element("tbody").inject(container);if(tag!="tr"){container=new Element("tr").inject(container);}}}return(container||new Element("div")).set("html",text).getChildren();};var MD5=function(string){function RotateLeft(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&2147483648);lY8=(lY&2147483648);lX4=(lX&1073741824);lY4=(lY&1073741824);lResult=(lX&1073741823)+(lY&1073741823);if(lX4&lY4){return(lResult^2147483648^lX8^lY8);}if(lX4|lY4){if(lResult&1073741824){return(lResult^3221225472^lX8^lY8);}else{return(lResult^1073741824^lX8^lY8);
}}else{return(lResult^lX8^lY8);}}function F(x,y,z){return(x&y)|((~x)&z);}function G(x,y,z){return(x&z)|(y&(~z));}function H(x,y,z){return(x^y^z);}function I(x,y,z){return(y^(x|(~z)));}function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);}function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);}function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);}function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);}function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;
var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(128<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;}function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;
WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}return WordToHexValue;}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else{if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}}return utftext;}var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);
a=1732584193;b=4023233417;c=2562383102;d=271733878;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,3614090360);d=FF(d,a,b,c,x[k+1],S12,3905402710);c=FF(c,d,a,b,x[k+2],S13,606105819);b=FF(b,c,d,a,x[k+3],S14,3250441966);a=FF(a,b,c,d,x[k+4],S11,4118548399);d=FF(d,a,b,c,x[k+5],S12,1200080426);c=FF(c,d,a,b,x[k+6],S13,2821735955);b=FF(b,c,d,a,x[k+7],S14,4249261313);a=FF(a,b,c,d,x[k+8],S11,1770035416);d=FF(d,a,b,c,x[k+9],S12,2336552879);c=FF(c,d,a,b,x[k+10],S13,4294925233);b=FF(b,c,d,a,x[k+11],S14,2304563134);a=FF(a,b,c,d,x[k+12],S11,1804603682);d=FF(d,a,b,c,x[k+13],S12,4254626195);c=FF(c,d,a,b,x[k+14],S13,2792965006);b=FF(b,c,d,a,x[k+15],S14,1236535329);a=GG(a,b,c,d,x[k+1],S21,4129170786);d=GG(d,a,b,c,x[k+6],S22,3225465664);c=GG(c,d,a,b,x[k+11],S23,643717713);b=GG(b,c,d,a,x[k+0],S24,3921069994);
a=GG(a,b,c,d,x[k+5],S21,3593408605);d=GG(d,a,b,c,x[k+10],S22,38016083);c=GG(c,d,a,b,x[k+15],S23,3634488961);b=GG(b,c,d,a,x[k+4],S24,3889429448);a=GG(a,b,c,d,x[k+9],S21,568446438);d=GG(d,a,b,c,x[k+14],S22,3275163606);c=GG(c,d,a,b,x[k+3],S23,4107603335);b=GG(b,c,d,a,x[k+8],S24,1163531501);a=GG(a,b,c,d,x[k+13],S21,2850285829);d=GG(d,a,b,c,x[k+2],S22,4243563512);c=GG(c,d,a,b,x[k+7],S23,1735328473);b=GG(b,c,d,a,x[k+12],S24,2368359562);a=HH(a,b,c,d,x[k+5],S31,4294588738);d=HH(d,a,b,c,x[k+8],S32,2272392833);c=HH(c,d,a,b,x[k+11],S33,1839030562);b=HH(b,c,d,a,x[k+14],S34,4259657740);a=HH(a,b,c,d,x[k+1],S31,2763975236);d=HH(d,a,b,c,x[k+4],S32,1272893353);c=HH(c,d,a,b,x[k+7],S33,4139469664);b=HH(b,c,d,a,x[k+10],S34,3200236656);a=HH(a,b,c,d,x[k+13],S31,681279174);d=HH(d,a,b,c,x[k+0],S32,3936430074);c=HH(c,d,a,b,x[k+3],S33,3572445317);
b=HH(b,c,d,a,x[k+6],S34,76029189);a=HH(a,b,c,d,x[k+9],S31,3654602809);d=HH(d,a,b,c,x[k+12],S32,3873151461);c=HH(c,d,a,b,x[k+15],S33,530742520);b=HH(b,c,d,a,x[k+2],S34,3299628645);a=II(a,b,c,d,x[k+0],S41,4096336452);d=II(d,a,b,c,x[k+7],S42,1126891415);c=II(c,d,a,b,x[k+14],S43,2878612391);b=II(b,c,d,a,x[k+5],S44,4237533241);a=II(a,b,c,d,x[k+12],S41,1700485571);d=II(d,a,b,c,x[k+3],S42,2399980690);c=II(c,d,a,b,x[k+10],S43,4293915773);b=II(b,c,d,a,x[k+1],S44,2240044497);a=II(a,b,c,d,x[k+8],S41,1873313359);d=II(d,a,b,c,x[k+15],S42,4264355552);c=II(c,d,a,b,x[k+6],S43,2734768916);b=II(b,c,d,a,x[k+13],S44,1309151649);a=II(a,b,c,d,x[k+4],S41,4149444226);d=II(d,a,b,c,x[k+11],S42,3174756917);c=II(c,d,a,b,x[k+2],S43,718787259);b=II(b,c,d,a,x[k+9],S44,3951481745);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);
d=AddUnsigned(d,DD);}var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();};var hrs=hrs||{};hrs.isMobileDevice={Android:function(){return navigator.userAgent.match(/Android/i)?true:false;},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?true:false;},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?true:false;},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)?true:false;},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?true:false;},any:function(){return(this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows());}};if(!window.s_trackPage){window.s_trackPage=function(){};}if(!window.s_trackLink){window.s_trackLink=function(){};}if(!window.s_trackLinkWithoutLinkTrackProp){window.s_trackLinkWithoutLinkTrackProp=function(){};
}if(!window.s_trackLinkWithCustomLinkTrackProp){window.s_trackLinkWithCustomLinkTrackProp=function(){};}if(!window.s){window.s={};}if(!window.s.getPercentPageViewed){s.getPercentPageViewed=function(){};}if(!!navigator.userAgent.match(/Trident\/7\./)){Browser.ie=Browser.ie11=true;Browser.version=11;}if(!window.console){console=new function(a){this.log=function(a){};this.warn=function(a){};this.info=function(a){};this.error=function(a){};};}function clickElement(el){if(el.click){el.click();}else{var theEvent=document.createEvent("MouseEvents");theEvent.initEvent("click",true,true);el.dispatchEvent(theEvent);}}var HotelSearch=new Class({Implements:[Options,Events],options:{params:"width=400, height=500, scrollbars=yes, resizable=yes, dependent=yes",setFocusToDestiny:true},initialize:function(form,options){this.setOptions(options);
if(window["vorabBelegung"]!=undefined){this.options.destinyPrompt=window["vorabBelegung"];}else{this.options.destinyPrompt="";}this.destiny=$("destiny");this.form=form.get("tag")=="form"?form:form.getElement("input").form;if(this.destiny){this.initDestiny();}$$("#extSearch, #mapSearch").addEvent("mouseover",function(){this.setStyle("text-decoration","underline");}).addEvent("mouseout",function(){this.setStyle("text-decoration","none");});this.form.addEvent("submit",this.submitRequest.bind(this));this.rooms=[this.form.getElement("#singleRooms"),this.form.getElement("#doubleRooms")];this.adults=this.form.getElement("#adults");for(var i=0,l=this.rooms.length;i<l;i++){if(this.rooms[i]){this.rooms[i].addEvent("keyup",function(){this.setCountPersons();}.bind(this));}}this.initChildren();this.initRoomSelector();
},initRoomSelector:function(){var roomSelector=$("roomSelector");if(roomSelector==null){return;}this.roomSelectorContainer=$("roomSelectionOptions");this.roomFieldToType={container:"div",singleRooms:"input",doubleRooms:"input",adults:"input",children:"input"};this.roomOptions=[{singleRooms:1,doubleRooms:0,adults:1,children:0,container:0},{singleRooms:1,doubleRooms:0,adults:1,children:0,container:0},{singleRooms:0,doubleRooms:1,adults:2,children:0,container:0},{singleRooms:2,doubleRooms:0,adults:2,children:0,container:0},{singleRooms:0,doubleRooms:0,adults:0,children:0,container:1},{singleRooms:0,doubleRooms:1,adults:1,children:0,container:0}];this.roomOptionsElements={singleRooms:$("singleRooms"),doubleRooms:$("doubleRooms"),adults:$("adults"),children:$("children"),container:$("roomSelectionOptions")};
this.roomSelector=roomSelector.addEvent("change",function(){var value=this.roomSelector.value;this.handleRoomSelect(Number(value));}.bind(this));var currentValue=Number(roomSelector.value);if(currentValue!=4){this.handleRoomSelect(currentValue);}},handleRoomSelect:function(value){for(var key in this.roomOptions[value]){if(!this.roomOptions[value].hasOwnProperty(key)){continue;}switch(this.roomFieldToType[key]){case"input":this.roomOptionsElements[key].value=this.roomOptions[value][key];break;case"div":this.roomOptionsElements[key].style.display=Number(this.roomOptions[value][key])==0?"none":"block";break;}}},initChildren:function(){this.children=$("children");if(this.children){var nextChildren=this.children.getNext();if(nextChildren){nextChildren.dispose();}this.childs=$("childrenWrap").getChildren();
this.children.addEvent("change",this.showChildren.bind(this));this.showChildren();}this.addEvent("changeChildren",this.showChildren.bind(this));},initDestiny:function(){var destinyPrompt=this.options.destinyPrompt;var theEvent=["click","keydown"];if(!window.map){if(this.options.setFocusToDestiny){this.destiny.focus();}if(this.destiny.value==""){this.destiny.value=destinyPrompt;this.destiny.style.color="#808080";setTimeout(function(){this.destiny.addClass("focus");this.destiny.focus();}.bind(this),0);}if(this.destiny.value==destinyPrompt){this.destiny.style.color="#808080";}for(var i=0;i<theEvent.length;i++){this.destiny.addEvent(theEvent[i],function(){if(this.value==destinyPrompt){this.style.color="#000033";this.value="";}});}this.destiny.addEvent("blur",function(){if(this.value==""){this.value=destinyPrompt;
this.style.color="#808080";}});this.destiny.addEvent("change",function(){if(this.value!=destinyPrompt&&md){md.msst=this.value;}});if(this.options.setFocusToDestiny){if(this.destiny.setSelectionRange&&this.destiny.getSize().x){this.destiny.focus();this.destiny.setSelectionRange(0,0);}var destinyIsEmpty=(this.destiny.value===destinyPrompt);if(this.destiny.createTextRange&&destinyIsEmpty){var thisRewrite=this;setTimeout(function(){var range=thisRewrite.destiny.createTextRange();range.collapse(true);range.moveEnd("character",0);range.moveStart("character",0);range.select();},0);}}}else{for(var i=0;i<2;i++){this.destiny.addEvent(theEvent[i],function(){if(this.value==window.SEEMAP){this.style.color="#000033";this.value="";}});}this.destiny.addEvent("blur",function(){if(this.value==""&&this.form.retrieve("searchDestinationMap")){this.style.color="#808080";
this.value=this.form.retrieve("searchDestinationMap");}});}},setCountPersons:function(){this.adults.value=this.getSum(1);},submitRequest:function(event){var searchSource=$("searchSource");if(searchSource){if(this.form.retrieve("searchDestinationMap")&&(this.destiny.value==""||this.destiny.value==this.form.retrieve("searchDestinationMap"))){searchSource.value=9;}else{searchSource.value=(searchSource.value>0)?searchSource.value:1;}}if(this.destiny&&this.destiny.value&&(this.destiny.value==this.options.destinyPrompt||this.destiny.value==window.SEEMAP)){this.destiny.value="";}var sum=this.getSum(0);if(sum<=MAXROOMCOUNT){return true;}else{if(sum<10){event.preventDefault();window.open(HELPSATELLITE,HELPSATELLITENAME,this.options.params);}}},getSum:function(f){var sum=0;this.rooms.each(function(room,i){if(room&&room.value){if(isNaN(room.value)){room.value="";
}sum+=(room.value*(1+(f*i)));}});return sum;},showChildren:function(){var number=this.children.selectedIndex;if(number>0){$("childrenWrap").addClass("active");}else{$("childrenWrap").removeClass("active");}this.childs.each(function(child,i){child[(i<number?"remove":"add")+"Class"]("hide");});if(Browser.ie){var veMapSearch=$$("div.veMapSearch")[0];if(veMapSearch&&this.form.getParent().hasClass("show")){veMapSearch.setStyle("height",(Browser.ie6?200:315)+$("searchForm").getSize().y);}}}});var SetVideoSpan=new Class({Implements:Options,options:{all:true,initHeight:false,wrapWidth:false,wrapHeight:false,limitToOffset:true,offsetPadding:0},initialize:function(vi,pic,options){this.setOptions(options);if(this.options.initHeight){vi.setStyle("height",this.options.initHeight+"px");}if(this.options.all){vi.each(function(item,index){thePic=item.getParent().getParent().getElement("img");
this.setDimensions(item,thePic,this.options);},this);}else{this.setDimensions(vi,pic,this.options);}},setDimensions:function(el,pic,options){var theWidth=pic.getSize().x,theHeight=pic.getSize().y,theLeftPos,theTopPos;if(theWidth<48){theWidth=48;}if(theHeight<48){theHeight=48;}if(this.options.limitToOffset&&theWidth>this.options.wrapWidth){theWidth=this.options.wrapWidth;}if(this.options.limitToOffset&&theHeight>this.options.wrapHeight){theHeight=this.options.wrapHeight;}if(this.options.wrapWidth){theLeftPos=Math.ceil((this.options.wrapWidth-theWidth)/2);if(theLeftPos<0){theLeftPos=0;}}else{var wrapWidth=el.getParent().getSize().x;theLeftPos=Math.ceil((wrapWidth-theWidth)/2);}if(this.options.wrapHeight){theTopPos=Math.ceil((this.options.wrapHeight-theHeight)/2);if(theTopPos<0){theTopPos=0;}}else{var wrapHeight=el.getParent().getSize().y;
theTopPos=Math.ceil((wrapHeight-theWidth)/2);}el.setStyles({"width":theWidth+"px","height":theHeight+"px","top":theTopPos+this.options.offsetPadding+"px","left":theLeftPos+this.options.offsetPadding+"px"});}});var Toggler=new Class({Implements:[Options,Events],options:{opener:[],toggleText:null,toggleTextType:"value",toggleClass:null,hideCheck:false,onToggleEnd:function(){},onToggleStart:function(){},durationOpen:360,durationClose:360,toggleFast:false,useHideForTabsClass:true,oneOpenerMultipleToggles:false,stopEvent:true,wrapperClassName:"jsToggleWrap",isToogledClassName:"jsToggled",togglerClassName:"jsToggler"},initialize:function(i_toggle,i_toggler,options){if(!(Browser.safari2||Browser.opera8)){var toggle=$$(i_toggle);var toggler=$$(i_toggler);this.toggle=toggle;this.setOptions(options);
this.slides=[];toggle.each(function(item,index){var temp=this.options.oneOpenerMultipleToggles?toggler[0]:toggler[index];if(temp){this.addSection(item,temp,index);}},this);toggler.each(function(item,index){if(!item.hasClass("additionalBookingDetails")){item.removeClass("hide");}});this.options.opener.each(function(item){item.toggler=$(item.getProperty("href").replace("#",""));var index=item.toggler.index;var parent=this;item.addEvent("click",function(e){if(!parent.slides[index].open){parent.slides[index].show();item.toggler.removeClass(parent.options.isToogledClassName);}}.pass(index,parent,item));},this);if(toggler.length&&this.options.hideCheck){if(toggler[0].hasClass("hide")){var toggleTables=toggle[0].getElements("table.deal");var openToggle=false;toggleTables.each(function(item){if(!item.hasClass("hide")){openToggle=true;
}});if(openToggle){toggler[0].click();}}}}},addSection:function(toggle,toggler,index){if(toggle.getStyle("display")==="none"){var restoreStyles=toggle.getStyles("top","position");toggle.setStyles({top:"-10000000px",display:"block"});toggle.addClass("IEBug");}var TogglerObject=this;this.slides[index]=new Fx.Slide(toggle,{wrapper:new Element("div",{"class":TogglerObject.options.wrapperClassName}).wraps(toggle),transition:!this.open?"pow:out":"pow:in",link:"cancel",resetHeight:true,onComplete:function(){if(!this.open){this.element.removeClass("IEBug");this.element.setProperty("aria-hidden","false");if(Browser.ie6&&this.element.getParent().getParent().id=="filter"){this.element.parentNode.style.height=this.element.parentNode.offsetHeight+"px";}}else{this.element.setProperty("aria-hidden","true");
if(TogglerObject.options.useHideForTabsClass){this.element.addClass("hideForTabs");}}if(Browser.ie6){setTimeout(function(){this.element.toggleClass("fixForIE");TogglerObject.fireEvent("toggleEnd",[this.open,this]);}.bind(this),100);}else{TogglerObject.fireEvent("toggleEnd",[this.open,this]);}if(Browser.ie10&&toggler.getParent().getParent()&&toggler.getParent().getParent().hasClass("search")&&this.open){toggler.getParent().getParent().removeProperty("style");}},onStart:function(){if(Browser.ie6&&$("footerMenuWrap")){$("footerMenuWrap").dispose().inject($("layout02"),"before");}if(Browser.ie10){}if(Browser.ie10&&toggler.getParent().getParent()&&toggler.getParent().getParent().hasClass("search")&&this.open){toggler.getParent().getParent().setStyle("box-shadow","none");}if(this.open){this.element.addClass("IEBug");
}else{if(TogglerObject.options.useHideForTabsClass){this.element.removeClass("hideForTabs");}}if(Browser.ie6){setTimeout(function(){TogglerObject.fireEvent("toggleStart",[this.open,this]);}.bind(this),100);}else{TogglerObject.fireEvent("toggleStart",[this.open,this]);}}});var ariaPressed=false;if(toggler.hasClass("closed")||restoreStyles){if(restoreStyles){toggle.setStyles(restoreStyles);}if(!toggler.hasClass("eventGo")&&!toggler.getElement("input")){this.slides[index].hide();}else{if(!toggler.getElement("input").getProperty("checked")){this.slides[index].hide();}}toggler.addClass(this.options.isToogledClassName);var ariaPressed=true;if(this.options.useHideForTabsClass&&!toggler.hasClass("additionalGuests")){this.slides[index].element.addClass("hideForTabs");}}var ariaControls=toggle.id;if(ariaControls==""){ariaControls="ariaToggle"+index;
toggle.id=ariaControls;}toggler.setProperties({"role":"button","aria-pressed":ariaPressed,"aria-controls":ariaControls});toggler.index=index;toggler.addEvent("click",this.manageTogglerInteraction.bind(this,toggler));toggler.addEvent("keydown",this.manageTogglerInteraction.bind(this,toggler));$$("#searchForm .searchingSummaryLink").addEvent("click",function(){$$(".searchingSummary").setStyle("display","none");$$(".searchingChangeCriteria").removeClass("hide");});if($$(".searchingChangeCriteria label span.error").length){$$("#searchForm .searchingSummaryLink").fireEvent("click");}},manageTogglerInteraction:function(toggler,evt){if((evt&&(evt.type==="click"||evt.key==="enter"))||toggler){if(toggler){evtTarget=toggler;}else{var evtTarget;if(evt.target.hasClass("open")||evt.target.hasClass("closed")||evt.target.hasClass(this.options.isToogledClassName)||evt.target.hasClass(this.options.togglerClassName)){evtTarget=evt.target;
}else{evtTarget=evt.target.getParent();}}if(this.options.oneOpenerMultipleToggles){this.toggle.each(function(item,index){this.handleToggler(evt,evtTarget,index);}.bind(this));}else{this.handleToggler(evt,evtTarget,evtTarget.index);}}},handleToggler:function(event,toggler,index){if(!toggler.hasClass("disabledToggler")){if(event&&"stop" in event&&!toggler.hasClass("eventGo")&&this.options.stopEvent){event.stop();}var toggleTextIndex=0;this.slides[index].options.duration=this.slides[index].open?this.options.durationOpen:this.options.durationClose;if(this.slides[index].open){toggler.addClass(this.options.isToogledClassName);toggler.setProperty("aria-pressed","true");this.fireEvent("togglerClose",{"eventType":"togglerClose","eventData":toggler});if(toggler.hasClass("eventGo")){toggler.getElement("input").setProperty("checked","");
}}else{toggler.removeClass(this.options.isToogledClassName);this.fireEvent("togglerOpen",{"eventType":"togglerOpen","eventData":toggler});if(toggler.hasClass("additionalGuests")&&!toggler.hasClass("hide")){toggler.addClass("hide");}toggler.setProperty("aria-pressed","false");toggleTextIndex=1;if(toggler.hasClass("eventGo")){toggler.getElement("input").setProperty("checked","checked");}}if(this.options.toggleText){toggler[this.options.toggleTextType]=this.options.toggleText[toggleTextIndex];}if(this.options.toggleClass){toggler.toggleClass(this.options.toggleClass);}if(this.options.toggleFast){var slideObj=this.slides[index];if(slideObj.open){slideObj.hide();if(this.options.useHideForTabsClass&&!toggler.hasClass("additionalGuests")){slideObj.element.addClass("hideForTabs");}}else{slideObj.show();
if(this.options.useHideForTabsClass&&!toggler.hasClass("additionalGuests")){slideObj.element.removeClass("hideForTabs");}}}else{this.slides[index].toggle();}}},updateHeight:function(slidesIndex){console.log(this.slides(slidesIndex));}});var SelectLanguage=new Class({initialize:function(select){var select=$(select);if(select){var options=select.getElements("option"),selected,ul=document.createElement("ul"),selectedOptions="",innerHtml=[];options.each(function(option,index){if(option.getAttribute("value")!="separator"&&index>0){var lang=option.getAttribute("value");var langURL=CHANGE_LANGUAGE_URL+"?clientId="+window.ENCODED_CLIENT_IDS[lang];if(cid&&cid!=""){langURL=langURL+"&"+cid;}langURL=langURL+"&jsLangChange=true&differentLanguage=true";innerHtml.push('<li><a rel="nofollow" href="'+langURL+'"><i class="'+lang+'">'+option.innerHTML+"</i></a></li>");
if((option.getAttribute("selected"))){selectedOptions={value:option.getAttribute("value"),text:option.innerHTML};}}});ul.innerHTML=innerHtml.join("");var form=select.parentNode.parentNode;form.style.display="none";form.parentNode.appendChild(ul);var b=new Element("b"),s1=new Element("span"),s2=new Element("span"),s3=new Element("i",{"class":selectedOptions.value}).set("text",selectedOptions.text);s3.inject(s2,"inside");s2.inject(s1,"inside");s1.inject(b,"inside");b.inject(ul,"before");ul.setAttribute("id",select.get("id"));}}});var Popup=new Class({Implements:Options,options:{width:465,height:470,name:"popup",param:""},initialize:function(elements,options){this.setOptions(options);this.window=null;Array.from(elements).each(function(element){if(!element||!element.getAttribute||element.getAttribute("onclick",0)){return;
}var width=this.options.width;var height=this.options.height;if(element.hasClass("pRaffle")){width=480;height=850;}else{if(element.hasClass("pMicrosite")){width=743;height=767;}else{if(element.hasClass("pExclusive")){width=718;height=681;}else{if(element.hasClass("p1024")){width=1024;height=768;}else{if(element.hasClass("p800")){width=800;height=600;}}}}}var parameter="width="+width+", height="+height+", scrollbars=yes, resizable=yes, dependent=yes";element.addEvent("click",function(event){var href=element.href;if(!href){var target=event.target;if(target.hasClass(this.options.delegationerClass)){href=target.href;}else{return;}}event.preventDefault();href+=href.indexOf("?")>-1?"&":"?";href+="isPopup=true"+this.options.param;href=href.replace("userHelpCont","userHelpSat");href=href.replace("(&|&amp;)activity=show","");
this.window=window.open(href,this.options.name,parameter);}.bind(this));},this);}});var Hover=new Class({initialize:function(elements,className){elements.each(function(item){item.addEvent("mouseover",function(){item.addClass(className);}.pass(className,item));item.addEvent("mouseout",function(){item.removeClass(className);}.pass(className,item));});}});var Flyout=new Class({initialize:function(elements,className){elements.each(function(element){var child=element.getElements("ul, form")[0];if(child){if(element.hasClass("login")&&!Browser.firefox){element.getElements("input").removeProperty("autocomplete");}element.addEvent("click",function(event){this.over(event,element,child,className);}.bind(this));element.addEvent("mouseleave",function(event){this.out(event,element,className);}.bind(this));
}},this);},over:function(event,element,child,className){element.addClass(className);var destiny=$("destiny");if(destiny&&!Browser.ie6){destiny.blur();}if(Browser.ie6&&!navigator.userAgent.match(/GomezAgent/)){this.insertIframe(element,child);}},out:function(event,element,className){element.removeClass(className);if(element.hasClass("login")&&!Browser.firefox){element.getElements("input").each(function(el){el.blur();});}},childOut:function(event,element){var relatedTarget=event.relatedTarget;if(relatedTarget!==element&&element.contains(relatedTarget)||!relatedTarget){event.stopPropagation();}},insertIframe:function(element,child){if(!this.iframe){this.iframe=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''"});}this.iframe.inject(element,"inside").setStyles({left:child.offsetLeft,height:child.offsetHeight,width:child.offsetWidth});
}});var FlyoutDelayed=new Class({Implements:[Events,Options],options:{outDelay:1000},initialize:function($$elements,className){$$elements.addEvent("click",this.over.bind(this));$$elements.addEvent("mouseleave",this.outDelayed.bind(this));this.toggleMyhrsFlyout($("isMyhrs"));this.disableLinkToMyhrsRegistrationInFlyoutLogin();$$(".hrs_myhrs_login_text").getParent().set("href","javascript:void(0)");},over:function(event){var liElement=$(event.target),outTimeout=liElement.retrieve("outTimeout"),hasFlyoutChild=liElement.getChildren("ul, form").length;if(outTimeout){clearTimeout(outTimeout);}if(this.activeLi&&this.activeLi!==liElement&&hasFlyoutChild){this.out(this.activeLi);}if(liElement){liElement.addClass("jsHover");this.activeLi=liElement;}},out:function(liElement){if(liElement){liElement.removeClass("jsHover");
}},outDelayed:function(event){var liElement=$(event.target),outTimeout=liElement.retrieve("outTimeout");if(outTimeout){clearTimeout(outTimeout);}var outTimeout=setTimeout(function(){this.out(liElement);}.bind(this),this.options.outDelay);liElement.store("outTimeout",outTimeout);},disableLinkToMyhrsRegistrationInFlyoutLogin:function(){var flyoutParentEl=$("isMyhrs");var linkToMyHrsRegistration;if(flyoutParentEl){linkToMyHrsRegistration=flyoutParentEl.getChildren("a")[0];}else{return;}var stopLinkToMyhrsRegistration=function(event){event.stop();var flyoutEl=flyoutParentEl.getChildren("ul")[0];if(flyoutEl){flyoutEl.toggleClass("show_myhrs_flyout");}};if(document.location.href.test(/setBookingRequest.do|searchWeb1000.do|initHotelBooking.do|setBooking2.do|hotelData.do/)){linkToMyHrsRegistration.addEvent("click",stopLinkToMyhrsRegistration);
}else{linkToMyHrsRegistration.removeEvent("click",stopLinkToMyhrsRegistration);}},toggleMyhrsFlyout:function(flyoutParentEl){if(!flyoutParentEl){return;}var flyoutEl=flyoutParentEl.getChildren("ul")[0];if(!flyoutEl){return;}var allLink=flyoutEl.getElements("a");if(allLink&&document.getElementById("containerAllHotels")==null){var allLinkHrefAllowed=function(event){if(!this.hasClass("jsOpenKissmeLayer")){event.stopPropagation();var linkHref=this.href;event.preventDefault();if(boundClearClickEventOnBody!=undefined){boundClearClickEventOnBody();}window.location=linkHref;}};allLink.removeEvent("click",allLinkHrefAllowed);allLink.addEvent("click",allLinkHrefAllowed);}if(flyoutParentEl.hasClass("loggedIn")){return;}var clickEventOnBodyAlreadyAdded=false;var bodyEl=$(document.body);var clearClickEventOnBody=function(){flyoutEl.removeClass("show_myhrs_flyout");
this.removeEvent("click",boundClearClickEventOnBody);clickEventOnBodyAlreadyAdded=false;};var boundClearClickEventOnBody=clearClickEventOnBody.bind(bodyEl);var linkToMyHrsRegistration=flyoutParentEl.getChildren("a")[0];if(!linkToMyHrsRegistration){return;}var stopLinkToMyhrsRegistration=function(event){event.stop();flyoutEl.toggleClass("show_myhrs_flyout");if(!clickEventOnBodyAlreadyAdded){bodyEl.addEvent("click",boundClearClickEventOnBody);clickEventOnBodyAlreadyAdded=true;}};if(document.location.href.test(/setBookingRequest.do|searchWeb1000.do|initHotelBooking.do|setBooking2.do|hotelData.do/)){linkToMyHrsRegistration.addEvent("click",stopLinkToMyhrsRegistration);}else{linkToMyHrsRegistration.removeEvent("click",stopLinkToMyhrsRegistration);}flyoutEl.addEvent("click",function(event){this.addClass("show_myhrs_flyout");
if(!clickEventOnBodyAlreadyAdded){bodyEl.addEvent("click",boundClearClickEventOnBody);clickEventOnBodyAlreadyAdded=true;}event.stopPropagation();});}});var SimpleFlyoutDelayed=new Class({Implements:[Events,Options],options:{outDelay:200,hideClass:"hide"},contentElement:null,parentClickSelector:null,preserveOverlayClass:"hideOveride",timer:null,initialize:function($$elements,contentElement,parentClickSelector){$$elements.addEvent("click",this.over.bind(this));$$elements.addEvent("mouseleave",this.out.bind(this));this.contentElement=contentElement;this.parentClickSelector=parentClickSelector;this.contentElement.addEvent("click",this.preserve.bind(this));$(document.body).addEvent("click",this.hide.bind(this));},preserve:function(event){if(this.contentElement.hasClass(this.preserveOverlayClass)){return;
}this.contentElement.addClass(this.preserveOverlayClass);},hide:function(event){if($(event.target).getParent(this.parentClickSelector)!=null){return;}this.contentElement.removeClass(this.preserveOverlayClass);},over:function(event){clearTimeout(this.timer);this.contentElement.removeClass(this.options.hideClass);},out:function(event){this.timer=setTimeout(function(){this.contentElement.addClass(this.options.hideClass);}.bind(this),this.options.outDelay);}});var ContextSensitiveHelp=new Class({Implements:[Events,Options],options:{onShow:function(tip){if(tip){tip.setStyle("visibility","visible");}},onHide:function(tip){if(tip){tip.setStyle("visibility","hidden");}},maxTitleChars:30,showDelay:0,hideDelay:100,className:"help",varClassName:"",offsets:{"x":Browser.ie?5:15,"y":15},fixed:false,tooltipText:"",directions:["top","right","bottom","left"],firstDirection:"right",maxHeight:200,maxWidth:450,minWidth:350,closeText:"",openEvent:"click",closeButton:true,toggle:false,moveToFit:false,timerDelay:1000,offset:{top:0,left:0,right:0,bottom:0},widthOffset:0,overtakeChildNode:false,hideInitial:false,layerInitiallyOpen:false,preventOrgEvent:false,closeMe:false,deltaTopPosition:0,overflowY:"scroll",autoFadeDelay:false,hideOnBodyClick:false,showPike:true,simpleDesign:false,onBeforeOpen:function(){},onOpen:function(){}},initialize:function(elements,options){this.setOptions(options);
if(this.options.autoFadeDelay!==false){this.setAutoHideFX();}if(Browser.isMobileTouch){this.options.closeButton=true;}this.orderDirections();this.options.container=this.options.container||($(document.body));this.options.scrollEl=this.options.scrollEl||window;var noBtnClass;this.options.closeButton?noBtnClass="":noBtnClass=" noClose";if(this.options.hideInitial){elements.removeClass("hidden");elements.getNext().removeClass("hide");}this.toolTip=new Element("div",{"class":this.options.className+"-layer"+this.options.varClassName+noBtnClass,"styles":{"position":"absolute","top":"0","left":"0","visibility":"hidden","width":0}}).inject(this.options.container);var simpleTooltipClass="";if(this.options.simpleDesign){simpleTooltipClass="simpleTooltip";}this.toolTip.innerHTML='<div class="top"><span></span></div><div class="shadowRight"><div class="content '+simpleTooltipClass+'"><div class="help-text"><div></div></div></div></div><div class="bottom"><span></span></div> <div class="shadowBottom"><div class="shadowCorner"></div></div>'+(this.options.closeButton?'<a class="close" href="javascript://">'+this.options.closeText+"</a>":"")+'</span><span class="pike"></span>';
this.wrapper=this.toolTip.getElement(".content");this.helpLayer=this.wrapper.getParent().getParent();this.mapWrap=this.toolTip.getElement(".shadowRight");if(this.options.closeButton){this.toolTip.getElement(".close").addEvent("click",function(e){this.hide(e);}.bind(this));}else{$$(elements).addEvent("click",function(event){if(!this.options.preventOrgEvent){event.preventDefault();}}.bind(this));}if(this.options.openEvent=="mouseenter"){$$(elements).addEvent("click",function(event){if(!this.options.preventOrgEvent){event.preventDefault();}}.bind(this));}$$(elements).each(this.build,this);if(this.options.initialize){this.options.initialize.call(this);}if(Browser.ie6){this.iframe=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''",styles:{"filter":"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)",position:"absolute"}});
this.iframe.inject(this.toolTip,"inside");}if(this.options.hideOnBodyClick){$$("body").addEvent("click",function(event){if(!event.target.hasClass("help-text")){this.hide(event);}}.bind(this));}},getTooltTipContent:function(el){var tooltipText=false,tmp;if((tmp=el.getProperty("data-toolTipText"))&&$(tmp)&&$(tmp).innerHTML){tooltipText=$(tmp).innerHTML;}else{tooltipText=el.retrieve("tooltipText");}return tooltipText;},build:function(el){var tooltipText=this.getTooltTipContent(el);if(!tooltipText){if(this.options.overtakeChildNode){var theTag=el.getNext().tagName;var theClass=el.getNext().className;var thePlainText=el.getNext()?el.getNext().dispose().innerHTML:(el.getParent()&&el.getParent().getNext())?el.getParent().getNext().dispose().innerHTML:null;tooltipText="<"+theTag+' class="'+theClass+'">'+thePlainText+"</"+theTag+">";
}else{if(el.getParents(".myHRSLightBox").length<1){tooltipText=this.options.tooltipText||el.getNext()?el.getNext().dispose().innerHTML:(el.getParent()&&el.getParent().getNext())?el.getParent().getNext().dispose().innerHTML:null;}}el.store("tooltipText",tooltipText);}if(tooltipText){el.addEvent(this.options.openEvent,function(event){if(this.options.openEvent=="mouseenter"||this.options.closeMe==true){clearTimeout(this.timer);}if(event){event.preventDefault();}if((this.options.toggle&&el!=this.activeLink)||!this.options.toggle){this.showTimer=setTimeout(function(){this.start(el);el.tracking=true;this.position(el);}.bind(this),this.options.showDelay);}else{this.hide(el);}}.bind(this));if(this.options.openEvent=="mouseenter"||this.options.closeMe==true){el.addEvent("mouseleave",function(event){this.timer=this.hide.delay(this.options.timerDelay,this,el);
if(this.showTimer){clearTimeout(this.showTimer);}}.bind(this));}el.addEvent("trash",this.end.bind(this));if(this.options.layerInitiallyOpen){this.start(el);el.tracking=true;this.position(el);}}},start:function(el){if(this.options.openEvent=="mouseenter"||this.options.closeMe==true){if(el.hasClass("jsTrackLink")&&!el.tracking){s_trackLink(el.id,true);}this.helpLayer.removeEvents();el.removeEvent("mouseleave");this.helpLayer.addEvent("mouseleave",function(event){this.timer=this.hide.delay(this.options.timerDelay,this,el);}.bind(this));this.helpLayer.addEvent("mouseenter",function(event){clearTimeout(this.timer);}.bind(this));}if(this.activeLink){this.activeLink.removeClass("active");}this.activeLink=el.addClass("active");this.wrapper.empty();var tooltipText=this.getTooltTipContent(el);if(tooltipText){this.text=new Element("div",{styles:{"float":"left"}}).inject(new Element("div",{"class":this.options.className+"-text"}).inject(this.wrapper)).set("html",tooltipText);
var ttElements=this.text.getElements(".layerTooltip");if(ttElements.length){if(!this.tips){this.tips=new Tips();}ttElements.each(function(element){if(!element.title){var prev=element.getPrevious();if(prev){prev.title=element.innerHTML;element.dispose();element=prev;}}if(element.title){this.tips.attach(element);}},this);}}this.fireEvent("onBeforeOpen",[el,this.toolTip]);this.toolTip.setStyle("width","auto");var size=this.text.getSize();this.text.setStyle("float","none");this.toolTip.setStyle("width",(size.x+this.options.widthOffset).limit(this.options.minWidth,this.options.maxWidth));size=this.text.getSize();var scroll=size.y>this.options.maxHeight;this.text.setStyles(scroll?{height:this.options.maxHeight,"overflow-y":this.options.overflowY,position:"relative"}:{height:"auto","overflow-y":"visible",position:"relative"});
if(Browser.ie6){this.toolTip.setStyle("width",(size.x+this.options.widthOffset).limit(this.options.minWidth,this.options.maxWidth)+30);this.iframe.setStyles({"width":this.wrapper.getSize().x,"height":this.wrapper.getSize().y+6});}this.fireEvent("onOpen",[el,this.toolTip]);},end:function(){clearTimeout(this.timer);this.timer=this.hide.delay(this.options.hideDelay,this);},position:function(element,coords){var containerSize,containerScroll,tooltipSize={"x":this.toolTip.offsetWidth,"y":this.toolTip.offsetHeight},coordinates=coords||element.getCoordinates(),offset=this.options.offset,result,pike=this.toolTip.getElement("span.pike");if(!this.options.showPike){pike.setStyle("display","none");}if(this.options.container==$(document.body)){containerSize=window.getSize();containerScroll=window.getScroll();
}else{containerSize=(this.options.container).getSize();containerScroll=(this.options.container).getScroll();coordinates.top+=containerScroll.y;}this.options.directions.some(function(direction){result=this["try"+direction.capitalize()](coordinates,tooltipSize,containerSize,containerScroll,offset[direction]);return(result);},this);if(this.options.moveToFit){pike.setStyle("left","50%");}if(result==null){var direction=this.options.directions[0];result=this["try"+direction.capitalize()](coordinates,tooltipSize,containerSize,containerScroll,offset[direction],true);if(this.options.moveToFit){var windowSize=window.getSize();if(result.left+tooltipSize.x>windowSize.x){var left=windowSize.x-tooltipSize.x-10;pike.setStyle("left",tooltipSize.x/2+result.left-left);result.left=left;}if(result.left<0){var left=10;
pike.setStyle("left",tooltipSize.x/2+result.left-left);result.left=left;}if(result.top+tooltipSize.y>windowSize.y){result.className="top";result.top=coordinates.top-tooltipSize.y;}}}this.options.directions.each(function(direction){this.toolTip.removeClass(direction);},this);if(Browser.ie6&&this.options.container!=window){result.top-=this.options.container.getPosition().y;}this.toolTip.setStyles({"top":result.top,"left":result.left,"visibility":"visible"});pike.className="pike";pike.addClass("pike"+result.className.capitalize());this.fireEvent("onPosition");if(Browser.ie6){if(this.toolTip.getElements("span.close")[0]){this.toolTip.getElements("span.close")[0].toggleClass("ie6Redraw");}else{if(this.toolTip.getElements("a.close")[0]){this.toolTip.getElements("a.close")[0].toggleClass("ie6Redraw");
}}}},tryTop:function(coordinates,tooltipSize,size,scroll,offset,justDoIt){var r,top=coordinates.top-tooltipSize.y,left=(coordinates.left+coordinates.width/2)-tooltipSize.x/2,right=left+tooltipSize.x;if(this.options.simpleDesign){left-=6;}if((top>scroll.y+offset&&left>scroll.x&&right<scroll.x+size.x)||justDoIt){r={top:(top+this.options.deltaTopPosition),left:left,className:"top"};}return r;},tryRight:function(coordinates,tooltipSize,size,scroll,offset,justDoIt){var r,top=coordinates.top+coordinates.height/2-tooltipSize.y/2,right=coordinates.right+tooltipSize.x+this.options.offsets.x,bottom=top+tooltipSize.y;if((top>scroll.y&&bottom<scroll.y+size.y&&right<scroll.x+size.x)||justDoIt){r={top:top,left:coordinates.right+this.options.offsets.x,className:"right"};}return r;},tryBottom:function(coordinates,tooltipSize,size,scroll,offset,justDoIt){var r,bottom=coordinates.bottom+tooltipSize.y+this.options.offsets.y,left=(coordinates.left+coordinates.width/2)-tooltipSize.x/2,right=left+tooltipSize.x;
if(this.options.simpleDesign){left-=6;}if((bottom<scroll.y+size.y&&left>scroll.x&&right<scroll.x+size.x)||justDoIt){r={top:coordinates.bottom+this.options.offsets.y,left:left,className:"bottom"};}return r;},tryLeft:function(coordinates,tooltipSize,size,scroll,offset,justDoIt){var r,top=coordinates.top+coordinates.height/2-tooltipSize.y/2,left=coordinates.left-tooltipSize.x-this.options.offsets.x,bottom=top+tooltipSize.y;if((top>scroll.y&&bottom<scroll.y+size.y&&left>scroll.x)||justDoIt){r={top:top,left:left,className:"left"};}return r;},show:function(){if(this.fadeOutTO){clearTimeout(this.fadeOutTO);}if(this.options.timeout){this.timer=this.hide.delay(this.options.timeout,this);}this.fireEvent("onShow",[this.toolTip]);},hide:function(event){if(this.fadeOutTO){clearTimeout(this.fadeOutTO);}if(typeOf(event)=="event"){(event.target||event.srcElement)?event.preventDefault():event.tracking=false;
}if(this.activeLink){this.activeLink.removeClass("active");}this.activeLink=null;this.fireEvent("onHide",[this.toolTip]);},orderDirections:function(){var first=this.options.directions.indexOf(this.options.firstDirection);for(var i=0;i<first;i++){this.options.directions.push(this.options.directions.shift());}},setAutoHideFX:function(){var that=this;if(this.fadeOutTO){clearTimeout(this.fadeOutTO);}this.fadeOutTO=setTimeout(function(){var tt=that.toolTip;new Fx.Tween(that.toolTip,{onComplete:function(){tt.setStyles({"display":"block","visibility":"hidden","opacity":1});},duration:"normal",property:"opacity"}).start(0);},that.options.autoFadeDelay);}});var InputInitalValue=new Class({initialize:function(inputs){inputs.each(function(input){var initialValue=input.value;input.addEvent("focus",this.toggle.pass([initialValue,true],input)).addEvent("blur",this.toggle.pass([initialValue,false],input)).setStyle("color","#808080");
},this);},toggle:function(initialValue,isFocus){if(this.value==""||this.value==initialValue){this.value=isFocus?"":initialValue;this.setStyle("color",isFocus?"":"#808080");}}});var f1;var calWindow=false;var quitTimeout=false;var quitEnabled=false;var tooltipText;var calendarInputs=[];var isIE=(window.ActiveXObject);var isIE7=(window.ActiveXObject&&window.XMLHttpRequest);function addIcon(inputEl){var iconA=new Element("span",{"class":"calIconA"});iconA.className="calIconA";iconA.href="javascript:;";if(!Browser.isMobileTouch){if(tooltipText){iconA.setAttribute("title",tooltipText);}var tooltips=new Tips(iconA);iconA.addEvent("click",function(){tooltips.hide();});}if(inputEl.nextSibling){inputEl.parentNode.insertBefore(iconA,inputEl.nextSibling);}else{inputEl.parentNode.appendChild(iconA);}iconA.myInput=inputEl;
}function setDateObjects(){var myDateInputs=$$("input.dateInput");for(var i=0;i<myDateInputs.length;i++){var myDateInp=myDateInputs[i];if(Browser.Platform.ios){myDateInp.setAttribute("readonly","readonly");}autoComp=document.createAttribute("autocomplete");autoComp.value="off";myDateInp.setAttributeNode(autoComp);myDateInp.onblur=quitCal;myDateInp.onkeyup=function(){updateBuildCal(this);};addIcon(myDateInp);calendarInputs[calendarInputs.length]=myDateInp;if(myDateInp.onblur==null){myDateInp.setAttribute("autocomplete","off");myDateInp.onblur=quitCal;myDateInp.onkeyup=function(){updateBuildCal(this);};addIcon(myDateInp);calendarInputs[calendarInputs.length]=myDateInp;}if(myDateInp.id.indexOf("end_")==0){myDateInp.startEl=addStartEl(myDateInp.id);}if(myDateInp.id.indexOf("start_")==0){myDateInp.endEl=addEndEl(myDateInp.id);
}}}function resetDateAndSetDateObjects(elements){for(var i=0;i<elements.length;i++){var myDateInp=elements[i];autoComp=document.createAttribute("autocomplete");autoComp.value="off";myDateInp.setAttributeNode(autoComp);myDateInp.onblur=quitCal;myDateInp.onkeyup=function(){updateBuildCal(this);};addIcon(myDateInp);calendarInputs[calendarInputs.length]=myDateInp;if(myDateInp.onblur==null){myDateInp.setAttribute("autocomplete","off");myDateInp.onblur=quitCal;myDateInp.onkeyup=function(){updateBuildCal(this);};addIcon(myDateInp);calendarInputs[calendarInputs.length]=myDateInp;}if(myDateInp.id.indexOf("end_")==0){myDateInp.startEl=addStartEl(myDateInp.id);}if(myDateInp.id.indexOf("start_")==0){myDateInp.endEl=addEndEl(myDateInp.id);}}}function addStartEl(id){var elId=id.replace(/end_/,"start_");if(startEl=$(elId)){return startEl;
}return false;}function addEndEl(id){var elId=id.replace(/start_/,"end_");if(endEl=$(elId)){return endEl;}return false;}function initDateObjects(){setDateObjects();if(Browser.ie){$("calTab").addEvent("click",function(event){event.stopPropagation();});}$(document.body).addEvent("click",function(event){var target=$(event.target);var topCountries=$("topCountries");if(!(target.tagName==="OBJECT")){if((topCountries&&!topCountries.contains(target))&&!target.hasClass("dateInput")&&!target.hasClass("Matchmaker__suggestion-item")&&!target.hasClass("calIconA")&&!target.hasClass("nextM")&&!target.hasClass("prevM")){quitCal();}}});}function startCal(el,startDate,endDate,minDiff,maxDiff){if($("calTab").getParent()!=$(document.body)){contDiv=$("calTab").dispose().inject($(document.body),"inside");}quitEnabled=true;
calHasFocus=false;if(quitTimeout){clearTimeout(quitTimeout);}if(el.tagName.toLowerCase()!="input"){el=el.myInput;}if(el.getAttribute("id")=="start_stayPeriodHD"&&!el.endEl&&document.getElementById("end_stayPeriodHD")){el.endEl=document.getElementById("end_stayPeriodHD");}if(el.getAttribute("id")=="end_stayPeriodHD"&&!el.startEl&&document.getElementById("start_stayPeriodHD")){el.startEl=document.getElementById("start_stayPeriodHD");}initCal(el,$("calIframe"),startDate,endDate,minDiff,maxDiff);}function quitCal(){if(calHasFocus||quitEnabled){quitTimeout=setTimeout(cleanUpCal,300);}}function contains(a,b){while(b.parentNode){if((b=b.parentNode)==a){return true;}}return false;}function hasParent(n,tN){while(n.parentNode){if(n.parentNode.tagName==tN){return true;}n=n.parentNode;}return false;}function addCalendarEvent(obj,evType,fn,useCapture){if(obj.addEventListener){obj.addEventListener(evType,fn,useCapture);
return true;}else{if(obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r;}}}function buildCalIframe(){}function clearCalCache(){for(var i=0;i<calendarInputs.length;i++){calendarInputs[i].dateObj=null;calendarInputs[i].onkeyup=null;}delete calendarInputs;delete calWindow.cal;}var TeaserTracker=new Class({Implements:[Options],options:{searchDepth:4,useGeneralizedClickhandler:false,checkClass:"jsTeaser",requiredElementKeys:["celname","celpos"],optionalElementKeys:["celinfo"],requiredTeaserKeys:["tid","tpos","tiv"],optionalTeaserKeys:["tel"]},initialize:function(options){this.setOptions(options);(this.options.container||$(document.body)).addEvent("mousedown",function(event){if(this.options.useGeneralizedClickhandler){this.checkGeneralized(event);}else{this.check(event);}}.bind(this));
},check:function(event){var target=$(event.target);if(target&&!(target.tagName==="EMBED")&&!(target.tagName==="OBJECT")){var clickedElement,dataElType;for(var i=0;i<this.options.searchDepth;i++){dataElType=target.getAttribute("data-elType");if(dataElType){clickedElement=dataElType;}else{if(!clickedElement){if(target.tagName==="IMG"){clickedElement="image";}else{if(target.tagName==="A"){clickedElement="link";}}}}if(target){if(target.getAttribute("id")==="jsStagePic"){target=this.getActiveStageTeaserElement();}if(target.hasClass(this.options.checkClass)){if(clickedElement){if(target.getProperty(wa.ATTR_TID)){wa.teaserClick(target,{el:(clickedElement)});break;}else{if(target.getParent()&&target.getParent().getProperty(wa.ATTR_TID)){wa.teaserClick(target.getParent(),{el:(clickedElement)});break;
}}}}else{if(target.tagName==="BODY"){break;}}}target=target.getParent();if(!target){break;}}}},checkGeneralized:function(event){var allAttributeKeys=this.options.requiredElementKeys.concat(this.options.optionalElementKeys).concat(this.options.requiredTeaserKeys).concat(this.options.optionalTeaserKeys),foundAttributes={},isTeaserClick=false,isElementClick=false,element=event.target,implicitTeaserElementType;for(var i=0;i<this.options.searchDepth;i++){if(!this.isBlacklisted(element)){for(var j=0;j<allAttributeKeys.length;j++){var key=allAttributeKeys[j];if(foundAttributes[key]===undefined||foundAttributes[key]===null){foundAttributes[key]=this.getData(element,key);}}if(!implicitTeaserElementType){if(element.tagName==="IMG"){implicitTeaserElementType="image";}else{if(element.tagName==="A"){implicitTeaserElementType="link";
}}}if((this.allInMap(this.options.requiredTeaserKeys,foundAttributes)&&this.allInMap(this.options.requiredElementKeys,foundAttributes))||(this.allInMap(this.options.requiredTeaserKeys,foundAttributes)&&!this.anyInMap(this.options.requiredElementKeys,foundAttributes))||(this.allInMap(this.options.requiredElementKeys,foundAttributes)&&!this.anyInMap(this.options.requiredTeaserKeys,foundAttributes))){break;}}var parent=element.getParent();if(parent!==null){element=parent;}else{break;}}if(this.allInMap(this.options.requiredTeaserKeys,foundAttributes)){isTeaserClick=true;}if(this.allInMap(this.options.requiredElementKeys,foundAttributes)){isElementClick=true;}if(isTeaserClick){if(!foundAttributes.tel&&implicitTeaserElementType){foundAttributes.tel=implicitTeaserElementType;}if(isElementClick){wa.teaserClick(event.target,foundAttributes,true);
}else{var data=this.filterMap(this.options.requiredTeaserKeys.concat(this.options.optionalTeaserKeys),foundAttributes);wa.teaserClick(event.target,data);}}else{if(isElementClick){var data=this.filterMap(this.options.requiredElementKeys.concat(this.options.optionalElementKeys),foundAttributes);wa.elementClick(event.target,data);}}},getData:function(element,name){return element.getAttribute("data-"+name);},isBlacklisted:function(element){return(element&&((element.tagName==="EMBED")||(element.tagName==="OBJECT")));},anyInMap:function(keys,map){for(var i=0;i<keys.length;i++){var k=keys[i];if(map[k]!==undefined&&map[k]!==null){return true;}}return false;},allInMap:function(keys,map){for(var i=0;i<keys.length;i++){var k=keys[i];if(map[k]===undefined||map[k]===null){return false;}}return true;},filterMap:function(keys,map){var toReturn={};
for(var i=0;i<keys.length;i++){var k=keys[i];if(map[k]!==undefined&&map[k]!==null){toReturn[k]=map[k];}}return toReturn;},getActiveStageTeaserElement:function(){var toReturn=null;var elList=$$("#jsStageNav .jsTeaser.active");if(elList.length>0){toReturn=elList[0];}return toReturn;}});var ClickTracker=new Class({initialize:function(options){this.options=options;(options.container||$(document.body)).addEvent("mousedown",function(event){this.check(event);}.bind(this));},check:function(event){var target=$(event.target);if(!(target.tagName==="EMBED")&&!(target.tagName==="OBJECT")){for(var i=0;i<4;i++){if(target&&target.hasClass(this.options.checkClass)){var delay=(target.hasClass("delay")?target:true);if(target.getProperty("data-bookingButtonTrackId")){var trackId=target.getProperty("data-bookingButtonTrackId");
var varMap={"eVar42":trackId,"linkTrackVars":"eVar42"};s_trackLink("bookingButton",delay,varMap,s.pageName);}else{s_trackLink(target.id,(target.hasClass("delay")?target:true));}var className=target.getAttribute("class"),classNameArr=className?className.split(" "):[],hasCheckClass,hasDelay;classNameArr.each(function(item){if(this.options.checkClass&&item===this.options.checkClass){hasCheckClass=true;}if(item==="delay"){hasDelay=true;}}.bind(this));if(target&&hasCheckClass){s_trackLink(target.id,(hasDelay?target:true));break;}if(target.get("tag")==="body"){break;}}if(target==null){break;}target=target.getParent();}}}});var FooterMenu=new Class({initialize:function(container){this.wrap=container||$("footerMenuWrap");if(this.wrap){this.panels=this.wrap.getElements("div[id]");this.menu=this.wrap.getElement("ul.footerMenu");
this.links=this.menu.getElements("a");this.menu.addEvent("click",function(event){this.handleClick(event);}.bind(this));this.headline=this.wrap.getElement("h4")||this.wrap.getElement("h1");}},handleClick:function(event){var target=event.preventDefault().target;if(target.get("tag")=="span"){target=target.getParent();}if(target.get("tag")=="a"){if(this.activeElement&&this.activeLayer){this.toggle(true,this.activeElement,this.activeLayer);}if(this.activeElement==target){this.activeElement=this.activeLayer=false;this.headline.removeClass("hide");}else{this.headline.addClass("hide");this.activeElement=target;this.activeLayer=this.panels[this.links.indexOf(target)];this.toggle(false,this.activeElement,this.activeLayer);}}},toggle:function(hide,linkEl,panel){linkEl[(hide?"remove":"add")+"Class"]("active");
panel[(hide?"remove":"add")+"Class"]("show");if(Browser.ie6&&$("corner01")&&$("corner02")){[$("corner01"),$("corner02")].each(function(item){item.setStyles({display:"none"});item.setStyles({display:"block"});});}}});var DWRLogin=new Class({initialize:function(options){this.form=$$(".myhrs form[name=profileForm]");var globalWrap=$("wrap");if(this.form.length&&!(globalWrap&&globalWrap.hasClass("popup"))){this.options=options;this.logInTab=$$("#nav li.login");this.logOutTab=$$("#nav li.logout");this.logOutOnlyTab=$$("#nav li.logoutOnly");this.username=$("username");this.password=$("password");this.rememberLogin=$("rememberLogin");this.touchpoint="Header-Flyout";this.username.label=this.username.getPrevious();this.password.label=this.password.getPrevious();this.$$myhrsLoginText=$$("#nav .hrs_myhrs_login_text");
this.firstName="";this.lastName="";this.logOutTab.getElement("a").addEvent("click",function(event){this.logOut(event);}.bind(this));this.logOutOnlyTab.getElement("a").addEvent("click",function(event){this.logOut(event);}.bind(this));this.form.addEvent("submit",function(event){this.username=$("username");this.password=$("password");this.rememberLogin=$("rememberLogin");this.login(event,this.username,this.password,this.rememberLogin);}.bind(this));this.listItem=$$("li.myhrs");this.username.label.setStyle("width","100%");this.password.label.setStyle("width","100%");if(this.logInTab[0].hasClass("hide")){this.listItem.addClass("small");}if(this.useXdIframeLoginProxy()){this.listItem.addEvent("mouseenter",this.loadXdIframeLoginProxy.bind(this));}if(Browser.ie8){this.form.addEvent("keypress",function(event){this.keycheck(event,this.username,this.password,this.rememberLogin);
}.bind(this));}var disableUserNameBlur=true,disablePasswordBlur=true;this.username.addEvent("focus",function(e){setTimeout(function(){disableUserNameBlur=false;},1);}.bind(this));this.username.addEvent("blur",function(){if(disableUserNameBlur){this.username.focus();}if(!this.username.getProperty("value")&&!disableUserNameBlur){this.username.label.setStyle("width","100%");}disableUserNameBlur=true;}.bind(this));this.password.addEvent("focus",function(){setTimeout(function(){disablePasswordBlur=false;},1);}.bind(this));this.password.addEvent("blur",function(){if(disablePasswordBlur){this.password.focus();}if(!this.password.getProperty("value")&&!disablePasswordBlur){this.password.label.setStyle("width","100%");}disablePasswordBlur=true;}.bind(this));}if(typeof(this.options.toMyHRS)==="object"&&this.options.toMyHRS.length>0){this.options.isToMyHRS=this.options.toMyHRS[0];
}window.DWRLoginInstance=this;if($$(".myHRSLightBox.loginForm .submit").length){$$(".myHRSLightBox.jsMyHrsLoginForm form .submit").addEvent("click",function(event){this.username=$("usernamePopup");this.password=$("passwordPopup");this.rememberLogin=$("rememberLoginPopup");this.touchpoint="Business-Layover";this.login(event,this.username,this.password,this.rememberLogin);}.bind(this));$$(".myHRSLightBox.jsBTLoginForm form .submit").addEvent("click",function(event){this.username=$("BTusernamePopup");this.password=$("BTpasswordPopup");this.rememberLogin=$("BTrememberLoginPopup");this.touchpoint="Business-Layover";this.login(event,this.username,this.password,this.rememberLogin);}.bind(this));}},useXdIframeLoginProxy:function(){return !!(location.protocol==="http:"&&window.postMessage&&window.JSON&&window.JSON.encode);
},loadXdIframeLoginProxy:function(){if("xdIframeLoginProxyReadyState" in this){return;}if($("hrs_xdIframeLoginProxy")){return;}if(!(window.hrs&&window.hrs.xdIframeLoginProxyOptions&&window.hrs.xdIframeLoginProxyOptions.src)){return;}this.xdIframeLoginProxyReadyState="uninitialized";var iframe=document.createElement("iframe");iframe.id="hrs_xdIframeLoginProxy";iframe.src=window.hrs.xdIframeLoginProxyOptions.src;iframe.scrolling="auto";iframe.frameborder="0";iframe.width="0";iframe.height="0";$(iframe).addEvent("load",function(){this.xdIframeLoginProxyReadyState="complete";}.bind(this));document.body.appendChild(iframe);this.xdIframeLoginProxyReadyState="loading";this.xdIframeLoginProxy=iframe;},keycheck:function(event,username,password,rememberLogin){if(event.code==13){event.stop();this.login(event,username,password,rememberLogin);
}},login:function(event,username,password,rememberLogin){event.stop();this.showWaitCurtain();this.userName=username;this.password=password;var self=this,loginArgs={name:username.value,pass:MD5(password.value),rememberLogin:!rememberLogin?false:rememberLogin.checked,action:true},iframe=this.xdIframeLoginProxy,iframeReadyState=this.xdIframeLoginProxyReadyState,iframeLocation,iframeOrigin;this.loginArgs=loginArgs;if(iframe&&iframeReadyState==="complete"&&this.useXdIframeLoginProxy()){iframeLocation=document.createElement("a");iframeLocation.href=iframe.src;iframeOrigin=iframeLocation.protocol+"//"+iframeLocation.host;if(iframeLocation.hostname!==location.hostname){return;}var onIframeMessage=function(e){e=e||window.event;if(e.source!==iframe.contentWindow){return;}var data=JSON.decode(e.data),originLocation;
originLocation=document.createElement("a");originLocation.href=e.origin;if(originLocation.hostname!==location.hostname){return;}self.response(data);};if(!this.xdIframeLoginProxyListenerAttached){this.xdIframeLoginProxyListenerAttached=true;if("addEventListener" in window){window.addEventListener("message",onIframeMessage,false);}else{if("attachEvent" in window){window.attachEvent("onmessage",onIframeMessage);}}}iframe.contentWindow.postMessage(JSON.encode(loginArgs),iframeOrigin);}else{MyHRSLogin.loginUser(loginArgs.name,loginArgs.pass,loginArgs.action,loginArgs.rememberLogin,this.response.bind(this));}},logOut:function(event){event.stop();this.showWaitCurtain();if(this.options.sendBookingForm||this.options.isBookingConfirmation||this.options.isHotellist){MyHRSLogin.logout(true,this.response.bind(this));
}else{MyHRSLogin.onlyTrackLogout(function(response){if(s_trackLink&&response.linkTrackingData){s_trackLink(response.linkTrackingData.name,true,response.linkTrackingData.vars);}setTimeout(function(){window.location=$$(".myhrs .logout a")[0]["href"];},500);});}},response:function(response){this.classLogoutResponse=response;if(response.loginSuccessful){var touchpointMyHRS=GTMHelper.getLastTouchpointMyHRS()||GTMHelper.Utils.getMyHRSTouchpoint(this.touchpoint,GTMHelper.getCurrentPageName());$$("body").addClass("signedin");this.sendLinkTracking(response);window.HRS_PUW.GTM.EventHandler.PuwLoginHandler(touchpointMyHRS,response.kmuUserLoggedIn?"1":"0",(this.loginArgs.rememberLogin)?"Y":"N",response.userMyHRSID);if(window.wa){window.wa.viewChange("MyHRSFlyoutLogin",{});}if(window.kissmelightbox&&response.kisSMELayerUrl){window.kissmelightbox.openLightBox(response.kisSMELayerUrl);
}this.firstName=response.firstName||"";this.lastName=response.lastName||"";if(response.username){this.username.value=response.username;}if(response.kmuUserLoggedIn){this.kmuUserLoggedIn=response.kmuUserLoggedIn;}this.listItem.addClass("loggedIn");this.toggleTab(true);if($$(".myHRSLightBox.loginForm").length){$$(".myHRSLightBox.loginForm").setStyle("display","none");$$("#KisSMELightBox_veilPopup").setStyle("display","none");}if($$("#hotelDetailsHD > .businessTariffBar").length){if(window.location.pathname.slice(0,5)!="/web3"){window.location.href="/web3"+window.location.pathname+window.location.search;}else{window.location.reload();}}if(this.options.isHotellist){if(this.kmuUserLoggedIn){window.omitFormInfoCookie=true;}var searchForm=$("searchForm");if(response.differentLanguage){if($("start_stayPeriod")&&response.stayPeriodStartDate&&response.stayPeriodStartDate!=""){$("start_stayPeriod").value=response.stayPeriodStartDate;
}if($("end_stayPeriod")&&response.stayPeriodEndDate&&response.stayPeriodEndDate!=""){$("end_stayPeriod").value=response.stayPeriodEndDate;}var originalURL=searchForm.getAttribute("action");var alteredURL=this.removeParam("clientId",originalURL);searchForm.setAttribute("action",alteredURL);}searchForm.setAttribute("action",this.rewriteParam("ef_userid",window.location.search,searchForm.getAttribute("action")));if(window.HotelDetailsLayer&&window.HotelDetailsLayer.hotelId&&window.HotelDetailsLayer.hotelId>0){searchForm.setAttribute("action",searchForm.getAttribute("action")+"#hotelId"+window.HotelDetailsLayer.hotelId);}else{if(window.selectedHotelId&&window.selectedHotelId>0){searchForm.setAttribute("action",searchForm.getAttribute("action")+"#hotelId"+window.selectedHotelId);}}searchForm.submit();
return;}if(this.options.isToMyHRS||this.options.sendBookingForm||response.reloadPage||this.options.reloadPage||response.differentLanguage){if(response.reloadUrl){this.reload(response);}else{if(this.options.isHomepage&&this.options.homepageReload){var param="";if(window.kissmelightbox&&response.kisSMELayerUrl&&response.kisSMELayerUrl.indexOf("smeUserLoginAfterRegistrationLayer")!==-1){param="&openKisSMELayer=smeUserLoginAfterRegistrationLayer";}document.location=this.options.homepageReload+param;}else{if(this.options.genericReload){if(document.location.href.search(/;jsessionid/i)!==-1){if(document.location.href.search(/logout/i)!==-1){document.location=document.location.href.replace("logout","show").replace("processLogin","showProfile");}else{document.location.reload();}}else{if(window.kissmelightbox.options.page&&window.kissmelightbox.options.page==="memberLogin"){document.location=document.location.href.replace("&openLoginLayer=memberLogin","");
}else{this.reloadGenericUrlUsingCurrentAction(this.options.genericReload,"&openKisSMELayer=true");}}}else{window.omitFormInfoCookie=true;this.reload(response);}}}}if(this.options.isToMyHRS||this.options.sendBookingForm){document.location.reload();}else{if(this.errorField){this.errorField.dispose();this.errorField=null;}}}else{if(response.logoutSuccessful){this.sendLinkTracking(response);if(window.wa){window.wa.viewChange("MyHRSFlyoutLogout",{});}this.listItem.removeClass("small");if(this.options.isHotellist){var that=this;if(that.classLogoutResponse.kmuUserLogout){setTimeout(function(){window.omitFormInfoCookie=true;$("searchForm").submit();},500);}else{setTimeout(function(){window.omitFormInfoCookie=true;that.reload(response);},500);}return;}else{if(this.options.isToMyHRS||this.options.sendBookingForm){window.omitFormInfoCookie=true;
this.reload(response);}else{this.listItem.removeClass("loggedIn");this.toggleTab(false);}}}else{if(response.validationSuccessful){if($("loginFlyout")){if($("originUrl")){$("originUrl").value=window.location.href;}if($("classicLogin")){$("classicLogin").value=response.validationSuccessful;}$("loginFlyout").submit();}}else{if(window.wa){window.wa.viewChange("MyHRSFlyoutError",{});}this.toggleTab(false);if(this.errorField){this.errorField.dispose();this.errorField=null;}if(this.password.getParent(".myHRSLightBox")){this.errorField=new Element("div",{"class":"errorMsg"}).inject(this.password.getParent(),"after");}else{this.errorField=new Element("div",{"class":"errorMsg"}).inject(this.password.getParent().getSiblings(".ie6myHRSFix")[0],"after");}this.errorField.set("html",(response.loginErrorMessage?"<p>"+response.loginErrorMessage+"</p>":""));
}}}this.removeWaitCurtain();},sendLinkTracking:function(data){if(data){md.mpev="login";md.mucs=data.kmuUserLoggedIn?"11":"NA";md.mufn=data.firstName;md.muln=data.lastName;md.mulogin="3";md.mumyuid=data.linkTrackingData.vars.prop29;md.muut=data.kmuUserLoggedIn?"1":"0";}if(window.s_trackLink&&data.linkTrackingData){data=data.linkTrackingData;data.vars.linkTrackVars+=",eVar65";data.vars.eVar33=data.vars.prop33="3;"+(data.kmuUserLoggedIn?"1;11":"0;0");data.vars.eVar65=s.pageName.replace(/\s|:/g,"")+":"+this.touchpoint;window.s_trackLink(data.name,true,data.vars);}},toggleTab:function(loggedIn){if(loggedIn){this.logInTab.addClass("hide");var firstName=this.firstName||"",lastName=this.lastName||"",name="";if(firstName||lastName){name=firstName+"&nbsp;"+lastName;}if(!name&&this.username.value){name=this.username.value.toUpperCase();
}this.logOutTab.removeClass("hide").getElement("p").set("html",this.options.properties.hallo+" "+name);this.$$myhrsLoginText.set("html",name);}else{this.logInTab.removeClass("hide");this.logOutTab.addClass("hide").getElement("p").set("html","");this.$$myhrsLoginText.set("html",this.$$myhrsLoginText.get("data-guest_message"));}var logoutTextContainer=this.listItem.getElement("b");if(logoutTextContainer&&typeof logoutTextContainer.addClass==="function"){logoutTextContainer[(loggedIn?"remove":"add")+"Class"]("hide");}if(this.logInTab[0].hasClass("hide")){this.listItem.addClass("small");}else{this.listItem.removeClass("small");}},reload:function(response){var activityElements=document.getElementsByName("activity");var len=0;var activityElement;if(activityElements&&activityElements.length){len=activityElements.length;
activityElement=(len>1)?activityElements[1]:activityElements[0];}if(this.options.sendBookingForm){var bookingForm=$$("form[name=bookingForm]");if(typeOf(bookingForm)=="elements"){bookingForm=bookingForm[0];}if(activityElement){activityElement.value="reloadFirstBookingStep";}var loginInput=new Element("input",{"type":"hidden","name":"doLogin","value":"true"});loginInput.inject(bookingForm);bookingForm.submit();}else{var currentURL=location.href,targetContextPath,targetPath,currentHost,newURL;if(currentURL.indexOf("logout")!=-1){newURL=currentURL.replace("activity=logout","activity=show").replace("processLogin.do","showProfile.do");if(window.kissmelightbox&&response.kisSMELayerUrl){newURL=newURL+"&openKisSMELayer="+response.kisSMELayerUrl.match(/page=(\w*)/)[1];}location.href=newURL;}else{if(response.reloadUrl){location.href=response.reloadUrl;
}else{if(activityElement){if((activityElement.value!="showAffirmation")&&(activityElement.value!="handleBookingConfirmationAction")){if(window.kissmelightbox&&response.kisSMELayerUrl){location.href=location.href+"&openKisSMELayer="+response.kisSMELayerUrl.match(/page=(\w*)/)[1];}else{if(this.options.toMyHRS&&this.options.toMyHRS[0]){targetContextPath=this.options.toMyHRS[1];targetPath=this.options.toMyHRS[2];currentHost=currentURL.split(targetContextPath)[0];if(currentHost){location.href=currentHost+targetPath;}else{location.reload();}}else{location.reload();}}}}}}}},reloadGenericUrlUsingCurrentAction:function(genericUrl,excludeParam){var curUrl=document.location.href,reloadUrlParts=genericUrl.split("?"),reloadUrlPartHost=reloadUrlParts[0],reloadUrlPartSearch=reloadUrlParts[1]||"",matches=curUrl.match(/(.+)\/(.+.do)/),action=matches[2],finalUrl=reloadUrlPartHost.replace(/XXX_DO/,action),finalSearchMap={},key;
function populateArgsExcept(map,args,except){args=args||"";except=except||[];var i=0,l=args.length,arg,eI,eL=except.length,skipArg;for(;i<l;i++){arg=args[i].split("=");skipArg=false;for(eI=0;eI<eL;eI++){if(arg[0].toUpperCase()===except[eI].toUpperCase()){skipArg=true;break;}}if(!skipArg){map[arg[0]]=arg[1];}}}populateArgsExcept(finalSearchMap,document.location.search.substring(1).split("&"),["clientId","client","cid"]);populateArgsExcept(finalSearchMap,reloadUrlPartSearch.split("&"));for(key in finalSearchMap){finalUrl+=((finalUrl.search(/\?/)===-1?"?":"&")+key+"="+finalSearchMap[key]);}if(typeof excludeParam==="string"){finalUrl=finalUrl.replace(excludeParam,"");}document.location=finalUrl;},addWaitCurtain:function(){var divMyhrsLoginPanelOverlay=new Element("div",{"id":"myhrsLoginPanelOverlay"});
var divMyhrsLoginPanelAnimation=new Element("div",{"id":"myhrsLoginPanelAnimation"});var formParentUlElement=this.form.getParent().getParent()[0];formParentUlElement.adopt(divMyhrsLoginPanelOverlay,divMyhrsLoginPanelAnimation);},deleteWaitCurtain:function(){var divLoginOverlay=$$("#nav #myhrsLoginPanelOverlay");var divLoginAnimation=$$("#nav #myhrsLoginPanelAnimation");divLoginOverlay.destroy();divLoginAnimation.destroy();if($$(".myHRSLightBox .loadingAnimation").length){$$(".myHRSLightBox .loadingAnimation").addClass("hide");}},showWaitCurtain:function(){this.addWaitCurtain();var divLoginOverlay=$$("#nav #myhrsLoginPanelOverlay")[0];var divLoginAnimation=$$("#nav #myhrsLoginPanelAnimation")[0];divLoginOverlay.addClass("waitOverlay");divLoginAnimation.addClass("waitAnimation");if($$(".myHRSLightBox .loadingAnimation").length){$$(".myHRSLightBox .loadingAnimation").removeClass("hide");
}},hideWaitCurtain:function(){var divLoginOverlayLocal=$$("#nav #myhrsLoginPanelOverlay")[0];var divLoginAnimationLocal=$$("#nav #myhrsLoginPanelAnimation")[0];setTimeout(function(){divLoginOverlayLocal.removeClass("waitOverlay");divLoginAnimationLocal.removeClass("waitAnimation");if($$(".myHRSLightBox .loadingAnimation").length){$$(".myHRSLightBox .loadingAnimation").addClass("hide");}},200);},removeWaitCurtain:function(){var deleteWaitCurtainLocal=this.deleteWaitCurtain;setTimeout(function(){deleteWaitCurtainLocal();},200);},removeParam:function(key,sourceURL){var rtn=sourceURL.split("?")[0],param,params_arr=[],queryString=(sourceURL.indexOf("?")!==-1)?sourceURL.split("?")[1]:"";if(queryString!==""){params_arr=queryString.split("&");for(var i=params_arr.length-1;i>=0;i-=1){param=params_arr[i].split("=")[0];
if(param===key){params_arr.splice(i,1);}}rtn=rtn+"?"+params_arr.join("&");}return rtn;},rewriteParam:function(key,sourceURL,targetURL){var result=targetURL;if(typeof sourceURL==="string"){var parts=sourceURL.split(key+"=");if(parts.length>1){if(result.indexOf("?")!==-1){result=result+"&";}else{result=result+"?";}result=result+key+"="+parts[1].split("&")[0];}}return result;}});var Newsletter=new Class({Implements:Options,options:{useInputInitalValue:true},initialize:function(options){this.setOptions(options);var forms=$$(".newsletterSubscription");forms.each(function(form){if(!form.added){var input=this.options.isBookingConfirmation?$("newsletterOrdered"):form.getElement("input");form.added=true;if(this.options.useInputInitalValue){var iiv=new InputInitalValue([input]);}else{input.addEvent("click",function(){this.value="";
});}form.addEvent("submit",function(event){this.submit(event,input,form);}.bind(this));}},this);},submit:function(event,input,form){event.stop();var consentCheckbox=this.options.isBookingConfirmation?document.getElementById("subscribeNewsletterCheckbox"):document.getElementById("newsletterOrdered");var isFormValid=this.validate(input,consentCheckbox);var isConsentChecked=consentCheckbox?consentCheckbox.checked:true;if(!isFormValid){return;}this.input=input;this.form=form;if(this.options.isHP){this.CTA=form.getElementsByClassName("button")[0];if(this.msg){this.msg.dispose();}this.disableCTAButton();}NewsletterSubscription.subscribe(this.input.value,isConsentChecked,true,this.options.isHP,this.response.bind(this));},validate:function(input,checkBox){var isEmailValid=validateEmail(input.value);
var valid=true;if(checkBox&&!checkBox.checked){var consentErrorMsg=document.getElementById("subscribeNewsletterLabel");consentErrorMsg.style.display="block";checkBox.addEvent("click",function(){consentErrorMsg.style.display="none";});valid=false;}if(this.options.isNewNewsletterForm&&(input.value.trim()===""||!isEmailValid)){var inputErrorMsg=document.getElementsByClassName("Newsletter__error--empty")[0];inputErrorMsg.style.display="block";input.addEvent("change",function(){inputErrorMsg.style.display="none";});valid=false;}return valid;function validateEmail(value){var regEx=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return regEx.test(value);}},disableCTAButton:function(){if(this.CTA){this.CTA.disabled=true;}},unblockCTAButton:function(){if(this.CTA){this.CTA.disabled=false;}},response:function(response){var that=this;
var text=" ";for(i in this.options){if(response[i]){text=this.options[i].replace(/\{0}/,response.email);}}if(this.options.isHP){if(this.options.isNewNewsletterForm){var subscribingMsg=prepareSuccessfullSubscribingMsg();if(response.subscriptionSuccessful){hideElements();displaySuccessPopup();new Element("div",{"class":"Newsletter__subscribing","html":subscribingMsg}).inject($("Newsletter"),"bottom");}else{this.unblockCTAButton();var msg=new Element("div",{"class":"Newsletter__error Newsletter__error--unsuccessful","html":text}).inject($("Newsletter"),"bottom");displayErrorResponseMsg(msg);}function displaySuccessPopup(){var popup=document.getElementsByClassName("hrsPopup")[0];popup.style.display="block";var closingElements=document.querySelectorAll(".hrsPopup__overlay, .hrsPopup__close-icon");
for(var i=0;i<closingElements.length;i+=1){closingElements[i].addEvent("click",function(e){e.stopPropagation();closeSuccessPopup();});}}function closeSuccessPopup(){var popup=document.getElementsByClassName("hrsPopup")[0];popup.style.display="none";}function prepareSuccessfullSubscribingMsg(){return that.options.subscriptionSuccessfulToEmail.replace(/{email}/,response.email);}function displayErrorResponseMsg(element){element.style.display="block";that.msg=element;that.input.store("tooltipText",text);}function hideElements(){var subscribersQuantityText=document.getElementsByClassName("Newsletter__subscribers-quantity")[0];var newsletterContent=document.getElementsByClassName("Newsletter__content")[0];if(subscribersQuantityText&&newsletterContent){subscribersQuantityText.dispose();newsletterContent.dispose();
}}}else{this.unblockCTAButton();this.input[(response.subscriptionSuccessful?"remove":"add")+"Class"]("error");var msg=new Element("div",{"class":response.subscriptionSuccessful?"successMsg":"errorMsg","html":text}).inject($("newsletterLayer"),"top");this.msg=msg;this.input.store("tooltipText",text);}}else{if(this.options.isBookingConfirmation){this.input[(response.subscriptionSuccessful?"remove":"add")+"Class"]("error");if(this.msg==null){var msg=new Element("div").inject(this.form,"top");this.msg=msg;}this.msg.removeProperty("class");this.msg.addClass(response.subscriptionSuccessful?"messages success":"errorMsg");this.msg.set("html",text);this.input.store("tooltipText",text);}else{if(!this.help){this.help=new ContextSensitiveHelp([],{maxWidth:300,firstDirection:"top",closeText:this.options.windowClose});
}this.input[(response.subscriptionSuccessful?"remove":"add")+"Class"]("error");this.help.toolTip[(response.subscriptionSuccessful?"remove":"add")+"Class"]("errorLayer");this.help.toolTip[(response.subscriptionSuccessful?"add":"remove")+"Class"]("successLayer");this.input.store("tooltipText",text);this.help.start(this.input);this.help.position(this.input);}}if(s_trackLink&&response.linkTrackingData){s_trackLink(response.linkTrackingData.name,true,response.linkTrackingData.vars);}}});var clientDate=new Date();var dateArr;var dateSepFallBack=false;function needDateSepFallBack(){if(dateStr.indexOf(" ")!=-1){return true;}return false;}function checkDateStr(){if(needDateSepFallBack()){dateSepFallBack=dateSep;dateSep=". ";dateArr=dateStr.split(dateSep);}}var zeigeKw=false;var kwHead="KW";var calHasFocus=false;
var calTbody,stop,mHeader,jahr,monat,tag,ankerEl,ifr,contDiv,calTabelle,dateArrIndex,minDiff,maxDiff,callIframeShim;var selYear,selMonth,selDay,startDateD,startDateM,startDateY,endDateD,endDateM,endDateY,maxDateObj,maxDateD,maxDateM,maxDateY;function initCal(inpEl,iframeObj,startDate,endDate,diff,diff2){ankerEl=inpEl;ifr=iframeObj;minDiff=0;maxDiff=0;if(diff){minDiff=diff;}if(diff2){maxDiff=diff2;}startDateObj=endDateObj=maxDate=maxDateObj=false;jahr=clientDate.getYear();if(jahr<1900){jahr+=1900;}monat=clientDate.getMonth();tag=clientDate.getDate();calDate=clientDate;if(ankerEl.startEl){if(!ankerEl.startEl.dateObj){updateCal(ankerEl.startEl);}if(ankerEl.startEl.dateObj){startDate=ankerEl.startEl.dateObj;}if(minDiff!=0){startDate=minDiffDate(ankerEl.startEl.dateObj,minDiff);}if(maxDiff!=0){maxDate=minDiffDate(ankerEl.startEl.dateObj,maxDiff);
}}if(startDate!=null&&typeof startDate=="object"){startDateObj=startDate;startDateD=startDate.getDate();startDateM=startDate.getMonth();startDateY=startDate.getYear();if(startDateY<1900){startDateY+=1900;}}if(endDate!=null&&typeof endDate=="object"){endDateObj=endDate;endDateD=endDate.getDate();endDateM=endDate.getMonth();endDateY=endDate.getYear();if(endDateY<1900){endDateY+=1900;}}if(maxDate!=null&&typeof maxDate=="object"){maxDateObj=maxDate;maxDateD=maxDate.getDate();maxDateM=maxDate.getMonth();maxDateY=maxDate.getYear();if(maxDateY<1900){maxDateY+=1900;}}if(!ankerEl.dateObj){updateCal(ankerEl);}if(ankerEl.dateObj){calDate=ankerEl.dateObj;}buildCal(calDate);}function buildCalEvent(calDate){return function(e){e.preventDefault();buildCal(calDate);};}function buildCal(calDate){if(typeof cal!="undefined"){cleanUpCal();
}clearTimeout(quitTimeout);if(calDate){cal=new calendar(calDate);}}function cleanUpCal(){for(var i=calTbody.rows.length-1;i>0;i--){calTbody.removeChild(calTbody.rows[i]);}calHeadSpans=$("calHead").getElementsByTagName("span");for(i=0;i<3;i++){calHeadSpans[i].innerHTML="";}closeCal();}function closeCal(){if(contDiv){contDiv.style.top="-90000px";calHasFocus=false;if(callIframeShim){callIframeShim.style.top="-90000px";}}}function showSMELandingPage(){$LAB.wait(function(){$("isMyhrs").addClass("jsHover");setTimeout(function(){$("isMyhrs").removeClass("jsHover");},3000);});}function redirectToMyHrsArea(){window.location=""+document.getElement("#isMyhrs > a").href;}function calendar(curDate){this.curYear=curDate.getYear();if(this.curYear<1900){this.curYear+=1900;}this.curMonth=curDate.getMonth();
this.curDay=curDate.getDate();this.curWoTag=curDate.getDay();this.mHeader=$("monthHeader");this.mHeader.innerHTML=monthNames[this.curMonth]+" "+this.curYear;selYear=selMonth=selDay=false;if(typeof ankerEl.dateObj=="object"){calDate=ankerEl.dateObj;selDay=calDate.getDate();selMonth=calDate.getMonth();selYear=calDate.getYear();if(selYear<1900){selYear+=1900;}}zeit1=new Date(this.curYear,this.curMonth,1);start=zeit1.getDay();if(start>0){start--;}else{start=6;}stop=31;if(this.curMonth==3||this.curMonth==5||this.curMonth==8||this.curMonth==10){stop--;}if(this.curMonth==1){stop=stop-3;if(this.curYear%4==0){stop++;}if(this.curYear%100==0){stop--;}if(this.curYear%400==0){stop++;}}calPrevYear=this.curYear;calPrevMonth=this.curMonth-1;if(calPrevMonth<0){calPrevMonth=11;calPrevYear--;}prevStop=31;if(calPrevMonth==3||calPrevMonth==5||calPrevMonth==8||calPrevMonth==10){prevStop--;
}if(calPrevMonth==1){prevStop=prevStop-3;if(calPrevYear%4==0){prevStop++;}if(calPrevYear%100==0){prevStop--;}if(calPrevYear%400==0){prevStop++;}}nextRefSpan=$("nextM");prevRefSpan=$("prevM");nextMonth=this.curMonth+1;prevMonth=this.curMonth-1;nextYear=prevYear=this.curYear;nextRefSpan.addClass("nextM");prevRefSpan.addClass("prevM");if(nextMonth>11){nextYear++;nextMonth=0;}if(prevMonth<0){prevYear--;prevMonth=11;}if(!endDateObj||(endDateY>nextYear)||(endDateY==nextYear&&nextMonth<=endDateM)){nextRef=document.createElement("a");nextRef.href="#";nextRef.addClass("nextM");nextRef.onclick=buildCalEvent(new Date(nextYear,nextMonth,1));nextIcon=document.createElement("span");nextIcon.innerHTML="&nbsp;";nextRef.appendChild(nextIcon);$("nextM").appendChild(nextRef);}if(!startDateObj||(startDateY<prevYear)||(startDateY==prevYear&&prevMonth>=startDateM)){prevRef=document.createElement("a");
prevRef.href="#";prevRef.addClass("prevM");prevRef.onclick=buildCalEvent(new Date(+prevYear,prevMonth,1));prevIcon=document.createElement("span");prevIcon.innerHTML="&nbsp;";prevRef.appendChild(prevIcon);$("prevM").appendChild(prevRef);}dayCont=1;dayDisLast=1;startKalwo=kalenderwoche(zeit1);this.buildRow=function(startKalwo,tagIndex,rowIndex){row=document.createElement("TR");row.className="daysRow";if(zeigeKw){buildCell(row,startKalwo,"weekNumber");}for(var j=0;j<7;j++){if((rowIndex==0&&j<tagIndex)){dayContPrev=prevStop-tagIndex+j+1;ref=null;var nextMonthClass="";if(((prevMonth>=monat||prevYear>jahr)&&(ankerEl.id.match(/start_/))||(ankerEl.id.match(/end_/)&&new Date(prevYear,prevMonth,dayContPrev)>$("start_stayPeriod").dateObj))){ref="javascript:sendDate(";ref+prevYear+",";ref+=prevMonth+",";
ref+=dayContPrev;ref+=", ankerEl)";nextMonthClass=" nextMonth";}if(j==5){buildCell(row,dayContPrev,"weekendDis"+nextMonthClass,ref);}else{if(j==6){buildCell(row,dayCont,"weekendDis sunday"+nextMonthClass,ref);}else{buildCell(row,dayContPrev,"workDayDis"+nextMonthClass,ref);}}}else{if((startDateObj&&(dayCont<=stop))&&startDateObj>new Date(this.curYear,this.curMonth,dayCont)){if(jahr==this.curYear&&monat==this.curMonth&&tag==dayCont){buildCell(row,dayCont,"currentDayDis",null);}else{if(j==5){buildCell(row,dayCont,"weekendDis",null);}else{if(j==6){buildCell(row,dayCont,"weekendDis sunday",null);}else{buildCell(row,dayCont,"workDayDis",null);}}}dayCont++;}else{if((endDateObj&&(dayCont<=stop))&&endDateObj<new Date(this.curYear,this.curMonth,dayCont)){if(jahr==this.curYear&&monat==this.curMonth&&tag==dayCont){buildCell(row,dayCont,"currentDayDis",null,cellId);
}else{if(j==5){buildCell(row,dayCont,"weekendDis",null);}else{if(j==6){buildCell(row,dayCont,"weekendDis sunday",null);}else{buildCell(row,dayCont,"workDayDis",null);}}}dayCont++;}else{if((maxDateObj&&(dayCont<=stop))&&maxDateObj<new Date(this.curYear,this.curMonth,dayCont)){if(jahr==this.curYear&&monat==this.curMonth&&tag==dayCont){buildCell(row,dayCont,"currentDayDis",null,cellId);}else{if(selYear==this.curYear&&selMonth==this.curMonth&&selDay==dayCont){buildCell(row,dayCont,"selectedDayDis",null);}else{if(j==5){buildCell(row,dayCont,"weekendDis",null);}else{if(j==6){buildCell(row,dayCont,"weekendDis sunday",null);}else{buildCell(row,dayCont,"workDayDis",null);}}}}dayCont++;}else{if(dayCont<=stop){if(jahr==this.curYear&&monat==this.curMonth&&tag==dayCont){css="currentDay";}else{if(j==5){css="weekend";
}else{if(j==6){css="weekend sunday";}else{css="workDay";}}}if(selYear==this.curYear&&selMonth==this.curMonth&&selDay==dayCont){css+=" selectedDay";}refDay=dayCont;refMonth=this.curMonth;refYear=this.curYear;ref="javascript:sendDate(";ref+=refYear+",";ref+=refMonth+",";ref+=refDay;ref+=", ankerEl)";cellId="td_"+this.curYear+"_"+this.curMonth+"_"+dayCont;buildCell(row,dayCont,css,ref,cellId);dayCont++;}else{ref="javascript:sendDate(";ref+=nextYear+",";ref+=nextMonth+",";ref+=dayDisLast;ref+=", ankerEl)";cellId="td_"+nextYear+"_"+nextMonth+"_"+dayDisLast;if(j==6){buildCell(row,dayDisLast,"weekendDis sunday nextMonth",ref);}else{if(j==6){css="weekend sunday";}else{buildCell(row,dayDisLast,"workDayDis nextMonth",ref);}}dayDisLast++;}}}}}}};var calTbodyFragment=document.createDocumentFragment();calTbodyFragment.appendChild(buildHeadRow());
for(var i=0;i<6;i++){this.buildRow(startKalwo,start,i);calTbodyFragment.appendChild(row);startKalwo++;if(startKalwo>52){startKalwo=1;}}calTbody.appendChild(calTbodyFragment);sizeandpositionIframe();}function buildHeadRow(){row=document.createElement("TR");row.setAttribute("id","headRow");if(zeigeKw){buildCell(row,kwHead,null,null);}for(i=0;i<7;i++){buildCell(row,dayNames[i],null,null);}return row;}function buildCell(rowEl,cont,css,href){cell=document.createElement("TD");if(href){calRef=document.createElement("A");calRef.href=href;calRef.innerHTML=cont;cell.appendChild(calRef);}else{var c=document.createTextNode(cont);cell.appendChild(c);}if(css){cell.className=css;}rowEl.appendChild(cell);}function kalenderwoche(datum){var jh=datum.getYear();if(jh<2000){jh+=1900;}jh++;var kalwo=kaldiff(datum,jh);
while(kalwo<1){jh--;kalwo=kaldiff(datum,jh);}return kalwo;}function kaldiff(datum,jahr){var d4j=new Date(jahr,0,4);var wt4j=(d4j.getDay()+6)%7;return Math.floor(1.05+(datum.getTime()-d4j.getTime())/604800000+wt4j/7);}function sizeandpositionIframe(){calTabelle=$("calTab");var posObj=$(ankerEl).getPosition(),pos={top:posObj.y+ankerEl.offsetHeight,left:posObj.x};calTabelle.setStyles(pos);if(Browser.ie6){if(!callIframeShim){callIframeShim=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''"}).inject(calTabelle,"after").setStyles({height:calTabelle.offsetHeight,width:calTabelle.offsetWidth,position:"absolute","z-index":29999});}callIframeShim.setStyles(pos);}}function sendDate(y,m,d,el){el.dateObj=new Date(y,m,d);el.value=parseDate(el.dateObj);setDependents(el);cleanUpCal();
if(el.endEl){el.endEl.focus();}}function minDiffDate(dateObj,dif){if(typeof dateObj=="object"&&dif!=null){var t=dateObj.getTime()+dif*1000*60*60*24;newDObj=new Date();newDObj.setTime(t);return newDObj;}}function getFormatCode(key,dateObj){switch(key){case"dd":var d=dateObj.getDate();return(d<10)?"0"+d:d;case"d":var d=dateObj.getDate();return d;case"MM":var m=dateObj.getMonth()+1;return(m<10)?"0"+m:m;case"M":var m=dateObj.getMonth()+1;return m;case"yyyy":var y=dateObj.getYear();return(y<1900)?y+1900:y;case"yy":var y=dateObj.getYear();y=y.toString();return y.substring(y.length-2,y.length);case"y":var y=dateObj.getYear();y=y.toString();return y.substring(y.length-2,y.length);default:break;}}function parseDate(dateObj){var dateString="";var theInputs=$$(".dateInput");for(var i=0;i<3;++i){var key=dateArr[i];
dateString+=getFormatCode(key,dateObj);if(i<2){dateString+=dateSep;}}if(dateArr.length==4){dateString+=dateSep;}return dateString;}function initDateContainer(){dateArr=dateStr.split(dateSep);checkDateStr();calTbody=$("calBody");document.body.onclick=function(){calHasFocus=true;if(quitTimeout){clearTimeout(quitTimeout);}quitEnabled=true;};initDateObjects();if(window.calCloseMsg){$("closeLink").innerHTML="<span>"+calCloseMsg+"</span>";}}function updateCal(el){valArr=el.value.split(dateSep);if(valArr.length!=3){if(dateSepFallBack){valArr=el.value.split(dateSepFallBack);}}if(valArr.length!=3){return;}if(!dateArrIndex){dateArrIndex=[];for(var i=0;i<dateArr.length;i++){dateArrIndex[dateArr[i].charAt(0)]=i;}}var d=valArr[parseInt(dateArrIndex["d"])];var m=valArr[parseInt(dateArrIndex["M"])];var y=valArr[parseInt(dateArrIndex["y"])];
if((d.length>2||d.length<1)||(m.length>2||m.length<1)||(y.length<2||y.length==3||y.length>4)){return;}m=parseInt(m,10)-1;d=parseInt(d,10);if(m<0||m>11||d<0||d>new Date(y,m+1,0).getDate()){return;}if(!checkNumbers(y+m+d)){return;}if(y.length==2){if(y.charAt(0)=="0"){y=parseInt(y.charAt(1),10);}else{y=parseInt(y,10);}y+=2000;}else{y=parseInt(y,10);}if(y>2200){return;}var t=new Date(y,m,d);if(t.getYear()==NaN){return;}if(startDateObj){if(t<startDateObj){return;}}if(endDateObj){if(t>endDateObj){return;}}el.dateObj=t;}function updateBuildCal(el){updateCal(el);buildCal(el.dateObj);setDependents(el);}function setDependents(el,noAddCalFuntions){var isUpdate=(setDependents.caller==updateBuildCal);if(el.endEl&&!el.endEl.doNotSetDependent&&!isUpdate){if(!el.endEl.dateObj||minDiffDate(el.dateObj,minDiff).getTime()>el.endEl.dateObj.getTime()){try{newDateO=minDiffDate(el.dateObj,minDiff);
el.endEl.dateObj=newDateO;el.endEl.value=parseDate(newDateO);}catch(e){}}}if(isUpdate&&!el.isUpdated){el.isUpdated=true;el.addEvent("blur",setDependentsBlur);}function setDependentsBlur(){el.isUpdated=false;el.removeEvent("blur",setDependentsBlur);setDependents(el,noAddCalFuntions);}function setDateStr(){if(el.dateObj){el.value=parseDate(el.dateObj);}}}function checkNumbers(str){zahl="1234567890";for(var i=0;i<str.length;i++){var c=str.charAt(i);if(zahl.indexOf(c)==-1){return false;}}return true;}function getLeft(l){if(l.offsetParent){return(l.offsetLeft+getLeft(l.offsetParent));}else{return(l.offsetLeft);}}function getTop(l){if(l.offsetParent){return(l.offsetTop+getTop(l.offsetParent));}else{return(l.offsetTop);}}var ContextSensitiveHelpAjax=new Class({Extends:ContextSensitiveHelp,initialize:function(container,options){this.parent(container,options);
this.options.element.addEvent("click",function(event){event.stop();if(!this.options.element.hasClass("active")){this.requestContent();}}.bind(this));},requestContent:function(){var request=new Request({method:"get",onSuccess:function(response){this.options.element.store("tooltipText",'<div id="contextSensitiveHelp">'+response+"</div>");this.start(this.options.element);this.position(this.options.element);}.bind(this)}).send(this.options.element.href+"Ajax");}});var ContextSensitiveHelpForm=new Class({Extends:ContextSensitiveHelpAjax,requestContent:function(){var request=new Request.HTML({url:this.options.element.href+"&popup=true",method:"get",evalScripts:false,evalResponse:false,onSuccess:function(responseTree,responseElements,responseHTML,responseJavaScript){this.options.element.store("tooltipText",'<div id="contextSensitiveHelpForm">'+responseHTML+"</div>");
this.start(this.options.element);this.position(this.options.element);eval(responseJavaScript);this.handleSubmit();}.bind(this)}).get();},handleSubmit:function(){this.options.form=$("contextSensitiveHelpForm").getElement("form").addEvent("submit",function(event){event.stop();submitForm(this.formToJson(this.options.form),this.handleResponse.bind(this));}.bind(this));},formToJson:function(form){var json={};Array.from(form.elements).each(function(element){if(element.type!="submit"){json[element.name]=element.value;}});return json;},handleResponse:function(response){this.clearForm();if(response.errors){Object.each(response.errors,function(value,key){this.addError($((key=="captcha"?"":"reportCritical_")+key),value);},this);}else{if(response.success){var cont=new Element("div",{"class":"messages success"});
cont.innerHTML=response.success;cont.inject(this.options.form.getElement("dl"),"after");this.position(this.options.element);}}this.position(this.options.element);},addError:function(el,msg){var cont=new Element("span",{"class":"error"});cont.innerHTML=msg;cont.inject(el,"after");el.addClass("error");this.position(this.options.element);},clearForm:function(){this.options.form.getElements(".error").each(function(el){if(el.get("tag")=="span"){el.dispose();}else{el.removeClass("error");}});this.options.form.getElements(".success").each(function(el){el.dispose();});var captcha=this.options.form.getElement("#captcha");if(captcha){loadCaptcha();captcha.value="";}}});ContextSensitiveHelp.Bookmarks=new Class({Extends:ContextSensitiveHelp,start:function(element){this.parent(element);var tooltipDisplayContainer=this.toolTip.getElement("p.addTooltipInfo");
this.toolTip.getElements("li a").addEvent("mouseenter",function(){tooltipDisplayContainer.set("text",this.getProperty("alt"));});var altToolTip=new Tips(this.toolTip.getElements("li a"),{offset:{x:15,y:(typeof $LAB!="undefined"?15:-65)}});}});var HoverIE6=new Class({initialize:function(lis){lis.each(function(item){item.addEvent("mouseenter",function(){item.getElements("a")[1].getElement("img").setStyle("opacity",".001");item.getElements("a")[0].setStyle("text-decoration","underline");});item.addEvent("mouseleave",function(){item.getElements("a")[1].getElement("img").setStyle("opacity","1");item.getElements("a")[0].setStyle("text-decoration","none");});});}});var SizePopupIE8=new Class({initialize:function(){var myTimer;window.addEvent("resize",function(event){var myFunction=function(){location.href=location.href;
};if(myTimer){myTimer=clearTimeout(myTimer);}myTimer=myFunction.delay(50);});}});function cmsPopup(el,w,h){var url=el.href;var width="width="+w+"px";var height="height="+h+"px";var params=width+", "+height+",left=100,top=200, scrollbars=yes";var popWindow=window.open(url+"&hidePageElementsCss=hideQCMS&isPopup=true","Popup",params);popWindow.focus();}Tips.implement("options",{text:null});var ContextSensitiveLayer=new Class({Extends:ContextSensitiveHelp,initialize:function(elements,options){this.parent(elements,options);this.toolTip.getElement(".pike").dispose();},position:function(element,coords){this.toolTip.setStyles({top:"50%",left:"50%","margin-left":"-"+this.toolTip.getSize().x/2+"px","margin-top":-this.toolTip.getSize().y/2+window.getScroll().y+"px",visibility:"visible"});this.fireEvent("onPosition");
if(Browser.ie6){if(this.toolTip.getElements("span.close")[0]){this.toolTip.getElements("span.close")[0].toggleClass("ie6Redraw");}else{if(this.toolTip.getElements("a.close")[0]){this.toolTip.getElements("a.close")[0].toggleClass("ie6Redraw");}}}}});(function(){Browser.Device={name:"other"};if(Browser.Platform.ios){var device=navigator.userAgent.toLowerCase().match(/(ip(ad|od|hone))/)[0];Browser.Device[device]=true;Browser.Device.name=device;}if(this.devicePixelRatio==2){Browser.hasHighResolution=true;}Browser.isMobile=!["mac","linux","win"].contains(Browser.Platform.name);})();Browser.Features.Touch=(function(){try{document.createEvent("TouchEvent").initTouchEvent("touchstart");return true;}catch(exception){}var hasTouch=("ontouchstart" in window);if(hasTouch){return true;}return false;})();
Browser.Features.iOSTouch=(function(){var name="cantouch",html=document.html,hasTouch=false;var handler=function(){if(html.removeEventListener){html.removeEventListener(name,handler,true);hasTouch=true;}};try{html.addEventListener(name,handler,true);var event=document.createEvent("TouchEvent");event.initTouchEvent(name);html.dispatchEvent(event);return hasTouch;}catch(exception){}handler();return false;})();Browser.isMobileTouch=((Browser.Features.iOSTouch||Browser.Features.Touch)&&Browser.isMobile);Browser.isTouchDevice=(!!("ontouchstart" in window)||!!(("onmsgesturechange" in window)&&window.navigator.msMaxTouchPoints>0));var AndroidTouchWA=new Class({initialize:function(els){var i,len,element,dropdowns=$$("#nav li.sub"),finalDropdowns=[];dropdowns.each(function(item){finalDropdowns.push({"li":item,"isLogin":item.hasClass("login")});
});function menuTouch(event){var i,len,noclick=!(this.dataNoclick);for(i=0,len=finalDropdowns.length;i<len;++i){finalDropdowns[i].li.dataNoclick=false;}this.dataNoclick=noclick;this.focus();}function menuClick(event){if(this.dataNoclick){event.preventDefault();}}for(i=0,len=finalDropdowns.length;i<len;++i){if(finalDropdowns[i].isLogin){return;}element=finalDropdowns[i].li;element.dataNoclick=false;element.addEventListener("touchstart",menuTouch,false);element.addEventListener("click",menuClick,false);}}});var FixPositionFixForMobile=new Class({Implements:[Events,Options],options:{useRelativeParent:false},initialize:function(element,options){if(element){this.setOptions(options);this.element=element;this.elementHeight=this.element.getSize().y;this.windowObject=$(window).addEvents({"scroll":this.update.bind(this),"mapChange":this.update.bind(this)});
this.scrollY=this.windowObject.getScrollSize().y;this.posLeft=this.relParentTop=(this.options.useRelativeParent)?this.element.getParent().getCoordinates().top:0;this.setViewPort();window.addEvent("load",function(){setTimeout(function(){this.update();}.bind(this),1);}.bind(this));}},update:function(){var winY=this.windowObject.getScroll().y;var newPosY=winY+this.viewPortHeight-this.relParentTop-this.elementHeight;this.element.setStyles({bottom:"auto",position:"absolute",top:newPosY});},setViewPort:function(){this.viewPortHeight=this.windowObject.getSize().y;},setThreshold:function(){this.threshold=this.scrollY-this.footerHeight-this.viewPortHeight;}});var TrackingTracker=new Class({initialize:function(){this.beforeFirstCallToCityRegisterTab=true;this.initialStageId="";this.initialStageData={};
this.initialStageName="";this.initialCityRegisterHotelIds="";this.initialCityRegisterHotelInfos="";this.initialCityRegisterTabId="";this.initialCityregisterTabIndex="";},doNothing:function(){},readCookie:Cookie.read?Cookie.read:(Cookie.get?Cookie.get:this.doNothing),writeCookie:Cookie.write?Cookie.write:(Cookie.set?Cookie.set:this.doNothing),removeCookie:Cookie.dispose?Cookie.dispose:(Cookie.remove?Cookie.remove:this.doNothing),setupInitialStageTracking:function(id,data){this.initialStageId=id;this.initialStageData=data;},buildAndSendHomepageTrackingCall:function(){var stageId="THB"+this.initialStageId+"T";var trackingVars=JSON.decode(this.initialStageData);var prop18stage="";if(trackingVars&&trackingVars["prop18"]){prop18stage=trackingVars["prop18"];}s.products=";"+stageId+","+s.products;if(s.prop18){s.prop18=stageId+prop18stage+","+s.prop18.replace(/;T/g,"T");
}s.done=true;s_trackPage();},writeShortlivedCookie:function(key,value,seconds){var date=new Date();date.setTime(date.getTime()+(seconds*1000));var expires="; expires="+date.toGMTString();document.cookie=key+"="+encodeURIComponent(value)+expires+"; path=/";},trackFormExit:function(linkName){var formTrackingData=window.buildFormFieldInfoString(false);if(formTrackingData!=null&&formTrackingData!=""){var vars={"eVar17":formTrackingData,"linkTrackVars":"eVar17"};s_trackLink(linkName,true,vars,s.pageName);}},getSmeFormNameByPageName:function(pageName){var toReturn="UnknownForm";if(pageName==="SME:Registration Empty"){toReturn="BusinessRegisterQuick";}else{if(pageName==="SME:Registration Classic"){toReturn="BusinessRegisterClassic";}else{if(pageName==="MY:Register Business"){toReturn="BusinessRegisterInline";
}}}return toReturn;}});window.trackingTracker=new TrackingTracker();var Stage=new Class({Implements:Options,initialize:function(els,options){this.setOptions(options);var activeEl=this.options.activeIndex-1,activePic,initEl=this.options.activeIndex-1;this.els=els;this.initEl=initEl;this.activeEl=activeEl;this.activePic=$("jsStageBox").getElement("a");if(this.els&&this.els.length){this.els[this.options.activeIndex-1].addClass("active");}this.options.stageLinks.erase("");this.options.stagePics.erase("");this.alreadyDisplayedTabs=[];window.trackingTracker.setupInitialStageTracking(this.options.uniqueIds[this.options.activeIndex-1],this.options.changeTracking[this.options.activeIndex-1]);this.alreadyDisplayedTabs.push(this.options.changeTracking[this.options.activeIndex-1]);if(this.options.stagePics.length==1){this.setClickTrackingHandlers();
return;}var images=this.options.stagePics;this.images=images;var loadPics=function(){var loader=new Asset.images(this.images,{onProgress:function(counter,index){},onError:function(counter,index,source){},onComplete:function(){var picBox;this.options.stagePics.each(function(el,index){var outLink=this.options.stageLinks[index];outLink=outLink.replace("{1}","THB"+this.options.uniqueIds[index]+"T");outLink=outLink.replace("{2}",index+1);this.options.stageLinks[index]=outLink;this.els[index].getElement("a").href=outLink;if(index===this.activeEl){$("jsStageBox").getElements("a.stagePic")[this.activeEl].href=outLink;if($("jsCLaim").getElement("a.button")){$("jsCLaim").getElement("a.button").href=outLink;}return;}if($("jsText1")===null){textBox=new Element("em",{"class":"hide"}).inject($("jsCLaim"),"top");
innertextBox1=new Element("span",{"id":"jsText1"}).inject(textBox);this.textBox=textBox;}else{this.textBox=$("jsCLaim").getElement("em");}if($("jsText2")===null){var textBreakTEO=this.textBox.getChildren()[1];if(!textBreakTEO){textBreak=new Element("br").inject(this.textBox,"bottom");}innertextBox1=new Element("span",{"id":"jsText2","class":"hide"}).inject(this.textBox,"bottom");}if($("jsCLaim").getElement("a")===null){buttonEl=new Element("a",{"class":"button clearFix jsTrackLinkHPStage delay jsPopup","styles":{"display":"none"}}).inject($("jsCLaim"));this.buttonEl=buttonEl;}else{this.buttonEl=$("jsCLaim").getElement("a");}picBox=new Element("a",{"href":outLink,"rel":"nofollow","target":this.options.theTarget[index],"class":"stagePic jsNewPic jsTrackLinkHPStage delay hide","html":'<img height="440" width="1130" id="jsStagePic" alt="" src="'+this.images[index]+'">'});
if(index<this.activeEl){picBox.inject(this.activePic,"before");}else{picBox.inject($("jsStageBox"),"bottom");}},this);this.setMouseEvents();this.setClickTrackingHandlers();}.bind(this)});}.bind(this);loadPics(images);},setPlayer:function(){var player=function(){this.els.each(function(item,index){if(item.hasClass("active")){this.activeEl=index;}},this);if(this.activeEl+1==this.els.length){this.activeEl=-1;}this.changeEvent(this.els[this.activeEl+1],this.activeEl+1,1000,500);}.bind(this);var timer=player.periodical(5000);this.timer=timer;var searchFormEls=$("searchForm").getElements("input");var theSelects=$("searchForm").getElements("select");searchFormEls.append(theSelects);if($$("li.login")&&$$("li.login").length){searchFormEls.append($$("li.login")[0].getElements("input"));}searchFormEls.addEvent("click",function(){clearInterval(this.timer);
}.bind(this));},setMouseEvents:function(){var cX,cY,pX,pY;var track=function(ev){cX=ev.page.x;cY=ev.page.y;};var compare=function(ev,ob,i){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<10){ob.removeEvent("mousemove",track);ob.hoverIntent_s=1;if(this.timeout){clearTimeout(this.timeout);}this.timeout=setTimeout(function(){this.changeEvent(ob,i,750,400);}.bind(this),150);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob,i);},10);}}.bind(this);var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;};var handleHover=function(ev,ob,i){this.ob=ob;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(ev.type=="mouseenter"||ev.type=="mouseover"){clearInterval(this.timer);pX=ev.page.x;
pY=ev.page.y;ob.addEvent("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob,i);},10);}}else{ob.removeEvent("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},500);}}}.bind(this);var bSetter=function(){}.bind(this);this.bSetter=bSetter;this.els.each(function(item,index){try{document.createEvent("TouchEvent");item.addEvents({touchstart:function(ev){ev.preventDefault();this.changeEvent(item,index,250,400);clearInterval(this.timer);}.bind(this)},this);}catch(e){item.addEvents({mouseenter:function(ev){$("jsLoadPics").removeEvent("mouseleave",this.bSetter);handleHover(ev,item,index);}.bind(this),mouseleave:function(ev){handleHover(ev,item,index);$("jsLoadPics").addEvent("mouseleave",this.bSetter);}.bind(this)},this);
}},this);},setClickTrackingHandlers:function(){var classToCheck="jsTrackLinkHPStage";$$("."+classToCheck).each(function(item,index){item.addEvent("mousedown",function(event){var target=$(event.target);if(!(target.tagName==="EMBED")&&!(target.tagName==="OBJECT")){for(var i=0;i<4;i++){if(target&&target.hasClass(classToCheck)){var delay=true;if(target.hasClass("delay")){delay=target;}var linkIndex=(this.els.length)?-1:0;this.els.each(function(item,index){if(item==event.target||item.getElementsByTagName("a")[0]==event.target){linkIndex=index;}});if(linkIndex==-1){linkIndex=this.activeEl;}var uniqueTeaserId="THB"+this.options.uniqueIds[linkIndex]+"T";var varMap=JSON.decode(this.options.clickTracking[linkIndex]);varMap["eVar10"]=uniqueTeaserId;varMap["products"]=";"+varMap["eVar10"];varMap["adclick"]=uniqueTeaserId;
varMap["eVar9"]=uniqueTeaserId+varMap["eVar9"];varMap["prop9"]=varMap["eVar9"];var linkType="Unknown";if(target.hasClass("stagePic")){linkType="Picture";}else{if(target.hasClass("button")){linkType="CallToAction";}else{if(target.hasClass("jsTrackLinkHPStage")){linkType="Tab";}}}varMap["eVar18"]=uniqueTeaserId+varMap["eVar18"]+linkType;varMap["prop20"]=uniqueTeaserId+varMap["prop20"]+linkType;s_trackLink(varMap["linkname"]+":"+uniqueTeaserId,delay,varMap,s.pageName);if(window.wa&&window.wa.teaserClick){window.wa.teaserClick(this.els[this.activeEl],{celinfo:linkType,tel:linkType},true);}break;}if(target.get("tag")==="body"){break;}target=target.getParent();}}}.bind(this),this);},this);},setBack:function(){if(this.els[this.initEl].hasClass("active")){return;}var timeOut=function(){this.changeEvent(this.els[this.initEl],this.initEl,1000,500);
}.bind(this);var timer=timeOut.delay(6000);this.timer=timer;},changeEvent:function(ob,i,durOld,durNew){if(!ob||ob.hasClass("active")){return;}this.els.each(function(item,index){if(item.hasClass("active")){this.activeEl=index;item.removeClass("active");}},this);var newEl=$("jsStageBox").getElements(".stagePic")[i];var oldEl=$("jsStageBox").getElements(".stagePic")[this.activeEl];ob.addClass("active");var aniOldEl=new Fx.Morph(oldEl,{link:"cancel",duration:durOld},this);var aniNewEl=new Fx.Morph(newEl,{link:"cancel",duration:durNew,onStart:function(){this.activeEl=i;newEl.removeClass("hide").setStyles({"opacity":0,"z-index":1});$("jsCLaim").addClass("hide");this.textBox.addClass("hide");if(this.options.stageText1[i]!=""){this.textBox.removeClass("hide");$("jsText1").removeClass("hide").innerHTML=this.options.stageText1[i];
}else{this.textBox.addClass("hide");}if(this.options.stageText2[i]!=""){$("jsText2").innerHTML=this.options.stageText2[i];}else{$("jsText2").addClass("hide");}$("jsCLaim").getElement("a").setProperties({"href":this.options.stageLinks[i],"target":this.options.theTarget[i]}).setStyle("display",this.options.buttonText[i]===""?"none":"block").innerHTML=this.options.buttonText[i];}.bind(this),onComplete:function(){if(this.options.stageText2[i]!=""){$("jsText2").removeClass("hide");}$("jsCLaim").removeClass("hide").fade("in");oldEl.setStyles({"opacity":0,"z-index":0});}.bind(this)},this);aniNewEl.start({"opacity":[0,1],"visiblity":"visible"});aniOldEl.start({"opacity":[1,0],"visiblity":"hidden"});if(this.options.changeTracking!=null&&this.options.uniqueIds!=null){this.trackChange(this.options.changeTracking[i],this.options.uniqueIds[i]);
}},trackChange:function(trackingVars,uniqueTeaserId){if(!this.alreadyDisplayedTabs.contains(trackingVars)){var varMap=JSON.decode(trackingVars);uniqueTeaserId="THB"+uniqueTeaserId+"T";varMap["eVar10"]=uniqueTeaserId;varMap["products"]=";"+varMap["eVar10"];varMap["prop18"]=uniqueTeaserId+varMap["prop18"];var teaserList=$$("[data-tid="+uniqueTeaserId+"]");if(teaserList.length>0){window.wa.teaserView(teaserList[0]);}s_trackLinkWithoutLinkTrackProp(varMap["linkname"]+":THB"+uniqueTeaserId+"T",true,varMap,s.pageName);this.alreadyDisplayedTabs.push(trackingVars);}}});var SocialMediaLayer=new Class({Implements:Options,initialize:function(el,options){this.setOptions(options);if(Browser.isMobileTouch){el.getParent().addClass("mobileTouch");}el.inject($$("body")[0]);var init=true,elCoordinates={};if(!this.options.noPositionFixed&&window.getSize().x<=1032){window.addEvent("scroll",function(){var size=window.getSize(),scroll=window.getScroll();
if(init){elCoordinates=el.getCoordinates();init=false;}if(elCoordinates.top+elCoordinates.height+31>=size.y+scroll.y){if(el.getStyle("position")!=="absolute"){el.setStyles({"position":"absolute","top":"460px"});}}else{if(el.getStyle("position")!=="fixed"){el.setStyles({"position":"fixed","top":elCoordinates.top-scroll.y});}}});}el.setStyle("display","block");var lis=el.getElements("li");var div=el.getElements("div.smLayer");this.div=div,this.lis=lis;lis.each(function(item,index){if((Browser.ie6&&item.hasClass("google"))||(Browser.ie7&&item.hasClass("google"))){item.addClass("hide");}item.addEvent("mouseenter",function(){this.showLayer(item);}.bind(this));item.addEvent("mouseleave",function(){$$(".gc-bubbleDefault").addEvent("mouseenter",function(){clearTimeout(this.timer);}.bind(this));$$(".gc-bubbleDefault").addEvent("mouseleave",function(){this.hideLayer(item);
}.bind(this));this.hideLayer(item);}.bind(this));},this);},showLayer:function(el){if(this.options.isFB&&el.hasClass("facebook")){}if(this.options.isGoogle&&el.hasClass("google")){if(Browser.ie6||Browser.ie7){return;}window.___gcfg={lang:this.options.country};(function(){var po=document.createElement("script");po.type="text/javascript";po.async=true;po.src="https://apis.google.com/js/plusone.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(po,s);})();}if(this.options.isTwitter&&el.hasClass("twitter")){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");}this.div.addClass("hide");el.getElement("div").removeClass("hide");
if(Browser.ie8&&this.options.isFB&&el.hasClass("facebook")){var fbDiv=$$(".fb-like"),fbSpan=undefined;if(fbDiv&&fbDiv.length){fbSpan=fbDiv[0].getElement("span");}if(fbSpan){fbSpan.set("styles",{height:"21px"});}}},hideLayer:function(el){var fn=function(){el.getElement("div").addClass("hide");};var timer=fn.delay(1500);this.timer=timer;this.lis.addEvent("mouseenter",function(){clearTimeout(this.timer);}.bind(this));el.getElement("div").addEvent("mouseenter",function(){clearTimeout(this.timer);}.bind(this));},fixPosition:function(){}});var TeaserRegister=new Class({Implements:Options,options:{registerNavigationContainer:"",registerOffersContainer:"",linkExclusivePrice:"",activeTab:0,texts:{ratings:"Bewertungen"},cacheExpireMinutes:5,theURL:undefined,client:"next"},initialize:function(options){this.setOptions(options);
this.registerNavigationContainer=$(this.options.registerNavigationContainer);this.registerOffersContainer=$(this.options.registerOffersContainer);this.activeTab=this.options.activeTab;this.navigationTabs=[];this.allOffersHTML=[];if(window.teaserRegisterClient){this.options.client=window.teaserRegisterClient;}this.supportsSessionStorage=false;this.requestTravelSuite=new Request({method:"get",evalScripts:true,onSuccess:this.prepareOffers.bind(this)});if(this.registerNavigationContainer){var cities=this.registerNavigationContainer.getElements(".jsRegisterCity");}if(cities){this.buildNavigation(cities);this.cookieData=this.readCookie();if(this.cookieData){var active=false;for(var i=0,len=this.navigationTabs.length;i<len;i++){if(this.navigationTabs[i].cityNameParam===this.cookieData.offerCode){active=i;
break;}}if(!active){active=this.cookieData.offerPosition;}this.activeTab=active;}this.toggleTab();if(this.getCachedOffers()){this.showOffers();}else{this.loadOffers();}}},setCookie:function(currentTSCode,currentActiveTab){var domain=(document.domain.search(/[a-zA-Z]/)==-1)?document.domain:document.domain.substring(document.domain.indexOf(".")+1,document.domain.length),path="/",duration=14,secure=false,name="teaserRegisterStart_"+this.options.client,cookieString="offerCode="+currentTSCode+"; offerPosition="+currentActiveTab+"; ";Cookie.write(name,cookieString,{"domain":domain,"path":path,"secure":secure,"duration":duration});},readCookie:function(){var cookieData=false,cookieText=Cookie.read("teaserRegisterStart_"+this.options.client);if(cookieText&&cookieText.length){var tempSplit=cookieText.split("; ");
cookieData={};for(var i=0,len=tempSplit.length;i<len;i++){if(tempSplit[i]&&tempSplit[i].length){var tempCookieData=tempSplit[i].split("=");}if(tempCookieData){cookieData[tempCookieData[0]]=tempCookieData[1];}}}return cookieData;},buildNavigation:function(els){$("jsCityOffers").removeClass("hide");var allCities=els;var allMoreOffers=this.registerNavigationContainer.getElements(".jsRegisterMoreOffers");window.activeCityRegisterTabTrackingId=allCities[this.activeTab].id;var that=this;allCities.each(function(item,index){var currMoreOffers=allMoreOffers[index];item.addEvent("click",that.onCityClick.bind(that));that.navigationTabs.push({cityNameLink:"travelsuiteOffers.do?activity=retrieveRegisterOffers",cityNameParam:escape(item.getProperty("data-travelsuite")),moreOffersLink:currMoreOffers.href,tab:item,tabParent:item.getParent("li"),moreOffers:currMoreOffers});
});},isOlderThanMinutes:function(timestamp,minutes){var nowInMinutes=this.makeCacheMinutes(+new Date);var diff=nowInMinutes-this.makeCacheMinutes(timestamp);if(diff<minutes){return{valid:true,time:diff};}return false;},makeCacheMinutes:function(milliseconds){return Math.round(milliseconds/60000);},showOffers:function(){this.registerOffersContainer.innerHTML=this.allOffersHTML[this.activeTab].htmlTeasers;this.registerOffersContainer.removeClass("hide");if(Browser.ie6){$("footerMenuWrap").setStyle("bottom","0");}},prepareOffers:function(textData){var time=+new Date;this.allOffersHTML[this.activeTab]={htmlTeasers:textData,timestamp:time};this.showOffers();if(window.wtAjaxCallback&&typeof wtAjaxCallback=="function"){wtAjaxCallback();}},getCachedOffers:function(){var browserCache=this.allOffersHTML[this.activeTab],now=this.makeCacheMinutes(+new Date),browserValid=false,sessionValid=false,currentCache=false;
if(browserCache){var bv=this.isOlderThanMinutes(browserCache.timestamp,this.options.cacheExpireMinutes);browserValid=bv?bv.time:false;}if(browserValid!==false){currentCache=browserCache.htmlTeasers;}return currentCache;},loadOffers:function(){this.requestTravelSuite.send({url:this.options.theURL+this.navigationTabs[this.activeTab].cityNameParam+"&tabIndex="+(this.activeTab+1)});},onMoreOffersClick:function(event){event.preventDefault();},onCityClick:function(event){event.preventDefault();var allCities=this.registerNavigationContainer.getElements("a.jsRegisterCity");this.activeTab=allCities.indexOf(event.target);window.activeCityRegisterTabTrackingId=allCities[this.activeTab].id;this.toggleTab();if(this.getCachedOffers()){this.showOffers();}else{this.loadOffers();}this.setCookie(this.navigationTabs[this.activeTab].cityNameParam,this.activeTab);
},toggleTab:function(){for(var i=0,len=this.navigationTabs.length;i<len;i++){if(i!==this.activeTab){this.navigationTabs[i].tab.removeClass("active");this.navigationTabs[i].tabParent.removeClass("active");this.navigationTabs[i].moreOffers.addClass("hide");}else{this.navigationTabs[i].tab.addClass("active");this.navigationTabs[i].tabParent.addClass("active");this.navigationTabs[i].moreOffers.removeClass("hide");}}}});var FooterBanner=new Class({initialize:function(el){if(el){var closer=el.getElements("a.close");closer.addEvent("click",function(){SettingAttributeManager.setSessionAttribute("disableFooterBanner",true,this.handleResponse.bind(this));el.setStyle("display","none");}.bind(this));el.setStyle("display","block");}},handleResponse:function(response){}});var LightBox=new Class({Implements:[Events,Options],options:{verticalPosition:180,posMin:25,closeText:"",beforOpen:function(){}.bind(this),beforeClose:function(){},close:function(){}.bind(this),afterCreation:function(){}.bind(this),openInitial:true,dynamicVerticalPosition:false,dynamicScrollFixedPosition:false},initialize:function(options){this.setOptions(options);
this.isOpen=false;if(this.options.lightBoxId==="emailSuccessIDdffd"){this.openLightBox(this.options.lightBoxEl);}else{if(this.options.openEvent&&this.options.opener){this.options.opener.addEvent(this.options.openEvent,this.openLightBox.bind(this,this.options.lightBoxEl));this.options.opener.addEvent(this.options.openEvent,function(event){event.preventDefault();});}else{if(this.options.openInitial&&this.options.lightBoxEl){this.openLightBox(this.options.lightBoxEl);}}}},prefillFieldsFromParams:function(){console.log("original call back...");},getContent:function(url,event){if(typeOf(url)==="element"){if(typeOf(event)!=="undefined"&&typeOf(event)!=="null"){var form=url;var test=new Request.HTML({url:form.action,evalScripts:true,evalResponse:false,update:this.content,onComplete:function(data){this.toggleLoadingAnimation();
setTimeout(function(){this.position();}.bind(this),100);}.bind(this)}).post(form);this.toggleLoadingAnimation();}else{var content=this.options.clone?url.getElement(".lb_content").clone():this.content.getElement(".lb_content")?this.content.getElement(".lb_content"):url.getElement(".lb_content");this.content.adopt(content);}}else{if(typeOf(url)==="string"&&url.length){this.content.set("load",{onSuccess:function(){this.fireEvent("lightboxContentLoaded",this.content);setTimeout(function(){this.position();this.options.prefillFieldsFromParams();}.bind(this),100);}.bind(this)});this.content.load(url);this.wrap.setStyle("display","block");this.toggleLoadingAnimation();}}},openLightBox:function(url){var wrap=(this.wrap||this.createLightBox());this.isOpen=true;this.getContent(url);this.content.getElements(".closeLightBox").addEvent("click",this.closeLightBox.bind(this));
this.wrap.removeClass("hide");if(this.options.noEmpty){if(this.wrap.getStyle("top")=="-2000px"){this.position();}else{this.wrap.setStyle("display","block");}}else{this.position();}var beforeOpen=this.options.beforOpen.bind(this);beforeOpen();this.showVeil();},checkIfShowSMELandingPage:function(event){if(this.loginObject){if(isShowSMELandingPageRedirect!==undefined&&isShowSMELandingPageRedirect===true){redirectToMyHrsArea();}else{if(isShowSMELandingPage!==undefined&&isShowSMELandingPage===true){}}}},closeLightBox:function(event){var beforeClose=this.options.beforeClose.bind(this);beforeClose();document.body.removeClass("hasDetailsLayer");if(event){event.preventDefault();}this.wrap.addClass("hide");this.wrap.setStyles({"display":"none"});if(this.iframe){this.wrap.setStyles({left:0,top:0});}if(!this.options.noEmpty){this.content.empty();
}this.hideVeil();var close=this.options.close.bind(this);close();this.isOpen=false;},setVeilSize:function(){if(this.isOpen){var size=$(window).getScrollSize();this.veil.setStyles({"height":size.y,"display":"block"});}},position:function(){var elSize=this.wrap.getSize(),windowSize=$(window).getSize(),windowScroll=$(window).getScroll(),x=(windowSize.x-windowScroll.x)/2-elSize.x/2,y=this.options.verticalPosition;if(this.options.dynamicScrollFixedPosition&&elSize.y<windowSize.y){this.wrap.setStyles({"position":"fixed","top":"50%","margin-top":elSize.y/-2,"left":"50%","margin-left":elSize.x/-2});}else{if(this.options.dynamicVerticalPosition){y=($(window).getScroll().y)+windowSize.y/2-elSize.y/2;if(y<0){y=this.options.verticalPosition;}}if(x<this.options.posMin){x=this.options.posMin;}if(y<this.options.posMin){x=this.options.posMin;
}this.wrap.setStyles({left:x,top:y});if(this.options.dynamicScrollFixedPosition){this.wrap.setStyles({"position":"absolute","margin-left":"","margin-top":""});}if(this.iframe){this.iframe.setStyles({width:elSize.x+4,height:elSize.y+4});}}if(Browser.ie7){this.wrap.toggleClass("ie7fix");}},showVeil:function(){this.setVeilSize();},hideVeil:function(){this.veil.setStyle("display","none");if(this.innerVeil){this.innerVeil.setStyle("display","none");}},createLightBox:function(){this.wrap=new Element("div",{"class":"lightbox","id":this.options.lightBoxId||"lightbox"});this.close=new Element("a",{"class":"close jsTrackLink link","href":'javascript: ""',"id":"lightbox_close"}).set("text",this.options.closeText).addEvent("click",this.closeLightBox.bind(this)).inject(this.wrap,"inside");this.content=new Element("div",{"class":"lightboxContent"}).inject(this.wrap,"inside");
this.content.set("load",{evalScripts:true,evalResponse:false,onSuccess:function(data){this.toggleLoadingAnimation();this.fireEvent("contentLoaded");}.bind(this)});this.veil=new Element("div",{"class":"lightboxVeil","id":(this.options.lightBoxId||"lightbox")+"_veil"}).addEvent("click",function(){this.closeLightBox();}.bind(this));if(Browser.ie6){this.iframe=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''",styles:{"filter":"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)","position":"absolute","top":0,"left":0,"z-index":9000}});this.iframe.inject(this.wrap,"inside");}$(document.body).adopt(this.wrap,this.veil);var afterCreation=this.options.afterCreation.bind(this);afterCreation();},toggleLoadingAnimation:function(){if(!this.loadingAnimation){this.loadingAnimation=new Element("div",{id:"loadingAnimation","class":"hide"});
this.loadingAnimation.inject(this.wrap);}this.loadingAnimation.toggleClass("hide");},trackSmeLayerAfterBackgroundReady:function(pageTrackingJsonList,count){if(pageTrackingJsonList){count=count?count:0;if(window.backgroundPageTrackingFinished){if(!window.mainPageNameForTracking){window.mainPageNameForTracking=window.s.pageName;}if(window.validationErrorsPresent){this.addEventToSitecatalystTrackingAssignmentList(pageTrackingJsonList,"event76");pageTrackingJsonList.push("s.eVar17='"+window.buildFormFieldInfoString(true)+"'");pageTrackingJsonList.push("s.eVar14='"+trackingTracker.getSmeFormNameByPageName(s.pageName)+"'");}else{if(window.previousLayerFormFieldTrackingInfo){this.addEventToSitecatalystTrackingAssignmentList(pageTrackingJsonList,"event75");pageTrackingJsonList.push("s.eVar17='"+window.previousLayerFormFieldTrackingInfo["fieldIds"]+"'");
pageTrackingJsonList.push("s.eVar14='"+trackingTracker.getSmeFormNameByPageName(window.previousLayerFormFieldTrackingInfo["pageName"])+"'");window.previousLayerFormFieldTrackingInfo=null;}}s_trackPage(pageTrackingJsonList,true);}else{if(count<20){count++;setTimeout(function(){this.trackSmeLayerAfterBackgroundReady(pageTrackingJsonList,count);}.bind(this),1000);}}}},addEventToSitecatalystTrackingAssignmentList:function(assignmentList,eventName){var eventsEmpty=true;for(var i=0;i<assignmentList.length;i++){var item=assignmentList[i];if(item.indexOf("s.events")==0){var lastChar=item.substr(item.length-1,1);var secondToLastChar=item.substr(item.length-2,1);var quotationChar='"';if(lastChar==="'"||secondToLastChar==="'"){quotationChar="'";}var charCountToCutOff=1;if(lastChar===";"&&secondToLastChar==='"'||secondToLastChar==="'"){charCountToCutOff=2;
}assignmentList[i]=item.substr(0,item.length-charCountToCutOff)+","+eventName+quotationChar;eventsEmpty=false;}}if(eventsEmpty){assignmentList.push("s.events='"+eventName+"'");}},changeMetaDataForSmeLayer:function(metaDataObject){if(metaDataObject){if(metaDataObject&&window.md){if(!window.mainMetaDataObject){window.mainMetaDataObject=window.md;}window.md=metaDataObject;}}}});var deleteTextInputValueIcon=new Class({options:{clearDependends:false},Implements:[Events,Options],initialize:function(input,options){this.setOptions(options);this.input=input;this.wrapper=new Element("span.hrs_input_wrap").wraps(this.input);this.deleteIcon=new Element("span.deleteValueIcon").inject(this.input,"before");this.input.addEvents({"blur":this.toggle.bind(this),"keyup":this.toggle.bind(this),"click":this.toggle.bind(this)});
this.deleteIcon.addEvents({"touchstart":this.mousedown.bind(this),"mousedown":this.mousedown.bind(this)});if(window.navigator.msMaxTouchPoints>0){this.deleteIcon.addEvents({"MSPointerDown":this.mousedown.bind(this),"mousedown":this.mousedown.bind(this)});}if(this.options.clearDependends){this.clearDependends=Array.from(this.options.clearDependends);}this.toggle();},toggle:function(){this.deleteIcon.setStyle("display",this.input.value===""?"none":"");},mousedown:function(event){event.stop();this.input.value="";if(this.clearDependends&&this.clearDependends.length){Array.each(this.clearDependends,function(input){input.value="";});}}});var indexOf=function(needle){if(typeof Array.prototype.indexOf==="function"){indexOf=Array.prototype.indexOf;}else{indexOf=function(needle){var i=-1,index=-1;for(i=0;
i<this.length;i++){if(this[i]===needle){index=i;break;}}return index;};}return indexOf.call(this,needle);};var numberDropdownGrid={initialize:function(){this.create();this.attachEvents();},attachEvents:function(){var roomSelector=$("roomSelectionOptions").getElements("#singleRooms, #doubleRooms");roomSelector.addEvent("mousedown",function(){numberDropdownGrid.show(this);});roomSelector.addEvent("focus",function(event){numberDropdownGrid.hide();$(event.target.id).getSiblings("div.numberDropdownGrid").addClass("show");});$("roomSelector").addEvent("focus",function(event){numberDropdownGrid.hide();});$("adults").addEvent("focus",function(event){numberDropdownGrid.hide();});roomSelector.addEvent("keydown",function(event){if(event.code===27){numberDropdownGrid.hide();}});document.addEvent("click",function(event){var event=event.target?event.target:event.srcElement,whenDoNotDisplay=event.nodeName==="BODY"||event.id==="adults"||event.id==="children"||event.id=="roomSelector"||event.id=="rating"||event.id=="layout02";
if(event.nodeName==="SPAN"&&event.parentNode.className==="numberDropdownGrid show"){event.parentNode.getSiblings("input.text")[0].value=event.innerHTML;setTimeout(function(){$$(".numberDropdownGrid").removeClass("show");},100);numberDropdownGrid.updateAdults();}if(whenDoNotDisplay){numberDropdownGrid.hide();}});},create:function(){if(!$$(".numberDropdownGrid").length){numberDropdownGrid.generate();}else{numberDropdownGrid.hide();}},generate:function(){var singleDialArray=document.createElement("div"),dialArrays=[],doubleDialArray={};singleDialArray.innerHTML="<span>1</span><span>2</span><span>3</span><br><span>4</span><span>5</span><span>6</span><br><span>7</span><span>8</span><span>9</span>";doubleDialArray=cloneNode(singleDialArray);dialArrays.push(singleDialArray,doubleDialArray);dialArrays.each(function(item){item.className+="numberDropdownGrid";
});$("roomSelectionOptions").addClass("dialArraysActive");$$('label[for="singleRooms"]')[0].appendChild(singleDialArray);$$('label[for="doubleRooms"]')[0].appendChild(doubleDialArray);function cloneNode(node){var clone=node.nodeType==3?document.createTextNode(node.nodeValue):node.cloneNode(false);var child=node.firstChild;while(child){clone.appendChild(cloneNode(child));child=child.nextSibling;}return clone;}},show:function(chosedEl){var arrToDisplay=chosedEl.getSiblings("div.numberDropdownGrid"),roomInputs=$$("#singleRooms, #doubleRooms");roomInputs.forEach(function(item){var offsetTop=item.offsetTop;if(offsetTop>19){item.getNext(".numberDropdownGrid").setStyle("top","63px");}});if(arrToDisplay.length&&arrToDisplay[0].className!="show"){$$(".numberDropdownGrid").removeClass("show");arrToDisplay[0].addClass("show");
}},hide:function(){$$(".numberDropdownGrid").removeClass("show");},updateAdults:function(){$("adults").value=parseInt($("singleRooms").value)+(parseInt($("doubleRooms").value)*2);}};var overwritePersonalData={init:function(){var firstName=document.getElementById("orderer.firstname"),lastName=document.getElementById("orderer.lastname"),email=document.getElementById("orderer.email"),countryCode=document.getElementById("orderer.phone.countryCode"),phoneNumber=document.getElementById("orderer.phone.number"),firstNameFromStorage=sessionStorage.getItem("firstName"),lastNameFromStorage=sessionStorage.getItem("lastName"),emailFromStorage=sessionStorage.getItem("email"),countryCodeFromStorage=sessionStorage.getItem("countryCode"),phoneNumberFromStorage=sessionStorage.getItem("phoneNumber"),firstNameTopBonus=document.getElementById("topBonus_firstname"),lastNameTopBonus=document.getElementById("topBonus_lastname");
if(firstNameFromStorage!==null){firstName.value=firstNameFromStorage;if(s.prop26==="de"){if(firstNameTopBonus&&firstNameTopBonus.value===""){firstNameTopBonus.value=firstNameFromStorage;}}sessionStorage.removeItem("firstName");}if(lastNameFromStorage!==null){lastName.value=lastNameFromStorage;if(s.prop26==="de"){if(lastNameTopBonus&&lastNameTopBonus.value===""){lastNameTopBonus.value=lastNameFromStorage;}}sessionStorage.removeItem("lastName");}if(emailFromStorage!==null){email.value=emailFromStorage;sessionStorage.removeItem("email");}if(countryCodeFromStorage!==null){countryCode.value=countryCodeFromStorage;sessionStorage.removeItem("countryCode");}if(phoneNumberFromStorage!==null){phoneNumber.value=phoneNumberFromStorage;sessionStorage.removeItem("phoneNumber");}}};var registrationOverlay={init:function(){$$("#registerBox .login").addEvent("click",function(){if(isNewRegistrationEnabled){window.frameRegistration.open("BStep1:PersonalData-Layover","login");
}else{window.registerForm.showAuthForm("login",undefined,undefined,"PersonalData-Layover");}});}};var handlingBonusProgramSection={init:function(){this.changeActiveMenuItem();this.scrollingToProperSection();},scrollingToProperSection:function(){if(location.hash==="#bonusProgram"){var scroll=new Fx.Scroll(window,{wait:false,duration:1000,transition:Fx.Transitions.Quad.easeInOut});scroll.toElement(document.querySelector(".loyaltyContainer"));}},changeActiveMenuItem:function(){var arrowHistory=document.querySelector('a[name="dashboard.bookinghistory.button"] span.hrs_menu_marker'),arrowUserDetails=document.querySelector('a[name="dashboard.userdata.button"] span.hrs_menu_marker'),menuItemHistory=document.querySelector('a[name="dashboard.bookinghistory.button"]'),menuUserDetails=document.querySelector('a[name="dashboard.userdata.button"]'),arrow=document.createElement("span"),activePage=s.pageName.trim().toLowerCase();
arrow.addClass("hrs_sprite hrs_menu_marker");if(activePage==="my:booking history"){if(arrowHistory!==null){menuItemHistory.addClass("selected");}else{menuItemHistory.appendChild(arrow);}if(arrowUserDetails!==null){arrowUserDetails.parentNode.removeChild(arrowUserDetails);menuUserDetails.removeClass("selected");}}else{if(activePage==="my:access data"){menuUserDetails.addClass("selected").appendChild(arrow);if(arrowHistory!==null){arrowHistory.parentNode.removeChild(arrowHistory);menuItemHistory.removeClass("selected");}}}}};var popUnderLeasureSearch={indexLocationOnTopLocationList:-1,topLocationListIds:["%80958","%101292","%81316","%87732","%54572","%142327","%120754","%85863","%101222","%37866","%21936","%81485","%97668","%60448","%100940","%82122","%144287","%55133","%23293","%100888","%54703","%54970","%93252","%55684","%96818","%103411","%85579","%109433","%63626","%1383360","%62718","%50426","%93307","%30396","%82098","%130307","%93161","%74864","%93894","%131687","%130096","%60118","%82146","%121911","%90132","%108540","%110770","%62487","%82022","%764043"],topLocationListNames:["Usedom (Mecklenburg-Vorpommern)","Binz (Mecklenburg-Vorpommern)","Heringsdorf (Mecklenburg-Vorpommern)","Khlungsborn (Mecklenburg-Vorpommern)","Timmendorfer Strand (Schleswig-Holstein)","Cuxhaven (Niedersachsen)","Bsum (Schleswig-Holstein)","Rostock-Warnemnde (Mecklenburg-Vorpommern)","Sellin (Mecklenburg-Vorpommern)","Berchtesgaden (Bayern)","Rostock (Mecklenburg-Vorpommern)","Heringsdorf-Bansin (Mecklenburg-Vorpommern)","Sassnitz (Mecklenburg-Vorpommern)","Grmitz (Schleswig-Holstein)","Ghren (Rgen, Mecklenburg-Vorpommern)","Zinnowitz (Mecklenburg-Vorpommern)","Oberstdorf (Bayern)","Berlin (Berlin)","Schnau am Knigssee (Bayern)","Baabe (Mecklenburg-Vorpommern)","Scharbeutz (Schleswig-Holstein)","Freiburg im Breisgau (Baden-Wrttemberg)","Ahrenshoop (Mecklenburg-Vorpommern)","Berlin-Mitte (Berlin)","Bergen auf Rgen (Mecklenburg-Vorpommern)","Reit im Winkl (Bayern)","Graal-Mritz (Mecklenburg-Vorpommern)","Ruhpolding (Bayern)","Bad Wiessee (Bayern)","Fehmarn (Stadt)","Rottach (Rottach-Egern, Bayern)","Lbeck (Schleswig-Holstein)","Wustrow (Nordvorpommern, Mecklenburg-Vorpommern)","Dresden (Sachsen)","Trassenheide (Mecklenburg-Vorpommern)","Neuharlingersiel (Niedersachsen)","Dierhagen Dorf (Dierhagen, Mecklenburg-Vorpommern)","Wismar (Mecklenburg-Vorpommern)","Stralsund (Mecklenburg-Vorpommern)","Norden (Niedersachsen)","Esens-Bensersiel (Niedersachsen)","Erfurt (Thringen)","Koserow (Mecklenburg-Vorpommern)","Husum (Schleswig-Holstein)","Eckernfrde (Schleswig-Holstein)","Willingen (Hessen)","Inzell (Bayern)","Tegernsee (Bayern)","Karlshagen (Mecklenburg-Vorpommern)","Helgoland (Schleswig-Holstein)"],holidayInsiderLocationList:["Usedom","Binz","Ostseebad Heringsdorf","Khlungsborn","Timmendorfer Strand","Cuxhaven","Bsum","Rostock","Sellin","Berchtesgaden","Rostock","Ostseebad Heringsdorf","Sassnitz","Grmitz","Ghren","Zinnowitz","Oberstdorf","Berlin","Schnau am Knigssee","Baabe","Scharbeutz","Freiburg","Ahrenshoop","Berlin","Bergen auf Rgen","Reit im Winkl","Graal-Mritz","Ruhpolding","Bad Wiessee","Fehmarn","Rottach-Egern","Lbeck","Wustrow","Dresden","Trassenheide","Neuharlingersiel","Dierhagen","Wismar","Stralsund","Norden","Esens","Erfurt","Koserow","Husum","Eckernfrde","Willingen","Inzell","Tegernsee","Karlshagen","Helgoland"],attachevents:function(){var that=this;
if(that.isBrowserFirefoxOrExplorer()){$$("#searchForm").addEvent("submit",function(e){if(that.isLeasureSearch()&&that.isLocationOnTopLocationList()&&that.isFormValid()){that.firePopUnder();}});}},firePopUnder:function(){var url=this.generateURLForPopUnder();var puShown=false;var PopWidth=1370;var PopHeight=800;var PopFocus=0;var _Top=null;function GetWindowHeight(){var myHeight=0;if(typeof(_Top.window.innerHeight)=="number"){myHeight=_Top.window.innerHeight;}else{if(_Top.document.documentElement&&_Top.document.documentElement.clientHeight){myHeight=_Top.document.documentElement.clientHeight;}else{if(_Top.document.body&&_Top.document.body.clientHeight){myHeight=_Top.document.body.clientHeight;}}}return myHeight;}function GetWindowWidth(){var myWidth=0;if(typeof(_Top.window.innerWidth)=="number"){myWidth=_Top.window.innerWidth;
}else{if(_Top.document.documentElement&&_Top.document.documentElement.clientWidth){myWidth=_Top.document.documentElement.clientWidth;}else{if(_Top.document.body&&_Top.document.body.clientWidth){myWidth=_Top.document.body.clientWidth;}}}return myWidth;}function GetWindowTop(){return(_Top.window.screenTop!=undefined)?_Top.window.screenTop:_Top.window.screenY;}function GetWindowLeft(){return(_Top.window.screenLeft!=undefined)?_Top.window.screenLeft:_Top.window.screenX;}function doOpen(url){var popURL="about:blank";var popID="ad_"+Math.floor(89999999*Math.random()+10000000);var pxLeft=0;var pxTop=0;pxLeft=(GetWindowLeft()+(GetWindowWidth()/2)-(PopWidth/2));pxTop=(GetWindowTop()+(GetWindowHeight()/2)-(PopHeight/2));var PopWin=_Top.window.open(popURL,popID,"toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,top="+pxTop+",left="+pxLeft+",width="+PopWidth+",height="+PopHeight);
if(PopWin){puShown=true;if(PopFocus==0){PopWin.blur();if(navigator.userAgent.toLowerCase().indexOf("applewebkit")>-1){_Top.window.blur();_Top.window.focus();}}PopWin.Init=function(e){with(e){Params=e.Params;Main=function(){if(typeof window.mozPaintCount!="undefined"){var x=window.open("about:blank");x.close();}var popURL=Params.PopURL;try{opener.window.focus();}catch(err){}window.location=popURL;};Main();}};PopWin.Params={PopURL:url};PopWin.Init(PopWin);}return PopWin;}function initPu(){_Top=self;if(top!=self){try{if(top.document.location.toString()){_Top=top;}}catch(err){}}checkTarget();}function checkTarget(e){var e=e||window.event;var win=doOpen(url);}initPu();},isBrowserFirefoxOrExplorer:function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];
if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return"IE "+(tem[1]||"");}if(M[1]==="Chrome"){tem=ua.match(/\bOPR\/(\d+)/);if(tem!=null){return"Opera "+tem[1];}}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null){M.splice(1,1,tem[1]);}M=M.join(" ");if(M.indexOf("Firefox")>=0||M.indexOf("MSIE")>=0){return true;}return false;},isFormValid:function(){var singleRooms=$$("#singleRooms").getProperty("value")[0],doubleRoomNumber=$$("#doubleRooms").getProperty("value")[0],adults=$$("#adults").getProperty("value")[0],pickedNumberOfKinder=$$("#children").getElement(":selected").getProperty("value")[0],childAge,childAcc,accomodationCount=0,isNormalInteger=function(str){return/^\+?(0|[1-9]\d*)$/.test(str);};if(isNormalInteger(singleRooms)===false&&singleRooms!=""){return false;
}if(isNormalInteger(adults)===false||doubleRoomNumber<adults/2){return false;}if(isNormalInteger(doubleRoomNumber)===false||doubleRoomNumber<pickedNumberOfKinder/2){return false;}for(i=0;i<pickedNumberOfKinder;i++){childAge=$$("#childrenWrap select[id=age_"+i+"]").getElement(":selected").getProperty("value")[0];childAcc=$$("#childrenWrap select[id=acc_"+i+"]").getElement(":selected").getProperty("value")[0];if(childAcc==1){accomodationCount++;}if(isNormalInteger(childAge)===false||accomodationCount>1||(childAcc==1&&parseInt(childAge)>12)){return false;}}return true;},generateURLForPopUnder:function(){var url="http://holidays.hrs.de/search/filter",locations="/mf_locations/"+encodeURIComponent('"'+this.holidayInsiderLocationList[this.indexLocationOnTopLocationList]+'"'),adults="/people/"+$$("#adults").getProperty("value")[0],pickedNumberOfKinder=$$("#children").getElement(":selected").getProperty("value")[0],children="",availableFrom=$$("#start_stayPeriod").getProperty("value")[0],availableFromTemp,availableTo=$$("#end_stayPeriod").getProperty("value")[0],availableToTemp,i;
url+=locations;availableFromTemp=availableFrom.split(".");availableToTemp=availableTo.split(".");availableFrom="/available/"+availableFromTemp[0]+"."+availableFromTemp[1]+"."+"20"+availableFromTemp[2];availableTo=availableToTemp[0]+"."+availableToTemp[1]+"."+"20"+availableToTemp[2];url+=availableFrom+"/"+availableTo;url+=adults;for(i=0;i<pickedNumberOfKinder;i++){url+="/"+$$("#childrenWrap select[id=age_"+i+"]").getElement(":selected").getProperty("value")[0];}url+="?cid=Search_Popunder_HRS_"+encodeURIComponent(this.holidayInsiderLocationList[this.indexLocationOnTopLocationList]);return url;},isLocationOnTopLocationList:function(){var suggestedID=$$("#suggestedID")[0].value,destiny=$$("#destiny")[0].value.trim(),indexOf=function(needle){if(typeof Array.prototype.indexOf==="function"){indexOf=Array.prototype.indexOf;
}else{indexOf=function(needle){var i=-1,index=-1;for(i=0;i<this.length;i++){if(this[i]===needle){index=i;break;}}return index;};}return indexOf.call(this,needle);};if(!!suggestedID&&(this.indexLocationOnTopLocationList=indexOf.call(this.topLocationListIds,suggestedID))>=0){return true;}else{if(!!destiny&&(this.indexLocationOnTopLocationList=indexOf.call(this.topLocationListNames,destiny))>=0){return true;}}return false;},dateCreator:function(date){if(typeof date!=="undefined"&&date!==""){var dateHelper=date.split("."),year="20"+dateHelper[2],month=parseInt(dateHelper[1])-1,day=dateHelper[0],d=new Date(year,month,day);if(Object.prototype.toString.call(d)==="[object Date]"){if(isNaN(d.getTime())){return false;}else{return d;}}else{return false;}}return false;},isLeasureSearch:function(){var that=this,doubleRoom=$$("#doubleRooms").getProperty("value")[0]||0,singleRoom=$$("#singleRooms").getProperty("value")[0],isWeekendDayInDateRange=function(){dateFrom=that.dateCreator($$("#start_stayPeriod").getProperty("value")[0]),dateTo=that.dateCreator($$("#end_stayPeriod").getProperty("value")[0]);
if(dateFrom&&dateTo){for(var d=dateFrom;d<=dateTo;d.setDate(d.getDate()+1)){if(d.getDay()===0){return true;}}}return false;};if(isWeekendDayInDateRange()&&doubleRoom>=1&&(!!singleRoom===false||singleRoom==0)){return true;}return false;},init:function(){this.attachevents();}};(function(window,document){window.addEvent("domready",function(){if(!("JSON" in window)){return;}var iframe={onPostMessage:function(e){e=e||window.event;var eventSourceWindow=e.source,eventData=e.data;if(typeof eventData==="string"&&window.JSON&&window.JSON.validate(eventData)){eventData=window.JSON.decode(eventData);}if(!(typeof eventData==="object"&&eventData&&eventData.method)){return;}var iframes=$$("iframe"),i=0,l=iframes.length,iframe;for(;i<l;i++){iframe=iframes[i];if(eventSourceWindow===iframe.contentWindow){if(eventData&&eventData.method&&(typeof this[eventData.method]==="function")){if(eventData.params){this[eventData.method].call(this,iframe,eventData.params);
}else{this[eventData.method].call(this,iframe);}}}}},resize:function(iframe,params){if(iframe&&params&&params.height){iframe.height=params.height;iframe.style.height=params.height+"px";}}};if("addEventListener" in window){window.addEventListener("message",iframe.onPostMessage.bind(iframe),false);}else{if("attachEvent" in window){window.attachEvent("onmessage",iframe.onPostMessage.bind(iframe));}}if(typeof s!=="undefined"&&s.hasOwnProperty("pageName")&&(s.pageName.trim().toLowerCase()=="homepage"||s.pageName.trim().toLowerCase()=="homepage:validationerror")&&$$("#language").getProperty("value")[0].trim().toUpperCase()=="DE"){popUnderLeasureSearch.init();}if(typeof s!=="undefined"&&s.hasOwnProperty("pageName")&&(s.pageName.trim().toLowerCase()=="my:booking history"||s.pageName.trim().toLowerCase()=="my:access data")&&$$("body")[0].className.split(" ")[1]=="de"){handlingBonusProgramSection.init();
}if(typeof s!=="undefined"&&s.hasOwnProperty("pageName")&&(s.pageName.trim().toLowerCase()=="homepage"||s.pageName.trim().toLowerCase()=="homepage:validationerror")){numberDropdownGrid.initialize();}if(typeof s!=="undefined"&&s.hasOwnProperty("pageName")&&(s.pageName.trim().toLowerCase()=="bo:data")&&sessionStorage.getItem("overwritePersonalData")==="true"){overwritePersonalData.init();}if(typeof s!=="undefined"&&s.hasOwnProperty("pageName")&&(s.pageName.trim().toLowerCase()=="bo:data")){registrationOverlay.init();}});})(window,document);function buildFormFieldInfoString(includeValidationState,pageName){var fieldInfoArr=[];var xx_empty=true;var xx_valid=true;var preDefinedClass="preDefined";var errorClass="error";var isBookingForm=pageName!=null&&pageName.indexOf("BO:Data")!=-1;$$("[data-trackingId]").each(function(element,index){var name=element.getAttribute("name");
if(name.indexOf("rooms[")==0&&(name.charAt(6)*1)>2){if(xx_empty&&element.value!=""&&!element.hasClass(preDefinedClass)){xx_empty=false;}if(element.getAttribute("type")=="checkbox"){if(xx_empty&&element.checked){xx_empty=false;}}if(includeValidationState&&xx_valid&&element.hasClass(errorClass)){xx_valid=false;}}else{var name=element.getAttribute("data-trackingId");if(name!=null&&name!=""){var value=0;if(includeValidationState&&element.hasClass(errorClass)){value+=1;}if(element.getAttribute("type")=="checkbox"){value=element.checked?value+2:value;fieldInfoArr.push(name+value);}else{if(element.getAttribute("type")=="radio"){value=value+2;var nameValue=name+value;if(!fieldInfoArr.contains(nameValue)){fieldInfoArr.push(nameValue);}}else{value=element.value==null||element.value==""||element.hasClass(preDefinedClass)?value:value+2;
fieldInfoArr.push(name+value);}}}}});if(isBookingForm){fieldInfoArr.push(xx_empty?(xx_valid?"XX0":"XX1"):(xx_valid?"XX2":"XX3"));}if(document.getElementsByName("submitBooking").length>0){var creditCardProviderName=document.getElementById("creditCardProviderName");if(creditCardProviderName){var visa="YA0";var masterCard="YB0";var americanExpress="YC0";var diners="YD0";var jcb="YE0";var chinaUnionPay="YF0";switch(creditCardProviderName.value){case"Visa":visa="YA1";break;case"Mastercard":visa="YB1";break;case"AmericanExpress":visa="YC1";break;case"Diners":visa="YD1";break;case"JCB":visa="YE1";break;case"ChinaUnionPay":visa="YF1";break;default:visa="YA2";masterCard="YB2";americanExpress="YC2";diners="YD2";jcb="YE2";chinaUnionPay="YF2";}fieldInfoArr.push(visa);fieldInfoArr.push(masterCard);fieldInfoArr.push(americanExpress);
fieldInfoArr.push(diners);fieldInfoArr.push(jcb);fieldInfoArr.push(chinaUnionPay);}}return fieldInfoArr.join(";");}(function(suppressPageReadyOnce){window.wa={ATTR_TID:"data-tid",ATTR_POS:"data-tpos",EVENT_TVIEW:"wa:teaserView",EVENT_TCLICK:"wa:teaserClick",EVENT_ELCLICK:"wa:elementClick",EVENT_PAGEREADY:"wa:pageReady",EVENT_VIEWCHANGE:"wa:viewChange",tmsReady:(window.wa&&wa.tmsReady)||false,maxLengthEventQueue:10,eventQueue:[],pageReady:function(){if(wa.suppressPageReadyOnce){wa.suppressPageReadyOnce=false;}else{wa.fireWindowEvent(wa.EVENT_PAGEREADY,{});}},viewChange:function(changeType,data){wa.fireWindowEvent(wa.EVENT_VIEWCHANGE,{changeType:changeType,changeDetails:data});},teaserView:function(domEl,data){if(!data&&domEl){data={tid:domEl.getAttribute(wa.ATTR_TID),tpos:domEl.getAttribute(wa.ATTR_POS)};
}wa.fireWindowEvent(wa.EVENT_TVIEW,data);},teaserClick:function(domEl,clickData,includeElementClickData){var data={tid:clickData.tid||domEl.getAttribute(wa.ATTR_TID),tpos:clickData.tpos||domEl.getAttribute(wa.ATTR_POS),tel:clickData.tel||clickData.el,tinfo:clickData.info,tiv:clickData.tiv};if(includeElementClickData){data.elementDataIncluded=true;data.celname=clickData.celname;data.celpos=clickData.celpos;data.celinfo=clickData.celinfo;}wa.fireWindowEvent(wa.EVENT_TCLICK,data);},elementClick:function(domEl,clickData){var data={celname:clickData.celname,celpos:clickData.celpos,celinfo:clickData.celinfo};wa.fireWindowEvent(wa.EVENT_ELCLICK,data);},fireWindowEvent:(window.wa&&wa.fireWindowEvent)||(function(name,data){this.beforeFireWindowEvent(name,data);var event;if(document.createEvent){event=document.createEvent("HTMLEvents");
event.initEvent(name,true,true);}else{event=document.createEventObject();event.eventType=name;}event.eventName=name;event.data=data;if(wa.tmsReady){if(document.createEvent){window.dispatchEvent(event);}else{window.fireEvent("on"+event.eventType,event);}}else{if(wa.eventQueue.length>=wa.maxLengthEventQueue){wa.eventQueue.shift();}wa.eventQueue.push({event:event,md:wa.createMdSnapshot()});}}),beforeFireWindowEvent:function(name,data){},createMdSnapshot:function(){var snapshot={};for(var key in window.md){if(md.hasOwnProperty(key)){snapshot[key]=md[key];}}return snapshot;},removeDefaultReady:function(){$(window).removeEvent("domready",wa.pageReady);},suppressPageReadyOnce:suppressPageReadyOnce};})(window.wa&&window.wa.suppressPageReadyOnce);$(window).addEvent("domready",wa.pageReady);function validateInputConstructor(){var isNumberKey=function(e){if(e.code>31&&(e.code<48||e.code>57)){return false;
}return true;};var isSpaceKey=function(e){return e.code==32;};var isDeleteKey=function(e){return e.code==46;};var isBackSpaceKey=function(e){return e.code==8;};var isControlKey=function(e){return e.control;};var isArrowKey=function(e){return e.code>=37&&e.code<=40;};var matchRegExp=function(e,regexp){return new String(e.code).match(regexp)!=null;};this.addValidator=function(inputs,regexp){inputs.addEvent("keyup",function(e,regexp){if(!matchRegExp(e,regexp)){e.stop();}});};this.addValidatorOnlyNumber=function(inputs){inputs.addEvent("keypress",function(e){if(!isControlKey(e)&&!isNumberKey(e)&&!isSpaceKey(e)&&!isDeleteKey(e)&&!isBackSpaceKey(e)&&!isArrowKey(e)){e.stop();}if(e.code==13){validateCreditCard();if(!checkCreditCard(document.getElementById("creditCardNumber").value,document.getElementById("creditCardProviderName").value)){deselectCreditCardLogos();
}}});};}var validateInputNumber=function validateInputNumber(event){if(event.key=="Down"){if(event.target.value==""||parseInt(event.target.value)<=0){event.preventDefault();}}};function deselectCreditCardLogos(){var creditCardIcons=$$(".creditCardIcon");for(var index=0;index<creditCardIcons.length;++index){creditCardIcons[index].className="creditCardIcon";}document.getElementById("creditCardProviderName").value="";}function hideCreditCardLogos(){var creditCardIcons=$$(".creditCardIcon");for(var index=0;index<creditCardIcons.length;++index){creditCardIcons[index].className="creditCardIcon lessVisible";}}function checkLogoCreditCard(creditCardName){var element=document.getElementById("cardIcon"+creditCardName);if(element){hideCreditCardLogos();}element.className="creditCardIcon checked";document.getElementById("creditCardProviderName").value=creditCardName;
}function creditCardValidator(creditCardName,creditCardRegex){this.name=creditCardName;this.regex=creditCardRegex;}var validateCreditCard=function(evt){var creditCardNumberInput=document.getElementById("creditCardNumber");var checkCardLogo=null;var creditCardNumberValue=creditCardNumberInput.value;var templateCardexp=/^\*+[0-9]{3,4}$/;if(templateCardexp.exec(creditCardNumberValue)&&document.getElementById("creditCardProviderName").value!=""){return;}for(var index=0;index<creditCardValidators.length;++index){var pattern=new RegExp(creditCardValidators[index].regex);if(pattern.test(creditCardNumberValue)){checkCardLogo=creditCardValidators[index].name;checkLogoCreditCard(checkCardLogo);break;}}if(!checkCardLogo){deselectCreditCardLogos();}};window.onload=function(){var creditCardNumberInput=document.getElementById("creditCardNumber");
if(creditCardNumberInput){creditCardNumberInput.onkeyup=validateCreditCard;$(creditCardNumberInput).addEvent("paste",function(){setTimeout(validateCreditCard,20);});if(checkCreditCard(document.getElementById("creditCardNumber").value,document.getElementById("creditCardProviderName").value)){validateCreditCard();}$(creditCardNumberInput).addEvent("blur",function(ev,el){if(!checkCreditCard(document.getElementById("creditCardNumber").value,document.getElementById("creditCardProviderName").value)){deselectCreditCardLogos();}});}var validateInput=new validateInputConstructor();validateInput.addValidatorOnlyNumber($$(".inputOnlyNumbers"));$$(".creditCardIcon").addEvent("click",function(ev,el){if(creditCardNumberInput&&!creditCardNumberInput.value){if(!this.hasClass("checked")){hideCreditCardLogos();
this.className="creditCardIcon checked";}}});};if(!Browser.Platform.android&&!Browser.Platform.ios&&!Browser.Platform.webos){window.TT=new Tips([],{onShow:function(tip){tip.setStyles({"width":"auto","display":"","visibility":"hidden"});tip.setStyles({"width":tip.getSize().x>250?250:"auto",visibility:"visible"});},onHide:function(tip){tip.setStyles({visibility:"hidden",display:"none"});}});}function tt(el,title){var event=window.event||arguments.callee.caller.arguments[0];if(window.TT){el=$(el);el.title=title||(el.getElement("span.tt")||el).get("text")||el.title;if(!el.getParent("#tablehead")){el.onmouseover=null;}else{if(el.retrieve("tip:title")){if(el.retrieve("tip:title")!=el.title){el.store("tip:title",el.title);}el.title="";}}if(!el.retrieve("tip:title")){window.TT.attach([el]);window.TT.elementEnter({page:{x:event.clientX,y:event.clientY}},el);
}}}var holidayInsiderTeaser=new function(){var that=this,regions=[];this.data={};this.tiles=[];this.options={data:{},evaluation_text:""};this.initialize=function(options){options=options||{};this.options=merge_options(this.options,options);this.data=this.options.data;this.shortAccommodationsIds();this.bindRegions();};this.shortAccommodationsIds=function(){var iter=0,aiter=0,len=0,alen=0,strlen=0,accommodations,data=that.data.holidays.regionlist.region;len=data.length;for(iter;iter<len;iter++){accommodations=data[iter].accommodations.accommodation;alen=accommodations.length;aiter=0;for(aiter;aiter<alen;aiter++){strlen=accommodations[aiter].id.length;if(strlen<=10){continue;}strlen--;that.data.holidays.regionlist.region[iter].accommodations.accommodation[aiter].id=accommodations[aiter].id.substring(strlen-10,strlen);
}}};this.bindRegions=function(){var links,len=0,iter=0,linkElement;regions=links=$$(".holidayinsider_region_link");len=links.length;for(iter;iter<len;iter++){linkElement=$(links[iter]);linkElement.removeEvent("click",this.render);linkElement.addEvent("click",this.render);linkElement.setAttribute("id",this.createIdForRegion(iter));$(linkElement.parentNode).getElements(".jsRegisterMoreOffers")[0].setAttribute("id",this.createIdForMoreLink(iter));}};this.createIdForMoreLink=function(iter){var id="",data=that.data.holidays.regionlist.region[iter];id+="hi:"+iter+"::eVar18::";id+=data.name.replace(/ /g,"_")+";5"+(iter+1)+";Link";id+="::events::event14";id+="::linkTrackVars::eVar18_2C_events::linkTrackEvents::event14";return id;};this.createIdForRegion=function(iter){var i=0,arr=[],len,id="",data=that.data.holidays.regionlist.region[iter].accommodations.accommodation;
len=data.length;id+="hi:"+iter+"::prop18::";for(i;i<len;i++){arr[i]=this.createApartmentNumber(data[i],i,iter);}id+=arr.join(",");id+="::events::event14";id+="::linkTrackVars::prop18_2C_events::linkTrackEvents::event14";return id;};this.render=function(event){var target,region_id;event.preventDefault();target=(event.target!=null)?event.target:event.srcElement;region_id=(target.dataset!=null)?target.dataset.id:target.getAttribute("data-id");that.changeRegionSelect(target);that.changeHotels(region_id);};this.changeRegionSelect=function(linkObject){var len=0,iter=0,parent;len=regions.length;for(iter;iter<len;iter++){parent=$(regions[iter].parentNode);parent.removeClass("active");parent.getElements(".jsRegisterMoreOffers")[0].addClass("hide");regions[iter].removeClass("active");}linkObject.addClass("active");
parent=$(linkObject.parentNode);parent.addClass("active");parent.getElements(".jsRegisterMoreOffers")[0].removeClass("hide");};this.mapTiles=function(){var teasers=[],len=0,iter=0,teaser,teaserObject;if(this.tiles.length>0){return;}teasers=$$(".teaser_element");len=teasers.length;for(iter;iter<len;iter++){teaser=$(teasers[iter]);teaserObject={};teaserObject["container"]=teaser;teaserObject["image_link"]=teaser.getElements(".teaser_image_link")[0];teaserObject["image"]=teaser.getElements(".teaser_image")[0];teaserObject["title"]=teaser.getElements(".teaser_title")[0];teaserObject["title_link"]=teaser.getElements(".teaser_title")[0].parentNode;teaserObject["rating"]=teaser.getElements(".teaser_rating")[0];teaserObject["rating_text"]=teaser.getElements(".teaser_rating_evaluations_text")[0];teaserObject["price"]=teaser.getElements(".teaser_prize_text")[0];
that.tiles[iter]=teaserObject;}};this.changeHotels=function(region_index){var iter=0,len=0,apartment,tile,accommodations=that.data.holidays.regionlist.region[region_index].accommodations.accommodation;this.mapTiles();region_index=Number(region_index);len=accommodations.length;for(iter;iter<len;iter++){apartment=accommodations[iter];tile=that.tiles[iter];tile.image_link.setAttribute("href",apartment.url);tile.image_link.setAttribute("id",this.createIdForApartment(apartment,iter,region_index,"Picture"));tile.title_link.setAttribute("href",apartment.url);tile.title_link.setAttribute("id",this.createIdForApartment(apartment,iter,region_index,"Title"));tile.image.setAttribute("src",apartment.image);tile.title.innerHTML=apartment.name;tile.title.setAttribute("href",apartment.url);tile.title.setAttribute("id",this.createIdForApartment(apartment,iter,region_index,"Rating"));
tile.rating.setAttribute("href",apartment.url);tile.rating.setAttribute("id",this.createIdForApartment(apartment,iter,region_index,"Rating"));tile.rating.innerHTML=this.parseNumber(apartment.score);tile.rating_text.innerHTML=apartment.recommendations+" "+that.options.evaluation_text;tile.rating_text.parentNode.setAttribute("href",apartment.url);tile.price.innerHTML=this.parseNumber(apartment.price,",-");tile.price.parentNode.setAttribute("id",this.createIdForApartment(apartment,iter,region_index,"Price"));tile.price.parentNode.setAttribute("href",apartment.url);}};this.createIdForApartment=function(apartment,iter,region_index,type){var id="hi:"+iter+"::eVar18::";id+=this.createApartmentNumber(apartment,iter,region_index,type);id+="::events::event15";id+="::linkTrackVars::eVar18_2C_events::linkTrackEvents::event15";
return id;};this.createApartmentNumber=function(apartment,iter,region_index,type){var number="H"+apartment.id+";5"+(region_index+1)+""+(iter+1);if(type!=undefined){number+=";"+type;}return number;};this.parseNumber=function(number,end){end=end||"";number=String(number);return number.replace(/,0+/g,end);};function merge_options(obj1,obj2){var obj3={};for(var attrname in obj1){obj3[attrname]=obj1[attrname];}for(var attrname in obj2){obj3[attrname]=obj2[attrname];}return obj3;}};function after(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};}function uniqueArray(array,comparator){var ret=[];for(var i=0;i<array.length;++i){var a=array[i];var unique=true;for(var j=0;j<ret.length;++j){var b=ret[j];if(comparator(a,b)==true){unique=false;}}if(unique===true){ret.push(a);
}}return ret;}var ImageLoaderBasket=new Class({Implements:[Events,Options],options:{images:"",urls:"",attribute:"",onRequest:function(){},onSingleComplete:function(image){},onComplete:function(){}},initialize:function(options){this.setOptions(options);this.options.length=this.options.images.length-1;this.isInitial=true;this.options.images.each(function(image,index){if(this.options.urls){image.src=this.options.urls[index];}else{if(image[this.options.attribute]){image.src=image[this.options.attribute];}image.removeProperty(this.options.attribute);}if(this.isInitial){this.fireEvent("request");this.isInitial=false;}image.addEvent("load",function(event){this.fireEvent("singleComplete",image);if(index==this.options.length){this.fireEvent("complete");}}.bind(this));}.bind(this));}});var Gallery=new Class({Implements:Options,options:{stepSize:8.3,galleryLength:4,duration:700,around:true,greyOutArrows:false,useMouseWheel:false},initialize:function(container,options){this.setOptions(options);
this.slide=container.getElement("ul")?container.getElement("ul"):container.getElement("div.imageBox");var lis=this.slide.getChildren();container.getElement(".slideShow").addClass("jsSlide");if(lis.length>this.options.galleryLength){this.next=container.getElement(".next")?container.getElement(".next"):container.getNext();this.prev=container.getElement(".prev")?container.getElement(".prev"):container.getPrevious();this.next.removeClass("hide");this.prev.removeClass("hide");this.next.addEvent("click",function(){this.move(1,true);}.bind(this));this.prev.addEvent("click",function(){this.move(-1,true);}.bind(this));if(this.options.useMouseWheel){container.addEvent("mousewheel",function(event){this.move(-event.wheel,true);event.stop().preventDefault();}.bind(this));}this.slide.setStyle("left",0);this.maxSteps=this.slide.getElements("li").length;
this.step=0;this.fx=new Fx.Tween(this.slide,{property:"left",duration:this.options.duration,link:"cancel",unit:"em"});if(this.slide.get("tag")=="ul"&&this.options.around){for(var i=0;i<this.options.galleryLength;i++){this.slide.appendChild(lis[i].clone());}}this.loadImages(0,this.options.galleryLength);this.move(0,false);}},move:function(sub,isNotInitial){if(!this.hasLoadImages&&isNotInitial){this.loadImages(this.options.galleryLength);this.hasLoadImages=true;}this.step+=sub;if(this.options.around){if(this.step>this.maxSteps){this.step=1;this.slide.setStyle("left",(-(this.step-1))*this.options.stepSize+"em");}if(this.step<0){this.step=this.maxSteps-1;this.slide.setStyle("left",(-(this.step+1))*this.options.stepSize+"em");}}else{this.step=this.step.limit(0,this.maxSteps-this.options.galleryLength);
if(this.step==0){this.prev.addClass("inactive");}else{this.prev.removeClass("inactive");}if(this.step==this.maxSteps-this.options.galleryLength){this.next.addClass("inactive");}else{this.next.removeClass("inactive");}}if(this.options.greyOutArrows){this.prev.setStyle("opacity",1);this.next.setStyle("opacity",1);}if(this.options.greyOutArrows&&(this.step==0||this.step+this.options.galleryLength==this.maxSteps)){this.step==0?this.prev.setStyle("opacity",0.2):this.next.setStyle("opacity",0.2);}this.fx.start(-this.step*this.options.stepSize);},loadImages:function(start,end){var links=this.slide.getElements("a.noImg");end=Math.min((end||links.length),links.length);for(var i=start;i<end;i++){var a=links[i];var img=new Element("img",{"src":a.getProperty("rel")}).inject(a,"top");}}});var Thumbs=new Class({Extends:Gallery,initialize:function(container,options){this.parent(container,options);
var cnt=container.id.replace(/slider_/,"");if(this.next){this.next.addEvent("click",s_trackLink.pass(["hfs_next_"+cnt,true]));}if(this.prev){this.prev.addEvent("click",s_trackLink.pass(["hfs_prev_"+cnt,true]));}container.getElements(".jsSlide ul li a").each(function(link,cnt){link.addEvent("mouseenter",function(event){thePic=container.getPrevious().getElement("img");thePic.setProperty("src",link.getProperty("href"));if(container.getNext().getElement("span.vi")){theVi=container.getNext().getElement("span.vi");thePic.addEvent("load",function(){var vivi=new SetVideoSpan(theVi,thePic,{all:false,wrapWidth:132,wrapHeight:132,offsetPadding:11});});}});link.addEvent("click",function(event){event.preventDefault();});});}});var HotelphotoGallerie=new Class({options:{},initialize:function(container,photoList){var inputs=container.getElements("ul input");
this.photolist=photoList;if(photoList.length>0){this.mainImage=container.getElement("#hotelphoto");this.next=container.getElement(".next").addEvent("click",function(event){event.stop();this.move(1);}.bind(this));this.prev=container.getElement(".prev").addEvent("click",function(event){event.stop();this.move(-1,event);}.bind(this));this.imgDesc=$("photodescription");if(inputs.length>0){this.options.imgSrcs=[];this.imgMargins=[];this.options.imgDescText=[];inputs.each(function(item,index){item.addEvent("mouseover",function(){this.moveTo(index);}.pass(index,this));item.addEvent("click",function(event){event.stop();});this.photolist[index].label=item.getAttribute("alt");},this);}this.step=0;this.prev.setStyle("opacity",0.2);}},move:function(factor){this.moveTo(Math.max(0,Math.min(this.step+factor,this.photolist.length-1)));
},moveTo:function(index){var values=this.photolist[index];this.mainImage.setAttribute("src",values.url);this.mainImage.setStyle("margin-top",values.height);this.step=index;this.step==this.photolist.length-1?this.next.setStyle("opacity",0.2):this.next.setStyle("opacity",1);this.step==0?this.prev.setStyle("opacity",0.2):this.prev.setStyle("opacity",1);this.imgDesc.set("text",values.label);}});var DropDownToggler=new Class({Extends:Toggler,options:{until:true},addSection:function(toggle,toggler){toggler.toggle=toggle;toggler.addEvent("change",function(){var number=this.selectedIndex;for(var i=0,l=this.toggle.length-1;i<=l;i++){if(until){var display=(i<number)?"":"none";}else{var display=(i==number)?"":"none";}this.toggle[i].style.display=display;}});}});var FavoritesForm=new Class({initialize:function(form){if($("sendLink")){this.form=form;
this.window=null;$("sendLink").addEvent("click",function(event){event.stop();this.sendJS();}.bind(this));form.getElements("a.jsOpenDetail").each(function(item){var href=item.getProperty("href").replace(/inCont=1/,"");item.addEvent("click",function(event){window.open(href,POPUPTITLE);event.stop();}.bind(href));});}},sendJS:function(){var checked="";this.form.getElements("input").each(function(item){if(item.type=="checkbox"&&item.checked){checked+="&entries="+item.value;}});if(checked!=""){var link=JSLINK;window.open(link+=checked,"detailNeutralSatellite","width=595,height=590,left=320,top=0,scrollbars=yes").focus();}else{this.form.activity.value="sendLink";this.form.submit();}}});var SubmitOnChange=new Class({initialize:function(select){if(select.getNext()!=null){select.getNext().addClass("hide");
}select.addEvent("change",function(event){var targetID=this.id,inputId=targetID+".x",form=this.form;if(targetID=="submitAltCurr"){console.log("TRACKLINK: currency switching");var oldCur=window.alternativeCurrency;var newCur=form.alternativeCurrency.value;window.alternativeCurrency=newCur;form.appendChild(new Element("input",{type:"hidden",name:"oldCur",value:oldCur}));form.appendChild(new Element("input",{type:"hidden",name:"newCur",value:newCur}));}if(targetID=="changeHotelRating"){form.action+="#hRanking";}if(targetID=="submitChangeDimension"){form.action+="#h_distance";}form.appendChild(new Element("input",{type:"hidden",name:inputId,id:inputId,value:"submit"}));form.submit();});}});var Counter=new Class({initialize:function(inputs,maxLength){for(var i=0,l=inputs.length;i<l;i++){var input=inputs[i];
input.maxLength=typeOf(maxLength)=="number"?maxLength:maxLength[i];input.counter=input.getNext();input.addEvent("keyup",function(){var signsLeft=this.maxLength-this.value.length;var message=COUNTERMESSAGE.contains("__varSignsLeft__")?COUNTERMESSAGE.replace("__varSignsLeft__",signsLeft):signsLeft+" "+COUNTERMESSAGE;this.counter.set("text",message);signsLeft<1?this.value=this.value.substr(0,this.maxLength):this.lastValue=this.value;});input.fireEvent("keyup");}}});var ShowHide=new Class({Implements:Events,initialize:function(inputs,element,visible){var that=this;if(visible=="false"){element.addClass("hide");}if(inputs.length==1){inputs[0].element=element;inputs[0].addEvent("click",function(){var resType="0";if(this.element.hasClass("hide")){this.element.removeClass("hide");resType="1";}else{this.element.addClass("hide");
}that.fireEvent("onReservationTypeChange",{eventType:"onReservationTypeChange",eventData:resType});});}else{if(inputs.length==2){inputs[0].element=element;inputs[1].element=element;inputs[0].addEvent("click",function(){this.element.addClass("hide");that.fireEvent("onReservationTypeChange",{eventType:"onReservationTypeChange",eventData:"0"});});inputs[1].addEvent("click",function(){that.fireEvent("onReservationTypeChange",{eventType:"onReservationTypeChange",eventData:"1"});this.element.removeClass("hide");});}}}});var SwitchValue=new Class({initialize:function(elements,input){elements.each(function(el){el.addEvent("click",function(){input.value=el.value;}.pass(input));});}});var amexToggler=new Class({initialize:function(toggle,toggler){if(toggle&&toggler){toggler.toggle=toggle;toggler.removeClass("amex");
toggler.getNext().addClass("hide");toggler.addEvent("change",function(){this.value=="AMEX"?this.toggle.removeClass("hide"):this.toggle.addClass("hide");});}}});var menueKonverter=new Class({initialize:function(mid,bPreSelect,treeID){if(bPreSelect==null||bPreSelect=="undefined"){bPreSelect=false;}if(treeID==null||treeID=="undefined"){treeID=false;}var list=$(mid);if(list){var menue=list.getChildren();var dd=new Element("select",{"class":list.className.replace("clearFix",""),"name":"sel_"+mid});menue.each(function(item){item.opt=new Element("option");item.a=item.getElement("a");item.action="";if(!item.a){item.text=item.innerHTML;}else{item.text=item.a.get("text");item.action=item.a.getAttribute("onclick")?item.a.getAttribute("onclick"):"self.location='"+item.a.getAttribute("href")+"'";if(treeID&&item.a.href.indexOf(treeID)!=-1){item.opt.selected=true;
}else{if((window.location==item.a.href)&&bPreSelect){item.opt.selected=true;}}}item.opt.innerHTML=item.text;item.opt.setProperty("value",item.action);item.opt.inject(dd,"inside");});dd.addEvent("change",function(e){if(this[this.selectedIndex].value!=""){eval(this[this.selectedIndex].value);if(typeof anonymous=="function"){anonymous();}}});dd.replaces(list);}}});var Printer=new Class({initialize:function(i_print){$$(i_print).each(function(element){if(!Browser.opera){element.removeClass("hide");element.addEvent("click",function(event){event.stop();window.print();});}});}});var Setmm=new Class({initialize:function(checkBoxes){$$(checkBoxes).each(function(checkbox){if(checkbox.checked){checkbox.getParent().addClass("mc");}checkbox.addEvent("click",function(){this.getParent().toggleClass("mc");});
});}});var SetmmMulti=new Class({initialize:function(checkBoxes,theOutput,chooseAll){if($("stornoTr")){$("stornoTr").removeClass("hide");}var myCopy=[];$$(checkBoxes).each(function(checkbox){if(checkbox.checked){checkbox.getParent().addClass("mc");}var prevTD=checkbox.getParent().getPrevious();checkbox.addEvent("click",function(){var thePrevTD=checkbox.getParent().getPrevious();var myNum=thePrevTD.getChildren("label")[0].innerHTML;this.getParent().toggleClass("mc");this.getParent().getPrevious().toggleClass("mc");if(checkbox.checked){myCopy.push(myNum);function Numsort(a,b){return a-b;}myCopy.sort(Numsort);theOutput.empty();theOutput.appendText("["+myCopy.join(", ")+"]");}if(!checkbox.checked){myCopy.erase(myNum);theOutput.empty();theOutput.appendText("["+myCopy+"]");chooseAll.removeProperty("checked");
if(myCopy.length==0){theOutput.empty();}}});});if(chooseAll){chooseAll.addEvent("click",function(){if(chooseAll.checked){$$(checkBoxes).each(function(checkbox){var prevTD=checkbox.getParent().getPrevious();var myNum=prevTD.getChildren("label")[0].innerHTML;checkbox.setProperty("checked","checked");checkbox.getParent().addClass("mc");prevTD.addClass("mc");myCopy.erase(myNum);myCopy.push(myNum);});theOutput.empty();theOutput.appendText("["+myCopy.join(", ")+"]");}if(!chooseAll.checked){$$(checkBoxes).each(function(checkbox){var prevTD=checkbox.getParent().getPrevious();var myNum=prevTD.getChildren("label")[0].innerHTML;checkbox.removeProperty("checked","checked");checkbox.getParent().removeClass("mc");prevTD.removeClass("mc");myCopy.erase(myNum);theOutput.empty();});}});}}});var SetmmByRadio=new Class({initialize:function(i_radio){var allBoxes=$$(i_radio);
for(var i=0;i<allBoxes.length;i++){if(allBoxes[i].checked){allBoxes[i].getParent().addClass("mc");}allBoxes[i].addEvent("click",function(e){for(var n=0;n<allBoxes.length;n++){allBoxes[n].getParent().removeClass("mc");}this.getParent().addClass("mc");});}}});var Back=new Class({initialize:function(){$$("a.back").each(function(link){link.addEvent("click",function(event){event.stop();history.back();});});}});var CheckPopUp=new Class({initialize:function(){$$("a.jsCheckPopUp").each(function(link){link.addEvent("click",function(event){if(window.opener&&link.href){event.stop();window.opener.parent.location.href=link.href;self.close();}});});}});var PrizeUpdate=new Class({initialize:function(form,tooltip,priceDetailsToggler,updatePriceDetailsAction){form.addEvent("click",function(event){this.update(event);
}.bind(this));form.addEvent("change",function(event){this.changeOffer(event);}.bind(this));form.getElements("#basket select").addEvent("change",function(event){this.changeOffer(event);}.bind(this));var detailsEntryInput=document.getElementsByName("detailsEntry")[0];this.detailsEntry=detailsEntryInput?detailsEntryInput.value:"booking";window.updateBasket=this.updateBasket;window.changeOffer=this.changeOffer;window.updateReservationType=this.updateReservationType;window.roomCategorieTooltip=tooltip;if(priceDetailsToggler){window.updatePriceDetails=this.updatePriceDetails;window.updatePriceDetailsAction=this.updatePriceDetailsAction=updatePriceDetailsAction;window.priceDetailsToggler=this.priceDetailsToggler=priceDetailsToggler;window.tip=new Tips();}this.jsHotdealToggler=$$(".jsHotdealToggler");
if(this.jsHotdealToggler.length>0){this.jsHotdealToggler.each(function(item){var currentTable=item.getParent().getParent().getParent().getParent();var jsHotdealToggle=new Element("div",{"class":"jsHotdealToggle"});jsHotdealToggle.inject(currentTable,"after");while(jsHotdealToggle.getNext()!==null){jsHotdealToggle.getNext().inject(jsHotdealToggle,"inside");}});this.jsHrspriceToggler=$$(".jsHrspriceToggler");if(this.jsHrspriceToggler.length>0){this.jsHrspriceToggler.each(function(item){var currentTable=item.getParent().getParent().getParent().getParent();var jsHrspriceToggle=new Element("div",{"class":"jsHrspriceToggle"});jsHrspriceToggle.inject(currentTable,"after");while(jsHrspriceToggle.getNext()!==null){jsHrspriceToggle.getNext().inject(jsHrspriceToggle,"inside");}});}}},update:function(event){var input=$(event.target),inputName=input.id,inputTag=input.get("tag");
if(inputName&&inputName.match(/selectOfferForm|supplement/)){event.stop();if(inputName.contains("selectOfferForm")){var offerId=inputName.split("_")[1];OfferViewReloader.selectOffer(this.detailsEntry,offerId,window.updateBasket);}else{if(inputName.contains("supplement")){var splittedInputName=inputName.split("_"),offerId=splittedInputName[1],supplementId=splittedInputName[2];OfferViewReloader.selectSupplement(this.detailsEntry,offerId,supplementId,function(json){window.updateBasket(json);if(input.className.contains("checkSmall")){input.className=json.supplementSelected?"checkSmallSelected":"checkSmall";}else{Array.from(document.getElementsByName("supplement_"+json.offerId+"_"+json.selectedSupplementGroupId)).each(function(input){input.className=(input.id=="supplement_"+json.offerId+"_"+json.supplementId&&json.supplementSelected)?"radioSmallSelected":"radioSmall";
});}$("priceOfferDeal_"+json.offerDealId).set("html","<strong>"+json.offerPrice+"</strong>"+(json.altOfferPrice?" ("+json.altOfferPrice+")":""));$("priceOfferForm_"+json.offerId).set("html","<span>"+json.offerPrice+"</span>"+(json.altTotalPrice?'<span class="alterCurr">('+json.altOfferPrice+")</span>":""));$("boardOfferForm_"+json.offerId).set("html",json.board);if($("boardOfferFormTitle_"+json.offerId)){$("boardOfferFormTitle_"+json.offerId).set("html",json.board);}if($("priceOfferFormTitle_"+json.offerId)){$("priceOfferFormTitle_"+json.offerId).set("html","<strong>"+json.offerPrice+"</strong>"+(json.altOfferPrice?" ("+json.altOfferPrice+")":""));}});}}}},changeOffer:function(event){var select=$(event.target);if(select.id.contains("roomOffer")){var offerID=select.options[select.selectedIndex].value,room=select.id.replace("selectOfferFromBasket_",""),detailsEntryInput=document.getElementsByName("detailsEntry")[0],detailsEntry=detailsEntryInput?detailsEntryInput.value:"booking";
if(window.updatePriceDetailsAction){index=parseInt(room.replace("roomOffer",""))-1;if(index>-1){window.updatePriceDetails(room,offerID,index);}}OfferViewReloader.selectOfferFromBasket(detailsEntry,offerID,room,window.updateBasket);}},updateBasket:function(json){if($("chooseEnabled")){updateReservationType(json);}var basketEntries=json.basketEntries,basket=$("basket").getElement("table");rows=[];basket.getElement("tbody").getChildren().each(function(tr){if(!tr.hasClass("ratesContainer")){rows.push(tr);}});rows.each(function(tr,cnt){var td=tr.getElements("td"),entries=basketEntries[cnt],offers=entries.offers;if(td.length>3){td[1].getElement("div").innerHTML=entries.roomCategoryDescription;if(typeof(window.roomCategorieTooltip)!="undefined"){window.roomCategorieTooltip.attach(td[1].getElement("img"));
}}var priceCatColumn=tr.getElement("td.priceCat");var select=null;if(priceCatColumn){select=priceCatColumn.getElementsByTagName("select")[0];}else{select=td[2].getElementsByTagName("select")[0];}var options="",img=td[2].getElement("img"),hotdealSpan=td[2].getElement("span");newSelect=new Element("select",{"id":"selectOfferFromBasket_"+entries.roomOfferId,"name":"selectOfferFromBasket_"+entries.roomOfferId,"class":select?select.className:""});if(select){for(var value in offers){var deal=offers[value];if(deal.available){var container=(deal.label)?new Element("optgroup",{"label":deal.label}):newSelect,availableOffers=deal.availableOffers;for(offer in availableOffers){var o=availableOffers[offer];if(o.available){var op=(new Element("option",{"selected":offer===entries.selectedOffer?"selected":"","value":offer})).set("text",o.label).inject(container,"inside");
}else{}}if(deal.label){container.inject(newSelect,"inside");}}else{}}newSelect.replaces($(select));newSelect.addEvent("change",window.changeOffer);}if(entries.offerIcon){img?img.src=entries.offerIcon:td[2].appendChild(new Element("img",{"src":entries.offerIcon}));}else{if(img){img.dispose();}}if(entries.hotdealNotice){hotdealSpan?hotdealSpan:td[2].appendChild(new Element("span",{"class":"errorMsg hotDealHint"}).set("text",entries.hotdealNotice));}else{if(hotdealSpan){hotdealSpan.dispose();}}if(td.length===5){td[3].innerHTML=entries.board;}if(td.length===5){td[td.length-1].innerHTML="<strong>"+entries.offerPrice+"</strong> "+(entries.altOfferPrice?" ("+entries.altOfferPrice+")":""+"");}else{td[td.length-1].innerHTML="<strong>"+entries.offerPrice+"</strong> "+(entries.altOfferPrice?" ("+entries.altOfferPrice+")":""+"")+"</br>"+entries.board;
}if(entries.roomOfferId===json.roomOfferId){for(var deal in offers){var priceOfferDeal=$("priceOfferDeal_"+deal),price=offers[deal].minimumPrice;if(priceOfferDeal){$(deal)[(offers[deal].available?"remove":"add")+"Class"]("hide");$(deal).getElement("h5 strong").innerHTML=price;if(priceOfferDeal){if(deal===json.offerDealId){priceOfferDeal.set("html","<strong>"+json.offerPrice+"</strong>"+(json.altOfferPrice?" ("+json.altOfferPrice+")":""));}priceOfferDeal.className=deal===json.offerDealId?"selectedOffer":"";}var availableOffers=offers[deal].availableOffers;for(var offer in availableOffers){var input=$("selectOfferForm_"+offer);if($(availableOffers[offer].id)){$(availableOffers[offer].id)[(availableOffers[offer].available?"remove":"add")+"Class"]("hide");}if(input){var parent=input.getParent(),handle=offer===json.offerId?"add":"remove",inputDeal;
input.className=offer===json.offerId?"radioSelected":"radio";if(handle==="add"){inputDeal=$("offerDeal_"+json.offerDealId);}if(parent.get("tag")==="label"){parent=parent.getParent();parent[handle+"Class"]("selectedOffer");if(parent.hasClass("otherDeals")){inputDeal=$("offerDealMoreDeals_"+json.offerDealId);}}else{parent=parent.getParent();for(var i=0;i<3;i++){parent[handle+"Class"]("selected");parent=parent.getNext();}}}}var nextOffersButtonPosition=offers[deal].nextOffersButton;if(nextOffersButtonPosition!==null){var toggleButton=$("offerDealMoreDeals_"+deal);var currentTable=$("offer_"+nextOffersButtonPosition);toggleButton.inject($$("#offer_"+nextOffersButtonPosition+" .addDeals td")[0],"inside");if(currentTable.getParent().hasClass("jsHotdealToggle")){var toggleWrap=currentTable.getParent().getParent();
var target=currentTable;var oldTarget=toggleWrap;do{target.inject(oldTarget,"before");oldTarget=target;target=target.getPrevious();}while(target.getPrevious()!==null);}else{var target=currentTable.getNext();if(target!==null){var oldTarget=target.getParent().getElement(".jsHotdealToggle");var isFirst=true;while(target!==null&&!target.hasClass("jsToggleWrap")){target["inject"](oldTarget,isFirst?"top":"after");oldTarget=target;target=target.getNext();isFirst=false;}}}toggleButton.removeClass("hide");}else{var toggleButton=$("offerDealMoreDeals_"+deal);if(toggleButton!==null){toggleButton.addClass("hide");if(toggleButton.hasClass("jsToggled")){var toggleButtonTable=toggleButton.getParent().getParent().getParent().getParent();var toggleTables=toggleButtonTable.getNext().getElements("table.deal");
var openToggle=false;toggleTables.each(function(item){if(!item.hasClass("hide")){openToggle=true;}});if(openToggle){toggleButton.click();}}}}}}}var mylink=tr.getElement("a.layerRestrictions");if(mylink){mylink.store("tooltipText",entries.offerRestrictions||"");}var myRoomLink=tr.getElement("a.layerRoom");if(myRoomLink){if(entries.ratesInformation){myRoomLink.store("tooltipText",entries.ratesInformation);}else{myRoomLink.store("tooltipText","");}}var myRatesLink=tr.getElement("a.layerRates");if(myRatesLink){if(entries.ratesInformation){myRatesLink.store("tooltipText",entries.ratesInformation);}else{myRatesLink.store("tooltipText","");}}},this);basket.getElement(" dd.price").innerHTML="<span>"+json.totalPrice+"</span>"+(json.altTotalPrice?' <span class="alterCurr">('+json.altTotalPrice+")</span>":"");
basket.getElement(" dd.price").innerHTML="<span>"+json.totalPrice+"</span>"+(json.altTotalPrice?' <span class="alterCurr">('+json.altTotalPrice+")</span>":"");if($("ciCreditCardFirmContainer")){$("ciCreditCardFirmContainer")[(json.showCompanyCreditCards?"remove":"add")+"Class"]("hide");if(!json.showCompanyCreditCards){$("creditCard.ciCreditCardPers").checked=true;setCiCreditCardDisplay("creditCardCI","");}}},changeSelected:function(deals,json){},updateReservationType:function(json){$("chooseEnabled").style.display=json.enableStandardBooking?"block":"none";$("chooseDisabled").style.display=json.enableStandardBooking?"none":"block";$("resTypeStandard").checked=json.enableStandardBooking?true:false;if($("reservationTypeHidden")){$("reservationTypeHidden").value=json.enableStandardBooking?"0":"1";
}if(json.enableStandardBooking||!json.requireCCForGuaranteedBooking){$("creditCardData").addClass("hide");}else{$("creditCardData").removeClass("hide");}},updatePriceDetails:function(roomId,offerId,index){var params="&activity=getPriceDetails&detailsEntry=booking";params+="&roomId="+roomId+"&offerId="+offerId;var request=new Request({method:"get",onRequest:function(){},onSuccess:function(response){var slide=window.priceDetailsToggler.slides[index],slideEl=slide.element;(function(){slideEl.set("html",response);slideEl.setStyles({position:"absolute",top:"-50000em"});var h=slideEl.getSize().y;slide.offset=h;slideEl.setStyles({position:"",top:"0"});slideEl.getElements("img.tooltip").each(function(img){window.tip.attach(img);});}).delay(10);}}).send({url:window.updatePriceDetailsAction,data:params});
}});var Notepad=new Class({initialize:function(forms){forms.each(function(form){var notepadEntryId=form.notepadEntryId.value;form.getElements(".jsShowSendLink").addEvent("click",function(event){event.stop();var allHotels=this.getChecked(form);if(allHotels==""){form.activity.value="sendLink";form.submit();}else{this.openWindow(LINKTOSEND+notepadEntryId+allHotels,595,590);}}.bind(this));form.getElements(".jsShowPrintNotepad").addEvent("click",function(event){event.stop();var allHotels=this.getChecked(form);if(allHotels==""){form.activity.value="printNotepad";form.submit();}else{this.openWindow(LINKTOPRINT+notepadEntryId+allHotels,785,590);}}.bind(this));form.getElements(".jsLogonPopup").addEvent("click",function(event){event.stop();this.openWindow(LOGONPOPUP+form.name+"&notepadEntryId="+notepadEntryId+this.getChecked(form),610,350);
}.bind(this));},this);},getChecked:function(form){var allHotels="";form.getElements("td.mm input").each(function(checkbox){if(checkbox.checked){var numberField=checkbox.value;allHotels+="&hotelnumbers="+numberField;}});return allHotels;},openWindow:function(url,width,height){if(this.window){this.window.close();}this.window=window.open(url,"detailNeutralSatellite","width="+width+",height="+height+",left=0, top=0, scrollbars=yes, resizable=yes");this.window.focus();}});var CutText=new Class({Implements:Options,options:{stringLength:200,toggleText:null,commentTextLength:0,commentTextStartIdentifier:"</span>"},initialize:function(elements,options){this.setOptions(options);elements.each(function(p){var fullText=p.innerHTML,fullTextSize=p.getSize().y,cutText=fullText.substr(0,this.options.stringLength),cutText=cutText.substr(0,cutText.lastIndexOf(" "))+"...",commentText=fullText.substr(fullText.lastIndexOf(this.options.commentTextStartIdentifier)+this.options.commentTextStartIdentifier.length,fullText.length),commentTextLength=commentText.length,button=p.getParent().getLast().getElement("a");
button.toShow=false;if(commentTextLength==0){cutText="";}else{if(commentTextLength<=this.options.stringLength){cutText=fullText;}else{button.toShow=true;}}p.set("html",cutText);var cutTextSize=p.getSize().y;var toggle=new Fx.Tween(p,{onStart:function(){if(toggle.isCut){p.set("html",fullText);}}.bind(this),onComplete:function(){if(toggle.button){if(!toggle.isCut){p.set("html",cutText);toggle.button.innerHTML=this.options.toggleText[0];}toggle.button[(!toggle.isCut?"add":"remove")+"Class"]("jsMoreToggled");toggle.button.innerHTML=this.options.toggleText[toggle.isCut?1:0];toggle.isCut=!toggle.isCut;}}.bind(this)});toggle.isCut=false;toggle.start("height",cutTextSize);if(button&&button.toShow){toggle.button=button.removeClass("hide");toggle.button.addEvent("click",this.toggleText.pass([p,fullText,cutText,fullTextSize,cutTextSize,toggle]));
}},this);},toggleText:function(p,fullText,cutText,fullTextSize,cutTextSize,toggle){toggle.start("height",toggle.isCut?fullTextSize:cutTextSize);}});function openHelpSatellite(myUrl,myName,foo,mySize){var width=0;var height=0;var scroll="";if(mySize=="small"){width=391;height=215;scroll="yes";myUrl=myUrl+"&size=small";}else{if(mySize=="medium"){width=391;height=315;scroll="yes";myUrl=myUrl+"&size=medium";}else{if(mySize=="large"){width=410;height=521;scroll="yes";myUrl=myUrl+"&size=large";}else{return false;}}}var win=window.open(myUrl+"&isPopup=true",myName,"menubar=no, toolbar=no, width="+width+", height="+height+", scrollbars="+scroll+", resizable=yes");win.focus();return false;}function hideRegister(){allInputs=new Array();allDivs=new Array();allFieldsets=new Array();var allDocumentDivs=document.getElementsByTagName("div");
for(k=0;k<allDocumentDivs.length;++k){var node=allDocumentDivs[k];var nodeId=node.getAttribute("id");if(nodeId!=null&&nodeId.length>7&&nodeId.substr(0,7)=="linkBox"){var fieldId=nodeId.substr(8,nodeId.length-8);if(fieldId!=null){var selectedBoxValue=eval("document.bookingForm.selectedBoxIndex"+(fieldId-1)+".value");if(selectedBoxValue!=null){fieldsetBoxId=document.getElementById("fieldsetBox_"+fieldId);allInputs[fieldId]=node.getElementsByTagName("input");allDivs[fieldId]=node.getElementsByTagName("div");allFieldsets[fieldId]=fieldsetBoxId.getElementsByTagName("fieldset");for(i=0;i<allDivs[fieldId].length;++i){if(allDivs[fieldId][i].className=="tab"||allDivs[fieldId][i].className=="tab active"){for(j=0;j<allFieldsets[fieldId].length;++j){if(j==selectedBoxValue){allFieldsets[fieldId][j].className="jsShow";
}else{allFieldsets[fieldId][j].className="jsHide";}}for(j=0;j<allDivs[fieldId].length;++j){if(j==selectedBoxValue){allDivs[fieldId][j].className="tab active";}else{allDivs[fieldId][j].className="tab";}}for(j=0;j<allInputs[fieldId].length;++j){allInputs[fieldId][j].onclick=function(){var currentFieldname=this.name;if(currentFieldname.indexOf("Image_")!=-1){currentFieldname=currentFieldname.replace(/Image_/,"_");}inputNameField=currentFieldname.split("_");var selectedBoxIndex=parseInt(inputNameField[1]);var currentFieldsetBoxId=selectedBoxIndex+1;var currentFieldId=inputNameField[2];for(l=0;l<allFieldsets[currentFieldsetBoxId].length;++l){if(allFieldsets[currentFieldsetBoxId][l].className=="jsShow"){allFieldsets[currentFieldsetBoxId][l].className="jsHide";}}for(l=0;l<allDivs[currentFieldsetBoxId].length;
++l){if(allDivs[currentFieldsetBoxId][l].className=="tab"||allDivs[currentFieldsetBoxId][l].className=="tab active"){allDivs[currentFieldsetBoxId][l].className="tab";}}theFieldset=document.getElementById("fieldset_"+currentFieldname);theDiv=document.getElementById("div_"+currentFieldname);theFieldset.className="jsShow";theDiv.className="tab active";allRadios=theFieldset.getElementsByTagName("input");if(allRadios.length>0){if(allRadios[0].type=="radio"){allRadios[0]["checked"]=true;}}if(inputNameField.length==5){eval("document.bookingForm.selectedBoxIndex"+selectedBoxIndex+".value = "+currentFieldId);}return false;};}}}}}}}}function getQueryParam(param){var result=window.location.search.match(new RegExp("(\\?|&)"+param+"(\\[\\])?=([^&]*)"));return result?result[3]:false;}var f1;function pu(el){if(window.CLIENTNAME&&window.CLIENTNAME==="HRSCN"){var href=$(el).getProperty("href"),hotelnumber=getQueryParam("hotelnumber"),windowName="detail"+hotelnumber;
if(window[windowName]){window[windowName].close();}var href=($(el).getProperty("href")||$(el).get("data-href")).replace(/&inCont=1/g,"");if(el.hasClass("print")){window[windowName]=window.open(href,windowName,"width=800, height=660, left=50, top=0, scrollbars=yes, resizable=yes");}else{window[windowName]=window.open(href,windowName);}window[windowName].focus();openedDetails[windowName]=window[windowName];}else{puSized(el,910,658,"detail");}if(el.id){var split=el.id.split("::"),json={};for(var i=1;i<split.length;i+=2){json[split[i]]=split[i+1];}if(!el.hasClass("jsTrackLink")){s_trackLink(split[0],true,json);}}}function puSized(el,width,height,windowName,href){var href=href||$(el).getProperty("href");href=href.replace(/&inCont=1/g,"");href+=href.indexOf("?")>-1?"&":"?";href+="isPopup=true";f1=window.open(href,windowName,"width="+width+", height="+height+", left=50, top=0, scrollbars=yes, resizable=yes");
f1.focus();}var CarRent=new Class({initialize:function(inputs,labels,pics,iframes){iframes[0].setStyle("display","block");var firstWidth=pics[0].getSize().x;labels[0].setStyles({width:firstWidth,height:"33px"});inputs[0].setProperty("checked","checked");var isPic;inputs.each(function(item,index){var thePics=pics[index],theParent=labels[index];function setParentStyle(){theParent.setStyles({width:thePics.getSize().x,height:"33px"});}setParentStyle();thePics.addEvent("load",setParentStyle);if(index>0){thePics.setStyle("top","-33px");}isPic=false;item.addEvents({"click":function(e){this.update(e,item,inputs,pics,iframes,index,isPic);}.bind(this)});},this);pics.each(function(item,index){isPic=true;item.addEvents({"click":function(e){this.update(e,item,inputs,pics,iframes,index,isPic);}.bind(this)});
},this);},update:function(dies,item,inputs,pics,iframes,index,isPic){inputs.removeProperty("checked");if(isPic){inputs[index].setProperty("checked","checked");}pics.setStyle("top","-33px");pics[index].setStyle("top","0");iframes.setStyle("display","none");iframes[index].setStyle("display","block");}});var PseudoSelect=new Class({Implements:[Events,Options],options:{maxWidth:212,maxWidthInput:205,maxHeight:200,maxDescritptionHeight:false,minDescriptionHeight:false,maxDescritptionItems:0,definitionWidth:205,toggle:false,topOffset:1,containerOffset:0,oneEntry:true,showDescriptionLeft:false,onShowOnlyOne:function(list){var span=new Element("span",{"title":list.getElement("dd").innerHTML}).set("html",list.getElement("dt").innerHTML);if(!this.tips){this.tips=new Tips();}this.tips.attach(span);span.replaces(list);
var s=span.getParent().removeClass("hideAbsolute").removeClass("pseudoSelect").getPrevious();if(s){s.dispose();}this.activeListElement=span;this.container=this.list=this.input=null;},useDefaultLabel:false,openEvent:"mousedown",closeEvent:"",openEventSubmenu:"",descriptionByLabel:false,descriptionOffset:25,positioningList:false,listElementsWidthOffset:11,inputHoverClass:"",sameFlexibleHeight:false,inputLayoutEl:false,testClass:false,labelWithLinks:false,initialHighlightClass:"",hightLightInitial:true,selectOnDesscription:false,selectedClass:"on",hoverClass:"on",location:"",useParentForPositioning:false,zIndex:false},initialize:function(list,options){this.setOptions(options);window.generatedId=window.generatedId||0;var childLength=list.getElements("dt, li").length;if(childLength){if(childLength<2&&!this.options.oneEntry){this.fireEvent("onShowOnlyOne",list);
}else{this.update(list);}$(document.body).addEvent("mouseup",function(event){this.blurListElement(event);}.bind(this));}else{if(this.options.useDefaultLabel){list.getParent().getPrevious().addClass("inactive");}}if(Browser.ie6&&this.container){this.iframe=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''",styles:{"filter":"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)",position:"absolute",top:0,left:-300}});this.iframe.setStyles({"width":this.container.getSize().x*2>600?this.container.getSize().x:600,"height":this.container.getSize().y>400?this.container.getSize().y:400});this.iframe.inject(this.container,"top");}},update:function(list){if(!this.list){this.list=list.addEvents({"keydown":function(e){this.scroll(e);}.bind(this)}).setProperties({"tabindex":-1,"role":"listbox","aria-expanded":false,"id":list.id||"genId_"+window.generatedId}).setStyles({"height":this.options.maxHeight||"auto","width":this.options.maxWidth});
}if(!this.container){this.container=list.getParent().addClass("hideAbsolute").addClass("pseudoSelect");this.container.setStyle("left",-1000);}if(!this.input){this.input=(this.options.useDefaultLabel?this.list.getParent().getPrevious():new Element("span").set("html","<span></span>").inject(this.list.getParent(),"before")).addClass("input").setStyle("width",this.options.maxWidthInput).setProperties({"tabindex":-1,"role":"textbox"});if(!this.options.useDefaultLabel){var hasBorderradius=["","Moz","moz","webkit"].some(function(s){return document.body.style[s+"BorderRadius"]!==undefined;});if(!hasBorderradius){["tl","tr","br","bl"].each(function(typ){(new Element("span",{"class":typ+"Corner"})).inject(this.input);},this);}}if(this.options.closeEvent){this.input.addEvent(this.options.openEvent,function(event){if(!this.input.hasClass("over")){this.openList(event);
}}.bind(this));this.container.addEvent(this.options.openEventSubmenu||this.options.openEvent,function(){if(this.timer){clearTimeout(this.timer);}}.bind(this));this.input.addEvent(this.options.closeEvent,function(){this.timer=setTimeout(this.closeList.bind(this),200);}.bind(this));this.container.addEvent(this.options.closeEvent,function(event){this.closeList(event);}.bind(this));}else{this.input.addEvent(this.options.openEvent,function(event){this.toggleList(event);}.bind(this));}if(this.options.inputLayoutEl){this.le=new Element("span",{"class":"lE"}).inject(this.input);}if(this.options.testClass){this.input.addClass("active");}}this.hasDescription=list.get("tag")==="dl";var listElements=list.getChildren();if(this.hasDescription){var maxRightPoint=this.input.getPosition().x+this.options.maxWidth+this.options.definitionWidth,maxWidth=Browser.ie?Math.min(window.getSize().x,$("wrap").getSize().x):window.getSize().x;
if(maxRightPoint>maxWidth){this.options.showDescriptionLeft=true;}this.list[(this.options.showDescriptionLeft?"add":"remove")+"Class"]("showDescriptionLeft");if(this.options.showDescriptionLeft){this.list.addClass("showDescriptionLeft");}listElements=listElements.filter(function(element){return element.get("tag")==="dt";});}this.moreOffers=[];listElements.each(function(listElement,cnt){this.initializeListElements(listElement,cnt,listElements);},this);if(this.activeListElement&&this.options.useDefaultLabel){this.activeListElement=null;}if(this.activeListElement&&this.activeListElement.hasClass("nonTopOffer")){this.toggleState=false;this.toggleOther(null,this.activeListElement);}if(this.activeListElement){this.activeDescription=this.activeListElement.getNext();}this.setLabeltext();if(!isNaN(this.options.maxWidthInput)){this.input.setStyle("width",Math.min(this.options.maxWidthInput,this.input.getSize().x));
}window.generatedId++;if(this.options.sameFlexibleHeight){var lastListElement=listElements[listElements.length-1];this.listHeight=lastListElement.offsetTop+lastListElement.getSize().y;}},initializeListElements:function(listElement,cnt,listElements){if(listElements.length-1===cnt&&!this.selectedListElement&&this.options.location!=="hotellist"){this.list.setProperty("aria-activedescendant",listElements[0].id);this.activeListElement=this.selectedListElement=listElements[0].setProperty("aria-checked",true).addClass(this.options.initialHighlightClass);}if(listElement.getElement("input").checked){this.list.setProperty("aria-activedescendant",listElement.id);this.activeListElement=this.selectedListElement=listElement.setProperty("aria-checked",true).addClass(this.options.initialHighlightClass);}this.setListElementsProperties(listElement,true);
if(this.options.toggle&&(cnt+1>this.options.toggle.size||listElement.hasClass(this.options.toggle.hideClass))){if(this.moreOffers.length===0){var moreOffersHeadline=(new Element(listElement.get("tag"),{"class":"moreOffers"+(this.toggleState?"":" hideAbsolute")}).set("html","<label>"+this.options.toggle.separator+"</label>").inject(listElement,"before"));new Element("dd",{"class":"hideAbsolute"}).set("html",this.options.toggle.separatorText).inject(listElement,"before");this.moreOffers.push(this.setListElementsProperties(moreOffersHeadline));if(!this.moreToggler){this.moreToggler=new Element("span",{"class":(this.toggleState?"":"active ")+"displayMore"}).set("html","<span>"+this.options.toggle[(this.toggleState?"hide":"show")+"More"]+"</span>").addEvent("click",function(event){this.toggleOther(event);
}.bind(this)).inject(this.container,"inside");this.list.setStyle("height",this.options.maxHeight?this.options.maxHeight-20:"auto");}}this.moreOffers.push(listElement.addClass(this.toggleState?"":"hideAbsolute"));}},setListElementsProperties:function(listElement,mouseDown){console.log("setListElementsProperties");listElement.setStyle("width",this.options.maxWidth-this.options.listElementsWidthOffset).removeEvents().addEvent("mouseenter",this.setActive.bind(this,listElement));if(!this.options.selectOnDesscription&&mouseDown){listElement.addEvent("click",function(e){this.setSelected(e,listElement);}.bind(this));}if(Browser.ie6){var label=listElement.getElement("label");if(label){label.setStyle("width",this.options.maxWidth-this.options.listElementsWidthOffset-label.getStyle("padding-left").toInt());
}}if(this.hasDescription){var next=listElement.getNext();if(next&&next.get("tag")==="dd"){var li=next.getElements("li")[this.options.maxDescritptionItems],overSizedDescription=li?true:this.options.maxDescritptionHeight&&next.getSize().y>this.options.maxDescritptionHeight;next.addClass("hideAbsolute").setStyles({overflowY:this.options.maxHeight||overSizedDescription?"scroll":"visible",overflowX:this.options.maxHeight||overSizedDescription?"hidden":"visible",left:this.options.showDescriptionLeft?-this.options.definitionWidth-this.options.descriptionOffset:this.options.maxWidth,width:this.options.definitionWidth});if(li){this.options.maxDescritptionHeight=li.offsetTop+li.offsetHeight;}if(this.options.selectOnDesscription){next.getElements("li").each(function(li){li.addEvent("click",function(e){this.setSelected(e,li);
}.bind(this));},this);}next.setStyle("height",(overSizedDescription&&this.options.maxDescritptionHeight>=0)?this.options.maxDescritptionHeight:"");}else{listElement.addClass("noDescription");if(this.options.selectOnDesscription){listElement.addEvent("click",function(event){this.setSelected(event,listElement);}.bind(this));}}}return listElement;},blurListElement:function(event){if(this.container){var target=event.target,parentContainer=this.container.getParent();if(parentContainer&&!(target!==parentContainer&&parentContainer.contains(target))){this.closeList("setActive");}}},toggleList:function(event){console.log("toggleList");event.stop();this[(this.container.hasClass("hideAbsolute")?"open":"close")+"List"]();},openList:function(){$$(".loh_contentNav").addClass("over");this.list.setProperty("aria-expanded",true);
if(this.activeListElement){this.setActive(this.activeListElement);}else{}this.container.setStyle("left","");if(this.options.zIndex){this.container.setStyle("z-index",this.options.zIndex);}var height=this.options.maxHeight||"auto",offsetY=this.input.getPosition().y,windowSize=window.getSize(),measureElement=this.options.useParentForPositioning?this.input.getParent():this.input;windowScroll=window.getScroll();if(this.options.positioningList){var maxWidth=windowSize.x,testPosition=measureElement.getPosition().x+this.options.maxWidth;if(Browser.ie&&maxWidth>$("wrap").getSize().x){maxWidth=$("wrap").getSize().x,testPosition-=$("wrap").offsetLeft;}if(testPosition>maxWidth){var leftX=maxWidth-this.options.maxWidth-$(this.container.offsetParent).getPosition().x-10+$("wrap").getPosition().x;}else{var leftX=measureElement.offsetLeft;
}this.container.setStyles({top:measureElement.getSize().y+measureElement.offsetTop+(this.options.listOffsetTop?this.options.listOffsetTop:0),left:leftX+(this.options.listOffsetLeft?this.options.listOffsetLeft:0)});}if(windowSize.y+windowScroll.y<offsetY+height+this.input.getSize().y+this.options.containerOffset){this.container.setStyle("top",offsetY-height-this.options.topOffset);}else{if(!this.options.positioningList){this.container.setStyle("top","");}}this.container.removeClass("hideAbsolute");this.input.addClass(this.options.inputHoverClass);if(this.options.location=="hotellist"){this.container.getParent().addClass(this.options.inputHoverClass);}},closeList:function(setActive){if(!setActive){$$(".loh_contentNav").removeClass("over");}this.container.addClass("hideAbsolute");this.list.setProperty("aria-expanded",false);
this.input.removeClass(this.options.inputHoverClass);if(this.options.location=="hotellist"){this.container.getParent().removeClass(this.options.inputHoverClass);}if(this.options.useDefaultLabel&&this.activeListElement){this.activeListElement.removeClass(this.options.hoverClass).removeClass(this.options.selectedClass);this.activeListElement=null;if(this.activeDescription){this.activeDescription.addClass("hideAbsolute");}this.activeListElement=null;}},setActive:function(listElement,dontHightlight){if(this.activeListElement){this.activeListElement.removeClass(this.options.hoverClass).removeClass(this.options.selectedClass);}this.activeListElement=listElement.addClass(this.options.hoverClass).addClass(dontHightlight?"":this.options.selectedClass);if(this.hasDescription){if(this.activeDescription&&this.activeDescription.get("tag")==="dd"){this.activeDescription.addClass("hideAbsolute");
}var next=listElement.getNext();if(next&&next.get("tag")==="dd"){this.activeDescription=next.removeClass("hideAbsolute");if(this.options.sameFlexibleHeight){this.options.maxHeight=this.listHeight;}if(!next.retrieve("hasMinSizeTested")&&this.options.minDescriptionHeight){var listHeight=this.container.getSize().y;next.setStyles({"height":listHeight>next.getSize().y?listHeight-(Browser.ie?-8:9):"",overflow:""}).store("hasMinSizeTested",true);}if(!next.retrieve("hasSizeTested")&&this.options.maxHeight){next.setStyle("overflow-y",(next.getSize().y>this.options.maxHeight?"scroll":"")).setStyle("height",this.options.maxHeight-(Browser.ie?6:5)).store("hasSizeTested",true);}if(!next.retrieve("hasSizeTested")&&this.options.maxDescritptionHeight){if(next.getSize().y>this.options.maxDescritptionHeight){next.setStyle("overflow-y","scroll").setStyle("height",this.options.maxDescritptionHeight-next.getStyle("padding-top").toInt()-next.getStyle("padding-bottom").toInt());
}next.store("hasSizeTested",true);}if(this.options.descriptionByLabel){next.setStyle("top",listElement.offsetTop);}}}if(!Browser.ie&&!Browser.opera){listElement.focus();}},setSelected:function(event,listElement){if(this.selectedListElement!==listElement){if(this.selectedListElement){this.selectedListElement.setProperty("aria-checked",false).removeClass(this.options.selectedClass).removeClass(this.options.hoverClass);}this.selectedListElement=listElement.setProperty("aria-checked",true).addClass(this.options.selectedClass).addClass(this.options.hoverClass);this.setLabeltext();this.list.setProperty("aria-activedescendant",listElement.id);this.fireEvent("onSelected",[listElement,this.hasDescription]);}else{if(event){event.stop();}this.closeList();if(this.selectedListElement){this.selectedListElement.setProperty("aria-checked",false).removeClass(this.options.selectedClass).removeClass(this.options.hoverClass);
}this.setLabeltext();this.list.setProperty("aria-activedescendant",listElement.id);this.fireEvent("onSelected",[listElement,this.hasDescription]);}if(!this.options.labelWithLinks){this.closeList();if(event){event.stop();}}},setLabeltext:function(){if(!this.options.useDefaultLabel){var label=this.selectedListElement.getElement("label");if(label){var elem=new Element("span").set("text",label.get("text")).replaces(this.input.getFirst());elem.className=label.className||"";var width=Math.min(this.options.maxWidthInput-25,label.getSize().x-label.getStyle("padding-left").toInt()-21);elem.setStyle("width",width>0?width:this.options.maxWidthInput-25);}}},scroll:function(event){var step=event.wheel||(event.key==="up"?-1:(event.key==="down"?1:false));if(step){var direction="get"+(step===1?"Next":"Previous");
var listElement=this.activeListElement[direction]();if(listElement){if(this.hasDescription){listElement=listElement[direction]();}if(listElement){this.setActive(listElement);}}}else{if(event.key==="enter"){this.setSelected(this.activeListElement);}}},toggleOther:function(event,scrollTo){if(event){event.stop();}this.list[(this.toggleState?"remove":"add")+"Class"]("expanded");this.moreToggler.set("html",'<span class="'+(this.toggleState?"":"active")+'">'+this.options.toggle[(this.toggleState?"show":"hide")+"More"]+"</span>");this.toggleState=!this.toggleState;$$(this.moreOffers)[(this.toggleState?"remove":"add")+"Class"]("hideAbsolute");if(!this.fxScroll){this.fxScroll=new Fx.Scroll(this.list);}if(this.toggleState){if(!scrollTo){scrollTo=this.moreOffers[0];this.setActive(scrollTo);for(var i=0;
i<4;i++){var next=scrollTo.getPrevious();if(next){scrollTo=next;}}}this.fxScroll.toElement(scrollTo);}}});var Hsv3Basket=new Class({Implements:Options,options:{},initialize:function(table,options){this.setOptions(options);this.table=table;this.changedTooltips=[];this.pseudoSelects={};table.getElements("td.board").each(function(td){var childs=td.getChildren();if(childs.length===2&&childs[1].get("tag")==="span"){this.addTooltip(childs[0],childs[1].innerHTML);childs[1].dispose();}},this);table.getElements("tbody tr").each(function(tr){var dl=tr.getElement("dl.offers");if(dl){var p=new PseudoSelect(dl,{onSelected:this.selectOffer.bind(this),toggle:this.options.toggle,topOffset:Browser.ie6?100:6,containerOffset:Browser.ie?85:0,oneEntry:false,definitionWidth:212});tr.store("selectedOffer",p.activeListElement.getElement("input").id);
this.pseudoSelects[tr.id+"offer"]=p;}dl=tr.getElement("td.board dl");if(dl){this.pseudoSelects[tr.id+"board"]=new PseudoSelect(dl,{onSelected:this.selectSupplement.bind(this),maxWidthInput:110,maxWidth:190,maxHeight:150,definitionWidth:210,topOffset:Browser.ie6?100:6,containerOffset:Browser.ie?85:0});}},this);table.getElements("a.contextHelpFake").each(function(a){a.addEvent("click",function(e){this.fakeOpenHelp(e,a);}.bind(this));},this);table.getElements("a.hotdeal").each(function(a){a.addEvent("click",function(event){event.stop();$(event.target.getProperty("href").replace(/#/,"")).fireEvent("click");});},this);var ths=$(table.rows[0]).getElements("th");if(!this.options.isInLayer){this.help=new ContextSensitiveHelp($("content").getElements("a.contextHelp"),{firstDirection:"right",toggle:true,container:$("wrap").hasClass("hoteldetail")?null:null,onPosition:function(){var h4=this.toolTip.getElement("h4");
h4.setStyle("width",h4.getParent().getSize().x-(Browser.ie6?46:20));this.toolTip.getElement("a.close").style.position="absolute";},maxWidth:385});}if($("jsContentForm")||$("editableBasketLightBox")){var basketContainer=$("jsContentForm")||$("editableBasketLightBox");basketContainer.addEvent("click",function(e){this.selectDiscount(e);}.bind(this));}},selectOffer:function(listElement){var tr=listElement.getParent().getParent().getParent().getParent();tr.store("selectedOffer",listElement.getElement("input").id);if(this.options.isInLayer){BasketLayerViewReloader.selectOffer("booking",tr.retrieve("selectedOffer"),tr.id,this.updateBasket.bind(this));}else{BasketViewReloader.selectOffer("booking",tr.retrieve("selectedOffer"),tr.id,this.updateBasket.bind(this));this.help.hide();}},selectSupplement:function(listElement){var tr=listElement.getParent().getParent().getParent().getParent();
if(this.options.isInLayer){BasketLayerViewReloader.selectSupplement("booking",tr.retrieve("selectedOffer"),tr.id,listElement.getElement("input").id,this.updateBasket.bind(this));}else{BasketViewReloader.selectSupplement("booking",tr.retrieve("selectedOffer"),tr.id,listElement.getElement("input").id,this.updateBasket.bind(this));this.help.hide();}},selectDiscount:function(event){var target=$(event.target);if(target.type==="checkbox"||target.type==="radio"){var tr=target.getParent().getParent().getParent();if(tr.get("tag")==="tr"){if(this.options.isInLayer){BasketLayerViewReloader.selectSupplement("booking",tr.retrieve("selectedOffer"),tr.id,target.id,this.updateBasket.bind(this));}else{BasketViewReloader.selectSupplement("booking",tr.retrieve("selectedOffer"),tr.id,target.id,this.updateBasket.bind(this));
this.help.hide();}}}},changeCurrency:function(event){BasketLayerViewReloader.convertCurrency("booking",event.target.value,this.updateBasket.bind(this));if(!this.options.isInLayer){this.help.hide();}},resetBasket:function(){BasketLayerViewReloader.resetBasketLayer("booking",this.updateBasket.bind(this));},updateBasket:function(json){for(var i in json){if(json[i]!=null){var funktion="set"+i.capitalize();if(this[funktion]){this[funktion](json[i]);}else{this.setText("."+i,this.table.getElement("tfoot"),json[i]);}}}},setRooms:function(rooms){for(var i in rooms){var room=rooms[i],tr=$(i);for(var j in room){if(room[j]!=null){var funktion="set"+j.capitalize();if(this[funktion]){this[funktion](tr,room[j]);}else{this.setText("."+j,tr,room[j]);}}}}},setOffers:function(tr,offers){var dl=tr.getElement("dl.offers")||new Element("dl",{"class":"offers"}).replaces(tr.getElement("div.offersWrap span")),innerHTML="";
offers.each(function(offer){innerHTML+="<dt"+(offer.topOffer?"":' class="'+this.options.toggle.hideClass+'"')+"><label "+(offer.labelClass?' class=" '+offer.labelClass+'"':"")+">"+offer.label;innerHTML+='<input id="'+offer.offerId+'" type="radio"'+(offer.selected?'checked="checked"':"")+"/></label></dt>";innerHTML+="<dd><p><strong>"+(offer.price.averagePrice?this.options.properties.averagePrice:this.options.properties.price)+": "+this.formatPrice(offer.price)+"</strong></p>";if(offer.offerDealName){innerHTML+="<p><strong>"+offer.offerDealName+":</strong> "+offer.offerDealDescription+"</p>";}innerHTML+="<p><strong>"+this.options.properties.roomCategory+" </strong>"+offer.roomCategoryName+"<br/>";innerHTML+=(offer.offerPackageName?"<br/><strong>"+offer.offerPackageName+"</strong><br/>":"")+offer.description+"</p></dd>";
},this);dl.innerHTML=innerHTML;if(offers.length>1){this.pseudoSelects[tr.id+"offer"].update(dl);}else{this.pseudoSelects[tr.id+"offer"].fireEvent("onShowOnlyOne",dl);}},setConditions:function(tr,conditions){var innerHTML="<h4>"+this.options.properties.bookingConditions+"</h4>",length=conditions.length-1,className=conditions.specialCancelationConditions.length?" notLast":"";var order=["minimumStayConditions","bookingType","restrictedOfferSelectedConditions","cancelationConditions","paymentConditions","additionalBookingConditions","specialCancelationConditions"];for(var i=0;i<order.length;i++){var condition=conditions[order[i]];if(condition&&condition.length){if(typeOf(condition)!="string"){innerHTML+="<h5>"+this.options.properties[order[i]]+'</h5><ul class="'+className+'">';for(var j=0,l=condition.length;
j<l;j++){innerHTML+="<li>"+condition[j]+"</li>";}innerHTML+="</ul>";className="";}else{innerHTML+="<p>"+condition+"</p>";}}}var link=tr.getNext().getElement("td.conditions a");link.store("tooltipText",innerHTML);var next=tr.getNext(),hotDealRow=next.getNext(),restrictionLink=next.getElement("a.contextHelp");if(conditions.hotDealOfferTooltip&&(!hotDealRow||!hotDealRow.hasClass("hotDealRow"))){hotDealRow=new Element("tr").inject(next,"after").addClass("hotDealRow");new Element("td").inject(hotDealRow,"inside").addClass("roomNr");new Element("td").inject(hotDealRow,"inside");new Element("td").inject(hotDealRow,"inside").setProperty("colspan",tr.cells.length-2).set("html",'<a class="hotdeal link" href="#'+restrictionLink.id+'">'+this.options.properties.hotdealHint+"</a>");this.addTooltip(hotDealRow.getElement("a"),conditions.hotDealOfferTooltip);
hotDealRow.getElement("a").addEvent("click",function(event){event.stop();restrictionLink.fireEvent("click");});}else{if(!conditions.hotDealOfferTooltip&&hotDealRow&&hotDealRow.hasClass("hotDealRow")){hotDealRow.dispose();}}},setPricesPerDay:function(tr,days){days.each(function(day,cnt){this.setText(".day"+cnt,tr,day);},this);},setPriceDetails:function(tr,priceDetails){var innerHTML="<h4>"+priceDetails.header+"</h4>";["rate","room","tax"].each(function(type){var description=type+"Description";if(priceDetails[description]){innerHTML+='<h5 id="'+description+'">'+this.options.properties[description]+"</h5><p>"+priceDetails[description]+"</p>";}},this);innerHTML+='<table class="data" cellspacing="0"><colgroup><col width="140"/><col/><col/></colgroup><thead><tr><th>'+this.options.properties.period+"</th><th>"+this.options.properties.board+'</th><th class="price">';
innerHTML+=this.options.properties.price+"</th></tr></thead><tfoot>";if(priceDetails.roomNetPrice.defCur){innerHTML+='<tr class="priceWithoutTax"><td colspan="2">'+this.options.properties.roomPrice+"<br/><span>"+this.options.properties.withoutTax+'</span>:</td><td class="price">'+this.formatPrice(priceDetails.roomNetPrice)+"</td></tr>";}innerHTML+='<tr><td colspan="2">'+this.options.properties.roomPrice+(priceDetails.roomNetPrice.defCur?("<br/><span>"+this.options.properties.withTax+"</span>"):"")+':</td><td class="price">'+this.formatPrice(priceDetails.roomGrossPrice)+"</td></tr></tfoot><tbody>";priceDetails.priceDetailsPerDay.each(function(day){innerHTML+="<tr><td>"+day.period+"</td>"+"<td><span>"+day.board;if(day.boardDescription){innerHTML+='</span><span class="layerTooltip">'+day.boardDescription;
}innerHTML+="</span></td>"+'<td class="price">'+this.formatPrice(day.price)+"</td></tr>";if(day.detailInfo){innerHTML+='<tr><td colspan="3" class="noBorder">'+day.detailInfo+"</td></tr>";}},this);if(priceDetails.beforeAndAfterPriceDetailsPerDay.length){innerHTML+='<tr><td colspan="3">'+this.options.properties.beforeAndAfterPriceDetailsPerDay+"</td></tr>";priceDetails.beforeAndAfterPriceDetailsPerDay.each(function(day){innerHTML+="<tr><td>"+day.period+"</td>"+"<td><span>"+day.board;if(day.boardDescription){innerHTML+='</span><span class="layerTooltip">'+day.boardDescription;}innerHTML+="</span></td>"+'<td class="price">'+this.formatPrice(day.price)+"</td></tr>";if(day.detailInfo){innerHTML+='<tr><td colspan="3" class="noBorder">'+day.detailInfo+"</td></tr>";}},this);}priceDetails.discounts.each(function(discount){innerHTML+='<tr><td colspan="2">'+discount.label+"</td>"+'<td class="price">'+this.formatPrice(discount.price)+"</td></tr>";
},this);innerHTML+="</tbody></table>";if(priceDetails.rateDescription||priceDetails.roomDescription){innerHTML+=this.options.properties.noticeTaxes;}var link=tr.getNext().getElement("td.periods a");link[(priceDetails.visible?"remove":"add")+"Class"]("hide");link.store("tooltipText",innerHTML);},setDiscounts:function(tr,discounts){$$(".tool-tip").setStyle("visibility","hidden");var td=tr.getElement("td.discounts");if(td){td.empty();if(discounts.length>0){discounts.each(function(discount){var input=new Element("input",{"type":discounts.length===1?"checkbox":"radio","id":discount.supplementId,"name":"discount_"+tr.id});var label=new Element("label").set("html",'<span class="tooltip">'+discount.label+"</span>").inject(td,"inside");input.inject(label,"top");input.checked=discount.selected;this.addTooltip(label,discount.priceInfo);
},this);}else{td.innerHTML="&nbsp";}}},setBoardOptions:function(tr,options){var board=tr.getElement("td.board"),list=board.getElement("dl"),pseudoSelect=this.pseudoSelects[tr.id+"board"];if(options.length>1){var innerHTML="";options.each(function(option){innerHTML+="<dt><label>"+option.label+'<input type="radio" id="'+option.supplementId+'" name="" '+(option.selected?'checked="checked"':"")+" /></label></dt>";innerHTML+="<dd>"+option.description+"<i>"+option.priceInfo+"</i>";innerHTML+="</dd>";},this);if(!list){board.innerHTML='<div class="pseudoSelect hideAbsolute"><dl>'+innerHTML+"</dl></div>";list=board.getElement("dl");}else{list.empty().innerHTML=innerHTML;}if(!pseudoSelect){this.pseudoSelects[tr.id+"board"]=new PseudoSelect(board.getElement("dl"),{"onSelected":this.selectSupplement.bind(this)});
}else{pseudoSelect.update(list);}}else{var option=options[0];board.empty();if(option){if(option.priceDetailsLink){board.innerHTML='<a href="#" id="link priceDetailsBoard_'+tr.id.replace("roomOffer","")+'" class="link contextHelpFake jsTrackLink ">'+option.label+"</a>";board.getElements("a").each(function(a){a.addEvent("click",function(event){this.fakeOpenHelp(event,a);}.bind(this));},this);}else{board.innerHTML="<span>"+option.label+"</span>";}}if(pseudoSelect){["input","list","container"].each(function(v){pseudoSelect[v]=null;});}if(option.showToolTip){this.addTooltip(board.getFirst(),option.description+"<br/>"+option.priceInfo);}}},setRoomPrice:function(tr,price){this.setText(".roomPrice",tr,price);var icon=price.icon;if(icon&&icon.iconToolTip){var rabatt=(new Element("span",{"class":icon.iconClass})).set("html",icon.iconText).inject(tr.getElement(".roomPrice"),"inside");
(new Element("br")).inject(rabatt,"before");this.addTooltip(rabatt,icon.iconToolTip);}},addTooltip:function(el,text){if(!this.tips){this.tips=new Tips();}this.tips.attach(el);el.store("tip:title",text);},setText:function(selector,parentElement,text){if(parentElement){var element=parentElement.getElement(selector);}else{var element=$$(selector);}if(element&&text){text=this.formatPrice(text);if(typeOf(text)!=="object"){text=text||"&nbsp";element.set("html",text);}}else{console.warn("Element:"+selector+" does not exist");}},formatPrice:function(price){if(price.defCur){price=price.defCur+(price.altCur?" <span>("+price.altCur+")</span>":"");}else{if(price.price.defCur){price=(price.freeNight?'<span class="freeNight">':"")+price.price.defCur+(price.price.altCur?" <span>("+price.price.altCur+")</span>":"")+(price.freeNight?"</span>":"");
}}return price;},fakeOpenHelp:function(event,a){event.stop();var arLink=a.id.split("_");if(!this.options.isInLayer){$("priceDetails_"+arLink[1]).fireEvent("click");}else{if(arLink.length>2){$(arLink[1]+"_priceDetails_"+arLink[2]).fireEvent("click");}}}});var PicGallery=new Class({initialize:function(numberOfPics,alles,labels,desc,thePic){var alleUrls=String(alles);var alleUrls=alleUrls.split(",");var alleLabels=labels.split(",");var theSource=thePic.src;var theSrc=String(theSource);var thisIndex=alleUrls.indexOf(theSrc);if(thisIndex==0){$("prev").setStyles({"opacity":".5","cursor":"default"});}$("next").addEvent("click",function(event){event.stop();if(thisIndex<numberOfPics-1){thePic.setProperty("src",alleUrls[thisIndex+1]);desc.empty();var thisLabel=alleLabels[thisIndex+1];var thisLabel=thisLabel.replace(/&nbsp;/g,"");
desc.appendText(thisLabel);thisIndex=Math.min(numberOfPics,thisIndex+1);}if(thisIndex==numberOfPics-1){$("next").setStyles({"opacity":".5","cursor":"default"});}if(thisIndex==1){$("prev").setStyles({"opacity":"1","cursor":"pointer"});}});$("prev").addEvent("click",function(event){event.stop();if(thisIndex>0){thePic.setProperty("src",alleUrls[thisIndex-1]);desc.empty();var thisLabel=alleLabels[thisIndex-1];var thisLabel=thisLabel.replace(/&nbsp;/g,"");desc.appendText(thisLabel);thisIndex=Math.min(numberOfPics,thisIndex-1);$("next").setStyles({"opacity":"1","cursor":"pointer"});}if(thisIndex==0){$("prev").setStyles({"opacity":".5","cursor":"default"});}});}});var PressEnter=new Class({initialize:function(){var sendFormEl=new Element("input",{"type":"submit","name":"availability","styles":{"top":"-1000px","position":"absolute"}}).inject($("contentNav"),"top");
}});var PreventSenselessCombinations=new Class({options:{combinations:[["wishes.nonSmokingRoom","wishes.smokingRoom"],["wishes.kingSize","wishes.separatedBeds"],["wishes.doubleBeds","wishes.separatedBeds"]]},initialize:function(fieldsets){fieldsets.each(function(fieldset,cnt){fieldset.getElements("input").addEvent("click",function(event){this.checkSense(event,cnt);}.bind(this)).each(function(input){input.initialDisabled=input.disabled;});},this);},checkSense:function(event,cnt){var input=$(event.target),checked=input.checked,id=input.id.split("_")[0];this.options.combinations.each(function(combination){var comb=this.findCombination(combination,id);if(comb){if(!checked){var checked=this.options.combinations.some(function(combination){var combTemp=this.findCombination(combination,comb),input=$(combTemp+"_"+cnt)||$(combTemp);
return input?input.checked:false;},this);}var input=$(comb+"_"+cnt)||$(comb);if(!input.initialDisabled){input.setStyle("opacity",checked?0.6:1).disabled=checked?"disabled":"";input.getParent().setStyle("color",checked?"#c8c8c8":"");}}},this);},findCombination:function(combination,id){var index=combination.indexOf(id);return index>-1?combination[index?0:1]:"";}});var VideoPlaylist=new Class({Implements:Options,initialize:function(options){this.setOptions(options);this.options.videoInfo=$$(".videoInfo")[0].getElement("span.left");this.options.videoCountEl=this.options.videoInfo.getElement("strong");this.options.lastCallEl=this.options.videoInfo.getElement("span");this.loadVideo(this.options.playlistEl[0],0);this.options.playlistEl.each(function(item,cnt){item.addEvent("click",function(event){event.stop();
this.loadVideo(item,cnt);}.bind(this));if((Browser.ie6||Browser.ie7)&&item.hasClass("externVideo")){item.addEvents({"mouseenter":function(event){event.stop();item.addClass("jsHover");},"mouseleave":function(event){event.stop();item.removeClass("jsHover");}});}if(!item.hasClass("externVideo")){item.addEvents({"mouseenter":function(event){event.stop();this.options.counter=1;this.options.preview=this.showVideoPreview.periodical(500,this,[item,false]);this.options.preview;if(Browser.ie6||Browser.ie7){item.addClass("jsHover");}}.bind(this),"mouseleave":function(event){event.stop();clearInterval(this.options.preview);this.showVideoPreview(item,true);if(Browser.ie6||Browser.ie7){item.removeClass("jsHover");}}.bind(this)});}}.bind(this));$("questionableContent").addEvent("click",s_trackMediaLink.pass("reportcritical"));
},showVideoPreview:function(item,showFirstImage){item=item.getElements("a")[1];var url=item.getStyle("background-image");url=url.slice(url.indexOf("http"),url.lastIndexOf("playlist_")+9);this.options.counter=(this.options.counter>=item.getProperty("rel")||showFirstImage?1:this.options.counter+1);item.setStyle("background-image","url("+url+this.options.counter+".jpg)");},loadVideo:function(item,cnt){if(window.questionableContent){window.questionableContent.hide();}if($("externVideoIframe")){$("externVideoIframe").dispose();$("hrsVideoplayerInnerWrap").removeClass("hide");}s_trackMedia(this.options.mediaTrackingData[item.id],"playlist_"+(cnt+1));if(item.hasClass("externVideo")){var url=item.getElement("a").href,iframe=new Element("iframe",{"src":url,"border":0,"frameborder":0,"id":"externVideoIframe","styles":{"width":640,"height":422}});
iframe.inject($("hrsVideoplayerWrap"),"inside");$("hrsVideoplayerInnerWrap").addClass("hide");s_trackMediaStart(0);}else{flashVars.filmId=item.id.replace("videoId_","");embedPlayer();}this.setCriticalContent(flashVars.filmId,item.getProperty("rel"));item.getElement(".videoPlayerViewCount")?this.setVideoCounts(item.getElement(".videoPlayerViewCount").innerHTML.split("_")):"";},setVideoCounts:function(viewCount){this.options.videoCountEl.getParent()[(viewCount[1]==""?"add":"remove")+"Class"]("hide");this.options.videoCountEl.innerHTML=viewCount[0];this.options.lastCallEl.innerHTML=viewCount[1];},setCriticalContent:function(id,name){$("questionableContent").href=$("questionableContent").href.slice(0,$("questionableContent").href.indexOf("&videoId"))+"&videoId="+id+"&videoName="+name;}});var SendSms=new Class({Implements:Options,initialize:function(options){this.setOptions(options);
var form=$("sendSmsForm"),submitButton=form.getElement("input[type=submit]"),countryCode=form.getElement("#countryCode"),phoneNumber=form.getElement("#phoneNumber"),captcha=form.getElement("#captcha");form.added=true;form.addEvent("submit",function(event){this.submit(event,countryCode,phoneNumber,captcha,submitButton,form);}.bind(this));},submit:function(event,countryCode,phoneNumber,captcha,submitButton,form){event.stop();if(this.help){this.help.hide();}this.countryCode=countryCode;this.phoneNumber=phoneNumber;this.captcha=captcha;this.submitButton=submitButton;this.form=form;var test=this.form.getElements("span.error");if(test.length>0){for(var i=0,l=test.length;i<l;i++){var el=test[i];el.getPrevious().removeClass("error");el.dispose();}}MessageSending.sendPushSms(this.countryCode.value,this.phoneNumber.value,this.captcha.value,true,this.response.bind(this));
},response:function(response){if(response.messageSendingSuccessful){this.createLayer(response);if(s_trackLink&&response.linkTrackingData){s_trackLink(response.linkTrackingData.name,true,response.linkTrackingData.vars);}}else{for(var i in this.options){if(response[i]){switch(i){case"messageErrorCaptchaEmpty":this.createErrorMsg(this.captcha,this.options[i]);break;case"messageErrorCaptchaNotValid":this.createErrorMsg(this.captcha,this.options[i]);break;case"messageErrorCountryCodeEmpty":this.createErrorMsg(this.countryCode,this.options[i]);break;case"messageErrorCountryCodeNotValid":this.createErrorMsg(this.countryCode,this.options[i]);break;case"messageErrorNumberEmpty":this.createErrorMsg(this.phoneNumber,this.options[i]);break;case"messageErrorNumberNotValid":this.createErrorMsg(this.phoneNumber,this.options[i]);
break;case"messageSendingError":this.createLayer(response);break;default:}}}}this.captcha.value="";loadCaptcha();},createErrorMsg:function(el,txt){el.addClass("error");var errorEl=new Element("span",{"class":"error"});errorEl.set("text",txt).inject(el,"after");},createLayer:function(response){if(!this.help){this.help=new ContextSensitiveHelp([],{maxWidth:300,firstDirection:"top",closeText:this.options.windowClose});}this.help.toolTip[(response.messageSendingSuccessful?"add":"remove")+"Class"]("successLayer");this.help.toolTip[(response.messageSendingError?"add":"remove")+"Class"]("errorLayer");this.submitButton.store("tooltipText",this.options[(response.messageSendingError?"messageSendingError":"messageSendingSuccessful")]);this.help.start(this.submitButton);this.help.position(this.submitButton);
this.countryCode.value=-1;this.phoneNumber.value="";}});var CopyValue=new Class({Implements:Options,options:{copyOnce:false,validateIfPossible:false,liveValidator:undefined},initialize:function(originals,copies,options){this.setOptions(options);originals.each(function(original,cnt){var copyField=copies[cnt],boundFunction;if(original.tagName.toLowerCase()==="select"){boundFunction=function(){this.copy(copyField,original,true);if(this.options.copyOnce){original.removeEvent("change",boundFunction);}}.bind(this);original.addEvent("change",boundFunction);}else{boundFunction=function(){this.copy(copyField,original);if(this.options.copyOnce&&original.value.length){original.removeEvent("blur",boundFunction);}}.bind(this);original.addEvent("blur",boundFunction);}},this);},copy:function(copyField,original,isSelect){if(copyField&&original){if(copyField&&!original.hasClass("preDefined")){copyField.removeClass("preDefined");
}if(!isSelect){copyField.value=original.value;}else{Array.from(copyField.options).each(function(option,index){if(option.value===original.value){copyField.selectedIndex=index;}});}if(this.options.validateIfPossible&&copyField.hasClass("validate")){if(this.options.liveValidator){this.options.liveValidator.validate({target:copyField});}}}}});var PreDefinedInput=new Class({Implements:Options,options:{isID:false,hasText:true},initialize:function(els,txt,options){this.setOptions(options);this.preDefText=txt;if(els){if(this.options.isID){if(els.value==""||els.value==txt){if(this.options.hasText){els.value=txt;}els.addClass("preDefined");}if(Browser.safari||Browser.chrome){this.fixLengthSubmitBug(els,txt);}els.addEvents({"click":function(e){this.changeStyle(e,els);}.bind(this),"focus":function(e){this.changeStyle(e,els);
}.bind(this),"blur":function(e){this.setBack(e,els,txt);}.bind(this)});}else{els.each(function(item){if(item.value==""||item.value==txt){if(this.options.hasText){item.setProperty("value",txt);}item.addClass("preDefined");}if(Browser.safari||Browser.chrome){this.fixLengthSubmitBug(item,txt);}item.addEvents({"click":function(e){this.changeStyle(e,item);}.bind(this),"focus":function(e){this.changeStyle(e,item);}.bind(this),"blur":function(e){this.setBack(e,item,txt);}.bind(this)});},this);}this.els=els;}},fixLengthSubmitBug:function(el,txt){var form=el.form;if(form==null){form=$(el).getParent("form");}if(el.maxLength<txt.length&&form!=null){form.addEvent("click",function(){if(el.value==txt){el.value="";}});}},changeStyle:function(dies,el){if(el.hasClass("preDefined")){el.setProperty("value","");
el.removeClass("preDefined");}},setBack:function(dies,el,txt){if(el.getProperty("value")==""){el.setProperty("value",txt);el.addClass("preDefined");}},clearPreDefForSubmit:function(){if(this.els&&this.options.hasText){if(this.els.length){this.els.each(function(item){if(item.value===this.preDefText){item.value="";}});}else{if(this.els.value===this.preDefText){this.els.value="";}}}}});var AdoptNumbers=new Class({Implements:Options,options:{hasNumb:false},initialize:function(checkbox,el01,el02,pattern01,pattern02,options){if(checkbox){checkbox.removeClass("hide");checkbox.getParent().addClass("check");this.setOptions(options);if(!checkbox.checked){el01.setProperty("disabled","disabled");if(el02){el02.setProperty("disabled","disabled");}}checkbox.addEvents({"click":function(e){this.adoptContent(e,checkbox,el01,el02,pattern01,pattern02);
}.bind(this)});}},adoptContent:function(dies,checkbox,el01,el02,pattern01,pattern02){var isAct;if(this.options.hasNumb){if(pattern02){isAct=(pattern02.value.test(/^\d+$/))?true:false;}else{isAct=(pattern01.value.test(/^\d+$/))?true:false;}}else{isAct=true;}if(checkbox.checked){if(isAct){el01.value=pattern01.value;if(el02){el02.value=pattern02.value;}}el01.removeProperty("disabled","disabled");if(el02){el02.removeProperty("disabled","disabled");}}else{if(el02){el02.value="";}el01.setProperty("disabled","disabled");if(el02){el02.setProperty("disabled","disabled");}}}});ContextSensitiveHelp.Bookmarks=new Class({Extends:ContextSensitiveHelp,start:function(element){this.parent(element);var tooltipDisplayContainer=this.toolTip.getElement("p.addTooltipInfo");this.toolTip.getElements("li a").addEvent("mouseenter",function(){tooltipDisplayContainer.set("text",this.getProperty("alt"));
});var altToolTip=new Tips(this.toolTip.getElements("li a"),{offset:{x:15,y:(typeof $LAB!="undefined"?15:-65)}});}});var InputInfoOverlay=new Class({initialize:function(elements){elements.each(function(item){this.handleOverlay(item,item.getParent().getElement("input"));}.bind(this));},handleOverlay:function(item,input){if(input.value.length===0){item.setStyle("width","30.75em");}item.addEvent("click",function(event){event.stop();input.focus();});input.addEvent("focus",function(e){item.setStyle("width",0);});input.addEvent("blur",function(e){if(input.value.length===0){item.setStyle("width","30.75em");}});}});var ShowHideGuests=new Class({Implements:Options,options:{isFrench:false,langText:""},initialize:function(button,deletePath,deleteText,options){this.setOptions(options);var line=$("guestData").getElement("p");
$("guestData").getElements("input.delete").each(function(item){item.addEvent("click",function(e){this.deleteLine(e,item,button);}.bind(this));}.bind(this));button.addEvent("click",function(event){this.copyLine(event,button,line,deletePath,deleteText);}.bind(this));},copyLine:function(event,button,line,deletePath,deleteText){event.preventDefault();var myCounter=$("guestData").getElements("p").length;if(myCounter==11){button.getParent().getParent().addClass("hide");}var copy=line.clone(true,false);copy.getElements("input[type=text]").each(function(item){item.removeProperty("value");item.setProperty("value","");});copy.inject(button.getParent().getParent(),"before");this.setValues($("guestData").getElements("input[type=text]"));if(this.options.isFrench==true){this.setSpanText($("guestData").getElements("span.desc"),this.options.langText);
}this.setSpans($("guestData").getElements("span.desc span"));this.setSpans($("guestData").getElements("span.desc span"));var bin=new Element("input",{"type":"image","class":"delete","src":deletePath,"title":deleteText}).inject(copy,"bottom");bin.addEvent("click",function(event){this.deleteLine(event,bin,button);}.bind(this));},deleteLine:function(event,item,button){event.preventDefault();button.getParent().getParent().removeClass("hide");item.getParent().getElements("input[type=text]").each(function(item){item.removeProperty("value");item.setProperty("value","");});item.getParent().dispose();this.setSpans($("guestData").getElements("span.desc span"));this.setValues($("guestData").getElements("input[type=text]"));},setSpanText:function(els,newTxt){els.each(function(item,index){if(index>0){item.innerHTML=newTxt;
}});},setSpans:function(els){els.each(function(item,index){item.innerHTML=index+1;});},setValues:function(els){els.each(function(item,index){var wert=Math.floor(index/2),theName=item.getProperty("name");theName=theName.split("[");var theName02=theName[1].split("]");item.setProperty("name",theName[0]+"["+wert+"]"+theName02[1]);item.setProperty("id",theName[0]+"["+wert+"]"+theName02[1]);item.getParent().setProperty("for",theName[0]+"["+wert+"]"+theName02[1]);});}});var HoverIE6=new Class({initialize:function(lis){lis.each(function(item){item.addEvent("mouseenter",function(){item.getElements("a")[1].getElement("img").setStyle("opacity",".001");item.getElements("a")[0].setStyle("text-decoration","underline");});item.addEvent("mouseleave",function(){item.getElements("a")[1].getElement("img").setStyle("opacity","1");
item.getElements("a")[0].setStyle("text-decoration","none");});});}});var Mediacenter=new Class({Extends:ContextSensitiveHelp,cache:{},options:{onHide:function(tip){if(this.show){tip.setStyle("top",-10000000);this.show=false;if(this.hasVideo){this.removeVideo();if(this.activeTab=="video"){s_trackMediaEnd();}}}},directions:["top","bottom","right","left"],firstDirection:"top",maxHeight:360,offset:{top:90},location:"hotellist",showLinksInPopUps:true,showLinks:true},initialize:function(options){this.parent([],options);this.toolTip.setStyle("width",490).addClass("angularly mediathek");this.toolTip.onselectstart=function(){return false;};this.toolTip.style.MozUserSelect="none";if(this.options.showLinksInPopUps&&this.options.showLinks){this.wrapper.innerHTML='<h4></h4><ul class="toggleMenu"><li class="jsTrackLink" id="mt_tab_foto"><span>'+options.photos+'</span></li><li class="act jsTrackLink" id="mt_tab_video"><span>'+options.videos+'</span></li></ul><div class="toggleWrap"><div class="itemWrap" id="fotoContent"><span id="mt_back" class="jsTrackLink"></span><div id="mooFlowWrapper"></div><span id="mt_forward" class="jsTrackLink"></span><p><a class="largerPics link" onclick="pu(this); return false" href="">'+options.linkPhoto+'</a><a class="link" onclick="pu(this); return false" href="">'+options.linkPrice+'</a></p></div><div class="itemWrap act"  id="videoContent"><div id ="mediacenterVideoWrap"></div><p><a class="largerVideo link" onclick="pu(this); return false" href="">'+options.linkVideo+'</a><a class="link" onclick="pu(this); return false" href="">'+options.linkPrice+"</a></p></div></div>";
}else{if(!this.options.showLinksInPopUps&&this.options.showLinks){this.wrapper.innerHTML='<h4></h4><ul class="toggleMenu"><li class="jsTrackLink" id="mt_tab_foto"><span>'+options.photos+'</span></li><li class="act jsTrackLink" id="mt_tab_video"><span>'+options.videos+'</span></li></ul><div class="toggleWrap"><div class="itemWrap" id="fotoContent"><span id="mt_back" class="jsTrackLink"></span><div id="mooFlowWrapper"></div><span id="mt_forward" class="jsTrackLink"></span><p><a class="largerPics link" href="">'+options.linkPhoto+'</a><a class="link" href="">'+options.linkPrice+'</a></p></div><div class="itemWrap act"  id="videoContent"><div id ="mediacenterVideoWrap"></div><p><a class="largerVideo link" href="">'+options.linkVideo+'</a><a class="link" href="">'+options.linkPrice+"</a></p></div></div>";
}else{if(!this.options.showLinks){this.wrapper.innerHTML='<h4></h4><ul class="toggleMenu"><li class="jsTrackLink" id="mt_tab_foto"><span>'+options.photos+'</span></li><li class="act jsTrackLink" id="mt_tab_video"><span>'+options.videos+'</span></li></ul><div class="toggleWrap"><div class="itemWrap" id="fotoContent"><span id="mt_back" class="jsTrackLink"></span><div id="mooFlowWrapper"></div><span id="mt_forward" class="jsTrackLink"></span></div><div class="itemWrap act"  id="videoContent"><div id ="mediacenterVideoWrap"></div></div></div>';}}}this.toolTip.getElement(".close").addClass("jsTrackLink").id="mt_close";this.header=this.wrapper.getElement("h4");this.links=this.wrapper.getElements("a");this.show=false;this.initPhotoVideoTabs();window.addEvent("showMediacenter",function(){this.showMediaCenter(arguments);
}.bind(this));document.body?this.initClose():window.addEvent("load",this.initClose.bind(this));},showMediaCenter:function(args){if(!this.show){this.show=true;var hotelId=this.getHotelId(args[2]);this.hasVideo=args[3];if(args[3]){$$(".toggleMenu").removeClass("hide");this.activateTab("foto");this.videoIsExternal=args[4];(this.videoIsExternal||!window.hasReqFlashVersion)?this.setVideoPlaceHolderHTML():this.setVideoPlayerHTML();this.embedVideo(hotelId);}else{this.activateTab("foto");$$(".toggleMenu").addClass("hide");}if(args[2]){this.openerHref=args[2];this.start(hotelId,this.getRowNumber(args[1]));this.position(null,args[0]);this.show=true;}if(args[5]){this.indexElement=args[5];if($(this.indexElement)){$(this.indexElement).fireEvent("click");}}}else{this.fireEvent("onHide",this.toolTip);}},initPhotoVideoTabs:function(){["foto","video"].each(function(typ){var tab=$("mt_tab_"+typ);
tab.addEvent("click",function(){if(!tab.hasClass("act")){this.activateTab(typ);}this.embedVideo();}.bind(this));},this);},activateTab:function(typ){["foto","video"].each(function(t){$$("#"+t+"Content, #mt_tab_"+t)[(typ==t?"add":"remove")+"Class"]("act");});this.activeTab=typ;if(typ=="foto"&&this.hasVideo){s_trackMediaEnd();}},getHotelId:function(href){var start=href.search(/hotelnumber=/),tempHref=href.slice(start+12),end=tempHref.search(/&/);return tempHref.slice(0,end);},getRowNumber:function(id){if(id!=-1){return this.splice(id,"mt_","::").replace(/video_/,"");}else{return"-1";}},splice:function(string,startStr,endStr){var start=string.search(startStr),tempString=string.slice(start+startStr.length),end=tempString.search(endStr);return tempString.slice(0,end);},initClose:function(){var closeElements=$$(document.body).append($$("#searchForm"));
closeElements.each(function(element){element.addEvent("click",function(event){var target=$(event.target);if(!(target!==this.toolTip&&this.toolTip.contains(target))||this.links.contains(target)){this.fireEvent("onHide",this.toolTip);}}.bind(this));},this);if($("loh_frame")){$("loh_frame").addEvent("load",function(){$($("loh_frame").contentWindow.document.body).addEvent("mousewheel",function(){if(this.show){this.fireEvent("onHide",this.toolTip);}}.bind(this)).addEvent("click",function(event){if(this.show){this.fireEvent("onHide",this.toolTip);var href=$(event.target).getParent().href;if(href&&this.getHotelId(href)===this.id){event.stop();}}}.bind(this));}.bind(this));}},start:function(id,rowNumber){if(rowNumber.indexOf("_")!=-1){rowNumber=-1;}if(this.id!=id||this.options.location=="web4Basket"){var inCache=this.cache[id];
this.id=id;this.mooFlow=this.mooFlow||this.initMooFlow();this.mooFlow.isInitial=true;this.mooFlow.MooFlow.empty();if(inCache){if(inCache.hotelVideosLink){this.videoIsExternal=inCache.externalHotelVideos;(this.videoIsExternal||!window.hasReqFlashVersion)?this.setVideoPlaceHolderHTML():this.setVideoPlayerHTML();this.embedVideo(id);}this.loadJSON(inCache);}else{MediaCenter.getCoverFlow(id,rowNumber,this.options.location,this.loadJSON.bind(this));}if(Browser.ie6){this.iframe.setStyles({"width":this.toolTip.getSize().x,"height":this.toolTip.getSize().y});}}},removeVideo:function(){if($("mediacenterVideo")){new Element("div",{id:"mediacenterVideo","class":"hide"}).replaces($("mediacenterVideo"));}},embedVideo:function(hotelId){if(window.hasReqFlashVersion&&!this.videoIsExternal){if(hotelId){flashVars.hotelId=hotelId;
}embedPlayer();}},initMooFlow:function(){var mooFlow=new MooFlow($("mooFlowWrapper").setStyle("height",261));$("mt_forward").addEvent("click",mooFlow.next.bind(mooFlow));$("mt_back").addEvent("click",mooFlow.prev.bind(mooFlow));mooFlow.addEvent("start",function(){console.log(this.indexElement);if($(this.indexElement)){console.log($(this.indexElement));$(this.indexElement).fireEvent("click");}$("mooFlowWrapper").getElements("img").addEvent("click",s_trackLink.pass(["mt_select",true]));}.bind(this));return mooFlow;},loadJSON:function(data){if(data.images.length||data.hotelVideosLink){var dynamicUrl=this.options.dynamicUrl;this.setHeaderHTML(data);if(data.images.length){this.mooFlow.master=data;this.mooFlow.clearMain();if(this.options.showLinks){var links=$$("#fotoContent a.link");setLinkAttributes(links[0],data.hotelPhotosLink);
setLinkAttributes(links[1],data.hotelOffersLink);}if(!this.cache[this.id]){this.cache[this.id]=data;}}var links=$$("#videoContent a");if(data.hotelVideosLink&&this.options.showLinks){if(data.externalHotelVideos){setLinkAttributes(links[0],data.hotelVideosLink);setLinkAttributes(links[1],data.hotelVideosLink);setLinkAttributes(links[2],data.hotelOffersLink);}else{setLinkAttributes(links[0],data.hotelVideosLink);setLinkAttributes(links[1],data.hotelOffersLink);}}else{if(data.hotelVideosLink&&this.options.location=="web4Basket"&&links[0]){setLinkAttributes(links[0],data.hotelVideosLink);}}if(!(data.images.length&&data.hotelVideosLink)){$$(".toggleMenu").addClass("hide");}if(this.options.location=="teaser"){this.updateLinks(this.openerHref);}}else{this.id=null;this.fireEvent("onHide",this.toolTip);
}function setLinkAttributes(link,linkData){link.id=linkData.trackingId;link.href=linkData.url;}},setHeaderHTML:function(data){this.header.innerHTML='<strong class="">'+data.hotelName+'</strong><span class="stars'+data.stars+'"></span> <span>'+data.hotelLocation+"</span>";},setVideoPlayerHTML:function(){$("mediacenterVideoWrap").innerHTML='<div id="mediacenterVideo"></div>';},setVideoPlaceHolderHTML:function(){if(this.options.showLinksInPopUps){$("mediacenterVideoWrap").innerHTML='<a href="" class="noVideoPlayer" onclick="pu(this); return false"><span>'+this.options.noVideoPlayer+"</span></a>";}else{$("mediacenterVideoWrap").innerHTML='<a href="" class="noVideoPlayer"><span>'+this.options.noVideoPlayer+"</span></a>";}},updateLinks:function(link){var startDateDay=(link.match(/startDateDay/)?link.match(/&startDateDay=\d*/)[0]:""),startDateMonth=(link.match(/startDateMonth/)?link.match(/&startDateMonth=\d*/)[0]:""),startDateYear=(link.match(/startDateYear/)?link.match(/&startDateYear=\d*/)[0]:""),endDateDay=(link.match(/endDateDay/)?link.match(/&endDateDay=\d*/)[0]:""),endDateMonth=(link.match(/endDateMonth/)?link.match(/&endDateMonth=\d*/)[0]:""),endDateYear=(link.match(/endDateYear/)?link.match(/&endDateYear=\d*/)[0]:""),currency=(link.match(/currency/)?link.match(/&currency=\w*/)[0]:""),adults=(link.match(/adults/)?link.match(/&adults=\d*/)[0]:""),doubleRooms=(link.match(/doubleRooms/)?link.match(/&doubleRooms=\d*/)[0]:""),singleRooms=(link.match(/singleRooms/)?link.match(/&singleRooms=\d*/)[0]:"");
this.wrapper.getElements("a").each(function(item){if(item.href.match(/startDateDay/)){item.href.replace(/&startDateDay=\d*/,startDateDay);}else{item.href+=startDateDay;}if(item.href.match(/startDateMonth/)){item.href.replace(/&startDateMonth=\d*/,startDateMonth);}else{item.href+=startDateMonth;}if(item.href.match(/startDateYear/)){item.href.replace(/&startDateYear=\d*/,startDateYear);}else{item.href+=startDateYear;}if(item.href.match(/endDateDay/)){item.href.replace(/&endDateDay=\d*/,endDateDay);}else{item.href+=endDateDay;}if(item.href.match(/endDateMonth/)){item.href.replace(/&endDateMonth=\d*/,endDateMonth);}else{item.href+=endDateMonth;}if(item.href.match(/endDateYear/)){item.href.replace(/&endDateYear=\d*/,endDateYear);}else{item.href+=endDateYear;}if(item.href.match(/currency/)){item.href.replace(/&currency=\w*/,currency);
}else{item.href+=currency;}if(item.href.match(/adults/)){item.href.replace(/&adults=\d*/,adults);}else{item.href+=adults;}if(item.href.match(/doubleRooms/)){item.href.replace(/&doubleRooms=\d*/,doubleRooms);}else{item.href+=doubleRooms;}if(item.href.match(/singleRooms/)){item.href.replace(/&singleRooms=\d*/,singleRooms);}else{item.href+=singleRooms;}if(link.match(/&availability=true/)){item.href+="&availability=true";}});}});var MooFlow=new Class({Implements:[Events,Options],options:{onStart:function(){},onClickView:function(){},onAutoPlay:function(){},onAutoStop:function(){},onRequest:function(){},onResized:function(){},onEmptyinit:function(){},reflection:0.14,offsetY:0,startIndex:0,interval:3000,factor:200,bgColor:"#fff",useCaption:true,useResize:false,useSlider:false,useWindowResize:false,useMouseWheel:true,useKeyInput:true,useViewer:false,foc:150,notHotelPhoto:true,greyOutArrows:true},initialize:function(element,options){this.MooFlow=element;
this.setOptions(options);this.foc=this.options.foc;this.factor=this.options.factor;this.offY=this.options.offsetY;this.isFull=false;this.isAutoPlay=false;this.isLoading=false;this.isInitial=true;this.inMotion=false;this.animations=[];this.MooFlow.addClass("mf").setStyles({"overflow":"hidden","background-color":this.options.bgColor,"position":"relative","opacity":0});if(this.options.useWindowResize){window.addEvent("resize",this.update.bind(this,"init"));}if(this.options.useMouseWheel||this.options.useSlider){this.MooFlow.addEvent("mousewheel",this.wheelTo.bind(this));}if(this.options.useKeyInput){document.addEvent("keydown",this.keyTo.bind(this));}this.getElements(this.MooFlow);},clearInit:function(){this.fireEvent("emptyinit");},getElements:function(el){this.master={"images":[]};var els=el.getChildren();
if(!els.length){this.clearInit();return;}$$(els).each(function(el){var hash=el.getElement("img").getProperties("src","title","alt","longdesc");this.master["images"].push(hash);el.dispose();},this);this.clearMain();},clearMain:function(){this.animations.each(function(animation){animation.cancel();});this.animations=[];if(this.nav){this.animations.push(new Fx.Tween(this.nav,{"onComplete":function(){this.MooFlow.empty();this.createAniObj();}.bind(this)}).start("bottom",-50));}if(!this.nav&&!this.cap){this.MooFlow.empty();this.createAniObj();}},getMooFlowElements:function(key){var els=[];this.master.images.each(function(el){els.push(el[key]);});return els;},createAniObj:function(){this.aniFx=new Fx.Value({"transition":Fx.Transitions.Expo.easeOut,"link":"cancel","duration":750,onMotion:this.process.bind(this),"onStart":this.flowStart.bind(this),"onComplete":this.flowComplete.bind(this)});
this.addLoader();},addLoader:function(){this.MooFlow.store("height",this.MooFlow.getSize().y);this.loader=new Element("div").addClass("loader").inject(this.MooFlow);this.MooFlow.setStyle("opacity",1);this.preloadImg();},preloadImg:function(){try{this.loadedPics=[];this.loadedImages=new Asset.images(this.getMooFlowElements("src"),{"onComplete":this.loaded.bind(this),"onProgress":this.createMooFlowElement.bind(this)});}catch(e){}},createMooFlowElement:function(counter,i){if(this.loadedPics.contains(i)){return;}this.loadedPics.push(i);var obj=this.getCurrent(i);var img=this.loadedImages[i];obj["width"]=img.width;obj["height"]=img.height;if(obj.height>225){var f=obj.height/225;obj.height=225;obj.width=obj.width/f;obj.f=225;}img.removeProperty("width");img.removeProperty("height");if(this.options.notHotelPhoto&&i==0&&this.loadedImages.length>1){obj["div"]=new Element("div").setStyles({"position":"absolute","display":"block","height":obj.height,"width":obj.width,"left":Math.round(200-obj.width/2),"top":-5,"z-index":200}).inject(this.MooFlow);
obj["con"]=new Element("div");obj["con"].setStyle("height",450);obj["con"].inject(obj["div"]);}else{if(i==0){this.isInitial=false;}obj["div"]=new Element("div").setStyles({"position":"absolute","display":"none","height":obj.height}).inject(this.MooFlow);obj["con"]=new Element("div").inject(obj["div"]);}img.setStyles({"vertical-align":"bottom","width":"100%","height":"50%"});img.id="mooFlowImg_"+obj.id;img.addEvents({"click":this.clickTo.bind(this,i),"dblclick":this.viewCallBack.bind(this,i)});img.inject(obj["con"],"top");var div=new Element("div");div.reflect({"img":img,"ref":this.options.reflection,"height":obj.height,"width":obj.width,"color":this.options.bgColor}).setStyles({"height":"50%","background-color":this.options.bgColor}).inject(obj["con"]);this.loader.set("text",(i+1)+" / "+this.loadedImages.length);
},loaded:function(){this.index=this.options.startIndex;this.iL=this.master.images.length-1;if(this.loader&&this.loader.setStyle){try{this.loader.setStyle("background-position","-5000em 50%");}catch(e){}}this.createUI();},createUI:function(){if(this.loader&&this.loader.setStyle&&this.loader.parentNode){try{this.loader.setStyle("opacity",0);}catch(e){}}if(this.options.useCaption){this.cap=new Element("div").addClass("caption").setStyle("opacity",0).inject(this.MooFlow);}this.nav=new Element("div").addClass("mfNav").setStyle("bottom","-50px");this.autoPlayCon=new Element("div").addClass("autoPlayCon");this.sliderCon=new Element("div").addClass("sliderCon");this.resizeCon=new Element("div").addClass("resizeCon");if(this.options.useAutoPlay){this.autoPlayCon.adopt(new Element("a").addClass("stop").addEvent("click",this.stop.bind(this)),new Element("a").addClass("play").addEvent("click",this.play.bind(this)));
}if(this.options.useSlider){this.sliPrev=new Element("a").addClass("sliderNext").addEvent("click",this.prev.bind(this));this.sliNext=new Element("a").addClass("sliderPrev").addEvent("click",this.next.bind(this));this.knob=new Element("div").addClass("knob");this.knob.adopt(new Element("div").addClass("knobleft"));this.slider=new Element("div").addClass("slider").adopt(this.knob);this.sliderCon.adopt(this.sliPrev,this.slider,this.sliNext);this.slider.store("parentWidth",this.sliderCon.getSize().x-this.sliPrev.getSize().x-this.sliNext.getSize().x);}if(this.options.useResize){this.resizeCon.adopt(new Element("a").addClass("resize").addEvent("click",this.setScreen.bind(this)));}this.MooFlow.adopt(this.nav.adopt(this.autoPlayCon,this.sliderCon,this.resizeCon));this.showUI();},showUI:function(){if(this.cap){this.animations.push(new Fx.Tween(this.cap).start("opacity",1));
}this.animations.push(new Fx.Tween(this.nav).start("bottom",20));this.fireEvent("start");this.update();},update:function(e){if(e=="init"){return;}this.oW=this.MooFlow.getSize().x;this.sz=this.oW*0.5;if(this.options.useSlider){this.slider.setStyle("width",this.slider.getParent().getSize().x-this.sliPrev.getSize().x-this.sliNext.getSize().x-1);this.knob.setStyle("width",(this.slider.getSize().x/this.iL));this.sli=new Slider(this.slider,this.knob,{steps:this.iL,onChange:this.glideTo.bind(this)}).set(this.index);}this.glideTo(this.index);this.isLoading=false;},setScreen:function(){if(this.isFull=!this.isFull){this.holder=new Element("div").inject(this.MooFlow,"after");this.MooFlow.wraps(new Element("div").inject(document.body));this.MooFlow.setStyles({"position":"absolute","z-index":"100","top":"0","left":"0","width":window.getSize().x,"height":window.getSize().y});
if(this.options.useWindowResize){this._initResize=this.initResize.bind(this);window.addEvent("resize",this._initResize);}}else{this.MooFlow.wraps(this.holder);window.removeEvent("resize",this._initResize);delete this.holder,this._initResize;this.MooFlow.setStyles({"position":"relative","z-index":"","top":"","left":"","width":"","height":this.MooFlow.retrieve("height")});this.slider.setStyle("width",this.slider.retrieve("parentWidth"));}this.fireEvent("resized",this.isFull);this.update();},initResize:function(){this.MooFlow.setStyles({"width":window.getSize().x,"height":window.getSize().y});this.update();},getCurrent:function(index){return this.master.images[index!=null?index:this.index];},loadJSON:function(url){if(!url||this.isLoading){return;}this.isLoading=true;new Request.JSON({"onSuccess":function(data){if(data!=null){this.master=data;
this.clearMain();this.fireEvent("request",data);}}.bind(this)},this).get(url);},loadHTML:function(url,filter){if(!url||!filter||this.isLoading){return;}this.isLoading=true;new Request.HTML({"onSuccess":function(tree,els,htm){var result=new Element("div",{"html":htm}).getChildren(filter);this.getElements(result);this.fireEvent("request",result);}.bind(this)},this).get(url);},flowStart:function(){this.inMotion=true;},flowComplete:function(){this.inMotion=false;if(this.options.greyOutArrows){this.greyOutArrows();}},viewCallBack:function(index){if(this.index!=index||this.inMotion){return;}var el=$H(this.getCurrent());var returnObj={};returnObj["coords"]=el.div.getElement("img").getCoordinates();el.each(function(v,k){if(typeOf(v)=="number"||typeOf(v)=="string"){returnObj[k]=v;}},this);this.fireEvent("clickView",returnObj);
},prev:function(){if(this.index>0){this.clickTo(this.index-1);}},next:function(){if(this.index<this.iL){this.clickTo(this.index+1);}},stop:function(){clearInterval(this.autoPlay);this.isAutoPlay=false;this.fireEvent("autoStop");},play:function(){this.autoPlay=this.auto.periodical(this.options.interval,this);this.isAutoPlay=true;this.fireEvent("autoPlay");},auto:function(){if(this.index<this.iL){this.next();}else{if(this.index==this.iL){this.clickTo(0);}}},keyTo:function(event){switch(event.code){case 37:event.stop();this.prev();break;case 39:event.stop();this.next();}},wheelTo:function(event){if(event.wheel>0){this.prev();}if(event.wheel<0){this.next();}event.stop();},clickTo:function(index){this.isInitial=false;if(this.index==index){return;}if(this.sli){this.sli.set(index);}this.glideTo(index);
},glideTo:function(index){this.index=index;this.aniFx.cancel();this.animations.push(this.aniFx.start(this.aniFx.get(),index*-this.foc));if(this.cap){this.cap.set("html",this.getCurrent().title);}},process:function(x){if(isNaN(x)){return;}var z,W,H,zI=this.iL,foc=this.foc,f=this.factor,sz=this.sz,oW=this.oW,offY=this.offY,div,elh,elw;this.master.images.each(function(el,cnt){if(!(this.isInitial&&cnt==0)){if(this.isInitial&&x==0){x=foc;}var cssTextAdd="";div=el.div.style;elw=el.width;elh=el.height;var f2=el.f||f;if(x>-foc*3&&x<foc*3){z=Math.sqrt(10000+x*x)+100;H=Math.round((elh)/z*sz);W=Math.round((elw)/z*sz);var cssLeft=Math.round(sz+(x/z*sz)-(elw*0.5)/z*sz)+"px",cssTop=Math.round(oW*0.55-H)+offY+"px",cssZI=x<0?zI++:zI--;cssTextAdd+=";left:"+cssLeft;cssTextAdd+=";top:"+cssTop;cssTextAdd+=";width:"+W+"px";
cssTextAdd+=";z-index:"+cssZI;cssTextAdd+=";display:block";el.con.style.height=H*2+"px";}else{cssTextAdd+=";display:none";}div.cssText+=cssTextAdd;x+=foc;}},this);},greyOutArrows:function(){$("mt_back").setStyle("opacity",1);$("mt_forward").setStyle("opacity",1);if(this.index==0){$("mt_back").setStyle("opacity",0.2);}else{if(this.index==this.iL){$("mt_forward").setStyle("opacity",0.2);}}}});Fx.Value=new Class({Extends:Fx,compute:function(from,to,delta){this.value=Fx.compute(from,to,delta);this.fireEvent("motion",this.value);return this.value;},get:function(){return this.value||0;}});Element.implement({reflect:function(arg){i=arg.img.clone();i.setAttribute("src",arg.img.src);if(Browser.ie&&Browser.version<10){i.style.filter="flipv progid:DXImageTransform.Microsoft.Alpha(opacity=20, style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy="+100*arg.ref+")";
i.setStyles({"width":"100%","height":"100%"});var div=new Element("div");i.inject(div);return div;}else{var can=new Element("canvas").setProperties({"width":arg.width,"height":arg.height});if(can.getContext){var ctx=can.getContext("2d");ctx.save();ctx.translate(0,arg.height-1);ctx.scale(1,-1);ctx.drawImage(i,0,0,arg.width,arg.height);ctx.restore();ctx.globalCompositeOperation="destination-out";ctx.fillStyle=arg.color;ctx.fillRect(0,arg.height*0.5,arg.width,arg.height);var gra=ctx.createLinearGradient(0,0,0,arg.height*arg.ref);gra.addColorStop(1,"rgba(255, 255, 255, 1.0)");gra.addColorStop(0,"rgba(255, 255, 255, "+(1-arg.ref)+")");ctx.fillStyle=gra;ctx.rect(0,0,arg.width,arg.height);ctx.fill();delete ctx,gra;}return can;}}});window.addEvent("domready",function(){$$(".MooFlowieze").each(function(mooflow){new MooFlow(mooflow);
});});var HotelAvailability=new Class({Extends:ContextSensitiveHelp,initialize:function(elements,options){this.formHTML=$("availibilityFormWrap").innerHTML;$("availibilityFormWrap").dispose();this.parent(elements,options);},start:function(el){if(!el.isReopen){HotelAvailabilityCheck.getInitializedHotelAvailability(this.setCurrentDate.bind(this));el.isReopen=true;}this.parent(el);this.openElement=el;this.loadingWrap=this.openElement.getParent().getParent().getElement(".loadingWrap");this.loadingWrapParent=(this.loadingWrap.getParent().tagName=="TH"?this.loadingWrap.getParent().getParent():this.loadingWrap.getParent());this.loadingWrapSize=this.loadingWrap.getSize();this.teaser=(this.loadingWrapParent.hasClass("teaser")||this.loadingWrapParent.get("tag")=="tr"?this.loadingWrapParent:this.loadingWrapParent.getParent());
this.availabilityForm=this.wrapper.getElement("form");this.wrapper.getElement("a.link").href=this.loadingWrapParent.getElement(".prize a").href.replace("&availability=true","");if(this.openElement.formData){this.getDataFromElement();}resetDateAndSetDateObjects(this.availabilityForm.getElements(".dateInput"));this.availabilityForm.addEvent("submit",function(event){event.stop();var hotelId=this.getHotelId(this.openElement.href),startDate=this.availabilityForm.getElement("input[name=stayPeriod.start.date]").value,endDate=this.availabilityForm.getElement("input[name=stayPeriod.end.date]").value,singleRooms=this.availabilityForm.getElement("select[name=singleRooms]").value,doubleRooms=this.availabilityForm.getElement("select[name=doubleRooms]").value,currency=this.getCurrency(this.openElement.href),tracking=true;
HotelAvailabilityCheck.checkHotelAvailability(hotelId,startDate,endDate,singleRooms,doubleRooms,currency,tracking,this.handleResponse.bind(this));this.toggleLoadingAnimation();this.removeMessages();}.bind(this));$(document.body).addEvent("click",function(event){if(this.helpLayer.getStyle("visibility")=="visible"){var target=$(event.target);if(!((target!==this.toolTip&&this.toolTip.contains(target))||target==this.openElement||(target!==$("calTab")&&$("calTab").contains(target)))){this.hide();}}}.bind(this));var formElements=this.availabilityForm.getElements("input").combine(this.availabilityForm.getElements("select"));formElements.each(function(item){item.addEvent("focus",function(e){this.setDataToElement();}.bind(this));}.bind(this));},hide:function(){this.setDataToElement();this.parent();},build:function(el){var tooltipText=el.retrieve("tooltipText");
if(!tooltipText){tooltipText=this.formHTML;el.store("tooltipText",tooltipText);}if(tooltipText){el.addEvent(this.options.openEvent,function(event){if(this.options.openEvent=="mouseenter"){clearTimeout(this.timer);}if(event){event.preventDefault();}if((this.options.toggle&&el!=this.activeLink)||!this.options.toggle){this.start(el);el.tracking=true;this.position(el);}else{this.hide(el);}}.bind(this));if(this.options.openEvent=="mouseenter"){el.addEvent("mouseleave",function(event){this.timer=this.hide.delay(this.options.timerDelay,this,el);}.bind(this));}el.addEvent("trash",this.end.bind(this));}},setCurrentDate:function(data){var dateInputs=this.availabilityForm.getElements(".dateInput");dateInputs[0].value=data.startDate;dateInputs[1].value=data.endDate;},handleResponse:function(data){this.toggleLoadingAnimation();
var p=new Element("p",{"class":(data.messageHotelAvailable?"messages success msgs":"errorMsg msgs")});p.innerHTML=(data.messageErrorRoomsEmpty?this.options.messageErrorRoomsEmpty:"")||(data.messageHotelUnavailable?this.options.messageHotelUnavailable:"")||(data.messageHotelAvailable?this.options.messageHotelAvailable:"")||(data.messageServiceUnavailable?this.options.messageServiceUnavailable:"");if(data.messageHotelAvailable){p.inject(this.text.getElement(".button"),"before");this.updateTeaserData(data);}else{p.inject(this.text,"top");}this.position(this.openElement);},toggleLoadingAnimation:function(){if(this.teaser.hasClass("active")){this.loadingWrap.setStyles({height:"",width:""});this.teaser.removeClass("active");if(Browser.ie6||Browser.ie7){var reRender=function(){this.teaser.getChildren().each(function(item){item.toggleClass("ie6Bug");
});}.bind(this);reRender.delay(100);}}else{this.loadingWrap.setStyles({height:this.loadingWrapSize.y,width:this.loadingWrapSize.x});if(!this.teaser.getElement(".loader")){this.loadingWrap.innerHTML+='<p class="loader">'+this.options.loadingText+"</p>";}this.teaser.addClass("active");if(this.loadingWrapParent.get("tag")=="tr"){var th=this.loadingWrapParent.getElement("th");this.loadingWrap.setStyles({height:th.getSize().y-2,width:th.getSize().x+th.getNext().getSize().x+th.getNext().getNext().getSize().x-1});}}},updateTeaserData:function(data){this.teaser.getElement(".bookingLink").setStyle("visibility","inherit");this.teaser.getElement(".validity").innerHTML=data.startDate+" - "+data.endDate;var prices=this.teaser.getElements(".prize"),singleRoomPrice=prices[0],doubleRoomPrice=prices[1];if(data.singleRoomsPrice){singleRoomPrice.removeClass("hide");
singleRoomPrice.getElement("a").innerHTML=data.singleRoomsPrice+" "+(data.currency=="EUR"?"&#8364;":data.currency);}else{singleRoomPrice.addClass("hide");}if(data.doubleRoomsPrice){doubleRoomPrice.removeClass("hide");doubleRoomPrice.getElement("a").innerHTML=data.doubleRoomsPrice+" "+(data.currency=="EUR"?"&#8364;":data.currency);}else{doubleRoomPrice.addClass("hide");}if(data.exclusivePrice&&!this.teaser.getElement(".exclusivPic")){var img=new Element("img",{"src":this.options.exclusivPrice,"class":"exclusivPic"});img.inject(this.teaser.getElement(".totalRating"),"after");}else{if(!data.exclusivePrice&&this.teaser.getElement(".exclusivPic")){this.teaser.getElement(".exclusivPic").dispose();}}var links=this.teaser.getElements("a");links.push(this.wrapper.getElement("a.link"));this.wrapper.getElement("a.link").href+="&availability=true";
this.updateLinks(links,data);var submit=this.availabilityForm.getElement("input[type=submit]");this.options.submitText=submit.value;submit.value=this.options.bookingText;submit.addEvent("click",function(event){event.stop();window.location=this.openElement.href;}.bind(this));this.availabilityForm.getElements(".dateInput").each(function(item){item.removeProperty("onfocus");}.bind(this));this.availabilityForm.getElements("select").each(function(item){item.addEvent("focus",function(event){event.stop();this.start(this.openElement);}.bind(this));}.bind(this));this.availabilityForm.getElements("input").each(function(item){item.addEvent("focus",function(event){event.stop();this.start(this.openElement);}.bind(this));}.bind(this));},updateLinks:function(elements,data){elements.each(function(item,index){if(!item.href.match(/startDateDay=\d*/g)){item.href+="&startDateDay="+data.startDateDay;
}else{item.href=item.href.replace(/startDateDay=\d*/g,"startDateDay="+data.startDateDay);}if(!item.href.match(/startDateMonth=\d*/g)){item.href+="&startDateMonth="+data.startDateMonth;}else{item.href=item.href.replace(/startDateMonth=\d*/g,"startDateMonth="+data.startDateMonth);}if(!item.href.match(/startDateYear=\d*/g)){item.href+="&startDateYear="+data.startDateYear;}else{item.href=item.href.replace(/startDateYear=\d*/g,"startDateYear="+data.startDateYear);}if(!item.href.match(/endDateDay=\d*/g)){item.href+="&endDateDay="+data.endDateDay;}else{item.href=item.href.replace(/endDateDay=\d*/g,"endDateDay="+data.endDateDay);}if(!item.href.match(/endDateMonth=\d*/g)){item.href+="&endDateMonth="+data.endDateMonth;}else{item.href=item.href.replace(/endDateMonth=\d*/g,"endDateMonth="+data.endDateMonth);
}if(!item.href.match(/endDateYear=\d*/g)){item.href+="&endDateYear="+data.endDateYear;}else{item.href=item.href.replace(/endDateYear=\d*/g,"endDateYear="+data.endDateYear);}if(!item.href.match(/currency=\w*/g)){item.href+="&currency="+data.currency;}else{item.href=item.href.replace(/currency=\w*/g,"currency="+data.currency);}if(!item.href.match(/singleRooms=\d*/g)){item.href+="&singleRooms="+(data.singleRooms?data.singleRooms:0);}else{item.href=item.href.replace(/singleRooms=\d*/g,"singleRooms="+(data.singleRooms?data.singleRooms:0));}if(!item.href.match(/doubleRooms=\d*/g)){item.href+="&doubleRooms="+(data.doubleRooms?data.doubleRooms:0);}else{item.href=item.href.replace(/doubleRooms=\d*/g,"doubleRooms="+(data.doubleRooms?data.doubleRooms:0));}if(!item.href.match(/adults=\d*/g)){item.href+="&adults="+(data.singleRooms*1+(data.doubleRooms*2));
}else{item.href=item.href.replace(/adults=\d*/g,"adults="+(data.singleRooms*1+(data.doubleRooms*2)));}if(!item.href.match(/&availability=true/)){item.href+="&availability=true";}});},removeMessages:function(){this.wrapper.getElements(".msgs").each(function(item){item.dispose();});this.position(this.openElement);},getHotelId:function(string){return string.match(/hotelnumber=\d*/ig)[0].replace("hotelnumber=","");},getCurrency:function(string){return string.match(/currency=\w*/ig)[0].replace("currency=","");},setDataToElement:function(){if(this.availabilityForm){this.openElement.formData={startDate:this.availabilityForm.getElement("#start_stayPeriod1").value,endDate:this.availabilityForm.getElement("#end_stayPeriod1").value,singleRooms:this.availabilityForm.getElement("select[name=singleRooms]").value,doubleRooms:this.availabilityForm.getElement("select[name=doubleRooms]").value};
}},getDataFromElement:function(){this.availabilityForm.getElement("#start_stayPeriod1").value=this.openElement.formData.startDate;this.availabilityForm.getElement("#end_stayPeriod1").value=this.openElement.formData.endDate;this.availabilityForm.getElement("select[name=singleRooms]").value=this.openElement.formData.singleRooms;this.availabilityForm.getElement("select[name=doubleRooms]").value=this.openElement.formData.doubleRooms;}});var SizePopupIE8=new Class({initialize:function(){var myTimer;window.addEvent("resize",function(event){var myFunction=function(){location.href=location.href;};if(myTimer){myTimer=clearTimeout(myTimer);}myTimer=myFunction.delay(50);});}});var PhotoGallery=new Class({options:{loopSpeed:1000},initialize:function(el,mooFlow){var gallery=new Gallery(el,{stepSize:11,galleryLength:5,duration:700,around:false,greyOutArrows:true,useMouseWheel:true});
this.mooFlow=mooFlow;var lis=el.getElements("li");this.generateDataObject(lis);lis.each(function(item,index){item.addEvents({"mouseenter":function(event){event.stop();if(this.dataObject[index].descriptionToLong){this.descriptionFx=new Fx.Tween(item.getElement("span"),{duration:100*(-(this.dataObject[index].descriptionToLongSize))}).start("left",0,this.dataObject[index].descriptionToLongSize);}if(this.dataObject[index].src.length>1){this.previewCounter=1;this.preview=this.showPhotoPreview.periodical(this.options.loopSpeed,this,[item,index,false]);}}.bind(this),"mouseleave":function(event){event.stop();if(this.dataObject[index].descriptionToLong){this.descriptionFx.cancel();item.getElement("span").setStyle("left","0");}if(this.dataObject[index].src.length>1){clearInterval(this.preview);this.showPhotoPreview(item,index,true);
}}.bind(this),"click":function(event){event.stop();var index=(event.target.get("tag")=="li"?event.target.getElement("img").name:event.target.getParent().getElement("img").name);$("mooFlowId"+index).fireEvent("click");}});}.bind(this));},generateDataObject:function(els){this.dataObject={};els.each(function(item,index){this.dataObject[index]={};this.dataObject[index].descriptionToLong=(item.getSize().x<item.getElement("span").getSize().x);if(this.dataObject[index].descriptionToLong){this.dataObject[index].descriptionToLongSize=-(item.getElement("span").getSize().x-item.getSize().x);}this.dataObject[index].src=this.getSrc(item);}.bind(this));},getSrc:function(el){var array=[];el.getElements(".hiddenPicture").each(function(item){array.push(item.innerHTML);item.dispose();}.bind(this));return array;
},showPhotoPreview:function(item,index,showFirstImage){item=item.getElement("img");if(showFirstImage){item.src=this.dataObject[index].src[0];}else{item.src=this.dataObject[index].src[this.previewCounter%this.dataObject[index].src.length];this.previewCounter++;}var theSize=item.getSize();if(theSize.x>theSize.y){item.setStyles({"width":"82px","height":""});theSize=item.getSize();var thePad=Math.floor((82-theSize.y)/2);item.setStyle("margin-top",thePad+"px");}else{item.setStyles({"width":"","height":"82px","margin-top":""});}}});var MooFlowAltPreLoading=new Class({Extends:MooFlow,initialize:function(element,options){this.MooFlow=element;this.setOptions(options);this.foc=this.options.foc;this.factor=this.options.factor;this.offY=this.options.offsetY;this.isFull=false;this.isAutoPlay=false;this.isLoading=false;
this.isInitial=true;this.inMotion=false;this.animations=[];this.MooFlow.addClass("mf").setStyles({"overflow":"hidden","background-color":this.options.bgColor,"position":"relative","opacity":0});if(this.options.useWindowResize){window.addEvent("resize",this.update.bind(this,"init"));}if(this.options.useMouseWheel||this.options.useSlider){this.MooFlow.addEvent("mousewheel",this.wheelTo.bind(this));}if(this.options.useKeyInput){document.addEvent("keydown",this.keyTo.bind(this));}this.getElements(this.MooFlow);},clearInit:function(){this.fireEvent("emptyinit");},getElements:function(el){this.master={"images":[]};if(!this.options.photos){this.clearInit();return;}for(i in this.options.photos){this.master["images"].push(this.options.photos[i]);}console.log(this.options);this.clearMain();},clearMain:function(){this.animations.each(function(animation){animation.cancel();
});this.animations=[];if(this.nav){this.animations.push(new Fx.Tween(this.nav,{"onComplete":function(){this.MooFlow.empty();this.createAniObj();}.bind(this)}).start("bottom",-50));}if(!this.nav&&!this.cap){this.MooFlow.empty();this.createAniObj();}},getMooFlowElements:function(key){var els=[];this.master.images.each(function(el){els.push(el[key]);});return els;},createAniObj:function(){this.aniFx=new Fx.Value({"transition":Fx.Transitions.Expo.easeOut,"link":"cancel","duration":750,onMotion:this.process.bind(this),"onStart":this.flowStart.bind(this),"onComplete":this.flowComplete.bind(this)});this.addLoader();},addLoader:function(){this.MooFlow.store("height",this.MooFlow.getSize().y);this.MooFlow.setStyle("opacity",1);this.order=this.orderImages();this.orderIndex=0;this.loadedPics=[];this.order.each(function(item,index){this.createMooFlowElement(item,item);
}.bind(this));this.loaded();this.preloadImg();},preloadImg:function(loadedIndex){if(typeof loadedIndex=="undefined"){this.loadImg(this.order[this.orderIndex]);}else{if(this.order.length>this.orderIndex+1){this.insertRealImg(loadedIndex);this.orderIndex++;this.loadImg(this.order[this.orderIndex]);}else{this.insertRealImg(loadedIndex);}}},insertRealImg:function(index){var masterImgObj=this.master.images[index];if($("photoGalleryId"+masterImgObj.id)!=null){var galleryImg=$("photoGalleryId"+masterImgObj.id),galleryImgParent=galleryImg.parentNode;if(galleryImgParent){galleryImgParent.style.backgroundImage="none";}galleryImg.src=masterImgObj.src;this.setSize(galleryImg);}var img=masterImgObj.div.getElement("img"),parent=img.parentNode;img.src=masterImgObj.src;if(parent){parent.style.backgroundImage="none";
}setTimeout(function(){masterImgObj.div.reflect({"img":masterImgObj.div.getElement("img"),"ref":this.options.reflection,"height":masterImgObj.height,"width":masterImgObj.width,"color":this.options.bgColor}).setStyles({"height":"50%","background-color":this.options.bgColor}).inject(masterImgObj["con"]);}.bind(this),100);},loadImg:function(i){if(!this.master.images[i]){return;}var image=new Asset.image(this.master.images[i].src,{onLoad:this.preloadImg.bind(this).pass(i),onError:this.preloadImg.bind(this).pass(i),onAbort:this.preloadImg.bind(this).pass(i)});},setSize:function(thumbPic){var theSize=thumbPic.getSize();if(theSize.x>theSize.y){thumbPic.setStyle("width","82px");theSize=thumbPic.getSize();var thePad=Math.floor((82-theSize.y)/2);thumbPic.setStyle("margin-top",thePad+"px");}else{thumbPic.setStyles({"height":"82px"});
}},orderImages:function(){var array=[],catPictures=[],images=[];this.master.images.each(function(item,index){if(item.init){array.push(index);}if(item.catPicture){catPictures.push(index);}images.push(index);});if(array[0]==0){array.combine([1,2]);}else{if(array[0]==1){array.combine([0,2,3]);}else{array.combine([array[0]-2,array[0]-1]);if(images.length>array[0]+1){array.combine(array[0]+1);}if(images.length>=array[0]+2){array.combine(array[0]+2);}}}array.combine(catPictures);array.combine(images);return array;},createMooFlowElement:function(counter,i){if(this.loadedPics.contains(i)||!this.getCurrent(this.order[i])){return;}this.loadedPics.push(i);var obj=this.getCurrent(this.order[i]);var img=new Element("img",{src:this.options.blankImg,width:this.master.images[this.order[i]]?this.master.images[this.order[i]].width:0,height:this.master.images[this.order[i]]?this.master.images[this.order[i]].height:0});
obj["width"]=img.width;obj["height"]=img.height;if(obj.height>225){var f=obj.height/225;obj.height=225;obj.width=obj.width/f;obj.f=225;}img.removeProperty("width");img.removeProperty("height");if(this.options.notHotelPhoto&&i==0&&this.loadedImages.length>1){obj["div"]=new Element("div").setStyles({"position":"absolute","display":"block","height":obj.height,"width":obj.width,"left":Math.round(200-obj.width/2),"top":-5,"z-index":200}).inject(this.MooFlow);obj["con"]=new Element("div");obj["con"].setStyle("height",450);obj["con"].inject(obj["div"]);}else{if(i==0){this.isInitial=false;}obj["div"]=new Element("div").setStyles({"position":"absolute","display":"none","height":obj.height}).inject(this.MooFlow);obj["con"]=new Element("div").inject(obj["div"]);}img.setStyles({"vertical-align":"bottom","width":"100%","height":"50%"});
img.addEvents({"click":this.clickTo.bind(this,this.order[i]),"dblclick":this.viewCallBack.bind(this,this.order[i])});img.inject(obj["con"],"top");img.id="mooFlowId"+obj.id;var div=new Element("div");},loaded:function(){this.index=this.options.startIndex;this.iL=this.master.images.length-1;if(this.loader&&this.loader.setStyle){try{this.loader.setStyle("opacity",0);}catch(e){}}if(this.iL==-1){}if(this.iL!=-1){$$(".showOnLoad").each(function(item){item.removeClass("showOnLoad");});this.createUI();}},createUI:function(){if(this.loader&&this.loader.setStyle&&this.loader.parentNode){try{this.loader.setStyle("opacity",0);}catch(e){}}if(this.options.useCaption){this.cap=new Element("div").addClass("caption").setStyle("opacity",0).inject(this.MooFlow);}this.nav=new Element("div").addClass("mfNav").setStyle("bottom","-50px");
this.autoPlayCon=new Element("div").addClass("autoPlayCon");this.sliderCon=new Element("div").addClass("sliderCon");this.resizeCon=new Element("div").addClass("resizeCon");if(this.options.useAutoPlay){this.autoPlayCon.adopt(new Element("a").addClass("stop").addEvent("click",this.stop.bind(this)),new Element("a").addClass("play").addEvent("click",this.play.bind(this)));}if(this.options.useSlider){this.sliPrev=new Element("a").addClass("sliderNext").addEvent("click",this.prev.bind(this));this.sliNext=new Element("a").addClass("sliderPrev").addEvent("click",this.next.bind(this));this.knob=new Element("div").addClass("knob");this.knob.adopt(new Element("div").addClass("knobleft"));this.slider=new Element("div").addClass("slider").adopt(this.knob);this.sliderCon.adopt(this.sliPrev,this.slider,this.sliNext);
this.slider.store("parentWidth",this.sliderCon.getSize().x-this.sliPrev.getSize().x-this.sliNext.getSize().x);}if(this.options.useResize){this.resizeCon.adopt(new Element("a").addClass("resize").addEvent("click",this.setScreen.bind(this)));}this.MooFlow.adopt(this.nav.adopt(this.autoPlayCon,this.sliderCon,this.resizeCon));if(Browser.ie6){$("layout02").toggleClass("jsReflow");}this.showUI();},showUI:function(){if(this.cap){this.animations.push(new Fx.Tween(this.cap).start("opacity",1));}this.animations.push(new Fx.Tween(this.nav).start("bottom",20));this.fireEvent("start");this.update();},update:function(e){if(e=="init"){return;}this.oW=this.MooFlow.getSize().x;this.sz=this.oW*0.5;if(this.options.useSlider){this.slider.setStyle("width",this.slider.getParent().getSize().x-this.sliPrev.getSize().x-this.sliNext.getSize().x-1);
this.knob.setStyle("width",(this.slider.getSize().x/this.iL));this.sli=new Slider(this.slider,this.knob,{steps:this.iL,onChange:this.glideTo.bind(this)}).set(this.index);}this.glideTo(this.index);this.isLoading=false;},setScreen:function(){if(this.isFull=!this.isFull){this.holder=new Element("div").inject(this.MooFlow,"after");this.MooFlow.wraps(new Element("div").inject(document.body));this.MooFlow.setStyles({"position":"absolute","z-index":"100","top":"0","left":"0","width":window.getSize().x,"height":window.getSize().y});if(this.options.useWindowResize){this._initResize=this.initResize.bind(this);window.addEvent("resize",this._initResize);}}else{this.MooFlow.wraps(this.holder);window.removeEvent("resize",this._initResize);delete this.holder,this._initResize;this.MooFlow.setStyles({"position":"relative","z-index":"","top":"","left":"","width":"","height":this.MooFlow.retrieve("height")});
this.slider.setStyle("width",this.slider.retrieve("parentWidth"));}this.fireEvent("resized",this.isFull);this.update();},initResize:function(){this.MooFlow.setStyles({"width":window.getSize().x,"height":window.getSize().y});this.update();},getCurrent:function(index){return this.master.images[index!=null?index:this.index];},loadJSON:function(url){if(!url||this.isLoading){return;}this.isLoading=true;new Request.JSON({"onSuccess":function(data){if(data!=null){this.master=data;this.clearMain();this.fireEvent("request",data);}}.bind(this)},this).get(url);},loadHTML:function(url,filter){if(!url||!filter||this.isLoading){return;}this.isLoading=true;new Request.HTML({"onSuccess":function(tree,els,htm){var result=new Element("div",{"html":htm}).getChildren(filter);this.getElements(result);this.fireEvent("request",result);
}.bind(this)},this).get(url);},flowStart:function(){this.inMotion=true;},flowComplete:function(){this.inMotion=false;if(this.options.greyOutArrows){this.greyOutArrows();}},viewCallBack:function(index){if(this.index!=index||this.inMotion){return;}var el=$H(this.getCurrent());var returnObj={};returnObj["coords"]=el.div.getElement("img").getCoordinates();el.each(function(v,k){if(typeOf(v)=="number"||typeOf(v)=="string"){returnObj[k]=v;}},this);this.fireEvent("clickView",returnObj);},prev:function(){if(this.index>0){this.clickTo(this.index-1);}},next:function(){if(this.index<this.iL){this.clickTo(this.index+1);}},stop:function(){clearInterval(this.autoPlay);this.isAutoPlay=false;this.fireEvent("autoStop");},play:function(){this.autoPlay=this.auto.periodical(this.options.interval,this);this.isAutoPlay=true;
this.fireEvent("autoPlay");},auto:function(){if(this.index<this.iL){this.next();}else{if(this.index==this.iL){this.clickTo(0);}}},keyTo:function(event){switch(event.code){case 37:event.stop();this.prev();break;case 39:event.stop();this.next();}},wheelTo:function(event){if(event.wheel>0){this.prev();}if(event.wheel<0){this.next();}event.stop();},clickTo:function(index){this.isInitial=false;if(this.index==index){return;}if(this.sli){this.sli.set(index);}this.glideTo(index);},glideTo:function(index){this.index=index;this.aniFx.cancel();this.animations.push(this.aniFx.start(this.aniFx.get(),index*-this.foc));if(this.cap){this.cap.set("html",this.getCurrent().title);}},process:function(x){var z,W,H,zI=this.iL,foc=this.foc,f=this.factor,sz=this.sz,oW=this.oW,offY=this.offY,div,elh,elw;this.master.images.each(function(el,cnt){if(!(this.isInitial&&cnt==0)){var cssTextAdd="";
div=el.div.style;elw=el.width;elh=el.height;var f2=el.f||f;if(x>-foc*3&&x<foc*3){z=Math.sqrt(10000+x*x)+100;H=Math.round((elh)/z*sz);W=Math.round((elw)/z*sz);var cssLeft=Math.round(sz+(x/z*sz)-(elw*0.5)/z*sz)+"px",cssTop=Math.round(oW*0.55-H)+offY+"px",cssZI=x<0?zI++:zI--;cssTextAdd+=";left:"+cssLeft;cssTextAdd+=";top:"+cssTop;cssTextAdd+=";width:"+W+"px";cssTextAdd+=";z-index:"+cssZI;cssTextAdd+=";display:block";el.con.style.height=H*2+"px";}else{cssTextAdd+=";display:none";}div.cssText+=cssTextAdd;x+=foc;}},this);},greyOutArrows:function(){if(this.master.images.length>1){$("mt_back").setStyle("opacity",1);$("mt_forward").setStyle("opacity",1);}else{$("mt_back").setStyle("opacity",0.2);$("mt_forward").setStyle("opacity",0.2);}if(this.index==0){$("mt_back").setStyle("opacity",0.2);}else{if(this.index==this.iL){$("mt_forward").setStyle("opacity",0.2);
}}}});var ToggleCheckBoxes=new Class({Implements:Options,options:{togglerSelector:"td.mm a"},initialize:function(containers,options){this.setOptions(options);this.containers=containers;this.containers.each(function(container){var toggleOn=true,checkBoxes=this.getCheckboxes($(container));container.getElement(this.options.togglerSelector).addEvent("click",function(event){event.stop();if(checkBoxes.length){checkBoxes.each(function(checkbox){checkbox.checked=toggleOn;this.setBgColor($(checkbox));}.bind(this));toggleOn=!toggleOn;}}.bind(this));}.bind(this));},setBgColor:function(checkbox){checkbox.getParent()[(checkbox.checked?"add":"remove")+"Class"]("mc");},getCheckboxes:function(container){if(container.getNext()){return container.getNext().getElements("input[type=checkbox]");}else{return container.getElements("input[type=checkbox]");
}}});var TextCounter=new Class({Implements:Options,options:{numberOfKeys:"1000"},initialize:function(el,theTextarea,options){this.setOptions(options);var theTextEl=el.getElement("strong");var i=this.options.numberOfKeys-theTextarea.value.length;theTextEl.innerHTML=i;theTextarea.addEvent("keyup",function(){i=this.options.numberOfKeys-theTextarea.value.length;if(i>=0){theTextEl.innerHTML=i;}else{theTextarea.value=theTextarea.value.substring(0,this.options.numberOfKeys);}}.bind(this));}});var LightBoxInContent=new Class({Extends:LightBox,options:{verticalPosition:180,posMin:25,closeText:"",openEvent:null,opener:null,lightBoxId:"",lightBoxEl:"",clone:"true",beforOpen:function(){},close:function(){},flexibleWidth:false,isInitial:true,onAfterOpen:function(){if(Browser.ie6){setTimeout(function(){this.wrap.addClass("ieBug");
}.bind(this),300);}}},openLightBox:function(url){console.log("this",url.options);if(this.options.isInitial){var wrap=(this.wrap||this.createLightBox());this.isOpen=true;this.getContent(url);this.content.getElements(".closeLightBox").addEvent("click",this.closeLightBox.bind(this));}else{this.isOpen=true;this.wrap.setStyles({"display":"block"});}this.options.beforOpen();this.position();this.options.isInitial=false;this.showVeil();if(this.wrap.getElement(".closeLink")){this.wrap.getElement(".closeLink").addEvent("click",this.closeLightBox.bind(this));}this.fireEvent("afterOpen");},getLightboxContent:function(){return this.content;},closeLightBox:function(event){if(event){event.preventDefault();}this.wrap.setStyles({"display":"none"});if(this.iframe){this.wrap.setStyles({left:0,top:0});}this.hideVeil();
this.options.close();this.isOpen=false;},setVeilSize:function(){var size=$(window).getScrollSize();if(this.isOpen&&!Browser.ie6&&!Browser.ie7){var size=$(window).getScrollSize();this.veil.setStyles({"height":size.y,"display":"block"});}else{var elSize=this.wrap.getSize(),winSize=$(window).getSize(),winScroll=$(window).getScroll(),contentSize=$("wrap").getSize(),y=winSize.y/2-elSize.y/2+winScroll.y;$("lightBoxIeVeilRight").setStyles({top:0,left:((winSize.x-contentSize.x)/2)+contentSize.x-6,width:(winSize.x-contentSize.x)/2+4,height:contentSize.y+40});$("lightBoxIeVeilLeft").setStyles({top:0,left:0,width:(winSize.x-contentSize.x)/2,height:contentSize.y+40});this.innerVeil.setStyles({"height":contentSize.y+80,"display":"block","top":0,"left":0,"width":"100%"});this.veil.setStyles({"height":contentSize.y+40,"display":"block","top":0,"left":0,"width":"100%","z-index":"-1"});
}},position:function(){if(Browser.ie6||Browser.ie7){this.wrap.setStyles({width:752});}var elSize=this.wrap.getSize(),winSize=$(window).getSize(),winScroll=$(window).getScroll(),contentSize=$("wrap").getSize(),x=contentSize.x/2-elSize.x/2,y=winSize.y/2-elSize.y/2+winScroll.y;if(x<this.options.posMin){x=this.options.posMin;}if(y<this.options.posMin){y=this.options.posMin;}this.wrap.setStyles({left:x,top:y});if(this.iframe){this.iframe.setStyles({width:elSize.x+4,height:elSize.y+4});}},createLightBox:function(){this.wrap=new Element("div",{"class":"lightbox","id":this.options.lightBoxId||"lightbox"});if(this.options.flexibleWidth){this.wrap.setStyle("width","auto");}this.close=new Element("a",{"class":"close jsTrackLink link","href":"javascript:void()","id":(this.options.lightBoxId||"lightbox")+"_close"}).set("text",this.options.closeText).addEvent("click",this.closeLightBox.bind(this)).inject(this.wrap,"inside");
this.content=new Element("div",{"class":"lightboxContent"}).inject(this.wrap,"inside");if(Browser.ie6||Browser.ie7){if(this.options.lightBoxEl.getParent().id!=="wrap"){this.options.lightBoxEl.inject($("wrap"));}this.veil=new Element("div",{"id":(this.options.lightBoxId||"lightbox")+"_veil",styles:{"position":"absolute"},"html":'<div class="lightboxVeil" id="lightBoxIeVeilRight"></div><div class="lightboxVeil" id="lightBoxIeVeilLeft"></div>'});this.innerVeil=new Element("div",{"id":(this.options.lightBoxId||"lightbox")+"_innerVeil","class":"lightboxVeil",styles:{"position":"absolute"}});$("wrap").adopt(this.innerVeil);}else{this.veil=new Element("div",{"class":"lightboxVeil","id":(this.options.lightBoxId||"lightbox")+"_veil"});}$(document.body).adopt(this.veil);$(this.options.lightBoxEl).adopt(this.wrap);
if(this.options.lightBoxEl.hasClass("hide")){this.options.lightBoxEl.removeClass("hide");}}});var LightBoxServiceAffirmation=new Class({Extends:LightBoxInContent,options:{sentSuccessfully:false,bookingText:"",ratingText:"",successDiv:"undefined",errorDiv:"undefined",onAfterOpen:function(){var evaluationEmail=$("evaluationEmail_0");if(evaluationEmail){evaluationEmail.value=evaluationEmail.getSiblings("input")[0].value;}var ao=new PreDefinedInput($("emailConfirmation"),this.options.bookingText,{isID:true});var bo=new PreDefinedInput($$(".jsPredefine"),this.options.ratingText);var rt=this.options.ratingText;$$(".jsPredefine").each(function(item){if(item.value!=rt){item.removeClass("preDefined");}});if(Browser.ie6){setTimeout(function(){this.wrap.addClass("ieBug");}.bind(this),300);}this.checkFields();
},close:function(){}},initialize:function(options){this.parent(options);this.defaultInputText($$("input.defaultInputText"));this.isEmailConfirmation=new Element("input",{type:"hidden",name:"confirmation.emailConfirmation",id:"isEmailConfirmation",value:"false"});this.isSmsConfirmation=new Element("input",{type:"hidden",name:"confirmation.smsConfirmation",id:"isSmsConfirmation",value:"false"});this.isFaxConfirmation=new Element("input",{type:"hidden",name:"confirmation.faxConfirmation",id:"isFaxConfirmation",value:"false"});this.isMmsConfirmation=new Element("input",{type:"hidden",name:"confirmation.mmsConfirmation",id:"isMmsConfirmation",value:"false"});this.checkFields();$("jsContentForm").addEvent("change",function(event){this.checkFields();}.bind(this));if(Browser.ie6||Browser.ie7||Browser.ie8){var allEls=$("jsContentForm").getElements("input[type=text]");
allEls=allEls.concat($("jsContentForm").getElements("select"));allEls.each(function(item,index){allEls.addEvent("blur",function(event){this.checkFields();}.bind(this));}.bind(this));}else{$("jsContentForm").addEvent("change",function(event){this.checkFields();}.bind(this));}$("jsContentForm").addEvent("submit",function(event){if(this.isOpen){event.stop();var newsletter=$("newsletterOrdered").checked,pushSms_countryCode=$("pushSms_countryCode").value,pushSms_number=$("pushSms_number").value,confirmation_sms_countryCode=$("confirmation_sms_countryCode").value,confirmation_sms_number=$("confirmation_sms_number").value;if(this.isFilled([newsletter,pushSms_countryCode,pushSms_number,confirmation_sms_countryCode,confirmation_sms_number,this.emailConfirmation(),["true"]])){if($("emailConfirmation").value!==""){this.isEmailConfirmation=this.isEmailConfirmation.dispose();
}if($("confirmation_sms_number").value!==""){this.isSmsConfirmation=this.isSmsConfirmation.dispose();}this.isMmsConfirmation=this.isMmsConfirmation.dispose();this.isFaxConfirmation=this.isFaxConfirmation.dispose();var detailsEntryInput=document.getElementsByName("detailsEntry")[0];var detailsEntry=detailsEntryInput?detailsEntryInput.value:"booking";ServiceAffirmation.sendTabs(detailsEntry,newsletter,pushSms_countryCode,pushSms_number,confirmation_sms_countryCode,confirmation_sms_number,this.emailConfirmation(),this.evalutaionEmail(),this.resultHandler.bind(this));}}}.bind(this));},position:function(){this.parent();if(Browser.ie6||Browser.ie7){this.wrap.setStyles({width:590});}},closeLightBox:function(event){if(event){event.preventDefault();}this.wrap.setStyles({"display":"none"});if(this.iframe){this.wrap.setStyles({left:0,top:0});
}this.hideVeil();this.options.close();this.isOpen=false;this.closeLB();},closeLB:function(){if(this.options.errorDiv!="undefined"){this.options.errorDiv=this.options.errorDiv.dispose();}if(this.options.successDiv!="undefined"){this.options.successDiv=this.options.successDiv.dispose();}if(!this.sentSuccessfully){this.clearForm();}else{if(this.sentSuccessfully){this.clearAll();}}this.isEmailConfirmation.inject($("jsContentForm"),"top");this.isSmsConfirmation.inject($("jsContentForm"),"top");this.isFaxConfirmation.inject($("jsContentForm"),"top");this.isMmsConfirmation.inject($("jsContentForm"),"top");var evaluationEmail=$("evaluationEmail_0");if(evaluationEmail){evaluationEmail.removeClass("error");if(evaluationEmail.getNext()){evaluationEmail.getNext().dispose();}}},resultHandler:function(json){s_trackLink("submitServicesLayer",false,json.vars,s.pageName);
this.errorManager(json);},errorManager:function(data){console.log(data);this.errorCleanup();this.successCleanup();var that=this;var errors=false;if(data.errorMessageConfirmationEmailInLocalLanguage){that.showError("emailConfirmation",data.errorMessageConfirmationEmailInLocalLanguage);errors=true;}if(data.errorMessageConfirmationSMSCountryCode){that.showError("confirmation_sms_countryCode",data.errorMessageConfirmationSMSCountryCode);errors=true;}if(data.errorMessageConfirmationSMSNumber){that.showError("confirmation_sms_number",data.errorMessageConfirmationSMSNumber);errors=true;}if(data.errorMessagePushSMSCountryCode){that.showError("pushSms_countryCode",data.errorMessagePushSMSCountryCode);errors=true;}if(data.errorMessagePushSMSNumber){that.showError("pushSms_number",data.errorMessagePushSMSNumber);
errors=true;}data.servicesByRoom.each(function(item,index){if(item.errorMessage!=""){that.showError("evaluationEmail_"+index,item.errorMessage);errors=true;}});if((data.errorType=="backendError"||data.errorType=="validationError")&&!errors){this.sentSuccessfully=false;if(this.options.errorDiv=="undefined"){this.options.errorDiv=new Element("div",{"class":"errorMsg","text":this.options.error});}this.options.errorDiv.inject(this.wrap.getElement(".affirmationOptimized"),"top");}else{if(data.errorType==null||data.errorType=="null"||data.errorType!="backendError"){if(!errors){that.showSuccess();}}}},showSuccess:function(){console.log("showSuccess");this.errorCleanup();this.successCleanup();this.sentSuccessfully=true;if(this.options.successDiv=="undefined"){this.options.successDiv=new Element("div",{"class":"successMsg","text":this.options.successMsg});
}if($("evaluationEmail_0")){$("evaluationEmail_0").getSiblings("input")[0].value=$("evaluationEmail_0").value;}this.options.successDiv.inject(this.wrap.getElement(".affirmationOptimized"),"top");},clearForm:function(){this.wrap.getElements("input, select").each(function(item){if(item.get("type")!="hidden"&&item.get("type")!="submit"){if(item.get("type")=="checkbox"){item.checked=false;}else{var value="";if(item.get("tag")=="select"){value=-1;}item.value=value;}}});},clearAll:function(){this.wrap.getElements("input, select").each(function(item){if(item.get("type")!="submit"){if(item.get("type")=="checkbox"){item.checked=false;}else{var value="";if(item.get("tag")=="select"){value=-1;}item.value=value;}}});},errorCleanup:function(){this.wrap.getElements(".error, .errorMsg").each(function(item){if(item.get("tag")=="input"||item.get("tag")=="select"){item.removeClass("error");
}else{item.dispose();}});},successCleanup:function(){this.wrap.getElements(".successMsg").each(function(item){if(item.get("tag")=="input"||item.get("tag")=="select"){item.removeClass("success");}else{item.dispose();}});},isFilled:function(array){var status=false;array.each(function(item){if(item&&item!="-1"&&item!=""){if(typeOf(item)=="array"){item.each(function(arrayItem){if(item!=""){status=true;}});}else{status=true;}}});return status;},showError:function(id,msg){this.errorCleanup();this.successCleanup();var element=$(id);element.addClass("error");var error=new Element("span",{"class":"error",text:msg});error.inject(element,"after");},checkFields:function(){var newsletter=$("newsletterOrdered").checked,pushSms_countryCode=$("pushSms_countryCode").value,pushSms_number=$("pushSms_number").value,confirmation_sms_countryCode=$("confirmation_sms_countryCode").value,confirmation_sms_number=$("confirmation_sms_number").value;
if(!this.isFilled([newsletter,pushSms_countryCode,pushSms_number,confirmation_sms_countryCode,confirmation_sms_number,this.emailConfirmation(),["true"]])){$("submitAffirmationOptimized").addClass("disabled");$$("#affirmationSend .button")[0].addClass("disabled");}else{$("submitAffirmationOptimized").removeClass("disabled");$$("#affirmationSend .button")[0].removeClass("disabled");}},emailConfirmation:function(){var bt=this.options.bookingText;var rt=this.options.ratingText;var value=$("emailConfirmation").value;if(value==bt||value==rt){value="";}return value;},evalutaionEmail:function(){var bt=this.options.bookingText;var rt=this.options.ratingText;var array=[];$$(".evalutaionEmail").each(function(item){var value=item.value;if(value==bt||value==rt){value="";}array.push(value);});if(array[0]===""){array[0]="putMeToBlacklist@hrs.de";
}return array;},defaultInputText:function(elements){elements.each(function(item){var infoElement=item.getNext(".defaultInputText");if(infoElement.innerHTML.length>50){infoElement.innerHTML=infoElement.innerHTML.slice(0,50)+"...";}infoElement.addEvent("click",function(event){item.focus();});if(item.getPrevious("input[name=ordererEmail]")){if(item.getPrevious("input[name=ordererEmail]").value!==""){infoElement.setStyles({width:"0",overflow:"hidden"});}}else{if(item.value!==""){infoElement.setStyles({width:"0",overflow:"hidden"});}}item.addEvent("focus",function(event){infoElement.setStyles({width:"0",overflow:"hidden"});});});}});var ValidForm=new Class({Extends:LightBox,Implements:Options,options:{errorCodes:null,specialError:null,closeText:null,msg:[],preDefinedTexts:[],noEmpty:true},initialize:function(el,options){this.setOptions(options);
this.el=el;var theForm=$(this.el.form.id);this.theForm=theForm;var filled=false,filledCorrect=false;el.addEvent("click",function(e){ev=new Event(e);ev.preventDefault();theForm.getElements("span.error").each(function(errors){errors.dispose();});var allElements=theForm.getElements(".text");allElements.each(function(item,index){item.removeClass("error");if(item.hasClass("req")){this.required(item,index);}else{if(!item.hasClass("preDefined")){this.checkMail(item);}}}.bind(this));this.send(this,ev);}.bind(this));},required:function(els,i){if(els.value==""){els.addClass("error");var errorEl=new Element("span",{"class":"error"}).set("text",this.options.errorCodes[i]);errorEl.inject(els.getParent());}else{if(els.hasClass("mail")){this.checkMail(els);}}},checkMail:function(els){var errorEl=new Element("span",{"class":"error"}).set("text",this.options.specialError);
if(!/^[a-z0-9._%-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i.test(els.value)){els.addClass("error");errorEl.inject(els.getParent());}},send:function(e,ev){new Event(ev).stop();if(this.theForm.getElements("span.error").length==0){RecommendBTripAdvantages.recommend($("address1").value,$("address2").value,$("address3").value,$("addressant").value,$("subject").value,$("comment").value,false,this.response.bind(this));}},response:function(response){this.wrap=$("lb_sendRecommendationId");this.veil=$("lb_sendRecommendationId_veil");this.content=$("lb_sendRecommendationId").getElement("div.lightboxContent");this.closeLightBox();if(!this.help){this.help=new ContextSensitiveHelp([],{maxWidth:350,firstDirection:"left",closeText:this.options.closeText});}this.help.toolTip[(response.recommendationSuccessful?"add":"remove")+"Class"]("successLayer");
this.help.toolTip[(response.recommendationErrorCommonError?"add":"remove")+"Class"]("errorLayer");this.pic=$("jsOpenLB");this.pic.store("tooltipText",response.recommendationSuccessful?"<h4>"+this.options.msg[0]+"</h4><p>"+this.options.msg[1]+' <a class="link" id="jsMore" href="#">'+this.options.msg[2]+"</a></p>":"<h4>"+this.options.msg[3]+"</h4><p>"+this.options.msg[4]+"</p>");this.help.start(this.pic);this.help.position(this.pic);if(response.recommendationErrorCommonError){return true;}$("jsMore").addEvent("click",function(){this.help.hide();this.openLightBox(this.wrap);$("address1").value="";$("address2").value="";$("address3").value="";var ao=new PreDefinedInput($("address1"),this.options.preDefinedTexts[0],{isID:true});var ao=new PreDefinedInput($("address2"),this.options.preDefinedTexts[1],{isID:true});
var ao=new PreDefinedInput($("address3"),this.options.preDefinedTexts[2],{isID:true});}.bind(this));}});var RandomEls=new Class({Implements:Options,options:{els:"",path:""},initialize:function(parentEl,options){this.setOptions(options);parentEl.empty();var rPic=new Element("img",{"src":this.options.path+this.options.els.getRandom()}).inject(parentEl);}});var CutTextRatings=new Class({options:{theMoreText:"",theDots:"",setPos:285},initialize:function(commentBox,options){$("commentGallery").setStyle("display","block");this.setOptions(options);this.setGal(commentBox);},setGal:function(theList){var theCommentListItems=theList.getElements("div");var theMoreTxt=this.options.theMoreText;var theDots=this.options.theDots;theCommentListItems.each(function(item,index){var copyText=item.clone();var allPs=item.getElements("p").each(function(item){if(item.hasClass("noComment")){item.dispose();
}});var theInnerH=item.getSize().y,theLiH=item.getParent().getSize().y;if(theLiH<theInnerH){item.getElements("br").each(function(brs){brs.dispose();});var headLineHeight=item.getElement("h5").getSize().y,p1Height=item.getElements("p")[0].getSize().y,p2Height;if(item.getElements("p")[1]){p2Height=item.getElements("p")[1].getSize().y;}else{p2Height=0;}if(headLineHeight<20){if(p1Height>40){if(p2Height!=0){item.getElements("p")[1].dispose();}shortenText(item.getElements("p")[0],130);}else{if(p1Height<20){shortenText(item.getElements("p")[1],90);}else{if(p1Height<40){shortenText(item.getElements("p")[1],60);}}}}else{if(p1Height>30){if(p2Height!=0){item.getElements("p")[1].dispose();}shortenText(item.getElements("p")[0],100);}else{if(p1Height<10){shortenText(item.getElements("p")[1],70);}else{if(p1Height<30){shortenText(item.getElements("p")[1],40);
}}}}}function shortenText(el,theFactor){copyText.inject(item).addClass("hidden");if(!el){return;}var outputshort=el.innerHTML.clean().substr(0,theFactor);var fragment=outputshort.split(" ");var thelastWord=fragment.getLast();if(thelastWord&&thelastWord.test(" ")==false){fragment.pop();}fragment=fragment.join(" ");el.innerHTML=fragment+" "+theDots+" ";var more=new Element("a",{href:"javascript: void(0)","class":"contextHelp"}).inject(el).set("html",[theMoreTxt]);var c4=new ContextSensitiveHelp(more,{directions:["top","left","right","bottom"],firstDirection:"top",maxHeight:"auto",minWidth:300,maxWidth:300,toggle:true,openEvent:"mouseenter"});}}.bind(this));theList.removeClass("hidden");var el,count=0;var factor;var galTween=new Fx.Tween(theList.getElement("ul"),{link:"cancel",transition:Fx.Transitions.Circ.easeOut,duration:1000,property:"left"});
var hasLength=theList.getElement("ul").getElements("li").length;var forward=$("jsForward"),back=$("jsBack");if(hasLength<2){theList.getElement("ul").getElement("li").setStyle("padding","0");return;}forward.setStyle("opacity","1").removeClass("hidden");back.setStyle("cursor","default").removeClass("hidden");forward.addEvent("click",function(){back.setStyles({"cursor":"pointer","opacity":"1"});if(count!=theCommentListItems.length-1){count++;}if(count==theCommentListItems.length-1){forward.setStyles({"cursor":"default","opacity":".5"});}factor=this.options.setPos*count;galTween.start(-factor+"px");}.bind(this));back.addEvent("click",function(){forward.setStyles({"cursor":"pointer","opacity":"1"});if(count!=0){count--;}if(count==0){back.setStyles({"cursor":"default","opacity":".5"});}factor=this.options.setPos*count;
galTween.start(-factor+"px");}.bind(this));}});CutTextRatings.implement(new Options);var CutTextSingleRates=new Class({options:{cutFactor:"",linkText:""},initialize:function(allText,options){this.setOptions(options);allText.each(function(item,index){var cleanTxt=item.innerHTML.clean();if(cleanTxt.length>this.options.cutFactor){item.innerHTML=item.innerHTML+'<a href="#" class="link cut">'+this.options.linkText[1]+"</a>";var fullTextSize=item.getSize().y;var outputshort=item.innerHTML.clean().substr(0,200);var fragment=outputshort.split(" ");var thelastWord=fragment.getLast();if(thelastWord&&thelastWord.test(" ")==false){fragment.pop();}fragment=fragment.join(" ");var toggleLink=new Element("a",{"class":"link cut","href":"javascript: void(0)"});fragment=fragment+" ... ";item.innerHTML=fragment+" ... ";
var cutTextSize=item.getSize().y;var toggle=new Fx.Tween(item,{property:"height",onStart:function(){if(!toggle.isCut){item.set("html",fragment);toggleLink.inject(item).set("text",this.options.linkText[0]).removeClass("cutFull");}}.bind(this),onComplete:function(){if(toggle.isCut){item.set("html",cleanTxt);toggleLink.inject(item).set("text",this.options.linkText[1]).addClass("cutFull");}toggle.isCut=!toggle.isCut;}.bind(this)});toggle.start(cutTextSize);toggleLink.addEvent("click",function(){this.showHide(this,cleanTxt,fullTextSize,cutTextSize,toggle);}.bind(this));}},this);},showHide:function(e,cleanTxt,fullTextSize,cutTextSize,toggle){toggle.start(toggle.isCut?fullTextSize:cutTextSize);}});CutTextSingleRates.implement(new Options);var StyleSelectBox=new Class({Implements:[Options,Events],options:{hasExtraNumberStyle:false,extraClass:"",isGroup:false,hasLabel:false,isTracked:false,toggleSmooth:false,injectAfterSelect:false,withoutLeftClass:false,isTrackedDeferred:false},initialize:function(el,elForm,groupEl,options){this.el=el;
this.setOptions(options);var theAction=$("jsContentForm").action;if(this.options.isGroup&&groupEl){this.groupEl=groupEl;}var styleClass=(this.options.withoutLeftClass?"":"left");var listBox=new Element("div",{"class":"posNewList "+styleClass+this.options.extraClass});if(this.options.injectAfterSelect){console.log(listBox,el,"after");listBox.inject(el,"after");}else{console.log(listBox,el,el.getParent());listBox.inject(el.getParent());}if(this.options.hasExtraNumberStyle){var topTxt=el.getElements("option")[el.selectedIndex].get("text"),topPos=topTxt.lastIndexOf("("),topType=topTxt.slice(0,topPos),topNumber=topTxt.substring(topTxt.length,topPos);}else{var topType=el.getPrevious().innerHTML,topNumber="";}var listTopEl=new Element("span",{"class":"buttonLocal02 btnDisabled "+styleClass}),listSpan=new Element("span").inject(listTopEl),listTopLink=new Element("a",{"class":"select","href":"javascript:void(0)"}).inject(listSpan);
listTopLink.innerHTML=topType+"<i>"+topNumber+"</i>";listTopEl.inject(listBox);var listEl=new Element("ul",{"class":"selectList"}).inject(listBox);this.listEl=listEl;this.listTopEl=listTopEl;if(el.getElements("option").length>10){listEl.addClass("twoCol");}if(el.getElements("option").length>20){listEl.removeClass("twoCol");listEl.addClass("threeCol");}el.getElements("option").each(function(item,index){this.item=$(item);var selectedClass="",noBorder="";if(item.value!=-1){if(item.selected){selectedClass="sel";listTopEl.addClass("activeSelection");listTopEl.removeClass("btnDisabled");console.log(this);}if(index+1==el.getElements("option").length){noBorder="noBorder";}else{if(listEl.hasClass("twoCol")&&index+3>el.getElements("option").length&&el.getElements("option").length%2==0){noBorder="noBorder";
}else{if(listEl.hasClass("threeCol")){if(el.getElements("option").length%3==2&&index+2==el.getElements("option").length){noBorder="noBorder";}if(el.getElements("option").length%3==0&&index+4>el.getElements("option").length){noBorder="noBorder";}}}}var listItem=new Element("li",{"class":selectedClass+" "+noBorder}).inject(listEl);if(listEl.hasClass("twoCol")&&index%2==0){listItem.addClass("clearFix");}if(listEl.hasClass("threeCol")&&(index)%3==0){listItem.addClass("clearFix");}var theType,theNumber;if(this.options.hasExtraNumberStyle){var pos=item.get("text").lastIndexOf("(");theType=item.get("text").slice(0,pos);theNumber=item.get("text").substring(item.get("text").length,pos);}else{theType=item.get("text");theNumber="";}var listLink=new Element("a",{"href":"javascript:void(0)"}).inject(listItem).set("html",[theType+"<span>"+theNumber+"</span>"]);
if(this.options.isTracked){listLink.addClass("jsTrackLink").setAttribute("id",item.id);}if(this.options.isTrackedDeferred){listLink.setAttribute("data-deferredTrackingId",item.getProperty("data-deferredTrackingId"));}listLink.addEvent("mousedown",function(e){listTopLink.removeEvents("blur");});listLink.addEvent("mouseup",function(e){this.sendForm(e,index);}.bind(this));}}.bind(this));if(this.options.toggleSmooth){listTopLink.addEvents({"click":this.showHide.bind(this),"blur":this.showHide.bind(this)});var closedH=0,openH=listEl.getSize().size.y;var toggle=new Fx.Style(listEl,"height",{onStart:function(){if(!toggle.isCut){this.toggleListStyles(true);}}.bind(this),onComplete:function(){if(toggle.isCut){this.toggleListStyles(false);}toggle.isCut=!toggle.isCut;}.bind(this)});this.toggle=toggle;
this.closedH=closedH;this.openH=openH;listEl.setStyle("height",closedH);}else{this.hideTimeout=false;$$(listTopLink,listEl).addEvent("mouseover",this.showHide.bind(this));$$(listTopLink,listEl).addEvent("mouseout",this.callHide.bind(this));listEl.setStyle("display","none");}},callHide:function(event){this.hideTimeout=setTimeout(this.showHide.bind(this,event),100);},showHide:function(event){clearTimeout(this.hideTimeout);var target=event.target;if(this.options.toggleSmooth){if(event.type=="blur"&&this.toggle.isCut==false){return;}this.toggle.start(this.toggle.isCut?this.closedH:this.openH);}else{var newStyle=event.type=="mouseout"?"none":"";this.listEl.setStyle("display",newStyle);this.toggleListStyles(newStyle=="");}},toggleListStyles:function(showHide){this.listEl.setStyles({"border-color":showHide?"#c8c8c8":"#fff","z-index":showHide?1000:0});
},sendForm:function(e,index){var event=new Event(e);event.preventDefault();this.el.selectedIndex=index;form=$("jsContentForm");if(this.options.isGroup){this.groupEl.getElements("select").each(function(selectEl,index){if(selectEl!=this.el){selectEl.selectedIndex=0;}}.bind(this));}var targetID=this.el.id,inputId=targetID+".x",form=this.el.form;if(targetID=="changeHotelRating"){form.action+="#hRanking";}if(targetID=="submitChangeDimension"){form.action+="#h_distance";}var theInput=form.appendChild(new Element("input",{type:"hidden",name:inputId,id:inputId,value:"submit"}));form.submit();}});var TogglerEasy=new Class({initialize:function(toggleDivs,togglers){togglers.each(function(item,index){item.addEvent("click",function(){toggleDivs[index].toggleClass("hideIE");});});}});var ImageLoader=new Class({Implements:[Events,Options],options:{images:"",urls:"",attribute:"",onRequest:function(){},onSingleComplete:function(image){},onComplete:function(){}},initialize:function(options){this.setOptions(options);
this.options.length=this.options.images.length-1;this.isInitial=true;this.options.images.each(function(image,index){if(this.options.urls){image.src=this.options.urls[index];}else{if(image[this.options.attribute]){image.src=image[this.options.attribute];}image.removeProperty(this.options.attribute);}if(this.isInitial){this.fireEvent("request");this.isInitial=false;}image.addEvent("load",function(event){this.fireEvent("singleComplete",image);if(index==this.options.length){this.fireEvent("complete");}}.bind(this));}.bind(this));}});var ContextSensitiveLayer=new Class({Extends:ContextSensitiveHelp,initialize:function(elements,options){this.parent(elements,options);this.toolTip.getElement(".pike").dispose();},position:function(element,coords){this.toolTip.setStyles({top:"50%",left:"50%","margin-left":"-"+this.toolTip.getSize().x/2+"px","margin-top":-this.toolTip.getSize().y/2+window.getScroll().y+"px",visibility:"visible"});
this.fireEvent("onPosition");if(Browser.ie6){if(this.toolTip.getElements("span.close")[0]){this.toolTip.getElements("span.close")[0].toggleClass("ie6Redraw");}else{if(this.toolTip.getElements("a.close")[0]){this.toolTip.getElements("a.close")[0].toggleClass("ie6Redraw");}}}}});window.SubSessionStorage=window.SubSessionStorage||(function(){var name=window.name;try{JSON.decode(name);}catch(e){name="{}";}var storage=JSON.decode(name)||{};var WINDOWNAME="windowname";var WINDOWREFERRER="windowreferrer";storage[WINDOWREFERRER]=window.document.referrer;function refreshWindowName(){window.name=(storage[WINDOWNAME]?storage[WINDOWNAME]:window.name);}function Save(){if(storage[WINDOWREFERRER].contains("www.trivago.de/forward.php?")){return;}storage[WINDOWNAME]=window.name;window.name=JSON.encode(storage);
}if(window.addEventListener){window.addEventListener("unload",Save,false);}else{if(window.attachEvent){window.attachEvent("onunload",Save);}else{window.onunload=Save;}}if(window.addEventListener){window.addEventListener("load",refreshWindowName,false);}else{if(window.attachEvent){window.attachEvent("onload",refreshWindowName);}else{window.onload=refreshWindowName;}}return{setValue:function(key,value){storage[key]=value;},getValue:function(key){return storage[key];}};})();var Basket=new Class({Implements:Options,options:{properties:{},isFloatingFooter:false},languageDependentInitialization:{"ja":["roomOfferSelectionAdjustBackground","roomOfferTextAdjust"],"zh_CN":["roomOfferSelectionAdjustBackground"]},maxCountPerRoomType:{},initialize:function(basketElement,options){this.setOptions(options);
var newOfferBasket=false;if($$(".newOfferBasket").length>0){newOfferBasket=true;}this.basket=basketElement;this.isChangeEvent=false;this.totalPrice=$$("#totalPriceFooter .price");var detailsEntryInput=document.getElementsByName("detailsEntry")[0];this.detailsEntry=detailsEntryInput?detailsEntryInput.value:"booking";if(Browser.ie7){window.previouslySelectedOffers=window.previouslySelectedOffers||{push:function(item){var arr=SubSessionStorage.getValue("previouslySelectedOffers")||[];arr.push(item);SubSessionStorage.setValue("previouslySelectedOffers",arr);},pop:function(){var arr=SubSessionStorage.getValue("previouslySelectedOffers")||[];var ret=arr.pop();SubSessionStorage.setValue("previouslySelectedOffers",arr);return ret;}};}else{window.previouslySelectedOffers=window.previouslySelectedOffers||[];
}var mainHotelListObject=window.mainHotelListObject||{};this.numberOfRooms=mainHotelListObject.numberOfRooms||window.numberOfRooms||-1;var web4BasketFooter=$("web4BasketFooter");var web4BasketFooterInput=(web4BasketFooter?web4BasketFooter.getElement("input"):false);if(web4BasketFooterInput){web4BasketFooterInput.addEvent("click",function(event){this.submit(event,"$1initBooking=true&");}.bind(this));}else{if($$("input.contSubmit3")[0]){$$("input.contSubmit3")[0].addEvent("click",function(event){this.submit(event,"$1weiter=true&");}.bind(this));}}var updateWrapper=function(data){this.update(data);}.bind(this);var isInLayer=$("hotelDetailsHD");var contextHelp=new ContextSensitiveHelp($$(".contextHelpLink"),{openEvent:isInLayer?"mouseenter":"mouseenter",closeMe:isInLayer?true:false,onOpen:function(link,content){var contentText=content.getElement(".help-text > div");
var content=content.getElement(".help-text");content.style.position="relative";content.style.height=contentText.style.height;contentText.style.height="auto";contentText.style.overflow="hidden";contentText.style.position="static";new PerfectScrollbar(content);}});$$("tr.furtherOffers").each(function(item,index){this.toggleFurtherOffers(item);item.addEvent("click",function(event){event.stop();this.toggleFurtherOffers(item);var input=item.getElement(".furtherOffersLink");input.addClass("hide");input.inject(this.basket[0],"after");item.destroy();this.positionBottomLinks();this.basket[0].getElements("tr.jsSetH").each(function(item,index){item.getElements(".room_plus, .room_minus").each(function(item,index){item.addEvent("click",function(){function addUnavailability(item){if(item){item.addClass("off");
}}function removeUnavailability(item){if(item){item.removeClass("off");}}if($$("#singleroom_count")[0]&&typeof $$("#singleroom_count")[0]!=="undefined"){var singleRoomsNumber=$$("#singleroom_count")[0].get("value");}if($$("#doubleroom_count")[0]&&typeof $$("#doubleroom_count")[0]!=="undefined"){var doubleRoomsNumber=$$("#doubleroom_count")[0].get("value");}var numberOfRooms=item.getAttribute("data-roomtype");multipleRooms=$$("#singleroom_count")[0]&&$$("#doubleroom_count")[0],priceToHide=item.getParent(".room_selection");if(numberOfRooms=="singleroom"){numberOfRooms=singleRoomsNumber;}else{if(numberOfRooms=="doubleroom"){numberOfRooms=doubleRoomsNumber;}}$$(".room_count").each(function(element,index){var val=element.innerHTML;if(val==0){addUnavailability(element.getSiblings(".room_minus"));
removeUnavailability(element.getSiblings(".room_plus"));}else{if(val==numberOfRooms){removeUnavailability(element.getSiblings(".room_minus"));addUnavailability(element.getSiblings(".room_plus"));}}});});});});}.bind(this));}.bind(this));this.createMealSelect(".roomPrice .pseudoSelect");if(!newOfferBasket){this.createChangeEvents(".basketOffers select, .basketOffers input");}else{this.createChangeEvents(".basketOffers span.room_minus, .basketOffers span.room_plus, .basketOffers input");}this.createSupplementLayer($$(".editDiscounts"));this.positionBottomLinks();var currentLanguage=window.s.prop26;if(currentLanguage in this.languageDependentInitialization){this.initLanguageDependence(this.languageDependentInitialization[currentLanguage]);}if($("changeAndCancelOfferBasket")!=null){this.roomOfferSelectionAdjustBackground();
}},getRoomCountForType:function(type){var testNum,currentValue=Number(this.maxCountPerRoomType[type]);if(isNaN(currentValue)){testNum=Number($(type+"_count").value);this.maxCountPerRoomType[type]=isNaN(testNum)?0:testNum;}return Number(this.maxCountPerRoomType[type]);},initLanguageDependence:function(functionsArray){if(functionsArray.length<=0){return;}for(var i=0;i<functionsArray.length;i++){var functionName=functionsArray[i];if(typeof this[functionName]!="function"){continue;}this[functionName]();}},roomOfferSelectionAdjustBackground:function(){var offerSelecSize=$$("th.offerSelection").getSize();if(!offerSelecSize.hasOwnProperty(0)){return;}var backgroundWidth=78;var width=Number(offerSelecSize[0]["x"]);if(isNaN(width)||width<=backgroundWidth){return;}var position=(width-backgroundWidth)/2+"px -7150px";
var elements=$$("th.offerSelection div.offerHeaderWrap");for(var i=0;i<elements.length;i++){elements[i].style.backgroundPosition=position;}},roomOfferTextAdjust:function(){if($$(".offerSelection select.selectOffer").length>0){return;}$$("td.roomOffer .textWrap").removeClass("textWrapSmall");},toggleFurtherOffers:function(item){var end=false;item.getAllNext().each(function(tr){if(!end){if(tr.hasClass("selectionFootTR")){end=true;}else{tr.toggleClass("hide");}}});this.positionBottomLinks();},positionBottomLinks:function(){if(this.isChangeEvent){return;}$$(".jsSetH").each(function(tr,index){var parentHeight=0;tr.getElements(".textWrap").each(function(wrap,index){wrap.setStyles({height:"auto",position:"static"});var link=wrap.getElement(".contextHelpLink");if(link){link.setStyles({position:"static"});
}if($$(".newOfferBasket").length>0){var height=wrap.getParent().getComputedSize().height+25;}else{var height=wrap.getParent().getComputedSize().height+5;}if(Browser.ie8){height-=18;}if(Browser.ie10){height+=20;}if(Browser.opera){height-=5;}if(height>parentHeight){parentHeight=height;}});tr.getElements(".textWrap").each(function(wrap){var height;if($$(".newOfferBasket").length>0){height="auto";}else{height=parentHeight+"px";}wrap.setStyles({height:height,position:"relative"});if($$(".newOfferBasket").length<=0){var link=wrap.getElement(".contextHelpLink");if(link){link.setStyles({position:"absolute",bottom:0});}}});});},submit:function(event,parameter,callback){if(!this.isValid){event.stop();console.log(this.detailsEntry);BasketAjaxHandler.validateSelectedOffers(this.detailsEntry,function(data){if(s_trackLink&&data.linkTrackingData){s_trackLink(data.linkTrackingData.name,true,data.linkTrackingData.vars);
}if(data.valid){if(window.location.search.indexOf("ef_userid=")!==-1){parameter=parameter+"ef_userid="+window.location.search.split("ef_userid=")[1].split("&")[0]+"&";}if(typeof callback==="function"){callback({"success":true});}this.sendForm(event,parameter);}else{$$("td.roomTotalPrice").each(function(item){if(data.offerErrorMessages!=null){var tmp_id=item.id;var tmp_error=data.offerErrorMessages[tmp_id];if(tmp_error){item.set("html",item.get("html")+'<div class="error">'+tmp_error+"</div>");}}});this.isValid=false;var errorLayer=$$(".altErrorLayer")[0];errorLayer.setStyle("display","block");errorLayer.getElement(".help-text").set("html","<p>"+data.errorMessage+"</p>");if(Browser.ie6||Browser.ie7||this.options.isFloatingFooter){if($("wrap").hasClass("hotelData")){var basketFooterElement=$("basketFooter"),position=basketFooterElement.getPosition(),topPosition=position.y;
if(this.options.isFloatingFooter){if(basketFooterElement.getStyle("position")==="fixed"){topPosition=position.y+window.getScroll().y;}}errorLayer.setStyles({position:"absolute",top:topPosition,width:"400px",left:position.x+500+(this.options.isFloatingFooter?50:0)});}else{errorLayer.setStyles({position:"absolute",bottom:"10px",width:"400px",left:"500px"});}if(Browser.ie6&&!errorLayer.getElement("iframe")){var iFrame=new Element("iframe",{scrolling:"no",frameborder:"0",src:"javascript:''",styles:{"filter":"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)",position:"absolute"}});iFrame.inject(errorLayer,"inside");}errorLayer.inject($(document.body));}$$("div.web4Basket").addClass("errors");data.conflictingOffers.each(function(item){if($("selectOfferFromBasket_"+item.id)){$("selectOfferFromBasket_"+item.id).addClass("error");
}});this.jumpToAnchor();}}.bind(this));}},jumpToAnchor:function(){},sendForm:function(event,parameter){this.isValid=true;event.target.form.action=event.target.form.action.replace(/(\?clientId=.*&)/g,parameter);event.target.click();},clearErrors:function(){$$("td.roomTotalPrice").each(function(item){if(item.getElement(".error")!=null){item.getElement(".error").dispose();}});if($$(".altErrorLayer")[0]){$$(".altErrorLayer")[0].setStyle("display","none");}$$("div.web4Basket").removeClass("errors");$$(".web4Basket .error").each(function(element){element.removeClass("error");});},createMealSelect:function(el){var update=function(data){this.update(data);}.bind(this);var detailsEntry=this.detailsEntry;$$(el).each(function(item){if(!item.getParent().getParent().hasClass("hide")){var pS=new PseudoSelectInLayer(item,{onSelected:function(dt){dt.getParent().getElements("input").each(function(innerItem){innerItem.checked=false;
});var input=dt.getElement("input");input.checked=true;input.fireEvent("change");BasketAjaxHandler.selectMeal(detailsEntry,input.id.split("_")[1],input.id.split("_")[2],input.id.split("_")[3],function(data){update(data);}.bind(this));},topOffset:Browser.ie6?100:6,containerOffset:Browser.ie?85:0,oneEntry:false,maxWidthInput:130,definitionWidth:212});}});},createChangeEvents:function(el){var newBasket=$$(".newOfferBasket").length>0?true:false;var itemsSelectedByDefault=this.basket.getElements("#basket tr.selected td.offerSelection select")[0]||[];if(newBasket){var itemsSelectedByDefault=this.basket.getElements("#basket tr.selected td.offerSelection .room_plus")[0]||[];}var item,itemValue,itemId;while(item=itemsSelectedByDefault.pop()){var itemId=item.id,itemValue=item.value;if((itemId==undefined||itemId=="")&&item.type!="checkbox"){itemId=item.getAttribute("data-id");
itemValue=$(itemId).value;}if(itemValue>0){window.previouslySelectedOffers.push({detailsEntry:this.detailsEntry,id:itemId,value:itemValue});}}$$(el).each(function(item,index){var event="change";if(item.hasClass("checkbox")||item.hasClass("room_plus")||item.hasClass("room_minus")){event="click";}item.addEvent(event,function(e){var selectOfferQueue=[];this.clearErrors();this.isChangeEvent=true;var id=item.id,value=item.value,type;if((id==undefined||id=="")&&item.type!="checkbox"){id=item.getAttribute("data-id");type=item.getAttribute("data-roomtype");value=this.checkPossibleValue(type,Number($(id).value),item.hasClass("room_minus")?-1:1);$(id).value=value;$(id+"_display").innerHTML=value;if(value<=0){$(id+"_priceCount").style.display="none";}else{$(id+"_priceCount").style.display="block";}function addUnavailability(item){if(item){item.addClass("off");
}}function removeUnavailability(item){if(item){item.removeClass("off");}}if($$("#singleroom_count")[0]&&typeof $$("#singleroom_count")[0]!=="undefined"){var singleRoomsNumber=$$("#singleroom_count")[0].get("value");}if($$("#doubleroom_count")[0]&&typeof $$("#doubleroom_count")[0]!=="undefined"){var doubleRoomsNumber=$$("#doubleroom_count")[0].get("value");}var numberOfRooms=item.getParent(".jsSetH").getAttribute("data-roomtype"),multipleRooms=$$("#singleroom_count")[0]&&$$("#doubleroom_count")[0],priceToHide=item.getParent(".room_selection");if(numberOfRooms=="singleroom"){numberOfRooms=singleRoomsNumber;}else{if(numberOfRooms=="doubleroom"){numberOfRooms=doubleRoomsNumber;}}if(value==numberOfRooms){if(multipleRooms){item.addClass("off");removeUnavailability(item.getPrevious(".room_minus.off"));
}else{if(numberOfRooms==1){removeUnavailability($$(".room_plus"));addUnavailability($$(".room_minus"));removeUnavailability(item.getPrevious(".room_minus.off"));addUnavailability(item.addClass("off"));}else{removeUnavailability(item.getPrevious(".room_minus.off"));addUnavailability(item.addClass("off"));}}}else{if(value==0){multipleRooms?item.addClass("off"):addUnavailability(item.addClass("off"));removeUnavailability(item.getNext(".room_plus.off"));addUnavailability(item.getPrevious(".room_minus.off"));setTimeout(function(){priceToHide.getNext(".totalPriceCount").setStyle("display","none");},250);}else{if(value>0&&value<numberOfRooms){removeUnavailability(item.getPrevious(".room_minus.off"));removeUnavailability(item.getNext(".room_plus.off"));}else{if(value<numberOfRooms){removeUnavailability(item.getNext(".room_plus.off"));
}}}}if(value<=1&&durationStay==1){priceToHide.getNext(".roomTotalPrice").setStyle("display","none");priceToHide.getNext(".totalPriceCount").setStyle("display","none");}else{if(value>=1&&durationStay>1){priceToHide.getNext(".roomTotalPrice").setStyle("display","block");priceToHide.getNext(".totalPriceCount").setStyle("display","block");}else{setTimeout(function(){priceToHide.getNext(".roomTotalPrice").setStyle("display","block");priceToHide.getNext(".totalPriceCount").setStyle("display","block");},150);}}}if(item.getParent("td").hasClass("offerSelection")){var itemValue=item.value;if(item.getAttribute("data-id")!=null){itemValue=$(item.getAttribute("data-id")).value;}if(itemValue==0){item.getParent("tr").removeClass("selected");}else{item.getParent("tr").addClass("selected");if(this.numberOfRooms===1){var prevOffer;
while(prevOffer=window.previouslySelectedOffers.pop()){selectOfferQueue.push([prevOffer.detailsEntry,prevOffer.id.split("_")[1],0]);}window.previouslySelectedOffers.push({detailsEntry:this.detailsEntry,id:id,value:value});if(newBasket){var otherOfferSelects=$$("#basket td.offerSelection .room_selection input");if(otherOfferSelects==undefined){otherOfferSelects=[];}}else{var otherOfferSelects=this.basket.getElements("#basket td.offerSelection select")[0]||[];}for(var i=0;i<otherOfferSelects.length;++i){var otherSelect=otherOfferSelects[i];if(id!==otherSelect.id&&otherSelect.value>0){otherSelect.value=0;otherSelect.getParent("tr").removeClass("selected");if(newBasket){$(otherSelect.id+"_display").innerHTML=0;if(otherSelect.value<=0){$(otherSelect.id+"_priceCount").style.display="none";}else{$(otherSelect.id+"_priceCount").style.display="block";
}}selectOfferQueue.push([this.detailsEntry,otherSelect.id.split("_")[1],0]);}}selectOfferQueue=uniqueArray(selectOfferQueue,function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2];});}}}var lastQueryCallback=after(selectOfferQueue.length,function(){var id=item.id,value=item.value;if((id==undefined||id=="")&&item.type!="checkbox"){id=item.getAttribute("data-id");value=$(id).value;}if(item.hasClass("selectOffer")){BasketAjaxHandler.selectOffer(this.detailsEntry,id.split("_")[1],value,function(data){this.update(data);}.bind(this));}else{if(item.hasClass("checkbox")){BasketAjaxHandler.selectDiscount(this.detailsEntry,item.name.split("_")[1],item.name.split("_")[2],item.name.split("_")[3],(item.checked?item.value:""),function(data){this.update(data);}.bind(this));}else{if(id!=="submitAltCurr"){BasketAjaxHandler.selectMeal(this.detailsEntry,id.split("_")[1],id.split("_")[2],id.split("_")[3],function(data){this.update(data);
}.bind(this));}}}}.bind(this));if(selectOfferQueue.length===0){lastQueryCallback();}else{var args;while(args=selectOfferQueue.pop()){args.push(function(data){this.update(data);lastQueryCallback();}.bind(this));BasketAjaxHandler.selectOffer.apply(this,args);}}}.bind(this));}.bind(this));},checkPossibleValue:function(type,value,modifier){if((value+modifier)<=0){return 0;}var count=Number($(type+"_count").value);value=value+modifier;if(value>count){value=count;}return value;},createSupplementLayer:function(el){var detailsEntryInput=document.getElementsByName("detailsEntry")[0];var updateWrapper=function(data){this.update(data);}.bind(this);var layer=new ContextSensitiveLayer(el,{openEvent:"click",onBeforeOpen:function(){this.toolTip.getElements(".pseudoSelect").each(function(item){var pS=new PseudoSelectInLayer(item,{onSelected:function(dt){dt.getParent().getElements("input").each(function(innerItem){innerItem.checked=false;
});dt.getElement("input").checked=true;this.input.id=dt.getElement("input").id;},topOffset:Browser.ie6?100:6,containerOffset:Browser.ie?85:0,oneEntry:false,definitionWidth:212});});},onPosition:function(){this.toolTip.getElement(".submit").addEvent("click",function(event){event.stop();var detailsEntry=detailsEntryInput?detailsEntryInput.value:"booking",supplementArray=[],offerId;this.toolTip.getElements(".input").each(function(item,index){var ids=item.id.split("_");offerId=ids[1];var roomObj={roomNumber:ids[2],mealId:ids[3],discounts:{}};this.toolTip.getElements(".checkbox").each(function(checkbox){if(checkbox.name.split("_")[2]==ids[2]){roomObj.discounts[checkbox.name.split("_")[3]]=(checkbox.checked?"on":"");}}.bind(this));supplementArray.push(roomObj);}.bind(this));if(!supplementArray.length){this.toolTip.getElements(".checkbox").each(function(checkbox){var roomObj={};
roomObj.discounts={};roomObj.discounts[checkbox.name.split("_")[3]]=(checkbox.checked?"on":"");roomObj.mealId=null;roomObj.roomNumber=checkbox.name.split("_")[2];supplementArray.push(roomObj);}.bind(this));offerId=this.activeLink.getParent("tr").getElement(".selectOffer").id.split("_")[1];}BasketAjaxHandler.selectSupplements(detailsEntry,offerId,supplementArray,function(data){updateWrapper(data);}.bind(this));this.hide();}.bind(this));},maxWidth:300,maxHeight:250,varClassName:" supplementsLayer"});},setTotalPrice:function(data){console.log("data.selectedTariffType",data.selectedTariffType);$$("#totalPriceFooter .basketTotalPrice").set("text",data.basketTotalPrice.price);if(data.basketTotalPrice.altPrice!="()"){$$("#totalPriceFooter .basketTotalAltPrice").set("text",data.basketTotalPrice.altPrice);
}},getTextForTooltip:function(data){var text="";if(data.selectedTariffType){var tariffName=data.selectedTariffTitle.split(" ");var desc1,desc2,desc3,className;var language=window.s.prop26,boldedText="";switch(data.selectedTariffType){case"flex":case"businessFlex":className="bem_tooltip--flex";break;case"hotDeal":case"businessHotDeal":className="bem_tooltip--hotDeal";break;case"arrangement":className="bem_tooltip--arrangement";break;}if(language==="ru"){boldedText=tariffName[0]+"<strong> "+(tariffName[1]?tariffName[1]:"")+"</strong>";}else{boldedText="<strong>"+tariffName[0]+"</strong> "+(tariffName[1]?tariffName[1]:"");}text='<span class="hide"><span class="bem_tooltip '+className+'"><p><span>'+boldedText+"</span></p><ul><li><span></span>"+data.offerAdvantages[0]+"</li><li><span></span>"+data.offerAdvantages[1]+"</li><li><span></span>"+data.offerAdvantages[2]+"</li></ul><p></p></span></span>";
}return text;},prepareTooltip:function(data){$$("#stickyBar .hasTariff").dispose();$$("#detailsHead div.price .hasTariff").dispose();$$(".hotelInformationWrap div.price .hasTariff").dispose();$$("#totalPriceFooter .hasTariff").dispose();$$(".mapsWrap div.price .hasTariff").dispose();$$(".ratingTotalPriceArea .hasTariff").dispose();if(data.selectedTariffType&&(data.selectedTariffType=="flex"||data.selectedTariffType=="businessFlex"||data.selectedTariffType=="hotDeal"||data.selectedTariffType=="businessHotDeal"||data.selectedTariffType=="arrangement")){var textWithTooltip=this.getTextForTooltip(data);var htmlWithTooltip0=Elements.from(textWithTooltip);var badge0=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});var htmlWithTooltip1=Elements.from(textWithTooltip);
var badge1=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});var htmlWithTooltip2=Elements.from(textWithTooltip);var badge2=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});var htmlWithTooltip3=Elements.from(textWithTooltip);var badge3=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});var htmlWithTooltip4=Elements.from(textWithTooltip);var badge4=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});var htmlWithTooltip5=Elements.from(textWithTooltip);var badge5=new Element("span",{"class":"hasTariff jsTooltipAjax "+data.selectedTariffType});if($$("#bookingField .hotTariffInfo").length){if(data.selectedTariffType=="hotDeal"){$$("#bookingField .hotTariffInfo").setStyle("display","block");
}else{$$("#bookingField .hotTariffInfo").setStyle("display","none");}}var newBasket=$$(".newOfferBasket").length>0?true:false;var position="top";if(newBasket){position="bottom";}$$("#stickyBar div.priceTooltipContainer").grab(badge0,position);$$("#stickyBar div.priceTooltipContainer").grab(htmlWithTooltip0[0],position);$$("#detailsHead div.price .basketTotalPrice").grab(badge1,position);$$("#detailsHead div.price .basketTotalPrice").grab(htmlWithTooltip1[0],position);$$(".hotelInformationWrap div.priceTooltipContainer").grab(badge2,position);$$(".hotelInformationWrap div.priceTooltipContainer").grab(htmlWithTooltip2[0],position);$$("#totalPriceFooter .priceTooltipContainer").grab(badge3,position);$$("#totalPriceFooter .priceTooltipContainer").grab(htmlWithTooltip3[0],position);$$(".mapsWrap div.priceTooltipContainer").grab(badge4,position);
$$(".mapsWrap div.priceTooltipContainer").grab(htmlWithTooltip4[0],position);$$(".ratingTotalPriceArea div.priceTooltipContainer").grab(badge5,position);$$(".ratingTotalPriceArea div.priceTooltipContainer").grab(htmlWithTooltip5[0],position);var bodyWrapper=$(document.body);new ContextSensitiveHelp(bodyWrapper.getElements(".jsTooltipAjax"),{openEvent:"mouseenter",closeButton:false,maxWidth:480,minWidth:210,firstDirection:"top",widthOffset:15,timerDelay:10,showDelay:300,offsets:{"x":7,"y":7},maxHeight:"auto",overflowY:"visible",showPike:true,simpleDesign:true,deltaTopPosition:-6});}},updateLoyaltyPoints:function(roundedPrice){var $loyaltyInfo=$$(".loyaltyBonusInfo");function updateLoyaltyInfo(){var points=roundedPrice;$loyaltyInfo.getElements(".possibleLoyaltyPoints").each(function(el){el.set("text",points);
});}if($loyaltyInfo.length===0){return;}updateLoyaltyInfo();},update:function(data){function formatNicePrice(price){var index,lastPart,currency,firstPart,priceOrg,curr={"eur":"","usd":"$","gbp":""};if(price.indexOf("<sup>")>=0){return price;}price=price.replace(/[\(\)]+/g,"");index=price.lastIndexOf(" ");if(index==-1){return priceOrg;}currency=price.substr(index+1);price=price.substr(0,index);index=price.lastIndexOf(",");if(index<price.lastIndexOf(".")){index=price.lastIndexOf(".");}if(index==-1){return price+currency;}firstPart=price.substr(0,index);lastPart=price.substr(index+1);if(curr[currency.toLowerCase()]!=undefined){currency=curr[currency.toLowerCase()];}return firstPart+"<sup>"+lastPart+" </sup>"+currency;}var newBasket=$$(".newOfferBasket").length>0?true:false;var totalRoomAltPrice=data.totalRoomsPrice.altPrice;
var totalBasketAltPrice,totalRoomAltPrice;if(data.basketTotalPrice){totalBasketAltPrice=data.basketTotalPrice.altPrice;}if(data.totalRoomsPrice){totalRoomAltPrice=data.totalRoomsPrice.altPrice;}if(!data.offerId){console.log("error in Basket.update()");return;}var el=$("selectOfferFromBasket_"+data.offerId);if(!el){return;}var row=el.getParent("tr");if(data.offerPriceDetails.tariffTypeStyleClass){row.addClass(data.offerPriceDetails.tariffTypeStyleClass+"Basket");}if(newBasket&&data.basketTotalPrice.price!=undefined){data.basketTotalPrice.price=formatNicePrice(data.basketTotalPrice.price);}if(newBasket&&data.basketTotalPrice.altPrice!=""&&data.basketTotalPrice.altPrice!=undefined&&data.basketTotalPrice.altPrice!="()"){data.basketTotalPrice.altPrice="("+formatNicePrice(data.basketTotalPrice.altPrice)+")";
}this.setTotalPrice(data);if(totalBasketAltPrice&&totalBasketAltPrice!="()"){if(newBasket){$$("#totalPriceFooter .basketTotalAltPrice").set("html","("+formatNicePrice(totalBasketAltPrice)+")");}else{$$("#totalPriceFooter .basketTotalAltPrice").set("text",totalBasketAltPrice);}}var roomTotalPriceEl=row.getElement(".roomTotalPrice");if(newBasket){roomTotalPriceEl.set("html",(data.totalRoomsPrice.price?'<span class="price">'+formatNicePrice(data.totalRoomsPrice.price)+"</span>":""));}else{roomTotalPriceEl.set("html",(data.totalRoomsPrice.price?'<span class="price">'+data.totalRoomsPrice.price+"</span>":""));}if(location.search.contains("originalJS=true")&&data.loyaltyPointsInfoTest){roomTotalPriceEl.set("html",roomTotalPriceEl.get("html")+"<!-- "+data.loyaltyPointsInfoTest+" -->");}if(data.totalRoomsPrice&&totalRoomAltPrice!=""){if(newBasket){roomTotalPriceEl.set("html",roomTotalPriceEl.get("html")+" <span class='alt_price'>("+formatNicePrice(totalRoomAltPrice)+")</span>");
}else{roomTotalPriceEl.set("html",roomTotalPriceEl.get("html")+" "+totalRoomAltPrice+"<br />");}}if(data.numberOfRoomsLeftLabel!=""){if(row.getElements(".shortageInfo").length>0){row.getElements(".shortageInfo")[0].innerHTML=data.numberOfRoomsLeftLabel;}else{var errorDiv=new Element("span").addClass("shortageInfo").inject(roomTotalPriceEl,"bottom");errorDiv.set("html",data.numberOfRoomsLeftLabel);}}else{if(row.getElements(".shortageInfo").length>0){row.getElements(".shortageInfo")[0].innerHTML="";}}var bookingConditionsLayer=function(){var string="",offerConditions=data.offerConditions;if(offerConditions.title){string+="<h4>"+offerConditions.title+"</h4>";}if(offerConditions.bookingTypeConditionCaption){string+="<h5>"+offerConditions.bookingTypeConditionCaption+"</h5>"+"<p>"+offerConditions.bookingTypeCondition+"</p>";
}if(offerConditions.additionalBookingConditions){string+="<p>"+offerConditions.additionalBookingConditions+"</p>";}if(offerConditions.minimumStayCondition){string+="<p>"+offerConditions.minimumStayCondition+"</p>";}if(offerConditions.paymentConditionsCaption){string+="<h5>"+offerConditions.paymentConditionsCaption+"</h5> <ul>";offerConditions.paymentConditions.each(function(item){string+="<li>"+item+"</li>";});string+="</ul>";}if(offerConditions.restrictedOfferSelectedCondition){string+="<p>"+offerConditions.restrictedOfferSelectedCondition+"</p>";}if(offerConditions.cancelConditionsCaption){string+="<h5>"+offerConditions.cancelConditionsCaption+"</h5>";offerConditions.cancelConditions.each(function(item){string+="<li>"+item+"</li>";});string+="</ul>";}if(offerConditions.specialCancelConditionCaption){string+="<h5>"+offerConditions.specialCancelConditionCaption+"</h5><p>"+offerConditions.specialCancelCondition+"</p>";
}return string;}();if(newBasket){row.getElement(".roomOffer .contextHelpLink").store("tooltipText",bookingConditionsLayer);}else{row.getElement(".bookingConditions .contextHelpLink").store("tooltipText",bookingConditionsLayer);}var priceDetailsLayer=function(){var string="",priceDetails=data.offerPriceDetails.priceDetailsLayer;if(priceDetails.title){string+="<h4>"+this.options.properties.priceDetailsTitle+' "'+priceDetails.title+'"</h4>';}if(priceDetails.rateDescription){string+="<h5>"+this.options.properties.externalRateDescriptionTitle+"</h5><p>"+priceDetails.rateDescription+"</p>";}if(priceDetails.roomDescription){string+="<h5>"+this.options.properties.externalRoomDescriptionTitle+"</h5><p>"+priceDetails.roomDescription+"</p>";}if(priceDetails.taxInformation){string+='<h5 id="taxDescritpion">'+this.options.properties.externalTaxInformationTitle+"</h5><p>"+priceDetails.taxInformation+"</p>";
}string+='<table class="data"><thead><tr><th>'+this.options.properties.periodOfTime+"</th><th>"+this.options.properties.board+"<span>"+this.options.properties.perPersonAndNightBrackets+'</span></th><th class="price">'+this.options.properties.price+"</th></tr></thead><tbody>";priceDetails.roomsPriceTables.each(function(item,index){if(item.roomLabel){string+='<tr><td colspan="3" class="special">'+item.roomLabel+"</td></tr>";}item.pricePerDayList.each(function(innerItem,innerIndex){string+="<tr><td>"+innerItem.dateRange+"</td><td><span>"+innerItem.mealLabel+"</span>";if(innerItem.mealDescription){string+='<span class="layerTooltip">'+innerItem.mealDescription+"</span>";}string+='</td><td class="price">'+innerItem.priceBean.price;if(innerItem.priceBean.altPrice!="()"){string+=" <span>"+innerItem.priceBean.altPrice+"</span>";
}string+="</td></tr>";});if(item.pricePerDayOutOffPackageList.length){string+='<tr><td colspan="3">'+item.pricePerDayOutOffPackageCaption+"</td></tr>";item.pricePerDayOutOffPackageList.each(function(innerItem,innerIndex){string+="<tr><td>"+innerItem.dateRange+"</td><td>"+innerItem.mealLabel+'</td><td class="price">'+innerItem.priceBean.price;if(innerItem.priceBean.altPrice!="()"){string+=" <span>"+innerItem.priceBean.altPrice+"</span>";}string+="</td></tr>";});}item.selectedDiscounts.each(function(discount){string+='<tr><td colspan="2">'+discount.label+'</td><td class="price">'+discount.priceBean.price;if(discount.priceBean.altPrice!="()"){string+=" <span>"+discount.priceBean.altPrice+"</span>";}string+="</tr>";});if(item.roomOccupancySupplementsDescription){string+='<tr><td colspan="3">'+item.roomOccupancySupplementsDescription+"</td></tr>";
}});string+="</tbody><tfoot>";if(priceDetails.roomsTotalPriceExclTax&&priceDetails.roomsTotalPriceExclTax.price!=""&&priceDetails.roomsTotalPriceExclTax.price!="()"){string+='<tr><td colspan="2">'+this.options.properties.roomPrice+":</td>";string+='<td class="price roomsTotalPriceExclTax"><strong>'+priceDetails.roomsTotalPriceExclTax.price+"</strong>";if(priceDetails.roomsTotalPriceExclTax.altPrice&&priceDetails.roomsTotalPriceExclTax.altPrice!=""&&priceDetails.roomsTotalPriceExclTax.altPrice!="()"){string+="<span>"+priceDetails.roomsTotalPriceExclTax.altPrice+"</span>";}string+="</td></tr>";}string+='<tr><td colspan="2">'+this.options.properties.roomPrice+((priceDetails.roomsTotalPriceExclTax&&priceDetails.roomsTotalPriceExclTax.price!=""&&priceDetails.roomsTotalPriceExclTax.price!="()")?("<br />"+this.options.properties.totalPriceInclTax):"")+':</td><td class="price">'+priceDetails.roomsTotalPrice.price;
if(priceDetails.roomsTotalPrice.altPrice!="()"){string+=" <span>"+priceDetails.roomsTotalPrice.altPrice+"</span>";}string+="</td></tr>";string+="</tfoot></table>";return string;}.bind(this)();row.getElement(".roomPrice .contextHelpLink").store("tooltipText",priceDetailsLayer);var roomPrice=function(){var string="",priceDetails=data.offerPriceDetails;if(priceDetails.mealDiscountOptionsLayerExist){string+='<div class="discountsWrap">';if(priceDetails.selectedMealLabels){priceDetails.selectedMealLabels.each(function(item){string+=item+"<br/>";});}if(priceDetails.selectedDiscountLabels){priceDetails.selectedDiscountLabels.each(function(item){string+=item+"<br/>";});}string+='<div class="editDiscounts">'+this.options.properties.edit+'</div><div class="hide"><h4>'+this.options.properties.boardOptions+"</h4>";
priceDetails.roomsMealDiscountOptions.each(function(item){if(item.roomLabel){string+="<p><strong>"+item.roomLabel+"</strong></p>";}if(item.mealOptions){string+='<div class="offersWrap"><dl class="pseudoSelect">';item.mealOptions.each(function(meal){string+="<dt><label>"+meal.label+'<input type="radio" id="mealoption_'+item.offerId+"_"+item.roomNumber+"_"+meal.id+'" '+(meal.selected?'checked="true"':"")+" /></label>";string+="<dd>";if(meal.description){string+="<p>"+meal.description+"</p>";}if(meal.priceInfo){string+="<p>"+meal.priceInfo+"</p>";}string+="</dd>";});string+="</dl></div>";}if(item.discountOptions){item.discountOptions.each(function(innerItem){string+='<p><label class="tooltip" title="'+innerItem.priceInfo+'"><input type="checkbox" class="checkbox" '+(innerItem.selected?' checked="true"':"")+' name="'+innerItem.selectTagName+'"/>'+innerItem.label+"</label></p>";
});}});string+='<span class="button global right"><span><a href="#" class="submit">'+this.options.properties.submit+"</a></span></span></div></div>";}else{if(priceDetails.roomsMealDiscountOptions.length){priceDetails.roomsMealDiscountOptions.each(function(item){if(item.mealOptions){if(item.disabled){string+="<p>"+item.firstMealOption.label+"</p>";}else{string+='<div class="offersWrap"><dl class="pseudoSelect">';item.mealOptions.each(function(meal){string+="<dt><label>"+meal.label+'<input type="radio" id="mealoption_'+item.offerId+"_"+item.roomNumber+"_"+meal.id+'" '+(meal.selected?'checked="true"':"")+" /></label>";string+="<dd>";if(meal.description){string+="<p>"+meal.description+"</p>";}if(meal.priceInfo){string+="<p>"+meal.priceInfo+"</p>";}string+="</dd>";});string+="</dl></div>";}}else{priceDetails.selectedMealLabels.each(function(meal){string+="<p>"+meal+"</p>";
});}if(item.discountOptions){item.discountOptions.each(function(innerItem){string+='<label class="tooltip" title="'+innerItem.priceInfo+'"><input type="checkbox" '+(item.disabled?'disabled="true"':"")+' class="checkbox" '+(innerItem.selected?' checked="true"':"")+' name="'+innerItem.selectTagName+'"/>'+innerItem.label+"</label> ";});}});}else{if(priceDetails.selectedMealLabels){string+=priceDetails.selectedMealLabels[0];}if(priceDetails.selectedDiscountLabels){string+=priceDetails.selectedDiscountLabels;}}}return string;}.bind(this)();if(row.getElement(".roomPrice .supplements")!=null){row.getElement(".roomPrice .supplements").set("html",roomPrice);}if(data.offerPriceDetails.mealDiscountOptionsLayerExist){this.createSupplementLayer(row.getElement(".roomPrice .editDiscounts"));}else{this.createMealSelect(row.getElements(".roomPrice .pseudoSelect"));
this.createChangeEvents(row.getElements(".roomPrice input, .roomPrice select"));}this.positionBottomLinks();$$(".tip-wrap").each(function(item){item.dispose();});tooltips=new Tips($$(".tooltip"));if(window.wtAjaxCallback&&typeof wtAjaxCallback=="function"){wtAjaxCallback();}var businessTariffBar=$$("#hotelDetailsHD > .businessTariffBar, #hotelDetailsHD #jsContentForm > .businessTariffBar");if(data.basketTotalBusinessPrice&&businessTariffBar.length&&data.basketTotalBusinessDiscount&&data.basketTotalPrice.price){var breakfastInfoBar=businessTariffBar[0].getElement(".breakfastInfo > span");if(parseInt(data.basketTotalBusinessDiscount)>0){businessTariffBar[0].getElement(".priceArea .noStrike .priceValue").set("html",data.basketTotalBusinessPrice);businessTariffBar[0].getElement(".priceArea .noStrike").removeClass("verylongPrice").removeClass("longPrice");
if(data.basketTotalBusinessPrice.length>22){businessTariffBar[0].getElement(".priceArea .noStrike").addClass("verylongPrice");}else{if(data.basketTotalBusinessPrice.length>19){businessTariffBar[0].getElement(".priceArea .noStrike").addClass("longPrice");}}businessTariffBar.setStyle("display","block");}else{businessTariffBar.setStyle("display","none");}if(data.mealInfo&&breakfastInfoBar){breakfastInfoBar.set("html",data.mealInfo.indexOf("(")>=0?data.mealInfo.slice(0,data.mealInfo.indexOf("(")):data.mealInfo);}}var stickyBarDiv=$("stickyBar");if(stickyBarDiv&&stickyBarDiv!==null){var priceInStickyBar=stickyBarDiv.getElement(".basketTotalPrice"),priceToManipulate=stickyBarDiv.getElement(".price");if(priceInStickyBar&&priceInStickyBar.innerHTML[0]=="0"){priceToManipulate.removeClass("multiple");
}else{if(priceInStickyBar&&priceInStickyBar.innerHTML[0]!="0"){priceToManipulate.addClass("multiple");}}}this.updateLoyaltyPoints(data.basketTotalPrice.roundedTotalPrice);}});var PseudoSelectInLayer=new Class({Extends:PseudoSelect,initialize:function(list,options){this.parent(list,options);this.input.id=this.selectedListElement.getElement("input").id;},update:function(list){this.parent(list);this.container.inject($(document.body),"bottom");},blurListElement:function(event){if(this.container){if(event.target!==this.input&&!this.input.contains(event.target)){this.closeList();}}},openList:function(){this.parent();var coordinates=this.input.getCoordinates();this.container.setStyles({top:coordinates.top+coordinates.height,left:coordinates.left,"z-index":100000});}});var FaceBookApp=new Class({Implements:Options,initialize:function(options){},submit:function(event,input){event.stop();
this.input=input;NewsletterSubscription.subscribe(this.input.value,true,true,false,this.response.bind(this));},response:function(response){var text=" ";for(i in this.options){if(response[i]){text=this.options[i].replace(/\{0}/,response.email);}}if(!this.help){this.help=new ContextSensitiveHelp([],{maxWidth:300,firstDirection:"top",closeText:this.options.windowClose});}this.input[(response.subscriptionSuccessful?"remove":"add")+"Class"]("error");this.help.toolTip[(response.subscriptionSuccessful?"remove":"add")+"Class"]("errorLayer");this.help.toolTip[(response.subscriptionSuccessful?"add":"remove")+"Class"]("successLayer");this.input.store("tooltipText",text);this.help.start(this.input);this.help.position(this.input);if(s_trackLink&&response.linkTrackingData){s_trackLink(response.linkTrackingData.name,true,response.linkTrackingData.vars);
}}});var FaceBookGallery=new Class({Implements:Options,initialize:function(el,lis,next,prev,options){this.el=el;this.setOptions(options);var theEnd=(lis.length*109)-(4*109),lastClickEnd=(lis.length*109)-(5*109),isList=true,max=this.options.theHeight[0];for(var i=1;i<this.options.theHeight.length;i++){if(this.options.theHeight[i]>max){max=this.options.theHeight[i];}}this.theEnd=theEnd;this.lastClickEnd=lastClickEnd;this.isList=isList;this.max=max;if(lis.length<4){next.setStyle("opacity",0.5);}if(el.getStyle("left").toInt()==0){prev.setStyle("opacity",0.5);}el.set("tween",{link:"ignore"});this.Pic=new Element("img");this.TextBox=new Element("div",{"class":"txt"});this.TextBox2=new Element("div",{"class":"txt number"});function setPos(el){var hM=(436-this.options.theWidth[this.index])/2,vM=(this.max-this.options.theHeight[this.index])/2;
this.Pic.setStyle("margin-top",vM+"px").setProperty("src",this.options.theBigPics[this.index]);this.TextBox.setStyle("left",hM+"px").set("text",this.options.theTitles[this.index]);this.TextBox2.setStyle("right",hM+"px").set("text",this.index+1+" "+this.options.theFromText+" "+lis.length);this.index>0?prev.setStyle("opacity",1):prev.setStyle("opacity",0.5);this.index+1<lis.length?next.setStyle("opacity",1):next.setStyle("opacity",0.5);$("next").setStyle("margin-top",(this.max-60)/2+"px");$("prev").setStyle("margin-top",(this.max-60)/2+"px");}var setPos=setPos.bind(this);lis.each(function(item,index){item.addEvent("click",function(){$("showList").setStyle("display","block");this.isList=false;this.index=index;this.Pic.inject(el.getParent());this.TextBox.inject(el.getParent());this.TextBox2.inject(el.getParent());
setPos();el.getParent().setStyle("height",this.max+25+"px");el.setStyle("display","none");if(!this.clickPic){this.clickPic=this.Pic.addEvent("click",function(){if(this.index+1<lis.length){this.index=this.index+1;setPos();}else{return;}}.bind(this));}}.bind(this));}.bind(this));next.addEvent("click",function(){if(this.isList){var leftPos=el.getStyle("left").toInt();if(leftPos>-this.theEnd){el.tween("left",leftPos-109);prev.setStyle("opacity",1);}if(leftPos==-this.lastClickEnd){next.setStyle("opacity",0.5);}}else{if(this.index+1<lis.length){this.index=this.index+1;setPos();}}}.bind(this));prev.addEvent("click",function(){if(this.isList){var leftPos=el.getStyle("left").toInt();if(leftPos<0){el.tween("left",leftPos+109);next.setStyle("opacity",1);}if(leftPos==-109){prev.setStyle("opacity",0.5);
}}else{if(this.index-1>-1){this.index=this.index-1;setPos();}}}.bind(this));$("showList").addEvent("click",function(){this.showGallery();}.bind(this));},showGallery:function(){this.el.getParent().removeProperty("style");$("next").removeProperty("style");$("prev").removeProperty("style");this.el.setStyle("display","block");this.Pic.dispose();this.TextBox.dispose();this.TextBox2.dispose();this.isList=true;$("showList").setStyle("display","none");var leftPos=this.el.getStyle("left").toInt();if(leftPos==-this.theEnd){$("next").setStyle("opacity",0.5);}if(leftPos==0){$("prev").setStyle("opacity",0.5);}}});var ShowHideModules=new Class({initialize:function(els){els.each(function(item,index){var toToggle=item.getParent().getNext();if(!item.checked){toToggle.addClass("hide");}item.addEvent("click",function(){toToggle.toggleClass("hide");
});});}});var EditHotelInfos=new Class({Implements:Options,initialize:function(teaser,textarea,btns,toggleBtn,numb,options){this.setOptions(options);this.numb=numb;this.teaser=teaser;this.counter=1;this.textarea=textarea;this.fullText=this.teaser.innerHTML;if(this.teaser.getSize().y>40){this.shortenText();}if(!toggleBtn){return;}this.countChars(this.textarea.value.length);toggleBtn.addEvent("click",function(){this.toggleBoxes();}.bind(this));btns.each(function(item){item.addEvent("click",function(event){this.editText(event);}.bind(this));}.bind(this));textarea.addEvent("keyup",function(){this.countChars(this.textarea.value.length);}.bind(this));},countChars:function(charLength){500-charLength>0?this.numb.innerHTML=1380-charLength:this.numb.innerHTML=0;},shortenText:function(){var fragment=this.fullText.clean().substr(0,200).split(" ");
if(fragment.getLast()&&fragment.getLast().test(" ")==false){fragment.pop();}this.teaser.innerHTML=fragment.join(" ")+" "+this.options.toggleText[0];$("toggleText").addEvent("click",function(){this.setFullText();}.bind(this));},setFullText:function(){this.teaser.innerHTML=this.fullText+" "+this.options.toggleText[1];this.teaser.removeProperty("style");$("toggleText").addEvent("click",function(){this.shortenText();}.bind(this));this.counter=this.counter+1;},editText:function(event){if(event.target.hasClass("jsSetBack")){this.textarea.innerHTML=this.options.initialText;this.textarea.value=this.options.initialText;}else{this.textarea.innerHTML=this.textarea.value;this.teaser.innerHTML=this.textarea.value;this.fullText=this.textarea.value;this.toggleBoxes();}if(this.teaser.getSize().y>40){this.shortenText();
}this.countChars(this.textarea.value.length);},toggleBoxes:function(){this.counter=1;this.textarea.value=this.fullText;$("showMode").toggleClass("hide");$("editMode").toggleClass("hide");}});var preventDoubleSubmit=function(formId){if(typeof formId==="string"&&$(formId)){$(formId).addEvent("submit",function(event){$(formId).getElements("input[type=submit]").each(function(item,index){item.addEvent("click",function(event){event.stop();});});});}};function deactivateRetargeting(){if(window.retargetingObj){window.retargetingObj.disableUnloadEvent();}}var Retargeting=new Class({Implements:[Options,Events],options:{idsRequired:["orderer.firstname","orderer.lastname","orderer.email"],optionalNames:["orderer.email","orderer.phone.countryCode","orderer.phone.number","reservationType"],requestTimeoutDelay:250,language:" ",client:" "},initialize:function(form,options){this.setOptions(options);
this.isActivated=true;this.invokeOnlyOnce=false;this.clickOnSubmit=false;this.retargetingCookie=this.options.retargetingCookie;this.form=form.addEvent("submit",this.disableUnloadEvent.bind(this));$(document).addEvent("keydown",function(event){if(event.key==="f5"){this.disableUnloadEvent();}}.bind(this));this.options.data;var url=this.options.url;this.requestTimeout=false;this.request=new Request({url:url,async:false,method:"post"});$(window).addEvent("unload",this.handleUserLeavesPage.bind(this));$(window).addEvent("triggerBeforeUnlod",this.handleUserLeavesPage.bind(this));this.isClientGermanNext=(this.options.language==="de"&&this.options.client==="NEXT");$(document).addEvent("click",function(evt){if(this.isClientGermanNext){var $et=$(evt.target);if($et.get("tag")==="input"&&$et.type&&$et.type==="submit"){this.clickOnSubmit=true;
}else{if(($et.get("tag")==="img"&&$et.getParent().getParent().hasClass("logo"))||($et.get("tag")==="a"&&!$et.hasClass("HelpPic")&&!$et.hasClass("contextHelpLink")&&!$et.hasClass("close")&&$et.href.indexOf("#")==-1)){this.handleUserLeavesPage();}}}}.bind(this));this.cookieData=false;this.retargetingCookie=new RetargetingCookie();this.readRetargetingCookie();if(this.cookieData.popUnderVal){if(this.cookieData.popUnderVal!=this.options.popUnderVal){this.calculateRetargetingType();}}else{this.calculateRetargetingType();}},readRetargetingCookie:function(){var cookieData=this.retargetingCookie.getData();if(cookieData){this.cookieData=cookieData;}else{this.cookieData={};}this.retargetingCookieIsAlreadySet=this.cookieData.popUnderVal?true:false;},calculateRetargetingType:function(){this.cookieData.retargetType=(Math.random()<=this.options.popUnderVal)?"P":"E";
this.cookieData.popUnderVal=this.options.popUnderVal;},prepareCookieData:function(){this.cookieData.destination=this.options.locationId;this.cookieData.email=$("orderer.email").value;this.cookieData.firstName=$("orderer.firstname").value;this.cookieData.lastName=$("orderer.lastname").value;},disableUnloadEvent:function(){this.isActivated=false;},handleUserLeavesPage:function(evt){if(this.isActivated&&this.validateRequiredElements()){this.disableUnloadEvent();if(this.isClientGermanNext){this.prepareCookieData();if(this.cookieData.retargetType==="P"){var openFlag=false;if(this.retargetingCookieIsAlreadySet&&this.cookieData.timestamp){var todayDay=new Date().getDate(),todayMonth=new Date().getMonth(),rtDay=new Date(parseInt(this.cookieData.timestamp)).getDate(),rtMonth=new Date(parseInt(this.cookieData.timestamp)).getMonth();
if(todayDay!==rtDay){openFlag=true;}else{if(todayMonth!==rtMonth){openFlag=true;}}}else{openFlag=true;}if(openFlag){this.cookieData.timestamp=Date.parse(new Date());this.openRetargetingWindow();}}this.retargetingCookie.setData(this.cookieData);this.retargetingCookieIsAlreadySet=true;}this.sampleData();}},openRetargetingWindow:function(){var popUnderWindow=window.open(this.options.retargetingPopunderURL,"hrsPopunder","width=777,height=630,top=0,scrollbars=no,resizable=no,toolbar=no,location=1,menubar=0,status=1,directories=0");window.focus();popUnderWindow.blur();},validateRequiredElements:function(){var isValid=true,element,elementId;for(var i=0,l=this.options.idsRequired.length;i<l;i++){elementId=this.options.idsRequired[i];element=$(elementId);if(!element){console.log("required element does not exist");
isValid=false;break;}if(!element.value||(element.value&&element.value==="")||element.hasClass("predefined")){isValid=false;break;}if(elementId.test("email")){var regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;if(!regex.test(element.value)){isValid=false;break;}}}return isValid;},sampleData:function(){var requestData=this.options.data,formData={},sampleArray=this.options.optionalNames,firstNames=$$("[type=text][name$='.firstname']"),lastNames=$$("[type=text][name$='.lastname']");firstNames.each(function(firstName,index){var firstName=firstName,firstNameValue=firstName.value,lastName=lastNames[index],lastNameValue=lastName.value;if(firstNameValue!==""){formData[firstName.name]=firstNameValue;
}if(lastNameValue!==""){formData[lastName.name]=lastNameValue;}});try{Array.each(this.options.optionalNames,function(elementName){var element=this.form[elementName];if(elementName==="reservationType"){if(element&&element.length){Array.each(element,function(radio){if(radio&&radio.checked){formData.reservationType=radio.value;}});}}if(element&&element.value&&!$(element).hasClass("preDefined")&&element.value!=-1&&element.value!=""){formData[elementName]=element.value;}},this);}catch(error){console.log("Retargeting error",error);}Object.append(requestData,formData);this.sendRequest(requestData);},sendRequest:function(requestData){this.requestTimeout=setTimeout(function(){if(this&&this.request&&typeof this.request.cancel==="function"){this.request.cancel();}}.bind(this),this.options.requestTimeoutDelay);
this.request.send({data:requestData});}});var FloatingContainer=new Class({Implements:[Events,Options],options:{offsetTop:10},initialize:function(floatingElement,options){this.setOptions(options);this.floatingElement=floatingElement;if(floatingElement){this.floatingElement=floatingElement;var supportFixedPosition=!Browser.ie6;this.isTouch=Browser.isMobileTouch;this.debugPositionFixed=(Browser.ie6||(this.isTouch&&!supportFixedPosition));if(supportFixedPosition){window.addEvents({"scroll":this.updatePos.bind(this),"resize":this.resizeDelayed.bind(this)});this.parentContainer=this.floatingElement.getParent();this.coords=this.parentContainer.getCoordinates();this.positionRangeTop=this.parentContainer.getCoordinates().top-this.options.offsetTop;this.positionRangeBottom=this.positionRangeTop+this.coords.height-this.options.offsetTop;
this.updateTimeout=false;this.resizeTimeout=false;this.isFooterPosFixed=false;}}},resizeDelayed:function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout);}this.resizeTimeout=setTimeout(function(){this.resize();}.bind(this),(Browser.ie6||Browser.ie7||Browser.ie8)?100:1);},resize:function(){this.update(true);},updatePos:function(){if(this.updateTimeout){clearTimeout(this.updateTimeout);}this.updateTimeout=setTimeout(function(){this.update();}.bind(this),(Browser.ie6||Browser.ie7||Browser.ie8)?100:1);},update:function(afterResize){var winY=window.getScroll().y,topValue;if((winY>this.positionRangeTop&&winY<this.positionRangeBottom)){if(!this.isFooterPosFixed){console.log("setFixed");this.floatingElement.setStyles({position:"fixed",top:this.options.offsetTop});this.isFooterPosFixed=true;
}}else{if(this.isFooterPosFixed){console.log("setAbsolute");if(winY>=this.positionRangeBottom){topValue=this.coords.height;}else{topValue=this.options.offsetTop;}this.floatingElement.setStyles({position:"absolute",top:topValue});this.isFooterPosFixed=false;}}}});var RetargetingCookie=new Class({Implements:[Events,Options],options:{"path":"/","duration":180,"secure":false,"name":"retargetingCookie"},initialize:function(options){this.setOptions(options);var boundSetCookieData=function(){this.setCookieData();}.bind(this);if(this.options.setCookieEvent){$(window).addEvent(this.options.setCookieEvent,boundSetCookieData);}this.dataKeys=false;},setData:function(cookieObject){if(cookieObject){var cookieString="",val;this.dataKeys=cookieObject;for(var key in this.dataKeys){if(key&&key.indexOf("$")===-1){val=this.dataKeys[key];
cookieString+=(key+"="+val+"; ");}}cookieString=cookieString;Cookie.write("retargetingCookie",cookieString,{"path":this.options.path,"secure":this.options.secure,"duration":this.options.duration});}},getData:function(){var cookieText=Cookie.read("retargetingCookie"),tC,tempCookieString;if(!cookieText){return false;}this.dataKeys={};tC=cookieText.split("; ");for(var i=0,len=tC.length;i<len;i++){tempCookieString=tC[i].split("=");this.dataKeys[tempCookieString[0]]=tempCookieString[1];}return this.dataKeys;}});var ShortenTextLength=new Class({Implements:Options,initialize:function(el,options){this.setOptions(options);console.log(el);if(el.get("text").length<this.options.theLength){return true;}var shortText=el.get("text").slice(0,this.options.theLength).split(" ");shortText=shortText.slice(0,shortText.length-1).include("...").join(" ");
el.set("text",shortText);}});var SetNetpromoter=new Class({Implements:Options,initialize:function(el,options){this.setOptions(options);var allInputs=el.getElements("input"),allLabels=el.getElements("label"),radios=[$("private"),$("business")],successMsg=null;this.radios=radios;this.successMsg=successMsg;this.el=el;allInputs.each(function(item,index){if(item.checked===true){allLabels[index].addClass("active");}item.addEvent("click",function(){this.item=item;allLabels.removeClass("active");item.getParent().addClass("active");this.trackRating();}.bind(this));}.bind(this));},trackRating:function(){var rating="";if(this.item){rating=this.item.value;}var linkTrackVarsArr=s.linkTrackVars?s.linkTrackVars.split(","):[];linkTrackVarsArr.push("eVar12");var data={linkTrackVars:linkTrackVarsArr.join(","),eVar12:rating+";"+this.getUserTypeMarker()};
s_trackLinkWithoutLinkTrackProp("netPromoterRating",(this.el||true),data,s.pageName,"e");},trackSubmit:function(){var comment="";var rating="";var ratingCoarse="";if(this.item){rating=this.item.value;}if(rating<7){ratingCoarse=1;}else{if(rating<9){ratingCoarse=2;}else{ratingCoarse=3;}}if($("netPromoter")&&!$("netPromoter").hasClass("preDefined")){comment=$("netPromoter").value;comment=comment.substring(0,100);}var event67withVal="event67="+ratingCoarse;var linkTrackVarsArr=s.linkTrackVars?s.linkTrackVars.split(","):[];linkTrackVarsArr.push("events","prop12","eVar12");var data={linkTrackVars:linkTrackVarsArr.join(","),linkTrackEvents:"event67,event68",events:event67withVal+",event68",prop12:comment,eVar12:rating+";"+this.getUserTypeMarker()};s_trackLinkWithoutLinkTrackProp("netPromoterSubmit",(this.el||true),data,s.pageName,"e");
},getUserTypeMarker:function(){var toReturn="";this.radios.each(function(radio){if(radio.checked){if(radio.id==="private"){toReturn="P";}else{if(radio.id==="business"){toReturn="B";}}}});return toReturn;}});var DeferredClickTracker=new Class({Implements:Options,options:{"clickCountMapCookieName":"clickCountMap"},initialize:function(containerElement,options){this.setOptions(options);this.clickCountMap={};clickCountMapData=Cookie.read(this.options.clickCountMapCookieName);if(clickCountMapData!=null&&clickCountMapData.length>0){this.clickCountMap=JSON.decode(clickCountMapData);}containerElement.addEvent("click",function(event){var markerProp="data-deferredTrackingId";var target=$(event.target);if(!(target.tagName==="EMBED")&&!(target.tagName==="OBJECT")){for(var i=0;i<4;i++){if(target&&target.getProperty(markerProp)){var id=target.getProperty(markerProp);
this.clickCountMap[id]=this.clickCountMap[id]?this.clickCountMap[id]+1:1;Cookie.write(this.options.clickCountMapCookieName,JSON.encode(this.clickCountMap));break;}if(target.get("tag")==="body"){break;}target=target.getParent();}}}.bind(this));}});var csh=function(element,id){var delay=400;var options={openEvent:"mouseenter",closeButton:false,container:($("hotellistWrap")?($("hotellistWrap").hasClass("notepad")?null:$("hotellistWrap")):null),maxWidth:id?350:300,minWidth:id?300:200,firstDirection:"right",directions:id?["left","bottom","top","right","left"]:["right","bottom","top","left","right"],maxHeight:id?400:150,widthOffset:25,timerDelay:250,showDelay:delay,offsets:{"x":25,"y":20}},nameSuffix=id?id:"";window["contextHelp"+nameSuffix]=window["contextHelp"+nameSuffix]||new ContextSensitiveHelp([],options);
element=$(element);var tooltipText=element.retrieve("tooltipText"),firstTimer,patternElement=$(id);if(!tooltipText){if(patternElement){element.store("tooltipText",patternElement.innerHTML);}else{var dl=element.getParent().getElement("dl");if(!dl||dl.get("tag")!="dl"){dl=element.getParent().getNext();}element.store("tooltipText",'<dl class="checkList">'+dl.innerHTML+"</dl>");}element.onmouseover=null;window["contextHelp"+nameSuffix].build(element);firstTimer=setTimeout(function(){window["contextHelp"+nameSuffix].start(element);window["contextHelp"+nameSuffix].position(element);},delay);}element.onmouseout=function(){if(firstTimer){clearTimeout(firstTimer);}};};function prepareTooltipsForTariffs($cont){var container=$cont||$(document.body);new ContextSensitiveHelp(container.getElements(".jsTooltipTariff"),{openEvent:"mouseenter",closeButton:false,maxWidth:480,minWidth:210,firstDirection:"top",widthOffset:15,timerDelay:10,showDelay:300,offsets:{"x":7,"y":7},maxHeight:"auto",overflowY:"visible",showPike:true,simpleDesign:true,deltaTopPosition:-6,preventOrgEvent:true});
window.tariffs=window.tariffs||{};if(!window.tariffs.tariffLightbox){window.tariffs.tariffLightbox=new LightBox({lightBoxId:"tariffLightbox",openInitial:false,page:"showPage.do?page=tariffContent",dynamicVerticalPosition:true,dynamicScrollFixedPosition:true,xhrError:function(){console.log("could not load content");},afterCreation:function(){this.wrap.addEvent("click",function(e){e.preventDefault();var $target=$(e.target);if($target.hasClass("jsOpenRegistrationLayer")){this.closeLightBox();if(window.kissmelightbox){window.kissmelightbox.openLightBox(window.tariffs.smeUserRegistrationURL);}}else{if($target.hasClass("close")){this.closeLightBox();}}}.bind(this));}});}}var createTooltipIterator=0;function createTooltip(arrayOfTexts,tariff,currentLayerID,tariffsLightboxURL){if(!$(document.body)&&createTooltipIterator<10000){createTooltipIterator++;
setTimeout(function(){createTooltip(arrayOfTexts,tariff,tariffName,currentLayerID);},100);return;}var ttHtml="";if(tariff&&arrayOfTexts&&currentLayerID&&tariffsLightboxURL){var tariffName=tariff[0].split(" "),desc1,desc2,desc3,className,showLink=true,tariffType=tariff[1];language=window.s.prop26,boldedText="";switch(tariffType){case"flex":case"businessFlex":className="bem_tooltip--flex";desc1=arrayOfTexts[6];desc2=arrayOfTexts[7];desc3=arrayOfTexts[8];break;case"hotDeal":case"businessHotDeal":className="bem_tooltip--hotDeal";desc1=arrayOfTexts[3];desc2=arrayOfTexts[4];desc3=arrayOfTexts[5];break;case"arrangement":className="bem_tooltip--arrangement";desc1=arrayOfTexts[9];desc2=arrayOfTexts[10];desc3=arrayOfTexts[8];showLink=false;break;}if(language==="ru"){boldedText=tariffName[0]+"<strong> "+(tariffName[1]?tariffName[1]:"")+"</strong>";
}else{boldedText="<strong>"+tariffName[0]+"</strong> "+(tariffName[1]?tariffName[1]:"");}ttHtml='<span class="bem_tooltip '+className+'">'+"<p><span>"+boldedText+"</span></p><ul><li><span></span>"+desc1+"</li><li><span></span>"+desc2+"</li><li><span></span>"+desc3+"</li></ul>"+"</span>";if(showLink){ttHtml+='<a href="showPage.do?page=tariffContent" class="link right" onclick="window.tariffs.tariffLightbox.openLightBox(\''+tariffsLightboxURL+"'); return false;\">"+arrayOfTexts[11]+"</a>";}var cont=new Element("div",{"class":"hide jsToolTipContainer bem_tooltip "+className,"html":ttHtml,"id":currentLayerID});cont.inject($(document.body),"bottom");}}var LazyLoadCallback=new Class({Implements:[Options,Events],options:{range:200,elements:"img",container:window,mode:"vertical",callback:function(){}},initialize:function(options){this.setOptions(options);
this.container=document.id(this.options.container);this.elements=document.id(this.container==window?document.body:this.container).getElements(this.options.elements);this.largestPosition=0;var axis=(this.options.mode=="vertical"?"y":"x");var offset=(this.container!=window&&this.container!=document.body?this.container:"");if(typeof this.options.callback!="function"){this.options.callback=function(){};}this.elements=this.elements.filter(function(el){if(this.options.useFade){el.setStyle("opacity",0);}var elPos=el.getPosition(offset)[axis];if(elPos<this.container.getSize()[axis]+this.options.range){this.loadCallback(el);return false;}return true;},this);var action=function(e){var cpos=this.container.getScroll()[axis];if(cpos>this.largestPosition){this.elements=this.elements.filter(function(el){if((cpos+this.options.range+this.container.getSize()[axis])>=el.getPosition(offset)[axis]){this.loadCallback(el);
return false;}return true;},this);this.largestPosition=cpos;}this.fireEvent("scroll");if(!this.elements.length){this.container.removeEvent("scroll",action);this.fireEvent("complete");}}.bind(this);this.container.addEvent("scroll",action);},loadCallback:function(element){this.options.callback(element);}});function showMoreBookingTemplates(){var paymentDetailsContainer=jQuery(".hiddenPaymentDetails"),closeLink=$$(".bem_bookingentry__preview__close")[0],openLink=$$(".bem_bookingentry__preview__link")[0];if(paymentDetailsContainer.is(":visible")){paymentDetailsContainer.slideUp(400,function(){paymentDetailsContainer.hide();});closeLink.style.display="none";openLink.style.display="inline-block";}else{jQuery(paymentDetailsContainer).slideDown();openLink.style.display="none";closeLink.style.display="inline-block";
}}function ExclusiveOffers(jQuery,options){var self=null;this.init=function(options){self=this;this.options=options;this.processCoupons();this.initElements();if(this.options.scrollTo!=""){jQuery("html, body").animate({scrollTop:jQuery("#"+this.options.scrollTo).offset().top-100},1000);}};this.initElements=function(){jQuery("a.generate_code").on("click",this.handleGenerateLink);jQuery(".myhrs_error_generating_coupon").find(".myhrs_box_footer input, .hrs_box_dialog_close").click(this.closeError);new ContextSensitiveHelp($$("span.infoIcon"),{varClassName:" ",closeButton:false,openEvent:"mouseenter",firstDirection:"left",directions:["top","bottom","left","right"],maxWidth:250});};this.processCoupons=function(){var ids=[],son,collection=jQuery("a.generate_code");collection.each(function(i,obj){ids.push(jQuery(obj).data("id"));
});son=JSON.encode({userId:0,campaigns:ids});jQuery.post(self.options.getCodesUrl,{ids:son},function(resp){var son={};if(resp instanceof Object){son=resp;}collection.each(function(i,obj){obj=jQuery(obj);if(obj.data("id") in son){self.processSingleCouponTeaser(son[obj.data("id")],obj);}else{obj.addClass("hrs_button_default");obj.removeClass("hrs_button_disabled");}});});};this.handleGenerateLink=function(event){var element=jQuery(this);event.preventDefault();if(element.hasClass("hrs_button_disabled")){return false;}element.removeClass("hrs_button_default");element.addClass("hrs_button_disabled");var id=element.data("id");jQuery.post(self.options.codeGenerateUrl,{campaignId:id},function(resp){var code=resp.trim();if(code=="ERR"){self.showError();return;}self.processSingleCouponTeaser(code,element);
});};this.closeError=function(e){var darkOverlay=jQuery(".myhrs_userdata_edit_darkOverlay"),modalWindow=jQuery(".myhrs_error_generating_coupon");if(e!=null){e.preventDefault();}darkOverlay.css("display","none");modalWindow.css("display","none");return false;};this.showError=function(){var top,darkOverlay=jQuery(".myhrs_userdata_edit_darkOverlay"),modalWindow=jQuery(".myhrs_error_generating_coupon");darkOverlay.css("display","block");darkOverlay.css("height",jQuery("#myhrs").height()+20+"px");modalWindow.css("display","block");top=jQuery(window).scrollTop()+200;modalWindow.css({"left":"50%","top":top+"px","margin-left":function(){return -jQuery(this).outerWidth()/2;}});};this.processSingleCouponTeaser=function(code,element){element.parent().css("display","none");var container=element.parent().parent().find(".generated_container");
container.css("display","block");container.find(".code_container").html(code);};this.init(options);}
/*!
 * perfect-scrollbar v1.2.0
 * (c) 2017 Hyunje Jun
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.PerfectScrollbar=e();}(this,function(){function t(t){return getComputedStyle(t);}function e(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n;}return t;}function i(t){var e=document.createElement("div");return e.className=t,e;}function n(t,e){if(!v){throw new Error("No element matching method supported");}return v.call(t,e);}function r(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t);}function l(t,e){return Array.prototype.filter.call(t.children,function(t){return n(t,e);
});}function o(t,e){var i=t.element.classList,n=m.state.scrolling(e);i.contains(n)?clearTimeout(w[e]):i.add(n);}function s(t,e){w[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(m.state.scrolling(e));},t.settings.scrollingThreshold);}function a(t,e){o(t,e),s(t,e);}function c(t){if("function"==typeof window.CustomEvent){return new CustomEvent(t);}var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e;}function h(t,e,i,n,r){var l=i[0],o=i[1],s=i[2],h=i[3],u=i[4],d=i[5];void 0===n&&(n=!0),void 0===r&&(r=!1);var p=t.element;t.reach[h]=null,p[s]<1&&(t.reach[h]="start"),p[s]>t[l]-t[o]-1&&(t.reach[h]="end"),e&&(p.dispatchEvent(c("ps-scroll-"+h)),e<0?p.dispatchEvent(c("ps-scroll-"+u)):e>0&&p.dispatchEvent(c("ps-scroll-"+d)),n&&a(t,h)),t.reach[h]&&(e||r)&&p.dispatchEvent(c("ps-"+h+"-reach-"+t.reach[h]));
}function u(t){return parseInt(t,10)||0;}function d(t){return n(t,"input,[contenteditable]")||n(t,"select,[contenteditable]")||n(t,"textarea,[contenteditable]")||n(t,"button,[contenteditable]");}function p(e){var i=t(e);return u(i.width)+u(i.paddingLeft)+u(i.paddingRight)+u(i.borderLeftWidth)+u(i.borderRightWidth);}function f(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e;}function b(t,i){var n={width:i.railXWidth};i.isRtl?n.left=i.negativeScrollAdjustment+t.scrollLeft+i.containerWidth-i.contentWidth:n.left=t.scrollLeft,i.isScrollbarXUsingBottom?n.bottom=i.scrollbarXBottom-t.scrollTop:n.top=i.scrollbarXTop+t.scrollTop,e(i.scrollbarXRail,n);var r={top:t.scrollTop,height:i.railYHeight};
i.isScrollbarYUsingRight?i.isRtl?r.right=i.contentWidth-(i.negativeScrollAdjustment+t.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth:r.right=i.scrollbarYRight-t.scrollLeft:i.isRtl?r.left=i.negativeScrollAdjustment+t.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:r.left=i.scrollbarYLeft+t.scrollLeft,e(i.scrollbarYRail,r),e(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),e(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth});}function g(t,e){function i(e){f[d]=b+v*(e[a]-g),o(t,p),R(t),e.stopPropagation(),e.preventDefault();}function n(){s(t,p),t.event.unbind(t.ownerDocument,"mousemove",i);}var r=e[0],l=e[1],a=e[2],c=e[3],h=e[4],u=e[5],d=e[6],p=e[7],f=t.element,b=null,g=null,v=null;t.event.bind(t[h],"mousedown",function(e){b=f[d],g=e[a],v=(t[l]-t[r])/(t[c]-t[u]),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",n),e.stopPropagation(),e.preventDefault();
});}var v=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector,m={main:"ps",element:{thumb:function(t){return"ps__thumb-"+t;},rail:function(t){return"ps__rail-"+t;},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(t){return"ps--active-"+t;},scrolling:function(t){return"ps--scrolling-"+t;}}},w={x:null,y:null},Y=function(t){this.element=t,this.handlers={};},X={isEmpty:{configurable:!0}};Y.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1);},Y.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter(function(n){return !(!e||n===e)||(i.element.removeEventListener(t,n,!1),!1);});},Y.prototype.unbindAll=function(){var t=this;
for(var e in t.handlers){t.unbind(e);}},X.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return 0===t.handlers[e].length;});},Object.defineProperties(Y.prototype,X);var W=function(){this.eventElements=[];};W.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t;})[0];return e||(e=new Y(t),this.eventElements.push(e)),e;},W.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i);},W.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1);},W.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll();}),this.eventElements=[];},W.prototype.once=function(t,e,i){var n=this.eventElement(t),r=function(t){n.unbind(e,r),i(t);
};n.bind(e,r);};var y=function(t,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var l;if("top"===e){l=["contentHeight","containerHeight","scrollTop","y","up","down"];}else{if("left"!==e){throw new Error("A proper axis should be provided");}l=["contentWidth","containerWidth","scrollLeft","x","left","right"];}h(t,i,l,n,r);},L={isWebKit:document&&"WebkitAppearance" in document.documentElement.style,supportsTouch:window&&("ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:navigator&&navigator.msMaxTouchPoints},R=function(t){var e=t.element;t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(l(e,m.element.rail("x")).forEach(function(t){return r(t);
}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(l(e,m.element.rail("y")).forEach(function(t){return r(t);}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=f(t,u(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=u((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=f(t,u(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=u(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),b(e,t),t.scrollbarXActive?e.classList.add(m.state.active("x")):(e.classList.remove(m.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(m.state.active("y")):(e.classList.remove(m.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0);
},T={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",function(t){return t.stopPropagation();}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top>t.scrollbarYTop?1:-1;t.element.scrollTop+=i*t.containerHeight,R(t),e.stopPropagation();}),t.event.bind(t.scrollbarX,"mousedown",function(t){return t.stopPropagation();}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=i*t.containerWidth,R(t),e.stopPropagation();});},"drag-thumb":function(t){g(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]),g(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"]);
},keyboard:function(t){function e(e,n){var r=i.scrollTop;if(0===e){if(!t.scrollbarYActive){return !1;}if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&n<0){return !t.settings.wheelPropagation;}}var l=i.scrollLeft;if(0===n){if(!t.scrollbarXActive){return !1;}if(0===l&&e<0||l>=t.contentWidth-t.containerWidth&&e>0){return !t.settings.wheelPropagation;}}return !0;}var i=t.element,r=function(){return n(i,":hover");},l=function(){return n(t.scrollbarX,":focus")||n(t.scrollbarY,":focus");};t.event.bind(t.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(r()||l())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if("IFRAME"===o.tagName){o=o.contentDocument.activeElement;}else{for(;o.shadowRoot;){o=o.shadowRoot.activeElement;
}}if(d(o)){return;}}var s=0,a=0;switch(n.which){case 37:s=n.metaKey?-t.contentWidth:n.altKey?-t.containerWidth:-30;break;case 38:a=n.metaKey?t.contentHeight:n.altKey?t.containerHeight:30;break;case 39:s=n.metaKey?t.contentWidth:n.altKey?t.containerWidth:30;break;case 40:a=n.metaKey?-t.contentHeight:n.altKey?-t.containerHeight:-30;break;case 32:a=n.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:a=t.containerHeight;break;case 34:a=-t.containerHeight;break;case 36:a=t.contentHeight;break;case 35:a=-t.contentHeight;break;default:return;}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==a||(i.scrollTop-=a,i.scrollLeft+=s,R(t),e(s,a)&&n.preventDefault());}});},wheel:function(e){function i(t,i){var n=o.scrollTop;if(0===t){if(!e.scrollbarYActive){return !1;}if(0===n&&i>0||n>=e.contentHeight-e.containerHeight&&i<0){return !e.settings.wheelPropagation;
}}var r=o.scrollLeft;if(0===i){if(!e.scrollbarXActive){return !1;}if(0===r&&t<0||r>=e.contentWidth-e.containerWidth&&t>0){return !e.settings.wheelPropagation;}}return !0;}function n(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!==e&&i!==i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i];}function r(e,i,n){if(!L.isWebKit&&o.querySelector("select:focus")){return !0;}if(!o.contains(e)){return !1;}for(var r=e;r&&r!==o;){if(r.classList.contains(m.element.consuming)){return !0;}var l=t(r);if([l.overflow,l.overflowX,l.overflowY].join("").match(/(scroll|auto)/)){var s=r.scrollHeight-r.clientHeight;if(s>0&&!(0===r.scrollTop&&n>0||r.scrollTop===s&&n<0)){return !0;}var a=r.scrollLeft-r.clientWidth;if(a>0&&!(0===r.scrollLeft&&i<0||r.scrollLeft===a&&i>0)){return !0;
}}r=r.parentNode;}return !1;}function l(t){var l=n(t),s=l[0],a=l[1];if(!r(t.target,s,a)){var c=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?o.scrollTop-=a*e.settings.wheelSpeed:o.scrollTop+=s*e.settings.wheelSpeed,c=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(s?o.scrollLeft+=s*e.settings.wheelSpeed:o.scrollLeft-=a*e.settings.wheelSpeed,c=!0):(o.scrollTop-=a*e.settings.wheelSpeed,o.scrollLeft+=s*e.settings.wheelSpeed),R(e),(c=c||i(s,a))&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault());}}var o=e.element;void 0!==window.onwheel?e.event.bind(o,"wheel",l):void 0!==window.onmousewheel&&e.event.bind(o,"mousewheel",l);},touch:function(t){function e(e,i){var n=h.scrollTop,r=h.scrollLeft,l=Math.abs(e),o=Math.abs(i);if(o>l){if(i<0&&n===t.contentHeight-t.containerHeight||i>0&&0===n){return{stop:!t.settings.swipePropagation,prevent:0===window.scrollY};
}}else{if(l>o&&(e<0&&r===t.contentWidth-t.containerWidth||e>0&&0===r)){return{stop:!t.settings.swipePropagation,prevent:!0};}}return{stop:!0,prevent:!0};}function i(e,i){h.scrollTop-=i,h.scrollLeft-=e,R(t);}function n(){b=!0;}function r(){b=!1;}function l(t){return t.targetTouches?t.targetTouches[0]:t;}function o(t){return !(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE));}function s(t){if(o(t)){g=!0;var e=l(t);u.pageX=e.pageX,u.pageY=e.pageY,d=(new Date).getTime(),null!==f&&clearInterval(f),t.stopPropagation();}}function a(n){if(!g&&t.settings.swipePropagation&&s(n),!b&&g&&o(n)){var r=l(n),a={pageX:r.pageX,pageY:r.pageY},c=a.pageX-u.pageX,h=a.pageY-u.pageY;
i(c,h),u=a;var f=(new Date).getTime(),v=f-d;v>0&&(p.x=c/v,p.y=h/v,d=f);var m=e(c,h),w=m.stop,Y=m.prevent;w&&n.stopPropagation(),Y&&n.preventDefault();}}function c(){!b&&g&&(g=!1,t.settings.swipeEasing&&(clearInterval(f),f=setInterval(function(){t.isInitialized?clearInterval(f):p.x||p.y?Math.abs(p.x)<0.01&&Math.abs(p.y)<0.01?clearInterval(f):(i(30*p.x,30*p.y),p.x*=0.8,p.y*=0.8):clearInterval(f);},10)));}if(L.supportsTouch||L.supportsIePointer){var h=t.element,u={},d=0,p={},f=null,b=!1,g=!1;L.supportsTouch?(t.event.bind(window,"touchstart",n),t.event.bind(window,"touchend",r),t.event.bind(h,"touchstart",s),t.event.bind(h,"touchmove",a),t.event.bind(h,"touchend",c)):L.supportsIePointer&&(window.PointerEvent?(t.event.bind(window,"pointerdown",n),t.event.bind(window,"pointerup",r),t.event.bind(h,"pointerdown",s),t.event.bind(h,"pointermove",a),t.event.bind(h,"pointerup",c)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",n),t.event.bind(window,"MSPointerUp",r),t.event.bind(h,"MSPointerDown",s),t.event.bind(h,"MSPointerMove",a),t.event.bind(h,"MSPointerUp",c)));
}}},H=function(n,r){var l=this;if(void 0===r&&(r={}),"string"==typeof n&&(n=document.querySelector(n)),!n||!n.nodeName){throw new Error("no element is specified to initialize PerfectScrollbar");}this.element=n,n.classList.add(m.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1000,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1};for(var o in r){l.settings[o]=r[o];}this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return n.classList.add(m.state.focus);},a=function(){return n.classList.remove(m.state.focus);
};this.isRtl="rtl"===t(n).direction,this.isNegativeScroll=function(){var t=n.scrollLeft,e=null;return n.scrollLeft=-1,e=n.scrollLeft<0,n.scrollLeft=t,e;}(),this.negativeScrollAdjustment=this.isNegativeScroll?n.scrollWidth-n.clientWidth:0,this.event=new W,this.ownerDocument=n.ownerDocument||document,this.scrollbarXRail=i(m.element.rail("x")),n.appendChild(this.scrollbarXRail),this.scrollbarX=i(m.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=t(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=u(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=u(c.borderLeftWidth)+u(c.borderRightWidth),e(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=u(c.marginLeft)+u(c.marginRight),e(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(m.element.rail("y")),n.appendChild(this.scrollbarYRail),this.scrollbarY=i(m.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;
var h=t(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=u(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?p(this.scrollbarY):null,this.railBorderYWidth=u(h.borderTopWidth)+u(h.borderBottomWidth),e(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=u(h.marginTop)+u(h.marginBottom),e(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:n.scrollLeft<=0?"start":n.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:n.scrollTop<=0?"start":n.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return T[t](l);}),this.lastScrollTop=n.scrollTop,this.lastScrollLeft=n.scrollLeft,this.event.bind(this.element,"scroll",function(t){return l.onScroll(t);
}),R(this);};return H.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,e(this.scrollbarXRail,{display:"block"}),e(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=u(t(this.scrollbarXRail).marginLeft)+u(t(this.scrollbarXRail).marginRight),this.railYMarginHeight=u(t(this.scrollbarYRail).marginTop)+u(t(this.scrollbarYRail).marginBottom),e(this.scrollbarXRail,{display:"none"}),e(this.scrollbarYRail,{display:"none"}),R(this),y(this,"top",0,!1,!0),y(this,"left",0,!1,!0),e(this.scrollbarXRail,{display:""}),e(this.scrollbarYRail,{display:""}));},H.prototype.onScroll=function(t){this.isAlive&&(R(this),y(this,"top",this.element.scrollTop-this.lastScrollTop),y(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft);
},H.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),r(this.scrollbarX),r(this.scrollbarY),r(this.scrollbarXRail),r(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1);},H.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return !t.match(/^ps([-_].+|)$/);}).join(" ");},H;});