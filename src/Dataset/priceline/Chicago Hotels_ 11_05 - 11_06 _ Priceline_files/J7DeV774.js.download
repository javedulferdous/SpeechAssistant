



/* ControlTag Loader for Priceline b55f746c-2bff-4b09-8613-12ec1e76a4e3 */
(function(w, cs) {
  
  if (/Twitter for iPhone/.test(w.navigator.userAgent || '')) {
    return;
  }

  var debugging = /kxdebug/.test(w.location);
  var log = function() {
    
    debugging && w.console && w.console.log([].slice.call(arguments).join(' '));
  };

  var load = function(url, callback) {
    log('Loading script from:', url);
    var node = w.document.createElement('script');
    node.async = true;  
    node.src = url;

    
    node.onload = node.onreadystatechange = function () {
      var state = node.readyState;
      if (!callback.done && (!state || /loaded|complete/.test(state))) {
        log('Script loaded from:', url);
        callback.done = true;  
        callback();
      }
    };

    
    var sibling = w.document.getElementsByTagName('script')[0];
    sibling.parentNode.insertBefore(node, sibling);
  };

  var config = {"app":{"name":"krux-scala-config-webservice","version":"3.42.4","schema_version":3},"confid":"J7DeV774","context_terms":[],"publisher":{"name":"Priceline","active":true,"uuid":"b55f746c-2bff-4b09-8613-12ec1e76a4e3","version_bucket":"stable","id":1773},"params":{"first_party_dmp_managed":true,"link_header_bidder":false,"site_level_supertag_config":"site","recommend":false,"control_tag_pixel_throttle":100,"fingerprint":false,"optout_button_optout_text":"Browser Opt Out","user_data_timing":"load","consent_active":true,"use_central_usermatch":true,"store_realtime_segments":false,"tag_source":false,"link_hb_start_event":"ready","optout_button_optin_text":"Browser Opt In","first_party_uid":true,"link_hb_timeout":2000,"link_hb_adserver_subordinate":true,"no_pii":false,"optimize_realtime_segments":false,"link_hb_adserver":"dfp","target_fingerprint":false,"context_terms":true,"optout_button_id":"kx-optout-button","dfp_premium":true,"control_tag_namespace":"priceline"},"prioritized_segments":[],"realtime_segments":[{"id":"rh1etw9pa","test":["and",["and",["or",["intersects","$page_attr_pageType",["abandon","bpg","caradvisor","confirmation","contract","detail","hp","leavebehind","listing","opaquecontract","priceadvisor","prodhp","promo","rateselection","returning","sampledeals","singlepgcheckout","startoffer","tgcity","tgdetail","tghome","wait"]]]]]}],"services":{"userdata":"//cdn.krxd.net/userdata/get","contentConnector":"https://connector.krxd.net/content_connector","stats":"//apiservices.krxd.net/stats","optout":"//cdn.krxd.net/userdata/optout/status","event":"//beacon.krxd.net/event.gif","set_optout":"https://consumer.krxd.net/consumer/optout","data":"//beacon.krxd.net/data.gif","link_hb_stats":"//beacon.krxd.net/link_bidder_stats.gif","userData":"//cdn.krxd.net/userdata/get","link_hb_mas":"https://link.krxd.net/hb","config":"//cdn.krxd.net/controltag/{{ confid }}.js","social":"//beacon.krxd.net/social.gif","addSegment":"//cdn.krxd.net/userdata/add","pixel":"//beacon.krxd.net/pixel.gif","um":"https://usermatch.krxd.net/um/v2","controltag":"//cdn.krxd.net/ctjs/controltag.js.{hash}","loopback":"https://consumer.krxd.net/consumer/tmp_cookie","remove":"https://consumer.krxd.net/consumer/remove/b55f746c-2bff-4b09-8613-12ec1e76a4e3","click":"https://apiservices.krxd.net/click_tracker/track","stats_export":"//beacon.krxd.net/controltag_stats.gif","userdataApi":"//cdn.krxd.net/userdata/v1/segments/get","cookie":"//beacon.krxd.net/cookie2json","proxy":"//cdn.krxd.net/partnerjs/xdi","consent_get":"https://consumer.krxd.net/consent/get/b55f746c-2bff-4b09-8613-12ec1e76a4e3","consent_set":"https://consumer.krxd.net/consent/set/b55f746c-2bff-4b09-8613-12ec1e76a4e3","is_optout":"https://beacon.krxd.net/optout_check","impression":"//beacon.krxd.net/ad_impression.gif","transaction":"//beacon.krxd.net/transaction.gif","log":"//jslog.krxd.net/jslog.gif","portability":"https://consumer.krxd.net/consumer/portability/b55f746c-2bff-4b09-8613-12ec1e76a4e3","set_optin":"https://consumer.krxd.net/consumer/optin","usermatch":"//beacon.krxd.net/usermatch.gif"},"experiments":[],"site":{"name":"priceline.com","cap":255,"id":23486,"organization_id":1773,"uid":"J7DeV774"},"tags":[{"id":26795,"name":"TripAd - Site Visitors (20/30) & not booked (1/30)","content":"<script> (function(f,a,c,d,g,b,h,e){if(f.taq){return}b=f.taq=function(){b.queue.push(arguments)};b.queue=[];if(/bot|googlebot|crawler|spider|robot|crawling/i.test(c.userAgent)){return}h=a.createElement(d);h.async=true;h.src=g;e=a.getElementsByTagName(d)[0];e.parentNode.insertBefore(h,e)})(window,document,navigator,\"script\",\"//static.tacdn.com/js3/taevents-c.js\"); \n\ntaq('init', '721192672'); \n\n// Customize the below to enable remarketing: \ntaq('track', 'PAGEVIEW', {\n    'click_frequency' : '20'\n\n});\n</script>\n","target":null,"target_action":"append","timing":"asap","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["intersects","$user_segments",["q43qhmeaf"]]]]],"collects_data":true},{"id":27054,"name":"TripAd - Site Visitors (30/30) & not booked (1/30)","content":"<script> (function(f,a,c,d,g,b,h,e){if(f.taq){return}b=f.taq=function(){b.queue.push(arguments)};b.queue=[];if(/bot|googlebot|crawler|spider|robot|crawling/i.test(c.userAgent)){return}h=a.createElement(d);h.async=true;h.src=g;e=a.getElementsByTagName(d)[0];e.parentNode.insertBefore(h,e)})(window,document,navigator,\"script\",\"//static.tacdn.com/js3/taevents-c.js\"); \n\ntaq('init', '721192672'); \n\n// Customize the below to enable remarketing: \ntaq('track', 'PAGEVIEW', {\n    'click_frequency' : '30'\n\n});\n</script>\n","target":null,"target_action":"append","timing":"asap","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["intersects","$user_segments",["q5uvcuwbg"]]]]],"collects_data":true},{"id":27055,"name":"TripAd - Site Visitors (15/30) & not booked (1/30)","content":"<script> (function(f,a,c,d,g,b,h,e){if(f.taq){return}b=f.taq=function(){b.queue.push(arguments)};b.queue=[];if(/bot|googlebot|crawler|spider|robot|crawling/i.test(c.userAgent)){return}h=a.createElement(d);h.async=true;h.src=g;e=a.getElementsByTagName(d)[0];e.parentNode.insertBefore(h,e)})(window,document,navigator,\"script\",\"//static.tacdn.com/js3/taevents-c.js\"); \n\ntaq('init', '721192672'); \n\n// Customize the below to enable remarketing: \ntaq('track', 'PAGEVIEW', {\n    'click_frequency' : '15'\n\n});\n</script>\n","target":null,"target_action":"append","timing":"asap","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["intersects","$user_segments",["q43pavhbb"]]]]],"collects_data":true},{"id":27056,"name":"TripAd - Site Visitors (7/30) & not booked (1/30)","content":"<script> (function(f,a,c,d,g,b,h,e){if(f.taq){return}b=f.taq=function(){b.queue.push(arguments)};b.queue=[];if(/bot|googlebot|crawler|spider|robot|crawling/i.test(c.userAgent)){return}h=a.createElement(d);h.async=true;h.src=g;e=a.getElementsByTagName(d)[0];e.parentNode.insertBefore(h,e)})(window,document,navigator,\"script\",\"//static.tacdn.com/js3/taevents-c.js\"); \n\ntaq('init', '721192672'); \n\n// Customize the below to enable remarketing: \ntaq('track', 'PAGEVIEW', {\n    'click_frequency' : '7'\n\n});\n</script>\n","target":null,"target_action":"append","timing":"asap","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["intersects","$user_segments",["q43odhzdr"]]]]],"collects_data":true},{"id":6586,"name":"Technographic Data provider tag","content":"<script>\r\n// this tag is intentionally blank\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":["and",["and",["and",["<=","$frequency",3]]]],"collects_data":true},{"id":6587,"name":"Krux Geographic Data provider tag","content":null,"target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":["and",["and",["and",["<=","$frequency",3]]]],"collects_data":true},{"id":6588,"name":"Neustar AdAdvisor S2S provider tag","content":"<script>\r\n(function() {\r\n  // adadvisor redirects to http://logger... so it's not https safe\r\n  if (location.protocol == \"http:\") {\r\n     var u = \"https://aa.agkn.com/adscores/g.js?sid=9212244187&_kdpid=2111c0af-fc3a-446f-ab07-63aa74fbde8e\";\r\n     (new Image()).src = u;\r\n   }\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":["and",["and",["and",["<=","$frequency",3]]]],"collects_data":true},{"id":6593,"name":"Priceline DTC","content":"<script>\r\n    (function () {\r\n        // Helper functions\r\n        KxGetRange = function (v, i) {\r\n            // v=123, i=100  - result: 100 - 200\r\n            var c = i * Math.ceil(v / i); //ceil\r\n            return v <= 0 ? '0 - ' + i : '' + (c - i) + ' - ' + c;\r\n        };\r\n\r\n        // Globals from window.pclntms.dataDictionary\r\n        Krux('scrape', {\r\n            // page attrs\r\n            'page_attr_productType': {\r\n                js_global: 'pclntms.dataDictionary.productType'\r\n            },\r\n            'page_attr_pageType': {\r\n                js_global: 'pclntms.dataDictionary.pageType'\r\n            },\r\n            'page_attr_pageTopic': {\r\n                js_global: 'pclntms.dataDictionary.pageTopic'\r\n            },\r\n            'page_attr_destAirportCode': {\r\n                js_global: 'pclntms.dataDictionary.destAirportCode'\r\n            },\r\n            'page_attr_origAirportCode': {\r\n                js_global: 'pclntms.dataDictionary.origAirportCode'\r\n            },\r\n            'page_attr_destination': {\r\n                js_global: 'pclntms.dataDictionary.destination'\r\n            },\r\n            'page_attr_numUnits': {\r\n                js_global: 'pclntms.dataDictionary.numUnits'\r\n            },\r\n            'page_attr_lenStay': {\r\n                js_global: 'pclntms.dataDictionary.lenStay'\r\n            },\r\n            'page_attr_travelStartDate': {\r\n                js_global: 'pclntms.dataDictionary.travelStartDate'\r\n            },\r\n            'page_attr_travelEndDate': {\r\n                js_global: 'pclntms.dataDictionary.travelEndDate'\r\n            },\r\n            'page_attr_tripType': {\r\n                js_global: 'pclntms.dataDictionary.tripType'\r\n            },\r\n            'page_attr_starLevel': {\r\n                js_global: 'pclntms.dataDictionary.starLevel'\r\n            },\r\n            'page_attr_numAdults': {\r\n                js_global: 'pclntms.dataDictionary.numAdults'\r\n            },\r\n            'page_attr_numChildren': {\r\n                js_global: 'pclntms.dataDictionary.numChildren'\r\n            },\r\n            'page_attr_numInfants': {\r\n                js_global: 'pclntms.dataDictionary.numInfants'\r\n            },\r\n            'page_attr_numTravelers': {\r\n                js_global: 'pclntms.dataDictionary.numTravelers'\r\n            },\r\n            'page_attr_airCabinClass': {\r\n                js_global: 'pclntms.dataDictionary.airCabinClass'\r\n            },\r\n            'page_attr_rentalCarType': {\r\n                js_global: 'pclntms.dataDictionary.rentalCarType'\r\n            },\r\n            'page_attr_currencyCode': {\r\n                js_global: 'pclntms.dataDictionary.currencyCode'\r\n            },\r\n            'page_attr_hotelId': {\r\n                js_global: 'pclntms.dataDictionary.hotelId'\r\n            },\r\n            'page_attr_hotelBrandId': {\r\n                js_global: 'pclntms.dataDictionary.hotelBrandId'\r\n            },\r\n            'page_attr_hotelChainCode': {\r\n                js_global: 'pclntms.dataDictionary.hotelChainCode'\r\n            },\r\n            'page_attr_rcBrandCode': {\r\n                js_global: 'pclntms.dataDictionary.rcBrandCode'\r\n            },\r\n            'page_attr_airDepBrandCode': {\r\n                js_global: 'pclntms.dataDictionary.airDepBrandCode'\r\n            },\r\n            'page_attr_airRetBrandCode': {\r\n                js_global: 'pclntms.dataDictionary.airRetBrandCode'\r\n            },\r\n            'page_attr_refId': {\r\n                js_global: 'pclntms.dataDictionary.refId'\r\n            },\r\n            'page_attr_refClickId': {\r\n                js_global: 'pclntms.dataDictionary.refClickId'\r\n            },\r\n            'page_attr_clientCountryCode': {\r\n                js_global: 'pclntms.dataDictionary.clientCountryCode'\r\n            },\r\n            'page_attr_gdsName': {\r\n                js_global: 'pclntms.dataDictionary.gdsName'\r\n            },\r\n            'page_attr_productId': {\r\n                js_global: 'pclntms.dataDictionary.productId'\r\n            },\r\n            'page_attr_offerMethod': {\r\n                js_global: 'pclntms.dataDictionary.offerMethod'\r\n            },\r\n            'page_attr_appCode': {\r\n                js_global: 'pclntms.dataDictionary.appCode'\r\n            },\r\n            'page_attr_offerNumber': {\r\n                js_global: 'pclntms.dataDictionary.offerNumber'\r\n            },\r\n            'page_attr_offerJustSubmittedFlag': {\r\n                js_global: 'pclntms.dataDictionary.offerJustSubmittedFlag'\r\n            },\r\n            'page_attr_offerChainLength': {\r\n                js_global: 'pclntms.dataDictionary.offerChainLength'\r\n            },\r\n            'page_attr_origAirportCode2': {\r\n                js_global: 'pclntms.dataDictionary.origAirportCode2'\r\n            },\r\n            'page_attr_origAirportCode3': {\r\n                js_global: 'pclntms.dataDictionary.origAirportCode3'\r\n            },\r\n            'page_attr_origAirportCode4': {\r\n                js_global: 'pclntms.dataDictionary.origAirportCode4'\r\n            },\r\n            'page_attr_origAirportCode5': {\r\n                js_global: 'pclntms.dataDictionary.origAirportCode5'\r\n            },\r\n            'page_attr_destAirportCode2': {\r\n                js_global: 'pclntms.dataDictionary.destAirportCode2'\r\n            },\r\n            'page_attr_destAirportCode3': {\r\n                js_global: 'pclntms.dataDictionary.destAirportCode3'\r\n            },\r\n            'page_attr_destAirportCode4': {\r\n                js_global: 'pclntms.dataDictionary.destAirportCode4'\r\n            },\r\n            'page_attr_destAirportCode5': {\r\n                js_global: 'pclntms.dataDictionary.destAirportCode5'\r\n            },\r\n            'page_attr_advPurchase': {\r\n                js_global: 'pclntms.dataDictionary.advPurchase'\r\n            },\r\n            'page_attr_travelStartDate2': {\r\n                js_global: 'pclntms.dataDictionary.travelStartDate2'\r\n            },\r\n            'page_attr_travelStartDate3': {\r\n                js_global: 'pclntms.dataDictionary.travelStartDate3'\r\n            },\r\n            'page_attr_travelStartDate4': {\r\n                js_global: 'pclntms.dataDictionary.travelStartDate4'\r\n            },\r\n            'page_attr_travelStartDate5': {\r\n                js_global: 'pclntms.dataDictionary.travelStartDate5'\r\n            },\r\n            'page_attr_destCountryName': {\r\n                js_global: 'pclntms.dataDictionary.destCountryName'\r\n            },\r\n            'page_attr_destCountryCode': {\r\n                js_global: 'pclntms.dataDictionary.destCountryCode'\r\n            },\r\n            'page_attr_destCityId': {\r\n                js_global: 'pclntms.dataDictionary.destCityId'\r\n            },\r\n            'page_attr_destCityCode': {\r\n                js_global: 'pclntms.dataDictionary.destCityCode'\r\n            },\r\n            'page_attr_destStateName': {\r\n                js_global: 'pclntms.dataDictionary.destStateName'\r\n            },\r\n            'page_attr_origCountryName': {\r\n                js_global: 'pclntms.dataDictionary.origCountryName'\r\n            },\r\n            'page_attr_origCountryCode': {\r\n                js_global: 'pclntms.dataDictionary.origCountryCode'\r\n            },\r\n            'page_attr_origCityId': {\r\n                js_global: 'pclntms.dataDictionary.origCityId'\r\n            },\r\n            'page_attr_origCityName': {\r\n                js_global: 'pclntms.dataDictionary.origCityName'\r\n            },\r\n            'page_attr_origCityCode': {\r\n                js_global: 'pclntms.dataDictionary.origCityCode'\r\n            },\r\n            'page_attr_origStateName': {\r\n                js_global: 'pclntms.dataDictionary.origStateName'\r\n            },\r\n            'page_attr_origStateCode': {\r\n                js_global: 'pclntms.dataDictionary.origStateCode'\r\n            },\r\n            'page_attr_origZip': {\r\n                js_global: 'pclntms.dataDictionary.origZip'\r\n            },\r\n            'page_attr_destZip': {\r\n                js_global: 'pclntms.dataDictionary.destZip'\r\n            },\r\n            'page_attr_rsvTotalRg': {\r\n                javascript: 'KxGetRange(pclntms.dataDictionary.rsvTotal, 10)'\r\n            },\r\n            'page_attr_rsvTotalNoTaxFeeRg': {\r\n                javascript: 'KxGetRange(pclntms.dataDictionary.rsvTotalNoTaxFee, 10)'\r\n            },\r\n            // user attributes\r\n            'user_attr_mhe': {\r\n                js_global: 'pclntms.dataDictionary.mhe'\r\n            },\r\n            'user_attr_custId': {\r\n                js_global: 'pclntms.dataDictionaty.custId'\r\n            }\r\n        });\r\n\r\n        Krux('set', {\r\n            //user attributes\r\n            'user_attr_siteServerId': (Krux('scrape.cookie', 'SITESERVER') || '').split('=')[1]\r\n        });\r\n\r\n    })();\r\n</script>","target":"","target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":6594,"name":"Krux Track Social","content":"<script type=\"text/javascript\">Krux('social.init');</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":6597,"name":"Transactional DTC ","content":"<script>\r\n    (function () {\r\n\r\n        var dataDict = Krux('scrape.js_global', 'pclntms.dataDictionary') || {};\r\n\r\n        if (dataDict.pageType !== 'confirmation' || !dataDict.rsvTotal || !dataDict.numUnits) {\r\n            return;\r\n        }\r\n\r\n        var transactionParams = {\r\n            '_kpid': Krux('get', 'pubid'),\r\n            'transactionSource': 'online',\r\n            'transactionDate': (function() {\r\n                                    // returns UTC date in yyyy-mm-dd format \r\n                                    var d = new Date();\r\n                                    function pad(n) { return n<10 ? '0' + n : n }\r\n                                    return d.getUTCFullYear() \r\n                                           + '-' + pad(d.getUTCMonth()+1)\r\n                                           + '-' + pad(d.getUTCDate());\r\n                                })()\r\n        };\r\n\r\n        var dataDictTransAttrs = [\r\n            // transaction price\r\n            'rsvTotal',\r\n            // transaction details\r\n            'productType', 'pageType', 'pageTopic', 'destAirportCode', 'destAirportCode', 'origAirportCode', 'origAirportCode',\r\n            'destination', 'numUnits', 'lenStay', 'travelStartDate', 'travelEndDate', 'tripType', 'starLevel', 'numAdults',\r\n            'numChildren', 'numInfants', 'numTravelers', 'airCabinClass', 'rentalCarType', 'currencyCode', 'hotelId', 'hotelBrandId',\r\n            'hotelChainCode', 'rcBrandCode', 'airDepBrandCode', 'airRetBrandCode', 'refId', 'refClickId', 'clientCountryCode',\r\n            'gdsName', 'productId', 'offerMethod', 'appCode', 'offerNumber', 'offerJustSubmittedFlag', 'offerChainLength',\r\n            'origAirportCode2', 'origAirportCode3', 'origAirportCode4', 'origAirportCode5', 'destAirportCode2', 'destAirportCode3',\r\n            'destAirportCode4', 'destAirportCode5', 'advPurchase', 'travelStartDate2', 'travelStartDate3', 'travelStartDate4',\r\n            'travelStartDate5', 'destCountryName', 'destCountryCode', 'destCityId', 'destCityCode', 'destStateName', 'origCountryName',\r\n            'origCountryCode', 'origCityId', 'origCityName', 'origCityCode', 'origStateName', 'origStateCode', 'origZip', 'destZip'\r\n        ];\r\n\r\n        for (var i = 0, l = dataDictTransAttrs.length; i < l; i++) {\r\n            transactionParams[dataDictTransAttrs[i]] = dataDict[dataDictTransAttrs[i]];\r\n        }\r\n\r\n        Krux('require:http').pixel({\r\n            url: '//beacon.krxd.net/transaction.gif',\r\n            data: transactionParams\r\n        });\r\n\r\n    })();\r\n</script>","target":"","target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":19615,"name":"Krux ID to GA","content":"<script>\n(function(){\n\tif(typeof(ga) != \"undefined\"){\n\t\tga('send', {\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'DMP',\n\t\t\teventAction: 'kruxId Push',\n\t\t\teventLabel: Krux('get', 'user')\n\t\t});\n\t}\n})();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":["and",["and",["and",["contains","$url","test=ktest"]]]],"collects_data":true},{"id":26603,"name":"UTM DTC","content":"<script>\n(function(){\n\n\tvar params = Krux('require:util').urlParams();\n\t\n\tKrux ('set', { \n\t'page_attr_urlparam_utm_source': params.utm_source,\n\t'page_attr_urlparam_utm_medium': params.utm_medium,\n\t'page_attr_urlparam_utm_campaign': params.utm_campaign,\n\t'page_attr_urlparam_utm_content': params.utm_content,\n\t'page_attr_urlparam_utm_term': params.utm_term \n\t});\n\t\n})();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":29045,"name":"Analytics – Confirmation ID LCCG5ZWR (desktop)","content":"<script>\nKrux('admEvent', 'LCCG5ZWR', {\n    productType: Krux('scrape.js_global', 'pclntms.dataDictionary.productType'),\n    offerMethod: Krux('scrape.js_global', 'pclntms.dataDictionary.offerMethod'),\n    site: Krux('get', 'site')\n});\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["contains","$url","receipt"]]]],"collects_data":true},{"id":29058,"name":"Analytics – Homepage ID LDS_yrIU","content":"<script>\nKrux('admEvent', 'LDS_yrIU', {\n    productType: Krux('scrape.js_global', 'pclntms.dataDictionary.productType'),\n    offerMethod: Krux('scrape.js_global', 'pclntms.dataDictionary.offerMethod'),\n    site: Krux('get', 'site')\n});\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["contains","$url","home"]]]],"collects_data":true},{"id":29059,"name":"Analytics – Search Results ID LDTAgg71","content":"<script>\nKrux('admEvent', 'LDTAgg71', {\n    productType: Krux('scrape.js_global', 'pclntms.dataDictionary.productType'),\n    offerMethod: Krux('scrape.js_global', 'pclntms.dataDictionary.offerMethod'),\n    site: Krux('get', 'site')\n});\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["and",["contains","$url","search"]]]],"collects_data":true}],"usermatch_tags":[{"id":6,"name":"Google User Match","content":"<script>\r\n(function() {\r\n\r\nvar kuid = Krux('get', 'user');\r\n  if(kuid){\r\n  // original google user match tag. will be deprecated june 1, 2020\r\n  new Image().src = 'https://usermatch.krxd.net/um/v2?partner=google';\r\n\r\n  // new google user match where they host the match table. The KUID needs to be base64 encoded, but the ids sent will be regular kuids\r\n  var baseEncodedKuid = btoa(kuid).replace(/=$/, '');\r\n  new Image().src = 'https://cm.g.doubleclick.net/pixel?google_nid=krux_digital&google_hm='+baseEncodedKuid;\r\n  }\r\n\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":34,"name":"Comscore Data Tag","content":"<script>\r\n(function(){\r\n  var kuid = Krux('get', 'user');\r\n  var cbust = Math.round(new Date().getTime() / 1000);\r\n  var prefix = location.protocol == 'https:' ? \"https:\" :\"http:\";\r\n  var url = prefix == 'https:' ? '//sb.scorecardresearch.com/p' : '//b.scorecardresearch.com/p';\r\n  if (kuid) {\r\n    Krux('require:http').pixel({\r\n      url: url,\r\n      data: {\r\n          c1: '9',\r\n          c2: '8188709',\r\n          cs_xi: kuid,\r\n          rn: cbust\r\n      }});\r\n  }\r\n  })();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":71,"name":"Xandr Connect","content":"<script>\r\n(function(){\r\n        var kuid = Krux('get', 'user');\r\n        var consent = Krux('iab:urlParams');\r\n        if (kuid) {\r\n            if(!consent){\r\n                consent = \"\";\r\n            }\r\n            var prefix = location.protocol == 'https:' ? \"https:\" : \"http:\";\r\n            var kurl = prefix + '//beacon.krxd.net/usermatch.gif?adnxs_uid=$UID';\r\n            var appnexus_url = '//ib.adnxs.com/getuid?' + kurl + consent;\r\n            (new Image()).src=appnexus_url;\r\n        }\r\n})();\r\n</script>\r\n\r\n<!-- Krux Config:\r\n\r\n-->","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":76,"name":"LiveRamp User Matching","content":"<script>\r\n(function(){\r\n  var kuid = Krux('get', 'user');\r\n  if (kuid) {\r\n      var liveramp_url = 'https://idsync.rlcdn.com/379708.gif?partner_uid=' + kuid;\r\n      var i = new Image();\r\n      i.src = liveramp_url;     \r\n  }\r\n})();\r\n</script>\r\n\r\n\r\n<!-- Krux Config:\r\n\r\n-->","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":86,"name":"Neustar AdAdvisor S2S","content":"<script>\r\n(function(){\r\nvar kuid = Krux('get', 'user');\r\nvar prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';\r\nif (kuid) {\r\n    new Image().src = prefix + '//aa.agkn.com/adscores/g.js?sid=9212244187&_kdpid=2111c0af-fc3a-446f-ab07-63aa74fbde8e';\r\n     }\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":9,"name":"RocketFuel User Match","content":"<script>\r\n(function() {\r\n    var i = new Image();\r\n    i.src = 'https://p.rfihub.com/cm?in=1&pub=6919';\r\n})();\r\n\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":2,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":12,"name":"SiteScout User Match","content":"<script>\r\n\r\n(function(){\r\n\r\nvar prefix = window.location.protocol == 'https:' ? \"https:\" : \"http:\";\r\nnew Image().src = \"//pixel-sync.sitescout.com/connectors/krux/usersync?redir=\" + prefix + \"//beacon.krxd.net%2Fusermatch.gif%3Fpartner_id%3Dsscout%26partner_uid%3D%24UUID\";\r\n\r\n})();\r\n\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":2,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":20,"name":"Yahoo! DataX User Match","content":"<script>\r\n(function(){\r\n    var kuid = Krux('get', 'user');\r\n        if (kuid) {\r\n            var prefix = 'https:';\r\n            var rurl = prefix + '//cms.analytics.yahoo.com/cms?partner_id=KRUX';\r\n            var i = new Image();\r\n            i.src = rurl;\r\n        }\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":2,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":82,"name":"DataLogix - Legacy","content":"<script>\r\n    (function() {\r\n        var kuid = Krux('get', 'user');\r\n        if (kuid) {\r\n            var prefix = location.protocol == 'https:' ? \"https:\" : \"http:\";\r\n            var kurl_params = encodeURIComponent(\"_kuid=\" + kuid + \"&_kdpid=2dd640a6-6ebd-4d4f-af30-af8baa441a0d&dlxid=<na_id>&dlxdata=<na_da>\");\r\n            var kurl = prefix + \"//beacon.krxd.net/data.gif?\" + kurl_params;\r\n            var dlx_url = '//r.nexac.com/e/getdata.xgi?dt=br&pkey=gpwn29rvapq62&ru=' + kurl;\r\n            var i = new Image();\r\n            i.src = dlx_url;\r\n        }\r\n    })();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":3,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true}],"link":{"adslots":{},"bidders":{}}};
  
  for (var i = 0, tags = config.tags, len = tags.length, tag; (tag = tags[i]); ++i) {
    if (String(tag.id) in cs) {
      tag.content = cs[tag.id];
    }
  }

  
  var esiGeo = String(function(){/*
   <esi:include src="/geoip_esi"/>
  */}).replace(/^.*\/\*[^{]+|[^}]+\*\/.*$/g, '');

  if (esiGeo) {
    log('Got a request for:', esiGeo, 'adding geo to config.');
    try {
      config.geo = w.JSON.parse(esiGeo);
    } catch (__) {
      
      log('Unable to parse geo from:', config.geo);
      config.geo = {};
    }
  }



  var proxy = (window.Krux && window.Krux.q && window.Krux.q[0] && window.Krux.q[0][0] === 'proxy');

  if (!proxy || true) {
    

  load('//cdn.krxd.net/ctjs/controltag.js.0631b7d64dbbd3656a8b7368ad227a04', function() {
    log('Loaded stable controltag resource');
    Krux('config', config);
  });

  }

})(window, (function() {
  var obj = {};
  
  return obj;
})());
