//tealium universal tag - utag.770 ut4.0.201909231625, Copyright 2019 Tealium.com Inc. All Rights Reserved.
try{if(!utag.libloader){utag.libloader=function(src,handler,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;if(typeof handler=='function'){b.handlerFlag=0;b.onreadystatechange=function(){if((this.readyState=='complete'||this.readyState=='loaded')&&!b.handlerFlag){b.handlerFlag=1;handler()}};b.onload=function(){if(!b.handlerFlag){b.handlerFlag=1;handler()}};a.getElementsByTagName('head')[0].appendChild(b)}}};(function(id,loader,u){u=utag.o[loader].sender[id]={};u.ev={'view':1};u.map={"travelStartDate":"check_in","travelEndDate":"check_out","custId":"customer_id","first3hotelids":"hotel_id","mhe":"email","SETI_MKTG_RTG_TEST":"mktg_rtg_test_variant","refId":"refId","criteo_hotel_list":"hotel_list","criteo_site_type":"site_type","SITESERVER_ID":"siteServer"};u.extend=[function(a,b){try{if(1){try{var daysInFutureBuckets=[{min:0,max:7,groupNum:1},{min:7,max:14,groupNum:2},{min:14,max:21,groupNum:3},{min:21,max:28,groupNum:4},{min:28,max:42,groupNum:5},{min:42,max:56,groupNum:6},{min:56,max:150,groupNum:7}];var daysInFutureBucket;var daysInFuture=Math.abs(Math.ceil((new Date(b.travelStartDate)-new Date())/1000/60/60/24));for(var bucketIndex=0;bucketIndex<daysInFutureBuckets.length&&!daysInFutureBucket;bucketIndex++){var bucket=daysInFutureBuckets[bucketIndex];if(daysInFuture>=bucket.min&&daysInFuture<=bucket.max)daysInFutureBucket=bucket.groupNum;}
if(!daysInFutureBucket){daysInFutureBucket=daysInFutureBuckets.length;}
var firstThree=['','',''];var hotels=(b.hotelId||'').split(',');for(var i=0;i<3;i++){var hotel=hotels[i];if(b.offerMethod!='semiopaque'&&hotel){firstThree[i]=hotel;}
else{firstThree[i]=b.destCityName+daysInFutureBucket+(i+1);}}
b.criteo_hotel_list=firstThree;b.criteo_express_detail_hotel=b.destCityName+daysInFutureBucket+(Math.floor(Math.random()*3)+1);b.criteo_site_type=utag_data.appCode==='MOBILEWEB'?'m':'d';}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(PCLN&&PCLN.pclnEventDispatcher){var eventFunctions={hotelEvent:function(hotelClickData){var hotelId=hotelClickData.message.hotelId;var criteoEvents={'express-listing':{event:"viewItem",item:b.criteo_express_detail_hotel},'retail-detail':{event:"viewBasket",item:[{id:hotelId,price:'',quantity:1}]}};var eventType=(/^[0-9]+$/.test(hotelId)?'retail':'express')+'-'+b['pageType'];var criteoEvent=criteoEvents[eventType];if(criteoEvent){try{window.criteo_q.push({event:"setAccount",account:[{an:'web-hotel-priceline.com',cn:'us',ln:'en'},{an:'com.priceline.app.web',cn:'us',ln:'en'}]},{event:"setHashedEmail",email:[b['mhe']||'']},{event:"setSiteType",type:b['criteo_site_type']||''},{event:"viewSearch",checkin_date:b['travelStartDate']||'',checkout_date:b['travelEndDate']||'',ui_refid:b['refId']||'',ui_mktg_rtg_test:b['SETI_MKTG_RTG_TEST']||''},criteoEvent);}catch(e){}}},rentalCarEvent:function(rcClickData){try{var carCode='';if(!!rcClickData&&!!rcClickData.detailsKey){var carCodeParts=(rcClickData.detailsKey||'').split('-');carCode=(carCodeParts[3]||'')+'-'+(carCodeParts[0]||'');carCode=carCode.replace(/T\d+/,'');}
window.criteo_q.push({event:"setAccount",account:[{an:'web-car-priceline.com',cn:'us',ln:'en'},{an:'com.priceline.app.web',cn:'us',ln:'en'}]},{event:"setHashedEmail",email:[b['mhe']||'']},{event:"setSiteType",type:b['criteo_site_type']||''},{event:"viewItem",item:carCode},{event:"viewSearch",checkin_date:b['travelStartDate']||'',checkout_date:b['travelEndDate']||'',ui_refid:b['refId']||'',});}catch(e){}}};PCLN.pclnEventDispatcher.register('GLOBAL_PCLN_HOTEL_BOOK_BUTTON',function(hotelClickData){eventFunctions.hotelEvent(hotelClickData);});PCLN.pclnEventDispatcher.register('RC_CAR_SELECTION_CLICKED',function(rcClickData){eventFunctions.rentalCarEvent(rcClickData);});}}}catch(e){utag.DB(e)}}];u.send=function(a,b,c,d,e,f){if(u.ev[a]||typeof u.ev.all!="undefined"){var data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};for(d in utag.loader.GV(u.map)){if(typeof b[d]!='undefined'){e=u.map[d].split(',');for(f=0;f<e.length;f++){data[e[f]]=b[d]}}}
utag.libloader("//static.criteo.net/js/ld/ld.js",function(){window.criteo_q=window.criteo_q||[];window.criteo_q.push({event:"setAccount",account:[{an:'web-hotel-priceline.com',cn:'us',ln:'en'},{an:'com.priceline.app.web',cn:'us',ln:'en'}]},{event:"setHashedEmail",email:[data['email']||'']},{event:"setSiteType",type:data['site_type']||''},{event:"viewList",item:data['hotel_list']||''},{event:"setData",cguid:data['siteServer']||''},{event:"viewSearch",checkin_date:data['check_in']||'',checkout_date:data['check_out']||'',ui_refid:data['refId']||'',ui_mktg_rtg_test:data['mktg_rtg_test_variant']||''});})}};try{utag.o[loader].loader.LOAD(id)}catch(e){utag.loader.LOAD(id)}})('770','pcln.opt');}catch(e){}
