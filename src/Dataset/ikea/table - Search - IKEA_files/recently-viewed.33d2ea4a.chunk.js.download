(window.webpackJsonpRecentlyViewed=window.webpackJsonpRecentlyViewed||[]).push([[5],{28:function(e,t,n){"use strict";t.a=function(e){try{window.sendEvent(e)}catch(e){}}},29:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var c={event_action:"link_clicks",event_label:"recently_viewed_recommendations",transport_type:"beacon",custom:{version:"ikea_rec"}},r={name:"view_item_list",transport_type:"beacon"},i={event_category:"page_action",event_action:"modal",transport_type:"beacon"}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var c=n(28),r=n(29);function i(e){var t=e.items||[];Object(c.a)({name:"add_to_cart",event_label:e.composition,params:{items:t},custom:{version:"ikea_rec",product_list_variant:e.recToken}})}function a(e){var t=Object.assign(r.a,{event_label:e.label});Object(c.a)(t)}},35:function(e,t,n){"use strict";var c=n(33),r=n(28);var i=function(e,t){return function(n){var c=Object.keys(t).reduce((function(e,t){return void 0===n[t]?e.concat(t):e}),[]);return!c.length||(console.error("Missing keys in object [".concat(e,"]: ").concat(c)),!1)}},a=n(29),o=i("recentlyViewedProductClick",{event_category:!0}),u=function(e){o(e)&&Object(r.a)(Object.assign(a.c,{event_category:e.event_category}))};t.a={addToCartClick:c.a,productClick:function(e){var t=e.items||[];Object(r.a)({name:"select_content",event_label:e.composition,content_type:"product",params:{items:t},custom:{version:"ikea_rec",product_list_variant:e.recToken}})},recentlyViewedProductClick:u}},75:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t),n.d(t,"run",(function(){return _}));var c=n(25),r=n(7),i=n.n(r),a=n(2),o=function(e,t){if(!Object(a.a)())return[];var n=JSON.parse(localStorage.getItem("ikeaBrowserHistory")||"{}");if(!n[e])return[];var c=n[e];return c.reverse(),c.filter((function(e){return!(e.missing&&(t=e.missing,!(t+6048e5<Date.now())));var t})).map((function(e){return e.id})).filter((function(e){return e!==t})).slice(0,12)},u=function(e){var t=e.substr(e.length-3),n="".concat("https://www.ikea.com","/").concat("us/en","/products/").concat(t,"/").concat(e,".json");return fetch(n,{method:"GET",mode:"cors"}).then((function(e){if(e.ok)return e;throw new Error("Network response error.")})).then((function(e){return e.json()})).then((function(e){if(Object.keys(e).length)return e;throw new Error("Empty response object.")})).catch((function(t){throw Object(a.b)(e),new Error(t)}))},s=n(30),d=n(24),l=n(46),p=Object(d.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,81))}));function f(e){var t=Object(s.k)([]),n=i()(t,2),r=n[0],a=n[1],f=Object(l.a)({triggerOnce:!0,rootMargin:"100% 0px"}),v=i()(f,2),w=v[0],_=v[1];Object(s.d)((function(){_&&function(){var t=o("pip",e.productId),n=[],c=t.map((function(e,t){return u(e).then((function(e){return n[t]=e}))}));if(0===c.length)return;Promise.all(c.map((function(e){return e.catch((function(e){return e}))}))).then((function(){var e=n.filter((function(e){return e&&e.mainImage&&e.mainImage.id}));a(e)}))}()}),[_]);var m={pageType:e.pageType||"",history:r,isIntersected:_,slideIndex:0};return Object(c.h)("div",{ref:w},Object(c.h)(d.Suspense,null,r.length>0&&Object(c.h)(p,m)))}function v(){if(void 0!==window.utag_data&&void 0!==window.utag_data.page_type&&"home page"===window.utag_data.page_type)return"start";var e=new RegExp("^/".concat("us/en","/(cat|p)/")).exec(window.location.pathname);return null===e||void 0===e[1]?"":"cat"===e[1]?"plp":"p"===e[1]?"pip":""}var w=document.querySelector("[data-recently-viewed]"),_=function(){var e="undefined"!=typeof ikea&&void 0!==ikea.cookieConsent,t=e&&ikea.cookieConsent.hasConsent(3);if(!e||t){var n=v();if("pip"===v()){var r=document.querySelector("#section-recently-viewed"),i=document.querySelector(".js-product-pip[data-product-id]"),a=(i?i.dataset:{productId:0}).productId;w&&""!==n&&null===r&&Object(c.k)(Object(c.h)(f,{pageType:n,productId:a}),w)}}}},81:function(e,t,n){"use strict";n.r(t);var c=n(41),r=n.n(c),i=n(27),a=n.n(i),o=n(25),u=n(35);n(75);t.default=function(e){function t(){u.a.recentlyViewedProductClick({event_category:{start:"start_page_actions",plp:"plp_page_actions",pip:"pip_page_actions"}[e.pageType]})}var n=e.history,c=e.isIntersected,i="recently-viewed-",s=a()("recently-viewed","".concat(i,"page-container"),c||0!==n.length?null:"recently-viewed__lazy",0!==n.length?"recently-viewed__visible":null),d={id:"recentlyViewedCarousel",children:function(e){return e.map((function(e,n){return Object(o.h)("div",{"data-recommendations-type":"recently_viewed","data-list-position":n+1,"data-ref-id":e.id},Object(o.h)("a",{href:e.pipUrl,onClick:t},(c=e.mainImage.id,r=e.mainImage.alt,i="https://www.ikea.com/PIAimages/".concat(c,"_S5.JPG"),a="".concat(i,"?f=xs 500w,").concat(i,"?f=xxs 400w,").concat(i,"?f=xxxs 300w"),Object(o.h)("img",{src:i+"?f=xxs",class:"product-image",alt:r,sizes:"(min-width: 1440px) 105px, (min-width: 768px) 12vw, (min-width: 480px) 23vw, 33vw",srcset:a}))));var c,r,i,a}))}(e.history),prefix:i,rtl:"rtl"==={}.LANG_DIR};return Object(o.h)("section",{class:s,"data-namespace":"recently-viewed"},Object(o.h)("div",{class:"".concat(i,"page-container__inner")},Object(o.h)("div",{class:"".concat(i,"page-container__main")},Object(o.h)("h2",{class:"recently-viewed__title"},"Your recently viewed products"),Object(o.h)(r.a,d)),Object(o.h)("div",{class:"".concat(i,"page-container__aside")})))}}}]);
//# sourceMappingURL=recently-viewed.33d2ea4a.chunk.js.map