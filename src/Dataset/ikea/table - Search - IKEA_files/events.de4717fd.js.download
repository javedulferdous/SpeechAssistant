!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://www.ikea.com/us/en/recommendations/panels/",n(n.s=18)}({18:function(e,t,n){"use strict";n.r(t);var r,o,i=n(4),a=n.n(i);!function(e){e.CATEGORY="cat",e.DETAIL_PAGE="p",e.CHECKOUT="checkout",e.HOME="home"}(r||(r={})),function(e){e.CATEGORY_PAGE_VIEW="category-page-view",e.DETAIL_PAGE_VIEW="detail-page-view",e.SHOPPING_CART_PAGE_VIEW="shopping-cart-page-view",e.HOME_PAGE_VIEW="home-page-view",e.DEFAULT="page-visit"}(o||(o={}));var u="https://rec.ingka.com/services/event-us-prod/api/v1/userevents_form";var c,l=(c=window.crypto||window.msCrypto,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t;return"y"===e?(t=["8","9","a","b"])[Math.floor(Math.random()*t.length)]:(t=new Uint8Array(1),c.getRandomValues(t),(t[0]%16).toString(16))})));function d(){try{return window.ga.getAll().pop().get("clientId")}catch(e){return null}}function s(e){var t=new Blob(["userEvent="+encodeURIComponent(JSON.stringify(e))],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(u.concat("?synchronous=true"),t)}function p(e){if(e&&e.items&&e.items[0]){var t=e.items[0],n=f[t.productNumber]||null;r=t.productNumber,o=n,i=t.quantity,(a=d())&&s({eventType:"add-to-cart",userInfo:{visitorId:a,userAgent:(navigator||{}).userAgent||""},productEventDetail:{productDetails:[{quantity:parseInt(i),id:r.replace(/\D/g,"")}]},eventDetail:{uri:window.location.href||"",referrerUri:document.referrer||"",pageViewId:l,recommendationToken:o}})}var r,o,i,a}var f={};function E(e){var t=e.target;if(t){var n=t.closest("[data-rec-product-number]"),r=n&&n.dataset.recProductNumber,o=n&&n.dataset.recToken;r&&o&&(f[r]=o)}}function m(e){var t=function(e){return e===r.CATEGORY?o.CATEGORY_PAGE_VIEW:e===r.DETAIL_PAGE?o.DETAIL_PAGE_VIEW:e===r.CHECKOUT?o.SHOPPING_CART_PAGE_VIEW:e===r.HOME?o.HOME_PAGE_VIEW:o.DEFAULT}(e),n=d(),i=function(e){if(e===o.CATEGORY_PAGE_VIEW){var t=Array.from(document.querySelectorAll('[type="application/ld+json"]')).filter((function(e){return e&&e.innerHTML.indexOf("itemListElement")>-1}))[0];if(t)try{return{pageCategories:[{categories:JSON.parse(t.innerHTML).itemListElement.map((function(e){var t=new RegExp(/([^-]*)\/$/).exec(e.item),n=t&&t[1];return n||null})).filter((function(e){return!!e}))}]}}catch(e){return null}var n=new RegExp(/([^-]*)\/$/).exec(window.location.pathname),r=n&&n[1];return r?{pageCategories:[{categories:[r]}]}:null}if(e===o.DETAIL_PAGE_VIEW){var i=(document.querySelector(".js-product-pip[data-product-id]")||{dataset:{productId:null}}).dataset.productId;return i?{productDetails:[{id:i.replace(/\D/g,"")}]}:null}if(e===o.SHOPPING_CART_PAGE_VIEW){if(!window.Checkout||!window.Checkout.analytics)return null;var a=(window.Checkout.analytics.ecommerceParams||window.Checkout.analytics.persistentParams||{}).items;return a?{productDetails:a.map((function(e){return{id:String(e.id).replace(/\D/g,""),quantity:e.quantity}}))}:null}return null}(t);if(n&&(i||t!==o.CATEGORY_PAGE_VIEW)&&(i||t!==o.DETAIL_PAGE_VIEW)){var a={eventType:t,userInfo:{visitorId:n,userAgent:(navigator||{}).userAgent||""},eventDetail:{uri:window.location.href||"",referrerUri:document.referrer||""}};i&&(a.productEventDetail=i),s(a)}}var v=1;function y(){!!document.querySelector("[data-mount-recommendations]")&&document.addEventListener("click",E),function(e,t){try{window.ikea.pubsub.subscribe(e,t)}catch(e){console.error(e)}}("CART_CLIENT/ADD_TO_CART_SUCCESS",p),function e(t){if(void 0!==window.ga)t&&t();else{if(v>=20)return;v+=1,setTimeout((function(){e(t)}),500)}}((function(){var e=function(){var e=new RegExp(/^\/.{2}\/.{2}\/([^\/]*)\/.*$/),t=window.location.pathname,n=t.split("/");if(n.includes("shoppingbag")||n.includes("shoppingcart"))return r.CHECKOUT;var o=e.exec(t),i=o&&o[1];return void 0===i?null:null===i?r.HOME:i===r.CATEGORY?r.CATEGORY:i===r.DETAIL_PAGE?r.DETAIL_PAGE:null}();e&&m(e)}))}t.default=function(){try{if(!navigator||!navigator.sendBeacon||(e=2,"object"===a()(window.ikea)&&"object"===a()(window.ikea.cookieConsent)&&!window.ikea.cookieConsent.hasConsent(e)))return;window.addEventListener("load",y)}catch(e){console.error(e)}var e}()},4:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n}});
//# sourceMappingURL=events.de4717fd.js.map