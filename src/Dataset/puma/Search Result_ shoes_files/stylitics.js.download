'use strict';const SELECTORS={STYLITICS_PDP_WIDGET_ID:'stylitics-pdp-widget',STYLITICS_PDP_WIDGET:'.stylitics-pdp-widget',STYLITICS_PDP_WIDGET_HEADER:'.slot-stylitics-pdp__header',STYLITICS_MIX_AND_MATCH_WIDGET:'.stylitics-mix-and-match-widget',STYLITICS_MIX_AND_MATCH_WIDGET_ID:'stylitics-mix-and-match-widget',STYLITICS_STACKED_CAROUSEL_WIDGET_WRAPPER:'.stylitics-stacked-carousel',STYLITICS_STACKED_CAROUSEL_WIDGET:'.stylitics-stacked-carousel-widget',STYLITICS_STACKED_CAROUSEL_HEADER:'.slot-stylitics-stacked-carousel__header',STYLITICS_STACKED_CAROUSEL_DATA:'.stylitics-stacked-carousel-data',STYLITICS_FULL_PAGE_GALLERY_WIDGET_WRAPPER:'.stylitics-full-page-gallery',STYLITICS_FULL_PAGE_GALLERY_WIDGET:'.stylitics-full-page-gallery-widget',STYLITICS_FULL_PAGE_GALLERY_DATA:'.stylitics-full-page-gallery-data',PRODUCT_STYLE_NUMBER:'.product-style-number',STYLITICS_JUMP_LINK:'.stylitics-jump-link',PUMA_HEADER:'#siteHeader',ADD_TO_CART_MOBILE:'.add-to-cart-mobile'};function appendArrowOptions(opts,widgetData){opts.display=opts.display||{};opts.display.mobileArrows=widgetData.arrowsMobileEnabled;opts.display.thinArrows=widgetData.arrowsThinArrows;opts.display.nextLookArrowText=widgetData.arrowsNextLookArrowText;opts.display.previousLookArrowText=widgetData.arrowsPrevLookArrowText;opts.display.arrowColor=widgetData.arrowsColor;opts.display.arrowWidth=widgetData.arrowsWidth;opts.display.arrowHeight=widgetData.arrowsHeight;opts.display.arrowStrokeWidth=widgetData.arrowsStrokeWidth;}
function loadPDPWidget(){let styliticsPDPWidget=null;let itemNumber='';let opts={};let widgetData=$(SELECTORS.STYLITICS_PDP_WIDGET).data();if($(SELECTORS.STYLITICS_PDP_WIDGET).length>0){if($(SELECTORS.STYLITICS_PDP_WIDGET).data('itemid')!==''&&$(SELECTORS.STYLITICS_PDP_WIDGET).data('itemid')!==undefined){itemNumber=$(SELECTORS.STYLITICS_PDP_WIDGET).data('itemid');}else{itemNumber=$(SELECTORS.PRODUCT_STYLE_NUMBER).data('style-number');}
if($(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-click-to-reveal')){opts={api:{total:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-total'),item_number:itemNumber},display:{cols:3,ctaThemeClass:$(SELECTORS.STYLITICS_PDP_WIDGET).data('pdp-theme-class'),ctaPosition:$(SELECTORS.STYLITICS_PDP_WIDGET).data('pdp-cta-position'),ctaText:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-cta-text'),ctaBackToLookText:$(SELECTORS.STYLITICS_PDP_WIDGET).data('pdp-cta-back-to-look-text'),itemCtaText:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-item-cta-text')}};}else{opts={api:{total:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-total'),item_number:itemNumber},display:{cols:3}};}
appendArrowOptions(opts,widgetData);const mixNMatch=$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-mix-and-match-enable')&&TapToSwap!=null;if(mixNMatch){opts.onOutfitClick=function(){return true;};}
let styliticsUsername=$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-username');if(StyliticsWidget!=null){styliticsPDPWidget=new StyliticsWidget(styliticsUsername,SELECTORS.STYLITICS_PDP_WIDGET_ID,opts);if(mixNMatch){let mixAndMatchWidget=new TapToSwap(SELECTORS.STYLITICS_MIX_AND_MATCH_WIDGET_ID);mixAndMatchWidget.initMultipleInstance({username:styliticsUsername});window.mixAndMatchOptions={hideBrandSwapModal:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-mix-and-match-hide-brand-swap-modal'),hideBrandItemList:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-pdp-mix-and-match-hide-brand-item-list'),title:$(SELECTORS.STYLITICS_PDP_WIDGET).data('stylitics-mix-and-match-title'),outfitsWidgetInstance:styliticsPDPWidget};styliticsPDPWidget.opts.api.with_item_coords=true;styliticsPDPWidget.opts.onOutfitClick=function(outfit){mixAndMatchWidget.init(window.mixAndMatchOptions,outfit);};}
styliticsPDPWidget.load(showJumpLink);}}
return styliticsPDPWidget;}
function refreshPDPWidget(styliticsPDPWidget,newProductID){let currentHeight=$(SELECTORS.STYLITICS_PDP_WIDGET).height();$(SELECTORS.STYLITICS_PDP_WIDGET).height(currentHeight);styliticsPDPWidget.refresh(newProductID,function(outfits){$(SELECTORS.STYLITICS_PDP_WIDGET).height('auto');setTimeout(function(){$(SELECTORS.STYLITICS_PDP_WIDGET).height('auto');},250);showJumpLink(outfits);});}
function showJumpLink(outfits){if(outfits.length>=3){$(SELECTORS.STYLITICS_JUMP_LINK).css('display','inline-block');$(SELECTORS.STYLITICS_PDP_WIDGET_HEADER).css('display','block');$(SELECTORS.STYLITICS_PDP_WIDGET).css('display','block');}else{$(SELECTORS.STYLITICS_JUMP_LINK).css('display','none');$(SELECTORS.STYLITICS_PDP_WIDGET_HEADER).css('display','none');$(SELECTORS.STYLITICS_PDP_WIDGET).css('display','none');}}
function loadStackedCarousel(){let opts={};let carouselCols=3;$(SELECTORS.STYLITICS_STACKED_CAROUSEL_WIDGET_WRAPPER).each(function(widgetIndex,element){let $widget=$(element);let widgetData=$(SELECTORS.STYLITICS_STACKED_CAROUSEL_DATA,$widget).data();if(typeof widgetData.stackedCarouselCols!=='undefined'){carouselCols=widgetData.stackedCarouselCols;}
if(widgetData.stackedCarouselClickToReveal){opts={api:{total:widgetData.stackedCarouselTotal},display:{cols:carouselCols,ctaThemeClass:widgetData.stackedCarouselThemeClass,ctaPosition:widgetData.stackedCarouselPosition,ctaText:widgetData.stackedCarouselCtaText,ctaBackToLookText:widgetData.stackedCarouselCtaBackToLookText,itemCtaText:widgetData.stackedCarouselItemCtaText}};}else{opts={api:{total:widgetData.stackedCarouselTotal},display:{cols:carouselCols}};}
appendArrowOptions(opts,widgetData);let username=widgetData.styliticsUsername;let galleryTagsString=widgetData.styliticsTags.substring(1,widgetData.styliticsTags.indexOf(']'));let galleryTags=[];galleryTags=galleryTagsString.split(',');let $wrappedWidgets=$widget.find(SELECTORS.STYLITICS_STACKED_CAROUSEL_WIDGET);for(let i=0;i<galleryTags.length;i++){galleryTags[i]=galleryTags[i].trim();let $subWidget=$wrappedWidgets.eq(i);let widgetDivID=$subWidget.prop('id');widgetDivID+='_'+widgetIndex;$subWidget.prop('id',widgetDivID);let tag=galleryTags[i];opts.api.tags=tag;if(StyliticsWidget!=null){let stackedCarouselWidget=new StyliticsWidget(username,widgetDivID,opts);$subWidget.css('display','block');stackedCarouselWidget.load();}}});}
function loadFullPageGallery(){let opts={};let galleryCols=3;let galleryRows=3;let galleryPadding=5;$(SELECTORS.STYLITICS_FULL_PAGE_GALLERY_WIDGET_WRAPPER).each(function(index,element){const $widget=$(element);const widgetData=$(SELECTORS.STYLITICS_FULL_PAGE_GALLERY_DATA,$widget).data();$widget.css('display','block');if(widgetData.styliticsFullPageGalleryPadding!==''){galleryPadding=widgetData.styliticsFullPageGalleryPadding;}
if(widgetData.styliticsFullPageGalleryCols!==''){galleryCols=widgetData.styliticsFullPageGalleryCols;}
if(widgetData.styliticsFullPageGalleryRows!==''){galleryRows=widgetData.styliticsFullPageGalleryRows;}
if(widgetData.styliticsFullPageGalleryClickToReveal){opts={api:{total:widgetData.styliticsFullPageGalleryTotal},display:{galleryPadding:galleryPadding,carouselWrap:widgetData.styliticsFullPageGalleryCarouselWrap,cols:galleryCols,rows:galleryRows,ctaThemeClass:widgetData.styliticsFullPageGalleryThemeClass,ctaPosition:widgetData.styliticsFullPageGalleryPosition,ctaText:widgetData.styliticsFullPageGalleryCtaText,ctaBackToLookText:widgetData.styliticsFullPageGalleryCtaBackToLookText,itemCtaText:widgetData.styliticsFullPageGalleryItemCtaText}};}else{opts={api:{total:widgetData.styliticsFullPageGalleryTotal},display:{galleryPadding:galleryPadding,carouselWrap:widgetData.styliticsFullPageGalleryCarouselWrap,cols:galleryCols,rows:galleryRows}};}
appendArrowOptions(opts,widgetData);let username=widgetData.styliticsUsername;let galleryTagsString=widgetData.styliticsFullPageGalleryTags.substring(1,widgetData.styliticsFullPageGalleryTags.indexOf(']'));let galleryTags=[];galleryTags=galleryTagsString.split(',');let $subWidgets=$(SELECTORS.STYLITICS_FULL_PAGE_GALLERY_WIDGET,$widget);for(let i=0;i<galleryTags.length;i++){galleryTags[i]=galleryTags[i].trim();let $subWidget=$subWidgets.eq(i);let widgetDivID=$subWidget.prop('id')+'_'+index;$subWidget.prop('id',widgetDivID);let tag=galleryTags[i];opts.api.tags=tag;if(StyliticsWidget!=null){let fullPageGalleryWidget=new StyliticsWidget(username,widgetDivID,opts);$subWidget.css('display','block');fullPageGalleryWidget.load();}}});}
$(document).ready(function(){let styliticsPDPWidget=null;styliticsPDPWidget=loadPDPWidget();$(SELECTORS.STYLITICS_JUMP_LINK).on('click',function(){if($(SELECTORS.PUMA_HEADER).length>0&&$(SELECTORS.ADD_TO_CART_MOBILE).length===0){$(window).scrollTop($(SELECTORS.STYLITICS_PDP_WIDGET).parent().position().top-$(SELECTORS.PUMA_HEADER).height());}else{$(window).scrollTop($(SELECTORS.STYLITICS_PDP_WIDGET).parent().position().top-$(SELECTORS.ADD_TO_CART_MOBILE).height());}});$(document).on('swatchClickResponse',(e)=>{let responseData=e.originalEvent.customData.responseData;let styleNumber=responseData.styleNumber;if(styliticsPDPWidget){refreshPDPWidget(styliticsPDPWidget,styleNumber);}});if($(SELECTORS.STYLITICS_STACKED_CAROUSEL_WIDGET).length>0){loadStackedCarousel();}
if($(SELECTORS.STYLITICS_FULL_PAGE_GALLERY_WIDGET).length>0){loadFullPageGallery();}});