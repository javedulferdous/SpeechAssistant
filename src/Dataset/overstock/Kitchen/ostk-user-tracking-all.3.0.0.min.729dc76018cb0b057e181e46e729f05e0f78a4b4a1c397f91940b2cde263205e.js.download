var LZString=function(){function a(a,b){if(!e[a]){e[a]={};for(var c=0;c<a.length;c++)e[a][a.charAt(c)]=c}return e[a][b]}var b=String.fromCharCode,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={},f={compressToBase64:function(a){if(null==a)return"";var b=f._compress(a,6,function(a){return c.charAt(a)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:f._decompress(b.length,32,function(d){return a(c,b.charAt(d))})},compressToUTF16:function(a){return null==a?"":f._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32})},compressToUint8Array:function(a){for(var b=f.compress(a),c=new Uint8Array(2*b.length),d=0,e=b.length;d<e;d++){var g=b.charCodeAt(d);c[2*d]=g>>>8,c[2*d+1]=g%256}return c},decompressFromUint8Array:function(a){if(null===a||void 0===a)return f.decompress(a);for(var c=new Array(a.length/2),d=0,e=c.length;d<e;d++)c[d]=256*a[2*d]+a[2*d+1];var g=[];return c.forEach(function(a){g.push(b(a))}),f.decompress(g.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":f._compress(a,6,function(a){return d.charAt(a)})},decompressFromEncodedURIComponent:function(b){return null==b?"":""==b?null:(b=b.replace(/ /g,"+"),f._decompress(b.length,32,function(c){return a(d,b.charAt(c))}))},compress:function(a){return f._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,f,g={},h={},i="",j="",k="",l=2,m=3,n=2,o=[],p=0,q=0;for(f=0;f<a.length;f+=1)if(i=a.charAt(f),Object.prototype.hasOwnProperty.call(g,i)||(g[i]=m++,h[i]=!0),j=k+i,Object.prototype.hasOwnProperty.call(g,j))k=j;else{if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;d<n;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;d<8;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;d<n;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;d<16;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;d<n;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++),g[j]=m++,k=String(i)}if(""!==k){if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;d<n;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;d<8;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;d<n;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;d<16;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;d<n;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++)}for(e=2,d=0;d<n;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;for(;;){if(p<<=1,q==b-1){o.push(c(p));break}q++}return o.join("")},decompress:function(a){return null==a?"":""==a?null:f._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,d){var e,f,g,h,i,j,k,l=[],m=4,n=4,o=3,p="",q=[],r={val:d(0),position:c,index:1};for(e=0;e<3;e+=1)l[e]=e;for(g=0,i=Math.pow(2,2),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;switch(g){case 0:for(g=0,i=Math.pow(2,8),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;k=b(g);break;case 1:for(g=0,i=Math.pow(2,16),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;k=b(g);break;case 2:return""}for(l[3]=k,f=k,q.push(k);;){if(r.index>a)return"";for(g=0,i=Math.pow(2,o),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;switch(k=g){case 0:for(g=0,i=Math.pow(2,8),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;l[n++]=b(g),k=n-1,m--;break;case 1:for(g=0,i=Math.pow(2,16),j=1;j!=i;)h=r.val&r.position,r.position>>=1,0==r.position&&(r.position=c,r.val=d(r.index++)),g|=(h>0?1:0)*j,j<<=1;l[n++]=b(g),k=n-1,m--;break;case 2:return q.join("")}if(0==m&&(m=Math.pow(2,o),o++),l[k])p=l[k];else{if(k!==n)return null;p=f+f.charAt(0)}q.push(p),l[n++]=f+p.charAt(0),m--,f=p,0==m&&(m=Math.pow(2,o),o++)}}};return f}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});var ostk=ostk||{};ostk.func=ostk.func||{},ostk.func.track=ostk.func.track||{},ostk.func.track.data=ostk.func.track.data||{},ostk.func.track.data.regex=ostk.func.track.data.regex||{},ostk.func.track.cust=ostk.func.track.cust||{},ostk.func.track.cust.segment=ostk.func.track.cust.segment||{},ostk.func.ajax=ostk.func.ajax||{},ostk.func.ajax.JsonHttpRequest=function(a,b){var c={};c.method=a.method||"GET",c.url=a.url||"",c.async=void 0===a.async||a.async;var d=void 0===b?null:JSON.stringify(b),e=!1,f=0;c.headers="DELETE"===a.method?{}:{"Content-Type":"application/json"};var g;if(window.fetch)g=new Promise(function(a,b){fetch(c.url,{method:c.method,mode:"cors",cache:"no-cache",credentials:"include",headers:c.headers,redirect:"follow",body:d}).then(function(c){if(e=!0,f=c.status,!c.status||c.status<200||c.status>299)return void b(c.statusText);c.text().then(function(b){a(b?JSON.parse(b):{})}).catch(function(a){b(a)})}).catch(function(a){e=!0,b(a)})});else{var h=new XMLHttpRequest;g=new Promise(function(a,b){h.onreadystatechange=function(){if(h.readyState==XMLHttpRequest.DONE){if(e=!0,f=h.status,!h.status||h.status<200||h.status>299)return void b("");a(h.response?h.response:{})}}}),h.open(c.method,c.url,c.async),h.setRequestHeader("Content-Type","application/json"),h.responseType="json",h.withCredentials=!0,d?h.send(d):h.send()}this.isReady=function(){return e},this.getStatus=function(){return getResult(),f},this.getResult=function(){return Promise.resolve(g)}},ostk.func.track.data.trackingSegs=[],ostk.func.track.data.trackingSegs[1]=!0,ostk.func.track.data.trackingSegs[2]=!0,ostk.func.track.data.trackingSegs[3]=!0,ostk.func.track.data.trackingSegs[4]=!0,ostk.func.track.data.trackingSegs[5]=!0,ostk.func.track.data.trackingSegs[6]=!0,ostk.func.track.data.marketingSegs=[],ostk.func.track.data.marketingSegs[45]=!0,ostk.func.track.data.marketingSegs[46]=!0,ostk.func.track.data.marketingSegs[47]=!0,ostk.func.track.data.marketingSegs[48]=!0,ostk.func.track.data.marketingSegs[49]=!0,ostk.func.track.data.marketingSegs[50]=!0,ostk.func.track.data.marketingSegs[51]=!0,ostk.func.track.data.marketingSegs[52]=!0,ostk.func.track.data.marketingSegs[53]=!0,ostk.func.track.data.marketingSegs[54]=!0,ostk.func.track.data.marketingSegs[55]=!0,ostk.func.track.data.regex.locale=/([a-z]{2})?(?:_?([A-Z]{2}))?/,ostk.func.track.cust.segment.filter=function(a,b){for(var c=[],d=0;d<a.length;d++)b[a[d]]&&c.push(a[d]);return c},ostk.func.track.cust.segment.filterTracking=function(a){return ostk.func.track.cust.segment.filter(a,ostk.func.track.data.trackingSegs)},ostk.func.track.cust.segment.filterMarketing=function(a){return ostk.func.track.cust.segment.filter(a,ostk.func.track.data.marketingSegs)},ostk.func.track.PageViewHelper=function(a){this.data=a;var b=function(){return!!(a&&a.locale&&a.locale.match)&&a.locale.match(ostk.func.track.data.regex.locale)};this.getLanguage=function(){var a=b();return a&&a.length&&a.length>1?a[1]:null},this.getCountry=function(){var a=b();return a&&a.length&&a.length>2?a[2]:null}},ostk.func.track.PageViewHelper.prototype.isInternational=function(){return"US"!==this.getCountry()},ostk.func.cookie=ostk.func.cookie||{},ostk.func.cookie.Cookie=function(a,b){var c=this;this.name=a,this.value=b,this.path="/",this.domain=".overstock.com";var d=function(){if(!c.value)return null;if("object"==typeof c.value){var a=[];for(var b in c.value)a.push(b+"^"+c.value[b]);return a.join("|")}return String(c.value)};this.withDomain=function(a){return c.domain=a,c},this.withPath=function(a){return c.path=a,c},this.withExpDate=function(a){if(!a)return c;var b="";switch(a.constructor){case Number:var d=new Date;d.setDate(d.getDate()+a),b=d.toUTCString();break;case Date:b=a.toUTCString();break;case String:b=a}return c.expDate=b,c},this.write=function(){var b=d();b&&(document.cookie=a+"="+b+(c.domain?"; domain="+c.domain:"")+(c.path?"; path="+c.path:"")+(c.expDate?"; expires="+c.expDate:""))}},ostk.func.cookie.Cookie.read=function(a,b){var c=a+"=";if(-1===document.cookie.indexOf(c))return null;for(var d=document.cookie.split(";"),e=d.pop();e&&(e=e.trim(),0!==e.indexOf(c));)e=d.pop();if(!e||0===d.length)return null;var f=decodeURIComponent(e.substring(c.length));if(b){for(var g=f.split("|"),h={},i=0;i<g.length;++i){var j=g[i],k=j.indexOf("^");k>-1&&k<j.length&&(h[j.substring(0,k)]=j.substring(k+1))}return new ostk.func.cookie.Cookie(a,h)}return new ostk.func.cookie.Cookie(a,f)},ostk.func.cookie.Cookie.readOrCreate=function(a,b){var c=ostk.func.cookie.Cookie.read(a,b);return c||new ostk.func.cookie.Cookie(a,b?{}:"")},ostk.func.track.TrackingManager=function(a,b){this.data=a,this.baseUrl=b||"https://api.overstock.com",this.recorders=[];for(var c in this.data.referenceMap){var d=ostk.func.track.TrackingEventRecorderFactory(this.data.referenceMap[c],this.data,this.baseUrl);d&&this.recorders.push(d)}},ostk.func.track.TrackingManager.prototype.getTrackingSessions=function(){for(var a=[],b=0;b<this.recorders.length;b++){var c=this.recorders[b],d=c.getTrackingSession();d&&a.push(d)}return a},ostk.func.track.TrackingManager.prototype.getPageContext=function(){return this.data&&this.data.pageContext&&window.location&&window.location.href&&(this.data.pageContext.url=window.location.href),this.data.pageContext},ostk.func.track.TrackingManager.prototype.initPageView=function(){for(var a=0;a<this.recorders.length;a++)this.recorders[a].initPageView()},ostk.func.track.TrackingManager.prototype.canSendEvent=function(){if(!this.eventReady){for(var a=0;a<this.recorders.length;a++)if(!this.recorders[a].canSendEvent())return!1;this.eventReady=!0}return this.eventReady},ostk.func.track.TrackingManager.prototype.firePageView=function(a){for(var b=0;b<this.recorders.length;b++)this.recorders[b].firePageView(a);if(a&&a.getFiredEvents)for(var c=a.getFiredEvents(),b=0;b<c.length;b++)this.fireEvent(c[b])},ostk.func.track.TrackingManager.prototype.fireVirtualPageView=function(a){for(var b=0;b<this.recorders.length;b++)this.recorders[b].fireVirtualPageView(a)},ostk.func.track.TrackingManager.prototype.fireEventSync=function(a){var b={};return a?a.name?(b.name=a.name,b.category=a.category||b.name,b.action=a.action||"CLICK",b.value="number"!=typeof a.value?1:a.value,b.sessions=this.getTrackingSessions(),a.dimensions&&(b.dimensions=a.dimensions),a.metrics&&(b.metrics=a.metrics),a.impressions&&(b.impressions=a.impressions),a.pageContext?b.pageContext=a.pageContext:b.pageContext=this.getPageContext(),new ostk.func.ajax.JsonHttpRequest({url:this.baseUrl+"/api2/tracking/events",method:"POST",async:!0},b)):void console.error("EventInfo object: required field name is missing"):void console.error("Required eventInfo object not sent to trackingManager.fireEvent")},ostk.func.track.TrackingManager.prototype.fireEvent=function(a){var b=this;return"function"!=typeof Promise?b.fireEventSync(a):ostk.func.timer.PollingPromise(100,function(){return b.canSendEvent()}).then(function(){return b.fireEventSync(a)}).catch(function(){})},ostk.func.track.TrackingManager.prototype.fireSiteTestSync=function(a){var b={};if(a&&a.name){b.name=a.name;var c="";if(a.userSeed?c=a.userSeed:this.data&&this.data.customer&&(c=this.data.customer.userSeed),c)return b.userSeed=c,a.pageContext?b.pageContext=a.pageContext:b.pageContext=this.getPageContext(),new ostk.func.ajax.JsonHttpRequest({url:this.baseUrl+"/api2/sitetests/characteristics/exposed",method:"POST",async:!0},b)}},ostk.func.track.TrackingManager.prototype.fireSiteTest=function(a){var b=this;return"function"!=typeof Promise?b.fireSiteTestSync(a):ostk.func.timer.PollingPromise(100,function(){return b.canSendEvent()}).then(function(){return b.fireSiteTestSync(a)}).catch(function(){})},ostk.func.track.TrackingManager.prototype.exposeSiteTestSync=function(a){return this.fireSiteTestSync(a)},ostk.func.track.TrackingManager.prototype.exposeSiteTest=function(a){return this.fireSiteTest(a)},ostk.func.track.TrackingManager.prototype.addAllToCart=function(a,b){return console.warn("TrackingManger.addAllToCart no longer supported.  Please contact Analytics Dev."),null},ostk.func.track.TrackingManager.prototype.addToCart=function(a,b){return console.warn("TrackingManger.addToCart no longer supported.  Please contact Analytics Dev."),null},ostk.func.track.TrackingManager.prototype.removeAllFromCart=function(a,b){return console.warn("TrackingManger.removeAllFromCart no longer supported.  Please contact Analytics Dev."),null},ostk.func.track.TrackingManager.prototype.removeFromCart=function(a,b){return console.warn("TrackingManger.removeFromCart no longer supported.  Please contact Analytics Dev."),null},ostk.func.track.TrackingManager.prototype.fireCheckoutStep=function(a,b){return console.warn("TrackingManger.fireCheckoutStep no longer supported.  Please contact Analytics Dev."),null},ostk.func.track.TrackingManager.prototype.fireProductDetails=function(a){for(var b=0;b<this.recorders.length;b++)this.recorders[b].fireProductDetails(a)},ostk.func.track.TrackingManager.prototype.fireProductView=function(a){for(var b=0;b<this.recorders.length;b++)this.recorders[b].fireProductView(a)},ostk.func.track.TrackingManager.prototype.firePurchaseOrder=function(a){if(a)for(var b=0;b<this.recorders.length;b++)this.recorders[b].firePurchaseOrder(a)},ostk.func.prod=ostk.func.prod||{},ostk.func.prod.Product=function(a){this.data=a},ostk.func.prod.Product.prototype.fullSku=function(){return this.data.shortSku+"-"+this.data.subSku},ostk.func.track.TrackingEventRecorder=function(a,b){this.data=a,this.parentData=b,this.isDefault=a.isDefault&&!0===a.isDefault},ostk.func.track.TrackingEventRecorder.prototype.initPageView=function(){},ostk.func.track.TrackingEventRecorder.prototype.canSendEvent=function(){return!0},ostk.func.track.TrackingEventRecorder.prototype.firePageView=function(a){},ostk.func.track.TrackingEventRecorder.prototype.fireVirtualPageView=function(a){},ostk.func.track.TrackingEventRecorder.prototype.fireProductDetails=function(a){},ostk.func.track.TrackingEventRecorder.prototype.fireProductView=function(a){},ostk.func.track.TrackingEventRecorder.prototype.firePurchaseOrder=function(a){},ostk.func.track.TrackingEventRecorder.prototype.addProduct=function(a){},ostk.func.track.TrackingEventRecorder.prototype.addProducts=function(a){if(a)for(var b=0;b<a.length;b++)this.addProduct(a[b])},ostk.func.track.TrackingEventRecorder.prototype.getTrackingSession=function(){return null},ostk.func.track.TrackingEventRecorder.prototype.getPageContext=function(){return null},ostk.func.track.TrackingEventRecorder.prototype.setDimension=function(a){},ostk.func.track.TrackingEventRecorder.prototype.setDimensions=function(a){if(a)for(var b in a)this.setDimension(a[b])},ostk.func.track.TrackingEventRecorder.prototype.setMetric=function(a){},ostk.func.track.TrackingEventRecorder.prototype.setMetrics=function(a){if(a)for(var b in a)this.setMetric(a[b])},ostk.func.track.data=ostk.func.track.data||{},ostk.func.track.data.trackingRecorderMap=ostk.func.track.data.trackingRecorderMap||{},ostk.func.track.TrackingEventRecorderFactory=function(a,b,c){if(!a||!a.system||!b)return null;var d=ostk.func.track.data.trackingRecorderMap[a.system];return d?new d(a,b,c):null},ostk.func.taxo=ostk.func.taxo||{},ostk.func.taxo.Taxonomy=function(a){this.data=a},ostk.func.taxo.Taxonomy.prototype.getSubcats=function(){if(!this.data||!this.data.length)return[];for(var a=[],b=0;b<this.data.length;b++){var c=this.data[b];c&&c.type&&"sub"===c.type&&a.push(c)}return a},ostk.func.taxo.Taxonomy.prototype.getAsNames=function(){return xfrmToNames(this.data.taxonomy)},ostk.func.taxo.Taxonomy.xfrmToNames=function(a){if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c].name?a[c].name:null);return b},ostk.func.timer=ostk.func.timer||{},ostk.func.timer.PollingPromise=function(a,b,c){return new Promise(function(d,e){function f(){b()?d():c&&g>c?e():(g+=a,setTimeout(f,a))}var g=0;setTimeout(f,0)})},ostk.func.track.ensighten=ostk.func.track.ensighten||{},ostk.func.track.ensighten.data=ostk.func.track.ensighten.data||{},ostk.func.track.ensighten.data.browserMap={PC_WEBSITE:"d",MOBILE_WEBSITE:"m",ANDROID_APP:"m",IPHONE_APP:"m"},ostk.func.track.ensighten.toEdlFromTaxo=function(a){if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c].displayText);return b},ostk.func.track.ensighten.toEdlFromProduct=function(a){if(!a)return null;var b={};if(a.shortSku&&(b.sku=a.shortSku),a.price&&(b.price=a.price),a.quantity&&(b.quantity=a.quantity),a.productName&&(b.productName=a.productName),b.subCatIds=[],a.taxonomy){var c=new ostk.func.taxo.Taxonomy(a.taxonomy),d=new ostk.func.taxo.Taxonomy(a.altTaxonomy),e=c.getSubcats();Array.prototype.push.apply(e,d.getSubcats());for(var f=0;f<e.length;f++){var g=e[f];g.id&&b.subCatIds.push(g.id)}}if(a.subSku){var h=new ostk.func.prod.Product(a);b.fullSku=h.fullSku()}return b},ostk.func.track.ensighten.toEdlFromProducts=function(a){var b=[];if(!a||!a.length)return b;for(var c=0;c<a.length;c++)b.push(ostk.func.track.ensighten.toEdlFromProduct(a[c]));return b},ostk.func.track.ensighten.addBasePageInfo=function(a,b){var c=b||{};if(!a)return c;var d=new ostk.func.track.PageViewHelper(a);return a.device&&a.device.appType&&(c.browser=ostk.func.track.ensighten.data.browserMap[a.device.appType]),c.isInternational=d.isInternational(),a.customer&&(a.customer.id&&(c.id=a.customer.id),a.customer.segments&&(c.segment=ostk.func.track.cust.segment.filterTracking(a.customer.segments),c.channel=ostk.func.track.cust.segment.filterMarketing(a.customer.segments)),a.customer.internalEmailHash&&(c.ehid=a.customer.internalEmailHash),a.customer.externalEmailHash&&(c.eid=a.customer.externalEmailHash)),a.campaign&&(a.campaign.id&&(c.cid=a.campaign.id),a.campaign.source&&(c.camSource=a.campaign.source),a.campaign.group&&(c.camGroup=a.campaign.group)),c},ostk.func.track.ensighten.addProduct=function(a,b){var c=b||{},d=ostk.func.track.ensighten.toEdlFromProduct(a);return d&&(c.items=c.items||[],c.items.push(d)),c},ostk.func.track.ensighten.addFeaturedProduct=function(a,b){var c=b||{};return a.featuredProduct&&(c=ostk.func.track.ensighten.addProduct(a.featuredProduct,c)),c},ostk.func.track.ensighten.addBreadCrumbs=function(a,b){var c=b||{};return a.taxonomy&&(c.crumbs=ostk.func.track.ensighten.toEdlFromTaxo(a.taxonomy)),c},ostk.func.track.ensighten.addCartInfo=function(a,b){var c=b||{};return a?(c.items=ostk.func.track.ensighten.toEdlFromProducts(a.products),a.subtotal&&(c.subtotal=a.subtotal),a.savings&&(c.savings=a.savings),a.shipping&&(c.shipping=a.shipping),a.tax&&(c.taxes=a.tax),a.total&&(c.grandTotal=a.total),c):c},ostk.func.track.ensighten.addProductPageInfo=function(a,b){var c=ostk.func.track.ensighten.addFeaturedProduct(a,b);return ostk.func.track.ensighten.addBreadCrumbs(a,c)},ostk.func.track.ensighten.addTaxonomyPageInfo=function(a,b){var c=ostk.func.track.ensighten.addFeaturedProduct(a,b);return ostk.func.track.ensighten.addBreadCrumbs(a,c)},ostk.func.track.ensighten.addSearchPageInfo=function(a,b){var c=ostk.func.track.ensighten.addFeaturedProduct(a,b);return a&&a.keywords&&(c.searchTerm=a.keywords),ostk.func.track.ensighten.addBreadCrumbs(a,c)},ostk.func.track.ensighten.addCartPageInfo=function(a,b){var c=b||{};return a&&a.cart&&(c=ostk.func.track.ensighten.addCartInfo(a.cart,c)),c},ostk.func.track.ensighten.data.pageInfoMap={PRODUCT:ostk.func.track.ensighten.addProductPageInfo,TAXONOMY:ostk.func.track.ensighten.addTaxonomyPageInfo,SEARCH:ostk.func.track.ensighten.addSearchPageInfo,CART:ostk.func.track.ensighten.addCartPageInfo},ostk.func.track.ensighten.createEnsightenData=function(a,b){var c=ostk.func.track.ensighten.addBasePageInfo(a);if(b||a){var d=b||a.pageType,e=ostk.func.track.ensighten.data.pageInfoMap[d];e&&(c=e(a,c))}return c},function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","__gaTracker"),ostk.func.prod.Product.prototype.toGoogleAnalytics=function(){var a={},b=[];this.data.taxonomy?b=this.data.taxonomy:this.data.taxonomyDTO&&(b=this.data.taxonomyDTO);var c=new ostk.func.taxo.Taxonomy(b),d=c.getCategoryAnalytics();if(this.data.shortSku&&(a.id=this.data.shortSku),this.data.productName&&(a.name=this.data.productName),d&&(a.category=d),this.data.brand&&(a.brand=this.data.brand),this.data.optionDescription){var e=this.data.optionDescription;this.data.subSku&&(e=e+"("+this.data.subSku+")"),a.variant=e}return this.data.price&&(a.price=this.data.price.toString()),this.data.coupon&&(a.coupon=this.data.coupon),this.data.quantity&&(a.quantity=this.data.quantity),this.data.position&&(a.position=this.data.position),a},ostk.func.track.GoogleAnalyticsEventRecorder=function(a,b,c){var d=this;ostk.func.track.TrackingEventRecorder.call(d,a,b),this.useLabel=function(){return d.data.label&&!d.data.isDefault},this.addLabel=function(a){return d.useLabel()?d.data.label+"."+a:a},this.ecLabel=function(a){return d.addLabel("ec:"+a)},this.writeDevIdCookie=function(a){var b=ostk.func.cookie.Cookie.readOrCreate("dev_ids",!0);b.value.ga_id=a,b.withExpDate(365).write()}},ostk.func.track.GoogleAnalyticsEventRecorder.prototype=Object.create(ostk.func.track.TrackingEventRecorder.prototype),ostk.func.track.GoogleAnalyticsEventRecorder.prototype.initPageView=function(){var a=this,b={};if(this.parentData&&this.parentData.customer&&(this.parentData.customer.id&&(b.userId=this.parentData.customer.id.toString()),this.parentData.customer.userSeed)){var c=this.parentData.customer.userSeed;a.clientId=c,a.writeDevIdCookie(c),b.clientId=c}this.useLabel()&&(b.name=this.data.label),0===b.length?__gaTracker("create",this.data.extReference,"auto"):b.userId?__gaTracker("create",this.data.extReference,b):__gaTracker("create",this.data.extReference,"auto",b),__gaTracker(function(b){var c=b;if(a.useLabel()&&(c=__gaTracker.getByName(a.data.label)),a.tracker=c,c){var d=c.get("clientId");if(!d||d===a.clientId)return;a.clientId=d,a.writeDevIdCookie(d)}});var d=this.addLabel("require");__gaTracker(d,"displayfeatures"),__gaTracker(d,"adfeatures"),__gaTracker(d,"ec"),this.parentData&&this.parentData.campaign&&__gaTracker("set","campaignName",this.parentData.campaign.id),this.setDimensions(this.data.dimensions),this.setMetrics(this.data.metrics)},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.canSendEvent=function(){return void 0!==this.clientId},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.firePageView=function(a){if(a&&a.getProductDetails)for(var b=a.getProductDetails(),c=0;c<b.length;c++)this.fireProductDetails(b[c]);if(a&&a.getProductViews)for(var d=a.getProductViews(),c=0;c<d.length;c++)this.fireProductView(d[c]);if(a&&a.getPurchasedOrders)for(var e=a.getPurchasedOrders(),c=0;c<e.length;c++)this.firePurchaseOrder(e[c]);__gaTracker(this.addLabel("send"),"pageview")},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.fireVirtualPageView=function(a){__gaTracker(this.addLabel("send"),"pageview",a)},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.fireProductDetails=function(a){a&&(this.addProduct(a),__gaTracker(this.ecLabel("setAction"),"detail"))},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.fireProductView=function(a){if(a){var b=new ostk.func.prod.Product(a),c=b.toGoogleAnalytics();__gaTracker(this.ecLabel("addImpression"),c)}},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.firePurchaseOrder=function(a){if(a){a.products&&this.addProducts(a.products);var b={};if(a.id&&(b.id=a.id.toString()),a.affiliation&&(b.affiliation=a.affiliation),a.revenue&&(b.revenue=a.revenue.toString()),a.tax&&(b.tax=a.tax.toString()),(a.shipping||0===a.shipping)&&(b.shipping=a.shipping.toString()),a.coupon&&(b.coupon=a.coupon),__gaTracker(this.ecLabel("setAction"),"purchase",b),a.trackingReferences){var c;for(var d in a.trackingReferences){var e=a.trackingReferences[d];e.system===this.data.system&&e.extReference===this.data.extReference&&(c=e)}c&&(this.setDimensions(c.dimensions),this.setMetrics(c.metrics))}}},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.addProduct=function(a){if(a){var b=new ostk.func.prod.Product(a),c=b.toGoogleAnalytics();__gaTracker(this.ecLabel("addProduct"),c)}},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.getTrackingSession=function(){return{system:"GOOGLE_ANALYTICS",extReference:this.data.extReference,extSessionId:this.clientId}},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.setDimension=function(a){a&&a.extName&&a.value&&__gaTracker(this.addLabel("set"),"dimension"+a.extName,a.value)},ostk.func.track.GoogleAnalyticsEventRecorder.prototype.setMetric=function(a){if(a&&a.extName){var b=a.value?a.value:1;__gaTracker(this.addLabel("set"),"metric"+a.extName,b)}},ostk.func.track.data=ostk.func.track.data||{},ostk.func.track.data.trackingRecorderMap=ostk.func.track.data.trackingRecorderMap||{},ostk.func.track.data.trackingRecorderMap.GOOGLE_ANALYTICS=ostk.func.track.GoogleAnalyticsEventRecorder,ostk.func.taxo.Taxonomy.prototype.getCategoryAnalytics=function(){for(var a=[],b=this.data.slice(0,5),c=0;c<b.length;c++){var d=b[c];if(d){var e=d.displayText+"("+d.id+")";a.push(e)}}return a.join("/")},ostk.func.track.HadoopEventRecorder=function(a,b,c){ostk.func.track.TrackingEventRecorder.call(this,a,b)},ostk.func.track.HadoopEventRecorder.prototype=Object.create(ostk.func.track.TrackingEventRecorder.prototype),ostk.func.track.HadoopEventRecorder.prototype.firePageView=function(a){var b=ostk.func.cookie.Cookie.readOrCreate("fngprnt",!0),c={};c.Resolution=screen.width+","+screen.height,c["Browser dimensions"]=(window.innerWidth||document.body.clientWidth)+","+(window.innerHeight||document.body.clientHeight);var d=new Date;c["Timezone offset from UTC in minutes"]=d.getTimezoneOffset(),c["Color depth"]=screen.colorDepth,c["Java enabled"]=navigator.javaEnabled(),c.Locale=navigator.language,c.Encoding=document.inputEncoding,c["Local Storage Enabled"]=null!=window.localStorage||0;var e=[];for(i=0;i<navigator.plugins.length;i++)e.push(navigator.plugins[i].name);c["Browser Plugins"]=JSON.stringify(e);var f=LZString.compressToBase64(JSON.stringify(c));b.value=JSON.stringify(f);var g=new Date;g.setMinutes(g.getMinutes()+30),b.withExpDate(g).write()},ostk.func.track.data.trackingRecorderMap=ostk.func.track.data.trackingRecorderMap||{},ostk.func.track.data.trackingRecorderMap.HADOOP=ostk.func.track.HadoopEventRecorder,ostk.func.track.omniture=ostk.func.track.omniture||{},ostk.func.track.OmnitureEventRecorder=function(a,b,c){var d=this;this.baseUrl=c,ostk.func.track.TrackingEventRecorder.call(this,a,b),this.createPageName=function(a){if(!a)return null;var b=document.createElement("a");b.href=a;var c=b.pathname?b.pathname.replace("/^/+|/+$/g","").trim():"home";return c=b.hash?c+":"+b.hash:c,c?c.replace("//+|#/g",":"):"home"},this.getSiteTest=function(c){if(!b.activeSiteTestMap)return null;var d=b.activeSiteTestMap[c];if(!d||!d.slotNumber&&0!=d.slotNumber||!a.dimensions)return null;var e=a.dimensions["SITE_TEST_SLOT_"+d.slotNumber];if(30==d.slotNumber){var f={};return f.extName="list1",f.name=d.siteTest,f.value=d.siteTest+"|"+d.testGroup,f}return e},this.getSVar=function(){return void 0!==typeof s_gi&&(d.sVar=d.sVar||s_gi(d.data.extReference)),d.sVar},this.getMarketingCloudVisitorId=function(){if(!d.marketingCloudVisitorId){var a=d.getSVar();a&&a.visitor&&(d.marketingCloudVisitorId=a.visitor.getMarketingCloudVisitorID())}return d.marketingCloudVisitorId},this.getPageName=function(){if(!d.pageName){var a=d.getSVar();a&&(d.pageName=a.pageName)}return d.pageName},this.getPageType=function(){if(!d.pageType){var a=d.getSVar();a&&(d.pageType=a.pagetype)}return d.pageType},this.getUrl=function(){if(!d.url){var a=d.getSVar();a&&(d.url=a.pageURL)}return d.url},this.appendToList1=function(a){var b=this.getSVar();if(a.length>0)if(b.list1&&b.list1.length>0){if(b.list1.includes(a))return;b.list1+=","+a,ostk.data.track.omniture.s.list1+=","+a}else b.list1=a,ostk.data.track.omniture.s.list1=a},this.blockExposureWhenQueryParam_stgovrde=function(a){if(window.location.href.indexOf("stgovrde=")<0)return!1;var b=ostk.data.track.pageViewData.referenceMap.omniture.dimensions;for(var c in b)if(c.indexOf("SITE_TEST_SLOT_")>-1){var d=b[c];a[d.extName]=null,ostk.data.track.omniture.s[d.extName]=null}return!0},this.populateFiredSiteTestsOnSVar=function(a,b){if(b&&a)for(var c=0;c<a.length;c++){var e=a[c],f=e&&e.name?this.getSiteTest(e.name):null;f&&f.extName&&f.value&&("list1"==f.extName?d.appendToList1(f.value):(b[f.extName]=f.value,ostk.data.track.omniture.s[f.extName]=f.value))}},this.getExposedSiteTestsPromise=function(a,b){try{if(this.blockExposureWhenQueryParam_stgovrde(b))return Promise.race(["",0])}catch(a){console.log("Error blockExposureWhenQueryParam_stgovrde: "+a)}try{this.populateFiredSiteTestsOnSVar(a,b)}catch(a){console.log("Error populateFiredSiteTestsOnSVar: "+a)}try{var c={};c.customer=ostk.data.track.pageViewData.customer,c.exposed=ostk.data.track.omniture.s,c.device=ostk.data.track.pageViewData.device,c.locale=ostk.data.track.pageViewData.locale,c.taxonomy=ostk.data.track.pageViewData.taxonomy,c.pageContext=ostk.data.track.pageViewData.pageContext,c.itemsInCart=ostk.data.itemsInCart,"undefined"!=typeof ensighten&&ensighten&&(c.items=ensighten.items,c.grandTotal=ensighten.grandTotal,c.subtotal=ensighten.subtotal,c.taxes=ensighten.taxes,c.shipping=ensighten.shipping,c.country=ensighten.country,c.currency=ensighten.currency,c.marketingChannel=ensighten.channel||[]),performance&&performance.timing&&(c.performance={},c.performance.requestStart=performance.timing.requestStart,c.performance.responseStart=performance.timing.responseStart,c.performance.responseEnd=performance.timing.responseEnd,c.performance.domInteractive=performance.timing.domInteractive),os&&os.Otags&&(c.promoCID=os.Otags.promoCID)}catch(a){console.log("Error populating expData: "+a)}var d=ostk.data.track.pageViewData.customer.userSeed,e=1e3,f=new ostk.func.ajax.JsonHttpRequest({url:this.baseUrl+"/sitetestbroker/external/sitetests/exposures/"+d,method:"POST",async:!1},c).getResult(),g=new Promise(function(a,b){var c=setTimeout(function(){clearTimeout(c),b("Timed out in "+e+"ms.")},e)});return Promise.race([f,g]).catch(function(a){console.log("failed to load exposed sitetests")})},this.doFirePageView=function(a){var b=this.getSVar();if(b){var c=this.getMarketingCloudVisitorId();if(!d){window.optimizely&&"function"==typeof window.optimizely.get&&window.optimizely.get("custom/adobeIntegrator")&&window.optimizely.get("custom/adobeIntegrator").assignCampaigns(b);var d=b.t();d&&document.write(d)}if(c){var e=ostk.func.cookie.Cookie.readOrCreate("dev_ids",!0);e.value.omni_id=c,e.withExpDate(365).write()}}},this.populateExposuresFromSiteTestBroker=function(a,b){d=this,d.getExposedSiteTestsPromise(a,s).then(function(a){for(var c="",e=0;e<a.length;e++)"list1"!=a[e].evar?f[a[e].evar]=a[e].siteTest+"|"+a[e].segment:(c.length>0&&(c+=","),c+=a[e].siteTest+"|"+a[e].segment);if(d.appendToList1(c),b&&void 0!==b)d.doFirePageView(b);else{var f=d.getSVar();f&&f.t()}}).catch(function(a){console.log(a)})}},ostk.func.track.OmnitureEventRecorder.prototype=Object.create(ostk.func.track.TrackingEventRecorder.prototype),ostk.func.track.OmnitureEventRecorder.prototype.initPageView=function(){},ostk.func.track.OmnitureEventRecorder.prototype.canSendEvent=function(){return void 0!==this.getMarketingCloudVisitorId()},ostk.func.track.OmnitureEventRecorder.prototype.fireVirtualPageView=function(a){if(a){var b=this.getSVar();b&&(b.pageUrl=a,b.pageName=this.createPageName(a),this.populateExposuresFromSiteTestBroker(ostk.data.track.trackingManager.getFiredSiteTests()))}},ostk.func.track.OmnitureEventRecorder.prototype.firePageView=function(a){this.getSVar()&&(_this=this,a?_this.populateExposuresFromSiteTestBroker(a.getFiredSiteTests(),a):_this.doFirePageView(a))},ostk.func.track.OmnitureEventRecorder.prototype.getTrackingSession=function(){return{system:"OMNITURE",extReference:this.data.extReference,extSessionId:this.getMarketingCloudVisitorId()}},ostk.func.track.OmnitureEventRecorder.prototype.getPageContext=function(){return{url:this.getUrl(),pageName:this.getPageName(),pageType:this.getPageType()}},ostk.func.track.data=ostk.func.track.data||{},ostk.func.track.data.trackingRecorderMap=ostk.func.track.data.trackingRecorderMap||{},ostk.func.track.data.trackingRecorderMap.OMNITURE=ostk.func.track.OmnitureEventRecorder;