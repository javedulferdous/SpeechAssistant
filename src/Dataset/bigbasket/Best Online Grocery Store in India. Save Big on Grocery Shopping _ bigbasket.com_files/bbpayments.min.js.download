!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["my-library"]=t():e["my-library"]=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=function(){var e,t=void 0,n=void 0,o=void 0,a={},r="checkout",i="true",c=!1,d="/order/place_web_order/",s="/mapi/v4.0.0/pay-now/",l={order_ids:[],p_order_id:[],wallet:1,txn_type:"pay_now_forget_voucher"},u={service:"in.juspay.hyperpay",signature:void 0,entry_point_id:"sdkTarget",client_id:"",customer_id:void 0,customer_phone_number:void 0,endUrls:[],amount:void 0,merchant_key_id:void 0,env:"sandbox",merchant_id:void 0,order_id:void 0,order_details:void 0,handlePaymentAttempt:!0,signature_payload:""};function p(e,a){return new Promise((function(r,i){(function(e,t){return new Promise((function(n){var o={"X-SourceId":1,"X-SourceSlug":"bigbasket","Content-type":"application/json; charset=UTF-8"};o["X-TimeStamp"]=function(){if(null==document.cookie.match("ts"))return(new Date).getTime();var e=document.cookie.match(new RegExp("[; ]ts=([^;]*)"))[1];return'"'==e[0]?JSON.parse(e):e}(),fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:o,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then((function(e){n(e.json())}))}))})(e,a).then((function(e){if(0==e.status&&e&&e.response&&!e.response.fallback)return n=e.response.bb_txn_id,o=e.response.return_url,u.order_id=e.response.bb_txn_id,w(e.response,"SDK"),void r(function(e){return new Promise((function(n,o){var a=document.createElement("script");a.type="text/javascript",a.src="https://payments.juspay.in/web/PIL.js",a.onload=function(){PIL.load("1").then((function(o){(t=o).startApp(e),t.onEvent(h),n("success")})).catch((function(e){o(e)}))},document.head.appendChild(a)}))}(JSON.stringify(u)));r("fallback",e.message)})).catch((function(e){i(e)}))}))}function f(e,t){a.loader&&a.loader(!1),1004!=e.error_code&&"failure"!=e.status&&"1"!=e.status||g("critical","restart"),e.details?t.sendResponse({status:!!e.details.redirect_to_pg}):t.sendResponse({status:!!e.response.redirect_to_pg}),e.response&&1==e.response.redirect_to_pg||e.details&&1==e.details.redirect_to_pg||(1e3===e.error_code||1005===e.error_code||e.response&&!e.response.redirect_to_pg||e.details&&!e.details.redirect_to_pg?window.location.href=o:g("critical",e.message))}function m(e,t){a.loader&&a.loader(!0),v(d,e.payload).then((function(e){f(e,t)})).catch((function(e){a.loader&&a.loader(!1),g("critical",e)}))}function y(e,t,n){e.style.display="none",document.getElementsByTagName("body")[0].style.overflow="auto",t&&n.sendResponse({status:!1})}function b(e,t){var n=document.getElementById("myPayModal"),o=document.getElementById("proceedPlaceOrder"),a=document.getElementById("cancelPlaceOrder");!function(e){e.style.display="block",document.getElementsByTagName("body")[0].style.overflow="hidden"}(n),o.onclick=function(){y(n),m(e,t)},a.onclick=function(){y(n,!0,t)},window.onclick=function(e){e.target==n&&y(n,!0,t)}}function h(e,t){if(a[e.event]||"paymentAttempt"==e.event)switch(e.event){case"paymentAttempt":if("checkout"==r){if(c)return void b(e,t);m(e,t)}else!function(e,t){a.loader&&a.loader(!0);var n=Object.assign(e.payload,l);v(s,n).then((function(e){0!=e.status?(a.loader&&a.loader(!1),g("critical",e.message)):f(e,t)})).catch((function(e){a.loader&&a.loader(!1),g("critical",e)}))}(e,t);a.paymentInitiated&&a.paymentInitiated(e);break;case"setPageHeader":a[e.event](e,t);break;case"invokeErrorHandling":"post_page_initiation"===e.data.stage||"post_send_event_initiation"===e.data.stage?g("critical","restart"):"post_payment_attempt_initiation"===e.data.stage&&g("critical","redirect");break;default:a[e.event](e,t)}else console.log("".concat(e.event," event not handled, Please look into this asap!"))}function w(e,t){Object.keys(e).forEach((function(n){switch(t){case"SDK":n in u&&(u[n]=e[n]);break;case"PAYNOW":n in l&&(l[n]=e[n])}}))}function g(e,t){switch(a.loader&&a.loader(!1),e){case"critical":"redirect"==t?window.location.href=o:a.invokeErrorHandling(t);break;default:a.invokeErrorHandling(t)}}function v(e,t){var o=new FormData;for(var a in o.append("bb_txn_id",n),o.append("deduct_from_wallet",i),t)o.append(a,t[a]);return new Promise((function(t){var n={"content-type":"application/x-www-form-urlencoded;charset=UTF-8"};n["x-csrftoken"]=null==document.cookie.match("csrftoken")?(new Date).getTime():document.cookie.match(new RegExp("[; ]csrftoken=([^;]*)"))[1],fetch(e,{method:"POST",headers:n,body:new URLSearchParams(o)}).then((function(e){t(e.json())}))}))}function _(){return{start:function(e){return e.methods&&(a=e.methods),e.flow&&(r=e.flow),e.checkout_url&&(d=e.checkout_url),e.paynow_url&&(s=e.paynow_url),new Promise((function(t,n){e.url||e.payload||n(),"pwa"===e.payload.channel&&function(){var e=document.createElement("style");e.innerHTML=".pwa-modal{display:none;position:fixed;z-index:11;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4);-webkit-animation-name:fadeIn;-webkit-animation-duration:.4s;animation-name:fadeIn;animation-duration:.4s}.pwa-modal h2{font-size:18px;font-weight:700;color:#5c5c5c;margin:0}.pwa-modal p{font-size:13px;color:#5c5c5c}.pwa-modal .pwa-modal-content{position:fixed;bottom:15px;left:15px;right:15px;-webkit-animation-name:slideIn;-webkit-animation-duration:.4s;animation-name:slideIn;animation-duration:.4s;border-radius:6px;box-shadow:0 5px 15px 0 rgba(0,0,0,.1);background-color:#fff;padding:10px}.pwa-modal .pwa-modal-body{padding:2px 16px}.pwa-modal .pwa-modal-header{padding:2px 16px;color:#5c5c5c;font-family:ProximaNova;font-size:18px}.pwa-modal .pwa-modal-footer{padding:2px 16px;display:flex;justify-content:center;align-items:center}.pwa-modal .success-btn{width:135px;height:36px;box-shadow:0 2px 6px 0 rgba(233,95,98,.25);background-color:#e56167;border:1px solid #e56167;margin:4px;color:#fff;font-weight:700}.pwa-modal .cancel-btn{width:135px;height:36px;border-radius:3px;border:solid 1px #e95f62;background-color:#fff;margin:4px;color:#e95f62;font-weight:700}.pwa-modal button:focus,.pwa-modal button:hover{text-decoration:none;cursor:pointer;outline:0}@-webkit-keyframes slideIn{from{bottom:-300px;opacity:0}to{bottom:0;opacity:1}}@keyframes slideIn{from{bottom:-300px;opacity:0}to{bottom:0;opacity:1}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}",document.head.appendChild(e);var t=document.createElement("div");t.innerHTML='\n            <div id="myPayModal" class="pwa-modal">\n                <div class="pwa-modal-content">\n                    <div class="pwa-modal-header">\n                        <h2>Placing your order now</h2>\n                    </div>\n                    <div class="pwa-modal-body">\n                        <p>\n                            Your order will be placed first and then the payment will be\n                            processed. In the event the payment is not successful, your order\n                            will be converted to cash on delivery. You can choose to pay online\n                            later using the <strong>Pay Now</strong> option.\n                        </p>\n                    </div>\n                    <div class="pwa-modal-footer">\n                        <button class="cancel-btn" id="cancelPlaceOrder">Cancel</button>\n                        <button class="success-btn" id="proceedPlaceOrder">Continue</button>\n                    </div>\n                </div>\n            </div>\n            ',document.body.appendChild(t),c=!0}(),p(e.url,e.payload).then((function(e){t(e)})).catch((function(e){n(e)}))}))},inputs:function(e,t){w(e,t)},session:function(){return n},update:function(e){if(e.payload)return void 0!==e.walletStatus&&(i=1==e.walletStatus?"true":"false"),new Promise((function(n,o){t&&e.payload||o(),t.sendEvent(e.type,e.payload,(function(e,t){t?o("failed"):n("success")}))}))},navigate:function(){!t.handleBackPress()&&history.back()&&history.back()}}}return{getInstance:function(){return e||(e=_()),e}}}(),a=o.getInstance();if(void 0===r)var r=window;r.BBPayments=o.getInstance(),e.exports=a}])}));