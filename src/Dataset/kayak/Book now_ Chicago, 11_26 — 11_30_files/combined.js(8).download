(new R9.logger).time("combined");(function(c,e){c.createComponentClass("hotels.results.HotelResultItemLoader",{itemPlaceholder:void 0,itemContainer:void 0,options:{stickyHeaderOffset:0},init:function(){this.itemPlaceholder=this.getChildElement("itemPlaceholder");this.itemContainer=this.getChildElement("itemContainer");this.options.stickyHeaderOffset=this.options.stickyHeaderOffset||0},addEventHandlers:function(){this.subscribe("hotels.results.loadResultItem",this.loadResultItem.bind(this))},loadResultItem:function(a){var b=this;
if(a&&a.resultId&&a.searchId){b.itemContainer.empty();b.itemContainer.hide();b.itemPlaceholder.show();var d=b.itemPlaceholder.offset().top-b.options.stickyHeaderOffset;try{window.scrollTo({top:d,behavior:"smooth"})}catch(f){e(window).scrollTop(d)}c.ajax.execute("hotels.results.AjaxableHotelResultItem",{appendTo:b.itemContainer,replace:!1,data:{resultId:a.resultId,searchId:a.searchId,isBusinessMode:a.isBusinessMode,approvalStateName:a.approvalStateName,travelPolicyApprovalModeName:a.travelPolicyApprovalModeName}}).then(function(){b.itemPlaceholder.hide();
b.itemContainer.show();a.noExpand||c.events.publish("hotels.results.openPageOrToggle",{resultId:a.resultId,force:!0,tab:"overview"})},function(){})}}})})(R9,jQuery);(function(a,e){a.createComponentClass("common.kn.rp.Inline",{addEventHandlers:function(){var c=this;this.element.on("keypress",function(b){switch(b.which){case a.globals.keyCodes.SPACE:case a.globals.keyCodes.RETURN:c.element.click()}});var d=this.getChildElement("skip");d.length&&d.click(function(b){b.stopPropagation();b=e("[tabbable]");var a=b.index(c.element)+1;a>=b.length&&(a=0);b.eq(a).get(0).focus()})}})})(R9,jQuery);(function(b){b.createComponentClass("common.booking.HorizontalMultibookProvider",{bookingLink:null,options:{resultId:"",hackerStayCore:!1,hackerStayCoreModalParams:{},markPriceDifference:!1},init:function(){this.bookingLink=this.getChildElement("bookingLink");var a=this.getChildElement("genius-message");a&&a.length?a.toolTip({content:a.data("message"),extraClass:"halfWidth",activation:"click"}):this.options.markPriceDifference?(a=this.getChildElement("price-difference"),a.toolTip({content:a.data("message"),
extraClass:"halfWidth",activation:"click"})):this.options.markProviderDirect&&(a=this.getChildElement("provider-direct"),a.toolTip({content:a.data("message"),extraClass:"halfWidth",activation:"click"}));(a=this.getChildElement("nonInstantBookIcon"))&&a.toolTip({content:a.data("message"),showImmediately:!1,activation:"click"})},addEventHandlers:function(){var a=this;this.bookingLink.length&&this.options.hackerStayCore&&this.registerEvent("click",this.bookingLink,function(){b.events.publish("hotels.results.HackerStayDetailsModal.open",
a.options.hackerStayCoreModalParams)})}})})(R9);(function(b,e){var d=b.config.getBoolean("ui.horizon.logging.loadingClick",!0);b.createComponentClass("common.booking.MultiBookDropdownItem",{data:{},anchor:null,options:{resultId:"",tagLayerOptions:{},hackerStayCore:!1,hackerStayCoreModalParams:{}},addEventHandlers:function(){var a=this;a.anchor=this.element.find("a");this.registerEvent("click",this.anchor,function(c){c.stopPropagation(c);a.options.hackerStayCore?b.events.publish("hotels.results.HackerStayDetailsModal.open",a.options.hackerStayCoreModalParams):
a.handleClick();return!1});var c=this.getChildElement("nonInstantBookIcon");c.length&&c.toolTip({content:c.data("message"),showImmediately:!1})},handleClick:function(a,c){this.data={resultId:this.options.resultId,uiResultId:this.options.uiResultId,url:this.anchor.attr("href"),code:this.anchor.data("code"),fareCode:this.options.optionData&&this.options.optionData.fareFamilyCode,name:this.anchor.data("name"),target:this.anchor.data("target"),clickoutWarningDialog:this.options.clickoutWarning&&!this.options.splitResultView,
clickoutDetailsDialog:this.options.clickoutDetailsDialog,noExternalRedirect:this.options.preventExternalRedirect,splitProvider:this.options.hackerStayCore,splitResultView:this.options.splitResultView};b.events.publish("clickout.open",{data:this.data,element:this.element,event:a,callback:this.logSelectEvent.bind(this,c)});b.events.publish("tagDataLayer.clickout",this.options.tagLayerOptions)},logSelectEvent:function(a){a=a||"booking-link";this.options.hackerStayCore||b.Analytics.api.trackEvent({category:a,
action:"click",label:this.options.loggingPrefix,value:void 0});d&&!b.question.ask("resultspage.poll.ended")&&b.Analytics.api.trackEvent({category:a,action:"loading-click",label:this.options.loggingPrefix,value:void 0})}})})(R9,jQuery);(function(c,d){c.createComponentClass("common.booking.DropdownMultibookProvidersList",{templates:{multibookItem:"multibookDropdownItem",overflowLink:"multibookOverflowLink"},options:{loggingPrefix:"",promoParams:null,analyticsTrackingEvent:null,resultId:"",foreignWarnTooltip:"",showMultibookOverflow:!0,providerTagList:null},overflowProvidersCount:0,privateRatesButton:null,providersGrid:null,list:null,init:function(){this.list=this.getChildElement("list");this.multibookOverflow=this.getChildElement("overflow");
this.privateRatesButton=this.getChildElement("inlinePrivateRatesButton");this.providersGrid=this.getChildElement("providersGrid")},addEventHandlers:function(){var a=this;a.privateRatesButton&&a.privateRatesButton.length&&window.requestAnimationFrame(function(){60<a.providersGrid.innerHeight()&&a.privateRatesButton.addClass("mini")});a.registerEvent("click",a.element.find(".bookingLink[data-name]"),a.linkClicked.bind(a));a.registerEvent("click",a.list.find(".Common-Booking-MultiBookDropdownItem"),
a.linkClicked.bind(a));a.element.find(".foreignProvider").toolTip({content:a.options.foreignWarnTooltip,position:"top",showImmediately:!1});a.getChildElement("inlinePrivateRatesButton").click(function(){c.Analytics.api.trackEvent({category:a.options.loggingPrefix+"/multibook",action:"signIn",label:"privateRateButton"});var b=d.extend({regurl:a.options.promoParams.promo},a.options.promoParams);c.authentication.showLogin(b)});a.getChildElement("privateRatesButton").click(function(){var b=d.extend({regurl:a.options.promoParams.promo},
a.options.promoParams);c.authentication.showLogin(b)});a.multibookOverflow.click(a.overflowClicked.bind(a));a.element.find(".foreignProvider").toolTip({content:a.options.foreignWarnTooltip,position:"right",showImmediately:!1});a.list.find(".bookingLink.hasPenalty").toolTip({content:a.options.hasPenaltyTooltip,position:"right",showImmediately:!1});a.subscribe(a.getEvent("multibook.reset"),function(){a.list.html("");a.element.removeClass("ShowDropdown").removeClass("Show")});a.subscribe("DropdownDialog.close",
{id:a.id("dropdown")},function(){c.Analytics.api.trackEvent(a.options.loggingPrefix+"/multibook/close")})},overflowClicked:function(){c.events.publish("multibook.overflowLink.clicked");this.options.showMultibookOverflow?this.list.addClass("showOverflow"):this.closeDropdown()},linkClicked:function(a){var b=this;d(a.currentTarget).attr("href")&&(c.events.publish("clickout.open",{data:{resultId:b.options.resultId},element:d(a.currentTarget),event:a,callback:function(){b.options.analyticsTrackingEvent&&
c.Analytics.api.trackEvent(b.options.analyticsTrackingEvent)}}),null!==b.options.providerTagList&&(a=b.findSelectedProviderOptions(d(a.currentTarget).data()),null!==a&&(a.resultId=b.options.resultId,c.events.publish("hotel.clickout",a))))},findSelectedProviderOptions:function(a){for(var b=0;b<this.options.providerTagList.length;b++)if(this.options.providerTagList[b].providerName===a.name&&this.options.providerTagList[b].providerCode===a.code)return this.options.providerTagList[b];return null},getEvent:function(a){return a+
(this.options.resultId?"."+this.options.resultId:"")},closeDropdown:function(){this.getChildElement("dropdown").getWidget().close()}})})(R9,jQuery);(function(a,b){a.createComponentClass("common.tags.ResultScreenDataLayer",{options:{},init:function(){this.options.attachMainParams&&this.answer("tags.dataLayer.hasCustomHandler",function(){return!0})},inlineComponentsReady:function(){a.events.publish("tags.dataLayer.push",this.options)}})})(R9,jQuery);(function(a,b){a.createComponentClass("hotels.results.HotelResultsDataLayer","common.tags.ResultScreenDataLayer",{})})(R9,jQuery);(new R9.logger).timeEnd("combined");