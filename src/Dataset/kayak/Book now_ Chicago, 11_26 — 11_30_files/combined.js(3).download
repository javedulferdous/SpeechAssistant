(new R9.logger).time("combined");(function(c){R9.extend("Widgets",{Checkbox:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.icon=c(R9.Widgets.Checkbox.findIconNode(this.elementNode));this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.Checkbox",{isCheckbox:function(a){return a&&a.nodeName&&"input"==a.nodeName.toLowerCase()&&"checkbox"==a.type.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.Checkbox.prototype.widgetBaseClass+"-input")},
refresh:function(a,b){b=c(b);b[a.checked?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-checked");b[a.disabled?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-disabled")},findIconNode:function(a){return c(a).closest("[id$\x3d'-icon']")},findElementNode:function(a){return document.getElementById(a.id.substring(0,a.id.lastIndexOf("-icon")))}});R9.extend("Widgets.Checkbox.prototype",{widgetName:"checkbox",widgetBaseClass:"r9-checkbox",elementNode:null,
element:null,icon:null,options:{click:null,change:null},init:function(){this.bindInputClickEvent();this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return R9.Widgets.Checkbox.isCheckbox(this.elementNode)&&R9.Widgets.Checkbox.isWidgetControlled(this.elementNode)},bindInputEvent:function(a,b){var c=this;a+="."+
this.widgetName;this.element.unbind(a).bind(a,function(a){b.call(c,this,R9.Widgets.Checkbox.findIconNode(this),a)})},bindInputClickEvent:function(){this.bindInputEvent("click",this.handleElementClickEvent)},handleElementClickEvent:function(a,b,c){this.options.click&&this.options.click.apply(this,arguments)},handleElementChangeEvent:function(a,b,c){R9.Widgets.Checkbox.refresh(a,b);this.options.change&&this.options.change.apply(this,arguments)},handleElementFocusEvent:function(a,b,d){a.disabled||(c(b).addClass(this.widgetBaseClass+
"-state-focus"),this.options.focus&&this.options.focus.apply(this,arguments))},handleElementBlurEvent:function(a,b,d){a.disabled||(c(b).removeClass(this.widgetBaseClass+"-state-focus"),this.options.blur&&this.options.blur.apply(this,arguments))}})})(jq||jQuery);var FOCUSED_CLASS=R9.config.getString("ui.horizon.common.core.focusOutlineClass","a11y-focused");
(function(c){R9.createWidgetClass("checkbox.Checkbox",c.extend({},R9.Widgets.Checkbox.prototype,{isToggle:!1,options:{keydown:c.noop,click:null,change:null},init:function(){this.elementNode=this.element.get(0);this.element.parent().is(".toggle")&&(this.isToggle=!0);this.label=this.getChildElement("label")},addEventHandlers:function(){this.bindInputClickEvent();this.bindInputEvent("change",this._handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",
this.handleElementBlurEvent)},_handleElementChangeEvent:function(a,b,d){this.handleElementChangeEvent(a,b,d);this.options.isToggle&&(b=c(a).prop("checked"),a.setAttribute("aria-checked",b))},setEnabled:function(a){a?this.element.removeAttr("disabled"):this.element.attr("disabled","disabled");this.element.attr("aria-disabled",!a);R9.Widgets.Checkbox.refresh(this.element,this.icon)},getValue:function(){return this.element.prop("checked")},setChecked:function(a){this.element.prop("checked",a);this.isToggle&&
this.elementNode.setAttribute("aria-checked",a)},handleElementFocusEvent:function(){this.base();this.toggleFocusOutline(!0)},handleElementBlurEvent:function(){this.base();this.toggleFocusOutline(!1)},toggleFocusOutline:function(a){this.element.closest(".js-checkbox-container").toggleClass(FOCUSED_CLASS,a)}}))})(jq||jQuery);(function(c,d){c.createComponentClass("common.ccpa.CCPAConsent",{URL:"/i/api/account/dataSharing/v1/optOut",options:{visible:!1,isLoggedIn:!1,manageUrl:"/privacy/manage"},dialog:null,dialogElement:null,action:null,allowDataSharing:!0,init:function(){var a=this,b={preventClosingClickBubble:!0,onClose:this.dialogClose.bind(this),closeOnModalClick:!0,hasKeyboardControl:!1};this.dialogElement=this.getChildElement("ccpa-consent-dialog");this.dialog=this.dialogElement.dialog(b).getWidget();this.action=
this.getChildElement("ccpa-action").checkbox({change:function(){a.updateConsent(this.getValue())}}).getWidget()},addEventHandlers:function(){d(document).on("click","#ccpa-privacy-manage",this.handleLinkClick.bind(this))},handleLinkClick:function(a){a.preventDefault();this.open()},updateConsent:function(a){this.vsLog("optOut",a?"On":"Off");d.ajax({type:"PUT",dataType:"json",url:this.URL,success:function(a){this.updateConsentSuccess(a,!0)}.bind(this),data:JSON.stringify({allowDataSharing:!a}),headers:{"X-CSRF":c.globals.formtoken},
contentType:"application/json"})},getConsentStatus:function(a,b){d.ajax({type:"GET",dataType:"json",url:this.URL,success:a&&a.bind(this),error:b&&b.bind(this),headers:{"X-CSRF":c.globals.formtoken},contentType:"application/json"})},updateConsentSuccess:function(a,b){this.allowDataSharing=a.allowDataSharing;this.action.setChecked(!this.allowDataSharing);b&&(c.events.publish("sharing.cookie.update"),c.events.publish("consent.share.update"),c.events.publish("consent.ccpa.sync",this.allowDataSharing))},
open:function(){this.options.visible?this.getConsentStatus(function(a){this.updateConsentSuccess(a);this.dialog.open();this.vsLog("dialog","show")},function(){this.openPrivacyManage()}):this.openPrivacyManage()},openPrivacyManage:function(){window.open(this.options.manageUrl,"_self")},canShow:function(){return this.options.visible},dialogClose:function(){this.vsLog("dialog","hide")},vsLog:function(a,b){c.Analytics.api.trackEvent({category:"ccpa",action:"consent",label:a,value:b})}})})(R9,jQuery);(new R9.logger).timeEnd("combined");