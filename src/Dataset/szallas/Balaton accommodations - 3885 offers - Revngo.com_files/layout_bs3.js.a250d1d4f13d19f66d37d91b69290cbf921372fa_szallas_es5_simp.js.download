/*
 Lazy Load - jQuery plugin for lazy loading images

 Copyright (c) 2007-2015 Mika Tuupola

 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php

 Project home:
   http://www.appelsiini.net/projects/lazyload

 Version:  1.9.7

*/
(function(a,b,c,d){var e=a(b);a.fn.lazyload=function(c){function f(){var b=0;h.each(function(){var c=a(this);if(!(k.skip_invisible&&!c.is(":visible")||a.abovethetop(this,k)||a.leftofbegin(this,k)))if(!a.belowthefold(this,k)&&!a.rightoffold(this,k))c.trigger("appear"),b=0;else if(++b>k.failure_limit)return!1})}var h=this,k={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};
c&&(d!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),d!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(k,c));c=k.container===d||k.container===b?e:a(k.container);if(0===k.event.indexOf("scroll"))c.on(k.event,function(){return f()});this.each(function(){var b=this,c=a(b);b.loaded=!1;(c.attr("src")===d||!1===c.attr("src"))&&c.is("img")&&c.attr("src",k.placeholder);c.one("appear",function(){this.loaded||(k.appear&&k.appear.call(b,h.length,k),a("<img />").one("load",
function(){var d=c.attr("data-"+k.data_attribute);c.hide();c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')");c[k.effect](k.effect_speed);b.loaded=!0;d=a.grep(h,function(a){return!a.loaded});h=a(d);k.load&&k.load.call(b,h.length,k)}).attr("src",c.attr("data-"+k.data_attribute)))});if(0!==k.event.indexOf("scroll"))c.on(k.event,function(){b.loaded||c.trigger("appear")})});e.on("resize",function(){f()});if(/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion))e.on("pageshow",function(b){b.originalEvent&&
b.originalEvent.persisted&&h.each(function(){a(this).trigger("appear")})});a(function(){f()});return this};a.belowthefold=function(c,g){return(g.container===d||g.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(g.container).offset().top+a(g.container).height())<=a(c).offset().top-g.threshold};a.rightoffold=function(c,g){return(g.container===d||g.container===b?e.width()+e.scrollLeft():a(g.container).offset().left+a(g.container).width())<=a(c).offset().left-g.threshold};a.abovethetop=
function(c,g){return(g.container===d||g.container===b?e.scrollTop():a(g.container).offset().top)>=a(c).offset().top+g.threshold+a(c).height()};a.leftofbegin=function(c,g){return(g.container===d||g.container===b?e.scrollLeft():a(g.container).offset().left)>=a(c).offset().left+g.threshold+a(c).width()};a.inviewport=function(b,c){return!a.rightoffold(b,c)&&!a.leftofbegin(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},
"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})})(jQuery,window,document);
!function(a){var b={validate:function(a,b,c,d){b(!0)},value:function(a,b){return a},onValidate:function(){},container:"",containerDefaultClass:"validateContainer help-block",errorClass:"",errorMessageClass:"help-inline",icon:!0,successIcon:"glyphicon glyphicon-checkmark",errorIcon:"glyphicon glyphicon-delete",progressIcon:"validating glyphicon glyphicon-loading",border:!0,cache:!0,run:!0,validateEvent:"change",elm_message:[],hidden:!1};a.fn.validate=function(c,d){var l=!1;a.each(a(this),function(){var m=
a(this);if(!m.length)return!1;var k=g(m),p=function(a,b){"object"===typeof k&&!1!==k.run&&(m.validateProgress(),h(m,null),a=k.value(m.val(),m),b=k.validate(a,n,m,d,b),l||(l=!0,n(b),k.onValidate(),m.trigger("validate").off("validate")),l=!1)},n=function(b){if(!0===b)m.validateSuccess();else if("string"===typeof b||!1===b)m.validateMistake(b);else if("object"===typeof b){var c=!0;m.validateReset();a.each(b,function(a,b){!0!==b&&(k.reset=!1,m.validateMistake(b),c=!1,k.reset=!0)});c&&m.validateSuccess()}},
v=function(){"function"===typeof k.container&&(k.container=k.container(m));k.container.length||(k.container=e(m));m.addClass("validatejs");f(m,k);m.validateReset();(function(b){b.on(k.validateEvent,function(a){p(c,a)}).on("focus",function(){a(this).closest(k.container).addClass("focused")}).on("blur",function(){a(this).closest(k.container).removeClass("focused")})})(m)};"undefined"===typeof c||"boolean"==typeof c?p(c,null):(k=a.extend(!0,{},b,{element:m},"object"===typeof c?c:{}),v())})};a.ajaxCheck=
function(b,c){if("object"!==typeof b||"object"!==typeof b.ajaxData||"string"!==typeof b.url)return b.process(!1),null;var d=a.extend(!0,{},b.ajaxData),e="function"===typeof b.errorCallback?b.errorCallback:function(){};a.ajax({url:b.url,type:"POST",async:c,data:JSON.stringify(d),contentType:"application/json; charset=utf-8",dataType:"json",success:function(c){a.each(d,function(a){d[a]=!0});"ERROR"===c.STATUS&&"undefined"!==typeof c.RESULTS&&a.each(d,function(a){a="undefined"!==typeof b.propertyToCheck?
b.propertyToCheck:a;"undefined"!==typeof c.RESULTS[a]&&(d[a]=c.RESULTS[a][0])});1<Object.keys(d).length?b.process(d):a.each(d,function(a){b.process(d["undefined"!==typeof b.propertyToCheck?b.propertyToCheck:a])});if("function"===typeof b.onAjaxSuccess)b.onAjaxSuccess(c)},error:e});return null};a.fn.validateReset=function(){if(!d(a(this)))return this;var b=a(this),c=g(b),e=c.container;a.each(b,function(){h(b,null);b.data("validityError",null);e&&e.removeClass("has-error has-success field-shadow-error field-shadow-success");
if(c.elm_message&&c.elm_message.length)for(var a=0;a<c.elm_message.length;a++)c.elm_message[a].remove();a=[];c.successIcon&&a.push(c.successIcon);c.errorIcon&&a.push(c.errorIcon);c.progressIcon&&a.push(c.progressIcon);k(c.container,a);b.trigger("validateReset")});return this};a.fn.validateMistake=function(b){if(!d(a(this)))return!1;var c=a(this),e=g(c),l=e.container,u=function(){if(!e.hidden&&e.icon){f(c,e);k(e.container,[e.successIcon,e.progressIcon]);var b=a("<span/>",{"class":e.errorIcon});c.after(b);
setTimeout(function(){k(e.container,e.errorIcon)},1624)}};a.each(c,function(){e.hidden||"undefined"!=typeof e.reset&&!0!==e.reset||c.validateReset();(e.hidden||!0===e.border)&&l.addClass("has-error");h(c,!1);c.data("validityError",b);u();if(!e.hidden&&"string"===typeof b){b=b.replace(/\n/g,"<br>");var d=a("<span/>",{html:b,"class":e.errorMessageClass});var f="function"===typeof e.errorClass?e.errorClass():e.errorClass;f=a("<span/>",{"class":e.containerDefaultClass+" "+f}).append(d);e.elm_message.push(f);
l.append(f)}c.trigger("validateMistake")})};a.fn.validateSuccess=function(){if(!d(a(this)))return!1;var b=a(this),c=g(b),e=c.container,m=function(){if(!c.hidden&&c.icon){f(b,c);k(c.container,[c.errorIcon,c.progressIcon]);var d=a("<span/>",{"class":c.successIcon});b.after(d);setTimeout(function(){k(c.container,c.successIcon)},1624)}};a.each(b,function(){b.data("validityError",null);c.hidden||"undefined"!=typeof c.reset&&!0!==c.reset||b.validateReset();h(b,!0);c.hidden||"undefined"!=typeof c.border&&
!0!==c.border||e.addClass("has-success");m();b.trigger("validateSuccess",c)})};a.fn.validateProgress=function(){if(!d(a(this)))return!1;var b=a(this),c=g(b);a.each(b,function(){if(!c.hidden&&c.icon){k(c.container,[c.successIcon,c.errorIcon]);var d=a("<span/>",{"class":c.progressIcon});b.after(d)}})};a.fn.validateOption=function(b){var c=g(a(this));"object"===typeof b&&(c=a.extend(!0,c,b));return c};a.fn.validateSuspend=function(){a.each(a(this),function(){g(a(this)).run=!1})};a.fn.validateRestart=
function(){a.each(a(this),function(){g(a(this)).run=!0})};a.fn.isValid=function(b,c){var e=!0,f=b||!1;c="undefined"!==typeof c?c:!1;a.each(a(this),function(){if(!d(a(this)))return!1;var b=a(this),h=g(b);"object"===typeof h&&(f&&"boolean"!==typeof b.data("validate")||!h.cache)&&b.validate(!0,c);e=e&&b.data("validate")});return e};a.fn.validityError=function(){return a(this).data("validityError")};var c=[],d=function(a){if(a&&1===a.length){var b=g(a);(b=b&&b.container?b.container:!1)||(b=e(a));return 1===
b.length}return!1},e=function(a){return a.closest(".form-group").length?a.closest(".form-group"):a.is("input")?a.parent():a},f=function(a,b){if(a.length){var d=a.data("validateOptionsIndex");"undefined"==typeof d?(a.data("validateOptionsIndex",c.length),c.push(b)):c[d]=b}},g=function(a){if(a.length){var b=a.data("validateOptionsIndex");b=0<=b&&c[b]?c[b]:!1}else b=!1;if(!b)return!1;b.container.length||(b.container=e(a));return b},h=function(a,b){a.data("validate",b)},k=function(b,c){var d=function(a){a=
"."+a.replace(/ /g,".");a=b.find(a);a.length&&a.remove()};if(a.isArray(c))for(var e=0,f=c.length;e<f;e++)d(c[e]);else"string"==typeof c&&d(c)}}(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){function b(b,e){function d(b,c){l.hasContentToSroll&&(a("body").addClass("noSelect"),E=c?q.offset()[A]:y?b.pageX:b.pageY,t?(document.ontouchmove=function(a){(l.options.touchLock||0<l.contentPosition&&l.contentPosition<=l.contentSize-l.viewportSize-5)&&a.preventDefault();h(a.touches[0])},document.ontouchend=k):(a(document).bind("mousemove",h),
a(document).bind("mouseup",k),q.bind("mouseup",k),u.bind("mouseup",k)),h(b))}function g(c){l.hasContentToSroll&&(c=c||window.event,l.contentPosition-=-(c.deltaY||c.detail||-1/3*c.wheelDelta)/40*(1===c.deltaMode?l.options.wheelSpeed:1)*l.options.wheelSpeed,l.contentPosition=Math.min(l.contentSize-l.viewportSize,Math.max(0,l.contentPosition)),l.thumbPosition=l.contentPosition/l.trackRatio,b.trigger("move"),q.css(A,l.thumbPosition),p.css(A,-l.contentPosition),l.options.wheelLock||0<l.contentPosition&&
l.contentPosition<=l.contentSize-l.viewportSize-5)&&(c=a.event.fix(c),c.preventDefault())}function h(a){l.hasContentToSroll&&(a=y?a.pageX:a.pageY,a=Math.min(l.trackSize-l.thumbSize,Math.max(0,l.thumbPosition+(t?E-a:a-E))),l.contentPosition=a*l.trackRatio,b.trigger("move"),q.css(A,a),p.css(A,-l.contentPosition))}function k(){l.thumbPosition=parseInt(q.css(A),10)||0;a("body").removeClass("noSelect");a(document).unbind("mousemove",h);a(document).unbind("mouseup",k);q.unbind("mouseup",k);u.unbind("mouseup",
k);document.ontouchmove=document.ontouchend=null}this.options=a.extend({},c,e);this._defaults=c;this._name="tinyscrollbar";var l=this,n=b.find(".viewport"),p=b.find(".overview"),m=b.find(".scrollbar"),u=m.find(".track"),q=m.find(".thumb"),t="ontouchstart"in document.documentElement,v="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",y="x"===this.options.axis,w=y?"width":"height",A=y?"left":"top",E=0;this.thumbPosition=this.thumbSize=this.trackRatio=
this.trackSize=this.contentRatio=this.contentSize=this.viewportSize=this.contentPosition=0;this.hasContentToSroll=!1;this.update=function(a){var b=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();this.viewportSize=n[0]["offset"+b];this.contentSize=p[0]["scroll"+b];this.contentRatio=this.viewportSize/this.contentSize;this.trackSize=this.options.trackSize||this.viewportSize;this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio));
this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize);this.hasContentToSroll=1>this.contentRatio;m.toggleClass("disable",!this.hasContentToSroll);switch(a){case "bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case "relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(a,10)||0}this.thumbPosition=this.contentPosition/this.trackRatio;
q.css(A,l.thumbPosition);p.css(A,-l.contentPosition);m.css(w,l.trackSize);u.css(w,l.trackSize);q.css(w,l.thumbSize);return l};l.update();(function(){t?n[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),d(a.touches[0]))}:(q.bind("mousedown",function(a){a.stopPropagation();d(a)}),u.bind("mousedown",function(a){d(a,!0)}));a(window).resize(function(){l.update("relative")});l.options.wheel&&window.addEventListener?b[0].addEventListener(v,g,!1):l.options.wheel&&(b[0].onmousewheel=
g)})();return l}var c={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};a.fn.tinyscrollbar=function(c){return this.each(function(){a.data(this,"plugin_tinyscrollbar")||a.data(this,"plugin_tinyscrollbar",new b(a(this),c))})}});
var OpenedWindowHandler$$module$common$opened_window_handler=function(a){this.options=a;this.openedWindow=window.open(this.options.windowUrl,this.options.windowTarget,this.options.windowParams)};OpenedWindowHandler$$module$common$opened_window_handler.prototype.postResponse=function(a){this.options.onResponse(a)};OpenedWindowHandler$$module$common$opened_window_handler.prototype.close=function(){if("function"===typeof this.options.onClose)this.options.onClose();this.openedWindow.close()};
OpenedWindowHandler$$module$common$opened_window_handler.prototype.getOpenedWindow=function(){return this.openedWindow};var module$common$opened_window_handler={};module$common$opened_window_handler.OpenedWindowHandler=OpenedWindowHandler$$module$common$opened_window_handler;
var jQuery$$module$typescript=window.jQuery,$$$module$typescript=jQuery$$module$typescript,React$$module$typescript=window.React,ReactDOM$$module$typescript=window.ReactDOM,ReactRedux$$module$typescript=window.ReactRedux,module$typescript={};module$typescript.$=$$$module$typescript;module$typescript.React=React$$module$typescript;module$typescript.ReactDOM=ReactDOM$$module$typescript;module$typescript.ReactRedux=ReactRedux$$module$typescript;module$typescript.jQuery=jQuery$$module$typescript;
var $$$module$common$rating=jQuery,DEBUG$$module$common$rating=!1,RatingPopover$$module$common$rating=function(a,b){a=Popover$$module$common$popover.call(this,a,b)||this;DEBUG$$module$common$rating&&console.log(a);return a};$jscomp.inherits(RatingPopover$$module$common$rating,Popover$$module$common$popover);RatingPopover$$module$common$rating.prototype.getCache=function(){return SzallasRating$$module$common$rating.cache};RatingPopover$$module$common$rating.prototype.getUrl=function(){return this.getOptions().url};
RatingPopover$$module$common$rating.prototype.getAjaxData=function(){return"bestRating"==this.getType()?{hotelID:this.getOptions().hotelId,voucherID:this.getOptions().voucherId}:"bestPoiRating"==this.getType()?{poiId:this.getOptions().poiId,ratingsCount:this.getOptions().ratingsCount,ratingsAvg:this.getOptions().ratingsAvg}:"serviceRating"==this.getType()?{ratingId:this.getOptions().ratingId}:{}};
RatingPopover$$module$common$rating.prototype.getRemoteUrl=function(){return"bestRating"==this.getType()?"ajax/search_ratings":"bestPoiRating"==this.getType()?"ajax/programok/search_ratings":"serviceRating"==this.getType()?"ajax/rating_guest_value":null};RatingPopover$$module$common$rating.prototype.getType=function(){return this.getOptions().ratingType};
var SzallasRating$$module$common$rating=function(a,b,c){a=$$$module$common$rating(a);return $$$module$common$rating.each(a,function(a,e){a=$$$module$common$rating(e);var d=a.data("bs.szallasrating");if(d||"destroy"!=b){var g="object"==typeof b?b:{};g=$$$module$common$rating.extend(!0,{},SzallasRating$$module$common$rating.DEFAULTS,a.data(),g);d||(e=new RatingPopover$$module$common$rating(e,g),a.data("bs.szallasrating",d=e),SzallasRating$$module$common$rating.cache.push(e),g.show&&e.show());if("string"==
typeof b)d[b](c)}})};SzallasRating$$module$common$rating.cache=[];SzallasRating$$module$common$rating.DEFAULTS=$$$module$common$rating.extend(!0,{},SzallasPopover$$module$common$popover.DEFAULTS,{type:"szallasrating",cache:!1});
var initRating$$module$common$rating=function(a){a.preventDefault();var b="sm"===siteObject$$module$common$site.viewportSize()||"xs"===siteObject$$module$common$site.viewportSize()||siteObject$$module$common$site.get("localeId")===siteObject$$module$common$site.get("locales").POLISH;a=$$$module$common$rating(a.currentTarget).closest("div.rating-guest-value").data("placement");if("undefined"===typeof a||"auto"===a)a=b?"left":"right";$$$module$common$rating.data(this,"bs.szallasrating")||new SzallasRating$$module$common$rating(this,
{autoShow:!0,cache:!0,placement:a})};$$$module$common$rating(function(){$$$module$common$rating(document).on("click",'[data-toggle="szallasRating"][data-trigger="click"], [data-toggle="szallasRating"]:not([data-trigger])',initRating$$module$common$rating).on("mouseenter",'[data-toggle="szallasRating"][data-trigger="hover"]',initRating$$module$common$rating)});var module$common$rating={};module$common$rating.SzallasRating=SzallasRating$$module$common$rating;
var DEBUG$$module$common$szallas_fb=!1,$$$module$common$szallas_fb=jQuery,PLUGIN_CLASSES$$module$common$szallas_fb=[".fb-like",".fb-share-button",".fb-follow",".fb-page",".fb-comments"],SzallasFBClass$$module$common$szallas_fb=function(){var a=this;$$$module$common$szallas_fb(function(){a.options={isLoaded:!1,version:siteObject$$module$common$site.get("graphApiVersion"),facebookDomain:siteObject$$module$common$site.get("facebookDomain"),appId:siteObject$$module$common$site.get("facebookAppId"),channelUrl:siteObject$$module$common$site.get("facebookChannelUrl"),
status:!0,cookie:!0,xfbml:!0,oauth:!0,autoRendering:siteObject$$module$common$site.get("isAndroidApp")};a.data={fbPageData:{},fbLoginStatus:null,renderedFbProfile:{},userPermissions:null,initPromise:null};a._setLikeButtonDefaults();a.renderPluginsOnNeed()})};
SzallasFBClass$$module$common$szallas_fb.prototype._fbApiInit=function(){var a=this;$$$module$common$szallas_fb("body").append($$$module$common$szallas_fb("<div>",{id:"fb-root"}));window.fbAsyncInit=function(){$$$module$common$szallas_fb(document).trigger("fbInitStart");var b=$$$module$common$szallas_fb(a._getNotRenderedPluginElements());a._startLoaders(b);a._initFbEvents();FB.init({appId:a.getAppId(),version:a.getVersion(),channelUrl:a.getChannelUrl(),status:a.getOptions().status,cookie:a.getOptions().cookie,
xfbml:a.getOptions().xfbml,oauth:a.getOptions().oauth});FB.getLoginStatus(function(c){a.data.fbLoginStatus=c.status;setTimeout(function(){a.options.isLoaded=!0;a.data.initPromise&&(a.data.initPromise.resolve(),a._endLoaders(b),$$$module$common$szallas_fb(document).trigger("fb.loaded"))},1)})};(function(a){var b=a.getElementsByTagName("script")[0];a.getElementById("facebook-jssdk")||(a=a.createElement("script"),a.id="facebook-jssdk",a.async=!0,a.src="//connect.facebook.net/"+siteObject$$module$common$site.getLocaleLongCodeUnderline()+
"/sdk.js",b.parentNode.insertBefore(a,b))})(document)};SzallasFBClass$$module$common$szallas_fb.prototype.requireApi=function(){DEBUG$$module$common$szallas_fb&&console.trace("require FB Api");if("undefined"===typeof this.data)return console.warn("SzallasFB.requireApi() called before initialization!"),$$$module$common$szallas_fb.Deferred(function(){});if(!this.data.initPromise){var a=this;this.data.initPromise=$$$module$common$szallas_fb.Deferred(function(){a._fbApiInit()})}return this.data.initPromise};
SzallasFBClass$$module$common$szallas_fb.prototype._initFbEvents=function(){FB.Event.subscribe("edge.create",function(a){TrackingService$$module$measurement.event("_trackSocial","facebook","like",a);$$$module$common$szallas_fb(document).trigger("fb.like")});FB.Event.subscribe("edge.remove",function(a){TrackingService$$module$measurement.event("_trackSocial","facebook","unlike",a)});FB.Event.subscribe("message.send",function(a){TrackingService$$module$measurement.event("_trackSocial","facebook","send",
a)});FB.Event.subscribe("xfbml.render",function(){$$$module$common$szallas_fb(document).trigger("facebookElementsRendered")})};SzallasFBClass$$module$common$szallas_fb.prototype.api=function(a){var b=this,c=arguments;return siteObject$$module$common$site.get("socialEnabled")?$$$module$common$szallas_fb.Deferred(function(d){b.requireApi().done(function(){b["_"+a].apply(b,[d].concat(Array.prototype.slice.call(c,1)))})}):$$$module$common$szallas_fb.Deferred()};
SzallasFBClass$$module$common$szallas_fb.prototype._getLoginStatus=function(a,b){b=void 0===b?!1:b;var c=this;!b&&c.data.fbLoginStatus?(DEBUG$$module$common$szallas_fb&&console.log("loginStatus from cache: ",c.data.fbLoginStatus),a.resolve(c.data.fbLoginStatus)):FB.getLoginStatus(function(b){c.data.fbLoginStatus=b.status;DEBUG$$module$common$szallas_fb&&console.log("loginStatus from facebook: ",c.data.fbLoginStatus);a.resolve(b.status)},b)};
SzallasFBClass$$module$common$szallas_fb.prototype._isLoggedIn=function(a,b){var c=$$$module$common$szallas_fb.Deferred().done(function(b){a.resolve("connected"===b)});this._getLoginStatus(a,b);return c};
SzallasFBClass$$module$common$szallas_fb.prototype._getPageData=function(a,b){b=void 0===b?{}:b;var c=this;if(!b.refresh&&this.data.fbPageData[b.url])DEBUG$$module$common$szallas_fb&&console.log("getting page data from cache"),a.resolve(b.name?this.data.fbPageData[b.url][b.name]:this.data.fbPageData[b.url]);else{var d=b.url||c._getPageDefaultUrl(),e=this._getPageDataFields(b.fields);FB.api("http://graph.facebook.com/"+d+"?fields="+e,function(e){e&&!e.error?(c.data.fbPageData[d]=e,DEBUG$$module$common$szallas_fb&&
console.log("first page data ",e),a.resolve(b.name?c.data.fbPageData[b.pageUrl][b.name]:c.data.fbPageData[b.pageUrl])):a.resolve(c._getErrorMessage(e||{}))})}};
SzallasFBClass$$module$common$szallas_fb.prototype.getRenderedProfile=function(a,b){b=void 0===b?{}:b;var c=this,d=b,e=void 0===d.forceLogin?!0:d.forceLogin,f=void 0===d.user?"me":d.user,g=void 0===d.refresh?!0:d.refresh;d=d.scope;g||"undefined"==typeof c.data.renderedFbProfile[f]?(DEBUG$$module$common$szallas_fb&&console.log("before getting facebook profile with data:\n",b),c.getProfile(function(b){b&&!b.error?(b=c._renderResponse(b),c.data.renderedFbProfile[f]=b,DEBUG$$module$common$szallas_fb&&
console.log("rendered facebook profile:\n",b),$$$module$common$szallas_fb(document).trigger("facebook.renderedProfile",b),a(b)):a(c._getErrorMessage(b||{}))},{refresh:g,forceLogin:e,scope:d,fields:b.fields})):(DEBUG$$module$common$szallas_fb&&console.log("getting rendered profile from cache without checking permissions"),a(c.data.renderedFbProfile[f]))};
SzallasFBClass$$module$common$szallas_fb.prototype.getProfile=function(a,b){var c=this,d=void 0===b.forceLogin?!0:b.forceLogin,e=void 0===b.user?"me":b.user,f=(void 0===b.scope?c._getDefaultProfileScopes():b.scope).join(", "),g=this._getProfileFields(b.fields);DEBUG$$module$common$szallas_fb&&(console.log("before getting facebook profile: \n","fields: "+g,"\nscope: "+f),console.log("options before getting facebook profile \n",b));var h=function(b){DEBUG$$module$common$szallas_fb&&console.log("facebook profile from facebook:\n",
b);a(b&&!b.error?b:c._getErrorMessage(b||{}))},k=function(){FB.api("/"+e+"?fields="+g,function(a){a=a&&!a.error?a:c._getErrorMessage(a||{});a.error||(a.accessToken=c.getAccessToken());h(a)})},l=function(){c.api("login",f).done(function(b){b&&"connected"===b.status?k():a(c._getErrorMessage(b||{}))})};this.options.isLoaded?d?l():SzallasFB$$module$common$szallas_fb.api("isLoggedIn",b.refresh).done(function(b){b?k():a({error:"User is not connected"})}):d?this._getProfileWithoutApi(f,h):console.warn("No fb profile data without forceLogin and no Graph Api!")};
SzallasFBClass$$module$common$szallas_fb.prototype.getRenderedProfileWithoutForcing=function(a){var b=this;this.requireApi().done(function(){b.getRenderedProfile(a,{refresh:!1,forceLogin:!1})})};
SzallasFBClass$$module$common$szallas_fb.prototype._getProfileWithoutApi=function(a,b){a=this._getFLoginUrl(a);window.openedWindowHandler=new OpenedWindowHandler$$module$common$opened_window_handler({windowUrl:a,windowTarget:"_blank",windowParams:"width=620,height=520",onResponse:b,onClose:function(){window.openedWindowHandler=null}})};
SzallasFBClass$$module$common$szallas_fb.prototype._getFLoginUrl=function(a){var b="https://www.facebook.com/"+SzallasFB$$module$common$szallas_fb.getVersion()+"/dialog/oauth",c=location.origin+"/get_facebook_profile";a={app_id:SzallasFB$$module$common$szallas_fb.getAppId(),redirect_uri:c,scope:a,auth_type:"rerequest",response_type:"code granted_scopes"};return UrlService$$module$url.buildQuery(b,a)};
SzallasFBClass$$module$common$szallas_fb.prototype._getUserPermissions=function(a,b){var c=this;void 0!==b&&!b&&this.data.userPermissions?a.resolve(this.data.userPermissions):FB.api("me/permissions",function(b){b&&!b.error?(c.data.userPermissions=b,a.resolve(b)):(c.data.userPermissions=null,a.resolve(self._getErrorMessage(b||{})))})};
SzallasFBClass$$module$common$szallas_fb.prototype._getUserAllowedPermissions=function(a,b){SzallasFB$$module$common$szallas_fb.api("isLoggedIn").done(function(c){var d=[];c?SzallasFB$$module$common$szallas_fb.api("getUserPermissions",b).done(function(b){if(!b.error)for(var c=0;c<b.data.length;c++)"granted"===b.data[c].status&&d.push(b.data[c].permission);a.resolve(d)}):a.resolve(d)})};
SzallasFBClass$$module$common$szallas_fb.prototype._getProfilePicture=function(a,b,c){var d=this;FB.api((void 0===c?"me":c)+"/picture",function(b){b&&!b.error?a.resolve(b.data.url):a.resolve(d._getErrorMessage(b||{}))},{type:void 0===b?"large":b})};
SzallasFBClass$$module$common$szallas_fb.prototype.likeButton=function(a){a=$$$module$common$szallas_fb.extend({},this.data.likeButtonDefaults,a||{});return'<div class="fb-like" data-width=":width" data-href=":url" data-height=":height" data-layout=":layout"  data-action=":action" data-show-faces=":showFaces" data-share=":share"></div>'.supplant({url:a.url,width:a.width,height:a.height,layout:a.layout,action:a.action,showFaces:a.showFaces,share:a.share})};
SzallasFBClass$$module$common$szallas_fb.prototype._login=function(a,b,c){var d=this;b=void 0===b?"public_profile":b;c=void 0===c?"rerequest":c;TrackingService$$module$measurement.event("social login","facebook","try");FB.login(function(c){c&&"connected"===c.status?(c.authResponse&&c.authResponse.grantedScopes&&(c.notGrantedPermissions=d._getNotGrantedPermissions(c.authResponse.grantedScopes,b)),TrackingService$$module$measurement.event("social login","facebook","success"),$$$module$common$szallas_fb(document).trigger("login.social"),
DEBUG$$module$common$szallas_fb&&console.log("successful facebook login",c),a.resolve(c)):(DEBUG$$module$common$szallas_fb&&console.log("failed facebook login:\n",c),a.resolve(d._getErrorMessage(c||{})))},{scope:b,return_scopes:!0,auth_type:c?c:""})};
SzallasFBClass$$module$common$szallas_fb.prototype._share=function(a,b,c,d){var e=this;b=b||location.href+"?utm_source=facebook&utm_medium=site&utm_campaign=share";var f=function(c){c&&!c.error_code?($$$module$common$szallas_fb(document).trigger("fb.share.success",b),a.resolve(c)):($$$module$common$szallas_fb(document).trigger("fb.share.failed",b),a.resolve(e._getErrorMessage(c||{})))};if(c){var g=$$$module$common$szallas_fb('meta[property="og:image"]').attr("content"),h={"og:url":b,"og:title":c.title,
"og:description":c.description,"og:image":g};g||(h["og:image"]=c.defaultImage);c.image&&(h["og:image"]=c.image);FB.ui($$$module$common$szallas_fb.extend({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:h})},d),f)}else FB.ui($$$module$common$szallas_fb.extend({method:"share",href:b},d),f)};
SzallasFBClass$$module$common$szallas_fb.prototype._sendMessage=function(a,b){var c=this;b=b||location.href+"?utm_source=facebook-msg&utm_medium=site&utm_campaign=share";FB.ui({method:"send",link:b},function(d){d&&!d.error_code?($$$module$common$szallas_fb(document).trigger("fb.send.success",b),a.resolve(d)):($$$module$common$szallas_fb(document).trigger("fb.send.failed",b),a.resolve(c._getErrorMessage(d||{})))})};
SzallasFBClass$$module$common$szallas_fb.prototype._postToFeed=function(a,b){var c=this;b=$$$module$common$szallas_fb.extend({},b,{method:"feed"});FB.ui(b,function(b){b&&b.post_id?a.resolve(b):a.resolve(c._getErrorMessage(b||{}))})};
SzallasFBClass$$module$common$szallas_fb.prototype._renderElement=function(a,b){var c=this;b=void 0===b?document.body:b;var d=$$$module$common$szallas_fb(this._getNotRenderedPluginElements(b));d.length?(this._startLoaders(d),DEBUG$$module$common$szallas_fb&&console.log("render got:",b,"not rendered:",d),FB.XFBML.parse(b,function(){c._endLoaders(d);a.resolve()})):(DEBUG$$module$common$szallas_fb&&console.log("no element needs rendering!"),a.resolve())};
SzallasFBClass$$module$common$szallas_fb.prototype._setLikeButtonDefaults=function(){this.data.likeButtonDefaults={url:this.getFacebookDomain(),width:"250px",height:"100%",layout:"standard",action:"like",share:"true",showFaces:"true"}};
SzallasFBClass$$module$common$szallas_fb.prototype._getNotRenderedPluginElements=function(a){a=void 0===a?document.body:a;a=a.querySelectorAll(PLUGIN_CLASSES$$module$common$szallas_fb.join(", "));return a.length?[].filter.call(a,function(a){return $$$module$common$szallas_fb.expr.pseudos.visible(a)&&"rendered"!==a.getAttribute("fb-xfbml-state")}):[]};
SzallasFBClass$$module$common$szallas_fb.prototype.renderPluginsOnNeed=function(){var a=this,b=this,c=this._getNotRenderedPluginElements();if(c.length){var d=function(){if(a.getOptions().autoRendering)return!0;var b=!1;c.some(function(a){return a.getBoundingClientRect().top-200<window.innerHeight?b=!0:!1});return b},e=function(){c.length?d()&&(b.api("renderElement"),$$$module$common$szallas_fb(window).off("scroll",e)):$$$module$common$szallas_fb(window).off("scroll",e)};$$$module$common$szallas_fb(window).on("scroll",
e);e()}};SzallasFBClass$$module$common$szallas_fb.prototype._startLoaders=function(a){a.addClass("facebook-element in-progress-center")};SzallasFBClass$$module$common$szallas_fb.prototype._endLoaders=function(a){a.removeClass("facebook-element in-progress-center")};
SzallasFBClass$$module$common$szallas_fb.prototype._renderResponse=function(a){var b="";a.locale&&a.locale===siteObject$$module$common$site.getLocaleLongCodeUnderline()&&(b=siteObject$$module$common$site.get("country").name);var c=a.id||"",d=a.email||"",e=a.first_name||"",f=a.last_name||"",g=this._getRenderedFullName(a),h=a.locale||"",k=a.gender||"",l=a.birthday||"",n=a.relationship_status||"",p=a.hometown&&a.hometown.name?a.hometown.name:"";var m=a.location&&"string"===typeof a.location.name?a.location.name.split(",")[0]:
"";return{id:c,email:d,firstName:e,lastName:f,fullName:g,locale:h,gender:k,birthday:l,relationship:n,homeTown:p,location:m,pictures:"https://graph.facebook.com/"+a.id+"/picture",normalPictures:"https://graph.facebook.com/"+a.id+"/picture?type=normal",country:b,userName:"",phone:"",workEmployer:"",workPosition:"",accessToken:a.accessToken,type:"Facebook"}};
SzallasFBClass$$module$common$szallas_fb.prototype._getRenderedFullName=function(a){var b="";"hu"===siteObject$$module$common$site.getLocaleCode()?a.last_name?(b=a.last_name,a.first_name&&(b+=" "+a.first_name)):a.first_name&&(b=a.first_name):a.first_name?(b=a.first_name,a.last_name&&(b+=" "+a.last_name)):a.last_name&&(b=a.last_name);return b};
SzallasFBClass$$module$common$szallas_fb.prototype._getNotGrantedPermissions=function(a,b){a=a.split(",");b=b.split(",");for(var c=[],d,e,f=0;f<b.length;f++){d=$$$module$common$szallas_fb.trim(b[f]);e=!1;for(var g=0;g<a.length;g++)if(d===a[g]){e=!0;break}e||c.push(d)}return c};
SzallasFBClass$$module$common$szallas_fb.prototype._getProfileFields=function(a){var b="id email first_name last_name locale gender birthday relationship_status hometown location".split(" ");$$$module$common$szallas_fb.isArray(a)&&$$$module$common$szallas_fb.merge(b,a);return b.join(",")};SzallasFBClass$$module$common$szallas_fb.prototype._getDefaultProfileScopes=function(){return["public_profile","email"]};
SzallasFBClass$$module$common$szallas_fb.prototype._getPageDataFields=function(a){var b="about awards birthday category checkins cover description founded likes talking_about_count website".split(" ");$$$module$common$szallas_fb.isArray(a)&&$$$module$common$szallas_fb.merge(b,a);return b.join(",")};SzallasFBClass$$module$common$szallas_fb.prototype.canvasResize=function(a){a=void 0===a?{}:a;FB.Canvas.setSize(a)};SzallasFBClass$$module$common$szallas_fb.prototype.isFbLoaded=function(){return this.getOptions().isLoaded};
SzallasFBClass$$module$common$szallas_fb.prototype.getOptions=function(){return this.options};SzallasFBClass$$module$common$szallas_fb.prototype.getAppId=function(){return this.getOptions().appId};SzallasFBClass$$module$common$szallas_fb.prototype.getVersion=function(){return this.getOptions().version};SzallasFBClass$$module$common$szallas_fb.prototype.getFacebookDomain=function(){return this.getOptions().facebookDomain};SzallasFBClass$$module$common$szallas_fb.prototype.getChannelUrl=function(){return this.getOptions().channelUrl};
SzallasFBClass$$module$common$szallas_fb.prototype.getUserId=function(){return FB.getUserID()};SzallasFBClass$$module$common$szallas_fb.prototype.getAccessToken=function(){return FB.getAccessToken()};SzallasFBClass$$module$common$szallas_fb.prototype._getErrorMessage=function(a){return{error:a&&a.error?a.error:"unknown error"}};SzallasFBClass$$module$common$szallas_fb.prototype._getPageDefaultUrl=function(){return-1<location.host.indexOf("www")?location.host:"www."+location.host};
goog.exportSymbol("SzallasFBClass$$module$common$szallas_fb",SzallasFBClass$$module$common$szallas_fb);var SzallasFB$$module$common$szallas_fb=new SzallasFBClass$$module$common$szallas_fb,renderedFbProfileResponse$$module$common$szallas_fb,module$common$szallas_fb={SzallasFB:SzallasFB$$module$common$szallas_fb};
var $$$module$common$captcha_service=jQuery,RE_CAPTCHA_URL$$module$common$captcha_service="https://www.google.com/recaptcha/api.js";window.onReCaptchaLoad=function(){$$$module$common$captcha_service(document).trigger("reCaptchaLoad")};var CaptchaService$$module$common$captcha_service=function(){};
CaptchaService$$module$common$captcha_service.loadReCaptcha=function(a){$$$module$common$captcha_service.getScript(RE_CAPTCHA_URL$$module$common$captcha_service+"?onload=onReCaptchaLoad&render=explicit");if("function"===typeof a)$$$module$common$captcha_service(document).one("reCaptchaLoad",function(){a(grecaptcha)})};
CaptchaService$$module$common$captcha_service.renderReCaptcha=function(a){var b=a.element,c=a.captchaResponseCallback;"undefined"===typeof grecaptcha?CaptchaService$$module$common$captcha_service.loadReCaptcha(function(a){CaptchaService$$module$common$captcha_service._doRenderCaptcha(a,{element:b,captchaResponseCallback:c})}):CaptchaService$$module$common$captcha_service._doRenderCaptcha(grecaptcha,{element:b,captchaResponseCallback:c})};
CaptchaService$$module$common$captcha_service._doRenderCaptcha=function(a,b){var c=b.captchaResponseCallback;a.render(b.element,{sitekey:siteObject$$module$common$site.get("recaptchaSiteKey"),callback:c})};CaptchaService$$module$common$captcha_service.resetReCaptcha=function(){grecaptcha.reset()};var module$common$captcha_service={};module$common$captcha_service.CaptchaService=CaptchaService$$module$common$captcha_service;
var $$$module$common$googletranslator=jQuery$$module$typescript,GoogleTranslator$$module$common$googletranslator=function(){this.translateApiKey=siteObject$$module$common$site.get("translateApiKey");this.initEvent()};
GoogleTranslator$$module$common$googletranslator.prototype.translateRequest=function(a,b,c){var d="";b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;e=b.next())e=e.value,e=e.replace(/<br>/g," ").replace(/</g," ").replace(/\n/g," ").replace(/\r/g," ").replace(/\t/g," "),e=e.replace(/\?+/g,"?"),d+="&q="+e;Common$$module$common$common.request({url:"https://www.googleapis.com/language/translate/v2?&target="+a.target+"&key="+this.translateApiKey+d,method:"get",dataType:"jsonp"},function(a){a.error?
c({status:"error"}):c(a.data.translations)})};GoogleTranslator$$module$common$googletranslator.prototype.changeText=function(a,b){var c=a.data("translated");a.find(".text-translated").toggle(c);a.find(".text-original").toggle(!c);a.data("translated",!c);b.find(".translate-text-container").html(TEXTS.get("sza_rating.:text".replace(":text",c?"original_text":"translate_text")))};
GoogleTranslator$$module$common$googletranslator.prototype.translate=function(a){var b=this,c=a.closest(a.data("translateContainer"));if(0===c.length)throw Error("translateContainer is not defined");var d=setTimeout(function(){a.addClass("in-progress")},200);"undefined"===typeof c.data("translated")?this.translateRequest({target:siteObject$$module$common$site.get("localeCode")},jQuery$$module$typescript.map(c.find(".text-original"),function(a){return jQuery$$module$typescript(a).html()}),function(e){clearTimeout(d);
a.removeClass("in-progress");if("error"===e.status)a.siblings(".error-info").length||a.after('<div class="error-info"><span class="mr-5 glyphicon glyphicon-exclamation-sign"></span>'+TEXTS.get("sza_rating.error_msg")+"</div>");else{jQuery$$module$typescript.each(c.find(".text-translated"),function(a,b){jQuery$$module$typescript(b).html(e[a].translatedText)});var f=jQuery$$module$typescript.map(c.find(".text-original"),function(a){return jQuery$$module$typescript(a).html()}).join().length;TrackingService$$module$measurement.event("endHotel",
"google-translate",siteObject$$module$common$site.get("localeCode"),f);c.data("translated",!0);b.changeText(c,a)}}):(clearTimeout(d),this.changeText(c,a))};
GoogleTranslator$$module$common$googletranslator.prototype.initEvent=function(){var a=this;if(GoogleTranslator$$module$common$googletranslator.isAlreadyInited)throw Error("GoogleTranslator is already inited");jQuery$$module$typescript(document).on("click",".translate-toggle",function(b){b.preventDefault();b=jQuery$$module$typescript(b.currentTarget);a.translate(b)});GoogleTranslator$$module$common$googletranslator.isAlreadyInited=!0};
GoogleTranslator$$module$common$googletranslator.isAlreadyInited=!1;var module$common$googletranslator={};module$common$googletranslator.GoogleTranslator=GoogleTranslator$$module$common$googletranslator;
var $$$module$profile$favourite_plugin=jQuery,DEFAULTS$$module$profile$favourite_plugin={elementClass:".favourite",minFavouriteCount:10,showEmptyCategoryCounts:!1,itemType:{voucher:"voucher"},urls:{removeCategory:"ajax/profile/favourite/category/remove",popoverContent:"ajax/profile/favourite/favourite_popover",updateFavouriteCategories:"ajax/profile/favourite/update_favourites"},categoryIds:{mobile:"a17df77f-e3b5-47b4-be5d-83c40d378697",dream_hotels:"66720ae8-2e5e-47ff-9545-fc30044db3c4"}},FavouritePlugin$$module$profile$favourite_plugin=
function(){return Popover$$module$common$popover.apply(this,arguments)||this};$jscomp.inherits(FavouritePlugin$$module$profile$favourite_plugin,Popover$$module$common$popover);
FavouritePlugin$$module$profile$favourite_plugin.prototype.init=function(a,b,c){a=$$$module$profile$favourite_plugin.extend({},DEFAULTS$$module$profile$favourite_plugin,{type:"favouritePlugin",title:'<a data-dismiss="close" class="close">Ã—</a>',"class":"favourite-popover",content:this.favouriteContent.bind(this),placement:"bottom",html:!0},c);Popover$$module$common$popover.prototype.init.call(this,a.type,b,a);var d=this;d.$element.one("contentset.bs.szallaspopover",function(){d.initFavouriteHotelEvents()}).on("contentset.bs.szallaspopover",
function(){d.actualCategoryIds=siteObject$$module$common$site.isMobile()?FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.categoryIds.mobile:d.postData().categoryIds;d.scrollBar();d.initFavouriteEvents()}).on("hide.bs.favouritePlugin",function(){ProfileObject.resetLoginMenu(d.tip());d.getTipContent().find(".favourite-category").each(function(){var a=$$$module$profile$favourite_plugin(this),b=a.data("removeCategory");b&&d.removeCategory(a,b)})});(this.inSimpleMode=siteObject$$module$common$site.isMobile()||
this.getItemType()===FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.itemType.voucher)?this.initSimpleFavourite():this.initComplexFavourite();this.toggle()};FavouritePlugin$$module$profile$favourite_plugin.prototype.initComplexFavourite=function(){var a=this;a.allowShow=!0;a.$element.one("contentset.bs.szallaspopover",function(){a.initValidator()}).on("contentset.bs.szallaspopover",function(){ProfileObject.isLoggedIn()||ProfileObject.showLoginModal()})};
FavouritePlugin$$module$profile$favourite_plugin.prototype.initSimpleFavourite=function(){var a=this;a.allowShow=!1;a.$element.on("inserted.bs.favouritePlugin",function(){ProfileObject.isLoggedIn()&&(a.allowShow?a.getTipContent().show():(a.actualCategoryIds=[FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.categoryIds.mobile],a.getTipContent().hide()))}).on("contentset.bs.szallaspopover",function(b,c){c.tip().one("profile.loginSuccess",function(){a.hide();a.$element.trigger("click")});$$$module$profile$favourite_plugin(document).one("profile.registrationSuccess",
function(){a.hide();a.$element.trigger("click")})}).on("hide.bs.favouritePlugin",function(){a.allowShow=!1})};FavouritePlugin$$module$profile$favourite_plugin.prototype.initValidator=function(){this.validator=new Validator({elements:[{name:"categoryName",validate:function(a,b){b(!0)},element:this.getTipContent().find(".new-categories-container input[type=text]")}]})};
FavouritePlugin$$module$profile$favourite_plugin.prototype.favouriteContent=function(a,b){var c=this,d={url:c.getUrl("popoverContent"),data:JSON.stringify({type:this.getItemType(),id:this.getItemId()})};c.$element.trigger("favouritePlugin.beforeGetContent",d);Common$$module$common$common.request(d,function(d){"OK"===d.STATUS?(d.element=c.$element,c.$element.trigger("favouritePlugin.beforeSetContent",d),a(d.html),c.allowShow=!!d.html,c.allowShow?(c.getTipContent().show(),c.inSimpleMode||c.getTipContent().find(".profile-login-box").hide(),
b.refreshPositions(),"undefined"!==typeof d.timer&&setTimeout(function(){b.hide()},1E3*parseInt(d.timer))):c.hide(),c.updateElement(d)):c.hide()})};FavouritePlugin$$module$profile$favourite_plugin.prototype.errorLog=function(a){var b=this.getTipContent().find(".error-log");a?b.html(a).show():b.html("").hide()};
FavouritePlugin$$module$profile$favourite_plugin.prototype.removeCategory=function(a,b,c){var d=this,e={url:d.getUrl("removeCategory"),data:JSON.stringify(d.postData({categoryId:b}))};Common$$module$common$common.request(e,function(e){"ok"===e.status?(d.$element.trigger("favouritePlugin.remove_category",[{categoryId:b},e]),a.remove(),d.updateScrollBar("relative"),d.errorLog("")):d.errorLog(TEXTS.get("sza_profile.category_remove_failed"));d.updateElement(e);"function"==typeof c&&c(e)})};
FavouritePlugin$$module$profile$favourite_plugin.prototype.removeCategoryAnimate=function(a){var b=this,c=a.closest(".favourite-category"),d=c.find("input[type=checkbox]").val();a=c.find(".category").html();var e=c.next(".confirm-remove-favourite"),f=c.outerHeight();d&&(e.length||(e=$$$module$profile$favourite_plugin('<li class="confirm-remove-favourite hidden-element"><span class="remove-favourite-yes-btn close">&times;</span>'+a+" "+TEXTS.get("sza_profile.confirm_remove")+' <a class="remove-favourite-no-btn">'+
TEXTS.get("sza_profile.undo")+"</a></li>"),c.after(e)),a=e.height(),a=Math.max(f,a),c.data("removeCategory",d),c.animate({left:"-100%",height:a},{duration:250,complete:function(){c.hide();e.show();e.find(".remove-favourite-yes-btn").one("click",function(){b.removeCategory(c,d);e.hide().remove();c.remove();return!1});e.find(".remove-favourite-no-btn").one("click",function(){e.hide();c.data("removeCategory",null).show().animate({left:"0",height:f},{duration:250});return!1})}}))};
FavouritePlugin$$module$profile$favourite_plugin.prototype.addInput=function(a,b){a='<li class="favourite-category checkbox selected"><label><input type="checkbox" value=":categoryId" class="categories" checked><span class="category">:categoryName</span><span class="count"></span></label><a class="remove-link">&times;</a></li>'.replace(/:categoryId/,a);a=a.replace(/:categoryName/,b);this.getTipContent().find(".favourite-category").eq(0).before($$$module$profile$favourite_plugin(a));this.validator.updateElements("categoryName");
this.updateScrollBar(0)};
FavouritePlugin$$module$profile$favourite_plugin.prototype.addNewCategory=function(){var a=this,b=this.getTipContent(),c=b.find(".new-categories-container"),d=c.find("input[type=text]").val();a.validator.updateElements("categoryName");a.validator.isValid(!0,function(e){e&&(e=function(e){$$$module$profile$favourite_plugin(document).trigger("favouritePlugin.beforeModifyCategories",[e,a]);return[{url:a.getUrl("updateFavouriteCategories"),data:JSON.stringify($$$module$profile$favourite_plugin.extend(a.postData(),{categoryName:d},
e))},function(e){if("ok"===e.status&&"undefined"!=typeof e.newCategoryId)a.addInput(e.newCategoryId,d),b.find(".save-btn").removeClass("enable"),a.validator.resetElements("categoryName"),c.find("input[type=text]").val(""),c.find("input[type=checkbox]").prop("disabled",!1).prop("checked",!1),ProfileObject.updateData({favouriteCount:e.favouriteCount}),a.$element.trigger("favouritePlugin.add_category",[$$$module$profile$favourite_plugin.extend({},a.postData(),{newCategoryId:e.newCategoryId,categoryName:d})]);
else if("ok"!==e.status&&e.reason&&"category_exists"===e.reason){var f=b.find('input[value="'+e.existingCategoryId+'"]');if(f.is(":checked"))var g=TEXTS.get("sza_profile.category_exist_already");else g=TEXTS.get("sza_profile.category_exist_but_updated"),f.prop("checked",!0),f.closest(".favourite-category").addClass("selected");a.errorLog(g)}c.fadeTo("fast",1);a.updateElement(e)}]},ProfileObject.isLoggedIn()?(c.fadeTo("fast",.3),Common$$module$common$common.request.apply(Common$$module$common$common,
$jscomp.arrayFromIterable(e({mode:"normal"})))):(a.options.afterLoginParams=e({mode:"afterLogin"}),b.find(".favourite-check-list").hide(),b.find(".profile-login-box").show()))})};FavouritePlugin$$module$profile$favourite_plugin.prototype.postData=function(a){var b=this.getTipContent().find("input.categories:checked");b=$$$module$profile$favourite_plugin.map(b,function(a){return a.value});return $$$module$profile$favourite_plugin.extend({type:this.getItemType(),id:this.getItemId(),categoryIds:b},a)};
FavouritePlugin$$module$profile$favourite_plugin.prototype.updateElement=function(a){var b=this.getTipContent(),c=a.categories;"boolean"!==typeof a.added&&(a.added=!!this.getTipContent().find(".favourite-check-list input[type=checkbox]:checked").length);this.$element.toggleClass("active",a.added);this.$element.trigger("favourite.updateElement",a);this.updateFavouriteNumber(a.favouriteCounts);ProfileObject.updateContextMenuFavouriteCount(a.favouriteCount);if(c){var d=b.find(".favourite-category");
FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.showEmptyCategoryCounts?d.find(".count").html("(0)"):d.find(".count").html("");$$$module$profile$favourite_plugin.each(c,function(a,b){a=d.find('.categories[value="'+a+'"]');a.length&&(a=a.closest(".favourite-category"),a=a.find(".count"),a.html("("+b+")"))})}};
FavouritePlugin$$module$profile$favourite_plugin.prototype.updateFavouriteNumber=function(a){$$$module$profile$favourite_plugin(FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.elementClass).filter("[data-item-id="+this.$element.data("itemId")+"]").each(function(){var b=$$$module$profile$favourite_plugin(this),c=b.find(".number");a&&a>=FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.minFavouriteCount?(c.length?c.html(a):(c=$$$module$profile$favourite_plugin('<span class="number hidden-xs">'+
a+"</span>"),b.append(c)),c.data("favouriteCount",a)):0>=a&&c.remove()})};FavouritePlugin$$module$profile$favourite_plugin.prototype.scrollBar=function(){var a=this.getTipContent().find(".favourite-check-list-slider"),b=a.html();a.empty().append('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div><div class="viewport"><div class="overview"></div></div>').find(".overview").html(b).end().tinyscrollbar()};
FavouritePlugin$$module$profile$favourite_plugin.prototype.updateScrollBar=function(a){var b=$$$module$profile$favourite_plugin(".favourite-check-list-slider");b.length&&b.data("plugin_tinyscrollbar").update(a)};
FavouritePlugin$$module$profile$favourite_plugin.prototype.storeFavourites=function(a){var b=this,c=this.getTipContent(),d=a.val(),e=function(a,c){a=void 0===a?{}:a;$$$module$profile$favourite_plugin(document).trigger("favouritePlugin.beforeModifyCategories",[a,b]);return[{url:b.getUrl("updateFavouriteCategories"),data:JSON.stringify(b.postData(a))},function(a){b.$element.trigger("favouritePlugin.change_categories",[b.postData({changedCategoryId:c}),b]);b.updateElement(a);ProfileObject.updateData({favouriteCount:a.favouriteCount})}]};
ProfileObject.isLoggedIn()?Common$$module$common$common.request.apply(Common$$module$common$common,$jscomp.arrayFromIterable(e({mode:"normal"},d))):(b.options.afterLoginParams=e({mode:"afterLogin"},d),c.find(".favourite-check-list").hide(),c.find(".profile-login-box").show());a.closest(".favourite-category").toggleClass("selected",a.is(":checked"))};
FavouritePlugin$$module$profile$favourite_plugin.prototype.initFavouriteEvents=function(){var a=this,b=this.getTipContent(),c=b.find(".save-btn");c.off("click").on("click",a.addNewCategory.bind(a));b.find(".new-favourite-category").off("keypress").on("keypress",function(c){if(13===c.which)b.find(".save-btn:visible").trigger("click"),$$$module$profile$favourite_plugin(this).trigger("blur"),a.errorLog("");else if(32<=this.value.length)return a.errorLog(TEXTS.get("sza_profile.too_long_category_name",
{count:32})),!1}).off("keyup").on("keyup",function(){var b=this.value.length;b?(c.addClass("enable"),32>b&&a.errorLog("")):c.removeClass("enable")});b.off("change","input[type=checkbox].categories").on("change","input[type=checkbox].categories",function(){a.storeFavourites($$$module$profile$favourite_plugin(this))});b.off("click",".favourite-check-list .remove-link").on("click",".favourite-check-list .remove-link",function(){a.removeCategoryAnimate($$$module$profile$favourite_plugin(this))})};
FavouritePlugin$$module$profile$favourite_plugin.prototype.initFavouriteHotelEvents=function(){var a=this;$$$module$profile$favourite_plugin(document).on("profile.loginSuccess",function(){if(a.options.afterLoginParams){var b=function(){};"function"==typeof a.options.afterLoginParams[1]&&(b=a.options.afterLoginParams[1]);a.options.afterLoginParams[1]=function(c){b(c);a.$element.trigger("click")};Common$$module$common$common.request.apply(Common$$module$common$common,$jscomp.arrayFromIterable(a.options.afterLoginParams));
a.getTipContent().hide();$$$module$profile$favourite_plugin(document).one("searchResponse",function(){$$$module$profile$favourite_plugin(FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.elementClass).filter('[data-item-id="'+a.getItemId()+'"]').trigger("click")});a.options.afterLoginParams=[]}a.getTipContent().find(".favourite-check-list").show()})};FavouritePlugin$$module$profile$favourite_plugin.prototype.getItemId=function(){return this.options.itemId};
FavouritePlugin$$module$profile$favourite_plugin.prototype.getItemType=function(){return this.options.itemType};FavouritePlugin$$module$profile$favourite_plugin.prototype.getTipContent=function(){return this.tip()};FavouritePlugin$$module$profile$favourite_plugin.prototype.getFavouriteOptions=function(){return this.options};FavouritePlugin$$module$profile$favourite_plugin.prototype.getUrl=function(a){var b=this.options.urls;return"undefined"===typeof b[a]?"":b[a]};
FavouritePlugin$$module$profile$favourite_plugin.initFavouriteNumberTooltip=function(a){a||(a=FavouritePlugin$$module$profile$favourite_plugin.DEFAULTS.elementClass);a=$$$module$profile$favourite_plugin(a);a.on("mouseover",".number",function(){var a=$$$module$profile$favourite_plugin(this);if(!a.data("bs.tooltip")){var c=a.closest("#header-affix"),d={};c.length&&(d.viewport=c);a.tooltip(d).tooltip("show")}})};
$jscomp.global.Object.defineProperties(FavouritePlugin$$module$profile$favourite_plugin,{DEFAULTS:{configurable:!0,enumerable:!0,get:function(){return DEFAULTS$$module$profile$favourite_plugin}}});var module$profile$favourite_plugin={DEFAULTS:DEFAULTS$$module$profile$favourite_plugin};module$profile$favourite_plugin.FavouritePlugin=FavouritePlugin$$module$profile$favourite_plugin;
var $$$module$profile$favourite_plugin_manager=jQuery,FavouritePluginManager$$module$profile$favourite_plugin_manager=function(){};
FavouritePluginManager$$module$profile$favourite_plugin_manager.create=function(a){a=a instanceof $$$module$profile$favourite_plugin_manager?a:$$$module$profile$favourite_plugin_manager(a);var b=a.data(),c=b.favouritePlugin;"undefined"===typeof c&&(b=$$$module$profile$favourite_plugin_manager.extend({},DEFAULTS$$module$profile$favourite_plugin,b),c=new FavouritePlugin$$module$profile$favourite_plugin(a,b),a.data("favouritePlugin",c),SzallasPopover$$module$common$popover.cache.push(c));return c};
FavouritePluginManager$$module$profile$favourite_plugin_manager.generalInit=function(){FavouritePlugin$$module$profile$favourite_plugin.initFavouriteNumberTooltip();$$$module$profile$favourite_plugin_manager(document).on("click","[data-toggle=favouritePlugin]",function(a){ProfileObject.isLoggedIn()?FavouritePluginManager$$module$profile$favourite_plugin_manager.create(a.currentTarget):ProfileObject.showLoginModal()})};$$$module$profile$favourite_plugin_manager(function(){FavouritePluginManager$$module$profile$favourite_plugin_manager.generalInit()});
var module$profile$favourite_plugin_manager={};module$profile$favourite_plugin_manager.FavouritePluginManager=FavouritePluginManager$$module$profile$favourite_plugin_manager;
var ProfileObject=function(a){var b=getModule("common/site").siteObject,c=getModule("common/common").Common,d=getModule("common/history_service").HistoryService,e=getModule("common/szallas_fb").SzallasFB,f=getModule("measurement").TrackingService,g=getModule("common/popover").SzallasPopover,h=getModule("common/captcha_service").CaptchaService,k=function(){var b=this;this.capthas={response:null,erros:{},login:{checkedOnSHow:null,renderNeeded:null,resetNeeded:null}};this.data={basicInfo:{},hasReservation:null};
this._allowAutoLogin=!1;this.validators=null;a(function(){b.init()})};k.prototype={constructor:k,init:function(){var b=this,c=a("#login-modal");a(document).trigger("profile.beforeInit",b);b.initEvents();c.one("show.bs.modal",function(){b.validators=b._createContextMenuValidators(c);b.contextMenuInit(c,"header .show-profile-menu");b.autoLoginInit();b.initModalEvents(c)})},initModalEvents:function(a){var b=this;a.on("click",".js-switch-registration",function(b){b.preventDefault();a.find(".registration").removeClass("hidden");
a.find(".login").addClass("hidden");a.find(".registration-last-name").focus()}).on("click",".js-switch-login",function(b){b.preventDefault();a.find(".registration").addClass("hidden");a.find(".forgotten-password").addClass("hidden");a.find(".login").removeClass("hidden");a.find(".profile-email").focus()}).on("click",".js-switch-forgotten-password",function(b){b.preventDefault();a.find(".login").addClass("hidden");a.find(".forgotten-password").removeClass("hidden");b=a.find(".forgotten-password-email");
b.val().length||b.val(a.find(".profile-email").val()).trigger("focus")}).on("hide.bs.modal",function(){b.resetLoginModal()})},contextMenuInit:function(b,c){var d=this;if(b&&b.length){var e=b.find(".login-form").length,f=b.find(".registration-form").length,g=this.validators;e&&this.loginMenuInit(b,g);f&&this.registrationInit(b,c,g);b.on("contextMenuShow",function(c){d.showHasReservationLink(a(c.currentTarget));e&&d._checkLoginCaptchaNeed(b,g.loginValidator)});e&&this._initCaptchaInContainer(b,g.loginValidator)}},
_initCaptchaInContainer:function(a,b){var c=this;a.find(".login-form").is(":visible")&&this._checkLoginCaptchaNeed(a,b);this.capthas.login.renderNeeded&&this._renderLoginCaptcha(a,b);a.on("profile.loginError",function(d,e){e&&e.captchaChallenge&&c._renderLoginCaptcha(a,b)})},loginMenuInit:function(b,c){var d=this,g=b.find(".facebook-login-response"),h=b.find(".email-login-response"),l=function(){g.find(".message").html(TEXTS.get("sza_profile.error_fb_login")).end().show()};b.on("click",".btn-login-fb",
function(){var c=a(this);g.hide();c.addClass("in-progress");d.setAutoLogin(!1);e.getRenderedProfile(function(a){a.error?(l(),c.removeClass("in-progress disabled")):d.login(a,b,function(a){c.removeClass("in-progress disabled");"OK"===a.STATUS?f.event("profile-login","facebook","success",1):"logged_in"!==a.STATUS&&(l(),f.event("profile-login","facebook","error",1))})});return!1}).on("click",".email-login .email-login-title",function(){b.find(".login-form, .show-registration-form").show();b.find(".email-login-form").stop(!0,
!0).slideToggle();b.find(".email-registration-container").stop(!0,!0).slideToggle();return!1}).on("click",".registration-form .email-login-title",function(){var a=b.find(".registration-email").val();b.find(".registration-form").stop(!0,!0).slideUp().promise().done(function(){b.find(".login-form, .show-registration-form").slideDown().promise().done(function(){b.find(".show-registration-form").show();a?b.find(".profile-password").trigger("focus"):b.find(".profile-email").trigger("focus")})});a&&b.find(".profile-email").val(a);
return!1}).on("click",".btn-login",function(){var e=a(this);h.hide();e.addClass("in-progress disabled");c.loginValidator.isValid(!0,function(a){a?(a={type:"email",email:b.find(".profile-email").val(),password:b.find(".profile-password").val()},d.login(a,b,function(a){e.removeClass("in-progress disabled");"OK"===a.STATUS?f.event("profile-login","email","success",1):"logged_in"!==a.STATUS&&(a=a.REASON?a.REASON:TEXTS.get("sza_profile.unknown_error"),h.find(".message").html(a).end().show(),f.event("profile-login",
"email","error",1))})):e.removeClass("in-progress disabled")});return!1}).on("keypress",".profile-password",function(a){13===a.which&&b.find(".btn-login").trigger("click")}).on("click",".profile-header-menu",function(b){var c=a(b.target);c.not("a, input").length&&!c.closest("a").length&&b.stopPropagation()}).on("click","input",function(a){a.stopPropagation()}).on("keypress",".forgotten-password-email",function(a){13===a.which&&b.find(".forgotten-password-submit").trigger("click")}).on("click",".back-link",
function(){b.find(".registration-form, .forgotten-password-form").slideUp();b.find(".show-registration-form, .privacy").show();b.find(".login-form").slideDown();return!1}).on("click",".forgotten-password-submit",function(){var e=a(this);e.prop("disabled","disabled").addClass("in-progress");var f=b.find(".forgotten-password-response");f.hide().removeClass("callout-success callout-danger");c.forgottenPasswordValidator.isValid(!0,function(a){a&&(a={forgottenPasswordEmail:b.find(".forgotten-password-email").val()},
d.request("ajax/profile/forgotpassword",a,function(a){"OK"===a.STATUS?b.find(".forgotten-password-data, .forgotten-password-submit, .forgotten-password-back-link").slideUp(function(){f.addClass("callout-success").html(TEXTS.get("sza_profile.new_password_sent")).slideDown()}):(a=a.REASON&&"FACEBOOK"===a.REASON,f.addClass("callout-danger").html(a?TEXTS.get("sza_profile.email_registered_with_facebook"):TEXTS.get("sza_profile.email_not_registered")).show())}));e.prop("disabled",!1).removeClass("in-progress")});
return!1})},getContextMenu:function(a){c.request({url:"ajax/profile/get_context_menu"},a)},resetLoginMenu:function(a){a.off()},addContextMenu:function(b,c,d){d=d instanceof a?d:a(d);b.html(d);this.contextMenuInit(d,c)},replaceContextMenu:function(b,c,d){b.length&&d&&(d=d instanceof a?d:a(d),b.replaceWith(d),this.contextMenuInit(d,c))},popoverMenuInit:function(b,c){if(b.length){var d=b.data();if(!d["bs.szallaspopover"]){var e=this;d=d.registration;var f={showRegistration:"undefined"!==typeof d?d:!0};
d={html:!0,placement:"bottom","class":"profile-menu-popover",title:'<strong><a data-dismiss="close" class="close">Ã—</a>'+TEXTS.get("sza_profile.loge_in")+"</strong>",content:function(a,b){e.request("ajax/profile/get_login_menu",f,function(c){"ok"===c.status?a(c.html):b.hide()})}};b.on("contentset.bs.szallaspopover",function(a,c){e.contextMenuInit(c.tip(),b[0])}).on("hidden.bs.szallaspopover",function(){e.resetLoginMenu(a(this).data("bs.szallaspopover").tip())});new g(b,a.extend(!0,{},d,c||{}))}}},
registrationInit:function(b,c,d){var e=this;a("input[data-toggle-pwd-visibility]").togglePasswordVisibility();b.on("keypress",".registration-password",function(a){if(13===a.which)return b.find(".btn-register").trigger("click"),!1}).on("click",".btn-register",function(){var c=a(this);c.addClass("in-progress disabled");d.registrationValidator.isValid(!0,function(d){if(d){d={lastName:b.find(".registration-last-name").val(),firstName:b.find(".registration-first-name").val(),email:b.find(".registration-email").val(),
password:b.find(".registration-password").val(),type:"email",joinClub:a("#joinClub").is(":checked")};var g;b.closest("#header").length?g="profile-menu":b.closest(".profile-menu-popover").length?g="profile-fill-button":b.closest(".favourite-popover").length?g="favourite":b.closest(".compare-page").length&&(g="comparison");e.registration(d,function(d){g&&f.event("profile-registration",g,"ok"===d.status?"success":"error");"ok"===d.status?e.showPopoverRegistrationMessage(a("header .user")):(d=d.REASON?
d.REASON:TEXTS.get("sza_profile.unknown_error"),b.find(".email-registration-response").html(d).show());c.removeClass("in-progress disabled")})}else c.removeClass("in-progress disabled")});return!1})},showPopoverRegistrationMessage:function(a){if(!a.data("favouritePlugin")){var b=function(a){a("<div>"+TEXTS.get("sza_profile.one_step_left")+"</div>")},c='<button data-dismiss="close" class="close">Ã—</button><div class="text-iconic"><span class="glyphicon glyphicon-checkmark color-success"></span> <strong>'+
TEXTS.get("sza_profile.registration_success")+"</strong></div>",d=a.data("bs.szallaspopover");if(d){var e=d.getContent,f=d.options.title;d.options.title=c;d.getContent=b;d.setContent();a.one("hidden.bs.szallaspopover",function(){d.getContent=e;d.options.title=f;d.setContent()})}else new g(a,{placement:"bottom",html:!0,trigger:"manual",content:b,title:c,"class":"success-registration-popover"}),d=a.data("bs.szallaspopover");d.show();a.one("click",function(){d.hide()})}},registration:function(b,c){var d=
this;b=a.extend(!0,{},b);var e="function"==typeof c?c:function(){};b.loginType="manual";d.request("ajax/profile/registration",b,function(b){"ok"===b.status&&(d.replaceContextMenu(a("header .profile-context-menu"),"header .show-profile-menu",b.contextMenu),b.profileData&&d.updateData(b.profileData),a(document).trigger("profile.registrationSuccess"),a(document).trigger("profile.loginSuccess",{registration:!0}));d.closeLoginModal();e(b)})},login:function(b,c,d){c=void 0===c?null:c;var e=this,f=a.extend(!0,
{},b),g="function"==typeof d?d:function(){};e.isLoggedIn()&&!b.allowMerge?g({STATUS:"logged_in"}):(f.loginType||(f.loginType="manual"),this.capthas.login.resetNeeded=!1,"manual"===f.loginType&&null!==this.capthas.response&&(f.recaptchaResponse=this.capthas.response,this.capthas.response=null,this.capthas.login.resetNeeded=!0),a(document).trigger("profile.beforeLogin",f),e.request("ajax/profile/login",f,function(b){"OK"===b.STATUS?(e.replaceContextMenu(a("header .profile-context-menu"),"header .show-profile-menu",
b.contextMenu),b.profileData&&e.updateData(b.profileData),"manual"===f.loginType&&(a(document).trigger("profile.loginSuccess",{registration:!1}),null!==c&&c.triggerHandler("profile.loginSuccess")),e.closeLoginModal()):"manual"===f.loginType&&(a(document).trigger("profile.loginError"),null!==c&&c.triggerHandler("profile.loginError",b));g(b)}))},logout:function(b){var c=this;this.request("ajax/profile/logout",{allowRedirect:!0},function(d){"OK"===d.STATUS&&(c.replaceContextMenu(a("header .profile-context-menu"),
"header .show-profile-menu",d.contextMenu),c.resetToDefault(),a(document).trigger("profile.logoutSuccess"));"function"==typeof b&&b(d)})},resetToDefault:function(){this.data={basicInfo:{},hasReservation:null,mergeDomain:this.data.mergeDomain,profileTracking:this.data.profileTracking};this.setProfileLoginStatus(!1);storage.local().remove("profileNextAutologin")},request:function(b,c,d){"undefined"!=typeof b&&a.ajax({type:"POST",dataType:"json",url:b,data:JSON.stringify(c),success:function(a){"function"==
typeof d&&d(a)},error:function(){var a={status:"error"};"function"==typeof d&&d(a)}})},isUsableEmail:function(a,b){var c="function"==typeof b?b:function(){};this.request("ajax/profile/is_usable_email",{email:a},function(a){c(a)})},updateProfile:function(a,b){var c="function"==typeof b?b:function(){};this.request("ajax/profile/update",a,function(a){c(a)})},initEvents:function(){var c=this;"#profileLogin"===location.hash&&(this.showLoginModal(),d.replaceState("",document.title,location.href.replace("#profileLogin",
"")));a(document).on("profile.loginSuccess",function(){c.isLoggedIn()&&(c.data.hasReservation=!a(".my-reservations-link-container.hidden-element").length);b.get("isMobile")&&a("body").addClass("mobile-profile-logged")});a(".profile-menu-container, .personal-data-form").on("click",".profile-logout-btn",function(){var d="profile"===b.get("pageType");c.logout(function(c){"OK"===c.STATUS&&(b.get("isMobile")&&a("body").removeClass("mobile-profile-logged"),d?(location.href="/",f.event("profile-logout",
"profile-settings","logout",1)):(location.reload(),f.event("profile-logout","profile-menu","logout",1)))})});var e=a(".profile-satisfaction-link"),g=a(".guest-satisfaction-profile-link");if(0<e.length)e.find("a").on("click",function(){f.event("profile","selectMenu","100guarantee",1)});if(0<g.length)g.on("click",function(){f.event("100guaranteeMenu","click","brand1CampaignBanner",1)})},_createContextMenuValidators:function(a){var b=this,c=a.find(".login-re-captcha-element"),d=new Validator({elements:[{name:"profileFirstName",
validate:[Validator.Assert.required],element:a.find(".registration-first-name"),icon:!1},{name:"profileLastName",validate:[Validator.Assert.required],element:a.find(".registration-last-name"),icon:!1},{name:"profileEmail",validate:[Validator.Assert.required,Validator.Assert.email,function(a,b,c){if(c===ProfileObject.basicInfo().email)return b(!0);ProfileObject.isUsableEmail(c,function(a){var c=a.REASON;"OK"!==a.STATUS&&c&&(c='<div class="email-registration-response callout callout-danger callout-sm">'+
c+"</div>");b("OK"===a.STATUS?!0:c)})}],element:a.find(".registration-email"),icon:!1},{name:"profilePassword",validate:[Validator.Assert.required,Validator.Assert.length(8)],element:a.find(".registration-password"),reasons:{length:TEXTS.get("validate.password_length_error",{minLength:8})},icon:!1}]}),e=new Validator({elements:[{name:"profileEmail",validate:[Validator.Assert.required,Validator.Assert.email],element:a.find(".profile-email"),icon:!1},{name:"profilePassword",validate:[Validator.Assert.required],
element:a.find(".profile-password"),icon:!1},{name:"captcha",element:c,validate:[function(a,d){a=c.hasClass("rendered")&&null===b.capthas.response;d(a?TEXTS.get("validator.missing_captcha"):!0)}],errorContainer:a.find(".login-re-captcha-error"),icon:!1}]});a=new Validator({elements:[{name:"profileForgottenPasswordEmail",validate:[Validator.Assert.required,Validator.Assert.email],element:a.find(".forgotten-password-email"),icon:!1}]});return{registrationValidator:d,loginValidator:e,forgottenPasswordValidator:a}},
updateContextMenuFavouriteCount:function(b){if("undefined"!=typeof b){var c="";0<b&&(c="("+b+")");a(".profile-context-menu .favourite-count").html(c)}},_renderLoginCaptcha:function(a,b){var c=this;a=a.find(".login-re-captcha-element");this.capthas.login.resetNeeded?(h.resetReCaptcha(),this.capthas.login.resetNeeded=!1):a.length&&!a.hasClass("rendered")&&(h.renderReCaptcha({element:a[0],captchaResponseCallback:function(a){a&&(c.capthas.response=a,c.capthas.login.renderNeeded=!1,b.isValidElements(!0,
["captcha"]))}}),this.capthas.login.renderNeeded=!0,a.addClass("rendered"))},_checkLoginCaptchaNeed:function(a,b){var c=this;this.isLoggedIn()||this.capthas.login.checkedOnSHow||this._checkLoginCaptchaNeedRequest(function(d){d&&c._renderLoginCaptcha(a,b);c.capthas.login.checkedOnSHow=!0})},_checkLoginCaptchaNeedRequest:function(a){c.request({url:"ajax/profile/login_challenge_check"},function(b){"ok"===b.status?a(b.captchaChallenge):a(!1)})},showHasReservationLink:function(a){if(this.isLoggedIn()&&
"boolean"!==typeof this.data.hasReservation){var b=this;b.request("ajax/profile/has_relevant_reservation",{},function(c){c.hasReservation&&a.find(".my-reservations-link-container").show();b.data.hasReservation=c.hasReservation})}},showProfilePartnerInfo:function(){var c=a("header .show-profile-menu");if(c.length){var d=this,e="szallasguru"===b.get("siteNamespace")?b.CONSTANTS.DISPLAYABLE_SITE_NAME_GURU:b.CONSTANTS.DISPLAYABLE_SITE_NAME_DEFAULT,f="szallasguru"===b.get("siteNamespace")?b.CONSTANTS.DISPLAYABLE_SITE_NAME_DEFAULT:
b.CONSTANTS.DISPLAYABLE_SITE_NAME_GURU;e=TEXTS.get("profile.welcome_at_page",{siteName:e});var h='<div class="mb-5"><i>:firstLine</i></div><div>:secondLine</div>'.supplant({firstLine:TEXTS.get("profile.why_logged_in"),secondLine:TEXTS.get("profile.logged_in_elsewhere",{siteName:f})}),k=!1;c.one("contentset.bs.szallaspopover",function(a,b){b.tip().find(".close").one("click",function(){k=!0;d.request("ajax/profile/save_seen_merge_message",{})})}).on("hide.bs.szallaspopover",function(a){k||a.preventDefault()});
new g(c,{placement:"bottom",content:function(a){a(h)},title:"<strong>"+e+'</strong><span class="close pull-right">&times;</span>',html:!0,container:"body",trigger:"manual",show:!0})}},openContextMenu:function(){a("header .show-profile-menu").trigger("click")},setProfileLoginStatus:function(a){storage.local().set("profileManualLogin",a)},isLoggedIn:function(){return storage.local().get("profileManualLogin")},setAutoLogin:function(a){this._allowAutoLogin=a},updateBasicInfo:function(b){a.extend(!0,this.data.basicInfo,
b)},updateData:function(b){this.data=a.extend(!0,this.data,b);"undefined"!==typeof b.profileManualLogin&&this.setProfileLoginStatus(b.profileManualLogin)},profileId:function(){return this.data.profileId},basicInfo:function(){return this.data.basicInfo},favouriteCount:function(){return this.isLoggedIn()?this.data.favouriteCount:0},hasFacebookAccount:function(){return this.isLoggedIn()&&!!this.data.hasFacebookAccount},isLoyaltyMember:function(){return this.isLoggedIn()&&!!this.data.isLoyaltyMember},
smallImage:function(){return this.isLoggedIn()&&this.data.smallImage?this.data.smallImage:null},isSubscribedTo:function(a){var b=this.get("subscribedList");return Array.isArray(b)?a in b:!1},isSubscribedWithSource:function(a){return!!this.get("subscribedListsSources")&&-1<this.get("subscribedListsSources").indexOf(a)},newsletterSeen:function(a){return!!this.get("newsletterSeen")[a]},get:function(a){return"undefined"!=typeof this.data[a]?this.data[a]:""},autoLoginInit:function(){initq.register("global",
function(){a(function(){var a=storage.local().get("profileAutologinStatus"),b=storage.local().get("profileNextAutologin"),c=Math.floor(Date.now()/1E3);ProfileObject.isLoggedIn()||a&&(!b||c<b)&&ProfileObject.setAutoLogin(!1)})})},showLoginModal:function(){a("#login-modal").modal("show")},closeLoginModal:function(){a("#login-modal").modal("hide")},resetLoginModal:function(){var b=a("#login-modal");b.find(".registration").addClass("hidden");b.find(".forgotten-password").addClass("hidden");b.find(".login").removeClass("hidden");
b.find("form.registration-form")[0].reset();this.validators.registrationValidator.resetElements();this.validators.loginValidator.resetElements();b.find(".forgotten-password-email").val("");this.validators.forgottenPasswordValidator.resetElements();b.find(".forgotten-password-response").hide().removeClass("callout-success callout-danger");(b=b.find(".registration-email").data("emailCorrector"))&&b.hideCorrector()}};return new k}(jQuery);window.ProfileObject=ProfileObject;
var $$$module$common$time_on_page=jQuery,_DEBUG$$module$common$time_on_page=!1,TimeOnPageTrackerClass$$module$common$time_on_page=function(){this._focused=null;this._focusedTime=0;this._focusStateStart=Math.floor(Date.now()/1E3);this._handlers=null;this._pageLeaveUserData={};var a=this;$$$module$common$time_on_page(function(){a._startup()})};TimeOnPageTrackerClass$$module$common$time_on_page.prototype.addUserData=function(a){$$$module$common$time_on_page.extend(this._pageLeaveUserData,a)};
TimeOnPageTrackerClass$$module$common$time_on_page.prototype._startup=function(){this._handlers={_beforeUnload:this._pageLeft.bind(this),_focus:this._windowFocus.bind(this),_blur:this._windowBlur.bind(this)};$$$module$common$time_on_page(window).on("beforeunload",this._handlers._beforeUnload);$$$module$common$time_on_page(window).on("focus",this._handlers._focus);$$$module$common$time_on_page(window).on("blur",this._handlers._blur)};
TimeOnPageTrackerClass$$module$common$time_on_page.prototype._shutdown=function(){this._handlers&&($$$module$common$time_on_page(window).off("beforeunload",this._handlers._beforeUnload),$$$module$common$time_on_page(window).off("focus",this._handlers._focus),$$$module$common$time_on_page(window).off("blur",this._handlers._blur),this._handlers=null)};
TimeOnPageTrackerClass$$module$common$time_on_page.prototype.debugDump=function(){_DEBUG$$module$common$time_on_page&&(console.group(" --- TimeOnPageTracker debug dump ---"),console.log("State: %s",this._handlers?"Running":"Stopped"),console.log("Focus State: %s",null===this._focused?"(Unknown)":this._focused?"Focused":"Blurred"),console.log("Focus time so far: %s",this._focusedTime),console.log("Current state entered at: %s",new Date(1E3*this._focusStateStart)),console.groupEnd())};
TimeOnPageTrackerClass$$module$common$time_on_page.prototype._updateFocus=function(a){_DEBUG$$module$common$time_on_page&&console.log("[TimeOnPageTracker] Focus state changed to %s",a);var b=Math.floor(Date.now()/1E3);a||(this._focusedTime+=b-this._focusStateStart);this._focused=a;this._focusStateStart=b};TimeOnPageTrackerClass$$module$common$time_on_page.prototype._windowFocus=function(){this._updateFocus(!0)};TimeOnPageTrackerClass$$module$common$time_on_page.prototype._windowBlur=function(){this._updateFocus(!1)};
TimeOnPageTrackerClass$$module$common$time_on_page.prototype._pageLeft=function(){null!==this._focused&&this._windowBlur();this._shutdown();if(1==ProfileObject.get("profileTracking")&&ProfileObject.profileId()){var a={timestamp:siteObject$$module$common$site.get("loadTimestamp"),focusedTime:null!==this._focused?this._focusedTime:-1};$$$module$common$time_on_page.extend(a,this._pageLeaveUserData);if("undefined"!==typeof performance&&"undefined"!==typeof performance.timing){var b=performance.timing;
a.perf={dns:b.domainLookupEnd-b.domainLookupStart,ttfb:b.responseStart-b.requestStart,recv:b.responseEnd-b.responseStart,"dom.interactive":b.domInteractive?b.domInteractive-b.domLoading:null,"dom.loaded":b.domContentLoadedEventStart?b.domContentLoadedEventStart-b.domLoading:null,"dom.complete":b.domComplete?b.domComplete-b.domLoading:null,"dom.loadEvent":b.domContentLoadedEventEnd?b.domContentLoadedEventEnd-b.domContentLoadedEventStart:null,load:b.loadEventStart?b.loadEventStart-b.domLoading:null,
loadEvent:b.loadEventEnd?b.loadEventEnd-b.loadEventStart:null};b.secureConnectionStart?(a.perf.tcp=b.secureConnectionStart-b.connectStart,a.perf.ssl=b.connectEnd-b.secureConnectionStart):(a.perf.tcp=b.connectEnd-b.connectStart,a.perf.ssl=0)}a=jQuery.param(a);_DEBUG$$module$common$time_on_page&&console.log("[TimeOnPageTracker] Sending tracking beacon",a);navigator.sendBeacon?navigator.sendBeacon("/ajax/profile/leave_page",a):$$$module$common$time_on_page.ajax({url:"/ajax/profile/leave_page",data:a,
method:"post"})}};var TimeOnPageTracker$$module$common$time_on_page=new TimeOnPageTrackerClass$$module$common$time_on_page,module$common$time_on_page={TimeOnPageTracker:TimeOnPageTracker$$module$common$time_on_page};
var $$$module$common$general=jQuery,General$$module$common$general=function(){var a=this;$$$module$common$general(function(){a.init()})};General$$module$common$general.prototype.init=function(){this.facebookPopoverInit(".social-icons .social-facebook");this.initCookieConsent();this.initDatepicker();this.initBeforeAjaxSend();this.initSummerMagicModal();this.initOldieBrowserModal();this.initCampaignLinkTracking();this.initTrackings();this.gTranslatorListener()};
General$$module$common$general.prototype.initOldieBrowserModal=function(){!$$$module$common$general.cookie("oldieModal")&&siteObject$$module$common$site.get("isIE9")&&($$$module$common$general(".oldie-details").szallasModal("show"),$$$module$common$general.cookie("oldieModal",!0,{expires:1}))};
General$$module$common$general.prototype.initDatepicker=function(){$$$module$common$general.fn.datepicker&&"undefined"!==typeof $$$module$common$general.fn.datepicker.dates.hu&&($$$module$common$general.fn.datepicker.dates.hu.daysShort="vas hÃ©t kedd sze csÃ¼ pÃ©n szo".split(" "))};General$$module$common$general.prototype.initBeforeAjaxSend=function(){$$$module$common$general.ajaxSetup({beforeSend:function(a){a.setRequestHeader("x-page-type",siteObject$$module$common$site.get("pageType"))}})};
General$$module$common$general.prototype.initSummerMagicModal=function(){$$$module$common$general(".show-summer-magic-modal").one("loaded.bs.modal",function(a,b){var c=b.getModalElement();c.on("click",".more-video",function(){var a=c.find(".summer-promo-video");a.fadeTo("fast",.2,function(){var b=a.find("iframe");b.toggle();$$$module$common$general.each(b,function(a,b){b.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")});a.fadeTo("fast",1)})});a=b.getSourceElement().data("placement");
TrackingService$$module$measurement.event("summer-promo-2017","modal-open",a)})};
General$$module$common$general.prototype.facebookPopoverInit=function(a){if("undefined"!==typeof $$$module$common$general.fn.tooltip.Constructor.VERSION){var b=$$$module$common$general(a);if(b.length){b.each(function(a,c){c=$$$module$common$general(c);a=b.data();var d=a.className?a.className:"",e={share:a.share?a.share:"false"};a.actualUrl&&(e.url="");new SzallasPopover$$module$common$popover(c,{html:!0,animation:!0,placement:"right",container:"body",template:'<div class="popover popover-fb-like-box'+
d+'"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>',viewport:c.closest("#header").length?"#header":"body",content:'<div class="fb-popover"><span class="close fb-popover-close">Ã—</span>'+SzallasFB$$module$common$szallas_fb.likeButton(e)+"</div>"})});var c=function(a){0===$$$module$common$general(b).has(a.target).length&&$$$module$common$general(b)[0]!=a.target&&(b.data("bs.szallaspopover").hide(),$$$module$common$general(document).off("click",
c))};b.on("shown.bs.szallaspopover",function(){var a=$$$module$common$general(this).data("bs.szallaspopover");SzallasFB$$module$common$szallas_fb.api("renderElement").done(function(){a.refreshPositions()});$$$module$common$general(document).on("click",c)});$$$module$common$general(".social-icons").on("click",".fb-popover-close",function(){b.data("bs.szallaspopover").hide()})}}};
General$$module$common$general.prototype.initCookieConsent=function(){var a=this;if(!$$$module$common$general.cookie("acceptedCookie")&&-1===["reservHotel","reservRequest","couponPurchase","reserveVoucher"].indexOf(siteObject$$module$common$site.get("pageType"))&&window.self===window.top){var b=$$$module$common$general(".cookie-consent-block"),c=$$$module$common$general("footer"),d=c.css("marginBottom");b.show();var e=function(){$$$module$common$general("body").hasClass("list_type_map")?767<window.innerWidth?
$$$module$common$general(".cookie-consent-block").css("bottom","35px"):$$$module$common$general(".cookie-consent-block").css("bottom","20px"):c.css("marginBottom",b.outerHeight(!0)+5)};e();$$$module$common$general(window).on("resize.cookie",function(){e()});b.on("click",function(){a.setCookieConsent(b,c,d)});document.addEventListener("visibilitychange",function(){$$$module$common$general.cookie("acceptedCookie")&&b.remove()})}};
General$$module$common$general.prototype.setCookieConsent=function(a,b,c){a.remove();b.css("marginBottom",c);$$$module$common$general(window).off("resize.cookie");$$$module$common$general.cookie("acceptedCookie",!0,{path:"/",expires:3650});Common$$module$common$common.request({url:"ajax/cookie-consent-done"})};
General$$module$common$general.prototype.initCampaignLinkTracking=function(){var a=$$$module$common$general(".footer-link-satisfaction");if(0!==a.length)a.on("click",function(){TrackingService$$module$measurement.event("footer","linkClick","100guarantee",1)})};General$$module$common$general.prototype.initTrackings=function(){var a=$$$module$common$general(".footer-club-link");if(a)a.on("click",function(){TrackingService$$module$measurement.event("footer","linkClick","szallasKlub",1)})};
General$$module$common$general.prototype.gTranslatorListener=function(){new GoogleTranslator$$module$common$googletranslator};new General$$module$common$general;var module$common$general={};
var $$$module$newsletter=jQuery,NewsletterClass$$module$newsletter=function(){this.TYPE_GURU_DEFAULT="szg_default";this.LIST_GURU="szallasguruhu";this.LIST_NOCLEG="noclegurupl";this.init()};NewsletterClass$$module$newsletter.prototype.init=function(){var a=this;$$$module$newsletter(function(){a.eventListener()})};
NewsletterClass$$module$newsletter.prototype.eventListener=function(){var a=this;$$$module$newsletter(document).on("loaded.bs.modal",".show-newsletter-modal",function(b,d){"undefined"===typeof $$$module$newsletter(this).data("alreadyLoaded")?(a.formInit(d.getModalElement()),$$$module$newsletter(this).data("alreadyLoaded",!0)):a.resetForm(d.getModalElement())});var b=$$$module$newsletter(".newsletter-subscribe");a.formHandler(b);this.initCampaingTracking()};
NewsletterClass$$module$newsletter.prototype.formInit=function(a){this.formHandler(a);this.resetForm(a);this.loginHelpers(a)};
NewsletterClass$$module$newsletter.prototype.resetForm=function(a){a.find("form").length&&(a.find(".newsletterSuccess, .newsletterError").hide(),a.find(".newsletterForm").show(),a.find(".login-menu-btn").toggle(!ProfileObject.isLoggedIn()),a.find(".btn-login-fb").toggle(!ProfileObject.hasFacebookAccount()),a.find("form")[0].reset(),a.find(".corrector").hide(),this.fields.firstName.validateReset(),this.fields.lastName.validateReset(),this.fields.email.validateReset(),this.fields.privacy.validateReset(),
ProfileObject.isLoggedIn()&&this.formHelperFill(ProfileObject.basicInfo()))};
NewsletterClass$$module$newsletter.prototype.subscribeAjax=function(a){var b=this;"object"===typeof a.newsletterName&&(a.newsletterNames=a.newsletterName,delete a.newsletterName);var c=a.newsletterName;c&&0<c.indexOf(";")&&(a.newsletterNames=c.split(";"),delete a.newsletterName);this.request({data:JSON.stringify(a),success:function(c){"OK"===c.STATUS?"undefined"!==typeof c.REASON&&"EXIST"===c.REASON?a.status("exist"):(a.status("ok"),c=$$$module$newsletter("[name=gameId]"),c.length&&c.val().length&&
"flexi_cuopon"!==a.newsletterSourceName&&b.subscribeGame()):a.status("error")}})};
NewsletterClass$$module$newsletter.prototype.subscribeGame=function(){Common$$module$common$common.request({url:"ajax/prize_games",data:JSON.stringify({answer:!1,firstName:$$$module$newsletter("#firstName").val(),lastName:$$$module$newsletter("#lastName").val(),email:$$$module$newsletter("#email").val(),condition:!0,profileDatas:{},generatedHash:null,fbShared:!1,emailSent:!1,step:"step1",gameId:$$$module$newsletter("[name=gameId]").val(),smsCode:null})})};
NewsletterClass$$module$newsletter.prototype.subscribe=function(a){this.subscribeAjax({firstName:a.firstName.val(),lastName:a.lastName.val(),email:a.email.val(),ch_ok:"true"===a.privacy.val()?"true"===a.privacy.val():a.privacy.val(),newsletterSourceName:a.newsletterSource.val(),newsletterName:a.newsletterName.val(),status:a.status})};
NewsletterClass$$module$newsletter.prototype.formHelperFacebookButtonBox=function(a){var b=arguments,c=this;if(a.length)if(Common$$module$common$common.isInViewport(a)||SzallasFB$$module$common$szallas_fb.isFbLoaded()){var d=SzallasFB$$module$common$szallas_fb.likeButton({width:a.width()});a.append(d);SzallasFB$$module$common$szallas_fb.api("renderElement",a[0])}else $$$module$newsletter(document).one("fb.loaded",function(){c.formHelperFacebookButtonBox.apply(c,b)})};
NewsletterClass$$module$newsletter.prototype.formHelperFill=function(a){var b=function(a,b){b&&a.val(b).trigger("change")};b(this.fields.firstName,a.firstName);b(this.fields.lastName,a.lastName);b(this.fields.email,a.email)};
NewsletterClass$$module$newsletter.prototype.formHelperInitValidation=function(a){var b=this;this.fields.lastName.validate({validate:function(a,d){b.ajaxCheck({ajaxData:{lastName:a},process:d,url:"ajax/newsletterup"},!0)}});this.fields.firstName.validate({validate:function(a,d){b.ajaxCheck({ajaxData:{firstName:a},process:d,url:"ajax/newsletterup"},!0)}});this.fields.email.validate({validate:function(a,d){b.ajaxCheck({ajaxData:{email:a},process:d,url:"ajax/newsletterup"},!0)}});this.fields.privacy.validate({validate:function(a,
b,e){return e.is(":checked")||"true"===e.val()?b(!0):b(TEXTS.get("newsletter.policyError"))},container:a.find(".newsletter-privacy-block"),icon:!1,border:!1,run:!1})};NewsletterClass$$module$newsletter.prototype.validate=function(){this.fields.privacy.validateOption({run:!0});for(var a=!0,b=[this.fields.lastName.isValid(!0),this.fields.firstName.isValid(!0),this.fields.email.isValid(!0),this.fields.privacy.isValid(!0)],c=0;c<b.length;c++)!1===b[c]&&(a=a&&b[c]);return a};
NewsletterClass$$module$newsletter.prototype.formHandler=function(a){var b=this,c=a.find(".callout-header"),d=a.find(".newsletterForm"),e=d.find(".newsletterPopupLast"),f=d.find(".newsletterPopupFirst"),g=d.find(".newsletterPopupEmail"),h=d.find(".newsletterPopupPP"),k=d.find(".newsletterSubmit"),l=a.find(".newsletterError"),n=a.find(".trust-text"),p=a.find(".newsletterSuccess"),m=1===a.closest(".modal").length,u=d.hasClass("static-page"),q=d.find(".pageTypename").val();this.fields={firstName:f,lastName:e,
email:g,privacy:h};this.inProgress=!1;siteObject$$module$common$site.isMobile()||this.formHelperFacebookButtonBox(c);this.formHelperInitValidation(d);g.on("keypress",function(){l.is(":visible")&&l.fadeOut()});k.on("click",function(a){a.preventDefault();TrackingService$$module$measurement.event("newsletterPopup",m||u?"send":"footerSend");b.inProgress=!0;a=b.validate();b.inProgress=!1;if(!a)return!1;var c=function(){$$$module$newsletter(".newsletter-subscribe-form .quarter-offer").removeClass("inactive")};
b.subscribe({firstName:f,lastName:e,email:g,privacy:h,newsletterSource:d.find(".newsletterSource"),newsletterName:d.find(".newsletterName"),status:function(a){"ok"===a?(c(),p.find(".user-email-holder").text(g.val()),d.hide(),n.hide(),p.show(),l.hide(),d.find(".login-menu-btn, .btn-login-fb").hide(),TrackingService$$module$measurement.event("newsletterPopup",q?q:m?"successful":"footerSuccessful")):"exist"===a&&(c(),TrackingService$$module$measurement.event("newsletterPopup",m?"exist":"footerExist"),
l.show())}})})};NewsletterClass$$module$newsletter.prototype.newsletterFormToFooter=function(){var a=this,b=$$$module$newsletter("#newsletterFooterContainer");b.length&&this.request({url:"ajax/newsletter_modal",data:JSON.stringify({checkTerms:{rules:["cookie"]}}),success:function(c){"ok"===c.status&&(b.html(c.html),b.find('[rel="tooltip_top"]').tooltip({placement:"top",html:!0}),a.formInit(b.find(".panel-body")))}})};
NewsletterClass$$module$newsletter.prototype.loginHelpers=function(a){var b=this,c=a.find(".login-menu-btn"),d=a.find(".btn-login-fb");ProfileObject.popoverMenuInit(c);c.on("contentset.bs.szallaspopover",function(a,c){c.tip().on("profile.loginSuccess",function(){b.formHelperFill(ProfileObject.basicInfo());c.tip().hide()})});$$$module$newsletter(document).on("profile.logoutSuccess",function(){b.resetForm(a);c.show();d.show()});$$$module$newsletter(document).on("profile.loginSuccess",function(){b.resetForm(a);
c.hide();ProfileObject.hasFacebookAccount()&&d.hide()});var e=function(a,b){a instanceof $$$module$newsletter||(a=$$$module$newsletter(a));if(a.length)if(b&&""!=b)a.val(b).trigger("change");else a.addClass("social-fill-no-result").one("change blur",function(){a.removeClass("social-fill-no-result")})};d.on("click",function(a){a.preventDefault();var b=$$$module$newsletter(this);b.addClass("in-progress disabled");SzallasFB$$module$common$szallas_fb.getRenderedProfile(function(a){a.error||(e(".newsletterPopupFirst",
a.firstName),e(".newsletterPopupLast",a.lastName),e(".newsletterPopupEmail",a.email));b.removeClass("in-progress disabled")})})};NewsletterClass$$module$newsletter.prototype.request=function(a,b){$$$module$newsletter.ajax($$$module$newsletter.extend(!0,{type:"post",url:void 0===b?"ajax/newsletterup":b,contentType:"application/json; charset=utf-8",dataType:"json"},a))};
NewsletterClass$$module$newsletter.prototype.ajaxCheck=function(a,b){if("object"!==typeof a||"object"!==typeof a.ajaxData||"string"!==typeof a.url)return a.process(!1),null;var c=a.ajaxData,d="function"===typeof a.errorCallback?a.errorCallback:function(){};this.request({url:a.url,async:"undefined"===typeof b?!0:b,data:JSON.stringify(c),success:function(b){$$$module$newsletter.each(c,function(a){c[a]=!0});"ERROR"===b.STATUS&&"undefined"!==typeof b.RESULTS&&$$$module$newsletter.each(c,function(d){d=
"undefined"!==typeof a.propertyToCheck?a.propertyToCheck:d;"undefined"!==typeof b.RESULTS[d]&&(c[d]=b.RESULTS[d][0])});1<Object.keys(c).length?a.process(c):$$$module$newsletter.each(c,function(b){a.process(c["undefined"!==typeof a.propertyToCheck?a.propertyToCheck:b])});if("function"===typeof a.onAjaxSuccess)a.onAjaxSuccess(b)},error:d});return null};
NewsletterClass$$module$newsletter.prototype.initCampaingTracking=function(){var a=$$$module$newsletter(".newsletter-unsubscribe-link");if(0!==a.length)a.on("click",function(){TrackingService$$module$measurement.event("listHotel","brand1CampaignBannerClick","hirlevel-leiratkozas",1)})};var Newsletter$$module$newsletter=new NewsletterClass$$module$newsletter,module$newsletter={Newsletter:Newsletter$$module$newsletter};
(function(a,b,c,d){function e(b,c){this.element=b;this._options=c;this._defaults=this.getDefaultsOptions();this.options=a.extend(!0,{},this._defaults,c);this.queue=null;this._name="travellers";this.before();this.init(!0,!0)}var f=function(){},g=getModule("common/site").siteObject,h=getModule("common/history_service").HistoryService,k=getModule("common/popover").SzallasPopover;e.prototype={before:function(){var b=this;this.travellerId=a.fn.travellers.defaults.id++;this.isVoucherReservation="reserveVoucher"===
g.get("pageType");this.options.container&&1==a(this.options.container).length?this.traveller=this.options.container:this.traveller=this.element;"popup"==this.options.mode&&(this.popup=a(this.getDefaultsOptions().popupLayout),this.popupPlace(),this.popupEvents(),a(this.traveller).click(function(){b.togglePopup()}));a.fn.travellers.cache===d&&(a.fn.travellers.cache=[]);var c="popup"==this.options.mode?this.popup:this.traveller;a(b.element).trigger("beforeInit",[c,this]);a.fn.travellers.cache.push(this);
this.autoClosePopup()},init:function(c,d,e){"boolean"!==typeof d&&(d=!1);this.options.debug&&(console.log("init: ",this.options.name||""),console.log("init: ",this.options.name||"",this.options));d=this.render(c,d);c&&(this.setEditInPlace(),this.queue=a.extend(!0,{},this.options));"inline"==this.options.mode&&(a(this.traveller).html(d),this.afterRendering(this.traveller,e),this.popupEvents());"popup"==this.options.mode&&(this.popup.find(".travellers-popup-content").html(d),this.afterRendering(this.popup,
e),this.popupEvents(),-1<this.getLastFocusedAgeIndex()&&this.popup.find(".ages-container").find(".child-age-block").eq(this.getLastFocusedAgeIndex()).find(".input-childage").focus());a(this.element).trigger("afterRenderTraveller",[d,this]);var f=this;b.setTimeout(function(){f.setGuestCapacity()},5)},afterRendering:function(b,c){a(b).find('[rel="tooltip"]').tooltip().on("show",function(a){a.stopPropagation()}).on("hide",function(a){a.stopPropagation()});"undefined"!==typeof c&&c.elements.childAges&&
(b=c.elements.childAges.find("input:visible"),a.each(b,function(b,c){if(!a(c).isValid()||""==c.value)return a(c).focus(),!1}))},getElement:function(){return this.element},getViewMode:function(){return this.options.mode},getTotalGuests:function(){var b=0,c=0,d=[],e=this.getRoomTypes();a.each(e,function(a,e){b+=e.guestCount;c+=e.childAges.length;d=d.concat(e.childAges)});return{isValid:this.isValid(),rooms:this.getRoomTypes(),totalGuestCount:parseInt(b),totalChildCount:parseInt(c),totalChildAges:d,
roomCount:parseInt(this.options.roomCount)||null}},setEditInPlace:function(){if(this.options.editInPlace){var c="undefined"!==typeof this.options.editInPlace.targetElement?this.options.editInPlace.targetElement:this.element;"function"==typeof c&&(c=c(this));c instanceof a||(c=a(c));if("undefined"!=typeof this.options.editInPlace.displayFormat){var d=this.options.editInPlace.displayFormat;if("function"===typeof d)d=d(this);else{var e=this.options.details[0];d=d.supplant({adults:e.guestCount,guestcount:e.guestCount,
childcount:e.childAges.length,roomcount:this.options.roomCount})}d=a(d);d.find("[rel=tooltip]").tooltip().on("show",function(a){a.stopPropagation()}).on("hide",function(a){a.stopPropagation()});c.html(d);"undefined"!==typeof b.Prototype&&b.$$("#travelers-number [rel=tooltip], .travellers-popup [rel=tooltip]").each(function(a){a.hide=function(){}})}}},showPopup:function(){a(this.traveller).after(this.popup);this.init();a(this.popup).show();a(this.element).trigger("show.travellers").addClass("active")},
hidePopup:function(){if("popup"==this.options.mode){if(this.getChildAgeChanged()){var b=this.getOptions().roomTypes,c=Object.keys(b);if(c.length)this.travellerChange(b[c[0]]);else throw Error("The roomType attribute of the plugin named '"+this.getOptions().name+"' has not found.");}this.popup.remove();this.isGlobal()&&(this.setRequestedChildCount(-1),this.setChildAgeChanged(!1));this.options.useCommitBtn&&(this.options=a.extend(!0,{},this.queue))}a(this.popup).hide();a(this.element).trigger("hide.travellers").removeClass("active")},
togglePopup:function(){this.popup.is(":visible")?this.hidePopup():(a(this.popup).css("position",""),this.showPopup(),this.popupPlace(),a(".traveller-ok-btn").focus())},popupEvents:function(){var b=this;a(this.popup).find("[data-dismiss=close]").off("click").click(function(){if(a(this).hasClass("btn")&&!b.isValid(!0))return!1;b.queue=a.extend(!0,{},b.options);"popup"===b.getOptions().mode&&b.getOptions().useCommitBtn&&(b.isGlobal()&&(b.setGlobalVars(b.getTotalGuests().rooms[0]),b.setGlobalTravellers(),
b.setLastFocusedAgeIndex(-1),a("body").trigger("setGlobalTravellers",[b.getTotalGuests(),b])),a(b.element).trigger("setTravellers",[b.getTotalGuests().rooms[0],b]),b.setEditInPlace());b.togglePopup()})},getPosition:function(){var b=this.element;return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},a(this.element).offset())},popupPlace:function(){var b=this.getPosition(),c=a(this.popup).outerWidth();b={top:b.top+b.height+
7,left:b.left+b.width/2-c/2};a(this.popup).offset(b)},getOptions:function(){return this.options},getRoomDetails:function(){return this.options.roomDetails},getRoomTypes:function(){return this.options.roomTypes},render:function(b,c){"boolean"!==typeof c&&(c=!1);this.options.debug&&console.log("render: ",this.options.name||"");b=this.getRoomTypes();var d="undefined"==typeof this.options.roomCount?Math.max(this.getRoomTypes().length,this.options.roomCount):this.options.roomCount;this.options.roomCount=
d;var e=this,f=a("<div/>",{"class":"guestselect-content"});e.options.showAllRoomTypes||(d=1);for(var g=0;g<d;g++)b[g]||(b[g]=this.options.roomDetails);d=a.Event("beforeRender");a(this.element).trigger(d,[f,e]);var h=null;e.options.showRoomCount&&(h=e.roomCount(),f.append(h));a.each(b,function(b,d){this.childCount||(this.childCount=this.childAges.length);this.getRoomDetails||(this.getRoomDetails=function(){return e.getRoomDetails()});d.roomTypeIndex=b;var g=a("<ul/>",{"class":"list-unstyled list-inline traveller-default"});
d.elements||(d.elements={});var l=e.guestCount(d,b),m=e.childCount(d,b),k=e.childAges(d,b),p=e.sameAges(d,b),n=e.log(d);c&&a.each(a(k).find("input"),function(){0!==a(this).val().length&&a(this).isValid(!0)});null!==h&&(d.elements.roomCount=h);d.elements.sameAges=p;var q=a("<li/>",{"class":"roomCountLabel",html:e.getRoomLabelHTML(b)});(!e.options.showRoomIndex||2>e.getRoomTypes().length)&&q.addClass("hide");g.append(q,l,m);d.elements.row=g;f.append(g,p,k,n);g=a(e.getOptions().layouts.agesBlock);0===
d.childCount&&g.addClass("hidden-element");a(k).add(p).wrapAll(g).parent().prepend(e.getOptions().layouts.agesHeader).append(e.getOptions().layouts.agesFooter);k=a.Event("afterRenderRow");a(e.element).trigger(k,[f,e,b,d])});d=a("<div/>",{"class":"guestselect-container "+(e.options.guestSelectContainerClass||""),html:f});this.renderTravellerInfo(b,d);this.setGuestCapacity();return d},getSameAgesState:function(){return this.isGlobal()?a.fn.travellers.defaults.globalVars.sameAges.isSelected:this.options.sameAges.isSelected},
setSameAgesState:function(b){b="boolean"==typeof b?b:!1;this.isGlobal()&&(a.fn.travellers.defaults.globalVars.sameAges.isSelected=b);this.options.sameAges.isSelected=b},getSameAge:function(){return this.options.global?a.fn.travellers.defaults.globalVars.sameAges.age:this.options.sameAges.age},setSameAge:function(b){"undefined"==typeof b||isNaN(b)||(this.isGlobal()&&(a.fn.travellers.defaults.globalVars.sameAges.age=b),this.options.sameAges.age=b)},getRequestedChildCount:function(){return this.isGlobal()?
a.fn.travellers.defaults.globalVars.requestedChildCount:this.options.requestedChildCount},setRequestedChildCount:function(b){"number"!==typeof b||isNaN(b)||(this.isGlobal()&&(a.fn.travellers.defaults.globalVars.requestedChildCount=b),this.options.requestedChildCount=b)},getLastFocusedAgeIndex:function(){return this.isGlobal()?a.fn.travellers.defaults.globalVars.lastFocusedAgeIndex:this.options.lastFocusedAgeIndex},setLastFocusedAgeIndex:function(b){"number"!==typeof b||isNaN(b)||(this.isGlobal()&&
(a.fn.travellers.defaults.globalVars.lastFocusedAgeIndex=b),this.options.lastFocusedAgeIndex=b)},getChildAgeChanged:function(){return this.isGlobal()?a.fn.travellers.defaults.globalVars.isChildAgeChanged:this.options.isChildAgeChanged},setChildAgeChanged:function(b){"boolean"===typeof b&&(this.isGlobal()&&(a.fn.travellers.defaults.globalVars.isChildAgeChanged=b),this.options.isChildAgeChanged=b)},log:function(b){return b.elements.log=a('<div class="traveller-log color-error"></div>')},info:function(){return a('<div class="traveller-info"></div>')},
sameAges:function(b){var c=this.getSameAgesState(),d=this.getSameAge(),e=this.options.layouts.sameAges,f=a(".same-ages").find(".child-age-block input");f=parseInt(f.val());isNaN(f)&&(f=1);e=e.replace(/:yeartext/g,TEXTS.plural("sza_room.year",f));var g=this,h=a(e);e=h.find(".child-age-block input");var l=h.find(".same-ages-checkbox"),k=h.find(".child-age-block"),w=this.getOptions().minChildAge;c&&(l.prop("checked",c),e.val(d));var A=function(c){var d=a(c).is(":checked"),e=b.elements.childAges,f=e.find(".input-childage");
g.setSameAgesState(a(c).is(":checked"));g.options.debug&&(console.log(g.getSameAgesState()),console.log(g.getSameAge()));d?(k.show(),e.hide()):(k.hide(),e.show());a.each(f,function(){a(this).validateReset()})};e.validate({validate:function(c,d,e){if(!a(e).is(":visible"))return!0;var f=[],h=b.elements.childAges.find("input"),m=a.Event("validateChildAge"),l=!0;a(g.element).trigger(m,[c,e,b,g.getRoomDetails()]);if("string"==typeof m.result||"boolean"==typeof m.result)l=m.result;else{e=g.getChildAgeRange(b,
0).fromAge;m=g.getChildAgeRange(b,0).toAge;var k=parseInt(c);if(isNaN(k))l=TEXTS.get("sza_room.enter_child_age");else if(k<w)l=TEXTS.get("sza_room.min_child_age",{age:w});else if(e>k||m<=k)l=TEXTS.get("sza_room.age_validation_error",{fromAge:e,toAge:m})}d(l);h.val(c);a.each(h,function(){var b=parseInt(a(this).val());f.push(b)});d(l);b.childAges=f;g.setSameAge(c);g.travellerChange(b);return l}});l.change(function(){var c=a(l).is(":checked");g.setSameAgesState(c);A(this,b)});g.isVoucherReservation?
a(h).empty():4>b.childCount?a(h).empty():g.getSameAgesState()||k.hide();e.on("change",function(){var b=parseInt(a(this).val());isNaN(b)&&(b=1);h.find(".guestselect-childage").html(TEXTS.plural("sza_room.year",b))});A(l);return h},checkChildAge:function(a,b){return!isNaN(parseInt(a))&&b.min<=a&&b.max>=a},getRoomCount:function(){return this.options.roomCount},roomCount:function(){var b=this.useIndex()?"roomtypes["+this.getTravellerId()+"][roomCount]":"roomtypes[roomCount]",c=this,d=a("<li/>",{"class":"room-container"});
b=a("<select/>",{"class":"roomCount input-room form-control",attr:{name:b}});for(var e='<option value="0">'+TEXTS.get("sza_room.best_room")+"</option>",f=1;10>=f;f++)e+='<option value="'+f+'" '+(this.options.roomCount==f?"selected":"")+">"+f+"&nbsp;"+TEXTS.plural("sza_room.room",f).toLowerCase()+"</option>";b.append(e);b.change(function(){var b=parseInt(a(this).val());isNaN(b)||(0==b&&(b=null),c.options.roomCount=b,c.travellerChange(null))});e=a("<span/>",{"class":"glyphicon glyphicon-key icon-general-key font-22",
rel:"tooltip","data-original-title":TEXTS.get("sza_room.room_count")});e=a("<label/>",{html:this.options.showSelectLabel?TEXTS.plural("sza_room.room",c.options.roomCount):"","class":"roomCountLabel"}).prepend(e);d.append(e);d.append(b);return a("<ul/>",{"class":"list-inline guestselect-details list-unstyled",html:d})},childAges:function(b,d){var e=this,f=a("<label/>").html(TEXTS.get("sza_room.age_title")),g=a("<div/>",{"class":"ages-container child-ages-container"}),h=this.getOptions().minChildAge;
a.cookie("erzsebet")&&(f=a("<label/>").html(TEXTS.get("sza_room.erzsebet_age_title")));b.childCount&&!this.options.showAgeLabel&&g.append(f);f={};for(var l=0;l<b.childCount;f={$jscomp$loop$prop$fromAge$173:f.$jscomp$loop$prop$fromAge$173,$jscomp$loop$prop$toAge$174:f.$jscomp$loop$prop$toAge$174},l++){var n=b.childAges[l];n=this.useIndex()?"roomtypes[:travellerId][childages][:index]":"roomtypes[childages][:index]";n=n.replace(/:index/g,l);n=n.replace(/:travellerId/g,this.travellerId+"|"+d);var y=this.options.layouts.childAge,
w="undefined"!==typeof b.childAges[l]?b.childAges[l]:"",A=parseInt(w),E=e.getChildAgeRange(b,l);f.$jscomp$loop$prop$fromAge$173=E.fromAge;f.$jscomp$loop$prop$toAge$174=E.toAge;y=this.options.showAgeLabel?y.replace(/:index/g,l+1+". "+this.options.ageLabelText):1===b.childCount?y.replace(/:index/g,""):y.replace(/:index/g,l+1+". ");isNaN(A)&&(A=1);y=y.replace(/:value/g,w);y=y.replace(/:yeartext/g,TEXTS.plural("sza_room.year",A));y=y.replace(/:travellerId/g,this.travellerId+"|"+d);y=y.replace(/:name/g,
n);y=y.replace(/:tabindex/g,10+l);y=y.replace(/:fromAge/g,f.$jscomp$loop$prop$fromAge$173);y=y.replace(/:toAge/g,f.$jscomp$loop$prop$toAge$174);y=y.replace(/:max/g,f.$jscomp$loop$prop$toAge$174);y=a(y);n=y.find("input");n.validate({value:function(a){return parseInt(a)},validate:function(c){return function(d,f,g,m,l){m=a(b.elements.childAges).find("input");var p=[],n=a.Event("validateChildAge"),q=!0,u=b.elements.log,v="";a.each(m,function(){0!==this.value.length&&!1!==a(this).data("validate")&&p.push(parseInt(a(this).val()))});
b.childAges=p;a(e.element).trigger(n,[d,g,b,e.getRoomDetails(),e]);if("string"==typeof n.result||"boolean"==typeof n.result)q=n.result;else{d=parseInt(d);if(isNaN(d))q=TEXTS.get("sza_room.enter_child_age");else if(d<h)q=TEXTS.get("sza_room.min_child_age",{age:h});else if(c.$jscomp$loop$prop$fromAge$173>d||c.$jscomp$loop$prop$toAge$174<=d)q=TEXTS.get("sza_room.age_validation_error",{fromAge:c.$jscomp$loop$prop$fromAge$173,toAge:c.$jscomp$loop$prop$toAge$174});!0===q&&(d=e.isValidRoom(b),"string"!=
typeof d&&d||(v=d,q=!1))}u.is(":empty")&&""!==v?(u.html(v),q=!1):""===v&&null!==l&&u.empty();new k(u.find("[data-toggle=szallasPopover]"));f(q);null!==l&&a.each(m,function(b,c){a(c).is(g)||""===c.value||(a(c).data("validate",null),a(c).isValid(!0))});l&&(e.setGuestCapacity(),"inline"===e.getOptions().mode&&e.travellerChange(b));return q}}(f)});n.off("blur");n.change(function(){a.each(a(b.elements.childAges).find("input"),function(b,c){0!==a(this).val().length&&(a(c).isValid(!0),e.setChildAgeChanged(!0))});
var c=parseInt(a(this).val());isNaN(c)&&(c=1);a(this).closest("div").find(".guestselect-childage").html("&nbsp;"+TEXTS.plural("sza_room.year",c))});n.on("keypress",function(b){if(13===b.which){b=a(this);var c=b.closest(".child-age-block").next(".child-age-block");0===c.length?b.trigger("blur"):c.find("input").trigger("focus");return!1}});n.on("focus",function(b){b=a(b.target).closest(".child-age-block").index(".child-age-block");"number"===typeof b&&e.setLastFocusedAgeIndex(b)}).on("blur",function(b){requestAnimationFrame(function(){a(c.activeElement).hasClass("input-childage")||
e.setLastFocusedAgeIndex(-1)})});g.append(y)}b.elements.childAges=g;this.getSameAgesState()&&g.hide();return g},useIndex:function(){return this.options.useIndex},getRoomLabelHTML:function(a){var b=this.getOptions().roomLabelHTML;a=TEXTS.get("sza_room.roomLabel").replace(/:index/,a+1);a=a.replace(/:roomTypeName/,this.getOptions().roomTypeName);return b.replace(/:roomLabel/,a)},updateRoomType:function(a){this.options.roomTypes=a;this.options.roomCount=a.length;this.setEditInPlace();this.init()},renderTravellerInfo:function(a,
b){if(a.length&&(a=this.getTravellerInfo())){var c=this.info();c.text(a);b.append(c)}},setGuestCapacity:function(){var b=this;this.getRoomTypes().length&&a.each(this.getRoomTypes(),function(c,d){c=a.Event("setGuestCapacity");a(b.element).trigger(c,[d]);if("object"===typeof c.result&&!isNaN(c.result.maxGuests)&&!isNaN(c.result.maxChild)){var e=d.elements.guestCount;d=d.elements.childCount;var f=e.find("option"),h=a(d).find("option");f.prop("disabled",!0).slice(0,c.result.maxGuests).prop("disabled",
!1);h.slice(1).prop("disabled",!0).slice(0,c.result.maxChild).prop("disabled",!1);b.isVoucherReservation&&(e.find("option[disabled]").remove(),a(d).find("option[disabled]").remove());if(!g.isMobile()&&d&&!b.isVoucherReservation){var l='<optgroup label=":label:"></optgroup>'.replace(/:label/,TEXTS.get("sza_room.too_many_persons"));e.find("optgroup").contents().unwrap();e=parseInt(f[f.length-1].value);c.result.maxGuests<e&&f.slice(c.result.maxGuests).wrapAll(l);d.find("optgroup").contents().unwrap();
c.result.maxChild<h.length&&h.slice(c.result.maxChild+1).wrapAll(l)}}})},travellerChange:function(b){if("popup"!==this.getOptions().mode||!this.getOptions().useCommitBtn){if(this.isGlobal()){this.setGlobalVars(b);this.setGlobalTravellers();var c=this.isCouple()?"yes":"no";TrackingService$$module$measurement.event("travellerChange","isCouple",c);a("body").trigger("setGlobalTravellers",[this.getTotalGuests(),this])}a(this.element).trigger("setTravellers",[b,this]);this.setEditInPlace()}},isCouple:function(){var a=
this.getGlobalVars();return 2>a.roomCount&&2===a.adults&&!a.childAges.length},childCount:function(b){var c=this.options.roomDetails,d=Math.min(c.maxTotalGuestCount-1,(c.childrenCount?c.maxTotalGuestCount:c.maxGuests)+c.childrenCount-1)||c.childrenCount;if(!d)return"";var e=this;c=a("<select/>",{"class":"childCount form-control"});for(var f="",g=0;g<=d;g++)f+='<option value="'+g+'" '+(b.childCount==g?"selected":"")+">"+g+"&nbsp;"+TEXTS.plural("sza_room.child",g).toLowerCase()+"</option>";c.append(f);
c.change(function(){var c=parseInt(a(this).val()),d=b.elements.childAges.find(".child-age-block");if(b.childCount=c)e.setRequestedChildCount(c),e.setLastFocusedAgeIndex(-1);c<d.length&&(d.slice(c).remove(),b.childAges.splice(c),e.travellerChange(b));5>c&&e.setSameAgesState(!1);e.init(!1,!0,b);e.isVoucherReservation&&a(".input-childage").isValid(!0)});d=a("<li/>",{"class":"child-container"});f=a("<span/>",{"class":"glyphicon glyphicon-child icon-general-child",rel:"tooltip","data-original-title":TEXTS.get("sza_room.children_count")});
f=a("<label/>",{html:this.options.showSelectLabel?TEXTS.plural("sza_room.child",b.childCount):"","class":"childCountLabel"}).prepend(f);d.append(f);d.append(c);b.elements.childCount=c;return d},guestCount:function(b,c){var e=this;c=this.useIndex()?"roomtypes["+this.getTravellerId()+"|"+c+"][guestcount]":"roomtypes[guestcount]";c=a("<select/>",{"class":"guestCount form-control",attr:{name:c}});b.elements.guestCount=c;var f=this.options.roomDetails.minGuests,g="",h=this.getRoomDetails();h=h.maxAdults||
h.maxGuests;if(f==d||1>f)f=1;for(var l=1;l<=h;l++)g+='<option value="'+l+'" '+(b.guestCount==l?"selected":"")+((l<f&&this.isVoucherReservation?"hidden":"")+">")+(l+" "+TEXTS.plural("sza_room.adult",l).toLowerCase()+"</option>");c.append(g);a(e.element).trigger(a.Event("travellers.renderingGuestCount"),[c,this]);c.change(function(){var c=parseInt(a(this).val());isNaN(c)||(b.adults=c,b.guestCount=c,e.setGuestCapacity(),e.init(!1,!0),e.travellerChange(b))});f=a("<li/>",{"class":"guest-container"});g=
a("<span/>",{"class":"glyphicon glyphicon-person icon-general-person",rel:"tooltip","data-original-title":TEXTS.get("sza_room.adult_count")});g=a("<label/>",{html:this.options.showSelectLabel?TEXTS.plural("sza_room.adult",b.adults):"","class":"guestCountLabel"}).prepend(g);f.prepend(g);f.append(c);return f},getDefaultsOptions:function(){return this.clone(a.fn.travellers.defaults)},isGlobal:function(){return this.options.global},setRoomCount:function(a,b){b=b===d?!0:b;var c={remove:[],add:[]},e=this.getRoomTypes();
if(a<this.options.roomCount)c.remove=e.slice(a),e.splice(a);else if(b)for(b=this.options.roomCount;b<a;b++){var f=this.clone(this.options.roomDetails);e.push(f);c.add.push(f)}this.options.roomCount=a;this.init();this.setEditInPlace();return c},getGlobalVars:function(){if(storage!==d){var a=sza.userSettings.children();return{adults:sza.userSettings.adults(),guestCount:sza.userSettings.adults(),roomCount:sza.userSettings.rooms(),childAges:a}}return null},setGlobalVars:function(a){if(this.options.global&&
storage!==d){var b=!isNaN(this.options.roomCount)&&0<this.options.roomCount?this.options.roomCount:null;sza.userSettings.beginChange();sza.userSettings.setRooms(b);null!==a&&(sza.userSettings.setAdults(a.guestCount),sza.userSettings.setChildren(a.childAges));sza.userSettings.endChange();b={rooms:b};null!==a&&(b.adults=a.guestCount,b.children=0<a.childAges.length?a.childAges.toString():null);h.replaceGetParams(b)}},getCachedTravellers:function(){a.fn.travellers.cache===d&&(a.fn.travellers.cache=[]);
return a.fn.travellers.cache},setGlobalTravellers:function(){if(this.isGlobal()){var b=this;a.each(this.getCachedTravellers(),function(c,d){d.isGlobal()&&d.options.id!==b.options.id&&(c=b.clone(b.getRoomTypes()),c=a.each(c,function(a,b){delete b.elements}),d.options.roomTypes=a.extend(!1,d.options.roomTypes,c),d.setEditInPlace(),d.init())})}},autoClosePopup:function(){var b=this;a("html").click(function(d){a.each(b.getCachedTravellers(),function(b,e){"popup"==e.getViewMode()&&(!a(e.popup).is(":visible")||
a(e.popup).is(d.target)||0!==a(e.element).has(d.target).length||0!==a(e.popup).has(d.target).length||a(c.activeElement).parents(".travellers-popup").length||a(e.element)[0]==d.target||e.hidePopup())})})},clone:function(b){return"object"!==typeof b?{}:a.extend(!0,{},b)},getTravellerId:function(){return this.travellerId},setOptions:function(b){if("object"==typeof b){a.extend(!0,this.options,b);var c=this.getRequestedChildCount();b.roomDetails&&b.roomDetails.childAges?b.roomDetails.childAges.length?
(this.options.roomDetails.childAges=b.roomDetails.childAges,this.options.roomDetails.childCount=-1<c?c:b.roomDetails.childAges.length):(this.options.roomDetails.childAges=[],this.options.roomDetails.childCount=0):this.options.roomDetails.childCount=-1<c?c:this.options.roomDetails.childAges.length}return this},restart:function(){this.options.debug&&console.log("restart: ",this.options.name||"");this.init(!0)},reset:function(a){this.options.debug&&(console.log("reset: ",this.options.name||""),console.log("reset: ",
this.options));this.options.roomTypes=[];"boolean"===typeof a&&a&&(this.options.roomDetails=this._defaults.roomDetails);this.restart()},getChildAgeRange:function(a,b){var c=a.childAgeRanges;a=0;var d=18;if(c){b=c[b+1];a=Object.keys(b).shift();a=b[a].minAge;d=0;for(var e in b)b.hasOwnProperty(e)&&b[e].maxAge>=d&&(d=b[e].maxAge)}return{fromAge:a,toAge:d}},areRoomChildAgesValid:function(b,c){if("undefined"==typeof b.elements)return!1;var d;b.elements.sameAges&&(d=b.elements.sameAges.find(".input-childage"));
b=d&&d.is(":visible")?d:b.elements.childAges.find(".input-childage").get().reverse();for(d=0;d<b.length;d++)if(!1===a(b[d]).isValid(c))return b[d].focus(),!1;return!0},isValidRoom:function(a){var b=a.getRoomDetails(),c=!0;if("undefined"!==typeof b.roomTypeId){for(var d=a.guestCount,e=a.childCount,f=0;f<a.childAges.length;f++)a.childAges[f]>=b.maxChildAge&&(d++,e--);b=b.maxAdults||b.maxGuests;d>b&&(a=a.getRoomDetails(),c=TEXTS.get("sza_room.traveller_maxguest_short_reason",{maxGuests:b,additionalGuests:a.maxTotalGuestCount-
b}),a=TEXTS.get("sza_room.traveller_maxguest_reason",{maxguest:b,totalmaxguest:a.maxTotalGuestCount,maxChildAge:a.maxChildAge}),c+='<span class="glyphicon glyphicon-info info-icon" data-container="body" data-toggle="szallasPopover" data-placement="top" data-trigger="hover" data-content="'+a+'"></span>')}return c},isValid:function(a){var b=this.getRoomTypes();a="boolean"==typeof a?a:!1;for(var c=0;c<b.length;c++){var d=b[c],e=!0===this.isValidRoom(d);if(!this.areRoomChildAgesValid(d,a)||!e)return!1}return!0},
getTravellerInfo:function(){var a=this.getOptions().travellerInfo;return"function"==typeof a?a():a},isActive:function(){return!!this.options.roomCount},getActiveRoomTypes:function(){return this.isActive()?this.options.roomTypes:[]},hasParent:function(){return!!this.parent}};a.fn.travellers=function(b){return this.each(function(){a.data(this,"travellers")||a.data(this,"travellers",new e(this,b))})};a.fn.travellers.defaults={debug:!1,parent:null,minChildAge:0,maxChildAge:18,roomTypes:[],roomDetails:{childrenCount:0,
childrenMinCount:0,roomTypeGuestCount:0,minGuests:1,maxGuests:10,adults:2,guestCount:2,childAges:[]},requestedChildCount:-1,lastFocusedAgeIndex:-1,isChildAgeChanged:!1,sameAges:{isSelected:!1,age:null},globalVars:{requestedChildCount:-1,lastFocusedAgeIndex:-1,isChildAgeChanged:!1,sameAges:{isSelected:!1,age:null}},roomLabelHTML:"<strong>:roomLabel</strong>",roomCount:null,mode:"inline",container:null,showRoomCount:!1,showRoomIndex:!0,showSelectLabel:!1,id:0,mame:null,useIndex:!1,onChange:f,onRender:f,
className:"",showAllRoomTypes:!0,useCommitBtn:!1,travellerInfo:null,showAgeLabel:!1,ageLabelText:"",layouts:{agesBlock:'<div class="ages-wrapper-container"></div>',agesHeader:"",agesFooter:"",childAge:'<div class="child-age-block control-group form-group"><label>:index</label><div class="inlineblock"><div class="controls"><input type="number" value=":value" min="0" max=":max" name=":name" class="input-childage form-control" maxlength="2" tabindex=":tabindex"><span class="guestselect-childage">:yeartext</span></div></div></div>',
sameAges:'<div class="ages-container same-ages"><label><input class="same-ages-checkbox" type="checkbox"> '+TEXTS.get("sza_room.sameages_text")+'</label><div class="child-age-block control-group form-group"><label>'+TEXTS.get("sza_room.age")+'</label><div class="inlineblock"><div class="controls"><input type="number" class="form-control input-childage" min="0" max="18" maxlength="2"><span class="guestselect-childage">:yeartext</span></div></div></div></div>'},popupLayout:'<div class="travellers-popup dropdown-menu"><div class="travellers-popup-title"><a data-dismiss="close" class="close text-decoration-none">Ã—</a></div><div class="travellers-popup-content"></div><div class="travellers-popup-footer padding-10 clearfix"><a class="traveller-ok-btn btn btn-default pull-right" data-dismiss="close">'+
TEXTS.get("sza_room.ok")+"</a></div></div>",global:!1,modalFrame:'<div class="modal fade hotelpage-traveller-modal" id=":id" tabindex="-1" role="dialog" aria-labelledby="modalSideMenu" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"></div></div></div></div>'}})(jQuery,window,document);var module$szallas_travellers={};
var $$$module$profile$automerge=jQuery,DEBUG$$module$profile$automerge=!1,ProfileAutoMerge$$module$profile$automerge=function(){var a=this;$$$module$profile$automerge(function(){a._init()})};
ProfileAutoMerge$$module$profile$automerge.prototype._shouldRequestMerge=function(){var a=storage.local().get("profileAutoMergedProfile");if(siteObject$$module$common$site.get("siteDomain")!==document.domain)return DEBUG$$module$profile$automerge&&console.log("[automerge] Cannot merge, running on external domain"),!1;if(ProfileObject.get("mergeDomain")){if(a){if(ProfileObject.profileId()&&a!=ProfileObject.profileId())return DEBUG$$module$profile$automerge&&console.log("[automerge] Merge was done for profile "+
a+", now using "+ProfileObject.profileId()),!0;DEBUG$$module$profile$automerge&&console.log("[automerge] Profile was already merged");return!1}DEBUG$$module$profile$automerge&&console.log("[automerge] No merge has been attempted yet");return!0}DEBUG$$module$profile$automerge&&console.log("[automerge] Cannot merge, no merge site available");return!1};
ProfileAutoMerge$$module$profile$automerge.prototype._requestMerge=function(){ProfileObject.get("mergeDomain")&&$$$module$profile$automerge.ajax({url:"https://"+ProfileObject.get("mergeDomain")+"/ajax/profile/remote-merge",method:"post",dataType:"json",contentType:"application/json",data:JSON.stringify({cookie:jQuery.cookie("__pid")}),xhrFields:{withCredentials:!0},success:function(a){DEBUG$$module$profile$automerge&&console.log("[automerge] Merge succeeded",a);"undefined"!==typeof a.newCookie&&(DEBUG$$module$profile$automerge&&
console.log("[automerge] Updating login cookie: ",a.newCookie),$$$module$profile$automerge.removeCookie("__psid",{path:"/"}),$$$module$profile$automerge.cookie("__pid",a.newCookie,{expires:3650,path:"/"}));storage.local().set("profileAutoMergedProfile",ProfileObject.profileId());a.contextMenu&&ProfileObject.replaceContextMenu($$$module$profile$automerge("header .profile-context-menu"),"header .show-profile-menu",a.contextMenu);a.profileData&&ProfileObject.updateData(a.profileData);a.showProfilePartnerInfo&&
ProfileObject.showProfilePartnerInfo()},error:function(){DEBUG$$module$profile$automerge&&console.log("[automerge] Merge request failed");storage.local().set("profileAutoMergedProfile",ProfileObject.profileId())}})};
ProfileAutoMerge$$module$profile$automerge.prototype._initMergePushListener=function(){if(ProfileObject.get("mergeDomain"))$$$module$profile$automerge(document).on("profile.loginSuccess",function(){$$$module$profile$automerge.ajax({url:"https://"+ProfileObject.get("mergeDomain")+"/ajax/profile/remote-merge",method:"post",dataType:"json",contentType:"application/json",data:JSON.stringify({cookie:$$$module$profile$automerge.cookie("__pid"),push:!0}),xhrFields:{withCredentials:!0},success:function(){DEBUG$$module$profile$automerge&&
console.log("[automerge] Merge push request success")},error:function(){DEBUG$$module$profile$automerge&&console.log("[automerge] Merge push request failed")}})})};ProfileAutoMerge$$module$profile$automerge.prototype._init=function(){DEBUG$$module$profile$automerge&&console.log("[automerge] Init");this._shouldRequestMerge()&&this._requestMerge();this._initMergePushListener()};new ProfileAutoMerge$$module$profile$automerge;var module$profile$automerge={};
if (typeof initq != 'undefined') initq.loaded("profile_favourite_plugin.js");if (typeof initq != 'undefined') initq.loaded("layout_bs3.js");