function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,n){var r={id:"",version:1},i=function(e){return null!=e&&""!==e},o=function(){return 1*new Date},a=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))},u=function(){return"ontouchstart"in t},c=function(){return e.navigator.userAgent},s=function(){return e.navigator.oscpu||e.navigator.platform},l={prefix:function(){return"__thoughtmetric_"},set:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a="";if(i(r)){var u=new Date;u.setTime(u.getTime()+60*r*1e3),a="; expires="+u.toGMTString()}t.cookie=this.prefix()+e+"="+n+a+"; path="+o},get:function(e){e=this.prefix()+e+"=";for(var n=t.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}},getNoPrefix:function(e){e+="=";for(var n=t.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}},delete:function(e){this.set(e,"",-100)},exists:function(e){return i(this.get(e))}},g=function(t,n){n||(n=e.location.href),t=t.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)","i").exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},f=function(){"use strict";function n(e,t,r,o,a){_classCallCheck(this,n),this.params=[],this.hitType=e,this.timestamp=t,this.eventName=r,this.customerID=a,this.objectData=function e(t){return!1===i(t)?"":"object"===_typeof(t)?e(JSON.stringify(t)):"function"==typeof t?e(t()):String(t)}(o),this.buildParams(),this.send()}return _createClass(n,[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var n=this;return{id:function(){return r.id},uid:function(){return l.get("uid")},ht:function(){return n.hitType},ev:function(){return n.eventName},cid:function(){return n.customerID},ed:function(){return n.objectData},v:function(){return r.version},dl:function(){return e.location.href},rl:function(){return t.referrer},ts:function(){return n.timestamp},de:function(){return t.characterSet},sr:function(){return e.screen.width+"x"+e.screen.height},vp:function(){return e.innerWidth+"x"+e.innerHeight},cd:function(){return e.screen.colorDepth},dt:function(){return t.title},bn:function(){return a()},md:function(){return u()},ua:function(){return c()},os:function(){return s()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(){return g("utm_source")},utm_medium:function(){return g("utm_medium")},utm_term:function(){return g("utm_term")},utm_content:function(){return g("utm_content")},utm_campaign:function(){return g("utm_campaign")},dc:function(){return l.getNoPrefix("discount_code")}}}},{key:"setParam",value:function(e,t){i(t)?this.params.push("".concat(e,"=").concat(encodeURIComponent(t))):this.params.push("".concat(e,"="))}},{key:"send",value:function(){e.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){e.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=t.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",t.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://data.thoughtmetric.io/pixel.gif","?").concat(this.params.join("&"))}}]),n}();l.exists("uid")?l.set("uid",l.get("uid"),1051200):l.set("uid",r.version+"-xxxxxxxx-".replace(/[x]/g,(function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)}))+(1*new Date).toString(36),1051200),e.thoughtmetric=function(e,t,n){switch(e){case"init":r.id=t;break;case"pageview":r.pageLoadOnce||(r.pageLoadOnce=!0,new f("pageview",o()));break;case"event":new f("event",o(),t,n);break;case"identify":new f("identify",o(),"",n,t)}};for(var h=0;h<e.thoughtmetricQueue.length;h++)e.thoughtmetric.apply(e.thoughtmetric,e.thoughtmetricQueue[h]);!function(t){var n,r,i={debug:!1,callback:t},o=e.ga,a=function(e){var t,n={args:e,the:{}},r=n.the;return i.debug&&function(t,n){for(t="Intercepted: ga(",n=0;n<e.length;n++)t+="string"==typeof e[n]?'"'+e[n]+'"':e[n],n+1<e.length&&(t+=", ");t+=")",console.log(t)}(),"function"==typeof e[0]?r.callback=e[0]:e[0]&&e[0].split&&(t=e[0].split("."),r.trackerName=t.length>1?t[0]:"t0",r.command=t.length>1?t[1]:t[0],t=t[t.length-1].split(":"),r.pluginName=t.length>1?t[0]:void 0,r.pluginMethodName=t.length>1?t[1]:void 0,"require"===r.command||"provide"===r.command?(r.pluginName=e[1],"provide"===r.command&&(r.pluginConstructor=e[2])):("send"===r.command&&(r.hitType=e[e.length-1]&&e[e.length-1].hitType||e[1]),"object"===_typeof(e[e.length-1])&&(r.trackerName=e[e.length-1].name||r.trackerName))),1==i.debug&&console.log("Run listener callback",r),!1!==i.callback(n)},u=function e(){var t=[].slice.call(arguments);try{a(t)}catch(e){}return e._gaOrig.apply(e._gaOrig,t)},c=function(){var t,n=u._gaOrig=e.ga;for(t in 1==i.debug&&console.log("Hijack",n._gaOrig?"(already hijacked)":""),e.ga=u,n)n.hasOwnProperty(t)&&(e.ga[t]=n[t])};if(o||(1==i.debug&&console.log("Instantiate GA command queue"),(o=e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}).l=1*new Date),o.getAll)1==i.debug&&console.log("GA already loaded; cannot see previous commands"),c();else if(o.l){if(1==i.debug&&console.log("Command queue instantiated, but library not yet loaded"),o.q&&o.q.length){for(1==i.debug&&console.log("Applying listener to",o.q.length," queued commands"),n=[],r=0;r<o.q.length;r++)a([].slice.call(o.q[r]))&&n.push(o.q[r]);o.q=n}else o.q=[];o(c),c()}else if(i.debug)throw new Error("Aborting; `ga` not the GA object.")}((function(e){if("send"==e.the.command&&"event"==e.the.hitType){if("object"==_typeof(e.args[2]))var t=e.args[2].eventAction,n=e.args[2].eventCategory,r=e.args[2].eventLabel,i=e.args[2].eventValue;else t=e.args[3],n=e.args[2],r=e.args[4],i=e.args[5];new f("event",o(),t,{event_category:n,event_label:r,value:i})}}))}(window,document);