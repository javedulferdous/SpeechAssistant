(window.lsWebpackJsonp=window.lsWebpackJsonp||[]).push([[6],{"0PK+":function(t,e,n){"use strict";n.r(e);var o=n("hosL"),r=n("QRet"),a=n("1gP7"),i=n.n(a),c=n("fv7Y"),l=n("F6jm"),u=n("o3HS"),s=n("iffY");function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var f=216e5,b="ls-do-not-sell";function p(t){return["3","1"].includes(t)}function y(){var t=Cookie.get("c")||Cookie.get("b")||null,e=Object(l.b)(b,t);return e?Promise.resolve(e):Object(c.a)("/layout/calls/do-not-sell").then((function(t){if(!t||!1===t.checked||!t.legalConsents)return"0";var e=t.legalConsents;return e&&e[0]&&e[0].metadata?"true"===e[0].metadata.marketing?"3":"1":"0"})).catch((function(t){return Object(u.default)(t.event,t.error),"0"})).then((function(e){return p(e)&&t&&Object(l.f)(b,t,e,f),e}))}function O(){var t=d(Object(r.useState)(""),2),e=t[0],n=t[1],o=d(Object(r.useState)(!1),2),a=o[0],i=o[1],u=d(Object(r.useState)(!1),2),h=u[0],O=u[1],g=Cookie.get("c")||Cookie.get("b")||null;function S(t){p(t)&&(Object(s.a)(t,1),i("1"===t),Object(l.f)(b,g,t,f))}return Object(r.useEffect)((function(){var t=window.__LS_Store.getState().flags;"US"!==window.I18n.country||t.disableDoNotSellXHR||y().then(S)})),{optOut:a,updateStatus:e,updateOptOut:function(t){var e=t?"1":"3";n("loading"),function(t){var e="/layout/api/v2/do-not-sell?c3s=".concat(t);return Object(c.b)(e)}(e).then((function(){n("success"),S(e)})).catch((function(){n("error"),O(!0)}))},showNotSaved:h,setShowNotSaved:O}}var g=n("/m4v"),S=n("K1A4"),w=n.n(S),m=n("OXc1"),j=n("mwcu"),v=n.n(j);function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function I(){var t=Object(g.useSelector)((function(t){return t.auth})),e=Object(g.useSelector)((function(t){return t.app})),n=k(Object(r.useState)("Loading...."),2),a=n[0],i=n[1],c=e.mobile?"touch":"desktop";return Object(r.useEffect)((function(){fetch("/layout/legal-info/".concat(t.isAuthenticated?"do-not-sell-signin-user":"do-not-sell-signout-user")).then((function(t){return t.json()})).then((function(t){i(t.content)})).catch((function(){return i("Failed to fetch content")}))}),[t.isAuthenticated]),t.isAuthenticated?function(t,e){return Object(o.h)(m.View,{nativeID:"signed-in-content","data-bhw":"SignedInContent"},Object(o.h)(v.a,{style:[x.text,x[t]],dangerouslySetInnerHTML:{__html:e}}))}(c,a):function(t,e){var n="/login?ref=".concat(encodeURIComponent("".concat(window.location.pathname,"#do-not-sell-my-personal-information")));return e=e.replace('"/login"','"'.concat(n,'"')),Object(o.h)(m.View,{nativeID:"signed-out-content","data-bhw":"SignedOutContent"},Object(o.h)(v.a,{style:[x.text,x[t]],dangerouslySetInnerHTML:{__html:e}}))}(c,a)}var x=m.Themes.create((function(t){return{text:{color:t.colors.grayDk,paddingTop:10},touch:{fontSize:13,lineHeight:"1.54"},desktop:{lineHeight:"1.5"}}})),D=n("Hi0J"),T=n.n(D),A=n("j4I7"),N=n.n(A),V=n("1Lij"),L=n.n(V),_=n("4iyJ"),H=n.n(_);function P(t){var e=t.optOut,n=t.updateStatus,r=t.updateOptOut,a=t.bottomSection,i=t.showNotSaved,c=t.setShowNotSaved,l=window.__LS_Store.getState().app,u=l.mobile?"touch":"desktop";function s(){c(!1)}return Object(o.h)(m.View,null,(!l.mobile||a)&&Object(o.h)(m.View,{style:M[u],nativeID:"switch-container"},Object(o.h)(m.View,null,Object(o.h)(v.a,{style:M["".concat(u,"OptOutText")],"data-bhw":"OptOutText",nativeID:"opt-out-text"},"Opt Out")),Object(o.h)(m.View,null,Object(o.h)(T.a,{onValueChange:function(){r(!e)},value:e,className:"gig-switch",withBoxShadow:!1,style:M.switch,nativeID:"opt-out-switch","data-bhw":"DoNotSellDesktopSwitch",inputId:"opt-out-checkbox",inputBhw:"OptOutCheckbox",accessibilityLabel:"OptOut"}))),"success"===n?l.mobile&&!a?null:Object(o.h)(v.a,{className:"icon-filled-check",style:M["".concat(u,"CheckMark")]},Object(o.h)(v.a,{style:[M.text],"data-bhw":"PreferenceSavedText",nativeID:"preference-saved-text"}," ","Preference saved")):"loading"===n?l.mobile?Object(o.h)(m.View,{style:[M.spinnerView]},Object(o.h)(L.a,{color:m.Themes.theme.colors.white,accessibilityLabel:"Loading",size:"large"})):Object(o.h)(v.a,{style:[M.text]}," Saving..."):"error"===n?l.mobile?a||!i?null:Object(o.h)(H.a,{type:"error",style:M["".concat(u,"Alert")],onClose:s},"Sorry, we couldn't save your setting"):Object(o.h)(N.a,{type:"error",style:M["".concat(u,"Alert")]},"Sorry, we couldn't save your setting"):null)}var M=Object(m.createStyles)((function(t){return{desktopCheckMark:{paddingTop:"8px",color:t.colors.brnd},touchCheckMark:{color:t.colors.brnd,paddingLeft:18},switch:{height:25},desktopOptOutText:{fontSize:18},touchOptOutText:{fontSize:14},desktopAlert:{width:280,marginTop:10,marginLeft:0},touchAlert:{borderLeftWidth:0,marginLeft:10,marginTop:10,marginRight:10,height:50},text:{color:t.colors.grayDk,lineHeight:"1.5",paddingTop:10},spinnerView:{position:"fixed",left:0,top:44,bottom:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center"},touch:{paddingHorizontal:16,paddingVertical:16,borderTopColor:t.colors.grayClr,borderTopStyle:"solid",borderTopWidth:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},desktop:{paddingTop:32,alignItems:"center",flexDirection:"row",justifyContent:"space-between"}}}));function B(t){var e=t.open,n=t.onClose,r=Object(g.useStore)();return Object(o.h)(w.a,{open:e,onClose:n,modalSize:"dynamic",style:z.modal},Object(o.h)(g.Provider,{store:r},Object(o.h)(m.View,{style:z.root,nativeID:"do-not-sell-container","data-bhw":"DoNotSellContainer"},Object(o.h)(m.View,{style:[z.captionContainer],nativeID:"do-not-sell-header","data-bhw":"DoNotSellHeader"},Object(o.h)(v.a,{style:[z.captionText]},"Donâ€™t Sell My Personal Information")),Object(o.h)(m.View,{style:z.descriptionContainer},Object(o.h)(I,t)),Object(o.h)(P,t))))}var z=Object(m.createStyles)((function(){return{modal:{width:560,minHeight:285},root:{padding:32,flexGrow:1},captionContainer:{alignItems:"center"},captionText:{fontSize:24},descriptionContainer:{paddingTop:32}}})),E=n("1yhy"),G=n.n(E);function U(){return(U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function W(t){var e=t.open,n=t.onClose,r=t.app.brand,a=Object(g.useStore)();return Object(o.h)(G.a,{open:e,onClose:n,onBackClick:n,title:"Do Not Sell My Personal Information",backButtonType:"back",zenith:r.isGroupon,headerWithBottomBorder:r.isGroupon,headerID:"do-not-sell-header",headerBhw:"DoNotSellHeader",backIconID:"do-not-sell-back-button",backIconBhw:"DoNotSellBackButton",titleId:"do-not-sell-title",titleBhw:"DoNotSellTitle"},Object(o.h)(g.Provider,{store:a},Object(o.h)(m.View,{style:[F.root],nativeID:"dns-touch-page"},Object(o.h)(P,U({bottomSection:!1},t)),Object(o.h)(m.View,{style:[F.row]},Object(o.h)(v.a,{weight:"600",nativeID:"do-not-sell-text-header","data-bhw":"DoNotSellTextHeader"},"Do Not Sell My Personal Information"),Object(o.h)(I,t)),Object(o.h)(P,U({bottomSection:!0},t)))))}var F=Object(m.createStyles)((function(t){return{root:{backgroundColor:t.colors.white,backgroundClip:"content-box",justifyContent:"flex-start"},row:{paddingHorizontal:16,paddingVertical:16}}}));function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}n.d(e,"default",(function(){return K}));var $="do-not-sell-my-personal-information";function K(){var t=J(i()(),2),e=t[0],n=t[1],a=J(Object(r.useState)(e===$),2),c=a[0],l=a[1],u=O(),s=u.optOut,d=u.updateStatus,h=u.updateOptOut,f=u.showNotSaved,b=u.setShowNotSaved;Object(r.useEffect)((function(){l(e===$)}),[e]);var p=Groupon&&Groupon.PageFlags&&Groupon.PageFlags.isTouch,y={optOut:s,updateStatus:d,updateOptOut:h,showNotSaved:f,setShowNotSaved:b,app:window.__LS_Store.getState().app,open:c,onClose:function(){n("")}};return p?Object(o.h)(W,y):Object(o.h)("a",{id:"ls-footer-do_not_sell",href:"#do-not-sell-my-personal-information","data-bhw":"DoNotSell"},"Do Not Sell My Personal Information",Object(o.h)(B,y))}}}]);
//# sourceMappingURL=DoNotSell-8c267aeadf74.js.map