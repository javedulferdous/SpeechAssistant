"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(e){function n(e){if(e.hasInitialised)return!1;var n="ha-cookie-settings",o="functional",i={},t=!0,s=(_createClass(r,[{key:"setCookie",value:function(e,n){if(!e||!n)throw new TypeError("CookieAccess.setCookie() requires a cookieType and cookieString");i[e]&&(document.cookie=n)}},{key:"getConsents",value:function(){return i}},{key:"getCookieTypes",value:function(){return Object.keys(i)}}]),r);function r(){_classCallCheck(this,r)}var a=(_createClass(c,[{key:"init",value:function(){if("undefined"==typeof window)return!1;var e=this.getConsentCookie();if(this.cookieAccessApi=new s,!(t=this.isEuSite()))return i[o]=!0,this.consentSet=!0;if(e){if((i=this.decodeCookie(e))[o])return this.consentSet=!0;if(!1===i[o])return!(this.consentSet=!0)}return this.prepareBannerLaunch(),!1}},{key:"isEuSite",value:function(){return"1"===this.getEuSiteCookie()}},{key:"encodeCookie",value:function(e){var n=[];if(!e)return"";for(var t=Object.keys(e),o=0;o<t.length;o++)n.push(t[o]+":"+(e[t[o]]?1:0));return encodeURIComponent(n.join(";"))}},{key:"decodeCookie",value:function(e){var n={};if(!e)return{};try{for(var t=decodeURIComponent(e).split(";"),o=0;o<t.length;o++){var i=t[o].split(":");n[i[0]]="1"===i[1]}return n}catch(e){return{}}}},{key:"registerDomEventListener",value:function(e,n,t){e.addEventListener(n,t),this.savedListeners.push([e,n,t])}},{key:"unregisterDomEventListeners",value:function(){for(var e=void 0;this.savedListeners.length;)(e=this.savedListeners.shift())[0].removeEventListener(e[1],e[2])}},{key:"hasConsented",value:function(e){return"undefined"!=typeof document&&(e?i[e]:this.consentSet&&(-1!==document.cookie.indexOf(n)||!t))}},{key:"handleConsent",value:function(e,n){var t=1<arguments.length&&void 0!==n&&n;i[o]=e.functional,this.setConsentCookie(),this.consentSet=!0,t&&this.removeBanner(),this.flushPushedQueueIfConsented()}},{key:"getConsentCookie",value:function(){return this.findCookie(n)}},{key:"getEuSiteCookie",value:function(){return this.findCookie("eu-site")}},{key:"findCookie",value:function(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null}},{key:"setConsentCookie",value:function(){var e=new Date;e.setDate(e.getDate()+365),document.cookie=n+"="+this.encodeCookie(i)+";expires="+e.toGMTString()+";path=/"}},{key:"removeBanner",value:function(){this.unregisterDomEventListeners(),this.bannerDOM.parentNode.removeChild(this.bannerDOM),this.bannerDOM=null}},{key:"prepareBannerLaunch",value:function(){var e=this;document.body?this.launchBanner(!1):this.registerDomEventListener(document,"DOMContentLoaded",function(){e.launchBanner(!1)})}},{key:"launchBanner",value:function(n){var e;this.bannerDOM||(document.body.insertBefore(this.bannerStyle(),document.body.firstChild),document.body.insertBefore(this.bannerWrapper(),document.body.firstChild),this.bannerDOM=document.getElementById("gdpr-banner")),n?(e=this.adjustMarkup(),this.bannerDOM.innerHTML=e,this.bindAccept()):(this.bannerDOM.innerHTML=this.bannerMarkup(),this.bindEvents()),this.bannerDOM.focus(),window.edap.push(function(e){e.trigger("test.exposure",{testname:"ha_gdpr_banner:onshow:a",variant:"4"}),e.trigger("gdpr.consent.loaded",{consentview:n?"cookie-settings":"info"})})}},{key:"bindEvents",value:function(){this.registerDomEventListener(document.getElementById("gdpr-adjust-btn"),"click",this.launchAdjust),this.registerDomEventListener(document.getElementById("gdpr-close"),"click",this.setConsentToAll)}},{key:"bindAccept",value:function(){this.registerDomEventListener(document.getElementById("gdpr-accept"),"click",this.adjustConsent)}},{key:"bannerWrapper",value:function(){var e=document.createElement("div");return e.setAttribute("id","gdpr-banner"),e.setAttribute("tabIndex","-1"),e.setAttribute("class","GDPR"),e.setAttribute("role","dialog"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-describedby","GDPR__desc"),e}},{key:"bannerMarkup",value:function(){var e=this.i18n.content;return"undefined"!=typeof window&&window.__SITE_CONTEXT__&&window.__SITE_CONTEXT__.basePath&&(e=e.replace('href="/cookie-policy-redirect"','href="'+window.__SITE_CONTEXT__.basePath+'/cookie-policy-redirect"')),['<div id="GDPR__desc" class="GDPR__text">'+e+"</div>",'<div class="GDPR__ctas">','<button class="GDPR__btn GDPR__btn--secondary GDPR__inverse-link" id="gdpr-adjust-btn">'+this.i18n.adjustCTA+"</button>",'<button class="GDPR__btn" id="gdpr-close">'+this.i18n.acceptCTA+"</button>","</div>"].join("")}},{key:"adjustMarkup",value:function(){var e=this.getConsentCookie(),n=(e?this.decodeCookie(e):{}).functional?"checked":"";return['<div class="GDPR__text">','<h4 id="GDPR__desc" class="GDPR__h4">'+this.i18n.adjustTitle+"</h4>",'<ul class="GDPR__ul">','<li class="GDPR__li"><input class="GDPR__checkbox" id="gdpr-functional" type="checkbox" '+n+' value="functional"/> <label class="GDPR__label" for="gdpr-functional">'+this.i18n.allowFunctional+"</label></li>",'</ul><div class="GDPR__ctas"><button id="gdpr-accept" class="GDPR__btn">'+this.i18n.acceptCTA+"</button></div>","</div>"].join("")}},{key:"bannerStyle",value:function(){var e=document.createElement("style");e.type="text/css";var n="\n.GDPR {\noutline:0;\nmax-width:100vw;\ndisplay:-ms-flexbox;\ndisplay:flex;\n-ms-flex-align:center;\nalign-items:center;\n-ms-flex-pack:justify;\njustify-content:space-between;\nbackground-color:#292929;\ncolor:#fff;\npadding:16px 24px;\nz-index:1035;\nposition:fixed;\nbottom:16px;\nleft:24px;\nright:24px;\nborder-radius:8px;\nbox-shadow:0 8px 15px 0 rgba(0,0,0,.1);\n}\n.GDPR__h4 {\ncolor:#fff;\n}\n.GDPR__text {\n-ms-flex:1;\nflex:1;\ntext-align:left;\npadding-right:16px;\n}\n.GDPR__ctas {\npadding:8px 0;\ndisplay:-ms-flexbox;\ndisplay:flex;\n-ms-flex:0 1 auto;\nflex:0 1 auto;\n}\n.GDPR__btn {\nborder-radius:100px;\nbackground:#fff;\ncolor:#245abc;\npadding:4.5px 16px;\nfont-size:.8125rem;\nline-height:21px;\nborder:none;\nmargin-bottom:0;\nwhite-space:nowrap;\n}\n.GDPR__btn--secondary {\nbackground:transparent;\nborder:none;\npadding-left:0;\ntext-decoration:underline;\n}\n.GDPR__inverse-link {\ncolor:#fff;\ntext-decoration:underline;\n}\n.GDPR__inverse-link:hover {\ncolor:#fff;\n}\n.GDPR__ul {\nmargin:0;\npadding:0;\nlist-style:none;\n}\n.GDPR__li {\nmargin-bottom:12px;\nposition:relative;\n}\n.GDPR__label {\ncolor:#fff;\nmargin:0;\ndisplay:block;\nposition:relative;\ncursor:pointer;\npadding-left:28px;\n}\n.GDPR__label::before {\ncontent:'';\nposition:absolute;\nleft:0;\ntop:2px;\nwidth:18px;\nheight:18px;\nborder:1px solid #fff;\nborder-radius:4px;\nbackground:transparent;\n}\n.GDPR__checkbox {\nopacity:0;\nposition:absolute;\n}\n.GDPR__checkbox:checked {\nbackground:#fff;\nbox-shadow:0 1px 2px rgba(0,0,0,.05), inset 0 -15px 10px -12px rgba(0,0,0,.05), inset 15px 10px -12px rgba(255,255,255,.1);\n}\n.GDPR__checkbox:checked + .GDPR__label::before {\nbackground:#fff;\n}\n.GDPR__checkbox:checked + .GDPR__label::after {\ncontent:'';\nposition:absolute;\nleft:4px;\ntop:10px;\nbackground:#323f4d;\nwidth:2px;\nheight:2px;\nbox-shadow:2px 0 0 #323f4d, 4px 0 0 #323f4d, 4px -2px 0 #323f4d, 4px -4px 0 #323f4d, 4px -6px 0 #323f4d, 4px -8px 0 #323f4d;\ntransform:rotate(45deg);\n}\n.GDPR__checkbox:focus + .GDPR__label::before {\nbox-shadow:0 0 0 2px #228ae6;\n}\n@media (max-width: 767px) {\n.GDPR {\npadding:8px 20px;\nborder-radius:0;\nbottom:0;\nleft:0;\nright:0;\nfont-size:14px;\nline-height:1.5em;\n-ms-flex-direction:column;\nflex-direction:column;\n-ms-flex-align:start;\nalign-items:flex-start;\n}\n.GDPR__text {\n-ms-flex:1 1 auto;\nflex:1 1 auto;\nwidth:100%;\n}\n}\n@media (min-width: 1200px) {\n.GDPR__text {\nwidth:65%;\n}\n}\n";return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),e}},{key:"processPushedCommand",value:function(e){"function"==typeof e&&e(this.cookieAccessApi)}},{key:"flushPushedQueueIfConsented",value:function(){if(this.hasConsented())for(;0<this.queuedCallbacks.length;)this.processPushedCommand(this.queuedCallbacks.shift())}}]),c);function c(){var n=this;_classCallCheck(this,c),this.adjustConsent=function(){n.handleConsent({functional:document.getElementById("gdpr-functional").checked},!0),window.edap.push(function(e){e.trigger("gdpr.consent.update",{consentsettings:decodeURIComponent(n.getConsentCookie())})})},this.setConsentToAll=function(){n.handleConsent({functional:!0},!0),window.edap.push(function(e){e.trigger("gdpr.consent.agreed",{consentsettings:decodeURIComponent(n.getConsentCookie())})})},this.launchAdjust=function(){n.launchBanner(!0)},this.i18n={adjustTitle:"Change cookie settings",close:"Close",content:'This site uses cookies and similar technologies to analyse traffic, personalise content and ads, and provide social media features. <a class="GDPR__inverse-link" href="/cookie-policy-redirect">Learn more.</a>',acceptCTA:"Accept",adjustCTA:"Adjust settings",allowFunctional:"I consent to the use of cookies and similar technologies to analyse traffic, personalise content and ads, and provide social media features. "},this.bannerDOM=null,this.queuedCallbacks=[],this.savedListeners=[],this.consentSet=!1,this.init()}window.edap=window.edap||[],window.edap.push(function(e){e.trigger("test.exposure",{testname:"ha_gdpr_banner:onload:a",variant:"4"})});var d=new a;Array.isArray(e)&&(d.queuedCallbacks=e.slice(0)),window.cookieconsent=[],window.cookieconsent.gdpr=d,window.cookieconsent.push=function(e){d.hasConsented()?d.processPushedCommand(e):d.queuedCallbacks.push(e)},d.flushPushedQueueIfConsented(),window.cookieconsent.hasInitialised=!0}"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n),n(e)}(window.cookieconsent||[]);