(function(e){var t=function(){this.events={};this.addListener=function(e,t){if(typeof t!=="function"){return false}if(typeof e!=="string"){return false}if(this.events[e]===undefined){this.events[e]={listeners:[]}}this.events[e].listeners.push(t)};this.removeListener=function(e,t){if(this.events[e]===undefined){return false}this.events[e].listeners=this.events[e].listeners.filter(function(e){return e.toString()!==t.toString()})};this.dispatch=function(e,t){if(this.events[e]===undefined){return false}this.events[e].listeners.forEach(function(e){e(t)})}};e.elcEvents=new t})(window.site||{});(function(r){var e={data:{},runEvents:function(e){var t=r.trackingDataLayer;e=e||{};var a=e.datalayer_events||t.data.datalayer_events||{};var n=0;for(var i in a){if(a.hasOwnProperty(i)){n++;if(a[i].event_data){r.elcEvents.dispatch("track:"+i,Object.assign({},e,a[i].event_data))}else{r.elcEvents.dispatch("track:"+i)}}}if(n){t.clearEvents()}},clearEvents:function(){if(generic&&generic.cookie&&generic.cookie("datalayer_events")){generic.cookie("datalayer_events",0,{exp:0,path:"/"})}else if(generic&&generic.jsonrpc){generic.jsonrpc.fetch({method:"analytics.deleteEvents"})}},load:function(e){if(typeof e==="undefined"){if(generic&&generic.jsonrpc){var t={};if(Drupal.settings.analytics&&Drupal.settings.analytics.datalayer_cat_override){t.cmCatOverride=Drupal.settings.analytics.datalayer_cat_override}generic.jsonrpc.fetch({method:"analytics.getDataLayer",params:[t],onSuccess:function(e){var t=e.getValue()||{};if(window.page_data&&window.page_data["analytics-datalayer"]){Object.assign(t,window.page_data["analytics-datalayer"])}if(generic&&generic.cookie&&generic.cookie("datalayer_events")){var a=generic.cookie("datalayer_events").split(",");t.datalayer_events=t.datalayer_events||{};for(var n=0;n<a.length;n++){if(t.datalayer_events[a[n]]){continue}t.datalayer_events[a[n]]={}}}if(t){r.trackingDataLayer.load(t);window.utag_data=r.trackingDataLayer.data}}})}}else{window.utag_data=window.utag_data||{};Object.assign(this.data,e);Object.assign(window.utag_data,e);r.trackingDataLayer.fixupProductData(this.data);r.elcEvents.dispatch("trackingDataLayer:loaded")}},update:function(e){var t=r.trackingDataLayer;e&&Object.assign(t.data,e);if(window.utag_data){Object.assign(window.utag_data,t.data)}t.runEvents(e)},fixupProductData:function(e){var t=r.trackingDataLayer;var a=e||t.data||{};if(a.hasOwnProperty("product_impression_id")){a["product_impression_list"]=[];a["product_impression_position"]=[];for(var n=0;n<a["product_impression_id"].length;n++){a["product_impression_list"].push(document.location.pathname);a["product_impression_position"].push(n+1)}a["product_impression_brand"]=a["product_impression_id"].map(function(){return a["brand"]})}if(a.hasOwnProperty("cart_product_id")&&typeof a["cart_product_id"]==="object"){a["cart_product_brand"]=a["cart_product_id"].map(function(){return a["brand"]})}if(a.hasOwnProperty("product_id")&&typeof a["product_id"]==="object"){a["product_brand"]=a["product_id"].map(function(){return a["brand"]})}}};r.trackingDataLayer=e})(window.site||{});(function(i,e){var t={evtAction:function(e,t,a){c(n[e],Object.assign({},r[e],t),a)},evtLink:function(e,t){c("link",e,t)},evtView:function(e,t){c("view",e,t)},refreshData:function(){e=window.utag_data;return e},disableDefaultPageView:function(){window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.noview=true},addToCart:a,addToFavorites:o,checkoutOPC:l,checkoutSampleAdded:s,checkoutPaymentSelected:v,emailSignup:d,liveChatManualInitiated:_,liveChatManualPreSurvey:u,liveChatManualWaiting:p,liveChatManualChatting:f,liveChatProactiveDisplayed:h,liveChatProactiveInitiated:g,liveChatProactivePreSurvey:k,liveChatProactiveWaiting:m,liveChatProactiveChatting:w,loyaltyTag:y,navigationClick:b,offerFailed:C,offerSuccessful:D,productClick:P,profileUpdate:S,questionAnswer:E,questionAsk:O,questionAskSearch:L,quickView:A,removeFromCart:G,registration:T,reviewRead:j,reviewWriteStart:R,reviewWriteEnd:I,sortReviews:M,rateReviews:F,searchReviews:W,filterReviews:N,sortAnswers:q,rateAnswers:x,addAnswerStart:B,addAnswerEnd:V,showMoreAnswers:U,searchPageLoaded:Q,searchRedirect:Y,signin:H,signinFailed:K,productThumbnailClick:z,trackBopisEvent:$};var n={addToCart:"link",addToFavorites:"link",checkoutGuestUser:"link",checkoutSampleAdded:"link",checkoutPaymentSelected:"link",checkoutOPC:"view",checkoutReturnUser:"link",emailSignup:"link",filterProducts:"link",liveChatManualInitiated:"link",liveChatManualPreSurvey:"link",liveChatManualWaiting:"link",liveChatManualChatting:"link",liveChatProactiveDisplayed:"link",liveChatProactiveInitiated:"link",liveChatProactivePreSurvey:"link",liveChatProactiveWaiting:"link",liveChatProactiveChatting:"link",loyaltyTag:"link",navigationClick:"link",offerFailed:"link",offerSuccessful:"link",productClick:"link",profileUpdate:"link",questionAnswer:"link",questionAsk:"link",questionAskSearch:"link",quickView:"link",removeFromCart:"link",registration:"link",reviewRead:"link",reviewWriteStart:"link",reviewWriteEnd:"link",sortReviews:"link",rateReviews:"link",searchReviews:"link",filterReviews:"link",sortAnswers:"link",rateAnswers:"link",addAnswerStart:"link",addAnswerEnd:"link",showMoreAnswers:"link",searchAllResultsSelected:"link",searchOneResultSelected:"link",searchIRBannerDisplayed:"link",searchIRBannerClicked:"link",searchIRTryAgainClicked:"link",searchResultsRedirect:"link",searchPageLoaded:"view",searchRedirect:"view",signin:"link",signinFailed:"link",socialLink:"link",productThumbnailClick:"link",sppOpenPostmatesOverlay:"link",sppOpenBopisOverlay:"link",bopisStoreClick:"link",bopisSearch:"link",bopisSearchCurrentLocation:"link",bopisSelectStore:"link",bopisSelectDeliveryOption:"link",bopisSearchResults:"link",bopisEditBagAction:"link",bopisEditBagClick:"link"};var r={addToCart:{enh_action:"add",event_name:"add_to_bag",event_category:"ecommerce",event_action:"add to bag",event_label:null,Add_to_Bag_Module:"Add_to_Bag_Module",product_id:null,product_shade:null,product_size:null,product_sku:null},addToFavorites:{event_name:"add_to_favorites",event_category:"ecommerce",event_action:"add to favorites",event_value:"0",event_noninteraction:"false",event_label:null},checkoutSampleAdded:{event_name:"samples",event_category:"samples",event_action:"samples added",event_value:"0",page_name:"checkout | samples",event_label:null},checkoutPaymentSelected:{event_name:"payment_selected",page_name:"checkout | payment",enh_action:"checkout",event_category:"ecommerce",event_action:"checkout option",event_label:null,event_value:"0"},checkoutGuestUser:{enh_action:"checkout_option",event_name:"guest_checkout",event_category:"ecommerce",event_action:"checkout option",event_value:"0",event_label:"guest checkout"},checkoutOPC:{enh_action:"checkout",event_label:null,page_name:null,page_type:null},checkoutReturnUser:{enh_action:"checkout_option",event_name:"return_user_checkout",event_category:"ecommerce",event_action:"checkout option",event_value:"0",event_label:"return checkout"},filterProducts:{event_category:"filter & sort selection",event_action:"filter",event_name:"filter"},emailSignup:{event_name:"signup",event_category:"signup",event_action:null,event_label:null,event_value:"0",event_noninteraction:"false"},liveChatManualInitiated:{event_name:"live_chat_user_initiated",event_category:"live chat interaction",event_action:"user initiated",event_label:null,event_value:"0",event_noninteraction:"false",live_chat_initiation_type:"user initiated"},liveChatManualPreSurvey:{event_name:"live_chat_manual_prechat_survey",event_category:"live chat interaction",event_action:"prechat survey",event_label:"shown",live_chat_initiation_type:"user initiated"},liveChatManualWaiting:{event_name:"live_chat_manual_prechat_accepted",event_category:"live chat interaction",event_action:"prechat survey",event_label:"accepted",live_chat_initiation_type:"user initiated",live_chat_type:"order assistance"},liveChatManualChatting:{event_name:"live_chat_manual_chatting",event_category:"live chat interaction",event_action:"chat start",event_label:"order assistance",live_chat_initiation_type:"user initiated",live_chat_type:"order assistance"},liveChatProactiveDisplayed:{event_name:"live_chat_proactive_shown",event_category:"live chat interaction",event_action:"proactive chat",event_label:"shown",event_value:"0",event_noninteraction:"false"},liveChatProactiveInitiated:{event_name:"live_chat_proactive_accepted",event_category:"live chat interaction",event_action:"proactive chat",event_label:"accepted",event_value:"0",event_noninteraction:"false",live_chat_initiation_type:"proactive"},liveChatProactivePreSurvey:{event_name:"live_chat_proactive_prechat_survey",event_category:"live chat interaction",event_label:"shown",event_action:"prechat survey",live_chat:"Pre Survey Chat",live_chat_initiation_type:"proactive"},liveChatProactiveWaiting:{event_name:"live_chat_proactive_prechat_accepted",event_category:"live chat interaction",event_action:"prechat survey",event_label:"accepted",live_chat_initiation_type:"proactive",live_chat_type:"order assistance"},liveChatProactiveChatting:{event_name:"live_chat_proactive_chatting",event_category:"live chat interaction",event_action:"chat start",event_label:"order assistance",live_chat_initiation_type:"proactive",live_chat_type:"order assistance"},loyaltyTag:{event_name:"loyalty",event_category:"loyalty",event_action:null,event_label:null,event_noninteraction:null},navigationClick:{event_name:"navigation_click",event_category:"global",event_action:"navigation click",event_label:"navigation click",enh_action:"promo_click",promo_pos:["gnav"],promo_creative:["link"],promo_name:[],promo_id:[]},offerFailed:{event_name:"offers_failed",event_category:"offers",event_action:"fail",event_value:"0",event_noninteraction:"false",event_label:null},offerSuccessful:{event_name:"offers_success",event_category:"offers",event_action:"success",event_value:"0",event_noninteraction:"false",event_label:null},quickView:{enh_action:"detail",event_name:"mpp_qv",event_category:"ecommerce",event_action:"product detail view",event_noninteraction:"true",sc_event_name:"Product Quick View",event_label:null,product_id:null,product_base_id:null,product_catagory_name:null,product_price:null},productClick:{enh_action:"product_click",event_category:"ecommerce",event_action:"product click",event_label:null,product_id:null,product_position:null,product_list:null},profileUpdate:{event_name:"profile_update",event_category:"account",event_action:"profile update",event_value:"0",event_noninteraction:"false",event_label:"standard"},questionAnswer:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"ask answer - ask a question - end",event_label:null},questionAsk:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"ask answer - read",event_label:null},questionAskSearch:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},sortAnswers:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},rateAnswers:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},addAnswerStart:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"ask answer - add an answer - start",event_label:null},addAnswerEnd:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"ask answer - add an answer - end",event_label:null},showMoreAnswers:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"ask answer - show more q&a",event_label:null},registration:{event_name:"registration",event_category:"account",event_action:"create success",event_value:"0",event_noninteraction:"false",event_label:"standard"},reviewRead:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"review - read",event_label:null},reviewWriteStart:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:"review - write - start",event_label:null},reviewWriteEnd:{event_name:"read_write_review",event_category:"Product Reviews / Ask Answer",event_action:"Review - Write - End",event_label:null},sortReviews:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},rateReviews:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},searchReviews:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},filterReviews:{event_name:"read_write_review",event_category:"product reviews / ask answer",event_action:null,event_label:null},removeFromCart:{enh_action:"remove",event_name:"remove_from_bag",event_category:"ecommerce",event_action:"remove from bag",event_label:null,product_id:null,product_shade:null,product_size:null,product_sku:null},searchIRBannerDisplayed:{event_name:"dtigimagesearch",event_category:"onsite search",event_action:"image search banner",event_label:"displayed"},searchIRBannerClicked:{event_name:"dtigimagesearch",event_category:"onsite search",event_action:"image search banner",event_label:"clicked"},searchIRTryAgainClicked:{event_name:"dtigimagesearch",event_category:"onsite search",event_action:"try again button",event_label:"clicked"},searchAllResultsSelected:{event_name:"onsite_search",event_category:"onsite search",event_action:"standard search",event_label:null,event_value:null,event_noninteraction:false,search_keyword:null,search_type:"standard search",number_of_on_site_search_results:null,number_of_on_site_searches:1},searchOneResultSelected:{event_name:"onsite_search",event_category:"onsite search",event_action:"type ahead",event_label:null,event_noninteraction:false,search_keyword:null,product_sku:null,product_id:null,product_name:null,search_type:"standard search"},searchResultsRedirect:{event_name:"onsite_search",event_category:"onsite search",event_action:"redirect",event_label:null,event_noninteraction:false,search_keyword:null,search_type:"redirect",number_of_on_site_searches:1},searchPageLoaded:{event_name:"onsite_search",event_category:"onsite search",event_label:"standard search",event_noninteraction:"false",page_name:"Search",page_type:"search",event_value:null,event_action:null,search_keyword:null,search_type:"standard search",Number_of_On_Site_Search_Results:null,Number_of_On_Site_Searchs:1},signin:{event_name:"signin",event_category:"account",event_action:"login success",event_value:"0",event_noninteraction:"false",event_label:"standard"},signinFailed:{event_name:"signin",event_category:"account",event_action:"login fail",event_value:"0",event_noninteraction:"false",event_label:"standard"},socialLink:{enh_action:"social",event_name:"outbound_link",event_category:"outbound link click",event_action:null,event_label:null},productThumbnailClick:{event_name:"Product Thumbnail Clicks",event_category:"Product Thumbnail Clicks",event_action:null,event_label:null},sppOpenPostmatesOverlay:{event_name:"delivery_options",event_category:"delivery options",event_action:"launched",event_label:"postmates"},sppOpenBopisOverlay:{event_name:"delivery_options",event_category:"delivery options",event_action:"launched",event_label:"bopis"},bopisStoreClick:{event_name:"delivery_options",event_category:"bopis",event_action:"store search selection",event_label:null},bopisSearch:{event_name:"delivery_options",event_category:"delivery options",event_action:"store search",event_label:"search term entered"},bopisSearchCurrentLocation:{event_name:"delivery_options",event_category:"delivery options",event_action:"store search",event_label:"location search"},bopisSelectStore:{event_name:"delivery_options",event_category:"bopis",event_action:"store selected for purchase",event_label:null},bopisSearchResults:{event_name:"delivery_options",event_category:"delivery options",event_action:"store results",event_label:null},bopisSelectDeliveryOption:{event_name:"checkout_option",enh_action:"checkout_option",event_category:"ecommerce",event_action:"order delivery type",event_label:null},bopisEditBagAction:{event_name:"delivery_options",event_category:"delivery options",event_action:"store changes",event_label:null},bopisEditBagClick:{event_name:"delivery_options",event_category:"bopis",event_action:"store search",event_label:"edit bag"}};function c(e,t,a){if(typeof utag!=="undefined"){if(a){utag[e](t,a)}else{utag[e](t)}}}function a(e){var t={};if(e&&!X(e)){t.event_label=J(e.product_name[0])+" - "+e.product_id[0];i.track.evtAction("addToCart",Object.assign({},e,t))}}function o(e){var t={};if(e&&!X(e)){t.event_label=J(e.product_name[0])+" - "+e.product_id[0];i.track.evtAction("addToFavorites",Object.assign({},e,t))}}function l(e){var t={};var a=i.track.refreshData();if(e&&!X(e)){if(typeof e.active_panel==="object"){t.event_label=e.active_panel[0]==="review"?e.active_panel[1]:e.active_panel[0]}else{t.event_label=e.active_panel}t.page_name="checkout | "+t.event_label;t.page_type=a.page_type;i.track.evtAction("checkoutOPC",Object.assign({},e,t))}}function s(e){var t={};if(e&&!X(e)){for(var a=0;a<e.product_name.length;a++){t.event_label=e.product_name[a]+" - "+e.product_sku[a]+" - "+e.product_category_id[a];i.track.evtAction("checkoutSampleAdded",Object.assign({},t))}}}function v(e){var t=i.track.refreshData()||{};if(e&&!X(e)){i.track.evtAction("checkoutPaymentSelected",Object.assign({},t,e))}}function d(e){var t={};if(e&&!X(e)&&e["last_source"]){t["event_label"]=e["last_source"];t["event_action"]=e["opt_in_state"]}Object.assign(i.trackingDataLayer.data,e);i.track.evtAction("emailSignup",Object.assign({},e,t))}function _(){var e={};var t=i.track.refreshData();if(t&&!X(t)){e.event_label=t.page_name;i.track.evtAction("liveChatManualInitiated",Object.assign({},e))}}function u(){i.track.evtAction("liveChatManualPreSurvey")}function p(){i.track.evtAction("liveChatManualWaiting")}function f(){i.track.evtAction("liveChatManualChatting")}function h(){i.track.evtAction("liveChatProactiveDisplayed")}function g(){var e={};var t=i.track.refreshData();if(t&&!X(t)){e.event_label=t.page_name;i.track.evtAction("liveChatProactiveInitiated",Object.assign({},e))}}function k(){i.track.evtAction("liveChatProactivePreSurvey")}function m(){i.track.evtAction("liveChatProactiveWaiting")}function w(){i.track.evtAction("liveChatProactiveChatting")}function y(e){if(e){var t={"account | signin":{event_action:"sign up",event_label:"click"},account:{event_action:"account",event_label:"join now"},"checkout | confirm":{event_action:"checkout",event_label:"join now"},"signup overlay":{event_action:"enrolment overlay",event_label:"displayed",event_noninteraction:true},"marketing enrollment":{event_action:"cms",event_label:"join now"},"enrollment overlay":{event_action:"enrolment overlay",event_label:"join now cta"},"marketing overlay":{event_action:"cms",event_label:"join now"}};var a=t[e];if(a.event_action){i.track.evtAction("loyaltyTag",a)}}}function b(e){var t={};if(e&&!X(e)&&e.promo_name){t.promo_name=e.promo_name.indexOf(">")===0?e.promo_name.replace(/[>]+/,""):e.promo_name;t.promo_id=["gnav"+"-"+"link"+"-"+t.promo_name];i.track.evtAction("navigationClick",Object.assign({},e,t))}}function C(e){var t={};if(e&&!X(e)){for(var a=0;a<e.offer_code.length;a++){t.event_label=e.offer_code[a]+" - "+e.offer_message[a];i.track.evtAction("offerFailed",Object.assign({},e,t))}}}function A(e){if(e&&!X(e)){i.track.evtAction("quickView",e)}}function P(e){var t={};var a=i.track.refreshData();if(e&&!X(e)&&a&&!X(a)){if(!a.product_impression_id||!e.product_id){return}var n=a.product_impression_id.indexOf(e.product_id[0]);if(n>=0){t.event_label=J(a.product_impression_name[n])+" - "+e.product_id[0];t.product_position=[n+1];t.product_list=[location.pathname];i.track.evtAction("productClick",Object.assign({},e,t))}}}function S(e){i.track.evtAction("profileUpdate")}function D(e){var t={};if(e&&!X(e)){for(var a=0;a<e.offer_code.length;a++){t.event_label=e.offer_code[0];i.track.evtAction("offerSuccessful",Object.assign({},e,t))}}}function E(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("questionAnswer",e)}}function O(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("questionAsk",e)}}function L(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="ask answer - ask a question - search - "+e.search_term;i.track.evtAction("questionAskSearch",t)}}function T(e){e=e||{};if(e["login_source"]){e.event_label=e["login_source"].toLowerCase()}var t=i.track.refreshData()||{};i.track.evtAction("registration",Object.assign({},t,e))}function j(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("reviewRead",e)}}function R(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("reviewWriteStart",e)}}function I(e){var t={};if(e&&!X(e)&&e.product_impression_id&&e.product_impression_name){t.event_label=J(e.product_impression_name)+" - "+e.product_impression_id}else{var a=i.track.refreshData();if(a&&!X(a)&&a.product_impression_id&&a.product_impression_id.length){t.event_label=J(a.product_impression_name[0])+" - "+a.product_impression_id[0]}}if(t.event_label){i.track.evtAction("reviewWriteEnd",t)}}function M(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="Review - Sort - "+e.sort_option;i.track.evtAction("sortReviews",t)}}function F(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="review - helpful - "+e.event_action;i.track.evtAction("rateReviews",t)}}function W(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="review - search - "+e.search_term;i.track.evtAction("searchReviews",t)}}function N(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="review - filter - "+e.sort_option;i.track.evtAction("filterReviews",t)}}function q(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="ask answer - sort - "+e.sort_option;i.track.evtAction("sortAnswers",t)}}function x(e){var t={};var a=i.track.refreshData();if(a&&!X(a)&&a.product_id&&a.product_id.length&&e&&!X(e)){t.event_label=J(a.product_name[0])+" - "+a.product_id[0];t.event_action="ask answer - helpful - "+e.event_action;i.track.evtAction("rateAnswers",t)}}function B(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("addAnswerStart",e)}}function V(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("addAnswerEnd",e)}}function U(){var e={};var t=i.track.refreshData();if(t&&!X(t)&&t.product_id&&t.product_id.length){e.event_label=J(t.product_name[0])+" - "+t.product_id[0];i.track.evtAction("showMoreAnswers",e)}}function G(e){var t={};if(e&&!X(e)){t.event_label=J(e.product_name[0])+" - "+e.product_id[0];i.track.evtAction("removeFromCart",Object.assign({},e,t))}}function Q(e){var t={};var a=i.track.refreshData()||{};if(e&&!X(e)){var n=e.meta.searchInfo.correctedTerms&&e.meta.searchInfo.correctedTerms.length?e.meta.searchInfo.correctedTerms[0]:e.queries.product.parsedSearchTerm();t.event_value=e.meta.searchInfo.totalProductRecords.toString();t.event_action=n;t.search_keyword=n;t.Number_of_On_Site_Search_Results=e.meta.searchInfo.totalProductRecords.toString();i.track.evtAction("searchPageLoaded",Object.assign({},a,t))}}function Y(){}function H(e){e=e||{};if(e["login_source"]){e.event_label=e["login_source"].toLowerCase()}var t=i.track.refreshData()||{};i.track.evtAction("signin",Object.assign({},t,e))}function K(e){e=e||{};if(e["login_source"]){e.event_label=e["login_source"].toLowerCase()}var t=i.track.refreshData()||{};i.track.evtAction("signinFailed",Object.assign({},t,e))}function z(e){if(e&&!X(e)){i.track.evtAction("productThumbnailClick",e)}}function J(e){return e.replace(/(<([^>]+)>)/gi,"")}function X(e){for(var t in e){return false}return true}function Z(e){if(!e){return[]}if(typeof Drupal.behaviors.analyticsBehavior!=="undefined"){return Drupal.behaviors.analyticsBehavior.getProductPositions(e)}else{return[]}}function $(e){if(e&&e.action){i.track.evtAction(e.action,e.payload||{})}}i.track=t})(window.site||{},window.utag_data||{});(function(s,v){v(function(){v(document).on("RPC:RESULT",function(e,t,a,n){if(a&&a.method==="analytics.getDataLayer"){return}var i=JSON.parse(t.responseText)||[];for(var r=0;r<i.length;r++){if(parseInt(i[r].id)===n&&i[r].result&&i[r].result.data){var c=i[r].result.data.dataLayer;if(c){s.elcEvents.dispatch("rpcResponseReceived",c)}}}});function t(e,t){var a=Date.now();return function(){if(a+t-Date.now()<0){e();a=Date.now()}}}if(Drupal.settings.onetrust_enabled){var e=0;var a=0;var n=function(){if(e&&a&&typeof window.loadTealium=="function"){window.loadTealium()}};s.elcEvents.addListener("trackingDataLayer:loaded",function(){a=1;n()});if(Drupal.settings.onetrust_loaded){e=1;n()}s.elcEvents.addListener("onetrust:loaded",function(){e=1;n()})}else{s.elcEvents.addListener("trackingDataLayer:loaded",window.loadTealium||function(){})}s.elcEvents.addListener("tealium:loaded",function(){setTimeout(function(){s.elcEvents.dispatch("track:ready");s.trackingDataLayer.runEvents();s.elcEvents.dispatch("tealium:displayWelcomeLoyaltyTag");if(s.trackingDataLayer.data["enable_scroll_tracking"]){s.elcEvents.dispatch("tealium:enableScrollTracking")}},500)});s.elcEvents.addListener("rpcResponseReceived",s.trackingDataLayer.update);var i=Drupal.behaviors.analyticsBehavior;var r=["addToCart","addToFavorites","checkoutOPC","checkoutSampleAdded","emailSignup","liveChatManualInitiated","liveChatManualPreSurvey","liveChatManualWaiting","liveChatManualChatting","liveChatProactiveDisplayed","liveChatProactiveInitiated","liveChatProactivePreSurvey","liveChatProactiveWaiting","liveChatProactiveChatting","offerFailed","offerSuccessful","profileUpdate","registration","removeFromCart","searchPageLoaded","searchRedirect","signin","signinFailed","productThumbnailClick"];for(var c=0;c<r.length;c++){s.elcEvents.addListener("track:"+r[c],i[r[c]]||s.track[r[c]])}var o=false;function l(){if(o===false){var a=0;if(window.hasOwnProperty("lpTag")&&window.lpTag.hasOwnProperty("events")){o=true;window.lpTag.events.bind({eventName:"OFFER_DISPLAY",func:function(e){if(e.engagementType===1){s.elcEvents.dispatch("track:liveChatProactiveDisplayed")}}});window.lpTag.events.bind({eventName:"OFFER_CLICK",func:function(e){a=e.engagementType;if(e.engagementType===1){s.elcEvents.dispatch("track:liveChatProactiveInitiated")}else{s.elcEvents.dispatch("track:liveChatManualInitiated")}}});window.lpTag.events.bind({eventName:"state",func:function(e){var t="";if(a===1){t="Proactive"}else{t="Manual"}if(e.state==="preChat"){s.elcEvents.dispatch("track:liveChat"+t+"PreSurvey")}if(e.state==="waiting"){s.elcEvents.dispatch("track:liveChat"+t+"Waiting")}if(e.state==="chatting"){s.elcEvents.dispatch("track:liveChat"+t+"Chatting")}}})}}}s.elcEvents.addListener("tealium:liveperson-loaded",function(){l()});l();s.elcEvents.addListener("tealium:livetex-loaded",function(){var e=window.LiveTex;function t(e){s.track.evtLink({event_name:"liveTex",event_category:"Live Chat Interaction",event_action:e.event,event_label:window.location.pathname})}e.addEventListener(e.Event.WELCOME_WINDOW_SHOWN,t);e.addEventListener(e.Event.EMPLOYEE_MESSAGE_SENT,t);e.addEventListener(e.Event.OFFLINE_MESSAGE_SENT,t);e.addEventListener(e.Event.CONVERSATION_STARTED,t);e.addEventListener(e.Event.CALL_STARTED,t);e.addEventListener(e.Event.X_WINDOW_SHOWN,t);e.addEventListener(e.Event.INVITATION_WINDOW_SHOWN,t);e.addEventListener(e.Event.INVITATION_WINDOW_CLOSE,t);e.addEventListener(e.Event.CALLBACK_SENT,t)});s.elcEvents.addListener("tealium:enableScrollTracking",function(){window.tealiumScrollTracker={10:0,25:0,50:0,75:0,100:0};var e=function(e){e=e||{nonInteraction:false};var t=jQuery(document).height();var a=jQuery(document).scrollTop();var n=jQuery(window).height();var i=a+n;var r=parseInt((i/t*100).toFixed(0))+1;for(var c in window.tealiumScrollTracker){if(window.tealiumScrollTracker.hasOwnProperty(c)){if(window.tealiumScrollTracker[c]===0&&r>=parseInt(c)){window.tealiumScrollTracker[c]=1;s.track.evtLink({event_name:"user_scroll",event_category:"Scroll Depth",event_action:document.location.href,event_noninteraction:e.nonInteraction?1:0,event_label:c});if(c==="100"){jQuery(window).off("scroll.tealium")}}}}};e({nonInteraction:true});jQuery(window).on("scroll.tealium",t(e,250))});s.trackingDataLayer.load(window.utag_data)})})(window.site||{},jQuery);(function(s,v){var e={},a={};var d=Drupal.settings.analytics?Drupal.settings.analytics.alt_image_tagging_enabled:false;var u=false;Drupal.behaviors.analyticsBehavior={attached:0,findElementIndex:function(e,t){return _.findIndex(e,function(e){return e===t})},linkToPage:function(){window.open(a.href,a.target)},setLinkCapture:function(e,t){a.href=e;a.target=t},submitForm:function(){e.form.off("submit");e.form.trigger("submit")},stripOutMarkup:function(e){return e.replace(/(<([^>]+)>)/gi,"")},getProductPositions:function(e){var t=[],a;if(window.hasOwnProperty("prodcat")&&prodcat.hasOwnProperty("data")&&prodcat.data.hasOwnProperty("pids")){for(a=0;a<e.length;a++){t.push(this.findElementIndex(prodcat.data.pids,e[a]))}}return t},addToCart:function(e){s.track.addToCart(Object.assign({},e))},addToFavorites:function(e){s.track.addToFavorites(Object.assign({},e))},removeFromCart:function(e){s.track.removeFromCart(Object.assign({},e))},attach:function(c){var o=this;if(o.attached){return}v(".js-site-header__utility-item__link-logo, .site-header__logo a",c).on("click",function(e){var t;e.preventDefault();o.setLinkCapture(v(this).attr("href"),"_self");t={event_name:"logo_click",event_category:"global",event_action:"logo clicked"};s.track.evtLink(t,o.linkToPage)});v("a.js-menu-item-category, a.js-nav-category-trigger",c).on("click",function(){var e=v(this).text();var t=v(this).closest(".node").attr("trackname").split("|",1);var a=t[0].split(" - ");var n=a[1].split(" ").join(">")+">"+e;if(typeof n!=="undefined"&&n!==""){s.track.navigationClick({promo_name:[n]})}});v(document).on("click",".product__image, .js-quickshop-launch-inline",function(){var e=v(this).closest(".js-product-brief");var t=e.attr("data-product-id");if(typeof t!=="undefined"&&t!==""){s.track.productClick({product_id:[t]})}});v(".js-quickshop-launch-inline, .js-quickshop-launch-overlay",c).on("click",function(){var e,t,a,n,i,r;e=v(".content > article",c).attr("trackname");t=v(this).closest(".js-product-brief");i=v(this).attr("data-product-id");r=v.trim(o.stripOutMarkup(t.find(".product-brief__description").find(".product-brief__name span").html()));n=0;if(window.hasOwnProperty("prodcat")&&prodcat.hasOwnProperty("data")&&prodcat.data.hasOwnProperty("pids")){n=o.getProductPositions([i])}a={event_label:r+" - "+v(this).attr("data-product-id"),page_name:"QV | "+r,product_id:[i],product_catagory_name:[e],product_price:[t.find(".js-product-price").text().replace(/\s+/g," ").trim()],product_position:n};s.track.quickView(a)});v(window).on("OMNISEARCH",function(){var e,t;e=v(".js-typeahead-wrapper a");t=v(".js-end-esearch-nav__form input#search").val();e.on("click",function(){var e;event.preventDefault();o.setLinkCapture(v(this).attr("href"),"_self");e={event_label:t,search_keyword:t,product_sku:"SKU"+v(this).closest(".product-brief").attr("data-sku-base-id"),product_id:v(this).closest(".js-product").attr("data-product-id"),product_name:o.stripOutMarkup(v(this).closest(".js-product").find("h3 a").text())};s.track.evtAction("searchOneResultSelected",e,o.linkToPage)})});v(document).on("click",".js-mpp-filter-set__button",function(){var e,t;t=v(this).text().trim();var a=v(this).parent().siblings().text();e={event_category:"filter & sort selection",event_label:t,event_action:"filter"+"-"+a};s.track.evtAction("filterProducts",e)});v(document).on("change",".js-mpp-sort-menu",function(){var e,t;t=v("option:selected",this).text();e={event_category:"filter & sort selection",event_action:"sortby",event_label:t};s.track.evtLink(e)});v(".social-media-links a",c).on("click",function(){var e=v(this).attr("href");var t={event_action:e,event_label:window.location.href};s.track.evtAction("socialLink",t)});v(document).on("click","#checkout_signin_guest_user-submit, #checkout_signin_new_user-submit",function(){var e={};s.track.evtAction("checkoutGuestUser",e)});v(document).on("click","#checkout_signin-submit",function(){var e={};s.track.evtAction("checkoutReturnUser",e)});var e=["#checkout_billing input.form-submit",".js-chckt-button-containe","input.js-paypal-continue-btn","#checkout_review input.place-order","#checkout_review input.continue-to-paypal"];v(document).on("click",e.join(","),function(){var e="";var t=["PP_PayPal","PayPal"];var a=["Credit Card","PP_Adyen"];var n=v("input[name=PAYMENT_TYPE]:checked").val()||v("input[name=PAYMENT_TYPE]").val()||v("input[name=PAYMENT_METHOD]:checked").val()||v("input[name=PAYMENT_METHOD]").val();if(v.inArray(n,t)>-1){e="paypal"}else if(v.inArray(n,a)>-1){e="creditcard"}var i={event_label:e};if(e.length!==0){s.track.evtAction("checkoutPaymentSelected",i)}});v("a.paypal-checkout").on("click",function(){var e={event_label:"paypal"};s.track.evtAction("checkoutPaymentSelected",e)});if(v("body").hasClass("section-product")&&d){if(v("body").hasClass("device-pc")&&v(".js-spp-carousel__thumbnail").length>1){t();a()}else if(v("body").hasClass("device-mobile")){n()}}function t(){v(document).on("click",".js-spp-carousel__thumbnail, .slick-arrow",function(){u=true;var e=v(this);var t="";var a;var n;if(e.hasClass("js-spp-carousel__thumbnail")){a=i(e);n=e.find(".js-product-image").attr("src")}else if(e.hasClass("slick-arrow")){a=i(e);n=v(".active-main.slick-active > img.js-product-image")[0].src}if(n){t=r(n)}l(t,a[0],a[1],"click")})}function a(){v(document).on("afterChange",".js-spp-carousel",function(){if(!u){var e=v(this);var t="";var a=i(e);var n=e.find(".slick-current img").attr("src");if(n){t=r(n)}l(t,a[0],a[1],"drag")}u=false})}function n(){v(document).on("afterChange",".js-spp-carousel",function(){var e=v(this);var t="";var a=i(e);var n=e.find(".slick-current img").attr("src");if(n){t=r(n)}l(t,a[0],a[1],"swipe")})}function i(e){var t=e.closest(".js-product");var a=t.attr("data-product-id");var n=t.find(".product-full__content .product-full__name").text();return[n,a]}function r(e){var t=e.split("/");var a=t[t.length-1].split(".")[0];return a}function l(e,t,a,n){var i={event_action:"alt image - "+e+" - "+n,event_label:t+" - "+a};s.track.productThumbnailClick(i)}o.attached=1}}})(window.site||{},jQuery);(function(s,v){window.loadTealium=function(e,t,a,n){var i=Drupal.settings.analytics.tealium_profile_by_locale;var r=Drupal.settings.analytics.tealium_profile;var c=Drupal.settings.analytics.tealium_url||"tags.tiqcdn.com";if(i){var o=document.cookie.match(new RegExp("(?:^|; )LOCALE=([^;]*)"));if(o&&o.length!==0){var l=o[1];if(i[l]!==undefined){r=i[l]}else{r=Drupal.settings.analytics.tealium_profile}}else{r=Drupal.settings.analytics.tealium_profile}}window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.path="//"+c+"/utag/esteelauder/"+r+"/"+Drupal.settings.analytics.tealium_env+"/";if(Drupal.settings.common&&Drupal.settings.common.stardust){if(v&&v["elc-service-analytics"]){window.utag_cfg_ovrd.noview=true}}e=window.utag_cfg_ovrd.path+"utag.js";t=document;a="script";n=t.createElement(a);n.src=e;n.type="text/java"+a;n.async=true;e=t.getElementsByTagName(a)[0];e.parentNode.insertBefore(n,e);n.handlerFlag=0;n.onreadystatechange=function(){if((this.readyState==="complete"||this.readyState==="loaded")&&!n.handlerFlag){n.handlerFlag=1;s.elcEvents.dispatch("tealium:loaded")}};n.onload=function(){if(!n.handlerFlag){n.handlerFlag=1;s.elcEvents.dispatch("tealium:loaded")}}}})(window.site||{},window.ServiceRegistry||{});var site=window.site;var Drupal=window.Drupal;(function(e){Drupal["settings"]["onetrust_enabled"]=1})(site||{});function OptanonWrapper(){if(typeof site!=="undefined"&&typeof site.trackingDataLayer!=="undefined"){if(typeof site.trackingDataLayer.data["onetrust_active_groups"]==="undefined"){site.trackingDataLayer.update({onetrust_enabled:1,onetrust_active_groups:window.OnetrustActiveGroups});site.elcEvents.dispatch("onetrust:loaded");Drupal.settings.onetrust_loaded=1}else if(window.OnetrustActiveGroups.length!==site.trackingDataLayer.data["onetrust_active_groups"].length){var e=window.OnetrustActiveGroups.replace(site.trackingDataLayer.data["onetrust_active_groups"],",");site.track.evtView(Object.assign({},site.trackingDataLayer.data,{onetrust_active_groups:e}));site.trackingDataLayer.update({onetrust_active_groups:window.OnetrustActiveGroups})}}}
//# sourceMappingURL=toofaced-lytics.mjs-bundle.js.map
