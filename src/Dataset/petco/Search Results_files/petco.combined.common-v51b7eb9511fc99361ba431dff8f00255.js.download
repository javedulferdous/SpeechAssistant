function hideInactivityWarningDialog(){dijit.byId("inactivityWarningPopup")&&dijit.byId("inactivityWarningPopup").hide()}function resetServerInactivity(){dojo.xhrPost({url:getAbsoluteURL()+"Ping",handleAs:"json-comment-filtered",content:null,service:this,load:function(e,t){e.success?initializeInactivityWarning():console.error("Ping service failed")},error:function(e,t){console.error("Ping service failed")}})}function byId(e){return document.getElementById(e)}function focusSetter(){dojo.byId("MiniCartFocusReceiver1")?dojo.byId("MiniCartFocusReceiver1").focus():dojo.byId("MiniCartFocusReceiver2").focus()}function determineFocus(e){if(e.shiftKey&&e.keyCode==dojo.keys.TAB)if(e.srcElement){if("MiniCartFocusReceiver1"==e.srcElement.id){dojo.byId("WC_MiniShopCartDisplay_link_5")&&dojo.byId("WC_MiniShopCartDisplay_link_5").focus();dojo.stopEvent(e)}else if("MiniCartFocusReceiver2"==e.srcElement.id){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(e)}}else if("MiniCartFocusReceiver1"==e.target.id){dojo.byId("WC_MiniShopCartDisplay_link_5")&&dojo.byId("WC_MiniShopCartDisplay_link_5").focus();dojo.stopEvent(e)}else if("MiniCartFocusReceiver2"==e.target.id){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(e)}}function destroyDialog(e){void 0==e&&(e="quick_cart_container");dojo.query(".dijitDialog",document).forEach(function(t){dijit.byNode(t).id==e&&dijit.byNode(t).destroyRecursive()});void 0!=e&&"quick_cart_container"==e?dropDownDlg=null:productAddedDropDownDlg=null}function hideUnderlayWrapper(){dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(e){e.style.display="none"})}function loadLink(e){document.location.href=e}function clearSearchField(){searchText=document.getElementById("SimpleSearchForm_SearchTerm").value;if(searchText==document.getElementById("searchTextHolder").innerHTML)document.getElementById("SimpleSearchForm_SearchTerm").value="";else{document.getElementById("SimpleSearchForm_SearchTerm").select();showAutoSuggestIfResults();autoSuggestHover=!1}}function fillSearchField(){if(""==document.getElementById("SimpleSearchForm_SearchTerm").value){document.getElementById("SimpleSearchForm_SearchTerm").className="form-control";document.getElementById("SimpleSearchForm_SearchTerm").value=document.getElementById("searchTextHolder").innerHTML}autoSuggestHover||showAutoSuggest(!1)}function showDropDownMenu(){var e=document.getElementById("header_menu_dropdown");null!=document.getElementById("header_menu_dropdown")&&"undefined"!=document.getElementById("header_menu_dropdown")&&(e.style.display="block");if(null!=document.getElementById("outerCartContainer")&&"undefined"!=document.getElementById("outerCartContainer")){var t=document.getElementById("outerCartContainer");t.style.display="block"}}function initShopcartTarget(){dojo.subscribe("/dnd/drop",function(e,t,o,r){e!=r&&r.deleteSelectedNodes();var n=new popupActionProperties;n.showProductCompare=showProductCompare;if("miniShopCart_dndTarget"==r.parent.id){var a=e.parent.id.indexOf("_",0);a>=0&&(e.parent.id=e.parent.id.substring(a+1));"item"==e.node.getAttribute("dndType")||"package"==e.node.getAttribute("dndType")?categoryDisplayJS.AddItem2ShopCartAjax(e.parent.id,1):"product"!=e.node.getAttribute("dndType")&&"bundle"!=e.node.getAttribute("dndType")||showPopup(e.parent.id,function(e){return e},"miniShopCart_dndTarget",null,n)}})}function cursor_wait(e){var t=!0;1==e&&dojo.isOpera>0&&(t=!1);t&&!cursorDisplayTimeout&&(cursorDisplayTimeout=setTimeout("showProgressBar()",500))}function showProgressBar(){displayProgressBar()}function displayProgressBar(){var e=document.getElementById("petco-loader"),t=document.getElementById("loader-screen");null!=e&&(e.style.display="block");null!=t&&(t.style.display="block");setTimeout("cursor_clear()",3e4)}function displayProgressBarForOrderProcess(e){showPopup=!0;1==e&&dojo.isOpera>0&&(showPopup=!1);var t=document.getElementById("petco-loader"),o=document.getElementById("loader-screen");if(showPopup&&null!=t){t.style.display="block";null!=o&&(o.style.display="block")}}function setCurrentId(e){requestSubmitted||""!=this.currentId||(this.currentId=e)}function trim(e){word=e.toString();for(var t=0,o=word.length-1;" "==word.charAt(t);)t++;for(;" "==word.charAt(o);)o-=1;return t>o?word.substring(t,t):word.substring(t,o+1)}function cursor_clear(){if(cursorDisplayTimeout){clearTimeout(cursorDisplayTimeout);cursorDisplayTimeout=null}requestSubmitted=!1;var e=document.getElementById("petco-loader"),t=document.getElementById("loader-screen");null!=e&&(e.style.display="none");null!=t&&(t.style.display="none")}function submitRequest(){if(!requestSubmitted){requestSubmitted=!0;return!0}return!1}function resetRequest(){requestSubmitted=!1}function setPageLocation(e){void 0!=document.getElementById("freeItemCheck")&&null!=document.getElementById("freeItemCheck")&&1==document.getElementById("freeItemCheck").value&&(e=e+"&freeItemId="+document.getElementById("freeItemId").value);submitRequest()&&(document.location.href=e)}function checkForFreeItem(e){document.getElementById("freeItemCheck").value=e}function submitSpecifiedForm(e){if(submitRequest()){console.debug("form.action == "+e.action);e.submit()}}function parseWidget(e){}function parseAllWidgets(){for(var e=0;e<widgetsList.length;e++)parseWidget(widgetsList[e])}function addToWidgetsList(e){widgetsList.push(e)}function parseWCCEAWidget(e){var t,o=ceadijit.byId(e);if(null==o||void 0==o){t=null==e||void 0==e?ceadojo.body():ceadojo.byId(e);null!=t&&void 0!=t&&(null!=t.getAttribute("ceadojoType")&&void 0!=t.getAttribute("ceadojoType")?ceadojo.parser.instantiate([t]):ceadojo.parser.parse(t))}}function parseHeader(e){var t=(dojo.byId("progress_bar_dialog"),document.getElementById("header_menu_loaded")),o=document.getElementById("header_menu_overlay");if(0==currentId.length&&null!=document.getElementById("header_menu_loaded")&&"undefined"!=document.getElementById("header_menu_loaded")&&null!=document.getElementById("header_menu_overlay")&&"undefined"!=document.getElementById("header_menu_overlay")&&"none"==document.getElementById("header_menu_loaded").style.display){setCurrentId(null!=e&&void 0!=e?e:o.id);submitRequest();cursor_wait();o.style.display="none";parseWidget("header_menu_loaded");t.style.display="block";cursor_clear();try{void 0==window.top._ceaCollabDialog&&null==window.top._ceaCollabDialog||dijit.registry.byClass("wc.widget.WCDropDownButton").forEach(function(e){dojo.connect(e,"_onDropDownClick",dojo.hitch(window.top._ceaCollabDialog,"topCategoryClicked",e.getURL()));dojo.connect(e,"onKeyPress",window.top._ceaCollabDialog,function(t){t.keyCode==dojo.keys.ENTER&&window.top._ceaCollabDialog.topCategoryClicked(e.getURL())})})}catch(e){console.log(e)}}}function hideElementById(e){var t=dojo.byId(e);t.style.display="none"}function showElementById(e){var t=dojo.byId(e);t.style.display="block"}function hideBackgroundImage(e){e.style.backgroundImage="none"}function showBackgroundImage(e){e.style.backgroundImage="url("+getImageDirectoryPath()+getStyleDirectoryPath()+"product_hover_background.png)"}function checkIE8Browser(){dojo.isIE&&dojo.isIE<=8&&(correctBrowser=!0)}function ApprovalToolLink(e,t){checkIE8Browser();correctBrowser?RFQwindow=window.open(t):MessageHelper.formErrorHandleClient(e,MessageHelper.messages.ERROR_INCORRECT_BROWSER)}function updateViewAndBeginIndexForCurrencyChange(){if(null!=document.getElementById("fastFinderResultControls")&&""!=document.getElementById("fastFinderResultControls")){null!=document.SetCurrencyPreferenceForm.pageView&&(document.SetCurrencyPreferenceForm.pageView.value=document.FastFinderForm.pageView.value);null!=document.SetCurrencyPreferenceForm.beginIndex&&(document.SetCurrencyPreferenceForm.beginIndex.value=document.FastFinderForm.beginIndex.value)}else if(null!=document.getElementById("CategoryDisplay_Widget")&&""!=document.getElementById("CategoryDisplay_Widget")){""!=wc.render.getContextById("CategoryDisplay_Context").properties.pageView&&null!=document.SetCurrencyPreferenceForm.pageView&&(document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView);""!=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex&&null!=document.SetCurrencyPreferenceForm.beginIndex&&(document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex)}else if(null!=document.getElementById("Search_Result_Summary")&&""!=document.getElementById("Search_Result_Summary")){""!=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView&&null!=document.SetCurrencyPreferenceForm.pageView&&(document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView);""!=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum&&null!=document.SetCurrencyPreferenceForm.beginIndex&&(document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum)}else if(null!=document.getElementById("Search_Result_Summary2")&&""!=document.getElementById("Search_Result_Summary2")){""!=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView&&null!=document.SetCurrencyPreferenceForm.pageView&&(document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView);""!=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum&&null!=document.SetCurrencyPreferenceForm.beginIndex&&(document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum)}try{void 0==window.top._ceaCollabDialog&&null==window.top._ceaCollabDialog||(dojo.byId("SetCurrencyPreferenceForm").URL.value=dojo.byId("SetCurrencyPreferenceForm").URL.value+"&coshopChangeCurrency="+dojo.byId("currencySelection").options[dojo.byId("currencySelection").selectedIndex].value)}catch(e){console.log(e)}}function updateViewAndBeginIndexForLanguageChange(){if(null!=document.getElementById("fastFinderResultControls")&&""!=document.getElementById("fastFinderResultControls")){null!=document.LanguageSelectionForm.pageView&&(document.LanguageSelectionForm.pageView.value=document.FastFinderForm.pageView.value);null!=document.LanguageSelectionForm.beginIndex&&(document.LanguageSelectionForm.beginIndex.value=document.FastFinderForm.beginIndex.value)}else if(null!=document.getElementById("CategoryDisplay_Widget")&&""!=document.getElementById("CategoryDisplay_Widget")){""!=wc.render.getContextById("CategoryDisplay_Context").properties.pageView&&null!=document.LanguageSelectionForm.pageView&&(document.LanguageSelectionForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView);""!=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex&&null!=document.LanguageSelectionForm.beginIndex&&(document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex)}else if(null!=document.getElementById("Search_Result_Summary")&&""!=document.getElementById("Search_Result_Summary")){""!=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView&&null!=document.LanguageSelectionForm.pageView&&(document.LanguageSelectionForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView);""!=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum&&null!=document.LanguageSelectionForm.beginIndex&&(document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum)}else if(null!=document.getElementById("Search_Result_Summary2")&&""!=document.getElementById("Search_Result_Summary2")){""!=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView&&null!=document.LanguageSelectionForm.pageView&&(document.LanguageSelectionForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView);""!=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum&&null!=document.LanguageSelectionForm.beginIndex&&(document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum)}try{void 0==window.top._ceaCollabDialog&&null==window.top._ceaCollabDialog||(dojo.byId("LanguageSelectionForm").action=dojo.byId("LanguageSelectionForm").action+"&langId="+dojo.byId("languageSelection").options[dojo.byId("languageSelection").selectedIndex].value)}catch(e){console.log(e)}}function showHeaderLinksInTwoLines(){if(null!=document.getElementById("header_links")&&"undefined"!=document.getElementById("header_links")){if(dojo.contentBox(document.getElementById("header_links")).w>750){null!=document.getElementById("header_links1")&&"undefined"!=document.getElementById("header_links1")&&(document.getElementById("header_links1").style.display="block");null!=document.getElementById("headerHomeLink")&&"undefined"!=document.getElementById("headerHomeLink")&&(document.getElementById("headerHomeLink").style.display="none");null!=document.getElementById("headerShopCartLink")&&"undefined"!=document.getElementById("headerShopCartLink")&&(document.getElementById("headerShopCartLink").style.display="none")}document.getElementById("header_links").style.visibility="visible"}}function showLinksInOneLine(){null!=document.getElementById("header_links")&&"undefined"!=document.getElementById("header_links")&&(document.getElementById("header_links").style.visibility="visible")}function isNonNegativeInteger(e){var t=new RegExp(/^\d*$/);return null!=e&&""!=e&&t.test(e)}function isPositiveInteger(e){return isNonNegativeInteger(e)&&0!=e}function closeAllDialogs(){dijit.registry.byClass("dijit.Dialog").forEach(function(e){e.hide()})}function setWarningMessageCookie(e){dojo.cookie("signon_warning_cookie",e,{path:"/"})}function removeCookie(e){dojo.cookie(e,null,{expires:-1})}function getCookie(e){for(var t=document.cookie.split(";"),o=0;o<t.length;o++){var r=t[o].indexOf("="),n=t[o].substr(0,r);n=n.replace(/^\s+|\s+$/g,"");if(n==e)return unescape(t[o].substr(r+1))}}function setCookie(e,t,o){var r=e+"="+encodeURIComponent(t)+";path=/";if("string"==typeof o){r+="; domain="+o;document.cookie=r}else document.cookie=r}function setRememberMeStatus(){var e=document.forms.Logon.rememberMe;null!==e&&(e.checked?dojo.cookie("rememberMe","true",{expires:4}):removeCookie("rememberMe"))}function isStorePreview(e,t){return e.indexOf(t)>-1}function hideESpotInfoPopup(e,t){if(null==t||"keypress"!=t.type||"27"==t.keyCode){var o=dijit.byId(e);null!=o&&o.hide()}}function showESpotInfoPopup(e,t){if((null==t||"keypress"!=t.type||"13"==t.keyCode)&&parent.checkPopupAllowed()){var o=dijit.byId(e);null!=o&&o.show()}}function incrementNumAjaxRequest(){"undefined"!=numAjaxRequests&&numAjaxRequests++}function decrementNumAjaxRequest(){"undefined"!=numAjaxRequests&&0!=numAjaxRequests&&numAjaxRequests--}function updateParamObject(e,t,o,r,n){null==e&&(e=[]);if(null!=e[t]&&r)if(dojo.lang.isArrayLike(e[t]))null!=n&&""!=n?e[t][n]=o:e[t].push(o);else{var a=e[t];e[t]=[];e[t].push(a);e[t].push(o)}else if(null!=n&&""!=n&&n!=-1)e[t+"_"+n]=o;else if(n==-1){for(var i=1;null!=e[t+"_"+i];)i++;e[t+"_"+i]=o}else e[t]=o;return e}function showSection(e){var t=dojo.byId(e);null!=t&&"undefined"!=t&&(t.style.visibility="visible")}function hideSection(e){var t=dojo.byId(e);null!=t&&"undefined"!=t&&(t.style.visibility="")}function shiftTabHideSection(e,t){t.shiftKey&&t.keyCode==dojo.keys.TAB&&hideSection(e)}function tabHideSection(e,t,o){if(!t.shiftKey&&t.keyCode==dojo.keys.TAB){null!=o&&dojo.byId(o).focus();hideSection(e);dojo.stopEvent(t)}}function saveShiftTabPress(e){1==e.shiftKey&&9==e.keyCode&&(tabPressed=!0)}function saveTabPress(e){0==e.shiftKey&&9==e.keyCode&&(tabPressed=!0)}function setFocus(e){if(tabPressed){tabPressed=!1;document.getElementById(e).focus()}}function increaseHeight(e,t){var o=document.getElementById(e).offsetHeight;document.getElementById(e).style.height=o+t+"px"}function redirectToSignOn(e){if("undefined"!=typeof e)var t=e;else var t=location.href;t="OrderItemMove?continue=1&createIfEmpty=1&updatePrices=0&deleteIfEmpty=*&fromOrderId=*&toOrderId=.&page=&calculationUsageId=-1&URL="+encodeURIComponent("OrderCalculate?URL="+encodeURIComponent(t));document.location.href="LogonForm?myAcctMain=1&storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&URL="+encodeURIComponent(t)}function handlePopup(e,t){currentPopup==t?document.location.href=e:currentPopup=t}function isAndroid(){if(null==android&&null!=navigator&&null!=navigator.userAgent){var e=navigator.userAgent.toLowerCase();android=e.indexOf("android")>-1}return android}function isIOS(){if(null==ios&&null!=navigator&&null!=navigator.userAgent){var e=navigator.userAgent.toLowerCase();ios=e.indexOf("ipad")>-1||e.indexOf("iphone")>-1||e.indexOf("ipod")>-1}return ios}function outlineSpots(){dojo.addClass(document.body,"editMode");dojo.query(".carousel > .content").style({zIndex:"auto"});dojo.query(".ESpotInfo").style({display:"block"});dojo.query(".searchScore").style({display:"block"});dojo.query(".editManagedContent").style({display:"block"});for(var e=dojo.query(".genericESpot,.product,.searchResultSpot,.productDetail,.categorySpot"),t=0;t<e.length;t++){var o=e[t];if(dojo.hasClass(o,"emptyESpot")){var r=dojo.query(".ESpotInfo",o)[0].offsetWidth+4,n=dojo.query(".ESpotInfo",o)[0].offsetHeight+4;dojo.attr(o,"_width",dojo.style(o,"width"));dojo.attr(o,"_height",dojo.style(o,"height"));dojo.style(o,{width:+r+"px",height:n+"px"})}0==dojo.query(".borderCaption",o).length?dojo.place("<div class='borderCaption'></div>",o,"first"):dojo.query(".borderCaption",o).style({display:"block"});if(o.addEventListener){o.addEventListener("mouseover",function(e){if(window.parent.frames[0].isSpotsShown()){dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",this)[0],{display:"block"});e.stopPropagation()}},!1);o.addEventListener("mouseout",function(e){if(window.parent.frames[0].isSpotsShown()){dojo.query(".caption",this).style({display:"none"});e.stopPropagation()}},!1)}else if(o.attachEvent){o.onmouseover=function(e){return function(){if(window.parent.frames[0].isSpotsShown()){dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",e)[0],{display:"block"});window.event.cancelBubble=!0}}}(o);o.onmouseleave=function(e){return function(){if(window.parent.frames[0].isSpotsShown()){dojo.query(".caption",e).style({display:"none"});window.event.cancelBubble=!0}}}(o)}}}function hideSpots(){dojo.removeClass(document.body,"editMode");dojo.query(".carousel > .content").style({zIndex:""});dojo.query(".ESpotInfo").style({display:"none"});dojo.query(".caption").style({display:"none"});dojo.query(".searchScore").style({display:"none"});dojo.query(".editManagedContent").style({display:"none"});dojo.query(".borderCaption").style({display:"none"});dojo.query(".emptyESpot").forEach(function(e){dojo.style(e,{width:dojo.attr(e,"_width")+"px"});dojo.style(e,{height:dojo.attr(e,"_height")+"px"})})}function logout(e){var t="false";null!=document.getElementById("dbAuthEnabledFlag")&&"undefined"!=document.getElementById("dbAuthEnabledFlag")&&(t=document.getElementById("dbAuthEnabledFlag").value);if("false"==t){var o=document.createElement("img");o.src=document.getElementById("isamLogOffURL").value;document.body.appendChild(o)}setDeleteCartCookie();var r="";null!=dojo.byId("cookieDomain")&&(r=dojo.byId("cookieDomain").value);if(checkDeleteCartCookie()){var n=getCookie("WC_CartOrderId_"+WCParamJS.storeId);if(null!=n){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var a=getCookie("WC_CartTotal_"+n);null!=a&&dojo.cookie("WC_CartTotal_"+n,null,{expires:-1,path:"/"});var i=getCookie("rCartTotal");null!=i&&dojo.cookie("rCartTotal",null,{expires:-1,path:"/",domain:r})}}if(null!=getCookie("rememberMe")){removeCookie("rememberMe");dojo.cookie("pfirstname",null,{expires:-1,path:"/"})}var d=window.location.hostname;dojo.cookie("pfirstname",null,{expires:-1,path:"/",domain:d});dojo.cookie("ptealiumData",null,{expires:-1,path:"/",domain:d});dojo.cookie("pcustData",null,{expires:-1,path:"/",domain:d});dojo.cookie("rfirstName",null,{expires:-1,path:"/",domain:r});dojo.cookie("GetMember_cookie",null,{expires:-1,path:"/",domain:r});window.localStorage.removeItem("persist:nextjs");"false"==t?setTimeout(function(){document.location.href=e},500):document.location.href=e}function sitePromotionTag(e,t,o){var r="";if(document.getElementById("tel_page_type")&&o)r=document.getElementById("tel_product_sku")&&document.getElementById("productPartNo")?"PDP":"Category"==document.getElementById("tel_page_type").value?"CategoryPage":"Home"==document.getElementById("tel_page_type").value?"HomePage":"receipt"==document.getElementById("tel_page_type").value?"Order Confirmation":"Search"==document.getElementById("tel_page_type").value?"Search":"account"==document.getElementById("tel_page_type").value?"MyAccount":"ShoppingCart"==document.getElementById("tel_page_type").value?"ShoppingCart":"SubCategory"==document.getElementById("tel_page_type").value||"Search"==document.getElementById("tel_page_type").value?"Product List Browse & Search":"HomePage";else if(document.getElementById("tel_page_type")){var n=document.getElementById("tel_page_type").value,a=document.getElementById("tel_page_category").value,i=document.getElementById("tel_page_subcategory").value,d="";document.getElementById("dept_page")&&(d=document.getElementById("dept_page").value);if(document.getElementById("tel_product_pet_type")){var s=document.getElementById("tel_product_pet_type").value,l=new Array;if(s.indexOf(":")!=-1){l=s.split(":");s=l[l.length-1]}}document.getElementById("tel_product_sku")?r=s+"PDP":"Category"==n&&"true"==d?r=a+"Category":"SubCategory"==n&&"true"==d?r=i+"Category":"SubCategory"!=n&&"Search"!=n||""!=d||(r="Search"==n?a+"PL":i+"PL")}if(""==r){document.getElementById("WC_UserRegistrationAddForm_FormInput_page_In_Register_1")&&(r="Registration");document.getElementById("WC_AccountDisplay_FormInput_ActivePage_In_Logon_1")&&(r="Sign In")}}function scrollToTop(e){var t=-window.scrollY/(e/15),o=setInterval(function(){0!=window.scrollY?window.scrollBy(0,t):clearInterval(o)},15)}function cmManuallyTriggerEventTrack(e){try{var t="";dojo.attr(e,"manual_cm_sp")?t=dojo.attr(e,"manual_cm_sp"):dojo.attr(e,"manual_cm_re")&&(t=dojo.attr(e,"manual_cm_re"));if("function"==typeof cmCreateElementTag&&""!=t){var o=t.split("-_-"),r=null,n=null,a=null;o.length>0&&(r=o[0]);o.length>1&&(n=o[1]);o.length>2&&(a=o.slice(2).join("-_-"));cmCreateElementTag(n,r,a)}}catch(e){console.log("Error occurred in cmManuallyTriggerEventTrack(). "+e);return!0}}function appendCurrentPageUrl(e){var t=window.location.href,o=e.getAttribute("href");o&&t.indexOf("TopCategories")==-1&&t.indexOf("CSR")==-1&&t.indexOf("LogonForm")==-1&&e.setAttribute("href",o+"&URL="+t)}function fnTriggerClickOnEnter(e){var t=$(e.target).data("element-to-click"),o=e.keyCode?e.keyCode:e.which;13!==o&&32!==o||$("#"+t).trigger("click")}function applyCouponPromotion(){var e=document.getElementById("promoName").value,t=[];t.storeId="${storeId}";t.langId="${langId}";t.catalogId="${catalogId}";t.promotionName=e;if(null!=document.getElementById("addOnSubscriptionId")){var o=document.getElementById("addOnSubscriptionId").value,r=document.getElementById("ffmtdate").value;t.ffmtdate=r;t.addOnSubscriptionId=o;t.isRDAddOnCoupon="true"}t.URL="CouponsDisplayView";wc.service.invoke("AjaxCouponIssue",t)}function applyRealImageToImprovePerf(){$("img[imgSrcToLoad]").each(function(e,t){var o=$(t).attr("imgSrcToLoad");if("undefined"!=typeof o){t.src=o;$(t).removeAttr("imgSrcToLoad")}});$("source[imgSrcToLoad]").each(function(e,t){var o=$(t).attr("imgSrcToLoad");if("undefined"!=typeof o){t.srcset=o;$(t).removeAttr("imgSrcToLoad")}})}function applyRealImageToImprovePerfOnImgLoad(e){if(applyRealImageToImprovePerf_loaded&&null!=e&&""!=e){var t=$(e).attr("imgSrcToLoad");if("undefined"!=typeof t){e.src=t;$(e).removeAttr("imgSrcToLoad")}$(e).parent("picture").find("source").each(function(e,t){var o=$(t).attr("imgSrcToLoad");if("undefined"!=typeof o){t.srcset=o;$(t).removeAttr("imgSrcToLoad")}})}}function getForUserIdParam(e,t){forUserIdParam="";if("undefined"!=typeof wcCommonRequestParameters&&null!=wcCommonRequestParameters.forUserId){e&&t?forUserIdParam="%26":e&&(forUserIdParam="&");forUserIdParam+="forUserId";t?forUserIdParam+="%3D":forUserIdParam+="=";forUserIdParam+=wcCommonRequestParameters.forUserId}return forUserIdParam}function getAbsoluteURL(){if(""!=absoluteURL){var e=document.URL,t="";e.indexOf("://")!=-1&&(t=e.substring(0,e.indexOf("://")));var o="";absoluteURL.indexOf("://")!=-1&&(o=absoluteURL.substring(0,absoluteURL.indexOf("://")));t!=o&&(absoluteURL=t+absoluteURL.substring(absoluteURL.indexOf("://")))}return absoluteURL}function getImageDirectoryPath(){return imageDirectoryPath}function getStyleDirectoryPath(){return styleDirectoryPath}function appendWcCommonRequestParameters(e){var t="";if("undefeined"!=typeof WCParamJS){"undefeined"!=typeof WCParamJS.catalogId&&null!=typeof WCParamJS.catalogId&&(t=t+"catalogId="+WCParamJS.catalogId);"undefeined"!=typeof WCParamJS.storeId&&null!=typeof WCParamJS.storeId&&(t=t+"&storeId="+WCParamJS.storeId);"undefeined"!=typeof WCParamJS.langId&&null!=typeof WCParamJS.langId&&(t=t+"&langId="+WCParamJS.langId);e=e.indexOf("?")==-1?e+"?"+t:e+"&"+t}return e}function pingPetcoUserType(){var e=new Date,t=e.getTime(),o=18e5,r=t+o,n=getCookie("isNewEASession")?getCookie("isNewEASession"):"",a=getCookie("isEASession")?getCookie("isEASession"):"",i=getCookie("isOBOSession")?getCookie("isOBOSession"):"",d=!1;"yes"!=n.toLowerCase()&&"yes"!=a.toLowerCase()&&"yes"!=i.toLowerCase()||(d=!0);if(d)wc.service.invoke("pingPetcoUserTypeAction",parameters);else if(null!=localStorage.getItem("pingPetcoUserType_Expiry")){var s=localStorage.getItem("pingPetcoUserType_Expiry");if(1*s>t){var l=getCookie("WC_UserType")?getCookie("WC_UserType"):"",c=getCookie("WC_UserId")?getCookie("WC_UserId"):"";if(""!=l&&""!=c)invokeCookieForLoginUser(l,c);else{localStorage.setItem("pingPetcoUserType_Expiry",r);wc.service.invoke("pingPetcoUserTypeAction",parameters)}}else{localStorage.setItem("pingPetcoUserType_Expiry",r);wc.service.invoke("pingPetcoUserTypeAction",parameters)}}else{localStorage.setItem("pingPetcoUserType_Expiry",r);wc.service.invoke("pingPetcoUserTypeAction",parameters)}}function petco_loadScriptDefered(e,t,o){document.addEventListener("DOMContentLoaded",function(){const r=function(){document.removeEventListener("scroll",r);window.removeEventListener("resize",r);window.removeEventListener("orientationchange",r);window.removeEventListener("mousemove",r);window.removeEventListener("touchstart",r);setTimeout(function(){if("script"==t&&0==document.querySelectorAll('script[uniqueid="'+o+'"]').length){var r=document.createElement("script");r.src=e;r.setAttribute("uniqeid",o);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(r,n)}},50)};document.addEventListener("scroll",r);window.addEventListener("resize",r);window.addEventListener("mousemove",r);window.addEventListener("touchstart",r);window.addEventListener("orientationchange",r)})}function activateRatings(){$.each($('input[id^="star_input_"]'),function(e,t){var o=t.id.replace("star_input_",""),r=parseFloat($(t).val()),n=5;if(!isNaN(r)){var a=Math.round(100*r/n);a>100&&(a=100);$.each($("#star_limiter_"+o+" .longbar"),function(e,t){t.style.maxWidth=a+"%"})}})}function onGoogleSuccess(e){var t=e.getAuthResponse().id_token,o=gapi.auth2.getAuthInstance();o.disconnect();processGoogleSignOn(t,!1)}function onGoogleFailure(e){console.log(e)}function processGoogleSignOn(e,t){if(e){var o=[];o.gAuthToken=e;if(t){o.isGoogleOneTap=t;o.currentURL=$(location).attr("href");($(location).attr("href").indexOf("/LogonForm")>0||$(location).attr("href").indexOf("/UserRegistrationForm")>0)&&(o.viaSignInOrCreateAccountPage=!0)}void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_1").val()?o.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_1").val()):void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_2").val()?o.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_2").val()):void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_3").val()&&(o.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_3").val()));wc.service.invoke("AjaxPetcoGoogleSignonRegistration",o)}else console.log("token is empty")}function handleCredentialResponse(e){processGoogleSignOn(e.credential,!0)}function renderGoogleButton(){gapi.signin2.render("petco-google-signin",{scope:"profile email",width:240,height:50,longtitle:!0,theme:"light",onsuccess:onGoogleSuccess,onfailure:onGoogleFailure});setTimeout(function(){var e=$(".button-text").data("button-name");$(".continue-google .abcRioButtonContents span").html(e)},500)}function googleInit(){console.log("googleInit");gapi.load("auth2",function(){gapi.auth2.init()});var e=document.getElementById("petco-google-signin");e&&renderGoogleButton()}function googleSignOut(e){var t=gapi.auth2.getAuthInstance();t?t.signOut().then(function(){console.log("Google User signed out.");logout(e)}):logout(e)}function processAppleSignOn(e){if(e.detail.authorization){var t=[];t.appleAuthToken=e.detail.authorization.code;if(e.detail.user){t.email=e.detail.user.email;if(e.detail.user.name){t.firstName=e.detail.user.name.firstName;t.lastName=e.detail.user.name.lastName}}void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_1").val()?t.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_1").val()):void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_2").val()?t.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_2").val()):void 0!=$("#WC_AccountDisplay_FormInput_URL_In_Logon_3").val()&&(t.URL=encodeURIComponent($("#WC_AccountDisplay_FormInput_URL_In_Logon_3").val()));wc.service.invoke("AjaxPetcoAppleSignOn",t)}else console.log("apple sign in data does not have authorisation details")}function showMiniShopCartDropDownEvent(e,t,o,r){console.debug(e.keyCode);if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER){showMiniShopCartDropDown(t,o,r);dojo.stopEvent(e)}}function toggleMiniShopCartDropDownEvent(e,t,o,r){console.debug(e.keyCode);if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER){toggleMiniShopCartDropDown(t,o,r);dojo.stopEvent(e)}}function showMiniShopCartDropDown(e,t,o){if(!dropdownInit){dropdownInit=!0;if(dropdownUpdated)positionMiniShopCartDropDown(e,t,o);else{destroyDialog();var r={};r.status="load";r.relativeId=e;r.contentId=t;r.contentType=o;r.page_view="dropdown";wc.render.updateContext("MiniShopCartContentsContext",r)}}}function toggleMiniShopCartDropDown(e,t,o){if(dojo.hasClass(e,"selected")){var r=dijit.byId(t);r&&r.hide();$("#mini-cart").css("visibility","visible")}else{showMiniShopCartDropDown(e,t,o);$("#mini-cart").css("visibility","visible")}$("div.petco-checkout #continueReviewPage").hasClass("disabled")?$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').addClass("disabled"):$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').removeClass("disabled")}function positionMiniShopCartDropDown(e,t,o){var r=null,n=null;if("orderItemsList"==o||"orderItemsListAutoClose"==o){r=dropDownDlg;n=productAddedDropDownDlg}else if("orderItemAdded"==o){r=productAddedDropDownDlg;
n=dropDownDlg}var a=dojo.byId(e),i=dojo.coords(a,!0),d=i.x+60,s=70,l=dojo.coords(dojo.byId("mini-cart-icon"),!0).w;8==dojo.isIE?l=dojo.coords(dojo.byId("mini-cart-icon"),!0).w:dojo.isIE>=7&&dojo.isIE<8?l=dojo.coords(dojo.byId("miniShopCartBody"),!0).w:dojo.isIE<7&&(l=originalMiniCartWidth);var c=d;dojo.isIE&&(c=d+dojo.contentBox(dojo.byId(e)).w-l);"ar-eg"!=dojo.locale&&"iw-il"!=dojo.locale||(c+=50);if(r){r.y=s;r.x=c}var u=function(){deactivate(document.getElementById("header"));dojo.addClass("mini-cart-icon","selected")},p=function(){dojo.removeClass("mini-cart-icon","selected")};if(!r){var m=document.getElementById(t),g=document.getElementById(t+"_ACCE_Label");r=null!=g?new wc.widget.WCDialog({relatedSource:e,x:d,y:s,title:g.innerHTML,onShow:u,onHide:p},m):new wc.widget.WCDialog({relatedSource:e,x:d,y:s,onShow:u,onHide:p},m);r.x=c}var f=null;n&&(f=n.displayStatus);if(!(r.displayStatus||null!=f&&f)){r.closeOnTimeOut=!1;r.autoClose=!1;if("orderItemsList"==o||"orderItemsListAutoClose"==o){dropdownDisplayed=!0;"orderItemsListAutoClose"==o&&(r.autoClose=!0);dropDownDlg=r;setTimeout(dojo.hitch(dropDownDlg,"show",null),5)}else if("orderItemAdded"==o){productAddedDropDownDlg=r;setTimeout(dojo.hitch(productAddedDropDownDlg,"show",null),5)}setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5)}dojo.isIE<7&&(r.style.display="block");dropdownInit=!1;$("div.petco-checkout #continueReviewPage").hasClass("disabled")?$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').addClass("disabled"):$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').removeClass("disabled")}function setMiniShopCartControllerURL(e){wc.render.getRefreshControllerById("MiniShoppingCartController").url=e}function updateCartCookie(){if(null!=document.getElementById("currentOrderQuantity")&&null!=document.getElementById("currentOrderAmount")&&null!=document.getElementById("currentOrderCurrency")&&null!=document.getElementById("currentOrderId")&&null!=document.getElementById("currentOrderLanguage")){var e=document.getElementById("currentOrderQuantity").value,t=document.getElementById("currentOrderAmount").value,o=document.getElementById("currentOrderCurrency").value,r=document.getElementById("currentOrderLanguage").value,n=document.getElementById("currentOrderId").value,a="";null!=dojo.byId("cookieDomain")&&(a=dojo.byId("cookieDomain").value);var i=getCookie("WC_CartOrderId_"+WCParamJS.storeId);if(null!=i){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var d=getCookie("WC_CartTotal_"+i);null!=d&&dojo.cookie("WC_CartTotal_"+i,null,{expires:-1,path:"/"});var s=getCookie("rCartTotal");null!=s&&dojo.cookie("rCartTotal",null,{expires:-1,path:"/",domain:a})}dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,n,{path:"/"});if(""!=n){dojo.cookie("WC_CartTotal_"+n,e+";"+t+";"+o+";"+r,{path:"/"});dojo.cookie("rCartTotal",e,{path:"/",domain:a})}}}function updateCartCookiefromShopCart(){var e=document.getElementById("currentOrderIdShop").value,t=document.getElementById("currentOrderQuantityShop").value;(t="1")&&updateCartCookie();if("1"!=t){var o=getCookie("WC_CartOrderId_"+WCParamJS.storeId),r="";null!=dojo.byId("cookieDomain")&&(r=dojo.byId("cookieDomain").value);if(null!=o){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var n=getCookie("WC_CartTotal_"+o);null!=n&&dojo.cookie("WC_CartTotal_"+o,null,{expires:-1,path:"/"});var a=getCookie("rCartTotal");null!=a&&dojo.cookie("rCartTotal",null,{expires:-1,path:"/",domain:r})}dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,e,{path:"/"});if(""!=e){dojo.cookie("WC_CartTotal_"+e,t-1+";"+cartAmount+";"+cartCurrency+";"+cartLanguage,{path:"/"});dojo.cookie("rCartTotal",t,{path:"/",domain:r})}}}function checkIfCheckoutButtonIsDisabled_minicart(){var e=!1;$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').hasClass("disabled")&&(e=!0);return e}function setProductAddedList(e){productAddedList=e}function populateProductAddedDropdown(){var e='"',t='\\\\"';for(productId in productAddedList){var o=productAddedList[productId];null!=document.getElementById("MiniShopCartAddedProdName_"+productId)&&null!=o[0]&&(document.getElementById("MiniShopCartAddedProdName_"+productId).innerHTML=o[0]);if(null!=document.getElementById("MiniShopCartAddedProdImgSrc_"+productId)&&null!=o[1]){document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).src=o[1];document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).alt=o[0]}null!=document.getElementById("MiniShopCartAddedProdPrice_"+productId)&&null!=o[2]&&(document.getElementById("MiniShopCartAddedProdPrice_"+productId).innerHTML=o[2]);null!=document.getElementById("MiniShopCartAddedProdQty_"+productId)&&null!=o[3]&&(document.getElementById("MiniShopCartAddedProdQty_"+productId).innerHTML=o[3]);if(null!=document.getElementById("MiniShopCartAddedProdAttr_"+productId)&&null!=o[4]){document.getElementById("MiniShopCartAddedProdAttr_"+productId).innerHTML="";for(attrName in o[4]){attrValue=o[4][attrName];null!=attrValue&&"undefined"!=attrValue&&(attrValue=attrValue.replace(t,e).replace(/&amp;/g,"&").replace(/&#039;/g,"'").replace(/&#034;/g,'"'));document.getElementById("MiniShopCartAddedProdAttr_"+productId).innerHTML+="<div>"+attrName+": "+attrValue+"</div>"}}}dojo.topic.publish("ProductInfo_Reset")}function loadMiniCart(e,t){var o=!1,r=getCookie("WC_CartOrderId_"+WCParamJS.storeId),n=null;if(checkDeleteCartCookie())o=!0;else if(void 0!=r&&""==r){var a=document.getElementById("minishopcart_subtotal"),i=null;i="iw-il"==dojo.locale?dojo.currency.format(document.getElementById("currentOrderAmount").value,{symbol:"symbol",currency:e,locale:"he"}):dojo.currency.format(document.getElementById("currentOrderAmount").value,{symbol:"symbol",currency:e});i=null!=i?i.replace("symbol",shoppingActionsJS.currencySymbol):document.getElementById("currentOrderAmount").value;null!=a&&(a.innerHTML="\n "+i+"\n ");var d=document.getElementById("minishopcart_total");if(null!=d){var s=document.getElementById("currentOrderQuantity").value;null!=n&&(s=dojo.string.substitute(n,{0:document.getElementById("currentOrderQuantity").value}));d.innerHTML="\n "+s+"\n "}}else if(void 0!=r&&""!=r){var l=getCookie("WC_CartTotal_"+r);if(void 0!=l&&null!=l&&""!=l){var c=l.split(";");if(null!=c&&4==c.length)if(c[2]==e&&c[3]==t){var a=document.getElementById("minishopcart_subtotal");if(null!=a){var i=null;i="iw-il"==dojo.locale?dojo.currency.format(c[1].toString(),{symbol:"symbol",currency:e,locale:"he"}):dojo.currency.format(c[1].toString(),{symbol:"symbol",currency:e});i=null!=i?i.replace("symbol",shoppingActionsJS.currencySymbol):c[1].toString();a.innerHTML="\n "+i+"\n "}var d=document.getElementById("minishopcart_total");if(null!=d){var s=c[0].toString();null!=n&&(s=dojo.string.substitute(n,{0:c[0].toString()}));d.innerHTML="\n "+s+"\n "}}else o=!0;else o=!0}else o=!0}else o=!0;1==o&&wc.render.updateContext("MiniShopCartContentsContext",{status:"load"})}function handleMiniCartHover(){dojo.connect(document.getElementById("mini-cart-icon"),"onmouseover",function(){timer=setTimeout(function(){showMiniShopCartDropDown("mini-cart-icon","quick_cart_container","orderItemsListAutoClose")},1e3)});dojo.connect(document.getElementById("mini-cart-icon"),"onmouseout",function(){clearTimeout(timer)})}function setDeleteCartCookie(){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,!0,{path:"/"})}function checkDeleteCartCookie(){var e=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);return void 0!=e&&""!=e&&"true"==e}function resetDeleteCartCookie(){var e=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);if(null!=e){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/"});dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/",domain:document.location.hostname})}}function updateUserCookie(){var e=getCookie("WC_UserId");if(void 0!=e&&""!=e){var t=dojo.byId("userId").value;e!=t&&dojo.cookie("WC_UserId",t,{path:"/"})}else if(void 0!=dojo.byId("userId")){var t=dojo.byId("userId").value;dojo.cookie("WC_UserId",t,{path:"/"})}else dojo.cookie("WC_UserId","-1002",{path:"/"})}function reinitializeCartCounts(){var e=dojo.cookie("WC_CartOrderId_".concat(WCParamJS.storeId)),t=dojo.cookie("WC_CartTotal_".concat(e));if(null!=t){var o=t.split(";");document.getElementById("cart-count")&&(document.getElementById("cart-count").innerHTML=o[0]);document.getElementById("persistent-cart-count")&&(document.getElementById("persistent-cart-count").innerHTML=o[0]);document.getElementById("mobile-cart-count")&&(document.getElementById("mobile-cart-count").innerHTML=o[0])}}function forwardToCheckout(e){document.location.href=e}function displayErrorFields(e,t,o,r){var n=document.getElementById(t),a="<ul>";for(i=0;i<e.length;i++)a+="<li>"+e[i]+"</li>";a+="</ul>";if(r)return a;if(e.length){n.innerHTML+=a;n.setAttribute("role","alert");window.location.hash="#"+t;null!=o&&o.focus()}}function isCloudniaryEnabled(){var e=$("#ENABLE_CLOUDNIARY");return!(!e||"true"!=e.val())}function redirect(e){location.href=e}function showConfirmContainer(e,t){if(submitRequest()){var o=$("input[name=repeatDeliveryCancellationReason]:checked").val(),r=$("input[name=repeatDeliveryCancellationReason]:checked").attr("id"),n=$("input[name=repeatDeliveryCancellationSubReason]:checked").val(),a=$("input[name=repeatDeliveryCancellationSubReason]:checked").attr("id"),i=($("#othersReasonDetail").val(),$("#rdOrderStatus").val()),d=$("#hasError").val(),s=$("#isAllowedToChange").val(),l=$("#isEditable").val(),c=$("#nowScheduledDate").val(),u=$("#nextDate").val(),p=$("#rxFoodIndicatorFlag").val();wc.render.updateContext("PetcoCancelRepeatDeliveryConfirmation_Context",{subscriptionId:e,orderId:t,selectedMainReason:o,selectedMainReasonId:r,selectedSubReason:n,selectedSubReasonId:a,rdOrderStatus:i,hasError:d,isAllowedToChange:s,isEditable:l,nowScheduledDate:c,nextDate:u,rxFoodIndicatorFlag:p},"");$(".rd-cancellation-container").hide()}}function trackATCInterstitailClick(e){var t=window.PetcoDataLayer.events||{};if("modal_opened"==e){t.evar95=e;t.event115="1";window.PetcoDataLayer.events=t}else{var o=t.evar95,r={};r.event_name=e;if(""!=o&&"modal_opened"!=o){o=o+"|"+e;var n=o.split("|");r.event115=""+n.length;r.evar95=o}else{o=e;r.event115="1";r.evar95=o}pushEvent(r)}}function footerUIInit(e){dojo.query("#orderstatus").forEach(function(t){if(isGuest){var o="/webapp/wcs/stores/servlet/PetcoGuestOrderLookupView?storeId="+WCParamJS.storeId;dojo.setAttr(t,"href",o)}else dojo.setAttr(t,"href",e)})}function deactivate(e){if(null!=e){activeElements[e.id]&&deactivate(activeElements[e.id]);require(["dojo/dom-class","dojo/query"],function(t,o){t.remove(e,"active");o('a[data-activate="'+e.id+'"]').removeClass("selected");o('a[data-toggle="'+e.id+'"]').removeClass("selected");var r=e.getAttribute("data-parent");delete activeElements[r]})}}function invokeCookieForLoginUser(e,t){require(["dojo/cookie"],function(o){o("WC_UserType",e,{path:"/"});o("WC_UserId",t,{path:"/"});o("rUserType",e,{path:"/",domain:domain})});var o="G"==e,r=document.getElementById("logged-in"),n=document.getElementById("logged-out"),a=document.getElementById("oneTapScript"),i=document.getElementsByClassName("googlecreateconnect"),d=!1,s=!1;$(location).attr("href").indexOf("/OrderItemDisplay")>0&&(d=!0);$(location).attr("href").indexOf("/PetcoInterstitialLogonFormView")>0&&(s=!0);if(r&&n)if(o){r.style.display="none";r.classList.remove("active");n.style.display="block";n.classList.add("active")}else{r.style.display="block";r.classList.add("active");n.style.display="none";n.classList.remove("active");$("#logged-in a").focus(function(e){$(this).parents("#logged-in").css("visibility","visible")});var l=getCookie("optedOut"),c=null==l||""==l||"false"==l?"show":"hide",u=document.getElementById("pals-header-link");u.classList.remove("btn","btn-primary","margin-bottom-sm");u.classList.add("btn","btn-primary","margin-bottom-sm",c)}if(a&&o&&!i.length>0&&!d&&!s){var p=document.createElement("script");p.src="https://accounts.google.com/gsi/client";a.appendChild(p)}var m=document.querySelectorAll(".account .active")[0],g=document.getElementById("account-container");if(m&&g){var f=m.cloneNode(!0);g.appendChild(f)}dojo.topic.publish("ajax_usertype_changed",e)}function setUserTypeCookie(e){"use strict";var t=dojo.cookie("WC_UserType"),o=t&&"G"!=e?"R":"G";dojo.cookie("WC_UserType",o,{path:"/"});var r="";null!=dojo.byId("cookieDomain")&&(r=dojo.byId("cookieDomain").value);dojo.cookie("rUserType",o,{path:"/",domain:r})}function getUserTypeCookie(){"use strict";return dojo.cookie("rUserType")}function pushEvent(e,t){try{if($("#omnitureEnabled").length>0&&""!=$("#omnitureEnabled").val()){var o=$("#omnitureEnabled").val();if("true"==o){var r;r="object"==typeof e?e:JSON.parse(e);void 0!=t&&null!=t&&getAttrValue(r,document.getElementById(t));PetcoDataLayer.events=r;var n=r.event_name;null!=r&&void 0!=typeof utag&&utag.link({event_name:n})}}}catch(e){console.log("Error occured while linking the event"+e);return!0}}function omnitureTagging(e){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var t=$("#omnitureEnabled").val();if("true"==t){var o=e;if(null!=$("#"+o).attr("data-info")||void 0!=$("#"+o).attr("data-info")){var r=$("#"+o).attr("data-info");pushEvent(r)}}}}catch(e){console.log("Error occured while linking the event from funtion omnitureTagging"+e);return!0}}function trackEventStart(e){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var t=$("#omnitureEnabled").val();if("true"==t){var o={event_status:"start",event_name:e};pushEvent(o)}}}catch(e){console.log("Error occured while linking the event from funtion trackEventStart"+e);return!0}}function buildProductDataLayerVariable(e){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var t=$("#omnitureEnabled").val();if("true"==t){if(null!=e&&void 0!=e){var o=new Array;o.push(e.catalogEntryIdentifier.externalIdentifier.partNumber);product.product_sku=o;var r=new Array,n=e.description[0].name;n=n.replace(/,/g,"");r.push(n);product.product_name=r;var a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e.listPrice),i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e.offerPrice);if(!e.listPriced||a<=i){var d=e.offerPrice,s=d.replace("$",""),l=new Array;l.push(s.replace(",",""));product.product_price=l;var c=new Array;c.push(s);product.product_list_price=c}else{var d=e.offerPrice,s=d.replace("$",""),l=new Array;l.push(s.replace(",",""));product.product_price=l;var u=e.listPrice,p=u.replace("$","");if(u.length>0){var c=new Array;c.push(p);product.product_list_price=c}else{var c=new Array;c.push(s);product.product_list_price=c}}var m=new Array;m.push(e.catalogEntryIdentifier.uniqueID);product.product_id=m}if($("#attributeRatings").size()>0){var m=new Array,g=$("#attributeRatings").val();if(""!=g){if(g.indexOf("[")!=-1){g=g.replace("[","");g=g.replace("]","")}var f,h=g.split(",");f=null!=h[0]&&0==!h[0].length?parseFloat(h[0]).toFixed(1):"0";m.push(f);product.product_rating=m}}if($("#attributeRatingsCount").size()>0){var m=new Array,I=$("#attributeRatingsCount").val();""==I||0===I.length?m.push("0"):m.push(I);product.product_reviews=m}if(product){PetcoDataLayer.product=product;try{var y={};y.event_name="product_view";y.product_id=e.catalogEntryIdentifier.uniqueID;y.partNumber=e.catalogEntryIdentifier.externalIdentifier.partNumber;y.name=e.description[0].name;$("#tel_product_id").size()>0&&(y.product_parent_sku=$("#tel_product_id").val());y.eventStatus="end";"complete"===document.readyState&&pushEvent(y)}catch(e){console.log(e);return!0}}}}}catch(e){console.log("buildProductDataLayerVariable"+e);return!0}}function buildAddonProductDataLayerVariable(){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var e=$("#omnitureEnabled").val();if("true"==e){var t,o="no";if($("#selectRDOrderBtnAddTo:visible").size()>0){t="recurring";o="yes"}if($("#rd-add-on:visible").size()>0||$("#selectRDOrderBtnCpy:visible").size()>0){t=t?"both":"once";o="yes"}t&&(product.add_to_rd=t);product.addon=o;product&&(PetcoDataLayer.product=product)}}}catch(e){console.log("buildAddonProductDataLayerVariable"+e);return!0}}function buildRDProductDataLayerVariable(e){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var t=$("#omnitureEnabled").val();if("true"==t){if(null!=e&&void 0!=e){var o=new Array;if($("#tel_product_sku_"+e)&&""!=$("#tel_product_sku_"+e).val()){o.push($("#tel_product_sku_"+e).val());product.product_sku=o}var r=new Array;if($("#tel_product_name_"+e)&&""!=$("#tel_product_name_"+e).val()){var n=$("#tel_product_name_"+e).val();n=n.replace(/,/g,"");r.push(n);product.product_name=r}var a;$("#tel_product_list_price_"+e)&&""!=$("#tel_product_list_price_"+e).val()&&(a=parseFloat($("#tel_product_list_price_"+e).val()));var i;$("#tel_product_price_"+e)&&""!=$("#tel_product_price_"+e).val()&&(i=parseFloat($("#tel_product_price_"+e).val()));if(!a||a<=i){var d=new Array;d.push(i);product.product_price=d;var s=new Array;s.push(i);product.product_list_price=s}else{var d=new Array;d.push(i);product.product_price=d;if(a>0){var s=new Array;s.push(a);product.product_list_price=s}else{var s=new Array;s.push(i);product.product_list_price=s}}var l=new Array;if($("#tel_product_id_"+e)&&""!=$("#tel_product_id_"+e).val()){l.push($("#tel_product_id_"+e).val());product.product_id=l}var c=new Array;if($("#tel_product_brand_"+e)&&""!=$("#tel_product_brand_"+e).val()){c.push($("#tel_product_brand_"+e).val());product.product_brand=c}var u=new Array;if($("#tel_product_image_url_"+e)&&""!=$("#tel_product_image_url_"+e).val()){u.push($("#tel_product_image_url_"+e).val());product.product_image_url=u}var p=new Array;if($("#tel_product_parent_id_"+e)&&""!=$("#tel_product_parent_id_"+e).val()){p.push($("#tel_product_parent_id_"+e).val());product.product_parent_id=p}}product&&(PetcoDataLayer.product=product)}}}catch(e){console.log("buildRDProductDataLayerVariable"+e);return!0}}function buildProductInventoryDataLayer(e,t){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var o=$("#omnitureEnabled").val();if("true"==o&&null!=e&&null!=PetcoDataLayer.product){var r,n=new Array;r="onChange"==t?e:e[PetcoDataLayer.product.product_id].onlineInventory_status;"In-Stock"!=r?n.push("yes"):n.push("no");PetcoDataLayer.product.product_oos=n}}}catch(e){console.log("buildProductInventoryDataLayer"+e);return!0}}function buildBopusProductInventoryDataLayer(e,t){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var o=$("#omnitureEnabled").val();if("true"==o&&null!=PetcoDataLayer.product){var r=new Array;"RED"==e?r.push("yes"):r.push("no");PetcoDataLayer.product.bopus_oos=r;"undefined"!=typeof t&&null!=t&&(PetcoDataLayer.product.bopus_store=t)}}}catch(e){console.log("buildBopusProductInventoryDataLayer"+e);return!0}}function updateRDProductAddonDataLayer(){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var e=$("#omnitureEnabled").val();"true"==e&&null!=PetcoDataLayer.product&&$("#addToRDDropDown").length&&("ADDON"==$("#addToRDDropDown").val()?PetcoDataLayer.product.addon="yes":PetcoDataLayer.product.addon="no")}}catch(e){console.log("updateRDProductAddonDataLayer "+e);return!0}}function updateSearchData(e,t,o){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var r=$("#omnitureEnabled").val();if("true"==r){if(!PetcoDataLayer.search){var n={};PetcoDataLayer.search=n}var a="";a="search_filter"==e?0==t.indexOf("averagerating")?t:$("#facetLabel_"+t).html().trim():t;var i;if(PetcoDataLayer.search&&PetcoDataLayer.search.search_filters){var d=PetcoDataLayer.search.search_filters;i=d+","+a}else i=a;PetcoDataLayer.search.search_filters=i;var s={};s.search_filters=a;s.event_search_filter="yes";s.event_name="search_filter_applied";getAttrValue(s,o);pushEvent(s)}}}catch(e){console.log("updateSearchData"+e);return!0}}function checkoutEvents(e,t){try{var o="",r="",n="";if(void 0!=$("#orderId")||""!=$("#orderId").val())var a=$("#orderId").val();if("checkout_guest"==e){o="2";r="Guest Checkout";n="Guest Checkout"}else if("checkout_sign_in"==e){o="1";r="SignIn";n="SignIn"}var i={event_name:e,cart_id:a,conversion_action_type:o,conversion_catergory_id:r,conversion_event_id:n};void 0!=t&&getAttrValue(i,t);pushEvent(i)}catch(e){return!0}}function userEvents(e,t){try{var o={};switch(e){case"user_log_out":o.user_state="logged_out";o.event_name=e;break;case"forgot_pw":o.event_name="forgot_pw";break;case"user_log_in":o.user_state="logged_in";o.conversion_action_type="1";o.conversion_catergory_id="SignIn";o.conversion_event_id="Sign In";o.event_name=e;break;case"checkout_start":if(void 0!=$("#currentOrderId")||""!=$("#currentOrderId").val())var r=void 0!=$("#currentOrderId").val()?$("#currentOrderId").val():void 0!=$("#currentOrderIdShop").val()?$("#currentOrderId").val():"";""==r&&(r=void 0!=$("#orderIdForPurcList").val()?$("#orderIdForPurcList").val():r);""==r&&(r=void 0!=$("#orderId").val()?$("#orderId").val():r);o.cart_id=r;o.event_name=e;break;default:o.event_name=e}void 0!=t&&getAttrValue(o,t);pushEvent(o)}catch(e){return!0}}function addPromoCodeDetails(e,t){try{if("cart"==t)PetcoDataLayer.cart.order_promo_code=e;else{if("undefined"==typeof o){var o={};o.order_promo_code=e}PetcoDataLayer.order=o}}catch(e){return!0}}function getAttrValue(e,t){try{var o="";if(null!=$(t)&&void 0!=$(t)){if(void 0!=$(t).attr("manual_cm_sp")){o=$(t).attr("manual_cm_sp");e.event_link_type="standard"}else if(void 0!=$(t).attr("promo_onsite_link")){o=$(t).attr("promo_onsite_link");e.event_link_type="promo"}e.event_link_name=o;e.event_link_action="click";return e}}catch(e){return!0}}function clickTrackLink(e){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var t=$("#omnitureEnabled").val();if("true"==t){var o={};o=getAttrValue(o,e);PetcoDataLayer.events=o;null!=o&&utag.link({event_name:"link_tracking"})}}}catch(e){console.log("Error occured while linking the event"+e);return!0}}function facetEvents(e){try{var t={event_search_filter:"remove",event_name:"search_filter_removed",search_filters:e};pushEvent(t);if(PetcoDataLayer.search&&PetcoDataLayer.search.search_filters){var o=PetcoDataLayer.search.search_filters,r=o.replace(","+e,"");r=r.replace(e+",","");r=r.replace(e,"");""==r?delete PetcoDataLayer.search.search_filters:PetcoDataLayer.search.search_filters=r}}catch(e){return!0}}function buildModalDataLayer(e,t,o){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var r=$("#omnitureEnabled").val();if("true"==r){var n={};n.name=e;n.action=t;o?n.action_detail=o:n.action_detail=t;if("modal_add_to_order"==t&&($("[name=subscriptionId]:checked").length||$("[name=subscriptionId]").length)){var a;a=$("[name=subscriptionId]:checked").length?$("[name=subscriptionId]:checked").val():$("[name=subscriptionId]").val();var i=$("#rdOrderNextDate_"+a).val(),d="one time";$("#addToRDDropDown").length&&"INC"==$("#addToRDDropDown").val()&&(d=$("#rdOrderFrequency_"+a).val());a&&(n.order_id=a);i&&(n.next_order_date=i);d&&(n.order_frequency=d)}n&&(PetcoDataLayer.modal=n);buildTestDataLayer("AT_PDP_ADDTORDMODAL","addrecurring")}}}catch(e){console.log("buildModalDataLayer"+e);return!0}}function buildModalCloseDataLayer(e,t,o){try{if(null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")){var r=$("#omnitureEnabled").val();if("true"==r){if(e.target!==e.currentTarget)return;buildModalDataLayer(t,"modal_close_outside_modal");var n={};n.event_link_type="standard";n.event_link_name=o;n.event_link_action="click";PetcoDataLayer.events=n;null!=n&&utag.link({event_name:"link_tracking"})}}}catch(e){console.log("buildModalCloseDataLayer"+e);return!0}}function buildTestDataLayer(e,t){try{var o=sessionStorage.getItem(e),r=o?o:"var_A",n={};n.name=e;n.test_audience=r;"object"==typeof PetcoDataLayer.testExposed&&null!==PetcoDataLayer.testExposed||(PetcoDataLayer.testExposed={});PetcoDataLayer.testExposed[t]=n}catch(e){console.log("buildTestDataLayer"+e);return!0}}function calculateTimePeriod(e){try{var t,o=864e5,r=Date.now(),n=new Date(e),a=n.getTime(),i=r-a,d=Math.round(i/o),s=d/7;s<=1?t=d<=1?d+" Day":d+" Days":s>1&&s<=2?t="1-2 Weeks":s>2&&s<=3?t="2-3 Weeks":s>3&&s<=4?t="3-4 Weeks":d>=30&&d<60?t="1 Month":d>=60&&d<90?t="2 Month":d>=90&&(t="3 Months+ ");return t}catch(e){console.log(e.message);return 0}}function formEvents(e,t,o){try{var r={};switch(e){case"form_start":r.form_name=t;r.event_name=e;break;case"form_error":r.event_name=e;r.form_name=t;r.form_error=o;break;default:r.event_name=e}pushEvent(r)}catch(e){return!0}}function readAndFireTeliumTagForReg(){var e="",t={};t.conversion_event_id="Register";t.event_name="registration";t.conversion_category_id="Register";t.conversion_action_type="1";for(var o in global_data_for_user_reg){var r=o.split("|_|")[0],n=o.split("|_|")[1];if(""!=n){var a=$("#"+r+'[name="'+n+'"]');a.length>0&&(e=$("#"+r+'[name="'+n+'"]')[0].value)}else{var a=$("#"+r);a.length>0&&(e=$("#"+r)[0].value)}if(""!=e){"customer_name"==i&&"undefined"!=typeof t.customer_name&&(e=t.customer_name+" "+e);"customer_pals_number"==i&&"undefined"!=typeof t.customer_pals_number?t.pals_account="added":t.pals_account="created";var i=parentGroupJson_telium[o];t[i]=e;e=""}}pushEvent(t,"WC_UserRegistrationAddForm_links_1")}function populateCurentBopusStore(){if($("#bopusInfoTabInPlp_conatiner").length>0&&null!=byId("bopusItemfacet")&&null!=window.categoryreflektion_filterQuery){var e=byId("bopusItemfacet").value.replace("facetDiv","");if(window.categoryreflektion_filterQuery.indexOf(e)>-1){$("#bopusCheckBoxPLP")[0].checked=!0;$("#bopusCheckBoxPLP_mobile")[0].checked=!0}var t="",o="petcostores",r=localStorage.getItem(o);if(null!=r){var n=JSON.parse(r);if("undefined"!=typeof n.petcostores){var a=JSON.parse(n.petcostores);if("undefined"!=typeof dojo.cookie("WC_physicalStores")){var i=dojo.cookie("WC_physicalStores").split(",")[0];for(var d in a)if(a[d].STLOC_ID==i){t=a[d].DSNAME;break}}else{"undefined"!=typeof petcoNearestLocations&&petcoNearestLocations.fnSetPhysicalStoreCookie("WC_physicalStores",a);for(var d in a)if(""==t){t=a[d].DSNAME;break}}}}$("div#bopusInfoTabInPlp .bopusStoreValue").html(t);$("div#bopusInfoTabInPlp .bopusStoreValue").dotdotdot();if($("div#bopusInfoTabInPlp_mobile .bopusStoreValue").length>0){$("div#bopusInfoTabInPlp_mobile .bopusStoreValue").html(t);$("div#bopusInfoTabInPlp_mobile .bopusStoreValue").dotdotdot()}""!=t&&RfkSearchBasedNavigationDisplayJS.pullRfkbopusCount()}else null!=byId("isSameDayDeliveryEnabled")&&"true"===$("#isSameDayDeliveryEnabled").val()&&RfkSearchBasedNavigationDisplayJS.showHideSameDayDeliveryFacet(!0)}function updateCoreMetricsToIncludeLocation(e,t,o){var r=getNumProductsPerRow(),n=getProdTileId(e),a=parseInt(n.replace("prod-tile-","")),i=a%r,d=Math.floor(a/r);a%r>0&&(d+=1);var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");e.setAttribute("manual_cm_sp","PLP-_-"+s[i]+d+"-_-"+t+"_"+o)}function getNumProductsPerRow(){for(var e=0,t=document.getElementsByClassName("prod-tile"),o=0;o<t.length;o++){var r=t[o];if(o>1){if(r.getBoundingClientRect().top!=t[o-1].getBoundingClientRect().top)break;e++}else e++}return e}function getProdTileId(e){for(var t=null,o="prod-tile",r="product-display-grid";e;){if(e.className.indexOf(o)>-1){t=e;break}if(e.className.indexOf(r)>-1)break;e=e.parentElement}return null==t?null:t.id}function updateCoreMetricsContentToIncludeLocation(e,t,o){var r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;r>796?e.setAttribute("manual_cm_sp","Search_PLP-_-"+t+"-_-Title"):e.setAttribute("manual_cm_sp","Search_PLP-_-"+o+"-_-Title")}""==window.location.port?dojo.registerModulePath("wc",window.location.protocol+"//"+window.location.hostname+"/wcsstore/dojo18/wc"):dojo.registerModulePath("wc",window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/wcsstore/dojo18/wc");dojo.require("wc.service.common");dojo.require("dojo.number");dojo.require("dojo.has");dojo.require("dojox.xml.DomParser");dojo.require("wc.render.common");dojo.require("dojox.collections.ArrayList");dojo.require("wc.widget.Tooltip");dojo.require("wc.widget.ScrollablePane");dojo.require("dojo.io.iframe");dojo.require("dojo.io.script");dojo.require("dojo.parser");dojo.require("dijit.form.Button");dojo.require("wc.widget.WCMenu");dojo.require("wc.widget.WCDialog");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tooltip");dojo.require("wc.widget.WCDropDownButton");dojo.require("dijit.Dialog");dojo.require("dojo.currency");dojo.require("dijit.Tree");dojo.require("dojo.back");dojo.require("dijit.form.DateTextBox");dojo.require("wc.widget.RefreshArea");dojo.require("wc.render.RefreshController");dojo.require("wc.render.Context");dojo.require("dojo.cookie");dojo.require("dojo.topic");var showDropdown=!1,dropDownDlg=null,productAddedDropDownDlg=null,originalMiniCartWidth=0,isIE=!!document.all,correctBrowser=!1,requestSubmitted=!0,currentId="",numAjaxRequests=0,widgetsList=[],tabPressed=!1,currentPopup="",android=null,ios=null,cursorDisplayTimeout=null;dojo.subscribe("ajaxRequestInitiated",incrementNumAjaxRequest);dojo.subscribe("ajaxRequestCompleted",decrementNumAjaxRequest);dojo.addOnLoad(function(){activateRatings();var e="<a href='javascript:' class='back-to-top' id='scrollToTop'><span class='glyphicon glyphicon-chevron-up'></span><p>top</p></a>",t=document.location.href;if(!t.includes("OrderItemDisplay")&&null!=document.getElementById("scroolTop")){document.getElementById("scroolTop").innerHTML=e;document.getElementById("scrollToTop").style.visibility="hidden"}dojo.connect(dojo.byId("scrollToTop"),"click",function(e){scrollToTop(1e3)});dojo.query(".collapse").on("hidden.bs.collapse",function(){dojo.query(".glyphicon-minus",this.parentNode).removeClass("glyphicon-minus").addClass("glyphicon-plus")});dojo.query(".collapse").on("shown.bs.collapse",function(){dojo.query(".glyphicon-plus",this.parentNode).removeClass("glyphicon-plus").addClass("glyphicon-minus")});gapi&&googleInit()});dojo.connect(window,"onscroll",this,function(e){if(null!=document.getElementById("scrollToTop"))if(window.scrollY>=350){document.getElementById("scrollToTop").style.visibility="visible";dojo.fadeIn({node:"scrollToTop"}).play()}else{dojo.fadeOut({node:"scrollToTop"}).play();document.getElementById("scrollToTop").style.visibility="hidden"}});var googleToggle="";$("#googleToggle").length>0&&(googleToggle=$("#googleToggle").val());var appleSigninToggle="";$("#appleSigninToggle").length>0&&(appleSigninToggle=$("#appleSigninToggle").val());"ON"==googleToggle&&"ON"==appleSigninToggle&&$("#WC_AccountDisplay_div_19").addClass("seperator-height");"ON"!=googleToggle&&"ON"!=appleSigninToggle||$("#WC_AccountDisplay_div_19").addClass("col-seperator-height");if("ON"==appleSigninToggle){document.addEventListener("AppleIDSignInOnSuccess",function(e){console.log("success apple sign in authorization");processAppleSignOn(e)});document.addEventListener("AppleIDSignInOnFailure",function(e){console.log("failure apple sign in authorization")})}"undefined"!=typeof MessageHelper&&MessageHelper&&MessageHelper.topicNamespace||(MessageHelper={messages:{},identifier:"",tooltip:null,focusElement:"",getCurrentYear:function(){return(new Date).getFullYear()},getCurrentMonth:function(){return(new Date).getMonth()+1},getCurrentDay:function(){return(new Date).getDate()},getRenderContextProperty:function(e,t){console.debug("enter getRenderContextProperty with propertyName = "+t);if(null==e){console.debug("context is null. Return null...");return null}var o=e.properties[t];console.debug("the found property value is: "+o);return o},setMessage:function(e,t){this.messages[e]=t},setFocusElement:function(e){
this.focusElement=e},showHideMessageArea:function(e){cursor_clear();null!=e&&void 0!=e||(e=0);var t=dojo.byId("MessageArea"),o=new Array;o.node=t;o.duration=200;o.delay=0;dojo.style(t,"opacity",0);null!=dijit.byId("MessageArea_ACCE_Title")&&(dijit.byId("MessageArea_ACCE_Title").style.display="block");dojo.style(t,"display","block");var r=dojo.fadeIn(o);r.play()},hideMessageArea:function(){cursor_clear();var e="";null!=dojo.byId(this.focusElement)&&(e=dojo.byId(this.focusElement));var t=dojo.byId("MessageArea"),o=new Array;o.node=t;o.duration=500;o.onEnd=function(){dojo.style(t,"display","none");null!=dijit.byId("MessageArea_ACCE_Title")&&(dijit.byId("MessageArea_ACCE_Title").style.display="none");dojo.style(t,"opacity",100);null!=dojo.byId(e)&&e.focus()};dojo.fadeOut(o).play();dojo.byId("ErrorMessageText").innerHTML="";this.focusElement=""},displayErrorMessage:function(e,t,o){try{null!=t&&void 0!=t||(t=0);if((void 0==o||null==o||1==o)&&null!=this.messages.ERROR_MESSAGE_TYPE&&"undefined"!=this.messages.ERROR_MESSAGE_TYPE){var r=this.messages.ERROR_MESSAGE_TYPE;e=r+e}this.setMessageAreaStyle("error_icon");this.showHideMessageArea(t);dojo.byId("clickableErrorMessageImg").focus();setTimeout(function(){null!=dojo.byId("ErrorMessageText")&&dojo.byId("ErrorMessageText").focus()},1e3);"undefined"!=typeof TealeafWCJS&&TealeafWCJS.logClientValidationCustomEvent({fieldId:"-1",message:e})}catch(t){e.indexOf(" discontinued ")!=-1?alert(e):console.log(t)}},setMessageAreaStyle:function(e){null!=dojo.byId(e)&&(dojo.byId(e).style.display="inline")},displayStatusMessage:function(e,t){null!=t&&void 0!=t||(t=0);this.setMessageAreaStyle("success_icon");null!=dojo.byId("clickableErrorMessageImg")&&dojo.byId("clickableErrorMessageImg").focus();setTimeout(function(){null!=dojo.byId("ErrorMessageText")&&dojo.byId("ErrorMessageText").focus()},1e3)},hideAndClearMessage:function(){},adjustCoordinates:function(e){if("none"!=dojo.style("MessageArea","display")){var t=dojo.byId("page"),o=dojo.byId("MessageArea");if(null!=t&&null!=o){var r=dojo.coords(t,!0),n=r.w;dojo.isSafari&&(n=dojo.style("page","width"));null!=e&&void 0!=e||(e=0);dojo.style(o,{width:n+20+"px",left:r.x-10+"px",top:r.y+e+"px"})}}},formErrorHandle:function(e,t){this.formErrorHandleClient(e.errorMessageParam,e.errorMessage)},formErrorHandleClient:function(e,t){var o=dojo.byId(e);if(null!=t){if(o){if(this.identifier!=e+"_tooltip"){this.identifier=e+"_tooltip";var r=document.createElement("span"),n=getImageDirectoryPath();dojo.isIE<7?r.innerHTML=t+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+n+"images/empty.gif'></iframe>":r.innerHTML=t;var a=dojo.some(["ar","he","iw"],function(e){return e===dojo.attr(dojo.body().parentNode,"lang")}),i=new dijit.Tooltip({connectId:[e],dir:a},r);i.startup();console.log("created",i,i.id);o.focus();var d=document.createElement("div");d.setAttribute("class","spanacce");d.setAttribute("role","alert");d.setAttribute("id","alert");var s=document.createTextNode(t);d.appendChild(s);document.body.appendChild(d);o.setAttribute("aria-invalid","true");i.open(o);dojo.connect(o,"onblur",i,"close");dojo.connect(o,"onblur",i,"destroy");dojo.connect(o,"onblur",this,"clearCurrentIdentifier");i._onMouseOver=this.emptyFunc;this.tooltip=i}"undefined"!=typeof TealeafWCJS&&TealeafWCJS.logClientValidationCustomEvent({fieldId:o.id,message:t})}}else console.debug("formErrorHandleClient: The error message is null.")},hideFormErrorHandle:function(){if(null!=this.tooltip){this.tooltip.destroyRecursive();this.tooltip=null;this.clearCurrentIdentifier()}},clearCurrentIdentifier:function(){this.identifier=""},emptyFunc:function(e){},containsDoubleByte:function(e){for(var t=new String(e),o=127,r=0;r<t.length;r++){chr=t.charCodeAt(r);if(chr>o)return!0}return!1},isValidEmail:function(e){return!this.containsDoubleByte(e)&&(0==e.length||!(e.length<5)&&(!(e.indexOf(" ")>0)&&(!(e.indexOf("@")<1)&&(!(e.lastIndexOf(".")<e.indexOf("@")+2)&&!(e.lastIndexOf(".")>=e.length-2)))))},isValidUTF8length:function(e,t){return!(this.utf8StringByteLength(e)>t)},utf8StringByteLength:function(e){if(null===e)return 0;var t=String(e),o=127,r=2047,n=t.length;for(i=0;i<t.length;i++){chr=t.charCodeAt(i);chr>o&&(n+=1);chr>r&&(n+=1)}return n},IsNumeric:function(e,t){if(t)var o="0123456789.";else var o="0123456789";var r,n=!0;for(i=0;i<e.length&&1==n;i++){r=e.charAt(i);o.indexOf(r)==-1&&(n=!1)}return n},IsValidPhone:function(e){var t,o="0123456789",r=!0;for(i=0;i<e.length&&1==r;i++){t=e.charAt(i);o.indexOf(t)==-1&&(r=!1)}return r},IsValidZipCode:function(e){var t,o="0123456789",r=!0;for(i=0;i<e.length&&1==r;i++){t=e.charAt(i);o.indexOf(t)==-1&&(r=!1)}return r}});"undefined"!=typeof ResponsiveJS&&null!=ResponsiveJS&&ResponsiveJS||(ResponsiveJS={init:function(){dojo.connect(dojo.byId("footerCustomerService"),"onclick",ResponsiveJS,ResponsiveJS._cSToggleAndShow);dojo.connect(dojo.byId("footerCorporateInfo"),"onclick",ResponsiveJS,ResponsiveJS._cIToggleAndShow);dojo.connect(dojo.byId("footerExplore"),"onclick",ResponsiveJS,ResponsiveJS._eToggleAndShow);dojo.connect(dojo.byId("footerFollowUs"),"onclick",ResponsiveJS,ResponsiveJS._FUToggleAndShow)},_cSToggleAndShow:function(e){this.toggle(dojo.byId("cSTog"));this.show(dojo.byId("expandCS"))},_cIToggleAndShow:function(e){this.toggle(dojo.byId("cITog"));this.show(dojo.byId("expandCI"))},_eToggleAndShow:function(e){this.toggle(dojo.byId("eTog"));this.show(dojo.byId("expandE"))},_FUToggleAndShow:function(e){this.toggle(dojo.byId("fUTog"));this.show(dojo.byId("expandFU"))},toggle:function(e){var t=e;if(null!=t)if("-161px -1px"==t.style.backgroundPosition){t.style.backgroundPosition="-181px -1px";t.style.width="12px";t.style.height="6px";t.style.left="6px";t.style.top="14px"}else{t.style.backgroundPosition="-161px -1px";t.style.width="6px";t.style.height="12px";t.style.left="10px";t.style.top="10px"}},show:function(e){srcElement=e;if(null!=srcElement)if("block"==srcElement.style.display){close("searchDropdown");srcElement.style.display="none"}else{dojo.query(".subDeptDropdown ").forEach(function(e){close(e.id)});close("departmentsDropdown");close("qLinkDropdown");close("mobileSearchDropdown");close("searchDropdown");close("pageDropdown");close("sortDropdown");srcElement.style.display="block"}}});if("undefined"==typeof SearchJS||null==SearchJS||!SearchJS){SearchJS={autoSuggestTimer:-1,autoSuggestKeystrokeDelay:400,autoSuggestHover:!1,autoSuggestPreviousTerm:"",autoSuggestURL:"",autoSelectOption:-1,historyIndex:-1,retrievedCachedSuggestions:!1,TOTAL_SUGGESTED:4,TOTAL_HISTORY:2,AUTOSUGGEST_THRESHOLD:2,DYNAMIC_AUTOSUGGEST_THRESHOLD:1,CACHED_AUTOSUGGEST_OFFSET:1e3,END_OF_LIST:!1,STATIC_CONTENT_SECTION_DIV:["autoSuggestStatic_1","autoSuggestStatic_2","autoSuggestStatic_3"],staticContentHeaderHistory:"",CachedSuggestionsURL:"",SearchAutoSuggestServletURL:"",searchDepartmentHoverTimeout:"",searchSuggestionHoverTimeout:"",searchDepartmentSelect:function(e,t){byId("searchDepartmentLabel").innerHTML=t.innerHTML;byId("search_categoryId").value=e;this.hideSearchDepartmentList();return!1},cancelEvent:function(e){e.stopPropagation&&e.stopPropagation();e.preventDefault&&e.preventDefault();e.cancelBubble=!0;e.cancel=!0;e.returnValue=!1},searchDepartmentKeyPressed:function(e,t,o,r,n){if(13==e.keyCode){this.searchDepartmentSelect(r,n);var a=document.getElementById("mobileSearchDropdown");null!=a&&"block"==a.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus()}else if(38==e.keyCode){if(0!=t){dojo.byId("searchDepartmentList_"+(t-1)).focus();this.cancelEvent(e)}}else if(40==e.keyCode){if(t!=o){dojo.byId("searchDepartmentList_"+(t+1)).focus();this.cancelEvent(e)}}else if(27==e.keyCode){var a=document.getElementById("mobileSearchDropdown");null!=a&&"block"==a.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus();this.hideSearchDepartmentList()}else if(e.shiftKey&&9==e.keyCode){var a=document.getElementById("mobileSearchDropdown");null!=a&&"block"==a.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus();this.cancelEvent(e);this.hideSearchDepartmentList()}else if(9==e.keyCode){dojo.byId("search_submit").focus();this.cancelEvent(e);this.hideSearchDepartmentList()}return!1},hideSearchDepartmentList:function(){byId("searchDepartmentList").style.display="none"},init:function(){dojo.connect(document.CatalogSearchForm.searchTerm,"onfocus",SearchJS,SearchJS._onFocus);dojo.connect(document.CatalogSearchForm.searchTerm,"onblur",SearchJS,SearchJS._onBlur);dojo.connect(document.CatalogSearchForm.searchTerm,"onkeyup",SearchJS,SearchJS._onKeyUp);this.staticContentHeaderHistory=storeNLS.HISTORY},showSearchComponent:function(){var e=document.getElementById("searchDropdown");null!=e&&(e.style.display="block")},hideSearchComponent:function(){var e=document.getElementById("searchDropdown");null!=e&&(e.style.display="none");document.getElementById("look-ahead").classList.hide("active")},_showMobileSearchComponent:function(){var e=document.getElementById("mobileSearchDropdown");if(null!=e)if("block"==e.style.display){DepartmentJS.close("mobileSearchDropdown");e.style.display="none"}else{dojo.query(".subDeptDropdown ").forEach(function(e){DepartmentJS.close(e.id)});DepartmentJS.close("departmentsDropdown");e.style.display="block"}},setCachedSuggestionsURL:function(e){this.CachedSuggestionsURL=getAbsoluteURL()+e},setAutoSuggestURL:function(e){this.SearchAutoSuggestServletURL=getAbsoluteURL()+e},_onFocus:function(e){this.showSearchComponent();this.retrieveCachedSuggestions()},_MobileonFocus:function(e){this.showSearchComponent();this.retrieveCachedSuggestions()},_onBlur:function(e){clearTimeout(this.searchSuggestionHoverTimeout);this.searchSuggestionHoverTimeout=setTimeout("SearchJS.showAutoSuggest(false)",250)},_MobileonBlur:function(e){clearTimeout(this.searchSuggestionHoverTimeout);this.searchSuggestionHoverTimeout=setTimeout("SearchJS.showAutoSuggest(false)",100)},_onKeyPress:function(e){return e.keyCode!=dojo.keys.ENTER},_onKeyUp:function(e){var t=document.getElementById("searchDropdown");t.style.display="block";this.doAutoSuggest(e,this.SearchAutoSuggestServletURL,document.CatalogSearchForm.searchTerm.value)},_MobileonKeyUp:function(e){var t=document.getElementById("mobileSearchDropdown");t.style.display="block";this.doAutoSuggest(e,this.SearchAutoSuggestServletURL,dojo.byId("MobileSimpleSearchForm_SearchTerm").value)},_handleEnterKey:function(){document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value);if(document.CatalogSearchForm.searchTerm.value.length>0)if(this.END_OF_LIST)this.gotoAdvancedSearch(byId("advancedSearch").href);else if(""!=this.autoSuggestURL)document.location.href=this.autoSuggestURL;else{document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value);submitSpecifiedForm(document.CatalogSearchForm)}},_onClick:function(e){document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value);if(document.CatalogSearchForm.searchTerm.value.length>0){"undefined"!=typeof TealeafWCJS&&TealeafWCJS.processDOMEvent(e);submitSpecifiedForm(document.CatalogSearchForm)}return!1},_MobileonClick:function(e){document.MobileCatalogSearchForm.searchTerm.value=trim(document.MobileCatalogSearchForm.searchTerm.value);if(document.MobileCatalogSearchForm.searchTerm.value.length>0){"undefined"!=typeof TealeafWCJS&&TealeafWCJS.processDOMEvent(e);submitSpecifiedForm(document.MobileCatalogSearchForm)}return!1},doDynamicAutoSuggest:function(e,t,o){if(this.autoSuggestTimer!=-1){clearTimeout(this.autoSuggestTimer);this.autoSuggestTimer=-1}this.autoSuggestTimer=setTimeout(function(){$(".look-ahead-categories .list_section").length>0?$("#look-ahead").addClass("active"):$("#look-ahead").removeClass("active");var r=t.toLowerCase();$.ajax({url:e+"&term="+encodeURIComponent(t)+"&showHeader="+o,type:"GET",cache:!1,contentType:"application/json",dataType:"json",data:"",success:function(e){var o=!1,n="",a="",i=e.SearchTermResult.header;for(var d in e.SearchTermResult.results){o=!0;n=n+"<li id='suggestionItem_"+d+"' role='listitem' tabindex='-1'>";n+="<a role='listitem' href='#' onmouseout='this.className=\"\"' ";n=n+" onmouseover='SearchJS.enableAutoSelect(\""+d+"\");'  ";n=n+" onclick='SearchJS.selectAutoSuggest(this.title); return false;' title='"+e.SearchTermResult.results[d]+"'";n=n+" id='autoSelectOption_"+d+"'>";n+=e.SearchTermResult.results[d].replace(r,"<span class='highlight'>"+t+"</span>");n+="</a></li>"}if(o){a="<div id='suggestedKeywordResults'><div id='look-ahead-keywords'>"+i;a+="<div class='list_section'>";a=a+"<div title='"+i+"' role='list' aria-labelledby='suggest_keywords_ACCE_Label'></div>";a+=" <ul class='list-unstyled'>";a+=n;a+="</ul></div></div></div>";$("#searchSuggestionResults_div").html(a)}var s="";"undefined"!=typeof e&&"undefined"!=typeof e.ProductResults&&"undefined"!=typeof e.ProductResults.header&&(s=e.ProductResults.header);var l="<div class='row'>";l=l+"<div class='col-12'>"+s+"</div></div>";l+="<div class='row'>";if("undefined"!=typeof e&&"undefined"!=typeof e.ProductResults&&"undefined"!=typeof e.ProductResults.results)for(var d in e.ProductResults.results){o=!0;var c=e.ProductResults.results[d].resultThumbnail,u=c.replace("$Thumbnail$","$tile-recommendations$"),p=c.replace("$Thumbnail$","$PDP-thumbnail$");if(isCloudniaryEnabled()){var u=c.replace("$Thumbnail$",""),p=c.replace("$Thumbnail$","");u=u.replace("f_auto,q_auto","f_auto,q_auto,t_tile-recommendations");p=u.replace("f_auto,q_auto","f_auto,q_auto,t_PDP-thumbnail")}l=l+'<div class="col-4 prod-tile-rfl" onclick="location.href=\''+e.ProductResults.results[d].productDisplayUrl+"'\">";l=l+'<div class="col-12 col-4-sm text-center" onclick="location.href=\''+e.ProductResults.results[d].productDisplayUrl+"'\">";l=l+'<img class="desktop-only rfk-img-responsive" src="'+u+'" title="'+e.ProductResults.results[d].ProductName+'">';l=l+'<img class="mobile-only rfk-img-responsive" src="'+p+'" title="'+e.ProductResults.results[d].ProductName+'">';l+="</div>";l=l+'<div class="col-12 col-8-sm text-left product-name" onclick="location.href=\''+e.ProductResults.results[d].productDisplayUrl+"'\" >";l=l+'<span class="brand-name" >'+e.ProductResults.results[d].brand+"</span>";l+=e.ProductResults.results[d].ProductName.indexOf(e.ProductResults.results[d].brand)>-1&&0==e.ProductResults.results[d].ProductName.indexOf(e.ProductResults.results[d].brand)?e.ProductResults.results[d].ProductName.replace(e.ProductResults.results[d].brand,""):e.ProductResults.results[d].ProductName;l+='</br><span class="mobile-only product-pricing">';l=l+'<span class="product-price-promo">$'+e.ProductResults.results[d].price+"</span>";"undefined"!=typeof e.ProductResults.results[d].listPrice&&1*e.ProductResults.results[d].listPrice>e.ProductResults.results[d].price&&(l=l+'<span class="product-price-crossout"> was $'+e.ProductResults.results[d].listPrice+"</span>");l+="</span>";l+="</div>";l=l+'<div class="col-12  desktop-only  text-center product-pricing" onclick="location.href=\''+e.ProductResults.results[d].productDisplayUrl+"'\">";l=l+'<span class="product-price-promo">$'+e.ProductResults.results[d].price+"</span>";"undefined"!=typeof e.ProductResults.results[d].listPrice&&1*e.ProductResults.results[d].listPrice>e.ProductResults.results[d].price&&(l=l+'<span class="product-price-crossout"> was $'+e.ProductResults.results[d].listPrice+"</span>");l+="</div>";l+="</div>"}l+="</div>";l+="<div class='row desktop-only'>";l+='<div class="col-2">&nbsp;</div><div class="col-8 text-center"><a href="javascript:document.CatalogSearchForm.submit()" class="btn btn-primary margin-bottom-sm btn-full" role="button">See All</a></div><div class="col-2"></div></div>';o&&$("#productSuggestionResults_div").html(l);var m=window.matchMedia("(max-width: 768px)").matches;m||setTimeout(function(){$(".prod-tile-rfl .product-name").dotdotdot()},25);var g=.5*$(window).width();2*$("#SimpleSearchForm_SearchTerm").width()<g&&(g=2*$("#SimpleSearchForm_SearchTerm").width());var f=window.innerHeight-$("#header").height();$("#search.search.persist-active.active").length>0&&(f-=$("#search.search.persist-active.active").height());if(m){$("#look-ahead").width($(window).width());$("#look-ahead").height((window.innerHeight-($("#header").height()+$("#search").height()))/2);$("#look-ahead").css("maxHeight",(window.innerHeight-($("#header").height()+$("#search").height()))/2+"px");o&&$("#look-ahead").addClass("active")}else{$("#productSuggestionResults_div").height()>$("#infoPart").height()?$("#infoPart").height($("#productSuggestionResults_div").height()):$("#productSuggestionResults_div").height($("#infoPart").height());$("#infoPart").height()+5<f&&(f=$("#infoPart").height()+5);$("#look-ahead").width(g);$("#look-ahead").height(f);$("#look-ahead").css("maxHeight",f+"px");$("#search.search.persist-active.active").length>0?$("#look-ahead").css("marginLeft","-"+($("#look-ahead").width()-$("#search.search.persist-active.active").width())+"px"):$("#look-ahead").css("marginLeft","0px");o&&$("#look-ahead").addClass("active")}},error:function(){console.log("Autocompleted Errored out.. ")}});this.autoSuggestTimer=-1},this.autoSuggestKeystrokeDelay)},gotoAdvancedSearch:function(e){var t=byId("SimpleSearchForm_SearchTerm").value;document.location.href=e+"&searchTerm="+t},showAutoSuggest:function(e){var t=document.getElementById("look-ahead");if(e){var o=e;$("#search").hasClass("persist-active")&&!$("#search").hasClass("active")&&(o=!1);o&&t.classList.add("active")}else t.classList.remove("active")},showAutoSuggestIfResults:function(){var e=document.getElementById("mobileSearchDropdown");"undefined"!=typeof staticContent&&""==document.getElementById(this.STATIC_CONTENT_SECTION_DIV[0]).innerHTML&&""==document.getElementById("autoSuggestHistory").innerHTML&&null==document.getElementById("dynamicAutoSuggestTotalResults")?this.showAutoSuggest(!1):null!=e&&"block"==e.style.display?document.getElementById("MobileSimpleSearchForm_SearchTerm").value.length<=this.AUTOSUGGEST_THRESHOLD?this.showAutoSuggest(!1):this.showAutoSuggest(!0):document.CatalogSearchForm.searchTerm.value.length<=this.AUTOSUGGEST_THRESHOLD?this.showAutoSuggest(!1):this.showAutoSuggest(!0)},selectAutoSuggest:function(e){var t=document.getElementById("mobileSearchDropdown");$("#searchKeyword").size()>0&&$("#SimpleSearchForm_SearchTerm").size()>0&&(document.getElementById("searchKeyword").value=document.getElementById("SimpleSearchForm_SearchTerm").value);if(null!=t&&"block"==t.style.display)var o=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var o=document.CatalogSearchForm.searchTerm;o.value=e;o.focus();this.autoSuggestPreviousTerm=e;"undefined"!=typeof TealeafWCJS&&TealeafWCJS.createExplicitChangeEvent(o);document.getElementById("look-ahead").classList.remove("active");"function"==typeof cmCreateElementTag&&cmCreateElementTag("SearchSuggest",e);try{var r;void 0!=dojo.byId("omnitureEnabled")&&null!=dojo.byId("omnitureEnabled")&&(r=dojo.byId("omnitureEnabled").value);if("undefined"!=r&&null!=r&&""!=r&&"true"==r){var n={};n.event_search_suggestion="yes";n.searchsuggestion_keyword=e;n.event_name="search_suggestion_added";pushEvent(n)}}catch(e){console.log("issue in tagging "+e)}dojo.place("<input type='hidden' value='SearchSuggest-_-"+e+"-_-Location' name='cm_sp' />",document.CatalogSearchForm);dojo.place("<input type='hidden' value='"+e+"' name='searchsuggestion_keyword' />",document.CatalogSearchForm);submitSpecifiedForm(document.CatalogSearchForm)},highLightSelection:function(e,t){var o=document.getElementById("autoSelectOption_"+t);if(null!=o&&"undefined"!=o){if(e){null!=document.getElementById("category_list_"+t)&&void 0!=document.getElementById("category_list_"+t)&&(document.getElementById("category_list_"+t).style.backgroundColor="#d9e9f7");null!=document.getElementById("autoSelectOption_"+t)&&void 0!=document.getElementById("autoSelectOption_"+t)&&(document.getElementById("autoSelectOption_"+t).style.backgroundColor="#d9e9f7");var r=document.getElementById("mobileSearchDropdown");if(null!=r&&"block"==r.style.display)var n=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var n=document.CatalogSearchForm.searchTerm;n.setAttribute("aria-activedescendant","suggestionItem_"+t);var a=document.getElementById("dynamicAutoSuggestTotalResults");if(null!=a&&"undefined"!=a&&t<a.value||t>=this.historyIndex){n.value=o.title;this.autoSuggestPreviousTerm=o.title;this.autoSuggestURL=""}else this.autoSuggestURL=o.href}else{null!=document.getElementById("category_list_"+t)&&void 0!=document.getElementById("category_list_"+t)&&$("#category_list_"+t).css("background-color","");null!=document.getElementById("autoSelectOption_"+t)&&void 0!=document.getElementById("autoSelectOption_"+t)&&$("#autoSelectOption_"+t).css("background-color","")}return!0}return!1},enableAutoSelect:function(e){this.highLightSelection(!1,this.autoSelectOption);null!=document.getElementById("category_list_"+e)&&void 0!=document.getElementById("category_list_"+e)&&(document.getElementById("category_list_"+e).style.backgroundColor="#d9e9f7");null!=document.getElementById("autoSelectOption_"+e)&&void 0!=document.getElementById("autoSelectOption_"+e)&&(document.getElementById("autoSelectOption_"+e).style.backgroundColor="#d9e9f7");this.autoSelectOption=e},disableHighlight:function(e){null!=document.getElementById("category_list_"+e)&&void 0!=document.getElementById("category_list_"+e)&&$("#category_list_"+e).css("background-color","");null!=document.getElementById("autoSelectOption_"+e)&&void 0!=document.getElementById("autoSelectOption_"+e)&&$("#autoSelectOption_"+e).css("background-color","")},resetAutoSuggestKeyword:function(){var e=document.getElementById("autoSuggestOriginalTerm");if(null!=e&&"undefined"!=e){var t=document.getElementById("mobileSearchDropdown");if(null!=t&&"block"==t.style.display)var o=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var o=document.CatalogSearchForm.searchTerm;o.value=e.value;this.autoSuggestPreviousTerm=e.value}},clearAutoSuggestResults:function(){if("undefined"!=typeof staticContent)for(var e=0;e<staticContent.length;e++)document.getElementById(this.STATIC_CONTENT_SECTION_DIV[e]).innerHTML="";this.autoSuggestPreviousTerm="";this.autoSuggestURL="";document.getElementById("searchSuggestionResults_div").innerHTML="";document.getElementById("productSuggestionResults_div").innerHTML="";this.showAutoSuggest(!1)},doAutoSuggest:function(e,t,o){o.length<=this.AUTOSUGGEST_THRESHOLD&&this.showAutoSuggest(!1);if(e.keyCode!=dojo.keys.ENTER)if(e.keyCode!=dojo.keys.TAB)if(e.keyCode!=dojo.keys.ESCAPE)if(e.keyCode!=dojo.keys.UP_ARROW){if(e.keyCode!=dojo.keys.DOWN_ARROW){if(!(o.length>this.AUTOSUGGEST_THRESHOLD&&o==this.autoSuggestPreviousTerm)){this.autoSuggestPreviousTerm=o;if(!(o.length<=this.AUTOSUGGEST_THRESHOLD)){if(this.autoSuggestTimer!=-1){clearTimeout(this.autoSuggestTimer);this.autoSuggestTimer=-1}if(""!=o){this.autoSelectOption=-1;this.doStaticAutoSuggest(o);if(o.length>this.DYNAMIC_AUTOSUGGEST_THRESHOLD){var r=!0;this.doDynamicAutoSuggest(t,o,r)}else{document.getElementById("searchSuggestionResults_div").innerHTML="";document.getElementById("productSuggestionResults_div").innerHTML=""}}else this.clearAutoSuggestResults()}}}else if(this.highLightSelection(!0,this.autoSelectOption+1)){this.highLightSelection(!1,this.autoSelectOption);this.autoSelectOption++}else if(this.autoSelectOption<this.CACHED_AUTOSUGGEST_OFFSET&&this.highLightSelection(!0,this.CACHED_AUTOSUGGEST_OFFSET)){this.highLightSelection(!1,this.autoSelectOption);this.autoSelectOption=this.CACHED_AUTOSUGGEST_OFFSET;this.resetAutoSuggestKeyword()}else if(!this.END_OF_LIST){this.highLightSelection(!1,this.autoSelectOption);this.autoSelectOption++;this.END_OF_LIST=!0;var n=document.getElementById("mobileSearchDropdown");if(null!=n&&"block"==n.style.display){document.getElementById("MobileSimpleSearchForm_SearchTerm")}else{document.CatalogSearchForm.searchTerm}}}else{var a=document.getElementById("dynamicAutoSuggestTotalResults");if(this.END_OF_LIST){this.END_OF_LIST=!1;this.autoSelectOption--;if(!this.highLightSelection(!0,this.autoSelectOption)&&this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&null!=a&&"undefined"!=a){this.autoSelectOption=a.value-1;this.highLightSelection(!0,this.autoSelectOption)}}else if(this.highLightSelection(!0,this.autoSelectOption-1)){this.highLightSelection(!1,this.autoSelectOption);this.autoSelectOption==this.historyIndex&&this.resetAutoSuggestKeyword();this.autoSelectOption--}else if(this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&null!=a&&"undefined"!=a){this.highLightSelection(!1,this.CACHED_AUTOSUGGEST_OFFSET);this.autoSelectOption=a.value-1;this.highLightSelection(!0,this.autoSelectOption)}else{this.highLightSelection(!1,this.autoSelectOption);this.autoSelectOption=-1;document.getElementById("autoSuggestOriginalTerm");this.resetAutoSuggestKeyword()}}else this.showAutoSuggest(!1);else this.autoSuggestHover=!0;else this._handleEnterKey()},tokenizeForBidi:function(e,t,o,r,n){var a=e.split(" > "),d="",s="";if(a.length>0){d=d+"<div class='category_list' id='category_list_"+n+"'>";for(i=0;i<a.length;i++){0!=i&&(d+="<span class='gt'>&nbsp; > &nbsp;</span>");if(i==a.length-1){var l=t.toLowerCase().indexOf(r),c=t.substr(0,l),u=t.substr(l+o.length),p="<span class='highlight'><strong>"+o+"</strong></span>";s=c+p+u}else s=a[i];d+=s}d+="</div>"}return d},doStaticAutoSuggest:function(e){var t=["","","","","",""],o=0,r=e.toLowerCase(),n=this.CACHED_AUTOSUGGEST_OFFSET,a="<div class='list_section'><div",i="</div></div>";if("undefined"!=typeof staticContent){for(var d=0;d<staticContent.length;d++){var s=0,l=staticContentHeaders[d].split(" ")[0];t[d]+="<ul class='list-unstyled'>";for(var c=0;c<staticContent[d].length;c++){var u=staticContent[d][c][0],p=staticContent[d][c][1],m=staticContent[d][c][2],g=u.toLowerCase().indexOf(r);if(g!=-1){var f=this.tokenizeForBidi(m,u,e,r,n);t[d]+="<li id='suggestionItem_"+n+"' role='listitem' tabindex='-1'><a id='autoSelectOption_"+n+"' title='"+u+"' onmouseout='SearchJS.disableHighlight("+n+"); this.autoSuggestURL=\"\";' onclick='SearchJS.hideSearchComponent();' onmouseover='SearchJS.enableAutoSelect(&quot;"+n+"&quot;); this.autoSuggestURL=this.href;' manual_cm_sp='SearchSuggestion-_-"+l+"Category_"+n+"-_-"+f.split(" ").join("").split('"').join("").split("'").join("")+"' href=\""+p+'">'+f+"</a></li>";s++;n++;if(s>=this.TOTAL_SUGGESTED)break}}t[d]+="</ul>"}for(var d=0;d<staticContent.length;d++){document.getElementById(this.STATIC_CONTENT_SECTION_DIV[d]).innerHTML="";if("<ul class='list-unstyled'></ul>"!=t[d]){var h="<div class='look-ahead-categories'>"+staticContentHeaders[d];document.getElementById(this.STATIC_CONTENT_SECTION_DIV[o]).innerHTML=h+a+" role='list' title='"+staticContentHeaders[d]+"' aria-label='"+staticContentHeaders[d]+"'>"+t[d]+i;o++}}}var I=document.getElementById("autoSuggestHistory");I.innerHTML="";new Array;this.historyIndex=n;getCookie("searchTermHistory");if(o>0){this.showAutoSuggest(!0);return!0}return!1},retrieveCachedSuggestions:function(){if(!this.retrievedCachedSuggestions){wc.render.getRefreshControllerById("AutoSuggestCachedSuggestionsController").url=this.CachedSuggestionsURL;console.debug("update cache sugg "+this.CachedSuggestionsURL);wc.render.updateContext("CachedSuggestions_Context",{})}},updateSearchTermHistoryCookie:function(e){var t="searchTermHistory",o="|"+e,r=getCookie(t);"undefined"!=typeof r&&(o=dojo.cookie(t)+o);dojo.cookie(t,o,{path:"/"})},updateSearchTermHistoryCookieAndRedirect:function(e,t){this.updateSearchTermHistoryCookie(e);document.location.href=t},isValidNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&e>=0},validateForm:function(e){e.minPrice.value=trim(e.minPrice.value);e.maxPrice.value=trim(e.maxPrice.value);var t=e.minPrice.value,o=e.maxPrice.value,r=this.isValidNumber(t),n=this.isValidNumber(o);if(t.length>0&&!r){MessageHelper.formErrorHandleClient(e.minPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN);return!1}if(o.length>0&&!n){MessageHelper.formErrorHandleClient(e.maxPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN);return!1}if(t.length>0&&o.length>0&&parseFloat(t)>parseFloat(o)){MessageHelper.formErrorHandleClient(e.maxPrice.id,MessageHelper.messages.ERROR_PRICE_RANGE);return!1}e.searchTerm.value=trim(e.searchTerm.value);e.filterTerm.value=trim(e.filterTerm.value);e.manufacturer.value=trim(e.manufacturer.value);var a=e.searchTerm.value,i=e.filterTerm.value,d=e.manufacturer.value;if(0==a.length&&0==i.length&&0==d.length){MessageHelper.formErrorHandleClient(e.searchTerm.id,MessageHelper.messages.ERROR_EMPTY_SEARCH_FIELDS);return!1}e.submit()},removeCOmmaAndSubmit:function(){var e=$("#SimpleSearchForm_SearchTerm"),t=$("#submitButton");if(e.val().length>0){t.addClass("active");var o=e.val();e.val(o.split("’").join("'"));if(o.indexOf(",")>-1&&o.split(",").length>2){o=o.replace(",","<<COMMA>>");o=o.replace(",","<<COMMA>>");o=o.split(",").join("");o=o.split("<<COMMA>>").join(",");e.val(o)}}else t.removeClass("active")}};wc.render.declareContext("AutoSuggest_Context",null,"");wc.render.declareContext("CachedSuggestions_Context",null,"");wc.render.declareRefreshController({id:"AutoSuggestCachedSuggestionsController",renderContext:wc.render.getContextById("CachedSuggestions_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){var t=(this.renderContext,document.getElementById("cachedSuggestions"));if(null==t){var o=document.getElementById("autoSuggestCachedSuggestions_div");null!=o&&(document.getElementById("autoSuggestCachedSuggestions_div").innerHTML="")}else{for(var r=t.getElementsByTagName("script"),n=r.length,a=0;a<n;a++){var i=document.createElement("script");i.type="text/javascript";i.text=r[a].text;document.getElementById("autoSuggestCachedSuggestions_div").appendChild(i)}SearchJS.retrievedCachedSuggestions=!0;var d=document.getElementById("mobileSearchDropdown");null!=d&&"block"==d.style.display?searchTerm=document.getElementById("MobileSimpleSearchForm_SearchTerm").value:searchTerm=document.CatalogSearchForm.searchTerm.value;searchTerm.length>SearchJS.AUTOSUGGEST_THRESHOLD&&SearchJS.doStaticAutoSuggest(searchTerm)}}});wc.render.declareRefreshController({id:"AutoSuggestDisplayController",renderContext:wc.render.getContextById("AutoSuggest_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){var t=(this.renderContext,document.getElementById("suggestedKeywordResults"));null==t&&(document.getElementById("autoSuggestDynamic_Result_div").innerHTML="");SearchJS.showAutoSuggestIfResults()}});var searchedItem="";wc.render.declareContext("petcoSearchBox_Context",null,"");wc.render.declareRefreshController({id:"petcoSearchBoxController",renderContext:wc.render.getContextById("petcoSearchBox_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;searchedItem=$("#SimpleSearchForm_SearchTerm").val();t.refresh(o.properties)},postRefreshHandler:function(widget){if(""!=searchedItem){$("#SimpleSearchForm_SearchTerm").val(searchedItem);$("#SimpleSearchForm_SearchTerm").focus()}eval($("#rfl-srch-javascript").html())}})}var order_updated={AjaxAddOrderItemWithShipingInfo:"AjaxAddOrderItemWithShipingInfo",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxUpdateOrderShippingInfo:"AjaxUpdateOrderShippingInfo",AjaxOrderCalculate:"AjaxOrderCalculate",AjaxLogoff:"AjaxLogoff",AjaxSetPendingOrder:"AjaxSetPendingOrder",AjaxUpdatePendingOrder:"AjaxUpdatePendingOrder",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxUpdateRewardOption:"AjaxUpdateRewardOption"},order_updated_2={
AjaxAddOrderItem:"AjaxAddOrderItem",AddOrderItem:"AddOrderItem",AddDonationItem:"AddDonationItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxOrderCalculate:"AjaxOrderCalculate"},dropdownUpdated=!1,dropdownInit=!1,timer,productAddedList=new Object;wc.render.declareContext("MiniShoppingCartContext",{status:"init"},"");wc.render.declareContext("MiniShopCartContentsContext",{status:"init",relativeId:"",contentId:"",contentType:""},"");wc.render.declareContext("MiniShopCartDropDownContext",null,"");wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext;if(e.actionId in order_updated||"AjaxDeleteOrderItemForShippingBillingPage"==e.actionId){var o=[];if("AddOrderItem"==e.actionId){o.addedOrderItemId=e.orderItemId+"";showDropdown=!0;var r="";for(productId in productAddedList){""!=r&&(r+=",");r+=productId}o.availableInfoOrderItemIds=r}o.deleteCartCookie=!0;dropdownInit=!1;dropdownUpdated=!1}},renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;if(o.testForChangedRC(["status"])){r.properties.deleteCartCookie=!0;t.refresh(r.properties)}},postRefreshHandler:function(e){this.renderContext;destroyDialog("MiniShopCartProductAdded");if(showDropdown){positionMiniShopCartDropDown("mini-cart-icon","MiniShopCartProductAdded","orderItemAdded");showDropdown=!1}updateCartCookie();populateProductAddedDropdown();resetDeleteCartCookie();updateUserCookie()}});wc.render.declareRefreshController({id:"MiniShopCartContentsController",renderContext:wc.render.getContextById("MiniShopCartContentsContext"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext;if(e.actionId in order_updated_2){var o=[];if("AddOrderItem"==e.actionId){o.addedOrderItemId=e.orderItemId+"";showDropdown=!0;var r="";for(productId in productAddedList){""!=r&&(r+=",");r+=productId}o.availableInfoOrderItemIds=r}o.deleteCartCookie=!0;t.refresh(o)}},renderContextChangedHandler:function(e,t){var o=this.renderContext;if(!dropdownUpdated){var r=document.getElementById("MiniShopCartContents"),n=document.getElementById("petco-loading");if(null!=r&&void 0!=r&&null!=n&&void 0!=n){r.style.display="none";n.style.display="block"}o.properties.fetchCartContents=!0;dropdownUpdated=!0;t.refresh(o.properties)}},postRefreshHandler:function(e){$("div.petco-checkout #continueReviewPage").hasClass("disabled")?$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').addClass("disabled"):$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').length>0&&$('a.btn-primary[manual_cm_sp="Header-_-Cart-_-Checkout"]').removeClass("disabled");var t=(this.renderContext,document.getElementById("MiniShopCartContents")),o=document.getElementById("petco-loading");if(null!=t&&void 0!=t&&null!=o&&void 0!=o){t.style.display="block";o.style.display="none"}destroyDialog("MiniShopCartProductAdded");if(showDropdown){$("#mini-cart").css("visibility","visible");positionMiniShopCartDropDown("mini-cart-icon","MiniShopCartProductAdded","orderItemAdded");showDropdown=!1;dropdownInit=!0;dropdownUpdated=!1}updateCartCookie();populateProductAddedDropdown();resetDeleteCartCookie();var r=dojo.cookie("WC_CartOrderId_10151"),n=("WC_CartTotal_".concat(r),dojo.cookie("rCartTotal"));if(null!=n){document.getElementById("cart-count").innerHTML=n;document.getElementById("mobile-cart-count").innerHTML=n;null!=document.getElementById("persistent-cart-count")&&(document.getElementById("persistent-cart-count").innerHTML=n)}else{null!=document.getElementById("cart-count")&&(document.getElementById("cart-count").innerHTML="");null!=document.getElementById("mobile-cart-count")&&(document.getElementById("mobile-cart-count").innerHTML="");null!=document.getElementById("persistent-cart-count")&&(document.getElementById("persistent-cart-count").innerHTML="")}updateUserCookie();cursor_clear()}});dojo.topic.subscribe("ProductInfo_Added",setProductAddedList);dojo.require("wc.service.common");dojo.require("dijit.registry");petcoAddToCartJS={langId:WCParamJS.langId,storeId:WCParamJS.storeId,catalogId:WCParamJS.catalogId,AddItem2ShopCartAjaxFromRecommendation:function(partnumber,elementId){var LOCALSTORAGE_STORES_KEY="petcostores";if(null==localStorage.getItem(LOCALSTORAGE_STORES_KEY)){var petcoNearestLocationsInitScript=document.getElementById("petcoNearestLocationsInitScript");null!=petcoNearestLocationsInitScript&&eval(petcoNearestLocationsInitScript.innerHTML)}var params=[];params.storeId=WCParamJS.storeId;params.catalogId=WCParamJS.catalogId;params.langId=WCParamJS.langId;params.orderId=".";params.calculationUsage="-1";params.inventoryValidation="true";var defaultShipMode=petcoAddToCartJS.getShipModeIdForDefault(),defaultFFMCenter=petcoAddToCartJS.getFfmCenterDefault();params.partNumber=partnumber;params.inventoryValidation="true";params.quantity="1";var ajaxShopCartService="AjaxAddRecommendedItemToCart";void 0!=document.getElementById("selectedRecommendationElement")&&(document.getElementById("selectedRecommendationElement").value=elementId);if(submitRequest()){cursor_wait();"undefined"!=typeof shoppingActionsServicesDeclarationJS&&shoppingActionsServicesDeclarationJS.setCommonParameters(WCParamJS.langId,WCParamJS.storeId,WCParamJS.catalogId);wc.service.invoke(ajaxShopCartService,params);"undefined"!=typeof productDisplayJS&&(productDisplayJS.baseItemAddedToCart=!0)}},getShipModeIdForDefault:function(){var e="",t="petcostores",o=null!=JSON.parse(localStorage.getItem(t))?JSON.parse(localStorage.getItem(t)):{};if("undefined"!=typeof o.shipmodes&&o.shipmodes.length>0){var r=JSON.parse(o.shipmodes);"undefined"!=typeof r.DEFAULT_SHIPMODE&&(e=r.DEFAULT_SHIPMODE)}return e},getFfmCenterDefault:function(){var e="",t="petcostores",o=null!=JSON.parse(localStorage.getItem(t))?JSON.parse(localStorage.getItem(t)):{};if("undefined"!=typeof o.shipmodes&&o.shipmodes.length>0){var r=JSON.parse(o.shipmodes);"undefined"!=typeof r.DEFAULT_FFMCENTER&&(e=r.DEFAULT_FFMCENTER)}return e}};wc.service.declare({id:"AjaxAddRecommendedItemToCart",actionId:"AjaxAddRecommendedItemToCart",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){setTimeout(function(){$("#mini-cart").css("visibility","visible");var e='<div class="mini-cart-active-item"><span class="glyphicon glyphicon-ok"></span> Item successfully added to cart.</div>';$(".mini-cart-item").first().append(e);setTimeout(function(){$("#mini-cart").css("visibility","hidden");$("div.mini-cart-active-item").remove()},3e3)},1e3);document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus();dojo.require("dijit.registry");MessageHelper.hideAndClearMessage();cursor_clear();null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0]);dojo.publish("CMAddToCart");var t;null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")&&(t=$("#omnitureEnabled").val());if("undefined"!=t&&null!=t&&""!=t&&"true"==t){var o={},r=document.getElementById("selectedRecommendationElement").value,n=r+"-addToCartBtn",a=r+"-productName-tagging",i=r+"-partNumber-tagging",d="",s="",l="";if(void 0!=document.getElementById(a)){d=document.getElementById(a).value;l=d.replace(/["']/g,"")}void 0!=document.getElementById(i)&&(s=document.getElementById(i).value);var c=dojo.cookie("WC_CartOrderId_10151");if(""==c||null==c||"undefined"==c){o.event_name="cart_open";o.cart_id=e.orderId[0]}else{o.event_name="cart_add";o.cart_id=c}o.product_sku=s;o.product_name=l;o.add_to_cart_quantity="1";o.product_delivery_type="one time";pushEvent(o,n)}document.location.href=getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&calculationUsageId=-6&orderId=.&langId="+petcoAddToCartJS.langId+"&catalogId="+petcoAddToCartJS.catalogId+"&storeId="+petcoAddToCartJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=true&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-7&orderId=.&langId="+petcoAddToCartJS.langId+"&catalogId="+petcoAddToCartJS.catalogId+"&storeId="+petcoAddToCartJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=false&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderItemDisplay?doInventory=Y&orderId=.&langId="+petcoAddToCartJS.langId+"&catalogId="+petcoAddToCartJS.catalogId+"&storeId="+petcoAddToCartJS.storeId))},failureHandler:function(e){if(e.errorMessage){petcoCommonJS.showModalNotificationAlert(e.errorMessage);cursor_clear();return!1}e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}});shoppingActionsJS={langId:WCParamJS.langId,storeId:WCParamJS.storeId,catalogId:WCParamJS.catalogId,userType:WCParamJS.userType,baseItemAddedToCart:!1,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object,moreInfoUrl:"",isPopup:!1,displayPriceRange:!0,itemPriceJsonOject:[],itemImageJsonOject:[],allSwatchesArrayList:new Object,skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",currentNumberOfItemsInCompareZone:0,currentNumberOfCatEntryIds:1,maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object,productList:new Object,currencySymbol:WCParamJS.currencySymbol,compareReturnName:"",searchTerm:"",search01:"'",search02:'"',replaceStr01:/\\\'/g,replaceStr02:/\\\"/g,ampersandChar:/&/g,ampersandEntityName:"&amp;",productAddedList:new Object,setCompareReturnName:function(e){this.compareReturnName=e},setSearchTerm:function(e){this.searchTerm=e},setCommonParameters:function(e,t,o,r,n){this.langId=e;this.storeId=t;this.catalogId=o;this.userType=r;this.currencySymbol=n},setEntitledItems:function(e){this.entitledItems=e},getCatalogEntryId:function(e){var t=[],o=this.selectedAttributesList[e];for(attribute in o)t.push(attribute+"_"+o[attribute]);return this.resolveSKU(t)},getCatalogEntryIdforProduct:function(e){var t=[];for(attribute in e)t.push(attribute+"_"+e[attribute]);return this.resolveSKU(t)},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},resolveSKU:function(e){var t="",o=e.length;if(1==this.entitledItems.length)return this.entitledItems[0].catentry_id;for(x in this.entitledItems){var t=this.entitledItems[x].catentry_id,r=this.entitledItems[x].Attributes,n=0;for(index in r)n++;if(0==o&&0==n)return t;if(0!=n&&o>=n){var a=0;for(attributeName in e){var i=e[attributeName];i in r&&a++}if(n==a)return t}}return null},setSelectedAttribute:function(e,t,o,r,n){var a=this.selectedAttributesList[o];null==a&&(a=new Object);t=t.replace(this.replaceStr01,this.search01);t=t.replace(this.replaceStr02,this.search02);t=t.replace(this.ampersandChar,this.ampersandEntityName);a[e]=t;this.moreInfoUrl=this.moreInfoUrl+"&"+e+"="+t;this.selectedAttributesList[o]=a;this.changeProdImage(o,e,t,r,n)},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;selectedAttributesForProduct=this.selectedProducts[productId]?this.selectedProducts[productId]:new Object;null!=selectedAttributeName&&""!=selectedAttributeName&&(selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue);this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(null==catalogEntryId)catalogEntryId=0;else{this.changePrice("entitledItem_"+productId,!1,!0,productId);if(null!=MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)productId==MerchandisingAssociationJS.baseItemParams.components[idx].productId&&(MerchandisingAssociationJS.baseItemParams.components[idx].id=catalogEntryId)}var productDetails=null;if(this.productList[productId])productDetails=this.productList[productId];else{productDetails=new Object;this.productList[productId]=productDetails;productDetails.baseItemId=productId}productDetails.id=catalogEntryId;productDetails.quantity&&dojo.topic.publish("Quantity_Changed",dojo.toJson(productDetails));isSingleSKU||0!=catalogEntryId&&dojo.topic.publish("DefiningAttributes_Resolved_"+productId,catalogEntryId,productId)},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){var entitledItemJSON,isRDAddOn=!1;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject();null!=customParams&&"undefined"!=customParams&&"repeatDeliveryAddOn"==customParams.catalogEntryType&&(isRDAddOn=!0);this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId){var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);if(isRDAddOn)this.AddItem2RecurringOrderAjax(catalogEntryId,quantity,customParams,productId);else{this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams,productId);this.baseItemAddedToCart=!0}null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup")}else if(1==isPopup){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS.ERR_RESOLVING_SKU)}else{MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);this.baseItemAddedToCart=!1}try{var omnitureEnabled;void 0!=dojo.byId("omnitureEnabled")&&null!=dojo.byId("omnitureEnabled")&&(omnitureEnabled=dojo.byId("omnitureEnabled").value);if("undefined"!=omnitureEnabled&&null!=omnitureEnabled&&""!=omnitureEnabled&&"true"==omnitureEnabled&&null!=customParams&&"undefined"!=customParams&&("donation"==customParams.catalogEntryType||"donation-page"==customParams.catalogEntryType)){var cartEventDetails={};cartEventDetails.event_name="cart_add_donation";for(var x in entitledItemJSON)entitledItemJSON[x].catentry_id==catalogEntryId&&(cartEventDetails.cart_donation_amount=entitledItemJSON[x].catentry_name);var cartOrderId=dojo.cookie("WC_CartOrderId_10151");null!=cartOrderId&&""!=cartOrderId&&(cartEventDetails.cart_id=cartOrderId);pushEvent(cartEventDetails,"addDonationBtn")}}catch(e){console.log("issue in tagging "+e)}},Add2RecurringOrderAjax:function(e,t,o,r){this.Add2ShopCartAjax(e,t,o,r)},AddItem2ShopCartAjax:function(e,t,o,r){var n=[];n.storeId=this.storeId;n.catalogId=this.catalogId;n.langId=this.langId;n.orderId=".";CheckoutHelperJS.shoppingCartPage?n.calculationUsage="-1,-2,-5,-6,-7":n.calculationUsage="-1,-3,-4,-5,-6,-7";n.inventoryValidation="true";var a="AddOrderItem",i=!1;this.productAddedList=new Object;if(dojo.isArray(e)&&dojo.isArray(t))for(var d=0;d<e.length;d++){if(!isPositiveInteger(t[d])){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}n["catEntryId_"+(d+1)]=e[d];n["quantity_"+(d+1)]=t[d]}else{if(!isPositiveInteger(t)){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}n.catEntryId=e;n.quantity=t;var s=new Object;for(attr in this.selectedAttributesList["entitledItem_"+r])s[attr]=this.selectedAttributesList["entitledItem_"+r][attr];void 0==r?this.saveAddedProductInfo(t,e,e,s):this.saveAddedProductInfo(t,r,e,s)}if(null!=o&&"undefined"!=o){for(d in o)n[d]=o[d];if("dynamicKit"==o.catalogEntryType)a="AddPreConfigurationToCart";else if("donation"==o.catalogEntryType)a="AddDonationItem";else if("repeatDeliveryAddOn"==o.catalogEntryType){i=!0;a="AddOrderItemToOrder";n.orderId="**"}}var l=document.getElementsByName("contractSelectForm_contractId");if(null!=l&&"undefined"!=l)for(d=0;d<l.length;d++)if(l[d].checked){n.contractId=l[d].value;break}if(submitRequest()){cursor_wait();wc.service.invoke(a,n);if(!i){this.baseItemAddedToCart=!0;document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus()}}},AddItem2RecurringOrderAjax:function(e,t,o,r){this.AddItem2ShopCartAjax(e,t,o,r)},AddBundle2ShopCartAjax:function(){var e="AddOrderItem",t=[];t.storeId=this.storeId;t.catalogId=this.catalogId;t.langId=this.langId;t.orderId=".";t.calculationUsage="-1,-2,-5,-6,-7";t.inventoryValidation="true";var o=1;this.productAddedList=new Object;for(productId in this.productList){var r=this.productList[productId],n=dojo.number.parse(r.quantity);if(0!=n){if(0==r.id){MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);return}if(isNaN(n)||n<0){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}t["catEntryId_"+o]=r.id;t["quantity_"+o++]=n;this.baseItemAddedToCart=!0;this.saveAddedProductInfo(n,productId,r.id,this.selectedProducts[productId])}}if(submitRequest()){cursor_wait();wc.service.invoke(e,t)}},resetProductAddedList:function(){shoppingActionsJS.productAddedList=new Object},saveAddedProductInfo:function(e,t,o,r){var n="";null!=document.getElementById("ProductInfoName_"+t)?n=document.getElementById("ProductInfoName_"+t).value:null!=document.getElementById("ProductInfoName_"+o)&&(n=document.getElementById("ProductInfoName_"+o).value);var a="";null!=document.getElementById("ProductInfoImage_"+t)?a=document.getElementById("ProductInfoImage_"+t).value:null!=document.getElementById("ProductInfoImage_"+o)&&(a=document.getElementById("ProductInfoImage_"+o).value);var i="";null!=document.getElementById("ProductInfoPrice_"+t)?i=document.getElementById("ProductInfoPrice_"+t).value:null!=document.getElementById("ProductInfoPrice_"+o)&&(i=document.getElementById("ProductInfoPrice_"+o).value);var d=[n,a,i,e,r];t!=o?this.productAddedList[o]=d:this.productAddedList[t]=d;dojo.topic.publish("ProductInfo_Added",this.productAddedList)},setSKUImageId:function(e){this.skuImageId=e},getImageForSKU:function(e,t){var o=[],r=this.selectedAttributesList[e];for(attribute in r)o.push(attribute+"_"+r[attribute]);return this.resolveImageForSKU(o,t)},resolveImageForSKU:function(e,t){var o="",r=e.length;for(x in this.entitledItems){if(null!=t)var o=this.entitledItems[x][t];else var o=this.entitledItems[x].ItemImage467;var n=this.entitledItems[x].Attributes,a=0;for(index in n)a++;if(0==r&&0==a)return o;if(0!=a&&r>=a){var i=0;for(attributeName in e){var d=e[attributeName];d in n&&i++}if(a==i){var s=[];s.push(o);s.push(this.entitledItems[x].ItemThumbnailImage);if(null!=this.entitledItems[x].ItemAngleThumbnail&&void 0!=this.entitledItems[x].ItemAngleThumbnail){s.push(this.entitledItems[x].ItemAngleThumbnail);s.push(this.entitledItems[x].ItemAngleFullImage)}return s}}}return null},changeViewImages:function(e,t){var o=0;for(x in e){var r=o;o++;null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+o)&&(dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+o).src=e[x]);null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+o)&&(dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+o).href="JavaScript:changeThumbNail('productAngleLi"+r+"','"+t[x]+"');");null!=dojo.byId("productAngleLi"+r)&&"selected"==dojo.byId("productAngleLi"+r).className&&changeThumbNail("productAngleLi"+r,t[x])}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")"));this.setEntitledItems(entitledItemJSON);var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1),skuImage=null,imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);null!=imageArr&&(skuImage=imageArr[0]);void 0!=skuImageId&&this.setSKUImageId(skuImageId);if(null!=skuImage){if(null!=dojo.byId(this.skuImageId)){document.getElementById(this.skuImageId).src=skuImage;null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=skuImage);var itemAngleThumbnail=imageArr[2],itemAngleFullImage=imageArr[3];null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}}else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField)var itemImage=this.entitledItems[x][imageField];else var itemImage=this.entitledItems[x].ItemImage467;var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail,itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;for(y in Attributes){var index=y.indexOf("_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){if(null!=dojo.byId(this.skuImageId)){dojo.byId(this.skuImageId).src=itemImage;null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=itemImage)}null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage);imageFound=!0;break}}if(imageFound)break}}},updateSwatchListView:function(){for(var swatchArray=dojo.query("a[id^='swatch_array_']"),i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"))}for(var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']"),i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"))}for(var swatchDefault=dojo.query("a[id^='swatch_selectDefault_']"),i=0;i<swatchDefault.length;i++){var swatchDefaultElement=swatchDefault[i];eval(dojo.attr(swatchDefaultElement,"href"))}},selectSwatch:function(e,t,o,r,n,a){if(!dojo.hasClass("swatch_"+o+"_"+t,"color_swatch_disabled")){var i=this.selectedAttributesList[o];for(attribute in i){if(attribute==e&&i[attribute]!=t){var d=dojo.byId("swatch_"+o+"_"+i[attribute]);d.className="color_swatch";d.src=d.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+o+"_"+i[attribute]).title=d.alt}null!=document.getElementById("swatch_link_"+o+"_"+i[attribute])&&document.getElementById("swatch_link_"+o+"_"+i[attribute]).setAttribute("aria-checked","false")}this.makeSwatchSelection(e,t,o,r,n,a)}},makeSwatchSelection:function(e,t,o,r,n,a){this.setSelectedAttribute(e,t,o,n,a);document.getElementById("swatch_"+o+"_"+t).className="color_swatch_selected";document.getElementById("swatch_link_"+o+"_"+t).setAttribute("aria-checked","true");document.getElementById("swatch_selection_label_"+o+"_"+e).className="header color_swatch_label";"none"==document.getElementById("swatch_selection_"+o+"_"+e).style.display&&(document.getElementById("swatch_selection_"+o+"_"+e).style.display="inline");document.getElementById("swatch_selection_"+o+"_"+e).innerHTML=t;this.updateSwatchImages(e,o,r,a)},addToAllSwatchsArray:function(e,t,o,r){var n=this.allSwatchesArrayList[r];null==n&&(n=new Array);if(!this.existInAllSwatchsArray(e,t,n)){var a=new Array;a[0]=e;a[1]=t;a[2]=o;a[4]=document.getElementById("swatch_link_"+r+"_"+t).onclick;n.push(a);this.allSwatchesArrayList[r]=n}},existInAllSwatchsArray:function(e,t,o){for(var r=0;r<o.length;r++){var n=o[r][0],a=o[r][1];if(n==e&&a==t)return!0}return!1},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){if(0==this.entitledItems.length){null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")"));this.setEntitledItems(entitledItemJSON)}for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_"),swatchName=y.substring(0,index),swatchValue=y.substring(index+1);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,imageField)}break}},updateSwatchImages:function(e,t,o,r){for(var n=new Array,a=this.selectedAttributesList[t],i=a[e],d=this.allSwatchesArrayList[t],s=0;s<d.length;s++){var l=d[s][0],c=d[s][1],u=d[s][2],p=(d[s][3],d[s][4]);if(l!=o&&l!=e){var m=new Array;m[0]=l;m[1]=c;m[2]=u;m[4]=p;m[5]=!1;n.push(m)}}for(x in this.entitledItems){var g=this.entitledItems[x].Attributes;for(y in g){var f=y.indexOf("_"),h=y.substring(0,f),I=y.substring(f+1);if(h==e&&I==i)for(z in g){var v=z.indexOf("_"),C=z.substring(0,v),_=z.substring(v+1);if(y!=z)for(s in n){var S=n[s][0],b=n[s][1];C==S&&_==b&&(n[s][5]=!0)}}}}var E=[];for(s in n){var S=n[s][0],b=n[s][1],T=(n[s][2],n[s][3],n[s][4]),D=n[s][5];if(D){if("color_swatch_selected"!=document.getElementById("swatch_"+t+"_"+b).className){var A=dojo.byId("swatch_"+t+"_"+b);A.className="color_swatch";A.src=A.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+t+"_"+b).title=A.alt}document.getElementById("swatch_link_"+t+"_"+b).setAttribute("aria-disabled","false");document.getElementById("swatch_link_"+t+"_"+b).onclick=T}else if(S!=o){var A=dojo.byId("swatch_"+t+"_"+b),R=dojo.byId("swatch_link_"+t+"_"+b);A.className="color_swatch_disabled";R.onclick=null;A.src=A.src.replace("_enabled.png","_disabled.png");var P=storeNLS.INV_ATTR_UNAVAILABLE;R.title=dojo.string.substitute(P,{0:A.alt});document.getElementById("swatch_link_"+t+"_"+b).setAttribute("aria-disabled","true");a[S]==b&&E.push(n[s])}}for(s in E){var w=E[s][0],k=E[s][1];for(s in n){var S=n[s][0],b=n[s][1],D=n[s][5];if(S==w&&b!=k&&D){this.makeSwatchSelection(S,b,t,o,r);break}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){this.displayPriceRange=displayPriceRange;this.isPopup=isPopup;var entitledItemJSON;entitledItemJSON=null==dojo.byId(entitledItemId)||this.isPopup?this.getEntitledItemJsonObject():eval("("+dojo.byId(entitledItemId).innerHTML+")");var catalogEntryId=null;this.setEntitledItems(entitledItemJSON);if(this.selectedProducts[productId])var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId]);else var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId)if(null!=this.itemPriceJsonOject[catalogEntryId]&&"undefined"!=this.itemPriceJsonOject[catalogEntryId])this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId);else{var parameters={};parameters.storeId=this.storeId;parameters.langId=this.langId;parameters.catalogId=this.catalogId;parameters.catalogEntryId=catalogEntryId;parameters.productId=productId;dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:parameters,service:this,load:shoppingActionsJS.displayPriceServiceResponse,error:function(e,t){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.")}})}else console.debug("ShoppingActions.changePrice: all attributes are not selected.")},displayPriceServiceResponse:function(e,t){var o=t.args.content.productId;shoppingActionsJS.itemPriceJsonOject[e.catalogEntry.catalogEntryIdentifier.uniqueID]=e;shoppingActionsJS.displayPrice(e.catalogEntry,o)},displayImageServiceResponse:function(e,t){shoppingActionsJS.itemImageJsonOject[e.catalogEntry.catalogEntryIdentifier.uniqueID]=e;shoppingActionsJS.displayImage(e.catalogEntry)},displayImage:function(e){var t=this.currentNumberOfCatEntryIds,o=dojo.byId("compareThumb"+t),r=dojo.byId("compareThumb1"),n=dojo.byId("compareThumb2"),a=dojo.byId("compareThumb3"),i=dojo.byId("compareThumb4");if(""==r.innerHTML.trim()){t=1;o=dojo.byId("compareThumb"+t)}else if(""==n.innerHTML.trim()){t=2;o=dojo.byId("compareThumb"+t)}else if(""==a.innerHTML.trim()){t=3;o=dojo.byId("compareThumb"+t)}else if(""==i.innerHTML.trim()){t=4;o=dojo.byId("compareThumb"+t)}var d=e.description[0].thumbnail+"?$ProductList-medium$";isCloudniaryEnabled()&&(d=e.description[0].thumbnail.replace("f_auto,q_auto","f_auto,q_auto,t_ProductList-medium"));o.innerHTML="<img class='img-responsive' src='"+d+"' id='compare_image_"+e.catalogEntryIdentifier.uniqueID+"'/>";var s=t;if(s>1){var l=document.getElementById("compareProductsURL").value;document.getElementById("compare_link").setAttribute("onclick",l);document.getElementById("compare_link").style.cursor="pointer";document.getElementById("compare_link").style.color="#00a3e0";$(".comparelink").tooltip("disable")}else{document.getElementById("compare_link").setAttribute("href","#");document.getElementById("compare_link").style.cursor="not-allowed";document.getElementById("compare_link").style.color="#808080";$(".comparelink").tooltip("enable")}this.currentNumberOfCatEntryIds=this.currentNumberOfCatEntryIds+1},displayPrice:function(e,t){var o,r=shoppingActionsJS.isPopup;if(1==r){document.getElementById("productPrice").innerHTML=e.offerPrice;document.getElementById("productName").innerHTML=e.description[0].name;document.getElementById("productSKUValue").innerHTML=e.catalogEntryIdentifier.externalIdentifier.partNumber}if(0==r){var n="",a=dojo.currency.parse(e.listPrice,{symbol:this.currencySymbol}),i=dojo.currency.parse(e.offerPrice,{symbol:this.currencySymbol});this.setPriceInProductList(t,i);n=!e.listPriced||a<=i?"<span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price'>"+e.offerPrice+"</span>":"<span id='listPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='old_price'>"+e.listPrice+"</span><span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price'>"+e.offerPrice+"</span>";document.getElementById("price_display_"+t).innerHTML=n+"<input type='hidden' id='ProductInfoPrice_"+e.catalogEntryIdentifier.uniqueID+"' value='"+e.offerPrice+"'/>";n="";if(1==shoppingActionsJS.displayPriceRange)for(var d in e.priceRange){if(e.priceRange[d].endingNumberOfUnits==e.priceRange[d].startingNumberOfUnits){o=storeNLS.PQ_PRICE_X;n=n+"<p>"+dojo.string.substitute(o,{0:e.priceRange[d].startingNumberOfUnits})}else if("null"!=e.priceRange[d].endingNumberOfUnits){o=storeNLS.PQ_PRICE_X_TO_Y;n=n+"<p>"+dojo.string.substitute(o,{0:e.priceRange[d].startingNumberOfUnits,1:e.priceRange[d].endingNumberOfUnits})}else{o=storeNLS.PQ_PRICE_X_OR_MORE;n=n+"<p>"+dojo.string.substitute(o,{0:e.priceRange[d].startingNumberOfUnits})}n=n+" <span class='price'>"+e.priceRange[d].localizedPrice+"</span></p>"}var s=dojo.byId("productLevelPriceRange_"+t),l=dojo.byId("itemLevelPriceRange_"+t);if(null!=s&&null==l)dojo.style(s,"display","");else if(""!=n&&null!=l){n=storeNLS.PQ_PURCHASE+n;l.innerHTML=n;dojo.style(l,"display","");null!=s&&dojo.style(s,"display","none")}else if(""==n){null!=l&&dojo.style(l,"display","none");null!=s&&dojo.style(s,"display","")}var c=dojo.query("#product_name_"+t+" > a");1==c.length?c[0].innerHTML=e.description[0].name:dojo.byId("product_name_"+t)&&(dojo.byId("product_name_"+t).innerHTML=e.description[0].name);null!=dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']")&&dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']").forEach(function(t){null!=t.childNodes&&3==t.childNodes.length&&(t.childNodes[1].innerHTML=e.description[0].name)});null!=document.getElementById("ProductInfoName_"+t)&&(document.getElementById("ProductInfoName_"+t).value=e.description[0].name);document.getElementById("product_shortdescription_"+t)&&(document.getElementById("product_shortdescription_"+t).innerHTML=e.description[0].shortDescription);document.getElementById("product_SKU_"+t)&&(document.getElementById("product_SKU_"+t).innerHTML=storeNLS.SKU+" "+e.catalogEntryIdentifier.externalIdentifier.partNumber)}},showWCDialogPopup:function(e){var t=dijit.byId(e);if(null!=t){t.closeButtonNode.style.display="none";t.show()}else console.debug(e+" does not exist")},notifyAttributeChange:function(e){this.baseCatalogEntryId=e;this.selectedAttributesList["entitledItem_"+e];dojo.topic.publish("DefiningAttributes_Resolved_"+e,e,-1)},notifyQuantityChange:function(e){dojo.topic.publish("Quantity_Changed",e)},
initCompare:function(e){if("search"!=e)this.checkForCompare();else{var t=this.cookieKeyPrefix+this.storeId,o="";dojo.cookie(t,o,{path:"/"})}},changeCompareBox:function(e,t){box=document.getElementById(e);box.checked=!box.checked;this.addOrRemoveFromCompare(cox.checkedatEntryIdentifier,b)},addOrRemoveFromCompare:function(e,t){t?this.addToCompare(e):this.removeFromCompare(e)},addOrRemoveFromComparePetco:function(e,t,o){var r=document.getElementById("sku_"+e).value;if(o){if(null!=r&&"undefined"!=r){var n={event_name:"product_compare",conversion_event_id:"Product Compare",conversion_category_id:"Product Compare",conversion_action_type:"1",product_sku:r};pushEvent(n)}this.addToComparePetco(e,t)}else{this.removeFromComparePetco(e,t);$("input").tooltip("disable")}},getCatentryDetails:function(e){if(null!=e)if(null!=this.itemImageJsonOject[e]&&"undefined"!=this.itemImageJsonOject[e])this.displayImage(this.itemImageJsonOject[e].catalogEntry);else{var t={};t.storeId=this.storeId;t.langId=this.langId;t.catalogId=this.catalogId;t.catalogEntryId=e;dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",sync:!0,handleAs:"json-comment-filtered",content:t,service:this,load:shoppingActionsJS.displayImageServiceResponse,error:function(e,t){console.debug("ShoppingActions.getCatentryDetails: Unexpected error occurred during an xhrPost request.")}})}else console.debug("ShoppingActions.getCatentryDetails: catEntId is null.")},addToCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,o=dojo.cookie(t);if(null==o||o.indexOf(e)==-1&&null!=e){var r=0;null!=o&&""!=o&&(r=o.split(this.cookieDelimiter).length);if(r<parseInt(this.maxNumberProductsAllowedToCompare)){var n="";n=null==o||""==o?e:o+this.cookieDelimiter+e;dojo.cookie(t,n,{path:"/"});shoppingActionsJS.checkForCompare()}else{this.showWCDialogPopup("widget_product_comparison_popup");document.getElementById("comparebox_"+e).checked=!1}}else MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS)},addToComparePetco:function(e,t){var o=this.cookieKeyPrefix+this.storeId,r=dojo.cookie(o);if(null==r||r.indexOf(e)==-1&&null!=e){var n=0;null!=r&&""!=r&&(n=r.split(this.cookieDelimiter).length);if(n<parseInt(this.maxNumberProductsAllowedToCompare)){var a="";a=null==r||""==r?e:r+this.cookieDelimiter+e;dojo.cookie(o,a,{path:"/"});currentNumberOfItemsInCompareZone=a.split(this.cookieDelimiter).length;var i=dojo.byId("compareProductsURL").value;if(currentNumberOfItemsInCompareZone<parseInt(this.minNumberProductsAllowedToCompare)){document.getElementById("compare_link").setAttribute("href","#");document.getElementById("compare_link").style.cursor="not-allowed";document.getElementById("compare_link").style.color="#808080";$(".comparelink").tooltip("enable")}else{document.getElementById("compare_link").setAttribute("onclick",i);document.getElementById("compare_link").style.cursor="pointer";document.getElementById("compare_link").style.color="#00a3e0";$(".comparelink").tooltip("disable")}shoppingActionsJS.addProductstoCompare(e,t);shoppingActionsJS.checkForCompare()}else document.getElementById("comparebox_"+e).checked=!1;3==n&&this.addMaxCompareTooltip()}else MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS)},addMaxCompareTooltip:function(){$("input").tooltip("enable");for(var e=this.cookieKeyPrefix+this.storeId,t=dojo.cookie(e),o=t.split(this.cookieDelimiter),r=0;r<o.length;r++)$("#comparebox_"+o[r]).tooltip("disable")},addProductstoCompare:function(e,t){var o=dojo.byId("compareThumb1"),r=dojo.byId("compareThumb2"),n=dojo.byId("compareThumb3"),a=dojo.byId("compareThumb4"),i=null;""==o.innerHTML.trim()?i=o:""==r.innerHTML.trim()?i=r:""==n.innerHTML.trim()?i=n:""==a.innerHTML.trim()&&(i=a);var d=document.createElement("IMG"),s=document.createAttribute("src");s.value=t;var l=document.createAttribute("class");l.value="img-responsive";var c=document.createAttribute("id");c.value="compare_image_"+e;d.setAttributeNode(s);d.setAttributeNode(l);d.setAttributeNode(c);i.appendChild(d)},removeFromCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,o=dojo.cookie(t),r=0;if(null!=o){if(""==dojo.trim(o))dojo.cookie(t,null,{expires:-1});else{var n=o.split(this.cookieDelimiter),a="";for(index in n)n[index]!=e&&(a=""==a?n[index]:a+this.cookieDelimiter+n[index]);dojo.cookie(t,a,{path:"/"});r=a.split(this.cookieDelimiter).length}shoppingActionsJS.checkForCompare()}},removeFromComparePetco:function(e,t){for(var o=this.cookieKeyPrefix+this.storeId,r=dojo.cookie(o),n=r.split(this.cookieDelimiter),a=[],i=[],d=0;d<n.length;d++){i[d]=n[d];a[n[d]]=document.getElementById("compare_image_"+n[d]).src}document.getElementById("compareThumb1").innerHTML="";document.getElementById("compareThumb2").innerHTML="";document.getElementById("compareThumb3").innerHTML="";document.getElementById("compareThumb4").innerHTML="";var s=0;if(null!=r){if(""==dojo.trim(r))dojo.cookie(o,null,{expires:-1});else{for(var l=r.split(this.cookieDelimiter),c="",u=0;u<l.length;u++)l[u]!=e&&(c=""==c?l[u]:c+this.cookieDelimiter+l[u]);dojo.cookie(o,c,{path:"/"});var p=document.getElementById("compareProductsURL").value;s=c.split(this.cookieDelimiter).length;currentNumberOfItemsInCompareZone=c.split(this.cookieDelimiter).length;if(currentNumberOfItemsInCompareZone<parseInt(this.minNumberProductsAllowedToCompare)){document.getElementById("compare_link").setAttribute("href","#");document.getElementById("compare_link").style.cursor="not-allowed";$(".comparelink").tooltip("enable");document.getElementById("compare_link").style.color="#808080"}else{document.getElementById("compare_link").setAttribute("onclick",p);document.getElementById("compare_link").style.cursor="pointer";document.getElementById("compare_link").style.color="#00a3e0";$(".comparelink").tooltip("disable")}}for(var m=dojo.byId("compareThumb1"),g=dojo.byId("compareThumb2"),f=dojo.byId("compareThumb3"),h=dojo.byId("compareThumb4"),d=0;d<i.length;d++)if(i[d]!=e)if(""==m.innerHTML.trim()){var I=document.createElement("IMG"),y=document.createAttribute("src");y.value=a[i[d]];var v=document.createAttribute("class");v.value="img-responsive";var C=document.createAttribute("id");C.value="compare_image_"+i[d];I.setAttributeNode(y);I.setAttributeNode(v);I.setAttributeNode(C);m.appendChild(I)}else if(""==g.innerHTML.trim()){var I=document.createElement("IMG"),y=document.createAttribute("src");y.value=a[i[d]];var v=document.createAttribute("class");v.value="img-responsive";var C=document.createAttribute("id");C.value="compare_image_"+i[d];I.setAttributeNode(y);I.setAttributeNode(v);I.setAttributeNode(C);g.appendChild(I)}else if(""==f.innerHTML.trim()){var I=document.createElement("IMG"),y=document.createAttribute("src");y.value=a[i[d]];var v=document.createAttribute("class");v.value="img-responsive";var C=document.createAttribute("id");C.value="compare_image_"+i[d];I.setAttributeNode(y);I.setAttributeNode(v);I.setAttributeNode(C);f.appendChild(I)}else if(""==h.innerHTML.trim()){var I=document.createElement("IMG"),y=document.createAttribute("src");y.value=a[i[d]];var v=document.createAttribute("class");v.value="img-responsive";var C=document.createAttribute("id");C.value="compare_image_"+i[d];I.setAttributeNode(y);I.setAttributeNode(v);I.setAttributeNode(C);h.appendChild(I)}shoppingActionsJS.checkForCompare()}},compareProducts:function(e){var t="CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+this.compareReturnName+"&searchTerm="+this.searchTerm;""!=e.top_category&&(t=t+"&top_category="+e.top_category);""!=e.parent_category_rn&&(t=t+"&parent_category_rn="+e.parent_category_rn);""!=e.categoryId&&(t=t+"&categoryId="+e.categoryId);var o=this.cookieKeyPrefix+this.storeId,r=dojo.cookie(o);null!=r&&""!=dojo.trim(r)&&(t=t+"&catentryId="+r);var n=location.href;n.indexOf("?")==-1?n+="?fromPage=compare":n.indexOf("fromPage=compare")==-1&&(n+="&fromPage=compare");t=t+"&returnUrl="+encodeURIComponent(n);location.href=getAbsoluteURL()+t;for(var a="",i=r.split(this.cookieDelimiter),d=0;d<i.length;d++)""==a?"undefined"==document.getElementById("sku_"+i[d])||null==document.getElementById("sku_"+i[d])?a=a+"catEntryID_"+i[d]:a+=document.getElementById("sku_"+i[d]).value:a="undefined"==document.getElementById("sku_"+i[d])||null==document.getElementById("sku_"+i[d])?a+"|catEntryID_"+i[d]:a+"|"+document.getElementById("sku_"+i[d]).value;if(null!=a||"undefined"!=a){var s={conversion_event_id:"Product Compare",conversion_category_id:"Product Compare",conversion_action_type:"2",product_sku:a};pushEvent(s)}},setProductQuantity:function(e,t,o,r){var n=null;if(this.productList[t])n=this.productList[t];else{n=new Object;this.productList[t]=n;n.baseItemId=t;"item"==e?n.id=t:n.id=0}n.quantity=o;dojo.topic.publish("Quantity_Changed",dojo.toJson(n));n.price=dojo.number.parse(r)},quantityChanged:function(e,t){if(this.productList[e]){var o=this.productList[e];o.quantity=dojo.trim(t);dojo.topic.publish("Quantity_Changed",dojo.toJson(o));if(null!=MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)e!=MerchandisingAssociationJS.baseItemParams.components[idx].productId&&e!=MerchandisingAssociationJS.baseItemParams.components[idx].id||(MerchandisingAssociationJS.baseItemParams.components[idx].quantity=o.quantity)}},setPriceInProductList:function(e,t){var o=this.productList[e];o&&(o.price=t)},selectBundleItemSwatch:function(e,t,o,r){if(!dojo.hasClass("swatch_"+e+"_"+t+"_"+o,"color_swatch_disabled")){if(null!=dojo.byId("entitledItem_"+e)){var n,a=t+"_"+o;n=dojo.fromJson(dojo.byId("entitledItem_"+e).innerHTML);var i=new Array;for(idx in n){var d=!1,s=n[idx];for(attribute in s.Attributes)if(a==attribute){d=!0;break}if(d)for(attribute in s.Attributes){var l=attribute.substring(0,attribute.lastIndexOf("_"));l!=r&&l!=t&&i.push(attribute)}}var c=new Array,u=new Array;for(idx in n){var s=n[idx];for(attribute in s.Attributes){var l=attribute.substring(0,attribute.lastIndexOf("_"));if(l!=r&&l!=t){var p="swatch_"+e+"_"+attribute,m=p.replace("swatch_","swatch_link_");if(dojo.indexOf(i,attribute)>-1){if(!dojo.hasClass(p,"color_swatch_selected")){dojo.byId(p).className="color_swatch";dojo.byId(p).src=dojo.byId(p).src.replace("_disabled.png","_enabled.png");dojo.byId(m).title=dojo.byId(p).alt;document.getElementById(m).setAttribute("aria-disabled","false")}}else if(dojo.indexOf(c,attribute)==-1){c.push(attribute);dojo.hasClass(p,"color_swatch_selected")&&u.push(p);dojo.byId(p).className="color_swatch_disabled";dojo.byId(p).src=dojo.byId(p).src.replace("_enabled.png","_disabled.png");var g=storeNLS.INV_ATTR_UNAVAILABLE,f=dojo.byId(p).alt;dojo.byId(m).title=dojo.string.substitute(g,{0:f});document.getElementById(m).setAttribute("aria-disabled","true")}}null!=document.getElementById("swatch_link_"+e+"_"+attribute)&&document.getElementById("swatch_link_"+e+"_"+attribute).setAttribute("aria-checked","false")}}for(idx in u){var h=u[idx],I=h.substring(0,h.lastIndexOf("_")),y=!1;dojo.query("[id^='"+I+"']").forEach(function(e,t,o){if(!y&&dojo.hasClass(e,"color_swatch")){var n=e.id.split("_");shoppingActionsJS.selectBundleItemSwatch(n[1],n[2],n[3],r);shoppingActionsJS.setSelectedAttributeOfProduct(n[1],n[2],n[3],!1);y=!0}})}}"none"==dojo.byId("swatch_selection_"+e+"_"+t).style.display&&(dojo.byId("swatch_selection_"+e+"_"+t).style.display="inline");dojo.byId("swatch_selection_"+e+"_"+t).innerHTML=o;var v="swatch_"+e+"_"+t+"_",C="swatch_link_"+e+"_"+t+"_";dojo.query("img[id^='"+v+"']").forEach(function(e,t,o){dojo.hasClass(e,"color_swatch_disabled")?dojo.removeClass(e,"color_swatch"):dojo.addClass(e,"color_swatch");dojo.removeClass(e,"color_swatch_selected")});dojo.byId(v+o).className="color_swatch_selected";document.getElementById(C+o).setAttribute("aria-checked","true");this.setSelectedAttributeOfProduct(e,t,o,!1);this.changeBundleItemImage(e,t,o,"productThumbNailImage_"+e)}},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")"));this.setEntitledItems(entitledItemJSON);var skuImage=null,imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);null!=imageArr&&(skuImage=imageArr[1]);void 0!=skuImageId&&this.setSKUImageId(skuImageId);if(null!=skuImage){if(null!=dojo.byId(this.skuImageId)){document.getElementById(this.skuImageId).src=skuImage;null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=skuImage)}}else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes,itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage;null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=itemImage);imageFound=!0;break}}if(imageFound)break}}},getImageForBundleItem:function(e){var t=[],o=this.selectedProducts[e];for(attribute in o)t.push(attribute+"_"+o[attribute]);return this.resolveImageForSKU(t)},checkForCompare:function(){require(["dojo/_base/array","dojo/cookie","dojo/on","dojo/query"],function(e,t,o,r){var n=t(shoppingActionsJS.cookieKeyPrefix+shoppingActionsJS.storeId);n=n?n.split(shoppingActionsJS.cookieDelimiter):[];r(".compareCheckboxLabels > label");r(".compare_target").forEach(function(t){var o=r('input[type="checkbox"]',t)[0];o.checked=e.indexOf(n,o.value)!=-1;var a=o.checked?n.length>1?2:1:0;t.setAttribute("data-state",a.toString());r('label[for="'+o.id+'"]',t)[0]})})},replaceItemAjaxHelper:function(e,t,o,r,n,a){var i=[];i.storeId=WCParamJS.storeId;i.catalogId=WCParamJS.catalogId;i.langId=WCParamJS.langId;i.orderItemId=o;i.orderId=".";CheckoutHelperJS.shoppingCartPage?i.calculationUsage="-1,-2,-5,-6,-7":i.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var d=[];d.storeId=WCParamJS.storeId;d.catalogId=WCParamJS.catalogId;d.langId=WCParamJS.langId;d.catEntryId=e;d.quantity=t;d.orderId=".";d.callToODM="true";CheckoutHelperJS.shoppingCartPage?d.calculationUsage="-1,-2,-5,-6,-7":d.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var s=[];s.storeId=WCParamJS.storeId;s.catalogId=WCParamJS.catalogId;s.langId=WCParamJS.langId;s.orderId=".";CheckoutHelperJS.shoppingCartPage?s.calculationUsage="-1,-2,-5,-6,-7":s.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var l=!1,c=!0;null!=r&&""!=r&&(s.addressId=r);null!=n&&""!=n&&(s.shipModeId=n);if(null!=a&&""!=a){s.physicalStoreId=a;c=!1}null==s.shipModeId||null==s.addressId&&null==s.physicalStoreId||(l=!0);if(c){s.allocate="***";s.backorder="***";s.remerge="***";s.check="*n"}wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(e){l?wc.service.invoke("AjaxAddOrderItemTemp",d):wc.service.invoke("AjaxAddOrderItem",d)},failureHandler:function(e){e.errorMessage?MessageHelper.displayErrorMessage(e.errorMessage):e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){c&&(s.orderItemId=e.orderItemId[0]);MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED);wc.service.invoke("OrderItemAddressShipMethodUpdate",s)},failureHandler:function(e){MessageHelper.displayErrorMessage(e.errorMessageKey)}});if(submitRequest()){cursor_wait();wc.service.invoke("AjaxReplaceItem",i)}},customizeDynamicKit:function(e,t,o){var r=[];r.storeId=this.storeId;r.catalogId=this.catalogId;r.langId=this.langId;r.catEntryId=e;r.quantity=t;if(isPositiveInteger(t)){var n=document.getElementsByName("contractSelectForm_contractId");if(null!=n&&"undefined"!=n)for(i=0;i<n.length;i++)if(n[i].checked){r.contractId=n[i].value;break}if(null!=o&&"undefined"!=o)for(i in o)r[i]=o[i];if(submitRequest()){cursor_wait();var a="ConfigureView",i=0;for(param in r)a+=(0==i++?"?":"&")+param+"="+r[param];document.location.href=getAbsoluteURL()+a}}else MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR)},addPayPalPaymentInstructions:function(){var e,t=[];e=document.PayPalForm&&dojo.query('form[name="PayPalForm"]').length>1?dojo.query('form[name="PayPalForm"]')[0]:document.PayPalForm;t.storeId=e.storeId.value;t.catalogId=e.catalogId.value;t.langId=e.langId.value;t.merchant=e.payPalMerchant.value;t.payMethodId=e.payPalMethodId.value;t.piAmount=e.PayPalOrderTotal.value;t.orderId=e.orderId.value;dojo.query('input[id^="repeat-delivery-checkbox"]:checked').length>0?localStorageHelper.set("payPalBA","true"):null!=localStorageHelper.get("payPalBA")&&localStorageHelper.remove("payPalBA");if(submitRequest()){cursor_wait();wc.service.invoke("AjaxAddPayPalInstructionToThisOrder",t)}},deletePrevAddNewPayPalInstructions:function(){var e=[];e.piId=new Array;var t=document.getElementById("payPalPID").value;if(t.indexOf(",")>=0)for(var o=t.split(","),r=0;r<o.length;r++)e.piId.push(o[r]);else e.piId.push(t);var n;n=document.PayPalForm&&dojo.query('form[name="PayPalForm"]').length>1?dojo.query('form[name="PayPalForm"]')[0]:document.PayPalForm;e.storeId=n.storeId.value;e.catalogId=n.catalogId.value;e.langId=n.langId.value;e.orderId=".";cursor_wait();wc.service.invoke("AjaxDeletePayPalPaymentInstructionFromThisOrder",e)},changeDescription:function(e,t){this.getCatalogEntryId(e);""!=t&&null!=document.getElementById("donationId")&&"undefined"!=document.getElementById("donationId")&&(document.getElementById("donationId").innerHTML=t)},refreshCurrentPage:function(e){"ShopCart"==e&&(document.location.href=document.location.href)},callSearchClickEvent:function(e,t){try{var o={};"Search"==t?o.event_name="search_product_result_click":o.event_name="link_tracking";o.product_parent_id=e;void 0!=dojo.byId("prd_id_"+e)&&null!=dojo.byId("prd_id_"+e)&&(o.product_parent_sku=dojo.byId("prd_id_"+e).value);void 0!=dojo.byId("prd_name_"+e)&&null!=dojo.byId("prd_name_"+e)&&(o.product_name=dojo.byId("prd_name_"+e).value);var r="product_tile_val_"+e;pushEvent(o,r)}catch(e){console.log("issue in tagging "+e)}},handleRdAddonSelectionChange:function(){$("#add2RDOrderBtn").removeClass("disabled");$("#add2RDordermsg").text("");$("#add2RDordermsg").removeClass("show")}};dojo.topic.subscribe("ProductInfo_Reset",shoppingActionsJS.resetProductAddedList);require(["dojo/on","dojo/has","dojo/_base/sniff","dojo/domReady!"],function(e,t){t("ie")<9&&e(document,'.compare_target > input[type="checkbox"]:click',function(e){this.blur();this.focus()})});dojo.require("wc.service.common");dojo.require("dijit.registry");shoppingActionsServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,t,o){this.langId=e;this.storeId=t;this.catalogId=o}};wc.service.declare({id:"AddOrderItem",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){setTimeout(function(){$("#mini-cart").css("visibility","visible");var e='<div class="mini-cart-active-item"><span class="glyphicon glyphicon-ok"></span> Item successfully added to cart.</div>';$(".mini-cart-item").first().append(e);setTimeout(function(){$("#mini-cart").css("visibility","hidden");$("div.mini-cart-active-item").remove()},3e3)},1e3);var t=sessionStorage.getItem("AT_PDP_ADDTOCARTMODAL"),o=t?t:"var_A";try{var r;null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")&&(r=$("#omnitureEnabled").val());if("undefined"!=r&&null!=r&&""!=r&&"true"==r){var n=productDisplayJS.getCatalogEntryId("entitledItem_"+productDisplayJS.baseCatalogEntryId),a={};if(null!=n){var i=productDisplayJS.itemPriceJsonOject[n].catalogEntry,d=(i.catalogEntryIdentifier.externalIdentifier.partNumber,shoppingActionsJS.productAddedList[n][3]),s=dojo.cookie("WC_CartOrderId_10151"),l="";if(""==s||null==s||"undefined"==s){a.event_name="cart_open";a.cart_id=e.orderId[0];l="add2CartBtn_cpy1"}else{a.event_name="cart_add";a.cart_id=s;l="add2CartBtn_cpy1"}a.product_id=n;a.product_sku=i.catalogEntryIdentifier.externalIdentifier.partNumber;a.product_name=i.description[0].name;a.add_to_cart_quantity=d;null!=$("#tel_product_id")&&void 0!=$("#tel_product_id")&&(a.product_parent_sku=$("#tel_product_id").val());var c=$("#repeat-delivery-radio");if((null!=c||void 0!=c)&&c&&c.is(":checked")){a.product_delivery_type="repeat";a.product_rd_schedule="yes";null==$("#repeat-delivery-freq-options")&&void 0==$("#repeat-delivery-freq-options")||(a.product_rd_schedule_time=$("#repeat-delivery-freq-options").val());l="add2CartBtn_cpy2"}$("#one-time-delivery").is(":checked")&&(a.product_delivery_type="one time");$("#store-pickup").is(":checked")&&(a.product_delivery_type="bopus")}if("var_B"!=o)pushEvent(a,l);else{window.PetcoDataLayer=window.PetcoDataLayer||{};window.PetcoDataLayer.events=a}}}catch(e){console.log(e)}document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus();dojo.require("dijit.registry");MessageHelper.hideAndClearMessage();cursor_clear();productDisplayJS.isRepeatDeliveryProduct?document.getElementById("repearDeliveryItemIds").value=document.getElementById("repearDeliveryItemIds").value+"_"+productDisplayJS.selectedCatalogEntryId:null!=document.getElementById("oneTimeDeliveryItemIds")&&(document.getElementById("oneTimeDeliveryItemIds").value=document.getElementById("oneTimeDeliveryItemIds").value+"_"+productDisplayJS.selectedCatalogEntryId);null!=document.getElementById("allProductIds")&&(document.getElementById("allProductIds").value=document.getElementById("allProductIds").value+"_"+productDisplayJS.selectedCatalogEntryId);if(shoppingActionsJS){var u=dojo.query('div[id^="attrValue_"]');if(null!=dojo.query(".definingAttributes")[0])var u=dojo.query(".definingAttributes");else if(null!=dojo.query(".product_sizes")[0])var u=dojo.query(".product_sizes");else if(null!=dojo.query(".product_info")[0])var u=dojo.query(".product_info");for(var p=new Array,m=0;m<u.length;m++)for(var g=u[m].querySelectorAll(".dijitSelect"),f=0;f<g.length;f++)p=p.concat(g[f]);for(var h=new Array,m=0;m<p.length;m++)h[m]=dijit.registry.byNode(p[m]);for(var I=!0,m=0;m<h.length;m++)h[m].options.length>2&&(I=!1);if(!I){shoppingActionsJS.selectedAttributes=new Object;dojo.topic.publish("DefiningAttributes_Resolved_"+shoppingActionsJS.baseCatalogEntryId,shoppingActionsJS.baseCatalogEntryId,-1);for(var m=0;m<h.length;m++)null!=h[m]&&(h[m].value="")}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0]);dojo.publish("CMAddToCart");if("undefined"!=typeof productDisplayJS&&void 0!=document.getElementById("isCartInterstialEnabled")&&null!=document.getElementById("isCartInterstialEnabled")&&"Yes"==document.getElementById("isCartInterstialEnabled").value){if(null!=e.membershipItemAddFlag&&void 0!=e.membershipItemAddFlag&&"true"==e.membershipItemAddFlag)var y=productDisplayJS.baseCatalogEntryId;else var y=productDisplayJS.getCatalogEntryId(productDisplayJS.baseCatalogEntryId);document.location.href=getAbsoluteURL()+"PetcoAddToCartLandingPageView?langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catentryId="+productDisplayJS.baseCatalogEntryId+"&selectCatentryId="+y+"&orderItemId="+e.orderItemId[0]}else if("undefined"!=typeof productDisplayJS&&void 0!=document.getElementById("isATCABTestEnabled")&&null!=document.getElementById("isATCABTestEnabled")&&""!=document.getElementById("isATCABTestEnabled").value)if("var_B"==o){var v=e.orderItemId[0],y=productDisplayJS.getCatalogEntryId("entitledItem_"+productDisplayJS.baseCatalogEntryId);wc.render.updateContext("PetcoInterstitialCartPopUpAreaContext",{orderItemId:v,quantity:shoppingActionsJS.productAddedList[n][3]},"")}else document.location.href=getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&calculationUsageId=-6&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=true&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-7&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=false&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderItemDisplay?doInventory=Y&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId));else document.location.href=getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&calculationUsageId=-6&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=true&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-7&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=false&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderItemDisplay?doInventory=Y&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId))},failureHandler:function(e){if(e.errorMessage)if("_ERR_NO_ELIGIBLE_TRADING"==e.errorMessageKey)MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);else{if("_ERR_PRICE_MAXQUANTITY"==e.errorMessageKey){var t=e.errorMessage;petcoCommonJS.showModalNotificationAlert(t);cursor_clear();return!1}if("_ERR_RETRIEVE_PRICE"==e.errorMessageKey){var t=storeNLS.GENERICERR_MAINTEXT;t=dojo.string.substitute(t,{0:storeNLS.GENERICERR_CONTACT_US});MessageHelper.displayErrorMessage(t)}else{if("_ERR_EXISTING_PRODUCT_IS_REPEAT_DELIVERY_PRODUCT"==e.errorMessageKey){var t=storeNLS.ERR_EXISTING_PRODUCT_IS_REPEAT_DELIVERY_PRODUCT;petcoCommonJS.showModalNotificationAlert(t);cursor_clear();return!1}if("_ERR_EXISTING_PRODUCT_IS_ONETIME_DELIVERY_PRODUCT"==e.errorMessageKey){var t=storeNLS.ERR_EXISTING_PRODUCT_IS_ONETIME_DELIVERY_PRODUCT;petcoCommonJS.showModalNotificationAlert(t);cursor_clear();return!1}if("_ERR_MEMBERSHIP_ITEM_EXIT_IN_CART"==e.errorMessageKey||"_ERR_ALREADY_WHMEMBERSHIPMEMBER"==e.errorMessageKey){petcoCommonJS.showModalNotificationAlert(e.errorMessage);cursor_clear();return!1}MessageHelper.displayErrorMessage(e.errorMessage)}}else e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}}),wc.service.declare({id:"AddPreConfigurationToCart",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceAddPreConfigurationToCart",formId:"",successHandler:function(e){MessageHelper.hideAndClearMessage();cursor_clear();if(shoppingActionsJS){for(var t=document.getElementsByName("attrValue"),o=!0,r=0;r<t.length;r++)t[r].options.length>1&&(o=!1);if(!o){shoppingActionsJS.selectedAttributes=new Object;for(var r=0;r<t.length;r++)if(null!=t[r]){t[r].value="";t[r].onchange()}}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0])},failureHandler:function(e){if(e.errorMessage)if("_ERR_NO_ELIGIBLE_TRADING"==e.errorMessageKey)MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);else if("_ERR_RETRIEVE_PRICE"==e.errorMessageKey){var t=storeNLS.GENERICERR_MAINTEXT;t=dojo.string.substitute(t,{0:storeNLS.GENERICERR_CONTACT_US});MessageHelper.displayErrorMessage(t)}else MessageHelper.displayErrorMessage(e.errorMessage);else e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}}),wc.service.declare({id:"AjaxAddPayPalInstructionToThisOrder",actionId:"AjaxAddPaymentInstructionToThisOrder",url:"AjaxOrderChangeServicePIAdd",formId:"",successHandler:function(e){var t="";t=e.piId;t.toString().split(",").length-1>0?document.PayPalForm.piId.value=t.toString().split(",")[t.toString().split(",").length-1]:document.PayPalForm.piId.value=e.piId;document.PayPalForm.submit()},failureHandler:function(e){window.location.href=window.location.href}}),wc.service.declare({id:"AjaxDeletePayPalPaymentInstructionFromThisOrder",actionId:"AjaxDeletePaymentInstructionFromThisOrder",url:"AjaxOrderChangeServicePIDelete",formId:"",successHandler:function(e){"undefined"==document.getElementById("isRDOrder")||"undefined"==document.getElementById("payPalUserType")||"true"!=document.getElementById("isRDOrder").value||"G"!=document.getElementById("payPalUserType").value?shoppingActionsJS.addPayPalPaymentInstructions():window.location.href=document.getElementById("LogonURL").value},failureHandler:function(e){alert("Failed to Delete the existing PayPal Instruction before invoking the same")}}),wc.service.declare({id:"RepeatDeliveryOrderAdd",actionId:"RepeatDeliveryOrderAdd",url:getAbsoluteURL()+"AjaxPetcoRepeatDeliveryOrderAdd",formId:"",successHandler:function(e){var t=null,o=null,r=null,n=null,a=null;cursor_clear();t=e.childNextFfmDate;o=e.childTemplateOrderId;r=e.childSubscriptionId;a=e.childFfmFrequency;try{var i,d=productDisplayJS.getCatalogEntryId("entitledItem_"+productDisplayJS.baseCatalogEntryId),s=productDisplayJS.itemPriceJsonOject[d].catalogEntry;s.catalogEntryIdentifier.externalIdentifier.partNumber;null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")&&(i=$("#omnitureEnabled").val());if("undefined"!=i&&null!=i&&""!=i&&"true"==i){var l={};if(null!=d){var c=shoppingActionsJS.productAddedList[d][3];dojo.cookie("WC_CartOrderId_10151");l.event_name="add_to_existing_rd";l.product_id=d;l.product_sku=s.catalogEntryIdentifier.externalIdentifier.partNumber;var u=s.description[0].name,p=u.replace(/["']/g,"");l.product_name=p;l.add_to_cart_quantity=c;var m=$("#repeat-delivery-radio");null!=$("#tel_product_id")&&void 0!=$("#tel_product_id")&&(l.product_parent_sku=$("#tel_product_id").val());if(null!=e.subscriptionId&&null!=e.subscriptionId[0]){l.subscription_id=e.subscriptionId[0];l.product_delivery_type="recurring"}if((null!=m||void 0!=m)&&m&&m.is(":checked")){l.product_delivery_type="recurring";l.product_rd_schedule="yes";null==$("#repeat-delivery-freq-options")&&void 0==$("#repeat-delivery-freq-options")||(l.product_rd_schedule_time=$("#repeat-delivery-freq-options").val())}$("#one-time-delivery").is(":checked")&&(l.product_delivery_type="one time");e.fulfillmentInterval&&"1"==e.fulfillmentInterval&&(l.product_delivery_type="one time");$("#store-pickup").is(":checked")&&(l.product_delivery_type="bopus")}pushEvent(l)}}catch(e){console.log(e)}if("isAddOn"==e.action){var g={};g.childSubscriptionId=r;g.catalogEntryId=d;g.nextffmtdate=t;PetcoRepeatDeliveryAddOnJS.updateContextonRDAddOnConfirmation(g);$("#add_on_rd_option").modal("hide");$("#add_on_rd_conf").modal("show");n=dojo.byId("add_on_rd_conf_nextffmtdate");n.innerHTML=t;var f=e.rdSkuPartNumber;
try{if(null!=f&&"undefined"!=f){var h,u=s.description[0].name,p=u.replace(/["']/g,"");null!=$("#tel_product_id")&&void 0!=$("#tel_product_id")&&(h=$("#tel_product_id").val());var I;null!=e.subscriptionId&&null!=e.subscriptionId[0]&&(I=e.subscriptionId[0]);var y={product_id:d,subscription_id:I,product_name:p,event_name:"add_to_existing_rd",product_rd_schedule_time:"one time delivery",product_delivery_type:"one time",product_sku:f,product_parent_sku:h};pushEvent(y)}buildModalDataLayer("add once to repeat delivery","modal_close");buildModalDataLayer("add once to repeat delivery confirm","modal_show")}catch(e){console.log(e)}}else if("isInclusive"==e.action){$("#add_to_rd_option").modal("hide");$("#add_to_rd_conf").modal("show");try{buildModalDataLayer("add to repeat delivery","modal_close");buildModalDataLayer("add to repeat delivery confirm","modal_show")}catch(e){console.log(e)}var v=$("#addToRDDropDown").val();if("undefined"!=v&&null!=v&&""!=v&&"ADDON"==v){$("#addOnceToRDSuccessLabel").show();n=dojo.byId("add_on_rd_conf_nextffmtdate");n.innerHTML=t}else if("undefined"!=v&&null!=v&&""!=v&&"INC"==v){$("#addToRDSuccessLabel").show();n=dojo.byId("add_to_rd_conf_nextffmtdate");n.innerHTML=t;var C=dojo.byId("add_to_rd_conf_frequency");C.innerHTML=a}}var _=[];_.langId=shoppingActionsServicesDeclarationJS.langId;_.storeId=shoppingActionsServicesDeclarationJS.storeId;_.catalogId=shoppingActionsServicesDeclarationJS.catalogId;_.updateCookies=!0;wc.service.invoke("AjaxPetcoPalsRewardsPointsSubscription",_)},failureHandler:function(e){cursor_clear();if(e.errorMessageKey&&"_ERR_RD_ORDER_ADD_PAYMENT_METHOD_INVALID"==e.errorMessageKey){$("#add2RDordermsg").text(MessageHelper.messages.ADD_ON_MODAL_FAILURE_EXPIRED_CC);$("#add2RDordermsg").addClass("show");$("#add2RDOrderBtn").addClass("disabled")}else if(e.errorMessageKey&&"_ERR_PRICE_MAXQUANTITY"==e.errorMessageKey){$("#add2RDordermsg").text(e.errorMessage);$("#add2RDordermsg").addClass("show");$("#add2RDOrderBtn").addClass("disabled")}else if(e.errorMessage){$("#add2RDordermsg").text(MessageHelper.messages.ADD_ON_MODAL_FAILURE_OTHER);$("#add2RDordermsg").addClass("show");$("#add2RDOrderBtn").addClass("disabled")}}}),wc.service.declare({id:"AddRecurringOrderItem",actionId:"AddRecurringOrderItem",url:getAbsoluteURL()+"AjaxPetcoRecurringOrderItemAdd",formId:"",successHandler:function(e){e.orderId},failureHandler:function(e){}});wc.service.declare({id:"AddOrderItemAddService",actionId:"AddOrderItemAddService",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){setTimeout(function(){$("#mini-cart").css("visibility","visible");var e='<div class="mini-cart-active-item"><span class="glyphicon glyphicon-ok"></span> Item successfully added to cart.</div>';$(".mini-cart-item").first().append(e);setTimeout(function(){$("#mini-cart").css("visibility","hidden");$("div.mini-cart-active-item").remove()},3e3)},1e3);document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus();dojo.require("dijit.registry");MessageHelper.hideAndClearMessage();cursor_clear();if(shoppingActionsJS){var t=dojo.query('div[id^="attrValue_"]');if(null!=dojo.query(".definingAttributes")[0])var t=dojo.query(".definingAttributes");else if(null!=dojo.query(".product_sizes")[0])var t=dojo.query(".product_sizes");else if(null!=dojo.query(".product_info")[0])var t=dojo.query(".product_info");for(var o=new Array,r=0;r<t.length;r++)for(var n=t[r].querySelectorAll(".dijitSelect"),a=0;a<n.length;a++)o=o.concat(n[a]);for(var i=new Array,r=0;r<o.length;r++)i[r]=dijit.registry.byNode(o[r]);for(var d=!0,r=0;r<i.length;r++)i[r].options.length>2&&(d=!1);if(!d){shoppingActionsJS.selectedAttributes=new Object;dojo.topic.publish("DefiningAttributes_Resolved_"+shoppingActionsJS.baseCatalogEntryId,shoppingActionsJS.baseCatalogEntryId,-1);for(var r=0;r<i.length;r++)null!=i[r]&&(i[r].value="")}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0]);dojo.publish("CMAddToCart");if("undefined"!=typeof productDisplayJS&&void 0!=document.getElementById("isCartInterstialEnabled")&&null!=document.getElementById("isCartInterstialEnabled")&&"Yes"==document.getElementById("isCartInterstialEnabled").value){var s=productDisplayJS.getCatalogEntryId(productDisplayJS.baseCatalogEntryId);document.location.href=getAbsoluteURL()+"PetcoAddToCartLandingPageView?langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catentryId="+productDisplayJS.baseCatalogEntryId+"&selectCatentryId="+s+"&orderItemId="+e.orderItemId[0]}else document.location.href=getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&calculationUsageId=-6&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=true&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-7&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=false&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderItemDisplay?doInventory=Y&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId))},failureHandler:function(e){if(e.errorMessage)if("_ERR_NO_ELIGIBLE_TRADING"==e.errorMessageKey)MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);else if("_ERR_RETRIEVE_PRICE"==e.errorMessageKey){var t=storeNLS.GENERICERR_MAINTEXT;t=dojo.string.substitute(t,{0:storeNLS.GENERICERR_CONTACT_US});MessageHelper.displayErrorMessage(t)}else{if("_ERR_EXISTING_PRODUCT_IS_REPEAT_DELIVERY_PRODUCT"==e.errorMessageKey){var t=storeNLS.ERR_EXISTING_PRODUCT_IS_REPEAT_DELIVERY_PRODUCT;petcoCommonJS.showModalNotificationAlert(t);cursor_clear();return!1}if("_ERR_EXISTING_PRODUCT_IS_ONETIME_DELIVERY_PRODUCT"==e.errorMessageKey){var t=storeNLS.ERR_EXISTING_PRODUCT_IS_ONETIME_DELIVERY_PRODUCT;petcoCommonJS.showModalNotificationAlert(t);cursor_clear();return!1}if("_ERR_MEMBERSHIP_ITEM_EXIT_IN_CART"==e.errorMessageKey||"_ERR_ALREADY_WHMEMBERSHIPMEMBER"==e.errorMessageKey){petcoCommonJS.showModalNotificationAlert(e.errorMessage);cursor_clear();return!1}MessageHelper.displayErrorMessage(e.errorMessage)}else e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}});wc.service.declare({id:"AjaxHolidayShippingMsg",actionId:"AjaxHolidayShippingMsg",url:"AjaxHolidayShippingMsg",formId:"",successHandler:function(e){productDisplayJS.holidayPreCutOff=!1;productDisplayJS.holidayMsgCallCompleted=!1;var t=e.shipMsgResBeforeCutOff;for(var o in t){console.log("before cutoff "+o+"::  "+t[o]);if("Y"==e.fromPDP){productDisplayJS.holidayPreCutOff=!0;if(null!=document.getElementById("ShippingMessage")){document.getElementById("ShippingMessage").innerText=t[o];$("#ShippingMessage").removeClass("hide");$("#ShippingMessage").addClass("sled-icon")}null!=document.getElementById("deliveryDateMsg")&&$("#deliveryDateMsg").addClass("hide")}else if(null!=document.getElementById("shippingMsgContainer_"+o)){document.getElementById("shippingMsgContainer_"+o).innerText=t[o];$("#shippingMsgContainer_"+o).removeClass("hide");$("#shippingMsgContainer_"+o).addClass("sled-icon");null!=document.getElementById("deliveryDateMsg_"+o)&&null!=document.getElementById("orderdate_"+o)&&""!=document.getElementById("orderdate_"+o).innerText&&$("#deliveryDateMsg_"+o).addClass("hide");null!=document.getElementById("deliveryDateMsgMobile_"+o)&&null!=document.getElementById("orderdate_"+o)&&""!=document.getElementById("orderdate_"+o).innerText&&$("#deliveryDateMsgMobile_"+o).addClass("hide")}}var r=e.shipMsgResAfterCutOff;for(var o in r){console.log(o+"::  "+r[o]);console.log("after cutoff "+o+"::  "+r[o]);if("Y"==e.fromPDP){null!=document.getElementById("deliveryDateMsg")&&null!=document.getElementById("orderdate")&&""!=document.getElementById("orderdate").innerText&&$("#deliveryDateMsg").removeClass("hide");null!=document.getElementById("ShippingMessage")&&$("#ShippingMessage").addClass("hide")}else null!=document.getElementById("shippingMsgContainer_"+o)&&$("#shippingMsgContainer_"+o).addClass("hide")}if("Y"!=e.fromPDP)if(null!=e.hasOrderLevelMsg&&1==e.hasOrderLevelMsg&&null!=e.orderLevelShippingMessage&&null!=document.getElementById("shippingMsgContainerSPC")){console.log("hasOrderLevelMsg "+e.hasOrderLevelMsg+" :: "+e.orderLevelShippingMessage);productDisplayJS.hasOrdLevHollidayMsg=!0;document.getElementById("shippingMsgContainerSPC").innerHTML=e.orderLevelShippingMessage;$("#shippingMsgContainerSPC").addClass("sled-icon");$("#shippingMsgContainerSPC").removeClass("hide");null!=document.getElementById("deliveryDateMsg_10552")&&null!=document.getElementById("orderdate_10552")&&""!=document.getElementById("orderdate_10552").innerText&&$("#deliveryDateMsg_10552").addClass("hide");null!=document.getElementById("deliveryDateMsg_10553")&&null!=document.getElementById("orderdate_10553")&&""!=document.getElementById("orderdate_10553").innerText&&$("#deliveryDateMsg_10553").addClass("hide");null!=document.getElementById("deliveryDateMsg_10554")&&null!=document.getElementById("orderdate_10554")&&""!=document.getElementById("orderdate_10554").innerText&&$("#deliveryDateMsg_10554").addClass("hide")}else{productDisplayJS.hasOrdLevHollidayMsg=!1;console.log("hasOrderLevelMsg :: "+e.hasOrderLevelMsg);$("#shippingMsgContainerSPC").addClass("hide");null!=document.getElementById("deliveryDateMsg_10552")&&null!=document.getElementById("orderdate_10552")&&""!=document.getElementById("orderdate_10552").innerText&&$("#deliveryDateMsg_10552").removeClass("hide");null!=document.getElementById("deliveryDateMsg_10553")&&null!=document.getElementById("orderdate_10553")&&""!=document.getElementById("orderdate_10553").innerText&&$("#deliveryDateMsg_10553").removeClass("hide");null!=document.getElementById("deliveryDateMsg_10554")&&null!=document.getElementById("orderdate_10554")&&""!=document.getElementById("orderdate_10554").innerText&&$("#deliveryDateMsg_10554").removeClass("hide")}productDisplayJS.holidayMsgCallCompleted=!0},failureHandler:function(e){console.log("There was an error in getting holiday shipping method.")}});wc.service.declare({id:"AjaxRestrictedAddCart",actionId:"AjaxRestrictedAddCart",url:getAbsoluteURL()+"AjaxRestrictedAddCart",formId:"",successHandler:function(e){console.log("Restricted::"+e.isRestricted+":: for SKU"+e.sku);document.getElementById("restrictionMessage").innerHTML="";if("Y"==e.isRestricted){document.getElementById("restrictionMessage").innerHTML="This product is not eligible to ship to your location";$("#restrictionMessage").addClass("out_of_stock");$("#restrictionMessage").addClass("show");$("#restrictionMessage").removeClass("hide");productDisplayJS.disableAllButtoninpage()}},failureHandler:function(e){document.getElementById("restrictionMessage").innerHTML="";console.log("There was an error in getting  response from Drools from zipcode restrictions.")}});wc.service.declare({id:"AjaxInvokeDeliveryDateAPI",actionId:"AjaxInvokeDeliveryDateAPI",url:getAbsoluteURL()+"AjaxInvokeDeliveryDateAPI",formId:"",successHandler:function(e){var t=e.catEntryId,o=!0;try{if("undefined"!=typeof globalInventoryMap&&"In-Stock"!=globalInventoryMap[t].status){console.log(e.resolvedItem+" Item Out of Stock");o=!1}}catch(e){console.log(e)}if(o&&"undefined"!=typeof e.itemDeliveryDateMap)try{resolvedItem=e.resolvedItem;itemDeliveryDate=e.itemDeliveryDateMap;var r=itemDeliveryDate[resolvedItem],n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=[];i=r.split("|");var d,s=new Date(i[0]),l=new Date(i[1]),c=new Date,u=l.getDate()-c.getDate();switch(u){case 0:d="Today";break;case 1:d="Tomorrow";break;default:d=a[l.getDay()]}if(l.getHours()>12){var p=l.getHours()-12;document.getElementById("orderdate").innerHTML=p+"pm "+d}else document.getElementById("orderdate").innerHTML=l.getHours()+"am "+d;document.getElementById("deliverydate").innerHTML=a[s.getDay()]+", "+n[s.getMonth()]+" "+s.getDate();"PDP"==e.fromPage&&null!=document.getElementById("HolidayShipMsgFlag")&&"Y"==document.getElementById("HolidayShipMsgFlag").value&&productDisplayJS.holidayMsgCallCompleted&&productDisplayJS.holidayPreCutOff?$("#deliveryDateMsg").addClass("hide"):$("#deliveryDateMsg").removeClass("hide");"undefined"!=typeof productDisplayJS&&"undefined"!=typeof productDisplayJS.inventoryMessages&&(productDisplayJS.deliverDateMessages=e.itemDeliveryDateMap)}catch(e){console.log(e)}else $("#deliveryDateMsg").addClass("hide")},failureHandler:function(e){cursor_clear()}});wc.service.declare({id:"AjaxCouponIssue",actionId:"AjaxCouponIssue",url:"AjaxCouponIssue",formId:"",successHandler:function(e){if("PetcoRepeatDeliveryDetailsView"==e.URL)redirectToDetailView("true");else{$("#display-promo")[0].style.display="none";$("#promo-applied")[0].style.display="block"}},failureHandler:function(e){if(null!=document.getElementById("petcoCancelRepeatDeliveryArea"))redirectToDetailView("false");else{document.getElementById("rdaddon-coupon-error").innerHTML='<font color="red">'+e.errorMessage+"</font>";document.getElementById("rdaddon-coupon-error").style.display="block"}}});wc.service.declare({id:"AjaxAddRecommendedItemToCart",actionId:"AjaxAddRecommendedItemToCart",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){setTimeout(function(){$("#mini-cart").css("visibility","visible");var e='<div class="mini-cart-active-item"><span class="glyphicon glyphicon-ok"></span> Item successfully added to cart.</div>';$(".mini-cart-item").first().append(e);setTimeout(function(){$("#mini-cart").css("visibility","hidden");$("div.mini-cart-active-item").remove()},3e3)},1e3);document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus();dojo.require("dijit.registry");MessageHelper.hideAndClearMessage();cursor_clear();if(shoppingActionsJS){var t=dojo.query('div[id^="attrValue_"]');if(null!=dojo.query(".definingAttributes")[0])var t=dojo.query(".definingAttributes");else if(null!=dojo.query(".product_sizes")[0])var t=dojo.query(".product_sizes");else if(null!=dojo.query(".product_info")[0])var t=dojo.query(".product_info");for(var o=new Array,r=0;r<t.length;r++)for(var n=t[r].querySelectorAll(".dijitSelect"),a=0;a<n.length;a++)o=o.concat(n[a]);for(var i=new Array,r=0;r<o.length;r++)i[r]=dijit.registry.byNode(o[r]);for(var d=!0,r=0;r<i.length;r++)i[r].options.length>2&&(d=!1);if(!d){shoppingActionsJS.selectedAttributes=new Object;dojo.topic.publish("DefiningAttributes_Resolved_"+shoppingActionsJS.baseCatalogEntryId,shoppingActionsJS.baseCatalogEntryId,-1);for(var r=0;r<i.length;r++)null!=i[r]&&(i[r].value="")}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0]);dojo.publish("CMAddToCart");var s;null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")&&(s=$("#omnitureEnabled").val());if("undefined"!=s&&null!=s&&""!=s&&"true"==s){var l={},c=document.getElementById("selectedRecommendationElement").value,u=c+"-addToCartBtn",p=c+"-productName-tagging",m=c+"-partNumber-tagging",g="",f="",h="";if(void 0!=document.getElementById(p)){g=document.getElementById(p).value;h=g.replace(/["']/g,"")}void 0!=document.getElementById(m)&&(f=document.getElementById(m).value);var I=dojo.cookie("WC_CartOrderId_10151");if(""==I||null==I||"undefined"==I){l.event_name="cart_open";l.cart_id=e.orderId[0]}else{l.event_name="cart_add";l.cart_id=I}l.product_sku=f;l.product_name=h;l.add_to_cart_quantity="1";l.product_delivery_type="one time";pushEvent(l,u)}if("undefined"!=typeof productDisplayJS&&void 0!=document.getElementById("isCartInterstialEnabled")&&null!=document.getElementById("isCartInterstialEnabled")&&"Yes"==document.getElementById("isCartInterstialEnabled").value){var y=productDisplayJS.getCatalogEntryId(productDisplayJS.baseCatalogEntryId);document.location.href=getAbsoluteURL()+"PetcoAddToCartLandingPageView?langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catentryId="+productDisplayJS.baseCatalogEntryId+"&selectCatentryId="+y+"&orderItemId="+e.orderItemId[0]}else document.location.href=getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&calculationUsageId=-6&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=true&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderCalculate?calculationUsageId=-1&calculationUsageId=-7&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId+"&errorViewName=AjaxOrderItemDisplayView&callToODM=false&updatePrices=1&URL="+encodeURIComponent(getAbsoluteURL()+"OrderItemDisplay?doInventory=Y&orderId=.&langId="+shoppingActionsServicesDeclarationJS.langId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&storeId="+shoppingActionsServicesDeclarationJS.storeId))},failureHandler:function(e){if(e.errorMessage){petcoCommonJS.showModalNotificationAlert(e.errorMessage);cursor_clear();return!1}e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}});CommonContextsJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,t,o){this.langId=e;this.storeId=t;this.catalogId=o},setContextProperty:function(e,t,o){wc.render.getContextById(e).properties[t]=o}};wc.render.declareContext("PetcoCheckoutShippingRestrictions_Context",{restrictedItems:"",resSkuErrMsg:""},"");wc.render.declareContext("PetcoCheckoutCartSummary_Context",null,"");wc.render.declareContext("multipleShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("singleShipmentShipChargeContext",null,""),wc.render.declareContext("multipleShipmentShipChargeContext",null,""),wc.render.declareContext("traditionalShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("currentOrder_Context",null,""),wc.render.declareContext("editShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("editGuestShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("billingAddressDropDownBoxContext",{billingAddress1:"0",billingAddress2:"0",billingAddress3:"0",billingURL1:"",billingURL2:"",billingURL3:"",areaNumber:"0",payment1:"",payment2:"",payment3:"",paymentTCId1:"",paymentTCId2:"",paymentTCId3:""},""),wc.render.declareContext("contextForMainAndAddressDiv",{showArea:"0",hideArea:"0"},""),wc.render.declareContext("shippingAddressDropDownBoxContext",null,""),wc.render.declareContext("CategoryDisplay_Context",{pageView:"",beginIndex:""},""),wc.render.declareContext("SubCategoryDisplay_Context",null,""),wc.render.declareContext("ShopCartPaginationDisplay_Context",{},""),wc.render.declareContext("AddToCartPageDisplay_Context",{},""),wc.render.declareContext("PendingOrderPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("PetcoOrderTotalSummary_Context",{beginIndex:"0",fromPage:"paymentMethodPage"},""),wc.render.declareContext("PetcoRepeatDeliveryEditItem_Context",{subscriptionId:"",rdOrderId:"",parentCatentryId:"",catentryId:""},""),wc.render.declareContext("PetcoRepeatDeliveryEditItemRDPrice_Context",{newWeight:""},""),wc.render.declareContext("PetcoCancelRepeatDeliveryConfirmation_Context",null,""),wc.render.declareContext("OrderDetailPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MSOrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("CouponDisplay_Context",null,""),wc.render.declareContext("PromotionFreeGifts_Context",null,""),wc.render.declareContext("ListOrdersDisplay_Context",{startNumber:"0"},""),wc.render.declareContext("ScheduledOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"Scheduled"},""),wc.render.declareContext("ProcessedOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"PreviouslyProcessed"},""),wc.render.declareContext("WaitingForApprovalOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"WaitingForApproval"},""),wc.render.declareContext("BrowsingHistoryContext",{status:"init"},""),wc.render.declareContext("BrowsingHistoryDisplay_Context",{currentPage:"0",pageView:""},""),wc.render.declareContext("CategorySubscriptionContext",null,""),wc.render.declareContext("RecurringOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("RepeatOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MembershipOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("SubscriptionDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("RecentRecurringOrderDisplay_Context",{beginIndex:"0",isMyAccountMainPage:"true"},""),wc.render.declareContext("RecentSubscriptionDisplay_Context",{beginIndex:"0",isMyAccountMainPage:"true"},""),wc.render.declareContext("RecurringOrderChildOrdersDisplay_Context",{beginIndex:"0",orderId:""},""),wc.render.declareContext("SubscriptionChildOrdersDisplay_Context",{beginIndex:"0",orderItemId:"",subscriptionName:""},""),wc.render.declareContext("MylistsDisplay_Context",{startIndex:"0"},""),wc.render.declareContext("PurchaselistDisplay_Context",{showTabName:"",purStartDate:"",purEndDate:"",purStartDateParsed:"",purEndDateParsed:"",fromGoCmd:"false",startIndex:"0",listId:"-1",externalId:"-1"},""),wc.render.declareContext("QuickInfoContext",null,""),wc.render.declareContext("DiscountDetailsContext",null,""),wc.render.declareContext("QuickInfoDiscountDetailsContext",null,""),wc.render.declareContext("DoubleContentAreaESpot_Context",{emsName:""},""),wc.render.declareContext("ScrollableESpot_Context",{emsName:""},""),wc.render.declareContext("TopCategoriesESpot_Context",{emsName:""},""),wc.render.declareContext("CategoryFeaturedProductsESpot_Context",{emsName:""},""),wc.render.declareContext("HomeHeroESpot_Context",{emsName:""},""),wc.render.declareContext("HomeLeftESpot_Context",{emsName:""},""),wc.render.declareContext("HomeRightTopESpot_Context",{emsName:""},""),wc.render.declareContext("HomeRightBottomESpot_Context",{emsName:""},""),wc.render.declareContext("TallDoubleContentAreaESpot_Context",{emsName:""},""),wc.render.declareContext("TopCategoryHeroESpot_Context",{emsName:""},""),wc.render.declareContext("TopCategoryTallDoubleESpot_Context",{emsName:""},""),wc.render.declareContext("AttachmentPagination_Context",{beginIndex:"0"},""),wc.render.declareContext("PetcoPromotion_Context",{orderId:""},""),wc.render.declareContext("PetcoOrderSummary_Context",{orderId:""},""),wc.render.declareContext("PetcoGC_Context",{orderId:""},""),wc.render.declareContext("PetcoPaymentArea_Context",{orderId:""},""),wc.render.declareContext("PetcoRegUserCCArea_Context",{orderId:""},""),wc.render.declareContext("personilaztionDisplayContext",{quantity:"1",persAttr:"",maxUserInputQuantity:"1"},""),wc.render.declareContext("petBreedOptionsContext",{petType:""},""),wc.render.declareContext("departmentContext",{selDeptId:""},""),wc.render.declareContext("subDepartmentContext",{selSubDeptId:"",brand:""},""),wc.render.declareContext("typeContext",{brandsMap:"",selDeptId:"",selSubDeptId:"",brand:""},""),wc.render.declareContext("eventContext",{stlocIdList:""},""),wc.render.declareContext("contentSearchContext",{total:"",index:""},""),wc.render.declareContext("contentNavContext",{path:"",facetName:""},""),wc.render.declareContext("PetcoDonationItemsDisplay_Context",{orderId:""},"");wc.render.declareContext("ShopCartPagingDisplayForSFL_Context",{SFLItemOrderId:""},"");wc.render.declareContext("petcoWishListForReg_Context",{productId:""},"");wc.render.declareContext("PetcoRepeatDeliveryItemsDisplay_Context",{orderId:""},"");wc.render.declareContext("petcoPaypalAreaContext",{orderId:""},""),wc.render.declareContext("palsrewardsdisplayContext",{palsCodes:""},""),wc.render.declareContext("petcoCheckoutShippingAddress_Context",null,"");wc.render.declareContext("PetcoBOPUSHoursDetailsArea_Context",{currentDay:"",todayShortDate:"",todayHour:""},"");wc.render.declareContext("RepeatDeliveryListingDisplay_Context",null,"");wc.render.declareContext("rxPersonilaztionDisplayContext",{quantity:"1",persAttr:"",maxUserInputQuantity:"1"},"");wc.render.declareContext("PetcoRxPetVetDisplayAreaContext",{isCorruptedData:"",corruptedPetId:"",corruptedOrderItemId:""},"");wc.render.declareContext("PetcoInterstitialCartPopUpAreaContext",{orderItemId:"",quantity:""},"");CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:!0,setCommonParameters:function(e,t,o){this.langId=e;this.storeId=t;this.catalogId=o},setControllerURL:function(e,t){"undefined"!=typeof wc.render.getRefreshControllerById(e)&&(wc.render.getRefreshControllerById(e).url=t)}};wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;categoryDisplayJS.contextChanged=!0;t.refresh(o.properties)},postRefreshHandler:function(e){var t=this;this.renderContext;if(categoryDisplayJS.contextChanged&&!categoryDisplayJS.isHistory){var o="&identifier="+(new Date).getTime(),r=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",t.url+o);dojo.back.addToHistory(r);categoryDisplayJS.contextChanged=!1;categoryDisplayJS.isHistory=!1}cursor_clear();try{"undefined"!=typeof ceadojo&&ceadojo.publish("/wc/collaboration/CategoryDisplayRefreshed",[])}catch(e){console.log(e)}}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;categoryDisplayJS.contextChanged=!0;t.refresh(o.properties)},postRefreshHandler:function(e){var t=this;this.renderContext;if(categoryDisplayJS.contextChanged&&!categoryDisplayJS.isHistory){var o="&identifier="+(new Date).getTime(),r=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",t.url+o);dojo.back.addToHistory(r);categoryDisplayJS.contextChanged=!1;categoryDisplayJS.isHistory=!1}cursor_clear()}}),wc.render.declareRefreshController({id:"PetcoShippingAdddressDisplayAreaController",renderContext:wc.render.getContextById("editShippingAddressContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.isLoggedInAddressValid();CheckoutHelperJS.disablePlaceOrderButton()}}),wc.render.declareRefreshController({id:"PetcoGuestShippingAdddressDisplayAreaController",renderContext:wc.render.getContextById("editGuestShippingAddressContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){null!=dojo.byId("scriptstoexecuteAfterpageLoad")&&eval(dojo.byId("scriptstoexecuteAfterpageLoad").innerHTML);$(".disabled-section").removeClass("disabled-section");wc.render.updateContext("PetcoGC_Context",null,"");wc.render.updateContext("PetcoPromotion_Context",null,"");wc.render.updateContext("PetcoCheckoutCartSummary_Context",null,"");wc.render.updateContext("traditionalShipmentDetailsContext",{beginIndex:"0"},"");wc.render.updateContext("PetcoOrderSummary_Context",null,"");wc.render.updateContext("PetcoPaymentArea_Context",null,"");wc.render.updateContext("PetcoOrderTotalSummary_Context",{beginIndex:"0",fromPage:"paymentMethodPage"},"");wc.render.updateContext("PetcoRxPetVetDisplayAreaContext",null,"");CheckoutHelperJS.disablePlaceOrderButton();setTimeout(function(){cursor_clear()},500)}}),wc.render.declareRefreshController({id:"PetcoPromotionDisplayAreaController",renderContext:wc.render.getContextById("PetcoPromotion_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){}}),wc.render.declareRefreshController({id:"PetcoGiftCardDisplayAreaController",renderContext:wc.render.getContextById("PetcoGC_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.disablePlaceOrderButton();if(null!=document.getElementById("balance_Order_Total")&&null!=document.getElementById("isDonationItemPresent")&&null!=document.getElementById("gc_Eligible_balance_amount")&&null!=document.getElementById("gc_Paid_amount")){var t=document.getElementById("balance_Order_Total").value,o=document.getElementById("isDonationItemPresent").value,r=document.getElementById("gc_Eligible_balance_amount").value,n=document.getElementById("gc_Paid_amount").value,a=document.getElementById("gc_Restricted_RD_Item_total_price").value;if("true"==o&&t>0&&0==parseFloat(r)&&parseFloat(n)>0)document.getElementById("gc-donoation-info").style.display="block";else{var i=document.getElementById("gc-donoation-info");null!=i&&"block"===i.style.display&&(i.style.display="none")}if(t>0&&parseFloat(a)>0&&parseFloat(n)>0)document.getElementById("gc-repeatDelivery-info").style.display="block";else{var i=document.getElementById("gc-repeatDelivery-info");null!=i&&"block"===i.style.display&&(i.style.display="none")}}}}),wc.render.declareRefreshController({id:"PetcoOrderSummaryAreaController",renderContext:wc.render.getContextById("PetcoOrderTotalSummary_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"AjaxGetPetcoGCBalance"==e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){cursor_clear();CheckoutHelperJS.checkIfTotalIsZeroInOrderTotal()}}),wc.render.declareRefreshController({id:"PetcoCheckoutCartSummaryController",renderContext:wc.render.getContextById("PetcoCheckoutCartSummary_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.updateCartSummaryCount();null!=document.getElementById("orderId")&&null!=document.getElementById("HolidayShipMsgFlag")&&"Y"==document.getElementById("HolidayShipMsgFlag").value&&getShippingMessage(petcoCommonJS.storeId,petcoCommonJS.catalogId,petcoCommonJS.langId,document.getElementById("orderId").value,"N","","")}}),wc.render.declareRefreshController({id:"PetcoCheckoutShippingRestrictions_Controller",renderContext:wc.render.getContextById("PetcoCheckoutShippingRestrictions_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){
var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){}}),wc.render.declareRefreshController({id:"PetcoPaymentAreaController",renderContext:wc.render.getContextById("PetcoPaymentArea_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){var t=document.getElementById("isPromoCodeQualified").value;$("#promo-reg-info").css({display:"none"});if(void 0==document.getElementById("newRedundantPromoCode")&&null==document.getElementById("newRedundantPromoCode")||void 0==document.getElementById("newBestPromoCodeApplied")&&null==document.getElementById("newBestPromoCodeApplied")){if(""!=t){$("#promo-conflict").css({display:"none"});$("#promo-reg-info").css({display:"block"});document.getElementById("promo-reg-info").innerHTML=t}}else{var o=document.getElementById("bestPromoCodeApplied").value,r=document.getElementById("newBestPromoCodeApplied").value,n=document.getElementById("redundantPromoCode").value,a=document.getElementById("newRedundantPromoCode").value;if(""!=t){$("#promo-conflict").css({display:"none"});$("#promo-reg-info").css({display:"block"});document.getElementById("promo-reg-info").innerHTML=t}else if(""==o&&""==a){$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"none"});document.getElementById("bestPromoCodeApplied").value=r;document.getElementById("redundantPromoCode").value=a}else if(o==r&&n!=a){$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"block"});document.getElementById("bestPromoCodeApplied").value=r;document.getElementById("redundantPromoCode").value=a}else if(o!=r&&""!=r&&n!=a){$("#promo-conflict").css({display:"block"});$("#promo-conflict-info").css({display:"none"});document.getElementById("bestPromoCodeApplied").value=r;document.getElementById("redundantPromoCode").value=a}else{$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"none"});document.getElementById("bestPromoCodeApplied").value=r;document.getElementById("redundantPromoCode").value=a}}var i=document.getElementById("balance_Order_Total").value,d=document.getElementById("isDonationItemPresent").value,s=document.getElementById("gc_Eligible_balance_amount").value,l=document.getElementById("gc_Paid_amount").value,c=document.getElementById("isGCRestricted").value;if("true"==d&&i>0&&0==parseFloat(s)&&parseFloat(l)>0)document.getElementById("gc-donoation-info").style.display="block";else{var u=document.getElementById("gc-donoation-info");null!=u&&"block"===u.style.display&&(u.style.display="none")}if("true"==c&&i>0&&0==parseFloat(s)&&parseFloat(l)>0)document.getElementById("gc-repeatDelivery-info").style.display="block";else{var u=document.getElementById("gc-repeatDelivery-info");null!=u&&"block"===u.style.display&&(u.style.display="none")}console.log("balanceOrdTotal-"+i+"-isDonationItemPresent-"+d+"-gcEligiblebalanceamount-"+s);CheckoutHelperJS.gcAmountUpdate();if("undefined"!=typeof this.renderContext.properties.isaddGC&&this.renderContext.properties.isaddGC){var p=[];p=this.renderContext.properties;p.isaddGC=!1;cursor_wait();wc.service.invoke("AjaxGetPetcoGCBalance",p)}}}),wc.render.declareRefreshController({id:"PetcoRegUserCCAreaController",renderContext:wc.render.getContextById("PetcoRegUserCCArea_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.isCardRequired()}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;if(e.actionId in order_updated){$("#paymentPalsrewardsRefreshArea").length>0&&parseWidget("paymentPalsrewardsRefreshArea");t.refresh(o.properties);"AjaxDeleteOrderItem"==e.actionId||"AjaxUpdateOrderItem"==e.actionId;submitRequest();cursor_wait()}},postRefreshHandler:function(widget){if("undefined"!=typeof CheckoutHelperJS){CheckoutHelperJS.invokeDeliveryDateAPI("cart");CheckoutHelperJS.callutagforcartupdate(CheckoutHelperJS.callutagforcartupdateCurrentAction);CheckoutHelperJS.callutagforcartupdateCurrentAction="";var promoDisplayButtonObj=dojo.byId("promoDisplayButton");null!=promoDisplayButtonObj&&""!=promoDisplayButtonObj.value&&0==$("div#promo-display.open").length&&CheckoutHelperJS.togglePromoCodeTab(promoDisplayButtonObj)}petcoPersonalizationJS.isRxDetailsInCart();resetRequest();var controller=this,renderContext=this.renderContext,toOrderidObj=dojo.byId("currentSFLOrderId");if(null!=toOrderidObj&&""!=toOrderidObj.value){if(null!=dojo.byId("SaveForLaterContainer_id")&&""==trim(dojo.byId("SaveForLaterContainer_id").innerHTML))dojo.byId("SaveForLaterContainer_id").innerHTML=CheckoutHelperJS.tempLabelForSFL();else if(null==dojo.byId("SaveForLaterContainer_id")&&null!=dojo.byId("ShopCartPagingDisplayForSFL")&&null!=dojo.byId("WC_ShopCartDisplay_div_6")){var innerhtmlvalTemp=dojo.byId("ShopCartPagingDisplayForSFL").innerHTML,innerhtmlval="";innerhtmlval='<div id="tempCopyForEmptyCart_SFL">';innerhtmlval+=innerhtmlvalTemp;innerhtmlval+="</div>";dojo.byId("ShopCartPagingDisplayForSFL").style.display="block";dojo.place(innerhtmlval,dojo.byId("WC_ShopCartDisplay_div_6"),"last")}CheckoutHelperJS.cleanSFLBannerFromController();wc.render.updateContext("ShopCartPagingDisplayForSFL_Context",{SFLItemOrderId:toOrderidObj.value})}else CheckoutHelperJS.affixTotalAmountDiv();var isPromoCodeQualifiedMsg=document.getElementById("isPromoCodeQualified").value;$("#promo-reg-info").css({display:"none"});if(void 0==document.getElementById("newRedundantPromoCode")&&null==document.getElementById("newRedundantPromoCode")||void 0==document.getElementById("newBestPromoCodeApplied")&&null==document.getElementById("newBestPromoCodeApplied")){if(""!=isPromoCodeQualifiedMsg){$("#promo-conflict").css({display:"none"});$("#promo-reg-info").css({display:"block"});document.getElementById("promo-reg-info").innerHTML=isPromoCodeQualifiedMsg}}else{var previousBestPromoCode=document.getElementById("bestPromoCodeApplied").value,bestPromoCode=document.getElementById("newBestPromoCodeApplied").value,previousRedundantPromoCode=document.getElementById("redundantPromoCode").value,redundantPromoCode=document.getElementById("newRedundantPromoCode").value;if(""!=isPromoCodeQualifiedMsg){$("#promo-conflict").css({display:"none"});$("#promo-reg-info").css({display:"block"});document.getElementById("promo-reg-info").innerHTML=isPromoCodeQualifiedMsg}else if(""==previousBestPromoCode&&""==redundantPromoCode){$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"none"});document.getElementById("bestPromoCodeApplied").value=bestPromoCode;document.getElementById("redundantPromoCode").value=redundantPromoCode}else if(previousBestPromoCode==bestPromoCode&&""!=bestPromoCode&&previousRedundantPromoCode!=redundantPromoCode){$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"block"});document.getElementById("bestPromoCodeApplied").value=bestPromoCode;document.getElementById("redundantPromoCode").value=redundantPromoCode}else if(previousBestPromoCode!=bestPromoCode&&""!=bestPromoCode&&previousRedundantPromoCode!=redundantPromoCode){if($("#isAutoAppliedPromoCode").length>0&&"true"!=$("#isAutoAppliedPromoCode").val()){$("#promo-conflict").css({display:"block"});$("#promo-conflict-info").css({display:"none"})}document.getElementById("bestPromoCodeApplied").value=bestPromoCode;document.getElementById("redundantPromoCode").value=redundantPromoCode}else{$("#promo-conflict").css({display:"none"});$("#promo-conflict-info").css({display:"none"});document.getElementById("bestPromoCodeApplied").value=bestPromoCode;document.getElementById("redundantPromoCode").value=redundantPromoCode}null!=document.getElementById("newBestPromoCodeApplied")&&$(".collapse").on("hidden.bs.collapse",function(){$(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus")}).on("shown.bs.collapse",function(){$(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus")});if(""!=document.getElementById("newBestPromoCodeApplied").value){$("#promo-display").collapse("show");$(".collapse").on("hidden.bs.collapse",function(){$(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus")}).on("shown.bs.collapse",function(){$(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus")})}}document.getElementById("isPromoCodeQualified").value="";null!=typeof savedOrdersJS&&"undefined"!=typeof savedOrdersJS&&savedOrdersJS.isCurrentOrderPage(!0);var controller=this;null!=document.getElementById("discountDetailsSection")&&(document.getElementById("discountDetailsSection").style.display="block");null!=document.getElementById("appliedPromotionCodes")&&(document.getElementById("appliedPromotionCodes").style.display="block");$("input.smartsave").focusout(smartSaveOff);$("input.smartsave").focus(smartSaveOn);if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(!1);CheckoutHelperJS.initDojoEventListenerShoppingCartPage()}var orderId=renderContext.properties.orderId;document.getElementById("currentOrderId")&&(orderId=document.getElementById("currentOrderId").value);ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(orderId);document.getElementById("OrderFirstItemId")&&(ShipmodeSelectionExtJS.orderItemId=document.getElementById("OrderFirstItemId").value);dojo.query('div[id^="shoppingListScript_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});if(null!=dojo.byId("palsCodes")){for(var palsCodes=dojo.byId("palsCodes").value,palsArr=palsCodes.split(","),i=0;i<palsArr.length;i++){var code=palsArr[i].substring(4,palsArr[i].length);if(void 0!=document.getElementsByName(code))for(var els=document.getElementsByName(code),j=0;j<els.length;j++)els[j].checked=!0}var isDonationItemPresent=document.getElementById("isDonationItemPresent").value;if("true"==isDonationItemPresent){var pal_Eligible_balance_amount=document.getElementById("pal_Eligible_balance_amount").value;if(pal_Eligible_balance_amount<5){dojo.forEach(dojo.query("div#pals_scenario1 input[type='checkbox']"),function(e){if(!e.checked){e.disabled=!0;dojo.addClass(e.parentNode.parentNode,"text-muted")}});$("#palsAlert").css({display:"block"})}else{dojo.forEach(dojo.query("div#pals_scenario1 input[type='checkbox']"),function(e){e.disabled=!1;dojo.removeClass(e.parentNode.parentNode,"text-muted")});$("#palsAlert").css({display:"none"})}}}cursor_clear();var rmvCartValue=$("#RemovedCartCheck").val();if("No"!=rmvCartValue){var rmvCartArr=rmvCartValue.split("|"),innerhtml="";innerhtml+="<div class='row product-removed-row'>";innerhtml+="<div class='alert alert-dismissable product-removed cart-product-removed-conatiner'>";innerhtml+="<button type='button' onclick='Javascript:CheckoutHelperJS.removeBannerDismiss();' class='icon-modal-x' data-dismiss='alert' aria-hidden='true'>close</button>";innerhtml+="<strong>";innerhtml+=rmvCartArr[0];innerhtml+="</strong> has been removed.";innerhtml+='<a class="remove" href="Javascript:productDisplayJS.AddtoShopCartAjax(';innerhtml=innerhtml+"'"+rmvCartArr[1]+"','"+rmvCartArr[2]+"','"+rmvCartArr[3]+"'";innerhtml+=', false,false)"';innerhtml+=">Undo</a></div></div>";console.log("Final-innerhtml-"+innerhtml);var rmvDiv=document.getElementById("RemovedOrdCount").value;if(null!=document.getElementById("totalNumberOfItems")){var curentDiv=parseInt(document.getElementById("totalNumberOfItems").value)+1;curentDiv!=rmvDiv?null!=document.getElementById("removeCartUndo_"+rmvDiv)&&(document.getElementById("removeCartUndo_"+rmvDiv).innerHTML=innerhtml):null!=document.getElementById("removeCartUndo_last")&&(document.getElementById("removeCartUndo_last").innerHTML=innerhtml)}else null!=document.getElementById("removeCartUndo")&&(document.getElementById("removeCartUndo").innerHTML=innerhtml);null!=document.getElementById("UndoValue")&&(document.getElementById("UndoValue").value="Yes");if(null!=document.getElementById("currencyContext"))var currencyContext=document.getElementById("currencyContext").value;else var currencyContext="USD";loadMiniCart(currencyContext,"-1")}cursor_clear();var isReflektionEnabled=$("#ENABLE_REFLEKTION"),rfkWidgetId;isReflektionEnabled.length>0&&"true"==isReflektionEnabled.val()&&$("input[name=rfkWidgetId]").each(function(){rfkWidgetId=$(this).val();ReflektionHelperJS.rfkRecommendation_init(rfkWidgetId)});if(void 0!=document.getElementById("hasOOSLineItems")||null!=document.getElementById("hasOOSLineItems")){var hasOOSLineItems=document.getElementById("hasOOSLineItems").value;if("true"==hasOOSLineItems){dojo.removeClass(dojo.byId("oosItemErrorDiv"),"hide");dojo.addClass(dojo.byId("oosItemErrorDiv"),"")}else dojo.addClass(dojo.byId("oosItemErrorDiv"),"hide")}if(void 0!=document.getElementById("hasOOSBopusLineItems")||null!=document.getElementById("hasOOSBopusLineItems")){var hasOOSBopusLineItems=document.getElementById("hasOOSBopusLineItems").value;if("true"==hasOOSBopusLineItems){dojo.removeClass(dojo.byId("oosBopusItemErrorDiv"),"hide");dojo.addClass(dojo.byId("oosBopusItemErrorDiv"),"")}else dojo.addClass(dojo.byId("oosBopusItemErrorDiv"),"hide")}if(void 0!=document.getElementById("shipRestrictionFlagVariable")||null!=document.getElementById("shipRestrictionFlagVariable")){var shipRestrictionFlagVariable=document.getElementById("shipRestrictionFlagVariable").value;if("true"==shipRestrictionFlagVariable){dojo.removeClass(dojo.byId("shippingAddressErrorDiv"),"no-show");dojo.addClass(dojo.byId("shippingAddressErrorDiv"),"")}else dojo.addClass(dojo.byId("shippingAddressErrorDiv"),"no-show")}"undefined"!=typeof petcoCommonJS&&petcoCommonJS.bopusCartEnableRadio();"undefined"!=document.getElementById("cartTagging")&&null!=document.getElementById("cartTagging")&&eval.call(window,document.getElementById("cartTagging").innerHTML);null!=document.getElementById("HolidayShipMsgFlag")&&"Y"==document.getElementById("HolidayShipMsgFlag").value&&getShippingMessage(petcoCommonJS.storeId,petcoCommonJS.catalogId,petcoCommonJS.langId,dojo.byId("currentOrderIdShop").value,"N","","");petcoNearestLocations.fnUpdateBopusHeader();if("undefined"!=document.getElementById("toolTip_init")&&null!=document.getElementById("toolTip_init")){var toolTip_init_script=document.getElementById("toolTip_init");null!=toolTip_init_script&&eval(toolTip_init_script.innerHTML)}"function"==typeof window._updateCartIndicatorAmount&&window._updateCartIndicatorAmount($("#currentOrderQuantityShop").val());if(CheckoutHelperJS.isPromoCodeManullayAdded){var params=[];params.storeId=petcoCommonJS.storeId;params.catalogId=petcoCommonJS.catalogId;params.langId=petcoCommonJS.langId;params.orderId=document.getElementById("currentOrderId").value;params.promoCode=bestPromoCode;wc.service.invoke("AjaxGetPromoExclusionMsg",params);CheckoutHelperJS.isPromoCodeManullayAdded=!1}}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){var t=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(!1);CheckoutHelperJS.initDojoEventListenerShoppingCartPage()}var o=t.properties.orderId;document.getElementById("currentOrderId")&&(o=document.getElementById("currentOrderId").value);ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(o);"undefined"!=typeof petcoCommonJS&&petcoCommonJS.bopusCartEnableRadio()}}),wc.render.declareRefreshController({id:"AddToCartPagingDisplayController",renderContext:wc.render.getContextById("AddToCartPageDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){null!=$("#rd-popover")&&void 0!=$("#rd-popover")&&$("#rd-popover").popover({html:!0,trigger:"hover",content:$("#rd-popover-content").html(),placement:"top"});CheckoutHelperJS.invokeDeliveryDateAPI("cart");petcoPersonalizationJS.isRxDetailsInCart()}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"PetcoOrderTotalSummaryController",renderContext:wc.render.getContextById("PetcoOrderTotalSummary_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"PetcoRepeatDeliveryEditItemController",renderContext:wc.render.getContextById("PetcoRepeatDeliveryEditItem_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"PetcoRepeatDeliveryEditItemRDPriceController",renderContext:wc.render.getContextById("PetcoRepeatDeliveryEditItemRDPrice_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"PetcoCancelRepeatDeliveryConfirmationController",renderContext:wc.render.getContextById("PetcoCancelRepeatDeliveryConfirmation_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties);cursor_wait()},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"SSFSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){var t=(this.renderContext,document.getElementById("jsonOrderStr").innerHTML),o=this.renderContext.properties.beginIndex,r=this.renderContext.properties.pageSize;sterlingIntegrationJS.populateOrderLineInfoForSingleShipment(t,o,r);cursor_clear()}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"SSFSMSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){var t=(this.renderContext,document.getElementById("jsonOrderStr").innerHTML),o=this.renderContext.properties.beginIndex,r=this.renderContext.properties.pageSize;sterlingIntegrationJS.populateOrderLineInfoForMultipleShipment(t,o,r);cursor_clear()}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"AjaxCouponsAddRemove"!=e.actionId&&"AjaxWalletItemProcessServiceDelete"!=e.actionId||t.refresh(o.properties)}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog()}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;e.actionId in listorders_changed&&("AjaxOrderCreate"!=e.actionId&&"AjaxSingleOrderCalculate"!=e.actionId||0==this.renderContext.properties.startNumber?t.refresh(o.properties):wc.render.updateContext("ListOrdersDisplay_Context",{startNumber:0}))},renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["startNumber"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=!1}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded()}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;if(e.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;t.refresh(o.properties)}},postRefreshHandler:function(e){cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var t=document.getElementById("OrderDescription_input");if(null!=t&&"undefined"!=t){t.value=this.currentDesc;dojo.removeClass(t,"savedOrderDetailsInputBorder");dojo.addClass(t,"savedOrderDetailsInputBorderWarning")}}}}),wc.render.declareRefreshController({id:"BrowsingHistoryController",renderContext:wc.render.getContextById("BrowsingHistoryContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["status"])&&t.refresh(r.properties)},postRefreshHandler:function(e){document.getElementById("WC_ScrollingProductsESpot_EmptyImgContainer_BrowsingHistory")||(document.getElementById("WC_LeftSidebarDisplay_div_5").style.display="block")}}),wc.render.declareRefreshController({id:"BrowsingHistoryDisplay_Controller",renderContext:wc.render.getContextById("BrowsingHistoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;(o.testForChangedRC(["currentPage"])||o.testForChangedRC(["pageView"]))&&t.refresh(r.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"CategorySubscriptionController",renderContext:wc.render.getContextById("CategorySubscriptionContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"AjaxCategorySubscribe"==e.actionId&&t.refresh(o.properties)},postRefreshHandler:function(e){cursor_clear();null==dojo.byId("CategorySubscriptionImage")&&dojo.animateProperty({node:dojo.byId("CategorySubscriptionLink"),duration:1500,properties:{backgroundColor:{start:"yellow",end:dojo.style("CategorySubscriptionLink","backgroundColor")}}}).play()}}),wc.render.declareRefreshController({id:"RecurringOrderDisplayController",renderContext:wc.render.getContextById("RecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this,r=this.renderContext;if("AjaxCancelSubscription"==e.actionId){o.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url;t.refresh(r.properties)}},renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RepeatOrderDisplayController",renderContext:wc.render.getContextById("RepeatOrderDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){$("#datepicker").datepicker({inline:!0,language:"en"});dojo.query('script[id^="showRdDivID"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)})}}),wc.render.declareRefreshController({id:"MembershipOrderDisplayController",renderContext:wc.render.getContextById("MembershipOrderDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){$("#datepicker").datepicker({inline:!0,language:"en"});dojo.query('script[id^="showMembershipDivID"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)})}}),wc.render.declareRefreshController({id:"SubscriptionDisplayController",renderContext:wc.render.getContextById("SubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this,r=this.renderContext;if("AjaxCancelSubscription"==e.actionId){o.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url;t.refresh(r.properties)}},renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecentRecurringOrderDisplayController",renderContext:wc.render.getContextById("RecentRecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this,r=this.renderContext;if("AjaxCancelSubscription"==e.actionId){o.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url;t.refresh(r.properties)}},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecentSubscriptionDisplayController",renderContext:wc.render.getContextById("RecentSubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this,r=this.renderContext;if("AjaxCancelSubscription"==e.actionId){o.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url;t.refresh(r.properties)}},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecurringOrderChildOrdersDisplayController",renderContext:wc.render.getContextById("RecurringOrderChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"SubscriptionChildOrdersDisplayController",renderContext:wc.render.getContextById("SubscriptionChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"QuickInfoDetailsController",renderContext:wc.render.getContextById("QuickInfoContext"),url:"",formId:"",quickInfoEvenSubscribed:!1,renderContextChangedHandler:function(e,t){if(submitRequest()){cursor_wait();t.refresh(this.renderContext.properties)}},postRefreshHandler:function(e){if(dojo.byId("QuickInfostoreParams")){var t=dojo.byId("QuickInfostoreParams").value;if(dojo.byId("catEntryParamsForJS"))var o=dojo.byId("catEntryParamsForJS").value;var r=dojo.byId("QuickInfoshoppingListNames").value;shoppingListJSQuickInfo=new ShoppingListJS(dojo.fromJson(t),dojo.fromJson(o),dojo.fromJson(r),"shoppingListJSQuickInfo");if(!this.quickInfoEvenSubscribed){this.quickInfoEvenSubscribed=!0;dojo.topic.subscribe("DefiningAttributes_Resolved",function(e,t){shoppingListJSQuickInfo.setItemId(e,t)});dojo.topic.subscribe("QuickInfo_attributesChanged",function(e){shoppingListJSQuickInfo.setCatEntryAttributes(e)});dojo.topic.subscribe("Quantity_Changed",function(e){shoppingListJSQuickInfo.setCatEntryQuantity(e)});dojo.topic.subscribe("ShoppingList_Changed",function(e){shoppingListJSQuickInfo.updateShoppingListAndAddItem(e)});dojo.topic.subscribe("ShoppingListItem_Added",function(){shoppingListJSQuickInfo.deleteItemFromCart()});dojo.connect(dojo.byId("QuickInfoaddToShoppingListDropdown"),"onmouseover",function(){shoppingListJSQuickInfo.mouseOnArrow=!0});dojo.connect(dojo.byId("QuickInfoShoppingList_0"),"onmouseover",function(){shoppingListJSQuickInfo.exceptionFlag=!0;document.getElementById("QuickInfoShoppingListLink_0").focus()})}var n=dojo.fromJson(o).id;null!=n&&""!=n&&wc.render.updateContext("QuickInfoDiscountDetailsContext",{productId:dojo.fromJson(o).id})}dojo.byId("catEntryParamsForJS")&&(QuickInfoJS.catEntryParams=dojo.fromJson(dojo.byId("catEntryParamsForJS").value));if(""==QuickInfoJS.itemId){QuickInfoJS.setCatEntryQuantity(1);QuickInfoJS.selectDefaultSwatch()}else QuickInfoJS.selectCurrentAttributes();if(null!=document.getElementById("notifyCaptcha")){var a="'"+document.getElementById("captchaKey").value+"'";notifyWidget=grecaptcha.render(document.getElementById("notifyCaptcha"),{sitekey:a})}$("#quickbuy").modal("show");cursor_clear();activateRatings();dojo.query('script[id^="QuickInfo_Inventory_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});dojo.query('script[id^="QuickInfo_Add2Cart_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});(ios||android)&&(quickInfoPopup._relativePosition=new Object);"undefined"!=typeof TealeafWCJS&&TealeafWCJS.rebind("quickInfoPopup");QuickInfoJS.preSelectRadioButtonOnQuickInfo()}}),wc.render.declareRefreshController({id:"DiscountDetailsController",renderContext:wc.render.getContextById("DiscountDetailsContext"),url:"DiscountDetailsView",formId:"",renderContextChangedHandler:function(e,t){t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"WishlistDisplayController",renderContext:wc.render.getContextById("MylistsDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){AccountWishListDisplay.fetchInventoryDetailsForAllTheProducts("WishList");try{"undefined"!=typeof alter_Twitter_Url&&"function"==typeof alter_Twitter_Url&&alter_Twitter_Url()}catch(e){console.log("alter Twitter Url Error"+e)}dojo.query('script[id^="wishListCount_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});dojo.query('script[id^="shopListJSOnload_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});$("html,body").animate({scrollTop:$("#myWishList").position().top},"fast");onloadCallback()}}),wc.render.declareRefreshController({id:"PurchaselistDisplayController",renderContext:wc.render.getContextById("PurchaselistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this,r=this.renderContext;o.testForChangedRC(["startIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){AccountWishListDisplay.fetchInventoryDetailsForAllTheProducts("PurchaseList");"undefined"!=typeof alter_Twitter_Url&&"function"==typeof alter_Twitter_Url&&alter_Twitter_Url();dojo.byId("purchaseDate_div");dojo.query('script[id^="datetimepicker"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});dojo.query('script[id^="purchaseListCount_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML);
});dojo.query('script[id^="shopListJSOnloadForPurList_"]').forEach(function(e,t,o){dojo.eval(e.innerHTML)});$("html,body").animate({scrollTop:$("#myPurchaseList").position().top},"fast")}}),wc.render.declareRefreshController({id:"QuickInfoDiscountDetailsController",renderContext:wc.render.getContextById("QuickInfoDiscountDetailsContext"),url:"DiscountDetailsView",formId:"",renderContextChangedHandler:function(e,t){t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"DoubleContentAreaESpot_Controller",renderContext:wc.render.getContextById("DoubleContentAreaESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"ScrollableESpot_Controller",renderContext:wc.render.getContextById("ScrollableESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"TopCategoriesESpot_Controller",renderContext:wc.render.getContextById("TopCategoriesESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"CategoryFeaturedProductsESpot_Controller",renderContext:wc.render.getContextById("CategoryFeaturedProductsESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"HomeHeroESpot_Controller",renderContext:wc.render.getContextById("HomeHeroESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"HomeLeftESpot_Controller",renderContext:wc.render.getContextById("HomeLeftESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"HomeRightTopESpot_Controller",renderContext:wc.render.getContextById("HomeRightTopESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"HomeRightBottomESpot_Controller",renderContext:wc.render.getContextById("HomeRightBottomESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"TallDoubleContentAreaESpot_Controller",renderContext:wc.render.getContextById("TallDoubleContentAreaESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"TopCategoryHeroESpot_Controller",renderContext:wc.render.getContextById("TopCategoryHeroESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"TopCategoryTallDoubleESpot_Controller",renderContext:wc.render.getContextById("TopCategoryTallDoubleESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["emsName"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"AttachmentPagination_Controller",renderContext:wc.render.getContextById("AttachmentPagination_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){this.testForChangedRC(["beginIndex"])&&t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){var t=document.getElementById("pages_list_id");null==t||isAndroid()||isIOS()||dojo.addClass(t,"desktop");cursor_clear()}}),wc.render.declareRefreshController({id:"rxPersonilaztionDisplayController",renderContext:wc.render.getContextById("rxPersonilaztionDisplayContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){$('[id^="quantity_"]').each(function(e,t){$("#topCategoryValuePetType").length>0&&""!=$("#topCategoryValuePetType").val().trim()?petcoPersonalizationJS.loadPetBreedValues("rxMedicinePetType_"+(e+1),"rxMedicinePetBreed_"+(e+1),null,petcoPersonalizationJS.getDefaultPetType().toUpperCase()):petcoPersonalizationJS.loadPetBreedValues("rxMedicinePetType_"+(e+1),"rxMedicinePetBreed_"+(e+1))});var controller=this,renderContext=this.renderContext,quantity=controller.renderContext.properties.quantity;if(null!=document.getElementById("form-modal-screen")&&"block"==document.getElementById("form-modal-screen").style.display){petcoCommonJS.showModal("modal-rxmedicine");$("#rxPersonilaztionDisplay").addClass("active")}if(void 0!=document.getElementById("modal-rxmedicine")){if(void 0!=CheckoutHelperJS&&CheckoutHelperJS.isshowpersonalizationPopup){petcoCommonJS.showModal("modal-rxmedicine");$("#rxPersonilaztionDisplay").addClass("active")}setTimeout(function(){if(null!=document.getElementById("personalization")&&"true"==document.getElementById("personalization").value&&"undefined"!=typeof localStorageHelper){nextRepeatedDeliveryDateCookieValue=localStorageHelper.get("isWhishListButtonClicked",!1);if("yes"==nextRepeatedDeliveryDateCookieValue){null!=dojo.byId("addToShoppingList")&&eval(dojo.getAttr("addToShoppingList","href"));productDisplayJS.addtoWIshListClickedRemoved()}}},1e3)}""!=controller.renderContext.properties.persAttr&&petcoPersonalizationJS.reAssignRxPersonalizedAttr(controller.renderContext.properties.persAttr);petcoPersonalizationJS.isloadedPetAndVetInfoInModel?dojo.topic.publish("loadPetAndVetInfoInModelLoaded",!1):dojo.topic.publish("loadPetAndVetInfoInModelLoaded",!0);petcoPersonalizationJS.isloadedPetAndVetInfoInModel=!0}}),wc.render.declareRefreshController({id:"personilaztionDisplayController",renderContext:wc.render.getContextById("personilaztionDisplayContext"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext;"AjaxPetcoSendProductEmail"==e.actionId||"AjaxOrderItemPersonalizationUpdate"==e.actionId},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){var controller=this,renderContext=this.renderContext,quantity=controller.renderContext.properties.quantity,maxUserInputQuantity=controller.renderContext.properties.maxUserInputQuantity;quantity>maxUserInputQuantity?null!=document.getElementById("maxUserInputQuantity")&&(document.getElementById("maxUserInputQuantity").value=quantity):null!=document.getElementById("maxUserInputQuantity")&&(document.getElementById("maxUserInputQuantity").value=maxUserInputQuantity);if(null!=document.getElementById("form-modal-screen")&&"block"==document.getElementById("form-modal-screen").style.display){petcoCommonJS.showModal("Personalization");$("#personilaztionDisplay").addClass("active")}if(void 0!=document.getElementById("modal-Personalization")){if(void 0!=CheckoutHelperJS&&CheckoutHelperJS.isshowpersonalizationPopup){console.log("testpurpose:commonControllersDeclaration.js:2528");petcoCommonJS.showModal("Personalization");$("#personilaztionDisplay").addClass("active")}setTimeout(function(){if(null!=document.getElementById("personalization")&&"true"==document.getElementById("personalization").value&&"undefined"!=typeof localStorageHelper){nextRepeatedDeliveryDateCookieValue=localStorageHelper.get("isWhishListButtonClicked",!1);if("yes"==nextRepeatedDeliveryDateCookieValue){null!=dojo.byId("addToShoppingList")&&eval(dojo.getAttr("addToShoppingList","href"));productDisplayJS.addtoWIshListClickedRemoved()}}},1e3)}if("isInCart"in renderContext.properties&&renderContext.properties.isInCart){dojo.forEach(dojo.query('div[id="cart-submit-button"]'),function(e){e.className="col-8 col-center show"});dojo.forEach(dojo.query('div[id="pdp-submit-button"]'),function(e){e.className="col-8 col-center hide"});dojo.forEach(dojo.query('div[id="wishList-submit-button"]'),function(e){e.className="col-8 col-center hide"})}null!=controller.renderContext.properties.persAttr&&""!=controller.renderContext.properties.persAttr&&petcoPersonalizationJS.reAssignPersonalizedAttr(controller.renderContext.properties.persAttr);if(null!=dojo.byId("previousQuantity")&&null!=dojo.byId("personalizePaging")&&null!=dojo.byId("isLTLDeliveryRequired")&&null!=dojo.byId("PersonalizationCheckBox_1")&&dojo.byId("isLTLDeliveryRequired")&&"true"==dojo.byId("isLTLDeliveryRequired").value){dojo.byId("PersonalizationCheckBox_1").checked=!0;dojo.byId("PersonalizationCheckBox_1").parentNode.style.display="none";dojo.byId("personalizePaging").style.display="none"}}}),wc.render.declareRefreshController({id:"departmentDisplayController",renderContext:wc.render.getContextById("departmentContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"subDepartmentDisplayController",renderContext:wc.render.getContextById("subDepartmentContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"typeDisplayController",renderContext:wc.render.getContextById("typeContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"contentSearchController",renderContext:wc.render.getContextById("contentSearchContext"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"contentNavController",renderContext:wc.render.getContextById("contentNavContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"eventDisplayController",renderContext:wc.render.getContextById("eventContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"petBreedOptionsController",renderContext:wc.render.getContextById("petBreedOptionsContext"),url:"",formId:"",modelChangedHandler:function(e,t){var o=this.renderContext;"pingPetcoUserTypeAction"!=e.actionId&&t.refresh(o.properties)},renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext}}),wc.render.declareRefreshController({id:"PetcoDonationItemsDisplayAreaController",renderContext:wc.render.getContextById("PetcoDonationItemsDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext;dojo.hasClass(dojo.byId("donationDisplayArea"),"field-listing-visible")?dojo.forEach(dojo.query("ul#donationDisplayArea li.form-field-sublist"),function(e){e.style.display="block"}):dojo.forEach(dojo.query("ul#donationDisplayArea li.form-field-sublist"),function(e){e.style.display="none"});var t=dojo.byId("donation_attr_name").value,o=dojo.byId("donation_first_attr_value").value,r=dojo.byId("donation_catentry_id").value;shoppingActionsJS.setSelectedAttribute(t,o,"entitledItem_"+r);shoppingActionsJS.changeDescription("entitledItem_"+r,o)}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayForSFLController",renderContext:wc.render.getContextById("ShopCartPagingDisplayForSFL_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties);cursor_wait()},postRefreshHandler:function(e){dojo.destroy("tempCopyForEmptyCart_SFL");this.renderContext;setTimeout(function(){CheckoutHelperJS.copyBackSaveForLater();CheckoutHelperJS.loadBannerForSaveForlater()},5);setTimeout(function(){CheckoutHelperJS.affixTotalAmountDiv()},200);cursor_clear();petcoPersonalizationJS.isRxDetailsInCart()}}),wc.render.declareRefreshController({id:"petcoWishListForRegController",renderContext:wc.render.getContextById("petcoWishListForReg_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){var jsToExecute=dojo.byId("javascriptOnloadGiftList");null!=jsToExecute&&eval(jsToExecute.innerHTML);"undefined"!=typeof isPetcoWishListForRegCalled&&(isPetcoWishListForRegCalled=!1);if((null==document.getElementById("personalization")||null!=document.getElementById("personalization")&&"true"!=document.getElementById("personalization").value)&&"undefined"!=typeof localStorageHelper){nextRepeatedDeliveryDateCookieValue=localStorageHelper.get("isWhishListButtonClicked",!1);if("yes"==nextRepeatedDeliveryDateCookieValue){null!=dojo.byId("addToShoppingList")&&eval(dojo.getAttr("addToShoppingList","href"));productDisplayJS.addtoWIshListClickedRemoved()}}}}),wc.render.declareRefreshController({id:"PetcoRepeatDeliveryItemsDisplayAreaController",renderContext:wc.render.getContextById("PetcoRepeatDeliveryItemsDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){if(null!=dojo.byId("isLoginPopUpForceFullyClosed")&&"true"==dojo.byId("isLoginPopUpForceFullyClosed").value){setTimeout(function(){dojo.byId("isLoginPopUpForceFullyClosed").value="false"},5e3);var t=dojo.byId("promptTologinError"),o=dojo.byId("promptTologinErrorInfo");if(null!=t&&null!=o){t.className="collapsible open";t.innerHTML='<p class="error-box margin-top-lg">'+o.innerHTML+"</p>"}}if(null!=dojo.byId("isUniqueEmail_forChekingRdOrder")&&"false"==dojo.byId("isUniqueEmail_forChekingRdOrder").value)if(null!=dojo.byId("isRDOrder")&&"true"==dojo.byId("isRDOrder").value){null!=dojo.byId("singleOrderSummary2")&&dojo.attr(dojo.byId("singleOrderSummary2"),"disabled","disabled");null!=dojo.byId("singleOrderSummary")&&dojo.attr(dojo.byId("singleOrderSummary"),"disabled","disabled");null!=dojo.byId("create-account-no")&&(dojo.byId("create-account-no").style.display="none")}else if(null!=dojo.byId("isRDOrder")&&"false"==dojo.byId("isRDOrder").value){null!=dojo.byId("singleOrderSummary2")&&dojo.removeAttr(dojo.byId("singleOrderSummary2"),"disabled");null!=dojo.byId("singleOrderSummary")&&dojo.removeAttr(dojo.byId("singleOrderSummary"),"disabled");null!=dojo.byId("create-account-no")&&(dojo.byId("create-account-no").style.display="block")}null!=dojo.byId("isRDOrder")&&"true"==dojo.byId("isRDOrder").value?document.getElementById("isPoAddress")&&"true"==document.getElementById("isPoAddress").value?document.getElementById("poAddressMessage").style="display:block":document.getElementById("poAddressMessage").style="display:none":document.getElementById("poAddressMessage")&&(document.getElementById("poAddressMessage").style="display:none");this.renderContext}}),wc.render.declareRefreshController({id:"petcoPaypalAreaController",renderContext:wc.render.getContextById("petcoPaypalAreaContext"),url:getAbsoluteURL()+"PayPal",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){null!=dojo.byId("existingNCR")&&null!=dojo.byId("PAYPAL_existingNCR")&&(dojo.byId("existingNCR").value=dojo.byId("PAYPAL_existingNCR").value);null!=dojo.byId("existingPiId")&&null!=dojo.byId("PAYPAL_existingPPI")&&(dojo.byId("existingPiId").value=dojo.byId("PAYPAL_existingPPI").value);null!=dojo.byId("existingPayPal")&&null!=dojo.byId("PAYPAL_existingPayPal")&&(dojo.byId("existingPayPal").value=dojo.byId("PAYPAL_existingPayPal").value);null!=dojo.byId("activeTab")&&null!=dojo.byId("PAYPAL_activeTab")&&(dojo.byId("activeTab").value=dojo.byId("PAYPAL_activeTab").value);dojo.query('input[type="hidden"][name="existingPiIdAll"]').length>0&&null!=dojo.byId("PAYPAL_existingPI")&&(dojo.query('input[type="hidden"][name="existingPiIdAll"]')[0].value=dojo.byId("PAYPAL_existingPI").value);null!=dojo.byId("PAYPAL_onloadFunction")&&eval(dojo.byId("PAYPAL_onloadFunction").innerHTML);if(null!=dojo.byId("paymentMethodPayPal")&&dojo.byId("paymentMethodPayPal").checked&&null!=dojo.byId("paypal")){dojo.addClass(dojo.byId("paypal"),"show");dojo.removeClass(dojo.byId("paypal"),"no-show")}CheckoutPayments.disableEnableActivePaymentTab()}}),wc.render.declareRefreshController({id:"traditionalShipmentDetailsController",renderContext:wc.render.getContextById("traditionalShipmentDetailsContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.disablePlaceOrderButton()}}),wc.render.declareRefreshController({id:"petcoCheckoutShippingAddressController",renderContext:wc.render.getContextById("petcoCheckoutShippingAddress_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){CheckoutHelperJS.showModal("selectAddress","deep");$("#savedAddressClose").focus()}}),wc.render.declareRefreshController({id:"PetcoBOPUSHoursDetailsArea_Controller",renderContext:wc.render.getContextById("PetcoBOPUSHoursDetailsArea_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){$("#SPC_lsa_hours").length>0&&$("#dateValToDIsplay").length>0&&$("#SPC_lsa_hours").html($("#dateValToDIsplay").html())}}),wc.render.declareContext("petcoHomePagePalsInfo_Context",null,"");wc.render.declareRefreshController({id:"petcoHomePagePalsInfoController",renderContext:wc.render.getContextById("petcoHomePagePalsInfo_Context"),url:getAbsoluteURL()+"PetcoPalsInfoView?catalogId=10051&langId=-1&storeId=10151",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){var t=1;$(".page-next").click(function(){t++;$(".pals-rewards-box").addClass("hide");$(".page-prev").removeClass("hide");$("#pals-rewards-box-"+t).removeClass("hide");t===$(".pals-rewards-box").length&&$(".page-next").addClass("hide")});$(".page-prev").click(function(){if(t>1){t--;$(".pals-rewards-box").addClass("hide");$(".page-next").removeClass("hide");$("#pals-rewards-box-"+t).removeClass("hide");1===t&&$(".page-prev").addClass("hide")}});if(0==$(".pals-rewards-box").length){$(".pals-rewards-container").addClass("pals-rewards-container-space padding-left-none");$(".pals-rewards-details").addClass("margin-left-none")}}}),wc.render.declareRefreshController({id:"PetcoRxPetVetDisplayAreaController",renderContext:wc.render.getContextById("PetcoRxPetVetDisplayAreaContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(widget){$(".rxmed-approval-method").click(function(){var e=$(this).attr("id"),t=e.split("_"),o=t[t.length-2],r=t[t.length-1];$("#rxMedPetDataSelection_Container_"+o+"_"+r),$("#rxMedVetDataSelection_Container_"+o+"_"+r),$(this).val();$("#"+e).addClass("selected")});$.each($('select[id^="rxMedApprovalMethodSelection_"]'),function(e,t){"online"==t.value?$.each($('select[id^="rxMedPetDataSelection_"]'),function(e,t){var o=this.id,r=o.split("_"),n=r[r.length-2],a=$("#rxMedPetDataSelection_Container_"+n+"_1"),i=$("#rxMedVetDataSelection_Container_"+n+"_1");if(""!=$("#rxMedPetDataSelection_"+n+"_1").val()){a.removeClass("hide");i.removeClass("hide")}}):"mail"==t.value&&$.each($('select[id^="rxMedPetDataSelection_"]'),function(e,t){var o=this.id,r=o.split("_"),n=r[r.length-2],a=$("#rxMedPetDataSelection_Container_"+n+"_1"),i=($("#rxMedVetDataSelection_Container_"+n+"_1"),$("#mailing_msg_"+n));i.removeClass("hide");a.removeClass("hide")})});var controller=this,renderContext=this.renderContext,isCorruptedData=controller.renderContext.properties.isCorruptedData,corruptedPetId=controller.renderContext.properties.corruptedPetId,corruptedOrderItemId=controller.renderContext.properties.corruptedOrderItemId;isCorruptedData&&petcoPersonalizationJS.rxMedUpdateMandatoryPetInfo(corruptedOrderItemId,corruptedPetId);toggle(dojo.byId("prescription-information-section"));toggle(dojo.byId("prescription-information-section"));eval($("script#wetApiWidgetAfterAjax").html());$("#prescription-information").removeClass("hide");cursor_clear();CheckoutHelperJS.disablePlaceOrderButton()}}),wc.render.declareRefreshController({id:"PetcoInterstitialCartPopUpAreaController",renderContext:wc.render.getContextById("PetcoInterstitialCartPopUpAreaContext"),url:getAbsoluteURL()+"PetcoInterstitialATCPopup?catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&storeId="+WCParamJS.storeId,formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties);dojo.topic.publish("PDPAddToCartModal_open","true")},postRefreshHandler:function(widget){var controller=this,renderContext=this.renderContext;persistentPDP();cursor_clear();petcoCommonJS.showModal("cartListItems");$('.carousel[data-wrap="false"]').bind("slid.bs.carousel",function(e){var t=$(this);t.children(".carousel-control").removeClass("disabled");t.find(".item:last").hasClass("active")?t.children(".right").addClass("disabled"):t.find(".item:first").hasClass("active")&&t.children(".left").addClass("disabled")});"undefined"!=document.getElementById("cartInterstitialTagging")&&null!=document.getElementById("cartInterstitialTagging")&&eval($("script#cartInterstitialTagging").html())}});dojo.addOnLoad(function(){function e(){var e=document.getElementById("SimpleSearchForm_SearchTerm").value.length,t=(document.getElementById("SimpleSearchForm_SearchTerm").value,document.getElementById("autoSuggest_Result_div"));e>2&&null!=t&&"undefined"!=t&&"block"==t.style.display?document.getElementById("look-ahead").classList.add("active"):document.getElementById("look-ahead").classList.remove("active")}var t=document.getElementById("SimpleSearchForm_SearchTerm");if(t){var o="";null!=$("#omnitureEnabled")&&void 0!=$("#omnitureEnabled")&&(o=$("#omnitureEnabled").val());if("true"!=o){var r=document.getElementById("SimpleSearchForm_SearchTerm").value;utag_data.search_keyword=r}document.getElementById("SimpleSearchForm_SearchTerm").onkeyup=function(){e()}}});petcoCommonJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,t,o){this.langId=e;this.storeId=t;this.catalogId=o},rateLimiterList:{},userLocation:{latitude:"",longitude:""},locationConfig:{expirationMin:"",isGoogleGeoAPI:"",HTML5GeoTimeout:"",XHRTimeout:"",googleAPIUrl:"",googleAPIKey:""},IS_HTML5_CALL_COMPLETED:!1,hidePLPPriceBopusResStates:function(e,t){var o=JSON.parse(localStorage.getItem("petcostores")),r=null;if(null!=o&&"undefined"!=typeof o.petcostores&&o.petcostores.length>0){var n=JSON.parse(o.petcostores);null!=n&&1==n.length?r=n.STATE:null!=n&&n.length>0&&(r=n[0].STATE)}if(null!=r&&$("#isBOPUSAreaRestictionEnabeled").length>0&&"true"==$("#isBOPUSAreaRestictionEnabeled").val()&&"true"==e){var a="";if($("#BOPUSAreaRestictionState").length>0){a=$("#BOPUSAreaRestictionState").val();for(var i=a.split(","),d=0;d<i.length;d++)if(i[d]==r){var s="product-price_"+t;$("#"+s).addClass("hide");$("#"+s).removeClass("show")}}}},toggleSuggestionContainer:function(e){if($("#suggestion-button-"+e).hasClass("hide-icon")){$(".suggestion-button").removeClass("hide-icon");$("#suggestion-button-"+e).addClass("hide-icon")}else $(".suggestion-button").removeClass("hide-icon");$("#suggestion-button-"+e).toggleClass("hide-icon");$(".suggestioncontainer").css("display","none");$("#suggestion-button-"+e).hasClass("hide-icon")?$("#"+e).css("display","block"):$("#"+e).css("display","none")},rateLimiter:function(e,t,o){t in this.rateLimiterList&&clearTimeout(this.rateLimiterList[t]);this.rateLimiterList[t]=setTimeout(o,e)},repeatDeliveryCartSelected:function(){"function"==typeof cmCreateElementTag&&cmCreateElementTag("ScheduleRD","ShoppingCart");console.log("RD checkbox CHECK-"+$("#repeat-delivery-checkbox-"+selectedOrderItemId).is(":checked"));$("#repeat-delivery-checkbox-"+selectedOrderItemId).is(":checked")?$("#rddropdown-"+selectedOrderItemId).removeClass("hide"):$("#rddropdown-"+selectedOrderItemId).addClass("hide");CheckoutHelperJS.removeBannerDismiss()},repeatDeliveryOptionSelected:function(){console.log("RD radio CHECK-"+$('[name="repeatDelivery"]').is(":checked"));$('[name="repeatDelivery"]').is(":checked")?$("#rddropdown-"+selectedOrderItemId).removeClass("hide"):$("#rddropdown-"+selectedOrderItemId).addClass("hide")},repeatDeliveryItemShip:function(e,t){if(t)if(document.getElementById("repeat-delivery-radio")&&document.getElementById("repeat-delivery-radio").checked){var o=document.getElementById("repeat-delivery-freq-options").value,r=document.getElementById("rd_sku_"+selectedOrderItemId).value;if(null!=o&&"undefined"!=o&&null!=r&&"undefined"!=r){var n={conversion_event_id:"New Repeat Delivery",conversion_category_id:"Repeat Delivery",conversion_action_type:"1",rd_sku:r,rd_schedule:o};pushEvent(n)}this.updateORResetPriceWait(selectedOrderItemId,document.getElementById("repeat-delivery-freq-options").value)}else this.updateORResetPriceWait(selectedOrderItemId,"")},createRepeatDeliveryShopCart:function(e,t){var o=$("#product_Name_"+selectedOrderItemId).val(),r=o.replace(/["']/g,""),n=document.getElementById("rd_sku_"+selectedOrderItemId).value;if(null!=n&&"undefined"!=n){var a={product_id:e,product_sku:n,product_name:r,conversion_action_type:"1",conversion_category_id:"Repeat Delivery",conversion_event_id:"New Repeat Delivery Shopping Cart",event_name:"repeat_delivery_new_cart"};pushEvent(a)}this.repeatDeliveryShopCart(e,t)},repeatDeliveryShopCart:function(e,t){if(t){dojo.forEach(dojo.query('a[data-target="#rdHelp"]'),function(e){dojo.setAttr(e,"data-target","#rdHelp_noshow")});if(document.getElementById("repeat-delivery-radio_"+selectedOrderItemId)&&document.getElementById("repeat-delivery-radio_"+selectedOrderItemId).checked){var o="";void 0!=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId)&&null!=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId)&&(o=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId).value);var r="",n="";if(void 0!=document.getElementById("repeat-delivery-first-ship-options-"+selectedOrderItemId)&&null!=document.getElementById("repeat-delivery-first-ship-options-"+selectedOrderItemId)){var a=document.getElementById("repeat-delivery-first-ship-options-"+selectedOrderItemId).value;if(null!=a&&void 0!=a)if("now"==a)r=document.getElementById("repeat-delivery-freq-options_future_order-"+selectedOrderItemId).value;else{r=document.getElementById("repeat-delivery-freq-options_future_order-"+selectedOrderItemId).value;n=a}}""==r&&""!=o&&(r=o);""==o&&""!=r&&(o=r);document.getElementById("rd_sku_"+selectedOrderItemId).value;this.updateORResetPrice(selectedOrderItemId,r,n,"AjaxUpdateOrderItemShopCart")}else document.getElementById("one-time-delivery_"+selectedOrderItemId)&&document.getElementById("one-time-delivery_"+selectedOrderItemId).checked?this.updateORResetPrice(selectedOrderItemId,"","","AjaxUpdateOrderItemShopCart"):document.getElementById("store-pickup_"+selectedOrderItemId)&&document.getElementById("store-pickup_"+selectedOrderItemId).checked&&this.updateORResetPrice(selectedOrderItemId,"","","AjaxUpdateOrderItemShopCart")}},repeatDeliveryCheckout:function(e,t,o){if(o)if(1==document.querySelector('input[name="repeatDelivery"]:checked').value){var r="";void 0!=document.getElementById("repeat-delivery-freq-options")&&null!=document.getElementById("repeat-delivery-freq-options")&&(r=document.getElementById("repeat-delivery-freq-options").value);var n="",a="";""==n&&""!=r&&(n=r);""==r&&""!=n&&(r=n);null!=dojo.byId("userType")&&"G"==dojo.byId("userType").value&&(null!=localStorageHelper.get("payPalBA")&&"true"==localStorageHelper.get("payPalBA")||dojo.byId("petcoPaypalArea").parentNode.setAttribute("style","display:none"));this.updateORResetPriceCheckout(e,n,a,"AjaxUpdateOrderItemShopCart")}else{dojo.byId("petcoPaypalArea").parentNode.setAttribute("style","display:block");this.updateORResetPriceCheckout(e,"","","AjaxUpdateOrderItemShopCart")}},populateDateChange:function(e,t){var o=parseInt(e),r=parseInt(t);$("option",document.getElementById("repeat-delivery-date-options")).remove();for(var n=document.getElementById("repeat-delivery-date-options"),a=o;a<=r;a++){var i=document.createElement("option");i.text=a;n.add(i)}},disableDropDown:function(){var e=document.getElementById("repeat-delivery-freq-options");document.getElementById("one-time-delivery").checked?e.disabled=!0:e.disabled=!1},selectRD:function(){document.getElementById("repeat-delivery-radio").checked=!0},selectRDcheckbox:function(){document.getElementById("repeat-delivery-checkbox-"+selectedOrderItemId).checked=!0},selectRepeatDeliveryRadio:function(){document.getElementById("rd-radio-yes").checked=!0},updateORResetPriceWait:function(e,t,o){setTimeout(dojo.hitch(this,"updateORResetPrice",e,t,o),1500)},updateORResetPrice:function(e,t,o,r){var n=[];n.storeId=this.storeId;n.catalogId=this.catalogId;n.langId=this.langId;""!=t&&(n.rdFrequency=t);""!=o&&(n.rdInitialFirstOrder=o);n.priceChange=!0;n.orderItemId=e;n.callToODM="true";0!=$("#ignoreNewRowCreation_"+e).size()&&(n.isPersonalizationRow=$("#ignoreNewRowCreation_"+e).val());if($('input[type="radio"][name="bopusCartSelect_'+e+'"]:checked').size()>0&&"store-pickup"==$('input[type="radio"][name="bopusCartSelect_'+e+'"]:checked')[0].value){var a=$("#BOPUS_SHIPMODE"),i=$("#BOPUS_FFMCENTER");if(a.size()>0&&i.size()>0){n.shipModeId=a.val();n.fulfillmentCenterId=i.val();n.fromBopusPage=!0}}else if($('input[type="radio"]#store-pickup_'+e).size()>0){var d=$("#DEFAULT_FFMCENTER"),s=$("#DEFAULT_SHIPMODE");if(d.size()>0&&s.size()>0){n.shipModeId=s.val();n.fulfillmentCenterId=d.val();n.fromBopusPage=!1}}var l=dojo.cookie("isEASession");"yes"==l?n.calculationUsage="-1,-2,-3,-4,-5,-7":n.calculationUsage="-1,-2,-3,-4,-5,-6,-7";cursor_wait();""!=r?wc.service.invoke("AjaxUpdateOrderItemShopCartRDPromo",n):wc.service.invoke("AjaxUpdateOrderItem",n)},updateORResetPriceCheckout:function(e,t,o,r){
var n=[];n.storeId=this.storeId;n.catalogId=this.catalogId;n.langId=this.langId;""!=t&&(n.rdFrequency=t);""!=o&&(n.rdInitialFirstOrder=o);n.priceChange=!0;var a=e+"",i=a.split(",");if(i.length>1)for(var d=1;d<=i.length;d++)n["orderItemId_"+d]=i[d-1];else n.orderItemId=e;n.callToODM="true";n.calculationUsage="-1,-2,-3,-4,-5,-6,-7";cursor_wait();""!=r?wc.service.invoke("AjaxUpdateOrderItemShopCartRDPromo",n):wc.service.invoke("AjaxUpdateOrderItem",n)},clearAllErrorDivsForAddCreditCard:function(){var e=document.getElementById("paymentNickname_ERROR"),t=document.getElementById("cardNumber_ERROR"),o=document.getElementById("cardName_ERROR"),r=document.getElementById("cardCVV_ERROR"),n=document.getElementById("expMonth_ERROR"),a=document.getElementById("billingAddress_Error"),i=dojo.byId("paymentNickname_div"),d=dojo.byId("cardNumber_div"),s=dojo.byId("cardName_div"),l=dojo.byId("cardCVV_div"),c=dojo.byId("expMonth_div"),u=dojo.byId("billingAddress_div");e.innerHTML="";t.innerHTML="";o.innerHTML="";r.innerHTML="";n.innerHTML="";a.innerHTML="";i.setAttribute("class","form-group");d.setAttribute("class","form-group");s.setAttribute("class","form-group");l.setAttribute("class","form-group");c.setAttribute("class","form-group");u.setAttribute("class","form-group")},clearAllErrorDivsForAddShippingAddress:function(){$('label[for="shipping-address-nickname"]').removeClass("invalid valid");$("input#shipping-address-nickname").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-nickname").val("");$("div#shipping-address-nickname-err").html("");$('label[for="shipping-address-firstname"]').removeClass("invalid valid");$("input#shipping-address-firstname").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-firstname").val("");$("div#shipping-address-firstname-err").html("");$('label[for="shipping-address-lastname"]').removeClass("invalid valid");$("input#shipping-address-lastname").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-lastname").val("");$("div#shipping-address-lastname-err").html("");$('label[for="shipping-address-phone"]').removeClass("invalid valid");$("input#shipping-address-phone").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-phone").val("");$("div#shipping-address-phone-err").html("");$('label[for="shipping-address-address1"]').removeClass("invalid valid");$("input#shipping-address-address1").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-address1").val("");$("div#shipping-address-address1-err").html("");$('label[for="shipping-address-address2"]').removeClass("invalid valid");$("input#shipping-address-address2").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-address2").val("");$("div#address2Error").html("");$('label[for="shipping-address-city"]').removeClass("invalid valid");$("input#shipping-address-city").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-city").val("");$("div#shipping-address-city-err").html("");$('label[for="shipping-address-state"]').removeClass("invalid valid");$("input#shipping-address-state").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-state").val("");$("div#shipping-address-state-err").html("");$('label[for="shipping-address-zipCode"]').removeClass("invalid valid");$("input#shipping-address-zipCode").removeClass("invalid valid").addClass("form-control");$("input#shipping-address-zipCode").val("");$("div#shipping-address-zipCode-err").html("");$("div#shipping_address_page_error div div div#alert-danger").html("");$("div#shipping_address_page_error").removeClass("show");$("div#shipping_address_page_error").addClass("no-show")},clearPromotionLessThanZero:function(){var e=1;dojo.forEach(dojo.query("span#rdPriceDiv span.product-price-banner"),function(t){var o=t.innerText.toUpperCase().replace("SAVE","").replace("UP","").replace("TO","").replace("%","").trim();!isNaN(o)&&1*o<e&&(t.style.display="none")});dojo.forEach(dojo.query("div.product-price span.product-price-save"),function(t){var o=t.innerText.toUpperCase().replace("SAVE","").replace("UP","").replace("TO","").replace("%","").trim();!isNaN(o)&&1*o<e&&(t.style.display="none")})},closePopupFromLogonModelPopup:function(){var e=dojo.byId("isRDOrder");if(null!=dojo.byId("isLoginPopUpForceFullyClosed")&&null!=e&&"true"==e.value){dojo.byId("isLoginPopUpForceFullyClosed").value="true";var t="";dojo.forEach(dojo.query('input[type="hidden"][id^="orderItem_"]'),function(e){t=""==t?e.value:t+","+e.value});""!=t&&this.updateORResetPriceCheckout(t,"","","AjaxUpdateOrderItemShopCart");null!=dojo.byId("isUniqueEmail_forChekingRdOrder")&&"false"==dojo.byId("isUniqueEmail_forChekingRdOrder").value&&CheckoutHelperJS.createAccount(!1)}},showModal:function(e,t){require(["dojo/dom-style","dojo/query"],function(o,r){var n=(petcoCommonJS.getWindowSize(),document.getElementById("modal-"+e));n=n?n:document.getElementById(e);document.body.style.overflow="hidden";petcoCommonJS.showBgScreen();r(".modal-form").style.display="none";document.getElementById(e).style.display="block";if("string"==typeof t){r(".petco-modal .form-modal-form").removeClass("form-modal-padding-deep").removeClass("form-modal-padding-shallow");r(".petco-modal .form-modal-form").addClass("form-modal-padding-"+t)}n.style.display="block";n.classList.add("in");n.setAttribute("tabindex","-1");n.setAttribute("aria-hidden","false");n.setAttribute("role","dialog");n.focus();o.set(n,{left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"});if("undefined"!=typeof window.ontouchstart&&document.documentElement.classList.contains("dj_safari")){document.body.style.overflow="initial";document.documentElement.classList.add("fixed");if(window.pageYOffset){var a=window.pageYOffset;document.body.style.top=-a+"px"}}document.addEventListener("focus",function(e){if(!n.contains(e.target)){e.stopPropagation();n.focus()}},!0)})},submitFindDeactiveUserSearchForm:function(){submitRequest()&&document.getElementById("FindDeactiveUserSearchForm").submit()},AddMembership2ShopCartAjax:function(e){var t=[];t.storeId=this.storeId;t.catalogId=this.catalogId;t.langId=this.langId;t.orderId=".";t.calculationUsage="-1";t.inventoryValidation="true";t.isMembershipOrder="true";t.rdFrequency="1_M";t.quantity="1";t.catEntryId=e;if(null!=e){if(!submitRequest())return;cursor_wait();wc.service.invoke("AddOrderItem",t);productDisplayJS.baseItemAddedToCart=!0}},hideModal:function(e){var t=document.getElementById(e);t.style.display="none";t.classList.remove("in");document.body.style.overflow="";document.body.style.position="";petcoCommonJS.hideBgScreen();cursor_clear();if("undefined"!=typeof window.ontouchstart&&document.documentElement.classList.contains("dj_safari")){document.documentElement.classList.remove("fixed");var o=parseInt(document.body.style.top,10);document.body.scrollTop=-o}t.removeAttribute("tabindex");t.removeAttribute("role");t.setAttribute("aria-hidden","true");"modal-notification-alert"==e&&$("#modal-notification-alert-message").html("")},showBgScreen:function(){var e=document.getElementById("form-modal-screen");e.style.display="block"},hideBgScreen:function(){var e=document.getElementById("form-modal-screen");e.style.display="none"},getWindowSize:function(){var e=window,t=document,o=t.documentElement,r=t.getElementsByTagName("body")[0],n=e.innerWidth||o.clientWidth||r.clientWidth;wH=e.innerHeight||o.clientHeight||r.clientHeight;return[n,wH]},bopusCartEnableRadio:function(){try{var e=$("article.cart-product-item");if(e.length>0)try{$('a[id^="store-pickup_"]').on("click",function(e){var t={},o=e.target.id,r=o.replace("store-pickup_","");void 0!=dojo.byId("removedSKUID_"+r)&&null!=dojo.byId("removedSKUID_"+r)&&(t.product_id=dojo.byId("removedSKUID_"+r).value);void 0!=dojo.byId("removedPrdName_"+r)&&null!=dojo.byId("removedPrdName_"+r)&&(t.product_name=dojo.byId("removedPrdName_"+r).value);$("#product_"+r).size()>0&&(t.product_parent_sku=$("#product_"+r).val());void 0!=dojo.byId("rd_sku_"+r)&&null!=dojo.byId("rd_sku_"+r)&&(t.product_sku=dojo.byId("rd_sku_"+r).value);t.event_name="cart_to_one_time_delivery";pushEvent(t)});$('a[id^="one-time_"]').on("click",function(e,t){var o={},r=e.target.id,n=r.replace("one-time_","");void 0!=dojo.byId("removedSKUID_"+n)&&null!=dojo.byId("removedSKUID_"+n)&&(o.product_id=dojo.byId("removedSKUID_"+n).value);void 0!=dojo.byId("removedPrdName_"+n)&&null!=dojo.byId("removedPrdName_"+n)&&(o.product_name=dojo.byId("removedPrdName_"+n).value);$("#product_"+n).size()>0&&(o.product_parent_sku=$("#product_"+n).val());void 0!=dojo.byId("rd_sku_"+n)&&null!=dojo.byId("rd_sku_"+n)&&(o.product_sku=dojo.byId("rd_sku_"+n).value);o.event_name="cart_to_bopus";pushEvent(o)})}catch(e){return!0}else{if($(".noRdPdpDesign").length>0)return;$(".repeat-delivery-select_cart").each(function(e,t){var o=t.id.replace("repeat-delivery-select_",""),r=$("input[type='radio'][name='bopusCartSelect_"+o+"']");r.parents(".radio").removeClass("selected");r.filter(":not(:checked)").removeAttr("checked");r.filter(":checked").attr("checked","checked");r.filter(":checked").parents(".radio").addClass("selected");$("#cart-store-pickup-dropdown_"+o).length>0&&($("#store-pickup_"+o+":checked.store-pickup-option-input").length>0?$("#cart-store-pickup-dropdown_"+o).removeClass("half").addClass("open"):$("#cart-store-pickup-dropdown_"+o).addClass("half").removeClass("open"));r.on("change",function(e){try{var t={},n=e.target.id;void 0!=dojo.byId("removedSKUID_"+o)&&null!=dojo.byId("removedSKUID_"+o)&&(t.product_id=dojo.byId("removedSKUID_"+o).value);void 0!=dojo.byId("removedPrdName_"+o)&&null!=dojo.byId("removedPrdName_"+o)&&(t.product_name=dojo.byId("removedPrdName_"+o).value);$("#product_"+o).size()>0&&(t.product_parent_sku=$("#product_"+o).val());void 0!=dojo.byId("rd_sku_"+o)&&null!=dojo.byId("rd_sku_"+o)&&(t.product_sku=dojo.byId("rd_sku_"+o).value);n.indexOf("one-time-delivery")!=-1&&(t.event_name="cart_to_one_time_delivery");if(n.indexOf("repeat-delivery-radio")!=-1){t.event_name="cart_to_repeat_delivery";t.product_delivery_type="repeat";var a="";void 0!=dojo.cookie("WC_CartOrderId_10151")&&null!=dojo.cookie("WC_CartOrderId_10151")&&(a=dojo.cookie("WC_CartOrderId_10151"));t.cart_id=a;var i="",d="";if(void 0!=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId)&&null!=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId)){i=document.getElementById("repeat-delivery-freq-options-"+selectedOrderItemId).value;if(""!=i){var s=i.split("_");"W"==s[1]?d=s[0]+" Weeks":"M"==s[1]&&(d=s[0]+" Months")}}t.product_rd_schedule_time=d}n.indexOf("store-pickup")!=-1&&(t.event_name="cart_to_bopus");pushEvent(t)}catch(e){return!0}r.parents(".radio").removeClass("selected");r.filter(":not(:checked)").removeAttr("checked");r.filter(":checked").attr("checked","checked");r.filter(":checked").parents(".radio").addClass("selected");$("#cart-store-pickup-dropdown_"+o).length>0&&(e.currentTarget.classList.contains("store-pickup-option-input")?$("#cart-store-pickup-dropdown_"+o).removeClass("half").addClass("open"):$("#cart-store-pickup-dropdown_"+o).addClass("half").removeClass("open"))})});$('.repeat-delivery-select_cart .store-pickup p.lsa-hours a[data-toggle="popover"]').popover({html:!0})}petcoCommonJS.chkBopusInventoryAvailabilityInCart()}catch(e){console.log("Error>>>"+e)}},chkBopusInventoryAvailabilityInCart:function(){var e=$("#bopusPhysicalStoreSelected").val();if("undefined"!=typeof e){var t={};$(".bopusLineitemsToChkInv").each(function(e,o){var r=o.value.split("|"),n=[];"undefined"!=typeof t[r[0]]&&(n=t[r[0]]);n.push(o.value);t[r[0]]=n});var o="10151",r="",n=window.location.protocol,a=window.location.hostname,i=window.location.port,d="/wcs/resources/store/"+o+"/yih/inventoryavailability/";$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(d="/wcs/previewresources/store/"+o+"/petcostorelocator/");""!=i&&(a=a+":"+i);var s="";for(var l in t)s=""==s?l:s+","+l;if(""!=s){petcoCommonJS.isDisableCheckOutButtonForBopus=!1;petcoCommonJS.isEnableCheckOutButtonForBopus=!1;var c=$("#inventorySystem").val();if(c==-4){var u=new Object;u.itemId=s;u.storeLoc=e;u.fetchStoreInventory=!0;dojo.xhrPost({url:getAbsoluteURL()+"GetInventoryStatusByIDView",handleAs:"json-comment-filtered",content:u,service:this,load:function(e){petcoCommonJS.bopusShowAvailability(e,t)},error:function(e,t){petcoCommonJS.disableCheckoutButton();petcoCommonJS.showDefaultInventoryTxt()}})}else{var r=n+"//"+a+d+s+"/?physicalStoreId="+e;$.ajax({url:r,type:"GET",cache:!1,contentType:"application/json",dataType:"json",data:"",success:function(e){petcoCommonJS.bopusPhysicalStoreInventoryLoad(e,t)},error:function(){petcoCommonJS.disableCheckoutButton();petcoCommonJS.showDefaultInventoryTxt()}})}}}else{elCARTContainer=$("article.cart-product-item");elCARTContainer.length>0&&(petcoCommonJS.isDisableCheckOutButtonForBopus=!1)}},showDefaultInventoryTxt:function(){$('span[id^="cart_bopusdeailsInStockSelectable_"]').removeClass("show");$('span[id^="cart_bopusdeailsInStockSelectable_"]').addClass("hide");$('span[id^="cart_bopusdeailsLowInventorySelectable_"]').removeClass("show");$('span[id^="cart_bopusdeailsLowInventorySelectable_"]').addClass("hide");$('span[id^="cart_bopusdeailsNotAvailableSelectable_"]').removeClass("hide");$('span[id^="cart_bopusdeailsNotAvailableSelectable_"]').addClass("show")},disableCheckoutButton:function(){if($('input[id^="store-pickup_"]:checked').length>0){$("div.vendor-checkout-bottom .btn-paypal").addClass("disabled");$("div.petco-checkout #continueReviewPage").addClass("disabled");petcoCommonJS.isDisableCheckOutButtonForBopus=!0}else{petcoCommonJS.enableCheckoutButton();petcoCommonJS.isDisableCheckOutButtonForBopus=!1}},enableCheckoutButton:function(){var e=!1,t=!1;$.each($('input[id^="inStoreProductFlag_"]'),function(t,o){var r=o.id.split("_"),n=r[r.length-1];if("store-pickup"!=$("input[name=bopusCartSelect_"+n+"]:checked").val()&&"true"!=$("input[name=bopus-item_"+n+"]").val()){petcoCommonJS.isDisableCheckOutButtonForBopus=!0;e=!0;$("#deliveryMethodError_"+n).removeClass("hide");$("#deliveryMethodError_"+n+" .promo-error-text").html(MessageHelper.messages.ERR_DELIVERY_METHOD);$("div.vendor-checkout-bottom .btn-paypal").addClass("disabled");$("div.petco-checkout #continueReviewPage").addClass("disabled")}});if($("#outOfStockItemExists").length>0){t=$("#outOfStockItemExists").val();petcoCommonJS.isDisableCheckOutButtonForBopus=!0}if(!e&&!t){$("div.vendor-checkout-bottom .btn-paypal").removeClass("disabled");$("div.petco-checkout #continueReviewPage").removeClass("disabled");petcoCommonJS.isDisableCheckOutButtonForBopus=!1}},bopusShowAvailability:function(e,t){if("undefined"!=typeof e.inStoreInventory){var o=e.inStoreInventory.stores,r=!1;for(var n in o){var a=o[n].catentryId;"undefined"!=typeof a&&"undefined"!=typeof o[n].alertLevel?petcoCommonJS.showAvailabilityTest(t[a],o[n].alertLevel.toUpperCase(),o[n].availableQuantity):r=!0}r?petcoCommonJS.disableCheckoutButton():petcoCommonJS.isDisableCheckOutButtonForBopus?petcoCommonJS.disableCheckoutButton():petcoCommonJS.enableCheckoutButton()}else petcoCommonJS.disableCheckoutButton()},bopusPhysicalStoreInventoryLoad:function(e,t){var o=e.inStoreInventory;if("undefined"!=typeof o){var r=!1;for(var n in o){var a=o[n].catEntryId;"undefined"!=typeof a&&"undefined"!=typeof o[n].alertLevel?petcoCommonJS.showAvailabilityTest(t[a],o[n].alertLevel.toUpperCase(),o[n].availableQuantity):r=!0}r?petcoCommonJS.disableCheckoutButton():petcoCommonJS.isDisableCheckOutButtonForBopus?petcoCommonJS.disableCheckoutButton():petcoCommonJS.enableCheckoutButton()}else petcoCommonJS.disableCheckoutButton()},isDisableCheckOutButtonForBopus:!1,isEnableCheckOutButtonForBopus:!1,showAvailabilityTest:function(e,t,o){for(var r=!1,n=!1,a=$(".BOPUSAreaRestictionState"),i={},d=$(".hidecssclassBOPUSResriction"),s=$(".bopusStoreState"),l=0;l<e.length;l++){var c=e[l].split("|"),u="_"+c[0]+"_"+c[1],p=$("input#store-pickup_"+c[1]+":checked").length,m="cart_bopusdeailsInStockSelectable"+u,g="cart_bopusdeailsNotAvailableSelectable"+u,f="cart_bopusdeailsLowInventorySelectable"+u,h=parseInt(c[2]),I=h;void 0!=o&&null!=o&&(I=parseInt(o));if(a.length>0){var y=a[0].value.split(",");d.length>0&&$.each(d,function(e,t){i[t.value]="yes"});if("undefined"!=typeof i[c[0]]&&s.length>0)for(var v=0;v<y.length;v++)y[v]==s[0].value&&(t="RED")}"GREEN"==t&&h>I&&(t="YELLOW");if("GREEN"==t){$('[id="'+m+'"]').addClass("show");$('[id="'+m+'"]').removeClass("hide");$('[id="'+g+'"]').addClass("hide");$('[id="'+g+'"]').removeClass("show");$('[id="'+f+'"]').addClass("hide");$('[id="'+f+'"]').removeClass("show");p>0&&(r=!0)}else if("RED"==t){$('[id="'+m+'"]').addClass("hide");$('[id="'+m+'"]').removeClass("show");$('[id="'+g+'"]').addClass("show");$('[id="'+g+'"]').removeClass("hide");$('[id="'+f+'"]').addClass("hide");$('[id="'+f+'"]').removeClass("show");p>0&&(n=!0)}else{$('[id="'+m+'"]').addClass("hide");$('[id="'+m+'"]').removeClass("show");$('[id="'+g+'"]').addClass("hide");$('[id="'+g+'"]').removeClass("show");$('[id="'+f+'"]').addClass("show");$('[id="'+f+'"]').removeClass("hide");p>0&&(n=!0)}}n?petcoCommonJS.isDisableCheckOutButtonForBopus=!0:r&&!petcoCommonJS.isDisableCheckOutButtonForBopus&&(petcoCommonJS.isEnableCheckOutButtonForBopus=!0)},changeStlocIdForCheckout:function(e){var t=$("article.cart-product-item");if(t.length>0){var o=$("#BOPUS_FFMCENTER");if(o.length>0){var r="",n=window.location.protocol,a=window.location.hostname,i=window.location.port,d="/wcs/resources/store/"+petcoCommonJS.storeId+"/petcostorelocator/";""!=i&&(a=a+":"+i);$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(d="/wcs/previewresources/store/"+petcoCommonJS.storeId+"/petcostorelocator/");r=n+"//"+a+d+"getstlocaddrdtls?stlocId="+e;$.ajax({url:r,type:"GET",contentType:"application/json",dataType:"json",success:function(e){o.val(e.bopusAddressDetails.FFMCENTER);petcoCommonJS.updateBopusStoreinCart()},error:function(e){console.log(storeNLS.INV_STATUS_RETRIEVAL_ERROR)}})}}else if($('input[type="radio"][id^="store-pickup_"]').length>0)if($('input[type="radio"][id^="store-pickup_"]:checked').length>0){var o=$("#BOPUS_FFMCENTER");if(o.length>0){var r="",n=window.location.protocol,a=window.location.hostname,i=window.location.port,d="/wcs/resources/store/"+petcoCommonJS.storeId+"/petcostorelocator/";""!=i&&(a=a+":"+i);$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(d="/wcs/previewresources/store/"+petcoCommonJS.storeId+"/petcostorelocator/");r=n+"//"+a+d+"getstlocaddrdtls?stlocId="+e;$.ajax({url:r,type:"GET",contentType:"application/json",dataType:"json",success:function(e){o.val(e.bopusAddressDetails.FFMCENTER);$('input[type="radio"][id^="store-pickup_"]:checked').trigger("click")},error:function(e){console.log(storeNLS.INV_STATUS_RETRIEVAL_ERROR)}})}}else if($('input[type="radio"][id^="one-time-delivery_"]:checked').length>0){setTimeout("cursor_wait()",500);$('input[type="radio"][id^="one-time-delivery_"]:checked').trigger("click")}else if($('input[type="radio"][id^="repeat-delivery-radio_"]:checked').length>0){setTimeout("cursor_wait()",500);$('input[type="radio"][id^="repeat-delivery-radio_"]:checked').trigger("click")}},updateBopusStoreinCart:function(){var e="";$("div#cart_bopus_items p#store_pickup_item").each(function(){var t=$(this).find("a").attr("id");if(void 0!=typeof t){var o=t.split("_");e=o[1]}});if(""!=e){var t=[];t.storeId=this.storeId;t.catalogId=this.catalogId;t.langId=this.langId;t.orderItemId=e;var o=$("#BOPUS_SHIPMODE"),r=$("#BOPUS_FFMCENTER");if(o.size()>0&&r.size()>0){t.shipModeId=o.val();t.fulfillmentCenterId=r.val();t.fromBopusPage=!0}var n=dojo.cookie("isEASession");"yes"==n?t.calculationUsage="-1,-2,-3,-4,-5,-7":t.calculationUsage="-1,-2,-3,-4,-5,-6,-7";cursor_wait();wc.service.invoke("AjaxUpdateOrderItemShopCartRDPromo",t)}},radioButtonSelectOption:function(e,t,o){cmManuallyTriggerEventTrack(e);selectedOrderItemId=t;petcoCommonJS.repeatDeliveryCartSelected();petcoCommonJS.repeatDeliveryShopCart(o,!0)},changeDeliveryType:function(e,t,o){cmManuallyTriggerEventTrack(e);selectedOrderItemId=t;var r=[];r.storeId=this.storeId;r.catalogId=this.catalogId;r.langId=this.langId;r.priceChange=!0;r.orderItemId=selectedOrderItemId;r.callToODM="true";0!=$("#ignoreNewRowCreation_"+selectedOrderItemId).size()&&(r.isPersonalizationRow=$("#ignoreNewRowCreation_"+selectedOrderItemId).val());if("store-pickup"==o){var n=$("#BOPUS_SHIPMODE"),a=$("#BOPUS_FFMCENTER");if(n.size()>0&&a.size()>0){r.shipModeId=n.val();r.fulfillmentCenterId=a.val();r.fromBopusPage=!0}}else if("one-time"==o){var i=$("#DEFAULT_FFMCENTER"),d=$("#DEFAULT_SHIPMODE");if(i.size()>0&&d.size()>0){r.shipModeId=d.val();r.fulfillmentCenterId=i.val();r.fromBopusPage=!1}}var s=dojo.cookie("isEASession");"yes"==s?r.calculationUsage="-1,-2,-3,-4,-5,-7":r.calculationUsage="-1,-2,-3,-4,-5,-6,-7";cursor_wait();wc.service.invoke("AjaxUpdateOrderItemShopCartRDPromo",r)},showModalNotificationAlert:function(e,t){$("#modal-notification-alert-message").html(e);"success"==t?$("#modal-notification-alert .alert").addClass("success-box"):$("#modal-notification-alert .alert").addClass("error-box");petcoCommonJS.showModal("modal-notification-alert")},applyRating:function(){$("#prodrec .prod-tile").each(function(){var e=$(this).find("#star_input").val(),t=5;if(!isNaN(e)){var o=Math.round(100*e/t);o>100&&(o=100);$(this).find("#star_limiter").css("width",o+"%")}})},updateItemButton:function(e){null!=$("#existingCatentryId")&&void 0!=$("#existingCatentryId")&&e&&$("#existingCatentryId").size()>0&&$("#existingQty").size()>0&&$("#existingQty").val()==$("#quantity").val()&&$("#existingCatentryId").val()==$("#selectedCatentryId").val()&&(e=!1);if(null!=document.getElementById("allowedChange")&&void 0!=document.getElementById("allowedChange")){var t=document.getElementById("allowedChange").value;e||"true"==t?$("#updateItemBtn").removeAttr("disabled"):1==parseInt($("#quantity").val())&&$("#existingQty").val()!=$("#quantity").val()?$("#updateItemBtn").removeAttr("disabled"):$("#updateItemBtn").attr("disabled","disabled")}},csrRunAsSession:function(e){window.localStorage.removeItem("NEXT_REPEAT_DELIVERY_DATE");window.localStorage.removeItem("PALS_POINTS");document.location.href=encodeURI(e)},dataFilter:function(e){return e.replace(/(\/\*|\*\/)/g,"")},getAdobeTargetContent:function(e,t,o){var r="PetcoAdobeABTesting?storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId,n={};n.targetTest=e;var a=dojo.cookie("isOBOSession"),i=dojo.cookie("isNewEASession");"yes"!=a&&"yes"!=i?$.ajax({url:r,type:"POST",cache:!1,data:n,success:function(r){console.log("Success adobe target="+e);var n=petcoCommonJS.dataFilter(r),a=jQuery.parseJSON(n);if(null!=a.adobeTargetResult){var i=a.adobeTargetResult.option;void 0!=typeof i&&""!=i||(i=o);sessionStorage.setItem(t,i);Visitor.getInstance(a.adobeTargetResult.organizationId,{serverState:a.adobeTargetResult.visitorState})}else sessionStorage.setItem(t,o)},error:function(){console.log("error while connecting to adobe target="+e);sessionStorage.setItem(t,o)}}):sessionStorage.setItem(t,o)},setATVisitorInstance:function(){var e=dojo.cookie("AT_organizationId"),t=dojo.cookie("AT_visitorState");void 0!=e&&void 0!=t&&Visitor.getInstance(dojo.cookie("AT_organizationId"),{serverState:dojo.cookie("AT_visitorState")})},getNearestStoreInfoForHeader:function(e,t,o,r,n,a){petcoCommonJS.locationConfig.expirationMin=e;petcoCommonJS.locationConfig.isGoogleGeoAPI=t;petcoCommonJS.locationConfig.HTML5GeoTimeout=o;petcoCommonJS.locationConfig.XHRTimeout=r;petcoCommonJS.locationConfig.googleAPIUrl=n;petcoCommonJS.locationConfig.googleAPIKey=a;petcoCommonJS.userLocation.latitude=dojo.cookie("Edgescape-Lat");petcoCommonJS.userLocation.longitude=dojo.cookie("Edgescape-Long");null==localStorage.getItem("petcostores_latitude_longitude")&&petcoCommonJS.fnGetUserLocation();var i=dojo.cookie("WC_UserType"),d=dojo.cookie("WC_UserId"),s=null,l="pref_store_"+d,c="nearestStore_"+d;if("R"==i){var s=null!=localStorage.getItem(l)?jQuery.parseJSON(localStorage.getItem(l)):null;null==s&&petcoCommonJS.getPreferredStore(d)}setTimeout(function(){var e=jQuery.parseJSON(localStorage.getItem("petcostores_latitude_longitude"));if(null!=e&&e.hasOwnProperty("latitude")&&e.hasOwnProperty("longitude")){petcoCommonJS.userLocation.latitude=e.latitude;petcoCommonJS.userLocation.longitude=e.longitude}if(null==sessionStorage.getItem(c)||!e.hasOwnProperty("latitude")||!e.hasOwnProperty("longitude")){var t="",o="/wcs/resources/store/"+$("#storeId").val()+"/petcostorelocator/getAllStoresLatLong",r=window.location.hostname,n=window.location.port;$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(o="/wcs/previewresources/store/"+$("#storeId").val()+"/petcostorelocator/getAllStoresLatLong");""!=n&&(r=r+":"+n);t=window.location.protocol+"//"+r+o;$.get(t,"json").done(function(e){petcoCommonJS.getNearestStoreForHeader(e,petcoCommonJS.userLocation);setTimeout(function(){petcoLocation.populateCity()},500)})}},1e4)},getNearestStoreForHeader:function(e,t){var o=e.store,r=null,n=null,a=dojo.cookie("WC_UserType"),i=dojo.cookie("WC_UserId"),d=null,s="pref_store_"+i,l="nearestStore_"+i,d=null!=localStorage.getItem(s)?jQuery.parseJSON(localStorage.getItem(s)):null;$.each(o,function(e,t){if("R"===a&&null!=d){if(d.prefStore==t.ID){n=t.SN;return!0}}else{var o=petcoCommonJS.distance(t,petcoCommonJS.userLocation);t.distance=o;if(r){if(parseFloat(o)<parseFloat(r)){r=o;n=t.SN}}else{r=o;n=t.SN}}});window.sessionStorage&&sessionStorage.setItem(l,n);return n},distance:function(e,t){return parseFloat(Math.sqrt(Math.pow(69.1*(e.LA-t.latitude),2)+Math.pow(69.1*((t.longitude-e.LO)*Math.cos(e.LA/57.3)),2))).toFixed(2)},getPreferredStore:function(e){var t="",o="/wcs/resources/store/"+$("#storeId").val()+"/petcostorelocator/getUserPrefStore",r=window.location.hostname,n=window.location.port;$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(o="/wcs/previewresources/store/"+$("#storeId").val()+"/petcostorelocator/getUserPrefStore");""!=n&&(r=r+":"+n);t=window.location.protocol+"//"+r+o;$.get(t,"json").done(function(t){null!=t.prefStore&&petcoCommonJS.fnPrefStoreSetLocalStorage(t.prefStore,e)})},fnPrefStoreSetLocalStorage:function(e,t){var o="pref_store_"+t;localStorage.removeItem(o);_timestamp=(new Date).getTime();if(""!=e){var r={};r.prefStore=e;var n=7776e6;r.timestamp=_timestamp+n;localStorage.setItem(o,JSON.stringify(r))}},fnGetUserLocation:function(){var e=1e4;if(navigator&&navigator.geolocation){var t={enableHighAccuracy:!0,timeout:e};navigator.geolocation.getCurrentPosition(petcoCommonJS.fnProcessGeoResponse,petcoCommonJS.fnProcessGeoError,t);jQuery(window).load(function(){setTimeout(function(){if(!petcoCommonJS.IS_HTML5_CALL_COMPLETED){var e={};e.code=5;petcoCommonJS.fnProcessGeoError(e);petcoCommonJS.IS_HTML5_CALL_COMPLETED=!0}},e)})}},fnProcessGeoResponse:function(e){if(!petcoCommonJS.IS_HTML5_CALL_COMPLETED){petcoCommonJS.IS_HTML5_CALL_COMPLETED=!0;_geoLatitude=e.coords.latitude;_geoLongitude=e.coords.longitude;petcoCommonJS.fnLatitudeLongitudeSetLocalStorage(_geoLatitude,_geoLongitude)}},fnProcessGeoError:function(e){if(!petcoCommonJS.IS_HTML5_CALL_COMPLETED){petcoCommonJS.IS_HTML5_CALL_COMPLETED=!0;var t=e.code;t&&("5"==t?petcoCommonJS.fnGetAkamaiLocation():"5"!=t&&petcoCommonJS.fnGoogleGeoLocation())}},fnGoogleGeoLocation:function(){$.ajax({url:petcoCommonJS.locationConfig.googleAPIUrl+petcoCommonJS.locationConfig.googleAPIKey,type:"POST",cache:!1,contentType:"application/json",dataType:"json",data:JSON.stringify({}),timeout:petcoCommonJS.locationConfig.XHRTimeout,success:function(e){_geoLatitude=e.location.lat;_geoLongitude=e.location.lng;petcoCommonJS.fnLatitudeLongitudeSetLocalStorage(_geoLatitude,_geoLongitude)},error:function(e){petcoCommonJS.fnGetAkamaiLocation()}})},fnGetAkamaiLocation:function(){petcoCommonJS.fnLatitudeLongitudeSetLocalStorage(petcoCommonJS.userLocation.latitude,petcoCommonJS.userLocation.longitude)},fnLatitudeLongitudeSetLocalStorage:function(e,t){localStorage.removeItem("petcostores_latitude_longitude");if(""!=e&&""!=t){var o={};o.latitude=e;o.longitude=t;var r=7776e6;_timestamp=(new Date).getTime();o.timestamp=_timestamp+r;localStorage.setItem("petcostores_latitude_longitude",JSON.stringify(o))}},fnOpenPromotionDesc:function(e){var t="",o="/wcs/resources/store/"+$("#storeId").val()+"/promotion/description/"+e,r=window.location.hostname,n=window.location.port;$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(o="/wcs/previewresources/store/"+$("#storeId").val()+"/promotion/description/"+e);""!=n&&(r=r+":"+n);t=window.location.protocol+"//"+r+o;$.get(t,"json").done(function(e){var t="Promotion details not available";null!=e&&""!=e.longDescription&&(t=e.longDescription);$("#petco-promo-desc-modal").html(t);petcoCommonJS.showModal("promoDesc")}).fail(function(){$("#petco-promo-desc-modal").html("Promotion details not available");petcoCommonJS.showModal("promoDesc")})},assign_catentry_value:function(e){null!=document.getElementById("catEntryIdForBOPUSModal")&&(document.getElementById("catEntryIdForBOPUSModal").value=e)}};dojo.topic.subscribe("ajax_usertype_changed",function(usertypes){var oNeareststores=JSON.parse(localStorage.getItem("petcostores"));if(null!=oNeareststores&&"undefined"!=typeof oNeareststores.userDetails){var userdetails=JSON.parse(oNeareststores.userDetails);if("undefined"!=typeof userdetails.USERTYPE&&"undefined"!=typeof userdetails.SHOW_PREFERREDSTORE&&"Y"==userdetails.SHOW_PREFERREDSTORE.toUpperCase()){var USERTYPE=userdetails.USERTYPE;if(usertypes!=USERTYPE){localStorage.removeItem("petcostores");var hostName=document.location.host,domainName=hostName.substring(hostName.lastIndexOf(".",hostName.lastIndexOf(".")-1)),date=new Date;date.setTime(date.getTime()+-864e7);expires="; expires="+date.toGMTString();document.cookie="WC_physicalStores="+expires+";path=/";var petcoNearestLocationsInitScript=document.getElementById("petcoNearestLocationsInitScript");if(null!=petcoNearestLocationsInitScript){eval(petcoNearestLocationsInitScript.innerHTML);dojo.topic.subscribe("ChangeBasedOnLocationCallCompleted",function(){var e=$('div[data-pageType="product-detail-page"]'),t=$("div#bopusInfoTabInPlp_conatiner");t.length>0&&dojo.topic.publish("Facet_Update","");e.length>0&&dojo.topic.publish("DefiningAttributes_Resolved",productDisplayJS.bopusShowStoreDetailsCatEntryId,productDisplayJS.bopusShowStoreDetailsProductId)})}}}}});$(document).ready(function(){$(".single-reason").click(function(){$(".reason-button-container").hide();$(".sub-reason-container input:radio:checked").each(function(){$(this).prop("checked",!1)});if($(this).parent().hasClass("no-sub-reason")){var e=$(this).attr("id");$(".sub-reason-container").hide();$("#subreasons_"+e).show();$("#repeatDeliveryCancellationBtn").removeAttr("disabled");$(".rd-cancellation-button-container").hide();$(".reason-button-container").html("");if($(this).parent().hasClass("other-reason")){$(this).next().next(".reason-button-container").html($(".rd-cancellation-button-container").html());$(this).next().next(".reason-button-container").show()}else{$(this).next(".reason-button-container").html($(".rd-cancellation-button-container").html());$(this).next(".reason-button-container").show()}}else{$("#repeatDeliveryCancellationBtn").attr("disabled","disabled");$(".rd-cancellation-button-container").show();var e=$(this).attr("id");$(".sub-reason-container").hide();$("#subreasons_"+e).show();$(".reason-button-container").html("")}});$(".single-sub-reason").click(function(){$(".reason-button-container").hide();$("#repeatDeliveryCancellationBtn").removeAttr("disabled");$(".rd-cancellation-button-container").hide();$(".reason-button-container").html("");$(this).next(".reason-button-container").html($(".rd-cancellation-button-container").html());$(this).next(".reason-button-container").show();
});$(".product_quantity_input").keyup(function(){""!=$(this).val()&&$(this).val()<0&&$(this).val("1")});$(document).on("keyup",".product_quantity_input",function(e){""!=$(this).val()&&$(this).val()<0&&$(this).val("1")});$(".product_quantity_input").blur(function(){if(""==$(this).val()||$(this).val()<0){$(this).val("1");$(this).trigger("change");localStorage.setItem("qtyChangedOnBlur","1");"quantity"==$(this).attr("id")&&petcoCommonJS.updateItemButton(!0)}});$(document).on("blur",".product_quantity_input",function(e){if(""==$(this).val()||$(this).val()<0){$(this).val("1");$(this).trigger("change");localStorage.setItem("qtyChangedOnBlur","1");"quantity"==$(this).attr("id")&&petcoCommonJS.updateItemButton(!0)}});$("input[maxlength]").on("textInput",function(e){var t=$(this);t.val().length>=parseInt(t.attr("maxlength"),10)&&e.preventDefault()});var e=.5*$(window).width(),t=.7*$(window).height(),o=window.matchMedia("(max-width: 768px)").matches;if(!o){$("#look-ahead").width(e);$("#look-ahead").height(t)}});$(document).keyup(function(e){if($(".petco-modal").hasClass("in")){var t=$(".petco-modal.in")[0].getAttribute("id");27==e.keyCode&&t&&petcoCommonJS.hideModal(t)}});$(document).mouseup(function(e){if($(".petco-modal").hasClass("in")){var t=$(".petco-modal.in")[0].getAttribute("id"),o=$("#"+t);if(t&&"modal-cartListItems"==t&&!o.is(e.target)&&0===o.has(e.target).length){trackATCInterstitailClick("modal_click_away");petcoCommonJS.hideModal(t)}}});window.onload=function(){function e(){this.removeEventListener("play",e,!1);document.getElementById("promotionTitle").style.display="none"}function t(){this.removeEventListener("ended",t,!1);document.getElementById("videoScreen").style.display="none";document.getElementById("videoFinished").style.display="block"}var o=document.getElementById("videoScreen");if(o)if(o.canPlayType&&(o.canPlayType("video/mp4")||o.canPlayType("video/ogg")))if(o.addEventListener){o.addEventListener("play",e,!1);o.addEventListener("ended",t,!1)}else{o.attachEvent("play",e,!1);o.attachEvent("ended",t,!1)}else document.getElementById("promotionTitle").style.display="none"};dojo.addOnLoad(function(){requestSubmitted=!1;dojo.query("div[dojoType]").forEach(function(e,t,o){addToWidgetsList(e.id)});parseAllWidgets()});$(document).ready(function(){if("undefined"==window.pagetype||"home"==!window.pagetype){requestSubmitted=!1;petcoLocation.populateCity();dojo.topic.subscribe("cookieAddedForPhysicalStoreId",function(){petcoLocation.populateCity()})}});var activeElements={},MouseObserver={hoverTimeout:void 0,hoverDelay:200},keyboardHelper=function(){var e={ENTER:13,ESCAPE:27,SPACEBAR:32,LEFTARROW:37,UPARROW:38,RIGHTARROW:39,DOWNARROW:40};return{keys:e,isMenuKey:function(t){var o=!1;for(var r in e)if(e[r]==t){o=!0;break}return o}}}();require(["dojo/_base/event","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/has","dojo/on","dojo/query","dojo/sniff","dojo/domReady!","dojo/NodeList-dom","dojo/NodeList-traverse"],function(e,t,o,r,n,a,i){"use strict";function d(){D||(D=setTimeout(function(){D=null;s()},66))}function s(){var e=window.matchMedia("(max-width: 768px)");if(e.matches){E.destruct();h()}else{f();E.init()}}function l(){var e=dojo.byId("headerWidget"),t=dojo.byId("header-top-banner"),n=dojo.byId("primary-nav"),a=e?dojo.position(e).h:0,d=t?dojo.position(t).h:0,s=n?dojo.position(n).h:0,l=dojo.body(),u=a+s-d;if(e)if(T.matches){if(d<$(window).scrollTop()&&!$("body").hasClass("sticky-header")){$("body").addClass("sticky-header");$("#headerWidget").css("margin-bottom",$("#header").outerHeight());c();$("#look-ahead").removeClass("active")}if(d>=$(window).scrollTop()&&$("body").hasClass("sticky-header")){$("body").removeClass("sticky-header");$("#headerWidget").css("margin-bottom",0)}}else{$("#headerWidget").css("margin-bottom",0);if(dojo.position(e).y+dojo.position(e).h<=0&&!dojo.hasClass(l,"sticky-header")){$("#search").attr("aria-expanded","false");$(".mini-cart.tab.persist-active").attr("aria-expanded","false");o.add(l,"sticky-header");$("#look-ahead").removeClass("active");r.set(l,"padding-top",u+"px");c();setTimeout(function(){o.add(i("#search")[0],"persist-active");null!=$(".mini-cart")[0]&&void 0!=$(".mini-cart")[0]&&o.add(i(".mini-cart")[0],"persist-active")},300)}if(dojo.position(e).y>=0&&dojo.hasClass(l,"sticky-header")){o.remove(l,"sticky-header");o.remove(i("#search")[0],"persist-active active");null!=$(".mini-cart")[0]&&void 0!=$(".mini-cart")[0]&&o.remove(i(".mini-cart")[0],"persist-active");r.set(l,"padding-top",0);r.set(dojo.byId("search"),{left:"auto",right:"auto"});null!=$(".mini-cart")[0]&&void 0!=$(".mini-cart")[0]&&r.set(i(".mini-cart")[0],{left:"",right:""})}}}function c(){var e=i(".persistent-search")[0],t=dojo.byId("search"),o=window.matchMedia("(max-width: 768px)");if(i("body.sticky-header").length>0){var n=dojo.position(t).w,a=dojo.position(e).x;a+n/2<window.innerWidth?o.matches?r.set(t,{left:"0px",right:"auto"}):r.set(t,{left:a-n/2+"px",right:"auto"}):r.set(t,{right:"20px",left:"auto"})}}function u(){var e=dojo.byId("search");$("#search").attr("aria-expanded","true");i("body.sticky-header").length>0&&o.add(e,"active")}function p(){var e=dojo.byId("search"),t=document.getElementById("SimpleSearchForm_SearchTerm");$("#search").attr("aria-expanded","false");t!==document.activeElement&&o.remove(e,"active")}function m(){$(".mini-cart.tab.persist-active").attr("aria-expanded","true");var e=i(".persistent-cart")[0],t=i(".mini-cart")[0];if(i("body.sticky-header").length>0){toggleMiniShopCartDropDown("mini-cart-icon","quick_cart_container","orderItemsList");o.add(t,"active");var n=dojo.position(t).w,a=dojo.position(e).x;a+n/2<window.innerWidth?r.set(t,{left:a-n/2+"px",right:"auto"}):r.set(t,{right:"0px",left:"auto"})}}function g(){var e=i(".mini-cart")[0];$(".mini-cart.tab.persist-active").attr("aria-expanded","true");o.remove(e,"active")}function f(){var e=window.matchMedia("(max-width: 768px)");if(!e.matches){i(".persistent-search, #search").on("mouseover",function(){u();setTimeout(function(){$("input#SimpleSearchForm_SearchTerm").length>0&&$("input#SimpleSearchForm_SearchTerm").focus()},500)});i(".persistent-search, #search").on("mouseout",function(){setTimeout(function(){p()},500)});i(".persistent-cart, .mini-cart.tab").on("mouseover",function(){m()});i(".persistent-cart, .mini-cart.tab").on("mouseout",function(){g()})}}function h(){function e(){t("none")}function t(e){for(var t=!1,r=0;r<a.length;r++)if(a[r]!=e)o.remove(a[r],"open");else{o.add(a[r],"open");t=!0}t?$("#mobileOverlay").css("display","block"):$("#mobileOverlay").css("display","none")}var r=document.getElementById("mobile-menu"),n=document.getElementById("mobileOverlay"),a=(document.getElementById("MiniShoppingCart"),["stores","MiniShoppingCart","search"]);if(n){n.onclick=function(t){e()};n.ontouchmove=function(t){e()}}var i=document.getElementById("header");i&&(i.ontouchmove=function(e){$(n).hasClass("active")&&e.preventDefault()});if(r&&T.matches){var d=document.getElementById("primary-nav"),s=document.getElementById("nav-exit"),l=(document.querySelectorAll(".mobile-header"),document.querySelectorAll(".toggle-open")),c=document.querySelectorAll(".shop-by-brand-fullpage .brand-filter li"),u=document.querySelectorAll(".shop-by-brand-fullpage .brand-list > ul > li");if(d){r.onclick=function(t){e();d.classList.add("active");document.body.classList.add("no-scroll")};s.onclick=function(e){for(var t=document.querySelectorAll("#primary-nav .open"),o=0;o<t.length;o++)t[o].classList.remove("open");d.classList.remove("active");document.body.classList.remove("no-scroll")};for(var p=0;p<l.length;p++)l[p].onclick=function(e){e.preventDefault();this.classList.toggle("open")};for(var m=0;m<c.length;m++)c[m].onclick=function(e){e.preventDefault();for(var t=document.querySelectorAll(".brand-filter li.active"),o=this.classList[0],r=0;r<t.length;r++)t[r].classList.remove("active");this.classList.add("active");if("all"===o)for(var n=0;n<u.length;n++)u[n].style.display="block";else{for(var a=0;a<u.length;a++)u[a].style.display="none";document.querySelectorAll(".shop-by-brand-fullpage .brand-list ."+o)[0].style.display="block";$("html, body").animate({scrollTop:$("#"+o).offset().top-300},500)}}}var g=document.getElementById("mobile-search");g&&(g.onclick=function(e){e.preventDefault();document.getElementById("search").style.left="0";t("search")});var f=document.getElementById("mobile-stores");f&&(f.onclick=function(e){e.preventDefault();t("stores")});var h=document.getElementById("mobile-cart");h&&(h.onclick=function(e){e.preventDefault();document.querySelectorAll(".mini-cart")[0].style.left="0";toggleMiniShopCartDropDown("mini-cart-icon","quick_cart_container","orderItemsList");t("MiniShoppingCart")})}}function I(){var e=dojo.byId("footer");if(e&&T.matches){var t=i("#footer h5");a(t,"click",function(){o.toggle(this,"open")})}if(document.querySelectorAll("#policy-collapse").length>0){var r=document.querySelectorAll("#policy-collapse")[0];r.onclick=function(e){e.preventDefault();this.nextElementSibling.classList.contains("open")?this.nextElementSibling.classList.remove("open"):this.nextElementSibling.classList.add("open")}}}function y(e){var t="departmentMenu_",r=e.id.slice(0,t.length)==t;if(r){wc.render.updateContext("departmentSubMenuContext",{targetId:e.id});"function"==typeof cX&&setTimeout(function(){cX("")},1e3)}else{var n=e.getAttribute("data-parent");n&&activeElements[n]&&deactivate(activeElements[n]);n&&y(document.getElementById(n));o.add(e,"active");i('a[data-activate="'+e.id+'"]').addClass("selected");i('a[data-toggle="'+e.id+'"]').addClass("selected");activeElements[n]=e}}function v(e){o.contains(e,"active")?deactivate(e):y(e)}function C(){a(document,"a[data-activate]:click",function(t){var o=this.getAttribute("data-activate");y(document.getElementById(o));e.stop(t)});a(document,"a[data-deactivate]:click",function(t){var o=this.getAttribute("data-deactivate");deactivate(document.getElementById(o));e.stop(t)});a(document,"a[data-toggle]:click",function(t){var o=this.getAttribute("data-toggle");null!=document.getElementById(o)&&v(document.getElementById(o));e.stop(t)});a(document,"a[data-toggle]:keydown",function(t){var o;if(27==t.keyCode){o=this.getAttribute("data-toggle");deactivate(document.getElementById(o));e.stop(t)}else if(40==t.keyCode){o=this.getAttribute("data-toggle");var r=document.getElementById(o);y(r);i('[class*="menuLink"]',r)[0].focus();e.stop(t)}});n("ie")<10&&i("input[placeholder]").forEach(function(e){var t=e.getAttribute("placeholder");if(t){var o=document.createElement("label");o.className="placeholder";o.innerHTML=t;var r=function(){o.style.display=e.value?"none":"block"};window.setTimeout(r,200);a(e,"blur, focus, keyup",r);a(o,"click",function(){e.focus()})}})}function _(){window.setTimeout(function(){var e=document.getElementById("SimpleSearchForm_SearchTerm");e&&a(e,"click",function(){var e=i('.selected:not(a[data-toggle="searchBar"])',document.getElementById("header"));e.forEach(function(e){deactivate(document.getElementById(e.getAttribute("data-toggle")))})})},100);i("#searchBox > .submitButton").on("click",function(){var e=document.getElementById("SimpleSearchForm_SearchTerm");e.value=t.trim(e.value);var o=t.trim(e.value.replace(/'|"/g,""));e.value&&""!=o&&document.getElementById("searchBox").submit()});i("#searchBox").on("submit",function(o){var r=document.getElementById("SimpleSearchForm_SearchTerm"),n=r.value,a=t.trim(r.value.replace(/'|"/g,""));r.value=a;if(!r.value){e.stop(o);return!1}r.value=t.trim(n).toLowerCase()});i("#SimpleSearchForm_SearchTerm").on("keyup",function(){var e=document.getElementById("SimpleSearchForm_SearchTerm"),t=document.getElementById("submitButton");e.value.length>0?t.classList.add("active"):t.classList.remove("active")})}function S(){wc.render.declareContext("departmentSubMenuContext",{targetId:""},"");wc.render.declareRefreshController({id:"departmentSubMenu_Controller",renderContext:wc.render.getContextById("departmentSubMenuContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){cursor_wait();t.refresh(this.renderContext.properties)},postRefreshHandler:function(){updateDepartmentsMenu();y(document.getElementById(this.renderContext.properties.targetId));cursor_clear()}})}function b(){var e=i(".expandable");e&&a(e,"click",function(){o.toggle(this,"open")});var t=$(".banner-promo .collapse-toggle");if(t){var r=$(".banner-promo .close"),n=$(".banner-promo .carousel-inner .active a");t.attr("tabindex")||t.attr("tabindex","0");t.attr("aria-label")||t.attr("aria-label",t.find(".carousel-inner .item p").text()+" expandable promotion");t.attr("aria-expanded")||t.attr("aria-expanded","false");t.attr("role")||t.attr("role","button");t.on("click keydown",function(e){if("click"==e.type||"13"==e.which){$(this).addClass("open");$(".banner-promo .collapsible").addClass("open");t.attr("aria-expanded","true").attr("tabindex","-1");r.attr("tabindex","0");n.each(function(e){$(this).attr("tabindex","0")})}});r.on("click keydown",function(e){if("click"==e.type||"13"==e.which){$(".banner-promo .collapse-toggle").removeClass("open");$(".banner-promo .collapsible").removeClass("open");t.attr("aria-expanded","false").attr("tabindex","0");r.attr("tabindex","-1");n.each(function(e){$(this).attr("tabindex","-1")})}})}$(".carousel-sync").on("click",".carousel-control[data-slide]",function(e){e.preventDefault();$(".carousel-sync").carousel($(this).data("slide"))});$(".carousel-sync").on("mouseover",function(e){e.preventDefault();$(".carousel-sync").carousel("pause")});$(".carousel-sync").on("mouseleave",function(e){e.preventDefault();$(".carousel-sync").carousel("cycle")})}if(!dojo.byId("checkoutHeaderIdForJS")){var E=function(){function e(e,t){"boolean"!=typeof t&&(t=!1);var o=h.filter("."+T).length>0;MouseObserver.hoverTimeout&&clearTimeout(MouseObserver.hoverTimeout);MouseObserver.hoverTimeout=setTimeout(function(){h.filter("."+T).removeClass(T).find("> a").attr("aria-expanded","false").attr("tabIndex",-1);e.addClass(T).find("> a").attr("aria-expanded","true").attr("tabIndex",0);_.show();f.find("> ul").addClass("active");var o=e.attr("id");y.filter("."+T).removeClass(T).closest(".drawer-container").attr("aria-hidden","true");y.each(function(){var e=$(this);if(e.hasClass(o)){e.addClass(T).closest(".drawer-container").attr("aria-hidden","false");e.find(".pet-list li").removeClass(T).first().addClass(T).find("> a").attr("aria-expanded","true").attr("tabIndex",0);e.find(".pet-nav").removeClass(T).first().addClass(T).attr("aria-hidden",!1)}});t&&e.find("li > a").first().focus()},o?MouseObserver.hoverDelay:20)}function t(e){v.filter("."+T).removeClass(T).find("> a").attr("aria-expanded","false").attr("tabIndex",-1);e.addClass(T).find("> a").attr("aria-expanded","true").attr("tabIndex",0);var t=e.attr("id");C.filter("."+T).removeClass(T).attr("aria-hidden","true");C.each(function(){var e=$(this);e.hasClass(t)&&e.addClass(T).attr("aria-hidden","false")})}function o(e){"boolean"!=typeof e&&(e=!1);var t=h.filter("."+T).length>0,o=t?h.filter("."+T):h.has('> a[tabindex="0"]');h.removeClass(T).find("> a").attr("aria-expanded","false").attr("tabIndex",-1);o.find("> a").attr("tabIndex",0);e&&o.find("> a").focus();y.removeClass(T);v.removeClass(T).find("> a").attr("aria-expanded","false").attr("tabIndex",-1);_.hide();f.find("> ul").removeClass("active");I.attr("aria-hidden","true");C.removeClass(T).attr("aria-hidden","true");MouseObserver.hoverTimeout&&clearTimeout(MouseObserver.hoverTimeout)}function r(t){i(t)?o(!0):e(t,!0)}function n(e,t){var o,r=t.prevAll().not(".mobile-only").first();o=r.length?r:e.last();return o}function a(e,t){var o,r=t.nextAll().not(".mobile-only").first();o=r.length?r:e.first();return o}function i(e){return e.hasClass(T)}function d(e,t){e.find("> a").attr("tabIndex",-1);t.find("> a").attr("tabIndex",0).focus()}function s(){f.on("keydown",function(s){if("TEXTAREA"!=s.target.tagName){var l=s.keyCode;if("I"!=s.target.tagName||l!==keyboardHelper.keys.ENTER&&l!==keyboardHelper.keys.SPACEBAR){if("I"==s.target.tagName&&9===l){p();g()}else if(keyboardHelper.isMenuKey(s.keyCode)){var c=h.filter("."+T).length>0,I=v.filter("."+T).length>0,C=v.filter("."+T),_=c?h.filter("."+T):h.has('> a[tabindex="0"]');if(l===keyboardHelper.keys.ESCAPE){s.preventDefault();s.stopPropagation();o(!0);return}if(l===keyboardHelper.keys.LEFTARROW){s.preventDefault();s.stopPropagation();var S=n(h,_);d(h,S);i(_)&&e(S,!0);return}if(l===keyboardHelper.keys.RIGHTARROW){s.preventDefault();s.stopPropagation();var b=a(h,_);d(h,b);i(_)&&e(b,!0);return}if(c)switch(l){case keyboardHelper.keys.UPARROW:s.preventDefault();s.stopPropagation();if(I){var E=f.find(".drawer."+T+" "+v.selector),S=n(E,C);d(E,S);t(S)}break;case keyboardHelper.keys.DOWNARROW:s.preventDefault();s.stopPropagation();if(I){var E=f.find(".drawer."+T+" "+v.selector),b=a(E,C);t(b);d(E,b)}break;case keyboardHelper.keys.SPACEBAR:case keyboardHelper.keys.ENTER:s.preventDefault();s.stopPropagation();var D=y.find(":focus");D.length&&(window.location=D.attr("href"))}else switch(l){case keyboardHelper.keys.UPARROW:case keyboardHelper.keys.DOWNARROW:s.preventDefault();s.stopPropagation();e(_,!0);break;case keyboardHelper.keys.SPACEBAR:case keyboardHelper.keys.ENTER:s.preventDefault();s.stopPropagation();r(_)}}}else{s.preventDefault();if(s.target.classList.contains("persistent-search")){u();setTimeout(function(){$("input#SimpleSearchForm_SearchTerm").focus()},500)}else{m();showMiniShopCartDropDownEvent(s,"MiniShoppingCart","MiniShopCartContents","orderItemsList");setTimeout(function(){$(".mini-cart.tab.persist-active #MiniShopCartContents").find("a")[0].focus()},500)}}}});h.on("mouseenter",function(){e($(this))});h.on("mouseleave",function(){MouseObserver.hoverTimeout&&clearTimeout(MouseObserver.hoverTimeout)});I.each(function(){var e=$(this),t=e.find(".drawer");t&&e.on("mouseover",function(e){var r=e.target,n=$.contains(t[0],r)||$(r).is(t);n||o()})});f.on("mouseleave",o);_.on("mouseenter",o);v.on("mouseenter",function(){t($(this))});S.on("click",function(){var e=$(this).attr("class"),t=$('.shop-by-brand-fullpage .brand-list a[href="#'+e+'"]'),o=1*t.offset().top-50;window.scrollTo(0,o)})}function l(){f.off("keydown");h.off("mouseenter");h.off("mouseleave");I.off("mouseover");f.off("mouseleave");_.off("mouseenter");v.off("mouseenter");S.off("click")}function c(){if(!$("#nav-header-offer").length){var e=$("#header-offer").clone();e.removeClass("header-offer-mobile").attr("id","nav-header-offer");$("ul.nav-items").append(e);$("ul.nav-items #nav-header-offer").wrap('<li class="header-offer-desktop"></li>')}}var f=$("#primary-nav"),h=$(".nav-items > li:not(.mobile-only)"),I=$(".drawer-container"),y=$(".drawer"),v=($(".pet-list"),$(".pet-list li")),C=$(".pet-nav"),_=$(".nav-mask"),S=$(".shop-by-brand-fullpage .brand-filter li"),b=$("nav > .persistent-utility"),E=!1,T="focus";f.find("ul").attr("role","menu").end().find("> ul").attr("aria-label","Main Navigation").attr("role","menubar").end().find("li").attr("role","none").end().find("a").attr("role","menuitem").attr("tabIndex",-1).end().find(".drawer .container a").attr("tabIndex",0);h.find("> a").attr("aria-haspopup","true").attr("aria-expanded","false").first().attr("tabIndex",0);I.attr("aria-hidden","true");v.find("> a").attr("aria-haspopup","true").attr("aria-expanded","false").attr("tabIndex",-1);C.attr("aria-hidden","true");b.children("i").each(function(){$(this).attr("tabindex","0")});return{init:function(){if(!E){s();c();E=!0}},destruct:function(){if(E){l();E=!1}}}}();b();0==$("#reactHeader").length&&a(window,"scroll",function(){l()});C();var T=window.matchMedia("(max-width: 769px)");if(T.matches)h();else{f();E.init()}window.addEventListener("resize",d,!1);var D;I();_();S()}});var userType="",isGuest=!0,parameters=[],domain="";$("#cookieDomain").length>0&&(domain=$("#cookieDomain").val());$(document).ready(function(){wc.service.declare({id:"pingPetcoUserTypeAction",actionId:"pingPetcoUserTypeAction",url:$("span#PetcoPingUserTypeurl").html().trim().split("&amp;").join("&"),successHandler:function(e){var t=e.usertype,o=e.userid;invokeCookieForLoginUser(t,o)},failureHandler:function(e){console.debug("PetcoPingUserType: Unexpected error occurred during an xhrPost request.")}});var e=8,t=setInterval(function(){if("undefined"!=typeof rfk&&null!=rfk&&"function"==typeof rfk.uid){clearInterval(t);e=10;ReflektionHelperJS.reflektion_init()}else if(0==e){clearInterval(t);e=10;ReflektionHelperJS.reflektion_init()}else e--},800);pingPetcoUserType()});!function(){"use strict";function e(e){var t=dojo.cookie(e);return!(!t||"false"==t)}function t(){var t=e("obocookie");if(t&&null!=document.getElementById("oboRegisterLink")&&null!=document.getElementById("signOutLinkButton")){document.getElementById("oboRegisterLink").style.display="none";document.getElementById("signOutLinkButton").style.display="none"}else if(null!=document.getElementById("oboRegisterLink")&&null!=document.getElementById("signOutLinkButton")){document.getElementById("oboRegisterLink").style.display="inline";document.getElementById("signOutLinkButton").style.display="none"}}function o(){var e=(dojo.cookie("WC_CartOrderId_".concat(WCParamJS.storeId)),dojo.cookie("rCartTotal"));if(null!=e&&void 0!=e){document.getElementById("cart-count")&&(document.getElementById("cart-count").innerHTML=e);document.getElementById("persistent-cart-count")&&(document.getElementById("persistent-cart-count").innerHTML=e);document.getElementById("mobile-cart-count")&&(document.getElementById("mobile-cart-count").innerHTML=e)}}function r(){null!=document.getElementById("RemovedCartCheck")&&(document.getElementById("RemovedCartCheck").value="No");if(null!=document.getElementById("RemovedOrdCount")){var e=document.getElementById("RemovedOrdCount").value;document.getElementById("removeCartUndo_"+e)?document.getElementById("removeCartUndo_"+e).innerHTML=" ":document.getElementById("removeCartUndo")&&(document.getElementById("removeCartUndo").innerHTML=" ")}document.getElementById("removeCartUndo_last")&&(document.getElementById("removeCartUndo_last").innerHTML=" ");null!=document.getElementById("UndoValue")&&(document.getElementById("UndoValue").value="No");null!=document.getElementById("RDScheduleFrqValue")&&(document.getElementById("RDScheduleFrqValue").value="");null!=document.getElementById("removedAttrNames")&&(document.getElementById("removedAttrNames").value="");null!=document.getElementById("removedAttrvalue")&&(document.getElementById("removedAttrvalue").value="");null!=document.getElementById("RemovedDonation")&&(document.getElementById("RemovedDonation").value="")}$(document).ready(function(){try{if(dojo.byId("checkoutHeaderIdForJS"))return;t();o();r()}catch(e){console.log(e)}})}();wc.service.declare({id:"AjaxPetcoGetLocation",actionId:"AjaxPetcoGetLocation",url:getAbsoluteURL()+"AjaxPetcoGetLocation",formId:"",successHandler:function(e){var t=null!=e.city?e.city:"",o="";o=null!=dojo.byId("cookieDomain")?dojo.byId("cookieDomain").value:".petco.com";dojo.cookie("petco-us-city",t,{path:"/",domain:o});dojo.topic.publish("cookieAddedForPhysicalStoreId",t)},failureHandler:function(e){console.log("Error in AjaxPetcoGetLocation. "+e.errorMessage)}});var petcoLocation=function(){function e(e){var t=getCookie(e),o=!1;null!=t&&""!=t&&(o=!0);return o}function t(){var e,t=null!=getCookie(r)?getCookie(r):"",o=window.matchMedia("(max-width: 768px)").matches,n="Local",a="local";if(t){t=t.replace(/%20/g," ");(!o||t.length<15)&&(n=t);a=t}$(".petco-us-city-upper").html(n);$(".petco-us-city-lower").html(a);$(".petco-us-city-upper-full").html(a);var i=dojo.cookie("WC_UserId"),d="nearestStore_"+i,s=!1;LOCALSTORAGE_STORES_KEY="petcostores";if(null!=localStorage.getItem(LOCALSTORAGE_STORES_KEY)){oNearestStores=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));if(null!=oNearestStores&&"undefined"!=typeof oNearestStores.petcostores){aPetcostores=JSON.parse(oNearestStores.petcostores);if(void 0!=aPetcostores&&null!=aPetcostores){oNearestStores=aPetcostores[0];e="undefined"!=oNearestStores.DSNAME?oNearestStores.DSNAME:sessionStorage.getItem(d);s=!0}else{var l=sessionStorage.getItem(d);if(null!=l&&"undefined"!=typeof l){e=l;s=!0}}}}else{var l=sessionStorage.getItem(d);if(null!=l&&"undefined"!=typeof l){e=l;s=!0}}if(s){var c=e+" Pet Services";e=e.replace(/[\W_]/g," ").split(/\s+/).slice(0,2).join(" ");var u=e;u.length>10&&(u=u.substring(0,10)+"...");$(".petco-us-city-upper-full").html(e);$(".petco-us-city-upper").html(u);$("#pet-services").attr("title",c)}}function o(t,o,n){try{var a=e(r),i=_akamaiCookie,d="",s=[];s.storeId=t;s.langId=n;s.catalogId=o;if(a)return!1;d=getCookie(i);if(null!=d&&""!=d){s.cityKey=d;wc.service.invoke("AjaxPetcoGetLocation",s)}}catch(e){console.log("An error has occured in petcoCommonJS.setPetcoLocationCookie. "+e)}}var r="petco-us-city";_akamaiCookie="Edgescape-City";$(".lsa-location").bind("DOMSubtreeModified",function(){var e=this.innerHTML;e&&e.indexOf("<br>")!==-1&&(e=e.split("<br>")[0]);if("undefined"!=e&&""!=e){$("#pet-services").attr("title",e+" Pet Services");e=e.replace(/[\W_]/g," ").split(/\s+/).slice(0,2).join(" ");var t=e;t.length>10&&(t=t.substring(0,10)+"...");$(".petco-us-city-upper").html(t);$(".petco-us-city-upper-full").html(e)}});return{setPetcoLocationCookie:o,populateCity:t}}(),petcoNearestLocations=function(){function fnXHRCall(e){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnXHRCall()");var t=e||{};t.method=e.method||"GET";t.url=e.url||"";t.contentType=e.contentType||"application/json";t.dataType=e.dataType||"json";t.data=e.data||{};t.timeout=e.timeout||_nXHRTimeout;t.requestType=e.requestType||"";if(_bIsDebuggingEnabled){console.debug("Debugging:: oRequestInfo object - "+JSON.stringify(t));console.debug("Debugging:: Entering $.ajax()")}$.ajax({url:t.url,type:t.method,contentType:t.contentType,dataType:t.dataType,data:JSON.stringify(t.data),cache:!1,timeout:t.timeout,success:function(e){fnSuccessHandler(e,t.requestType)},error:function(e){fnErrorHandler(e,t.requestType)}});_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnXHRCall()")}function fnBuildUrl(e){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnBuildUrl(urlType)");console.debug("Debugging:: urlType - "+e)}var t="",o=window.location.protocol,r=window.location.hostname,n=window.location.port,a="/wcs/resources/store/"+_sStoreId+"/petcostorelocator/";$('div.previewEspot[id^="ShowInformation_ID_"]').length>0&&(a="/wcs/previewresources/store/"+_sStoreId+"/petcostorelocator/");""!=n&&(r=r+":"+n);e==NEAREST_STORES_API?t=_sGoogleAPIUrl+_sKey:e==LATITUDE_LONGITUDE_API?t=o+"//"+r+a+"latitude/"+_geoLatitude+"/longitude/"+_geoLongitude+"/"+NEAREST_STORES_API:e==ZIPCODE_API?t=o+"//"+r+a+"getneareststoresbyzipcode":e==AKAMAI_ZIPCODE&&(t=o+"//"+r+a+"getneareststoresbyzipcode");if(_bIsDebuggingEnabled){console.debug("Debugging:: url - "+t);console.debug("Debugging:: Exiting fnBuildUrl(urlType)")}""!=_storePassedAsParam&&(t=t.indexOf("?")==-1?t+"?storeCode="+_storePassedAsParam:t+"&storeCode="+_storePassedAsParam);return t}function fnGeoLocation(){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnGeoLocation()");console.debug("Debugging:: _bIsHTML5Geolocation - "+_bIsHTML5Geolocation);console.debug("Debugging:: _bIsGoogleGeoAPI - "+_bIsGoogleGeoAPI)}if(_bIsHTML5Geolocation){_bIsDebuggingEnabled&&console.debug("Debugging:: navigator.geolocation - "+navigator.geolocation);if(navigator&&navigator.geolocation){var e={enableHighAccuracy:!0,timeout:_nHTML5GeoTimeout};navigator.geolocation.getCurrentPosition(fnProcessGeoResponse,fnProcessGeoError,e);jQuery(window).load(function(){setTimeout(function(){if(!IS_HTML5_CALL_COMPLETED){var e={};e.code=5;fnProcessGeoError(e);IS_HTML5_CALL_COMPLETED=!0}},_nHTML5GeoTimeout)})}else if(_bIsGoogleGeoAPI){_bIsDebuggingEnabled&&console.debug('Debugging:: HTML5 Geolocation is not used. Calling the fnGetData("neareststores").');fnGetData(NEAREST_STORES_API)}else{_bIsDebuggingEnabled&&console.debug("Debugging:: HTML5 Geolocation is not used and Google API is disabled. Inside the logic to show the link for select a store.");if(fnIsPDP()&&fnIsBOPUSItem()){0!=$("#isBOPUSHide").length&&($("#isBOPUSHide")[0].value="yes");dojo.topic.publish("ChangeBasedOnLocationCallCompleted","hide")}localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true")}}else{if(_bIsDebuggingEnabled){console.debug("Debugging:: HTML5 Geolocation switch is off. _bIsHTML5Geolocation - "+_bIsHTML5Geolocation);console.debug("Debugging:: _bIsGoogleGeoAPI - "+_bIsGoogleGeoAPI)}if(_bIsGoogleGeoAPI){_bIsDebuggingEnabled&&console.debug('Debugging:: HTML5 Geolocation is disabled. Google API is enabled. Calling the fnGetData("neareststores").');fnGetData(NEAREST_STORES_API)}else{_bIsDebuggingEnabled&&console.debug("Debugging:: HTML5 Geolocation is disabled and Google API is disabled.");if(fnIsPDP()&&fnIsBOPUSItem()){_bIsDebuggingEnabled&&console.debug("Debugging:: Hide the store locator section.");fnHideStoreLocatorSection()}localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true")}}_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnGeoLocation().")}function fnGeoLocationFromLatLongLocalStorage(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnGeoLocationFromLatLongLocalStorage()");var e=null!=JSON.parse(localStorage.getItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY))?JSON.parse(localStorage.getItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY)):{};if(null!=e&&0!=Object.keys(e).length){_geoLatitude=e.latitude;_geoLongitude=e.longitude;if(_bIsDebuggingEnabled){console.debug("Debugging:: latitude - "+_geoLatitude);console.debug("Debugging:: longitude - "+_geoLongitude);console.debug('Debugging:: Calling fnGetData("latlong")')}fnGetData(LATITUDE_LONGITUDE_API)}_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnGeoLocationFromLatLongLocalStorage().")}function fnProcessGeoError(e){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnProcessGeoError(oError).");if(!IS_HTML5_CALL_COMPLETED){IS_HTML5_CALL_COMPLETED=!0;var t=e.code,o={1:"Permission denied",2:"Position unavailable",3:"Request timeout",4:"Unknown error",5:"No input from user"};if(t){if(_bIsDebuggingEnabled){console.debug("Debugging:: Error - "+o[t]);console.debug("Debugging:: _bIsGoogleGeoAPI - "+_bIsGoogleGeoAPI)}if("5"==t){_bIsDebuggingEnabled&&console.debug("Debugging:: User did not allow or block HTML5 location. Take value from Akamai lat long.");fnGetData("AKAMAI_LATLONG")}else if(_bIsGoogleGeoAPI&&"5"!=t){_bIsDebuggingEnabled&&console.debug('Debugging:: Google API is enabled. Calling the fnGetData("neareststores").');fnGetData(NEAREST_STORES_API)}else{_bIsDebuggingEnabled&&console.debug("Debugging:: Google API is disabled. Inside the logic to show the link for select a store.");if(fnIsPDP()&&fnIsBOPUSItem()){_bIsDebuggingEnabled&&console.debug("Debugging:: Hide the store locator section.");fnHideStoreLocatorSection()}localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true")}}dojo.topic.publish("callCompletedforLocationCheck","Not-AKAMAI");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnProcessGeoError(oError).")}}function fnProcessGeoResponse(e){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnProcessGeoResponse(oPosition).");if(!IS_HTML5_CALL_COMPLETED){IS_HTML5_CALL_COMPLETED=!0;_geoLatitude=e.coords.latitude;_geoLongitude=e.coords.longitude;if(_bIsDebuggingEnabled){console.debug("Debugging:: latitude - "+_geoLatitude);console.debug("Debugging:: longitude - "+_geoLongitude);console.debug('Debugging:: Calling fnGetData("latlong")')}fnGetData(LATITUDE_LONGITUDE_API);fnLatitudeLongitudeSetLocalStorage(_geoLatitude,_geoLongitude);_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnProcessGeoResponse(oPosition).")}}function fnLatitudeLongitudeSetLocalStorage(e,t){localStorage.removeItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY);if(""!=e&&""!=t){var o={};o.latitude=e;o.longitude=t;var r=60*_nLocationExpirationMin*1e3;o.timestamp=_timestamp+r;localStorage.setItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY,JSON.stringify(o));
}}function fnGetData(e,t){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnGetData(requestType).");console.debug("Debugging:: requestType - "+e)}if(e==NEAREST_STORES_API){_bIsDebuggingEnabled&&console.debug("Debugging:: Calling fnXHRCall({method: 'POST', url: fnBuildUrl(NEAREST_STORES_API)});");fnXHRCall({method:"POST",url:fnBuildUrl(NEAREST_STORES_API),requestType:NEAREST_STORES_API,dataType:"json",contentType:"application/json"})}else if("AKAMAI_LATLONG"==e){_bIsDebuggingEnabled&&console.debug("Debugging:: Calling fnXHRCall({method: 'GET', url: fnBuildUrl(LATITUDE_LONGITUDE_API)});");var o=dojo.cookie("Edgescape-Country"),r=dojo.cookie("Edgescape-Lat"),n=dojo.cookie("Edgescape-Long");if("undefined"!=typeof o&&"US"==o&&"undefined"!=typeof r&&"undefined"!=typeof n){_geoLatitude=r;_geoLongitude=n;fnLatitudeLongitudeSetLocalStorage(_geoLatitude,_geoLongitude);fnXHRCall({method:"GET",url:fnBuildUrl(LATITUDE_LONGITUDE_API)})}else fnGetData(NEAREST_STORES_API)}else if(e==LATITUDE_LONGITUDE_API){_bIsDebuggingEnabled&&console.debug("Debugging:: Calling fnXHRCall({method: 'GET', url: fnBuildUrl(LATITUDE_LONGITUDE_API)});");fnXHRCall({method:"GET",url:fnBuildUrl(LATITUDE_LONGITUDE_API)})}else e==ZIPCODE_API?fnXHRCall("undefined"!=typeof t?{method:"POST",url:fnBuildUrl(ZIPCODE_API),requestType:ZIPCODE_API,data:fnZIPCodeData(t),contentType:"application/json"}:{method:"POST",url:fnBuildUrl(ZIPCODE_API),requestType:ZIPCODE_API,data:fnZIPCodeData(),contentType:"application/json"}):e==AKAMAI_ZIPCODE&&fnXHRCall({method:"POST",url:fnBuildUrl(AKAMAI_ZIPCODE),requestType:AKAMAI_ZIPCODE,data:fnAkamaiZIPCodeData(),contentType:"application/json"});_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnGetData(requestType).")}function fnCheckLocalStorage(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnCheckLocalStorage().");var e=null!=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY))?JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY)):{},t=!1;if(null!=e&&0!=Object.keys(e).length){var o={};"undefined"!=typeof e.petcostores&&(o=null!=JSON.parse(e.petcostores)?JSON.parse(e.petcostores):{});if(e.timestamp>0&&_timestamp>e.timestamp){localStorage.removeItem(LOCALSTORAGE_STORES_KEY);e={};fnCreateCookie("WC_physicalStores","",-100);t=!0}else if(0==parseInt(e.timestamp))t=!1;else if(null!=o&&0==Object.keys(o).length){localStorage.removeItem(LOCALSTORAGE_STORES_KEY);e={};fnCreateCookie("WC_physicalStores","",-100);t=!0}}if(null==e||0==Object.keys(e).length||"true"==localStorage.getItem(LOCALSTORAGE_TIMEOUT_KEY)&&0==Object.keys(e.userDetails).length){localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100);localStorage.removeItem(LOCALSTORAGE_TIMEOUT_KEY);t=!0}if(_bIsDebuggingEnabled){console.debug("Debugging:: oNeareststores - "+JSON.stringify(e));console.debug("Debugging:: bGetData - "+t);console.debug("Debugging:: Exiting fnCheckLocalStorage().")}return t}function fnCheckLocalStorageLatLong(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnCheckLocalStorageLatLong().");var e=null!=JSON.parse(localStorage.getItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY))?JSON.parse(localStorage.getItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY)):{},t=!1;if(null!=e&&0!=Object.keys(e).length)if(e.timestamp>0&&_timestamp>e.timestamp){localStorage.removeItem(LOCALSTORAGE_LATITUDE_LONGITUDE_KEY);e={};t=!0}else 0==parseInt(e.timestamp)&&(t=!1);else t=!0;if(_bIsDebuggingEnabled){console.debug("Debugging:: oLatLongData - "+JSON.stringify(e));console.debug("Debugging:: bGetData - "+t);console.debug("Debugging:: Exiting fnCheckLocalStorageLatLong().")}return t}function fnSuccessHandler(e,t){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnSuccessHandler(oData).");var o={},r={},n=60*_nExpirationMin*1e3;if(e.hasOwnProperty("location")&&t==NEAREST_STORES_API){_geoLatitude=e.location.lat;_geoLongitude=e.location.lng;fnLatitudeLongitudeSetLocalStorage(_geoLatitude,_geoLongitude);fnGetData(LATITUDE_LONGITUDE_API)}else if(e.stores&&e.stores.length>0){r=e.storeHours&&Object.keys(e.storeHours).length>0?e.storeHours:{};if(fnIsPDP()&&fnIsBOPUSItem()||fnIsCartPage()){if(t==ZIPCODE_API){fnHideXHRLoader();fnBuildModalUI(e.stores,r)}else{if(parseInt(_nExpirationMin)>0){o={petcostores:JSON.stringify(e.stores),shipmodes:JSON.stringify(e.shipmodedetails),storehours:JSON.stringify(r),userDetails:JSON.stringify(e.userDetails),timestamp:_timestamp+n};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}else{o={petcostores:JSON.stringify(e.stores),shipmodes:JSON.stringify(e.shipmodedetails),storehours:JSON.stringify(r),userDetails:JSON.stringify(e.userDetails),timestamp:0};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}fnSetPhysicalStoreCookie("WC_physicalStores",e.stores);fnBuildStoreInfoUI(e.stores,"",r)}for(i=0;i<e.stores.length;i++)_tempStoreData.push(e.stores[i]);_userData=e.userDetails;_oStoreHours=r;"undefined"!=typeof e.shipmodedetails&&(_shipmodedetails=e.shipmodedetails)}else{if(parseInt(_nExpirationMin)>0){o={petcostores:JSON.stringify(e.stores),shipmodes:JSON.stringify(e.shipmodedetails),storehours:JSON.stringify(r),userDetails:JSON.stringify(e.userDetails),timestamp:_timestamp+n};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}else{o={petcostores:JSON.stringify(e.stores),shipmodes:JSON.stringify(e.shipmodedetails),storehours:JSON.stringify(r),userDetails:JSON.stringify(e.userDetails),timestamp:0};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}fnSetPhysicalStoreCookie("WC_physicalStores",e.stores);fnBuildStoreInfoUI(e.stores)}localStorage.removeItem(LOCALSTORAGE_TIMEOUT_KEY)}else if(fnIsPDP()&&fnIsBOPUSItem()||fnIsCartPage()){_bIsDebuggingEnabled&&console.debug("Debugging:: Hide the store locator section.");if(t==ZIPCODE_API){fnHideXHRLoader();if(""==_nLastStoreDistance){var a=$(".row-set");$(a[0]).is(":visible")&&$(a).each(function(){$(this).remove()});$("#petco-store-locator-modal").append('<div id="store-locator-error-message" class="col-8 error-box">'+MessageHelper.messages.STORE_LOCATOR_MODAL_ERROR+"</div>");$("#load-more-button").removeClass("disabled").addClass("btn-primary").attr("onclick","petcoNearestLocations.fnGetMoreStores();return false;");$("#load-more-button").removeAttr("disabled","disabled");$("#load-more-button").hide()}else{$("#load-more-button").addClass("disabled").removeClass("btn-primary").removeAttr("onclick");$("#load-more-button").attr("disabled","disabled");$("#no-more-stores").show()}return!1}if(e.userDetails&&Object.keys(e.userDetails).length>0)if(parseInt(_nExpirationMin)>0){o={userDetails:JSON.stringify(e.userDetails),timestamp:_timestamp+n};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}else{o={userDetails:JSON.stringify(e.userDetails),timestamp:0};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}fnHideStoreLocatorSection()}else if(e.userDetails&&Object.keys(e.userDetails).length>0)if(parseInt(_nExpirationMin)>0){o={userDetails:JSON.stringify(e.userDetails),timestamp:_timestamp+n};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}else{o={userDetails:JSON.stringify(e.userDetails),timestamp:0};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o))}else localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnSuccessHandler(oData).");if(t==AKAMAI_ZIPCODE||NoakamaiCalled){if(!akamaiCalled){akamaiCalled=!0;dojo.topic.publish("callCompletedforLocationCheck","AKAMAI")}}else{NoakamaiCalled=!0;dojo.topic.publish("callCompletedforLocationCheck","Not-AKAMAI")}dojo.topic.publish("BopusAreaRestrictionCheck","AjaxComplete");_populate_Service_location()}function fnErrorHandler(e,t){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnErrorHandler(oError).");console.debug("Debugging:: oError.statusText - "+e.statusText)}if(fnIsPDP()&&fnIsBOPUSItem()||fnIsCartPage()){if(t==ZIPCODE_API){fnHideXHRLoader();if(""==_nLastStoreDistance){var o=$(".row-set");$(o[0]).is(":visible")&&$(o).each(function(){$(this).remove()});$("#petco-store-locator-modal").append('<div id="store-locator-error-message" class="col-8 error-box">'+MessageHelper.messages.STORE_LOCATOR_MODAL_ERROR+"</div>");$("#load-more-button").removeClass("disabled").addClass("btn-primary").attr("onclick","petcoNearestLocations.fnGetMoreStores();return false;");$("#load-more-button").removeAttr("disabled","disabled");$("#load-more-button").hide();$("#no-more-stores").hide()}return!1}_bIsDebuggingEnabled&&console.debug("Debugging:: Hide the store locator section.");"timeout"!=e.statusText&&"error"!=e.statusText||localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true");fnHideStoreLocatorSection();localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100)}else if("timeout"==e.statusText||"error"==e.statusText){localStorage.setItem(LOCALSTORAGE_TIMEOUT_KEY,"true");localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100)}t!=AKAMAI_ZIPCODE?dojo.topic.publish("callCompletedforLocationCheck","Not-AKAMAI"):dojo.topic.publish("callCompletedforLocationCheck","AKAMAI");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnErrorHandler(oError).")}function fnIsCartPage(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnIsCartPage().");var e=!1,t=$("div.cart-product-listing div.standard-products-list div.cart-product-details");if(t.length>0)e=!0;else{t=$("article.cart-product-item");t.length>0&&(e=!0)}if(_bIsDebuggingEnabled){console.debug("Debugging:: Exiting fnIsCartPage().");console.debug("Debugging:: fnIsCartPage - "+fnIsCartPage)}return e}function fnIsPDP(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnIsPDP().");var e=!1,t=$('div[data-pageType="product-detail-page"]');t.length>0&&(e=!0);if(_bIsDebuggingEnabled){console.debug("Debugging:: Exiting fnIsPDP().");console.debug("Debugging:: bIsPDP - "+e)}return e}function fnBuildStoreInfoUI(e,t,o){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnBuildStoreInfoUI(oStoreData).");var r={},n={},a=[],d=t||"",s="",l="";$("#storeZipCode").val("");if(e&&"undefined"!=typeof e){r=e[0];"Y"==r.isPreferred&&e.length>1?$("#storeZipCode").val(e[1].ZIPCODE):$("#storeZipCode").val(r.ZIPCODE)}else{var c=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY)),u=JSON.parse(c.petcostores);if("undefined"!=typeof c.petcostores&&u.length>0){setTimeout(function(){checkIfStoreStatusAndClearStorage(JSON.parse(p.petcostores))},500);a=JSON.parse(c.petcostores);for(i=0;i<a.length;i++)_tempStoreData.push(a[i]);r=a[0];"Y"==r.isPreferred&&a.length>1?$("#storeZipCode").val(a[1].ZIPCODE):$("#storeZipCode").val(r.ZIPCODE)}}if(null!=o&&""!=o&&"undefined"!=typeof o)n=o;else{var p=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));"undefined"!=typeof p.storehours&&(n=JSON.parse(p.storehours))}"PetcoStoreDetailsView?storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&stlocId="+r.IDENTIFIER;if(null!=r&&Object.keys(r).length>0){fnHideStoreLink();var m=document.getElementById("bopusSelectStails");if(null!=m&&"true"==m.value){var g=$("#bopusdeailsInStockSelectable"),f=$("#bopusdeailsNotAvailableSelectable"),h=$("#bopusdeailsLowInventorySelectable"),I=document.getElementById("bopusSelectEnabledBopusAttrOn");if(null!=I){I.classList.add("show");I.classList.remove("hide")}else if(null!=I){I.classList.add("hide");I.classList.remove("show");setTimeout(function(){productDisplayJS.addBOPUSDetailsForInstock(r.STATE)},1e3)}if(""!=d)if("Available"==d){g.removeClass("hide");g.addClass("show");f.removeClass("show");f.addClass("hide");h.removeClass("show");h.addClass("hide")}else{g.removeClass("show");g.addClass("hide");f.removeClass("hide");f.addClass("show");h.removeClass("show");h.addClass("hide")}l=r.DSNAME;if("undefined"!=typeof l)if(l.toLowerCase().indexOf("unleashed")!=-1&&l.lastIndexOf("-")!=-1){$("span.selectableBopusSection .show .lsa-location").html(l.replace("-","<br>"));$("span#frozenFood .lsa-location").html(l.replace("-","<br>"))}else{$("span.selectableBopusSection .show .lsa-location").html(l);$("span#frozenFood .lsa-location").html(l)}if(null!=r.ADDRESS2&&""!=r.ADDRESS2){$("span.selectableBopusSection .show .lsa-street-address").text(r.ADDRESS1+" "+r.ADDRESS2);$("span#frozenFood .lsa-street-address").text(r.ADDRESS1+" "+r.ADDRESS2)}else{$("span.selectableBopusSection .show .lsa-street-address").text(r.ADDRESS1);$("span#frozenFood .lsa-street-address").text(r.ADDRESS1)}$("#CurrentBOPUSState").val(r.STATE);$("span.selectableBopusSection .show .lsa-city-state-zip").html(r.CITY+", "+r.STATE+'&nbsp;<span id="store-loc-zip-code">'+r.ZIPCODE+"</span>");$("span.selectableBopusSection .show .lsa-phone").text(r.PHONE);$("span#frozenFood .lsa-city-state-zip").html(r.CITY+", "+r.STATE+'&nbsp;<span id="store-loc-zip-code">'+r.ZIPCODE+"</span>");$("span#frozenFood .lsa-phone").text(r.PHONE);var y=new Date,v=new Date;if(n.hasOwnProperty(r.IDENTIFIER)){if("00:00:00"==n[r.IDENTIFIER].T1OPEN&&"00:00:00"==n[r.IDENTIFIER].T1CLOSE)s="<strong>Mon</strong><span>Closed</span><br/>";else{s="<strong>Mon</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T1OPEN.substring(0,n[r.IDENTIFIER].T1OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T1CLOSE.substring(0,n[r.IDENTIFIER].T1CLOSE.lastIndexOf(":")))+"</span><br/>";if("1"==y.getDay()&&null!=n[r.IDENTIFIER].T1CLOSE){y.setHours(n[r.IDENTIFIER].T1CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T2OPEN&&"00:00:00"==n[r.IDENTIFIER].T2CLOSE)s+="<strong>Tue</strong><span>Closed</span><br/>";else{s+="<strong>Tue</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T2OPEN.substring(0,n[r.IDENTIFIER].T2OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T2CLOSE.substring(0,n[r.IDENTIFIER].T2CLOSE.lastIndexOf(":")))+"</span><br/>";if("2"==y.getDay()&&null!=n[r.IDENTIFIER].T2CLOSE){y.setHours(n[r.IDENTIFIER].T2CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T3OPEN&&"00:00:00"==n[r.IDENTIFIER].T3CLOSE)s+="<strong>Wed</strong><span>Closed</span><br/>";else{s+="<strong>Wed</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T3OPEN.substring(0,n[r.IDENTIFIER].T3OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T3CLOSE.substring(0,n[r.IDENTIFIER].T3CLOSE.lastIndexOf(":")))+"</span><br/>";if("3"==y.getDay()&&null!=n[r.IDENTIFIER].T3CLOSE){y.setHours(n[r.IDENTIFIER].T3CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T4OPEN&&"00:00:00"==n[r.IDENTIFIER].T4CLOSE)s+="<strong>Thu</strong><span>Closed</span><br/>";else{s+="<strong>Thu</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T4OPEN.substring(0,n[r.IDENTIFIER].T4OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T4CLOSE.substring(0,n[r.IDENTIFIER].T4CLOSE.lastIndexOf(":")))+"</span><br/>";if("4"==y.getDay()&&null!=n[r.IDENTIFIER].T4CLOSE){y.setHours(n[r.IDENTIFIER].T4CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T5OPEN&&"00:00:00"==n[r.IDENTIFIER].T5CLOSE)s+="<strong>Fri</strong><span>Closed</span><br/>";else{s+="<strong>Fri</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T5OPEN.substring(0,n[r.IDENTIFIER].T5OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T5CLOSE.substring(0,n[r.IDENTIFIER].T5CLOSE.lastIndexOf(":")))+"</span><br/>";if("5"==y.getDay()&&null!=n[r.IDENTIFIER].T5CLOSE){y.setHours(n[r.IDENTIFIER].T5CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T6OPEN&&"00:00:00"==n[r.IDENTIFIER].T6CLOSE)s+="<strong>Sat</strong><span>Closed</span><br/>";else{s+="<strong>Sat</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T6OPEN.substring(0,n[r.IDENTIFIER].T6OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T6CLOSE.substring(0,n[r.IDENTIFIER].T6CLOSE.lastIndexOf(":")))+"</span><br/>";if("6"==y.getDay()&&null!=n[r.IDENTIFIER].T6CLOSE){y.setHours(n[r.IDENTIFIER].T6CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}if("00:00:00"==n[r.IDENTIFIER].T7OPEN&&"00:00:00"==n[r.IDENTIFIER].T7CLOSE)s+="<strong>Sun</strong><span>Closed</span>";else{s+="<strong>Sun</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T7OPEN.substring(0,n[r.IDENTIFIER].T7OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T7CLOSE.substring(0,n[r.IDENTIFIER].T7CLOSE.lastIndexOf(":")))+"</span>";if("0"==y.getDay()&&null!=n[r.IDENTIFIER].T7CLOSE){y.setHours(n[r.IDENTIFIER].T7CLOSE.substring(0,2),0,0,0);y.getHours()-v.getHours()<=2&&$("#bopus-option").text($("#bopusTitle_noRD").val())}}$("span.selectableBopusSection .show .lsa-hours").html('<a tabindex="0" href="javascript:void(0)" data-placement="top" data-toggle="popover" data-trigger="click" data-content="'+s+'">Store Hours</a>');$("span#frozenFood .lsa-hours").html('<a tabindex="0" href="javascript:void(0)" data-placement="top" data-toggle="popover" data-trigger="click" data-content="'+s+'">Store Hours</a>')}if(($("#bopusdeailsNotAvailableSelectable.show").length>0||$("#bopusdeailsLowInventorySelectable.show").length>0)&&$("#add2CartBtn_bopus").length>0){$("#add2CartBtn_bopus")[0].innerHTML="Not Available";$("#add2CartBtn_bopus")[0].disabled=!0}else if($("#bopusdeailsInStockSelectable.show").length>0&&$("#add2CartBtn_bopus").length>0){$("#add2CartBtn_bopus")[0].innerHTML="Add to Cart";$("#add2CartBtn_bopus")[0].disabled=!1;$("#pdp_atc").parent().length>0&&$("#pdp_atc").parent()[0].classList.contains("hide")&&$("#pdp_atc").parent().removeClass("hide")}}else{var C=$("#bopusdeailsInStock"),_=$("#bopusdeailsNotAvailable"),S=$("#bopusdeailsLowInventory");if(""!=d)if("Available"==d){C.removeClass("hide");C.addClass("show");_.removeClass("show");_.addClass("hide");S.removeClass("show");S.addClass("hide")}else{C.removeClass("show");C.addClass("hide");_.removeClass("hide");_.addClass("show");S.removeClass("show");S.addClass("hide")}l=r.DSNAME;l.toLowerCase().indexOf("unleashed")!=-1&&l.lastIndexOf("-")!=-1?$("#store-name").html(l.replace("-","<br>")):$("#store-name").html(l);null!=r.ADDRESS2&&""!=r.ADDRESS2?$("#store-street-address").text(r.ADDRESS1+" "+r.ADDRESS2):$("#store-street-address").text(r.ADDRESS1);$("#store-city-state-zip").html(r.CITY+", "+r.STATE+'&nbsp;<span id="store-loc-zip-code">'+r.ZIPCODE+"</span>");$("#store-phone").text(r.PHONE);if(n.hasOwnProperty(r.IDENTIFIER)){s="00:00:00"==n[r.IDENTIFIER].T1OPEN&&"00:00:00"==n[r.IDENTIFIER].T1CLOSE?"<strong>Mon</strong><span>Closed</span><br/>":"<strong>Mon</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T1OPEN.substring(0,n[r.IDENTIFIER].T1OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T1CLOSE.substring(0,n[r.IDENTIFIER].T1CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T2OPEN&&"00:00:00"==n[r.IDENTIFIER].T2CLOSE?"<strong>Tue</strong><span>Closed</span><br/>":"<strong>Tue</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T2OPEN.substring(0,n[r.IDENTIFIER].T2OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T2CLOSE.substring(0,n[r.IDENTIFIER].T2CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T3OPEN&&"00:00:00"==n[r.IDENTIFIER].T3CLOSE?"<strong>Wed</strong><span>Closed</span><br/>":"<strong>Wed</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T3OPEN.substring(0,n[r.IDENTIFIER].T3OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T3CLOSE.substring(0,n[r.IDENTIFIER].T3CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T4OPEN&&"00:00:00"==n[r.IDENTIFIER].T4CLOSE?"<strong>Thu</strong><span>Closed</span><br/>":"<strong>Thu</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T4OPEN.substring(0,n[r.IDENTIFIER].T4OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T4CLOSE.substring(0,n[r.IDENTIFIER].T4CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T5OPEN&&"00:00:00"==n[r.IDENTIFIER].T5CLOSE?"<strong>Fri</strong><span>Closed</span><br/>":"<strong>Fri</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T5OPEN.substring(0,n[r.IDENTIFIER].T5OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T5CLOSE.substring(0,n[r.IDENTIFIER].T5CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T6OPEN&&"00:00:00"==n[r.IDENTIFIER].T6CLOSE?"<strong>Sat</strong><span>Closed</span><br/>":"<strong>Sat</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T6OPEN.substring(0,n[r.IDENTIFIER].T6OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T6CLOSE.substring(0,n[r.IDENTIFIER].T6CLOSE.lastIndexOf(":")))+"</span><br/>";s+="00:00:00"==n[r.IDENTIFIER].T7OPEN&&"00:00:00"==n[r.IDENTIFIER].T7CLOSE?"<strong>Sun</strong><span>Closed</span>":"<strong>Sun</strong><span>"+fnToDateTimeFormat(n[r.IDENTIFIER].T7OPEN.substring(0,n[r.IDENTIFIER].T7OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(n[r.IDENTIFIER].T7CLOSE.substring(0,n[r.IDENTIFIER].T7CLOSE.lastIndexOf(":")))+"</span>";$("#store-hours").html('<a href="javascript:void(0)" data-placement="top" data-toggle="popover" data-trigger="hover" data-content="'+s+'">Store Hours</a>')}}$("#modal-neareststores").is(":visible")&&fnCloseStoreInfoModal()}else fnDisplayStoreLink();if(_bIsDebuggingEnabled){console.debug("Debugging:: oNearestStores - "+r);console.debug("Debugging:: Exiting fnBuildStoreInfoUI(oStoreData).")}}function fnIsStoreClosed(e,t){if(null===e||""===e||e.indexOf(":")==-1||null===t||""===t||t.indexOf(":")==-1)return!1;var o=parseInt(e.split(":")[0]),r=parseInt(t.split(":")[0]),n=(new Date).getHours(),a=!1;(n<o||n>=r)&&(a=!0);return a}function fnDisplayStoreLink(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnDisplayStoreLink().");0!=$("#isBOPUSHide").length&&($("#isBOPUSHide")[0].value="no");$("#select-store-link").show();$("#bopis-store-info").hide();dojo.topic.publish("ChangeBasedOnLocationCallCompleted","show");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnDisplayStoreLink().")}function fnHideStoreLink(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnHideStoreLink().");0!=$("#isBOPUSHide").length&&($("#isBOPUSHide")[0].value="no");$("#select-store-link").hide();$("#bopis-store-info").show();dojo.topic.publish("ChangeBasedOnLocationCallCompleted","show");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnHideStoreLink().")}function fnHideStoreLocatorSection(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnHideStoreLocatorSection().");0!=$("#isBOPUSHide").length&&($("#isBOPUSHide")[0].value="yes");dojo.topic.publish("ChangeBasedOnLocationCallCompleted","hide");_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnHideStoreLocatorSection().")}function fnSetPhysicalStoreCookie(e,t){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnSetPhysicalStoreCookie(cookieName).");console.debug("Debugging:: storeData - "+JSON.stringify(t))}var o=t.length<=5?t.length:5,r="";for(i=0;i<o;i++)r+=t[i].STLOC_ID+(i!=o-1?"%2C":"");var n=$("#expirationMin");fnCreateCookie(e,r,n.val());""!=r&&dojo.topic.publish("cookieAddedForPhysicalStoreId",r);if(_bIsDebuggingEnabled){console.debug("Debugging:: cookieName - "+e);console.debug("Debugging:: cookieValue - "+r);console.debug("Debugging:: Exiting fnSetPhysicalStoreCookie(cookieName).")}}function fnCreateCookie(e,t,o){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnCreateCookie(name, value, mins).");console.debug("Debugging:: name - "+e);console.debug("Debugging:: value - "+t);console.debug("Debugging:: mins - "+o)}var r,n=document.location.hostname;n.substring(n.lastIndexOf(".",n.lastIndexOf(".")-1));if(o){var a=new Date;a.setTime(a.getTime()+60*o*1e3);r="; expires="+a.toGMTString()}else r="";document.cookie=e+"="+t+r+";path=/";_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnCreateCookie(name, value, mins).")}function fnIsBOPUSItem(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnIsBOPUSItem().");var e=!1,t=null!=document.getElementById("isBOPUSEnabledItem")&&void 0!=document.getElementById("isBOPUSEnabledItem")?document.getElementById("isBOPUSEnabledItem").value:"";""!=t&&null!=t&&"yes"==t.toLowerCase()&&(e=!0);return e}function fnBuildModalUI(e,t){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnBuildModalUI(storeData).");var o=[],r=$(".row-set"),n="",a="",d="",s="",l="",c="",u="",p="",m="",g="",f="",h="",I="",y="",v="",C="",_={},S="",b="",E={},T=[];""==_nLastStoreDistance&&$(r).is(":visible")&&$(r).each(function(){$(this).remove()});if(e)o=e;else{var D=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));if(Object.keys(D).length>0){o=JSON.parse(D.petcostores);o.sort(fnGetSortOrder("DISTANCE"))}}if(null!=t&&""!=t)_=t;else{var A=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));_=JSON.parse(A.storehours)}if(o.length>0){for(i=0;i<o.length;i++)a+=o[i].STLOC_ID+(i!=o.length-1?",":"");fnGetInventory(a);for(i=0;i<o.length;i++){l=null!=o[i].DISTANCE?o[i].DISTANCE:"";c=null!=o[i].PETCOSTORE?o[i].PETCOSTORE:"";u=document.querySelectorAll(".petcoNextStoreLocatorModal").length>0?c.indexOf("PETCO")!=-1?PETCO_NEXT_STORE_LOGO:UNLEASHED_NEXT_STORE_LOGO:c.indexOf("PETCO")!=-1?PETCO_STORE_LOGO:UNLEASHED_STORE_LOGO;p=null!=o[i].ADDRESS1?o[i].ADDRESS1:"";m=null!=o[i].ADDRESS2?o[i].ADDRESS2:"";g=null!=o[i].DSNAME?o[i].DSNAME:"";f=null!=o[i].CITY?o[i].CITY:"";h=null!=o[i].STATE?o[i].STATE:"";I=null!=o[i].ZIPCODE?o[i].ZIPCODE:"";y=null!=o[i].PHONE?o[i].PHONE:"";C=null!=o[i].BOPUS?o[i].BOPUS:"";v=_oInStoreInventoryData[o[i].STLOC_ID];i==o.length-1&&(_nLastStoreDistance=null!=o[i].DISTANCE?o[i].DISTANCE:"");if("Y"==C)if("GREEN"==v){d="remaining text-bold text-center";v="Available"}else if("YELLOW"==v){d="text-notice text-bold text-center";v="Low Inventory"}else{d="text-danger text-bold text-center";v="Not Available"}else{d="text-bold text-center";v="Pickup Currently Unavailable"}g.indexOf("Unleashed")!=-1&&(g=g.substring(0,g.indexOf("Unleashed")-2));"Y"==o[i].isPreferred&&(g+="<span class='icon-stores-dark'></span><span class='mystoreIndicator text-normal text-x-small'>My Store</span>");s=null!=m&&""!=m?p+" "+m:p;if(_.hasOwnProperty(o[i].IDENTIFIER)){switch((new Date).getDay()){case 0:b="00:00:00"==_[o[i].IDENTIFIER].T7CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T7OPEN,_[o[i].IDENTIFIER].T7CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T1OPEN.substring(0,_[o[i].IDENTIFIER].T1OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T7CLOSE.substring(0,_[o[i].IDENTIFIER].T7CLOSE.lastIndexOf(":")));break;case 1:b="00:00:00"==_[o[i].IDENTIFIER].T1CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T1OPEN,_[o[i].IDENTIFIER].T1CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T2OPEN.substring(0,_[o[i].IDENTIFIER].T2OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T1CLOSE.substring(0,_[o[i].IDENTIFIER].T1CLOSE.lastIndexOf(":")));break;case 2:b="00:00:00"==_[o[i].IDENTIFIER].T2CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T2OPEN,_[o[i].IDENTIFIER].T2CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T3OPEN.substring(0,_[o[i].IDENTIFIER].T3OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T2CLOSE.substring(0,_[o[i].IDENTIFIER].T2CLOSE.lastIndexOf(":")));break;case 3:b="00:00:00"==_[o[i].IDENTIFIER].T3CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T3OPEN,_[o[i].IDENTIFIER].T3CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T4OPEN.substring(0,_[o[i].IDENTIFIER].T4OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T3CLOSE.substring(0,_[o[i].IDENTIFIER].T3CLOSE.lastIndexOf(":")));break;case 4:b="00:00:00"==_[o[i].IDENTIFIER].T4CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T4OPEN,_[o[i].IDENTIFIER].T4CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T5OPEN.substring(0,_[o[i].IDENTIFIER].T5OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T4CLOSE.substring(0,_[o[i].IDENTIFIER].T4CLOSE.lastIndexOf(":")));break;case 5:b="00:00:00"==_[o[i].IDENTIFIER].T5CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T5OPEN,_[o[i].IDENTIFIER].T5CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T6OPEN.substring(0,_[o[i].IDENTIFIER].T6OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T5CLOSE.substring(0,_[o[i].IDENTIFIER].T5CLOSE.lastIndexOf(":")));break;case 6:b="00:00:00"==_[o[i].IDENTIFIER].T6CLOSE?"Closed":fnIsStoreClosed(_[o[i].IDENTIFIER].T6OPEN,_[o[i].IDENTIFIER].T6CLOSE)?"Opens at "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T7OPEN.substring(0,_[o[i].IDENTIFIER].T7OPEN.lastIndexOf(":"))):"Open until "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T6CLOSE.substring(0,_[o[i].IDENTIFIER].T6CLOSE.lastIndexOf(":")))}S="00:00:00"==_[o[i].IDENTIFIER].T1OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T1CLOSE?"<strong>Mon</strong><span>Closed</span><br/>":"<strong>Mon</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T1OPEN.substring(0,_[o[i].IDENTIFIER].T1OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T1CLOSE.substring(0,_[o[i].IDENTIFIER].T1CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T2OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T2CLOSE?"<strong>Tue</strong><span>Closed</span><br/>":"<strong>Tue</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T2OPEN.substring(0,_[o[i].IDENTIFIER].T2OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T2CLOSE.substring(0,_[o[i].IDENTIFIER].T2CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T3OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T3CLOSE?"<strong>Wed</strong><span>Closed</span><br/>":"<strong>Wed</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T3OPEN.substring(0,_[o[i].IDENTIFIER].T3OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T3CLOSE.substring(0,_[o[i].IDENTIFIER].T3CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T4OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T4CLOSE?"<strong>Thu</strong><span>Closed</span><br/>":"<strong>Thu</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T4OPEN.substring(0,_[o[i].IDENTIFIER].T4OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T4CLOSE.substring(0,_[o[i].IDENTIFIER].T4CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T5OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T5CLOSE?"<strong>Fri</strong><span>Closed</span><br/>":"<strong>Fri</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T5OPEN.substring(0,_[o[i].IDENTIFIER].T5OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T5CLOSE.substring(0,_[o[i].IDENTIFIER].T5CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T6OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T6CLOSE?"<strong>Sat</strong><span>Closed</span><br/>":"<strong>Sat</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T6OPEN.substring(0,_[o[i].IDENTIFIER].T6OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T6CLOSE.substring(0,_[o[i].IDENTIFIER].T6CLOSE.lastIndexOf(":")))+"</span><br/>";S+="00:00:00"==_[o[i].IDENTIFIER].T7OPEN&&"00:00:00"==_[o[i].IDENTIFIER].T7CLOSE?"<strong>Sun</strong><span>Closed</span>":"<strong>Sun</strong><span>"+fnToDateTimeFormat(_[o[i].IDENTIFIER].T7OPEN.substring(0,_[o[i].IDENTIFIER].T7OPEN.lastIndexOf(":")))+" - "+fnToDateTimeFormat(_[o[i].IDENTIFIER].T7CLOSE.substring(0,_[o[i].IDENTIFIER].T7CLOSE.lastIndexOf(":")))+"</span>"}n="Available"!=v?'<div class="row border-top-thin row-set"><div class="mobile-second-col"><div class="store-locator-modal-availability-mobile"><p class="'+d+'">'+v+'</p></div><div class="store-locator-modal-distance-mobile"><p>'+l+'mi</p></div></div><div class="col-6 col-9-sm left-column-modal"><div class="col-3"><div class="store-locator-modal-logo"><img alt="'+$.trim(c)+'" src="'+u+'" ></div></div><div class="col-7"><div class="store-locator-modal-address"><p class="text-bold">'+g+"</p><p>"+s+"</p><p>"+f+", "+h+" "+I+'</p><a href="tel:'+y+'">'+y+'</a></div></div><div class="col-2"><div class="store-locator-modal-distance-desktop"><p>'+l+'mi</p></div></div></div><div class="col-6 right-column-modal"><div class="col-3"><div class="store-locator-modal-availability-desktop"><p class="'+d+'">'+v+'</p></div></div><div class="col-4"><p class="store-hours-message">'+b+'<br/><a href="#" data-placement="top" data-toggle="popover" data-trigger="click" data-content="'+S+'">Store Hours</a></p></div><div class="col-5"><div class="store-locator-modal-pickup-btn"><button tabindex="0" class="btn-primary disabled"  onclick="return false">'+MessageHelper.messages.STORE_LOCATOR_MODAL_STORE_BUTTON+"</button></div></div></div></div>":'<div class="row border-top-thin row-set"><div class="mobile-second-col"><div class="store-locator-modal-availability-mobile"><p class="'+d+'">'+v+'</p></div><div class="store-locator-modal-distance-mobile"><p>'+l+'mi</p></div></div><div class="col-6 col-9-sm left-column-modal"><div class="col-3"><div class="store-locator-modal-logo"><img alt="'+$.trim(c)+'" src="'+u+'" ></div></div><div class="col-7"><div class="store-locator-modal-address"><p class="text-bold">'+g+"</p><p>"+s+"</p><p>"+f+", "+h+" "+I+'</p><a href="tel:'+y+'">'+y+'</a></div></div><div class="col-2"><div class="store-locator-modal-distance-desktop"><p>'+l+'mi</p></div></div></div><div class="col-6 right-column-modal"><div class="col-3"><div class="store-locator-modal-availability-desktop text-center"><p class="'+d+'">'+v+'</p></div></div><div class="col-4"><p class="store-hours-message">'+b+'<br/><a href="#" data-placement="top" data-toggle="popover" data-trigger="click" data-content="'+S+'">Store Hours</a></p></div><div class="col-5"><div class="store-locator-modal-pickup-btn"><button tabindex="0" class="btn-primary" onclick="petcoNearestLocations.fnSelectStore(\''+o[i].IDENTIFIER+"','"+v+"')\">"+MessageHelper.messages.STORE_LOCATOR_MODAL_STORE_BUTTON+"</button></div></div></div></div>";
$("#petco-store-locator-modal").append(n);$("#load-more-button").removeClass("disabled").addClass("btn-primary").attr("onclick","petcoNearestLocations.fnGetMoreStores();return false;");$("#load-more-button").removeAttr("disabled","disabled");$("#load-more-button").show();$("#no-more-stores").hide()}try{for(i=0;i<o.length;i++)T.push(o[i].IDENTIFIER);E.physical_store_id=T;E.event_name="store_modal_search";pushEvent(E)}catch(e){return!0}fnHideXHRLoader()}else{$("#petco-store-locator-modal").append('<div id="store-locator-error-message" class="col-8 error-box">'+MessageHelper.messages.STORE_LOCATOR_MODAL_ERROR+"</div>");$("#load-more-button").removeClass("disabled").addClass("btn-primary").attr("onclick","petcoNearestLocations.fnGetMoreStores();return false;");$("#load-more-button").removeAttr("disabled","disabled");$("#load-more-button").hide();$("#no-more-stores").hide();console.debug("Empty array - aNearestStores: "+o)}_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnBuildModalUI(storeData).")}function fnOpenStoreInfoModal(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnOpenStoreInfoModal().");try{petcoCommonJS.showModal("neareststores");_changeStoreModalClick=!0;try{var e={};e.event_name="store_modal_open";pushEvent(e,"changeStore")}catch(e){console.log("An error occurred in creating the event store_modal_open. "+e);return!0}$("#store-locator-zipcode").val("");_sZipCode=null!=document.getElementById("storeZipCode")?$("#storeZipCode").val():"";if(""!=_sZipCode){_sZipCode.indexOf("-")!=-1&&(_sZipCode=_sZipCode.substring(0,_sZipCode.indexOf("-")));fnShowXHRLoader();_nLastStoreDistance="";fnGetData(ZIPCODE_API)}}catch(e){fnHideXHRLoader();console.log("An error occured in fnOpenStoreInfoModal(). "+e)}_bIsDebuggingEnabled&&console.debug("Exiting:: Entering fnOpenStoreInfoModal().")}function fnCloseStoreInfoModal(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnCloseStoreInfoModal().");try{var e=$(".row-set");document.getElementById("store-locator-zipcode").value="";$("#load-more-button").removeClass("disabled").addClass("btn-primary").attr("onclick","petcoNearestLocations.fnGetMoreStores();return false;");$("#load-more-button").removeAttr("disabled","disabled");$("#no-more-stores").hide();$(e[0]).is(":visible")&&$(e).each(function(){$(this).remove()});$("#store-locator-error-message").is(":visible")&&$("#store-locator-error-message").remove();$("#store-locator-zipcode").removeClass("invalid");$("#store-locator-zipcode-error").html("");petcoCommonJS.hideModal("modal-neareststores")}catch(e){console.log("An error occured in fnCloseStoreInfoModal(). "+e)}_bIsDebuggingEnabled&&console.debug("Exiting:: Entering fnCloseStoreInfoModal().")}function fnGetNearestStoresByZipCode(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnGetNearestStoresByZipCode().");$("#store-locator-error-message").is(":visible")&&$("#store-locator-error-message").remove();_nLastStoreDistance="";_sZipCode=null!=document.getElementById("store-locator-zipcode")&&void 0!=document.getElementById("store-locator-zipcode")?document.getElementById("store-locator-zipcode").value:"";_sZipCode=$.trim(_sZipCode);_showPreferredStore=!1;var e='<span class="error">'+MessageHelper.messages.SHIPPING_ADDRESS_VALID_ZIP_CODE+"</span>";if(""==_sZipCode){$("#store-locator-zipcode").addClass("invalid");$("#store-locator-zipcode-error").html(e);return!1}if(_sZipCode.length<5||_sZipCode.length>5){$("#store-locator-zipcode").addClass("invalid");$("#store-locator-zipcode-error").html(e);return!1}if(!$.isNumeric(parseInt(_sZipCode))){$("#store-locator-zipcode").addClass("invalid");$("#store-locator-zipcode-error").html(e);return!1}$("#store-locator-zipcode").removeClass("invalid");$("#store-locator-zipcode-error").html("");fnShowXHRLoader();fnGetData(ZIPCODE_API);_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnGetNearestStoresByZipCode().")}function fnZIPCodeData(e){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnZIPCodeData().");var t={},o=[],r=document.getElementById("skuList"),n="";if(null!=r&&void 0!=r){o=JSON.parse(r.value);if(o.length>0)for(i=0;i<o.length;i++)n+=o[i]+(i!=o.length-1?",":"")}t.zipCode=_sZipCode;"undefined"!=typeof e?t.showPreferredStore=e:t.showPreferredStore=fnGetPreferedStoreData();""!=n&&null!=n&&(t.productIds=n);""!=_nLastStoreDistance&&null!=_nLastStoreDistance&&(t.distance=_nLastStoreDistance);if(_bIsDebuggingEnabled){console.debug("Debugging:: oJSONData - "+JSON.stringify(t));console.debug("Debugging:: Exiting fnZIPCodeData().")}return t}function fnGetPreferedStoreData(){var e=!1,t=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY)),o=t.petcostores;if("undefined"!=typeof o){var r=JSON.parse(o);if(r.length>1){for(var n=0;n<r.length;n++)if("undefined"!=typeof r[n].isPreferred&&"Y"==r[n].isPreferred){e=!0;break}}else 1==r.length&&"undefined"!=typeof r.isPreferred&&"Y"==r.isPreferred&&(e=!0)}return e}function fnSelectStore(e,t){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnSelectStore(positionInArray).");"undefined"!=typeof productDisplayJS&&(productDisplayJS.bopusInventoryDetailsPopulated=!1);var o={},r=60*_nExpirationMin*1e3,n={},a=[];_showPreferredStore=!1;fnLatitudeLongitudeSetLocalStorage(_userData.LATITUDE,_userData.LONGITUDE);o=parseInt(_nExpirationMin)>0?{petcostores:JSON.stringify(fnShiftArray(_tempStoreData,findIndexByKeyValue(_tempStoreData,"IDENTIFIER",e),0)),storehours:JSON.stringify(_oStoreHours),shipmodes:JSON.stringify(_shipmodedetails),userDetails:JSON.stringify(_userData),timestamp:_timestamp+r}:{petcostores:JSON.stringify(fnShiftArray(_tempStoreData,findIndexByKeyValue(_tempStoreData,"IDENTIFIER",e),0)),storehours:JSON.stringify(_oStoreHours),shipmodes:JSON.stringify(_shipmodedetails),userDetails:JSON.stringify(_userData),timestamp:0};localStorage.setItem(LOCALSTORAGE_STORES_KEY,JSON.stringify(o));n=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));if(Object.keys(n).length>0){a=JSON.parse(n.petcostores);fnSetPhysicalStoreCookie("WC_physicalStores",a);if("function"==typeof window._updateUserStore){_store_got_Changed=!0;sessionStorage.removeItem("USER_SET_PREFERRED_STORE_NAME");sessionStorage.removeItem("USER_SET_PREFERRED_STORE_LOCATION_ID");sessionStorage.removeItem("USER_SET_PREFERRED_STORE_ID");window._updateUserStore({id:a[0].IDENTIFIER,locationId:a[0].STLOC_ID,name:a[0].DSNAME})}_populate_Service_location();dojo.topic.publish("changeStlocIdForCheckout",a[0].STLOC_ID)}try{var i={};i.physical_store_id=e;i.event_name="store_modal_changed_store";pushEvent(i)}catch(e){console.log("An error occurred in creating the event store_modal_changed_store. "+e);return!0}fnBuildStoreInfoUI(a,t);_nLastStoreDistance="";_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnSelectStore(positionInArray).")}function fnUpdateBopusHeader(){var e={},t=[],o={},e=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY));if(void 0!=e&&null!=e&&Object.keys(e).length>0){t=JSON.parse(e.petcostores);o=JSON.parse(e.storehours);var r=t[0].IDENTIFIER;if(Object.keys(o).length>0&&null!=r)switch(CheckoutHelperJS.presentDate.getDay()){case 0:"00:00:00"!=o[r].T7OPEN&&"00:00:00"!=o[r].T7CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T7CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 1:"00:00:00"!=o[r].T1OPEN&&"00:00:00"!=o[r].T1CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T1CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 2:"00:00:00"!=o[r].T2OPEN&&"00:00:00"!=o[r].T2CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T2CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 3:"00:00:00"!=o[r].T3OPEN&&"00:00:00"!=o[r].T3CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T3CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 4:"00:00:00"!=o[r].T4OPEN&&"00:00:00"!=o[r].T4CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T4CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 5:"00:00:00"!=o[r].T5OPEN&&"00:00:00"!=o[r].T5CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T5CLOSE,CheckoutHelperJS.presentDate.getDay());break;case 6:"00:00:00"!=o[r].T6OPEN&&"00:00:00"!=o[r].T6CLOSE&&CheckoutHelperJS.checkStoreHours(o[r].T6CLOSE,CheckoutHelperJS.presentDate.getDay())}}}function fnShiftArray(e,t,o){if(_bIsDebuggingEnabled){console.debug("Debugging:: Entering fnShiftArray(array, old_index, new_index).");console.debug("Debugging:: array - "+e);console.debug("Debugging:: old_index - "+t);console.debug("Debugging:: new_index - "+o)}for(;t<0;)t+=e.length;for(;o<0;)o+=e.length;if(o>=e.length)for(var r=o-e.length;r--+1;)e.push(void 0);e.splice(o,0,e.splice(t,1)[0]);if(_bIsDebuggingEnabled){console.debug("Debugging:: array - "+e);console.debug("Debugging:: Exiting fnShiftArray(array, old_index, new_index).")}return e}function fnGetSortOrder(e){return function(t,o){return t[e]>o[e]?1:t[e]<o[e]?-1:0}}function findIndexByKeyValue(e,t,o){for(var r=0;r<e.length;r++)if(e[r][t]==o)return r;return null}function fnShowXHRLoader(){$("#store-loader").css({position:"absolute",top:"50%",left:"48%","z-index":"1001"}).show();$("#background-loader").css({position:"fixed",left:"0",top:"0",width:"100%",height:"300%","background-color":"rgba(255,255,255,0.80)","z-index":"999"}).show()}function fnHideXHRLoader(){$("#store-loader").hide();$("#background-loader").hide()}function fnGetInventory(e){var t=document.getElementById("catEntryIdForBOPUSModal"),o="";if(null!=e&&""!=e){null!=t&&void 0!=t&&(o=t.value.indexOf(",")!=-1?t.value.split(",")[0]:t.value);productDisplayJS.storeId=_sStoreId;var r=$("#inventorySystem").val();if(r!=-4){var n=productDisplayJS.findYIHInvetoryAvailabilityURL(o,e);$.ajax({url:n,type:"GET",contentType:"application/json",dataType:"json",data:"",cache:!1,async:!1,success:function(e){var t={};if("undefined"!=typeof e.inStoreInventory)for(var o=e.inStoreInventory,r=0;r<o.length;r++){var n=o[r].stlocId;t[n]=o[r].alertLevel}_oInStoreInventoryData=t},error:function(e){console.log("An error occurred in fnGetInventory() while making a call to GetInventoryStatusByIDView. "+e)}})}else{var a=new Object;a.itemId=o;a.langId=WCParamJS.langId;a.storeId=WCParamJS.storeId;a.catalogId=WCParamJS.catalogId;a.storeModal=!0;a.storeLoc=e;a.fetchStoreInventory=!0;dojo.xhrPost({url:getAbsoluteURL()+"GetInventoryStatusByIDView",handleAs:"json-comment-filtered",content:a,service:this,timeout:5e3,sync:!0,load:function(e){var t=[],o={};if("undefined"!=typeof e.inStoreInventory){var r=e.inStoreInventory;if(null!=r.stores&&""!=r.stores){t=r.stores;for(i=0;i<t.length;i++){var n=t[i].id;o[n]=t[i].alertLevel}}}_oInStoreInventoryData=o},error:function(e,t){console.log(storeNLS.INV_STATUS_RETRIEVAL_ERROR)}})}}}function fnGetMoreStores(){var e=$(".row-set");if(e.length>=20){$("#load-more-button").addClass("disabled").removeClass("btn-primary").removeAttr("onclick");$("#load-more-button").attr("disabled","disabled");$("#no-more-stores").show();return!1}fnShowXHRLoader();fnGetData(ZIPCODE_API,!1)}function fnToDateTimeFormat(e){var t=new Date;t.setHours(e.substr(0,e.indexOf(":")));t.setMinutes(e.substr(e.indexOf(":")+1));t.setSeconds(0);return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function checkAndProcessUrlStoreParam(){var e=window.location.search.substring(1);if(""!=e)for(var t=e.split("&"),o=0;o<t.length;o++){var r=t[o].split("=");if(r[0]==_storeCodeParameter&&""!=r[1].trim()){_storePassedAsParam=r[1].trim();localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100);_sGoogleStoreCodePresent=!0}}}function checkIfStoreStatusAndClearStorage(e){null==ClosedStoreDetailsObj?$.ajax({url:getAbsoluteURL()+"ClosedStoreDetails?catalogId=10051&langId=-1&storeId=10151",type:"GET",cache:!1,contentType:"application/json",dataType:"json",data:"",success:function(t){IS_CLOSED_CALL_FIRED=!1;ClosedStoreDetailsObj=t;callClosedStoreDataFn(e,t)},error:function(e){console.log(e)}}):callClosedStoreDataFn(e,ClosedStoreDetailsObj)}function callClosedStoreDataFn(petcoStores,data){if(!IS_CLOSED_CALL_FIRED){for(var shoulExpireeStorageCleared=!0,triggeredCall=!1,i=0;i<petcoStores.length;i++){for(var ix in data.closedStores){for(var j in data.closedStores[ix])if(0==i&&j==petcoStores[i].IDENTIFIER){localStorage.removeItem(LOCALSTORAGE_STORES_KEY);shoulExpireeStorageCleared=!1;if($("#petcoNearestLocationsInitScript").length>0&&!IS_CLOSED_CALL_FIRED){triggeredCall=!0;IS_CLOSED_CALL_FIRED=!0;eval($("#petcoNearestLocationsInitScript").html());break}}if(triggeredCall)break}if(0==i)break}if(shoulExpireeStorageCleared){var mapFfromLocal={},isDataExistsForClosed=!1;for(var iy in data.closedStores)for(var jx in data.closedStores[iy]){mapFfromLocal[jx]="true";isDataExistsForClosed=!0}var expiredStoresFromLocal=localStorage.getItem(EXPIR_STORE_DATA);if(null!=expiredStoresFromLocal){var expiredStoresFromLocalJSONTmp=JSON.parse(expiredStoresFromLocal);if(0==expiredStoresFromLocalJSONTmp.closedStores.length){localStorage.setItem(EXPIR_STORE_DATA,JSON.stringify(data));if(isDataExistsForClosed){if($("#petcoNearestLocationsInitScript").length>0&&!IS_CLOSED_CALL_FIRED){IS_CLOSED_CALL_FIRED=!0;eval($("#petcoNearestLocationsInitScript").html())}expiredStoresFromLocal=null}}}if(null!=expiredStoresFromLocal){var expiredStoresFromLocalJSON=JSON.parse(expiredStoresFromLocal);for(var ix in expiredStoresFromLocalJSON.closedStores)for(var j in expiredStoresFromLocalJSON.closedStores[ix])if("undefined"==typeof mapFfromLocal[j]){localStorage.removeItem(LOCALSTORAGE_STORES_KEY);if($("#petcoNearestLocationsInitScript").length>0&&!IS_CLOSED_CALL_FIRED){IS_CLOSED_CALL_FIRED=!0;eval($("#petcoNearestLocationsInitScript").html())}break}}}localStorage.setItem(EXPIR_STORE_DATA,JSON.stringify(data))}}function fnGetNearestLocations(e,t,o,r,n,a,i,d,s){if(_bIsDebuggingEnabled){console.debug("Debugging:: fnGetNearestLocations(storeId, expirationMin, isHTML5Geolocation, isGoogleGeoAPI, HTML5GeoTimeout, XHRTimeout, googleApiUrl, googleApiKey, isDebuggingEnabled).");console.debug("Debugging:: storeId - "+e);console.debug("Debugging:: expirationMin - "+t);console.debug("Debugging:: isHTML5Geolocation - "+o);console.debug("Debugging:: isGoogleGeoAPI - "+r);console.debug("Debugging:: HTML5GeoTimeout - "+n);console.debug("Debugging:: XHRTimeout - "+a);console.debug("Debugging:: googleApiUrl - "+i);console.debug("Debugging:: googleApiKey - "+d);console.debug("Debugging:: isDebuggingEnabled - "+s)}var l=dojo.cookie("isEASession");if("undefined"==typeof l||"yes"!=l){try{""!=e&&(_sStoreId=e);""!=t&&(_nExpirationMin=parseInt(t));""!=o&&(_bIsHTML5Geolocation="true"===o.toLowerCase());""!=r&&(_bIsGoogleGeoAPI="true"===r.toLowerCase());""!=n&&(_nHTML5GeoTimeout=parseInt(n));""!=a&&(_nXHRTimeout=parseInt(a));""!=i&&(_sGoogleAPIUrl=i);""!=d&&(_sKey=d);""!=s&&(_bIsDebuggingEnabled="true"===s.toLowerCase());checkIfReactLocationIsDifferent();checkAndProcessUrlStoreParam();if(fnCheckLocalStorage()){if(fnCheckLocalStorageLatLong())fnGeoLocation();else{fnGeoLocationFromLatLongLocalStorage();_populate_Service_location()}var c=dojo.cookie("Edgescape-Country");"undefined"!=typeof c&&"US"==c&&dojo.topic.subscribe("callCompletedforLocationCheck",function(e){setTimeout(function(){if("AKAMAI"!=e){if(fnCheckLocalStorage()){var t=dojo.cookie("Edgescape-Zip");if("undefined"!=typeof t&&""!=t&&null!=t){var o=t.split("+"),r=o[0].split("-");_akamaiZipCode=r[0];fnGetData(AKAMAI_ZIPCODE)}}}else fnIsPDP()&&fnIsBOPUSItem()&&(_changeStoreModalClick?_changeStoreModalClick=!1:fnBuildStoreInfoUI())},2e3)})}else{_populate_Service_location();dojo.topic.publish("BopusAreaRestrictionCheck","FromLocalHost");if(!fnIsPDP()||!fnIsBOPUSItem())return;fnBuildStoreInfoUI()}}catch(e){console.log("An error occurred in fnGetNearestLocations. "+e);return}_bIsDebuggingEnabled&&console.debug("Debugging:: Exiting fnGetNearestLocations(storeId, expirationMin, isHTML5Geolocation, isGoogleGeoAPI, isDebuggingEnabled).")}}function fnAkamaiZIPCodeData(){_bIsDebuggingEnabled&&console.debug("Debugging:: Entering fnZIPCodeData().");var e={},t=[],o=document.getElementById("skuList"),r="";if(null!=o&&void 0!=o){t=JSON.parse(o.value);if(t.length>0)for(i=0;i<t.length;i++)r+=t[i]+(i!=t.length-1?",":"")}e.zipCode=_akamaiZipCode;e.akamaiFlag="yes";""!=r&&null!=r&&(e.productIds=r);e.showPreferredStore=!0;if(_bIsDebuggingEnabled){console.debug("Debugging:: oJSONData - "+JSON.stringify(e));console.debug("Debugging:: Exiting fnZIPCodeData().")}return e}function updateReactStoreChange(payLoad){try{if("undefined"!=typeof payLoad){var storeId=payLoad.id;console.log("_storePassedAsParam"+storeId);_storePassedAsParam=storeId;localStorage.removeItem(LOCALSTORAGE_STORES_KEY);document.body.style.zoom=window.innerWidth/window.outerWidth;setTimeout(function(){if($('div[dojotype="wc.widget.RefreshArea"][controllerid^="searchBasedNavigation_controller"]').length>0||$('div[dojotype="wc.widget.RefreshArea"][controllerid^="rfkSearchResultDisplayController"]').length>0||$('div[dojotype="wc.widget.RefreshArea"][controllerid^="ShopCartDisplayController"]').length>0){var loc=window.location.href,index=loc.indexOf("#");index>0?window.location=loc.substring(0,index):window.location.reload(!0)}else $("#petcoNearestLocationsInitScript").length>0&&eval($("#petcoNearestLocationsInitScript").html())},2e3)}}catch(e){console.log(e)}}function checkIfReactLocationIsDifferent(){_populate_Service_location();var e=getCookie("AT_RDSN_option");if("var_B"!==e){sessionStorage.removeItem("USER_SET_PREFERRED_STORE_NAME");sessionStorage.removeItem("USER_SET_PREFERRED_STORE_LOCATION_ID");sessionStorage.removeItem("USER_SET_PREFERRED_STORE_ID")}else try{var t=sessionStorage.getItem("USER_SET_PREFERRED_STORE_ID"),o=sessionStorage.getItem("USER_SET_PREFERRED_STORE_LOCATION_ID");console.log("reactStoreId>>>>>>"+t);var r=null!=JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY))?JSON.parse(localStorage.getItem(LOCALSTORAGE_STORES_KEY)):{};console.log("oNeareststores>>>>>>"+r);if((null==r||null!=r&&0==Object.keys(r).length||null!=r&&Object.keys(r).length>0&&"undefined"==typeof r.petcostores)&&null!=t){console.log("oNeareststores>>>>>>"+r);_storePassedAsParam=t;localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100)}else if(null!=t&&null!=o&&""!=t&&""!=o){var n=!1,a=decodeURIComponent(getCookie("WC_physicalStores")).split(",");""!=a[0]&&a[0].trim()===o&&(n=!0);if(!n){_storePassedAsParam=t;localStorage.removeItem(LOCALSTORAGE_STORES_KEY);fnCreateCookie("WC_physicalStores","",-100)}}}catch(e){console.log(e)}}function _populate_Service_location(){console.log("in _populate_Service_location");if(("undefined"==typeof window.pagetype||"undefined"!=typeof window.pagetype&&"home"==!window.pagetype)&&"undefined"!=typeof petcoLocation)try{setTimeout(function(){petcoLocation.populateCity();console.log("in _populate_Service_location")},500)}catch(e){}}var _sStoreId="10151",_nExpirationMin=window.LOCALSTORAGE_EXPIRY_MINUTES?window.LOCALSTORAGE_EXPIRY_MINUTES:1440,_timestamp=(new Date).getTime(),_geoLatitude="",_geoLongitude="",_bIsHTML5Geolocation=!0,_bIsGoogleGeoAPI=!0,_nHTML5GeoTimeout=1e4,_nXHRTimeout=5e3,_bIsDebuggingEnabled=!1,_changeStoreModalClick=!1,_sZipCode="",_tempStoreData=[],_userData={},_oStoreHours={},_shipmodedetails={},_oInStoreInventoryData={},_nLastStoreDistance="",_sKey="",_sGoogleAPIUrl="",_showPreferredStore=!0,_storePassedAsParam="",_storeCodeParameter="store_code",_sGoogleStoreCodePresent=!1,_akamaiZipCode="",_nLocationExpirationMin=window.locationExpirationMin?window.locationExpirationMin:129600,NEAREST_STORES_API="getneareststores",ZIPCODE_API="zipcode",AKAMAI_ZIPCODE="akamai_zipcode",LATITUDE_LONGITUDE_API="latlong",LOCALSTORAGE_STORES_KEY="petcostores",LOCALSTORAGE_LATITUDE_LONGITUDE_KEY="petcostores_latitude_longitude",EXPIR_STORE_DATA="expiredStoreData",LOCALSTORAGE_TIMEOUT_KEY="geolocationtimeout",PETCO_STORE_LOGO="/wcsstore/PetcoStore/img/brand-logo.png",PETCO_NEXT_STORE_LOGO="/wcsstore/PetcoStore/img/next_brand-logo.png",UNLEASHED_STORE_LOGO="/wcsstore/PetcoStore/img/logo-unleashed.gif",UNLEASHED_NEXT_STORE_LOGO="/wcsstore/PetcoStore/img/next_logo-unleashed.png",MAP_PIN_ICON="/wcsstore/PetcoStore/img/map-pin-icon.png",ClosedStoreDetailsObj=null,_store_got_Changed=!1,IS_HTML5_CALL_COMPLETED=!1,akamaiCalled=!1,NoakamaiCalled=!1,IS_CLOSED_CALL_FIRED=!1;return{fnGetNearestLocations:fnGetNearestLocations,fnOpenStoreInfoModal:fnOpenStoreInfoModal,fnCloseStoreInfoModal:fnCloseStoreInfoModal,fnGetNearestStoresByZipCode:fnGetNearestStoresByZipCode,fnSelectStore:fnSelectStore,fnGetMoreStores:fnGetMoreStores,fnUpdateBopusHeader:fnUpdateBopusHeader,fnSetPhysicalStoreCookie:fnSetPhysicalStoreCookie,updateReactStoreChange:updateReactStoreChange}}(),PetcoDataLayer={},product={};$(document).ready(function(){function e(e){I=e;if(null!=I&&""!=I){var t=I.split("|");for(i=0;i<t.length;i++){0===i&&(s=t[i]);1===i&&(l=t[i]);2===i&&(c=t[i]);3===i&&(u=t[i]);4===i&&(p=t[i]);5===i&&(m=t[i]);6===i&&(g=t[i]);7===i&&(f=t[i]);8===i&&(h=t[i])}}}var t=getCookie("pcustData"),o=getCookie("pfirstname"),r=getCookie("WC_UserType"),n=(getCookie("WC_UserId"),new Array);n.push("No");var a=new Array;a.push("0.00");var d="guest";if("G"!=r){null!=document.getElementById("firstName")&&void 0!=o&&"undefined"!=o?document.getElementById("firstName").innerHTML="&nbsp;"+o:null!=document.getElementById("hdr-welcome")&&(document.getElementById("hdr-welcome").style.display="none");d="logged in"}null!=o&&void 0!=o||(o="");var s="",l="",c="",u="",p="",m="",g="",f="",h="",I="";e(t)});var global_data_for_user_reg={},parentGroup_Telium='{"WC_UserRegistrationUpdateForm_FormInput_firstName_In_Register_1|_|firstName":"customer_name","WC_UserRegistrationUpdateForm_FormInput_lastName_In_Register_1|_|lastName":"customer_name","WC_UserRegistrationUpdateForm_FormInput_logonId_In_Register_1|_|logonId":"customer_email","find-pals-member-num|_|palsRewardsNumber":"customer_pals_number","verify-pals-email|_|email2":"customer_email","new-address-addressLine1|_|address1":"customer_address1","new-address-addressLine2|_|address2":"customer_address2","new-address-city|_|city":"customer_city","new-address-zipCode|_|zipCode":"customer_zip","shipping-address-state|_|state":"customer_state","EMAILPREF_1|_|EMAILPREF_4":"customer_newsletter","EMAILPREF_2|_|EMAILPREF_1":"customer_newsletter","EMAILPREF_3|_|EMAILPREF_2":"customer_newsletter","EMAILPREF_4|_|EMAILPREF_3":"customer_newsletter","PETS_1|_|PETS_11":"customer_pettype","PETS_2|_|PETS_7":"customer_pettype","PETS_3|_|PETS_6":"customer_pettype","PETS_4|_|PETS_12":"customer_pettype","PETS_5|_|PETS_10":"customer_pettype","PETS_6|_|PETS_9":"customer_pettype","PETS_7|_|PETS_8":"customer_pettype","WC_UserRegistrationAddForm_FormInput_firstName_In_Register_1|_|firstName":"customer_name","WC_UserRegistrationAddForm_FormInput_lastName_In_Register_1|_|lastName":"customer_name","WC_UserRegistrationAddForm_FormInput_logonId_In_Register_1|_|logonId":"customer_email","WC_UserRegistrationAddForm_FormInput_Address1_In_Register_1|_|address1":"customer_address1","WC_UserRegistrationAddForm_FormInput_Address2_In_Register_1|_|address2":"customer_address2","WC_UserRegistrationAddForm_FormInput_City_In_Register_1|_|city":"customer_city","WC_UserRegistrationAddForm_FormInput_ZipCode_In_Register_1|_|zipCode":"customer_zip","WC_UserRegistrationAddForm_FormInput_Address2_In_Register_1|_|address2":"customer_address2","WC_UserRegistrationAddForm_FormInput_City_In_Register_1|_|city":"customer_city","WC_UserRegistrationAddForm_FormInput_ZipCode_In_Register_1|_|zipCode":"customer_zip","WC_UserRegistrationAddForm_FormInput_palsRewardsNumber_In_Register_1|_|palsRewardsNumber":"customer_pals_number"}',parentGroupJson_telium=JSON.parse(parentGroup_Telium);$(document).ready(function(){location.search.split("&");$(document.emailPreferencesForm).each(function(e){$("script#dataLayerPageObj").length>0&&$("button",e).each(function(e){dojo.connect(e,"click",function(e){readAndFireTeliumTagForReg()})})});dojo.forEach(dojo.query("input"),function(e){"hidden"!=e.type&&"undefined"!=typeof parentGroupJson_telium[e.id+"|_|"+e.name]&&(global_data_for_user_reg[e.id+"|_|"+e.name]=e.value)});$("select").each(function(e){"undefined"!=typeof parentGroupJson_telium[e.id+"|_|"+e.name]&&(global_data_for_user_reg[e.id+"|_|"+e.name]=e.value)})});if("undefined"==typeof ReflektionHelperJS||null==ReflektionHelperJS||!ReflektionHelperJS)var ReflektionHelperJS=function(){function e(){var e=!1;o();r();a();n();var i,d=localStorage.getItem(J);if(null!=d){i=JSON.parse(d);var s=i.expiryTime,l=(new Date).getTime();if(l>s)e=!1;else{e=!0;G=i.accessToken;W=!0;t()}}else e=!1;if(!e&&""!=V){var c=V,u='{"scope":["search-rec"]}';$.ajax({url:c,type:"POST",data:u,beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")},success:function(e){var o={};o.accessToken=e.accessToken;o.expiryTime=new Date(e.accessTokenExpiryDate).getTime();G=e.accessToken;W=!0;localStorage.setItem(J,JSON.stringify(o));t()},dataType:"json",error:function(e,t,o){G="";removeCookie(U);W=!0}})}}function t(){removeCookie(U);var e=JSON.parse(localStorage.getItem(J));setCookie(U,e.accessToken,{path:"/"})}function o(){var e=$("#REFLEKTION_HOST_URL");e.length>0&&(q=$(e).val())}function r(){var e=$("#REFLEKTION_GET_ACCESS_TOKEN_URL");e.length>0&&(V=$(e).val())}function n(){var e=$("#REFLEKTION_API_TIMEOUT");e.length>0&&(K=$(e).val())}function a(){var e=$("#ENABLE_REFLEKTION");e.length>0&&(ne=!0)}function i(e){e?$("#look-ahead").addClass("active"):$("#look-ahead").removeClass("active")}function d(){a();"undefined"!=typeof document.CatalogSearchForm&&"undefined"!=typeof document.CatalogSearchForm.searchTerm&&ne&&$(document.CatalogSearchForm.searchTerm).on("click keyup blur",function(e){var t=setInterval(function(){if(W){clearInterval(t);if("blur"==e.type)setTimeout(function(){i(!1)},800);else{if("keyup"==e.type&&13==e.keyCode){ReflektionHelperJS.checkBeforeSearchSubmit()&&document.CatalogSearchForm.submit();return}s()}}},100)})}function s(){var e=document.CatalogSearchForm.searchTerm.value.trim();l(e.length>1?e:"");B()}function l(e){if(te!=e){var t=6;$("#noofproducts").length>0&&(t=1*$("#noofproducts").val());Y.data.n_item=t;te=e;Y.data.query.keyphrase.value=[];""!=e&&Y.data.query.keyphrase.value.push(e);var o="";$("#REFLEKTION_RFKID_AUTOCOMPLETE").length>0&&(o=$("#REFLEKTION_RFKID_AUTOCOMPLETE").val());Y.data.widget.rfkid=o;var r="RFK_UUID";"undefined"!=typeof rfk&&null!=rfk&&"undefined"!=typeof rfk.uid&&"function"==typeof rfk.uid&&(r=rfk.uid());Y.data.context.user.uuid=r;var n="//"+q;$.ajax({url:n,type:"POST",data:JSON.stringify(Y),headers:{Authorization:"Bearer "+G},beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")},success:function(t){var o=getCookie("isNewEASession");if(null!=o&&"yes"==o)u(t,e);else{c(t,e);ReflektionHelperJS.bopusAreaRestrictionCheck()}},dataType:"json",error:function(e,t,o){p()}})}else oe&&$("#look-ahead").addClass("active")}function c(e,t){oe=!0;var o=!1,r=t.toLowerCase(),n="",a="";$("#reflektion_autocomplete_brand_emptybox").addClass("hide");$("#reflektion_autocomplete_searchterm_emptybox").addClass("hide");var i=$("#RFLK_SEE_ALL").val(),d=($("#RFLK_SEE_ALL_TRENDING_PRODUCTS").val(),$("#RFLK_TOP_PRODUCTS").val()),s=$("#RFLK_TRENDING_PRODUCTS").val(),l=$("#RFLK_RELATED_SEARCH").val(),c=$("#RFLK_TOP_BRANDS").val(),u=$("#RFLK_TRENDING_CATEGORIES").val(),p=$("#RFLK_TOP_CATEGORIES").val(),m="",g="";if(""!=t){g="PreviewSearch-_-TopCategories:";if("undefined"!=typeof e&&"undefined"!=typeof e.suggestion&&"undefined"!=typeof e.suggestion.category)for(var f in e.suggestion.category){o=!0;n=n+"<li id='categoryItem_"+f+"' role='listitem' tabindex='-1'>";n=n+"<a manual_cm_sp='"+g+(1*f+1)+"-_-"+e.suggestion.category[f].text.split(" ").join("")+"' onclick='clickTrackLink(this);' role='listitem' href='"+j(document.domain+e.suggestion.category[f].url)+"' onmouseout='this.className=\"\"' ";n=n+" title='"+e.suggestion.category[f].text+"'";n=n+" id='category_autoSelectOption_"+f+"'>";n+=e.suggestion.category[f].text.replace(r,"<span class='highlight'>"+t+"</span>");n+="</a></li>"}if(o){a="<div id='topCategoryResults'><div id='topCategoryResults_header'><strong>"+p+"</strong>";a+="<div class='list_section'>";a+="<div title='Category' role='list'>";a+=" <ul class='list-unstyled'>";a+=n;a+="</ul></div></div></div></div>";$("#reflektion_autocomplete_category").html(a);$("#reflektion_autocomplete_category").show();$("#reflektion_autocomplete_category").addClass("show");$("#look-ahead").addClass("active")}else if(""!=t){$("#reflektion_autocomplete_category").hide();$("#reflektion_autocomplete_category").removeClass("show");$("#reflektion_autocomplete_category").html("")}}if(""==t){g="PreviewSearch-_-TrendingCategories:";if("undefined"!=typeof e&&"undefined"!=typeof e.suggestion&&"undefined"!=typeof e.suggestion.trending_category)for(var f in e.suggestion.trending_category){o=!0;n=n+"<li id='categoryItem_"+f+"' role='listitem' tabindex='-1'>";n=n+"<a manual_cm_sp='"+g+(1*f+1)+"-_-"+e.suggestion.trending_category[f].text.split(" ").join("")+"' onclick='clickTrackLink(this);' role='listitem' href='"+j(document.domain+e.suggestion.trending_category[f].url)+"' onmouseout='this.className=\"\"' ";n=n+"  title='"+e.suggestion.trending_category[f].text+"'";n=n+" id='category_autoSelectOption_"+f+"'>";n+=e.suggestion.trending_category[f].text.replace(r,"<span class='highlight'>"+t+"</span>");n+="</a></li>"}if(o){a="<div id='topCategoryResults'><div id='topCategoryResults_header'><strong>"+u+"</strong>";a+="<div class='list_section'>";a+="<div title='Category' role='list'>";a+=" <ul class='list-unstyled'>";a+=n;a+="</ul></div></div></div></div>";$("#reflektion_autocomplete_category").html(a);$("#reflektion_autocomplete_category").show();$("#reflektion_autocomplete_category").addClass("show");$("#look-ahead").addClass("active")}else if(""!=t){$("#reflektion_autocomplete_category").hide();$("#reflektion_autocomplete_category").removeClass("show");$("#reflektion_autocomplete_category").html("")}}var h="PreviewSearch-_-TopBrands:",I=!1,y="";a="";if("undefined"!=typeof e&&"undefined"!=typeof e.suggestion&&"undefined"!=typeof e.suggestion.brand)for(var f in e.suggestion.brand){I=!0;y=y+"<li id='brandItem_"+f+"' role='listitem' tabindex='-1'>";y=y+"<a manual_cm_sp='"+h+(1*f+1)+"-_-"+e.suggestion.brand[f].text.split(" ").join("")+"' onclick='clickTrackLink(this);' role='listitem' href='//"+document.domain+e.suggestion.brand[f].url+"' onmouseout='this.className=\"\"' ";y=y+" title='"+e.suggestion.brand[f].text+"'";y=y+" id='brand_autoSelectOption_"+f+"'>";y+=e.suggestion.brand[f].text.replace(r,"<span class='highlight'>"+t+"</span>");y+="</a></li>"}if(I){a="<div id='topBrandResults'><div id='topBrandResults_header'><strong>"+c+"</strong>";a+="<div class='list_section'>";a+="<div title='Brand' role='list'>";a+=" <ul class='list-unstyled'>";a+=y;a+="</ul></div></div></div></div>";$("#reflektion_autocomplete_brand").html(a);$("#reflektion_autocomplete_brand").show();$("#reflektion_autocomplete_brand").addClass("show");$("#look-ahead").addClass("active")}else if(""!=t){$("#reflektion_autocomplete_brand").hide();$("#reflektion_autocomplete_brand").removeClass("show");$("#reflektion_autocomplete_brand").html("")}var v="PreviewSearch-_-RelatedSearches:",C=!1,_="";a="";if("undefined"!=typeof e&&"undefined"!=typeof e.suggestion&&"undefined"!=typeof e.suggestion.keyphrase)for(var f in e.suggestion.keyphrase)if(""!=e.suggestion.keyphrase[f].text.trim()){C=!0;_=_+"<li id='searchtermItem_"+f+"' role='listitem' tabindex='-1'>";_=_+"<a manual_cm_sp='"+v+(1*f+1)+"-_-"+e.suggestion.keyphrase[f].text.split(" ").join("")+"'   role='listitem' href='#' onmouseout='this.className=\"\"' ";_=_+" onmouseover='SearchJS.enableAutoSelect(\""+f+"\");'  ";_=_+" onclick='clickTrackLink(this);SearchJS.selectAutoSuggest(this.title); return false;' title='"+e.suggestion.keyphrase[f].text+"'";_=_+" id='searchterm_autoSelectOption_"+f+"'>";_+=e.suggestion.keyphrase[f].text;_+="</a></li>"}if(C){a="<div id='topsearchtermResults'><div id='topsearchtermResults_header'><strong>"+l+"</strong>";
a+="<div class='list_section'>";a+="<div title='Search Term' role='list'>";a+=" <ul class='list-unstyled'>";a+=_;a+="</ul></div></div></div></div>";$("#reflektion_autocomplete_searchterm").html(a);$("#reflektion_autocomplete_searchterm").show();$("#reflektion_autocomplete_searchterm").addClass("show");$("#look-ahead").addClass("active")}else if(""!=t){$("#reflektion_autocomplete_searchterm").hide();$("#reflektion_autocomplete_searchterm").removeClass("show");$("#reflektion_autocomplete_searchterm").html("")}var S="PreviewSearch-_-TopProducts:",b=!1;if(e.content.product.total_item>0){var E="<div class='row'>";if(""==t){S="PreviewSearch-_-TrendingProducts:";E=E+"<div class='col-12'><strong>"+s+"</strong></div></div>"}else{S="PreviewSearch-_-TopProducts:";E=E+"<div class='col-12'><strong>"+d+"</strong></div></div>"}E+="<div class='row'>";if("undefined"!=typeof e&&"undefined"!=typeof e.content&&"undefined"!=typeof e.content.product)for(var f in e.content.product.value){m="undefined"!=typeof e.content.product.value[f].swatch&&"undefined"!=typeof e.content.product.value[f].swatch[0].is_bopus_area_restriction_req?e.content.product.value[f].swatch[0].is_bopus_area_restriction_req:"";b=!0;E=E+'<div manual_cm_sp="'+S+(1*f+1)+"-_-"+e.content.product.value[f].sku.split(" ").join("")+'"  class="col-4 prod-tile-rfl" onclick="clickTrackLink(this);location.href=\'//'+document.domain+e.content.product.value[f].url+"'\">";"undefined"!=typeof e.content.product.value[f].listprice_USD&&1*e.content.product.value[f].listprice_USD.replace("$","")>e.content.product.value[f].final_price&&(E+='<img class="badge" src="/wcsstore/PetcoStore/img/ON_SALE.png"/>');E+='<div class="col-12 col-4-sm text-center " >';var T=e.content.product.value[f].image_url.replace("/wcsstore/PetcoCAS/",""),D=T+"?$tile-recommendations$",A=T+"?$PDP-thumbnail$";if(isCloudniaryEnabled()){D=T.replace("f_auto,q_auto","f_auto,q_auto,t_tile-recommendations");A=T.replace("f_auto,q_auto","f_auto,q_auto,t_PDP-thumbnail")}E=E+'<img class="desktop-only rfk-img-responsive" src="'+D+'" title="'+e.content.product.value[f].name+'">';E=E+'<img class="mobile-only rfk-img-responsive" src="'+A+'" title="'+e.content.product.value[f].name+'">';E+="</div>";E+='<div class="col-12 col-8-sm text-left product-name" >';var x=e.content.product.value[f].brands[0];if("undefined"!=typeof x&&0==e.content.product.value[f].name.indexOf(x)){E=E+"<strong>"+x+"</strong>";E+=e.content.product.value[f].name.replace(x,"")}else E+=e.content.product.value[f].name;E+="</div>";E+="undefined"!=typeof m&&""!=m&&"yes"==m.toLowerCase()?'<div class="col-8-sm mobile-only hideBopusAreaRestriction product-pricing rfk-product-pricing-mobile" >':'<div class="col-8-sm mobile-only product-pricing rfk-product-pricing-mobile" >';E=E+'<span class="product-price-promo">'+e.content.product.value[f].price_USD+"</span>";"undefined"!=typeof e.content.product.value[f].listprice_USD&&1*e.content.product.value[f].listprice_USD.replace("$","")>e.content.product.value[f].final_price&&(E=E+'<span class="product-price-crossout"> was'+e.content.product.value[f].listprice_USD+"</span>");E+="</div>";E+="undefined"!=typeof m&&""!=m&&"yes"==m.toLowerCase()?'<div class="col-12  text-center desktop-only product-pricing hideBopusAreaRestriction" >':'<div class="col-12  text-center desktop-only product-pricing" >';var R="";if("undefined"!=typeof e.content.product.value[f].final_price){R=e.content.product.value[f].final_price;"string"!=typeof R&&(R=R.toString());R.indexOf("$")==-1&&(R="$"+R)}else R=e.content.product.value[f].listprice_USD;E=E+'<span class="product-price-promo">'+R+"</span>";"undefined"!=typeof e.content.product.value[f].listprice_USD&&1*e.content.product.value[f].listprice_USD.replace("$","")>e.content.product.value[f].final_price&&(E=E+'<span class="product-price-crossout"> was'+e.content.product.value[f].listprice_USD+"</span>");E+="</div>";E+="</div>"}E+="</div>";E+="<div class='row desktop-only'>";""==t||(E=E+'<div class="col-2">&nbsp;</div><div class="col-8 text-center"><a href="javascript:document.CatalogSearchForm.submit()" class="btn btn-primary margin-bottom-sm btn-full" role="button">'+i+'</a></div><div class="col-2"></div></div>')}else if(""!=t){$("#productSuggestionResults_div").html("");$("#productSuggestionResults_div").hide();$("#productSuggestionResults_div").removeClass("show")}if(b){$("#productSuggestionResults_div").show();$("#productSuggestionResults_div").addClass("show");$("#productSuggestionResults_div").html(E);$("#look-ahead").addClass("active")}$("#reflektion_AutoCompleteList").addClass("show");$("#reflektion_AutoCompleteList").removeClass("hide");$("#reflektion_AutoCompleteList_empty").addClass("hide");$("#reflektion_AutoCompleteList_empty").removeClass("show");var P=window.matchMedia("(max-width: 768px)").matches;P||setTimeout(function(){$(".prod-tile-rfl .product-name").dotdotdot()},25);var w=.5*$(window).width();2*$("#SimpleSearchForm_SearchTerm").width()<w&&(w=2*$("#SimpleSearchForm_SearchTerm").width());var k=window.innerHeight-$("#header").height();$("#search.search.persist-active.active").length>0&&(k-=$("#search.search.persist-active.active").height());if(P){$("#look-ahead").width($(window).width());$("#look-ahead").height((window.innerHeight-($("#header").height()+$("#search").height()))/2);$("#look-ahead").css("maxHeight",(window.innerHeight-($("#header").height()+$("#search").height()))/2+"px")}else{$("#productSuggestionResults_div").height()>$("#infoPart").height()?$("#infoPart").height($("#productSuggestionResults_div").height()):$("#productSuggestionResults_div").height($("#infoPart").height());$("#infoPart").height()+5<k&&(k=$("#infoPart").height()+5);$("#look-ahead").width(w);$("#look-ahead").height(k);$("#look-ahead").css("maxHeight",k+"px");$("#search.search.persist-active.active").length>0?$("#look-ahead").css("marginLeft","-"+($("#look-ahead").width()-$("#search.search.persist-active.active").width())+"px"):$("#look-ahead").css("marginLeft","0px")}if(""==r){$("#reflektion_autocomplete_brand").html($("#reflektion_autocomplete_brand_emptybox").html());$("#reflektion_autocomplete_searchterm").html($("#reflektion_autocomplete_searchterm_emptybox").html())}else if(!($("#reflektion_autocomplete_category").hasClass("show")||$("#reflektion_autocomplete_brand").hasClass("show")||$("#reflektion_autocomplete_searchterm").hasClass("show")||$("#productSuggestionResults_div").hasClass("show")||""==t)){$("#reflektion_AutoCompleteList_empty").addClass("show");$("#reflektion_AutoCompleteList_empty").removeClass("hide");$("#reflektion_AutoCompleteList").addClass("hide");$("#reflektion_AutoCompleteList").removeClass("show");P?$("#reflektion_AutoCompleteList_empty div.row div.col-12.emptyresult").html('<strong>No results for "'+t.substring(0,150)+'"</strong>'):$("#reflektion_AutoCompleteList_empty div.row div.col-12.emptyresult").html('<strong>No results for "'+t+'"</strong>');$("#look-ahead").height(1.2*$("#reflektion_AutoCompleteList_empty").height())}}function u(e,t){oe=!0;var o=t.toLowerCase(),r="";$("#reflektion_autocomplete_brand_emptybox").addClass("hide");$("#reflektion_autocomplete_searchterm_emptybox").addClass("hide");var n=$("#RFLK_SEE_ALL").val(),a=($("#RFLK_SEE_ALL_TRENDING_PRODUCTS").val(),$("#RFLK_TOP_PRODUCTS").val()),i=$("#RFLK_TRENDING_PRODUCTS").val(),d=($("#RFLK_RELATED_SEARCH").val(),$("#RFLK_TOP_BRANDS").val()),s=($("#RFLK_TRENDING_CATEGORIES").val(),$("#RFLK_TOP_CATEGORIES").val(),"PreviewSearch-_-TopBrands:"),l=!1,c="";r="";if("undefined"!=typeof e&&"undefined"!=typeof e.suggestion&&"undefined"!=typeof e.suggestion.brand)for(var u in e.suggestion.brand){l=!0;c=c+"<li id='brandItem_"+u+"' role='listitem' tabindex='-1'>";c=c+"<a manual_cm_sp='"+s+(1*u+1)+"-_-"+e.suggestion.brand[u].text.split(" ").join("")+"' onclick=role='listitem' href='//"+(document.domain+e.suggestion.brand[u].url).replace("petcostore","petcoea")+"' onmouseout='this.className=\"\"' ";c=c+" title='"+e.suggestion.brand[u].text+"'";c=c+" id='brand_autoSelectOption_"+u+"'>";c+=e.suggestion.brand[u].text.replace(o,"<span class='highlight'>"+t+"</span>");c+="</a></li>"}if(l){r="<div id='topBrandResults'><div id='topBrandResults_header'><strong>"+d+"</strong>";r+="<div class='list_section'>";r+="<div title='Brand' role='list'>";r+=" <ul class='list-unstyled'>";r+=c;r+="</ul></div></div></div></div>";$("#reflektion_autocomplete_brand").html(r);$("#reflektion_autocomplete_brand").show();$("#reflektion_autocomplete_brand").addClass("show");$("#look-ahead").addClass("active")}else if(""!=t){$("#reflektion_autocomplete_brand").hide();$("#reflektion_autocomplete_brand").removeClass("show");$("#reflektion_autocomplete_brand").html("")}var p="PreviewSearch-_-TopProducts:",m=!1;if(e.content.product.total_item>0){var g="<div class='row'>";if(""==t){p="PreviewSearch-_-TrendingProducts:";g=g+"<div class='col-12'><strong>"+i+"</strong></div></div>"}else{p="PreviewSearch-_-TopProducts:";g=g+"<div class='col-12'><strong>"+a+"</strong></div></div>"}g+="<div class='row'>";if("undefined"!=typeof e&&"undefined"!=typeof e.content&&"undefined"!=typeof e.content.product)for(var u in e.content.product.value){m=!0;g=g+'<div manual_cm_sp="'+p+(1*u+1)+"-_-"+e.content.product.value[u].sku.split(" ").join("")+'"  class="col-4 prod-tile-rfl" onclick="location.href=\'//'+(document.domain+e.content.product.value[u].url).replace("petcostore","petcoea")+"'\">";"undefined"!=typeof e.content.product.value[u].listprice_USD&&1*e.content.product.value[u].listprice_USD.replace("$","")>e.content.product.value[u].final_price&&(g+='<img class="badge" src="/wcsstore/PetcoStore/img/ON_SALE.png"/>');g+='<div class="col-12 col-4-sm text-center " >';var f=e.content.product.value[u].image_url.replace("/wcsstore/PetcoCAS/",""),h=f+"?$tile-recommendations$",I=f+"?$PDP-thumbnail$";if(isCloudniaryEnabled()){h=f.replace("f_auto,q_auto","f_auto,q_auto,t_tile-recommendations");I=f.replace("f_auto,q_auto","f_auto,q_auto,t_PDP-thumbnail")}g=g+'<img class="desktop-only rfk-img-responsive" src="'+h+'" title="'+e.content.product.value[u].name+'">';g=g+'<img class="mobile-only rfk-img-responsive" src="'+I+'" title="'+e.content.product.value[u].name+'">';g+="</div>";g+='<div class="col-12 col-8-sm text-left product-name" >';var y=e.content.product.value[u].brands[0];if("undefined"!=typeof y&&0==e.content.product.value[u].name.indexOf(y)){g=g+"<strong>"+y+"</strong>";g+=e.content.product.value[u].name.replace(y,"")}else g+=e.content.product.value[u].name;g+="</div>";g+='<div class="col-8-sm mobile-only product-pricing rfk-product-pricing-mobile" >';g=g+'<span class="product-price-promo">'+e.content.product.value[u].price_USD+"</span>";"undefined"!=typeof e.content.product.value[u].listprice_USD&&1*e.content.product.value[u].listprice_USD.replace("$","")>e.content.product.value[u].final_price&&(g=g+'<span class="product-price-crossout"> was'+e.content.product.value[u].listprice_USD+"</span>");g+="</div>";g+='<div class="col-12  text-center desktop-only product-pricing" >';g=g+'<span class="product-price-promo">'+e.content.product.value[u].price_USD+"</span>";"undefined"!=typeof e.content.product.value[u].listprice_USD&&1*e.content.product.value[u].listprice_USD.replace("$","")>e.content.product.value[u].final_price&&(g=g+'<span class="product-price-crossout"> was'+e.content.product.value[u].listprice_USD+"</span>");g+="</div>";g+="</div>"}g+="</div>";g+="<div class='row desktop-only'>";""==t||(g=g+'<div class="col-2">&nbsp;</div><div class="col-8 text-center"><a href="javascript:document.CatalogSearchForm.submit()" class="btn btn-primary margin-bottom-sm btn-full" role="button">'+n+'</a></div><div class="col-2"></div></div>')}else if(""!=t){$("#productSuggestionResults_div").html("");$("#productSuggestionResults_div").hide();$("#productSuggestionResults_div").removeClass("show")}if(m){$("#productSuggestionResults_div").show();$("#productSuggestionResults_div").addClass("show");$("#productSuggestionResults_div").html(g);$("#look-ahead").addClass("active")}$("#reflektion_AutoCompleteList").addClass("show");$("#reflektion_AutoCompleteList").removeClass("hide");$("#reflektion_AutoCompleteList_empty").addClass("hide");$("#reflektion_AutoCompleteList_empty").removeClass("show");var v=window.matchMedia("(max-width: 768px)").matches;v||setTimeout(function(){$(".prod-tile-rfl .product-name").dotdotdot()},25);var C=.5*$(window).width();2*$("#SimpleSearchForm_SearchTerm").width()<C&&(C=2*$("#SimpleSearchForm_SearchTerm").width());var _=window.innerHeight-$("#header").height();$("#search.search.persist-active.active").length>0&&(_-=$("#search.search.persist-active.active").height());if(v){$("#look-ahead").width($(window).width());$("#look-ahead").height((window.innerHeight-($("#header").height()+$("#search").height()))/2);$("#look-ahead").css("maxHeight",(window.innerHeight-($("#header").height()+$("#search").height()))/2+"px")}else{$("#productSuggestionResults_div").height()>$("#infoPart").height()?$("#infoPart").height($("#productSuggestionResults_div").height()):$("#productSuggestionResults_div").height($("#infoPart").height());$("#infoPart").height()+5<_&&(_=$("#infoPart").height()+5);$("#look-ahead").width(C);$("#look-ahead").height(_);$("#look-ahead").css("maxHeight",_+"px");$("#search.search.persist-active.active").length>0?$("#look-ahead").css("marginLeft","-"+($("#look-ahead").width()-$("#search.search.persist-active.active").width())+"px"):$("#look-ahead").css("marginLeft","0px")}if(""==o){$("#reflektion_autocomplete_brand").html($("#reflektion_autocomplete_brand_emptybox").html());$("#reflektion_autocomplete_searchterm").html($("#reflektion_autocomplete_searchterm_emptybox").html())}else if(!($("#reflektion_autocomplete_category").hasClass("show")||$("#reflektion_autocomplete_brand").hasClass("show")||$("#reflektion_autocomplete_searchterm").hasClass("show")||$("#productSuggestionResults_div").hasClass("show")||""==t)){$("#reflektion_AutoCompleteList_empty").addClass("show");$("#reflektion_AutoCompleteList_empty").removeClass("hide");$("#reflektion_AutoCompleteList").addClass("hide");$("#reflektion_AutoCompleteList").removeClass("show");v?$("#reflektion_AutoCompleteList_empty div.row div.col-12.emptyresult").html('<strong>No results for "'+t.substring(0,150)+'"</strong>'):$("#reflektion_AutoCompleteList_empty div.row div.col-12.emptyresult").html('<strong>No results for "'+t+'"</strong>');$("#look-ahead").height(1.2*$("#reflektion_AutoCompleteList_empty").height())}}function p(){}function m(){var e=$("#SimpleSearchForm_SearchTerm"),t=$("#submitButton");if(e.val().length>0){t.addClass("active");var o=e.val();e.val(o.split("’").join("'"));if(o.indexOf(",")>-1&&o.split(",").length>2){o=o.replace(",","<<COMMA>>");o=o.replace(",","<<COMMA>>");o=o.split(",").join("");o=o.split("<<COMMA>>").join(",");e.val(o)}}else t.removeClass("active")}function g(){I();e();f();C()}function f(){var e="RFK_UUID",t="-1002",o="";"undefined"!=typeof rfk&&null!=rfk&&"undefined"!=typeof rfk.uid&&"function"==typeof rfk.uid&&(e=rfk.uid());var r=getCookie("WC_UserId");"undefined"!=typeof r&&(t=r);$("#REFLEKTION_RFKID_AUTOCOMPLETE").length>0&&(o=$("#REFLEKTION_RFKID_AUTOCOMPLETE").val());Y={};Y.data={};Y.data.context={};Y.data.context.page={};Y.data.context.page.uri="/full_search_page";Y.data.context.user={};Y.data.context.user.uuid=e;Y.data.context.user.user_id=t;Y.data.widget={};Y.data.widget.rfkid=o;var n=6;$("#noofproducts").length>0&&(n=1*$("#noofproducts").val());Y.data.n_item=n;Y.data.page_number=1;Y.data.query={};Y.data.query.keyphrase={};Y.data.query.keyphrase.value=[];Y.data.suggestion={};Y.data.suggestion.brand={};Y.data.suggestion.brand.max=3;Y.data.suggestion.keyphrase={};Y.data.suggestion.keyphrase.max=2;Y.data.suggestion.category={};Y.data.suggestion.category.max=4;Y.data.suggestion.trending_category={};Y.data.suggestion.trending_category.max=4;Y.data.content={};Y.data.content.product={};Y.data.content.product.field={};Y.data.content.product.field.value=[];Y.data.content.product.field.value.push("sku");Y.data.content.product.field.value.push("price");Y.data.content.product.field.value.push("final_price");Y.data.content.product.field.value.push("category_names");Y.data.content.product.field.value.push("name");Y.data.content.product.field.value.push("url");Y.data.content.product.field.value.push("image_url");Y.data.content.product.field.value.push("prod_partnumber");Y.data.content.product.field.value.push("listprice_USD");Y.data.content.product.field.value.push("bopusprice_USD");Y.data.content.product.field.value.push("price_USD");Y.data.content.product.field.value.push("name");Y.data.content.product.field.value.push("price");Y.data.content.product.field.value.push("rd_price_USD");Y.data.content.product.field.value.push("sku_partnumber");Y.data.content.product.field.value.push("brands");Y.data.content.product.field.value.push("ptc_omni_repeat_delivery_fl");Y.data.content.product.field.value.push("swatch")}function h(e,t){var o=getAbsoluteURL()+e;if(t){var r=getCookie("RFKHeader");if("undefined"!=typeof r&&null!=r&&"rfk"==r){$("#ENABLE_REFLEKTION").val("true");o+="&reflektionEnabled=true"}else{setCookie("RFKHeader","rfk");$("#ENABLE_REFLEKTION").val("true");o+="&reflektionEnabled=true"}}else{$("#ENABLE_REFLEKTION").val("false");o+="&reflektionEnabled=false"}return o}function I(){var e=JSON.parse(localStorage.getItem("petcostores"));if(void 0!=e&&null!=e&&Object.keys(e).length>0){var t=e.petcostores;if("undefined"!=typeof t){var o=JSON.parse(t);if(o.length>1)for(var r=0;r<o.length;r++)if("undefined"==typeof o[r].isPreferred||"Y"!=o[r].isPreferred){X.zipCode=o[r].ZIPCODE;X.state=o[r].STATE;X.country="US";break}}}}function y(e){ee=e}function v(e){if(k())var t=setInterval(function(){if(W){_(e);clearInterval(t)}},100)}function C(){var e="RFK_UUID",t="-1002";"undefined"!=typeof rfk&&null!=rfk&&"undefined"!=typeof rfk.uid&&"function"==typeof rfk.uid&&(e=rfk.uid());var o=getCookie("WC_UserId");"undefined"!=typeof o&&(t=o);Q={};Q.data={};Q.data.n_item={};Q.data.batch=[];Q.data.appearance={};Q.data.appearance.templates={};Q.data.appearance.variables={};Q.data.context={};if(Object.keys(X).length>0){Q.data.context.geo={};Q.data.context.geo.country=X.country;Q.data.context.geo.state=X.state;Q.data.context.geo.zip=X.zipCode}Q.data.context.page={};Q.data.context.page.sku={};Q.data.context.user={};Q.data.context.user.uuid=e;Q.data.context.user.user_id=t;Q.data.query={};Q.data.query.keyphrase={};Q.data.query.keyphrase.value=[];Q.data.content={};Q.data.content.product={};Q.data.content.product.field={};Q.data.content.product.field.value=[];Q.data.content.product.field.value.push("sku");Q.data.content.product.field.value.push("price");Q.data.content.product.field.value.push("final_price");Q.data.content.product.field.value.push("category_names");Q.data.content.product.field.value.push("name");Q.data.content.product.field.value.push("brand");Q.data.content.product.field.value.push("url");Q.data.content.product.field.value.push("image_url");Q.data.content.product.field.value.push("prod_partnumber");Q.data.content.product.field.value.push("listprice_USD");Q.data.content.product.field.value.push("bopusprice_USD");Q.data.content.product.field.value.push("price_USD");Q.data.content.product.field.value.push("name");Q.data.content.product.field.value.push("price");Q.data.content.product.field.value.push("rd_price_USD");Q.data.content.product.field.value.push("sku_partnumber");Q.data.content.product.field.value.push("swatch");Q.data.content.product.field.value.push("ptc_omni_repeat_delivery_fl");Q.data.content.product.field.value.push("review_rating");Q.data.content.product.field.value.push("review_count");Q.data.content.product.field.value.push("ptc_omni_personalized_item_fl");Q.data.content.product.field.value.push("ptc_omni_rx_food_ind");Q.data.content.product.field.value.push("ptc_omni_pdp_behavior_template");Q.data.content.product.field.value.push("ptc_omni_in_store_only_flag")}function _(e){var t,o,r,n,a,i="//"+q,d="",s="",l="",c=5,u=[],p=[],m=!0;o="#"+e+"-rfkwidgetControlParam";r="#"+e+"-rfkWidgetName";n="#"+e+"-rfkTitleWidgetName";a="#"+e+"-rfkNoOfProducts";$(o).length>0&&(l=$(o).val());$(r).length>0&&(d=$(r).val());$(n).length>0&&(s=$(n).val());$(a).length>0&&(c=parseInt($(a).val()));if("UID"==l);else if("PDP"==l){u=ee;Q.data.context.page.sku=[];Q.data.context.page.sku.push(u);re[d]==u&&(m=!1);re[d]=u}else if("CART"==l||"OCP"==l||"PDP_ATC_MODAL"==l){$("#rfkRecommendationPartNumber").length>0&&(u=$("#rfkRecommendationPartNumber").val().split(","));Q.data.context.page.sku=[];Q.data.context.page.sku=u}else if("PLP"==l){$("#rfkRecommendationCategories").length>0&&(p=$("#rfkRecommendationCategories").val().split(","));Q.data.context.page.all_category_ids=[];Q.data.context.page.all_category_ids=p}else if("SRCHPLP"==l){$("#rfkSearchTerm").length>0&&(t=$("#rfkSearchTerm").val());Q.data.query.keyphrase.value=[];""!=t?Q.data.query.keyphrase.value.push(t):m=!1}Q.data.n_item=c;Q.data.batch=[];var g={};g.widget={};g.widget.rfkid=d;Q.data.batch.push(g);if(""!=s.trim()){g={};g.widget={};g.widget.rfkid=s.trim();Q.data.batch.push(g)}var f="RFK_UUID";"undefined"!=typeof rfk&&null!=rfk&&"undefined"!=typeof rfk.uid&&"function"==typeof rfk.uid&&(f=rfk.uid());Q.data.context.user.uuid=f;m&&$.ajax({url:i,type:"POST",data:JSON.stringify(Q),headers:{Authorization:"Bearer "+G},beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")},success:function(t){if("undefined"!=typeof t){E(t,e,d,s.trim());ReflektionHelperJS.bopusAreaRestrictionCheck()}else console.log("invalid response from RFK")},dataType:"json",timeout:K,error:function(e,t,o){S(e,t,o);A()}})}function S(e,t,o){if("timeout"==t)console.log("Reflektion API request timed out");else{var r=jQuery.parseJSON(e.responseText);console.log("Reflektion error code:"+r.err);console.log("Reflektion error message:"+r.msg)}}function b(e,t){var o=new RegExp(t,"ig");return e.replace(o,"<strong>"+t+"</strong>")}function E(e,t,o,r){void 0!=Z[t]&&delete Z[t];var n={},a={};if(""==r)n=e;else for(var i in e.batch){var d=e.batch[i].widget.rfkid;d==o?n=e.batch[i]:d==r&&(a=e.batch[i])}if("undefined"!=typeof n.content&&"undefined"!=typeof n.content.product){var s="#"+t+"-";$('select[id^="'+t+'-"]').remove();var l,c=s+"widgetTitle",u=s+"prev",p=s+"next",m=s+"rfkEnableSkuSelection";$(m).length>0&&(l=$(m).val());if("undefined"!=typeof a&&"undefined"!=typeof a.appearance&&"undefined"!=typeof a.appearance.variables&&"undefined"!=typeof a.appearance.variables.title){var g=a.appearance.css_names;$(g).each(function(e,t){$(c).addClass(t)});var f=a.appearance.variables,h=f["text-color"].value;""!=h&&$(c).css("color",h);var I=f.title.value;""!=I&&$(c).html(I)}var y=parseInt(n.n_item);if(y>0){$(c).show();for(var v in n.content.product.value){elementIndex=parseInt(v)+1;prodMainDiv=s+elementIndex;$(prodMainDiv).show();x(n.content.product.value[v],t,l);var C=n.content.product.value[v].prod_partnumber,_=Z[t].products[C].selected_swatch;D(t,elementIndex,_,C,!1)}T(t,!0);if(y>3){$(u).length>0&&$(u).css({display:"block"});$(p).length>0&&$(p).css({display:"block"})}}}}function T(e,t){var o="#"+e+"-parent";if($(o).length>0){var r,n=$(o).val();if(n.length>0){r="#container_rfk_recommendation_"+n;1==t?$(r).show():$(r).hide()}}}function D(e,t,o,r,n,a){var i="",d="#"+e+"-rfkwidgetControlParam";$(d).length>0&&(i=$(d).val());var s=!1;"undefined"!=typeof a&&(s=!0);var l,c,u,p=Z[e].products[r].name,m=Z[e].products[r].brand,g=Z[e].products[r].primary_sku,f=Z[e].products[r].image_url,h=Z[e].products[r].price_USD,I=Z[e].products[r].listprice_USD,y=Z[e].products[r].rd_price_USD,v=(Z[e].products[r].review_rating,Z[e].products[r].rd_eligible),C=Z[e].products[r].defining_attr_count,_=Z[e].products[r].url,S=Z[e].products[r].personalizedItemFlag,E=Z[e].products[r].rxFoodIndicator,T=Z[e].products[r].rxPharmaIndicator,D=Z[e].products[r].inStoreOnlyIndicator,A="",x="#"+e+"-",w=x+"rfkEnableSkuSelection",k=x+"rfkEnableAddToCart";$(w).length>0&&(l=$(w).val());$(k).length>0&&(c=$(k).val());if(0==n){var O=x+t,L=x+t+"-name-link";$(O).show();if($(L).length>0){$(L).click(function(){location.href=_});void 0!=m&&""!=m?formattedName=b(p,m):formattedName=p;$(L).html(formattedName);"break-word"!=$(L).css("overflow-wrap")&&$(L).dotdotdot()}R(e,t,r);"yes"==l&&P(e,r,t,C)}if(Object.keys(o).length>0){g=o.sku_partnumber;f=o.image_url;h=o.price_USD;I=o.listprice_USD;v=o.ptc_omni_repeat_delivery_fl;y=o.rd_price_USD;u=o.ptc_omni_bopus_flag;A=o.is_bopus_area_restriction_req}var B=x+t+"-price-rd",j=x+t+"-price";if("undefined"!=typeof A&&""!=A&&"yes"==A.toLowerCase()){$(B+".product-pricing").addClass("hideBopusAreaRestriction");$(j+".product-pricing").addClass("hideBopusAreaRestriction")}else{$(B+".product-pricing").removeClass("hideBopusAreaRestriction");$(j+".product-pricing").removeClass("hideBopusAreaRestriction")}var N=x+t+"-img";if($(N).length>0)if($(N+".verticalImage_rfk").length>0){var F=f+"?$tile-recommendations$";isCloudniaryEnabled()&&(F=f.replace("f_auto,q_auto","f_auto,q_auto,t_tile-recommendations"));"PDP_ATC_MODAL"==i?$(N).html('<a href="'+_+'" target="_parent" onclick="javascript:trackATCInterstitailClick(\'modal_prod_rec_click\'); return true;"><img class="img-responsive"  src="'+F+'" title="'+p+'"></a>'):$(N).html('<a href="'+_+'" target="_parent" onclick="clickTrackLink(this);"><img class="img-responsive"  src="'+F+'" title="'+p+'"></a>')}else{var F=f+"?$PLP-item-large$";isCloudniaryEnabled()&&(F=f.replace("f_auto,q_auto","f_auto,q_auto,t_PLP-item-large"));"PDP_ATC_MODAL"==i?$(N).html('<a href="'+_+'" target="_parent" onclick="javascript:trackATCInterstitailClick(\'modal_prod_rec_click\');return true;"><img src="'+F+'" title="'+p+'"></a>'):$(N).html('<a href="'+_+'" target="_parent" onclick="clickTrackLink(this);"><img src="'+F+'" title="'+p+'"></a>')}var M=!0;void 0!=D&&null!=D&&"yes"==D.toLowerCase()&&(void 0!=u&&null!=u&&"yes"==u.toLowerCase()||(M=!1));if(M){var H=x+t+"-price-promo";$(H).length>0&&$(H).html(h);var J=x+t+"-price-crossout";"undefined"!=typeof I&&1*I.replace("$","")>1*h.replace("$","")&&$(J).length>0&&$(J).html("was "+I);var U=x+t+"-price-rd",G=x+t+"-price-rd-val",W=x+t+"-price-rd-logo";if(void 0!=v&&null!=v&&"yes"==v.toLowerCase()){if($(U).length>0){$(G).html(y);$(U).show()}}else{$(G).html("");$(W).html("");$(W).removeClass("rd-logo")}}else{var U=x+t+"-price-rd",G=x+t+"-price-rd-val",W=x+t+"-price-rd-logo";$(G).html("");$(W).html("");$(W).removeClass("rd-logo")}var q=e+"-"+t+"-productName-tagging",V=e+"-"+t+"-partNumber-tagging";document.getElementById(q)&&(document.getElementById(q).value=p);document.getElementById(V)&&(document.getElementById(V).value=g);if("yes"==c){addToCartVar=x+t+"-addToCart";var K=!0;C>1?K=!1:void 0!=S&&null!=S&&"yes"==S.toLowerCase()?K=!1:void 0!=E&&null!=E&&"yes"==E.toLowerCase()?K=!1:void 0!=T&&null!=T&&"rx medication pdp"==T.toLowerCase()?K=!1:void 0!=D&&null!=D&&"yes"==D.toLowerCase()&&(K=!1);var z=e+"-"+t+"-addToCartBtn",Y=$("#"+e+"-vertical-rfk-rec").parents("#recent-purchase-container").length,Q=$("#"+e+"-horizontal-rfk-rec").parents("#recent-purchase-container").length,X=e+"-"+t;if(K)if($('select[id^="'+e+"-"+r+'"] option').size()>1&&!s){$('select[id^="'+e+"-"+r+'"]').val("");Y>0||Q>0?$(addToCartVar).html('<a disabled="disabled" class="show rfladdTocartLink text-underLine" id="'+z+'" onclick="petcoAddToCartJS.AddItem2ShopCartAjaxFromRecommendation(\''+g+"','"+X+"');\">Add to Cart</a>"):$(addToCartVar).html('<button disabled="disabled" class="btn btn-primary btn-full show rfladdTocartLink" id="'+z+'" onclick="petcoAddToCartJS.AddItem2ShopCartAjaxFromRecommendation(\''+g+"','"+X+"');\">Add to Cart</button>")}else Y>0||Q>0?$(addToCartVar).html('<a class="show rfladdTocartLink text-underLine" id="'+z+'" onclick="petcoAddToCartJS.AddItem2ShopCartAjaxFromRecommendation(\''+g+"','"+X+"');\">Add to Cart</a>"):$(addToCartVar).html('<button class="btn btn-primary btn-full show rfladdTocartLink" id="'+z+'" onclick="petcoAddToCartJS.AddItem2ShopCartAjaxFromRecommendation(\''+g+"','"+X+"');\">Add to Cart</button>");else Y>0||Q>0?$(addToCartVar).html('<a  id="'+e+"-"+r+'-viewdetails" class="rflviewDetailsLink text-underLine" onclick="clickTrackLink(this);" href="'+_+'" target="_parent">View Details</a>'):$(addToCartVar).html('<a  id="'+e+"-"+r+'-viewdetails" class="rflviewDetailsLink" onclick="clickTrackLink(this);" href="'+_+'" target="_parent"><button class="btn btn-primary btn-full rflViewDetailsLink show">View Details</button></a>')}if("undefined"!=typeof page&&null!=page){var ee=page.page_type.split(" ").join(""),te=$("#"+e+"-widgetTitle"),oe="",re=x+t+"-rating-link",ne=x+t+"-img a",ae=x+t+"-name-link",ie=x+t+"-addToCart .rfladdTocartLink",de=x+t+"-addToCart .rflviewDetailsLink";if(te.length>0){oe=$(te).html();oe=oe.split(" ").join("");var se=ee+"-_-"+oe+":"+t+"-_-"+g;$(re).attr("manual_cm_sp",se);$(ne).attr("manual_cm_sp",se);$(ae).attr("manual_cm_sp",se);if($(ie).length>0){var le=se+":addtocart";$(ie).attr("manual_cm_sp",le)}$(de).length>0&&$(de).attr("manual_cm_sp",se)}}}function A(){}function x(e,t,o){var r={},n={},a=[],i=0,d=e.prod_partnumber,s=e.name,l=e.brand,c=e.sku_partnumber,u={},p=e.image_url,m=e.price_USD,g=e.listprice_USD,f=e.rd_price_USD,h=e.review_rating,I=e.review_count,y=e.ptc_omni_repeat_delivery_fl,v=e.url,C=e.ptc_omni_personalized_item_fl,_=e.ptc_omni_rx_food_ind,S=e.ptc_omni_pdp_behavior_template,b=e.ptc_omni_in_store_only_flag;if(void 0==Z[t]){Z[t]={};Z[t].products={}}else void 0==Z[t].products[d]&&(Z[t].products[d]={attributes:{}});if("yes"==o){u=e.swatch;void 0!=u&&$.each(u,function(e,t){i=0;"undefined"!=typeof t.defining_attributes&&$.each(t.defining_attributes,function(e,t){for(var o in t){var r=t[o];if(void 0==n[o]){a=[];a.push(r);n[o]=a}else{a=n[o];var i=!1;$.each(a,function(e,t){r==t&&(i=!0)});if(0==i){a.push(r);n[o]=a}}}});$.each(t,function(e,o){e==z&&o==c&&(r=t)})})}else{u=e.swatch;void 0!=u&&$.each(u,function(e,t){$.each(t,function(e,o){e==z&&o==c&&(r=t)})})}for(var E in n)i++;Z[t].products[d]={name:s,brand:l,review_rating:h,review_count:I,url:v,image_url:p,price_USD:m,listprice_USD:g,rd_price_USD:f,rd_eligible:y,attributes:n,swatches:u,primary_sku:c,selected_swatch:r,defining_attr_count:i,personalizedItemFlag:C,rxFoodIndicator:_,rxPharmaIndicator:S,inStoreOnlyIndicator:b}}function R(e,t,o){var r="#"+e+"-",n=Z[e].products[o].review_rating,a=Z[e].products[o].review_count,i=r+t+"-rating",d=r+t+"-star_limiter  .longbar",s=r+t+"-rating-link",l=r+t+"-review-count",c=Z[e].products[o].url+"#customerReviews",u=5;void 0!=n&&null!=n||(n=0);void 0!=a&&null!=a||(a=0);if(!isNaN(n)){$(i).attr("title",n+"stars");var p=Math.round(100*n/u);p>100&&(p=100);$(d).width(p+"%");$(s).length>0&&($(s)[0].href=c);$(l).html("("+a+")")}}function P(e,t,o,r){var n,a,i,d=Z[e].products[t].selected_swatch,s=Z[e].products[t].attributes,l="#"+e+"-",c=l+o+"-skuDetailsDiv";$(c).addClass("select-style");$(c).removeClass("select-attribute");var u=!0;if(r>0){var p=!1;$.each(s,function(s,l){if(u){var c=e+"-"+t+"-"+s;"undefined"!=typeof d.defining_attributes&&(i=d.defining_attributes[0][s]);if(r>1){n=$("<select></select>").attr("id",c).attr("name",c).attr("class","form-control disabled").attr("disabled","disabled");p=!0}else n=$("<select></select>").attr("id",c).attr("name",c).attr("class","form-control");n.attr("onchange","ReflektionHelperJS.changeAttributeSelection('"+e+"',"+t+","+o+",this.value)");a=$("<option />",{text:"Select "+s,value:""});n.append(a);$.each(l,function(e,t){a=i==t?$("<option />",{text:t,value:t,selected:!0}):$("<option />",{text:t,value:t});n.append(a)});r>1&&(u=!1)}});$(c).append(n);p&&$(c).css("visibility","hidden")}else{var m=e+"-"+t+"-SELECT",c=l+o+"-skuDetailsDiv";$(c).addClass("select-style");$(c).removeClass("select-attribute");$(c).html('<select id="'+m+'"  class="form-control disabled" disabled><option value=""> Select </option> </select>');$(c).css("visibility","hidden")}}function w(e,t,o,r){var n=Z[e].products[t].attributes,a=(Z[e].products[t].name,
{}),i="",d="";if("undefined"!=typeof n){$.each(n,function(e,t){$.each(t,function(t,o){if(o==r){i=e;d=o}})});if(""!=i&&""!=d){var s=Z[e].products[t].swatches;$.each(s,function(e,t){"undefined"!=typeof t.defining_attributes&&$.each(t.defining_attributes,function(e,o){for(var r in o)i==r&&d==o[r]&&(a=t)})});if(Object.keys(a).length>0){D(e,o,a,t,!0,!0);$("#"+e+"-"+o+"-addToCartBtn").removeAttr("disabled","disabled")}else $("#"+e+"-"+o+"-addToCartBtn").attr("disabled","disabled")}else $("#"+e+"-"+o+"-addToCartBtn").attr("disabled","disabled")}}function k(){a();var e=!1;if(ne){var t=getCookie("RFKHeader");if("undefined"!=typeof t&&null!=t&&"rfk"==t){$("#ENABLE_REFLEKTION").val("true");e=!0}else{setCookie("RFKHeader","rfk");e=!0;$("#ENABLE_REFLEKTION").val("true")}}else{e=!1;$("#ENABLE_REFLEKTION").val("false")}return e}function O(){var e=$("#SimpleSearchForm_SearchTerm");if(e.length>0)return""!=$(e).val().trim()}function L(e){ie=getAbsoluteURL()+e}function B(){ReflektionHelperJS.retrievedCachedSuggestions||$.ajax({method:"GET",url:ie,dataType:"script"})}function j(e){e="//"+e;if("undefined"!=typeof reflektionList){var t=e.split("/"),o=t[t.length-1],r=reflektionList[o];return"undefined"!=typeof r&&null!=r&&""!=r?r:e}return e}function N(e){localStorage.setItem(de,e)}function F(){var e=JSON.parse(localStorage.getItem("petcostores")),t="";if(null!=e&&0!=Object.keys(e).length){var o={};if("undefined"!=typeof e.petcostores){o=null!=JSON.parse(e.petcostores)?JSON.parse(e.petcostores):{};var r=o[0];t=r.STATE;$("#CurrentBOPUSStateGlobal").val(t);if($("#isBOPUSAreaRestictionEnabeledTMP").length>0&&"true"==$("#isBOPUSAreaRestictionEnabeledTMP").val()){var n="";if($("#BOPUSAreaRestictionStateTMP").length>0){n=$("#BOPUSAreaRestictionStateTMP").val();for(var a=n.split(","),i=0;i<a.length;i++)if(a[i]==t){$(".hideBopusAreaRestriction p").html("In-Store Only");break}}}}}}function M(e,t,o){for(var r in productDisplayJS.entitledItems)if(t==productDisplayJS.entitledItems[r].catentry_id){ReflektionHelperJS.setRfkRecommendationSKU(productDisplayJS.entitledItems[r].PartNum);var n=10,a=setInterval(function(){if("undefined"!=typeof rfk&&null!=rfk&&"function"==typeof rfk.uid){clearInterval(a);n=10;ReflektionHelperJS.rfkRecommendation_init(e)}else if(0==n){clearInterval(a);n=10;ReflektionHelperJS.rfkRecommendation_init(e)}else n--},200)}}function H(e){var t=10,o=setInterval(function(){if("undefined"!=typeof rfk&&null!=rfk&&"function"==typeof rfk.uid){clearInterval(o);t=10;ReflektionHelperJS.rfkRecommendation_init(e)}else if(0==t){clearInterval(o);t=10;ReflektionHelperJS.rfkRecommendation_init(e)}else t--},200)}var J="reflektion_api_accesstoken",U="RFK_ACCESS_TOKEN",G="",W=!1,q="",V="",K="",z="sku_partnumber",Y={},Q={},Z={},X={},ee="",te=" ",oe=!1,re={},ne=!1,ae=!1,ie="",de="search_source";return{reflektion_init:g,autoComplete_init:d,autoComplete_removeCommaBeforeSubmit:m,generateReflektionAutoCompleteUrl:h,setRfkRecommendationSKU:y,RECOMMENDATION_PDP_SKU:ee,rfkRecommendation_init:v,changeAttributeSelection:w,checkBeforeSearchSubmit:O,setCachedSuggestionsURL:L,retrievedCachedSuggestions:ae,setSearchSource:N,bopusAreaRestrictionCheck:F,recomentationPDPCall:M,recomentationNoNPDPCall:H}}();wc.render.declareContext("rfkSearchBasedNavigationContext",{contentBeginIndex:"0",productBeginIndex:"0",beginIndex:"0",orderBy:"0",facetId:"",pageView:"",resultType:"both",orderByContent:"",searchTerm:"",facet:"",facetLimit:"",minPrice:"",maxPrice:"",pageSize:"48",action:"",physicalStoreId:"0000",pageNumber:"1",rfkFacet:"",categoryLevel:"1"},"");wc.render.declareRefreshController({id:"rfkSearchResultDisplayController",renderContext:wc.render.getContextById("rfkSearchBasedNavigationContext"),url:getAbsoluteURL()+"RfkSearchResultDisplayView",formId:"",renderContextChangedHandler:function(e,t){var o=[];this.renderContext;$("#pageContextParameter").size()>0&&($("#pageContextParameter")[0].id="pageContextParameter_old");o.orderBy=this.renderContext.properties.orderBy;o.rfkFacet=this.renderContext.properties.rfkFacet;o.searchTerm=this.renderContext.properties.searchTerm;o.pageNumber=this.renderContext.properties.pageNumber;o.pageSize=this.renderContext.properties.pageSize;o.categoryLevel=this.renderContext.properties.categoryLevel;t.refresh(o)},postRefreshHandler:function(widget){resetRequest();this.facetSelectionChanged=!1;var totalFacetCount=document.getElementById("totalFacetCount").value,facetWidgetSuffix=document.getElementById("facetWidgetSuffix").value,allFacets=document.getElementById("allFacets").value;if(""!=allFacets)for(var facetList=allFacets.split(","),facetCount=0;facetCount<totalFacetCount;facetCount++){var facetSection=facetList[facetCount],facetValueCountVar="fv_count_"+facetSection,facetValueCount=document.getElementById(facetValueCountVar).value;facetValueCount>5&&RfkSearchBasedNavigationDisplayJS.hideFacetValues(facetSection,facetValueCount);facetCount>=3&&RfkSearchBasedNavigationDisplayJS.collapseFacets(facetSection+facetWidgetSuffix)}RfkSearchBasedNavigationDisplayJS.showSearchResultSummary();RfkSearchBasedNavigationDisplayJS.showSelectedFacet();RfkSearchBasedNavigationDisplayJS.showBreadcrumbTrail();setTimeout(function(){RfkSearchBasedNavigationDisplayJS.populateDynamicEspotContent()},500);RfkSearchBasedNavigationDisplayJS.showProductRating();RfkSearchBasedNavigationDisplayJS.showRecommendationWdigets();RfkSearchBasedNavigationDisplayJS.triggerPDPTagging();ReflektionHelperJS.bopusAreaRestrictionCheck();$("#pageContextParameter").size()>0&&eval($("#pageContextParameter")[0].innerHTML);lazy_image_loader(!1);RfkSearchBasedNavigationDisplayJS.brandFilterSetUp();populateCurentBopusStore();var countOfSelectedFilter=$("div#facetFilterListWrapper-PetcoNext a.selectedFacets").length;countOfSelectedFilter>0&&$("#sort_filter").html("Sort and Filter ("+countOfSelectedFilter+")");cursor_clear()}});wc.render.declareContext("rfkCategoryBasedNavigationContext",{storeId:"10151",contentBeginIndex:"0",productBeginIndex:"0",beginIndex:"0",orderBy:"0",facetId:"",pageView:"",resultType:"both",orderByContent:"",searchTerm:"",facet:"",facetLimit:"",minPrice:"",maxPrice:"",pageSize:"48",action:"",physicalStoreId:"0000",pageNumber:"1",rfkFacet:"",categoryLevel:"1"},"");wc.render.declareRefreshController({id:"rfkCategoryResultDisplayController",renderContext:wc.render.getContextById("rfkCategoryBasedNavigationContext"),url:getAbsoluteURL()+"RfkCategoryResultDisplayView",formId:"",renderContextChangedHandler:function(e,t){var o=[],r=this.renderContext;if(null!=byId("bopusItemfacet")){var n=byId("bopusItemfacet").value.replace("facetDiv","");if("0000"!=RfkSearchBasedNavigationDisplayJS.isFileterWithStoreId()&&($(byId(byId("bopusItemfacet").value)[0]).find('input[type="checkbox"]:checked').length>0||this.renderContext.properties.rfkFacet.indexOf(n)!=-1)&&$("#bopusInfoTabInPlp_conatiner").length>0){r.properties.physicalStoreId=RfkSearchBasedNavigationDisplayJS.isFileterWithStoreId();o.physicalStoreId=this.renderContext.properties.physicalStoreId}}$("#pageContextParameter").size()>0&&($("#pageContextParameter")[0].id="pageContextParameter_old");o.orderBy=this.renderContext.properties.orderBy;o.rfkFacet=this.renderContext.properties.rfkFacet;o.categoryId=this.renderContext.properties.categoryId;o.storeId=this.renderContext.properties.storeId;o.pageNumber=this.renderContext.properties.pageNumber;o.pageSize=this.renderContext.properties.pageSize;o.categoryLevel=this.renderContext.properties.categoryLevel;t.refresh(o)},postRefreshHandler:function(widget){resetRequest();this.facetSelectionChanged=!1;var totalFacetCount=document.getElementById("totalFacetCount").value,facetWidgetSuffix=document.getElementById("facetWidgetSuffix").value,allFacets=document.getElementById("allFacets").value;if(""!=allFacets)for(var facetList=allFacets.split(","),facetCount=0;facetCount<totalFacetCount;facetCount++){var facetSection=facetList[facetCount],facetValueCountVar="fv_count_"+facetSection,facetValueCount=document.getElementById(facetValueCountVar).value;facetValueCount>5&&RfkSearchBasedNavigationDisplayJS.hideFacetValues(facetSection,facetValueCount);facetCount>=3&&RfkSearchBasedNavigationDisplayJS.collapseFacets(facetSection+facetWidgetSuffix)}RfkSearchBasedNavigationDisplayJS.showSelectedFacet();RfkSearchBasedNavigationDisplayJS.populateDynamicEspotContent();RfkSearchBasedNavigationDisplayJS.showProductRating();RfkSearchBasedNavigationDisplayJS.showRecommendationWdigets();RfkSearchBasedNavigationDisplayJS.triggerPDPTagging();ReflektionHelperJS.bopusAreaRestrictionCheck();$("#pageContextParameter").size()>0&&eval($("#pageContextParameter")[0].innerHTML);lazy_image_loader(!1);RfkSearchBasedNavigationDisplayJS.brandFilterSetUp();populateCurentBopusStore();var countOfSelectedFilter=$("div#facetFilterListWrapper-PetcoNext a.selectedFacets").length;countOfSelectedFilter>0&&$("#sort_filter").html("Sort and Filter ("+countOfSelectedFilter+")");cursor_clear()}});"undefined"!=typeof RfkSearchBasedNavigationDisplayJS&&null!=RfkSearchBasedNavigationDisplayJS&&RfkSearchBasedNavigationDisplayJS||(RfkSearchBasedNavigationDisplayJS={contextValueSeparator:"&",contextKeySeparator:":",widgetId:"",facetArray:{},selectedFacetDetails:{},selectedMobileFacets:{},selectedCategoryFilters:{},facetIdsArray:new Array,facetIdsParentArray:new Array,uniqueParentArray:new Array,bopusFilterQueryForPhysicalStrPopulate:{},facetSelectionChanged:!1,hierarchyIndicator:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(","),isFileterWithStoreId:function(){var e="0000",t=!1,o="",r="0000",n=dojo.cookie("WC_physicalStores");if("undefined"!=typeof n){var a=n.split(",");if(a.length>0){o=a[0];if(""!=o){r=RfkSearchBasedNavigationDisplayJS.extractStoreIdentiferFromPhysicalStoreId(o);t=!0}}}t&&null!=byId("bopusItemfacet")&&byId(byId("bopusItemfacet").value).className.indexOf("bopusfacetholder")!=-1&&(e=r);return e},extractStoreIdentiferFromPhysicalStoreId:function(e){var t="",o="petcostores",r=localStorage.getItem(o);if(null!=r){var n=JSON.parse(r);if("undefined"!=typeof n.petcostores){var a=JSON.parse(n.petcostores);for(var i in a)if(a[i].STLOC_ID==e){t=a[i].IDENTIFIER;break}}}return t},initConstants:function(e,t,o,r){this.removeCaption=e;this.moreMsg=t;this.lessMsg=o;this.currencySymbol=r},sortResults:function(e){var t="Page";$("#tagPrefix").length>0&&(t=$("#tagPrefix").val());var o=$(e).children("option:selected").text(),r=$(e).val();$(e).attr("manual_cm_sp",t+"-_-Sort By-_-"+o.trim());clickTrackLink(e);cursor_wait();if(null!=document.getElementById("rfkSearchTerm")){var n=document.getElementById("rfkSearchTerm").value;wc.render.updateContext("rfkSearchBasedNavigationContext",{productBeginIndex:"0",orderBy:r,searchTerm:n,resultType:"products"})}if(null!=document.getElementById("RFKcategoryId")){var a=document.getElementById("RFKcategoryId").value,i=document.getElementById("RFKCategoryLevel").value;wc.render.updateContext("rfkCategoryBasedNavigationContext",{productBeginIndex:"0",orderBy:r,categoryId:a,storeId:$("#storeId").val(),resultType:"products",categoryLevel:i})}this.updateHistory();MessageHelper.hideAndClearMessage()},paginateSearchResult:function(e,t){cursor_wait();if(null!=document.getElementById("rfkSearchTerm")){var o=document.getElementById("rfkSearchTerm").value;wc.render.updateContext("rfkSearchBasedNavigationContext",{pageNumber:e,pageSize:t,searchTerm:o,resultType:"products"})}if(null!=document.getElementById("RFKcategoryId")){var r=document.getElementById("RFKcategoryId").value,n=document.getElementById("RFKCategoryLevel").value;wc.render.updateContext("rfkCategoryBasedNavigationContext",{pageNumber:e,pageSize:t,categoryId:r,storeId:$("#storeId").val(),resultType:"products",categoryLevel:n})}this.updateHistory();MessageHelper.hideAndClearMessage()},addCategoryFilter:function(e,t,o){this.selectedFacetDetails={};this.facetArray={};var r=parseInt(o);if(void 0==this.selectedCategoryFilters[r]||null==this.selectedCategoryFilters[r]){var n="fdn_"+t,a=document.getElementById(n).value;this.selectedCategoryFilters[r]={facetId:t,facet:e,fdn:a,level:o}}if(void 0!=this.facetArray[e]&&void 0!=this.facetArray[e].values){var i=this.facetArray[e].values;i.push(t)}else{var d=[];d.push(t);this.facetArray[e]={};this.facetArray[e].values={};this.facetArray[e].values=d}this.filterSearchResults(o)},searchBySuggestedSearchTerm:function(e){this.selectedFacetDetails={};this.facetArray={};cursor_wait();if(null!=document.getElementById("rfkSearchTerm")){document.getElementById("rfkSearchTerm").value=e;wc.render.updateContext("rfkSearchBasedNavigationContext",{pageNumber:"1",pageSize:"48",searchTerm:e,rfkFacet:"",resultType:"products"})}this.updateHistory();MessageHelper.hideAndClearMessage()},addSearchResultFilter:function(e,t,o){var r="fdn_"+e+"_"+t,n=document.getElementById(r).value,a=window.matchMedia("(max-width: 768px)").matches;if(a){this.selectedMobileFacets[t]={facet:e,fdn:n,facetSection:o};this.showSelectedFacet()}else{this.selectedFacetDetails[t]={facet:e,fdn:n,facetSection:o};if(void 0!=this.facetArray[e]&&void 0!=this.facetArray[e].values){var i=this.facetArray[e].values;i.push(t)}else{var d=[];d.push(t);this.facetArray[e]={};this.facetArray[e].values={};this.facetArray[e].values=d}this.filterSearchResults("")}},filterSearchResults:function(e){var t,o,r="",n=0;for(var a in this.facetArray){t=this.facetArray[a].values;o=0;var i="";for(var d in t){i=0==o?t[d]:i+","+t[d];o+=1}0==n&&""!=i?r=r+a+":"+i:""!=i&&(r=r+"#"+a+":"+i);n+=1}cursor_wait();if(null!=document.getElementById("rfkSearchTerm")){var s=document.getElementById("rfkSearchTerm").value;""!=e?wc.render.updateContext("rfkSearchBasedNavigationContext",{pageNumber:1,searchTerm:s,rfkFacet:r,resultType:"products",categoryLevel:e}):wc.render.updateContext("rfkSearchBasedNavigationContext",{pageNumber:1,searchTerm:s,rfkFacet:r,resultType:"products"})}if(null!=document.getElementById("RFKcategoryId")){var l=document.getElementById("RFKcategoryId").value;e=document.getElementById("RFKCategoryLevel").value;""!=e?wc.render.updateContext("rfkCategoryBasedNavigationContext",{pageNumber:1,categoryId:l,rfkFacet:r,resultType:"products",storeId:$("#storeId").val(),categoryLevel:e}):wc.render.updateContext("rfkCategoryBasedNavigationContext",{pageNumber:1,categoryId:l,storeId:$("#storeId").val(),rfkFacet:r,resultType:"products"})}this.updateHistory();MessageHelper.hideAndClearMessage()},removeSearchResultFilter:function(e,t){if(void 0!=this.facetArray[e]&&void 0!=this.facetArray[e].values){var o=this.facetArray[e].values,r=[];for(var n in o)o[n]!=t&&r.push(o[n]);this.facetArray[e].values={};r.length>0?this.facetArray[e].values=r:delete this.facetArray[e];delete this.selectedFacetDetails[t];this.facetSelectionChanged=!0}var a=window.matchMedia("(max-width: 768px)").matches;if(a){void 0!=this.selectedMobileFacets[t]&&delete this.selectedMobileFacets[t];var i=document.getElementById("product-filters"),d=!1;void 0!=i&&i.classList.contains("active")&&(d=!0);if(0==d)this.filterSearchResults("");else{var s=e+"_"+t,l=document.getElementById(s);void 0!=l&&null!=l&&(l.checked=!1);this.showSelectedFacet()}}else this.filterSearchResults("")},resetSearch:function(){this.selectedFacetDetails={};this.selectedCategoryFilters={};this.facetArray={};var e=document.getElementById("rfkSearchTerm").value;cursor_wait();wc.render.updateContext("rfkSearchBasedNavigationContext",{pageNumber:1,searchTerm:e,rfkFacet:"",resultType:"products",categoryLevel:"1"});this.updateHistory();MessageHelper.hideAndClearMessage()},clearAllFilter:function(){this.selectedMobileFacets={};this.selectedFacetDetails={};this.selectedCategoryFilters={};this.facetArray={};this.filterSearchResults("")},refreshCategoryFilter:function(e){if("0"!=e){for(var t=parseInt(e),o=Object.keys(this.selectedCategoryFilters).length,r=this.selectedCategoryFilters[e],n=r.facet,a=r.facetId,i=Object.keys(this.selectedCategoryFilters),d=0;d<o;d++){var s=parseInt(i[d]);s>t&&delete this.selectedCategoryFilters[s]}this.addCategoryFilter(n,a,e)}else{this.resetSearch();var l=wc.render.getContextById("rfkSearchBasedNavigationContext");parseInt(l.properties.categoryLevel)}},showBreadcrumbTrail:function(){var e,t,o=document.getElementById("rfkSearchTerm").value,r=1;if(Object.keys(this.selectedCategoryFilters).length>0){var n=byId("rfkBreadcrumbTrail"),a=byId("breadcrumb_srch_term");t="Search:"+o;e=t+"_"+this.hierarchyIndicator[r];if(null==a){a=document.createElement("li");a.setAttribute("id","breadcrumb_srch_term");a.innerHTML="<a  href='#' manual_cm_sp='Search_PLP-_-Breadcrumbs-_-"+e+"' onclick='javascript:clickTrackLink(this);RfkSearchBasedNavigationDisplayJS.refreshCategoryFilter(\"0\"); return false;'>"+t+"</a>";n.appendChild(a)}var i=Object.keys(this.selectedCategoryFilters).length,d=1;for(var s in this.selectedCategoryFilters){r+=1;this.selectedCategoryFilters[s].facet;t=this.selectedCategoryFilters[s].fdn;var l="cgry_link_"+s,c=byId(l);if(null==c){c=document.createElement("li");c.setAttribute("id",l)}n.appendChild(c);if(d==i){c.setAttribute("class","active");c.innerHTML=t}else{e=t+"_"+this.hierarchyIndicator[r];c.innerHTML="<a  href='#' manual_cm_sp='Search_PLP-_-Breadcrumbs-_-"+e+"' onclick='javascript:clickTrackLink(this);RfkSearchBasedNavigationDisplayJS.refreshCategoryFilter(\""+s+"\"); return false;'>"+t+"</a>"}d+=1}}else{var n=byId("rfkBreadcrumbTrail"),u=byId("breadcrumb_1");n.innerHTML="";n.appendChild(u)}},showSelectedFacet:function(){$("#facetFilterListWrapper").empty();$("#facetFilterListWrapper-PetcoNext").empty();$("#facetFilterListWrapper_mobile").empty();var e=byId("facetFilterListWrapper"),t=byId("facetFilterList");if(Object.keys(this.selectedFacetDetails).length>0||Object.keys(this.selectedMobileFacets).length>0){if(null==t){t=document.createElement("ul");t.setAttribute("id","facetFilterList");t.setAttribute("class","list-unstyled");var e=byId("facetFilterListWrapper");e.appendChild(t)}}else{$("#facetFilterListWrapper").empty();$("#facetFilterListWrapper_mobile").empty();$("#facetFilterListWrapper-PetcoNext").empty()}if(Object.keys(this.selectedFacetDetails).length>0){for(var o in this.selectedFacetDetails){var r=this.selectedFacetDetails[o].facet,n="selected_"+o,a=byId(n);if(null==a){a=document.createElement("li");a.setAttribute("id",n);a.setAttribute("class","facetSelected")}t.appendChild(a);var i=this.selectedFacetDetails[o].fdn,d="";d=0==i.indexOf("rating_")?byId("facetLabel_"+r+"_"+o).innerHTML:this.selectedFacetDetails[o].fdn;a.innerHTML="<h4><div class='filter_option'><div class='close'></div><span>"+d+"</span><div class='clear_float'></div></div></h4>";a.innerHTML="<a  role='button' href='#' onclick='javascript:setCurrentId(\""+o+'");RfkSearchBasedNavigationDisplayJS.removeSearchResultFilter("'+r+'", "'+o+"\"); return false;' class='selectedFacets'><span class='remove'>remove</span>"+d+"</a>";var s=r+"_"+o,l=document.getElementById(s);void 0!=l&&null!=l&&(l.checked=!0);var c=document.getElementById("facetWidgetSuffix").value,u=this.selectedFacetDetails[o].facetSection,p=u+c,m=byId("icon_"+p);void 0!=m&&null!=m&&"collapsed"==m.className&&this.toggleExpand(p)}var g=document.getElementById("clear_all_filter_new");if(null==g){g=document.createElement("li");g.setAttribute("id","clear_all_filter_new");g.innerHTML="<a class='clear-filters' manual_cm_sp='PLP-_-ClearAllFilters-_-Link' role='button' href='#' aria-label='Clear All Filters' id='clear_all_filter' onclick='RfkSearchBasedNavigationDisplayJS.clearAllFilter()';'>Clear All Filters</a>";t.appendChild(g)}}if(Object.keys(this.selectedMobileFacets).length>0){for(var o in this.selectedMobileFacets){var r=this.selectedMobileFacets[o].facet,n="selected_"+o,a=byId(n);if(null==a){a=document.createElement("li");a.setAttribute("id",n);a.setAttribute("class","facetSelected")}t.appendChild(a);var i=this.selectedMobileFacets[o].fdn,d="";d=0==i.indexOf("rating_")?byId("facetLabel_"+r+"_"+o).innerHTML:this.selectedMobileFacets[o].fdn;a.innerHTML="<h4><div class='filter_option'><div class='close'></div><span>"+d+"</span><div class='clear_float'></div></div></h4>";a.innerHTML="<a  role='button' href='#' onclick='javascript:setCurrentId(\""+o+'");RfkSearchBasedNavigationDisplayJS.removeSearchResultFilter("'+r+'", "'+o+"\"); return false;' class='selectedFacets'><span class='remove'>remove</span>"+d+"</a>";var s=r+"_"+o,l=document.getElementById(s);void 0!=l&&null!=l&&(l.checked=!0);var c=document.getElementById("facetWidgetSuffix").value,u=this.selectedMobileFacets[o].facetSection,p=u+c,m=byId("icon_"+p);void 0!=m&&null!=m&&"collapsed"==m.className&&this.toggleExpand(p)}RfkSearchBasedNavigationDisplayJS.displaySelectedFacets()}$("#facetFilterListWrapper_mobile").empty();$("#facetFilterListWrapper_mobile").append($("#facetFilterListWrapper").html());$("#facetFilterListWrapper-PetcoNext").length&&$("#facetFilterListWrapper-PetcoNext").html($("#facetFilterListWrapper").html())},showSearchResultSummary:function(){var e,t=dojo.byId("searchTabProdCount"),o=(dojo.byId("widgetSuffixHid"),dojo.byId("prodCount")),r=$("#searchBoxText").val();if(null!=o){e=o.value;null!=t&&"undefined"!=typeof r&&(t.innerHTML=e+' results for "<strong>'+r+'</strong>"')}},showProductRating:function(){activateRatings()},toggleExpand:function(e){var t=byId("icon_"+e),o=byId("section_list_"+e),r=byId("section_button_"+e);if("expand"==t.className){t.className="collapsed";o.setAttribute("aria-expanded","false");r.setAttribute("aria-expanded","false");o.style.display="none"}else{t.className="expand";o.setAttribute("aria-expanded","true");r.setAttribute("aria-expanded","true");o.style.display="block"}},hideFacetValues:function(e,t){for(var o=null,r=6;r<=t;r++){o="flag_"+e+"_"+r;if(null!=dojo.byId(o)){document.getElementById(o).classList.add("hide-filter");document.getElementById(o).style.display="none"}}},showAll:function(e,t){var o=document.getElementById("showAll_"+e);if(null!=o){dojo.style(o,"display","none");if("2"!=e||dojo.query('div[id^="flag_top_2"]').length)for(var r=null,n=6;n<=t;n++){r="flag_"+e+"_"+n;null!=byId(r)&&dojo.style(r,"display","");dojo.removeClass(r,"hide-filter")}else for(var r=null,n=0;n<=t;n++){r="flag_"+e+"_"+n;null!=byId(r)&&dojo.style(r,"display","")}}var a=document.getElementById("collapseAll_"+e);null!=a&&dojo.style(a,"display","")},collapseAll:function(e,t){var o=document.getElementById("collapseAll_"+e);if(null!=o){dojo.style(o,"display","none");if("2"!=e||0==dojo.query('div[id^="flag_top_2"]').length)for(var r=null,n=6;n<=t;n++){r="flag_"+e+"_"+n;null!=byId(r)&&dojo.style(r,"display","none");dojo.addClass(r,"hide-filter")}else for(var r=null,n=0;n<=t;n++){r="flag_"+e+"_"+n;null!=byId(r)&&dojo.style(r,"display","none")}}var a=document.getElementById("showAll_"+e);null!=a&&dojo.style(a,"display","")},collapseFacets:function(e){var t=document.getElementById("icon_"+e),o=(dojo.byId("iconSign_"+e),dojo.byId("section_list_"+e));t.className="collapsed";o.setAttribute("aria-expanded","false");o.style.display="none"},toggleMobileFilters:function(e){var t=document.getElementById(e+"-filters"),o=document.querySelectorAll(".filter-title .expand"),r=document.querySelectorAll('.facetSelectContainer[aria-expanded="true"]'),n=document.querySelectorAll("body")[0];if(t){t.classList.add("active");n.classList.add("no-scroll");for(var a=0;a<o.length;a++){o[a].classList.add("collapsed");o[a].classList.remove("expand");if(a<r.length){r[a].setAttribute("aria-expanded","false");r[a].style.display="none"}}}},closeMobileFilters:function(e){var t=document.getElementById(e+"-filters"),o=document.querySelectorAll("body")[0];if(t){t.classList.remove("active");o.classList.remove("no-scroll")}if(Object.keys(this.selectedMobileFacets).length>0){for(var r in this.selectedMobileFacets){var n=this.selectedMobileFacets[r];this.selectedFacetDetails[r]=n;var a=this.selectedMobileFacets[r].facet;if(void 0!=this.facetArray[a]&&void 0!=this.facetArray[a].values){var i=this.facetArray[a].values;i.push(r)}else{var n=[];n.push(r);this.facetArray[a]={};this.facetArray[a].values={};this.facetArray[a].values=n}}this.selectedMobileFacets={};this.facetSelectionChanged=!0}if(1==this.facetSelectionChanged){this.facetSelectionChanged=!1;this.filterSearchResults("")}},changeIcon:function(){var e=document.getElementById("catIconSign"),t=document.getElementById("collapseOne");"in"==t.className?e.className="glyphicon glyphicon-plus-sign":e.className="glyphicon glyphicon-minus-sign"},updateHistory:function(){var e=wc.render.getContextById("rfkSearchBasedNavigationContext").properties,t="rfkFacet:"+e.rfkFacet+this.contextValueSeparator;t+="searchTerm:"+e.searchTerm+this.contextValueSeparator;t+="orderBy:"+e.orderBy+this.contextValueSeparator;t+="pageNumber:"+e.pageNumber+this.contextValueSeparator;t+="categoryLevel:"+e.categoryLevel+this.contextValueSeparator;t+="pageSize:"+e.pageSize+this.contextValueSeparator;var o=document.body.scrollTop;history.pushState?history.pushState(null,null,"#"+t):window.location.hash=t;document.body.scrollTop=o},changeProductArticleTab:function(e){$("#products").removeClass("active");$("#articles").removeClass("active");$("#"+e).addClass("active");try{if("articles"==e){var t={};t.event_name="article_search";pushEvent(t);var o=PetcoDataLayer.search,r={};for(var n in o)"event_product_search_impression"!=n&&(r[n]=o[n]);r.search_group="Article";r.search_results_type="Article";PetcoDataLayer.search=r}}catch(e){console.log("issue in tagging "+e)}},showRecommendationWdigets:function(){new Array;$("input[name=rfkWidgetId]").each(function(){var e=$(this).val();ReflektionHelperJS.rfkRecommendation_init(e)})},triggerPDPTagging:function(){try{}catch(e){console.log("error occured in trigger PDP Tagging")}},populateDynamicEspotContent:function(){try{$(".dynamicContentEspotHTMLDesktop").remove();$(".dynamicContentEspotHTMLMobile").remove();var e=$("ul.pagination  li.active a.active.selected").html(),t=window.matchMedia("(max-width: 768px)").matches;if("undefined"!=typeof e){var o=$("div.product-display-grid.product_listing_container").height();null===o&&(o=$($("div.products-row.products-section")[0]).outerHeight()*$("div.products-row.products-section").length);var r=$($("div.prod-tile")[0]).outerHeight();null===r&&(r=$($("div.products-row.products-section")[0]).outerHeight());var n=o/r;n=Math.floor(n);var a=$("div.prod-tile").length>0?$("div.prod-tile").length/n:$("article.product-tile").length/n;a=Math.ceil(a);$("div.dynamicEspot").each(function(o,r){var n=$(r).find(".PageNumberDesktop")[0].value,i=$(r).find(".PageNumberMobile")[0].value;if(n!=e||t){if(i==e&&t){var d=$(r).find(".EspotNameMobile")[0].value;if(""!=d.trim()){var s=$(r).find(".RowNumberMobile")[0].value,l=$(r).find(".EspotHeightMobile")[0].value+"px",c=$(r).find(".dynamicEspotContentMobile").html();$("div.dynamicContentEspotHTMLMobile").each(function(e,t){1*$(t).attr("rownum")>0&&1*$(t).attr("rownum")<1*s&&(s=1*s-1)});var u=(1*s-1)*a;u=u;var p=$(".prod-tile").length>0?".prod-tile":".product-tile",m=$(idOfTileMobile)[u];if(null!=m)$(m).before('<div class="conatiner dynamicContentEspotHTMLMobile" rownum="'+s+'"><div class="row"><div class="col-12" style="max-height:'+l+'">'+c+"</div></div></div>");else{m=$("#prod-tile-"+($('[id^="prod-tile-"]').length-1));$(m).after('<div class="conatiner dynamicContentEspotHTMLMobile" rownum="0"><div class="row"><div class="col-12 dynamicContentEspotHTML" style="max-height:'+l+'">'+c+"</div></div></div>")}}}}else{var g=$(r).find(".EspotNameDesktop")[0].value;if(""!=g.trim()){var f=$(r).find(".RowNumberDesktop")[0].value,h=$(r).find(".EspotHeightDesktop")[0].value+"px",I=$(r).find(".dynamicEspotContentDesktop").html();$("div.dynamicContentEspotHTMLDesktop").each(function(e,t){1*$(t).attr("rownum")>0&&1*$(t).attr("rownum")<1*f&&(f=1*f-1)});var y=(1*f-1)*a;y=y;var p=$(".prod-tile").length>0?".prod-tile":".product-tile",v=$(p)[y];if(null!=v)$(v).before('<div class="conatiner dynamicContentEspotHTMLDesktop" rownum="'+f+'"><div class="row"><div class="col-12" style="max-height:'+h+'">'+I+"</div></div></div>");else{v=$("#prod-tile-"+($('[id^="prod-tile-"]').length-1));$(v).after('<div class="conatiner dynamicContentEspotHTMLDesktop" rownum="0"><div class="row"><div class="col-12 dynamicContentEspotHTML" style="max-height:'+h+'">'+I+"</div></div></div>")}}}});lazy_image_loader(!1)}}catch(e){console.log("error occured in dynamic espot content")}},pullRfkbopusCount:function(){if(0!=$("#bopusInfoTabInPlp_conatiner").length){var e=$('body[data-wc-device="mobile"] section#products-listing-section').length>0;if(e)var t=document.getElementById("bopusInfoTabInPlp_mobile");else var t=document.getElementById("bopusInfoTabInPlp");var o=RfkSearchBasedNavigationDisplayJS.isFileterWithStoreId();if("0000"!=o){var r=window.categoryreflektion_filterQuery,n=byId("bopusItemfacet").value.replace("facetDiv","");if(r.indexOf(n)==-1)if(r.indexOf("how_to_get_it")==-1)r=r+"#how_to_get_it:"+n;else{for(var a="",i=r.split("#"),d=0;d<i.length;d++)a=i[d].indexOf("how_to_get_it")!=-1?""==a?i[d]+","+n:a+"#"+i[d]+","+n:""==a?i[d]+","+n:a+"#"+i[d];r=a}var s={};s.catalogId=WCParamJS.catalogId;s.storeId=WCParamJS.storeId;s.categoryId=window.categoryreflektion_categoryId;s.orderBy=window.categoryreflektion_orderBy;s.pageNumber=window.categoryreflektion_pageNumber;s.categoryLevel=window.categoryreflektion_categoryLevel;s.rfkFacet=r;s.physicalStoreId=o;$.post(getAbsoluteURL()+"RfkFetchProductCountForBOPUSStore",s,function(o,r){if("success"==r){1*o.totalSearchCount>0?$("#bopusInfoTabInPlp").removeClass("hide"):$("#bopusInfoTabInPlp").addClass("hide");1*o.totalSearchCount>0?null!=t&&(t.style="display : block"):null!=t&&(t.style="display : none !important");if(e){$("#bopusInfoTabInPlp_conatiner").addClass("hide");$("#bopusInfoTabInPlp_conatiner").removeClass("show");$("#bopusInfoTabInPlp_conatiner_mobile").addClass("show");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("hide")}else{$("#bopusInfoTabInPlp_conatiner").addClass("show");$("#bopusInfoTabInPlp_conatiner").removeClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").addClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("show")}null!=byId("isSameDayDeliveryEnabled")&&"true"===$("#isSameDayDeliveryEnabled").val()&&RfkSearchBasedNavigationDisplayJS.showHideSameDayDeliveryFacet(!1)}else{$("#bopusInfoTabInPlp_conatiner_mobile").addClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("show");$("#bopusInfoTabInPlp_conatiner").addClass("hide");$("#bopusInfoTabInPlp_conatiner").removeClass("show");null!=t&&(t.style="display : none !important");null!=byId("isSameDayDeliveryEnabled")&&"true"===$("#isSameDayDeliveryEnabled").val()&&RfkSearchBasedNavigationDisplayJS.showHideSameDayDeliveryFacet(!0)}},"json")}else{null!=t&&(t.style="display : none !important");null!=byId("isSameDayDeliveryEnabled")&&"true"===$("#isSameDayDeliveryEnabled").val()&&RfkSearchBasedNavigationDisplayJS.showHideSameDayDeliveryFacet(!0)}}},toggleAllItemToBopusTab:function(){$("#bopusCheckBoxPLP")[0].checked?$("#bopusCheckBoxPLP")[0].checked=!0:$("#bopusCheckBoxPLP")[0].checked=!1;$("#bopusCheckBoxPLP_mobile").length&&($("#bopusCheckBoxPLP_mobile")[0].checked?$("#bopusCheckBoxPLP_mobile")[0].checked=!0:$("#bopusCheckBoxPLP_mobile")[0].checked=!1);if(null!=byId("bopusItemfacet")&&byId(byId("bopusItemfacet").value).className.indexOf("bopusfacetholder")!=-1){var e=byId(byId("bopusItemfacet").value);if(null!=e){var t=e.id.replace("facetDiv","");setTimeout(function(){$(byId("how_to_get_it_"+t)).trigger("click");RfkSearchBasedNavigationDisplayJS.closeMobileFilters("product")},500)}}},toggleToSameDayDeliveryTab:function(){$("#SameDayDeliveryCheckBoxPLP")[0].checked?$("#SameDayDeliveryCheckBoxPLP")[0].checked=!0:$("#SameDayDeliveryCheckBoxPLP")[0].checked=!1;$("#SameDayDeliveryCheckBoxPLP_mobile").length&&($("#SameDayDeliveryCheckBoxPLP_mobile")[0].checked?$("#SameDayDeliveryCheckBoxPLP_mobile")[0].checked=!0:$("#SameDayDeliveryCheckBoxPLP_mobile")[0].checked=!1);if(null!=byId("sameDayDelfacet")){var e=byId(byId("sameDayDelfacet").value);
if(null!=e){var t=e.id.replace("facetDiv","");setTimeout(function(){$(byId("how_to_get_it_"+t)).trigger("click");RfkSearchBasedNavigationDisplayJS.closeMobileFilters("product")},500)}}},showHideSameDayDeliveryFacet:function(e){var t=0;if(null!=byId("sameDayDelfacet")){var o=byId(byId("sameDayDelfacet").value);if(null!=o){var r=o.id.replace("facetDiv","");if(document.getElementById("how_to_get_it_"+r).checked){$("#SameDayDeliveryCheckBoxPLP")[0].checked=!0;$("#SameDayDeliveryCheckBoxPLP_mobile").length&&($("#SameDayDeliveryCheckBoxPLP_mobile")[0].checked=!0)}else{$("#SameDayDeliveryCheckBoxPLP")[0].checked=!1;$("#SameDayDeliveryCheckBoxPLP_mobile").length&&($("#SameDayDeliveryCheckBoxPLP_mobile")[0].checked=!1)}null!=document.getElementById("sameDayDelfacetCount")&&(t=parseInt($("#sameDayDelfacetCount").val()))}}var n=$('body[data-wc-device="mobile"] section#products-listing-section').length>0;if(n)var a=document.getElementById("sameDayDeliveryTabInPlp_mobile");else var a=document.getElementById("sameDayDeliveryTabInPlp");if(t>0){if(n){$("#bopusInfoTabInPlp_conatiner").addClass("hide");$("#bopusInfoTabInPlp_conatiner").removeClass("show");$("#bopusInfoTabInPlp_conatiner_mobile").addClass("show");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("hide")}else{$("#bopusInfoTabInPlp_conatiner").addClass("show");$("#bopusInfoTabInPlp_conatiner").removeClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").addClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("show")}null!=a&&(a.style="display : block")}else{null!=a&&(a.style="display : none !important");if(e){$("#bopusInfoTabInPlp_conatiner").addClass("hide");$("#bopusInfoTabInPlp_conatiner").removeClass("show");if(n){$("#bopusInfoTabInPlp_conatiner_mobile").addClass("hide");$("#bopusInfoTabInPlp_conatiner_mobile").removeClass("show")}}}},displaySelectedFacets:function(){$(".facetSelctionMobile").remove();$('div#facetFilterListWrapper ul#facetFilterList li:not([id="clear_all_filter_new"])').each(function(e,t){var o=t.id.replace("selected_",""),r=$('div[id="facetDiv'+o+'"]').parent().parent().parent(),n=$(t).find("a")[0].innerHTML.replace('<span class="remove">remove</span>',"");$(r).before('<p class="mobile-only facetSelctionMobile">'+n+"</p>")})},brandFilterSetUp:function(){$("#brandFilter").parent().parent().find("div.hide-filter").each(function(e,t){if("none"==$(t).css("display")){$(t).removeClass("hide-filter");$(t).css("display","block")}});$("#brandFilter").off("keyup");$("#brandFilter").keyup(function(e){if("Enter"===e.key||13===e.keyCode){e.preventDefault();return!1}var t=$("#brandFilter").val().toLowerCase().trim();$(".brandParentObj").each(function(e,t){$(t).removeClass("hide")});$(".brandList").each(function(e,o){$(o).text().toLowerCase().trim().indexOf(t)==-1&&$(o).parent().parent().parent().parent().addClass("hide")})})},clearAllFacets:function(){this.selectedMobileFacets={};$(".facetSelctionMobile").remove();$("#facetFilterListWrapper-PetcoNext").innerHTML="";byId("facetFilterListWrapper").innerHTML="";$("#facetFilterListWrapper_mobile").html("");if(null!=byId("low_price_value")&&null!=byId("high_price_value")){byId("low_price_value").value="";byId("high_price_value").value=""}for(var e=null!=document.forms.productsFacets?document.forms.productsFacets:document.forms.productsFacetsHorizontal,t=e.elements,o=0;o<t.length;o++){var r=t[o];null!=r.type&&"CHECKBOX"==r.type.toUpperCase()&&r.checked&&"MORE"!=r.title&&(r.checked=!1)}for(var n=document.getElementsByTagName("*"),o=0;o<n.length;o++){var r=n[o];if(null!=r.id){0==r.id.indexOf("section_")&&0!=r.id.indexOf("section_list")&&(r.style.display="block");0==r.id.indexOf("facetLabel_")&&r.parentElement.setAttribute("class","outline")}}}});$(document).ready(function(){RfkSearchBasedNavigationDisplayJS.populateDynamicEspotContent();RfkSearchBasedNavigationDisplayJS.triggerPDPTagging();populateCurentBopusStore();dojo.topic.subscribe("callCompletedforLocationCheck",function(e){populateCurentBopusStore()});$(window).resize(function(){RfkSearchBasedNavigationDisplayJS.populateDynamicEspotContent()});$(".collapseFacets").each(function(){var e=$(this).val();RfkSearchBasedNavigationDisplayJS.collapseFacets(e)})});PetcoEmailSignup={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,t,o){this.langId=e;this.storeId=t;this.catalogId=o},closeEmailWindow:function(){var e=document.getElementById("emailSignup");$(":input",e).each(function(){var e=this.type;this.id;"text"==e&&(this.value="")});petcoCommonJS.hideModal("modal-emailsignupwidget")},emailsignupError:function(e){document.getElementById("error_message_server").style.display="none";var t=!0,o=dojo.byId("firstName_DIV"),r=dojo.byId("firstName_ERROR"),n=dojo.byId("emailAddress_DIV"),a=dojo.byId("emailAddress_ERROR");if(null!=e&&e){reWhiteSpace=new RegExp(/^\s+$/);var i=(new RegExp(/^[a-zA-Z]+[\sa-zA-Z]*$/i),new RegExp(/^[a-zA-z0-9]+$/i),new RegExp(/^[a-zA-Z]+((([-]?[\sa-zA-Z]+)?([']?[\sa-zA-Z]+)?)|(([']?[\sa-zA-Z]+)?([-]?[\sa-zA-Z]+)?))?[a-zA-Z]*$/i)),d=(new RegExp(/^[0-9]+$/),new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/));if(null==e.firstName||!reWhiteSpace.test(e.firstName.value)&&""!=e.firstName.value)if(i.test(e.firstName.value)){o.className="form-group";r.innerHTML=""}else{o.className="form-group has-error";r.innerHTML='<span class="help-block">'+MessageHelper.messages.REGISTRATION_ERR_ALPHA_TEXT+"</span>";t=!1}else{o.className="form-group has-error";r.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_FIELD_REQUIRED+"</span>";t=!1}if(null==e.emailAddress||!reWhiteSpace.test(e.emailAddress.value)&&""!=e.emailAddress.value)if(e.emailAddress.value.length>100){n.className="form-group has-error";a.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_EXCEED_100_CHAR+"</span>";t=!1}else if(d.test(e.emailAddress.value))if(e.emailAddress.value.match(/@/g).length>1){n.className="form-group has-error";a.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>";t=!1}else if(this.endsWith(e.emailAddress.value,"@dii.com")){n.className="form-group has-error";a.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>";t=!1}else{n.className="form-group";a.innerHTML=""}else{n.className="form-group has-error";a.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>";t=!1}else{n.className="form-group has-error";a.innerHTML='<span class="help-block">'+MessageHelper.messages._ERR_EMAILPREF_FIELD_REQUIRED+"</span>";t=!1}if(!t)return!1;var s={event_name:"email_signup",customer_name:e.firstName.value,customer_email:e.emailAddress.value,customer_newsletter:"Newsletter Sign-up",conversion_event_id:"Email Sign Up",conversion_category_id:"Email Sign Up",conversion_action_type:"1"};pushEvent(s);this.EmailSignupNewEmailAddress(emailSignup)}return!1},endsWith:function(e,t){return e.indexOf(t,e.length-t.length)!==-1},ClearEmailSignUpForm:function(e){var t=document.getElementById("emailSignup");$(":input",t).each(function(){var e=this.type;this.id;"text"==e&&(this.value="")});var o=dojo.byId("firstName_DIV"),r=dojo.byId("firstName_ERROR");o.className="form-group";r.innerHTML="";var n=dojo.byId("emailAddress_DIV"),a=dojo.byId("emailAddress_ERROR");n.className="input";a.innerHTML="";$(".modal-footer").show();$("#close-window").hide()},EmailSignupNewEmailAddress:function(e){var t=[];t.storeId=this.storeId;t.catalogId=this.catalogId;t.langId=this.langId;t.firstName=document.getElementById("email-signup-first-name").value;t.emailAddress=document.getElementById("email-signup-email-address").value;wc.service.invoke("AjaxEmailSignupCmd",t)},SignUpNewEmail:function(e){var t=!0,o=$("#emailAddress_DIV"),r=$("#emailAddress_ERROR");if(null!=e&&e){reWhiteSpace=new RegExp(/^\s+$/);var n=(new RegExp(/^[a-zA-Z]+[\sa-zA-Z]*$/i),new RegExp(/^[a-zA-z0-9]+$/i),new RegExp(/^[a-zA-Z]+((([-]?[\sa-zA-Z]+)?([']?[\sa-zA-Z]+)?)|(([']?[\sa-zA-Z]+)?([-]?[\sa-zA-Z]+)?))?[a-zA-Z]*$/i),new RegExp(/^[0-9]+$/),new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/));if(null==e.emailAddress||!reWhiteSpace.test(e.emailAddress.value)&&""!=e.emailAddress.value)if(e.emailAddress.value.length>100){$(o).find("input").addClass("invalid-box");$(r).html('<span class="error">'+MessageHelper.messages._ERR_EMAILPREF_EXCEED_100_CHAR+"</span>");t=!1}else if(n.test(e.emailAddress.value))if(e.emailAddress.value.match(/@/g).length>1){$(o).find("input").addClass("invalid-box");$(r).html('<span class="error">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>");t=!1}else if(this.endsWith(e.emailAddress.value,"@dii.com")){$(o).find("input").addClass("invalid-box");$(r).html('<span class="error">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>");t=!1}else{$(o).find("input").removeClass("invalid-box");$(r).html("")}else{$(o).find("input").addClass("invalid-box");$(r).html('<span class="error">'+MessageHelper.messages._ERR_EMAILPREF_INVALIDEMAILFORMAT+"</span>");t=!1}else{$(o).find("input").addClass("invalid-box");$(r).html('<span class="error">'+MessageHelper.messages._ERR_EMAILPREF_FIELD_REQUIRED+"</span>");t=!1}if(!t)return!1;var a={event_name:"email_signup",customer_email:e.emailAddress.value,email_sign_up_location:"footer",conversion_action_type:"1",conversion_catergory_id:"Email Sign Up",conversion_event_id:"Email Sign Up"};pushEvent(a);this.NewEmailSignupRequest(e.emailAddress.value)}return!1},NewEmailSignupRequest:function(e){var t=[];t.storeId="10151";t.catalogId="10051";t.langId="-1";t.emailAddress=e;cursor_wait();wc.service.invoke("AjaxEmailSignupCmd",t)}};wc.service.declare({id:"AjaxEmailSignupCmd",actionId:"AjaxEmailSignupCmd",url:getAbsoluteURL()+"PetcoEmailSignup",formId:"emailSignup",successHandler:function(e){cursor_clear();var t=dojo.byId("error_message_server"),o=e.errorCode,r="",n=e.successMessage;if("undefined"!=n){r='<p class="success-box">'+e.successMessage+"</p>";t.innerHTML=r}else if("undefined"!=o||null!=o){MessageHelper.messages[o];r=MessageHelper.messages[o];t.innerHTML='<p class="error-box">'+r+"</p>"}petcoCommonJS.showModal("emailsignupwidget");var a=document.getElementById("emailSignup");$(":input",a).each(function(){var e=this.type;this.id;"text"==e&&(this.value="")})},failureHandler:function(e){cursor_clear();var t=e.errorCode,o=dojo.byId("error_message_server");console.debug("error code:"+t);"undefined"!=t&&null!=t&&"PETCOUPDATEEMAILSUBSCRIPTION.SBL-EXL-00151"==t?o.innerHTML='<p class="error-box">An account exists for the email address entered. Please enter a different email address or sign in to your account to manage your Newsletter Subscriptions.</p>':o.innerHTML='<p class="error-box">'+e.errorMessage+"</p>";petcoCommonJS.showModal("emailsignupwidget");var r=document.getElementById("emailSignup");$(":input",r).each(function(){var e=this.type;this.id;"text"==e&&(this.value="")})}});
//# sourceMappingURL=petco.combined.common.js.map
