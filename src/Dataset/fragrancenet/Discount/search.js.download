var ajaxURL,defaultState=window.location.href,backURL,firstLoad=1,activePage,previousActivePage,originalTitle=document.title,originalH1,brandFilter,search_selectors={},filter_applied=0;window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));
$(function(){$("#brandSearch").val("");$(window).keyup(function(a){9==(a.keyCode?a.keyCode:a.which)&&0<$("#skipFilters:focus").length&&$("#skipFilters").removeClass("sr-only");$(".dropdown *").hasClass("tab-focused")||$("ul.dropdown-menu").removeClass("mediaDropDown")});$("#skipFilters").on("focusout",function(a){$("#skipFilters").addClass("sr-only")});$(window).on("throttledresize.filters",function(a){isPhoneUI()?($("#Brand .contain").removeData("perfect-scrollbar"),$(".accordion-body.in").each(function(){var a=
$(this);a.data("was_in",a.hasClass("in")).removeClass("in")}),$(".accordion-toggle").addClass("collapsed")):(initScrollbars(),$(".accordion-body").each(function(){var a=$(this);a.data("was_in")&&a.addClass("in").removeData("was_in")&&a.prev().find(".accordion-toggle").removeClass("collapsed")}).removeAttr("style"),$(".columnRight,.searchFilters").show(),$(".applyFilters").hide())}).trigger("throttledresize.filters");originalH1=$$("searchHeader").find("h1").html();$$("filterSwitch").on("click",function(){var a=
$(".columnLeft").find(".searchFilters"),b=a.is(":visible");$$("sortSwitchContain").hide();$$("sortSwitch").removeClass("active");$(".columnRight")[b?"show":"hide"]();a[b?"hide":"show"]();$(this).toggleClass("active",!b)});$$("sortSwitch").on("click.sortSwitch",function(a){a.preventDefault();a=$$("sortSwitchContain");a.length||(a=$("<div />").attr({id:"sortSwitchContain"}).hide().append($("ul.dropdown-menu").addClass("sortList").clone(!0,!0).find("li").each(function(){var a=$(this);a.removeClass("active");
a.hasClass("notSelectable")&&a.addClass("active");a.on("click",function(){$$("sortSwitch").trigger("click.sortSwitch");$$("sortSwitchContain").remove()}).show().find("a").append('<span class="glyphicon"></span>')}).end()).appendTo(".columnLeft"));var b=a.is(":visible");$(".columnLeft").find(".searchFilters").hide();$$("filterSwitch").removeClass("active");a[b?"hide":"show"]();$(this).toggleClass("active",!b)});$(document).on("click.brandDesc",".brandDescSwitch",function(){$(".brandDescContainer,.descTabs").toggleClass("show hide");
$(this).toggleClass("border");$(".bt").toggleClass("glyphicon-plus glyphicon-minus")});$(document).on("click.brandReviews",".reviewsHeader",function(){$(".brandReviewContent").toggleClass("show hide");$(".rt").toggleClass("glyphicon-plus glyphicon-minus")});$(window).on("resize.brandWigets",function(){$(".brandDescSwitch").removeClass("border");$(".bt,.rt").removeClass("glyphicon-minus").addClass("glyphicon-plus");560>$(window).width()?($(".brandDescContainer,.descTabs,.brandReviewContent").removeClass("show"),
$(".brandDescContainer,.descTabs,.brandReviewContent").addClass("hide")):($(".brandDescContainer,.descTabs,.brandReviewContent").addClass("show"),$(".brandDescContainer,.descTabs,.brandReviewContent").removeClass("hide"))});$$("searchContent").on("click",".accordion li a[data-filter]",function(a){a.preventDefault();a.stopPropagation();a=$(this).parent();a.toggleClass("active");ajaxURL=a.find("a").attr("href");gEvent(["Search Filters","Filter Applied",$(this).parents(".selectorContainer").attr("id")]);
if(a.hasClass("ms"))return window.location.href=ajaxURL;$(".applyFilters").first().click()}).on("click","#filterBox li a",function(a){a.preventDefault();a.stopPropagation();a=$(this);a.toggleClass("active");ajaxURL=a.attr("href");console.log("AJAX: "+ajaxURL);$(".applyFilters").first().click();gEvent(["Search Filters","Filter Applied","Removed"]);return!1}).on("click",".input-group-addon",function(){$("#brandSearch").focus()});$(document).on("keyup","#brandSearch",function(){$("#Brand span.designer").hide();
$("#Brand li.letter").hide();var a=$(this).val();a?(letterSearch(a),brandSearch(escapeRegExp(a))):($("#Brand li").show(),$(".selected").removeClass("selected"))});bindAccordion();$(document).on("click.filters",".applyFilters",function(a){a.preventDefault();$(this);var b={},c=Object.keys(b);c.join("/");$(".selectorContainer li.active, #filterBox li:not(.noSelect)").each(function(){b[unescape($(this).find("a").attr("data-filter"))]=1});$.ajax({url:backURL||ajaxURL,cache:!1,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",
Pragma:"no-cache",Expires:"0"},dataType:"json",beforeSend:function(){$(document.body).css("cursor","wait");$(".columnRight").fadeOut(isPhoneUI()?0:250,function(){var a=Object.keys(b).length?$(this).data("apply"):$(this).data("additional");$(this).html('<div class="loaderAnim"><p>'+a+'</p><div class="three-bounce selected"><div class="one"></div><div class="two"></div><div class="three"></div></div></div>').fadeIn(0)});var a=$(".top-banner:visible").outerHeight()||$(".klarnaBanner:visible").outerHeight()||
0,c="fixed"===$(".headerContain").css("position")?$(".headerContain").outerHeight():0;$("html, body").animate({scrollTop:isPhoneUI()?$$("searchHeader").offset().top-(a+c):$$("mainContainer").offset().top},200)},success:function(a){$(document.body).css("cursor","default");$(".filterContain").replaceWith(a.filters);$(".bannerContain").replaceWith(unescape(a.banner_ad));$$("filterSwitch").removeClass("active");$("#langSwitch div").replaceWith(unescape(a.lang_switcher));$(".columnLeft").fadeIn(isPhoneUI()?
0:250);$(".columnRight").fadeOut(isPhoneUI()?0:250,function(){$(this).html(unescape(a.main)).fadeIn(isPhoneUI()?0:250,function(){displayReadMore();$.fn.raty&&bindStarRating();$(this).find("img[data-src],img[data-src-retina]").unveil(100,function(){$(this).on("load",function(){this.style.opacity=1})});$(window).trigger("resize.rowheight");setCurrency();if(a.brand_page){var b=new Event("apply-filters-loaded");document.dispatchEvent(b)}})});initScrollbars();isPhoneUI()&&($(".accordion-body.in").removeClass("in"),
$(".accordion-toggle").addClass("collapsed"),$(".brandDescContainer,.descTabs,.brandReviewContent").addClass("hide"));$(".resultCount").html(a.count);bindAccordion();a.breadcrumbs&&$$("breadcrumbs").html($(a.breadcrumbs).html());if(backURL)backURL="",$("title").html(a.meta_title),$$("searchHeader").find("h1").html(a.meta_h1);else{var b=ajaxURL||a.url;history.pushState({id:"resultAJAX",ajaxFilter:1},a.meta_title,b);document.title=a.meta_title;$$("searchHeader").find("h1").html(a.meta_h1);$("title").html(a.meta_title);
firstLoad=void 0;/[\/]ni[\/]/.test(b)?($('link[rel="canonical"]').remove(),$('meta[name="robots"]').attr("content","noindex, follow")):(0==$('link[rel="canonical"]').length?$("head").append('<link rel="canonical" href="'+b+'">'):$('link[rel="canonical"]').attr("href",b),$('meta[name="robots"]').attr("content","index, follow"))}$(window).trigger("resize.rowheight");$("ul.dropdown-menu li").each(function(){var b=$(this);$(this).removeClass("notSelectable");var c=$.trim($$("orderby_menu").find("span a").text()),
d=b.find("a").attr("data-orderby"),d=a[d];b.find("a").attr("href",d);b.toggle($.trim(b.text())!==c);$.trim($(this).text())==c&&$(this).addClass("notSelectable")});$("body").toggleClass("activeTiles",!!a.active_tiles);previousActivePage=activePage;activePage=void 0;bannerAd();$("img[data-src],img[data-src-retina]").each(function(){$(this).unveil(300,function(){$(this).on("load",function(){this.style.opacity=1})});touchSupport()||$(this).trigger("unveil")})},error:function(a,b,f){window.location.href=
window.location.origin+window.location.pathname+"?f="+c.join("/")}})}).on("click.page",".pagination a:not(.active)",function(a){a.preventDefault();activePage=$(this).attr("data-page");ajaxURL=ajaxURL?ajaxURL:$(this).attr("href");ajaxURL=ajaxURL.replace(/[?&]?page=[^&]+/,"");1!=activePage&&(ajaxURL+=qsDelim(ajaxURL)+"page="+activePage);$(".applyFilters").first().click()});$$("orderby_menu").find("li a").on("click",function(a){a.preventDefault();a=$(this);var b=a.attr("href");$$("orderby_menu").find("span a").html(a.text()).removeAttr("href").attr("href",
b);ajaxURL=b;$(".applyFilters").first().click()});$("ul.dropdown-menu li").each(function(){var a=$.trim($$("orderby_menu").find("span a").text());$(this).removeClass("notSelectable").attr("tabindex","0");$(this).toggle($.trim($(this).text())!==a);$.trim($(this).text())==a&&$(this).addClass("notSelectable")});$$("orderby_menu").on("focusin keyup",function(a){"focusin"===a.type?$("ul.dropdown-menu").addClass("mediaDropDown"):13==(a.keyCode?a.keyCode:a.which)&&(a.target.children[0].click(),$("ul.dropdown-menu").removeClass("mediaDropDown"))});
$(window).on("resize.rowheight orientationchange.rowheight",function(){var a=0,b=0,c=[],d=2,e=$(window).width(),f=$$("resultSet").find(".heightSync"),k=f.length,d=751<=e?3:2;f.each(function(f,e){var g=$(this),h=g.attr("style"),l=g.removeAttr("style").height();g.attr("style",h);l>b&&(b=l);++a;c.push(g);if(a==d||f==k-1){b+=15;for(g=0;g<c.length;++g)c[g].css({height:b+"px"});b=a=0;c=[]}})}).trigger("resize.rowheight");$(window).bind("popstate",function(a){!firstLoad&&(a.originalEvent.state||(title=originalTitle,
h1=originalH1),a.originalEvent.state&&a.originalEvent.state.ajaxFilter||window.location.href===defaultState)&&(backURL=window.location.href,activePage=previousActivePage,$(".applyFilters").first().click())});displayReadMore();$(window).on("resize.filters",function(a){isPhoneUI()?($(".fakeFilterList").show(),$(".searchFilters .accordion.search").hide(),$$("searchContent").find(".accordion-heading a").off().attr("data-toggle","collapse_off")):($(".fakeFilterList").hide(),$(".searchFilters .accordion.search").show(),
$$("searchContent").find(".accordion-heading a").off().attr("data-toggle","collapse"));$$("sortSwitch").is(":visible")||$("ul.dropdown-menu").removeClass("sortList")}).trigger("resize.filters");setTimeout(function(){$(window).on("resize.mobileTiles",tileSize).trigger("resize.mobileTiles")},100);tileBind();bannerAd();bindStarRating();setTimeout(function(){syncBoxHeights()},0);viewAllCarousel();$(document).on("apply-filters-loaded",function(){viewAllCarousel()});2>$(".showcaseTouts .sections:last").find(".section").length&&
$(".showcaseTouts .section:last").css("margin","0 auto")});function bannerAd(){$("img.bannerImage").add(".bannerAd").off("click.banner").on("click.banner",function(){gEvent(["Ad","Click",$(this).data("name")+" "+$(this).data("section")])})}function tileBind(){$(".mobileSection.prodShow").on("click.prodShow",function(a){a.preventDefault();a.stopPropagation();$(".mobileTiles").fadeOut(250,function(){$(document.body).removeClass("activeTiles");$(window).trigger("resize")})})}
function tileSize(){$(".tileRow").find(".mobileSection").removeAttr("style").end().each(function(){var a=$(this),b=a.height();a.find(".mobileSection").each(function(){var a=$(this);if(a.height()<b-10){var d=a.find("a");d.css("margin-top",(b-10-40-d.height())/2+"px")}a.css("height",b+"px")})})}
function viewAllCarousel(){var a=$(".otherBrands .slick");a.length&&a.slick({slidesToShow:2,nextArrow:'<a href="#" class="slick-next next glyphicon glyphicon-chevron-right"><span class="sr-only">carousel next arrow</span></a>',prevArrow:'<a href="#" class="slick-prev prev glyphicon glyphicon-chevron-left"><span class="sr-only">carousel previous arrow</span></a>',responsive:buildResponsive(130,6,!1),respondTo:"min",mobileFirst:!0,equalHeight:".contain"});$(".slick").on("beforeChange",function(a,c,
d,e){var b=$(this);a=$(b.data("countContain")).find(".count");c=a.data("count");b=b.data("itemTotal");c+=e-d;0>=c?c=b:c>b&&(c=1);a.html(c).data("count",c)});$(".otherBrands a").on("click",function(a){a=$(this);a.hasClass("slick-arrow")?gEvent(["Brand page - Brands Carousel","Arrow Click",a.hasClass("next")?"Right":"Left"]):gEvent(["Brand page - Brands Carousel","Product Click",a.parents(".product").data("pos")])})}
$(document).on("click.readMore",".blurb .expand",function(a){a.preventDefault();var b=$(this);a=b.prev(".readMore");var c=isPhoneUI()?2.7:4.2;if(a.hasClass("expanded"))a.stop(!0,!0).animate({height:c+"em"},"fast",function(){b.text(b.data("more"))}).removeClass("expanded");else{var d=a.css({overflow:"auto",height:"auto"}).height();a.css({overflow:"hidden",height:c+"em"}).stop(!0,!0).animate({height:d+"px"},"fast",function(){b.text(b.data("less"))}).addClass("expanded")}return!1});
function qsDelim(a){return a.match(/\?/)?"&":"?"}function displayReadMore(){var a=isPhoneUI()?2.7:4.2;$(".blurb.tabContain .readMore").each(function(){var b=$(this);b.css({overflow:"auto",height:"auto"}).height()<topx(a)?$(this).next(".expand").hide():b.css({overflow:"hidden",height:a.toString()+"em"}).parents(".tab-pane").addClass("hasExpand")})}
function scrollLetter(a,b){try{$(".key"+a+b).addClass("selected");$(".key"+a+search_selectors[a]).removeClass("selected");search_selectors[a]=b;var c=$(window).width()<=topx(36)?".modal ":"";$(c+"#"+a).find(".contain").scrollTop(0);$(c+"#"+a).find(".contain").scrollTop($(c+"#"+b).position().top)}catch(d){}return!1}
function loadLetter(a,b,c,d,e,f,k){var h=$("#brandSearch").val()[0];try{"#"==b&&(b="num"),$.ajax({type:"POST",url:e,dataType:"html",data:{group:a,letter:b,section:c,filters:d,brand:f,designer:k},beforeSend:function(){$("span[class^=key"+a+"]").parent().removeClass("selected");$("#"+a+" .contain").scrollTop(0);$(document.body).css("cursor","wait");$(".columnLeft").css("height","auto");$("#"+a+" ul").html('<li class="loadImg" style="text-align: center;height:12em"><img src="/images/fragnet/loader_small.gif"></li>');
h&&h.toUpperCase()&&h.toUpperCase()!==b&&$("#brandSearch").val("");b=a+b;$(".key"+a+b).each(function(){$(this).parent().addClass("selected")})},success:function(c){$(document.body).css("cursor","default");search_selectors[a]=b;$("#"+a+" ul").html(c);initScrollbars();c=$("#brandSearch").val();brandSearch(escapeRegExp(c))}})}catch(l){}return!1}
function loadAlternative(){var a=$(".searchTerm").html(),a=a.slice(1,-1);$.ajax({type:"GET",url:"ajax/boutiques.html?term="+a,dataType:"json",success:function(a){$$("searchContent").html(a.main).find("img[data-src],img[data-src-retina]").unveil(100,function(){$(this).on("load",function(){this.style.opacity=1})});$(window).trigger("resize.rowheight");$(".joinCoupPopup").on("click",function(a){a.preventDefault();a=$$("leftBar").find("a.offer");a=a.length?a:$$("rightBar").find("a.offer");a.length&&a.click();
a.length||$(".joinCoupList.slider").first().trigger("click.joinCoup","/f/net/pop_coup")})}}).done(function(){$.ensureCriteo=function(){return $.Deferred(function(a){(function d(){var b=document.getElementById("NullMobileSearch-Null"),f=document.getElementById("NullSearch-Null");if(0<b.innerHTML.length||0<f.innerHTML.length)return a.resolve();setTimeout(d,250)})()}).promise()};$.ensureCriteo().then(setCurrency)})}
function bindAccordion(){$$("searchContent").find(".accordion-heading a").off().end().find(".accordion").off();$(".searchFilters .accordion.search").hide().each(function(){var a=$(this).find(".accordion-heading a"),b=$(a.attr("href")),c=a.text(),d="Brand"===a.attr("data-rawcategory"),a="fake"+b.attr("id"),e=d?$('<ul class="fakeFilterList" />'):$('<select aria-labelledby="'+a+'" class="fakeFilterList" />'),f=d?$('<li class="heading" />'):$('<option class="disabled" />');e.append(f.attr({id:a,selected:"selected",
value:""}).html(c));b.find("li").each(function(){var a=$(this).find("a"),b=d?$("<li />"):$("<option />");b.html(a.attr("data-title")+" "+a.find("span.count").text());if(d)$(this).on("click.filterApply",function(a){if(isPhoneUI()){var b=$(this);a.preventDefault();ajaxURL=b.find("a").attr("href");gEvent(["Search Filters","Filter Applied",b.parents(".selectorContainer").attr("id")]);$(".applyFilters").click();$(".selectModal").data("bs.modal").hide();$(".selectModal").remove();return!1}});a.parent("li").hasClass("active")||
b.attr({value:a.attr("data-title"),"data-href":a.attr("href")}).appendTo(e)});d&&selectModal(e);e.off().on("change",function(){var a=$(this).find("option:selected");ajaxURL=a.attr("data-href");gEvent(["Search Filters","Filter Applied",a.parent().find("option.disabled").text().trim()]);$(".applyFilters").click()});b=$('<div class="containSelect" />').append(e);$(".searchFilters").append(b);$(window).trigger("resize.filters");$(".containSelect").each(function(){0!=$(this).find("option:not(.disabled)").length||
$(this).find("li").length||$(this).hide()})});$$("searchContent").find(".accordion").off().on("shown.bs.collapse hidden.bs.collapse",function(){$(this).find(".loader").remove().end().find("i.drop").show();initScrollbars()})}
function letterSearch(a){$("#brand-results_empty").remove();if(!document.querySelector(".selected")){a=$.trim(a);if(0<a.length)var b=a[0];if("ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(b.toUpperCase()))var c=b.toUpperCase();else"0123456789".includes(b.toString())?c="num":renderNoBrandResults("noChar",b);$(".keyBrandBrand"+c)[0]?$(".keyBrandBrand"+c).click():renderNoBrandResults("noChar",b)}}
function brandSearch(a){$("#Brand li.letter").hide();$("#Brand li").each(function(){var b=$(this).find("a").attr("data-title")||$(this).find("a").attr("title");b&&(b.match(new RegExp(a,"i"))?$(this).show():$(this).hide())});renderNoBrandResults("noList",a)}
function renderNoBrandResults(a,b){"noChar"===a?$("#Brand ul").replaceWith("<ul class='results-list'><li class='featured disabled'>No brands beginning with '"+b.toUpperCase()+"'</li></ul>"):"noList"===a&&($("#Brand ul.results-list").children(":visible").length||$("#brand-results_empty").length?$("#brand-results_empty").remove():$(".contain.ps-container").append("<ul id='brand-results_empty'><li class='featured disabled'>No brands beginning with '"+b+"'</li></ul>"))}
function selectModal(a){a.find("li.heading").off("click.modalSelect").on("click.modalSelect",function(a){a.preventDefault();a.stopPropagation();var b=$('<div class="modal selectModal" />');a=$('<div class="modal-header"><div class="modal-title">Select a Brand</div></div>');b.prepend('<button type="button" class="closeCircle" data-dismiss="modal" aria-hidden="true">\u00d7</button>').append(a).append($$("collapse-brand").clone(!0,!0).removeAttr("id").show()).on("shown.bs.modal",function(){$(this).find(".contain").css("height",
.6*b.height()+"px").perfectScrollbar({scrollSizeRatio:1,scrollbarHeight:30,wheelPropagation:!1})}).appendTo(document.body).modal({threshold:1});return!1})}function isIE(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1};
