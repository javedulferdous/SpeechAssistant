/*! Elevaate Retailer Tag riteaid.com_2 v1.9.3.1 | Copyright (c) 2020 | 2020-10-23 1603468524222 */ 
(function(A,r,l,Ma){var na="1.9.3.1",v="//tag.elevaate.io/portal",vb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},w=function(a){return"undefined"===typeof a||null===a?!0:!1},h=function(a){return w(a)||""===a?!0:!1},R=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},Y=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},Z=function(a,b){return a.hasAttribute?
a.hasAttribute(b):a[b]!==Ma},Na=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return vb[a]})},wb=function(a){var b=r.createElement("div");b.innerHTML=a;return Na(b.textContent||b.innerText)},S=function(a){return a?"function"!==typeof String.prototype.trim?a.replace(/^\s+|\s+$/g,""):a.trim():""},oa=function(a){if(l.JSON&&l.JSON.parse)return l.JSON.parse(a);if(null===a)return a;if("string"===typeof a&&(a=S(a)))return(new Function("return "+a))();m("_elevaateParseJSON","Parsing",A)},
Oa=function(a,b,c){if("undefined"===typeof HTMLElement||HTMLElement.prototype.insertAdjacentElement)a.insertAdjacentElement(b,c);else{var d=a.parentNode;switch(b.toLowerCase()){case "beforebegin":d.insertBefore(c,a);break;case "afterbegin":d=a.firstChild;a.insertBefore(c,d);break;case "beforeend":a.appendChild(c);break;case "afterend":b=a.nextSibling,d.insertBefore(c,b)}}return a},pa=function(a,b){var c=b?b:r;if(c.getElementsByClassName)return c.getElementsByClassName(a);var d;b=[];if(c.querySelectorAll)b=
c.querySelectorAll("."+a);else if(c.evaluate)for(c=c.evaluate(".//*[contains(concat(' ', @class, ' '), ' "+a+" ')]",c,null,0,null);d=c.iterateNext();)b.push(d);else for(c=c.getElementsByTagName("*"),a=new RegExp("(^|\\s)"+a+"(\\s|$)"),d=0;d<c.length;d++)a.test(c[d].className)&&b.push(c[d]);return b},qa=function(a,b){var c="",d=!1;try{Z(a,"class")&&(c=a.className,-1<c.indexOf(b)&&(d=!0))}catch(e){}return d},aa=function(a,b,c){var d=null;try{Z(a,b)&&(d=a.dataset?a.dataset[c]:a.getAttribute(b))}catch(e){}return d},
J=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},K=function(){return Date.now?Date.now():(new Date).getTime()},L=function(a,b,c,d){var e=null;try{for(;a;)if(e=aa(a,b,c),d&&null===e&&!qa(a,"elevaate-container-tag"))a=a.parentNode;else break}catch(g){}return e},Pa=function(a){return a=""===a||-1===a.indexOf("?")?a+"?":a+"&"},f=function(a,b,c){return a=Pa(a)+encodeURIComponent(b)+"="+encodeURIComponent(c)},E=function(a,b,c,d){var e;if(B(b)&&0<b.length)for(e=0;e<b.length;e++)try{a=
f(a,c,"")+d(b[e])}catch(g){}return a},ba=function(a){var b=null;try{var c,d=/\+/g,e=/([^&=]+)=?([^&]*)/g;b={};if(a)for(;null!==(c=e.exec(a));)b[decodeURIComponent(c[1].replace(d," "))]=decodeURIComponent(c[2].replace(d," "))}catch(g){m("_getQueryParams","Query",g)}return b},ca=function(){return ba(l.location.search.substring(1))},ra=function(){return ba(l.location.hash.substring(1))},q=function(a){var b=/\/|\\/g,c="";try{c=a.replace(b,"-")}catch(d){c=a}return c},M={setItem:function(a,b,c,d){if(c){var e=
new Date;e.setTime(e.getTime()+864E5*c);c="; expires= "+e.toUTCString()}else c="";d=d?"domain="+encodeURIComponent(d)+"; ":"";r.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+c+";"+d+"path=/"+("https:"===r.location.protocol?"; secure":"")},getItem:function(a){var b,c,d=null;a+="=";var e=r.cookie.replace(" ","").split(";");for(c=0;c<e.length;c++){for(b=e[c];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(a)){d=b.substring(a.length,b.length);break}}return d}},sa=function(a,b){var c=
r.createElement("script");c.type="text/javascript";c.async=!0;c.src=a;a=r.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);c.onload=c.onreadystatechange=function(){var a=c.readyState;if(!a||/complete|loaded/.test(a))b&&b(),c.onload=null,c.onreadystatechange=null}},T=function(a,b){var c={},d="elevaatejsoncallback",e=d+"static",g=!1,k=!1;try{if(a&&b){c={callbackName:b.callbackName||"callback",onSuccess:b.onSuccess||function(){},onTimeout:b.onTimeout||function(){},onTimeoutResponse:b.onTimeoutResponse||
function(){},timeout:b.timeout||0};var n=K()||0;d+=Math.floor(n+(1E8*Math.random()+1)).toString();if(0<c.timeout){g=!0;var t=setTimeout(function(){k=!0;l[d]=function(){c.onTimeoutResponse(p)};c.onTimeout(p)},c.timeout)}l[d]=function(a){g&&clearTimeout(t);if(!k)c.onSuccess(a)};l[e]=function(a){g&&clearTimeout(t);l[d]=function(){}};var p=f(a,c.callbackName,d);p=f(p,"crdt",n);p=f(p,"trdt",ta||"0");p=f(p,"tldt",ua||"0");p=f(p,"ptdl",Qa()||"0");p=f(p,"ptdclee",da()||"0");p=f(p,"ptdc",Ra()||"0");sa(p,function(){try{delete l[d]}catch(C){l[d]=
Ma}})}}catch(C){m("_jsonp","Request",C)}},x=function(){return w(na)?0:na},ta,ua,Ra=function(){var a=null;try{l.performance&&(a=l.performance.timing.domComplete)}catch(b){a=null}return a},da=function(){var a=null;try{l.performance&&(a=l.performance.timing.domContentLoadedEventEnd)}catch(b){a=null}return a},Qa=function(){var a=null;try{l.performance&&(a=l.performance.timing.domLoading)}catch(b){a=null}return a},Q=function(a,b){try{var c=new Image;c.src=v+"/public/logging/"+a+b}catch(d){}},V=function(a){var b=
"",c=!1,d="",e="",g="",k="",n="",t="",p="",C="",y="",Sa="",m="",u="";try{!h(a)&&a&&(c=!0,a.apiKey&&(d=a.apiKey),a.pageId&&(e=a.pageId),a.deviceId&&(g=a.deviceId))}catch(U){}try{k=x(),n=l.screen.height.toString()||"0",t=l.screen.width.toString()||"0",p=K()||"0",C=ta||"0",y=ua||"0",Sa=Qa()||"0",u=da()||"0",m=Ra()||"0"}catch(U){}c&&(b=f(b,"apiKey",d),b=f(b,"pid",e),b=f(b,"dvid",g));b=f(b,"tv",k);b=f(b,"csh",n);b=f(b,"csw",t);b=f(b,"crdt",p);b=f(b,"trdt",C);b=f(b,"tldt",y);b=f(b,"ptdl",Sa);b=f(b,"ptdclee",
u);return b=f(b,"ptdc",m)},Ta=function(a,b,c,d,e){b=V(b);try{c&&(c.renderPageRequestedTime&&(b=f(b,"rprqdt",c.renderPageRequestedTime)),c.renderPageReceivedTime&&(b=f(b,"rprcdt",c.renderPageReceivedTime)),c.response&&(c.response.pageImpressionId&&(b=f(b,"pimid",c.response.pageImpressionId)),c.response.serverRequestStartTime&&(b=f(b,"srqsdt",c.response.serverRequestStartTime)),c.response.serverRequestEndTime&&(b=f(b,"srcsdt",c.response.serverRequestEndTime))))}catch(g){}b=f(b,"msghd",d);b=f(b,"msgvl",
e);a?Q("log_render_page_success.gif",b):Q("log_render_page_failure.gif",b)},ea=function(a,b,c){c=V(c);c=f(c,"msghd",a);c=f(c,"msgvl",b);Q("log_message.gif",c)},N=function(a,b,c,d){d=V(d);d=f(d,"pimid",a);d=f(d,"msghd",b);d=f(d,"msgvl",c);Q("log_page_impression_message.gif",d)},m=function(a,b,c,d){ea("functionError","Error "+a+" - "+b+" - "+c,d)},xb=function(a){var b=!1;try{a?b=!0:"onerror"in l&&!l.onerror&&(b=!0),b&&(l.onerror=function(a,b,e){try{if("undefined"!==typeof b.test&&(b.test(/\/elevaate-tag(.*?)/)||
b.test(/\/elevaate-toolbar(.*?)/))){var c=V();c=f(c,"erurl",b);c=f(c,"ermsg",a);c=f(c,"erlne",e);Q("log_js_error.gif",c)}}catch(k){}})}catch(c){}},yb=function(a,b){var c=v+"/prod-imports/resources/images/image-not-found.png";Array.fromSequence=function(a){for(var b=Array(a.length),c=a.length;0<c--;)c in a&&(b[c]=a[c]);return b};var d=[Array.fromSequence(a)];var e=function(a){var e=new Image,p=function(){var a;var t=0;for(a=d[0].length;t!==a;t+=1)if(d[0][t].src===e.src){var g=d[0][t].src;d[0][t].src=
c}g&&(t=V(b),t=f(t,"erimg",g),Q("log_image_error.gif",t));Y(e,"error",p)};R(e,"error",p);e.src=a};for(var g=0,k=a.length;g!==k;g+=1)e(a[g].src)},B=function(a){var b=!1;try{if(!w(a)&&a instanceof Array)b=!0;else throw"NoArray";}catch(c){}return b},F=function(a){return!0===a||"true"===a?!0:!1===a||"false"===a?!1:null},Ua=function(a){return a&&0<a.length&&null!==a&&"null"!==a?!0:!1},G=function(a,b){var c=null;if(!h(a))try{c=S(a)}catch(d){a="InvalidString",b&&(a=b),m("_validateString",a,d)}return c},
z=function(a,b){var c=null;if(!w(a))try{if(isNaN(parseInt(a))){if(b)throw b;throw"InvalidInt";}c=parseInt(a)}catch(d){m("_validateInteger","InvalidInt",d)}return c},W=function(a){if(w(a)){a=0;try{var b=isNaN(a)||0===a?!1:!0;b||(a=l.screen.width||0)}catch(c){}b=a}else b=a;return b},X=function(a){var b="0",c=null;if(h(a))try{if(c=M.getItem("_elevaate_session_id"),null!==c)b=c;else{a="0";try{var d=c=void 0;for(d=c="";36>c++;d+=51*c&52?(c^15?8^Math.random()*(c^20?16:4):4).toString(16):"-");a=d}catch(e){m("_generateSessionId",
"UUID",e)}b=a;M.setItem("_elevaate_session_id",b,30)}}catch(e){}else b=a;return b},va=!1,fa=function(){return"complete"===r.readyState?!0:!1},H=function(a){try{if("load"===a.type||fa()){try{r.addEventListener?(r.removeEventListener("DOMContentLoaded",H,!1),l.removeEventListener("load",H,!1)):(r.detachEvent("onreadystatechange",H),l.detachEvent("onload",H))}catch(b){m("_domRemoveEventLoaded","remove",b)}va=!0}}catch(b){m("_domEventLoaded","loaded",b)}},Va=function(a,b){var c=!0;if(null!==a&&!isNaN(a)){if(0!==
a){c=!1;try{var d=K();var e=d-a;isNaN(b)&&(b=0);c=e<b?!0:e>b?e:!1}catch(g){c=!1}}}else if(va||fa())c=!1;return c},Wa=!1,ha=!1,wa=[],ia=function(){ha||(ha=!0);var a;for(a=0;a<wa.length;a++)try{wa[a].execute()}catch(b){m("_domReady","_executeReadyQueue",b)}},Xa=function(){try{r.addEventListener?(r.removeEventListener("DOMContentLoaded",I,!1),l.removeEventListener("load",I,!1)):(r.detachEvent("onreadystatechange",I),l.detachEvent("onload",I))}catch(a){m("_domRemoveEventAvailable","remove",a)}},Ya=function(a){xa(a)},
I=function(a){try{if(r.addEventListener||"DOMContentLoaded"===a.type||"interactive"===r.readyState||"load"===a.type||fa())Xa(),ia()}catch(b){m("_domEventAvailable","ready",b)}},xa=function(a){try{if(wa.push({callback:a,complete:!1,execute:function(){this.complete||(this.complete=!0,this.callback())}}),ha)ia();else if(fa())va=!0,setTimeout(ia,0);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",I,!1),r.addEventListener("DOMContentLoaded",H,!1),l.addEventListener("load",I,!1),l.addEventListener("load",
H,!1);else{r.attachEvent("onreadystatechange",I);r.attachEvent("onreadystatechange",H);l.attachEvent("onload",I);l.attachEvent("onload",H);var b=!1;try{b=null===l.frameElement&&r.documentElement}catch(c){}b&&b.doScroll&&function d(){if(!ha){try{b.doScroll("left")}catch(e){return setTimeout(d,50)}Xa();ia()}}()}}catch(c){m("_onDomReady","CheckReady",c)}},Za=function(a){return a?"elevaate-head-style-dss-"+a:"elevaate-default-id"},ya=function(a){var b;try{(b=r.getElementById(a))&&b.parentNode.removeChild(b)}catch(c){}},
za=function(a,b){var c=!1;try{ya(b),r.getElementsByTagName("head")[0].appendChild(a),c=!0}catch(d){c=!1}return c},zb=function(a,b,c){var d=!1;b=b.apiKey;var e="failedRenderPage.json",g="";h(c)||((g=f(g,"tv",x()))&&(e+=g),d=a+"/public/slots/"+encodeURIComponent(q(b))+"/"+encodeURIComponent(q(c))+"/"+e);return d},Ab=function(a,b,c,d){var e=!1;b=b.apiKey;var g="failedRenderPageDigitalShelfSpaces.json",k="";!h(c)&&B(d)&&0<d.length&&(d=d.toString(),(k=f(k,"tv",x()))&&(g+=k),e=a+"/public/slots/"+encodeURIComponent(q(b))+
"/"+encodeURIComponent(q(c))+"/"+encodeURIComponent(q(d))+"/"+g);return e},Bb=function(a,b,c,d){var e=!1;b=b.apiKey;var g="failedRenderPagePromotions.json",k="";!h(c)&&B(d)&&0<d.length&&(d=d.toString(),(k=f(k,"tv",x()))&&(g+=k),e=a+"/public/slots/"+encodeURIComponent(q(b))+"/"+encodeURIComponent(q(c))+"/"+encodeURIComponent(q(d))+"/"+g);return e},Aa=function(a,b,c,d,e,g){var k;try{var n=function(a){var b={},c=!1;try{if(a&&a.response)if(b=a.response)c=F(b.success);else throw"NoData";}catch(y){N(d,
"functionError","Error _jsonpRouteFailedRenderPage - Response - "+y)}g&&g(c,k)};"failedRenderPage"===b?k=zb(a,c,d):"failedRenderPageDss"===b?k=Ab(a,c,d,e):"failedRenderPagePromotions"===b&&(k=Bb(a,c,d,e));if(k)T(k,{callbackName:"jsoncallback",onSuccess:n});else throw"InvalidParams";}catch(t){m("_jsonpRouteFailedRenderPage","Request_"+b,t,c)}},Ba=function(a,b,c){Aa(v,"failedRenderPage",a,b,[],function(a,b){try{J(c)&&c(a)}catch(g){}})},Cb=function(a,b,c,d){Aa(v,"failedRenderPageDss",a,b,c,function(a,
b){try{J(d)&&d(a)}catch(k){}})},Db=function(a,b,c,d){Aa(v,"failedRenderPagePromotions",a,b,c,function(a,b){try{J(d)&&d(a)}catch(k){}})},Eb=function(a,b,c){N(b,"_dssLocationFailByTemplate",a,c)},Ca=function(a,b){var c="elevaate-dss-"+b,d="elevaate-container-tag "+c;a.setAttribute("id",c);a.setAttribute("data-elevaate-dss-id",b);a.className=d;a.innerHTML="";return a},$a=function(a,b){try{var c=b&&0<b.length?b:"div"}catch(d){c="div"}b=r.createElement(c);return b=Ca(b,a)},ja=function(a,b,c){var d={tagBlock:null,
splitHtml:[]};a&&-1!==a.indexOf(b)&&-1!==a.indexOf(c)&&(a=a.split(b),c=a[a.length-1].split(c),0<c.length&&(d.tagBlock=S(c[0])),d.splitHtml=c);return d},ab=function(a,b){null!==a.cssElement&&za(a.cssElement,a.cssId);b.innerHTML=a.html;return b},Da=function(a){var b=!1,c=!1;try{a.data.dssLocation&&(b=ab(a.data.dssLocation,a.data.dssContainer),"undefined"!==typeof b&&null!==b&&(a.data.dssContainer=b,bb(a.data.dssLocation.jsPostRenderFunction,a),yb(b.getElementsByTagName("img"),a.data.tagParams),Fb(a.data.tagParams,
b,a.data.dssLocation.pageImpressionId),c=!0))}catch(d){b=!1}c||N(a.data.dssLocation.pageImpressionId,"DssNotRendered-"+a.data.dssLocation.dssId,a.data.response.requestUrl,a.data.tagParams);return b},Ea=function(a,b){try{ya("elevaate-dss-"+a),!0===b&&ya(Za(a))}catch(c){}},cb=function(){var a,b;try{var c=pa("elevaate-container-tag");var d=c.length;for(a=0;a<d;a++)try{var e=c[0];(b=aa(e,"data-elevaate-dss-id","elevaateDssId"))&&Ea(b,!0)}catch(g){m("_removeAllExistingDssContainers","RemoveContainer",
g)}}catch(g){m("_removeAllExistingDssContainers","RemoveDssContainers",g)}},Gb=function(a){return Da(a)},db=function(a,b,c){try{null!==c&&J(c)&&c(a,b)}catch(d){m("_onLoadTimeoutCallback","Function",d,a)}},Hb=function(){return"//tag.elevaate.io/tag/img/elevaate-tiny.jpg"},ka=function(a,b,c,d,e,g,k,n,t){var p=!1,C=b.apiKey,y="click.html";b=function(a,b,c,d){var e="",p=a.userId||null,t=X(a.sessionId),g=G(a.deviceId,"invalidDeviceId"),n=W(z(a.clientScreenWidth,"invalidScreenWidth")),k=null;if(!w(b))try{if(isNaN(parseFloat(b)))throw"invalidProductPrice";
k=parseFloat(b)}catch(eb){m("_validateFloat","InvalidFloat",eb)}b=k;c=G(c,"invalidCurrencyCode");k=a.pageNo||null;d=z(d);a=F(a.testRequest);e=f(e,"tv",x());h(p)||(e=f(e,"uid",p));h(t)||(e=f(e,"usid",t));h(g)||(e=f(e,"dvid",g));h(n)||isNaN(parseInt(n))||(e=f(e,"csw",n));h(b)||(e=f(e,"ppr",b));h(c)||(e=f(e,"cc",c));h(k)||(e=f(e,"pno",k));h(d)||(e=f(e,"sno",d));h(a)||(e=f(e,"tsrq",a));return e}(b,k,n,t);(function(a,b,c){var d=!1;!h(a)&&b&&c&&(d=!0);return d})(C,c,d)&&(b&&(y+=b),p=h(g)?a+"/public/slots/"+
encodeURIComponent(q(C))+"/"+encodeURIComponent(q(c))+"/"+encodeURIComponent(q(d))+"/"+encodeURIComponent(q(e))+"/"+y:a+"/public/slots/"+encodeURIComponent(q(C))+"/"+encodeURIComponent(q(g))+"/"+encodeURIComponent(q(c))+"/"+encodeURIComponent(q(d))+"/"+encodeURIComponent(q(e))+"/"+y);return p},fb=function(a,b,c,d,e,g){var k=!1,n=b.apiKey,t=b.userId,p="clipCoupon.html";b=function(a,b){var c="",d=a.userId||null,e=X(a.sessionId),p=G(a.deviceId,"invalidDeviceId"),t=W(z(a.clientScreenWidth,"invalidScreenWidth")),
g=a.pageNo||null;b=z(b);a=F(a.testRequest);c=f(c,"tv",x());h(d)||(c=f(c,"uid",d));h(e)||(c=f(c,"usid",e));h(p)||(c=f(c,"dvid",p));h(t)||isNaN(parseInt(t))||(c=f(c,"csw",t));h(g)||(c=f(c,"pno",g));h(b)||(c=f(c,"sno",b));h(a)||(c=f(c,"tsrq",a));return c}(b,g);(function(a,b,c,d,e){var p=!1;h(a)||h(b)||!c||!d||h(e)||(p=!0);return p})(n,c,d,e,t)&&(b&&(p+=b),k=a+"/public/slots/"+encodeURIComponent(q(n))+"/"+encodeURIComponent(q(c))+"/"+encodeURIComponent(q(d))+"/"+encodeURIComponent(q(e))+"/"+p);return k},
Ga=function(a,b,c,d){var e={success:!1,pageImpressionId:null,productId:null,agreementId:null,clickId:null,productPrice:null,currencyCode:null,slotNumber:null};e.productId=L(a,"data-elevaate-pid","elevaatePid",!0);e.agreementId=L(a,"data-elevaate-aid","elevaateAid",!0);e.clickId=b&&null!==b&&""!==b?b:L(a,"data-elevaate-cid","elevaateCid",!0);e.pageImpressionId=c&&null!==c&&""!==c?c:L(a,"data-elevaate-piid","elevaatePiid",!0);try{e.slotNumber=d&&null!==d&&""!==d?d:L(a,"data-elevaate-sno","elevaateSno",
!0)}catch(g){}try{e.productPrice=L(a,"data-elevaate-ppr","elevaatePpr",!0)}catch(g){}try{e.currencyCode=L(a,"data-elevaate-pcc","elevaatePcc",!0)}catch(g){}null!==e.productId&&null!==e.agreementId&&null!==e.clickId&&(e.success=!0);return e},gb=function(a,b){var c=r.createElement("img");c.src="//tag.elevaate.io/tag/img/elevaate-tiny.jpg";c.className=b;c.style.display="none";a.appendChild(c);return c},la=function(a,b,c,d,e,g,k,n,t){(a=ka(v,b,c,d,e,g,k,n,t))?(b=new Image,b.src=a):m("_trackClickProduct",
"Url","InvalidParams",b)},hb=function(a,b,c,d,e){(b=fb(v,a,b,c,d,e))?(a=new Image,a.src=b):m("_trackClickClipCoupon","Url","InvalidParams",a)},ib=function(a,b,c,d,e,g){c=Ga(c,d,e,g);c.success&&la(a,b,c.agreementId,c.productId,c.clickId,c.pageImpressionId,c.productPrice,c.currencyCode,c.slotNumber);return c.success},Fb=function(a,b,c){var d=function(){var b=ka(v,a,e.agreementId,e.productId,e.clickId,e.pageImpressionId,e.productPrice,e.currencyCode,e.slotNumber);k.src&&b?k.src=b:m("_updateClickLog",
"Url","InvalidParams",a);Y(l,"pagehide",d)},e,g;var k=gb(b,"elevaate-click-link");R(b,"click",function(b){b=b?b:l.event;b.t=b.target||b.srcElement;e=Ga(b.t,null,c);e.success&&("onpagehide"in l?R(l,"pagehide",d):(b=ka(v,a,e.agreementId,e.productId,e.clickId,e.pageImpressionId,e.productPrice,e.currencyCode,e.slotNumber))?(g=new Image,g.src=b):m("_setupClickTracking","Url","InvalidParams",a))})},ma=function(a,b,c,d,e,g){try{var k=d(a);if(k)e(k);else throw"AttemptFailed";}catch(n){k=100,b&&(k=b),setTimeout(function(){a++;
a<c?ma(a,b,c,d,e,g):g?g():ea("_deferAttempt","attemptFailedAfter"+a)},k)}},Ha=function(a,b){a?b()&&b():setTimeout(function(){Ha(a,b)},50)},lb=function(a,b,c,d,e){return{data:{requestResponse:a||null,tagParams:b||null,dssLocations:c||null,dssContainer:d||null,dssLocation:e||null},functions:{deferOnObject:Ha,deferAttempt:ma,loadScript:sa,onDomAvailable:Ya,removeAllExistingDssContainers:cb,removeExistingDssContainer:Ea,buildDssContainer:$a,setupExistingDssContainer:Ca,getElementsByClassName:pa,insertAdjacentElement:Oa,
appendCssElementToHead:za,appendDssTemplateToDocument:ab,renderDssContainer:Da,renderDssContainerFromData:Gb,logMessage:ea,logPageImpressionMessage:N,trackClickProductElement:ib,trackClickProduct:la,trackClickClipCoupon:hb,trackEvent:jb,trackPage:kb,hasClassName:qa,hasAttribute:Z,addEventListener:R,removeEventListener:Y,findDataAttrValueFromElement:aa,trim:S,parseJSON:oa,logDssLocationFailureByTemplate:Eb,registerFailedPageImpression:Ba,registerFailedPageDssImpression:Cb,registerFailedPagePromotionImpression:Db}}},
mb=function(a){var b=null;try{null!==a&&0<a.length&&(b=new Function("_elevaateDssParams",a))}catch(c){m("_getRawJsAsFunction","New Function",c)}return b},bb=function(a,b){var c=!1;try{J(a)&&(c=a(b))}catch(d){}return c},jb=function(a){nb(a)},Jb=function(a,b){var c=function(a){var b=f("","tv",x());w(a.eventId)||(b=f(b,"evid",a.eventId));h(a.referrerId)||(b=f(b,"refid",a.referrerId));h(a.campaignId)||(b=f(b,"cmpid",a.campaignId));h(a.clubCardId)||(b=f(b,"uccid",a.clubCardId));h(a.zipcode)||(b=f(b,"zipc",
a.zipcode));h(a.referrerDeviceId)||(b=f(b,"refdvid",a.referrerDeviceId));h(a.liveRampId)||(b=f(b,"lrid",a.liveRampId));h(a.userId)||(b=f(b,"uid",a.userId));h(a.sessionId)||(b=f(b,"usid",a.sessionId));h(a.deviceId)||(b=f(b,"dvid",a.deviceId));h(a.clientScreenWidth)||isNaN(parseInt(a.clientScreenWidth))||(b=f(b,"csw",a.clientScreenWidth));h(a.currencyCode)||(b=f(b,"cc",a.currencyCode));h(a.pageId)||(b=f(b,"pid",a.pageId));h(a.storeId)||(b=f(b,"stid",a.storeId));return b=E(b,a.productUpcs,"pupcs",ob)},
d=!1,e=b.apiKey,g=function(a){return{eventId:a.eventId,productUpcs:a.productUpcs,referrerId:a.referrerId,campaignId:a.campaignId,clubCardId:a.clubCardId,zipcode:a.zipcode,referrerDeviceId:a.referrerDeviceId,liveRampId:a.liveRampId,userId:a.userId,sessionId:X(a.sessionId),pageId:a.pageId,deviceId:G(a.deviceId,"invalidDeviceId"),clientScreenWidth:W(z(a.clientScreenWidth,"invalidScreenWidth")),currencyCode:a.currencyCode,storeId:a.storeId}}(b),k=null,n=null;(function(a){var b=!1;h(a)||h(g.eventId)||
(b=!0);return b})(e,b)&&(n="event.json",(k=c(g))&&(n+=k),null!==n&&(d=a+"/public/slots/"+encodeURIComponent(q(e))+"/"+n));return d},Kb=function(a,b,c){var d;try{var e=function(a){c&&c()};if(d=Jb(a,b))T(d,{callbackName:"jsoncallback",onSuccess:e});else throw"InvalidParams";}catch(g){m("_jsonpRouteTrackEvent","Request",g,b)}},kb=function(a){pb(a)},Mb=function(a,b){var c=function(a){var b=f("","tv",x());h(a.testRequest)||(b=f(b,"tsrq",a.testRequest));return b=E(b,a.promotions,"prms",Lb)},d=!1,e=b.apiKey,
g=function(a){return{pageImpressionId:G(a.pageImpressionId,"invalidPageImpressionId"),promotions:a.promotions,testRequest:a.testRequest}}(b),k=null,n=null;(function(a){var b=!1;h(a)||h(g.pageImpressionId)||(b=!0);return b})(e,b)&&(n="renderPageCharge.json",(k=c(g))&&(n+=k),null!==n&&(d=a+"/public/slots/"+encodeURIComponent(q(e))+"/"+encodeURIComponent(q(b.pageImpressionId))+"/"+n));return d},Nb=function(a,b,c){var d;try{var e=function(a){c&&c()};if(d=Mb(a,b))T(d,{callbackName:"jsoncallback",onSuccess:e});
else throw"InvalidParams";}catch(g){m("_jsonpRouteTrackPage","Request",g,b)}},D=function(a,b){var c=a;try{w(a)||h(a)||(c=a.replace("|","").replace(",",""),!0===b&&(c=c.toLowerCase()))}catch(d){c=a}return c},ob=function(a){return D(a,!1)},Ob=function(a){var b="",c=encodeURIComponent("|"),d=a.position,e=a.maxNumber;w(a)||h(d)||h(e)||isNaN(parseInt(e))||(b+=encodeURIComponent(D(d,!0))+c+encodeURIComponent(e));return b},qb=function(a){var b="",c=encodeURIComponent("|"),d=a.key,e=a.value,g=a.keyName,k=
a.valueName,n=z(a.order);w(a)||h(d)||(b+=encodeURIComponent(D(d,!0))+c,h(e)||(b+=encodeURIComponent(D(e,!0))),h(g)&&h(k)&&h(n)||(b+=c,h(g)||(b+=encodeURIComponent(D(g,!0))),b+=c,h(k)||(b+=encodeURIComponent(D(k,!0))),b+=c,h(n)||isNaN(n)||(b+=encodeURIComponent(n))));return b},Pb=function(a){var b="",c=encodeURIComponent("|");a={key:a.key,value:a.value};w(a)||h(a.key)||(b+=encodeURIComponent(D(a.key,!1))+c+encodeURIComponent(D(a.value,!1)));return b},Lb=function(a){var b="",c=encodeURIComponent("|");
a={agreementId:a.agreementId,productId:a.productId};w(a)||h(a.agreementId)||h(a.productId)||(b+=encodeURIComponent(D(a.agreementId,!1))+c+encodeURIComponent(D(a.productId,!1)));return b},Qb=function(a){var b=f("","tv",x());w(a.pageType)||(b=f(b,"pty",a.pageType));w(a.pageId)||(b=f(b,"pid",a.pageId));h(a.userId)||(b=f(b,"uid",a.userId));h(a.sessionId)||(b=f(b,"usid",a.sessionId));h(a.currencyCode)||(b=f(b,"cc",a.currencyCode));h(a.storeId)||(b=f(b,"stid",a.storeId));h(a.deliveryEpochTime)||isNaN(parseInt(a.deliveryEpochTime))||
(b=f(b,"det",a.deliveryEpochTime));h(a.deviceId)||(b=f(b,"dvid",a.deviceId));h(a.clientScreenWidth)||isNaN(parseInt(a.clientScreenWidth))||(b=f(b,"csw",a.clientScreenWidth));h(a.searchText)||(b=f(b,"stxt",a.searchText));h(a.dssName)||(b=f(b,"dssn",a.dssName));!h(a.testRequest)&&F(a.testRequest)&&(b=f(b,"tsrq",a.testRequest));!h(a.pageNo)&&z(a.pageNo)&&(b=f(b,"pno",a.pageNo));h(a.segmentation)||(b=f(b,"seg",a.segmentation));h(a.promotionType)||(b=f(b,"prt",a.promotionType));b=E(b,a.excludeProductIds,
"exp",ob);b=E(b,a.maxResultsDss,"mxrd",Ob);b=E(b,a.filters,"fl",qb);b=E(b,a.promotionFilters,"prfl",qb);return b=E(b,a.customValues,"cv",Pb)},Rb=function(a,b,c){var d=function(a,b){try{var c=!0===a?"renderPagePrecharge.json":"renderPage.json"}catch(C){c="renderPage.json"}return c},e=!1,g=c.apiKey,k=function(a){var b=a.pageType,c=null;var d=a.pageId;var e=a.categoryId;h(d)?h(e)||(c=e):c=d;return{pageType:b,pageId:c,userId:a.userId,storeId:a.storeId,currencyCode:a.currencyCode,sessionId:X(a.sessionId),
deliveryEpochTime:z(a.deliveryEpochTime,"invalidEpoch"),deviceId:G(a.deviceId,"invalidDeviceId"),clientScreenWidth:W(z(a.clientScreenWidth,"invalidScreenWidth")),customValues:a.customValues,filters:a.filters,promotionFilters:a.promotionFilters,promotionType:a.promotionType,maxResultsDss:a.maxResultsDss,searchText:a.searchText,dssName:a.dssName,pageNo:a.pageNo,segmentation:a.segmentation,excludeProductIds:a.excludeProductIds,testRequest:a.testRequest}}(c);(function(a,b){var c=!1;h(a)||h(b.pageId)&&
h(b.pageType)||(c=!0);return c})(g,k)&&(b=d(b,c),(k=Qb(k))&&(b+=k),e=a+"/public/slots/"+encodeURIComponent(q(g))+"/"+b);return e},Sb=function(a,b){if(!a.isParsed){try{var c=oa(a.templateRaw)||null}catch(U){c=a.templateRaw}var d=$a(a.dssId,null);try{var e=null;var g=ja(c,'<script data-id="elevaate-before-render">',"\x3c/script>");g.tagBlock&&0<g.tagBlock.length&&(e=g.tagBlock);var k=mb(e)}catch(U){k=null}try{e=c;g=null;var f=ja(e,'<script data-id="elevaate-after-render">',"\x3c/script>");f.tagBlock&&
0<f.tagBlock.length?g=f.tagBlock:(f=ja(e,"<script>","\x3c/script>"),f.tagBlock&&0<f.tagBlock.length&&(g=f.tagBlock));var h=mb(g)}catch(U){h=null}f=c;g=e=null;var p=!1;try{var l=Za(a.dssId);var y=ja(f,"<style>","</style>");if(y.splitHtml&&1<y.splitHtml.length){var m=y.tagBlock;e=y.splitHtml[y.splitHtml.length-1];p=!0;if(m&&0<m.length){y=l;var q=r.createElement("style");q.setAttribute("type","text/css");q.setAttribute("id",y);if(q.styleSheet)q.styleSheet.cssText=m;else{var u=r.createTextNode(m);q.appendChild(u)}g=
q}}}catch(U){p=!1}p||(g=null,e=f);a.isParsed=!0;a.template=c;a.html=e;a.cssId=l;a.cssElement=g;a.containerElement=d;a.jsPreRenderFunction=k;a.jsPostRenderFunction=h}b&&b(a)},Tb=function(a,b,c,d){var e;try{var g=function(a){var b={},g=!1,f="NotFound",k=[],l={requestUrl:null,impressionLoggingLevel:null,pageImpressionId:null,serverRequestStartTime:null,serverRequestEndTime:null};try{if(a&&a.response)if(b=a.response)if(g=F(b.success),l.requestUrl=e,h(b.pageImpressionId)||(l.pageImpressionId=b.pageImpressionId),
h(b.impressionLoggingLevel)||(l.impressionLoggingLevel=b.impressionLoggingLevel),h(b.serverRequestStartTime)||h(b.serverRequestEndTime)||(l.serverRequestStartTime=b.serverRequestStartTime,l.serverRequestEndTime=b.serverRequestEndTime),!0===g){var q=l.pageImpressionId;a=b;b=[];g=null;var r;if(B(a.dssLocations)&&0<a.dssLocations.length)for(r=0;r<a.dssLocations.length;r++){f=q;var u=a.dssLocations[r],v=null,Fa=!1;try{if(u&&(Fa=F(u.success),!0===Fa&&Ua(u.template))){v={pageImpressionId:f||null,dssId:u.dssId||
null,dssProductType:null,templateRaw:u.template,getParsedTemplate:Sb,isParsed:!1,template:null,html:null,cssId:null,cssElement:null,containerElement:null,jsPreRenderFunction:null,jsPostRenderFunction:null};try{u.dssProductType&&(v.dssProductType=u.dssProductType)}catch(O){}}}catch(O){throw"_getDssLocationFromResponse";}g=v;null!==g&&b.push(g)}k=b}else{if(!1===g)throw b.error&&(f=b.error),f;}else throw"NoData";}catch(O){null!==l.pageImpressionId?N(l.pageImpressionId,"functionError","Error _jsonpRouteRenderPage - GetTemplate - "+
O):m("_jsonpRouteRenderPage","GetTemplate",O,c)}d&&d(l,k)};if(e=Rb(a,b,c))T(e,{callbackName:"jsoncallback",onSuccess:g});else throw"InvalidParams";}catch(k){m("_jsonpRouteRenderPage","Request",k,c)}},Ub=function(a){!0!==bb(a.data.dssLocation.jsPreRenderFunction,a)&&xa(function(){ma(0,100,10,function(){return r.getElementById("elevaate-dss-"+a.data.dssLocation.dssId)},function(b){b=!1;if(a.data.dssContainer){a.data.dssContainer=Ca(a.data.dssContainer,a.data.dssLocation.dssId);var c=Da(a);null!==c&&
(b=!0)}b||N(a.data.dssLocation.pageImpressionId,"_validateAndRenderDssContainer","NotFound-"+a.data.dssLocation.dssId,a.data.tagParams)},function(){Ba(a.data.tagParams,a.data.dssLocation.pageImpressionId,function(){N(a.data.dssLocation.pageImpressionId,"_dssLocationFailByTag",a.data.dssLocation.dssId,a.data.tagParams)})})})},Vb=function(a,b,c,d){var e;d.getParsedTemplate(d,function(d){e=lb(a,b,c,d.containerElement,d);Ub(e)})},Wb=function(a,b,c){var d=function(a){var b=f("","tv",x());h(a.userId)||
(b=f(b,"uid",a.userId));h(a.sessionId)||(b=f(b,"usid",a.sessionId));h(a.deviceId)||(b=f(b,"dvid",a.deviceId));h(a.clientScreenWidth)||isNaN(parseInt(a.clientScreenWidth))||(b=f(b,"csw",a.clientScreenWidth));h(a.currencyCode)||(b=f(b,"cc",a.currencyCode));h(a.orderId)||(b=f(b,"oid",a.orderId));h(a.orderTotal)||(b=f(b,"otl",a.orderTotal));h(a.orderRequestMultiplexed)||!0!==a.orderRequestMultiplexed||(b=f(b,"ormd",a.orderRequestMultiplexed));a=a.orderItems;var c;if(B(a)&&0<a.length)for(c=0;c<a.length;c++)try{var d=
a[c];var e=d.productId+"|"+d.quantity+"|"+d.price;b=f(b,"ois",e)}catch(cc){}return b},e=!1,g=b.apiKey;b=function(a){return{userId:a.userId,currencyCode:a.currencyCode,sessionId:X(a.sessionId),deviceId:G(a.deviceId,"invalidDeviceId"),clientScreenWidth:W(z(a.clientScreenWidth,"invalidScreenWidth")),orderId:a.orderId,orderTotal:a.orderTotal,orderItems:a.orderItems,orderRequestMultiplexed:a.orderRequestMultiplexed}}(b);var k=null,l=null;(function(a){var b=!1;h(a)||(b=!0);return b})(g)&&("trackBasket"===
c?l="basket.json":"trackTransaction"===c&&(l="transaction.json"),(k=d(b))&&(l+=k),null!==l&&(e=a+"/public/slots/"+encodeURIComponent(q(g))+"/"+l));return e},Xb=function(a,b,c,d){var e;try{var g=function(a){d&&d()};if(e=Wb(a,b,c))T(e,{callbackName:"jsoncallback",onSuccess:g});else throw"InvalidParams";}catch(k){m("_jsonpRouteTrackOrderDetails","Request",k,b)}},Yb=function(){var a=K();var b=f("","tv",x());b=f(b,"cb",a);sa("https://tag.elevaate.io/tag/elevaate-toolbar.js"+b,function(){})},Zb=function(){var a=
null,b=null,c=!1,d=function(){var a=ca(),b="",c;for(c in a)a.hasOwnProperty(c)&&"elevaateAccessToken"!==c&&"toolbarType"!==c&&(b=f(b,c,a[c]));return b},e=function(){var a,b=null;(a=ca())&&(b=a.elevaateAccessToken||null);b&&""!==b&&null!==b||(a=ra())&&(b=a.elevaateAccessToken||null);return b},g=function(){var a,b=null;(a=ca())&&(b=a.toolbarType||null);b&&""!==b&&null!==b||(a=ra())&&(b=a.toolbarType||null);return b},k=function(){var a=M.getItem("elevaateAccessToken");return a&&null!==a&&""!==a?!0:!1},
h=function(a){var b=!1;a&&null!==a&&""!==a&&(M.setItem("elevaateAccessToken",a,1),b=k());return b},l=function(a){var b=!1;a&&null!==a&&""!==a&&(M.setItem("toolbarType",a,1),b=(a=M.getItem("toolbarType"))&&null!==a&&""!==a?!0:!1);return b};try{a=e(),b=g(),a&&null!==a&&h(a)&&(l(b),location.href=location.protocol+"//"+location.host+location.pathname+d()),k()&&(Yb(b),c=!0)}catch(p){m("_checkActivatePageSelector","Validating",p)}return c},nb=function(a){Kb(v,{apiKey:a.apiKey,eventId:a.eventId,productUpcs:a.productUpcs,
referrerId:a.referrerId,campaignId:a.campaignId,clubCardId:a.clubCardId,zipcode:a.zipcode,referrerDeviceId:a.referrerDeviceId,liveRampId:a.liveRampId,userId:a.userId,sessionId:a.sessionId,pageId:a.pageId,deviceId:a.deviceId,clientScreenWidth:a.clientScreenWidth,currencyCode:a.currencyCode,storeId:a.storeId},function(){})},pb=function(a){var b={apiKey:a.apiKey,pageImpressionId:a.pageImpressionId,testRequest:a.testRequest,promotions:[]};var c=a.promotions;if(B(c))for(a=0;a<c.length;a++){var d=c[a];
b.promotions.push({agreementId:d.agreementId,productId:d.productId})}try{Nb(v,b,function(){})}catch(e){m("_routeTrackPage","_jsonpRouteTrackPage",e,b)}},Ia=function(a,b){b={apiKey:a.apiKey,sessionId:a.sessionId,userId:a.userId,deviceId:a.deviceId,clientScreenWidth:a.clientScreenWidth,currencyCode:a.currencyCode,orderId:a.orderId,orderTotal:a.orderTotal,orderItems:[],orderRequestMultiplexed:b};var c=a.orderItems;if(B(c))for(a=0;a<c.length;a++){var d=c[a];b.orderItems.push({productId:d.productId,quantity:d.quantity,
price:d.price})}return b},rb=function(a,b){var c=[];var d=[],e,g;try{if(a&&a.orderItems&&30<a.orderItems.length){for(e=0;e<a.orderItems.length;e+=30)c.push(a.orderItems.slice(e,e+30));for(g=0;g<c.length;g++){var f=Ia(a,!0);f.orderItems=[];f.orderItems=c[g];d.push(f)}}else d.push(a)}catch(n){a.orderRequestMultiplexed=!0,d.push(a)}for(c=0;c<d.length;c++)a=d[c],Xb(v,a,b)},sb=function(a,b){var c=function(a,b,c){a=0;"requestLoadTimeout"===c?a=2E4:"renderLoadTimeout"===c&&(a=4E4);return null===z(b,"timeout")||
isNaN(b)?a:b},d={apiKey:a.apiKey,pageType:a.pageType,pageId:a.pageId,categoryId:a.categoryId,sessionId:a.sessionId,userId:a.userId,currencyCode:a.currencyCode,storeId:a.storeId,deliveryEpochTime:a.deliveryEpochTime,deviceId:a.deviceId,clientScreenWidth:a.clientScreenWidth,useTestProducts:a.useTestProducts,customValues:a.customValues,filters:a.filters,promotionFilters:a.promotionFilters,promotionType:a.promotionType,maxResultsDss:a.maxResultsDss,searchText:a.searchText,dssName:a.dssName,pageNo:a.pageNo,
segmentation:a.segmentation,excludeProductIds:a.excludeProductIds,testRequest:a.testRequest,requestLoadTimeout:c(a.apiKey,a.requestLoadTimeout,"requestLoadTimeout"),renderLoadTimeout:c(a.apiKey,a.renderLoadTimeout,"renderLoadTimeout"),ignoreLoadTimeouts:function(a){return null===F(a)?!1:a}(a.ignoreLoadTimeouts),onBeforeRenderPage:a.onBeforeRenderPage,onRenderPage:a.onRenderPage,onRequestLoadTimeout:a.onRequestLoadTimeout,onRenderLoadTimeout:a.onRenderLoadTimeout},e={perfTimeDomContentLoadedEventEnd:null,
renderPageRequestedTime:K(),renderPageReceivedTime:null,response:null};a=!0;d.ignoreLoadTimeouts||(e.perfTimeDomContentLoadedEventEnd=da(),a=Va(e.perfTimeDomContentLoadedEventEnd,d.requestLoadTimeout));!0===a?Tb(v,b,d,function(a,b){var c=!0,g=!1,f=!1;e.renderPageReceivedTime=K();e.response=a;d.ignoreLoadTimeouts||(e.perfTimeDomContentLoadedEventEnd=da(),c=Va(e.perfTimeDomContentLoadedEventEnd,d.renderLoadTimeout));if(!0===c){var h=lb(a,d,b,null,null);var k=d.onBeforeRenderPage,l=!0;try{null!==k&&
J(k)&&!1===k(h)&&(l=!1)}catch(u){m("_onBeforeRenderPage","PageBeforeRenderFunction",u,h.data.tagParams)}if(l){if(b&&0<b.length)for(k=0;k<b.length;k++)h=b[k],Vb(a,d,b,h);if(null!==e.response.impressionLoggingLevel&&("FS"===e.response.impressionLoggingLevel||"S"===e.response.impressionLoggingLevel)){g=f=!0;var q=b&&0<b.length?"dssRenderAttempt":"noDssToRender"}}}else{b&&0<b.length&&a&&a.pageImpressionId&&Ba(d,a.pageImpressionId);if(null===e.response.impressionLoggingLevel||"FS"===e.response.impressionLoggingLevel||
"F"===e.response.impressionLoggingLevel)f=!0,g=!1,q=b&&0<b.length?"dssNotRenderedPageLoaded":"noDssToRenderPageLoaded";db(d,e,d.onRenderLoadTimeout)}f&&Ta(g,d,e,q,c)}):(Ta(!1,d,e,"dssNotRequestedPageLoaded",a),db(d,e,d.onRequestLoadTimeout))},Ja=function(a){var b=null,c=!1;try{if(b=a.event||null,null!==b)switch(b){case "renderPage":sb(a,!1);c=!0;break;case "fetchPage":sb(a,!0);c=!0;break;case "trackPage":pb(a);c=!0;break;case "trackClick":var d={apiKey:a.apiKey,agreementId:a.agreementId,productId:a.productId,
clickId:a.clickId,pageImpressionId:a.pageImpressionId,productPrice:a.productPrice,currencyCode:a.currencyCode,slotNumber:a.slotNumber,userId:a.userId,sessionId:a.sessionId,deviceId:a.deviceId,clientScreenWidth:a.clientScreenWidth,pageNo:a.pageNo,testRequest:a.testRequest,storeId:a.storeId};try{la(null,d,d.agreementId,d.productId,d.clickId,d.pageImpressionId,d.productPrice,d.currencyCode,d.slotNumber)}catch(n){m("_routeTrackClick","_trackClickProduct",n,d)}c=!0;break;case "trackClipCoupon":var e={apiKey:a.apiKey,
agreementId:a.agreementId,productId:a.productId,pageImpressionId:a.pageImpressionId,slotNumber:a.slotNumber,userId:a.userId,sessionId:a.sessionId,deviceId:a.deviceId,clientScreenWidth:a.clientScreenWidth,pageNo:a.pageNo,testRequest:a.testRequest,storeId:a.storeId};try{hb(e,e.pageImpressionId,e.agreementId,e.productId,e.slotNumber)}catch(n){m("_routeTrackClickClipCoupon","_trackClickClipCoupon",n,e)}c=!0;break;case "trackBasket":var f=Ia(a,!1);rb(f,"trackBasket");c=!0;break;case "trackTransaction":var h=
Ia(a,!1);rb(h,"trackTransaction");c=!0;break;case "trackEvent":nb(a);c=!0;break;case "elevaate":b=null;try{a&&(b=a.start)&&null!==b&&z(b)&&(ta=b)}catch(n){m("_routeElevaate","route",n)}c=!0;break;default:c=!1}else throw"NoEventParam";}catch(n){m("_routeQueueEvent","Routing",n)}return c},$b=function(){var a,b="elevaateData";try{a:{for(var c=/\/elevaate-tag(.*?)/,d=r.getElementsByTagName("script"),e,f,h=0,l=d.length;h!==l;h+=1)if(e=d[h],(f=e.getAttribute?e.getAttribute("src"):e.src)&&c.test(f)){var m=
f;break a}m=null}m&&(a=ba(m.replace(/^.*\?/,"")))&&(b=a.gv||"elevaateData")}catch(p){b="elevaateData"}return b},tb=function(a){var b=null;try{if(B(l[a]))b=l[a];else if(B(l.elevaateData))b=l.elevaateData;else throw"NoGlobalVar";}catch(c){}return b},P=null,Ka=function(a,b,c){var d=100;Wa||(d=50);try{null!==P&&B(P)||(P=tb(c)),null!==P&&0<P.length&&P[a]&&(Ja(P[a]),a++)}catch(e){}b&&setTimeout(function(){Ka(a,b,c)},d)},ac=function(a,b){a.push=function(c){Array.prototype.push.call(a,c);b(a)}},bc=function(a){var b=
null,c=0,d=0,e;try{b=tb(a);d=b.length;for(e=0;e<d;e++)Ja(b[c]),c++;ac(b,function(a){Ja(a[c]);c++})}catch(g){Ka(c,!0,a)}},ub=function(){var a=!0,b=!1;try{var c=$b();ua=K();xa(function(){Wa=!0});xb(!1);na=x()+"_riteaid.com_2";c=function(a,b){var c=function(a){var b=!1;try{a.elevaateDebugTemplate&&"true"===a.elevaateDebugTemplate&&(b=!0)}catch(Ib){b=!1}return b},d=function(a){var b=!1;try{a.elevaatePreview&&"true"===a.elevaatePreview&&(b=!0)}catch(Ib){b=!1}return b},e=function(a){var b="//tag.elevaate.io",
c="",d=[{host:"tag.elevaate.io",prefix:""},{host:"qa-tag.develevaate.io",prefix:"qa"}],e,f=null;try{var g=l.location.hostname;for(e=0;e<a.length;e++){var h=a[e];if(-1<g.indexOf(h)){f=h;break}}if(f){var k=g.split(".");2===k.length||3===k.length&&"www"===k[0]?(b=d[0].host,c=""):(b=d[1].host,c=d[1].prefix)}v="//"+b+"/portal"}catch(ec){v="//tag.elevaate.io/portal"}return c},f=function(a,b,c,d,e){var g,h,k=!1,m;try{if(g=l[d])if(0===a&&1<g.length)for(m=0;m<g.length;m++){try{(h=g[a])&&e&&e(h)}catch(La){}a++}else{if(300===
g.length){a=299;h=g[a];var n=h["gtm.uniqueEventId"];if(null===b||b!==n)k=!0,b=n}else 0<g.length&&g[a]&&(h=g[a],k=!0,a++);k&&e&&e(h)}}catch(La){}c&&setTimeout(function(){f(a,b,c,d,e)},100)},h=function(a,b){var e,f,g,h;try{b.isRenderPageEvent&&setTimeout(function(){f=q();g=d(a.urlQueryParams);h=c(a.urlQueryParams);e={event:"renderPage",apiKey:a.apiKey,currencyCode:a.defaultCurrencyCode,pageType:b.pageType,onBeforeRenderPage:function(a){a.data.tagParams.riteAid={functions:{tagMethods:r}};return!0}};
g&&(e.pageType="elevaatePreview+"+e.pageType);f&&(e.userId=f);b.pageId&&(e.pageId=b.pageId);b.isSearch&&(e.searchText=b.searchText);h&&(e.customValues=e.customValues||[],e.customValues.push({key:"debugTemplate",value:"true"}));l[a.globalVarName]=l[a.globalVarName]||[];l[a.globalVarName].push(e)},1)}catch(eb){}},m=function(a,b,c){var d={pageType:"",pageId:"",searchText:"",isSearch:!1,locationPath:"",queryParams:null,isRenderPageEvent:!1};try{d.locationPath=l.location.pathname,d.queryParams=a,b?"/"===
d.locationPath?(d.isRenderPageEvent=!0,d.pageType="home-page"):"/quotient"===d.locationPath&&(d.isRenderPageEvent=!0,d.pageType="landing-page",d.pageId=d.queryParams.landing,d.pageId||(d.pageId="unknown")):c&&c.pageType&&("searchresults"===c.pageType?(d.isRenderPageEvent=!0,d.pageType="search-results",d.searchText=d.queryParams.q,d.isSearch=!0):"category"===c.pageType&&(d.isRenderPageEvent=!0,d.pageType="browse-results",d.pageId=d.locationPath))}catch(dc){}return d},q=function(){var a="";try{a=l.JSON.parse(l.localStorage.getItem("mage-cache-storage")).customer.wellness_id}catch(O){a=
""}try{a||(a=r.cookie.doCookies.getItem("wellnessID"))}catch(O){a=""}try{a||(a=l.RiteAid.getUserSessionData().Data.userDetails.WellnessOriginalCardNumber)}catch(O){a=""}return a},r=b(),w=!1,u={apiKey:"riteaid.com",defaultCurrencyCode:"USD",globalVarName:"elevaateData",elevaateEventIdTransaction:"trackTransaction",elevaateEventIdBasket:"trackBasket",retailerDataLayerVarName:"dataLayer",urlQueryParams:{}};try{if(l.elevaateDebugTag)debugger;e([u.apiKey]);u.urlQueryParams=r.url.getUrlQueryParams();var x=
m(u.urlQueryParams,!0);x.isRenderPageEvent&&(h(u,x),w=!0);f(0,null,!0,u.retailerDataLayerVarName,function(a){w||(x=m(u.urlQueryParams,!1,a),x.isRenderPageEvent&&(h(u,x),w=!0));var b=null,c;try{if("Order Placed"===a.event&&"confirmation"===a.step){var d=q();var e,f={orderId:"",orderTotal:"",orderItems:[]};try{if(a){var g=a.transaction;var k=g.item;for(e=0;e<k.length;e++){var n=k[e];var p={productId:n.productInfo.sku,quantity:n.quantity,price:n.unitPrice};f.orderItems.push(p)}f.orderTotal=g.payment.paymentAmount;
f.orderId=g.transactionID}}catch(La){f=null}if(c=f)b={event:"trackTransaction",currencyCode:u.defaultCurrencyCode,apiKey:u.apiKey,orderId:c.orderId,orderTotal:c.orderTotal,orderItems:c.orderItems,userId:d},l[u.globalVarName]=l[u.globalVarName]||[],l[u.globalVarName].push(b)}}catch(La){}})}catch(Fa){}return a}(c,function(){return{getTagVersion:x,log:{logError:m,logMessage:ea},polyfill:{isUndefinedOrNull:w,isEmptyUndefinedOrNull:h,hasAttribute:Z,escapeHtml:Na,stripHtml:wb,elevaateTrim:S,elevaateParseJSON:oa,
elementHasClassName:qa,findDataAttrValueFromElement:aa,elevaateIsFunction:J,elevaateGetElementsByClassName:pa,addEventListener:R,removeEventListener:Y,insertAdjacentElement:Oa},url:{appendUrlQueryChar:Pa,appendUrlQueryParam:f,appendUrlQueryParamArray:E,getQueryParams:ba,getUrlHashParams:ra,getUrlQueryParams:ca,encodeRestUriParameter:q},cookie:{doCookies:M},validation:{validateArray:B,validateBool:F,isNotNullOrEmpty:Ua,validateInteger:z,validateString:G},event:{trackEvent:jb},page:{trackPage:kb},click:{getDefaultClickImgUrl:Hb,
getNewClickTrackUrl:ka,getNewTrackClipCouponUrl:fb,getClickTrackElementVariables:Ga,getClickTrackImage:gb,trackClickProductElement:ib,trackClickProduct:la},defer:{deferAttempt:ma,deferOnObject:Ha},dom:{onDomAvailable:Ya},templateRendering:{appendCssElementToHead:za,removeAllExistingDssContainers:cb,removeExistingDssContainer:Ea}}});a=!1;b=!0;Zb()||(a?Ka(0,!0,c):b&&bc(c))}catch(d){try{m("_executeTagQueue","elevaate-tag",d)}catch(e){}}};(function(a){var b=!1;try{"object"===typeof a.elevaateScript&&
"function"===typeof a.elevaateScript.executeTagQueue&&(b=!0)}catch(c){}return b})(l)||("function"===typeof Object.defineProperties?Object.defineProperty(A,"executeTagQueue",{enumerable:!1,configurable:!1,writable:!1,value:ub}):A.executeTagQueue=ub,A.executeTagQueue(),"function"===typeof Object.preventExtensions&&Object.getOwnPropertyNames(A).forEach(function(a){"function"!==typeof A[a]&&"object"!==typeof A[a]||Object.preventExtensions(A[a])}),"function"===typeof Object.defineProperties?Object.defineProperty(l,
"elevaateScript",{enumerable:!1,configurable:!1,writable:!1,value:A}):l.elevaateScript=A,"function"===typeof Object.preventExtensions&&Object.preventExtensions(A))})(window.elevaateScript="undefined"!==typeof Object.create?Object.create(null):{},document,window);
