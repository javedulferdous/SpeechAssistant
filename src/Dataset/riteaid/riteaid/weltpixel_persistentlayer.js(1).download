define(["jquery","underscore","Magento_Ui/js/lib/core/storage/local","uiRegistry"],function(e,t,i,o){"use strict";return{storageExpiryTime:30,locStorage:o.get("localStorage"),init:function(e){this.storageExpiryTime=e.storageExpiryTime||this.storageExpiryTime;var t={persist:{}},i=!1,o=this.getPromotionClick();o&&(t.persist.persist_promotion={},t.persist.persist_promotion.promotion=o,i=!0),i&&window.dataLayer.push(t)},setItem:function(e,t){var i={expiryTime:new Date,value:t};this.locStorage.set(e,i)},getItem:function(e){var t=this.locStorage.get(e);return void 0!==t&&(this.isExpired(t.expiryTime)?(this.removeItem(e),!1):t.value)},removeItem:function(e){this.locStorage.remove(e)},isExpired:function(e){var t=new Date,i=new Date(e),o=(t.getTime()-i.getTime())/1e3;return o/=60,(o=Math.abs(Math.round(o)))>this.storageExpiryTime},setPromotionClick:function(e){this.setItem("promo_click",e)},getPromotionClick:function(){return this.getItem("promo_click")}}});
//# sourceMappingURL=weltpixel_persistentlayer.js.map