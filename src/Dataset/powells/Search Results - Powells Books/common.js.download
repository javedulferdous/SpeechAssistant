$(function(){'use strict';$(window).load(function(){$('.matchPanes').matchHeight({byRow:true,property:'min-height',target:null,remove:false});});if(window.location.href.indexOf('keyword')>-1){$('.lookupSkin .screenWrap').addClass('resultsScreen');$('.lookupSkin').removeClass('fadeScreen');}else{$('.lookupSkin .screenWrap').addClass('initialScreen');$('.lookupSkin').removeClass('fadeScreen');}
$('.lookupSkin .logoMain').click(function(){window.location=window.location.href.split("?")[0];});$('.powellCategory li').matchHeight({byRow:true,property:'height'});if(!$('body').hasClass('dnnEditState')){$('.clickMe').each(function(){$(this).click(function(){var myLink=$(this).find('a').attr('href');if($('a',this).attr('target')==='_blank'){window.open(myLink,'_blank');}else{window.location=myLink;}
return false;});});}
var updateSubs=function($form,$email){var props=$form.find("input[type='checkbox']").map(function(){return $(this).prop("name");}).get();$.get("https://powellsfunctions.azurewebsites.net/api/HubspotSub",{email:$email.val(),props:props.join()},function(data){for(var key in data)
$form.find("input[name='"+key+"']").prop("checked",data[key]).change();});};if($(".hs-subscriptionsForm .hs-formElt").length>0){hbspt.forms.create({portalId:"4088708",formId:"c57c5c47-dd83-4b53-9ae4-23f143e392be",target:".hs-subscriptionsForm .hs-formElt",css:"",onFormReady:function($form){var $submit=$form.find("input[type='submit']");var $email=$form.find(".hs-input[type='email']");$submit.prop("formAction",$form.prop("action"));if(userEmail!==""){$email.val(userEmail).prop("readonly",true).css({border:"0"}).change();updateSubs($form,$email);}
$email.blur(function(){updateSubs($form,$email);});var $newsubmit=$("<input class='hs-button primary large' type='button'>").prop("value",$submit.prop("value"));var $unsub=$("<input value='Unsubscribe from all' class='hs-button primary large' style='margin-left: 1em' type='button'>");$unsub.click(function(){$form.find("input[type='checkbox']").prop("checked",false).change();$newsubmit.click();});$newsubmit.click(function(){var $formElt=$form.find("form");var formElt=$formElt[0];var portalId=$formElt.data("portal-id");var formId=$formElt.data("form-id");var url='https://forms.hubspot.com/uploads/form/v2/'+portalId+'/'+formId;var data={};var formData=$formElt.serializeArray();for(var n in formData){data[formData[n].name]=formData[n].value;};for(var n=0;n<formElt.length;n++)
if(formElt[n]["type"]==="checkbox")
data[formElt[n].name]=$(formElt[n]).is(":checked")?"true":"false";var context=JSON.parse(data.hs_context);data.hs_context=JSON.stringify({pageUrl:context.pageUrl,pageName:context.pageTitle});if(data.email.indexOf("@")===-1)
return;$.ajax({type:"POST",url:url,data:data,complete:function(){$form.html("<p>Your subscription has been updated.</p>");}});});$unsub.insertAfter($submit);$newsubmit.insertAfter($submit);$submit.remove();}});}
if($(".hs-newsletterForm .hs-formElt").length>0){hbspt.forms.create({portalId:"4088708",formId:"0d6cbb30-833d-4d53-baee-69d8ae4ddd66",target:".hs-newsletterForm .hs-formElt",css:"",onFormReady:function($form){$form.find("input[type='submit']").prop("formAction",$form.prop("action"));}});}
if($(".hs-eventsForm .hs-formElt").length>0){hbspt.forms.create({portalId:"4088708",formId:"004d96e3-6458-45a2-9ea2-cbe3a98ceddf",target:".hs-eventsForm .hs-formElt",css:"",onFormReady:function($form){$form.find("input[type='submit']").prop("formAction",$form.prop("action"));}});}});