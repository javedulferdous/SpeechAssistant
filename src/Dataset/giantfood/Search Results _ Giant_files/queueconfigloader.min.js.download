var QueueIt,QueueIt,QueueIt,QueueIt,QueueIt;!function(e){(e.Javascript||(e.Javascript={})).Version="2.0.11"}(QueueIt=QueueIt||{}),function(e){!function(e){var t=(d.retrieveEnvInfoFromScriptTag=function(){if(d.environemntVariable)return d.environemntVariable;try{for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("data-queueit-c");if(r){var o=n.getAttribute("data-queueit-host")||"",i="true"==(n.getAttribute("data-queueit-intercept")||"").toLowerCase(),a=n.getAttribute("data-queueit-intercept-domain")||"",u=n.getAttribute("data-queueit-jshost")||"",l="true"==(n.getAttribute("data-queueit-nocachereq")||"").toLowerCase(),s="true"==(n.getAttribute("data-queueit-noautorun")||"").toLowerCase(),g=n.getAttribute("data-queueit-ku-redirect-headername")||"",c="true"===(n.getAttribute("data-queueit-spa")||"").toLowerCase();return d.environemntVariable={cid:r,intercept:i,host:o,jsHost:u,noCacheRequest:l,noAutorun:s,domainToIntercept:a,queueitKURedirectHeaderName:g,isSPA:c}}}}catch(e){console.warn(e)}return null},d.cleanUp=function(){d.environemntVariable=void 0},d);function d(){}e.EnvironmentHelper=t;function n(){}e.EnvironmentInfo=n}(e.Tools||(e.Tools={}))}(QueueIt=QueueIt||{}),function(e){var t,n,r;function d(){}t=e.Javascript||(e.Javascript={}),n=t.KnownUser||(t.KnownUser={}),d.interceptOpen=function(u,e,l,s){void 0===l&&(l=null),void 0===s&&(s=null);var g="x-queueit-redirect";if(e&&e.queueitKURedirectHeaderName&&(g=e.queueitKURedirectHeaderName),s=s||function(e){window.location.href=e,document.close()},l=l||function(){return window.location.href},("function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest)&&XMLHttpRequest.prototype){var c=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t,n,r,o){var i=this,a=!1;try{(a=d.isUrlDomainMatchingOrIsRelativeURL(t,u))&&i.addEventListener("readystatechange",function(){return function(e){if(e.readyState===XMLHttpRequest.DONE)try{var t=d.tryGetQueueItRedirectHeader(e,g);t&&s(decodeURIComponent(t))}catch(e){console.log("getResponseHeader('"+g+"') error"+e)}}(i)})}catch(e){}finally{c.apply(i,arguments),a&&i.setRequestHeader("x-queueit-ajaxpageurl",encodeURIComponent(l()))}}}},d.tryGetQueueItRedirectHeader=function(e,t){var n="";return("function"!=typeof e.getAllResponseHeaders||0<=(e.getAllResponseHeaders()||"").indexOf(t))&&(n=e.getResponseHeader(t)),n},d.isUrlDomainMatchingOrIsRelativeURL=function(e,t){if(!new RegExp("^(?:[a-z]+:)?//","i").test(e))return!0;if(t){var n=document.createElement("a");if(n.href=e,-1<n.hostname.indexOf(t))return!0}return!1},r=d,n.AjaxInterceptor=r}(QueueIt=QueueIt||{}),function(i){var e;(function(e){var t=(o.tryInitQueueClientFromToken=function(e,t){if(void 0===t&&(t=null),t=t||window.location.href,e&&e.cid){var n=o.getQueueITToken(t);if(n&&n.eventId&&i.Javascript.QueueClient&&!window.myQueueClient){var r={removeTokenFromUrl:!0};e.host&&(r.host=e.host),window.myQueueClient=window.queueClient(e.cid,n.eventId,r)}}},o.getQueueITToken=function(e){var t=/queueittoken=([^&]*)/i.exec(e);if(!t||!t[1])return null;var n=new a;n.rawQueueItToken=t[1];for(var r=0,o=n.rawQueueItToken.split("~");r<o.length;r++){var i=o[r].split("_");switch(i[0].toLowerCase()){case"e":n.eventId=i[1]}}return n},o);function o(){}e.UrlQueueClientInitializer=t;var a=function(){};e.QueueItToken=a})((e=i.Javascript||(i.Javascript={})).KnownUser||(e.KnownUser={}))}(QueueIt=QueueIt||{}),function(e){var t,n;t=e.Javascript||(e.Javascript={}),function(e){function t(){}e.QueueClientEventConfig=t;var n=(r.AllowTParameter="AllowTParameter",r.EventTargetUrl="EventTargetUrl",r.ForcedTargetUrl="ForcedTargetUrl",r.ForecedTargetUrl="ForecedTargetUrl",r);function r(){}e.RedirectionLogic=n;var o=(i.UrlValidator="UrlValidator",i.CookieValidator="CookieValidator",i.JSVariableValidator="JSVariableValidator",i.UserAgentValidator="UserAgentValidator",i);function i(){}e.ValidatorType=o;var a=(u.Equals="Equals",u.Contains="Contains",u.ContainsAny="ContainsAny",u.EqualsAny="EqualsAny",u.NotEquals="NotEquals",u.NotContains="NotContains",u.IgEquals="IgEquals",u.IgContains="IgContains",u);function u(){}e.ComparisonOperatorType=a;var l=(s.PagePath="PagePath",s.HostName="HostName",s.PageUrl="PageUrl",s);function s(){}e.UrlPartSelectorType=l;var g=(c.CancelAction="Cancel",c.QueueAction="Queue",c.IgnoreAction="Ignore",c);function c(){}e.ActionType=g}((n=t.IntegrationConfig||(t.IntegrationConfig={})).Model||(n.Model={}))}(QueueIt=QueueIt||{});var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),QueueIt,QueueIt;if(!function(QueueIt){var Javascript;!function(Javascript){var IntegrationConfig;!function(IntegrationConfig){function isNumber(e){var t;return("number"!=typeof(t=parseFloat(e))||!isNaN(t))&&isFinite(e)}var IntegrationPointBase=(nb.CreateIntegrationPoint=function(e,t){return void 0===t&&(t=Trigger.CreateTrigger),new(nb.getActionType(e)===IntegrationConfig.Model.ActionType.QueueAction?IntegrationPointQueue:nb.getActionType(e)===IntegrationConfig.Model.ActionType.CancelAction?IntegrationPointCancel:IntegrationPointIgnore)(e,t)},nb.prototype.initTriggers=function(){this._triggers=new Array;for(var e=0,t=this.model.triggers;e<t.length;e++){var n=t[e];this._triggers.push(this._triggerFactory(n))}},nb.prototype.evaluate=function(){for(var e=0,t=this._triggers;e<t.length;e++)if(t[e].evaluate())return!0;return!1},nb.prototype.getActionType=function(){return nb.getActionType(this.model)},nb.getActionType=function(e){return e.actionType?e.actionType:IntegrationConfig.Model.ActionType.QueueAction},nb);function nb(e,t){this.model=e,this._triggerFactory=t,this.initTriggers()}IntegrationConfig.IntegrationPointBase=IntegrationPointBase;var IntegrationPointQueue=function(_super){function IntegrationPointQueue(e,t){return _super.call(this,e,t)||this}return __extends(IntegrationPointQueue,_super),IntegrationPointQueue.prototype.getQueueClientConfig=function(customerId){var result=new IntegrationConfig.Model.QueueClientEventConfig;result.eventId=this.model.eventId,result.cookieDomain=this.model.cookieDomain,result.culture=this.model.culture,result.extendValidity=this.model.extendValidity,result.layoutName=this.model.layoutName,result.validity=this.model.validity,this.model.queueDomain&&(result.host=this.model.queueDomain),this.model.removeTokenFromUrl&&(result.removeTokenFromUrl=!0,result.queryStringPrefix=this.model.queryStringPrefix);var that=this;return this.model.onVerified&&(result.onVerified=function(){!function(customerId,eventId){eval(that.model.onVerified)}(customerId,that.model.eventId)}),this.model.onDisabled&&(result.onDisabled=function(){!function(customerId,eventId){eval(that.model.onDisabled)}(customerId,that.model.eventId)}),this.model.onTimeout&&(result.onTimeout=function(){!function(customerId,eventId){eval(that.model.onTimeout)}(customerId,that.model.eventId)}),this.model.redirectLogic==IntegrationConfig.Model.RedirectionLogic.EventTargetUrl||1==this.model.redirectLogic?(result.useEventTargetUrl=!0,result.targetUrl=null):this.model.redirectLogic==IntegrationConfig.Model.RedirectionLogic.ForcedTargetUrl||this.model.redirectLogic==IntegrationConfig.Model.RedirectionLogic.ForecedTargetUrl||2==this.model.redirectLogic?(result.useEventTargetUrl=!1,result.targetUrl=this.model.forcedTargetUrl):this.model.redirectLogic!=IntegrationConfig.Model.RedirectionLogic.AllowTParameter&&0!=this.model.redirectLogic||(result.useEventTargetUrl=!1,result.targetUrl=null),result},IntegrationPointQueue}(IntegrationPointBase);IntegrationConfig.IntegrationPointQueue=IntegrationPointQueue;var IntegrationPointCancel=(Bb=IntegrationPointBase,__extends(Cb,Bb),Cb.prototype.getEventId=function(){return this.model.eventId},Cb.prototype.getCookieDomain=function(){return this.model.cookieDomain},Cb.prototype.getQueueDomain=function(){return this.model.queueDomain},Cb),Bb;function Cb(e,t){return Bb.call(this,e,t)||this}IntegrationConfig.IntegrationPointCancel=IntegrationPointCancel;var IntegrationPointIgnore=(Fb=IntegrationPointBase,__extends(Gb,Fb),Gb),Fb;function Gb(e,t){return Fb.call(this,e,t)||this}IntegrationConfig.IntegrationPointIgnore=IntegrationPointIgnore;var Trigger=(Jb.CreateTrigger=function(e,t){return void 0===t&&(t=ValidatorBase.CreateValidator),new Jb(e,t)},Jb.prototype.initOperators=function(){this._expersions=new Array;for(var e=0,t=this._triggerModel.triggerParts;e<t.length;e++){var n=t[e];this._expersions.push(this._triggerPartFactory(n))}},Jb.prototype.evaluate=function(){if("and"==this.logicalOperator.toLowerCase()){for(var e=0,t=this._expersions;e<t.length;e++)if(!t[e].evaluate())return!1;return!0}if("or"!=this.logicalOperator.toLowerCase())throw"Not supported logical operator";for(var n=0,r=this._expersions;n<r.length;n++)if(r[n].evaluate())return!0;return!1},Jb);function Jb(e,t){this._triggerModel=e,this._triggerPartFactory=t,this.logicalOperator=e.logicalOperator||"And",this.initOperators()}IntegrationConfig.Trigger=Trigger;var ValidatorBase=(Wb.CreateValidator=function(e){switch(e.validatorType=e.validatorType||"UrlValidator",e.validatorType){case IntegrationConfig.Model.ValidatorType.UrlValidator:return new UrlValidator(e);case IntegrationConfig.Model.ValidatorType.CookieValidator:return new CookieValidator(e);case IntegrationConfig.Model.ValidatorType.JSVariableValidator:return new JSVariableValidator(e);case IntegrationConfig.Model.ValidatorType.UserAgentValidator:return new UserAgentValidator(e);default:return new FalsyValidator(e)}},Wb.getDocumentCookie=function(){return document.cookie},Wb.getWindowLocation=function(){return window.location},Wb.getJSVariableValue=function(e){return window[e]},Wb.getUserAgent=function(){return window.navigator.userAgent},Wb);function Wb(e){this.triggerPartModel=e}IntegrationConfig.ValidatorBase=ValidatorBase;var UrlValidator=($b=ValidatorBase,__extends(_b,$b),_b.prototype.evaluate=function(){return ComparisonOperator.evaluate(this.triggerPartModel.operator,this.getUrlPart(),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},_b.prototype.getUrlPart=function(){var e=ValidatorBase.getWindowLocation();switch(this.triggerPartModel.urlPart){case IntegrationConfig.Model.UrlPartSelectorType.HostName:return e.hostname;case IntegrationConfig.Model.UrlPartSelectorType.PagePath:return e.pathname;case IntegrationConfig.Model.UrlPartSelectorType.PageUrl:return e.href;default:throw"Not supported url part selector"+this.triggerPartModel.urlPart}},_b),$b;function _b(e){return $b.call(this,e)||this}IntegrationConfig.UrlValidator=UrlValidator;var CookieValidator=(cc=ValidatorBase,__extends(dc,cc),dc.prototype.evaluate=function(){var e=this.getCookie(this.triggerPartModel.cookieName);return ComparisonOperator.evaluate(this.triggerPartModel.operator,e,this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},dc.prototype.getCookie=function(e){for(var t=e+"=",n=ValidatorBase.getDocumentCookie().split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},dc),cc;function dc(e){return cc.call(this,e)||this}IntegrationConfig.CookieValidator=CookieValidator;var JSVariableValidator=(mc=ValidatorBase,__extends(nc,mc),nc.prototype.evaluate=function(){return ComparisonOperator.evaluate(this.triggerPartModel.operator,ValidatorBase.getJSVariableValue(this.triggerPartModel.variableName),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},nc),mc;function nc(e){return mc.call(this,e)||this}IntegrationConfig.JSVariableValidator=JSVariableValidator;var UserAgentValidator=(pc=ValidatorBase,__extends(qc,pc),qc.prototype.evaluate=function(){return ComparisonOperator.evaluate(this.triggerPartModel.operator,ValidatorBase.getUserAgent(),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},qc),pc;function qc(e){return pc.call(this,e)||this}IntegrationConfig.UserAgentValidator=UserAgentValidator;var FalsyValidator=(sc=ValidatorBase,__extends(tc,sc),tc.prototype.evaluate=function(){return!1},tc),sc;function tc(e){return sc.call(this,e)||this}IntegrationConfig.FalsyValidator=FalsyValidator;var ComparisonOperator=(vc.containsAny=function(e,t,n,r){for(var o=0,i=r||[];o<i.length;o++)if(vc.contains(!1,t,n,i[o]))return!e;return e},vc.equalsAny=function(e,t,n,r){for(var o=0,i=r||[];o<i.length;o++)if(vc.equals(!1,t,n,i[o]))return!e;return e},vc.contains=function(e,t,n,r){if("*"==r&&n&&0<n.length)return!0;var o=!1;return o=t?-1<n.toUpperCase().indexOf(r.toUpperCase()):-1<n.indexOf(r),e?!o:o},vc.equals=function(e,t,n,r){var o=!1;return o=t?n.toUpperCase()===r.toUpperCase():n===r,e?!o:o},vc.evaluate=function(e,t,n,r,o,i){var a=String(t);if(null==r)return this.evaluate_1_0_0_1(e,a,String(n));switch(e){case IntegrationConfig.Model.ComparisonOperatorType.Equals:return vc.equals(r,o,a,String(n));case IntegrationConfig.Model.ComparisonOperatorType.Contains:return vc.contains(r,o,a,String(n));case IntegrationConfig.Model.ComparisonOperatorType.ContainsAny:return vc.containsAny(r,o,a,i);case IntegrationConfig.Model.ComparisonOperatorType.EqualsAny:return vc.equalsAny(r,o,a,i);default:throw"Not supported  operator : "+e}},vc.evaluate_1_0_0_1=function(e,t,n){switch(e){case IntegrationConfig.Model.ComparisonOperatorType.Equals:return vc.equals(!1,!1,t,n);case IntegrationConfig.Model.ComparisonOperatorType.NotEquals:return vc.equals(!0,!1,t,n);case IntegrationConfig.Model.ComparisonOperatorType.Contains:return vc.contains(!1,!1,t,n);case IntegrationConfig.Model.ComparisonOperatorType.NotContains:return vc.contains(!0,!1,t,n);case IntegrationConfig.Model.ComparisonOperatorType.IgEquals:return vc.equals(!1,!0,t,n);case IntegrationConfig.Model.ComparisonOperatorType.IgContains:return vc.contains(!1,!0,t,n);default:throw"Not supported  operator : "+e}},vc);function vc(){}function applyIntegrationConfig(e,t,n){if(void 0===t&&(t=IntegrationPointBase.CreateIntegrationPoint),void 0===n&&(n=null),e){for(var r=0,o=e.integrations;r<o.length;r++){var i=t(o[r]);if(i.evaluate()){if(i.getActionType()===IntegrationConfig.Model.ActionType.QueueAction){var a=i.getQueueClientConfig(e.customerId);window.myQueueClient=window.queueClient(e.customerId,a.eventId,a)}else if(i.getActionType()===IntegrationConfig.Model.ActionType.CancelAction){var u=i;n=n||function(){return window.location.protocol};var l=u.getQueueDomain();l=l||e.customerId+".queue-it.net",new QueueIt.Javascript.CookieManager(e.customerId,u.getEventId(),n()+"//"+l,u.getCookieDomain()).cancelQueueId()}else if(i.getActionType()===IntegrationConfig.Model.ActionType.IgnoreAction){var s=QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();s.intercept&&QueueIt.Javascript.KnownUser.UrlQueueClientInitializer.tryInitQueueClientFromToken(s)}return}}var g=QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();g.intercept&&QueueIt.Javascript.KnownUser.UrlQueueClientInitializer.tryInitQueueClientFromToken(g)}}function loadIntegrationConfig(e){void 0===e&&(e=new Date);var t=QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();t.noAutorun||loadIntegrationConfigFromServer(e,t)}function loadIntegrationConfigFromServer(e,t){if(void 0===e&&(e=new Date),void 0===t&&(t=null),!(t=t||QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag()))throw"No queueit attribute is found in script tag";var n="";if(t.noCacheRequest)n=e.getTime().toString();else{var r=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),a=e.getHours(),u=Math.floor(e.getMinutes()/5);n=r+""+(o<10?"0"+o:o)+(i<10?"0"+i:i)+(a<10?"0":a)+a+(u<10?"0"+u:u)}var l=document.createElement("script");l.type="text/javascript",l.src=getIntegrationConfigUrl(t)+"?versionTimestamp="+n,document.getElementsByTagName("head")[0].appendChild(l)}function getIntegrationConfigUrl(e){if(!e||!e.cid)throw"customer id is not found";var t="https://assets.queue-it.net/";return e.jsHost&&(t=e.jsHost),t+e.cid+"/integrationconfig/javascript/queueclientConfig.js"}function initQueueClient(e){applyIntegrationConfig(e)}function validateUser(e){void 0===e&&(e=!1),e?loadIntegrationConfigFromServer():window.queueit_clientside_config&&applyIntegrationConfig(window.queueit_clientside_config)}function isIntegrationConfigReady(){return!!window.queueit_clientside_config}function getIntegrationConfig(){return window.queueit_clientside_config}IntegrationConfig.ComparisonOperator=ComparisonOperator,IntegrationConfig.applyIntegrationConfig=applyIntegrationConfig,IntegrationConfig.loadIntegrationConfig=loadIntegrationConfig,IntegrationConfig.loadIntegrationConfigFromServer=loadIntegrationConfigFromServer,QueueIt.Javascript.PageEventIntegration={initQueueClient:applyIntegrationConfig},IntegrationConfig.initQueueClient=initQueueClient,QueueIt.validateUser=validateUser,QueueIt.getIntegrationConfig=getIntegrationConfig,QueueIt.isIntegrationConfigReady=isIntegrationConfigReady}(IntegrationConfig=Javascript.IntegrationConfig||(Javascript.IntegrationConfig={}))}(Javascript=QueueIt.Javascript||(QueueIt.Javascript={}))}(QueueIt=QueueIt||{}),function(i){var e,t;function n(){}e=i.Tools||(i.Tools={}),n.setup=function(r){if(r){var e="function"==typeof r.pushState,o=r.pushState;e&&(r.pushState=function(e,t,n){o.apply(r,arguments),i.validateUser()})}else console.warn("browser doesn't support history")},t=n,e.SpaHelper=t}(QueueIt=QueueIt||{}),QueueIt.Javascript.IntegrationConfig.isInitialized)console.log("IntegrationConfigLoader is already initialized!");else{var en=QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();en&&en.cid&&(en.intercept&&QueueIt.Javascript.KnownUser.AjaxInterceptor.interceptOpen(en.domainToIntercept,en),en.isSPA&&QueueIt.Tools.SpaHelper.setup(history)),QueueIt.Javascript.IntegrationConfig.loadIntegrationConfig(),QueueIt.Javascript.IntegrationConfig.isInitialized=!0}