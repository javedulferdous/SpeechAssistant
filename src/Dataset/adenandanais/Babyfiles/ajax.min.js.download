define(['jquery','./../executor'],function($,Executor){'use strict';return $.extend({},Executor,{result:null,config:{processOutputFlag:'aw_layered_nav_process_output',loaderContext:'body'},init:function(config){$.extend(this.config,config);},submit:function(url){var self=this,request=$.Deferred();$.ajax({url:this._addProcessOutputFlagToUrl(url),type:'get',dataType:'html',cache:false,beforeSend:function(){$(self.config.loaderContext).trigger('processStart');},success:function(response){try{self.result=JSON.parse(response);}catch(e){window.location.replace(url);}
request.resolve();},complete:function(){$(self.config.loaderContext).trigger('processStop');}});return request.promise();},getResult:function(){return this.result;},_addProcessOutputFlagToUrl:function(url){var urlParts=url.split('?'),processOutputParam=this.config.processOutputFlag+'='+'1',baseUrl=urlParts[0],urlParams=urlParts[1]?(urlParts[1]+'&'+processOutputParam):processOutputParam;return baseUrl+'?'+urlParams;}});});