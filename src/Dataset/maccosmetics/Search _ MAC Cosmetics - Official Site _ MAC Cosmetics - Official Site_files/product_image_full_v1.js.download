!function(e,t,i){"use strict";var o,n,s,a,r,l,c,u,d,f,p,h,m=(o=0,n=e(),s=e(),a=e(),r=e(),l=function(t){var i=t.carousel,o=t.initialSlide||0,l=t.container.closest(".js-product-full"),u=l.length>0&&l.hasClass("js-product-full--enhanced");r=t.container,n=e(".product-full__carousel-thumbs-container",r),s=e(".js-product-full__carousel-thumbs-arrow--up",r),a=e(".js-product-full__carousel-thumbs-arrow--down",r),c(i,r),i.imagesLoaded().then((function(){f(i,u),d(i,r,o,u),p(o,i,r)})),Unison.on("change",(function(){f(i,u),d(i,r,o,u),p(o,i,r)}))},c=function(t,i){var o=e(".js-product-thumb",i);o.length>5&&(s.css("display","inline-block"),s.on("click",(function(){u("up")}))),o.length>5&&(a.css("display","inline-block").removeClass("invisible"),a.on("click",(function(){u("down")}))),o.once().on("click",(function(o){o.preventDefault();var n=e(this),s=n.index();e(".js-carousel-dots li",i),n.hasClass("active")||(t.slickGoTo(s),p(s,t,i))}))},u=function(t){var i;0===(i=function(t){var i={},n=e(".js-product-thumb",r),s=n.eq(1).outerHeight(!0);return i.maxHeight=s*(n.length-5),"up"===t?o=parseInt(o,10)-s:"down"===t&&(o=parseInt(o,10)+s),i.topPos=o,i}(t)).topPos?(s.addClass("invisible"),a.removeClass("invisible")):i.topPos===i.maxHeight?(s.removeClass("invisible"),a.addClass("invisible")):(s.removeClass("invisible"),a.removeClass("invisible")),n.animate({scrollTop:i.topPos+"px"},"500","swing")},d=function(t,o,n,s){var a=e(".carousel-dots",o),r=(parseInt(Unison.fetch.now().width,10),parseInt(Unison.fetch.all()["usn-medium"],10),{rtl:i.direction.isRTL,appendDots:a,horizontal:!0,dots:!0,arrows:!1,slidesToShow:1,slidesToScroll:1,infinite:!1,onAfterChange:function(i){var o=t.slickCurrentSlide();t.attr("data-current-slide",o),Drupal.settings.analytics.alt_image_tagging_enabled&&e(document).trigger("SLICKCHANGE",i.$slides.get(i.currentSlide))},responsive:[{breakpoint:1025,settings:{arrows:!0}}]});s&&(r.dots=!1,r.infinite=!0),t.unslick(),t.not(".slick-initialized").slick(r),t.slickSetOption("speed",0).slickGoTo(n).slickSetOption("speed",300)},f=function(t,i){var o=e(".js-spp-carousel__slide",t),n=parseInt(Unison.fetch.now().width,10)<=parseInt(Unison.fetch.all()["usn-large"],10),s=matchMedia("(pointer:fine)").matches||e("html").hasClass("no-touch")||!1,a=!n&&!s;!i&&n?(o.trigger("zoom.destroy"),e(".js-zoom>i").once().on("click",(function(){var i=e(".slick-active",t).html(),o=e(this);if(o.hasClass("zoomed"))e("body > .zoomed-image").remove();else{var n=e();e("body").append('<div class="img-Zoom-Modal"></div>'),(n=e(".img-Zoom-Modal")).append(i),n.append('<a href="#" class="js-close-zoom icon--remove"></a>'),e(".js-close-zoom").once().on("click",(function(){n.remove()}))}o.toggleClass("zoomed")}))):i&&a||n?o.trigger("zoom.destroy"):(e(".site-container").css("overflow-x","visible"),o.zoom({magnify:1.5})),o.each((function(t){var i="prodimg"+t;e(this).attr("id",i)}))},p=function(t,i,o){var s=e(".js-product-thumb",o),a=s.eq(t).length?s.eq(t):s.last(),r=h(n[0],a[0]);s.filter(".active").removeClass("active"),a.addClass("active"),r||(t>i.attr("data-current-slide")?u("down"):t<i.attr("data-current-slide")&&u("up")),i.attr("data-current-slide",t)},h=function(e,t){if(e&&t)return!(t.offsetTop-e.offsetTop>=e.offsetHeight||t.offsetTop+t.offsetHeight<=e.offsetTop+e.scrollTop)},{init:l,changeSku:function(o,n){var s=n.container,a=n.carousel,r=n.initialSlide||a.attr("data-current-slide"),c=t.data.getSku(o);if(s.length&&o!==parseInt(s.attr("data-sku-base-id"))){var u=".js-product-thumbs",d=e(u,s),f=i.template.get({name:"product_image_full",data:{defaultSku:c}}),p=e(f).find(".js-spp-carousel").html(),h=e(f).find(u).html();a.fadeTo(100,0,"linear",(function(){s.attr("data-sku-base-id",c.SKU_BASE_ID),a.html(p),d.html(h),a.imagesLoaded().then((function(){l({carousel:a,container:s,initialSlide:r}),a.fadeTo(100,1,"linear")}))}))}}});e.fn.imagesLoaded=function(){var t=this.find('.js-product-image[src!=""]');if(!t.length)return e.Deferred().resolve().promise();var i=[];return t.each((function(){var t=e.Deferred();i.push(t);var o=new Image;o.onload=function(){t.resolve()},o.onerror=function(){t.resolve()},o.src=this.src})),e.when.apply(e,i)},Drupal.behaviors.productImageFullV1={attach:function(t){if(!this.attached){this.attached=!0;var i=e(".js-product-full__image",t);i.length&&i.each((function(){var t=e(this),i=e(".js-spp-carousel",t);m.init({carousel:i,container:t})}))}},attached:!1},e(document).on("product.skuSelect",".js-product-ui",(function(t,i){var o=e(this),n=e(".js-product-full__image",o);n.length&&n.each((function(){var t=e(this),o=e(".js-spp-carousel",t);m.changeSku(i,{carousel:o,container:t})}))}))}(jQuery,window.prodcat||{},window.site||{});
//# sourceMappingURL=product_image_full_v1.js.map
