var site=site||{};!function(e){window.site=site||{},site.drawers=site.drawers||{},site.drawers.$formatters=e(),site.drawers.$closeButtons=e(),site.drawers.animationSpeed=300,site.drawers.mouseOutDelay=800,site.drawers.drawerOpen=!1,site.drawers.waited=!1,site.drawers.waiting=!1,site.drawers.isOver=!1,site.drawers.keepOpen=!1,site.drawers.disableStickyFooterMobile=site.drawers.disableStickyFooterMobile||!1;var t=!1;site.drawers.init=function(s){if(!t){t=!0;var r=e(".site-footer",s),i=site.client.isMobile&&site.drawers.disableStickyFooterMobile,a=e(".site-footer--sticky",s),o=0,n=a.height();if(r.length){var l=_.debounce(d,300);e(window).scroll(l),setTimeout(d,60),site.drawers.$formatters=e(".drawer-formatter.js-mac-select-link",s),site.drawers.$container=e(".drawer-container",s),site.drawers.$closeButtons=e(".drawer-formatter__close",site.drawers.$container),site.drawers.$formatters.each((function(){var t=e(this),r=e(".drawer-formatter__content",site.drawers.$container).filter((function(){return!("hidden"==e(this).css("visibility")||"none"==e(this).css("display")||0==e(this).css("opacity"))})),i=e(".js-sticky-footer-pc-links",t),a=r.is(":hidden"),o=r.show().height(),n=e(".js-mac-select-loyalty-footer-formatter",s);function l(t){var s=e(".js-mac-select-loyalty");t.preventDefault();var i=site.drawers.drawerOpen?0:site.drawers.animationSpeed;site.drawers.open(e(this),r,i),s.attr("tabindex","0").focus(),site.restrict_navigation(s)}r.data("paneHeight",o),n.length>0&&1===n.data("show-on-click")?i.once().on("click",l):i.once().on("mouseover",l),i.on("focusout",(function(){e(".js-sticky-footer-pc-links.custom-outline").removeClass("custom-outline")})),a?r.hide():site.drawers.drawerOpen=!0})),e("body",s).on("mousemove",(function t(s,r){site.drawers.isOver=!0===r,site.drawers.drawerOpen&&!site.drawers.keepOpen&&(s&&(site.drawers.isOver=!!e(s.target).closest(".drawer-container").length),site.drawers.waiting||site.drawers.waited?site.drawers.waited&&(site.drawers.isOver||c(),site.drawers.waited=!1):(site.drawers.waiting=!0,setTimeout((function(){site.drawers.waited=!0,site.drawers.waiting=!1,t(!1,site.drawers.isOver)}),site.drawers.mouseOutDelay)))})),site.drawers.$closeButtons.on("click",c),e(".js-mac-select-loyalty-slider-icon").on("keydown",(function(t){13===site.getKeycode(t)&&(t.preventDefault(),e(".js-sticky-footer-pc-links.active").focus().addClass("custom-outline"),c())}))}}function d(){var t="is-sticky";i?a.removeClass(t):(o=r.offset().top-e(window).height()+n,a.toggleClass(t,e(window).scrollTop()<o))}function c(t){void 0!==t&&t.preventDefault(),site.drawers.close(),e(".js-mac-select-loyalty").attr("tabindex","-1")}},site.drawers.open=function(t,s,r,i){site.drawers.drawerOpen&&s.siblings(".drawer-formatter__content").hide().css("top",0),site.drawers.drawerOpen=!0,s.stop().show().data("paneHeight",s.height()+t.height()+20),s.stop().show().animate({top:-s.data("paneHeight")},r),e(".js-sticky-footer-pc-links",site.drawers.$container).removeClass("active"),t.addClass("active"),this.keepOpen=!!i,site.drawers.lastPaneOpen=s,site.drawers.lastSpeed=r},site.drawers.close=function(t){void 0===t&&(t=e(".drawer-formatter__content:visible")),t.is(":visible")&&(site.drawers.drawerOpen=!1,site.drawers.keepOpen=!1,t.stop().animate({top:0},site.drawers.animationSpeed,(function(){t.hide()})),e(".js-sticky-footer-pc-links").removeClass("active"))},Drupal.behaviors.stickyFooterV1={attach:function(t){e(".js-mac-live-chat").bind("click",(function(s){s.preventDefault(),e("#product-page-livechat-hitarea div").click(),e("a.footer-liveperson-link",t).length>0&&e("a.footer-liveperson-link",t)[0].click()})),e(".mac-select-chat").bind("click",(function(t){t.preventDefault(),e("a.footer-liveperson-link").length>0&&e("a.footer-liveperson-link")[0].click()}));var s=parseInt(site.userInfoCookie.getValue("is_loyalty_member")),r=parseInt(site.userInfoCookie.getValue("loyalty_level")),i=parseInt(site.userInfoCookie.getValue("is_pro")),a=e(".js-loyalty-tier-"+r,t),o=e(".js-non-loyalty",t),n=e(".js-loyalty-tier-pro",t),l=e(".js-mac-select-link",t);e(".mac-select-loyalty-tier",t).addClass("hide"),n.addClass("hide"),s||i?(s&&a.length>0?a.removeClass("hide"):i&&n.length>0?n.removeClass("hide"):l.addClass("hidden"),e(".js-hide-for-loyalty-user",t).addClass("hidden")):o.length>0?(o.removeClass("hide"),e(".js-hide-for-normal-user",t).addClass("hidden")):l.addClass("hidden");var d=e(".mac-select-loyalty-footer-formatter .disable-pc:visible").length,c=e(".mac-select-loyalty-footer-formatter .disable-pc"),w=e(".mac-select-loyalty-footer-formatter .disable-mobile");if(c.addClass("col-md-"+d).first().addClass("no-bar"),w.first().addClass("no-bar"),w.last().addClass("no-bar"),site.drawers.init(t),e(".mac-select-loyalty-slider").data("footer_loyalty_popover")&&!e.cookie("MacSelectLoyalty")&&!site.client.isMobile){site.drawers.drawerOpen=!1,e.cookie("MacSelectLoyalty",1,{expires:3,path:"/"});var f=e(".js-mac-select-loyalty.drawer-formatter__content"),p=e(".mac-select-loyalty-slider").data("footer_loyalty_duration")?e(".mac-select-loyalty-slider").data("footer_loyalty_duration"):10;f.length&&setTimeout((function(){site.drawers.open(e(".js-sticky-footer-pc-links.drawer-formatter__trigger"),f,site.drawers.animationSpeed,!0),setTimeout((function(){site.drawers.close(f)}),1e3*p)}),60)}}}}(jQuery);
//# sourceMappingURL=mac_select_loyalty_footer_formatter_v1.js.map
