var site=site||{},generic=generic||{},Drupal=Drupal||{},Model=Model||{};site.prodStoreCheck=site.prodStoreCheck||{},function(t){site.inStoreLocator=function(){this.bodyClass="in-store-locator",this.eventNameSpace="inStoreLocator:"},site.inStoreLocator.prototype.states={doorsShown:"state-doors-shown",doorsShownInline:"state-doors-shown-inline"},site.inStoreLocator.prototype.setVars=function(){this.dom={},this.dom.$inlineContainer=null,this.resultData={},this.mergedDoorData={},this.activeSku=null,this.containerOpen=!0},site.inStoreLocator.prototype.getNodes=function(){this.dom.$overlayContainer=t(".js-instore-container"),this.dom.$doorsContainer=t(".js-product-doors"),this.dom.$locConfirmOverlay=t(".js-location-confirm"),this.dom.$locConfirmAcceptBtn=t(".js-location-allow"),this.dom.$locConfirmDeclineBtn=t(".js-location-decline"),this.dom.$locConfirmCloseBtn=t(".js-location-confirm-close"),this.dom.$closeLink=t(".close-link")},site.inStoreLocator.prototype.bindEvents=function(){t(document).on(this.eventNameSpace+"openLocationOverlay",t.proxy(this.openLocationOverlay,this)),t(document).on(this.eventNameSpace+"closeLocationOverlay",t.proxy(this.closeLocationOverlay,this)),t(document).on(this.eventNameSpace+"addDoorsState",t.proxy(this.addDoorsState,this)),t(document).on(this.eventNameSpace+"addDoorsStateInline",t.proxy(this.addDoorsStateInline,this)),t(document).on(this.eventNameSpace+"reset",t.proxy(this.onReset,this)),t(document).on(this.eventNameSpace+"inserted",t.proxy(this.initLayout,this)),t(document).on(this.eventNameSpace+"removeEvents",t.proxy(this.removeEvents,this)),t(document).on("product.skuSelect",t.proxy(this.onSkuChange,this)),t(document).on("MPP:quickshopsDestroyed",t.proxy(this.onReset,this))},site.inStoreLocator.prototype.setDisplay=function(o,e){var r=e||{};if(!r.$container||!r.$cartBtn)return null;r.prodData=r.data||Model.PageData.get(),this.checkProdFlags(r.prodData)&&this.checkProdCats(r.prodData)&&this.checkProdIds(r.prodData)&&(this.called||(t(document).trigger("instore:product:checkAreaDoors",{prodData:r.prodData,callback:function(o){o&&(t(document).trigger("instore:product:closeInline"),t(document).trigger("instore:product:inline",{prodData:r.prodData,container:r.$container,activeSku:r.prodData.SKU_ID}))}}),this.called=!0))},site.inStoreLocator.prototype.displayDoorsLink=function(t){},site.inStoreLocator.prototype.setInvButtonEvents=function(o){var e=this,r=o||{};if(!r.$invBtn)return null;r.$invBtn.click((function(o){o.preventDefault(),e.containerOpen?(t(document).trigger("instore:product:close"),t(document).trigger("instore:product:closeInline")):r.$container?(t(document).trigger("instore:product:closeInline"),t(document).trigger("instore:product:inline",{prodData:r.prodData,container:r.$container,activeSku:r.$cartBtn.attr("data-skubaseid")})):(t(document).trigger("instore:product:close"),t(document).trigger("instore:product:overlay",{prodData:r.prodData,activeSku:r.$cartBtn.attr("data-skubaseid")}))}))},site.inStoreLocator.prototype.checkProdFlags=function(t){if(!t||!site.prodStoreCheck.hideBtnMiscFlags)return!0;for(var o=!0,e=site.prodStoreCheck.hideBtnMiscFlags,r=0;r<e.length;r++)t.MISC_FLAG.toString()===e[r].toString()&&(o=!1);return o},site.inStoreLocator.prototype.checkProdCats=function(t){if(!t||!site.prodStoreCheck.hideBtnCats)return!0;for(var o=!0,e=site.prodStoreCheck.hideBtnCats.toString().split(","),r=0;r<e.length;r++)t.DEFAULT_CAT_ID.toString()===e[r].toString().trim()&&(o=!1);return o},site.inStoreLocator.prototype.checkProdIds=function(t){if(!t||!site.prodStoreCheck.hideBtnProds)return!0;for(var o=!0,e=site.prodStoreCheck.hideBtnProds.toString().split(","),r=0;r<e.length;r++)t.PRODUCT_ID.toString()===e[r].toString().trim()&&(o=!1);return o},site.inStoreLocator.prototype.init=function(){this.StoreMap=new site.map,this.Product=new site.product,this.Controls=new site.controls,this.Display=new site.display,this.Doors=new site.doors},site.inStoreLocator.prototype.launch=function(o,e){var r=e||{};this.init(),this.setVars(),this.launchOverlay(),this.loadMap(),this.getNodes(),this.bindEvents(),this.setCloseBtn(),this.setLocationOverlay(),this.addBodyClass(),t(document).trigger(this.eventNameSpace+"launched",r)},site.inStoreLocator.prototype.inline=function(t,o){var e=o||{};this.init(),this.setVars(e),this.bindEvents(e),this.insert(e)},site.inStoreLocator.prototype.close=function(o,e){t(document).trigger(this.eventNameSpace+"close")},site.inStoreLocator.prototype.closeInline=function(o,e){t(document).trigger(this.eventNameSpace+"close"),this.dom&&this.dom.$inlineContainer&&this.dom.$inlineContainer.html("")},site.inStoreLocator.prototype.insert=function(o){var e=o||{},r=this;site.templates&&site.templates.product_store_check_layout_v1&&site.template.get({name:"product_store_check_layout_v1",data:{},callback:function(o){r.dom.$inlineContainer=e.container.filter((function(){return t(this).is(":visible")})),r.dom.$inlineContainer.html(o),t(document).trigger(r.eventNameSpace+"inserted",e)}})},site.inStoreLocator.prototype.initLayout=function(o,e){var r=e||{};this.getNodes(),this.addBodyClass(),t(document).trigger(this.eventNameSpace+"opened",r)},site.inStoreLocator.prototype.launchOverlay=function(){var o=t("script.inline-template[path='product_store_check']").html();generic.overlay.launch({content:o,includeBackground:!1,lockPosition:!1,center:!0,cssClass:"",cssStyle:{width:"960px"}})},site.inStoreLocator.prototype.loadMap=function(){t(document).trigger("map:render",{zoom:4})},site.inStoreLocator.prototype.loadApi=function(t,o){if(!Model.MapApi)return null;Model.MapApi.init()},site.inStoreLocator.prototype.checkAreaDoors=function(t,o,e){if(!Model.DoorsInventory)return null;var r=e||{},n=!1,i=null;t&&t.data&&t.data.SKU_ID&&(i=t.data.SKU_ID),Model.DoorsInventory.loadDoorsOnly({skus:i,callback:function(t){r.callback&&(t.count>0&&(n=!0),e.callback(n))}})},site.inStoreLocator.prototype.onSkuChange=function(o,e){this.activeSku=e,t(document).trigger(this.eventNameSpace+"reset")},site.inStoreLocator.prototype.setLocationOverlay=function(){var t=this;if(!t.dom.$locConfirmOverlay)return null;t.dom.$locConfirmAcceptBtn.click((function(t){t.preventDefault();var o=this;o.dom.$overlayContainer.trigger(o.eventNameSpace+"getLocation",(function(){o.dom.$overlayContainer.trigger(o.eventNameSpace+"closeLocationOverlay")}))})),t.dom.$locConfirmDeclineBtn.click((function(t){t.preventDefault(),this.dom.$overlayContainer.trigger(this.eventNameSpace+"closeLocationOverlay")})),t.dom.$locConfirmCloseBtn.click((function(t){t.preventDefault(),this.dom.$overlayContainer.trigger(this.eventNameSpace+"closeLocationOverlay")}))},site.inStoreLocator.prototype.setCloseBtn=function(){var o=this;o.dom.$closeLink.click((function(e){e.preventDefault(),t(document).trigger(o.eventNameSpace+"close")}))},site.inStoreLocator.prototype.onReset=function(){this.containerOpen=!1,this.removeEvents(),this.removeBodyClass()},site.inStoreLocator.prototype.removeEvents=function(o,e){var r=e||{},n=r.nameSpace?r.nameSpace:this.eventNameSpace,i=t(document).data("events");for(var a in i){var s=a.match("^"+n);s&&t(document).unbind(s.input)}},site.inStoreLocator.prototype.openLocationOverlay=function(){var t=this.dom.$locConfirmOverlay;if(!t)return null;t.addClass("active")},site.inStoreLocator.prototype.closeLocationOverlay=function(){var t=this.dom.$locConfirmOverlay;if(!t)return null;t.removeClass("active")},site.inStoreLocator.prototype.addDoorsState=function(){this.dom.$overlayContainer.addClass(this.states.doorsShown)},site.inStoreLocator.prototype.addDoorsStateInline=function(){this.dom.$overlayContainer.addClass(this.states.doorsShownInline)},site.inStoreLocator.prototype.addBodyClass=function(){t("body").addClass(this.bodyClass)},site.inStoreLocator.prototype.removeBodyClass=function(){t("body").removeClass(this.bodyClass)},site.inStoreLocator.prototype.load=function(o,e){t(document).on("instore:product:setDisplay",t.proxy(Drupal.behaviors.inStoreLocator.setDisplay,this)),t(document).on("instore:product:loadApi",t.proxy(Drupal.behaviors.inStoreLocator.loadApi,Drupal.behaviors.inStoreLocator)),t(document).on("instore:product:overlay",t.proxy(Drupal.behaviors.inStoreLocator.launch,Drupal.behaviors.inStoreLocator)),t(document).on("instore:product:inline",t.proxy(Drupal.behaviors.inStoreLocator.inline,Drupal.behaviors.inStoreLocator)),t(document).on("instore:product:close",t.proxy(Drupal.behaviors.inStoreLocator.close,Drupal.behaviors.inStoreLocator)),t(document).on("instore:product:closeInline",t.proxy(Drupal.behaviors.inStoreLocator.closeInline,Drupal.behaviors.inStoreLocator)),t(document).on("instore:product:checkAreaDoors",t.proxy(Drupal.behaviors.inStoreLocator.checkAreaDoors,Drupal.behaviors.inStoreLocator,o)),e.trigger("instore:loaded",o)},Drupal.behaviors.inStoreLocator=new site.inStoreLocator}(jQuery);
//# sourceMappingURL=product_store_check_v1.js.map
