!function(e){"use strict";Drupal.behaviors.siteSearchV1={attach:function(s){window.google_optimize_scripts=window.google_optimize||{};var a=-1!==document.cookie.indexOf("trendalytics_search_enabled"),r=!1,i=e("body",s),c=e(".header-search",s),o=e(".js-header-search-results",s),t=c.find(".header-search__icon"),n=c.find(".header-search__close"),d=c.find(".js-header-search-form"),h=c.find(".js-search-field"),l=e('<div class="site-header__dim-overlay"></div>'),f=e(".site-header",s),_=f.siblings(".site-container"),v=e(".js-trendalytics-search",s),m=i.hasClass("device-mobile"),u=m?"click":"mouseenter",g=function(e){e?i.removeAttr("style"):i.css({height:"100vh",overflow:"hidden"})},C=function(){c.find(".header-search__icon").trigger("click"),t.removeClass("search-active"),c.find(".header-search__form").addClass("header-search__form-remove"),c.blur(),l.remove(),v.addClass("hidden"),g(!0)},k=function(){e(this).closest(".header-search").hasClass("js-disable-toggle")&&!site.client.isMobile||(c.unbind("clickoutside"),c.find(".header-search__form").hasClass("header-search__form-remove")&&(t.removeClass("search-active"),c.find(".header-search__form").addClass("header-search__form-remove"),h.val(""),h.blur(),l.remove(),v.addClass("hidden")))},b=function(){c.find(".header-search__form").addClass("header-search__form-remove"),h.val(""),t.removeClass("search-active"),h.blur(),l.remove(),v.addClass("hidden"),g(!0)},E=function(){e(this).val()||c.find(".header-search__suggestions > a").text("")},p=function(s){if(9===s.keyCode){var a=c.find(".header-search__suggestions > a").text();e(this).attr("value",a)}},y=function(){e(".search-results__results .product",s).toggleClass("product--list-view")},w=function(){t.on(u+".searchEvents",(function(a){if(a.preventDefault(),a.stopPropagation(),!e(this).closest(".header-search").hasClass("js-disable-toggle")||site.client.isMobile){e(".site-navigation__item",s).hasClass("is-active")&&e(".site-navigation__item.is-active > a").trigger("click"),g(!1);e.each([".site-email-signup",".site-bag",".site-my-mac"],(function(e){var s=e+"__contents-close";f.find(e).hasClass("active")&&f.find(s).trigger("click")})),c.find(".header-search__form").hasClass("header-search__form-remove")?(t.addClass("search-active"),c.find(".header-search__form").removeClass("header-search__form-remove"),r||v.removeClass("hidden"),c.find(".header-search__field").trigger("focus"),c.on("mouseleave.searchEvents",C),e("#search",s).trigger("focus"),c.on("clickoutside.searchEvents",(function(){c.find(".header-search__icon").trigger("click"),t.removeClass("search-active"),c.find(".header-search__form").addClass("header-search__form-remove"),l.remove()})),e.sidr("close","mobile-navigation"),l.prependTo(_)):m&&(c.off("clickoutside.searchEvents"),h.val(""),t.removeClass("search-active"),c.find(".header-search__form").addClass("header-search__form-remove"),h.blur(),l.remove(),v.addClass("hidden"))}})).on("mouseleave.searchEvents",k),t.closest(".js-disable-toggle").length>0&&!site.client.isMobile&&(t.off("click").on("click",(function(e){e.preventDefault(),d.submit()})),h.off("click.searchEvents clickoutside.searchEvents").on("click.searchEvents",(function(){d.toggleClass("header-search__form-remove",!1),o.toggleClass("hidden",!1),e(document).trigger("check_reset_gnav_radio_buttom")})).on("clickoutside.searchEvents",(function(){d.toggleClass("header-search__form-remove",!0),o.toggleClass("hidden",!0)}))),n.off("click").on("click.searchEvents",b),h.on("keydown.searchEvents",p),h.on("keyup.searchEvents",E),c.find(".header-search__view-toggle").on("click.searchEvents",y)},j=function(){h=(c=v).find(".header-search__field"),t=e(".header-search__icon",s),n=c.find(".header-search__close"),w()};window.google_optimize_scripts.siteSearchV1=function(){-1!==document.cookie.indexOf("trendalytics_search_enabled")&&r&&(r=!1,t.off(".searchEvents"),c.off(".searchEvents"),n.off(".searchEvents"),h.off(".searchEvents"),j())},a?j():(r=!0,w())}}}(jQuery);
//# sourceMappingURL=site_search_v1.js.map
