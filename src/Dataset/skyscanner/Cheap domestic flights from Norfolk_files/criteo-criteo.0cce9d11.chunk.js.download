(this.jsTagManagerJsonpCallback=this.jsTagManagerJsonpCallback||[]).push([[7],{40:function(e,t,r){"use strict";r.r(t),r.d(t,"criteo",(function(){return T})),r.d(t,"getInOutCode",(function(){return C}));var i=r(5),n=r(2),a=r(6),o=r(9),u={AE:55781,AR:13381,AT:18942,AU:9736,BR:48339,CA:13385,CH:18948,CO:57616,CZ:18943,DE:7450,DK:7459,ES:7447,FI:17297,FR:3491,GR:18944,HK:16133,ID:21464,IE:17933,IL:46745,IN:13082,IT:7448,JP:13710,KR:21463,MX:13382,MY:14976,NL:7449,NO:7458,NZ:18568,PH:55780,PL:18572,PT:18947,RU:7446,SE:3686,SG:14979,TH:13734,TR:7444,TW:16134,UK:2936,US:18945},c={AE:78621,AR:78622,AT:78623,AU:24198,BR:14028,CA:14024,CH:78624,CO:78625,CZ:78626,DE:14027,DK:78627,ES:78628,FI:78629,FR:14026,GR:78630,HK:21720,ID:78631,IE:78633,IL:78634,IN:78635,IT:22956,JP:21719,KR:21721,MX:78636,MY:78637,NL:78638,NO:78639,NZ:78640,PH:78641,PL:78643,PT:78645,RU:14029,SE:78646,SG:78648,TH:78650,TR:78652,TW:21722,UK:14030,US:14031},d={AE:78574,AR:78580,AT:78581,AU:78584,BR:78585,CA:78586,CH:78587,CO:78589,CZ:78591,DE:11105,DK:78593,ES:10891,FI:78594,FR:78595,GR:78596,HK:73798,ID:78597,IE:78598,IL:78599,IN:78600,IT:10890,JP:78601,KR:78602,MX:78603,MY:78604,NL:10894,NO:78605,NZ:78606,PH:78608,PL:78609,PT:78610,RU:10889,SE:78611,SG:78612,TH:78613,TR:78614,TW:73797,UK:4748,US:78615},s=["AU","KR","HK","TW","US","UK","IT","FR","RU"],p=["AU","KR","HK","TW"],h=function(e){return new Date(e).toISOString().substr(0,10)},f=function(e){var t=new Date(e).toISOString(),r=t.indexOf("T");return t.substr(r+1,5)},m=function(e){return e.isMobile?"m":e.isBrowser?"d":e.isTablet?"t":"d"},I=function(e){return{event:"setSiteType",type:m(e)}},v=function(e){return{event:"setAccount",account:e}},C=function(e){var t=e.originAirport||e.originIata||e.originId||e.originCityId,r=e.destinationAirport||e.destinationIata||e.destinationId||e.destinationCityId;if(t&&r)return"".concat(t,"_").concat(r)},H=function(e,t,r){var i,n=(e.page||"").toLowerCase(),a=[];if(a.push({event:"manualFlush"}),a.push(I(e)),"redir"!==n&&a.push(v(u[e.market])),"home"===n&&a.push({event:"viewHome"}),["day-view","month","browse-view"].indexOf(n)>-1&&a.push({event:"viewItem",item:e.combo_OutInCode}),"day-view"===n&&a.push({event:"viewSearch",checkin_date:e.outboundDate,checkout_date:e.inboundDate}),"redir"===n){var o=e.market?e.market.toUpperCase():"",d={};"carhire"===e.category&&s.indexOf(o)>-1?(a.push(v(c[e.market])),a.push(function(e){var t=e.pickUpIataCodeCarHire,r=t&&"unknown"!==t?t:e.pickUpCityCodeCarHire;return{event:"trackTransaction",id:e.redirectId,din:e.carHirePickUpDate?h(e.carHirePickUpDate):"",dout:e.carHireDropOffDate?h(e.carHireDropOffDate):"",tin:e.carHirePickUpTime?f(e.carHirePickUpTime):"",tout:e.carHireDropOffTime?f(e.carHireDropOffTime):"",item:[{id:"".concat(r),price:e.redirectValue||1,quantity:1}]}}(e))):"transport"===e.category&&s.indexOf(o)>-1?(p.indexOf(o)>-1&&a.push(function(e){return{event:"viewItem",account:c[e.market],item:e.destinationIata,din:e.inboundDate,dout:e.outboundDate,place:"flightconversion"}}(e)),a.push({event:"trackTransaction",account:u[(i=e).market],id:i.redirectId,item:[{id:C(i),price:i.redirectValue||1,quantity:1}]})):(d={event:"trackTransaction",account:t,id:e.redirectId,new_customer:e.criteo_nc,item:[{id:e.combo_OutInCode,price:e.redirectValue,quantity:1}]},a.push(d))}return null!=r&&a.push({event:"setHashedEmail",m:r,hash_method:"s2m"}),a.push({event:"flushEvents"}),a},T=function(e,t){n.a.subscribe("criteo-event",(function(e){return function(e){var t=a.GLOBAL.getWindow();if(!e||!e.event)throw new Error("event required");if(!e.id)throw new Error("id required");var r={event:e.event,id:e.id,new_customer:e.new_customer||1,deduplication:e.deduplication||0,item:e.item||[]};return t.criteo_q&&t.criteo_q.push(r)}(e)}));var r=function(e){if(!e)throw new Error("__tagmanagerProps required");var t=Object(i.a)({},e),r=function(e){if(e)return"return"===e?"0":"1"}(t.tripType);void 0!==r&&(t.criteo_nc=r);var n=C(e);return n&&(t.combo_OutInCode=n),e.destinationCityId&&(t.destinationCityId=e.destinationCityId),t.pickUpIataCodeCarHire=e.pickUpIataCodeCarHire?e.pickUpIataCodeCarHire:0,t.dropOffIataCodeCarHire=e.dropOffIataCodeCarHire?e.dropOffIataCodeCarHire:0,t}(e),c=new o.a("auth-storage").tryGetValue("emhash",!1,!0),s=H(r,"".concat(e.market?u[e.market.toUpperCase()]:""),c),p=function(e,t,r){var i=(e.page||"").toLowerCase(),n=[];return n.push({event:"manualFlush"}),n.push(I(e)),"home"===i&&(n.push(v(t)),n.push({event:"viewHome"})),null!=r&&n.push({event:"setHashedEmail",m:r,hash_method:"s2m"}),n.push({event:"flushEvents"}),n}(r,"".concat(e.market?d[e.market.toUpperCase()]:""),c),h=a.GLOBAL.getWindow();h.criteo_q=h.criteo_q||[],s.forEach((function(e){h.criteo_q.push(e)})),p.forEach((function(e){h.criteo_q.push(e)})),t("//static.criteo.net/js/ld/ld.js",null,null,"anonymous")};t.default=T}}]);
//# sourceMappingURL=criteo-criteo.0cce9d11.chunk.js.map