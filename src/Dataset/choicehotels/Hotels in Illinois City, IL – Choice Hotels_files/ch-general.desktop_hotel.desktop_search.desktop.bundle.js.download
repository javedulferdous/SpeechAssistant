(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{369:function(e,t){e.exports=["brandConst","searchConst",function(e,t){function r(t){return Boolean(t&&t.brandCode&&e.BRAND_CODE_GROUPS.AMR.find((function(e){return t.brandCode===e})))}function n(t){return-1!==e.BRAND_CODE_GROUPS.AMR.indexOf(t)}function a(e){return"ADLT"===e}function i(e){return"FFDY"===e}function s(e){return a(e)||i(e)}function o(e,t){return Boolean(t)&&Boolean(t.amenityGroups&&t.amenityGroups.find((function(t){return e(t.id)}))||t.amenities&&t.amenities.find((function(t){return e(t.code)})))}return{childAgesEntered:function(e){return Boolean(Array.isArray(e)&&e.findIndex((function(e){return!e&&0!==e}))<0)},isBrandAMResort:n,isHotelAMResort:r,isHotelAdultOnly:function(e){return o(a,e)},isHotelAdultOnlyOrFamilyFriendly:function(e){return o(s,e)},isHotelFamilyFriendly:function(e){return o(i,e)},isPropertyAdultsOnly:function(e){return Boolean(e)&&Boolean(e.amenityGroups&&e.amenityGroups.find((function(e){return"ADLT"===e.id}))||e.amenities&&e.amenities.find((function(e){return"ADLT"===e.code})))},minorsAgeExceedsMax:function(e){return Number(e)>t.MINORS_AGE.MAX},minorsAgeListExceedsMax:function(e){return Boolean(Array.isArray(e)&&e.some((function(e){return e&&Number(e)>t.MINORS_AGE.MAX})))},minorsAgeListIsEmpty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!Array.isArray(e)&&(0===e.length||e.every((function(e){return null==e||""===e})))},shouldBrandShowSrdOccupancyWarning:function(e,t){return n(e)&&("SRD"===t||"PPC"===t)},shouldDisplayAgeVerification:function(e){return r(e)},shouldHideCalendarInvite:function(e){return Boolean(!e||!e.checkIn)},shouldHideGuaranteePolicy:function(e){return r(e)},shouldHideLPG:function(e){return r(e)},shouldHotelShowSrdOccupancyWarning:function(e,t){return r(e)&&("SRD"===t||"PPC"===t)},shouldShowGuestWarning:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e+t>r},shouldShowTaxIncluded:function(e,t,r){return!!(e&&t&&r)&&(r&&0===Number(e-t))}}}]},370:function(e,t){e.exports=["browserCompatibilityHelper","chThumbnail","featureFlags","prerenderService","$rootScope",function(e,t,r,n,a){var i=r.WEBP_FORMAT_FOR_HOTEL_IMAGES&&!n.isRunningInPrerender()&&e.isWebpSupported;function s(e){return e&&i&&(e=e.replace(/jpg/i,"webp")),e}return{getImageMerchandisingTag:function(e){var t=e&&e.amenityGroups&&e.amenityGroups.find((function(e){return e&&("ADLT"===e.id||"FFDY"===e.id)})),n=!1;return(r.AMR_MASTER||r.AMR_MWEB_MASTER)&&t&&(n={adults:"ADLT"===t.id,family:"FFDY"===t.id,label:"ADLT"===t.id?a.strings.hotel.adultsOnly:a.strings.hotel.familyFriendly}),n},getImageName:s,promoteCoverPhotos:function(e){var t=(e.images||[]).findIndex((function(e){return e.isCoverPhoto}));t>0&&e.images.unshift(e.images.splice(t,1)[0])},setImageInformation:function(e,i,o){e&&(r.PRERENDER_GALLERY_IMAGES&&n.isRunningInPrerender()&&(e.thumbnail=100),i.backupHighResUrl="".concat(e.baseUrl+e.highRes,"/").concat(i.name),i.backupMediumHighResUrl="".concat(e.baseUrl+e.mediumHighRes,"/").concat(i.name),i.backupUrl="".concat(e.baseUrl+e.defaultRes,"/").concat(i.name),i.backupThumbUrl="".concat(e.baseUrl+e.thumbnail,"/").concat(i.name),i.backupSmallThumbUrl="".concat(e.baseUrl+e.smallThumbnail,"/").concat(i.name));var c=s(i.name);e&&(r.PRERENDER_GALLERY_IMAGES&&n.isRunningInPrerender()&&(e.thumbnail=100),i.highResUrl="".concat(e.baseUrl+e.highRes,"/").concat(c),i.mediumHighResUrl="".concat(e.baseUrl+e.mediumHighRes,"/").concat(c),i.url="".concat(e.baseUrl+e.defaultRes,"/").concat(c),i.thumbUrl="".concat(e.baseUrl+e.thumbnail,"/").concat(c),i.smallThumbUrl="".concat(e.baseUrl+e.smallThumbnail,"/").concat(c)),void 0===e&&o&&(i.url=i.thumbUrl=t(o,a.chConstants.search.THUMBNAIL_BASE_URL))},setRoomImageInformation:function(e,t){e&&(t.backupMobileThumbUrl="".concat(e.baseUrl+e.thumbnail,"/").concat(t.imageName),t.backupThumbUrl="".concat(e.baseUrl+e.defaultRes,"/").concat(t.imageName));var r=s(t.imageName);e&&(t.mobileThumbUrl="".concat(e.baseUrl+e.thumbnail,"/").concat(r),t.thumbUrl="".concat(e.baseUrl+e.defaultRes,"/").concat(r))},updateHotelImagesWithRenditions:function(e){if(e&&e.imageRenditionInformation){var t=e.images,r=e.featuredImages;for(var n in r&&t&&(e.images=r.concat(t)),e.images)Object.prototype.hasOwnProperty.call(e.images,n)&&this.setImageInformation(e.imageRenditionInformation,e.images[n],e);if(r)for(var a in e.featuredImages)Object.prototype.hasOwnProperty.call(e.featuredImages,a)&&this.setImageInformation(e.imageRenditionInformation,e.featuredImages[a],e)}return e},updateHotelRoomsWithRenditions:function(e,t){if(e&&t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.setRoomImageInformation(e,t[r])}}}]},371:function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}e.exports=function(e){var t={clearEvents:function(){var e=this;Object.keys(this.events).forEach((function(t){e.events[t]=(e.events[t]||[]).filter((function(e){return e&&e.$destroy&&e.$destroy(),!1}))}))},events:{},off:function(e,t){return this.events[e]=(this.events[e]||[]).filter((function(e){return!(!t||e.callback===t)||(e.$destroy&&e.$destroy(),!1)})),this},on:function(e,t,r){var n=this;if(!e||!t||"function"!=typeof t)return this;var a={callback:t};return r&&(a.$destroy=r.$on("$destroy",(function(){n.off(e,t)}))),this.events[e]=this.events[e]||[],this.events[e].push(a),this},onNext:function(e,t){var r=this;if(!e||!t||"function"!=typeof t)return this;var n={callback:function n(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];t.apply(r,i),r.off(e,n)}};return this.events[e]=this.events[e]||[],this.events[e].push(n),this},trigger:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(this.events[e]||[]).forEach((function(e){e.callback.apply(this,r)})),this}};return e?r(e.prototype||e,t):t}},416:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=["$http","$locale","$q","$location","deviceConst","featureFlags","localeService","searchDataService","urlParserService",function(e,t,r,a,i,s,o,c,l){var u={Airport:"ch-icon-airports",Attraction:"ch-icon-attractions",Beach:"ch-icon-beach",BusStation:"ch-icon-transit",BusinessOffice:"",Casino:"",City:"ch-icon-hotels",CivicCenter:"",College:"",ConventionCenter:"",EventLocation:"",GolfCourse:"",Hospital:"",Hotel:"ch-icon-hotels",MilitaryBase:"",Musem:"",Park:"",PerformingArts:"",Resort:"",ShoppingMall:"",SportsComplex:"ch-icon-play",Subway:"",TrainStation:""},h="/cms/content",p="/webapi/location/places",d={info:n({applocale:t.id,d:i.DESKTOP,pagename:"Chcom/Common/GetDestinationInfo"},s.IWSR_MASTER&&{sitename:o.getCountryCode()}),places:n({index:0,max:40,minPopularity:15,placeTypes:["CITY"],preferredLocaleCode:t.id,searchRadius:50},s.IWSR_MASTER&&{siteName:o.getCountryCode()}),poi:n({index:0,max:40,minPopularity:1,placeTypes:["AIRPORT","AMUSEMENT_PARK","ATTRACTION","BEACH","BUSINESS_OFFICE","BUS_STATION","CASINO","CIVIC_CENTER","COLLEGE","CONVENTION_CENTER","EVENT_LOCATION","GOLF_COURSE","HOSPITAL","HOTEL","MILITARY_BASE","MUSEUM","PARK","PERFORMING_ARTS","RESORT","SHOPPING_MALL","SPORTS_COMPLEX","SUBWAY","TRAIN_STATION"],preferredLocaleCode:t.id,searchRadius:50},s.IWSR_MASTER&&{siteName:o.getCountryCode()})};function f(e,t){a.path().toLowerCase().indexOf("pet-friendly-hotels")>-1?e.brand="PETS":t&&(e.brand=t)}function m(e){return"City"===e||"Airport"===e?u[e]:u.Attraction}return{getInfo:function(t,n){var a,i,s,o=r.defer();function l(){o.resolve(i)}if(t&&t.placeId)if(a=t.placeId,i=c.getDestinationData(a))l();else{var u={placeid:t.placeId};f(s=angular.extend({},u,d.info),n),e.get(h,{params:s}).then((function(e){e.data.placeid?(delete e.data.poiids,delete e.data.destinationids,c.setDestinationData(a,e.data,t),i=c.getDestinationData(a),l()):o.reject()}),(function(){o.reject()}))}else o.reject();return o.promise},getPlaces:function(t,a,i,o){var u,g,y,R,E=r.defer();function P(){E.reject()}function A(e){c.setDestinationItem(u.id,"results",e.data);var t=c.getDestinationData(u.id),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){var r=t.find((function(t){return e.placeid===t.id})),a={};return a.targetUrl=e.thumbnailtargeturl||l.getSearchUrl(t.find((function(t){return e.placeid===t.id}))),r&&r.type&&(a.type=r.type,a.icon=m(r.type)),n(n({},a),e)}))}(t.results.poiids,t.poiData);E.resolve(r)}function v(r){var n={destinationids:r.places,placeid:t.placeId,poiids:r.poi};r.places||r.poi?(f(R=angular.extend({},n,d.info),a),e.get(h,{params:R}).then(A,P)):P()}function S(r){u[r]?g[r].resolve(u[r]):((R=angular.extend({},d[r],{lat:t.lat,lon:t.lon})).placeTypes=R.placeTypes.join(","),e.get(p,{params:R}).then((function(e){var n=null;e.data.places&&e.data.places.length>0&&(n=[],e.data.places.forEach((function(e){e.id!==t.placeId&&n.push(e.id)})),n=n.join(","),c.setDestinationItem(u.id,r,n),c.setDestinationItem(u.id,"".concat(r,"Data"),e.data.places)),g[r].resolve(n)}),(function(){g[r].resolve()})))}return d.poi.preferredLocaleCode=i||d.poi.preferredLocaleCode,s.IWSR_MASTER&&o&&(d.poi.siteName=o),t&&t.placeId&&(u=c.getDestinationData(t.placeId)),u&&t.lat&&t.lon?(g={places:r.defer(),poi:r.defer()},y={places:g.places.promise,poi:g.poi.promise},r.all(y).then(v,P),S("places"),S("poi")):P(),E.promise}}}]},417:function(e,t){e.exports=["$rootScope","analyticsConst","analyticsManager","eventsConst","omniture","omnitureConst","pagesConst","strings",function(e,t,r,n,a,i,s,o){return{registerSpecialRateCorpIdError:function(){r.create({analyticsConst:t.PAGE_NAME,savePageName:!1,value:function(){return a.clearPreviousProperties(),i.RATEPLAN_DROPDOWN.POP},view:s.RATEPLAN_DROPDOWN_ERROR_POP}).register(),r.create({analyticsConst:t.ERROR_MESSAGES,value:o.booking.errors.ratePlan.dropdownErrorCorpId.NOT_FOUND,view:s.RATEPLAN_DROPDOWN_ERROR_POP}).register(),e.$emit(n.ANALYTICS_PAGE_LOADED,s.RATEPLAN_DROPDOWN_ERROR_POP)}}}]},418:function(e,t){e.exports=["$q","$rootScope","mapConst",function(e,t,r){var n={},a=[],i=function(){angular.forEach(n,(function(e,t){n[t]=!1}))},s=function(e){i(),n[e]=!0},o=function(e){n[e]=!1};function c(e){return a.find((function(t){return t.choiceMapId===e}))}return{arePanelsOpen:function(){var e=!1;return angular.forEach(n,(function(t){t&&(e=!0)})),e},clearPanelMap:function(e,n){t.$broadcast(r.EVENTS.PANELS.clear,e);var a=c(e);if(a.entities.clear(),n&&n.length>0)return n.forEach((function(e){a.entities.push(e)})),n},closeAllPanels:i,closeOtherPanels:function(e){i(),s(e)},closePanel:o,getMap:function(n){var a=e.defer(),i=c(n);if(i)return a.resolve(i),a.promise;var s=t.$on(r.EVENTS.MAP.ready,(function(e,t){t.choiceMapId===n&&(s(),a.resolve(t))}));return a.promise},isDirectionsExpanded:!1,isPanelOpen:function(e){return n[e]},loadedMaps:a,openPanel:s,panelObject:n,registerPanels:function(e){e.forEach((function(e){n[e]=!0}))},removeMap:function(e){a.some((function(t,r){return t.choiceMapId===e&&(a.splice(r,1),!0)}))},togglePanel:function(e){n[e]?o(e):s(e)}}}]},419:function(e,t){e.exports=["$document","$location","$rootScope","$timeout","$window","bingMapsService","searchResultsService","searchResultsMapAPIFactory","searchResultsMapService",function(e,t,r,n,a,i,s,o,c){var l={centerOnPin:!1,enableHotelBladeScroll:!1,focusZoomLevel:function(){return o.getMap().getZoom()},highlightHotel:!1,pinClickHandler:function(t,n,o){return!!t&&(c.lat=n,c.lon=o,c.hotelId=t,l.highlightHotel&&i.highlightPin(t),l.centerOnPin&&i.centerMap(n,o),l.enableHotelBladeScroll&&(u=t,s.viewHotel(u),r.$$phase||r.$digest(),r.$$postDigest((function(){var t="hotel-".concat(u),r=angular.element(document.getElementById(t));r&&e.scrollToElement(r,a.innerHeight/2-r[0].offsetHeight/2,400)}))),!0);var u},selectPin:function(e,t,r){return!!e&&(l.highlightHotel&&i.highlightPin(e),l.centerOnPin&&i.centerMap(t,r),!0)}};return l}]},420:function(e,t){e.exports=function(){var e;return{centerMap:function(t,r,n){e.setView({center:new Microsoft.Maps.Location(r,n),zoom:t})},createInfoBox:function(t){return new Microsoft.Maps.Infobox(e.getCenter(),t)},createMapAction:function(t,r){if(e)return Microsoft.Maps.Events.addHandler(e,t,r)},createPin:function(e,t){return new Microsoft.Maps.Pushpin(e,t)},createPinAction:function(e,t,r){return Microsoft.Maps.Events.addHandler(e,t,r)},createPoint:function(e,t){return new Microsoft.Maps.Point(e,t)},destroyMap:function(){e=null},getMap:function(){return e},getMapCenter:function(){return e.getCenter()},getMapLocation:function(e,t){if(e&&t)return new Microsoft.Maps.Location(e,t)},removeAllPins:function(){return!!e&&(e.entities.clear(),!0)},removePinAction:function(e){Microsoft.Maps.Events.removeHandler(e)},setMap:function(t){return t&&(e=t),!!t}}}},421:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),angular.extend(this,(r=t.DISTANCE_CALCULATIONS,window.DEGREES_TO_RADIANS=r.DEGREES_TO_RADIANS,window.EARTH_RADIUS_IN_MILES=r.EARTH_RADIUS_IN_MILES,window.RADIANS_TO_DEGREES=r.RADIANS_TO_DEGREES,r))}var t,n,a;return e.$inject=["mapConst"],t=e,(n=[{key:"changeInLatitude",value:function(e){return e/this.EARTH_RADIUS_IN_MILES*this.RADIANS_TO_DEGREES}},{key:"changeInLongitude",value:function(e,t){return t/(this.EARTH_RADIUS_IN_MILES*Math.cos(e*this.DEGREES_TO_RADIANS))*this.RADIANS_TO_DEGREES}},{key:"getDistanceBetweenPoints",value:function(e,t){var r=(e.latitude-t.latitude)*this.DEGREES_TO_RADIANS,n=(e.longitude-t.longitude)*this.DEGREES_TO_RADIANS,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.latitude*this.DEGREES_TO_RADIANS)*Math.cos(t.latitude*this.DEGREES_TO_RADIANS)*Math.sin(n/2)*Math.sin(n/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(this.EARTH_RADIUS_IN_MILES*i)}},{key:"getBoundingBoxBasedOnDistance",value:function(e,t){return{east:e.longitude-this.changeInLongitude(e.latitude,t),north:e.latitude-this.changeInLatitude(t),south:e.latitude+this.changeInLatitude(t),west:e.longitude+this.changeInLongitude(e.latitude,t)}}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=n},422:function(e,t){e.exports=function(){this.hotelId=null,this.lat=null,this.lon=null}},423:function(e,t){e.exports=function(){return{getExteriorImageIndex:function(e){var t=0;if(!e||!e.length)return t;for(;e[t]&&!e[t].isCoverPhoto&&t<e.length-1;)t++;return t!==e.length-1||e[t].isCoverPhoto||(t=0),t}}}},424:function(e,t){e.exports=function(){var e=function(e){var t,r,n=[],a=[];for(var i in e.rateRanges)Object.prototype.hasOwnProperty.call(e.rateRanges,i)&&(e.rateRanges[i].min&&n.push(parseFloat(e.rateRanges[i].min.beforeTax)),e.rateRanges[i].max&&a.push(parseFloat(e.rateRanges[i].max.beforeTax)));return t=n.length>0?Math.min.apply(Math,n):0,r=a.length>0?Math.max.apply(Math,a):0,e.minPrice=t,e.maxPrice=r,e};return{formatPrice:function(t){var r=t.results.hotels;for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=e(r[n]));return t.results.hotels=r,t},formatPriceToNumber:e}}},425:function(e,t){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=["$http","$locale","$localStorage","$location","$q","apiParamsHelper","brandConst","cookieHelper","cpUserData","dateHelper","deviceConst","featureFlags","hotelConst","hotelImageHelper","localeService","multiRoomHelper","objectHelper","ratesConst","searchConst","searchDataService","searchPriceFormatter","searchRatesDataService","sessionStorageHelper","siteConfig","siteOpConstant","siteOpService","subdivisionHelper","urlEncodeObject",function(e,t,n,i,o,c,l,u,h,p,d,f,m,g,y,R,E,P,A,v,S,O,T,_,C,b,D,I){var M=!y.isDomestic();function L(e){var t=function(e){var t,r=e.results||{},n=r.searchRadiusUsed;return M&&(n=n?Math.floor(r.searchRadiusUsed/A.DISTANCE_CONVERSION.miToKm):H(),t=A.DISTANCE_CONVERSION.kmUnit),{distanceUnit:t,searchRadiusUsed:n}}(e),r=t.distanceUnit,n=t.searchRadiusUsed,a=function(e){var t=(e.results||{}).hotels||[];return t=t.map((function(e){return e=e||{},e=D.mapHotelWithAlternateSubdivisions(e),e=S.formatPriceToNumber(e),e=g.updateHotelImagesWithRenditions(e)}))}(e),i=s(s({},e.results),{},{hotels:a,searchRadiusUsed:n});return r&&(i.hotels.distanceUnit=r),0===i.hotels.length&&delete i.hotels,i}function N(){return s(s(s({adults:1,amenity:"",brand:"",checkInDate:"",checkOutDate:"",clientId:null,hotelSortOrder:"RELEVANCE",include:"".concat(f.MW_SEARCH_RESULTS_PAGE?"amenities, ":"","amenity_groups, amenity_totals, awards_info, rating, relative_media").concat(f.MW_SEARCH_RESULTS_PAGE||f.SO_NEW_RENOVATED_MERCHANDISING?", renovation_info":""),lat:null,lon:null,loyaltyAccountLastName:null,loyaltyAccountNumber:null,loyaltyProgramId:null,minors:0,onlyAvailable:"",placeId:null,placeName:null,placeType:null,preferredLocaleCode:t.id,ratePlanCode:"RACK",ratePlans:(e=[P.RATE_PLAN_CODES.RACK,P.RATE_PLAN_CODES.PREPD],f.PROMO_CATEGORY&&e.push(P.RATE_PLAN_CODES.PROMO),f.CLOSED_USER_GROUP_V2?e.push(P.RATE_PLAN_CODES.FENCED):f.CLOSED_USER_GROUP&&e.push(P.RATE_PLAN_CODES.CUG),e.join(",")),rateType:"LOW_ALL",rooms:1,searchRadius:H()},f.IWSR_MASTER&&{siteName:y.getCountryCode()}),f.AMR_MASTER&&{ageOfMinors:null}),{},{stateCountry:null});var e}function H(){var e=f.EXTENDED_STAY_SERP&&-1!==i.path().indexOf("/extended-stay-hotels");if(!f.IWSR_MASTER){var t=A.DEFAULT_PARAMS.searchRadius;return e?t*A.EXTENDED_STAY_DOUBLES_DEFAULT_RADIUS:t}var r=y.getCountryCode().toUpperCase(),n=M?A.DEFAULT_PARAMS[r].searchRadius.km:A.DEFAULT_PARAMS[r].searchRadius.mi;return e?n*A.EXTENDED_STAY_DOUBLES_DEFAULT_RADIUS:n}function w(e,t){var r=function(e,t){if(t.rooms&&t.rooms>=A.GROUP_OPTIONS.minRoomsPerGroup){if(e.ratePlanCode=P.RATE_PLAN_CODES.GROUP,t.rooms<=A.GROUP_OPTIONS.maxRoomsPerGroup){var r=T.getClientFile()||{},n=r.ratePlans&&r.ratePlans.map((function(e){return e.ratePlanCode}));e.ratePlans=f.CORPORATE_GROUP_BOOKINGS?"".concat(P.RATE_PLAN_CODES.GROUP,",").concat(P.RATE_PLAN_CODES.RACK).concat(n?",".concat(n.join(",")):""):P.RATE_PLAN_CODES.GROUP,e.rateType=f.CORPORATE_GROUP_BOOKINGS?"LOW_ALL":"LOW"}else t.find=A.FIND_MODE.GROUP;return!0}return!1}(e,t),n=N();if(t.find){e.rooms=1,e.adults=1,e.minors=0,e.ratePlans=P.RATE_PLAN_CODES.RACK,e.rateType="LOW",e.hotelSortOrder="DISTANCE";var a=p.getTodayDate();e.checkInDate=p.asString(p.withAddedDays(a,1)),e.checkOutDate=p.asString(p.withAddedDays(a,2))}else if(!r&&t.ratePlanCode)switch(angular.uppercase(t.ratePlanCode)){case P.RATE_PLAN_CODES.SRD:e.ratePlans=P.RATE_PLAN_CODES.SRD,e.rateType="LOW";var i=h.get();i.signedIn&&"ELIGIBLE"===i.pointsPlusCashAccountStatus.statusCode&&(e.ratePlans+=",".concat(P.RATE_PLAN_CODES.PPC),e.rateType="LOW_ALL",e.loyaltyAccountLastName=i.lastName,e.loyaltyProgramId=i.cpLoyaltyProgramId,e.loyaltyAccountNumber=i.cpLoyaltyAccountNumber);break;case P.RATE_PLAN_CODES.RACK:e.ratePlans=n.ratePlans,e.rateType=n.rateType;break;default:e.ratePlans="".concat(t.ratePlanCode,",").concat(n.ratePlans),e.rateType=n.rateType}}function U(){var e={bookedBrands:{},bookedHotels:{},viewedBrands:{},viewedHotels:{}};return(n.myBookingHistory||{propCodes:[]}).propCodes.forEach((function(t){var r=t.b,n=t.c,a=t.code,i=t.r,s=t.v;(r||a)&&(s.length||i.length)&&(e.viewedBrands[r]=r,e.viewedHotels[a]=a),(r||a)&&n.length&&(e.bookedBrands[r]=r,e.bookedHotels[a]=a)})),{bookedBrands:e.bookedBrands,bookedHotels:e.bookedHotels,viewedBrands:e.viewedBrands,viewedHotels:e.viewedHotels}}function x(e){var t=[],r=R.conditionallyUpdateApiParams(e);return delete r.stateCountry,+r.rooms<A.GROUP_OPTIONS.minRoomsPerGroup&&delete r.rooms,Object.keys(r).sort().forEach((function(e){t.length&&t.push(","),t.push(e),t.push(":");var n=r[e];"lat"!==e&&"lon"!==e||(n=parseFloat(n).toFixed(4)),t.push("".concat(n).toLowerCase())})),t.join("")}function F(e){return f.EXTENDED_STAY_SERP&&-1!==i.path().indexOf("/extended-stay-hotels")?B(e):{results:s(s({},e.data),{},{unfilteredHotels:e.data.hotels||[]})}}function B(e){var t=a({},e.data),r=(t.hotels||[]).filter((function(e){return-1!==l.BRAND_CODE_GROUPS.EXTENDED_STAY.indexOf(e.brandCode)})),n=r.length;return a(t,{amentiesTotals:r.reduce((function(e,t){return t.amenityGroups&&t.amenityGroups.forEach((function(t){if(t.id in e)e[t.id].totals+=1;else{var r=t.id,n=t.name;e[r]={id:r,name:n,totals:1}}})),e}),{}),hotelCount:n,hotels:r,totalHotelCount:n,unfilteredHotels:t.hotels||[]}),{results:t}}function k(e){return e.rooms>=A.GROUP_OPTIONS.minRoomsPerGroup}return{filterForExtendedStayBrandResults:B,formatSearchResults:L,getBookingHistory:U,getDefaultApiParams:N,getDefaultSearchRadius:H,getHotelAction:function(e,t){return e&&e.find?(t||{}).rateRanges?A.HOTEL_ACTION.SELECT_WITH_RATES:A.HOTEL_ACTION.SELECT_NO_RATES:e&&k(e)?function(e){if(e.rateRanges)for(var t=e.rateRanges.length-1;t>=0;--t){var r=e.rateRanges[t];if(r.min&&r.min.ratePlanCode!==P.RATE_PLAN_CODES.RACK||r.max&&r.max.ratePlanCode!==P.RATE_PLAN_CODES.RACK)return!0}return!1}(t)?A.HOTEL_ACTION.CREATE_GROUP:function(e){return!!e.hasCategory}(t)?A.HOTEL_ACTION.NONE:A.HOTEL_ACTION.GET_QUOTE:(t||{}).rateRanges?A.HOTEL_ACTION.BOOK:A.HOTEL_ACTION.NONE},getHotels:function(t){function n(e){var n=L(e);if(v.setData(s,n,t),n&&n.places&&n.places.length){var a=r(n.places,1)[0];if("".concat(a.lat)!=="".concat(i.lat)||"".concat(a.lon)!=="".concat(i.lon)||a.type!==i.placeType){if(1===n.places.length){var o=x(angular.extend({},i,{lat:a.lat,lon:a.lon,placeType:a.type}));v.setData(o,n,t)}var c="PostalArea"!==a.type&&"Address"!==a.type?[a.name,a.subdivision,a.country].filter(Boolean).join(", "):a.name,l=angular.extend({},i,{lat:a.lat,lon:a.lon,placeName:c,placeType:a.type});delete l.platformType,delete l.siteOpRelevanceSortMethod,delete l.optimizeResponse;var u="Address"===a.type?x(l):x(angular.extend({},l,{placeId:a.id}));v.setData(u,n,t)}}return v.getData(s)}var i=function(e){var t=N(),r=a({},t,e);return delete(r=c.formatApiParams(t,r)).amenity,delete r.onlyAvailable,e.searchRadius||r.lat||r.lon||delete r.searchRadius,M&&(r.searchRadius=Math.ceil(r.searchRadius*A.DISTANCE_CONVERSION.miToKm)),r}(t),s=x(i),l=v.getData(s);if(l)return o.resolve(l);if(w(i,t),E.removeUndefinedProperties(i),f.RECENTLY_INTERACTED_DATA){var h=U(),p={bookedBrands:Object.keys(h.bookedBrands).join(","),bookedHotels:Object.keys(h.bookedHotels).join(","),viewedBrands:Object.keys(h.viewedBrands).join(","),viewedHotels:Object.keys(h.viewedHotels).join(",")};i=a(i,{recentlyInteracted:p})}return i.optimizeResponse=m.OPTIMIZE_RESPONSE.IMAGE_URL,o.when(b.getPromise()).then((function(){var r=_.deviceType===d.MOBILE;return(i=a(i,function(e){var t,r=f.SO_ALGORITHM_A_MOBILE&&e||f.SO_ALGORITHM_A_DESKTOP&&!e,n=f.SO_ALGORITHM_B_MOBILE&&e||f.SO_ALGORITHM_B_DESKTOP&&!e;if(!r&&!n)return;n&&(t=C.ALGORITHM_METHODS.ALGORITHM_B);r&&(t=C.ALGORITHM_METHODS.ALGORITHM_A);return{platformType:e?C.PLATFORM_TYPE.MOBILE:C.PLATFORM_TYPE.DESKTOP,siteOpRelevanceSortMethod:t}}(r),function(e){var t={},r=e.index,n=e.max;(r||0===r)&&(t.index=r);(n||0===n)&&(t.max=n);return t}(t))).rooms&&i.rooms>1&&delete i.ageOfMinors,function(t,r){function n(){return e({data:I(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",url:"/webapi/location/hotels"}).then(F).then(r).catch((function(e){return o.reject(e.data||e)}))}if(!u.getCHVISITORCookie())return e({method:"GET",url:"/webapi/activity/start"}).then(n).catch(n);return n()}(i,n)}))},getRates:function(t,r){var n=N(),a=angular.extend({},n,t);a=R.conditionallyUpdateApiParams(a),(a=c.formatApiParams(n,a)).hotelIds=r,w(a,t);var i=x(a),s=O.getData(i);return s?o.resolve(s):e({data:I(a),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",url:"/webapi/location/hotels/rates"}).then((function(e){return O.setData(i,e.data,t),O.getData(i)})).catch((function(e){return o.reject(e.data)}))},handleHotelCallResponse:F,isCreatingGroup:k,isKm:M}}]},426:function(e,t){e.exports=["$location","amenitiesConst","brandConst","chPlaceDisplayFilter","pageMetaData","patternsConst","regExHelper","searchConst","searchHelper","siteConfig","strings",function(e,t,r,n,a,i,s,o,c,l,u){function h(e){return Boolean(e.amenity)&&-1!==e.amenity.indexOf(t.PET_FRIENDLY)}function p(e){return-1!==e.indexOf("extended-stay-hotels")}function d(e){return e.images&&e.images[0]&&e.images[0].thumbUrl||"/".concat(l.assetFingerprint).concat(r.BRAND_LOGOS[e.brandCode])}function f(e,t,a,i){var l=function(e,t,r){var n;return p(r)?n="extendedStay":e.placeType===o.CITY?(n="city",t.brand?n="brandCity":h(t)&&(n="petFriendly")):n=e.placeName?"poi":"nearMe",n in u.search.results.metaTopic?u.search.results.metaTopic[n]:{metaDescription:u.search.results["".concat(n,"MetaDescription")],metaKeywords:u.search.results["".concat(n,"MetaKeywords")],metaTitle:u.search.results["".concat(n,"MetaTitle")]}}(e,t,i),f=function(e,t){var a={city:e.city,subdivision:e.subdivision||e.country};return e.placeType===o.CITY&&t.brand?a.brandName=r.BRAND_NAMES[t.brand.split(o.URL_PARAM_DELIMITER)[0]]||"":e.placeName&&(a.placeName=n(e)),a}(e,t),m=d(a&&a.length&&a[0]||{}),g=s.replaceStringByKeyValuePairs(l.metaKeywords,f),y=s.replaceStringByKeyValuePairs(l.metaDescription,f),R=s.replaceStringByKeyValuePairs(l.metaTitle,f);if(e.placeType===o.CITY&&(p(i)||!t.brand&&h(t))){var E=c.getHotelCount(a),P=function(e,t){return p(t)?u.search.results.extendedStay:c.getBrandAmenityDisplay(e.brand,e.amenity)}(t,i),A=1===E?u.search.results.titleHotelsNear.one:u.search.results.titleHotelsNear.other,v=n(e),S="".concat(E," ").concat(P," ").concat(A," ").concat(v);R="".concat(S," – ").concat(u.general.choiceHotels),y="".concat(u.search.results.filterMetaDescriptionPreface).concat(S,". ").concat(y)}return{description:y,keywords:g,mediaImage:m,mediaTitle:R,pageUrl:i,title:R}}return{updatePropertyRatesMeta:function(e,t){if(e.cms){var r,n,i=s.replaceStringByKeyValuePairs(u.hotel.detail.metaMediaTitle,{brandName:e.name,city:e.address.city,subdivision:e.address.subdivision}),o=d(e);t&&(r=s.replaceStringByKeyValuePairs(t.title,{hotelName:e.name,pageNumber:t.pageNumber}),n=s.replaceStringByKeyValuePairs(t.description,{hotelName:e.name,pageNumber:t.pageNumber}));var c={description:n||e.cms.metaDescription,keywords:e.cms.metaKeywords,mediaImage:o,mediaTitle:i,title:r||e.cms.windowTitle};a.update(c)}},updatePropertySearchNoIndex:function(t){a.update({metaRobots:Object.keys(t||e.search()).length?"NOINDEX, FOLLOW":null})},updateSearchResultsDestinationMeta:function(e){a.update({description:e.metadescription,keywords:e.metakeywords,mediaImage:e.thumbnailimageasset,mediaTitle:e.browserwindowtitle,title:e.browserwindowtitle})},updateSearchResultsMeta:function(t,r,n,s){var o=f(t,r,n,s||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.path();return i.localePath.test(t)?t.replace(t.match(i.localePath)[0],"/"):t}());a.update(o)}}}]},427:function(e,t){e.exports=["$location","featureFlags","objectHelper","patternsConst","searchConst","selectedLangData","strings","urlParserService",function(e,t,r,n,a,i,s,o){var c=i.get().code;function l(e,t){var r=function(e){var t,r="RACK";return angular.forEach(e.rateRanges,(function(e){if(e.min){var n=parseFloat(e.min.averageNightlyBeforeTax||e.min.avgNightlyPoints);!n.isNaN&&(void 0===t||n<t)&&(t=n,r=e.min.ratePlanCode)}})),r}(e);return n.promoRatePlanCode.test(r)&&(t+="".concat(t.indexOf("?")>=0?"&":"?","view=").concat(r)),t}var u={getCtaText:function(e,t){switch(e){case a.HOTEL_ACTION.SELECT_WITH_RATES:case a.HOTEL_ACTION.SELECT_NO_RATES:return s.search.item.selectHotel;case a.HOTEL_ACTION.GET_QUOTE:return s.search.item.getQuote;case a.HOTEL_ACTION.CREATE_GROUP:case a.HOTEL_ACTION.BOOK:return t&&t.rooms>=a.GROUP_OPTIONS.minRoomsPerGroup?s.search.item.selectRooms:s.search.item.bookNow}},getCtaUrl:function(e,t,r){switch(e){case a.HOTEL_ACTION.SELECT_WITH_RATES:case a.HOTEL_ACTION.SELECT_NO_RATES:return r&&"group"===r.find?o.getPropertyGroupRequestUrl(t.address,t.brandCode,t.id,c):"/";case a.HOTEL_ACTION.GET_QUOTE:return u.getPropertyGroupRequestUrl(t);case a.HOTEL_ACTION.CREATE_GROUP:case a.HOTEL_ACTION.BOOK:return u.getPropertyRatesUrl(t)}return""},getPropertyGroupRequestUrl:function(e){return o.getPropertyGroupRequestUrl(e.address,e.brandCode,e.id,c,!0)},getPropertyPageUrl:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.getPropertyPageUrl(e.address,e.brandCode,e.id,c,t)},getPropertyRatesUrl:function(e){return l(e,o.getPropertyRatesUrl(e.address,e.brandCode,e.id,c,!0))},updateHotelRatesUrlParams:function(n,a){var i=e.search(),s=angular.extend({},n);t.SO_MODIFY_UPDATE_DATE_BUTTON?angular.extend(i,r.filterEquivalentProperties(s,a)):angular.extend(r.filterEquivalentProperties(s,a),i),e.search(s)}};return u}]},428:function(e,t){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t,r,n,a,i,s,o,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arrayHelper=t,this.chPriceFilter=r,this.featureFlags=n,this.hotelImageHelper=a,this.priceHelper=i,this.priceTypeService=s,this.ratesConst=o,this.searchConst=c}var t,n,i;return e.$inject=["arrayHelper","chPriceFilter","featureFlags","hotelImageHelper","priceHelper","priceTypeService","ratesConst","searchConst"],t=e,(n=[{key:"addSectionTypes",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.forEach((function(e){var a=!n.ratePlanCode||t.ratesConst.DEFAULT_RATE_PLANS.indexOf(n.ratePlanCode)>=0,i=!r.brand||r.brand.indexOf(e.brandCode)>=0,s=!r.amenity||e.amenityGroups&&r.amenity.split(t.searchConst.URL_PARAM_DELIMITER).every((function(t){return e.amenityGroups.some((function(e){return e.id===t}))})),o=a||e.ratePlanCode===n.ratePlanCode,c=e.rateRanges?"AVAILABLE_":"UNAVAILABLE_";r.brand||r.amenity||!a?c+=i&&s&&o?"WITH_CRITERIA":"WITHOUT_CRITERIA":c+="HOTELS",e.hotelSectionType=c}))}},{key:"calculatePrices",value:function(e,t,r){var n=this;e.length?(this.priceTypeService.shouldUsePriceType()&&!this.priceTypeService.isGroupRate()&&(t.priceMax=-1/0,t.priceMin=1/0,t.priceHigh=t.priceLow=0),e.forEach((function(e){n.searchConst.UNAVAILABLE_PREFIX_REGEX.test(e.hotelSectionType)?e.price=0:(e.ratePlanCode=e.rateRanges&&(e.rateRanges.find((function(e){return e.min.ratePlanCode===r.ratePlanCode}))||e.rateRanges[0]).min.ratePlanCode||"",n.priceTypeService.shouldUsePriceType()?e.priceData=n.chPriceFilter(e,{0:"avgNightlyBeforeTax",1:"avgNightlyAfterTax",2:"afterTax",3:"avgNightlyBeforeTax"}[n.priceTypeService.getPriceType()]):e.priceData=n.chPriceFilter(e),e.price=Math.round(e.priceData[0].points||+e.priceData[0].cash),"number"!=typeof t.priceMin||"number"!=typeof e.price||isNaN(e.price)||(t.priceMin=Math.min(e.price,t.priceMin)),"number"!=typeof t.priceMax||"number"!=typeof e.price||isNaN(e.price)||(t.priceMax=Math.max(e.price,t.priceMax)),t.currencyType=e.priceData[0].points?e.priceData[0].cash?"pointsPlusCash":"points":"cash",t.currencyCode=e.priceData[0].currency,t.priceMin||(t.priceMin=t.priceMax=e.price,t.currencyCode=e.priceData[0].currency))})),t.priceMin||(t.priceMin=t.priceMax=0),t.priceLow=t.priceLow?Math.max(Math.min(t.priceLow,t.priceMax),t.priceMin):t.priceMin,t.priceHigh=t.priceHigh?Math.max(Math.min(t.priceHigh,t.priceMax),t.priceMin):t.priceMax):t.priceMin=t.priceMax=0}},{key:"parseRatings",value:function(e){e.forEach((function(e){e.rating&&e.rating.value&&(e.rating.roundedValue=Math.round(e.rating.value))}))}},{key:"process",value:function(e){this.arrayHelper.addIndexes(e.hotels),this.parseRatings(e.hotels),this.featureFlags.CLOSED_USER_GROUP_V2&&this.priceHelper.flattenRateRanges(e.hotels),this.calculatePrices(e.hotels,e.filters,e.params),this.priceHelper.sortHotelRatesByPrice(e.hotels),e.hotels.forEach(this.hotelImageHelper.promoteCoverPhotos)}},{key:"updatePrices",value:function(e){this.calculatePrices(e.hotels,e.filters,e.params)}},{key:"getHotelPriceList",value:function(e){var t=[];return angular.forEach(e,(function(e){e.price>0&&t.push(e.price)})),t}},{key:"getLowestHotelPrice",value:function(e){return e.length?Math.min.apply(Math,r(e)):0}},{key:"getHighestHotelPrice",value:function(e){return e.length?Math.max.apply(Math,r(e)):0}}])&&a(t.prototype,n),i&&a(t,i),e}();e.exports=i},429:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r,n,a,i,s,o,c,l,u,h,p,d,f,m,g,y,R,E,P,A,v,S,O,T){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$location=n,this.$locale=r,this.$q=a,this.$rootScope=i,this.$timeout=s,this.dateHelper=c,this.eventsConst=l,this.featureFlags=u,this.globalLoaderCounter=h,this.hotelConst=p,this.hotelImageHelper=d,this.iframeLinkHelper=f,this.objectHelper=m,this.prerenderService=g,this.ratesConst=y,this.reasonConst=R,this.crossSellGeoSearchService=o,this.searchConst=E,this.searchCriteriaData=P,this.searchHelper=A,this.searchResultsProcessor=v,this.searchService=S,this.siteConfig=O,this.urlParserService=T}var t,r,s;return e.$inject=["$filter","$locale","$location","$q","$rootScope","$timeout","crossSellGeoSearchService","dateHelper","eventsConst","featureFlags","globalLoaderCounter","hotelConst","hotelImageHelper","iframeLinkHelper","objectHelper","prerenderService","ratesConst","reasonConst","searchConst","searchCriteriaData","searchHelper","searchResultsProcessor","searchService","siteConfig","urlParserService"],t=e,(r=[{key:"initialize",value:function(){return this.trigger("preInit"),this.clearEvents(),this.hotels=[],this.resort={},this.woodSpringDestination={},this.showWoodSpringBanner=!1,this.userTriggeredSearchFilter=!1,this.hotelsFiltered=[],this.unfilteredHotels=[],this.hotelsInView=[],this.resultsToShowPerPage=this.searchConst.RESULTS_PER_PAGE,this.initializeParams(this.searchCriteriaData.get(),this.$location.path(),this.$location.search()),this.trigger("postInit"),this}},{key:"changeView",value:function(e){return this.page>1&&(this.page=1,this.hotelsInView=this.$filter("limitTo")(this.hotelsFiltered,this.page*this.resultsToShowPerPage)),this.view=e,this}},{key:"createPlace",value:function(e){return o({city:null,clientId:null,country:null,lat:null,lon:null,name:null,placeId:null,placeName:null,placeType:null,stateCountry:null,subdivision:null},e)}},{key:"extractPlaceFromResults",value:function(e){if(e&&e.results&&e.results.placeCount){var t=e.results.places.find((function(e){return e.usedForHotelSearch}))||e.results.places[0],r=t.name;t.type!==this.searchConst.POSTAL_AREA&&t.type!==this.searchConst.ADDRESS&&(r+=(t.subdivision?", ".concat(t.subdivision):"")+(t.country?", ".concat(t.country):"")),o(this.place,this.createPlace({city:t.city,country:t.country,lat:t.lat,lon:t.lon,name:t.name,placeId:t.id,placeName:r,placeType:t.type,subdivision:t.subdivision})),this.searchCriteriaData.update(this.place),this.trigger("update_search_criteria")}return e}},{key:"filter",value:function(e){return e&&this.setParams(e),this.filters.searchRadius>this.searchRadiusUsed&&!this.userTriggeredSearchFilter?(this.userTriggeredSearchFilter=!0,this.search(),this):(this.hotels.forEach((function(e){e.resortBannerDetails&&e.resortBannerDetails.name&&(delete e.resortBanner,delete e.resortBannerDetails),e.wsBannerDetails&&(delete e.wsBanner,delete e.wsBannerDetails)})),this.searchResultsProcessor.addSectionTypes(this.hotels,this.filters,this.params),this.performReorder(),this)}},{key:"getAmenityTotals",value:function(e){for(var t=0;t<e.length;t++)for(var r=0;r<(e[t].amenityGroups?e[t].amenityGroups.length:0);r++)for(var n in this.amenitiesTotals)n===e[t].amenityGroups[r].id&&(this.amenitiesTotals[n].total=this.amenitiesTotals[n].total+1)}},{key:"resetAmenityTotals",value:function(){for(var e in this.amenitiesTotals)this.amenitiesTotals.hasOwnProperty(e)&&(this.amenitiesTotals[e].total=0)}},{key:"isExtendedStay",value:function(){var e=this.featureFlags.EXTENDED_STAY_SERP&&-1!==this.$location.path().indexOf("/extended-stay-hotels");return e}},{key:"performReorder",value:function(){if(this.hotelsFiltered=this.$filter("chSearchResults")(this.hotels,this.filters,this.sort,this.params.ratePlanCode),this.featureFlags.SO_SMART_BUBBLE&&(this.resetAmenityTotals(),this.getAmenityTotals(this.hotelsFiltered),this.amenitiesTotals=angular.merge({},this.amenitiesTotals)),this.featureFlags.SO_SMART_BUBBLE&&!this.isExtendedStay()){var e=this.isWoodSpringBannerVisible(this.params)?4:null;this.woodSpringDestination.name&&e&&(this.hotelsFiltered.length<=e&&(e=this.hotelsFiltered.length,this.hotelsFiltered.push({id:"wsBanner",isBanner:!0})),this.hotelsFiltered[e].wsBannerDetails=this.woodSpringDestination,this.hotelsFiltered[e].wsBanner=!0,this.showWoodSpringBanner=!0)}this.hotelsInView=this.$filter("limitTo")(this.hotelsFiltered,this.page*this.resultsToShowPerPage),this.resetPriceFilter()}},{key:"isWoodSpringBannerVisible",value:function(e){var t=this.dateHelper.subtractDates(e.checkOutDate,e.checkInDate);return!!(this.featureFlags.WOODSPRING_BANNER&&t>=5)&&e.adults<=4}},{key:"getDefaultParams",value:function(){return o({priceHigh:this.filters.priceMax,priceLow:this.filters.priceMin},this.searchConst.DEFAULT_PARAMS,this.searchHelper.getDateRange(),this.searchRadiusUsed?{searchRadius:this.searchRadiusUsed}:{})}},{key:"getParamsFromUrl",value:function(e,t){var r=this.urlParserService.getSearchObject(e),n={};return r.brand&&(n.brand=r.brand),r.amenity&&(n.amenity=r.amenity),this.urlParserService.searchPlaceMatchesUrl(t,e,r)||o(n,this.createPlace({placeName:r.zipCode||r.poi||r.stateCountry&&r.city||r.placeName,stateCountry:r.zipCode?null:r.stateCountry})),n}},{key:"initializeParams",value:function(e,t,r){this.setDefaults();var n=this.getDefaultParams(),a=this.getParamsFromUrl(t,e);return this.featureFlags.IWSR_MASTER&&(r=this.searchHelper.transformIwsParams(r)),this.setParams(o({},n,e,a,r,this.urlParserService.getMergedBrandAndAmenityParams(a,r),{view:this.view})),this}},{key:"paginate",value:function(){var e=this;return this.page*this.resultsToShowPerPage<this.hotelsFiltered.length&&(this.page++,this.hotelsInView=this.$filter("limitTo")(this.hotelsFiltered,this.page*this.resultsToShowPerPage),this.trigger("paginate")),this.$timeout((function(){e.iframeLinkHelper.changeDestinationsForIFrame()}),500),this}},{key:"locationRequiresChildAges",value:function(){return!(!Array.isArray(this.hotels)||!this.featureFlags.AMR_MASTER&&!this.featureFlags.AMR_MWEB_MASTER)&&this.hotels.map((function(e){return e&&e.childAgesRequired})).indexOf(!0)>-1}},{key:"resetBrandFilter",value:function(){return this.filters&&this.filters.brand&&delete this.filters.brand,this}},{key:"resetPriceFilter",value:function(){this.filterOnlyByPrice={currencyCode:this.filters.currencyCode,currencyType:this.filters.currencyType,priceHigh:this.filters.priceMax,priceLow:this.filters.priceMin,priceMax:this.filters.priceMax,priceMin:this.filters.priceMin,searchRadius:this.filters.searchRadius},this.hotelsFilteredOnlyByPrice=this.$filter("chSearchResults")(this.hotels,this.filterOnlyByPrice,this.sort,this.params.ratePlanCode),this.filteredHotelPrices=this.searchResultsProcessor.getHotelPriceList(this.hotelsFilteredOnlyByPrice),this.lowestFilteredPrice=this.searchResultsProcessor.getLowestHotelPrice(this.filteredHotelPrices),this.highestFilteredPrice=this.searchResultsProcessor.getHighestHotelPrice(this.filteredHotelPrices),this.resetPriceRange&&(this.filters.priceLow=this.filters.priceMin=this.lowestFilteredPrice,this.filters.priceHigh=this.filters.priceMax=this.highestFilteredPrice,this.resetPriceRange=!1)}},{key:"transformRentalsSearch",value:function(e){var t={},r={city:e.visitAddress.city,country:e.visitAddress.countryCode,line1:e.visitAddress.address1,postalCode:e.visitAddress.zipcode};return t.address=r,t.amenityGroups=[],t.brandCode="",t.brandName="",t.images=e.images,t.region=e.region,t.id=e.resortCode,t.isVR=!0,t}},{key:"search",value:function(){var e=this;return this.updateSearchCriteria(),!this.featureFlags.MW_SEARCH&&this.globalLoaderCounter.inc(),this.searchService.getHotels(o({},this.params,this.place,this.filters)).then(this.extractPlaceFromResults.bind(this)).then((function(t){return e.unfilteredHotels=(t.results.unfilteredHotels||[]).slice(),t})).then((function(t){if(void 0!==t.results.places&&t.results.places.length>0){var r=i(t.results.places,1)[0],n="",a="",s=!1;if(void 0!==t.searchParams&&(n=t.searchParams.brand,a=t.searchParams.amenity,s=t.searchParams.isCurrentLocation),e.featureFlags.EXTENDED_STAY_SERP&&-1!==e.$location.path().indexOf("/extended-stay-hotels"));else if(e.$location.path()!==e.urlParserService.getSearchUrl(r,n,a,s))return e.$q.reject({reason:e.reasonConst.MOVED_PERMANENTLY,redirectLocation:e.urlParserService.getSearchUrl(r,n,a,s)})}return e.hotels=t.results.hotels,e.prerenderService.isRunningInPrerender()&&e.featureFlags.PRERENDER_SERP_SHOWALL_HOTELS&&(e.resultsToShowPerPage=e.hotels.length),e.searchRadiusUsed=e.filters.searchRadius=Number(t.results.searchRadiusUsed),e.amenitiesTotals=t.results.amentiesTotals,e.searchResultsProcessor.process(e),e.filter()})).finally((function(){e.userTriggeredSearchFilter=!1,e.searchCrossSellBannerLocations(),!e.featureFlags.MW_SEARCH&&e.globalLoaderCounter.dec(),e.trigger("search")}))}},{key:"searchCrossSellBannerLocations",value:function(){var e=this;if(this.featureFlags.VACATION_RENTALS_NEW_BANNER_CHCOM&&this.place.lat&&this.place.lon)return this.crossSellGeoSearchService.getDestinations(o({},this.place)).then((function(t){if(t.data&&t.data.destinations)return t.data.destinations.forEach((function(t){t.type===e.hotelConst.BANNER_TYPES.WOOD_SPRING&&(e.woodSpringDestination=t)})),e.hotels.length>0&&e.performReorder(),e}))}},{key:"setDefaults",value:function(){return this.searchRadiusUsed=this.searchService.getDefaultSearchRadius(),this.params=o({adults:this.searchConst.DEFAULT_PARAMS.adults,destinationEntered:null,find:null,minors:this.searchConst.DEFAULT_PARAMS.minors,originalGroupRoomsNumber:this.searchConst.DEFAULT_PARAMS.originalGroupRoomsNumber,originalRoomsNumber:this.searchConst.DEFAULT_PARAMS.originalRoomsNumber,ratePlanCode:this.searchConst.DEFAULT_PARAMS.ratePlanCode,rooms:this.searchConst.DEFAULT_PARAMS.rooms,selectedFromDropDown:"boolean",selectedFromRecentSearch:"boolean",workTravel:this.searchConst.DEFAULT_PARAMS.workTravel},this.searchHelper.getDateRange()),this.featureFlags.AMR_MASTER&&(this.params.ageOfMinors=null),this.place=this.createPlace(),this.filters={coop:null,currencyCode:null,currencyType:"cash"},this.setDefaultFilters(),this.page=1,this.sort=this.searchConst.SORT_OPTIONS.RELEVANCE,this.view=this.$location.search().view||this.searchConst.VIEW_OPTIONS.LIST,this}},{key:"setDefaultFilters",value:function(){return this.filterByDefaultSearchRadius={currencyCode:this.filters.currencyCode,currencyType:this.filters.currencyType,searchRadius:this.searchConst.DEFAULT_PARAMS.searchRadius},this.hotelsFilteredByDefaultSearchRadius=this.$filter("chSearchResults")(this.hotels,this.filterByDefaultSearchRadius,this.sort,this.params.ratePlanCode),this.defaultSearchRadiusHotelList=this.searchResultsProcessor.getHotelPriceList(this.hotelsFilteredByDefaultSearchRadius),this.defaultMin=this.searchResultsProcessor.getLowestHotelPrice(this.defaultSearchRadiusHotelList),this.defaultMax=this.searchResultsProcessor.getHighestHotelPrice(this.defaultSearchRadiusHotelList),this.filters.priceMax=isFinite(this.defaultMax)?this.defaultMax:this.filters.priceMax,this.filters.priceMin=isFinite(this.defaultMin)?this.defaultMin:this.filters.priceMin,o(this.filters,{amenity:this.searchConst.DEFAULT_PARAMS.amenity,brand:this.searchConst.DEFAULT_PARAMS.brand,onlyAvailable:!1,priceHigh:this.filters.priceMax,priceLow:this.filters.priceMin,ratings:null,searchRadius:this.featureFlags.IWSR_MASTER?this.searchService.getDefaultSearchRadius():this.searchConst.DEFAULT_PARAMS.searchRadius}),this}},{key:"setParams",value:function(e){var t=this;if(!e)return this;var r=this.objectHelper.removeEmptyProperties(angular.copy(e));angular.forEach(r,(function(e,n){"string"==typeof e&&(t.searchConst.URL_BOOLEAN_PARAMS_REGEX.test(n)?r[n]=/^(true|1)$/i.test(e):t.searchConst.URL_DECIMAL_PARAMS_REGEX.test(n)?r[n]=isNaN(e)?void 0:Number(e):t.searchConst.URL_INTEGER_PARAMS_REGEX.test(n)&&(r[n]=isNaN(e)?void 0:Math.floor(e)))}));var n=this.dateHelper.getDatesFromTimeFrame(r.timeFrame);if(o(r,n),this.objectHelper.extendExisting(this.params,r),this.objectHelper.extendExisting(this.place,r),this.objectHelper.extendExisting(this.filters,r),r.currentLocation&&(this.params.currentLocation=r.currentLocation),["page","sort","view"].forEach((function(e){r[e]&&(t[e]=r[e])})),r.checkInDate||r.checkOutDate){var a=this.searchHelper.setDefaultsIfInThePast(r),i=a.checkInDate,s=a.checkOutDate;o(this.params,this.searchHelper.getDateRange({checkInDate:i,checkOutDate:s}))}return this.updateUrl()}},{key:"setPlace",value:function(e){return e.currentLocation&&(this.params.currentLocation=!0,delete e.currentLocation),this.place=this.createPlace(e),this}},{key:"validateAndSetDates",value:function(){this.dateHelper.isValidDateFormat(this.params.checkInDate)&&this.dateHelper.isValidDateFormat(this.params.checkOutDate)||o(this.params,this.searchHelper.getDateRange())}},{key:"updateSearchCriteria",value:function(){return this.searchCriteriaData.clear(),this.validateAndSetDates(),this.searchCriteriaData.update(this.objectHelper.filterEquivalentProperties(o({sort:this.sort},this.params,this.place,this.filters),this.getDefaultParams())),this.trigger("update_search_criteria"),this}},{key:"updateFiltersPrices",value:function(){return this.searchResultsProcessor.updatePrices(this),this}},{key:"updateUrl",value:function(){var e=this.$location.search(),t=this.objectHelper.removeEmptyProperties(this.objectHelper.filterProperties(this.objectHelper.filterEquivalentProperties(o({sort:this.sort,view:this.view},this.params,this.place,this.filters),this.getDefaultParams()),this.searchConst.URL_PARAMS_WHITELIST_REGEX+(this.params.currentLocation?this.searchConst.URL_PARAMS_CURRENT_LOCATION_WHITELIST_REGEX:""))),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t=this.updateSearchParams(e,t));return!0===r.currentLocation&&(r.currentLocation="true"),this.$location.search(r).hash("modal"===this.$location.hash()?null:this.$location.hash()).replace(),this.trigger("update_url",t),this}},{key:"updateSearchParams",value:function(e,t){var r=this;return Object.keys(e).forEach((function(n){!t.hasOwnProperty(n)&&r.getDefaultParams().hasOwnProperty(n)&&delete e[n]})),this.urlParserService.removeDuplicateParams(this.$location.path(),o({},this.objectHelper.filterEquivalentProperties(e,this.getDefaultParams()),t))}},{key:"viewHotel",value:function(e){var t=this.hotelsFiltered.findIndex((function(t){return t.id===e}));if(!(-1===t||t<this.page*this.resultsToShowPerPage)){for(;t>=this.page*this.resultsToShowPerPage;)this.page++;this.hotelsInView=this.$filter("limitTo")(this.hotelsFiltered,this.page*this.resultsToShowPerPage),this.trigger("paginate")}}}])&&c(t.prototype,r),s&&c(t,s),e}();r(371)(l),e.exports=l},430:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=t,this.RESORT_SEARCH_API_ENDPOINT="/webapi/destinations/search"}var t,n,a;return e.$inject=["$http"],t=e,(n=[{key:"getDestinations",value:function(e){var t={latitude:e.lat,longitude:e.lon,preferredLanguageCode:"EN",rangeQuery:!1};return this.$http({cache:!1,method:"GET",params:t,url:this.RESORT_SEARCH_API_ENDPOINT}).then((function(e){return e}))}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=n}}]);