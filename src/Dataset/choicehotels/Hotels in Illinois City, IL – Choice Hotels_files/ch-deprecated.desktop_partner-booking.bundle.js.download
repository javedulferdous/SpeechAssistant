(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{349:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=["$http","$locale","$q","dateHelper","featureFlags","localeService","reservationData","siteConfig","subdivisionHelper","urlEncodeObject",function(e,t,n,o,a,i,c,s,u,l){var d="/webapi/reservation",f=r({deviceType:s.deviceType,preferredLocaleCode:t.id},i.getSiteNameObj()),E=r({preferredLocaleCode:t.id},i.getSiteNameObj()),p=r({deviceType:s.deviceType,guestId:"",include:"",loyaltyAccountNumber:"",loyaltyProgramId:"",preferredLocaleCode:t.id},i.getSiteNameObj()),m={};function h(t,r){var o=n.defer();function i(e){o.reject(e.data)}return angular.extend(t,E),a.CANCEL_RESERVATION_MESSAGE&&"/cancel"===r?(i({data:{status:"Error"}}),o.promise):(e({data:l(t),headers:{"content-type":"application/x-www-form-urlencoded"},method:"PUT",url:d+r}).then((function(e){o.resolve(e.data)})).catch(i),o.promise)}function g(t,n,r){e.get("".concat(d,"/summaries"),{cache:!1,params:t}).then(n,r)}return{cancelReservation:function(e){return h(e,"/cancel")},filterCancellations:function(e){return(e||[]).filter((function(e){return!e.cancellationId}))},getPendingReservationUpdates:function(e){return m[e]},getReservation:function(t){var r=n.defer();return angular.extend(f,t),"HOTEL_STAY"===f.searchType&&delete f.confirmOrCancelId,e({data:l(f),headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST",url:d}).then((function(e){u.getAlternateSubdivisionIfAvailable(e.data.hotel),r.resolve(e.data)}),(function(e){r.reject(e.data)})),r.promise},getReservations:function(e,t){var r,a,i,s=n.defer(),u=function(e){c.clear(),s.reject(e.data)},l=t.loyaltyAccount;return l&&l.loyaltyProgramId&&l.loyaltyAccountNumber&&l.guestId?(r=o.asString(o.getTodayDate()),a=o.addDays(r,-e).substr(0,10),i=r,g(angular.extend({},p,{endDate:i,guestId:l.guestId,include:"past_stays, current_reservations",loyaltyAccountNumber:l.loyaltyAccountNumber,loyaltyProgramId:l.loyaltyProgramId,startDate:a}),(function(e){c.update(e.data),s.resolve(e.data)}),u)):u({}),s.promise},getReservationsDetails:function(e,t,r){var a,i,s,u=n.defer(),l=function(e){c.clear(),u.reject(e.data)},d=t.loyaltyAccount;return d&&d.loyaltyProgramId&&d.loyaltyAccountNumber&&d.guestId?(a=o.asString(o.getTodayDate()),i=o.addDays(a,-e).substr(0,10),s=a,g(angular.extend({},p,{endDate:s,guestId:d.guestId,include:r,loyaltyAccountNumber:d.loyaltyAccountNumber,loyaltyProgramId:d.loyaltyProgramId,startDate:i}),(function(e){c.update(e.data),u.resolve(e.data)}),l)):l({}),u.promise},modifyReservation:function(e,t){return h(t,"/".concat(e))},shareReservation:function(t){var r=n.defer();return e({data:l(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",url:"".concat(d,"/share")}).then((function(e){r.resolve(e.data)})).catch((function(e){r.reject(e.data)})),r.promise},storePendingReservationUpdates:function(e,t){if(!angular.isObject(t))throw new Error("pendingUpdates must be an object");m[e]?angular.extend(m[e],t):m[e]=angular.copy(t)}}}]},350:function(e,t){e.exports=["$location","$window","analyticsConst","analyticsManager","cookieHelper","cpUserData","dateHelper","eventsConst","featureFlags","guestdataConst","loyaltyAccountHelper","omniture","omnitureConst","pagesConst","ratesConst","searchConst","searchCriteriaData","strings","travelAgentService",function(e,t,n,r,o,a,i,c,s,u,l,d,f,E,p,m,h,g,v){return{init:function(t){r.initialize(),d.clearPreviousProperties();var n,c=t.reservation,m=h.get();function g(){return c.chargeRouting===u.GROUP_BILLING.GUEST_PAYS}function O(){return c.chargeRouting===u.GROUP_BILLING.PLANNER_PAYS}function y(){return c.chargeRouting===u.GROUP_BILLING.GUEST_PAYS_INCIDENTALS}function A(){return g()||y()||O()}function C(){return c.groupId&&c.ratePlan!==p.RATE_PLAN_CODES.GROUP}function _(){return!0===t.isPartnerBooking}var R=i.getToday("yyMMdd"),P=c.confirmationId&&!_()?c.confirmationId+R:null;function I(){return"SRD"===c.ratePlan?45*T()*N():c.totalBeforeTax}function T(){return i.subtractDates(c.checkOutDate,c.checkInDate)}function N(){return c.rooms.length}A()&&!C()||(n=[c.hotel.brandCode,c.hotel.id,T()*N(),I()].join(";")),"XLY"===c.currencyCode&&(c.currencyCode="USD");var D={ADS_CLICKTHROUGH:o.getCPVisaBannerTypeCookie(),ADS_SERVED:c.chargeRouting,CITY:function(){return[c.hotel.address.city,c.hotel.address.subdivision,c.hotel.address.country].join(", ").toLowerCase()},CLIENT_ID:function(){return c.travelAgentIATANumber&&c.clientId?"".concat(c.travelAgentIATANumber,"|").concat(c.clientId):c.travelAgentIATANumber?"".concat(c.travelAgentIATANumber,"|"):c.clientId?"|".concat(c.clientId):""},CREDIT_CARD_TYPE:c.guest&&c.guest.isVirtualCreditCard?"Virtual Card":c.creditCardTypeName,CURRENCY_CODE:c.currencyCode,DAYS_PRIOR_TO_ARRIVAL:function(){return i.subtractDates(c.checkInDate,i.getTodayDate()).toString()},EVENTS:function(){if(C()&&t.isGroupInviteGuest)return;if(c.enrollingInChoicePrivileges)return function(){if(void 0!==t.autoEnrollErrors&&null!==t.autoEnrollErrors)return t.autoEnrollErrors.INVALID_LOYALTY_ACCOUNT_FOUND_FOR_GUEST||t.autoEnrollErrors.UNEXPECTED_FAILURE_ENROLL_MEMBER||t.autoEnrollErrors.INVALID_LOYALTY_ACCOUNT_EXISTS_FOR_GUEST||t.autoEnrollErrors.UNEXPECTED_FAILURE_GUEST;return!1}()?"purchase":"purchase,event18,event1";if(A()){for(var e=0,n=0;n<c.rooms.length;n++)0===n?e=c.rooms[n].count:e+=c.rooms[n].count;return"event40=".concat(e,":").concat(c.groupId)}if(_()){var r=i.getToday("yyMMdd"),o=c.confirmationId+r,a=N(),s=I(),u="1:".concat(o),l="".concat(a,":").concat(o),d="".concat(s,":").concat(o);return"event57=".concat(u,", event58=").concat(l,", event59=").concat(d)}return"purchase"},GROUP_TRAVEL_TYPE:function(){if(c.eventType)return c.centralGroupModifiable?c.eventType+f.GROUP_CMG_TRUE:c.eventType+f.GROUP_CMG_FALSE},GUEST_COUNTRY:c.guest.address&&c.guest.address.country?c.guest.address.country:null,LENGTH_OF_STAY:T,OCCUPANCY:function(){var e=r.formatChildAgesAnalytics(m.ageOfMinors);return"".concat(m.rooms,":").concat(m.adults,"|").concat(m.minors).concat(e)},PAGE_NAME:function(){return O()||y()||g()?f.PAGE_NAME.CONFIRM_GROUP_BOOKING:C()?t.isGroupInviteGuest?f.PAGE_NAME.SEND_EMAIL_SUCCESS:f.PAGE_NAME.CONFIRM_GROUP_PICKUP:_()?f.PAGE_NAME.CONFIRM_PARTNER_BOOKING:f.PAGE_NAME.CONFIRM},PRODUCTS:n,PROPERTY_BRAND_CODE:c.hotel.brandCode,PROPERTY_CODE:function(){var e="",t=c.rooms.length;if(t>0){for(var n=0;n<t;n++){if(n===t-1){e+=c.rooms[n].roomCode;break}e+="".concat(c.rooms[n].roomCode," ")}return e}},PROPERTY_ID:c.hotelId,PROPERTY_PRODUCT_CODE:c.hotel.productCode,PURCHASE_ID:P,RESERVATION_CHECK_IN_DATE:c.checkInDate,RESERVATION_MULTI_SINGLE_ROOM:c.rooms.length>1?"multi":"single",RESERVATION_TOTAL_ROOM_COUNT:N,SELECTED_RATE_PLAN_CODE:function(){return A()?c.ratePlanCode:c.ratePlan},STATE:function(){return[c.guest.address.subdivision,c.guest.address.country].join(", ")},USER_HASHED_CP_ID:function(){return a.get().hashedCpId},USER_TYPE:function(){var e=v.isLoggedIn(),t=c.enrollingInChoicePrivileges,n=a.get(),r=angular.extend({},c.guest,n),o=l.getEliteLevel(r);if(e)return f.USER_TYPE.TA;if(r.signedIn)return"none"!==o&&(o||!r.cpLoyaltyAccountNumber)||t?t?f.USER_TYPE.ENROLL_CP:o?f.USER_TYPE.LOGGED_IN_ELITE_CP.replace("%",o):f.USER_TYPE.LOGGED_IN:f.USER_TYPE.LOGGED_IN_NON_ELITE_CP;return c.clientId?f.USER_TYPE.CORP:t?f.USER_TYPE.ENROLL_AUTO_CP:o?"none"===o?f.USER_TYPE.CP:"".concat(o," ").concat(f.USER_TYPE.CP):f.USER_TYPE.NON_CP},ZIP:c.guest.address&&c.guest.address.postalCode?c.guest.address.postalCode:null};if("PPC"===c.ratePlan&&angular.extend(D,{ADS_SERVED:f.POINTS_PLUS_CASH,PAGE_NAME:f.PAGE_NAME.CONFIRM_PPC}),c.friendlyAutoEnrollErrors&&angular.extend(D,{ERROR_MESSAGES:c.friendlyAutoEnrollErrors.join("|")}),_()&&(delete D.PRODUCTS,delete D.PURCHASE_ID,(s.CONFIRMATION_PAGE_REACT&&"DESKTOP"===t.$window.siteConfig.deviceType||s.MWEB_CONFIRMATION_PAGE_REACT&&"MOBILE"===t.$window.siteConfig.deviceType)&&angular.extend(D,{CODE_LANG:function(){return f.CODE_LANG}})),e.search().referalReserve){var S={EVENTS:f.MODIFY_RESERVATION_EVENT+c.confirmationId+R,PAGE_NAME:f.PAGE_NAME.MODIFY_RESERVATION_CONFIRMATION};r.setPageDefaults(S,E.CONFIRMATION)}else r.setPageDefaults(D,E.CONFIRMATION)}}}]},376:function(e,t){e.exports=function(){var e={};function t(){Object.keys(e).forEach((function(t){delete e[t]}))}function n(n){t(),angular.extend(e,n)}return window.reservationCheckoutData={update:n},{clear:t,get:function(){return e},update:n}}},377:function(e,t){e.exports={DROPDOWN_ELEMENT:"confirmation-email-in-drop-down",DROPDOWN_TRIGGER:"click",LANGUAGE_CODE:"EN",RESERVATIONSTATUS:{CANCELLED:"Cancelled / Expired",RESERVED:"Reserved"}}},378:function(e,t){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,r,o,a,i,c,s,u,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,{$scope:t,$window:r,checkoutContextData:o,checkoutService:a,pagesConst:i,reactHelper:c,reservationCheckoutData:s,reservationData:u,userActivityDetailsService:l})}var t,o,a;return e.$inject=["$scope","$window","checkoutContextData","checkoutService","pagesConst","reactHelper","reservationCheckoutData","reservationData","userActivityDetailsService"],t=e,(o=[{key:"$onInit",value:function(){var e=this;this.reactHelper.loadReactApp((function(){e.saveUserActivityDetails(),e.$window.featureFlags.MWEB_CONFIRMATION_PAGE_REACT&&"MOBILE"===e.$window.siteConfig.deviceType?e.loadReactConfirmationPageMobile():e.loadReactConfirmationPage()}))}},{key:"saveUserActivityDetails",value:function(){var e=(this.reservation||{}).hotel||{},t=e.brandCode,n=e.id;this.userActivityDetailsService.saveToLocal(this.pagesConst.PROPERTY_PAGE,n,t)}},{key:"loadReactConfirmationPage",value:function(){var e=this.$scope,t=this.$window,n=this.reactHelper,r=t.React,o=t.ConfirmationPage;n.renderToScope(n.generateProviderElement(r.createElement(o)),"#confirmationPage",e)}},{key:"loadReactConfirmationPageMobile",value:function(){var e=this.$scope,t=this.$window,n=this.reactHelper,r=t.React,o=t.ConfirmationPageMobile,a=this.checkoutService.getConfirmation();a&&t.store.dispatch({confirmationData:a,type:"SET_CONFIRMATION_DATA"}),n.renderToScope(n.generateProviderElement(r.createElement(o)),"#confirmationPage",e)}}])&&r(t.prototype,o),a&&r(t,a),e}();e.exports={controller:o,template:'<div id="confirmationPage"></div>'}},379:function(e,t){var n=["$scope","$locale","$timeout","confirmationConst","reservationService",function(e,t,n,r,o){function a(){if(this.confirmationEmailsForm.$valid){var e=document.getElementById(r.DROPDOWN_ELEMENT),a=this.firstEmail&&this.secondEmail?"".concat(this.firstEmail,", ").concat(this.secondEmail):this.firstEmail||this.secondEmail,i={confirmationId:this.reservation.confirmationId,emails:a,lastName:this.reservation.guest.lastName,preferredLocaleCode:t.id};a&&(o.shareReservation(i),this.clearForm(),n((function(){angular.element(e).triggerHandler(r.DROPDOWN_TRIGGER)})))}}e.clearForm=function(){this.firstEmail="",this.secondEmail="",this[this.formName].$setPristine()},e.shareReservation=function(e){e.preventDefault(),angular.bind(this,a)()}}];e.exports=function(){return{controller:n,link:function(e,t,n){e.formName=n.name},restrict:"A",scope:!0}}},380:function(e,t){e.exports=["formHelper","siteConfig",function(e,t){return{controller:["$scope",function(t){t.errorFilter=function(){return e.errorFilter(this.parentForm,this.parentForm[this.name])}}],link:function(e){e.parentForm=e.$parent[e.$parent.formName],e.inputMatch&&(e.parentForm[e.name].$validators.inputMatch=function(t){return t===e.inputMatch}),e.keyUp=function(t){13===t.keyCode&&e.$parent.shareReservation(t)}},replace:!0,restrict:"A",scope:{fieldMember:"@",inputMatch:"=?",label:"@",min:"@?",model:"=",name:"@",password:"@?",pattern:"=?"},templateUrl:"/".concat(t.assetFingerprint,"/app/confirmation/confirmation-email-field.html")}}]},381:function(e,t){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=["$filter","$http","urlEncodeObject",function(e,t,r){function o(e,t){var n="".concat(e,"T").concat(t);return n="".concat(n.split("-").join("").split(":").join(""),"00")}var a=function(t,n){var r=new Date;return r.setHours(t,n),e("date")(r,"h:mm a")};return{generateCalendarFile:function(e,i,c){var s=o(e.checkInDate,e.hotel.checkIn),u=o(e.checkOutDate,e.hotel.checkOut),l=a(e.hotel.checkIn.slice(0,2),e.hotel.checkIn.slice(3)),d=a(e.hotel.checkOut.slice(0,2),e.hotel.checkOut.slice(3)),f={address:e.hotel.address.line1,baseUri:i,checkInTime:l,checkOutTime:d,city:e.hotel.address.city,confirmationId:e.confirmationId,country:e.hotel.address.country,endTimestamp:u,hotelName:e.hotel.name,memberId:escape(e.guest.cpLoyaltyAccountNumber||e.guest.loyaltyAccountNumber),phoneNumber:e.hotel.phone,propertyUrl:c,startTimestamp:s,state:e.hotel.address.subdivision,zip:e.hotel.address.postalCode};t.post("".concat(i,"/webapi/calendar/ics"),r(f),{headers:{Accept:"text/calendar","Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=n(e.headers("content-disposition").split("filename="),2)[1],r=new Blob([e.data],{type:"text/calendar"});r.lastModifiedDate="",r.name=t;var o=r,a=window.URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download=t,i.click()}))}}}]}}]);