!function(n,t,i){function o(n,t){return typeof n===t}function it(){var i,n,u,f,e,s,t;for(var c in h)if(h.hasOwnProperty(c)){if(i=[],n=h[c],n.name&&(i.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(u=0;u<n.options.aliases.length;u++)i.push(n.options.aliases[u].toLowerCase());for(f=o(n.fn,"function")?n.fn():n.fn,e=0;e<i.length;e++)s=i[e],t=s.split("."),1===t.length?r[t[0]]=f:(!r[t[0]]||r[t[0]]instanceof Boolean||(r[t[0]]=new Boolean(r[t[0]])),r[t[0]][t[1]]=f),nt.push((f?"":"no-")+t.join("-"))}}function rt(n){var t=e.className,i=r._config.classPrefix||"",u;(l&&(t=t.baseVal),r._config.enableJSClass)&&(u=new RegExp("(^|\\s)"+i+"no-js(\\s|$)"),t=t.replace(u,"$1"+i+"js$2"));r._config.enableClasses&&(t+=" "+i+n.join(" "+i),l?e.className.baseVal=t:e.className=t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):l?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function ut(){var n=t.body;return n||(n=s(l?"svg":"body"),n.fake=!0),n}function b(n,i,r,u){var o,a,c,v,l="modernizr",h=s("div"),f=ut();if(parseInt(r,10))for(;r--;)c=s("div"),c.id=u?u[r]:l+(r+1),h.appendChild(c);return o=s("style"),o.type="text/css",o.id="s"+l,(f.fake?f:h).appendChild(o),f.appendChild(h),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(t.createTextNode(n)),h.id=l,f.fake&&(f.style.background="",f.style.overflow="hidden",v=e.style.overflow,e.style.overflow="hidden",e.appendChild(f)),a=i(h,n),f.fake?(f.parentNode.removeChild(f),e.style.overflow=v,e.offsetHeight):h.parentNode.removeChild(h),!!a}function ft(n,t){return!!~(""+n).indexOf(t)}function et(n){return n.replace(/([a-z])-([a-z])/g,function(n,t,i){return t+i.toUpperCase()}).replace(/^-/,"")}function ot(n,t){return function(){return n.apply(t,arguments)}}function st(n,t,i){var r;for(var u in n)if(n[u]in t)return i===!1?n[u]:(r=t[n[u]],o(r,"function")?ot(r,i||t):r);return!1}function k(n){return n.replace(/([A-Z])/g,function(n,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function ht(t,i,r){var u,f,e;return"getComputedStyle"in n?(u=getComputedStyle.call(n,t,i),f=n.console,null!==u?r&&(u=u.getPropertyValue(r)):f&&(e=f.error?"error":"log",f[e].call(f,"getComputedStyle returning null, its possible modernizr test results are inaccurate"))):u=!i&&t.currentStyle&&t.currentStyle[r],u}function ct(t,r){var f=t.length,u;if("CSS"in n&&"supports"in n.CSS){for(;f--;)if(n.CSS.supports(k(t[f]),r))return!0;return!1}if("CSSSupportsRule"in n){for(u=[];f--;)u.push("("+k(t[f])+":"+r+")");return u=u.join(" or "),b("@supports ("+u+") { #modernizr { position: absolute; } }",function(n){return"absolute"==ht(n,null,"position")})}return i}function lt(n,t,r,u){function c(){v&&(delete f.style,delete f.modElem)}var l,v,h,y,e,p,a;if((u=o(u,"undefined")?!1:u,!o(r,"undefined"))&&(l=ct(n,r),!o(l,"undefined")))return l;for(a=["modernizr","tspan","samp"];!f.style&&a.length;)v=!0,f.modElem=s(a.shift()),f.style=f.modElem.style;for(y=n.length,h=0;y>h;h++)if(e=n[h],p=f.style[e],ft(e,"-")&&(e=et(e)),f.style[e]!==i){if(u||o(r,"undefined"))return c(),"pfx"==t?e:!0;try{f.style[e]=r}catch(w){}if(f.style[e]!=p)return c(),"pfx"==t?e:!0}return c(),!1}function d(n,t,i,r,u){var f=n.charAt(0).toUpperCase()+n.slice(1),e=(n+" "+y.join(f+" ")+f).split(" ");return o(t,"string")||o(t,"undefined")?lt(e,t,r,u):(e=(n+" "+p.join(f+" ")+f).split(" "),st(e,t,i))}function g(n,t,r){return d(n,i,i,t,r)}var nt=[],h=[],u={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(n,t){var i=this;setTimeout(function(){t(i[n])},0)},addTest:function(n,t,i){h.push({name:n,fn:t,options:i})},addAsyncTest:function(n){h.push({name:null,fn:n})}},r=function(){},c,e,l,tt,v,y,p,w,f,a;for(r.prototype=u,r=new r,c=u._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""],u._prefixes=c,e=t.documentElement,l="svg"===e.nodeName.toLowerCase(),r.addTest("cssgradients",function(){for(var e,i,u,f="background-image:",t="",n=0,o=c.length-1;o>n;n++)u=0===n?"to ":"",t+=f+c[n]+"linear-gradient("+u+"left top, #9f9, white);";return r._config.usePrefixes&&(t+=f+"-webkit-gradient(linear,left top,right bottom,from(#9f9),to(white));"),e=s("a"),i=e.style,i.cssText=t,(""+i.backgroundImage).indexOf("gradient")>-1}),tt=u.testStyles=b,r.addTest("touchevents",function(){var i,r;return"ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch?i=!0:(r=["@media (",c.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join(""),tt(r,function(n){i=9===n.offsetTop})),i}),v="Moz O ms Webkit",y=u._config.usePrefixes?v.split(" "):[],u._cssomPrefixes=y,p=u._config.usePrefixes?v.toLowerCase().split(" "):[],u._domPrefixes=p,w={elem:s("modernizr")},r._q.push(function(){delete w.elem}),f={style:w.elem.style},r._q.unshift(function(){delete f.style}),u.testAllProps=d,u.testAllProps=g,r.addTest("borderradius",g("borderRadius","0px",!0)),r.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),it(),rt(nt),delete u.addTest,delete u.addAsyncTest,a=0;a<r._q.length;a++)r._q[a]();n.Modernizr=r}(window,document),function(n){function t(t){var o=n(this),r=null,u=[],f=null,e=null,i=n.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:n.noop,exit:n.noop,activate:n.noop,deactivate:n.noop,exitMenu:n.noop,rowsContainerSelector:""},t),c=3,l=200,a=function(n){u.push({x:n.pageX,y:n.pageY});u.length>c&&u.shift()},v=function(){e&&clearTimeout(e);i.exitMenu(this)&&(r&&i.deactivate(r),r=null)},y=function(){e&&clearTimeout(e);i.enter(this);h(this)},p=function(){i.exit(this)},w=function(){s(this)},s=function(n){n!=r&&(r&&i.deactivate(r),i.activate(n),r=n)},h=function(n){var t=b();t?e=setTimeout(function(){h(n)},t):s(n)},b=function(){function y(n,t){return(t.y-n.y)/(t.x-n.x)}var h,c;if(!r||!n(r).is(i.submenuSelector))return 0;var a=o.find(i.rowsContainerSelector),t=a.offset(),p={x:t.left,y:t.top-i.tolerance},b={x:t.left+a.outerWidth(),y:p.y},w={x:t.left,y:t.top+a.outerHeight()+i.tolerance},v={x:t.left+a.outerWidth(),y:w.y},s=u[u.length-1],e=u[0];if(!s||(e||(e=s),e.x<t.left||e.x>v.x||e.y<t.top||e.y>v.y)||f&&s.x==f.x&&s.y==f.y)return 0;h=b;c=v;i.submenuDirection=="left"?(h=w,c=p):i.submenuDirection=="below"?(h=v,c=w):i.submenuDirection=="above"&&(h=p,c=b);var k=y(s,h),d=y(s,c),g=y(e,h),nt=y(e,c);return k<g&&d>nt?(f=s,l):(f=null,0)};o.mouseleave(v).find(i.rowSelector).mouseenter(y).mouseleave(p).click(w);n(document).mousemove(a)}n.fn.menuAim=function(n){return this.each(function(){t.call(this,n)}),this}}(jQuery),function(n){"use strict";var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},f={duration:"fast",direction:"both",offsetY:0},i=/^(?:html)$/i,e=function(t,i){i=i||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var u=document.defaultView&&document.defaultView.getComputedStyle?!0:!1,r={top:parseFloat(u?i.borderTopWidth:n.css(t,"borderTopWidth"))||0,left:parseFloat(u?i.borderLeftWidth:n.css(t,"borderLeftWidth"))||0,bottom:parseFloat(u?i.borderBottomWidth:n.css(t,"borderBottomWidth"))||0,right:parseFloat(u?i.borderRightWidth:n.css(t,"borderRightWidth"))||0};return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,vertical:r.top+r.bottom,horizontal:r.left+r.right}},r=function(t){var u=n(window),r=i.test(t[0].nodeName);return{border:r?{top:0,left:0,bottom:0,right:0}:e(t[0]),scroll:{top:(r?u:t).scrollTop(),left:(r?u:t).scrollLeft()},scrollbar:{right:r?0:t.innerWidth()-t[0].clientWidth,bottom:r?0:t.innerHeight()-t[0].clientHeight},rect:function(){var n=t[0].getBoundingClientRect();return{top:r?0:n.top,left:r?0:n.left,bottom:r?t[0].clientHeight:n.bottom,right:r?t[0].clientWidth:n.right}}()}},u={auto:!0,scroll:!0,visible:!1,hidden:!1};n.extend(n.expr[":"],{scrollable:function(n,r,f){var s=t[typeof f[3]=="string"&&f[3].toLowerCase()]||t.both,h=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(n,null):n.currentStyle,e={x:u[h.overflowX.toLowerCase()]||!1,y:u[h.overflowY.toLowerCase()]||!1,isRoot:i.test(n.nodeName)},o;return!e.x&&!e.y&&!e.isRoot?!1:(o={height:{scroll:n.scrollHeight,client:n.clientHeight},width:{scroll:n.scrollWidth,client:n.clientWidth},scrollableX:function(){return(e.x||e.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(e.y||e.isRoot)&&this.height.scroll>this.height.client}},s.y&&o.scrollableY()||s.x&&o.scrollableX())}});n.fn.extend({scrollintoview:function(u){var c,l,s;if(u=n.extend({},f,u),u.direction=t[typeof u.direction=="string"&&u.direction.toLowerCase()]||t.both,c="",u.direction.x===!0&&(c="horizontal"),u.direction.y===!0&&(c=c?"both":"vertical"),l=this.eq(0),s=l.closest(":scrollable("+c+")"),s.length>0){s=s.eq(0);var e={e:r(l),s:r(s)},o={top:e.e.rect.top-(e.s.rect.top+e.s.border.top)+u.offsetY,bottom:e.s.rect.bottom-e.s.border.bottom-e.s.scrollbar.bottom-e.e.rect.bottom+u.offsetY,left:e.e.rect.left-(e.s.rect.left+e.s.border.left),right:e.s.rect.right-e.s.border.right-e.s.scrollbar.right-e.e.rect.right},h={};u.direction.y===!0&&(o.top<0?h.scrollTop=e.s.scroll.top+o.top:o.top>0&&o.bottom<0&&(h.scrollTop=e.s.scroll.top+Math.min(o.top,-o.bottom)));u.direction.x===!0&&(o.left<0?h.scrollLeft=e.s.scroll.left+o.left:o.left>0&&o.right<0&&(h.scrollLeft=e.s.scroll.left+Math.min(o.left,-o.right)));n.isEmptyObject(h)?n.isFunction(u.complete)&&u.complete.call(s[0]):(i.test(s[0].nodeName)&&(s=n("html,body")),s.animate(h,u.duration).eq(0).queue(function(t){n.isFunction(u.complete)&&u.complete.call(s[0]);t()}))}return this}})}(jQuery),function(){var n=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(i){function u(){!n&&this.init&&this.init.apply(this,arguments)}var e=this.prototype,f,r;n=!0;f=new this;n=!1;for(r in i)f[r]=typeof i[r]=="function"&&typeof e[r]=="function"&&t.test(i[r])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(r,i[r]):i[r];return u.prototype=f,u.prototype.constructor=u,u.extend=arguments.callee,u}}(),function(n){"use strict";var t={trace:function(t){n.console!==undefined&&n.console.log("Porthole: "+t)},error:function(t){n.console!==undefined&&n.console.error("Porthole: "+t)}};t.WindowProxy=function(){};t.WindowProxy.prototype={post:function(){},addEventListener:function(){},removeEventListener:function(){}};t.WindowProxyBase=Class.extend({init:function(t){t===undefined&&(t="");this.targetWindowName=t;this.origin=n.location.protocol+"//"+n.location.host;this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return t.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(t,i){i===undefined&&(i="*");this.dispatchMessage({data:t,sourceOrigin:this.getOrigin(),targetOrigin:i,sourceWindowName:n.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(n){return this.eventListeners.push(n),n},removeEventListener:function(n){var t;try{t=this.eventListeners.indexOf(n);this.eventListeners.splice(t,1)}catch(i){this.eventListeners=[]}},dispatchEvent:function(n){for(var t=0;t<this.eventListeners.length;t++)try{this.eventListeners[t](n)}catch(i){}}});t.WindowProxyLegacy=t.WindowProxyBase.extend({init:function(n,t){if(this._super(t),n!==null)this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=n,this.proxyIFrameElement=this.createIFrameProxy();else{this.proxyIFrameElement=null;throw new Error("proxyIFrameUrl can't be null");}},createIFrameProxy:function(){var n=document.createElement("iframe");return n.setAttribute("id",this.proxyIFrameName),n.setAttribute("name",this.proxyIFrameName),n.setAttribute("src",this.proxyIFrameLocation),n.setAttribute("frameBorder","1"),n.setAttribute("scrolling","auto"),n.setAttribute("width",30),n.setAttribute("height",30),n.setAttribute("style","position: absolute; left: -100px; top:0px;"),n.style.setAttribute&&n.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(n),n},dispatchMessage:function(i){var u=n.encodeURIComponent,r;this.proxyIFrameElement&&(r=this.proxyIFrameLocation+"#"+u(t.WindowProxy.serialize(i)),this.proxyIFrameElement.setAttribute("src",r),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100)}});t.WindowProxyHTML5=t.WindowProxyBase.extend({init:function(n,t){this._super(t);this.eventListenerCallback=null},dispatchMessage:function(n){this.getTargetWindow().postMessage(t.WindowProxy.serialize(n),n.targetOrigin)},addEventListener:function(t){if(this.eventListeners.length===0){var i=this;this.eventListenerCallback=function(n){i.eventListener(i,n)};n.addEventListener("message",this.eventListenerCallback,!1)}return this._super(t)},removeEventListener:function(t){this._super(t);this.eventListeners.length===0&&(n.removeEventListener("message",this.eventListenerCallback),this.eventListenerCallback=null)},eventListener:function(n,i){var r=t.WindowProxy.unserialize(i.data);r&&(n.targetWindowName==""||r.sourceWindowName==n.targetWindowName)&&n.dispatchEvent(new t.MessageEvent(r.data,i.origin,n))}});typeof n.postMessage!="function"?(t.trace("Using legacy browser support"),t.WindowProxy=t.WindowProxyLegacy.extend({})):(t.trace("Using built-in browser support"),t.WindowProxy=t.WindowProxyHTML5.extend({}));t.WindowProxy.serialize=function(n){if(typeof JSON=="undefined")throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(n)};t.WindowProxy.unserialize=function(n){if(typeof JSON=="undefined")throw new Error("Porthole unserialization dependens on JSON!");try{var t=JSON.parse(n)}catch(i){return!1}return t};t.WindowProxy.getTargetWindow=function(t){return t===""?top:t==="top"||t==="parent"?n[t]:parent.frames[t]};t.MessageEvent=function(n,t,i){this.data=n;this.origin=t;this.source=i};t.WindowProxyDispatcher={forwardMessageEvent:function(){var i,f=n.decodeURIComponent,u,r;document.location.hash.length>0&&(i=t.WindowProxy.unserialize(f(document.location.hash.substr(1))),u=t.WindowProxy.getTargetWindow(i.targetWindowName),r=t.WindowProxyDispatcher.findWindowProxyObjectInWindow(u,i.sourceWindowName),r?r.origin===i.targetOrigin||i.targetOrigin==="*"?r.dispatchEvent(new t.MessageEvent(i.data,i.sourceOrigin,r)):t.error("Target origin "+r.origin+" does not match desired target of "+i.targetOrigin):t.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(n,t){var i;if(n.RuntimeObject&&(n=n.RuntimeObject()),n)for(i in n)if(n.hasOwnProperty(i))try{if(n[i]!==null&&typeof n[i]=="object"&&n[i]instanceof n.Porthole.WindowProxy&&n[i].getTargetWindowName()===t)return n[i]}catch(r){}return null},start:function(){n.addEventListener?n.addEventListener("resize",t.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?n.attachEvent("onresize",t.WindowProxyDispatcher.forwardMessageEvent):t.error("Cannot attach resize event")}};typeof n.exports!="undefined"?n.exports.Porthole=t:n.Porthole=t}(this);var select2OpenTime=(new Date).getTime();(function(n){typeof n.fn.each2=="undefined"&&n.extend(n.fn,{each2:function(t){for(var i=n([0]),r=-1,u=this.length;++r<u&&(i.context=i[0]=this[r])&&t.call(i[0],r,i)!==!1;);return this}})})(jQuery),function(n,t){"use strict";function tt(t){var i=n(document.createTextNode(""));t.before(i);i.before(t);i.remove()}function c(n){function t(n){return lt[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function e(n,t){for(var i=0,r=t.length;i<r;i=i+1)if(f(n,t[i]))return i;return-1}function at(){var t=n(ct),i;return t.appendTo("body"),i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight},t.remove(),i}function f(n,i){return n===i?!0:n===t||i===t?!1:n===null||i===null?!1:n.constructor===String?n+""==i+"":i.constructor===String?i+""==n+"":!1}function w(t,i){var u,r,f;if(t===null||t.length<1)return[];for(u=t.split(i),r=0,f=u.length;r<f;r=r+1)u[r]=n.trim(u[r]);return u}function it(n){return n.outerWidth(!1)-n.width()}function rt(i){var r="keyup-change-value";i.on("keydown",function(){n.data(i,r)===t&&n.data(i,r,i.val())});i.on("keyup",function(){var u=n.data(i,r);u!==t&&i.val()!==u&&(n.removeData(i,r),i.trigger("keyup-change"))})}function vt(i){i.on("mousemove",function(i){var r=v;(r===t||r.x!==i.pageX||r.y!==i.pageY)&&n(i.target).trigger("mousemove-filtered",i)})}function b(n,i,r){r=r||t;var u;return function(){var t=arguments;window.clearTimeout(u);u=window.setTimeout(function(){i.apply(r,t)},n)}}function yt(n,t){var i=b(n,function(n){t.trigger("scroll-debounced",n)});t.on("scroll",function(n){e(n.target,t.get())>=0&&i(n)})}function pt(n){n[0]!==document.activeElement&&window.setTimeout(function(){var t=n[0],r=n.val().length,i,u;n.focus();u=t.offsetWidth>0||t.offsetHeight>0;u&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(r,r):t.createTextRange&&(i=t.createTextRange(),i.collapse(!1),i.select()))},0)}function wt(t){var i,r,u;return t=n(t)[0],i=0,r=0,"selectionStart"in t?(i=t.selectionStart,r=t.selectionEnd-i):"selection"in document&&(t.focus(),u=document.selection.createRange(),r=document.selection.createRange().text.length,u.moveStart("character",-t.value.length),i=u.text.length-r),{offset:i,length:r}}function r(n){n.preventDefault();n.stopPropagation()}function bt(n){n.preventDefault();n.stopImmediatePropagation()}function kt(t){if(!s){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);s=n(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});s.attr("class","select2-sizer");n("body").append(s)}return s.text(t.val()),s.width()}function a(t,i,r){var u,f=[],e;u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")===0&&f.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")!==0&&(e=r(this),e&&f.push(e))}));t.attr("class",f.join(" "))}function ut(n,t,i,r){var u=c(n.toUpperCase()).indexOf(c(t.toUpperCase())),f=t.length;if(u<0){i.push(r(n));return}i.push(r(n.substring(0,u)));i.push("<span class='select2-match'>");i.push(r(n.substring(u,u+f)));i.push("<\/span>");i.push(r(n.substring(u+f,n.length)))}function ft(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})}function et(i){var f,r=null,e=i.quietMillis||100,o=i.url,u=this;return function(s){window.clearTimeout(f);f=window.setTimeout(function(){var e=i.data,f=o,c=i.transport||n.fn.select2.ajaxDefaults.transport,l={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},h=n.extend({},n.fn.select2.ajaxDefaults.params,l);e=e?e.call(u,s.term,s.page,s.context):null;f=typeof f=="function"?f.call(u,s.term,s.page,s.context):f;r&&typeof r.abort=="function"&&r.abort();i.params&&(n.isFunction(i.params)?n.extend(h,i.params.call(u)):n.extend(h,i.params));n.extend(h,{url:f,dataType:i.dataType,data:e,success:function(n){var t=i.results(n,s.page,s);s.callback(t)},error:function(n,t,i){var r={hasError:!0,jqXHR:n,textStatus:t,errorThrown:i};s.callback(r)}});r=c.call(u,h)},e)}}function ot(t){var i=t,e,u,r=function(n){return""+n.text},f;return n.isArray(i)&&(u=i,i={results:u}),n.isFunction(i)===!1&&(u=i,i=function(){return u}),f=i(),f.text&&(r=f.text,n.isFunction(r)||(e=f.text,r=function(n){return n[e]})),function(t){var u=t.term,e={results:[]},f;if(u===""){t.callback(i());return}f=function(i,e){var o,s;if(i=i[0],i.children){o={};for(s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);o.children=[];n(i.children).each2(function(n,t){f(t,o.children)});(o.children.length||t.matcher(u,r(o),i))&&e.push(o)}else t.matcher(u,r(i),i)&&e.push(i)};n(i().results).each2(function(n,t){f(t,e.results)});t.callback(e)}}function st(i){var r=n.isFunction(i);return function(u){var f=u.term,e={results:[]},o=r?i(u):i;n.isArray(o)&&(n(o).each(function(){var n=this.text!==t,i=n?this.text:this;(f===""||u.matcher(f,i))&&e.results.push(n?this:{id:this,text:this})}),u.callback(e))}}function o(t,i){if(n.isFunction(t))return!0;if(!t)return!1;if(typeof t=="string")return!0;throw new Error(i+" must be a string, function, or falsy value");}function u(t,i){if(n.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(i,r)}return t}function ht(t){var i=0;return n.each(t,function(n,t){t.children?i+=ht(t.children):i++}),i}function dt(n,i,r,u){var a=n,c=!1,e,s,o,h,l;if(!u.createSearchChoice||!u.tokenSeparators||u.tokenSeparators.length<1)return t;for(;;){for(s=-1,o=0,h=u.tokenSeparators.length;o<h;o++)if(l=u.tokenSeparators[o],s=n.indexOf(l),s>=0)break;if(s<0)break;if(e=n.substring(0,s),n=n.substring(s+l.length),e.length>0&&(e=u.createSearchChoice.call(this,e,i),e!==t&&e!==null&&u.id(e)!==t&&u.id(e)!==null)){for(c=!1,o=0,h=i.length;o<h;o++)if(f(u.id(e),u.id(i[o]))){c=!0;break}c||r(e)}}if(a!==n)return n}function k(){var t=this;n.each(arguments,function(n,i){t[i].remove();t[i]=null})}function d(t,i){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=n.extend(r.prototype,i),r}if(window.Select2===t){var l,g,nt,h,s,v={x:0,y:0},y,p,i={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(n){n=n.which?n.which:n;switch(n){case i.LEFT:case i.RIGHT:case i.UP:case i.DOWN:return!0}return!1},isControl:function(n){var t=n.which;switch(t){case i.SHIFT:case i.CTRL:case i.ALT:return!0}return n.metaKey?!0:!1},isFunctionKey:function(n){return n=n.which?n.which:n,n>=112&&n<=123}},ct="<div class='select2-measure-scrollbar'><\/div>",lt={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};y=n(document);h=function(){var n=1;return function(){return n++}}();l=d(Object,{bind:function(n){var t=this;return function(){n.apply(t,arguments)}},init:function(i){var f,e,o=".select2-results",s,c;this.opts=i=this.prepareOpts(i);this.id=i.id;i.element.data("select2")!==t&&i.element.data("select2")!==null&&i.element.data("select2").destroy();this.container=this.createContainer();this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(i.element.attr("id")||"autogen"+h());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",i.element.attr("title"));this.body=n("body");a(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",i.element.attr("style"));this.container.css(u(i.containerCss,this.opts.element));this.container.addClass(u(i.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",r);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(i.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",r);this.results=f=this.container.find(o);this.search=e=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",r);vt(this.results);this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(n){this._touchEvent=!0;this.highlightUnderEvent(n)}));this.dropdown.on("touchmove",o,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}));yt(80,this.results);this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded));n(this.container).on("change",".select2-input",function(n){n.stopPropagation()});n(this.dropdown).on("change",".select2-input",function(n){n.stopPropagation()});n.fn.mousewheel&&f.mousewheel(function(n,t,i,u){var e=f.scrollTop();u>0&&e-u<=0?(f.scrollTop(0),r(n)):u<0&&f.get(0).scrollHeight-f.scrollTop()+u<=f.height()&&(f.scrollTop(f.get(0).scrollHeight-f.height()),r(n))});rt(e);e.on("keyup-change input paste",this.bind(this.updateResults));e.on("focus",function(){e.addClass("select2-focused")});e.on("blur",function(){e.removeClass("select2-focused")});this.dropdown.on("mouseup",o,this.bind(function(t){n(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(n){n.stopPropagation()});this.nextSearchTerm=t;n.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());i.maximumInputLength!==null&&this.search.attr("maxlength",i.maximumInputLength);s=i.element.prop("disabled");s===t&&(s=!1);this.enable(!s);c=i.element.prop("readonly");c===t&&(c=!1);this.readonly(c);p=p||at();this.autofocus=i.element.prop("autofocus");i.element.prop("autofocus",!1);this.autofocus&&this.focus();this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var n=this.opts.element,i=n.data("select2"),r=this;this.close();n.length&&n[0].detachEvent&&n.each(function(){this.detachEvent("onpropertychange",r._sync)});this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null);this._sync=null;i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),n.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?n.attr({tabindex:this.elementTabIndex}):n.removeAttr("tabindex"),n.show());k.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(n){return n.is("option")?{id:n.prop("value"),text:n.text(),element:n.get(),css:n.attr("class"),disabled:n.prop("disabled"),locked:f(n.attr("locked"),"locked")||f(n.data("locked"),!0)}:n.is("optgroup")?{text:n.attr("label"),children:[],element:n.get(),css:n.attr("class")}:void 0},prepareOpts:function(i){var e,o,s,r,u=this;if(e=i.element,e.get(0).tagName.toLowerCase()==="select"&&(this.select=o=i.element),o&&n.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}),i=n.extend({},{populateResults:function(r,f,e){var o,s=this.opts.id,c=this.liveRegion;o=function(r,f,l){var p,nt,v,tt,b,k,a,y,w,d,g;for(r=i.sortResults(r,f,e),g=[],p=0,nt=r.length;p<nt;p=p+1)v=r[p],b=v.disabled===!0,tt=!b&&s(v)!==t,k=v.children&&v.children.length>0,a=n("<li><\/li>"),a.addClass("select2-results-dept-"+l),a.addClass("select2-result"),a.addClass(tt?"select2-result-selectable":"select2-result-unselectable"),b&&a.addClass("select2-disabled"),k&&a.addClass("select2-result-with-children"),a.addClass(u.opts.formatResultCssClass(v)),a.attr("role","presentation"),y=n(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+h()),y.attr("role","option"),d=i.formatResult(v,y,e,u.opts.escapeMarkup),d!==t&&(y.html(d),a.append(y)),k&&(w=n("<ul><\/ul>"),w.addClass("select2-result-sub"),o(v.children,w,l+1),a.append(w)),a.data("select2-data",v),g.push(a[0]);f.append(g);c.text(i.formatMatches(r.length))};o(f,r,0)}},n.fn.select2.defaults,i),typeof i.id!="function"&&(s=i.id,i.id=function(n){return n[s]}),n.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(n){var o={results:[],more:!1},s=n.term,i,r,f;f=function(t,i){var r;t.is("option")?n.matcher(s,t.text(),t)&&i.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(n,t){f(t,r.children)}),r.children.length>0&&i.push(r))};i=e.children();this.getPlaceholder()!==t&&i.length>0&&(r=this.getPlaceholderOption(),r&&(i=i.not(r)));i.each2(function(n,t){f(t,o.results)});n.callback(o)}),i.id=function(n){return n.id}):"query"in i||("ajax"in i?(r=i.element.data("ajax-url"),r&&r.length>0&&(i.ajax.url=r),i.query=et.call(i.element,i.ajax)):"data"in i?i.query=ot(i.data):"tags"in i&&(i.query=st(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:n.trim(t),text:n.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,r){var u=[];n(w(t.val(),i.separator)).each(function(){var r={id:this,text:this},t=i.tags;n.isFunction(t)&&(t=t());n(t).each(function(){if(f(this.id,r.id))return r=this,!1});u.push(r)});r(u)}))),typeof i.query!="function")throw"query function not defined for Select2 "+i.element.attr("id");if(i.createSearchChoicePosition==="top")i.createSearchChoicePosition=function(n,t){n.unshift(t)};else if(i.createSearchChoicePosition==="bottom")i.createSearchChoicePosition=function(n,t){n.push(t)};else if(typeof i.createSearchChoicePosition!="function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i=this.opts.element,r,f=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}));this._sync=this.bind(function(){var r=i.prop("disabled"),n;r===t&&(r=!1);this.enable(!r);n=i.prop("readonly");n===t&&(n=!1);this.readonly(n);a(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(u(this.opts.containerCssClass,this.opts.element));a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(this.opts.dropdownCssClass,this.opts.element))});i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",f._sync)});r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(function(t){n.each(t,f._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=n.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{};t=n.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var n=this._enabled&&!this._readonly,t=!n;return n===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=n,!0)},enable:function(n){(n===t&&(n=!0),this._enabled!==n)&&(this._enabled=n,this.opts.element.prop("disabled",!n),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(n){(n===t&&(n=!1),this._readonly!==n)&&(this._readonly=n,this.opts.element.prop("readonly",n),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,r=this.container.offset(),v=this.container.outerHeight(!1),s=this.container.outerWidth(!1),h=t.outerHeight(!1),e=n(window),d=e.width(),g=e.height(),l=e.scrollLeft()+d,nt=e.scrollTop()+g,a=r.top+v,o=r.left,tt=a+h<=nt,it=r.top-h>=e.scrollTop(),i=t.outerWidth(!1),y=o+i<=l,rt=t.hasClass("select2-drop-above"),w,c,b,f,k;rt?(c=!0,!it&&tt&&(b=!0,c=!1)):(c=!1,!tt&&it&&(b=!0,c=!0));b&&(t.hide(),r=this.container.offset(),v=this.container.outerHeight(!1),s=this.container.outerWidth(!1),h=t.outerHeight(!1),l=e.scrollLeft()+d,nt=e.scrollTop()+g,a=r.top+v,o=r.left,i=t.outerWidth(!1),y=o+i<=l,t.show(),this.focusSearch());this.opts.dropdownAutoWidth?(k=n(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),i=t.outerWidth(!1)+(k.scrollHeight===k.clientHeight?0:p.width),i>s?s=i:i=s,h=t.outerHeight(!1),y=o+i<=l):this.container.removeClass("select2-drop-auto-width");this.body.css("position")!=="static"&&(w=this.body.offset(),a-=w.top,o-=w.left);y||(o=r.left+this.container.outerWidth(!1)-i);f={left:o,width:s};c?(f.top=r.top-h,f.bottom="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(f.top=a,f.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above"));f=n.extend(f,u(this.opts.dropdownCss,this.opts.element));t.css(f)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=n.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;this.opening();y.on("mousemove.select2Event",function(n){v.x=n.pageX;v.y=n.pageY});return!0},opening:function(){var i=this.containerEventName,u="scroll."+i,f="resize."+i,e="orientationchange."+i,t,r;if(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=n("#select2-drop-mask"),t.length==0){t=n(document.createElement("div"));t.attr("id","select2-drop-mask").attr("class","select2-drop-mask");t.hide();t.appendTo(this.body);t.on("mousedown touchstart click",function(i){tt(t);var u=n("#select2-drop"),r;u.length>0&&(r=u.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),i.preventDefault(),i.stopPropagation())})}this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t);n("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");t.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");r=this;this.container.parents().add(window).each(function(){n(this).on(f+" "+u+" "+e,function(){r.opened()&&r.positionDropdown()})});select2OpenTime=(new Date).getTime()},close:function(){var i;if(this.opened()&&(!(n(".touch").length>0)||(i=(new Date).getTime(),!(select2OpenTime>i-1e3)))){var t=this.containerEventName,r="scroll."+t,u="resize."+t,f="orientationchange."+t;this.container.parents().add(window).each(function(){n(this).off(r).off(u).off(f)});this.clearDropdownAlignmentPreference();n("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");y.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(n.Event("select2-close"))}},externalSearch:function(n){this.open();this.search.val(n);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return u(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,e,i,r,u,o,s,f,h;if(i=this.highlight(),!(i<0)){if(i==0){t.scrollTop(0);return}e=this.findHighlightableChoices().find(".select2-result-label");r=n(e[i]);h=(r.offset()||{}).top||0;u=h+r.outerHeight(!0);i===e.length-1&&(f=t.find("li.select2-more-results"),f.length>0&&(u=f.offset().top+f.outerHeight(!0)));o=t.offset().top+t.outerHeight(!0);u>o&&t.scrollTop(t.scrollTop()+(u-o));s=h-t.offset().top;s<0&&r.css("display")!="none"&&t.scrollTop(t.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var r=this.findHighlightableChoices(),i=this.highlight(),f,u,e;i>-1&&i<r.length;)if(i+=t,f=n(r[i]),f.hasClass("select2-result-selectable")&&!f.hasClass("select2-disabled")&&!f.hasClass("select2-selected")){this.highlight(i);u=n(".select2-drop-active:visible .mCSB_container");u.length>0&&(-u.position().top+n(".select2-drop-active:visible").height()<n(r[i]).position().top+15+n(r[i]).height()*2?u.css("top",Math.min(0,n(".select2-drop-active:visible").height()-(n(r[i]).position().top+15+n(r[i]).height()*2))):n(r[i]).position().top<-u.position().top&&u.css("top",Math.min(0,-n(r[i]).position().top)));n(".select2-drop-active:visible .mCSB_dragger").length>0&&(e=n(".select2-drop-active:visible .mCSB_dragger").parent().height()*(-u.position().top/u.height()),n(".select2-drop-active:visible .mCSB_dragger").css("top",e));break}},highlight:function(t){var i=this.findHighlightableChoices(),r,u;if(arguments.length===0)return e(i.filter(".select2-highlighted")[0],i.get());t>=i.length&&(t=i.length-1);t<0&&(t=0);this.removeHighlight();r=n(i[t]);r.addClass("select2-highlighted");this.search.attr("aria-activedescendant",r.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(r.text());u=r.data("select2-data");u&&this.opts.element.trigger({type:"select2-highlight",val:this.id(u),choice:u})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=n(t.target).closest(".select2-result-selectable"),r;i.length>0&&!i.is(".select2-highlighted")?(r=this.findHighlightableChoices(),this.highlight(r.index(i))):i.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),f,r=this.resultsPage+1,n=this,e=this.search.val(),o=this.context;i.length!==0&&(f=i.offset().top-t.offset().top-t.height(),f<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:e,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(f){if(n.opened()){var s=t;t.find(".mCSB_container").length>0&&(s=t.find(".mCSB_container"));n.opts.populateResults.call(this,s,f.results,{term:e,page:r,context:o});n.postprocessResults(f,!1,!1);f.more===!0?(i.detach().appendTo(s).text(u(n.opts.formatLoadMore,n.opts.element,r+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove();n.positionDropdown();n.resultsPage=r;n.context=f.context;this.opts.element.trigger({type:"select2-loaded",items:f})}})})))},tokenize:function(){},updateResults:function(i){function b(){e.removeClass("select2-active");s.positionDropdown();h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?s.liveRegion.text(h.text()):s.liveRegion.text(s.opts.formatMatches(h.find(".select2-result-selectable").length))}function c(n){h.html(n);b()}var e=this.search,h=this.results,r=this.opts,v,s=this,l,y=e.val(),p=n.data(this.container,"select2-last-term"),w,a;if((i===!0||!p||!f(y,p))&&(n.data(this.container,"select2-last-term",y),i===!0||this.showSearchInput!==!1&&this.opened())){if(w=++this.queryCount,a=this.getMaximumSelectionSize(),a>=1&&(v=this.data(),n.isArray(v)&&v.length>=a&&o(r.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+u(r.formatSelectionTooBig,r.element,a)+"<\/li>");return}if(e.val().length<r.minimumInputLength){o(r.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+u(r.formatInputTooShort,r.element,e.val(),r.minimumInputLength)+"<\/li>"):c("");i&&this.showSearch&&this.showSearch(!0);return}if(r.maximumInputLength&&e.val().length>r.maximumInputLength){o(r.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+u(r.formatInputTooLong,r.element,e.val(),r.maximumInputLength)+"<\/li>"):c("");return}r.formatSearching&&this.findHighlightableChoices().length===0&&c("<li class='select2-searching'>"+u(r.formatSearching,r.element)+"<\/li>");e.addClass("select2-active");this.removeHighlight();l=this.tokenize();l!=t&&l!=null&&e.val(l);this.resultsPage=1;r.query({element:r.element,term:e.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(l){var a,v;if(w==this.queryCount){if(!this.opened()){this.search.removeClass("select2-active");return}if(l.hasError!==t&&o(r.formatAjaxError,"formatAjaxError")){c("<li class='select2-ajax-error'>"+u(r.formatAjaxError,r.element,l.jqXHR,l.textStatus,l.errorThrown)+"<\/li>");return}if(this.context=l.context===t?null:l.context,this.opts.createSearchChoice&&e.val()!==""&&(a=this.opts.createSearchChoice.call(s,e.val(),l.results),a!==t&&a!==null&&s.id(a)!==t&&s.id(a)!==null&&n(l.results).filter(function(){return f(s.id(this),s.id(a))}).length===0&&this.opts.createSearchChoicePosition(l.results,a)),l.results.length===0&&o(r.formatNoMatches,"formatNoMatches")){c("<li class='select2-no-results'>"+u(r.formatNoMatches,r.element,e.val())+"<\/li>");return}h.find("li").each(function(){n(this).remove()});v=h;h.find(".mCSB_container").length>0&&(v=h.find(".mCSB_container"));s.opts.populateResults.call(this,v,l.results,{term:e.val(),page:this.resultsPage,context:null});l.more===!0&&o(r.formatLoadMore,"formatLoadMore")&&(v.append("<li class='select2-more-results'>"+r.escapeMarkup(u(r.formatLoadMore,r.element,this.resultsPage))+"<\/li>"),window.setTimeout(function(){s.loadMoreIfNeeded()},10));this.postprocessResults(l,i);b();this.opts.element.trigger({type:"select2-loaded",items:l})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){pt(this.search)},selectHighlighted:function(n){if(this._touchMoved){this.clearTouchMoved();return}var i=this.highlight(),r=this.results.find(".select2-highlighted"),t=r.closest(".select2-result").data("select2-data");if(t){this.highlight(i);this.onSelect(t,n)}else n&&n.noFocus&&this.close()},getPlaceholder:function(){var n;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((n=this.getPlaceholderOption())!==t?n.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&i||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(n.trim(i.text())===""&&i.val()==="")return i}},initContainerWidth:function(){function r(){var i,f,u,r,e,o;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){if(i=this.opts.element.attr("style"),i!==t)for(f=i.split(";"),r=0,e=f.length;r<e;r=r+1)if(o=f[r].replace(/\s/g,""),u=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),u!==null&&u.length>=1)return u[1];return this.opts.width==="resolve"?(i=this.opts.element.css("width"),i.indexOf("%")>0)?i:this.opts.element.outerWidth(!1)===0?"100%":this.opts.element.outerWidth(!1)+"px":null}return n.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=r.call(this);i!==null&&this.container.css("width",i)}});g=d(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&#160;<\/span><abbr class='select2-search-choice-close'><\/abbr>   <span class='select2-arrow' role='presentation'><b role='presentation'><\/b><\/span><\/a><label for='' class='select2-offscreen'><\/label><input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' /><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <label for='' class='select2-offscreen'><\/label>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'       aria-autocomplete='list' />   <\/div>   <ul class='select2-results' role='listbox'>   <\/ul><\/div>")},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,r,u;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0);this.parent.opening.apply(this,arguments);this.showSearchInput!==!1&&this.search.val(this.focusser.val());this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(r=i.createTextRange(),r.collapse(!1),r.select()):i.setSelectionRange&&(u=this.search.val().length,i.setSelectionRange(u,u)));this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",!1);this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){n("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);k.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,s=this.dropdown,u=h(),f,o;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0);this.selection=t=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+u);this.focusser.attr("aria-labelledby","select2-chosen-"+u);this.results.attr("id","select2-results-"+u);this.search.attr("aria-owns","select2-results-"+u);this.focusser.attr("id","s2id_autogen"+u);f=n("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(f.text()).attr("for",this.focusser.attr("id"));o=this.opts.element.attr("title");this.opts.element.attr("title",o||f.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(n("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&229!=n.keyCode){if(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN){r(n);return}switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});return;case i.ESC:this.cancel(n);r(n);return}}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.ESC){if(this.opts.openOnEnter===!1&&n.which===i.ENTER){this.container.parents("form").find(".HiddenSubmit").click();r(n);return}if(n.which==i.DOWN||n.which==i.UP||n.which==i.ENTER&&this.opts.openOnEnter){if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return;this.open();r(n);return}if(n.which==i.DELETE||n.which==i.BACKSPACE){this.opts.allowClear&&this.clear();r(n);return}}}));rt(this.focusser);this.focusser.on("keyup-change input",this.bind(function(n){if(this.opts.minimumResultsForSearch>=0){if(n.stopPropagation(),this.opened())return;this.open()}}));t.on("mousedown touchstart","abbr",this.bind(function(n){this.isInterfaceEnabled()&&(this.clear(),bt(n),this.close(),this.selection.focus())}));t.on("mousedown touchstart",this.bind(function(i){tt(t);this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();r(i)}));s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()}));t.on("focus",this.bind(function(n){r(n)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(n.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data"),r,u;if(i){if(r=n.Event("select2-clearing"),this.opts.element.trigger(r),r.isDefaultPrevented())return;u=this.getPlaceholderOption();this.opts.element.val(u?u.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){var n;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.setPlaceholder(),n.nextSearchTerm=n.opts.nextSearchTerm(i,n.search.val()))}))},isPlaceholderOptionSelected:function(){var n;return this.getPlaceholder()===t?!1:(n=this.getPlaceholderOption())!==t&&n.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=n.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=i.val(),u=null;t.query({matcher:function(n,i,r){var o=f(e,t.id(r));return o&&(u=r),o},callback:n.isFunction(r)?function(){r(u)}:n.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var n=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&n!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(n));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(n,t,i){var r=0,e=this,u;this.findHighlightableChoices().each2(function(n,t){if(f(e.id(t.data("select2-data")),e.opts.element.val()))return r=n,!1});i!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));t===!0&&(u=this.opts.minimumResultsForSearch,u>=0&&this.showSearch(ht(n.results)>=u))},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),n(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(n,t){if(this.triggerSelect(n)){var i=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(n));this.updateSelection(n);this.opts.element.trigger({type:"select2-selected",val:this.id(n),choice:n});this.nextSearchTerm=this.opts.nextSearchTerm(n,this.search.val());this.close();t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus();f(i,this.id(n))||this.triggerChange({added:n,removed:r})}},updateSelection:function(n){var i=this.selection.find(".select2-chosen"),r,u;this.selection.data("select2-data",n);i.empty();n!==null&&(r=this.opts.formatSelection(n,i,this.opts.escapeMarkup));r!==t&&i.append(r);u=this.opts.formatSelectionCssClass(n,i);u!==t&&i.addClass(u);this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var i,r=!1,u=null,n=this,f=this.data();if(arguments.length===0)return this.opts.element.val();if(i=arguments[0],arguments.length>1&&(r=arguments[1]),this.select)this.select.val(i).find("option").filter(function(){return this.selected}).each2(function(t,i){return u=n.optionToData(i),!1}),this.updateSelection(u),this.setPlaceholder(),r&&this.triggerChange({added:u,removed:f});else{if(!i&&i!==0){this.clear(r);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(i);this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):"");n.updateSelection(t);n.setPlaceholder();r&&n.triggerChange({added:t,removed:f})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(n){var i,r=!1;if(arguments.length===0)return i=this.selection.data("select2-data"),i==t&&(i=null),i;arguments.length>1&&(r=arguments[1]);n?(i=this.data(),this.opts.element.val(n?this.id(n):""),this.updateSelection(n),r&&this.triggerChange({added:n,removed:i})):this.clear(r)}});nt=d(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <label for='' class='select2-offscreen'><\/label>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  <\/li><\/ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   <\/ul><\/div>")},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=[];n.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(n,t){r.push(i.optionToData(t))});t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=w(i.val(),t.separator),u=[];t.query({matcher:function(i,r,o){var s=n.grep(e,function(n){return f(n,t.id(o))}).length;return s&&u.push(o),s},callback:n.isFunction(r)?function(){for(var h,n,o,s=[],i=0;i<e.length;i++)for(h=e[i],n=0;n<u.length;n++)if(o=u[n],f(h,t.id(o))){s.push(o);u.splice(n,1);break}r(s)}:n.noop})}),t},selectChoice:function(n){var t=this.container.find(".select2-search-choice-focus");t.length&&n&&n[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),n&&n.length&&(this.close(),n.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",n)))},destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);k.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",u,f;this.searchContainer=this.container.find(".select2-search-field");this.selection=u=this.container.find(t);f=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){f.search[0].focus();f.selectChoice(n(this))});this.search.attr("id","s2id_autogen"+h());this.search.prev().text(n("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&this.search.val().length==0||this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(n){var t;if(this.isInterfaceEnabled()){++this.keydowns;var f=u.find(".select2-search-choice-focus"),o=f.prev(".select2-search-choice:not(.select2-locked)"),e=f.next(".select2-search-choice:not(.select2-locked)"),s=wt(this.search);if(f.length&&(n.which==i.LEFT||n.which==i.RIGHT||n.which==i.BACKSPACE||n.which==i.DELETE||n.which==i.ENTER)){t=f;n.which==i.LEFT&&o.length?t=o:n.which==i.RIGHT?t=e.length?e:null:n.which===i.BACKSPACE?this.unselect(f.first())&&(this.search.width(10),t=o.length?o:e):n.which==i.DELETE?this.unselect(f.first())&&(this.search.width(10),t=e.length?e:null):n.which==i.ENTER&&(t=null);this.selectChoice(t);r(n);t&&t.length||this.open();return}if((n.which!==i.BACKSPACE||this.keydowns!=1)&&n.which!=i.LEFT||s.offset!=0||s.length)this.selectChoice(null);else{this.selectChoice(u.find(".select2-search-choice:not(.select2-locked)").last());r(n);return}if(this.opened())switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});this.close();return;case i.ESC:this.cancel(n);r(n);return}if(n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.BACKSPACE&&n.which!==i.ESC){if(n.which===i.ENTER){if(this.opts.openOnEnter===!1)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open();(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN)&&r(n);n.which===i.ENTER&&r(n)}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();t.stopImmediatePropagation();this.opts.element.trigger(n.Event("select2-blur"))}));this.container.on("click",t,this.bind(function(t){this.isInterfaceEnabled()&&(n(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}));this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var n;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());(this.select||this.opts.element.val()!=="")&&(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.clearSearch())}))},clearSearch:function(){var n=this.getPlaceholder(),i=this.getMaxSearchWidth();n!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(n).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select());this.updateResults(!0);this.opts.shouldFocusInput(this)&&this.search.focus();this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var r=[],u=[],i=this;n(t).each(function(){e(i.id(this),r)<0&&(r.push(i.id(this)),u.push(this))});t=u;this.selection.find(".select2-search-choice").remove();n(t).each(function(){i.addSelectedChoice(this)});i.postprocessResults()},tokenize:function(){var n=this.search.val();n=this.opts.tokenizer.call(this,n,this.data(),this.bind(this.onSelect),this.opts);n!=null&&n!=t&&(this.search.val(n),n.length>0&&this.open())},onSelect:function(n,i){this.triggerSelect(n)&&n.text!==""&&(this.addSelectedChoice(n),this.opts.element.trigger({type:"selected",val:this.id(n),choice:n}),this.nextSearchTerm=this.opts.nextSearchTerm(n,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(n,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:n}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(i){var o=!i.locked,h=n("<li class='select2-search-choice'>    <div><\/div>    <a href='#' class='select2-search-choice-close' tabindex='-1'><\/a><\/li>"),c=n("<li class='select2-search-choice select2-locked'><div><\/div><\/li>"),u=o?h:c,l=this.id(i),s=this.getVal(),f,e;if(f=this.opts.formatSelection(i,u.find("div"),this.opts.escapeMarkup),f!=t&&u.find("div").replaceWith("<div>"+f+"<\/div>"),e=this.opts.formatSelectionCssClass(i,u.find("div")),e!=t&&u.addClass(e),o)u.find(".select2-search-choice-close").on("mousedown",r).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(n(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),r(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));u.data("select2-data",i);u.insertBefore(this.searchContainer);s.push(l);this.setVal(s)},unselect:function(t){var u=this.getVal(),i,f,r;if(t=t.closest(".select2-search-choice"),t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data"),i){if(r=n.Event("select2-removing"),r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;while((f=e(this.id(i),u))>=0)u.splice(f,1),this.setVal(u),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(n,t,i){var s=this.getVal(),f=this.results.find(".select2-result"),h=this.results.find(".select2-result-with-children"),r=this;f.each2(function(n,t){var i=r.id(t.data("select2-data"));e(i,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))});h.each2(function(n,t){t.is(".select2-result-selectable")||t.find(".select2-result-selectable:not(.select2-selected)").length!==0||t.addClass("select2-selected")});this.highlight()==-1&&i!==!1&&r.highlight(0);!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(n&&(!n||n.more||this.results.find(".select2-no-results").length!==0)||o(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+u(r.opts.formatNoMatches,r.opts.element,r.search.val())+"<\/li>"))},getMaxSearchWidth:function(){return this.selection.width()-it(this.search)},resizeSearch:function(){var i,u,t,f,n,r=it(this.search);i=kt(this.search)+10;u=this.search.offset().left;t=this.selection.width();f=this.selection.offset().left;n=t-(u-f)-r;n<i&&(n=t-r);n<40&&(n=t-r);n<=0&&(n=i);this.search.width(Math.floor(n))},getVal:function(){var n;return this.select?(n=this.select.val(),n===null?[]:n):(n=this.opts.element.val(),w(n,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],n(t).each(function(){e(this,i)<0&&i.push(this)}),this.opts.element.val(i.length===0?"":i.join(this.opts.separator)))},buildChangeDetails:function(n,t){for(var r,t=t.slice(0),n=n.slice(0),i=0;i<t.length;i++)for(r=0;r<n.length;r++)f(this.opts.id(t[i]),this.opts.id(n[r]))&&(t.splice(i,1),i>0&&i--,n.splice(r,1),r--);return{added:t,removed:n}},val:function(i,r){var f,u=this;if(arguments.length===0)return this.getVal();if(f=this.data(),f.length||(f=[]),!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();r&&this.triggerChange({added:this.data(),removed:f});return}if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(f,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=n.map(t,u.id);u.setVal(i);u.updateSelection(t);u.clearSearch();r&&u.triggerChange(u.buildChangeDetails(f,u.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(n(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t,i){var f=this,r,u;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return n(this).data("select2-data")}).get();u=this.data();t||(t=[]);r=n.map(t,function(n){return f.opts.id(n)});this.setVal(r);this.updateSelection(t);this.clearSearch();i&&this.triggerChange(this.buildChangeDetails(u,this.data()))}});n.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),r,u,f,o,s,c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],a=["val","data"],h={search:"externalSearch"};return this.each(function(){if(i.length===0||typeof i[0]=="object")r=i.length===0?{}:n.extend({},i[0]),r.element=n(this),r.element.get(0).tagName.toLowerCase()==="select"?s=r.element.prop("multiple"):(s=r.multiple||!1,"tags"in r&&(r.multiple=s=!0)),u=s?new window.Select2["class"].multi:new window.Select2["class"].single,u.init(r);else if(typeof i[0]=="string"){if(e(i[0],c)<0)throw"Unknown method: "+i[0];if(o=t,u=n(this).data("select2"),u===t)return;if(f=i[0],f==="container"?o=u.container:f==="dropdown"?o=u.dropdown:(h[f]&&(f=h[f]),o=u[f].apply(u,i.slice(1))),e(i[0],l)>=0||e(i[0],a)>=0&&i.length==1)return!1}else throw"Invalid arguments to select2 plugin: "+i;}),o===t?this:o};n.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(n,t,i,r){var u=[];return ut(n.text,i.term,u,r),u.join("")},formatSelection:function(n,i,r){return n?r(n.text):t},sortResults:function(n){return n},formatResultCssClass:function(n){return n.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(n){return n==t?null:n.id},matcher:function(n,t){return c(""+t).toUpperCase().indexOf(c(""+n).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:dt,escapeMarkup:ft,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(n){return n},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(n){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t?n.opts.minimumResultsForSearch<0?!1:!0:!0}};n.fn.select2.locales=[];n.fn.select2.locales.en={formatMatches:function(n){return n===1?"One result is available, press enter to select it.":n+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(n,t){var i=t-n.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},formatInputTooLong:function(n,t){var i=n.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},formatSelectionTooBig:function(n){return"You can only select "+n+" item"+(n==1?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}};n.extend(n.fn.select2.defaults,n.fn.select2.locales.en);n.fn.select2.ajaxDefaults={transport:n.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:et,local:ot,tags:st},util:{debounce:b,markMatch:ut,escapeMarkup:ft,stripDiacritics:c},"class":{abstract:l,single:g,multi:nt}};n(window).scroll(b(100,function(){n(".select2-container.select2-dropdown-open").select2("close")}))}}(jQuery),function(n){function e(t,i){var s=t.data("jqae"),u,e,c;s||(s={});u=s.wrapperElement;u||(u=t.wrapInner("<div/>").find(">div"),u.css({margin:0,padding:0,border:0}));e=u.data("jqae");e||(e={});c=e.originalContent;c?u=e.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(u):u.data("jqae",{originalContent:u.clone(!0)});t.data("jqae",{wrapperElement:u,containerWidth:t.width(),containerHeight:t.height()});var l=t.height(),a=(parseInt(t.css("padding-top"),10)||0)+(parseInt(t.css("border-top-width"),10)||0)-(u.offset().top-t.offset().top),o=!1,v=u;i.selector&&(v=n(u.find(i.selector).get().reverse()));v.each(function(){var t=n(this),s=t.text(),e=!1;if(u.innerHeight()-t.innerHeight()>l+a)t.remove();else if(f(t),t.contents().length){for(o&&(r(t).get(0).nodeValue+=i.ellipsis,o=!1);u.innerHeight()>l+a;)if(e=h(t),e)if(f(t),t.contents().length)r(t).get(0).nodeValue+=i.ellipsis;else{o=!0;t.remove();break}else{o=!0;t.remove();break}i.setTitle=="onEllipsis"&&e||i.setTitle=="always"?t.attr("title",s):i.setTitle!="never"&&t.removeAttr("title")}})}function h(t){var u=r(t),i,f;return u.length?(i=u.get(0).nodeValue,f=i.lastIndexOf(" "),f>-1?(i=n.trim(i.substring(0,f)),u.get(0).nodeValue=i):u.get(0).nodeValue="",!0):!1}function r(n){var i,t;return n.contents().length?(t=n.contents(),i=t.eq(t.length-1),i.filter(o).length?i:r(i)):(n.append(""),t=n.contents(),t.eq(t.length-1))}function f(t){var u,i,r;if(t.contents().length){if(u=t.contents(),i=u.eq(u.length-1),i.filter(o).length)return r=i.get(0).nodeValue,r=n.trim(r),r==""?(i.remove(),!0):!1;while(f(i));return i.contents().length?!1:(i.remove(),!0)}return!1}function o(){return this.nodeType===3}function c(n,r){t[n]=r;i||(i=window.setInterval(function(){a()},200))}function l(n){t[n]&&(delete t[n],t.length||i&&(window.clearInterval(i),i=undefined))}function a(){if(!u){u=!0;for(var i in t)n(i).each(function(){var r,u;r=n(this);u=r.data("jqae");(u.containerWidth!=r.width()||u.containerHeight!=r.height())&&e(r,t[i])});u=!1}}var t={},i,u=!1,s={ellipsis:"...",setTitle:"never",live:!1};n.fn.ellipsis=function(t,i){var u,r;return u=n(this),typeof t!="string"&&(i=t,t=undefined),r=n.extend({},s,i),r.selector=t,u.each(function(){var t=n(this);e(t,r)}),r.live?c(u.selector,r):l(u.selector),this}}(jQuery);!function(n,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(n.angular)}(this,function(n){"use strict";var t=n.module("rzModule",[]).value("throttle",function(n,t,i){var r,u,o,s=Date.now||function(){return(new Date).getTime()},f=null,e=0,h;return i=i||{},h=function(){e=i.leading===!1?0:s();f=null;o=n.apply(r,u);r=u=null},function(){var c=s(),l;return e||i.leading!==!1||(e=c),l=t-(c-e),r=this,u=arguments,0>=l?(clearTimeout(f),f=null,e=c,o=n.apply(r,u),r=u=null):f||i.trailing===!1||(f=setTimeout(h,l)),o}}).factory("RzSlider",["$timeout","$document","$window","throttle",function(t,i,r,u){var f=function(n,t,i){this.scope=n;this.attributes=i;this.sliderElem=t;this.range=void 0!==i.rzSliderHigh&&void 0!==i.rzSliderModel;this.dragRange=this.range&&"true"===i.rzSliderDraggableRange;this.dragging={active:!1,value:0,difference:0,offset:0,lowDist:0,highDist:0};this.handleHalfWidth=0;this.alwaysShowBar=!!i.rzSliderAlwaysShowBar;this.maxLeft=0;this.precision=0;this.step=0;this.tracking="";this.minValue=0;this.maxValue=0;this.hideLimitLabels=!!i.rzSliderHideLimitLabels;this.presentOnly="true"===i.rzSliderPresentOnly;this.showTicks=i.rzSliderShowTicks||i.rzSliderShowTicksValue;this.showTicksValue=i.rzSliderShowTicksValue;this.disabled=this.scope.rzSliderDisabled;this.interval=null!==this.scope.rzSliderInterval?this.scope.rzSliderInterval:350;this.valueRange=0;this.initHasRun=!1;this.customTrFn=this.scope.rzSliderTranslate()||function(n){return String(n)};this.deRegFuncs=[];this.fullBar=null;this.selBar=null;this.minH=null;this.maxH=null;this.flrLab=null;this.ceilLab=null;this.minLab=null;this.maxLab=null;this.cmbLab=null;this.ticks=null;this.init()};return f.prototype={init:function(){var e,o,f,s=n.bind(this,this.calcViewDimensions),i=this;this.initElemHandles();this.addAccessibility();this.setDisabledState();this.calcViewDimensions();this.setMinAndMax();this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision;this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep;t(function(){i.updateCeilLab();i.updateFloorLab();i.initHandles();i.bindEvents()});f=this.scope.$on("reCalcViewDimensions",s);this.deRegFuncs.push(f);n.element(r).on("resize",s);this.initHasRun=!0;e=u(function(){i.setMinAndMax();i.updateLowHandle(i.valueToOffset(i.scope.rzSliderModel));i.updateSelectionBar();i.updateTicksScale();i.range&&i.updateCmbLabel()},i.interval);o=u(function(){i.setMinAndMax();i.updateHighHandle(i.valueToOffset(i.scope.rzSliderHigh));i.updateSelectionBar();i.updateTicksScale();i.updateCmbLabel()},i.interval);this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue();e();i.range&&o();i.resetSlider()});f=this.scope.$watch("rzSliderModel",function(n,t){n!==t&&e()});this.deRegFuncs.push(f);f=this.scope.$watch("rzSliderHigh",function(n,t){n!==t&&o()});this.deRegFuncs.push(f);this.scope.$watch("rzSliderFloor",function(n,t){n!==t&&i.resetSlider()});this.deRegFuncs.push(f);f=this.scope.$watch("rzSliderCeil",function(n,t){n!==t&&i.resetSlider()});this.deRegFuncs.push(f);f=this.scope.$watch("rzSliderShowTicks",function(n,t){n!==t&&i.resetSlider()});this.deRegFuncs.push(f);f=this.scope.$watch("rzSliderShowTicksValue",function(n,t){n!==t&&i.resetSlider()});this.deRegFuncs.push(f);f=this.scope.$watch("rzSliderDisabled",function(n,t){n!==t&&(i.resetSlider(),i.disabled?i.unbindEvents():i.bindEvents())});this.deRegFuncs.push(f);this.scope.$on("$destroy",function(){i.unbindEvents();n.element(r).off("resize",s);i.deRegFuncs.map(function(n){n()})})},resetSlider:function(){this.setMinAndMax();this.updateCeilLab();this.updateFloorLab();this.setDisabledState();this.calcViewDimensions()},setDisabledState:function(){this.disabled=this.scope.rzSliderDisabled;this.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0;this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel));this.range&&this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh));this.updateSelectionBar();this.range&&this.updateCmbLabel();this.updateTicksScale()},translateFn:function(n,t,i){i=void 0===i?!0:i;var r=(i?this.customTrFn(n):n).toString(),u=!1;(void 0===t.rzsv||t.rzsv.length!==r.length||t.rzsv.length>0&&0===t.rzsw)&&(u=!0,t.rzsv=r);t.text(r);u&&this.getWidth(t)},setMinAndMax:function(){this.minValue=this.scope.rzSliderFloor?+this.scope.rzSliderFloor:this.scope.rzSliderFloor=0;this.maxValue=this.scope.rzSliderCeil?+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel;this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep);this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){n.forEach(this.sliderElem.children(),function(t,i){var r=n.element(t);switch(i){case 0:this.fullBar=r;break;case 1:this.selBar=r;break;case 2:this.minH=r;break;case 3:this.maxH=r;break;case 4:this.flrLab=r;break;case 5:this.ceilLab=r;break;case 6:this.minLab=r;break;case 7:this.maxLab=r;break;case 8:this.cmbLab=r;break;case 9:this.ticks=r}},this);this.selBar.rzsl=0;this.minH.rzsl=0;this.maxH.rzsl=0;this.flrLab.rzsl=0;this.ceilLab.rzsl=0;this.minLab.rzsl=0;this.maxLab.rzsl=0;this.cmbLab.rzsl=0;this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab));this.showTicksValue&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.minLab.rzAlwaysHide=!0,this.maxLab.rzAlwaysHide=!0,this.cmbLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.hideEl(this.cmbLab));this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH));this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove());this.dragRange&&(this.selBar.css("cursor","move"),this.selBar.addClass("rz-draggable"))},addAccessibility:function(){this.sliderElem.attr("role","slider")},calcViewDimensions:function(){var n=this.getWidth(this.minH);this.handleHalfWidth=n/2;this.barWidth=this.getWidth(this.fullBar);this.maxLeft=this.barWidth-n;this.getWidth(this.sliderElem);this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left;this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles())},updateTicksScale:function(){var i,r;if(this.showTicks&&this.step){for(var n="",u=Math.round((this.maxValue-this.minValue)/this.step)+1,t=0;u>t;t++)i=this.roundStep(this.minValue+t*this.step),r=this.isTickSelected(i)?"selected":"",n+='<li class="tick '+r+'">',this.showTicksValue&&(n+='<span class="tick-value">'+this.getDisplayValue(i)+"<\/span>"),n+="<\/li>";this.ticks.html(n)}},isTickSelected:function(n){return this.valueToOffset(n),!this.range&&this.alwaysShowBar&&n<=this.scope.rzSliderModel?!0:this.range&&n>=this.scope.rzSliderModel&&n<=this.scope.rzSliderHigh?!0:!1},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab);this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw);this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab);this.getWidth(this.flrLab)},callOnStart:function(){if(this.scope.rzSliderOnStart){var n=this;t(function(){n.scope.rzSliderOnStart()})}},callOnChange:function(){if(this.scope.rzSliderOnChange){var n=this;t(function(){n.scope.rzSliderOnChange()})}},callOnEnd:function(){if(this.scope.rzSliderOnEnd){var n=this;t(function(){n.scope.rzSliderOnEnd()})}},updateHandles:function(n,t){return"rzSliderModel"===n?(this.updateLowHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void(this.range&&this.updateCmbLabel())):"rzSliderHigh"===n?(this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void(this.range&&this.updateCmbLabel())):(this.updateLowHandle(t),this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void this.updateCmbLabel())},updateLowHandle:function(n){this.setLeft(this.minH,n);this.translateFn(this.scope.rzSliderModel,this.minLab);this.setLeft(this.minLab,n-this.minLab.rzsw/2+this.handleHalfWidth);this.shFloorCeil()},updateHighHandle:function(n){this.setLeft(this.maxH,n);this.translateFn(this.scope.rzSliderHigh,this.maxLab);this.setLeft(this.maxLab,n-this.maxLab.rzsw/2+this.handleHalfWidth);this.shFloorCeil()},shFloorCeil:function(){var n=!1,t=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(n=!0,this.hideEl(this.flrLab)):(n=!1,this.showEl(this.flrLab));this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab));this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):n||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)+this.handleHalfWidth);this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateCmbLabel:function(){var n,t;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(n=this.getDisplayValue(this.scope.rzSliderModel),t=this.getDisplayValue(this.scope.rzSliderHigh),this.translateFn(n+" - "+t,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},getDisplayValue:function(n){return this.customTrFn?this.customTrFn(n):n},roundStep:function(n){var t=this.step,i=+((n-this.minValue)%t).toFixed(3),r=i>t/2?n+t-i:n-i;return r=r.toFixed(this.precision),+r},hideEl:function(n){return n.css({opacity:0})},showEl:function(n){return n.rzAlwaysHide?n:n.css({opacity:1})},setLeft:function(n,t){return n.rzsl=t,n.css({left:t+"px"}),t},getWidth:function(n){var t=n[0].getBoundingClientRect();return n.rzsw=t.right-t.left,n.rzsw},setWidth:function(n,t){return n.rzsw=t,n.css({width:t+"px"}),t},valueToOffset:function(n){return(n-this.minValue)*this.maxLeft/this.valueRange||0},offsetToValue:function(n){return n/this.maxLeft*this.valueRange+this.minValue},getEventX:function(n){return"clientX"in n?n.clientX:void 0===n.originalEvent?n.touches[0].clientX:n.originalEvent.touches[0].clientX},getNearestHandle:function(n){if(!this.range)return this.minH;var t=this.getEventX(n)-this.sliderElem.rzsl-this.handleHalfWidth;return Math.abs(t-this.minH.rzsl)<Math.abs(t-this.maxH.rzsl)?this.minH:this.maxH},bindEvents:function(){if(!this.presentOnly&&!this.disabled){var t,i,r;this.dragRange?(t="rzSliderDrag",i=this.onDragStart,r=this.onDragMove):(t="rzSliderModel",i=this.onStart,r=this.onMove);this.minH.on("mousedown",n.bind(this,this.onStart,this.minH,"rzSliderModel"));this.range&&this.maxH.on("mousedown",n.bind(this,this.onStart,this.maxH,"rzSliderHigh"));this.fullBar.on("mousedown",n.bind(this,this.onStart,null,null));this.fullBar.on("mousedown",n.bind(this,this.onMove,this.fullBar));this.selBar.on("mousedown",n.bind(this,i,null,t));this.selBar.on("mousedown",n.bind(this,r,this.selBar));this.ticks.on("mousedown",n.bind(this,this.onStart,null,null));this.ticks.on("mousedown",n.bind(this,this.onMove,this.ticks));this.minH.on("touchstart",n.bind(this,this.onStart,this.minH,"rzSliderModel"));this.range&&this.maxH.on("touchstart",n.bind(this,this.onStart,this.maxH,"rzSliderHigh"));this.fullBar.on("touchstart",n.bind(this,this.onStart,null,null));this.fullBar.on("touchstart",n.bind(this,this.onMove,this.fullBar));this.selBar.on("touchstart",n.bind(this,i,null,t));this.selBar.on("touchstart",n.bind(this,r,this.selBar));this.ticks.on("touchstart",n.bind(this,this.onStart,null,null));this.ticks.on("touchstart",n.bind(this,this.onMove,this.ticks))}},unbindEvents:function(){this.minH.off();this.maxH.off();this.fullBar.off();this.selBar.off();this.ticks.off()},onStart:function(t,r,u){var f,e,o=this.getEventNames(u);u.stopPropagation();u.preventDefault();""===this.tracking&&(this.calcViewDimensions(),t?this.tracking=r:(t=this.getNearestHandle(u),this.tracking=t===this.minH?"rzSliderModel":"rzSliderHigh"),t.addClass("rz-active"),f=n.bind(this,this.dragging.active?this.onDragMove:this.onMove,t),e=n.bind(this,this.onEnd,f),i.on(o.moveEvent,f),i.one(o.endEvent,e),this.callOnStart())},onMove:function(n,t){var u,i,r,f=this.getEventX(t);if(u=this.sliderElem.rzsl,i=f-u-this.handleHalfWidth,0>=i){if(0===n.rzsl)return;r=this.minValue;i=0}else if(i>=this.maxLeft){if(n.rzsl===this.maxLeft)return;r=this.maxValue;i=this.maxLeft}else r=this.offsetToValue(i),r=this.roundStep(r),i=this.valueToOffset(r);this.positionTrackingHandle(r,i)},onDragStart:function(n,t,i){var r=this.getEventX(i)-this.sliderElem.rzsl-this.handleHalfWidth;this.dragging={active:!0,value:this.offsetToValue(r),difference:this.scope.rzSliderHigh-this.scope.rzSliderModel,offset:r,lowDist:r-this.minH.rzsl,highDist:this.maxH.rzsl-r};this.minH.addClass("rz-active");this.maxH.addClass("rz-active");this.onStart(n,t,i)},onDragMove:function(n,t){var u,f,i,r,e=this.getEventX(t)-this.sliderElem.rzsl-this.handleHalfWidth;if(e<=this.dragging.lowDist){if(n.rzsl===this.dragging.lowDist)return;i=this.minValue;u=0;r=this.dragging.difference;f=this.valueToOffset(r)}else if(e>=this.maxLeft-this.dragging.highDist){if(n.rzsl===this.dragging.highDist)return;r=this.maxValue;f=this.maxLeft;i=this.maxValue-this.dragging.difference;u=this.valueToOffset(i)}else i=this.offsetToValue(e-this.dragging.lowDist),i=this.roundStep(i),u=this.valueToOffset(i),r=i+this.dragging.difference,f=this.valueToOffset(r);this.positionTrackingBar(i,r,u,f)},positionTrackingBar:function(n,t,i,r){this.scope.rzSliderModel=n;this.scope.rzSliderHigh=t;this.updateHandles("rzSliderModel",i);this.updateHandles("rzSliderHigh",r);this.scope.$apply();this.callOnChange()},positionTrackingHandle:function(n,t){this.range&&("rzSliderModel"===this.tracking&&n>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.scope.$apply(),this.callOnChange()):"rzSliderHigh"===this.tracking&&n<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.scope.$apply(),this.callOnChange()));this.scope[this.tracking]!==n&&(this.scope[this.tracking]=n,this.updateHandles(this.tracking,t),this.scope.$apply(),this.callOnChange())},onEnd:function(n,t){var r=this.getEventNames(t).moveEvent;this.minH.removeClass("rz-active");this.maxH.removeClass("rz-active");i.off(r,n);this.scope.$emit("slideEnded");this.tracking="";this.dragging.active=!1;this.callOnEnd()},getEventNames:function(n){var t={moveEvent:"",endEvent:""};return n.touches||void 0!==n.originalEvent&&n.originalEvent.touches?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t}},f}]).directive("rzslider",["RzSlider",function(n){return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderDraggable:"@",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@",rzSliderOnStart:"&",rzSliderOnChange:"&",rzSliderOnEnd:"&",rzSliderShowTicks:"=?",rzSliderShowTicksValue:"=?",rzSliderDisabled:"=?",rzSliderInterval:"=?"},templateUrl:function(n,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,i,r){return new n(t,i,r)}}}]);return t.run(["$templateCache",function(n){n.put("rzSliderTpl.html",'<span class=rz-bar-wrapper><span class=rz-bar><\/span><\/span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection"><\/span><\/span> <span class=rz-pointer><\/span> <span class=rz-pointer><\/span> <span class="rz-bubble rz-limit"><\/span> <span class="rz-bubble rz-limit"><\/span> <span class=rz-bubble><\/span> <span class=rz-bubble><\/span> <span class=rz-bubble><\/span><ul class=rz-ticks><\/ul>')}]),t});angular.module("ui.bootstrap",["ui.bootstrap.typeahead","ui.bootstrap.position"]);angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(i){var r=i.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+i+'".');return{itemName:r[3],source:n(r[4]),viewMapper:n(r[2]||r[1]),modelMapper:n(r[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(n,t,i,r,u,f,e,o,s,h,c,l){function g(){a.moveInProgress||(a.moveInProgress=!0,a.$digest());ht&&e.cancel(ht);ht=e(function(){a.matches.length&&vt();a.moveInProgress=!1},ni)}function vt(){a.position=k?c.offset(t):c.position(t);a.position.top+=t.prop("offsetHeight")}var y,nt,gt=[9,13,27,38,40],ni=200,b=n.$eval(i.typeaheadMinLength),ut,w,p,ot,kt,st,ht,ct,dt,lt,at,d;b||0===b||(b=1);var ft,tt,yt=n.$eval(i.typeaheadWaitMs)||0,pt=n.$eval(i.typeaheadEditable)!==!1,it=u(i.typeaheadLoading).assign||angular.noop,ti=u(i.typeaheadOnSelect),ii=angular.isDefined(i.typeaheadSelectOnBlur)?n.$eval(i.typeaheadSelectOnBlur):!1,rt=u(i.typeaheadNoResults).assign||angular.noop,wt=i.typeaheadInputFormatter?u(i.typeaheadInputFormatter):void 0,k=i.typeaheadAppendToBody?n.$eval(i.typeaheadAppendToBody):!1,et=i.typeaheadAppendToElementId||!1,ri=n.$eval(i.typeaheadFocusFirst)!==!1,ui=i.typeaheadSelectOnExact?n.$eval(i.typeaheadSelectOnExact):!1,bt=u(i.ngModel),fi=u(i.ngModel+"($$$p)"),ei=function(t,i){return angular.isFunction(bt(n))&&nt&&nt.$options&&nt.$options.getterSetter?fi(t,{$$$p:i}):bt.assign(t,i)},v=l.parse(i.uibTypeahead),a=n.$new(),oi=n.$on("$destroy",function(){a.$destroy()});a.$on("$destroy",oi);ut="typeahead-"+a.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":ut});w=angular.element("<div uib-typeahead-popup><\/div>");w.attr({id:ut,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"});angular.isDefined(i.typeaheadTemplateUrl)&&w.attr("template-url",i.typeaheadTemplateUrl);angular.isDefined(i.typeaheadPopupTemplateUrl)&&w.attr("popup-template-url",i.typeaheadPopupTemplateUrl);p=function(){a.matches=[];a.activeIdx=-1;t.attr("aria-expanded",!1)};ot=function(n){return ut+"-option-"+n};a.$watch("activeIdx",function(n){0>n?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",ot(n))});kt=function(n,t){return a.matches.length>t&&n?n.toUpperCase()===a.matches[t].label.toUpperCase():!1};st=function(i){var r={$viewValue:i};it(n,!0);rt(n,!1);f.when(v.source(n,r)).then(function(u){var e=i===y.$viewValue,f;if(e&&ft)if(u&&u.length>0){for(a.activeIdx=ri?0:-1,rt(n,!1),a.matches.length=0,f=0;f<u.length;f++)r[v.itemName]=u[f],a.matches.push({id:ot(f),label:v.viewMapper(a,r),model:u[f]});a.query=i;vt();t.attr("aria-expanded",!0);ui&&1===a.matches.length&&kt(i,0)&&a.select(0)}else p(),rt(n,!0);e&&it(n,!1)},function(){p();it(n,!1);rt(n,!0)})};k&&(angular.element(s).bind("resize",g),o.find("body").bind("scroll",g));a.moveInProgress=!1;a.query=void 0;dt=function(n){ct=e(function(){st(n)},yt)};lt=function(){ct&&e.cancel(ct)};p();a.select=function(r){var u,o,f={};tt=!0;f[v.itemName]=o=a.matches[r].model;u=v.modelMapper(n,f);ei(n,u);y.$setValidity("editable",!0);y.$setValidity("parse",!0);ti(n,{$item:o,$model:u,$label:v.viewMapper(n,f)});p();a.$eval(i.typeaheadFocusOnSelect)!==!1&&e(function(){t[0].focus()},0,!1)};t.bind("keydown",function(n){if(0!==a.matches.length&&-1!==gt.indexOf(n.which)){if(-1===a.activeIdx&&(9===n.which||13===n.which))return p(),void a.$digest();n.preventDefault();40===n.which?(a.activeIdx=(a.activeIdx+1)%a.matches.length,a.$digest()):38===n.which?(a.activeIdx=(a.activeIdx>0?a.activeIdx:a.matches.length)-1,a.$digest()):13===n.which||9===n.which?a.$apply(function(){a.select(a.activeIdx)}):27===n.which&&(n.stopPropagation(),p(),a.$digest())}});t.bind("blur",function(){ii&&a.matches.length&&-1!==a.activeIdx&&!tt&&(tt=!0,a.$apply(function(){a.select(a.activeIdx)}));ft=!1;tt=!1});at=function(n){t[0]!==n.target&&3!==n.which&&0!==a.matches.length&&(p(),h.$$phase||a.$digest())};o.bind("click",at);n.$on("$destroy",function(){o.unbind("click",at);(k||et)&&d.remove();k&&(angular.element(s).unbind("resize",g),o.find("body").unbind("scroll",g));w.remove()});d=r(w)(a);k?o.find("body").append(d):et!==!1?angular.element(o[0].getElementById(et)).append(d):t.after(d);this.init=function(t,i){y=t;nt=i;y.$parsers.unshift(function(t){return ft=!0,0===b||t&&t.length>=b?yt>0?(lt(),dt(t)):st(t):(it(n,!1),lt(),p()),pt?t:t?void y.$setValidity("editable",!1):(y.$setValidity("editable",!0),null)});y.$formatters.push(function(t){var r,u,i={};return pt||y.$setValidity("editable",!0),wt?(i.$model=t,wt(n,i)):(i[v.itemName]=t,r=v.viewMapper(n,i),i[v.itemName]=void 0,u=v.viewMapper(n,i),r!==u?r:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(n,t,i,r){r[2].init(r[0],r[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(n,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(n,t,i){n.templateUrl=i.templateUrl;n.isOpen=function(){return n.matches.length>0};n.isActive=function(t){return n.active==t};n.selectActive=function(t){n.active=t};n.selectMatch=function(t){n.select({activeIdx:t})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(n,t,i){return{scope:{index:"=",match:"=",query:"="},link:function(r,u,f){var e=i(f.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";n(e).then(function(n){t(n.trim())(r,function(n){u.replaceWith(n)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,t,i){function u(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function f(n){return/<.*>/g.test(n)}var r;return r=t.has("$sanitize"),function(t,e){return!r&&f(t)&&i.warn("Unsafe use of typeahead please use ngSanitize"),t=e?(""+t).replace(new RegExp(u(e),"gi"),"<strong>$&<\/strong>"):t,r||(t=n.trustAsHtml(t)),t}}]);angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function(n,t,i,r){return r||i.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),t}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function(n,t,i,r,u,f,e,o,s,h,c){var l=[9,13,27,38,40],a=200;return{require:["ngModel","^?ngModelOptions"],link:function(v,y,p,w){function ut(){b.moveInProgress||(b.moveInProgress=!0,b.$digest());yt&&r.cancel(yt);yt=r(function(){b.matches.length&&kt();b.moveInProgress=!1},a)}function kt(){b.position=it?o.offset(y):o.position(y);b.position.top+=y.prop("offsetHeight")}var st,nt,d,at,ii,vt,yt,pt,ri,wt,bt,rt;c||h.warn("typeahead is now deprecated. Use uib-typeahead instead.");var g=w[0],ht=w[1],tt=v.$eval(p.typeaheadMinLength);tt||0===tt||(tt=1);var ct,ft,dt=v.$eval(p.typeaheadWaitMs)||0,gt=v.$eval(p.typeaheadEditable)!==!1,et=t(p.typeaheadLoading).assign||angular.noop,ui=t(p.typeaheadOnSelect),fi=angular.isDefined(p.typeaheadSelectOnBlur)?v.$eval(p.typeaheadSelectOnBlur):!1,ot=t(p.typeaheadNoResults).assign||angular.noop,ni=p.typeaheadInputFormatter?t(p.typeaheadInputFormatter):void 0,it=p.typeaheadAppendToBody?v.$eval(p.typeaheadAppendToBody):!1,lt=p.typeaheadAppendToElementId||!1,ei=v.$eval(p.typeaheadFocusFirst)!==!1,oi=p.typeaheadSelectOnExact?v.$eval(p.typeaheadSelectOnExact):!1,ti=t(p.ngModel),si=t(p.ngModel+"($$$p)"),hi=function(n,t){return angular.isFunction(ti(v))&&ht&&ht.$options&&ht.$options.getterSetter?si(n,{$$$p:t}):ti.assign(n,t)},k=s.parse(p.typeahead),b=v.$new(),ci=v.$on("$destroy",function(){b.$destroy()});b.$on("$destroy",ci);st="typeahead-"+b.$id+"-"+Math.floor(1e4*Math.random());y.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":st});nt=angular.element("<div typeahead-popup><\/div>");nt.attr({id:st,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"});angular.isDefined(p.typeaheadTemplateUrl)&&nt.attr("template-url",p.typeaheadTemplateUrl);angular.isDefined(p.typeaheadPopupTemplateUrl)&&nt.attr("popup-template-url",p.typeaheadPopupTemplateUrl);d=function(){b.matches=[];b.activeIdx=-1;y.attr("aria-expanded",!1)};at=function(n){return st+"-option-"+n};b.$watch("activeIdx",function(n){0>n?y.removeAttr("aria-activedescendant"):y.attr("aria-activedescendant",at(n))});ii=function(n,t){return b.matches.length>t&&n?n.toUpperCase()===b.matches[t].label.toUpperCase():!1};vt=function(n){var t={$viewValue:n};et(v,!0);ot(v,!1);i.when(k.source(v,t)).then(function(i){var u=n===g.$viewValue,r;if(u&&ct)if(i&&i.length>0){for(b.activeIdx=ei?0:-1,ot(v,!1),b.matches.length=0,r=0;r<i.length;r++)t[k.itemName]=i[r],b.matches.push({id:at(r),label:k.viewMapper(b,t),model:i[r]});b.query=n;kt();y.attr("aria-expanded",!0);oi&&1===b.matches.length&&ii(n,0)&&b.select(0)}else d(),ot(v,!0);u&&et(v,!1)},function(){d();et(v,!1);ot(v,!0)})};it&&(angular.element(f).bind("resize",ut),u.find("body").bind("scroll",ut));b.moveInProgress=!1;d();b.query=void 0;ri=function(n){pt=r(function(){vt(n)},dt)};wt=function(){pt&&r.cancel(pt)};g.$parsers.unshift(function(n){return ct=!0,0===tt||n&&n.length>=tt?dt>0?(wt(),ri(n)):vt(n):(et(v,!1),wt(),d()),gt?n:n?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null)});g.$formatters.push(function(n){var i,r,t={};return gt||g.$setValidity("editable",!0),ni?(t.$model=n,ni(v,t)):(t[k.itemName]=n,i=k.viewMapper(v,t),t[k.itemName]=void 0,r=k.viewMapper(v,t),i!==r?i:n)});b.select=function(n){var t,u,i={};ft=!0;i[k.itemName]=u=b.matches[n].model;t=k.modelMapper(v,i);hi(v,t);g.$setValidity("editable",!0);g.$setValidity("parse",!0);ui(v,{$item:u,$model:t,$label:k.viewMapper(v,i)});d();b.$eval(p.typeaheadFocusOnSelect)!==!1&&r(function(){y[0].focus()},0,!1)};y.bind("keydown",function(n){if(0!==b.matches.length&&-1!==l.indexOf(n.which)){if(-1===b.activeIdx&&(9===n.which||13===n.which))return d(),void b.$digest();n.preventDefault();40===n.which?(b.activeIdx=(b.activeIdx+1)%b.matches.length,b.$digest()):38===n.which?(b.activeIdx=(b.activeIdx>0?b.activeIdx:b.matches.length)-1,b.$digest()):13===n.which||9===n.which?b.$apply(function(){b.select(b.activeIdx)}):27===n.which&&(n.stopPropagation(),d(),b.$digest())}});y.bind("blur",function(){fi&&b.matches.length&&-1!==b.activeIdx&&!ft&&(ft=!0,b.$apply(function(){b.select(b.activeIdx)}));ct=!1;ft=!1});bt=function(n){y[0]!==n.target&&3!==n.which&&0!==b.matches.length&&(d(),e.$$phase||b.$digest())};u.bind("click",bt);v.$on("$destroy",function(){u.unbind("click",bt);(it||lt)&&rt.remove();it&&(angular.element(f).unbind("resize",ut),u.find("body").unbind("scroll",ut));nt.remove()});rt=n(nt)(b);it?u.find("body").append(rt):lt!==!1?angular.element(u[0].getElementById(lt)).append(rt):y.after(rt)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function(n,t){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(n,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(i,r,u){n||t.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead.");i.templateUrl=u.templateUrl;i.isOpen=function(){return i.matches.length>0};i.isActive=function(n){return i.active==n};i.selectActive=function(n){i.active=n};i.selectMatch=function(n){i.select({activeIdx:n})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function(n,t,i,r,u){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(f,e,o){r||u.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var s=i(o.templateUrl)(f.$parent)||"template/typeahead/typeahead-match.html";n(s).then(function(n){t(n.trim())(f,function(n){e.replaceWith(n)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function(n,t,i,r){function f(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(n){return/<.*>/g.test(n)}var u;return u=t.has("$sanitize"),function(t,o){return r||i.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!u&&e(t)&&i.warn("Unsafe use of typeahead please use ngSanitize"),t=o?(""+t).replace(new RegExp(f(o),"gi"),"<strong>$&<\/strong>"):t,u||(t=n.trustAsHtml(t)),t}}]);angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(n,t){function i(n,i){return n.currentStyle?n.currentStyle[i]:t.getComputedStyle?t.getComputedStyle(n)[i]:n.style[i]}function r(n){return"static"===(i(n,"position")||"static")}var u=function(t){for(var u=n[0],i=t.offsetParent||u;i&&i!==u&&r(i);)i=i.offsetParent;return i||u};return{position:function(t){var e=this.offset(t),r={top:0,left:0},i=u(t[0]),f;return i!=n[0]&&(r=this.offset(angular.element(i)),r.top+=i.clientTop-i.scrollTop,r.left+=i.clientLeft-i.scrollLeft),f=t[0].getBoundingClientRect(),{width:f.width||t.prop("offsetWidth"),height:f.height||t.prop("offsetHeight"),top:e.top-r.top,left:e.left-r.left}},offset:function(i){var r=i[0].getBoundingClientRect();return{width:r.width||i.prop("offsetWidth"),height:r.height||i.prop("offsetHeight"),top:r.top+(t.pageYOffset||n[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||n[0].documentElement.scrollLeft)}},positionElements:function(n,t,i,r){var u,h,c,f,a=i.split("-"),l=a[0],e=a[1]||"center",o,s;u=r?this.offset(n):this.position(n);h=t.prop("offsetWidth");c=t.prop("offsetHeight");o={center:function(){return u.left+u.width/2-h/2},left:function(){return u.left},right:function(){return u.left+u.width}};s={center:function(){return u.top+u.height/2-c/2},top:function(){return u.top},bottom:function(){return u.top+u.height}};switch(l){case"right":f={top:s[e](),left:o[l]()};break;case"left":f={top:s[e](),left:u.left-h};break;case"bottom":f={top:s[l](),left:o[e]()};break;default:f={top:u.top-c,left:o[e]()}}return f}}}]);angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function(n,t,i){t||n.warn("$position is now deprecated. Use $uibPosition instead.");angular.extend(this,i)}]);angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position"]);angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]);angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(i){var r=i.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+i+'".');return{itemName:r[3],source:n(r[4]),viewMapper:n(r[2]||r[1]),modelMapper:n(r[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(n,t,i,r,u,f,e,o,s,h,c,l){function g(){a.moveInProgress||(a.moveInProgress=!0,a.$digest());ht&&e.cancel(ht);ht=e(function(){a.matches.length&&vt();a.moveInProgress=!1},ni)}function vt(){a.position=k?c.offset(t):c.position(t);a.position.top+=t.prop("offsetHeight")}var y,nt,gt=[9,13,27,38,40],ni=200,b=n.$eval(i.typeaheadMinLength),ut,w,p,ot,kt,st,ht,ct,dt,lt,at,d;b||0===b||(b=1);var ft,tt,yt=n.$eval(i.typeaheadWaitMs)||0,pt=n.$eval(i.typeaheadEditable)!==!1,it=u(i.typeaheadLoading).assign||angular.noop,ti=u(i.typeaheadOnSelect),ii=angular.isDefined(i.typeaheadSelectOnBlur)?n.$eval(i.typeaheadSelectOnBlur):!1,rt=u(i.typeaheadNoResults).assign||angular.noop,wt=i.typeaheadInputFormatter?u(i.typeaheadInputFormatter):void 0,k=i.typeaheadAppendToBody?n.$eval(i.typeaheadAppendToBody):!1,et=i.typeaheadAppendToElementId||!1,ri=n.$eval(i.typeaheadFocusFirst)!==!1,ui=i.typeaheadSelectOnExact?n.$eval(i.typeaheadSelectOnExact):!1,bt=u(i.ngModel),fi=u(i.ngModel+"($$$p)"),ei=function(t,i){return angular.isFunction(bt(n))&&nt&&nt.$options&&nt.$options.getterSetter?fi(t,{$$$p:i}):bt.assign(t,i)},v=l.parse(i.uibTypeahead),a=n.$new(),oi=n.$on("$destroy",function(){a.$destroy()});a.$on("$destroy",oi);ut="typeahead-"+a.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":ut});w=angular.element("<div uib-typeahead-popup><\/div>");w.attr({id:ut,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"});angular.isDefined(i.typeaheadTemplateUrl)&&w.attr("template-url",i.typeaheadTemplateUrl);angular.isDefined(i.typeaheadPopupTemplateUrl)&&w.attr("popup-template-url",i.typeaheadPopupTemplateUrl);p=function(){a.matches=[];a.activeIdx=-1;t.attr("aria-expanded",!1)};ot=function(n){return ut+"-option-"+n};a.$watch("activeIdx",function(n){0>n?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",ot(n))});kt=function(n,t){return a.matches.length>t&&n?n.toUpperCase()===a.matches[t].label.toUpperCase():!1};st=function(i){var r={$viewValue:i};it(n,!0);rt(n,!1);f.when(v.source(n,r)).then(function(u){var e=i===y.$viewValue,f;if(e&&ft)if(u&&u.length>0){for(a.activeIdx=ri?0:-1,rt(n,!1),a.matches.length=0,f=0;f<u.length;f++)r[v.itemName]=u[f],a.matches.push({id:ot(f),label:v.viewMapper(a,r),model:u[f]});a.query=i;vt();t.attr("aria-expanded",!0);ui&&1===a.matches.length&&kt(i,0)&&a.select(0)}else p(),rt(n,!0);e&&it(n,!1)},function(){p();it(n,!1);rt(n,!0)})};k&&(angular.element(s).bind("resize",g),o.find("body").bind("scroll",g));a.moveInProgress=!1;a.query=void 0;dt=function(n){ct=e(function(){st(n)},yt)};lt=function(){ct&&e.cancel(ct)};p();a.select=function(r){var u,o,f={};tt=!0;f[v.itemName]=o=a.matches[r].model;u=v.modelMapper(n,f);ei(n,u);y.$setValidity("editable",!0);y.$setValidity("parse",!0);ti(n,{$item:o,$model:u,$label:v.viewMapper(n,f)});p();a.$eval(i.typeaheadFocusOnSelect)!==!1&&e(function(){t[0].focus()},0,!1)};t.bind("keydown",function(n){if(0!==a.matches.length&&-1!==gt.indexOf(n.which)){if(-1===a.activeIdx&&(9===n.which||13===n.which))return p(),void a.$digest();n.preventDefault();40===n.which?(a.activeIdx=(a.activeIdx+1)%a.matches.length,a.$digest()):38===n.which?(a.activeIdx=(a.activeIdx>0?a.activeIdx:a.matches.length)-1,a.$digest()):13===n.which||9===n.which?a.$apply(function(){a.select(a.activeIdx)}):27===n.which&&(n.stopPropagation(),p(),a.$digest())}});t.bind("blur",function(){ii&&a.matches.length&&-1!==a.activeIdx&&!tt&&(tt=!0,a.$apply(function(){a.select(a.activeIdx)}));ft=!1;tt=!1});at=function(n){t[0]!==n.target&&3!==n.which&&0!==a.matches.length&&(p(),h.$$phase||a.$digest())};o.bind("click",at);n.$on("$destroy",function(){o.unbind("click",at);(k||et)&&d.remove();k&&(angular.element(s).unbind("resize",g),o.find("body").unbind("scroll",g));w.remove()});d=r(w)(a);k?o.find("body").append(d):et!==!1?angular.element(o[0].getElementById(et)).append(d):t.after(d);this.init=function(t,i){y=t;nt=i;y.$parsers.unshift(function(t){return ft=!0,0===b||t&&t.length>=b?yt>0?(lt(),dt(t)):st(t):(it(n,!1),lt(),p()),pt?t:t?void y.$setValidity("editable",!1):(y.$setValidity("editable",!0),null)});y.$formatters.push(function(t){var r,u,i={};return pt||y.$setValidity("editable",!0),wt?(i.$model=t,wt(n,i)):(i[v.itemName]=t,r=v.viewMapper(n,i),i[v.itemName]=void 0,u=v.viewMapper(n,i),r!==u?r:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(n,t,i,r){r[2].init(r[0],r[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(n,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(n,t,i){n.templateUrl=i.templateUrl;n.isOpen=function(){return n.matches.length>0};n.isActive=function(t){return n.active==t};n.selectActive=function(t){n.active=t};n.selectMatch=function(t){n.select({activeIdx:t})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(n,t,i){return{scope:{index:"=",match:"=",query:"="},link:function(r,u,f){var e=i(f.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";n(e).then(function(n){t(n.trim())(r,function(n){u.replaceWith(n)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,t,i){function u(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function f(n){return/<.*>/g.test(n)}var r;return r=t.has("$sanitize"),function(t,e){return!r&&f(t)&&i.warn("Unsafe use of typeahead please use ngSanitize"),t=e?(""+t).replace(new RegExp(u(e),"gi"),"<strong>$&<\/strong>"):t,r||(t=n.trustAsHtml(t)),t}}]);angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function(n,t,i,r){return r||i.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),t}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function(n,t,i,r,u,f,e,o,s,h,c){var l=[9,13,27,38,40],a=200;return{require:["ngModel","^?ngModelOptions"],link:function(v,y,p,w){function ut(){b.moveInProgress||(b.moveInProgress=!0,b.$digest());yt&&r.cancel(yt);yt=r(function(){b.matches.length&&kt();b.moveInProgress=!1},a)}function kt(){b.position=it?o.offset(y):o.position(y);b.position.top+=y.prop("offsetHeight")}var st,nt,d,at,ii,vt,yt,pt,ri,wt,bt,rt;c||h.warn("typeahead is now deprecated. Use uib-typeahead instead.");var g=w[0],ht=w[1],tt=v.$eval(p.typeaheadMinLength);tt||0===tt||(tt=1);var ct,ft,dt=v.$eval(p.typeaheadWaitMs)||0,gt=v.$eval(p.typeaheadEditable)!==!1,et=t(p.typeaheadLoading).assign||angular.noop,ui=t(p.typeaheadOnSelect),fi=angular.isDefined(p.typeaheadSelectOnBlur)?v.$eval(p.typeaheadSelectOnBlur):!1,ot=t(p.typeaheadNoResults).assign||angular.noop,ni=p.typeaheadInputFormatter?t(p.typeaheadInputFormatter):void 0,it=p.typeaheadAppendToBody?v.$eval(p.typeaheadAppendToBody):!1,lt=p.typeaheadAppendToElementId||!1,ei=v.$eval(p.typeaheadFocusFirst)!==!1,oi=p.typeaheadSelectOnExact?v.$eval(p.typeaheadSelectOnExact):!1,ti=t(p.ngModel),si=t(p.ngModel+"($$$p)"),hi=function(n,t){return angular.isFunction(ti(v))&&ht&&ht.$options&&ht.$options.getterSetter?si(n,{$$$p:t}):ti.assign(n,t)},k=s.parse(p.typeahead),b=v.$new(),ci=v.$on("$destroy",function(){b.$destroy()});b.$on("$destroy",ci);st="typeahead-"+b.$id+"-"+Math.floor(1e4*Math.random());y.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":st});nt=angular.element("<div typeahead-popup><\/div>");nt.attr({id:st,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"});angular.isDefined(p.typeaheadTemplateUrl)&&nt.attr("template-url",p.typeaheadTemplateUrl);angular.isDefined(p.typeaheadPopupTemplateUrl)&&nt.attr("popup-template-url",p.typeaheadPopupTemplateUrl);d=function(){b.matches=[];b.activeIdx=-1;y.attr("aria-expanded",!1)};at=function(n){return st+"-option-"+n};b.$watch("activeIdx",function(n){0>n?y.removeAttr("aria-activedescendant"):y.attr("aria-activedescendant",at(n))});ii=function(n,t){return b.matches.length>t&&n?n.toUpperCase()===b.matches[t].label.toUpperCase():!1};vt=function(n){var t={$viewValue:n};et(v,!0);ot(v,!1);i.when(k.source(v,t)).then(function(i){var u=n===g.$viewValue,r;if(u&&ct)if(i&&i.length>0){for(b.activeIdx=ei?0:-1,ot(v,!1),b.matches.length=0,r=0;r<i.length;r++)t[k.itemName]=i[r],b.matches.push({id:at(r),label:k.viewMapper(b,t),model:i[r]});b.query=n;kt();y.attr("aria-expanded",!0);oi&&1===b.matches.length&&ii(n,0)&&b.select(0)}else d(),ot(v,!0);u&&et(v,!1)},function(){d();et(v,!1);ot(v,!0)})};it&&(angular.element(f).bind("resize",ut),u.find("body").bind("scroll",ut));b.moveInProgress=!1;d();b.query=void 0;ri=function(n){pt=r(function(){vt(n)},dt)};wt=function(){pt&&r.cancel(pt)};g.$parsers.unshift(function(n){return ct=!0,0===tt||n&&n.length>=tt?dt>0?(wt(),ri(n)):vt(n):(et(v,!1),wt(),d()),gt?n:n?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null)});g.$formatters.push(function(n){var i,r,t={};return gt||g.$setValidity("editable",!0),ni?(t.$model=n,ni(v,t)):(t[k.itemName]=n,i=k.viewMapper(v,t),t[k.itemName]=void 0,r=k.viewMapper(v,t),i!==r?i:n)});b.select=function(n){var t,u,i={};ft=!0;i[k.itemName]=u=b.matches[n].model;t=k.modelMapper(v,i);hi(v,t);g.$setValidity("editable",!0);g.$setValidity("parse",!0);ui(v,{$item:u,$model:t,$label:k.viewMapper(v,i)});d();b.$eval(p.typeaheadFocusOnSelect)!==!1&&r(function(){y[0].focus()},0,!1)};y.bind("keydown",function(n){if(0!==b.matches.length&&-1!==l.indexOf(n.which)){if(-1===b.activeIdx&&(9===n.which||13===n.which))return d(),void b.$digest();n.preventDefault();40===n.which?(b.activeIdx=(b.activeIdx+1)%b.matches.length,b.$digest()):38===n.which?(b.activeIdx=(b.activeIdx>0?b.activeIdx:b.matches.length)-1,b.$digest()):13===n.which||9===n.which?b.$apply(function(){b.select(b.activeIdx)}):27===n.which&&(n.stopPropagation(),d(),b.$digest())}});y.bind("blur",function(){fi&&b.matches.length&&-1!==b.activeIdx&&!ft&&(ft=!0,b.$apply(function(){b.select(b.activeIdx)}));ct=!1;ft=!1});bt=function(n){y[0]!==n.target&&3!==n.which&&0!==b.matches.length&&(d(),e.$$phase||b.$digest())};u.bind("click",bt);v.$on("$destroy",function(){u.unbind("click",bt);(it||lt)&&rt.remove();it&&(angular.element(f).unbind("resize",ut),u.find("body").unbind("scroll",ut));nt.remove()});rt=n(nt)(b);it?u.find("body").append(rt):lt!==!1?angular.element(u[0].getElementById(lt)).append(rt):y.after(rt)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function(n,t){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(n,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(i,r,u){n||t.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead.");i.templateUrl=u.templateUrl;i.isOpen=function(){return i.matches.length>0};i.isActive=function(n){return i.active==n};i.selectActive=function(n){i.active=n};i.selectMatch=function(n){i.select({activeIdx:n})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function(n,t,i,r,u){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(f,e,o){r||u.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var s=i(o.templateUrl)(f.$parent)||"template/typeahead/typeahead-match.html";n(s).then(function(n){t(n.trim())(f,function(n){e.replaceWith(n)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function(n,t,i,r){function f(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(n){return/<.*>/g.test(n)}var u;return u=t.has("$sanitize"),function(t,o){return r||i.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!u&&e(t)&&i.warn("Unsafe use of typeahead please use ngSanitize"),t=o?(""+t).replace(new RegExp(f(o),"gi"),"<strong>$&<\/strong>"):t,u||(t=n.trustAsHtml(t)),t}}]);angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(n,t){function i(n,i){return n.currentStyle?n.currentStyle[i]:t.getComputedStyle?t.getComputedStyle(n)[i]:n.style[i]}function r(n){return"static"===(i(n,"position")||"static")}var u=function(t){for(var u=n[0],i=t.offsetParent||u;i&&i!==u&&r(i);)i=i.offsetParent;return i||u};return{position:function(t){var e=this.offset(t),r={top:0,left:0},i=u(t[0]),f;return i!=n[0]&&(r=this.offset(angular.element(i)),r.top+=i.clientTop-i.scrollTop,r.left+=i.clientLeft-i.scrollLeft),f=t[0].getBoundingClientRect(),{width:f.width||t.prop("offsetWidth"),height:f.height||t.prop("offsetHeight"),top:e.top-r.top,left:e.left-r.left}},offset:function(i){var r=i[0].getBoundingClientRect();return{width:r.width||i.prop("offsetWidth"),height:r.height||i.prop("offsetHeight"),top:r.top+(t.pageYOffset||n[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||n[0].documentElement.scrollLeft)}},positionElements:function(n,t,i,r){var u,h,c,f,a=i.split("-"),l=a[0],e=a[1]||"center",o,s;u=r?this.offset(n):this.position(n);h=t.prop("offsetWidth");c=t.prop("offsetHeight");o={center:function(){return u.left+u.width/2-h/2},left:function(){return u.left},right:function(){return u.left+u.width}};s={center:function(){return u.top+u.height/2-c/2},top:function(){return u.top},bottom:function(){return u.top+u.height}};switch(l){case"right":f={top:s[e](),left:o[l]()};break;case"left":f={top:s[e](),left:u.left-h};break;case"bottom":f={top:s[l](),left:o[e]()};break;default:f={top:u.top-c,left:o[e]()}}return f}}}]);angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function(n,t,i){t||n.warn("$position is now deprecated. Use $uibPosition instead.");angular.extend(this,i)}]);angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(n){n.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"><\/a>\n')}]);angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(n){n.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"><\/div>\n    <\/li>\n<\/ul>\n')}]),function(n,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():n.X2JS=t()}(this,function(){return function(n){function b(){n.escapeMode===undefined&&(n.escapeMode=!0);n.attributePrefix=n.attributePrefix||"_";n.arrayAccessForm=n.arrayAccessForm||"none";n.emptyNodeForm=n.emptyNodeForm||"text";n.enableToStringFunc===undefined&&(n.enableToStringFunc=!0);n.arrayAccessFormPaths=n.arrayAccessFormPaths||[];n.skipEmptyTextNodesForObj===undefined&&(n.skipEmptyTextNodesForObj=!0);n.stripWhitespaces===undefined&&(n.stripWhitespaces=!0);n.datetimeAccessFormPaths=n.datetimeAccessFormPaths||[];n.useDoubleQuotes===undefined&&(n.useDoubleQuotes=!1);n.xmlElementsFilter=n.xmlElementsFilter||[];n.jsonPropertiesFilter=n.jsonPropertiesFilter||[];n.keepCData===undefined&&(n.keepCData=!1)}function k(){}function h(n){var t=n.localName;return t==null&&(t=n.baseName),(t==null||t=="")&&(t=n.nodeName),t}function d(n){return n.prefix}function e(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):n}function r(n,t,i,r){for(var f=0,u;f<n.length;f++)if(u=n[f],typeof u=="string"){if(u==r)break}else if(u instanceof RegExp){if(u.test(r))break}else if(typeof u=="function"&&u(t,i,r))break;return f!=n.length}function c(t,i,u){switch(n.arrayAccessForm){case"property":t[i+"_asArray"]=t[i]instanceof Array?t[i]:[t[i]]}!(t[i]instanceof Array)&&n.arrayAccessFormPaths.length>0&&r(n.arrayAccessFormPaths,t,i,u)&&(t[i]=[t[i]])}function l(n){var i=n.split(/[-T:+Z]/g),t=new Date(i[0],i[1]-1,i[2]),u=i[5].split("."),r,f;return t.setHours(i[3],i[4],u[0]),u.length>1&&t.setMilliseconds(u[1]),i[6]&&i[7]?(r=i[6]*60+Number(i[7]),f=/\d\d-\d\d:\d\d$/.test(n)?"-":"+",r=0+(f=="-"?-1*r:r),t.setMinutes(t.getMinutes()-r-t.getTimezoneOffset())):n.indexOf("Z",n.length-1)!==-1&&(t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))),t}function g(t,i,u){if(n.datetimeAccessFormPaths.length>0){var f=u.split(".#")[0];return r(n.datetimeAccessFormPaths,t,i,f)?l(t):t}return t}function nt(i,u,f,e){return u==t.ELEMENT_NODE&&n.xmlElementsFilter.length>0?r(n.xmlElementsFilter,i,f,e):!0}function u(i,r){var f,l,s,o,e,a,v,p,y;if(i.nodeType==t.DOCUMENT_NODE){for(f={},l=i.childNodes,s=0;s<l.length;s++)o=l.item(s),o.nodeType==t.ELEMENT_NODE&&(e=h(o),f[e]=u(o,e));return f}if(i.nodeType==t.ELEMENT_NODE){for(f={},f.__cnt=0,l=i.childNodes,s=0;s<l.length;s++)o=l.item(s),e=h(o),o.nodeType!=t.COMMENT_NODE&&(a=r+"."+e,nt(f,o.nodeType,e,a)&&(f.__cnt++,f[e]==null?(f[e]=u(o,a),c(f,e,a)):(f[e]!=null&&(f[e]instanceof Array||(f[e]=[f[e]],c(f,e,a))),f[e][f[e].length]=u(o,a))));for(v=0;v<i.attributes.length;v++)p=i.attributes.item(v),f.__cnt++,f[n.attributePrefix+p.name]=p.value;return y=d(i),y!=null&&y!=""&&(f.__cnt++,f.__prefix=y),f["#text"]!=null&&(f.__text=f["#text"],f.__text instanceof Array&&(f.__text=f.__text.join("\n")),n.stripWhitespaces&&(f.__text=f.__text.trim()),delete f["#text"],n.arrayAccessForm=="property"&&delete f["#text_asArray"],f.__text=g(f.__text,e,r+"."+e)),f["#cdata-section"]!=null&&(f.__cdata=f["#cdata-section"],delete f["#cdata-section"],n.arrayAccessForm=="property"&&delete f["#cdata-section_asArray"]),f.__cnt==0&&n.emptyNodeForm=="text"?f="":f.__cnt==1&&f.__text!=null?f=f.__text:f.__cnt!=1||f.__cdata==null||n.keepCData?f.__cnt>1&&f.__text!=null&&n.skipEmptyTextNodesForObj&&(n.stripWhitespaces&&f.__text==""||f.__text.trim()=="")&&delete f.__text:f=f.__cdata,delete f.__cnt,n.enableToStringFunc&&(f.__text!=null||f.__cdata!=null)&&(f.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),f}if(i.nodeType==t.TEXT_NODE||i.nodeType==t.CDATA_SECTION_NODE)return i.nodeValue}function i(t,i,r,u){var s="<"+(t!=null&&t.__prefix!=null?t.__prefix+":":"")+i,o,h,f;if(r!=null)for(o=0;o<r.length;o++)h=r[o],f=t[h],n.escapeMode&&(f=e(f)),s+=" "+h.substr(n.attributePrefix.length)+"=",s+=n.useDoubleQuotes?'"'+f+'"':"'"+f+"'";return s+(u?"/>":">")}function f(n,t){return"<\/"+(n.__prefix!=null?n.__prefix+":":"")+t+">"}function tt(n,t){return n.indexOf(t,n.length-t.length)!==-1}function a(t,i){return n.arrayAccessForm=="property"&&tt(i.toString(),"_asArray")||i.toString().indexOf(n.attributePrefix)==0||i.toString().indexOf("__")==0||t[i]instanceof Function?!0:!1}function v(n){var t=0,i;if(n instanceof Object)for(i in n)a(n,i)||t++;return t}function it(t,i,u){return n.jsonPropertiesFilter.length==0||u==""||r(n.jsonPropertiesFilter,t,i,u)}function y(t){var r=[],i;if(t instanceof Object)for(i in t)i.toString().indexOf("__")==-1&&i.toString().indexOf(n.attributePrefix)==0&&r.push(i);return r}function rt(t){var i="";return t.__cdata!=null&&(i+="<![CDATA["+t.__cdata+"]\]>"),t.__text!=null&&(i+=n.escapeMode?e(t.__text):t.__text),i}function p(t){var i="";return t instanceof Object?i+=rt(t):t!=null&&(i+=n.escapeMode?e(t):t),i}function o(n,t){return n===""?t:n+"."+t}function ut(n,t,r,u){var h="",e;if(n.length==0)h+=i(n,t,r,!0);else for(e=0;e<n.length;e++)h+=i(n[e],t,y(n[e]),!1),h+=s(n[e],o(u,t)),h+=f(n[e],t);return h}function s(n,t){var e="",l=v(n),u,r,h,c;if(l>0)for(u in n)!a(n,u)&&(t==""||it(n,u,o(t,u)))&&(r=n[u],h=y(r),r==null||r==undefined?e+=i(r,u,h,!0):r instanceof Object?r instanceof Array?e+=ut(r,u,h,t):r instanceof Date?(e+=i(r,u,h,!1),e+=r.toISOString(),e+=f(r,u)):(c=v(r),c>0||r.__text!=null||r.__cdata!=null?(e+=i(r,u,h,!1),e+=s(r,o(t,u)),e+=f(r,u)):e+=i(r,u,h,!0)):(e+=i(r,u,h,!1),e+=p(r),e+=f(r,u)));return e+p(n)}var w="1.2.0",t;n=n||{};b();k();t={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(n){var u=window.ActiveXObject||"ActiveXObject"in window,f=navigator.userAgent.search("Firefox"),e=f>-1,t,r,i;if(n===undefined)return null;if(window.DOMParser){if(r=new window.DOMParser,i=null,!u&&!e)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(o){i=null}try{t=r.parseFromString(n,"text/xml");i!=null&&t.getElementsByTagNameNS(i,"parsererror").length>0&&(t=null)}catch(o){t=null}}else n.indexOf("<?")==0&&(n=n.substr(n.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n);return t};this.asArray=function(n){return n===undefined||n==null?[]:n instanceof Array?n:[n]};this.toXmlDateTime=function(n){return n instanceof Date?n.toISOString():typeof n=="number"?new Date(n).toISOString():null};this.asDateTime=function(n){return typeof n=="string"?l(n):n};this.xml2json=function(n){return u(n)};this.xml_str2json=function(n){var t=this.parseXmlString(n);return t!=null?this.xml2json(t):null};this.json2xml_str=function(n){return s(n,"")};this.json2xml=function(n){var t=this.json2xml_str(n);return this.parseXmlString(t)};this.getVersion=function(){return w}}});!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.Clipboard=n()}}(function(){var n;return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){var i=n("matches-selector");t.exports=function(n,t,r){for(var u=r?n:n.parentNode;u&&u!==document;){if(i(u,t))return u;u=u.parentNode}}},{"matches-selector":5}],2:[function(n,t){function i(n,t,i,u,f){var e=r.apply(this,arguments);return n.addEventListener(i,e,f),{destroy:function(){n.removeEventListener(i,e,f)}}}function r(n,t,i,r){return function(i){i.delegateTarget=u(i.target,t,!0);i.delegateTarget&&r.call(n,i)}}var u=n("closest");t.exports=i},{closest:1}],3:[function(n,t,i){i.node=function(n){return void 0!==n&&n instanceof HTMLElement&&1===n.nodeType};i.nodeList=function(n){var t=Object.prototype.toString.call(n);return void 0!==n&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in n&&(0===n.length||i.node(n[0]))};i.string=function(n){return"string"==typeof n||n instanceof String};i.fn=function(n){var t=Object.prototype.toString.call(n);return"[object Function]"===t}},{}],4:[function(n,t){function r(n,t,r){if(!n&&!t&&!r)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(r))throw new TypeError("Third argument must be a Function");if(i.node(n))return u(n,t,r);if(i.nodeList(n))return f(n,t,r);if(i.string(n))return e(n,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}function u(n,t,i){return n.addEventListener(t,i),{destroy:function(){n.removeEventListener(t,i)}}}function f(n,t,i){return Array.prototype.forEach.call(n,function(n){n.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(n,function(n){n.removeEventListener(t,i)})}}}function e(n,t,i){return o(document.body,n,t,i)}var i=n("./is"),o=n("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(n,t){function u(n,t){if(r)return r.call(n,t);for(var u=n.parentNode.querySelectorAll(t),i=0;i<u.length;++i)if(u[i]==n)return!0;return!1}var i=Element.prototype,r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=u},{}],6:[function(n,t){function i(n){var i,t,r;return"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName?(n.focus(),n.setSelectionRange(0,n.value.length),i=n.value):(n.hasAttribute("contenteditable")&&n.focus(),t=window.getSelection(),r=document.createRange(),r.selectNodeContents(n),t.removeAllRanges(),t.addRange(r),i=t.toString()),i}t.exports=i},{}],7:[function(n,t){function i(){}i.prototype={on:function(n,t,i){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:i}),this},once:function(n,t,i){function r(){u.off(n,r);t.apply(i,arguments)}var u=this;return r._=t,this.on(n,r,i)},emit:function(n){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[n]||[]).slice(),t=0,u=i.length;for(t;u>t;t++)i[t].fn.apply(i[t].ctx,r);return this},off:function(n,t){var u=this.e||(this.e={}),r=u[n],f=[],i,e;if(r&&t)for(i=0,e=r.length;e>i;i++)r[i].fn!==t&&r[i].fn._!==t&&f.push(r[i]);return f.length?u[n]=f:delete u[n],this}};t.exports=i},{}],8:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","select"],f);else if("undefined"!=typeof r)f(i,t("select"));else{var e={exports:{}};f(e,u.select);u.clipboardAction=e.exports}}(this,function(n,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=r(t),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(t){u(this,n);this.resolveOptions(t);this.initSelection()}return n.prototype.resolveOptions=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=n.action;this.emitter=n.emitter;this.target=n.target;this.text=n.text;this.trigger=n.trigger;this.selectedText=""},n.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},n.prototype.selectFake=function(){var n=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake();this.fakeHandlerCallback=function(){return n.removeFake()};this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[t?"right":"left"]="-9999px";this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=i.default(this.fakeElem);this.copyText()},n.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},n.prototype.selectTarget=function(){this.selectedText=i.default(this.target);this.copyText()},n.prototype.copyText=function(){var n=void 0;try{n=document.execCommand(this.action)}catch(t){n=!1}this.handleResult(n)},n.prototype.handleResult=function(n){n?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},n.prototype.clearSelection=function(){this.target&&this.target.blur();window.getSelection().removeAllRanges()},n.prototype.destroy=function(){this.removeFake()},e(n,[{key:"action",set:function(){var n=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=n,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(n){if(void 0!==n){if(!n||"object"!==("undefined"==typeof n?"undefined":f(n))||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=n}},get:function(){return this._target}}]),n}();n.exports=o})},{select:6}],9:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if("undefined"!=typeof r)f(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var e={exports:{}};f(e,u.clipboardAction,u.tinyEmitter,u.goodListener);u.clipboard=e.exports}}(this,function(n,t,i,r){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n,t){var i="data-clipboard-"+n;if(t.hasAttribute(i))return t.getAttribute(i)}var h=u(t),c=u(i),l=u(r),a=function(n){function t(i,r){e(this,t);var u=o(this,n.call(this));return u.resolveOptions(r),u.listenClick(i),u}return s(t,n),t.prototype.resolveOptions=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof n.action?n.action:this.defaultAction;this.target="function"==typeof n.target?n.target:this.defaultTarget;this.text="function"==typeof n.text?n.text:this.defaultText},t.prototype.listenClick=function(n){var t=this;this.listener=l.default(n,"click",function(n){return t.onClick(n)})},t.prototype.onClick=function(n){var t=n.delegateTarget||n.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(n){return f("action",n)},t.prototype.defaultTarget=function(n){var t=f("target",n);if(t)return document.querySelector(t)},t.prototype.defaultText=function(n){return f("text",n)},t.prototype.destroy=function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(c.default);n.exports=a})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)});!function(){"use strict";var n,t,i="ngclipboard";"object"==typeof module&&module.exports?(n=require("angular"),t=require("clipboard"),module.exports=i):(n=window.angular,t=window.Clipboard);n.module(i,[]).directive("ngclipboard",function(){return{restrict:"A",scope:{ngclipboardSuccess:"&",ngclipboardError:"&"},link:function(n,i){var r=new t(i[0]);r.on("success",function(t){n.$apply(function(){n.ngclipboardSuccess({e:t})})});r.on("error",function(t){n.$apply(function(){n.ngclipboardError({e:t})})})}}})}();!function(n){"use strict";function t(n){if("undefined"==typeof n.length)r(n,"click",i);else if("string"!=typeof n&&!(n instanceof String))for(var t=0;t<n.length;t++)r(n[t],"click",i)}function i(n){var i,r,f,e;return n=n||window.event,i=n.currentTarget||n.srcElement,f=i.getAttribute("href"),f&&(e=n.ctrlKey||n.shiftKey||n.metaKey,r=i.getAttribute("target"),e||r&&!u(r))?(t.open(f),n.preventDefault?n.preventDefault():n.returnValue=!1,!1):void 0}function r(n,t,i){var r,u;return n.addEventListener?n.addEventListener(t,i,!1):(r="on"+t,n.attachEvent?n.attachEvent(r,i):n[r]?(u=n[r],n[r]=function(){i();u()}):n[r]=i,void 0)}function e(n,t,i){var r,e,u,f,o;return r=document.createElement("iframe"),r.style.display="none",document.body.appendChild(r),e=r.contentDocument||r.contentWindow.document,f='"'+n+'"',t&&(f+=', "'+t+'"'),i&&(f+=', "'+i+'"'),u=e.createElement("script"),u.type="text/javascript",u.text="window.parent = null; window.top = null;window.frameElement = null; var child = window.open("+f+");child.opener = null",e.body.appendChild(u),o=r.contentWindow.child,document.body.removeChild(r),o}function u(n){return"_top"===n||"_self"===n||"_parent"===n}var o=-1!==navigator.userAgent.indexOf("MSIE"),f=window.open;t.open=function(n,t,i){var r;return u(t)?f.apply(window,arguments):o?(r=f.apply(window,arguments),r.opener=null,r):e(n,t,i)};t.patch=function(){window.open=function(){return t.open.apply(this,arguments)}};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports?module.exports=t:exports.blankshield=t);"function"==typeof define&&"object"==typeof define.amd&&define("blankshield",[],function(){return t});n.blankshield=t}(this);!function(n,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(n.commonJsStrict={})}(this,function(n){function k(n){if(n in st)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=ot.length;t--;)if((n=ot[t]+i)in st)return n}function y(n,t){n=n||{};for(var i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(n[i]=n[i]||{},y(n[i],t[i])):n[i]=t[i];return n}function d(n){return y({},n)}function g(n){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0);n.dispatchEvent(t)}else n.fireEvent("onchange")}function t(n,t,i){var u,r;"string"==typeof t&&(u=t,(t={})[u]=i);for(r in t)n.style[r]=t[r]}function r(n,t){n.classList?n.classList.add(t):n.className+=" "+t}function ct(n,t){for(var i in t)n.setAttribute(i,t[i])}function h(n){return parseInt(n,10)}function lt(n,t){var i=n.naturalWidth,r=n.naturalHeight,u=t||nt(n),f;return u&&u>=5&&(f=i,i=r,r=f),{width:i,height:r}}function nt(n){return n.exifdata?n.exifdata.Orientation:1}function tt(n,t,i){var u=t.width,f=t.height,r=n.getContext("2d");switch(n.width=t.width,n.height=t.height,r.save(),i){case 2:r.translate(u,0);r.scale(-1,1);break;case 3:r.translate(u,f);r.rotate(Math.PI/1);break;case 4:r.translate(0,f);r.scale(1,-1);break;case 5:n.width=f;n.height=u;r.rotate(Math.PI/2);r.scale(1,-1);break;case 6:n.width=f;n.height=u;r.rotate(Math.PI/2);r.translate(0,-f);break;case 7:n.width=f;n.height=u;r.rotate(Math.PI/-2);r.translate(-u,f);r.scale(1,-1);break;case 8:n.width=f;n.height=u;r.translate(0,u);r.rotate(Math.PI/-2)}r.drawImage(t,0,0,u,f);r.restore()}function ii(){var n,f,e,o,h,c=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||it.call(this);this.data={};this.elements={};n=this.elements.boundary=document.createElement("div");f=this.elements.viewport=document.createElement("div");this.elements.img=document.createElement("img");e=this.elements.overlay=document.createElement("div");this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=this.elements.img;r(n,"cr-boundary");n.setAttribute("aria-dropeffect","none");o=this.options.boundary.width;h=this.options.boundary.height;t(n,{width:o+(isNaN(o)?"":"px"),height:h+(isNaN(h)?"":"px")});r(f,"cr-viewport");c&&r(f,c);t(f,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});f.setAttribute("tabindex",0);r(this.elements.preview,"cr-image");ct(this.elements.preview,{alt:"preview","aria-grabbed":"false"});r(e,"cr-overlay");this.element.appendChild(n);n.appendChild(this.elements.preview);n.appendChild(f);n.appendChild(e);r(this.element,"croppie-container");this.options.customClass&&r(this.element,this.options.customClass),function(){function b(t,i){var u=n.elements.preview.getBoundingClientRect(),e=r.y+i,o=r.x+t;n.options.enforceBoundary?(f.top>u.top+i&&f.bottom<u.bottom+i&&(r.y=e),f.left>u.left+t&&f.right<u.right+t&&(r.x=o)):(r.y=e,r.x=o)}function k(t){n.elements.preview.setAttribute("aria-grabbed",t);n.elements.boundary.setAttribute("aria-dropeffect",t?"move":"none")}function d(t){if((void 0===t.button||0===t.button)&&(t.preventDefault(),!c)){if(c=!0,o=t.pageX,h=t.pageY,t.touches){var u=t.touches[0];o=u.pageX;h=u.pageY}k(c);r=i.parse(n.elements.preview);window.addEventListener("mousemove",l);window.addEventListener("touchmove",l);window.addEventListener("mouseup",y);window.addEventListener("touchend",y);document.body.style[s]="none";f=n.elements.viewport.getBoundingClientRect()}}function l(i){var f,s,v,k;i.preventDefault();f=i.pageX;s=i.pageY;i.touches&&(v=i.touches[0],f=v.pageX,s=v.pageY);var d=f-o,nt=s-h,y={};if("touchmove"===i.type&&i.touches.length>1){var c=i.touches[0],l=i.touches[1],w=Math.sqrt((c.pageX-l.pageX)*(c.pageX-l.pageX)+(c.pageY-l.pageY)*(c.pageY-l.pageY));return e||(e=w/n._currentZoom),k=w/e,a.call(n,k),void g(n.elements.zoomer)}b(d,nt);y[u]=r.toString();t(n.elements.preview,y);p.call(n);h=s;o=f}function y(){k(c=!1);window.removeEventListener("mousemove",l);window.removeEventListener("touchmove",l);window.removeEventListener("mouseup",y);window.removeEventListener("touchend",y);document.body.style[s]="";w.call(n);v.call(n);e=0}var o,h,e,f,r,n=this,c=!1;n.elements.overlay.addEventListener("mousedown",d);n.elements.viewport.addEventListener("keydown",function(o){var y=37,h=38,k=39,l=40,a,c;o.shiftKey&&(o.keyCode===h||o.keyCode===l)?(c=0,c=o.keyCode===h?parseFloat(n.elements.zoomer.value,10)+parseFloat(n.elements.zoomer.step,10):parseFloat(n.elements.zoomer.value,10)-parseFloat(n.elements.zoomer.step,10),n.setZoom(c)):n.options.enableKeyMovement&&o.keyCode>=37&&o.keyCode<=40&&(o.preventDefault(),a=function(n){switch(n){case y:return[1,0];case h:return[0,1];case k:return[-1,0];case l:return[0,-1]}}(o.keyCode),r=i.parse(n.elements.preview),document.body.style[s]="none",f=n.elements.viewport.getBoundingClientRect(),function(i){var o=i[0],h=i[1],f={};b(o,h);f[u]=r.toString();t(n.elements.preview,f);p.call(n);document.body.style[s]="";w.call(n);v.call(n);e=0}(a))});n.elements.overlay.addEventListener("touchstart",d)}.call(this);this.options.enableZoom&&function(){function f(){vt.call(n,{value:parseFloat(t.value),origin:new l(n.elements.preview),viewportRect:n.elements.viewport.getBoundingClientRect(),transform:i.parse(n.elements.preview)})}function e(t){var i,r;if("ctrl"===n.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;i=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0;r=n._currentZoom+i*n._currentZoom;t.preventDefault();a.call(n,r);f.call(n)}var n=this,u=n.elements.zoomerWrap=document.createElement("div"),t=n.elements.zoomer=document.createElement("input");r(u,"cr-slider-wrap");r(t,"cr-slider");t.type="range";t.step="0.0001";t.value=1;t.style.display=n.options.showZoomer?"":"none";t.setAttribute("aria-label","zoom");n.element.appendChild(u);u.appendChild(t);n._currentZoom=1;n.elements.zoomer.addEventListener("input",f);n.elements.zoomer.addEventListener("change",f);n.options.mouseWheelZoom&&(n.elements.boundary.addEventListener("mousewheel",e),n.elements.boundary.addEventListener("DOMMouseScroll",e))}.call(this);this.options.enableResize&&function(){function h(t){var i,r;void 0!==t.button&&0!==t.button||(t.preventDefault(),y)||(i=n.elements.overlay.getBoundingClientRect(),(y=!0,e=t.pageX,o=t.pageY,a=-1!==t.currentTarget.className.indexOf("vertical")?"v":"h",b=i.width,k=i.height,t.touches)&&(r=t.touches[0],e=r.pageX,o=r.pageY),window.addEventListener("mousemove",c),window.addEventListener("touchmove",c),window.addEventListener("mouseup",l),window.addEventListener("touchend",l),document.body.style[s]="none")}function c(r){var u=r.pageX,f=r.pageY,s;(r.preventDefault(),r.touches)&&(s=r.touches[0],u=s.pageX,f=s.pageY);var h=u-e,c=f-o,l=n.options.viewport.height+c,y=n.options.viewport.width+h;"v"===a&&l>=d&&l<=k?(t(i,{height:l+"px"}),n.options.boundary.height+=c,t(n.elements.boundary,{height:n.options.boundary.height+"px"}),n.options.viewport.height+=c,t(n.elements.viewport,{height:n.options.viewport.height+"px"})):"h"===a&&y>=d&&y<=b&&(t(i,{width:y+"px"}),n.options.boundary.width+=h,t(n.elements.boundary,{width:n.options.boundary.width+"px"}),n.options.viewport.width+=h,t(n.elements.viewport,{width:n.options.viewport.width+"px"}));p.call(n);ft.call(n);w.call(n);v.call(n);o=f;e=u}function l(){y=!1;window.removeEventListener("mousemove",c);window.removeEventListener("touchmove",c);window.removeEventListener("mouseup",l);window.removeEventListener("touchend",l);document.body.style[s]=""}var a,e,o,b,k,u,f,n=this,i=document.createElement("div"),y=!1,d=50;r(i,"cr-resizer");t(i,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});this.options.resizeControls.height&&(r(u=document.createElement("div"),"cr-resizer-vertical"),i.appendChild(u));this.options.resizeControls.width&&(r(f=document.createElement("div"),"cr-resizer-horisontal"),i.appendChild(f));u&&(u.addEventListener("mousedown",h),u.addEventListener("touchstart",h));f&&(f.addEventListener("mousedown",h),f.addEventListener("touchstart",h));this.elements.boundary.appendChild(i)}.call(this)}function it(){return this.options.enableExif&&window.EXIF}function a(n){if(this.options.enableZoom){var t=this.elements.zoomer,i=c(n,4);t.value=Math.max(t.min,Math.min(t.max,i))}}function vt(n){function c(){var n={};n[u]=f.toString();n[o]=s.toString();t(r.elements.preview,n)}var r=this,f=n?n.transform:i.parse(r.elements.preview),y=n?n.viewportRect:r.elements.viewport.getBoundingClientRect(),s=n?n.origin:new l(r.elements.preview);if(r._currentZoom=n?n.value:r._currentZoom,f.scale=r._currentZoom,r.elements.zoomer.setAttribute("aria-valuenow",r._currentZoom),c(),r.options.enforceBoundary){var a=function(n){var t=this._currentZoom,i=n.width,r=n.height,v=this.elements.boundary.clientWidth/2,y=this.elements.boundary.clientHeight/2,u=this.elements.preview.getBoundingClientRect(),f=u.width,e=u.height,o=i/2,s=r/2,h=-1*(o/t-v),c=-1*(s/t-y),l=1/t*o,a=1/t*s;return{translate:{maxX:h,minX:h-(f*(1/t)-i*(1/t)),maxY:c,minY:c-(e*(1/t)-r*(1/t))},origin:{maxX:f*(1/t)-l,minX:l,maxY:e*(1/t)-a,minY:a}}}.call(r,y),e=a.translate,h=a.origin;f.x>=e.maxX&&(s.x=h.minX,f.x=e.maxX);f.x<=e.minX&&(s.x=h.maxX,f.x=e.minX);f.y>=e.maxY&&(s.y=h.minY,f.y=e.maxY);f.y<=e.minY&&(s.y=h.maxY,f.y=e.minY)}c();wt.call(r);v.call(r)}function w(){var r=this._currentZoom,c=this.elements.preview.getBoundingClientRect(),f=this.elements.viewport.getBoundingClientRect(),h=i.parse(this.elements.preview.style[u]),a=new l(this.elements.preview),v=f.top-c.top+f.height/2,y=f.left-c.left+f.width/2,n={},e={},s;n.y=v/r;n.x=y/r;e.y=(n.y-a.y)*(1-r);e.x=(n.x-a.x)*(1-r);h.x-=e.x;h.y-=e.y;s={};s[o]=n.x+"px "+n.y+"px";s[u]=h.toString();t(this.elements.preview,s)}function p(){if(this.elements){var i=this.elements.boundary.getBoundingClientRect(),n=this.elements.preview.getBoundingClientRect();t(this.elements.overlay,{width:n.width+"px",height:n.height+"px",top:n.top-i.top+"px",left:n.left-i.left+"px"})}}function v(){var t,n=this.get();bt.call(this)&&(this.options.update.call(this,n),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.croppie",n):(window.CustomEvent?t=new CustomEvent("update",{detail:n}):(t=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,n),this.element.dispatchEvent(t)))}function bt(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function ut(){var r,n={},e=this.elements.preview,f=new i(0,0,1),s=new l;bt.call(this)&&!this.data.bound&&(this.data.bound=!0,n[u]=f.toString(),n[o]=s.toString(),n.opacity=1,t(e,n),r=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=r.width,this._originalImageHeight=r.height,this.data.orientation=nt(this.elements.img),this.options.enableZoom?ft.call(this,!0):this._currentZoom=1,f.scale=this._currentZoom,n[u]=f.toString(),t(e,n),this.data.points.length?function(n){if(4!==n.length)throw"Croppie - Invalid number of points supplied: "+n;var c=n[2]-n[0],r=this.elements.viewport.getBoundingClientRect(),s=this.elements.boundary.getBoundingClientRect(),h={left:r.left-s.left,top:r.top-s.top},f=r.width/c,l=n[1],v=n[0],y=-1*n[1]+h.top,p=-1*n[0]+h.left,e={};e[o]=v+"px "+l+"px";e[u]=new i(p,y,f).toString();t(this.elements.preview,e);a.call(this,f);this._currentZoom=f}.call(this,this.data.points):function(){var r=this.elements.preview.getBoundingClientRect(),n=this.elements.viewport.getBoundingClientRect(),f=this.elements.boundary.getBoundingClientRect(),e=n.left-f.left,o=n.top-f.top,s=e-(r.width-n.width)/2,h=o-(r.height-n.height)/2,c=new i(s,h,this._currentZoom);t(this.elements.preview,u,c.toString())}.call(this),w.call(this),p.call(this))}function ft(n){var e,o,s,h,i=0,u=this.options.maxZoom||1.5,t=this.elements.zoomer,f=parseFloat(t.value),l=this.elements.boundary.getBoundingClientRect(),r=lt(this.elements.img,this.data.orientation),v=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(s=v.width/r.width,h=v.height/r.height,i=Math.max(s,h));i>=u&&(u=i+1);t.min=c(i,4);t.max=c(u,4);!n&&(f<t.min||f>t.max)?a.call(this,f<t.min?t.min:t.max):n&&(o=Math.max(l.width/r.width,l.height/r.height),e=null!==this.data.boundZoom?this.data.boundZoom:o,a.call(this,e));g(t)}function et(n){var r=n.points,s=h(r[0]),c=h(r[1]),u=h(r[2])-s,f=h(r[3])-c,l=n.circle,i=document.createElement("canvas"),t=i.getContext("2d"),e=n.outputWidth||u,o=n.outputHeight||f;return n.outputWidth&&n.outputHeight,i.width=e,i.height=o,n.backgroundColor&&(t.fillStyle=n.backgroundColor,t.fillRect(0,0,e,o)),!1!==this.options.enforceBoundary&&(u=Math.min(u,this._originalImageWidth),f=Math.min(f,this._originalImageHeight)),t.drawImage(this.elements.preview,s,c,u,f,0,0,e,o),l&&(t.fillStyle="#fff",t.globalCompositeOperation="destination-in",t.beginPath(),t.arc(i.width/2,i.height/2,i.width/2,0,2*Math.PI,!0),t.closePath(),t.fill()),i}function kt(n,t){var f,e,o,r,i=this,u=[],s=null,c=it.call(i);if("string"==typeof n)f=n,n={};else if(Array.isArray(n))u=n.slice();else{if(void 0===n&&i.data.url)return ut.call(i),v.call(i),null;f=n.url;u=n.points||[];s=void 0===n.zoom?null:n.zoom}return i.data.bound=!1,i.data.url=f||i.data.url,i.data.boundZoom=s,(e=f,o=c,r=new Image,r.style.opacity=0,new Promise(function(n){function t(){r.style.opacity=1;setTimeout(function(){n(r)},1)}r.removeAttribute("crossOrigin");e.match(/^https?:\/\/|^\/\//)&&r.setAttribute("crossOrigin","anonymous");r.onload=function(){o?EXIF.getData(r,function(){t()}):t()};r.src=e})).then(function(r){if(function(n){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){n.classList.add(t)}),this.elements.img.parentNode.replaceChild(n,this.elements.img),this.elements.preview=n);this.elements.img=n}.call(i,r),u.length)i.options.relative&&(u=[u[0]*r.naturalWidth/100,u[1]*r.naturalHeight/100,u[2]*r.naturalWidth/100,u[3]*r.naturalHeight/100]);else{var e,o,f=lt(r),c=i.elements.viewport.getBoundingClientRect(),s=c.width/c.height;f.width/f.height>s?e=(o=f.height)*s:(e=f.width,o=f.height/s);var l=(f.width-e)/2,a=(f.height-o)/2,y=l+e,p=a+o;i.data.points=[l,a,y,p]}i.data.points=u.map(function(n){return parseFloat(n)});i.options.useCanvas&&function(n){var t=this.elements.canvas,i=this.elements.img,r=t.getContext("2d"),u=it.call(this);n=this.options.enableOrientation&&n;r.clearRect(0,0,t.width,t.height);t.width=i.width;t.height=i.height;u&&!n?tt(t,i,h(nt(i)||0)):n&&tt(t,i,n)}.call(i,n.orientation||1);ut.call(i);v.call(i);t&&t()}).catch(function(n){console.error("Croppie:"+n)})}function c(n,t){return parseFloat(n).toFixed(t||0)}function dt(){var o=this.elements.preview.getBoundingClientRect(),i=this.elements.viewport.getBoundingClientRect(),r=i.left-o.left,u=i.top-o.top,s=(i.width-this.elements.viewport.offsetWidth)/2,h=(i.height-this.elements.viewport.offsetHeight)/2,f=r+this.elements.viewport.offsetWidth+s,e=u+this.elements.viewport.offsetHeight+h,n=this._currentZoom,t;return(n===1/0||isNaN(n))&&(n=1),t=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY,r=Math.max(t,r/n),u=Math.max(t,u/n),f=Math.max(t,f/n),e=Math.max(t,e/n),{points:[c(r),c(u),c(f),c(e)],zoom:n,orientation:this.data.orientation}}function ri(n){var f=this,i=dt.call(f),e=y(d(gt),d(n)),c="string"==typeof n?n:e.type||"base64",u=e.size||"viewport",s=e.format,l=e.quality,a=e.backgroundColor,v="boolean"==typeof e.circle?e.circle:"circle"===f.options.viewport.type,o=f.elements.viewport.getBoundingClientRect(),h=o.width/o.height;return"viewport"===u?(i.outputWidth=o.width,i.outputHeight=o.height):"object"==typeof u&&(u.width&&u.height?(i.outputWidth=u.width,i.outputHeight=u.height):u.width?(i.outputWidth=u.width,i.outputHeight=u.width/h):u.height&&(i.outputWidth=u.height*h,i.outputHeight=u.height)),ni.indexOf(s)>-1&&(i.format="image/"+s,i.quality=l),i.circle=v,i.url=f.data.url,i.backgroundColor=a,new Promise(function(n){switch(c.toLowerCase()){case"rawcanvas":n(et.call(f,i));break;case"canvas":case"base64":n(function(n){return et.call(this,n).toDataURL(n.format,n.quality)}.call(f,i));break;case"blob":(function(n){var t=this;return new Promise(function(i){et.call(t,n).toBlob(function(n){i(n)},n.format,n.quality)})}).call(f,i).then(n);break;default:n(function(n){var i=n.points,u=document.createElement("div"),f=document.createElement("img"),e=i[2]-i[0],o=i[3]-i[1];return r(u,"croppie-result"),u.appendChild(f),t(f,{left:-1*i[0]+"px",top:-1*i[1]+"px"}),f.src=n.url,t(u,{width:e+"px",height:o+"px"}),u}.call(f,i))}})}function ui(n){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var i,r,t,u,f,e=this.elements.canvas;this.data.orientation=(i=this.data.orientation,r=n,t=ht.indexOf(i)>-1?ht:ti,u=t.indexOf(i),f=r/90%t.length,t[(t.length+u+f%t.length)%t.length]);tt(e,this.elements.img,this.data.orientation);ft.call(this);vt.call(this);copy=null}function f(n,t){var i,u,e;if(n.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");(this.element=n,this.options=y(d(f.defaults),t),"img"===this.element.tagName.toLowerCase())&&(i=this.element,r(i,"cr-original-image"),ct(i,{"aria-hidden":"true",alt:""}),u=document.createElement("div"),this.element.parentNode.appendChild(u),u.appendChild(i),this.element=u,this.options.url=this.options.url||i.src);(ii.call(this),this.options.url)&&(e={url:this.options.url,points:this.options.points},delete this.options.url,delete this.options.points,kt.call(this,e))}var at,i,l,rt,yt,pt,b,wt,gt,ni,e;"function"!=typeof Promise&&function(n){function i(n,t){return function(){n.apply(t,arguments)}}function t(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];o(n,i(f,this),i(r,this))}function u(n){var t=this;return null===this._state?void this._deferreds.push(n):void s(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null!==i){try{r=i(t._value)}catch(t){return void n.reject(t)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)})}function f(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return void o(i(t,n),i(f,this),i(r,this))}this._state=!0;this._value=n;e.call(this)}catch(n){r.call(this,n)}}function r(n){this._state=!1;this._value=n;e.call(this)}function e(){for(var n=0,t=this._deferreds.length;t>n;n++)u.call(this,this._deferreds[n]);this._deferreds=null}function o(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(n){if(r)return;r=!0;i(n)}}var h=setTimeout,s="function"==typeof setImmediate&&setImmediate||function(n){h(n,1)},c=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};t.prototype.catch=function(n){return this.then(null,n)};t.prototype.then=function(n,i){var r=this;return new t(function(t,f){u.call(r,new function(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}(n,i,t,f))})};t.all=function(){var n=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new t(function(t,i){function u(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){u(r,n)},i)}n[r]=e;0==--f&&t(n)}catch(n){i(n)}}if(0===n.length)return t([]);for(var f=n.length,r=0;r<n.length;r++)u(r,n[r])})};t.resolve=function(n){return n&&"object"==typeof n&&n.constructor===t?n:new t(function(t){t(n)})};t.reject=function(n){return new t(function(t,i){i(n)})};t.race=function(n){return new t(function(t,i){for(var r=0,u=n.length;u>r;r++)n[r].then(t,i)})};t._setImmediateFn=function(n){s=n};"undefined"!=typeof module&&module.exports?module.exports=t:n.Promise||(n.Promise=t)}(this);"function"!=typeof CustomEvent&&function(){function n(n,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}n.prototype=window.Event.prototype;window.CustomEvent=n}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(n,t,i){for(var u=atob(this.toDataURL(t,i).split(",")[1]),f=u.length,e=new Uint8Array(f),r=0;r<f;r++)e[r]=u.charCodeAt(r);n(new Blob([e],{type:t||"image/png"}))}});var o,u,s,ot=["Webkit","Moz","ms"],st=document.createElement("div").style,ht=[1,8,3,6],ti=[2,7,4,5];u=k("transform");o=k("transformOrigin");s=k("userSelect");at={translate3d:{suffix:", 0px"},translate:{suffix:""}};i=function(n,t,i){this.x=parseFloat(n);this.y=parseFloat(t);this.scale=parseFloat(i)};i.parse=function(n){return n.style?i.parse(n.style[u]):n.indexOf("matrix")>-1||n.indexOf("none")>-1?i.fromMatrix(n):i.fromString(n)};i.fromMatrix=function(n){var t=n.substring(7).split(",");return t.length&&"none"!==n||(t=[1,0,0,1,0,0]),new i(h(t[4]),h(t[5]),parseFloat(t[0]))};i.fromString=function(n){var r=n.split(") "),t=r[0].substring(f.globals.translate.length+1).split(","),u=r.length>1?r[1].substring(6):1,e=t.length>1?t[0]:0,o=t.length>1?t[1]:0;return new i(e,o,u)};i.prototype.toString=function(){var n=at[f.globals.translate].suffix||"";return f.globals.translate+"("+this.x+"px, "+this.y+"px"+n+") scale("+this.scale+")"};l=function(n){if(!n||!n.style[o])return this.x=0,void(this.y=0);var t=n.style[o].split(" ");this.x=parseFloat(t[0]);this.y=parseFloat(t[1])};l.prototype.toString=function(){return this.x+"px "+this.y+"px"};wt=(rt=p,yt=500,function(){var n=this,t=arguments,i=pt&&!b;clearTimeout(b);b=setTimeout(function(){b=null;pt||rt.apply(n,t)},yt);i&&rt.apply(n,t)});gt={type:"canvas",format:"png",quality:1};ni=["jpeg","webp","png"];window.jQuery&&(e=window.jQuery,e.fn.croppie=function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),t=e(this).data("croppie");return"get"===n?t.get():"result"===n?t.result.apply(t,i):"bind"===n?t.bind.apply(t,i):this.each(function(){var t=e(this).data("croppie"),r;if(t){if(r=t[n],!e.isFunction(r))throw"Croppie "+n+" method not found";r.apply(t,i);"destroy"===n&&e(this).removeData("croppie")}})}return this.each(function(){var t=new f(this,n);t.$=e;e(this).data("croppie",t)})});f.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}};f.globals={translate:"translate3d"};y(f.prototype,{bind:function(n,t){return kt.call(this,n,t)},get:function(){var t=dt.call(this),n=t.points;return this.options.relative&&(n[0]/=this.elements.img.naturalWidth/100,n[1]/=this.elements.img.naturalHeight/100,n[2]/=this.elements.img.naturalWidth/100,n[3]/=this.elements.img.naturalHeight/100),t},result:function(n){return ri.call(this,n)},refresh:function(){return function(){ut.call(this)}.call(this)},setZoom:function(n){a.call(this,n);g(this.elements.zoomer)},rotate:function(n){ui.call(this,n)},destroy:function(){return function(){var n,t;this.element.removeChild(this.elements.boundary);n=this.element;t="croppie-container";n.classList?n.classList.remove(t):n.className=n.className.replace(t,"");this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap);delete this.elements}.call(this)}});n.Croppie=window.Croppie=f})