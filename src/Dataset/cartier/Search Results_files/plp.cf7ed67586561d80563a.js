(window.cartierFeSetup=window.cartierFeSetup||[]).push([[46],{828:function(e,i,t){var r,a,s,c;function n(){var e=s(".filter-module");e.find(".filter, .js-filter-overlay").removeClass("active"),e.find(".js-info-filter, .js-info-sortBy").removeClass("hidden"),s("body").removeClass("modal-open filter-open"),s(".js-header").removeClass("hidden"),function(e){e.find(".js-sub-filter").removeAttr("style"),e.find(".arrow-icon").addClass("rotate-upward")}(e)}function l(){c.filter.isPriceRangeApplied=!1,c.filter.priceRange[0]=c.filter.minPrice,c.filter.priceRange[1]=c.filter.maxPrice}a=window,s=window.jQuery,c=window.sncf,s&&(c.filter={moduleName:"filter",filterData:{},priceFilterCategory:[],sortParam:"DEF",onlineProductsOnly:!1,priceRange:[0,1e4],isPriceRangeApplied:!1,minPrice:0,maxPrice:0,filteredProducts:[],resetPriceFilter:!0,currency:"",currencyPlacement:!1,cloneObject:function(e){return JSON.parse(JSON.stringify(e))},overlap:function(e,i){for(var t=0;t<e.length;++t)if(-1!==i.indexOf(e[t]))return!0;return!1},matchFilter:function(e,i){for(var t=0;t<e.length;++t)if(e[t]===i)return!0;return!1},setPriceRange:function(e,i){this.priceRange[0]=e,this.priceRange[1]=i,this.minPrice=e,this.maxPrice=i},createPriceFilter:function(e){for(var i,t=[],r=c.filter.currency,a=c.filter.currencyPlacement,n=0,l=e.length;n<l;n++)(i={}).currency=r,i.position=a,0===n?(i.vmin=c.filter.maxPrice,i.vmax=e[n],i.display=c.plp.currencyFormatter(e[n],r,a)):e.length===n+1?(i.vmin=e[n-1],i.vmax=e[n],i.display=c.plp.currencyFormatter(e[n-1],r,a)):(i.vmin=e[n-1],i.vmax=e[n],i.display=c.plp.currencyFormatter(e[n-1],r,a)+" - "+c.plp.currencyFormatter(e[n],r,a)),i.models=0,t.push(i);return c.filter.priceFilterCategory=t},appendToOption:function(e,i){var t=c.filter.currency,r=c.filter.currencyPlacement;return i?c.plp.currencyFormatter(e,t,r)+" "+CQ.I18n.getMessage("filter.price.under"):CQ.I18n.getMessage("filter.price.over")+" "+c.plp.currencyFormatter(e,t,r)},resetPriceFilterCount:function(){for(var e=0;e<c.filter.priceFilterCategory.length;e++)c.filter.priceFilterCategory[e].models=0},applySort:function(e,i){void 0!==e&&(c.filter.sortParam=s(e).attr("id"));var t=[];switch("LTH"===c.filter.sortParam?t.push("price low to high"):"HTL"===c.filter.sortParam?t.push("price high to low"):t.push("price default"),c.filter.onlineProductsOnly&&t.push("sold online"),c.filter.isPriceRangeApplied&&t.push("price range("+c.filter.priceRange[0]+"-"+c.filter.priceRange[1]+")"),Object.values(c.filter.filterData).forEach(function(e){e.forEach(function(e){t.push(e)})}),a.dataLayer.push({event:"filterClick",filter:t}),c.filter.sortParam){case"DEF":c.plp.initProductListRendering(i);break;case"LTH":c.filter.sortByPrice(i,!1);break;case"HTL":c.filter.sortByPrice(i,!0);break;default:return!1}},sortByPrice:function(e,i){var t,r=this,a=r.cloneObject(e),n=0;!0===a.isgroup?Object.keys(a.listing).forEach(function(e){t=r.priceCompare(a.listing[e],i),a.listing[e]=t,n+=t.length,a.count=n}):(t=r.priceCompare(a.listing,i),a.listing=t,a.count=t.length),c.plp.initProductListRendering(a)},priceCompare:function(e,i){var t=[];return e.forEach(function(e){0<e.price&&t.push(e)}),i?t.sort(function(e,i){return i.price-e.price}):t.sort(function(e,i){return e.price-i.price})},getFilteredData:function(i,e){var t=this,r=0,a=t.cloneObject(e);return c.filter.resetPriceFilter&&(c.filter.filteredProducts=[]),!0===a.isgroup?Object.keys(a.listing).forEach(function(e){a.listing[e]=t.productFilter(a.listing[e],i),r+=a.listing[e].length}):(a.listing=t.productFilter(a.listing,i),r+=a.listing.length),a.count=r,a},productFilter:function(e,a){var n=this;return e.filter(function(t){var r=1;return s.isEmptyObject(a)||Object.keys(a).forEach(function(e){var i=void 0!==t.filter[e]?t.filter[e]:[];r=n.overlap(a[e],i)&&1===r?1:0}),n.priceFilter(t,r)})},priceFilter:function(e,i){var t=this;return!(1!==i||!(parseInt(e.price,10)>=t.priceRange[0]&&parseInt(e.price,10)<=t.priceRange[1]||0<=parseInt(e.price,10)&&t.priceRange[0]===t.minPrice&&t.priceRange[1]===t.maxPrice)||!(!t.onlineProductsOnly||t.onlineProductsOnly&&e.sellable)||(c.filter.resetPriceFilter&&c.filter.filteredProducts.push(e),0))},applyPriceFilter:function(){c.filter.resetPriceFilter=!1,c.filter.applyFilter()},addBracketsToText:function(e){return"("+e+")"},updatePriceFilterModels:function(){var e=c.filter.filteredProducts;c.filter.resetPriceFilterCount(),e.forEach(function(i){c.filter.priceFilterCategory.forEach(function(e){if(i.price>=e.vmin&&i.price<=e.vmax)return e.models++,!1})})},renderPriceFilter:function(){var e=s(".js-price-filter-options"),o=0;if(c.filter.priceFilterCategory.forEach(function(e){var i=".js-price-filter-option."+e.vmin+"__"+e.vmax,t=s(i),r=t.find(".js-price-filter-optionDisplay"),a=t.find(".js-price-filter-optionModels"),n=s(".js-price-filter-selectedDisplay"),l=s(".js-price-filter-selectedModels");0===e.models?t.addClass("hidden"):(o++,t.removeClass("hidden"),t.data("models",e.models),t.data("display",e.display),t.data("vmin",e.vmin),t.data("vmax",e.vmax),a.text(c.filter.addBracketsToText(e.models)),r.text(e.display)),t.hasClass("active")&&(n.text(r.data("display")),l.text(c.filter.addBracketsToText(e.models)))}),0===o?c.filter.togglePriceFilter(!0):c.filter.togglePriceFilter(!1),2<=o){var i=s(".js-price-filter-options").find(".js-price-filter-option:not(.hidden):first"),t=s(".js-price-filter-options").find(".js-price-filter-option:not(.hidden):last");i.data("vmin",c.filter.minPrice),i.attr("data-vmin",c.filter.minPrice),i.data("display",c.filter.appendToOption(i.data("vmax"),!0)),i.find(".js-price-filter-optionDisplay").text(c.filter.appendToOption(i.data("vmax"),!0)),i.hasClass("active")&&s(".js-price-filter-selectedDisplay").text(c.filter.appendToOption(i.data("vmax"),!0)),t.data("vmax",c.filter.maxPrice),t.attr("data-vmax",c.filter.maxPrice),t.data("display",c.filter.appendToOption(t.data("vmin"),!1)),t.find(".js-price-filter-optionDisplay").text(c.filter.appendToOption(t.data("vmin"),!1)),t.hasClass("active")&&s(".js-price-filter-selectedDisplay").text(c.filter.appendToOption(t.data("vmin"),!1))}o<=3?e.hasClass("mCustomScrollbar")&&e.mCustomScrollbar("destroy"):e.mCustomScrollbar()},togglePriceFilter:function(e){var i=s(".js-price-select-wrapper"),t=s("#priceRangeMin"),r=s("#priceRangeMax"),a=s(".js-price-filter-options"),n=s(".full-width-view"),l=s(".js-price-filter-apply");e?(a.addClass("disabled"),i.addClass("disabled"),t.prop("disabled",!0).addClass("disabled"),r.prop("disabled",!0).addClass("disabled"),l.prop("disabled",!0).addClass("disabled"),n&&(t.closest(".mn-custom-select--wrapper").addClass("disabled"),r.closest(".mn-custom-select--wrapper").addClass("disabled"))):(a.removeClass("disabled"),i.removeClass("disabled"),t.prop("disabled",!1).removeClass("disabled"),r.prop("disabled",!1).removeClass("disabled"),l.prop("disabled",!1).removeClass("disabled"),n&&(t.closest(".mn-custom-select--wrapper").removeClass("disabled"),r.closest(".mn-custom-select--wrapper").removeClass("disabled")))},resetPriceFilterToDefault:function(){s(".js-price-filter-option").removeClass("active"),s(".js-price-filter-selectedDisplay").text(CQ.I18n.getMessage("filter.price.selectpricerange")),s(".js-price-filter-selectedModels").text("")},setFilterData:function(e){var i=0,t=s(e).closest(".child-filter").attr("data-filter-child"),r=s(e).closest(".parent-filter").attr("data-filter-parent");void 0!==this.filterData[r]?-1!==(i=this.filterData[r].indexOf(t))?(this.filterData[r].splice(i,1),0===this.filterData[r].length&&delete this.filterData[r]):this.filterData[r].push(t):this.filterData[r]=[t]},applyFilter:function(e,i,t){var r;void 0!==e&&c.filter.setFilterData(e),c.filter.toggleFilters("disable"),r=c.filter.getFilteredData(this.filterData,c.plp.getListingData()),c.filter.updatePriceFilterModels(),c.filter.renderPriceFilter(),c.filter.resetPriceFilter=!0,0<r.count?(s(".listing-heading .heading").show(),s(".listing-heading .unavailable-text").addClass("hidden")):(s(".listing-heading .heading").hide(),s(".listing-heading .unavailable-text").removeClass("hidden")),setTimeout(function(){c.filter.toggleFilters("enable")},500),setTimeout(this.removeHeading,600),c.filter.applySort(i,r),t&&t()},toggleFilters:function(e){var i=s(".filter-module .sub-filter li label");"disable"===e?i.addClass("disabled").find("input[type=checkbox]").attr("disabled",!0):i.removeClass("disabled").find("input[type=checkbox]").attr("disabled",!1)},setAriaExpanded:function(e,i){s(e).attr("aria-expanded",i)},removeHeading:function(){s(".pl-list").each(function(){var e=s(this).prev();0===s(this).children(":visible").length&&e.hasClass("pl-heading")?e.hide():e.show()})},submitPriceFilterForm:function(){c.filter.isPriceRangeApplied=!0,c.filter.priceRange[0]=s("#priceRangeMin").val(),c.filter.priceRange[1]=s("#priceRangeMax").val(),s(".full-width-view").length?c.filter.priceRange[0]&&c.filter.priceRange[1]||l():c.filter.resetPriceFilterToDefault(),c.filter.applyPriceFilter()},bindEvents:function(){var i=s(".filter-module");i.on("click keypress",".parent-filter",function(e){var i=s(this);i.find(".js-price-filter .mCSB_inside").removeAttr("style"),13!==e.which&&"click"!==e.type||(c.log("log",i.find(".main-block").attr("data-target")),s(".full-width-view").length?(s(i.find(".main-block").attr("data-target")).slideToggle(100),i.find(".main-block").find(".arrow-icon").toggleClass("rotate-upward")):(s(".sub-filter").not(i.find(".main-block").attr("data-target")).hide(),s(i.find(".main-block").attr("data-target")).toggle(),s(".filter-body").addClass("translate-horizontal"),s(".icon-cross").addClass("visible-xs")),c.filter.setAriaExpanded(s(".filter-module .parent-filter"),!1),c.filter.setAriaExpanded(this,!("true"===i.attr("aria-expanded"))),e.stopPropagation())}),i.on("focus",".parent-filter",function(){s(".filter-module .parent-filter").attr({tabindex:"0",role:"button"})}),i.on("click",".filter-head",function(e){common.isMobileMode()&&(e.stopPropagation(),s(".js-sub-filter").is(":visible")?s(".js-sub-filter").hide():c.filter.setAriaExpanded(s(this).find(".js-panel-title"),!0))}),i.on("focusin",".js-child-filter-label",function(){s(this).find(".icon").hasClass("icon-unchecked")&&s(this).find(".icon").addClass("add-outline")}).on("focusout",function(){s(this).find(".icon").hasClass("icon-unchecked")&&s(this).find(".icon").removeClass("add-outline")}),i.on("focusin",".js-child-filter-label",function(){s(this).find(".icon").addClass("add-outline")}).on("focusout",function(){s(this).find(".icon").removeClass("add-outline")}),s("body").click(function(){s(".full-width-view").length||(s(".sub-filter").hide(),s(".js-filter-body").addClass("mobile-hide"),s(".icon-cross").removeClass("visible-xs"),c.filter.setAriaExpanded(s(".filter-module .parent-filter"),!1))}),i.on("click keypress",".sub-filter li label ,.sub-filter-desp li label ",function(e){var i=s(".full-width-view").length;if(13===e.which||"click"===e.type){if(s(this).hasClass("disabled"))return;i?s(this).find(".checkbox").hasClass("checked")?s(this).find(".checkbox").removeClass("checked"):s(this).find(".checkbox").addClass("checked"):s(this).find("i").hasClass("icon-unchecked")?s(this).find("i").removeClass("icon-unchecked").addClass("icon-checked"):s(this).find("i").removeClass("icon-checked").addClass("icon-unchecked"),c.common.isDesktopMode()||!i?c.filter.applyFilter(this):c.filter.setFilterData(this),e.stopPropagation()}}),i.on("click",".sub-filter li label i,.sub-filter-desp li label i",function(e){e.stopPropagation()}),i.on("click",".js-back-arrow",function(e){s(".filter-body").removeClass("translate-horizontal"),s(".sub-filter").hide(),s(".icon-cross").removeClass("visible-xs"),c.filter.setAriaExpanded(s(".filter-module .parent-filter"),!1),e.stopPropagation()}),i.on("click",".filter-head",function(e){s(".js-filter-body").removeClass("translate-horizontal"),s(".js-filter-body").hasClass("mobile-hide")?s(".js-filter-body").removeClass("mobile-hide"):(s(".js-filter-body").addClass("mobile-hide"),c.filter.setAriaExpanded(s(this).find(".js-panel-title"),!1)),s(".icon-cross").removeClass("visible-xs"),c.filter.setAriaExpanded(s(".filter-module .parent-filter"),!1),e.stopPropagation()}),i.on("click keypress",".sold-online",function(e){var i=s(".full-width-view").length;c.filter.onlineProductsOnly=!c.filter.onlineProductsOnly,!c.common.isDesktopMode()&&i||c.filter.applyFilter(),i?s(this).find(".checkbox").hasClass("checked")?s(this).find(".checkbox").removeClass("checked"):s(this).find(".checkbox").addClass("checked"):0<s(this).find(".icon-heading-checked").length?(s(this).find(".icon-heading-checked").addClass("icon-heading-unchecked").removeClass("icon-heading-checked"),s(this).find(".icon-checked").addClass("icon-unchecked").removeClass("icon-checked")):(s(this).find(".icon-heading-unchecked").addClass("icon-heading-checked").removeClass("icon-heading-unchecked"),s(this).find(".icon-unchecked").addClass("icon-checked").removeClass("icon-unchecked")),e.stopPropagation()}),i.on("click",".sold-online input,.sub-filter",function(e){e.stopPropagation()}),i.on("click",".slider-container",function(e){e.stopPropagation()}),i.on("click",".js-dropdown",function(e){e.stopPropagation(),s(this).find(".js-dropdown-options").slideToggle(250)}),i.on("focusout",".js-dropdown",function(){s(this).removeClass("active"),s(this).find(".js-dropdown-options").slideUp(250)}),i.on("click",".js-dropdown-option",function(){var e=s(".full-width-view").length;s(this).closest(".filter-module").find(".js-dropdown-option").removeClass("active"),s(this).addClass("active"),s(this).parents(".js-dropdown").find(".js-dropdown-selectedText").text(s(this).text()),s(this).parents(".js-dropdown").find(".js-dropdown-input").attr("value",s(this).attr("id")),!c.common.isDesktopMode()&&e||c.filter.applyFilter(void 0,this)}),i.on("click",".js-price-filter",function(e){e.stopPropagation(),s(this).find(".js-price-filter-options").slideToggle(250)}),s(document).on("click",":not(.js-price-filter)",function(){s(this).find(".js-price-filter-options").slideUp(250)}),i.on("click",":not(.js-price-filter)",function(){s(this).find(".js-price-filter-options").slideUp(250)}),i.on("click",".js-price-filter-option",function(){s(this).parent().find(".js-price-filter-option").removeClass("active"),s(this).addClass("active"),s(this).parents(".js-price-filter").find(".js-price-filter-selectedDisplay").text(s(this).data("display")),s(this).parents(".js-price-filter").find(".js-price-filter-selectedModels").text(c.filter.addBracketsToText(s(this).data("models"))),c.filter.priceRange[0]=s(this).data("vmin"),c.filter.priceRange[1]=s(this).data("vmax"),s("#priceRangeMin").val(s(this).data("vmin")),s(this).data("vmax")===c.filter.maxPrice?s("#priceRangeMax").val(""):s("#priceRangeMax").val(s(this).data("vmax")),c.filter.applyPriceFilter()}),i.on("click",".js-price-filter-apply",function(){c.filter.submitPriceFilterForm()}),i.on("change",".js-mnhtn-price-filter-select",function(){var e=s("#priceRangeMin").val(),i=s("#priceRangeMax").val();c.common.isTabletOrDesktopMode()?c.filter.submitPriceFilterForm():(e&&i?(c.filter.isPriceRangeApplied=!0,c.filter.priceRange[0]=e,c.filter.priceRange[1]=i):l(),c.filter.resetPriceFilter=!1)}),i.on("keypress keyup",".js-price-container-input",function(e){if(13===e.keyCode&&(e.stopPropagation(),c.filter.submitPriceFilterForm()),Number.isNaN(Number(e.key)))return!1}),i.on("click",".js-price-filter-clear",function(){l(),s("#priceRangeMin").val(s(this).data("")),s("#priceRangeMax").val(s(this).data("")),c.filter.resetPriceFilterToDefault(),c.filter.applyFilter()}),i.on("click",".mCSB_scrollTools",function(e){e.stopPropagation()}),i.on("click",".js-filter-button",function(){var e=s(this).data("filterType");i.find(".js-info-filterBy, .js-info-sortBy").addClass("hidden"),i.find(".filter").removeClass("sortBy filterBy"),i.find(".js-info-"+e).removeClass("hidden"),s("body").addClass("modal-open filter-open"),s(".js-header").addClass("hidden"),i.find(".filter").addClass("active "+e),i.find(".js-filter-overlay").addClass("active")}),i.on("click",".js-close-filter, .js-filter-overlay",function(){n()}),i.on("click",".js-clear-filter",function(){!function(e){var i,t=s(".filter-module"),r=s("#priceRangeMin"),a=s("#priceRangeMax");e?(t.find(".parent-filter").find(".checkbox.checked").each(function(){var e=s(this);e.removeClass("checked"),e.prev("input").prop("checked",!1)}),t.find(".parent-filter").find("input:checked").each(function(){s(this).prop("checked",!1)}),r.val(""),r.closest(".mn-custom-select--wrapper").find(".js-mn-custom-select--value--txt").text(r.find("option:eq(0)").data("innerText")),a.val(""),a.closest(".mn-custom-select--wrapper").find(".js-mn-custom-select--value--txt").text(r.find("option:eq(0)").data("innerText")),l(),c.filter.onlineProductsOnly=!1,c.filter.filterData={}):(t.find("#DEF").prop("checked",!0),i=t.find("#DEF")),c.filter.applyFilter(void 0,i)}(s(".filter").hasClass("filterBy")),n()}),s(a).on("responsive",function(){s(".full-width-view").length&&c.common.isDesktopMode()&&n()}),i.on("click",".js-apply-filter-btn",function(){var e=s(".filter").hasClass("sortBy")?s(".filter-sort-by").find(".js-dropdown-option.active")[0]:void 0;c.filter.applyFilter(void 0,e,function(){n()})})},cleanFilterForMob:function(){s(".js-sub-filter").removeClass("translated-sub-filter"),s(".js-main-block-title").removeClass("height-auto height-zero"),s(".js-filter-body").hasClass("translate-horizontal")||s(".body").hasClass("translated")?s(".js-filter-body").removeClass("translate-horizontal translate-horizontal-back translated"):s(".js-filter-body").removeClass("translate-horizontal translate-horizontal-back").addClass("translated")},init:function(){c.log("log","filter"),c.log("debug","CAR: filter has been initialized"),this.bindEvents()}},void 0===(r=function(){return c.filter}.apply(i,[]))||(e.exports=r),void 0===(r=function(){return c.filter}.apply(i,[]))||(e.exports=r),c.filter_clp=c.filter,c.filter_plp=c.filter)},978:function(e,i,t){t(979),t(828)},979:function(e,i,t){var r,a,s,c,d,n,l;function o(e){var i={displayCount:!1,model:""},t="ae"===d.country&&"ar"===d.lang;return i.displayCount=!(t&&e<3),i.model=1===e?CQ.I18n.getMessage("product.model.one"):CQ.I18n.getMessage("product.model"),t&&2===e&&(i.model=CQ.I18n.getMessage("product.model.two")),t&&3<=e&&e<=10&&(i.model=CQ.I18n.getMessage("product.model.multiple")),i}function p(e,t){var r=[],a=[];return s.each(e,function(e){var i=arguments[1];i.ranking&&i.ranking[t]?(i.order=e,r.push(i)):a.push(i)}),r.sort(function(e,i){return e.ranking[t]>i.ranking[t]?-1:e.ranking[t]<i.ranking[t]?1:e.order-i.order}),e=r.concat(a)}function f(e,i){if(s(".filter-module").after('<div class="no-filter"></div>'),e&&e.listing&&e.listing.hasOwnProperty("all")&&(e.listing=e.listing.all),e&&e.listing){var t=c.common.getCookie("t2s-rank");e=t&&"undefined"!==t?function(t,r){return t.isgroup?s.each(t.listing,function(e,i){t.listing[e]=p(i,r)}):t.listing=p(t.listing,r),t}(e,t):e}hbsTemplates.ready(function(){e.hasPrice=!(!e.feature||!e.feature[e.pricei18]),e.price=e.hasPrice?e.feature[e.pricei18]:[0,1e8],e.shoppingBagEvent=s("#shoppingBagEvent").val(),e.feature=i.modifyFilterData(e),e.noResult=s("#noResult").val(),e.wishlist=s("#wishlistEvent").val(),e.isManhattanView=s(".full-width-view").length,c.filter.setPriceRange(e.price[0],e.price[e.price.length-1]),c.filter.currency=e.currency,c.filter.currencyPlacement=e.currencyPlacementAtBack,(d.plpData=e).preFilter=d.$preFilter.length&&d.$preFilter.data("pre-filter")?d.$preFilter.data("pre-filter"):{},c.filter.filterData=e.preFilter,e.priceFilter=e.hasPrice?c.filter.createPriceFilter(e.price):[],(!1===e.isgroup&&0<e.listing.length||!0===e.isgroup&&0<Object.keys(e.listing).length)&&(void 0!==e.feature&&0!==Object.keys(e.feature).length||!0===e.hasOnlineSellables||!0===e.hasPrice)&&(s(".no-filter").remove(),s(".filter-module").html(CARF.templates.filter(e))),(e=c.filter.getFilteredData(e.preFilter,e)).hasPrice&&(c.filter.updatePriceFilterModels(),c.filter.renderPriceFilter(),c.filter.resetPriceFilterToDefault(),s(".js-price-filter-currency").text(e.currency).addClass(e.currencyPlacementAtBack?"after":"before")),d.$plpContainer.data("sortby-price")?c.filter.sortByPrice(e,!1):i.initProductListRendering(e),c.analytics.pushScrolledAnalytics()})}function u(e){var i,t,r,a;try{r=e.currency?JSON.parse(e.currency):null,a=e.currencyCode?JSON.parse(e.currencyCode):null}catch(e){c.log("error",e)}if(r&&a){i=Object.keys(r),t=Object.keys(a);for(var n=0;n<i.length;n++)if(i[n].split("_")[1].toUpperCase()===d.$html.data("country").toUpperCase()){e.currency=r[i[n]];break}for(var l=0;l<t.length;l++)if(t[l].toUpperCase()===d.$html.data("country").toUpperCase()){e.currencyCode=a[t[l]];break}}return e}function h(e,i){var t;t={type:"GET",url:e?"/source/modules/plp_pl/data/plp_pl_category.json":s("#previousPagePath").val()+".productlistingservletv2.json",cache:!0},ajaxWrapper.getXhrObj(t).done(function(e){d.euAvailabilityRes&&e&&(e=u(e)),f(e,i)}).fail(function(e){c.log("log",e)})}function m(i,l){var e,t,r,a,n,o=d.$html.data("eu-code");n=o?s("#secureDomain").val()+"/content/cache/appData/cache/service/availability."+o+".html":s("#secureDomain").val()+"/content/cache/appData/cache/service/availability."+d.country.toUpperCase()+".html",e={type:"GET",url:i?"/source/modules/plp_pl/data/plp_pl_category.json":s("#previousPagePath").val()+".productlistingservletv2.json",cache:!0},t={type:"GET",url:i?"/source/modules/plp_pl/data/Availability.US.json":n,cache:!0},r={type:"GET",url:i?"/source/modules/plp_pl/data/Price.US.json":s("#secureDomain").val()+"/content/cache/appData/cache/service/price."+d.country.toUpperCase()+".html",cache:!0},a={type:"GET",url:i?"/source/modules/plp_pl/data/campaign":s("#secureDomain").val()+"/bin/richemont/campaign."+d.country.toUpperCase()+".html",cache:!0},enableCampaign=s("#enableCampaign").val(),s.when(ajaxWrapper.getXhrObj(e),ajaxWrapper.getXhrObj(t),ajaxWrapper.getXhrObj(r),"true"===enableCampaign?ajaxWrapper.getXhrObj(a):"").done(function(e,i,t,r){var a=!s.isEmptyObject(e[0])&&e[0];if(d.euAvailabilityRes&&a&&(a=u(a)),i[0].flag&&a&&(s.isEmptyObject(t[0])||(a=function(a,i){var n,e=cartierAppConfig.pageLocale;return d.euAvailabilityRes&&(e=c.pageService.getEUPriceLocale()),void 0!==(n=void 0!==i.variantPriceFormat?i.variantPriceFormat[e]:void 0)&&Object.keys(a.listing).forEach(function(r){s.map(a.listing[r],function(e,t){e.price=0,s.map(i[d.country.toUpperCase()],function(e,i){i==="CR"+a.listing[r][t].reference&&e&&n&&(a.listing[r][t].priceFormatted=common.getFormattedPrice(e,n),a.listing[r][t].price=e.price)})})}),a}(a,t[0])),s.isEmptyObject(i[0])||(a=function(a,e){var n;return n=d.euAvailabilityRes?d.euAvailabilityRes:d.country,Object.keys(a.listing).forEach(function(r){s.map(a.listing[r],function(i,t){i.online=!1,i.sellable=!1,s.map(e[n.toUpperCase()],function(e){e==="CR"+a.listing[r][t].reference&&(i.sellable=!0,0<i.price&&(i.online=!0))}),e.restrictedGoods&&e.restrictedGoods[d.country.toUpperCase()]&&s.map(e.restrictedGoods[d.country.toUpperCase()],function(e){e==="CR"+a.listing[r][t].reference&&(i.online=!1)})})}),a}(a,i[0])),s.isEmptyObject(r[0])||(a=function(r,a){var n=null;return Object.keys(r.listing).forEach(function(t){s.map(r.listing[t],function(e,i){n=r.listing[t][i].reference,s.map(a,function(e){e[n]&&!r.listing[t][i].online&&(r.listing[t][i].isPrepayment=-1!==e[n].price,r.listing[t][i].partialPrepaymentPrice=0<e[n].price?e[n].formattedPrice:void 0,r.listing[t][i].partialPrepaymentPriceNum=e[n].price,r.listing[t][i].isStockAvailable=e[n].isStockAvailable)})})}),r}(a,r[0]))),a){var n=function(i){var t=Object.keys(i.listing).map(function(e){return t=i.listing[e].map(function(e){return!0===e.online})});return t}(a);a.hasOnlineSellables=n&&"true"===s("#eComCheck").val(),f(a,l)}}).fail(function(e){h(i,l),c.log("log",e)})}function g(e){a.YT&&e.each(function(){var e=arguments[1],i=s(e).attr("id");if(!n[i]){var t=new a.YT.Player(e);n[i]=t}})}function v(){var e=s(this).find(".edito-modal-item.slick-current"),i=e.find(".edito-modal-item-video"),t=e.find(".edito-modal-item-youtube"),r=e.find(".edito-modal-item-vimeo");try{i.length&&i[0].pause(),t.length&&a.YT&&n[t.attr("id")].pauseVideo(),r.length&&l[r.attr("id")].api("pause")}catch(e){c.log("error",e)}}function y(e){return e?{maxwidthdesktop:"900.750",maxwidthlandscapeipad:"900.750",maxwidthportraitipad:"600.500",maxwidthlandscapemobile:"420.350",maxwidthportraitmobile:"420.350",maxwidthmobile:"420.350",selector:""}:{maxwidthdesktop:"600.500",maxwidthlandscapeipad:"600.500",maxwidthportraitipad:"600.500",maxwidthlandscapemobile:"420.350",maxwidthportraitmobile:"420.350",maxwidthmobile:"420.350",selector:""}}function b(e){e.find(".edito-modal-item-youtube").length&&function(e){if(d.ytAPILoaded)g(e);else{var i=document.createElement("script"),t=document.getElementsByTagName("script")[0];i.src="https://www.youtube.com/iframe_api",t.parentNode.insertBefore(i,t),a.onYouTubeIframeAPIReady=function(){g(e)},d.ytAPILoaded=!0}}(e.find(".edito-modal-item-youtube")),e.find(".edito-modal-item-vimeo").length&&function(e){e.each(function(){var e=arguments[1],i=s(e).attr("id"),t=$f(e);l[i]||(l[i]=t)})}(e.find(".edito-modal-item-vimeo"))}function C(){d.$body.off("editoInsertModal:show editoInsertModal:hide"),d.$body.on("editoInsertModal:show ",function(){var e=s("#edito-insert-modal_"+arguments[1]);e.length&&e.modal("show")}).on("editoInsertModal:hide",function(){var e=s(".js-edito-insert-modal");e.length&&e.modal("hide")}).on("click",".vertical-align-center",function(e){e.target===e.currentTarget&&d.$body.trigger("editoInsertModal:hide")}).on("shown.bs.modal",".edito-modal",function(){var e=s(this);e.data("sliderRendered")?e.find(".edito-modal-slider").hasClass("slick-initialized")&&e.find(".edito-modal-slider").slick("slickGoTo",0,!0):(c.pictureFill(),c.common.initLazyLoad(e),c.common.isMobileMode()&&e.find(".edito-modal-slider-wraper").height(5*e.find(".edito-modal-slider-wraper").width()/6),function(e){var i={infinite:!1,slidesToShow:1,slidesToScroll:1,speed:1e3,dots:!1,prevArrow:'<button tabindex="0"class="c-prev-arrow"><span class="sr-only">'+CQ.I18n.getMessage("text.prev.arrow.accessibility")+'</span> <span class="c-arrow-wrapper"><i class="icon icon-arrowsmall-left"></i></span></button>',nextArrow:'<button tabindex="0"class="c-next-arrow"><span class="sr-only">'+CQ.I18n.getMessage("text.next.arrow.accessibility")+'</span> <span class="c-arrow-wrapper"><i class="icon icon-arrowsmall-right"></i></span></button>'};e.find(".edito-modal-slider").hasClass("slick-initialized")||e.find(".edito-modal-slider").slick(i)}(e),e.find(".edito-modal-item-external-video").length&&b(e),e.data("sliderRendered",!0))}).on("hidden.bs.modal",".edito-modal",v).on("beforeChange",".edito-modal-slider",v).on("click",".js-edito-read-more",function(){d.$body.trigger("editoInsertModal:show",[s(this).data("index")])}),s(a).on("responsive",function(){var e=s(".js-edito-insert-modal.in");c.common.isMobileMode()&&e.length?e.find(".edito-modal-slider-wraper").height(5*e.find(".edito-modal-slider-wraper").width()/6):e.find(".edito-modal-slider-wraper").removeAttr("style"),c.common.initLazyLoad(e)})}a=window,s=window.jQuery,c=window.sncf,d={},n={},l={},c.plp={moduleName:"plp",getListingData:function(){return d.plpData},removedBlankCategories:function(e){for(var i in e.listing)e.listing.hasOwnProperty(i)&&0===e.listing[i].length&&delete e.listing[i];return e},currencyFormatter:function(e,i,t){return t?e+i:i+e},initProductListRendering:function(e){if("edito"===d.pageType&&e.listing)!function(a,n){var l=s.extend({},a);d.$plpSection.each(function(){var e,i=s(this).data("start"),t=s(this).data("count");if(e=(i=0<i?i-1:0)+(t=0<t?t:a.listing.length),l.listing=a.listing.slice(i,e),l.listing.length){var r=o(l.listing.length);l.displayCount=r.displayCount,l.model=r.model,l.count=l.listing.length,l.edito&&0<l.edito.length?n.wrapProdutsForEdito(l.edito,l,!0,d.pageType,s(this)):s(this).html(CARF.templates.plp_pl(l))}else s(this).html("")})}(e,this);else{var i=o(e.count);e.displayCount=i.displayCount,e.model=i.model,!1===e.isgroup?d.$plpContainer.html(CARF.templates.plp_pl(e)):!0===e.isgroup&&d.$plpContainer.html(CARF.templates.plp_pl_category(e))}!function(e){var i=s(".js-edito-insert-modal");i.length&&i.remove(),s.isEmptyObject(e)||d.$body.append(CARF.templates.editoInsertModal({edito:e,renditions:y(!0)}))}(e.edito),c.plp.bindEvents()},wrapProdutsForEdito:function(r,e,i,t,a){var n=0,l=s(i?CARF.templates.plp_pl(e):CARF.templates.plp_pl_category(e)),o=s(l);0<o.find(".plp-row-list").length&&o.find(".plp-row-list").each(function(){var t=s(this);0<t.find("div[data-edito='true']").length&&t.find("div[data-edito='true']").each(function(){var e=s(this).data("plp-row"),i=n%2?"left":"right";s(this).parent().is(".edito-grid-wrap")||void 0===r[n]||(t.find("div[data-plp-row='"+e+"']").wrapAll("<div class='edito-row' data-row-index='"+n+"' ><div class='edito-grid-wrap' data-index='"+n+"'></div></div>"),t.find(".edito-row[data-row-index='"+n+"']").prepend(CARF.templates.plp_edito({data:r[n],i:n,editoClass:i,renditions:y(!1)})),n++)})}),a.html(l),a.find(".js-edito-item-video").each(function(){if(s(this).data("autoPlay"))try{this.play()}catch(e){c.log("error",e)}})},unionArrays:function(e,i){for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);for(var a=0;a<i.length;a++)-1===t.indexOf(i[a])&&t.push(i[a]);return t},getPLPUrl:function(){var e={};return"localhost"===window.location.hostname&&"8000"===window.location.port?e.url="/source/modules/plp_pl/data/plp_pl_category.json":e.url=s("#previousPagePath").val()+".productlistingservletv2.json",e.type="GET",e},buildFilterData:function(e,i,t){void 0!==t.filter[e]&&(void 0===i[e]?i[e]=t.filter[e]:i[e]=c.plp.unionArrays(i[e],t.filter[e]))},modifyFilterData:function(e){var i={};for(var t in e.feature)if(e.feature.hasOwnProperty(t))if(Array.isArray(e.listing))e.listing.map(this.buildFilterData.bind(null,t,i));else for(var r in e.listing)e.listing.hasOwnProperty(r)&&e.listing[r].map(this.buildFilterData.bind(null,t,i));return i},bindVignetteUrl:function(e){e.preventDefault();var i=s(this).data("href");return s(this).closest('a[data-fn-click="true"]').attr("href",i),window.location=i,!0},updateCache:function(){d.$viewMoreBtn=s(".js-listing-view-more-btn"),d.$cartUpdateMsgForSR=s(".js-cartupdate-sr"),d.$applyBtnPrice=s(".js-filter-applybtn--Price"),d.$preFilter=s(".pre-filter"),d.plpData={},d.pageType=d.$plpSection.length||d.$plpSectionFallback.length?"edito":"default"},bindEvents:function(){d.$viewMoreBtn.length&&d.$viewMoreBtn.on("click",function(){"true"===s(this).attr("aria-expanded")?(s(this).html(CQ.I18n.getMessage("PLP.text.viewmore")),s(this).attr("aria-expanded",!1)):(s(this).html(CQ.I18n.getMessage("PLP.text.viewless")),s(this).attr("aria-expanded",!0)),s(this).parents(".listing-wrapper").find(".grid-item-parent[data-invisible='true']").toggleClass("hidden"),s(".prod-name").dotdotdot({height:null,fallbackToLetter:!0,wrap:"letter"}),s(".desc").dotdotdot({height:null,fallbackToLetter:!0,wrap:"letter"}),common.initLazyLoad()}),c.pictureFill(),common.initLazyLoad(),c.wishlist.getWishListItems(),s(".js-addToShopping").click(function(e){e.preventDefault(),common.checkMixOrder(s(this))?c.shoppingCart.addToCart(s(this).data(),this):(messages.createDialog({message:CQ.I18n.getMessage("PDP.can.not.proceed.with.mixOrder.title"),subtext:CQ.I18n.getMessage("PDP.can.not.proceed.with.mixOrder"),customStyle:"pdp-prepayment-message-modal",overlayCustomStyle:"trans-gray-bg",autoClose:!1,smallDialog:!0}),s(".message-dialog").hasClass("trans-gray-bg")||s(".message-dialog").addClass("trans-gray-bg"))}),s(".js-prod-strap").on("click",this.bindVignetteUrl),common.anchorInNewTab(),C()},init:function(){var e,i,t;d.$html=s("html"),d.$body=s(document.body),d.$plpSection=s(".js-plp-section"),d.$plpSectionFallback=s(".js-plp-section-pl"),d.$plpContainer=s(".plp"),d.country=d.$html.data("country"),d.lang=d.$html.data("lang"),d.country=d.country?d.country.toLowerCase():"us",d.lang=d.lang?d.lang.toLowerCase():"en.json",e=new common.Loader("<img class='list-loader' src='/etc/designs/richemont-car/clientlibs/publish/Clientlibs_facelift/dist/images/pf-ajax-loader.gif' alt='loader' />"),"default"===d.pageType?e.target(d.$plpContainer):e.target(d.$plpSection),t="localhost"===window.location.hostname&&"8080"===window.location.port?(i=!0,"true"):s("#enableAvailabilityPLPService").val(),d.euAvailabilityRes=d.$html.data("eu-code"),"true"===t?m(i,this):h(i,this),this.updateCache(),this.bindEvents()}},void 0===(r=function(){return c.plp}.apply(i,[]))||(e.exports=r)}}]);
//# sourceMappingURL=http://localhost:8080/dist/javascript/plp.cf7ed67586561d80563a.js.map