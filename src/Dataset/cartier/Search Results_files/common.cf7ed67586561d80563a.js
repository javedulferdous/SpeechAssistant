(window.cartierFeSetup=window.cartierFeSetup||[]).push([[2],{113:function(e,t,a){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var a=0,n=e.length;a<n;a++)if(e[a]===t)return a;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return o.test(e)?e.replace(i,r):e},t.isEmpty=function(e){return!e&&0!==e||!(!d(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,o=/[&<>"'`=]/;function r(e){return n[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var a in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],a)&&(e[a]=arguments[t][a]);return e}var c=Object.prototype.toString;t.toString=c;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)}),t.isFunction=l;var d=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===c.call(e)};t.isArray=d},156:function(e,t,a){"use strict";t.__esModule=!0;var l=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function d(e,t){var a=t&&t.loc,n=void 0,i=void 0,o=void 0,r=void 0;a&&(n=a.start.line,i=a.end.line,o=a.start.column,r=a.end.column,e+=" - "+n+":"+o);for(var s=Error.prototype.constructor.call(this,e),c=0;c<l.length;c++)this[l[c]]=s[l[c]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{a&&(this.lineNumber=n,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:r,enumerable:!0})):(this.column=o,this.endColumn=r))}catch(e){}}d.prototype=new Error,t.default=d,e.exports=t.default},157:function(e,t){var a,n;a=window.sncf=window.sncf||{},n={},a.utilService={on:function(e,t){n[e]&&-1<n[e].indexOf(t)||(n[e]=(n[e]||[]).concat(t))},trigger:function(e,t){(n[e]||[]).forEach(function(e){e(t)})},EVENTS:{COUNTRY_CHANGE:"COUNTRY_CHANGE"},readDeepObjectValue:function(e){var i=e;return function(e){for(var t=e?e.split(".").filter(function(e){return""!==e}):[],a=0,n=t.length;a<n;a++){if(void 0===i[t[a]])return;i=i[t[a]]}return i}},replaceCharInString:function(e,t,a,n){var i=n?new RegExp(t):t;return e.replace(i,a)}}},559:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=u;var i=a(113),o=n(a(156)),r=a(560),s=a(588),c=n(a(561)),l=a(562);t.VERSION="4.7.6";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var d="[object Object]";function u(e,t,a){this.helpers=e||{},this.partials=t||{},this.decorators=a||{},r.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(i.toString.call(e)===d){if(t)throw new o.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===d)i.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===d){if(t)throw new o.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var p=c.default.log;t.log=p,t.createFrame=i.createFrame,t.logger=c.default},560:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),o.default(e),r.default(e),s.default(e),c.default(e),l.default(e),d.default(e)},t.moveHelperToHooks=function(e,t,a){e.helpers[t]&&(e.hooks[t]=e.helpers[t],a||delete e.helpers[t])};var i=n(a(581)),o=n(a(582)),r=n(a(583)),s=n(a(584)),c=n(a(585)),l=n(a(586)),d=n(a(587))},561:function(e,t,a){"use strict";t.__esModule=!0;var n=a(113),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=0<=t?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var a=arguments.length,n=Array(1<a?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];console[t].apply(console,n)}}};t.default=o,e.exports=t.default},562:function(e,t,a){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var a=Object.create(null);return a.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(a,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,a){return r("function"==typeof e?t.methods:t.properties,a)},t.resetLoggedProperties=function(){Object.keys(o).forEach(function(e){delete o[e]})};var n=a(590),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(561)),o=Object.create(null);function r(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==o[e]&&(o[e]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},580:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.__esModule=!0;var o=i(a(559)),r=n(a(591)),s=n(a(156)),c=i(a(113)),l=i(a(592)),d=n(a(594));function u(){var t=new o.HandlebarsEnvironment;return c.extend(t,o),t.SafeString=r.default,t.Exception=s.default,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=l,t.template=function(e){return l.template(e,t)},t}var p=u();p.create=u,d.default(p),p.default=p,t.default=p,e.exports=t.default},581:function(e,t,a){"use strict";t.__esModule=!0;var r=a(113);t.default=function(o){o.registerHelper("blockHelperMissing",function(e,t){var a=t.inverse,n=t.fn;if(!0===e)return n(this);if(!1===e||null==e)return a(this);if(r.isArray(e))return 0<e.length?(t.ids&&(t.ids=[t.name]),o.helpers.each(e,t)):a(this);if(t.data&&t.ids){var i=r.createFrame(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.name),t={data:i}}return n(e,t)})},e.exports=t.default},582:function(a,n,i){"use strict";(function(f){n.__esModule=!0;var e,m=i(113),t=i(156),g=(e=t)&&e.__esModule?e:{default:e};n.default=function(e){e.registerHelper("each",function(n,e){if(!e)throw new g.default("Must pass iterator to #each");var t,i=e.fn,a=e.inverse,o=0,r="",s=void 0,c=void 0;function l(e,t,a){s&&(s.key=e,s.index=t,s.first=0===t,s.last=!!a,c&&(s.contextPath=c+e)),r+=i(n[e],{data:s,blockParams:m.blockParams([n[e],e],[c+e,null])})}if(e.data&&e.ids&&(c=m.appendContextPath(e.data.contextPath,e.ids[0])+"."),m.isFunction(n)&&(n=n.call(this)),e.data&&(s=m.createFrame(e.data)),n&&"object"==typeof n)if(m.isArray(n))for(var d=n.length;o<d;o++)o in n&&l(o,o,o===n.length-1);else if(f.Symbol&&n[f.Symbol.iterator]){for(var u=[],p=n[f.Symbol.iterator](),h=p.next();!h.done;h=p.next())u.push(h.value);for(d=(n=u).length;o<d;o++)l(o,o,o===n.length-1)}else t=void 0,Object.keys(n).forEach(function(e){void 0!==t&&l(t,o-1),t=e,o++}),void 0!==t&&l(t,o-1,!0);return 0===o&&(r=a(this)),r})},a.exports=n.default}).call(this,i(41))},583:function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(156),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},584:function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(113),o=a(156),r=(n=o)&&n.__esModule?n:{default:n};t.default=function(a){a.registerHelper("if",function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),a.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return a.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},e.exports=t.default},585:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(i){i.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)e.push(arguments[a]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,i.log.apply(i,e)})},e.exports=t.default},586:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,a){return e?a.lookupProperty(e,t):e})},e.exports=t.default},587:function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(113),o=a(156),r=(n=o)&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var a=t.fn;if(i.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),a(e,{data:n,blockParams:i.blockParams([e],[n&&n.contextPath])})})},e.exports=t.default},588:function(e,t,a){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var n,i=a(589),o=(n=i)&&n.__esModule?n:{default:n}},589:function(e,t,a){"use strict";t.__esModule=!0;var s=a(113);t.default=function(e){e.registerDecorator("inline",function(i,o,r,e){var t=i;return o.partials||(o.partials={},t=function(e,t){var a=r.partials;r.partials=s.extend({},a,o.partials);var n=i(e,t);return r.partials=a,n}),o.partials[e.args[0]]=e.fn,t})},e.exports=t.default},590:function(e,t,a){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.extend.apply(void 0,[Object.create(null)].concat(t))};var n=a(113)},591:function(e,t,a){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},592:function(e,t,a){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,a=p.COMPILER_REVISION;if(t>=p.LAST_COMPATIBLE_COMPILER_REVISION&&t<=p.COMPILER_REVISION)return;{if(t<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[a],i=p.REVISION_CHANGES[t];throw new u.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new u.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(c,l){if(!l)throw new u.default("No environment passed to template");if(!c||!c.main)throw new u.default("Unknown template object: "+typeof c);c.main.decorator=c.main_d,l.VM.checkRevision(c.compiler);var n=c.compiler&&7===c.compiler[0];var r={strict:function(e,t,a){if(!(e&&t in e))throw new u.default('"'+t+'" not defined in '+e,{loc:a});return e[t]},lookupProperty:function(e,t){var a=e[t];return null==a?a:Object.prototype.hasOwnProperty.call(e,t)?a:f.resultIsAllowed(a,r.protoAccessControl,t)?a:void 0},lookup:function(e,t){for(var a=e.length,n=0;n<a;n++){if(null!=(e[n]&&r.lookupProperty(e[n],t)))return e[n][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:function(e,t,a){a.hash&&(t=d.extend({},t,a.hash),a.ids&&(a.ids[0]=!0)),e=l.VM.resolvePartial.call(this,e,t,a);var n=d.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),i=l.VM.invokePartial.call(this,e,t,n);if(null==i&&l.compile&&(a.partials[a.name]=l.compile(e,c.compilerOptions,l),i=a.partials[a.name](t,n)),null==i)throw new u.default("The partial "+a.name+" could not be compiled when running in runtime-only mode");if(a.indent){for(var o=i.split("\n"),r=0,s=o.length;r<s&&(o[r]||r+1!==s);r++)o[r]=a.indent+o[r];i=o.join("\n")}return i},fn:function(e){var t=c[e];return t.decorator=c[e+"_d"],t},programs:[],program:function(e,t,a,n,i){var o=this.programs[e],r=this.fn(e);return t||i||n||a?o=m(this,e,r,t,a,n,i):o||(o=this.programs[e]=m(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var a=e||t;return e&&t&&e!==t&&(a=d.extend({},t,e)),a},nullContext:Object.seal({}),noop:l.VM.noop,compilerInfo:c.compiler};function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.data;s._setup(t),!t.partial&&c.useData&&(a=function(e,t){t&&"root"in t||((t=t?p.createFrame(t):{}).root=e);return t}(e,a));var n=void 0,i=c.useBlockParams?[]:void 0;function o(e){return""+c.main(r,e,r.helpers,r.partials,a,i,n)}return c.useDepths&&(n=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(o=g(c.main,o,r,t.depths||[],a,i))(e,t)}return s.isTop=!0,s._setup=function(e){if(e.partial)r.protoAccessControl=e.protoAccessControl,r.helpers=e.helpers,r.partials=e.partials,r.decorators=e.decorators,r.hooks=e.hooks;else{var t=d.extend({},l.helpers,e.helpers);!function(a,n){Object.keys(a).forEach(function(e){var t=a[e];a[e]=function(e,t){var a=t.lookupProperty;return h.wrapHelper(e,function(e){return d.extend({lookupProperty:a},e)})}(t,n)})}(t,r),r.helpers=t,c.usePartial&&(r.partials=r.mergeIfNeeded(e.partials,l.partials)),(c.usePartial||c.useDecorators)&&(r.decorators=d.extend({},l.decorators,e.decorators)),r.hooks={},r.protoAccessControl=f.createProtoAccessControl(e);var a=e.allowCallsToHelperMissing||n;o.moveHelperToHooks(r,"helperMissing",a),o.moveHelperToHooks(r,"blockHelperMissing",a)}},s._child=function(e,t,a,n){if(c.useBlockParams&&!a)throw new u.default("must pass block params");if(c.useDepths&&!n)throw new u.default("must pass parent depths");return m(r,e,c[e],t,0,a,n)},s},t.wrapProgram=m,t.resolvePartial=function(e,t,a){e?e.call||a.name||(a.name=e,e=a.partials[e]):e="@partial-block"===a.name?a.data["partial-block"]:a.partials[a.name];return e},t.invokePartial=function(e,t,a){var i=a.data&&a.data["partial-block"];a.partial=!0,a.ids&&(a.data.contextPath=a.ids[0]||a.data.contextPath);var o=void 0;a.fn&&a.fn!==r&&function(){a.data=p.createFrame(a.data);var n=a.fn;o=a.data["partial-block"]=function(e,t){var a=arguments.length<=1||void 0===t?{}:t;return a.data=p.createFrame(a.data),a.data["partial-block"]=i,n(e,a)},n.partials&&(a.partials=d.extend({},a.partials,n.partials))}();void 0===e&&o&&(e=o);{if(void 0===e)throw new u.default("The partial "+a.name+" could not be found");if(e instanceof Function)return e(t,a)}},t.noop=r;var n,d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(113)),i=a(156),u=(n=i)&&n.__esModule?n:{default:n},p=a(559),o=a(560),h=a(593),f=a(562);function m(n,e,i,o,t,r,s){function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===n.nullContext&&null===s[0]||(a=[e].concat(s)),i(n,e,n.helpers,n.partials,t.data||o,r&&[t.blockParams].concat(r),a)}return(a=g(i,a,n,s,o,r)).program=e,a.depth=s?s.length:0,a.blockParams=t||0,a}function r(){return""}function g(e,t,a,n,i,o){if(e.decorator){var r={};t=e.decorator(t,r,a,n&&n[0],i,o,n),d.extend(t,r)}return t}},593:function(e,t,a){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"==typeof e?function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}:e}},594:function(e,t,a){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,a=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=a),e}},e.exports=t.default}).call(this,a(41))},595:function(e,t){function a(e){return new Promise(function(t,a){i.getXhrObj(e).done(function(e){t(e)}).fail(function(e){a(e)})})}var n,i;n=window.sncf=window.sncf||{},i=n.ajaxWrapper||cartier.ajaxWrapper,n.httpService={get:function(e){return e.type="GET",a(e)},post:function(e){return e.type="POST",e.contentType="application/x-www-form-urlencoded; charset=UTF-8",a(e)}}},596:function(e,t){function a(){return(window.location.href.split("?")[1]||"").split("&").map(function(e){return e.split("=")[0]}).filter(function(e){return""!==e})}function n(){return-1<document.cookie.indexOf("LoggedIn=1")}function i(){return 0<window.location.href.split("?")[0].indexOf("shopping-bag.html")}var o,r;o=window.sncf=window.sncf||{},r={},o.checkoutService={EVENTS:{CART_GET:"CART_GET",CART_ADD:"CART_ADD",CART_CHANGE:"CART_CHANGE",CART_COUNTRY_SWITCH:"CART_COUNTRY_SWITCH",CART_REMOVE:"CART_REMOVE",CHECKOUT_USER_LOGIN:"CHECKOUT_USER_LOGIN"},trigger:function(e,t){(r[e]||[]).forEach(function(e){e(t)})},on:function(e,t){r[e]&&-1<r[e].indexOf(t)||(r[e]=(r[e]||[]).concat(t))},getQueryStringKeys:a,isLoggedInUser:n,isGuestUser:function(){return!n()},isShoppingBagPage:i,isEditShoppingBagPage:function(){return null!==(window.sessionStorage?sessionStorage.getItem("isGuestEmailAvailable"):null)},isCheckoutDeliveryPage:function(){return 0<window.location.href.split("?")[0].indexOf("shopping-bag/billing-form.delivery-option.html")},isPaymentPage:function(){return 0<window.location.href.split("?")[0].indexOf("shopping-bag/billing-form.payment-summary.html")},isReviewOrderPage:function(){return 0<window.location.href.split("?")[0].indexOf("shopping-bag/billing-form.review-order.html")},isOrderConfirmationPage:function(){return 0<window.location.href.split("?")[0].indexOf("order-confirmation.html")},isAbandonCartEmailUser:function(){var e=a();return i()&&-1<e.indexOf("email")&&-1<e.indexOf("websiteCountry")&&-1<e.indexOf("customerNumber")},isOutOfStockProduct:function(){var e=window.localStorage?JSON.parse(localStorage.getItem("removedTeaserArray")):null;return null!==e&&0<e.length}}},597:function(e,t){function a(){return null!==(window.sessionStorage?sessionStorage.getItem(s):null)}function n(e){if(!a()){var t={url:l,data:{currentPage:u,action:e&&e.cartAction||p}};r.httpService.post(t)}}function i(e){var t=e.noOfProducts||0;if(r.checkoutService.isLoggedInUser()||r.checkoutService.isGuestUser()&&r.checkoutService.isEditShoppingBagPage()){if(0===t)return void function(e){if(!a()){var t={url:d,data:{currentPage:u,action:e&&e.cartAction||p}};r.httpService.post(t)}}(e);if(0<t&&r.checkoutService.isOutOfStockProduct())return void n(e);e.cartAction!==p&&n(e)}}function o(){window.sessionStorage&&window.sessionStorage.setItem(c,"true")}var r,s,c,l,d,u,p;r=window.sncf=window.sncf||{},s="disableCartAbandonment",c="isGuestEmailAvailable",l="/bin/cartier/saveShoppingBag",d="/bin/cartier/getShoppingBag",u=document.getElementsByTagName("html")[0].getAttribute("data-currentpagepath"),p="CART_GET",r.checkoutService.on(r.checkoutService.EVENTS.CART_CHANGE,i),r.checkoutService.on(r.checkoutService.EVENTS.CART_ADD,i),r.checkoutService.isAbandonCartEmailUser()&&window.sessionStorage&&window.sessionStorage.setItem(s,"true"),r.checkoutService.isCheckoutDeliveryPage()&&r.checkoutService.isLoggedInUser()&&"after_login"===window.type&&n(),r.checkoutService.isPaymentPage()&&r.checkoutService.isGuestUser()&&(n(),o()),r.checkoutService.isReviewOrderPage()&&r.checkoutService.isGuestUser()&&(n(),o()),r.checkoutService.isOrderConfirmationPage()&&(window.sessionStorage&&window.sessionStorage.removeItem(s),window.sessionStorage&&window.sessionStorage.removeItem(c),setTimeout(function(){r.common.picturefill(),$(".js-checkout").find("[data-original]").lazyload({threshold:200})},500))},598:function(e,t){function n(e){var t=window.cartierAppConfig||{};return e?t[e]||null:t}var a,i,o;a=window.sncf=window.sncf||{},i=$("html"),o=i.data("eu-country-code"),a.pageService={hasDataCountryAs:function(e){return e===i.data("country")},hasDataLangAs:function(e){return e===i.data("lang")},hasAttrLangAs:function(e){return e===i.attr("lang")},isEuCountry:function(e){return-1<o.indexOf(e)||cartier.countryHandler.isRegionEU},getEuCode:function(){return i.data("eu-code")},getAppConfig:n,getSiteLocale:function(){return i.data("eu-code")?i.data("lang")+"-"+i.data("eu-availability"):i.attr("lang")},getCountryCode:function(){return i.data("country")},getSiteLangForPageURI:function(e){var t=i.data("eu-code")?i.data("lang"):i.attr("lang");return"/"+(n("analyticsLang")||t).toLowerCase().replace("-","_")+(e||"")},getDataCurrentPagePath:function(){return i.data("currentpagepath")},getDataEuCountryCode:function(){return i.data("euCountryCode")},getSecureDomain:function(){return document.getElementById("secureDomain").value},updateEuContact:function(e){!function(e){for(var t=document.querySelectorAll(".js-contact-text"),a=document.querySelectorAll(".js-contact-link"),n=0;n<t.length;n++)t[n].innerHTML=e;for(n=0;n<a.length;n++)a[n].href="tel:"+e}(function(e){var t=n("euConfig"),a=t&&t[e];return a&&a.contact}(e))},showHiddenElements:function(){for(var e=document.querySelectorAll(".hidden-on-load"),t=0;t<e.length;t++)-1===e[t].className.replace(/  +/g," ").trim().split(" ").indexOf("fade-in")&&(e[t].className+=" fade-in")},getEUPriceLocale:function(){var e;switch(i.data("lang")){case"en":e="en-GB";break;case"fr":e="fr-FR";break;case"de":e="de-DE";break;default:e="en-GB"}return e}}},599:function(e,t){var o,r,a,n,i,s,c,l,d,u;o=window.jQuery,r=window.sncf=window.sncf||{},a=o("html"),n="true"===a.attr("data-affiliate-program-enable"),i=a.attr("data-affiliate-program-id"),s=a.attr("data-afiliate-program-param"),c=a.attr("data-affiliate-program-source"),l=a.attr("data-affiliate-program-expiration"),d=a.attr("data-affiliate-program-click-id-expiration"),u={isEnable:n,programId:i,queryParam:s,source:c,expiryInDays:/^[\d]+$/.test(l)?parseInt(l,10):0,clickIdExpiryInDays:/^[\d]+$/.test(d)?parseInt(d,10):0,affiliateCookieName:"afiliatesource",clickIdCookieName:"affiliateclickids",pepperjamUrl:"https://t.pepperjamnetwork.com"},r.affiliateSource={moduleName:"affiliateSource",queryParams:function(e){var t=o.deparam(window.location.search);return"string"==typeof e?t[e]:t},hasAffiliateQueryParams:function(){var e=r.affiliateSource.queryParams(u.queryParam)||null;return-1<[u.source].indexOf(e)},isConfirmationPage:function(){var e=window.location.href,t=e.lastIndexOf("/")+1,a=e.substr(t).split("?")[0];return"order-confirmation"===(a=a.split(".")[1])},setAffiliateInfo:function(){r.affiliateSource.setAffiliateSourceInfo(),r.affiliateSource.setAffiliateClickIdInfo()},setAffiliateSourceInfo:function(){var e={affiliate:r.affiliateSource.queryParams(u.queryParam)||null,timestamp:(new Date).getTime()};localStorage.setItem(u.affiliateCookieName,JSON.stringify(e))},setAffiliateClickIdInfo:function(){var t=r.affiliateSource.queryParams("clickId")||null,e=JSON.parse(localStorage.getItem(u.clickIdCookieName))||[],a=!1;o.map(e,function(e){e.affiliateClickId===t&&(a=!0)}),a||(e.push({affiliateClickId:t,timestamp:(new Date).getTime()}),localStorage.setItem(u.clickIdCookieName,JSON.stringify(e)))},insertPepperjamPixel:function(){var e=o(".c-order-confirmation__heading__order-number").text().split(" "),t=e[e.length-1],a=r.affiliateSource.getOrderItems(),n=r.affiliateSource.getClickIdInfo(),i=r.affiliateSource.getPepperjamPixelScript(t,a,n);r.affiliateSource.isAffiliateExpired()||(o("body").append(i),localStorage.removeItem(u.affiliateCookieName),localStorage.removeItem(u.clickIdCookieName))},getOrderItems:function(){var e=[];return o(".js-products-orderconfirm-li").each(function(){e.push({id:o(this).attr("data-productid"),price:o(this).attr("data-numericPrice"),quantity:o(this).attr("data-quantity")})}),e},isClickIdExpired:function(e){var t=864e5*u.clickIdExpiryInDays;return(new Date).getTime()-e.timestamp>=t},isAffiliateExpired:function(){var e=864e5*u.expiryInDays,t=JSON.parse(localStorage.getItem(u.affiliateCookieName)||"{}").timestamp||0;return(new Date).getTime()-t>=e},getClickIdInfo:function(){var e=JSON.parse(localStorage.getItem(u.clickIdCookieName)||"[]").filter(function(e){return!r.affiliateSource.isClickIdExpired(e)});return localStorage.setItem(u.clickIdCookieName,JSON.stringify(e)),e.map(function(e){return e.affiliateClickId})},getPepperjamPixelScript:function(e,t,a){var n="",i=u.programId,o=a;return e&&t&&(jQuery.each(t,function(e,t){n+="&ITEM_ID"+e+"=CR"+t.id+"&ITEM_PRICE"+e+"="+t.price+"&QUANTITY"+e+"="+t.quantity}),n&&(n='<iframe src="'+u.pepperjamUrl+"/track?INT=DYNAMIC&PROGRAM_ID="+i+"&ORDER_ID="+e+"&CLICK_ID="+o.join()+n+'" width="1" height="1" frameborder="0"></iframe>')),n},init:function(){if(!1===u.isEnable)return null;r.affiliateSource.hasAffiliateQueryParams()&&r.affiliateSource.setAffiliateInfo(),r.affiliateSource.isConfirmationPage()&&r.affiliateSource.insertPepperjamPixel()}},r.affiliateSource.init()},824:function(e,t,a){a(829);a(830);a(831),a(832),a(833),a(834),a(835),a(836),a(837),a(838),a(839),a(840),a(841),a(842),a(843),a(844),a(845),a(846),a(847),a(848),a(849),a(850),a(851),a(852),a(853),a(854),a(855),a(856),a(857),a(858),a(859),a(860),a(861),a(862),a(863),a(864),a(865),a(866),a(867),a(868),a(869),a(870),a(599),a(595),a(596),a(597),a(598),a(157),a(871)},829:function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t=Object.prototype.toString,a=Math.pow(2,53)-1;function c(e){return"function"==typeof e||"[object Function]"===t.call(e)}function l(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),a)}var n=e.polyfills={create:function(e,t,a){if(e&&-1<["object","function"].indexOf(o(e))){if("string"!=typeof t||!c(a)||e[t])return;c(e)?e[t]=a:Object.defineProperty(e,t,{value:a,enumerable:!1})}}};n.create(Array.prototype,"includes",function(e,t){return-1<this.indexOf(e,t)}),n.create(Array,"from",function(e){var t=Object(e);if(null==e)throw new TypeError("Cannot convert undefined or null to Object");var a,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!c(n))throw new TypeError("map should be a function");2<arguments.length&&(a=arguments[2])}for(var i,o=l(t.length),r=c(this)?Object(new this(o)):new Array(o),s=0;s<o;)i=t[s],r[s]=n?void 0===a?n(i,s):n.call(a,i,s):i,s+=1;return r.length=o,r}),n.create(Array,"of",function(){return Array.prototype.slice.call(arguments)}),n.create(Array.prototype,"every",function(e,t){if(null==this)throw new TypeError("this is null or undefined");var a=Object(this),n=a.length>>>0;if(!c(e))throw new TypeError("callback should be a function");for(var i,o=0;o<n;){if(i=a[o],!e.call(t,i,o,a))return!1;o+=1}return!0}),n.create(Array.prototype,"some",function(e,t){if(null==this)throw new TypeError("this is null or undefined");if(!c(e))throw new TypeError("callback should be a function");for(var a=Object(this),n=a.length>>>0,i=0;i<n;i++)if(i in a&&e.call(t,a[i],i,a))return!0;return!1}),n.create(Array.prototype,"union",function(e){var t=[];return this.forEach(function(e){t.includes(e)||t.push(e)}),Array.isArray(e)&&e.forEach(function(e){t.includes(e)||t.push(e)}),t}),n.create(Array.prototype,"intersection",function(e){var t=[],a=this;return Array.isArray(e)&&e.forEach(function(e){a.includes(e)&&!t.includes(e)&&t.push(e)}),t}),n.create(Array.prototype,"umi",function(e){var a=[],n=this.union(e);return this.intersection(e).forEach(function(e){if(n.includes(e)){var t=n.indexOf(e);a=n.slice(0,t).concat(n.slice(t+1))}}),a}),n.create(Array.prototype,"minus",function(t){var a=[];return Array.isArray(t)||(t=[]),this.forEach(function(e){t.includes(e)||a.includes(e)||a.push(e)}),a});function i(e,t){return-1<this.indexOf(e,t)}n.create(String.prototype,"includes",i),n.create(String.prototype,"contains",i),n.create(String.prototype,"startsWith",function(e,t){return"string"==typeof e&&(t=0<t?t:0,0===this.substr(t).indexOf(e))}),n.create(String.prototype,"endsWith",function(e,t){return"string"==typeof e&&(t=0<t?t:this.length,this.substr(0,t).indexOf(e)===t-e.length)}),n.create(Number,"isNaN",function(e){return e!=e})}(window)},830:function(a,e,n){(function(e){var t=n(580);e.Handlebars=t,a.exports=t}).call(this,n(41))},831:function(e,t,a){function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i;n="undefined"!=typeof window?window:this,i=function(e,c){function i(e){return"string"!=typeof e?e:-1<["true","false"].indexOf(e.toLowerCase())?"true"===e.toLowerCase():"number"!=typeof+e||isNaN(+e)?e:+e}function s(e,i){var t=0,a=0,o=null,r=null;if(!Array.isArray(e))throw new Error("Invalid list object");return"object"===d(i)&&null!==i?(t="number"==typeof i.offset&&0<=i.offset?i.offset:t,a="number"==typeof i.limit&&0<=i.limit?t+i.limit:e.length,o=i.sortBy,r=i.sortOrder,(o||r)&&e.sort(function(e,t){var a=null,n=null;if(!e&&!t)return 0;if(n=o&&"object"===d(e)&&"object"===d(t)?(a=e[o],t[o]):(a=e,t),"number"===i.valueType&&(a=+a,n=+n),"number"==typeof a&&"number"==typeof n)return isNaN(a)?1-isNaN(n):"desc"===i.sortOrder?n-a:a-n;if("string"==typeof a&&"string"==typeof n){if(i.ignoreCase&&(a=a.toLowerCase(),n=n.toLowerCase()),a.trim()<n.trim())return"desc"===r?1:-1;if(n.trim()<a.trim())return"desc"===r?-1:1}return 0}),e.slice(t,a)):e}function a(e){return!e||Array.isArray(e)&&0===e.length||"object"===d(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}function l(e,t){return(t?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(e)}var t={times:function(e,t,a,n){var i=0,o="";if("object"===d(t)&&(n=t,t=0,a=!1),"number"==typeof t&&"object"===d(a)&&(n=a,a=!1),"boolean"==typeof t&&"object"===d(a)&&(n=a,a=t,t=0),"number"==typeof t&&(i=t),a)for(;i<=e;i++)o+=n.fn({index:i,count:i+1,first:i===t,end:i===e,prevIndex:i-1,nextIndex:i+1,prevCount:i,nextCount:i+2});else for(;i<e;i++)o+=n.fn({index:i,count:i+1,first:i===t,end:i===e-1,prevIndex:i-1,nextIndex:i+1,prevCount:i,nextCount:i+2});return o},if_mod:function(e,t,a,n){return 0!==t&&e%t===a?n.fn(this):n.inverse(this)},if_eq:function(e,t,a){return e===t?a.fn(this):a.inverse(this)},setPriceBracket:function(t,e){var a,n=[];[100,500,1e3,1500,5e3,1e4,15e3,2e4,3e4,5e4,1e5,2e5].forEach(function(e){e<t&&n.push(e)}),t>n[n.length-1]&&(a=function(e){for(var t=(e+"").length,a=1,n=1;n<t;n++)a*=10;return Math.ceil(e/a)*a}(t),n.push(a)),e.data.root.priceBracket=n},getRowIndex:function(e,t,a){return Math.ceil((e+1)/t)},isEdito:function(e,t,a,n){var i;return common.isMobileMode()?!(1===(i=Math.ceil((e+1)/4))||6<i):4!==a&&5!==a?8!==a&&9!==a?9<a&&a<13?!(1===(i=Math.ceil((e+1)/t))||3<i):0===(i=Math.ceil((e+1)/t)%2):!(2<(i=Math.ceil((e+1)/t))):0!==(i=Math.ceil((e+1)/t)%2)},if_selector:function(e,t){return $(e).length?t.fn(this):t.inverse(this)},if_neq:function(e,t,a){return e!==t?a.fn(this):a.inverse(this)},if_gteq:function(e,t,a){return t<=e?a.fn(this):a.inverse(this)},if_gt:function(e,t,a){return t<e?a.fn(this):a.inverse(this)},if_even:function(e,t){return e%2==0?t.fn(this):t.inverse(this)},if_odd:function(e,t){return e%2!=0?t.fn(this):t.inverse(this)},if_lt:function(e,t,a){return e<t?a.fn(this):a.inverse(this)},if_lteq:function(e,t,a){return e<=t?a.fn(this):a.inverse(this)},if_in:function(e,t,a){if("string"==typeof t&&t.split(",").map(function(e){return e.trim()}).includes(""+e))return a.fn(this);return a.inverse(this)},ifLogicOper:function(e,t,a,n){switch(t){case"==":return e==a?n.fn(this):n.inverse(this);case"!=":return e!=a?n.fn(this):n.inverse(this);case"===":return e===a?n.fn(this):n.inverse(this);case"!==":return e!==a?n.fn(this):n.inverse(this);case"<":return e<a?n.fn(this):n.inverse(this);case"<=":return e<=a?n.fn(this):n.inverse(this);case">":return a<e?n.fn(this):n.inverse(this);case">=":return a<=e?n.fn(this):n.inverse(this);case"&&":return e&&a?n.fn(this):n.inverse(this);case"||":return e||a?n.fn(this):n.inverse(this);default:return n.inverse(this)}},prettyPrint:function(e,t){return e&&"object"===d(e)?"boolean"==typeof t&&t?JSON.stringify(e).trim():JSON.stringify(e,null,2).trim():e},ifBool:function(e,t){return sncf.common.isBool(e)?t.fn(this):t.inverse(this)},ifLogicalOr:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(0,e.length-1),a=!1,n=e[e.length-1];return t.forEach(function(e){if(!a){var t=e;n.hash.coerce&&(t=i(e)),a=a||t}}),a?n.fn(this):n.inverse(this)},ifLogicalAnd:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(0,e.length-1),a=!0,n=e[e.length-1];return t.forEach(function(e){if(a){var t=e;n.hash.coerce&&(t=i(e)),a=a&&t}}),a?n.fn(this):n.inverse(this)},ifEmpty:function(e,t){return a(e)?t.fn(this):t.inverse(this)},unlessEmpty:function(e,t){return a(e)?t.inverse(this):t.fn(this)},filterArray:function(e,t,a){var n=a.hash.key,i=a.hash.val;"string"==typeof e&&Array.isArray(t)&&(a.data.root[e]=t.filter(function(e){return e&&"object"===d(e)&&"string"==typeof n?void 0!==i?e[n]===i:e[n]:void 0!==i?e===i:e}))},removeWhitespace:function(e){return"string"==typeof e?e.trim().replace(/\s/g,""):e},setVar:function(e,t,a){a.hash.removeWhitespace&&"string"==typeof t&&(t=t.replace(/\s/g,"")),a.data.root[e]=t},trimURL:function(e){return e.replace(".html","")},priceFilterArray:function(e,t){for(var a="",n={},i=0,o=e.length;i<o;i++)0===i?(n.vmin=0,n.vmax=e[i],n.value=e[i]+" and Under"):e.length===i+1?(n.vmin=e[i-1],n.vmax=e[i],n.value="Over "+e[i-1]):(n.vmin=e[i-1],n.vmax=e[i],n.value=e[i-1]+" - "+e[i]),a+=t.fn(n);return a},loveFont:function(e){var t=e.hash.text;return"string"==typeof t?new c.SafeString(decodeURIComponent(t).replace(/<script>|<script[^>]+>|<\/script>/gi,"")):t},spaceToUnderscore:function(e){return e.split(" ").join("_")},ifArrayIncludes:function(e,t,a){return e.includes(t)?a.fn(this):a.inverse(this)},eachSorted:function(a,e,n){var t,i="",o=null,r=null;return(n=arguments[arguments.length-1]).data&&(o=c.createFrame(n.data)),t=n.hash.sortBy,Array.isArray(a)?(a=s(a,{sortBy:t,sortOrder:e,ignoreCase:n.hash.ignoreCase})).forEach(function(e,t){o&&(o.index=t,o.count=t+1,o.first=0===t,o.last=t===a.length-1),i+=n.fn(e,{data:o})}):"object"===d(a)&&(r=Object.keys(a),t?r=s(r.map(function(e){var t=null;return a[e]&&"object"===d(a[e])&&!Array.isArray(a[e])&&(t=$.extend(!0,{},a[e],{esOriginalKey:e})),t||a[e]}),{sortBy:t,sortOrder:e,ignoreCase:n.hash.ignoreCase}).map(function(e){return e.esOriginalKey}):"asc"===e?r.sort():r.reverse(),r.forEach(function(e,t){o&&(o.key=e,o.index=t,o.count=t+1,o.first=0===t,o.last=t===r.length-1),i+=n.fn(a[e],{data:o})})),i},conditional_openBlock:function(e,t){return t.data.root.includeFirst=t.data.root.includeFirst||t.hash.includeFirst||"0",t.data.root.elemNum=e?1:t.data.root.elemNum+1,t.data.root.tagInserted?t.inverse(this):(t.data.root.tagInserted=!0,t.fn(this))},conditional_closeBlock:function(e,t){var a=t.hash.grid,n=t.data.root.includeFirst,i=t.data.root.elemNum;return e||i%(a+ +n)==0?(t.data.root.includeFirst="0",t.data.root.elemNum=0,t.data.root.tagInserted=!1,t.fn(this)):t.inverse(this)},addStrEllipses:function(e){var t=e.hash.str,a=e.hash.size,n=t.split(" "),i=/[\u4E00-\u9FCC\u3400-\u4DB5\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]/,o=n[0].split(""),r="",s=0;return 0<n[0].length&&l(n[0],!0)?n[0].length>a&&(t=t.slice(0,a-2)+"..."):n[0].length>a/2&&(o.forEach(function(e){l(e,!0)?(s<a-2&&(r+=e),s+=1):e.match(i)&&(s<a-2&&(r+=e),s+=2)}),a<s&&(t=r+"...")),new c.SafeString(t)},setCielInRoot:function(e){var t,a=e.hash.numerator,n=e.hash.dinominator;t=Math.ceil(a/n),this.ceilVal=t},removeArrow:function(e){return"string"==typeof e&&(e=e.replace(">","")),e},setMegamenuVariables:function(e){var t=e.hash.megamenuData,a=e.data.root.data;a.showCarousel=!1,a.includeFirst=t.showVisualImage?4:0,("1"===t.carouselRows&&t.collectionList.length>6+a.includeFirst||t.collectionList.length>12+a.includeFirst)&&(a.showCarousel=!0),a.grid="1"===t.carouselRows?6:12},checkFilterDetails:function(e){var t=e.hash.filters,a=0;t.forEach(function(e){e.filterTitle.length&&(e.isFiltersTitleAvailable=!0),e.filterItems.length>a&&(a=e.filterItems.length,e.maxFilterCount=a)})},if_country_eq:function(e,t){return $("html").data("country").toLowerCase()===e.toLowerCase()?t.fn(this):t.inverse(this)},if_extension:function(e,t,a){if(!e)return a.inverse(this);var n=e.split(".");return n[n.length-1]===t?a.fn(this):a.inverse(this)},partOfString:function(e,t,a){var n,i=new RegExp("\\s"+a+"\\s(.*)","g");return n=e.split(i),"before"===t?n[0]:n[1]},fetch_data_sync:function(e,t){var a;return $.ajax({url:e,success:function(e){a=$(e).is(t)?e:$(e).find(t)[0]},async:!1}),a&&a.outerHTML?new c.SafeString(a.outerHTML):""},loadHtmlFromDOM:function(e){var t;return e&&(t=$(e).html(),$(e).empty()),t},youtubeURL:function(e){var t="enablejsapi=1&origin=*";return e.includes("?")?e+="&"+t:e+="?"+t,e}};return e?{register:function(){Object.keys(t).forEach(function(e){c.registerHelper(e,t[e])})}}:t},n.document?(n.sncf=n.sncf||{},n.sncf.helpers=i(!0,n.Handlebars)):"object"===d(t)&&(t.helpers=i())},832:function(e,t){if("CN"===$("html").data("country")){var a={rta_k:"JKTRWmfDo3"};window._nht_args=a,$(document.body).on("allRequireModuleLoaded",function(){var e=document.createElement("script");e.type="text/javascript",e.charset="UTF-8",e.async=!0,e.src="https://trace.rtbasia.com/nht_static.js",document.getElementsByTagName("head")[0].appendChild(e)})}},833:function(e,t,a){var n,s,c;window,s=window.jQuery,c=window.sncf,s&&(c.wishlist={moduleName:"Wishlist",getWishListUrl:function(){return c.env.dev?"/source/modules/generic/data/wishlist.json":"/bin/richemont/wishlist"},getAjaxMethod:function(){return c.env.dev?"GET":"POST"},addToWishList:function(t,a){var e,n=s(t).data().refid,i=s(t).data().pdp_pagepath,o=this.getWishListUrl(),r=this;e={type:this.getAjaxMethod(),url:o,data:"action="+(common.getCookie("LoggedIn")?"createPDPwishlist":"GuestUserWishList")+"&variantReference="+n+"&pdp_pagepath="+i},ajaxWrapper.getXhrObj(e).done(function(e){common.storage.set("wishListData",e),a?t.addClass("added"):(r.setAriaLabel(t,!1),s(t).find(".icon-wishlist").addClass("icon-wishlist-active").removeClass("icon-wishlist"),s(t).find(".icon-wishlistv2").addClass("icon-wishlistv2-active").removeClass("icon-wishlistv2"))}).fail(function(e){c.log("log",e)})},removeFromWishList:function(t,a){var e,n=s(t).data().refid,i=s(t).data().pdp_pagepath,o=this.getWishListUrl(),r=this;e={type:this.getAjaxMethod(),url:o,data:"action="+(common.getCookie("LoggedIn")?"productdelete":"guestProductDelete")+"&variantReference="+n+"&pdp_pagepath="+i},ajaxWrapper.getXhrObj(e).done(function(e){common.storage.set("wishListData",e),a?t.removeClass("added"):(r.setAriaLabel(t,!0),s(t).find(".icon-wishlist-active").addClass("icon-wishlist").removeClass("icon-wishlist-active"),s(t).find(".icon-wishlistv2-active").addClass("icon-wishlistv2").removeClass("icon-wishlistv2-active"))}).fail(function(e){c.log("log",e)})},processWishlistData:function(e){e&&s.each(e.content,function(){var e=arguments[1];try{var t=e.trim();s(".js-wishlist[data-refId='"+t+"']").find(".icon").removeClass("icon-wishlist").addClass("icon-wishlist-active")}catch(e){c.log("log",e)}})},setAriaLabel:function(e,t){var a,n;a=s(e).data("productname"),(n=t?CQ.I18n.getMessage("wcag.wishlist.add.message"):CQ.I18n.getMessage("wcag.wishlist.remove.message"))&&(n=n.replace("{0}",a),s(e).attr("aria-label",n))},getWishListItems:function(){var e=common.storage.get("wishListData");if(void 0===e||common.getCookie("wishlistUpdated")){if(common.isLoggedIn()||common.getCookie("wishlistUpdated")){var t=this.getWishListUrl(),a={type:this.getAjaxMethod(),url:t,data:"action=getWishlistProducts&pdp_pagepath="+s("[name='currentPagePath']").val()},n=this.processWishlistData;c.ajaxWrapper.getXhrObj(a,function(e){if(common.storage.set("wishListData",e),common.getCookie("wishlistUpdated")){var t=c.getCookieDomain();common.removeCookie("wishlistUpdated","/",t)}n(e)})}}else this.processWishlistData(e)},bindWishEvents:function(){var t=this;s(document.body).on("click enterKeyPress",".js-wishlist",function(e){e.stopPropagation(),e.preventDefault(),s(this).trigger("pushIntoLayer"),s(this).find(".icon").hasClass("icon-wishlist-active")||s(this).find(".icon").hasClass("icon-wishlistv2-active")?t.removeFromWishList(this):t.addToWishList(this)})},init:function(){c.log("debug","CAR: Wishlist has been initialized"),this.getWishListItems(),this.bindWishEvents()}},void 0===(n=function(){return c.wishlist}.apply(t,[]))||(e.exports=n))},834:function(e,t){var o,r;o=window,r=window.jQuery,window.sncf.t2Sell={moduleName:"t2Sell",initializet2sScript:function(){o._t2sparams=o._t2sparams||{};var a=0,n=r("#t2SellData"),i=setInterval(function(){if(a++,void 0!==r&&"undefined"!=typeof T2S&&(n&&(o._t2sparams.pID=n.data("pid").toString()),clearInterval(i),r(document.body).trigger("t2sScriptLoaded")),5<=a&&(clearInterval(i),o._t2sparams.eN="view",n&&(o._t2sparams.pID=n.data("pid").toString()),o._t2sparams.cID=r("#t2SellData").data("cid"),o._t2sparams.hasRankOption=!0,o._t2sparams.cID&&o._t2sparams.pID)){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https:"===document.location.protocol?"https://static.target2sell.com/t2s.min.js":"http://s3.target2sell.com/t2s.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),e.onload=function(){r(document.body).trigger("t2sScriptLoaded")}}},300)}}},835:function(e,t){function a(){return window.matchMedia("(orientation: portrait)").matches?l.PORTRAIT:window.matchMedia("(orientation: landscape)")?l.LANDSCAPE:l.UNSUPPORTED}function n(){return window.matchMedia("(max-width: 414px)").matches||window.matchMedia("(max-width: 414px) and (-webkit-min-device-pixel-ratio: 2), (max-width: 414px) and (min-resolution: 192dpi), (max-width: 414px) and (min-resolution: 2dppx)").matches||window.matchMedia("(min-width: 415px) and (max-width: 767px)").matches||window.matchMedia("(min-width: 415px) and (max-width: 767px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 415px) and (max-width: 767px) and (min-resolution: 192dpi), (min-width: 415px) and (max-width: 767px) and (min-resolution: 2dppx)").matches?{media:r,orientation:a()}:window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches||window.matchMedia("(min-width: 768px) and (max-width: 991px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 768px) and (max-width: 991px) and (min-resolution: 192dpi), (min-width: 768px) and (max-width: 991px) and (min-resolution: 2dppx)").matches||window.matchMedia("(min-width: 992px) and (max-width: 1024px)").matches||window.matchMedia("(min-width: 992px) and (max-width: 1024px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 992px) and (max-width: 1024px) and (min-resolution: 192dpi), (min-width: 992px) and (max-width: 1024px) and (min-resolution: 2dppx)").matches?{media:s,orientation:a()}:{media:c,orientation:a()}}var i,o,r,s,c,l,d,u;i=window.jQuery,o=window.sncf,r="mobile",s="tablet",c="desktop",l={LANDSCAPE:"landscape",PORTRAIT:"portrait",UNSUPPORTED:"unsupported"},u=d=null,d=n(),u=n(),i(window).on("resize",function(){var e=n();!function(e){return d.media===e.media||(d=e,!1)}(e)&&i(window).trigger("media.changed",[e]),function(e){return u.media===e.media&&u.orientation===e.orientation||(u=e,!1)}(e)||i(window).trigger("mediaorientation.changed",[e])}),o.common=i.extend(o.common,{getOrientation:function(){return a.apply(this,arguments)},getMedia:function(){return n.apply(this,arguments)}})},836:function(e,t,a){var n,f,m,g,i;function v(e){e?g.$cartWrapper.fadeIn("slow",function(){g.$shoppingBag.attr("aria-expanded",!0)}).delay(4e3):(g.$cartWrapper.stop(!0,!0).fadeIn(),g.$shoppingBag.attr("aria-expanded",!0))}function y(e){e?g.$cartWrapper.fadeOut("slow").queue(function(){g.$shoppingBag.attr("aria-expanded",!1)}):g.$cartWrapper.stop(!0,!0).delay(3e3).fadeOut().queue(function(){g.$shoppingBag.attr("aria-expanded",!1)})}function o(e){g.$cartUpdateMsgForSR.html(e),setTimeout(function(){g.$cartUpdateMsgForSR.empty()},3e4)}function r(e,t){"add"===t&&(v(!0),y(!0),o(CQ.I18n.getMessage("product.added.success.message")));var a=e.content||e;a=function(e){var t=e,a=f.jStorage.get("swsecartlc"),n=t.content?t.content.teaserArray:t.teaserArray;if(a){try{var o=JSON.parse(a);n.forEach(function(e){var t,a=e.operation,n=e.teaserID,i=o.content?o.content.teaserArray:o.teaserArray;return"ReadCart"===a&&(t=i.filter(function(e){return n===e.teaserID})[0])&&(e.engravingInformation=t.engravingInformation||e.engravingInformation,e.braceletInfo=t.braceletInfo||e.braceletInfo,e.giftCardInfo=t.giftCardInfo||e.giftCardInfo,e.embossingInformation=t.embossingInformation||e.embossingInformation,e.leatherBeltAdjustmentInformation=t.leatherBeltAdjustmentInformation||e.leatherBeltAdjustmentInformation),e})}catch(e){m.log("error",e)}t.xhrTeaserArray=n}return t}(a);try{var n=JSON.stringify(a);f.jStorage.set("swsecartlc",n),"add"===t&&(a.cartAction=i,m.checkoutService.trigger(m.checkoutService.EVENTS.CART_ADD,a))}catch(e){m.log("error",e)}}function b(){g.$shoppingBagWrapper.unbind("mouseenter"),g.$shoppingBagWrapper.unbind("mouseleave"),g.$shoppingBagWrapper.unbind("focusin"),g.$shoppingBagWrapper.unbind("focusout")}function s(e,t,a,n){var i,o,r,s=e||{},c=0,l="",d=g.$shoppingBag.data()||{},u=f(".js-header__backet-btn-wrapper");try{g.$cartTotalAmount.html(s.totalForSB),g.$cartTextInfo.html(CQ.I18n.getMessage(s.totalInfo,"excl. sales tax"));for(var p=s.teaserArray||[],h=0;h<p.length;h++)c+=p[h].selectedQuantity,p[h].imageSrc=(i=p[h].imageURL,o="140",void 0,r=i.split(".").pop(),i+".scale."+o+".high."+r);hbsTemplates.ready(function(){l=CARF.templates.cartProductList(p),g.$cartList.hasClass("mCustomScrollbar")&&g.$cartList.mCustomScrollbar("destroy"),g.$cartCount.html(c),g.$cartTitle.html(" "+c+" "+CQ.I18n.getMessage("minicart.checkout.head.label")),g.$cartList.html(l),p[0]&&0<p[0].partAmt?u.find("span").text(CQ.I18n.getMessage("PDP.partailPrepayment")):p[0]&&0===p[0].partAmt&&u.find("span").text(CQ.I18n.getMessage("PDP.prepayment")),0<c?(g.$shoppingBagWrapper.on("mouseenter",function(){g.$myAccountWrapper.addClass("hidden"),g.$langWrapper.addClass("hidden"),g.$cartWrapper.removeClass("hidden"),v(!1)}).on("mouseleave",function(){y(!1)}),g.$shoppingBagWrapper.on("focusin",g.$shoppingBag,function(){g.$myAccountWrapper.addClass("hidden"),g.$langWrapper.addClass("hidden"),g.$cartWrapper.removeClass("hidden"),v(!1)}).on("focusout",function(){y(!1)}),g.$shoppingBag.attr("data-href",d.cart),m.common.removeCookie("stockoutMessage")):(b(),g.$shoppingBag.attr("data-href",d.emptycart)),2<c?g.$cartScroller.show():g.$cartScroller.hide(),g.$cartProductDetails=f(".js-basket-product-details"),g.$cartList.mCustomScrollbar(),t&&t(a,n)})}catch(e){m.log("error",e)}}function c(e,t){if(void 0!==e){var a=e.content||{};a.isErrorMessageVisible?(function(e){return e&&e.teaserArray&&0<e.teaserArray.length}(a)&&s(a),"add"===t&&hbsTemplates.ready(function(){o(a.errorMessage),messages.createDialog({message:a.errorMessage,autoClose:!1,smallDialog:!0})})):(m.common.isMobile()&&"add"===t&&function(t){var a,n;(a=t.teaserArray.filter(function(e){return-1<e.refId.indexOf(g.$lastAddedProduct)})).length&&hbsTemplates.ready(function(){var e=f.extend({},a[0]);e.totalInfo=t.totalInfo,e.cartLink=g.$miniCartLink,n=CARF.templates.popupBasket(e),f("#popupModal").remove(),g.$body.append(n),f("#popupModal").modal()})}(a),s(a,r,e,t))}}function l(){var e=f.jStorage.get("swsecartlc"),t="";return m.common.getCookie("webId")&&(t=e||""),t}function d(){return m.env.dev?"GET":"POST"}window,f=window.jQuery,m=window.sncf,g={},i="CART_ADD",m.shoppingCart={moduleName:"shoppingCart",updateCache:function(){g={$body:f("body"),$shoppingBagWrapper:f(".js-cart-basket-wrapper"),$shoppingBag:f(".js-nav-link-cart"),$cartCount:f(".js-cart-count span"),$addToCart:f(".js-addToShopping"),$cartWrapper:f(".js-basket-popup"),$cartTitle:f(".js-basket-title"),$cartScroller:f(".c-header__basket-arrow"),$cartList:f(".js-basket-list"),$cartProductDetails:f(".js-basket-product-details"),$cartTotalAmount:f(".js-basket-total-amount"),$cartTextInfo:f(".js-basket-tax-info"),$configPath:f("#configPath"),$cartUpdateMsgForSR:f(".js-cartupdate-sr"),$lastAddedProduct:"",$miniCartLink:f(".js-nav-link-cart").data("cart"),$myAccountWrapper:f(".js-myaccount-wrapper"),$langWrapper:f(".js-lang-list")}},bindEvents:function(){var e=f("#eComCheck").val(),t="";"true"===e&&this.fetchCartData(),g.$shoppingBagWrapper.on("keypress click",function(e){e.preventDefault(),13!==e.which&&"click"!==e.type||(t=f(this).find(g.$shoppingBag).attr("data-href"))&&(window.location.href=t)})},addToCart:function(e,t,a){if("function"==typeof t&&(a=t,t=void 0),e&&"string"==typeof e&&(e=f.deparam(e)),g.$lastAddedProduct=e.fn_pid,e.isvariant){var n=e.href;return m.common.setCookie("isVariantSelected","true"),void(window.location.href=n)}if(e.isPrepayment){var i=e.href;window.location.href=i}else{e.cartInfo=l(),m.analyticsTracking.trackConversionEvent(e.fn_pid);var o={url:m.env.dev?"/source/modules/generic/data/cart.AddCart.json":"/bin/richemont-car/cart.AddCart.json",method:d(),data:e,loader:f(t)};m.ajaxWrapper.getXhrObj(o).done(function(e){c(e,"add"),a&&a(e),g.$shoppingBagWrapper.addClass("active"),f(document).trigger("cartPush")}).fail(function(e){m.log("log",e),f(document).trigger("cartError")})}},fetchCartData:function(e){var t=f.jStorage&&f.jStorage.get("swsecartlc"),a={},n=0;if(t&&(n=(a=JSON.parse(t)).noOfProducts),0!==f(".js-products-orderconfirm").length)return!1;if(t&&!m.common.getCookie("webId")&&!m.common.getCookie("swse_cart"))return m.common.getCookie("rvcheck")&&m.common.removeCookie("rvcheck","/",m.getCookieDomain()),void f.jStorage.deleteKey("swsecartlc");0<n&&g.$shoppingBagWrapper.addClass("active");var i=!1;if(!t&&m.common.getCookie("swse_cart")?i=!0:!e&&m.common.getCookie("rvcheck")&&n!==parseInt(m.common.getCookie("rvcheck"),10)&&(i=!0),i)return t="{}",b(),void this.getCartOnLoad();s(a)},getCartOnLoad:function(){var e={url:m.env.dev?"/source/modules/header/data/cart.json":"/bin/richemont-car/cart.GetCart.json",type:d(),data:{sw:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("sw"),currentPage:g.$configPath.val(),cartInfo:l()},contentType:"application/x-www-form-urlencoded",async:!0};m.ajaxWrapper.getXhrObj(e).done(function(e){c(e,"load"),m.common.getCookie("rvcheck")&&m.common.removeCookie("rvcheck","/",m.getCookieDomain())}).fail(function(e){m.log("log",e)})},addToCartListener:function(){(function(e){e.preventDefault(),shoppingCart.addToCart(f(this).data(),this)}).apply(this,arguments)},miniShoppingBag:function(){s.apply(this,arguments)},init:function(){m.log("debug","CAR: shoppingCart initialized"),this.updateCache(),this.bindEvents(),window.shoppingCart||(window.shoppingCart=this)}},void 0===(n=function(){return m.shoppingCart}.apply(t,[]))||(e.exports=n)},837:function(e,t){var c;c=window.jQuery,window.sncf.flexAdjustment={moduleName:"flexAdjustment",adjustTilesHeight:function(n,i,o){var r=0,s=[];n.each(function(e,t){var a=c(t);s.push(a),(e+1)%o==0?(r<a.height()&&(r=a.height()),c.each(s,function(e,t){t.height(r)}),r=0,s=[]):r<a.height()&&(r=a.height()),e+1===n.length&&c.each(s,function(e,t){t.height(r)}),a.find(i).addClass("floating-footer")})},addFloatingFooterHeight:function(e,r){c(e).each(function(e,t){var a,n=c(t),i=n.find(r).height(),o=parseInt(c("html").css("font-size"),10);a=(i+parseInt(n.css("padding-bottom"),10))/o+"rem",n.css("padding-bottom",a),n.addClass("processed")})}}},838:function(e,t,a){var n,d,u,s,i,o,p;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){if(e instanceof jQuery||(e=u(e)),this.length=e.length,!this.length)return this;this.htmlText=e[0].outerHTML,this.loader=e,this[0]=e[0]}function l(){var a,e=u(this),n={},t=u("#pf-deliveryForm"),i=t.length,o={utitle:'[name="fn_grptitle"], [name="ambassador_title"], [name="requestPrice_title"], [name="shippingForm_address20"]',uname:'[name="fn_fname"], [name="ambassador_firstName"], [name="senderFirstName1"], [name="requestPrice_firstName"], [name="shippingForm_firstName1"]',ulname:'[name="fn_lname"], [name="ambassador_lastName"], [name="senderLastName1"], [name="requestPrice_lastName"], [name="shippingForm_lastName1"]',ucountry:'[name="fn_country"], [name="fn_eu_country"], [name="country_residence"]',uemail:'[name="ambassador_emailAddress"], [name="registration_j_username"], [name="j_username"], [name="senderEmailAddress"], [name="requestPrice_emailAddress"], [name="newsletterEmail"]'},r=["CN","JP","HK"].includes(s.common.countryHandler.countryCode);e=e.is("body")?u(arguments[1]):e,a=e.closest("form"),r&&(o=u.extend(o,{ucname:'[name="ambassador_firstName1"], [name="fn_fname2"], [name="fn_fname"], [name="requestPrice_firstName2"], [name="shippingForm_lastName2"]',uclname:'[name="ambassador_lastName1"], [name="fn_lname2"], [name="fn_lname"], [name="requestPrice_lastName2"], [name="shippingForm_firstName2"]'})),i&&"on"===t.find("#billingCheckBox").val()&&(o={utitle:'[name="billingForm_address20"]',uname:'[name="billingForm_firstName1"]',ulname:'[name="billingForm_lastName1"]',ucountry:'[name="billingForm_addCountry"]',uemail:'[name="j_username"]'},r&&(o=u.extend(o,{ucname:'[name="billingForm_firstName2"]',uclname:'[name="billingForm_lastName2"]'}))),a.valid()&&(Object.keys(o).forEach(function(e){var t=a.find(o[e]);t.is('[type="radio"]')?n[e]=t.filter(":checked").val():n[e]=t.val()}),Object.keys(n).length&&u.jStorage.set("account-info",JSON.stringify(n)))}function h(e,t){var a=u(e).next(".tooltip-details");t?(a.show(),a.addClass("show-tooltip")):(a.removeClass("show-tooltip"),a.hide())}function f(){var e=u(this).closest(".js-custom-select--wrapper");e.find(".js-custom-select--value").text(e.find("option:selected").text())}function m(e,t,a){var n=function(e,t){for(var a=e.length,n=Math.ceil(a/t),i=[],o=0,r=1;r<=n;r++){var s=r*t;i.push({minRange:o+1,maxRange:s}),o=s}return i}(e,50),i=function(e,t){var a,n,i,o=[];for(a=0,n=e.length;a<n;a+=t)i=e.slice(a,a+t),o.push(i);return o}(e,50);p.$body.append(d.CARF.templates.limitedEdition({limitedEditionData:e,tabLinks:n,tabContent:i,selectedLeNumbers:t,productRefId:a}))}function g(e){var t,a=u(".js-pdp_carousel-btn--wishlist").data("refid"),n=e[a];p.$btnAddToCartWrapper=u(".js-pdp__cta-section--btn-add-to-basket"),p.$btnAddToCart=u(".js-pdp__cta-section--btn-add-to-basket > button"),n&&(p.$btnAddToCartWrapper.find("span").text(d.CQ.I18n.getMessage("pdp.add.cart.ltd.edition")),p.$btnAddToCart.data("leEnable",!0),p.$btnAddToCart.data("leProductReference",a),m(n,function(t){var e=u.jStorage.get("swsecartlc"),a=[];if(e)try{((e=JSON.parse(e)).content?e.content.teaserArray:e.teaserArray).forEach(function(e){e.refId===t&&a.push(e.leNum[0].toString())})}catch(e){s.log("log",e)}return a}(a),a),t=p.$btnAddToCart.data(),u(".js-le-modal-btn").data(t))}function v(){p.$leServletUrl.after('<div class="limited-edition-ref clearfix"></div>'),p.$limitedEditionRefBlock=p.$leAmbassadorForm.find(".limited-edition-ref")}function y(e,t,a,n){var i=t+"?country="+e;s.httpService.get({url:i}).then(function(e){d.hbsTemplates.ready(function(){a?g(e):function(t){u.isEmptyObject(t)||p.$leAmbassadorProceedBtnWrap.addClass("hidden"),Object.keys(t).forEach(function(e){p.$limitedEditionRefBlock||v(),p.$limitedEditionRefBlock.append('<button type="button" class="le-modal-btn le-ref-btn js-le-ref" data-ref="'+e+'">'+e+"</button>"),m(t[e],[],e)})}(e),n&&n()})}).catch(function(){n&&n()})}function b(){var e=u("#le-modal_"+arguments[1]);e.length&&e.modal("show")}function C(){var e,t=u(this),a=t.closest(".le-modal-body"),n=t.is("select");e=n?t.val():t.data("index"),a.find(".js-le-tab").removeClass("active"),a.find(".js-le-tab-content").removeClass("active"),a.find("#le-tab-"+e).addClass("active"),a.find(".js-le-selected-value").text(u("#le-tab-"+e).text()),a.find("#le-tab-content-"+e).addClass("active"),n||a.find(".js-le-tab-select").val(e)}function w(){var e=u(this),t=e.closest(".le-modal-body");e.hasClass("active")?(e.removeClass("active"),t.data("leNumber","")):(u(".js-le-tab-btn").removeClass("active"),t.find(".js-le-errormessage").addClass("hidden"),e.addClass("active"),t.data("leNumber",e.data("le")))}function k(){p.$leAmbassadorCountryDD.find("option:eq(0)").prop("selected",!0),p.$leAmbassadorCountryDD.closest(".select-wrapper").find(".js-custom-select--value").text(p.$leAmbassadorCountryDD.find("option:eq(0)").text())}function j(e){e.find(".loading-icon").remove(),k(),p.$leAmbassadorProceedBtnWrap.removeClass("hidden"),p.$document.trigger("hideLeModal")}function I(e,t,a){var n,i=u("#le-modal_"+t),o="/cms-base/richemont/form/actionController?actionName=LimitedEditionAction&currentPagePath="+p.currentPage+"&orderId="+p.$orderId.val()+"&cancellation="+p.$leAmbassadorOperation.val();e||(o+="&country="+p.$leAmbassadorCountryDD.val()+"&reference="+t+"&leNum="+a),p.$limitedEditionRefBlock||v(),s.httpService.post({url:o,beforeSend:function(){i.find(".js-le-modal-btn").after('<div class="loading-icon"></div>')}}).then(function(e){e&&e.success?(n=e.message?CQ.I18n.getMessage(e.message):CQ.I18n.getMessage("le.selection.success"),p.$limitedEditionRefBlock.html('<div class="le-modal-errormessage success">'+n+"</div>")):(n=e.message?CQ.I18n.getMessage(e.message):CQ.I18n.getMessage("le.selection.error"),p.$limitedEditionRefBlock.html('<div class="le-modal-errormessage">'+n+"</div>")),j(i)}).catch(function(e){n=e.message?CQ.I18n.getMessage(e.message):CQ.I18n.getMessage("le.selection.error"),p.$limitedEditionRefBlock.html('<div class="le-modal-errormessage">'+n+"</div>"),j(i)})}function $(){var e=u(this),t=e.closest(".le-modal-body"),a=t.data("leNumber"),n=t.find(".js-le-errormessage"),i=t.data("refId");a?(n.addClass("hidden"),e.data("leNumber",a),u(".c-pdp").length?(d.dataLayer.push({event:"Select_number_pop-in_validate"}),function(e,a){s.shoppingCart.addToCart(e.data(),e[0],function(e){var t;e&&e.success&&((t=e.content?e.content.teaserArray:t).forEach(function(e){e.refId===a&&e.leNum.forEach(function(e){u("#le-tab-btn-"+e+"_"+a).addClass("disabled").prop("disabled",!0)})}),u("#le-modal_"+a).find(".le-modal-body").data("leNumber",""))})}(e,i)):I(!1,i,a)):n.removeClass("hidden")}function S(){var e=u(this);e.find(".le-modal-errormessage").addClass("hidden"),e.find(".le-modal-body").data("leNumber",""),e.find(".js-le-tab-btn").removeClass("active"),e.find(".js-le-tab").eq(0).trigger("click")}function x(){p.$leAmbassadorForm.find(".limited-edition-ref").empty(),k(p.$leAmbassadorCountryDD)}function _(){var e="true"===u(this).val();e?(x(),p.$leAmbassadorCountryDD.closest(".country").hide()):p.$leAmbassadorForm.find(".limited-edition-ref").empty(),p.$leAmbassadorProceedBtn.prop("disabled",!1).data("isCancel",e),p.$leAmbassadorProceedBtnWrap.closest(".button-wrapper").removeClass("hidden")}function P(e){e.preventDefault(),p.$leAmbassadorCountryDD.valid()?p.$orderId.valid()?p.$leAmbassadorProceedBtn.data("isCancel")?I(p.$leAmbassadorProceedBtn.data("isCancel")):(p.$leAmbassadorCountryDD.closest(".country").show(),p.$leAmbassadorCountryDD.focus()):p.$leAmbassadorCountryDD.closest(".country").hide():p.$leAmbassadorProceedBtnWrap.addClass("hidden")}d=window,u=window.jQuery,s=window.sncf,i=window.Modernizr,o=window.currencyFormatter,p={},c.prototype={constructor:c,target:function(e){return this.length&&(u(e).hasClass("hidden")||u(e).html(this.loader)),this},appendTo:function(e){return this.length&&(u(e).hasClass("hidden")||u(e).append(this.loader)),this},insertAfter:function(e){return this.length&&(u(e).hasClass("hidden")||u(e).after(this.loader)),this},insertBefore:function(e){return this.length&&(u(e).hasClass("hidden")||u(e).before(this.loader)),this},remove:function(){return this.loader.remove()}},s.common=u.extend(s.common,{moduleName:"Common",isMobile:function(){return d.globalCache.regex.mobile.test(d.globalCache.UA)},isMobileMode:function(){return u(d).outerWidth()<768},isTablet:function(){return d.globalCache.regex.tablet.test(d.globalCache.UA)},isTabletMode:function(){return 768<=u(d).outerWidth()&&u(d).outerWidth()<992},isDesktop:function(){return!this.isMobileOrTablet()},isTabletOrDesktopMode:function(){return this.isTabletMode()||this.isDesktopMode()},isDesktopMode:function(){return 992<=u(d).outerWidth()},isMobileOrTablet:function(){return this.isMobile()||this.isTablet()},getFormattedPrice:function(e,t){return e.formattedPrice?e.formattedPrice:t.replace("{0}",e.formattedPriceFrom)},removeCrFromproductRef:function(e){var t=new RegExp("^CR","i");if(e)return e.match(t)&&(e=e.replace(t,"")),e},setCookie:function(e,t,a,n,i){if("string"==typeof e&&e.length){"string"!=typeof t&&(t="");var o=new Date;"number"==typeof a&&(a===1/0?o=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):o.setTime(o.getTime()+24*a*60*60*1e3));var r=a?"; expires="+o.toUTCString():"",s="; path="+("string"==typeof n?n.trim():"/"),c=d.location.hostname,l="";"localhost"===c?"string"==typeof i&&(l="; domain="+i.trim()):l="; domain="+("string"==typeof i?i.trim():c),document.cookie=e+"="+t+r+l+s+"; secure"}},getCookie:function(t){if("string"!=typeof t||!t.length)return"";var e=0,a=[],n="",i="";if(t+="=",(a=document.cookie.split(";")).length){for(;e<a.length;e++)if((n=a[e].trim()).includes(t)){i=n.substring(t.length,n.length).trim();break}try{return decodeURIComponent(i)}catch(e){return s.log("debug","CAR: Decode failed for cookie: "+t),i}}return i},removeCookie:function(e,t,a){if("string"!=typeof e||!e.length)return!1;var n,i="string"==typeof t?t:"/",o=d.location.hostname,r="";return"localhost"===o?"string"==typeof a&&(r="; domain="+a.trim()):r="; domain="+("string"==typeof a?a.trim():o),n=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"+r+"; path="+i,document.cookie=n,!this.getCookie(e).length},resetCookie:function(e,t,a,n,i){this.removeCookie(e,n,i),this.setCookie(e,t,a,n,i)},requiredStarHandler:function(e,a){u(e).find("label").each(function(){var e=u(this),t=e.text();a&&"*"!==t.charAt(t.length-1)?e.text(t+"*"):a||e.text(t.replace(/\*/,""))})},countryHandler:{countryCode:u("html").data("country")?u("html").data("country").toUpperCase():"",countryCodeArray:["US","JP","WW","AU","UK","CN","CA","GB","SG","HK","AE","CH"],regionCodeObject:{EU:["AT","BE","DE","DK","ES","FI","FR","GB","IE","IT","LU","NL","PT","SE"],APAC:["AU","SG","HK"]},isRegionEU:function(){return this.regionCodeObject.EU.includes(this.countryCode)},isRegionAPAC:function(){return this.regionCodeObject.APAC.includes(this.countryCode)}},storage:{available:"function"==typeof d.Storage||"object"===r(d.Storage),set:function(e,t,a){if("string"==typeof e&&e.length){a="boolean"==typeof a&&a;var n="object"===r(t)&&null!==t?JSON.stringify(t):t;if(this.available)try{return void(a?d.sessionStorage.setItem(e,n):d.localStorage.setItem(e,n))}catch(e){s.log("error",e)}a?s.common.setCookie(e,n):s.common.setCookie(e,n,1/0)}},remove:function(e){if("string"!=typeof e||!e.length)return!1;if(this.available)try{return d.localStorage.removeItem(e),d.sessionStorage.removeItem(e),!d.localStorage.key(e)||!d.sessionStorage.key(e)||s.common.removeCookie(e)}catch(e){s.log("error",e)}return s.common.removeCookie(e)},getAll:function(e,t){var a,n=[];if(t="boolean"==typeof t&&t,this.available)try{d.sessionStorage.hasOwnProperty(e)&&!t&&n.push({value:d.sessionStorage.getItem(e),storage:"sessionStorage"}),d.localStorage.hasOwnProperty(e)&&n.push({value:d.localStorage.getItem(e),storage:"localStorage"})}catch(e){s.log("error",e)}return(a=s.common.getCookie(e)).length&&n.push({value:a,storage:"cookie"}),n.map(function(t){try{return t.value=JSON.parse(t.value),t}catch(e){return t}})},get:function(e,t){var a=null;if((t="boolean"==typeof t&&t)?a=this.getFromSessionStorage(e):(a=this.getFromSessionStorage(e))||(a=this.getFromLocalStorage(e)),a=a||this.getFromCookies(e))return a.value},update:function(e,t,a){var n=this.get(e);"function"==typeof t?this.set(e,t(n,e),a):this.set(e,t,a)},getFromLocalStorage:function(e){return this.getAll(e,!0).filter(function(e){return"localStorage"===e.storage})[0]},getFromSessionStorage:function(e){return this.getAll(e).filter(function(e){return"sessionStorage"===e.storage})[0]},getFromCookies:function(e){return this.getAll(e).filter(function(e){return"cookie"===e.storage})[0]}},initLazyLoad:function(e){var t=e?e.find("[data-original]"):u("[data-original]");try{t.lazyload({failure_limit:10,threshold:200})}catch(e){s.log("error",e)}},throttle:function(e,t){var a=Date.now();return function(){a+t-Date.now()<0&&(e(),a=Date.now())}},addEllipses:function(){u(".ellipses").dotdotdot({fallbackToLetter:!0,wrap:"letter",callback:function(){u(this).off("click").on("click",function(){!function(e){var t=u(e).closest(".ellipses");u(t).triggerHandler("isTruncated")?u(t).trigger("destroy.dot").css("max-height","100%"):u(t).css("max-height","").dotdotdot({fallbackToLetter:!0,wrap:"letter"})}(u(this))})}})},bindCarouselLazyLoad:function(){u(".carousel").bind("slid.bs.carousel",function(){try{u(this).find("[data-original]").lazyload({failure_limit:10})}catch(e){s.log("log",e)}})},bindModalPopup:function(){var o=this;u(".modal").on("shown.bs.modal",function(){var e=u(this),t=e.find("form").attr("id"),a=["js-contact-ambassador-form","send_email","js-request-price-form"].indexOf(t),n="/"+(d.uri&&d.uri.match(/[^\/]+/)[0]||"");-1<a&&dataLayer.push({msn_cgGroup:"Form pages",rcms_cgGroup:"Services",visitorStatus:d.visitorStatus,pageURI:n+"/services/forms/"+["contact-an-ambassador","share-wishlist","request-price"][a]}),p.focusedElementBeforeModal=document.activeElement,e.on("keydown",o.trapTabKey);var i=e.find('a[href], area[href], input:not([disabled],:hidden), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]');0<i.length&&(i=i.toArray(),p.firstTabStop=i[0],p.lastTabStop=i[i.length-1],p.firstTabStop.focus())})},trapTabKey:function(e){9===e.keyCode&&(e.shiftKey?document.activeElement===p.firstTabStop&&(e.preventDefault(),u(p.lastTabStop).focus()):document.activeElement===p.lastTabStop&&(e.preventDefault(),u(p.firstTabStop).focus())),27===e.keyCode&&p.focusedElementBeforeModal.focus()},scrollTo:function(e,t,a,n){var i=e||u("body"),o=t||300;a=a||60,n||(n=u("html, body")),n.animate({scrollTop:i.offset().top-a},o)},getCountryName:function(e){if("string"==typeof e)switch(e.toLowerCase()){case"us":return"United States";case"uk":return"United Kingdom";case"fr":return"France";case"jp":return"Japan";case"cn":return"China";case"hk":return"Hong Kong";case"sg":return"Singapore";case"au":return"Australia";case"br":return"Brazil";case"ca":return"Canada";case"mx":return"Mexico";case"gb":return"United Kingdom";case"de":return"Germany";case"es":return"Spain";case"it":return"Italy";case"kr":return"South Korea";case"ru":return"Russia";case"ch":return"Switzerland";case"tw":return"Taiwan";case"ae":return"Unired Arab Emirates";default:return e}},isLoggedIn:function(){return!!this.getCookie("RCHMFrontEndCookie")},loader:function(e,t){var a=u("<div>").addClass("loading-icon js-loading-icon");if(!e)return new c(a);u(e).hasClass("hidden")||(t?u(e).append(a):u(e).html(a))},stickBeneathHeader:function(e,t){var a=u(".js-header").height(),n=e.offset().top;u(d).scroll(function(){common.isMobileMode()&&u(this).scrollTop()+a>n?(t.addClass("fixedUnderHeader"),t.css("top",a-1),e.height(t.height())):(t.removeClass("fixedUnderHeader"),t.css("top",0),e.css("height","auto"))})},formatCurrency:function(e){var t=+e,a=u(".js-algolia-search").data("currency")||null;return p.$html=p.$html||u("html"),d.Number.isNaN(t)?e:o.format(t,{locale:p.$html.data("country"),precision:t%1==0?0:null,symbol:a})},isBool:function(e){return!("boolean"!=typeof e||!e)||"string"==typeof e&&"true"===e.toLowerCase()},registerCommonHelpers:function(){s.helpers&&s.helpers.register(),Handlebars.registerHelper("removeCrFromproductRef",function(e){return e=s.common.removeCrFromproductRef(e),new Handlebars.SafeString(e).string}),Handlebars.registerHelper("setVariable",function(e,t,a){t&&"setVariable"===t.name&&(a=t,t=void 0);var n=u(a.hash.selector),i=null;if(n.length)if("CODE"===n[0].nodeName)try{i=JSON.parse(n.eq(0).text())}catch(e){i={}}else i=n.eq(0).val();t=void 0===t?i:t,Handlebars.helpers.setVar(e,t,a)}),Handlebars.registerHelper("setT2sVariables",function(e){var t=e.hash.productFamily,a=e.hash.mainMaterial,n="0"!==e.hash.hasVignettes;Handlebars.helpers.setVar("sellable","sellable"===e.hash.sellable,e),Handlebars.helpers.setVar("inStock","instock"===e.hash.inStock,e),Handlebars.helpers.setVar("hasVariants","NO"!==e.hash.hasVariants,e),Handlebars.helpers.setVar("hasVignettes",n,e),Handlebars.helpers.setVar("productMaterialJewelry","NA",e),Handlebars.helpers.setVar("productMaterialLeather","NA",e),Handlebars.helpers.setVar("productMaterialStrap","NA",e),Handlebars.helpers.setVar("productMaterialCase","NA",e),"Jewelry"===t&&Handlebars.helpers.setVar("productMaterialJewelry",a,e),"Leather Goods"===t&&Handlebars.helpers.setVar("productMaterialLeather",a,e),n&&Handlebars.helpers.setVar("productMaterialStrap",a,e),a&&Handlebars.helpers.setVar("productMaterialCase",a,e)}),Handlebars.registerHelper("setRenditionObj",function(e){var t,a,n,i,o=e.hash.productCategory;try{t=JSON.parse(u("#productTypeMapping").text()),a=JSON.parse(u("#renditionsObject").text()),i=t&&t[o],a&&i&&(n=a[i])}catch(e){s.log("log",e)}n||(n={maxwidthdesktop:314,maxwidthlandscapeipad:314,maxwidthportraitipad:314,maxwidthlandscapemobile:314,maxwidthportraitmobile:314,maxwidthmobile:314}),Handlebars.helpers.setVar("renditionObj",n,e)}),Handlebars.registerHelper("setAlgoliaAnalyticsInfo",function(e){var t=common.isBool(e.hash.sellable)?"sellable":"notsellable",a=common.isBool(e.hash.stockAvailability)?"instock":"outofstock",n=e.hash.productRef,i=e.hash.category,o=e.hash.hasVignette,r=e.hash.mainMaterial,s=e.hash.productFamily;n=common.removeCrFromproductRef(n),Handlebars.helpers.setVar("sellableEn",t,e),Handlebars.helpers.setVar("productRef",n,e),Handlebars.helpers.setVar("stockAvailability",a,e),"Rings"!==i&&"Bracelets"!==i||(n=n.slice(0,-2)),Handlebars.helpers.setVar("productId",n,e),Handlebars.helpers.setVar("productMaterialJewelry","NA",e),Handlebars.helpers.setVar("productMaterialLeather","NA",e),Handlebars.helpers.setVar("productMaterialStrap","NA",e),Handlebars.helpers.setVar("productMaterialCase","NA",e),"Jewelry"===s&&Handlebars.helpers.setVar("productMaterialJewelry",r,e),"Leather Goods"===s&&Handlebars.helpers.setVar("productMaterialLeather",r,e),o&&Handlebars.helpers.setVar("productMaterialStrap",r,e),r&&Handlebars.helpers.setVar("productMaterialCase",r,e)}),Handlebars.registerHelper("convertProductObjArray",function(e){var t,a=[];for(t in e.hash)void 0===e.hash[t]&&(e.hash[t]="");return a.push(e.hash),JSON.stringify(a)}),Handlebars.registerHelper("incrementValue",function(e,t){return++t.data.root[e]}),Handlebars.registerHelper("Base64Encode",function(e){return e.hash.url&&d.Base64?d.Base64.encode(e.hash.url):""}),Handlebars.registerHelper("Base64Decode",function(e){return e.hash.encodedUrl&&d.Base64?d.Base64.decode(e.hash.encodedUrl):""}),Handlebars.registerHelper("toJSON",function(e){return Handlebars.helpers.prettyPrint(e,!0)}),Handlebars.registerHelper("imageRendition",function(e,t,a,n,i,o,r){var s=e.split("."),c=r?r.replace("/","-")+".":".",l=o?"jpg":s[s.length-1];return void 0!==t[n]?e+".scale."+t[n][a]+".high"+c+l:void 0!==t[i]?e+".scale."+t[i][a]+".high"+c+l:e+".scale."+t.default[a]+".high"+c+l}),Handlebars.registerHelper("attr",function(e){var t=u(e.hash.selector);return t.length&&e.hash.key?t.attr(e.hash.key):""}),Handlebars.registerHelper("val",function(e){var t=u(e.hash.selector);return t.length?t.val():""}),Handlebars.registerHelper("imageset",function(e){var t=e.hash.domain?e.hash.domain+Handlebars.escapeExpression(e.hash.src):Handlebars.escapeExpression(e.hash.src),a=Handlebars.escapeExpression(e.hash.alt),n=e.hash.convertToJPG,i=Handlebars.escapeExpression(e.hash.class),o=p.$mediaConfig.find("."+e.hash.template),r=u(e.hash.selector),s=r.length?r:o.length?o:p.$mediaConfig.find(".default-template"),c=function(t){if(!t)return!1;var e=Object.keys(t),a=["maxwidthmobile","maxwidthportraitmobile","maxwidthlandscapemobile","maxwidthportraitipad","maxwidthlandscapeipad","maxwidthdesktop"],n={};return(e=e.filter(function(e){return a.includes(e)&&!!t[e]})).forEach(function(e){n[e]=t[e]}),n}(e.hash.renditions?e.hash.renditions:s.data()),l=n?[".jpg"]:t.match(/(.png|.jpg)$/i)||[".png"];return e.hash.classList&&e.hash.classList.length&&(i+=e.hash.classList.join(" ")),t?new Handlebars.SafeString(CARF.templates.imageSetTemplate({src:t,alt:a,classString:i,hasRendition:c&&!u.isEmptyObject(c),renditions:function(e,n,i){var o={};return u.each(e,function(e,t){var a="maxwidthmobile"===e?".low":".high";o[e]={src:n+".scale."+t+a+i,mediaQuery:function(e){switch(e){case"maxwidthmobile":return["(min-width: 1px)"];case"maxwidthportraitmobile":case"maxwidthlandscapemobile":return["(min-width: 320px)","(min-width: 320px and min-device-pixel-ratio: 2.0)"];case"maxwidthportraitipad":return["(min-width: 481px)","(min-width: 481px and min-device-pixel-ratio: 2.0)"];case"maxwidthlandscapeipad":return["(min-width: 769px)","(min-width: 769px and min-device-pixel-ratio: 2.0)"];default:return["(min-width: 1024px)","(min-width: 1024px and min-device-pixel-ratio: 2.0)"]}}(e),rank:function(e){switch(e){case"maxwidthmobile":return 1;case"maxwidthportraitmobile":case"maxwidthlandscapemobile":return 2;case"maxwidthportraitipad":return 3;case"maxwidthlandscapeipad":return 4;default:return 5}}(e)}}),o}(c,t,l[0])})):""}),Handlebars.registerHelper("addValues",function(e,t){return(e=parseFloat(e))+(t=parseFloat(t))}),Handlebars.registerHelper("include",function(e){var t=e.hash.template,a=e.hash.data,n=e.hash.root,i=e.hash.key,o=e.hash.otherData,r=e.hash.index;return n||"number"==typeof r||void 0!==i?new Handlebars.SafeString(CARF.templates[t]({data:a,root:n||{},index:r||0,otherData:o,key:i||""})):new Handlebars.SafeString(CARF.templates[t](a))}),Handlebars.registerHelper("parseJSON",function(t,e,a){2===arguments.length&&(a=e,e=void 0);var n=e||u(a.hash.selector).text(),i=null;try{i=JSON.parse(n),a.data.root[t]=i}catch(e){a.data.root[t]=n,s.log("log",e)}}),Handlebars.registerHelper("isDesktop",function(){return s.common.isDesktop()?"desktop":"device"}),Handlebars.registerHelper("checkFilter",function(e,t,a){for(var n in e)if(e.hasOwnProperty(n)&&s.filter.matchFilter(e[n],t))return a.fn(this);return a.inverse(this)}),Handlebars.registerHelper("priceFormatter",function(e){return 0<e?s.common.formatCurrency(e):""}),Handlebars.registerHelper("loveHashFormator",function(e){if(e){if(/#love#/i.test(e)){var t=e.replace(/#(.*)(love)(.*)#/gi,function(){var e=function(e){return Array.prototype.slice.call(e)}(arguments).slice(1,4);return e[1]='<span class="lovefont">'+e[1]+"</span>",e.join("")});return new Handlebars.SafeString(t)}return e}return e})},Loader:c,getLazyloadPlaceholder:function(){return"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGRzLXNwaW5uZXIiIHdpZHRoPSIzN3B4IiBoZWlnaHQ9IjM3cHgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgc3R5bGU9IiI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMCA1MCA1MCkiPiAgPHJlY3QgeD0iNDciIHk9IjI0IiByeD0iOS40IiByeT0iNC44IiB3aWR0aD0iNiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2IxYjFiMSI+ICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiB0aW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuOTE2NjY2NjY2NjY2NjY2NnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+ICA8L3JlY3Q+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDMwIDUwIDUwKSI+ICA8cmVjdCB4PSI0NyIgeT0iMjQiIHJ4PSI5LjQiIHJ5PSI0LjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjEyIiBmaWxsPSIjYjFiMWIxIj4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC44MzMzMzMzMzMzMzMzMzM0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNjAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjc1cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjY2NjY2NjY2NjY2NjY2NjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxMjAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjU4MzMzMzMzMzMzMzMzMzRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjQxNjY2NjY2NjY2NjY2NjdzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgyMTAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjMzMzMzMzMzMzMzMzMzMzNzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgyNDAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjI1cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDUwIDUwKSI+ICA8cmVjdCB4PSI0NyIgeT0iMjQiIHJ4PSI5LjQiIHJ5PSI0LjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjEyIiBmaWxsPSIjYjFiMWIxIj4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC4xNjY2NjY2NjY2NjY2NjY2NnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+ICA8L3JlY3Q+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDMwMCA1MCA1MCkiPiAgPHJlY3QgeD0iNDciIHk9IjI0IiByeD0iOS40IiByeT0iNC44IiB3aWR0aD0iNiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2IxYjFiMSI+ICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiB0aW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuMDgzMzMzMzMzMzMzMzMzMzNzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMzAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNiMWIxYjEiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49IjBzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48L3N2Zz4="},i18withReplaceableText:function(e,t){var a=CQ.I18n.getMessage(e);return 0<a.length?a.replace("{0}",t):a},getParameterByName:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},doesURLParamsMatch:function(e,t,a){return this.getParameterByName(e,t)===a},anchorInNewTab:function(){var e=u("html").data("country"),t=u(".js-body-wrapper").attr("data-purchasefunnel");"CN"!==e||"true"===t||s.common.isMobile()||u("a[href]").on("click",function(){var e=u(this).attr("href");if(e&&-1!==e.indexOf(".html"))return d.open(e,"_blank"),!1})},refreshCaptcha:function(e){var t=e.find(".g-recaptcha").data("id");d.grecaptcha&&d.grecaptcha.reset(t)},maskPersonalInfo:function(){u(".data-cs-mask").attr("data-cs-mask",""),u(".data-hj-masked").attr("data-hj-masked","")},loadT2SData:function(){s.t2sLoaded=s.t2sLoaded||!1,"undefined"!=typeof T2S?u(document.body).trigger("t2sScriptLoaded"):s.t2sLoaded||(s.t2sLoaded=!0,s.t2Sell.initializet2sScript())},bindCommonEvents:function(){u('a[href^="/content/car"]').on("click",function(e){var t=u(this).attr("href");e.preventDefault();var a={url:"/bin/cartier/logging",method:"POST",data:{link:t}};s.ajaxWrapper.getXhrObj(a).done(function(){d.location.href=t}).fail(function(e){s.log("log",e)})})},bindUserForms:function(){return function(){u("#js_bookAppointmentId, #js-light-account-form, #js-contact-ambassador-form, #send_email, #js-request-price-form, #pf-deliveryForm, #newsletterForm").on("click",'[type="submit"]',l),u(document.body).on("pfFormSubmit",l),u(document.body).on("click",".js-accordion-print-button",function(){d.print()})}.apply(this,arguments)},bindToggle:function(){u(".js-toggle-btn").on("click",function(){u(this).closest(".js-toggle-wrapper").find(".js-toggle-content").slideToggle()})},applyConsentValidation:function(e){e.each(function(e,t){u(t).rules("add",{consentRequired:!0})})},addConsentValidationRules:function(e){e.length&&(this.applyConsentValidation(e),e.change(function(){u(this).valid()}))},bindToolTipEvents:function(){p.$body.on("mouseenter focusin",".tooltip-icon",function(){h(this,!0)}).on("mouseleave focusout",".tooltip-icon",function(){h(this,!1)})},makeCustomDropdown:function(i){i.find("select").each(function(){var t=u(this),a=t.find("option:selected").text(),n=t.clone();hbsTemplates.ready(function(){var e=CARF.templates.customSelect({select:n[0].outerHTML,selectedValue:a});t.replaceWith(e),i.find("select").on("change",f)})})},makeCustomRadio:function(e){e.find('[type="radio"]').each(function(){var t=u(this),a=t.attr("id"),n=t.next("label").text(),i=t.attr("aria-required"),o=t.attr("value"),r=t.is(":checked"),s=t.attr("name"),c=t.attr("class");hbsTemplates.ready(function(){var e=CARF.templates.customRadioTmpl({radioId:a,label:n,ariaRequired:i,radioValue:o,isChecked:r,radioName:s,radioClass:c});t.closest(".radio-wrapper").replaceWith(e)})})},customDropdown:function(){p.$customSelect.each(f),p.$customSelect.on("change","select",f)},bindSheetEvents:function(){p.$body.on("click",".js-sheet-open",function(){var e=u(this),t=u(e.data("sheet"));u(".sheet-container").addClass("hidden-xs").find(".sheet").removeClass("slideup"),t.addClass("slideup"),t.closest(".sheet-container").removeClass("hidden-xs")}),p.$body.on("click",".js-sheet-close",function(){u(this).closest(".sheet-container").addClass("hidden-xs").find(".sheet").removeClass("slideup")})},initCache:function(){p.$body=u(document.body),p.$customSelect=u(".js-custom-select--wrapper"),p.$leAmbassadorForm=u("#js-limited-edition-form"),p.$leAmbassadorOperation=p.$leAmbassadorForm.find("#cancellation"),p.$leAmbassadorCountryDD=p.$leAmbassadorForm.find("#country"),p.$leAmbassadorProceedBtn=p.$leAmbassadorForm.find('[name="Proceed"]'),p.$leAmbassadorProceedBtnWrap=p.$leAmbassadorProceedBtn.closest(".button-wrapper"),p.$leServletUrl=p.$leAmbassadorForm.find("#servletUrl"),p.$orderId=p.$leAmbassadorForm.find("#orderId"),p.currentPage=u("#configPath").val(),p.$document=u(document)},initSlickCarousel:function(e,t){var a={variableWidth:!1,speed:600,infinite:!1,prevArrow:'<a role="button" class="slick-carousel-control left slick-prev"><i class="icon icon-prev-white"></i></a>',nextArrow:'<a role="button" class="slick-carousel-control right slick-next"><i class="icon icon-next-white"></i></a>',rtl:"ae"===p.country.toLowerCase()&&"ar"===p.lang.toLowerCase()};a=u.extend(!0,a,t),s.common.enableSlickAutoPlayVideo(e),e.slick(a)},enableSlickAutoPlayVideo:function(o){o.on("init",function(){var e=o.find(".item.active")[0],t=u(e).data("type"),a=u(e).data("startPlaying");if(a=a?a.toString():"false","html5video"!==t&&"video"!==t||(a="true"),("internalvideo"===t||"youtube"===t||"vimeo"===t||"video"===t||"html5video"===t)&&"true"===a){var n=u(e).find(".c-video-player")[0],i=u(n).attr("id");s.video.playVideo(t,i)}})},euCurrencyUpdate:function(){var e=u(".js-algolia-search").data("currency-list")||null,t=u("html");if(null!==e)for(var a in e)e.hasOwnProperty(a)&&a.split("_")[1].toUpperCase()===t.data("country").toUpperCase()&&u(".js-algolia-search").data("currency",e[a])},convertArrayToMatrix:function(e,t){for(var a=Math.ceil(e.length/t),n=0,i=[];n<a;n++)i.push(e.splice(0,t));return i},updateValue:function(e,t,a){e.find("option").each(function(){u(this).attr("value")===t&&(e.val(t),e.find("option").removeAttr("selected"),u(this).attr("selected","selected"),u(this).prop("selected",!0),a&&e.trigger("change"))})},updateEmptySelectBox:function(){var e=u("#fn_country, #fn_eu_country, #country_residence, .js-country-contactus"),t=u("html").data("country"),a=this;e.length&&e.each(function(){u(this).closest(".js-login-dropdown").length?a.updateValue(u(this),t,!1):a.updateValue(u(this),t,!0)})},consentAllEcomKorea:function(){u("#fn_yes_all").on("click",function(e){var t=u(this).closest("form").find(".js-toggle-wrapper input[value=true]");u.each(t,function(){u(this).trigger("click")}),e.stopImmediatePropagation()}),u(".js-toggle-wrapper input[value=false]").click(function(){u(this).closest("form").find("#fn_yes_all").prop("checked",!1)}),s.common.isLoggedIn()&&u(".js-consent-area").addClass("hidden"),u(".requestPrice_contactPreference").find('input[name="requestPrice_contactPreference"]').click(function(){s.common.isLoggedIn()||"phone"!==u(".requestPrice_contactPreference").find('input[name="requestPrice_contactPreference"]:checked').val()?u(".js-consent-mkt").closest(".js-toggle-wrapper").removeClass("hidden"):u(".js-consent-mkt").closest(".js-toggle-wrapper").addClass("hidden")})},updateCountryCodeBaa:function(e,t,a,n){var i=a+"="+t;if(-1<e.indexOf("?")){var o=new RegExp("([?&])"+a+"=[^&]+");null!==e.match(o)?e=e.replace(o,"$1"+i):n&&(e+="&"+a+"="+t)}else n&&(e+="?"+a+"="+t);return e},initLimitedEditionBlock:function(){return y.apply(this,arguments)},bindLeEvents:function(){return function(){p.$body.on("loadLimitedEditionModal",b).on("click",".js-le-tab",C).on("change",".js-le-tab-select",C).on("click",".js-le-tab-btn",w).on("click",".js-le-modal-btn",$).on("hidden.bs.modal",".js-le-modal",S).on("change","#orderId",x).on("change","#cancellation",_).on("click",'[name="Proceed"]',P),p.$body.on("click",".js-le-ref",function(){p.$body.trigger("loadLimitedEditionModal",[u(this).data("ref")])}),u(document).on("cartPush hideLeModal",function(){var e=u(".js-le-modal");e.length&&e.modal("hide")})}.apply(this,arguments)},removeTags:function(e){return!("string"!=typeof e||!e)&&e.replace(/(<([^>]+)>)/gi,"")},bindMnCustomSelect:function(){p.$body.on("change",".js-mn-custom-select",function(){var e=u(this),t=e.find("option:selected").data("innerText");e.closest(".mn-custom-select--wrapper").find(".js-mn-custom-select--value--txt").text(t)})},getProductListName:function(e,t){var a={url:"/bin/cartier/gaProductListName.json",cache:!1,type:"POST",data:e=e||""};ajaxWrapper.getXhrObj(a).always(function(e){t(e)})},populateLoggedInUserInfo:function(e){var t='[name="ambassador_title"]',a='[name="ambassador_firstName"]',n='[name="ambassador_firstName1"]',i='[name="ambassador_lastName"]',o='[name="ambassador_lastName1"]',r='[name="ambassador_emailAddress"]';s.common.isLoggedIn()&&(u(t).filter("[value='"+e.Title+"']").prop("checked",!0),u(a).val(e.FirstName),u(n).val(e.FirstName2),u(i).val(e.LastName),u(o).val(e.LastName2),u(r).val(e.Email))},checkMixOrder:function(e){var t=e.data("ee-products")&&e.data("ee-products")[0],a=u.jStorage&&u.jStorage.get("swsecartlc"),n={},i=0,o=1;try{a&&(i=(n=JSON.parse(a)).noOfProducts),i&&(void 0!==n.teaserArray[0].partAmt&&-1!==n.teaserArray[0].partAmt&&n.teaserArray[0].variantID!==t.productRef||void 0!==n.teaserArray[0].partAmt&&-1===n.teaserArray[0].partAmt&&t.isPrepayment&&t.isStockAvailable)?o=0:t.isPrepayment&&t.isStockAvailable&&t.partialPrepaymentPriceNum?(e.data("prepaymentFlag",t.partialPrepaymentPriceNum),e.data("maxQuantityPerOrder",t.maxQuantityPerOrder)):t.isPrepayment&&t.isStockAvailable&&!t.partialPrepaymentPriceNum?(e.data("prepaymentFlag",0),e.data("maxQuantityPerOrder",t.maxQuantityPerOrder)):e.data("prepaymentFlag",-1)}catch(e){s.log("log",e)}return o},doesHttpOnlyCookieExist:function(e){return s.common.setCookie(e,"tempValue",1,"/",".cartier.cn"),"tempValue"!==s.common.getCookie(e)},init:function(){s.log("debug","CAR: Common module initialized"),p.$mediaConfig=u(".js-media-config"),p.$html=u("html"),p.country=p.$html.data("country"),p.lang=p.$html.data("lang");var o=this;this.initCache(),this.euCurrencyUpdate(),this.initLazyLoad(),this.addEllipses(),this.registerCommonHelpers(),this.bindUserForms(),this.bindCommonEvents(),this.anchorInNewTab(),this.maskPersonalInfo(),this.loadT2SData(),this.bindToggle(),this.bindToolTipEvents(),this.customDropdown(),this.bindSheetEvents(),this.bindLeEvents(),this.bindMnCustomSelect(),s.unsubscibeNewsLetter.init(),u(".js-preference-wrapper-btqs").length&&s.myPreferredBoutiques.init(),"KR"===s.common.countryHandler.countryCode&&(this.consentAllEcomKorea(),this.addConsentValidationRules(u("[name=fn_chkprivnotc]")),this.addConsentValidationRules(u("[name=fn_newsletter_kr]")),u("[name=fn_terms_of_use]").length&&(u("[name=fn_terms_of_use]").each(function(){u(this).rules("add",{consentRequired2:!0})}),u("[name=fn_terms_of_use]").change(function(){u(this).valid()}))),u(".carousel").length&&this.bindCarouselLazyLoad(),this.bindModalPopup(),u(".js-carousel-component").each(function(e,t){o.initSlickCarousel(u(t))}),u(d).on("responsive",function(){o.addEllipses()}),o.isDesktopMode()&&u(".js-custom-scrollbar").scrollbar(),p.$columnControl=u(".js-column-control"),p.$columnControl.length&&!i.flexbox&&p.$columnControl.addClass("no-flexbox"),d.common||(d.common=this),p.$html.data("eu-code")&&(s.pageService.updateEuContact(this.getCookie("ctry")),u(d).on("load",function(){o.updateEmptySelectBox();var a,n=p.$html.data("country"),i=null;u('a[href*="/bookanappointment.html?"]').each(function(){var e=u(this);i=e.attr("href");var t=u.deparam(i.split("?")[1]);t&&t.country&&t.country!==n&&(a=o.updateCountryCodeBaa(i,n,"country",!1),e.attr("href",a))})})),p.$leAmbassadorForm.length&&p.$leAmbassadorCountryDD.on("change",function(){var e=this.value;u(".js-le-modal").remove(),p.$leAmbassadorForm.find(".limited-edition-ref").empty(),o.initLimitedEditionBlock(e,p.$leServletUrl.val(),!1)}),s.pageService.showHiddenElements()}}),void 0===(n=function(){return s.common}.apply(t,[]))||(e.exports=n),void 0===(n=function(){return s.common.storage}.apply(t,[]))||(e.exports=n)},839:function(p,h,f){var m;function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=["love_block"],y=["reelview","pdp","zoom","bsaod","strapConfiguratorPdp","pdpRefill"],b=["filter_clp","collectionComp","categoryBanner"],C=["plp","filter_plp"],w=["gbFilter"],k=["emailVerification"],j=["scZoom","strapConfigurator"],I=["commonBlade","tab","footerBiBlock","contactUs","servicesAccordion"],S=["myCartier","myWishlist","myRequestRepair","myAccountDetails","mySubscription"],x=["myOrders"],_=["myRepairDetails"],P=["mywishlistDetails","socialShareHandler"],A=["myRequestRepairService"],M=["myAddress"],E=["myOrderDetails"],L=["myCartierRequestRepair"],T=["megaMenuManhattan"],D=["footerManhattan"],R=["wowAnimation"],N=$("#googleMapsLibrary").val()||"//maps.google.com/maps/api/js?key=AIzaSyAf3dfMyZzBaOfa5N468w-KAoRqVpokchg&language=en&v=3&libraries=places,geometry&callback=sncf.mapsApiReady";!function(s,c,l,d){"use strict";l.env={local:!1,dev:!1},l.globalCache={regex:{mobile:/android|webos|iphone|blackberry|iemobile|opera mini/i,tablet:/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i,breakpoint:/:(?=([\s\d]+)px)/i},UA:navigator.userAgent.toLowerCase(),isKeyboardFocus:!1},s.globalCache=l.globalCache;var t=["localhost","127.0.0.1"],a=["debug","log","warn","error"],n=["8000","4502","4503"];l.moduleName="Namespace - SapientNitro Cartier Facelift";function i(){var e=c(document.body).pseudoContent(":after").match(s.globalCache.regex.breakpoint);+e[1]&&(e[1]=+e[1],s.globalCache.breakpoint!==e[1]&&(l.log("log","Desktop Mode: Breakpoint change"),s.globalCache.breakpoint=e[1],c(s).trigger("responsive",[e[1]])))}function e(){if(c(document.body).on("keydown",function(e){var t=null;13===e.keyCode&&(t=c.Event("enterKeyPress",c.extend(e,{type:"enterKeyPress"})),c(e.target).trigger(t)),27===e.keyCode&&(t=c.Event("escapeKey",c.extend(e,{type:"escapeKey"})),c(e.target).trigger(t)),9===e.keyCode&&(l.globalCache.isKeyboardFocus=!0)}),c(document.body).on("mousedown",function(){l.globalCache.isKeyboardFocus=!1}),c(document.body).on("mouseup",function(e){if(1===e.which){var t=c.Event("sclick",c.extend(e,{type:"sclick"}));c(e.target).trigger(t)}}),c(document.body).on("focusin",l.keyboardAccess),s.globalCache.regex.mobile.test(s.globalCache.UA)||s.globalCache.regex.tablet.test(s.globalCache.UA))c(s).on("orientationchange",function(){l.log("log","Mobile mode: Orientation change"),c(s).trigger("responsive",c(s).outerWidth())});else{var e=c(document.body).pseudoContent(":after").match(s.globalCache.regex.breakpoint);e&&+e[1]&&(s.globalCache.breakpoint=+e[1],c(s).on("resize",i))}c(document.body).on("keypress","[role=button]",function(e){32===e.which&&(e.stopPropagation(),e.preventDefault(),c(this).trigger("click"))})}function o(e){var n=e.hash.key,t=e.hash.replaceWith,a=e.hash.replaceMap,i=e.hash.replaceList,o=e.hash.ignoreWhitespace,r=e.hash.forceBlank;if("object"===g(a)&&Object.keys(a).forEach(function(e){var t=new RegExp("\\{"+e+"\\}","g");o&&(e=e.replace(/\s/g,"")),n=n.replace(t,a[e])}),i){var s="string"==typeof i?i.split(","):i;Array.isArray(s)&&s.length&&s.forEach(function(e,t){var a=new RegExp("\\{"+t+"\\}","g");o&&(e=e.replace(/\s/g,"")),n=n.replace(a,e)})}return Array.isArray(t)?d.I18n.getMessage(n,t,r):"string"==typeof t?d.I18n.getMessage(n,t.split(","),r):d.I18n.getMessage(n,[],r)}function r(){Handlebars.registerHelper("I18n",function(e){var t=o(e);return new Handlebars.SafeString(t)}),Handlebars.registerHelper("ifI18nLength_gt",function(e){return o(e).length>e.hash.charLength?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("i18withReplaceableText",function(e){var t=o(e),a=e.hash.replacedText;return 0<t.length?t.replace("{0}",a):t})}function u(e){e(function(){l.init(),l.log("debug","CAR: Core initialized")})}l.keyboardAccess=function(e){c(".focussed").removeClass("focussed"),l.globalCache.isKeyboardFocus?c(e.target).addClass("focussed"):c(e.target).removeClass("focussed")},l.resolveI18nKeys=function(e){e&&(d.I18n.i18nresolved?(r(),e(d.I18n.i18nJsonKeys)):d.I18n.ready(function(){r(),e(d.I18n.i18nJsonKeys)}))},l.log=function(e){try{(n.includes(s.location.port)||l.queryParams("debugClientLibs"))&&1<arguments.length&&a.includes(e)&&(2===arguments.length?console[e](arguments[1]):console[e](Array.prototype.slice.call(arguments).slice(1)))}catch(e){console.log(e)}},l.hbsTemplates={ready:function(e){c(document.body).data().hbsTemplatesReady&&e?e():c(document.body).on("hbsTemplatesReady",e)}},s.hbsTemplates=l.hbsTemplates,l.mapsApiReady=function(){c(document.body).data({maps:!0}),c(document).trigger("mapsReady")},l.googleMaps={ready:function(e){c(document.body).data().maps&&c(document.body).data().markerclusterer&&e?e():c(document).on("mapsReady",function(){c(document.body).data().markerclusterer?e():c(document).on("markerclustererReady",e)})}},s.googleMaps=l.googleMaps,l.queryParams=function(e){var t=c.deparam(s.location.search);return"string"==typeof e?t[e]:t},l.getCookieDomain=function(){return s.location.hostname},void 0===(m=function(){return l}.apply(h,[]))||(p.exports=m),l.toArray=function(e){return Array.prototype.slice.call(e)},l.escapeExpr=function(e){return e?"string"!=typeof e?e.toString():decodeURIComponent(e).replace(/[^a-zA-Z0-9]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"\\":return"&#92;";case"/":return"&#47;";default:return e}}):""},l.filterScripts=function(e){return decodeURIComponent(e).replace(/<script>|<script[^>]+>|<\/script>/gi,"")},l.init=function(){!function(){f.e(62).then(f.t.bind(null,872,7)).then(function(){c(document.body).data({hbsTemplatesReady:!0}),c(document.body).trigger("hbsTemplatesReady"),l.log("debug","AMD: Templates loaded")});var o=[],r=["common","analytics","ajaxWrapper","wishlist","shoppingCart","dispatch","messages","changePassword","backToTop","modal","pricing"];c("[data-module]").each(function(){r=r.concat(c(this).data("module").split(","))}),((r=r.filter(function(e){return(e=e.trim())?e:(l.log("error","CAR: Empty/invalid module definition found"),l.log("error","CAR: Check if you have declared an empty 'data-module' attribute"),!1)})).includes("bsaod")||r.includes("storelocator"))&&Promise.all([f.e(10).then(f.t.bind(null,966,7)),new Promise(function(e,t){c.getScript(N,function(){e()})})]).then(function(){c(document.body).data({markerclusterer:!0}),c(document).trigger("markerclustererReady"),l.log("debug","AMD: google maps and markerclusterer libraries are loaded")}).catch(function(e){console.error(e)}),l.resolveI18nKeys(function(e){var t,a,n,i={};if(s.I18nJson=e,r.length){for(a=0,n=r.length;a<n;a++)t=r[a],v.includes(t)&&!i.HOMEPAGE_MODULES?i.HOMEPAGE_MODULES=f.e(7).then(f.t.bind(null,968,7)):y.includes(t)&&!i.PDP_MODULES?i.PDP_MODULES=f.e(21).then(f.t.bind(null,970,7)):b.includes(t)&&!i.CLP_MODULES?i.CLP_MODULES=f.e(1).then(f.t.bind(null,975,7)):C.includes(t)&&!i.PLP_MODULES?i.PLP_MODULES=f.e(46).then(f.t.bind(null,978,7)):w.includes(t)&&!i.GIFT_FINDER_MODULES?i.GIFT_FINDER_MODULES=f.e(6).then(f.t.bind(null,980,7)):k.includes(t)&&!i.EMAIL_VERIFICATION_MODULES?i.EMAIL_VERIFICATION_MODULES=f.e(4).then(f.t.bind(null,982,7)):j.includes(t)&&!i.STRAP_CONFIGURATOR_MODULES?i.STRAP_CONFIGURATOR_MODULES=f.e(49).then(f.t.bind(null,984,7)):I.includes(t)&&!i.SERVICES_MODULES?i.SERVICES_MODULES=f.e(48).then(f.t.bind(null,985,7)):S.includes(t)&&!i.MY_CARTIER_MODULES?i.MY_CARTIER_MODULES=f.e(13).then(f.t.bind(null,991,7)):x.includes(t)&&!i.MY_ORDERS_MODULES?i.MY_ORDERS_MODULES=f.e(16).then(f.t.bind(null,998,7)):_.includes(t)&&!i.MY_REPAIR_DETAIL_MODULES?i.MY_REPAIR_DETAIL_MODULES=f.e(17).then(f.t.bind(null,1e3,7)):P.includes(t)&&!i.MY_WISHLIST_MODULES?i.MY_WISHLIST_MODULES=f.e(19).then(f.t.bind(null,1002,7)):A.includes(t)&&!i.MY_REQUEST_REPAIR_MODULES?i.MY_REQUEST_REPAIR_MODULES=f.e(18).then(f.t.bind(null,1005,7)):M.includes(t)&&!i.MY_ADDRESS_MODULES?i.MY_ADDRESS_MODULES=f.e(12).then(f.t.bind(null,1007,7)):E.includes(t)&&!i.MY_ORDER_DETAIL_MODULES?i.MY_ORDER_DETAIL_MODULES=f.e(15).then(f.t.bind(null,1014,7)):L.includes(t)&&!i.MY_CARTIER_REQUEST_REPAIR_MODULES?i.MY_CARTIER_REQUEST_REPAIR_MODULES=f.e(14).then(f.t.bind(null,1016,7)):T.includes(t)&&!i.Mega_Menu_Manhattan_MODULES?i.Mega_Menu_Manhattan_MODULES=f.e(11).then(f.t.bind(null,1018,7)):D.includes(t)&&!i.FOOTER_MANHATTAN_MODULES?i.FOOTER_MANHATTAN_MODULES=f.e(5).then(f.t.bind(null,1020,7)):R.includes(t)&&!i.WOW_ANIMATION_MODULES&&(i.WOW_ANIMATION_MODULES=f.e(63).then(f.bind(null,1022)));Promise.all(Object.keys(i).map(function(e){return i[e]})).then(function(){r.forEach(function(t){if(console.log("module ",t,!!l[t]),l[t]&&-1===o.indexOf(t)){console.log("module initializing",t);try{l[t].init()}catch(e){console.error("Module ".concat(t," Init Error: "),e)}o.push(t),console.log("module initialized",t)}}),c(document.body).trigger("allRequireModuleLoaded")}).catch(function(e){console.error(e)})}})}(),e(),function(){var e=s.location.hostname;s.location.port;t.includes(e)}()},c?u(c):Promise.resolve().then(function(){var e=[f(115)];(function(e){u(c=e)}).apply(null,e)}).catch(f.oe)}(window,window.jQuery,window.sncf,window.CQ)},840:function(e,t){!function(e,t,n){var a={userAgent:window.navigator.userAgent},i={hasWebkit:/webkit/i.test(a.userAgent),hasChrome:/chrome/i.test(a.userAgent),hasSafari:/safari/i.test(a.userAgent),hasMozilla:/mozilla/i.test(a.userAgent),hasFirefox:/firefox/i.test(a.userAgent),hasMSIE:/msie/i.test(a.userAgent),hasTrident:/trident/i.test(a.userAgent),hasEdge:/edge/i.test(a.userAgent),hasOpera:/OPR/.test(a.userAgent)};t.common=e.extend(t.common,{isWebkit:function(){return i.hasWebkit},isChrome:function(){return i.hasWebkit&&i.hasChrome},isSafari:function(){return i.hasWebkit&&i.hasSafari&&!i.hasChrome},isEdge:function(){return i.hasWebkit&&i.hasEdge},isIE:function(){return i.hasMSIE||i.hasTrident||this.isEdge()},isFirefox:function(){return i.hasMozilla&&i.hasFirefox},isOpera:function(){return i.hasWebkit&&i.hasOpera}});var o=t.common;n.registerHelper("ifBrowserIs",function(e,t){if("string"==typeof e){var a=e.charAt(0).toUpperCase()+e.toLowerCase().substring(1);if(o["is"+a]())return t.fn(this)}return t.inverse(this)}),n.registerHelper("unlessBrowserIs",function(e,t){if("string"==typeof e){var a=e.charAt(0).toUpperCase()+e.toLowerCase().substring(1);if(!o["is"+a]())return t.fn(this)}return t.inverse(this)}),n.registerHelper("if_ua",function(e,t){var a=n.Utils.escapeExpression(e);return a&&i["has"+a]?t.fn(this):t.inverse(this)})}(window.jQuery,window.sncf,window.Handlebars)},841:function(e,t,a){var n,i,o;window,window.jQuery,i=window.sncf,o={},i.analyticsTracking={moduleName:"analyticsTracking",updateCache:function(){o={doNotTrack:!1}},trackClickEvent:function(e){var t=[],a=-1;i.common.storage.get("aaClick")&&(t=i.common.storage.get("aaClick")),t.length&&-1<(a=this.getArrayIndex(t,e))&&t.splice(a,1),this.addClickObject(t,e),i.common.storage.set("aaClick",JSON.stringify(t))},trackConversionEvent:function(e){var t,a=[],n=-1;o.doNotTrack||(t={objectID:e},i.common.storage.get("aaClick")&&(a=i.common.storage.get("aaClick")),a.length&&-1<(n=this.getArrayIndex(a,t))&&(this.pushConversionAnalytics(a[n]),a.splice(n,1),i.common.storage.set("aaClick",JSON.stringify(a))))},addClickObject:function(e,t){return 50<=e.length&&e.pop(),e.push(t)},getArrayIndex:function(e,a){var n=-1;return e.forEach(function(e,t){-1<e.objectID.indexOf(a.objectID)&&(n=t)}),n},pushClickAnalytics:function(e){var t=e;window.aa&&window.aa("click",{objectID:t.data("algoliaObjectid"),position:t.data("algoliaPosition"),queryID:t.data("algoliaQueryid")}),i.analyticsTracking.trackClickEvent({objectID:t.data("algoliaObjectid"),queryID:t.data("algoliaQueryid")})},pushConversionAnalytics:function(e,t){t&&(o.doNotTrack=!0),window.aa&&window.aa("conversion",e)},init:function(){i.log("debug","CAR: analyticsTracking has been initialized"),this.updateCache()}},void 0===(n=function(){return i.analyticsTracking}.apply(t,[]))||(e.exports=n)},842:function(e,t,a){var n,o,i;function r(e){var a={},n={};o.each(e.data(),function(e,t){e.match(/^ga/)&&(a[e.replace("ga","").lowerCaseFirstLetter()]=t),e.includes("ee")&&(n[e.replace("ee","").lowerCaseFirstLetter()]=t)}),o.isEmptyObject(a)||(common.isMobile()&&"menu"===a.event&&void 0===a.secondLevel&&(a.secondLevel=""),dataLayer.push(a)),o.isEmptyObject(n)||dataLayer.push(n)}window,o=window.jQuery,i=window.sncf,o&&(String.prototype.lowerCaseFirstLetter||(String.prototype.lowerCaseFirstLetter=function(){return this.charAt(0).toLowerCase()+this.slice(1)}),i.analytics={moduleName:"Analytics",triggerClickGaEventOnLoad:function(e){e.data("fnClick")&&r(e)},pushScrolledAnalytics:function(){var e,a={};for(e in o(".js-scrollga-enable:in-viewport:visible").each(function(){var e=o(this);if(!e.parents(".slick-slide").length||e.parents(".slick-active").length){var t=e.data("scrollgaArray").toLowerCase();t&&(a[t]||(a[t]={},a[t][t]=[],a[t].count=0),a[t].event=e.data("scrollgaEvent"),a[t].eeAction=e.data("scrollgaEeAction"),e.data("scrollgaCurrencyCode")&&(a[t].currencyCode=e.data("scrollgaCurrencyCode")),e.data("scrollgaInView")||(a[t][t].push(e.data("ee"+e.data("scrollgaArray"))[0]),a[t].count++,e.data("scrollgaInView",!0)))}}),a)Object.keys(a[e]).length&&a[e].count&&(delete a[e].count,dataLayer.push(a[e]))},trackEvents:function(){var e=o(document);e.on("sclick enterKeyPress","[data-fn-click='true']",function(){r(o(this))}),e.on("click","[data-fn-click='true']",function(e){var t=o(this),a=t.data("delay"),n=t.attr("href"),i=o(this).attr("target");a&&!i&&n&&(e.preventDefault(),setTimeout(function(){window.location=n},a))}),e.on("scroll",i.common.throttle(function(){i.analytics.pushScrolledAnalytics()},150))},init:function(){i.log("debug","CAR: Analytics has been initialized"),window.dataLayer&&"push"in window.dataLayer?(this.trackEvents(),this.pushScrolledAnalytics()):i.log("error","CAR: Data Layer object is not defined")}},void 0===(n=function(){return i.analytics}.apply(t,[]))||(e.exports=n))},843:function(t,a,e){var n;!function(e,r,s){"use strict";r&&(s.ajaxWrapper={moduleName:"AJAX Wrapper",xhrPool:{name:"xhrPool"},getXhrObj:function(e,t,a){var n=this,i=r.extend({},{type:"POST",async:!0,cache:!1,url:"",data:{},dataType:"json",loaderRef:null,cancellable:!1,loader:null}),o=e.beforeSend;return r.extend(i,e,{beforeSend:function(e){!function(e,t,a,n){a.cancellable&&(t.xhrPool[a.url]?(t.xhrPool[a.url].abort(),t.xhrPool[a.url]=e,s.log("debug","Aborted previous request for "+a.url)):(t.xhrPool[a.url]=e,s.log("debug",t.xhrPool))),a.loader&&a.loader.length&&(["BUTTON","A"].includes(a.loader[0].nodeName)||a.loader.hasClass("loader-btn")?t.loaderRef=common.loader().insertAfter(a.loader):t.loaderRef=common.loader().target(a.loader)),"function"==typeof n&&n()}(e,n,i,o)}}),r.ajax(i).done(function(){var a=arguments[2];r.each(n.xhrPool,function(e,t){if(t===a)return delete n.xhrPool[e],s.log("debug",n.xhrPool),!1}),"function"==typeof t&&t.apply(this,arguments)}).fail(function(a){r.each(n.xhrPool,function(e,t){if(t===a)return delete n.xhrPool[e],s.log("debug",n.xhrPool),!1}),"function"==typeof t&&t.apply(this,arguments)}).always(function(){n.loaderRef&&n.loaderRef.length&&n.loaderRef.remove(),"function"==typeof a&&a.apply(this,arguments)})},init:function(){s.log("debug","CAR: Ajax wrapper initialized"),e.ajaxWrapper||(e.ajaxWrapper=this)}},void 0===(n=function(){return s.ajaxWrapper}.apply(a,[]))||(t.exports=n))}(window,window.jQuery,window.sncf)},844:function(e,t,a){var n,i,o,r;function s(){0===r.pricingStatus&&(r.pricingStatus=1,function(){var e,t;e={type:"GET",url:o.env.dev?"/source/modules/plp_pl/data/Price."+r.countryCode+".json":r.priceURL,cache:!0},t={type:"GET",url:o.env.dev?"/source/modules/plp_pl/data/Availability."+r.countryCodeURL+".json":r.availabilityURL,cache:!0},i.when(ajaxWrapper.getXhrObj(e),ajaxWrapper.getXhrObj(t)).done(function(e,t){hbsTemplates.ready(function(){r.productPriceData=e,r.productAvailabilityData=t,i(document.body).trigger("productDataLoaded",{price:e,availability:t})})}).fail(function(e){o.log("log",e)})}())}window,i=window.jQuery,o=window.sncf,r={},o.pricing={moduleName:"pricing",initCache:function(){return function(){r.$html=i("html"),r.$body=i(document.body),r.lang=r.$html.attr("lang"),r.countryCode=o.pageService.getCountryCode().toUpperCase(),r.euCode=o.pageService.getEuCode(),r.countryCodeURL=r.euCode?r.euCode.toUpperCase():r.countryCode,r.isEcomEnable=i("#eComCheck").val(),r.enableDynamicPricing=i("#enableAvailabilityPDPService").val(),r.domain=o.pageService.getSecureDomain(),r.availabilityURL=r.domain+"/content/cache/appData/cache/service/availability."+r.countryCodeURL+".html",r.priceURL=r.domain+"/content/cache/appData/cache/service/price."+r.countryCode+".html",r.pricingStatus=0,r.productPriceData={},r.productAvailabilityData={}}.apply(this,arguments)},initializeDynamicPricing:function(){return s.apply(this,arguments)},init:function(){o.log("debug","CAR: Dynamic pricing initialized"),this.initCache()}},void 0===(n=function(){return o.pricing}.apply(t,[]))||(e.exports=n)},845:function(e,t,a){var n,i,o,r,s;function c(e,t,a,n){switch(t){case"URL":e.attr("href",a);break;case"class":e.removeClass(n).addClass(a);break;case"text":e.text(a);break;default:return!1}return!0}function l(e){var t=o(":focus"),a=s.$stickyNavigation.outerHeight(!0),n=o(this).attr("href");13!==e.which&&"click"!==e.type||(t.blur(),r.common.scrollTo(o(n),400,a))}function d(e,t,a){e?t.fadeIn("slow",function(){a.attr("aria-expanded",!0)}).delay(3e3):(t.stop(!0,!0).fadeIn(),a.attr("aria-expanded",!0))}function u(e,t,a){e?t.fadeOut("slow").queue(function(){a.attr("aria-expanded",!1)}):t.stop(!0,!0).delay(500).fadeOut().queue(function(){a.attr("aria-expanded",!1)})}function p(e){var t=e.replace(/"/g,"").replace(/\+/g," "),a=t.split("/"),n="",i=["CN","HK","KR","SG","TW","JP"];if(-1<i.indexOf(s.country))switch(s.country){case"HK":n="zh"===s.lang?"{title} "+a[0]:"{title} "+a[1];break;case"JP":case"KR":n=t+" {title}";break;default:n="{title} "+t}else n="{title} "+a[1]+" "+a[2];var o=-1<i.indexOf(s.country)?n.replace("{title}",CQ.I18n.getMessage("mycartier.myaccount.dear")):n.replace("{title}",CQ.I18n.getMessage("myaccount.dear."+a[0]));r.common.removeCookie("c_n"),function(e,t){if(common.isLoggedIn()){if(e.contains("null")||t.contains("null"))return;s.$userAccountListItemTxt.text("ja"===s.lang?e:t.replace("{title}","").trim()),s.$userName.text(e)}else r.common.storage.remove("c_n")}(o,n)}function h(){var e=s.$myAccountLinks.find('i[class$="red"]').attr("class"),t=e?e.replace("red","grey"):"";s.$myAccountLinks.find("a").removeClass("active"),e&&s.$myAccountLinks.find('i[class$="red"]').removeClass().addClass(t)}function f(){var e=o(this),t=e.find("i").attr("class").replace("grey","red");h(),e.find("a").addClass("active").find("i").removeClass().addClass(t)}i=window,o=window.jQuery,r=window.sncf,s={},r.header={moduleName:"header",updateCache:function(){s={$userAccountListItem:o(".js-nav-link-connection"),$userAccountListItemTxt:o(".js-nav-link-connection-text"),$userAccountListItemIcon:o(".js-nav-link-connection-icon"),$userMyaccountListIcon:o(".js-nav-link-myaccount-icon"),$myAccountFlag:o(".js-myaccount-flag"),$userWishlistItem:o(".js-nav-link-wishlist"),$banner:o(".js-comm-banner"),$pageHeader:o(".js-header"),$navLogoWrapper:o(".js-nav-logo-wrapper"),$navWrapper:o(".js-header__nav-wrapper"),$navMegaMenu:o(".c-navigation"),$shoppingBag:o(".js-nav-link-cart"),$cartCount:o(".js-cart-update span"),$searchOverlay:o(".js-search__overlay"),$skipContent:o(".js-skip-link"),$stickyNavigation:o(".js-navigation"),$myAccountWrapper:o(".js-myaccount-wrapper"),$myAccountBtn:o(".js-myaccount-popin"),$myAccountContainer:o(".js-myaccount-contianer"),$langWrapper:o(".js-lang-list"),$langContainer:o(".js-selected-lang-container"),$langSelectedbtn:o(".js-selected-lang"),$userName:o(".js-userName"),$headerLogoutButton:o(".js-logout-button"),$logoutFormWrapper:o(".js-logout-form"),$cartWrapper:o(".js-basket-popup"),$myAccountLinks:o(".c-myaccount__links__li"),$countryContainer:o(".js-country-container"),$countryContainerElement:o(".js-country-element"),$countrySelected:o(".js-selected-country"),$selectedCountryFlag:o(".js-selected-flag"),country:o("html").data("country"),lang:o("html").data("lang"),globalECountryList:o("html").data("geCountryList")}},bindEvents:function(){!function(){var e,t="guest",a=t;e=common.isLoggedIn()?(t="logged","loggedintext"):(a="logged","loggedouttext"),c(s.$userAccountListItem,"URL",s.$userAccountListItem.data(t)),c(s.$userAccountListItemTxt,"class",s.$userAccountListItemTxt.data(t),s.$userAccountListItemTxt.data(a)),c(s.$userAccountListItemTxt,"text",s.$userAccountListItemTxt.data(e)),c(s.$userAccountListItemIcon,"class",s.$userAccountListItemIcon.data(t),s.$userAccountListItemIcon.data(a)),c(s.$userMyaccountListIcon,"class",s.$userMyaccountListIcon.data(t),s.$userMyaccountListIcon.data(a)),c(s.$myAccountFlag,"class",s.$myAccountFlag.data(t),s.$myAccountFlag.data(a)),c(s.$userWishlistItem,"URL",s.$userWishlistItem.data(t))}(),this._stickyHeader(),function(){var e=r.common.storage.get("c_n");e||(e=r.common.getCookie("c_n")),r.common.storage.set("c_n",e),""!==e.trim()&&e&&p(e)}(),s.$myAccountContainer.on("focusin",s.$myAccountBtn,function(){s.$cartWrapper.addClass("hidden"),s.$myAccountWrapper.removeClass("hidden"),d(!1,s.$myAccountWrapper,s.$myAccountBtn)}).on("focusout",function(){h(),u(!1,s.$myAccountWrapper,s.$myAccountBtn)}),s.$countrySelected.on("click",function(e){e.stopPropagation(),s.$countryContainerElement.toggleClass("hidden");var t=o(this).find(".js-selected-flag").attr("class").match(/icon-flag--(\w)+/g),a=s.$countryContainerElement.find("."+t).closest(".c-country-container--li");a.length||(a=s.$countryContainerElement.find(".c-country-container--li.selected")),a[0].parentNode.scrollTop=a[0].offsetTop-8}),o("body, #jsNavigationToggle").on("click",function(){s.$countryContainerElement.addClass("hidden")}),s.$myAccountContainer.on("mouseenter",function(){s.$cartWrapper.addClass("hidden"),s.$myAccountWrapper.removeClass("hidden"),d(!1,s.$myAccountWrapper,s.$myAccountBtn)}).on("mouseleave",function(){h(),u(!1,s.$myAccountWrapper,s.$myAccountBtn)}),s.$headerLogoutButton.on("click",function(){var e=s.$logoutFormWrapper.find('[name=":redirect"]'),t=s.$logoutFormWrapper.find("form");e&&e.val(window.location.href),"/.html"===t.attr("action")&&t.attr("action","/"),t.submit()});var e=o(".js-lang-list li");if(2<=e.length?(e.parent().addClass("mobile-view"),s.$langSelectedbtn.removeClass("hidden"),s.$langSelectedbtn.text(CQ.I18n.getMessage(s.lang?s.lang.toUpperCase():"")),e.removeClass("active"),e.filter(s.lang.toLowerCase()).addClass("active"),s.$langWrapper.removeClass("hidden")):0===e.length?s.$langWrapper.addClass("hidden"):s.$langWrapper.removeClass("hidden"),common.isMobileMode()&&2<=e.length&&(s.$langContainer.on("focusin",s.$langSelectedbtn,function(){s.$cartWrapper.addClass("hidden"),s.$myAccountWrapper.addClass("hidden"),s.$langWrapper.removeClass("hidden"),d(!1,s.$langWrapper,s.$langSelectedbtn)}).on("focusout",function(){u(!1,s.$langWrapper,s.$langSelectedbtn)}),s.$langContainer.on("mouseenter",function(){s.$cartWrapper.addClass("hidden"),s.$myAccountWrapper.addClass("hidden"),s.$langWrapper.removeClass("hidden"),d(!1,s.$langWrapper,s.$langSelectedbtn)}).on("mouseleave",function(){u(!1,s.$langWrapper,s.$langSelectedbtn)})),common.isMobileMode()&&s.$myAccountBtn.click(function(){o(this).hasClass("mobile-contianer")?(o(this).removeClass("mobile-contianer"),s.$myAccountWrapper.removeClass("hidden")):(o(this).addClass("mobile-contianer"),s.$myAccountWrapper.addClass("hidden"))}),s.$skipContent.on("click keypress",l),o(".c-myaccount__links__li").on("mouseover focusin",f),s.globalECountryList&&s.globalECountryList.includes(common.getCookie("ctry")||s.country)&&(s.$myAccountContainer.addClass("hide-my-account"),common.isLoggedIn()&&o.ajax({type:"POST",url:"/bin/cartier/logoutServlet",dataType:"json",contentType:"application/x-www-form-urlencoded"})),"CN"===r.common.countryHandler.countryCode)if(r.common.doesHttpOnlyCookieExist("ccp-login-token")&&!r.common.getCookie("RCHMFrontEndCookie").length){var t={url:"/bin/cartier/ssologin?currentPagePath="+o("#configPath").val(),method:"POST"};r.ajaxWrapper.getXhrObj(t).done(function(e){e.success&&r.header.init()}).fail(function(e){r.log("log",e)})}else!r.common.doesHttpOnlyCookieExist("ccp-login-token")&&r.common.getCookie("RCHMFrontEndCookie").length&&common.isLoggedIn()&&r.ajaxWrapper.getXhrObj({type:"POST",url:"/bin/cartier/logoutServlet",dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(e){e.success&&r.header.init()}).fail(function(e){console.log("log",e)})},_stickyHeader:function(){var t=0<s.$banner.length?s.$banner.outerHeight(!0):0,a=s.$pageHeader.outerHeight(!0);o(i).scroll(function(){var e=o(this).scrollTop();!common.isMobile()&&t+a<e||common.isMobile()&&t<e?(s.$navLogoWrapper.addClass("sticky"),s.$searchOverlay.addClass("sticky"),s.$pageHeader.css("margin-bottom",t),s.$banner.hide()):(s.$navLogoWrapper.removeClass("sticky"),s.$searchOverlay.removeClass("sticky"),s.$pageHeader.css("margin-bottom","0"),s.$banner.show(),common.isMobile()||r.search.closeSearch())})},init:function(){r.log("debug","CAR: Header initialized"),this.updateCache(),this.bindEvents()}},void 0===(n=function(){return r.header}.apply(t,[]))||(e.exports=n),o(document).ready(function(){o("img.svgImage").each(function(){var a=o(this),e=o(this).attr("src");"svg"===function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e):void 0}(e)[0]&&o("body").hasClass("full-width-view")&&o.get(e,function(e){var t=e.childNodes;o(t).insertAfter(a),a.hide()})})})},846:function(e,t,a){var n,i,o,r;function s(e){e.stopPropagation(),i(r.$searchOverlay).hasClass("displayed")?(o.search.closeSearch(),r.$navLogoWrapper.addClass("menu-closed")):(function(){r.$searchOverlay.removeClass("hidden-xs"),r.$navigation.addClass("position-static");var e=setTimeout(function(){r.$searchOverlay.addClass("displayed"),r.$searchContainer.addClass("expanded"),clearTimeout(e)},30)}(),r.$navLogoWrapper.removeClass("menu-closed"))}function c(e){e.stopPropagation()}function l(){var e=i.trim(r.$searchInput.val()),t=r.$searchInput.parent(".c-search_form-wrapper");return t.hasClass("has-error")&&t.removeClass("has-error"),!!r.$searchInput.val().length&&(!e.match(/^[\s\*]*$/g)||(t.addClass("has-error"),!1))}i=window.jQuery,o=window.sncf,r={},o.search={moduleName:"search",closeSearch:function(){i(r.$searchOverlay).removeClass("displayed"),i(r.$searchContainer).removeClass("expanded"),i(r.$navigation).removeClass("position-static");var e=setTimeout(function(){i(r.$searchOverlay).addClass("hidden-xs"),clearTimeout(e)},40)},updateCache:function(){r={$body:i(document.body),$searchHeaderBtn:i(".js-header-toggle-search"),$searchOverlay:i(".js-search__overlay"),$searchContainer:i(".js-search__container"),$topLevelLinks:i(".js-header__nav-wrapper"),$searchNavBackLink:i(".js-search-navigateBack"),$searchInput:i("#js-search-form-input"),$navLogoWrapper:i(".js-nav-logo-wrapper"),$navigation:i(".js-navigation"),$searchForm:i(".c-search__form")}},bindEvents:function(){r.$searchHeaderBtn.off("click").on("click",s),r.$searchOverlay.off("click").on("click",this.closeSearch),r.$searchContainer.off("click").on("click",c),r.$body.on("click",this.closeSearch),r.$searchInput.on("keyup",l),r.$searchForm.submit(l)},init:function(){o.log("debug","CAR: Search initialized"),this.updateCache(),this.bindEvents()}},void 0===(n=function(){return o.search}.apply(t,[]))||(e.exports=n)},847:function(o,r,e){var s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,a){if(t){var n={},i=e.RICHEMONT;a.footer={moduleName:"Footer",updateCache:function(){n={$body:t(document.body),$shippingCountryInfo:t(".js-icon-info"),$shippingCountryInfoContent:t(".js-icon-info-content-wrapper"),$guestOrderModal:t(".js-guest-order-modal"),$emailLinkblock:t(".js-email-linksection"),$continueshop:t(".js-contin-shop"),$guestOrderForm:t(".js-Guest-Order-Email-form"),$reqorderSubmitBtn:t('#js-Guest-Order-Email-form input[name="SUBMIT"]'),$wechatBtn:t(".js-btn-wechat"),$qrcode:t(".js-qrcode")}},bindEvents:function(){a.common.isMobileMode()&&t(".businessdetails_text .js-rep").insertAfter(t(".businessdetails_text .js-last")),n.$shippingCountryInfo.on("mouseenter",function(){n.$shippingCountryInfoContent.show()}).on("mouseleave",function(){n.$shippingCountryInfoContent.hide()}),n.$wechatBtn.on("mouseenter touchstart",function(){n.$qrcode.show()}).on("mouseleave touchleave",function(){n.$qrcode.hide()}),n.$body.on("guestOrderRequest:show",function(){e.dataLayer.push({event:"virtualPageview",pageURI:"/"+t("html").data("lang")+"/pop-in/guest-order-footer"}),n.$guestOrderModal.modal("show")}).on("guestOrderRequest:hide",function(){n.$guestOrderModal.modal("hide")}),n.$guestOrderModal.on("hidden.bs.modal",function(){n.$emailLinkblock.addClass("hidden"),n.$guestOrderForm.removeClass("hidden")}),t(".js-guest-order-track").on("click",function(){n.$body.trigger("guestOrderRequest:show")}),n.$continueshop.on("click",function(){n.$body.trigger("guestOrderRequest:hide")}),t(".js-guest-order-track").removeAttr("target"),i.AjaxCaller.listOfCallbackFun.GuestOrderEmailAction=function(e){"object"===c(e)&&(e.success?(n.$emailLinkblock.removeClass("hidden"),n.$guestOrderForm.addClass("hidden")):(a.log("log","Error"),a.messages.makeError({message:CQ.I18n.getMessage(e.errorMessage),customStyle:"custom-make-error"})))}},init:function(){a.log("debug","CAR: Footer module initialized"),this.updateCache(),this.bindEvents()}},void 0===(s=function(){return a.footer}.apply(r,[]))||(o.exports=s)}}(window,window.jQuery,window.sncf)},848:function(f,m,e){var g;!function(e,r,i){if(r){var o={};i.navigation={moduleName:"Navigation",updateCache:function(){o={$body:r(document.body),$navigation:r("#jsNavigationToggle"),$navigationLi:r(".js-navigation__listitem"),$navigationLiLinks:r(".js-navigation__listitem > a"),$navigationUl:r(".js-navigation__ulist"),$megamenu:r(".js-megamenu"),$megamenuBacklink:r(".js-megamenu__section--backlink"),$megamenuRoot:r(".js-megamenu__root"),$overlay:r(".js-navigation__overlay"),$menu:r(".js-navigation__container"),$megamenuLi:r(".js-megamenu__section"),$megamenuUl:r(".js-megamenu__root--list"),$submenuBackLink:r(".js-megamenu__listitem--backlink"),$thirdLevelLi:r(".js-megamenu__listitem"),$topLevelLinks:r(".js-header__nav-wrapper"),$headerLogo:r(".js-header-logo"),$menuDismiss:r(".c-navigation__overlay--dismiss"),$menuDismissClose:r(".js-navigation__overlay--dismiss"),$viewMoreLinks:r(".c-megamenu__listitem--viewmorelink"),$navLogoWrapper:r(".js-nav-logo-wrapper"),$secondLevelMenuLinks:r(".js-navigation--threelevel .js-megamenu__section>.js-megamenu__section--heading>a"),$megamenuLogo:r(".js-navigation__logo"),isDelayMegaMenu:"true"===r("#isDelayMegaMenu").val()}},bindEvents:function(e){r(window).on("responsive",function(){common.isMobileMode()?(o.$body.off("dispatch:open").on("dispatch:open",t),o.$body.off("dispatch:close").on("dispatch:close",a),o.$navigation.off("click").on("click",t),o.$overlay.off("click").on("click",a),o.$megamenuLogo.off("click").on("click",a),o.$menuDismissClose.off("click").on("click",a),o.$menu.off("click").on("click",n),o.$navigationLi.off("click").on("click",c),o.$megamenuBacklink.off("click").on("click",d),o.$megamenuLi.off("click").on("click",l),o.$submenuBackLink.off("click").on("click",h),o.$thirdLevelLi.off("click").on("click",n),o.$viewMoreLinks.off("click").on("click",n),o.$navigationLiLinks.off("focusin"),o.$secondLevelMenuLinks.off("focusin"),o.$megamenu.find("a").off("focusin"),o.$megamenu.off("click"),r(document.body).off("focusin click"),o.$navigationLiLinks.off("mouseenter mouseleave"),o.$navigationLi.off("mouseenter mouseleave"),o.$secondLevelMenuLinks.off("mouseenter mouseleave")):(o.$navigation.off("click"),o.$overlay.off("click"),o.$megamenuLogo.off("click"),o.$menuDismissClose.off("click"),o.$menu.off("click"),o.$navigationLi.off("click"),o.$megamenuBacklink.off("click"),o.$megamenuLi.off("click"),o.$submenuBackLink.off("click"),o.$thirdLevelLi.off("click"),o.$viewMoreLinks.off("click"),o.$megamenu.find("a").off("focusin").on("focusin",n),o.$megamenu.off("click").on("click",n),e||o.$navigationLi.off("mouseenter mouseleave").on("mouseenter mouseleave",p))}),common.isMobileMode()&&(o.$body.off("dispatch:open").on("dispatch:open",t),o.$body.off("dispatch:close").on("dispatch:close",a),o.$navigation.on("click",t),o.$overlay.on("click",a),o.$megamenuLogo.on("click",a),o.$menuDismissClose.on("click",a),o.$menu.on("click",n),o.$navigationLi.on("click",c),o.$megamenuBacklink.on("click",d),o.$megamenuLi.on("click",l),o.$submenuBackLink.on("click",h),o.$thirdLevelLi.on("click",n),o.$viewMoreLinks.on("click",n),e||o.$navigationLi.off("mouseenter mouseleave")),common.isTabletOrDesktopMode()&&(o.$megamenu.find("a").on("focusin",n),o.$megamenu.on("click",n),e||o.$navigationLi.off("mouseenter mouseleave").on("mouseenter mouseleave",p))},init:function(e){i.log("debug","CAR: Navigation module initialized"),this.updateCache(),this.bindEvents(e)}},void 0===(g=function(){return i.navigation}.apply(m,[]))||(f.exports=g)}function s(){var e=r(".js-navigation-menu .js-navigation__ulist"),t=r(".js-nav-dispatchpopup-btn");if(e.css({height:"auto"}),e.is(":visible")){var a,n=e.outerHeight(),i=t.outerHeight(),o=r(window).height();a=r(".navigation-new").length?"auto":n<o?"100%":"auto",n&&o&&e.css({height:a,"padding-bottom":i}).data("calcHeightMenu",!0)}}function t(e){e.stopImmediatePropagation();var t,a=r(e.target);t=a.is("body")?r(".js-navigation-dispatch"):r(".js-navigation-menu"),e.stopPropagation(),o.$body.addClass("modal-open"),t.find(".js-navigation__overlay").removeClass("hidden-xs"),o.$headerLogo.removeClass("clickable"),o.$navLogoWrapper.removeClass("menu-closed");var n=setTimeout(function(){t.find(".js-navigation__overlay").addClass("color-transform"),t.find(".js-navigation__container").addClass("translated"),t.find(".c-navigation__overlay--dismiss").addClass("translated"),i.search.closeSearch(),s(),clearTimeout(n)},30)}function a(e){var t,a=r(e.target);t=a.is("body")?r(".js-navigation-dispatch"):r(".js-navigation-menu"),o.$body.removeClass("modal-open"),t.find(".js-navigation__overlay").removeClass("color-transform"),t.find(".js-navigation__container").removeClass("translated"),t.find(".c-navigation__overlay--dismiss").removeClass("translated"),t.find(".c-navigation__header--toggle").focus(),o.$headerLogo.addClass("clickable");var n=setTimeout(function(){o.$navLogoWrapper.addClass("menu-closed"),t.find(".js-navigation__overlay").addClass("hidden-xs"),clearTimeout(n)},400);r(".js-navigation").hasClass("c-newnavigation")&&o.$navigationUl.find(".js-navigation__listitem").each(function(){r(this).closest(".js-navigation__ulist").removeClass("slide-left"),r(this).find(".js-megamenu").removeClass("ace"),o.$navigationUl.removeAttr("role"),o.$navigationLi.removeAttr("aria-hidden tabindex"),r(this).removeClass("nav-opened")}),o.$body.trigger("megamenu:closed")}function n(e){e.stopPropagation(),"focusin"===e.type&&i.keyboardAccess(e)}function c(e){if(e.stopImmediatePropagation(),!r(e.target).closest(".js-newmegamenu").length){e.preventDefault(),e.stopPropagation();var t=r(this);t.find(".js-megamenu").hasClass("c-newmegamenu")&&t.find(".js-megamenu").hasClass("ace")?r(e.target).is("a, a > .icon")&&(t.closest(".js-navigation__ulist").removeClass("slide-left"),t.find(".js-megamenu").removeClass("ace"),o.$navigationUl.removeAttr("role"),o.$navigationLi.removeAttr("aria-hidden tabindex"),t.removeClass("nav-opened")):(o.$navigationLi.attr({"aria-hidden":!0,tabindex:"-1"}),t.attr({"aria-hidden":!1,tabindex:"0"}),o.$navigationUl.attr("role","presentation"),t.closest(".js-navigation__ulist").addClass("slide-left"),o.$navigationUl.parent().addClass("hidden-view"),t.addClass("nav-opened"),t.find(".js-megamenu").addClass("ace"),t.find(".js-megamenu__root").addClass("slide-in")),t.find(".js-megamenu").hasClass("c-newmegamenu")&&s()}}function l(e){e.preventDefault(),e.stopPropagation(),r(this).hasClass("c-megamenu__section--image")?window.location.href=r(this).find("a.c-megamenu__imageblock--viewmore").attr("href"):(r(this).closest(".js-megamenu__root--list").addClass("slide-left"),r(this).closest(".js-megamenu").addClass("hidden-view"),r(this).find(".c-megamenu__linklist--wrapper").addClass("ace"),r(this).find(".c-megamenu__linklist").addClass("slide-in"))}function d(e){e.stopPropagation();var t=r(this);o.$navigationUl.removeAttr("role"),o.$navigationLi.removeAttr("aria-hidden tabindex"),o.$navigationUl.removeClass("slide-left"),o.$navigationUl.parent().removeClass("hidden-view"),t.closest(".js-megamenu__root").removeClass("slide-in");var a=setTimeout(function(){t.closest(".js-megamenu").removeClass("ace"),clearTimeout(a)},450)}function u(e){e.find(".js-megamenu").addClass("hoverStateOfMegaMenu")}function p(e){var t=r(this);"mouseenter"===e.type?o.isDelayMegaMenu?o.focusTimeOut=setTimeout(function(){u(t)},500):u(t):(o.focusTimeOut&&clearTimeout(o.focusTimeOut),t.find(".js-megamenu").removeClass("hoverStateOfMegaMenu"))}function h(e){e.stopPropagation();var t=r(this);t.closest(".js-megamenu__root--list").removeClass("slide-left"),t.closest(".c-megamenu__linklist").removeClass("slide-in"),t.closest(".js-megamenu").removeClass("hidden-view");var a=setTimeout(function(){t.closest(".c-megamenu__linklist--wrapper").removeClass("ace"),clearTimeout(a)},450)}}(window,window.jQuery,window.sncf)},849:function(e,t,a){var n,c,l;window,c=window.jQuery,(l=window.sncf).heroCarousel={moduleName:"heroCarousel",initializeCarousel:function(e){var t,a=e.find(".item.active")[0],n=c(a).data("type"),i=c(a).data("startPlaying"),o=!(e.hasClass("carousel-cta")&&common.isMobileMode());if(t={dots:"image"===n&&o},i=i?i.toString():"false","html5video"!==n&&"video"!==n||(i="true"),("internalvideo"===n||"youtube"===n||"vimeo"===n||"video"===n||"html5video"===n)&&"true"===i){var r=c(a).find(".c-video-player")[0],s=c(r).attr("id");l.video.playVideo(n,s)}l.common.initSlickCarousel(e,t)},handleSlideChange:function(e){e.on("beforeChange",function(e,t,a){var n,i;if(n=t.$slides.get(a),"internalvideo"===(i=c(n).data("type"))||"youtube"===i||"vimeo"===i||"html5video"===i||"video"===i){c(this).find(".carousel-indicators").show();var o=c(n).find(".c-video-player")[0],r=c(o).attr("id");l.video.pauseVideo(i,r)}}),e.on("afterChange",function(e,t,a){var n=t.$slides.get(a),i=c(n).data("type"),o=c(n).data("startPlaying");if(o=o?o.toString():"false","html5video"!==i&&"video"!==i||(o="true"),("internalvideo"===i||"youtube"===i||"vimeo"===i||"video"===i||"html5video"===i)&&"true"===o){var r=c(n).find(".c-video-player")[0],s=c(r).attr("id");l.video.playVideo(i,s)}})},stopSlide:function(e){c("#"+e).slick("slickPause")},resumeSlide:function(e){c("#"+e).slick("slickPlay")},init:function(){var a=this;if(l.log("log","Initiated hero carousel"),c(".js-carousel-component-fw").each(function(e,t){a.initializeCarousel(c(t)),a.handleSlideChange(c(t))}),c(".js-carousel-component-fw").find("video").length){var e=c(".js-carousel-component-fw").find("video").attr("id");document.getElementById(e).play()}}},void 0===(n=function(){return l.heroCarousel}.apply(t,[]))||(e.exports=n)},850:function(t,c,e){var l;!function(e,o,r){if(o){CQ=CQ||{};var s={$body:o(document.body),$html:o("html"),browserLanguage:navigator.language,currentCountryCode:o("html").data("country"),$dispatchpopupBtn:o(".js-dispatchpopup-btn"),$dispatchBtn:o(".dispatch-btn"),$jsNavDispatchpopupBtn:o(".js-nav-dispatchpopup-btn"),$jsCountryListLg:o("js-country-list-lg"),euCountryList:o("html").data("eu-country-code")||"",globalECountryList:o("html").data("geCountryList")||"",queryParamVal:window.location.search};s.euCountryList&&0<s.euCountryList.length&&(s.euCountryList=s.euCountryList.replace("[","").replace("]","").replace(/ /g,"").split(","));var a={QA:{disableDispatchPopup:!0,dedicatedWebsite:"AE"},AE:{disableDispatchPopup:!1,dedicatedWebsite:"AE"},AT:{disableDispatchPopup:!1,dedicatedWebsite:"DE"},AU:{disableDispatchPopup:!1,dedicatedWebsite:"AU"},BE:{disableDispatchPopup:!1,dedicatedWebsite:"GB, FR, DE"},BG:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},BH:{disableDispatchPopup:!1,dedicatedWebsite:"AE"},BR:{disableDispatchPopup:!0,dedicatedWebsite:"US"},CA:{disableDispatchPopup:!1,dedicatedWebsite:"CA"},CH:{disableDispatchPopup:!1,dedicatedWebsite:"CH"},CN:{disableDispatchPopup:!1,dedicatedWebsite:"CN"},CZ:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},DE:{disableDispatchPopup:!1,dedicatedWebsite:"DE"},DK:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},ES:{disableDispatchPopup:!1,dedicatedWebsite:"ES"},FI:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},FR:{disableDispatchPopup:!1,dedicatedWebsite:"FR"},GB:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},GR:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},HK:{disableDispatchPopup:!1,dedicatedWebsite:"HK"},HR:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},HU:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},IE:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},IT:{disableDispatchPopup:!1,dedicatedWebsite:"IT"},JP:{disableDispatchPopup:!1,dedicatedWebsite:"JP"},KR:{disableDispatchPopup:!1,dedicatedWebsite:"KR"},KW:{disableDispatchPopup:!1,dedicatedWebsite:"AE"},LT:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},LU:{disableDispatchPopup:!1,dedicatedWebsite:"FR, DE, GB"},MT:{disableDispatchPopup:!1,dedicatedWebsite:"IT, GB"},MX:{disableDispatchPopup:!1,dedicatedWebsite:"MX"},NL:{disableDispatchPopup:!1,dedicatedWebsite:"GB, DE"},OM:{disableDispatchPopup:!1,dedicatedWebsite:"AE"},PL:{disableDispatchPopup:!1,dedicatedWebsite:"GB, DE"},PT:{disableDispatchPopup:!1,dedicatedWebsite:"ES, GB"},RO:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},RU:{disableDispatchPopup:!1,dedicatedWebsite:"RU"},SA:{disableDispatchPopup:!1,dedicatedWebsite:"AE"},SE:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},SG:{disableDispatchPopup:!1,dedicatedWebsite:"SG"},SK:{disableDispatchPopup:!1,dedicatedWebsite:"GB"},TW:{disableDispatchPopup:!1,dedicatedWebsite:"TW"},US:{disableDispatchPopup:!1,dedicatedWebsite:"US"},WW:{disableDispatchPopup:!1,dedicatedWebsite:"WW"}};r.dispatch={moduleName:"dispatch",contryCookie:r.common.getCookie("local-code"),contryCodeCookie:r.common.getCookie("ctry"),cCode:"WW",currentSite:o("#ricsitename").val(),redirectionlink:o("#dispatchpopupurl").val(),currentPagePath:o("#configPath").val(),isDispatchPopupRequire:o("#displaycountryListPopUp").val(),isNewDispatchPopup:o("#displaycountryListPopUpNew").val(),openRedirectionModal:function(e,a,n){var t=ajaxWrapper.getXhrObj({type:"GET",url:e+"?q="+(new Date).getTime(),dataType:"html",data:{requestedWebsiteCode:encodeURIComponent(this.currentSite),geoCountry:encodeURIComponent(this.cCode),currentPagePath:this.currentPagePath,bridalTheme:o("body").hasClass("bridal-theme")},contentType:"application/x-www-form-urlencoded"});t&&t.done(function(e){var t=o(o.parseHTML(e,document,!0)).find(".container");o(t).find("#dispatch").addClass("modal fade"),a(t),n&&n()})},getDomainName:function(e){return e.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0]},fillterData:function(a){var n=!1;return s.browserLanguage=s.browserLanguage?s.browserLanguage.split("-")[0].toLowerCase():"",a.currentSiteCountry=s.currentCountryCode,a.isWorldWide=!0,a.geoCountryIsEcom=!1,a.geoCountryFlag="ww",a.showCountryFlag=!1,a.messageI18Key="dispatch.popup.messageEcom.WW",o.each(a.regions,function(e,t){o.each(t.countries,function(e,t){s.queryParamVal&&o.each(t.languages,function(e,t){t.weburl+=s.queryParamVal,t.mobileurl+=s.queryParamVal}),t.flagCode=t.countryCode.toLowerCase(),s.geoCountryCode&&t.countryCode.toLowerCase()===s.geoCountryCode.toLowerCase()&&(a.geoCountryCode=t.countryCode,a.geoCountryFlag=t.countryCode.toLowerCase(),a.showCountryFlag="true"===t.showFlag,a.geoCountryName=t.countryName,a.geoCountryNameBtn=r.dispatch.getDomainName(t.languages[0].weburl).replace("cartier","Cartier"),a.geoCountryIsEcom="true"===t.isEcom,a.geoCountryUrl=t.languages[0].weburl,a.geoCountryUrlMob=t.languages[0].mobileurl,a.isWorldWide=!1,a.messageI18Key="dispatch.popup.messageEcom."+s.geoCountryCode,s.browserLanguage&&o.each(t.languages,function(e,t){t.languageCode===s.browserLanguage&&(a.geoCountryUrl=t.weburl,a.geoCountryUrlMob=t.mobileurl)})),a.currentSiteCountry.toLowerCase()===t.countryCode.toLowerCase()&&(a.currentSiteEcom="true"===t.isEcom,a.currentSiteCountryName=r.dispatch.getDomainName(t.languages[0].weburl).replace("cartier","Cartier")),"ww"===t.countryCode.toLowerCase()&&(a.worldWideUrl=t.languages[0].weburl,a.worldWideUrlMob=t.languages[0].mobileurl,a.worldWideCountryCode=t.countryCode,n="true"===t.showFlag),r.common.isLoggedIn()&&(t.isGlobalE=s.globalECountryList.includes(t.countryCode))})}),a.isWorldWide&&(a.showCountryFlag=n,"ww"===s.currentCountryCode.toLowerCase()&&(s.showPopup=!1)),a},getDispatchJson:function(){var e=o(".js-dispatchpopup-json"),t=null;return e.length&&(t=e.text(),t=JSON.parse(t)),t=!o.isEmptyObject(t)&&t},openRedirectionNewModal:function(e,t,a){s.$dispatchMenuWrapper=o(".js-dispatch-menu-wrapper"),s.jsDispatchpopupJson=r.dispatch.getDispatchJson(),s.jsDispatchpopupJson&&hbsTemplates.ready(function(){s.fillterData=r.dispatch.fillterData(s.jsDispatchpopupJson),s.$dispatchModalContainer.html(CARF.templates.dispatchPopup(s.fillterData)),s.$dispatchMenuWrapper.html(CARF.templates.dispatchCountryMobile(s.fillterData)),r.navigation.init(!0),t(s.$dispatchModalContainer,s.jsDispatchpopupJson),a&&a()})},getCountryUrl:function(t){var e={type:"GET",url:"/bin/cartier/redirection/rules.json?q="+(new Date).getTime(),dataType:"json",data:{c_local:this.cCode,pagePath:this.currentPagePath,currentSite:this.currentSite}};ajaxWrapper.getXhrObj(e).done(function(e){t(e)})},appendCountryCodeInUrl:function(e,t,a,n){var i=a+"="+t;if(-1<e.indexOf("?")){var o=new RegExp("([?&])"+a+"=[^&]+");null!==e.match(o)?e=e.replace(o,"$1"+i):n&&(e+="&"+a+"="+t)}else n&&(e+="?"+a+"="+t);return e},setGlobalCookie:function(e){var t={countryISO:e,currencyCode:window.currencyFormatter.localeCurrency.getCurrency(e),cultureCode:null};r.common.setCookie("GlobalE_Data",JSON.stringify(t),30),o("#globale-js").length||"undefined"===o("#globale-js").attr("src")||o("#globalEJS").val()&&o("body").append('<script id="globale-js" type="text/javascript" src='+o("#globalEJS").val()+"><\/script>")},redirectAndResetCookie:function(t){s.$body.on("click",".country-link",function(e){e.preventDefault();var t=o(this).attr("href"),a=o(this).attr("data-country");r.common.resetCookie("local-code",a,30),-1<s.euCountryList.indexOf(a)&&-1<s.euCountryList.indexOf(s.currentCountryCode)&&(r.common.setCookie("ctry",a,30),r.dispatch.setGlobalCookie(a)),t=r.dispatch.appendCountryCodeInUrl(t,a,"cc",!0),(t=r.dispatch.appendCountryCodeInUrl(t,a,"country",!1))&&""!==t&&(window.location=t)}),s.$body.on("click",".js-close, .js-modal-overlay",function(){r.common.resetCookie("local-code",t.currentSite,30),r.pageService.updateEuContact(t.currentSite)}),o("#dispatch").on("hidden.bs.modal",function(){var e=o(".js-current-country").data("country");""===t.contryCodeCookie&&-1<s.euCountryList.indexOf(e)&&-1<s.euCountryList.indexOf(s.currentCountryCode)&&(r.common.setCookie("ctry",e,30),r.dispatch.setGlobalCookie(e),r.pageService.updateEuContact(e)),s.$searchCountry&&0<s.$searchCountry.val().length&&r.dispatch.resetDesktopModal()})},_postAjaxEvents:function(e){if(e.length){var t=o(".other-list");e.find(".dispatch-image, .js-disptachpopup-logo, .main-dispatch").addClass("display-none"),e.find(t).addClass(t.hasClass("hidden")?"hidden":""),o(e).find("#dispatch").length&&s.$dispatchModalContainer.append(e),e.find("#pdp_pagepath").val(o("#configPath").val());var a=setTimeout(function(){o("#dispatch").modal({show:!0,keyboard:!0}),window.dataLayer.push({event:"virtualPageview",pageURI:r.pageService.getSiteLangForPageURI("/pop-in/gps")}),r.dispatch.bindDesktopPopupEvent(),clearTimeout(a)},200);r.dispatch.redirectAndResetCookie(this)}},countrySearch:function(){var e=o(this).val().toLowerCase();s.$jsDispatchSearchField.val(e),0<(e=i(e.trim())).length?(s.$jsDispatchUlist.addClass("hidden"),s.$jsDispatchSearch.removeClass("hidden"),s.$countyyListRef.addClass("hidden"),s.$countyyListRef.each(function(){-1<o(this).data("countryname").toLowerCase().indexOf(e)&&o(this).removeClass("hidden")}),o(".js-dispatch-search-country").find(".js-dispatch-search-field").focus()):(s.$jsDispatchResult.hasClass("slide-left")&&s.$jsDispatchResult.find(".js-megamenu__section--backlink").trigger("click"),s.$jsDispatchUlist.removeClass("hidden"),s.$jsDispatchSearch.addClass("hidden"),o(".js-dispatch-ulist .js-megamenu.ace").length?o(".js-dispatch-ulist .js-megamenu.ace").find(".js-dispatch-search-field").focus():o(".js-dispatch-ulist > li .js-dispatch-search-field").focus())},countrySearchDesktop:function(){var e,t=i(o(this).val().toLowerCase().trim());0<t.length?(s.cDispatchmodalCountryList=o(".c-dispatchmodal-country-list"),s.cDispatchmodalCountryList.each(function(){e=o(this).data("countryname").toLowerCase(),o(this).hasClass("disabled-list")||(o(this).closest(".sub-panel").find(".js-dispatchmodal-panel-title").addClass("disabled-list"),o(this).addClass("disabled-list")),-1<e.indexOf(t)&&o(this).removeClass("disabled-list")})):setTimeout(function(){o(".disabled-list").removeClass("disabled-list")},20)},searchBackButton:function(){s.$jsDispatchUlist.removeClass("hidden"),s.$jsDispatchSearch.addClass("hidden"),s.$jsDispatchSearchField.val("")},backOnRegionListClick:function(){s.$body.trigger("dispatch:close");var e=setTimeout(function(){s.$jsNavigationToggle.trigger("click"),clearTimeout(e)},400)},getCountryLinkAnalyticsTitle:function(e){return e.hasClass("cta-button")?e.find(".cta-button__input").text().trim():e.data("country-name")+"-"+e.data("lang").toUpperCase()},bindMobilePopupEvent:function(){s.$mmUserAccRef=o(".js-myaccount-popin .js-nav-link-connection"),s.$dispatchUserAccRef=o(".js-navigation-dispatch .js-nav-link-connection"),s.$jsDispatchSearchBacklink=o(".js-dispatch-search-backlink"),s.$jsDispatchResult=o(".js-dispatch-search-result"),s.$countyyListRef=o(".js-dispatch-search-result > li.js-navigation__listitem"),s.$jsDispatchSearch=o(".js-dispatch-search"),s.$jsDispatchUlist=o(".js-dispatch-ulist"),s.$jsDispatchSearchField=o(".js-dispatch-search-field"),s.$jsDispatchRegion=o(".js-dispatch-region"),s.$jsNavigationToggle=o("#jsNavigationToggle"),s.$jsDisplayOtherList=o(".js-dispatchmodal-cta-gray"),s.$dispatch=o("#dispatch"),s.$dispatchUserAccRef.attr("href",s.$mmUserAccRef.attr("href")),s.$dispatchUserAccRef.data("logged",s.$mmUserAccRef.data("logged")),s.$dispatchUserAccRef.data("guest",s.$mmUserAccRef.data("guest")),s.$jsDisplayOtherList.on("click",function(){n("or choose another delivery location"),s.$dispatch.modal("hide"),setTimeout(function(){s.$body.trigger("dispatch:open")},400)}),o(".js-dispatch__overlay, .js-dispatch-dismiss, .js-dispatch__logo").on("click",function(){s.$body.trigger("dispatch:close")}),s.$jsDispatchSearchField.on("keyup",r.dispatch.countrySearch),s.$jsDispatchSearchBacklink.on("click",r.dispatch.searchBackButton),s.$jsDispatchRegion.on("click",r.dispatch.backOnRegionListClick),o(".js-megamenu__section").on("click",function(){o(this).closest(".js-megamenu").scrollTop(o(this).find(".js-megamenu__linklist--wrapper").offset().top)}),s.$jsNavDispatchpopupBtn.on("click",function(){s.$body.addClass("event-none"),o(".js-navigation-menu .c-navigation__overlay--dismiss").trigger("click"),setTimeout(function(){o("body").trigger("dispatch:open"),s.$body.removeClass("event-none")},400)}),o(".js-country-link").on("click",function(e){e.preventDefault();var t=o(this).attr("href"),a=o(this).attr("data-country");r.common.resetCookie("local-code",a,30),-1<s.euCountryList.indexOf(a)&&-1<s.euCountryList.indexOf(s.currentCountryCode)&&(r.common.setCookie("ctry",a,30),r.dispatch.setGlobalCookie(a)),n(r.dispatch.getCountryLinkAnalyticsTitle(o(this)),a),t=r.dispatch.appendCountryCodeInUrl(t,a,"cc",!0),(t=r.dispatch.appendCountryCodeInUrl(t,a,"country",!1))&&""!==t&&(window.location=t)})},bindDesktopPopupEvent:function(){if(s.$dispatchModalContainer.on("click keypress",".js-display-other-list",function(e){var t="true"===r.dispatch.isNewDispatchPopup?"or choose another delivery location":"Or choose another location";13!==e.which&&"click"!==e.type||(o(".other-list").toggleClass("hidden"),o(this).toggleClass("opened-list"),n(t))}),common.isMobileMode()){var e=o(".js-dispatch-other-list"),t=o(".js-dispatch__overlay");e.hasClass("hidden")?t.hasClass("color-transform")&&s.$body.trigger("dispatch:close"):e.addClass("hidden")}o("#dispatch").on("contextmenu",function(e){e.preventDefault()})},renderRedirectionModal:function(e){var t=r.dispatch,a=o(".js-dispatch-other-list"),n=o(".js-dispatch__overlay");if(e.length){e.find(".dispatch-image, .js-disptachpopup-logo, .main-dispatch").addClass("display-none"),e.find("#pdp_pagepath").val(o("#configPath").val());var i=setTimeout(function(){""===t.contryCookie&&s.showPopup&&(o("#dispatch").modal({show:!0,keyboard:!0}),window.dataLayer.push({event:"virtualPageview",pageURI:r.pageService.getSiteLangForPageURI("/pop-in/gps")})),r.dispatch.bindMobilePopupEvent(),r.dispatch.bindDesktopPopupEvent(),o(window).on("responsive",function(){common.isMobileMode()?a.hasClass("hidden")||a.addClass("hidden"):n.hasClass("color-transform")&&s.$body.trigger("dispatch:close")}),clearTimeout(i)},200);r.dispatch.redirectAndResetCookie(t)}},checkSameCountryForDispatch:function(e){if(0<=s.euCountryList.indexOf(e)&&0<=s.euCountryList.indexOf(s.currentCountryCode)||e===s.currentCountryCode)return"true"},geoLocationResponseHandler:function(e){var t=r.dispatch;s.$dispatchModalContainer=o(".js-dispatch-modal-wrapper"),s.geoCountryCode=s.localhostVar?"AE":e,s.showPopup=!0,("(null)"!==s.geoCountryCode&&s.geoCountryCode||"true"!==t.isNewDispatchPopup)&&"true"!==r.dispatch.checkSameCountryForDispatch(s.geoCountryCode)||(s.showPopup=!1),t.cCode=s.geoCountryCode,t.cCode="(null)"===t.cCode||null===t.cCode?"WW":t.cCode,r.common.setCookie("local-code",t.cCode,30),a[t.cCode]||(t.cCode="WW"),a[t.cCode].disableDispatchPopup||a[t.cCode].dedicatedWebsite.includes(t.currentSite)?("true"===t.isNewDispatchPopup&&(s.showPopup=!1,t.openRedirectionNewModal(t.redirectionlink,t.renderRedirectionModal)),r.common.resetCookie("local-code",t.cCode,30)):"true"===t.isNewDispatchPopup?t.openRedirectionNewModal(t.redirectionlink,t.renderRedirectionModal):t.openRedirectionModal(t.redirectionlink,t._postAjaxEvents)},resetDesktopModal:function(){s.$searchCountry.val(""),s.cDispatchmodalCountryList.removeClass("disabled-list")},dispatchModal:function(){var e=common.isMobileMode();o(".c-dispatchmodal-above").addClass("visible-xs"),e||(o(".other-list").removeClass("hidden"),o(".js-other-list__header-lg").removeClass("hidden")),o("#dispatch").modal({show:!0,keyboard:!0}),o("#dispatch").on("shown.bs.modal",function(){s.$searchCountry=o("#js-d-search-country"),s.$searchCountry.on("keyup",r.dispatch.countrySearchDesktop)})},bindCountryLinkEvents:function(){o("body").on("click",".country-link",function(e){e.preventDefault();var t=o(this).attr("data-country"),a="WW"===t?"Worldwide":t;"true"===r.dispatch.isNewDispatchPopup?n(r.dispatch.getCountryLinkAnalyticsTitle(o(this)),t):n(o(this).hasClass("cta-button")?"Continue on "+a:"I want to Continue On "+a)})},geolocationCall:function(e){if(""===e.contryCodeCookie){var t={type:s.localhostVar?"GET":"POST",url:s.localhostVar?"/source/modules/dispatch/data/geolocation.json":"/geolocation.json",dataType:"json"};ajaxWrapper.getXhrObj(t).done(function(e,t,a){r.dispatch.geoLocationResponseHandler(a.getResponseHeader("X-geoip-country-code"))}).fail(function(e){r.log("log",e),r.dispatch.geoLocationResponseHandler("(null)")})}else r.dispatch.setGlobalCookie(e.contryCodeCookie),r.dispatch.geoLocationResponseHandler(e.contryCodeCookie)},bindEvents:function(){var e=this;s.$dispatchBtn.click(function(){r.dispatch.dispatchModal()}),s.$dispatchpopupBtn.click(function(){a[s.geoCountryCode]&&a[s.geoCountryCode].disableDispatchPopup&&a[s.geoCountryCode].dedicatedWebsite.includes(s.currentCountryCode)||r.dispatch.dispatchModal()}),"localhost"===window.location.hostname&&"8080"===window.location.port&&(s.localhostVar=!0),void 0===CQ.WCM&&"true"===e.isDispatchPopupRequire&&"true"===e.isNewDispatchPopup?(r.dispatch.geolocationCall(e),r.dispatch.bindCountryLinkEvents()):void 0===CQ.WCM&&""===e.contryCookie&&"true"===e.isDispatchPopupRequire?(r.dispatch.geolocationCall(e),r.dispatch.bindCountryLinkEvents()):e.contryCookie&&"WW"===e.contryCookie&&o(".dispatch-landing").length&&(window.location=o("#dchomepath").val())},getCountryName:function(a){var e=r.dispatch.getDispatchJson(),n=null;return e&&o.each(e.regions,function(e,t){o.each(t.countries,function(e,t){a&&t.countryCode.toLowerCase()===a.toLowerCase()&&(n="true"!==t.showFlag?t.countryName:null)})}),n},updateCurrentSiteFlag:function(){var e=s.currentCountryCode.toLowerCase(),t=r.dispatch.getCountryName(s.currentCountryCode);t?(o(".js-selected-lang-container").find(".js-dispatchpopup-btn").addClass("nav-link nav-link-text"),o(".js-selected-lang-container").find(".js-dispatchpopup-btn").text(t),o(".js-shop-in-text").text(t)):(o(".js-nav-dispatchpopup-btn").find(".c-choose-country__flag-icon").addClass("icon-flag--"+e),o(".js-selected-lang-container").find(".js-dispatchpopup-btn").addClass("icon-flag--"+e))},cartUpdateForEu:function(){var e=o.jStorage&&o.jStorage.get("swsecartlc"),t=0;if(e&&(t=JSON.parse(e).noOfProducts),0<t){var a=o("input[name='currentPagePath']").val(),n={fn_countrycode:s.currentCountryCode,currentPage:a};o.ajax({method:"POST",url:"/bin/richemont-car/cart.CountrySwitch.json",data:n}).done(function(e){e.content&&r.shoppingCart.miniShoppingBag(e.content)})}},init:function(){r.log("debug","CAR: dispatch has been initialized"),this.updateCurrentSiteFlag(),-1<s.euCountryList.indexOf(s.currentCountryCode)&&this.cartUpdateForEu(),this.bindEvents()}},void 0===(l=function(){return r.dispatch}.apply(c,[]))||(t.exports=l)}function n(e,t){var a=s.$body.hasClass("full-width-view");if((t=t||"")&&""!==t&&a){var n=s.$html.data("country");window.dataLayer.push({event:"ChangeCountryPopin",previousLocation:n,nextLocation:t})}else window.dataLayer.push({event:"gaEvent",eventCategory:"GPS Pop-in",eventAction:e})}function i(e){return e.replace(/\s+/g," ")}}(window,window.jQuery,window.sncf)},851:function(t,r,e){var s;!function(a,p){"use strict";var h,n={},o={},f=0;function i(e){var t=e.target.a,a=e.target.getVideoData().title,n=p(t).data("ee-promotions")[0],i=p(t.parentElement).data("ee-promotions")[0];n.id+=a,n.name=a,i.id+=a,i.name=a}function m(e,t){var a,n=e.target.a.id,i=e.target,o=p("#"+n).closest(".js-carousel-component-fw").attr("id"),r=p(e.target.a).data("ee-event"),s=p(e.target.a).data("ee-promotions"),c=0,l=i.getDuration(),d="videoStatusHomepage";e.data===YT.PlayerState.PLAYING?sncf.heroCarousel.stopSlide(o):sncf.heroCarousel.resumeSlide(o);try{if(dataLayer){var u=p("#"+n).data("gaEvent");e.data===YT.PlayerState.ENDED?(dataLayer.push({event:u,videoInteractions:"Pause video"}),dataLayer.push({event:d,videoStatus:"Played 100%"}),h&&clearTimeout(h)):e.data===YT.PlayerState.PAUSED?(dataLayer.push({event:u,videoInteractions:"Pause video"}),h&&clearTimeout(h)):e.data===YT.PlayerState.PLAYING&&(t||(dataLayer.push({event:u,videoInteractions:"Play video"}),dataLayer.push({eeAction:r,eePromotions:s})),a=i.getCurrentTime(),l&&a&&(25<=(c=Math.floor(a/l*100))&&1===f?(dataLayer.push({event:d,videoStatus:"Played 25%"}),f++):50<=c&&2===f?(dataLayer.push({event:d,videoStatus:"Played 50%"}),f++):75<=c&&3===f?(dataLayer.push({event:d,videoStatus:"Played 75%"}),f++):c=0),0===f&&f++)}}catch(e){sncf.log("log ",e)}e.data===YT.PlayerState.PLAYING&&(h=setTimeout(function(){m(e,1)},500))}function e(){p(".vimeo").each(function(){var e=arguments[1],t=p(this).closest(".js-carousel-component-fw").attr("id"),a=p(e).attr("id"),n=p("#"+a).data("gaEvent"),i=$f(e);(o[a]=i).addEvent("ready",function(){i.addEvent("pause",function(){!function(e){sncf.heroCarousel.resumeSlide(e)}(t);try{dataLayer&&dataLayer.push({event:n,videoInteractions:"Pause video"})}catch(e){sncf.log("log",e)}}),i.addEvent("play",function(){!function(e){sncf.heroCarousel.stopSlide(e)}(t);try{dataLayer&&dataLayer.push({event:n,videoInteractions:"Play video"})}catch(e){sncf.log("log",e)}})})})}sncf.video={moduleName:"video",pauseVimeo:function(e){o[e].api("pause")},playVimeo:function(e){o[e].api("play")},playYTVideo:function(e){try{YT&&n[e].playVideo()}catch(e){sncf.log("log",e)}},stopYTVideo:function(e){try{YT&&n[e].stopVideo()}catch(e){sncf.log("log",e)}},pauseYTVideo:function(e){try{YT&&n[e].pauseVideo()}catch(e){sncf.log("log",e)}},playInternalVideo:function(e){p("#"+e)[0].play()},pauseInternalVideo:function(e){p("#"+e)[0].pause()},pauseHTML5Video:function(e){p("#"+e)[0].pause()},playHTML5Video:function(e){var t=p("#"+e)[0];t.muted||(t.muted=!0,p(t).next(".x-btn-mute").find("span").toggleClass("icon-audio icon-noaudio"));var a=t.play();void 0===a?sncf.log("log","Promisified video play() not supported"):a.then(function(){sncf.log("log","Video playback successfully initiated, returning a promise")}).catch(function(e){sncf.log("log",e)}),p(t).next(".x-btn-mute").show(0).delay(3e3).hide(0)},playVideo:function(e,t){try{switch(e){case"internalvideo":this.playInternalVideo(t);break;case"youtube":this.playYTVideo(t);break;case"vimeo":this.playVimeo(t);break;case"html5video":this.playHTML5Video(t)}}catch(e){sncf.log("log",e)}},pauseVideo:function(e,t){try{switch(e){case"internalvideo":this.pauseInternalVideo(t);break;case"youtube":this.pauseYTVideo(t);break;case"vimeo":this.pauseVimeo(t);break;case"html5video":this.pauseHTML5Video(t);break;default:sncf.log("log","Video type not defined")}}catch(e){sncf.log("log",e)}},init:function(){sncf.log("log","Initialize video"),function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),a.onYouTubeIframeAPIReady=function(){p(".yt-player").each(function(){var e=p(arguments[1]).attr("id"),t=new YT.Player(e,{height:"390",width:"640",events:{onReady:i,onStateChange:m}});n[e]=t})}}(),p("video").on("play",function(){if(sncf.analytics.pushScrolledAnalytics(),!p(this).hasClass("c-html5-video")){p(this).prev(".icon-play").hide(),p(this).attr("controls",!0);var e=p(this).data("gaEvent"),t=p(this).closest(".js-carousel-component-fw").attr("id");sncf.heroCarousel.stopSlide(t);try{dataLayer&&dataLayer.push({event:e,videoInteractions:"Play video"})}catch(e){sncf.log("log",e)}}}),p("video").on("pause",function(){if(!p(this).hasClass("c-html5-video")){p(this).prev(".icon-play").show(),p(this).removeAttr("controls");var e=p(this).data("gaEvent"),t=p(this).closest(".js-carousel-component-fw").attr("id");sncf.heroCarousel.resumeSlide(t);try{dataLayer&&dataLayer.push({event:e,videoInteractions:"Pause video"})}catch(e){sncf.log("log",e)}}}),p(".c-internal-video video").on("timeupdate",function(){var e=this.currentTime,t=this.duration,a="",n=0,i=p(this).data("play-status-count")||0,o=p(this).data("videoName");e&&t&&(25<=(n=Math.floor(e/t*100))&&1===i?(a="Played 25%",i++):50<=n&&2===i?(a="Played 50%",i++):75<=n&&3===i?(a="Played 75%",i++):100===n&&4===i&&(a="Played 100%",i++),0===i&&i++,a&&window.dataLayer.push({event:"videotracking",videoStatus:a,videoName:o}),p(this).data("play-status-count",i))}),p(".c-internal-video").on("click",function(e){e.preventDefault();var t=p(this).find("video");if(t){t=t[0];var a=p(t).get(0).paused,n=p(t).attr("id");a?sncf.video.playInternalVideo(n):sncf.video.pauseInternalVideo(n)}}),e(),p(".x-btn-mute").click(function(){var e=p(this).prev(".c-html5-video");e.prop("muted",!e.prop("muted")),p(this).find("span").toggleClass("icon-noaudio icon-audio")}),p(".c-html5-video").hover(function(){p(this).next(".x-btn-mute").show(0).delay(3e3).hide(0)}),p(".c-html5-video").on("click",function(){sncf.common.isDesktopMode()?p(this).off("click"):(p(this).off("mouseenter mouseleave"),p(this).next(".x-btn-mute").show(0).delay(3e3).hide(0))})}},void 0===(s=function(){return sncf.video}.apply(r,[]))||(t.exports=s)}(window,jQuery)},852:function(e,t,a){var n,i,o,r;function s(){this!==document?(o(this).closest(".message-dialog").remove(),o(document.body).trigger("messageOverlayClose")):o(".message-dialog").remove()}function c(e){e.stopPropagation()}function l(e){e.stopPropagation();var t=e.data;t&&t.actionLabelClick&&(t.close=s.bind(this),t.actionLabelClick.call(this,t,e))}function d(e,t){this.bindEvents(function(e,t){return o("<div>").addClass(t.customOverlayClass?"message-dialog hidden "+t.customOverlayClass:"message-dialog hidden ").attr("role","dialog").html(e).insertBefore(o("body script[data-main]").first())}(e,t).removeClass("hidden"),t)}i=window,o=window.jQuery,(r=window.sncf).messages={moduleName:"messages",makeError:function(e){"boolean"!=typeof(e="string"==typeof e?{message:e}:e).autoClose&&(e.autoClose=!0),e.isError=!0,this.createDialog(e)},createDialog:function(e){e="string"==typeof e?{message:e}:e;var t=this;hbsTemplates.ready(function(){d.call(t,CARF.templates.messageDialog(e),e)})},bindEvents:function(e,t){if(e.on("click",s),e.find(".message-overlay").on("click",s),e.find(".message-close").on("click",s).trigger("focus"),o(document).on("escapeKey",s),e.find(".message-body").on("click",c),t.actionLabel&&(e.find(".message-action").on("click",t,l),e.find(".message-action").trigger("focus")),t.autoClose)var a=setTimeout(function(){e.addClass("hidden"),s.apply(e),clearTimeout(a)},3e3);return this},init:function(){"messages"in i||(i.messages=this)}},void 0===(n=function(){return r.messages}.apply(t,[]))||(e.exports=n)},853:function(e,t,a){var n,i,o,r;function s(e){e.preventDefault(),r.$mainBanner.addClass("hidden"),o.common.setCookie("shippingBanner","true"),o.header._stickyHeader(),i(document.body).trigger("promobanner.close")}function c(){o.common.getCookie("shippingBanner")||r.$mainBanner.removeClass("hidden")}window,i=window.jQuery,o=window.sncf,r={},o.commercial_banner={moduleName:"commercial_banner",updateCache:function(){r={$mainBanner:i(".c-comm-banner"),$bannerButton:i(".js-comm-banner__btn")}},bindEvents:function(){r.$bannerButton.off("click").on("click",s),c()},init:function(){o.log("debug","CAR: Commercial banner initialized"),this.updateCache(),this.bindEvents()}},void 0===(n=function(){return o.commercial_banner}.apply(t,[]))||(e.exports=n)},854:function(t,a,e){var n;!function(e,c,l){if(c){var s={};l.changePassword={moduleName:"changePassword",updateCache:function(){s={$body:c(document.body),$newPassowrdField:c("#registration_j_password"),$confirmPasswordField:c("#confirm_registration_j_password"),$form:c("#createNewPassword"),$headingWrapper:c(".js-password-heading-wrapper"),$invalidTokenErrorMsg:c('[class^="error_message_"]'),$resetPasswordWrapper:c(".c-password__wrapper"),$regexInfoElement:c(".js-password-regexinfo"),$regexErrorElement:c("#errormessage-registration_j_password"),$confirmWrapperElement:c(".confirm_registration_j_password"),$confirmInfoElement:c(".js-password-confirminfo"),$confirmErrorElement:c("#errormessage-confirm_registration_j_password"),$passInput:c('[name*="registration_j_password"], [name*="a_password"]'),$passInputMyCartier:c(".sub-section-account-wrapper").find(c('[name*="registration_j_password"]')),$rulesObject:[]}},bindEvents:function(){var e=this;e.addOuterWrapper(),s.$newPassowrdField.on("focus",function(){s.$newPassowrdField.valid()?e.toggleErrorBlock(!0):e.toggleErrorBlock(!1)}),s.$newPassowrdField.on("blur",function(){e.toggleErrorBlock(!0)}),c(window).on("resize",function(){e.setPopoverPosition(s.$newPassowrdField)}),e.passShowButton(),e.addErrorBlock(),e.addValidateBlock(s.$newPassowrdField),e.addValidateBlock(s.$confirmPasswordField),e.addDynamicRegexValidation(),e.toggleSubmitButton(!0),e.passwordConfirmValidator(),e.addPasswordValidation(),e.setPopoverPosition(s.$newPassowrdField),e.togglePasswordField(s.$confirmWrapperElement,!0)},passShowButton:function(){var e=s.$passInput.length,t=s.$passInputMyCartier.length;for(var a=0;a<e;a++)t?c(s.$passInputMyCartier[a]).after('<button type="button" class="c-password__mask js-display-password off"><span class="eye-icon js-my-cartier icon icon-mycartier-mask" ></span></button >'):c(s.$passInput[a]).after('<button type="button" class="c-password__mask js-display-password off"><span class="eye-icon icon icon-masked" ></span></button >');this.bindShowHide()},bindShowHide:function(){c(".js-display-password").off("click").on("click",function(){var e=c(this),t=e.closest("div").find("input"),a=e.closest("div").find(".eye-icon"),n=e.closest("div").find(".js-my-cartier").length;e.removeClass("on off"),a.removeClass("icon-masked icon-unmasked icon-mycartier-mask icon-mycartier-unmask"),"password"===t.attr("type")?(t.attr("type","text"),e.addClass("on"),n?a.addClass("icon-mycartier-unmask"):a.addClass("icon-unmasked")):(t.attr("type","password"),e.addClass("off"),n?a.addClass("icon-mycartier-mask"):a.addClass("icon-masked"))})},addErrorBlock:function(){var e="";s.rulesObject=s.$body.data("rulesCustomDataObj")||[],s.rulesObject.length&&(e=CARF.templates.errorBlock(s.rulesObject),s.$regexErrorElement.append(c(e)),this.toggleErrorBlock(!0))},addOuterWrapper:function(){if(0<s.$form.length){for(var e=s.$passInput,t=0;t<e.length;t++){var a=c(e[t]).closest(".input-wrapper"),n=c(a).html();c(a).html(c('<div class="c-password__outerwrapper"></div>').append(n))}this.updateCache()}},addValidateBlock:function(e){var t,a=e;t=CARF.templates.errorValidateBlock(),a.parent().find("button").after(t)},addDynamicRegexValidation:function(){var r=this;c.validator.addMethod("complexPassword",function(n,e){var i=n.length||0,o=0,t=c(e).parent().find(".js-password-validate");return i?(s.rulesObject.forEach(function(e,t){var a=c(".js-pwd-"+t);"length"===e.type?i<e.params?(r.updateErrorBlock(a,"invalid"),o++):r.updateErrorBlock(a,"valid"):new RegExp(e.params).test(n)?r.updateErrorBlock(a,"valid"):(r.updateErrorBlock(a,"invalid"),o++)}),0===o?(r.updateErrorBlock(t,"valid",CQ.I18n.getMessage("reset.password.valid")),r.togglePasswordField(s.$confirmWrapperElement,!1),!0):(r.updateErrorBlock(t,"invalid",CQ.I18n.getMessage("reset.password.invalid")),r.togglePasswordField(s.$confirmWrapperElement,!0),!1)):(r.updateErrorBlock(t,"remove",""),"CN"===c("html").data("country")||!1)},"")},addPasswordValidation:function(){var e=this;s.$form.validate(),0<s.$newPassowrdField.length&&(c(s.$newPassowrdField).rules("add",{complexPassword:!0}),s.$newPassowrdField.on("keyup",function(){e.onKeyUpValidation(this)})),0<s.$confirmPasswordField.length&&(c(s.$confirmPasswordField).rules("add",{matchPassword:!0,messages:{matchPassword:CQ.I18n.getMessage("reset.password.donot.match")}}),s.$confirmPasswordField.on("keyup",function(){e.onKeyUpValidation(this)}))},checkEmptyPassword:function(){0===s.$newPassowrdField.val().length&&(c(".js-error-block").find("i").removeClass("icon-valid").addClass("icon-invalid"),c(".js-error-block").find(".error-content").removeClass("valid").addClass("invalid"),this.togglePasswordField(s.$confirmWrapperElement,!0))},passwordConfirmValidator:function(){var r=this;c.validator.addMethod("matchPassword",function(e,t){var a,n=s.$newPassowrdField.val(),i=s.$confirmPasswordField.val(),o=c(t).parent().find(".js-password-validate");return 0===i.length?(r.updateErrorBlock(s.$confirmPasswordField.parent(),"remove",""),!0):0<n.length&&n===i?(r.updateErrorBlock(o,"valid",CQ.I18n.getMessage("reset.password.match")),a='<span for="'+c(t).attr("name")+'" class="error valid">'+CQ.I18n.getMessage("reset.password.match")+"</span>",s.$confirmErrorElement.html(a),!0):(r.updateErrorBlock(o,"invalid",CQ.I18n.getMessage("reset.password.donot.match")),a='<span for="'+c(t).attr("name")+'" class="error">'+CQ.I18n.getMessage("reset.password.donot.match")+"</span>",s.$confirmErrorElement.html(a),!1)},"")},onKeyUpValidation:function(){var e,t,a=this;a.checkEmptyPassword(),e=s.$newPassowrdField.valid(),t=s.$confirmPasswordField.valid(),e?a.toggleErrorBlock(!0):a.toggleErrorBlock(!1),e&&t?a.toggleSubmitButton(!1):a.toggleSubmitButton(!0)},toggleErrorBlock:function(e){e?c(".js-error-block").removeClass("fadeIn").addClass("fadeOut"):c(".js-error-block").removeClass("fadeOut").addClass("fadeIn")},updateErrorBlock:function(e,t,a){var n=e.find("i"),i=e.find(".error-content"),o=a;"valid"===t?(n.removeClass("icon-invalid").addClass("icon-valid"),i.removeClass("invalid").addClass("valid")):"invalid"===t?(n.removeClass("icon-valid").addClass("icon-invalid"),i.removeClass("valid").addClass("invalid")):"remove"===t&&(n.removeClass("icon-valid icon-invalid"),i.removeClass("valid invalid"),i.text(o)),o&&i.text(o)},togglePasswordField:function(e,t){t?(e.addClass("disabled"),e.find("input").attr("disabled","disabled"),e.find("button").attr("disabled","disabled")):(e.removeClass("disabled"),e.find("input").attr("disabled",!1),e.find("button").attr("disabled",!1))},toggleSubmitButton:function(e){e?s.$form.find("[type=submit]").attr("disabled","disabled"):s.$form.find("[type=submit]").attr("disabled",!1)},searchErrorBlock:function(e,t){for(;c(e).parent();)if(e=c(e).parent(),0<c(e).find(t).length)return e;return null},setPopoverPosition:function(e){if(0<c(".js-error-block").length){var t=c(".js-error-block"),a=this.searchErrorBlock(e,t),n=c(a).find(t),i=c(e).offset().left,o=c(e).outerWidth(),r=n.outerWidth(),s=c(window).width()-(i+o+r);l.common.isMobile()||s<36?c(t).removeClass("position-right").addClass("position-bottom"):c(t).removeClass("position-bottom").addClass("position-right")}},init:function(){var e=this;if(l.log("debug","CAR: changePassword module initialized"),e.updateCache(),0<s.$invalidTokenErrorMsg.length&&0<s.$invalidTokenErrorMsg.text().length&&0<s.$form.length){var t=CQ.I18n.getMessage("reset.password.invalid.token"),a="<div><a href="+c('[name="forgot_password_link"]').val()+'><span class="x-btn-red">'+CQ.I18n.getMessage("reset.password.button.text")+"</span></a></div>";s.$form.remove(),s.$headingWrapper.remove(),s.$invalidTokenErrorMsg.html(t),s.$invalidTokenErrorMsg.append(a),s.$invalidTokenErrorMsg.show()}else hbsTemplates.ready(function(){e.bindEvents()});s.$resetPasswordWrapper.addClass("animated fadeIn").queue(function(){c(this).addClass("fadeIn-fallback")})}},void 0===(n=function(){return l.changePassword}.apply(a,[]))||(t.exports=n)}}(window,window.jQuery,window.sncf)},855:function(e,t,a){var n,i,o,r;i=window.jQuery,o=window.sncf,r={},o.rteReadMore={moduleName:"rteReadMore",initCache:function(){r.$rteContainer=i(".js-rte-container")},bindEvents:function(){r.$rteContainer.each(function(){var a=i(this);i(this).attr("data-text",i(this).find(".js-rte-wrapper").html()),a.find(".js-rte-toggle").removeClass("hidden"),a.dotdotdot({keep:".js-rte-toggle",tolerance:1});var n=a.data("dotdotdot");a.on("click",".js-rte-toggle",function(e){var t=i(this);e.preventDefault(),a.hasClass("ddd-truncated")?(a.removeClass("ddd-truncated"),t.closest(".js-rte-container").find(".js-rte-wrapper").html(t.closest(".js-rte-container").data("text")),a.addClass("activate"),t.find("span").text(CQ.I18n.getMessage("read.less"))):(a.removeClass("activate"),n.truncate(),n.watch())})})},init:function(){this.initCache(),common.isMobileMode()&&this.bindEvents()}},void 0===(n=function(){return o.rteReadMore}.apply(t,[]))||(e.exports=n)},856:function(e,t,a){var n,i,o,r,s,c,l;function d(){return"mobile"===o.common.getMedia().media?"mobile":"desktop"}function u(e){return common.isMobileMode()?e+"px":e/parseInt(l.$html.css("font-size"),10)+"rem"}function p(){var e=parseFloat(l.$searchContainer.css("top"));l.$algoliaManhattan.length&&(e=l.$searchContainer.offset().top-i(document).scrollTop());var t=e+l.$searchContainer.outerHeight(!0);l.$searchContainerParent.hasClass("sticky-search")||(t-=window.scrollY||window.pageYOffset||document.body.scrollTop),!l.$algoliaManhattan.length&&l.$promoBanner.length&&l.$promoBanner.height()&&!l.$searchContainerParent.hasClass("sticky-search")&&(t+=l.$promoBanner.height()),l.isContainerHeight="calc(100% - "+u(t)+")",l.$algoliaManhattan.length&&(t-=8),common.isTabletOrDesktopMode()&&l.$isContainerNode.css({top:u(t),left:0,height:l.isContainerHeight}),l.$algoliaManhattan.length&&common.isMobileMode()&&(l.$isContainerNode.addClass("search-result-active"),l.$isContainerNode.css({top:t,left:0,height:l.isContainerHeight}))}function h(e){if(l.$totalCountsContainer.addClass("hidden"),l.$searchLoader.remove(),l.$resultsContainer.removeClass("no-search-result-container"),0<e.nbHits){l.$isContainerNode.length&&l.$body.addClass("modal-open").trigger("render.ais").trigger("toggle.ais",[!0]),l.$facetContainer.removeClass("hidden"),l.$searchSentinel.removeClass("hidden"),l.$queryContainer.removeClass("hidden").text(CQ.I18n.getMessage("algolia.search.resultsfor",[e.query])),l.$totalCountsContainer.text(function(e){var t=!(l.arabic&&e<3),a=CQ.I18n.getMessage(1===e?"product.model.one":"product.model");return l.arabic&&2===e&&(a=CQ.I18n.getMessage("product.model.two")),l.arabic&&3<=e&&e<=10&&(a=CQ.I18n.getMessage("product.model.multiple")),t?e+" "+a:a}(e.nbHits)).removeClass("hidden"),l.$scrollContainer.scrollTop(0);var t={hits:e.hits,pageLoad:o.pageLoad};0===e.page?l.$resultsContainer.html(CARF.templates.aisProductTemplate(t)):e.page>l.previousPage&&l.$resultsContainer.append(CARF.templates.aisProductTemplate(t)),l.previousPage=e.page,o.pictureFill(),l.$isContainerNode.length?l.$isContainerNode.find("[data-original]").lazyload({threshold:200}):l.$containerNode.find("[data-original]").lazyload(),l.infiniteHitContext.didRender=!0,l.$body.trigger("ais.search")}else if(l.$isContainerNode.length){var a=i(".algolia-manhattan").length;1!==e._rawResults.length||a?a&&l.$body.addClass("modal-open").trigger("render.ais").trigger("toggle.ais",[!0]):l.$body.removeClass("modal-open").trigger("toggle.ais",[!1]),l.$resultsContainer.addClass("no-search-result-container"),l.$resultsContainer.html(CARF.templates.noSearchResult({instantSearch:!0})),l.infiniteHitContext.didRender=!1,l.$queryCountAndFacets.addClass("hidden")}else l.$queryCountAndFacets.addClass("hidden"),l.infiniteHitContext.didRender=!1,l.$resultsContainer.addClass("no-search-result-container"),l.$resultsContainer.html(CARF.templates.noSearchResult()),l.$body.trigger("ais.nosearch")}function f(){o.analytics.pushScrolledAnalytics(),l.infiniteHitContext.isLastPage&&l.$searchSentinel.addClass("small"),i(".js-algolia-search__sentinel:in-viewport").length&&!l.infiniteHitContext.isLastPage&&l.infiniteHitContext.didRender&&(l.infiniteHitContext.didRender=!1,l.$searchSentinel.removeClass("small"),l.$searchLoader.appendTo(l.$searchSentinel),l.showMore())}function m(e,t){var a=e.results;l.$scrollContainer=l.$isContainerNode.length?l.$isContainerNode:i(document),l.showMore=e.showMore,l.infiniteHitContext.isLastPage=e.isLastPage,a&&!t&&h(function(a){var e=l.$html.data("country"),t=l.$html.data("eu-country-code"),n="Price";return t&&0<t.length&&-1<(t=t.replace("[","").replace("]","").replace(/ /g,"").split(",")).indexOf(e)&&(n="Price-"+e),a.hits.forEach(function(e,t){e.position=t+a.hitsPerPage*a.page+1,e.queryID=a.queryID,e.Price=e[n]?e[n]:e.Price}),a}(a)),l.$scrollContainer.off("scroll",f).on("scroll",f)}function g(){l.clearRefine()}function v(e){l.clearRefine=e.refine,l.$body.off("aissearch.collapse",g).on("aissearch.collapse",g)}function y(){c.registerHelper("highlightResult",function(e,t){if(e&&e._highlightResult&&e._highlightResult[t]){if(/#love#/i.test(e[t])){var a=e._highlightResult[t].value.replace(/#(.*)(love)(.*)#/gi,function(){var e=function(e){return Array.prototype.slice.call(e)}(arguments).slice(1,4);return e[1]='<span class="lovefont">'+e[1]+"</span>",e.join("")});return new c.SafeString(a)}return new c.SafeString(e._highlightResult[t].value)}return e[t]})}i=window.jQuery,o=window.sncf,r=window.instantsearch,s=window.algoliasearch,c=window.Handlebars,l={},o.pageLoad=!1,o.algoliaSearch={moduleName:"algoliaSearch",initCache:function(){l.$searchInput=i("#jsSearchInput"),l.$containerNode=i(".js-algolia-search"),l.$isContainerNode=i(".js-algolia-search.algolia-sticky"),l.$queryContainer=i(".js-algolia-search__keyword"),l.$resultsContainer=l.$containerNode.find(".js-algolia-search__results"),l.$totalCountsContainer=l.$containerNode.find(".js-algolia-search__totalcount"),l.$searchContainerParent=i(".js-search-container"),l.$searchContainer=i(".js-algolia-search-box"),l.$facetContainer=i(".js-algolia-search__facets"),l.$queryCountAndFacets=l.$containerNode.find(".js-algolia-search__keyword,.js-algolia-search__totalcount,.js-algolia-search__facets"),l.$promoBanner=i(".js-comm-banner"),l.$html=i("html"),l.$body=i(document.body),l.$win=i(window),l.appId=i("#algoliaAppId").val(),l.apiKey=i("#algoliaApiKey").val(),l.defaultIndex=null,l.country=l.$html.data("country"),l.lang=l.$html.data("lang"),l.arabic="ar"===l.lang&&"ae"===l.country,l.enableInstantSearch="true"===i("#enableInstantSearch").val(),o.enableInstantSearch=l.enableInstantSearch,l.onlineQueryRule=i("#algoliaOnlineQueryRule").val(),l.minRequiredCharacters=i("#algoliaMinSearchChars").val(),l.queryParam=i.deparam(window.location.search),l.enableInstantSearch?l.allowSearch=!1:l.allowSearch=!l.queryParam.kwCAR,l.currentMedia=d(),l.infiniteHitContext={didRender:!1,isLastPage:!1},l.previousPage=0,l.$searchSentinel=i(".js-algolia-search__sentinel"),l.$algoliaIndicesRef=i("#algoliaIndices");try{l.indexData=JSON.parse(l.$algoliaIndicesRef.text()),l.indexData.length&&(l.defaultIndex=l.indexData[0].value,l.indexData[0].selected=!0,l.$algoliaIndicesRef.text(JSON.stringify(l.indexData,null,2)))}catch(e){o.log("log",e)}l.timeout=null,l.$algoliaManhattan=i(".js-algolia-manhattan")},registerCustomHelpers:function(){return y.apply(this,arguments)},renderFacets:function(){l.search.on("render",function(){var e=l.search.helper.lastResults;l.$body.trigger("render.facets",[e,l.search])})},initializeSearch:function(e){if(l.client=s(l.appId,l.apiKey),l.search=r({indexName:l.defaultIndex,searchFunction:function(e){l.$body.trigger("search.defer",[e,l.search])},searchClient:{search:function(e){var t=e.map(function(e){var t=e.params;return i.extend({},e,{params:i.extend({},t,{facets:Array.isArray(t.facets)&&t.facets.includes("*")?["*"]:t.facets})})}),a=e[0]&&e[0].params.facetFilters;return a&&l.onlineQueryRule&&a.filter(function(e){return e.includes("Online:true")}).length?l.client.search(t.map(function(e){return i.extend({},e,{params:i.extend({},e.params,{query:e.params.query+" "+l.onlineQueryRule})})})):l.client.search(t)}},searchParameters:{clickAnalytics:!0}}),l.search.addWidget(r.widgets.searchBox({container:"#jsSearchInput",wrapInput:!1,reset:!1,magnifier:!1,queryHook:function(e,t){!function(e,t,a){l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout(function(){l.allowSearch=!0,t(e)},a)}(e,t,300)}})),l.search.addWidget(r.widgets.analytics({pushFunction:function(e,t,a){o.enableInstantSearch||o.pageLoad?window.dataLayer.push({event:"virtualPageview",pageURI:o.pageService.getSiteLangForPageURI("/search-results/instant-search?kwCAR="+t.query+"&category=websiteSearchBox"),visitorStatus:window.visitorStatus,msn_cgGroup:"Search pages",rcms_cgGroup:"Search",pageType:"tree_level_1",kwCAR:t.query,searchResult:a.nbHits}):(window.dataLayer.push({kwCAR:t.query,searchResult:a.nbHits}),o.pageLoad=!0)},delay:3e3,triggerOnUIInteraction:!0})),l.enableInstantSearch){var t=r.connectors.connectClearAll(v);l.search.addWidget(t({clearsQuery:!0}))}e.configureFacets(),e.configureCurrentRefinements(),e.configureInfiniteHits(),e.renderFacets(),l.search.start()},configureFacets:function(){l.search.addWidget(r.widgets.configure({facets:["*"]}))},configureCurrentRefinements:function(){l.search.addWidget(r.widgets.currentRefinedValues({container:".js-algolia-search__current-refinement",clearAll:"after",templates:{item:function(e){return CARF.templates.aisRefinementItem(e)},clearAll:function(){return'<div class="c-algolia-search__current-refinement--clearallinner js-clear-ais-filter">'+CQ.I18n.getMessage("algolia.search.clearall")+"</div>"}},transformData:function(e){if(!i.isEmptyObject(e)&&(e.isSwitchable=["true","false"].includes((""+e.computedLabel).toLowerCase()),"Price"===e.attributeName)){var t=o.common.formatCurrency(e.numericValue);e.computedLabel=e.computedLabel.replace(e.name,t)}return e},cssClasses:{root:"c-algolia-search__current-refinement--root",body:"c-algolia-search__current-refinement--body clearfix",list:"c-algolia-search__current-refinement--list clearfix",item:"c-algolia-search__current-refinement--itemwrapper float-left",link:"c-algolia-search__current-refinement--link",clearAll:"c-algolia-search__current-refinement--clearall"}}))},configureInfiniteHits:function(){var e=r.connectors.connectInfiniteHits(m);l.search.addWidget(e())},bindInstantSearchEvents:function(){var a=this;l.$win.on("media.changed orientationchange",function(e){var t=d();"media"===e.type&&l.currentMedia!==t?(l.currentMedia=t,a.resetInstantSearch()):"orientationchange"===e.type&&a.resetInstantSearch()}),l.$body.on("render.ais",function(){a.prepareInstantSearch()}),l.$body.on("toggle.ais",function(){a.toggleInstantSearch(arguments[1])}),l.$body.on("aissearch.collapse",function(){a.resetInstantSearch()}),l.$body.on("promobanner.close",function(){a.prepareInstantSearch()}),l.$isContainerNode.on("scroll",function(){l.$win.scroll()})},resetInstantSearch:function(){return function(){l.$searchInput.val("").trigger("input"),l.$searchSentinel.addClass("hidden"),l.$body.removeClass("modal-open"),l.$isContainerNode.removeClass("active"),l.$queryCountAndFacets.empty().addClass("hidden"),l.$resultsContainer.empty(),common.isTabletOrDesktopMode()&&l.$isContainerNode.css("height",0),l.$algoliaManhattan.length&&common.isMobileMode()&&(l.$isContainerNode.removeClass("search-result-active"),l.$isContainerNode.css({height:0}))}.apply(this,arguments)},prepareInstantSearch:function(){return p.apply(this,arguments)},toggleInstantSearch:function(){return function(e){e&&l.$isContainerNode.length?l.$isContainerNode.hasClass("active")||(l.$isContainerNode.addClass("active"),common.isTabletOrDesktopMode()&&l.$isContainerNode.css("height",l.isContainerHeight).removeClass("overflow-hidden")):l.$isContainerNode.length&&(l.$isContainerNode.removeClass("active"),common.isTabletOrDesktopMode()&&l.$isContainerNode.css({height:0}).addClass("overflow-hidden"))}.apply(this,arguments)},bindEvents:function(){l.$body.on("click contextmenu",".js-algolia-click-analytics",function(){o.analyticsTracking.pushClickAnalytics(i(this))}),l.$body.on("click",".js-algolia-search__atb",function(){o.analyticsTracking.pushConversionAnalytics({objectID:i(this).data("algoliaObjectid"),queryID:i(this).data("algoliaQueryid")},!0)})},init:function(){if(this.initCache(),l.defaultIndex){var e=this;l.$isContainerNode.length&&this.bindInstantSearchEvents(),this.bindEvents(),e.registerCustomHelpers(),hbsTemplates.ready(function(){l.$body.on("search.proceed",function(){var e=arguments[1],t=e.state.query.trim(),a=0<l.minRequiredCharacters?l.minRequiredCharacters:3;l.$resultsContainer.removeClass("no-search-result-container"),t&&t.length>=a?(l.$isContainerNode.length&&l.$isContainerNode.removeClass("hidden"),e.search()):l.allowSearch?(l.infiniteHitContext.isLastPage=!0,l.$queryCountAndFacets.addClass("hidden"),o.common.isTabletOrDesktopMode()&&l.enableInstantSearch&&i.isEmptyObject(e.state.disjunctiveFacetsRefinements)&&l.$body.removeClass("modal-open").trigger("toggle.ais",[!1]),l.enableInstantSearch?l.$resultsContainer.empty():(l.$resultsContainer.addClass("no-search-result-container"),l.$resultsContainer.html(CARF.templates.noSearchResult({instantSearch:l.enableInstantSearch})),l.$body.trigger("ais.nosearch"))):l.enableInstantSearch||l.$searchLoader.target(l.$resultsContainer)}),l.$searchLoader=new common.Loader(CARF.templates.loader()),e.initializeSearch(e)})}}},void 0===(n=function(){return o.algoliaSearch}.apply(t,[]))||(e.exports=n)},857:function(e,t,a){var n,o,r,i,s,c;function l(e){return Array.prototype.slice.call(e)}function d(e){var t=["true","false"];return 2===e.length?t.includes((""+e[0].value).toLowerCase())&&t.includes((""+e[1].value).toLowerCase()):e.length<2&&t.includes((""+e[0].value).toLowerCase())}function u(){i.registerHelper("ifSwitchable",function(e,t){return d(e)?t.fn(this):t.inverse(this)}),i.registerHelper("ifNotSwitchable",function(e,t){return d(e)?t.inverse(this):t.fn(this)}),i.registerHelper("checkForOnline",function(e){var t=function(t){var a=0;return t&&Object.keys(t).forEach(function(e){d(t[e])&&(a+=1)}),a}(e);return!c.isEcom&&1===t&&e.Online?"hide-switchable":""})}function p(t){return o.each(t,function(a,e){var n=[];o.each(e,function(e,t){"string"==typeof e&&["true","false"].includes(e.toLowerCase())&&(e="true"===e),n.push({value:e,count:t,selected:!1,uniqueKey:a.replace(/\s/g,"")+n.length})}),t[a]=n}),t}function h(){var e=l(arguments).slice(1);if(2===e.length){var t=e[0],a=t._rawResults;if(c.search=e[1],0<t.nbHits&&a.length){var n=function(e){var t={facets:{},facets_stats:{}};o.extend(!0,t.facets,e[0].facets),o.extend(!0,t.facets_stats,e[0].facets_stats);var a=p(t.facets);return e.slice(1).map(function(e){var t={facets:{},facets_stats:{}};return o.extend(!0,t.facets,e.facets),o.extend(!0,t.facets_stats,e.facets_stats),p(t.facets)}).forEach(function(e){o.each(e,function(e,t){t.forEach(function(t){a[e]&&a[e].filter(function(e){return e.value===t.value}).length&&(t.selected=!0)}),a[e]=t})}),t.facets=a,t}(a);n.isManhattanView=o(".full-width-view").length,c.$facetContainer.removeClass("hidden").html(CARF.templates.aisFacets(n)),c.$body.trigger("rendered.facets",[n,t]),n.isManhattanView&&(function(){if(c.pageLoad){var e=r.common.storage.get("algoliaMinPrice"),t=r.common.storage.get("algoliaMaxPrice"),a=o(".mn-ais-price-filter-li"),n=o(".js-algolia-minimum-val"),i=o(".js-algolia-max-val");e&&t&&a.length&&!a.hasClass("hidden")&&(n.val(e),n.closest(".mn-custom-select--wrapper").find(".js-mn-custom-select--value--txt").text(n.find("option[value="+e+"]").data("innerText")),i.val(t),i.closest(".mn-custom-select--wrapper").find(".js-mn-custom-select--value--txt").text(i.find("option[value="+t+"]").data("innerText")))}else r.common.storage.remove("algoliaMinPrice"),r.common.storage.remove("algoliaMaxPrice"),c.pageLoad=!0}(),o(".js-algolia-filters-select").addClass("active"))}else c.$facetContainer.addClass("hidden")}}function f(e){o(".js-navigation-menu, .c-header__logo-wrapper, .js-algolia-search-box, .search-container--overlay")[e?"addClass":"removeClass"]("hidden"),o(".js-algolia-search")[e?"addClass":"removeClass"]("fixed-to-top")}function m(e){c.$filterBackdrop=o(".js-algolia-search__filters--backdrop"),c.$filterBackdrop[e?"removeClass":"addClass"]("in"),c.isManhattanView&&r.common.isMobileMode()&&(f(!e),o(".js-navigation-menu, .c-header__logo-wrapper")[e?"removeClass":"addClass"]("hidden"))}function g(){m(!1)}function v(){m(!0),o(this).hasClass("close-filter-btn")&&o(".js-clear-ais-filter").click()}function y(e){e.stopPropagation()}function b(){r.common.isTabletOrDesktopMode()&&!c.isManhattanView&&o(".js-algolia-filters-select.active").removeClass("active").attr("aria-expanded","false")}function C(){var e=o(this),t=o(".js-algolia-filters-select").not(this);e.toggleClass("active"),c.isManhattanView&&e.next().slideToggle(100),"false"===e.attr("aria-expanded")?(e.attr("aria-expanded","true"),window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:"filterClick",filter:o(this).data("facetName")})):e.attr("aria-expanded","false"),r.common.isTabletOrDesktopMode()&&!c.isManhattanView&&(t.removeClass("active"),t.attr("aria-expanded","false"))}function w(){var e=o(this);e.toggleClass("active"),"false"===e.attr("aria-expanded")?(e.attr("aria-expanded","true"),window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:"filterClick",filter:"Sort by"})):e.attr("aria-expanded","false"),c.isManhattanView&&r.common.isMobileMode()&&(f(!0),o(".mnhtn-filter-modal, .mnhtn-filter-modal-overlay").toggleClass("active"))}function k(){if(!c.isManhattanView){var e=o(".js-price-filter"),t=l(arguments).slice(1)[0];if(t.facets.Price){var a=t.facets_stats.Price;e.slider({min:a.min,max:a.max,value:[a.min,a.max],step:1,range:!0,tooltip:"always",tooltip_split:!0,formatter:function(e){return r.common.formatCurrency(e)}}),o(".js-price-filter").length&&e.on("slideStop",function(){c.$body.trigger("slider.input",[e.val().split(",")])})}}}function j(n){var e=arguments[2],t=n.widgetParams.attributeName.replace(/\s/g,"");"toggle"===e?c.$body.off("change","input#check"+n.widgetParams.attributeName).on("change","input#check"+n.widgetParams.attributeName,function(e,t){r.common.isTabletOrDesktopMode()&&o("#menu"+t).removeClass("active"),e.refine(o.extend(!0,{},e.value))}.bind(this,n,t)):"refinementList"===e?c.$body.off("click",".js-filters-applybtn--"+t).off("click",".js-ais-checkbox-"+t).on("click",".js-filters-applybtn--"+t,function(e,t){var a=o.map(o(".js-refinement-item--"+t).find("input:checked"),function(e){return o(e).val()}).join("@@").trim()+"@@";r.common.isTabletOrDesktopMode()&&o("#menu"+t).removeClass("active"),e.refine(a)}.bind(this,n,t)).on("click",".js-ais-checkbox-"+t,function(e,t,a){var n=o(a.target);r.common.isMobileMode()&&e.refine(n.val()),c.isManhattanView&&r.common.isTabletOrDesktopMode()&&e.refine(n.val()),n.is(":checked")&&window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:"filterClick",filter:n.data("currentFacet"),subFilter:n.val()})}.bind(this,n,t)):"range"===e&&c.$body.off("click",".js-filters-applybtn--Price").off("slider.input").on("click",".js-filters-applybtn--Price",function(e,t){r.common.isTabletOrDesktopMode()&&o("#menu"+t).removeClass("active"),e.refine(o(".js-price-filter").val().split(","))}.bind(this,n,t)).on("slider.input",function(e){var t=arguments[2];r.common.isMobileMode()&&e.refine(t)}.bind(this,n)).on("change",".js-algolia-price-range",function(){var e,t=o(".js-algolia-minimum-val").val()?o(".js-algolia-minimum-val").val():o(".js-algolia-minimum-val").find("option")[0].value,a=o(".js-algolia-max-val").val();t!==a&&(Number(t)>Number(a)&&(e=t,t=a,a=e),r.common.storage.set("algoliaMinPrice",t),r.common.storage.set("algoliaMaxPrice",a),n.refine([t,a]))})}function I(e,t){t&&c.$body.on("sort.apply",function(){var t=o(".js-algolia-search__sortby--label").find('input[type="radio"]:checked').val();c.algoliaIndices.forEach(function(e){e.selected=e.value===t}),c.$algoliaIndicesRef.text(JSON.stringify(c.algoliaIndices,null,2)),e.refine(t)})}function $(){if(c.algoliaIndices&&!c.sortByFacetAdded){var e=s.connectors.connectSortBySelector(I);c.search.addWidget(e({indices:c.algoliaIndices.map(function(e){return{name:e.value,label:CQ.I18n.getMessage("algolia.search."+e.key)}})})),c.sortByFacetAdded=!0}}function S(){var t=l(arguments).slice(1)[0].facets;c.widgets=c.widgets||{};var e=Object.keys(c.widgets),a=Object.keys(t),n=e.minus(a);if(n.length){var i=n.map(function(e){return c.widgets[e]});c.search.removeWidgets(i),n.forEach(function(e){delete c.widgets[e]})}var o=Object.keys(c.widgets),r=a.minus(o).map(function(e){return function(e,t,a){var n=null;n=t?s.connectors.connectRange(function(){var e=l(arguments);return e.push("range"),j.apply(this,e)},function(){}):a?s.connectors.connectToggle(function(){var e=l(arguments);return e.push("toggle"),j.apply(this,e)},function(){}):s.connectors.connectRefinementList(function(){var e=l(arguments);return e.push("refinementList"),j.apply(this,e)},function(){});var i={attributeName:e};return a&&(i.label=CQ.I18n.getMessage("algolia.search."+e)),c.widgets[e]=n(i),c.widgets[e]}(e,"Price"===e,d(t[e]))});r.length&&c.search.addWidgets(r)}function x(){var e=arguments[1];if(e){var n=e.state.disjunctiveFacetsRefinements,t=e.state.numericRefinements,a=o(".js-algolia-search__filters--backdrop");o.isEmptyObject(n)&&o.isEmptyObject(t)&&(r.common.isTabletOrDesktopMode()||r.common.isMobileMode()&&!a.hasClass("in"))?c.$body.trigger("search.proceed",[e]):r.common.isTabletOrDesktopMode()?(Object.keys(n).forEach(function(e){var t=[],a=n[e].filter(function(e){return"string"==typeof e&&e.includes("@@")});a.length&&((t=a[0].split("@@").filter(function(e){return!!e})).length?n[e]=t:delete n[e])}),c.$body.trigger("search.proceed",[e])):r.common.isMobileMode()&&(c.currentHelper=e,a.hasClass("in")?c.$body.off("search.apply").on("search.apply",function(){a.off("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd").on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){c.$body.trigger("search.proceed",[c.currentHelper])}),a.removeClass("in")}):c.$body.trigger("search.proceed",[c.currentHelper]),f(!1))}}o=window.jQuery,r=window.sncf,i=window.Handlebars,s=window.instantsearch,c={},r.algoliaFaceting={moduleName:"algoliaFaceting",initCache:function(){c.$doc=o(document),c.$html=o("html"),c.$body=o(document.body),c.$facetContainer=o(".js-algolia-search__facets"),c.$algoliaIndicesRef=o("#algoliaIndices"),c.isEcom="true"===o("#eComCheck").val(),c.algoliaIndices=null;try{c.algoliaIndices=JSON.parse(c.$algoliaIndicesRef.text())}catch(e){r.log("log",e)}c.start=0,c.isManhattanView=o(".full-width-view").length,c.pageLoad=!1},bindEvents:function(){c.$body.on("render.facets",h).on("rendered.facets",k).on("rendered.facets",$).on("rendered.facets",S).on("search.defer",x).on("click",b).on("click",".js-algolia-search__filterbtn",g).on("click",".js-algolia-search__filters",y).on("click",".js-algolia-search__filters--backdrop, .js-algolia-search__filters--close",v).on("click",".js-algolia-filters-select",C).on("click",".js-algolia-search__sortbybtn",w).on("click",".js-sortby-applybtn",function(){f(!1),o(".mnhtn-filter-modal, .mnhtn-filter-modal-overlay").toggleClass("active"),c.$body.trigger("sort.apply"),o(".js-algolia-search__sortbybtn").removeClass("active")}).on("click",".js-filters-applybtn",function(){c.$body.trigger("search.apply")}).on("click",".js-close-algolia-filter, .mnhtn-filter-modal-overlay",function(){f(!1),o(".mnhtn-filter-modal, .mnhtn-filter-modal-overlay").toggleClass("active")}),c.isManhattanView&&c.$body.on("click",".js-algolia-search__sortby--label",function(){r.common.isTabletOrDesktopMode()&&c.$body.trigger("sort.apply")})},registerCustomHelpers:function(){return u.apply(this,arguments)},init:function(){this.initCache(),this.bindEvents(),this.registerCustomHelpers()}},void 0===(n=function(){return r.algoliaFaceting}.apply(t,[]))||(e.exports=n)},858:function(p,h,e){var f;!function(a,t){"use strict";var n={},e=0,i="",o=80;function r(){return"mobile"===t.common.getMedia().media?"mobile":"desktop"}function s(){e<n.searchTxt.length&&(i+=n.searchTxt.charAt(e++),n.$searchCompBtn.find(".typewriter-text").text(i),setTimeout(s,o))}function c(){n.$searchBox.removeClass("animate-searchbox").removeClass("banner-removed"),n.$navLogoWrapper.removeClass("search-on"),n.$queryContainer.removeClass("searchbox-active"),common.isMobileMode()&&n.$isContainerNode.length&&n.$isContainerNode.removeClass("active").addClass("hidden")}function l(){var e=t.common.getCookie("shippingBanner");(n.$headerBanner.hasClass("hidden")||e)&&n.$searchBox.addClass("banner-removed"),n.$searchBox.addClass("animate-searchbox"),n.$navLogoWrapper.addClass("search-on"),n.$queryContainer.addClass("searchbox-active"),n.$searchInput.trigger("focus"),common.isMobileMode()&&n.$isContainerNode.length&&n.$isContainerNode.removeClass("hidden").addClass("active")}function d(e){return!!n.$searchInput.val().trim()||(e.preventDefault(),!1)}function u(){var e=a(this).val().trim();e?n.$searchCompBtn.find(".typewriter-text").text(e):n.$searchCompBtn.find(".typewriter-text").text(n.searchTxt)}t.searchBox={moduleName:"searchBox",updateCache:function(){n={$searchBox:a(".js-algolia-search-box"),$searchInput:a("#jsSearchInput"),$closeSearchBtn:a(".js-search-closebtn"),$searchCompBtn:a(".js-search-btn"),$headerBanner:a(".js-comm-banner"),$searchContainer:a(".js-search-container"),$queryContainer:a(".js-algolia-search__keyword"),$banner:a(".js-comm-banner"),$pageHeader:a(".js-header"),$navMegaMenu:a(".js-navigation"),$navLogoWrapper:a(".js-nav-logo-wrapper"),$body:a(document.body),queryParam:a.deparam(window.location.search),currentMedia:r(),$isContainerNode:a(".js-algolia-search.algolia-sticky"),$searchBoxForm:a(".js-search-box-form"),searchTxt:CQ.I18n.getMessage("algolia.search.placeholdertext")}},bindSearchEvents:function(){n.$closeSearchBtn.on("click",function(){n.$body.trigger("aissearch.collapse")}),n.$body.on("click",".js-search-btn, .c-searchIconBtn",function(){n.$body.trigger("aissearch.expand")})},bindEvent:function(){n.$body.on("aissearch.expand",l),n.$body.on("aissearch.collapse",c),n.$searchBoxForm.on("submit",d),n.$searchInput.on("input",u),function(){var e,t;e=0<n.$banner.length?n.$banner.outerHeight(!0):0,t=n.$pageHeader.outerHeight(!0),a(window).scroll(function(){a(this).scrollTop()>e+t?n.$searchContainer.addClass("sticky-search"):n.$searchContainer.removeClass("sticky-search")})}(),a(window).on("media.changed orientationchange",function(e){var t=r();"media"===e.type&&n.currentMedia!==t?(n.currentMedia=t,n.$body.trigger("aissearch.collapse")):"orientationchange"===e.type&&n.$body.trigger("aissearch.collapse")})},init:function(){this.updateCache(),this.bindSearchEvents(),this.bindEvent(),i="",e=0,n.queryParam.kwCAR?n.$searchInput.val(n.queryParam.kwCAR.toString().replace(/\+/g," ")).trigger("input"):s()}},void 0===(f=function(){return t.searchBox}.apply(h,[]))||(p.exports=f)}(window.jQuery,window.sncf)},859:function(e,t,a){var n,i,o;i=window.jQuery,(o=window.sncf).algoliaProductVignettes={moduleName:"algoliaProductVignettes",bindEvents:function(){i(document.body).on("click",".js-algolia-search__strap",function(e){return!!i(this).closest(".invisible").length||(e.preventDefault(),window.location=i(this).data("href"),!1)})},init:function(){this.bindEvents()}},void 0===(n=function(){return o.algoliaProductVignettes}.apply(t,[]))||(e.exports=n)},860:function(e,t,a){var n,l,d,u;function i(s,c){var e=s.data("t2sCategoryConstraint"),t=s.data("t2sGenderConstraint"),a=s.data("t2sRefid");if(window._t2sparams.cID=u.cId,window._t2sparams.pID=u.pId,window._t2sparams.tID=u.tId,window._t2sparams.lang=u.lang,e||t){var n,i={actions:[]};e&&(n={type:"category",ids:[e]},i.actions.push(n)),t&&(n={type:"characteristic",id:"gender",childIds:[t]},i.actions.push(n)),window._t2sparams.constraint=JSON.stringify(i)}a&&(window._t2sparams.iID=a);var o={crossDomain:!0,url:s.data("url")+"?tmst="+(new Date).getTime(),type:"POST",data:window._t2sparams};ajaxWrapper.getXhrObj(o).done(function(r){hbsTemplates.ready(function(){var e,t=r.spaces&&Object.keys(r.spaces)[0],a=new common.Loader(CARF.templates.loader()),n=s.data("spaceId"),i=s.data("viewSelectionLink"),o=s.data("viewSelectionText");n&&(t=u.cId+"-"+u.pId+"-"+n),t&&r.spaces[t]&&((e=JSON.parse(r.spaces[t])).productDisplay=s.data("productDisplay"),e.listName=s.data("listName"),e.eComEnabled="true"===u.isEcomEnable,e.searchPage="false"===u.$enableInstantSearch.val(),e.carouselTitle=s.data("t2sCarouselTitle"),e.isBgRequired=!0===s.data("t2sCarouselBg"),i&&o&&(e.viewSelection={link:i,text:o}),e.reduceHeight="pdp"!==l('[name="pageName"]').val()&&!e.products.filter(function(e){return"0"!==e.hasVignettes}).length,a.target(s),c(s,e),d.wishlist.getWishListItems())})}).fail(function(e){d.log("log",e)}).always(function(){s.find(".loadernode").remove()})}function o(e,t){t&&e.html(CARF.templates.t2sCarousel(t));var a={infinite:!1,speed:1e3,dots:!1,slidesToShow:4,slidesToScroll:4,accessibility:!1,prevArrow:'<button tabindex="0"class="c-t2s-carousel__nav c-t2s-carousel__nav-left js-t2s-carousel-nav-left"><span class="sr-only">'+CQ.I18n.getMessage("text.prev.arrow.accessibility")+'</span> <i class="icon icon-arrow-left"></i></button>',nextArrow:'<button tabindex="0"class="c-t2s-carousel__nav c-t2s-carousel__nav-right js-t2s-carousel-nav-right"><span class="sr-only">'+CQ.I18n.getMessage("text.next.arrow.accessibility")+'</span> <i class="icon icon-arrow-right"></i></button>',responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,infinite:1<t.products.length,centerMode:!0,centerPadding:"48px"}}]};d.pictureFill(),e.find("[data-original]").lazyload(),e.find(".js-t2s-carousel").hasClass("slick-initialized")&&e.find(".js-t2s-carousel").slick("unslick"),e.find(".js-t2s-carousel").slick(a),e.data("rendered",!0),e.on("beforeChange",function(){d.common.addEllipses()});var n=e.closest(".js-pdp__section--content");"pdp"===l('[name="pageName"]').val()&&0<l(".container--pdp").length&&common.isMobileMode()&&n.height(n.scrollHeight()+n.outerHeight()),d.analytics.pushScrolledAnalytics(),d.common.addEllipses()}function r(e,t){t.products=t.products.slice(0,2),e.html(CARF.templates.editorialProductsView(t)),d.pictureFill(),e.find("[data-original]").lazyload(),e.data("rendered",!0)}function s(t){u.cId&&u.pId&&u.tId&&u.$t2sCarouselContainer.each(function(){var e=l(this);e.removeClass("hidden"),e.data("rendered")&&!t||i(e,o)})}l=window.jQuery,d=window.sncf,u={},d.t2sCarousel={moduleName:"t2sCarousel",initCache:function(){return function(){var e=l("#t2SellData");u.$t2sCarouselContainer=l(".js-t2s-carousel-container"),u.$t2sProductsContainer=l(".js-t2s-products-container"),u.cId=e?e.data("cid"):"",u.pId=e?e.data("pid").toString():"",u.tId=d.common.getCookie("t2s-p"),u.$body=l(document.body),u.isEcomEnable=l("#eComCheck").val(),u.$enableInstantSearch=l("#enableInstantSearch"),u.$html=l("html"),u.lang=u.$html.attr("lang")?u.$html.attr("lang").replace("-","_"):""}.apply(this,arguments)},bindEvents:function(){return function(){u.$body.on("ais.nosearch",s),u.$body.on("ais.search",function(){u.$t2sCarouselContainer.addClass("hidden")}),u.$body.on("t2sScriptLoaded",function(){u.tId=d.common.getCookie("t2s-p"),"false"!==u.$enableInstantSearch.val()&&s(),u.$t2sProductsContainer.each(function(){i(l(this),r)})}),u.$t2sCarouselContainer.on("click",".js-addToShopping",function(e){e.stopPropagation(),shoppingCart.addToCartListener.apply(this,arguments)}),d.common.loadT2SData()}.apply(this,arguments)},initT2sCarousel:function(){return s.apply(this,arguments)},initCarousel:function(){return o.apply(this,arguments)},init:function(){this.initCache(),this.bindEvents()}},void 0===(n=function(){return d.t2sCarousel}.apply(t,[]))||(e.exports=n)},861:function(e,t,a){var n,r,i,s;function c(e,t){var n,a=s.lang;return s.euCode&&(a=function(){var e;switch(s.lang){case"en":e="en-GB";break;case"fr":e="fr-FR";break;case"de":e="de-DE";break;default:e="en-GB"}return e}()),void 0!==(n=void 0!==t.variantPriceFormat?t.variantPriceFormat[a]:void 0)&&r.map(e,function(a){a.price=0,r.map(t[s.countryCode],function(e,t){a.id===t&&e&&n&&(a.formatted_price=common.getFormattedPrice(e,n),a.price=e.price)})}),e}function o(e,t){var a=e.data("productlistingJson"),n=JSON.parse(r(a).text()),i=!r.isEmptyObject(n)&&n;if(s.euCode&&i&&(i=function(e){var t,a,n=e.currency?JSON.parse(e.currency):null,i=e.currencyCode?JSON.parse(e.currencyCode):null;if(n&&i){t=Object.keys(n),a=Object.keys(i);for(var o=0;o<t.length;o++)if(t[o].split("_")[1].toUpperCase()===s.countryCode){e.currency=n[t[o]];break}for(var r=0;r<a.length;r++)if(a[r].toUpperCase()===s.countryCode){e.currencyCode=i[a[r]];break}}return e}(i)),s.productAvailabilityData[0].flag&&i&&(r.isEmptyObject(s.productPriceData[0])||(i=c(i,s.productPriceData[0])),r.isEmptyObject(s.productAvailabilityData[0])||(i=function(e,a){return r.map(e,function(t){t.online=!1,t.sellable="notsellable",t.available="outofstock",t.url=t.product_url,r.map(a[s.countryCodeURL],function(e){e===t.id&&(t.sellable="sellable",0<t.price&&(t.online=!0,t.available="instock"))})}),e}(i,s.productAvailabilityData[0]))),i){var o=function(e){return e.map(function(e){return!0===e.online})}(i);i.hasOnlineSellables=o&&"true"===s.isEcomEnable}t(e,i=function(e,t){var a={},n=e.data("viewSelectionLink"),i=e.data("viewSelectionText");return t&&(a.products=t.map(function(e){return"No"===e.hasVariants&&(e.hasVariants=e.hasVariants.toUpperCase()),e}),a.productDisplay=e.data("productDisplay"),a.listName=e.data("listName"),a.eComEnabled="true"===s.isEcomEnable,a.carouselTitle=e.data("t2sCarouselTitle"),a.isBgRequired=!0===e.data("t2sCarouselBg"),n&&i&&(a.viewSelection={link:n,text:i}),a.reduceHeight="pdp"!==r('[name="pageName"]').val()&&!a.products.filter(function(e){return"0"!==e.hasVignettes}).length),a}(e,i))}function l(e,t){t&&e.html(CARF.templates.t2sCarousel(t));var a={infinite:!1,speed:1e3,dots:!1,slidesToShow:4,slidesToScroll:4,accessibility:!1,prevArrow:'<button tabindex="0"class="c-t2s-carousel__nav c-t2s-carousel__nav-left js-t2s-carousel-nav-left"><span class="sr-only">'+CQ.I18n.getMessage("text.prev.arrow.accessibility")+'</span> <i class="icon icon-arrow-left"></i></button>',nextArrow:'<button tabindex="0"class="c-t2s-carousel__nav c-t2s-carousel__nav-right js-t2s-carousel-nav-right"><span class="sr-only">'+CQ.I18n.getMessage("text.next.arrow.accessibility")+'</span> <i class="icon icon-arrow-right"></i></button>',responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,infinite:1<t.products.length,centerMode:!0,centerPadding:"48px"}}]};i.pictureFill(),e.find("[data-original]").lazyload(),e.find(".js-t2s-carousel").hasClass("slick-initialized")&&e.find(".js-t2s-carousel").slick("unslick"),e.find(".js-t2s-carousel").slick(a),e.data("rendered",!0),e.on("beforeChange",function(){i.common.addEllipses()}),i.analytics.pushScrolledAnalytics(),i.common.addEllipses()}function d(){s.$body.on("productDataLoaded",function(){s.$aemCarouselContainer.each(function(){var e=r(this);e.removeClass("hidden"),e.data("rendered")||o(e,l)})}),s.$aemCarouselContainer.on("click",".js-addToShopping",function(e){e.stopPropagation(),shoppingCart.addToCartListener.apply(this,arguments)}),s.isAEMCarouselAvailable&&function(){var e,t;e={type:"GET",url:i.env.dev?"/source/modules/plp_pl/data/Price."+s.countryCode+".json":s.priceURL,cache:!0},t={type:"GET",url:i.env.dev?"/source/modules/plp_pl/data/Availability."+s.countryCode+".json":s.availabilityURL,cache:!0},r.when(ajaxWrapper.getXhrObj(e),ajaxWrapper.getXhrObj(t)).done(function(e,t){hbsTemplates.ready(function(){s.productPriceData=e,s.productAvailabilityData=t,r(document.body).trigger("productDataLoaded")})}).fail(function(e){i.log("log",e)})}()}window,r=window.jQuery,i=window.sncf,s={},i.aemCarousel={moduleName:"aemCarousel",initCache:function(){return function(){s.$html=r("html"),s.$body=r(document.body),s.lang=s.$html.attr("lang"),s.countryCode=i.pageService.getCountryCode().toUpperCase(),s.euCode=i.pageService.getEuCode(),s.countryCodeURL=s.euCode?s.euCode.toUpperCase():s.countryCode,s.isEcomEnable=r("#eComCheck").val(),s.enableDynamicPricing=r("#enableAvailabilityPDPService").val(),s.domain=i.pageService.getSecureDomain(),s.availabilityURL=s.domain+"/content/cache/appData/cache/service/availability."+s.countryCodeURL+".html",s.priceURL=s.domain+"/content/cache/appData/cache/service/price."+s.countryCodeURL+".html",s.productPriceData={},s.productAvailabilityData={},s.$aemCarouselContainer=r(".js-aem-carousel-container"),s.isAEMCarouselAvailable=0<s.$aemCarouselContainer.length}.apply(this,arguments)},bindEvents:function(){return d.apply(this,arguments)},init:function(){i.log("debug","CAR: AEM Carousel initialized"),this.initCache(),this.bindEvents()}},void 0===(n=function(){return i.aemCarousel}.apply(t,[]))||(e.exports=n)},862:function(e,t,a){var n,i,o;i=window.jQuery,(o=window.sncf).noSearchResult={moduleName:"noSearchResult",init:function(){hbsTemplates.ready(function(){i(".js-no-result").html(CARF.templates.noSearchResult())})}},void 0===(n=function(){return o.noSearchResult}.apply(t,[]))||(e.exports=n)},863:function(e,t,a){var n,i,o;i=window.jQuery,(o=window.sncf).algoliaProductAddToBag={moduleName:"algoliaProductAddToBag",bindEvents:function(){i(document.body).on("click",".js-algolia-search__atb",o.shoppingCart.addToCartListener)},init:function(){this.bindEvents()}},void 0===(n=function(){return o.algoliaProductAddToBag}.apply(t,[]))||(e.exports=n)},864:function(e,t,a){var n,i,o,r;function s(){i(this).hasClass("added")?o.wishlist.removeFromWishList(i(this),!0):o.wishlist.addToWishList(i(this),!0)}i=window.jQuery,o=window.sncf,r={},o.searchWishList={moduleName:"searchWishList",initCache:function(){r.$body=i(document.body)},bindWishListEvents:function(){r.$body.on("click",".js-search-wishlist",s)},init:function(){this.initCache(),this.bindWishListEvents()}},void 0===(n=function(){return o.searchWishList}.apply(t,[]))||(e.exports=n)},865:function(e,t,a){var n,i,o,r;function s(){r.$body.on("ais.nosearch",function(){r.$mediaContainer.removeClass("hidden"),r.$mediaContainer.data("rendered")||function(){var e={type:"GET",url:"/bin/cartier/noSearchResults",cache:!0,data:{currentPage:i("input[name=currentPagePath]").val()}};ajaxWrapper.getXhrObj(e).done(function(e){o.log("data loaded:",e),hbsTemplates.ready(function(){i(".js-media-component").html(CARF.templates.mediaComponent(e)),o.pictureFill(),r.$mediaContainer.find("[data-original]").lazyload(),o.analytics.pushScrolledAnalytics()})}).fail(function(e){o.log("log",e)})}()}),r.$body.on("ais.search",function(){r.$mediaContainer.addClass("hidden")})}i=window.jQuery,o=window.sncf,r={},o.mediaComponent={moduleName:"mediaComponent",initCache:function(){r.$body=i(document.body),r.$mediaContainer=i(".js-media-component"),r.$ctaBtn=i(".c-media-component__btn")},bindEvents:function(){return s.apply(this,arguments)},init:function(){this.initCache(),this.bindEvents()}},void 0===(n=function(){return o.mediaComponent}.apply(t,[]))||(e.exports=n)},866:function(r,s,e){var c;!function(e,a,n){if(a){var i={};n.backToTop={moduleName:"backToTop",isBackToTopEnabled:function(){var e=a(".backtotop");e&&"true"===e.attr("data-isbacktotop")&&this.initDOMChanges()},initDOMChanges:function(){var e=this;!function(){var e=a("header").attr("id");e&&"fl-header"===e||a("header").attr("id","fl-header")}(),hbsTemplates.ready(function(){t(),e.updateCache(),e.bindEvents()})},updateCache:function(){i={$body:a("body"),$scrollElemWrapper:a(".js-back-to-top-wrapper"),$scrollElem:a(".js-back-to-top")}},bindEvents:function(){i.$scrollElem.on("click",o),a(e).scroll(function(){var e=a("#spr-live-chat-app"),t=!!(e&&0<e.length&&0<e[0].childElementCount);a(this).scrollTop()>window.innerHeight?i.$scrollElemWrapper.addClass(t?"active show-above-chat":"active").removeClass("inactive"):i.$scrollElemWrapper.addClass("inactive").removeClass("active")})},init:function(){n.log("CAR: Back to Top initialized"),this.isBackToTopEnabled()}},void 0===(c=function(){return n.backToTop}.apply(s,[]))||(r.exports=c)}function t(){var e=CARF.templates.backToTop();a("footer").append(e)}function o(e){e.preventDefault();var t=i.$scrollElem.data("scroll");n.common.scrollTo(a(t),400)}}(window,window.jQuery,window.sncf)},867:function(r,s,e){var c;!function(e,a,n){if(a){var i={};n.modal={moduleName:"modal",getUrlParams:function(){var e={};return n.env.dev?e.url="/source/modules/modal/data/modal.json":e.url="/bin/cartier/configData."+i.config+"."+i.country+"."+i.lang+".json",e.type="GET",e.cache=!0,e},updateCache:function(){i={$body:a("body"),$modal:a(".js-dynamic-modal"),target:a(".js-dynamic-modal").data("target"),config:a(".js-dynamic-modal").data("configdata"),country:a("html").data("country"),lang:a("html").data("lang")}},bindEvents:function(){i.$modal.on("click",o)},init:function(){n.log("CAR: modal initialized"),this.updateCache(),this.bindEvents()}},void 0===(c=function(){return n.modal}.apply(s,[]))||(r.exports=c)}function t(){var t="";ajaxWrapper.getXhrObj(n.modal.getUrlParams()).done(function(e){hbsTemplates.ready(function(){e.id=i.target.split("#")[1],t=CARF.templates.modal(e),i.$modal.data("local-content",!0),i.$body.append(t),a(i.target).modal()})}).fail(function(e){n.log("log",e)})}function o(){a(this).data("local-content")||t()}}(window,window.jQuery,window.sncf)},868:function(g,v,e){var y;!function(e,r,s,c){if(r){var l={};s.mmRightSideCollection={moduleName:"mmRightSideCollection",updateCache:function(){return function(){l={$body:r(document.body),$window:r(e),$collectionLinkJSON:r(".js-collection-link-json"),$megaMenuRoot:r(".js-megamenu__root"),$authorMode:r(".author-mode"),$newNavigation:r(".c-newnavigation"),$megaMenuJsonElem:r(".js-megamenu-json"),$megamenuLi:r(".js-navigation__listitem"),slickConfig:{infinite:!1,speed:1e3,dots:!1}}}.apply(this,arguments)},bindEvents:function(){return function(){l.$body.on("navHtmlLoaded",d),l.$megaMenuRoot.on("click",".js-viewmore-coll",a),l.$window.on("responsive",n),l.$body.on("megamenu:closed",t),l.$body.on("afterChange",function(){var e=arguments[2];arguments[1].$slider.data("slideIndex",e)})}.apply(this,arguments)},displayNavigationLayouts:function(){return m.apply(this,arguments)},init:function(){s.log("debug","CAR: mmRightSideCollection module initialized"),this.updateCache(),this.bindEvents(),this.displayNavigationLayouts()}},void 0===(y=function(){return s.mmRightSideCollection}.apply(v,[]))||(g.exports=y)}function i(e){var t={prevArrow:'<button tabindex="0"class="c-prev-arrow"><span class="sr-only">'+CQ.I18n.getMessage("text.prev.arrow.accessibility")+'</span> <i class="icon icon-arrowsmall-left"></i></button>',nextArrow:'<button tabindex="0"class="c-next-arrow"><span class="sr-only">'+CQ.I18n.getMessage("text.next.arrow.accessibility")+'</span> <i class="icon icon-arrowsmall-right"></i></button>'},a=r.extend({},l.slickConfig,t),n=e.find(".slider-container");if(1<n.find(".js--mm-right-collection-all--slider").length)try{n.hasClass("slick-initialized")||n.slick(a)}catch(e){s.log("error","Error in Nav Carousel | _initCarousel: "+e)}s.pictureFill(),r("[data-original]").lazyload({threshold:9999})}function t(){r(".mm-collection-visible").addClass("js-gt12-collectionlist hidden-xs").removeClass("mm-collection-visible"),r(".hidden-viewmore-collection").removeClass("hidden hidden-viewmore-collection")}function a(){var e=r(this),t=e.closest(".js--mm-right-collection-all--slick-slider").find(".js-gt12-collectionlist"),a=t.slice(0,12),n=e.closest(".js-navigation__ulist");n.length&&n.animate({scrollTop:e.offset().top-n.offset().top+n.scrollTop()-r(".c-navigation__sectionlogo").height()}),t.length<=a.length&&e.addClass("hidden hidden-viewmore-collection"),a.removeClass("js-gt12-collectionlist hidden-xs").addClass("mm-collection-visible")}function n(){s.common.isMobileMode()?(l.$megaMenuRoot.off("click",".js-viewmore-coll",a).on("click",".js-viewmore-coll",a),r(".js--mm-right-collection-all--slick-slider").each(function(){var e=r(this).find(".slider-container");e.hasClass("slick-initialized")&&e.slick("unslick")})):(t(),l.$authorMode.length&&i(l.$authorMode.find(".js--mm-right-collection-all--slick-slider")))}function o(){r(this).closest(".js-newmegamenu").addClass("hide-menu")}function d(){var e=arguments[1];s.common.isTabletOrDesktopMode()?i(e):(s.pictureFill(),r("[data-original]").lazyload({threshold:9999})),r(".js-mm-cross").on("click",o)}function u(t,a){var n,i={},o=a.closest("li").find("> a").data("gaFirstLevel");try{hbsTemplates.ready(function(){n=t,i={packshotLarge:{maxwidthdesktop:"160.210",maxwidthlandscapeipad:"160.210",maxwidthportraitipad:"160.210",maxwidthlandscapemobile:"160.210",maxwidthportraitmobile:"160.210",maxwidthmobile:"160.210"},packshotSmall:{maxwidthdesktop:80,maxwidthlandscapeipad:80,maxwidthportraitipad:80,maxwidthlandscapemobile:80,maxwidthportraitmobile:80,maxwidthmobile:80},giftFinder:{maxwidthdesktop:"702.474",maxwidthlandscapeipad:"702.474",maxwidthportraitipad:"702.474",maxwidthlandscapemobile:"767.518",maxwidthportraitmobile:"375.630",maxwidthmobile:"375.630"}},n=r.extend({},{collectionJSON:n,renditionObj:i,firstLevel:o}),a.append(CARF.templates.megamenuRightSide(n)),a.parent(".c-newmegamenu__root__rightcontent").removeClass("hidden"),a.find(".js-right-collection-all-title").dotdotdot({truncate:"letter"});var e=a.find(".js--mm-right-collection-all--slick-slider");a.data("render",!0),l.$body.trigger("navHtmlLoaded",[e]),l.mmservice=r(".js-mm-services"),!c.flexbox&&l.mmservice.length&&l.mmservice.removeClass("flexbox").addClass("noflexbox")})}catch(e){s.log("error","Error in _fillNavHtml: "+e)}}function p(e){if(e){var t=r(this),a=t.find("> a").data("gaFirstLevel"),n=l.$authorMode.length?t.next(".js-left-side-section-placeholder"):t.find(".js-newmegamenu__fillter__container");n.data("render")&&!l.$authorMode.length||hbsTemplates.ready(function(){t.find(".loadernode").addClass("hidden"),n.html(CARF.templates.megamenuLeftSide({leftColumnJSON:e,firstLevelMenu:a})),n.parent(".c-newmegamenu__root__fillter").removeClass("hidden"),n.data("render",!0)})}}function h(){var e,t,a=r(this).find(".js-collection-link-json").data("productLine"),n=l.megaMenuJSON[a];r.isEmptyObject(n)||(e=n.leftSection,t=n.rightSection,p.call(this,e),function(e){if(e){var t=r(this).find(".js-newmegamenu--container");t.data("render")||u(e,t)}}.call(this,t))}function f(e){r(this).find(".js-newmegamenu").removeClass("hide-menu"),h.call(this),function(e){var t=r(this),a=t.find(".js--mm-right-collection-all--slick-slider"),n=a.find(".slider-container");t.find(".js-newmegamenu--container").data("render")&&s.common.isTabletOrDesktopMode()&&(n.hasClass("slick-initialized")?r(e.target).is("button")||n.slick("slickGoTo",0,!0):i(a))}.call(this,e)}function m(){l.$megaMenuJsonElem.length&&(l.megaMenuJSON=l.$megaMenuJsonElem.text(),l.megaMenuJSON=JSON.parse(l.megaMenuJSON)),l.$newNavigation.on("mouseenter focusin",".js-navigation__listitem",function(e){f.call(this,e)}).on("focusout mouseleave",".js-navigation__listitem",function(e){r(e.target).is(".slick-arrow")&&e.stopPropagation()}),l.$authorMode.length&&l.$authorMode.each(function(){(function(){r(this).find(".js-left-side-section").each(function(){var e,t=r(this).text(),a=[];try{e=JSON.parse(t),a.push(e),p.call(this,a)}catch(e){s.log("error","Error in _fillLeftColumnInAuthor: "+e)}})}).call(this),function(){r(this).find(".js-collection-link-json").find("code").each(function(){var e=r(this),t=e.text();u(JSON.parse(t),e.next(".megamenufragment-placeholder"))})}.call(this)}),l.$megamenuLi.each(function(){return!+r(this).find(".js-newmegamenu").css("opacity")||(h.call(this),!1)})}}(window,window.jQuery,window.sncf,window.Modernizr)},869:function(e,t,a){var n,i,o,r;function s(){var e=i(this);e.hasClass("active")?e.removeClass("active"):(r.$faqSubItem.removeClass("active"),e.data("btn")===r.$faqSection.data("btn")&&r.$faqSection.removeClass("active"),e.toggleClass("active"),"false"===e.attr("aria-expanded")?e.attr("aria-expanded","true"):e.attr("aria-expanded","false"))}window,i=window.jQuery,o=window.sncf,r={},o.faq={moduleName:"faq",updateCache:function(){r={$faqContainer:i(".js-faq-container"),$faqSection:i(".js-faq-section"),$faqSubItem:i(".js-faq-subitem"),$body:i(document.body),lang:i("html").data("lang")}},bindEvents:function(){r.$body.on("click",".js-faq-section",s),r.$body.on("click",".js-faq-subitem",s)},init:function(){this.updateCache(),this.bindEvents()}},void 0===(n=function(){return o.faq}.apply(t,[]))||(e.exports=n)},870:function(e,t,a){var n,i,o,r,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=window.jQuery,o=window.sncf,r={},s=window.RICHEMONT||{},o.unsubscibeNewsLetter={moduleName:"unsubscibeNewsLetter",initCache:function(){return function(){r.$form=i("#js-unsubscribe-newsletter-form"),r.messageObj=i(".c-newsletter-unsubscribe-msg")}.apply(this,arguments)},bindEvents:function(){return function(){s.AjaxCaller.listOfCallbackFun.NewsletterUnsubscriptionAction=function(e){"object"===c(e)&&(r.messageObj.removeClass("success failure"),e.success?r.messageObj.addClass("success"):r.messageObj.addClass("failure"),r.messageObj.text(e.message),o.common.refreshCaptcha(r.$form),r.$form.get(0).reset())}}.apply(this,arguments)},init:function(){this.initCache(),this.bindEvents()}},void 0===(n=function(){return o.unsubscibeNewsLetter}.apply(t,[]))||(e.exports=n)},871:function(b,C,e){var w;!function(i,t){var o={};window.RICHEMONT;function r(e,t){var a=e.tagId,n=e.tagTitle;"add"===t?o.selectedBoutiquesArr.push({code:a,desc:n}):o.selectedBoutiquesArr=i.grep(o.selectedBoutiquesArr,function(e,t){return e.code!==a}),o.selectedBoutiques.val(JSON.stringify(o.selectedBoutiquesArr))}function a(e,t){t[e?"addClass":"removeClass"]("in")}function n(e){var t=i(this);e.stopPropagation(),e.preventDefault(),t.removeClass("closed").addClass("opened"),a(!0,t.find(".js-prefer-list-collection"))}function s(){var e=i(this);e.removeClass("opened").addClass("closed"),a(!1,e.find(".js-prefer-list-collection"))}function c(e,t){hbsTemplates.ready(function(){e.closest(".js-prefer-list").find(".js-tag-wrapper").append(CARF.templates.preferenceTag(t))})}function l(e,t){e.closest(".js-prefer-list").find('.js-sub-section-tag[data-tag-id="'+t.tagId+'"]').remove()}function d(e,t){e.prop("checked",t)}function u(){var e=i(this),t=e.data();d(e.closest(".js-prefer-list").find('input[id="'+t.tagId+'"]'),!1),l(e,t),r(t,"remove")}function p(){var t;try{t=JSON.parse(i.parseHTML(o.selectedBoutiques.val())[0].data)}catch(e){console.log("I am into catch"),t=[]}return t}function h(e){return e.sort(function(e,t){return e.name.localeCompare(t.name)})}function f(t){var e=p();return i.grep(e,function(e){return e.code===t})}function m(e){o.$boutiquesDropDown.find(".js-prefer-list-boutiques").remove();var t=h(o.boutiquesData[e].Boutique);0<t.length?i(".js-boutiques-drop").addClass("hidden"):i(".js-boutiques-drop").removeClass("hidden"),hbsTemplates.ready(function(){o.$boutiquesDropDown.append(CARF.templates.myCartier_boutiques({cntry:e,boutiquesData:t})),function(e){e.each(function(){var e=i(this);0<f(e.attr("id")).length&&d(e,!0)})}(o.$boutiquesDropDown.find(".sub-section__item-checkbox"))})}function e(){var e;e={type:"GET",url:"/bin/cartier/appointmentStores."+o.$html.attr("data-lang")+".json",dataType:"json",contentType:"application/x-www-form-urlencoded"},t.ajaxWrapper.getXhrObj(e).done(function(e){console.log("boutiques data>>"+e),o.boutiquesData=e.content,function(t){var a=[];i.each(t,function(e,t){a.push({id:e,name:CQ.I18n.getMessage("country."+e)})}),a=h(a);var n=[];i.each(a,function(e,t){n.push('<option value="'+t.id+'">'+CQ.I18n.getMessage(t.name)+"</option>")}),o.$countryDropdown.append(n.join("")),o.$countryDropdown.on("change",function(){var e=i(this).val();console.log("slected country val>>>"+i(this).val()+":::"+t+"::"+e),i(this).val(e),m(e)})}(e.content),function(e){i.each(e,function(e,t){var a=i.grep(t.Boutique,function(e){return f(e.sapId).length});a.length&&i.each(a,function(e,t){var a={tagTitle:t.name,tagId:t.sapId,tagValue:t.sapId};c(o.$boutiquesDropDown,a)})})}(e.content)}).fail(function(e){t.log("error",e)})}function g(e){e.stopPropagation()}function v(e){i(this);!function(e,t){var a,n=e,i=n.find('input[type="checkbox"]:not(".disabled")');t=void 0!==t?t:i.is(":checked"),a={tagTitle:i.data("text"),tagId:i.attr("id"),tagValue:i.val()},t?c(n,a):l(n,a),t&&n.hasClass("js-collection-boutique-item")?r(a,"add"):r(a,"remove")}(i(this))}function y(){o.$preferenceComponent.each(function(){!function(e){e.on("click",".js-preference-list.closed",n).on("click",".js-preference-list.opened",s).on("click",".js-prefer-list-collection",g).on("click",".js-tag-remove",u).on("click",".js-collection-boutique-item",v)}(i(this))})}t.myPreferredBoutiques={moduleName:"myPreferredBoutiques",initCache:function(){return function(){o.$html=i("html"),o.$body=i(document.body),o.$preferenceComponent=i(".js-preference-wrapper-btqs"),o.$countryDropdown=i(".js-prefer-list-countries"),o.$boutiquesContainer=i(".js-preference-wrapper-btqs > .js-prefer-list"),o.$boutiquesDropDown=o.$boutiquesContainer.find(".select-wrapper"),o.selectedBoutiques=i("#fn_selectedBoutiques"),o.$boutiquesContainer.append("<div class='sub-section__tag-wrapper js-tag-wrapper'/>"),o.$boutiquesDropDown.addClass("js-preference-list closed")}.apply(this,arguments)},bindEvents:function(){return y.apply(this,arguments)},init:function(){this.initCache(),this.bindEvents(),o.selectedBoutiquesArr=p(),e()}},void 0===(w=function(){return t.myPreferredBoutiques}.apply(C,[]))||(b.exports=w)}(window.jQuery,window.sncf)}}]);
//# sourceMappingURL=http://localhost:8080/dist/javascript/common.cf7ed67586561d80563a.js.map