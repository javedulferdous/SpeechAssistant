!function(e,t,i){var o=0,a=Unison.fetch.all(),l=Unison.fetch.now(),s=parseInt(l.width,10)>=parseInt(a.landscape,10);Drupal.behaviors.productImageFullV1={initCarousel:function(t,i,l,r){var n,c=e(".carousel-dots",l),u=".js-product-thumb",d=e(u,l),m=e(".js-product-thumbs",l),p={appendDots:c,dots:!0,arrows:!1,infinite:!0,slide:".js-spp-carousel__slide",slidesToShow:1,slidesToScroll:1},h={arrows:!0,appendArrows:e(".carousel-arrows",i.$ele),vertical:!0,slide:".js-product-thumb",slidesToShow:4,slidesToScroll:1};(n=t.$ele).not(".slick-initialized").slick(p),n.slick("slickFilter",":not(.hidden)"),o&&(n.slick("slickGoTo",o),o=0),n.on("afterChange",(function(e,t,i){d.parent().find('[data-slick-index="'+i+'"]').trigger("click")})),function(){var e=i.$ele;e.not(".slick-initialized").slick(h),e.slick("slickFilter",":not(.hidden)")}(),t.$ele.on("refresh",(function(){var e=t.$ele;e.slick("slickFilter",":not(.hidden)"),e.slick("setPosition")})),e(".js-product-thumb",m).eq(0).addClass("active"),(d=e(u,l)).once().on("click",(function(o){var a,l=e(this);o.preventDefault(),l.hasClass("active")||(s&&r&&Drupal.behaviors.productImageFullV1._removeZoom(),d.filter(".active").removeClass("active"),l.addClass("active"),a=l.data("slick-index"),t.$ele.slick("slickGoTo",a),i.$ele.slick("slickGoTo",a),s&&r&&Drupal.behaviors.productImageFullV1._initZoom())})),Unison.on("change",(function(e){e=Unison.fetch.now(),(s=parseInt(e.width,10)>=parseInt(a.landscape,10))?Drupal.behaviors.productImageFullV1._initZoom():Drupal.behaviors.productImageFullV1._removeZoom()}))},reInitCarousel:function(t,a){var l,r,n,c=".js-product-thumbs",u=".js-spp-carousel",d=e(u,t),m=e(c,t),p=e(),h=t.attr("data-image-zoom");d.hasClass("slick-initialized")&&(l=i.template.get({name:"product_image_full",data:{defaultSku:a}}),r=(p=e(l)).find(u).html(),n=p.find(c).html(),o=d.slick("slickCurrentSlide"),d.slick("unslick"),m.slick("unslick"),d.html(r),m.html(n),t.attr("data-sku-base-id",a.SKU_BASE_ID),this.initCarousel({$ele:d},{$ele:m},t,h),s&&h&&(this._removeZoom(),this._initZoom()))},_initZoom:function(){var t=e(".js-product-slide.slick-active .product-full__carousel-slide-img");if(t.parents(".js-quickshop").length>0)return null;t.elevateZoom({zoomWindowPosition:1,zoomWindowOffetx:10,zoomWindowWidth:550,zoomWindowHeight:450,borderSize:1})},_removeZoom:function(){var t=e(".js-gallery-img-large.active");e.removeData(t,"elevateZoom"),e(".zoomContainer").remove()},attach:function(t){if(!this.attached){this.attached=!0;var i=this,o=e(".product-full-v2",t),a=e(".product-full__image").attr("data-image-zoom");o.each((function(){var t=e(this),o=e(".js-product-full__image",t),l=e(".js-spp-carousel",o),s=e(".js-product-thumbs",o);i.initCarousel({$ele:l},{$ele:s},o,a)})),s&&a&&this._initZoom()}},attached:!1},e(document).on("product.skuSelect",".js-product",(function(i,o){var a=e(this),l=a?t.data.getProduct(a.data("product-id")):null,r=t.data.getSku(o),n=e(".js-product-full__image",a);if(n.length&&o!==parseInt(n.attr("data-sku-base-id"))){var c=e(".js-product-full__image",a),u=e(".product-full__image").attr("data-image-zoom");if(c.length){c.each((function(){var t=e(this),i=e(".js-spp-carousel",t),o=e(".js-product-thumbs",t);Drupal.behaviors.productImageFullV1.initCarousel({$ele:i},{$ele:o},t,u)})),s&&u&&Drupal.behaviors.productImageFullV1._initZoom();var d=r||(l.defaultSku?l.defaultSku:l);Drupal.behaviors.productImageFullV1.reInitCarousel(n,d)}}}))}(jQuery,window.prodcat||{},window.site||{});
//# sourceMappingURL=product_image_full_v1.js.map
