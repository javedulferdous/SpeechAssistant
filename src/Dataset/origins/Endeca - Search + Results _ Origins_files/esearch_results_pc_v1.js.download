var prodcat=prodcat||{};prodcat.ui=prodcat.ui||{},prodcat.data=prodcat.data||{};var page_data=page_data||{},site=site||{},generic=generic||{};!function(e,s){Drupal.behaviors.esearchResultsPCV1={attached:!1,initFilterToggle:function(s){e(".js-search_results__filter_header",s).once().click((function(s){e(this).toggleClass("collapse").siblings(".results").slideToggle("fast"),e(this).hasClass("collapse")?e(this).attr("aria-expanded","true"):e(this).attr("aria-expanded","false")})),e(".js-search_results__filter_header",s).on("focus",(function(s){e(".product-attribute").removeAttr("tabindex")}))},attach:function(s,t){var r=this;if(!r.attached){r.attached=!0;var a=e(".search_results",s);r.initFilterToggle(a)}}},e(document).on("endeca.search.results.loaded",(function(t,r){var a=r.results.products.resultData||{},i=e(".search_results"),c=".js-best-sellers-search-result-page-content",l=e(".js-search_results__container");if(0===a.length)e(".js-search_results__summary",i).show(),Drupal.settings.common.search_feature_revamp&&e("body").addClass("no-result"),e(c).removeClass("hidden");else{e(c).remove();var o=e(".js-search_results__products .results-summary",i).html();e(".js-search_results__summary",i).html(o),Drupal.settings.common.search_feature_revamp&&e(l).removeClass("hidden"),prodcat.data.updateProducts(a,!1),Drupal.settings.common.search_feature_revamp&&_.each(a,(function(s){var t="[data-product-id='"+s.PRODUCT_ID+"']",r=e(t).find(".js-product").data("sku-base-id");2!==prodcat.data.getSku(r).INVENTORY_STATUS||Drupal.settings.common.has_waitlist_tos||e(t).find(".js-out-of-stock").removeClass("hidden")}))}if(e(document).trigger("product.init"),Drupal.settings.common.search_feature_revamp||Drupal.attachBehaviors(i,s),void 0!==site.l2Request&&(site.l2Request.params=site.l2Request.getParams(),generic.jsonrpc.fetch(site.l2Request)),Drupal.settings.common.enable_preorder&&Drupal.behaviors.preOrder&&e.each(a,(function(s,t){var r=t.skus,a=0,i=site.client.isMobile,c=t.defaultSku,l=e('.js-add-to-cart[data-product-id="'+t.PRODUCT_ID+'"]'),o=e('[data-product-id="'+t.PRODUCT_ID+'"] .js-quickshop-trigger'),n=i?1===r.length?l:o:l;r&&(e.each(r,(function(e,s){1===s.isPreOrder&&(a+=1)})),r.length===a&&(n.text(site.translations.product.pre_order),n.addClass("pre-order-active")),1===c.isPreOrder&&e(document).trigger("isPreorder-init",r[0]))})),Drupal.settings.common.search_feature_revamp){Drupal.behaviors.productBriefShadesV1.attach(),Drupal.behaviors.skuListSizesV1.attach();var n=e(".js-endeca_search_mobile__filter"),u=e(".js-search_result-filter__submit"),d=e(".js-search_result-clear__submit"),h=e(".js-endeca_search_filter_container .search_results__breadcrumbs").find(".results").is(":empty"),p=e(".js-endeca_search_filter_container .search_results__dimensions").find(".results").is(":empty"),m=e(".js-search_results__nofilter"),f=e(".js-search_results_set__footer"),g=site.client.isMobile,v=e(".js-search_results__products .js-grid");e(".js-search_results__summary").on("click",".js-chat-live__withus",(function(s){s.preventDefault(),g?e("#footer_sticky_chat a.menu__link.menu__link--lvl-1").length>0&&e("#footer_sticky_chat a.menu__link.menu__link--lvl-1")[0].click():e("#footer_sticky_chat a.sticky-chat__link").length>0&&e("#footer_sticky_chat a.sticky-chat__link")[0].click()})),h&&p&&(m.removeClass("hidden"),f.addClass("hidden"),l.addClass("no_filter")),n.click((function(){e(".js-search_results_mobile__container").removeClass("hidden")})),u.click((function(){return e(".js-search_results_mobile__container").addClass("hidden"),!1})),d.click((function(){e(".js-search_results_mobile__container").addClass("hidden")}));var j=[];e(".js-product-grid-item .js-product-brief__img").each((function(){if(!this.complete){var s=e.Deferred();e(this).one("load",s.resolve),j.push(s)}})),e.when.apply(e,j).done((function(){Drupal.behaviors.grids.attach(v,Drupal.settings)}))}}))}(jQuery,Drupal.settings);
//# sourceMappingURL=esearch_results_pc_v1.js.map
