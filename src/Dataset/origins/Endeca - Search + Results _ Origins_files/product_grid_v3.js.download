var prodcat=prodcat||{};prodcat.data=prodcat.data||{},function(t){function r(r){var e=t(".js-product-grid-item",r);t(".js-product-grid-sort-placeholder",r).each((function(){var r=t(this),i=r.data("placeholder-product-id"),s=e.filter('[data-product-id="'+i+'"]');r.after(s).remove()}))}Drupal.behaviors.productGridV3={attach:function(e){var i=t(".product-grid",e),s=i.filter(".product-grid--carousel"),o=t(".js-product-carousel",s),a=t(".js-product-grid-item",e),d=t(".js-mpp-sort-option--new",e),l=t(".js-mpp-sort-option--bestseller",e),c=0,n=0;t(document).on("ticker_product_oos",".js-product",(function(r,e){var s=!1,o=t("[data-product-id='"+e+"']",this).closest(".js-product-grid-item"),a=!1;o&&o.length>0&&(o.once("ticker-oos").each((function(){var r=t(this),i=prodcat.data.getProduct(e),o=[],d=t.grep(i.skus,(function(t){var r=7===t.INVENTORY_STATUS&&0===t.highVelocityQty;return r||o.push(t.SKU_ID),r})).length===i.skus.length;if(r.data("available-skus",o.join(",")),d){if(r.hasClass("js-product-full")){var l=Drupal.settings.pathPrefix||"";return window.location.href="/"+l,!1}r.trigger("products.remove-ticker-flagged",e),r.remove(),a=!0;var c=r.parent(".slick-slide");c.length>0&&(c.closest(".slick-slider.slick-initialized").data("updated",1).attr("data-updated",1),c.remove(),s=!0)}})),s&&t(".slick-slider").filter('[data-updated="1"]').each((function(){var r=t(this);r.data("updated",0).attr("data-updated",0),r.find(".slick-cloned").remove(),r.slick("reinit")})),a&&i.each((function(){var r=t(this);r.hasClass("mixitup-loaded")?r.trigger("grid.reflow"):r.trigger("mixitup.initialize")})))})),a.each((function(){var r=t(this).find(".js-product-badge-text").text().toLowerCase().trim();"new"===r||"new arrival"===r||"new arrivals"===r?(t(this).attr("data-newest-sort","1"),c=1,d.removeClass("hidden")):"best seller"!==r&&"best sellers"!==r&&"bestseller"!==r&&"bestsellers"!==r||(t(this).attr("data-bestseller-sort","1"),l.removeClass("hidden"),n=1)})),c?n||l.remove():d.remove(),o.each((function(){var r=t(this),e={appendArrows:r.parent().find(".carousel-controls"),infinite:!0,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:1024,settings:{appendDots:r.parent().find(".carousel-dots"),arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1}}]},i=r.data("slides-to-show");i&&(e.slidesToShow=i),r.slick(e)})),i.on("productGrid.filter",(function(e,i,s){var o=t(".js-product-grid-item",this),a=o.filter((function(){return _.contains(i,t(this).data("product-id"))})),d=t(this),l=o.first().parent();r(d),s&&(a.before('<div class="js-product-grid-sort-placeholder" />'),_.each(_.clone(i).reverse(),(function(t){a.filter('[data-product-id="'+t+'"]').prependTo(l)}))),o.addClass("hidden"),a.removeClass("hidden"),t(this).trigger("grid.reflow")})),i.on("productGrid.showAll",(function(){var e=t(this);r(e),t(".js-product-grid-item",this).removeClass("hidden"),e.trigger("grid.reflow")}))}}}(jQuery);
//# sourceMappingURL=product_grid_v3.js.map
