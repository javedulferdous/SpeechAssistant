var prodcat=prodcat||{};prodcat.ui=prodcat.ui||{},prodcat.data=prodcat.data||{};var page_data=page_data||{},site=site||{};!function(e){Drupal.behaviors.preOrder={attach:function(){var t=this;t.isDefaultActiveSku(),e(document).on("isPreorder-init",(function(e,r){site.templates&&site.templates.product_pre_order&&r&&t.isPreorder(r)}))},isPreorder:function(t){var r=this,d=t.PRODUCT_ID,s=e('.js-add-to-cart[data-product-id="'+d+'"]'),a=e('.js-add-to-waitlist[data-product-id="'+d+'"]'),o=e('[data-product-id="'+d+'"] .pre_order_active_msg'),i=e('[data-product-id="'+d+'"] .pre_order_out_stock_msg'),n=e('[data-product-id="'+d+'"] .pre_order_sold_out_msg'),c=e('.js-inv-status-list[data-product-id="'+d+'"]'),p=e('.pre-order__status[data-product-id="'+d+'"]'),u=e(".sold-out"),_=e(".js-quickshop").length;s.removeClass(".hidden"),1===t.isPreOrder?(p.removeClass("hidden"),c.addClass("hidden"),_&&p.addClass("mpp_pre_order_status"),1===t.INVENTORY_STATUS?(r.addHidden(i,n),o.removeClass("hidden"),s.addClass("pre-order-active"),s.text(site.translations.product.pre_order),o.text(site.translations.product.pre_order_active_msg),r.setPreorderMessage(o,site.translations.product.pre_order_active_msg,t,!0)):2===t.INVENTORY_STATUS?(r.addHidden(o,n,u),i.removeClass("hidden"),s.removeClass("pre-order-active"),a.addClass("hidden"),s.text(site.translations.product.pre_order),i.text(site.translations.product.pre_order_out_stock_msg),r.setPreorderMessage(i,site.translations.product.pre_order_out_stock_msg,t,!1)):7===t.INVENTORY_STATUS&&(r.addHidden(o,i,u),n.removeClass("hidden"),s.removeClass("hidden"),s.removeClass("pre-order-active"),a.addClass("hidden"),s.text(site.translations.product.pre_order),n.text(site.translations.product.pre_order_sold_out_msg),r.setPreorderMessage(n,site.translations.product.pre_order_sold_out_msg,t,!1))):(s.text(site.translations.product.product_cta_add_to_bag),p.addClass("hidden"),s.removeClass("pre-order-active"),u.removeClass("hidden"),c.removeClass("hidden"))},addHidden:function(){e.each(arguments,(function(e,t){void 0!==t&&t.addClass("hidden")}))},isDefaultActiveSku:function(){if(!e("body").hasClass("section-esearch")){var t=prodcat.data.store.products;e.each(t,(function(t,r){if(r&&r.defaultSku){var d=r.PRODUCT_ID,s=r.defaultSku.isPreOrder,a=r.skus,o=0;if(e.each(a,(function(e,t){1===prodcat.data.getSku(t).isPreOrder&&o++})),1===s||a.length===o){var i=e('[data-product-id="'+d+'"]').find(".product-brief__cta--shop-now ,.product-brief__cta--select-sku");i.addClass("pre-order-active"),i.text(site.translations.product.pre_order)}}}))}},setPreorderMessage:function(e,t,r,d){if(r){var s=""+r.RELEASE_DATE,a=new Date;if(a.setFullYear(parseInt("20"+s.substr(0,2)),parseInt(s.substr(2,2))-1,parseInt(s.substr(4,2))),d){var o=parseInt(site.translations.product.preorder_ships_by_days),i=a.getDate();isNaN(o)||a.setDate(i+=o)}var n=("0"+a.getDate()).slice(-2),c=("0"+(a.getMonth()+1)).slice(-2)+"/"+n;e.html(t);var p=e.html().replace(/::rs_dt::/,c);e.html(p),e.show()}}}}(jQuery);
//# sourceMappingURL=product_pre_order_v1.js.map
