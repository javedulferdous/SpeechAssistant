var prodcat=prodcat||{};!function(t,s){Drupal.behaviors.productWaitlistV1={attach:function(s,i){var a=this;t(document).on("product:waitlist:init",(function(t,s){a.init(s)})),t(document).on("product:waitlist:reset",(function(t,s){a.reset(s)}))},init:function(s){if(s.INVENTORY_STATUS===this.statusIds.inventory.soldOut&&s.LIFE_OF_PRODUCT!==this.statusIds.lifeOfProduct.basicReorder)return null;var i=this,a=t(this.classes.container).filter("[data-product-id="+s.PRODUCT_ID+"]"),e=t(this.classes.waitlistBtn,a),o=Drupal.settings.common&&Drupal.settings.common.enable_addtocart_notifyme_tos;e.each((function(e,d){if(t(d).hasClass(i.classes.enabled)&&!o)return null;i.show(a,d,s),t(d).attr("data-sku-base-id",s.SKU_BASE_ID),t(d).on("click",(function(i){i.preventDefault(),t(document).trigger("product:waitlist:overlay",s)}))}))},reset:function(s){if(!s)return null;var i=t(this.classes.container).filter("[data-product-id="+s.PRODUCT_ID+"]"),a=t(this.classes.waitlistBtn,i),e=t(this.classes.cartBtn,i);if(t(".product-quickshop__product .product-quickshop__footer").removeClass("product-tos"),e.html(site.translations.product.product_cta_add_to_bag),!a.hasClass(this.classes.enabled))return null;this.hide(i,a)},show:function(s,i,a){var e=Drupal.settings.common&&Drupal.settings.common.enable_addtocart_notifyme_tos,o=(t(this.classes.waitlistBtn,s),t(this.classes.cartBtn,s));2===a.INVENTORY_STATUS&&e?(o.removeClass(this.classes.hidden),t(".product-quickshop__product .product-quickshop__footer").addClass("product-tos"),o.html(site.translations.product.product_cta_tos_add_to_bag)):(o.addClass(this.classes.hidden),o.html(site.translations.product.product_cta_add_to_bag)),7===a.INVENTORY_STATUS&&2===a.LIFE_OF_PRODUCT&&t(i).siblings(".js-wait-list").length>0&&o.addClass(this.classes.hidden),t(i).removeClass(this.classes.hidden),t(i).addClass(this.classes.active),t(i).addClass(this.classes.enabled)},hide:function(s,i){t(this.classes.cartBtn,s).removeClass(this.classes.hidden),i.addClass(this.classes.hidden),i.removeClass(this.classes.active),i.removeClass(this.classes.enabled)},classes:{waitlistBtn:".js-add-to-waitlist",cartBtn:".js-add-to-cart",invStatus:".js-inv-status-list",container:".js-product",enabled:"js-waitlist-enabled",hidden:"hidden",active:"active"},statusIds:{inventory:{comingSoon:3,soldOut:7},lifeOfProduct:{basicReorder:2}}},t(document).on("product.updateInvStatus",".js-product",(function(){var s=t(".product-brief__cta--shop-now",this),i=s.data("product-id")||t(this).data("product-id");if(!i||i.length){var a=prodcat.data.getProduct(i);if(a)if(1===a.isShoppable){var e=t(".product-brief__footer .product__inventory-status.js-inv-status-list",this),o=t(".product-brief__footer .js-add-to-waitlist.js-product-cta",this);e.remove(),o.remove()}else{var d=t(this).parents(".product-brief__footer");s.addClass("hidden"),(d.find(".js-inv-status-list .js-inv-status-2").is(":visible")||d.find(".js-inv-status-list .js-inv-status-3").is(":visible"))&&d.find(".js-add-to-waitlist").removeClass("hidden")}}}))}(jQuery);
//# sourceMappingURL=product_waitlist_v1.js.map
