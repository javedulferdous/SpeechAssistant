!function(e){Drupal.behaviors.enter_to_win_v1={attach:function(t,i){var n=e("#enter-to-win-maskimizer"),r=e(".js-maskimizer-email-field-wrapper");n.closest(".flex-grid__item").addClass("maskimizer-enter-to-win-wrapper js-maskimizer-enter-to-win-wrapper"),r.closest(".origins__milestone").addClass("maskimizer__email-form-container"),e(".js-maskimizer-step1").closest(".origins__milestone").addClass("maskimizer__step1-container"),e(".js-maskimizer-step2").closest(".origins__milestone").addClass("maskimizer__step2-container");var o,a,s,l,c,m,w,p,d="enter_to_win";if(void 0!==site.templates[d]){var _=site.template.get({name:d,data:site.templates[d].data});n.closest(".basic-formatter__item").after(e("<li>",{class:"basic-formatter__item enter-to-win-email-container js-enter-to-win-email-container js-enter-to-win-pc-container enter_to_win_disable clearfix enter-to-win__pc",html:_})),e(".js-maskimizer-enter-to-win-wrapper").after(e("<div>",{class:"enter-to-win-email-container js-enter-to-win-email-container js-enter-to-win-mobile-container enter-to-win__mobile enter_to_win_disable clearfix",html:_})),r.html(_),o=e(".js-enter-to-win-email-container"),a=e(".js-enter-to-win-mobile-container"),s=o.find(".js-enter-to-win-checkbox-wrapper"),l=a.find(".js-enter-to-win-checkbox-wrapper"),c=s.find(".js-enter-to-win-tc"),m=l.find(".js-enter-to-win-tc"),w=s.find(".js-enter-to-win-stay-with-origins"),p=l.find(".js-enter-to-win-stay-with-origins"),s.find(".js-enter-to-win-tc-label").click((function(){c.click(),m.click()})),s.find(".js-enter-to-win-stay-with-origins-label").click((function(){w.click(),p.click()})),e(".js-maskimizer-enter-to-win-wrapper .flex-tout__inner .flex-tout--img__upper-image").click((function(t){t.preventDefault(),o.slideDown((function(){var t=e(this);t.removeClass("enter_to_win_disable"),null!=navigator.userAgent.match(/iPad/i)&&90==Math.abs(window.orientation)&&e(".js-enter-to-win-pc-container").addClass("iPad_landscape"),t[0].style.removeProperty("overflow"),e("html,body").animate({scrollTop:e(".js-enter-to-win-pc-container").offset().top-e(".js-enter-to-win-pc-container").outerHeight(!0)},"slow")}))})),o.find(".js-enter-to-win-close").click((function(){o.slideUp((function(){e(this).addClass("enter_to_win_disable").removeClass("iPad_landscape")}))})),o.find(".js-enter-to-win-email-wrapper input").keyup((function(){var t=e(this).val();e(this).closest(".js-enter-to-win-mobile-container").length?e(".js-enter-to-win-pc-container .js-enter-to-win-email-wrapper input").val(t):e(".js-enter-to-win-mobile-container .js-enter-to-win-email-wrapper input").val(t)})),e(".js-enter-to-win-tc").change((function(){$enterToWinSubmit=e(".js-enter-to-win-submit-wrapper").find("input"),e(this).is(":checked")?$enterToWinSubmit.removeClass("enter-to-win__greyout").prop("disabled",!1):$enterToWinSubmit.addClass("enter-to-win__greyout").prop("disabled",!0)}))}var f=e(".js-enter-to-win-outer-wrapper"),u=f.find(".js-enter-to-win-alert"),j=f.find("form");j.submit((function(t){t.preventDefault();var i=this,n={};e.each(["_SUBMIT","PC_EMAIL_ADDRESS","PROMOTION_ID","PC_EMAIL_PROMOTIONS","TEXT_ANSWER"],(function(t,r){var o=e('input[name="'+r+'"]',i);null!=o&&o.length>0&&(n[r]="radio"==o[0].type||"checkbox"==o[0].type?o.is(":checked")?1:0:o.val())})),generic.jsonrpc.fetch({method:"rpc.form",params:[n],onSuccess:function(e){u.hide(),j.hide(),f.find(".js-enter-to-win-thankyou").removeClass("hidden")},onFailure:function(t){var i=t.getMessages(),n=[],r="";e.each(i,(function(e,t){n.push(t.text)})),n.length>0&&(r=n.join("<br />")),u.html(r)}})}))}}}(jQuery);
//# sourceMappingURL=enter_to_win_v1.js.map
