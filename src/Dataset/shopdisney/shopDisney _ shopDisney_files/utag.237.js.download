//tealium universal tag - utag.237 ut4.0.201903080406, Copyright 2019 Tealium.com Inc. All Rights Reserved.
window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={"a":a,"conversion_id":"AW-963720071","conversion_label":"ZTFsCKyT-XMQh-fEywM","base_url":"https://www.googletagmanager.com/gtag/js?id=AW-963720071","product_sku":[],"event_name":'',"product_unit_price":[]
};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
u.data.order_id=u.data.order_id||b._corder||"";u.data.order_subtotal=u.data.order_subtotal||b._csubtotal||50;u.data.order_currency=u.data.order_currency||b._ccurrency||"USD";if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.loader_cb=function(){utag.DB("send:237:CALLBACK");u.initialized=true;var gParameters={};var totalValue=0;if(u.data['a']=='view'){u.data.event_name="page_view";}
if(typeof b["dom.pathname"]!=undefined&&b["dom.pathname"]=="/"){gParameters.ecomm_pagetype='home';}else if(typeof b["t_current_page_name"]!=undefined&&b["t_current_page_name"]=="Search"){gParameters.ecomm_pagetype='searchresults';}else if(typeof b["t_current_page_type"]!=undefined&&b["t_current_page_type"]=="productListPage"){gParameters.ecomm_pagetype='category';if(typeof b["t_current_page_name"]!=undefined){gParameters.ecomm_category=b["t_current_page_name"];}}else if(typeof b["t_current_page_type"]!=undefined&&b["t_current_page_type"]=="productDetailPage"){gParameters.ecomm_pagetype='product';if(u.data.product_sku.length>0){gParameters['ecomm_prodid']=u.data.product_sku[0];}
if(u.data.product_unit_price.length>0){gParameters['ecomm_totalvalue']=u.data.product_unit_price[0];}
if(typeof b['t_product_discount_price_excluding_qty']!='undefined'&&b['t_product_discount_price_excluding_qty'].length>0&&typeof b['t_product_original_price_excluding_qty']!='undefined'&&b['t_product_original_price_excluding_qty'].length>0){if(parseFloat(b['t_product_discount_price_excluding_qty'][0])<parseFloat(b['t_product_original_price_excluding_qty'][0])){gParameters['isSaleItem']=true;}else{gParameters['isSaleItem']=false;}}}else if(typeof b["t_current_page_type"]!=undefined&&b["t_current_page_type"]=="shopCartPage"){gParameters.ecomm_pagetype='cart';}
if(u.data['a']=='link'&&typeof b['event_name']!='undefined'&&b['event_name']=="cart_add"){if(typeof b['product_sku']!='undefined'&&b['product_sku'].length>0){gParameters['ecomm_prodid']=b['product_sku'][0];}
if(typeof b['product_price']!='undefined'&&b['product_price'].length>0&&typeof b['product_quantity']!='undefined'&&b['product_quantity'].length>0){totalValue=parseFloat(b['product_price'][0])*parseInt(b['product_quantity'][0]);gParameters['ecomm_totalvalue']=totalValue.toFixed(2);}
if(typeof utag_data!='undefined'&&typeof utag_data['t_current_page_type']!='undefined'&&utag_data['t_current_page_type']=="productDetailPage"){gParameters['ecomm_pagetype']='product';}
u.data.event_name='add_to_cart';}
if(((b['dom.pathname'].toString().indexOf('DSIOrderReceiptView')>-1)||(b['dom.pathname'].toString().indexOf('/checkout/complete')>-1)||(typeof b['t_current_page_name']!='undefined'&&b['t_current_page_name'].toString().indexOf('checkoutreceipt')>-1))&&(typeof b['_corder']!='undefined'&&b['_corder']!="")){gParameters.send_to=u.data.conversion_id+"/"+u.data.conversion_label;gParameters.value=u.data.order_subtotal;gParameters.currency=u.data.order_currency;gParameters.transaction_id=u.data.order_id;gParameters.ecomm_pagetype='purchase';u.data.event_name='conversion';utag.DB("237:conversion event_name set");}
if(u.data.event_name){gtag('event',u.data.event_name,gParameters);utag.DB("237:event "+u.data.event_name+" sent");}
utag.DB("send:237:CALLBACK:COMPLETE");};if(!u.initialized){u.loader({"type":"script","src":u.data.base_url,"cb":u.loader_cb,"loc":"script","id":'utag_237'});gtag('config',u.data['conversion_id']);}else{u.loader_cb();}
}};utag.o[loader].loader.LOAD(id);})("237","disney.shopdisneysfcc");}catch(error){utag.DB(error);}
