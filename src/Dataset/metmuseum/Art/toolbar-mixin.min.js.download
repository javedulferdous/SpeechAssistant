define(['jquery','Aheadworks_Layerednav/js/filter/request/bridge','Aheadworks_Layerednav/js/url','Aheadworks_Layerednav/js/url/processor/bridge'],function($,requestBridge,url,urlProcessorBridge){'use strict';return function(widget){$.widget('mage.awLayeredNavToolbar',widget,{_processLink:function(event,paramName,defaultValue){event.preventDefault();let sortDirection=null;let value=$(event.currentTarget).data('value');if(!value&&event.currentTarget.href){let url=event.currentTarget.href;value=this.getUrlParameterByName(url,paramName);sortDirection=this.getUrlParameterByName(url,this.options.direction);}
if(!value){return;}
this.changeUrl(paramName,value,defaultValue,null,sortDirection);},changeUrl:function(paramName,paramValue,defaultValue,afterSubmit,sortDirection){let updateUrl=url.getCurrentUrlWithChangedParam(paramName,paramValue,defaultValue);if(sortDirection){let updateParam={};updateParam[this.options.direction]=sortDirection;updateUrl=urlProcessorBridge.updateParams(updateUrl,updateParam);}else if(this.getUrlParameterByName(updateUrl,this.options.direction)){updateUrl=urlProcessorBridge.removeParams(updateUrl,[this.options.direction]);}
afterSubmit=afterSubmit||'_afterSubmitDefault';requestBridge.submit(updateUrl).then(function(){this[afterSubmit](updateUrl)}.bind(this));},getUrlParameterByName:function(url,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(url);return results===null?"":decodeURIComponent(results[1].replace(/\+/g," "));}});return $.mage.awLayeredNavToolbar;};});