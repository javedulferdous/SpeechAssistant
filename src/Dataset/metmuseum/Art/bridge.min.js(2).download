define(['jquery','underscore','./executor/location'],function($,_,defaultExecutor){'use strict';return{executor:defaultExecutor,init:function(config){this.executor=config.executor;this._initHistoryListener();},_initHistoryListener:function(){var state={};if(_.isEmpty(window.history.state)){state.title=window.document.title;state.url=location.href;window.history.replaceState(state,state.title,state.url);}
$(window).off('popstate');$(window).on('popstate',function(event){var originalEvent=event.originalEvent;if(!_.isEmpty(originalEvent.state)){window.location.replace(originalEvent.state.url);$.Deferred().resolve();}}.bind(this));},submit:function(url){return this.executor.submit(url);},getResult:function(){return this.executor.getResult();}};});