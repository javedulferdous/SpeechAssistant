define(['jquery'],function($){return{currentViewport:undefined,viewportChangeCallbacks:$.Callbacks(),pluginInit:false,settings:{viewports:{desktop:1000,tablet:999,mobile:767},isTouch:false},init:function(userSettings){$.extend(this.settings,userSettings);if(!this.pluginInit){var _self=this;_self.updateViewport(_self,false);$(window).on(_self.settings.isTouch?'orientationchange':'resize',function(e){setTimeout(function(){_self.updateViewport(_self);},e.type=='resize'?0:500);});this.pluginInit=true;}},onChange:function(callback,fire){this.viewportChangeCallbacks.add(callback);arguments.length===2&&callback(this.currentViewport);},getViewport:function(){return this.currentViewport;},updateViewport:function(_self,fireOnChange){if(window.matchMedia('screen and (max-width: '+_self.settings.viewports['mobile']+'px)').matches){if(_self.currentViewport!='mob'){$("body").removeClass(_self.currentViewport+'-width');_self.currentViewport='mob';if(_self.currentViewport!='mobile'&&fireOnChange!=false){_self.viewportChangeCallbacks.fire(_self.currentViewport);}}}else if(window.matchMedia('screen and (max-width: '+_self.settings.viewports['tablet']+'px)').matches){if(_self.currentViewport!='tab'){$("body").removeClass(_self.currentViewport+'-width');_self.currentViewport='tab';if(_self.currentViewport!='tablet'&&fireOnChange!=false){_self.viewportChangeCallbacks.fire(_self.currentViewport);}}}else if(_self.currentViewport!='desk'){$("body").removeClass(_self.currentViewport+'-width');_self.currentViewport='desk';if(fireOnChange!=false){_self.viewportChangeCallbacks.fire(_self.currentViewport);}}}}})