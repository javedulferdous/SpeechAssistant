define(['jquery','./url/processor/bridge'],function($,processorBridge){'use strict';return{currentUrl:window.location.href,filterRequestParams:[],paramsToRemove:['_','aw_layered_nav_process_output'],paramsToRemoveBeforeSend:['p'],registerFilterRequestParam:function(paramName){if($.inArray(paramName,this.filterRequestParams)==-1){this.filterRequestParams.push(paramName);}
processorBridge.registerFilterRequestParam(paramName);},setCurrentUrl:function(url){this.currentUrl=processorBridge.removeParams(url,this.paramsToRemove);},getCurrentUrl:function(){return this.currentUrl;},getCurrentUrlWithChangedParam:function(paramName,paramValue,defaultValue){var paramsToUpdate={},url=$.inArray(paramName,this.paramsToRemoveBeforeSend)==-1?processorBridge.removeParams(this.currentUrl,this._prepareRemoveParams([])):this.currentUrl;if(paramValue==defaultValue){return processorBridge.removeParams(url,[paramName]);}
paramsToUpdate[paramName]=paramValue;return processorBridge.updateParams(url,paramsToUpdate);},getSubmitUrl:function(filterValue){var url=processorBridge.removeParams(this.currentUrl,this._prepareRemoveParams(this.filterRequestParams));return processorBridge.updateParams(url,processorBridge.prepareFilterValue(filterValue));},getClearUrl:function(){return processorBridge.removeParams(this.currentUrl,this._prepareRemoveParams(this.filterRequestParams));},getResetUrl:function(params){return processorBridge.removeParams(this.currentUrl,this._prepareRemoveParams(params));},_prepareRemoveParams:function(params){return this.paramsToRemoveBeforeSend.concat(params);}};});