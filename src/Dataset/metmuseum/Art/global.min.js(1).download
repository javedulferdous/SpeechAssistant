require(["jquery",'Magento_Ui/js/modal/modal','js/viewportCallbacks','js/lazy'],function($,modal,viewportCallbacks,lazyImg){CorraUI.log("==Globals==");$(document).ready(function(){var initializeUniformJs=function(){if(!jQuery("body").hasClass("page-layout-checkout")){var uniformSelector=jQuery("input:checkbox, input:radio").not('.no-uniform').not("input[name^='ratings']");uniformSelector.uniform({selectAutoWidth:false});uniformSelector.change(function(){jQuery.uniform.update();});}};var fireEvent=function(element,event){if(document.createEvent){var evt=document.createEvent("HTMLEvents");evt.initEvent(event,true,false);return element.dispatchEvent(evt);}
else{var evt=document.createEventObject();return element.fireEvent('on'+event,evt);}};$(document).ajaxComplete(function(){initializeUniformJs();setTimeout(initializeUniformJs,500);});$(window).resize(function(){if(CorraUI.viewportChanged()){CorraUI.responsiveElements();CorraUI.responsiveImage();}});$(window).load(function(){initializeUniformJs();});CorraUI.init({desktop:1001,tablet:999,mobile:767});CorraUI.responsiveElements();CorraUI.responsiveImage();initializeUniformJs();var windowWidth=$(window).width();if(CorraUI.isMobile()||windowWidth<=1023){var mobilecart=$('.mobile-cart-icon');if(mobilecart.length>0){mobilecart.on('click',function(){window.location.href=$(this).attr('data-href');});}}
try{$(".light-box").each(function(i){var me=$(this);var lbLink=me.find(".light-box-link");var lbContent=me.find(".light-box-content");var modalObj=me.hasClass("auto-open")==true?me:lbContent;var modalClass=typeof me.data('modal-class')!='undefined'?me.data('modal-class'):" ";modal({title:'',autoOpen:me.hasClass("auto-open"),modalClass:" light-box-center "+modalClass,buttons:[],responsive:true,clickableOverlay:true},modalObj);lbLink.data("modalObj",modalObj);});$(document).delegate(".light-box-link","click",function(){var me=$(this).parents(".light-box");if(typeof $(this).data("modalObj")!="undefined"){var modalObj=$(this).data("modalObj");modalObj.modal('openModal');}else{var lbContent=me.find(".light-box-content");var modalObj=me.hasClass("auto-open")==true?me:lbContent;var modalClass=typeof me.data('modal-class')!='undefined'?me.data('modal-class'):" ";modal({title:'',autoOpen:me.hasClass("auto-open"),modalClass:" light-box-center "+modalClass,buttons:[],responsive:true,clickableOverlay:true},modalObj);setTimeout(function(){modalObj.modal('openModal');},0);$(this).data("modalObj",modalObj);}
return false;});}catch(e){console.log(e);}
$('.header-my-account-link').on('click',function(){window.dataLayer=window.dataLayer||[];dataLayer.push({'event':'GAEvent','category':'Top Nav','action':'Click','label':'My Account'});});jQuery.fn.center=function(){this.css("position","fixed");this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/ 2)+"px");this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/ 2)+"px");return this;};var isHeadScrolledIntoView=function(elem){var docViewTop=jQuery(window).scrollTop();var docViewBottom=docViewTop+jQuery(window).height();var elemTop=jQuery(elem).offset().top;var elemBottom=elemTop;return(elemBottom<=docViewBottom);};$(".jq-head").click(function(){$(this).parents(".jq-accordion").siblings().removeClass("open").end().toggleClass("open");var __this=$(this);setTimeout(function(){if(!isHeadScrolledIntoView(__this)){$("body, html").animate({scrollTop:__this.offset().top-$(".sticky-header").outerHeight()-5});}},200);});if($('body').hasClass('account')){$('body').delegate('a,button, .wishlist-dropdown [role="button"]','click',function(){setTimeout(function(){initializeUniformJs();},500);});}
if($('body').hasClass('checkout-cart-index')){$('body').delegate('.checkout-btn','click',function(){window.location=window.checkoutConfig.checkoutUrl;return false;});$('body').delegate('.continue-btn:not(.update-bag-btn)','click',function(){if(window.history&&window.length>1){return window.history.go(-1);}
if(document.referrer==''){window.location=window.location.protocol+'//'+window.location.hostname;}else{window.location=document.referrer;}
return false;});$('body').delegate('.update-bag-btn','click',function(){if(jQuery("#form-validate").validation('isValid')==true){$('#form-validate').submit();}
return false;});$('body').delegate('.gift-message .fieldset input[type="text"]','keyup',function(e){var input=$(e.target);if(input.val().length){input.val(input.val().substr(0,30));}});$('body').delegate('#gift-options-cart .jq-add-gift-submit','click',function(){$('.gift-message .fieldset input[type="text"]').each(function(){var input=$(this);if(input.val().length){input.val(input.val().substr(0,30));}});});swapGiftMessage();$(window).resize(swapGiftMessage);function swapGiftMessage(){if(CorraUI.viewportChanged()){if(CorraUI.isMobile()){$('#gift-options-cart').insertAfter($('#form-validate'));}else{$('.cart-options').prepend($('#gift-options-cart'));}}}
jQuery('.promo-apply-msgs').addClass('no-display').removeClass('message-error error message');jQuery('.promo-apply-msgs').text('');if(sessionStorage&&sessionStorage.getItem('promoCoupon')){require(['Magento_Checkout/js/model/quote'],function(quote){function getAppliedCoupon(s,word){return new RegExp('\\b'+word+'\\b','i').test(s);}
setTimeout(function(){var couponList=quote.totals().coupon_code;var appliedCoupon=sessionStorage.getItem('promoCoupon');if(getAppliedCoupon(couponList,appliedCoupon)){jQuery('.promo-apply-msgs').removeClass('message-error error message');jQuery('.promo-apply-msgs').text('');}else{jQuery('.promo-apply-msgs').addClass('message-error error message');jQuery('.promo-apply-msgs').text('The promotion code "'+appliedCoupon+'" is invalid or your order does not meet the promotion requirements');}
jQuery('.promo-apply-msgs').removeClass('no-display');if(CorraUI.isMobile()){var scrollVal=jQuery('#block-discount').offset().top-30;}else{var scrollVal=jQuery('.cart-summary').offset().top-180;}
jQuery("body, html").scrollTop(scrollVal);fireEvent(document.getElementById("discount-title"),"click");setTimeout(function(){if(jQuery('#block-discount .content').is(':hidden')){fireEvent(document.getElementById("discount-title"),"click");}},600);setTimeout(function(){if(jQuery('#block-discount .content').is(':hidden')){fireEvent(document.getElementById("discount-title"),"click");}
if(CorraUI.isMobile()){jQuery("body, html").scrollTop(jQuery('#block-discount').offset().top-30);}},1500);setTimeout(function(){if(jQuery('#block-discount .content').is(':hidden')){fireEvent(document.getElementById("discount-title"),"click");}
jQuery('.page.messages .messages .message').each(function(){var getTxt=jQuery(this).find('div').text();var getCoupon=getTxt.match(/"(.*?)"/);if(!getCoupon){getCoupon=getTxt.match(/Coupon\Wcode\(s\)\Wnot\Wvalid\:\W([^\W]*).*?/);}
if(!getCoupon||typeof getCoupon[1]==='undefined'){return;}
if(getAppliedCoupon(couponList,getCoupon[1])){jQuery(this).remove();}else if(getAppliedCoupon(appliedCoupon,getCoupon[1])){jQuery(this).remove();}else if(appliedCoupon==getCoupon[1]){jQuery(this).remove();}});sessionStorage.removeItem('promoCoupon');jQuery('.page.messages').addClass('show');},3000);},500);});}else{jQuery('.page.messages').addClass('show');}}
jQuery('body').delegate('#checkout-shipping-method-load .col.col-method','touchstart',function(){jQuery(this).find('input[type="radio"]').removeAttr('disabled');})
jQuery('body').delegate('#checkout-shipping-method-load .col.col-method','mouseover',function(){jQuery(this).find('input[type="radio"]').removeAttr('disabled');})
$(document).delegate('#search','focus',function(){if($(window).width()<768){$('html,body').scrollTop(0);}})
viewportCallbacks.init();$('body').lazy({selector:'#maincontent .lazy-image'});});});