define(["./kernel","./lang","../sniff"],function(a,h,c){var d={global:a.global,doc:a.global.document||null,body:function(b){b=b||a.doc;return b.body||b.getElementsByTagName("body")[0]},setContext:function(b,c){a.global=d.global=b;a.doc=d.doc=c},withGlobal:function(b,c,f,k){var e=a.global;try{return a.global=d.global=b,d.withDoc.call(null,b.document,c,f,k)}finally{a.global=d.global=e}},withDoc:function(b,e,f,k){var h=d.doc,n=c("quirks"),p=c("ie"),g,l;try{a.doc=d.doc=b;a.isQuirks=c.add("quirks","BackCompat"==
a.doc.compatMode,!0,!0);if(c("ie")&&(l=b.parentWindow)&&l.navigator){var m=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0;(g=b.documentMode)&&5!=g&&Math.floor(m)!=g&&(m=g);a.isIE=c.add("ie",m,!0,!0)}f&&"string"==typeof e&&(e=f[e]);return e.apply(f,k||[])}finally{a.doc=d.doc=h,a.isQuirks=c.add("quirks",n,!0,!0),a.isIE=c.add("ie",p,!0,!0)}}};c("extend-dojo")&&h.mixin(a,d);return d});
