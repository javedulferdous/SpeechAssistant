define([],function(){function n(f,a,h,k){var c=f[a],g="around"==a;if(g){var d=h(function(){return c.advice(this,arguments)});var e={remove:function(){d&&(d=f=h=null)},advice:function(e,b){return d?d.apply(e,b):c.advice(e,b)}}}else e={remove:function(){if(e.advice){var d=e.previous,b=e.next;b||d?(d?d.next=b:f[a]=b,b&&(b.previous=d)):delete f[a];f=h=e.advice=null}},id:m++,advice:h,receiveArguments:k};if(c&&!g)if("after"==a){for(;c.next&&(c=c.next););c.next=e;e.previous=c}else"before"==a&&(f[a]=e,e.next=
c,c.previous=e);else f[a]=e;return e}function l(f){return function(a,h,k,c){var g=a[h],d;g&&g.target==a||(a[h]=d=function(){for(var e=m,a=arguments,b=d.before;b;)a=b.advice.apply(this,a)||a,b=b.next;if(d.around)var c=d.around.advice(this,a);for(b=d.after;b&&b.id<e;){if(b.receiveArguments){var f=b.advice.apply(this,a);c=f===p?c:f}else c=b.advice.call(this,c,a);b=b.next}return c},g&&(d.around={advice:function(a,c){return g.apply(a,c)}}),d.target=a);a=n(d||g,f,k,c);k=null;return a}}var p,m=0,q=l("after"),
r=l("before"),t=l("around");return{before:r,around:t,after:q}});
