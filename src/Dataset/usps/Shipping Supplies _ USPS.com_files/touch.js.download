define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(E,p,F,G,H,e,m,q,t,d){function k(a,b,c){return u&&c?function(b,a){return e(b,c,a)}:r?function(v,c){var I=e(v,b,function(b){c.call(this,b);l=(new Date).getTime()}),d=e(v,a,function(b){(!l||(new Date).getTime()>l+1E3)&&c.call(this,b)});return{remove:function(){I.remove();d.remove()}}}:function(b,c){return e(b,a,c)}}function J(a){do if(void 0!==a.dojoClick)return a.dojoClick;
while(a=a.parentNode)}function w(a,b,c){if(f=!a.target.disabled&&J(a.target))x=a.target,y=a.changedTouches?a.changedTouches[0].pageX:a.clientX,z=a.changedTouches?a.changedTouches[0].pageY:a.clientY,A=("object"==typeof f?f.x:"number"==typeof f?f:0)||4,B=("object"==typeof f?f.y:"number"==typeof f?f:0)||4,C||(a=function(b){d.doc.addEventListener(b,function(a){a._dojo_click||!((new Date).getTime()<=D+1E3)||"INPUT"==a.target.tagName&&G.contains(a.target,"dijitOffScreen")||(a.stopPropagation(),a.stopImmediatePropagation&&
a.stopImmediatePropagation(),"click"!=b||"INPUT"==a.target.tagName&&"radio"!=a.target.type&&"checkbox"!=a.target.type||"TEXTAREA"==a.target.tagName||"AUDIO"==a.target.tagName||"VIDEO"==a.target.tagName||a.preventDefault())},!0)},C=!0,d.doc.addEventListener(b,function(a){f=f&&(a.changedTouches?a.changedTouches[0].target:a.target)==x&&Math.abs((a.changedTouches?a.changedTouches[0].pageX:a.clientX)-y)<=A&&Math.abs((a.changedTouches?a.changedTouches[0].pageY:a.clientY)-z)<=B},!0),d.doc.addEventListener(c,
function(a){if(f){D=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=F.byId(b.getAttribute("for"))||b);var c=a.changedTouches?a.changedTouches[0]:a,d=document.createEvent("MouseEvents");d._dojo_click=!0;d.initMouseEvent("click",!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){e.emit(b,"click",d)},0)}},!0),a("click"),a("mousedown"),a("mouseup"))}var r=m("touch"),n=5>m("ios"),u=navigator.pointerEnabled||navigator.msPointerEnabled,
g=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=navigator.pointerEnabled?"pointer"+b:"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1);return a}(),C,f,x,y,z,A,B,D,l,h;r&&(u?t(function(){d.doc.addEventListener(g.down,function(a){w(a,g.move,g.up)},!0)}):t(function(){function a(a){var b=H.delegate(a,{bubbles:!0});6<=m("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=
a.targetTouches);return b}h=d.body();d.doc.addEventListener("touchstart",function(a){l=(new Date).getTime();var b=h;h=a.target;e.emit(b,"dojotouchout",{relatedTarget:h,bubbles:!0});e.emit(h,"dojotouchover",{relatedTarget:b,bubbles:!0});w(a,"touchmove","touchend")},!0);e(d.doc,"touchmove",function(b){l=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(n?0:d.global.pageXOffset),b.pageY-(n?0:d.global.pageYOffset));c&&(h!==c&&(e.emit(h,"dojotouchout",{relatedTarget:c,bubbles:!0}),e.emit(c,"dojotouchover",
{relatedTarget:h,bubbles:!0}),h=c),e.emit(c,"dojotouchmove",a(b))||b.preventDefault())});e(d.doc,"touchend",function(b){l=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(n?0:d.global.pageXOffset),b.pageY-(n?0:d.global.pageYOffset))||d.body();e.emit(c,"dojotouchend",a(b))})}));p={press:k("mousedown","touchstart",g.down),move:k("mousemove","dojotouchmove",g.move),release:k("mouseup","dojotouchend",g.up),cancel:k(q.leave,"touchcancel",r?g.cancel:null),over:k("mouseover","dojotouchover",g.over),
out:k("mouseout","dojotouchout",g.out),enter:q._eventHandler(k("mouseover","dojotouchover",g.over)),leave:q._eventHandler(k("mouseout","dojotouchout",g.out))};m("extend-dojo")&&(E.touch=p);return p});
