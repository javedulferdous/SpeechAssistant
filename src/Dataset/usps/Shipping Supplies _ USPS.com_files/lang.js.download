define(["./kernel","../has","../sniff"],function(k,l){l.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var m=l("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],q=m.length,n=function(a,c,b){var d=0,g=k.global;if(!b)if(a.length){var e=a[d++];try{b=k.scopeMap[e]&&k.scopeMap[e][1]}catch(f){}b=b||(e in g?g[e]:c?g[e]={}:void 0)}else return g;for(;b&&(e=a[d++]);)b=e in b?b[e]:
c?b[e]={}:void 0;return b},r=Object.prototype.toString,p=function(a,c,b){return(b||[]).concat(Array.prototype.slice.call(a,c||0))},t=/\{([^\}]+)\}/g,d={_extraNames:m,_mixin:function(a,c,b){var d,g={};for(f in c){var e=c[f];f in a&&(a[f]===e||f in g&&g[f]===e)||(a[f]=b?b(e):e)}if(l("bug-for-in-skips-shadowed")&&c)for(d=0;d<q;++d){var f=m[d];e=c[f];f in a&&(a[f]===e||f in g&&g[f]===e)||(a[f]=b?b(e):e)}return a},mixin:function(a,c){a||(a={});for(var b=1,h=arguments.length;b<h;b++)d._mixin(a,arguments[b]);
return a},setObject:function(a,c,b){var d=a.split(".");a=d.pop();return(b=n(d,!0,b))&&a?b[a]=c:void 0},getObject:function(a,c,b){return n(a.split("."),c,b)},exists:function(a,c){return void 0!==d.getObject(a,!1,c)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===r.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||d.isArray(a)||
d.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!d.isString(a)&&!d.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(d.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!d.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,c){for(var b=1,h=arguments.length;b<h;b++)d._mixin(a.prototype,arguments[b]);return a},_hitchArgs:function(a,c){var b=d._toArray(arguments,2),h=d.isString(c);return function(){var g=d._toArray(arguments),e=h?(a||
k.global)[c]:c;return e&&e.apply(a||this,b.concat(g))}},hitch:function(a,c){if(2<arguments.length)return d._hitchArgs.apply(k,arguments);c||(c=a,a=null);if(d.isString(c)){a=a||k.global;if(!a[c])throw['lang.hitch: scope["',c,'"] is null (scope="',a,'")'].join("");return function(){return a[c].apply(a,arguments||[])}}return a?function(){return c.apply(a,arguments||[])}:c},delegate:function(){function a(){}return function(c,b){a.prototype=c;c=new a;a.prototype=null;b&&d._mixin(c,b);return c}}(),_toArray:l("ie")?
function(){function a(a,b,d){d=d||[];for(b=b||0;b<a.length;b++)d.push(a[b]);return d}return function(c){return(c.item?a:p).apply(this,arguments)}}():p,partial:function(a){return d.hitch.apply(k,[null].concat(d._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||d.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var c;if(d.isArray(a)){var b=[];var h=0;for(c=a.length;h<
c;++h)h in a&&b.push(d.clone(a[h]))}else b=a.constructor?new a.constructor:{};return d._mixin(b,a,d.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,c,b){return a.replace(b||t,d.isFunction(c)?c:function(a,b){return d.getObject(b,!1,c)})}};l("extend-dojo")&&d.mixin(k,d);return d});
