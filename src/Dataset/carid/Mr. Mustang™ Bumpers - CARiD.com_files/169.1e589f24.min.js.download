(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{1099:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),i=a(1),n=a(12),s=a(26);function d(e,t,a,r,o,i,n){try{var s=e[i](n),d=s.value}catch(e){return void a(e)}s.done?t(d):Promise.resolve(d).then(r,o)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var i=e.apply(t,a);function n(e){d(i,r,o,n,s,"next",e)}function s(e){d(i,r,o,n,s,"throw",e)}n(void 0)}))}}var c=function(){var e=o()(".js-prod-reviews-next").hide(),t=o()(".js-reviews-sort"),a=o()(".js-prod-reviews-list"),r=o()(".js-reviews-preloader"),s=parseInt(t.data("limit")||10,10),d=function(){return a.find(".prod-review").length||0};r.removeClass("nobg hidden");var p={productType:t.data("prod-type"),productId:t.data("prod-id"),sortType:t.val(),limit:s,offset:d(),domainId:t.data("domain-id")};n.default.request("/reviews/get_more_reviews",!1,"GET",p).then((function(i){i&&(a.append(o()(i.html)),r.addClass("nobg hidden"),o()(".js-reviews-range").text("1-".concat(d())),d()>=parseInt(t.data("total"),10)?e.hide():e.show())})).catch((function(t){r.addClass("nobg hidden"),e.show(),i.a.modalMessage.asyncError(t)}))};i.a.ready((function(){o()(".js-reviews-sort").on("change",p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o()(".js-prod-reviews-list"),e.next=3,t.find(".prod-review").remove();case 3:c();case 4:case"end":return e.stop()}}),e)})))),o()(".js-prod-reviews-next").on("click",c),o()(".js-prod-rvw-view-more-old").on("click",(function(e){var t=o()(e.currentTarget).hide(),a=t.data("page-type"),r=["manufacturer","ptype_group_traditional","ptype_group_purpose","ptype","state","city","body_type","all","super_product","product","mpn_product","make_ptype_group_traditional","make_ptype_group_entrance","make_ptype","make_model_ptype_group_traditional","make_model_ptype_group_entrance","make_model_ptype","make_model_year_ptype_group_traditional","make_model_year_ptype","make_model_year_ptype_group_entrance","make_pstype_traditional","make_model_pstype_traditional","make_model_year_pstype_traditional","oe_product"],i=t.parents(".js-review-holder").find(".prod_rvw_section"),s=function(){return i.find(".prod_rvw[data-offset_date]")};o()(".js-prod-reviews-list").length&&(i=o()(".js-prod-reviews-list"),s=function(){return i.find(".prod-review[data-offset_date]")});var d=function(){return s().last().data("offset_date")},p=parseInt(t.data("offset"),10),c="",l=!1,u=0,_=function(e){var t=e._that,a=e.getLastReviewDate,r=e.offset,o=e.reviewListPageTypes,i=e.pageType,n={offset_date:t.data("offset_date")||a(),offset:r};switch(t.data("fields")&&(n.fields={},t.data("field-size")&&(n.fields.size=t.data("field-size")),t.data("field-width")&&(n.fields.width=t.data("field-width")),t.data("field-ratio")&&(n.fields.ratio=t.data("field-ratio")),t.data("field-diameter")&&(n.fields.diameter=t.data("field-diameter"))),o.includes(i)?(n.type=t.data("type"),n.id=t.data("id")):(n.reviews=t.data("reviews"),n.pstypes=t.data("pstypes")),i){case"manufacturer":n.action="getManufacturerReviews";break;case"make_ptype_group_traditional":case"make_ptype_group_entrance":case"make_ptype":case"make_model_ptype_group_traditional":case"make_model_ptype_group_entrance":case"make_model_ptype":case"make_model_year_ptype_group_traditional":case"make_model_year_ptype":case"make_model_year_ptype_group_entrance":case"make_pstype_traditional":case"make_model_pstype_traditional":case"make_model_year_pstype_traditional":case"ptype_group_traditional":case"ptype":n.action="getReviewsByUrlId";break;case"ptype_group_purpose":n.action="getPDepNonGeneratedReviews";break;case"state":n.action="getGeoReviewsState";break;case"city":n.action="getGeoReviewsCity";break;case"body_type":n.action="getReviewsByBodyTypeOffsetLimit";break;case"all":n.action="getReviews";break;case"super_product":n.action="getSuperProductReviews",n.order=t.data("sortby");break;case"product":n.action="getProductReviews",n.order=t.data("sortby");break;case"mpn_product":n.action="getMpnProductReviews",n.order=t.data("sortby");break;case"oe_product":n.action="getOeProductReviews";break;case"get_reviews_by_products":case"get_reviews_by_manufacturers":n.action=i;break;default:n.action="getReviewsByUrlId"}return n}({_that:t,offset:p,pageType:a,reviewListPageTypes:r,getLastReviewDate:d});r.includes(a)&&(c="/submit_review.php",u=s().length,l=!0),t.next(".result_preloader").removeClass("nobg hidden"),_.action&&n.default.request(c,!1,"POST",_,!0).then((function(e){if(t.next(".result_preloader").addClass("nobg hidden"),""!==e.toString().trim()){var a=parseInt(t.data("total"),10);if(i.append(e),l)p=s().length;else{var r=parseInt(t.data("limit"),10);p+=r+u}a>p&&t.data("offset_date",d()).data("offset",p).show()}}))})),o()(".js-prod-rvw-expand").on("click",(function(){o()(".prod_rvw, .prod-review, .js-prod-rvw-view-more-old, .js-prod-reviews-next, .js-prod-rvw-view-all").removeClass("hidden"),o()(".js-reviews-template").each((function(){o()(this).replaceWith(o()(this).html())})),o()(this).addClass("hidden")}));var e=!0;o()(".js-write-prod-review").on("click",(function(t){if(e){e=!1;var r,n=o()(t.currentTarget).data("product-id");if(i.a.device.support.sessionStorage){var d="unfinishedReviewData_".concat(n);sessionStorage.getItem(d)&&(r=JSON.parse(sessionStorage.getItem(d)),sessionStorage.removeItem(d))}a.e(90).then(a.bind(null,672)).then((function(){Object(s.b)({gboxParams:{boxShadow:!1,maxWidth:1080,openInNewModal:!0,overlayClose:!1,width:"100%"},preactParams:{asyncModule:function(){return Promise.all([a.e(1),a.e(7),a.e(132)]).then(a.bind(null,731))},props:{inPopup:!0,propProductId:n,unfinishedReviewData:r}},onComplete:function(){e=!0}})}))}return!0})),o()(document).on("click",".js-add-review-submit",(function(e){e.preventDefault()})),function(){if(i.a.reviewStatus){var e=i.a.reviewStatus,t=e.status,r=e.message;"success"===t?i.a.modalMessage.show("Thank you! We'll email you when your review is posted."):"error"===t&&i.a.modalMessage.asyncError(r)}var n=o()(".js-add-review-container");n.length&&a.e(90).then(a.bind(null,672)).then((function(){Object(s.c)({asyncModule:function(){return Promise.all([a.e(1),a.e(7),a.e(132)]).then(a.bind(null,731))},holder:n.get(0)})}))}()}))}}]);