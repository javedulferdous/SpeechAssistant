(window.discovery_pages_mcom_jsonp=window.discovery_pages_mcom_jsonp||[]).push([["initAdaptiveHeader"],{f028bb8a:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=l(o("8fa5214a")),n=l(o("3ebdffc6")),d=l(o("273aba06")),p=l(o("babf4e12")),r=l(o("52bce46f")),c=l(o("e4528fe3")),s=l(o("5900f9c4"));function l(e){return e&&e.__esModule?e:{default:e}}var u="Radical",v=void 0,f=void 0,m={},y=void 0,w="",h=function(e){return e&&"string"==typeof e?"radical"===e.toLowerCase()?"Compact":"compact"===e.toLowerCase()?u:"":""},C=function(e){"string"!=typeof e||"compact"!==e.toLowerCase()&&"radical"!==e.toLowerCase()||(f=(0,a.default)("header[data-uri]"),v=(0,a.default)("body"),"compact"===e?(0,a.default)(".redesign-header-overlay.radical").hide():(0,a.default)(".redesign-header-overlay.compact").hide(),f.addClass(e.toLowerCase()),f.removeClass(h(e).toLowerCase()),"radical"===e.toLowerCase()&&(f.removeClass("compact-redesign"),v.removeClass("compact-redesign")),w=f.attr("class"))},g=function(e,t){"compact"===t.viewType.toLowerCase()?Promise.all([o.e("app.common"),o.e("initCompactHeader")]).then(o.t.bind(null,"69ea1a07",7)).then((function(o){m[t.viewType]=o.default?o.default:o,m[t.viewType].init(e,t),m[t.viewType].render(C)})):o.e("initRadicalHeader").then(o.t.bind(null,"c7a9435a",7)).then((function(o){m[t.viewType]=o.default?o.default:o,m[t.viewType].init(e,t),m[t.viewType].render(C)}))},b=function(e,t,o){var d=o.IS_RENDERED?p.default.call(void 0,t):p.default.call(void 0,window),r="object"===(void 0===t?"undefined":i(t))?(0,c.default)(t):(0,c.default)({}),s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;g(e,s>=1024||d?{viewType:o.viewType,IS_RENDERED:!1,shippingCountry:o.shippingCountry,adaptiveNavData:t}:{viewType:"Compact",deviceIsDesktop:d,IS_RENDERED:!1,hostlink:o.hostlink,adaptiveNavData:r,killswitches:r&&r.meta&&r.meta.properties?r.meta.properties:{},shippingCountry:o.shippingCountry,shoppingMode:o.shoppingMode,serviceproxy:o.serviceproxy});var l=n.default.debounce((function(){(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>=1024&&d?w.toLowerCase().indexOf("compact")>-1&&(m.Compact.closeMenu(),m[u]?m[u].reRender(C):g(e,{viewType:o.viewType,IS_RENDERED:!1,shippingCountry:o.shippingCountry,adaptiveNavData:t})):w.toLowerCase().indexOf(u.toLowerCase())>-1&&(m.Compact?m.Compact.reRender(C):g(e,{viewType:"Compact",deviceIsDesktop:d,IS_RENDERED:!1,hostlink:o.hostlink,adaptiveNavData:r,killswitches:r&&r.meta&&r.meta.properties?r.meta.properties:{},shippingCountry:o.shippingCountry,shoppingMode:o.shoppingMode,serviceproxy:o.serviceproxy}))}),50);(0,a.default)(window).on("resize",l)};t.default={createViewAndRender:g,getOppositeView:h,init:function(e,t){var o=t,i=(0,a.default)("script[data-mcom-header-media]").html(),n=d.default.toObject((0,a.default)("script[data-mcom-header-menu-desktop]").html(),"[]"),c=(0,a.default)("script[data-mcom-header-meta]").html();if(f=(0,a.default)("header[data-uri]"),o.IS_RENDERED&&n.length)y={media:d.default.toObject(i,"{}"),menu:n,meta:c?d.default.toObject(c,"{}"):{context:{},properties:{}}},o.viewType="Radical",u=o.viewType,b(e,y,o);else{var l=p.default.call(void 0,window),v=l?"&_deviceType=desktop&viewType=Adaptive":"&_deviceType=phone&viewType=Compact&_application=mew&bypass_redirect=yes";(y=new Promise((function(e){a.default.ajax({url:o.serviceproxy+"?_regionCode="+o.shippingCountry+"&_shoppingMode="+o.shoppingMode+v,success:function(t){o.viewType="Radical",u=o.viewType,f.attr("class",(0,s.default)({context:{viewType:"Adaptive-"+o.viewType,deviceType:p.default.call(this,window)?"desktop":"phone"},properties:{}})),e(t)},error:function(){var t=l?o.viewType:"Compact";Promise.resolve((0,r.default)({viewType:t,regionCode:o.shippingCountry,shoppingMode:o.shoppingMode})).then((function(t){e(t)}))}})}))).then((function(t){b(e,t,o)}))}},setAdaptiveViews:b,toggleClass:C}}}]);
//# sourceMappingURL=discovery-pages-mcom.initAdaptiveHeader.261ec5f5a47749c4da6f.js.map