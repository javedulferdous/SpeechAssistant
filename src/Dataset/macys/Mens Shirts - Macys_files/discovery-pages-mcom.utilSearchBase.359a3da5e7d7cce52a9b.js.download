(window.discovery_pages_mcom_jsonp=window.discovery_pages_mcom_jsonp||[]).push([["utilSearchBase"],{"3daccd4f":function(e,a,t){var r=t("8fa5214a"),o=t("3ebdffc6"),n=t("287f9f6a"),s=t("4e3cb0c9"),c=t("12baac1e"),i=t("e25df25f"),l=t("85ea82c9"),h=t("2452fcf2"),p=t("edd1f19c"),u=t("aa461599"),d=t("8aa1de9e"),f=t("d3e378d5");e.exports={init:function(e,a,t){var m=e,v=r("header").data("hostlink")||"",g=m.pathName?m.pathName.split("/"):null,y={},w=h.buildQueryMap(),S=w.cm_sp,b=w.kws,C=w.ss,I=window.location.href;if(o.isUndefined(window.headerSSParam)||(w.ss=window.headerSSParam,C=window.headerSSParam),y.box=r("#globalSearchInputField"),y.container=r("#autosuggest"),y.searchSubmit=r("#searchSubmit"),y.display=function(e,t){y.container=r("#autosuggest"),y.container.html(e),!a.viewType||"default"!==a.viewType.toLowerCase()&&"adaptive"!==a.viewType.toLowerCase()&&"radical"!==a.viewType.toLowerCase()||f(y),y.container.show(),t()},u.init(y,a),void 0!==a.inbentaSearchEnabled&&"true"===String(a.inbentaSearchEnabled)&&s.detect([2197],(function(e){2197===e&&l.animatePlaceholder("#globalSearchInputField",{defaultText:"What are you looking for?",phrases:["Iâ€™m looking for a belt to match my winter boots","Show me top-rated high tech watches under $200","Do you have any formal dresses on sale?","Really soft sweatpants?"]})})),S&&b){var x=decodeURIComponent(b);y.box.val(x)}else null!=g&&g.length>3&&"shop"===g[1]&&"featured"===g[2]&&"true"===C&&!m.isDLP?(m.searchInput=g[3],y.box.val(decodeURIComponent(p.removeSpecialChars(m.searchInput).replace(/-/g," ").replace(/~~/g,"-")))):void 0!==m.searchKeyword&&m.searchKeyword.length&&-1===I.indexOf("/shop/featured/")&&(m.searchKeyword=decodeURIComponent(m.searchKeyword.replace(/~~/g,"-")),y.box.val(m.searchKeyword.toLowerCase()));t||i.makeClearable("globalSearchInputField",(function(){y.box.keyup()})),r("form[name='keywordSearch']").submit((function(e){if(d.init(),!t){var a=y.box.val();if(a=c.preventXss(a),c.attemptedScript(a))return r("#globalSearchInputField").val(""),!1;if(m.searchInput=a,p.checkForRestfulPatternRedirection(m)){var o=p.encodeSearchPhrase(m);if(e.preventDefault(),o.trim().length>0){var s=r("#autoCompleteText").val(),i=r("#lastSearchesText").val(),l=v+m.baseSearchUrl+"/"+o+"?ss=true";-1!==m.baseSearchUrl.indexOf("keyword")&&(l=v+m.baseSearchUrl+o),m.nlsQueryParam&&void 0!==m.nlsQueryParam&&""!==m.nlsQueryParam&&(l+="&ce="+m.nlsQueryParam),s?l+="&cm_kws_ac="+s:i&&(l+="&cm_kws_ls="+i),n.toHref(l)}}}}))}}},"85ea82c9":function(e,a,t){var r=t("8fa5214a"),o=t("3ebdffc6"),n={defaultText:"What are you looking for?",phrases:["Message 1","Message 2","Message 3"],startDelay:2e3,typeSpeed:50,pauseDelay:30};e.exports={animatePlaceholder:function(e,a){var t=a,s=r(e),c=[];function i(){s.attr("placeholder","")}function l(){function e(e){var a;c.push((a=e,function(){s.attr("placeholder",s.attr("placeholder")+a)}))}c=[];for(var a=0;a<t.phrases.length;a++){c.push(i),t.phrases[a].split("").forEach(e);for(var r=0;r<t.pauseDelay;r++)c.push(0)}c.push(l)}void 0===t&&(t={}),o.defaults(t,n),s.attr("placeholder",t.defaultText);setTimeout((function(){l();var e=setInterval((function(){var e=c.shift();e&&e()}),t.typeSpeed);s.focus((function(){clearInterval(e),c=[],s.attr("placeholder",t.defaultText)}))}),t.startDelay)}}},"8aa1de9e":function(e,a,t){var r=t("8fa5214a"),o={primaryKey:"CM_KWS",storage:window.sessionStorage,getCacheMap:function(){var e="",a={};return this.storage&&(e=this.storage.getItem(this.primaryKey)),e&&(a=this._parseParamString(e)),a},_parseParamString:function(e){var a=void 0,t=void 0;if(0===(t=String(e)).length)return{};t="#"===t.charAt(0)||"?"===t.charAt(0)?t.substr(1,t.length).split("&"):t.split("&");var r={},o={};for(a=0;a<t.length;a+=1)(o=t[a].split("="))[0]=o[0].toUpperCase(),r[o[0]]?"string"==typeof r[o[0]]?r[o[0]]=[r[o[0]],o[1]]:r[o[0]]=r[o[0]].concat(o[1]):r[o[0]]=o[1];return r},updateCache:function(e){this.storage.setItem(this.primaryKey,e.join("&"))},init:function(){var e=r("form[name='keywordSearch']").find(".globalSearchInputField").val(),a=r("#autoCompleteText").val();this.clearFromCache(),e&&(this.storeInCache("cm_kws",escape(e)),a&&this.storeInCache("cm_kws_ac",escape(a)))},storeInCache:function(e,a){var t=this.getCacheMap(),r=[];for(var o in e&&(t[e.toUpperCase()]=a),t)t[o]&&r.push(o.toLowerCase()+"="+t[o]);this.updateCache(r)},clearFromCache:function(){this.storage&&this.storage.removeItem(this.primaryKey)}};e.exports=o},edd1f19c:function(e,a,t){var r=t("3ebdffc6");e.exports={encodeSearchPhrase:function(e){var a=e;return a.searchInput=escape(a.searchInput.trim().toLowerCase()),this.encodeEscapeReservedChar(a).replace(/(%20)+/g,"-")},encodeEscapeReservedChar:function(e){var a=e.seoSplCharReplacementList,t="["+Object.keys(a).join("")+"]",r=new RegExp(t,"g"),o=e.searchInput.replace(r,(function(e){return a[e]}));return this.removeSpecialChars(o)},removeSpecialChars:function(e){return e.replace(/(%u)[A-Z\d]{4}/g,"")},checkForRestfulPatternRedirection:function(e){var a=e&&e.seoSplCharList?e.seoSplCharList.replace(/{|}/g,"").split(","):[],t=e.searchInput;return!r.any(a,(function(e){return e&&t.indexOf(e)>=0}))}}}}]);
//# sourceMappingURL=discovery-pages-mcom.utilSearchBase.359a3da5e7d7cce52a9b.js.map