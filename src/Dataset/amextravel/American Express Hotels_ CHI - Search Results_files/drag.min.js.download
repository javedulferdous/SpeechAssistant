window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpDragManager=function(){var x={},k=0,u=false,l=false,r,h="0.4.1",G="lpDragManager",v=!!window.addEventListener,b;function A(H){var I=m();x[I]=o(H);x[I].bindFunc=n(x[I]);E(x[I]);F(x[I].drag);return I}function e(I){if(x[I]){s(x[I]);for(var H in x[I]){if(x[I].hasOwnProperty(H)){x[I][H]=null;delete x[I][H]}}delete x[I];return true}else{return false}}function w(){}function i(){}function q(J,I,K,H){if(J&&v){J.addEventListener(I,K,H===true)}else{if(J&&J.attachEvent){J.attachEvent("on"+I,K)}}}function C(I,H,J){if(I&&v){I.removeEventListener(H,J)}else{if(I&&I.detachEvent){I.detachEvent("on"+H,J)}}}function F(I){var H=D(I);if(H.position!=="absolute"&&H.position!=="fixed"){I.style.position="absolute"}}function o(K){var I=K.drag;var J=K.anchor||I;var H=K.parent||I.parentNode||document.body;return{anchor:J,drag:I,parent:H,onDrag:K.onDrag,onDragEnd:K.onDragEnd,horizontal:K.horizontal===true,vertical:K.vertical===true,limitToParent:K.containParent===true}}function E(H){q(H.anchor,"mousedown",H.bindFunc)}function s(H){C(H.anchor,"mousedown",H.bindFunc)}function g(H){C(H.anchor,"mouseup",B)}function n(H){return function(I){I=I||event;q(H.anchor,"mouseup",B);H.anchorData=a(H.anchor);H.parentData=a(H.parent);H.dragElementData=a(H.drag);H.diff={left:I.clientX-H.anchorData.left,top:I.clientY-H.anchorData.top};H.newDrag=true;r=H;b=t();u=true;return false}}function t(){var H={"*,body,.lpDragActive":{"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none","-o-user-select":"none"},"html *::selection,body *::selection,button::selection,body::selection,*::selection":{background:"transparent",color:"inherit"}};document.body.setAttribute("unselectable","on");return d(H)}function p(H){if(b){document.head.removeChild(b);b=null}document.body.removeAttribute("unselectable")}function d(L){if(v){var K=document.createElement("style");var H="";for(var J in L){H+=J;for(var I in L[J]){H+="{"+I+":"+L[J][I]+";}"}}K.appendChild(document.createTextNode(H));(document.head||document.getElementsByTagName("head")[0]).appendChild(K);return K}return null}q(document,"mousemove",function(J){var I,H;if(u&&r){l=false;J=J||event;if(r.horizontal){I=c(J)}if(r.vertical){H=f(J)}y(H,I);if(r.newDrag===true){setTimeout(function(){if(r){j(r.onDrag,r,r.context)}},0);r.newDrag=false}if(v&&J.which!=1){l=true}if(r&&l){B()}return false}});q(document,"mouseup",function(H){if(u&&r){B()}});function c(I){var H=(I.clientX-r.diff.left);if(H>(r.parentData.width-r.dragElementData.width)){H=r.parentData.width-r.dragElementData.width}if(H<r.parentData.left){H=r.parentData.left}if(H+r.dragElementData.width>(r.parentData.width+r.parentData.left)||I.clientX<0){l=true}return H}function f(I){var H=(I.clientY-r.diff.top);if(H>(r.parentData.top+r.parentData.height-r.dragElementData.height)){H=r.parentData.top+r.parentData.height-r.dragElementData.height}if(H<r.parentData.top){H=r.parentData.top}if((H+r.dragElementData.height)>r.parentData.height||I.clientY<0){}return H}function y(I,H){if(r.horizontal){r.drag.style.left=H+"px";r.drag.style.right="auto"}if(r.vertical){r.drag.style.top=I+"px";r.drag.style.bottom="auto"}}function B(){if(r&&r.onDragEnd){var H=a(r.drag);j(r.onDragEnd,H,r.context);H=null;p(r);g(r)}u=false;r=null}function D(H){if(document.defaultView&&document.defaultView.getComputedStyle){return document.defaultView.getComputedStyle(H)}else{if(H.currentStyle){return H.currentStyle}else{return H.style}}}function a(N){var L,H,J=false;var M=N.getBoundingClientRect();var K=D(N);var I={right:z(K.borderRight),left:z(K.borderLeft),top:z(K.borderTop),bottom:z(K.borderBottom)},O={right:z(K.marginRight),left:z(K.marginLeft),top:z(K.marginTop),bottom:z(K.marginBottom)};if(N===document.body){J=true;L=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;H=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}else{L=(N.clientWidth||M.width||0)+I.right+I.left+O.right+O.left;H=(N.clientHeight||M.width||0)+I.top+I.bottom+O.top+O.bottom}return{width:L,height:H,left:J?0:M.left,right:M.right,top:J?0:M.top,bottom:M.bottom,border:I,margin:O}}function z(I){var H=parseInt(I,10);return(isNaN(H)?0:H)}function m(){return(k++)+"_"+(new Date().getTime()+Math.floor(Math.random()*1000000))}function j(J,K,I){if(typeof J==="function"){try{J.call(I||null,K)}catch(H){}}}return{v:h,name:G,init:w,start:i,bind:A,unbind:e}};