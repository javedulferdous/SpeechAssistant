function __checkAndInitialize(t){triggermail.__tm_initialized||t>100||(triggermail.__initializeWithoutJQuery||window.jQuery?(triggermail.initialize(),triggermail.__tm_initialized=!0):setTimeout(__checkAndInitialize,100,t+1))}if(!window.hasOwnProperty("__tmClass")){!function(){var t=!1,e=/var xyz/.test(function(){})?/\b_super\b/:/[\D|\d]*/;this.__tmClass=function(){},window.__tmClass=this.__tmClass,__tmClass.extend=function(i){function r(){!t&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;t=!0;var a=new this;t=!1;for(var o in i)a[o]="function"==typeof i[o]&&"function"==typeof n[o]&&e.test(i[o])?function(t,e){return function(){var i=this._super;this._super=n[t];var r=e.apply(this,arguments);return this._super=i,r}}(o,i[o]):i[o];return r.prototype=a,r.prototype.constructor=r,r.extend=arguments.callee,window.__tmClass=r,r}}(),window._c2pService=window._c2pService||[],window.triggermail={config:{eventSource:"custom_integration",encodeCookie:!1}},window.console?void 0===window.console.debug&&(console.debug=function(){}):console={debug:function(){},error:function(){},log:function(){}},window.TM_API_HOST="api.bluecore.com/api",window.triggermail.lytics=[],triggermail.lytics.__SV=1.2,function(t){function e(){e.done||(e.done=!0,k=!0,h=!1,y.each(N,function(t){t._dom_loaded()}))}function i(){try{l.documentElement.doScroll("left")}catch(t){return void setTimeout(i,1)}e()}var r=Array.prototype,n=Object.prototype,a=r.slice,o=n.toString,c=n.hasOwnProperty,s=window.console,u=window.navigator,l=window.document,g=u.userAgent,p=["__mps","__mpa","__mpap","$people_distinct_id","__alias"],d=!1;try{var d=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}var f="https:"==l.location.protocol?"https://":"http://",m=t&&t.__SV||0,_=d,h=!_&&-1==g.indexOf("MSIE"),y={},v=!1,b={api_host:f+TM_API_HOST,cross_subdomain_cookie:!0,cookie_name:window.triggermail.custom_cookie_name||"",loaded:function(){},store_google:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,live_demo:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,ip:!0},k=!1;!function(){var t=r.forEach,e=r.indexOf,i=Array.isArray,n={},s=y.each=function(e,i,r){if(null!=e)if(t&&e.forEach===t)e.forEach(i,r);else if(e.length===+e.length){for(var a=0,o=e.length;a<o;a++)if(a in e&&i.call(r,e[a],a,e)===n)return}else for(var s in e)if(c.call(e,s)&&i.call(r,e[s],s,e)===n)return};y.addEvent=function(t,e,i,r){function n(t,e){return t?t.matches(e)?t:n(t.parentElement,e):null}if(window.jQuery)jQuery(t).on&&r?jQuery(t).on(e,r,i):jQuery(t)[e](i);else{Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var a;t.attachEvent?(a=t.attachEvent,e="on"+e):a=t.addEventListener;var o;o="string"==typeof t?l.querySelectorAll(t):[t];for(var c=0;c<o.length;c++)r?a.apply(o[c],[e,function(t){var e=t||window.event,a=n(e.target||e.srcElement,r);a&&i.call(a,t)}]):a.apply(o[c],[e,i.bind(o[c])])}},y.getJSON=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){if(i.status>=200&&i.status<400){var t=JSON.parse(i.responseText);e(t)}},i.send()},y.removeEvent=function(t,e,i){t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener(e,i)},y.extend=function(t){return s(a.call(arguments,1),function(e){for(var i in e)void 0!==e[i]&&(t[i]=e[i])}),t},y.isArray=i||function(t){return"[object Array]"===o.call(t)},y.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(t){return!1}},y.isArguments=function(t){return!(!t||!c.call(t,"callee"))},y.toArray=function(t){return t?t.toArray?t.toArray():y.isArray(t)?a.call(t):y.isArguments(t)?a.call(t):y.values(t):[]},y.values=function(t){var e=[];return null==t?e:(s(t,function(t){e[e.length]=t}),e)},y.identity=function(t){return t},y.include=function(t,i){var r=!1;return null==t?r:e&&t.indexOf===e?-1!=t.indexOf(i):(s(t,function(t){if(r||(r=t===i))return n}),r)},y.includes=function(t,e){return-1!==t.indexOf(e)}}();var w=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)};case 4:return function(i,r,n,a){return t.call(e,i,r,n,a)}}return function(){return t.apply(e,arguments)}},x=Math.pow(2,53)-1,O=function(t){return function(e){return null==e?void 0:e[t]}}("length"),E=function(t){var e=O(t);return"number"==typeof e&&e>=0&&e<=x},S=function(t,e,i){return null==t?y.identity:y.isFunction(t)?w(t,e,i):y.isObject(t)?y.matcher(t):y.property(t)};y.map=y.collect=function(t,e,i){e=S(e,i);for(var r=!E(t)&&y.keys(t),n=(r||t).length,a=Array(n),o=0;o<n;o++){var c=r?r[o]:o;a[o]=e(t[c],c,t)}return a},y.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t},y.isObject=function(t){return t===Object(t)&&!y.isArray(t)},y.isEmptyObject=function(t){if(y.isObject(t)){for(var e in t)if(c.call(t,e))return!1;return!0}return!1},y.isUndefined=function(t){return void 0===t},y.isString=function(t){return"[object String]"==o.call(t)},y.isDate=function(t){return"[object Date]"==o.call(t)},y.isNumber=function(t){return"[object Number]"==o.call(t)},y.encodeDates=function(t){return y.each(t,function(e,i){y.isDate(e)?t[i]=y.formatDate(e):y.isObject(e)&&(t[i]=y.encodeDates(e))}),t},y.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},y.strip_empty_properties=function(t){var e={};return y.each(t,function(t,i){y.isString(t)&&t.length>0&&(e[i]=t)}),e},y.truncate=function(t,e){var i;return"string"==typeof t?i=t.slice(0,e):y.isArray(t)?(i=[],y.each(t,function(t){i.push(y.truncate(t,e))})):y.isObject(t)?(i={},y.each(t,function(t,r){i[r]=y.truncate(t,e)})):i=t,i},y.trim=function(t){return String.prototype.trim?String(t).trim():this.replace(/^\s+|\s+$/g,"")},y.JSONEncode=function(){return function(t){var e=t,i=function(t){var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(t){var e=i[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},r=function(t,e){var n="",a=0,s="",u="",l=0,g=n,p=[],d=e[t];switch(typeof d){case"string":return i(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(n+="    ",p=[],"[object Array]"===o.apply(d)){for(l=d.length,a=0;a<l;a+=1)p[a]=r(a,d)||"null";return u=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+g+"]":"["+p.join(",")+"]",n=g,u}for(s in d)c.call(d,s)&&(u=r(s,d))&&p.push(i(s)+(n?": ":":")+u);return u=0===p.length?"{}":n?"{"+p.join(",")+g+"}":"{"+p.join(",")+"}",n=g,u}};return r("",{"":e})}}(),y.JSONDecode=function(){var t,e,i,r,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},o=function(r){return r&&r!==e&&a("Expected '"+r+"' instead of '"+e+"'"),e=i.charAt(t),t+=1,e},c=function(){var t,i="";for("-"===e&&(i="-",o("-"));e>="0"&&e<="9";)i+=e,o();if("."===e)for(i+=".";o()&&e>="0"&&e<="9";)i+=e;if("e"===e||"E"===e)for(i+=e,o(),"-"!==e&&"+"!==e||(i+=e,o());e>="0"&&e<="9";)i+=e,o();if(t=+i,isFinite(t))return t;a("Bad number")},s=function(){var t,i,r,c="";if('"'===e)for(;o();){if('"'===e)return o(),c;if("\\"===e)if(o(),"u"===e){for(r=0,i=0;i<4&&(t=parseInt(o(),16),isFinite(t));i+=1)r=16*r+t;c+=String.fromCharCode(r)}else{if("string"!=typeof n[e])break;c+=n[e]}else c+=e}a("Bad string")},u=function(){for(;e&&e<=" ";)o()},l=function(){switch(e){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}a("Unexpected '"+e+"'")},g=function(){var t=[];if("["===e){if(o("["),u(),"]"===e)return o("]"),t;for(;e;){if(t.push(r()),u(),"]"===e)return o("]"),t;o(","),u()}}a("Bad array")},p=function(){var t,i={};if("{"===e){if(o("{"),u(),"}"===e)return o("}"),i;for(;e;){if(t=s(),u(),o(":"),Object.hasOwnProperty.call(i,t)&&a('Duplicate key "'+t+'"'),i[t]=r(),u(),"}"===e)return o("}"),i;o(","),u()}}a("Bad object")};return r=function(){switch(u(),e){case"{":return p();case"[":return g();case'"':return s();case"-":return c();default:return e>="0"&&e<="9"?c():l()}},function(n){var o;return i=n,t=0,e=" ",o=r(),u(),e&&a("Syntax error"),o}}(),y.base64Encode=function(t){var e,i,r,n,a,o,c,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,g=0,p="",d=[];if(!t)return t;t=y.utf8Encode(t);do{e=t.charCodeAt(l++),i=t.charCodeAt(l++),r=t.charCodeAt(l++),s=e<<16|i<<8|r,n=s>>18&63,a=s>>12&63,o=s>>6&63,c=63&s,d[g++]=u.charAt(n)+u.charAt(a)+u.charAt(o)+u.charAt(c)}while(l<t.length);switch(p=d.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p},y.utf8Encode=function(t){t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var e,i,r,n="",a=0;for(e=i=0,a=t.length,r=0;r<a;r++){var o=t.charCodeAt(r),c=null;o<128?i++:c=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),null!==c&&(i>e&&(n+=t.substring(e,i)),n+=c,e=i=r+1)}return i>e&&(n+=t.substring(e,t.length)),n},y.UUID=function(){var t=function(){for(var t=1*new Date,e=0;t==1*new Date;)e++;return t.toString(16)+e.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},i=function(t){function e(t,e){var i,r=0;for(i=0;i<e.length;i++)r|=a[i]<<8*i;return t^r}var i,r,n=g,a=[],o=0;for(i=0;i<n.length;i++)r=n.charCodeAt(i),a.unshift(255&r),a.length>=4&&(o=e(o,a),a=[]);return a.length>0&&(o=e(o,a)),o.toString(16)};return function(){var r=(screen.height*screen.width).toString(16);return t()+"-"+e()+"-"+i()+"-"+r+"-"+t()}}(),y.isBlockedUA=function(){return!!/(google web preview|baiduspider|yandexbot)/i.test(g)},y.HTTPBuildQuery=function(t,e){var i,r,n=[];return void 0===e&&(e="&"),y.each(t,function(t,e){i=encodeURIComponent(t.toString()),r=encodeURIComponent(e),n[n.length]=r+"="+i}),n.join(e)},y.getQueryParam=function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",r=new RegExp(i),n=r.exec(t);return null===n||n&&"string"!=typeof n[1]&&n[1].length?"":decodeURIComponent(n[1]).replace(/\+/g," ")},y.cookie={get:function(t){for(var e=t+"=",i=l.cookie.split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e)){var a=n.substring(e.length,n.length);return triggermail.config.encodeCookie?y.cookie.decode(a):decodeURIComponent(a)}}return null},parse:function(t){var e;try{e=y.JSONDecode(y.cookie.get(t))||{}}catch(t){}return e},set:function(t,e,i,r){var n="",a="";if(r){var o=l.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),c=o?o[0]:"";n=c?"; domain=."+c:""}if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),a="; expires="+s.toGMTString()}e=triggermail.config.encodeCookie?y.cookie.encode(e):encodeURIComponent(e),l.cookie=t+"="+e+a+"; path=/"+n},remove:function(t,e){y.cookie.set(t,"",-1,e)},encode:function(t){return t=y.cookie._encoder.encode(t),t=t.replace(/=/g,""),t=encodeURIComponent(t),t.replace(/%/g,"-")},decode:function(t){return/^%7B%22.*%22%7D$/.test(t)?decodeURIComponent(t):(t=t.replace(/-/g,"%"),t=decodeURIComponent(t),t=y.cookie._encoder.decode(t))},_encoder:function(){function t(t){var e,r,n,a,o,c;for(n=t.length,r=0,e="";r<n;){if(a=255&t.charCodeAt(r++),r==n){e+=i.charAt(a>>2),e+=i.charAt((3&a)<<4),e+="==";break}if(o=t.charCodeAt(r++),r==n){e+=i.charAt(a>>2),e+=i.charAt((3&a)<<4|(240&o)>>4),e+=i.charAt((15&o)<<2),e+="=";break}c=t.charCodeAt(r++),e+=i.charAt(a>>2),e+=i.charAt((3&a)<<4|(240&o)>>4),e+=i.charAt((15&o)<<2|(192&c)>>6),e+=i.charAt(63&c)}return e}function e(t){var e,i,n,a,o,c,s;for(c=t.length,o=0,s="";o<c;){do{e=r[255&t.charCodeAt(o++)]}while(o<c&&-1==e);if(-1==e)break;do{i=r[255&t.charCodeAt(o++)]}while(o<c&&-1==i);if(-1==i)break;s+=String.fromCharCode(e<<2|(48&i)>>4);do{if(61==(n=255&t.charCodeAt(o++)))return s;n=r[n]}while(o<c&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(a=255&t.charCodeAt(o++)))return s;a=r[a]}while(o<c&&-1==a);if(-1==a)break;s+=String.fromCharCode((3&n)<<6|a)}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);return{encode:t,decode:e}}()},y.register_event=function(){function t(t,i,r){return function(n){var a=n;n=n||e(window.event);var o,c;void 0!==n&&(c=i.call(t,n)),y.isFunction(r)&&(o=r(a));var s=!0;return!1!==o&&!1!==c||(s=!1),s}}function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}var i=function(e,i,r,n){if(!e)return void A.error("No valid element provided to register_event");if(e.addEventListener&&!n)e.addEventListener(i,r,!1);else{var a="on"+i,o=e[a];e[a]=t(e,r,o)}};return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},i}(),y.dom_query=function(){function t(t){return t.all?t.all:t.getElementsByTagName("*")}function e(t,e){var i=" "+e+" ";return(" "+t.className+" ").replace(r," ").indexOf(i)>=0}function i(i){if(!l.getElementsByTagName)return new Array;for(var r,n=i.split(" "),a=new Array(l),o=0;o<n.length;o++)if(r=n[o].replace(/^\s+/,"").replace(/\s+$/,""),r.indexOf("#")>-1){var c=r.split("#"),s=c[0],u=c[1],g=l.getElementById(u);if(!g||s&&g.nodeName.toLowerCase()!=s)return new Array;a=new Array(g)}else if(r.indexOf(".")>-1){var c=r.split("."),s=c[0],p=c[1];s||(s="*");for(var d=new Array,f=0,m=0;m<a.length;m++){var _;_="*"==s?t(a[m]):a[m].getElementsByTagName(s);for(var h=0;h<_.length;h++)d[f++]=_[h]}a=new Array;for(var v=0,b=0;b<d.length;b++)d[b].className&&y.isString(d[b].className)&&e(d[b],p)&&(a[v++]=d[b])}else if(r.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var s=RegExp.$1,k=RegExp.$2,w=RegExp.$3,x=RegExp.$4;s||(s="*");for(var d=new Array,f=0,m=0;m<a.length;m++){var _;_="*"==s?t(a[m]):a[m].getElementsByTagName(s);for(var h=0;h<_.length;h++)d[f++]=_[h]}a=new Array;var O,v=0;switch(w){case"=":O=function(t){return t.getAttribute(k)==x};break;case"~":O=function(t){return t.getAttribute(k).match(new RegExp("\\b"+x+"\\b"))};break;case"|":O=function(t){return t.getAttribute(k).match(new RegExp("^"+x+"-?"))};break;case"^":O=function(t){return 0==t.getAttribute(k).indexOf(x)};break;case"$":O=function(t){return t.getAttribute(k).lastIndexOf(x)==t.getAttribute(k).length-x.length};break;case"*":O=function(t){return t.getAttribute(k).indexOf(x)>-1};break;default:O=function(t){return t.getAttribute(k)}}a=new Array,v=0;for(var b=0;b<d.length;b++)O(d[b])&&(a[v++]=d[b])}else{s=r;for(var d=new Array,f=0,m=0;m<a.length;m++)for(var _=a[m].getElementsByTagName(s),h=0;h<_.length;h++)d[f++]=_[h];a=d}return a}var r=/[\t\r\n]/g;return i}(),y.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",i={};return y.each(t,function(t){e=y.getQueryParam(l.URL,t),e.length&&(i[t]=e)}),i},searchEngine:function(t){return 0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(t){var e=y.info.searchEngine(t),i="yahoo"!=e?"q":"p",r={};if(null!==e){r.g_search_engine=e;var n=y.getQueryParam(t,i);n.length&&(r.mp_keyword=n)}return r},browser:function(){var t=g,e=u.vendor||"";return window.opera?y.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":y.includes(t,"Chrome")?"Chrome":y.includes(e,"Apple")?y.includes(t,"Mobile")?"Mobile Safari":"Safari":y.includes(t,"Android")?"Android Mobile":y.includes(t,"Konqueror")?"Konqueror":y.includes(t,"Firefox")?"Firefox":y.includes(t,"MSIE")?"Internet Explorer":y.includes(t,"Gecko")?"Mozilla":""},os:function(){var t=g;return/Windows/i.test(t)?/Phone/.test(t)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":""},device:function(){var t=g;return/iPhone/.test(t)?"iPhone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Windows Phone/i.test(t)?"Windows Phone":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return y.strip_empty_properties({os:y.info.os(),browser:y.info.browser(),device:y.info.device(),mp_lib:"web"})},people_properties:function(){return y.strip_empty_properties({$os:y.info.os(),$browser:y.info.browser()})},pageviewInfo:function(t){return y.strip_empty_properties({mp_page:t,mp_referrer:l.referrer,mp_browser:y.info.browser(),mp_platform:y.info.os()})}};var A={log:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s)try{s.log.apply(s,arguments)}catch(t){y.each(arguments,function(t){s.log(t)})}},error:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s){var t=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,t)}catch(e){y.each(t,function(t){s.error(t)})}}},critical:function(){if(!y.isUndefined(s)&&s){var t=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,t)}catch(e){y.each(t,function(t){s.error(t)})}}}},C=function(){};C.prototype.create_properties=function(){},C.prototype.event_handler=function(){},C.prototype.after_track_handler=function(){},C.prototype.init=function(t){return this.mp=t,this},C.prototype.track=function(t,e,i,r){var n=this,a=y.dom_query(t);return 0==a.length?void A.error("The DOM query ("+t+") returned 0 elements"):(y.each(a,function(t){y.register_event(t,this.override_event,function(t){var a={},o=n.create_properties(i,this),c=n.mp.get_config("track_links_timeout");n.event_handler(t,this,a),window.setTimeout(n.track_callback(r,o,a,!0),c),n.mp.track(e,o,n.track_callback(r,o,a))})},this),!0)},C.prototype.track_callback=function(t,e,i,r){r=r||!1;var n=this;return function(){i.callback_fired||(i.callback_fired=!0,t&&!1===t(r,e)||n.after_track_handler(e,i,r))}},C.prototype.create_properties=function(t,e){return"function"==typeof t?t(e):y.extend({},t)};var P=function(){this.override_event="click"};y.inherit(P,C),P.prototype.create_properties=function(t,e){var i=P.superclass.create_properties.apply(this,arguments);return e.href&&(i.url=e.href),i},P.prototype.event_handler=function(t,e,i){i.new_tab=2===t.which||t.metaKey||"_blank"===e.target,i.href=e.href,i.new_tab||t.preventDefault()},P.prototype.after_track_handler=function(t,e,i){e.new_tab||setTimeout(function(){window.location=e.href},0)};var j=function(){this.override_event="submit"};y.inherit(j,C),j.prototype.event_handler=function(t,e,i){i.element=e,t.preventDefault()},j.prototype.after_track_handler=function(t,e,i){setTimeout(function(){e.element.submit()},0)};var T=function(t){this.props={},this.campaign_params_saved=!1,t.cookie_name?this.name="mp_"+t.cookie_name:this.name="mp_"+t.token+"_mixpanel",this.load(),this.update_config(t),this.upgrade(t),this.save()};T.prototype.properties=function(){var t={};return y.each(this.props,function(e,i){y.include(p,i)||(t[i]=e)}),t},T.prototype.load=function(){if(!this.disabled){var t=y.cookie.parse(this.name);t&&(this.props=y.extend({},t))}},T.prototype.upgrade=function(t){var e,i,r=t.upgrade;r&&(e="mp_super_properties","string"==typeof r&&(e=r),i=y.cookie.parse(e),y.cookie.remove(e),y.cookie.remove(e,!0),i&&(this.props=y.extend(this.props,i.all,i.events))),t.cookie_name||"mixpanel"===t.name||(e="mp_"+t.token+"_"+t.name,(i=y.cookie.parse(e))&&(y.cookie.remove(e),y.cookie.remove(e,!0),this.register_once(i)))},T.prototype.save=function(){this.disabled||y.cookie.set(this.name,y.JSONEncode(this.props),this.expire_days,this.cross_subdomain)},T.prototype.remove=function(){y.cookie.remove(this.name,!1),y.cookie.remove(this.name,!0)},T.prototype.clear=function(){this.remove(),this.props={}},T.prototype.register_once=function(t,e,i){return!!y.isObject(t)&&(void 0===e&&(e="None"),this.expire_days=void 0===i?this.default_expiry:i,y.each(t,function(t,i){this.props[i]&&this.props[i]!==e||(this.props[i]=t)},this),this.save(),!0)},T.prototype.register=function(t,e){return!!y.isObject(t)&&(this.expire_days=void 0===e?this.default_expiry:e,y.extend(this.props,t),this.save(),!0)},T.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save())},T.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(y.info.campaignParams()),this.campaign_params_saved=!0)},T.prototype.update_search_keyword=function(t){this.register(y.info.searchInfo(t))},T.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:y.info.referringDomain(t)||"$direct"},"")},T.prototype.get_referrer_info=function(){return y.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},T.prototype.safe_merge=function(t){return y.each(this.props,function(e,i){i in t||(t[i]=e)}),t},T.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie)},T.prototype.set_disabled=function(t){this.disabled=t,this.disabled&&this.remove()},T.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},T.prototype.get_cross_subdomain=function(){return this.cross_subdomain},T.prototype._add_to_people_queue=function(t,e){var i=this._get_queue_key(t),r=e[t],n=this._get_or_create_queue("$set"),a=this._get_or_create_queue("$add"),o=this._get_or_create_queue("$append",[]);"__mps"===i?(y.extend(n,r),this._pop_from_people_queue("$add",r)):"__mpa"===i?y.each(r,function(t,e){e in n?n[e]+=t:(e in a||(a[e]=0),a[e]+=t)},this):"__mpap"===i&&o.push(r),A.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),A.log(e),this.save()},T.prototype._pop_from_people_queue=function(t,e){var i=this._get_queue(t);y.isUndefined(i)||(y.each(e,function(t,e){delete i[e]},this),this.save())},T.prototype._get_queue_key=function(t){return"$set"===t?"__mps":"$add"===t?"__mpa":"$append"===t?"__mpap":void A.error("Invalid queue:",t)},T.prototype._get_queue=function(t){return this.props[this._get_queue_key(t)]},T.prototype._get_or_create_queue=function(t,e){var i=this._get_queue_key(t),e=y.isUndefined(e)?{}:e;return this.props[i]||(this.props[i]=e)};var I=function(e,i,r){var n,a="triggermail.lytics"===r?t:t[r];return a&&!y.isArray(a)?void A.error("You have already initialized "+r):(n=new L,n._init(e,i,r),n.people=new U,n.people._init(n),v=v||n.get_config("debug"),y.isUndefined(a)||(n._execute_array.call(n.people,a.people),n._execute_array(a)),n)},L=function(){};L.prototype.init=function(e,i,r){if(void 0===r)return void A.error("You must name your new library: init(token, config, name)");if("triggermail.lytics"===r)return void A.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");var n=I(e,i,r);return t[r]=n,n._loaded(),n},L.prototype._init=function(t,e,i){this.__loaded=!0,this.config={},this.set_config(y.extend({},b,e,{name:i,token:t,callback_fn:("triggermail.lytics"===i?i:"triggermail.lytics."+i)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new T(this.config),this.register_once({distinct_id:y.UUID()},"")},L.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},L.prototype._dom_loaded=function(){y.each(this.__dom_loaded_queue,function(t){this._track_dom.apply(this,t)},this),y.each(this.__request_queue,function(t){this._send_request.apply(this,t)},this),delete this.__dom_loaded_queue,delete this.__request_queue},L.prototype._track_dom=function(t,e){if(this.get_config("img"))return A.error("You can't use DOM tracking functions with img = true."),!1;if(!k)return this.__dom_loaded_queue.push([t,e]),!1;var i=(new t).init(this);return i.track.apply(i,e)},L.prototype._prepare_callback=function(t,e){if(y.isUndefined(t))return null;if(_){return function(i){t(i,e)}}var i=this._jsc,r=""+Math.floor(1e8*Math.random()),n=this.get_config("callback_fn")+'["'+r+'"]';return i[r]=function(n){delete i[r],t(n,e)},n},L.prototype._send_request=function(t,e,i){if(h)return void this.__request_queue.push(arguments);var r=this.get_config("verbose");if(this.get_config("test")&&(e.test=1),r&&(e.verbose=1),this.get_config("img")&&(e.img=1),i&&!_&&(e.callback=i),e.ip=this.get_config("ip")?1:0,e._=(new Date).getTime().toString(),"img"in e){var n=l.createElement("img");n.src=t,l.body.appendChild(n)}else if(_){var a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.withCredentials=!0,a.onreadystatechange=function(t){if(4===a.readyState)if(200===a.status||202===a.status)i&&i(r?y.JSONDecode(a.responseText):Number(a.responseText));else{var e="Bad HTTP status: "+a.status+" "+a.statusText;A.error(e),i&&i(r?{status:0,error:e}:0)}},a.send(y.HTTPBuildQuery(e))}else{t+="?"+y.HTTPBuildQuery(e);var o=l.createElement("script");o.type="text/javascript",o.async=!0,o.defer=!0,o.src=t;var c=l.getElementsByTagName("script")[0];c.parentNode.insertBefore(o,c)}},L.prototype._execute_array=function(t){var e,i=[],r=[],n=[];y.each(t,function(t){t&&(e=t[0],"function"==typeof t?t.call(this):y.isArray(t)&&"alias"===e?i.push(t):y.isArray(t)&&-1!=e.indexOf("track")&&"function"==typeof this[e]?n.push(t):r.push(t))},this);var a=function(t,e){y.each(t,function(t){this[t[0]].apply(this,t.slice(1))},e)};a(i,this),a(r,this),a(n,this)},L.prototype.push=function(t){this._execute_array([t])},L.prototype.disable=function(t){void 0===t?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)},L.prototype.track=function(t,e,i,r){if(void 0===t)return void A.error("No event name provided to mixpanel.track");e=e||{},e.token=e.token||this.get_config("token"),triggermail.config.eventSource&&!e.event_source&&(e.event_source=triggermail.config.eventSource),this.cookie.update_search_keyword(l.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(l.referrer),e=y.extend({},y.info.properties(),this.cookie.properties(),e),e.distinct_id=r||e.distinct_id;for(var n=["ch","bc_persist_updated"],a=0;a<n.length;a++)delete e[n[a]];(triggermail.util.strip_props_before_send||function(t){return t})(e);var o={event:t,properties:e};v&&(o.validate=1);var c=y.truncate(o,1023),s=y.JSONEncode(c),u=y.base64Encode(s);A.log("BLUECORE REQUEST:"),A.log(c);var g=u;return payload={data:g},-1!=this.get_distinct_id().indexOf("live_demo")?(payload.live_demo=!0,track_path=this.get_config("api_host")+"/templates/demo_track/"+t):-1!=this.get_distinct_id().indexOf("event_stream")?(payload.event_stream=!0,track_path=this.get_config("api_host")+"/templates/event_stream_track/"+t):track_path=this.get_config("api_host")+"/track/"+t,this._send_request(track_path,payload,this._prepare_callback(i,c)),c},L.prototype.track_pageview=function(t){void 0===t&&(t=l.location.href),this.track("mp_page_view",y.info.pageviewInfo(t))},L.prototype.track_links=function(){return this._track_dom.call(this,P,arguments)},L.prototype.track_forms=function(){return this._track_dom.call(this,j,arguments)},L.prototype.register=function(t,e){this.cookie.register(t,e)},L.prototype.register_once=function(t,e,i){this.cookie.register_once(t,e,i)},L.prototype.unregister=function(t){this.cookie.unregister(t)},L.prototype._register_single=function(t,e){var i={};i[t]=e,this.register(i)},L.prototype.identify=function(t,e,i,r){t!=this.get_distinct_id()&&t!=this.get_property("__alias")&&(this.unregister("__alias"),this._register_single("distinct_id",t)),this._flags.identify_called=!0,this.people._flush(e,i,r)},L.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},L.prototype.alias=function(t,e){if(t===this.get_property("$people_distinct_id"))return A.critical("Attempting to create alias for existing People user - aborting."),-2;var i=this;return y.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single("__alias",t),this.track("$create_alias",{alias:t,distinct_id:e},function(e){i.identify(t)})):(A.error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},L.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)},L.prototype.set_config=function(t){y.isObject(t)&&(y.extend(this.config,t),this.cookie&&this.cookie.update_config(this.config),v=v||this.get_config("debug"))},L.prototype.get_config=function(t){return this.config[t]},L.prototype.get_property=function(t){return this.cookie.props[t]},L.prototype.toString=function(){var t=this.get_config("name");return"triggermail.lytics"!==t&&(t="triggermail.lytics."+t),t};var U=function(){};if(U.prototype._init=function(t){this._mixpanel=t},U.prototype.set=function(t,e,i){var r={},n={};return y.isObject(t)?(y.each(t,function(t,e){"$distinct_id"!=e&&"$token"!=e&&(n[e]=t)}),i=e):n[t]=e,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(l.referrer),n=y.extend({},y.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),n),r.$set=n,this._send_request(r,i)},U.prototype.increment=function(t,e,i){var r={},n={};return y.isObject(t)?(y.each(t,function(t,e){if("$distinct_id"!=e&&"$token"!=e)return isNaN(parseFloat(t))?void A.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):void(n[e]=t)}),i=e):(y.isUndefined(e)&&(e=1),n[t]=e),r.$add=n,this._send_request(r,i)},U.prototype.append=function(t,e,i){var r={},n={};return y.isObject(t)?(y.each(t,function(t,e){"$distinct_id"!=e&&"$token"!=e&&(n[e]=t)}),i=e):n[t]=e,r.$append=n,this._send_request(r,i)},U.prototype.track_charge=function(t,e,i){return!y.isNumber(t)&&(t=parseFloat(t),isNaN(t))?void A.error("Invalid value passed to mixpanel.people.track_charge - must be a number"):this.append("$transactions",y.extend({$amount:t},e),i)},U.prototype.clear_charges=function(t){return this.set("$transactions",[],t)},U.prototype.delete_user=function(){if(!this._identify_called())return void A.error("mixpanel.people.delete_user() requires you to call identify() first");var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)},U.prototype.toString=function(){return this._mixpanel.toString()+".people"},U.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var i=y.encodeDates(t),r=y.truncate(i,255),n=y.JSONEncode(i),a=y.base64Encode(n);return this._identify_called()?(A.log("BLUECORE PEOPLE REQUEST:"),A.log(r),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:a},this._mixpanel._prepare_callback(e,r)),r):(this._enqueue(t),y.isUndefined(e)||e(this._get_config("verbose")?{status:-1,error:null}:-1),r)},U.prototype._get_config=function(t){return this._mixpanel.get_config(t)},U.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},U.prototype._enqueue=function(t){
"$set"in t?this._mixpanel.cookie._add_to_people_queue("$set",t):"$add"in t?this._mixpanel.cookie._add_to_people_queue("$add",t):"$append"in t?this._mixpanel.cookie._add_to_people_queue("$append",t):A.error("Invalid call to _enqueue():",t)},U.prototype._flush=function(t,e,i){var r=this,n=y.extend({},this._mixpanel.cookie._get_queue("$set")),a=y.extend({},this._mixpanel.cookie._get_queue("$add")),o=this._mixpanel.cookie._get_queue("$append");if(y.isUndefined(n)||!y.isObject(n)||y.isEmptyObject(n)||(r._mixpanel.cookie._pop_from_people_queue("$set",n),this.set(n,function(e,i){0==e&&r._mixpanel.cookie._add_to_people_queue("$set",n),y.isUndefined(t)||t(e,i)})),y.isUndefined(a)||!y.isObject(a)||y.isEmptyObject(a)||(r._mixpanel.cookie._pop_from_people_queue("$add",a),this.increment(a,function(t,i){0==t&&r._mixpanel.cookie._add_to_people_queue("$add",a),y.isUndefined(e)||e(t,i)})),!y.isUndefined(o)&&y.isArray(o)&&o.length)for(var c=o.length-1;c>=0;c--){var s=o.pop();r.append(s,function(t,e){0==t&&r._mixpanel.cookie._add_to_people_queue("$append",s),y.isUndefined(i)||i(t,e)})}},y.toArray=y.toArray,y.isObject=y.isObject,y.JSONEncode=y.JSONEncode,y.JSONDecode=y.JSONDecode,y.isEmptyObject=y.isEmptyObject,L.prototype.init=L.prototype.init,L.prototype.disable=L.prototype.disable,L.prototype.track=L.prototype.track,L.prototype.track_links=L.prototype.track_links,L.prototype.track_forms=L.prototype.track_forms,L.prototype.track_pageview=L.prototype.track_pageview,L.prototype.register=L.prototype.register,L.prototype.register_once=L.prototype.register_once,L.prototype.unregister=L.prototype.unregister,L.prototype.identify=L.prototype.identify,L.prototype.alias=L.prototype.alias,L.prototype.name_tag=L.prototype.name_tag,L.prototype.set_config=L.prototype.set_config,L.prototype.get_config=L.prototype.get_config,L.prototype.get_property=L.prototype.get_property,L.prototype.get_distinct_id=L.prototype.get_distinct_id,L.prototype.toString=L.prototype.toString,T.prototype.properties=T.prototype.properties,T.prototype.update_search_keyword=T.prototype.update_search_keyword,T.prototype.update_referrer_info=T.prototype.update_referrer_info,T.prototype.get_cross_subdomain=T.prototype.get_cross_subdomain,T.prototype.clear=T.prototype.clear,U.prototype.set=U.prototype.set,U.prototype.increment=U.prototype.increment,U.prototype.append=U.prototype.append,U.prototype.track_charge=U.prototype.track_charge,U.prototype.clear_charges=U.prototype.clear_charges,U.prototype.delete_user=U.prototype.delete_user,U.prototype.toString=U.prototype.toString,y.isUndefined(t))return void A.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");if(t.__loaded||t.config&&t.cookie)return void A.error("Mixpanel library has already been downloaded at least once.");if(m<1.1)return void A.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");var N={};y.each(t._i,function(t){var e,i;t&&y.isArray(t)&&(e=t[t.length-1],i=I.apply(this,t),N[e]=i)});var q=function(){y.each(N,function(e,i){"triggermail.lytics"!==i&&(t[i]=e)}),t._=y};if(t.init=function(e,i,r){if(r)t[r]||(t[r]=N[r]=I(e,i,r),t[r]._loaded());else{var n=t;N["triggermail.lytics"]?n=N["triggermail.lytics"]:e&&(n=I(e,i,"triggermail.lytics")),window["triggermail.lytics"]=t=n,q()}},t.init(),y.each(N,function(t){t._loaded()}),l.addEventListener)"complete"==l.readyState?e():l.addEventListener("DOMContentLoaded",e,!1);else if(l.attachEvent){l.attachEvent("onreadystatechange",e);var R=!1;try{R=null==window.frameElement}catch(t){}l.documentElement.doScroll&&R&&i()}y.register_event(window,"load",e,!0)}(window.triggermail.lytics),function(){!function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}(triggermail,function(){var t=function(t,e){var i=t.obem;if(void 0!==i&&""!==i){void 0===triggermail.lytics.get_property("obem")&&(triggermail.persist.write_prop("obem",i),triggermail.track("identify",{customer:t}))}var r=t.email,n=t.coom;if((void 0!==r&&""!==r||n)&&(!0===e||(r=triggermail.core.sanitizer.sanitize("email",r)))){var a=triggermail.util.hashCode(r||n);return a!==triggermail.persist.read_prop("bc_id")&&(triggermail.persist.write_prop("bc_id",a),triggermail.track("identify",{customer:t})),t}};return{EMAIL_ADDRESS_PROPERTY:"email_address",PAGE_VIEW:"page_view",MAX_PROPERTY_LENGTH:1024,track:function(t,e,i){var r=triggermail.lytics._.extend({},e),n=triggermail.persist.props();triggermail.lytics._.extend(e,n);try{e.url=window.location.href.slice(0,899),e.url.indexOf("s.thebrighttag")>-1&&delete e.url}catch(t){}if("unsubscribe"==t||"optin"==t||"resubscribe"==t){if(!r.email)return;e.email=r.email}try{e.integration_version=1595021459}catch(t){}"page_view"!==t&&triggermail.lytics.track(t,e,void 0,i),triggermail.lytics.get_distinct_id()&&(e.distinct_id=triggermail.lytics.get_distinct_id());try{!0===triggermail.integ.debug&&console.debug(t,e)}catch(t){}},add_to_cart:function(t){return this.track("add_to_cart",{products:[t]})},remove_from_cart:function(t){return this.track("remove_from_cart",{products:[t]})},wishlist:function(t){return this.track("wishlist",{products:[t]})},view_cart:function(t){return this.track("viewed_cart",t)},stop:function(t){return this.track("stop",t)},page:function(t){return this.track("page_view",t)},purchase:function(t){var e=triggermail.lytics._.extend({},t);return triggermail.util.isValidEmail(e.email)||(e.distinct_id=triggermail.lytics.get_distinct_id(),delete e.email),this.track("purchase",e)},checkout_start:function(t){return this.track("checkout_start",t)},view:function(t,e){triggermail.integ.salt_products&&(t.salt=Math.random().toString(36).replace(".",""));var i=triggermail.lytics._.extend(e||{},{products:[t]});return this.track("viewed_product",i)},view_content:function(t,e){triggermail.integ.salt_products&&(t.salt=Math.random().toString(36).replace(".",""));var i=triggermail.lytics._.extend(e||{},{contents:[t]});return this.track("viewed_content",i)},search:function(t){return this.track("search",t)},browse_category:function(t){return this.track("browse_category",{browse_properties:t})},identify:function(e,i){return t(e,i)},subscribe:function(e){return e.source="newsletter",t(e)},unsubscribe:function(t){return this.track("unsubscribe",t)},resubscribe:function(t){return this.track("resubscribe",t)},optin:function(t){return this.track("optin",t)},customer_patch:function(t){return this.track("customer_patch",{customer:t})},patch:function(t){return this.track("patch",t)},merge:function(t){return this.track("merge",t)},custom:function(t,e){return this.track(t,e)},init:function(t){},exception:function(t){var e={};triggermail.lytics._.extend(e,triggermail.lytics._.info.properties());try{e.url=window.location.href,e.url.indexOf("s.thebrighttag")>-1&&delete e.url,e.message=t.message}catch(t){}e.error=t,this.track("exception",e)},anonymous_track:function(t,e,i){var r=i||triggermail.lytics._.UUID();return this.track(t,e,r),r}}}())}(),triggermail.identifySource=function(){return{ACCOUNT_REGISTER:"account register",ACCOUNT_LOGIN:"account login",EMAIL_CAPTURE_POPUP:"email capture popup",EMAIL_SIGNUP:"email signup",SITE_VARIABLE:"site variable",CHECKOUT_FLOW:"checkout flow",CUSTOM:"custom",ESP_EMAIL_APPEND:"esp email append",OBEM_EMAIL_APPEND:"obem email append",JUSTUNO:"justuno",BLUECORE_PURCHASE_PIXEL:"bluecore purchase pixel"}}(),triggermail.util=function(){return{price:function(t){var e=String(t).replace(/[^0-9\.]/g,"").split("."),i=e[0],r=(e[1]||"").slice(0,2),n=i+"."+r;return parseFloat(n)},unique:function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return triggermail.lytics._.map(e,function(t,e){return e})},slugify:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},serializeForm:function(t){var e={},i=t.serializeArray();return $.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},getUrlParam:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+t+"=([^&#]*)",i=new RegExp(e),r=i.exec(window.location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},isMobile:function(){var t=!1,e=["iphone","ipad","android","blackberry","nokia","opera mini","windows mobile","windows phone","iemobile"];for(var i in e)navigator.userAgent.toLowerCase().indexOf(e[i].toLowerCase())>0&&(t=!0);return t},getParamFromQueryString:function(t,e){return decodeURI((RegExp(e+"=(.+?)(&|$)").exec(t)||[,null])[1])},trimString:function(t,e){return triggermail.lytics._.trim(t).substring(0,e)},htmlToText:function(t){var e=document.createElement("p");return e.innerHTML=t,e.textContent||e.innerText||""},isAnonymousUser:function(){var t=triggermail.lytics.get_property(triggermail.core.EMAIL_ADDRESS_PROPERTY);return!this.isValidEmail(t)},emRegex:/\S+@\S+\.\S+/,isValidEmail:function(t){return triggermail.util.emRegex.test(t)},validateAndIdentify:function(t,e,i,r){var n=(t||"").trim();this.isValidEmail(n)&&(triggermail.identify({email:n,source:e,source_detail:i}),r&&triggermail.optin({email:n}))},findEmail:function(t,e){try{return void 0===e&&(e=triggermail.util.emRegex),e.exec(t).pop()}catch(t){}},hashCode:function(t){var e,i,r=0;if(0===t.length)return r;for(e=0;e<t.length;e++)i=t.charCodeAt(e),r=(r<<5)-r+i,r&=r;return r},productHash:function(t){var e=this.sanitizeProductName(t[TriggerMail.PRODUCT_NAME_PROPERTY]);return this.hashCode(e)},_getbyte64:function(t,e){_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=_ALPHA.indexOf(t.charAt(e));if(-1===i)throw"Cannot decode base64";return i},b64decode:function(t){var e,i,r=0,n=t.length,a=[];if(t=String(t),0===n)return t;if(n%4!=0)throw"Cannot decode base64";for("="===t.charAt(n-1)&&(r=1,"="===t.charAt(n-2)&&(r=2),n-=4),e=0;e<n;e+=4)i=this._getbyte64(t,e)<<18|this._getbyte64(t,e+1)<<12|this._getbyte64(t,e+2)<<6|this._getbyte64(t,e+3),a.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(r){case 1:i=this._getbyte64(t,e)<<18|this._getbyte64(t,e+1)<<12|this._getbyte64(t,e+2)<<6,a.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=this._getbyte64(t,e)<<18|this._getbyte64(t,e+1)<<12,a.push(String.fromCharCode(i>>16))}return a.join("")},wrapEvent:function(t){var e=Array.prototype.slice.call(arguments,1);return function(){try{return t.apply(this,e.concat(Array.prototype.slice.call(arguments,0)))}catch(t){triggermail.exception(t)}}},removeURLParam:function(t,e){return triggermail.util.updateURLParams(t,e,!1)},keepURLParam:function(t,e){return triggermail.util.updateURLParams(t,e,!0)},updateURLParams:function(t,e,i){var r,n=t.split("?")[0],a=[],o=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==o){a=o.split("&");for(var c=a.length-1;c>=0;c-=1)r=a[c].split("=")[0],i?triggermail.lytics._.isArray(e)?-1===e.indexOf(r)&&a.splice(c,1):r!==e&&a.splice(c,1):triggermail.lytics._.isArray(e)?e.indexOf(r)>-1&&a.splice(c,1):r===e&&a.splice(c,1);n+=a.length>0?"?"+a.join("&"):""}return n},getArrayElementFromQueryString:function(t,e){var i=[];t||(t=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");for(var r=e+"=([^&#]+)",n=new RegExp(r,"ig");;){var a=n.exec(t);if(!a||!a[1])break;i.push(a[1])}return i.length?1===i.length?i[0]:i:null},executeOnLoad:function(t,e,i,r,n,a){var o=void 0===i?3:i,c=r||500,s=n||!1,u=a||function(){},l=function(t,e){try{var i=e.shift();if(void 0!==t[i]&&t[i])return e.length>0?l(t[i],e):t[i]}catch(t){}return null};if(s&&triggermail.lytics._.dom_query(t).length>0||l(window,t.split(".")))try{e()}catch(t){}else if(o>0)try{o-=1,setTimeout(function(){triggermail.util.wrapEvent(function(){triggermail.util.executeOnLoad(t,e,o,r,s)},t,e,o,c,s)()},c)}catch(t){}else try{u()}catch(t){}},sanitizeSearchTerm:function(t){return t.replace(/[^a-z\d\s:]+/gi,"")},registerAndMergeOpaqueId:function(t){if(void 0!==t&&t){if(!triggermail.persist.read_prop("tm_merged")){var e=triggermail.persist.read_prop("distinct_id");triggermail.track("merge",{merge:{source:e,destination:t}}),triggermail.persist.write_prop("tm_merged",!0),triggermail.persist.write_prop("distinct_id",t)}}},cookie:triggermail.lytics._.cookie,encode:triggermail.lytics._.JSONEncode,decode:triggermail.lytics._.JSONDecode,walk:function(t,e){var i=t;for(e(i),i=i.firstChild;i;)walk(t,e),i=i.nextSibling},walkUntil:function(t,e,i){var r=t;if(ret=e(r),!0===i(ret))return ret;for(r=r.firstChild;r;)walk(r,e),r=r.nextSibling}}}(),triggermail.demo=function(){var t=triggermail.lytics.get_distinct_id();-1===t.indexOf("live_demo")&&(triggermail.persist.write_prop("distinct_id","live_demo_"+t),t=triggermail.lytics.get_distinct_id()),triggermail.lytics.cookie.update_config({live_demo:!0,cookie_expiration:1});var e=triggermail.Partner.keys.lytics.p,i="http://www.bluecore.com/api/templates/live_demo/"+e+"/"+t;window.open(i)},triggermail.event_stream=function(){var t=triggermail.lytics.get_distinct_id();if(-1===t.indexOf("event_stream")){var e="event_stream_"+triggermail.persist.read_prop("distinct_id");triggermail.persist.write_prop("distinct_id",e),t=e}triggermail.lytics.cookie.update_config({event_stream:!0,cookie_expiration:1});var i=triggermail.Partner.keys.lytics.p,r="http://www.bluecore.com/api/templates/event_stream/"+i+"/"+t;window.open(r)},triggermail.insanetiego=function(){return{inject_div:function(){$("body").append('<div id="insanetiego" style="position:fixed;bottom:0;width:100%;background:#D8E7ED;height:300px;overflow:scroll;z-index:2000;border-top-style:solid;border-top-width:5px;"></div>')},remove_div:function(){$("#insanetiego").remove()},debug:function(){triggermail.util.cookie.set("tm_debug",!0),triggermail.integ.debug=!0,this.inject_div()},undebug:function(){triggermail.util.cookie.set("tm_debug",!1),triggermail.integ.debug=!1}}}(),triggermail.core={},triggermail.core.sanitizer=function(){function t(t){return e(t)?t:null}function e(t){return/\S+@\S+\.\S+/.test(t)}return{sanitize:function(e,i){return"email"===e?t(i):i||""}}}(),triggermail.persist=function(){var t="LOCAL_STORAGE",e=function(t){return"COOKIE_ONLY"===t||"LOCAL_STORAGE"===t},i=function(){return triggermail.lytics.cookie.props||{}},r=function(){try{return JSON.parse(localStorage.getItem("bc_persist_props"))||{}}catch(t){return{}}},n=function(t){try{var e=t.email;if(e){var i=triggermail.lytics._.extend({},t);return delete i.email,i.bc_id=triggermail.util.hashCode(e),i}}catch(t){}return t},a=function(){var t=Date.now();s("bc_persist_updated",t);var e=i();e=n(e),localStorage.setItem("bc_persist_props",JSON.stringify(e))},o=function(t,e){var i=t.distinct_id;try{e.distinct_id&&e.distinct_id!==i&&triggermail.track("merge",{merge:{source:e.distinct_id,destination:i}}),e.email&&triggermail.util.isValidEmail(e.email)&&triggermail.track("merge",{merge:{source:e.email,destination:i}})}catch(t){}},c=function(t,e,i){var r={},a=Date.now(),o=i?t:e,c=i?e:t;r=triggermail.lytics._.extend(r,o),r=triggermail.lytics._.extend(r,c),r=n(r),r.bc_persist_updated=a,r.distinct_id=t.distinct_id,triggermail.lytics.cookie.props=r,triggermail.lytics.cookie.save(),localStorage.setItem("bc_persist_props",JSON.stringify(r))},s=function(t,e){triggermail.lytics.cookie.props[t]=e,triggermail.lytics.cookie.save()},u=function(t,e){var i=JSON.parse(localStorage.getItem("bc_persist_props"));i[t]=e,i=n(i),i.bc_persist_updated=Date.now(),localStorage.setItem("bc_persist_props",JSON.stringify(i))},l=function(t){delete triggermail.lytics.cookie.props[t],triggermail.lytics.cookie.save()},g=function(t){var e=JSON.parse(localStorage.getItem("bc_persist_props"));delete e[t],e.bc_persist_updated=Date.now(),localStorage.setItem("bc_persist_props",JSON.stringify(e))},p=!0;return{setMode:function(i){e(i)&&(t=i)},setSendMergeEvents:function(t){"boolean"==typeof t&&(p=t)},sync:function(){if("COOKIE_ONLY"!==t){var e=i(),n=e.bc_persist_updated||0,s=r(),u=s.bc_persist_updated;if(!u||triggermail.lytics._.isEmptyObject(s))return void a();if(!function(t,e){return JSON.stringify(t,Object.keys(t).sort())===JSON.stringify(e,Object.keys(e).sort())}(e,s)){c(s,e,!n||n>u),!0===p&&o(s,e)}}},props:function(){return"COOKIE_ONLY"===t?i():r()},read_prop:function(e){var n;return n="COOKIE_ONLY"===t?i()[e]:r()[e],void 0!==n?n:null},write_prop:function(e,i){"COOKIE_ONLY"===t?s(e,i):(u(e,i),this.sync())},remove_prop:function(e){"COOKIE_ONLY"===t?l(e):(l(e),g(e))}}}(),triggermail.util=triggermail.util||{},triggermail.lytics._.extend(triggermail.util,{getNestedProp:function(t,e){try{if("string"!=typeof t)return;var i=e||window,r=t.split(".");if(0===r.length)return;for(var n=0,a={};n<r.length&&void 0!==a;)a=function(t,e,r){var n=e[r];return 0===r?i[n]:t[n]}(a,r,n),n+=1;return a}catch(t){}},listenAndIdentify:function(t,e,i,r,n,a){try{jQuery(document).on(r||"focusout",t,function(){var t=this;triggermail.util.wrapEvent(function(){var r=jQuery(n||t).val(),o=triggermail.identifySource[e];o&&(triggermail.util.validateAndIdentify(r,o,a),i&&triggermail.custom("welcome_qualifier",{source:o}))})()})}catch(t){}},executeOnTruthy:function(t,e,i,r,n){if("function"!=typeof t)throw"first argument should be a function to evaluate";if("function"!=typeof e)throw"second argument should be a function to execute if the first function evaluates to truthy";var a;a="number"==typeof i&&i>=1&&Math.floor(i)===i?i:3;var o;o="number"==typeof r&&r>100?r:500;var c;c="function"==typeof n?n:function(){},function i(r){var n=r;setTimeout(function(){t()?e():--n?i(n):c()},o)}(a)},registerCoom:function(t){var e=triggermail.persist.read_prop("tm_coom"),i=triggermail.persist.read_prop("email");if(!(triggermail.persist.read_prop("bc_id")||e||i&&triggermail.util.isValidEmail(i)))return triggermail.persist.write_prop("tm_coom",!0),triggermail.track("identify",{customer:t}),t},getDataLayerObj:function(t,e,i){var r=window[e]||window.dataLayer;if(void 0!==r&&void 0!==t&&(void 0===i||"boolean"==typeof i))for(var n=function(t,e){return e?t.length-1:0}(r,i);function(t,e,i){return i?t>=0:t<e.length}(n,r,i);n=function(t,e){return e?t-1:t+1}(n,i)){var a=r[n];if(void 0!==a[t])return a}},euroPrice:function(t){try{var e=t.replace(/[^0-9.,]/g,"");if(/[0-9]+,[0-9]{2}$/.test(e)){var i=e.substr(0,e.length-3).replace(/\./g,"")+"."+e.substr(e.length-2);return parseFloat(i)}return parseFloat(e.replace(/,/g,""))}catch(t){}},handleS7Image:function(t,e,i,r){var n=t,a="wid="+(e||"920"),o="qlt="+(i||"90"),c=[a,o,"op_sharpen=1"];return"object"==typeof r&&r.length>0&&(c=c.concat(r)),-1===n.indexOf("?")&&(n+="?"),-1===n.indexOf("$")&&(n+="$"),n.replace(/\$.*/g,c.join("&"))},emailListener:function(t){try{jQuery(document).on(t.event||"click",t.event_object,function(){try{var e="function"==typeof t.email?t.email().trim():jQuery(t.email).val().trim(),i=triggermail.identifySource[t.source],r=t.source_detail,n={email:e,source:i,source_detail:r},a=t.customer_attributes?t.customer_attributes.static:{},o={};t.customer_attributes&&t.customer_attributes.dynamic&&Object.keys(t.customer_attributes.dynamic).map(function(e,i){var r="function"==typeof t.customer_attributes.dynamic[e]?t.customer_attributes.dynamic[e]():jQuery(t.customer_attributes.dynamic[e]).val().trim();o[e]=r});var c=Object.assign(n,a,o);if(t.consent){var s;switch(typeof t.consent){case"function":s="boolean"==typeof t.consent()&&t.consent();break;case"string":s="checkbox"===jQuery(t.consent).attr("type")&&jQuery(t.consent).is(":checked");break;case"boolean":s=t.consent}}triggermail.util.isValidEmail(e)&&(s?(triggermail.identify(c),triggermail.anonymous_track("optin",n,e)):triggermail.identify(c))}catch(t){}})}catch(t){}},getOlapicMedia:function(t,e,i,r,n,a){try{var o="https://photorankapi-a.akamaihd.net/customers/"+t+"/streams/bytag/"+i+"?version=v2.2&auth_token="+e,c=new XMLHttpRequest;c.open("Get",o),c.send(),c.onreadystatechange=function(){try{if(4===c.readyState&&200===c.status){var t=JSON.parse(c.responseText).data.id,i="https://photorankapi-a.akamaihd.net/streams/"+t+"/media/"+(a||"recent")+"?version=v2.2&auth_token="+e,o=new XMLHttpRequest;o.open("Get",i),o.send(),o.onreadystatechange=function(){try{if(4===o.readyState&&200===o.status){var t=JSON.parse(o.responseText),e={id:(new triggermail.fetcher).id()};if(void 0!==t.data._embedded)for(var i=t.data._embedded.media.length,a=0;a<i;a++)if(a<(r||3)){var c=t.data._embedded.media[a];switch(n||"normal"){case"mobile":e["olapic_image_"+a]=c.images.mobile;break;case"square":e["olapic_image_"+a]=c.images.square;break;case"thumbnail":e["olapic_image_"+a]=c.images.thumbnail;break;case"original":e["olapic_image_"+a]=c.images.original;break;default:e["olapic_image_"+a]=c.images.normal}e["olapic_uploader_name_"+a]=c._embedded.uploader.name}triggermail.patch({products:[e]})}}catch(t){}}}}catch(t){}}}catch(t){}}}),triggermail.integ=function(){return{init:function(){if(!triggermail.util.getUrlParam("bluecore_do_not_track")){void 0!==triggermail.Partner.init?triggermail.Partner.init():triggermail.integ.partnerInit();try{triggermail.integ.checkLoop()}catch(t){}}},partnerInit:function(t){var e=triggermail.Partner;if(void 0!==t||!triggermail.lytics._.dom_query(".translated-rtl, .translated-rtl, #goog-gt-tt").length&&!triggermail.lytics._.dom_query('meta[http-equiv="X-Translated-By"]').length){try{e.trackProductView()}catch(t){t.location="trackProductView",triggermail.exception(t)}try{e.trackAddToCart()}catch(t){t.location="trackAddToCart",triggermail.exception(t)}try{e.trackCheckout()}catch(t){t.location="trackCheckout",triggermail.exception(t)}try{e.watchEmail()}catch(t){t.location="watchEmail",triggermail.exception(t)}if(e.hasOwnProperty("trackRemoveFromCart"))try{e.trackRemoveFromCart()}catch(t){t.location="trackRemoveFromCart",triggermail.exception(t)}if(e.hasOwnProperty("trackCheckoutStart"))try{e.trackCheckoutStart()}catch(t){t.location="trackCheckoutStart",triggermail.exception(t)}if(e.hasOwnProperty("trackUnsubscribe"))try{e.trackUnsubscribe()}catch(t){t.location="trackUnsubscribe",triggermail.exception(t)}if(e.hasOwnProperty("trackSubscribe"))try{e.trackSubscribe()}catch(t){t.location="trackSubscribe",triggermail.exception(t)}if(e.hasOwnProperty("trackSearch"))try{e.trackSearch()}catch(t){t.location="trackSearch",triggermail.exception(t)}if(e.hasOwnProperty("trackBrowseCategory"))try{e.trackBrowseCategory()}catch(t){t.location="trackBrowseCategory",triggermail.exception(t)}if(e.hasOwnProperty("trackWishlist"))try{e.trackWishlist()}catch(t){t.location="trackWishlist",triggermail.exception(t)}if(e.hasOwnProperty("trackContentView"))try{e.trackContentView()}catch(t){t.location="trackContentView",triggermail.exception(t)}if(e.hasOwnProperty("trackStop"))try{e.trackStop()}catch(t){t.location="trackStop",triggermail.exception(t)}if(triggermail.Partner.hasOwnProperty("trackCustom"))try{triggermail.Partner.trackCustom()}catch(t){triggermail.exception(t)}}},checkLoop:function(){if(void 0===triggermail.Partner.disableEmailAppendPickup||0==triggermail.Partner.disableEmailAppendPickup){for(var t=window.location.search.split("&"),e=0;e<t.length;e++){try{var i=triggermail.util.b64decode(decodeURIComponent(t[e].split("=").slice(1).join("=")))}catch(t){}if(i&&/^(([^<>{}()\[\]\.,;:\s@\"]+(\.[^<>{}()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>{}()[\]\.,;:\s@\"]+\.)+[^<>{}()[\]\.,;:\s@\"]{2,})/.test(i)&&triggermail.util.isValidEmail(i))return void triggermail.identify({email:i,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"encoded"})}var r=triggermail.util.getUrlParam("tme");if(r.length>0)return void triggermail.identify({email:r,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"tme"},!0);var r=decodeURIComponent(location.search).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)||decodeURIComponent(location.hash).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(r&&triggermail.util.isValidEmail(r[0]))return void triggermail.identify({email:r[0],source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"plain text"})}var n=triggermail.util.getUrlParam("obem");if(void 0!==n&&""!=n&&triggermail.identify({obem:n,source:triggermail.identifySource.OBEM_EMAIL_APPEND}),triggermail.lytics._.dom_query("#bluecore_purchase_pixel").length>0&&void 0!==triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0]){var a=triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0].src,r=triggermail.util.getParamFromQueryString(a,"email");triggermail.identify({email:r,source:triggermail.identifySource.BLUECORE_PURCHASE_PIXEL})}triggermail.lytics._.addEvent(document,"bc:identify",triggermail.util.wrapEvent(function(t,e){triggermail.util.isValidEmail(e.email)&&triggermail.identify({email:e.email,source:triggermail.identifySource.CUSTOM,source_detail:"dom event"})}))}}}(),triggermail.integ.ProductFetcher=__tmClass.extend({name:function(){return this._name},readOg:function(t){},category:function(){return this._category},color:function(){return this._color},size:function(){return this._size},price:function(){return this._price},brand:function(){return this._brand},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},out_of_stock:function(){return!1},tags:function(){return this._tags},to_dict:function(){try{var t={name:triggermail.core.sanitizer.sanitize("name",this.name()),category:triggermail.core.sanitizer.sanitize("category",this.category()),size:triggermail.core.sanitizer.sanitize("size",this.size()),price:triggermail.core.sanitizer.sanitize("price",this.price()),brand:triggermail.core.sanitizer.sanitize("brand",this.brand()),id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),url:triggermail.core.sanitizer.sanitize("url",this.url()),out_of_stock:this.out_of_stock(),tags:this.tags(),color:triggermail.core.sanitizer.sanitize("color",this.color())};for(var e in t)""!==t[e]&&0!=t[e]||"out_of_stock"==e||delete t[e];return triggermail.lytics._.extend(t,this.extra_props()),t}catch(t){t.location="product_fetcher",triggermail.exception(t)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.ContentFetcher=__tmClass.extend({name:function(){return this._name},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},title:function(){return this._title},to_dict:function(){try{var t={id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),name:triggermail.core.sanitizer.sanitize("name",this.name()),title:triggermail.core.sanitizer.sanitize("title",this.title()),url:triggermail.core.sanitizer.sanitize("url",this.url())};for(var e in t)""!==t[e]&&0!=t[e]||delete t[e];return triggermail.lytics._.extend(t,this.extra_props()),t}catch(t){t.location="content_fetcher",triggermail.exception(t)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.initServices=function(){triggermail.lytics.init(triggermail.integ.keys.lytics),triggermail.lytics=window["triggermail.lytics"],triggermail.lytics.set_config({save_referrer:!1,store_google:!1,debug:triggermail.integ.debug}),triggermail.persist.sync()},triggermail.__initializeWithoutJQuery=!0,triggermail.fetcher=triggermail.integ.ProductFetcher.extend({init:function(){this.data=triggermail.util.getDataLayerObj("sku")},name:function(){try{return this.data["artwork title"].trim()}catch(t){}},category:function(){try{return this.data.category.toLowerCase()}catch(t){}},id:function(){try{return this.data.sku}catch(t){}},url:function(){try{return window.location.href.split("?")[0]}catch(t){}},brand:function(){},image:function(){var t;try{if((t=jQuery('meta[property="og:image"]').attr("content"))&&"undefined"!==t)return t}catch(t){}try{for(var e=jQuery('[type="application/ld+json"]'),i=0;i<e.length;i++)if(t=triggermail.util.getNestedProp("image",JSON.parse(e.eq(i).text())))return t}catch(t){}},price:function(){try{return triggermail.util.price(this.data.price/100)}catch(t){}},out_of_stock:function(){try{return jQuery("span.sold").length>0||jQuery("div.art-detail-ribbon").text().toLowerCase().indexOf("not for sale")>-1||this.name().toLowerCase().indexOf("sold")>-1||jQuery("div.buy-prints h4").text().toLowerCase().indexOf("prints available")>-1&&jQuery("div.buy-prints h4").text().toLowerCase().indexOf("open edition")>-1||"forSale"!==this.data["original availability"]}catch(t){}},extra_props:function(){var t={};try{t.on_sale=!1,t.original_price=this.price()}catch(t){}try{t.original_availability=this.data["original availability"]}catch(t){}try{t.artist_country=this.data["artist country"].trim()}catch(t){}try{t.artist_id=this.data["artist id"].toString().trim()}catch(t){}try{t.artist_name=this.data["artist name"].trim()}catch(t){}try{var e=this.data.sacs;e&&(t.sa_cs=e)}catch(t){}try{t.badges=this.data.badges.join(",")}catch(t){}try{var i=(jQuery(".art-detail-stats li:contains(Views)").text().match(/[\d]+/)||[null,null])[0]||jQuery("span:contains(Views)").siblings("p").text();t.view_count=parseInt(i,10)}catch(t){}try{var r=(jQuery(".art-detail-stats li:contains(Favorites)").text().match(/[\d]+/)||[null,null])[0]||jQuery("span:contains(Favorites)").siblings("p").text();t.favorite_count=parseInt(r,10)}catch(t){}try{var n=triggermail.util.price(jQuery(".affirm-ala-price").text());n&&(t.affirm_price=n)}catch(t){}return t}}),triggermail.Helpers={getPageType:function(){try{return triggermail.util.getDataLayerObj("pagetype").pagetype}catch(t){}},setMousedownIdentify:function(t,e,i,r,n){jQuery(document).on("mousedown",t,function(){try{var t=jQuery(e).val().trim();triggermail.util.validateAndIdentify(t,r,n),i&&triggermail.util.isValidEmail(t)&&(triggermail.customer_patch({email:t,subscriber:!0}),triggermail.optin({email:t}))}catch(t){}})},setAllCustomMousedownEvents:function(t,e){t.forEach(function(t){triggermail.Helpers.setMousedownEvent(t,e)})},setMousedownEvent:function(t,e){jQuery(document).on("mousedown",t.selector,function(){try{triggermail.custom(t.eventName,e)}catch(t){}})}},triggermail.fullSite=function(){var t=function(){try{var t="";try{t=document.title.replace(/[^\x00-\x7F]/g,"")}catch(t){}triggermail.custom("viewed_page",{pathname:window.location.pathname,title:t}),window.addEventListener("click",function(t){try{var e=function(t){if(!t)return"";var e=t.split(" ");return e=e.slice(0,10),e.join(" ").trim()},i=t.target,r={page_x:t.pageX,page_y:t.pageY,element_tagname:i.tagName};i.id&&(r.element_id=i.id.trim()),i.title&&(r.element_title=i.title.trim()),i.className&&(r.element_class=e(i.className)),i.hash&&(r.element_hash=i.hash),r.closest_id=i.closest("[id]")?i.closest("[id]").id:"",r.closest_title=i.closest("[title]")?i.closest("[title]").title:"",r.closest_class=i.closest("[class]")?e(i.closest("[class]").class):"",i.src&&(r.image_source=triggermail.util.keepURLParam(i.src,"")),i.alt&&(r.image_alt=i.alt.trim());var n=i.text||i.innerText;n&&(n=n.trim().split("\n")[0].trim(),r.text=n.replace(/[\r\n\t\f\v]/g,"").replace(/ +/g," ").trim().slice(0,99)),i.href&&0===i.href.indexOf("javascript:")?r.target_href="javascript":r.target_href=i.href,triggermail.custom("clicked_page",r)}catch(t){}},{capture:!0,passive:!0})}catch(t){}};return{capture:function(){t()}}}(),triggermail.Partner=function(){return{pageType:function(){return triggermail.Helpers.getPageType()}(),init:function(){triggermail.util.executeOnTruthy(function(){return window.jQuery},triggermail.integ.partnerInit,60,500)},trackProductView:function(){var t=this;triggermail.util.executeOnTruthy(function(){try{return window.dataLayer}catch(t){}},function(){try{if("artDetail"===t.pageType&&"original"===triggermail.util.getDataLayerObj("product type")["product type"]){var e=(new triggermail.fetcher).to_dict();e.id&&triggermail.view(e),e.affirm_price||triggermail.util.executeOnTruthy(function(){return jQuery(".affirm-ala-price").length>0},function(){var t=triggermail.util.price(jQuery(".affirm-ala-price").text());t&&triggermail.patch({products:[{id:e.id,affirm_price:t}]})
},5,500)}}catch(t){}},3,500)},trackAddToCart:function(){jQuery(document).ajaxComplete(function(t,e,i){try{if(i.url.indexOf("cart")>-1){var r=i.url.split("/")[3];r&&triggermail.add_to_cart({id:r})}}catch(t){}}),jQuery(document).on("mousedown",'a:contains("Add to Cart")',function(){try{var t=(new triggermail.fetcher).id();t&&triggermail.add_to_cart({id:t})}catch(t){}}),jQuery(document).on("mousedown",".item-controls a.btn-add-to-cart",function(){try{var t=jQuery(this).attr("data-sku");t&&triggermail.add_to_cart({id:t})}catch(t){}});try{if("cart"===this.pageType){var t=triggermail.util.getDataLayerObj("skus").skus,e=t.map(function(t){return{id:t}});e.length>0&&triggermail.view_cart({products:e})}}catch(t){}},trackRemoveFromCart:function(){"cart"===this.pageType&&jQuery(document).on("mousedown",'a:contains("Remove")',function(){try{var t=jQuery(this).attr("href").split("/"),e=t[t.length-1];e&&triggermail.remove_from_cart({id:e})}catch(t){}})},trackCheckout:function(){},trackBrowseCategory:function(){var t=this;triggermail.util.executeOnLoad("dataLayer",function(){try{if("browse"===t.pageType){var e={};e.category=triggermail.util.getDataLayerObj("category").category.toLowerCase().match("painting|photography|drawing|sculpture")[0],triggermail.browse_category(e)}}catch(t){}},3,500,!1)},trackSearch:function(){var t=this;triggermail.util.executeOnLoad("dataLayer",function(){try{if("browse"===t.pageType&&"search"===triggermail.util.getDataLayerObj("subpagetype").subpagetype){var e=triggermail.util.getUrlParam("query");""!==e&&triggermail.search({search_term:e})}}catch(t){}},3,500,!1)},watchEmail:function(){triggermail.util.executeOnTruthy(function(){try{return window.dataLayer}catch(t){}},function(){try{var t=triggermail.util.getDataLayerObj("user email")["user email"];triggermail.util.validateAndIdentify(t,triggermail.identifySource.SITE_VARIABLE,"dataLayer")}catch(t){}},3,500);try{var t=triggermail.util.getUrlParam("bxid");t&&triggermail.util.registerAndMergeOpaqueId(t)}catch(t){}try{var e=triggermail.util.getNestedProp("user category",triggermail.util.getDataLayerObj("user category")),i=jQuery(".desktop-navigation__account-nav__header").text().trim().split(" ")[0],r={},n=!1,a=triggermail.lytics.cookie,o=function(t,e){return t&&a.props[e]!==t};(e||i)&&(o(e,"ucat")&&(a.props.ucat=e,r.category=e,n=!0),o(i,"first_name")&&(a.props.first_name=i,r.first_name=i,n=!0));try{for(var c,s=document.cookie.split(";"),u=0;u<s.length&&!c;u++){var l=s[u];l.indexOf("User-Country=")>-1&&(c=l.split("User-Country=")[1].toLowerCase())}o(c,"geo")&&(a.props.geo=c,r.geo=c,n=!0)}catch(t){}n&&(triggermail.customer_patch(r),a.save())}catch(t){}},trackSubscribe:function(){window.location.href.indexOf("authentication")>-1&&(triggermail.Helpers.setMousedownIdentify('.authentication__content__section button:contains("Next")','input[name="email"]',!0,triggermail.identifySource.ACCOUNT_REGISTER),triggermail.Helpers.setMousedownIdentify('.btn:contains("Sign In")','input[name="email"]',!1,triggermail.identifySource.ACCOUNT_LOGIN)),triggermail.Helpers.setMousedownIdentify('footer button:contains("Sign up")','footer input[type="email"]',!0,triggermail.identifySource.EMAIL_SIGNUP),triggermail.Helpers.setMousedownIdentify("#so-subscribe-submit","#so-subscribe-email",!0,triggermail.identifySource.EMAIL_SIGNUP),window.location.href.indexOf("checkout")>-1&&(triggermail.Helpers.setMousedownIdentify('.btn:contains("Create Account")',"#input-with-place-holder-4",!0,triggermail.identifySource.CHECKOUT_FLOW,"checkout account register"),triggermail.Helpers.setMousedownIdentify('.btn:contains("Sign In")','input[name="email"]',!1,triggermail.identifySource.CHECKOUT_FLOW,"checkout account login")),triggermail.Helpers.setMousedownIdentify(".shipping-billing__payment-method button","#input-with-place-holder-14",!1,triggermail.identifySource.CHECKOUT_FLOW,"guest checkout"),triggermail.Helpers.setMousedownIdentify('button.bx-button[type="submit"]','input.bx-el.bx-input[type="email"]',!0,triggermail.identifySource.EMAIL_CAPTURE_POPUP)},trackWishlist:function(){},trackCustom:function(){var t=this;if(triggermail.util.executeOnTruthy(function(){try{return window.dataLayer}catch(t){}},function(){try{var e,i,r=triggermail.util.getDataLayerObj("sku")||triggermail.util.getDataLayerObj("artist id");if("artDetail"===t.pageType&&"original"===r["product type"])jQuery("p:contains('View Fullscreen')").parent().length>0&&jQuery("p:contains('View Fullscreen')").parent().on("click",function(){try{var t={products:[{id:r.sku}]};triggermail.custom("view_fullscreen",t)}catch(t){}}),jQuery("p:contains('View In A Room')").parent().length>0&&jQuery("p:contains('View In A Room')").parent().on("click",function(){try{var t={products:[{id:r.sku}]};triggermail.custom("view_in_a_room",t)}catch(t){}}),jQuery("p:contains('Add to Favorites')").parent().length>0&&jQuery("p:contains('Add to Favorites')").parent().on("click",function(){try{var t="Add to Favorites"===this.innerText.trim()?"add_to_favorites":"remove_from_favorites",e={products:[{id:r.sku}]};triggermail.custom(t,e)}catch(t){}}),jQuery("p:contains('Remove from Favorites')").parent().length>0&&jQuery("p:contains('Remove from Favorites')").parent().on("click",function(){try{var t="Remove from Favorites"===this.innerText.trim()?"remove_from_favorites":"add_to_favorites",e={products:[{id:r.sku}]};triggermail.custom(t,e)}catch(t){}});else if("userProfile"===t.pageType){var n=[{selector:'a[data-gtm-event="follow"]',eventName:"follow_artist"}];e=n,i={artist_id:r["artist id"].trim()}}e&&e.length>0&&i&&triggermail.Helpers.setAllCustomMousedownEvents(e,i)}catch(t){}},3,500),jQuery('h2:contains("the artwork you requested does not exist")').length>-1){var e=triggermail.util.getUrlParam("bc_pid");e&&triggermail.patch({products:[{id:atob(e),out_of_stock:!0}]})}triggermail.fullSite.capture()},trackUnsubscribe:function(){window.location.href.indexOf("/unsubscribe")>-1&&jQuery(document).on("click",".subscribe-btn#validate",function(){try{var t=jQuery("#contact_fields_email").val().trim();triggermail.util.isValidEmail(t)&&triggermail.anonymous_track("unsubscribe",{email:t},t)}catch(t){}}),window.location.href.indexOf("/bc30daypause")>-1&&jQuery(document).on("click",".subscribe-btn#validate",function(){try{var t=jQuery("#contact_fields_email").val().trim();if(triggermail.util.isValidEmail(t)){var e=(new Date).setDate((new Date).getDate()+30),i=new Date(e).toISOString();triggermail.anonymous_track("customer_patch",{customer:{email:t,bc_email_paused_end_date:i,is_bc_email_paused:"true"}},t)}}catch(t){}})},env:function(){return window.location.href.indexOf("www.saatchiart.com")>-1||window.location.href.indexOf("lp.post.saatchiart.com")>-1?"p":"d"},keys:{lytics:{d:"dev",p:"saatchi_art"}}}}();var syncUserAudiences=function(){var t=triggermail.util.cookie.get("__bc_audience_sync");t=t?JSON.parse(t):{};var e=+(t.lastSyncTime||0);+new Date-e>36e5&&function(){var t=function(t){var e=t.target;if(e.readyState===XMLHttpRequest.DONE){var i,r=function(t){triggermail.util.cookie.get(t)||triggermail.util.cookie.set(t,"true",void 0,triggermail.lytics.cookie.get_cross_subdomain())},n=function(t){triggermail.util.cookie.get(t)&&triggermail.util.cookie.remove(t,triggermail.lytics.cookie.get_cross_subdomain())},a=[],o=!!e.responseText,c={};try{c=o?JSON.parse(e.responseText):{}}catch(t){}o&&triggermail.lytics._.each(c,function(t,e){a.push(e),r(e)}),i=triggermail.util.cookie.get("__bc_audience_sync"),i=i?JSON.parse(i):{},triggermail.lytics._.each(i.audiences||[],function(t){-1===a.indexOf(t)&&n(t)}),i={lastSyncTime:+new Date,audiences:a},function(t){triggermail.util.cookie.set("__bc_audience_sync",JSON.stringify(t),void 0,triggermail.lytics.cookie.get_cross_subdomain())}(i)}},e=new XMLHttpRequest,i="//bluecore.com/api/audiences/get_audience_info";i+="?namespace="+encodeURIComponent(triggermail.integ.keys.lytics),i+="&customer_alias="+encodeURIComponent(triggermail.lytics.get_distinct_id()),i+="&_"+(new Date).getTime(),e.open("GET",i),e.onreadystatechange=t,e.send()}()};triggermail.initialize=function(){triggermail.integ.keys={};var t=triggermail.Partner.env();triggermail.integ.keys.lytics=triggermail.Partner.keys.lytics[t],triggermail.integ.debug=!1,triggermail.integ.initServices(),triggermail.init(),["124_rivington","lucy","nat_geo","servermonkey","vans"].indexOf(triggermail.integ.keys.lytics)>-1&&syncUserAudiences();var e=triggermail.util.getUrlParam("__distinct_id_override__");""!==e&&triggermail.persist.write_prop("distinct_id",e);var i=triggermail.util.getUrlParam("mc_eid"),r=triggermail.persist.read_prop("distinct_id");i&&-1===i.toLowerCase().indexOf("uniqid")&&r!==i&&(i="mceid_"+i,r!==i&&(triggermail.merge({merge:{source:r,destination:i},customer:{distinct_id:i}}),triggermail.persist.write_prop("distinct_id",i),triggermail.persist.write_prop("mc_eid",i))),triggermail.integ.init();var n=triggermail.util.getUrlParam("__auto_demo__");""!==n&&(triggermail.demo(),triggermail.identify({email:n}));try{var a=triggermail.persist.read_prop("bc_persist_updated"),o=triggermail.persist.read_prop("distinct_id");o.indexOf("event_stream")>-1&&Date.now()-a>=864e5&&(o=o.replace("event_stream_",""),triggermail.persist.write_prop("distinct_id",o))}catch(t){}},__checkAndInitialize(0);var host_path="storage.googleapis.com/bluecore_addons/",token=triggermail.lytics.config?triggermail.lytics.config.token:null,constant=triggermail.Partner.keys.lytics?triggermail.Partner.keys.lytics.p:null;if(partner=token||constant,partner){var script=document.createElement("script");script.type="text/javascript",script.setAttribute("data-cfasync","false"),script.src=("https:"===document.location.protocol?"https://":"http://")+host_path+partner+".ju.js";var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)}}