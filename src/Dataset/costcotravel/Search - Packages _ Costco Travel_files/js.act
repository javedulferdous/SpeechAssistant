
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ErrorTypes={ERROR_TYPE_ERROR:0,ERROR_TYPE_WARNING:1,ERROR_TYPE_GENERAL:2};
$namespace.ErrorCodes={PROCESSING_ERROR:101,MEMBERSHIP_VALIDATION_ERROR:1004,MEMBERSHIP_INVALID:1005,MEMBERSHIP_NUMBER_CHANGED:1007,INVALID_EXISTING_EMAIL:1008,MEMBERSHIP_NUMBER_CANCELLED:1009,MEMBERSHIP_GENERAL_ERROR:1011,USER_PROFILE_VALIDATION_ERROR:1053,USER_PROFILE_RETRIEVE_ERROR:1054,USER_EXISTS:1055,USER_DOES_NOT_EXIST:1056,USER_EMAIL_DUPLICATE:1057,PASSWORD_RESET_INVALID_PARAMETERS_ERROR:1060,PASSWORD_VALIDATION_ERROR:1061,PASSWORD_RESET_SUCCESS_MESSAGE:1063,NO_ONLINE_ACCOUNT_MESSAGE:1064,
NO_MEMBER_ACCOUNT_ERROR:1065,NO_MEMBER_ACCOUNT_AGENT_ERROR:1066,NO_MEMBER_ACCOUNT_GUEST_ERROR:1067,INVALID_USER_ERROR:1068,EXPIRED_MEMBERSHIP_ERROR:1069,MEMBERSHIP_NUMBER_CHANGED_ERROR:1070,MEMBERSHIP_DETAIL_MISTYPED_ERROR:1071,SESSION_TIME_OUT:1073,PASSWORD_CHANGE_SUCCESS_MESSAGE:1074,EMAIL_CHANGE_SUCCESS_MESSAGE:1075,USER_ACCOUNT_LOCKOUT_ERROR:1076,DUPLICATE_EMAIL:1077,CREATE_ACCOUNT_TO_CONTINUE_BOOKING:1079,STRONG_PASSWORD_VALIDATION_ERROR:1082,PACKAGE_DATES_UNAVAILABLE:2034,MEMBER_NOT_LOGGED_IN_ERROR:4055,
CAR_RETRIEVE_CANCELLED_BOOKING_ERROR:8205,CAR_VENDOR_DRIVER_UNDERAGE_ERROR:8238,CREATE_ACCOUNT_SPECIFIC_ERROR:1024,API_LOGIN_SERVICE_DOWN_ERROR:1025,FLIGHT_REQUIRED_ERROR:2042,BOOKING_HOLD_ERROR:3510,PAYMENT_TRANSACTION_CVV_ERROR:4115,PAYMENT_TRANSACTION_AVS_ERROR:4103,PAYMENT_CREDIT_CARD_INFO_MISMATCH:4144,NO_HOTELS_FOUND_FOR_SELECTED_LOCATION:2E4,NO_FLIGHTS_AVAILABLE_FOR_YOUR_SEARCH_CRITERIA:2043,EMAIL_SEND_ERROR:4002,EMAIL_ITINERARY_FAILED_TO_SEND:1333,HTML_ITINERARY_GENERATE_ERROR:4005,EMAIL_INVALID_SENDER_DOMAIN_ERROR:1334,
INVALID_EMAIL_SEND_REQUEST:4001,INVALID_EMAIL_TO_ADDRESS:4003,SCHEDULE_PAYMENT_ERROR_FOR_COSTCO_TRAVEL_MERCHANT:4113,SCHEDULE_PAYMENT_ERROR_FOR_CRUISE_LINE_MERCHANT:4114};$namespace.CarTripSummaryDisplayConstants={DISPLAY_CAR_TRIP_SUMMARY_WITH_SELECTED_SEARCH_REQUESTS:0,DISPLAY_CAR_TRIP_SUMMARY_UPTO_AGENCY_LOCATION:1,DISPLAY_CAR_TRIP_SUMMARY_UPTO_CATEGORY:2,DISPLAY_CAR_TRIP_SUMMARY_UPTO_EQUIPMENTS:3};$namespace.Country={US_COUNTRY_CODE:"US",CANADA_COUNTRY_CODE:"CA"};
$namespace.CountryName={US_COUNTRY_NAME:"USA",CANADA_COUNTRY_NAME:"CANADA"};$namespace.CityLocationTypeSearch={CITY_STATE:1,ZIP_CODE:2,STREET_ADDRESS:3};$namespace.StreetAddressSelectedLocation={PICKUP_ONLY:0,DROPOFF_ONLY:1,BOTH_PICKUP_AND_DROPOFF:2};$namespace.BookingType={MEMBER_DETAILS_VP_BOOKING:0,MEMBER_DETAILS_CRUISE_BOOKING:1,MEMBER_DETAILS_RENTAL_CAR_BOOKING:2};
$namespace.CruiseTripSummaryDisplayConstants={DISPLAY_CRUISE_TRIP_ALL_SUMMARY_INFO:0,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_SAILING_INFO:1,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_PASSENGER_INFO:2,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_STATEROOM_TYPE_INFO:3,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_CATEGORY_INFO:4,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_STATEROOM_INFO:5,DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_PRE_OR_POST_INFO:6};
$namespace.BookingPromotionConstants={BOOKING_PROMOTION_CREATION_ERROR:4705,PROMOTION_COMPUTATION_ERROR:4706,DUPLICATE_BOOKING_PROMOTION:4707,BOOKING_PROMOTION_DELETION_ERROR:4708,BOOKING_PROMOTION_FETCH_ERROR:4709,BOOKING_PROMOTION_ERROR:4710,BOOKING_PROMOTION_APPLICABLE:4711,BOOKING_PROMOTION_ERROR_RESPONSIVE:4713,BOOKING_PROMOTION_ALREADY_APPLIED_RESPONSIVE:4714};$namespace.WaitForElement={TIME_TO_WAIT:500,TOTAL_WAIT_TIME:3E5};
$namespace.CookieConstants={COOKIE_NAME_WIDGET_TAB_SELECTED:"WIDGET_TAB_SELECTED",COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL:"HOTEL",COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT:"HOTEL_FLIGHT",COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR:"HOTEL_FLIGHT_CAR",COOKIE_VALUE_WIDGET_TAB_SELECTED_VACATION_PACKAGE:"VACATION_PACKAGE",COOKIE_VALUE_TRAVELLER_INFO_PAGE_POP_UP:"VIEW HOTEL_FLIGHT DEALS",COOKIE_VALUE_HFC_NO_CAR_AVAILABLE_ERROR_POP_UP:"HFC NO CAR AVAILABLE"};
$namespace.AnalyticsConstants={GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_VACATION_PACKAGE:"vp",GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_ONLY:"ho",GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_FLIGHT:"dp/hf",GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_FLIGHT_CAR:"dp/hfc",GOOGLE_ANALYTICS_ERROR_101_EVENT_ACTION:"Payment_Error_101",ADOBE_ANALYTICS_TAG_VACATION_PACKAGE:"vacation package",ADOBE_ANALYTICS_TAG_HOTEL_ONLY:"hotel only",ADOBE_ANALYTICS_TAG_DYNAMIC_PACKAGE:"dynamic package",ADOBE_ANALYTICS_TAG_HOTEL_FLIGHT_CAR:"Dynamic Package HFC",
ADOBE_ANALYTICS_TAG_VACATION_PACKAGE_HFC:"Vacation Package HFC"};$namespace.CruiseStateroomConstants={CRUISE_STATEROOM_SELECTION_FILTER_STATE:"cruise-stateroom-selection-filter-state",CRUISE_STATEROOM_BEST_VALUE_STATE:"ruise-stateroom-best-value-state",CRUISE_STATEROOM_BEST_PRICE_KEY:"Best_Price",CRUISE_STATEROOM_PRICE_CHANGED_KEY:"Changed",CRUISE_STATEROOM_GUARANTEED_SELECTION:"guaranteed-selection"};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		
	$namespace.PageHistoryConstants = new function() {
	
			this.HISTORY_CRUISE_HOME = 3;
		
			this.HISTORY_FINALIZE_CAR_BOOKING = 3005;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL = 1002;
		
			this.HISTORY_CRUISE_ADD_ON_SPECIAL_REQUESTS = 2613;
		
			this.HISTORY_CRUISE_PACKAGE = 14;
		
			this.HISTORY_CRUISE_SAILING_SEARCH_RESULTS = 1501;
		
			this.HISTORY_LANDING_URL = 0;
		
			this.HISTORY_CRUISE_CATEGORY_GROUP_RESULTS = 1503;
		
			this.HISTORY_PASSENGER_DETAILS = 2003;
		
			this.HISTORY_CRUISE_POST_HOTEL_RESULTS = 2604;
		
			this.HISTORY_CAR_BOOKING_CONFIRMATION = 3007;
		
			this.HISTORY_HOBE_SPECIAL_REQUESTS = 3508;
		
			this.HISTORY_PAYMENT = 2006;
		
			this.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION = 1004;
		
			this.HISTORY_CAR_SEARCH_TAB = 4005;
		
			this.HISTORY_CRUISE_DESTINATION_LANDING = 8;
		
			this.HISTORY_HOBE_REVIEW_AND_CONFIRM = 3505;
		
			this.HISTORY_SEARCH_RESULT_ALL_PACKAGES = 1001;
		
			this.HISTORY_MULTISESSION_PAYMENT_SUMMARY = 2016;
		
			this.HISTORY_HOBE_CATEGORY_SELECTION = 3502;
		
			this.HISTORY_HOME = 1;
		
			this.HISTORY_MULTISESSION_PAYMENT = 2015;
		
			this.HISTORY_SEARCH_RESULT_SINGLE_CITY_PACKAGE_OVERVIEW = 1013;
		
			this.HISTORY_CAR_BOOKING_RECAP = 3004;
		
			this.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY_AUTHENTICATE = 1510;
		
			this.HISTORY_MANAGE_MY_PAYMENTS = 2014;
		
			this.HISTORY_CRUISE_CABIN_RESULTS = 1505;
		
			this.HISTORY_CRUISE_BOOKING_CONFIRMATION_WITH_SUMMARY = 2504;
		
			this.HISTORY_CRUISE_FLIGHT_SEAT_SELECTION = 2614;
		
			this.HISTORY_CRUISE_PASSENGER_DETAILS_WITHOUT_BOOKING = 2500;
		
			this.HISTORY_CRUISE_FINALIZE_BOOKING = 2610;
		
			this.HISTORY_CRUISE_DETAILS = 1508;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT = 1005;
		
			this.HISTORY_GENERAL_INFO = 18;
		
			this.HISTORY_CRUISE_BOOKING_CONFIRMATION = 2611;
		
			this.HISTORY_CRUISE_PRE_HOTEL_RESULTS = 2603;
		
			this.HISTORY_CRUISE_PASSENGER_DETAILS = 2501;
		
			this.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY = 1507;
		
			this.HISTORY_RIGHT_CONTENT_HOTEL = 17;
		
			this.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL = 1009;
		
			this.HISTORY_HOTEL = 16;
		
			this.HISTORY_SEARCH_RESULT_WITH_SELECTED_AND_ADDITIONAL_FLIGHTS_MULTICITY = 1017;
		
			this.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE = 1014;
		
			this.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE = 1506;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION = 1003;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_HOTEL = 1006;
		
			this.HISTORY_PAYMENT_SUMMARY = 2007;
		
			this.HISTORY_BALANCE_PAYMENT = 2013;
		
			this.HISTORY_SPECIAL_REQUESTS = 2004;
		
			this.HISTORY_ITINERARY_MEMBER_LOGIN = 2009;
		
			this.HISTORY_CRUISE_PRE_POST_FLIGHT_RESULTS = 2602;
		
			this.HISTORY_SINGLE_CITY_FINAL_BOOKING_CONFIRMATION = 2019;
		
			this.HISTORY_ANCILLARY_CATEGORY_LANDING = 12;
		
			this.HISTORY_CRUISE_TOUR_SEARCH_TAB = 4002;
		
			this.HISTORY_VP_SEARCH_TAB = 4000;
		
			this.HISTORY_SEARCH_RESULT_WITH_SELECTED_AND_ADDITIONAL_FLIGHTS = 1012;
		
			this.HISTORY_SWEEPSTAKES_LANDING = 21;
		
			this.HISTORY_CRUISE_SHIP_LANDING = 10;
		
			this.HISTORY_CRUISE_SAILING_SEARCH_TAB = 4001;
		
			this.HISTORY_CRUISE_CATEGORY_RESULTS = 1504;
		
			this.HISTORY_CRUISE_DETAILS_AUTHENTICATED = 1511;
		
			this.HISTORY_CRUISE_ACCOUNT_BOOKING_CONFIRMATION = 2612;
		
			this.HISTORY_VP_MULTICITY_HOTEL_RESULTS = 1019;
		
			this.HISTORY_CRUISE_MULTISESSION_BOOKING_CONFIRMATION_WITH_SUMMARY = 2608;
		
			this.HISTORY_ALL_INCLUSIVE_SEARCH_TAB = 4007;
		
			this.HISTORY_HOW_WAS_YOUR_TRIP_SURVEY = 6000;
		
			this.HISTORY_MEMBER_PAGE = 5000;
		
			this.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE = 1015;
		
			this.HISTORY_RIGHT_CONTENT_THEME_PARK = 22;
		
			this.HISTORY_CRUISE_SPECIAL_REQUESTS = 2502;
		
			this.HISTORY_SEARCH_RESULT_CAR_EQUIPMENT = 3003;
		
			this.HISTORY_HOBE_BOOKING_CONFIRMATION = 3506;
		
			this.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS = 1021;
		
			this.HISTORY_SINGLE_CITY_FINAL_BOOKING_CONFIRMATION_MEMBER_ACCOUNT = 2020;
		
			this.HISTORY_HOBE_TRAVELER_INFO_PAGE = 3503;
		
			this.HISTORY_CRUISE_PRE_POST_TRANSFER_RESULTS = 2605;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS = 1007;
		
			this.HISTORY_BOOKING_MEMBER_LOGIN = 2002;
		
			this.HISTORY_VP_MULTICITY_ACTIVITY_RESPONSIVE = 1018;
		
			this.HISTORY_BALANCE_PAYMENT_SUMMARY = 2012;
		
			this.HISTORY_CRUISE_LINE_LANDING = 9;
		
			this.HISTORY_MULTICITY_INTERCITY_FLIGHTS_RESULT = 1020;
		
			this.HISTORY_HOBE_PAYMENT_PAGE = 3504;
		
			this.HISTORY_CRUISE_PAYMENT = 2609;
		
			this.HISTORY_SEARCH_RESULT_CAR_STREET_ADDRESS = 3006;
		
			this.HISTORY_MEMBER_BOOKING_DETAILS = 2010;
		
			this.HISTORY_SEARCH_RESULT_SINGLE_CITY_FLIGHT = 1011;
		
			this.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT = 1010;
		
			this.HISTORY_SEARCH_RESULT_CAR_AGENCY_MATRIX = 3002;
		
			this.HISTORY_HOBE_SEARCH_RESULTS = 3501;
		
			this.HISTORY_CRUISE_BOOKING_RECAP = 2503;
		
			this.HISTORY_SITE_MAP = 19;
		
			this.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES = 1008;
		
			this.HISTORY_BOOKING_DETAILS = 2011;
		
			this.HISTORY_CRUISE_PRE_POST_CHANGE_FLIGHT = 2607;
		
			this.HISTORY_ANCILLARY_PACKAGE = 15;
		
			this.HISTORY_HOBE_AUTHENTICATED_SEARCH_RESULTS = 3507;
		
			this.HISTORY_CRUISE_BOOKING_CONFIRMATION_WITH_WIDGET = 2505;
		
			this.HISTORY_BOOKING_RECAP = 2001;
		
			this.HISTORY_CRUISE_CABIN_RESULTS_STATEROOM_SELECTION = 1512;
		
			this.HISTORY_SEARCH_RESULT_CAR_AGENCY = 3001;
		
			this.HISTORY_CRUISE_PRE_POST_SEARCH = 2601;
		
			this.HISTORY_ANCILLARY_LANDING = 11;
		
			this.HISTORY_HOBE_SEARCH_TAB = 4006;
		
			this.HISTORY_SINGLE_CITY_PAYMENT_OPTIONS = 2017;
		
			this.HISTORY_ORDER_CONFIRMATION = 2008;
		
			this.HISTORY_SINGLE_CITY_FINALIZE_BOOKING = 2018;
		
			this.HISTORY_CRUISE_AUTHENTICATED_SEARCH_RESULTS = 1509;
		
			this.HISTORY_SEAT_MAP_SELECTION = 2005;
		
			this.HISTORY_CRUISE_PASSENGER_INFO = 1502;
		
	this.PAGE_HISTORY = {};
	
		this.PAGE_HISTORY["3002"] = {"historyCode":"3002","requiresSession":true};
	
		this.PAGE_HISTORY["3001"] = {"historyCode":"3001","requiresSession":true};
	
		this.PAGE_HISTORY["10"] = {"historyCode":"10","requiresSession":false};
	
		this.PAGE_HISTORY["11"] = {"historyCode":"11","requiresSession":false};
	
		this.PAGE_HISTORY["12"] = {"historyCode":"12","requiresSession":false};
	
		this.PAGE_HISTORY["14"] = {"historyCode":"14","requiresSession":false};
	
		this.PAGE_HISTORY["6000"] = {"historyCode":"6000","requiresSession":true};
	
		this.PAGE_HISTORY["15"] = {"historyCode":"15","requiresSession":false};
	
		this.PAGE_HISTORY["16"] = {"historyCode":"16","requiresSession":false};
	
		this.PAGE_HISTORY["17"] = {"historyCode":"17","requiresSession":false};
	
		this.PAGE_HISTORY["18"] = {"historyCode":"18","requiresSession":false};
	
		this.PAGE_HISTORY["19"] = {"historyCode":"19","requiresSession":false};
	
		this.PAGE_HISTORY["0"] = {"historyCode":"0","requiresSession":false};
	
		this.PAGE_HISTORY["1503"] = {"historyCode":"1503","requiresSession":true};
	
		this.PAGE_HISTORY["1"] = {"historyCode":"1","requiresSession":false};
	
		this.PAGE_HISTORY["1502"] = {"historyCode":"1502","requiresSession":true};
	
		this.PAGE_HISTORY["1501"] = {"historyCode":"1501","requiresSession":true};
	
		this.PAGE_HISTORY["3"] = {"historyCode":"3","requiresSession":false};
	
		this.PAGE_HISTORY["3007"] = {"historyCode":"3007","requiresSession":true};
	
		this.PAGE_HISTORY["3006"] = {"historyCode":"3006","requiresSession":true};
	
		this.PAGE_HISTORY["3005"] = {"historyCode":"3005","requiresSession":true};
	
		this.PAGE_HISTORY["3004"] = {"historyCode":"3004","requiresSession":true};
	
		this.PAGE_HISTORY["3003"] = {"historyCode":"3003","requiresSession":true};
	
		this.PAGE_HISTORY["8"] = {"historyCode":"8","requiresSession":false};
	
		this.PAGE_HISTORY["9"] = {"historyCode":"9","requiresSession":false};
	
		this.PAGE_HISTORY["1508"] = {"historyCode":"1508","requiresSession":true};
	
		this.PAGE_HISTORY["1507"] = {"historyCode":"1507","requiresSession":true};
	
		this.PAGE_HISTORY["1505"] = {"historyCode":"1505","requiresSession":true};
	
		this.PAGE_HISTORY["21"] = {"historyCode":"21","requiresSession":false};
	
		this.PAGE_HISTORY["1504"] = {"historyCode":"1504","requiresSession":true};
	
		this.PAGE_HISTORY["22"] = {"historyCode":"22","requiresSession":false};
	
		this.PAGE_HISTORY["2603"] = {"historyCode":"2603","requiresSession":true};
	
		this.PAGE_HISTORY["2602"] = {"historyCode":"2602","requiresSession":true};
	
		this.PAGE_HISTORY["1512"] = {"historyCode":"1512","requiresSession":true};
	
		this.PAGE_HISTORY["2601"] = {"historyCode":"2601","requiresSession":true};
	
		this.PAGE_HISTORY["1511"] = {"historyCode":"1511","requiresSession":true};
	
		this.PAGE_HISTORY["2609"] = {"historyCode":"2609","requiresSession":true};
	
		this.PAGE_HISTORY["2607"] = {"historyCode":"2607","requiresSession":true};
	
		this.PAGE_HISTORY["2605"] = {"historyCode":"2605","requiresSession":true};
	
		this.PAGE_HISTORY["2604"] = {"historyCode":"2604","requiresSession":true};
	
		this.PAGE_HISTORY["4000"] = {"historyCode":"4000","requiresSession":true};
	
		this.PAGE_HISTORY["4001"] = {"historyCode":"4001","requiresSession":true};
	
		this.PAGE_HISTORY["4002"] = {"historyCode":"4002","requiresSession":true};
	
		this.PAGE_HISTORY["1011"] = {"historyCode":"1011","requiresSession":true};
	
		this.PAGE_HISTORY["1010"] = {"historyCode":"1010","requiresSession":true};
	
		this.PAGE_HISTORY["1008"] = {"historyCode":"1008","requiresSession":true};
	
		this.PAGE_HISTORY["2614"] = {"historyCode":"2614","requiresSession":true};
	
		this.PAGE_HISTORY["1007"] = {"historyCode":"1007","requiresSession":true};
	
		this.PAGE_HISTORY["1006"] = {"historyCode":"1006","requiresSession":true};
	
		this.PAGE_HISTORY["2612"] = {"historyCode":"2612","requiresSession":true};
	
		this.PAGE_HISTORY["1005"] = {"historyCode":"1005","requiresSession":true};
	
		this.PAGE_HISTORY["2611"] = {"historyCode":"2611","requiresSession":true};
	
		this.PAGE_HISTORY["1004"] = {"historyCode":"1004","requiresSession":true};
	
		this.PAGE_HISTORY["2610"] = {"historyCode":"2610","requiresSession":true};
	
		this.PAGE_HISTORY["1003"] = {"historyCode":"1003","requiresSession":true};
	
		this.PAGE_HISTORY["1002"] = {"historyCode":"1002","requiresSession":true};
	
		this.PAGE_HISTORY["1001"] = {"historyCode":"1001","requiresSession":true};
	
		this.PAGE_HISTORY["1009"] = {"historyCode":"1009","requiresSession":true};
	
		this.PAGE_HISTORY["1021"] = {"historyCode":"1021","requiresSession":true};
	
		this.PAGE_HISTORY["1020"] = {"historyCode":"1020","requiresSession":true};
	
		this.PAGE_HISTORY["1019"] = {"historyCode":"1019","requiresSession":true};
	
		this.PAGE_HISTORY["2504"] = {"historyCode":"2504","requiresSession":true};
	
		this.PAGE_HISTORY["1018"] = {"historyCode":"1018","requiresSession":true};
	
		this.PAGE_HISTORY["2503"] = {"historyCode":"2503","requiresSession":true};
	
		this.PAGE_HISTORY["1017"] = {"historyCode":"1017","requiresSession":true};
	
		this.PAGE_HISTORY["2502"] = {"historyCode":"2502","requiresSession":true};
	
		this.PAGE_HISTORY["2501"] = {"historyCode":"2501","requiresSession":true};
	
		this.PAGE_HISTORY["1015"] = {"historyCode":"1015","requiresSession":true};
	
		this.PAGE_HISTORY["2500"] = {"historyCode":"2500","requiresSession":true};
	
		this.PAGE_HISTORY["1013"] = {"historyCode":"1013","requiresSession":true};
	
		this.PAGE_HISTORY["1012"] = {"historyCode":"1012","requiresSession":true};
	
		this.PAGE_HISTORY["4005"] = {"historyCode":"4005","requiresSession":true};
	
		this.PAGE_HISTORY["4006"] = {"historyCode":"4006","requiresSession":true};
	
		this.PAGE_HISTORY["4007"] = {"historyCode":"4007","requiresSession":true};
	
		this.PAGE_HISTORY["2505"] = {"historyCode":"2505","requiresSession":true};
	
		this.PAGE_HISTORY["2001"] = {"historyCode":"2001","requiresSession":true};
	
		this.PAGE_HISTORY["5000"] = {"historyCode":"5000","requiresSession":true};
	
		this.PAGE_HISTORY["2012"] = {"historyCode":"2012","requiresSession":true};
	
		this.PAGE_HISTORY["2011"] = {"historyCode":"2011","requiresSession":true};
	
		this.PAGE_HISTORY["2010"] = {"historyCode":"2010","requiresSession":true};
	
		this.PAGE_HISTORY["2009"] = {"historyCode":"2009","requiresSession":true};
	
		this.PAGE_HISTORY["2008"] = {"historyCode":"2008","requiresSession":true};
	
		this.PAGE_HISTORY["2007"] = {"historyCode":"2007","requiresSession":true};
	
		this.PAGE_HISTORY["2006"] = {"historyCode":"2006","requiresSession":true};
	
		this.PAGE_HISTORY["2005"] = {"historyCode":"2005","requiresSession":true};
	
		this.PAGE_HISTORY["2004"] = {"historyCode":"2004","requiresSession":true};
	
		this.PAGE_HISTORY["2003"] = {"historyCode":"2003","requiresSession":true};
	
		this.PAGE_HISTORY["2002"] = {"historyCode":"2002","requiresSession":true};
	
		this.PAGE_HISTORY["2020"] = {"historyCode":"2020","requiresSession":true};
	
		this.PAGE_HISTORY["3505"] = {"historyCode":"3505","requiresSession":true};
	
		this.PAGE_HISTORY["2019"] = {"historyCode":"2019","requiresSession":true};
	
		this.PAGE_HISTORY["3504"] = {"historyCode":"3504","requiresSession":true};
	
		this.PAGE_HISTORY["2018"] = {"historyCode":"2018","requiresSession":true};
	
		this.PAGE_HISTORY["3503"] = {"historyCode":"3503","requiresSession":true};
	
		this.PAGE_HISTORY["2017"] = {"historyCode":"2017","requiresSession":true};
	
		this.PAGE_HISTORY["3502"] = {"historyCode":"3502","requiresSession":true};
	
		this.PAGE_HISTORY["3501"] = {"historyCode":"3501","requiresSession":true};
	
		this.PAGE_HISTORY["2014"] = {"historyCode":"2014","requiresSession":true};
	
		this.PAGE_HISTORY["2013"] = {"historyCode":"2013","requiresSession":true};
	
		this.PAGE_HISTORY["3508"] = {"historyCode":"3508","requiresSession":true};
	
		this.PAGE_HISTORY["3506"] = {"historyCode":"3506","requiresSession":true};
	
	 
	};
	
	})(CT, {});
		
	/*
 jQuery JavaScript Library v2.2.4
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2016-05-20T17:23Z
 Sizzle CSS Selector Engine v2.2.1
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2015-10-17
*/
(function(u,ka){"object"===typeof module&&"object"===typeof module.exports?module.exports=u.document?ka(u,!0):function(u){if(!u.document)throw Error("jQuery requires a window with a document");return ka(u)}:ka(u)})("undefined"!==typeof window?window:this,function(u,ka){function Ja(a){var b=!!a&&"length"in a&&a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:"array"===d||0===b||"number"===typeof b&&0<b&&b-1 in a}function Ka(a,b,d){if(c.isFunction(b))return c.grep(a,function(a,c){return!!b.call(a,
c,a)!==d});if(b.nodeType)return c.grep(a,function(a){return a===b!==d});if("string"===typeof b){if(Ob.test(b))return c.filter(b,a,d);b=c.filter(b,a)}return c.grep(a,function(a){return-1<la.call(b,a)!==d})}function $a(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function Pb(a){var b={};c.each(a.match(K)||[],function(a,c){b[c]=!0});return b}function ba(){q.removeEventListener("DOMContentLoaded",ba);u.removeEventListener("load",ba);c.ready()}function Y(){this.expando=c.expando+Y.uid++}function ab(a,
b,d){if(void 0===d&&1===a.nodeType)if(d="data-"+b.replace(bb,"-$&").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Qb.test(d)?c.parseJSON(d):d}catch(e){}x.set(a,b,d)}else d=void 0;return d}function cb(a,b,d,e){var f=1,g=20,h=e?function(){return e.cur()}:function(){return c.css(a,b,"")},l=h(),k=d&&d[3]||(c.cssNumber[b]?"":"px"),m=(c.cssNumber[b]||"px"!==k&&+l)&&sa.exec(c.css(a,b));if(m&&m[3]!==k){k=k||m[3];d=d||[];m=+l||1;do f=
f||".5",m/=f,c.style(a,b,m+k);while(f!==(f=h()/l)&&1!==f&&--g)}if(d){m=+m||+l||0;var n=d[1]?m+(d[1]+1)*d[2]:+d[2];e&&(e.unit=k,e.start=m,e.end=n)}return n}function D(a,b){var d="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&c.nodeName(a,b)?c.merge([a],d):d}function La(a,b){for(var d=0,c=a.length;d<c;d++)t.set(a[d],"globalEval",!b||t.get(b[d],"globalEval"))}function db(a,b,d,e,f){for(var g,
h,l,k=b.createDocumentFragment(),m=[],n=0,p=a.length;n<p;n++)if((g=a[n])||0===g)if("object"===c.type(g))c.merge(m,g.nodeType?[g]:g);else if(Rb.test(g)){h=h||k.appendChild(b.createElement("div"));l=(eb.exec(g)||["",""])[1].toLowerCase();l=H[l]||H._default;h.innerHTML=l[1]+c.htmlPrefilter(g)+l[2];for(l=l[0];l--;)h=h.lastChild;c.merge(m,h.childNodes);h=k.firstChild;h.textContent=""}else m.push(b.createTextNode(g));k.textContent="";for(n=0;g=m[n++];)if(e&&-1<c.inArray(g,e))f&&f.push(g);else if(a=c.contains(g.ownerDocument,
g),h=D(k.appendChild(g),"script"),a&&La(h),d)for(l=0;g=h[l++];)fb.test(g.type||"")&&d.push(g);return k}function ta(){return!0}function S(){return!1}function gb(){try{return q.activeElement}catch(a){}}function Ma(a,b,d,e,f,g){var h;if("object"===typeof b){"string"!==typeof d&&(e=e||d,d=void 0);for(h in b)Ma(a,h,d,e,b[h],g);return a}null==e&&null==f?(f=d,e=d=void 0):null==f&&("string"===typeof d?(f=e,e=void 0):(f=e,e=d,d=void 0));if(!1===f)f=S;else if(!f)return a;if(1===g){var l=f;f=function(a){c().off(a);
return l.apply(this,arguments)};f.guid=l.guid||(l.guid=c.guid++)}return a.each(function(){c.event.add(this,b,f,e,d)})}function hb(a,b){return c.nodeName(a,"table")&&c.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Sb(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function Tb(a){var b=Ub.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function ib(a,b){var d,e;if(1===b.nodeType){if(t.hasData(a)){var f=
t.access(a);var g=t.set(b,f);if(f=f.events)for(e in delete g.handle,g.events={},f)for(g=0,d=f[e].length;g<d;g++)c.event.add(b,e,f[e][g])}x.hasData(a)&&(a=x.access(a),a=c.extend({},a),x.set(b,a))}}function ca(a,b,d,e){b=jb.apply([],b);var f,g=0,h=a.length,l=h-1,k=b[0],m=c.isFunction(k);if(m||1<h&&"string"===typeof k&&!A.checkClone&&Vb.test(k))return a.each(function(c){var f=a.eq(c);m&&(b[0]=k.call(this,c,f.html()));ca(f,b,d,e)});if(h){var n=db(b,a[0].ownerDocument,!1,a,e);var p=n.firstChild;1===n.childNodes.length&&
(n=p);if(p||e){p=c.map(D(n,"script"),Sb);for(f=p.length;g<h;g++){var r=n;g!==l&&(r=c.clone(r,!0,!0),f&&c.merge(p,D(r,"script")));d.call(a[g],r,g)}if(f)for(n=p[p.length-1].ownerDocument,c.map(p,Tb),g=0;g<f;g++)r=p[g],fb.test(r.type||"")&&!t.access(r,"globalEval")&&c.contains(n,r)&&(r.src?c._evalUrl&&c._evalUrl(r.src):c.globalEval(r.textContent.replace(Wb,"")))}}return a}function kb(a,b,d){for(var e=b?c.filter(b,a):a,f=0;null!=(b=e[f]);f++)d||1!==b.nodeType||c.cleanData(D(b)),b.parentNode&&(d&&c.contains(b.ownerDocument,
b)&&La(D(b,"script")),b.parentNode.removeChild(b));return a}function lb(a,b){a=c(b.createElement(a)).appendTo(b.body);b=c.css(a[0],"display");a.detach();return b}function Na(a){var b=q,d=mb[a];d||(d=lb(a,b),"none"!==d&&d||(Aa=(Aa||c("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Aa[0].contentDocument,b.write(),b.close(),d=lb(a,b),Aa.detach()),mb[a]=d);return d}function ma(a,b,d){var e=a.style;var f=(d=d||Da(a))?d.getPropertyValue(b)||d[b]:void 0;""!==f&&void 0!==
f||c.contains(a.ownerDocument,a)||(f=c.style(a,b));if(d&&!A.pixelMarginRight()&&Oa.test(f)&&nb.test(b)){a=e.width;b=e.minWidth;var g=e.maxWidth;e.minWidth=e.maxWidth=e.width=f;f=d.width;e.width=a;e.minWidth=b;e.maxWidth=g}return void 0!==f?f+"":f}function Pa(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function ob(a){if(a in pb)return a;for(var b=a[0].toUpperCase()+a.slice(1),d=qb.length;d--;)if(a=qb[d]+b,a in pb)return a}function rb(a,b,d){return(a=
sa.exec(b))?Math.max(0,a[2]-(d||0))+(a[3]||"px"):b}function sb(a,b,d,e,f){b=d===(e?"border":"content")?4:"width"===b?1:0;for(var g=0;4>b;b+=2)"margin"===d&&(g+=c.css(a,d+Z[b],!0,f)),e?("content"===d&&(g-=c.css(a,"padding"+Z[b],!0,f)),"margin"!==d&&(g-=c.css(a,"border"+Z[b]+"Width",!0,f))):(g+=c.css(a,"padding"+Z[b],!0,f),"padding"!==d&&(g+=c.css(a,"border"+Z[b]+"Width",!0,f)));return g}function tb(a,b,d){var e=!0,f="width"===b?a.offsetWidth:a.offsetHeight,g=Da(a),h="border-box"===c.css(a,"boxSizing",
!1,g);if(0>=f||null==f){f=ma(a,b,g);if(0>f||null==f)f=a.style[b];if(Oa.test(f))return f;e=h&&(A.boxSizingReliable()||f===a.style[b]);f=parseFloat(f)||0}return f+sb(a,b,d||(h?"border":"content"),e,g)+"px"}function ub(a,b){for(var d,e,f,g=[],h=0,l=a.length;h<l;h++)e=a[h],e.style&&(g[h]=t.get(e,"olddisplay"),d=e.style.display,b?(g[h]||"none"!==d||(e.style.display=""),""===e.style.display&&ua(e)&&(g[h]=t.access(e,"olddisplay",Na(e.nodeName)))):(f=ua(e),"none"===d&&f||t.set(e,"olddisplay",f?d:c.css(e,
"display"))));for(h=0;h<l;h++)e=a[h],!e.style||b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?g[h]||"":"none");return a}function E(a,b,d,c,f){return new E.prototype.init(a,b,d,c,f)}function vb(){u.setTimeout(function(){na=void 0});return na=c.now()}function Ea(a,b){var d=0,c={height:a};for(b=b?1:0;4>d;d+=2-b){var f=Z[d];c["margin"+f]=c["padding"+f]=a}b&&(c.opacity=c.width=a);return c}function wb(a,b,d){for(var c,f=(I.tweeners[b]||[]).concat(I.tweeners["*"]),g=0,h=f.length;g<
h;g++)if(c=f[g].call(d,b,a))return c}function Xb(a,b){var d,e;for(d in a){var f=c.camelCase(d);var g=b[f];var h=a[d];c.isArray(h)&&(g=h[1],h=a[d]=h[0]);d!==f&&(a[f]=h,delete a[d]);if((e=c.cssHooks[f])&&"expand"in e)for(d in h=e.expand(h),delete a[f],h)d in a||(a[d]=h[d],b[d]=g);else b[f]=g}}function I(a,b,d){var e,f=0,g=I.prefilters.length,h=c.Deferred().always(function(){delete l.elem}),l=function(){if(e)return!1;var b=na||vb();b=Math.max(0,k.startTime+k.duration-b);for(var d=1-(b/k.duration||0),
c=0,f=k.tweens.length;c<f;c++)k.tweens[c].run(d);h.notifyWith(a,[k,d,b]);if(1>d&&f)return b;h.resolveWith(a,[k]);return!1},k=h.promise({elem:a,props:c.extend({},b),opts:c.extend(!0,{specialEasing:{},easing:c.easing._default},d),originalProperties:b,originalOptions:d,startTime:na||vb(),duration:d.duration,tweens:[],createTween:function(b,d){b=c.Tween(a,k.opts,b,d,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(b);return b},stop:function(b){var d=0,c=b?k.tweens.length:0;if(e)return this;for(e=
!0;d<c;d++)k.tweens[d].run(1);b?(h.notifyWith(a,[k,1,0]),h.resolveWith(a,[k,b])):h.rejectWith(a,[k,b]);return this}});d=k.props;for(Xb(d,k.opts.specialEasing);f<g;f++)if(b=I.prefilters[f].call(k,a,d,k.opts))return c.isFunction(b.stop)&&(c._queueHooks(k.elem,k.opts.queue).stop=c.proxy(b.stop,b)),b;c.map(d,wb,k);c.isFunction(k.opts.start)&&k.opts.start.call(a,k);c.fx.timer(c.extend(l,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always)}
function L(a){return a.getAttribute&&a.getAttribute("class")||""}function xb(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");var e=0,f=b.toLowerCase().match(K)||[];if(c.isFunction(d))for(;b=f[e++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(d)):(a[b]=a[b]||[]).push(d)}}function yb(a,b,d,e){function f(l){var k;g[l]=!0;c.each(a[l]||[],function(a,c){a=c(b,d,e);if("string"===typeof a&&!h&&!g[a])return b.dataTypes.unshift(a),f(a),!1;if(h)return!(k=a)});return k}var g={},h=a===Qa;return f(b.dataTypes[0])||
!g["*"]&&f("*")}function Ra(a,b){var d,e,f=c.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((f[d]?a:e||(e={}))[d]=b[d]);e&&c.extend(!0,a,e);return a}function Sa(a,b,d,e){var f;if(c.isArray(b))c.each(b,function(b,c){d||Yb.test(a)?e(a,c):Sa(a+"["+("object"===typeof c&&null!=c?b:"")+"]",c,d,e)});else if(d||"object"!==c.type(b))e(a,b);else for(f in b)Sa(a+"["+f+"]",b[f],d,e)}function zb(a){return c.isWindow(a)?a:9===a.nodeType&&a.defaultView}var da=[],q=u.document,aa=da.slice,jb=da.concat,Ta=
da.push,la=da.indexOf,Fa={},Zb=Fa.toString,T=Fa.hasOwnProperty,A={},c=function(a,b){return new c.fn.init(a,b)},$b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ac=/^-ms-/,bc=/-([\da-z])/gi,cc=function(a,b){return b.toUpperCase()};c.fn=c.prototype={jquery:"2.2.4",constructor:c,selector:"",length:0,toArray:function(){return aa.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:aa.call(this)},pushStack:function(a){a=c.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;
return a},each:function(a){return c.each(this,a)},map:function(a){return this.pushStack(c.map(this,function(b,d){return a.call(b,d,b)}))},slice:function(){return this.pushStack(aa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ta,sort:da.sort,splice:da.splice};c.extend=c.fn.extend=function(){var a,
b,d,e=arguments[0]||{},f=1,g=arguments.length,h=!1;"boolean"===typeof e&&(h=e,e=arguments[f]||{},f++);"object"===typeof e||c.isFunction(e)||(e={});f===g&&(e=this,f--);for(;f<g;f++)if(null!=(a=arguments[f]))for(b in a){var l=e[b];var k=a[b];e!==k&&(h&&k&&(c.isPlainObject(k)||(d=c.isArray(k)))?(d?(d=!1,l=l&&c.isArray(l)?l:[]):l=l&&c.isPlainObject(l)?l:{},e[b]=c.extend(h,l,k)):void 0!==k&&(e[b]=k))}return e};c.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===c.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!c.isArray(a)&&0<=b-parseFloat(b)+1},isPlainObject:function(a){var b;if("object"!==c.type(a)||a.nodeType||c.isWindow(a)||a.constructor&&!T.call(a,"constructor")&&!T.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||T.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;
return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?Fa[Zb.call(a)]||"object":typeof a},globalEval:function(a){var b=eval;if(a=c.trim(a))1===a.indexOf("use strict")?(b=q.createElement("script"),b.text=a,q.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(ac,"ms-").replace(bc,cc)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,c=0;if(Ja(a))for(d=a.length;c<
d&&!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a},trim:function(a){return null==a?"":(a+"").replace($b,"")},makeArray:function(a,b){b=b||[];null!=a&&(Ja(Object(a))?c.merge(b,"string"===typeof a?[a]:a):Ta.call(b,a));return b},inArray:function(a,b,d){return null==b?-1:la.call(b,a,d)},merge:function(a,b){for(var d=+b.length,c=0,f=a.length;c<d;c++)a[f++]=b[c];a.length=f;return a},grep:function(a,b,d){for(var c=[],f=0,g=a.length,h=!d;f<g;f++)d=!b(a[f],f),d!==
h&&c.push(a[f]);return c},map:function(a,b,d){var c,f=0,g=[];if(Ja(a))for(c=a.length;f<c;f++){var h=b(a[f],f,d);null!=h&&g.push(h)}else for(f in a)h=b(a[f],f,d),null!=h&&g.push(h);return jb.apply([],g)},guid:1,proxy:function(a,b){if("string"===typeof b){var d=a[b];b=a;a=d}if(c.isFunction(a)){var e=aa.call(arguments,2);d=function(){return a.apply(b||this,e.concat(aa.call(arguments)))};d.guid=a.guid=a.guid||c.guid++;return d}},now:Date.now,support:A});"function"===typeof Symbol&&(c.fn[Symbol.iterator]=
da[Symbol.iterator]);c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){Fa["[object "+b+"]"]=b.toLowerCase()});var pa=function(a){function b(a,b,c,d){var e,f,g,v,h=b&&b.ownerDocument,w=b?b.nodeType:9;c=c||[];if("string"!==typeof a||!a||1!==w&&9!==w&&11!==w)return c;if(!d&&((b?b.ownerDocument||b:F)!==z&&va(b),b=b||z,V)){if(11!==w&&(v=xa.exec(a)))if(e=v[1])if(9===w)if(f=b.getElementById(e)){if(f.id===e)return c.push(f),c}else return c;else{if(h&&(f=
h.getElementById(e))&&Ca(b,f)&&f.id===e)return c.push(f),c}else{if(v[2])return oa.apply(c,b.getElementsByTagName(a)),c;if((e=v[3])&&G.getElementsByClassName&&b.getElementsByClassName)return oa.apply(c,b.getElementsByClassName(e)),c}if(!(!G.qsa||O[a+" "]||Q&&Q.test(a))){if(1!==w){h=b;var l=a}else if("object"!==b.nodeName.toLowerCase()){(g=b.getAttribute("id"))?g=g.replace(ya,"\\$&"):b.setAttribute("id",g=B);v=ba(a);e=v.length;for(f=ka.test(g)?"#"+g:"[id='"+g+"']";e--;)v[e]=f+" "+r(v[e]);l=v.join(",");
h=ja.test(a)&&n(b.parentNode)||b}if(l)try{return oa.apply(c,h.querySelectorAll(l)),c}catch(Ec){}finally{g===B&&b.removeAttribute("id")}}}return Aa(a.replace(S,"$1"),b,c,d)}function d(){function a(c,d){b.push(c+" ")>C.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function c(a){a[B]=!0;return a}function f(a){var b=z.createElement("div");try{return!!a(b)}catch(w){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function g(a,b){a=a.split("|");for(var c=a.length;c--;)C.attrHandle[a[c]]=
b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function l(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function m(a){return c(function(b){b=+b;return c(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=
f[g]]&&(c[e]=!(d[e]=c[e]))})})}function n(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function p(){}function r(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function t(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=E++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var v,h=[ea,f];if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){var w=b[B]||(b[B]={});w=w[b.uniqueID]||(w[b.uniqueID]=
{});if((v=w[d])&&v[0]===ea&&v[1]===f)return h[2]=v[2];w[d]=h;if(h[2]=a(b,c,g))return!0}}}function u(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,v=a.length,w=null!=b;h<v;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),w&&b.push(h);return g}function A(a,d,e,f,g,h){f&&!f[B]&&(f=A(f));g&&!g[B]&&(g=A(g,h));return c(function(c,h,v,w){var l,k=[],m=[],M=h.length,N;if(!(N=c)){N=d||"*";for(var n=v.nodeType?[v]:v,Ba=[],
p=0,r=n.length;p<r;p++)b(N,n[p],Ba);N=Ba}N=!a||!c&&d?N:q(N,k,a,v,w);n=e?g||(c?a:M||f)?[]:h:N;e&&e(N,n,v,w);if(f){var U=q(n,m);f(U,[],v,w);for(v=U.length;v--;)if(l=U[v])n[m[v]]=!(N[m[v]]=l)}if(c){if(g||a){if(g){U=[];for(v=n.length;v--;)(l=n[v])&&U.push(N[v]=l);g(null,n=[],U,w)}for(v=n.length;v--;)(l=n[v])&&-1<(U=g?L(c,l):k[v])&&(c[U]=!(h[U]=l))}}else n=q(n===h?n.splice(M,n.length):n),g?g(null,h,n,w):oa.apply(h,n)})}function x(a){var b,c,d=a.length,e=C.relative[a[0].type];var f=e||C.relative[" "];for(var g=
e?1:0,h=t(function(a){return a===b},f,!0),v=t(function(a){return-1<L(b,a)},f,!0),l=[function(a,c,d){a=!e&&(d||c!==P)||((b=c).nodeType?h(a,c,d):v(a,c,d));b=null;return a}];g<d;g++)if(f=C.relative[a[g].type])l=[t(u(l),f)];else{f=C.filter[a[g].type].apply(null,a[g].matches);if(f[B]){for(c=++g;c<d&&!C.relative[a[c].type];c++);return A(1<g&&u(l),1<g&&r(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(S,"$1"),f,g<c&&x(a.slice(g,c)),c<d&&x(a=a.slice(c)),c<d&&r(a))}l.push(f)}return u(l)}function D(a,
d){var e=0<d.length,f=0<a.length,g=function(c,g,h,v,w){var l,k,m=0,M="0",N=c&&[],n=[],p=P,Ba=c||f&&C.find.TAG("*",w),r=ea+=null==p?1:Math.random()||.1,U=Ba.length;for(w&&(P=g===z||g||w);M!==U&&null!=(l=Ba[M]);M++){if(f&&l){var t=0;g||l.ownerDocument===z||(va(l),h=!V);for(;k=a[t++];)if(k(l,g||z,h)){v.push(l);break}w&&(ea=r)}e&&((l=!k&&l)&&m--,c&&N.push(l))}m+=M;if(e&&M!==m){for(t=0;k=d[t++];)k(N,n,g,h);if(c){if(0<m)for(;M--;)N[M]||n[M]||(n[M]=aa.call(v));n=q(n)}oa.apply(v,n);w&&!c&&0<n.length&&1<m+
d.length&&b.uniqueSort(v)}w&&(ea=r,P=p);return N};return e?c(g):g}var y,P,J,R,z,W,V,Q,wa,Ga,Ca,B="sizzle"+1*new Date,F=a.document,ea=0,E=0,H=d(),K=d(),O=d(),I=function(a,b){a===b&&(R=!0);return 0},X={}.hasOwnProperty,fa=[],aa=fa.pop,ca=fa.push,oa=fa.push,Z=fa.slice,L=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},da=/[\x20\t\r\n\f]+/g,S=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ma=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,na=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,
pa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,qa=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ka=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Y={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,
ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},sa=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,T=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ja=/[+~]/,ya=/'|\\/g,ha=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ia=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},ra=function(){va()};try{oa.apply(fa=Z.call(F.childNodes),F.childNodes),fa[F.childNodes.length].nodeType}catch(v){oa={apply:fa.length?function(a,b){ca.apply(a,Z.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}var G=b.support={};var za=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var va=b.setDocument=function(a){var b;a=a?a.ownerDocument||
a:F;if(a===z||9!==a.nodeType||!a.documentElement)return z;z=a;W=z.documentElement;V=!za(z);(b=z.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",ra,!1):b.attachEvent&&b.attachEvent("onunload",ra));G.attributes=f(function(a){a.className="i";return!a.getAttribute("className")});G.getElementsByTagName=f(function(a){a.appendChild(z.createComment(""));return!a.getElementsByTagName("*").length});G.getElementsByClassName=T.test(z.getElementsByClassName);G.getById=f(function(a){W.appendChild(a).id=
B;return!z.getElementsByName||!z.getElementsByName(B).length});G.getById?(C.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&V)return(a=b.getElementById(a))?[a]:[]},C.filter.ID=function(a){var b=a.replace(ha,ia);return function(a){return a.getAttribute("id")===b}}):(delete C.find.ID,C.filter.ID=function(a){var b=a.replace(ha,ia);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});C.find.TAG=G.getElementsByTagName?function(a,
b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(G.qsa)return b.querySelectorAll(a)}:function(a,b){var c=[],d=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[d++];)1===a.nodeType&&c.push(a);return c}return b};C.find.CLASS=G.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&V)return b.getElementsByClassName(a)};wa=[];Q=[];if(G.qsa=T.test(z.querySelectorAll))f(function(a){W.appendChild(a).innerHTML="<a id='"+B+"'></a><select id='"+
B+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&Q.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||Q.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll("[id~="+B+"-]").length||Q.push("~=");a.querySelectorAll(":checked").length||Q.push(":checked");a.querySelectorAll("a#"+
B+"+*").length||Q.push(".#.+[+~]")}),f(function(a){var b=z.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&Q.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||Q.push(":enabled",":disabled");a.querySelectorAll("*,:x");Q.push(",.*:")});(G.matchesSelector=T.test(Ga=W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.oMatchesSelector||W.msMatchesSelector))&&f(function(a){G.disconnectedMatch=
Ga.call(a,"div");Ga.call(a,"[s!='']:x");wa.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});Q=Q.length&&new RegExp(Q.join("|"));wa=wa.length&&new RegExp(wa.join("|"));Ca=(b=T.test(W.compareDocumentPosition))||
T.test(W.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!!(b&&1===b.nodeType&&(c.contains?c.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};I=b?function(a,b){if(a===b)return R=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;if(c)return c;c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return c&1||!G.sortDetached&&
b.compareDocumentPosition(a)===c?a===z||a.ownerDocument===F&&Ca(F,a)?-1:b===z||b.ownerDocument===F&&Ca(F,b)?1:J?L(J,a)-L(J,b):0:c&4?-1:1}:function(a,b){if(a===b)return R=!0,0;var c=0,d=a.parentNode,e=b.parentNode,f=[a],g=[b];if(!d||!e)return a===z?-1:b===z?1:d?-1:e?1:J?L(J,a)-L(J,b):0;if(d===e)return h(a,b);for(;a=a.parentNode;)f.unshift(a);for(a=b;a=a.parentNode;)g.unshift(a);for(;f[c]===g[c];)c++;return c?h(f[c],g[c]):f[c]===F?-1:g[c]===F?1:0};return z};b.matches=function(a,c){return b(a,null,null,
c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==z&&va(a);c=c.replace(pa,"='$1']");if(!(!G.matchesSelector||!V||O[c+" "]||wa&&wa.test(c)||Q&&Q.test(c)))try{var d=Ga.call(a,c);if(d||G.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(N){}return 0<b(c,z,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==z&&va(a);return Ca(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==z&&va(a);var c=C.attrHandle[b.toLowerCase()];c=c&&X.call(C.attrHandle,b.toLowerCase())?
c(a,b,!V):void 0;return void 0!==c?c:G.attributes||!V?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,e=0;R=!G.detectDuplicates;J=!G.sortStable&&a.slice(0);a.sort(I);if(R){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}J=null;return a};var la=b.getText=function(a){var b="",c=0;var d=a.nodeType;if(!d)for(;d=a[c++];)b+=la(d);else if(1===d||
9===d||11===d){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=la(a)}else if(3===d||4===d)return a.nodeValue;return b};var C=b.selectors={cacheLength:50,createPseudo:c,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ha,ia);a[3]=(a[3]||a[4]||a[5]||"").replace(ha,ia);"~="===a[2]&&(a[3]=" "+a[3]+
" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(Y.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&qa.test(c)&&(b=ba(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ha,
ia).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=H[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),H(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,d){return function(e){e=b.attr(e,a);if(null==e)return"!="===c;if(!c)return!0;e+="";return"="===c?e===d:"!="===c?
e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e.replace(da," ")+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,l){var k,m;c=f!==g?"nextSibling":"previousSibling";var v=b.parentNode,n=h&&b.nodeName.toLowerCase();l=!l&&!h;var w=!1;if(v){if(f){for(;c;){for(k=
b;k=k[c];)if(h?k.nodeName.toLowerCase()===n:1===k.nodeType)return!1;var M=c="only"===a&&!M&&"nextSibling"}return!0}M=[g?v.firstChild:v.lastChild];if(g&&l){k=v;var p=k[B]||(k[B]={});p=p[k.uniqueID]||(p[k.uniqueID]={});w=p[a]||[];w=(m=w[0]===ea&&w[1])&&w[2];for(k=m&&v.childNodes[m];k=++m&&k&&k[c]||(w=m=0)||M.pop();)if(1===k.nodeType&&++w&&k===b){p[a]=[ea,m,w];break}}else if(l&&(k=b,p=k[B]||(k[B]={}),p=p[k.uniqueID]||(p[k.uniqueID]={}),w=p[a]||[],w=m=w[0]===ea&&w[1]),!1===w)for(;(k=++m&&k&&k[c]||(w=
m=0)||M.pop())&&((h?k.nodeName.toLowerCase()!==n:1!==k.nodeType)||!++w||(l&&(p=k[B]||(k[B]={}),p=p[k.uniqueID]||(p[k.uniqueID]={}),p[a]=[ea,w]),k!==b)););w-=e;return w===d||0===w%d&&0<=w/d}}},PSEUDO:function(a,d){var e=C.pseudos[a]||C.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);if(e[B])return e(d);if(1<e.length){var f=[a,a,"",d];return C.setFilters.hasOwnProperty(a.toLowerCase())?c(function(a,b){for(var c,f=e(a,d),g=f.length;g--;)c=L(a,f[g]),a[c]=!(b[c]=f[g])}):function(a){return e(a,
0,f)}}return e}},pseudos:{not:c(function(a){var b=[],d=[],e=ta(a.replace(S,"$1"));return e[B]?c(function(a,b,c,d){d=e(a,null,d,[]);for(var f=a.length;f--;)if(c=d[f])a[f]=!(b[f]=c)}):function(a,c,f){b[0]=a;e(b,null,f,d);b[0]=null;return!d.pop()}}),has:c(function(a){return function(c){return 0<b(a,c).length}}),contains:c(function(a){a=a.replace(ha,ia);return function(b){return-1<(b.textContent||b.innerText||la(b)).indexOf(a)}}),lang:c(function(a){ka.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ha,
ia).toLowerCase();return function(b){var c;do if(c=V?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===W},focus:function(a){return a===z.activeElement&&(!z.hasFocus||z.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===
a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!C.pseudos.empty(a)},header:function(a){return ua.test(a.nodeName)},input:function(a){return sa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[0>c?c+b:c]}),even:m(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:m(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:m(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:m(function(a,b,c){for(c=
0>c?c+b:c;++c<b;)a.push(c);return a})}};C.pseudos.nth=C.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[y]=l(y);for(y in{submit:!0,reset:!0})C.pseudos[y]=k(y);p.prototype=C.filters=C.pseudos;C.setFilters=new p;var ba=b.tokenize=function(a,c){var d,e,f,g,h;if(g=K[a+" "])return c?0:g.slice(0);g=a;var l=[];for(h=C.preFilter;g;){if(!k||(d=ma.exec(g)))d&&(g=g.slice(d[0].length)||g),l.push(e=[]);var k=!1;if(d=na.exec(g))k=d.shift(),e.push({value:k,type:d[0].replace(S," ")}),
g=g.slice(k.length);for(f in C.filter)!(d=Y[f].exec(g))||h[f]&&!(d=h[f](d))||(k=d.shift(),e.push({value:k,type:f,matches:d}),g=g.slice(k.length));if(!k)break}return c?g.length:g?b.error(a):K(a,l).slice(0)};var ta=b.compile=function(a,b){var c,d=[],e=[],f=O[a+" "];if(!f){b||(b=ba(a));for(c=b.length;c--;)f=x(b[c]),f[B]?d.push(f):e.push(f);f=O(a,D(e,d));f.selector=a}return f};var Aa=b.select=function(a,b,c,d){var e,f,g,h="function"===typeof a&&a,k=!d&&ba(a=h.selector||a);c=c||[];if(1===k.length){var l=
k[0]=k[0].slice(0);if(2<l.length&&"ID"===(f=l[0]).type&&G.getById&&9===b.nodeType&&V&&C.relative[l[1].type]){b=(C.find.ID(f.matches[0].replace(ha,ia),b)||[])[0];if(!b)return c;h&&(b=b.parentNode);a=a.slice(l.shift().value.length)}for(e=Y.needsContext.test(a)?0:l.length;e--;){f=l[e];if(C.relative[g=f.type])break;if(g=C.find[g])if(d=g(f.matches[0].replace(ha,ia),ja.test(l[0].type)&&n(b.parentNode)||b)){l.splice(e,1);a=d.length&&r(l);if(!a)return oa.apply(c,d),c;break}}}(h||ta(a,k))(d,b,!V,c,!b||ja.test(a)&&
n(b.parentNode)||b);return c};G.sortStable=B.split("").sort(I).join("")===B;G.detectDuplicates=!!R;va();G.sortDetached=f(function(a){return a.compareDocumentPosition(z.createElement("div"))&1});f(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});G.attributes&&f(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||
g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});f(function(a){return null==a.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});return b}(u);c.find=pa;c.expr=pa.selectors;c.expr[":"]=c.expr.pseudos;c.uniqueSort=c.unique=pa.uniqueSort;c.text=
pa.getText;c.isXMLDoc=pa.isXML;c.contains=pa.contains;var qa=function(a,b,d){for(var e=[],f=void 0!==d;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&c(a).is(d))break;e.push(a)}return e},Ab=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},Bb=c.expr.match.needsContext,Cb=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ob=/^.[^:#\[\.,]*$/;c.filter=function(a,b,d){var e=b[0];d&&(a=":not("+a+")");return 1===b.length&&1===e.nodeType?c.find.matchesSelector(e,a)?[e]:[]:c.find.matches(a,
c.grep(b,function(a){return 1===a.nodeType}))};c.fn.extend({find:function(a){var b,d=this.length,e=[],f=this;if("string"!==typeof a)return this.pushStack(c(a).filter(function(){for(b=0;b<d;b++)if(c.contains(f[b],this))return!0}));for(b=0;b<d;b++)c.find(a,f[b],e);e=this.pushStack(1<d?c.unique(e):e);e.selector=this.selector?this.selector+" "+a:a;return e},filter:function(a){return this.pushStack(Ka(this,a||[],!1))},not:function(a){return this.pushStack(Ka(this,a||[],!0))},is:function(a){return!!Ka(this,
"string"===typeof a&&Bb.test(a)?c(a):a||[],!1).length}});var dc=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(c.fn.init=function(a,b,d){if(!a)return this;d=d||ec;if("string"===typeof a){var e="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:dc.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof c?b[0]:b,c.merge(this,c.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:q,!0)),Cb.test(e[1])&&c.isPlainObject(b))for(e in b)if(c.isFunction(this[e]))this[e](b[e]);
else this.attr(e,b[e])}else(b=q.getElementById(e[2]))&&b.parentNode&&(this.length=1,this[0]=b),this.context=q,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(c.isFunction(a))return void 0!==d.ready?d.ready(a):a(c);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return c.makeArray(a,this)}).prototype=c.fn;var ec=c(q);var fc=/^(?:parents|prev(?:Until|All))/,gc={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({has:function(a){var b=
c(a,this),d=b.length;return this.filter(function(){for(var a=0;a<d;a++)if(c.contains(this,b[a]))return!0})},closest:function(a,b){for(var d,e=0,f=this.length,g=[],h=Bb.test(a)||"string"!==typeof a?c(a,b||this.context):0;e<f;e++)for(d=this[e];d&&d!==b;d=d.parentNode)if(11>d.nodeType&&(h?-1<h.index(d):1===d.nodeType&&c.find.matchesSelector(d,a))){g.push(d);break}return this.pushStack(1<g.length?c.uniqueSort(g):g)},index:function(a){return a?"string"===typeof a?la.call(c(a),this[0]):la.call(this,a.jquery?
a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});c.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return qa(a,"parentNode")},parentsUntil:function(a,b,c){return qa(a,"parentNode",c)},next:function(a){return $a(a,"nextSibling")},prev:function(a){return $a(a,"previousSibling")},
nextAll:function(a){return qa(a,"nextSibling")},prevAll:function(a){return qa(a,"previousSibling")},nextUntil:function(a,b,c){return qa(a,"nextSibling",c)},prevUntil:function(a,b,c){return qa(a,"previousSibling",c)},siblings:function(a){return Ab((a.parentNode||{}).firstChild,a)},children:function(a){return Ab(a.firstChild)},contents:function(a){return a.contentDocument||c.merge([],a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);"Until"!==a.slice(-5)&&(e=d);e&&"string"===
typeof e&&(f=c.filter(e,f));1<this.length&&(gc[a]||c.uniqueSort(f),fc.test(a)&&f.reverse());return this.pushStack(f)}});var K=/\S+/g;c.Callbacks=function(a){a="string"===typeof a?Pb(a):c.extend({},a);var b,d,e,f,g=[],h=[],l=-1,k=function(){f=a.once;for(e=b=!0;h.length;l=-1)for(d=h.shift();++l<g.length;)!1===g[l].apply(d[0],d[1])&&a.stopOnFalse&&(l=g.length,d=!1);a.memory||(d=!1);b=!1;f&&(g=d?[]:"")},m={add:function(){g&&(d&&!b&&(l=g.length-1,h.push(d)),function r(b){c.each(b,function(b,d){c.isFunction(d)?
a.unique&&m.has(d)||g.push(d):d&&d.length&&"string"!==c.type(d)&&r(d)})}(arguments),d&&!b&&k());return this},remove:function(){c.each(arguments,function(a,b){for(var d;-1<(d=c.inArray(b,g,d));)g.splice(d,1),d<=l&&l--});return this},has:function(a){return a?-1<c.inArray(a,g):0<g.length},empty:function(){g&&(g=[]);return this},disable:function(){f=h=[];g=d="";return this},disabled:function(){return!g},lock:function(){f=h=[];d||(g=d="");return this},locked:function(){return!!f},fireWith:function(a,c){f||
(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||k());return this},fire:function(){m.fireWith(this,arguments);return this},fired:function(){return!!e}};return m};c.extend({Deferred:function(a){var b=[["resolve","done",c.Callbacks("once memory"),"resolved"],["reject","fail",c.Callbacks("once memory"),"rejected"],["notify","progress",c.Callbacks("memory")]],d="pending",e={state:function(){return d},always:function(){f.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return c.Deferred(function(d){c.each(b,
function(b,g){var h=c.isFunction(a[b])&&a[b];f[g[1]](function(){var a=h&&h.apply(this,arguments);if(a&&c.isFunction(a.promise))a.promise().progress(d.notify).done(d.resolve).fail(d.reject);else d[g[0]+"With"](this===e?d.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?c.extend(a,e):e}},f={};e.pipe=e.then;c.each(b,function(a,c){var g=c[2],h=c[3];e[c[1]]=g.add;h&&g.add(function(){d=h},b[a^1][2].disable,b[2][2].lock);f[c[0]]=function(){f[c[0]+"With"](this===
f?e:this,arguments);return this};f[c[0]+"With"]=g.fireWith});e.promise(f);a&&a.call(f,f);return f},when:function(a){var b=0,d=aa.call(arguments),e=d.length,f=1!==e||a&&c.isFunction(a.promise)?e:0,g=1===f?a:c.Deferred(),h=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?aa.call(arguments):d;c===k?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},l;if(1<e){var k=Array(e);var m=Array(e);for(l=Array(e);b<e;b++)d[b]&&c.isFunction(d[b].promise)?d[b].promise().progress(h(b,m,k)).done(h(b,l,
d)).fail(g.reject):--f}f||g.resolveWith(l,d);return g.promise()}});var Ha;c.fn.ready=function(a){c.ready.promise().done(a);return this};c.extend({isReady:!1,readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){(!0===a?--c.readyWait:c.isReady)||(c.isReady=!0,!0!==a&&0<--c.readyWait||(Ha.resolveWith(q,[c]),c.fn.triggerHandler&&(c(q).triggerHandler("ready"),c(q).off("ready"))))}});c.ready.promise=function(a){Ha||(Ha=c.Deferred(),"complete"===q.readyState||"loading"!==q.readyState&&
!q.documentElement.doScroll?u.setTimeout(c.ready):(q.addEventListener("DOMContentLoaded",ba),u.addEventListener("load",ba)));return Ha.promise(a)};c.ready.promise();var X=function(a,b,d,e,f,g,h){var l=0,k=a.length,m=null==d;if("object"===c.type(d))for(l in f=!0,d)X(a,b,l,d[l],!0,g,h);else if(void 0!==e&&(f=!0,c.isFunction(e)||(h=!0),m&&(h?(b.call(a,e),b=null):(m=b,b=function(a,b,d){return m.call(c(a),d)})),b))for(;l<k;l++)b(a[l],d,h?e:e.call(a[l],l,b(a[l],d)));return f?a:m?b.call(a):k?b(a[0],d):g},
xa=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};Y.uid=1;Y.prototype={register:function(a,b){b=b||{};a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,writable:!0,configurable:!0});return a[this.expando]},cache:function(a){if(!xa(a))return{};var b=a[this.expando];b||(b={},xa(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0})));return b},set:function(a,b,c){var d;a=this.cache(a);if("string"===typeof b)a[b]=c;
else for(d in b)a[d]=b[d];return a},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,d){if(void 0===b||b&&"string"===typeof b&&void 0===d)return d=this.get(a,b),void 0!==d?d:this.get(a,c.camelCase(b));this.set(a,b,d);return void 0!==d?d:b},remove:function(a,b){var d=a[this.expando];if(void 0!==d){if(void 0===b)this.register(a);else{if(c.isArray(b))var e=b.concat(b.map(c.camelCase));else{var f=c.camelCase(b);b in d?e=[b,f]:(e=f,e=e in d?[e]:
e.match(K)||[])}for(f=e.length;f--;)delete d[e[f]]}if(void 0===b||c.isEmptyObject(d))a.nodeType?a[this.expando]=void 0:delete a[this.expando]}},hasData:function(a){a=a[this.expando];return void 0!==a&&!c.isEmptyObject(a)}};var t=new Y,x=new Y,Qb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bb=/[A-Z]/g;c.extend({hasData:function(a){return x.hasData(a)||t.hasData(a)},data:function(a,b,c){return x.access(a,b,c)},removeData:function(a,b){x.remove(a,b)},_data:function(a,b,c){return t.access(a,b,c)},_removeData:function(a,
b){t.remove(a,b)}});c.fn.extend({data:function(a,b){var d,e=this[0],f=e&&e.attributes;if(void 0===a){if(this.length){var g=x.get(e);if(1===e.nodeType&&!t.get(e,"hasDataAttrs")){for(d=f.length;d--;)if(f[d]){var h=f[d].name;0===h.indexOf("data-")&&(h=c.camelCase(h.slice(5)),ab(e,h,g[h]))}t.set(e,"hasDataAttrs",!0)}}return g}return"object"===typeof a?this.each(function(){x.set(this,a)}):X(this,function(b){if(e&&void 0===b){var d=x.get(e,a)||x.get(e,a.replace(bb,"-$&").toLowerCase());if(void 0!==d)return d;
var f=c.camelCase(a);d=x.get(e,f);if(void 0!==d)return d;d=ab(e,f,void 0);if(void 0!==d)return d}else f=c.camelCase(a),this.each(function(){var c=x.get(this,f);x.set(this,f,b);-1<a.indexOf("-")&&void 0!==c&&x.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){x.remove(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var e=t.get(a,b);d&&(!e||c.isArray(d)?e=t.access(a,b,c.makeArray(d)):e.push(d));return e||[]}},dequeue:function(a,
b){b=b||"fx";var d=c.queue(a,b),e=d.length,f=d.shift(),g=c._queueHooks(a,b),h=function(){c.dequeue(a,b)};"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===b&&d.unshift("inprogress"),delete g.stop,f.call(a,h,g));!e&&g&&g.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return t.get(a,d)||t.access(a,d,{empty:c.Callbacks("once memory").add(function(){t.remove(a,[b+"queue",d])})})}});c.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?c.queue(this[0],
a):void 0===b?this:this.each(function(){var d=c.queue(this,a,b);c._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=c.Deferred(),g=this,h=this.length,l=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(d=t.get(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return f.promise(b)}});
var Db=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,sa=new RegExp("^(?:([+-])=|)("+Db+")([a-z%]*)$","i"),Z=["Top","Right","Bottom","Left"],ua=function(a,b){a=b||a;return"none"===c.css(a,"display")||!c.contains(a.ownerDocument,a)},Eb=/^(?:checkbox|radio)$/i,eb=/<([\w:-]+)/,fb=/^$|\/(?:java|ecma)script/i,H={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],_default:[0,"",""]};H.optgroup=H.option;H.tbody=H.tfoot=H.colgroup=H.caption=H.thead;H.th=H.td;var Rb=/<|&#?\w+;/;(function(){var a=q.createDocumentFragment().appendChild(q.createElement("div")),b=q.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);A.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";A.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();
var hc=/^key/,ic=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Fb=/^([^.]*)(?:\.(.+)|)/;c.event={global:{},add:function(a,b,d,e,f){var g,h,l,k,m;if(l=t.get(a)){if(d.handler){var n=d;d=n.handler;f=n.selector}d.guid||(d.guid=c.guid++);(h=l.events)||(h=l.events={});(g=l.handle)||(g=l.handle=function(b){return"undefined"!==typeof c&&c.event.triggered!==b.type?c.event.dispatch.apply(a,arguments):void 0});b=(b||"").match(K)||[""];for(l=b.length;l--;){var p=Fb.exec(b[l])||[];var r=k=p[1];var u=(p[2]||
"").split(".").sort();r&&(p=c.event.special[r]||{},r=(f?p.delegateType:p.bindType)||r,p=c.event.special[r]||{},k=c.extend({type:r,origType:k,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&c.expr.match.needsContext.test(f),namespace:u.join(".")},n),(m=h[r])||(m=h[r]=[],m.delegateCount=0,p.setup&&!1!==p.setup.call(a,e,u,g)||a.addEventListener&&a.addEventListener(r,g)),p.add&&(p.add.call(a,k),k.handler.guid||(k.handler.guid=d.guid)),f?m.splice(m.delegateCount++,0,k):m.push(k),c.event.global[r]=
!0)}}},remove:function(a,b,d,e,f){var g,h,l,k,m,n=t.hasData(a)&&t.get(a);if(n&&(l=n.events)){b=(b||"").match(K)||[""];for(k=b.length;k--;){var p=Fb.exec(b[k])||[];var r=m=p[1];var u=(p[2]||"").split(".").sort();if(r){var q=c.event.special[r]||{};r=(e?q.delegateType:q.bindType)||r;var A=l[r]||[];p=p[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=g=A.length;g--;){var x=A[g];!f&&m!==x.origType||d&&d.guid!==x.guid||p&&!p.test(x.namespace)||e&&e!==x.selector&&("**"!==e||!x.selector)||
(A.splice(g,1),x.selector&&A.delegateCount--,q.remove&&q.remove.call(a,x))}h&&!A.length&&(q.teardown&&!1!==q.teardown.call(a,u,n.handle)||c.removeEvent(a,r,n.handle),delete l[r])}else for(r in l)c.event.remove(a,r+b[k],d,e,!0)}c.isEmptyObject(l)&&t.remove(a,"handle events")}},dispatch:function(a){a=c.event.fix(a);var b,d,e,f=aa.call(arguments);var g=(t.get(this,"events")||{})[a.type]||[];var h=c.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,
a)){var l=c.event.handlers.call(this,a,g);for(g=0;(e=l[g++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,b=0;(d=e.handlers[b++])&&!a.isImmediatePropagationStopped();)if(!a.rnamespace||a.rnamespace.test(d.namespace))a.handleObj=d,a.data=d.data,d=((c.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,f),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());h.postDispatch&&h.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var d,e=[],f=b.delegateCount,
g=a.target;if(f&&g.nodeType&&("click"!==a.type||isNaN(a.button)||1>a.button))for(;g!==this;g=g.parentNode||this)if(1===g.nodeType&&(!0!==g.disabled||"click"!==a.type)){var h=[];for(d=0;d<f;d++){var l=b[d];var k=l.selector+" ";void 0===h[k]&&(h[k]=l.needsContext?-1<c(k,this).index(g):c.find(k,this,null,[g]).length);h[k]&&h.push(l)}h.length&&e.push({elem:g,handlers:h})}f<b.length&&e.push({elem:this,handlers:b.slice(f)});return e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c=b.button;if(null==a.pageX&&null!=b.clientX){var e=a.target.ownerDocument||q;var f=e.documentElement;e=e.body;a.pageX=b.clientX+(f&&f.scrollLeft||e&&e.scrollLeft||0)-(f&&f.clientLeft||e&&e.clientLeft||
0);a.pageY=b.clientY+(f&&f.scrollTop||e&&e.scrollTop||0)-(f&&f.clientTop||e&&e.clientTop||0)}a.which||void 0===c||(a.which=c&1?1:c&2?3:c&4?2:0);return a}},fix:function(a){if(a[c.expando])return a;var b=a.type;var d=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=ic.test(b)?this.mouseHooks:hc.test(b)?this.keyHooks:{});var f=e.props?this.props.concat(e.props):this.props;a=new c.Event(d);for(b=f.length;b--;){var g=f[b];a[g]=d[g]}a.target||(a.target=q);3===a.target.nodeType&&(a.target=a.target.parentNode);
return e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==gb()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===gb()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c.nodeName(this,"input"))return this.click(),!1},_default:function(a){return c.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&
(a.originalEvent.returnValue=a.result)}}}};c.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)};c.Event=function(a,b){if(!(this instanceof c.Event))return new c.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ta:S):this.type=a;b&&c.extend(this,b);this.timeStamp=a&&a.timeStamp||c.now();this[c.expando]=!0};c.Event.prototype={constructor:c.Event,isDefaultPrevented:S,isPropagationStopped:S,
isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ta;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ta;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ta;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};c.each({mouseenter:"mouseover",mouseleave:"mouseout",
pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){c.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d=a.relatedTarget,f=a.handleObj;if(!d||d!==this&&!c.contains(this,d)){a.type=f.origType;var g=f.handler.apply(this,arguments);a.type=b}return g}}});c.fn.extend({on:function(a,b,c,e){return Ma(this,a,b,c,e)},one:function(a,b,c,e){return Ma(this,a,b,c,e,1)},off:function(a,b,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;c(a.delegateTarget).off(e.namespace?
e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)d=b,b=void 0;!1===d&&(d=S);return this.each(function(){c.event.remove(this,a,d,b)})}});var jc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,kc=/<script|<style|<link/i,Vb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ub=/^true\/(.*)/,Wb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;c.extend({htmlPrefilter:function(a){return a.replace(jc,
"<$1></$2>")},clone:function(a,b,d){var e,f=a.cloneNode(!0),g=c.contains(a.ownerDocument,a);if(!(A.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||c.isXMLDoc(a))){var h=D(f);var l=D(a);var k=0;for(e=l.length;k<e;k++){var m=l[k],n=h[k],p=n.nodeName.toLowerCase();if("input"===p&&Eb.test(m.type))n.checked=m.checked;else if("input"===p||"textarea"===p)n.defaultValue=m.defaultValue}}if(b)if(d)for(l=l||D(a),h=h||D(f),k=0,e=l.length;k<e;k++)ib(l[k],h[k]);else ib(a,f);h=D(f,"script");0<h.length&&La(h,!g&&
D(a,"script"));return f},cleanData:function(a){for(var b,d,e,f=c.event.special,g=0;void 0!==(d=a[g]);g++)if(xa(d)){if(b=d[t.expando]){if(b.events)for(e in b.events)f[e]?c.event.remove(d,e):c.removeEvent(d,e,b.handle);d[t.expando]=void 0}d[x.expando]&&(d[x.expando]=void 0)}}});c.fn.extend({domManip:ca,detach:function(a){return kb(this,a,!0)},remove:function(a){return kb(this,a)},text:function(a){return X(this,function(a){return void 0===a?c.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return ca(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||hb(this,a).appendChild(a)})},prepend:function(){return ca(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=hb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ca(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},
after:function(){return ca(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(c.cleanData(D(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return c.clone(this,a,b)})},html:function(a){return X(this,function(a){var b=this[0]||{},e=0,f=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&
!kc.test(a)&&!H[(eb.exec(a)||["",""])[1].toLowerCase()]){a=c.htmlPrefilter(a);try{for(;e<f;e++)b=this[e]||{},1===b.nodeType&&(c.cleanData(D(b,!1)),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ca(this,arguments,function(b){var d=this.parentNode;0>c.inArray(this,a)&&(c.cleanData(D(this)),d&&d.replaceChild(b,this))},a)}});c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(a,b){c.fn[a]=function(a){for(var d=[],f=c(a),g=f.length-1,h=0;h<=g;h++)a=h===g?this:this.clone(!0),c(f[h])[b](a),Ta.apply(d,a.get());return this.pushStack(d)}});var Aa,mb={HTML:"block",BODY:"block"},nb=/^margin/,Oa=new RegExp("^("+Db+")(?!px)[a-z%]+$","i"),Da=function(a){var b=a.ownerDocument.defaultView;b&&b.opener||(b=u);return b.getComputedStyle(a)},Ua=function(a,b,c,e){var d,g={};for(d in b)g[d]=a.style[d],a.style[d]=b[d];c=c.apply(a,e||[]);for(d in b)a.style[d]=g[d];return c},ja=q.documentElement;
(function(){function a(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";h.innerHTML="";ja.appendChild(g);var a=u.getComputedStyle(h);b="1%"!==a.top;f="2px"===a.marginLeft;d="4px"===a.width;h.style.marginRight="50%";e="4px"===a.marginRight;ja.removeChild(g)}var b,d,e,f,g=q.createElement("div"),h=q.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip=
"",A.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),c.extend(A,{pixelPosition:function(){a();return b},boxSizingReliable:function(){null==d&&a();return d},pixelMarginRight:function(){null==d&&a();return e},reliableMarginLeft:function(){null==d&&a();return f},reliableMarginRight:function(){var a=h.appendChild(q.createElement("div"));a.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
a.style.marginRight=a.style.width="0";h.style.width="1px";ja.appendChild(g);var b=!parseFloat(u.getComputedStyle(a).marginRight);ja.removeChild(g);h.removeChild(a);return b}}))})();var lc=/^(none|table(?!-c[ea]).+)/,mc={position:"absolute",visibility:"hidden",display:"block"},Gb={letterSpacing:"0",fontWeight:"400"},qb=["Webkit","O","Moz","ms"],pb=q.createElement("div").style;c.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=ma(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,
columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g=c.camelCase(b),h=a.style;b=c.cssProps[g]||(c.cssProps[g]=ob(g)||g);var l=c.cssHooks[b]||c.cssHooks[g];if(void 0!==d){var k=typeof d;"string"===k&&(f=sa.exec(d))&&f[1]&&(d=cb(a,b,f),k="number");null!=d&&d===d&&("number"===k&&(d+=f&&f[3]||(c.cssNumber[g]?
"":"px")),A.clearCloneStyle||""!==d||0!==b.indexOf("background")||(h[b]="inherit"),l&&"set"in l&&void 0===(d=l.set(a,d,e))||(h[b]=d))}else return l&&"get"in l&&void 0!==(f=l.get(a,!1,e))?f:h[b]}},css:function(a,b,d,e){var f;var g=c.camelCase(b);b=c.cssProps[g]||(c.cssProps[g]=ob(g)||g);(g=c.cssHooks[b]||c.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,d));void 0===f&&(f=ma(a,b,e));"normal"===f&&b in Gb&&(f=Gb[b]);return""===d||d?(a=parseFloat(f),!0===d||isFinite(a)?a||0:f):f}});c.each(["height","width"],
function(a,b){c.cssHooks[b]={get:function(a,e,f){if(e)return lc.test(c.css(a,"display"))&&0===a.offsetWidth?Ua(a,mc,function(){return tb(a,b,f)}):tb(a,b,f)},set:function(a,e,f){var d,h=f&&Da(a);(f=f&&sb(a,b,f,"border-box"===c.css(a,"boxSizing",!1,h),h))&&(d=sa.exec(e))&&"px"!==(d[3]||"px")&&(a.style[b]=e,e=c.css(a,b));return rb(a,e,f)}}});c.cssHooks.marginLeft=Pa(A.reliableMarginLeft,function(a,b){if(b)return(parseFloat(ma(a,"marginLeft"))||a.getBoundingClientRect().left-Ua(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+
"px"});c.cssHooks.marginRight=Pa(A.reliableMarginRight,function(a,b){if(b)return Ua(a,{display:"inline-block"},ma,[a,"marginRight"])});c.each({margin:"",padding:"",border:"Width"},function(a,b){c.cssHooks[a+b]={expand:function(c){var d=0,f={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)f[a+Z[d]+b]=c[d]||c[d-2]||c[0];return f}};nb.test(a)||(c.cssHooks[a+b].set=rb)});c.fn.extend({css:function(a,b){return X(this,function(a,b,f){var d,e={},l=0;if(c.isArray(b)){f=Da(a);for(d=b.length;l<d;l++)e[b[l]]=
c.css(a,b[l],!1,f);return e}return void 0!==f?c.style(a,b,f):c.css(a,b)},a,b,1<arguments.length)},show:function(){return ub(this,!0)},hide:function(){return ub(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ua(this)?c(this).show():c(this).hide()})}});c.Tween=E;E.prototype={constructor:E,init:function(a,b,d,e,f,g){this.elem=a;this.prop=d;this.easing=f||c.easing._default;this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=g||(c.cssNumber[d]?
"":"px")},cur:function(){var a=E.propHooks[this.prop];return a&&a.get?a.get(this):E.propHooks._default.get(this)},run:function(a){var b,d=E.propHooks[this.prop];this.pos=this.options.duration?b=c.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);d&&d.set?d.set(this):E.propHooks._default.set(this);return this}};E.prototype.init.prototype=E.prototype;E.propHooks=
{_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=c.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(c.fx.step[a.prop])c.fx.step[a.prop](a);else 1!==a.elem.nodeType||null==a.elem.style[c.cssProps[a.prop]]&&!c.cssHooks[a.prop]?a.elem[a.prop]=a.now:c.style(a.elem,a.prop,a.now+a.unit)}}};E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};c.easing={linear:function(a){return a},
swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};c.fx=E.prototype.init;c.fx.step={};var na,Ia,nc=/^(?:toggle|show|hide)$/,oc=/queueHooks$/;c.Animation=c.extend(I,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);cb(c.elem,a,sa.exec(b),c);return c}]},tweener:function(a,b){c.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var d,e=0,f=a.length;e<f;e++)d=a[e],I.tweeners[d]=I.tweeners[d]||[],I.tweeners[d].unshift(b)},prefilters:[function(a,b,d){var e,f=this,g={},h=a.style,l=a.nodeType&&
ua(a),k=t.get(a,"fxshow");if(!d.queue){var m=c._queueHooks(a,"fx");if(null==m.unqueued){m.unqueued=0;var n=m.empty.fire;m.empty.fire=function(){m.unqueued||n()}}m.unqueued++;f.always(function(){f.always(function(){m.unqueued--;c.queue(a,"fx").length||m.empty.fire()})})}if(1===a.nodeType&&("height"in b||"width"in b)){d.overflow=[h.overflow,h.overflowX,h.overflowY];var p=c.css(a,"display");var r="none"===p?t.get(a,"olddisplay")||Na(a.nodeName):p;"inline"===r&&"none"===c.css(a,"float")&&(h.display="inline-block")}d.overflow&&
(h.overflow="hidden",f.always(function(){h.overflow=d.overflow[0];h.overflowX=d.overflow[1];h.overflowY=d.overflow[2]}));for(e in b)if(r=b[e],nc.exec(r)){delete b[e];var u=u||"toggle"===r;if(r===(l?"hide":"show"))if("show"===r&&k&&void 0!==k[e])l=!0;else continue;g[e]=k&&k[e]||c.style(a,e)}else p=void 0;if(c.isEmptyObject(g))"inline"===("none"===p?Na(a.nodeName):p)&&(h.display=p);else for(e in k?"hidden"in k&&(l=k.hidden):k=t.access(a,"fxshow",{}),u&&(k.hidden=!l),l?c(a).show():f.done(function(){c(a).hide()}),
f.done(function(){var b;t.remove(a,"fxshow");for(b in g)c.style(a,b,g[b])}),g)b=wb(l?k[e]:0,e,f),e in k||(k[e]=b.start,l&&(b.end=b.start,b.start="width"===e||"height"===e?1:0))}],prefilter:function(a,b){b?I.prefilters.unshift(a):I.prefilters.push(a)}});c.speed=function(a,b,d){var e=a&&"object"===typeof a?c.extend({},a):{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};e.duration=c.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:
c.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){c.isFunction(e.old)&&e.old.call(this);e.queue&&c.dequeue(this,e.queue)};return e};c.fn.extend({fadeTo:function(a,b,c,e){return this.filter(ua).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,d,e){var f=c.isEmptyObject(a),g=c.speed(b,d,e);b=function(){var b=I(this,c.extend({},a),g);(f||t.get(this,"finish"))&&b.stop(!0)};b.finish=b;return f||!1===g.queue?this.each(b):
this.queue(g.queue,b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",h=c.timers,l=t.get(this);if(g)l[g]&&l[g].stop&&e(l[g]);else for(g in l)l[g]&&l[g].stop&&oc.test(g)&&e(l[g]);for(g=h.length;g--;)h[g].elem!==this||null!=a&&h[g].queue!==a||(h[g].anim.stop(d),b=!1,h.splice(g,1));!b&&d||c.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||
"fx");return this.each(function(){var b=t.get(this),d=b[a+"queue"];var e=b[a+"queueHooks"];var f=c.timers,g=d?d.length:0;b.finish=!0;c.queue(this,a,[]);e&&e.stop&&e.stop.call(this,!0);for(e=f.length;e--;)f[e].elem===this&&f[e].queue===a&&(f[e].anim.stop(!0),f.splice(e,1));for(e=0;e<g;e++)d[e]&&d[e].finish&&d[e].finish.call(this);delete b.finish})}});c.each(["toggle","show","hide"],function(a,b){var d=c.fn[b];c.fn[b]=function(a,c,g){return null==a||"boolean"===typeof a?d.apply(this,arguments):this.animate(Ea(b,
!0),a,c,g)}});c.each({slideDown:Ea("show"),slideUp:Ea("hide"),slideToggle:Ea("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){c.fn[a]=function(a,c,f){return this.animate(b,a,c,f)}});c.timers=[];c.fx.tick=function(){var a=0,b=c.timers;for(na=c.now();a<b.length;a++){var d=b[a];d()||b[a]!==d||b.splice(a--,1)}b.length||c.fx.stop();na=void 0};c.fx.timer=function(a){c.timers.push(a);a()?c.fx.start():c.timers.pop()};c.fx.interval=13;c.fx.start=function(){Ia||
(Ia=u.setInterval(c.fx.tick,c.fx.interval))};c.fx.stop=function(){u.clearInterval(Ia);Ia=null};c.fx.speeds={slow:600,fast:200,_default:400};c.fn.delay=function(a,b){a=c.fx?c.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=u.setTimeout(b,a);c.stop=function(){u.clearTimeout(d)}})};(function(){var a=q.createElement("input"),b=q.createElement("select"),c=b.appendChild(q.createElement("option"));a.type="checkbox";A.checkOn=""!==a.value;A.optSelected=c.selected;b.disabled=!0;A.optDisabled=
!c.disabled;a=q.createElement("input");a.value="t";a.type="radio";A.radioValue="t"===a.value})();var ya=c.expr.attrHandle;c.fn.extend({attr:function(a,b){return X(this,c.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,a)})}});c.extend({attr:function(a,b,d){var e,f=a.nodeType;if(3!==f&&8!==f&&2!==f){if("undefined"===typeof a.getAttribute)return c.prop(a,b,d);if(1!==f||!c.isXMLDoc(a)){b=b.toLowerCase();var g=c.attrHooks[b]||(c.expr.match.bool.test(b)?
pc:void 0)}if(void 0!==d){if(null===d){c.removeAttr(a,b);return}if(g&&"set"in g&&void 0!==(e=g.set(a,d,b)))return e;a.setAttribute(b,d+"");return d}if(g&&"get"in g&&null!==(e=g.get(a,b)))return e;e=c.find.attr(a,b);return null==e?void 0:e}},attrHooks:{type:{set:function(a,b){if(!A.radioValue&&"radio"===b&&c.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}}},removeAttr:function(a,b){var d=0,e=b&&b.match(K);if(e&&1===a.nodeType)for(;b=e[d++];){var f=c.propFix[b]||
b;c.expr.match.bool.test(b)&&(a[f]=!1);a.removeAttribute(b)}}});var pc={set:function(a,b,d){!1===b?c.removeAttr(a,d):a.setAttribute(d,d);return d}};c.each(c.expr.match.bool.source.match(/\w+/g),function(a,b){var d=ya[b]||c.find.attr;ya[b]=function(a,b,c){if(!c){var e=ya[b];ya[b]=f;var f=null!=d(a,b,c)?b.toLowerCase():null;ya[b]=e}return f}});var qc=/^(?:input|select|textarea|button)$/i,rc=/^(?:a|area)$/i;c.fn.extend({prop:function(a,b){return X(this,c.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[c.propFix[a]||
a]})}});c.extend({prop:function(a,b,d){var e,f=a.nodeType;if(3!==f&&8!==f&&2!==f){if(1!==f||!c.isXMLDoc(a)){b=c.propFix[b]||b;var g=c.propHooks[b]}return void 0!==d?g&&"set"in g&&void 0!==(e=g.set(a,d,b))?e:a[b]=d:g&&"get"in g&&null!==(e=g.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=c.find.attr(a,"tabindex");return b?parseInt(b,10):qc.test(a.nodeName)||rc.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});A.optSelected||(c.propHooks.selected={get:function(a){(a=
a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});c.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){c.propFix[this.toLowerCase()]=this});var Va=/[\t\r\n\f]/g;c.fn.extend({addClass:function(a){var b,d,e,f,g,h=0;if(c.isFunction(a))return this.each(function(b){c(this).addClass(a.call(this,b,L(this)))});if("string"===
typeof a&&a)for(b=a.match(K)||[];d=this[h++];){var l=L(d);if(e=1===d.nodeType&&(" "+l+" ").replace(Va," ")){for(g=0;f=b[g++];)0>e.indexOf(" "+f+" ")&&(e+=f+" ");e=c.trim(e);l!==e&&d.setAttribute("class",e)}}return this},removeClass:function(a){var b,d,e,f,g,h=0;if(c.isFunction(a))return this.each(function(b){c(this).removeClass(a.call(this,b,L(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof a&&a)for(b=a.match(K)||[];d=this[h++];){var l=L(d);if(e=1===d.nodeType&&(" "+
l+" ").replace(Va," ")){for(g=0;f=b[g++];)for(;-1<e.indexOf(" "+f+" ");)e=e.replace(" "+f+" "," ");e=c.trim(e);l!==e&&d.setAttribute("class",e)}}return this},toggleClass:function(a,b){var d=typeof a;return"boolean"===typeof b&&"string"===d?b?this.addClass(a):this.removeClass(a):c.isFunction(a)?this.each(function(d){c(this).toggleClass(a.call(this,d,L(this),b),b)}):this.each(function(){var b,f;if("string"===d){var g=0;var h=c(this);for(f=a.match(K)||[];b=f[g++];)h.hasClass(b)?h.removeClass(b):h.addClass(b)}else if(void 0===
a||"boolean"===d)(b=L(this))&&t.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":t.get(this,"__className__")||"")})},hasClass:function(a){var b,c=0;for(a=" "+a+" ";b=this[c++];)if(1===b.nodeType&&-1<(" "+L(b)+" ").replace(Va," ").indexOf(a))return!0;return!1}});var sc=/\r/g,tc=/[\x20\t\r\n\f]+/g;c.fn.extend({val:function(a){var b,d,e=this[0];if(arguments.length){var f=c.isFunction(a);return this.each(function(d){1===this.nodeType&&(d=f?a.call(this,d,c(this).val()):
a,null==d?d="":"number"===typeof d?d+="":c.isArray(d)&&(d=c.map(d,function(a){return null==a?"":a+""})),b=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,d,"value")||(this.value=d))})}if(e){if((b=c.valHooks[e.type]||c.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(d=b.get(e,"value")))return d;d=e.value;return"string"===typeof d?d.replace(sc,""):null==d?"":d}}});c.extend({valHooks:{option:{get:function(a){var b=c.find.attr(a,"value");return null!=
b?b:c.trim(c.text(a)).replace(tc," ")}},select:{get:function(a){for(var b,d=a.options,e=a.selectedIndex,f=(a="select-one"===a.type||0>e)?null:[],g=a?e+1:d.length,h=0>e?g:a?e:0;h<g;h++)if(b=d[h],!(!b.selected&&h!==e||(A.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&c.nodeName(b.parentNode,"optgroup"))){b=c(b).val();if(a)return b;f.push(b)}return f},set:function(a,b){for(var d,e=a.options,f=c.makeArray(b),g=e.length;g--;)if(b=e[g],b.selected=-1<c.inArray(c.valHooks.option.get(b),
f))d=!0;d||(a.selectedIndex=-1);return f}}}});c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(a,b){if(c.isArray(b))return a.checked=-1<c.inArray(c(a).val(),b)}};A.checkOn||(c.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Hb=/^(?:focusinfocus|focusoutblur)$/;c.extend(c.event,{trigger:function(a,b,d,e){var f,g,h=[d||q],l=T.call(a,"type")?a.type:a;var k=T.call(a,"namespace")?a.namespace.split("."):[];var m=f=d=d||q;if(3!==d.nodeType&&
8!==d.nodeType&&!Hb.test(l+c.event.triggered)){-1<l.indexOf(".")&&(k=l.split("."),l=k.shift(),k.sort());var n=0>l.indexOf(":")&&"on"+l;a=a[c.expando]?a:new c.Event(l,"object"===typeof a&&a);a.isTrigger=e?2:3;a.namespace=k.join(".");a.rnamespace=a.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;a.result=void 0;a.target||(a.target=d);b=null==b?[a]:c.makeArray(b,[a]);k=c.event.special[l]||{};if(e||!k.trigger||!1!==k.trigger.apply(d,b)){if(!e&&!k.noBubble&&!c.isWindow(d)){var p=
k.delegateType||l;Hb.test(p+l)||(m=m.parentNode);for(;m;m=m.parentNode)h.push(m),f=m;f===(d.ownerDocument||q)&&h.push(f.defaultView||f.parentWindow||u)}for(f=0;(m=h[f++])&&!a.isPropagationStopped();)a.type=1<f?p:k.bindType||l,(g=(t.get(m,"events")||{})[a.type]&&t.get(m,"handle"))&&g.apply(m,b),(g=n&&m[n])&&g.apply&&xa(m)&&(a.result=g.apply(m,b),!1===a.result&&a.preventDefault());a.type=l;e||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(h.pop(),b)||!xa(d)||!n||!c.isFunction(d[l])||c.isWindow(d)||
((f=d[n])&&(d[n]=null),c.event.triggered=l,d[l](),c.event.triggered=void 0,f&&(d[n]=f));return a.result}}},simulate:function(a,b,d){a=c.extend(new c.Event,d,{type:a,isSimulated:!0});c.event.trigger(a,null,b)}});c.fn.extend({trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];if(d)return c.event.trigger(a,b,d,!0)}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){c.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});c.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});A.focusin="onfocusin"in u;A.focusin||c.each({focus:"focusin",blur:"focusout"},function(a,b){var d=function(a){c.event.simulate(b,a.target,c.event.fix(a))};c.event.special[b]={setup:function(){var c=this.ownerDocument||this,f=t.access(c,b);f||c.addEventListener(a,d,!0);t.access(c,b,(f||0)+1)},teardown:function(){var c=this.ownerDocument||
this,f=t.access(c,b)-1;f?t.access(c,b,f):(c.removeEventListener(a,d,!0),t.remove(c,b))}}});var ra=u.location,Wa=c.now(),Xa=/\?/;c.parseJSON=function(a){return JSON.parse(a+"")};c.parseXML=function(a){if(!a||"string"!==typeof a)return null;try{var b=(new u.DOMParser).parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||c.error("Invalid XML: "+a);return b};var uc=/#.*$/,Ib=/([?&])_=[^&]*/,vc=/^(.*?):[ \t]*([^\r\n]*)$/mg,wc=/^(?:GET|HEAD)$/,xc=/^\/\//,Jb=
{},Qa={},Kb="*/".concat("*"),Ya=q.createElement("a");Ya.href=ra.href;c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ra.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ra.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},
responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ra(Ra(a,c.ajaxSettings),b):Ra(c.ajaxSettings,a)},ajaxPrefilter:xb(Jb),ajaxTransport:xb(Qa),ajax:function(a,b){function d(a,b,d,g){var k=b;if(2!==E){E=2;h&&u.clearTimeout(h);e=void 0;f=g||"";y.readyState=0<a?4:0;g=200<=a&&300>a||304===a;if(d){var q=m;for(var z=y,x,J,B,F,
R=q.contents,D=q.dataTypes;"*"===D[0];)D.shift(),void 0===x&&(x=q.mimeType||z.getResponseHeader("Content-Type"));if(x)for(J in R)if(R[J]&&R[J].test(x)){D.unshift(J);break}if(D[0]in d)B=D[0];else{for(J in d){if(!D[0]||q.converters[J+" "+D[0]]){B=J;break}F||(F=J)}B=B||F}B?(B!==D[0]&&D.unshift(B),q=d[B]):q=void 0}a:{d=m;x=q;J=y;B=g;var H;z={};R=d.dataTypes.slice();if(R[1])for(O in d.converters)z[O.toLowerCase()]=d.converters[O];for(F=R.shift();F;){d.responseFields[F]&&(J[d.responseFields[F]]=x);!I&&
B&&d.dataFilter&&(x=d.dataFilter(x,d.dataType));var I=F;if(F=R.shift())if("*"===F)F=I;else if("*"!==I&&I!==F){var O=z[I+" "+F]||z["* "+F];if(!O)for(H in z)if(q=H.split(" "),q[1]===F&&(O=z[I+" "+q[0]]||z["* "+q[0]])){!0===O?O=z[H]:!0!==z[H]&&(F=q[0],R.unshift(q[1]));break}if(!0!==O)if(O&&d.throws)x=O(x);else try{x=O(x)}catch(fa){q={state:"parsererror",error:O?fa:"No conversion from "+I+" to "+F};break a}}}q={state:"success",data:x}}if(g)if(m.ifModified&&((k=y.getResponseHeader("Last-Modified"))&&(c.lastModified[P]=
k),(k=y.getResponseHeader("etag"))&&(c.etag[P]=k)),204===a||"HEAD"===m.type)k="nocontent";else if(304===a)k="notmodified";else{k=q.state;var L=q.data;var K=q.error;g=!K}else if(K=k,a||!k)k="error",0>a&&(a=0);y.status=a;y.statusText=(b||k)+"";g?r.resolveWith(n,[L,k,y]):r.rejectWith(n,[y,k,K]);y.statusCode(A);A=void 0;l&&p.trigger(g?"ajaxSuccess":"ajaxError",[y,m,g?L:K]);t.fireWith(n,[y,k]);l&&(p.trigger("ajaxComplete",[y,m]),--c.active||c.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);
b=b||{};var e,f,g,h,l,k,m=c.ajaxSetup({},b),n=m.context||m,p=m.context&&(n.nodeType||n.jquery)?c(n):c.event,r=c.Deferred(),t=c.Callbacks("once memory"),A=m.statusCode||{},x={},D={},E=0,H="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(2===E){if(!g)for(g={};b=vc.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===E?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();E||(a=D[c]=D[c]||a,x[a]=b);return this},
overrideMimeType:function(a){E||(m.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>E)for(b in a)A[b]=[A[b],a[b]];else y.always(a[y.status]);return this},abort:function(a){a=a||H;e&&e.abort(a);d(0,a);return this}};r.promise(y).complete=t.add;y.success=y.done;y.error=y.fail;m.url=((a||m.url||ra.href)+"").replace(uc,"").replace(xc,ra.protocol+"//");m.type=b.method||b.type||m.method||m.type;m.dataTypes=c.trim(m.dataType||"*").toLowerCase().match(K)||[""];if(null==m.crossDomain){a=q.createElement("a");
try{a.href=m.url,a.href=a.href,m.crossDomain=Ya.protocol+"//"+Ya.host!==a.protocol+"//"+a.host}catch(J){m.crossDomain=!0}}m.data&&m.processData&&"string"!==typeof m.data&&(m.data=c.param(m.data,m.traditional));yb(Jb,m,b,y);if(2===E)return y;(l=c.event&&m.global)&&0===c.active++&&c.event.trigger("ajaxStart");m.type=m.type.toUpperCase();m.hasContent=!wc.test(m.type);var P=m.url;m.hasContent||(m.data&&(P=m.url+=(Xa.test(P)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Ib.test(P)?P.replace(Ib,"$1_="+
Wa++):P+(Xa.test(P)?"&":"?")+"_="+Wa++));m.ifModified&&(c.lastModified[P]&&y.setRequestHeader("If-Modified-Since",c.lastModified[P]),c.etag[P]&&y.setRequestHeader("If-None-Match",c.etag[P]));(m.data&&m.hasContent&&!1!==m.contentType||b.contentType)&&y.setRequestHeader("Content-Type",m.contentType);y.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Kb+"; q=0.01":""):m.accepts["*"]);for(k in m.headers)y.setRequestHeader(k,m.headers[k]);
if(m.beforeSend&&(!1===m.beforeSend.call(n,y,m)||2===E))return y.abort();H="abort";for(k in{success:1,error:1,complete:1})y[k](m[k]);if(e=yb(Qa,m,b,y)){y.readyState=1;l&&p.trigger("ajaxSend",[y,m]);if(2===E)return y;m.async&&0<m.timeout&&(h=u.setTimeout(function(){y.abort("timeout")},m.timeout));try{E=1,e.send(x,d)}catch(J){if(2>E)d(-1,J);else throw J;}}else d(-1,"No Transport");return y},getJSON:function(a,b,d){return c.get(a,b,d,"json")},getScript:function(a,b){return c.get(a,void 0,b,"script")}});
c.each(["get","post"],function(a,b){c[b]=function(a,e,f,g){c.isFunction(e)&&(g=g||f,f=e,e=void 0);return c.ajax(c.extend({url:a,type:b,dataType:g,data:e,success:f},c.isPlainObject(a)&&a))}});c._evalUrl=function(a){return c.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};c.fn.extend({wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)}return this},wrapInner:function(a){return c.isFunction(a)?this.each(function(b){c(this).wrapInner(a.call(this,b))}):this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=c.isFunction(a);return this.each(function(d){c(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()}});
c.expr.filters.hidden=function(a){return!c.expr.filters.visible(a)};c.expr.filters.visible=function(a){return 0<a.offsetWidth||0<a.offsetHeight||0<a.getClientRects().length};var yc=/%20/g,Yb=/\[\]$/,Lb=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;c.param=function(a,b){var d,e=[],f=function(a,b){b=c.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=c.ajaxSettings&&c.ajaxSettings.traditional);if(c.isArray(a)||
a.jquery&&!c.isPlainObject(a))c.each(a,function(){f(this.name,this.value)});else for(d in a)Sa(d,a[d],b,f);return e.join("&").replace(yc,"+")};c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=c.prop(this,"elements");return a?c.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!c(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!Eb.test(a))}).map(function(a,b){a=c(this).val();
return null==a?null:c.isArray(a)?c.map(a,function(a){return{name:b.name,value:a.replace(Lb,"\r\n")}}):{name:b.name,value:a.replace(Lb,"\r\n")}}).get()}});c.ajaxSettings.xhr=function(){try{return new u.XMLHttpRequest}catch(a){}};var Bc={0:200,1223:204},za=c.ajaxSettings.xhr();A.cors=!!za&&"withCredentials"in za;A.ajax=za=!!za;c.ajaxTransport(function(a){var b,c;if(A.cors||za&&!a.crossDomain)return{send:function(d,f){var e,h=a.xhr();h.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)h[e]=
a.xhrFields[e];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(e in d)h.setRequestHeader(e,d[e]);b=function(a){return function(){b&&(b=c=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!==typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Bc[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!==typeof h.responseText?{binary:h.response}:
{text:h.responseText},h.getAllResponseHeaders()))}};h.onload=b();c=h.onerror=b("error");void 0!==h.onabort?h.onabort=c:h.onreadystatechange=function(){4===h.readyState&&u.setTimeout(function(){b&&c()})};b=b("abort");try{h.send(a.hasContent&&a.data||null)}catch(l){if(b)throw l;}},abort:function(){b&&b()}}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){c.globalEval(a);
return a}}});c.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});c.ajaxTransport("script",function(a){if(a.crossDomain){var b,d;return{send:function(e,f){b=c("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",d=function(a){b.remove();d=null;a&&f("error"===a.type?404:200,a.type)});q.head.appendChild(b[0])},abort:function(){d&&d()}}}});var Mb=[],Za=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Mb.pop()||
c.expando+"_"+Wa++;this[a]=!0;return a}});c.ajaxPrefilter("json jsonp",function(a,b,d){var e,f=!1!==a.jsonp&&(Za.test(a.url)?"url":"string"===typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Za.test(a.data)&&"data");if(f||"jsonp"===a.dataTypes[0]){var g=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback;f?a[f]=a[f].replace(Za,"$1"+g):!1!==a.jsonp&&(a.url+=(Xa.test(a.url)?"&":"?")+a.jsonp+"="+g);a.converters["script json"]=function(){e||
c.error(g+" was not called");return e[0]};a.dataTypes[0]="json";var h=u[g];u[g]=function(){e=arguments};d.always(function(){void 0===h?c(u).removeProp(g):u[g]=h;a[g]&&(a.jsonpCallback=b.jsonpCallback,Mb.push(g));e&&c.isFunction(h)&&h(e[0]);e=h=void 0});return"script"}});c.parseHTML=function(a,b,d){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(d=b,b=!1);b=b||q;var e=Cb.exec(a);d=!d&&[];if(e)return[b.createElement(e[1])];e=db([a],b,d);d&&d.length&&c(d).remove();return c.merge([],e.childNodes)};
var Nb=c.fn.load;c.fn.load=function(a,b,d){if("string"!==typeof a&&Nb)return Nb.apply(this,arguments);var e,f,g=this,h=a.indexOf(" ");if(-1<h){var l=c.trim(a.slice(h));a=a.slice(0,h)}c.isFunction(b)?(d=b,b=void 0):b&&"object"===typeof b&&(e="POST");0<g.length&&c.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments;g.html(l?c("<div>").append(c.parseHTML(a)).find(l):a)}).always(d&&function(a,b){g.each(function(){d.apply(this,f||[a.responseText,b,a])})});return this};c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(a){return this.on(b,a)}});c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.offset={setOffset:function(a,b,d){var e=c.css(a,"position"),f=c(a),g={};"static"===e&&(a.style.position="relative");var h=f.offset();var l=c.css(a,"top");var k=c.css(a,"left");("absolute"===e||"fixed"===e)&&-1<(l+k).indexOf("auto")?(k=f.position(),l=k.top,k=k.left):(l=parseFloat(l)||0,k=parseFloat(k)||0);c.isFunction(b)&&(b=b.call(a,d,c.extend({},
h)));null!=b.top&&(g.top=b.top-h.top+l);null!=b.left&&(g.left=b.left-h.left+k);"using"in b?b.using.call(a,g):f.css(g)}};c.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){c.offset.setOffset(this,a,b)});var b=this[0];var d={top:0,left:0},e=b&&b.ownerDocument;if(e){var f=e.documentElement;if(!c.contains(f,b))return d;d=b.getBoundingClientRect();b=zb(e);return{top:d.top+b.pageYOffset-f.clientTop,left:d.left+b.pageXOffset-f.clientLeft}}},position:function(){if(this[0]){var a=
this[0],b={top:0,left:0};if("fixed"===c.css(a,"position"))var d=a.getBoundingClientRect();else{var e=this.offsetParent();d=this.offset();c.nodeName(e[0],"html")||(b=e.offset());b.top+=c.css(e[0],"borderTopWidth",!0);b.left+=c.css(e[0],"borderLeftWidth",!0)}return{top:d.top-b.top-c.css(a,"marginTop",!0),left:d.left-b.left-c.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===c.css(a,"position");)a=a.offsetParent;return a||ja})}});c.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(a,b){var d="pageYOffset"===b;c.fn[a]=function(c){return X(this,function(a,c,e){var f=zb(a);if(void 0===e)return f?f[b]:a[c];f?f.scrollTo(d?f.pageXOffset:e,d?e:f.pageYOffset):a[c]=e},a,c,arguments.length)}});c.each(["top","left"],function(a,b){c.cssHooks[b]=Pa(A.pixelPosition,function(a,e){if(e)return e=ma(a,b),Oa.test(e)?c(a).position()[b]+"px":e})});c.each({Height:"height",Width:"width"},function(a,b){c.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,
e){c.fn[e]=function(e,g){var f=arguments.length&&(d||"boolean"!==typeof e),l=d||(!0===e||!0===g?"margin":"border");return X(this,function(b,d,e){return c.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):void 0===e?c.css(b,d,l):c.style(b,d,e,l)},b,f?e:void 0,f,null)}})});c.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,
null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}});c.fn.andSelf=c.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return c});var Cc=u.jQuery,Dc=u.$;c.noConflict=function(a){u.$===c&&(u.$=Dc);a&&u.jQuery===c&&(u.jQuery=Cc);return c};ka||(u.jQuery=u.$=c);return c});
;	
			 $.globalEval = function(data){
			 		var scriptTag = document.createElement('script');
			 		var reScriptId = /id:[\s]([a-z0-9]*)/ig;
			 		var reNonce = /nonce:[\s]([a-z0-9]*)/ig;
			 		
			 		var nonceMatch;
			 		if(nonceMatch = reNonce.exec(data)) {
			 			scriptTag.setAttribute("nonce", nonceMatch[1]);					
					}					
					
					var scriptIdMatch;
					if(scriptIdMatch = reScriptId.exec(data)) {
						scriptTag.setAttribute("id", "script-" + scriptIdMatch[1]); 
					};
				
					scriptTag.type = "text/javascript";
					scriptTag.text = data;				
					document.body.appendChild(scriptTag);
			 };		
		/*
 modernizr 3.6.0 (Custom Build) | MIT *
 https://modernizr.com/download/?-mq-prefixes-setclasses-teststyles !*/
!function(a,b,d){function e(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):p?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function f(a,d,f,g){var n,h,t,k=e("div");var r=b.body;var q=(r||(r=e(p?"svg":"body"),r.fake=!0),r);if(parseInt(f,10))for(;f--;)r=e("div"),r.id=g?g[f]:"modernizr"+(f+1),k.appendChild(r);return n=e("style"),n.type="text/css",n.id="smodernizr",(q.fake?q:k).appendChild(n),q.appendChild(k),n.styleSheet?
n.styleSheet.cssText=a:n.appendChild(b.createTextNode(a)),k.id="modernizr",q.fake&&(q.style.background="",q.style.overflow="hidden",t=l.style.overflow,l.style.overflow="hidden",l.appendChild(q)),h=d(k,a),q.fake?(q.parentNode.removeChild(q),l.style.overflow=t,l.offsetHeight):k.parentNode.removeChild(k),!!h}var g=[],h=[];d={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var d=this;setTimeout(function(){b(d[a])},0)},addTest:function(a,
b,d){h.push({name:a,fn:b,options:d})},addAsyncTest:function(a){h.push({name:null,fn:a})}};var k=function(){};k.prototype=d;k=new k;var l=b.documentElement,p="svg"===l.nodeName.toLowerCase();d._prefixes=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];var q=function(){var b=a.matchMedia||a.msMatchMedia;return b?function(a){return(a=b(a))&&a.matches||!1}:function(b){var d=!1;return f("@media "+b+" { #modernizr { position: absolute; } }",function(b){d="absolute"==(a.getComputedStyle?
a.getComputedStyle(b,null):b.currentStyle).position}),d}}();d.mq=q;d.testStyles=f;(function(){var a,b,d,e,f;for(f in h)if(h.hasOwnProperty(f)){if(a=[],b=h[f],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(d=0;d<b.options.aliases.length;d++)a.push(b.options.aliases[d].toLowerCase());d="function"===typeof b.fn?b.fn():b.fn;for(e=0;e<a.length;e++){var l=a[e];l=l.split(".");1===l.length?k[l[0]]=d:(!k[l[0]]||k[l[0]]instanceof Boolean||(k[l[0]]=new Boolean(k[l[0]])),
k[l[0]][l[1]]=d);g.push((d?"":"no-")+l.join("-"))}}})();(function(a){var b=l.className,d=k._config.classPrefix||"";if(p&&(b=b.baseVal),k._config.enableJSClass)b=b.replace(new RegExp("(^|\\s)"+d+"no-js(\\s|$)"),"$1"+d+"js$2");k._config.enableClasses&&(b+=" "+d+a.join(" "+d),p?l.className.baseVal=b:l.className=b)})(g);delete d.addTest;delete d.addAsyncTest;for(d=0;d<k._q.length;d++)k._q[d]();a.Modernizr=k}(window,document);
(function(a){function b(){this.versions=this.getVersions()}function d(a,b,d){this.mediaQuery=b;this.url=a;this.id=d}function e(a){this.mq=a;this.segments=[];this.standardSegments=[];this.specialSegments=[];this.parse()}var f=/\(touch-enabled: (.*?)\)/;b.prototype.getVersions=function(){for(var a=[],b=document.querySelectorAll('head link[rel="alternate"][media]'),e=0;e<b.length;e++){var f=b[e].getAttribute("href"),p=b[e].getAttribute("media"),q=b[e].getAttribute("id");a.push(new d(f,p,q))}return a};
b.prototype.redirectIfNeeded=function(){if(!this.getGETParam("f")){var a=this.findVersion(d.prototype.matchesUrl),b=this.getGETParam("d");b?(version=this.findVersion(function(){return this.matchesOverride.call(this,b)}),version.redirect({force:!0},a)):(version=this.findVersion(d.prototype.matches))?a!=version&&version.redirect(null,a):window.console&&window.console.warn("No matched device version.")}};b.prototype.findVersion=function(a){for(var b=0;b<this.versions.length;b++){var d=this.versions[b];
if(a.call(d))return d}return null};b.prototype.getGETParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");return(a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.search))?decodeURIComponent(a[1].replace(/\+/g," ")):null};d.prototype.matches=function(){return(new e(this.mediaQuery)).evaluate()};d.prototype.matchesUrl=function(){var a=window.location.href,b=/^https?:\/\/([^\/:]+)(:\d+)?\/?([^\/]*)\/?.*/;return this.url.match(b)?(a=b.exec(a),b=b.exec(this.url),b[1]&&b[1]!=a[1]||
b[3]&&b[3]!=a[3]?!1:!0):-1!==a.indexOf(this.url,a.length-this.url.length)};d.prototype.matchesOverride=function(a){return this.id==a};d.prototype.redirect=function(a,b){var d=window.location.href;b=b.url;var e=this.url,f,g=d.indexOf("://");-1!=g&&(f=d.substring(g+3));var h;d=b.indexOf("://");-1!=d&&(h=b.substring(d+3));0==f.indexOf(h)&&(locationUrlSuffix=f.substring(h.length),e+=locationUrlSuffix,$.ajax({url:e,type:"head",async:!1,success:function(){if(a&&a.force){var b=-1!=e.indexOf("?")?"&":"?";
e+=b+"f=1"}window.location.href=e}}))};e.prototype.parse=function(){this.segments=this.mq.split(/\s*and\s*/);for(var a=0;a<this.segments.length;a++){var b=this.segments[a];b.match(f)?this.specialSegments.push(b):this.standardSegments.push(b)}};e.prototype.evaluateTouch=function(){for(var a=!0,b=0;b<this.specialSegments.length;b++){var d=this.specialSegments[b].match(f)[1];"0"!==d&&"1"!==d&&window.console&&window.console.warn('Invalid value for "touch-enabled" media query.');d=1===parseInt(d,10)?!0:
!1;a=a&&d==Modernizr.touch}return a};e.prototype.getMediaQuery=function(){return this.standardSegments.join(" and ")};e.prototype.evaluate=function(){return Modernizr.mq(this.getMediaQuery())&&this.evaluateTouch()};(new b).redirectIfNeeded()})(window);
$.extend({hook:function(a,b){return $(a&&"*"!==a?'[data-hook~="'+a+'"]':"[data-hook]",b||"html").filter(function(){return 0==$(this).parent("TEMPLATE").length})}});
/*
 jQuery Cookie Plugin v1.4.1
 https://github.com/carhartl/jquery-cookie

 Copyright 2006, 2014 Klaus Hartl
 Released under the MIT license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){function b(a){a=f.json?JSON.stringify(a):String(a);return f.raw?a:encodeURIComponent(a)}function d(b,d){if(f.raw)var g=b;else a:{0===b.indexOf('"')&&(b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{b=decodeURIComponent(b.replace(e," "));g=f.json?JSON.parse(b):b;break a}catch(l){}g=void 0}return a.isFunction(d)?d(g):g}var e=/\+/g,f=a.cookie=
function(e,h,k){if(1<arguments.length&&!a.isFunction(h)){k=a.extend({},f.defaults,k);if("number"===typeof k.expires){var g=k.expires,p=k.expires=new Date;p.setTime(+p+864E5*g)}return document.cookie=[f.raw?e:encodeURIComponent(e),"=",b(h),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join("")}g=e?void 0:{};p=document.cookie?document.cookie.split("; "):[];for(var q=0,r=p.length;q<r;q++){var v=p[q].split("=");var n=
v.shift();n=f.raw?n:decodeURIComponent(n);v=v.join("=");if(e&&e===n){g=d(v,h);break}e||void 0===(v=d(v))||(g[n]=v)}return g};f.defaults={};a.removeCookie=function(b,d){if(void 0===a.cookie(b))return!1;a.cookie(b,"",a.extend({},d,{expires:-1}));return!a.cookie(b)}});
/*
 http://mths.be/placeholder v2.0.8 by @mathias */
(function(a,b,d){function e(a){var b={},e=/^jQuery\d+$/;d.each(a.attributes,function(a,d){d.specified&&!e.test(d.name)&&(b[d.name]=d.value)});return b}function f(a,b){var e=d(this);if(this.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id"));if(!0===a)return e[0].value=b;e.focus()}else this.value="",e.removeClass("placeholder"),this==h()&&this.select()}function g(){var a=d(this),b=this.id;
if(""==this.value){if("password"==this.type){if(!a.data("placeholder-textinput")){try{var g=a.clone().attr({type:"text"})}catch(u){g=d("<input>").attr(d.extend(e(this),{type:"text"}))}g.removeAttr("name").data({"placeholder-password":a,"placeholder-id":b}).bind("focus.placeholder",f);a.data({"placeholder-textinput":g,"placeholder-id":b}).before(g)}a=a.removeAttr("id").hide().prev().attr("id",b).show()}a.addClass("placeholder");a[0].value=a.attr("placeholder")}else a.removeClass("placeholder")}function h(){try{return b.activeElement}catch(v){}}
var k="[object OperaMini]"==Object.prototype.toString.call(a.operamini),l="placeholder"in b.createElement("input")&&!k;k="placeholder"in b.createElement("textarea")&&!k;var p=d.fn,q=d.valHooks,r=d.propHooks;l&&k?(p=p.placeholder=function(){return this},p.input=p.textarea=!0):(p=p.placeholder=function(){this.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":f,"blur.placeholder":g}).data("placeholder-enabled",!0).trigger("blur.placeholder");return this},p.input=
l,p.textarea=k,p={get:function(a){var b=d(a),e=b.data("placeholder-password");return e?e[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,b){var e=d(a),n=e.data("placeholder-password");if(n)return n[0].value=b;if(!e.data("placeholder-enabled"))return a.value=b;""==b?(a.value=b,a!=h()&&g.call(a)):e.hasClass("placeholder")?f.call(a,!0,b)||(a.value=b):a.value=b;return e}},l||(q.input=p,r.value=p),k||(q.textarea=p,r.value=p),d(function(){d(b).delegate("form",
"submit.placeholder",function(){var a=d(".placeholder",this).each(f);setTimeout(function(){a.each(g)},10)})}),d(a).bind("beforeunload.placeholder",function(){d(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);
/*
 jQuery Validation Plugin v1.13.1

 http://jqueryvalidation.org/

 Copyright (c) 2014 J?rn Zaefferer
 Released under the MIT license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var d=a.data(this[0],"validator");if(d)return d;this.attr("novalidate","novalidate");d=new a.validator(b,this[0]);a.data(this[0],"validator",d);d.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){d.settings.submitHandler&&(d.submitButton=b.target);a(b.target).hasClass("cancel")&&(d.cancelSubmit=!0);void 0!==a(b.target).attr("formnovalidate")&&
(d.cancelSubmit=!0)}),this.submit(function(b){function e(){var e;if(d.settings.submitHandler){d.submitButton&&(e=a("<input type='hidden'/>").attr("name",d.submitButton.name).val(a(d.submitButton).val()).appendTo(d.currentForm));var f=d.settings.submitHandler.call(d,d.currentForm,b);d.submitButton&&e.remove();return void 0!==f?f:!1}return!0}d.settings.debug&&b.preventDefault();if(d.cancelSubmit)return d.cancelSubmit=!1,e();if(d.form())return d.pendingRequest?(d.formSubmitted=!0,!1):e();d.focusInvalid();
return!1}));return d}b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(a(this[0]).is("form"))var b=this.validate().form();else{b=!0;var d=a(this[0].form).validate();this.each(function(){b=d.element(this)&&b})}return b},removeAttrs:function(b){var d={},e=this;a.each(b.split(/\s/),function(a,b){d[b]=e.attr(b);e.removeAttr(b)});return d},rules:function(b,d){var e=this[0];if(b){var f=a.data(e.form,"validator").settings;var k=f.rules;
var l=a.validator.staticRules(e);switch(b){case "add":a.extend(l,a.validator.normalizeRule(d));delete l.messages;k[e.name]=l;d.messages&&(f.messages[e.name]=a.extend(f.messages[e.name],d.messages));break;case "remove":if(!d)return delete k[e.name],l;var p={};a.each(d.split(/\s/),function(b,d){p[d]=l[d];delete l[d];"required"===d&&a(e).removeAttr("aria-required")});return p}}b=a.validator.normalizeRules(a.extend({},a.validator.classRules(e),a.validator.attributeRules(e),a.validator.dataRules(e),a.validator.staticRules(e)),
e);b.required&&(d=b.required,delete b.required,b=a.extend({required:d},b),a(e).attr("aria-required","true"));b.remote&&(d=b.remote,delete b.remote,b=a.extend(b,{remote:d}));return b}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}});a.validator=function(b,d){this.settings=a.extend(!0,{},a.validator.defaults,b);this.currentForm=d;this.init()};a.validator.format=function(b,d){if(1===
arguments.length)return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)};2<arguments.length&&d.constructor!==Array&&(d=a.makeArray(arguments).slice(1));d.constructor!==Array&&(d=[d]);a.each(d,function(a,d){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return d})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),
errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){(9!==b.which||""!==this.elementValue(a))&&(a.name in this.submitted||a===this.lastElement)&&
this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,d,g){"radio"===b.type?this.findByName(b.name).addClass(d).removeClass(g):a(b).addClass(d).removeClass(g)},unhighlight:function(b,d,g){"radio"===b.type?this.findByName(b.name).removeClass(d).addClass(g):a(b).removeClass(d).addClass(g)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",
remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),
rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var d=a.data(this[0].form,"validator"),e="on"+b.type.replace(/^validate/,""),f=d.settings;f[e]&&!this.is(f.ignore)&&f[e].call(d,
this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={};a.each(this.settings.groups,function(b,e){"string"===typeof e&&(e=e.split(/\s/));a.each(e,function(a,e){d[e]=b})});var g=this.settings.rules;
a.each(g,function(b,d){g[b]=a.validator.normalizeRule(d)});a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",b).validateDelegate("select, option, [type='radio'], [type='checkbox']",
"click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var d=this.clean(b),e=this.validationTargetFor(d),h=!0;this.lastElement=e;void 0===e?delete this.invalid[d.name]:(this.prepareElement(e),this.currentElements=a(e),(h=!1!==this.check(e))?delete this.invalid[e.name]:this.invalid[e.name]=!0);a(b).attr("aria-invalid",!h);this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return h},showErrors:function(b){if(b){a.extend(this.errorMap,
b);this.errorList=[];for(var d in b)this.errorList.push({message:b[d],element:this.findByName(d)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},
numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;return b},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text("");this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},
findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,d={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in d||!b.objectLength(a(this).rules())?!1:d[this.name]=!0})},
clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(b){var d=a(b),e=b.type;
if("radio"===e||"checkbox"===e)return a("input[name='"+b.name+"']:checked").val();if("number"===e&&"undefined"!==typeof b.validity)return b.validity.badInput?!1:d.val();b=d.val();return"string"===typeof b?b.replace(/\r/g,""):b},check:function(b){b=this.validationTargetFor(this.clean(b));var d=a(b).rules(),e=a.map(d,function(a,b){return b}).length,h=!1,k=this.elementValue(b),l;for(l in d){var p={method:l,parameters:d[l]};try{var q=a.validator.methods[l].call(this,k,b,p.parameters);if("dependency-mismatch"===
q&&1===e)h=!0;else{h=!1;if("pending"===q){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!q)return this.formatAndAdd(b,p),!1}}catch(r){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+p.method+"' method.",r),r;}}if(!h)return this.objectLength(d)&&this.successList.push(b),!0},customDataMessage:function(b,d){return a(b).data("msg"+d.charAt(0).toUpperCase()+d.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,
b){return(a=this.settings.messages[a])&&(a.constructor===String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,d){return this.findDefined(this.customMessage(b.name,d),this.customDataMessage(b,d),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[d],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,d){var e=this.defaultMessage(b,d.method),f=/\$?\{(\d+)\}/g;
"function"===typeof e?e=e.call(this,d.parameters,b):f.test(e)&&(e=a.validator.format(e.replace(f,"{$1}"),d.parameters));this.errorList.push({message:e,element:b,method:d.method});this.errorMap[b.name]=e;this.submitted[b.name]=e},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){var a;for(a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,
this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},
invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,d){var e,f=this.errorsFor(b),k=this.idOrName(b),l=a(b).attr("aria-describedby");if(f.length)f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.html(d);else{var p=f=a("<"+this.settings.errorElement+">").attr("id",k+"-error").addClass(this.settings.errorClass).html(d||"");this.settings.wrapper&&(p=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent());this.labelContainer.length?
this.labelContainer.append(p):this.settings.errorPlacement?this.settings.errorPlacement(p,a(b)):p.insertAfter(b);f.is("label")?f.attr("for",k):0===f.parents("label[for='"+k+"']").length&&(p=f.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+p+"\\b"))||(l+=" "+p):l=p,a(b).attr("aria-describedby",l),(e=this.groups[b.name])&&a.each(this.groups,function(b,d){d===e&&a("[name='"+b+"']",this.currentForm).attr("aria-describedby",f.attr("id"))}))}!d&&this.settings.success&&(f.text(""),
"string"===typeof this.settings.success?f.addClass(this.settings.success):this.settings.success(f,b));this.toShow=this.toShow.add(f)},errorsFor:function(b){var d=this.idOrName(b);b=a(b).attr("aria-describedby");d="label[for='"+d+"'], label[for='"+d+"'] *";b&&(d=d+", #"+b.replace(/\s+/g,", #"));return this.errors().filter(d)},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){this.checkable(b)&&(b=this.findByName(b.name));return a(b).not(this.settings.ignore)[0]},
checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var d=a(this.currentForm).find("[name='"+b+"']");d.length||(d=a(this.currentForm).find("[id='"+b+"']"));return d},getLength:function(b,d){switch(d.nodeName.toLowerCase()){case "select":return a("option:selected",d).length;case "input":if(this.checkable(d))return this.findByName(d.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},
dependTypes:{"boolean":function(a){return a},string:function(b,d){return!!a(b,d.form).length},"function":function(a,b){return a(b)}},optional:function(b){var d=this.elementValue(b);return!a.validator.methods.required.call(this,d,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,d){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[b.name];d&&0===this.pendingRequest&&
this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!d&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},
creditcard:{creditcard:!0}},addClassRules:function(b,d){b.constructor===String?this.classRuleSettings[b]=d:a.extend(this.classRuleSettings,b)},classRules:function(b){var d={};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(d,a.validator.classRuleSettings[this])});return d},attributeRules:function(b){var d={},e=a(b),h=b.getAttribute("type"),k;for(k in a.validator.methods){if("required"===k){var l=b.getAttribute(k);""===l&&(l=!0);l=!!l}else l=e.attr(k);
/min|max/.test(k)&&(null===h||/number|range|text/.test(h))&&(l=Number(l));l||0===l?d[k]=l:h===k&&"range"!==h&&(d[k]=!0)}d.maxlength&&/-1|2147483647|524288/.test(d.maxlength)&&delete d.maxlength;return d},dataRules:function(b){var d,e={},h=a(b);for(d in a.validator.methods)b=h.data("rule"+d.charAt(0).toUpperCase()+d.substring(1).toLowerCase()),void 0!==b&&(e[d]=b);return e},staticRules:function(b){var d={},e=a.data(b.form,"validator");e.settings.rules&&(d=a.validator.normalizeRule(e.settings.rules[b.name])||
{});return d},normalizeRules:function(b,d){a.each(b,function(e,f){if(!1===f)delete b[e];else if(f.param||f.depends){var g=!0;switch(typeof f.depends){case "string":g=!!a(f.depends,d.form).length;break;case "function":g=f.depends.call(d,d)}g?b[e]=void 0!==f.param?f.param:!0:delete b[e]}});a.each(b,function(e,f){b[e]=a.isFunction(f)?f(d):f});a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){if(b[this])if(a.isArray(b[this]))b[this]=
[Number(b[this][0]),Number(b[this][1])];else if("string"===typeof b[this]){var d=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/);b[this]=[Number(d[0]),Number(d[1])]}});a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength));return b},normalizeRule:function(b){if("string"===typeof b){var d={};a.each(b.split(/\s/),function(){d[this]=
!0});b=d}return b},addMethod:function(b,d,g){a.validator.methods[b]=d;a.validator.messages[b]=void 0!==g?g:a.validator.messages[b];3>d.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,d,g){return this.depend(g,d)?"select"===d.nodeName.toLowerCase()?(b=a(d).val())&&0<b.length:this.checkable(d)?0<this.getLength(b,d):0<a.trim(b).length:"dependency-mismatch"},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;b=0;var d=!1,e;a=a.replace(/\D/g,
"");if(13>a.length||19<a.length)return!1;for(e=a.length-1;0<=e;e--){var f=a.charAt(e);f=parseInt(f,10);d&&9<(f*=2)&&(f-=9);b+=f;d=!d}return 0===b%10},minlength:function(b,d,g){b=a.isArray(b)?b.length:this.getLength(b,d);return this.optional(d)||b>=g},maxlength:function(b,d,g){b=a.isArray(b)?b.length:this.getLength(b,d);return this.optional(d)||b<=g},rangelength:function(b,d,g){b=a.isArray(b)?b.length:this.getLength(b,d);return this.optional(d)||b>=g[0]&&b<=g[1]},min:function(a,b,d){return this.optional(b)||
a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},equalTo:function(b,d,g){g=a(g);this.settings.onfocusout&&g.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(d).valid()});return b===g.val()},remote:function(b,d,g){if(this.optional(d))return"dependency-mismatch";var e=this.previousValue(d);this.settings.messages[d.name]||(this.settings.messages[d.name]={});e.originalMessage=this.settings.messages[d.name].remote;
this.settings.messages[d.name].remote=e.message;g="string"===typeof g&&{url:g}||g;if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(d);var l={};l[d.name]=b;a.ajax(a.extend(!0,{url:g,mode:"abort",port:"validate"+d.name,dataType:"json",data:l,context:f.currentForm,success:function(g){var h=!0===g||"true"===g;f.settings.messages[d.name].remote=e.originalMessage;if(h){var k=f.formSubmitted;f.prepareElement(d);f.formSubmitted=k;f.successList.push(d);delete f.invalid[d.name];f.showErrors()}else k=
{},g=g||f.defaultMessage(d,"remote"),k[d.name]=e.message=a.isFunction(g)?g(b):g,f.invalid[d.name]=!0,f.showErrors(k);e.valid=h;f.stopRequest(d,h)}},g));return"pending"}}});a.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead.";};var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,d,g){d=a.port;"abort"===a.mode&&(b[d]&&b[d].abort(),b[d]=g)});else{var d=a.ajax;a.ajax=function(e){var f=("port"in e?e:a.ajaxSettings).port;return"abort"===("mode"in e?e:a.ajaxSettings).mode?
(b[f]&&b[f].abort(),b[f]=d.apply(this,arguments),b[f]):d.apply(this,arguments)}}a.extend(a.fn,{validateDelegate:function(b,d,g){return this.bind(d,function(d){var e=a(d.target);if(e.is(b))return g.apply(e,arguments)})}})});
/*
 jQuery Viewport Plugin
*/
(function(a){a.fn.isInView=function(){var b=a(window);return this.filter(function(){var d=a(this),e=d.offset().top;d=e+d.outerHeight();var f=b.scrollTop(),g=f+b.height();return d>f&&e<g?1:0})}})(jQuery);
(function(a){"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)})(function(a){function b(b){!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll="none");void 0!==b.click&&void 0===b.tap&&(b.tap=b.click);b||(b={});b=a.extend({},a.fn.swipe.defaults,b);return this.each(function(){var e=a(this),f=e.data("TouchSwipe");f||(f=new d(this,b),e.data("TouchSwipe",f))})}function d(b,d){function h(b){if(!0!==R.data("TouchSwipe_intouch")&&
!(0<a(b.target).closest(d.excludedElements,R).length)){var f=b.originalEvent?b.originalEvent:b,g=e?f.touches[0]:f;T="start";e?X=f.touches.length:b.preventDefault();L=0;ra=aa=null;ea=Z=S=0;ca=1;W=0;O=J();fa=N();ha=wa=0;if(!e||X===d.fingers||"all"===d.fingers||B()){if(A(0,g),U=da(),2==X&&(A(1,f.touches[1]),Z=ea=Y(O[0].start,O[1].start)),d.swipeStatus||d.pinchStatus)var n=u(f,T)}else n=!1;if(!1===n)return T="cancel",u(f,T),n;d.hold&&(xa=setTimeout(a.proxy(function(){R.trigger("hold",[f.target]);d.hold&&
(n=d.hold.call(R,f,f.target))},this),d.longTapThreshold));D(!0);return null}}function k(b){var f=b.originalEvent?b.originalEvent:b;if("end"!==T&&"cancel"!==T&&!F()){var g=C(e?f.touches[0]:f);za=da();e&&(X=f.touches.length);d.hold&&clearTimeout(xa);T="move";2==X&&(0==Z?(A(1,f.touches[1]),Z=ea=Y(O[0].start,O[1].start)):(C(f.touches[1]),ea=Y(O[0].end,O[1].end),ra=1>ca?"out":"in"),ca=(ea/Z).toFixed(2),W=Math.abs(Z-ea));if(X===d.fingers||"all"===d.fingers||!e||B()){var n=g.start;var h=g.end;n=Math.round(180*
Math.atan2(h.y-n.y,n.x-h.x)/Math.PI);0>n&&(n=360-Math.abs(n));aa=45>=n&&0<=n?"left":360>=n&&315<=n?"left":135<=n&&225>=n?"right":45<n&&135>n?"down":"up";n=aa;if(!1!==d.preventDefaultEvents)if("none"===d.allowPageScroll)b.preventDefault();else switch(h="auto"===d.allowPageScroll,n){case "left":(d.swipeLeft&&h||!h&&"horizontal"!=d.allowPageScroll)&&b.preventDefault();break;case "right":(d.swipeRight&&h||!h&&"horizontal"!=d.allowPageScroll)&&b.preventDefault();break;case "up":(d.swipeUp&&h||!h&&"vertical"!=
d.allowPageScroll)&&b.preventDefault();break;case "down":(d.swipeDown&&h||!h&&"vertical"!=d.allowPageScroll)&&b.preventDefault()}b=g.start;n=g.end;L=Math.round(Math.sqrt(Math.pow(n.x-b.x,2)+Math.pow(n.y-b.y,2)));S=za-U;b=aa;n=L;n=Math.max(n,E(b));fa[b].distance=n;if(d.swipeStatus||d.pinchStatus)var k=u(f,T);if(!d.triggerOnTouchEnd||d.triggerOnTouchLeave){b=!0;if(d.triggerOnTouchLeave){var l=a(this);var p=l.offset();b=p.left;n=p.left+l.outerWidth();h=p.top;l=p.top+l.outerHeight();g=g.end;b=g.x>b&&
g.x<n&&g.y>h&&g.y<l}!d.triggerOnTouchEnd&&b?T=t("move"):d.triggerOnTouchLeave&&!b&&(T=t("end"));"cancel"!=T&&"end"!=T||u(f,T)}}else T="cancel",u(f,T);!1===k&&(T="cancel",u(f,T))}}function q(a){var b=a.originalEvent;if(e&&0<b.touches.length)return wa=da(),ha=event.touches.length+1,!0;F()&&(X=ha);za=da();S=za-U;z()||!y()?(T="cancel",u(b,T)):d.triggerOnTouchEnd||0==d.triggerOnTouchEnd&&"move"===T?(a.preventDefault(),T="end",u(b,T)):!d.triggerOnTouchEnd&&d.tap?(T="end",w(b,T,"tap")):"move"===T&&(T="cancel",
u(b,T));D(!1);return null}function r(){ea=Z=U=za=X=0;ca=1;ha=wa=0;D(!1)}function v(a){a=a.originalEvent;d.triggerOnTouchLeave&&(T=t("end"),u(a,T))}function n(){R.unbind(ka,h);R.unbind(oa,r);R.unbind(M,k);R.unbind(P,q);ba&&R.unbind(ba,v);D(!1)}function t(a){var b=a,e=d.maxTimeThreshold?S>=d.maxTimeThreshold?!1:!0:!0,f=y(),g=z();!e||g?b="cancel":!f||"move"!=a||d.triggerOnTouchEnd&&!d.triggerOnTouchLeave?!f&&"end"==a&&d.triggerOnTouchLeave&&(b="cancel"):b="end";return b}function u(a,b){var f=void 0;
if(G()&&H()||H()||x()&&B()||B()){if(G()&&H()||H())f=w(a,b,"swipe");(x()&&B()||B())&&!1!==f&&(f=w(a,b,"pinch"))}else K()&&d.doubleTap&&!1!==f?f=w(a,b,"doubletap"):S>d.longTapThreshold&&10>L&&d.longTap&&!1!==f?f=w(a,b,"longtap"):(1===X||!e)&&(isNaN(L)||L<d.threshold)&&d.tap&&!1!==f&&(f=w(a,b,"tap"));"cancel"===b&&r(a);"end"===b&&(e?0==a.touches.length&&r(a):r(a));return f}function w(b,e,f){var g=void 0;if("swipe"==f){R.trigger("swipeStatus",[e,aa||null,L||0,S||0,X,O]);if(d.swipeStatus&&(g=d.swipeStatus.call(R,
b,e,aa||null,L||0,S||0,X,O),!1===g))return!1;if("end"==e&&G()){R.trigger("swipe",[aa,L,S,X,O]);if(d.swipe&&(g=d.swipe.call(R,b,aa,L,S,X,O),!1===g))return!1;switch(aa){case "left":R.trigger("swipeLeft",[aa,L,S,X,O]);d.swipeLeft&&(g=d.swipeLeft.call(R,b,aa,L,S,X,O));break;case "right":R.trigger("swipeRight",[aa,L,S,X,O]);d.swipeRight&&(g=d.swipeRight.call(R,b,aa,L,S,X,O));break;case "up":R.trigger("swipeUp",[aa,L,S,X,O]);d.swipeUp&&(g=d.swipeUp.call(R,b,aa,L,S,X,O));break;case "down":R.trigger("swipeDown",
[aa,L,S,X,O]),d.swipeDown&&(g=d.swipeDown.call(R,b,aa,L,S,X,O))}}}if("pinch"==f){R.trigger("pinchStatus",[e,ra||null,W||0,S||0,X,ca,O]);if(d.pinchStatus&&(g=d.pinchStatus.call(R,b,e,ra||null,W||0,S||0,X,ca,O),!1===g))return!1;if("end"==e&&x())switch(ra){case "in":R.trigger("pinchIn",[ra||null,W||0,S||0,X,ca,O]);d.pinchIn&&(g=d.pinchIn.call(R,b,ra||null,W||0,S||0,X,ca,O));break;case "out":R.trigger("pinchOut",[ra||null,W||0,S||0,X,ca,O]),d.pinchOut&&(g=d.pinchOut.call(R,b,ra||null,W||0,S||0,X,ca,O))}}if("tap"==
f){if("cancel"===e||"end"===e)clearTimeout(ta),clearTimeout(xa),d.doubleTap&&!K()?(Aa=da(),ta=setTimeout(a.proxy(function(){Aa=null;R.trigger("tap",[b.target]);d.tap&&(g=d.tap.call(R,b,b.target))},this),d.doubleTapThreshold)):(Aa=null,R.trigger("tap",[b.target]),d.tap&&(g=d.tap.call(R,b,b.target)))}else if("doubletap"==f){if("cancel"===e||"end"===e)clearTimeout(ta),Aa=null,R.trigger("doubletap",[b.target]),d.doubleTap&&(g=d.doubleTap.call(R,b,b.target))}else"longtap"!=f||"cancel"!==e&&"end"!==e||
(clearTimeout(ta),Aa=null,R.trigger("longtap",[b.target]),d.longTap&&(g=d.longTap.call(R,b,b.target)));return g}function y(){var a=!0;null!==d.threshold&&(a=L>=d.threshold);return a}function z(){var a=!1;null!==d.cancelThreshold&&null!==aa&&(a=E(aa)-L>=d.cancelThreshold);return a}function x(){var a=X===d.fingers||"all"===d.fingers||!e,b=0!==O[0].end.x;var f=null!==d.pinchThreshold?W>=d.pinchThreshold:!0;return a&&b&&f}function B(){return!!(d.pinchStatus||d.pinchIn||d.pinchOut)}function G(){var a=
d.maxTimeThreshold?S>=d.maxTimeThreshold?!1:!0:!0,b=y(),f=X===d.fingers||"all"===d.fingers||!e,g=0!==O[0].end.x;return!z()&&g&&f&&b&&a}function H(){return!!(d.swipe||d.swipeStatus||d.swipeLeft||d.swipeRight||d.swipeUp||d.swipeDown)}function K(){if(null==Aa)return!1;var a=da();return!!d.doubleTap&&a-Aa<=d.doubleTapThreshold}function F(){var a=!1;wa&&da()-wa<=d.fingerReleaseThreshold&&(a=!0);return a}function D(a){!0===a?(R.bind(M,k),R.bind(P,q),ba&&R.bind(ba,v)):(R.unbind(M,k,!1),R.unbind(P,q,!1),
ba&&R.unbind(ba,v,!1));R.data("TouchSwipe_intouch",!0===a)}function A(a,b){O[a].identifier=void 0!==b.identifier?b.identifier:0;O[a].start.x=O[a].end.x=b.pageX||b.clientX;O[a].start.y=O[a].end.y=b.pageY||b.clientY;return O[a]}function C(a){var b=void 0!==a.identifier?a.identifier:0;a:{for(var d=0;d<O.length;d++)if(O[d].identifier==b){b=O[d];break a}b=void 0}b.end.x=a.pageX||a.clientX;b.end.y=a.pageY||a.clientY;return b}function J(){for(var a=[],b=0;5>=b;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});
return a}function E(a){if(fa[a])return fa[a].distance}function N(){var a={};a.left=I("left");a.right=I("right");a.up=I("up");a.down=I("down");return a}function I(a){return{direction:a,distance:0}}function Y(a,b){var d=Math.abs(a.x-b.x);a=Math.abs(a.y-b.y);return Math.round(Math.sqrt(d*d+a*a))}function da(){return(new Date).getTime()}var V=e||g||!d.fallbackToMouseEvents,ka=V?g?f?"MSPointerDown":"pointerdown":"touchstart":"mousedown",M=V?g?f?"MSPointerMove":"pointermove":"touchmove":"mousemove",P=V?
g?f?"MSPointerUp":"pointerup":"touchend":"mouseup",ba=V?null:"mouseleave",oa=g?f?"MSPointerCancel":"pointercancel":"touchcancel",L=0,aa=null,S=0,Z=0,ea=0,ca=1,W=0,ra=0,fa=null,R=a(b),T="start",X=0,O=null,U=0,za=0,wa=0,ha=0,Aa=0,ta=null,xa=null;try{R.bind(ka,h),R.bind(oa,r)}catch(Sa){a.error("events not supported "+ka+","+oa+" on jQuery.swipe")}this.enable=function(){R.bind(ka,h);R.bind(oa,r);return R};this.disable=function(){n();return R};this.destroy=function(){n();R.data("TouchSwipe",null);R=null};
this.option=function(b,e){if(void 0!==d[b]){if(void 0===e)return d[b];d[b]=e}else a.error("Option "+b+" does not exist on jQuery.swipe.options");return null}}var e="ontouchstart"in window,f=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,g=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;a.fn.swipe=function(d){var e=a(this),f=e.data("TouchSwipe");if(f&&"string"===typeof d){if(f[d])return f[d].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+
d+" does not exist on jQuery.swipe")}else if(!(f||"object"!==typeof d&&d))return b.apply(this,arguments);return e};a.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,
triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};a.fn.swipe.phases={PHASE_START:"start",PHASE_MOVE:"move",PHASE_END:"end",PHASE_CANCEL:"cancel"};a.fn.swipe.directions={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down",IN:"in",OUT:"out"};a.fn.swipe.pageScroll={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"};a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:"all"}});
(function(a,b){"function"===typeof define&&define.amd?define(["jquery"],b):b(a.jQuery)})(this,function(a){var b=!!document.createElement("canvas").getContext;var d=function(){var a=document.createElement("div");a.innerHTML='<v:shape id="vml_flag1" adj="1" />';a=a.firstChild;a.style.behavior="url(#default#VML)";return a?"object"==typeof a.adj:!0}();if(b||d){if(b){var e=function(a){return Math.max(0,Math.min(parseInt(a,16),255))};var f=function(a,b){return"rgba("+e(a.substr(0,2))+","+e(a.substr(2,2))+
","+e(a.substr(4,2))+","+b+")"};var g=function(b){var d=a("<canvas></canvas>");c=d.get(0);var e=a(b).width(),f=a(b).height();0<e&&d.css("width",e);0<f&&d.css("height",f);c.getContext("2d").clearRect(0,0,a(b).width(),a(b).height());return c};var h=function(a,b,d,e,f){e=e||0;f=f||0;a.beginPath();if("rect"==b)a.rect(d[0]+e,d[1]+f,d[2]-d[0],d[3]-d[1]);else if("poly"==b)for(a.moveTo(d[0]+e,d[1]+f),i=2;i<d.length;i+=2)a.lineTo(d[i]+e,d[i+1]+f);else"circ"==b&&a.arc(d[0]+e,d[1]+f,d[2],0,2*Math.PI,!1);a.closePath()};
var k=function(b,d,e,g,n){n=b.getContext("2d");if(g.shadow){n.save();"inside"==g.shadowPosition&&(h(n,d,e),n.clip());var t=100*b.width,k=100*b.height;h(n,d,e,t,k);n.shadowOffsetX=g.shadowX-t;n.shadowOffsetY=g.shadowY-k;n.shadowBlur=g.shadowRadius;n.shadowColor=f(g.shadowColor,g.shadowOpacity);(t=g.shadowFrom)||(t="outside"==g.shadowPosition?"fill":"stroke");"stroke"==t?(n.strokeStyle="rgba(0,0,0,1)",n.stroke()):"fill"==t&&(n.fillStyle="rgba(0,0,0,1)",n.fill());n.restore();"outside"==g.shadowPosition&&
(n.save(),h(n,d,e),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0,0,0,1);",n.fill(),n.restore())}n.save();h(n,d,e);g.fill&&(n.fillStyle=f(g.fillColor,g.fillOpacity),n.fill());g.stroke&&(n.strokeStyle=f(g.strokeColor,g.strokeOpacity),n.lineWidth=g.strokeWidth,n.stroke());n.restore();g.fade&&a(b).css("opacity",0).animate({opacity:1},100)};var l=function(a){a.getContext("2d").clearRect(0,0,a.width,a.height)}}else g=function(b){return a('<var style="zoom:1;overflow:hidden;display:block;width:'+
b.width+"px;height:"+b.height+'px;"></var>').get(0)},k=function(b,d,e,f,g){var n;for(h in e)e[h]=parseInt(e[h],10);var h='<v:fill color="#'+f.fillColor+'" opacity="'+(f.fill?f.fillOpacity:0)+'" />';var t=f.stroke?'strokeweight="'+f.strokeWidth+'" stroked="t" strokecolor="#'+f.strokeColor+'"':'stroked="f"';f='<v:stroke opacity="'+f.strokeOpacity+'"/>';"rect"==d?n=a('<v:rect name="'+g+'" filled="t" '+t+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+e[0]+"px;top:"+e[1]+"px;width:"+
(e[2]-e[0])+"px;height:"+(e[3]-e[1])+'px;"></v:rect>'):"poly"==d?n=a('<v:shape name="'+g+'" filled="t" '+t+' coordorigin="0,0" coordsize="'+b.width+","+b.height+'" path="m '+e[0]+","+e[1]+" l "+e.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+b.width+"px;height:"+b.height+'px;"></v:shape>'):"circ"==d&&(n=a('<v:oval name="'+g+'" filled="t" '+t+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(e[0]-e[2])+"px;top:"+
(e[1]-e[2])+"px;width:"+2*e[2]+"px;height:"+2*e[2]+'px;"></v:oval>'));n.get(0).innerHTML=h+f;a(b).append(n)},l=function(b){var d=a("<div>"+b.innerHTML+"</div>");d.children("[name=highlighted]").remove();b.innerHTML=d.html()};var p=function(a){var b=(a.getAttribute("shape")||"rect").toLowerCase().substr(0,4);if("defa"!==b){var d=(a.getAttribute("coords")||"").split(",");for(a=0;a<d.length;a++)d[a]=parseFloat(d[a]);return[b,d]}};var q=function(b,d){b=a(b);return a.extend({},d,a.metadata?b.metadata():
!1,b.data("maphilight"))};var r=function(a){return!a.complete||"undefined"!=typeof a.naturalWidth&&0===a.naturalWidth?!1:!0};var v={position:"absolute",left:0,top:0,padding:0,border:0};var n=!1;a.fn.maphilight=function(e){e=a.extend({},a.fn.maphilight.defaults,e);b||n||(a(window).ready(function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var b=document.createStyleSheet();a.each("shape rect oval circ fill stroke imagedata group textbox".split(" "),function(){b.addRule("v\\:"+this,
"behavior: url(#default#VML); antialias:true")})}),n=!0);return this.each(function(){var f,n;var h=a(this);if(!r(this))return window.setTimeout(function(){h.maphilight(e)},200);var t=a.extend({},e,a.metadata?h.metadata():!1,h.data("maphilight"));if(f=h.get(0).getAttribute("usemap")){var x=a('map[name="'+f.substr(1)+'"]');if(h.is('img,input[type="image"]')&&f&&0<x.length){h.hasClass("maphilighted")&&(f=h.parent(),h.insertBefore(f),f.remove(),a(x).unbind(".maphilight"));f=this.src.replace(/[\n\r]/g,
"");f=a("<div></div>").css({display:"block",backgroundImage:'url("'+f+'")',backgroundSize:"contain",position:"relative",padding:0,width:this.width,height:this.height});t.wrapClass&&(!0===t.wrapClass?f.addClass(a(this).attr("class")):f.addClass(t.wrapClass));h.before(f).css("opacity",1E-10).css(v).remove();d&&h.css("filter","Alpha(opacity=0)");f.append(h);var B=g(this);a(B).css(v);B.height=this.height;B.width=this.width;a(x).bind("alwaysOn.maphilight",function(){n&&l(n);b||a(B).empty();a(x).find("area[coords]").each(function(){var d;
var e=q(this,t);e.alwaysOn&&(!n&&b&&(n=g(h[0]),a(n).css(v),n.width=h[0].width,n.height=h[0].height,h.before(n)),e.fade=e.alwaysOnFade,(d=p(this))&&(b?k(n,d[0],d[1],e,""):k(B,d[0],d[1],e,"")))})}).trigger("alwaysOn.maphilight").bind("mouseover.maphilight focusin.maphilight",function(d){var e=d.target;var f=q(e,t);f.neverOn||f.alwaysOn||!(d=p(e))||(k(B,d[0],d[1],f,"highlighted"),f.groupBy&&(/^[a-zA-Z][\-a-zA-Z]+$/.test(f.groupBy)?x.find("area["+f.groupBy+'="'+a(e).attr(f.groupBy)+'"]'):x.find(f.groupBy)).each(function(){if(this!=
e){var a=q(this,t);if(!a.neverOn&&!a.alwaysOn){var b=p(this);k(B,b[0],b[1],a,"highlighted")}}}),b||a(B).append("<v:rect></v:rect>"))}).bind("mouseout.maphilight focusout.maphilight",function(a){l(B)});h.before(B);h.addClass("maphilighted")}}})};a.fn.maphilight.defaults={fill:!0,fillColor:"000000",fillOpacity:.2,stroke:!0,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:6,shadowColor:"000000",shadowOpacity:.8,
shadowPosition:"outside",shadowFrom:!1}}else a.fn.maphilight=function(){return this}});
(function(){var a=this,b=a._,d=Array.prototype,e=Object.prototype,f=d.push,g=d.slice,h=d.concat,k=e.toString,l=e.hasOwnProperty;e=Array.isArray;var p=Object.keys,q=Function.prototype.bind,r=function(a){if(a instanceof r)return a;if(!(this instanceof r))return new r(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=r),exports._=r):a._=r;r.VERSION="1.7.0";var v=function(a,b,d){if(void 0===b)return a;switch(null==d?3:d){case 1:return function(d){return a.call(b,
d)};case 2:return function(d,e){return a.call(b,d,e)};case 3:return function(d,e,f){return a.call(b,d,e,f)};case 4:return function(d,e,f,g){return a.call(b,d,e,f,g)}}return function(){return a.apply(b,arguments)}};r.iteratee=function(a,b,d){return null==a?r.identity:r.isFunction(a)?v(a,b,d):r.isObject(a)?r.matches(a):r.property(a)};r.each=r.forEach=function(a,b,d){if(null==a)return a;b=v(b,d);var e=a.length;if(e===+e)for(d=0;d<e;d++)b(a[d],d,a);else{var f=r.keys(a);d=0;for(e=f.length;d<e;d++)b(a[f[d]],
f[d],a)}return a};r.map=r.collect=function(a,b,d){if(null==a)return[];b=r.iteratee(b,d);d=a.length!==+a.length&&r.keys(a);for(var e=(d||a).length,f=Array(e),g,h=0;h<e;h++)g=d?d[h]:h,f[h]=b(a[g],g,a);return f};r.reduce=r.foldl=r.inject=function(a,b,d,e){null==a&&(a=[]);b=v(b,e,4);var f=a.length!==+a.length&&r.keys(a),g=(f||a).length,h=0;if(3>arguments.length){if(!g)throw new TypeError("Reduce of empty array with no initial value");d=a[f?f[h++]:h++]}for(;h<g;h++){var k=f?f[h]:h;d=b(d,a[k],k,a)}return d};
r.reduceRight=r.foldr=function(a,b,d,e){null==a&&(a=[]);b=v(b,e,4);var f=a.length!==+a.length&&r.keys(a),g=(f||a).length;if(3>arguments.length){if(!g)throw new TypeError("Reduce of empty array with no initial value");d=a[f?f[--g]:--g]}for(;g--;){var h=f?f[g]:g;d=b(d,a[h],h,a)}return d};r.find=r.detect=function(a,b,d){var e;b=r.iteratee(b,d);r.some(a,function(a,d,f){if(b(a,d,f))return e=a,!0});return e};r.filter=r.select=function(a,b,d){var e=[];if(null==a)return e;b=r.iteratee(b,d);r.each(a,function(a,
d,f){b(a,d,f)&&e.push(a)});return e};r.reject=function(a,b,d){return r.filter(a,r.negate(r.iteratee(b)),d)};r.every=r.all=function(a,b,d){if(null==a)return!0;b=r.iteratee(b,d);d=a.length!==+a.length&&r.keys(a);var e=(d||a).length,f;for(f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0};r.some=r.any=function(a,b,d){if(null==a)return!1;b=r.iteratee(b,d);d=a.length!==+a.length&&r.keys(a);var e=(d||a).length,f;for(f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1};r.contains=r.include=
function(a,b){if(null==a)return!1;a.length!==+a.length&&(a=r.values(a));return 0<=r.indexOf(a,b)};r.invoke=function(a,b){var d=g.call(arguments,2),e=r.isFunction(b);return r.map(a,function(a){return(e?b:a[b]).apply(a,d)})};r.pluck=function(a,b){return r.map(a,r.property(b))};r.where=function(a,b){return r.filter(a,r.matches(b))};r.findWhere=function(a,b){return r.find(a,r.matches(b))};r.max=function(a,b,d){var e=-Infinity,f=-Infinity,g;if(null==b&&null!=a){a=a.length===+a.length?a:r.values(a);for(var h=
0,k=a.length;h<k;h++)d=a[h],d>e&&(e=d)}else b=r.iteratee(b,d),r.each(a,function(a,d,h){g=b(a,d,h);if(g>f||-Infinity===g&&-Infinity===e)e=a,f=g});return e};r.min=function(a,b,d){var e=Infinity,f=Infinity,g;if(null==b&&null!=a){a=a.length===+a.length?a:r.values(a);for(var h=0,k=a.length;h<k;h++)d=a[h],d<e&&(e=d)}else b=r.iteratee(b,d),r.each(a,function(a,d,h){g=b(a,d,h);if(g<f||Infinity===g&&Infinity===e)e=a,f=g});return e};r.shuffle=function(a){a=a&&a.length===+a.length?a:r.values(a);for(var b=a.length,
d=Array(b),e=0,f;e<b;e++)f=r.random(0,e),f!==e&&(d[e]=d[f]),d[f]=a[e];return d};r.sample=function(a,b,d){return null==b||d?(a.length!==+a.length&&(a=r.values(a)),a[r.random(a.length-1)]):r.shuffle(a).slice(0,Math.max(0,b))};r.sortBy=function(a,b,d){b=r.iteratee(b,d);return r.pluck(r.map(a,function(a,d,e){return{value:a,index:d,criteria:b(a,d,e)}}).sort(function(a,b){var d=a.criteria,e=b.criteria;if(d!==e){if(d>e||void 0===d)return 1;if(d<e||void 0===e)return-1}return a.index-b.index}),"value")};var n=
function(a){return function(b,d,e){var f={};d=r.iteratee(d,e);r.each(b,function(e,g){g=d(e,g,b);a(f,e,g)});return f}};r.groupBy=n(function(a,b,d){r.has(a,d)?a[d].push(b):a[d]=[b]});r.indexBy=n(function(a,b,d){a[d]=b});r.countBy=n(function(a,b,d){r.has(a,d)?a[d]++:a[d]=1});r.sortedIndex=function(a,b,d,e){d=r.iteratee(d,e,1);b=d(b);e=0;for(var f=a.length;e<f;){var g=e+f>>>1;d(a[g])<b?e=g+1:f=g}return e};r.toArray=function(a){return a?r.isArray(a)?g.call(a):a.length===+a.length?r.map(a,r.identity):r.values(a):
[]};r.size=function(a){return null==a?0:a.length===+a.length?a.length:r.keys(a).length};r.partition=function(a,b,d){b=r.iteratee(b,d);var e=[],f=[];r.each(a,function(a,d,g){(b(a,d,g)?e:f).push(a)});return[e,f]};r.first=r.head=r.take=function(a,b,d){if(null!=a)return null==b||d?a[0]:0>b?[]:g.call(a,0,b)};r.initial=function(a,b,d){return g.call(a,0,Math.max(0,a.length-(null==b||d?1:b)))};r.last=function(a,b,d){if(null!=a)return null==b||d?a[a.length-1]:g.call(a,Math.max(a.length-b,0))};r.rest=r.tail=
r.drop=function(a,b,d){return g.call(a,null==b||d?1:b)};r.compact=function(a){return r.filter(a,r.identity)};var t=function(a,b,d,e){if(b&&r.every(a,r.isArray))return h.apply(e,a);for(var g=0,k=a.length;g<k;g++){var l=a[g];r.isArray(l)||r.isArguments(l)?b?f.apply(e,l):t(l,b,d,e):d||e.push(l)}return e};r.flatten=function(a,b){return t(a,b,!1,[])};r.without=function(a){return r.difference(a,g.call(arguments,1))};r.uniq=r.unique=function(a,b,d,e){if(null==a)return[];r.isBoolean(b)||(e=d,d=b,b=!1);null!=
d&&(d=r.iteratee(d,e));e=[];for(var f=[],g=0,h=a.length;g<h;g++){var k=a[g];if(b)g&&f===k||e.push(k),f=k;else if(d){var l=d(k,g,a);0>r.indexOf(f,l)&&(f.push(l),e.push(k))}else 0>r.indexOf(e,k)&&e.push(k)}return e};r.union=function(){return r.uniq(t(arguments,!0,!0,[]))};r.intersection=function(a){if(null==a)return[];for(var b=[],d=arguments.length,e=0,f=a.length;e<f;e++){var g=a[e];if(!r.contains(b,g)){for(var h=1;h<d&&r.contains(arguments[h],g);h++);h===d&&b.push(g)}}return b};r.difference=function(a){var b=
t(g.call(arguments,1),!0,!0,[]);return r.filter(a,function(a){return!r.contains(b,a)})};r.zip=function(a){if(null==a)return[];for(var b=r.max(arguments,"length").length,d=Array(b),e=0;e<b;e++)d[e]=r.pluck(arguments,e);return d};r.object=function(a,b){if(null==a)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};r.indexOf=function(a,b,d){if(null==a)return-1;var e=0,f=a.length;if(d)if("number"==typeof d)e=0>d?Math.max(0,f+d):d;else return e=r.sortedIndex(a,b),a[e]===
b?e:-1;for(;e<f;e++)if(a[e]===b)return e;return-1};r.lastIndexOf=function(a,b,d){if(null==a)return-1;var e=a.length;for("number"==typeof d&&(e=0>d?e+d+1:Math.min(e,d+1));0<=--e;)if(a[e]===b)return e;return-1};r.range=function(a,b,d){1>=arguments.length&&(b=a||0,a=0);d=d||1;for(var e=Math.max(Math.ceil((b-a)/d),0),f=Array(e),g=0;g<e;g++,a+=d)f[g]=a;return f};var u=function(){};r.bind=function(a,b){var d;if(q&&a.bind===q)return q.apply(a,g.call(arguments,1));if(!r.isFunction(a))throw new TypeError("Bind must be called on a function");
var e=g.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,e.concat(g.call(arguments)));u.prototype=a.prototype;var f=new u;u.prototype=null;var h=a.apply(f,e.concat(g.call(arguments)));return r.isObject(h)?h:f}};r.partial=function(a){var b=g.call(arguments,1);return function(){for(var d=0,e=b.slice(),f=0,g=e.length;f<g;f++)e[f]===r&&(e[f]=arguments[d++]);for(;d<arguments.length;)e.push(arguments[d++]);return a.apply(this,e)}};r.bindAll=function(a){var b,d=arguments.length;
if(1>=d)throw Error("bindAll must be passed function names");for(b=1;b<d;b++){var e=arguments[b];a[e]=r.bind(a[e],a)}return a};r.memoize=function(a,b){var d=function(e){var f=d.cache,g=b?b.apply(this,arguments):e;r.has(f,g)||(f[g]=a.apply(this,arguments));return f[g]};d.cache={};return d};r.delay=function(a,b){var d=g.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};r.defer=function(a){return r.delay.apply(r,[a,1].concat(g.call(arguments,1)))};r.throttle=function(a,b,d){var e,
f,g,h=null,k=0;d||(d={});var l=function(){k=!1===d.leading?0:r.now();h=null;g=a.apply(e,f);h||(e=f=null)};return function(){var p=r.now();k||!1!==d.leading||(k=p);var n=b-(p-k);e=this;f=arguments;0>=n||n>b?(clearTimeout(h),h=null,k=p,g=a.apply(e,f),h||(e=f=null)):h||!1===d.trailing||(h=setTimeout(l,n));return g}};r.debounce=function(a,b,d){var e,f,g,h,k,l=function(){var p=r.now()-h;p<b&&0<p?e=setTimeout(l,b-p):(e=null,d||(k=a.apply(g,f),e||(g=f=null)))};return function(){g=this;f=arguments;h=r.now();
var p=d&&!e;e||(e=setTimeout(l,b));p&&(k=a.apply(g,f),g=f=null);return k}};r.wrap=function(a,b){return r.partial(b,a)};r.negate=function(a){return function(){return!a.apply(this,arguments)}};r.compose=function(){var a=arguments,b=a.length-1;return function(){for(var d=b,e=a[b].apply(this,arguments);d--;)e=a[d].call(this,e);return e}};r.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};r.before=function(a,b){var d;return function(){0<--a?d=b.apply(this,arguments):b=null;
return d}};r.once=r.partial(r.before,2);r.keys=function(a){if(!r.isObject(a))return[];if(p)return p(a);var b=[],d;for(d in a)r.has(a,d)&&b.push(d);return b};r.values=function(a){for(var b=r.keys(a),d=b.length,e=Array(d),f=0;f<d;f++)e[f]=a[b[f]];return e};r.pairs=function(a){for(var b=r.keys(a),d=b.length,e=Array(d),f=0;f<d;f++)e[f]=[b[f],a[b[f]]];return e};r.invert=function(a){for(var b={},d=r.keys(a),e=0,f=d.length;e<f;e++)b[a[d[e]]]=d[e];return b};r.functions=r.methods=function(a){var b=[],d;for(d in a)r.isFunction(a[d])&&
b.push(d);return b.sort()};r.extend=function(a){if(!r.isObject(a))return a;for(var b,d,e=1,f=arguments.length;e<f;e++)for(d in b=arguments[e],b)l.call(b,d)&&(a[d]=b[d]);return a};r.pick=function(a,b,d){var e={};if(null==a)return e;if(r.isFunction(b))for(p in b=v(b,d),a){var f=a[p];b(f,p,a)&&(e[p]=f)}else{f=h.apply([],g.call(arguments,1));a=Object(a);for(var k=0,l=f.length;k<l;k++){var p=f[k];p in a&&(e[p]=a[p])}}return e};r.omit=function(a,b,d){if(r.isFunction(b))b=r.negate(b);else{var e=r.map(h.apply([],
g.call(arguments,1)),String);b=function(a,b){return!r.contains(e,b)}}return r.pick(a,b,d)};r.defaults=function(a){if(!r.isObject(a))return a;for(var b=1,d=arguments.length;b<d;b++){var e=arguments[b],f;for(f in e)void 0===a[f]&&(a[f]=e[f])}return a};r.clone=function(a){return r.isObject(a)?r.isArray(a)?a.slice():r.extend({},a):a};r.tap=function(a,b){b(a);return a};var w=function(a,b,d,e){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof r&&(a=a._wrapped);b instanceof r&&
(b=b._wrapped);var f=k.call(a);if(f!==k.call(b))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var g=d.length;g--;)if(d[g]===a)return e[g]===b;g=a.constructor;var h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(r.isFunction(g)&&g instanceof g&&r.isFunction(h)&&h instanceof
h))return!1;d.push(a);e.push(b);if("[object Array]"===f){if(f=a.length,h=f===b.length)for(;f--&&(h=w(a[f],b[f],d,e)););}else if(g=r.keys(a),f=g.length,h=r.keys(b).length===f)for(;f--&&(h=g[f],h=r.has(b,h)&&w(a[h],b[h],d,e)););d.pop();e.pop();return h};r.isEqual=function(a,b){return w(a,b,[],[])};r.isEmpty=function(a){if(null==a)return!0;if(r.isArray(a)||r.isString(a)||r.isArguments(a))return 0===a.length;for(var b in a)if(r.has(a,b))return!1;return!0};r.isElement=function(a){return!(!a||1!==a.nodeType)};
r.isArray=e||function(a){return"[object Array]"===k.call(a)};r.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};r.each("Arguments Function String Number Date RegExp".split(" "),function(a){r["is"+a]=function(b){return k.call(b)==="[object "+a+"]"}});r.isArguments(arguments)||(r.isArguments=function(a){return r.has(a,"callee")});"function"!==typeof/./&&(r.isFunction=function(a){return"function"==typeof a||!1});r.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};
r.isNaN=function(a){return r.isNumber(a)&&a!==+a};r.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===k.call(a)};r.isNull=function(a){return null===a};r.isUndefined=function(a){return void 0===a};r.has=function(a,b){return null!=a&&l.call(a,b)};r.noConflict=function(){a._=b;return this};r.identity=function(a){return a};r.constant=function(a){return function(){return a}};r.noop=function(){};r.property=function(a){return function(b){return b[a]}};r.matches=function(a){var b=r.pairs(a),
d=b.length;return function(a){if(null==a)return!d;a=Object(a);for(var e=0;e<d;e++){var f=b[e],g=f[0];if(f[1]!==a[g]||!(g in a))return!1}return!0}};r.times=function(a,b,d){var e=Array(Math.max(0,a));b=v(b,d,1);for(d=0;d<a;d++)e[d]=b(d);return e};r.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};r.now=Date.now||function(){return(new Date).getTime()};e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};n=r.invert(e);var y=function(a){var b=
function(b){return a[b]},d="(?:"+r.keys(a).join("|")+")",e=RegExp(d),f=RegExp(d,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(f,b):a}};r.escape=y(e);r.unescape=y(n);r.result=function(a,b){if(null!=a){var d=a[b];return r.isFunction(d)?a[b]():d}};var z=0;r.uniqueId=function(a){var b=++z+"";return a?a+b:b};r.templateSettings={evaluate:/%{([\s\S]+?)}/g,interpolate:/%{=([\s\S]+?)}/g,escape:/%{-([\s\S]+?)}/g};var x=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},
G=/\\|'|\r|\n|\u2028|\u2029/g,H=function(a){return"\\"+B[a]};r.template=function(a,b,d){!b&&d&&(b=d);b=r.defaults({},b,r.templateSettings);d=RegExp([(b.escape||x).source,(b.interpolate||x).source,(b.evaluate||x).source].join("|")+"|$","g");var e=0,f="__p+='";a.replace(d,function(b,d,g,h,k){f+=a.slice(e,k).replace(G,H);e=k+b.length;d?f+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'":g?f+="'+\n((__t=("+g+"))==null?'':__t)+\n'":h&&(f+="';\n"+h+"\n__p+='");return b});f+="';\n";b.variable||(f="with(obj||{}){\n"+
f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(N){throw N.source=f,N;}d=function(a){return g.call(this,a,r)};d.source="function("+(b.variable||"obj")+"){\n"+f+"}";return d};r.chain=function(a){a=r(a);a._chain=!0;return a};var K=function(a){return this._chain?r(a).chain():a};r.mixin=function(a){r.each(r.functions(a),function(b){var d=r[b]=a[b];r.prototype[b]=function(){var a=
[this._wrapped];f.apply(a,arguments);return K.call(this,d.apply(r,a))}})};r.mixin(r);r.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=d[a];r.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);"shift"!==a&&"splice"!==a||0!==d.length||delete d[0];return K.call(this,d)}});r.each(["concat","join","slice"],function(a){var b=d[a];r.prototype[a]=function(){return K.call(this,b.apply(this._wrapped,arguments))}});r.prototype.value=function(){return this._wrapped};
"function"===typeof define&&define.amd&&define("underscore",[],function(){return r})}).call(this);
(function(a,b){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(d,f,g){a.Backbone=b(a,g,d,f)});else if("undefined"!==typeof exports){var d=require("underscore");b(a,exports,d)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)})(this,function(a,b,d,e){var f=a.Backbone,g=[].slice;b.VERSION="1.1.2";b.$=e;b.noConflict=function(){a.Backbone=f;return this};b.emulateHTTP=!1;b.emulateJSON=!1;var h=b.Events={on:function(a,b,d){if(!l(this,"on",a,[b,d])||
!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:d,ctx:d||this});return this},once:function(a,b,e){if(!l(this,"once",a,[b,e])||!b)return this;var f=this,g=d.once(function(){f.off(a,g);b.apply(this,arguments)});g._callback=b;return this.on(a,g,e)},off:function(a,b,e){var f,g,n,h;if(!this._events||!l(this,"off",a,[b,e]))return this;if(!a&&!b&&!e)return this._events=void 0,this;var t=a?[a]:d.keys(this._events);var u=0;for(n=t.length;u<n;u++)if(a=
t[u],g=this._events[a]){this._events[a]=f=[];if(b||e){var k=0;for(h=g.length;k<h;k++){var w=g[k];(b&&b!==w.callback&&b!==w.callback._callback||e&&e!==w.context)&&f.push(w)}}f.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!l(this,"trigger",a,b))return this;var d=this._events[a],e=this._events.all;d&&p(d,b);e&&p(e,arguments);return this},stopListening:function(a,b,e){var f=this._listeningTo;if(!f)return this;var g=!b&&!e;e||
"object"!==typeof b||(e=this);a&&((f={})[a._listenId]=a);for(var n in f)a=f[n],a.off(b,e,this),(g||d.isEmpty(a._events))&&delete this._listeningTo[n];return this}},k=/\s+/,l=function(a,b,d,e){if(!d)return!0;if("object"===typeof d){for(var f in d)a[b].apply(a,[f,d[f]].concat(e));return!1}if(k.test(d)){d=d.split(k);f=0;for(var g=d.length;f<g;f++)a[b].apply(a,[d[f]].concat(e));return!1}return!0},p=function(a,b){var d,e=-1,f=a.length,g=b[0],n=b[1],h=b[2];switch(b.length){case 0:for(;++e<f;)(d=a[e]).callback.call(d.ctx);
break;case 1:for(;++e<f;)(d=a[e]).callback.call(d.ctx,g);break;case 2:for(;++e<f;)(d=a[e]).callback.call(d.ctx,g,n);break;case 3:for(;++e<f;)(d=a[e]).callback.call(d.ctx,g,n,h);break;default:for(;++e<f;)(d=a[e]).callback.apply(d.ctx,b)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,e,f){var g=this._listeningTo||(this._listeningTo={}),n=b._listenId||(b._listenId=d.uniqueId("l"));g[n]=b;f||"object"!==typeof e||(f=this);b[a](e,f,this);return this}});h.bind=h.on;h.unbind=h.off;
d.extend(b,h);var q=b.Model=function(a,b){var e=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(e=this.parse(e,b)||{});e=d.defaults({},e,d.result(this,"defaults"));this.set(e,b);this.changed={};this.initialize.apply(this,arguments)};d.extend(q.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,e){var f;if(null==a)return this;if("object"===typeof a){var g=a;e=b}else(g={})[a]=b;e||(e={});if(!this._validate(g,e))return!1;var n=e.unset;var h=e.silent;a=[];var t=this._changing;this._changing=!0;t||(this._previousAttributes=d.clone(this.attributes),this.changed={});var u=this.attributes;var k=this._previousAttributes;this.idAttribute in g&&(this.id=
g[this.idAttribute]);for(f in g)b=g[f],d.isEqual(u[f],b)||a.push(f),d.isEqual(k[f],b)?delete this.changed[f]:this.changed[f]=b,n?delete u[f]:u[f]=b;if(!h)for(a.length&&(this._pending=e),b=0,f=a.length;b<f;b++)this.trigger("change:"+a[b],this,u[a[b]],e);if(t)return this;if(!h)for(;this._pending;)e=this._pending,this._pending=!1,this.trigger("change",this,e);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b=
{},e;for(e in this.attributes)b[e]=void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,e=!1,f=this._changing?this._previousAttributes:this.attributes,g;for(g in a)d.isEqual(f[g],b=a[g])||((e||(e={}))[g]=b);return e},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},
fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,e=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;e&&e(b,d,a);b.trigger("sync",b,d,a)};N(this,a);return this.sync("read",this,a)},save:function(a,b,e){var f=this.attributes;if(null==a||"object"===typeof a){var g=a;e=b}else(g={})[a]=b;e=d.extend({validate:!0},e);if(g&&!e.wait){if(!this.set(g,e))return!1}else if(!this._validate(g,e))return!1;g&&e.wait&&(this.attributes=d.extend({},f,g));void 0===e.parse&&
(e.parse=!0);var n=this,h=e.success;e.success=function(a){n.attributes=f;var b=n.parse(a,e);e.wait&&(b=d.extend(g||{},b));if(d.isObject(b)&&!n.set(b,e))return!1;h&&h(n,a,e);n.trigger("sync",n,a,e)};N(this,e);a=this.isNew()?"create":e.patch?"patch":"update";"patch"===a&&(e.attrs=g);a=this.sync(a,this,e);g&&e.wait&&(this.attributes=f);return a},destroy:function(a){a=a?d.clone(a):{};var b=this,e=a.success,f=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&
f();e&&e(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;N(this,a);var g=this.sync("delete",this,a);a.wait||f();return g},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||E();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},
d.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);a=this.validationError=this.validate(a,b)||null;if(!a)return!0;this.trigger("invalid",this,a,d.extend(b,{validationError:a}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){q.prototype[a]=function(){var b=g.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var r=b.Collection=function(a,b){b||(b={});b.model&&(this.model=
b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},v={add:!0,remove:!0,merge:!0},n={add:!0,remove:!1};d.extend(r.prototype,h,{model:q,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.extend({merge:!1},b,n))},remove:function(a,b){var e=!d.isArray(a);a=e?[a]:d.clone(a);
b||(b={});var f,g;var n=0;for(f=a.length;n<f;n++)if(g=a[n]=this.get(a[n])){delete this._byId[g.id];delete this._byId[g.cid];var h=this.indexOf(g);this.models.splice(h,1);this.length--;b.silent||(b.index=h,g.trigger("remove",g,this,b));this._removeReference(g,b)}return e?a[0]:a},set:function(a,b){b=d.defaults({},b,v);b.parse&&(a=this.parse(a,b));var e=!d.isArray(a);a=e?a?[a]:[]:d.clone(a);var f,g,n,h=b.at,t=this.model,u=this.comparator&&null==h&&!1!==b.sort,k=d.isString(this.comparator)?this.comparator:
null,l=[],w=[],p={},y=b.add,r=b.merge,z=b.remove,x=!u&&y&&z?[]:!1;var F=0;for(f=a.length;F<f;F++){var B=a[F]||{};var A=B instanceof q?g=B:B[t.prototype.idAttribute||"id"];if(A=this.get(A))z&&(p[A.cid]=!0),r&&(B=B===g?g.attributes:B,b.parse&&(B=A.parse(B,b)),A.set(B,b),u&&!n&&A.hasChanged(k)&&(n=!0)),a[F]=A;else if(y){g=a[F]=this._prepareModel(B,b);if(!g)continue;l.push(g);this._addReference(g,b)}g=A||g;!x||!g.isNew()&&p[g.id]||x.push(g);p[g.id]=!0}if(z){F=0;for(f=this.length;F<f;++F)p[(g=this.models[F]).cid]||
w.push(g);w.length&&this.remove(w,b)}if(l.length||x&&x.length)if(u&&(n=!0),this.length+=l.length,null!=h)for(F=0,f=l.length;F<f;F++)this.models.splice(h+F,0,l[F]);else for(x&&(this.models.length=0),B=x||l,F=0,f=B.length;F<f;F++)this.models.push(B[F]);n&&this.sort({silent:!0});if(!b.silent){F=0;for(f=l.length;F<f;F++)(g=l[F]).trigger("add",g,this,b);(n||x&&x.length)&&this.trigger("sort",this,b)}return e?a[0]:a},reset:function(a,b){b||(b={});for(var e=0,f=this.models.length;e<f;e++)this._removeReference(this.models[e],
b);b.previousModels=this.models;this._reset();a=this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,d.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,d.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return d.invoke(this.models,"get",a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,e=this;a.success=function(d){e[a.reset?"reset":"set"](d,a);b&&b(e,d,a);e.trigger("sync",e,d,a)};N(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var e=this,f=b.success;b.success=function(a,d){b.wait&&e.add(a,
b);f&&f(a,d,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof q)return a;b=b?d.clone(b):{};b.collection=this;a=new this.model(a,b);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,d,e){if("add"!==a&&"remove"!==a||d===this)"destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){r.prototype[a]=function(){var b=g.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});d.each(["groupBy","countBy","sortBy","indexBy"],function(a){r.prototype[a]=function(b,e){var f=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,f,e)}});e=b.View=function(a){this.cid=d.uniqueId("view");a||(a={});d.extend(this,d.pick(a,u));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var t=/^(\S+)\s*(.*)$/,u="model collection el id attributes className tagName events".split(" ");
d.extend(e.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,d){this.$el&&this.undelegateEvents();this.$el=a instanceof b.$?a:b.$(a);this.el=this.$el[0];!1!==d&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var e=a[b];d.isFunction(e)||
(e=this[a[b]]);if(e){var f=b.match(t),g=f[1];f=f[2];e=d.bind(e,this);g+=".delegateEvents"+this.cid;if(""===f)this.$el.on(g,e);else this.$el.on(g,f,e)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));a=b.$("<"+d.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});b.sync=function(a,e,f){var g=y[a];d.defaults(f||(f={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var n={type:g,dataType:"json"};f.url||(n.url=d.result(e,"url")||E());null!=f.data||!e||"create"!==a&&"update"!==a&&"patch"!==a||(n.contentType="application/json",n.data=JSON.stringify(f.attrs||e.toJSON(f)));f.emulateJSON&&(n.contentType="application/x-www-form-urlencoded",n.data=n.data?{model:n.data}:{});if(f.emulateHTTP&&("PUT"===g||"DELETE"===g||"PATCH"===
g)){n.type="POST";f.emulateJSON&&(n.data._method=g);var h=f.beforeSend;f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g);if(h)return h.apply(this,arguments)}}"GET"===n.type||f.emulateJSON||(n.processData=!1);"PATCH"===n.type&&w&&(n.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=f.xhr=b.ajax(d.extend(n,f));e.trigger("request",e,a,f);return a};var w="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var z=b.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,G=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(z.prototype,h,{initialize:function(){},route:function(a,e,f){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(e)&&(f=e,e="");f||(f=this[e]);var g=this;b.history.route(a,
function(d){d=g._extractParameters(a,d);g.execute(f,d);g.trigger.apply(g,["route:"+e].concat(d));g.trigger("route",e,d);b.history.trigger("route",g,e,d)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,d){b.history.navigate(a,d);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(H,"\\$&").replace(x,"(?:$1)?").replace(B,
function(a,b){return b?a:"([^/?]+)"}).replace(G,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var e=a.exec(b).slice(1);return d.map(e,function(a,b){return b===e.length-1?a||null:a?decodeURIComponent(a):null})}});var K=b.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,A=/msie [\w.]+/,C=/\/$/,J=/#.*$/;K.started=!1;d.extend(K.prototype,
h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(C,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(F,"")},start:function(a){if(K.started)throw Error("Backbone.history has already been started");
K.started=!0;this.options=d.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var e=document.documentMode;e=A.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(D,"/");e&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)b.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!e)b.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);K.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return d.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!K.started)return!1;b&&!0!==b||(b={trigger:!!b});var d=this.root+(a=this.getFragment(a||""));a=a.replace(J,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==d&&(d=d.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,d);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(d);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,d){d?(d=a.href.replace(/(javascript:|#).*$/,""),a.replace(d+"#"+b)):a.hash="#"+b}});b.history=new K;q.extend=r.extend=z.extend=e.extend=K.extend=function(a,
b){var e=this;var f=a&&d.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)};d.extend(f,e,b);b=function(){this.constructor=f};b.prototype=e.prototype;f.prototype=new b;a&&d.extend(f.prototype,a);f.__super__=e.prototype;return f};var E=function(){throw Error('A "url" property or function must be specified');},N=function(a,b){var d=b.error;b.error=function(e){d&&d(a,e,b);a.trigger("error",a,e,b)}};return b});
Backbone.View.prototype.close=function(){this.remove();this.unbind();if("undefined"!=typeof this.views)for(var a=0;a<this.views.length;a++)this.views[a].close()};
/*
 jQuery UI - v1.12.1 - 2018-03-04
 http://jqueryui.com
 Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Widget 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Position 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI :data 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Disable Selection 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Focusable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Form Reset Mixin 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Support for jQuery core 1.7.x 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 jQuery UI Keycode 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Labels 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Scroll Parent 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabbable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Unique ID 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Mouse 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Draggable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Droppable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Resizable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Selectable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Sortable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Accordion 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Menu 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Autocomplete 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Controlgroup 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Checkboxradio 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Button 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Datepicker 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Dialog 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Progressbar 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Selectmenu 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Slider 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Spinner 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabs 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tooltip 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery Color Animations v2.1.2
 https://github.com/jquery/jquery-color

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 Date: Wed Jan 16 08:47:09 2013 -0600
 jQuery UI Effects Blind 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Bounce 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Clip 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Drop 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Explode 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Fade 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Fold 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Highlight 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Size 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Scale 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Puff 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Pulsate 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Shake 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Slide 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Effects Transfer 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){for(var b;a.length&&a[0]!==document;){b=a.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b)return b;a=a.parent()}return 0}function d(){this._lastScrollTime=this._lastScrollTop=0;this._isTouching=!1;this._curInst=this._triggerElement=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId=
"ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,
navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,displayAtMonth:null,displayAtYear:null,suspendDateRestrictions:!1,suspendAutoUpdate:!1,alignRight:!1,stepMonths:1,stepBigMonths:12,altField:"",
altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.regional.en=a.extend(!0,{},this.regional[""]);this.regional["en-US"]=a.extend(!0,{},this.regional.en);this.dpDiv=e(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all' role='application'></div>"))}function e(b){return b.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
function(){a(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",f)}function f(){a.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function g(b,d){a.extend(b,d);for(var e in d)null==d[e]&&(b[e]=d[e]);return b}function h(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{};a.ui.version="1.12.1";var k=0,l=Array.prototype.slice;
a.cleanData=function(b){return function(d){var e,f,g;for(g=0;null!=(f=d[g]);g++)try{(e=a._data(f,"events"))&&e.remove&&a(f).triggerHandler("remove")}catch(z){}b(d)}}(a.cleanData);a.widget=function(b,d,e){var f={},g=b.split(".")[0];b=b.split(".")[1];var n=g+"-"+b;e||(e=d,d=a.Widget);a.isArray(e)&&(e=a.extend.apply(null,[{}].concat(e)));a.expr[":"][n.toLowerCase()]=function(b){return!!a.data(b,n)};a[g]=a[g]||{};var h=a[g][b];var t=a[g][b]=function(a,b){if(!this._createWidget)return new t(a,b);arguments.length&&
this._createWidget(a,b)};a.extend(t,h,{version:e.version,_proto:a.extend({},e),_childConstructors:[]});var k=new d;k.options=a.widget.extend({},k.options);a.each(e,function(b,e){a.isFunction(e)?f[b]=function(){function a(){return d.prototype[b].apply(this,arguments)}function f(a){return d.prototype[b].apply(this,a)}return function(){var b=this._super,d=this._superApply;this._super=a;this._superApply=f;var g=e.apply(this,arguments);this._super=b;this._superApply=d;return g}}():f[b]=e});t.prototype=
a.widget.extend(k,{widgetEventPrefix:h?k.widgetEventPrefix||b:b},f,{constructor:t,namespace:g,widgetName:b,widgetFullName:n});h?(a.each(h._childConstructors,function(b,d){b=d.prototype;a.widget(b.namespace+"."+b.widgetName,t,d._proto)}),delete h._childConstructors):d._childConstructors.push(t);a.widget.bridge(b,t);return t};a.widget.extend=function(b){for(var d=l.call(arguments,1),e=0,f=d.length,g,n;e<f;e++)for(g in d[e])n=d[e][g],d[e].hasOwnProperty(g)&&void 0!==n&&(a.isPlainObject(n)?b[g]=a.isPlainObject(b[g])?
a.widget.extend({},b[g],n):a.widget.extend({},n):b[g]=n);return b};a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"===typeof f,n=l.call(arguments,1),h=this;g?this.length||"instance"!==f?this.each(function(){var d=a.data(this,e);if("instance"===f)return h=d,!1;if(!d)return a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'");if(!a.isFunction(d[f])||"_"===f.charAt(0))return a.error("no such method '"+f+
"' for "+b+" widget instance");var g=d[f].apply(d,n);if(g!==d&&void 0!==g)return h=g&&g.jquery?h.pushStack(g.get()):g,!1}):h=void 0:(n.length&&(f=a.widget.extend.apply(null,[f].concat(n))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))}));return h}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,
d){d=a(d||this.defaultElement||this)[0];this.element=a(d);this.uuid=k++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();this.classesElementLookup={};d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,
this._getCreateOptions(),b);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy();a.each(this.classesElementLookup,function(a,d){b._removeClass(d,a)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");
this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,d){var e=b,f;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b){e={};var g=b.split(".");b=g.shift();if(g.length){var n=e[b]=a.widget.extend({},this.options[b]);for(f=0;f<g.length-1;f++)n[g[f]]=n[g[f]]||{},n=n[g[f]];b=g.pop();if(1===arguments.length)return void 0===n[b]?null:n[b];n[b]=d}else{if(1===arguments.length)return void 0===this.options[b]?null:
this.options[b];e[b]=d}}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){"classes"===a&&this._setOptionClasses(b);this.options[a]=b;"disabled"===a&&this._setOptionDisabled(b);return this},_setOptionClasses:function(b){var d;for(d in b){var e=this.classesElementLookup[d];if(b[d]!==this.options.classes[d]&&e&&e.length){var f=a(e.get());this._removeClass(e,d);f.addClass(this._classes({element:f,keys:d,classes:b,add:!0}))}}},
_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function d(d,g){var n;for(n=0;n<d.length;n++){var h=f.classesElementLookup[d[n]]||a();h=b.add?a(a.unique(h.get().concat(b.element.get()))):a(h.not(b.element).get());
f.classesElementLookup[d[n]]=h;e.push(d[n]);g&&b.classes[d[n]]&&e.push(b.classes[d[n]])}}var e=[],f=this;b=a.extend({element:this.element,classes:this.options.classes||{}},b);this._on(b.element,{remove:"_untrackClassesElement"});b.keys&&d(b.keys.match(/\S+/g)||[],!0);b.extra&&d(b.extra.match(/\S+/g)||[]);return e.join(" ")},_untrackClassesElement:function(b){var d=this;a.each(d.classesElementLookup,function(e,f){-1!==a.inArray(b.target,f)&&(d.classesElementLookup[e]=a(f.not(b.target).get()))})},_removeClass:function(a,
b,d){return this._toggleClass(a,b,d,!1)},_addClass:function(a,b,d){return this._toggleClass(a,b,d,!0)},_toggleClass:function(a,b,d,e){e="boolean"===typeof e?e:d;var f="string"===typeof a||null===a;a={extra:f?b:d,keys:f?a:b,element:f?this.element:a,add:e};a.element.toggleClass(this._classes(a),e);return this},_on:function(b,d,e){var f,g=this;"boolean"!==typeof b&&(e=d,d=b,b=!1);e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget());a.each(e,function(e,n){function h(){if(b||
!0!==g.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof n?g[n]:n).apply(g,arguments)}"string"!==typeof n&&(h.guid=n.guid=n.guid||h.guid||a.guid++);var t=e.match(/^([\w:-]*)\s*(.*)$/);e=t[1]+g.eventNamespace;if(t=t[2])f.on(e,t,h);else d.on(e,h)})},_off:function(b,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.off(d).off(d);this.bindings=a(this.bindings.not(b).get());this.focusable=a(this.focusable.not(b).get());this.hoverable=a(this.hoverable.not(b).get())},
_delay:function(a,b){var d=this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},
focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,d,e){var f,g=this.options[b];e=e||{};d=a.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(f in b)f in d||(d[f]=b[f]);this.element.trigger(d,e);return!(a.isFunction(g)&&!1===g.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,d){a.Widget.prototype["_"+
b]=function(e,f,g){"string"===typeof f&&(f={effect:f});var n=f?!0===f||"number"===typeof f?d:f.effect||d:b;f=f||{};"number"===typeof f&&(f={duration:f});var h=!a.isEmptyObject(f);f.complete=g;f.delay&&e.delay(f.delay);if(h&&a.effects&&a.effects.effect[n])e[b](f);else if(n!==b&&e[n])e[n](f.duration,f.easing,g);else e.queue(function(d){a(this)[b]();g&&g.call(e[0]);d()})}});(function(){function b(a,b,d){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?d/100:1)]}function d(b){var d=
b[0];return 9===d.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(d)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:d.preventDefault?{width:0,height:0,offset:{top:d.pageY,left:d.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var e,f=Math.max,g=Math.abs,h=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,q=/%$/,r=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;
var b=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var d=b.children()[0];a("body").append(b);var f=d.offsetWidth;b.css("overflow","scroll");d=d.offsetWidth;f===d&&(d=b[0].clientWidth);b.remove();return e=f-d},getScrollInfo:function(b){var d=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),e=b.isWindow||b.isDocument?"":b.element.css("overflow-y");d="scroll"===d||"auto"===d&&b.width<b.element[0].scrollWidth;
return{width:"scroll"===e||"auto"===e&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var d=a(b||window),e=a.isWindow(d[0]),f=!!d[0]&&9===d[0].nodeType;return{element:d,isWindow:e,isDocument:f,offset:e||f?{left:0,top:0}:a(b).offset(),scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:d.outerWidth(),height:d.outerHeight()}}};a.fn.position=function(e){if(!e||!e.of)return r.apply(this,arguments);e=a.extend({},e);
var n=a(e.of),t=a.position.getWithinInfo(e.within),u=a.position.getScrollInfo(t),w=(e.collision||"flip").split(" "),q={};var y=d(n);n[0].preventDefault&&(e.at="left top");var z=y.width;var x=y.height;var F=y.offset;var v=a.extend({},F);a.each(["my","at"],function(){var a=(e[this]||"").split(" ");1===a.length&&(a=h.test(a[0])?a.concat(["center"]):k.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=k.test(a[1])?a[1]:"center";var b=l.exec(a[0]);var d=l.exec(a[1]);
q[this]=[b?b[0]:0,d?d[0]:0];e[this]=[p.exec(a[0])[0],p.exec(a[1])[0]]});1===w.length&&(w[1]=w[0]);"right"===e.at[0]?v.left+=z:"center"===e.at[0]&&(v.left+=z/2);"bottom"===e.at[1]?v.top+=x:"center"===e.at[1]&&(v.top+=x/2);var B=b(q.at,z,x);v.left+=B[0];v.top+=B[1];return this.each(function(){var d,h=a(this),k=h.outerWidth(),l=h.outerHeight(),p=parseInt(a.css(this,"marginLeft"),10)||0,r=parseInt(a.css(this,"marginTop"),10)||0,y=k+p+(parseInt(a.css(this,"marginRight"),10)||0)+u.width,A=l+r+(parseInt(a.css(this,
"marginBottom"),10)||0)+u.height,D=a.extend({},v),C=b(q.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?D.left-=k:"center"===e.my[0]&&(D.left-=k/2);"bottom"===e.my[1]?D.top-=l:"center"===e.my[1]&&(D.top-=l/2);D.left+=C[0];D.top+=C[1];var G={marginLeft:p,marginTop:r};a.each(["left","top"],function(b,d){if(a.ui.position[w[b]])a.ui.position[w[b]][d](D,{targetWidth:z,targetHeight:x,elemWidth:k,elemHeight:l,collisionPosition:G,collisionWidth:y,collisionHeight:A,offset:[B[0]+C[0],B[1]+C[1]],my:e.my,
at:e.at,within:t,elem:h})});e.using&&(d=function(a){var b=F.left-D.left,d=b+z-k,t=F.top-D.top,u=t+x-l,p={target:{element:n,left:F.left,top:F.top,width:z,height:x},element:{element:h,left:D.left,top:D.top,width:k,height:l},horizontal:0>d?"left":0<b?"right":"center",vertical:0>u?"top":0<t?"bottom":"middle"};z<k&&g(b+d)<z&&(p.horizontal="center");x<l&&g(t+u)<x&&(p.vertical="middle");f(g(b),g(d))>f(g(t),g(u))?p.important="horizontal":p.important="vertical";e.using.call(this,a,p)});h.offset(a.extend(D,
{using:d}))})};a.ui.position={fit:{left:function(a,b){var d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,g=d.width,n=a.left-b.collisionPosition.marginLeft;d=e-n;var h=n+b.collisionWidth-g-e;b.collisionWidth>g?0<d&&0>=h?(b=a.left+d+b.collisionWidth-g-e,a.left+=d-b):a.left=0<h&&0>=d?e:d>h?e+g-b.collisionWidth:e:a.left=0<d?a.left+d:0<h?a.left-h:f(a.left-n,a.left)},top:function(a,b){var d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,g=b.within.height,n=a.top-b.collisionPosition.marginTop;d=e-n;
var h=n+b.collisionHeight-g-e;b.collisionHeight>g?0<d&&0>=h?(b=a.top+d+b.collisionHeight-g-e,a.top+=d-b):a.top=0<h&&0>=d?e:d>h?e+g-b.collisionHeight:e:a.top=0<d?a.top+d:0<h?a.top-h:f(a.top-n,a.top)}},flip:{left:function(a,b){var d=b.within,e=d.offset.left+d.scrollLeft,f=d.width,n=d.isWindow?d.scrollLeft:d.offset.left,h=a.left-b.collisionPosition.marginLeft;d=h-n;var t=h+b.collisionWidth-f-n;h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;var k="left"===b.at[0]?b.targetWidth:"right"===
b.at[0]?-b.targetWidth:0,l=-2*b.offset[0];if(0>d){if(b=a.left+h+k+l+b.collisionWidth-f-e,0>b||b<g(d))a.left+=h+k+l}else 0<t&&(b=a.left-b.collisionPosition.marginLeft+h+k+l-n,0<b||g(b)<t)&&(a.left+=h+k+l)},top:function(a,b){var d=b.within,e=d.offset.top+d.scrollTop,f=d.height,n=d.isWindow?d.scrollTop:d.offset.top,h=a.top-b.collisionPosition.marginTop;d=h-n;var t=h+b.collisionHeight-f-n;h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;var k="top"===b.at[1]?b.targetHeight:"bottom"===
b.at[1]?-b.targetHeight:0,l=-2*b.offset[1];if(0>d){if(b=a.top+h+k+l+b.collisionHeight-f-e,0>b||b<g(d))a.top+=h+k+l}else 0<t&&(b=a.top-b.collisionPosition.marginTop+h+k+l-n,0<b||g(b)<t)&&(a.top+=h+k+l)}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}}})();a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,
b)}}):function(b,d,e){return!!a.data(b,e[3])}});a.fn.extend({disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});a.ui.focusable=function(b,d){var e=b.nodeName.toLowerCase();if("area"===e){d=b.parentNode;e=d.name;if(!b.href||!e||"map"!==d.nodeName.toLowerCase())return!1;b=a("img[usemap='#"+
e+"']");return 0<b.length&&b.is(":visible")}/^(input|select|textarea|button|object)$/.test(e)?(d=!b.disabled)&&(e=a(b).closest("fieldset")[0])&&(d=!e.disabled):d="a"===e?b.href||d:d;if(d=d&&a(b).is(":visible")){b=a(b);for(d=b.css("visibility");"inherit"===d;)b=b.parent(),d=b.css("visibility");d="hidden"!==d}return d};a.extend(a.expr[":"],{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}});a.fn.form=function(){return"string"===typeof this[0].form?this.closest("form"):a(this[0].form)};
a.ui.formResetMixin={_formResetHandler:function(){var b=a(this);setTimeout(function(){var d=b.data("ui-form-reset-instances");a.each(d,function(){this.refresh()})})},_bindFormResetHandler:function(){this.form=this.element.form();if(this.form.length){var a=this.form.data("ui-form-reset-instances")||[];if(!a.length)this.form.on("reset.ui-form-reset",this._formResetHandler);a.push(this);this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");
b.splice(a.inArray(this,b),1);b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===a.fn.jquery.substring(0,3)&&(a.each(["Width","Height"],function(b,d){function e(b,d,e,g){a.each(f,function(){d-=parseFloat(a.css(b,"padding"+this))||0;e&&(d-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(d-=parseFloat(a.css(b,"margin"+this))||0)});return d}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),
n={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return void 0===b?n["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,b)+"px")})};a.fn["outer"+d]=function(b,f){return"number"!==typeof b?n["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,f)+"px")})}}),a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.ui.keyCode={BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};a.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}();a.fn.labels=function(){var b;if(this[0].labels&&this[0].labels.length)return this.pushStack(this[0].labels);var d=this.eq(0).parents("label");if(b=this.attr("id")){var e=this.eq(0).parents().last();e=e.add(e.length?e.siblings():this.siblings());
b="label[for='"+a.ui.escapeSelector(b)+"']";d=d.add(e.find(b).addBack(b))}return this.pushStack(d)};a.fn.scrollParent=function(b){var d=this.css("position"),e="absolute"===d,f=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return e&&"static"===b.css("position")?!1:f.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==d&&b.length?b:a(this[0].ownerDocument||document)};a.extend(a.expr[":"],{tabbable:function(b){var d=a.attr(b,
"tabindex"),e=null!=d;return(!e||0<=d)&&a.ui.focusable(b,e)}});a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var p=!1;a(document).on("mouseup",function(){p=!1});a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",
distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(d){if(!0===a.data(d.target,b.widgetName+".preventClickEvent"))return a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+
this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!p){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&
this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return p=
!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}if(b.which||b.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&
((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);
p=this.ignoreMissingWhich=!1;b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});a.ui.plugin={add:function(b,d,e){var f;b=a.ui[b].prototype;for(f in e)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([d,e[f]])},
call:function(a,b,d,e){if((b=a.plugins[b])&&(e||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}};a.ui.safeActiveElement=function(a){try{var b=a.activeElement}catch(u){b=a.body}b||(b=a.body);b.nodeName||(b=a.body);return b};a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")};a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",
axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},
_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||0<a(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;this._blurActiveElement(b);this._blockFrames(!0===
d.iframeFix?"iframe":d.iframeFix);return!0},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var d=a.ui.safeActiveElement(this.document[0]);a(b.target).closest(d).length||a.ui.safeBlur(d)},
_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length;this.positionAbs=this.element.offset();
this._refreshOffsets(b);this.originalPosition=this.position=this._generatePosition(b,!1);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-
this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,d){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b,!0);this.positionAbs=this._convertPositionTo("absolute");if(!d){d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp(new a.Event("mouseup",
b)),!1;this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=this,e=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(e=a.ui.ddmanager.drop(this,b));this.dropped&&(e=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!e||"valid"===this.options.revert&&e||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,
e)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",b)&&d._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){this._unblockFrames();a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);this.handleElement.is(b.target)&&this.element.trigger("focus");return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):
this._clear();return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var d=this.options,e=a.isFunction(d.helper);b=e?a(d.helper.apply(this.element[0],
[b])):"clone"===d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===d.appendTo?this.element[0].parentNode:d.appendTo);e&&b[0]===this.element[0]&&this._setPositionRelative();b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"===
typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),
d=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==d&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0});return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=
this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||
0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b;var d=this.options;var e=this.document[0];this.relativeContainer=null;if(d.containment)if("window"===d.containment)this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-
this.margins.left,a(window).scrollTop()+(a(window).height()||e.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if("document"===d.containment)this.containment=[0,0,a(e).width()-this.helperProportions.width-this.margins.left,(a(e).height()||e.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(d.containment.constructor===Array)this.containment=d.containment;else{if("parent"===d.containment&&(d.containment=this.helper[0].parentNode),
e=a(d.containment),b=e[0])d=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-
(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e}else this.containment=null},_convertPositionTo:function(a,b){b||(b=this.position);a="absolute"===a?1:-1;var d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*a,left:b.left+this.offset.relative.left*
a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*a}},_generatePosition:function(a,b){var d=this.options,e=this._isRootNode(this.scrollParent[0]);var f=a.pageX;var g=a.pageY;e&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});if(b){if(this.containment){if(this.relativeContainer){var n=this.relativeContainer.offset();n=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+
n.left,this.containment[3]+n.top]}else n=this.containment;a.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left);a.pageY-this.offset.click.top<n[1]&&(g=n[1]+this.offset.click.top);a.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left);a.pageY-this.offset.click.top>n[3]&&(g=n[3]+this.offset.click.top)}d.grid&&(g=d.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,g=n?g-this.offset.click.top>=n[1]||g-this.offset.click.top>
n[3]?g:g-this.offset.click.top>=n[1]?g-d.grid[1]:g+d.grid[1]:g,f=d.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,f=n?f-this.offset.click.left>=n[0]||f-this.offset.click.left>n[2]?f:f-this.offset.click.left>=n[0]?f-d.grid[0]:f+d.grid[0]:f);"y"===d.axis&&(f=this.originalPageX);"x"===d.axis&&(g=this.originalPageY)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:
e?0:this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:e?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,d,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[d,e,
this],!0);/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),e.offset=this.positionAbs);return a.Widget.prototype._trigger.call(this,b,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d,e){var f=a.extend({},d,{item:e.element});e.sortables=[];a(e.options.connectToSortable).each(function(){var d=a(this).sortable("instance");
d&&!d.options.disabled&&(e.sortables.push(d),d.refreshPositions(),d._trigger("activate",b,f))})},stop:function(b,d,e){var f=a.extend({},d,{item:e.element});e.cancelHelperRemoval=!1;a.each(e.sortables,function(){this.isOver?(this.isOver=0,e.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(b),this.options.helper=this.options._helper):(this.cancelHelperRemoval=
!0,this._trigger("deactivate",b,f))})},drag:function(b,d,e){a.each(e.sortables,function(){var f=!1,g=this;g.positionAbs=e.positionAbs;g.helperProportions=e.helperProportions;g.offset.click=e.offset.click;g._intersectsWith(g.containerCache)&&(f=!0,a.each(e.sortables,function(){this.positionAbs=e.positionAbs;this.helperProportions=e.helperProportions;this.offset.click=e.offset.click;this!==g&&this._intersectsWith(this.containerCache)&&a.contains(g.element[0],this.element[0])&&(f=!1);return f}));f?(g.isOver||
(g.isOver=1,e._parent=d.helper.parent(),g.currentItem=d.helper.appendTo(g.element).data("ui-sortable-item",!0),g.options._helper=g.options.helper,g.options.helper=function(){return d.helper[0]},b.target=g.currentItem[0],g._mouseCapture(b,!0),g._mouseStart(b,!0,!0),g.offset.click.top=e.offset.click.top,g.offset.click.left=e.offset.click.left,g.offset.parent.left-=e.offset.parent.left-g.offset.parent.left,g.offset.parent.top-=e.offset.parent.top-g.offset.parent.top,e._trigger("toSortable",b),e.dropped=
g.element,a.each(e.sortables,function(){this.refreshPositions()}),e.currentItem=e.element,g.fromOutside=e),g.currentItem&&(g._mouseDrag(b),d.position=g.position)):g.isOver&&(g.isOver=0,g.cancelHelperRemoval=!0,g.options._revert=g.options.revert,g.options.revert=!1,g._trigger("out",b,g._uiHash(g)),g._mouseStop(b,!0),g.options.revert=g.options._revert,g.options.helper=g.options._helper,g.placeholder&&g.placeholder.remove(),d.helper.appendTo(e._parent),e._refreshOffsets(b),d.position=e._generatePosition(b,
!0),e._trigger("fromSortable",b),e.dropped=!1,a.each(e.sortables,function(){this.refreshPositions()}))})}});a.ui.plugin.add("draggable","cursor",{start:function(b,d,e){b=a("body");e=e.options;b.css("cursor")&&(e._cursor=b.css("cursor"));b.css("cursor",e.cursor)},stop:function(b,d,e){b=e.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d,e){b=a(d.helper);e=e.options;b.css("opacity")&&(e._opacity=b.css("opacity"));b.css("opacity",e.opacity)},
stop:function(b,d,e){b=e.options;b._opacity&&a(d.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,d){d.scrollParentNotHidden||(d.scrollParentNotHidden=d.helper.scrollParent(!1));d.scrollParentNotHidden[0]!==d.document[0]&&"HTML"!==d.scrollParentNotHidden[0].tagName&&(d.overflowOffset=d.scrollParentNotHidden.offset())},drag:function(b,d,e){d=e.options;var f=!1,g=e.scrollParentNotHidden[0],n=e.document[0];g!==n&&"HTML"!==g.tagName?(d.axis&&"x"===d.axis||
(e.overflowOffset.top+g.offsetHeight-b.pageY<d.scrollSensitivity?g.scrollTop=f=g.scrollTop+d.scrollSpeed:b.pageY-e.overflowOffset.top<d.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(e.overflowOffset.left+g.offsetWidth-b.pageX<d.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+d.scrollSpeed:b.pageX-e.overflowOffset.left<d.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(n).scrollTop()<d.scrollSensitivity?f=a(n).scrollTop(a(n).scrollTop()-
d.scrollSpeed):a(window).height()-(b.pageY-a(n).scrollTop())<d.scrollSensitivity&&(f=a(n).scrollTop(a(n).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(n).scrollLeft()<d.scrollSensitivity?f=a(n).scrollLeft(a(n).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(n).scrollLeft())<d.scrollSensitivity&&(f=a(n).scrollLeft(a(n).scrollLeft()+d.scrollSpeed))));!1!==f&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
d,e){b=e.options;e.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),d=b.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left})})},drag:function(b,d,e){var f,g=e.options,n=g.snapTolerance,h=d.offset.left,k=h+e.helperProportions.width,t=d.offset.top,l=t+e.helperProportions.height;for(f=e.snapElements.length-1;0<=f;f--){var p=e.snapElements[f].left-e.margins.left;
var u=p+e.snapElements[f].width;var q=e.snapElements[f].top-e.margins.top;var r=q+e.snapElements[f].height;if(k<p-n||h>u+n||l<q-n||t>r+n||!a.contains(e.snapElements[f].item.ownerDocument,e.snapElements[f].item))e.snapElements[f].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[f].item})),e.snapElements[f].snapping=!1;else{if("inner"!==g.snapMode){var v=Math.abs(q-l)<=n;var J=Math.abs(r-t)<=n;var E=Math.abs(p-k)<=n;var N=Math.abs(u-
h)<=n;v&&(d.position.top=e._convertPositionTo("relative",{top:q-e.helperProportions.height,left:0}).top);J&&(d.position.top=e._convertPositionTo("relative",{top:r,left:0}).top);E&&(d.position.left=e._convertPositionTo("relative",{top:0,left:p-e.helperProportions.width}).left);N&&(d.position.left=e._convertPositionTo("relative",{top:0,left:u}).left)}var I=v||J||E||N;"outer"!==g.snapMode&&(v=Math.abs(q-t)<=n,J=Math.abs(r-l)<=n,E=Math.abs(p-h)<=n,N=Math.abs(u-k)<=n,v&&(d.position.top=e._convertPositionTo("relative",
{top:q,left:0}).top),J&&(d.position.top=e._convertPositionTo("relative",{top:r-e.helperProportions.height,left:0}).top),E&&(d.position.left=e._convertPositionTo("relative",{top:0,left:p}).left),N&&(d.position.left=e._convertPositionTo("relative",{top:0,left:u-e.helperProportions.width}).left));!e.snapElements[f].snapping&&(v||J||E||N||I)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[f].item}));e.snapElements[f].snapping=v||J||E||N||I}}}});
a.ui.plugin.add("draggable","stack",{start:function(b,d,e){b=a.makeArray(a(e.options.stack)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});if(b.length){var f=parseInt(a(b[0]).css("zIndex"),10)||0;a(b).each(function(b){a(this).css("zIndex",f+b)});this.css("zIndex",f+b.length)}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,d,e){b=a(d.helper);e=e.options;b.css("zIndex")&&(e._zIndex=b.css("zIndex"));b.css("zIndex",e.zIndex)},stop:function(b,
d,e){b=e.options;b._zIndex&&a(d.helper).css("zIndex",b._zIndex)}});a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,d=this.options,e=d.accept;this.isover=!1;this.isout=!0;this.accept=a.isFunction(e)?e:function(a){return a.is(e)};this.proportions=function(){if(arguments.length)b=arguments[0];else return b?b:b={width:this.element[0].offsetWidth,
height:this.element[0].offsetHeight}};this._addToManager(d.scope);d.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice(a.ui.ddmanager.droppables[this.options.scope])},_setOption:function(b,d){"accept"===b?this.accept=a.isFunction(d)?d:function(a){return a.is(d)}:"scope"===
b&&(this._splice(a.ui.ddmanager.droppables[this.options.scope]),this._addToManager(d));this._super(b,d)},_activate:function(b){var d=a.ui.ddmanager.current;this._addActiveClass();d&&this._trigger("activate",b,this.ui(d))},_deactivate:function(b){var d=a.ui.ddmanager.current;this._removeActiveClass();d&&this._trigger("deactivate",b,this.ui(d))},_over:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&
(this._addHoverClass(),this._trigger("over",b,this.ui(d)))},_out:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(d)))},_drop:function(b,d){var e=d||a.ui.ddmanager.current,f=!1;if(!e||(e.currentItem||e.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var d=a(this).droppable("instance");
if(d.options.greedy&&!d.options.disabled&&d.options.scope===e.options.scope&&d.accept.call(d.element[0],e.currentItem||e.element)&&q(e,a.extend(d,{offset:d.element.offset()}),d.options.tolerance,b))return f=!0,!1});return f?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},
_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var q=a.ui.intersect=function(){return function(a,b,d,e){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left+a.margins.left,g=(a.positionAbs||a.position.absolute).top+a.margins.top,n=f+a.helperProportions.width,
h=g+a.helperProportions.height,k=b.offset.left,t=b.offset.top,l=k+b.proportions().width,p=t+b.proportions().height;switch(d){case "fit":return k<=f&&n<=l&&t<=g&&h<=p;case "intersect":return k<f+a.helperProportions.width/2&&n-a.helperProportions.width/2<l&&t<g+a.helperProportions.height/2&&h-a.helperProportions.height/2<p;case "pointer":a=e.pageY;d=b.proportions().height;if(t=a>=t&&a<t+d)e=e.pageX,b=b.proportions().width,t=e>=k&&e<k+b;return t;case "touch":return(g>=t&&g<=p||h>=t&&h<=p||g<t&&h>p)&&
(f>=k&&f<=l||n>=k&&n<=l||f<k&&n>l);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,d){var e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=d?d.type:null,n=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();var h=0;a:for(;h<f.length;h++)if(!(f[h].options.disabled||b&&!f[h].accept.call(f[h].element[0],b.currentItem||b.element))){for(e=0;e<n.length;e++)if(n[e]===f[h].element[0]){f[h].proportions().height=0;continue a}f[h].visible=
"none"!==f[h].element.css("display");f[h].visible&&("mousedown"===g&&f[h]._activate.call(f[h],d),f[h].offset=f[h].element.offset(),f[h].proportions({width:f[h].element[0].offsetWidth,height:f[h].element[0].offsetHeight}))}},drop:function(b,d){var e=!1;a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&q(b,this,this.options.tolerance,d)&&(e=this._drop.call(this,d)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,d)))});return e},dragStart:function(b,d){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)})},drag:function(b,d){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,d);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=q(b,this,this.options.tolerance,d);
var f=!e&&this.isover?"isout":e&&!this.isover?"isover":null;if(f){if(this.options.greedy){var g=this.options.scope;e=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===g});if(e.length){var n=a(e[0]).droppable("instance");n.greedyChild="isover"===f}}n&&"isover"===f&&(n.isover=!1,n.isout=!0,n._out.call(n,d));this[f]=!0;this["isout"===f?"isover":"isout"]=!1;this["isover"===f?"_over":"_out"].call(this,d);n&&"isout"===f&&(n.isout=!1,n.isover=
!0,n._over.call(n,d))}}})},dragStop:function(b,d){b.element.parentsUntil("body").off("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)}};!1!==a.uiBackCompat&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},
_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});a.widget("ui.resizable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,
ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(b,d){if("hidden"===a(b).css("overflow"))return!1;d=d&&"left"===d?"scrollLeft":"scrollTop";if(0<b[d])return!0;b[d]=1;var e=0<b[d];b[d]=0;return e},_create:function(){var b=this.options,d=this;this._addClass("ui-resizable");a.extend(this,{_aspectRatio:!!b.aspectRatio,
aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=
this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=!0;var e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(e);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"}));this.originalElement.css(e);this._proportionallyResize()}this._setupHandles();if(b.autoHide)a(this.element).on("mouseenter",function(){b.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){b.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var d=this.element;this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d);d.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_setOption:function(a,b){this._super(a,b);switch(a){case "handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var b=this.options,d,e=this;this.handles=b.handles||
(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");this._handles=a();if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles={};for(d=0;d<f.length;d++){var g=a.trim(f[d]);var h="ui-resizable-"+g;var k=a("<div>");this._addClass(k,"ui-resizable-handle "+
h);k.css({zIndex:b.zIndex});this.handles[g]=".ui-resizable-"+g;this.element.append(k)}}this._renderAxis=function(b){var d;b=b||this.element;for(d in this.handles){if(this.handles[d].constructor===String)this.handles[d]=this.element.children(this.handles[d]).first().show();else if(this.handles[d].jquery||this.handles[d].nodeType)this.handles[d]=a(this.handles[d]),this._on(this.handles[d],{mousedown:e._mouseDown});if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){var f=
a(this.handles[d],this.element);var g=/sw|ne|nw|se|n|s/.test(d)?f.outerHeight():f.outerWidth();f=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join("");b.css(f,g);this._proportionallyResize()}this._handles=this._handles.add(this.handles[d])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){e.resizing||(this.className&&(k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),
e.axis=k&&k[1]?k[1]:"se")});b.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var d,e=!1;for(d in this.handles){var f=a(this.handles[d])[0];if(f===b.target||a.contains(f,b.target))e=!0}return!this.options.disabled&&e},_mouseStart:function(b){var d=this.options,e=this.element;this.resizing=!0;this._renderProxy();var f=this._num(this.helper.css("left"));var g=this._num(this.helper.css("top"));d.containment&&
(f+=a(d.containment).scrollLeft()||0,g+=a(d.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:f,top:g};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalPosition={left:f,top:g};this.originalMousePosition=
{left:b.pageX,top:b.pageY};this.aspectRatio="number"===typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;f=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor","auto"===f?this.axis+"-resize":f);this._addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var d=this.originalMousePosition;var e=b.pageX-d.left||0;d=b.pageY-d.top||0;var f=this._change[this.axis];this._updatePrevProperties();if(!f)return!1;e=f.apply(this,
[b,e,d]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)e=this._updateRatio(e,b);e=this._respectSize(e,b);this._updateCache(e);this._propagate("resize",b);e=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();a.isEmptyObject(e)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges());return!1},_mouseStop:function(b){this.resizing=!1;var d,e=this.options;if(this._helper){var f=this._proportionallyResizeElements;
f=(d=f.length&&/textarea/i.test(f[0].nodeName))&&this._hasScroll(f[0],"left")?0:this.sizeDiff.height;d=d?0:this.sizeDiff.width;d={width:this.helper.width()-d,height:this.helper.height()-f};f=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null;var g=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null;e.animate||this.element.css(a.extend(d,{top:g,left:f}));this.helper.height(this.size.height);this.helper.width(this.size.width);
this._helper&&!e.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&
(a.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px");this.helper.css(a);return a},_updateVirtualBoundaries:function(a){var b=this.options;b={minWidth:this._isNumber(b.minWidth)?b.minWidth:0,maxWidth:this._isNumber(b.maxWidth)?b.maxWidth:Infinity,minHeight:this._isNumber(b.minHeight)?b.minHeight:0,maxHeight:this._isNumber(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||
a){a=b.minHeight*this.aspectRatio;var d=b.minWidth/this.aspectRatio;var e=b.maxHeight*this.aspectRatio;var f=b.maxWidth/this.aspectRatio;a>b.minWidth&&(b.minWidth=a);d>b.minHeight&&(b.minHeight=d);e<b.maxWidth&&(b.maxWidth=e);f<b.maxHeight&&(b.maxHeight=f)}this._vBoundaries=b},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&
(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null);"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width));return a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=this._isNumber(a.height)&&
b.maxHeight&&b.maxHeight<a.height,g=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,n=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,k=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(d);d=/nw|ne|n/.test(d);g&&(a.width=b.minWidth);n&&(a.height=b.minHeight);e&&(a.width=b.maxWidth);f&&(a.height=b.maxHeight);g&&l&&(a.left=h-b.minWidth);e&&l&&(a.left=h-b.maxWidth);n&&d&&(a.top=k-b.minHeight);f&&d&&(a.top=k-b.maxHeight);
a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null;return a},_getPaddingPlusBorderDimensions:function(a){var b=0,d=[],e=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];for(a=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)d[b]=parseFloat(e[b])||0,d[b]+=parseFloat(a[b])||0;return{height:d[0]+d[2],width:d[1]+d[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,
b=0,d=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:d.height()-this.outerDimensions.height||0,width:d.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,
this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-
d}},s:function(a,b,d){return{height:this.originalSize.height+d}},se:function(b,d,e){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,d,e]))},sw:function(b,d,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,d,e]))},ne:function(b,d,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,d,e]))},nw:function(b,d,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,d,e]))}},
_propagate:function(b,d){a.ui.plugin.call(this,b,[d,this.ui()]);"resize"!==b&&this._trigger(b,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var d=a(this).resizable("instance"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),
n=g&&d._hasScroll(f[0],"left")?0:d.sizeDiff.height;g={width:d.size.width-(g?0:d.sizeDiff.width),height:d.size.height-n};n=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null;var h=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(g,h&&n?{top:h,left:n}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(d.element.css("width")),height:parseFloat(d.element.css("height")),top:parseFloat(d.element.css("top")),
left:parseFloat(d.element.css("left"))};f&&f.length&&a(f[0]).css({width:e.width,height:e.height});d._updateCache(e);d._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b=a(this).resizable("instance"),d=b.element;var e=b.options.containment;if(d=e instanceof a?e.get(0):/parent/.test(e)?d.parent().get(0):e)if(b.containerElement=a(d),/document/.test(e)||e===document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:a(document),
left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var f=a(d);var g=[];a(["Top","Right","Left","Bottom"]).each(function(a,d){g[a]=b._num(f.css("padding"+d))});b.containerOffset=f.offset();b.containerPosition=f.position();b.containerSize={height:f.innerHeight()-g[3],width:f.innerWidth()-g[1]};e=b.containerOffset;var h=b.containerSize.height;var k=b.containerSize.width;k=b._hasScroll(d,"left")?d.scrollWidth:k;h=b._hasScroll(d)?d.scrollHeight:
h;b.parentData={element:d,left:e.left,top:e.top,width:k,height:h}}},resize:function(b){var d=a(this).resizable("instance");var e=d.options;var f=d.containerOffset;var g=d.position;b=d._aspectRatio||b.shiftKey;var n={top:0,left:0},h=d.containerElement,k=!0;h[0]!==document&&/static/.test(h.css("position"))&&(n=f);g.left<(d._helper?f.left:0)&&(d.size.width+=d._helper?d.position.left-f.left:d.position.left-n.left,b&&(d.size.height=d.size.width/d.aspectRatio,k=!1),d.position.left=e.helper?f.left:0);g.top<
(d._helper?f.top:0)&&(d.size.height+=d._helper?d.position.top-f.top:d.position.top,b&&(d.size.width=d.size.height*d.aspectRatio,k=!1),d.position.top=d._helper?f.top:0);e=d.containerElement.get(0)===d.element.parent().get(0);g=/relative|absolute/.test(d.containerElement.css("position"));e&&g?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top);e=Math.abs(d.sizeDiff.width+(d._helper?
d.offset.left-n.left:d.offset.left-f.left));f=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-n.top:d.offset.top-f.top));e+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-e,b&&(d.size.height=d.size.width/d.aspectRatio,k=!1));f+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-f,b&&(d.size.width=d.size.height*d.aspectRatio,k=!1));k||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},
stop:function(){var b=a(this).resizable("instance"),d=b.options,e=b.containerOffset,f=b.containerPosition,g=b.containerElement,h=a(b.helper),k=h.offset(),l=h.outerWidth()-b.sizeDiff.width;h=h.outerHeight()-b.sizeDiff.height;b._helper&&!d.animate&&/relative/.test(g.css("position"))&&a(this).css({left:k.left-f.left-e.left,width:l,height:h});b._helper&&!d.animate&&/static/.test(g.css("position"))&&a(this).css({left:k.left-f.left-e.left,width:l,height:h})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=
a(this).resizable("instance").options;a(b.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseFloat(b.width()),height:parseFloat(b.height()),left:parseFloat(b.css("left")),top:parseFloat(b.css("top"))})})},resize:function(b,d){b=a(this).resizable("instance");var e=b.originalSize,f=b.originalPosition,g={height:b.size.height-e.height||0,width:b.size.width-e.width||0,top:b.position.top-f.top||0,left:b.position.left-f.left||0};a(b.options.alsoResize).each(function(){var b=
a(this),e=a(this).data("ui-resizable-alsoresize"),f={},n=b.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(n,function(a,b){(a=(e[b]||0)+(g[b]||0))&&0<=a&&(f[b]=a||null)});b.css(f)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,
width:d.width,margin:0,left:0,top:0});b._addClass(b.ghost,"ui-resizable-ghost");!1!==a.uiBackCompat&&"string"===typeof b.options.ghost&&b.ghost.addClass(this.options.ghost);b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b=
a(this).resizable("instance"),d=b.options,e=b.size,f=b.originalSize,g=b.originalPosition,h=b.axis,k="number"===typeof d.grid?[d.grid,d.grid]:d.grid,l=k[0]||1,p=k[1]||1,q=Math.round((e.width-f.width)/l)*l;e=Math.round((e.height-f.height)/p)*p;var r=f.width+q,v=f.height+e,D=d.maxWidth&&d.maxWidth<r,A=d.maxHeight&&d.maxHeight<v,C=d.minWidth&&d.minWidth>r,J=d.minHeight&&d.minHeight>v;d.grid=k;C&&(r+=l);J&&(v+=p);D&&(r-=l);A&&(v-=p);if(/^(se|s|e)$/.test(h))b.size.width=r,b.size.height=v;else if(/^(ne)$/.test(h))b.size.width=
r,b.size.height=v,b.position.top=g.top-e;else if(/^(sw)$/.test(h))b.size.width=r,b.size.height=v,b.position.left=g.left-q;else{if(0>=v-p||0>=r-l)var E=b._getPaddingPlusBorderDimensions(this);0<v-p?(b.size.height=v,b.position.top=g.top-e):(v=p-E.height,b.size.height=v,b.position.top=g.top+f.height-v);0<r-l?(b.size.width=r,b.position.left=g.left-q):(r=l-E.width,b.size.width=r,b.position.left=g.left+f.width-r)}}});a.widget("ui.selectable",a.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,
distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b.elementPos=a(b.element[0]).offset();b.selectees=a(b.options.filter,b.element[0]);b._addClass(b.selectees,"ui-selectee");b.selectees.each(function(){var d=a(this),e=d.offset(),f=e.left-b.elementPos.left;e=e.top-b.elementPos.top;a.data(this,"selectable-item",{element:this,$element:d,
left:f,top:e,right:f+d.outerWidth(),bottom:e+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=a("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(b){var d=this,e=this.options;this.opos=[b.pageX,b.pageY];this.elementPos=a(this.element[0]).offset();
this.options.disabled||(this.selectees=a(e.filter,this.element[0]),this._trigger("start",b),a(e.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=!0;b.metaKey||b.ctrlKey||(d._removeClass(e.$element,"ui-selected"),e.selected=!1,d._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,d._trigger("unselecting",b,{unselecting:e.element}))}),
a(b.target).parents().addBack().each(function(){var e=a.data(this,"selectable-item");if(e){var f=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected");d._removeClass(e.$element,f?"ui-unselecting":"ui-selected")._addClass(e.$element,f?"ui-selecting":"ui-unselecting");e.unselecting=!f;e.selecting=f;(e.selected=f)?d._trigger("selecting",b,{selecting:e.element}):d._trigger("unselecting",b,{unselecting:e.element});return!1}}))},_mouseDrag:function(b){this.dragged=!0;if(!this.options.disabled){var d=
this,e=this.options,f=this.opos[0],g=this.opos[1],n=b.pageX,h=b.pageY;if(f>n){var k=n;n=f;f=k}g>h&&(k=h,h=g,g=k);this.helper.css({left:f,top:g,width:n-f,height:h-g});this.selectees.each(function(){var k=a.data(this,"selectable-item"),l=!1;if(k&&k.element!==d.element[0]){var t=k.left+d.elementPos.left;var p=k.right+d.elementPos.left;var u=k.top+d.elementPos.top;var q=k.bottom+d.elementPos.top;"touch"===e.tolerance?l=!(t>n||p<f||u>h||q<g):"fit"===e.tolerance&&(l=t>f&&p<n&&u>g&&q<h);l?(k.selected&&(d._removeClass(k.$element,
"ui-selected"),k.selected=!1),k.unselecting&&(d._removeClass(k.$element,"ui-unselecting"),k.unselecting=!1),k.selecting||(d._addClass(k.$element,"ui-selecting"),k.selecting=!0,d._trigger("selecting",b,{selecting:k.element}))):(k.selecting&&((b.metaKey||b.ctrlKey)&&k.startselected?(d._removeClass(k.$element,"ui-selecting"),k.selecting=!1,d._addClass(k.$element,"ui-selected"),k.selected=!0):(d._removeClass(k.$element,"ui-selecting"),k.selecting=!1,k.startselected&&(d._addClass(k.$element,"ui-unselecting"),
k.unselecting=!0),d._trigger("unselecting",b,{unselecting:k.element}))),!k.selected||b.metaKey||b.ctrlKey||k.startselected||(d._removeClass(k.$element,"ui-selected"),k.selected=!1,d._addClass(k.$element,"ui-unselecting"),k.unselecting=!0,d._trigger("unselecting",b,{unselecting:k.element})))}});return!1}},_mouseStop:function(b){var d=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");d._removeClass(e.$element,"ui-unselecting");e.unselecting=
!1;e.startselected=!1;d._trigger("unselected",b,{unselected:e.element})});a(".ui-selecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");d._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected");e.selecting=!1;e.selected=!0;e.startselected=!0;d._trigger("selected",b,{selected:e.element})});this._trigger("stop",b);this.helper.remove();return!1}});a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",
axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,d){return a>=b&&a<b+d},_isFloating:function(a){return/left|right/.test(a.css("float"))||
/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");a.each(this.items,function(){b._addClass(this.instance.options.handle?
this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,d){var e=null,f=!1,g=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(b);a(b.target).parents().each(function(){if(a.data(this,g.widgetName+"-item")===g)return e=a(this),!1});a.data(b.target,g.widgetName+
"-item")===g&&(e=a(b.target));if(!e||this.options.handle&&!d&&(a(this.options.handle,e).find("*").addBack().each(function(){this===b.target&&(f=!0)}),!f))return!1;this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,d,e){d=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],
parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();if(d.cursor&&"auto"!==d.cursor){var f=this.document.find("body");this.storedCursor=f.css("cursor");f.css("cursor",d.cursor);this.storedStylesheet=a("<style>*{ cursor: "+d.cursor+" !important; }</style>").appendTo(f)}d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));
d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex));this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=
this);a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){var d;var e=this.options;var f=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
f=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(b.pageY-this.document.scrollTop()<e.scrollSensitivity?f=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<e.scrollSensitivity&&(f=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),b.pageX-this.document.scrollLeft()<e.scrollSensitivity?f=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<e.scrollSensitivity&&
(f=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),!1!==f&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(e=this.items.length-1;0<=e;e--){f=this.items[e];var g=f.item[0];if((d=this._intersectsWithPointer(f))&&
f.instance===this.currentContainer&&g!==this.currentItem[0]&&this.placeholder[1===d?"next":"prev"]()[0]!==g&&!a.contains(this.placeholder[0],g)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],g):1)){this.direction=1===d?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());
this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var e=this;d=this.placeholder.offset();var f=this.options.axis,g={};f&&"x"!==f||(g.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));f&&"y"!==f||(g.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?
0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){e._clear(b)})}else this._clear(b,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};a(d).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);d&&e.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!e.length&&b.key&&e.push(b.key+"=");return e.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};d.each(function(){e.push(a(b.item||this).attr(b.attribute||
"id")||"")});return e},_intersectsWith:function(a){var b=this.positionAbs.left,d=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,n=g+a.width,h=a.top,k=h+a.height,l=this.offset.click.top,p=this.offset.click.left;l="x"===this.options.axis||e+l>h&&e+l<k;p="y"===this.options.axis||b+p>g&&b+p<n;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":
"height"]>a[this.floating?"width":"height"]?l&&p:g<b+this.helperProportions.width/2&&d-this.helperProportions.width/2<n&&h<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);if(!b||!a)return!1;b=this._getDragVerticalDirection();a=this._getDragHorizontalDirection();
return this.floating?"right"===a||"down"===b?2:1:b&&("down"===b?2:1)},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&a||"left"===e&&!a:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-
this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function d(){g.push(this)}var e,f,g=[],h=[],n=this._connectWith();
if(n&&b)for(b=n.length-1;0<=b;b--){var k=a(n[b],this.document[0]);for(e=k.length-1;0<=e;e--)(f=a.data(k[e],this.widgetFullName))&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(b=h.length-1;0<=b;b--)h[b][0].each(d);return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var d=0;d<b.length;d++)if(b[d]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var d,e,f,g,h=this.items,n=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];
if((g=this._connectWith())&&this.ready)for(d=g.length-1;0<=d;d--){var k=a(g[d],this.document[0]);for(e=k.length-1;0<=e;e--)(f=a.data(k[e],this.widgetFullName))&&f!==this&&!f.options.disabled&&(n.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f))}for(d=n.length-1;0<=d;d--)for(b=n[d][1],k=n[d][0],e=0,g=k.length;e<g;e++)f=a(k[e]),f.data(this.widgetName+"-item",b),h.push({item:f,instance:b,width:0,
height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var d;for(d=this.items.length-1;0<=d;d--){var e=this.items[d];if(e.instance===this.currentContainer||!this.currentContainer||e.item[0]===this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;b||(e.width=f.outerWidth(),e.height=
f.outerHeight());f=f.offset();e.left=f.left;e.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)f=this.containers[d].element.offset(),this.containers[d].containerCache.left=f.left,this.containers[d].containerCache.top=f.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();
return this},_createPlaceholder:function(b){b=b||this;var d=b.options;if(!d.placeholder||d.placeholder.constructor===String){var e=d.placeholder;d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),f=a("<"+d+">",b.document[0]);b._addClass(f,"ui-sortable-placeholder",e||b.currentItem[0].className)._removeClass(f,"ui-sortable-helper");"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(f)):"tr"===d?b._createTrPlaceholder(b.currentItem,
f):"img"===d&&f.attr("src",b.currentItem.attr("src"));e||f.css("visibility","hidden");return f},update:function(a,f){if(!e||d.forcePlaceholderSize)f.height()||f.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem));
b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,d){var e=this;b.children().each(function(){a("<td>&#160;</td>",e.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(d)})},_contactContainers:function(b){var d,e,f,g=f=null;for(d=this.containers.length-1;0<=d;d--)a.contains(this.currentItem[0],this.containers[d].element[0])||(this._intersectsWith(this.containers[d].containerCache)?f&&a.contains(this.containers[d].element[0],f.element[0])||
(f=this.containers[d],g=d):this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",b,this._uiHash(this)),this.containers[d].containerCache.over=0));if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",b,this._uiHash(this)),this.containers[g].containerCache.over=1);else{d=1E4;var h=null;f=(e=f.floating||this._isFloating(this.currentItem))?"left":"top";var n=e?"width":"height";var k=e?"pageX":"pageY";for(e=this.items.length-
1;0<=e;e--)if(a.contains(this.containers[g].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]){var l=this.items[e].item.offset()[f];var p=!1;b[k]-l>this.items[e][n]/2&&(p=!0);Math.abs(b[k]-l)<d&&(d=Math.abs(b[k]-l),h=this.items[e],this.direction=p?"up":"down")}if(h||this.options.dropOnEmpty)this.currentContainer===this.containers[g]?this.currentContainer.containerCache.over||(this.containers[g]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=
1):(h?this._rearrange(b,h,null,!0):this._rearrange(b,null,this.containers[g].element,!0),this._trigger("change",b,this._uiHash()),this.containers[g]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",b,this._uiHash(this)),this.containers[g].containerCache.over=1)}},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],
[b,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!==d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});b[0].style.width&&!d.forceHelperSize||b.width(this.currentItem.width());
b[0].style.height&&!d.forceHelperSize||b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},
_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"===b.containment&&(b.containment=this.helper[0].parentNode);if("document"===b.containment||"window"===b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===b.containment?this.document.width():this.window.width()-this.helperProportions.width-
this.margins.left,("document"===b.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0];b=a(b.containment).offset();var e="hidden"!==a(d).css("overflow");this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,
b.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},
_convertPositionTo:function(b,d){d||(d=this.position);b="absolute"===b?1:-1;var e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b,left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===
this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b}},_generatePosition:function(b){var d=this.options;var e=b.pageX;var f=b.pageY;var g="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(g[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(f=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(f=this.containment[3]+this.offset.click.top)),d.grid&&(f=this.originalPageY+Math.round((f-this.originalPageY)/d.grid[1])*
d.grid[1],f=this.containment?f-this.offset.click.top>=this.containment[1]&&f-this.offset.click.top<=this.containment[3]?f:f-this.offset.click.top>=this.containment[1]?f-d.grid[1]:f+d.grid[1]:f,e=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-d.grid[0]:e+d.grid[0]:e));return{top:f-this.offset.click.top-this.offset.relative.top-
this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:g.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:g.scrollLeft())}},_rearrange:function(a,b,d,e){d?d[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var f=this.counter=this.counter?++this.counter:1;this._delay(function(){f===
this.counter&&this.refreshPositions(!e)})},_clear:function(a,b){function d(a,b,d){return function(e){d._trigger(a,e,b._uiHash(b))}}this.reverting=!1;var e,f=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)if("auto"===this._storedCSS[e]||"static"===this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,
"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&f.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||f.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||b||(f.push(function(a){this._trigger("remove",a,this._uiHash())}),f.push(function(a){return function(b){a._trigger("receive",
b,this._uiHash(this))}}.call(this,this.currentContainer)),f.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||f.push(d("deactivate",this,this.containers[e])),this.containers[e].containerCache.over&&(f.push(d("out",this,this.containers[e])),this.containers[e].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());
this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!b){for(e=0;e<f.length;e++)f[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=
!1;return!this.cancelHelperRemoval},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}});a.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all",
"ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;
this.prevShow=this.prevHide=a();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;if(b){var d=a("<span>");this._addClass(d,"ui-accordion-header-icon","ui-icon "+
b.header);d.prependTo(this.headers);d=this.active.children(".ui-accordion-header-icon");this._removeClass(d,b.header)._addClass(d,null,b.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();
var a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()))},_setOptionDisabled:function(a){this._super(a);
this.element.attr("aria-disabled",a);this._toggleClass(null,"ui-state-disabled",!!a);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!a)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var d=a.ui.keyCode,e=this.headers.length,f=this.headers.index(b.target),g=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:g=this.headers[(f+1)%e];break;case d.LEFT:case d.UP:g=this.headers[(f-1+e)%e];break;case d.SPACE:case d.ENTER:this._eventHandler(b);break;case d.HOME:g=this.headers[0];
break;case d.END:g=this.headers[e-1]}g&&(a(b.target).attr("tabIndex",-1),a(g).attr("tabIndex",0),a(g).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===
this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,
"ui-accordion-content","ui-helper-reset ui-widget-content");b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b=this.options,d=b.heightStyle,e=this.element.parent();this.active=this._findActive(b.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var b=
a(this),d=b.uniqueId().attr("id"),e=b.next(),f=e.uniqueId().attr("id");b.attr("aria-controls",f);e.attr("aria-labelledby",d)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(b.event);
if("fill"===d){var f=e.height();this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(f-=b.outerHeight(!0))});this.headers.each(function(){f-=a(this).outerHeight(!0)});this.headers.next().each(function(){a(this).height(Math.max(0,f-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else"auto"===d&&(f=0,this.headers.next().each(function(){var b=a(this).is(":visible");b||a(this).show();f=Math.max(f,a(this).css("height","").height());
b||a(this).hide()}).height(f))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var d={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,d);this._on(this.headers.next(),{keydown:"_panelKeyDown"});
this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var d,e=this.options,f=this.active,g=a(b.currentTarget),h=(d=g[0]===f[0])&&e.collapsible,n=h?a():g.next(),k=f.next();n={oldHeader:f,oldPanel:k,newHeader:h?a():g,newPanel:n};b.preventDefault();d&&!e.collapsible||!1===this._trigger("beforeActivate",b,n)||(e.active=h?!1:this.headers.index(g),this.active=d?a():g,this._toggle(n),this._removeClass(f,"ui-accordion-header-active","ui-state-active"),e.icons&&(b=f.children(".ui-accordion-header-icon"),
this._removeClass(b,null,e.icons.activeHeader)._addClass(b,null,e.icons.header)),d||(this._removeClass(g,"ui-accordion-header-collapsed")._addClass(g,"ui-accordion-header-active","ui-state-active"),e.icons&&(d=g.children(".ui-accordion-header-icon"),this._removeClass(d,null,e.icons.header)._addClass(d,null,e.icons.activeHeader)),this._addClass(g.next(),"ui-accordion-content-active")))},_toggle:function(b){var d=b.newPanel,e=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,
!0);this.prevShow=d;this.prevHide=e;this.options.animate?this._animate(d,e,b):(e.hide(),d.show(),this._toggleComplete(b));e.attr({"aria-hidden":"true"});e.prev().attr({"aria-selected":"false","aria-expanded":"false"});d.length&&e.length?e.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1);d.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},
_animate:function(a,b,d){var e,f,g=this,h=0,n=a.css("box-sizing"),k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{};k=k&&l.down||l;var t=function(){g._toggleComplete(d)};"number"===typeof k&&(f=k);"string"===typeof k&&(e=k);e=e||k.easing||l.easing;f=f||k.duration||l.duration;if(!b.length)return a.animate(this.showProps,f,e,t);if(!a.length)return b.animate(this.hideProps,f,e,t);var p=a.show().outerHeight();b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(this.showProps,{duration:f,easing:e,complete:t,step:function(a,d){d.now=Math.round(a);"height"!==d.prop?"content-box"===n&&(h+=d.now):"content"!==g.options.heightStyle&&(d.now=Math.round(p-b.outerHeight()-h),h=0)}})},_toggleComplete:function(a){var b=a.oldPanel,d=b.prev();this._removeClass(b,"ui-accordion-content-active");this._removeClass(d,"ui-accordion-header-active")._addClass(d,"ui-accordion-header-collapsed");b.length&&(b.parent()[0].className=b.parent()[0].className);
this._trigger("activate",null,a)}});a.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},
"click .ui-menu-item":function(b){var d=a(b.target),e=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&d.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),d.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&e.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var d=
a(b.target).closest(".ui-menu-item"),e=a(b.currentTarget);d[0]===e[0]&&(this._removeClass(e.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,e))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var d=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,d)},blur:function(b){this._delay(function(){a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]))||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();
this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a);this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();b.children().each(function(){var b=
a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},_keydown:function(b){var d=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&
this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:d=!1;var e=this.previousFilter||"";var f=!1;var g=96<=b.keyCode&&105>=b.keyCode?(b.keyCode-96).toString():String.fromCharCode(b.keyCode);clearTimeout(this.filterTimer);g===e?f=!0:g=e+g;e=this._filterMenuItems(g);e=f&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e;e.length||(g=String.fromCharCode(b.keyCode),e=this._filterMenuItems(g));
e.length?(this.focus(b,e),this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}d&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b=this,d=this.options.icons.submenu;var e=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);
var f=e.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=a(this),f=e.prev(),g=a("<span>").data("ui-menu-submenu-caret",!0);b._addClass(g,"ui-menu-icon","ui-icon "+d);f.attr("aria-haspopup","true").prepend(g);e.attr("aria-labelledby",f.attr("id"))});this._addClass(f,"ui-menu","ui-widget ui-widget-content ui-front");f=e.add(this.element).find(this.options.items);f.not(".ui-menu-item").each(function(){var d=a(this);b._isDivider(d)&&
b._addClass(d,"ui-menu-divider","ui-widget-content")});e=f.not(".ui-menu-item, .ui-menu-divider");var g=e.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(e,"ui-menu-item")._addClass(g,"ui-menu-item-wrapper");f.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if("icons"===
a){var d=this.element.find(".ui-menu-icon");this._removeClass(d,null,this.options.icons.submenu)._addClass(d,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",String(a));this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();var d=this.active.children(".ui-menu-item-wrapper");this._addClass(d,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",
d.attr("id"));d=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(d,null,"ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);d=b.children(".ui-menu");d.length&&a&&/^mouse/.test(a.type)&&this._startOpening(d);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){if(this._hasScroll()){var d=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;var e=parseFloat(a.css(this.activeMenu[0],
"paddingTop"))||0;d=b.offset().top-this.activeMenu.offset().top-d-e;e=this.activeMenu.scrollTop();var f=this.activeMenu.height();b=b.outerHeight();0>d?this.activeMenu.scrollTop(e+d):d+b>f&&this.activeMenu.scrollTop(e+d-f+b)}},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var d=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(b,d){clearTimeout(this.timer);this.timer=this._delay(function(){var e=d?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
e.length||(e=this.element);this._close(e);this.blur(b);this._removeClass(e.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&
this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,d){var e;this.active&&(e="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.find(this.options.items)[b]());this.focus(d,e)},nextPage:function(b){var d;if(!this.active)this.next(b);else if(!this.isLastItem())if(this._hasScroll()){var e=this.active.offset().top;var f=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){d=
a(this);return 0>d.offset().top-e-f});this.focus(b,d)}else this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(b){var d;if(!this.active)this.next(b);else if(!this.isFirstItem())if(this._hasScroll()){var e=this.active.offset().top;var f=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){d=a(this);return 0<d.offset().top-e+f});this.focus(b,d)}else this.focus(b,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,d)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var d=new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}});
a.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,d,e,f=this.element[0].nodeName.toLowerCase(),g="textarea"===f;f="input"===f;this.isMultiLine=g||!f&&this._isContentEditable(this.element);this.valueMethod=this.element[g||
f?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(f){if(this.element.prop("readOnly"))d=e=b=!0;else{d=e=b=!1;var g=a.ui.keyCode;switch(f.keyCode){case g.PAGE_UP:b=!0;this._move("previousPage",f);break;case g.PAGE_DOWN:b=!0;this._move("nextPage",f);break;case g.UP:b=!0;this._keyEvent("previous",f);break;case g.DOWN:b=!0;this._keyEvent("next",f);break;case g.ENTER:this.menu.active&&(b=!0,f.preventDefault(),
this.menu.select(f));break;case g.TAB:this.menu.active&&this.menu.select(f);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(f),f.preventDefault());break;default:d=!0,this._searchTimeout(f)}}},keypress:function(e){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault();else if(!d){var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:this._move("previousPage",e);break;case f.PAGE_DOWN:this._move("nextPage",e);break;
case f.UP:this._keyEvent("previous",e);break;case f.DOWN:this._keyEvent("next",e)}}},input:function(a){e?(e=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete",
"ui-front");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(b,d){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var e=d.item.data("ui-autocomplete-item");
!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value);(d=d.item.attr("aria-label")||e.value)&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))},menuselect:function(b,d){var e=d.item.data("ui-autocomplete-item"),f=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=f,this._delay(function(){this.previous=f;this.selectedItem=e}));
!1!==this._trigger("select",b,{item:e})&&this._value(e.value);this.term=this._value();this.close(b);this.selectedItem=e}});this.liveRegion=a("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();
this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var d=this.menu.element[0];return b.target===this.element[0]||b.target===d||a.contains(d,b.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?a(b):
this.document.find(b).eq(0));b&&b[0]||(b=this.element.closest(".ui-front, dialog"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b=this;if(a.isArray(this.options.source)){var d=this.options.source;this.source=function(b,e){e(a.ui.autocomplete.filter(d,b.term))}}else if("string"===typeof this.options.source){var e=this.options.source;this.source=function(d,f){b.xhr&&b.xhr.abort();b.xhr=a.ajax({url:e,data:d,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}}else this.source=
this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){var b=this.term===this._value(),d=this.menu.element.is(":visible"),e=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;if(!b||b&&!d&&!e)this.selectedItem=null,this.search(null,a)},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;
this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},
close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this._off(this.document,"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,
value:b.value||b.label})})},_suggest:function(b){var d=this.menu.element.empty();this._renderMenu(d,b);this.isNewMenu=!0;this.menu.refresh();d.show();this._resizeMenu();d.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,d){var e=this;a.each(d,
function(a,d){e._renderItemData(b,d)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,d){return a("<li>").append(a("<div>").text(d.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this.isMultiLine||this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},
_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,d){var e=new RegExp(a.ui.autocomplete.escapeRegex(d),
"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var d=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults;this.liveRegion.children().hide();
a("<div>").text(d).appendTo(this.liveRegion)}}});var r=/ui-corner-([a-z]){2,6}/g;a.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role",
"toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,d=[];a.each(this.options.items,function(e,f){var g={};f&&("controlgroupLabel"===e?(f=b.element.find(f),f.each(function(){var b=a(this);b.children(".ui-controlgroup-label-contents").length||
b.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),d=d.concat(f.get())):a.fn[e]&&(g=b["_"+e+"Options"]?b["_"+e+"Options"]("middle"):{classes:{}},b.element.find(f).each(function(){var f=a(this),h=f[e]("instance"),n=a.widget.extend({},g);"button"===e&&f.parent(".ui-spinner").length||(h||(h=f[e]()[e]("instance")),h&&(n.classes=b._resolveClassesValues(n.classes,h)),f[e](n),n=f[e]("widget"),a.data(n[0],"ui-controlgroup-data",
h?h:f[e]("instance")),d.push(n[0]))})))});this.childWidgets=a(a.unique(d));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var d=a(this).data("ui-controlgroup-data");if(d&&d[b])d[b]()})},_updateCornerClass:function(a,b){b=this._buildSimpleOptions(b,"label").classes.label;this._removeClass(a,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all");this._addClass(a,null,b)},_buildSimpleOptions:function(a,
b){var d="vertical"===this.options.direction,e={classes:{}};e.classes[b]={middle:"",first:"ui-corner-"+(d?"top":"left"),last:"ui-corner-"+(d?"bottom":"right"),only:"ui-corner-all"}[a];return e},_spinnerOptions:function(a){a=this._buildSimpleOptions(a,"ui-spinner");a.classes["ui-spinner-up"]="";a.classes["ui-spinner-down"]="";return a},_buttonOptions:function(a){return this._buildSimpleOptions(a,"ui-button")},_checkboxradioOptions:function(a){return this._buildSimpleOptions(a,"ui-checkboxradio-label")},
_selectmenuOptions:function(a){var b="vertical"===this.options.direction;return{width:b?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(b?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(b?"top":"left")},last:{"ui-selectmenu-button-open":b?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(b?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[a]}},
_resolveClassesValues:function(b,d){var e={};a.each(b,function(f){var g=d.options.classes[f]||"";g=a.trim(g.replace(r,""));e[f]=(g+" "+b[f]).replace(/\s+/g," ")});return e},_setOption:function(a,b){"direction"===a&&this._removeClass("ui-controlgroup-"+this.options.direction);this._super(a,b);"disabled"===a?this._callChildMethod(b?"disable":"enable"):this.refresh()},refresh:function(){var b=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===this.options.direction&&
this._addClass(null,"ui-helper-clearfix");this._initWidgets();var d=this.childWidgets;this.options.onlyVisible&&(d=d.filter(":visible"));d.length&&(a.each(["first","last"],function(a,e){(a=d[e]().data("ui-controlgroup-data"))&&b["_"+a.widgetName+"Options"]?(e=b["_"+a.widgetName+"Options"](1===d.length?"only":e),e.classes=b._resolveClassesValues(e.classes,a),a.element[a.widgetName](e)):b._updateCornerClass(d[e](),e)}),this._callChildMethod("refresh"))}});a.widget("ui.checkboxradio",[a.ui.formResetMixin,
{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b=this,d=this._super()||{};this._readType();var e=this.element.labels();this.label=a(e[e.length-1]);this.label.length||a.error("No label found for checkboxradio widget");this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){b.originalLabel+=3===this.nodeType?a(this).text():this.outerHTML});
this.originalLabel&&(d.label=this.originalLabel);e=this.element[0].disabled;null!=e&&(d.disabled=e);return d},_create:function(){var a=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,
"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();a&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover"));this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},
_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===b&&/radio|checkbox/.test(this.type)||a.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var b=this.element[0].name,d="input[name='"+a.ui.escapeSelector(b)+"']";return b?(this.form.length?a(this.form[0].elements).filter(d):a(d).filter(function(){return 0===
a(this).form().length})).not(this.element):a([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b);"radio"===this.type&&this._getRadioGroup().each(function(){var b=a(this).checkboxradio("instance");b&&b._removeClass(b.label,"ui-checkboxradio-checked","ui-state-active")})},
_destroy:function(){this._unbindFormResetHandler();this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(a,b){if("label"!==a||b)this._super(a,b),"disabled"===a?(this._toggleClass(this.label,null,"ui-state-disabled",b),this.element[0].disabled=b):this.refresh()},_updateIcon:function(b){var d="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=a("<span>"),this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===
this.type?(d+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):d+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",d),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var a=this.label.contents().not(this.element[0]);this.icon&&(a=a.not(this.icon[0]));
this.iconSpace&&(a=a.not(this.iconSpace[0]));a.remove();this.label.append(this.options.label)},refresh:function(){var a=this.element[0].checked,b=this.element[0].disabled;this._updateIcon(a);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a);null!==this.options.label&&this._updateLabel();b!==this.options.disabled&&this._setOptions({disabled:b})}}]);a.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,
icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a=this._super()||{};this.isInput=this.element.is("input");var b=this.element[0].disabled;null!=b&&(a.disabled=b);if(this.originalLabel=this.isInput?this.element.val():this.element.html())a.label=this.originalLabel;return a},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=
!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(b){b.keyCode===a.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||
this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(b,d){var e=(b="iconPosition"!==b)?this.options.iconPosition:d,f="top"===e||"bottom"===e;this.icon?b&&this._removeClass(this.icon,null,this.options.icon):(this.icon=a("<span>"),this._addClass(this.icon,"ui-button-icon",
"ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));b&&this._addClass(this.icon,null,d);this._attachIcon(e);f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(e))},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();
this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?"append":"prepend"](this.icon)},_setOptions:function(a){var b=void 0===a.icon?this.options.icon:a.icon;(void 0===a.showLabel?this.options.showLabel:a.showLabel)||b||(a.showLabel=!0);this._super(a)},_setOption:function(a,b){"icon"===a&&(b?this._updateIcon(a,
b):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===a&&this._updateIcon(a,b);"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!b),this._updateTooltip());"label"===a&&(this.isInput?this.element.val(b):(this.element.html(b),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(a,b);"disabled"===a&&(this._toggleClass(null,"ui-state-disabled",b),(this.element[0].disabled=b)&&this.element.blur())},
refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a});this._updateTooltip()}});!1!==a.uiBackCompat&&(a.widget("ui.button",a.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);
this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end");this._super()},_setOption:function(a,b){"text"===a?this._super("showLabel",b):("showLabel"===a&&(this.options.text=b),"icon"===a&&(this.options.icons.primary=b),"icons"===a&&(b.primary?(this._super("icon",
b.primary),this._super("iconPosition","beginning")):b.secondary&&(this._super("icon",b.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),a.fn.button=function(b){return function(){if(!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type"))return b.apply(this,arguments);a.ui.checkboxradio||a.error("Checkboxradio widget missing");return 0===arguments.length?this.checkboxradio({icon:!1}):
this.checkboxradio.apply(this,arguments)}}(a.fn.button),a.fn.buttonset=function(){a.ui.controlgroup||a.error("Controlgroup widget missing");if("option"===arguments[0]&&"items"===arguments[1]&&arguments[2])return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);if("option"===arguments[0]&&"items"===arguments[1])return this.controlgroup.apply(this,[arguments[0],"items.button"]);"object"===typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items});
return this.controlgroup.apply(this,arguments)});a.extend(a.ui,{datepicker:{version:"1.12.1"}});var v;a.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){g(this._defaults,a||{});return this},_attachDatepicker:function(b,d){var e=b.nodeName.toLowerCase();var f="div"===e||"span"===e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var g=this._newInst(a(b),f);g.settings=a.extend({},d||{});"input"===e?this._connectDatepicker(b,
g):f&&this._inlineDatepicker(b,g)},_newInst:function(b,d){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:d?e(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,d){var e=a(b);d.append=a([]);d.trigger=a([]);e.hasClass(this.markerClassName)||(this._attachments(e,d),e.addClass(this.markerClassName).on("keydown",
this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(d),a.data(b,"datepicker",d),d.settings.disabled&&this._disableDatepicker(b))},_cancelDatepickerScroll:function(){a.datepicker._isTouching=!1;a.datepicker._lastScrollTime-=5E3},_attachments:function(b,d){var e=this._get(d,"appendText");var f=this._get(d,"isRTL");d.append&&d.append.remove();e&&(d.append=a("<span class='"+this._appendClass+"'>"+e+"</span>"),b[f?"before":"after"](d.append));b.off("focus",this._showDatepicker);
d.trigger&&d.trigger.remove();e=this._get(d,"showOn");if("focus"===e||"both"===e)b.on("focus",this._showDatepicker);if("button"===e||"both"===e)e=this._get(d,"buttonText"),f=this._get(d,"buttonImage"),d.trigger=a(this._get(d,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e,"aria-expanded":!1}):a("<button type='button' data-taborder='document' aria-expanded='false'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b.before(d.trigger),
d.trigger.on("click",function(d){a.datepicker._triggerElement=null;window._datepickerTriggerElement?(a.datepicker._triggerElement=window._datepickerTriggerElement,window._datepickerTriggerElement=null):/button|input/i.test(d.target.tagName)?a.datepicker._triggerElement=d.target:/button|input/i.test(d.target.parentElement.tagName)&&(a.datepicker._triggerElement=d.target.parentElement);a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?(a.datepicker._cancelDatepickerScroll(),a.datepicker._hideDatepicker()):
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]&&(a.datepicker._cancelDatepickerScroll(),a.datepicker._hideDatepicker(!1)),a.datepicker._showDatepicker(b[0]));return!1}).keydown(function(d){9!==d.which||d.shiftKey?13===d.which&&a.datepicker.dpDiv.is(":visible")&&(d=a.datepicker.dpDiv.find("A.ui-state-hover"),d.length||(d=a.datepicker.dpDiv.find("A.ui-state-active")),d.length?d[0].click():a.datepicker._hideDatepicker()):a.datepicker._triggerElement=b[0]})},_autoSize:function(a){if(this._get(a,
"autoSize")&&!a.inline){var b,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");if(g.match(/[DM]/)){var h=function(a){for(e=d=b=0;e<a.length;e++)a[e].length>b&&(b=a[e].length,d=e);return d};f.setMonth(h(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(h(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,d){var e=a(b);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(d.dpDiv),
a.data(b,"datepicker",d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&this._disableDatepicker(b),d.dpDiv.css("display","block"))},_dialogDatepicker:function(b,d,e,f,h){b=this._dialogInst;b||(this.uuid+=1,b="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+b+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=
this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));g(b.settings,f||{});d=d&&d.constructor===Date?this._formatDate(b,d):d;this._dialogInput.val(d);this._pos=h?h.length?h:[h.pageX,h.pageY]:null;if(!this._pos){d=document.documentElement.clientWidth;f=document.documentElement.clientHeight;h=document.documentElement.scrollLeft||document.body.scrollLeft;var k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[d/2-100+h,f/2-150+k]}this._dialogInput.css("left",
this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var d=a(b),e=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var f=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"===f?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).off("focus",
this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==f&&"span"!==f||d.removeClass(this.markerClassName).empty();v===e&&(v=null)}},_enableDatepicker:function(b){var d=a(b),e=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var f=b.nodeName.toLowerCase();if("input"===f)b.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===f||"span"===
f)f=d.children("."+this._inlineClass),f.children().removeClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a})}},_disableDatepicker:function(b){var d=a(b),e=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var f=b.nodeName.toLowerCase();if("input"===f)b.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",
cursor:"default"});else if("div"===f||"span"===f)f=d.children("."+this._inlineClass),f.children().addClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,
"datepicker")}catch(t){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,d,e){var f=this._getInst(b);if(2===arguments.length&&"string"===typeof d)return"defaults"===d?a.extend({},a.datepicker._defaults):f?"all"===d?a.extend({},f.settings):this._get(f,d):null;var h=d||{};"string"===typeof d&&(h={},h[d]=e);if(f){this._curInst===f&&(this._cancelDatepickerScroll(),this._hideDatepicker());var k=this._getDateDatepicker(b,!0);var n=this._getMinMaxDate(f,"min");var l=this._getMinMaxDate(f,
"max");g(f.settings,h);null!==n&&void 0!==h.dateFormat&&void 0===h.minDate&&(f.settings.minDate=this._formatDate(f,n));null!==l&&void 0!==h.dateFormat&&void 0===h.maxDate&&(f.settings.maxDate=this._formatDate(f,l));"disabled"in h&&(h.disabled?this._disableDatepicker(b):this._enableDatepicker(b));"string"===typeof d&&-1<"buttonImage.buttonImageOnly.buttonText.showButtonPanel.showOptions.".indexOf(d+".")?this._attachments(a(b),f):null;this._autoSize(f);if("object"!==typeof d||"undefined"==typeof d.suspendAutoUpdate||
1!=d.suspendAutoUpdate)this._setDate(f,k),this._updateAlternate(f),this._updateDatepicker(f)}},_changeDatepicker:function(a,b,d){this._optionDatepicker(a,b,d)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a))this._setDate(a,b),!0!==this._get(a,"suspendAutoUpdate")&&(this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);
return a?this._getDate(a):null},_doKeyDown:function(b){var d=b.target;var e=a.datepicker._getInst(d),f=!1;!e&&/A|BUTTON/i.test(b.target.tagName)&&(e=a.datepicker._curInst,d=e.input,f=!0);var g=!0,h=e.dpDiv.is(".ui-datepicker-rtl");e._keyEvent=!0;b.originalEvent||(b.originalEvent=b);if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._cancelDatepickerScroll();a.datepicker._hideDatepicker("TAB_KEY");g=!1;break;case 13:return b=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+
")",e.dpDiv),0==b.length&&(b=a("A.ui-state-hover[data-cal-day]:visible").parent()),b[0]&&a.datepicker._selectDay(d,e.selectedMonth,e.selectedYear,b[0]),(d=a.datepicker._get(e,"onSelect"))?(b=a.datepicker._formatDate(e),d.apply(e.input?e.input[0]:null,[b,e])):a.datepicker._datepickerShowing&&(a.datepicker._cancelDatepickerScroll(),a.datepicker._hideDatepicker()),!1;case 27:a.datepicker._cancelDatepickerScroll();a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(d,-a.datepicker._get(e,
"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(d,+a.datepicker._get(e,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(d);g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(d);g=b.ctrlKey||b.metaKey;break;case 37:a.datepicker._adjustDate(d,h?1:-1,"D");g=b.ctrlKey||b.metaKey||!0;b.originalEvent.altKey&&a.datepicker._adjustDate(d,b.ctrlKey?-a.datepicker._get(e,"stepBigMonths"):-a.datepicker._get(e,"stepMonths"),"M");break;
case 38:a.datepicker._adjustDate(d,-7,"D");g=b.ctrlKey||b.metaKey||!0;break;case 39:a.datepicker._adjustDate(d,h?-1:1,"D");g=b.ctrlKey||b.metaKey||!0;b.originalEvent.altKey&&a.datepicker._adjustDate(d,b.ctrlKey?+a.datepicker._get(e,"stepBigMonths"):+a.datepicker._get(e,"stepMonths"),"M");break;case 40:a.datepicker._adjustDate(d,7,"D");g=b.ctrlKey||b.metaKey||!0;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;if(g||f)b.preventDefault(),b.stopPropagation(),
f&&(e=a("A.ui-state-hover"),e.length&&e[0].focus())},_doKeyPress:function(b){var d=a.datepicker._getInst(b.target);if(a.datepicker._get(d,"constrainInput")){d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat"));var e=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){var d;b=a.datepicker._getInst(b.target);if(b.input.val()!==b.lastVal)try{if(d=a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),
b.input?b.input.val():null,a.datepicker._getFormatConfig(b)))a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b)}catch(u){}return!0},_showDatepicker:function(d){d=d.target||d;"input"!==d.nodeName.toLowerCase()&&(d=a("input",d.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(d)&&a.datepicker._lastInput!==d){var e=a.datepicker._getInst(d);a.datepicker._curInst&&a.datepicker._curInst!==e&&(a.datepicker._curInst.dpDiv.stop(!0,!0),e&&a.datepicker._datepickerShowing&&
(a.datepicker._cancelDatepickerScroll(),a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])));var f=(f=a.datepicker._get(e,"beforeShow"))?f.apply(d,[d,e]):{};if(!1!==f){g(e.settings,f);e.lastVal=null;a.datepicker._lastInput=d;a.datepicker._setDateFromField(e);a.datepicker._inDialog&&(d.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(d),a.datepicker._pos[1]+=d.offsetHeight);var h=!1;a(d).parents().each(function(){h|="fixed"===a(this).css("position");return!h});f={left:a.datepicker._pos[0],
top:a.datepicker._pos[1]};a.datepicker._pos=null;e.dpDiv.empty();e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(e);f=a.datepicker._checkOffset(e,f,h);e.dpDiv.css({position:"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!e.inline){f=a.datepicker._get(e,"showAnim");var k=a.datepicker._get(e,"duration");e.dpDiv.css("z-index",b(a(d))+1);a.datepicker._datepickerShowing=!0;if(a.effects&&a.effects.effect[f])e.dpDiv.show(f,a.datepicker._get(e,
"showOptions"),k);else e.dpDiv[f||"show"](f?k:null);a.datepicker._shouldFocusInput(e)&&e.input.trigger("focus");a.datepicker._curInst&&a.datepicker._curInst.trigger&&a.datepicker._curInst.trigger.attr("aria-expanded",!1);a.datepicker._curInst=e;a.datepicker._curInst.trigger.attr("aria-expanded",!0);a.datepicker._lastScrollTop=a.datepicker._computeDatepickerScrollTop();a.datepicker._triggerElement&&/button/i.test(a.datepicker._triggerElement.tagName)&&(d=a("A.ui-state-active"),e=a("A.ui-state-hover"),
d.length?d[0].focus():e.length&&e[0].focus())}}}},_updateDatepicker:function(b){this.maxRows=4;v=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var d=this._getNumberOfMonths(b),e=d[1],g=b.dpDiv.find("."+this._dayOverClass+" a");0<g.length&&f.apply(g.get(0));b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<e&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi");
b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.trigger("focus");if(b.yearshtml){var h=b.yearshtml;setTimeout(function(){h===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);h=b.yearshtml=null},0)}},_shouldFocusInput:function(a){},_checkOffset:function(b,d,e){var f=b.dpDiv.outerWidth();b.dpDiv.outerHeight();var g=b.input?
b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,k=document.documentElement.clientWidth+(e?0:a(document).scrollLeft());e||a(document).scrollTop();d.left-=this._get(b,"isRTL")?f-g:0;d.left-=e&&d.left===b.input.offset().left?a(document).scrollLeft():0;d.top-=e&&d.top===b.input.offset().top+h?a(document).scrollTop():0;d.left-=Math.min(d.left,d.left+f>k&&k>f?Math.abs(d.left+f-k):0);return d},_findPos:function(b){var d=this._getInst(b),e=this._get(d,"isRTL"),f=d.dpDiv.parent();if(/body/i.test(f[0].tagName)){for(;b&&
("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];b=a(b).offset()}else e=f.offset(),b=a(b).offset(),b.left-=e.left,b.top-=e.top,b.left+=f[0].scrollLeft,b.top+=f[0].scrollTop;this._get(d,"alignRight")?(f=d.dpDiv.outerWidth(),d=d.input.outerWidth(),f>d&&(b.left-=f-d+3),2>b.left&&(b.left=2)):b.left-=3;return[b.left,b.top]},_computeDatepickerScrollTop:function(){var b=a.datepicker._curInst.input.parents(".modal .modal-content > DIV");return b.length?
b.scrollTop():a(document).scrollTop()},_hideDatepicker:function(b){var d=this._curInst;if(d&&(!b||"string"===typeof b||d===a.data(b,"datepicker"))){var e=/CriOS/.test(navigator.userAgent)?1E3:300;var f=Date.now()-a.datepicker._lastScrollTime;if(this._datepickerShowing&&!a.datepicker._isTouching&&f>e){e=this._get(d,"showAnim");f=this._get(d,"duration");var g=function(){a.datepicker._tidyDialog(d)};d.trigger&&d.trigger.attr("aria-expanded",!1);if(this._triggerElement&&!1!==b){var h=a("#noScreenReaderAnnouncement");
if(h.length){var k=window.scrollX,n=window.scrollY;h[0].focus();window.scrollTo(k,n)}}if(a.effects&&(a.effects.effect[e]||a.effects[e]))d.dpDiv.hide(e,a.datepicker._get(d,"showOptions"),f,g);else d.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?f:null,g);e||g();this._datepickerShowing=!1;(e=this._get(d,"onClose"))&&e.apply(d.input?d.input[0]:null,[d.input?d.input.val():"",d]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),
a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1;this._triggerElement&&!1!==b&&(e=this._triggerElement,arguments.length&&"TAB_KEY"===arguments[0]&&(e=d.input[0]),e=function(a,b){return function(){try{b.focus(),/input/i.test(b.tagName)&&b.value.length&&!b.readOnly&&b.select()}catch(K){alert(K)}a._triggerElement=null}}(this,e),window.setTimeout(e,100))}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var d=
a(b.target),e=a.datepicker._getInst(d[0]),f=d.is("BUTTON.ui-datepicker-prev")||d.parent().is("BUTTON.ui-datepicker-prev"),g=d.is("BUTTON.ui-datepicker-next")||d.parent().is("BUTTON.ui-datepicker-next");d.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==e?(a.datepicker._cancelDatepickerScroll(),a.datepicker._hideDatepicker()):d[0].id===a.datepicker._mainDivId||0!==d.parents("#"+a.datepicker._mainDivId).length||d.hasClass(a.datepicker.markerClassName)||d.closest("."+a.datepicker._triggerClass).length||
!a.datepicker._datepickerShowing||f||g||a.datepicker._inDialog&&a.blockUI||(b.preventDefault(),b.stopPropagation(),a.datepicker._lastScrollTop=a.datepicker._computeDatepickerScrollTop(),window.setTimeout(function(){a.datepicker._hideDatepicker()},300))}},_adjustDate:function(b,d,e){b=a(b);var f=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(f,d,e),this._updateDatepicker(f))},_gotoToday:function(b){var d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?
(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(b=new Date,e.selectedDay=b.getDate(),e.drawMonth=e.selectedMonth=b.getMonth(),e.drawYear=e.selectedYear=b.getFullYear());this._notifyChange(e);this._adjustDate(d)},_selectMonthYear:function(b,d,e){b=a(b);var f=this._getInst(b[0]);f["selected"+("M"===e?"Month":"Year")]=f["draw"+("M"===e?"Month":"Year")]=parseInt(d.options[d.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(b)},
_selectDay:function(b,d,e,f){var g=a(b);a(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(g=this._getInst(g[0]),g.selectedDay=g.currentDay=a("a",f).html(),g.selectedMonth=g.currentMonth=d,g.selectedYear=g.currentYear=e,this._selectDate(b,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear)))},_clearDate:function(b){b=a(b);this._selectDate(b,"")},_selectDate:function(b,d){b=a(b);var e=this._getInst(b[0]);d=null!=d?d:this._formatDate(e);e.input&&e.input.val(d);this._updateAlternate(e);
(b=this._get(e,"onSelect"))?b.apply(e.input?e.input[0]:null,[d,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._cancelDatepickerScroll(),this._hideDatepicker(),this._lastInput=e.input[0],"object"!==typeof e.input[0]&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var d=this._get(b,"altField");if(d){var e=this._get(b,"altFormat")||this._get(b,"dateFormat");var f=this._getDate(b);b=this.formatDate(e,f,this._getFormatConfig(b));a(d).val(b)}},
noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(b,d,e){if(null==b||null==d)throw"Invalid arguments";d="object"===typeof d?d.toString():d+"";if(""===d)return null;var f,g=0;var h=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;h="string"!==typeof h?h:(new Date).getFullYear()%100+parseInt(h,
10);var k=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort;var n=(e?e.dayNames:null)||this._defaults.dayNames,l=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,t=e=-1,q=-1,r=-1,u=!1,v=function(a){(a=f+1<b.length&&b.charAt(f+1)===a)&&f++;return a},J=function(a){var b=v(a);b="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2;a=new RegExp("^\\d{"+("y"===a?b:1)+","+b+"}");a=d.substring(g).match(a);if(!a)throw"Missing number at position "+
g;g+=a[0].length;return parseInt(a[0],10)},E=function(b,e,f){var h=-1;b=a.map(v(b)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});a.each(b,function(a,b){a=b[1];if(d.substr(g,a.length).toLowerCase()===a.toLowerCase())return h=b[0],g+=a.length,!1});if(-1!==h)return h+1;throw"Unknown name at position "+g;},N=function(){if(d.charAt(g)!==b.charAt(f))throw"Unexpected literal at position "+g;g++};for(f=0;f<b.length;f++)if(u)"'"!==b.charAt(f)||v("'")?N():u=!1;else switch(b.charAt(f)){case "d":q=
J("d");break;case "D":E("D",k,n);break;case "o":r=J("o");break;case "m":t=J("m");break;case "M":t=E("M",l,p);break;case "y":e=J("y");break;case "@":var I=new Date(J("@"));e=I.getFullYear();t=I.getMonth()+1;q=I.getDate();break;case "!":I=new Date((J("!")-this._ticksTo1970)/1E4);e=I.getFullYear();t=I.getMonth()+1;q=I.getDate();break;case "'":v("'")?N():u=!0;break;default:N()}if(g<d.length&&(k=d.substr(g),!/^\s+/.test(k)))throw"Extra/unparsed characters found in date: "+k;-1===e?e=(new Date).getFullYear():
100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=h?0:-100));if(-1<r){t=1;q=r;do{h=this._getDaysInMonth(e,t-1);if(q<=h)break;t++;q-=h}while(1)}I=this._daylightSavingAdjust(new Date(e,t-1,q));if(I.getFullYear()!==e||I.getMonth()+1!==t||I.getDate()!==q)throw"Invalid date";return I},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",
_ticksTo1970:62135596800*1E7,formatDate:function(a,b,d){if(!b)return"";var e,f=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,g=(d?d.dayNames:null)||this._defaults.dayNames,h=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort;d=(d?d.monthNames:null)||this._defaults.monthNames;var k=function(b){(b=e+1<a.length&&a.charAt(e+1)===b)&&e++;return b},n=function(a,b,d){b=""+b;if(k(a))for(;b.length<d;)b="0"+b;return b},l=function(a,b,d,e){return k(a)?e[b]:d[b]},p="",t=!1;if(b)for(e=0;e<a.length;e++)if(t)"'"!==
a.charAt(e)||k("'")?p+=a.charAt(e):t=!1;else switch(a.charAt(e)){case "d":p+=n("d",b.getDate(),2);break;case "D":p+=l("D",b.getDay(),f,g);break;case "o":p+=n("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":p+=n("m",b.getMonth()+1,2);break;case "M":p+=l("M",b.getMonth(),h,d);break;case "y":p+=k("y")?b.getFullYear():(10>b.getFullYear()%100?"0":"")+b.getFullYear()%100;break;case "@":p+=b.getTime();break;
case "!":p+=1E4*b.getTime()+this._ticksTo1970;break;case "'":k("'")?p+="'":t=!0;break;default:p+=a.charAt(e)}return p},_possibleChars:function(a){var b,d="",e=!1,f=function(d){(d=b+1<a.length&&a.charAt(b+1)===d)&&b++;return d};for(b=0;b<a.length;b++)if(e)"'"!==a.charAt(b)||f("'")?d+=a.charAt(b):e=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":d+="0123456789";break;case "D":case "M":return null;case "'":f("'")?d+="'":e=!0;break;default:d+=a.charAt(b)}return d},_get:function(a,b){return void 0!==
a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var d=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f=this._getDefaultDate(a),g=f,h=this._getFormatConfig(a);try{g=this.parseDate(d,e,h)||f}catch(B){e=b?"":e}a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();a.currentDay=e?g.getDate():0;a.currentMonth=e?g.getMonth():0;a.currentYear=e?g.getFullYear():0;this._adjustInstDate(a)}},
_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,d,e){var f=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},g=function(d){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),d,a.datepicker._getFormatConfig(b))}catch(F){}var e=(d.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth();e=e.getDate();for(var h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
k=h.exec(d);k;){switch(k[2]||"d"){case "d":case "D":e+=parseInt(k[1],10);break;case "w":case "W":e+=7*parseInt(k[1],10);break;case "m":case "M":g+=parseInt(k[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(k[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,g))}k=h.exec(d)}return new Date(f,g,e)};if(d=(d=null==d||""===d?e:"string"===typeof d?g(d):"number"===typeof d?isNaN(d)?e:f(d):new Date(d.getTime()))&&"Invalid Date"===d.toString()?e:d)d.setHours(0),
d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);return this._daylightSavingAdjust(d)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,d){var e=!b,f=a.selectedMonth,g=a.selectedYear;b=this._determineDate(a,b,new Date);b=this._restrictMinMax(a,b);a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();f===a.selectedMonth&&
g===a.selectedYear||d||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var d=this._get(b,"stepMonths"),e="#"+b.id.replace(/\\\\/g,"\\");a("A[data-cal-day]").keydown(function(b){a.datepicker._doKeyDown(b)});b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(b){b.preventDefault();
b.stopPropagation();"keydown"==b.type?a.datepicker._doKeyDown(b):a.datepicker._adjustDate(e,-d,"M");b=a("A.ui-state-active:visible");var f=a("A.ui-state-hover:visible"),g=a("BUTTON.ui-datepicker-prev:visible"),h=a("BUTTON.ui-datepicker-next:visible");b.length?b[0].focus():f.length?f[0].focus():g.length?g[0].focus():h.length?h[0].focus():a.datepicker._triggerElement.focus()},next:function(b){b.preventDefault();b.stopPropagation();"keydown"==b.type?a.datepicker._doKeyDown(b):a.datepicker._adjustDate(e,
+d,"M");b=a("A.ui-state-active:visible");var f=a("A.ui-state-hover:visible"),g=a("BUTTON.ui-datepicker-next:visible");b.length?b[0].focus():f.length?f[0].focus():g.length?g[0].focus():a.datepicker._triggerElement.focus()},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(e)},selectDay:function(){a.datepicker._selectDay(e,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){a.datepicker._selectMonthYear(e,this,
"M");return!1},selectYear:function(){a.datepicker._selectMonthYear(e,this,"Y");return!1}},f=this.getAttribute("data-event"),g=this.getAttribute("data-handler");f=-1==f.indexOf(",")?[f]:f.split(",");for(var h=0;h<f.length;h++)a(this).on(f[h],b[g])})},_generateHTML:function(a){var b,d,e,f,g=new Date;g=this._daylightSavingAdjust(new Date(g.getFullYear(),g.getMonth(),g.getDate()));var h=this._get(a,"isRTL");var k=this._get(a,"showButtonPanel");var l=this._get(a,"hideIfNoPrevNext");var n=this._get(a,"navigationAsDateFormat");
var p=this._getNumberOfMonths(a),q=this._get(a,"showCurrentAtPos");var r=this._get(a,"displayAtMonth");var v=this._get(a,"displayAtYear");var C=this._get(a,"stepMonths");var J=1!==p[0]||1!==p[1],E=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),N=this._getMinMaxDate(a,"min"),I=this._getMinMaxDate(a,"max");if(null===r||null===v){q=a.drawMonth-q;for(v=a.drawYear;0>q;)q+=12,v--;for(;11<q;)q-=12,v++}else q=a.drawMonth=r,v=a.drawYear=v,a.settings.displayAtMonth=
a.settings.displayAtYear=null;if(I)for(r=this._daylightSavingAdjust(new Date(I.getFullYear(),I.getMonth()-p[0]*p[1]+1,I.getDate())),r=N&&r<N?N:r;this._daylightSavingAdjust(new Date(v,q,1))>r;)q--,0>q&&(q=11,v--);a.drawMonth=q;a.drawYear=v;var Y=this._get(a,"prevText");Y=n?this.formatDate(Y,this._daylightSavingAdjust(new Date(v,q-C,1)),this._getFormatConfig(a)):Y;r="";this._canAdjustMonth(a,-1,v,q)?r=r+("<button class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click,keydown' title='"+
Y+"' tabIndex='0'><span class='ui-icon ui-icon-circle-triangle-")+((h?"e":"w")+"'>"+Y+"</span></button>"):l||(r=r+("<button class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+Y+"'><span class='ui-icon ui-icon-circle-triangle-")+((h?"e":"w")+"'>"+Y+"</span></button>"));Y=this._get(a,"nextText");Y=n?this.formatDate(Y,this._daylightSavingAdjust(new Date(v,q+C,1)),this._getFormatConfig(a)):Y;C="";this._canAdjustMonth(a,1,v,q)?C=C+("<button class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click,keydown' title='"+
Y+"' tabIndex='0'><span class='ui-icon ui-icon-circle-triangle-")+((h?"w":"e")+"'>"+Y+"</span></button>"):l||(C=C+("<button class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+Y+"'><span class='ui-icon ui-icon-circle-triangle-")+((h?"w":"e")+"'>"+Y+"</span></button>"));l=this._get(a,"currentText");Y=this._get(a,"gotoCurrent")&&a.currentDay?E:g;l=n?this.formatDate(l,Y,this._getFormatConfig(a)):l;n=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(a,"closeText")+"</button>";k=k?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(h?n:"")+(this._isInRange(a,Y)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+l+"</button>":"")+(h?"":n)+"</div>":"";n=parseInt(this._get(a,"firstDay"),10);n=isNaN(n)?0:n;l=this._get(a,"showWeek");Y=this._get(a,"dayNames");var da=this._get(a,"dayNamesMin");var V=this._get(a,"monthNames");var ka=this._get(a,
"monthNamesShort");var M=this._get(a,"beforeShowDay");var P=this._get(a,"showOtherMonths");var ba=this._get(a,"selectOtherMonths");var oa=this._getDefaultDate(a);var L="";for(b=0;b<p[0];b++){var aa="";this.maxRows=4;for(d=0;d<p[1];d++){var S=this._daylightSavingAdjust(new Date(v,q,a.selectedDay));var Z=" ui-corner-all";var ea="";if(J){ea+="<div class='ui-datepicker-group";if(1<p[1])switch(d){case 0:ea+=" ui-datepicker-group-first";Z=" ui-corner-"+(h?"right":"left");break;case p[1]-1:ea+=" ui-datepicker-group-last";
Z=" ui-corner-"+(h?"left":"right");break;default:ea+=" ui-datepicker-group-middle",Z=""}ea+="'>"}ea+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+Z+"'>"+(/all|left/.test(Z)&&0===b?h?C:r:"")+(/all|right/.test(Z)&&0===b?h?r:C:"")+this._generateMonthYearHeader(a,q,v,N,I,0<b||0<d,V,ka)+"</div><table class='ui-datepicker-calendar'><thead><tr>";var ca=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(Z=0;7>Z;Z++){var W=(Z+n)%7;ca+="<th scope='col'"+
(5<=(Z+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+Y[W]+"'>"+da[W]+"</span></th>"}ea+=ca+"</tr></thead><tbody>";ca=this._getDaysInMonth(v,q);v===a.selectedYear&&q===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,ca));Z=(this._getFirstDayOfMonth(v,q)-n+7)%7;ca=Math.ceil((Z+ca)/7);this.maxRows=ca=J?this.maxRows>ca?this.maxRows:ca:ca;W=this._daylightSavingAdjust(new Date(v,q,1-Z));for(e=0;e<ca;e++){ea+="<tr>";var ra=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(W)+
"</td>":"";for(Z=0;7>Z;Z++){var fa=M?M.apply(a.input?a.input[0]:null,[W]):[!0,""];var R=fa[2]?fa[2].replace(/'/g,"&#39;"):"";readableDayTitle=fa[3]?fa[3].replace(/'/g,"&#39;"):R;var T=(f=W.getMonth()!==q)&&!ba||!fa[0]||N&&W<N||I&&W>I;ra+="<td class='"+(5<=(Z+n+6)%7?" ui-datepicker-week-end":"")+(f?" ui-datepicker-other-month":"")+(W.getTime()===S.getTime()&&q===a.selectedMonth&&a._keyEvent||oa.getTime()===W.getTime()&&oa.getTime()===S.getTime()?" "+this._dayOverClass:"")+(T?" "+this._unselectableClass+
" ui-state-disabled":"")+(f&&!P?"":" "+fa[1]+(W.getTime()===E.getTime()?" "+this._currentClass:"")+(W.getTime()===g.getTime()?" ui-datepicker-today":""))+"'"+(f&&!P||!fa[2]?"":" title='"+R+"'")+(T?"":" data-handler='selectDay' data-event='click' data-month='"+W.getMonth()+"' data-year='"+W.getFullYear()+"'")+">"+(f&&!P?"&#xa0;":T?"<span class='ui-state-default'>"+W.getDate()+"</span>":"<a class='ui-state-default"+(W.getTime()===g.getTime()?" ui-state-highlight":"")+(W.getTime()===E.getTime()?" ui-state-active":
"")+(W.getDate()==a.selectedDay&&W.getMonth()==a.selectedMonth?" ui-state-hover":"")+(f?" ui-priority-secondary":"")+"' href='#' data-cal-day aria-label='"+readableDayTitle+"'>"+W.getDate()+"</a>")+"</td>";W.setDate(W.getDate()+1);W=this._daylightSavingAdjust(W)}ea+=ra+"</tr>"}q++;11<q&&(q=0,v++);ea+="</tbody></table>"+(J?"</div>"+(0<p[0]&&d===p[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");aa+=ea}L+=aa}a._keyEvent=!1;return L+k},_generateMonthYearHeader:function(a,b,d,e,f,g,h,k){var l,
n=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),t=this._get(a,"showMonthAfterYear"),q="<div class='ui-datepicker-title'>",r="";if(g||!n)r+="<span class='ui-datepicker-month'>"+h[b]+"</span>";else{h=e&&e.getFullYear()===d;var u=f&&f.getFullYear()===d;r+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;12>l;l++)(!h||l>=e.getMonth())&&(!u||l<=f.getMonth())&&(r+="<option value='"+l+"'"+(l===b?" selected='selected'":"")+">"+k[l]+"</option>");r+="</select>"}t||
(q+=r+(!g&&n&&p?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",g||!p)q+="<span class='ui-datepicker-year'>"+d+"</span>";else{k=this._get(a,"yearRange").split(":");var w=(new Date).getFullYear();h=function(a){a=a.match(/c[+\-].*/)?d+parseInt(a.substring(1),10):a.match(/[+\-].*/)?w+parseInt(a,10):parseInt(a,10);return isNaN(a)?w:a};b=h(k[0]);k=Math.max(b,h(k[1]||""));b=e?Math.max(b,e.getFullYear()):b;k=f?Math.min(k,f.getFullYear()):k;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";b<=
k;b++)a.yearshtml+="<option value='"+b+"'"+(b===d?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";q+=a.yearshtml;a.yearshtml=null}q+=this._get(a,"yearSuffix");t&&(q+=(!g&&n&&p?"":"&#xa0;")+r);return q+"</div>"},_adjustInstDate:function(a,b,d){var e=a.selectedYear+("Y"===d?b:0),f=a.selectedMonth+("M"===d?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+("D"===d?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=
a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();"M"!==d&&"Y"!==d||this._notifyChange(a)},_restrictMinMax:function(a,b){var d=this._getMinMaxDate(a,"min"),e=this._getMinMaxDate(a,"max"),f=b;0==this._get(a,"suspendDateRestrictions")&&(f=d&&b<d?d:b,f=e&&f>e?e:f);return f},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==
a?[1,1]:"number"===typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,d,e){var f=this._getNumberOfMonths(a);d=this._daylightSavingAdjust(new Date(d,e+(0>b?b:f[0]*f[1]),1));0>b&&d.setDate(this._getDaysInMonth(d.getFullYear(),d.getMonth()));return this._isInRange(a,
d)},_isInRange:function(a,b){var d=this._getMinMaxDate(a,"min"),e=this._getMinMaxDate(a,"max"),f=null,g=null;if(a=this._get(a,"yearRange")){a=a.split(":");var h=(new Date).getFullYear();f=parseInt(a[0],10);g=parseInt(a[1],10);a[0].match(/[+\-].*/)&&(f+=h);a[1].match(/[+\-].*/)&&(g+=h)}return(!d||b.getTime()>=d.getTime())&&(!e||b.getTime()<=e.getTime())&&(!f||b.getFullYear()>=f)&&(!g||b.getFullYear()<=g)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b="string"!==typeof b?b:(new Date).getFullYear()%
100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,d,e){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"===typeof b?b:this._daylightSavingAdjust(new Date(e,d,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,
"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){if(/CriOS/.test(navigator.userAgent))a(document).on("mousedown touchstart",function(b){a.datepicker._isTouching=!0;a.datepicker._lastScrollTop=a.datepicker._computeDatepickerScrollTop()}),a(document).on("mouseup touchend",function(b){a.datepicker._isTouching=!1;a.datepicker._lastScrollTop!=a.datepicker._computeDatepickerScrollTop()&&(a.datepicker._lastScrollTime=Date.now());
a.datepicker._checkExternalClick(b)});else a(document).on("mousedown touchstart",a.datepicker._checkExternalClick);a.datepicker.initialized=!0}var d=function(){a.datepicker._lastScrollTime=Date.now()},e=a("body"),f=a(this).parents(".modal .modal-content > DIV");0===f.length?0===e.find("#"+a.datepicker._mainDivId).length&&(e.append(a.datepicker.dpDiv),a(document).off("scroll.datepicker").on("scroll.datepicker",d)):(e=a("#"+a.datepicker._mainDivId),e.length&&/BODY/i.test(e.parent()[0].tagName)&&e.remove(),
0===f.find("#"+a.datepicker._mainDivId).length&&(f.append(a.datepicker.dpDiv),f.off("scroll.datepicker").on("scroll.datepicker",d)));a.datepicker.dpDiv.css({position:"absolute"});var g=Array.prototype.slice.call(arguments,1);return"string"===typeof b&&("isDisabled"===b||"getDate"===b||"widget"===b)||"option"===b&&2===arguments.length&&"string"===typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(g)):this.each(function(){"string"===typeof b?a.datepicker["_"+b+
"Datepicker"].apply(a.datepicker,[this].concat(g)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new d;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.12.1";a.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,
position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var d=a(this).css(b).offset().top;0>d&&a(this).css("top",b.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},
_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);this.options.disabled&&
(this.options.disabled=!1);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&a.fn.draggable&&this._makeDraggable();this.options.resizable&&a.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?
a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var b=a.parent.children().eq(a.index);b.length&&b[0]!==this.element[0]?b.before(this.element):a.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var d=
this;this._isOpen&&!1!==this._trigger("beforeClose",b)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||a.ui.safeBlur(a.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,d){var e=!1,f=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get();
f=Math.max.apply(null,f);f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),e=!0);e&&!d&&this._trigger("focus",b);return e},open:function(){var b=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=a(a.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();
b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]"));a.length||(a=this.element.find(":tabbable"));a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).trigger("focus")},_keepFocus:function(b){function d(){var b=a.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===b||a.contains(this.uiDialog[0],
b)||this._focusTabbable()}b.preventDefault();d.call(this);this._delay(d)},_createWrapper:function(){this.uiDialog=a("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)b.preventDefault(),this.close(b);else if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var d=
this.uiDialog.find(":tabbable"),e=d.filter(":first"),f=d.filter(":last");b.target!==f[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==e[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){f.trigger("focus")}),b.preventDefault()):(this._delay(function(){e.trigger("focus")}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},
_createTitlebar:function(){this.uiDialogTitlebar=a("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:a("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,
"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});var b=a("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(b,"ui-dialog-title");this._title(b);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>");this._addClass(this.uiDialogButtonPane,
"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=a("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var b=this,d=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();a.isEmptyObject(d)||a.isArray(d)&&!d.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(a.each(d,function(d,e){e=a.isFunction(e)?{click:e,text:d}:e;e=a.extend({type:"button"},
e);var f=e.click;d={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text};delete e.click;delete e.icon;delete e.iconPosition;delete e.showLabel;delete e.icons;"boolean"===typeof e.text&&delete e.text;a("<button></button>",e).button(d).appendTo(b.uiButtonSet).on("click",function(){f.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var d=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,f){d._addClass(a(this),"ui-dialog-dragging");d._blockFrames();d._trigger("dragStart",e,b(f))},drag:function(a,e){d._trigger("drag",a,b(e))},stop:function(f,g){var h=g.offset.left-d.document.scrollLeft(),k=g.offset.top-d.document.scrollTop();e.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=k?"+":
"")+k,of:d.window};d._removeClass(a(this),"ui-dialog-dragging");d._unblockFrames();d._trigger("dragStop",f,b(g))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var d=this,e=this.options,f=e.resizable,g=this.uiDialog.css("position");f="string"===typeof f?f:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,
minWidth:e.minWidth,minHeight:this._minHeight(),handles:f,start:function(e,f){d._addClass(a(this),"ui-dialog-resizing");d._blockFrames();d._trigger("resizeStart",e,b(f))},resize:function(a,e){d._trigger("resize",a,b(e))},stop:function(f,g){var h=d.uiDialog.offset(),k=h.left-d.document.scrollLeft();h=h.top-d.document.scrollTop();e.height=d.uiDialog.height();e.width=d.uiDialog.width();e.position={my:"left top",at:"left"+(0<=k?"+":"")+k+" top"+(0<=h?"+":"")+h,of:d.window};d._removeClass(a(this),"ui-dialog-resizing");
d._unblockFrames();d._trigger("resizeStop",f,b(g))}}).css("position",g)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget();this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),d=a.inArray(this,b);-1!==d&&b.splice(d,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");a||(a=[],this.document.data("ui-dialog-instances",
a));return a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(b){var d=this,e=!1,f={};a.each(b,function(a,b){d._setOption(a,b);a in d.sizeRelatedOptions&&(e=!0);a in d.resizableRelatedOptions&&(f[a]=b)});e&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&
this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e,f=this.uiDialog;"disabled"!==b&&(this._super(b,d),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:a("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&((e=f.is(":data(ui-draggable)"))&&!d&&f.draggable("destroy"),!e&&d&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((e=f.is(":data(ui-resizable)"))&&
!d&&f.resizable("destroy"),e&&"string"===typeof d&&f.resizable("option","handles",d),e||!1===d||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});a.minWidth>a.width&&(a.width=a.minWidth);var b=this.uiDialog.css({height:"auto",width:a.width}).outerHeight();var d=Math.max(0,a.minHeight-b);var e="number"===typeof a.maxHeight?Math.max(0,a.maxHeight-
b):"none";"auto"===a.height?this.element.css({minHeight:d,maxHeight:e,height:"auto"}):this.element.height(Math.max(0,a.height-b));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&
(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=a("<div>").appendTo(this._appendTo());
this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays"));this.overlay.remove();this.overlay=null}}});!1!==a.uiBackCompat&&
a.widget("ui.dialog",a.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,b){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(b);this._superApply(arguments)}});a.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},
min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=a("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(a){if(void 0===
a)return this.options.value;this.options.value=this._constrainedValue(a);this._refreshValue()},_constrainedValue:function(a){void 0===a&&(a=this.options.value);this.indeterminate=!1===a;"number"!==typeof a&&(a=0);return this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value;this._super(a);this.options.value=this._constrainedValue(b);this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b));this._super(a,
b)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",a);this._toggleClass(null,"ui-state-disabled",!!a)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,d=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(d.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",
null,this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));b===this.options.max&&this._trigger("complete")}});a.widget("ui.selectmenu",[a.ui.formResetMixin,
{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();
this._rendered=!1;this.menuItems=a()},_drawButton:function(){var b=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(a){this.button.focus();a.preventDefault()}});this.element.hide();this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",
title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");var e=a("<span>").appendTo(this.button);this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(d).appendTo(this.button);!1!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){b._rendered||b._refreshMenu()})},_drawMenu:function(){var b=
this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(a,d){a.preventDefault();b._setSelection();b._select(d.item.data("ui-selectmenu-item"),a)},focus:function(a,d){d=d.item.data("ui-selectmenu-item");null!=
b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a));b.focusIndex=d.index;b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||
{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a=this.element.find("option");this.menu.empty();this._parseOptions(a);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;a.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},
open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=
!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var d=a("<span>");this._setText(d,b.label);this._addClass(d,"ui-selectmenu-text");return d},_renderMenu:function(b,d){var e=this,f="";a.each(d,function(d,g){g.optgroup!==f&&(d=a("<li>",{text:g.optgroup}),e._addClass(d,"ui-selectmenu-optgroup","ui-menu-divider"+(g.element.parent("optgroup").prop("disabled")?
" ui-state-disabled":"")),d.appendTo(b),f=g.optgroup);e._renderItemData(b,g)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,d){var e=a("<li>"),f=a("<div>",{title:d.element.attr("title")});d.disabled&&this._addClass(e,null,"ui-state-disabled");this._setText(f,d.label);return e.append(f).appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var d=".ui-menu-item";if(this.isOpen)var e=this.menuItems.eq(this.focusIndex).parent("li");
else e=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),d+=":not(.ui-state-disabled)";a="first"===a||"last"===a?e["first"===a?"prevAll":"nextAll"](d).eq(-1):e[a+"All"](d).eq(0);a.length&&this.menuInstance.focus(b,a)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){if(this.range){if(window.getSelection){var a=window.getSelection();a.removeAllRanges();a.addRange(this.range)}else this.range.select();
this.button.focus()}},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+a.ui.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var a=window.getSelection();a.rangeCount&&(this.range=a.getRangeAt(0))}else this.range=document.selection.createRange()},click:function(a){this._setSelection();this._toggle(a)},keydown:function(b){var d=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b);
d=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",
b);break;default:this.menu.trigger(b),d=!1}d&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var d=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a));this._setAria(a);this._trigger("select",b,{item:a});a.index!==d&&this._trigger("change",b,{item:a});this.close(b)},
_setAria:function(a){a=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":a,"aria-activedescendant":a});this.menu.attr("aria-activedescendant",a)},_setOption:function(a,b){if("icons"===a){var d=this.button.find("span.ui-icon");this._removeClass(d,null,this.options.icons.button)._addClass(d,null,b.button)}this._super(a,b);"appendTo"===a&&this.menuWrap.appendTo(this._appendTo());"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a);this.menuInstance.option("disabled",
a);this.button.attr("aria-disabled",a);this._toggleClass(this.button,null,"ui-state-disabled",a);this.element.prop("disabled",a);a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0));b&&b[0]||(b=this.element.closest(".ui-front, dialog"));b.length||(b=this.document[0].body);return b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,
"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;!1===a?this.button.css("width",""):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),
this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();a.disabled=this.element.prop("disabled");return a},_parseOptions:function(b){var d=this,e=[];b.each(function(b,f){e.push(d._parseOption(a(f),b))});this.items=e},_parseOption:function(a,b){var d=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:d.attr("label")||"",disabled:d.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();
this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);a.widget("ui.slider",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b=this.options;var d=this.element.find(".ui-slider-handle"),e=[];var f=b.values&&b.values.length||1;d.length>f&&(d.slice(f).remove(),
d=d.slice(0,f));for(b=d.length;b<f;b++)e.push("<span tabindex='0'></span>");this.handles=d.add(a(e.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(b){a(this).data("ui-slider-handle-index",b).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=
b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=a("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==b.range&&"max"!==b.range||this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,
this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(b){var d,e,f=this,g=this.options;if(g.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var h=this._normValueFromMouse({x:b.pageX,y:b.pageY});var k=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var l=
Math.abs(h-f.values(b));if(k>l||k===l&&(b===f._lastChangedValue||f.values(b)===g.min))k=l,d=a(this),e=b});if(!1===this._start(b,e))return!1;this._mouseSliding=!0;this._handleIndex=e;this._addClass(d,null,"ui-state-active");d.trigger("focus");var l=d.offset();this._clickOffset=a(b.target).parents().addBack().is(".ui-slider-handle")?{left:b.pageX-l.left-d.width()/2,top:b.pageY-l.top-d.height()/2-(parseInt(d.css("borderTopWidth"),10)||0)-(parseInt(d.css("borderBottomWidth"),10)||0)+(parseInt(d.css("marginTop"),
10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,e,h);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},
_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){if("horizontal"===this.orientation){var b=this.elementSize.width;a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+
b*a;return this._trimAlignValue(b)},_uiHash:function(a,b,d){var e={handle:this.handles[a],handleIndex:a,value:void 0!==b?b:this.value()};this._hasMultipleValues()&&(e.value=void 0!==b?b:this.values(a),e.values=d||this.values());return e},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(a,b){return this._trigger("start",a,this._uiHash(b))},_slide:function(a,b,d){var e=this.value(),f=this.values();if(this._hasMultipleValues()){var g=this.values(b?
0:1);e=this.values(b);2===this.options.values.length&&!0===this.options.range&&(d=0===b?Math.min(g,d):Math.max(g,d));f[b]=d}d!==e&&!1!==this._trigger("slide",a,this._uiHash(b,d,f))&&(this._hasMultipleValues()?this.values(b,d):this.value(d))},_stop:function(a,b){this._trigger("stop",a,this._uiHash(b))},_change:function(a,b){this._keySliding||this._mouseSliding||(this._lastChangedValue=b,this._trigger("change",a,this._uiHash(b)))},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),
this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,d){var e;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(d),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){var f=this.options.values;var g=arguments[0];for(e=0;e<f.length;e+=1)f[e]=this._trimAlignValue(g[e]),this._change(null,e);this._refreshValue()}else return this._hasMultipleValues()?this._values(b):this.value();else return this._values()},_setOption:function(b,
d){var e=0;"range"===b&&!0===this.options.range&&("min"===d?(this.options.value=this._values(0),this.options.values=null):"max"===d&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));a.isArray(this.options.values)&&(e=this.options.values.length);this._super(b,d);switch(b){case "orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();this.options.range&&
this._refreshRange(d);this.handles.css("horizontal"===d?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(b=e-1;0<=b;b--)this._change(null,b);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(a){this._super(a);
this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b;if(arguments.length){var d=this.options.values[a];return d=this._trimAlignValue(d)}if(this._hasMultipleValues()){d=this.options.values.slice();for(b=0;b<d.length;b+=1)d[b]=this._trimAlignValue(d[b]);return d}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?
this.options.step:1,d=(a-this._valueMin())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),d=this.options.step;a=Math.round((a-b)/d)*d+b;a>this.options.max&&(a-=d);this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();
var b=a.indexOf(".");return-1===b?0:a.length-b-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""});"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,d=this.options.range,e=this.options,f=this,g=this._animateOff?!1:e.animate,h={};if(this._hasMultipleValues())this.handles.each(function(d){q=(f.values(d)-f._valueMin())/(f._valueMax()-f._valueMin())*100;
h["horizontal"===f.orientation?"left":"bottom"]=q+"%";a(this).stop(1,1)[g?"animate":"css"](h,e.animate);if(!0===f.options.range)if("horizontal"===f.orientation){if(0===d)f.range.stop(1,1)[g?"animate":"css"]({left:q+"%"},e.animate);if(1===d)f.range[g?"animate":"css"]({width:q-b+"%"},{queue:!1,duration:e.animate})}else{if(0===d)f.range.stop(1,1)[g?"animate":"css"]({bottom:q+"%"},e.animate);if(1===d)f.range[g?"animate":"css"]({height:q-b+"%"},{queue:!1,duration:e.animate})}b=q});else{var k=this.value();
var l=this._valueMin();var p=this._valueMax();var q=p!==l?(k-l)/(p-l)*100:0;h["horizontal"===this.orientation?"left":"bottom"]=q+"%";this.handle.stop(1,1)[g?"animate":"css"](h,e.animate);if("min"===d&&"horizontal"===this.orientation)this.range.stop(1,1)[g?"animate":"css"]({width:q+"%"},e.animate);if("max"===d&&"horizontal"===this.orientation)this.range.stop(1,1)[g?"animate":"css"]({width:100-q+"%"},e.animate);if("min"===d&&"vertical"===this.orientation)this.range.stop(1,1)[g?"animate":"css"]({height:q+
"%"},e.animate);if("max"===d&&"vertical"===this.orientation)this.range.stop(1,1)[g?"animate":"css"]({height:100-q+"%"},e.animate)}},_handleEvents:{keydown:function(b){var d,e=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding){this._keySliding=!0;this._addClass(a(b.target),
null,"ui-state-active");var f=this._start(b,e);if(!1===f)return}}var g=this.options.step;f=this._hasMultipleValues()?d=this.values(e):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(f+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(f-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===
this._valueMax())return;d=this._trimAlignValue(f+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===this._valueMin())return;d=this._trimAlignValue(f-g)}this._slide(b,e,d)},keyup:function(b){var d=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,d),this._change(b,d),this._removeClass(a(b.target),null,"ui-state-active"))}}});a.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all",
"ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,
{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),d=this.element;a.each(["min","max","step"],function(a,e){a=d.attr(e);null!=a&&a.length&&(b[e]=a)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",
a))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function d(){this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e}))}var e=this.element[0]===a.ui.safeActiveElement(this.document[0])?
this.previous:this.element.val();b.preventDefault();d.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;d.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},
_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),
"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:!1});this.buttons.last().button({icon:this.options.icons.down,showLabel:!1});this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(b){var d=this.options,e=a.ui.keyCode;switch(b.keyCode){case e.UP:return this._repeat(null,1,b),!0;
case e.DOWN:return this._repeat(null,-1,b),!0;case e.PAGE_UP:return this._repeat(null,d.page,b),!0;case e.PAGE_DOWN:return this._repeat(null,-d.page,b),!0}return!1},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,b,d){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,d)},a);this._spin(b*this.options.step,d)},_spin:function(a,b){var d=this.value()||0;this.counter||
(this.counter=1);d=this._adjustValue(d+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:d})||(this._value(d),this.counter++)},_increment:function(b){var d=this.options.incremental;return d?a.isFunction(d)?d(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");
return-1===b?0:a.length-b-1},_adjustValue:function(a){var b=this.options;var d=null!==b.min?b.min:0;a=d+Math.round((a-d)/b.step)*b.step;a=parseFloat(a.toFixed(this._precision()));return null!==b.max&&a>b.max?b.max:null!==b.min&&a<b.min?b.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var d=this._parse(this.element.val());this.options[a]=
b;this.element.val(this._format(d))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof b||(b=this._parse(b)),"icons"===a&&(d=this.buttons.first().find(".ui-icon"),this._removeClass(d,null,this.options.icons.up),this._addClass(d,null,b.up),d=this.buttons.last().find(".ui-icon"),this._removeClass(d,null,this.options.icons.down),this._addClass(d,null,b.down)),this._super(a,b)},_setOptionDisabled:function(a){this._super(a);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!a);this.element.prop("disabled",
!!a);this.buttons.button(a?"disable":"enable")},_setOptions:h(function(a){this._super(a)}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){if(""!==a){var d=this._parse(a);null!==d&&(b||(d=this._adjustValue(d)),a=this._format(d))}this.element.val(a);this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:h(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&
(this._spin((a||1)*this.options.step),this._stop())},stepDown:h(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:h(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:h(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length)return this._parse(this.element.val());h(this._value).call(this,a)},widget:function(){return this.uiSpinner}});!1!==a.uiBackCompat&&a.widget("ui.spinner",
a.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});a.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,
show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var d=b.href.replace(a,"");var e=location.href.replace(a,"");try{d=decodeURIComponent(d)}catch(y){}try{e=decodeURIComponent(e)}catch(y){}return 1<b.hash.length&&d===e}}(),_create:function(){var b=this,d=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,d.collapsible);this._processTabs();d.active=this._initialActive();
a.isArray(d.disabled)&&(d.disabled=a.unique(d.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(d.active):a();this._refresh();this.active.length&&this.load(d.active)},_initialActive:function(){var b=this.options.active,d=this.options.collapsible,e=location.hash.substring(1);null===b&&(e&&this.tabs.each(function(d,f){if(a(f).attr("aria-controls")===e)return b=d,!1}),
null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=d?!1:0));!d&&!1===b&&this.anchors.length&&(b=0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var d=a(a.ui.safeActiveElement(this.document[0])).closest("li"),e=this.tabs.index(d),f=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:e++;
break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1;e--;break;case a.ui.keyCode.END:e=this.anchors.length-1;break;case a.ui.keyCode.HOME:e=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(e);return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(e===this.options.active?!1:e);return;default:return}b.preventDefault();clearTimeout(this.activating);e=this._focusNextTab(e,f);b.ctrlKey||b.metaKey||(d.attr("aria-selected",
"false"),this.tabs.eq(e).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",e)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+
1,!0)),!0},_findNextTab:function(b,d){function e(){b>f&&(b=0);0>b&&(b=f);return b}for(var f=this.tabs.length-1;-1!==a.inArray(e(),this.options.disabled);)b=d?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).trigger("focus");return a},_setOption:function(a,b){"active"===a?this._activate(b):(this._super(a,b),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",null,b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===
a&&this._setupHeightStyle(b))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,d=this.tablist.children(":has(a[href])");b.disabled=a.map(d.filter(".ui-state-disabled"),function(a){return d.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,
b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",
tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,d=this.tabs,e=this.anchors,f=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(b){a(this).is(".ui-state-disabled")&&
b.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=a();this.anchors.each(function(d,e){var f=a(e).uniqueId().attr("id"),
g=a(e).closest("li"),h=g.attr("aria-controls");if(b._isLocal(e)){d=e.hash;e=d.substring(1);var k=b.element.find(b._sanitizeSelector(d))}else e=g.attr("aria-controls")||a({}).uniqueId()[0].id,k=b.element.find("#"+e),k.length||(k=b._createPanel(e),k.insertAfter(b.panels[d-1]||b.tablist)),k.attr("aria-live","polite");k.length&&(b.panels=b.panels.add(k));h&&g.data("ui-tabs-aria-controls",h);g.attr({"aria-controls":e,"aria-labelledby":f});k.attr("aria-labelledby",f)});this.panels.attr("role","tabpanel");
this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");d&&(this._off(d.not(this.tabs)),this._off(e.not(this.anchors)),this._off(f.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var d,e;a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(e=0;d=this.tabs[e];e++)d=a(d),!0===b||-1!==a.inArray(e,b)?(d.attr("aria-disabled",
"true"),this._addClass(d,null,"ui-state-disabled")):(d.removeAttr("aria-disabled"),this._removeClass(d,null,"ui-state-disabled"));this.options.disabled=b;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var d={};b&&a.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});
this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d=this.element.parent();if("fill"===b){var e=d.height();e-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(e-=b.outerHeight(!0))});this.element.children().not(this.panels).each(function(){e-=a(this).outerHeight(!0)});this.panels.each(function(){a(this).height(Math.max(0,
e-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else"auto"===b&&(e=0,this.panels.each(function(){e=Math.max(e,a(this).height("").height())}).height(e))},_eventHandler:function(b){var d=this.options,e=this.active,f=a(b.currentTarget).closest("li"),g=f[0]===e[0],h=g&&d.collapsible,k=h?a():this._getPanelForTab(f),l=e.length?this._getPanelForTab(e):a();e={oldTab:e,oldPanel:l,newTab:h?a():f,newPanel:k};b.preventDefault();f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||
this.running||g&&!d.collapsible||!1===this._trigger("beforeActivate",b,e)||(d.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),l.length||k.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),k.length&&this.load(this.tabs.index(f),b),this._toggle(b,e))},_toggle:function(b,d){function e(){g.running=!1;g._trigger("activate",b,d)}function f(){g._addClass(d.newTab.closest("li"),"ui-tabs-active","ui-state-active");h.length&&g.options.show?g._show(h,g.options.show,
e):(h.show(),e())}var g=this,h=d.newPanel,k=d.oldPanel;this.running=!0;k.length&&this.options.hide?this._hide(k,this.options.hide,function(){g._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active");f()}):(this._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),k.hide(),f());k.attr("aria-hidden","true");d.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});h.length&&k.length?d.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===
a(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr("aria-hidden","false");d.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+
a.ui.escapeSelector(b)+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var b=a(this),d=b.data("ui-tabs-aria-controls");d?b.attr("aria-controls",
d).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(void 0===b?d=!1:(b=this._getIndex(b),d=a.isArray(d)?a.map(d,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,d){return d!==b?d:null})),this._setOptionDisabled(d))},disable:function(b){var d=this.options.disabled;if(!0!==d){if(void 0===b)d=!0;else{b=this._getIndex(b);if(-1!==
a.inArray(b,d))return;d=a.isArray(d)?a.merge([b],d).sort():[b]}this._setOptionDisabled(d)}},load:function(b,d){b=this._getIndex(b);var e=this,f=this.tabs.eq(b);b=f.find(".ui-tabs-anchor");var g=this._getPanelForTab(f),h={tab:f,panel:g},k=function(a,b){"abort"===b&&e.panels.stop(!1,!0);e._removeClass(f,"ui-tabs-loading");g.removeAttr("aria-busy");a===e.xhr&&delete e.xhr};this._isLocal(b[0])||(this.xhr=a.ajax(this._ajaxSettings(b,d,h)))&&"canceled"!==this.xhr.statusText&&(this._addClass(f,"ui-tabs-loading"),
g.attr("aria-busy","true"),this.xhr.done(function(a,b,f){setTimeout(function(){g.html(a);e._trigger("load",d,h);k(f,b)},1)}).fail(function(a,b){setTimeout(function(){k(a,b)},1)}))},_ajaxSettings:function(b,d,e){var f=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(b,g){return f._trigger("beforeLoad",d,a.extend({jqXHR:b,ajaxSettings:g},e))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&
a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});a.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,d){var e=(b.attr("aria-describedby")||
"").split(/\s+/);e.push(d);b.data("ui-tooltip-id",d).attr("aria-describedby",a.trim(e.join(" ")))},_removeDescribedBy:function(b){var d=b.data("ui-tooltip-id"),e=(b.attr("aria-describedby")||"").split(/\s+/);d=a.inArray(d,e);-1!==d&&e.splice(d,1);b.removeData("ui-tooltip-id");(e=a.trim(e.join(" ")))?b.attr("aria-describedby",e):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=a("<div>").attr({role:"log",
"aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=a([])},_setOption:function(b,d){var e=this;this._super(b,d);"content"===b&&a.each(this.tooltips,function(a,b){e._updateContent(b.element)})},_setOptionDisabled:function(a){this[a?"_disable":"_enable"]()},_disable:function(){var b=this;a.each(this.tooltips,function(d,e){d=a.Event("blur");d.target=d.currentTarget=e.element[0];b.close(d,
!0)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var b=a(this);if(b.is("[title]"))return b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))});this.disabledTitles=a([])},open:function(b){var d=this,e=a(b?b.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&
(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&e.parents().each(function(){var b=a(this);if(b.data("ui-tooltip-open")){var e=a.Event("blur");e.target=e.currentTarget=this;d.close(e,!0)}b.attr("title")&&(b.uniqueId(),d.parents[this.id]={element:this,title:b.attr("title")},b.attr("title",""))}),this._registerCloseHandlers(b,e),this._updateContent(e,b))},_updateContent:function(a,b){var d=this.options.content;var e=this,f=b?b.type:null;
if("string"===typeof d||d.nodeType||d.jquery)return this._open(b,a,d);(d=d.call(a[0],function(d){e._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=f),this._open(b,a,d))})}))&&this._open(b,a,d)},_open:function(b,d,e){function f(a){h.of=a;k.is(":hidden")||k.position(h)}var g,h=a.extend({},this.options.position);if(e)if(g=this._find(d))g.tooltip.find(".ui-tooltip-content").html(e);else{d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title"));g=this._tooltip(d);var k=
g.tooltip;this._addDescribedBy(d,k.attr("id"));k.find(".ui-tooltip-content").html(e);this.liveRegion.children().hide();e=a("<div>").html(k.find(".ui-tooltip-content").html());e.removeAttr("name").find("[name]").removeAttr("name");e.removeAttr("id").find("[id]").removeAttr("id");e.appendTo(this.liveRegion);this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:f}),f(b)):k.position(a.extend({of:d},this.options.position));k.hide();this._show(k,this.options.show);if(this.options.track&&
this.options.show&&this.options.show.delay)var l=this.delayedShow=setInterval(function(){k.is(":visible")&&(f(h.of),clearInterval(l))},a.fx.interval);this._trigger("open",b,{tooltip:k})}},_registerCloseHandlers:function(b,d){var e={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),b.currentTarget=d[0],this.close(b,!0))}};d[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(d).tooltip)});b&&"mouseover"!==b.type||(e.mouseleave="close");b&&"focusin"!==b.type||(e.focusout=
"close");this._on(!0,d,e)},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);if(f){var g=f.tooltip;f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,g.stop(!0),this._hide(g,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),
this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,e){a(e.element).attr("title",e.title);delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:g}),f.hiding||(f.closing=!1))}else e.removeData("ui-tooltip-open")},_tooltip:function(b){var d=a("<div>").attr("role","tooltip"),e=a("<div>").appendTo(d),f=d.uniqueId().attr("id");this._addClass(e,"ui-tooltip-content");this._addClass(d,"ui-tooltip","ui-widget ui-widget-content");d.appendTo(this._appendTo(b));
return this.tooltips[f]={element:b,tooltip:d}},_find:function(a){return(a=a.data("ui-tooltip-id"))?this.tooltips[a]:null},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_appendTo:function(a){a=a.closest(".ui-front, dialog");a.length||(a=this.document[0].body);return a},_destroy:function(){var b=this;a.each(this.tooltips,function(d,e){var f=a.Event("blur");e=e.element;f.target=f.currentTarget=e[0];b.close(f,!0);a("#"+d).remove();e.data("ui-tooltip-title")&&(e.attr("title")||
e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))});this.liveRegion.remove()}});!1!==a.uiBackCompat&&a.widget("ui.tooltip",a.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var a=this._superApply(arguments);this.options.tooltipClass&&a.tooltip.addClass(this.options.tooltipClass);return a}});a.effects={effect:{}};(function(a,b){function d(a,b,d){var e=p[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);return isNaN(a)?b.def:e.mod?
(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a}function e(b){var d=k(),e=d._rgba=[];b=b.toLowerCase();r(h,function(a,f){a=(a=f.re.exec(b))&&f.parse(a);f=f.space||"rgba";if(a)return a=d[f](a),d[l[f].cache]=a[l[f].cache],e=d._rgba=a._rgba,!1});return e.length?("0,0,0,0"===e.join()&&a.extend(e,t.transparent),d):t[b]}function f(a,b,d){d=(d+1)%1;return 1>6*d?a+(b-a)*d*6:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],k=a.Color=function(b,d,e,f){return new a.Color.fn.parse(b,d,e,f)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},n=k.support={},q=a("<p>")[0],r=a.each;q.style.cssText="background-color:rgba(1,1,1,.5)";n.rgba=
-1<q.style.backgroundColor.indexOf("rgba");r(l,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});k.fn=a.extend(k.prototype,{parse:function(f,g,h,p){if(f===b)return this._rgba=[null,null,null,null],this;if(f.jquery||f.nodeType)f=a(f).css(g),g=b;var n=this,q=a.type(f),u=this._rgba=[];g!==b&&(f=[f,g,h,p],q="array");if("string"===q)return this.parse(e(f)||t._default);if("array"===q)return r(l.rgba.props,function(a,b){u[b.idx]=d(f[b.idx],b)}),this;if("object"===q)return f instanceof
k?r(l,function(a,b){f[b.cache]&&(n[b.cache]=f[b.cache].slice())}):r(l,function(b,e){var g=e.cache;r(e.props,function(a,b){if(!n[g]&&e.to){if("alpha"===a||null==f[a])return;n[g]=e.to(n._rgba)}n[g][b.idx]=d(f[a],b,!0)});n[g]&&0>a.inArray(null,n[g].slice(0,3))&&(n[g][3]=1,e.from&&(n._rgba=e.from(n[g])))}),this},is:function(a){var b=k(a),d=!0,e=this;r(l,function(a,f){var g=b[f.cache];if(g){var h=e[f.cache]||f.to&&f.to(e._rgba)||[];r(f.props,function(a,b){if(null!=g[b.idx])return d=g[b.idx]===h[b.idx]})}return d});
return d},_space:function(){var a=[],b=this;r(l,function(d,e){b[e.cache]&&a.push(d)});return a.pop()},transition:function(a,b){var e=k(a);a=e._space();var f=l[a],g=0===this.alpha()?k("transparent"):this,h=g[f.cache]||f.to(g._rgba),n=h.slice();e=e[f.cache];r(f.props,function(a,f){a=f.idx;var g=h[a],k=e[a],l=p[f.type]||{};null!==k&&(null===g?n[a]=k:(l.mod&&(k-g>l.mod/2?g+=l.mod:g-k>l.mod/2&&(g-=l.mod)),n[a]=d((k-g)*b+g,f)))});return this[a](n)},blend:function(b){if(1===this._rgba[3])return this;var d=
this._rgba.slice(),e=d.pop(),f=k(b)._rgba;return k(a.map(d,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var b="rgba(",d=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===d[3]&&(d.pop(),b="rgb(");return b+d.join()+")"},toHslaString:function(){var b="hsla(",d=a.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===d[3]&&(d.pop(),b="hsl(");return b+d.join()+")"},toHexString:function(b){var d=this._rgba.slice(),e=d.pop();b&&d.push(~~(255*
e));return"#"+a.map(d,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});k.fn.parse.prototype=k.fn;l.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,d=a[1]/255,e=a[2]/255;a=a[3];var f=Math.max(b,d,e),g=Math.min(b,d,e),h=f-g,k=f+g,l=.5*k;return[Math.round(g===f?0:b===f?60*(d-e)/h+360:d===f?60*(e-b)/h+120:60*(b-d)/h+240)%360,0===h?0:.5>=l?h/k:
h/(2-k),l,null==a?1:a]};l.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,d=a[1],e=a[2];a=a[3];d=.5>=e?e*(1+d):e+d-e*d;e=2*e-d;return[Math.round(255*f(e,d,b+1/3)),Math.round(255*f(e,d,b)),Math.round(255*f(e,d,b-1/3)),a]};r(l,function(e,f){var h=f.props,l=f.cache,p=f.to,n=f.from;k.fn[e]=function(e){p&&!this[l]&&(this[l]=p(this._rgba));if(e===b)return this[l].slice();var f=a.type(e),g="array"===f||"object"===f?e:arguments,q=this[l].slice();r(h,
function(a,b){a=g["object"===f?a:b.idx];null==a&&(a=q[b.idx]);q[b.idx]=d(a,b)});if(n){var t=k(n(q));t[l]=q;return t}return k(q)};r(h,function(b,d){k.fn[b]||(k.fn[b]=function(f){var h=a.type(f),k="alpha"===b?this._hsla?"hsla":"rgba":e,l=this[k](),p=l[d.idx];if("undefined"===h)return p;"function"===h&&(f=f.call(this,p),h=a.type(f));if(null==f&&d.empty)return this;"string"===h&&(h=g.exec(f))&&(f=p+parseFloat(h[2])*("+"===h[1]?1:-1));l[d.idx]=f;return this[k](l)})})});k.hook=function(b){b=b.split(" ");
r(b,function(b,d){a.cssHooks[d]={set:function(b,f){var g,h="";if("transparent"!==f&&("string"!==a.type(f)||(g=e(f)))){f=k(g||f);if(!n.rgba&&1!==f._rgba[3]){for(g="backgroundColor"===d?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(V){}f=f.blend(h&&"transparent"!==h?h:"_default")}f=f.toRgbaString()}try{b.style[d]=f}catch(V){}}};a.fx.step[d]=function(b){b.colorInit||(b.start=k(b.elem,d),b.end=k(b.end),b.colorInit=!0);a.cssHooks[d].set(b.elem,
b.start.transition(b.end,b.pos))}})};k.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};r(["Top","Right","Bottom","Left"],function(d,e){b["border"+e+"Color"]=a});return b}};var t=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",
olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(a);(function(){function b(b){var d=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,e={};if(d&&d.length&&d[0]&&d[d[0]])for(b=d.length;b--;){var f=d[b];"string"===typeof d[f]&&(e[a.camelCase(f)]=d[f])}else for(f in d)"string"===typeof d[f]&&(e[f]=d[f]);return e}var d=["add","remove","toggle"],
e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,d){a.fx.step[d]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)a.style(b.elem,d,b.end),b.setAttr=!0}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(f,g,h,k){var l=a.speed(g,h,k);return this.queue(function(){var g=
a(this),h=g.attr("class")||"",k=l.children?g.find("*").addBack():g;k=k.map(function(){return{el:a(this),start:b(this)}});var p=function(){a.each(d,function(a,b){if(f[b])g[b+"Class"](f[b])})};p();k=k.map(function(){this.end=b(this.el[0]);var d=this.start,f=this.end,g={},h;for(h in f){var k=f[h];d[h]===k||e[h]||!a.fx.step[h]&&isNaN(parseFloat(k))||(g[h]=k)}this.diff=g;return this});g.attr("class",h);k=k.map(function(){var b=this,d=a.Deferred(),e=a.extend({},l,{queue:!1,complete:function(){d.resolve(b)}});
this.el.animate(this.diff,e);return d.promise()});a.when.apply(a,k.get()).done(function(){p();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});l.complete.call(g[0])})})};a.fn.extend({addClass:function(b){return function(d,e,f,g){return e?a.effects.animateClass.call(this,{add:d},e,f,g):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(d,e,f,g){return 1<arguments.length?a.effects.animateClass.call(this,{remove:d},e,f,g):b.apply(this,
arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(d,e,f,g,h){return"boolean"===typeof e||void 0===e?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,d,e,f,g){return a.effects.animateClass.call(this,{add:d,remove:b},e,f,g)}})})();(function(){function b(b,d,e,f){a.isPlainObject(b)&&(d=b,b=b.effect);b={effect:b};null==d&&(d={});a.isFunction(d)&&(f=d,
e=null,d={});if("number"===typeof d||a.fx.speeds[d])f=e,e=d,d={};a.isFunction(e)&&(f=e,e=null);d&&a.extend(b,d);e=e||d.duration;b.duration=a.fx.off?0:"number"===typeof e?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default;b.complete=f||d.complete;return b}function d(b){return!b||"number"===typeof b||a.fx.speeds[b]||"string"===typeof b&&!a.effects.effect[b]||a.isFunction(b)||"object"===typeof b&&!b.effect?!0:!1}function e(a,b){var d=b.outerWidth();b=b.outerHeight();a=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(a)||
["",0,d,b,0];return{top:parseFloat(a[1])||0,right:"auto"===a[2]?d:parseFloat(a[2]),bottom:"auto"===a[3]?b:parseFloat(a[3]),left:parseFloat(a[4])||0}}a.expr&&a.expr.filters&&a.expr.filters.animated&&(a.expr.filters.animated=function(b){return function(d){return!!a(d).data("ui-effects-animated")||b(d)}}(a.expr.filters.animated));!1!==a.uiBackCompat&&a.extend(a.effects,{save:function(a,b){for(var d=0,e=b.length;d<e;d++)null!==b[d]&&a.data("ui-effects-"+b[d],a[0].style[b[d]])},restore:function(a,b){for(var d,
e=0,f=b.length;e<f;e++)null!==b[e]&&(d=a.data("ui-effects-"+b[e]),a.css(b[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},e=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:b.width(),height:b.height()},g=document.activeElement;
try{g.id}catch(G){g=document.body}b.wrap(e);(b[0]===g||a.contains(b[0],g))&&a(g).trigger("focus");e=b.parent();"static"===b.css("position")?(e.css({position:"relative"}),b.css({position:"relative"})):(a.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,e){d[e]=b.css(e);isNaN(parseInt(d[e],10))&&(d[e]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(f);return e.css(d).show()},removeWrapper:function(b){var d=
document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).trigger("focus"));return b}});a.extend(a.effects,{version:"1.12.1",define:function(b,d,e){e||(e=d,d="effect");a.effects.effect[b]=e;a.effects.effect[b].mode=d;return e},scaledDimensions:function(a,b,d){if(0===b)return{height:0,width:0,outerHeight:0,outerWidth:0};var e="horizontal"!==d?(b||100)/100:1;b="vertical"!==d?(b||100)/100:1;return{height:a.height()*b,width:a.width()*
e,outerHeight:a.outerHeight()*b,outerWidth:a.outerWidth()*e}},clipToBox:function(a){return{width:a.clip.right-a.clip.left,height:a.clip.bottom-a.clip.top,left:a.clip.left,top:a.clip.top}},unshift:function(a,b,d){var e=a.queue();1<b&&e.splice.apply(e,[1,0].concat(e.splice(b,d)));a.dequeue()},saveStyle:function(a){a.data("ui-effects-style",a[0].style.cssText)},restoreStyle:function(a){a[0].style.cssText=a.data("ui-effects-style")||"";a.removeData("ui-effects-style")},mode:function(a,b){a=a.is(":hidden");
"toggle"===b&&(b=a?"show":"hide");if(a?"hide"===b:"show"===b)b="none";return b},getBaseline:function(a,b){switch(a[0]){case "top":var d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/b.height}switch(a[1]){case "left":a=0;break;case "center":a=.5;break;case "right":a=1;break;default:a=a[1]/b.width}return{x:a,y:d}},createPlaceholder:function(b){var d=b.css("position"),e=b.position();b.css({marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),
marginRight:b.css("marginRight")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight());if(/^(static|relative)/.test(d)){d="absolute";var f=a("<"+b[0].nodeName+">").insertAfter(b).css({display:/^(inline|ruby)/.test(b.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight"),"float":b.css("float")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).addClass("ui-effects-placeholder");
b.data("ui-effects-placeholder",f)}b.css({position:d,left:e.left,top:e.top});return f},removePlaceholder:function(a){var b=a.data("ui-effects-placeholder");b&&(b.remove(),a.removeData("ui-effects-placeholder"))},cleanUp:function(b){a.effects.restoreStyle(b);a.effects.removePlaceholder(b)},setTransition:function(b,d,e,f){f=f||{};a.each(d,function(a,d){a=b.cssUnit(d);0<a[0]&&(f[d]=a[0]*e+a[1])});return f}});a.fn.extend({effect:function(){function d(b){function d(){k.removeData("ui-effects-animated");
a.effects.cleanUp(k);"hide"===e.mode&&k.hide();h()}function h(){a.isFunction(l)&&l.call(k[0]);a.isFunction(b)&&b()}var k=a(this);e.mode=n.shift();!1===a.uiBackCompat||g?"none"===e.mode?(k[p](),h()):f.call(k[0],e,d):(k.is(":hidden")?"hide"===p:"show"===p)?(k[p](),h()):f.call(k[0],e,h)}var e=b.apply(this,arguments),f=a.effects.effect[e.effect],g=f.mode,h=e.queue,k=h||"fx",l=e.complete,p=e.mode,n=[],q=function(b){var d=a(this),e=a.effects.mode(d,p)||g;d.data("ui-effects-animated",!0);n.push(e);g&&("show"===
e||e===g&&"hide"===e)&&d.show();g&&"none"===e||a.effects.saveStyle(d);a.isFunction(b)&&b()};return a.fx.off||!f?p?this[p](e.duration,l):this.each(function(){l&&l.call(this)}):!1===h?this.each(q).each(d):this.queue(k,q).queue(k,d)},show:function(a){return function(e){if(d(e))return a.apply(this,arguments);var f=b.apply(this,arguments);f.mode="show";return this.effect.call(this,f)}}(a.fn.show),hide:function(a){return function(e){if(d(e))return a.apply(this,arguments);var f=b.apply(this,arguments);f.mode=
"hide";return this.effect.call(this,f)}}(a.fn.hide),toggle:function(a){return function(e){if(d(e)||"boolean"===typeof e)return a.apply(this,arguments);var f=b.apply(this,arguments);f.mode="toggle";return this.effect.call(this,f)}}(a.fn.toggle),cssUnit:function(b){var d=this.css(b),e=[];a.each(["em","px","%","pt"],function(a,b){0<d.indexOf(b)&&(e=[parseFloat(d),b])});return e},cssClip:function(a){return a?this.css("clip","rect("+a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px)"):e(this.css("clip"),
this)},transfer:function(b,d){var e=a(this),f=a(b.to),g="fixed"===f.css("position"),h=a("body"),k=g?h.scrollTop():0;h=g?h.scrollLeft():0;var l=f.offset();f={top:l.top-k,left:l.left-h,height:f.innerHeight(),width:f.innerWidth()};l=e.offset();var p=a("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(b.className).css({top:l.top-k,left:l.left-h,height:e.innerHeight(),width:e.innerWidth(),position:g?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){p.remove();a.isFunction(d)&&
d()})}});a.fx.step.clip=function(b){b.clipInit||(b.start=a(b.elem).cssClip(),"string"===typeof b.end&&(b.end=e(b.end,b.elem)),b.clipInit=!0);a(b.elem).cssClip({top:b.pos*(b.end.top-b.start.top)+b.start.top,right:b.pos*(b.end.right-b.start.right)+b.start.right,bottom:b.pos*(b.end.bottom-b.start.bottom)+b.start.bottom,left:b.pos*(b.end.left-b.start.left)+b.start.left})}})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,d){b[d]=function(b){return Math.pow(b,a+2)}});a.extend(b,
{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,d=4;a<((b=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,d){a.easing["easeIn"+b]=d;a.easing["easeOut"+b]=function(a){return 1-d(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?d(2*
a)/2:1-d(-2*a+2)/2}})})();a.effects.define("blind","hide",function(b,d){var e={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},f=a(this),g=b.direction||"up",h=f.cssClip(),k={clip:a.extend({},h)},l=a.effects.createPlaceholder(f);k.clip[e[g][0]]=k.clip[e[g][1]];"show"===b.mode&&(f.cssClip(k.clip),l&&l.css(a.effects.clipToBox(k)),k.clip=h);l&&l.animate(a.effects.clipToBox(k),b.duration,b.easing);f.animate(k,
{queue:!1,duration:b.duration,easing:b.easing,complete:d})});a.effects.define("bounce",function(b,d){var e=a(this),f=b.mode,g="hide"===f;var h="show"===f;var k=b.direction||"up";f=b.distance;var l=b.times||5,p=2*l+(h||g?1:0),n=b.duration/p;b=b.easing;var q="up"===k||"down"===k?"top":"left";k="up"===k||"left"===k;var r=0,t=e.queue().length;a.effects.createPlaceholder(e);var v=e.css(q);f||(f=e["top"===q?"outerHeight":"outerWidth"]()/3);h&&(h={opacity:1},h[q]=v,e.css("opacity",0).css(q,k?2*-f:2*f).animate(h,
n,b));g&&(f/=Math.pow(2,l-1));h={};for(h[q]=v;r<l;r++)v={},v[q]=(k?"-=":"+=")+f,e.animate(v,n,b).animate(h,n,b),f=g?2*f:f/2;g&&(v={opacity:0},v[q]=(k?"-=":"+=")+f,e.animate(v,n,b));e.queue(d);a.effects.unshift(e,t,p+1)});a.effects.define("clip","hide",function(b,d){var e={},f=a(this);var g=b.direction||"vertical";var h="both"===g,k=h||"horizontal"===g;h=h||"vertical"===g;g=f.cssClip();e.clip={top:h?(g.bottom-g.top)/2:g.top,right:k?(g.right-g.left)/2:g.right,bottom:h?(g.bottom-g.top)/2:g.bottom,left:k?
(g.right-g.left)/2:g.left};a.effects.createPlaceholder(f);"show"===b.mode&&(f.cssClip(e.clip),e.clip=g);f.animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:d})});a.effects.define("drop","hide",function(b,d){var e=a(this),f="show"===b.mode;var g=b.direction||"left";var h="up"===g||"down"===g?"top":"left",k="up"===g||"left"===g?"-=":"+=",l="+="===k?"-=":"+=",p={opacity:0};a.effects.createPlaceholder(e);g=b.distance||e["top"===h?"outerHeight":"outerWidth"](!0)/2;p[h]=k+g;f&&(e.css(p),
p[h]=l+g,p.opacity=1);e.animate(p,{queue:!1,duration:b.duration,easing:b.easing,complete:d})});a.effects.define("explode","hide",function(b,d){function e(){t.push(this);t.length===h*k&&(l.css({visibility:"visible"}),a(t).remove(),d())}var f,g,h=b.pieces?Math.round(Math.sqrt(b.pieces)):3,k=h,l=a(this),p="show"===b.mode,n=l.show().css("visibility","hidden").offset(),q=Math.ceil(l.outerWidth()/k),r=Math.ceil(l.outerHeight()/h),t=[];for(f=0;f<h;f++){var v=n.top+f*r;var C=f-(h-1)/2;for(g=0;g<k;g++){var J=
n.left+g*q;var E=g-(k-1)/2;l.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*q,top:-f*r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:q,height:r,left:J+(p?E*q:0),top:v+(p?C*r:0),opacity:p?0:1}).animate({left:J+(p?0:E*q),top:v+(p?0:C*r),opacity:p?1:0},b.duration||500,b.easing,e)}}});a.effects.define("fade","toggle",function(b,d){var e="show"===b.mode;a(this).css("opacity",e?0:1).animate({opacity:e?1:0},
{queue:!1,duration:b.duration,easing:b.easing,complete:d})});a.effects.define("fold","hide",function(b,d){var e=a(this),f=b.mode,g="show"===f;f="hide"===f;var h=b.size||15,k=/([0-9]+)%/.exec(h),l=b.horizFirst?["right","bottom"]:["bottom","right"],p=b.duration/2,n=a.effects.createPlaceholder(e),q=e.cssClip(),r={clip:a.extend({},q)},t={clip:a.extend({},q)},v=[q[l[0]],q[l[1]]],C=e.queue().length;k&&(h=parseInt(k[1],10)/100*v[f?0:1]);r.clip[l[0]]=h;t.clip[l[0]]=h;t.clip[l[1]]=0;g&&(e.cssClip(t.clip),
n&&n.css(a.effects.clipToBox(t)),t.clip=q);e.queue(function(d){n&&n.animate(a.effects.clipToBox(r),p,b.easing).animate(a.effects.clipToBox(t),p,b.easing);d()}).animate(r,p,b.easing).animate(t,p,b.easing).queue(d);a.effects.unshift(e,C,4)});a.effects.define("highlight","show",function(b,d){var e=a(this),f={backgroundColor:e.css("backgroundColor")};"hide"===b.mode&&(f.opacity=0);a.effects.saveStyle(e);e.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,
easing:b.easing,complete:d})});a.effects.define("size",function(b,d){var e=a(this),f=["fontSize"],g=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var k=b.mode;var l="effect"!==k,p=b.scale||"both";var n=b.origin||["middle","center"];var q=e.css("position"),r=e.position(),t=a.effects.scaledDimensions(e),v=b.from||t,C=b.to||a.effects.scaledDimensions(e,0);a.effects.createPlaceholder(e);"show"===k&&(k=v,v=C,C=
k);var J=v.height/t.height;var E=v.width/t.width;var N=C.height/t.height;var I=C.width/t.width;if("box"===p||"both"===p)J!==N&&(v=a.effects.setTransition(e,g,J,v),C=a.effects.setTransition(e,g,N,C)),E!==I&&(v=a.effects.setTransition(e,h,E,v),C=a.effects.setTransition(e,h,I,C));"content"!==p&&"both"!==p||J===N||(v=a.effects.setTransition(e,f,J,v),C=a.effects.setTransition(e,f,N,C));n&&(n=a.effects.getBaseline(n,t),v.top=(t.outerHeight-v.outerHeight)*n.y+r.top,v.left=(t.outerWidth-v.outerWidth)*n.x+
r.left,C.top=(t.outerHeight-C.outerHeight)*n.y+r.top,C.left=(t.outerWidth-C.outerWidth)*n.x+r.left);e.css(v);if("content"===p||"both"===p)g=g.concat(["marginTop","marginBottom"]).concat(f),h=h.concat(["marginLeft","marginRight"]),e.find("*[width]").each(function(){var d=a(this),e=a.effects.scaledDimensions(d),f={height:e.height*J,width:e.width*E,outerHeight:e.outerHeight*J,outerWidth:e.outerWidth*E};e={height:e.height*N,width:e.width*I,outerHeight:e.height*N,outerWidth:e.width*I};J!==N&&(f=a.effects.setTransition(d,
g,J,f),e=a.effects.setTransition(d,g,N,e));E!==I&&(f=a.effects.setTransition(d,h,E,f),e=a.effects.setTransition(d,h,I,e));l&&a.effects.saveStyle(d);d.css(f);d.animate(e,b.duration,b.easing,function(){l&&a.effects.restoreStyle(d)})});e.animate(C,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var b=e.offset();0===C.opacity&&e.css("opacity",v.opacity);l||(e.css("position","static"===q?"relative":q).offset(b),a.effects.saveStyle(e));d()}})});a.effects.define("scale",function(b,d){var e=
a(this),f=b.mode;f=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"effect"!==f?0:100);e=a.extend(!0,{from:a.effects.scaledDimensions(e),to:a.effects.scaledDimensions(e,f,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(e.from.opacity=1,e.to.opacity=0);a.effects.effect.size.call(this,e,d)});a.effects.define("puff","hide",function(b,d){b=a.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,10)||150});a.effects.effect.scale.call(this,b,d)});a.effects.define("pulsate","show",
function(b,d){var e=a(this),f=b.mode,g="show"===f;f=2*(b.times||5)+(g||"hide"===f?1:0);var h=b.duration/f,k=0,l=1,p=e.queue().length;if(g||!e.is(":visible"))e.css("opacity",0).show(),k=1;for(;l<f;l++)e.animate({opacity:k},h,b.easing),k=1-k;e.animate({opacity:k},h,b.easing);e.queue(d);a.effects.unshift(e,p,f+1)});a.effects.define("shake",function(b,d){var e=1,f=a(this),g=b.direction||"left",h=b.distance||20,k=b.times||3,l=2*k+1,p=Math.round(b.duration/l),n="up"===g||"down"===g?"top":"left";g="up"===
g||"left"===g;var q={},r={},t={},v=f.queue().length;a.effects.createPlaceholder(f);q[n]=(g?"-=":"+=")+h;r[n]=(g?"+=":"-=")+2*h;t[n]=(g?"-=":"+=")+2*h;for(f.animate(q,p,b.easing);e<k;e++)f.animate(r,p,b.easing).animate(t,p,b.easing);f.animate(r,p,b.easing).animate(q,p/2,b.easing).queue(d);a.effects.unshift(f,v,l+1)});a.effects.define("slide","show",function(b,d){var e=a(this),f={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},g=b.mode,h=b.direction||"left",k=
"up"===h||"down"===h?"top":"left",l="up"===h||"left"===h,p=b.distance||e["top"===k?"outerHeight":"outerWidth"](!0),n={};a.effects.createPlaceholder(e);var q=e.cssClip();var r=e.position()[k];n[k]=(l?-1:1)*p+r;n.clip=e.cssClip();n.clip[f[h][1]]=n.clip[f[h][0]];"show"===g&&(e.cssClip(n.clip),e.css(k,n[k]),n.clip=q,n[k]=r);e.animate(n,{queue:!1,duration:b.duration,easing:b.easing,complete:d})});!1!==a.uiBackCompat&&a.effects.define("transfer",function(b,d){a(this).transfer(b,d)})});
var CryptoJS=CryptoJS||function(a,b){var d={},e=d.lib={},f=e.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var d=new a;b&&d.mixIn(b);d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)});d.init.prototype=d;d.$super=this;return d},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},
clone:function(){return this.init.prototype.extend(this)}}}(),g=e.WordArray=f.extend({init:function(a,d){a=this.words=a||[];this.sigBytes=d!=b?d:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var b=this.words,d=a.words,e=this.sigBytes;a=a.sigBytes;this.clamp();if(e%4)for(var f=0;f<a;f++)b[e+f>>>2]|=(d[f>>>2]>>>24-f%4*8&255)<<24-(e+f)%4*8;else if(65535<d.length)for(f=0;f<a;f+=4)b[e+f>>>2]=d[f>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var b=
this.words,d=this.sigBytes;b[d>>>2]&=4294967295<<32-d%4*8;b.length=a.ceil(d/4)},clone:function(){var a=f.clone.call(this);a.words=this.words.slice(0);return a},random:function(b){for(var d=[],e=0;e<b;e+=4)d.push(4294967296*a.random()|0);return new g.init(d,b)}}),h=d.enc={},k=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],e=0;e<a;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16));d.push((f&15).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,
d=[],e=0;e<b;e+=2)d[e>>>3]|=parseInt(a.substr(e,2),16)<<24-e%8*4;return new g.init(d,b/2)}},l=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],e=0;e<a;e++)d.push(String.fromCharCode(b[e>>>2]>>>24-e%4*8&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],e=0;e<b;e++)d[e>>>2]|=(a.charCodeAt(e)&255)<<24-e%4*8;return new g.init(d,b)}},p=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(l.stringify(a)))}catch(n){throw Error("Malformed UTF-8 data");
}},parse:function(a){return l.parse(unescape(encodeURIComponent(a)))}},q=e.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=p.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(b){var d=this._data,e=d.words,f=d.sigBytes,h=this.blockSize,k=f/(4*h);k=b?a.ceil(k):a.max((k|0)-this._minBufferSize,0);b=k*h;f=a.min(4*b,f);if(b){for(var l=0;l<b;l+=h)this._doProcessBlock(e,l);l=e.splice(0,b);d.sigBytes-=
f}return new g.init(l,f)},clone:function(){var a=f.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});e.Hasher=q.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return(new a.init(d)).finalize(b)}},_createHmacHelper:function(a){return function(b,
d){return(new r.HMAC.init(a,d)).finalize(b)}}});var r=d.algo={};return d}(Math);
(function(a){var b=CryptoJS,d=b.lib,e=d.Base,f=d.WordArray;b=b.x64={};b.Word=e.extend({init:function(a,b){this.high=a;this.low=b}});b.WordArray=e.extend({init:function(b,d){b=this.words=b||[];this.sigBytes=d!=a?d:8*b.length},toX32:function(){for(var a=this.words,b=a.length,d=[],e=0;e<b;e++){var p=a[e];d.push(p.high);d.push(p.low)}return f.create(d,this.sigBytes)},clone:function(){for(var a=e.clone.call(this),b=a.words=this.words.slice(0),d=b.length,f=0;f<d;f++)b[f]=b[f].clone();return a}})})();
(function(){var a=CryptoJS,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,e){a=this._hasher=new a.init;"string"==typeof e&&(e=b.parse(e));var d=a.blockSize,g=4*d;e.sigBytes>g&&(e=a.finalize(e));e.clamp();a=this._oKey=e.clone();e=this._iKey=e.clone();for(var h=a.words,k=e.words,l=0;l<d;l++)h[l]^=1549556828,k[l]^=909522486;a.sigBytes=e.sigBytes=g;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=
this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
(function(){var a=CryptoJS,b=a.lib,d=b.Base,e=b.WordArray;b=a.algo;var f=b.HMAC,g=b.PBKDF2=d.extend({cfg:d.extend({keySize:4,hasher:b.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){var d=this.cfg;a=f.create(d.hasher,a);var g=e.create(),h=e.create([1]),k=g.words,v=h.words,n=d.keySize;for(d=d.iterations;k.length<n;){var t=a.update(b).finalize(h);a.reset();for(var u=t.words,w=u.length,y=t,z=1;z<d;z++){y=a.finalize(y);a.reset();for(var x=y.words,B=0;B<w;B++)u[B]^=
x[B]}g.concat(t);v[0]++}g.sigBytes=4*n;return g}});a.PBKDF2=function(a,b,d){return g.create(d).compute(a,b)}})();
(function(){function a(){return f.create.apply(f,arguments)}var b=CryptoJS,d=b.lib.Hasher,e=b.x64,f=e.Word,g=e.WordArray;e=b.algo;var h=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),
a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,
2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),
a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,
3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],k=[];(function(){for(var b=0;80>b;b++)k[b]=a()})();e=e.SHA512=d.extend({_doReset:function(){this._hash=new g.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(a,
b){var d=this._hash.words,e=d[0],f=d[1],g=d[2],t=d[3],u=d[4],l=d[5],p=d[6];d=d[7];for(var z=e.high,x=e.low,B=f.high,G=f.low,H=g.high,K=g.low,F=t.high,D=t.low,A=u.high,C=u.low,J=l.high,E=l.low,N=p.high,I=p.low,Y=d.high,da=d.low,V=z,ka=x,M=B,P=G,ba=H,oa=K,L=F,aa=D,S=A,Z=C,ea=J,ca=E,W=N,ra=I,fa=Y,R=da,T=0;80>T;T++){var X=k[T];if(16>T)var O=X.high=a[b+2*T]|0,U=X.low=a[b+2*T+1]|0;else{O=k[T-15];U=O.high;var za=O.low;O=(U>>>1|za<<31)^(U>>>8|za<<24)^U>>>7;za=(za>>>1|U<<31)^(za>>>8|U<<24)^(za>>>7|U<<25);
var wa=k[T-2];U=wa.high;var ha=wa.low;wa=(U>>>19|ha<<13)^(U<<3|ha>>>29)^U>>>6;ha=(ha>>>19|U<<13)^(ha<<3|U>>>29)^(ha>>>6|U<<26);U=k[T-7];var Aa=U.high,ta=k[T-16],xa=ta.high;ta=ta.low;U=za+U.low;O=O+Aa+(U>>>0<za>>>0?1:0);U+=ha;O=O+wa+(U>>>0<ha>>>0?1:0);U+=ta;O=O+xa+(U>>>0<ta>>>0?1:0);X.high=O;X.low=U}Aa=S&ea^~S&W;ta=Z&ca^~Z&ra;X=V&M^V&ba^M&ba;var Sa=ka&P^ka&oa^P&oa;za=(V>>>28|ka<<4)^(V<<30|ka>>>2)^(V<<25|ka>>>7);wa=(ka>>>28|V<<4)^(ka<<30|V>>>2)^(ka<<25|V>>>7);ha=h[T];var Ia=ha.high,Za=ha.low;ha=R+((Z>>>
14|S<<18)^(Z>>>18|S<<14)^(Z<<23|S>>>9));xa=fa+((S>>>14|Z<<18)^(S>>>18|Z<<14)^(S<<23|Z>>>9))+(ha>>>0<R>>>0?1:0);ha+=ta;xa=xa+Aa+(ha>>>0<ta>>>0?1:0);ha+=Za;xa=xa+Ia+(ha>>>0<Za>>>0?1:0);ha+=U;xa=xa+O+(ha>>>0<U>>>0?1:0);U=wa+Sa;X=za+X+(U>>>0<wa>>>0?1:0);fa=W;R=ra;W=ea;ra=ca;ea=S;ca=Z;Z=aa+ha|0;S=L+xa+(Z>>>0<aa>>>0?1:0)|0;L=ba;aa=oa;ba=M;oa=P;M=V;P=ka;ka=ha+U|0;V=xa+X+(ka>>>0<ha>>>0?1:0)|0}x=e.low=x+ka;e.high=z+V+(x>>>0<ka>>>0?1:0);G=f.low=G+P;f.high=B+M+(G>>>0<P>>>0?1:0);K=g.low=K+oa;g.high=H+ba+(K>>>
0<oa>>>0?1:0);D=t.low=D+aa;t.high=F+L+(D>>>0<aa>>>0?1:0);C=u.low=C+Z;u.high=A+S+(C>>>0<Z>>>0?1:0);E=l.low=E+ca;l.high=J+ea+(E>>>0<ca>>>0?1:0);I=p.low=I+ra;p.high=N+W+(I>>>0<ra>>>0?1:0);da=d.low=da+R;d.high=Y+fa+(da>>>0<R>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;b[e>>>5]|=128<<24-e%32;b[(e+128>>>10<<5)+30]=Math.floor(d/4294967296);b[(e+128>>>10<<5)+31]=d;a.sigBytes=4*b.length;this._process();return this._hash.toX32()},clone:function(){var a=d.clone.call(this);
a._hash=this._hash.clone();return a},blockSize:32});b.SHA512=d._createHelper(e);b.HmacSHA512=d._createHmacHelper(e)})();
/*

 Copyright 2013 Google Inc. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function RichMarker(a){var b=a||{};this.dragging_=this.ready_=!1;void 0==a.visible&&(a.visible=!0);void 0==a.anchor&&(a.anchor=RichMarkerPosition.BOTTOM);this.setValues(b)}RichMarker.prototype=new google.maps.OverlayView;window.RichMarker=RichMarker;RichMarker.prototype.getVisible=function(){return this.get("visible")};RichMarker.prototype.getVisible=RichMarker.prototype.getVisible;RichMarker.prototype.setVisible=function(a){this.set("visible",a)};RichMarker.prototype.setVisible=RichMarker.prototype.setVisible;
RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())};RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed;RichMarker.prototype.setFlat=function(a){this.set("flat",!!a)};RichMarker.prototype.setFlat=RichMarker.prototype.setFlat;RichMarker.prototype.getFlat=function(){return this.get("flat")};RichMarker.prototype.getFlat=RichMarker.prototype.getFlat;RichMarker.prototype.getWidth=function(){return this.get("width")};
RichMarker.prototype.getWidth=RichMarker.prototype.getWidth;RichMarker.prototype.getHeight=function(){return this.get("height")};RichMarker.prototype.getHeight=RichMarker.prototype.getHeight;RichMarker.prototype.setShadow=function(a){this.set("shadow",a);this.flat_changed()};RichMarker.prototype.setShadow=RichMarker.prototype.setShadow;RichMarker.prototype.getShadow=function(){return this.get("shadow")};RichMarker.prototype.getShadow=RichMarker.prototype.getShadow;
RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())};RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed;RichMarker.prototype.setZIndex=function(a){this.set("zIndex",a)};RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex;RichMarker.prototype.getZIndex=function(){return this.get("zIndex")};
RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex;RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())};RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed;RichMarker.prototype.getDraggable=function(){return this.get("draggable")};RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable;RichMarker.prototype.setDraggable=function(a){this.set("draggable",!!a)};
RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable;RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())};RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed;RichMarker.prototype.getPosition=function(){return this.get("position")};RichMarker.prototype.getPosition=RichMarker.prototype.getPosition;
RichMarker.prototype.setPosition=function(a){this.set("position",a)};RichMarker.prototype.setPosition=RichMarker.prototype.setPosition;RichMarker.prototype.position_changed=function(){this.draw()};RichMarker.prototype.position_changed=RichMarker.prototype.position_changed;RichMarker.prototype.getAnchor=function(){return this.get("anchor")};RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor;RichMarker.prototype.setAnchor=function(a){this.set("anchor",a)};RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor;
RichMarker.prototype.anchor_changed=function(){this.draw()};RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed;RichMarker.prototype.htmlToDocumentFragment_=function(a){var b=document.createElement("DIV");b.innerHTML=a;if(1==b.childNodes.length)return b.removeChild(b.firstChild);for(a=document.createDocumentFragment();b.firstChild;)a.appendChild(b.firstChild);return a};RichMarker.prototype.removeChildren_=function(a){if(a)for(var b;b=a.firstChild;)a.removeChild(b)};
RichMarker.prototype.setContent=function(a){this.set("content",a)};RichMarker.prototype.setContent=RichMarker.prototype.setContent;RichMarker.prototype.getContent=function(){return this.get("content")};RichMarker.prototype.getContent=RichMarker.prototype.getContent;
RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var a=this.getContent();if(a){"string"==typeof a&&(a=a.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),a=this.htmlToDocumentFragment_(a));this.markerContent_.appendChild(a);var b=this;a=this.markerContent_.getElementsByTagName("IMG");for(var d=0,e;e=a[d];d++)google.maps.event.addDomListener(e,"mousedown",function(a){b.getDraggable()&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}),google.maps.event.addDomListener(e,
"load",function(){b.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}};RichMarker.prototype.content_changed=RichMarker.prototype.content_changed;
RichMarker.prototype.setCursor_=function(a){if(this.ready_){var b="";if(-1!==navigator.userAgent.indexOf("Gecko/"))"dragging"==a&&(b="-moz-grabbing"),"dragready"==a&&(b="-moz-grab");else if("dragging"==a||"dragready"==a)b="move";"draggable"==a&&(b="pointer");this.markerWrapper_.style.cursor!=b&&(this.markerWrapper_.style.cursor=b)}};
RichMarker.prototype.startDrag=function(a){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var b=this.getMap();this.mapDraggable_=b.get("draggable");b.set("draggable",!1);this.mouseX_=a.clientX;this.mouseY_=a.clientY;this.setCursor_("dragready");this.markerWrapper_.style.MozUserSelect="none";this.markerWrapper_.style.KhtmlUserSelect="none";this.markerWrapper_.style.WebkitUserSelect="none";this.markerWrapper_.unselectable="on";this.markerWrapper_.onselectstart=function(){return!1};this.addDraggingListeners_();
google.maps.event.trigger(this,"dragstart")}};
RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,
"dragend"),this.draw())};
RichMarker.prototype.drag=function(a){if(this.getDraggable()&&this.dragging_){var b=this.mouseX_-a.clientX,d=this.mouseY_-a.clientY;this.mouseX_=a.clientX;this.mouseY_=a.clientY;a=parseInt(this.markerWrapper_.style.left,10)-b;d=parseInt(this.markerWrapper_.style.top,10)-d;this.markerWrapper_.style.left=a+"px";this.markerWrapper_.style.top=d+"px";b=this.getOffset_();d=new google.maps.Point(a-b.width,d-b.height);a=this.getProjection();this.setPosition(a.fromDivPixelToLatLng(d));this.setCursor_("dragging");
google.maps.event.trigger(this,"drag")}else this.stopDrag()};RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_);this.setCursor_("")};RichMarker.prototype.addDragging_=function(a){if(a){var b=this;this.draggableListener_=google.maps.event.addDomListener(a,"mousedown",function(a){b.startDrag(a)});this.setCursor_("draggable")}};
RichMarker.prototype.addDraggingListeners_=function(){var a=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(b){a.drag(b)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){a.stopDrag();a.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(b){a.drag(b)},!0),google.maps.event.addDomListener(window,
"mouseup",function(){a.stopDrag()},!0)]};RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var a=0,b;b=this.draggingListeners_[a];a++)google.maps.event.removeListener(b);this.draggingListeners_.length=0}};
RichMarker.prototype.getOffset_=function(){var a=this.getAnchor();if("object"==typeof a)return a;var b=new google.maps.Size(0,0);if(!this.markerContent_)return b;var d=this.markerContent_.offsetWidth,e=this.markerContent_.offsetHeight;switch(a){case RichMarkerPosition.TOP:b.width=-d/2;break;case RichMarkerPosition.TOP_RIGHT:b.width=-d;break;case RichMarkerPosition.LEFT:b.height=-e/2;break;case RichMarkerPosition.MIDDLE:b.width=-d/2;b.height=-e/2;break;case RichMarkerPosition.RIGHT:b.width=-d;b.height=
-e/2;break;case RichMarkerPosition.BOTTOM_LEFT:b.height=-e;break;case RichMarkerPosition.BOTTOM:b.width=-d/2;b.height=-e;break;case RichMarkerPosition.BOTTOM_RIGHT:b.width=-d,b.height=-e}return b};
RichMarker.prototype.onAdd=function(){this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute");this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex());this.markerWrapper_.style.display=this.getVisible()?"":"none";if(!this.markerContent_){this.markerContent_=document.createElement("DIV");this.markerWrapper_.appendChild(this.markerContent_);var a=this;google.maps.event.addDomListener(this.markerContent_,"click",function(b){google.maps.event.trigger(a,
"click",b)});google.maps.event.addDomListener(this.markerContent_,"mouseover",function(b){google.maps.event.trigger(a,"mouseover",b)});google.maps.event.addDomListener(this.markerContent_,"mouseout",function(b){google.maps.event.trigger(a,"mouseout",b)});google.maps.event.addDomListener(this.markerContent_,"mousedown",function(b){google.maps.event.trigger(a,"mousedown",b)})}this.ready_=!0;this.content_changed();this.flat_changed();this.draggable_changed();var b=this.getPanes();b&&b.overlayMouseTarget.appendChild(this.markerWrapper_);
google.maps.event.trigger(this,"ready")};RichMarker.prototype.onAdd=RichMarker.prototype.onAdd;
RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var a=this.getProjection();if(a){var b=this.get("position");a=a.fromLatLngToDivPixel(b);b=this.getOffset_();this.markerWrapper_.style.top=a.y+b.height+"px";this.markerWrapper_.style.left=a.x+b.width+"px";a=this.markerContent_.offsetHeight;b=this.markerContent_.offsetWidth;b!=this.get("width")&&this.set("width",b);a!=this.get("height")&&this.set("height",a)}}};RichMarker.prototype.draw=RichMarker.prototype.draw;
RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_);this.removeDragListeners_()};RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;
/*
 ScrollMagic v2.0.5 (2015-04-29)
 The javascript library for magical scroll interactions.
 (c) 2015 Jan Paepke (@janpaepke)
 Project Website: http://scrollmagic.io

 @version 2.0.5
 @license Dual licensed under MIT license and GPL.
 @author Jan Paepke - e-mail@janpaepke.de

 @file ScrollMagic main library.
*/
(function(a,b){"function"===typeof define&&define.amd?define(b):"object"===typeof exports?module.exports=b():a.ScrollMagic=b()})(this,function(){var a=function(){e.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};a.version="2.0.5";window.addEventListener("mousewheel",function(){});a.Controller=function(d){var f=b.defaults,h=this,k=e.extend({},f,d),l=[],
p=!1,q=0,r="PAUSED",v=!0,n=0,t=!0,u,w,y=function(){0<k.refreshInterval&&(w=window.setTimeout(K,k.refreshInterval))},z=function(){return k.vertical?e.get.scrollTop(k.container):e.get.scrollLeft(k.container)},x=function(){return k.vertical?e.get.height(k.container):e.get.width(k.container)},B=this._setScrollPos=function(a){k.vertical?v?window.scrollTo(e.get.scrollLeft(),a):k.container.scrollTop=a:v?window.scrollTo(a,e.get.scrollTop()):k.container.scrollLeft=a},G=function(){if(t&&p){var a=e.type.Array(p)?
p:l.slice(0);p=!1;var b=q;q=h.scrollPos();b=q-b;0!==b&&(r=0<b?"FORWARD":"REVERSE");"REVERSE"===r&&a.reverse();a.forEach(function(b,d){F(3,"updating Scene "+(d+1)+"/"+a.length+" ("+l.length+" total)");b.update(!0)});0===a.length&&3<=k.loglevel&&F(3,"updating 0 Scenes (nothing added to controller)")}},H=function(a){F(3,"event fired causing an update:",a.type);"resize"==a.type&&(n=x(),r="PAUSED");!0!==p&&(p=!0,u=e.rAF(G))},K=function(){if(!v&&n!=x()){try{var a=new Event("resize",{bubbles:!1,cancelable:!1})}catch(C){a=
document.createEvent("Event"),a.initEvent("resize",!1,!1)}k.container.dispatchEvent(a)}l.forEach(function(a,b){a.refresh()});y()},F=this._log=function(a,b){k.loglevel>=a&&(Array.prototype.splice.call(arguments,1,0,"(ScrollMagic.Controller) ->"),e.log.apply(window,arguments))};this._options=k;var D=function(a){if(1>=a.length)return a;a=a.slice(0);a.sort(function(a,b){return a.scrollOffset()>b.scrollOffset()?1:-1});return a};this.addScene=function(b){if(e.type.Array(b))b.forEach(function(a,b){h.addScene(a)});
else if(b instanceof a.Scene)if(b.controller()!==h)b.addTo(h);else{if(0>l.indexOf(b)){l.push(b);l=D(l);b.on("shift.controller_sort",function(){l=D(l)});for(var d in k.globalSceneOptions)b[d]&&b[d].call(b,k.globalSceneOptions[d]);F(3,"adding Scene (now "+l.length+" total)")}}else F(1,"ERROR: invalid argument supplied for '.addScene()'");return h};this.removeScene=function(a){if(e.type.Array(a))a.forEach(function(a,b){h.removeScene(a)});else{var b=l.indexOf(a);-1<b&&(a.off("shift.controller_sort"),
l.splice(b,1),F(3,"removing Scene (now "+l.length+" left)"),a.remove())}return h};this.updateScene=function(b,d){e.type.Array(b)?b.forEach(function(a,b){h.updateScene(a,d)}):d?b.update(!0):!0!==p&&b instanceof a.Scene&&(p=p||[],-1==p.indexOf(b)&&p.push(b),p=D(p),u=e.rAF(G));return h};this.update=function(a){H({type:"resize"});a&&G();return h};this.scrollTo=function(b,d){if(e.type.Number(b))B.call(k.container,b,d);else if(b instanceof a.Scene)b.controller()===h?h.scrollTo(b.scrollOffset(),d):F(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",
b);else if(e.type.Function(b))B=b;else{var f=e.get.elements(b)[0];if(f){for(;f.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)f=f.parentNode;b=k.vertical?"top":"left";var g=e.get.offset(k.container);f=e.get.offset(f);v||(g[b]-=h.scrollPos());h.scrollTo(f[b]-g[b],d)}else F(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",b)}return h};this.scrollPos=function(a){if(arguments.length)e.type.Function(a)?z=a:F(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'.");
else return z.call(h);return h};this.info=function(a){var b={size:n,vertical:k.vertical,scrollPos:q,scrollDirection:r,container:k.container,isDocument:v};if(arguments.length){if(void 0!==b[a])return b[a];F(1,'ERROR: option "'+a+'" is not available')}else return b};this.loglevel=function(a){if(!arguments.length)return k.loglevel;k.loglevel!=a&&(k.loglevel=a);return h};this.enabled=function(a){if(!arguments.length)return t;t!=a&&(t=!!a,h.updateScene(l,!0));return h};this.destroy=function(a){window.clearTimeout(w);
for(var b=l.length;b--;)l[b].destroy(a);k.container.removeEventListener("resize",H);k.container.removeEventListener("scroll",H);e.cAF(u);F(3,"destroyed ScrollMagic.Controller (reset: "+(a?"true":"false")+")");return null};(function(){for(var b in k)f.hasOwnProperty(b)||(F(2,'WARNING: Unknown option "'+b+'"'),delete k[b]);k.container=e.get.elements(k.container)[0];if(!k.container)throw F(1,"ERROR creating object ScrollMagic.Controller: No valid scroll container supplied"),"ScrollMagic.Controller init failed.";
if(v=k.container===window||k.container===document.body||!document.body.contains(k.container))k.container=window;n=x();k.container.addEventListener("resize",H);k.container.addEventListener("scroll",H);k.refreshInterval=parseInt(k.refreshInterval)||f.refreshInterval;y();F(3,"added new ScrollMagic.Controller controller (v"+a.version+")")})();return h};var b={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};a.Controller.addOption=function(a,d){b.defaults[a]=
d};a.Controller.extend=function(b){var d=this;a.Controller=function(){d.apply(this,arguments);this.$super=e.extend({},this);return b.apply(this,arguments)||this};e.extend(a.Controller,d);a.Controller.prototype=d.prototype;a.Controller.prototype.constructor=a.Controller};a.Scene=function(b){var f=d.defaults,h=this,k=e.extend({},f,b),l="BEFORE",p=0,q=0,r=0,v=0,n=!0,t,u,w={};this.on=function(a,b){e.type.Function(b)?(a=a.trim().split(" "),a.forEach(function(a){var d=a.split(".");a=d[0];d=d[1];"*"!=a&&
(w[a]||(w[a]=[]),w[a].push({namespace:d||"",callback:b}))})):y(1,"ERROR when calling '.on()': Supplied callback for '"+a+"' is not a valid function!");return h};this.off=function(a,b){if(!a)return y(1,"ERROR: Invalid event name supplied."),h;a=a.trim().split(" ");a.forEach(function(a,d){a=a.split(".");d=a[0];var e=a[1]||"";("*"===d?Object.keys(w):[d]).forEach(function(a){for(var d=w[a]||[],f=d.length;f--;){var g=d[f];!g||e!==g.namespace&&"*"!==e||b&&b!=g.callback||d.splice(f,1)}d.length||delete w[a]})});
return h};this.trigger=function(b,d){if(b){b=b.trim().split(".");var e=b[0],f=b[1];b=w[e];y(3,"event fired:",e,d?"->":"",d||"");b&&b.forEach(function(b,g){f&&f!==b.namespace||b.callback.call(h,new a.Event(e,b.namespace,h,d))})}else y(1,"ERROR: Invalid event name supplied.");return h};h.on("change.internal",function(a){"loglevel"!==a.what&&"tweenChanges"!==a.what&&("triggerElement"===a.what?B():"reverse"===a.what&&h.update())}).on("shift.internal",function(a){z();h.update()});var y=this._log=function(a,
b){k.loglevel>=a&&(Array.prototype.splice.call(arguments,1,0,"(ScrollMagic.Scene) ->"),e.log.apply(window,arguments))};this.addTo=function(b){b instanceof a.Controller?u!=b&&(u&&u.removeScene(h),u=b,K(),x(!0),B(!0),z(),u.info("container").addEventListener("resize",G),b.addScene(h),h.trigger("add",{controller:u}),y(3,"added ScrollMagic.Scene to controller"),h.update()):y(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller");return h};this.enabled=function(a){if(!arguments.length)return n;
n!=a&&(n=!!a,h.update(!0));return h};this.remove=function(){if(u){u.info("container").removeEventListener("resize",G);var a=u;u=void 0;a.removeScene(h);h.trigger("remove");y(3,"removed ScrollMagic.Scene from controller")}return h};this.destroy=function(a){h.trigger("destroy",{reset:a});h.remove();h.off("*.*");y(3,"destroyed ScrollMagic.Scene (reset: "+(a?"true":"false")+")");return null};this.update=function(a){if(u)if(a)if(u.enabled()&&n){a=u.info("scrollPos");var b=0<k.duration?(a-q)/(r-q):a>=q?
1:0;h.trigger("update",{startPos:q,endPos:r,scrollPos:a});h.progress(b)}else A&&"DURING"===l&&J(!0);else u.updateScene(h,!1);return h};this.refresh=function(){x();B();return h};this.progress=function(a){if(arguments.length){var b=!1,d=l,e=u?u.info("scrollDirection"):"PAUSED",f=k.reverse||a>=p;0===k.duration?(b=p!=a,p=1>a&&f?0:1,l=0===p?"BEFORE":"DURING"):0>a&&"BEFORE"!==l&&f?(p=0,l="BEFORE",b=!0):0<=a&&1>a&&f?(p=a,l="DURING",b=!0):1<=a&&"AFTER"!==l?(p=1,l="AFTER",b=!0):"DURING"!==l||f||J();if(b){var g=
{progress:p,state:l,scrollDirection:e};b=l!=d;e=function(a){h.trigger(a,g)};b&&"DURING"!==d&&(e("enter"),e("BEFORE"===d?"start":"end"));e("progress");b&&"DURING"!==l&&(e("BEFORE"===l?"start":"end"),e("leave"))}return h}return p};var z=function(){q=v+k.offset;r=void 0;u&&k.triggerElement&&(q-=u.info("size")*k.triggerHook);r=q+k.duration},x=function(a){t&&F("duration",t.call(h))&&!a&&(h.trigger("change",{what:"duration",newval:k.duration}),h.trigger("shift",{reason:"duration"}))},B=function(a){var b=
0,d=k.triggerElement;if(u&&d){b=u.info();for(var f=e.get.offset(b.container),g=b.vertical?"top":"left";d.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)d=d.parentNode;d=e.get.offset(d);b.isDocument||(f[g]-=u.scrollPos());b=d[g]-f[g]}d=b!=v;v=b;d&&!a&&h.trigger("shift",{reason:"triggerElementPosition"})},G=function(a){0<k.triggerHook&&h.trigger("shift",{reason:"containerResize"})},H=e.extend(d.validate,{duration:function(a){if(e.type.String(a)&&a.match(/^(\.|\d)*\d+%$/)){var b=parseFloat(a)/
100;a=function(){return u?u.info("size")*b:0}}if(e.type.Function(a)){t=a;try{a=parseFloat(t())}catch(P){a=-1}}a=parseFloat(a);if(!e.type.Number(a)||0>a){if(t)throw t=void 0,['Invalid return value of supplied function for option "duration":',a];throw['Invalid value for option "duration":',a];}return a}}),K=function(a){a=arguments.length?[a]:Object.keys(H);a.forEach(function(a,b){if(H[a])try{var d=H[a](k[a])}catch(L){d=f[a];var g=e.type.String(L)?[L]:L;e.type.Array(g)?(g[0]="ERROR: "+g[0],g.unshift(1),
y.apply(this,g)):y(1,"ERROR: Problem executing validation callback for option '"+a+"':",L.message)}finally{k[a]=d}})},F=function(a,b){var d=!1,e=k[a];k[a]!=b&&(k[a]=b,K(a),d=e!=k[a]);return d},D=function(a){h[a]||(h[a]=function(b){if(arguments.length)"duration"===a&&(t=void 0),F(a,b)&&(h.trigger("change",{what:a,newval:k[a]}),-1<d.shifts.indexOf(a)&&h.trigger("shift",{reason:a}));else return k[a];return h})};this.controller=function(){return u};this.state=function(){return l};this.scrollOffset=function(){return q};
this.triggerPosition=function(){var a=k.offset;u&&(a=k.triggerElement?a+v:a+u.info("size")*h.triggerHook());return a};var A,C;h.on("shift.internal",function(a){a="duration"===a.reason;("AFTER"===l&&a||"DURING"===l&&0===k.duration)&&J();a&&E()}).on("progress.internal",function(a){J()}).on("add.internal",function(a){E()}).on("destroy.internal",function(a){h.removePin(a.reset)});var J=function(a){if(A&&u){var b=u.info(),d=C.spacer.firstChild;if(a||"DURING"!==l){a={position:C.inFlow?"relative":"absolute",
top:0,left:0};var f=e.css(d,"position")!=a.position;C.pushFollowers?0<k.duration&&("AFTER"===l&&0===parseFloat(e.css(C.spacer,"padding-top"))?f=!0:"BEFORE"===l&&0===parseFloat(e.css(C.spacer,"padding-bottom"))&&(f=!0)):a[b.vertical?"top":"left"]=k.duration*p;e.css(d,a);f&&E()}else"fixed"!=e.css(d,"position")&&(e.css(d,{position:"fixed"}),E()),d=e.get.offset(C.spacer,!0),d[b.vertical?"top":"left"]+=k.reverse||0===k.duration?b.scrollPos-q:Math.round(p*k.duration*10)/10,b=parseInt(e.css(C.spacer.firstChild,
"top"),10),1>Math.abs(b-d.top)&&(d.top=b),e.css(C.spacer.firstChild,{top:d.top,left:d.left})}},E=function(){if(A&&u&&C.inFlow){var a="DURING"===l,b=u.info("vertical"),d=C.spacer.firstChild,f=e.isMarginCollapseType(e.css(C.spacer,"display")),g={};C.relSize.width||C.relSize.autoFullWidth?a?e.css(A,{width:e.get.width(C.spacer)}):e.css(A,{width:"100%"}):(g["min-width"]=e.get.width(b?A:d,!0,!0),g.width=a?g["min-width"]:"auto");C.relSize.height?a?e.css(A,{height:e.get.height(C.spacer)-(C.pushFollowers?
k.duration:0)}):e.css(A,{height:"100%"}):(g["min-height"]=e.get.height(b?d:A,!0,!f),g.height=a?g["min-height"]:"auto");C.pushFollowers&&(g["padding"+(b?"Top":"Left")]=k.duration*p,g["padding"+(b?"Bottom":"Right")]=k.duration*(1-p));e.css(C.spacer,g)}},N=function(){u&&A&&"DURING"===l&&!u.info("isDocument")&&J()},I=function(){u&&A&&"DURING"===l&&((C.relSize.width||C.relSize.autoFullWidth)&&e.get.width(window)!=e.get.width(C.spacer.parentNode)||C.relSize.height&&e.get.height(window)!=e.get.height(C.spacer.parentNode))&&
E()},Y=function(a){u&&A&&"DURING"===l&&!u.info("isDocument")&&(a.preventDefault(),u._setScrollPos(u.info("scrollPos")-((a.wheelDelta||a[u.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-a.detail)))};this.setPin=function(a,b){b=e.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},b);a=e.get.elements(a)[0];if(!a)return y(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),h;if("fixed"===e.css(a,"position"))return y(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),
h;if(A){if(A===a)return h;h.removePin()}A=a;var d=A.parentNode.style.display;a="top left bottom right margin marginLeft marginRight marginTop marginBottom".split(" ");A.parentNode.style.display="none";var f="absolute"!=e.css(A,"position"),g=e.css(A,a.concat(["display"])),l=e.css(A,["width","height"]);A.parentNode.style.display=d;!f&&b.pushFollowers&&(y(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),b.pushFollowers=!1);window.setTimeout(function(){A&&0===
k.duration&&b.pushFollowers&&y(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);d=A.parentNode.insertBefore(document.createElement("div"),A);var p=e.extend(g,{position:f?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});f||e.extend(p,e.css(A,["width","height"]));e.css(d,p);d.setAttribute("data-scrollmagic-pin-spacer","");e.addClass(d,b.spacerClass);C={spacer:d,relSize:{width:"%"===l.width.slice(-1),height:"%"===
l.height.slice(-1),autoFullWidth:"auto"===l.width&&f&&e.isMarginCollapseType(g.display)},pushFollowers:b.pushFollowers,inFlow:f};if(!A.___origStyle){A.___origStyle={};var n=A.style;a.concat("width height position boxSizing mozBoxSizing webkitBoxSizing".split(" ")).forEach(function(a){A.___origStyle[a]=n[a]||""})}C.relSize.width&&e.css(d,{width:l.width});C.relSize.height&&e.css(d,{height:l.height});d.appendChild(A);e.css(A,{position:f?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",
right:"auto"});(C.relSize.width||C.relSize.autoFullWidth)&&e.css(A,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"});window.addEventListener("scroll",N);window.addEventListener("resize",N);window.addEventListener("resize",I);A.addEventListener("mousewheel",Y);A.addEventListener("DOMMouseScroll",Y);y(3,"added pin");J();return h};this.removePin=function(a){if(A){"DURING"===l&&J(!0);if(a||!u){var b=C.spacer.firstChild;if(b.hasAttribute("data-scrollmagic-pin-spacer")){var d=
C.spacer.style;margins={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(a){margins[a]=d[a]||""});e.css(b,margins)}C.spacer.parentNode.insertBefore(b,C.spacer);C.spacer.parentNode.removeChild(C.spacer);A.parentNode.hasAttribute("data-scrollmagic-pin-spacer")||(e.css(A,A.___origStyle),delete A.___origStyle)}window.removeEventListener("scroll",N);window.removeEventListener("resize",N);window.removeEventListener("resize",I);A.removeEventListener("mousewheel",Y);A.removeEventListener("DOMMouseScroll",
Y);A=void 0;y(3,"removed pin (reset: "+(a?"true":"false")+")")}return h};var da,V=[];h.on("destroy.internal",function(a){h.removeClassToggle(a.reset)});this.setClassToggle=function(a,b){a=e.get.elements(a);if(0===a.length||!e.type.String(b))return y(1,"ERROR calling method 'setClassToggle()': Invalid "+(0===a.length?"element":"classes")+" supplied."),h;0<V.length&&h.removeClassToggle();da=b;V=a;h.on("enter.internal_class leave.internal_class",function(a){var b="enter"===a.type?e.addClass:e.removeClass;
V.forEach(function(a,d){b(a,da)})});return h};this.removeClassToggle=function(a){a&&V.forEach(function(a,b){e.removeClass(a,da)});h.off("start.internal_class end.internal_class");da=void 0;V=[];return h};(function(){for(var a in k)f.hasOwnProperty(a)||(y(2,'WARNING: Unknown option "'+a+'"'),delete k[a]);for(var b in f)D(b);K()})();return h};var d={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(a){a=parseFloat(a);if(!e.type.Number(a))throw['Invalid value for option "offset":',
a];return a},triggerElement:function(a){if(a=a||void 0){var b=e.get.elements(a)[0];if(b)a=b;else throw['Element defined in option "triggerElement" was not found:',a];}return a},triggerHook:function(a){var b={onCenter:.5,onEnter:1,onLeave:0};if(e.type.Number(a))a=Math.max(0,Math.min(parseFloat(a),1));else if(a in b)a=b[a];else throw['Invalid value for option "triggerHook": ',a];return a},reverse:function(a){return!!a},loglevel:function(a){a=parseInt(a);if(!e.type.Number(a)||0>a||3<a)throw['Invalid value for option "loglevel":',
a];return a}},shifts:["duration","offset","triggerHook"]};a.Scene.addOption=function(b,e,h,k){b in d.defaults?a._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+b+"', because it already exists."):(d.defaults[b]=e,d.validate[b]=h,k&&d.shifts.push(b))};a.Scene.extend=function(b){var d=this;a.Scene=function(){d.apply(this,arguments);this.$super=e.extend({},this);return b.apply(this,arguments)||this};e.extend(a.Scene,d);a.Scene.prototype=d.prototype;a.Scene.prototype.constructor=
a.Scene};a.Event=function(a,b,d,e){e=e||{};for(var f in e)this[f]=e[f];this.type=a;this.target=this.currentTarget=d;this.namespace=b||"";this.timeStamp=this.timestamp=Date.now();return this};var e=a._util=function(a){var b={},d,e=function(b,d,e,f){d=d===document?a:d;if(d===a)f=!1;else if(!u.DomElement(d))return 0;b=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();var g=(e?d["offset"+b]||d["outer"+b]:d["client"+b]||d["inner"+b])||0;e&&f&&(d=d.currentStyle?d.currentStyle:a.getComputedStyle(d),g+=
"Height"===b?(parseFloat(d.marginTop)||0)+(parseFloat(d.marginBottom)||0):(parseFloat(d.marginLeft)||0)+(parseFloat(d.marginRight)||0));return g},f=function(a){return a.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})};b.extend=function(a){a=a||{};for(d=1;d<arguments.length;d++)if(arguments[d])for(var b in arguments[d])arguments[d].hasOwnProperty(b)&&(a[b]=arguments[d][b]);return a};b.isMarginCollapseType=function(a){return-1<["block","flex","list-item",
"table","-webkit-box"].indexOf(a)};var p=0,q=["ms","moz","webkit","o"],r=a.requestAnimationFrame,v=a.cancelAnimationFrame;for(d=0;!r&&d<q.length;++d)r=a[q[d]+"RequestAnimationFrame"],v=a[q[d]+"CancelAnimationFrame"]||a[q[d]+"CancelRequestAnimationFrame"];r||(r=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-p)),f=a.setTimeout(function(){b(d+e)},e);p=d+e;return f});v||(v=function(b){a.clearTimeout(b)});b.rAF=r.bind(a);b.cAF=v.bind(a);var n=["error","warn","log"],t=a.console||{};t.log=t.log||
function(){};for(d=0;d<n.length;d++)q=n[d],t[q]||(t[q]=t.log);b.log=function(a){if(a>n.length||0>=a)a=n.length;var b=new Date;b=("0"+b.getHours()).slice(-2)+":"+("0"+b.getMinutes()).slice(-2)+":"+("0"+b.getSeconds()).slice(-2)+":"+("00"+b.getMilliseconds()).slice(-3);var d=n[a-1],e=Array.prototype.splice.call(arguments,1);d=Function.prototype.bind.call(t[d],t);e.unshift(b);d.apply(t,e)};var u=b.type=function(a){return Object.prototype.toString.call(a).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};
u.String=function(a){return"string"===u(a)};u.Function=function(a){return"function"===u(a)};u.Array=function(a){return Array.isArray(a)};u.Number=function(a){return!u.Array(a)&&0<=a-parseFloat(a)+1};u.DomElement=function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName};var w=b.get={};w.elements=function(b){var d=[];if(u.String(b))try{b=document.querySelectorAll(b)}catch(H){return d}if("nodelist"===u(b)||
u.Array(b))for(var e=0,f=d.length=b.length;e<f;e++){var g=b[e];d[e]=u.DomElement(g)?g:w.elements(g)}else if(u.DomElement(b)||b===document||b===a)d=[b];return d};w.scrollTop=function(b){return b&&"number"===typeof b.scrollTop?b.scrollTop:a.pageYOffset||0};w.scrollLeft=function(b){return b&&"number"===typeof b.scrollLeft?b.scrollLeft:a.pageXOffset||0};w.width=function(a,b,d){return e("width",a,b,d)};w.height=function(a,b,d){return e("height",a,b,d)};w.offset=function(a,b){var d={top:0,left:0};a&&a.getBoundingClientRect&&
(a=a.getBoundingClientRect(),d.top=a.top,d.left=a.left,b||(d.top+=w.scrollTop(),d.left+=w.scrollLeft()));return d};b.addClass=function(a,b){b&&(a.classList?a.classList.add(b):a.className+=" "+b)};b.removeClass=function(a,b){b&&(a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," "))};b.css=function(b,d){if(u.String(d))return(b.currentStyle?b.currentStyle:a.getComputedStyle(b))[f(d)];if(u.Array(d)){var e={},g=b.currentStyle?
b.currentStyle:a.getComputedStyle(b);d.forEach(function(a,b){e[a]=g[f(a)]});return e}for(var h in d){var k=d[h];k==parseFloat(k)&&(k+="px");b.style[f(h)]=k}};return b}(window||{});a.Scene.prototype.addIndicators=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js");return this};a.Scene.prototype.removeIndicators=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js");
return this};a.Scene.prototype.setTween=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js");return this};a.Scene.prototype.removeTween=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js");return this};a.Scene.prototype.setVelocity=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js");
return this};a.Scene.prototype.removeVelocity=function(){a._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js");return this};return a});
/*
 VERSION: 1.19.1
 DATE: 2017-01-17
 UPDATES AND DOCS AT: http://greensock.com

 Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin

 @license Copyright (c) 2008-2017, GreenSock. All rights reserved.
 This work is subject to the terms at http://greensock.com/standard-license or for
 Club GreenSock members, the software agreement that was issued with your membership.

 @author: Jack Doyle, jack@greensock.com
*/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;
(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,d){var e=function(a){var b,d=[],e=a.length;for(b=0;b!==e;d.push(a[b++]));return d},f=function(a,b,d){var e,f=a.cycle;for(e in f){var g=f[e];a[e]="function"==typeof g?g(d,b[d]):g[d%g.length]}delete a.cycle},g=function(a,b,e){d.call(this,a,b,e);this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||
0;this._dirty=!0;this.render=g.prototype.render},h=d._internals,k=h.isSelector,l=h.isArray,p=g.prototype=d.to({},.1,{}),q=[];g.version="1.19.1";p.constructor=g;p.kill()._gc=!1;g.killTweensOf=g.killDelayedCallsTo=d.killTweensOf;g.getTweensOf=d.getTweensOf;g.lagSmoothing=d.lagSmoothing;g.ticker=d.ticker;g.render=d.render;p.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),d.prototype.invalidate.call(this)};
p.updateTo=function(a,b){var e,f=this.ratio,g=this.vars.immediateRender||a.immediateRender;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(e in a)this.vars[e]=a[e];if(this._initted||g)if(b)this._initted=!1,g&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&d._onPluginEvent("_onDisable",this),.998<this._time/
this._duration)a=this._totalTime,this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1);else if(this._initted=!1,this._init(),0<this._time||g)for(b=1/(1-f),e=this._firstPT;e;)a=e.s+e.c,e.c*=b,e.s=a-e.c,e=e._next;return this};p.render=function(a,b,d){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var e,f,g,n,t,u,k,l=this._dirty?this.totalDuration():this._totalDuration,p=this._time,w=this._totalTime,r=this._cycle,q=this._duration,v=this._rawPrevTime;if(a>=l-1E-7&&0<=a?(this._totalTime=
l,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=q,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(e=!0,f="onComplete",d=d||this._timeline.autoRemoveChildren),0===q&&(this._initted||!this.vars.lazy||d)&&(this._startTime===this._timeline._duration&&(a=0),(0>v||0>=a&&-1E-7<=a||1E-10===v&&"isPause"!==this.data)&&v!==a&&(d=!0,1E-10<v&&(f="onReverseComplete")),this._rawPrevTime=k=!b||
a||v===a?a:1E-10)):1E-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==w||0===q&&0<v)&&(f="onReverseComplete",e=this._reversed),0>a&&(this._active=!1,0===q&&(this._initted||!this.vars.lazy||d)&&(0<=v&&(d=!0),this._rawPrevTime=k=!b||a||v===a?a:1E-10)),this._initted||(d=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(g=q+this._repeatDelay,this._cycle=this._totalTime/g>>0,0!==this._cycle&&this._cycle===this._totalTime/g&&a>=w&&this._cycle--,
this._time=this._totalTime-this._cycle*g,this._yoyo&&0!==(1&this._cycle)&&(this._time=q-this._time),this._time>q?this._time=q:0>this._time&&(this._time=0)),this._easeType?(n=this._time/q,t=this._easeType,u=this._easePower,(1===t||3===t&&.5<=n)&&(n=1-n),3===t&&(n*=2),1===u?n*=n:2===u?n*=n*n:3===u?n*=n*n*n:4===u&&(n*=n*n*n*n),1===t?this.ratio=1-n:2===t?this.ratio=n:.5>this._time/q?this.ratio=n/2:this.ratio=1-n/2):this.ratio=this._ease.getRatio(this._time/q)),p===this._time&&!d&&r===this._cycle)return void(w!==
this._totalTime&&this._onUpdate&&(b||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!d&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=w,this._rawPrevTime=v,this._cycle=r,h.lazyTweens.push(this),void(this._lazy=[a,b]);this._time&&!e?this.ratio=this._ease.getRatio(this._time/q):e&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=
!1);this._active||!this._paused&&this._time!==p&&0<=a&&(this._active=!0);0!==w||(2===this._initted&&0<a&&this._init(),this._startAt&&(0<=a?this._startAt.render(a,b,d):f||(f="_dummyGS")),!this.vars.onStart||0===this._totalTime&&0!==q||!b&&this._callback("onStart"));for(g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,d),b||(this._totalTime!==w||f)&&this._callback("onUpdate"));this._cycle!==
r&&(b||this._gc||this.vars.onRepeat&&this._callback("onRepeat"));f&&(!this._gc||d)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,d),e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[f]&&this._callback(f),0===q&&1E-10===this._rawPrevTime&&1E-10!==k&&(this._rawPrevTime=0))};g.to=function(a,b,d){return new g(a,b,d)};g.from=function(a,b,d){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,new g(a,b,d)};g.fromTo=
function(a,b,d,e){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,new g(a,b,e)};g.staggerTo=g.allTo=function(a,b,n,h,p,r,v){h=h||0;var t,u,w=0,y=[],z=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments);p.apply(v||n.callbackScope||this,r||q)},x=n.cycle,B=n.startAt&&n.startAt.cycle;l(a)||("string"==typeof a&&(a=d.selector(a)||a),k(a)&&(a=e(a)));a=a||[];0>h&&(a=e(a),a.reverse(),h*=-1);var J=a.length-1;for(t=0;J>=t;t++){var E={};for(u in n)E[u]=
n[u];if(x&&(f(E,a,t),null!=E.duration&&(b=E.duration,delete E.duration)),B){B=E.startAt={};for(u in n.startAt)B[u]=n.startAt[u];f(E.startAt,a,t)}E.delay=w+(E.delay||0);t===J&&p&&(E.onComplete=z);y[t]=new g(a[t],b,E);w+=h}return y};g.staggerFrom=g.allFrom=function(a,b,d,e,f,n,h){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,g.staggerTo(a,b,d,e,f,n,h)};g.staggerFromTo=g.allFromTo=function(a,b,d,e,f,n,h,k){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,
g.staggerTo(a,b,e,f,n,h,k)};g.delayedCall=function(a,b,d,e,f){return new g(b,0,{delay:a,onComplete:b,onCompleteParams:d,callbackScope:e,onReverseComplete:b,onReverseCompleteParams:d,immediateRender:!1,useFrames:f,overwrite:0})};g.set=function(a,b){return new g(a,0,b)};g.isTweening=function(a){return 0<d.getTweensOf(a,!0).length};var r=function(a,b){var e=[],f=0;for(a=a._first;a;)a instanceof d?e[f++]=a:(b&&(e[f++]=a),e=e.concat(r(a,b)),f=e.length),a=a._next;return e},v=g.getAllTweens=function(b){return r(a._rootTimeline,
b).concat(r(a._rootFramesTimeline,b))};g.killAll=function(a,d,e,f){null==d&&(d=!0);null==e&&(e=!0);var g,n,h=v(0!=f),t=h.length,u=d&&e&&f;for(n=0;t>n;n++)f=h[n],(u||f instanceof b||(g=f.target===f.vars.onComplete)&&e||d&&!g)&&(a?f.totalTime(f._reversed?0:f.totalDuration()):f._enabled(!1,!1))};g.killChildTweensOf=function(a,b){if(null!=a){var f,n,t=h.tweenLookup;if("string"==typeof a&&(a=d.selector(a)||a),k(a)&&(a=e(a)),l(a))for(f=a.length;-1<--f;)g.killChildTweensOf(a[f],b);else{var u=[];for(n in t)for(f=
t[n].target.parentNode;f;)f===a&&(u=u.concat(t[n].tweens)),f=f.parentNode;a=u.length;for(f=0;a>f;f++)b&&u[f].totalTime(u[f].totalDuration()),u[f]._enabled(!1,!1)}}};var n=function(a,d,e,f){d=!1!==d;e=!1!==e;f=!1!==f;for(var g,n=v(f),h=d&&e&&f,t=n.length;-1<--t;)f=n[t],(h||f instanceof b||(g=f.target===f.vars.onComplete)&&e||d&&!g)&&f.paused(a)};return g.pauseAll=function(a,b,d){n(!0,a,b,d)},g.resumeAll=function(a,b,d){n(!1,a,b,d)},g.globalTimeScale=function(b){var e=a._rootTimeline,f=d.ticker.time;
return arguments.length?(b=b||1E-10,e._startTime=f-(f-e._startTime)*e._timeScale/b,e=a._rootFramesTimeline,f=d.ticker.frame,e._startTime=f-(f-e._startTime)*e._timeScale/b,e._timeScale=a._rootTimeline._timeScale=b,b):e._timeScale},p.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},p.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*
a,b):this._totalTime/this.totalDuration()},p.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},p.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},p.totalDuration=function(a){return arguments.length?
-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},p.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},p.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},p.yoyo=function(a){return arguments.length?
(this._yoyo=a,this):this._yoyo},g},!0);_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,d){var e=function(a){b.call(this,a);this._labels={};this.autoRemoveChildren=!0===this.vars.autoRemoveChildren;this.smoothChildTiming=!0===this.vars.smoothChildTiming;this._sortChildren=!0;this._onUpdate=this.vars.onUpdate;var d,e=this.vars;for(d in e)a=e[d],k(a)&&-1!==a.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(a));k(e.tweens)&&this.add(e.tweens,
0,e.align,e.stagger)},f=d._internals,g=e._internals={},h=f.isSelector,k=f.isArray,l=f.lazyTweens,p=f.lazyRender,q=_gsScope._gsDefine.globals,r=function(a){var b,d={};for(b in a)d[b]=a[b];return d},v=function(a,b,d){var e,f=a.cycle;for(e in f){var g=f[e];a[e]="function"==typeof g?g(d,b[d]):g[d%g.length]}delete a.cycle},n=g.pauseCallback=function(){},t=function(a){var b,d=[],e=a.length;for(b=0;b!==e;d.push(a[b++]));return d};f=e.prototype=new b;return e.version="1.19.1",f.constructor=e,f.kill()._gc=
f._forcingPlayhead=f._hasPause=!1,f.to=function(a,b,e,f){var g=e.repeat&&q.TweenMax||d;return b?this.add(new g(a,b,e),f):this.set(a,e,f)},f.from=function(a,b,e,f){return this.add((e.repeat&&q.TweenMax||d).from(a,b,e),f)},f.fromTo=function(a,b,e,f,g){var n=f.repeat&&q.TweenMax||d;return b?this.add(n.fromTo(a,b,e,f),g):this.set(a,f,g)},f.staggerTo=function(a,b,f,g,n,k,l,p){p=new e({onComplete:k,onCompleteParams:l,callbackScope:p,smoothChildTiming:this.smoothChildTiming});var u=f.cycle;"string"==typeof a&&
(a=d.selector(a)||a);a=a||[];h(a)&&(a=t(a));g=g||0;0>g&&(a=t(a),a.reverse(),g*=-1);for(l=0;l<a.length;l++)k=r(f),k.startAt&&(k.startAt=r(k.startAt),k.startAt.cycle&&v(k.startAt,a,l)),u&&(v(k,a,l),null!=k.duration&&(b=k.duration,delete k.duration)),p.to(a[l],b,k,l*g);return this.add(p,n)},f.staggerFrom=function(a,b,d,e,f,g,n,h){return d.immediateRender=0!=d.immediateRender,d.runBackwards=!0,this.staggerTo(a,b,d,e,f,g,n,h)},f.staggerFromTo=function(a,b,d,e,f,g,n,h,t){return e.startAt=d,e.immediateRender=
0!=e.immediateRender&&0!=d.immediateRender,this.staggerTo(a,b,e,f,g,n,h,t)},f.call=function(a,b,e,f){return this.add(d.delayedCall(0,a,b,e),f)},f.set=function(a,b,e){return e=this._parseTimeOrLabel(e,0,!0),null==b.immediateRender&&(b.immediateRender=e===this._time&&!this._paused),this.add(new d(a,0,b),e)},e.exportRoot=function(a,b){a=a||{};null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var f=new e(a),g=f._timeline;null==b&&(b=!0);g._remove(f,!0);f._startTime=0;f._rawPrevTime=f._time=f._totalTime=
g._time;for(a=g._first;a;){var n=a._next;b&&a instanceof d&&a.target===a.vars.onComplete||f.add(a,a._startTime-a._delay);a=n}return g.add(f,0),f},f.add=function(f,g,n,h){var t,u;if("number"!=typeof g&&(g=this._parseTimeOrLabel(g,0,!0,f)),!(f instanceof a)){if(f instanceof Array||f&&f.push&&k(f)){n=n||"normal";h=h||0;var l=f.length;for(t=0;l>t;t++)k(u=f[t])&&(u=new e({tweens:u})),this.add(u,g),"string"!=typeof u&&"function"!=typeof u&&("sequence"===n?g=u._startTime+u.totalDuration()/u._timeScale:"start"===
n&&(u._startTime-=u.delay())),g+=h;return this._uncache(!0)}if("string"==typeof f)return this.addLabel(f,g);if("function"!=typeof f)throw"Cannot add "+f+" into the timeline; it is not a tween, timeline, function, or string.";f=d.delayedCall(0,f)}if(b.prototype.add.call(this,f,g),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,f=n.rawTime()>f._startTime;n._timeline;)f&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,
!1),n=n._timeline;return this},f.remove=function(b){if(b instanceof a){this._remove(b,!1);var d=b._timeline=b.vars.useFrames?a._rootFramesTimeline:a._rootTimeline;return b._startTime=(b._paused?b._pauseTime:d._time)-(b._reversed?b.totalDuration()-b._totalTime:b._totalTime)/b._timeScale,this}if(b instanceof Array||b&&b.push&&k(b)){for(d=b.length;-1<--d;)this.remove(b[d]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},f._remove=function(a,d){b.prototype._remove.call(this,
a,d);return this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},f.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},f.insert=f.insertMultiple=function(a,b,d,e){return this.add(a,b||0,d,e)},f.appendMultiple=function(a,b,d,e){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),d,e)},f.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),
this},f.addPause=function(a,b,e,f){e=d.delayedCall(0,n,e,f||this);return e.vars.onComplete=e.vars.onReverseComplete=b,e.data="isPause",this._hasPause=!0,this.add(e,a)},f.removeLabel=function(a){return delete this._labels[a],this},f.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},f._parseTimeOrLabel=function(b,d,e,f){var g;if(f instanceof a&&f.timeline===this)this.remove(f);else if(f&&(f instanceof Array||f.push&&k(f)))for(g=f.length;-1<--g;)f[g]instanceof a&&f[g].timeline===
this&&this.remove(f[g]);if("string"==typeof d)return this._parseTimeOrLabel(d,e&&"number"==typeof b&&null==this._labels[d]?b-this.duration():0,e);if(d=d||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(g=b.indexOf("="),-1===g)return null==this._labels[b]?e?this._labels[b]=this.duration()+d:d:this._labels[b]+d;d=parseInt(b.charAt(g-1)+"1",10)*Number(b.substr(g+1));b=1<g?this._parseTimeOrLabel(b.substr(0,g-1),0,e):this.duration()}return Number(b)+d},f.seek=
function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),!1!==b)},f.stop=function(){return this.paused(!0)},f.gotoAndPlay=function(a,b){return this.play(a,b)},f.gotoAndStop=function(a,b){return this.pause(a,b)},f.render=function(a,b,d){this._gc&&this._enabled(!0,!1);var e,f,g,n,h,t,k,u=this._dirty?this.totalDuration():this._totalDuration,w=this._time,y=this._startTime,q=this._timeScale,r=this._paused;if(a>=u-1E-7&&0<=a)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||
(f=!0,n="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=a&&-1E-7<=a||0>this._rawPrevTime||1E-10===this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(h=!0,1E-10<this._rawPrevTime&&(n="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=u+1E-4;else if(1E-7>a)if(this._totalTime=this._time=0,(0!==w||0===this._duration&&1E-10!==this._rawPrevTime&&(0<this._rawPrevTime||0>a&&0<=this._rawPrevTime))&&(n="onReverseComplete",f=this._reversed),
0>a)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=f=!0,n="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(h=!0),this._rawPrevTime=a;else{if(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,0===a&&f)for(e=this._first;e&&0===e._startTime;)e._duration||(f=!1),e=e._next;a=0;this._initted||(h=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!b){if(a>=w)for(e=this._first;e&&e._startTime<=a&&!t;)e._duration||"isPause"!==e.data||e.ratio||0===e._startTime&&
0===this._rawPrevTime||(t=e),e=e._next;else for(e=this._last;e&&e._startTime>=a&&!t;)e._duration||"isPause"===e.data&&0<e._rawPrevTime&&(t=e),e=e._prev;t&&(this._time=a=t._startTime,this._totalTime=a+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=a}if(this._time!==w&&this._first||d||h||t){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==w&&0<a&&(this._active=!0),0===w&&this.vars.onStart&&(0===this._time&&this._duration||
b||this._callback("onStart")),k=this._time,k>=w)for(e=this._first;e&&(g=e._next,k===this._time&&(!this._paused||r));)(e._active||e._startTime<=k&&!e._paused&&!e._gc)&&(t===e&&this.pause(),e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d)),e=g;else for(e=this._last;e&&(g=e._prev,k===this._time&&(!this._paused||r));){if(e._active||e._startTime<=w&&!e._paused&&!e._gc){if(t===e){for(t=e._prev;t&&t.endTime()>
this._time;)t.render(t._reversed?t.totalDuration()-(a-t._startTime)*t._timeScale:(a-t._startTime)*t._timeScale,b,d),t=t._prev;t=null;this.pause()}e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d)}e=g}this._onUpdate&&(b||(l.length&&p(),this._callback("onUpdate")));n&&(this._gc||(y===this._startTime||q!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(f&&(l.length&&p(),this._timeline.autoRemoveChildren&&
this._enabled(!1,!1),this._active=!1),!b&&this.vars[n]&&this._callback(n)))}},f._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof e&&a._hasPausedChild())return!0;a=a._next}return!1},f.getChildren=function(a,b,e,f){f=f||-9999999999;for(var g=[],n=this._first,h=0;n;)n._startTime<f||(n instanceof d?!1!==b&&(g[h++]=n):(!1!==e&&(g[h++]=n),!1!==a&&(g=g.concat(n.getChildren(!0,b,e)),h=g.length))),n=n._next;return g},f.getTweensOf=function(a,b){var e,f=this._gc,g=[],n=0;f&&this._enabled(!0,
!0);a=d.getTweensOf(a);for(e=a.length;-1<--e;)(a[e].timeline===this||b&&this._contains(a[e]))&&(g[n++]=a[e]);return f&&this._enabled(!1,!0),g},f.recent=function(){return this._recent},f._contains=function(a){for(a=a.timeline;a;){if(a===this)return!0;a=a.timeline}return!1},f.shiftChildren=function(a,b,d){d=d||0;for(var e,f=this._first,g=this._labels;f;)f._startTime>=d&&(f._startTime+=a),f=f._next;if(b)for(e in g)g[e]>=d&&(g[e]+=a);return this._uncache(!0)},f._kill=function(a,b){if(!a&&!b)return this._enabled(!1,
!1);for(var d=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),e=d.length,f=!1;-1<--e;)d[e]._kill(a,b)&&(f=!0);return f},f.clear=function(a){var b=this.getChildren(!1,!0,!0),d=b.length;for(this._time=this._totalTime=0;-1<--d;)b[d]._enabled(!1,!1);return!1!==a&&(this._labels={}),this._uncache(!0)},f.invalidate=function(){for(var b=this._first;b;)b.invalidate(),b=b._next;return a.prototype.invalidate.call(this)},f._enabled=function(a,d){if(a===this._gc)for(var e=this._first;e;)e._enabled(a,!0),e=e._next;
return b.prototype._enabled.call(this,a,d)},f.totalTime=function(b,d,e){this._forcingPlayhead=!0;var f=a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,f},f.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},f.totalDuration=function(a){if(!arguments.length){if(this._dirty){var b=0;var d=this._last;for(var e=999999999999;d;){var f=d._prev;d._dirty&&d.totalDuration();
d._startTime>e&&this._sortChildren&&!d._paused?this.add(d,d._startTime-d._delay):e=d._startTime;0>d._startTime&&!d._paused&&(b-=d._startTime,this._timeline.smoothChildTiming&&(this._startTime+=d._startTime/this._timeScale),this.shiftChildren(-d._startTime,!1,-9999999999),e=0);d=d._startTime+d._totalDuration/d._timeScale;d>b&&(b=d);d=f}this._duration=this._totalDuration=b;this._dirty=!1}return this._totalDuration}return a&&this.totalDuration()?this.timeScale(this._totalDuration/a):this},f.paused=function(b){if(!b)for(var d=
this._first,e=this._time;d;)d._startTime===e&&"isPause"===d.data&&(d._rawPrevTime=0),d=d._next;return a.prototype.paused.apply(this,arguments)},f.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},f.rawTime=function(a){return a&&(this._paused||this._repeat&&0<this.time()&&1>this.totalProgress())?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(a)-this._startTime)*this._timeScale},e},!0);
_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,d){var e=function(b){a.call(this,b);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._dirty=!0},f=b._internals,g=f.lazyTweens,h=f.lazyRender,k=_gsScope._gsDefine.globals,l=new d(null,null,1,0);d=e.prototype=new a;return d.constructor=e,d.kill()._gc=!1,e.version="1.19.1",d.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=
this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},d.addCallback=function(a,d,e,f){return this.add(b.delayedCall(0,a,e,f),d)},d.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else{a=this.getTweensOf(a,!1);var d=a.length;for(b=this._parseTimeOrLabel(b);-1<--d;)a[d]._startTime===b&&a[d]._enabled(!1,!1)}return this},d.removePause=function(b){return this.removeCallback(a._internals.pauseCallback,b)},d.tweenTo=function(a,
d){d=d||{};var e,f,g,h={ease:l,useFrames:this.usesFrames(),immediateRender:!1},u=d.repeat&&k.TweenMax||b;for(f in d)h[f]=d[f];return h.time=this._parseTimeOrLabel(a),e=Math.abs(Number(h.time)-this._time)/this._timeScale||.001,g=new u(this,e,h),h.onStart=function(){g.target.paused(!0);g.vars.time!==g.target.time()&&e===g.duration()&&g.duration(Math.abs(g.vars.time-g.target.time())/g.target._timeScale);d.onStart&&d.onStart.apply(d.onStartScope||d.callbackScope||g,d.onStartParams||[])},g},d.tweenFromTo=
function(a,b,d){d=d||{};a=this._parseTimeOrLabel(a);d.startAt={onComplete:this.seek,onCompleteParams:[a],callbackScope:this};d.immediateRender=!1!==d.immediateRender;b=this.tweenTo(b,d);return b.duration(Math.abs(b.vars.time-a)/this._timeScale||.001)},d.render=function(a,b,d){this._gc&&this._enabled(!0,!1);var e,f,t,k,l,p,r,q=this._dirty?this.totalDuration():this._totalDuration,B=this._duration,G=this._time,H=this._totalTime,K=this._startTime,F=this._timeScale,D=this._rawPrevTime,A=this._paused,C=
this._cycle;if(a>=q-1E-7&&0<=a)this._locked||(this._totalTime=q,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,k="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=a&&-1E-7<=a||0>D||1E-10===D)&&D!==a&&this._first&&(l=!0,1E-10<D&&(k="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=B,a=B+1E-4);else if(1E-7>a)if(this._locked||(this._totalTime=this._cycle=
0),this._time=0,(0!==G||0===B&&1E-10!==D&&(0<D||0>a&&0<=D)&&!this._locked)&&(k="onReverseComplete",f=this._reversed),0>a)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=f=!0,k="onReverseComplete"):0<=D&&this._first&&(l=!0),this._rawPrevTime=a;else{if(this._rawPrevTime=B||!b||a||this._rawPrevTime===a?a:1E-10,0===a&&f)for(e=this._first;e&&0===e._startTime;)e._duration||(f=!1),e=e._next;a=0;this._initted||(l=!0)}else if(0===B&&0>D&&(l=!0),this._time=this._rawPrevTime=a,this._locked||
(this._totalTime=a,0!==this._repeat&&(e=B+this._repeatDelay,this._cycle=this._totalTime/e>>0,0!==this._cycle&&this._cycle===this._totalTime/e&&a>=H&&this._cycle--,this._time=this._totalTime-this._cycle*e,this._yoyo&&0!==(1&this._cycle)&&(this._time=B-this._time),this._time>B?(this._time=B,a=B+1E-4):0>this._time?this._time=a=0:a=this._time)),this._hasPause&&!this._forcingPlayhead&&!b&&B>a){if(a=this._time,a>=G||this._repeat&&C!==this._cycle)for(e=this._first;e&&e._startTime<=a&&!p;)e._duration||"isPause"!==
e.data||e.ratio||0===e._startTime&&0===this._rawPrevTime||(p=e),e=e._next;else for(e=this._last;e&&e._startTime>=a&&!p;)e._duration||"isPause"===e.data&&0<e._rawPrevTime&&(p=e),e=e._prev;p&&(this._time=a=p._startTime,this._totalTime=a+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==C&&!this._locked){e=this._yoyo&&0!==(1&C);var J=e===(this._yoyo&&0!==(1&this._cycle)),E=this._totalTime,N=this._cycle,I=this._rawPrevTime,Y=this._time;if((this._totalTime=C*B,this._cycle<C?e=!e:this._totalTime+=
B,this._time=G,this._rawPrevTime=0===B?D-1E-4:D,this._cycle=C,this._locked=!0,G=e?0:B,this.render(G,b,0===B),b||this._gc||this.vars.onRepeat&&(this._cycle=N,this._locked=!1,this._callback("onRepeat")),G!==this._time)||(J&&(this._cycle=C,this._locked=!0,G=e?B+1E-4:-1E-4,this.render(G,!0,!1)),this._locked=!1,this._paused&&!A))return;this._time=Y;this._totalTime=E;this._cycle=N;this._rawPrevTime=I}if(!(this._time!==G&&this._first||d||l||p))return void(H!==this._totalTime&&this._onUpdate&&(b||this._callback("onUpdate")));
if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==H&&0<a&&(this._active=!0),0===H&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||b||this._callback("onStart")),r=this._time,r>=G)for(e=this._first;e&&(t=e._next,r===this._time&&(!this._paused||A));)(e._active||e._startTime<=this._time&&!e._paused&&!e._gc)&&(p===e&&this.pause(),e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*
e._timeScale,b,d)),e=t;else for(e=this._last;e&&(t=e._prev,r===this._time&&(!this._paused||A));){if(e._active||e._startTime<=G&&!e._paused&&!e._gc){if(p===e){for(p=e._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(a-p._startTime)*p._timeScale:(a-p._startTime)*p._timeScale,b,d),p=p._prev;p=null;this.pause()}e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d)}e=t}this._onUpdate&&(b||
(g.length&&h(),this._callback("onUpdate")));k&&(this._locked||this._gc||(K===this._startTime||F!==this._timeScale)&&(0===this._time||q>=this.totalDuration())&&(f&&(g.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[k]&&this._callback(k)))},d.getActive=function(a,b,d){null==a&&(a=!0);null==b&&(b=!0);null==d&&(d=!1);var e=[];d=this.getChildren(a,b,d);var f=0,g=d.length;for(a=0;g>a;a++)b=d[a],b.isActive()&&(e[f++]=b);return e},d.getLabelAfter=function(a){a||
0!==a&&(a=this._time);var b,d=this.getLabelsArray(),e=d.length;for(b=0;e>b;b++)if(d[b].time>a)return d[b].name;return null},d.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),d=b.length;-1<--d;)if(b[d].time<a)return b[d].name;return null},d.getLabelsArray=function(){var a,b=[],d=0;for(a in this._labels)b[d++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},d.invalidate=function(){return this._locked=!1,a.prototype.invalidate.call(this)},
d.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},d.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},d.totalDuration=function(b){return arguments.length?-1!==this._repeat&&b?this.timeScale(this.totalDuration()/b):this:(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=
-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},d.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},d.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):
this._repeat},d.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},d.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},d.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1E-8)},e},!0);(function(){var a=180/Math.PI,b=[],d=[],e=[],f={},g=_gsScope._gsDefine.globals,h=function(a,b,d,e){d===e&&(d=e-(e-b)/1E6);a===b&&(b=a+(d-a)/1E6);this.a=a;this.b=b;this.c=d;this.d=e;this.da=e-
a;this.ca=d-a;this.ba=b-a},k=function(a,b,d,e){var f={a:a},g={},n={},h={c:e},t=(a+b)/2,k=(b+d)/2;d=(d+e)/2;b=(t+k)/2;k=(k+d)/2;var l=(k-b)/8;return f.b=t+(a-t)/4,g.b=b+l,f.c=g.a=(f.b+g.b)/2,g.c=n.a=(b+k)/2,n.b=k-l,h.b=d+(e-d)/4,n.c=h.a=(n.b+h.b)/2,[f,g,n,h]},l=function(a,g,n,t,u,l){var p,w,q={},r=[],v=l||a[0];u="string"==typeof u?","+u+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,";
null==g&&(g=1);for(w in a[0])r.push(w);if(1<a.length){var H=a[a.length-1];var K=!0;for(p=r.length;-1<--p;)if(w=r[p],.05<Math.abs(v[w]-H[w])){K=!1;break}K&&(a=a.concat(),l&&a.unshift(l),a.push(a[1]),l=a[a.length-3])}b.length=d.length=e.length=0;for(p=r.length;-1<--p;){w=r[p];f[w]=-1!==u.indexOf(","+w+",");H=w;var F=void 0;v=void 0;var D,A=void 0,C=a,J=w,E=f[w];var N=l;var I=[];if(N)for(C=[N].concat(C),D=C.length;-1<--D;)"string"==typeof(F=C[D][J])&&"="===F.charAt(1)&&(C[D][J]=N[J]+Number(F.charAt(0)+
F.substr(2)));if(A=C.length-2,0>A)v=(I[0]=new h(C[0][J],0,0,C[-1>A?0:1][J]),I);else{for(D=0;A>D;D++)N=C[D][J],F=C[D+1][J],I[D]=new h(N,0,0,F),E&&(v=C[D+2][J],b[D]=(b[D]||0)+(F-N)*(F-N),d[D]=(d[D]||0)+(v-F)*(v-F));v=(I[D]=new h(C[D][J],0,0,C[D+1][J]),I)}q[H]=v}for(p=b.length;-1<--p;)b[p]=Math.sqrt(b[p]),d[p]=Math.sqrt(d[p]);if(!t){for(p=r.length;-1<--p;)if(f[w])for(a=q[r[p]],H=a.length-1,u=0;H>u;u++)l=a[u+1].da/d[u]+a[u].da/b[u]||0,e[u]=(e[u]||0)+l*l;for(p=e.length;-1<--p;)e[p]=Math.sqrt(e[p])}p=r.length;
for(u=n?4:1;-1<--p;){w=r[p];a=q[w];D=v=H=l=void 0;J=C=A=void 0;var Y;E=a;I=g;F=n;N=t;var da=f[w],V=E.length-1,ka=0,M=E[0].a;for(Y=0;V>Y;Y++){w=E[ka];var P=w.a;var ba=w.d;var oa=E[ka+1].d;da?(v=b[Y],H=d[Y],l=(H+v)*I*.25/(N?.5:e[Y]||.5),J=ba-(ba-P)*(N?.5*I:0!==v?l/v:0),C=ba+(oa-ba)*(N?.5*I:0!==H?l/H:0),A=ba-(J+((C-J)*(3*v/(v+H)+.5)/4||0))):(J=ba-(ba-P)*I*.5,C=ba+(oa-ba)*I*.5,A=ba-(J+C)/2);J+=A;C+=A;w.c=oa=J;0!==Y?w.b=M:w.b=M=w.a+.6*(w.c-w.a);w.da=ba-P;w.ca=oa-P;w.ba=M-P;F?(D=k(P,M,oa,ba),E.splice(ka,
1,D[0],D[1],D[2],D[3]),ka+=4):ka++;M=C}w=E[ka];w.b=M;w.c=M+.4*(w.d-M);w.da=w.d-w.a;w.ca=w.c-w.a;w.ba=M-w.a;F&&(D=k(w.a,M,w.c,w.d),E.splice(ka,1,D[0],D[1],D[2],D[3]));K&&(a.splice(0,u),a.splice(a.length-u,u))}return q},p=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(a,b,d){this._target=a;b instanceof Array&&(b={values:b});this._func={};this._mod={};this._props=[];this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var e,f,g,
n=b.values||[],k={};var p=n[0];this._autoRotate=(e=b.autoRotate||d.vars.orientToBezier)?e instanceof Array?e:[["x","y","rotation",!0===e?0:Number(e)||0]]:null;for(q in p)this._props.push(q);for(p=this._props.length;-1<--p;){var q=this._props[p];this._overwriteProps.push(q);e=this._func[q]="function"==typeof a[q];k[q]=e?a[q.indexOf("set")||"function"!=typeof a["get"+q.substr(3)]?q:"get"+q.substr(3)]():parseFloat(a[q]);g||k[q]!==n[0][q]&&(g=k)}if("cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type)k=
l(n,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,g);else{p=n;n=(n=b.type)||"soft";var r,v,K;b={};g="cubic"===n?3:2;var F="soft"===n,D=[];if(F&&k&&(p=[k].concat(p)),null==p||p.length<g+1)throw"invalid Bezier data";for(A in p[0])D.push(A);for(v=D.length;-1<--v;){var A=D[v];b[A]=e=[];var C=0;var J=p.length;for(K=0;J>K;K++)n=null==k?p[K][A]:"string"==typeof(r=p[K][A])&&"="===r.charAt(1)?k[A]+Number(r.charAt(0)+r.substr(2)):Number(r),F&&1<K&&J-1>K&&(e[C++]=(n+e[C-2])/2),e[C++]=
n;J=C-g+1;for(K=C=0;J>K;K+=g){n=e[K];A=e[K+1];r=e[K+2];var E=2===g?0:e[K+3];e[C++]=r=3===g?new h(n,A,r,E):new h(n,(2*A+n)/3,(2*A+r)/3,r)}e.length=C}k=b}if(this._beziers=k,this._segCount=this._beziers[q].length,this._timeRes){e=this._beziers;q=this._timeRes;q=q>>0||6;k=[];A=[];p=r=0;b=q-1;g=[];n=[];for(f in e)for(J=e[f],C=k,F=q,D=1/F,E=J.length;-1<--E;){var N=J[E];var I=N.a;K=N.d-I;v=N.c-I;I=N.b-I;var Y=0;for(N=1;F>=N;N++){var da=D*N;var V=1-da;da=Y-(Y=(da*da*K+3*V*(da*v+V*I))*da);V=E*F+N-1;C[V]=(C[V]||
0)+da*da}}e=k.length;for(f=0;e>f;f++)r+=Math.sqrt(k[f]),v=f%q,n[v]=r,v===b&&(p+=r,v=f/q>>0,g[v]=n,A[v]=p,r=0,n=[]);this._length=p;this._lengths=A;this._segments=g;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(e=this._autoRotate)for(this._initialRotations=[],e[0]instanceof Array||(this._autoRotate=e=[e]),p=e.length;-1<--p;){for(f=0;3>f;f++)q=e[p][f],this._func[q]="function"==typeof a[q]?a[q.indexOf("set")||
"function"!=typeof a["get"+q.substr(3)]?q:"get"+q.substr(3)]:!1;q=e[p][2];this._initialRotations[p]=(this._func[q]?this._func[q].call(this._target):this._target[q])||0;this._overwriteProps.push(q)}return this._startRatio=d.vars.runBackwards?1:0,!0},set:function(b){var d,e,f;var g=this._segCount;var h=this._func,k=this._target,l=b!==this._startRatio;if(this._timeRes){if(d=this._lengths,f=this._curSeg,b*=this._length,e=this._li,b>this._l2&&g-1>e){for(--g;g>e&&(this._l2=d[++e])<=b;);this._l1=d[e-1];
this._li=e;this._curSeg=f=this._segments[e];this._s2=f[this._s1=this._si=0]}else if(b<this._l1&&0<e){for(;0<e&&(this._l1=d[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++;this._l2=d[e];this._li=e;this._curSeg=f=this._segments[e];this._s1=f[(this._si=f.length-1)-1]||0;this._s2=f[this._si]}if(d=e,b-=this._l1,e=this._si,b>this._s2&&e<f.length-1){for(g=f.length-1;g>e&&(this._s2=f[++e])<=b;);this._s1=f[e-1];this._si=e}else if(b<this._s1&&0<e){for(;0<e&&(this._s1=f[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++;
this._s2=f[e];this._si=e}g=(e+(b-this._s1)/(this._s2-this._s1))*this._prec||0}else d=0>b?0:1<=b?g-1:g*b>>0,g*=b-1/g*d;var p=1-g;for(e=this._props.length;-1<--e;){b=this._props[e];f=this._beziers[b][d];var q=(g*g*f.da+3*p*(g*f.ca+p*f.ba))*g+f.a;this._mod[b]&&(q=this._mod[b](q,k));h[b]?k[b](q):k[b]=q}if(this._autoRotate){var r,H,K,F,D=this._autoRotate;for(e=D.length;-1<--e;){b=D[e][2];var A=D[e][3]||0;var C=!0===D[e][4]?1:a;f=this._beziers[D[e][0]];p=this._beziers[D[e][1]];f&&p&&(f=f[d],p=p[d],r=f.a+
(f.b-f.a)*g,K=f.b+(f.c-f.b)*g,r+=(K-r)*g,K+=(f.c+(f.d-f.c)*g-K)*g,H=p.a+(p.b-p.a)*g,F=p.b+(p.c-p.b)*g,H+=(F-H)*g,F+=(p.c+(p.d-p.c)*g-F)*g,q=l?Math.atan2(F-H,K-r)*C+A:this._initialRotations[e],this._mod[b]&&(q=this._mod[b](q,k)),h[b]?k[b](q):k[b]=q)}}}}),q=p.prototype;p.bezierThrough=l;p.cubicToQuadratic=k;p._autoCSS=!0;p.quadraticToCubic=function(a,b,d){return new h(a,(2*b+a)/3,(2*b+d)/3,d)};p._cssRegister=function(){var a=g.CSSPlugin;if(a){a=a._internals;var b=a._parseToProxy,d=a._setPluginRatio,
e=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(a,f,g,n,h,t){f instanceof Array&&(f={values:f});t=new p;var k,l=f.values,u=l.length-1,w=[],q={};if(0>u)return h;for(g=0;u>=g;g++){var y=b(a,l[g],n,h,t,u!==g);w[g]=y.end}for(k in f)q[k]=f[k];return q.values=w,h=new e(a,"bezier",0,0,y.pt,2),h.data=y,h.plugin=t,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(g=!0===q.autoRotate?0:Number(q.autoRotate),q.autoRotate=null!=y.end.left?
[["left","top","rotation",g,!1]]:null!=y.end.x?[["x","y","rotation",g,!1]]:!1),q.autoRotate&&(n._transform||n._enableTransforms(!1),y.autoRotate=n._target._gsTransform,y.proxy.rotation=y.autoRotate.rotation||0,n._overwriteProps.push("rotation")),t._onInitTween(y.proxy,q,n._tween),h}})}};q._mod=function(a){for(var b,d=this._overwriteProps,e=d.length;-1<--e;)(b=a[d[e]])&&"function"==typeof b&&(this._mod[d[e]]=b)};q._kill=function(a){var b,d,e=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],
delete this._func[b],d=e.length;-1<--d;)e[d]===b&&e.splice(d,1);if(e=this._autoRotate)for(d=e.length;-1<--d;)a[e[d][2]]&&e.splice(d,1);return this._super._kill.call(this,a)}})();_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var d,e,f,g,h=function(){a.call(this,"css");this._overwriteProps.length=0;this.setRatio=h.prototype.setRatio},k=_gsScope._gsDefine.globals,l={},p=h.prototype=new a("css");p.constructor=h;h.version="1.19.1";h.API=2;h.defaultTransformPerspective=
0;h.defaultSkewType="compensated";h.defaultSmoothOrigin=!0;p="px";h.suffixMap={top:p,right:p,bottom:p,left:p,width:p,height:p,fontSize:p,padding:p,margin:p,perspective:p,lineHeight:""};var q,r,v,n,t,u,w,y,z=/(?:\-|\.|\b)(\d|\.|e\-)+/g,x=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,B=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,G=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,H=/(?:\d|\-|\+|=|#|\.)*/g,K=/opacity *= *([^)]*)/i,F=/opacity:([^;]*)/i,D=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,
C=/([A-Z])/g,J=/-([a-z])/gi,E=/(^(?:url\("|url\())|(?:("\))$|\)$)/gi,N=function(a,b){return b.toUpperCase()},I=/(?:Left|Right|Width)/i,Y=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,da=/progid:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,V=/,(?=[^\)]*(?:\(|$))/gi,ka=/[\s,\(]/i,M=Math.PI/180,P=180/Math.PI,ba={},oa={style:{}},L=_gsScope.document||{createElement:function(){return oa}},aa=function(a,b){return L.createElementNS?L.createElementNS(b||"http://www.w3.org/1999/xhtml",a):L.createElement(a)},S=aa("div"),
Z=aa("img"),ea=h._internals={_specialProps:l},ca=(_gsScope.navigator||{}).userAgent||"",W=function(){var a=ca.indexOf("Android"),b=aa("a");return v=-1!==ca.indexOf("Safari")&&-1===ca.indexOf("Chrome")&&(-1===a||3<parseFloat(ca.substr(a+8,2))),t=v&&6>parseFloat(ca.substr(ca.indexOf("Version/")+8,2)),n=-1!==ca.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(ca)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(ca))&&(u=parseFloat(RegExp.$1)),b?(b.style.cssText="top:1px;opacity:.55;",/^0.55/.test(b.style.opacity)):
!1}(),ra=function(a){return K.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},fa="",R="",T=function(a,b){b=b||S;var d,e=b.style;if(void 0!==e[a])return a;a=a.charAt(0).toUpperCase()+a.substr(1);b=["O","Moz","ms","Ms","Webkit"];for(d=5;-1<--d&&void 0===e[b[d]+a];);return 0<=d?(R=3===d?"ms":b[d],fa="-"+R.toLowerCase()+"-",R+a):null},X=L.defaultView?L.defaultView.getComputedStyle:function(){},O=h.getStyle=function(a,b,d,e,f){var g;return W||
"opacity"!==b?(!e&&a.style[b]?g=a.style[b]:(d=d||X(a))?g=d[b]||d.getPropertyValue(b)||d.getPropertyValue(b.replace(C,"-$1").toLowerCase()):a.currentStyle&&(g=a.currentStyle[b]),null==f||g&&"none"!==g&&"auto"!==g&&"auto auto"!==g?g:f):ra(a)},U=ea.convertToPixels=function(a,d,e,f,g){if("px"===f||!f)return e;if("auto"===f||!e)return 0;var n,t,k=I.test(d),l=a;var u=S.style;var p=0>e,w=1===e;if(p&&(e=-e),w&&(e*=100),"%"===f&&-1!==d.indexOf("border"))u=e/100*(k?a.clientWidth:a.clientHeight);else{if(u.cssText=
"border:0 solid red;position:"+O(a,"position")+";line-height:0;","%"!==f&&l.appendChild&&"v"!==f.charAt(0)&&"rem"!==f)u[k?"borderLeftWidth":"borderTopWidth"]=e+f;else{if(l=a.parentNode||L.body,n=l._gsCache,t=b.ticker.frame,n&&k&&n.time===t)return n.width*e/100;u[k?"width":"height"]=e+f}l.appendChild(S);u=parseFloat(S[k?"offsetWidth":"offsetHeight"]);l.removeChild(S);k&&"%"===f&&!1!==h.cacheWidths&&(n=l._gsCache=l._gsCache||{},n.time=t,n.width=u/e*100);0!==u||g||(u=U(a,d,e,f,!0))}return w&&(u/=100),
p?-u:u},za=ea.calculateOffset=function(a,b,d){if("absolute"!==O(a,"position",d))return 0;var e="left"===b?"Left":"Top";d=O(a,"margin"+e,d);return a["offset"+e]-(U(a,b,parseFloat(d),d.replace(H,""))||0)},wa=function(a,b){var d,e,f={};if(b=b||X(a,null))if(d=b.length)for(;-1<--d;){var g=b[d];-1!==g.indexOf("-transform")&&Ta!==g||(f[g.replace(J,N)]=b.getPropertyValue(g))}else for(d in b)-1!==d.indexOf("Transform")&&ja!==d||(f[d]=b[d]);else if(b=a.currentStyle||a.style)for(d in b)"string"==typeof d&&void 0===
f[d]&&(f[d.replace(J,N)]=b[d]);return W||(f.opacity=ra(a)),e=bb(a,b,!1),f.rotation=e.rotation,f.skewX=e.skewX,f.scaleX=e.scaleX,f.scaleY=e.scaleY,f.x=e.x,f.y=e.y,pa&&(f.z=e.z,f.rotationX=e.rotationX,f.rotationY=e.rotationY,f.scaleZ=e.scaleZ),f.filters&&delete f.filters,f},ha=function(a,b,d,e,f){var g,n,h,t={},k=a.style;for(n in d)"cssText"!==n&&"length"!==n&&isNaN(n)&&(b[n]!==(g=d[n])||f&&f[n])&&-1===n.indexOf("Origin")&&("number"==typeof g||"string"==typeof g)&&(t[n]="auto"!==g||"left"!==n&&"top"!==
n?""!==g&&"auto"!==g&&"none"!==g||"string"!=typeof b[n]||""===b[n].replace(G,"")?g:0:za(a,n),void 0!==k[n]&&(h=new Da(k,n,k[n],h)));if(e)for(n in e)"className"!==n&&(t[n]=e[n]);return{difs:t,firstMPT:h}},Aa={width:["Left","Right"],height:["Top","Bottom"]},ta=["marginLeft","marginRight","marginTop","marginBottom"],xa=function(a,b){if("contain"===a||"auto"===a||"auto auto"===a)return a+" ";null!=a&&""!==a||(a="0 0");var d=a.split(" "),e=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":d[0],
f=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":d[1];if(3<d.length&&!b){d=a.split(", ").join(",").split(",");a=[];for(b=0;b<d.length;b++)a.push(xa(d[b]));return a.join(",")}return null==f?f="center"===e?"50%":"0":"center"===f&&(f="50%"),("center"===e||isNaN(parseFloat(e))&&-1===(e+"").indexOf("="))&&(e="50%"),a=e+" "+f+(2<d.length?" "+d[2]:""),b&&(b.oxp=-1!==e.indexOf("%"),b.oyp=-1!==f.indexOf("%"),b.oxr="="===e.charAt(1),b.oyr="="===f.charAt(1),b.ox=parseFloat(e.replace(G,"")),b.oy=
parseFloat(f.replace(G,"")),b.v=a),b||a},Sa=function(a,b){return"function"==typeof a&&(a=a(y,w)),"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)||0},Ia=function(a,b){return"function"==typeof a&&(a=a(y,w)),null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)||0},Za=function(a,b,d,e){var f,g,n,h;return"function"==typeof a&&(a=a(y,w)),null==a?n=b:"number"==typeof a?n=
a:(f=a.split("_"),h="="===a.charAt(1),g=(h?parseInt(a.charAt(0)+"1",10)*parseFloat(f[0].substr(2)):parseFloat(f[0]))*(-1===a.indexOf("rad")?1:P)-(h?0:b),f.length&&(e&&(e[d]=b+g),-1!==a.indexOf("short")&&(g%=360,g!==g%180&&(g=0>g?g+360:g-360)),-1!==a.indexOf("_cw")&&0>g?g=(g+3599999999640)%360-360*(g/360|0):-1!==a.indexOf("ccw")&&0<g&&(g=(g-3599999999640)%360-360*(g/360|0))),n=b+g),1E-6>n&&-1E-6<n&&(n=0),n},jb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,
128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pb=function(a,b,d){return a=0>a?a+1:1<a?a-1:a,255*(1>6*a?b+(d-b)*a*6:.5>a?d:2>3*a?b+(d-b)*(2/3-a)*6:b)+.5|0},ua=h.parseColor=function(a,b){var d,e,f,g,n,h,t;if(a)if("number"==typeof a)var k=[a>>16,a>>8&255,255&a];else{if(","===a.charAt(a.length-
1)&&(a=a.substr(0,a.length-1)),jb[a])k=jb[a];else if("#"===a.charAt(0))4===a.length&&(d=a.charAt(1),e=a.charAt(2),f=a.charAt(3),a="#"+d+d+e+e+f+f),a=parseInt(a.substr(1),16),k=[a>>16,a>>8&255,255&a];else if("hsl"===a.substr(0,3))if(k=t=a.match(z),b){if(-1!==a.indexOf("="))return a.match(x)}else{var l=Number(k[0])%360/360;var u=Number(k[1])/100;var p=Number(k[2])/100;e=.5>=p?p*(u+1):p+u-p*u;d=2*p-e;3<k.length&&(k[3]=Number(a[3]));k[0]=pb(l+1/3,d,e);k[1]=pb(l,d,e);k[2]=pb(l-1/3,d,e)}else k=a.match(z)||
jb.transparent;k[0]=Number(k[0]);k[1]=Number(k[1]);k[2]=Number(k[2]);3<k.length&&(k[3]=Number(k[3]))}else k=jb.black;return b&&!t&&(d=k[0]/255,e=k[1]/255,f=k[2]/255,g=Math.max(d,e,f),n=Math.min(d,e,f),p=(g+n)/2,g===n?l=u=0:(h=g-n,u=.5<p?h/(2-g-n):h/(g+n),l=g===d?(e-f)/h+(f>e?6:0):g===e?(f-d)/h+2:(d-e)/h+4,l*=60),k[0]=l+.5|0,k[1]=100*u+.5|0,k[2]=100*p+.5|0),k},vb=function(a,b){var d,e=a.match(qa)||[],f=0,g=e.length?"":a;for(d=0;d<e.length;d++){var n=e[d];var h=a.substr(f,a.indexOf(n,f)-f);f+=h.length+
n.length;n=ua(n,b);3===n.length&&n.push(1);g+=h+(b?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")"}return g+a.substr(f)},qa="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(p in jb)qa+="|"+p+"\\b";qa=new RegExp(qa+")","gi");h.colorStringFilter=function(a){var b,d=a[0]+a[1];qa.test(d)&&(b=-1!==d.indexOf("hsl(")||-1!==d.indexOf("hsla("),a[0]=vb(a[0],b),a[1]=vb(a[1],b));qa.lastIndex=0};b.defaultStringFilter||(b.defaultStringFilter=h.colorStringFilter);var Pa=
function(a,b,d,e){if(null==a)return function(a){return a};var f,g=b?(a.match(qa)||[""])[0]:"",n=a.split(g).join("").match(B)||[],h=a.substr(0,a.indexOf(n[0])),t=")"===a.charAt(a.length-1)?")":"",k=-1!==a.indexOf(" ")?" ":",",l=n.length,u=0<l?n[0].replace(z,""):"";return l?f=b?function(a){var b,p,w;if("number"==typeof a)a+=u;else if(e&&V.test(a)){a=a.replace(V,"|").split("|");for(w=0;w<a.length;w++)a[w]=f(a[w]);return a.join(",")}if(b=(a.match(qa)||[g])[0],p=a.split(b).join("").match(B)||[],w=p.length,
l>w--)for(;++w<l;)p[w]=d?p[(w-1)/2|0]:n[w];return h+p.join(k)+k+b+t+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,g;if("number"==typeof a)a+=u;else if(e&&V.test(a)){a=a.replace(V,"|").split("|");for(g=0;g<a.length;g++)a[g]=f(a[g]);return a.join(",")}if(b=a.match(B)||[],g=b.length,l>g--)for(;++g<l;)b[g]=d?b[(g-1)/2|0]:n[g];return h+b.join(k)+t}:function(a){return a}},ya=function(a){return a=a.split(","),function(b,d,e,f,g,n,h){e=(d+"").split(" ");h={};for(d=0;4>d;d++)h[a[d]]=e[d]=e[d]||
e[(d-1)/2>>0];return f.parse(b,h,g,n)}},Da=(ea._setPluginRatio=function(a){this.plugin.setRatio(a);var b;var d=this.data;for(var e=d.proxy,f=d.firstMPT;f;){var g=e[f.v];f.r?g=Math.round(g):1E-6>g&&-1E-6<g&&(g=0);f.t[f.p]=g;f=f._next}if(d.autoRotate&&(d.autoRotate.rotation=d.mod?d.mod(e.rotation,this.t):e.rotation),1===a||0===a)for(f=d.firstMPT,d=1===a?"e":"b";f;){if(b=f.t,b.type){if(1===b.type){g=b.xs0+b.s+b.xs1;for(a=1;a<b.l;a++)g+=b["xn"+a]+b["xs"+(a+1)];b[d]=g}}else b[d]=b.s+b.xs0;f=f._next}},
function(a,b,d,e,f){this.t=a;this.p=b;this.v=d;this.r=f;e&&(e._prev=this,this._next=e)}),sa=(ea._parseToProxy=function(a,b,d,e,f,g){var n,h,t=e,k={},l={};var u=d._transform;var p=ba;d._transform=null;ba=b;e=a=d.parse(a,b,e,f);ba=p;for(g&&(d._transform=u,t&&(t._prev=null,t._prev&&(t._prev._next=null)));e&&e!==t;){if(1>=e.type&&(n=e.p,l[n]=e.s+e.c,k[n]=e.s,g||(h=new Da(e,"s",n,h,e.r),e.c=0),1===e.type))for(d=e.l;0<--d;)u="xn"+d,n=e.p+"_"+u,l[n]=e.data[u],k[n]=e[u],g||(h=new Da(e,u,n,h,e.rxp[u]));e=
e._next}return{proxy:k,end:l,firstMPT:h,pt:a}},ea.CSSPropTween=function(a,b,e,f,n,h,t,k,l,u,p){this.t=a;this.p=b;this.s=e;this.c=f;this.n=t||b;a instanceof sa||g.push(this.n);this.r=k;this.type=h||0;l&&(this.pr=l,d=!0);this.b=void 0===u?e:u;this.e=void 0===p?e+f:p;n&&(this._next=n,n._prev=this)}),Ea=function(a,b,d,e,f,g){a=new sa(a,b,d,e-d,f,-1,g);return a.b=d,a.e=a.xs0=e,a},ma=h.parseComplex=function(a,b,d,e,f,g,n,t,k,l){d=d||g||"";"function"==typeof e&&(e=e(y,w));n=new sa(a,b,0,0,n,l?2:1,null,!1,
t,d,e);e+="";f&&qa.test(e+d)&&(e=[d,e],h.colorStringFilter(e),d=e[0],e=e[1]);var u,p,r;a=d.split(", ").join(",").split(" ");b=e.split(", ").join(",").split(" ");t=a.length;var F=!1!==q;(-1!==e.indexOf(",")||-1!==d.indexOf(","))&&(a=a.join(" ").replace(V,", ").split(" "),b=b.join(" ").replace(V,", ").split(" "),t=a.length);t!==b.length&&(a=(g||"").split(" "),t=a.length);n.plugin=k;n.setRatio=l;for(d=qa.lastIndex=0;t>d;d++)if(u=a[d],k=b[d],r=parseFloat(u),r||0===r)n.appendXtra("",r,Sa(k,r),k.replace(x,
""),F&&-1!==k.indexOf("px"),!0);else if(f&&qa.test(u)){l=k.indexOf(")")+1;l=")"+(l?k.substr(l):"");var v=-1!==k.indexOf("hsl")&&W;u=ua(u,v);k=ua(k,v);(g=6<u.length+k.length)&&!W&&0===k[3]?(n["xs"+n.l]+=n.l?" transparent":"transparent",n.e=n.e.split(b[d]).join("transparent")):(W||(g=!1),v?n.appendXtra(g?"hsla(":"hsl(",u[0],Sa(k[0],u[0]),",",!1,!0).appendXtra("",u[1],Sa(k[1],u[1]),"%,",!1).appendXtra("",u[2],Sa(k[2],u[2]),g?"%,":"%"+l,!1):n.appendXtra(g?"rgba(":"rgb(",u[0],k[0]-u[0],",",!0,!0).appendXtra("",
u[1],k[1]-u[1],",",!0).appendXtra("",u[2],k[2]-u[2],g?",":l,!0),g&&(u=4>u.length?1:u[3],n.appendXtra("",u,(4>k.length?1:k[3])-u,l,!1)));qa.lastIndex=0}else if(g=u.match(z)){if(p=k.match(x),!p||p.length!==g.length)return n;for(k=l=0;k<g.length;k++){var A=g[k];v=u.indexOf(A,l);n.appendXtra(u.substr(l,v-l),Number(A),Sa(p[k],A),"",F&&"px"===u.substr(v+A.length,2),0===k);l=v+A.length}n["xs"+n.l]+=u.substr(l)}else n["xs"+n.l]+=n.l||n["xs"+n.l]?" "+k:k;if(-1!==e.indexOf("=")&&n.data){l=n.xs0+n.data.s;for(d=
1;d<n.l;d++)l+=n["xs"+d]+n.data["xn"+d];n.e=l+n["xs"+d]}return n.l||(n.type=-1,n.xs0=n.e),n.xfirst||n},la=9;p=sa.prototype;for(p.l=p.pr=0;0<--la;)p["xn"+la]=0,p["xs"+la]="";p.xs0="";p._next=p._prev=p.xfirst=p.data=p.plugin=p.setRatio=p.rxp=null;p.appendXtra=function(a,b,d,e,f,g){var n=this.l;return this["xs"+n]+=g&&(n||this["xs"+n])?" "+a:a||"",d||0===n||this.plugin?(this.l++,this.type=this.setRatio?2:1,this["xs"+this.l]=e||"",0<n?(this.data["xn"+n]=b+d,this.rxp["xn"+n]=f,this["xn"+n]=b,this.plugin||
(this.xfirst=new sa(this,"xn"+n,b,d,this.xfirst||this,0,this.n,f,this.pr),this.xfirst.xs0=0),this):(this.data={s:b+d},this.rxp={},this.s=b,this.c=d,this.r=f,this)):(this["xs"+n]+=b+(e||""),this)};var Oa=function(a,b){b=b||{};this.p=b.prefix?T(a)||a:a;l[a]=l[this.p]=this;this.format=b.formatter||Pa(b.defaultValue,b.color,b.collapsible,b.multi);b.parser&&(this.parse=b.parser);this.clrs=b.color;this.multi=b.multi;this.keyword=b.keyword;this.dflt=b.defaultValue;this.pr=b.priority||0},ia=ea._registerComplexSpecialProp=
function(a,b,d){"object"!=typeof b&&(b={parser:d});var e=a.split(","),f=b.defaultValue;d=d||[f];for(a=0;a<e.length;a++)b.prefix=0===a&&b.prefix,b.defaultValue=d[a]||f,new Oa(e[a],b)},Ga=ea._registerPluginProp=function(a){if(!l[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";ia(a,{parser:function(a,d,e,f,g,n,h){var t=k.com.greensock.plugins[b];t?a=(t._cssRegister(),l[e].parse(a,d,e,f,g,n,h)):(_gsScope.console&&console.log("Error: "+b+" js file not loaded."),a=g);return a}})}};p=Oa.prototype;
p.parseComplex=function(a,b,d,e,f,g){var n,h,t,k,l,u=this.keyword;if(this.multi&&(V.test(d)||V.test(b)?(h=b.replace(V,"|").split("|"),t=d.replace(V,"|").split("|")):u&&(h=[b],t=[d])),t){var p=t.length>h.length?t.length:h.length;for(n=0;p>n;n++)b=h[n]=h[n]||this.dflt,d=t[n]=t[n]||this.dflt,u&&(k=b.indexOf(u),l=d.indexOf(u),k!==l&&(-1===l?h[n]=h[n].split(u).join(""):-1===k&&(h[n]+=" "+u)));b=h.join(", ");d=t.join(", ")}return ma(a,this.p,b,d,this.clrs,this.dflt,e,this.pr,f,g)};p.parse=function(a,b,
d,e,g,n,h){return this.parseComplex(a.style,this.format(O(a,this.p,f,!1,this.dflt)),this.format(b),g,n)};h.registerSpecialProp=function(a,b,d){ia(a,{parser:function(a,e,f,g,n,h,t){n=new sa(a,f,0,0,n,2,f,!1,d);return n.plugin=h,n.setRatio=b(a,e,g._tween,f),n},priority:d})};h.useSVGTransformAttr=!0;var Ma,Ba="scaleX scaleY scaleZ x y z skewX skewY rotation rotationX rotationY perspective xPercent yPercent".split(" "),ja=T("transform"),Ta=fa+"transform",Na=T("transformOrigin"),pa=null!==T("perspective"),
Qa=ea.Transform=function(){this.perspective=parseFloat(h.defaultTransformPerspective)||0;this.force3D=!1!==h.defaultForce3D&&pa?h.defaultForce3D||"auto":!1},Ra=_gsScope.SVGElement,gb=function(a,b,d){var e;a=L.createElementNS("http://www.w3.org/2000/svg",a);var f=/([a-z])([A-Z])/g;for(e in d)a.setAttributeNS(null,e.replace(f,"$1-$2").toLowerCase(),d[e]);return b.appendChild(a),a},La=L.documentElement||{},Ua=function(){var a,b,d,e=u||/Android/i.test(ca)&&!_gsScope.chrome;return L.createElementNS&&!e&&
(a=gb("svg",La),b=gb("rect",a,{width:100,height:50,x:100}),d=b.getBoundingClientRect().width,b.style[Na]="50% 50%",b.style[ja]="scaleX(0.5)",e=d===b.getBoundingClientRect().width&&!(n&&pa),La.removeChild(a)),e}(),$a=function(a,b,d,e,f,g){var n,t,k,l,u,p,w,q,y,r,z,x,F,v=a._gsTransform,A=xb(a,!0);v&&(x=v.xOrigin,F=v.yOrigin);(!e||2>(n=e.split(" ")).length)&&(p=a.getBBox(),0===p.x&&0===p.y&&0===p.width+p.height&&(p={x:parseFloat(a.hasAttribute("x")?a.getAttribute("x"):a.hasAttribute("cx")?a.getAttribute("cx"):
0)||0,y:parseFloat(a.hasAttribute("y")?a.getAttribute("y"):a.hasAttribute("cy")?a.getAttribute("cy"):0)||0,width:0,height:0}),b=xa(b).split(" "),n=[(-1!==b[0].indexOf("%")?parseFloat(b[0])/100*p.width:parseFloat(b[0]))+p.x,(-1!==b[1].indexOf("%")?parseFloat(b[1])/100*p.height:parseFloat(b[1]))+p.y]);d.xOrigin=b=parseFloat(n[0]);d.yOrigin=l=parseFloat(n[1]);e&&A!==ab&&(u=A[0],p=A[1],w=A[2],q=A[3],y=A[4],r=A[5],z=u*q-p*w,z&&(t=q/z*b+-w/z*l+(w*r-q*y)/z,k=-p/z*b+u/z*l-(u*r-p*y)/z,b=d.xOrigin=n[0]=t,l=
d.yOrigin=n[1]=k));v&&(g&&(d.xOffset=v.xOffset,d.yOffset=v.yOffset,v=d),f||!1!==f&&!1!==h.defaultSmoothOrigin?(t=b-x,k=l-F,v.xOffset+=t*A[0]+k*A[2]-t,v.yOffset+=t*A[1]+k*A[3]-k):v.xOffset=v.yOffset=0);g||a.setAttribute("data-svg-origin",n.join(" "))},wb=function(a){var b=aa("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),d=this.parentNode,e=this.nextSibling,f=this.style.cssText;if(La.appendChild(b),b.appendChild(this),this.style.display="block",a)try{var g=this.getBBox();
this._originalGetBBox=this.getBBox;this.getBBox=wb}catch(Ca){}else this._originalGetBBox&&(g=this._originalGetBBox());return e?d.insertBefore(this,e):d.appendChild(this),La.removeChild(b),this.style.cssText=f,g},Va=function(a){var b;if(b=Ra&&a.getCTM)try{b=a.getBBox()}catch(Fa){b=wb.call(a,!0)}return!(!b||a.parentNode&&!a.ownerSVGElement)},ab=[1,0,0,1,0,0],xb=function(a,b){var d,e,f,g,n,h,t=a._gsTransform||new Qa,k=a.style;if(ja?e=O(a,Ta,null,!0):a.currentStyle&&(e=a.currentStyle.filter.match(Y),
e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),t.x||0,t.y||0].join():""),d=!e||"none"===e||"matrix(1, 0, 0, 1, 0, 0)"===e,d&&ja&&((h="none"===X(a).display)||!a.parentNode)&&(h&&(g=k.display,k.display="block"),a.parentNode||(n=1,La.appendChild(a)),e=O(a,Ta,null,!0),d=!e||"none"===e||"matrix(1, 0, 0, 1, 0, 0)"===e,g?k.display=g:h&&Ja(k,"display"),n&&La.removeChild(a)),(t.svg||a.getCTM&&Va(a))&&(d&&-1!==(k[ja]+"").indexOf("matrix")&&(e=k[ja],d=0),f=a.getAttribute("transform"),
d&&f&&(-1!==f.indexOf("matrix")?(e=f,d=0):-1!==f.indexOf("translate")&&(e="matrix(1,0,0,1,"+f.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",d=0))),d)return ab;f=(e||"").match(z)||[];for(la=f.length;-1<--la;)g=Number(f[la]),f[la]=(n=g-(g|=0))?(1E5*n+(0>n?-.5:.5)|0)/1E5+g:g;return b&&6<f.length?[f[0],f[1],f[4],f[5],f[12],f[13]]:f},bb=ea.getTransform=function(a,d,e,f){if(a._gsTransform&&e&&!f)return a._gsTransform;var g,n,t,k=e?a._gsTransform||new Qa:new Qa,l=0>k.scaleX,u=pa?parseFloat(O(a,Na,d,!1,
"0 0 0").split(" ")[2])||k.zOrigin||0:0,p=parseFloat(h.defaultTransformPerspective)||0;if(k.svg=!(!a.getCTM||!Va(a)),k.svg&&($a(a,O(a,Na,d,!1,"50% 50%")+"",k,a.getAttribute("data-svg-origin")),Ma=h.useSVGTransformAttr||Ua),g=xb(a),g!==ab){if(16===g.length){var w,q,y,r;p=g[0];d=g[1];f=g[2];var z=g[3],x=g[4],F=g[5],v=g[6],A=g[7],D=g[8],C=g[9],B=g[10],G=g[12],E=g[13],J=g[14],L=g[11],H=Math.atan2(v,B);k.zOrigin&&(J=-k.zOrigin,G=D*J-g[12],E=C*J-g[13],J=B*J+k.zOrigin-g[14]);k.rotationX=H*P;H&&(r=Math.cos(-H),
t=Math.sin(-H),w=x*r+D*t,q=F*r+C*t,y=v*r+B*t,D=x*-t+D*r,C=F*-t+C*r,B=v*-t+B*r,L=A*-t+L*r,x=w,F=q,v=y);H=Math.atan2(-f,B);k.rotationY=H*P;H&&(r=Math.cos(-H),t=Math.sin(-H),w=p*r-D*t,q=d*r-C*t,y=f*r-B*t,C=d*t+C*r,B=f*t+B*r,L=z*t+L*r,p=w,d=q,f=y);H=Math.atan2(d,p);k.rotation=H*P;H&&(r=Math.cos(-H),t=Math.sin(-H),p=p*r+x*t,q=d*r+F*t,F=d*-t+F*r,v=f*-t+v*r,d=q);k.rotationX&&359.9<Math.abs(k.rotationX)+Math.abs(k.rotation)&&(k.rotationX=k.rotation=0,k.rotationY=180-k.rotationY);k.scaleX=(1E5*Math.sqrt(p*
p+d*d)+.5|0)/1E5;k.scaleY=(1E5*Math.sqrt(F*F+C*C)+.5|0)/1E5;k.scaleZ=(1E5*Math.sqrt(v*v+B*B)+.5|0)/1E5;k.rotationX||k.rotationY?k.skewX=0:(k.skewX=x||F?Math.atan2(x,F)*P+k.rotation:k.skewX||0,90<Math.abs(k.skewX)&&270>Math.abs(k.skewX)&&(l?(k.scaleX*=-1,k.skewX+=0>=k.rotation?180:-180,k.rotation+=0>=k.rotation?180:-180):(k.scaleY*=-1,k.skewX+=0>=k.skewX?180:-180)));k.perspective=L?1/(0>L?-L:L):0;k.x=G;k.y=E;k.z=J;k.svg&&(k.x-=k.xOrigin-(k.xOrigin*p-k.yOrigin*x),k.y-=k.yOrigin-(k.yOrigin*d-k.xOrigin*
F))}else pa&&!f&&g.length&&k.x===g[4]&&k.y===g[5]&&(k.rotationX||k.rotationY)||(w=(r=6<=g.length)?g[0]:1,q=g[1]||0,y=g[2]||0,r=r?g[3]:1,k.x=g[4]||0,k.y=g[5]||0,g=Math.sqrt(w*w+q*q),t=Math.sqrt(r*r+y*y),d=w||q?Math.atan2(q,w)*P:k.rotation||0,f=y||r?Math.atan2(y,r)*P+d:k.skewX||0,90<Math.abs(f)&&270>Math.abs(f)&&(l?(g*=-1,f+=0>=d?180:-180,d+=0>=d?180:-180):(t*=-1,f+=0>=f?180:-180)),k.scaleX=g,k.scaleY=t,k.rotation=d,k.skewX=f,pa&&(k.rotationX=k.rotationY=k.z=0,k.perspective=p,k.scaleZ=1),k.svg&&(k.x-=
k.xOrigin-(k.xOrigin*w+k.yOrigin*y),k.y-=k.yOrigin-(k.xOrigin*q+k.yOrigin*r)));k.zOrigin=u;for(n in k)2E-5>k[n]&&-2E-5<k[n]&&(k[n]=0)}return e&&(a._gsTransform=k,k.svg&&(Ma&&a.style[ja]?b.delayedCall(.001,function(){Ja(a.style,ja)}):!Ma&&a.getAttribute("transform")&&b.delayedCall(.001,function(){a.removeAttribute("transform")}))),k},qb=function(a){var b=this.data,d=-b.rotation*M,e=d+b.skewX*M,f=(Math.cos(d)*b.scaleX*1E5|0)/1E5,g=(Math.sin(d)*b.scaleX*1E5|0)/1E5,n=(Math.sin(e)*-b.scaleY*1E5|0)/1E5,
h=(Math.cos(e)*b.scaleY*1E5|0)/1E5;e=this.t.style;if(d=this.t.currentStyle){var t=g;g=-n;n=-t;var k=d.filter;e.filter="";var l,p;t=this.t.offsetWidth;var w=this.t.offsetHeight,q="absolute"!==d.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+f+", M12="+g+", M21="+n+", M22="+h,r=b.x+t*b.xPercent/100,z=b.y+w*b.yPercent/100;if(null!=b.ox&&(l=(b.oxp?t*b.ox*.01:b.ox)-t/2,p=(b.oyp?w*b.oy*.01:b.oy)-w/2,r+=l-(l*f+p*g),z+=p-(l*n+p*h)),q?(l=t/2,p=w/2,y+=", Dx="+(l-(l*f+p*g)+r)+", Dy="+(p-(l*n+p*h)+
z)+")"):y+=", sizingMethod='auto expand')",-1!==k.indexOf("DXImageTransform.Microsoft.Matrix(")?e.filter=k.replace(da,y):e.filter=y+" "+k,(0===a||1===a)&&1===f&&0===g&&0===n&&1===h&&(q&&-1===y.indexOf("Dx=0, Dy=0")||K.test(k)&&100!==parseFloat(RegExp.$1)||-1===k.indexOf(k.indexOf("Alpha"))&&e.removeAttribute("filter")),!q)for(a=8>u?1:-1,l=b.ieOffsetX||0,p=b.ieOffsetY||0,b.ieOffsetX=Math.round((t-((0>f?-f:f)*t+(0>g?-g:g)*w))/2+r),b.ieOffsetY=Math.round((w-((0>h?-h:h)*w+(0>n?-n:n)*t))/2+z),la=0;4>la;la++)f=
ta[la],g=d[f],t=-1!==g.indexOf("px")?parseFloat(g):U(this.t,f,parseFloat(g),g.replace(H,""))||0,g=t!==b[f]?2>la?-b.ieOffsetX:-b.ieOffsetY:2>la?l-b.ieOffsetX:p-b.ieOffsetY,e[f]=(b[f]=Math.round(t-g*(0===la||2===la?1:a)))+"px"}},rb=ea.set3DTransformRatio=ea.setTransformRatio=function(a){var b,d,e,f,g,h,t,k,l,u,p,w=this.data,q=this.t.style,y=w.rotation,r=w.rotationX,z=w.rotationY,x=w.scaleX,F=w.scaleY,v=w.scaleZ,A=w.x,D=w.y,C=w.z,B=w.svg,O=w.perspective;var G=w.force3D;var E=w.skewY;var J=w.skewX;if(E&&
(J+=E,y+=E),!((1!==a&&0!==a||"auto"!==G||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&G||C||O||z||r)&&1===v||Ma&&B||!pa)return void(y||J||B?(y*=M,h=J*M,d=Math.cos(y)*x,f=Math.sin(y)*x,e=Math.sin(y-h)*-F,g=Math.cos(y-h)*F,h&&"simple"===w.skewType&&(b=Math.tan(h-E*M),b=Math.sqrt(1+b*b),e*=b,g*=b,E&&(b=Math.tan(E*M),b=Math.sqrt(1+b*b),d*=b,f*=b)),B&&(A+=w.xOrigin-(w.xOrigin*d+w.yOrigin*e)+w.xOffset,D+=w.yOrigin-(w.xOrigin*f+w.yOrigin*g)+w.yOffset,Ma&&(w.xPercent||w.yPercent)&&
(u=this.t.getBBox(),A+=.01*w.xPercent*u.width,D+=.01*w.yPercent*u.height),u=1E-6,u>A&&A>-u&&(A=0),u>D&&D>-u&&(D=0)),l=(1E5*d|0)/1E5+","+(1E5*f|0)/1E5+","+(1E5*e|0)/1E5+","+(1E5*g|0)/1E5+","+A+","+D+")",B&&Ma?this.t.setAttribute("transform","matrix("+l):q[ja]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+l):q[ja]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+x+",0,0,"+F+","+A+","+D+")");if(n&&(u=1E-4,u>x&&x>-u&&(x=
v=2E-5),u>F&&F>-u&&(F=v=2E-5),!O||w.z||w.rotationX||w.rotationY||(O=0)),y||J){y*=M;var L=d=Math.cos(y);var H=f=Math.sin(y);J&&(y-=J*M,L=Math.cos(y),H=Math.sin(y),"simple"===w.skewType&&(b=Math.tan((J-E)*M),b=Math.sqrt(1+b*b),L*=b,H*=b,w.skewY&&(b=Math.tan(E*M),b=Math.sqrt(1+b*b),d*=b,f*=b)));e=-H;g=L}else{if(!(z||r||1!==v||O||B))return void(q[ja]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+A+"px,"+D+"px,"+C+"px)"+(1!==x||1!==F?" scale("+x+","+
F+")":""));d=g=1;e=f=0}J=1;a=h=G=E=t=k=0;var U=O?-1/O:0;l=w.zOrigin;u=1E-6;(y=z*M)&&(L=Math.cos(y),H=Math.sin(y),G=-H,t=U*-H,a=d*H,h=f*H,J=L,U*=L,d*=L,f*=L);(y=r*M)&&(L=Math.cos(y),H=Math.sin(y),b=e*L+a*H,p=g*L+h*H,E=J*H,k=U*H,a=e*-H+a*L,h=g*-H+h*L,J*=L,U*=L,e=b,g=p);1!==v&&(a*=v,h*=v,J*=v,U*=v);1!==F&&(e*=F,g*=F,E*=F,k*=F);1!==x&&(d*=x,f*=x,G*=x,t*=x);(l||B)&&(l&&(A+=a*-l,D+=h*-l,C+=J*-l+l),B&&(A+=w.xOrigin-(w.xOrigin*d+w.yOrigin*e)+w.xOffset,D+=w.yOrigin-(w.xOrigin*f+w.yOrigin*g)+w.yOffset),u>A&&
A>-u&&(A="0"),u>D&&D>-u&&(D="0"),u>C&&C>-u&&(C=0));l=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(";l=l+((u>d&&d>-u?"0":d)+","+(u>f&&f>-u?"0":f)+","+(u>G&&G>-u?"0":G))+(","+(u>t&&t>-u?"0":t)+","+(u>e&&e>-u?"0":e)+","+(u>g&&g>-u?"0":g));r||z||1!==v?(l+=","+(u>E&&E>-u?"0":E)+","+(u>k&&k>-u?"0":k)+","+(u>a&&a>-u?"0":a),l+=","+(u>h&&h>-u?"0":h)+","+(u>J&&J>-u?"0":J)+","+(u>U&&U>-u?"0":U)+","):l+=",0,0,0,0,1,0,";l+=A+","+D+","+C+","+(O?1+-C/O:1)+")";q[ja]=l};
p=Qa.prototype;p.x=p.y=p.z=p.skewX=p.skewY=p.rotation=p.rotationX=p.rotationY=p.zOrigin=p.xPercent=p.yPercent=p.xOffset=p.yOffset=0;p.scaleX=p.scaleY=p.scaleZ=1;ia("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(a,b,d,e,g,n,t){if(e._lastParsedTransform===
t)return g;e._lastParsedTransform=t;var k,l=t.scale&&"function"==typeof t.scale?t.scale:0;"function"==typeof t[d]&&(k=t[d],t[d]=b);l&&(t.scale=l(y,a));var u,p,q,r,z;b=a._gsTransform;var x=a.style,F=Ba.length,v={},A=bb(a,f,!0,t.parseTransform),D=t.transform&&("function"==typeof t.transform?t.transform(y,w):t.transform);if(e._transform=A,D&&"string"==typeof D&&ja){var C=S.style;C[ja]=D;C.display="block";C.position="absolute";L.body.appendChild(S);var B=bb(S,null,!1);A.svg&&(q=A.xOrigin,r=A.yOrigin,
B.x-=A.xOffset,B.y-=A.yOffset,(t.transformOrigin||t.svgOrigin)&&(D={},$a(a,xa(t.transformOrigin),D,t.svgOrigin,t.smoothOrigin,!0),q=D.xOrigin,r=D.yOrigin,B.x-=D.xOffset-A.xOffset,B.y-=D.yOffset-A.yOffset),(q||r)&&(z=xb(S,!0),B.x-=q-(q*z[0]+r*z[2]),B.y-=r-(q*z[1]+r*z[3])));L.body.removeChild(S);B.perspective||(B.perspective=A.perspective);null!=t.xPercent&&(B.xPercent=Ia(t.xPercent,A.xPercent));null!=t.yPercent&&(B.yPercent=Ia(t.yPercent,A.yPercent))}else if("object"==typeof t){if(B={scaleX:Ia(null!=
t.scaleX?t.scaleX:t.scale,A.scaleX),scaleY:Ia(null!=t.scaleY?t.scaleY:t.scale,A.scaleY),scaleZ:Ia(t.scaleZ,A.scaleZ),x:Ia(t.x,A.x),y:Ia(t.y,A.y),z:Ia(t.z,A.z),xPercent:Ia(t.xPercent,A.xPercent),yPercent:Ia(t.yPercent,A.yPercent),perspective:Ia(t.transformPerspective,A.perspective)},u=t.directionalRotation,null!=u)if("object"==typeof u)for(C in u)t[C]=u[C];else t.rotation=u;"string"==typeof t.x&&-1!==t.x.indexOf("%")&&(B.x=0,B.xPercent=Ia(t.x,A.xPercent));"string"==typeof t.y&&-1!==t.y.indexOf("%")&&
(B.y=0,B.yPercent=Ia(t.y,A.yPercent));B.rotation=Za("rotation"in t?t.rotation:"shortRotation"in t?t.shortRotation+"_short":"rotationZ"in t?t.rotationZ:A.rotation,A.rotation,"rotation",v);pa&&(B.rotationX=Za("rotationX"in t?t.rotationX:"shortRotationX"in t?t.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",v),B.rotationY=Za("rotationY"in t?t.rotationY:"shortRotationY"in t?t.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",v));B.skewX=Za(t.skewX,A.skewX);B.skewY=Za(t.skewY,
A.skewY)}pa&&null!=t.force3D&&(A.force3D=t.force3D,p=!0);A.skewType=t.skewType||A.skewType||h.defaultSkewType;for((u=A.force3D||A.z||A.rotationX||A.rotationY||B.z||B.rotationX||B.rotationY||B.perspective)||null==t.scale||(B.scaleZ=1);-1<--F;){var G=Ba[F];D=B[G]-A[G];(1E-6<D||-1E-6>D||null!=t[G]||null!=ba[G])&&(p=!0,g=new sa(A,G,A[G],D,g),G in v&&(g.e=v[G]),g.xs0=0,g.plugin=n,e._overwriteProps.push(g.n))}return D=t.transformOrigin,A.svg&&(D||t.svgOrigin)&&(q=A.xOffset,r=A.yOffset,$a(a,xa(D),B,t.svgOrigin,
t.smoothOrigin),g=Ea(A,"xOrigin",(b?A:B).xOrigin,B.xOrigin,g,"transformOrigin"),g=Ea(A,"yOrigin",(b?A:B).yOrigin,B.yOrigin,g,"transformOrigin"),(q!==A.xOffset||r!==A.yOffset)&&(g=Ea(A,"xOffset",b?q:A.xOffset,A.xOffset,g,"transformOrigin"),g=Ea(A,"yOffset",b?r:A.yOffset,A.yOffset,g,"transformOrigin")),D="0px 0px"),(D||pa&&u&&A.zOrigin)&&(ja?(p=!0,G=Na,D=(D||O(a,G,f,!1,"50% 50%"))+"",g=new sa(x,G,0,0,g,-1,"transformOrigin"),g.b=x[G],g.plugin=n,pa?(C=A.zOrigin,D=D.split(" "),A.zOrigin=(2<D.length&&(0===
C||"0px"!==D[2])?parseFloat(D[2]):C)||0,g.xs0=g.e=D[0]+" "+(D[1]||"50%")+" 0px",g=new sa(A,"zOrigin",0,0,g,-1,g.n),g.b=C,g.xs0=g.e=A.zOrigin):g.xs0=g.e=D):xa(D+"",A)),p&&(e._transformType=A.svg&&Ma||!u&&3!==this._transformType?2:3),k&&(t[d]=k),l&&(t.scale=l),g},prefix:!0});ia("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"});ia("borderRadius",{defaultValue:"0px",parser:function(a,b,d,g,n,h){b=this.format(b);var t,k,l,u,p,w,q,y,r,z=["borderTopLeftRadius",
"borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],x=a.style;g=parseFloat(a.offsetWidth);h=parseFloat(a.offsetHeight);b=b.split(" ");for(t=0;t<z.length;t++){this.p.indexOf("border")&&(z[t]=T(z[t]));var F=l=O(a,z[t],f,!1,"0px");-1!==F.indexOf(" ")&&(l=F.split(" "),F=l[0],l=l[1]);var A=k=b[t];var v=parseFloat(F);var D=F.substr((v+"").length);(w="="===A.charAt(1))?(u=parseInt(A.charAt(0)+"1",10),A=A.substr(2),u*=parseFloat(A),p=A.substr((u+"").length-(0>u?1:0))||""):(u=parseFloat(A),
p=A.substr((u+"").length));""===p&&(p=e[d]||D);p!==D&&(q=U(a,"borderLeft",v,D),y=U(a,"borderTop",v,D),"%"===p?(F=q/g*100+"%",l=y/h*100+"%"):"em"===p?(r=U(a,"borderLeft",1,"em"),F=q/r+"em",l=y/r+"em"):(F=q+"px",l=y+"px"),w&&(A=parseFloat(F)+u+p,k=parseFloat(l)+u+p));n=ma(x,z[t],F+" "+l,A+" "+k,!1,"0px",n)}return n},prefix:!0,formatter:Pa("0px 0px 0px 0px",!1,!0)});ia("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(a,b,d,
e,g,n){return ma(a.style,d,this.format(O(a,d,f,!1,"0px 0px")),this.format(b),!1,"0px",g)},prefix:!0,formatter:Pa("0px 0px",!1,!0)});ia("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,d,e,g,n){var h,t;d=f||X(a,null);d=this.format((d?u?d.getPropertyValue("background-position-x")+" "+d.getPropertyValue("background-position-y"):d.getPropertyValue("background-position"):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0");var k=this.format(b);if(-1!==d.indexOf("%")!=
(-1!==k.indexOf("%"))&&2>k.split(",").length&&(h=O(a,"backgroundImage").replace(E,""),h&&"none"!==h)){b=d.split(" ");e=k.split(" ");Z.setAttribute("src",h);for(h=2;-1<--h;){d=b[h];var l=-1!==d.indexOf("%");l!==(-1!==e[h].indexOf("%"))&&(t=0===h?a.offsetWidth-Z.width:a.offsetHeight-Z.height,b[h]=l?parseFloat(d)/100*t+"px":parseFloat(d)/t*100+"%")}d=b.join(" ")}return this.parseComplex(a.style,d,k,g,n)},formatter:xa});ia("backgroundSize",{defaultValue:"0 0",formatter:function(a){return a+="",xa(-1===
a.indexOf(" ")?a+" "+a:a)}});ia("perspective",{defaultValue:"0px",prefix:!0});ia("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0});ia("transformStyle",{prefix:!0});ia("backfaceVisibility",{prefix:!0});ia("userSelect",{prefix:!0});ia("margin",{parser:ya("marginTop,marginRight,marginBottom,marginLeft")});ia("padding",{parser:ya("paddingTop,paddingRight,paddingBottom,paddingLeft")});ia("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,d,e,g,n){var h,t,k;return 9>u?(t=a.currentStyle,
k=8>u?" ":",",h="rect("+t.clipTop+k+t.clipRight+k+t.clipBottom+k+t.clipLeft+")",b=this.format(b).split(",").join(k)):(h=this.format(O(a,this.p,f,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,g,n)}});ia("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0});ia("autoRound,strictUnits",{parser:function(a,b,d,e,f){return f}});ia("border",{defaultValue:"0px solid #000",parser:function(a,b,d,e,g,n){d=O(a,"borderTopWidth",f,!1,"0px");b=this.format(b).split(" ");e=b[0].replace(H,
"");return"px"!==e&&(d=parseFloat(d)/U(a,"borderTopWidth",1,e)+e),this.parseComplex(a.style,this.format(d+" "+O(a,"borderTopStyle",f,!1,"solid")+" "+O(a,"borderTopColor",f,!1,"#000")),b.join(" "),g,n)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(qa)||["#000"])[0]}});ia("borderWidth",{parser:ya("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});ia("float,cssFloat,styleFloat",{parser:function(a,b,d,e,f,g){a=a.style;e="cssFloat"in
a?"cssFloat":"styleFloat";return new sa(a,e,0,0,f,-1,d,!1,0,a[e],b)}});var Wa=function(a){var b,d=this.t,e=d.filter||O(this.data,"filter")||"";a=this.s+this.c*a|0;100===a&&(-1===e.indexOf("atrix(")&&-1===e.indexOf("radient(")&&-1===e.indexOf("oader(")?(d.removeAttribute("filter"),b=!O(this.data,"filter")):(d.filter=e.replace(D,""),b=!0));b||(this.xn1&&(d.filter=e=e||"alpha(opacity="+a+")"),-1===e.indexOf("pacity")?0===a&&this.xn1||(d.filter=e+" alpha(opacity="+a+")"):d.filter=e.replace(K,"opacity="+
a))};ia("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,d,e,g,n){var h=parseFloat(O(a,"opacity",f,!1,"1")),t=a.style,k="autoAlpha"===d;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),k&&1===h&&"hidden"===O(a,"visibility",f)&&0!==b&&(h=0),W?g=new sa(t,"opacity",h,b-h,g):(g=new sa(t,"opacity",100*h,100*(b-h),g),g.xn1=k?1:0,t.zoom=1,g.type=2,g.b="alpha(opacity="+g.s+")",g.e="alpha(opacity="+(g.s+g.c)+")",g.data=a,g.plugin=n,g.setRatio=
Wa),k&&(g=new sa(t,"visibility",0,0,g,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),g.xs0="inherit",e._overwriteProps.push(g.n),e._overwriteProps.push(d)),g}});var Ja=function(a,b){b&&(a.removeProperty?(("ms"===b.substr(0,2)||"webkit"===b.substr(0,6))&&(b="-"+b),a.removeProperty(b.replace(C,"-$1").toLowerCase())):a.removeAttribute(b))},Xa=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,d=this.t.style;b;)b.v?
d[b.p]=b.v:Ja(d,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};ia("className",{parser:function(a,b,e,g,n,h,t){var k,l,u,p=a.getAttribute("class")||"",w=a.style.cssText;if(n=g._classNamePT=new sa(a,e,0,0,n,2),n.setRatio=Xa,n.pr=-11,d=!0,n.b=p,e=wa(a,f),l=a._gsClassPT){var q={};for(u=l.data;u;)q[u.p]=1,u=u._next;l.setRatio(1)}return a._gsClassPT=n,n.e="="!==b.charAt(1)?b:p.replace(new RegExp("(?:\\s|^)"+
b.substr(2)+"(?![\\w-])"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),a.setAttribute("class",n.e),k=ha(a,e,wa(a),t,q),a.setAttribute("class",p),n.data=k.firstMPT,a.style.cssText=w,n.xfirst=g.parse(a,k.difs,n,h)}});var hb=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,d,e=this.t.style,f=l.transform.parse;if("all"===this.e){e.cssText="";var g=!0}else for(a=this.e.split(" ").join("").split(","),b=a.length;-1<--b;){var n=a[b];l[n]&&
(l[n].parse===f?g=!0:n="transformOrigin"===n?Na:l[n].p);Ja(e,n)}g&&(Ja(e,ja),d=this.t._gsTransform,d&&(d.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};ia("clearProps",{parser:function(a,b,e,f,g){return g=new sa(a,e,0,0,g,2),g.setRatio=hb,g.e=b,g.pr=-10,g.data=f._tween,d=!0,g}});p=["bezier","throwProps","physicsProps","physics2D"];for(la=p.length;la--;)Ga(p[la]);p=h.prototype;p._firstPT=p._lastParsedTransform=p._transform=null;p._onInitTween=
function(a,b,n,k){if(!a.nodeType)return!1;this._target=w=a;this._tween=n;this._vars=b;y=k;q=b.autoRound;d=!1;e=b.suffixMap||h.suffixMap;f=X(a,"");g=this._overwriteProps;var u,p,z,x,A;k=a.style;if(r&&""===k.zIndex&&(u=O(a,"zIndex",f),("auto"===u||""===u)&&this._addLazySet(k,"zIndex",0)),"string"==typeof b&&(x=k.cssText,u=wa(a,f),k.cssText=x+";"+b,u=ha(a,u,wa(a)).difs,!W&&F.test(b)&&(u.opacity=parseFloat(RegExp.$1)),b=u,k.cssText=x),b.className?this._firstPT=p=l.className.parse(a,b.className,"className",
this,null,null,b):this._firstPT=p=this.parse(a,b,null),this._transformType){b=3===this._transformType;ja?v&&(r=!0,""===k.zIndex&&(z=O(a,"zIndex",f),("auto"===z||""===z)&&this._addLazySet(k,"zIndex",0)),t&&this._addLazySet(k,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))):k.zoom=1;for(z=p;z&&z._next;)z=z._next;b=new sa(a,"transform",0,0,null,2);this._linkCSSP(b,null,z);b.setRatio=ja?rb:qb;b.data=this._transform||bb(a,f,!0);b.tween=n;b.pr=-1;g.pop()}if(d){for(;p;){a=
p._next;for(z=x;z&&z.pr>p.pr;)z=z._next;(p._prev=z?z._prev:A)?p._prev._next=p:x=p;(p._next=z)?z._prev=p:A=p;p=a}this._firstPT=x}return!0};p.parse=function(a,b,d,g){var n,h,t,k,u,p=a.style;for(n in b){var r=b[n];"function"==typeof r&&(r=r(y,w));if(h=l[n])d=h.parse(a,r,n,this,d,g,b);else{h=O(a,n,f)+"";var z="string"==typeof r;if("color"===n||"fill"===n||"stroke"===n||-1!==n.indexOf("Color")||z&&A.test(r))z||(r=ua(r),r=(3<r.length?"rgba(":"rgb(")+r.join(",")+")"),d=ma(p,n,h,r,!0,"transparent",d,0,g);
else if(z&&ka.test(r))d=ma(p,n,h,r,!0,null,d,0,g);else{var x=(t=parseFloat(h))||0===t?h.substr((t+"").length):"";if(""===h||"auto"===h)if("width"===n||"height"===n){t=a;var F=n;x=f;if("svg"===(t.nodeName+"").toLowerCase())t=(x||X(t))[F]||0;else if(t.getCTM&&Va(t))t=t.getBBox()[F]||0;else{var v=parseFloat("width"===F?t.offsetWidth:t.offsetHeight);F=Aa[F];var D=F.length;for(x=x||X(t,null);-1<--D;)v-=parseFloat(O(t,"padding"+F[D],x,!0))||0,v-=parseFloat(O(t,"border"+F[D]+"Width",x,!0))||0;t=v}x="px"}else"left"===
n||"top"===n?(t=za(a,n,f),x="px"):(t="opacity"!==n?0:1,x="");(v=z&&"="===r.charAt(1))?(k=parseInt(r.charAt(0)+"1",10),r=r.substr(2),k*=parseFloat(r),u=r.replace(H,"")):(k=parseFloat(r),u=z?r.replace(H,""):"");""===u&&(u=n in e?e[n]:x);r=k||0===k?(v?k+t:k)+u:b[n];x!==u&&""!==u&&(k||0===k)&&t&&(t=U(a,n,t,x),"%"===u?(t/=U(a,n,100,"%")/100,!0!==b.strictUnits&&(h=t+"%")):"em"===u||"rem"===u||"vw"===u||"vh"===u?t/=U(a,n,1,u):"px"!==u&&(k=U(a,n,k,u),u="px"),v&&(k||0===k)&&(r=k+t+u));v&&(k+=t);!t&&0!==t||
!k&&0!==k?void 0!==p[n]&&(r||"NaN"!=r+""&&null!=r)?(d=new sa(p,n,k||t||0,0,d,-1,n,!1,0,h,r),d.xs0="none"!==r||"display"!==n&&-1===n.indexOf("Style")?r:h):_gsScope.console&&console.log("invalid "+n+" tween value: "+b[n]):(d=new sa(p,n,t,k-t,d,0,n,!1!==q&&("px"===u||"zIndex"===n),0,h,r),d.xs0=u)}}g&&d&&!d.plugin&&(d.plugin=g)}return d};p.setRatio=function(a){var b,d,e=this._firstPT;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&
0!==this._tween._time||-1E-6===this._tween._rawPrevTime)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{var f=e.xs0+b+e.xs1;for(d=1;d<e.l;d++)f+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=f}else-1===
e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;){if(2!==e.type)if(e.r&&-1!==e.type)if(b=Math.round(e.s+e.c),e.type){if(1===e.type){f=e.xs0+b+e.xs1;for(d=1;d<e.l;d++)f+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=f}}else e.t[e.p]=b+e.xs0;else e.t[e.p]=e.e;else e.setRatio(a);e=e._next}};p._enableTransforms=function(a){this._transform=this._transform||bb(this._target,f,!0);this._transformType=this._transform.svg&&
Ma||!a&&3!==this._transformType?2:3};var db=function(a){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,!0)};p._addLazySet=function(a,b,d){a=this._firstPT=new sa(a,b,0,0,this._firstPT,2);a.e=d;a.setRatio=db;a.data=this};p._linkCSSP=function(a,b,d,e){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,e=!0),d?d._next=a:e||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=d),a};p._mod=function(a){for(var b=
this._firstPT;b;)"function"==typeof a[b.p]&&a[b.p]===Math.round&&(b.r=1),b=b._next};p._kill=function(b){var d,e,f,g=b;if(b.autoAlpha||b.alpha){g={};for(e in b)g[e]=b[e];g.opacity=1;g.autoAlpha&&(g.visibility=1)}b.className&&(d=this._classNamePT)&&(f=d.xfirst,f&&f._prev?this._linkCSSP(f._prev,d._next,f._prev._prev):f===this._firstPT&&(this._firstPT=d._next),d._next&&this._linkCSSP(d._next,d._next._next,f._prev),this._classNamePT=null);for(d=this._firstPT;d;)d.plugin&&d.plugin!==e&&d.plugin._kill&&
(d.plugin._kill(b),e=d.plugin),d=d._next;return a.prototype._kill.call(this,g)};var Ya=function(a,b,d){var e;if(a.slice)for(e=a.length;-1<--e;)Ya(a[e],b,d);else for(a=a.childNodes,e=a.length;-1<--e;){var f=a[e];var g=f.type;f.style&&(b.push(wa(f)),d&&d.push(f));1!==g&&9!==g&&11!==g||!f.childNodes.length||Ya(f,b,d)}};return h.cascadeTo=function(a,d,e){var f,g;var n=b.to(a,d,e);var h=[n],t=[],k=[],u=[],l=b._internals.reservedProps;a=n._targets||n.target;Ya(a,t,u);n.render(d,!0,!0);Ya(a,k);n.render(0,
!0,!0);n._enabled(!0);for(a=u.length;-1<--a;)if(f=ha(u[a],t[a],k[a]),f.firstMPT){f=f.difs;for(g in e)l[g]&&(f[g]=e[g]);n={};for(g in f)n[g]=t[a][g];h.push(b.fromTo(u[a],d,n,f))}return h},a.activate([h]),h},!0);(function(){var a=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(a,d,e){return this._tween=e,!0}}).prototype;a._onInitAllProps=function(){for(var a,d,e,f=this._tween,g=f.vars.roundProps.join?f.vars.roundProps:f.vars.roundProps.split(","),h=g.length,
k={},l=f._propLookup.roundProps;-1<--h;)k[g[h]]=Math.round;for(h=g.length;-1<--h;)for(a=g[h],d=f._firstPT;d;){e=d._next;if(d.pg)d.t._mod(k);else if(d.n===a)if(2===d.f&&d.t)for(d=d.t._firstPT;d;)d.f||d.blob||(d.m=Math.round),d=d._next;else this._add(d.t,a,d.s,d.c),e&&(e._prev=d._prev),d._prev?d._prev._next=e:f._firstPT===d&&(f._firstPT=e),d._next=d._prev=null,f._propLookup[a]=l;d=e}return!1};a._add=function(a,d,e,f){this._addTween(a,d,e,e+f,d,Math.round);this._overwriteProps.push(d)}})();(function(){_gsScope._gsDefine.plugin({propName:"attr",
API:2,version:"0.6.0",init:function(a,b,d,e){var f;if("function"!=typeof a.setAttribute)return!1;for(f in b)d=b[f],"function"==typeof d&&(d=d(e,a)),this._addTween(a,"setAttribute",a.getAttribute(f)+"",d+"",f,!1,f),this._overwriteProps.push(f);return!0}})})();_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(a,b,d,e){"object"!=typeof b&&(b={rotation:b});this.finals={};var f,g,h,k,l,p;d=!0===b.useRadians?2*Math.PI:360;for(f in b)"useRadians"!==f&&(k=b[f],
"function"==typeof k&&(k=k(e,a)),p=(k+"").split("_"),g=p[0],h=parseFloat("function"!=typeof a[f]?a[f]:a[f.indexOf("set")||"function"!=typeof a["get"+f.substr(3)]?f:"get"+f.substr(3)]()),k=this.finals[f]="string"==typeof g&&"="===g.charAt(1)?h+parseInt(g.charAt(0)+"1",10)*Number(g.substr(2)):Number(g)||0,l=k-h,p.length&&(g=p.join("_"),-1!==g.indexOf("short")&&(l%=d,l!==l%(d/2)&&(l=0>l?l+d:l-d)),-1!==g.indexOf("_cw")&&0>l?l=(l+9999999999*d)%d-(l/d|0)*d:-1!==g.indexOf("ccw")&&0<l&&(l=(l-9999999999*d)%
d-(l/d|0)*d)),(1E-6<l||-1E-6>l)&&(this._addTween(a,f,h,h+l,f),this._overwriteProps.push(f)));return!0},set:function(a){if(1!==a)this._super.setRatio.call(this,a);else for(a=this._firstPT;a;)a.f?a.t[a.p](this.finals[a.p]):a.t[a.p]=this.finals[a.p],a=a._next}})._autoCSS=!0;_gsScope._gsDefine("easing.Back",["easing.Ease"],function(a){var b,d,e,f=_gsScope.GreenSockGlobals||_gsScope,g=2*Math.PI,h=Math.PI/2,k=f.com.greensock._class,l=function(b,d){b=k("easing."+b,function(){},!0);var e=b.prototype=new a;
return e.constructor=b,e.getRatio=d,b},p=a.register||function(){},q=function(a,b,d,e,f){b=k("easing."+a,{easeOut:new b,easeIn:new d,easeInOut:new e},!0);return p(b,a),b},r=function(a,b,d){this.t=a;this.v=b;d&&(this.next=d,d.prev=this,this.c=d.v-b,this.gap=d.t-a)},v=function(b,d){var e=k("easing."+b,function(a){this._p1=a||0===a?a:1.70158;this._p2=1.525*this._p1},!0);b=e.prototype=new a;return b.constructor=e,b.getRatio=d,b.config=function(a){return new e(a)},e};v=q("Back",v("BackOut",function(a){return--a*
a*((this._p1+1)*a+this._p1)+1}),v("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),v("BackInOut",function(a){return 1>(a*=2)?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)}));var n=k("easing.SlowMo",function(a,b,d){null==a?a=.7:1<a&&(a=1);this._p=1!==a?b||0===b?b:.7:0;this._p1=(1-a)/2;this._p2=a;this._p3=this._p1+this._p2;this._calcEnd=!0===d},!0),t=n.prototype=new a;return t.constructor=n,t.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?
1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},n.ease=new n(.7,.7),t.config=n.config=function(a,b,d){return new n(a,b,d)},b=k("easing.SteppedEase",function(a){a=a||1;this._p1=1/a;this._p2=a+1},!0),t=b.prototype=new a,t.constructor=b,t.getRatio=function(a){return 0>a?a=0:1<=a&&(a=.999999999),(this._p2*a>>0)*this._p1},t.config=b.config=function(a){return new b(a)},d=k("easing.RoughEase",
function(b){b=b||{};for(var d,e,f,g,n=b.taper||"none",h=[],t=0,k=g=0|(b.points||20),l=!1!==b.randomize,u=!0===b.clamp,p=b.template instanceof a?b.template:null,q="number"==typeof b.strength?.4*b.strength:.4;-1<--k;)b=l?Math.random():1/g*k,d=p?p.getRatio(b):b,"none"===n?e=q:"out"===n?(f=1-b,e=f*f*q):"in"===n?e=b*b*q:.5>b?(f=2*b,e=f*f*.5*q):(f=2*(1-b),e=f*f*.5*q),l?d+=Math.random()*e-.5*e:k%2?d+=.5*e:d-=.5*e,u&&(1<d?d=1:0>d&&(d=0)),h[t++]={x:b,y:d};h.sort(function(a,b){return a.x-b.x});e=new r(1,1,
null);for(k=g;-1<--k;)g=h[k],e=new r(g.x,g.y,e);this._prev=new r(0,0,0!==e.t?e:e.next)},!0),t=d.prototype=new a,t.constructor=d,t.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},t.config=function(a){return new d(a)},d.ease=new d,q("Bounce",l("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/
2.75)*a+.984375}),l("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),l("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),q("Circ",l("CircOut",function(a){return Math.sqrt(1- --a*a)}),l("CircIn",function(a){return-(Math.sqrt(1-
a*a)-1)}),l("CircInOut",function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),e=function(b,d,e){var f=k("easing."+b,function(a,b){this._p1=1<=a?a:1;this._p2=(b||e)/(1>a?a:1);this._p3=this._p2/g*(Math.asin(1/this._p1)||0);this._p2=g/this._p2},!0);b=f.prototype=new a;return b.constructor=f,b.getRatio=d,b.config=function(a,b){return new f(a,b)},f},q("Elastic",e("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*this._p2)+1},.3),e("ElasticIn",
function(a){return-(this._p1*Math.pow(2,10*--a)*Math.sin((a-this._p3)*this._p2))},.3),e("ElasticInOut",function(a){return 1>(a*=2)?-.5*this._p1*Math.pow(2,10*--a)*Math.sin((a-this._p3)*this._p2):this._p1*Math.pow(2,-10*--a)*Math.sin((a-this._p3)*this._p2)*.5+1},.45)),q("Expo",l("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),l("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),l("ExpoInOut",function(a){return 1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),q("Sine",l("SineOut",
function(a){return Math.sin(a*h)}),l("SineIn",function(a){return-Math.cos(a*h)+1}),l("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),k("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),p(f.SlowMo,"SlowMo","ease,"),p(d,"RoughEase","ease,"),p(b,"SteppedEase","ease,"),v},!0)});_gsScope._gsDefine&&_gsScope._gsQueue.pop()();
(function(a,b){var d={},e=a.document,f=a.GreenSockGlobals=a.GreenSockGlobals||a;if(!f.TweenLite){var g,h=function(a){var b=a.split("."),d=f;for(a=0;a<b.length;a++)d[b[a]]=d=d[b[a]]||{};return d},k=h("com.greensock"),l=function(a){var b,d=[],e=a.length;for(b=0;b!==e;d.push(a[b++]));return d},p=function(){},q=function(){var a=Object.prototype.toString,b=a.call([]);return function(d){return null!=d&&(d instanceof Array||"object"==typeof d&&!!d.push&&a.call(d)===b)}}(),r={},v=function(e,g,n,t){this.sc=
r[e]?r[e].sc:[];r[e]=this;this.gsClass=null;this.func=n;var k=[];this.check=function(l){for(var u,p,w,q,y,z=g.length,x=z;-1<--z;)(u=r[g[z]]||new v(g[z],[])).gsClass?(k[z]=u.gsClass,x--):l&&u.sc.push(this);if(0===x&&n){if(p=("com.greensock."+e).split("."),w=p.pop(),q=h(p.join("."))[w]=this.gsClass=n.apply(n,k),t)if(f[w]=d[w]=q,y="undefined"!=typeof module&&module.exports,!y&&"function"==typeof define&&define.amd)define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return q});
else if(y)if(e===b)for(z in module.exports=d[b]=q,d)q[z]=d[z];else d[b]&&(d[b][w]=q);for(z=0;z<this.sc.length;z++)this.sc[z].check()}};this.check(!0)},n=a._gsDefine=function(a,b,d,e){return new v(a,b,d,e)},t=k._class=function(a,b,d){return b=b||function(){},n(a,[],function(){return b},d),b};n.globals=f;var u=[0,0,1,1],w=t("easing.Ease",function(a,b,d,e){this._func=a;this._type=d||0;this._power=e||0;this._params=b?u.concat(b):u},!0),y=w.map={},z=w.register=function(a,b,d,e){var f;b=b.split(",");for(var g=
b.length,n=(d||"easeIn,easeOut,easeInOut").split(",");-1<--g;){var h=b[g];d=e?t("easing."+h,null,!0):k.easing[h]||{};for(f=n.length;-1<--f;){var l=n[f];y[h+"."+l]=y[l+h]=d[l]=a.getRatio?a:a[l]||new a}}};var x=w.prototype;x._calcEnd=!1;x.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,d=this._power,e=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===d?e*=e:2===d?e*=e*e:3===d?e*=e*e*e:4===d&&(e*=e*e*e*e),1===b?1-e:2===b?e:.5>a?e/2:1-e/2};
var B=["Linear","Quad","Cubic","Quart","Quint,Strong"];for(g=B.length;-1<--g;)x=B[g]+",Power"+g,z(new w(null,null,1,g),x,"easeOut",!0),z(new w(null,null,2,g),x,"easeIn"+(0===g?",easeNone":"")),z(new w(null,null,3,g),x,"easeInOut");y.linear=k.easing.Linear.easeIn;y.swing=k.easing.Quad.easeInOut;var G=t("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});x=G.prototype;x.addEventListener=function(a,b,d,e,f){f=f||0;var g,n=this._listeners[a],h=0;this!==C||X||C.wake();null==
n&&(this._listeners[a]=n=[]);for(g=n.length;-1<--g;)a=n[g],a.c===b&&a.s===d?n.splice(g,1):0===h&&a.pr<f&&(h=g+1);n.splice(h,0,{c:b,s:d,up:e,pr:f})};x.removeEventListener=function(a,b){var d=this._listeners[a];if(d)for(a=d.length;-1<--a;)if(d[a].c===b)return void d.splice(a,1)};x.dispatchEvent=function(a){var b,d,e=this._listeners[a];if(e){var f=e.length;1<f&&(e=e.slice(0));for(b=this._eventTarget;-1<--f;)(d=e[f])&&(d.up?d.c.call(d.s||b,{type:a,target:b}):d.c.call(d.s||b))}};var H=a.requestAnimationFrame,
K=a.cancelAnimationFrame,F=Date.now||function(){return(new Date).getTime()},D=F();B=["ms","moz","webkit","o"];for(g=B.length;-1<--g&&!H;)H=a[B[g]+"RequestAnimationFrame"],K=a[B[g]+"CancelAnimationFrame"]||a[B[g]+"CancelRequestAnimationFrame"];t("Ticker",function(a,b){var d,f,g,n,h,t=this,k=F(),l=!1!==b&&H?"auto":!1,u=500,w=33,q=function(a){var b;var e=F()-D;e>u&&(k+=e-w);D+=e;t.time=(D-k)/1E3;e=t.time-h;(!d||0<e||!0===a)&&(t.frame++,h+=e+(e>=n?.004:n-e),b=!0);!0!==a&&(g=f(q));b&&t.dispatchEvent("tick")};
G.call(t);t.time=t.frame=0;t.tick=function(){q(!0)};t.lagSmoothing=function(a,b){u=a||1E10;w=Math.min(b,u,0)};t.sleep=function(){null!=g&&(l&&K?K(g):clearTimeout(g),f=p,g=null,t===C&&(X=!1))};t.wake=function(a){null!==g?t.sleep():a?k+=-D+(D=F()):10<t.frame&&(D=F()-u+5);f=0===d?p:l&&H?H:function(a){return setTimeout(a,1E3*(h-t.time)+1|0)};t===C&&(X=!0);q(2)};t.fps=function(a){return arguments.length?(d=a,n=1/(d||60),h=this.time+n,void t.wake()):d};t.useRAF=function(a){return arguments.length?(t.sleep(),
l=a,void t.fps(d)):l};t.fps(a);setTimeout(function(){"auto"===l&&5>t.frame&&"hidden"!==e.visibilityState&&t.useRAF(!1)},1500)});x=k.Ticker.prototype=new k.events.EventDispatcher;x.constructor=k.Ticker;var A=t("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=!0===b.immediateRender,this.data=b.data,this._reversed=!0===b.reversed,Z)X||C.wake(),a=this.vars.useFrames?S:Z,a.add(this,a._time),this.vars.paused&&
this.paused(!0)});var C=A.ticker=new k.Ticker;x=A.prototype;x._dirty=x._gc=x._initted=x._paused=!1;x._totalTime=x._time=0;x._rawPrevTime=-1;x._next=x._last=x._onUpdate=x._timeline=x.timeline=null;x._paused=!1;var J=function(){X&&2E3<F()-D&&C.wake();setTimeout(J,2E3)};J();x.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)};x.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)};x.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)};x.seek=
function(a,b){return this.totalTime(Number(a),!1!==b)};x.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,!1!==b,!0)};x.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)};x.render=function(a,b,d){};x.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this};x.isActive=function(){var a,b=this._timeline,d=this._startTime;
return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime(!0))>=d&&a<d+this.totalDuration()/this._timeScale};x._enabled=function(a,b){return X||C.wake(),this._gc=!a,this._active=this.isActive(),!0!==b&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1};x._kill=function(a,b){return this._enabled(!1,!1)};x.kill=function(a,b){return this._kill(a,b),this};x._uncache=function(a){for(a=a?this:this.timeline;a;)a._dirty=!0,
a=a.timeline;return this};x._swapSelfInParams=function(a){for(var b=a.length,d=a.concat();-1<--b;)"{self}"===a[b]&&(d[b]=this);return d};x._callback=function(a){var b=this.vars,d=b[a],e=b[a+"Params"];a=b[a+"Scope"]||b.callbackScope||this;switch(e?e.length:0){case 0:d.call(a);break;case 1:d.call(a,e[0]);break;case 2:d.call(a,e[0],e[1]);break;default:d.apply(a,e)}};x.eventCallback=function(a,b,d,e){if("on"===(a||"").substr(0,2)){var f=this.vars;if(1===arguments.length)return f[a];null==b?delete f[a]:
(f[a]=b,f[a+"Params"]=q(d)&&-1!==d.join("").indexOf("{self}")?this._swapSelfInParams(d):d,f[a+"Scope"]=e);"onUpdate"===a&&(this._onUpdate=b)}return this};x.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay};x.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==a&&this.totalTime(a/
this._duration*this._totalTime,!0),this):(this._dirty=!1,this._duration)};x.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration};x.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time};x.totalTime=function(a,b,d){if(X||C.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!d&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&
this.totalDuration();var e=this._totalDuration,f=this._timeline;if(a>e&&!d&&(a=e),this._startTime=(this._paused?this._pauseTime:f._time)-(this._reversed?e-a:a)/this._timeScale,f._dirty||this._uncache(!1),f._timeline)for(;f._timeline;)f._timeline._time!==(f._startTime+f._totalTime)/f._timeScale&&f.totalTime(f._totalTime,!0),f=f._timeline}this._gc&&this._enabled(!0,!1);(this._totalTime!==a||0===this._duration)&&(I.length&&ca(),this.render(a,b,!1),I.length&&ca())}return this};x.progress=x.totalProgress=
function(a,b){var d=this.duration();return arguments.length?this.totalTime(d*a,b):d?this._time/d:this.ratio};x.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime};x.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale};x.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1E-10,this._timeline&&
this._timeline.smoothChildTiming){var b=this._pauseTime;b=b||0===b?b:this._timeline.totalTime();this._startTime=b-(b-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)};x.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed};x.paused=function(a){if(!arguments.length)return this._paused;var b,d,e=this._timeline;
return a!=this._paused&&e&&(X||a||C.wake(),b=e.rawTime(),d=b-this._pauseTime,!a&&e.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?b:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&(b=e.smoothChildTiming?this._totalTime:(b-this._startTime)/this._timeScale,this.render(b,b===this._totalTime,!0))),this._gc&&!a&&this._enabled(!0,!1),this};B=t("core.SimpleTimeline",function(a){A.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=
!0});x=B.prototype=new A;x.constructor=B;x.kill()._gc=!1;x._first=x._last=x._recent=null;x._sortChildren=!1;x.add=x.insert=function(a,b,d,e){if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),b=this._last,this._sortChildren)for(d=a._startTime;b&&b._startTime>d;)b=b._prev;return b?(a._next=b._next,b._next=a):(a._next=this._first,
this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=b,this._recent=a,this._timeline&&this._uncache(!0),this};x._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this};x.render=function(a,b,d){var e=this._first;for(this._totalTime=
this._time=this._rawPrevTime=a;e;){var f=e._next;(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d));e=f}};x.rawTime=function(){return X||C.wake(),this._totalTime};var E=t("TweenLite",function(b,d,e){if(A.call(this,d,e),this.render=E.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:E.selector(b)||b;var f;var g=b.jquery||
b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType);e=this.vars.overwrite;if(this._overwrite=e=null==e?aa[E.defaultOverwrite]:"number"==typeof e?e>>0:aa[e],(g||b instanceof Array||b.push&&q(b))&&"number"!=typeof b[0])for(this._targets=f=l(b),this._propLookup=[],this._siblings=[],b=0;b<f.length;b++)(g=f[b])?"string"!=typeof g?g.length&&g!==a&&g[0]&&(g[0]===a||g[0].nodeType&&g[0].style&&!g.nodeType)?(f.splice(b--,1),this._targets=f=f.concat(l(g))):(this._siblings[b]=W(g,this,!1),
1===e&&1<this._siblings[b].length&&fa(g,this,null,1,this._siblings[b])):(g=f[b--]=E.selector(g),"string"==typeof g&&f.splice(b+1,1)):f.splice(b--,1);else this._propLookup={},this._siblings=W(b,this,!1),1===e&&1<this._siblings.length&&fa(b,this,null,1,this._siblings);(this.vars.immediateRender||0===d&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1E-10,this.render(Math.min(0,-this._delay)))},!0),N=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)};
x=E.prototype=new A;x.constructor=E;x.kill()._gc=!1;x.ratio=0;x._firstPT=x._targets=x._overwrittenProps=x._startAt=null;x._notifyPluginsOfEnabled=x._lazy=!1;E.version="1.19.1";E.defaultEase=x._ease=new w(null,null,1,1);E.defaultOverwrite="auto";E.ticker=C;E.autoSleep=120;E.lagSmoothing=function(a,b){C.lagSmoothing(a,b)};E.selector=a.$||a.jQuery||function(b){var d=a.$||a.jQuery;return d?(E.selector=d,d(b)):"undefined"==typeof e?b:e.querySelectorAll?e.querySelectorAll(b):e.getElementById("#"===b.charAt(0)?
b.substr(1):b)};var I=[],Y={},da=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,V=function(a){for(var b,d=this._firstPT;d;)b=d.blob?1===a?this.end:a?this.join(""):this.start:d.c*a+d.s,d.m?b=d.m(b,this._target||d.t):1E-6>b&&-1E-6<b&&!d.blob&&(b=0),d.f?d.fp?d.t[d.p](d.fp,b):d.t[d.p](b):d.t[d.p]=b,d=d._next},ka=function(a,b,d,e){var f,g=[],n=0,h="",t=0;g.start=a;g.end=b;a=g[0]=a+"";b=g[1]=b+"";d&&(d(g),a=g[0],b=g[1]);g.length=0;a=a.match(da)||[];d=b.match(da)||[];e&&(e._next=null,e.blob=1,g._firstPT=
g._applyPT=e);var k=d.length;for(e=0;k>e;e++){var l=d[e];var u=b.substr(n,b.indexOf(l,n)-n);h+=u||!e?u:",";n+=u.length;t?t=(t+1)%5:"rgba("===u.substr(-5)&&(t=1);l===a[e]||a.length<=e?h+=l:(h&&(g.push(h),h=""),f=parseFloat(a[e]),g.push(f),g._firstPT={_next:g._firstPT,t:g,p:g.length-1,s:f,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-f)||0,f:0,m:t&&4>t?Math.round:0});n+=l.length}return h+=b.substr(n),h&&g.push(h),g.setRatio=V,g},M=function(a,b,d,e,f,g,n,h,t){"function"==
typeof e&&(e=e(t||0,a));var k;t=typeof a[b];var l="function"!==t?"":b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3);d="get"!==d?d:l?n?a[l](n):a[l]():a[b];l="string"==typeof e&&"="===e.charAt(1);a={t:a,p:b,s:d,f:"function"===t,pg:0,n:f||b,m:g?"function"==typeof g?g:Math.round:0,pr:0,c:l?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-d||0};return("number"!=typeof d||"number"!=typeof e&&!l)&&(n||isNaN(d)||!l&&isNaN(e)||"boolean"==typeof d||"boolean"==
typeof e?(a.fp=n,k=ka(d,l?a.s+a.c:e,h||E.defaultStringFilter,a),a={t:k,p:"setRatio",s:0,c:1,f:2,pg:0,n:f||b,pr:0,m:0}):(a.s=parseFloat(d),l||(a.c=parseFloat(e)-a.s||0))),a.c?((a._next=this._firstPT)&&(a._next._prev=a),this._firstPT=a,a):void 0};g=E._internals={isArray:q,isSelector:N,lazyTweens:I,blobDif:ka};var P=E._plugins={},ba=g.tweenLookup={},oa=0,L=g.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,
onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},aa={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},S=A._rootFramesTimeline=new B,Z=A._rootTimeline=new B,ea=30,ca=g.lazyRender=function(){var a,
b=I.length;for(Y={};-1<--b;)(a=I[b])&&!1!==a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);I.length=0};Z._startTime=C.time;S._startTime=C.frame;Z._active=S._active=!0;setTimeout(ca,1);A._updateRoot=E.render=function(){var a,b;if(I.length&&ca(),Z.render((C.time-Z._startTime)*Z._timeScale,!1,!1),S.render((C.frame-S._startTime)*S._timeScale,!1,!1),I.length&&ca(),C.frame>=ea){ea=C.frame+(parseInt(E.autoSleep,10)||120);for(b in ba){var d=ba[b].tweens;for(a=d.length;-1<--a;)d[a]._gc&&d.splice(a,
1);0===d.length&&delete ba[b]}if(b=Z._first,(!b||b._paused)&&E.autoSleep&&!S._first&&1===C._listeners.tick.length){for(;b&&b._paused;)b=b._next;b||C.sleep()}}};C.addEventListener("tick",A._updateRoot);var W=function(a,b,d){var e,f,g=a._gsTweenID;if(ba[g||(a._gsTweenID=g="t"+oa++)]||(ba[g]={target:a,tweens:[]}),b&&(e=ba[g].tweens,e[f=e.length]=b,d))for(;-1<--f;)e[f]===b&&e.splice(f,1);return ba[g].tweens},ra=function(a,b,d,e){var f,g,n=a.vars.onOverwrite;return n&&(f=n(a,b,d,e)),n=E.onOverwrite,n&&
(g=n(a,b,d,e)),!1!==f&&!1!==g},fa=function(a,b,d,e,f){var g,n,h;if(1===e||4<=e){d=f.length;for(g=0;d>g;g++)if((h=f[g])!==b)h._gc||h._kill(null,a,b)&&(n=!0);else if(5===e)break;return n}var t,k=b._startTime+1E-10,l=[],u=0,p=0===b._duration;for(g=f.length;-1<--g;)(h=f[g])===b||h._gc||h._paused||(h._timeline!==b._timeline?(t=t||R(b,0,p),0===R(h,t,p)&&(l[u++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((p||!h._initted)&&2E-10>=k-h._startTime||(l[u++]=h)));for(g=u;-1<--g;)(h=l[g],
2===e&&h._kill(d,a,b)&&(n=!0),2!==e||!h._firstPT&&h._initted)&&(2===e||ra(h,b))&&h._enabled(!1,!1)&&(n=!0);return n},R=function(a,b,d){for(var e=a._timeline,f=e._timeScale,g=a._startTime;e._timeline;){if(g+=e._startTime,f*=e._timeScale,e._paused)return-100;e=e._timeline}return g/=f,g>b?g-b:d&&g===b||!a._initted&&2E-10>g-b?1E-10:(g+=a.totalDuration()/a._timeScale/f)>b+1E-10?0:g-b-1E-10};x._init=function(){var a,b,d=this.vars,e=this._overwrittenProps,f=this._duration;var g=!!d.immediateRender;var n=
d.ease;if(d.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill());var h={};for(a in d.startAt)h[a]=d.startAt[a];if(h.overwrite=!1,h.immediateRender=!0,h.lazy=g&&!1!==d.lazy,h.startAt=h.delay=null,this._startAt=E.to(this.target,0,h),g)if(0<this._time)this._startAt=null;else if(0!==f)return}else if(d.runBackwards&&0!==f)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(g=!1);h={};for(a in d)L[a]&&"autoCSS"!==a||(h[a]=d[a]);
if(h.overwrite=0,h.data="isFromStart",h.lazy=g&&!1!==d.lazy,h.immediateRender=g,this._startAt=E.to(this.target,0,h),g){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=n=n?n instanceof w?n:"function"==typeof n?new w(n,d.easeParams):y[n]||E.defaultEase:E.defaultEase,d.easeParams instanceof Array&&n.config&&(this._ease=n.config.apply(n,d.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,
this._firstPT=null,this._targets)for(g=this._targets.length,a=0;g>a;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],e?e[a]:null,a)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,e,0);if(b&&E._onPluginEvent("_onInitAllProps",this),e&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),d.runBackwards)for(h=this._firstPT;h;)h.s+=h.c,h.c=-h.c,h=h._next;this._onUpdate=d.onUpdate;this._initted=!0};x._initProps=function(b,d,e,f,
g){var n,h,t,k;if(null==b)return!1;Y[b._gsTweenID]&&ca();if(!this.vars.css&&b.style&&b!==a&&b.nodeType&&P.css&&!1!==this.vars.autoCSS){var l=this.vars;var u={};for(k in l)L[k]||k in b&&"transform"!==k&&"x"!==k&&"y"!==k&&"width"!==k&&"height"!==k&&"className"!==k&&"border"!==k||!(!P[k]||P[k]&&P[k]._autoCSS)||(u[k]=l[k],delete l[k]);l.css=u}for(n in this.vars)if(l=this.vars[n],L[n])l&&(l instanceof Array||l.push&&q(l))&&-1!==l.join("").indexOf("{self}")&&(this.vars[n]=this._swapSelfInParams(l,this));
else if(P[n]&&(t=new P[n])._onInitTween(b,this.vars[n],this,g)){this._firstPT=k={_next:this._firstPT,t:t,p:"setRatio",s:0,c:1,f:1,n:n,pg:1,pr:t._priority,m:0};for(l=t._overwriteProps.length;-1<--l;)d[t._overwriteProps[l]]=this._firstPT;(t._priority||t._onInitAllProps)&&(h=!0);(t._onDisable||t._onEnable)&&(this._notifyPluginsOfEnabled=!0);k._next&&(k._next._prev=k)}else d[n]=M.call(this,b,n,"get",l,n,0,null,this.vars.stringFilter,g);return f&&this._kill(f,b)?this._initProps(b,d,e,f,g):1<this._overwrite&&
this._firstPT&&1<e.length&&fa(b,this,d,this._overwrite,e)?(this._kill(d,b),this._initProps(b,d,e,f,g)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(Y[b._gsTweenID]=!0),h)};x.render=function(a,b,d){var e,f,g,n=this._time,h=this._duration;var t=this._rawPrevTime;if(a>=h-1E-7&&0<=a)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(e=!0,f="onComplete",d=d||this._timeline.autoRemoveChildren),0===h&&(this._initted||
!this.vars.lazy||d)&&(this._startTime===this._timeline._duration&&(a=0),(0>t||0>=a&&-1E-7<=a||1E-10===t&&"isPause"!==this.data)&&t!==a&&(d=!0,1E-10<t&&(f="onReverseComplete")),this._rawPrevTime=g=!b||a||t===a?a:1E-10);else if(1E-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==n||0===h&&0<t)&&(f="onReverseComplete",e=this._reversed),0>a&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||d)&&(0<=t&&(1E-10!==t||"isPause"!==this.data)&&(d=!0),this._rawPrevTime=
g=!b||a||t===a?a:1E-10)),this._initted||(d=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/h,l=this._easeType,u=this._easePower;(1===l||3===l&&.5<=k)&&(k=1-k);3===l&&(k*=2);1===u?k*=k:2===u?k*=k*k:3===u?k*=k*k*k:4===u&&(k*=k*k*k*k);1===l?this.ratio=1-k:2===l?this.ratio=k:.5>a/h?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/h);if(this._time!==n||d){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!d&&this._firstPT&&(!1!==this.vars.lazy&&
this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=n,this._rawPrevTime=t,I.push(this),void(this._lazy=[a,b]);this._time&&!e?this.ratio=this._ease.getRatio(this._time/h):e&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==n&&0<=a&&(this._active=!0);0!==n||(this._startAt&&(0<=a?this._startAt.render(a,b,d):f||(f="_dummyGS")),!this.vars.onStart||0===this._time&&0!==h||!b&&
this._callback("onStart"));for(t=this._firstPT;t;)t.f?t.t[t.p](t.c*this.ratio+t.s):t.t[t.p]=t.c*this.ratio+t.s,t=t._next;this._onUpdate&&(0>a&&this._startAt&&-1E-4!==a&&this._startAt.render(a,b,d),b||(this._time!==n||e||d)&&this._callback("onUpdate"));f&&(!this._gc||d)&&(0>a&&this._startAt&&!this._onUpdate&&-1E-4!==a&&this._startAt.render(a,b,d),e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[f]&&this._callback(f),0===h&&1E-10===this._rawPrevTime&&1E-10!==
g&&(this._rawPrevTime=0))}};x._kill=function(a,b,d){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:E.selector(b)||b;var e,f,g,n,h,t,k=d&&this._time&&d._startTime===this._startTime&&this._timeline===d._timeline;if((q(b)||N(b))&&"number"!=typeof b[0])for(e=b.length;-1<--e;)this._kill(a,b[e],d)&&(n=!0);else{if(this._targets)for(e=this._targets.length;-1<--e;){if(b===this._targets[e]){var l=this._propLookup[e]||
{};this._overwrittenProps=this._overwrittenProps||[];var u=this._overwrittenProps[e]=a?this._overwrittenProps[e]||{}:"all";break}}else{if(b!==this.target)return!1;l=this._propLookup;u=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(l){if(e=a||l,h=a!==u&&"all"!==u&&a!==l&&("object"!=typeof a||!a._tempKill),d&&(E.onOverwrite||this.vars.onOverwrite)){for(f in e)l[f]&&(t||(t=[]),t.push(f));if((t||!a)&&!ra(this,d,b,t))return!1}for(f in e)(g=l[f])&&(k&&(g.f?g.t[g.p](g.s):g.t[g.p]=g.s,n=!0),
g.pg&&g.t._kill(e)&&(n=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete l[f]),h&&(u[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return n};x.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=
!1,this._propLookup=this._targets?{}:[],A.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1E-10,this.render(Math.min(0,-this._delay))),this};x._enabled=function(a,b){if(X||C.wake(),a&&this._gc){var d,e=this._targets;if(e)for(d=e.length;-1<--d;)this._siblings[d]=W(e[d],this,!0);else this._siblings=W(this.target,this,!0)}return A.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?E._onPluginEvent(a?"_onEnable":"_onDisable",this):!1};E.to=function(a,
b,d){return new E(a,b,d)};E.from=function(a,b,d){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,new E(a,b,d)};E.fromTo=function(a,b,d,e){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,new E(a,b,e)};E.delayedCall=function(a,b,d,e,f){return new E(b,0,{delay:a,onComplete:b,onCompleteParams:d,callbackScope:e,onReverseComplete:b,onReverseCompleteParams:d,immediateRender:!1,lazy:!1,useFrames:f,overwrite:0})};E.set=function(a,b){return new E(a,0,b)};E.getTweensOf=
function(a,b){if(null==a)return[];a="string"!=typeof a?a:E.selector(a)||a;var d;if((q(a)||N(a))&&"number"!=typeof a[0]){var e=a.length;for(d=[];-1<--e;)d=d.concat(E.getTweensOf(a[e],b));for(e=d.length;-1<--e;)for(b=d[e],a=e;-1<--a;)b===d[a]&&d.splice(e,1)}else for(d=W(a).concat(),e=d.length;-1<--e;)(d[e]._gc||b&&!d[e].isActive())&&d.splice(e,1);return d};E.killTweensOf=E.killDelayedCallsTo=function(a,b,d){"object"==typeof b&&(d=b,b=!1);b=E.getTweensOf(a,b);for(var e=b.length;-1<--e;)b[e]._kill(d,
a)};var T=t("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=b||0;this._super=T.prototype},!0);if(x=T.prototype,T.version="1.19.0",T.API=2,x._firstPT=null,x._addTween=M,x.setRatio=V,x._kill=function(a){var b,d=this._overwriteProps,e=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=d.length;-1<--b;)null!=a[d[b]]&&d.splice(b,1);for(;e;)null!=a[e.n]&&(e._next&&(e._next._prev=e._prev),e._prev?(e._prev._next=
e._next,e._prev=null):this._firstPT===e&&(this._firstPT=e._next)),e=e._next;return!1},x._mod=x._roundProps=function(a){for(var b,d=this._firstPT;d;)(b=a[this._propName]||null!=d.n&&a[d.n.split(this._propName+"_").join("")])&&"function"==typeof b&&(2===d.f?d.t._applyPT.m=b:d.m=b),d=d._next},E._onPluginEvent=function(a,b){var d,e,f,g,n=b._firstPT;if("_onInitAllProps"===a){for(;n;){var h=n._next;for(e=f;e&&e.pr>n.pr;)e=e._next;(n._prev=e?e._prev:g)?n._prev._next=n:f=n;(n._next=e)?e._prev=n:g=n;n=h}n=
b._firstPT=f}for(;n;)n.pg&&"function"==typeof n.t[a]&&n.t[a]()&&(d=!0),n=n._next;return d},T.activate=function(a){for(var b=a.length;-1<--b;)a[b].API===T.API&&(P[(new a[b])._propName]=a[b]);return!0},n.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,d=a.propName,e=a.priority||0,f=a.overwriteProps,g={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},n=t("plugins."+d.charAt(0).toUpperCase()+d.substr(1)+"Plugin",
function(){T.call(this,d,e);this._overwriteProps=f||[]},!0===a.global),h=n.prototype=new T(d);h.constructor=n;n.API=a.API;for(b in g)"function"==typeof a[b]&&(h[g[b]]=a[b]);return n.version=a.version,T.activate([n]),n},B=a._gsQueue){for(g=0;g<B.length;g++)B[g]();for(x in r)r[x].func||a.console.log("GSAP encountered missing dependency: "+x)}var X=!1}})("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
/*
 Hammer.JS - v2.0.8 - 2016-04-23
 http://hammerjs.github.io/

 Copyright (c) 2016 Jorik Tangelder;
 Licensed under the MIT license */
!function(a,b,d,e){function f(a,b,d){return setTimeout(p(a,d),b)}function g(a,b,d){return Array.isArray(a)?(h(a,d[b],d),!0):!1}function h(a,b,d){var f;if(a)if(a.forEach)a.forEach(b,d);else if(a.length!==e)for(f=0;f<a.length;)b.call(d,a[f],f,a),f++;else for(f in a)a.hasOwnProperty(f)&&b.call(d,a[f],f,a)}function k(b,d,e){var f="DEPRECATED METHOD: "+d+"\n"+e+" AT \n";return function(){var d=Error("get-stack-trace");d=d&&d.stack?d.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,
"{anonymous}()@"):"Unknown Stack Trace";var e=a.console&&(a.console.warn||a.console.log);return e&&e.call(a.console,f,d),b.apply(this,arguments)}}function l(a,b,d){var e=b.prototype;b=a.prototype=Object.create(e);b.constructor=a;b._super=e;d&&ta(b,d)}function p(a,b){return function(){return a.apply(b,arguments)}}function q(a,b){return typeof a==za?a.apply(b?b[0]||e:e,b):a}function r(a,b,d){h(t(b),function(b){a.addEventListener(b,d,!1)})}function v(a,b,d){h(t(b),function(b){a.removeEventListener(b,
d,!1)})}function n(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function t(a){return a.trim().split(/\s+/g)}function u(a,b,d){if(a.indexOf&&!d)return a.indexOf(b);for(var e=0;e<a.length;){if(d&&a[e][d]==b||!d&&a[e]===b)return e;e++}return-1}function w(a){return Array.prototype.slice.call(a,0)}function y(a,b,d){for(var e=[],f=[],g=0;g<a.length;){var n=b?a[g][b]:a[g];0>u(f,n)&&e.push(a[g]);f[g]=n;g++}return d&&(e=b?e.sort(function(a,d){return a[b]>d[b]}):e.sort()),e}function z(a,b){for(var d,
f,g=b[0].toUpperCase()+b.slice(1),n=0;n<O.length;){if(d=O[n],f=d?d+g:b,f in a)return f;n++}return e}function x(b){b=b.ownerDocument||b;return b.defaultView||b.parentWindow||a}function B(a,b){var d=this;this.manager=a;this.callback=b;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(b){q(a.options.enable,[a])&&d.handler(b)};this.init()}function G(a){var b=a.options.inputClass;return new (b?b:pb?E:ua?I:jb?da:J)(a,H)}function H(a,b,d){var f=d.pointers.length;var g=d.changedPointers.length;
var h=b&qa&&0===f-g;f=b&(ya|Da)&&0===f-g;d.isFirst=!!h;d.isFinal=!!f;h&&(a.session={});d.eventType=b;b=a.session;h=d.pointers;f=h.length;b.firstInput||(b.firstInput=K(d));1<f&&!b.firstMultiple?b.firstMultiple=K(d):1===f&&(b.firstMultiple=!1);g=b.firstInput;var t=(f=b.firstMultiple)?f.center:g.center;var k=d.center=F(h);d.timeStamp=Aa();d.deltaTime=d.timeStamp-g.timeStamp;d.angle=C(t,k);d.distance=A(t,k);g=d.center;t=b.offsetDelta||{};k=b.prevDelta||{};var l=b.prevInput||{};d.eventType!==qa&&l.eventType!==
ya||(k=b.prevDelta={x:l.deltaX||0,y:l.deltaY||0},t=b.offsetDelta={x:g.x,y:g.y});d.deltaX=k.x+(g.x-t.x);d.deltaY=k.y+(g.y-t.y);d.offsetDirection=D(d.deltaX,d.deltaY);t=d.deltaTime;g=d.deltaX/t||0;t=d.deltaY/t||0;d.overallVelocityX=g;d.overallVelocityY=t;d.overallVelocity=ha(g)>ha(t)?g:t;f?(g=f.pointers,g=A(h[0],h[1],ja)/A(g[0],g[1],ja)):g=1;d.scale=g;f?(f=f.pointers,h=C(h[1],h[0],ja)+C(f[1],f[0],ja)):h=0;d.rotation=h;d.maxPointers=b.prevInput?d.pointers.length>b.prevInput.maxPointers?d.pointers.length:
b.prevInput.maxPointers:d.pointers.length;t=b.lastInterval||d;h=d.timeStamp-t.timeStamp;d.eventType!=Da&&(h>vb||t.velocity===e)?(g=d.deltaX-t.deltaX,t=d.deltaY-t.deltaY,k=g/h||0,l=t/h||0,h=k,f=l,k=ha(k)>ha(l)?k:l,g=D(g,t),b.lastInterval=d):(k=t.velocity,h=t.velocityX,f=t.velocityY,g=t.direction);d.velocity=k;d.velocityX=h;d.velocityY=f;d.direction=g;b=a.element;n(d.srcEvent.target,b)&&(b=d.srcEvent.target);d.target=b;a.emit("hammer.input",d);a.recognize(d);a.session.prevInput=d}function K(a){for(var b=
[],d=0;d<a.pointers.length;)b[d]={clientX:wa(a.pointers[d].clientX),clientY:wa(a.pointers[d].clientY)},d++;return{timeStamp:Aa(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:wa(a[0].clientX),y:wa(a[0].clientY)};for(var d=0,e=0,f=0;b>f;)d+=a[f].clientX,e+=a[f].clientY,f++;return{x:wa(d/b),y:wa(e/b)}}function D(a,b){return a===b?sa:ha(a)>=ha(b)?0>a?Ea:ma:0>b?la:Oa}function A(a,b,d){d||(d=Ba);var e=b[d[0]]-a[d[0]];a=b[d[1]]-a[d[1]];return Math.sqrt(e*
e+a*a)}function C(a,b,d){d||(d=Ba);return 180*Math.atan2(b[d[1]]-a[d[1]],b[d[0]]-a[d[0]])/Math.PI}function J(){this.evEl=Na;this.evWin=pa;this.pressed=!1;B.apply(this,arguments)}function E(){this.evEl=gb;this.evWin=La;B.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a;this.evWin=wb;this.started=!1;B.apply(this,arguments)}function I(){this.evTarget=ab;this.targetIds={};B.apply(this,arguments)}function Y(a,b){var d=w(a.touches),e=this.targetIds;if(b&
(qa|Pa)&&1===d.length)return e[d[0].identifier]=!0,[d,d];var f;a=w(a.changedTouches);var g=[],h=this.target;if(f=d.filter(function(a){return n(a.target,h)}),b===qa)for(d=0;d<f.length;)e[f[d].identifier]=!0,d++;for(d=0;d<a.length;)e[a[d].identifier]&&g.push(a[d]),b&(ya|Da)&&delete e[a[d].identifier],d++;return g.length?[y(f.concat(g),"identifier",!0),g]:void 0}function da(){B.apply(this,arguments);var a=p(this.handler,this);this.touch=new I(this.manager,a);this.mouse=new J(this.manager,a);this.primaryTouch=
null;this.lastTouches=[]}function V(a){a=a.changedPointers[0];if(a.identifier===this.primaryTouch){var b={x:a.clientX,y:a.clientY};this.lastTouches.push(b);var d=this.lastTouches;setTimeout(function(){var a=d.indexOf(b);-1<a&&d.splice(a,1)},xb)}}function ka(a,b){this.manager=a;this.set(b)}function M(a){if(-1<a.indexOf(Ja))return Ja;var b=-1<a.indexOf(Xa),d=-1<a.indexOf(hb);return b&&d?Ja:b||d?b?Xa:hb:-1<a.indexOf(Wa)?Wa:rb}function P(a){this.options=ta({},this.defaults,a||{});this.id=Ia++;this.manager=
null;a=this.options.enable;this.options.enable=a===e?!0:a;this.state=Ya;this.simultaneous={};this.requireFail=[]}function ba(a){return a&nb?"cancel":a&Fa?"end":a&mb?"move":a&Ha?"start":""}function oa(a){return a==Oa?"down":a==la?"up":a==Ea?"left":a==ma?"right":""}function L(a,b){return(b=b.manager)?b.get(a):a}function aa(){P.apply(this,arguments)}function S(){aa.apply(this,arguments);this.pY=this.pX=null}function Z(){aa.apply(this,arguments)}function ea(){P.apply(this,arguments);this._input=this._timer=
null}function ca(){aa.apply(this,arguments)}function W(){aa.apply(this,arguments)}function ra(){P.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function fa(a,b){b=b||{};var d=b.recognizers;return b.recognizers=d===e?fa.defaults.preset:d,new R(a,b)}function R(a,b){this.options=ta({},fa.defaults,b||{});this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=G(this);
this.touchAction=new ka(this,this.options.touchAction);T(this,!0);h(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function T(a,b){var d=a.element;if(d.style){var e;h(a.options.cssProps,function(f,g){e=z(d.style,g);b?(a.oldCssProps[e]=d.style[e],d.style[e]=f):d.style[e]=a.oldCssProps[e]||""});b||(a.oldCssProps={})}}function X(a,d){var e=b.createEvent("Event");e.initEvent(a,!0,!0);e.gesture=d;d.target.dispatchEvent(e)}
var O=" webkit Moz MS ms o".split(" "),U=b.createElement("div"),za="function",wa=Math.round,ha=Math.abs,Aa=Date.now;var ta="function"!=typeof Object.assign?function(a){if(a===e||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),d=1;d<arguments.length;d++){var f=arguments[d];if(f!==e&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(b[g]=f[g])}return b}:Object.assign;var xa=k(function(a,b,d){for(var f=Object.keys(b),g=0;g<f.length;)(!d||d&&a[f[g]]===e)&&(a[f[g]]=
b[f[g]]),g++;return a},"extend","Use `assign`."),Sa=k(function(a,b){return xa(a,b,!0)},"merge","Use `assign`."),Ia=1,Za=/mobile|tablet|ip(ad|hone|od)|android/i,jb="ontouchstart"in a,pb=z(a,"PointerEvent")!==e,ua=jb&&Za.test(navigator.userAgent),vb=25,qa=1,Pa=2,ya=4,Da=8,sa=1,Ea=2,ma=4,la=8,Oa=16,ia=Ea|ma,Ga=la|Oa,Ma=ia|Ga,Ba=["x","y"],ja=["clientX","clientY"];B.prototype={handler:function(){},init:function(){this.evEl&&r(this.element,this.evEl,this.domHandler);this.evTarget&&r(this.target,this.evTarget,
this.domHandler);this.evWin&&r(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler);this.evTarget&&v(this.target,this.evTarget,this.domHandler);this.evWin&&v(x(this.element),this.evWin,this.domHandler)}};var Ta={mousedown:qa,mousemove:Pa,mouseup:ya},Na="mousedown",pa="mousemove mouseup";l(J,B,{handler:function(a){var b=Ta[a.type];b&qa&&0===a.button&&(this.pressed=!0);b&Pa&&1!==a.which&&(b=ya);this.pressed&&(b&ya&&(this.pressed=!1),this.callback(this.manager,
b,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var Qa={pointerdown:qa,pointermove:Pa,pointerup:ya,pointercancel:Da,pointerout:Da},Ra={2:"touch",3:"pen",4:"mouse",5:"kinect"},gb="pointerdown",La="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(gb="MSPointerDown",La="MSPointerMove MSPointerUp MSPointerCancel");l(E,B,{handler:function(a){var b=this.store,d=!1,e=a.type.toLowerCase().replace("ms","");e=Qa[e];var f=Ra[a.pointerType]||a.pointerType,g="touch"==
f,n=u(b,a.pointerId,"pointerId");e&qa&&(0===a.button||g)?0>n&&(b.push(a),n=b.length-1):e&(ya|Da)&&(d=!0);0>n||(b[n]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),d&&b.splice(n,1))}});var Ua={touchstart:qa,touchmove:Pa,touchend:ya,touchcancel:Da},$a="touchstart",wb="touchstart touchmove touchend touchcancel";l(N,B,{handler:function(a){var b=Ua[a.type];if(b===qa&&(this.started=!0),this.started){var d=w(a.touches);var e=w(a.changedTouches);e=(b&(ya|Da)&&(d=
y(d.concat(e),"identifier",!0)),[d,e]);b&(ya|Da)&&0===e[0].length-e[1].length&&(this.started=!1);this.callback(this.manager,b,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:a})}}});var Va={touchstart:qa,touchmove:Pa,touchend:ya,touchcancel:Da},ab="touchstart touchmove touchend touchcancel";l(I,B,{handler:function(a){var b=Va[a.type],d=Y.call(this,a,b);d&&this.callback(this.manager,b,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:a})}});var xb=2500;l(da,B,{handler:function(a,
b,d){var e="touch"==d.pointerType,f="mouse"==d.pointerType;if(!(f&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(e)b&qa?(this.primaryTouch=d.changedPointers[0].identifier,V.call(this,d)):b&(ya|Da)&&V.call(this,d);else{if(e=f)a:{e=d.srcEvent.clientX;f=d.srcEvent.clientY;for(var g=0;g<this.lastTouches.length;g++){var n=this.lastTouches[g],h=Math.abs(f-n.y);if(25>=Math.abs(e-n.x)&&25>=h){e=!0;break a}}e=!1}if(e)return}this.callback(a,b,d)}},destroy:function(){this.touch.destroy();
this.mouse.destroy()}});var bb=z(U.style,"touchAction"),qb=bb!==e,rb="auto",Wa="manipulation",Ja="none",Xa="pan-x",hb="pan-y",db=function(){if(!qb)return!1;var b={},d=a.CSS&&a.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(e){b[e]=d?a.CSS.supports("touch-action",e):!0}),b}();ka.prototype={set:function(a){"compute"==a&&(a=this.compute());qb&&this.manager.element.style&&db[a]&&(this.manager.element.style[bb]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},
compute:function(){var a=[];return h(this.manager.recognizers,function(b){q(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),M(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,d=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var e=this.actions,f=-1<e.indexOf(Ja)&&!db[Ja],g=-1<e.indexOf(hb)&&!db[hb];e=-1<e.indexOf(Xa)&&!db[Xa];if(f){var n=2>a.distance,h=250>a.deltaTime;if(1===a.pointers.length&&n&&h)return}return e&&g?void 0:f||g&&d&ia||e&&d&Ga?
this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};var Ya=1,Ha=2,mb=4,Fa=8,cb=Fa,nb=16;P.prototype={defaults:{},set:function(a){return ta(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(g(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=L(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return g(a,"dropRecognizeWith",this)?this:(a=L(a,this),
delete this.simultaneous[a.id],this)},requireFailure:function(a){if(g(a,"requireFailure",this))return this;var b=this.requireFail;return a=L(a,this),-1===u(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(g(a,"dropRequireFailure",this))return this;a=L(a,this);a=u(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){d.manager.emit(b,
a)}var d=this,e=this.state;Fa>e&&b(d.options.event+ba(e));b(d.options.event);a.additionalEvent&&b(a.additionalEvent);e>=Fa&&b(d.options.event+ba(e))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|Ya)))return!1;a++}return!0},recognize:function(a){a=ta({},a);return q(this.options.enable,[this,a])?(this.state&(cb|nb|32)&&(this.state=Ya),this.state=this.process(a),void(this.state&
(Ha|mb|Fa|nb)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},process:function(a){},getTouchAction:function(){},reset:function(){}};l(aa,P,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,d=a.eventType,e=b&(Ha|mb);a=this.attrTest(a);return e&&(d&Da||!a)?b|nb:e||a?d&ya?b|Fa:b&Ha?b|mb:Ha:32}});l(S,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ma},getTouchAction:function(){var a=this.options.direction,
b=[];return a&ia&&b.push(hb),a&Ga&&b.push(Xa),b},directionTest:function(a){var b=this.options,d=!0,e=a.distance,f=a.direction,g=a.deltaX,n=a.deltaY;return f&b.direction||(b.direction&ia?(f=0===g?sa:0>g?Ea:ma,d=g!=this.pX,e=Math.abs(a.deltaX)):(f=0===n?sa:0>n?la:Oa,d=n!=this.pY,e=Math.abs(a.deltaY))),a.direction=f,d&&e>b.threshold&&f&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&Ha||!(this.state&Ha)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;
this.pY=a.deltaY;var b=oa(a.direction);b&&(a.additionalEvent=this.options.event+b);this._super.emit.call(this,a)}});l(Z,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ja]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&Ha)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?"in":"out"));this._super.emit.call(this,a)}});l(ea,P,{defaults:{event:"press",pointers:1,
time:251,threshold:9},getTouchAction:function(){return[rb]},process:function(a){var b=this.options,d=a.pointers.length===b.pointers,e=a.distance<b.threshold,g=a.deltaTime>b.time;if(this._input=a,!e||!d||a.eventType&(ya|Da)&&!g)this.reset();else if(a.eventType&qa)this.reset(),this._timer=f(function(){this.state=cb;this.tryEmit()},b.time,this);else if(a.eventType&ya)return cb;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===cb&&(a&&a.eventType&ya?this.manager.emit(this.options.event+
"up",a):(this._input.timeStamp=Aa(),this.manager.emit(this.options.event,this._input)))}});l(ca,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ja]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&Ha)}});l(W,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ia|Ga,pointers:1},getTouchAction:function(){return S.prototype.getTouchAction.call(this)},attrTest:function(a){var b,d=this.options.direction;
return d&(ia|Ga)?b=a.overallVelocity:d&ia?b=a.overallVelocityX:d&Ga&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&d&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&ha(b)>this.options.velocity&&a.eventType&ya},emit:function(a){var b=oa(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});l(ra,P,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Wa]},
process:function(a){var b=this.options,d=a.pointers.length===b.pointers,e=a.distance<b.threshold,g=a.deltaTime<b.time;if(this.reset(),a.eventType&qa&&0===this.count)return this.failTimeout();if(e&&g&&d){if(a.eventType!=ya)return this.failTimeout();d=this.pTime?a.timeStamp-this.pTime<b.interval:!0;e=!this.pCenter||A(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;e&&d?this.count+=1:this.count=1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?
(this._timer=f(function(){this.state=cb;this.tryEmit()},b.interval,this),Ha):cb}return 32},failTimeout:function(){return this._timer=f(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==cb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});fa.VERSION="2.0.8";fa.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ca,{enable:!1}],[Z,{enable:!1},
["rotate"]],[W,{direction:ia}],[S,{direction:ia},["swipe"]],[ra],[ra,{event:"doubletap",taps:2},["tap"]],[ea]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};R.prototype={set:function(a){return ta(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=
this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&cb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;){var g=d[f];2===b.stopped||e&&g!=e&&!g.canRecognizeWith(e)?g.reset():g.recognize(a);!e&&g.state&(Ha|mb|Fa)&&(e=b.curRecognizer=g);f++}}},get:function(a){if(a instanceof P)return a;for(var b=this.recognizers,d=0;d<b.length;d++)if(b[d].options.event==a)return b[d];return null},add:function(a){if(g(a,"add",this))return this;var b=
this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(g(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers;a=u(b,a);-1!==a&&(b.splice(a,1),this.touchAction.update())}return this},on:function(a,b){if(a!==e&&b!==e){var d=this.handlers;return h(t(a),function(a){d[a]=d[a]||[];d[a].push(b)}),this}},off:function(a,b){if(a!==e){var d=this.handlers;return h(t(a),function(a){b?d[a]&&d[a].splice(u(d[a],
b),1):delete d[a]}),this}},emit:function(a,b){this.options.domEvents&&X(a,b);var d=this.handlers[a]&&this.handlers[a].slice();if(d&&d.length)for(b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()},a=0;a<d.length;)d[a](b),a++},destroy:function(){this.element&&T(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};ta(fa,{INPUT_START:qa,INPUT_MOVE:Pa,INPUT_END:ya,INPUT_CANCEL:Da,STATE_POSSIBLE:Ya,STATE_BEGAN:Ha,STATE_CHANGED:mb,STATE_ENDED:Fa,STATE_RECOGNIZED:cb,
STATE_CANCELLED:nb,STATE_FAILED:32,DIRECTION_NONE:sa,DIRECTION_LEFT:Ea,DIRECTION_RIGHT:ma,DIRECTION_UP:la,DIRECTION_DOWN:Oa,DIRECTION_HORIZONTAL:ia,DIRECTION_VERTICAL:Ga,DIRECTION_ALL:Ma,Manager:R,Input:B,TouchAction:ka,TouchInput:I,MouseInput:J,PointerEventInput:E,TouchMouseInput:da,SingleTouchInput:N,Recognizer:P,AttrRecognizer:aa,Tap:ra,Pan:S,Swipe:W,Pinch:Z,Rotate:ca,Press:ea,on:r,off:v,each:h,merge:Sa,extend:xa,assign:ta,inherit:l,bindFn:p,prefixed:z});("undefined"!=typeof a?a:"undefined"!=typeof self?
self:{}).Hammer=fa;"function"==typeof define&&define.amd?define(function(){return fa}):"undefined"!=typeof module&&module.exports?module.exports=fa:a[d]=fa}(window,document,"Hammer");
(function(a){"function"===typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"===typeof exports?a(require("jquery"),require("hammerjs")):a(jQuery,Hammer)})(function(a,b){a.fn.hammer=function(d){return this.each(function(){var e=a(this);e.data("hammer")||e.data("hammer",new b(e[0],d))})};b.Manager.prototype.emit=function(b){return function(d,f){b.call(this,d,f);a(this.element).trigger({type:d,gesture:f})}}(b.Manager.prototype.emit)});
/*
 nouislider - 10.0.0 - 2017-05-28 14:52:49 */
!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.noUiSlider=a()}(function(){function a(a){a.preventDefault()}function b(a){return a.filter(function(a){return this[a]?!1:this[a]=!0},{})}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a,b,d){0<d&&(h(a,b),setTimeout(function(){k(a,b)},d))}function f(a){return Array.isArray(a)?a:[a]}function g(a){a=String(a);a=a.split(".");return 1<a.length?a[1].length:0}function h(a,
b){a.classList?a.classList.add(b):a.className+=" "+b}function k(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function l(a){var b=void 0!==window.pageXOffset,d="CSS1Compat"===(a.compatMode||"");return{x:b?window.pageXOffset:d?a.documentElement.scrollLeft:a.body.scrollLeft,y:b?window.pageYOffset:d?a.documentElement.scrollTop:a.body.scrollTop}}function p(){var a=!1;try{var b=Object.defineProperty({},"passive",
{get:function(){a=!0}});window.addEventListener("test",null,b)}catch(aa){}return a}function q(a,b){return 100*b/(a[1]-a[0])}function r(a,b){for(var d=1;a>=b[d];)d+=1;return d}function v(a,b,e){var f;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw Error("noUiSlider ("+P+"): 'range' contains invalid value.");if(f="min"===a?0:"max"===a?100:parseFloat(a),!d(f)||!d(b[0]))throw Error("noUiSlider ("+P+"): 'range' value isn't numeric.");e.xPct.push(f);e.xVal.push(b[0]);
f?e.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(e.xSteps[0]=b[1]);e.xHighestCompleteStep.push(0)}function n(a,b,d){if(!b)return!0;d.xSteps[a]=q([d.xVal[a],d.xVal[a+1]],b)/(100/(d.xPct[a+1]-d.xPct[a]));b=Math.ceil(Number(((d.xVal[a+1]-d.xVal[a])/d.xNumSteps[a]).toFixed(3))-1);d.xHighestCompleteStep[a]=d.xVal[a]+d.xNumSteps[a]*b}function t(a,b,d){this.xPct=[];this.xVal=[];this.xSteps=[d||!1];this.xNumSteps=[!1];this.xHighestCompleteStep=[];this.snap=b;var e;b=[];for(e in a)a.hasOwnProperty(e)&&b.push([a[e],
e]);b.sort(b.length&&"object"==typeof b[0][0]?function(a,b){return a[0][0]-b[0][0]}:function(a,b){return a[0]-b[0]});for(e=0;e<b.length;e++)v(b[e][1],b[e][0],this);this.xNumSteps=this.xSteps.slice(0);for(e=0;e<this.xNumSteps.length;e++)n(e,this.xNumSteps[e],this)}function u(a){if("object"==typeof a&&"function"==typeof a.to&&"function"==typeof a.from)return!0;throw Error("noUiSlider ("+P+"): 'format' requires 'to' and 'from' methods.");}function w(a,b){if(!d(b))throw Error("noUiSlider ("+P+"): 'step' is not numeric.");
a.singleStep=b}function y(a,b){if("object"!=typeof b||Array.isArray(b))throw Error("noUiSlider ("+P+"): 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw Error("noUiSlider ("+P+"): Missing 'min' or 'max' in 'range'.");if(b.min===b.max)throw Error("noUiSlider ("+P+"): 'range' 'min' and 'max' cannot be equal.");a.spectrum=new t(b,a.snap,a.singleStep)}function z(a,b){if(b=f(b),!Array.isArray(b)||!b.length)throw Error("noUiSlider ("+P+"): 'start' option is incorrect.");a.handles=b.length;
a.start=b}function x(a,b){if(a.snap=b,"boolean"!=typeof b)throw Error("noUiSlider ("+P+"): 'snap' option must be a boolean.");}function B(a,b){if(a.animate=b,"boolean"!=typeof b)throw Error("noUiSlider ("+P+"): 'animate' option must be a boolean.");}function G(a,b){if(a.animationDuration=b,"number"!=typeof b)throw Error("noUiSlider ("+P+"): 'animationDuration' option must be a number.");}function H(a,b){var d,e=[!1];if("lower"===b?b=[!0,!1]:"upper"===b&&(b=[!1,!0]),!0===b||!1===b){for(d=1;d<a.handles;d++)e.push(b);
e.push(!1)}else{if(!Array.isArray(b)||!b.length||b.length!==a.handles+1)throw Error("noUiSlider ("+P+"): 'connect' option doesn't match handle count.");e=b}a.connect=e}function K(a,b){switch(b){case "horizontal":a.ort=0;break;case "vertical":a.ort=1;break;default:throw Error("noUiSlider ("+P+"): 'orientation' option is invalid.");}}function F(a,b){if(!d(b))throw Error("noUiSlider ("+P+"): 'margin' option must be numeric.");if(0!==b&&(a.margin=a.spectrum.getMargin(b),!a.margin))throw Error("noUiSlider ("+
P+"): 'margin' option is only supported on linear sliders.");}function D(a,b){if(!d(b))throw Error("noUiSlider ("+P+"): 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit||2>a.handles)throw Error("noUiSlider ("+P+"): 'limit' option is only supported on linear sliders with 2 or more handles.");}function A(a,b){if(!d(b))throw Error("noUiSlider ("+P+"): 'padding' option must be numeric.");if(0!==b){if(a.padding=a.spectrum.getMargin(b),!a.padding)throw Error("noUiSlider ("+
P+"): 'padding' option is only supported on linear sliders.");if(0>a.padding)throw Error("noUiSlider ("+P+"): 'padding' option must be a positive number.");if(50<=a.padding)throw Error("noUiSlider ("+P+"): 'padding' option must be less than half the range.");}}function C(a,b){switch(b){case "ltr":a.dir=0;break;case "rtl":a.dir=1;break;default:throw Error("noUiSlider ("+P+"): 'direction' option was not recognized.");}}function J(a,b){if("string"!=typeof b)throw Error("noUiSlider ("+P+"): 'behaviour' must be a string containing options.");
var d=0<=b.indexOf("tap"),e=0<=b.indexOf("drag"),f=0<=b.indexOf("fixed"),g=0<=b.indexOf("snap");b=0<=b.indexOf("hover");if(f){if(2!==a.handles)throw Error("noUiSlider ("+P+"): 'fixed' behaviour must be used with 2 handles");F(a,a.start[1]-a.start[0])}a.events={tap:d||g,drag:e,fixed:f,snap:g,hover:b}}function E(a,b){if(!1!==b)if(!0===b)for(a.tooltips=[],b=0;b<a.handles;b++)a.tooltips.push(!0);else{if(a.tooltips=f(b),a.tooltips.length!==a.handles)throw Error("noUiSlider ("+P+"): must pass a formatter for all handles.");
a.tooltips.forEach(function(a){if("boolean"!=typeof a&&("object"!=typeof a||"function"!=typeof a.to))throw Error("noUiSlider ("+P+"): 'tooltips' must be passed a formatter or 'false'.");})}}function N(a,b){a.ariaFormat=b;u(b)}function I(a,b){a.format=b;u(b)}function Y(a,b){if(void 0!==b&&"string"!=typeof b&&!1!==b)throw Error("noUiSlider ("+P+"): 'cssPrefix' must be a string or `false`.");a.cssPrefix=b}function da(a,b){if(void 0!==b&&"object"!=typeof b)throw Error("noUiSlider ("+P+"): 'cssClasses' must be an object.");
if("string"==typeof a.cssPrefix){a.cssClasses={};for(var d in b)b.hasOwnProperty(d)&&(a.cssClasses[d]=a.cssPrefix+b[d])}else a.cssClasses=b}function V(a,b){if(!0!==b&&!1!==b)throw Error("noUiSlider ("+P+"): 'useRequestAnimationFrame' option should be true (default) or false.");a.useRequestAnimationFrame=b}function ka(a){var b={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:ba,format:ba},d={step:{r:!1,t:w},start:{r:!0,t:z},connect:{r:!0,t:H},direction:{r:!0,t:C},snap:{r:!1,
t:x},animate:{r:!1,t:B},animationDuration:{r:!1,t:G},range:{r:!0,t:y},orientation:{r:!1,t:K},margin:{r:!1,t:F},limit:{r:!1,t:D},padding:{r:!1,t:A},behaviour:{r:!0,t:J},ariaFormat:{r:!1,t:N},format:{r:!1,t:I},tooltips:{r:!1,t:E},cssPrefix:{r:!1,t:Y},cssClasses:{r:!1,t:da},useRequestAnimationFrame:{r:!1,t:V}},e={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",
horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",
valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};a.format&&!a.ariaFormat&&(a.ariaFormat=a.format);Object.keys(d).forEach(function(f){if(void 0===a[f]&&void 0===e[f]){if(d[f].r)throw Error("noUiSlider ("+P+"): '"+f+"' is required.");return!0}d[f].t(b,void 0===a[f]?e[f]:a[f])});b.pips=a.pips;var f=[["left","top"],["right","bottom"]];return b.style=f[b.dir][b.ort],b.styleOposite=f[b.dir?0:1][b.ort],b}function M(d,g,n){function q(a,b){var d=La.createElement("div");
return b&&h(d,b),a.appendChild(d),d}function r(a,b){a=q(a,g.cssClasses.origin);var d=q(a,g.cssClasses.handle);return d.setAttribute("data-handle",b),d.setAttribute("tabindex","0"),d.setAttribute("role","slider"),d.setAttribute("aria-orientation",g.ort?"vertical":"horizontal"),0===b?h(d,g.cssClasses.handleLower):b===g.handles-1&&h(d,g.cssClasses.handleUpper),a}function t(a,b){return g.tooltips[b]?q(a.firstChild,g.cssClasses.tooltip):!1}function v(){var a=ma.map(t);sa("update",function(b,d,e){a[d]&&
(b=b[d],!0!==g.tooltips[d]&&(b=g.tooltips[d].to(e[d])),a[d].innerHTML=b)})}function u(a,b,d){if("range"===a||"steps"===a)return pa.xVal;if("count"===a){if(!b)throw Error("noUiSlider ("+P+"): 'values' required for mode 'count'.");var e=100/(b-1),f=0;for(b=[];100>=(a=f++*e);)b.push(a);a="positions"}return"positions"===a?b.map(function(a){return pa.fromStepping(d?pa.getStep(a):a)}):"values"===a?d?b.map(function(a){return pa.fromStepping(pa.getStep(pa.toStepping(a)))}):b:void 0}function F(a,d,e){var f=
{},g=pa.xVal[0],h=pa.xVal[pa.xVal.length-1],k=!1,l=!1,p=0;return e=b(e.slice().sort(function(a,b){return a-b})),e[0]!==g&&(e.unshift(g),k=!0),e[e.length-1]!==h&&(e.push(h),l=!0),e.forEach(function(b,g){var h,n=e[g+1];if("steps"===d&&(h=pa.xNumSteps[g]),h||(h=n-b),!1!==b&&void 0!==n)for(h=Math.max(h,1E-7);n>=b;b=(b+h).toFixed(7)/1){var q=pa.toStepping(b);var r=q-p;var t=r/a;t=Math.round(t);var v=r/t;for(r=1;t>=r;r+=1){var u=p+r*v;f[u.toFixed(5)]=["x",0]}t=-1<e.indexOf(b)?1:"steps"===d?2:0;!g&&k&&(t=
0);b===n&&l||(f[q.toFixed(5)]=[b,t]);p=q}}),f}function A(a,b,d){function e(a,b){var d=b===g.cssClasses.value;return b+" "+(d?p:n)[g.ort]+" "+(d?k:l)[a]}var f=La.createElement("div"),k=[g.cssClasses.valueNormal,g.cssClasses.valueLarge,g.cssClasses.valueSub],l=[g.cssClasses.markerNormal,g.cssClasses.markerLarge,g.cssClasses.markerSub],p=[g.cssClasses.valueHorizontal,g.cssClasses.valueVertical],n=[g.cssClasses.markerHorizontal,g.cssClasses.markerVertical];return h(f,g.cssClasses.pips),h(f,0===g.ort?
g.cssClasses.pipsHorizontal:g.cssClasses.pipsVertical),Object.keys(a).forEach(function(h){var k=a[h];k[1]=k[1]&&b?b(k[0],k[1]):k[1];var l=q(f,!1);l.className=e(k[1],g.cssClasses.marker);l.style[g.style]=h+"%";k[1]&&(l=q(f,!1),l.className=e(k[1],g.cssClasses.value),l.style[g.style]=h+"%",l.innerText=d.to(k[0]))}),f}function w(){ia&&(ia.parentElement.removeChild(ia),ia=null)}function D(a){w();var b=a.mode,d=a.density||1,e=a.filter||!1,f=u(b,a.values||!1,a.stepped||!1);b=F(d,b,f);return ia=Ba.appendChild(A(b,
e,a.format||{to:Math.round}))}function C(){var a=Ea.getBoundingClientRect(),b="offset"+["Width","Height"][g.ort];return 0===g.ort?a.width||Ea[b]:a.height||Ea[b]}function y(a,b,d,e){var f=function(b){if(Ba.hasAttribute("disabled"))b=!1;else{var f=Ba,h=g.cssClasses.tap;if(f.classList?f.classList.contains(h):(new RegExp("\\b"+h+"\\b")).test(f.className))var k=!1;else{a:{h=b;f=e.pageOffset;var p=0===h.type.indexOf("touch"),n=0===h.type.indexOf("mouse"),q=0===h.type.indexOf("pointer");if(0===h.type.indexOf("MSPointer")&&
(q=!0),p){if(1<h.touches.length){h=!1;break a}k=h.changedTouches[0].pageX;var r=h.changedTouches[0].pageY}h=(f=f||l(La),(n||q)&&(k=h.clientX+f.x,r=h.clientY+f.y),h.pageOffset=f,h.points=[k,r],h.cursor=n||q,h)}k=(b=h)?a===Ga.start&&void 0!==b.buttons&&1<b.buttons?!1:e.hover&&b.buttons?!1:(Ma||b.preventDefault(),b.calcPoint=b.points[g.ort],void d(b,e)):!1}b=k}return b},h=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,Ma?{passive:!0}:!1);h.push([a,f])}),h}function x(a){var b=Ea;var d=
g.ort;var e=b.getBoundingClientRect(),f=b.ownerDocument;b=f.documentElement;f=l(f);d=(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f.x=0),d?e.top+f.y-b.clientTop:e.left+f.x-b.clientLeft);a=100*(a-d)/C();return g.dir?100-a:a}function z(a){var b=100,d=!1;return ma.forEach(function(e,f){e.hasAttribute("disabled")||(e=Math.abs(ja[f]-a),b>e&&(d=f,b=e))}),d}function B(a,b,d,e){var f=d.slice(),g=[!a,a],h=[a,!a];e=e.slice();a&&e.reverse();1<e.length?e.forEach(function(a,d){d=K(f,a,f[a]+b,g[d],h[d],
!1);!1===d?b=0:(b=d-f[a],f[a]=d)}):g=h=[!0];var k=!1;e.forEach(function(a,e){k=ba(a,d[a]+b,g[e],h[e])||k});k&&e.forEach(function(a){E("update",a);E("slide",a)})}function E(a,b,d){Object.keys(Ra).forEach(function(e){var f=e.split(".")[0];a===f&&Ra[e].forEach(function(a){a.call(Oa,Qa.map(g.format.to),b,Qa.slice(),d||!1,ja.slice())})})}function J(a,b){"mouseout"===a.type&&"HTML"===a.target.nodeName&&null===a.relatedTarget&&N(a,b)}function G(a,b){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===a.buttons&&
0!==b.buttonsProperty)return N(a,b);a=(g.dir?-1:1)*(a.calcPoint-b.startCalcPoint);B(0<a,100*a/b.baseSize,b.locations,b.handleNumbers)}function N(b,d){Na&&(k(Na,g.cssClasses.active),Na=!1);b.cursor&&($a.style.cursor="",$a.removeEventListener("selectstart",a));gb.forEach(function(a){Ua.removeEventListener(a[0],a[1])});k(Ba,g.cssClasses.drag);oa();d.handleNumbers.forEach(function(a){E("change",a);E("set",a);E("end",a)})}function H(b,d){if(1===d.handleNumbers.length){var e=ma[d.handleNumbers[0]];if(e.hasAttribute("disabled"))return!1;
Na=e.children[0];h(Na,g.cssClasses.active)}b.stopPropagation();e=y(Ga.move,Ua,G,{startCalcPoint:b.calcPoint,baseSize:C(),pageOffset:b.pageOffset,handleNumbers:d.handleNumbers,buttonsProperty:b.buttons,locations:ja.slice()});var f=y(Ga.end,Ua,N,{handleNumbers:d.handleNumbers}),k=y("mouseout",Ua,J,{handleNumbers:d.handleNumbers});gb=e.concat(f,k);b.cursor&&($a.style.cursor=getComputedStyle(b.target).cursor,1<ma.length&&h(Ba,g.cssClasses.drag),$a.addEventListener("selectstart",a,!1));d.handleNumbers.forEach(function(a){E("start",
a)})}function M(a){a.stopPropagation();var b=x(a.calcPoint),d=z(b);return!1===d?!1:(g.events.snap||e(Ba,g.cssClasses.tap,g.animationDuration),ba(d,b,!0,!0),oa(),E("slide",d,!0),E("update",d,!0),E("change",d,!0),E("set",d,!0),void(g.events.snap&&H(a,{handleNumbers:[d]})))}function I(a){a=x(a.calcPoint);a=pa.getStep(a);var b=pa.fromStepping(a);Object.keys(Ra).forEach(function(a){"hover"===a.split(".")[0]&&Ra[a].forEach(function(a){a.call(Oa,b)})})}function K(a,b,d,e,f,h){return 1<ma.length&&(e&&0<b&&
(d=Math.max(d,a[b-1]+g.margin)),f&&b<ma.length-1&&(d=Math.min(d,a[b+1]-g.margin))),1<ma.length&&g.limit&&(e&&0<b&&(d=Math.min(d,a[b-1]+g.limit)),f&&b<ma.length-1&&(d=Math.max(d,a[b+1]-g.limit))),g.padding&&(0===b&&(d=Math.max(d,g.padding)),b===ma.length-1&&(d=Math.min(d,100-g.padding))),d=pa.getStep(d),d=Math.max(Math.min(d,100),0),d!==a[b]||h?d:!1}function L(a,b){ja[a]=b;Qa[a]=pa.fromStepping(b);var d=function(){ma[a].style[g.style]=b+"%";Y(a);Y(a+1)};window.requestAnimationFrame&&g.useRequestAnimationFrame?
window.requestAnimationFrame(d):d()}function oa(){Ta.forEach(function(a){ma[a].childNodes[0].style.zIndex=3+(ma.length+(50<ja[a]?-1:1)*a)})}function ba(a,b,d,e){return b=K(ja,a,b,d,e,!1),!1===b?!1:(L(a,b),!0)}function Y(a){if(la[a]){var b=0,d=100;0!==a&&(b=ja[a-1]);a!==la.length-1&&(d=ja[a]);la[a].style[g.style]=b+"%";la[a].style[g.styleOposite]=100-d+"%"}}function aa(a,b){null!==a&&!1!==a&&("number"==typeof a&&(a=String(a)),a=g.format.from(a),!1===a||isNaN(a)||ba(b,pa.toStepping(a),!1,!1))}function V(a,
b){var d=f(a);a=void 0===ja[0];b=void 0===b?!0:!!b;d.forEach(aa);g.animate&&!a&&e(Ba,g.cssClasses.tap,g.animationDuration);Ta.forEach(function(a){ba(a,ja[a],!0,!1)});oa();Ta.forEach(function(a){E("update",a);null!==d[a]&&b&&E("set",a)})}function da(){var a=Qa.map(g.format.to);return 1===a.length?a[0]:a}function sa(a,b){Ra[a]=Ra[a]||[];Ra[a].push(b);"update"===a.split(".")[0]&&ma.forEach(function(a,b){E("update",b)})}var Ea,ma,la,Oa,ia,Ga=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",
end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Ma=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&p(),Ba=d,ja=[],Ta=[],Na=!1,pa=g.spectrum,Qa=[],Ra={},gb=null,La=d.ownerDocument,Ua=La.documentElement,$a=La.body;if(Ba.noUiSlider)throw Error("noUiSlider ("+P+"): Slider was already initialized.");return function(a){h(a,g.cssClasses.target);
0===g.dir?h(a,g.cssClasses.ltr):h(a,g.cssClasses.rtl);0===g.ort?h(a,g.cssClasses.horizontal):h(a,g.cssClasses.vertical);Ea=q(a,g.cssClasses.base)}(Ba),function(a,b){ma=[];la=[];la.push(a[0]?q(b,g.cssClasses.connect):!1);for(var d=0;d<g.handles;d++)ma.push(r(b,d)),Ta[d]=d,la.push(a[d+1]?q(b,g.cssClasses.connect):!1)}(g.connect,Ea),Oa={destroy:function(){for(var a in g.cssClasses)g.cssClasses.hasOwnProperty(a)&&k(Ba,g.cssClasses[a]);for(;Ba.firstChild;)Ba.removeChild(Ba.firstChild);delete Ba.noUiSlider},
steps:function(){return ja.map(function(a,b){var d=pa.getNearbySteps(a),e=Qa[b];b=d.thisStep.step;!1!==b&&e+b>d.stepAfter.startValue&&(b=d.stepAfter.startValue-e);d=e>d.thisStep.startValue?d.thisStep.step:!1===d.stepBefore.step?!1:e-d.stepBefore.highestStep;100===a?b=null:0===a&&(d=null);a=pa.countStepDecimals();return null!==b&&!1!==b&&(b=Number(b.toFixed(a))),null!==d&&!1!==d&&(d=Number(d.toFixed(a))),[d,b]})},on:sa,off:function(a){var b=a&&a.split(".")[0],d=b&&a.substring(b.length);Object.keys(Ra).forEach(function(a){var e=
a.split(".")[0],f=a.substring(e.length);b&&b!==e||d&&d!==f||delete Ra[a]})},get:da,set:V,reset:function(a){V(g.start,a)},__moveHandles:function(a,b,d){B(a,b,ja,d)},options:n,updateOptions:function(a,b){var d=da(),e="margin limit padding range animate snap step format".split(" ");e.forEach(function(b){void 0!==a[b]&&(n[b]=a[b])});var f=ka(n);e.forEach(function(b){void 0!==a[b]&&(g[b]=f[b])});pa=f.spectrum;g.margin=f.margin;g.limit=f.limit;g.padding=f.padding;g.pips&&D(g.pips);ja=[];V(a.start||d,b)},
target:Ba,removePips:w,pips:D},function(a){a.fixed||ma.forEach(function(a,b){y(Ga.start,a.children[0],H,{handleNumbers:[b]})});a.tap&&y(Ga.start,Ea,M,{});a.hover&&y(Ga.move,Ea,I,{hover:!0});a.drag&&la.forEach(function(b,d){if(!1!==b&&0!==d&&d!==la.length-1){var e=ma[d-1],f=ma[d],k=[b];h(b,g.cssClasses.draggable);a.fixed&&(k.push(e.children[0]),k.push(f.children[0]));k.forEach(function(a){y(Ga.start,a,H,{handles:[e,f],handleNumbers:[d-1,d]})})}})}(g.events),V(g.start),g.pips&&D(g.pips),g.tooltips&&
v(),function(){sa("update",function(a,b,d,e,f){Ta.forEach(function(a){var b=ma[a],e=K(ja,a,0,!0,!0,!0),h=K(ja,a,100,!0,!0,!0),k=f[a];a=g.ariaFormat.to(d[a]);b.children[0].setAttribute("aria-valuemin",e.toFixed(1));b.children[0].setAttribute("aria-valuemax",h.toFixed(1));b.children[0].setAttribute("aria-valuenow",k.toFixed(1));b.children[0].setAttribute("aria-valuetext",a)})})}(),Oa}var P="10.0.0";t.prototype.getMargin=function(a){var b=this.xNumSteps[0];if(b&&0!==a/b%1)throw Error("noUiSlider ("+
P+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length?q(this.xVal,a):!1};t.prototype.toStepping=function(a){var b=this.xVal,d=this.xPct;if(a>=b.slice(-1)[0])a=100;else{var e=r(a,b);var f=b[e-1];var g=b[e];b=d[e-1];d=d[e];f=[f,g];a=q(f,0>f[0]?a+Math.abs(f[0]):a-f[0]);a=b+a/(100/(d-b))}return a};t.prototype.fromStepping=function(a){var b=this.xVal,d=this.xPct;if(100<=a)a=b.slice(-1)[0];else{var e=r(a,d);var f=b[e-1];var g=b[e];b=d[e-1];f=[f,g];a=100/(d[e]-b)*
(a-b)*(f[1]-f[0])/100+f[0]}return a};t.prototype.getStep=function(a){var b=this.xPct,d=this.xSteps,e=this.snap;if(100!==a){var f,g,h=r(a,b);e?a=(f=b[h-1],g=b[h],a-f>(g-f)/2?g:f):d[h-1]&&(f=d[h-1],a=b[h-1]+Math.round((a-b[h-1])/f)*f)}return a};t.prototype.getNearbySteps=function(a){a=r(a,this.xPct);return{stepBefore:{startValue:this.xVal[a-2],step:this.xNumSteps[a-2],highestStep:this.xHighestCompleteStep[a-2]},thisStep:{startValue:this.xVal[a-1],step:this.xNumSteps[a-1],highestStep:this.xHighestCompleteStep[a-
1]},stepAfter:{startValue:this.xVal[a-0],step:this.xNumSteps[a-0],highestStep:this.xHighestCompleteStep[a-0]}}};t.prototype.countStepDecimals=function(){var a=this.xNumSteps.map(g);return Math.max.apply(null,a)};t.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var ba={to:function(a){return void 0!==a&&a.toFixed(2)},from:Number};return{version:P,create:function(a,b){if(!a||!a.nodeName)throw Error("noUiSlider ("+P+"): create requires a single element, got: "+a);var d=ka(b,a);
b=M(a,d,b);return a.noUiSlider=b,b}}});

	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Logger=new function(){var a=function(a,d){if("string"===typeof d){try{var b=JSON.parse(d)}catch(f){b={message:d,href:top.location.href}}d=JSON.stringify(b)}else"object"===typeof d&&(d.href=top.location.href,d=JSON.stringify(b));a="jsl=0&jsLogLevel="+a+"&errorMessage="+window.btoa(d);$namespace.AjaxUtil.makeAjaxCall("jsLogger.act",a,null,null,null,"")};this.info=function(b){var d=$namespace.GlobalConstants.JS_LOG_LEVEL;/^(INFO)$/.test(d)&&(console.log(b),a(d,b))};this.warn=function(b){var d=
$namespace.GlobalConstants.JS_LOG_LEVEL;/^(INFO|WARN)$/.test(d)&&(console.warn(b),a(d,b))};this.error=function(b){var d=$namespace.GlobalConstants.JS_LOG_LEVEL;/^(INFO|WARN|ERROR)$/.test(d)&&(console.error(b),a(d,b))};this.track=function(b){var d=$namespace.GlobalConstants.JS_LOG_LEVEL;/^(INFO|WARN|ERROR)$/.test(d)&&a(d,b)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};$namespace.Model.ChildModel=Backbone.Model.extend({defaults:{index:"",ageOfChild:0,flightSeat:0},initialize:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};$namespace.Model.CruiseSearch=Backbone.Model.extend({defaults:{cruise:"all",destination:null,departure:null,cruiseLine:null,duration:null},initialize:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};$namespace.Model.RentalCarSearch=Backbone.Model.extend({defaults:{pickUpLocation:null,dropOffLocation:null,pickUpDate:null,pickUpTime:null,dropOffDate:null,dropOffTime:null,driverAge:0,pickUpCountry:null,dropOffCountry:null,pickUpCity:null,dropOffCity:null,pickupAsAirport:null,dropoffAsAirport:null,pickupLatitude:null,pickupLongitude:null,dropoffLatitude:null,dropoffLongitude:null},initialize:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};$namespace.Model.RoomModel=Backbone.Model.extend({defaults:{index:"",numberOfAdults:2,children:[]},initialize:function(){this.set("children",new $namespace.Collection.ChildCollection)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};
$namespace.Model.RentalCarLocationModel=Backbone.Model.extend({defaults:{id:null,type:null,agency:null,agencyCode:null,title:null,isOpen:null,unAvailableMessage:null,vendorCode:null,address:null,city:null,state:null,zip:null,country:null,distance:null,latitude:null,longitude:null,isExcluded:null,isUnavailable:null,isSelected:null,marker:null,pickupdate:null,pickupDay:null,pickupDate2:null,dropoffdate:null,dropoffDay:null,dropoffDate2:null,openHourPickdate:[],openHourDropoffdate:[],isAgencyClosed:null,
isValidForSelection:null,closureMessage:null},initialize:function(){var a=this.get("latitude")+(Math.random()-.5)/15E4,b=this.get("longitude")+(Math.random()-.5)/15E4;a=new RichMarker({position:new google.maps.LatLng(a,b),map:null,draggable:!1,title:this.get("index")+": "+this.get("title"),content:this.getMarkerContent()});this.set("marker",a);this.listenTo(this,"change:isSelected",this.updateMarker)},updateMarker:function(){var a=this.get("marker");a.setContent(this.getMarkerContent());$namespace.Config;
a.setZIndex($namespace.Config.MARKER_INDEX++)},getMarkerContent:function(){if(this.get("isOpen")&&!this.get("isExcluded")&&this.get("isValidForSelection")&&"true"!=this.get("isAgencyClosed")){var a=this.get("isSelected")?"map-marker-active":"map-marker";var b="enabled"}else a="map-marker-disabled",b="disabled";return"<div title='"+this.get("index")+": "+this.get("title")+"' class='marker-container-"+b+"'><table><tr><td><div class='"+a+"'>"+this.get("index")+"</div></td><td><img class='map-brand-logo' src='"+
$namespace.Configuration.sharedLoc+"/images/logos/carrental/logo-"+this.get("agency")+"-block.png' /></td></tr></table></div>"},filterCheck:function(a){var b=!0;if(a){b=!1;var d=0,e=0,f;for(f in a)a.hasOwnProperty(f)&&(e++,this.get(f)===a[f]&&d++);e===d&&(b=!0)}return b}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};$namespace.Model.RentalCarEquipmentModel=Backbone.Model.extend({idAttribute:"specialEquipmentUid",defaults:{specialEquipmentUid:"",quantity:""},initialize:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};
$namespace.Model.HotelModel=Backbone.Model.extend({defaults:{id:null,uid:null,index:null,title:null,latitude:null,longitude:null,marker:null,hotelAvailable:null,isSelected:null},initialize:function(){var a=this.get("latitude")+(Math.random()-.5)/15E4,b=this.get("longitude")+(Math.random()-.5)/15E4;a=new RichMarker({position:new google.maps.LatLng(a,b),map:null,draggable:!1,title:this.get("index")+": "+this.get("title"),content:this.getMarkerContent()});this.set("marker",a);this.listenTo(this,"change:isSelected",
this.updateMarker)},updateMarker:function(){var a=this.get("marker");a.setContent(this.getMarkerContent());$namespace.Config;a.setZIndex($namespace.Config.MARKER_INDEX++)},getMarkerContent:function(){var a=this.get("isSelected")?"map-marker-active":this.get("hotelAvailable")?"map-marker":"map-marker-disabled";return"<div title='"+this.get("index")+": "+this.get("title")+"' class='marker-container-enabled'/><table><tr><td><div class='"+a+"'></div></td></tr></table></div>"}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};
$namespace.Model.HotelLocationModel=Backbone.Model.extend({defaults:{id:null,hotelName:null,hotelId:null,latitude:null,longitude:null,isSelected:null,marker:null,packageAvailable:null,notInFilteredList:null,hotelRating:null,packagePrice:null,memberRating:null,maxRating:null,ratingCount:null},initialize:function(){var a=this.get("latitude"),b=this.get("longitude");a=new RichMarker({position:new google.maps.LatLng(a,b),map:null,draggable:!1,title:this.get("index")+": "+this.get("hotelName"),content:this.getMarkerContent()});
this.set("marker",a);this.listenTo(this,"change:isSelected",this.updateMarker)},updateMarker:function(){var a=this.get("marker");a.setContent(this.getMarkerContent());a.setZIndex($namespace.Config.MARKER_INDEX++)},getMarkerContent:function(){var a="<div  class='"+(this.get("isSelected")?"map-marker-active":this.get("packageAvailable")?"map-marker":"map-marker-unavailable")+"'>";this.get("showMarkerDescription")&&(a=a+"<div class='marker-description'>"+this.get("hotelName")+"<br/><img src='"+$namespace.Configuration.sharedLoc+
"/images/icons/starRating_0"+this.get("hotelRating")+".png' /></div>");return a+"</div>"}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};
$namespace.Model.MapMarkerModel=Backbone.Model.extend({defaults:{id:null,uid:null,index:null,title:null,latitude:null,longitude:null,marker:null,hotelAvailable:null,isSelected:null,target:null,type:null},initialize:function(){var a=this.get("latitude")+(Math.random()-.5)/15E4,b=this.get("longitude")+(Math.random()-.5)/15E4;a=new RichMarker({position:new google.maps.LatLng(a,b),map:null,draggable:!1,title:this.get("index")+": "+this.get("title"),content:this.getMarkerContent()});this.set("marker",
a);this.listenTo(this,"change:isSelected",this.updateMarker)},updateMarker:function(){var a=this.get("marker");a.setContent(this.getMarkerContent());$namespace.Config;a.setZIndex($namespace.Config.MARKER_INDEX++)},getMarkerContent:function(){var a=this.get("isSelected")?"map-marker-active":this.get("hotelAvailable")?"map-marker":"map-marker-disabled";var b=this.get("type").toUpperCase(),d=this.get("title").replace(/^\s+|\s+$/g,"");if("HOTEL"==b)var e="<div data-hotelid='"+this.get("uid")+"' class='marker-container-enabled' data-test='hotelMarker_"+
d+"' /><table><tr><td><div class='"+a+"'></div></td></tr></table></div>";else"NONHOTEL"==b&&(a=this.get("target"),e=!1,"External Website"==this.get("linkToValue")&&(e=!0),e?(e="",null!=this.get("title").match(/costco/i)&&(e="costco"),e="<div class='marker-container-enabled' data-test='externalWebSiteMarker_"+d+"' /><table><tr><td><a data-url='"+a+"' data-hook='showExternalPopup'><div class='map-marker-"+e+"'></div></a></td></tr></table></div>"):e="<div class='marker-container-enabled' data-test='internalWebSiteMarker_"+
d+"' /><table><tr><td><a href='"+a+"' data-location='"+this.get("title")+"' data-hook='showRegionArea'><div class='map-marker'></div></a></td></tr></table></div>");return e}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Model=$namespace.Model||{};
$namespace.Model.HotelOnlySearchLocationModel=Backbone.Model.extend({defaults:{id:null,hotelName:null,hotelId:null,latitude:null,longitude:null,isSelected:null,marker:null,hotelAvailable:null,hotelRating:null,hotelPrice:null,memberRating:null,maxRating:null,ratingCount:null},initialize:function(){var a=this.get("latitude"),b=this.get("longitude");a=new RichMarker({position:new google.maps.LatLng(a,b),map:null,draggable:!1,title:this.get("index")+": "+this.get("hotelName"),content:this.getMarkerContent()});
this.set("marker",a);this.listenTo(this,"change:isSelected",this.updateMarker)},updateMarker:function(){var a=this.get("marker");a.setContent(this.getMarkerContent());a.setZIndex($namespace.Config.MARKER_INDEX++)},getMarkerContent:function(){var a="<div  class='"+(this.get("isSelected")?"map-marker-active":this.get("hotelAvailable")?"map-marker":"map-marker-unavailable")+"'>";this.get("showMarkerDescription")&&(a=a+"<div class='marker-description'>"+this.get("hotelName")+"<br/><img src='"+$namespace.Configuration.sharedLoc+
"/images/icons/starRating_0"+this.get("hotelRating")+".png' /></div>");return a+"</div>"}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.ChildCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.ChildModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection.RoomCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.RoomModel,setData:function(a){this.reset();if($namespace.Utils.isArray(a))for(var b=0,d=a.length;b<d;b++){var e={index:b+1};a[b].numberOfAdults&&(e.numberOfAdults=a[b].numberOfAdults);e=new $namespace.Model.RoomModel(e);var f=new $namespace.Collection.ChildCollection;for(var g=0,h=+a[b].numberOfChildren;g<h;g++){var k=new $namespace.Model.ChildModel;f.push(k)}e.set("children",f);this.add(e)}},
getNumberOfRooms:function(){return this.rooms?this.rooms.models.length:0},getRoomInfo:function(a){var b=null;if(this.rooms&&this.rooms.models&&this.rooms.models.length>a&&(a=this.rooms.models[a],b={numberOfAdults:parseInt(a.get("numberOfAdults")),numberOfChildren:parseInt(a.get("numberOfChildren")),children:[]},a=a.get("children")))for(var d=0;d<a.length;d++)b.children[d]={index:a[d].get("index"),age:a[d].get("ageOfChild"),flightSeat:a[d].get("flightSeat")};return b}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.RentalCarLocationCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.RentalCarLocationModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.HotelLocationCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.HotelLocationModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.RentalCarEquipmentCollection=Backbone.Collection.extend({model:$namespace.Model.RentalCarEquipmentModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.HotelCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.HotelModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.MapMarkerCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.MapMarkerModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Collection=$namespace.Collection||{};$namespace.Collection.HotelOnlySearchLocationCollection=Backbone.Collection.extend({comparator:"index",model:$namespace.Model.HotelOnlySearchLocationModel});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Utils=new function(){this.isArray=function(a){return Array&&"function"===typeof Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};this.isArrayLike=function(a){return isArray(a)||this.isObject(a)&&!this.isUndefined(a.length)};this.isObject=function(a){return a instanceof Object};this.isFunction=function(a){return"function"===typeof a};this.isUndefined=function(a){return"undefined"===typeof a};this.isJQueryObject=function(a){return a instanceof window.jQuery};
this.isElement=function(a){return a instanceof Element};this.isNode=function(a){return a instanceof Node};this.isString=function(a){return"string"===typeof a};this.isNumber=function(a){return"number"===typeof a&&!isNaN(a)};this.toArray=function(a){return Array.prototype.slice.call(a)};this.padLeft=function(a,b,d){a=this.isString(a)?a:""+a;for(d=this.isUndefined(d)?"0":""+d;a.length<b;)a=d+a;return a};this.rangeCheck=function(a,b,d){var e=a;a<b&&(e=d);a>d&&(e=b);return e};this.getUID=function(){return""+
(new Date).getTime()+"_"+999*Math.random()};this.loadImage=function(a){var b=$.Deferred();a&&a.src?a.complete?b.resolve(a):(a.onload=function(d){b.resolve(a)},$(a).on("error",function(d){b.reject(a)})):b.reject(a);return b.promise()};this.scrollToTopOfPage=function(){$("html, body").animate({scrollTop:0},$namespace.Config.SCROLLTOP_SPEED||400)};this.disableFormField=function(a){a&&a.disable&&this.isFunction(a.disable)?a.disable():this.isJQueryObject(a)||this.isElement(a)?(a=$(a),a.prop("disabled",
!0).addClass("disabled"),a.hasClass("hasDatepicker")&&a.parent().find("BUTTON.ui-datepicker-trigger").prop("disabled",!0).addClass("disabled")):this.isArray(a)&&a.forEach(this.disableFormField,this)};this.enableFormField=function(a){a&&a.enable&&this.isFunction(a.enable)?a.enable():this.isJQueryObject(a)||this.isElement(a)?(a=$(a),a.prop("disabled",!1).removeClass("disabled"),a.hasClass("hasDatepicker")&&a.parent().find("BUTTON.ui-datepicker-trigger").prop("disabled",!1).removeClass("disabled")):
this.isArray(a)&&a.forEach(this.enableFormField,this)};this.getFormFieldId=function(a){var b;a&&this.isFunction(a.id)?b=a.id():(this.isJQueryObject(a)||this.isElement(a))&&$(a).prop(b);return b};this.getFormFieldValue=function(a){if(a&&this.isFunction(a.val))var b=a.val();else this.isJQueryObject(a)||this.isElement(a)?(b=$(a).val(),void 0===b&&(b=a.value)):a&&a.hiddenInput?b=a.hiddenInput.val():a&&a.select?b=a.select.val():a&&a.input?b=a.input.val():a&&(b=a.value);return b};this.eachUninitialized=
function(a){return function(b,d){var e=$(d);e.hasClass("initialized")||a(e,d,b)}};this.parseAirport=function(a){return[].concat(_.map(a.airports,function(a){return{type:"airport",value:a.airportCode,title:a.airportName,city:a.cityName,country:a.country}}))};this.getParentElementOf=function(a,b){do if(a=a.parent(),b(a))return a;while(a.length);return null};this.getParentElementOfClass=function(a,b){return this.getParentElementOf(a,function(a){return a.hasClass(b)})};this.getTemplate=function(a){a=
this.isJQueryObject(a)?a:$.hook(a);return $(a.html())};this.onLocationSelect=function(a,b){a&&b&&("airport"===a.type?(b.el.addClass("location-airport"),b.el.removeClass("location-city")):"city"===a.type?(b.el.addClass("location-city"),b.el.removeClass("location-airport")):(b.el.removeClass("location-airport"),b.el.removeClass("location-city")))};this.parseLocations=function(a){var b=_.uniq(a.cities,function(a,b,f){return a.cityName+a.state+a.country});return[].concat(_.map(a.airports,function(a){return{type:"airport",
value:a.airportCode,title:a.airportName,city:a.cityName,country:a.country}})).concat(_.map(b,function(a){var b=a.cityName,d="";null!=a.state&&a.state.length&&(d+=a.state);null!=a.country&&a.country.length&&(d+=d.length?", ":"",d+=a.country);d.length&&(b+=" ("+d+")");return{type:"city",value:a.cityName+"-"+a.state,title:b,city:a.cityName,country:a.country}})).concat(_.map(a.zipCodes,function(a){var b=a.zipCode,d="";null!=a.cityName&&a.cityName.length&&(d+=a.cityName);null!=a.state&&a.state.length&&
(d+=d.length?", ":"",d+=a.state);null!=a.country&&a.country.length&&(d+=d.length?", ":"",d+=a.country);d.length&&(b+=" ("+d+")");return{type:"zipCode",value:a.zipCode,title:b,city:a.cityName,country:a.country,zipCode:a.zipCode}})).concat(_.map(a.addresses,function(a){return{type:"address",title:a.title,value:a.title,latitude:a.latitude,longitude:a.longitude,state:a.state,country:a.country}}))};this.parseHOBELocations=function(a){var b=_.uniq(a.cities,function(a,b,f){return a.name+a.state+a.country});
return[].concat(_.map(b,function(a){var b=a.name;a.state&&null!=a.state&&a.state.length&&(b+=", "+a.state);a.country&&null!=a.country&&a.country.length&&(b+=", "+a.country);return{type:"city",value:a.name+"-"+a.state,cityCode:a.code,title:b,state:a.state,country:a.country,latitude:a.latitude,longitude:a.longitude}})).concat(_.map(a.airports,function(a){return{type:"airport",value:a.code,title:"("+a.code+") "+a.name,latitude:a.latitude,longitude:a.longitude}})).concat(_.map(a.zipCodes,function(a){return{type:"zipCode",
value:a.zipCode,title:null==a.state||""==a.state?a.zipCode+" ("+a.city+", "+a.country+")":a.zipCode+" ("+a.city+", "+a.state+", "+a.country+")",city:a.city,state:a.state,country:a.country,latitude:a.latitude,longitude:a.longitude}})).concat(_.map(a.addresses,function(a){return{type:"address",title:a.title,value:a.title,latitude:a.latitude,longitude:a.longitude,state:a.state,country:a.country}}))};this.parseDynamicLocations=function(a){var b=_.uniq(a.cities,function(a,b,f){return a.name+a.state+a.country});
return[].concat(_.map(a.destinations,function(a){return{type:"destination",value:a.regionCode,title:a.name,cityCode:a.regionCode,destinationCode:a.destinationCode}})).concat(_.map(b,function(a){var b=a.name;a.state&&null!=a.state&&a.state.length&&(b+=", "+a.state);a.country&&null!=a.country&&a.country.length&&(b+=", "+a.country);return{type:"city",value:a.name+"-"+a.state,cityCode:a.code,title:b,state:a.state,country:a.country,latitude:a.latitude,longitude:a.longitude,city:a.name}})).concat(_.map(a.airports,
function(a){return{type:"airport",value:a.code,title:a.state&&null!=a.state&&a.state.length&&a.country&&null!=a.country&&a.country.length?"("+a.code+") "+a.name+", "+a.state+", "+a.country:a.country&&null!=a.country&&a.country.length?"("+a.code+") "+a.name+", "+a.country:"("+a.code+") "+a.name,latitude:a.latitude,longitude:a.longitude,country:a.country}})).concat(_.map(a.zipCodes,function(a){return{type:"zipCode",value:a.zipCode,title:null==a.state||""==a.state?a.zipCode+" ("+a.city+", "+a.country+
")":a.zipCode+" ("+a.city+", "+a.state+", "+a.country+")",city:a.city,state:a.state,country:a.country,latitude:a.latitude,longitude:a.longitude}})).concat(_.map(a.addresses,function(a){return{type:"address",title:a.title,value:a.title,latitude:a.latitude,longitude:a.longitude,state:a.state,country:a.country}}))};this.getTransitionEndEvent=function(){var a,b=document.createElement("span"),d={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};
for(a in d)if(void 0!==b.style[a])return d[a]};this.getNamespace=function(a,b,d,e){var f=d,g="";this.isString(b)?g=b.split("."):this.isObject(b)&&(g=b.toString().split("."));a=this.isObject(a)?a:window;if(g.length){do{b=g.shift();if(this.isUndefined(a[b]))if(!1!==e)a[b]=g.length?{}:d;else break;else 0===g.length&&(f=a[b]);a=a[b]}while(g.length)}return f};this.updateSelectOptions=function(a,b,d){var e=null;a.html("");for(var f=0,g=b.length;f<g;f++){var h=b[f];a.append($("<option></option>",{value:h.value,
text:h.text,disabled:h.disabled,selected:d?!1:h.selected}));h.selected&&(e=h.val)}d&&(d.prop("selected",!0),a.prepend(d));return e};this.Keyboard={ENTER:13,BACKSPACE:8,TAB:9,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,SHIFT:16,ESCAPE:27,DELETE:46,getCode:function(a){return 0===a.which&&0!==a.keyCode?a.keyCode:a.which},isNumber:function(a){var b=this.getCode(a);return!a.shiftKey&&(48<=b&&57>=b||96<=b&&105>=b)}};this.Breakpoint={isMobile:function(){return window.innerWidth<$namespace.Config.BREAKPOINTS.DESKTOP_MIN},
isDesktop:function(){return window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX},isWidescreen:function(){return window.innerWidth>=$namespace.Config.BREAKPOINTS.WIDESCREEN_MIN},which:function(){return this.isMobile()?"mobile":"desktop"}};this.Currency={formatCurrency:function(a,b,d,e){b=this.isUndefined(b)?".":""+b;d=this.isUndefined(d)?",":""+d;e=this.isUndefined(e)?"$":""+e;var f=(""+(+a).toFixed(2)).split(".");a=""+f[0];f=f[1];if(3>=a.length)var g=a;else{g=[];a=a.split("");a.reverse();for(var h=
0,k=a.length;h<k;h++)0<h&&0===h%3&&h!==a.length-1&&g.push(d),g.push(a[h]);g.reverse();g=g.join("")}return e+g+b+f}};this.String={padLeft:this.padLeft,trim:function(a){a&&(a=(a+"").replace(/^\s+|\s+$/g,""));return a},ucFirst:function(a){var b="";$namespace.Utils.isUndefined(a)||(b=""+a,b=b[0].toUpperCase()+b.slice(1).toLowerCase());return b},removeDiacritics:function(a){for(var b=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},
{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},
{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},
{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},
{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},
{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",
letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},
{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},
{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",
letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},
{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},
{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},
{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},
{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},
{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},
{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},
{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},
{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},
{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},
{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},
{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},
{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},
{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],d=0;d<b.length;d++)a=a.replace(b[d].letters,b[d].base);return a}};this.Cookies={isEnabled:function(){this.set("test_cookies_enabled",!0);return this.get("test_cookies_enabled")},get:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,
"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(a,b,d,e,f,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="";if(d)switch(d.constructor){case Number:h=Infinity===d?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+d;break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":"");return!0},remove:function(a,
b,d){if(!a||!this.has(a))return!1;document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(b?"; path="+b:"");return!0},has:function(a){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/),b=0;b<a.length;b++)a[b]=decodeURIComponent(a[b]);return a}};this.showErrors=
function(a,b){if(1<arguments.length&&"string"==typeof a&&"string"==typeof b){var d={};d[a]=b;a=d;b=2<arguments.length?this.findElements(arguments[2]):null}else b=1<arguments.length?this.findElements(arguments[1]):null;try{for(var e in a){d=e;var f=this.findElements(d,b);if(f.length){/DIV/i.test(f[0].tagName)&&!f.is("DIV.select-widget")||f.addClass("error").attr("lastValue",f.val());var g=$.trim(a[e]);if(g.length){d+="-error";var h=this.findElements(d,b);if(h.length)h.html(g),h.show();else{var k=f.attr("id"),
l=f.find("[aria-labelledby]");0==l.length&&(l=f);if(l.length){d=k+"-error";var p=l.attr("aria-describedby")||"";-1==p.indexOf(d)&&(p+=p.length?" ":"",p+=d);l.attr("aria-describedby",p);h=$('<label tabindex="-1" class="error no-outline" id="'+d+'">'+g+"</label>").insertAfter(f)}else h=$('<label class="error no-outline" id="'+k+'-error" for="'+k+'">'+g+"</label>").insertAfter(f)}}}}}catch(q){}};this.focusFirstErrorField=function(a){a=1==arguments.length?this.findElements(arguments[0]):document.body;
var b=$(a).find("DIV.error:visible, INPUT.error:visible, SELECT.error:visible, TEXTAREA.error:visible, IFRAME.error:visible, BUTTON.error:visible").not(".ui-datepicker-trigger");b.length&&((b=b.get(0),/DIV/i.test(b.tagName))?$(b).is("DIV.select-widget")&&(b.focus(),b=function(a,b){return function(){window.clearTimeout(a.tmr);$(b).find("select").focus()}}(this,b),this.tmr=window.setTimeout(b,10)):(b.parentElement.focus(),b=function(a,b){return function(){window.clearTimeout(a.tmr);b.focus();/input|textarea/i.test(b.tagName)&&
b.value.length&&!b.readOnly&&b.select()}}(this,b),this.tmr=window.setTimeout(b,10)))};this.clearErrors=function(a,b){for(var d=0;d<a.length;d++){var e=a[d];b=1<arguments.length?this.findElements(arguments[1]):null;var f=this.findElements(e,b);f.length&&(/DIV/i.test(f[0].tagName)&&!/select-widget/i.test(f[0].className)||f.removeClass("error"),e+="-error",f=this.findElements(e,b),f.hide().empty())}};this.findElements=function(a){var b=null,d=1<arguments.length&&d instanceof jQuery?d:null;if(null!=a&&
void 0!=a){if(a instanceof jQuery)return a;void 0!=a.tagName?b=d?d.find(a):$(a):"string"==typeof a&&(b=d?d.find(a):$(a),0==b.length&&/^[a-z0-9_-]+/ig.test(a)&&(b=d?d.find("#"+a):$("#"+a),0==b.length&&(b=d?d.find('[name="'+a+'"]'):$('[name="'+a+'"]')),0==b.length&&(b=d?$.hook(a,d):$.hook(a))))}return b};this.hasValueChanged=function(a){return(a=a instanceof jQuery?a:$(a))&&a.val()!=a.attr("lastValue")?!0:!1};this.lastSelectionValid=function(a){try{return a.input.val()==a.input.attr("lastSelectedValue")}catch(b){}return!1};
this.isValidMembershipNumberOrEmail=function(a){var b=/^[0-9]{12}$/;a=$.trim(a);var d=a.indexOf("@");return 0<d&&-1<a.indexOf(".",d)&&this.isValidEmail(a)||b.test(a)?!0:!1};this.isValidPhoneNumber=function(a){a=$.trim(a);return a.match(/^(\()?\d{3}(\))?(-|\s)?\d{3}(-|\s)\d{4}$/)?!0:!1};this.isValidEmail=function(a){if(a&&(a=$.trim(a),a.length&&!/[^a-z0-9!#$%&@'*+/=?^_`{|}~\.-]/i.test(a)&&(a=a.split("@"),2==a.length))){var b=a[0];a=a[1];if(b.length&&65>b.length&&a.length&&256>a.length){if(/[^a-z0-9!#$%&'*+/=?^`_{|}~\.-]/i.test(b)||
/^\.|\.$|\.{2,}/.test(b)||/[^a-z0-9\.-]/gi.test(a)||/^\.|\.$|\.{2,}/g.test(a)||/^-|-$|-{2,}/g.test(a))return!1;if(/^([a-z0-9-]+\.)+[a-z0-9]+$/i.test(a)){a=a.split(".");for(b=0;b<a.length;b++)if(/^-|-$/.test(a[b]))return!1;if(/[a-z]/i.test(a[a.length-1]))return!0}}}return!1};this.updateLiveContainer=function(a){this.liveContainer=$(".tab-switcher-live-container");0===this.liveContainer.length&&(this.liveContainer=$("<span></span>",{"aria-live":"polite","class":"ada-screenreader tab-switcher-live-container"}),
$(document.body).append(this.liveContainer));if(a)if(this.Breakpoint.isMobile()){var b=this;setTimeout(function(){b.liveContainer.text(a);setTimeout(function(){b.liveContainer.text("")},2E3)},500)}else this.liveContainer.text(a);else this.liveContainer.text("")};this.formatDateInput=function(a){switch($namespace.GlobalConstants.LOCALE_DATE_FORMAT.toLowerCase()){case "aaaa-mm-jj":case "yyyy-mm-dd":for(var b=a.val(),d="",e=0;e<b.length;e++)4===e||7===e?d=$.isNumeric(b.charAt(e))?d+("-"+b.charAt(e)):
d+"-":$.isNumeric(b.charAt(e))&&(d+=b.charAt(e));a.val(d);break;default:b=a.val();d="";var f=2,g=0;for(e=0;e<b.length;e++)"/"===b.charAt(e)&&0<f&&$.isNumeric(b.charAt(e-1))?(f--,g=0,d+="/"):$.isNumeric(b.charAt(e))&&(2>g?g++:2==g&&0<f&&(g=1,f--,d+="/"),d+=b.charAt(e));a.val(d)}};this.htmlDecode=function(a){return $("<div />").html(a).text()};this.capitalizeFirstLetterInString=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};this.getVp1DestinationsAsArrayWithCommaSeparatedFromGlobal=function(){var a=
$namespace.GlobalConstants.VP1_BOOKABLE_DESTINATIONS.split(",");a.pop();return a.map(function(a){return a.replace(/\s/g,"").toUpperCase()})};this.getVp1DestinationsWithRegionsForRegex=function(a,b,d){var e={" ":"",",":"|"};return a?$namespace.GlobalConstants.VP1_BOOKABLE_DESTINATIONS.replace(/\s|,/g,function(a){return e[a]}).toLowerCase():b?$namespace.GlobalConstants.VP1_BOOKABLE_DESTINATIONS.replace(/\s|,/g,function(a){return e[a]}).toUpperCase():d?$namespace.GlobalConstants.VP1_BOOKABLE_DESTINATIONS.replace(/\s|,/g,
function(a){return e[a]}):$namespace.GlobalConstants.VP1_BOOKABLE_DESTINATIONS};this.regexDestinationCode=function(a){var b=$namespace.GlobalConstants.CLEANUP_HARD_CODED_VP_DESTINATIONS_ENABLED,d=this.getVp1DestinationsWithRegionsForRegex(!1,!0,!1);d=new RegExp(d,"i");return(b?d:new RegExp(/ARIZONA|CARIBBEAN|COOKISLANDS|EUROPE|FIJI|FLORIDA|HAWAII|MEXICO|TAHITIANISLANDS|COSTARICA/i)).test(a)};this.regexHotelDestinationCode=function(a){return(new RegExp(/hotels\/(Arizona|Caribbean|Cook|Costa|Europe|Fiji|Florida|Hawaii|Las-Vegas|Mexico|Tahiti)/i)).test(a)};
this.addAriaLevelOrRole=function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$.validator.addMethod("phoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||9<a.length&&a.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number");$.validator.addMethod("alphanumeric",function(a,b){return this.optional(b)||/^\w+$/i.test(a)},"Letters, numbers, and underscores only please");
$.validator.addMethod("flightNumberForAirline",function(a,b){return""!=$.trim($("#select_airline").val())&&""==$.trim(a)?!1:!0},"Please enter your arrival flight number.");$.validator.addMethod("selectAirline",function(a,b){return""!=$.trim($("#flight_number").val())&&""==$.trim(a)?!1:!0},"Please select an airline.");$.validator.addMethod("loyaltyNumber",function(a,b){a=$.trim(a);return!_.isEmpty(a)&&4>a.length?!1:!0},"Loyalty number requires at least 4 characters.");
$.validator.addMethod("membershipNumberOrEmail",function(a,b){b=/^[0-9]{12}$/;a=$.trim(a);return""==a?!1:0<a.indexOf("@")?(b=a.indexOf("@",0),-1<a.indexOf(".",b)&&a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)):12==a.length&&b.test(a)?!0:!1},"The information entered is incorrect and does not match a Travel account.");
$.validator.addMethod("validEmail",function(a,b){b=$namespace.StringUtil.trim(a);if(0<=a.indexOf(" "))return!1;for(a=0;23>a;a++)if(-1<b.indexOf("/'\\ \";:?!()[]{}^|#$*&%,".charAt(a),0))return!1;for(a=0;a<b.length;a++)if(127<b.charCodeAt(a))return!1;a=b.indexOf("@",0);return-1==a||0==a||-1<b.indexOf("@",a+1)||-1==b.indexOf(".",a)||-1!=b.indexOf("@.",0)||-1!=b.indexOf(".@",0)||-1!=b.indexOf("..",0)||-1<b.indexOf("+",a+1)?!1:!0},"Please enter an valid email address.");

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Config=new function(){this.TranslationTexts={DATE_SELECTED: "Date Selected:",CURRENT_LOCATION: "Current Location",SUNDAY: "Sunday",MONDAY: "Monday",TUESDAY: "Tuesday",WEDNESDAY: "Wednesday",THURSDAY: "Thursday",FRIDAY: "Friday",SATURDAY: "Saturday",JANUARY: "January",FEBRUARY: "February",MARCH: "March",APRIL: "April",MAY: "May",JUNE: "June",JULY: "July",AUGUST: "August",SEPTEMBER: "September",OCTOBER: "October",NOVEMBER: "November",DECEMBER: "December",DAY_OF_MONTH_1: "First",DAY_OF_MONTH_2: "Second",DAY_OF_MONTH_3: "Third",DAY_OF_MONTH_4: "Fourth",DAY_OF_MONTH_5: "Fifth",DAY_OF_MONTH_6: "Sixth",DAY_OF_MONTH_7: "Seventh",DAY_OF_MONTH_8: "Eighth",DAY_OF_MONTH_9: "Ninth",DAY_OF_MONTH_10: "Tenth",DAY_OF_MONTH_11: "Eleventh",DAY_OF_MONTH_12: "Twelfth",DAY_OF_MONTH_13: "Thirteenth",DAY_OF_MONTH_14: "Fourteenth",DAY_OF_MONTH_15: "Fifteenth",DAY_OF_MONTH_16: "Sixteenth",DAY_OF_MONTH_17: "Seventeenth",DAY_OF_MONTH_18: "Eighteenth",DAY_OF_MONTH_19: "Nineteenth",DAY_OF_MONTH_20: "Twentieth",DAY_OF_MONTH_21: "Twenty First",DAY_OF_MONTH_22: "Twenty Second",DAY_OF_MONTH_23: "Twenty Third",DAY_OF_MONTH_24: "Twenty Fourth",DAY_OF_MONTH_25: "Twenty Fifth",DAY_OF_MONTH_26: "Twenty Sixth",DAY_OF_MONTH_27: "Twenty Seventh",DAY_OF_MONTH_28: "Twenty Eighth",DAY_OF_MONTH_29: "Twenty Ninth",DAY_OF_MONTH_30: "Thirtieth",DAY_OF_MONTH_31: "Thirty First",YEAR_1999: "Nineteen Ninety Nine",YEAR_2000: "Two Thousand",YEAR_2001: "Two Thousand one",YEAR_2002: "Two Thousand two",YEAR_2003: "Two Thousand three",YEAR_2004: "Two Thousand four",YEAR_2005: "Two Thousand five",YEAR_2006: "Two Thousand six",YEAR_2007: "Two Thousand seven",YEAR_2008: "Two Thousand eight",YEAR_2009: "Two Thousand nine",YEAR_2010: "Twenty Ten",YEAR_2011: "Twenty Eleven",YEAR_2012: "Twenty Twelve",YEAR_2013: "Twenty Thirteen",YEAR_2014: "Twenty Fourteen",YEAR_2015: "Twenty Fifteen",YEAR_2016: "Twenty Sixteen",YEAR_2017: "Twenty Seventeen",YEAR_2018: "Twenty Eighteen",YEAR_2019: "Twenty Nineteen",YEAR_2020: "Twenty Twenty",YEAR_2021: "Twenty Twenty One",YEAR_2022: "Twenty Twenty Two",YEAR_2023: "Twenty Twenty Three",YEAR_2024: "Twenty Twenty Four",YEAR_2025: "Twenty Twenty Five",YEAR_2026: "Twenty Twenty Six",YEAR_2027: "Twenty Twenty Seven",YEAR_2028: "Twenty Twenty Eight",YEAR_2029: "Twenty Twenty Nine",YEAR_2030: "Twenty Thirty"};var TranslationTexts = this.TranslationTexts;
;this.CURRENT_LOCATION=this.TranslationTexts.CURRENT_LOCATION;this.DAY_NAMES=[this.TranslationTexts.SUNDAY,this.TranslationTexts.MONDAY,this.TranslationTexts.TUESDAY,this.TranslationTexts.WEDNESDAY,this.TranslationTexts.THURSDAY,this.TranslationTexts.FRIDAY,this.TranslationTexts.SATURDAY];this.DAY_SHORT_NAMES=
[this.TranslationTexts.SUNDAY[0].toUpperCase(),this.TranslationTexts.MONDAY[0].toUpperCase(),this.TranslationTexts.TUESDAY[0].toUpperCase(),this.TranslationTexts.WEDNESDAY[0].toUpperCase(),this.TranslationTexts.THURSDAY[0].toUpperCase(),this.TranslationTexts.FRIDAY[0].toUpperCase(),this.TranslationTexts.SATURDAY[0].toUpperCase()];this.DAY_OF_MONTH_NAMES=[this.TranslationTexts.DAY_OF_MONTH_1,this.TranslationTexts.DAY_OF_MONTH_2,this.TranslationTexts.DAY_OF_MONTH_3,this.TranslationTexts.DAY_OF_MONTH_4,
this.TranslationTexts.DAY_OF_MONTH_5,this.TranslationTexts.DAY_OF_MONTH_6,this.TranslationTexts.DAY_OF_MONTH_7,this.TranslationTexts.DAY_OF_MONTH_8,this.TranslationTexts.DAY_OF_MONTH_9,this.TranslationTexts.DAY_OF_MONTH_10,this.TranslationTexts.DAY_OF_MONTH_11,this.TranslationTexts.DAY_OF_MONTH_12,this.TranslationTexts.DAY_OF_MONTH_13,this.TranslationTexts.DAY_OF_MONTH_14,this.TranslationTexts.DAY_OF_MONTH_15,this.TranslationTexts.DAY_OF_MONTH_16,this.TranslationTexts.DAY_OF_MONTH_17,this.TranslationTexts.DAY_OF_MONTH_18,
this.TranslationTexts.DAY_OF_MONTH_19,this.TranslationTexts.DAY_OF_MONTH_20,this.TranslationTexts.DAY_OF_MONTH_21,this.TranslationTexts.DAY_OF_MONTH_22,this.TranslationTexts.DAY_OF_MONTH_23,this.TranslationTexts.DAY_OF_MONTH_24,this.TranslationTexts.DAY_OF_MONTH_25,this.TranslationTexts.DAY_OF_MONTH_26,this.TranslationTexts.DAY_OF_MONTH_27,this.TranslationTexts.DAY_OF_MONTH_28,this.TranslationTexts.DAY_OF_MONTH_29,this.TranslationTexts.DAY_OF_MONTH_30,this.TranslationTexts.DAY_OF_MONTH_31];this.MONTH_NAMES=
[this.TranslationTexts.JANUARY,this.TranslationTexts.FEBRUARY,this.TranslationTexts.MARCH,this.TranslationTexts.APRIL,this.TranslationTexts.MAY,this.TranslationTexts.JUNE,this.TranslationTexts.JULY,this.TranslationTexts.AUGUST,this.TranslationTexts.SEPTEMBER,this.TranslationTexts.OCTOBER,this.TranslationTexts.NOVEMBER,this.TranslationTexts.DECEMBER];this.YEAR_NAMES=[this.TranslationTexts.YEAR_1999,this.TranslationTexts.YEAR_2000,this.TranslationTexts.YEAR_2001,this.TranslationTexts.YEAR_2002,this.TranslationTexts.YEAR_2003,
this.TranslationTexts.YEAR_2004,this.TranslationTexts.YEAR_2005,this.TranslationTexts.YEAR_2006,this.TranslationTexts.YEAR_2007,this.TranslationTexts.YEAR_2008,this.TranslationTexts.YEAR_2009,this.TranslationTexts.YEAR_2010,this.TranslationTexts.YEAR_2011,this.TranslationTexts.YEAR_2012,this.TranslationTexts.YEAR_2013,this.TranslationTexts.YEAR_2014,this.TranslationTexts.YEAR_2015,this.TranslationTexts.YEAR_2016,this.TranslationTexts.YEAR_2017,this.TranslationTexts.YEAR_2018,this.TranslationTexts.YEAR_2019,
this.TranslationTexts.YEAR_2020,this.TranslationTexts.YEAR_2021,this.TranslationTexts.YEAR_2022,this.TranslationTexts.YEAR_2023,this.TranslationTexts.YEAR_2024,this.TranslationTexts.YEAR_2025,this.TranslationTexts.YEAR_2026,this.TranslationTexts.YEAR_2027,this.TranslationTexts.YEAR_2028,this.TranslationTexts.YEAR_2029,this.TranslationTexts.YEAR_2030];this.BREAKPOINTS={DESKTOP_MIN:900,MOBILE_MAX:899,WIDESCREEN_MIN:1020};this.SCROLLTOP_SPEED=500;this.CAROUSEL_SPEED=6E3;this.CAROUSEL_ANIMATION_DURATION=
500;this.STANDARD_ANIMATION_SPEED=333;this.LOCATION_SUGGESTION_RESULTS_PER_PAGE=10;this.ALERT_CLOSE_COOKIE="costcotravel-alert-close";this.DATE_SEPARATOR="/";this.SEARCH_WIDGET={OPEN_ON_MOBILE_PAGES:["/rental-cars","/rental-cars/"]};this.LOCATIONS_MAP={MAP_OPTIONS:{zoom:12,scrollwheel:!0,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!1,zoomControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP},SELECTED_COLOR:"3d83b9",
MARKER_ICON_URL:"/location-marker.php?n=$n&bg=$bg&c=$c&brand=$brand"};this.VACATION_PACKAGES={MAX_ROOMS:2,MAX_CHILDREN_PER_ROOM:5,MAX_ADULTS:9,DESTINATIONS_WITHOUT_REGIONS:["lasVegas"],DESTINATIONS_WITHOUT_FIELDS:["escortedVacations","lionWorldTravel","themeParks"]};this.RENTAL_CAR={MIN_AGE:25,MAX_DAYS_IN_FUTURE_TO_START_RENTAL:90,MAX_DAYS_IN_FUTURE_TO_END_RENTAL:91};this.MARKER_INDEX=10;this.QUICKER_ANIMATION_SPEED=200;this.REMOVE_LIVE_TEXT_DELAY=1E3};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.AjaxUtil=new function(){this.TranslationTexts={PLEASE_WAIT_MESSAGE: "Please Wait..."};var TranslationTexts = this.TranslationTexts;
;var a=function(){return""+(new Date).getTime()+"_"+999*Math.random()};this.makeAjaxCall=function(b,e,f,g,h,k,l,p){var d=new $namespace.AsynchronousConnectionUtil.AsynchronousRequest;null==b||0>b.indexOf("http://")&&0>b.indexOf("https://")?b=$arguments.webloc+"/"+b:d.isCrossDomain=!0;d.url=b;d.queryString=e||"";d.queryString.length&&(d.queryString+=
"&");d.queryString+="_uid="+a();d.paramArray=f;d.useAjax=!0;d.useGetMethod=p;d.target=g;d.callbackFunctionName=h;d.callbackFunctionParams=l;k&&""!=k&&(d.postCallbackScript=function(){$namespace.Analytics.trackPageView(k)});$namespace.AsynchronousConnectionUtil.submitWithoutReload(d)};this.makeAjaxCallWithWaitingDiv=function(b,e,f,g,h,k,l,p,q){var d=new $namespace.AsynchronousConnectionUtil.AsynchronousRequest;null==b||0>b.indexOf("http://")&&0>b.indexOf("https://")?b=$arguments.webloc+"/"+b:d.isCrossDomain=
!0;d.url=b;d.queryString=e||"";d.queryString.length&&(d.queryString+="&");d.queryString+="_uid="+a();d.paramArray=f;d.useAjax=!0;d.useGetMethod=q;d.target=g;d.callbackFunctionName=h;d.callbackFunctionParams=k;l&&""!=l&&(d.postCallbackScript=function(){$namespace.Analytics.trackPageView(l)});b=new $namespace.AjaxUtil.SplashScreenRequest;p&&""!=p&&(b.splashScreenText=p);d.splashScreenRequest=b;d.splashScreenDisplayFunctionName=$namespace.ComponentUtil.displaySearchingPopup;d.splashScreenHideFunctionName=
$namespace.ComponentUtil.hideSearchingPopup;$namespace.AsynchronousConnectionUtil.submitWithoutReload(d)};this.makeAjaxCallWithRequest=function(b,e){null!=b&&(b.queryString=b.queryString||"",b.queryString.length&&(b.queryString+="&"),b.queryString+="_uid="+a(),e&&""!=e&&(b.postCallbackScript=function(){$namespace.Analytics.trackPageView(e)}),$namespace.AsynchronousConnectionUtil.submitWithoutReload(b))};this.SplashScreenRequest=function(){this.splashScreenText=TranslationTexts.PLEASE_WAIT_MESSAGE;
this.showStopButton=!1;this.formActionAfterCancel=""};this.AsynchronousMultiRequestItem=function(a,b,f,g,h,k,l,p){this.url=a;this.queryString=b;this.paramArray=f;this.target=g;this.callbackFunctionName=h;this.trackingText=l;this.callbackFunctionParams=k;this.postCallbackScript=p};var b=function(a,b){for(var d=this.responseText,e=0;e<a.length;e++){var h=a[e],k=d.indexOf("::"),l=parseInt(d.substring(0,k)),p=d.substr(k+2,l);d=d.substring(l+k+2);k=new $namespace.AsynchronousConnectionUtil.CallbackObject(p,
h.callbackFunctionName,h.callbackFunctionParams,!0);k.isPageContent()&&h.target&&""!=h.target&&$namespace.AsynchronousConnectionUtil.populateDiv(p,h.target,k);p=k.applyCallback();(h=h.postCallbackScript)&&"function"==typeof h&&h();if(!p)break}b&&b()};this.makeMultiAjaxCall=function(d,e,f,g){if(d&&d.length){for(var h=[],k=0;k<d.length;k++){var l=d[k];l.url&&(l.queryString=l.queryString?escape(l.queryString):"",l.paramArray||(l.paramArray=[]),l.trackingText&&""!=l.trackingText&&(l.postCallbackScript=
function(){$namespace.Analytics.trackPageView(l.trackingText)}),h.push(l))}0<h.length&&(d=new $namespace.AsynchronousConnectionUtil.AsynchronousRequest,d.url=$arguments.webloc+"/multiRequestDispatcher.act",d.queryString="requestString="+JSON.stringify(h)+"&_uid="+a(),d.useAjax=!0,d.parseResponse=!1,d.callbackFunctionName=b,d.callbackFunctionParams=[h,g],1==e&&(e=new $namespace.AjaxUtil.SplashScreenRequest,f&&""!=f&&(e.splashScreenText=f),d.splashScreenRequest=e,d.splashScreenDisplayFunctionName=$namespace.ComponentUtil.displaySearchingPopup,
d.splashScreenHideFunctionName=$namespace.ComponentUtil.hideSearchingPopup),$namespace.AsynchronousConnectionUtil.submitWithoutReload(d))}}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Analytics=new function(){this._eventTrackingInfo=null;this.EventTrackingInfo=function(){this.category;this.action;this.label;this.value};this.EcommTransactionInfo=function(){this.id;this.affiliation;this.revenue;this.shipping;this.tax};this.AddItemInfo=function(){this.id;this.name;this.sku;this.category;this.price;this.quantity};this.CampaignTrackingInfo=function(){this.campaignName;this.campaignSource;this.campaignMedium;this.campaignKeyword;this.campaignContent;this.campaignId};this.trackEvent=
function(a,d,e,f){var b=!0;try{4<arguments.length?ga("send","event",a,d,e,f,arguments[4]):ga("send","event",a,d,e,f)}catch(h){b=!1}return b};this.trackPageView=function(a){if(0==arguments.length||void 0==a||null==a||"undefined"==a)a="";try{"undefined"!=typeof _guestUser&&_guestUser&&(a="/guest"+(a||""))}catch(d){}try{ga("send","pageview",a)}catch(d){}};this.addECommerceTransaction=function(a){try{a&&(ga("require","ecommerce"),ga("ecommerce:addTransaction",a))}catch(d){}};this.addTransactionItem=function(a){try{a&&
ga("ecommerce:addItem",a)}catch(d){}};this.trackTransaction=function(){try{ga("ecommerce:send")}catch(b){}};this.trackCampaign=function(a){try{a&&(ga("set","campaignName",a.campaignName),ga("set","campaignSource",a.campaignSource),ga("set","campaignMedium",a.campaignMedium),ga("set","campaignKeyword",a.campaignKeyword),ga("set","campaignContent",a.campaignContent),ga("set","campaignId",a.campaignId))}catch(d){}};this.trackError=function(b){var d=null;$namespace.AsynchronousConnectionUtil.isCallbackEvent()?
d=this.messages:!$namespace.AsynchronousConnectionUtil.isAjaxRequest()&&b&&(d=[],d.push(b));if(d&&0<d.length){b="";for(var e=!1,f=0;f<d.length;f++)if(d[f].type==ErrorTypes.ERROR_TYPE_ERROR){e=!0;break}if(e){for(f=0;f<d.length;f++)d[f].code&&"0"!=d[f].code&&(b+=(""!=b?",":"")+d[f].code),d[f].attributes&&d[f].attributes.vendorName&&(b+=(""!=b?",":"")+d[f].attributes.vendorName+","+d[f].attributes.vendorCode),d[f].attributes&&d[f].attributes.vendorMessage&&(b+=(""!=b?",":"")+a(d[f].attributes.vendorMessage)),
d[f].attributes&&d[f].attributes.analyticsMessage&&d[f].attributes.analyticsMessage!=d[f].attributes.vendorMessage?b+=(""!=b?",":"")+a(d[f].attributes.analyticsMessage):!d[f].message||d[f].attributes&&d[f].message==d[f].attributes.vendorMessage||(b+=(""!=b?",":"")+a(d[f].message));$namespace.Analytics.trackPageView("/er/errorCode/"+b)}}};var a=function(a){var b="";a=a.replace("|","/");for(var e=0;e<a.length;e++)b=-1!="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz/0123456789/,".indexOf(a.charAt(e),
0)?b+a.charAt(e):b+"_";return b};this.tmr=null;this.queue=[];this.track=function(){for(var a=0;a<arguments.length;a++){var d=arguments[a];d&&"string"==typeof d.vendor&&"string"==typeof d.type&&(/google/i.test(d.vendor)?/^p(ageview|v)$/i.test(d.type)?this.trackPageView(d.text?d.text:""):/^ev/i.test(d.type)?d.value?this.trackEvent(d.category||"",d.action||"",d.label||"",d.value||""):this.trackEvent(d.category||"",d.action||"",d.label||""):/^err/i.test(d.type)&&this.trackError(d.message||""):/adobe/i.test(d.vendor)&&
$namespace.GlobalConstants.ADOBE_ANALYTICS_ENABLED&&!this.isDuplicateBeacon(d)&&(this.queue.push(d),this.processQueue()))}};this.isDuplicateBeacon=function(a){if(window.sessionStorage)try{var b=null;if(/^p(ageview|v)$/i.test(a.type))b=("pv-"+a.events.replace(/[,]/g,"-").replace(/event/ig,"")+"-"+(a.eVar1||a.v1)).replace(/[^a-z0-9-]/ig,"");else if(/^ev/i.test(a.type)){b="ev-"+a.events.replace(/[,]/g,"-").replace(/event/ig,"");for(var e in a)/^(ev|type|vendor)/i.test(e)||(b+="-"+a[e].toString());b=
b.replace(/[^a-z0-9-]/ig,"").substr(0,30)}if(b){var f=(new Date).getTime(),g=parseInt(window.sessionStorage.getItem(b)||0);if(5E3>f-g)return!0;window.sessionStorage.setItem(b,f)}}catch(h){$namespace.Logger.info(h.message)}return!1};this.processQueue=function(){window.clearTimeout(this.tmr);if(window.s){for(var a=0,d=0;d<this.queue.length;d++)null!=this.queue[d]&&this.send(this.queue[d])&&(this.queue[d]=null,a++);a==this.queue.length&&(this.queue=[])}else this.tmr=window.setTimeout(function(a){return function(){a.processQueue()}}(this),
500)};this.send=function(a){try{window.s.clearVars();window.s.pageURL=window.location.href;var b=/^p(ageview|v)$/i.test(a.type),e=/^ev/i.test(a.type);b&&(window.s.eVar4=$namespace.GlobalConstants.LOCALE_CODE,window.s.eVar26=$namespace.AnalyticsHelper.getAuthenticationStatus(),window.s.eVar67=$namespace.Configuration.server,window.s.eVar68=$namespace.AnalyticsHelper.getProvinceCode(),window.s.eVar69=$namespace.AnalyticsHelper.getCountryCode(),window.s.eVar70=$namespace.Utils.Breakpoint.which(),window.s.eVar71=
$namespace.AnalyticsHelper.getSiteName(),window.s.eVar72=$namespace.AnalyticsHelper.getUrlQueryString(),window.s.eVar73=$namespace.DateUtil.getDateAsString(new Date),window.s.eVar74=window.location.hostname+window.location.pathname,window.s.eVar75=$namespace.Configuration.version,window.s.contextData.pageload="yes");for(var f in a)if(!/^type$/i.test(f))if(/^events$/.test(f)){for(var g="",h=a[f].toString().split(","),k=0;k<h.length;k++)g+=g.length?",":"",g+=/^[0-9]+([:=][A-Z0-9]+)?$/i.test(h[k])?"event"+
h[k]:h[k];window.s[f]=g}else/^eVar[0-9]{1,2}$/.test(f)?window.s[f]=a[f]:/^v[0-9]{1,2}$/.test(f)&&(window.s[f.replace("v","eVar")]=a[f]);if(/^(event[0-9]{1,3}([:=][A-Z0-9]+)?[,]?)+$/i.test(window.s.events)){if(b)return window.s.t(),!0;if(e)return window.s.tl(),!0;$namespace.Logger.info('Analytics.send() error: invalid report type: "'+a.type+"'")}else $namespace.Logger.info("Analytics.send() error: missing or invalid events list")}catch(l){$namespace.Logger.info("Analytics.send() error: "+l.toString())}return!1};
this.filterChars=function(a){arguments.length&&"string"===typeof a&&(a=$.trim(a.replace(/[^a-z0-9 -_'":|]/gi,"")));return a}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.AnalyticsHelper=new function(){this.getAuthenticationStatus=function(){return $namespace.GlobalConstants.IS_USER_LOGGED_IN?"authenticated":"unauthenticated"};this.getCountryCode=function(){var a=window.location.href;return/\.uk\b|consumeruk/i.test(a)?"UK":/\.ca\b|consumercan/i.test(a)?"CA":"US"};this.getProvinceCode=function(){return $namespace.Navigation.getSelectedProvinceCode()||"n/a"};this.getSiteName=function(){return window.location.host.split(".").slice(-2).join(".")};this.getUrlQueryString=
function(){return""==window.location.search.replace("/","")?"none":window.location.search};this.getRentalCarId=function(){return window.sessionStorage?window.sessionStorage.getItem("RENTAL_CAR_ID"):null};this.setRentalCarId=function(a,b,d){if(window.sessionStorage)if(2<arguments.length&&a&&b&&d){var e=$.trim(a).toUpperCase()+"|"+$.trim(b).toUpperCase()+":"+$.trim(d).toUpperCase();window.sessionStorage.setItem("RENTAL_CAR_ID",e)}else window.sessionStorage.removeItem("RENTAL_CAR_ID")};this.getLastCarSearchValues=
function(){try{var a=window.sessionStorage?window.sessionStorage.getItem("LAST_CAR_SEARCH_VALUES"):null;if(a&&(a=a.split("|"),6<a.length))return{locationCode:a[0],city:a[1],country:a[2],isRoundTrip:a[3],pickUpDate:a[4],dropOffDate:a[5],totalDays:a[6]}}catch(b){}return null};this.setLastCarSearchValues=function(a,b,d,e,f,g,h){if(window.sessionStorage)if(7==arguments.length&&a&&b&&d&&e&&f&&g&&h)try{var k=$.trim(a+"|"+b+"|"+d+"|"+e+"|"+f+"|"+g+"|"+h);window.sessionStorage.setItem("LAST_CAR_SEARCH_VALUES",
k)}catch(l){}else window.sessionStorage.removeItem("LAST_CAR_SEARCH_VALUES")};this.getVacationPackagePrefixForGoogle=function(){var a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);return $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL===a?$namespace.AnalyticsConstants.GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_ONLY:$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT===a?$namespace.AnalyticsConstants.GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_FLIGHT:
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR===a?$namespace.AnalyticsConstants.GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_HOTEL_FLIGHT_CAR:$namespace.AnalyticsConstants.GOOGLE_ANALYTICS_PAGE_VIEW_PREFIX_VACATION_PACKAGE};this.trackVacationPackagePageViewForGoogle=function(a){$namespace.Analytics.track({vendor:"google",type:"pv",text:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+a})};this.getVacationPackageTagForAdobe=function(){var a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);
return $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL===a?$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_HOTEL_ONLY:$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT===a?$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_DYNAMIC_PACKAGE:$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR===a?$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_HOTEL_FLIGHT_CAR:$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_VACATION_PACKAGE};this.getPacakageTransportationTagForAdobe=
function(){var a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);return $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR===a?$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_VACATION_PACKAGE_HFC:$namespace.AnalyticsConstants.ADOBE_ANALYTICS_TAG_VACATION_PACKAGE}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		cwctravel="undefined"==typeof cwctravel?{}:cwctravel;cwctravel.core="undefined"==typeof cwctravel.core?{}:cwctravel.core;"undefined"==typeof cwctravel.core.ArrayUtil&&(cwctravel.core.ArrayUtil={contains:function(a,b){for(var d=0;d<a.length;d++)if(a[d]==b)return!0;return!1}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		cwctravel="undefined"==typeof cwctravel?{}:cwctravel;cwctravel.core="undefined"==typeof cwctravel.core?{}:cwctravel.core;
"undefined"==typeof cwctravel.core.ObjectUtil&&(cwctravel.core.ObjectUtil={getValue:function(a,b,d){var e=null;"object"==typeof a&&"undefined"!=typeof a[b]&&(e=a[b]);null==e&&2<arguments.length&&(e=d);return e},cloneObject:function(a,b){var d={};if(0<arguments.length&&"object"==typeof a){b=1<arguments.length&&"object"==typeof b?b:{};for(var e in a)d[e]=cwctravel.core.ObjectUtil.getValue(b,e,a[e])}return d}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		cwctravel="undefined"==typeof cwctravel?{}:cwctravel;cwctravel.core="undefined"==typeof cwctravel.core?{}:cwctravel.core;
cwctravel.core.StringUtil=new function(){this.isEmpty=function(a){return null==a||""==cwctravel.core.StringUtil.trim(a)?!0:!1};this.removeLeadingZeros=function(a){if(null!=a){for(a=cwctravel.core.StringUtil.trim(a);1<a.length&&"0"==a.substr(0,1)&&!(a=a.substr(1),1<arguments.length););a=cwctravel.core.StringUtil.trim(a)}return a};this.trim=function(a){null!=a&&("string"!=typeof a&&(a=a.toString()),a=a.replace(/^\s+|\s+$/g,""));return a};this.rTrim=function(a){var b=String.fromCharCode(32),d=String.fromCharCode(9),
e=a.length,f="";if(1>e)return"";for(--e;-1<e;){if(a.charAt(e)!=b&&a.charAt(e)!=d){f=a.substring(0,e+1);break}--e}return f};this.lTrim=function(a){var b=String.fromCharCode(32),d=String.fromCharCode(9),e=a.length,f="";if(1>e)return"";for(var g=0;g<e;){if(a.charAt(g)!=b&&a.charAt(g)!=d){f=a.substring(g,e);break}g+=1}return f};this.formatCurrency=function(a){a=a.toString().replace(/\$|,/g,"");a=parseFloat(a);var b=a==(a=Math.abs(a));a=Math.floor(100*a+.50000000001);var d=a%100,e=d.toString();a=Math.floor(a/
100).toString();10>d&&(e="0"+e);for(d=0;d<Math.floor((a.length-(1+d))/3);d++)a=a.substring(0,a.length-(4*d+3))+","+a.substring(a.length-(4*d+3));return(b?"":"(")+"$"+a+"."+e+(b?"":")")};this.uppercase=function(a){a.value=a.value.toUpperCase()};this.formatDecimal=function(a,b){a&&""!=a.value&&(a.value=parseFloat(a.value).toFixed(b))};this.camelize=function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,d){return 0==d?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,"")};this.upperCamelize=function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,
function(a,d){return 0==d?a.toUpperCase():a.toLowerCase()}).replace(/\s+/g," ")};this.randomString=function(a){for(var b="",d=0;d<a;d++){var e=Math.floor(61*Math.random());b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(e,e+1)}return b};this.uid=function(){return""+(new Date).getTime()+"_"+999*Math.random()};this.encodeHTML=function(a){for(;-1!=a.indexOf("'");)a=a.replace("'","##39##");for(;-1!=a.indexOf('"');)a=a.replace('"',"##34##");for(;-1!=a.indexOf("?");)a=a.replace("?",
"##63##");for(;-1!=a.indexOf("}");)a=a.replace("}","##125##");for(;-1!=a.indexOf("{");)a=a.replace("{","##123##");for(;-1!=a.indexOf("[");)a=a.replace("[","##91##");for(;-1!=a.indexOf("]");)a=a.replace("]","##93##");for(;-1!=a.indexOf("(");)a=a.replace("(","##40##");for(;-1!=a.indexOf(")");)a=a.replace(")","##41##");for(;-1!=a.indexOf("\n");)a=a.replace("\n","##38##");for(;-1!=a.indexOf("\r");)a=a.replace("\r","##42##");for(;-1!=a.indexOf("\\");)a=a.replace("\\","##92##");for(;-1!=a.indexOf("$");)a=
a.replace("$","##36##");a=a.replace(/</g,"##60##");a=a.replace(/>/g,"##62##");a=a.replace(/!/g,"##33##");a=a.replace(/%/g,"##37##");a=a.replace(/&/g,"##35##");a=a.replace(/:/g,"##58##");a=a.replace(/=/g,"##61##");return a=a.replace(/`/g,"##145##")};this.decodeHTML=function(a){if(!a)return"";a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/##34##/g,'"');a=a.replace(/##39##/g,"'");a=a.replace(/##60##/g,"<");a=a.replace(/##62##/g,">");a=a.replace(/##33##/g,"!");a=a.replace(/##37##/g,"%");
a=a.replace(/##58##/g,":");a=a.replace(/##61##/g,"=");a=a.replace(/##145##/g,"`");a=a.replace(/##63##/g,"?");a=a.replace(/##125##/g,"}");a=a.replace(/##123##/g,"{");a=a.replace(/##91##/g,"[");a=a.replace(/##93##/g,"]");a=a.replace(/##40##/g,"(");a=a.replace(/##41##/g,")");a=a.replace(/##42##/g,"\r");a=a.replace(/##92##/g,"\\");a=a.replace(/##36##/g,"$");a=a.replace(/##38##/g,"\n");a=a.replace(/##35##/g,"&");return a=a.replace(/&#174;/g,"\u00ae")};this.getSelectedOptionsAsQueryString=function(a,b,
d,e,f){var g="";if(a=document.getElementById(a))for(a=a.options,0>=e&&(e=a.length),f=0<=f&&a[f].selected;d<e;d++)if(f||a[d].selected)0<g.length&&(g+="&"),g+=b+"="+a[d].value;return g};this.getArrayAsQueryString=function(a,b,d,e){var f="";if(b)for(0>=e&&(e=b.length);d<e;d++)0<f.length&&(f+="&"),f+=a+"="+b[d];return f};this.isAltLanguageKeyCode=function(a){switch(a){case 192:case 194:case 196:case 198:case 199:case 200:case 201:case 202:case 203:case 206:case 207:case 212:case 214:case 217:case 219:case 220:case 224:case 226:case 228:case 230:case 231:case 233:case 232:case 234:case 235:case 238:case 239:case 244:case 246:case 249:case 251:case 252:case 255:case 338:case 339:case 376:case 168:case 170:case 180:case 186:case 193:case 195:case 197:case 204:case 205:case 210:case 211:case 213:case 216:case 218:case 225:case 227:case 229:case 236:case 237:case 242:case 243:case 245:case 248:case 250:case 256:case 257:case 262:case 263:case 268:case 269:case 274:case 275:case 278:case 279:case 280:case 281:case 298:case 299:case 302:case 303:case 332:case 333:case 362:case 363:case 710:case 715:return!0}return!1};
this.escapeNonAsciiChars=function(a){var b=a;if(null!=a){b="";for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);b+=127<e||43==e||37==e?"&#x"+Number(e).toString(16)+";":a.charAt(d)}}return escape(b)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.DomUtil=new function(){var a=$namespace.Utils;this.disableElement=function(a,b){};this.scrollWindowTop=function(a){(a=a&&document.getElementById(a)?document.getElementById(a):document.getElementById("scrollablePageContent"))?"auto"==(window.getComputedStyle?window.getComputedStyle(a,""):a.currentStyle).overflow?a.scrollTop=0:window.nativeScrollTo&&window.nativeScrollTo(0,0):window.nativeScrollTo&&window.nativeScrollTo(0,0)};this.createCookie=function(a,e,f,g){document.cookie=b(a,e,f,g)};
this.clearAndCreateCookie=function(a,b,f){this.clearCookie(a);this.createCookie(a,b,f)};this.createSecureCookie=function(a,e,f,g){document.cookie=b(a,e,f,g)+"; secure"};var b=function(a,b,f,g){if(f){var d=new Date;d.setTime(d.getTime()+864E5*f);f="; expires="+d.toGMTString()}else f="";return a+"="+b+f+"; path="+(g||"/")};this.readCookie=function(a){a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(a))return g.substring(a.length,
g.length)}return null};this.clearCookie=function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};this.getEl=function(a){"string"==typeof a&&(a=document.getElementById(a));return a};this.toPixels=function(a,b){var d="0px";try{d=a?(b?parseFloat(a):parseInt(a))+"px":"0px"}catch(g){}return d};this.scrollToMiddle=function(a){a instanceof jQuery&&(a=a[0]);a=a.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/
2;window.scrollTo(0,a)};this.positionBlockCentrally=function(a){if(a=document.getElementById(a)){var b=window.innerHeight,d=window.innerWidth,g=document.body.scrollLeft,h=document.body.scrollTop,k=$(a).height(),l=$(a).width();b=h+(b-k)/2;d=g+(d-l)/2;g=document.getElementById("popupDivContainer");g=$(g).offset();a.style.left=$namespace.DomUtil.toPixels(d-g.left);a.style.top=0>b-g.top?$namespace.DomUtil.toPixels(150):$namespace.DomUtil.toPixels(b-g.top)}};this.replaceOptions=function(a,b,f,g){b="string"==
typeof b?JSON.parse(b):b;if(a=$namespace.DomUtil.getEl(a)){var d={};if(1==f){var e=a.selectedIndex;-1<e&&(d["_"+a.options[e].value]=!0)}else if(2==f)for(e=0;e<a.options.length;e++)a.options[e].selected&&(d["_"+a.options[e].value]=!0);for(e=a.length=0;e<b.length;e++){var l=$namespace.StringUtil.decodeHTML($namespace.StringUtil.trim(b[e].text)),p=new Option(l,b[e].value);_.isEmpty(b[e].title)?g&&(p.title=l):p.title=$namespace.StringUtil.decodeHTML(b[e].title);if(1==b[e].selected||0<f&&d["_"+b[e].value])p.selected=
!0;1==b[e].disabled&&(p.disabled=!0);a.options[e]=p}}};this.setElementLoadingMaskForPayment=function(a,b){if(null==b||void 0==b||""==b){var d=$(document.body);var e=!1;var h=2<arguments.length?arguments[2]:!0}else b instanceof jQuery?(d=b,e=!1,h=2<arguments.length?arguments[2]:!1):(d=$(document.body),e=!0,h=2<arguments.length?arguments[2]:!0);var k=3<arguments.length?arguments[3]:!0;if(a){$("div.loading_blocker_status_div").find("div").css("display","block");$("div.loading_blocker_status_div").append("<div></div>");
$("div.payment_processing_status_div").find("div").css("display","block");$("div.payment_processing_status_div").append("<div></div>");var l=$namespace.Utils.getTemplate($.hook("payment_loading_blocker"));l.css("z-index",2E4).hide();$(l).find("img").addClass("blocker-class");l.detach().appendTo("body");k&&d.addClass("scroll-lock");h&&d.find(".payment_loading_blocker").attr("data-scrolltop",$(window).scrollTop());e?l.show():l.fadeIn()}else $("div.loading_blocker_status_div").find("div").css("display",
"none"),$("div.payment_processing_status_div").find("div").css("display","none"),l=d.find(".payment_loading_blocker"),h&&$(window).scrollTop(+d.attr("data-scrolltop")),k&&d.removeClass("scroll-lock"),e?l.remove():(l.fadeOut(333,function(){l.remove()}),d.find(".modal-shade").hide())};this.setElementLoadingMask=function(a,b){if(null==b||void 0==b||""==b){var d=$(document.body);var e=!1;var h=2<arguments.length?arguments[2]:!0}else b instanceof jQuery?(d=b,e=!1,h=2<arguments.length?arguments[2]:!1):
(d=$(document.body),e=!0,h=2<arguments.length?arguments[2]:!0);var k=3<arguments.length?arguments[3]:!0;if(a){$("div.loading_blocker_status_div").find("div").css("display","block");$("div.loading_blocker_status_div").append("<div></div>");var l=$((0,$namespace.Templates.loading_blocker)());l.css("z-index",2E4).hide();l.css("background-image","none");$(l).find("img").addClass("blocker-class");d.append(l);k&&d.addClass("scroll-lock");h&&d.find(".loading-blocker").attr("data-scrolltop",$(window).scrollTop());
e?l.show():l.fadeIn()}else $("div.loading_blocker_status_div").find("div").css("display","none"),l=d.find(".loading-blocker"),h&&$(window).scrollTop(+d.attr("data-scrolltop")),k&&d.removeClass("scroll-lock"),e?l.remove():l.fadeOut(333,function(){l.remove()})};this.stateTmrForUnset=this.stateTmrForSet=null;this.tabableElements='A:visible, BUTTON:visible, DIV:visible, NAV:visible,INPUT:visible, LI:visible, IMG:visible, SELECT:visible, TEXTAREA:visible, H2:visible, H3:visible, [role="button"]:visible';
this.setTabIndexesForModal=function(a,b){if($namespace.DomUtil.stateTmrForSet){window.clearTimeout($namespace.DomUtil.stateTmrForSet);$namespace.DomUtil.stateTmrForSet=null;var d=$(this.tabableElements);a=a instanceof jQuery?a[0]:a;for(var e=0;e<d.length;e++){var h=$(d[e]);if(!a.contains(h[0])){var k=h.attr("tabIndex");void 0==k||null==k?h.attr("data-tab-"+b,"").attr("tabIndex","-1"):"-1"!=k&&h.attr("data-tab-"+b,k).attr("tabIndex","-1")}}}else a=function(a,b){return function(){$namespace.DomUtil.setTabIndexesForModal(a,
b)}}(a,b),$namespace.DomUtil.stateTmrForSet=window.setTimeout(a,1)};this.unsetTabIndexesForModal=function(a){if($namespace.DomUtil.stateTmrForUnset){window.clearTimeout($namespace.DomUtil.stateTmrForUnset);$namespace.DomUtil.stateTmrForUnset=null;for(var b=$("[data-tab-"+a+"]"),d=0;d<b.length;d++){var g=$(b[d]),h=g.attr("data-tab-"+a);h?g.removeAttr("data-tab-"+a).attr("tabIndex",h):g.removeAttr("data-tab-"+a).removeAttr("tabIndex")}}else a=function(a){return function(){$namespace.DomUtil.unsetTabIndexesForModal(a)}}(a),
$namespace.DomUtil.stateTmrForUnset=window.setTimeout(a,1)};this.waitForElement=function(a,b){var d=0,e=setInterval(function(){0<$(a).size()?(clearInterval(e),b()):(d+=$namespace.WaitForElement.TIME_TO_WAIT,d>=$namespace.WaitForElement.TOTAL_WAIT_TIME&&(console.log("Element ("+a+") not found after "+d+"ms"),clearInterval(e)))},$namespace.WaitForElement.TIME_TO_WAIT)};this.bounceElementFocus=function(a){a=function(a,b){return function(){window.clearTimeout(a.blurTmr);b.blur();window.setTimeout(function(){b.focus()},
10)}}(this,a);this.blurTmr=window.setTimeout(a,100)};this.updateLinkElements=function(){$("A").each(function(){var b=$(this),e=b.attr("href"),f=b.attr("data-tab-initialized"),g=b.attr("data-taborder"),h=b.attr("tabindex"),k=b.attr("role");f||void 0!==e&&null!==e&&!1!==e||(void 0!==g&&null!==g&&!1!==g||void 0!==h&&null!==h&&!1!==h||b.attr("tabindex","0"),void 0!=k&&null!=k||b.attr("role","link"),b.on("keydown",function(b){var d=a.Keyboard,e=d.getCode(b);if(e===d.ENTER||e===d.SPACE)this.click(),b.preventDefault(),
b.stopPropagation()}).attr("data-tab-initialized",!0))})};this.setTabIndexesForContainer=function(a,b){if($namespace.DomUtil.stateTmrForSet){window.clearTimeout($namespace.DomUtil.stateTmrForSet);$namespace.DomUtil.stateTmrForSet=null;var d=$(this.tabableElements);a=a instanceof jQuery?a[0]:a;for(var e=0;e<d.length;e++){var h=$(d[e]),k=h.attr("tabIndex");if(a.contains(h[0])){h=$(d[e]);var l=h.attr("data-tab-"+b);l?h.removeAttr("data-tab-"+b).attr("tabIndex",l):(h.removeAttr("data-tab-"+b),"-1"==k&&
h.removeAttr("tabIndex"))}else k=h.attr("tabIndex"),void 0==k||null==k?h.attr("data-tab-"+b,"").attr("tabIndex","-1"):"-1"!=k&&h.attr("data-tab-"+b,k).attr("tabIndex","-1")}}else a=function(a,b){return function(){$namespace.DomUtil.setTabIndexesForContainer(a,b)}}(a,b),$namespace.DomUtil.stateTmrForSet=window.setTimeout(a,1)};this.unsetTabIndexesForContainer=function(a,b){if($namespace.DomUtil.stateTmrForUnset){window.clearTimeout($namespace.DomUtil.stateTmrForUnset);$namespace.DomUtil.stateTmrForUnset=
null;var d=$(this.tabableElements);a=a instanceof jQuery?a[0]:a;for(var e=0;e<d.length;e++){var h=$(d[e]),k=h.attr("tabIndex");if(a.contains(h[0]))void 0==k||null==k?h.attr("data-tab-"+b,"").attr("tabIndex","-1"):"-1"!=k&&h.attr("data-tab-"+b,k).attr("tabIndex","-1");else{var l=h.attr("data-tab-"+b);l?h.removeAttr("data-tab-"+b).attr("tabIndex",l):(h.removeAttr("data-tab-"+b),"-1"==k&&h.removeAttr("tabIndex"))}}}else a=function(a,b){return function(){$namespace.DomUtil.unsetTabIndexesForContainer(a,
b)}}(a,b),$namespace.DomUtil.stateTmrForUnset=window.setTimeout(a,1)};this.setTabindexInContainer=function(a,b){a=a instanceof jQuery?a:$(a);a=a.find(this.tabableElements);for(var d=0;d<a.length;d++){var e=$(a[d]),h=e.attr("tabIndex");void 0==h||null==h?e.attr("data-tab-"+b,"").attr("tabIndex","-1"):"-1"!=h&&e.attr("data-tab-"+b,h).attr("tabIndex","-1")}};this.findAndSetfocus=function(a){a.preventDefault();a.stopPropagation();var b,d=window.location.pathname;d=d.replace($namespace.Configuration.webLoc,
"");d=d.replace(/h=([0-9_a-zA-Z:\-%]+)$/,"");a=!1;$namespace.Navigation.isWorkflowPage()||/\/(cruises|hotels|rental-cars|vacation-packages)\/?$/i.test(d)?(d=0==$(".search-body").find(".active.summary-mode").length?$(".search-body").find(".active").find("form"):$(".search-body").find(".active").find(".summary"),d.length&&(b=d.find('[data-skip-link="true"]:visible'))):"/"==d?(d=$("#search_widget").find("li.active"),0<d.length&&(b=d.find("a"))):a=!0;if(null==b||0==b.length){d=$("main").length?$("main"):
$("div#mainContent").length?$("div#mainContent"):$("div#page_content");b=d.find('[data-skip-link="true"]:visible');b=0==b.length?d.find(".breadcrumb-link:visible"):b;if(0==b.length){var g=d.find("h1:visible,h2:visible");g.length&&(b=$(g[0]).parent())}a&&$(window).scrollTop(d.offset().top)}if(b&&0<b.length){a=$(b[0]).attr("data-taborder");if(null==a||void 0==a)b.addClass("no-outline").attr("data-taborder","document"),$namespace.TabOrder.updatePageTabOrder(),b.on("blur",function(a){b.attr("tabindex",
"-1").removeAttr("data-taborder");b.off("blur")});$(b[0]).focus()}};this.scrollFocusedUnderStickyBar=function(){var a=$(":focus"),b=$('[data-hook="sticky-bar"]').height(),f=$(window).scrollTop();a=(a.length&&a.parents("#custompath_search_results, #custompath_package_overview, footer").length?$(":focus").offset().top:99999)-f;a<b&&$(window).scrollTop(f-(b-a))}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.AsynchronousConnectionUtil=new function(){var a={},b={},d={},e={},f=!1,g=!1,h={parameters:[],addParameter:function(a,b){this.parameters[a]=b},getParameter:function(a){return this.parameters[a]},setParameters:function(a){this.parameters=a},getParameters:function(){return this.parameters},getQueryString:function(){var a="";if(this.parameters)for(var b in this.parameters)this.parameters.hasOwnProperty(b)&&(""!=a&&(a+="&"),a+=b+"="+this.parameters[b]);return a}},k=function(){this.isSrc=!1;
this.scriptContainerText=this.nonce=this.id=this.text="";this.position=-1};this.AsynchronousRequest=function(){this.target=this.queryString=this.paramArray=this.url="";this.isTargetFrame=!1;this.useAjax=!0;this.withCredentials=this.isCrossDomain=this.useGetMethod=!1;this.form=null;this.callbackFunctionName="";this.splashScreenHideFunctionName=this.splashScreenDisplayFunctionName=this.splashScreenRequest=this.postCallbackScript=null;this.formName="";this.callbackFunctionParams=null;this.parseResponse=
!0;this.requestCancelled=!1;this.requestHeaders=[];this.contentType=null;this.replaceDocumentContent=!1;this.pushRequestHeader=function(a,b){this.requestHeaders[a]=b}};this.CallbackObject=function(a,b,d,e,f){this.responseText=a;this.callbackFunctionParams=[];this.messages=[];this.pageContent=!0;b&&("function"==typeof b?this.callbackFunction=b:$namespace.Logger.error("AsynchronousConnectionUtil.CallbackObject: Function reference error."));if(e){if(a)if(f&&-1<f.indexOf("application/json")){b=null;try{b=
JSON.parse(a)}catch(K){$namespace.Logger.error("JSON.parse error: "+K.message)}b&&this.callbackFunctionParams.push(b);this.pageContent=!1}else for(f=a.indexOf("\x3c!-- callbackObject:",0)+20;20<=f;){b=f;e=a.indexOf(":",f);if(0<e&&(f=parseInt(a.substring(f,e)),0<f)){e=a.substring(e+1,e+f+1);f=null;try{f=JSON.parse(e)}catch(K){$namespace.Logger.error("JSON.parse error: "+K.message)}if(f){f.activityMessages&&(this.messages=this.messages.concat(f.activityMessages),0<this.messages.length&&(this.messageCode=
this.messages[0].code,this.messageType=this.messages[0].type,this.message=this.messages[0].attributes&&this.messages[0].attributes.analyticsMessage?{analyticsText:this.messages[0].attributes.analyticsMessage,text:this.messages[0].message}:this.messages[0].message));f.callbackFunctionParameters&&(this.callbackFunctionParams=this.callbackFunctionParams.concat(f.callbackFunctionParameters));this.pageContent=this.pageContent&&f.pageContent;break}}f=a.indexOf("\x3c!-- callbackObject:",b)}}else this.pageContent=
!1;if(d&&0<d.length)for(a=0;a<d.length;a++)this.callbackFunctionParams.push(d[a])};this.CallbackObject.prototype.isPageContent=function(){return this.pageContent};this.CallbackObject.prototype.applyCallback=function(){var d=!0;try{try{g=!0;for(var e in a)try{a[e].apply(this)}catch(G){$namespace.Logger.error("_callbackEventHandlers error: "+G.message)}}finally{g=!1}if(this.callbackFunction){var f=this.callbackFunction.apply(this,this.callbackFunctionParams);void 0!==f&&(d=f)}try{for(e in g=!0,b)try{b[e].apply(this)}catch(G){$namespace.Logger.error("_postCallbackEventHandlers error: "+
G.message)}}finally{g=!1}}catch(G){$namespace.Logger.error("applyCallback error: "+G.message)}return d};var l=function(a,b){return a.data?a.data[b]:a.getAttribute("data-"+b)};this.submitWithoutReload=function(a){if(a.useAjax){var b=u();if(b){var d=r(a);"onreadystatechange"in b?b.onreadystatechange=function(){t(b,a)}:"onload"in b&&(b.onload=function(){t(b,a)});if(a.useGetMethod)b.open("GET",a.url+"?"+d,!0);else{b.open("POST",a.url,!0);var e=$namespace.DomUtil.readCookie("Csrf-token");null!=e&&b.setRequestHeader("X-Csrf-Token",
e);e=l(document.body,"nonce");null!=e&&b.setRequestHeader("X-Csp-Nonce",e)}for(key in a.requestHeaders)b.setRequestHeader(key,a.requestHeaders[key]);a.isCrossDomain?b.withCredentials=a.withCredentials:a.contentType?b.setRequestHeader("Content-Type",a.contentType):b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");n(a);b.setRequestHeader("Accept","*/*");a.useGetMethod?b.send():b.send(d)}}else a.form&&v(a);null!=a.splashScreenRequest&&!a.splashScreenDisplayFunctionName&&
a.splashScreenRequest.hideFormElements&&$namespace.DomUtil.disableFormElements(!0)};this.openUrlWithoutReload=function(a){p(a);var b=u();if(b){var d=r(a);"onreadystatechange"in b?b.onreadystatechange=function(){w(b,a)}:"onload"in b&&(b.onload=function(){w(b,a)});a.useGetMethod?(b.open("GET",a.url+"?"+d,!0),a.isCrossDomain?b.withCredentials=!0:b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),b.send()):(b.open("POST",a.url,!0),a.isCrossDomain?b.withCredentials=!0:
b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),b.send(d));a.useGetMethod?b.open("GET",a.url,!0):b.open("POST",a.url,!0)}};this.openScriptUrlWithoutReload=function(a){var b=document.createElement("SCRIPT");b.type="text/javascript";b.src=a.url;a=document.getElementById(a.target);null!=a&&"undefined"!=a?a.appendChild(b):document.body.appendChild(b)};var p=function(a){null!=a.splashScreenRequest?a.splashScreenDisplayFunctionName?"function"==typeof a.splashScreenDisplayFunctionName?
a.splashScreenDisplayFunctionName.apply(a,[a.splashScreenRequest]):$namespace.Logger.error("AsynchronousConnectionUtil._showSplashScreen: Function reference error."):displayWaitingDiv(a.splashScreenRequest,a):document.body.style.cursor="wait"},q=function(a){null!=a.splashScreenRequest&&(a.splashScreenHideFunctionName?"function"==typeof a.splashScreenHideFunctionName?a.splashScreenHideFunctionName.apply(a,[a.splashScreenRequest]):$namespace.Logger.error("AsynchronousConnectionUtil._hideSplashScreen: Function reference error."):
(hideWaitingDiv(),a.splashScreenRequest.hideFormElements&&$namespace.DomUtil.disableFormElements(!1)),a.splashScreenRequest=null);document.body.style.cursor="auto"},r=function(a){var b="";""!=a.queryString&&(b=a.queryString);if(null!=a.paramArray)for(var d=0;d<a.paramArray.length;d++)""!=b&&(b+="&"),b+=a.paramArray[d][0]+"="+a.paramArray[d][1];a=h.getQueryString();""!=a&&(b&&""!=b&&(b+="&"),b+=a);return b},v=function(a){var b=$("<div></div>"),d=a.form.name+"_InnerFrame";b.append($('<iframe id="'+
d+'" name="'+d+'" width="0" height="0" frameborder="0" src="about:blank" onload="'+($namespace+'.AsynchronousConnectionUtil._frameLoaded("'+d+'");"></iframe>')).css({display:"none"}));document.body.appendChild(b[0]);if(b=document.getElementById(d))b.asynchronousRequest=a;b=h.getParameters();if(0<b.length)for(var e in b)if(a.form.elements[e])a.form.elements[e]=b[e];else{var f=document.createElement("input");f.type="hidden";f.id=e;f.value=b[e];document.forms[a.form.name].appendChild(f)}a.form.setAttribute("target",
d);a.form.submit()};this._frameLoaded=function(a){var b=document.getElementById(a);if(b&&(a=b.contentDocument?b.contentDocument:b.contentWindow?b.contentWindow.document:window.frames[a].document,"about:blank"!=a.location.href)){var d=a.body.innerHTML.indexOf("_callbackFunctionParams=");b=b.asynchronousRequest;var e=b.callbackFunctionName,f=b.postCallbackScript||!1;0==d?e&&""!=e&&(e=e+"("+(a.body.innerHTML.substring(24)+")"),e instanceof Function?e():$namespace.Logger.error("AsynchronousConnectionUtil._frameLoaded: Function reference error callbackFunctionName."),
f&&("function"==typeof f?f():$namespace.Logger.error("AsynchronousConnectionUtil._frameLoaded: Function reference error postCallbackScript."))):(d={readyState:4,status:200},d.responseText=a.body.innerHTML,w(d,b))}};var n=function(a){for(var b in d)if(d.hasOwnProperty(b))(0,d[b])(a)},t=function(a,b){if(4==a.readyState)try{f=!0;var d=b.requestCancelled;q(b);if(200==a.status&&!d){var g=a.getResponseHeader("Csrf-token");g&&$namespace.DomUtil.createSecureCookie("Csrf-token",g);var n=a.responseText;d=!0;
for(var h in e)if(e.hasOwnProperty(h)){var t=(0,e[h])(n,b);d=d&&t}if(d){var k=a.getResponseHeader("Content-Type"),u=new $namespace.AsynchronousConnectionUtil.CallbackObject(a.responseText,b.callbackFunctionName,b.callbackFunctionParams,b.parseResponse,k);u.isPageContent()?w(a,b):(u.applyCallback(),b.postCallbackScript&&("function"==typeof b.postCallbackScript?b.postCallbackScript():$namespace.Logger.error("AsynchronousConnectionUtil._callbackAjax: Function reference error.")))}}}finally{f=!1}},u=
function(){var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest;else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(x){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(B){}}return a?a:($namespace.Logger.error("Cannot create an XMLHTTP instance"),!1)},w=function(a,b){if(4==a.readyState)if(q(b),200==a.status){a=a.responseText;var d="";null!=b.callbackFunctionName&&""!=b.callbackFunctionName?d=b.callbackFunctionName:null!=b.formName&&""!=b.formName&&(d="callback_"+b.formName);
d=new $namespace.AsynchronousConnectionUtil.CallbackObject(a,d,b.callbackFunctionParams,!0);if(d.isPageContent())if(b.replaceDocumentContent)document.body.outerHTML=a;else if(b.isTargetFrame){var e=document.frames(b.target).document;e.open();e.write(a);e.close()}else b.target&&""!=b.target&&$namespace.AsynchronousConnectionUtil.populateDiv(a,b.target,d);d.applyCallback();(b=b.postCallbackScript||!1)&&("function"==typeof b?b():$namespace.Logger.error("AsynchronousConnectionUtil._showUrlContents: Function reference error."))}else b.isTargetFrame&&
(document.frames(b.target).document.write(a.responseText),document.frames(b.target).document.close())},y=function(a,b){return a.position-b.position};this.populateDiv=function(a,b,d){var e=/(<script\b([\s\S]*?)>([\s\S]*?)<\/script\b[\s]*?>)/ig,f=/nonce=["']([a-z0-9]*)["']/ig,g=/id=["']([a-z0-9\-]*)["']/ig,n=/(<script\b[^>]*?src[\s]*=[\s]*[\u0022\u0027]?([^\u0022\u0027]*)[\u0022\u0027]?[^>]*>[\s\S]*?<\/script\b[\s]*?>)/ig,h;for(d=[];h=n.exec(a);){var t=new k;t.isSrc=!0;t.text=h[2];t.scriptContainerText=
h[1];t.position=a.indexOf(h[1]);d.push(t)}for(;h=e.exec(a);){t=h[3];if(1>t.length)t="";else{n=String.fromCharCode(32);var u=String.fromCharCode(9),l=String.fromCharCode(10),w=String.fromCharCode(13),p=t.length,q="";if(1>p)t="";else{for(--p;-1<p;){if(t.charAt(p)!=n&&t.charAt(p)!=u&&t.charAt(p)!=l&&t.charAt(p)!=w){q=t.substring(0,p+1);break}--p}t=q}n=String.fromCharCode(32);u=String.fromCharCode(9);l=String.fromCharCode(10);w=String.fromCharCode(13);q=t.length;p="";if(1>q)t="";else{for(var r=0;r<q;){if(t.charAt(r)!=
n&&t.charAt(r)!=u&&t.charAt(r)!=l&&t.charAt(r)!=w){p=t.substring(r,q);break}r+=1}t=p}t=""==t?"":t}if(""!=t){t=new k;t.isSrc=!1;t.text=h[3];t.scriptContainerText=h[1];t.position=a.indexOf(h[1]);f.lastIndex=0;if(n=f.exec(h[2]))t.nonce=n[1];g.lastIndex=0;if(h=g.exec(h[2]))t.id=h[1];d.push(t)}}d.sort(y);f=a;if(a=document.getElementById(b)){try{for(;a.lastChild;)a.removeChild(a.lastChild)}catch(da){$namespace.Logger.error("_removeChildren error: "+exception.message)}for(e=0;e<d.length;e++)f=f.replace(d[e].scriptContainerText,
"");$namespace.Browser.ie10under&&"SELECT"==a.tagName?a.outerHTML=a.outerHTML.replace(a.innerHTML+"</select>",f+"</select>"):a.innerHTML=f;for(e=0;e<d.length;e++){f=d[e];g=f.text.replace(/^\s+|\s+$/g,"");h=null;if(0==g.toLowerCase().indexOf("<script"))try{h=document.createElement(g)}catch(da){h=null}h||(h=document.createElement("script"),f.nonce&&h.setAttribute("nonce",f.nonce),f.id&&h.setAttribute("id",f.id),h.type="text/javascript",f.isSrc?h.src=g:h.text=g);document.getElementById(b).appendChild(h)}$namespace.AsynchronousConnectionUtil.fireContentChanged(a)}};
this.fireContentChanged=function(a){for(a=$namespace.DomUtil.getEl(a);a;){if(a.onContentChange&&"function"==typeof a.onContentChange)a.onContentChange();a=a.parentNode}};this.addCallbackEventHandler=function(b,d){"string"==typeof b&&"function"==typeof d&&(a[b]=d)};this.clearCallbackEventHandlers=function(){a={}};this.addPostCallbackEventHandler=function(a,d){"string"==typeof a&&"function"==typeof d&&(b[a]=d)};this.clearPostCallbackEventHandlers=function(){b={}};this.addRequestEventHandler=function(a,
b){"string"==typeof a&&"function"==typeof b&&(d[a]=b)};this.removeRequestEventHandler=function(a){"string"==typeof a&&delete d[a]};this.clearRequestHandlers=function(){d={}};this.addResponseEventHandler=function(a,b){"string"==typeof a&&"function"==typeof b&&(e[a]=b)};this.removeResponseEventHandler=function(a){"string"==typeof a&&delete e[a]};this.clearResponseHandlers=function(){e={}};this.isAjaxRequest=function(){return f};this.isCallbackEvent=function(){return g}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Browser=new function(){var a=navigator.userAgent.toLowerCase();this.major=parseInt(navigator.appVersion);this.minor=parseFloat(navigator.appVersion);this.nav2=(this.nav=-1!=a.indexOf("mozilla")&&-1==a.indexOf("spoofer")&&-1==a.indexOf("compatible")&&-1==a.indexOf("opera")&&-1==a.indexOf("webtv")&&-1==a.indexOf("hotjava"))&&2==this.major;this.nav3=this.nav&&3==this.major;this.nav4=this.nav&&4==this.major;this.nav4up=this.nav&&4<=this.major;this.navonly=this.nav&&(-1!=a.indexOf(";nav")||
-1!=a.indexOf("; nav"));this.nav6=this.nav&&5==this.major;this.nav6up=this.nav&&5<=this.major;this.gecko=-1!=a.indexOf("gecko");this.chrome=-1!=a.indexOf("chrome");this.ie3=(this.ie=(-1!=a.indexOf("msie")||-1!=a.indexOf("trident"))&&-1==a.indexOf("opera"))&&4>this.major;this.ie3Mac=this.mac&&-1!=a.indexOf("MSIE");this.ie4=this.ie&&4==this.major&&-1!=a.indexOf("msie 4");this.ie4up=this.ie&&4<=this.major;this.ie5=this.ie&&4==this.major&&-1!=a.indexOf("msie 5.0");this.ie5_5=this.ie&&4==this.major&&-1!=
a.indexOf("msie 5.5");this.ie5up=this.ie&&!this.ie3&&!this.ie4;this.ie5_5up=this.ie&&!this.ie3&&!this.ie4&&!this.ie5;this.ie6=this.ie&&4==this.major&&-1!=a.indexOf("msie 6.");this.ie7=this.ie&&4==this.major&&-1!=a.indexOf("msie 7.");this.ie8=this.ie&&4==this.major&&-1!=a.indexOf("msie 8.");this.ie9=this.ie&&5==this.major&&-1!=a.indexOf("msie 9.");this.ie10=this.ie&&5==this.major&&-1!=a.indexOf("msie 10.");this.ie6up=this.ie&&!this.ie3&&!this.ie4&&!this.ie5&&!this.ie5_5;this.ie7under=this.ie&&(this.ie3||
this.ie4||this.ie5||this.ie5_5||this.ie6);this.ie8under=this.ie&&(this.ie3||this.ie4||this.ie5||this.ie5_5||this.ie6||this.ie7);this.ie9under=this.ie&&(this.ie3||this.ie4||this.ie5||this.ie5_5||this.ie6||this.ie7||this.ie8);this.ie10under=this.ie&&(this.ie3||this.ie4||this.ie5||this.ie5_5||this.ie6||this.ie7||this.ie8||this.ie9);this.ie9orHigher=this.ie&&!(this.ie3||this.ie4||this.ie5||this.ie6||this.ie7||this.ie8);this.aol3=(this.aol=-1!=a.indexOf("aol"))&&this.ie3;this.aol4=this.aol&&this.ie4;this.aol5=
-1!=a.indexOf("aol 5");this.aol6=-1!=a.indexOf("aol 6");this.opera=-1!=a.indexOf("opera");this.opera2=-1!=a.indexOf("opera 2")||-1!=a.indexOf("opera/2");this.opera3=-1!=a.indexOf("opera 3")||-1!=a.indexOf("opera/3");this.opera4=-1!=a.indexOf("opera 4")||-1!=a.indexOf("opera/4");this.opera5=-1!=a.indexOf("opera 5")||-1!=a.indexOf("opera/5");this.opera5up=this.opera&&!this.opera2&&!this.opera3&&!this.opera4;this.ns=-1!=a.indexOf("netscape6/")||-1!=a.indexOf("gecko");this.ns61=-1!=a.indexOf("gecko");
this.firefox=-1!=a.indexOf("firefox");this.safari=-1!=a.indexOf("safari");this.chrome=-1!=a.indexOf("chrome");this.android=-1!=a.indexOf("android");this.webtv=-1!=a.indexOf("webtv");this.AOLTV=this.TVNavigator=-1!=a.indexOf("navio")||-1!=a.indexOf("navio_aoltv");this.hotjava3=(this.hotjava=-1!=a.indexOf("hotjava"))&&3==this.major;this.hotjava3up=this.hotjava&&3<=this.major;if(this.nav2||this.ie3)this.js=1;else if(this.nav3)this.js=1.1;else if(this.opera5up)this.js=1.3;else if(this.opera)this.js=1.1;
else if(this.nav4&&4.05>=this.minor||this.ie4)this.js=1.2;this.js=this.nav4&&4.05<this.minor||this.ie5?1.3:this.hotjava3up?1.4:this.nav6||this.gecko?1.5:this.nav6up?1.5:this.ie5up?1.3:0;this.win=-1!=a.indexOf("win")||-1!=a.indexOf("16bit");this.win95=-1!=a.indexOf("win95")||-1!=a.indexOf("windows 95");this.win16=-1!=a.indexOf("win16")||-1!=a.indexOf("16bit")||-1!=a.indexOf("windows 3.1")||-1!=a.indexOf("windows 16-bit");this.win31=-1!=a.indexOf("windows 3.1")||-1!=a.indexOf("win16")||-1!=a.indexOf("windows 16-bit");
this.win98=-1!=a.indexOf("win98")||-1!=a.indexOf("windows 98");this.winnt=-1!=a.indexOf("winnt")||-1!=a.indexOf("windows nt");this.win32=this.win95||this.winnt||this.win98||4<=this.major&&"Win32"==navigator.platform||-1!=a.indexOf("win32")||-1!=a.indexOf("32bit");this.winme=-1!=a.indexOf("win 9x 4.90");this.win2k=-1!=a.indexOf("windows nt 5.0");this.os2=-1!=a.indexOf("os/2")||-1!=navigator.appVersion.indexOf("OS/2")||-1!=a.indexOf("ibm-webexplorer");(this.mac=-1!=a.indexOf("mac os"))&&this.ie5up&&
(this.js=1.4);this.mac68k=this.mac&&(-1!=a.indexOf("68k")||-1!=a.indexOf("68000"));this.macppc=this.mac&&(-1!=a.indexOf("ppc")||-1!=a.indexOf("powerpc"));this.sun=-1!=a.indexOf("sunos");this.sun4=-1!=a.indexOf("sunos 4");this.sun5=-1!=a.indexOf("sunos 5");this.suni86=this.sun&&-1!=a.indexOf("i86");this.irix=-1!=a.indexOf("irix");this.irix5=-1!=a.indexOf("irix 5");this.irix6=-1!=a.indexOf("irix 6")||-1!=a.indexOf("irix6");this.hpux9=(this.hpux=-1!=a.indexOf("hp-ux"))&&-1!=a.indexOf("09.");this.hpux10=
this.hpux&&-1!=a.indexOf("10.");this.aix=-1!=a.indexOf("aix");this.aix1=-1!=a.indexOf("aix 1");this.aix2=-1!=a.indexOf("aix 2");this.aix3=-1!=a.indexOf("aix 3");this.aix4=-1!=a.indexOf("aix 4");this.linux=-1!=a.indexOf("inux");this.sco=-1!=a.indexOf("sco")||-1!=a.indexOf("unix_sv");this.unixware=-1!=a.indexOf("unix_system_v");this.mpras=-1!=a.indexOf("ncr");this.reliant=-1!=a.indexOf("reliantunix");this.dec=-1!=a.indexOf("dec")||-1!=a.indexOf("osf1")||-1!=a.indexOf("dec_alpha")||-1!=a.indexOf("alphaserver")||
-1!=a.indexOf("ultrix")||-1!=a.indexOf("alphastation");this.sinix=-1!=a.indexOf("sinix");this.freebsd=-1!=a.indexOf("freebsd");this.bsd=-1!=a.indexOf("bsd");this.unix=-1!=a.indexOf("x11")||this.sun||this.irix||this.hpux||this.sco||this.unixware||this.mpras||this.reliant||this.dec||this.sinix||this.aix||this.linux||this.bsd||this.freebsd;this.vms=-1!=a.indexOf("vax")||-1!=a.indexOf("openvms");this.iPhone5Under=(this.iPhone=-1!=a.indexOf("iphone"))&&-1==a.search(/([5-9][0-9]*)|([1-9][0-9]*)(_[0-9]+)*/);
this.iPhone5up=this.iPhone&&!this.iPhone5Under;this.iPad5Under=(this.iPad=-1!=a.indexOf("ipad"))&&-1==a.search(/([5-9][0-9]*)|([1-9][0-9]*)(_[0-9]+)*/);this.iPad5up=this.iPad&&!this.iPad5Under;this.isIE=function(){return this.ie};this.isIE7Under=function(){return this.ie7under};this.isFireFox=function(){return this.firefox};this.isSafari=function(){return this.safari};this.isOpera=function(){return this.opera};this.isNetscape=function(){return this.ns};this.isAndroid=function(){return this.android};
this.isIpad=function(){return this.iPad};this.supportsHTML5=function(){return 0==this.ie||this.ie9orHigher};this.isIpadOrAndroid=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("ipad")||-1!=a.indexOf("android")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Popup=new function(){var a=!1,b=0,d=0,e=null;this.createPopupDiv=function(a,b,d,e,f,g,v,n,t,u,w,y){var h=document.getElementById(a);h||(h=document.createElement("DIV"),h.id=a);v?(h.style.visibility="visible",h.style.display="block"):(h.style.visibility="hidden",h.style.display="none");h.style.position="absolute";if(u=$namespace.DomUtil.getEl(u))h.parentDiv=u;0<=b&&(h.style.left=$namespace.DomUtil.toPixels(b));0<=d&&(h.style.top=$namespace.DomUtil.toPixels(d));0<=e&&(h.style.width=$namespace.DomUtil.toPixels(e));
0<=f&&(h.style.height=$namespace.DomUtil.toPixels(f));h.style.zIndex=g?g:"300";h.className=t||""==t?t:"tal popupDivBig";w||(h.innerHTML="");n&&(h.onmouseover=function(b){$namespace.Popup.setDragEvent(a,b)});h.isPopup=!0;(y=$namespace.DomUtil.getEl(y))||(y=document.getElementById("popupDivContainer"));y&&h.parentNode!=y&&y.appendChild(h);return h};this.getPopupParent=function(a){return(a=$namespace.DomUtil.getEl(a))?a.parentDiv:null};this.getPopupContainer=function(a){if(a=$namespace.$namespace.DomUtil.getEl(a))for(a=
a.parentNode;a;){if("popupDivContainer"==a.id||$namespace.DomUtil.hasClassName(a,"popup-container"))return a;a=a.parentNode}return null};this.setDragEvent=function(e,k,l){if(!a){$namespace.Browser.isIE()&&(k=window.event);var h=document.getElementById(e);l||(l=40);var q=$(h).offset().top,r=k.pageY;b=k.pageX;d=r;d>=q&&d<=q+l?(h.style.cursor="move",document.onmousedown=function(a){f(e,a)},document.onmouseup=function(a){g(e,a,!1)},h.onmouseout=function(a){g(e,a,!0)}):(h.style.cursor="",document.onmousedown=
null,document.onmouseup=null);k.stopPropagation();k.preventDefault()}};var f=function(f,k){var h=document.getElementById(f);if(h){var p=$(h).position(),q=$(h).offset(),r=p.left,v=p.top,n=q.left,t=q.top;$namespace.Browser.isIE()&&(k=window.event);var u=k.pageX,w=k.pageY;e=function(a){a:{var e=a;if($namespace.Browser.isIE())if(e=window.event,1==e.button)a=e.pageX,e=e.pageY,b=a,d=e;else{g(f,e,!1);break a}else a=e.pageX,e=e.pageY,b=a,d=e;a=r+(b-u);e=v+(d-w);var h=n+(b-u),k=t+(d-w);0<h&&document.getElementById(f).offsetWidth+
a<document.getElementById("scrollablePageContent").offsetWidth&&0<k&&document.getElementById(f).offsetHeight+e<document.getElementById("scrollablePageContent").scrollHeight?(document.getElementById(f).style.left=$namespace.DomUtil.toPixels(a),document.getElementById(f).style.top=$namespace.DomUtil.toPixels(e)):0<h&&document.getElementById(f).offsetWidth+a>document.getElementById("scrollablePageContent").offsetWidth&&0<k&&document.getElementById(f).offsetHeight+e<document.getElementById("scrollablePageContent").scrollHeight?
(document.getElementById(f).style.left=$namespace.DomUtil.toPixels(document.getElementById("scrollablePageContent").offsetWidth-document.getElementById(f).offsetWidth),document.getElementById(f).style.top=e):0>h&&0<k&&document.getElementById(f).offsetHeight+e<document.getElementById("scrollablePageContent").scrollHeight&&(document.getElementById(f).style.left=$namespace.DomUtil.toPixels(-(n-r)),document.getElementById(f).style.top=e)}};document.addEventListener("mousemove",e,!0);h.onmouseout=null;
a=!0;h.onmousemove=null;document.onmousedown=null}},g=function(b,d,f){element=document.getElementById(b);f&&a||(document.removeEventListener("mousemove",e,!0),document.onmousedown=null,document.onmouseup=null,a=!1)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ComponentUtil=new function(){this.displaySearchingPopup=function(a){var b=document.getElementById("_searchingPopupDiv");if(!b){b=$namespace.Popup.createPopupDiv("_searchingPopupDiv",0,0,-1,-1,700,!1,!1,"popupDivSmall tac");b.style.padding="25px 10px 10px 10px";var e=document.createElement("DIV");e.className="popupBanner";b.insertBefore(e,null);var f=new Image;f.id="_adImage";f.style.width=$namespace.DomUtil.toPixels(208);f.style.height=$namespace.DomUtil.toPixels(91);f.alt="Banner";f.style.display=
"initial";e.insertBefore(f,null);e=document.createElement("DIV");e.id="_splashScreenTextDiv";e.className="pt45 fs10";e.innerText=a.splashScreenText;e.textContent=a.splashScreenText;b.insertBefore(e,null);e=document.createElement("DIV");e.id="loadingDivContainer";e.className="pt15 pb15";b.insertBefore(e,null)}b&&(e=document.getElementById("_splashScreenTextDiv"),e.innerText=a.splashScreenText,e.textContent=a.splashScreenText,b.style.visibility="visible",b.style.display="initial",b.style.zIndex="700",
$namespace.DomUtil.positionBlockCentrally("_searchingPopupDiv"),$namespace.Browser.ie7under&&$namespace.DomUtil.hideElements(!0,["select"],"_searchingPopupDiv"))};this.hideSearchingPopup=function(){var a=document.getElementById("_searchingPopupDiv");null!=a&&(a.style.visibility="hidden",a.style.display="none",Browser.ie7under&&$namespace.DomUtil.hideElements(!1,["select"],"_searchingPopupDiv"))};this.expandCollaspeDiv=function(a,d,e){d=document.getElementById(d);if(a=document.getElementById(a)){var b=
a.src;b=b.substring(b.lastIndexOf("/")+1);var g=null;if(e)for(var h=0;h<e.length;++h)e[h].substring(e[h].lastIndexOf("/")+1)!=b&&(g=e[h]);a.src=g}d&&("none"==d.style.display?d.style.display="block":d.style.display="none")};this.scrollTopLink=function(a){if(a=$namespace.DomUtil.getEl(a))(a=$namespace.DomUtil.getScrollableContainer(a))?a.scrollTop=0:window.scroll(0,0)};this.loadBackgroundGradations=function(){Browser.isIE7Under()?(document.getElementById("bgShadowLeft").className="bg-shadow-left-ie6",
document.getElementById("bgShadowRight").className="bg-shadow-right-ie6"):(document.getElementById("bgShadowLeft").className="bg-shadow-left",document.getElementById("bgShadowRight").className="bg-shadow-right")};this.showHideTooltip=function(a,d,e){d||(d=window.event);if("mouseout"==d.type||"blur"==d.type)Browser.iPad||Browser.iPhone||$namespace.DomUtil.hideBlock("toolTipPopup");else if($namespace.DomUtil.isBlockVisible("toolTipPopup"))$namespace.DomUtil.hideBlock("toolTipPopup");else{var b=$namespace.DomUtil.getEl(a),
g=$namespace.Popup.getPopupContainer(b),h=$namespace.Popup.createPopupDiv("toolTipPopup",0,0,-1,-1,300,!1,!1,"",null,!1,g);$namespace.Browser.iPad||$namespace.Browser.iPhone?(d=document.createElement("DIV"),d.className="flr p05",h.insertBefore(d,null),a=document.createElement("A"),a.id="_messageBoxClose1",d.insertBefore(a,null),d=ImageCache.closeImage,d.alt="Close Button",a.insertBefore(d,null),d=document.createElement("DIV"),d.innerHTML=$namespace.DomUtil.getEl(e).innerHTML,h.appendChild(d),$namespace.DomUtil.registerListener(a,
"click",function(){$namespace.DomUtil.removeElement("toolTipPopup")})):h.innerHTML=$namespace.DomUtil.getEl(e).innerHTML;$namespace.DomUtil.showBlock("toolTipPopup");$(h).ready(function(){var a=$namespace.DomUtil.getAbsolutePos(b),d=$namespace.DomUtil.getPosRelativeToContainer(b,g);if(a.x+$(h).width()>document.width||"cruiseRatings"==e||"hotelRatings"==e)d.x=d.x+$(b).width()-$(h).width();h.style.left=$namespace.DomUtil.toPixels(d.x);h.style.top=$namespace.DomUtil.toPixels(d.y+20)})}};this.createVerticalExpanderContractor=
function(a){if(arguments.length){var b={toggle:a.toggle,container:a.container,animation:new Animation};b.toggle.expanderContractor=b;b.expanded=2<b.container.offsetHeight?!0:!1;b.img="undefined"==typeof a.image?null:a.image;b.img.sources="undefined"==typeof a.imageSources?null:a.imageSources;b.activate=function(){var a=this.expanderContractor?this.expanderContractor:this;a.expanded?(a.expanded=!1,a.animation.contractVertically(a.container),a.img&&a.img.sources&&(a.img.src=a.img.src.substr(0,a.img.src.lastIndexOf("/")+
1)+a.img.sources.contracted)):(a.expanded=!0,a.animation.expandVertically(a.container),a.img&&a.img.sources&&(a.img.src=a.img.src.substr(0,a.img.src.lastIndexOf("/")+1)+a.img.sources.expanded))};"string"==typeof a.triggerEvent&&(a.triggerEvent.match(/click/i)?b.toggle.onclick=b.activate:a.triggerEvent.match(/mousedown/i)?b.toggle.onmousedown=b.activate:a.triggerEvent.match(/mouseup/i)?b.toggle.onmouseup=b.activate:a.triggerEvent.match(/mouseover/i)&&(b.toggle.onmouseover=b.activate));return b}};this.showHidePackageSummaryComponent=
function(a){var b=$(a);a=b.find("IMG");b=$(b.parent().find("DIV").get(0));var e=a.attr("src");e=e.substr(0,e.lastIndexOf("/")+1);b.css("display").match(/none/i)?(a.attr("src",e+"arrow-black-dwn.gif"),b.css({display:"block",height:"",overflow:""}),a=b.height(),b.css({height:"0px",overflow:"hidden"}),b.animate({height:a+"px"},{complete:function(){}})):(a.attr("src",e+"arrow-black-up.gif"),b.animate({height:"0px",display:"none"},{complete:function(){this.style.display="none"}}))};this.adjustSummaryComponent=
function(a){var b=$(a);a=b.find("IMG");b=$(b.parent().find("DIV").get(0));-1!=a.attr("src").indexOf("arrow-black-dwn.gif")&&(b.css({display:"block",height:"",overflow:""}),a=b.height(),b.css({height:"0px",overflow:"hidden"}),b.animate({height:a+"px"},{complete:function(){}}))};var a=function(a){a=$("DIV[id$='"+a+"']");a.css({display:"block",height:""});a.animate({height:"auto"})};this.showHideComponent=function(b,d,e){b=$(b);var f=b.parent().find("IMG");d=$("DIV[id$='"+d+"']");var g=f.attr("src"),
h="";void 0!=g&&(h=g.substr(g.lastIndexOf("/")+1,g.length),g=g.substr(0,g.lastIndexOf("/")+1));d.css("display").match(/none/i)?("tridown_blue.gif"==h&&f.attr("src",g+"triup_blue.gif"),b.text(b.attr("collapsedtext")),d.css({display:"block",height:""}),b=d.height(),d.css({height:"0px"}),d.animate({height:b+"px"})):("triup_blue.gif"==h&&f.attr("src",g+"tridown_blue.gif"),b.text(b.attr("expandedtext")),d.animate({height:"0px",display:"none"},{complete:function(){this.style.display="none"}}));for(b=0;b<
e.length;b++)a(e[b])};this.executeSafely=function(a){try{if(a)return a()}catch(d){return null}}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.DateUtil=new function(){this.DEFAULT_DATE_FORMAT="MM/dd/yyyy";this.DEFAULT_TIME_FORMAT="hh:mm aa";this.addDaysToDate=function(a,b){var d=null;if(1<arguments.length&&"object"===typeof a&&a instanceof Date&&NaN!=a.getFullYear()&&"number"===typeof b){d=parseInt(864E5*b,10);var e=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);d=new Date(e.getTime()+d)}return d};this.getDateAsString=function(a,b){var e=null;if(a&&!/invalid/i.test(a.toString())&&a.getDate){var f=a.getDate(),g=a.getMonth(),
p=a.getFullYear();NaN!=f&&NaN!=g&&NaN!=p&&(b=1<arguments.length?b:this.DEFAULT_DATE_FORMAT,e=d(b,p,++g,f,a.getHours(),a.getMinutes(),a.getSeconds()))}return e};this.getDayOfWeek=function(a){return $namespace.Config.DAY_NAMES[a.getDay()]};this.getTimeAsString=function(a){var b=null;if(0<=a&&24>=a){b=Math.floor(a);var d=Math.round(a%1*60);a=12<=a?"PM":"AM";0==b&&"AM"==a?b=12:12<b&&"PM"==a&&(b%=12);b=("0"+b).substr(-2)+":"+("0"+d).substr(-2)+" "+a}return b};this.getDateFromString=function(a,b){var d=
null;a=arguments.length?$.trim(a):"";if(a.length){b=1<arguments.length?$.trim(b):this.DEFAULT_DATE_FORMAT;var e=this.isValidDateString(a,b);e&&(d=e.date)}return d};this.getTimeFromString=function(a,b){var d=null;a=arguments.length?$.trim(a):"";if(a.length){b=1<arguments.length?$.trim(b):this.DEFAULT_TIME_FORMAT;var e=this.isValidTimeString(a,b);e&&(d=e.time)}return d};this.getDateDaysFromToday=function(a){var b=new Date;b.setHours(0,0,0,0);return this.addDaysToDate(b,a)};this.getDifferenceInDays=
function(a,b){var d=0;a&&!/invalid/i.test(a.toString())&&a.getDate&&b&&!/invalid/i.test(b.toString())&&b.getDate&&(a=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0),b=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0),NaN!=a&&NaN!=b&&(d=parseInt((b-a)/864E5,10)));return d};this.reformatDateString=function(a,b,e){var f=null;if(1==arguments.length&&"object"===typeof arguments[0]){var g=arguments[0];a="string"===typeof g.dateString?$.trim(g.dateString):"";b="string"===
typeof g.inputFormat?$.trim(g.inputFormat):this.DEFAULT_DATE_FORMAT;e="string"===typeof g.outputFormat?$.trim(g.outputFormat):this.DEFAULT_DATE_FORMAT}else 1<arguments.length&&"string"===typeof arguments[0]&&(a=$.trim(a),b=$.trim(b),e=2<arguments.length?$.trim(e):this.DEFAULT_DATE_FORMAT);a.length&&b.length&&e.length&&(g=this.isValidDateString(a,b))&&(f=d(e,g.year,g.month,g.day,g.hours,g.minutes,g.seconds));return f};this.isValidDateString=function(a,b){var d=!1;a=arguments.length?$.trim(a):"";if(a.length&&
(b=1<arguments.length?$.trim(b):this.DEFAULT_DATE_FORMAT,b.length)){var f=a.match(/\d+/g),g=a.replace(/[^0-9]/g," : ").split(":"),p=b.match(/[d]+|[H]+|[M]+|[m]+|[s]+|[y]+/g);if(f&&f.length&&p&&p.length&&g.length<=p.length){for(var q=g=null,r=null,v=null,n=null,t=null,u=!1,w=!1,y=!1,z=!1,x=0;x<p.length;x++)if(x<f.length){var B=e(f[x]);B=B.length?parseInt(B,10):null;switch(p[x][0]){case "d":r=B;break;case "H":v=B;w=!0;break;case "M":q=B;break;case "m":n=B;y=!0;break;case "s":t=B;z=!0;break;case "y":g=
B,u=!0}}f=new Date;f.setHours(0,0,0,0);f=f.getFullYear();if(null===g)g=u?null:f;else if(0<g&&100>g)g+=g>f-1995?1900:2E3;else if(1920>g||2099<g)g=null;q=1>q||12<q?null:q;r=1>r||31<r?null:r;if(null===v||0>v||23<v)v=w?null:0;if(null===n||0>n||59<n)n=y?null:0;if(null===t||0>t||59<t)t=z?null:0;null!==g&&null!==q&&null!==r&&null!==v&&null!==n&&null!==t&&(u=new Date(g,q-1,r,0,0,0,0),w=new Date(g,q-1,1,0,0,0,0),u&&w&&!/invalid/i.test(u.toString()+w.toString())&&w.getFullYear()==u.getFullYear()&&w.getMonth()==
u.getMonth()&&(f=new Date,f.setHours(0,0,0,0),f=f.getTime(),d=f+864E5,w=u.getTime(),d={date:u,year:g,month:q,day:r,hours:v,minutes:n,seconds:t,isPastDate:w<f,isTodayDate:w==f,isFutureDate:w>=d},d.date.setHours(d.hours,d.minutes,d.seconds,0)))}}return d};this.isValidTimeString=function(a,b){var d=!1;a=arguments.length?$.trim(a):"";if(a.length&&(b=1<arguments.length?$.trim(b):this.DEFAULT_TIME_FORMAT,b.length)){var f=a.match(/\d+/g),g=a.replace(/[^0-9AMP]/g," : ").split(":"),p=b.match(/[a]+|[H]+|[h]+|[m]+/g);
if(f.length&&p.length&&g.length<=p.length){for(var q=g=null,r=!1,v=!1,n=/[ap]/i.test(a)?/a/i.test(a)?"AM":"PM":"AM",t=0;t<p.length;t++)if(t<f.length){var u=e(f[t]);u=u.length?parseInt(u,10):null;switch(p[t][0]){case "H":g=u;v=!0;break;case "h":g=u;break;case "m":q=u,r=!0}}if(null===g||g<(v?0:1)||g>(v?23:12))g=null;if(null===q||0>q||59<q)q=r?null:0;null!==g&&null!==q&&(v?d=g+q/60:12==g?d=("AM"==n?0:g)+q/60:(g+="AM"==n?0:12,d=g+q/60),d={time:d,hours:g,minutes:q})}}return d};var a=/\b\d{1,2}\b/,b=/\b\d{4}\b/;
this.enhanceDateStringReadability=function(d){var e=arguments.length?$.trim(d):"";if(e.length){var f=e.match(a);f&&1==f.length&&(f=parseInt(f[0])-1,-1<f&&f<$namespace.Config.DAY_OF_MONTH_NAMES.length&&(e=e.replace(a,$namespace.Config.DAY_OF_MONTH_NAMES[f])));(f=e.match(b))&&1==f.length&&(f=parseInt(f[0])-1999,-1<f&&f<$namespace.Config.YEAR_NAMES.length&&(e=e.replace(b,$namespace.Config.YEAR_NAMES[f])))}return e};this.getDefaultDateFormat=function(){return this.DEFAULT_DATE_FORMAT};this.getLocaleDateFormat=
function(){return $namespace.GlobalConstants.LOCALE_DATE_FORMAT.toLowerCase()};var d=function(a,b,d,k){var f=null;if(3<arguments.length&&"string"==typeof a&&b&&d&&k&&("number"!==typeof b&&(b=e(b),b=0==b.length?0:parseInt(b,10)),0<b)){if(100>b)b+=2E3;else if(1900>b||2100<b)b=2E3+b%100;var g=b;b=b.toString();if(4==b.length&&("number"!==typeof d&&(d=e(d),d=0==d.length?0:parseInt(d,10)),0<d&&13>d)){var h=d-1;var r=$namespace.Config.MONTH_NAMES[h];d=d.toString();1==d.length&&(d="0"+d);k=e(k);if(0<k.length){var v=
parseInt(k);if(0<v&&32>v){var n=4<arguments.length?+arguments[4]:0,t=5<arguments.length?+arguments[5]:0,u=6<arguments.length?+arguments[6]:0;v=new Date(g,h,v,0>n||23<n?0:n,0>t||59<t?0:t,0>u||59<u?0:u,0);g=new Date(g,h,1,0,0,0,0);if(v.getMonth()==g.getMonth()&&(g=$namespace.DateUtil.getDayOfWeek(v),1==k.length&&(k="0"+k),4==b.length&&2==d.length&&2==k.length)){h=a.match(/[{][^}]+[}]/g);f=a.replace(/[{][^}]+[}]/g,"#::#");f=f.replace(/y{3,}/gi,b).replace(/yy/gi,b.substr(2));f=f.replace(/M{4,}/g,"#:##:#").replace(/MMM/g,
"#:#:#");f=f.replace(/MM/gi,d).replace(/M/g,/^0/.test(d)?d.substr(1):d);f=f.replace(/(d{4,}|E{4,})/g,"#:~~:#").replace(/(ddd|EEE)/g,"#:~:#");f=f.replace(/dd/g,k).replace(/d/g,/^0/.test(k)?k.substr(1):k);/[Hh]/.test(a)&&(n=v.getHours(),t=0==n?12:12<n?n-12:n,n=("0"+n).substr(-2),t=("0"+t).substr(-2),f=f.replace(/H{2,}/g,n).replace(/H/g,/^0/.test(n)?n.substr(1):n),f=f.replace(/h{2,}/g,t).replace(/h/g,/^0/.test(t)?t.substr(1):t));/m/.test(a)&&(n=("0"+v.getMinutes()).substr(-2),f=f.replace(/m{2,}/g,n).replace(/m/g,
/^0/.test(n)?n.substr(1):n));/s/.test(a)&&(n=("0"+v.getSeconds()).substr(-2),f=f.replace(/s{2,}/g,n).replace(/s/g,/^0/.test(n)?n.substr(1):n));/a/.test(a)&&(v=12>v.getHours()?"AM":"PM",f=f.replace(/a{2,}/g,v).replace(/a/g,v.substr(0,1)));if(h)for(v=0;v<h.length;v++)f=f.replace(/#::#/,h[v].replace(/[{}]/g,""));f=f.replace(/#:##:#/g,r).replace(/#:#:#/g,r.substr(0,3));f=f.replace(/#:~~:#/g,g).replace(/#:~:#/g,g.substr(0,3))}}}}}return f},e=function(a){return(arguments.length?$.trim(a):"").replace(/[^0-9]/g,
"").replace(/^0+(0|[1-9]\d*)$/,"$1")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.DomainUtil=new function(){var a=!1,b=null,d=function(d){var e=document.getElementById("domainContentDiv");e&&!e.contains(d.target)&&$('UL[id="domainList"]').hide(0,function(){a&&($("#selectedDomainFlag").focus(),a=!1);b&&b.destroyPopupEventHandlers()})};this.gotoDomain=function(a){window.location.href=$(a).children("a").attr("href")};this.initDomainSelection=function(){var d=$('UL[id="domainList"]');b=new $namespace.TabHandler(d,function(){d.hide(0,function(){a&&($("#selectedDomainFlag").focus(),
a=!1)})});$('DIV[id="domainContentDiv"]').click(function(){b.setPopupKeydownHandler();d.toggle(0,b.setPopupInitialFocus());d.is(":visible")&&(a=!0)});$('UL[id="domainList"]').find("LI").each(function(){this.onclick=function(){$namespace.DomainUtil.gotoDomain(this)}});this.bindEvents()};this.bindEvents=function(){$(document).on({mousedown:d,keydown:d})};this.unbindEvents=function(){$(document).off({mousedown:d,keydown:d})}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		_.templateSettings={evaluate:/%\[(.+?)\]/g,interpolate:/%{=([\s\S]+?)}/g,escape:/%{-([\s\S]+?)}/g};$namespace.getTemplate=function(a){var b=$('[id="'+a+'"]'),d=b.html();if(0===b.length)throw"Cannot find template with id "+a;return _.template(d)};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HistoryNavigation=new function(){var a=null;this.getCityCode=function(){return a};this.setCityCode=function(b){a=b};var b=function(a,b){a=""+a;if(b)for(var d=0;d<b.length;d++)"undefined"!=typeof b[d]&&null!=b[d]&&(a+="_",a+=b[d]);return a},d=function(a){return(a=$namespace.PageHistoryConstants.PAGE_HISTORY[a])&&a.requiresSession};this.replaceHistory=function(a,f){f=b(a,f);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.replace(f,!1,{sessionTimestamp:a})};this.addHistory=
function(a,f){f=b(a,f);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.push(f,!1,{sessionTimestamp:a})};this.addHistoryUsingHash=function(a,f){f=b(a,f);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.push(f,!0,{sessionTimestamp:a})};this.addHistoryWithData=function(a,f,g){g=b(a,g);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.push(g,!1,{sessionTimestamp:a,historyData:f})};this.replaceHistoryWithData=function(a,
f,g){g=b(a,g);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.replace(g,!1,{sessionTimestamp:a,historyData:f})};this.addHistoryWithDataUsingHash=function(a,f,g){g=b(a,g);a=d(a)?$namespace.PageHistory.getSessionTimestamp():0;$namespace.PageHistory.push(g,!0,{sessionTimestamp:a,historyData:f})};this.getHistoryData=function(){var a=$namespace.PageHistory.getHistoryItem();return null!=a?a.historyData:null};this.historyChange=function(a,b,d){d=null;a&&(d=a.split("_"));if(d){a=
parseInt(d[0]);var e=b?b.sessionTimestamp:null;e&&e<$namespace.PageHistory.getSessionTimestamp()?$namespace.PageHistory.clearStorage(!0):$namespace.PageNavigationHandlers.historyChangeHandler(a,b&&b.historyData?b.historyData:null,d)}else window.location.href=window.location.href.replace(/#$/,"")};this.onPageRefresh=function(a,b){0<=a?$namespace.PageNavigationHandlers.pageRefreshHandler(a,b):$namespace.PageHistory.pushEmpty()};this.navigateToLocationCode=function(a){a=$namespace.PageHistory.getIndexOfLocationCode(a);
0>a&&window.history.go(a)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ImageUtil=new function(){this.TranslationTexts={NO_IMAGE_AVAILABLE: "No Image<br />Available"};var TranslationTexts = this.TranslationTexts;
;var a=$namespace.Utils||{};this.imageLoadCallbacks=[];this.missingCarImage=new Image;this.missingCarImage.src=$namespace.Configuration.sharedLoc+"/images/car_image_not_available.png";this.defaultImage=new Image;this.defaultImage.src=$namespace.Configuration.sharedLoc+"/images/no_image_available.png";
this.getMissingLabelObject=function(){return $($("#missingImageTemplate").html()).attr("id","missingImageLabel"+ ++window.missingImageCount)};this.createMissingImageLabel=function(b,d){var e=1==b.parent().length?b.parent():null;d=b.attr("errorText");b.attr("errorTrackingText");if(e&&1!=e.attr("hasMissingImageLabel")){e.attr("hasMissingImageLabel",1);var f=b.next();"BR"==f.prop("tagName")&&e.remove(f);e=window.getComputedStyle(e[0]);e=b.parent()[0].clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight);
f=a.Breakpoint.isMobile()?.5*e:.75*e;e=this.getMissingLabelObject().attr({name:"missingImage",width:e,height:f});e.find("td.noImageAvailable").html(null==d||0==d.length?$namespace.ImageUtil.TranslationTexts.NO_IMAGE_AVAILABLE:d);e.insertBefore(b)}b.hide();b.removeClass()};this.getSizeForImage=function(a){var b={height:a.height(),width:a.width()},e=a.css("height").replace(/[^0-9]/g,""),f=a.css("width").replace(/[^0-9]/g,"");e=e.length?e:a.attr("height").replace(/[^0-9]/g,"");f=f.length?f:a.attr("width").replace(/[^0-9]/g,
"");e.length&&(b.height=parseInt(e));f.length&&(b.width=parseInt(f));return b};this.initImage=function(a){if(0<arguments.length){a=$(a);var b=a.attr("src")||"";if(!(a.parents("#locations_map").length||a.parents("template").length&&(-1<b.indexOf("{")||-1<b.indexOf("}")))&&a&&1==a.length&&null==a.attr("initialized"))if(/slideshow/i.test(a.attr("id")))a.attr("initialized",1);else{a.attr("initialized",0).attr("altSrcAttempted",0);a.load(function(a){return function(){$namespace.ImageUtil.showImageAndRemoveMissingImageLabels(a)}}(a));
var e=function(a){return function(){"image_gallery"==a.parent().attr("data-modal-gallery")&&(a.parent().hide(),a.appendTo(a.parent().parent()));if(1==a.attr("initialized")){var b=unescape(a.attr("src"));if(-1==b.indexOf("/core/")){var d=$namespace.ImageUtil.getSizeForImage(a);if("true"==a.attr("hideIfMissing"))a.hide(),a.removeClass();else{var e=a.attr("altSrc"),f=1==a.attr("altSrcAttempted"),p=1==a.attr("carImage"),q=1==a.attr("defaultImage"),r=1==a.attr("defaultTable");if(null==e||f){if(p?a.attr("src",
$namespace.ImageUtil.missingCarImage.src):q?a.attr("src",$namespace.ImageUtil.defaultImage.src):r&&$namespace.ImageUtil.createMissingImageLabel(a,d),d=a.attr("errorTrackingText"),null!=d&&d.length)try{$namespace.Analytics.trackEvent("missingImage",d.replace(/\s+/g,"+"),b.replace(/\s+/g,"+"),0)}catch(v){}}else a.attr("altSrcAttempted",1),$namespace.ImageUtil.setImageLoadCallback(a,e)}}}}}(a);a.error(e);a.attr("initialized",1);null==b||""==b?e():(a.show(),$namespace.ImageUtil.setImageLoadCallback(a,
b))}}};this.initImages=function(){"undefined"==typeof window.missingImageCount&&(window.missingImageCount=0);$(document).find("IMG").each(function(){$namespace.ImageUtil.initImage(this)})};this.reloadMissingImages=function(a){a=a.find("img");a.show().removeAttr("initialized").removeAttr("altSrcAttempted");$namespace.ImageUtil.showImageAndRemoveMissingImageLabels(a);$namespace.ImageUtil.initImages()};this.setImageLoadCallback=function(a,d){var b=function(){window.clearTimeout(this.tmr);a.attr("src",
d);$namespace.ImageUtil.imageLoadCallbacks[this.index]=null};b.index=$namespace.ImageUtil.imageLoadCallbacks.length;b.tmr=window.setTimeout(b,100);$namespace.ImageUtil.imageLoadCallbacks[b.index]=b};this.showImageAndRemoveMissingImageLabels=function(a){a.show();a.parent().removeAttr("hasMissingImageLabel");a=a.parent().children('TABLE[name="missingImage"]');0<a.length&&a.parent().get(0).removeChild(a.get(0))};$(window).load(function(){$namespace.ImageUtil.initImages();$namespace.AsynchronousConnectionUtil.addCallbackEventHandler("ImageUtil.initImages",
function(){setTimeout(function(){$namespace.ImageUtil.initImages()},1)})})};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.LocaleUtil=new function(){this.getLanguageFromLocaleCode=function(a){switch(a.toLowerCase()){case "en_ca":return"English (Canada)";case "en_us":return"English (United States)";case "fr_ca":return"French (Canada)"}return null}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MessageUtil=new function(){this.TranslationTexts={MESSAGE_TITLE_GENERAL: "Notification",MESSAGE_TITLE_ERROR: "Error",MESSAGE_TITLE_WARNING: "Warning",MESSAGE_TITLE_CONFIRM: "Confirmation",BUTTON_TITLE_CONFIRM: "Confirm",BUTTON_TITLE_CANCEL: "Cancel",BUTTON_TITLE_I_UNDERSTAND: "I Understand",BUTTON_CLOSE: "Close"};var TranslationTexts = this.TranslationTexts;
;var a=[];this.prefixError=function(a){return a.length?this.TranslationTexts.MESSAGE_TITLE_ERROR+": "+a:""};this.showGeneralMessage=function(a,f){a.title=a.title||TranslationTexts.MESSAGE_TITLE_GENERAL;a.callback=
a.callback||null;var e=$namespace.Utils.getTemplate($.hook("message_template_general"));e.addClass("message-box").addClass("general-box");var h="object"==typeof a.text&&a.text.text?a.text:a;h=b(d(h));$.hook("simple_message_title",e).html(a.title);$.hook("simple_message_text",e).html(h);a=new $namespace.Widgets.Modal(e,a.callback);f&&a.setItemToFocus(f);a.show()};this.showConfirmationMessage=function(a,b,d,h){this.showConfirmationMessageWithCancelHandler(a,b,null,d,h)};this.showConfirmationMessageWithCancelHandler=
function(a,f,g,h,k){a.title=a.title||TranslationTexts.MESSAGE_TITLE_CONFIRM;var e=$namespace.Utils.getTemplate($.hook("message_template_confirm"));e.addClass("message-box").addClass("confirm-box");var p=b(d(a));h=h||TranslationTexts.BUTTON_TITLE_CONFIRM;k=k||TranslationTexts.BUTTON_TITLE_CANCEL;$.hook("simple_message_title",e).html(a.title);$.hook("simple_message_text",e).html(b(p));e.find('BUTTON[data-id="cancel_button"]').html(k);e.find('BUTTON[data-id="confirm_button"]').html(h);(new $namespace.Widgets.Confirm(e,
f,g)).show()};this.showSessionWarningMessage=function(a,b,d){a.title=a.title||TranslationTexts.MESSAGE_TITLE_CONFIRM;var e=$namespace.Utils.getTemplate($.hook("message_template_confirm"));e.addClass("message-box").addClass("confirm-box").addClass("session-box");var f=a.button||"Confirm";$.hook("simple_message_title",e).html(a.title);$.hook("simple_message_text",e).html(a.text);e.find('BUTTON[data-confirm="true"]').text(f);e.find('BUTTON[data-id="cancel_button"]').hide();e.find('BUTTON[data-id="close_coupon_override"]').hide();
var g=new $namespace.Widgets.Confirm(e,b);d&&g.disableEscapeEventHandler();g.show();setTimeout(function(){g.el.find('[data-confirm="true"]').focus()},0)};this.showAcknowledgementsMessage=function(a,f,g,h){var e=$namespace.Utils.getTemplate($.hook("message_template_acknowledgements"));e.addClass("message-box").addClass("confirm-box");var l=b(d(a));g=g||TranslationTexts.BUTTON_TITLE_I_UNDERSTAND;h=h||TranslationTexts.BUTTON_TITLE_CANCEL;$.hook("simple_message_title",e).html(a.title);$.hook("simple_message_header",
e).html(a.header);$.hook("simple_message_text",e).html(b(l));e.find('BUTTON[data-id="cancel_button"]').html(h);e.find('BUTTON[data-id="i_understand_button"]').html(g);e.css({"max-width":"800px",margin:"0 auto"});(new $namespace.Widgets.Confirm(e,f)).show()};this.showActionErrorMessage=function(a,f){var e=$namespace.Utils.getTemplate($.hook("message_template_action_error"));e.addClass("message-box").addClass("confirm-box").addClass("session-box");a=b(d(a));var h=TranslationTexts.BUTTON_CLOSE;$.hook("action_error_title",
e).html(TranslationTexts.MESSAGE_TITLE_ERROR);$.hook("action_error_text",e).html(b(a));e.find('BUTTON[data-id="close_button"]').html(h);e.css({"max-width":"750px",margin:"0 auto"});(new $namespace.Widgets.Confirm(e,null,f)).show()};this.updateSessionWarningMessage=function(a,b){a.title=a.title||TranslationTexts.MESSAGE_TITLE_CONFIRM;$(".message-box h2").html(a.title);$(".message-box font").html(a.text);$(".message-box BUTTON#confirm-btn").html(a.button);$(".message-box BUTTON#confirm-btn").off("click");
$(".message-box BUTTON#confirm-btn").on("click",b)};this.showMessage=function(a){a=a||{};a.buttons=a.buttons||[];a.text=a.text||"";a.title=a.title||"";a.type=a.type||0;if(""==a.title){var d="";switch(a.type){case 0:d=TranslationTexts.MESSAGE_TITLE_GENERAL;break;case 1:d=TranslationTexts.MESSAGE_TITLE_ERROR;break;case 2:d=TranslationTexts.MESSAGE_TITLE_WARNING;break;case 4:d=TranslationTexts.MESSAGE_TITLE_CONFIRM}a.title=d}var e=b(a.text);if(4==a.type){var h=TranslationTexts.BUTTON_TITLE_CANCEL,k=
TranslationTexts.BUTTON_TITLE_CONFIRM;a.buttons&&a.buttons.length&&(h=a.buttons[0],1<a.buttons.length&&(k=a.buttons[1]));d=$namespace.Utils.getTemplate($.hook("message_template_confirm"));d.find("DIV.modal-title").find("H2").html(a.title);d.find("DIV.modal-body").find("FONT").html(e);d.find('BUTTON[data-id="cancel_button"]').html(h);d.find('BUTTON[data-id="confirm_button"]').html(k);d=new $namespace.Widgets.Confirm(d);a.itemToFocus&&d.setItemToFocus(a.itemToFocus);d.show()}else d=$namespace.Utils.getTemplate($.hook("message_template_general")),
e=b(a.text),$.hook("simple_message_title",d).html(a.title),$.hook("simple_message_text",d).html(e),d=new $namespace.Widgets.Modal(d,a.closeHandler),a.itemToFocus&&d.setItemToFocus(a.itemToFocus),d.show()};this.showNoShareableResultMessage=function(a,b){var d=$namespace.Utils.getTemplate("message_template_confirm");d.addClass("message-box");d.find("DIV.modal-title").find("H2").html(a.title);d.find("DIV.modal-body").find("FONT").html(a.text);d.find('BUTTON[data-id="cancel_button"]').hide();d.find('BUTTON[data-id="confirm_button"]').hide();
a=new $namespace.Widgets.Confirm(d);a.disableEscapeEventHandler();b=$namespace.Utils.isFunction(b)?b:function(){};a.el.on("click",'[data-id="close_coupon_override"]',$.proxy(function(){b()},a));a.show()};this.formatErrorMessageForAnalytics=function(a){var b="";a=a.replace("|","/");for(var d=0;d<a.length;d++)b=-1!="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz/0123456789/,".indexOf(a.charAt(d),0)?b+a.charAt(d):b+"_";return b};var b=function(a){null!=a&&(a=a.replace(/\\n/g,"<br/>"));return a},
d=function(a){return void 0==a.text?a.translatedText:a.text};this.hasError=function(a){return a.message&&0==a.messageType?!0:!1};this.hasWarning=function(a){return a.message&&1==a.messageType?!0:!1};this.hasInfo=function(a){return a.message&&(0!=a.messageType&&1!=a.messageType||!a.messageCode)?!0:!1};this.hasMessage=function(a){return $namespace.MessageUtil.hasError(a)||$namespace.MessageUtil.hasWarning(a)||$namespace.MessageUtil.hasInfo(a)?!0:!1};this.trackErrorsForAnalytics=function(a){var b=null,
d=$namespace;d.AsynchronousConnectionUtil.isCallbackEvent()?b=this.messages:!d.AsynchronousConnectionUtil.isAjaxRequest()&&a&&(b=[],b.push(a));if(b&&0<b.length){a="";for(var e=!1,k=0;k<b.length;k++)if(b[k].type==d.ErrorTypes.ERROR_TYPE_ERROR){e=!0;break}if(e){for(k=0;k<b.length;k++)b[k].code&&"0"!=b[k].code&&(a+=(""!=a?",":"")+b[k].code),b[k].attributes&&b[k].attributes.vendorName&&(a+=(""!=a?",":"")+b[k].attributes.vendorName+","+b[k].attributes.vendorCode),b[k].attributes&&b[k].attributes.vendorMessage&&
(a+=(""!=a?",":"")+d.MessageUtil.formatErrorMessageForAnalytics(b[k].attributes.vendorMessage)),b[k].attributes&&b[k].attributes.analyticsMessage&&b[k].attributes.analyticsMessage!=b[k].attributes.vendorMessage?a+=(""!=a?",":"")+d.MessageUtil.formatErrorMessageForAnalytics(b[k].attributes.analyticsMessage):!b[k].message||b[k].attributes&&b[k].message==b[k].attributes.vendorMessage||(a+=(""!=a?",":"")+d.MessageUtil.formatErrorMessageForAnalytics(b[k].message));d.Analytics.trackPageView("/er/errorCode/"+
a)}}};this.setSessionValue=function(a,b){a&&b&&window.sessionStorage&&!$namespace.Validation.isBlankOrNull(b)&&window.sessionStorage.setItem(a,b)};this.getSessionValue=function(a){var b=null,d=1<arguments.length?arguments[1]:!1;a&&(b=window.sessionStorage.getItem(a),d&&window.sessionStorage.removeItem(a));return b};this.clearErrorElements=function(){if(a)for(;0<a.length;){var b=a.pop();if(b){var d=b.errorElementName;d&&(d=document.getElementById(d))&&(d.style.border=b.borderStyle)}}}};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Modules=new function(){var a=[];this.activate=function(b,d){d=d||{};this.removeUnusedModule(b);a.push(b);b.initialize(d)};this.removeUnusedModule=function(b){for(var d=[],e=0;e<a.length;e++)b!=a[e]&&a[e]&&a[e].isActive()?a[e]&&a[e].isActive()&&d.push(a[e]):this.deactivate(a[e]);a=d};this.addView=function(a,d,e){e=e||{};d=new d(e);a.views=a.views||[];a.views.push(d);return d};this.closeViews=function(a){if(a&&a.views){for(var b=0;b<a.views.length;b++)a.views[b].close();a.views=[]}};this.deactivate=
function(a){a&&a.close()};this.getActiveModuleByName=function(b){for(var d=null,e=0;e<a.length;e++)a[e].name==b&&(d=a[e]);return d};this.activateSharedModule=function(a,d){this.getActiveModuleByName(a.name)?this.removeUnusedModule():this.activate(a,d)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.moment=b()})(this,function(){function a(){return Sb.apply(null,arguments)}function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var d=[],e;for(e=0;e<a.length;++e)d.push(b(a[e],e));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function g(a,b){for(var d in b)f(b,d)&&(a[d]=b[d]);f(b,"toString")&&(a.toString=b.toString);f(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function h(a,b,d,e){return pb(a,b,d,e,!0).utc()}function k(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1});return a._pf}function l(a){if(null==a._isValid){var b=k(a);a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&
!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function p(a){var b=h(NaN);null!=a?g(k(b),a):k(b).userInvalidated=!0;return b}function q(a){return void 0===a}function r(a,b){var d;q(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);q(b._i)||(a._i=b._i);q(b._f)||(a._f=b._f);q(b._l)||(a._l=b._l);q(b._strict)||(a._strict=b._strict);q(b._tzm)||(a._tzm=
b._tzm);q(b._isUTC)||(a._isUTC=b._isUTC);q(b._offset)||(a._offset=b._offset);q(b._pf)||(a._pf=k(b));q(b._locale)||(a._locale=b._locale);if(0<qb.length)for(d in qb){var e=qb[d];var f=b[e];q(f)||(a[e]=f)}return a}function v(b){r(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===rb&&(rb=!0,a.updateOffset(this),rb=!1)}function n(a){return a instanceof v||null!=a&&null!=a._isAMomentObject}function t(a){return 0>a?Math.ceil(a):Math.floor(a)}function u(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=t(a));
return b}function w(a,b,d){var e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0,n;for(n=0;n<e;n++)(d&&a[n]!==b[n]||!d&&u(a[n])!==u(b[n]))&&g++;return g+f}function y(){}function z(a){return a?a.toLowerCase().replace("_","-"):a}function x(a){var b=null;if(!Wa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=Ja._abbr,require("./locale/"+a),B(b)}catch(Ac){}return Wa[a]}function B(a,b){a&&(a=q(b)?H(a):G(a,b))&&(Ja=a);return Ja._abbr}function G(a,b){if(null!==b)return b.abbr=
a,Wa[a]=Wa[a]||new y,Wa[a].set(b),B(a),Wa[a];delete Wa[a];return null}function H(a){var d;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return Ja;if(!b(a)){if(d=x(a))return d;a=[a]}a:{d=0;for(var e,f,g,n;d<a.length;){n=z(a[d]).split("-");e=n.length;for(f=(f=z(a[d+1]))?f.split("-"):null;0<e;){if(g=x(n.slice(0,e).join("-"))){a=g;break a}if(f&&f.length>=e&&w(n,f,!0)>=e-1)break;e--}d++}a=null}return a}function K(a,b){var d=a.toLowerCase();Xa[d]=Xa[d+"s"]=Xa[b]=a}function F(a){return"string"===
typeof a?Xa[a]||Xa[a.toLowerCase()]:void 0}function D(a){var b={},d,e;for(e in a)f(a,e)&&(d=F(e))&&(b[d]=a[e]);return b}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function C(b,d){return function(e){if(null!=e){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](e);a.updateOffset(this,d);return this}return J(this,b)}}function J(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function E(a,b){var d;if("object"===typeof a)for(d in a)this.set(d,
a[d]);else if(a=F(a),A(this[a]))return this[a](b);return this}function N(a,b,d){var e=""+Math.abs(a);return(0<=a?d?"+":"":"-")+Math.pow(10,Math.max(0,b-e.length)).toString().substr(1)+e}function I(a,b,d,e){var f=e;"string"===typeof e&&(f=function(){return this[e]()});a&&(Ha[a]=f);b&&(Ha[b[0]]=function(){return N(f.apply(this,arguments),b[1],b[2])});d&&(Ha[d]=function(){return this.localeData().ordinal(f.apply(this,arguments),a)})}function Y(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,
"")}function da(a){var b=a.match(hb),d;var e=0;for(d=b.length;e<d;e++)b[e]=Ha[b[e]]?Ha[b[e]]:Y(b[e]);return function(f){var g="";for(e=0;e<d;e++)g+=b[e]instanceof Function?b[e].call(f,a):b[e];return g}}function V(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ka(b,a.localeData());Ya[b]=Ya[b]||da(b);return Ya[b](a)}function ka(a,b){function d(a){return b.longDateFormat(a)||a}var e=5;for(db.lastIndex=0;0<=e&&db.test(a);)a=a.replace(db,d),db.lastIndex=0,--e;return a}function M(a,b,d){Gb[a]=
A(b)?b:function(a,e){return a&&d?d:b}}function P(a,b){return f(Gb,a)?Gb[a](b._strict,b._locale):new RegExp(ba(a))}function ba(a){return oa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,d,e,f){return b||d||e||f}))}function oa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function L(a,b){var d,e=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(e=function(a,d){d[b]=u(a)});for(d=0;d<a.length;d++)Hb[a[d]]=e}function aa(a,b){L(a,function(a,d,e,f){e._w=e._w||{};
b(a,e._w,e,f)})}function S(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function Z(a,b){if(!a.isValid()||"string"===typeof b&&(b=a.localeData().monthsParse(b),"number"!==typeof b))return a;var d=Math.min(a.date(),S(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,d);return a}function ea(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):J(this,"Month")}function ca(){function a(a,b){return b.length-a.length}var b=[],d=[],e=[],f;for(f=0;12>f;f++){var g=h([2E3,f]);b.push(this.monthsShort(g,
""));d.push(this.months(g,""));e.push(this.months(g,""));e.push(this.monthsShort(g,""))}b.sort(a);d.sort(a);e.sort(a);for(f=0;12>f;f++)b[f]=oa(b[f]),d[f]=oa(d[f]),e[f]=oa(e[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")$","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")$","i")}function W(a){var b;(b=a._a)&&-2===k(a).overflow&&(b=0>b[kb]||11<b[kb]?kb:1>b[ib]||b[ib]>S(b[eb],b[kb])?ib:0>b[Ka]||24<
b[Ka]||24===b[Ka]&&(0!==b[fb]||0!==b[lb]||0!==b[ub])?Ka:0>b[fb]||59<b[fb]?fb:0>b[lb]||59<b[lb]?lb:0>b[ub]||999<b[ub]?ub:-1,k(a)._overflowDayOfYear&&(b<eb||b>ib)&&(b=ib),k(a)._overflowWeeks&&-1===b&&(b=Tb),k(a)._overflowWeekday&&-1===b&&(b=Ub),k(a).overflow=b);return a}function ra(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var d=!0;return g(function(){d&&(ra(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+
"\n"+Error().stack),d=!1);return b.apply(this,arguments)},b)}function R(a){var b;var d=a._i;var e=Vb.exec(d)||Wb.exec(d);if(e){k(a).iso=!0;d=0;for(b=Ab.length;d<b;d++)if(Ab[d][1].exec(e[1])){var f=Ab[d][0];var g=!1!==Ab[d][2];break}if(null==f)a._isValid=!1;else{if(e[3]){d=0;for(b=Ib.length;d<b;d++)if(Ib[d][1].exec(e[3])){var n=(e[2]||" ")+Ib[d][0];break}if(null==n){a._isValid=!1;return}}if(g||null==n){if(e[4])if(Xb.exec(e[4]))var h="Z";else{a._isValid=!1;return}a._f=f+(n||"")+(h||"");Sa(a)}else a._isValid=
!1}}else a._isValid=!1}function T(b){var d=Yb.exec(b._i);null!==d?b._d=new Date(+d[1]):(R(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function X(a,b,d,e,f,g,n){b=new Date(a,b,d,e,f,g,n);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function O(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function U(a){return 0===a%4&&0!==a%100||0===a%400}function za(a,b,d){d=7+b-d;return-((7+O(a,
0,d).getUTCDay()-b)%7)+d-1}function wa(a,b,d,e,f){d=(7+d-e)%7;e=za(a,e,f);e=1+7*(b-1)+d+e;0>=e?(b=a-1,a=(U(b)?366:365)+e):e>(U(a)?366:365)?(b=a+1,a=e-(U(a)?366:365)):(b=a,a=e);return{year:b,dayOfYear:a}}function ha(a,b,d){var e=za(a.year(),b,d);e=Math.floor((a.dayOfYear()-e-1)/7)+1;1>e?(a=a.year()-1,b=e+Aa(a,b,d)):e>Aa(a.year(),b,d)?(b=e-Aa(a.year(),b,d),a=a.year()+1):(a=a.year(),b=e);return{week:b,year:a}}function Aa(a,b,d){var e=za(a,b,d);b=za(a+1,b,d);return((U(a)?366:365)-e+b)/7}function ta(a,
b,d){return null!=a?a:null!=b?b:d}function xa(b){var d=[];if(!b._d){var e=new Date(a.now());e=b._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[ib]&&null==b._a[kb]){var f=b._w;if(null!=f.GG||null!=f.W||null!=f.E){var g=1;var n=4;var h=ta(f.GG,b._a[eb],ha(ua(),1,4).year);var t=ta(f.W,1);var u=ta(f.E,1);if(1>u||7<u)var l=!0}else if(g=b._locale._week.dow,n=b._locale._week.doy,h=ta(f.gg,b._a[eb],ha(ua(),g,n).year),t=ta(f.w,1),
null!=f.d){if(u=f.d,0>u||6<u)l=!0}else if(null!=f.e){if(u=f.e+g,0>f.e||6<f.e)l=!0}else u=g;1>t||t>Aa(h,g,n)?k(b)._overflowWeeks=!0:null!=l?k(b)._overflowWeekday=!0:(l=wa(h,t,u,g,n),b._a[eb]=l.year,b._dayOfYear=l.dayOfYear)}b._dayOfYear&&(l=ta(b._a[eb],e[eb]),b._dayOfYear>(U(l)?366:365)&&(k(b)._overflowDayOfYear=!0),l=O(l,0,b._dayOfYear),b._a[kb]=l.getUTCMonth(),b._a[ib]=l.getUTCDate());for(l=0;3>l&&null==b._a[l];++l)b._a[l]=d[l]=e[l];for(;7>l;l++)b._a[l]=d[l]=null==b._a[l]?2===l?1:0:b._a[l];24===
b._a[Ka]&&0===b._a[fb]&&0===b._a[lb]&&0===b._a[ub]&&(b._nextDay=!0,b._a[Ka]=0);b._d=(b._useUTC?O:X).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[Ka]=24)}}function Sa(b){if(b._f===a.ISO_8601)R(b);else{b._a=[];k(b).empty=!0;var d=""+b._i,e,g,n=d.length,h=0;var t=ka(b._f,b._locale).match(hb)||[];for(e=0;e<t.length;e++){var u=t[e];if(g=(d.match(P(u,b))||[])[0]){var l=d.substr(0,d.indexOf(g));0<l.length&&k(b).unusedInput.push(l);d=d.slice(d.indexOf(g)+g.length);
h+=g.length}if(Ha[u]){if(g?k(b).empty=!1:k(b).unusedTokens.push(u),l=b,null!=g&&f(Hb,u))Hb[u](g,l._a,l,u)}else b._strict&&!g&&k(b).unusedTokens.push(u)}k(b).charsLeftOver=n-h;0<d.length&&k(b).unusedInput.push(d);!0===k(b).bigHour&&12>=b._a[Ka]&&0<b._a[Ka]&&(k(b).bigHour=void 0);d=b._a;e=Ka;n=b._locale;t=b._a[Ka];h=b._meridiem;null!=h&&(null!=n.meridiemHour?t=n.meridiemHour(t,h):null!=n.isPM&&((n=n.isPM(h))&&12>t&&(t+=12),n||12!==t||(t=0)));d[e]=t;xa(b);W(b)}}function Ia(a){if(!a._d){var b=D(a._i);
a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});xa(a)}}function Za(a){var e=a._i,f=a._f;a._locale=a._locale||H(a._l);if(null===e||void 0===f&&""===e)return p({nullInput:!0});"string"===typeof e&&(a._i=e=a._locale.preparse(e));if(n(e))return new v(W(e));if(b(f))if(0===a._f.length)k(a).invalidFormat=!0,a._d=new Date(NaN);else{for(e=0;e<a._f.length;e++){f=0;var h=r({},a);null!=a._useUTC&&(h._useUTC=a._useUTC);h._f=a._f[e];Sa(h);if(l(h)&&
(f+=k(h).charsLeftOver,f+=10*k(h).unusedTokens.length,k(h).score=f,null==t||f<t)){var t=f;var u=h}}g(a,u||h)}else f?Sa(a):d(e)?a._d=e:jb(a);l(a)||(a._d=null);return a}function jb(f){var g=f._i;void 0===g?f._d=new Date(a.now()):d(g)?f._d=new Date(+g):"string"===typeof g?T(f):b(g)?(f._a=e(g.slice(0),function(a){return parseInt(a,10)}),xa(f)):"object"===typeof g?Ia(f):"number"===typeof g?f._d=new Date(g):a.createFromInputFallback(f)}function pb(a,b,d,e,f){var g={};"boolean"===typeof d&&(e=d,d=void 0);
g._isAMomentObject=!0;g._useUTC=g._isUTC=f;g._l=d;g._i=a;g._f=b;g._strict=e;a=new v(W(Za(g)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ua(a,b,d,e){return pb(a,b,d,e,!1)}function vb(a,d){var e;1===d.length&&b(d[0])&&(d=d[0]);if(!d.length)return ua();var f=d[0];for(e=1;e<d.length;++e)if(!d[e].isValid()||d[e][a](f))f=d[e];return f}function qa(a){a=D(a);var b=a.year||0,d=a.quarter||0,e=a.month||0,f=a.week||0,g=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*
(a.minute||0)+36E5*(a.hour||0);this._days=+g+7*f;this._months=+e+3*d+12*b;this._data={};this._locale=H();this._bubble()}function Pa(a){return a instanceof qa}function ya(a,b){I(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+N(~~(a/60),2)+b+N(~~a%60,2)})}function Da(a,b){a=(b||"").match(a)||[];a=((a[a.length-1]||[])+"").match(Zb)||["-",0,0];b=+(60*a[1])+u(a[2]);return"+"===a[0]?b:-b}function sa(b,e){return e._isUTC?(e=e.clone(),b=(n(b)||d(b)?+b:+ua(b))-+e,e._d.setTime(+e._d+
b),a.updateOffset(e,!1),e):ua(b).local()}function Ea(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ma(a,b){var d=a;Pa(a)?d={ms:a._milliseconds,d:a._days,M:a._months}:"number"===typeof a?(d={},b?d[b]=a:d.milliseconds=a):(b=$b.exec(a))?(d="-"===b[1]?-1:1,d={y:0,d:u(b[ib])*d,h:u(b[Ka])*d,m:u(b[fb])*d,s:u(b[lb])*d,ms:u(b[ub])*d}):(b=ac.exec(a))?(d="-"===b[1]?-1:1,d={y:la(b[2],d),M:la(b[3],d),d:la(b[4],d),h:la(b[5],d),m:la(b[6],d),s:la(b[7],d),w:la(b[8],d)}):null==d?d={}:"object"===
typeof d&&("from"in d||"to"in d)&&(b=ua(d.from),d=ua(d.to),b.isValid()&&d.isValid()?(d=sa(d,b),b.isBefore(d)?d=Oa(b,d):(d=Oa(d,b),d.milliseconds=-d.milliseconds,d.months=-d.months),b=d):b={milliseconds:0,months:0},d={},d.ms=b.milliseconds,d.M=b.months);d=new qa(d);Pa(a)&&f(a,"_locale")&&(d._locale=a._locale);return d}function la(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Oa(a,b){var d={milliseconds:0,months:0};d.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(d.months,
"M").isAfter(b)&&--d.months;d.milliseconds=+b-+a.clone().add(d.months,"M");return d}function ia(a,b){return function(d,e){if(null!==e&&!isNaN(+e)){Lb[b]||(ra("moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),Lb[b]=!0);var f=d;d=e;e=f}d=ma("string"===typeof d?+d:d,e);Ga(this,d,a);return this}}function Ga(b,d,e,f){var g=d._milliseconds,n=d._days;d=d._months;if(b.isValid()){f=null==f?!0:f;g&&b._d.setTime(+b._d+g*e);if(n&&(g=J(b,"Date")+n*e,b.isValid()))b._d["set"+
(b._isUTC?"UTC":"")+"Date"](g);d&&Z(b,J(b,"Month")+d*e);f&&a.updateOffset(b,n||d)}}function Ma(a){if(void 0===a)return this._locale._abbr;a=H(a);null!=a&&(this._locale=a);return this}function Ba(){return this._locale}function ja(a,b){I(0,[a,a.length],0,b)}function Ta(a,b,d,e,f){if(null==a)return ha(this,e,f).year;var g=Aa(a,e,f);b>g&&(b=g);a=wa(a,b,d,e,f);a=O(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Na(){return this.hours()%
12||12}function pa(a,b){I(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Qa(a,b){return b._meridiemParse}function Ra(a,b){b[ub]=u(1E3*("0."+a))}function gb(a){return a}function La(a,b,d,e){var f=H();b=h().set(e,b);return f[d](b,a)}function Ua(a,b,d,e,f){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return La(a,b,d,f);var g=[];for(b=0;b<e;b++)g[b]=La(a,b,d,f);return g}function $a(a,b,d,e){b=ma(b,d);a._milliseconds+=e*b._milliseconds;a._days+=e*
b._days;a._months+=e*b._months;return a._bubble()}function wb(a){return 0>a?Math.floor(a):Math.ceil(a)}function Va(a){return function(){return this.as(a)}}function ab(a){return function(){return this._data[a]}}function xb(a,b,d,e,f){return f.relativeTime(b||1,!!d,a,e)}function bb(){var a=Jb(this._milliseconds)/1E3,b=Jb(this._days),d=Jb(this._months);var e=t(a/60);var f=t(e/60);a%=60;e%=60;var g=t(d/12);d%=12;var n=this.asSeconds();return n?(0>n?"-":"")+"P"+(g?g+"Y":"")+(d?d+"M":"")+(b?b+"D":"")+(f||
e||a?"T":"")+(f?f+"H":"")+(e?e+"M":"")+(a?a+"S":""):"P0D"}var qb=a.momentProperties=[],rb=!1,Wa={},Ja,Xa={},hb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,db=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ya={},Ha={},mb=/\d/,Fa=/\d\d/,cb=/\d{3}/,nb=/\d{4}/,Bb=/[+-]?\d{6}/,Ca=/\d\d?/,Mb=/\d\d\d\d?/,Nb=/\d\d\d\d\d\d?/,Cb=/\d{1,3}/,Kb=/\d{1,4}/,Db=/[+-]?\d{1,6}/,bc=/\d+/,
Eb=/[+-]?\d+/,cc=/Z|[+-]\d\d:?\d\d/gi,Fb=/Z|[+-]\d\d(?::?\d\d)?/gi,zb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Gb={},Hb={},eb=0,kb=1,ib=2,Ka=3,fb=4,lb=5,ub=6,Tb=7,Ub=8;I("M",["MM",2],"Mo",function(){return this.month()+1});I("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});I("MMMM",0,0,function(a){return this.localeData().months(this,a)});K("month","M");M("M",Ca);M("MM",Ca,Fa);M("MMM",function(a,b){return b.monthsShortRegex(a)});
M("MMMM",function(a,b){return b.monthsRegex(a)});L(["M","MM"],function(a,b){b[kb]=u(a)-1});L(["MMM","MMMM"],function(a,b,d,e){e=d._locale.monthsParse(a,e,d._strict);null!=e?b[kb]=e:k(d).invalidMonth=a});var Ob=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Lb={};a.suppressDeprecationWarnings=!1;var Vb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Wb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
Xb=/Z|[+-]\d\d(?::?\d\d)?/,Ab=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ib=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Yb=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});I("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});I(0,["YY",2],0,function(){return this.year()%
100});I(0,["YYYY",4],0,"year");I(0,["YYYYY",5],0,"year");I(0,["YYYYYY",6,!0],0,"year");K("year","y");M("Y",Eb);M("YY",Ca,Fa);M("YYYY",Kb,nb);M("YYYYY",Db,Bb);M("YYYYYY",Db,Bb);L(["YYYYY","YYYYYY"],eb);L("YYYY",function(b,d){d[eb]=2===b.length?a.parseTwoDigitYear(b):u(b)});L("YY",function(b,d){d[eb]=a.parseTwoDigitYear(b)});L("Y",function(a,b){b[eb]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return u(a)+(68<u(a)?1900:2E3)};var Pb=C("FullYear",!1);a.ISO_8601=function(){};var dc=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",
function(){var a=ua.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:p()}),ec=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=ua.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:p()});ya("Z",":");ya("ZZ","");M("Z",Fb);M("ZZ",Fb);L(["Z","ZZ"],function(a,b,d){d._useUTC=!0;d._tzm=Da(Fb,a)});var Zb=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var $b=/^(\-)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)\.?(\d{3})?\d*)?$/,
ac=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;ma.fn=qa.prototype;var fc=ia(1,"add"),gc=ia(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Qb=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});I(0,["gg",2],0,function(){return this.weekYear()%100});
I(0,["GG",2],0,function(){return this.isoWeekYear()%100});ja("gggg","weekYear");ja("ggggg","weekYear");ja("GGGG","isoWeekYear");ja("GGGGG","isoWeekYear");K("weekYear","gg");K("isoWeekYear","GG");M("G",Eb);M("g",Eb);M("GG",Ca,Fa);M("gg",Ca,Fa);M("GGGG",Kb,nb);M("gggg",Kb,nb);M("GGGGG",Db,Bb);M("ggggg",Db,Bb);aa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,d,e){b[e.substr(0,2)]=u(a)});aa(["gg","GG"],function(b,d,e,f){d[f]=a.parseTwoDigitYear(b)});I("Q",0,"Qo","quarter");K("quarter","Q");M("Q",mb);L("Q",
function(a,b){b[kb]=3*(u(a)-1)});I("w",["ww",2],"wo","week");I("W",["WW",2],"Wo","isoWeek");K("week","w");K("isoWeek","W");M("w",Ca);M("ww",Ca,Fa);M("W",Ca);M("WW",Ca,Fa);aa(["w","ww","W","WW"],function(a,b,d,e){b[e.substr(0,1)]=u(a)});I("D",["DD",2],"Do","date");K("date","D");M("D",Ca);M("DD",Ca,Fa);M("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});L(["D","DD"],ib);L("Do",function(a,b){b[ib]=u(a.match(Ca)[0],10)});var Rb=C("Date",!0);I("d",0,"do","day");I("dd",0,0,function(a){return this.localeData().weekdaysMin(this,
a)});I("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});I("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});I("e",0,0,"weekday");I("E",0,0,"isoWeekday");K("day","d");K("weekday","e");K("isoWeekday","E");M("d",Ca);M("e",Ca);M("E",Ca);M("dd",zb);M("ddd",zb);M("dddd",zb);aa(["dd","ddd","dddd"],function(a,b,d,e){e=d._locale.weekdaysParse(a,e,d._strict);null!=e?b.d=e:k(d).invalidWeekday=a});aa(["d","e","E"],function(a,b,d,e){b[e]=u(a)});I("DDD",["DDDD",3],"DDDo",
"dayOfYear");K("dayOfYear","DDD");M("DDD",Cb);M("DDDD",cb);L(["DDD","DDDD"],function(a,b,d){d._dayOfYear=u(a)});I("H",["HH",2],0,"hour");I("h",["hh",2],0,Na);I("hmm",0,0,function(){return""+Na.apply(this)+N(this.minutes(),2)});I("hmmss",0,0,function(){return""+Na.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)});I("Hmm",0,0,function(){return""+this.hours()+N(this.minutes(),2)});I("Hmmss",0,0,function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)});pa("a",!0);pa("A",!1);K("hour",
"h");M("a",Qa);M("A",Qa);M("H",Ca);M("h",Ca);M("HH",Ca,Fa);M("hh",Ca,Fa);M("hmm",Mb);M("hmmss",Nb);M("Hmm",Mb);M("Hmmss",Nb);L(["H","HH"],Ka);L(["a","A"],function(a,b,d){d._isPm=d._locale.isPM(a);d._meridiem=a});L(["h","hh"],function(a,b,d){b[Ka]=u(a);k(d).bigHour=!0});L("hmm",function(a,b,d){var e=a.length-2;b[Ka]=u(a.substr(0,e));b[fb]=u(a.substr(e));k(d).bigHour=!0});L("hmmss",function(a,b,d){var e=a.length-4,f=a.length-2;b[Ka]=u(a.substr(0,e));b[fb]=u(a.substr(e,2));b[lb]=u(a.substr(f));k(d).bigHour=
!0});L("Hmm",function(a,b,d){d=a.length-2;b[Ka]=u(a.substr(0,d));b[fb]=u(a.substr(d))});L("Hmmss",function(a,b,d){d=a.length-4;var e=a.length-2;b[Ka]=u(a.substr(0,d));b[fb]=u(a.substr(d,2));b[lb]=u(a.substr(e))});var hc=C("Hours",!0);I("m",["mm",2],0,"minute");K("minute","m");M("m",Ca);M("mm",Ca,Fa);L(["m","mm"],fb);var ic=C("Minutes",!1);I("s",["ss",2],0,"second");K("second","s");M("s",Ca);M("ss",Ca,Fa);L(["s","ss"],lb);var jc=C("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)});
I(0,["SS",2],0,function(){return~~(this.millisecond()/10)});I(0,["SSS",3],0,"millisecond");I(0,["SSSS",4],0,function(){return 10*this.millisecond()});I(0,["SSSSS",5],0,function(){return 100*this.millisecond()});I(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});I(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});I(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});I(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});K("millisecond","ms");M("S",Cb,mb);M("SS",
Cb,Fa);M("SSS",Cb,cb);var sb;for(sb="SSSS";9>=sb.length;sb+="S")M(sb,bc);for(sb="S";9>=sb.length;sb+="S")L(sb,Ra);var kc=C("Milliseconds",!1);I("z",0,0,"zoneAbbr");I("zz",0,0,"zoneName");var Q=v.prototype;Q.add=fc;Q.calendar=function(a,b){a=a||ua();var d=sa(a,this).startOf("day");d=this.diff(d,"days",!0);d=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";b=b&&(A(b[d])?b[d]():b[d]);return this.format(b||this.localeData().calendar(d,this,ua(a)))};Q.clone=
function(){return new v(this)};Q.diff=function(a,b,d){if(!this.isValid())return NaN;a=sa(a,this);if(!a.isValid())return NaN;var e=6E4*(a.utcOffset()-this.utcOffset());b=F(b);if("year"===b||"month"===b||"quarter"===b){e=12*(a.year()-this.year())+(a.month()-this.month());var f=this.clone().add(e,"months");if(0>a-f){var g=this.clone().add(e-1,"months");a=(a-f)/(f-g)}else g=this.clone().add(e+1,"months"),a=(a-f)/(g-f);a=-(e+a);"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:
"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-e)/864E5:"week"===b?(a-e)/6048E5:a;return d?a:t(a)};Q.endOf=function(a){a=F(a);return void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};Q.format=function(b){b=V(this,b||a.defaultFormat);return this.localeData().postformat(b)};Q.from=function(a,b){return this.isValid()&&(n(a)&&a.isValid()||ua(a).isValid())?ma({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};Q.fromNow=
function(a){return this.from(ua(),a)};Q.to=function(a,b){return this.isValid()&&(n(a)&&a.isValid()||ua(a).isValid())?ma({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};Q.toNow=function(a){return this.to(ua(),a)};Q.get=E;Q.invalidAt=function(){return k(this).overflow};Q.isAfter=function(a,b){a=n(a)?a:ua(a);if(!this.isValid()||!a.isValid())return!1;b=F(q(b)?"millisecond":b);return"millisecond"===b?+this>+a:+a<+this.clone().startOf(b)};Q.isBefore=function(a,b){a=
n(a)?a:ua(a);if(!this.isValid()||!a.isValid())return!1;b=F(q(b)?"millisecond":b);return"millisecond"===b?+this<+a:+this.clone().endOf(b)<+a};Q.isBetween=function(a,b,d){return this.isAfter(a,d)&&this.isBefore(b,d)};Q.isSame=function(a,b){a=n(a)?a:ua(a);if(!this.isValid()||!a.isValid())return!1;b=F(b||"millisecond");if("millisecond"===b)return+this===+a;a=+a;return+this.clone().startOf(b)<=a&&a<=+this.clone().endOf(b)};Q.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};Q.isSameOrBefore=
function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};Q.isValid=function(){return l(this)};Q.lang=Qb;Q.locale=Ma;Q.localeData=Ba;Q.max=ec;Q.min=dc;Q.parsingFlags=function(){return g({},k(this))};Q.set=E;Q.startOf=function(a){a=F(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&
this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};Q.subtract=gc;Q.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Q.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Q.toDate=function(){return this._offset?new Date(+this):this._d};Q.toISOString=function(){var a=
this.clone().utc();return 0<a.year()&&9999>=a.year()?A(Date.prototype.toISOString)?this.toDate().toISOString():V(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):V(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};Q.toJSON=function(){return this.isValid()?this.toISOString():"null"};Q.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Q.unix=function(){return Math.floor(+this/1E3)};Q.valueOf=function(){return+this._d-6E4*(this._offset||0)};Q.creationData=function(){return{input:this._i,
format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Q.year=Pb;Q.isLeapYear=function(){return U(this.year())};Q.weekYear=function(a){return Ta.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Q.isoWeekYear=function(a){return Ta.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};Q.quarter=Q.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};Q.month=ea;Q.daysInMonth=function(){return S(this.year(),
this.month())};Q.week=Q.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};Q.isoWeek=Q.isoWeeks=function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};Q.weeksInYear=function(){var a=this.localeData()._week;return Aa(this.year(),a.dow,a.doy)};Q.isoWeeksInYear=function(){return Aa(this.year(),1,4)};Q.date=Rb;Q.day=Q.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=
a){var d=this.localeData();"string"===typeof a&&(isNaN(a)?(a=d.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};Q.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};Q.isoWeekday=function(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN};Q.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};Q.hour=Q.hours=hc;Q.minute=Q.minutes=ic;Q.second=Q.seconds=jc;Q.millisecond=Q.milliseconds=kc;Q.utcOffset=function(b,d){var e=this._offset||0,f;return this.isValid()?null!=b?("string"===typeof b?b=Da(Fb,b):16>Math.abs(b)&&(b*=60),!this._isUTC&&d&&(f=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=b,this._isUTC=!0,null!=f&&this.add(f,"m"),e!==b&&(!d||this._changeInProgress?Ga(this,ma(b-e,"m"),1,!1):this._changeInProgress||
(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15):null!=b?this:NaN};Q.utc=function(a){return this.utcOffset(0,a)};Q.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};Q.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(Da(cc,this._i));return this};Q.hasAlignedHourOffset=
function(a){if(!this.isValid())return!1;a=a?ua(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};Q.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Q.isDSTShifted=function(){if(!q(this._isDSTShifted))return this._isDSTShifted;var a={};r(a,this);a=Za(a);if(a._a){var b=a._isUTC?h(a._a):ua(a._a);this._isDSTShifted=this.isValid()&&0<w(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};Q.isLocal=function(){return this.isValid()?
!this._isUTC:!1};Q.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Q.isUtc=Ea;Q.isUTC=Ea;Q.zoneAbbr=function(){return this._isUTC?"UTC":""};Q.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Q.dates=fa("dates accessor is deprecated. Use date instead.",Rb);Q.months=fa("months accessor is deprecated. Use month instead",ea);Q.years=fa("years accessor is deprecated. Use year instead",Pb);Q.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var na=y.prototype;na._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};na.calendar=function(a,b,d){a=this._calendar[a];return A(a)?a.call(b,d):a};na._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};
na.longDateFormat=function(a){var b=this._longDateFormat[a],d=this._longDateFormat[a.toUpperCase()];if(b||!d)return b;this._longDateFormat[a]=d.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};na._invalidDate="Invalid date";na.invalidDate=function(){return this._invalidDate};na._ordinal="%d";na.ordinal=function(a){return this._ordinal.replace("%d",a)};na._ordinalParse=/\d{1,2}/;na.preparse=gb;na.postformat=gb;na._relativeTime={future:"in %s",past:"%s ago",
s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};na.relativeTime=function(a,b,d,e){var f=this._relativeTime[d];return A(f)?f(a,b,d,e):f.replace(/%d/i,a)};na.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return A(a)?a(b):a.replace(/%s/i,b)};na.set=function(a){var b;for(b in a){var d=a[b];A(d)?this[b]=d:this["_"+b]=d}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+
"|"+/\d{1,2}/.source)};na.months=function(a,d){return b(this._months)?this._months[a.month()]:this._months[Ob.test(d)?"format":"standalone"][a.month()]};na._months="January February March April May June July August September October November December".split(" ");na.monthsShort=function(a,d){return b(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Ob.test(d)?"format":"standalone"][a.month()]};na._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");na.monthsParse=
function(a,b,d){var e;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(e=0;12>e;e++){var f=h([2E3,e]);d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i"));d||this._monthsParse[e]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[e]=new RegExp(f.replace(".",""),"i"));if(d&&"MMMM"===
b&&this._longMonthsParse[e].test(a)||d&&"MMM"===b&&this._shortMonthsParse[e].test(a)||!d&&this._monthsParse[e].test(a))return e}};na._monthsRegex=zb;na.monthsRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};na._monthsShortRegex=zb;na.monthsShortRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:
this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};na.week=function(a){return ha(a,this._week.dow,this._week.doy).week};na._week={dow:0,doy:6};na.firstDayOfYear=function(){return this._week.doy};na.firstDayOfWeek=function(){return this._week.dow};na.weekdays=function(a,d){return b(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(d)?"format":"standalone"][a.day()]};na._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");
na.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};na._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");na.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};na._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");na.weekdaysParse=function(a,b,d){var e;this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++){var f=ua([2E3,1]).day(e);d&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=
new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i"));this._weekdaysParse[e]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[e]=new RegExp(f.replace(".",""),"i"));if(d&&"dddd"===b&&this._fullWeekdaysParse[e].test(a)||d&&"ddd"===b&&this._shortWeekdaysParse[e].test(a)||
d&&"dd"===b&&this._minWeekdaysParse[e].test(a)||!d&&this._weekdaysParse[e].test(a))return e}};na.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};na._meridiemParse=/[ap]\.?m?\.?/i;na.meridiem=function(a,b,d){return 11<a?d?"pm":"PM":d?"am":"AM"};B("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;b=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",B);a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",
H);var ob=Math.abs,lc=Va("ms"),mc=Va("s"),nc=Va("m"),oc=Va("h"),pc=Va("d"),qc=Va("w"),rc=Va("M"),sc=Va("y"),tc=ab("milliseconds"),uc=ab("seconds"),vc=ab("minutes"),wc=ab("hours"),xc=ab("days"),yc=ab("months"),zc=ab("years"),yb=Math.round,tb={s:45,m:45,h:22,d:26,M:11},Jb=Math.abs,va=qa.prototype;va.abs=function(){var a=this._data;this._milliseconds=ob(this._milliseconds);this._days=ob(this._days);this._months=ob(this._months);a.milliseconds=ob(a.milliseconds);a.seconds=ob(a.seconds);a.minutes=ob(a.minutes);
a.hours=ob(a.hours);a.months=ob(a.months);a.years=ob(a.years);return this};va.add=function(a,b){return $a(this,a,b,1)};va.subtract=function(a,b){return $a(this,a,b,-1)};va.as=function(a){var b=this._milliseconds;a=F(a);if("month"===a||"year"===a){var d=this._days+b/864E5;d=this._months+4800*d/146097;return"month"===a?d:d/12}d=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return d/7+b/6048E5;case "day":return d+b/864E5;case "hour":return 24*d+b/36E5;case "minute":return 1440*
d+b/6E4;case "second":return 86400*d+b/1E3;case "millisecond":return Math.floor(864E5*d)+b;default:throw Error("Unknown unit "+a);}};va.asMilliseconds=lc;va.asSeconds=mc;va.asMinutes=nc;va.asHours=oc;va.asDays=pc;va.asWeeks=qc;va.asMonths=rc;va.asYears=sc;va.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*u(this._months/12)};va._bubble=function(){var a=this._milliseconds,b=this._days,d=this._months,e=this._data;0<=a&&0<=b&&0<=d||0>=a&&0>=b&&0>=d||(a+=864E5*
wb(146097*d/4800+b),d=b=0);e.milliseconds=a%1E3;a=t(a/1E3);e.seconds=a%60;a=t(a/60);e.minutes=a%60;a=t(a/60);e.hours=a%24;b+=t(a/24);a=t(4800*b/146097);d+=a;b-=wb(146097*a/4800);a=t(d/12);e.days=b;e.months=d%12;e.years=a;return this};va.get=function(a){a=F(a);return this[a+"s"]()};va.milliseconds=tc;va.seconds=uc;va.minutes=vc;va.hours=wc;va.days=xc;va.weeks=function(){return t(this.days()/7)};va.months=yc;va.years=zc;va.humanize=function(a){var b=this.localeData();var d=!a;var e=ma(this).abs(),f=
yb(e.as("s")),g=yb(e.as("m")),n=yb(e.as("h")),h=yb(e.as("d")),t=yb(e.as("M"));e=yb(e.as("y"));f=f<tb.s&&["s",f]||1>=g&&["m"]||g<tb.m&&["mm",g]||1>=n&&["h"]||n<tb.h&&["hh",n]||1>=h&&["d"]||h<tb.d&&["dd",h]||1>=t&&["M"]||t<tb.M&&["MM",t]||1>=e&&["y"]||["yy",e];f[2]=d;f[3]=0<+this;f[4]=b;d=xb.apply(null,f);a&&(d=b.pastFuture(+this,d));return b.postformat(d)};va.toISOString=bb;va.toString=bb;va.toJSON=bb;va.locale=Ma;va.localeData=Ba;va.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
bb);va.lang=Qb;I("X",0,0,"unix");I("x",0,0,"valueOf");M("x",Eb);M("X",/[+-]?\d+(\.\d{1,3})?/);L("X",function(a,b,d){d._d=new Date(1E3*parseFloat(a,10))});L("x",function(a,b,d){d._d=new Date(u(a))});a.version="2.11.2";var Sb=ua;a.fn=Q;a.min=function(){var a=[].slice.call(arguments,0);return vb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return vb("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=h;a.unix=function(a){return ua(1E3*a)};a.months=function(a,
b){return Ua(a,b,"months",12,"month")};a.isDate=d;a.locale=B;a.invalid=p;a.duration=ma;a.isMoment=n;a.weekdays=function(a,b){return Ua(a,b,"weekdays",7,"day")};a.parseZone=function(){return ua.apply(null,arguments).parseZone()};a.localeData=H;a.isDuration=Pa;a.monthsShort=function(a,b){return Ua(a,b,"monthsShort",12,"month")};a.weekdaysMin=function(a,b){return Ua(a,b,"weekdaysMin",7,"day")};a.defineLocale=G;a.weekdaysShort=function(a,b){return Ua(a,b,"weekdaysShort",7,"day")};a.normalizeUnits=F;a.relativeTimeThreshold=
function(a,b){if(void 0===tb[a])return!1;if(void 0===b)return tb[a];tb[a]=b;return!0};a.prototype=Q;return a});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Navigation=new function(){this.TranslationTexts={EXTERNAL_PROVIDER_LINK_TITLE: "External Website"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {COOKIES_DISABLED_MESSAGE : {sourceText: "It appears you have cookies disabled. To make the most of your Costco Travel planning and in order to book your vacation, please enable cookies in your Web browser.",translatedText: "It appears you have cookies disabled. To make the most of your Costco Travel planning and in order to book your vacation, please enable cookies in your Web browser."},EXTERNAL_PROVIDER_LINK_MESSAGE : {sourceText: "Please note: The link you have selected will direct you to a provider's site. Please review the Privacy Policy of that site, as it may differ from Costco Travel's.",translatedText: "Please note: The link you have selected will direct you to a provider's site. Please review the Privacy Policy of that site, as it may differ from Costco Travel's."},SESSION_TIMEOUT_MESSAGE : {sourceText: "Your session has timed out. Please begin your search again.",translatedText: "Your session has timed out. Please begin your search again."}};var TranslationMessages = this.TranslationMessages;this.setLocale=function(a){a="h=19&localeCode="+a;var b=$namespace.LocaleUtil.getLanguageFromLocaleCode($("#viewLanguageSelect").val());
-1!=b.indexOf(" ")&&(b=b.substr(0,b.indexOf(" ")));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("home.act",a,null,null,function(){window.location.reload()})};this.userIsLoggedIn=function(){return $namespace.GlobalConstants.IS_USER_LOGGED_IN};this.setSelectedProvinceCode=function(a){$namespace.DomUtil.createCookie("SELECTED_PROVINCE_CODE",a,180);$('SELECT[id="provinceSelection"]').val(a);1<arguments.length&&$('SELECT[id="provinceSelection"]').change()};this.getSelectedProvinceCode=function(){return $namespace.DomUtil.readCookie("SELECTED_PROVINCE_CODE")};
this.loadPage=function(a){$("<A HREF='"+a+"'>").css({display:"none"}).appendTo(document.body)[0].click()};this.loadHistoryCodeWithData=function(a,b){a=_webLoc+"/h="+a;if(b)for(var d=0;d<b.length;d++)"undefined"!=typeof b[d]&&null!=b[d]&&(a+="_",a+=b[d]);$("<A HREF='"+a+"'>").css({display:"none"}).appendTo(document.body)[0].click()};this.loadExternalUrl=function(a,b){var d=window.location.href.toLowerCase(),e=function(){(/\/Specialty/i.test(d)||/\/Experiences/i.test(d)||/\/Theme-Parks/i.test(d))&&
$namespace.Analytics.trackEvent("External Modal","Confirm",a,null);a.match(/^(https?:\/\/)?(www\.)?costcotravel\.com/i)&&-1!=a.indexOf("/Info/Airline-Baggage")?$namespace.Analytics.trackPageView(b?b:"/Info/Airline-Baggage"):$namespace.Analytics.trackPageView(b?b:"home/externalUrl/"+a);$("<A target='_blank' HREF='"+a+"'>").css({display:"none"}).appendTo(document.body)[0].click()},f=function(){(/\/Specialty/i.test(d)||/\/Experiences/i.test(d)||/\/Theme-Parks/i.test(d))&&$namespace.Analytics.trackEvent("External Modal",
"Cancel",a,null)};a.trim().match(/^(https?:\/\/)?(www\.)?(costco|costcotravel)\.(com|ca)/i)?e():$namespace.MessageUtil.showConfirmationMessageWithCancelHandler({title:TranslationTexts.EXTERNAL_PROVIDER_LINK_TITLE,text:TranslationMessages.EXTERNAL_PROVIDER_LINK_MESSAGE.translatedText},e,f)};this.isWorkflowPage=function(){var a=window.location.href;if(a.match(/\/\?h=(2|3|5|6|8)(\D{1}.*|.{0})$/)||a.match(/\/(h=|#)\d{4}/))if(a=a.match(/(h=|#)(\d+)/),2<a.length)try{if(parseInt(a[2])<$namespace.PageHistoryConstants.HISTORY_VP_SEARCH_TAB)return!0}catch(b){}return!1};
this.manageDynamicElements=function(){this.isWorkflowPage()?$("#provinceSelectionContainer").hide():$("#provinceSelectionContainer").show()};this.getHistoryCodeForPage=function(a){var b="";switch(a){case "FLIGHTS":b=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_WITH_SELECTED_AND_ADDITIONAL_FLIGHTS;break;case "HOTELS":b=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL;break;case "THEME_PARKS":b=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS;
break;case "TRANSPORTATION":b=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION;break;case "ACTIVITIES":b=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES;break;case "PACKAGE_RECAP":b=$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP}return b};$(document).ready(function(){window.addEventListener("error",function(a,b,d,e,f){1<arguments.length?$namespace.Logger.error(JSON.stringify({lineno:d,colno:e,message:a,source:b})):$namespace.Logger.error(JSON.stringify({lineno:a.lineno,
colno:a.colno,message:a.error,source:a.filename}));return!1});$namespace.PageHistory.setSessionTimestamp(window._sessionTimestamp);$namespace.PageHistory.addExcludeHistoryPathPattern(/\?h=3&checkMemberInactivity/);$namespace.PageHistory.initialize($namespace.HistoryNavigation.historyChange);setTimeout(function(){$(document.body).focus().blur()},1);$namespace.AsynchronousConnectionUtil.addResponseEventHandler("homepageRedirect",function(a){return 0<=a.indexOf("SESSION_TIMED_OUT")?(window.location.href=
_webLoc+"/",!1):!0});$namespace.DomUtil.clearCookie("SESSION_TIMED_OUT");$namespace.DomUtil.clearCookie("SESSION_TIME_OUT_DETECTED");window.opener&&(window.addEventListener("message",function(a){0===$namespace.GlobalConstants.AGENT_APPLICATION_DOMAIN_AND_CONTEXT.search(a.origin)&&$namespace.AjaxUtil.makeAjaxCall("authenticateAgentToken.act","authenticationToken="+a.data,null,null,function(){this.messageCode?$namespace.AuthenticateAgentToken.loadErrorPage():window.location.reload()})},!1),window.opener.postMessage("windowLoaded",
$namespace.GlobalConstants.AGENT_APPLICATION_DOMAIN_AND_CONTEXT))})};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PageHistory=new function(){var a=/h=([0-9_a-zA-Z:\-%]+)$/,b=/#([0-9_a-zA-Z:\-]*)$/,d=/cid-([0-9a-f\-]{36})/,e=/h=[0-9]+_(\d+)/,f=/h=(\d{1,4})/,g=null,h=null,k=[],l=new function(){var a=function(){var a={};if(window.name)try{a=JSON.parse(window.name)}catch(G){window.name=JSON.stringify(a)}return a};this.getItem=function(b){return a()[b]};this.setItem=function(b,d){var e=a();e[b]=d;window.name=JSON.stringify(e)};this.clear=function(){store={};window.name=JSON.stringify(store)}};this.registerIFrameLocation=
function(a){if(a=a.search){var b=a.indexOf("?");-1<b&&(a=a.substring(b+1));b=window.location.hash;var d=b.indexOf("#");-1<d&&(b=b.substring(d+1));a!=b&&(window.location.hash=a)}};this.getLocationCodeFromPath=function(){var b=a.exec(window.location.pathname);return b?b[1]:null};this.getHistoryCodeAndParametersFromPath=function(){var a=this.getLocationCodeFromPath(),b=/[^_]+/g,d=[];a&&(d=a.match(b));return d};this.getContextIdFromPath=function(){var a=d.exec(window.location.pathname);return a?a[1]:
null};this.getSelectedPageFromPath=function(){var a=e.exec(window.location.pathname);return a?a[1]:1};this.getHistoryCodeFromPath=function(){var a=f.exec(window.location.pathname);return a?a[1]:1};var p=function(){var a=null,b=$namespace.PageHistory.getStorage("locationCodeStack");null!=b&&0<b.length&&(a=b[b.length-1]);return a};this.getCurrentLocationCode=p;var q=function(a){var b=$namespace.PageHistory.getStorage("locationCodeStack");null==b&&(b=[]);var d=null;0<b.length&&(d=b[b.length-1]);d!=a&&
(b.push(a),$namespace.PageHistory.store("locationCodeStack",b))},r=function(){var a=window.location.hash,b=a.indexOf("#");-1<b&&(a=a.substring(b+1));a=a?a:null;a!=p()&&(b=$namespace.PageHistory.getStorage(a+"_storage",!0),a=v(a),y(a,b?b.historyItem:null,!1),q(a))};this.onpopstate=function(a){var b=(a=a||window.event)?a.state:null;b?!window.location.hash&&a.state?y(a.state?a.state.locationCode:null,a.state?a.state.historyItem:null,!1):window.location.hash&&r():window.history.replaceState&&(a={sessionTimestamp:$namespace.sessionTimestamp},
b={locationCode:$namespace.PageHistory.getLocationCodeFromPath(),historyItem:a},window.history.replaceState(b,null,document.URL))};this.onhashchange=r;this.initialize=function(a,b){g=a;"onhashchange"in window?window.onhashchange||(window.onhashchange=r):setInterval(r,100);"onpopstate"in window&&!window.onpopstate&&(window.onpopstate=$namespace.PageHistory.onpopstate);window.history.replaceState&&!window.history.state&&(b||(b={sessionTimestamp:$namespace.sessionTimestamp}),window.history.replaceState({locationCode:0,
historyItem:b},null,document.URL));(b=window.location.toString().split("#"))&&1<b.length&&(a=b[b.length-1],a=v(a),b=(b=$namespace.PageHistory.getStorage(a+"_storage",!0))?b.historyItem:null,y(a,b,!0))};this.clearHistoryState=function(){if(window.history.replaceState){var b={sessionTimestamp:$namespace.sessionTimestamp},d=window.location.pathname.replace(a,"");window.history.replaceState({locationCode:0,historyItem:b},null,d)}};this.registerListener=function(a){g=a};var v=function(a){if(a){var b=a.lastIndexOf("_");
0<=b&&(a=a.substring(0,b))}return a},n=function(){var a=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?d:d&3|8).toString(16)})},t=function(d,e,f){var g=window.location.pathname;f=2<arguments.length?arguments[2]:!0;g=g.replace(a,"");var h="/"==g.substring(g.length-1);e?(g=g+(h?"":"/")+window.location.hash,g=g.replace(b,"")+"#"+d):g=g+(h?"":"/")+"h="+d;f&&(g=g+"_"+n());return g},u=function(){for(var a=
!1,b=window.location.href,d=0;d<k.length;d++){var e=k[d];if(null!=e&&b.match(e)){a=!0;break}}return a};this.push=function(a,b,d){if(a!=p()){d={locationCode:a,historyItem:d};if(b||"function"!==typeof window.history.pushState)"function"===typeof window.history.pushState?(b=window.location.pathname,e=t(a,!0),e!=b&&(u(e)?window.history.replaceState(d,e,e):window.history.pushState(d,e,e))):u(e)?window.location.replace("#"+a):window.location.hash=a,$namespace.PageHistory.store(a+"_storage",d,!0);else{b=
window.location.pathname;var e=t(a,!1,!1);e!=b&&(u(e)?window.history.replaceState(d,e,e):window.history.pushState(d,e,e))}q(a)}};this.replace=function(a,b,d){var e={locationCode:a,historyItem:d};if(b||"function"!==typeof window.history.replaceState)"function"===typeof window.history.replaceState?(b=window.location.pathname,f=t(a,!0),(f!=b||d)&&window.history.replaceState(e,f,f)):u(f)?window.location.replace("#"+a):window.location.hash=a,$namespace.PageHistory.store(a+"_storage",e,!0);else{b=window.location.pathname;
var f=t(a,!1,!1);(f!=b||d)&&window.history.replaceState(e,f,f)}a!=p()&&(d=$namespace.PageHistory.getStorage("locationCodeStack"),null==d&&(d=[]),e=null,0<d.length&&(e=d[d.length-1]),e!=a&&(d[d.length-1]=a,$namespace.PageHistory.store("locationCodeStack",d)))};this.getHistoryItem=function(a){a=w(a);return null!=a?a.historyItem:null};var w=function(a){if(a||"function"!==typeof window.history.pushState){if(a=/h=([^&]*)/.exec(window.location.pathname),null!=a)return a=$namespace.PageHistory.getStorage(a[1]+
"_storage")}else return a=window.history.state;return null};this.setContextId=function(a){if(a&&$namespace.PageHistory.getLocationCodeFromPath()){var b=$namespace.PageHistory.getContextIdFromPath(),d=window.location.pathname;d=b?d.replace(b,a):d+"_cid-"+a;a=w(!1);window.history.replaceState(a,null,d)}};this.store=function(a,b){h.setItem(a,JSON.stringify(b))};this.getStorage=function(a){a=h.getItem(a);"string"===typeof a&&(a=JSON.parse(a));return a};this.hasStorageKey=function(a,b){return null==h.getItem(a)?
!1:!0};this.clearStorage=function(){h.clear()};this.setSessionTimestamp=function(a){if(a){var b=$.cookie("SESSION_TIMESTAMP");(!b||parseFloat(b)<a)&&$.cookie("SESSION_TIMESTAMP",a,{path:"/"})}};this.getSessionTimestamp=function(){var a=$.cookie("SESSION_TIMESTAMP");return a?parseFloat(a):0};var y=function(a,b,d){if(g){var e=$namespace.PageHistory.getStorage("locationCodeStack");if(e){for(var f=-1,n=e.length-1;0<=n;n--)if(e[n]==a){f=n;break}0<=f&&(e=e.slice(0,f+1),$namespace.PageHistory.store("locationCodeStack",
e))}g.call(null,a,b,d)}};a:{try{if("localStorage"in window&&null!==window.localStorage){localStorage.setItem("testKey","testValue");localStorage.removeItem("testKey");var z=!0;break a}}catch(x){}z=!1}h=z?window.sessionStorage:l;this.addExcludeHistoryPathPattern=function(a){null!=a&&k.push(a)};this.trackBookMarkedPage=function(a){$namespace.Analytics.trackEvent("Failed_Bookmarked_Pages","/h="+a)};this.getIndexOfLocationCode=function(a){var b=0,d=$namespace.PageHistory.getStorage("locationCodeStack");
if(d)for(var e=d.length-1,f=0;0<=e;e--,f--)if(d[e]&&0<=d[e].indexOf(a)){b=f;break}return b};this.pushEmpty=function(){q(null)}};var PageHistory=$namespace.PageHistory;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PageNavigationHandlers=new function(){this.hidePopups=function(){};this.historyChangeHandler=function(a,b,d){this.hidePopups();switch(a){case $namespace.PageHistoryConstants.HISTORY_LANDING_URL:b&&(window.location.href=b,($namespace.Browser.chrome||$namespace.Browser.safari)&&window.location.reload());break;case $namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL:case $namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT:$namespace.PackageHotelModule.loadAdditionalHotelResultsPage(d[1]);
break;case $namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP:$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageRecap.act","vpbr=SHOW_PACKAGE_RECAP",null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1)},null);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_FLIGHT_SEAT_SELECTION:a=$("#accept_terms");if(0==a.length)window.location.reload();else if(0<a.length&&a[0].checked){$namespace.DomUtil.setElementLoadingMask(!0);
var e=function(){$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1)};var f={cfssa:"LOAD_CRUISE_FLIGHT_SEAT_SELECTION"};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseFlightSeatSelectionActivity.act",$.param(f),null,"mainContent",e)}else $namespace.cruiseTravelerInfoModule.isActive()&&(window.history.back(),$namespace.cruiseTravelerInfoModule.showTermsAndConditionsError(a));break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_SAILING_SEARCH_RESULTS:$namespace.CruiseSearchResultsModule.isActive()?
window.history.back():$namespace.CruiseSearchResultsModule.reloadCruiseSearchResultsPage();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_AUTHENTICATED_SEARCH_RESULTS:$namespace.CruiseSearchResultsModule.isActive()?window.history.forward():$namespace.CruiseSearchResultsModule.reloadCruiseSearchResultsPage();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS:$namespace.CruiseDetailsModule.isActive()?window.history.back():$namespace.CruiseDetailsModule.reloadCruiseDetailsPage();
break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS_AUTHENTICATED:$namespace.CruiseDetailsModule.isActive()?window.history.forward():$namespace.CruiseDetailsModule.reloadCruiseDetailsPage();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_PAYMENT:$namespace.CruisePaymentsModule.isActive()?$namespace.CruisePaymentsModule.reloadCruisePaymentsPage():window.location.reload();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_FINALIZE_BOOKING:a=$namespace.CruisePaymentsModule;
a.isActive()?"cruisePayment"===a.activePage?window.history.back():"cruiseConfirmation"===a.activePage&&window.history.forward():window.location.reload();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_CONFIRMATION:a=$namespace.CruisePaymentsModule;if(a.isActive())"cruisePayment"===a.activePage&&window.history.forward();else{$namespace.DomUtil.setElementLoadingMask(!0);f={cpp:"LOAD_CRUISE_BOOKING_CONFIRMATION_PAGE",loadBookingConfirmationPage:!0,cruisePaymentsModuleInactive:!0};var g=
function(){$namespace.DomUtil.setElementLoadingMask(!1);$namespace.Application.initializeOnMainContentReload();$(window).resize()};e=function(){$("html, body").animate({scrollTop:0},0);f.cpp="LOAD_INFO_BAR_LINKS";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param(f),null,"info-bar-links",g)};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param(f),null,"mainContent",e)}break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO:$namespace.CruiseTravelerModule.reloadCruiseTravelersPage();
break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY:$namespace.CruiseCabinResultsModule.reloadStateroomLocation(d);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS_WITHOUT_BOOKING:a=$("#accept_terms");(0==a.length||0<a.length&&!a.hasClass("error"))&&window.location.reload();break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_SPECIAL_REQUESTS:$namespace.DomUtil.setElementLoadingMask(!0);e=function(){$namespace.Application.initializeOnMainContentReload();
$namespace.DomUtil.setElementLoadingMask(!1);$(".partial-page-load-heading").focus()};f={cpsr:"LOAD_CRUISE_SPECIAL_REQUESTS"};ajaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param(f),null,"mainContent",e);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_RECAP:$namespace.DomUtil.setElementLoadingMask(!0);window.location.reload();break;case $namespace.PageHistoryConstants.HISTORY_VP_SEARCH_TAB:$namespace.SearchWidgetsModule.setTab("vacation-packages",!0);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_SAILING_SEARCH_TAB:$namespace.SearchWidgetsModule.setTab("cruises",
!0);break;case $namespace.PageHistoryConstants.HISTORY_ALL_INCLUSIVE_SEARCH_TAB:$namespace.SearchWidgetsModule.setTab("all-inclusive",!0);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_TOUR_SEARCH_TAB:$namespace.TabNavigation.reLoadCruiseWidgetTabWithDataFromHome(!0);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_SAILING_SEARCH_TAB:$namespace.TabNavigation.reLoadCruiseWidgetTabWithDataFromHome(!1);break;case $namespace.PageHistoryConstants.HISTORY_CRUISE_TOUR_SEARCH_TAB:$namespace.TabNavigation.reLoadCruiseWidgetTabWithDataFromHome(!0);
break;case $namespace.PageHistoryConstants.HISTORY_CAR_SEARCH_TAB:$namespace.SearchWidgetsModule.setTab("rental-cars",!0);break;case $namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_TAB:$namespace.SearchWidgetsModule.setTab("hotels",!0);break;case $namespace.PageHistoryConstants.HISTORY_HOBE_PAYMENT_PAGE:$namespace.GlobalConstants.RESPONSIVE_HOBE_PAYMENT_OPTION_PAGE_ENABLED&&($namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_HOBE_BOOKING_CONFIRMATION),$namespace.Application.initializeOnMainContentReload(),
$namespace.DomUtil.setElementLoadingMask(!1),$(".partial-page-load-heading").focus(),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(f),null,"mainContent",e));break;case $namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS:$namespace.DomUtil.setElementLoadingMask(!0),$namespace.GlobalConstants.RESPONSIVE_MANAGE_AND_REVIEW_PAYMENTS_PAGE_ENABLED?(f={mpa:"LOAD_MANAGE_PAYMENTS_PAGE"},e=function(){$namespace.DomUtil.setElementLoadingMask(!1);$(".partial-page-load-heading").focus();
$namespace.Application.initializeOnMainContentReload()},$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("managePaymentsActivity.act",$.param(f),null,"mainContent",e)):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS)}};this.pageRefreshHandler=function(a,b){this.hidePopups();switch(a){case $namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_CAR_STREET_ADDRESS:$namespace.HistoryNavigation.getHistoryData()}};this.backNavigationFromCarMatrix=function(a,
b,d,e,f){this.hidePopups()}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SecurityUtil=new function(){this.processPassword=function(a){var b=a;if(null!=a){b="";for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);b+=127<e||43==e?"&#x"+Number(e).toString(16)+";":a.charAt(d)}}return escape(b)};this.validatePasswordPolicy=function(a,b,d){var e=!1;/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$~])[A-Za-z\d!@#$~]{8,128}$/.test(a)&&(d=(d=d&&0<=d.indexOf("@")?d.substr(0,d.indexOf("@")):d)&&0<=a.toLowerCase().indexOf(d.toLowerCase()),a=b&&0<=a.indexOf(b),d||a||(e=!0));return e};
this.getInvalidPasswordMessage=function(){var a=$namespace.LoginModule.TranslationMessages,b=[a.PASSWORD_VALIDATION_ERROR_TEXT_4.translatedText,a.PASSWORD_VALIDATION_ERROR_TEXT_5.translatedText,a.PASSWORD_VALIDATION_ERROR_TEXT_6.translatedText,a.PASSWORD_VALIDATION_ERROR_TEXT_7.translatedText,a.PASSWORD_VALIDATION_ERROR_TEXT_8.translatedText].reduce(function(a,b){return a+"<li><span>"+b.trim()+"</span></li>"},"");return $("<ul/>").append("<lh>"+a.PASSWORD_VALIDATION_ERROR_TEXT_3.translatedText+"</lh>").append(b).prop("outerHTML")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SessionSettings=new function(){this.displayGlobalKeys=function(){var a=document.getElementById("globalsCategory").value;if(9==a)document.getElementById("consumerDiv").style.display="block",document.getElementById("responsiveDiv").style.display="none",document.getElementById("featureFlagDiv").style.display="none",document.getElementById("globalKeysDiv").style.display="none";else if(27==a)document.getElementById("consumerDiv").style.display="none",document.getElementById("responsiveDiv").style.display=
"block",document.getElementById("featureFlagDiv").style.display="none",document.getElementById("globalKeysDiv").style.display="none",document.getElementById("responsiveFlag_0").onclick=function(a){return function(b){a.setResponsiveCheckboxes(b)}}(this),this.setResponsiveCheckboxes(),this.initialResponsiveFlags=this.createFlagsResponsiveStates();else if("0"===a)document.getElementById("consumerDiv").style.display="none",document.getElementById("responsiveDiv").style.display="none",document.getElementById("featureFlagDiv").style.display=
"block",document.getElementById("globalKeysDiv").style.display="none";else{document.getElementById("selectedGlobalKeyValue").value="";var b=document.getElementById("globalsCategory").value;b?$namespace.AjaxUtil.makeAjaxCall("sessionSettings.act","rs=1&selectedGlobalCategory="+b,null,null,function(b){document.getElementById("responsiveDiv").style.display="none";document.getElementById("featureFlagDiv").style.display="none";document.getElementById("globalKeysDiv").style.display="block";document.getElementById("consumerDiv").style.display=
"none";b=JSON.parse(b);1==b.length?document.getElementById("selectedGlobalKeyValue").value=b[0].value:b.unshift({value:"",text:"--Select--"});b=JSON.stringify(b);$namespace.DomUtil.replaceOptions("globalsKey",b);501==a?(document.getElementById("globalKVDropdownSection").style.display="block",document.getElementById("globalValueSection").style.display="none",$namespace.SessionSettings.updateGlobalValueDropdown("OFF REPRICE_INCREASE REPRICE_DECREASE REPRICE_SAME NO_REPRICE REPRICE_INTERCITY NO_REPRICE_INTERCITY".split(" "))):
32==a?(document.getElementById("globalKVDropdownSection").style.display="block",document.getElementById("globalValueSection").style.display="none",$namespace.SessionSettings.updateGlobalValueDropdown(["NONE","INFO","WARN","ERROR"])):2==a?(document.getElementById("globalKVDropdownSection").style.display="block",document.getElementById("globalValueSection").style.display="none",$namespace.SessionSettings.updateGlobalValueDropdown(["adfs","cert",""])):(document.getElementById("globalKVDropdownSection").style.display=
"none",document.getElementById("globalValueSection").style.display="block");$("#globalsKey").on("change",function(){$namespace.SessionSettings.displaySelectedGlobalKeyValue()})}):(document.getElementById("responsiveDiv").style.display="none",document.getElementById("featureFlagDiv").style.display="none",document.getElementById("globalKeysDiv").style.display="none",document.getElementById("consumerDiv").style.display="none")}b=$("#sessionSettingsPopupDivContainer");var d=b.outerHeight(),e=$(window).height();
e>d?b.css("top",parseInt((e-d)/2)+"px"):b.css("top","0px")};this.setResponsiveCheckboxes=function(){var a=$('INPUT[id^="responsiveFlag_"]'),b=document.getElementById("responsiveFlag_0");if(a.length){b=b.checked?!0:!1;for(var d=1;d<a.length;d++)a[d].disabled=b,a[d].parentElement.style.color=b?"#c0c0c0":"",b&&(a[d].checked=!1)}};this.updateGlobalValueDropdown=function(a){var b=document.getElementById("globalsKey").value,d=document.getElementById("globalKVDropdownSection"),e="<select id='globalKVSelectElement' class='textbox01 w180'>";
e+="<option value='"+b+"'>"+b+"</option>";a.forEach(function(a){a!=b&&(e+="<option value='"+a+"'>"+a+"</option>")});e+="</select>";d.innerHTML=e;$("#globalKVSelectElement").on("change",function(){$namespace.SessionSettings.updateSelectedGlobalKeyValue()})};this.updateSelectedGlobalKeyValue=function(){var a=document.getElementById("globalKVSelectElement");document.getElementById("selectedGlobalKeyValue").value=a.options[a.selectedIndex].text};this.displaySelectedGlobalKeyValue=function(){document.getElementById("selectedGlobalKeyValue").value=
document.getElementById("globalsKey").value};this.closeSessionSettingsPopup=function(){$namespace.DomUtil.disableElement("dataContent",!1);$("#sessionSettingsPopupDivContainer").hide()};this.createFlagsResponsiveStates=function(){for(var a=[],b=!1,d=$('INPUT[id^="responsiveFlag_"]').length,e=0;e<d;e++){var f=document.getElementById("responsiveFlag_"+e),g=f.value,h=f.checked?"1":"0";"DEFAULT_TO_LEGACY_MODE"==g?f.checked&&(b=!0):b&&(h="0");a.push({flagName:g,flagValue:h})}return a};this.updateSessionSettings=
function(){var a=!1,b="",d=document.getElementById("globalsCategory");if(""==d.value)alert("You have not selected a global category."),d.focus();else if(9==d.value){var e=[],f=$('INPUT[type="checkbox"][id^="consumerFlag_"]').length;for(b=0;b<f;b++){var g=document.getElementById("consumerFlag_"+b),h=g.value;g=g.checked?"1":"0";e.push({keyName:h,keyValue:g})}b="rs=6&globalKeyAndValue="+JSON.stringify(e)+"&selectedGlobalCategory="+d.value}else if(27==d.value)e=this.createFlagsResponsiveStates(),this.compareCruiseFlags(this.initialResponsiveFlags,
e)&&(a=!0),b="rs=2&responsiveFlagSelections="+JSON.stringify(e);else if(0==d.value){e=[];d=$('INPUT[type="checkbox"][id^="featureFlag_"]').length;for(b=0;b<d;b++)g=document.getElementById("featureFlag_"+b),h=g.value,g=g.checked?"1":"0",e.push({keyName:h,keyValue:g});b="rs=5&globalKeyAndValue="+JSON.stringify(e)}else h=document.getElementById("globalsKey"),f=h.options[h.selectedIndex].text,e=[],"--Select--"==f?(alert("You have not selected a global key to update."),h.focus()):(e.push({keyName:f,keyValue:document.getElementById("selectedGlobalKeyValue").value}),
JSON.stringify(e),b="rs=3&globalKeyAndValue="+JSON.stringify(e)+"&selectedGlobalCategory="+d.value);b.length&&($namespace.DomUtil.setElementLoadingMask(!0),$("#sessionSettingsPopupDivContainer").hide(),$namespace.AjaxUtil.makeAjaxCall("sessionSettings.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1);a?$namespace.Navigation.loadPage(_webLoc+"/"):window.location.reload()}))};this.revertToLegacyMode=function(a){a.type="shiftG";$namespace.DomUtil.disableElement("dataContent",!0);
$namespace.Popup.createPopupDiv("sessionSettingsPopupDivContainer",-1,-1,700<window.innerWidth?700:window.innerWidth-30,-1,200,!1,!0,"popupDivSmall");var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sessionSettings.act","rs=0",null,"sessionSettingsPopupDivContainer",function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:"Session Settings"}):($("#sessionSettingsPopupDivContainer").css("visibility","visible").show(),$namespace.DomUtil.positionBlockCentrally("sessionSettingsPopupDivContainer"),
$("#globalsCategory").off("change").on("change",$.proxy(b,"displayGlobalKeys")),$("#UpdateFlag").off("click").on("click",$.proxy(b,"updateSessionSettings")),$(".actionButton:first-child").off("click").on("click",$.proxy(b,"closeSessionSettingsPopup")),$('img[alt="Close"]').off("click").on("click",$.proxy(b,"closeSessionSettingsPopup")))})};this.compareCruiseFlags=function(a,b){var d=!1;a.forEach(function(a,f){a.flagName.includes("RESPONSIVE_CRUISE")&&a.flagName==b[f].flagName&&a.flagValue!=b[f].flagValue&&
(d=!0)});return d}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SessionTimeoutDetector=new function(){this.TranslationTexts={SESSION_ENDED_DUE_TO_INACTIVITY_MESSAGE: "Due to inactivity, your session has ended",SESSION_WILL_END_DUE_TO_INACTIVITY_MESSAGE: "Due to inactivity, your session will end in $numberOfSeconds seconds",BEGIN_NEW_SESSION_MESSAGE: "BEGIN NEW SESSION",CONTINUE_SESSION_MESSAGE: "CONTINUE SESSION",SESSION_ABOUT_TO_EXPIRE_TITLE: "Session About to Expire",SESSION_EXPIRED_TITLE: "Session Expired"};var TranslationTexts = this.TranslationTexts;
;var a=1E3*($namespace.GlobalConstants.SESSION_TIMEOUT_INTERVAL-70),b=0,d=0,e=59,f=!1,g=function(){var a=
{title:TranslationTexts.SESSION_ABOUT_TO_EXPIRE_TITLE,text:$namespace.TranslationUtil.replaceParameters(TranslationTexts.SESSION_WILL_END_DUE_TO_INACTIVITY_MESSAGE,{numberOfSeconds:59}),button:TranslationTexts.CONTINUE_SESSION_MESSAGE};$namespace.MessageUtil.showSessionWarningMessage(a,k,!0);$namespace.Analytics.trackPageView("/msg/alert/Inactivity_Session_Countdown_Window")},h=function(){g();b=window.setInterval(function(){--e;if(0>=e){f=!0;$namespace.SessionTimeoutDetector.stopSessionTimeoutTimer();
var a={title:TranslationTexts.SESSION_EXPIRED_TITLE,text:TranslationTexts.SESSION_ENDED_DUE_TO_INACTIVITY_MESSAGE,button:TranslationTexts.BEGIN_NEW_SESSION_MESSAGE};$namespace.MessageUtil.updateSessionWarningMessage(a,p);$namespace.AjaxUtil.makeAjaxCall("","h=4",null,null,null,"");$namespace.Analytics.trackPageView("/msg/alert/Due_To_Inactivity_Your_Session_Has_Ended")}else a={title:TranslationTexts.SESSION_ABOUT_TO_EXPIRE_TITLE,text:$namespace.TranslationUtil.replaceParameters(TranslationTexts.SESSION_WILL_END_DUE_TO_INACTIVITY_MESSAGE,
{numberOfSeconds:e}),button:TranslationTexts.CONTINUE_SESSION_MESSAGE},$namespace.MessageUtil.updateSessionWarningMessage(a,l)},1E3)};this.stopSessionTimeoutTimer=function(){window.clearTimeout(d);d=0;window.clearInterval(b);b=0;e=59};this.startSessionTimeoutTimer=function(b,e){f||0!=d||/\bh=4\b/i.test(e.queryString)||(d=window.setTimeout(function(){($namespace.Navigation.isWorkflowPage()||$namespace.Navigation.userIsLoggedIn())&&h()},a));return!0};this.initializeSessionTimeoutWarning=function(){$namespace.AsynchronousConnectionUtil.addRequestEventHandler("SessionTimeout.stopSessionTimeoutTimer",
this.stopSessionTimeoutTimer);$namespace.AsynchronousConnectionUtil.addResponseEventHandler("SessionTimeout.startSessionTimeoutTimer",this.startSessionTimeoutTimer);$(document).ajaxSend(this.stopSessionTimeoutTimer);$(document).ajaxComplete(this.startSessionTimeoutTimer)};var k=function(){$namespace.AjaxUtil.makeAjaxCall("default.act",null,null,null,null,"")},l=function(){$namespace.AjaxUtil.makeAjaxCall("default.act",null,null,null,null,"");$namespace.Analytics.trackEvent("Session_Timeout","Session_Popup",
"Continue","")},p=function(){window.location.href==$namespace.Configuration.webLoc+"/"?AjaxUtil.makeAjaxCall("default.act",null,null,null,null,""):window.location.href=$namespace.Configuration.webLoc+"/"};$(document).ready(function(a){return function(){a.initializeSessionTimeoutWarning();$namespace.Navigation.manageDynamicElements()}}(this))};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Storage={composeKey:function(a,b){return"["+a+"]["+b+"]"},get:function(a,b,d){return window&&window.sessionStorage?window.sessionStorage.getItem(this.composeKey(a,b))||d:d},set:function(a){if(window&&window.sessionStorage)if(3===arguments.length){var b=arguments[1];var d=arguments[2];window.sessionStorage.setItem(this.composeKey(a,b),d.toString())}else if(2===arguments.length)for(b in d=arguments[1],d)if(d.hasOwnProperty(b))try{window.sessionStorage.setItem(this.composeKey(a,b),d[b].toString())}catch(e){try{console.error(e)}catch(f){}}},
remove:function(a,b){if(window&&window.sessionStorage)if(void 0===b){var d,e=[];for(d=0;d<window.sessionStorage.length;d++)b=window.sessionStorage.key(d),0===b.indexOf("["+a+"]")&&e.push(b);for(d=0;d<e.length;d++)window.sessionStorage.removeItem(e[d])}else window.sessionStorage.removeItem(this.composeKey(a,b))},exists:function(a,b){if(window&&window.sessionStorage)if(void 0===b)for(b=0;b<window.sessionStorage.length;b++){if(0===window.sessionStorage.key(b).indexOf("["+a+"]"))return!0}else return void 0!==
this.get(a,b);return!1},dump:function(){if(window&&window.sessionStorage)try{console.log(window.sessionStorage)}catch(a){}},clear:function(){window&&window.sessionStorage&&window.sessionStorage.clear()}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.StringUtil=new function(){this.decodeHTML=function(a){a&&(a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/##34##/g,'"'),a=a.replace(/##39##/g,"'"),a=a.replace(/##60##/g,"<"),a=a.replace(/##62##/g,">"),a=a.replace(/##33##/g,"!"),a=a.replace(/##37##/g,"%"),a=a.replace(/##58##/g,":"),a=a.replace(/##61##/g,"="),a=a.replace(/##145##/g,"`"),a=a.replace(/##63##/g,"?"),a=a.replace(/##125##/g,"}"),a=a.replace(/##123##/g,"{"),a=a.replace(/##91##/g,"["),a=a.replace(/##93##/g,"]"),a=
a.replace(/##40##/g,"("),a=a.replace(/##41##/g,")"),a=a.replace(/##42##/g,"\r"),a=a.replace(/##92##/g,"\\"),a=a.replace(/##36##/g,"$"),a=a.replace(/##38##/g,"\n"),a=a.replace(/##35##/g,"&"),a=a.replace(/&#174;/g,"\u00ae"));return a};this.encodeHTML=function(a){for(;-1!=a.indexOf("'");)a=a.replace("'","##39##");for(;-1!=a.indexOf('"');)a=a.replace('"',"##34##");for(;-1!=a.indexOf("?");)a=a.replace("?","##63##");for(;-1!=a.indexOf("}");)a=a.replace("}","##125##");for(;-1!=a.indexOf("{");)a=a.replace("{",
"##123##");for(;-1!=a.indexOf("[");)a=a.replace("[","##91##");for(;-1!=a.indexOf("]");)a=a.replace("]","##93##");for(;-1!=a.indexOf("(");)a=a.replace("(","##40##");for(;-1!=a.indexOf(")");)a=a.replace(")","##41##");for(;-1!=a.indexOf("\n");)a=a.replace("\n","##38##");for(;-1!=a.indexOf("\r");)a=a.replace("\r","##42##");for(;-1!=a.indexOf("\\");)a=a.replace("\\","##92##");for(;-1!=a.indexOf("$");)a=a.replace("$","##36##");a=a.replace(/</g,"##60##");a=a.replace(/>/g,"##62##");a=a.replace(/!/g,"##33##");
a=a.replace(/%/g,"##37##");a=a.replace(/&/g,"##35##");a=a.replace(/:/g,"##58##");a=a.replace(/=/g,"##61##");return a=a.replace(/`/g,"##145##")};this.trim=function(a){null!=a&&(a=(a+"").replace(/^\s+|\s+$/g,""));return a};this.escapeNonAsciiChars=function(a){var b=a;if(null!=a){b="";for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);b+=127<e||43==e||37==e?"&#x"+Number(e).toString(16)+";":a.charAt(d)}}return escape(b)};this.isAltLanguageKeyCode=function(a){switch(a){case 192:case 194:case 196:case 198:case 199:case 200:case 201:case 202:case 203:case 206:case 207:case 212:case 214:case 217:case 219:case 220:case 224:case 226:case 228:case 230:case 231:case 233:case 232:case 234:case 235:case 238:case 239:case 244:case 246:case 249:case 251:case 252:case 255:case 338:case 339:case 376:case 168:case 170:case 180:case 186:case 193:case 195:case 197:case 204:case 205:case 210:case 211:case 213:case 216:case 218:case 225:case 227:case 229:case 236:case 237:case 242:case 243:case 245:case 248:case 250:case 256:case 257:case 262:case 263:case 268:case 269:case 274:case 275:case 278:case 279:case 280:case 281:case 298:case 299:case 302:case 303:case 332:case 333:case 362:case 363:case 710:case 715:return!0}return!1};
this.removeDiacritics=function(a){var b={A:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g,AA:/[\uA732]/g,AE:/[\u00C6\u01FC\u01E2]/g,AO:/[\uA734]/g,AU:/[\uA736]/g,AV:/[\uA738\uA73A]/g,AY:/[\uA73C]/g,B:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g,C:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g,
D:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g,DZ:/[\u01F1\u01C4]/g,Dz:/[\u01F2\u01C5]/g,E:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,F:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g,G:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g,H:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g,
I:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g,J:/[\u004A\u24BF\uFF2A\u0134\u0248]/g,K:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g,L:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g,LJ:/[\u01C7]/g,Lj:/[\u01C8]/g,M:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g,N:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g,
NJ:/[\u01CA]/g,Nj:/[\u01CB]/g,O:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g,OI:/[\u01A2]/g,OO:/[\uA74E]/g,OU:/[\u0222]/g,P:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g,Q:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g,R:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g,
S:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g,T:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g,TZ:/[\uA728]/g,U:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g,V:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g,VY:/[\uA760]/g,
W:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g,X:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g,Y:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g,Z:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g,a:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,
aa:/[\uA733]/g,ae:/[\u00E6\u01FD\u01E3]/g,ao:/[\uA735]/g,au:/[\uA737]/g,av:/[\uA739\uA73B]/g,ay:/[\uA73D]/g,b:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g,c:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g,d:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g,dz:/[\u01F3\u01C6]/g,e:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g,
f:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g,g:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g,h:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g,hv:/[\u0195]/g,i:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g,j:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g,k:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g,
l:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g,lj:/[\u01C9]/g,m:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g,n:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g,nj:/[\u01CC]/g,o:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g,
oi:/[\u01A3]/g,ou:/[\u0223]/g,oo:/[\uA74F]/g,p:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g,q:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g,r:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g,s:/[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g,ss:/[\u00DF]/g,t:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g,tz:/[\uA729]/g,
u:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g,v:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g,vy:/[\uA761]/g,w:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g,x:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g,y:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g,z:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},
d;for(d in b)a=a.replace(b[d],d);return a}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.TabNavigation=new function(){};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.TranslationUtil=new function(){this.replaceParameters=function(b,d){"string"==typeof b?b=a(b,d):"object"==typeof b&&(b.sourceText&&(b.sourceText=a(b.sourceText,d)),b.translatedText&&(b.translatedText=a(b.translatedText,d)),b.text&&(b.text=a(b.text,d)),b.analyticsText&&(b.analyticsText=a(b.analyticsText,d)));return b};var a=function(a,d){if(d)for(var b in d)a=a.replace(new RegExp("\\$"+b,"g"),d[b]);return a}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.URLUtil=new function(){this.queryStringToJSON=function(){var a={},b;location.search.slice(1).split("&").forEach(function(d){d=d.split("=");b=d[1]?d[1].replace(/\+/g," "):"";a[d[0]]=decodeURIComponent(b)});return JSON.parse(JSON.stringify(a))}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.EnhancedSeatMapUtil=new function(){this.TranslationTexts={DEFAULT_ERROR: "There was an error retrieving the seat map for the selected flight.<BR>Please close this window and try again.",GALLEY_ROW_LABEL: "Galley: row $noTranslate1",LAVATORY_ROW_LABEL: "Lavatory: row $noTranslate1",CLOSET_ROW_LABEL: "Closet: row $noTranslate1",EXIT_ROW: "Exit Row",PREMIUM_SEAT_BUTTON: "Premium/Paid Seat $noTranslate1",UNAVAILABLE_SEAT_BUTTON: "Seat $noTranslate1 - unavailable",AVAILABLE_SEAT_BUTTON: "Seat $noTranslate1",SEATMAP_UNAVAILABLE: "Seat map is not available.",LEFT_WING_ROW: "Left wing rows $noTranslate1-$noTranslate2",RIGHT_WING_ROW: "Right wing rows $noTranslate1-$noTranslate2",SEAT_MAP_TEXT: "Seat Map"};var TranslationTexts = this.TranslationTexts;
;var a=
{};this.addCallback=function(b,e){a[b]=e};var b=!1;this.ignorePageScroll=function(a){b=a};this.EnhancedSeatMap=function(){arg=arguments.length?arguments[0]:{};this.hasError=!1;this.lastSelectedSeat=null;this.config=cwctravel.core.ObjectUtil.cloneObject(this.defaults,arg);this.config.imagePath.length&&this.config.imagePath.lastIndexOf("/")<this.config.imagePath.length-1&&(this.config.imagePath+="/");this.megatip=this.config.megatip;this.container=this.config.parentElement;var a=function(a){return function(){a.loadData()}}(this);
this.tmr=window.setTimeout(a,200);this.myCabins=null};this.EnhancedSeatMap.prototype.defaults={dataUrl:"",defaultErrorMsg:this.TranslationTexts.DEFAULT_ERROR,exitRowColor:"#E1B3B3",flightItemUid:"",flightSegmentItemUid:"",imagePath:"/shared/images/icons/flightSeatMaps/",mode:"JSON",parentElement:document.body,leftWing:null,rightWing:null,megatip:null,loadUnselectedOption:0};this.EnhancedSeatMap.prototype.createSeat=function(){if(arguments.length){var a=arguments[0];var b=arguments[1];var f="undefined"==
typeof a.name?0:a.name;var g="undefined"==typeof a.rowNumber?0:parseInt(a.rowNumber);var h="undefined"==typeof a.isAvailable?!0:a.isAvailable;var k="undefined"==typeof a.isExitRow?!1:a.isExitRow;var l="undefined"==typeof a.isPremium?!1:a.isPremium;var p="undefined"==typeof a.chargeable?!1:a.chargeable;var q="undefined"==typeof a.isVisible?!0:a.isVisible;var r="undefined"==typeof a.noSeat?!1:a.noSeat;var v="undefined"==typeof a.inoperative?!1:a.inoperative;var n="undefined"==typeof a.galley?!1:a.galley;
var t="undefined"==typeof a.lavatory?!1:a.lavatory;var u="undefined"==typeof a.closet?!1:a.closet;a=g+f;var w={galley:"<img src='shared/images/svg/svg-galley-white.svg' alt='' />",lavatory:"<img src='shared/images/svg/svg-lavatory-white.svg' alt='' />",closet:"<img src='shared/images/svg/svg-closet-white.svg' alt='' />",premium:"<img src='shared/images/svg/svg-premium-white.svg' alt='' />",unavailable:"<img src='shared/images/svg/svg-unavailable-blue.svg' alt='' />"};f&&g&&(b=$('<td class="flight-seatmap--grid-cell"></td>').prependTo(b),
f=$('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(b),n?($('<div class="galley" tabindex="-1">'+w.galley+"</div>").appendTo(f),b.attr({"aria-label":TranslationTexts.GALLEY_ROW_LABEL.replace("$noTranslate1",g)})):t?($('<div class="lavatory" tabindex="-1">'+w.lavatory+"</div>").appendTo(f),b.attr({"aria-label":TranslationTexts.LAVATORY_ROW_LABEL.replace("$noTranslate1",g)})):u?($('<div class="closet" tabindex="-1">'+w.closet+"</div>").appendTo(f),b.attr({"aria-label":TranslationTexts.CLOSET_ROW_LABEL.replace("$noTranslate1",
g)})):q&&!r&&(g="",k&&(g=TranslationTexts.EXIT_ROW+" "),l||p?(g+=TranslationTexts.PREMIUM_SEAT_BUTTON.replace("$noTranslate1",a),h=$('<button type="button" class="seat-button premium" disabled>'+w.premium+'<span class="ada-screenreader">'+g+"</span></button>").appendTo(f)):!h||v?(g+=TranslationTexts.UNAVAILABLE_SEAT_BUTTON.replace("$noTranslate1",a),h=$('<button type="button" class="seat-button unavailable" disabled>'+w.unavailable+'<span class="ada-screenreader">'+g+"</span></button>").appendTo(f)):
(g+=TranslationTexts.AVAILABLE_SEAT_BUTTON.replace("$noTranslate1",a),h=$('<button type="button" class="seat-button available" disabled><span class="ada-screenreader">'+g+"</span></button>").appendTo(f)),h.attr("data-seat-id",a),h.appendTo(f)))}};this.EnhancedSeatMap.prototype.loadData=function(){var a=jQuery,b=cwctravel.core.StringUtil;window.clearTimeout(this.tmr);this.hasError=!1;$namespace.DomUtil.setElementLoadingMask(!0);if(arguments.length)this.config.dataUrl=b.trim(arguments[0]),b=function(a){return function(){a.loadData()}}(this),
this.tmr=window.setTimeout(b,200);else if(this.config.dataUrl.length){b=function(b){return function(d){b.render(this.responseText);a(window).trigger("ct.seatMap.loaded")}}(this);var f=queryString=this.config.dataUrl,g=f.indexOf("?");0<g?(f=f.substr(0,g),queryString=queryString.substr(g+1)):queryString="";$namespace.AjaxUtil.makeAjaxCall(f,queryString,null,null,b)}else this.showError(this.config.defaultErrorMsg)};this.EnhancedSeatMap.prototype.showError=function(a){this.hasError=!0;this.config.loadUnselectedOption?
this.megatip.find('.panel[data-segment="'+this.config.loadUnselectedOption+'"]').find(".legendContainerMobile").empty():this.megatip.find(".panel.active").find(".legendContainerMobile").empty();this.container.find("DIV.error").remove();var b=this.container.closest("[id^=seatMapAndLegendContainer]");a=b.empty().append($('<DIV CLASS="error alert alert-warning"><TABLE HEIGHT="100%" WIDTH="100%" role="region" aria-label="'+TranslationTexts.SEAT_MAP_TEXT+'"><TR><TD>'+a+"</TD></TR></TABLE></DIV>"));b.siblings("[id^=flightInfoMobile]").removeClass("displayNone");
$namespace.DomUtil.setElementLoadingMask(!1,1);a.length&&$(window).scrollTop(a.offset().top)};this.EnhancedSeatMap.prototype.parseJSONData=function(a){try{a=a.substring(a.indexOf("{"),a.lastIndexOf("}")+1);var b=JSON.parse(a);var d=JSON.parse(b.callbackFunctionParameters[0]);return[d[0]]}catch(g){b&&b.callbackFunctionParameters&&b.callbackFunctionParameters.length&&b.callbackFunctionParameters[0].statusInfos&&b.callbackFunctionParameters[0].statusInfos.length?this.showError(b.callbackFunctionParameters[0].statusInfos[0].messageText):
this.showError(TranslationTexts.SEATMAP_UNAVAILABLE),this.setPreviousAndNextButtonVisibility()}};this.EnhancedSeatMap.prototype.setPreviousAndNextButtonVisibility=function(){var a=this.megatip.find('select[id^="selectFlight"]'),b=a.find("option:selected").index();a=a.find("option");0==b?(this.megatip.find("#previousFlight").hide(),1==a.length?this.megatip.find("#nextFlight").hide():this.megatip.find("#nextFlight").show()):0<b&&b<a.length-1?(this.megatip.find("#previousFlight").show(),this.megatip.find("#nextFlight").show()):
b==a.length-1&&(this.megatip.find("#previousFlight").show(),this.megatip.find("#nextFlight").hide())};this.EnhancedSeatMap.prototype.getPlaceHolders=function(a){var b=[];if(2==a.length&&a[0].nameSeats.length<a[1].nameSeats.length)for(var d=0,g=0;d<a[0].nameSeats.length&&g<a[1].nameSeats.length;)a[0].nameSeats[d].name!=a[1].nameSeats[g].name?b.push(d):d++,g++;return b};this.EnhancedSeatMap.prototype.updateLegend=function(){var a={galley:0,lavatory:0,closet:0},b=this.megatip.find('select[id^="selectFlight"] option:selected'),
f;for(f in a)a[f]=+b.attr("data-"+f);for(f in a)b=a[f]?"show":"hide",this.megatip.find("."+f+"Seat")[b]()};this.EnhancedSeatMap.prototype.setLegendValues=function(a){if(a){for(var b=[],d={galley:0,lavatory:0,closet:0},g=0;g<a.length;g++)b=b.concat(a[g].rows);for(g in b){a=b[g].seats;for(var h in a){var k=a[h];k.galley?d.galley++:null;k.lavatory?d.lavatory++:null;k.closet?d.closet++:null}}b=this.megatip.find('select[id^="selectFlight"]');b=this.config.loadUnselectedOption?$(b[0][this.config.loadUnselectedOption-
1]):b.find("option:selected");for(g in d)b.attr("data-"+g,d[g])}};this.EnhancedSeatMap.prototype.render=function(d){var e=jQuery;if(arguments.length){var f=cwctravel.core.ArrayUtil,g="JSON"==this.config.mode?this.parseJSONData(arguments[0]):arguments[0];if(g&&g.length&&(g=g[0])&&g.deckInfos){var h=this.megatip.find('select[id^="selectFlight"]');(h=this.config.loadUnselectedOption?e(h[this.config.loadUnselectedOption-1]):h.find("option:selected"))&&h.data("seat-available",g.seatsAvailable);this.seats=
{};h=0;var k=Math.floor(20*Math.random())+10;for(h=0;h<g.deckInfos.length;h++){var l=g.deckInfos[h];this.fuselage=e("<table id='fuselage_"+h+k+"' class='fuselage' role='presentation'></table>").prependTo(this.container);for(var p,q,r=this.getPlaceHolders(l.cabins),v=0;v<l.cabins.length;v++){var n=l.cabins[v];p=n.wingStartRowNumber?+n.wingStartRowNumber:0;q=n.wingEndRowNumber?+n.wingEndRowNumber:0;if(0===p)for(var t=0;t<n.rows.length;t++){var u=n.rows[t],w=parseInt(u.number);u.type&&"overwingrow"===
u.type.toLowerCase()&&(0===p?p=w:q=w)}w=e('<tr class="flight-seatmap--grid-row"></tr>');var y=e('<td class="flight-seatmap--grid-cell"></td>').appendTo(w);e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(y);this.fuselage.append(w);for(t=0;t<n.nameSeats.length;t++){if(0==v&&r.includes(t)){var z=e('<th class="flight-seatmap--grid-cell first-seat-name_'+h+v+'"></th>');z.append(e('<div class="flight-seatmap--grid-cell-inner">\x3c!-- placeholder --\x3e</div>'));w.append(z)}z=e('<th class="flight-seatmap--grid-cell first-seat-name_'+
h+v+'"></th>');"SEAT"==n.nameSeats[t].type?z.append(e('<div class="flight-seatmap--grid-cell-inner">'+n.nameSeats[t].name+"</div>")):z.append(e('<div class="flight-seatmap--grid-cell-inner">\x3c!-- aisle --\x3e</div>'));w.append(z)}var x=e('<td class="flight-seatmap--grid-cell"></td>').appendTo(w);e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(x);0<v&&(u=n.rows[0],w=parseInt(u.number)-1,w===p?(y.addClass("left-wing-start").removeClass("exit-row"),x.addClass("right-wing-start").removeClass("exit-row")):
w===q?(y.addClass("left-wing-end").removeClass("exit-row"),x.addClass("right-wing-end").removeClass("exit-row")):w>p&&w<q&&(y.addClass("left-wing-middle").removeClass("exit-row"),x.addClass("right-wing-middle").removeClass("exit-row")));for(t=0;t<n.rows.length;t++)if(u=n.rows[t],w=parseInt(u.number),0!=w&&w>=parseInt(n.startRowNumber)&&w<=parseInt(n.endRowNumber)){var B=e('<tr class="flight-seatmap--grid-row"></tr>');x=e('<td class="flight-seatmap--grid-cell"></td>').prependTo(B);x.addClass("plane-right-side");
e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(x);for(y=0;y<u.seats.length;y++)0==v&&r.includes(y)&&(z=e('<td class="flight-seatmap--grid-cell"></td>').prependTo(B),z=e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(z),e('<span class="placeholder"></span>').appendTo(z)),z=n.rows[t].seats[y],"SEAT"==z.type?(z.rowNumber=w,"A-"==z.name.substr(0,2)&&(z.isVisible=!1),this.createSeat(z,B)):(z=e('<td class="flight-seatmap--grid-cell"></td>').prependTo(B),z=e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(z),
e('<span class="row-number"></span>').appendTo(z));B.find("button").length&&B.find(".row-number").text(n.rows[t].number);f.contains(n.exitRowNumbers,w)&&B.find("td").addClass("exit-row");y=e('<td class="flight-seatmap--grid-cell"></td>').prependTo(B);y.addClass("plane-left-side").removeClass("exit-row");x.removeClass("exit-row");e('<div class="flight-seatmap--grid-cell-inner"></div>').appendTo(y);u=TranslationTexts.LEFT_WING_ROW.replace("$noTranslate1",p).replace("$noTranslate2",q);z=TranslationTexts.RIGHT_WING_ROW.replace("$noTranslate1",
p).replace("$noTranslate2",q);w===p?(y.addClass("left-wing-start").removeClass("exit-row").attr({"aria-label":u}),x.addClass("right-wing-start").removeClass("exit-row").attr({"aria-label":z})):w===q?(y.addClass("left-wing-end").removeClass("exit-row").attr({"aria-label":u}),x.addClass("right-wing-end").removeClass("exit-row").attr({"aria-label":z})):w>p&&w<q&&(y.addClass("left-wing-middle").removeClass("exit-row").attr({"aria-label":u}),x.addClass("right-wing-middle").removeClass("exit-row").attr({"aria-label":z}));
this.fuselage.append(B)}p=100/(n.nameSeats.length+2);this.fuselage.find("td").css("width",p+"%")}this.setLegendValues(l.cabins);this.updateLegend()}this.megatip.find(".airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px");$namespace.Browser.isIpadOrAndroid()||this.megatip.find("div.flight-module-title > h3")}}else this.showError(this.config.defaultErrorMsg);$namespace.DomUtil.setElementLoadingMask(!1,1);this.setPreviousAndNextButtonVisibility();
_.each(a,function(a){a()});b||(f=0<e("#flightSearch > section.info-bar > div.initialized").length,g=(g=e('div.megatip.active[data-uid="'+this.config.flightItemUid+'"] div.accordion.seatMap').offset())?g.top:0,f=f?e("#flightSearch > section.info-bar").height():0,nScrollTo=g-f-36,e(window).scrollTop(nScrollTo))};this.getWindowEvent=function(){var a=window.event;if(null==a)for(var b=0;b<window.frames.length&&(a=window.frames[b].event,null==a);b++);return a}};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.EventUtil=new function(){this.isNumericKeystroke=function(a){var b=a.which;return 47<b&&58>b||8==b||9==b||$namespace.EventUtil.isDeleteKey(a)||37==b||39==b?!0:!1};this.isDeleteKey=function(a){if("keypress"==a.type){if(46==a.keyCode&&0==a.charCode)return!0}else if(("keyup"==a.type||"keydown"==a.type)&&46==a.keyCode)return!0;return!1};this.selectInputOnFocus=function(){var a=function(a){return function(){window.clearTimeout(a.focusTmr);a.setSelectionRange(0,a.value.length)}}(this);this.focusTmr=
window.setTimeout(a,1)};this.trimInputValueOnBlur=function(){this.value=$.trim(this.value)};this.getPastedText=function(a){var b=void 0;window.clipboardData&&window.clipboardData.getData?b=window.clipboardData.getData("text"):a.clipboardData&&a.clipboardData.getData&&(b=a.clipboardData.getData("text/plain"));return b}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Validation=new function(){var a=this;this.isAlphaNumericKeyCode=function(b){b=b||window.event;var d=void 0==b.charCode||0==b.charCode?b.keyCode:b.charCode;return 96<d&&123>d||64<d&&91>d||47<d&&58>d||9==d||a.isBackspaceOrArrow(b)};this.isBackspaceOrArrow=function(a){var b=void 0==a.charCode||0==a.charCode?a.keyCode:a.charCode;return 0==a.charCode&&(37==a.keyCode||39==a.keyCode)||8==b};this.isNull=function(a){return void 0==a||null==a?!0:!1};this.isBlankOrNull=function(a){return void 0==
a||null==a||""==a.toString()?!0:!1};this.isSpaceInFirstInput=function(a){return 32===(a?a.which:window.event.keyCode)&&0===a.target.selectionStart?!0:!1};this.isPersonNameKeyCode=function(a){a=a||window.event;a=void 0==a.charCode||0==a.charCode?a.keyCode:a.charCode;return 8==a||9==a||32==a||39==a||44<a&&47>a||64<a&&91>a||96<a&&123>a?!0:$namespace.StringUtil.isAltLanguageKeyCode(a)};this.isCityNameKeyCode=function(a){a=a||window.event;a=void 0==a.charCode||0==a.charCode?a.keyCode:a.charCode;return 32==
a||64<a&&91>a||96<a&&123>a||44<a&&47>a||39==a?!0:$namespace.StringUtil.isAltLanguageKeyCode(a)};this.isStreetAddressKeyCode=function(b){if(a.isAlphaNumericKeyCode(b))return!0;b=b||window.event;b=void 0==b.charCode||0==b.charCode?b.keyCode:b.charCode;return 8==b||32==b||35==b||39==b||44==b||44<b&&48>b?!0:$namespace.StringUtil.isAltLanguageKeyCode(b)};this.isDeleteKey=function(a){if("keypress"==a.type){if(46==a.keyCode&&0==a.charCode)return!0}else if(("keyup"==a.type||"keydown"==a.type)&&46==a.keyCode)return!0;
return!1};this.checkNumericKeyCode=function(b){b=b||window.event;var d=void 0==b.charCode||0==b.charCode?b.keyCode:b.charCode;return 47<d&&58>d||9==d||46==b.keyCode&&0==b.charCode||$namespace.Validation.isDeleteKey(b)||a.isBackspaceOrArrow(b)};this.validateEmail=function(a,d){$namespace.MessageUtil.clearErrorElements();a=document.getElementById(a);a=$.trim(a.value);return""==a||$namespace.Utils.isValidEmail(a)?!0:!1};this.isBackspaceKey=function(a){a=a||window.event;return 8==(void 0==a.charCode||
0==a.charCode?a.keyCode:a.charCode)};this.isCurrencyValueMasked=function(a){return-1!==$("#"+a).val().indexOf(",")?!0:!1};this.isFloat=function(a){return/^((\d+(\.\d*)?)|((\d*\.)?\d+))$/.test(a)}};

	})(CT, {});
		
	window.ChatApi=new function(){this.trackSalesConversion=function(a,b){$namespace.AjaxUtil.makeAjaxCall($namespace.GlobalConstants.CHAT_NET_AGENT_URL+"/NetAgent/salesconversion.aspx","SalesConversion=**"+a+"**"+b+"**0**0**",null,null,null,null,null,!0)};this.showChatAvailable=function(){this.showAndHideChatElements(["needHelpBannerChatNow","agentExpertsInfo"],["needHelpBannerCallTollFree","needHelpBannerWeekdays","needHelpBannerWeekends"])};this.showChatNotAvailable=function(){this.showAndHideChatElements(["needHelpBannerCallTollFree",
"needHelpBannerWeekdays","needHelpBannerWeekends"],["needHelpBannerChatNow","agentExpertsInfo"])};this.showAndHideChatElements=function(a,b){for(var d=0;d<a.length;d++){var e=document.getElementById(a[d]);null!=e&&($(e).addClass("displayBlock"),$(e).removeClass("displayNone"))}for(d=0;d<b.length;d++)e=document.getElementById(b[d]),null!=e&&($(e).addClass("displayNone"),$(e).removeClass("displayBlock"))};this.loadMoxieChat=function(a,b){var d=!1;if("undefined"!=typeof DetectDevice){detectDone=!1;for(var e in window.json){var f=
window.json[e];if(f&&(f.bopennew=!1,f=f.devicedetectionlist))for(var g in f)f[g].hidebranding=!0}DetectDevice(a,"chatClient","Live chat by","Moxie Software");a=$("span[id='chatClient']");if(a.length&&(b=a.html().replace("cimlogin.aspx?","cimlogin.aspx?"+b+"&").replace(/http:\/\/costco/ig,"https://costco"),a.html(b).find("a[target='_blank']").remove(),a.find("IMG").on("error",function(){ChatApi.showChatNotAvailable()}),b=a.find("A"),b.length)){var h=b.get(0).getAttribute("href");h&&($('A[id="chatNowLink"]').on("click",
function(a){var b=h.split("?");a=b[0];var d=b[1].split("&");b=[];for(var e=0;e<d.length;e++){var f=d[e].split("=");b.push(f[0]);b[f[0]]=f[1]}d=document.createElement("form");d.target="postWin";d.method="POST";d.action=a;d.style.display="none";for(var g in b)a=document.createElement("input"),a.type="hidden",a.name=g,a.value=b[g],d.appendChild(a);document.body.appendChild(d);window.open("","postWin","resizable=yes,width=625,height=875,scrollbars=yes,noopener,noreferrer");window.opener=null;d.submit();
document.body.removeChild(d);$("a#chatNowLink").trigger(window.ChatApi.chatLinkClickEvent);return!1}),d=!0)}}d?this.showChatAvailable():this.showChatNotAvailable()}};window.ChatApi.chatLinkClickEvent="chatLinkClickEvent";

	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MapUtil=new function(){this.TranslationTexts={MAP_IMAGE_ALT_TEXT: "Map image for $destinationName",MAP_IMAGE_ALT_TEXT_RENTAL_CAR_LOCATIONS: "Rental car locations",MAP_IMAGE_ALT_TEXT_TRAIN_STATION: "Train Station",MAP_IMAGE_ALT_TEXT_AIRPORTS: "Airports",MAP_IMAGE_ALT_TEXT_LANDMARK: "Landmark",MAP_IMAGE_ALT_TEXT_CITY: "City/Region"};var TranslationTexts = this.TranslationTexts;
;this.mapCanvas=this.container=null;this.initialized=!1;this.addOnClickWarehousePopupToElement=function(a,b){a.style.cursor=
"pointer";a.onclick=function(a){return function(){"COSTCO"==a.Name.toUpperCase()&&a.Target.match(/^\d+$/)?window.open("http://www.costco.com/WarehouseLocatorDetailsView?storeId=10301&warehouseNumber="+a.Target,"costcoWin"):window.open("http://www.costco.com/WarehouseLocatorView?storeId=10301&location="+a.Target,"costcoWin")}}(b)};this.callbackLoadMarkersOnMap=function(a){if("undefined"!=a&&0<a.length){this.mapAndMarkerData=a;$("div.mapUtilTooltip").length||(this.tooltip=document.createElement("DIV"),
this.tooltip.className="mapUtilTooltip",this.tooltip.style.display="none",this.tooltip.label=document.createElement("DIV"),this.tooltip.appendChild(this.tooltip.label),this.lastTooltip=null,document.body.appendChild(this.tooltip));this.mapContext=this.mapCanvas=null;$namespace.Browser.supportsHTML5()&&(this.mapCanvas=this.container.querySelectorAll("#mapCanvas")[0],this.mapCanvas.style.top=this.mapCanvas.style.left="0px",this.mapCanvas.style.position="absolute",this.mapCanvas.setAttribute("height",
370),this.mapCanvas.setAttribute("width",455),this.mapCanvas.style.zIndex=1);for(var b=0;b<this.mapAndMarkerData.length;b++)if(a=this.mapAndMarkerData[b],"MAP"==a.Type.toUpperCase()){this.mapImage=this.container.querySelectorAll("#regionMapImage")[0];$namespace.Browser.supportsHTML5()&&(this.mapImage.onload=function(a){return function(){20<a.mapImage.offsetHeight&&20<a.mapImage.offsetWidth&&(a.mapCanvas.setAttribute("height",a.mapImage.offsetHeight),a.mapCanvas.setAttribute("width",a.mapImage.offsetWidth))}}(this));
this.mapImage.src=this.getUriPathFromWebRoot("/content/_legacy/shared/"+a.ImageLocation);b=a.ImageLocation.lastIndexOf("/")+1;var d=a.ImageLocation.indexOf(".");a=$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.MAP_IMAGE_ALT_TEXT,{destinationName:a.ImageLocation.substring(b,d)});this.mapImage.alt=a;a=function(a){return function(){a.makeSureInitializationIsComplete()}}(this);this.tmr=window.setTimeout(a,10);return}}a=document.createElement("DIV");a.innerHTML="No map available for this region.";
a.className="tac pt50 b";this.container.replaceWith(a);$(".map-legend-tooltip-desk").hide()};this.finishDrawingMapMarkers=function(){var a=0,b=this.mapImage.width,d=this.mapImage.height,e=1;this.mapImage.offsetLeft&&(a=this.mapImage.offsetLeft,this.mapCanvas&&(this.mapCanvas.style.left=a+"px"));$namespace.Browser.supportsHTML5()&&(this.mapContext=this.mapCanvas.getContext("2d"),this.mapContext.fillStyle=this.mapContext.strokeStyle="#FF0000",this.mapContext.lineWidth=1);for(var f=0;f<this.mapAndMarkerData.length;f++){var g=
this.mapAndMarkerData[f],h=g.Type.toUpperCase(),k=parseInt(g.Coordinate_X)+a,l=parseInt(g.Coordinate_Y),p=(parseInt(g.Coordinate_X)+a)/b*100,q=parseInt(g.Coordinate_Y)/d*100,r="undefined"==typeof g.Arrow_X?null:parseInt(g.Arrow_X)+a,v="undefined"==typeof g.Arrow_Y?null:parseInt(g.Arrow_Y),n="undefined"==typeof g.Arrow_X?null:(parseInt(g.Arrow_X)+a)/b*100,t="undefined"==typeof g.Arrow_Y?null:parseInt(g.Arrow_Y)/d*100,u=((null==r?k:r)-5)/b*100+"%",w=((null==v?l:v)-5)/d*100+"%";if("LABEL"==h)l=document.createElement("DIV"),
l.style.left=(null==n?p:n)+"%",l.style.top=(null==t?q:t)+"%",l.style.position="absolute",l.className="mapLabel",l.style.zIndex=100,this.container.appendChild(l),q=document.createElement("A"),q.href=this.getUriPathFromWebRoot(g.Target),q.title=q.innerHTML=g.Name,q.id="mapUtil_marker",q.name="mapUtil_marker",q.setAttribute("data-taborder","document"),l.appendChild(q);else if("HOTEL"==h){if(u=document.createElement("A"),u.style.left=(null==n?p:n)+"%",u.style.top=(null==t?q:t)+"%",u.innerHTML=e++ +' <span class="ada-screenreader">'+
g.Name+"</span>",u.style.position="absolute",u.className=this.hotelId&&this.hotelId!=g.Id?"hovertip number-mark-otherHotelMark":"hovertip number-mark-hotelMark",u.setAttribute("title",g.Name),u.setAttribute("data-taborder","document"),u.style.zIndex=102,u.href=this.getUriPathFromWebRoot(g.Target),$(u).on("click",function(a){var b=a.currentTarget.pathname,d=b.substring(b.indexOf("Hotels/")+7);$namespace.Analytics.trackEvent("hotel_factsheet_page","click_map",d,null);if(a.target.hasAttribute("target"))var e=
a.target.target;a.preventDefault();e?(window.open(b,e,"noopener,noreferrer"),window.opener=null):window.location.href=b}),this.container.appendChild(u),null!=r&&null!=v){n=r+6-a;w=v+6;g=k+2-a;l+=1;k=g-n;t=l-w;u=Math.sqrt(k*k+t*t);k=n-g;t=w-l;n=0;for(w=10;n<u;n+=.5,w+=.5)v=document.createElement("span"),v.style.left=(Math.floor(g+k*n/u)+a)/b*100+"%",v.style.top=Math.floor(l+t*n/u)/d*100+"%",v.className="hotelLocatorDot",v.style.position="absolute",v.style.width="1px",v.style.height="1px",v.style.backgroundColor=
"#ff0000",v.style.zIndex=w,v.setAttribute("aria-hidden","true"),this.container.appendChild(v);g=document.createElement("DIV");g.style.left=p+"%";g.style.top=q+"%";g.style.backgroundColor="#FF0000";g.className="hotelLocatorDot";g.style.position="absolute";g.style.zIndex=100;g.style.height="3px";g.style.width="3px";this.container.appendChild(g)}}else if("AIRLINE"==h)q=document.createElement("A"),q.style.left=u,q.style.top=w,q.setAttribute("title",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_AIRPORTS+": "+
g.Name),q.style.position="absolute",q.className="hovertip airlineMarker",q.style.zIndex=100,q.setAttribute("data-taborder","document"),this.container.appendChild(q),this.setMapMarkerTooltip(q),p=document.createElement("IMG"),p.src=this.getUriPathFromWebRoot("/shared/images/icons/mapAirline.png"),p.border="0px",p.setAttribute("alt",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_AIRPORTS+": "+g.Name),q.appendChild(p);else if("LANDMARK"==h)q=document.createElement("A"),q.style.left=u,q.style.top=w,q.className=
"hovertip land-mark",q.style.position="absolute",q.style.zIndex=100,q.setAttribute("data-taborder","document"),q.setAttribute("title",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_LANDMARK+": "+g.Name),this.container.appendChild(q),this.setMapMarkerTooltip(q),p=document.createElement("IMG"),p.src=this.getUriPathFromWebRoot("/shared/images/land-mark.png"),p.border="0px",p.setAttribute("alt",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_LANDMARK+": "+g.Name),q.appendChild(p);else if("CAR"==h)q=document.createElement("A"),
q.style.left=u,q.style.top=w,q.style.position="absolute",q.className="hovertip carMarker",q.style.zIndex=100,q.setAttribute("data-taborder","document"),q.setAttribute("title",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_RENTAL_CAR_LOCATIONS+": "+g.Name),this.container.appendChild(q),this.setMapMarkerTooltip(q),p=document.createElement("IMG"),p.src=this.getUriPathFromWebRoot("/shared/images/icons/mapCar.png"),p.border="0px",p.setAttribute("alt",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_RENTAL_CAR_LOCATIONS+
": "+g.Name),q.appendChild(p);else if("RAIL"==h||"TRAIN"==h)q=document.createElement("A"),q.style.left=u,q.style.top=w,q.style.position="absolute",q.className="hovertip train-mark",q.style.zIndex=100,q.setAttribute("data-taborder","document"),q.setAttribute("title",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_TRAIN_STATION+": "+g.Name),this.setMapMarkerTooltip(q),this.container.appendChild(q),p=document.createElement("IMG"),p.src=this.getUriPathFromWebRoot("/shared/images/train-mark.png"),p.border="0px",
p.setAttribute("alt",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_TRAIN_STATION+": "+g.Name),q.appendChild(p);else if("REGION"==h)n="undefined"==typeof g.AreaMarker_X?null:(parseInt(g.AreaMarker_X)+a)/b*100,t="undefined"==typeof g.AreaMarker_Y?null:parseInt(g.AreaMarker_Y)/d*100,null!=n&&null!=t&&(p=document.createElement("A"),p.style.left=n+"%",p.style.top=t+"%",p.style.position="absolute",p.style.zIndex=2,p.className="hovertip region-marker",p.setAttribute("data-title",g.Name),p.setAttribute("title",
g.Name),p.innerHTML="A",p.href=this.getUriPathFromWebRoot(g.Target),p.setAttribute("data-taborder","document"),this.container.appendChild(p)),p=g.Width,isNaN(g.Height)||isNaN(p)||(p=document.createElement("A"),k=(k+2)/b*100,n=(g.Height+Math.min(d-l-g.Height,0))/d*100,l=(g.Width+Math.min(b-l-g.Width,0))/b*100,p.style.top=q+"%",p.style.left=k+"%",p.style.height=n+"%",p.style.width=l+"%",p.setAttribute("data-title",g.Name),p.style.position="absolute",p.style.zIndex=3,p.className="hovertip areaSpaceMarker hand",
p.setAttribute("data-taborder","document"),this.setMapMarkerTooltip(p),q=document.createElement("IMG"),q.src=this.getUriPathFromWebRoot("/shared/images/spacer.gif"),q.style.height="100%",q.style.width="100%",q.style.position="relative",q.setAttribute("alt",this.TranslationTexts.MAP_IMAGE_ALT_TEXT_CITY+": "+g.Name),q.href=this.getUriPathFromWebRoot(g.Target),$(q).on("click",function(a){var b=a.target;a.target.hasAttribute("target")&&(b=a.target.target);a.preventDefault();b&&(window.location.href=b.href)}),
p.appendChild(q),this.container.appendChild(p));else if("COSTCO"==h){if("undefined"==typeof g.Name||""==g.Name)g.Name="Costco";l=document.createElement("A");l.style.left=(null==n?p:n)+"%";l.style.top=(null==t?q:t)+"%";l.setAttribute("title",g.Name);l.className="hovertip costcoMarker hand";l.style.position="absolute";l.style.zIndex=102;l.setAttribute("data-taborder","document");this.setMapMarkerTooltip(l);this.addOnClickWarehousePopupToElement(l,g);this.container.appendChild(l);q=document.createElement("IMG");
q.src=this.getUriPathFromWebRoot("/shared/images/icons/mapCostco.png");q.style.height="8px";q.style.width="25px";q.border="0px";q.setAttribute("alt","");l.appendChild(q)}}this.initialized=!0};this.getUriPathFromWebRoot=function(a){return(_webLoc+"/"+a).replace(/\/{2,}/g,"/")};this.loadMarkersOnMap=function(a,b,d){this.container=document.getElementById(b);this.hotelId=2<arguments.length?d:null;if(this.container){var e=function(a){return function(b){a.callbackLoadMarkersOnMap(b)}}(this);$namespace.AjaxUtil.makeAjaxCall("map.act",
"map=LOAD_REGION_MARKER_DATA&xmlFileName="+a,null,null,e)}};this.makeSureInitializationIsComplete=function(){window.clearTimeout(this.tmr);if(this.mapImage.complete)this.finishDrawingMapMarkers();else{var a=function(a){return function(){a.makeSureInitializationIsComplete()}}(this);this.tmr=window.setTimeout(a,10)}};this.setMapMarkerTooltip=function(a){var b=this;$(a).css({cursor:"pointer"}).on("click",function(a){if($namespace.Browser.isIpadOrAndroid()||$namespace.Browser.iPhone)if("none"===b.tooltip.style.display||
b.lastTooltip!==a.currentTarget){var d=$(a.currentTarget).attr("title");null!=d&&d.length&&(b.tooltip.label.innerHTML=d,b.tooltip.style.left=a.pageX+12+"px",b.tooltip.style.top=a.pageY+8+"px",b.tooltip.style.display="block",b.lastTooltip=a.currentTarget)}else b.tooltip.style.display="none"}).on("blur",function(a){b.tooltip.style.display="none"})}};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.TabOrder=function(){var a={},b=function(b,f){var g=b;b?b instanceof jQuery||(g=$(b)):g=$(document.body);g=d(g);var h;"number"!==typeof f&&(f=0);g.sort(e(f));var k=1;if(b){var r;$("body [tabindex]").size()&&(r=$(_.max($("body [tabindex]"),function(a){return(a=$(a).attr("tabindex"))?parseInt(a):0})));k=r&&0!=r.size()?parseInt(r.attr("tabindex")):1}b={};var v=f=null;for(h=0;h<g.length;++k,h++){r=g[h].element;var n=$(r);var t=n.attr("data-tab-after");n=n.attr("id");if(t)b[t]=r,k--;else if(r.tabIndex=
k+1,v=r,f||(f=r),!_.isEmpty(b))for(r=b[n];r;)k++,r.tabIndex=k+1,delete b[n],n=$(r).attr("id"),v=r,r=b[n]}$namespace.DomUtil.updateLinkElements();f&&v&&(f=$(f),v=$(v),f.parents('[data-set-tab-stops="true"]').length&&($("[data-taborder]:visible").removeAttr("data-tab-first").removeAttr("data-tab-last"),f.attr("data-tab-first","true"),v.attr("data-tab-last","true")));_.each(a,function(a){a()})},d=function(a){a=a.find("[data-taborder]:visible, [data-taborder]:visible:not(.noTabIndex)");var b=[],d;for(d=
0;d<a.length;++d)b.push({element:a[d],index:d});return b},e=function(a){return function(b,d){if(f(b.element)&&f(d.element))return b.index-d.index;b=b.element.getBoundingClientRect();d=d.element.getBoundingClientRect();d=g(b.top,d,a)||g(b.bottom,d,a)||g(d.top,b,a)||g(d.bottom,b,a)?b.left-d.left:b.top-d.top;return d}},f=function(a){a=a.attributes["data-taborder"].value;return""===a||"document"===a},g=function(a,b,d){return a>=b.top-d&&a<=b.bottom+d};return{startAutoUpdate:function(a){var b;updateTabOrder(a);
window.addEventListener("resize",function(){clearTimeout(b);b=setTimeout(function(){updateTabOrder(a)},250)})},updatePageTabOrder:b,updatePopupTabOrder:function(a){b(a)},addCallback:function(b,d){a[b]=d}}}();

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.TabHandler=function(a,b){this.container=a;a instanceof jQuery||(this.container=$(a));this.menuLinkContainer=null;this.timeStamp=Date.now();this.closeCallback=b;this.handleEscape=!0;this.modalTitle=this.itemToFocus=null;this.setPopupInitialFocus=function(){var a=this.container;return function(){a.find('[data-tab-first="true"]:visible').focus()}};this.setPopupKeydownHandler=function(){var a=this;this.itemToFocus||(this.itemToFocus=document.activeElement);this.container.on("keydown.tabOrder_"+this.timeStamp,
function(b){var d=utils.Keyboard,e=$(b.target),h=d.getCode(b);a.handleEscape&&d.ESCAPE==h?(a.destroyPopupEventHandlers(),b.stopPropagation(),"function"!==typeof a.closeCallback?a.container.hide(0,a.setCloseFocus):a.closeCallback()):d.TAB==h&&(b.shiftKey?"true"==e.attr("data-tab-first")&&("true"!=e.attr("data-tab-last")&&a.container.find('[data-tab-last="true"]').focus(),b.preventDefault(),b.stopPropagation()):"true"==e.attr("data-tab-last")&&("true"!=e.attr("data-tab-first")&&a.container.find('[data-tab-first="true"]').focus(),
b.preventDefault(),b.stopPropagation()))})};this.setModalMousedownHandler=function(){var a=this.container.find('div[tabindex]:not(".noModalMouseDownTabStop"):first');if(1==a.size()){var b=a.get(0);this.container.on("mousedown.modal_"+this.timeStamp,function(d){b.contains(d.target)||(a.focus(),d.preventDefault(),d.stopPropagation())})}};this.setTabIndexesForModal=function(){$namespace.DomUtil.setTabIndexesForModal(this.container,this.timeStamp)};this.unsetTabIndexesForModal=function(){$namespace.DomUtil.unsetTabIndexesForModal(this.timeStamp)};
this.disableEscapeEventHandler=function(){this.handleEscape=!1};this.setTabIndexesForContainer=function(){$namespace.DomUtil.setTabIndexesForContainer(this.container,this.timeStamp)};this.unsetTabIndexesForContainer=function(){$namespace.DomUtil.unsetTabIndexesForContainer(this.container,this.timeStamp)};this.setTabindexInContainer=function(){$namespace.DomUtil.setTabindexInContainer(this.container,this.timeStamp)};this.setModalTitleTabHandler=function(a){this.modalTitle=a;a instanceof jQuery&&(this.modalTitle=
$(a));var b=this;this.modalTitle.on("keydown.modalTitle_"+this.timeStamp,function(a){var d=utils.Keyboard,e=d.getCode(a);d.ESCAPE!=e&&(d.TAB==e&&(a.shiftKey?b.container.find('[data-tab-last="true"]').focus():b.container.find('[data-tab-first="true"]').focus()),a.ctrlKey||(a.preventDefault(),a.stopPropagation()))})};this.destroyPopupEventHandlers=function(){$(document.body).off("keydown.tabOrder_"+this.timeStamp);$(document.body).off("focusin.modal_"+this.timeStamp);this.container.off("mousedown.modal_"+
this.timeStamp);this.modalTitle&&(this.modalTitle.off("keydown.modalTitle_"+this.timeStamp),this.container.off("click.modalKeep_"+this.timeStamp))};this.setItemToFocus=function(a){var b=a;b instanceof jQuery||(b=$(a));this.itemToFocus=b};this.setCloseFocus=function(){if(utils.Breakpoint.isMobile()){var a=this;setTimeout(function(){a.itemToFocus&&a.itemToFocus!=document.activeElement&&a.itemToFocus.focus()},1E3)}else this.itemToFocus.focus()}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		var utils=$namespace.Utils;
$namespace.FloatPlaceholder=function(a,b){this.input=a;this.isleft=b;a instanceof jQuery||(this.input=$(a));this.displayFloatingPlaceholder=function(){var a=this.input.parent();if(this.isleft){if(!a.is(".placeholder-stay-left")){var b=this.input.attr("placeholder");b=$('<div class="floating-placeholder-left">'+b+"</div>");a.addClass("placeholder-stay-left");a.append(b);a.get(0).floatingPlaceholder=b}}else a.is(".placeholder-stay")||(b=this.input.attr("placeholder"),b=$('<div class="floating-placeholder">'+b+
"</div>"),a.addClass("placeholder-stay"),a.append(b),a.get(0).floatingPlaceholder=b)};this.removeFloatingPlaceholder=function(){var a=this.input.parent();this.isleft?a.is(".placeholder-stay-left")&&(a.removeClass("placeholder-stay-left"),a.get(0).floatingPlaceholder.remove(),a.get(0).floatingPlaceholder=null):a.is(".placeholder-stay")&&(a.removeClass("placeholder-stay"),a.get(0).floatingPlaceholder.remove(),a.get(0).floatingPlaceholder=null)};this._onInput=function(a){a=this.input.val();_.isEmpty(a)?
this.removeFloatingPlaceholder():this.displayFloatingPlaceholder()};this._onBlur=function(a){this.removeFloatingPlaceholder()};this.input.on("input.placeHolder",$.proxy(this._onInput,this));this.input.on("blur.placeHolder",$.proxy(this._onBlur,this))};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SocialMediaSharing=$namespace.SocialMediaSharing||{AppendSocial:function(a,b,d,e,f){var g=["hide-desktop","hide-mobile","share-main"],h=$("#social_media_sharing").length?$("#social_media_sharing")[0].innerHTML:"";if(h.length){for(var k in a){var l=$(a[k][0]);l.append(h);l.find(".share-main").addClass(g[a[k][1]])}$(".share-main .share-container a").attr({href:"javascript:void(0);"}).on("click",{page:b,trackText:d,sImage:e,sPinterestImage:f},$namespace.SocialMediaSharing.Share);$namespace.TabOrder.updatePageTabOrder();
$(window).on("resize",function(){setTimeout($namespace.TabOrder.updatePageTabOrder,1)})}},RemoveSocial:function(a){$(arguments.length?a:"body").find(".share-main").remove();$namespace.TabOrder.updatePageTabOrder();$(window).off("resize",$namespace.TabOrder.updatePageTabOrder)},Share:function(a){var b=$(this).data("share").toLowerCase(),d=top.location.href.split("?")[0]+"?utm_source=Social_Share&utm_medium="+b,e=escape(d);var f=a.data.sPinterestImage?a.data.sPinterestImage:"";d=$namespace.Browser;
"offer"==a.data.page?(f=$("div.social-media-sharing-image").length?$("div.social-media-sharing-image").attr("data-image-url"):"",escape(f)):"deal"==a.data.page&&escape(f);e={email:"mailto:?subject="+encodeURIComponent(document.title)+"&body="+e};b.length&&("email"===b&&(d.isIpadOrAndroid()||d.iPhone)?document.location.href=e.email:("email"===b?window.open(e.email,"_blank","noopener,noreferrer"):window.open(e[b],"winShare","height=630,width=730,toolbar=no,noopener,noreferrer"),window.opener=null),
$namespace.Analytics.trackEvent(b,"Social_Share",a.data.trackText))}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		(function(a){a.browser||(a.browser={},a.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),a.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var b={destroy:function(){a(this).unbind(".maskMoney");a.browser.msie&&(this.onpaste=null);return this},mask:function(b){return this.each(function(){var d=
a(this);if("number"===typeof b){d.trigger("mask");var f=a(d.val().split(/\D/)).last()[0].length;b=b.toFixed(f);d.val(b)}return d.trigger("mask")})},unmasked:function(){return this.map(function(){var b=a(this).val()||"0",e=-1!==b.indexOf("-"),f;a(b.split(/\D/).reverse()).each(function(a,b){if(b)return f=b,!1});b=b.replace(/\D/g,"");b=b.replace(new RegExp(f+"$"),"."+f);e&&(b="-"+b);return parseFloat(b)})},init:function(b){b=a.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,
allowZero:!1,allowNegative:!1},b);return this.each(function(){function d(){var a=t.get(0),b=0,d=0,e;if("number"===typeof a.selectionStart&&"number"===typeof a.selectionEnd)b=a.selectionStart,d=a.selectionEnd;else if((e=document.selection.createRange())&&e.parentElement()===a){var f=a.value.length;var g=a.value.replace(/\r\n/g,"\n");d=a.createTextRange();d.moveToBookmark(e.getBookmark());a=a.createTextRange();a.collapse(!1);-1<d.compareEndPoints("StartToEnd",a)?b=d=f:(b=-d.moveStart("character",-f),
b+=g.slice(0,b).split("\n").length-1,-1<d.compareEndPoints("EndToEnd",a)?d=f:(d=-d.moveEnd("character",-f),d+=g.slice(0,d).split("\n").length-1))}return{start:b,end:d}}function f(a){t.each(function(b,d){d.setSelectionRange?(d.focus(),d.setSelectionRange(a,a)):d.createTextRange&&(b=d.createTextRange(),b.collapse(!0),b.moveEnd("character",a),b.moveStart("character",a),b.select())})}function g(a){var d="";-1<a.indexOf("-")&&(a=a.replace("-",""),d="-");return d+b.prefix+a+b.suffix}function h(a){var d=
-1<a.indexOf("-")&&b.allowNegative?"-":"";a=a.replace(/[^0-9]/g,"");var e=a.slice(0,a.length-b.precision);e=e.replace(/^0*/g,"");e=e.replace(/\B(?=(\d{3})+(?!\d))/g,b.thousands);""===e&&(e="0");d+=e;0<b.precision&&(a=a.slice(a.length-b.precision),e=Array(b.precision+1-a.length).join(0),d+=b.decimal+e+a);return g(d)}function k(a){var b=t.val().length;t.val(h(t.val()));var d=t.val().length;f(a-(b-d))}function l(){var a=t.val();t.val(h(a))}function p(){var a=t.val();return b.allowNegative?""!==a&&"-"===
a.charAt(0)?a.replace("-",""):"-"+a:a}function q(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function r(b){b=b||window.event;var e=b.which||b.charCode||b.keyCode;if(void 0===e)return!1;if(48>e||57<e){if(45===e)return t.val(p()),!1;if(43===e)return t.val(t.val().replace("-","")),!1;13!==e&&9!==e&&(!a.browser.mozilla||37!==e&&39!==e||0!==b.charCode)&&q(b);return!0}var f=!(t.val().length>=t.attr("maxlength")&&0<=t.attr("maxlength"));var g=d();var n=g.start,h=g.end;g=g.start!==g.end&&t.val().substring(n,
h).match(/\d/)?!0:!1;n="0"===t.val().substring(0,1);if(f||g||n)q(b),b=String.fromCharCode(e),f=d(),e=f.start,f=f.end,g=t.val(),t.val(g.substring(0,e)+b+g.substring(f,g.length)),k(e+1);return!1}function v(){setTimeout(function(){l()},0)}function n(){return(0/Math.pow(10,b.precision)).toFixed(b.precision).replace(/\./g,b.decimal)}var t=a(this),u;b=a.extend(b,t.data());t.unbind(".maskMoney");t.bind("keypress.maskMoney",r);t.bind("keyup.maskMoney",function(a){a=d().start;k(a+1)});t.bind("keydown.maskMoney",
function(a){a=a||window.event;var e=a.which||a.charCode||a.keyCode;if(void 0===e)return!1;var f=d();var g=f.start;f=f.end;return 8===e||46===e||63272===e?(q(a),a=t.val(),g===f&&(8===e?""===b.suffix?--g:(e=a.split("").reverse().join("").search(/\d/),g=a.length-e-1,f=g+1):f+=1),t.val(a.substring(0,g)+a.substring(f,a.length)),k(g),!1):!0});t.bind("blur.maskMoney",function(d){a.browser.msie&&r(d);""===t.val()||t.val()===g(n())?b.allowZero?b.affixesStay?t.val(g(n())):t.val(n()):t.val("0"):b.affixesStay||
(d=t.val().replace(b.prefix,"").replace(b.suffix,""),t.val(d));t.val()!==u&&t.change()});t.bind("focus.maskMoney",function(){u=t.val();l();var a=t.get(0);a.createTextRange&&(a=a.createTextRange(),a.collapse(!1),a.select())});t.bind("click.maskMoney",function(){var a=t.get(0);if(a.setSelectionRange){var b=t.val().length;a.setSelectionRange(b,b)}else t.val(t.val())});t.bind("cut.maskMoney",v);t.bind("paste.maskMoney",v);t.bind("mask.maskMoney",l)})}};a.fn.maskMoney=function(d){if(b[d])return b[d].apply(this,
Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist on jQuery.maskMoney");else return b.init.apply(this,arguments)}})(window.jQuery||window.Zepto);

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PolygonUtil=new function(){function a(d,e){if(!(this instanceof a))return new a(d,e);this.data=d||[];this.length=this.data.length;this.compare=e||b;if(d)for(d=Math.floor(this.length/2);0<=d;d--)this._down(d)}function b(a,b){return a<b?-1:a>b?1:0}function d(a,b){return b.max-a.max}function e(a,b,d,e){this.x=a;this.y=b;this.h=d;d=!1;for(var g=Infinity,h=0;h<e.length;h++)for(var k=e[h],l=0,n=k.length,t=n-1;l<n;t=l++){var u=k[l];t=k[t];u[1]>b!==t[1]>b&&a<(t[0]-u[0])*(b-u[1])/(t[1]-u[1])+u[0]&&
(d=!d);g=Math.min(g,f(a,b,u,t))}this.d=(d?1:-1)*Math.sqrt(g);this.max=this.d+this.h*Math.SQRT2}function f(a,b,d,e){var f=d[0];d=d[1];var g=e[0]-f,h=e[1]-d;if(0!==g||0!==h){var k=((a-f)*g+(b-d)*h)/(g*g+h*h);1<k?(f=e[0],d=e[1]):0<k&&(f+=g*k,d+=h*k)}g=a-f;h=b-d;return g*g+h*h}a.prototype={push:function(a){this.data.push(a);this.length++;this._up(this.length-1)},pop:function(){var a=this.data[0];this.data[0]=this.data[this.length-1];this.length--;this.data.pop();this._down(0);return a},peek:function(){return this.data[0]},
_up:function(a){for(var b=this.data,d=this.compare;0<a;){var e=Math.floor((a-1)/2);if(0>d(b[a],b[e])){var f=b,g=f[e];f[e]=f[a];f[a]=g;a=e}else break}},_down:function(a){for(var b=this.data,d=this.compare,e=this.length;;){var f=2*a+1,g=f+1,r=a;f<e&&0>d(b[f],b[r])&&(r=f);g<e&&0>d(b[g],b[r])&&(r=g);if(r===a)break;f=b;g=f[r];f[r]=f[a];f[a]=g;a=r}}};this.getPolygonCenter=function(b){b=b.split(",");if(0==b.length||0!=b.length%2)return null;for(var f=b.length/2,g,l=[],p,q=0;q<f;q++)g=2*q,p=[],p.push(parseInt(b[g])),
p.push(parseInt(b[g+1])),l.push(p);b=[];b.push(l);l=1;f=l/2;for(g=0;g<b[0].length;g++){p=b[0][g];if(!g||p[0]<r)var r=p[0];if(!g||p[1]<v)var v=p[1];if(!g||p[0]>n)var n=p[0];if(!g||p[1]>t)var t=p[1]}p=n-r;q=t-v;var u=Math.min(p,q),w=u/2;g=new a(null,d);if(0===u)r=[r,v];else{for(var y=r;y<n;y+=u)for(var z=v;z<t;z+=u)g.push(new e(y+w,z+w,w,b));w=t=n=0;u=b[0];y=0;z=u.length;for(var x=z-1;y<z;x=y++){var B=u[y];x=u[x];var G=B[0]*x[1]-x[0]*B[1];t+=(B[0]+x[0])*G;w+=(B[1]+x[1])*G;n+=3*G}n=0===n?new e(u[0][0],
u[0][1],0,b):new e(t/n,w/n,0,b);r=new e(r+p/2,v+q/2,0,b);for(r.d>n.d&&(n=r);g.length;)r=g.pop(),r.d-n.d>f&&(n=r),r.max-n.d<=l||(w=r.h/2,g.push(new e(r.x-w,r.y-w,w,b)),g.push(new e(r.x+w,r.y-w,w,b)),g.push(new e(r.x-w,r.y+w,w,b)),g.push(new e(r.x+w,r.y+w,w,b)));r=[n.x,n.y]}v={};v.x=r[0];v.y=r[1];return v}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.TurnToReviewsUtil=new function(){this.TranslationTexts={REVIEWS: "Reviews",COSTCO_MEMBER_REVIEWS: "Costco Member Reviews"};var TranslationTexts = this.TranslationTexts;
;var a={},b=-1,d=0;this.drawReviewWidgets=function(a,b,d,h,k){$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED&&$namespace.Utils.isObject(turnToConfig)&&$namespace.Utils.isFunction(TurnToCmd)&&(turnToConfig.reviewsList=
{onFinish:function(){var b=$("#"+a),e=$("#"+$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_ID());0<b.length&&$namespace.TurnToReviewsUtil.divContainsValidWidget(e)&&!$namespace.TurnToReviewsUtil.divContainsWidget(b,e)?(e.attr("id",$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_2_ID()),e.find("#"+$namespace.TurnToReviewsUtil.REVIEWS_SUMMARY_DIV_ID()).attr("id",$namespace.TurnToReviewsUtil.REVIEWS_SUMMARY_DIV_2_ID()),e.find("#"+$namespace.TurnToReviewsUtil.REVIEWS_LIST_DIV_ID()).attr("id",$namespace.TurnToReviewsUtil.REVIEWS_LIST_DIV_2_ID()),
d&&e.find('span[itemprop="name"]').text(d),h&&e.find('img[itemprop="image"]').attr("src",h).hide(),k&&e.find('span[itemprop="description"]').text(k),e.find('span[itemprop="telephone"]').text($("#tollNumber").text()),b.empty().append(e),e.show(),$namespace.TurnToReviewsUtil.addAccessibility(e)):e.remove();$namespace.TurnToReviewsUtil.resetOriginalDivs()},onUpdate:function(){var a=$("#"+$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_2_ID());a.find('a, button, input, div[role="button"]').removeAttr("data-taborder").removeAttr("tabindex");
a.find('a:visible, button:not([disabled]):visible, input:visible, div[role="button"]:visible').attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()}},TurnToCmd("set",{sku:b}),TurnToCmd("initialize"))};this.drawReviewWidgetsInModal=function(a,b){$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED&&$namespace.Utils.isObject(turnToConfig)&&$namespace.Utils.isFunction(TurnToCmd)&&($namespace.DomUtil.setElementLoadingMask(!0,1,!1),turnToConfig.reviewsList={onFinish:function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var a=new $namespace.Widgets.Modal($("#reviews-modal-container").html());void 0!=b&&1==b.length&&a.setItemToFocus(b);var d=$("#"+$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_ID());d.attr("id",$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_2_ID());d.find("#"+$namespace.TurnToReviewsUtil.REVIEWS_SUMMARY_DIV_ID()).attr("id",$namespace.TurnToReviewsUtil.REVIEWS_SUMMARY_DIV_2_ID());d.find("#"+$namespace.TurnToReviewsUtil.REVIEWS_LIST_DIV_ID()).attr("id",$namespace.TurnToReviewsUtil.REVIEWS_LIST_DIV_2_ID());
var e=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(b.data("hotel-id")).getTitle();$(".modal #reviews-modal .modal-body h2.item-title").text(e);$(".modal #reviews-modal .modal-body").append(d);d.show();d.find('a, button, input, div[role="button"], li span.tt-o-listbox__option-icon-wrap').attr("data-taborder","document").last().attr("data-tab-last","true");$namespace.TurnToReviewsUtil.resetOriginalDivs();d.find("div[tabindex]").addClass("noModalMouseDownTabStop");a.show()},onUpdate:function(){var a=
$("#"+$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_2_ID());a.find('[data-tab-last="true"]').removeAttr("data-tab-last");a.find('a, button, input, div[role="button"]').removeAttr("data-taborder").removeAttr("tabindex");a.find('a:visible, button:not([disabled]):visible, input:visible, div[role="button"]:visible, li span.tt-o-listbox__option-icon-wrap').attr("data-taborder","document").last().attr("data-tab-last","true");$namespace.TabOrder.updatePopupTabOrder(a)}},TurnToCmd("set",{sku:a}),TurnToCmd("initialize"))};
this.addAccessibility=function(a){a.find('a, button, input, [role="button"]').attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()};this.resetOriginalDivs=function(){$("#tt-reviews").remove();$("body").append('<div id="tt-reviews" class="displayNone" aria-hidden="true"><span itemprop="name" class="displayNone" aria-hidden="true">\x3c!-- empty --\x3e</span><img itemprop="image" src="" alt="" width="0px" height="0px" aria-hidden="true"/><span itemprop="description" class="displayNone" aria-hidden="true">\x3c!-- empty --\x3e</span><span itemprop="telephone" class="displayNone" aria-hidden="true">\x3c!-- empty --\x3e</span><div id="tt-reviews-summary">\x3c!--  empty --\x3e</div><div id="tt-reviews-list">\x3c!--  empty --\x3e</div></div>')};
this.divContainsWidget=function(a,b){return 0==a.find("#"+$namespace.TurnToReviewsUtil.REVIEWS_CONTAINER_DIV_2_ID()).length?!1:a.find('meta[itemprop="name"]').attr("content")===b.find('meta[itemprop="name"]').attr("content")};this.divContainsValidWidget=function(a){return 1==a.find('meta[itemprop="name"]').length};this.updatePageTabOrder=function(){d++;-1==b&&(b=$("div.turntoTeaser").length);b==d&&($namespace.TabOrder.updatePageTabOrder(),b=-1)};this.REVIEWS_CONTAINER_DIV_ID=function(){return"tt-reviews"};
this.REVIEWS_SUMMARY_DIV_ID=function(){return"tt-reviews-summary"};this.REVIEWS_LIST_DIV_ID=function(){return"tt-reviews-list"};this.REVIEWS_CONTAINER_DIV_2_ID=function(){return"tt-reviews-2"};this.REVIEWS_SUMMARY_DIV_2_ID=function(){return"tt-reviews-summary-2"};this.REVIEWS_LIST_DIV_2_ID=function(){return"tt-reviews-list-2"};this.MIN_NUMBER_OF_RATINGS_TO_SHOW_RATINGS=function(){return 5};this.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS=function(){return 5};this.addTeaserWidget=function(b){a[b.getSku()]=
b};this.getTeaserWidgetBySku=function(b){return a[b]}};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.FlightSeatMap=new function(){this.CurrentSeatMap=null;var a=$namespace.EnhancedSeatMapUtil.EnhancedSeatMap,b=[],d=[],e=cwctravel.core.StringUtil;this.createPassengerInfoArray=function(){d=[];var a=$("select#selectFlight").find(":selected").data("uid");if(a)for(var b=0;0>b;b++){var e=$(document.getElementById("passengerTitle"+b)).text(),k=$(document.getElementById("passengerFirstName"+b)).text(),l=$(document.getElementById("passengerMiddleInitials"+b)).text(),p=$(document.getElementById("passengerLastName"+
b)).text(),q=$(document.getElementById("passengerSuffix"+b)).text(),r=$(document.getElementById("passengerSeatNumber_"+a+"_"+b)).text();d[b]=new $namespace.FlightSeatMap.passengerSeatInfo(b,e,k,p,l,q,r)}};this.loadCurrentSeatMap=function(b){$namespace.FlightSeatMap.createPassengerInfoArray();if("object"==typeof b){for(var e=[],f=0;f<d.length;f++)e[f]=d[f].seatNumber;try{$(b.parentElement).empty()}catch(k){}this.CurrentSeatMap=new a({dataUrl:b.dataUrl+"&randomUid="+(new Date).getMilliseconds(),imagePath:_webLoc+
"/shared/images/icons/flightSeatMaps/",parentElement:b.parentElement,megatip:b.megatip,flightSegmentItemUid:b.flightSegmentItemUid,flightItemUid:b.flightItemUid,preselectSeatNumbers:e,loadUnselectedOption:b.loadUnselectedOptionIndex})}};this.loadFlightSeatMapContent=function(a,b,d){var e=$('div.megatip[data-uid="'+a+'"]'),f=e.find(".accordion .tab-panels .panel.active");a={dataUrl:"seatMapContent.act?ctsmc=LOAD_SEAT_MAP_DISPLAY_JSON&uid="+a+"&flightSegmentItemUid="+b+"&forLIP="+d,parentElement:f.find(".flight-seatmap"),
megatip:e,flightSegmentItemUid:b,selectable:!1,flightItemUid:a};$namespace.FlightSeatMap.loadCurrentSeatMap(a)};this.passengerSeatInfo=function(a,b,d){this.flightSegmentItemUid=e.trim(a);this.passengerIndex=parseInt(b);this.seatNumber=e.trim(d)};this.getSeatNumber=function(a,d){return b[a+"_"+d]};this.getFlightSeatMap=function(){return b};this.setSeatNumber=function(a,d,e){b[a+"_"+d]=e};this.removeSeatNumber=function(a,d){b.splice(a+"_"+d,1)};this.hasError=function(){return this.CurrentSeatMap?this.CurrentSeatMap.hasError:
!1}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets=new function(){var a=$namespace.Utils||{};this.setEqualHeights=function(b){var d=function(d,e){var f=1==arguments.length?d:$(e),g=function(){var a=0,d=$(e),f=d.find(".height-item");d.hasClass("no-mobile-equalize")&&$namespace.Utils.Breakpoint.isMobile()?f.css("height","auto"):(f.css("height","auto"),f.each(function(d,e){d=$(e).outerHeight();b&&(d+=b);d>a&&(a=d)}),0<a&&f.css("height",a+"px"))};if(f.hasClass("image-equalize-heights"))if(window.Promise){var l=[];f.find("img").each(function(b,
d){l.push(a.loadImage(d))});window.Promise.all(l).then(g,g)}else f.find("img").load(g);else g()};$(".equalize-heights").each(d);var e=$('DIV[id="whyCostcoBannerDiv"]');window.setTimeout(function(){d(0,e)},200)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.DataListWidget=function(a,b){this.TranslationTexts={ACCESSIBILITY_DISPLAY_DATA_LIST: "list with $numberOfItems items",ACCESSIBILITY_SELECTED_LOCATION: "selected $location"};var TranslationTexts = this.TranslationTexts;
;var d=$namespace.Utils||{};d.getNamespace($namespace,
"Widgets",{});var e=d.Keyboard,f=d.getNamespace($namespace,"Config",{},!1),g=new google.maps.Geocoder,h={makeCallback:function(a,b,e,f,g,h,k){if(e&&k)for(var l in k)e[l]=k[l];if(null==a||0>a.indexOf("http://")&&0>a.indexOf("https://"))a=$arguments.webloc+"/"+a;return $.ajax({type:b,headers:h,url:a,data:e}).done(function(a){d.isFunction(f)&&f(a)}).fail(function(a,b,e){d.isFunction(g)&&g(e,b)})},get:function(a,b,d,e,f,g){return this.makeCallback(a,"GET",b,d,e,f,g)},post:function(a,b,d,e,f,g){return this.makeCallback(a,
"POST",b,d,e,f,g)}};this.el=a;this.initialized=!1;this.options=$.extend({},b);this.type="DataListWidget";this.input=this.el.find("input");this.isOpen=!1;this.url=this.options.url;this.headers=this.options.headers;this.requestMethod=this.options.requestMethod||"GET";this.params=this.options.params||{};this.dataTransform=this.options.dataTransform||null;this.noResultsText=this.options.noResultsText||null;this.useGoogleAPI=this.options.useGoogleAPI||!1;this.disabled=this.hasFocus=this.hasUI=!1;this.listDebounce=
this.keyDebounce=null;this.parser=this.options.parser;this.lastSelectedIndex=-1;this.regexValidDataValue=/[a-z0-9]+/i;this.el.addClass("initialized");a="screenreader-"+this.input.attr("id");this.el.append($("<span></span>",{"aria-live":"assertive","class":"ada-screenreader",id:a}));this.screenreaderText=this.el.find("#"+a);this.id=function(){return this.input.prop("id")};this._clearListDebounce=function(a){clearTimeout(this.listDebounce)};this._onItemClick=function(a){var b=$(a.currentTarget);this.lastSelectedIndex=
b.index();if(this.hasResults()){var e=b.attr("data-json"),f=$.trim(b.attr("data-value"));b=$.trim(b.text());var g={};try{g=JSON.parse(e)}catch(n){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json onItemClick.")}if(void 0!=g.value&&this.regexValidDataValue.test(g.value)&&(this.selectItem(f,b),d.isFunction(this.options.onSelect)))this.options.onSelect(g,this);this.hideList();this.input.focus()}a.preventDefault()};this._onClick=function(a){this._clearListDebounce();
this.isOpen&&(this.hideList(),this.input.focus(),a.preventDefault())};this._onFocus=function(a){this.hasFocus=!0;this.activate();this.input&&this.input.val().length?this.input.select():this.screenreaderText.empty().removeProp("locationSelected")};this._onClear=function(a){this.val("","");this.list.empty();this.hideList();this.input.focus();a.preventDefault()};this.setScreenreaderSelectedLocation=function(){var a=$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.ACCESSIBILITY_SELECTED_LOCATION,
{location:this.input.val()});this.screenreaderText.text()!=a&&(this.screenreaderText.text(a),this.screenreaderText.prop("locationSelected","true"))};this._onBlur=function(a){this.hasFocus=!1;if(this.hasValidSelection())this.setScreenreaderSelectedLocation();else if(0<this.list.find("li:hover").length){var b=$(this.list[0]).find("li:hover"),e=b.attr("data-value");this.regexValidDataValue.test(e)&&(this.lastSelectedIndex=b.index(),this.selectItem(e,b.text()),this.selectHighlighted(b))}else if(0<this.list.length&&
1<=this.list[0].children.length&&this.list[0].children[0].dataset&&this.list[0].children[0].dataset.json&&(b=$(this.list[0].children[0]),e=b.attr("data-json"))){var f={};try{f=JSON.parse(e)}catch(v){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json onBlur.")}void 0!=f.value&&this.regexValidDataValue.test(f.value)&&this.selectHighlighted(b)}if(d.isFunction(this.options.onLocationBlur))this.options.onLocationBlur(a);this.listDebounce=setTimeout($.proxy(function(){this.deactivate();
this.isOpen&&this.hasResults()&&this.hideList()},this),300)};this._onKeydown=function(a){var b=e.getCode(a);b==e.ENTER&&(this.input.focus(),a.preventDefault(),a.stopPropagation());this.isOpen&&b==e.TAB&&(a.preventDefault(),a.stopPropagation());if(b==e.TAB||b==e.ESCAPE)this.selectHighlighted(),this.hasValidSelection()&&this.setScreenreaderSelectedLocation(),this.input.focus()};this._onKeyup=function(a){switch(e.getCode(a)){case e.ENTER:this.isOpen?(this.selectHighlighted(),this.hasValidSelection()&&
this.setScreenreaderSelectedLocation()):0<$(a.target).closest("a").length&&this.showList();a.preventDefault();a.stopPropagation();break;case e.UP_ARROW:this.isOpen?this.selectUp():this.showList();a.preventDefault();break;case e.DOWN_ARROW:this.isOpen?this.selectDown():this.showList();a.preventDefault();break;default:clearTimeout(this.keyDebounce);var b=this.input.val().replace(/^\s+|\s+$/g,"");this.keyDebounce=setTimeout($.proxy(function(){b&&2<b.length?this.getResults(b):(this.list.empty(),this.hideList())},
this),200)}};this.getResults=function(a){clearTimeout(this.keyDebounce);a=$.trim(a);var b=d.String.removeDiacritics(a);$.trim(this.input.attr("lastSelectedValue"))==a?this.hideList():(a=function(a){return function(b){var d=0;if(null!=a.dataTransform)try{b=a.dataTransform(b)}catch(n){}k=b;a.useGoogleAPI&&k&&(d+=k.airports?k.airports.length:0,d+=k.cities?k.cities.length:0,d+=k.zipCodes?k.zipCodes.length:0);a.useGoogleAPI&&0==d?a.callGeocodeAPI():a.displayResults()}}(this),"GET"==this.requestMethod?
h.get(this.url,{returnCount:f.LOCATION_SUGGESTION_RESULTS_PER_PAGE,keyword:b,domainCode:$namespace.GlobalConstants.APPLICATION_DOMAIN},a,$.proxy(this.displayError,this),this.headers,this.params):h.post(this.url,{returnCount:f.LOCATION_SUGGESTION_RESULTS_PER_PAGE,keyword:b,domainCode:$namespace.GlobalConstants.APPLICATION_DOMAIN},a,$.proxy(this.displayError,this),this.headers,this.params))};var k=null;this.callGeocodeAPI=function(){var a=this.input.val();g.geocode({address:a},$.proxy(this.callBackGeocode,
this))};this.callBackGeocode=function(a,b){b=[];var d=function(a){for(var b in a)if(_.find(a[b].types,function(a){return"country"==a}))return a[b].short_name;return""},e=function(a){for(var b in a)if(_.find(a[b].types,function(a){return"administrative_area_level_1"==a}))return a[b].short_name;return""};if(a)for(var f=0;f<a.length;f++){var g=a[f];if(!_.find(g.types,function(a){return"airport"==a})){var h=d(g.address_components);"US"!=h&&"CA"!=h||b.push({type:"address",title:$namespace.StringUtil.removeDiacritics(g.formatted_address),
latitude:g.geometry.location.lat(),longitude:g.geometry.location.lng(),state:e(g.address_components),country:h})}}k.addresses=b;this.displayResults()};this._onMouseDown=function(a){a.preventDefault()};this.displayResults=function(){var a=(d.isFunction(this.parser)?this.parser:this.parseData)(k);this.list.empty();if(d.isArray(a)){0==a.length&&this.noResultsText&&a.push({type:"noResults",title:this.noResultsText,value:"+++"});for(var b=0,e=a.length;b<e;b++){var f=a[b];f=$("<li></li>",{"class":f.type,
text:f.title,"data-json":JSON.stringify(f),"data-value":f.value,role:"option"});this.list.append(f)}a.length&&("noResults"==a[0].type?this.screenreaderText.text(a[0].title):(a=$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.ACCESSIBILITY_DISPLAY_DATA_LIST,{numberOfItems:a.length}),this.screenreaderText.text(a)),this.showList())}};this.displayError=function(a){try{console.log(a)}catch(p){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error in DatalistWidget.displayError")}};
this.parseData=function(a){return a};this.addEventListeners=function(){this.list&&(this.list.on("click","li",$.proxy(this._onItemClick,this)),this.list.on("mousedown",$.proxy(this._onMouseDown,this)));this.input&&(this.input.on("focus",$.proxy(this._onFocus,this)),this.input.on("blur",$.proxy(this._onBlur,this)),this.input.on("keyup",$.proxy(this._onKeyup,this)),this.input.on("keydown",$.proxy(this._onKeydown,this)),this.input.on("click",$.proxy(this._onClick,this)))};this.removeEventListeners=function(){this.input&&
(this.input.off("focus"),this.input.off("blur"),this.input.off("click"),this.input.off("keyup"),this.input.off("keydown"));this.list&&(this.list.off("click"),this.list.off("mousedown"))};this.createUI=function(){if(!this.hasUI){this.listWrapper=$("<div></div>",{"class":"ui-list-wrapper"});var a=this.input.attr("default-value");this.hiddenInput=$("<input/>",{type:"hidden",value:a?a:this.value});this.list=$("<ul></ul>",{"class":"ui-list",role:"listbox"});this.listWrapper.append(this.list);this.el.append(this.listWrapper).append(this.hiddenInput);
this.listWrapper.hide();this.addEventListeners();this.el.addClass("has-ui");this.hasUI=!0}};this.destroyUI=function(){this.hasUI&&(this.removeEventListeners(),this.input.remove(),this.listWrapper.remove(),this.el.removeClass("has-ui"),this.hasUI=!1)};this.activate=function(){this.el.addClass("active")};this.deactivate=function(){this.el.removeClass("active")};this.selectItem=function(a,b){this.hasResults()&&(this.val(a,b),this.activate())};this.selectDown=function(){if(this.isOpen&&this.hasResults()){var a=
this.list.children();var b=this.getSelectedItem();b&&(this.lastSelectedIndex=b.index());if(1!=a.length||this.regexValidDataValue.test($(a[0]).attr("data-value"))){this.lastSelectedIndex>=a.length&&(this.lastSelectedIndex=-1);var d=this.lastSelectedIndex;d+1<a.length&&(this.lastSelectedIndex=d+1,b.removeClass("selected"),a=a.eq(this.lastSelectedIndex),a.addClass("selected"),this.val(a.attr("data-value"),a.text()))}else a.removeClass("selected")}};this.selectUp=function(){if(this.isOpen&&this.hasResults()){var a=
this.list.children();var b=this.getSelectedItem();b&&(this.lastSelectedIndex=b.index());if(1!=a.length||this.regexValidDataValue.test($(a[0]).attr("data-value"))){0>this.lastSelectedIndex&&(this.lastSelectedIndex=-1);var d=this.lastSelectedIndex;0<d&&(this.lastSelectedIndex=d-1,b.removeClass("selected"),a=a.eq(this.lastSelectedIndex),a.addClass("selected"),this.val(a.attr("data-value"),a.text()))}else a.removeClass("selected")}};this.selectHighlighted=function(){if(this.isOpen&&this.hasResults()){0===
this.getSelectedItem().length&&0===$(this.list[0]).find("li:hover").length&&this.selectDown();var a=arguments.length?arguments[0]:this.getSelectedItem(),b=a.attr("data-value"),e=a.text();this.lastSelectedIndex=a.index();var f=a.attr("data-json");a={};try{a=JSON.parse(f)}catch(v){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json in selectHighlighted.")}if((f=void 0==a.value?null:a.value)&&this.regexValidDataValue.test(f)&&(this.selectItem(b,e),d.isFunction(this.options.onSelect)))this.options.onSelect(a,
this);this.hideList()}};this.getSelectedItem=function(){var a=this.list.find(".selected");a.length&&(a=$(a[0]));return a};this.val=function(a,b){if(arguments.length){if(this.hasUI){this.input.val(b).attr("lastSelectedValue",b);this.initialized&&this.input.change();this.hiddenInput.val(a);this.value=a;var d=this.list.children();d.each(function(a,b){$(b).removeClass("selected")});-1<this.lastSelectedIndex&&this.lastSelectedIndex<d.length?(d=$(d[this.lastSelectedIndex]),d.attr("data-value")===a&&d.addClass("selected")):
d.each(function(b,d){b=$(d);if(b.attr("data-value")===a)return b.addClass("selected"),!1});null===a||void 0===a||0===a.length?this.el.addClass("empty"):this.el.removeClass("empty")}}else return this.hiddenInput.val()};this.setParser=function(a){this.parser=a};this.showList=function(){if(this.hasFocus){if(!this.disabled){this.lastSelectedIndex=-1;var a=this.listWrapper.offset(),b=a.left+this.listWrapper.width();a=a.top+this.listWrapper.height();var d=$("body").height();this.isOpen=!0;this.el.addClass("list-open");
this.input.attr("lastselectedvalue","").attr("aria-expanded","true");this.listWrapper.show();b>window.innerWidth&&this.listWrapper.css("width",this.listWrapper.width()-(b-window.innerWidth)+"px");a>d&&this.listWrapper.css("height",this.listWrapper.height()-(a-d)-20+"px");this.activate()}}else this.hideList()};this.hideList=function(){this.isOpen=!1;this.el.removeClass("list-open");this.input.attr("aria-expanded","false");this.listWrapper&&(this.listWrapper.hide(),this.lastSelectedIndex=-1);this.screenreaderText.prop("locationSelected")||
this.screenreaderText.empty()};this.disable=function(){this.el.addClass("disabled");this.input.prop("disabled",!0);$('label[for="'+this.input.prop("id")+'"]').addClass("disabled");this.disabled=!0;this.hideList()};this.enable=function(){this.el.removeClass("disabled");this.input.prop("disabled",!1);$('label[for="'+this.input.prop("id")+'"]').removeClass("disabled");this.disabled=!1};this.hasValidSelection=function(){return this.input&&this.input.val().length&&this.input.val()==this.input.attr("lastSelectedValue")?
!0:!1};this.hasResults=function(){return 0<this.list.children().length};this.createUI();this.val(this.hiddenInput.val(),this.input.val());this.initialized=!0};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.DataListFilterWidget=function(a,b){function d(a){return function(b,d){return b[a]<d[a]?-1:b[a]>d[a]?1:0}}this.TranslationTexts={ACCESSIBILITY_DISPLAY_DATA_LIST: "list with $numberOfItems items",ACCESSIBILITY_SELECTED_HOTEL: "selected $hotel"};var TranslationTexts = this.TranslationTexts;
;
var e=$namespace.Utils||{};e.getNamespace($namespace,"Widgets",{});var f=e.Keyboard;e.getNamespace($namespace,"Config",{},!1);this.el=a;this.options=$.extend({},b);this.active=!0;this.type="DataListFilterWidget";this.input=this.el.find("input");this.isOpen=!1;this.noResultsText=this.options.noResultsText||null;this.disabled=this.hasFocus=this.hasUI=!1;this.listDebounce=this.keyDebounce=null;this.parser=this.options.parser;this.lastSelectedIndex=-1;this.regexValidDataValue=/[a-z0-9]+/i;this.nameValueList=
this.options.resultList||null;this.url=this.options.url;this.el.addClass("initialized");a="screenreader-"+this.input.attr("id");this.liveContainer=$(".tab-switcher-live-container");0===this.liveContainer.length&&(this.liveContainer=$("<span></span>",{"aria-live":"polite","class":"ada-screenreader tab-switcher-live-container",id:a}),$(document.body).append(this.liveContainer));this.screenreaderText=this.el.find("#"+a);this.id=function(){return this.input.prop("id")};this._clearListDebounce=function(a){clearTimeout(this.listDebounce)};
this._onItemClick=function(a){var b=$(a.currentTarget);this.lastSelectedIndex=b.index();if(this.hasResults()){var d=b.attr("data-json"),f=$.trim(b.attr("data-value"));b=$.trim(b.text());var g={};try{g=JSON.parse(d)}catch(r){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json onItemClick.")}if(void 0!=g.value&&this.regexValidDataValue.test(g.value)){this.selectItem(f,b);if(e.isFunction(this.options.onSelect))this.options.onSelect(g,this);d="";$("#hotelOnlySearchFilter").data("hotel-only-filter")&&
(d="HO_");$namespace.Analytics.trackEvent(d+"Search_Results_Filter_Hotels_Name","Enter",b)}this.hideList();this.input.focus()}a.preventDefault()};this._onClick=function(a){this._clearListDebounce();this.isOpen&&(this.hideList(),this.input.focus(),a.preventDefault())};this._onFocus=function(a){this.hasFocus=!0;this.activate();this.input&&this.input.val().length?this.input.select():this.screenreaderText.empty().removeProp("hotelSelected")};this._onClear=function(a){this.val("","");this.list.empty();
this.hideList();this.input.focus();a.preventDefault()};this.setScreenreaderSelectedHotel=function(){var a=$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.ACCESSIBILITY_SELECTED_HOTEL,{hotel:this.input.val()});this.screenreaderText.text()!=a&&(this.liveContainer.text(a),this.clearLiveText(),this.screenreaderText.prop("hotelSelected","true"))};this._onBlur=function(a){this.hasFocus=!1;if(this.hasValidSelection())this.setScreenreaderSelectedHotel();else if(0<this.list.find("li:hover").length){var b=
$(this.list[0]).find("li:hover"),d=b.attr("data-value");this.regexValidDataValue.test(d)&&(this.lastSelectedIndex=b.index(),this.selectItem(d,b.text()),this.selectHighlighted(b))}else if(0<this.list.length&&1<=this.list[0].children.length&&this.list[0].children[0].dataset&&this.list[0].children[0].dataset.json&&(b=$(this.list[0].children[0]),d=b.attr("data-json"))){var f={};try{f=JSON.parse(d)}catch(q){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json onBlur.")}void 0!=
f.value&&this.regexValidDataValue.test(f.value)&&this.selectHighlighted(b)}if(e.isFunction(this.options.onHotelBlur))this.options.onHotelBlur(a);this.listDebounce=setTimeout($.proxy(function(){this.deactivate();this.isOpen&&this.hasResults()&&this.hideList()},this),300)};this._onKeydown=function(a){var b=f.getCode(a);b==f.ENTER&&(this.input.focus(),a.preventDefault(),a.stopPropagation());this.isOpen&&b==f.TAB&&(a.preventDefault(),a.stopPropagation());if(b==f.TAB||b==f.ESCAPE)this.selectHighlighted(),
this.hasValidSelection()&&this.setScreenreaderSelectedHotel(),this.input.focus()};this._onKeyup=function(a){switch(f.getCode(a)){case f.ENTER:this.isOpen?(this.selectHighlighted(),this.hasValidSelection()&&this.setScreenreaderSelectedHotel()):0<$(a.target).closest("a").length&&this.showList();a.preventDefault();a.stopPropagation();break;case f.UP_ARROW:this.isOpen?this.selectUp():this.showList();a.preventDefault();break;case f.DOWN_ARROW:this.isOpen?this.selectDown():this.showList();a.preventDefault();
break;default:clearTimeout(this.keyDebounce);var b=this.input.val().replace(/^\s+|\s+$/g,"");this.keyDebounce=setTimeout($.proxy(function(){b&&2<b.length?this.getResults(b):""==b?this.clearSelection(a):(this.list.empty(),this.hideList())},this),200)}};var g=null;this.getResults=function(a){clearTimeout(this.keyDebounce);a=$.trim(a);var b=e.String.removeDiacritics(a);if($.trim(this.input.attr("lastSelectedValue"))==a)this.hideList();else{g=[];for(a=0;a<this.nameValueList.length;a++){var d=this.nameValueList[a];
d.title.toLowerCase().includes(b.toLowerCase())&&g.push(d)}g.sort();this.displayResults()}};this._onMouseDown=function(a){a.preventDefault()};this.displayResults=function(){var a=(e.isFunction(this.parser)?this.parser:this.parseData)(g);a.sort(d("title"));this.list.empty();if(e.isArray(a)){0==a.length&&this.noResultsText&&a.push({type:"noResults",title:this.noResultsText,value:"+++"});for(var b=0,f=a.length;b<f;b++){var p=a[b];var q=$("<li></li>",{text:p.title,"data-json":JSON.stringify(p),"data-value":p.value,
role:"option"});this.list.append(q);this.liveContainer.text(p.title);this.clearLiveText()}if(a.length){if("noResults"==a[0].type)this.liveContainer.text(a[0].title),this.clearLiveText();else var r=$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.ACCESSIBILITY_DISPLAY_DATA_LIST,{numberOfItems:a.length});this.showList();this.liveContainer.text(r);this.clearLiveText()}}};this.displayError=function(a){try{console.log(a)}catch(k){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error in DatalistWidget.displayError")}};
this.parseData=function(a){return a};this.addEventListeners=function(){this.list&&(this.list.on("click","li",$.proxy(this._onItemClick,this)),this.list.on("mousedown",$.proxy(this._onMouseDown,this)));this.input&&(this.input.on("focus",$.proxy(this._onFocus,this)),this.input.on("blur",$.proxy(this._onBlur,this)),this.input.on("keyup",$.proxy(this._onKeyup,this)),this.input.on("keydown",$.proxy(this._onKeydown,this)),this.input.on("click",$.proxy(this._onClick,this)))};this.removeEventListeners=function(){this.input&&
(this.input.off("focus"),this.input.off("blur"),this.input.off("click"),this.input.off("keyup"),this.input.off("keydown"));this.list&&(this.list.off("click"),this.list.off("mousedown"))};this.createUI=function(){if(!this.hasUI){this.listWrapper=$("<div></div>",{"class":"ui-list-wrapper"});var a=this.input.attr("default-value");this.hiddenInput=$("<input/>",{type:"hidden",value:a?a:this.value});this.list=$("<ul></ul>",{"class":"ui-list",role:"listbox"});this.listWrapper.append(this.list);this.el.append(this.listWrapper).append(this.hiddenInput);
this.listWrapper.hide();this.addEventListeners();this.el.addClass("has-ui");this.hasUI=!0}};this.destroyUI=function(){this.hasUI&&(this.removeEventListeners(),this.input.remove(),this.listWrapper.remove(),this.el.removeClass("has-ui"),this.hasUI=!1)};this.activate=function(){this.el.addClass("active")};this.deactivate=function(){this.el.removeClass("active")};this.selectItem=function(a,b){this.hasResults()&&(this.val(a,b),this.activate())};this.selectDown=function(){if(this.isOpen&&this.hasResults()){var a=
this.list.children();var b=this.getSelectedItem();b&&(this.lastSelectedIndex=b.index());if(1!=a.length||this.regexValidDataValue.test($(a[0]).attr("data-value"))){this.lastSelectedIndex>=a.length&&(this.lastSelectedIndex=-1);var d=this.lastSelectedIndex;d+1<a.length&&(this.lastSelectedIndex=d+1,b.removeClass("selected"),a=a.eq(this.lastSelectedIndex),a.addClass("selected"),this.val(a.attr("data-value"),a.text()),this.liveContainer.text(a.text()),this.clearLiveText())}else a.removeClass("selected")}};
this.selectUp=function(){if(this.isOpen&&this.hasResults()){var a=this.list.children();var b=this.getSelectedItem();b&&(this.lastSelectedIndex=b.index());if(1!=a.length||this.regexValidDataValue.test($(a[0]).attr("data-value"))){0>this.lastSelectedIndex&&(this.lastSelectedIndex=-1);var d=this.lastSelectedIndex;0<d&&(this.lastSelectedIndex=d-1,b.removeClass("selected"),a=a.eq(this.lastSelectedIndex),a.addClass("selected"),this.val(a.attr("data-value"),a.text()),this.liveContainer.text(a.text()),this.clearLiveText())}else a.removeClass("selected")}};
this.selectHighlighted=function(){if(this.isOpen&&this.hasResults()){0===this.getSelectedItem().length&&0===$(this.list[0]).find("li:hover").length&&this.selectDown();var a=arguments.length?arguments[0]:this.getSelectedItem(),b=a.attr("data-value"),d=a.text();this.lastSelectedIndex=a.index();var f=a.attr("data-json");a={};try{a=JSON.parse(f)}catch(q){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing SAYT data-json in selectHighlighted.")}if((f=void 0==a.value?null:a.value)&&
this.regexValidDataValue.test(f)&&(this.selectItem(b,d),e.isFunction(this.options.onSelect)))this.options.onSelect(a,this);this.hideList()}};this.clearSelection=function(a){this._onClear(a);if(e.isFunction(this.options.onSelect))this.options.onSelect(g,this)};this.getSelectedItem=function(){var a=this.list.find(".selected");a.length&&(a=$(a[0]));return a};this.val=function(a,b){if(arguments.length){if(this.hasUI){this.input.val(b).attr("lastSelectedValue",b).change();this.hiddenInput.val(a);this.value=
a;var d=this.list.children();d.each(function(a,b){$(b).removeClass("selected")});-1<this.lastSelectedIndex&&this.lastSelectedIndex<d.length?(d=$(d[this.lastSelectedIndex]),d.attr("data-value")===a&&d.addClass("selected")):d.each(function(b,d){b=$(d);if(b.attr("data-value")===a)return b.addClass("selected"),!1});null===a||void 0===a||0===a.length?this.el.addClass("empty"):this.el.removeClass("empty")}}else return this.hiddenInput.val()};this.setParser=function(a){this.parser=a};this.showList=function(){if(this.hasFocus){if(!this.disabled){this.lastSelectedIndex=
-1;var a=this.listWrapper.offset(),b=a.left+this.listWrapper.width();a=a.top+this.listWrapper.height();var d=$("body").height();this.isOpen=!0;this.el.addClass("list-open");this.input.attr("lastselectedvalue","").attr("aria-expanded","true");this.listWrapper.show();b>window.innerWidth&&this.listWrapper.css("width",this.listWrapper.width()-(b-window.innerWidth)+"px");a>d&&this.listWrapper.css("height",this.listWrapper.height()-(a-d)-20+"px");this.activate()}}else this.hideList()};this.hideList=function(){this.isOpen=
!1;this.el.removeClass("list-open");this.input.attr("aria-expanded","false");this.listWrapper&&(this.listWrapper.hide(),this.lastSelectedIndex=-1);this.screenreaderText.prop("hotelSelected")||this.screenreaderText.empty()};this.disable=function(){this.el.addClass("disabled");this.input.prop("disabled",!0);$('label[for="'+this.input.prop("id")+'"]').addClass("disabled");this.disabled=!0;this.hideList()};this.enable=function(){this.el.removeClass("disabled");this.input.prop("disabled",!1);$('label[for="'+
this.input.prop("id")+'"]').removeClass("disabled");this.disabled=!1};this.hasValidSelection=function(){return this.input&&this.input.val().length&&this.input.val()==this.input.attr("lastSelectedValue")?!0:!1};this.hasResults=function(){return 0<this.list.children().length};this.reset=function(){this.val("","")};this.createUI();this.val(this.hiddenInput.val(),this.input.val());this.clearLiveText=function(){var a=this;setTimeout(function(){a.liveContainer.text("")},2E3)}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var keyboard=utils.Keyboard;widgets=utils.getNamespace($namespace,"Widgets",{});var ACTION={INCREMENT:"increment",DECREMENT:"decrement",INPUT:"input"};
function NumberWidget(a,b,d){this.TranslationTexts={
                                        ACCESSIBILITY_NUMBER_SELECTED: "$number selected"
                                    };

    var TranslationTexts = this.TranslationTexts;
                                ;this.el=a;this.screenReaderMessages=d||{};this.screenReaderLiveSection=b;this.type="NumberWidget";this.input=this.el.find("input");this.min=+this.input.attr("min")||0;this.max=+this.input.attr("max")||1;this.incrementBtn=this.el.find(".ui-button.increment");this.decrementBtn=
this.el.find(".ui-button.decrement");this.disabled=!1;this.val(this.input.val());this.el.addClass("initialized");this.addEventListeners()}NumberWidget.prototype.id=function(){return this.input.prop("id")};NumberWidget.prototype._onClick=function(a){var b=$(a.currentTarget);b.hasClass("disabled")||(b.hasClass("increment")?this.increment():b.hasClass("decrement")&&this.decrement());a.preventDefault()};
NumberWidget.prototype._onKeypress=function(a){$namespace.Utils.Breakpoint.isDesktop()&&utils.Keyboard.isNumber(a)&&(a=$(a.currentTarget).val()||0,a=parseInt((""+a).replace(/[^0-9]/g,""),10),isNaN(a)&&(a=parseInt(""+a,10),isNaN(a)&&(a=0)),a>this.max&&(a=this.max),this.val(a,ACTION.INPUT))};NumberWidget.prototype._onFocusInput=function(a){a.currentTarget.select()};
NumberWidget.prototype._onButtonKeypress=function(a){var b=$(a.currentTarget);switch(keyboard.getCode(a)){case keyboard.ENTER:case keyboard.SPACE:b.hasClass("disabled")||(b.hasClass("increment")?this.increment():b.hasClass("decrement")&&this.decrement()),a.preventDefault()}};NumberWidget.prototype._onFocus=function(a){this.activate()};NumberWidget.prototype._onBlur=function(a){this.deactivate()};
NumberWidget.prototype.addEventListeners=function(){this.el.on("click",".ui-button",$.proxy(this._onClick,this));this.el.on("keypress",".ui-button",$.proxy(this._onButtonKeypress,this));this.el.on("keyup","input",$.proxy(this._onKeypress,this));this.el.on("focus","input",$.proxy(this._onFocusInput,this))};NumberWidget.prototype.removeEventListeners=function(){this.el.off("click")};NumberWidget.prototype.activate=function(){this.el.addClass("active")};NumberWidget.prototype.deactivate=function(){this.el.removeClass("active")};
NumberWidget.prototype.val=function(a,b){if(arguments.length){var d=+a||0;if(d>=this.min&&d<=this.max){this.value=d;var e="  "+$namespace.TranslationUtil.replaceParameters(this.TranslationTexts.ACCESSIBILITY_NUMBER_SELECTED,{number:d}),f=!1,g=!1,h;this.input.val(d).change();d>this.min?this.decrementBtn.removeClass("disabled").removeAttr("aria-disabled"):(this.decrementBtn.addClass("disabled").attr("aria-disabled","true"),f=!0);d<this.max?this.incrementBtn.removeClass("disabled").removeAttr("aria-disabled"):
(this.incrementBtn.addClass("disabled").attr("aria-disabled","true"),g=!0);b==ACTION.INCREMENT?h=g?(this.screenReaderMessages.incrementDisabled||"")+e:(this.screenReaderMessages.incrementEnabled||"")+e:b==ACTION.DECREMENT?h=f?(this.screenReaderMessages.decrementDisabled||"")+e:(this.screenReaderMessages.decrementEnabled||"")+e:b==ACTION.INPUT&&(h=e);h&&this.screenReaderLiveSection.text()!=h&&this.screenReaderLiveSection.text(h)}}else return this.input.val()};
NumberWidget.prototype.increment=function(a){a=utils.isUndefined(a)?1:+a;this.val(this.value+a,ACTION.INCREMENT)};NumberWidget.prototype.decrement=function(a){a=utils.isUndefined(a)?1:+a;this.val(this.value-a,ACTION.DECREMENT)};NumberWidget.prototype.disable=function(){this.el.addClass("disabled").attr("aria-diabled","true");this.disabled=!0};NumberWidget.prototype.enable=function(){this.el.removeClass("disabled").removeAttr("aria-disabled");this.disabled=!1};widgets.NumberWidget=NumberWidget;


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.SelectWidget=function(a,b){var d=$namespace.Utils;d.getNamespace($namespace,"Widgets",{});this.options=b||{};this.destroyUI=function(){this.el.remove()};this.id=function(){return this.select.prop("id")};this.selectItem=function(a){this.val(a);this.activate()};this.showError=function(){this.select.addClass("error")};this.clearError=function(){this.select.removeClass("error")};this.replaceOptions=function(a){if(a&&a.length){for(var b=null,d=this.val(),e=this.select[0].options.length=
0;e<a.length;e++){a[e].value=$namespace.StringUtil.decodeHTML(a[e].value);a[e].text=$namespace.StringUtil.decodeHTML(a[e].text);var k=new Option;k.value=a[e].value;a[e].text&&(k.text=a[e].text);0!=e||a[e].disabled||(b={text:a[e].text,value:a[e].value});a[e].disabled?k.disabled=!0:a[e].value==d&&d.length&&(b={text:a[e].text,value:a[e].value});a[e].selected&&(k.selected=!0,b={text:a[e].text,value:a[e].value});this.select[0].options[e]=k}b&&this.val(b.value,1)}};this.disable=function(){this.el.addClass("disabled");
this.select.prop("disabled",!0);this.disabled=!0;$('label[id="'+this.select.prop("id")+'-label"]').addClass("disabled")};this.enable=function(){this.el.removeClass("disabled");this.select.prop("disabled",!1);this.disabled=!1;$('label[id="'+this.select.prop("id")+'-label"]').removeClass("disabled")};this._selectHelper=function(a){var b=$(a.currentTarget),e=b.parent();switch(a.type){case "click":b.toggleClass("active");break;case "change":this.select&&(this.val(this.select.val(),1),$("option[value='"+
this.value+"']",this.select).attr("selected",!0).siblings().removeAttr("selected"));setTimeout(function(){b.removeClass("active")},100);break;case "focus":e.addClass("focus");break;case "blur":e.removeClass("active focus");b.removeClass("active focus");break;case "keydown":$namespace.Browser.isIE()&&d.Keyboard.getCode(a)===d.Keyboard.ESCAPE&&a.stopPropagation()}};this.addEventListeners=function(){if(this.select)this.select.on("click blur focus change keydown",function(a){return function(b){a._selectHelper(b)}}(this))};
this.removeEventListeners=function(){this.select&&this.select.off("click blur focus change keydown")};this.resize=function(){this.removeEventListeners();this.addEventListeners()};$(window).on("resize orientationchange",$.proxy(this.resize,this));this.val=function(a){if(arguments.length)this.select.val(a),this.value=a,1!=arguments.length||this.options.notFireChange||this.select.change();else return this.select.val()};this.el=a;this.el.length&&(this.el.get(0).selectWidget=this);this.type="SelectWidget";
this.select=this.el.find("select");this.disabled=!1;a=this.select.val();null==a&&this.select.length&&(a=this.select[0].options.length?this.select[0].options[0].value:a);this.val(a);this.el.addClass("initialized");this.resize();this.activate=function(){this.el.addClass("active")};this.deactivate=function(){this.el.removeClass("active")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function PhoneNumberWidget(a){this.el=a.el;this.keyboard=a.keyboard;this.phoneNumberField=this.el.find("#phone_number");this.addEventListeners()}PhoneNumberWidget.prototype.addEventListeners=function(){this.phoneNumberField.on("keydown",$.proxy(this._onPhoneNumberKeyDown,this));this.phoneNumberField.on("change",$.proxy(this._onPhoneNumberChange,this))};
PhoneNumberWidget.prototype.repositionDashes=function(a){a=a.replace(/-/g,"");3<=a.length&&(a=a.slice(0,3)+"-"+a.slice(3));7<=a.length&&(a=a.slice(0,7)+"-"+a.slice(7));return a};
PhoneNumberWidget.prototype.processNumberInput=function(a,b){var d=this.keyboard.getCode(b),e=this.phoneNumberField.get(0).selectionStart,f=this.phoneNumberField.get(0).selectionEnd,g=!1;if(this.keyboard.isNumber(b)){var h=a.length;d=96<=d?d-48:d;e<a.length?(a=this.repositionDashes(a.slice(0,e)+String.fromCharCode(d)+a.slice(f,h)),e++,g=!0):a=this.repositionDashes(a+String.fromCharCode(d));a.length<=PhoneNumberWidget.PHONE_NUMBER_LENGTH_WITH_DASHES&&(this.phoneNumberField.val(a),g&&this.phoneNumberField.get(0).setSelectionRange(e,
e));b.preventDefault()}};
PhoneNumberWidget.prototype.processNumberRemovalKeys=function(a,b){var d=this.keyboard.getCode(b),e=this.phoneNumberField.get(0).selectionStart,f=this.phoneNumberField.get(0).selectionEnd;if(d==this.keyboard.DELETE||d==this.keyboard.BACKSPACE){var g=a.length;e==g&&d==this.keyboard.BACKSPACE?(a=a.slice(0,g-1),this.phoneNumberField.val(a)):e<g&&(d==this.keyboard.DELETE||f>e?(f==e&&f++,a=this.repositionDashes(a.slice(0,e)+a.slice(f,g)),this.phoneNumberField.val(a)):0<e&&d==this.keyboard.BACKSPACE&&(a=
this.repositionDashes(a.slice(0,e-1)+a.slice(e,g)),this.phoneNumberField.val(a),e--),this.phoneNumberField.get(0).setSelectionRange(e,e));b.preventDefault()}};
PhoneNumberWidget.prototype._onPhoneNumberKeyDown=function(a){var b=$.trim(this.phoneNumberField.val()),d=this.keyboard.getCode(a);this.processNumberInput(b,a);this.processNumberRemovalKeys(b,a);d==this.keyboard.TAB||d==this.keyboard.BACKSPACE||d==this.keyboard.DELETE||d==this.keyboard.LEFT_ARROW||d==this.keyboard.RIGHT_ARROW||this.keyboard.isNumber(a)||a.preventDefault()};
PhoneNumberWidget.prototype._onPhoneNumberChange=function(a){a=$.trim(this.phoneNumberField.val());10==a.length&&0>a.indexOf("-")&&this.phoneNumberField.val(this.repositionDashes(a))};PhoneNumberWidget.PHONE_NUMBER_LENGTH_WITH_DASHES=12;PhoneNumberWidget.PHONE_NUMBER_LENGTH=10;$namespace.Widgets.PhoneNumberWidget=PhoneNumberWidget;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function PriceRangeWidget(a,b,d){this.active=!0;this.priceRangeField=$(a);this.loadSearchResults=b;this.keyboard=d.keyboard;this.currencyFormat=d.currencyFormat;this.initialValue=this.removeAllLettersAndSpaces(d.initialValue+"");this.setVal(this.initialValue);0>=this.initialValue?this.active=!1:this.addEventListeners()}
PriceRangeWidget.prototype.addEventListeners=function(){this.priceRangeField.on("focus",$.proxy(this._onFocus,this));this.priceRangeField.on("blur",$.proxy(this._onPriceRangeChange,this));if($namespace.Browser.isAndroid())this.priceRangeField.on("keyup",$.proxy(this._onPriceRangeKeyUpAndroid,this));else this.priceRangeField.on("keydown",$.proxy(this._onPriceRangeKeyDown,this))};PriceRangeWidget.prototype._onFocus=function(a){this.priceRangeField.val(this.removeTrailingLettersAndSpaces(this.priceRangeField.val()))};
PriceRangeWidget.prototype._onPriceRangeChange=function(a){var b=this.removeAllButNumbers(this.priceRangeField.val()),d=this.getIntVal();this.formatAndDisplayValue(b,!1);if(_.isEmpty(b)&&d!=this.initialValue||!_.isEmpty(b)&&b!=d)this.setVal(b),this.loadSearchResults(),a="priceRangeMin"==a.currentTarget.id?"Search_Results_Filter_Min_Amt":"Search_Results_Filter_Max_Amt",$("#hotelOnlySearchFilter").data("hotel-only-filter")&&(a="HO_"+a),$namespace.Analytics.trackEvent(a,"Enter",b);this.formatAndDisplayValue(b,
!1)};
PriceRangeWidget.prototype._onPriceRangeKeyUpAndroid=function(a){var b=this.keyboard.getCode(a),d=this.priceRangeField.get(0).selectionStart;b==this.keyboard.ENTER?(this.focusOnNext(),a.preventDefault()):(a=(this.priceRangeField.val().slice(0,d).match(/\D/g)||[]).length,this.formatAndDisplayValue(this.removeAllButNumbers(this.priceRangeField.val())),this.priceRangeField.val(this.removeTrailingLettersAndSpaces(this.priceRangeField.val())),b=(this.priceRangeField.val().slice(0,d).match(/\D/g)||[]).length,
this.priceRangeField.get(0).setSelectionRange(d+(b-a),d+(b-a)))};
PriceRangeWidget.prototype._onPriceRangeKeyDown=function(a){var b=$.trim(this.priceRangeField.val()),d=this.keyboard.getCode(a);this.processCharInput(b,a);this.processNumberInput(b,a);this.processNumberRemovalKeys(b,a);d==this.keyboard.TAB||d==this.keyboard.BACKSPACE||d==this.keyboard.DELETE||d==this.keyboard.LEFT_ARROW||d==this.keyboard.RIGHT_ARROW||this.keyboard.isNumber(a)||a.preventDefault();d==this.keyboard.ENTER&&(this.focusOnNext(),a.preventDefault())};
PriceRangeWidget.prototype.formatAndDisplayValue=function(a,b){a=a&&""!=a?a:0;0==a||a==this.initialValue?this.priceRangeField.val(""):(a=$namespace.CurrencyUtil.formatCurrencyWithoutDecimals({amount:a,format:this.currencyFormat,integerOnly:!0}),this.priceRangeField.val(a));a=this.removeAllButNumbers(this.priceRangeField.val());!1!==b&&!0!==b&&(b=1!=a.length);b&&this.ariaAnnounceValue()};
PriceRangeWidget.prototype.ariaAnnounceValue=function(){""==this.priceRangeField.val()?$namespace.Utils.updateLiveContainer("Empty"):$namespace.Utils.updateLiveContainer(this.priceRangeField.val())};PriceRangeWidget.prototype.processCharInput=function(a,b){a=this.keyboard.getCode(b);0==this.priceRangeField.get(0).selectionStart&&(a=String.fromCharCode(96<=a?a-48:a),b.shiftKey&&"4"==a&&(this.priceRangeField.val("$"),b.preventDefault()))};
PriceRangeWidget.prototype.processNumberInput=function(a,b){var d=this.keyboard.getCode(b),e=this.priceRangeField.get(0).selectionStart,f=this.priceRangeField.get(0).selectionEnd,g=(a.slice(0,e).match(/\D/g)||[]).length,h=!1;if(this.keyboard.isNumber(b)){var k=a.length;d=96<=d?d-48:d;e<a.length?(a=a.slice(0,e)+String.fromCharCode(d)+a.slice(f,k),e++,h=!0):a+=String.fromCharCode(d);this.formatAndDisplayValue(this.removeAllButNumbers(a));this.priceRangeField.val(this.removeTrailingLettersAndSpaces(this.priceRangeField.val()));
a=(this.priceRangeField.val().slice(0,e).match(/\D/g)||[]).length;h&&this.priceRangeField.get(0).setSelectionRange(e+(a-g),e+(a-g));b.preventDefault()}};
PriceRangeWidget.prototype.processNumberRemovalKeys=function(a,b){var d=this.keyboard.getCode(b),e=this.priceRangeField.get(0).selectionStart,f=this.priceRangeField.get(0).selectionEnd,g=(a.slice(0,e).match(/\D/g)||[]).length;if(d==this.keyboard.DELETE||d==this.keyboard.BACKSPACE){var h=a.length;e==h&&d==this.keyboard.BACKSPACE?a=a.slice(0,h-1):e<h&&(d==this.keyboard.DELETE||f>e?(f==e&&(f++,a.slice(e,e+1).match(/\D/)&&(e++,f++,g++)),a=a.slice(0,e)+a.slice(f,h)):d==this.keyboard.BACKSPACE&&0<e&&!a.slice(e-
1,e).match(/\$/)&&(a.slice(e-1,e).match(/\D/)&&(e--,g--),a=a.slice(0,e-1)+a.slice(e,h),e--));this.formatAndDisplayValue(this.removeAllButNumbers(a));this.priceRangeField.val(this.removeTrailingLettersAndSpaces(this.priceRangeField.val()));a=(this.priceRangeField.val().slice(0,e).match(/\D/g)||[]).length;this.priceRangeField.get(0).setSelectionRange(e+(a-g),e+(a-g));b.preventDefault()}};
PriceRangeWidget.prototype.setVal=function(a){""==a||0==a?this.priceRangeField.data("numberVal",this.initialValue):this.priceRangeField.data("numberVal",a)};PriceRangeWidget.prototype.getIntVal=function(){return this.priceRangeField.data("numberVal")};PriceRangeWidget.prototype.removeAllButNumbers=function(a){return a.replace(/[^0-9]/g,"")};PriceRangeWidget.prototype.removeAllLettersAndSpaces=function(a){return a.replace(/[a-zA-Z\s]/g,"")};
PriceRangeWidget.prototype.removeTrailingLettersAndSpaces=function(a){return a.replace(/[^0-9]*$/,"")};PriceRangeWidget.prototype.focusOnNext=function(){var a=this.priceRangeField.attr("tabindex");$('[tabindex="'+(parseInt(a)+1)+'"]').focus()};PriceRangeWidget.prototype.reset=function(){this.setVal(this.initialValue);this.formatAndDisplayValue(this.initialValue,!1)};$namespace.Widgets.PriceRangeWidget=PriceRangeWidget;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function DateRangeSlider(a,b){this.el=a;this.options=$.extend({},b);this.type="DateRangeSlider";this.slider=this.el.find(".noUiSlider").first();this.outputs=this.el.find(".range-slider-output");this.fields=this.el.find(".range-slider-field");this.sliderSteps=9E5;this.dateOutputFormat="h:mm a";this.dateFieldFormat="MM/DD/YYYY h:mm A";this.startDate=new Date(this.slider.data("min"));this.endDate=new Date(this.slider.data("max"));this.timestampStartDate=this.startDate.getTime();this.timestampEndDate=
this.endDate.getTime();this.sliderMinTime=this.timestampStartDate;this.sliderMaxTime=this.timestampEndDate;this.disabled=!1;this.timestampStartDate==this.timestampEndDate&&(this.timestampEndDate+=this.sliderSteps,this.disabled=!0);this.sliderPositionStart=this.options.sliderStart?(new Date(this.options.sliderStart)).getTime():this.sliderMinTime;this.sliderPositionEnd=this.options.sliderEnd?(new Date(this.options.sliderEnd)).getTime():this.sliderMaxTime;this.localeTimeFormat=$namespace.GlobalConstants.LOCALE_TIME_FORMAT;
null!=!this.localeTimeFormat&&(this.dateOutputFormat=this.localeTimeFormat);this.initSlider();this.el.addClass("initialized")}DateRangeSlider.prototype.resetSlider=function(){var a=this.slider[0];this.fields.eq(0).val(moment(this.startDate).format(this.dateFieldFormat));this.fields.eq(1).val(moment(this.endDate).format(this.dateFieldFormat));a.noUiSlider.reset();this.disabled&&(a.setAttribute("disabled",!0),$($(a).find(".noUi-handle")).addClass("disabled"))};
DateRangeSlider.prototype.initSlider=function(){var a=this,b=this.slider[0],d=function(b){return $namespace.DateUtil.getDayOfWeek(b).substring(0,3)+" "+moment(b).format(a.dateOutputFormat)},e=function(b){return moment(b).format(a.dateFieldFormat)};this.fields.eq(0).val(e(this.startDate));this.fields.eq(1).val(e(this.endDate));noUiSlider.create(b,{connect:[!1,!0,!1],range:{min:this.timestampStartDate,max:this.timestampEndDate},step:this.sliderSteps,start:[this.sliderPositionStart,this.sliderPositionEnd]});
b.noUiSlider.on("update",function(b,e){a.outputs.eq(e).html(d(new Date(+b[e])));a.updateSliderMinMaxValues(b)});b.noUiSlider.on("change",function(b,d){a.fields.eq(d).val(e(new Date(+b[d]))).change()});b.noUiSlider.on("set",function(b,d){a.updateSliderMinMaxValues(b)});b.querySelector(".noUi-handle.noUi-handle-lower").addEventListener("keydown",function(d){var f=Number(b.noUiSlider.get()[0]);switch(d.which){case 37:f-=a.sliderSteps;break;case 39:f+=a.sliderSteps}b.noUiSlider.set([f,null]);a.fields.eq(0).val(e(new Date(f))).change()});
b.querySelector(".noUi-handle.noUi-handle-upper").addEventListener("keydown",function(d){var f=Number(b.noUiSlider.get()[1]);switch(d.which){case 37:f-=a.sliderSteps;break;case 39:f+=a.sliderSteps}b.noUiSlider.set([null,f]);a.fields.eq(1).val(e(new Date(f))).change()});this.updateSliderAccessibiltyProperties()};
DateRangeSlider.prototype.updateSliderMinMaxValues=function(a){var b=this.slider[0],d=new Date(+a[0]);d=$namespace.DateUtil.getDayOfWeek(d)+" "+moment(d).format(this.dateOutputFormat);a=new Date(+a[1]);a=$namespace.DateUtil.getDayOfWeek(a)+" "+moment(a).format(this.dateOutputFormat);$(b).find(".noUi-handle.noUi-handle-lower").attr("aria-valuetext",d);$(b).find(".noUi-handle.noUi-handle-upper").attr("aria-valuetext",a)};
DateRangeSlider.prototype.updateSliderAccessibiltyProperties=function(){var a=this.slider[0];this.disabled?(a.querySelector(".noUi-handle.noUi-handle-lower").removeAttribute("tabindex"),a.querySelector(".noUi-handle.noUi-handle-upper").removeAttribute("tabindex")):(a.querySelector(".noUi-handle.noUi-handle-lower").setAttribute("data-taborder","document"),a.querySelector(".noUi-handle.noUi-handle-upper").setAttribute("data-taborder","document"));var b=$(this.fields[0]).attr("data-slider-label"),d=
$(this.fields[1]).attr("data-slider-label");$(a).find(".noUi-handle.noUi-handle-lower").attr("aria-label",b);$(a).find(".noUi-handle.noUi-handle-upper").attr("aria-label",d)};$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.DateRangeSlider=DateRangeSlider;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.Accordion=function(a,b){var d=$namespace.Config.STANDARD_ANIMATION_SPEED,e=this;this.el=a;this.options=$.extend({fireEvents:!0,itemSelector:".accordion-item",triggerSelector:".accordion-header",triggerButton:".accordion-button",contentSelector:".accordion-content",activeClass:"active",slideSpeed:d,scrollToActiveSection:!0,destination:"",cityCode:"",hotelId:""},b);this.item=this.el.find(this.options.itemSelector).first();this.trigger=this.el.find(this.options.triggerSelector).first();
this.button=this.el.find(this.options.triggerButton).first();this.content=this.el.find(this.options.contentSelector).first();this.activeClass=this.options.activeClass;this.isAnimating=!1;this.trigger.on("click",this._onTriggerClick.bind(this));this.trigger.keydown(function(a){var b=$namespace.Utils.Keyboard,d=b.getCode(a);d!==b.ENTER&&d!==b.SPACE||e._onTriggerClick(a)});this.el.addClass("initialized");this.button.length&&(this.item.hasClass("active")?this.button.attr("aria-expanded","true"):this.button.attr("aria-expanded",
"false"));$namespace.Utils.Breakpoint.isMobile()&&(a=this.el.find("[data-accordion-mobile-closed]"),a.removeClass("active"),a.find(".accordion-content").hide());this.modalContainer=this.el.parents("div.modal-content");a="accContent"+ ++$namespace.Widgets.Accordion.accIDCounter;this.el.find(".accordion-button").attr("aria-controls",a);this.el.find(".accordion-content").attr("id",a)};$namespace.Widgets.Accordion.accIDCounter=0;
$namespace.Widgets.Accordion.prototype.open=function(){var a=this,b=arguments.length?arguments[0]:!1;this.isAnimating=!0;this.item.addClass("animating");if(this.options.fireEvents){this.el.trigger("ct.accordion.opening",[this.item]);var d=this.el.find(".accordion-header").first();this.el.find(".accordion-button").first().attr("aria-expanded","true");var e=d.parent().parent();e.hasClass("nested-accordion")||e.hasClass("nested")?d.find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-up-thin-blue.svg"}):
d.hasClass("info-bar-price")?d.find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-up-white.svg"}):d.find("img:not([data-not-arrow])").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-up-blue.svg"})}this.content.slideDown(this.options.slideSpeed,function(){a.item.addClass(a.activeClass).removeClass("animating");a.isAnimating=!1;a.options.fireEvents&&a.el.trigger("ct.accordion.opened",[a.item]);!b&&a.options.scrollToActiveSection&&!a.item.parents("DIV.box-shadow-modal").length&&
isScrollFromTop(a)&&fScrollIntoView(a.el);a.updateTabOrder();$(window).trigger("resize")});d=this.el.find(".accordion-content").first();$namespace.ImageUtil.reloadMissingImages(d)};
$namespace.Widgets.Accordion.prototype.close=function(){var a=this,b=arguments.length?arguments[0]:!1;this.isAnimating=!0;this.item.addClass("animating");if(this.options.fireEvents){this.el.trigger("ct.accordion.closing",[this.item]);var d=this.el.find(".accordion-header").first();this.el.find(".accordion-button").first().attr("aria-expanded","false");var e=d.parent().parent();e.hasClass("nested-accordion")||e.hasClass("nested")?d.find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-down-thin-blue.svg"}):
d.hasClass("info-bar-price")?d.find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-down-white.svg"}):d.find("img:not([data-not-arrow])").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-down-blue.svg"})}d=b?0:this.options.slideSpeed;b?(a.item.removeClass(a.activeClass).removeClass("animating"),a.isAnimating=!1,this.content.hide(),a.options.fireEvents&&a.el.trigger("ct.accordion.closed",[a.item]),a.updateTabOrder(),$(window).trigger("resize")):
this.content.slideUp(d,function(){a.item.removeClass(a.activeClass).removeClass("animating");a.isAnimating=!1;a.options.fireEvents&&a.el.trigger("ct.accordion.closed",[a.item]);a.updateTabOrder();$(window).trigger("resize")})};
function fGetElementFitment(a){var b=$('.info-bar > [data-hook="sticky-bar"]'),d=Math.min(window.innerHeight-b.height(),window.innerHeight);b=Math.max(0,b.height());a=("string"===typeof a?document.querySelector(a):a[0]).getBoundingClientRect();var e=a.height<d,f=a.top>=b;d=a.top+a.height<d;return{isInViewPort:e&&f&&d,nTop:a.top,nBottom:a.bottom,nHeight:a.height,nTopLimit:b,fits:e,nViewHeight:window.innerHeight,isBelow:f,isAbove:d}}
function fScrollIntoView(a){var b="string"===typeof a?$(a):a;a=fGetElementFitment(a);var d;a.isInViewPort||(a.fits?a.isAbove?a.isBelow||(d=b.offset().top-a.nTopLimit-10):d=b.offset().top+b.height()-a.nViewHeight+10:d=b.offset().top-a.nTopLimit-10,$("body, html").animate({scrollTop:d},200))}function isScrollFromTop(a){var b=!1;$("body").scrollTop()<a.content[0].scrollHeight&&(b=!0);return b}
$namespace.Widgets.Accordion.prototype._onTriggerClick=function(a){a.preventDefault();this.isAnimating||(this.item.hasClass(this.activeClass)?(this.close(),this.el.trigger("ct.accordion.clicked_close",[this.el.find(".accordion-header").first().text(),this.el.find(".accordion-header").first().attr("data-headerTag")])):(this.open(),this.el.trigger("ct.accordion.clicked",[this.el.find(".accordion-header").first().text(),this.el.find(".accordion-header").first().attr("data-headerTag")])))};
$namespace.Widgets.Accordion.prototype.updateTabOrder=function(){this.modalContainer.length?$namespace.Widgets.Accordion.updateAllTabOrders(this.modalContainer):$namespace.Widgets.Accordion.updateAllTabOrders()};$namespace.Widgets.Accordion.updateAllTabOrders=function(a){arguments.length?(a=$(a),$namespace.TabOrder.updatePageTabOrder(a)):$namespace.TabOrder.updatePageTabOrder()};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		var DATE_REGEX=/((0[13578]|1[02])[\/.](0[1-9]|[12][0-9]|3[01])[\/.](20)[0-9]{2})|((0[469]|11)[\/.](0[1-9]|[12][0-9]|30)[\/.](20)[0-9]{2})|((02)[\/.](0[1-9]|1[0-9]|2[0-8])[\/.](20)[0-9]{2})|((02)[\/.]29[\/.](((20)(04|08|[2468][048]|[13579][26]))|2000))/g,FRENCH_DATE_REGEX=/((20)[0-9]{2}[-](0[13578]|1[02])[-](0[1-9]|[12][0-9]|3[01]))|((20)[0-9]{2}[-](0[469]|11)[-](0[1-9]|[12][0-9]|30))|((20)[0-9]{2}[-](02)[-](0[1-9]|1[0-9]|2[0-8]))|((((20)(04|08|[2468][048]|[13579][26]))|2000)[-](02)[-]29)/g,PHONE_REGEX=
/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;PHONE_EXTENSION_NOT_ALLOWED_REGEX=/[a-zA-Z\-\s\.,'#\/!@$%^&*()_+=\[\]{};:"\\|<>?]/g;utils=$namespace.Utils||{};
$namespace.Widgets.PaymentForm=function(a,b){var d=this;d.el=a;d.options=$.extend({scheduledDate:b.scheduledDate,scheduledDueDate:b.scheduledDueDate,scheduleCreditCardGroup:"#schedule-final-amount-group",depositCreditCardForm:".deposit-payment-credit-card-form",amountTextBoxes:".creditCardAmountTextBox",addCardParent:"#anotherCardDiv",addScheduleCardButton:"#schedule-payment-add-card-btn",addFullCardButton:"#full-payment-add-card-btn",removeCardButtons:".removeCreditCardButton",billingAddressCheckbox:".billingAddressCheckbox",
sameCreditCardCheckbox:".sameCreditCardCheckbox",addressForms:".addressForm",creditCardForms:".creditCardForm",shippingAddressForm:"#shippingAddressForm",translations:b.translations,messages:b.messages,dropDownSelect:".paymentDropDown",memberContactDetailsCard:"#memberContactDetailsCard",costcoCashCardForm:"#costcoShopCardDiv",cvvTooltip:'a[data-hook="cvv_card_tooltip"]',trackingText:b.trackingText},b);d.el.addClass("initialized");d.translations=d.options.translations;d.messages=d.options.messages;
d.addScheduleCardButton=d.el.find(d.options.addScheduleCardButton);d.addCardParent=d.el.find(d.options.addCardParent);d.depositCreditCardForm=d.el.find(d.options.depositCreditCardForm);d.addScheduleCardButton&&(d.addScheduleCardButton.attr("disabled","disabled"),d.addScheduleCardButton.on("click",d._addAnotherCard.bind(d)));d.addFullCardButton=d.el.find(d.options.addFullCardButton);d.addFullCardButton&&(d.addFullCardButton.attr("disabled","disabled"),d.addFullCardButton.on("click",d._addAnotherCard.bind(d)));
d.el.on("click",d.options.cvvTooltip,d.showCvvModal.bind(d));d.initializeFormElements();$("#surveyResponse").on("click focusin focusout",d.onDropDownSelect.bind(d));d.el.on("generatePaymentFormDetails",function(){d.generatePaymentFormDetails()});d.el.on("keyup",".city",d.onCityChange.bind(d))};$namespace.Widgets.PaymentForm.prototype.onCityChange=function(a){a.preventDefault();a=$(a.target);0<a.val().length&&a[0].setAttribute("aria-invalid","false")};
$namespace.Widgets.PaymentForm.prototype._onAmountChange=function(a){function b(a){if($("#schedule-final-amount-group")){var b=$("#scheduledAmountHeading"),d=$("#schedule-payment-add-card-btn");0===$(".scheduleCreditCardForm").length?a.createCreditCardForm?$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param({ccf:"CREATE_SCHEDULE_CREDIT_CARD_FORM"}),null,null,function(){$(".creditCardsForm").append(this.responseText);f.initializeFormElements();b.show();d.show();f.addScheduleCardButton.attr("disabled",
"disabled")}):(b.hide(),d.hide()):(b.show(),a.addCreditCardForm?(d.show(),0<a-a.totalCardsAmount&&d.removeAttr("disabled"),$namespace.TabOrder.updatePageTabOrder()):d.attr("disabled","disabled"))}}function d(a){if($("#full-credit-card-group")){var b=$("#full-payment-add-card-btn"),d=$(".fullCreditCardForm");3>d.length&&(b.show(),0<a-a.totalCardsAmount?(b.removeAttr("disabled"),$namespace.TabOrder.updatePageTabOrder()):b.attr("disabled","disabled"));if(a=d.first().find(".billingAddressCheckbox"))a.is(":checked")&&
a.click(),a.closest(".checkbox-widget").remove()}}function e(a,b){var d=$namespace.GlobalConstants.CURRENCY_FORMATS[b.attr("data-currencycode")];a={minAmount:$namespace.CurrencyUtil.formatCurrency({amount:a.minimumDepositAmount,format:d}),maxAmount:$namespace.CurrencyUtil.formatCurrency({amount:a.grossAmount,format:d})};a=$namespace.TranslationUtil.replaceParameters(f.messages.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE.translatedText,a);b.trigger("addError",a);b.focus();f.options.trackingText&&(b=f.options.trackingText.split(","),
$namespace.Analytics.trackEvent.apply($namespace.Analytics,b))}var f=this;a.preventDefault();var g=$(a.target),h=g.val();a=function(a){a=JSON.parse(a);var k=a.locale.replace("_","-"),l=new Intl.NumberFormat(k,{minimumFractionDigits:2});a.successful?($.each(a.deletedCreditCardInfoUuids,function(){$("#"+this).remove()}),g.hasClass("errorDetected")&&h!=g.data("current")&&(k=$(".creditCardAmountTextBox"),k.trigger("removeError"),"SCHEDULED"===a.paymentFormType&&(a.amountGreaterThanGross||a.isAmountLessThanMin)&&
e(a,k.first())),b(a,l),d(a,l),a.addCreditCardForm&&(k=a.grossAmount-a.totalCardsAmount,"DEPOSIT"===a.paymentFormType?f.addCardParent.data("remaining-amount",a.scheduledAmount):"SCHEDULED"===a.paymentFormType?(f.addCardParent.data("remaining-amount",a.scheduledAmount),f.addScheduleCardButton.removeAttr("disabled")):"FULL"===a.paymentFormType&&(f.addCardParent.data("remaining-amount",k),f.addFullCardButton.removeAttr("disabled")),f.addCardParent.data("paymentFormType",a.paymentFormType))):(g.maskMoney("mask",
a.adjustmentAmount),"DEPOSIT"!==a.paymentFormType&&"ADDITIONAL"!==a.paymentFormType||!a.amountGreaterThanGross&&!a.isAmountLessThanMin||e(a,g));g.trigger($namespace.Widgets.PaymentForm.amountChangeDoneEvent);$.each(a.creditCardUuidToAmount,function(){var a=Object.keys(this)[0],b=this[a];$("#amount_"+a).val(l.format(b))});f.initializeFormElements()};var k=g.data("current");if(""==k||""!=k&&g.val()!=k)k={ccf:"UPDATE_AMOUNT_FOR_CREDIT_CARD",creditCardInfoUuid:g.closest(".creditCardForm").data("uuid"),
amountToCharge:$namespace.CurrencyUtil.getUnMaskedValue(g)},$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param(k),null,null,a)};
$namespace.Widgets.PaymentForm.prototype._addAnotherCard=function(){var a=this,b=a.addCardParent.data("payment-form-type"),d={ccf:"ADD_CREDIT_CARD_FORM",paymentFormTypeValue:b,amountToCharge:a.addCardParent.data("remaining-amount")};$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param(d),null,null,function(d){$(".creditCardAmountTextBox").trigger("removeError");a.depositCreditCardForm&&a.depositCreditCardForm.find(".creditCardAmountTextBox").blur();d=JSON.parse(d);$(".creditCardsForm").append(this.responseText);
if("SCHEDULED"===b){var e=$("#schedule-final-amount-group .creditCardForm").last().find(".creditCardLabel");a.addScheduleCardButton.attr("disabled","disabled")}else"FULL"===b&&(e=$("#full-credit-card-group .creditCardForm").last().find(".creditCardLabel"),a.addFullCardButton.attr("disabled","disabled"));var g=$("#schedule-payment-add-card-btn"),h=$("#full-payment-add-card-btn");d.maximumNumberOfCreditCardsReached?"SCHEDULED"===b?g.hide():"FULL"===b&&h.hide():"SCHEDULED"===b?g.show().attr("disabled",
"disabled"):"FULL"===b&&h.show().attr("disabled","disabled");e.length?e.focus()[0].scrollIntoView({block:"center"}):null;a.initializeFormElements();a.options.trackFormFieldsAnalytics&&a.options.trackFormFieldsAnalytics()})};
$namespace.Widgets.PaymentForm.prototype._removeCreditCard=function(a){var b=this;a={ccf:"REMOVE_CARD_FORM",creditCardInfoUuid:a.target.id.split("_").pop()};$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param(a),null,null,function(a){a=JSON.parse(a);if(a.successful){$(".creditCardAmountTextBox").trigger("removeError");b.depositCreditCardForm&&b.depositCreditCardForm.find(".creditCardAmountTextBox").blur();$("#"+a.deletedCreditCardInfoUuids[0]).remove();var d=a.locale.replace("_",
"-"),f=new Intl.NumberFormat(d,{minimumFractionDigits:2});$.each(a.creditCardUuidToAmount,function(){var a=Object.keys(this)[0],b=this[a];$("#amount_"+a).val(f.format(b))});if("SCHEDULED"===a.paymentFormType){var g=$("#schedule-payment-add-card-btn");var h=a.adjustmentAmount;var k=$("#schedule-final-amount-group .creditCardForm").last().find(".creditCardAmountTextBox");g.show()}else"FULL"===a.paymentFormType&&(g=$("#full-payment-add-card-btn"),h=a.grossAmount,k=$("#full-credit-card-group .creditCardForm").last().find(".creditCardAmountTextBox"),
g.show());g&&(h-=a.totalCardsAmount,0<h?(g.removeAttr("disabled"),b.addCardParent.data("remaining-amount",h)):g.attr("disabled","disabled"));k.length?k.focus()[0].scrollIntoView({block:"center"}):null;b.addCardParent.data("paymentFormType",a.paymentFormType);b.initializeFormElements()}})};
$namespace.Widgets.PaymentForm.prototype.updateCreditCardLabel=function(){var a=this,b=$(".addedCard").find(".creditCardLabel");if(1<b.length){var d=1;b.each(function(){$(this).html(a.translations.CREDIT_CARD_LABEL+" "+d);d++})}else b.html(a.translations.CREDIT_CARD_LABEL)};
$namespace.Widgets.PaymentForm.prototype.initializeFormElements=function(){this.amountTextBoxes=this.el.find(this.options.amountTextBoxes);this.currencyCode=this.amountTextBoxes.first().data("currencycode");this.amountTextBoxes.not(".initialized").on("blur",this._onAmountChange.bind(this)).addClass("initialized").maskMoney({thousands:$namespace.GlobalConstants.CURRENCY_MASKS[this.currencyCode].thousands,decimal:$namespace.GlobalConstants.CURRENCY_MASKS[this.currencyCode].decimal,precision:$namespace.GlobalConstants.CURRENCY_MASKS[this.currencyCode].precision,
allowZero:!0,numeralMaxLength:!0});this.removeCardButtons=this.el.find(this.options.removeCardButtons).not(".initialized").on("click",this._removeCreditCard.bind(this)).addClass("initialized");this.initializeDatePickers();this.initializeAddressForms();this.initializeCreditCardForms();this.updateCreditCardLabel();this.mainBillingAddressForm=this.addressForms.first();$namespace.TabOrder.updatePageTabOrder();this.dropDownSelect=this.el.find(this.options.dropDownSelect);this.dropDownSelect.on("click keypress",
this._onSelectDropDownClick.bind(this));this.dropDownSelect.on("focusin",this._onSelectDropDownFocusIn.bind(this));this.dropDownSelect.on("focusout",this._onSelectDropDownFocusOut.bind(this));var a=[];$(".creditCardAmountTextBox").each(function(){var b=$(this);b.hasClass("errorHandlerInitialized")||a.push(new $namespace.Widgets.ErrorHandler(b))});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"amountGATracking",a);this.memberContactDetailsCard=$(this.options.memberContactDetailsCard);0<this.memberContactDetailsCard.length&&
this.initializeMemberContactDetailsCard();this.costcoCashCardForm=$(this.options.costcoCashCardForm);0<this.costcoCashCardForm.length&&this.initializeCostcoCashCardForm();this.shippingAddressForm=$(this.options.shippingAddressForm);0<this.shippingAddressForm.length&&this.initializeShippingAddress();this.sameCreditCardCheckbox=$(this.options.sameCreditCardCheckbox);0<this.sameCreditCardCheckbox.length&&this.initializeSameCreditCardCheckbox();$(window).resize()};
$namespace.Widgets.PaymentForm.prototype.initializeDatePickers=function(){var a=this,b=[];$(".scheduleCreditCardForm .creditCardScheduledDate").not(".hasDatepicker").each(function(){var d=$(this);d.on("blur",function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError")});d.datepicker({dateFormat:$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/yyyy/,"yy").toLowerCase(),inline:!0,minDate:new Date,maxDate:d.val(),defaultDate:d.val(),numberOfMonths:[2,1],autoSize:!1,
dayNamesMin:$namespace.Config.DAY_SHORT_NAMES,monthNames:$namespace.Config.MONTH_NAMES,showOn:"button",showAnim:"",buttonImage:$namespace.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:a.translations.SCHEDULE_DATE_CALENDAR_LABEL,prevText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON,beforeShowDay:function(a){a=$namespace.SearchWidgetsModule.getAccessibleDateLabel(a);
var b=$namespace.DateUtil.enhanceDateStringReadability(a);return[!0,"",a,b]},onClose:function(){var a=$(this);a={ccf:"UPDATE_SCHEDULED_DATE_FOR_CREDIT_CARD",creditCardInfoUuid:a.closest(".creditCardForm").data("uuid"),newScheduledDate:a.val()};$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param(a))}});d.datepicker("widget").addClass("ctc-ui ctc-ui-datepicker custom-datepicker-crossmark");$('input[format-date-input="true"]').off("input").on("input",function(){utils.formatDateInput($(this))});
var e={errorValidationType:"date",regex:DATE_REGEX,caRegex:FRENCH_DATE_REGEX,blankErrMsg:a.translations.SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE,regexErrMsg:a.translations.SCHEDULE_DATE_INVALID_ERROR_MESSAGE,specialErrMsg:a.messages.SCHEDULE_DATE_RANGE_ERROR_MESSAGE,latestDate:d.val()};d.scheduledDateTextBox=new $namespace.Widgets.ErrorHandler(d,e);b.push(d.scheduledDateTextBox)});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"datePickerGATracking",b)};
$namespace.Widgets.PaymentForm.prototype.initializeAddressForms=function(){var a={translations:this.translations};this.addressForms=this.el.find(this.options.addressForms);var b=this.addressForms.first().removeClass("slaveForm").addClass("masterForm").closest(".creditCardForm").find(".useBillingAsShippingMain");b&&b.removeClass("displayNone");this.addressForms.each($namespace.Utils.eachUninitialized(function(b,e){$(e).hasClass("masterForm")&&(a.masterForm=!0);e.addressForm=new $namespace.Widgets.AddressForm(b,
a)}))};
$namespace.Widgets.PaymentForm.prototype.initializeCreditCardForms=function(){var a={translations:this.translations,disableErrorHandler:this.options.disableErrorHandler};this.creditCardForms=this.el.find(this.options.creditCardForms);var b=this.creditCardForms.first();b.removeClass("slaveFrom").addClass("masterForm").find(".billingAddressCheckboxMain").addClass("displayNone");(b=b.find(".previousCardCheckboxMain"))&&b.addClass("displayNone");this.creditCardForms.each(function(a){$(this).attr("credit_card_form_index",a)});
this.creditCardForms.each($namespace.Utils.eachUninitialized(function(b,e){$(e).hasClass("masterForm")&&(a.masterForm=!0);e.creditCardForm=new $namespace.Widgets.CreditCardForm(b,a)}))};
$namespace.Widgets.PaymentForm.prototype.initializeMemberContactDetailsCard=function(){var a=this.memberContactDetailsCard;if(!a.hasClass("initialized")){var b={errorValidationType:"text",regex:PHONE_REGEX,matchRegex:!0,checkEmptyString:!0,blankErrMsg:this.translations.PRIMARY_PHONE_INVALID_ERROR_MESSAGE,regexErrMsg:this.translations.PHONE_10_DIGIT_ERROR_MESSAGE},d=$("#primary_phone").on("keypress",this.onPhoneKeypress.bind(this)).on("input",this.removeErrorAndVerifyPhoneAutoFill);b=new $namespace.Widgets.ErrorHandler(d,
b);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"primaryPhoneGATracking",b);b={errorValidationType:"text",matchRegex:!0,regex:PHONE_REGEX,checkEmptyString:!1,regexErrMsg:this.translations.PHONE_10_DIGIT_ERROR_MESSAGE};d=$("#alternate_phone").on("keypress",this.onPhoneKeypress.bind(this)).on("input",this.removeErrorAndVerifyPhoneAutoFill);b=new $namespace.Widgets.ErrorHandler(d,b);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"alternatePhoneGATracking",b);b={errorValidationType:"text",
regex:PHONE_EXTENSION_NOT_ALLOWED_REGEX,testRegex:!0,checkEmptyString:!1,regexErrMsg:this.translations.EXT_INVALID_ERROR_MESSAGE};d=$("#alternate_phone_extension").on("keypress",this.onPhoneExtKeypress.bind(this)).on("input",this.removeErrorAndVerifyPhoneExtAutoFill);b=new $namespace.Widgets.ErrorHandler(d,b);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"alternatePhoneExtGATracking",b);b={errorValidationType:"email",testRegex:!1,checkEmptyString:!0,blankErrMsg:this.translations.PRIMARY_EMAIL_MISSING_ERROR_MESSAGE,
regexErrMsg:this.translations.EMAIL_INVALID_ERROR_MESSAGE};d=$("#primary_email").on("keypress",this.onEmailKeypress.bind(this)).on("blur",this.onEmailBlur.bind(this));b=new $namespace.Widgets.ErrorHandler(d,b);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"primaryEmailGATracking",b);b={errorValidationType:"email",testRegex:!1,checkEmptyString:!1,regexErrMsg:this.translations.EMAIL_INVALID_ERROR_MESSAGE};d=$("#alternate_email").on("keypress",this.onEmailKeypress.bind(this)).on("blur",this.onEmailBlur.bind(this));
b=new $namespace.Widgets.ErrorHandler(d,b);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"alternateEmailGATracking",b);a.addClass("initialized")}};$namespace.Widgets.PaymentForm.prototype.hasSelectedText=function(a){return a.selectionStart!=a.selectionEnd};
$namespace.Widgets.PaymentForm.prototype.onPhoneKeypress=function(a){var b=a.charCode||a.keyCode||0;a=$(a.target);var d=a.val();if(12>=d.length)""!=d&&d!=a.data("current")&&a.trigger("removeError"),8!==b&&9!==b&&(3===a.val().length?a.val(a.val()+"-"):7===a.val().length&&a.val(a.val()+"-"));else return!1};$namespace.Widgets.PaymentForm.prototype.onPhoneBlur=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError")};
$namespace.Widgets.PaymentForm.prototype.removeErrorAndVerifyPhoneAutoFill=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError");b=b.replace(/\W/g,"");b=b.replace(/[A-Za-z]/g,"");var d=b.substring(0,3),e=b.substring(3,6);b=b.substring(6,10);d=""+d;0<e.length&&(d=d+"-"+e);0<b.length&&(d=d+"-"+b);a.val(d)};
$namespace.Widgets.PaymentForm.prototype.onPhoneExtKeypress=function(a){var b=$(a.target),d=b.val();""!=d&&d!=b.data("current")&&b.trigger("removeError");return $namespace.Validation.checkNumericKeyCode(a)&&(this.hasSelectedText(a.target)||5>d.length)};$namespace.Widgets.PaymentForm.prototype.removeErrorAndVerifyPhoneExtAutoFill=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError");b=b.replace(/\W/g,"");b=b.replace(/[A-Za-z]/g,"");a.val(b)};
$namespace.Widgets.PaymentForm.prototype.removeErrorAndVerifyEmailAutoFill=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError")};$namespace.Widgets.PaymentForm.prototype.onEmailBlur=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError");return 100>b.length};$namespace.Widgets.PaymentForm.prototype.onEmailKeypress=function(a){return 100>$(a.target).val.length||this.hasSelectedText(a.target)};
$namespace.Widgets.PaymentForm.prototype._onSelectDropDownClick=function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")};$namespace.Widgets.PaymentForm.prototype._onSelectDropDownFocusIn=function(a){a.preventDefault()};$namespace.Widgets.PaymentForm.prototype._onSelectDropDownFocusOut=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")};
$namespace.Widgets.PaymentForm.prototype.initializeCostcoCashCardForm=function(){var a=this.costcoCashCardForm;if(!a.hasClass("initialized")){var b=$("#confirmCashCardShippingAddress"),d=new $namespace.Widgets.ErrorHandler(b,{errorValidationType:"checkbox",parentDivId:"paymentFormCostcoShopCardForm",addClassOnError:"sp-bot-8",blankErrMsg:this.translations.COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"shopCardCheckboxGATracking",d);b.on("click",
function(a){a=$(a.target);a.is(":checked")&&a.trigger("removeError")});$(".shopCardToolTip").each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),{parentSelector:"li"}))});a.addClass("initialized")}};
$namespace.Widgets.PaymentForm.prototype.initializeShippingAddress=function(){$(".sameAsBillingAddressCheckbox").not("initialized").each(function(){var a=$(this),b=$("#shippingAddressForm").find(".addressForm").addClass("slaveForm"),d=$(".addressForm.masterForm"),e=b.find(".country").prop("disabled","disabled").addClass("slaveForm"),f=b.find(".street").prop("disabled","disabled").addClass("slaveForm"),g=b.find(".streetApt").prop("disabled","disabled").addClass("slaveForm"),h=b.find(".city").prop("disabled",
"disabled").addClass("slaveForm"),k=b.find(".stateOrProvince").prop("disabled","disabled").addClass("slaveForm"),l=b.find(".zipCode").prop("disabled","disabled").addClass("slaveForm"),p=d.find(".country"),q=d.find(".street"),r=d.find(".streetApt"),v=d.find(".city"),n=d.find(".stateOrProvince"),t=d.find(".zipCode");a.addClass("initialized").on("click",function(a){var d=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase().split("_").pop().toUpperCase();$(a.target).is(":checked")?(b.addClass("slaveForm"),
e.addClass("slaveForm").val(p.val()).prop("disabled","disabled").change(),f.addClass("slaveForm").val(q.val()).prop("disabled","disabled"),g.addClass("slaveForm").val(r.val()).prop("disabled","disabled"),h.addClass("slaveForm").val(v.val()).prop("disabled","disabled"),k.addClass("slaveForm").prop("disabled","disabled"),l.addClass("slaveForm").val(t.val()).prop("disabled","disabled")):(b.removeClass("slaveForm").trigger("removeError"),e.removeClass("slaveForm").val(d).prop("disabled",!1).trigger("removeError"),
f.removeClass("slaveForm").val("").prop("disabled",!1).trigger("removeError"),g.removeClass("slaveForm").val("").prop("disabled",!1).trigger("removeError"),h.removeClass("slaveForm").val("").prop("disabled",!1).trigger("removeError"),k.removeClass("slaveForm").val("select").prop("disabled",!1).trigger("removeError"),l.removeClass("slaveForm").val("").prop("disabled",!1).trigger("removeError"))});b.on("reset",function(){e.prop("disabled","disabled").addClass("slaveForm").val(p.val()).change();f.prop("disabled",
"disabled").addClass("slaveForm").val("");g.prop("disabled","disabled").addClass("slaveForm").val("");h.prop("disabled","disabled").addClass("slaveForm").val("");k.prop("disabled","disabled").addClass("slaveForm").val(n.val());l.prop("disabled","disabled").addClass("slaveForm").val("")})})};
$namespace.Widgets.PaymentForm.prototype.initializeSameCreditCardCheckbox=function(){this.sameCreditCardCheckbox.on("click",function(a){var b=$(".creditCardForm").first(),d=b.find(".cardholderName").trigger("removeError"),e=b.find(".creditCardNumber").trigger("removeError"),f=b.find(".expirationMonthUtilityClass").trigger("removeError"),g=b.find(".expirationYearUtilityClass").trigger("removeError");b.find(".creditCardCheckSecurityCode").trigger("removeError");var h=b.find(".country"),k=b.find(".street").trigger("removeError"),
l=b.find(".streetApt").trigger("removeError"),p=b.find(".city").trigger("removeError"),q=b.find(".stateOrProvince").trigger("removeError"),r=b.find(".zipCode").trigger("removeError"),v=$(a.target);v.is(":checked")?(h.data("previousValue",h.val()),$namespace.AjaxUtil.makeAjaxCall("creditCardFormActivity.act",$.param({ccf:"GET_PREVIOUS_SESSION_CREDIT_CARD_INFO"}),null,null,function(a,b,u,w,y,z,x,B,G,H){h.val(y).prop("disabled","disabled").change();$(".country.slaveForm").val(y);d.val(a).prop("disabled",
"disabled");$(".cardholderName.slaveForm").val(a).trigger("removeError");e.val(b).prop("disabled","disabled");$(".creditCardNumber.slaveForm").val(b).trigger("removeError");f.val(u).prop("disabled","disabled");$(".expirationMonthUtilityClass.slaveForm").val(u).trigger("removeError");g.val(w).prop("disabled","disabled");$(".expirationYearUtilityClass.slaveForm").val(w).trigger("removeError");k.val(z).prop("disabled","disabled");$(".street.slaveForm").val(z).trigger("removeError");l.val(x).prop("disabled",
"disabled");$(".streetApt.slaveForm").val(x);p.val(B).prop("disabled","disabled");$(".city.slaveForm").val(B).trigger("removeError");r.val(H).prop("disabled","disabled");$(".zipCode.slaveForm").val(H).trigger("removeError");setTimeout(function(){v.is(":checked")&&(q.prop("disabled","disabled").val(G),$(".stateOrProvince.slaveForm").val(G))},1E3)})):(a=h.data("previousValue"),h.prop("disabled",!1).val(a).change(),$(".country.slaveForm").val(a),d.prop("disabled",!1).val(""),$(".cardholderName.slaveForm").val("").trigger("removeError"),
e.prop("disabled",!1).val(""),$(".creditCardNumber.slaveForm").val("").trigger("removeError"),f.prop("disabled",!1).val("month"),$(".expirationMonthUtilityClass.slaveForm").val("month").trigger("removeError"),g.prop("disabled",!1).val("year"),$(".expirationYearUtilityClass.slaveForm").val("year").trigger("removeError"),k.prop("disabled",!1).val(""),$(".street.slaveForm").val("").trigger("removeError"),l.prop("disabled",!1).val(""),$(".streetApt.slaveForm").val("").trigger("removeError"),p.prop("disabled",
!1).val(""),$(".city.slaveForm").val("").trigger("removeError"),q.prop("disabled",!1).val("select"),$(".stateOrProvince.slaveForm").val("").trigger("removeError"),r.prop("disabled",!1).val(""),$(".zipCode.slaveForm").val("").trigger("removeError"))})};
$namespace.Widgets.PaymentForm.prototype.generatePaymentFormDetails=function(){var a=[],b=$(".creditCardForm");b.each(function(b,d){b=$(d);var e=$namespace.CurrencyUtil.getUnMaskedValue($(d).find(".creditCardAmountTextBox"));if(0<e){var f=b.find(".creditCardScheduledDate");if(0<f.length){if(f=f.val(),"fr_ca"===$namespace.GlobalConstants.LOCALE_CODE.toLowerCase()){var g=$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM"),p=$namespace.DateUtil.getDefaultDateFormat();f=$namespace.DateUtil.reformatDateString(f,
g,p)}}else f=void 0;d=d.creditCardForm;g=b.find(".addressForm");p=d.creditCardNumber.attr("id").split("_").pop();var q=d.creditCardNumber;e={creditCardInfoUuid:p,creditCardType:q.data("cardType"),creditCardAmount:e,creditCardScheduledDate:f,creditCardHolderName:d.cardholderName.val(),creditCardNumber:q.val(),creditCardExpiryMonth:d.creditCardExpiryMonth.val(),creditCardExpiryYear:d.creditCardExpiryYear.val(),cvvCode:d.cvvCode.val(),country:d.countrySelect.val(),street:g.find(".street").val(),street2:g.find(".streetApt").val(),
city:g.find(".city").val(),state:g.find(".stateOrProvince").val(),zipCode:g.find(".zipCode").val(),sameCreditCard:!1,previousCreditCard:!1};f=b.find(".sameCreditCardCheckbox");0<f.length&&f.is(":checked")&&(e.sameCreditCard=!0);b=b.find(".previousCardCheckbox");0<b.length&&b.is(":checked")&&(e.previousCreditCard=!0);a.push(e)}});var d={creditCards:a},e=$("#costcoShopCardForm");0<e.length&&(e={country:e.find(".country").data("country"),street:e.find(".street").val(),street2:e.find(".streetApt").val(),
city:e.find(".city").val(),state:e.find(".stateOrProvince").val(),zipCode:e.find(".zipCode").val()},d.shopCardDetails=e);e=$("#memberContactDetails");0<e.length&&(e={primaryPhone:e.find("#primary_phone").val().replace(/-/g,""),alternatePhone:e.find("#alternate_phone").val().replace(/-/g,""),alternatePhoneExtension:e.find("#alternate_phone_extension").val(),primaryEmail:$namespace.StringUtil.escapeNonAsciiChars(e.find("#primary_email").val()),alternateEmail:$namespace.StringUtil.escapeNonAsciiChars(e.find("#alternate_email").val())},
d.memberContactDetails=e);e=$("#shippingAddressForm");0<e.length&&(e={country:e.find(".country").val(),street:e.find(".street").val(),street2:e.find(".streetApt").val(),city:e.find(".city").val(),state:e.find(".stateOrProvince").val(),zipCode:e.find(".zipCode").val()},$(".sameAsBillingAddressCheckbox").first().is(":checked")&&(b=b.first(),e.country=b.find(".country").val(),e.street=b.find(".street").val(),e.street2=b.find(".streetApt").val(),e.city=b.find(".city").val(),e.state=b.find(".stateOrProvince").val(),
e.zipCode=b.find(".zipCode").val()),d.shippingAddress=e);b=$("#surveyResponse");0<b.length&&(e=b.data("id"),b={surveyResponse:b.children("option:selected").val(),surveyDefinitionId:e,questionId:e,userDefinedResponse:"false",comments:"",matrixQuestion:"",productId:"",query_mode:"CREATE"},d.SURVEY_RESPONSE=b);this.el.data("paymentFormDetails",d)};
$namespace.Widgets.PaymentForm.prototype.showCvvModal=function(){var a=$.param({pfa:"LOAD_SHOW_CVV_CODE_POPUP"});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)};
$namespace.Widgets.PaymentForm.prototype.onDropDownSelect=function(a){a.preventDefault();var b=$("#"+a.target.id),d=$(a.currentTarget);"focusout"==a.type?b.hasClass("active")?(b.removeClass("active"),d.parent().removeClass("focus")):d.parent().hasClass("focus")?d.parent().removeClass("focus"):b.addClass("active"):"focusin"==a.type?d.parent().addClass("focus"):"click"==a.type&&(b.hasClass("active")?b.removeClass("active"):b.addClass("active"))};
$namespace.Widgets.PaymentForm.addGATrackingMethod=function(a,b,d){a[b]=function(a){$.isArray(d)?d.forEach(function(b){b.setTrackingText(a)}):d.setTrackingText(a)}};$namespace.Widgets.PaymentForm.amountChangeDoneEvent="amountChangeDoneEvent";

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		STREET_NOT_ALLOWED_REGEX=/[!@$%^&*()_+=\[\]{};:"\\|<>?]/g;CITY_NOT_ALLOWED_REGEX=/[!@#$%^&*()_+=\[\]{};:"\\|,<>\/?]/g;POSTAL_CODE_REGEX=/^[a-zA-Z][0-9][a-zA-Z](-| |)?[0-9][a-zA-Z][0-9]$/g;ZIPCODE_REGEX=/[0-9]{5}/;
$namespace.Widgets.AddressForm=function(a,b){this.el=a;this.options=$.extend({countrySelect:".country",streetTextBox:".street",streetAptTextBox:".streetApt",cityTextBox:".city",zipCodeTextBox:".zipCode",stateOrProvinceSelect:".stateOrProvince",masterForm:b.masterForm,slaveForm:b.slaveForm,translations:b.translations,dropDownSelect:".addressDropDown"},b);this.el.addClass("initialized");this.countrySelect=this.el.find(this.options.countrySelect).on("change",this.onCountryChange.bind(this));this.translations=
this.options.translations;this.streetTextBox=this.el.find(this.options.streetTextBox).on("keypress",this.onStreetKeypress.bind(this)).on("input",this.onStreetInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.streetTextBoxValidator=new $namespace.Widgets.ErrorHandler(this.streetTextBox,{errorValidationType:"text",regex:STREET_NOT_ALLOWED_REGEX,testRegex:!0,checkEmptyString:!0,doNotTrim:!0,blankErrMsg:this.translations.STREET_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.STREET_INVALID_ERROR_MESSAGE,
countrySelector:this.countrySelect,validatorForm:"address",validatorKey:"street"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"streetGATracking",this.streetTextBoxValidator);this.streetAptTextBox=this.el.find(this.options.streetAptTextBox).on("keypress",this.onStreetAptKeypress.bind(this)).on("input",this.onStreetAptInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.streetAptTextBoxValidator=new $namespace.Widgets.ErrorHandler(this.streetAptTextBox,{errorValidationType:"text",
regex:STREET_NOT_ALLOWED_REGEX,testRegex:!0,checkEmptyString:!1,doNotTrim:!0,regexErrMsg:this.translations.STREET2_INVALID_ERROR_MESSAGE,countrySelector:this.countrySelect,validatorForm:"address",validatorKey:"street2"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"streetAptGATracking",this.streetAptTextBoxValidator);this.cityTextBox=this.el.find(this.options.cityTextBox).on("keypress",this.onCityKeypress.bind(this)).on("input",this.onCityInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));
this.cityTextBoxValidator=new $namespace.Widgets.ErrorHandler(this.cityTextBox,{errorValidationType:"text",regex:CITY_NOT_ALLOWED_REGEX,testRegex:!0,checkEmptyString:!0,doNotTrim:!0,blankErrMsg:this.translations.CITY_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CITY_INVALID_ERROR_MESSAGE,countrySelector:this.countrySelect,validatorForm:"address",validatorKey:"city"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"cityGATracking",this.cityTextBoxValidator);this.initializeStateOrProvinceSelect();
this.initializeZipCodeTextBox();this.billingAddressCheckbox=this.el.closest(".creditCardForm").find(".billingAddressCheckbox");this.masterFrom=this.options.masterForm;if(this.billingAddressCheckbox)this.billingAddressCheckbox.on("click",this.onBillingAddressCheckboxChange.bind(this));this.dropDownSelect=this.el.find(this.options.dropDownSelect);this.dropDownSelect.on("click keypress",this.onSelectDropDownClick.bind(this));this.dropDownSelect.on("focusin",this.onSelectDropDownFocusIn.bind(this));this.dropDownSelect.on("focusout",
this.onSelectDropDownFocusOut.bind(this))};
$namespace.Widgets.AddressForm.prototype.initializeStateOrProvinceSelect=function(){this.stateOrProvinceSelect=this.el.find(this.options.stateOrProvinceSelect).on("change",this.onStateOrProvinceChange.bind(this));this.stateOrProvinceSelectValidator=new $namespace.Widgets.ErrorHandler(this.stateOrProvinceSelect,{errorValidationType:"select",blankErrMsg:this.translations.STATE_VALIDATION_ERROR_MESSAGE,caBlankErrMsg:this.translations.PROVINCE_VALIDATION_ERROR_MESSAGE,countrySelector:this.countrySelect,
needCountrySwitch:!0,validatorForm:"address",validatorKey:"state"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"stateOrProvinceGATracking",this.stateOrProvinceSelectValidator)};
$namespace.Widgets.AddressForm.prototype.initializeZipCodeTextBox=function(){this.zipCodeTextBox=this.el.find(this.options.zipCodeTextBox).on("keypress",this.onZipCodeKeypress.bind(this)).on("input",this.onZipCodeInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.zipCodeTextBoxValidator=new $namespace.Widgets.ErrorHandler(this.zipCodeTextBox,{errorValidationType:"text",regex:ZIPCODE_REGEX,caRegex:POSTAL_CODE_REGEX,matchRegex:!0,doNotTrim:!0,checkEmptyString:!0,blankErrMsg:this.translations.ZIP_VALIDATION_ERROR_MESSAGE,
regexErrMsg:this.translations.ZIP_INVALID_ERROR_MESSAGE,caBlankErrMsg:this.translations.POSTAL_CODE_VALIDATION_ERROR_MESSAGE,caRegexErrMsg:this.translations.POSTAL_CODE_INVALID_ERROR_MESSAGE,countrySelector:this.countrySelect,needCountrySwitch:!0,validatorForm:"address",validatorKey:"zip"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"zipCodeGATracking",this.zipCodeTextBoxValidator)};
$namespace.Widgets.AddressForm.prototype.onCountryChange=function(a){var b=this,d=$(a.target);a=a.target.id.split("_").pop();var e=$("#country_"+a).val();d.data("country",e);var f=$("#zip_"+a),g=$("#state-province-span_"+a),h=$("#zip-span_"+a);e==$namespace.Country.US_COUNTRY_CODE?(g.text(b.translations.STATE_LABEL),h.text(b.translations.ZIPCODE_LABEL),f.prop({maxlength:5,value:""})):(g.text(b.translations.PROVINCE_LABEL),h.text(b.translations.POSTALCODE_LABEL),f.prop({maxlength:7,value:""}));d.trigger($namespace.Widgets.AddressForm.countryChangeEvent);
$namespace.AjaxUtil.makeAjaxCall("addressFormActivity.act",$.param({af:"LOAD_STATE_OR_PROVINCES",country:e,creditCardInfoUuid:a}),null,null,function(a,g){a=JSON.parse(a);a.unshift({value:"select",text:b.translations.SELECT_TEXT});a=JSON.stringify(a);$namespace.DomUtil.replaceOptions("state_"+g,a);d.closest(".addressForm").hasClass("masterForm")?($(".country.slaveForm").val(e).change().closest(".addressForm").find(".errorHandlerInitialized").trigger("removeError"),$(".zipCode.slaveForm").val(f.val()).prop("maxlength",
e==$namespace.Country.US_COUNTRY_CODE?5:7).trigger("removeError").trigger("verifyAutoFill")):d.hasClass("slaveForm")&&(g=$(".addressForm.masterForm").find(".stateOrProvince").val(),d.closest(".addressForm").find(".stateOrProvince").val(g));d.closest(".addressForm").find(".errorHandlerInitialized").trigger("removeError");return!0},"",[a])};
$namespace.Widgets.AddressForm.prototype.onStateOrProvinceChange=function(a){a=$(a.target);a.trigger("removeError");a.closest(".addressForm").hasClass("masterForm")&&$(".stateOrProvince.slaveForm").val(a.val()).change().trigger("removeError")};$namespace.Widgets.AddressForm.prototype.onSelectDropDownClick=function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")};$namespace.Widgets.AddressForm.prototype.onSelectDropDownFocusIn=function(a){a.preventDefault()};
$namespace.Widgets.AddressForm.prototype.onSelectDropDownFocusOut=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")};$namespace.Widgets.AddressForm.prototype.hasSelectedText=function(a){return a.selectionStart!=a.selectionEnd};$namespace.Widgets.AddressForm.prototype.removeErrorAndVerifyAutoFill=function(a){a=$(a.target);var b=a.val();""!=b&&b!=a.data("current")&&a.trigger("removeError").trigger("verifyAutoFill")};
$namespace.Widgets.AddressForm.prototype.onStreetKeypress=function(a){return $namespace.Validation.isStreetAddressKeyCode(a)&&(this.hasSelectedText(a.target)||30>$(a.target).val().length)};$namespace.Widgets.AddressForm.prototype.onStreetInput=function(a){var b=$(a.target),d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));b.closest(".addressForm").hasClass("masterForm")&&$(".street.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")};
$namespace.Widgets.AddressForm.prototype.onStreetAptKeypress=function(a){return $namespace.Validation.isStreetAddressKeyCode(a)&&(this.hasSelectedText(a.target)||30>$(a.target).val().length)};$namespace.Widgets.AddressForm.prototype.onStreetAptInput=function(a){var b=$(a.target);""!=b.val()&&b.trigger("removeError");var d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));b.closest(".addressForm").hasClass("masterForm")&&$(".streetApt.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")};
$namespace.Widgets.AddressForm.prototype.onCityKeypress=function(a){return $namespace.Validation.isCityNameKeyCode(a)&&(this.hasSelectedText(a.target)||20>$(a.target).val().length)};$namespace.Widgets.AddressForm.prototype.onCityInput=function(a){var b=$(a.target),d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));b.closest(".addressForm").hasClass("masterForm")&&$(".city.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")};
$namespace.Widgets.AddressForm.prototype.onZipCodeKeypress=function(a){var b=$(a.target);if(5==b.prop("maxlength"))return $namespace.Validation.checkNumericKeyCode(a)&&(this.hasSelectedText(a.target)||5>b.val().length);if(!$namespace.Validation.isAlphaNumericKeyCode(a)&&32!=a.keyCode||$namespace.Validation.isBackspaceKey(a))return!1;var d=b.val();this.hasSelectedText(a.target)&&(d=d.substring(0,a.target.selectionStart)+d.substring(a.target.selectionEnd));d=d.toUpperCase().replace(/\W/g,"");3<=d.length&&
(d=d.match(/.{1,3}/g).join(" "));b.val(d)};$namespace.Widgets.AddressForm.prototype.onZipCodeInput=function(a){var b=$(a.target),d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));b.closest(".addressForm").hasClass("masterForm")&&$(".zipCode.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")};
$namespace.Widgets.AddressForm.prototype.onBillingAddressCheckboxChange=function(a){var b=$(a.target),d=$(".addressForm").first();b.is(":checked")?(b={country:d.find(".country").val(),street:d.find(".street").val(),street2:d.find(".streetApt").val(),city:d.find(".city").val(),stateOrProvince:d.find(".stateOrProvince").val(),zipCode:d.find(".zipCode").val()},this.disableFields(b,a)):this.enableFields(a)};
$namespace.Widgets.AddressForm.prototype.disableFields=function(a,b){var d=this;d.currentCountrySelect=d.countrySelect.val();if(d.countrySelect.val()!=a.country){b=b.target.id.split("_").pop();var e=$("#zip_"+b),f=$("#state-province-span_"+b),g=$("#zip-span_"+b);a.country==$namespace.Country.US_COUNTRY_CODE?(f.text(d.translations.STATE_LABEL),g.text(d.translations.ZIPCODE_LABEL),e.prop({maxlength:5,value:""})):(f.text(d.translations.PROVINCE_LABEL),g.text(d.translations.POSTALCODE_LABEL),e.prop({maxlength:7,
value:""}));$namespace.AjaxUtil.makeAjaxCall("addressFormActivity.act",$.param({af:"LOAD_STATE_OR_PROVINCES",country:a.country,creditCardInfoUuid:b}),null,null,function(b,e){b=JSON.parse(b);b.unshift({value:"select",text:d.translations.SELECT_TEXT});b=JSON.stringify(b);$namespace.DomUtil.replaceOptions("state_"+e,b);d.countrySelect.val(a.country).attr("disabled","disabled").addClass("slaveForm");d.streetTextBox.val(a.street).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");
d.streetAptTextBox.val(a.street2).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");d.cityTextBox.val(a.city).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");d.stateOrProvinceSelect.val(a.stateOrProvince).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");d.zipCodeTextBox.val(a.zipCode).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");return!0},"",[b])}else d.countrySelect.val(a.country).attr("disabled",
"disabled").addClass("slaveForm"),d.streetTextBox.val(a.street).attr("disabled","disabled").addClass("slaveForm").trigger("removeError"),d.streetAptTextBox.val(a.street2).attr("disabled","disabled").addClass("slaveForm").trigger("removeError"),d.cityTextBox.val(a.city).attr("disabled","disabled").addClass("slaveForm").trigger("removeError"),d.stateOrProvinceSelect.val(a.stateOrProvince).attr("disabled","disabled").addClass("slaveForm").trigger("removeError"),d.zipCodeTextBox.val(a.zipCode).attr("disabled",
"disabled").addClass("slaveForm").trigger("removeError")};
$namespace.Widgets.AddressForm.prototype.enableFields=function(a){var b=this;if(b.countrySelect.val()!=b.currentCountrySelect){a=a.target.id.split("_").pop();var d=$("#zip_"+a),e=$("#state-province-span_"+a),f=$("#zip-span_"+a);b.currentCountrySelect==$namespace.Country.US_COUNTRY_CODE?(e.text(b.translations.STATE_LABEL),f.text(b.translations.ZIPCODE_LABEL),d.prop({maxlength:5,value:""})):(e.text(b.translations.PROVINCE_LABEL),f.text(b.translations.POSTALCODE_LABEL),d.prop({maxlength:7,value:""}));
$namespace.AjaxUtil.makeAjaxCall("addressFormActivity.act",$.param({af:"LOAD_STATE_OR_PROVINCES",country:b.currentCountrySelect,creditCardInfoUuid:a}),null,null,function(a,d){a=JSON.parse(a);a.unshift({value:"select",text:b.translations.SELECT_TEXT});a=JSON.stringify(a);$namespace.DomUtil.replaceOptions("state_"+d,a);b.countrySelect.val(b.currentCountrySelect).removeAttr("disabled").removeClass("slaveForm").trigger("removeError");b.streetTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");
b.streetAptTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");b.cityTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");b.stateOrProvinceSelect.val("select").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");b.zipCodeTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");return!0},"",[a])}else b.countrySelect.val(b.currentCountrySelect).removeAttr("disabled").removeClass("slaveForm").trigger("removeError"),
b.streetTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError"),b.streetAptTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError"),b.cityTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError"),b.stateOrProvinceSelect.val("select").removeAttr("disabled").removeClass("slaveForm").trigger("removeError"),b.zipCodeTextBox.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError")};
$namespace.Widgets.AddressForm.countryChangeEvent="countryChangeEvent";

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		CREDIT_CARD_MAX_LENGTH=16;var SPECIAL_VISA_CARD_LENGTH=13;CREDIT_CARD_EXPIRATION_MONTH_REGEX=/[0-9]{1,2}/g;MASKED_CREDIT_CARD_NUMBER_REGEX=/XXXXXXXXXXXX\d{4}/g;
$namespace.Widgets.ErrorHandler=function(a,b){var d=this;d.el=a;d.options={};b&&(d.options=$.extend({errorValidationType:b.errorValidationType,regex:b.regex,caRegex:b.caRegex,testRegex:b.testRegex,matchRegex:b.matchRegex,doNotTrim:b.doNotTrim,checkEmptyString:b.checkEmptyString,blankErrMsg:b.blankErrMsg,caBlankErrMsg:b.caBlankErrMsg,regexErrMsg:b.regexErrMsg,caRegexErrMsg:b.caRegexErrMsg,needCountrySwitch:b.needCountrySwitch,specialErrMsg:b.specialErrMsg,isScheduledDate:b.isScheduledDate,scheduledDateSelector:b.scheduledDateSelector,
earliestDate:b.earliestDate,latestDate:b.latestDate,alternateSelector:b.alternateSelector,alternateSelectorContainer:b.alternateSelectorContainer,expirationMonthSelector:b.expirationMonthSelector,expirationYearSelector:b.expirationYearSelector,maxExpirationYear:b.maxExpirationYear,useAriaDescribedBy:b.useAriaDescribedBy,ariaDescribedById:b.ariaDescribedById,analyticsTrackingText:b.analyticsTrackingText,countrySelector:b.countrySelector,validatorForm:b.validatorForm,validatorKey:b.validatorKey,parentDivId:b.parentDivId,
addClassOnError:b.addClassOnError},b));d.el.addClass("errorHandlerInitialized");d.el.on("validate",function(a,b){if(d.options)return d.options.disableErrorHandler&&(a=$(a.target),d.options.disableErrorHandler(a))?!0:d.validateFormField(b)});d.el.on("removeError",function(){d.el.hasClass("errorDetected")&&(d.el.removeClass("errorDetected").removeClass("error").data("current",""),d.el.siblings(".errorSelector").html("").addClass("displayNone"),d.useAriaDescribedBy?d.el.attr("aria-describedby",d.options.ariaDescribedById):
d.el.attr("aria-describedby",!1),d.options.parentDivId&&d.options.addClassOnError&&$("#"+d.options.parentDivId).removeClass(d.options.addClassOnError))});d.el.on("removeAlternateError",$.proxy(d.removeAlternateError,d));d.el.on("verifyAutoFill",function(){if(!d.options.disableErrorHandler||!d.options.disableErrorHandler(d.el)){var a=d.el.val();d.options.doNotTrim||(a=a.trim());if(""!=a){var b=d.options.countrySelector.data("country"),g=d.validator.getField(b,d.options.validatorForm,d.options.validatorKey,
"pattern"),h=d.validator.getField(b,d.options.validatorForm,d.options.validatorKey,"length");g=a.match(g);null==g?d.el.val(""):(g=g.join(""),g=g.replace(/\s\s+/g," "),d.el.val(g.trim().substring(0,h)));"zip"==d.options.validatorKey&&"CA"==b&&(a=a.toUpperCase().replace(/\W/g,""),3<=a.length&&(a=a.match(/.{1,3}/g).join(" ")),d.el.val(a.substring(0,h)))}}});d.initializeValidator();d.el.on("addError",function(a,b){d.addError(b)})};
$namespace.Widgets.ErrorHandler.prototype.validateFormField=function(a){var b={error:!1,errorType:$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK},d=this.options.errorValidationType,e=this.el.val(),f=this.options.testRegex,g=this.options.matchRegex;this.options.doNotTrim||(e=e.trim());var h=this.options.regex;"text"===d?b=this.validateText(e,h,f,g):"select"===d?(d=this.options.blankErrMsg,this.options.needCountrySwitch&&this.options.countrySelector.val()===$namespace.Country.CANADA_COUNTRY_CODE&&
(d=this.options.caBlankErrMsg),0===this.el.prop("selectedIndex")&&(this.addError(d),b.error=!0)):"cardNumber"===d?b=this.validateCardNumber(e,h):"year"===d?b=this.validateYear(e,h,g):"date"===d?b=this.validateDate(e,h):"email"===d?this.options.checkEmptyString&&""===e?(this.addError(this.options.blankErrMsg),b.error=!0):""===e||$namespace.Validation.validateEmail(this.el.prop("id"),this.el.parent())||(this.addError(this.options.regexErrMsg),b.error=!0,b.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID):
"checkbox"!==d||this.el.is(":checked")||(this.addError(this.options.blankErrMsg),this.options.parentDivId&&this.options.addClassOnError&&$("#"+this.options.parentDivId).addClass(this.options.addClassOnError),b.error=!0,$("#"+this.options.parentDivId).focus()[0].scrollIntoView({behaviour:"smooth",block:"center"}));b.error&&this.options.analyticsTrackingText&&(d=this.options.analyticsTrackingText,$.isPlainObject(d)&&(d=d[b.errorType]),d=d.split(","),e=!0,a&&(a=d[1],(e=0>$namespace.Widgets.ErrorHandler.uniqueTrackingMessages.indexOf(a))&&
$namespace.Widgets.ErrorHandler.uniqueTrackingMessages.push(a)),e&&$namespace.Analytics.trackEvent.apply($namespace.Analytics,d));return b.error};
$namespace.Widgets.ErrorHandler.prototype.validateText=function(a,b,d,e){var f={error:!1,errorType:$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK},g=this.options.blankErrMsg,h=this.options.regexErrMsg;if(this.options.needCountrySwitch){var k=this.options.countrySelector.children("option:selected").val();k||(k=this.options.countrySelector.val());if(k===$namespace.Country.CANADA_COUNTRY_CODE||"Canada"===k)b=this.options.caRegex,g=this.options.caBlankErrMsg,h=this.options.caRegexErrMsg}this.options.checkEmptyString&&
""==a?(this.addError(g),f.error=!0):""!=a&&d&&b.test(a)?(this.addError(h),f.error=!0,f.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID):""!=a&&e&&null==a.match(b)&&(this.addError(h),f.error=!0,f.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID);return f};
$namespace.Widgets.ErrorHandler.prototype.validateCardNumber=function(a,b){var d={error:!1,errorType:$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK},e=a.length<CREDIT_CARD_MAX_LENGTH&&!(a.length==SPECIAL_VISA_CARD_LENGTH&&"4"==a.charAt(0)),f=this.getCardType(a);this.el.data("cardType",f);if(null!=a.match(MASKED_CREDIT_CARD_NUMBER_REGEX))d.error=!1;else if(""!=a&&!e&&"UNKNOWN"===f)this.addError(this.options.specialErrMsg),d.error=!0,d.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID;
else if(""!=a&&null==a.trim().match(b))this.addError(this.options.regexErrMsg);else if(""==a||e)0<a.length&&e?(this.addError(this.options.regexErrMsg),d.error=!0,d.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID):(this.addError(this.options.blankErrMsg),d.error=!0);return d};$namespace.Widgets.ErrorHandler.prototype.removeAlternateError=function(){this.el.closest(this.options.alternateSelectorContainer).find(".alternateErrorLabel").html("").addClass("displayNone")};
$namespace.Widgets.ErrorHandler.prototype.validateYear=function(a,b,d){this.options.alternateSelector&&this.removeAlternateError();var e={error:!1,errorType:$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK},f=this.options.isScheduledDate,g="";f&&(g=$namespace.DateUtil.reformatDateString(this.options.scheduledDateSelector.val(),$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM"),$namespace.DateUtil.getDefaultDateFormat()));var h=f?new Date(g):new Date;if("Invalid Date"==h)this.addError(this.option.specialErrMsg),
e.error=!0,e.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID;else if(g=h.getMonth(),h=h.getFullYear(),0===this.el.prop("selectedIndex"))this.addError(this.options.blankErrMsg),e.error=!0;else{var k=f?this.options.specialErrMsg:this.options.regexErrMsg,l=this.options.expirationMonthSelector.val(),p=""!=l&&null!=l.trim().match(CREDIT_CARD_EXPIRATION_MONTH_REGEX),q=parseInt(a),r=parseInt(this.options.maxExpirationYear);l=parseInt(l);!f&&d&&null==a.match(b)||q>r?(this.addError(this.options.blankErrMsg),
e.error=!0):p&&(q<h||h==q&&l<=g)&&(this.addError(k,this.options.alternateSelector,[this.options.expirationMonthSelector,this.el]),e.error=!0,e.errorType=f?$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL:$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID)}return e};
$namespace.Widgets.ErrorHandler.prototype.validateDate=function(a,b){var d={error:!1,errorType:$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK};if(""==a)this.addError(this.options.blankErrMsg),d.error=!0;else{var e=new Date;e.setHours(0,0,0,0);var f=$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM"),g=$namespace.DateUtil.getDefaultDateFormat(),h=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase(),k=this.options.latestDate;"fr_ca"===h&&(k=$namespace.DateUtil.reformatDateString(k,f,
g));k=new Date(k);var l=this.getFormattedDate(e),p=this.getFormattedDate(k);if("en_ca"===h||"en_us"===h){if(f=new Date(a),null==f||null==a.match(b)||f>k||f<e)a=null==a.match(b)?this.options.regexErrMsg:$namespace.TranslationUtil.replaceParameters(this.options.specialErrMsg.translatedText,{minDate:l,maxDate:p}),this.addError(a),d.error=!0,d.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID}else"fr_ca"===h&&(b=$namespace.DateUtil.reformatDateString(a,f,g),f=new Date(b),null==b||null==a.match(this.options.caRegex)||
f<e||f>k)&&(a=null==a.match(this.options.caRegex)?this.options.regexErrMsg:$namespace.TranslationUtil.replaceParameters(this.options.specialErrMsg.translatedText,{minDate:l,maxDate:p}),this.addError(a),d.error=!0,d.errorType=$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID)}return d};
$namespace.Widgets.ErrorHandler.prototype.addError=function(a,b,d){var e=this.el;e.data("current",e.val());if(b){e=e.closest(this.options.alternateSelectorContainer);var f=e.find(b).attr("id")+"_error"}else f=e.attr("id")+"_error";a=$namespace.MessageUtil.prefixError(a);if(b){for(b=0;b<d.length;b++)d[b].attr("aria-describedby",f).addClass("errorDetected").addClass("error");e.find(".alternateErrorLabel").html(a).removeClass("displayNone")}else e.attr("aria-describedby",f).siblings(".errorSelector").html(a).removeClass("displayNone"),
e.addClass("errorDetected").addClass("error")};$namespace.Widgets.ErrorHandler.prototype.getFormattedDate=function(a){var b=a.getFullYear(),d=(1+a.getMonth()).toString();d=1<d.length?d:"0"+d;a=a.getDate().toString();a=1<a.length?a:"0"+a;return"fr_ca"===$namespace.Configuration.localeCode.toLowerCase()?b+"-"+d+"-"+a:d+"/"+a+"/"+b};
$namespace.Widgets.ErrorHandler.prototype.getCardType=function(a){for(var b=[{name:"VisaCard",length:"13,16",prefixes:"4"},{name:"MasterCard",length:"16",prefixes:"51,52,53,54,55"}],d=b.length,e=!1,f=0;f<d&&!e;++f){var g=b[f].prefixes.split(",");for(var h=0;h<g.length;h++){var k=new RegExp("^"+g[h]);if(k.test(a)){e=!0;break}}}e&&(f=parseInt(f-1));e&&(k=/\D/,k.test(a)&&(e=!1));if(f<d&&e){d=b[f].length.split(",");e=!1;for(g=0;g<d.length&&!e;++g)if(parseInt(a.length)==parseInt(d[g])){e=!0;break}return e?
b[f].name:"UNKNOWN"}return"UNKNOWN"};
$namespace.Widgets.ErrorHandler.prototype.initializeValidator=function(){this.validator={US:{card:{cardHolderName:{pattern:/[a-zA-Z\.'\-\s]/g,length:30},creditCardNumber:{pattern:/[\d]{0,16}/g,length:16},cvv:{pattern:/[\d]{0,3}/g,length:3}},address:{street:{pattern:/[a-zA-Z0-9\/\.,'\-#\s]/g,length:30},street2:{pattern:/[a-zA-Z0-9\/\.,'\-#\s]/g,length:30},city:{pattern:/[a-zA-Z\.'\-\s]/g,length:20},zip:{pattern:/[\d]{0,5}/g,length:5}}},CA:{card:{cardHolderName:{pattern:/[a-zA-Z\.'\-\s]/g,length:30},
creditCardNumber:{pattern:/[\d]{0,16}/g,length:16},cvv:{pattern:/[\d]{0,3}/g,length:3}},address:{street:{pattern:/[a-zA-Z0-9\/\.,'\-#\s]/g,length:30},street2:{pattern:/[a-zA-Z0-9\/\.,'\-#\s]/g,length:30},city:{pattern:/[a-zA-Z\.'\-\s]/g,length:20},zip:{pattern:/[a-zA-Z\d\s]{0,7}/g,length:7}}},getField:function(a,b,d,e){return this[a][b][d][e]}}};$namespace.Widgets.ErrorHandler.prototype.setTrackingText=function(a){this.options.analyticsTrackingText=a};
$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK="BLANK";$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID="INVALID";$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL="SPECIAL";$namespace.Widgets.ErrorHandler.uniqueTrackingMessages=[];

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.AmountValidator=function(a,b){var d=this;d.el=a;d.options=$.extend({grossPaymentAmount:b.grossPaymentAmount,minimumDepositAmount:b.minimumDepositAmount,amountLessThanMsg:b.amountLessThanMsg,totalLessThanMsg:b.totalLessThanMsg,amountGreaterThanMsg:b.amountGreaterThanMsg,totalGreaterThanMsg:b.totalGreaterThanMsg,depositMinMaxMsg:b.depositMinMaxMsg,trackingText:b.trackingText});d.el.addClass("amountValidatorInitialized");d.el.on("validate",function(){var a=d.options.grossPaymentAmount,
b=0,g=$(".creditCardAmountTextBox"),h=g.length,k=$namespace.GlobalConstants.CURRENCY_FORMATS[g.first().attr("data-currencycode")];g.each(function(){b+=$namespace.CurrencyUtil.getUnMaskedValue(this)});b=parseFloat(b).toFixed(2);var l=!1;if(parseFloat(b)<parseFloat(a)){h=1==h?d.options.amountLessThanMsg.translatedText:d.options.totalLessThanMsg.translatedText;var p=a-b;a=$namespace.TranslationUtil.replaceParameters(h,{maxAmount:$namespace.CurrencyUtil.formatCurrency({amount:a,format:k}),diffAmount:$namespace.CurrencyUtil.formatCurrency({amount:p,
format:k})});g.trigger("addError",a);l=!0}else if(parseFloat(b)>parseFloat(a))h=1==h?d.options.amountGreaterThanMsg.translatedText:d.options.totalGreaterThanMsg.translatedText,p=b-a,a=$namespace.TranslationUtil.replaceParameters(h,{maxAmount:$namespace.CurrencyUtil.formatCurrency({amount:a,format:k}),diffAmount:$namespace.CurrencyUtil.formatCurrency({amount:p,format:k})}),g.trigger("addError",a),l=!0;else if(g.first().closest(".creditCardForm").hasClass("deposit-payment-credit-card-form")){p=g.first();
var q=$namespace.CurrencyUtil.getUnMaskedValue(p);q=parseFloat(q).toFixed(2);h=1==h?d.options.amountGreaterThanMsg.translatedText:d.options.depositMinMaxMsg.translatedText;if(parseFloat(q)>parseFloat(a)||parseFloat(q)<parseFloat(d.options.minimumDepositAmount))a=$namespace.TranslationUtil.replaceParameters(h,{maxAmount:$namespace.CurrencyUtil.formatCurrency({amount:a,format:k}),minAmount:$namespace.CurrencyUtil.formatCurrency({amount:d.options.minimumDepositAmount,format:k})}),g.trigger("removeError"),
p.trigger("addError",a),l=!0}l&&d.options.trackingText&&(g=d.options.trackingText.split(","),$namespace.Analytics.trackEvent.apply($namespace.Analytics,g))})};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX=/[!@#$%^&*()_+=\[\]{};:"\\|,<>\/?]/g;CREDIT_CARD_NUMBER_REGEX=/(^[4-5]{1}[0-9]{15})|(^[4]{1}[0-9]{12})$/g;CREDIT_CARD_EXPIRATION_MONTH_REGEX=/[0-9]{1,2}/g;CREDIT_CARD_EXPIRATION_YEAR_REGEX=/[0-9]{4}/g;var CVV_CODE_REGEX=/[0-9]{3}/g;
$namespace.Widgets.CreditCardForm=function(a,b){this.el=a;this.options=$.extend({cardholderNameTextBox:".cardholderName",creditCardNumberTextBox:".creditCardNumber",creditCardExpirationDate:".creditCardExpirationDate",creditCardExpirationDateContainer:".creditCardExpirationDateContainer",creditCardExpiryMonth:".expirationMonthUtilityClass",creditCardExpiryYear:".expirationYearUtilityClass",cvvCodeTextBox:".creditCardCheckSecurityCode",masterForm:b.masterForm,translations:b.translations,messages:b.messages},
b);this.el.addClass("initialized");this.translations=this.options.translations;this.countrySelect=this.el.find(".country");this.cardholderName=this.el.find(this.options.cardholderNameTextBox).on("keypress",this.onCardholderNameKeypress.bind(this)).on("input",this.onCardholderNameInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.cardholderNameValidator=new $namespace.Widgets.ErrorHandler(this.cardholderName,{errorValidationType:"text",regex:CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX,
testRegex:!0,checkEmptyString:!0,blankErrMsg:this.translations.CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CARDHOLDER_NAME_INVALID_ERROR_MESSAGE,useAriaDescribedBy:!0,ariaDescribedById:"helperTextAsItAppears",countrySelector:this.countrySelect,validatorForm:"card",validatorKey:"cardHolderName"});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"cardholderGATracking",this.cardholderNameValidator);this.creditCardNumber=this.el.find(this.options.creditCardNumberTextBox).on("keypress",
this.onCreditCardNumberKeypress.bind(this)).on("input",this.onCreditCardNumberInput.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.creditCardNumberValidator=new $namespace.Widgets.ErrorHandler(this.creditCardNumber,{errorValidationType:"cardNumber",regex:CREDIT_CARD_NUMBER_REGEX,blankErrMsg:this.translations.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CARD_NUMBER_INVALID_ERROR_MESSAGE,specialErrMsg:this.translations.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER,
countrySelector:this.countrySelect,validatorForm:"card",validatorKey:"creditCardNumber",disableErrorHandler:this.options.disableErrorHandler});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"creditCardNumberGATracking",this.creditCardNumberValidator);this.creditCardExpiryMonth=this.el.find(this.options.creditCardExpiryMonth).on("change",this.onCreditCardExpiryMonthChange.bind(this));this.creditCardExpiryMonthValidator=new $namespace.Widgets.ErrorHandler(this.creditCardExpiryMonth,{errorValidationType:"text",
regex:CREDIT_CARD_EXPIRATION_MONTH_REGEX,matchRegex:!0,checkEmptyString:!0,blankErrMsg:this.translations.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"creditCardExpiryMonthGATracking",this.creditCardExpiryMonthValidator);a=!1;b=this.el.find(".creditCardScheduledDate");0<b.length&&(a=!0);this.creditCardExpiryYear=this.el.find(this.options.creditCardExpiryYear).on("change",
this.onCreditCardExpiryYearChange.bind(this));a={errorValidationType:"year",regex:CREDIT_CARD_EXPIRATION_YEAR_REGEX,testRegex:!0,isScheduledDate:a,scheduledDateSelector:b,alternateSelector:this.options.creditCardExpirationDate,alternateSelectorContainer:this.options.creditCardExpirationDateContainer,expirationMonthSelector:this.creditCardExpiryMonth,maxExpirationYear:this.creditCardExpiryYear.children("option").last().val(),blankErrMsg:this.translations.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE,
specialErrMsg:this.translations.SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE};this.creditCardExpiryYearValidator=new $namespace.Widgets.ErrorHandler(this.creditCardExpiryYear,a);$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"creditCardExpiryYearGATracking",this.creditCardExpiryYearValidator);this.cvvCode=this.el.find(this.options.cvvCodeTextBox).on("keypress",this.onCvvCodeKeypress.bind(this)).on("blur",this.removeErrorAndVerifyAutoFill.bind(this));this.cvvCodeValidator=new $namespace.Widgets.ErrorHandler(this.cvvCode,
{errorValidationType:"text",regex:CVV_CODE_REGEX,matchRegex:!0,checkEmptyString:!0,blankErrMsg:this.translations.CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE,regexErrMsg:this.translations.CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE,countrySelector:this.countrySelect,validatorForm:"card",validatorKey:"cvv",disableErrorHandler:this.options.disableErrorHandler});$namespace.Widgets.PaymentForm.addGATrackingMethod(this,"cvvCodeGATracking",this.cvvCodeValidator);this.masterForm=this.options.masterForm;
this.previousCardCheckbox=this.el.find(".previousCardCheckbox").on("change",this.onPreviousCardCheckboxChange.bind(this));this.billingAddressCheckbox=this.el.find(".billingAddressCheckbox");this.streetTextBox=this.el.find(".street");this.streetAptTextBox=this.el.find(".streetApt");this.cityTextBox=this.el.find(".city");this.stateOrProvinceSelect=this.el.find(".stateOrProvince");this.zipCodeTextBox=this.el.find(".zipCode")};
$namespace.Widgets.CreditCardForm.prototype.onPreviousCardCheckboxChange=function(a){var b=this;a=$(a.target);var d=$(".creditCardForm").first();if(a.is(":checked")){b.billingAddressCheckbox.is(":checked")||b.billingAddressCheckbox.click();var e={cardholderName:d.find(".cardholderName").val(),creditCardNumber:d.find(".creditCardNumber").val(),expirationMonth:d.find(".expirationMonthUtilityClass").val(),expirationYear:d.find(".expirationYearUtilityClass").val(),cvvCode:d.find(".creditCardCheckSecurityCode").val()};
setTimeout(function(){b.disableFields(e)},50);a.attr("aria-checked",!0)}else b.enableFields(),a.attr("aria-checked",!1)};
$namespace.Widgets.CreditCardForm.prototype.disableFields=function(a){this.billingAddressCheckbox.attr("disabled","disabled");this.countrySelect.trigger("removeError");this.streetTextBox.trigger("removeError");this.streetAptTextBox.trigger("removeError");this.cityTextBox.trigger("removeError");this.stateOrProvinceSelect.trigger("removeError");this.zipCodeTextBox.trigger("removeError");this.cardholderName.val(a.cardholderName).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");
this.creditCardNumber.val(a.creditCardNumber).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");this.creditCardExpiryMonth.val(a.expirationMonth).attr("disabled","disabled").addClass("slaveForm").trigger("removeError");this.creditCardExpiryYear.val(a.expirationYear).attr("disabled","disabled").addClass("slaveForm").trigger("removeError").trigger("removeAlternateError")};
$namespace.Widgets.CreditCardForm.prototype.enableFields=function(){this.billingAddressCheckbox.removeAttr("disabled").click();this.cardholderName.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");this.creditCardNumber.val("").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");this.creditCardExpiryMonth.val("month").removeAttr("disabled").removeClass("slaveForm").trigger("removeError");this.creditCardExpiryYear.val("year").removeAttr("disabled").removeClass("slaveForm").trigger("removeError").trigger("removeAlternateError")};
$namespace.Widgets.CreditCardForm.prototype.removeErrorAndVerifyAutoFill=function(a){a=$(a.target);a.val()!=a.data("current")&&a.trigger("removeError").trigger("verifyAutoFill")};$namespace.Widgets.CreditCardForm.prototype.hasSelectedText=function(a){return a.selectionStart!=a.selectionEnd};$namespace.Widgets.CreditCardForm.prototype.onCardholderNameKeypress=function(a){return $namespace.Validation.isPersonNameKeyCode(a)&&(this.hasSelectedText(a.target)||30>$(a.target).val().length)};
$namespace.Widgets.CreditCardForm.prototype.onCardholderNameInput=function(a){var b=$(a.target),d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));b.closest(".creditCardForm").hasClass("masterForm")&&$(".cardholderName.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")};$namespace.Widgets.CreditCardForm.prototype.onCreditCardNumberKeypress=function(a){return $namespace.Validation.checkNumericKeyCode(a)&&(this.hasSelectedText(a.target)||16>$(a.target).val().length)};
$namespace.Widgets.CreditCardForm.prototype.onCreditCardNumberInput=function(a){var b=$(a.target);if(b.closest(".creditCardForm").hasClass("masterForm")){var d="";a.keyCode&&(d=String.fromCharCode(a.keyCode));$(".creditCardNumber.slaveForm").val(b.val()+d).trigger("removeError").trigger("verifyAutoFill")}};
$namespace.Widgets.CreditCardForm.prototype.onCreditCardExpiryMonthChange=function(a){a=$(a.target);a.trigger("removeError");var b=a.closest(".creditCardExpirationDateContainer").find(".alternateErrorLabel");b.hasClass("displayNone")||(b.html("").addClass("displayNone"),this.creditCardExpiryYear.trigger("removeError"));a.closest(".creditCardForm").hasClass("masterForm")&&(a=$(".expirationMonthUtilityClass.slaveForm").val(a.val()).change(),a.hasClass("errorDetected")&&(a.trigger("removeError"),a.closest(".creditCardExpirationDateContainer").find(".expirationYearUtilityClass").trigger("removeError")))};
$namespace.Widgets.CreditCardForm.prototype.onCreditCardExpiryYearChange=function(a){a=$(a.target);a.trigger("removeError");var b=a.closest(".creditCardExpirationDateContainer").find(".alternateErrorLabel");b.hasClass("displayNone")||(b.html("").addClass("displayNone"),this.creditCardExpiryYear.trigger("removeError"));if(b=a.closest(".creditCardForm").hasClass("masterForm"))a=$(".expirationYearUtilityClass.slaveForm").val(a.val()).change(),a.hasClass("errorDetected")&&(a.trigger("removeError"),a.closest(".creditCardExpirationDateContainer").find(".expirationMonthUtilityClass").trigger("removeError"));
this.creditCardExpiryMonth.hasClass("errorDetected")&&"month"!=this.creditCardExpiryMonth.val()&&(this.creditCardExpiryMonth.trigger("removeError"),b&&$(".expirationMonthUtilityClass.slaveForm").trigger("removeError"))};$namespace.Widgets.CreditCardForm.prototype.onCvvCodeKeypress=function(a){return $namespace.Validation.checkNumericKeyCode(a)&&(this.hasSelectedText(a.target)||3>$(a.target).val().length)};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		CONFIG=$namespace.CONFIG||{};utils=$namespace.Utils||{};fadeSpeed=CONFIG.QUICKER_ANIMATION_SPEED;
function RadioSwitcher(a,b){this.el=a;this.options=$.extend({tabSelector:"[data-tab]",panelSelector:"[data-panel]",activeClass:"active"},b);this.$radios=this.el.find(this.options.tabSelector).not(".tab-initialized").addClass("tab-initialized");this.$panels=this.el.find(this.options.panelSelector).not(".panel-initialized").addClass("panel-initialized");this.$panels.not("."+this.options.activeClass).attr({"aria-hidden":"true"}).hide();this.$panels.filter("."+this.options.activeClass).attr({"aria-hidden":"false"}).show();
this.currentTab=this.$radios.filter("."+this.options.activeClass).attr("data-tab");this.$radios.on("click",$.proxy(this._onClick,this));this.el.addClass("initialized")}RadioSwitcher.prototype._onClick=function(a){a=$(a.currentTarget).data("tab");this.activateCurrent(a)};
RadioSwitcher.prototype.activateCurrent=function(a){var b="-1";this.$radios.filter("."+this.options.activeClass).removeClass(this.options.activeClass).attr({"aria-selected":"false"});this.$radios.filter('[data-tab="'+a+'"]').addClass(this.options.activeClass).attr({"aria-selected":"true"});this.$panels.filter("."+this.options.activeClass).removeClass(this.options.activeClass).attr({"aria-hidden":"true"}).hide();this.$panels.filter('[data-panel="'+a+'"]').addClass(this.options.activeClass).attr({"aria-hidden":"false"}).fadeIn(fadeSpeed,
function(){var a=$(this).find("h2, h3, h4, h5, h6, p, ul, ol, dl, table").first();a.length&&("0"===a.attr("tabindex")&&(b="0"),a.attr({tabindex:b}).focus())});this.currentTab=a;$(window).resize();setTimeout(function(){$(window).resize()}.bind(this),fadeSpeed+1)};RadioSwitcher.prototype.toString=function(){return"[object RadioSwitcher]"};$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.RadioSwitcher=RadioSwitcher;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.Carousel=function(a,b){this.TranslationTexts={ACCESSIBILITY_DISPLAYING_CAROUSEL_SLIDE: "Displaying selected carousel slide: $carouselSlideName ",PLAYING_CAROUSEL: "playing carousel",PAUSED_CAROUSEL: "paused carousel"};var TranslationTexts = this.TranslationTexts;
;
var d,e;this.el=a;this.options=$.extend({carouselSpeed:500,transitionTime:1E3,maxLoopCount:2,timeBeforeStartAuto:1E3,thumbsToDisplay:6,thumbnailWidth:193},b);this.options.restartInterval=12E4;this.options.slideInterval=this.options.carouselSpeed||6E3;this.options.transitionSpeed=this.options.transitionTime||400;this.previousButton=$.hook("carousel-previous",this.el);this.nextButton=$.hook("carousel-next",this.el);this.pauseButton=$.hook("carousel-pause",this.el);this.playButton=$.hook("carousel-play",
this.el);this.navigation=$.hook("carousel-navigation",this.el);this.items=$.hook("carousel-items",this.el).children("li");$namespace.Utils.isNumber(this.options.currentIndex)?this.currentIndex=this.options.currentIndex:this.currentIndex=Math.floor(Math.random()*this.items.length);this.thumbItems=$(this.navigation.children("li"));this.detailsLinkTabIndex=null;this.topImageAnimationDone=!0;this.topImageDelayIndex=null;this.thumbItems.size()>this.options.thumbsToDisplay&&this.thumbItems.css("transition",
"none");$namespace.Widgets.Carousel._slideIndex=/Vacation-Packages/i.test(window.location.href)?7:/Cruises/i.test(window.location.href)?13:1;$.hook("carousel").find("A").attr("tabIndex","-1").unbind("click").each(function(){$(this).parents("LI");var a=this.getAttribute("href"),b=a.lastIndexOf("/");a=-1==b?a:a.substr(b+1);b=a.indexOf("?");0<b&&(a=a.substr(0,b));b="Hero "+$namespace.Widgets.Carousel._slideIndex++;this.onclick=function(a,b){return function(){$namespace.Analytics.trackEvent("Carousel Clicks",
a,b,null)}}(a,b)});var f=this;this.screenreaderText=$("<span></span>",{"aria-live":"polite","class":"ada-screenreader"});this.el.prepend(this.screenreaderText);this.el.find('a.details-link, ul[data-hook="carousel-navigation"] li').on("focus",function(a){f.stopAutoRotation();f.showPlayBtn()});this.isExpanderCarouselOnMobile=function(){return this.el.hasClass("expander-mobile-only")&&$namespace.Utils.Breakpoint.isMobile()};this.setDetailsLinkTabIndex=function(){var a=$.hook("carousel").find("li.active a.details-link").attr("tabindex");
"-1"!=a&&(this.detailsLinkTabIndex=a);$.hook("carousel").find("a").attr("tabindex","-1");$.hook("carousel").find("li.active a.details-link").attr("tabindex",this.detailsLinkTabIndex);$.hook("carousel").find("div.offers-description h3").removeAttr("id");$.hook("carousel").find("li.active div.offers-description h3").attr("id","offers-description-header");$.hook("carousel").find("div.offers").removeAttr("id");$.hook("carousel").find("li.active div.offers").attr("id","offers-description");$.hook("carousel").find("a.details-link").removeAttr("id");
$.hook("carousel").find("li.active a.details-link").attr("aria-describedby","offers-description");this.manageThumbItems()};this.isExpanderCarouselOnMobile()?(this.el.removeAttr("aria-label"),this.items.find("A.details-link").removeAttr("role"),this.screenreaderText.text("")):(this.items.removeClass("active").attr("aria-hidden","true").eq(this.currentIndex).addClass("active").attr("aria-hidden","false"),$namespace.TabOrder.addCallback("datailsLinkCB",$.proxy(this,"setDetailsLinkTabIndex")));this._onClick=
function(a){if("click"===a.type||"keydown"===a.type&&13===a.which){var b=$(a.currentTarget),d=(""+b.prop("nodeName")).toLowerCase(),e=b.attr("data-hook");this.stopAutoRotation();this.screenreaderText.text("");"button"===d?"carousel-previous"===e?(this.showPlayBtn(!1),this.previous()):"carousel-next"===e?(this.showPlayBtn(!1),this.next()):"carousel-play"===e?(this.startAutoRotation(),this.showPauseBtn(!0)):"carousel-pause"===e&&this.showPlayBtn(!0):"li"===d&&this.goTo(b.index());a.stopPropagation();
a.preventDefault()}};this.el.find('ul[data-hook="carousel-navigation"] li').on("click keydown",$.proxy(this._onClick,this));this.el.on("click keydown",'button[data-hook^="carousel"]',$.proxy(this._onClick,this));this.el.swipe({threshold:50,triggerOnTouchEnd:!1,swipeLeft:$.proxy(this.next,this),swipeRight:$.proxy(this.previous,this),fingers:$.fn.swipe.fingers.ALL});this.setUI=function(){1>=this.items.length&&(this.previousButton.hide(),this.nextButton.hide(),this.navigation.hide());this.showPauseBtn(!this.isExpanderCarouselOnMobile())};
this.getThumbItemRange=function(){var a=this.currentIndex,b=this.options.thumbsToDisplay,d=this.thumbItems.size(),e=Math.floor(b/2)-1,f=b-e-1;if(d<=b)return{left:0,right:d-1};b=a+e;e=a-f;return 0>e?(b+=f-a,{left:0,right:b>=d?d-1:b}):b>=d?(e-=b-(d-1),{left:0>e?0:e,right:d-1}):{left:e,right:b}};this.manageThumbItems=function(a){var b=this.thumbItems,d=this.getThumbItemRange(),e;if(b.size()<=this.options.thumbsToDisplay)a&&this.options.setLastTab&&$(b.get(b.size()-1)).attr("data-tab-last","true");else{var f=
[];a||b.each(function(a,b){e=$(b);e.hasClass("noTabIndex")||f.push(e.attr("tabindex"))});var g=0;for(a=0;a<d.left;a++)g-=this.options.thumbnailWidth;this.navigation.css("left",g.toString()+"px");b.removeClass("noTabIndex");for(a=0;a<b.size();a++)(a<d.left||a>d.right)&&$(b.get(a)).addClass("noTabIndex");b.attr("tabindex","-1");this.options.setLastTab&&(b.removeAttr("data-tab-last"),$(b.get(d.right)).attr("data-tab-last","true"));if(f.length)for(a=d.left;a<=d.right;a++)$(b.get(a)).attr("tabindex",f.shift())}};
this.goTo=function(a){var b=this.options,f=this;if(this.topImageAnimationDone){if(0<=a&&a<this.items.length&&a!==this.currentIndex){var g=this.items.length-1,p=this.items.eq(a),q=this.items.eq(this.currentIndex),r=function(){p.addClass("active").removeClass("animating").attr("aria-hidden","false");q.removeClass("current").removeClass("active").attr("aria-hidden","true");f.setDetailsLinkTabIndex();f.reportCurrentImageToAnalytics();if(!d&&!e){var a=$("#offers-description-header").text();a||(a=p.find(">img").attr("alt"));
a&&(a=$namespace.TranslationUtil.replaceParameters(f.TranslationTexts.ACCESSIBILITY_DISPLAYING_CAROUSEL_SLIDE,{carouselSlideName:a}),f.screenreaderText.text(a))}};g=0===this.currentIndex&&a===g?"backward":this.currentIndex===g&&0===a?"forward":this.currentIndex<a?"forward":"backward";q.addClass("current");p.addClass("animating");this.topImageAnimationDone=!1;switch(g){case "forward":p.css({left:"100%"}).animate({left:"0"},b.transitionSpeed,r);q.animate({left:"-100%"},b.transitionSpeed);q.find("a").attr("tabindex",
"-1");break;case "backward":p.css({left:"-100%"}).animate({left:"0"},b.transitionSpeed,r),q.animate({left:"100%"},b.transitionSpeed),q.find("a").attr("tabindex","-1")}this.setNavigation(a);this.currentIndex=a}this.items.promise().done(function(){f.topImageAnimationDone=!0;f.manageThumbItems();if(null!==f.topImageDelayIndex){var a=f.topImageDelayIndex;f.topImageDelayIndex=null;setTimeout(function(){f.goTo(a)},0)}})}else this.topImageDelayIndex=a};this.reportCurrentImageToAnalytics=function(){if($namespace.Utils.Breakpoint.isDesktop()){var a=
$namespace.HomePageCarouselModule.getCurrentImageTitle(!1);a&&$namespace.Analytics.track({vendor:"adobe",type:"event",events:"event8",v8:a})}};this.setNavigation=function(a){this.thumbItems.removeClass("active").eq(a).addClass("active");this.setDetailsLinkTabIndex()};this.previous=function(){this.stopAutoRotation();this.goTo($namespace.Utils.rangeCheck(this.currentIndex-1,0,this.items.length-1))};this.next=function(){this.stopAutoRotation();this.goTo($namespace.Utils.rangeCheck(this.currentIndex+
1,0,this.items.length-1))};this.toString=function(){return"[object carousel]"};this.stopAutoRotation=function(){e&&window.clearTimeout(e);d&&window.clearInterval(d);e=d=null};this.stopAutoRotationOutside=function(){this.stopAutoRotation();this.showPlayBtn()};this.startAutoRotation=function(){var a=this;this.stopAutoRotation();var b=this.options,e=this.currentIndex,f=e,p=b.maxLoopCount,q=function(b){return function(){0==p&&(b.stopAutoRotation(),a.showPlayBtn());e==b.items.length-1?e=0:e++;e==f-1&&
p--;b.goTo(e)}}(this);d=setInterval(q,b.slideInterval);$(this.playButton).removeAttr("tabindex")};this.showPlayBtn=function(a){this.el.find("#play-pause").attr({"class":"carousel-button carousel-play hide-mobile","data-hook":"carousel-play"}).find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/play_button.svg"});a?this.screenreaderText.text(this.TranslationTexts.PAUSED_CAROUSEL):this.screenreaderText.text("")};this.showPauseBtn=function(a){this.el.find("#play-pause").attr({"class":"carousel-button carousel-pause hide-mobile",
"data-hook":"carousel-pause"}).find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/pause_button.svg"});a?this.screenreaderText.text(this.TranslationTexts.PLAYING_CAROUSEL):this.screenreaderText.text("")};this.destroy=function(){this.stopAutoRotation()};this.setUI();this.isExpanderCarouselOnMobile()||(this.setNavigation(this.currentIndex),this.startAutoRotation(),this.manageThumbItems(!0))};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function Confirm(a,b,d,e,f){$namespace.Widgets.Modal.call(this,a,e);this.onConfirm=$namespace.Utils.isFunction(b)?b:function(){};this.onDeny=$namespace.Utils.isFunction(d)?d:function(){};this.el.on("click",'[data-confirm="true"]',$.proxy(function(){!0!==f&&this.hide(!1);this.onConfirm(this)},this));this.el.on("click",'[data-confirm="false"]',$.proxy(function(){this.onDeny(this);this.hide(!1)},this))}Confirm.prototype.constructor=Confirm;$namespace.Widgets=$namespace.Widgets||{};
$namespace.Widgets.Confirm=Confirm;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function Acknowledge(a,b,d){$namespace.Widgets.Modal.call(this,a);this.onConfirm=$namespace.Utils.isFunction(b)?b:function(){};this.onDeny=$namespace.Utils.isFunction(d)?d:function(){};this.el.on("click",'[data-acknowledge="true"]',$.proxy(function(){if(this.allBoxesChecked()){this.hide();var a=$("#acknowledgementModalPopup label[data-advisory-acknowledgement-item-uid]").data("advisory-acknowledgement-item-uid");this.onConfirm(a,!0)}else $("#acknowledgementModalPopup .acknowledgementError").removeClass("displayNone").focus(),
this.focusFirstUncheckedBox()},this));this.el.on("click",'[data-confirm="false"]',$.proxy(function(){this.hide();this.onDeny()},this));this.allBoxesChecked=function(){return $("#acknowledgementModalPopup input[type='checkbox']:checked").length==$("#acknowledgementModalPopup input[type='checkbox']").length};this.focusFirstUncheckedBox=function(){clearTimeout(this.timer);this.timer=setTimeout(function(){$("#acknowledgementModalPopup input[type='checkbox']:not(:checked)").first().focus()},10)}}
Acknowledge.prototype.constructor=Acknowledge;$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.Acknowledge=Acknowledge;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function Resetwarning(a,b,d){$namespace.Widgets.Modal.call(this,a);this.onConfirm=$namespace.Utils.isFunction(b)?b:function(){};this.onDeny=$namespace.Utils.isFunction(d)?d:function(){};this.el.on("click",'[data-acknowledge="true"]',$.proxy(function(){window.history.back()},this));this.el.on("click",'[data-confirm="false"]',$.proxy(function(){this.hide();this.onDeny()},this))}Resetwarning.prototype.constructor=Resetwarning;$namespace.Widgets=$namespace.Widgets||{};
$namespace.Widgets.Resetwarning=Resetwarning;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.Expander=function(a){var b=$namespace.Utils||{};b.Breakpoint.which();this.debugLog=0;this.el=a;this.offsets=[];this.mask=$.hook("expander-mask",this.el);this.expanderLink=$.hook("expander-link",this.el);this.showMoreLink=$.hook("expander-show-more-link",this.el);this.currentExpansion=+this.el.attr("data-expander-show")||1;var d=function(a){a.is("ul.carousel-items")&&(a=a.children("li"),0<a.length&&a.each(function(a,b){$(b).find(".details-link[tabindex='-1']").length?$(b).attr("aria-hidden",
"true"):$(b).attr("aria-hidden","false")}))},e=function(a,b){if(a.is("ul.map-items")){var d=a.children("li"),e=parseInt(a.parent().attr("data-expander-show"));0<d.length&&0<e&&d.each(function(a,d){"showmore"==b?0<e&&"false"!=$(d).attr("aria-hidden")&&($(d).attr("aria-hidden","false"),e--):0<e?($(d).attr("aria-hidden","false"),e--):0==e&&$(d).attr("aria-hidden","true")})}},f=function(){$.hook("expander-mask").each(function(a,b){var f=$(b);a=f.find("a.card.image-card, a.details-link, a.mapMobileLabel");
f.get(0).nextTabElement=null;a.each(function(a){a=$(this).offset().top;var b=f.offset().top,d=b+f.height(),e=this.savedTabIndex?parseInt(this.savedTabIndex):null;0<e&&(1>Math.abs(a-b)||a>b)&&a<d&&(f.get(0).nextTabElement||(f.get(0).nextTabElement=$(this)),-1!=e&&$(this).parent().removeAttr("aria-hidden"),$(this).attr("tabindex",e),this.savedTabIndex=null)});d(f);e(f,"showmore")})};$namespace.TabOrder.addCallback("expanderCB",function(){$.hook("expander-mask").each(function(a,b){var f=$(b);f.find("a.card.image-card, a.details-link, a.mapMobileLabel").each(function(a){a=
$(this).offset().top;var b=f.offset().top+f.height();if(1>Math.abs(a-b)||a>b)a=parseInt($(this).attr("tabindex")),0<a&&($(this).parent().attr("aria-hidden","true"),this.savedTabIndex=a,$(this).attr("tabindex","-1"))});d(f);e(f)})});this.isValid=function(){var a=!0;this.el.hasClass("expander-mobile-only")&&!b.Breakpoint.isMobile()?a=!1:this.el.hasClass("expander-desktop-only")&&!b.Breakpoint.isDesktop()&&(a=!1);return a};this.onFullyExpand=function(){var a=this;this.el.addClass("expanded");this.showMoreLink.attr("href")||
(this.showMoreLink.addClass("hide"),this.showMoreLink.on($namespace.Utils.getTransitionEndEvent(),function(){a.showMoreLink.addClass("shrink")}))};this.showMore=function(a){var b=this;a=+this.el.attr("data-expander-show")||1;var d=this.currentExpansion+a;a=this.mask.height();var e=this.offsets[d];d>=b.expansionCount&&(this.mask.css("height","auto"),e=this.mask.height(),this.mask.css("height",a+"px"));this.el.data("loadfull");this.isValid()&&!this.el.hasClass("expanding")&&(this.el.addClass("expanding"),
this.mask.animate({height:e+"px"},333,function(){b.currentExpansion=d;b.el.removeClass("expanding");if(d===b.expansionCount||d>b.expansionCount)b.onFullyExpand();f();var a=b.mask.get(0).nextTabElement;a&&(a=a.attr("tabindex"),$('a[tabindex="'+a+'"]').focus(),b.mask.get(0).nextTabElement=null)}))};this._onShowMoreClick=function(a){this.currentExpansion<this.expansionCount?this.showMore():a.currentTarget.href&&(window.location=a.currentTarget.href);a.preventDefault()};this.showMoreLink.on("click",$.proxy(this._onShowMoreClick,
this));this.setAriaLabels=function(){$.hook("expander").each(function(a,b){$(b).find("a.card.image-card").each(function(a){var b="";(a=$(this).find("div.card-description h3").html())&&(b+=a.trim()+" ");$(this).find("div.card-description p").each(function(a){(a=$(this).html())&&(b+=a.trim()+" ")});b=b.replace(/<br>/g," ").replace(/&amp;/g,"&");$(this).attr("aria-label",b);$(this).find("div.card-image").attr("aria-hidden","true");$(this).find("div.card-description").attr("aria-hidden","true");$(this).find("div.card-description h3").attr("aria-hidden",
"true");$(this).find("div.card-description p").attr("aria-hidden","true")})})};this.setAriaLabels();this.el.addClass("initialized");this.maskItems=function(){var a=this.mask.children(),d=this.mask[0]?this.mask[0].offsetTop:-1,e=this;this.offsets=[];this.expansionCount=this.offsets.length;if(this.isValid()&&0<=d&&!this.isExpanded)if(this.mask.css("height","auto"),a.each(function(a,b){a=Math.floor(b.offsetTop-d);-1===e.offsets.indexOf(a)&&$(b).is(":visible")&&e.offsets.push(a)}),this.expansionCount=
this.offsets.length,(a=this.offsets.length>this.currentExpansion?this.offsets[this.currentExpansion]:null)?this.mask.css("height",a-1+"px"):this.mask.css("height","auto"),1===this.offsets.length&&(this.onFullyExpand(),this.mask.css("height","auto")),this.el.addClass("masked"),this.currentExpansion<this.offsets.length)this.showMoreLink.removeClass("shrink").removeClass("hide"),this.el.removeClass("expanded");else this.onFullyExpand();else this.el.removeClass("masked"),this.mask.css("height","auto"),
b.Breakpoint.isDesktop()&&(this.currentExpansion=+this.el.attr("data-expander-show")||1);b.Breakpoint.isDesktop()&&this.showMoreLink.off($namespace.Utils.getTransitionEndEvent())};$(window).on("resize orientationchange",$.proxy(function(a){b.Breakpoint.which();setTimeout($.proxy(this.maskItems,this),50)},this));this.cleanUp=function(){var a=this.el;(a.hasClass("expander-mobile-only")||a.hasClass("expander-desktop-only"))&&this.mask.css("height","auto");this.showMoreLink.removeClass("hide").removeClass("shrink")};
this.toString=function(){return"[object Expander]"};this.maskItems()};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.Modal=function(a){var b=$namespace.Utils||{},d=1<arguments.length&&arguments[1]?arguments[1]:new function(){},e=null,f=null;this.show=function(){$(document.body).addClass("scroll-lock");e&&e.setTabIndexesForModal();var a=this;this.el.fadeIn(0,function(){$namespace.TabOrder.updatePopupTabOrder(a.el);setTimeout(function(){e.setModalMousedownHandler();f.focus()},0)})};this.resetFirstAndLastTabs=function(){this.el.find('button[data-hook="modal-close"]').attr("data-tab-first",!0);var a=
this.el.find("ul>li>a"),b=a.length;b&&$(a[b-1]).attr("data-tab-last",!0)};this.hide=function(a){var b=this;e&&(e.destroyPopupEventHandlers(),e.unsetTabIndexesForModal());$(document.body).removeClass("scroll-lock");$(window).scrollTop(this.scrollTop);this.el.fadeOut(333,function(){b.el.remove()});try{!1!==a&&d()}catch(p){}setTimeout(function(){e.setCloseFocus()},1)};this.disableEscapeEventHandler=function(){e&&e.disableEscapeEventHandler()};this.setItemToFocus=function(a){e&&e.setItemToFocus(a)};var g=
(new Date).getTime(),h="dialog-body-"+g;g="dialog-title-"+g;this.content=b.isString(a)?$(a):a;this.content.attr("role","dialog").attr("aria-modal","true");this.el=b.getTemplate($.hook("modal_template"));this.scrollTop=$(window).scrollTop();this.el.find(".modal-content").append(this.content);(f=this.el.find("DIV.modal-title H2"))&&f.attr("id",g).removeAttr("data-taborder");this.el.find("DIV.modal-body").attr("id",h);this.content.attr("aria-describedby",h).attr("aria-labelledby",g);e=new $namespace.TabHandler(this.el,
$.proxy(this,"hide"));e.setPopupKeydownHandler();e.setModalTitleTabHandler(f);this.el.on("click",'[data-hook="modal-close"]',$.proxy(this.hide,this));if(b.isJQueryObject(this.content)||b.isElement(this.content))$(document.body).append(this.el),this.el.hide()};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CurrencyUtil=new function(){this.getDefaultCurrencyFormat=function(){return $namespace.GlobalConstants.CURRENCY_FORMATS[$namespace.GlobalConstants.DEFAULT_CURRENCY_CODE]};this.formatCurrency=function(a){var b="";a=a||{};var d=void 0==a.amount?null:a.amount+"",e=void 0==a.format?this.getDefaultCurrencyFormat():a.format+"",f=void 0==a.integerOnly?!1:a.integerOnly?!0:!1;if(null!==d&&d.length)try{a=0;f||(m=e.match(/{[^}]+}/))&&m.length&&(a=(m=m[0].match(/[c]+/))&&m.length?m[0].length:0);d=
parseFloat(d).toFixed(a+3).toString();d=d.substr(0,d.length-3).split(".");var g=d[0].split(""),h=d[1].split("");f=d=!1;b=[];for(e=e.split("");e.length;){var k=e.pop();"}"==k?f=!0:"{"==k?f=!1:f?g.length&&("c"==k?h.length&&b.unshift(h.pop()):"d"==k?(g.length&&b.unshift(g.pop()),d=!0):(d||0<a)&&b.unshift(k)):b.unshift(k)}b=b.join("")}catch(l){}return b};this.formatCurrencyWithoutDecimals=function(a){var b="";a=a||{};var d=void 0==a.amount?null:a.amount+"";a=void 0==a.format?this.getDefaultCurrencyFormat():
a.format+"";if(null!==d&&d.length)try{d=parseFloat(d).toFixed(0).toString();var e=d.split(""),f=d=!1;b=[];for(a=a.split("");a.length;){var g=a.pop();"}"==g?f=!0:"{"==g?f=!1:f?e.length&&("d"==g?(e.length&&b.unshift(e.pop()),d=!0):d&&b.unshift(g)):b.unshift(g)}b=b.join("")}catch(h){}return b};this.formatCurrencyWithoutParseFloat=function(a){var b="";a=a||{};var d=void 0==a.amount?null:a.amount+"";a=void 0==a.format?this.getDefaultCurrencyFormat():a.format+"";if(null!==d&&d.length)try{var e=d.split(""),
f=d=!1;b=[];for(a=a.split("");a.length;){var g=a.pop();"}"==g?f=!0:"{"==g?f=!1:f?e.length&&("d"==g?(e.length&&b.unshift(e.pop()),d=!0):d&&b.unshift(g)):b.unshift(g)}b=b.join("").replace(",","")}catch(h){}return b};this.getUnMaskedValue=function(a){return $(a).maskMoney("unmasked")[0]};this.setMaskedValue=function(a,b){$(a).val(parseFloat(b).toFixed(2))}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.Revealer=function(a){this.show=function(a){this.el.addClass("active");this.target.addClass("active");this.unrevealer.removeClass("active")};this.hide=function(a){this.el.removeClass("active");this.target.removeClass("active");this.unrevealer.addClass("active")};this.el=a;this.unrevealer=$('[data-hook="unreveal"][data-target="'+this.el.attr("data-target")+'"]');this.target=$(this.el.attr("data-target"));this.el.on("click",$.proxy(this.show,this));if(this.unrevealer.length)this.unrevealer.on("click",
$.proxy(this.hide,this))};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;function StickyBar(a){var b=this;this.el=a;window.setTimeout(function(a){b.offset=b.el.offset().top;$(window).on("scroll",$.proxy(b._onScroll,b));$(window).on("resize",$.proxy(b._onResize,b));b._onScroll(a)},10);this.el.addClass("initialized")}StickyBar.prototype._onScroll=function(a){$(window).scrollTop()>=Math.floor(this.offset)?this.attach(a):this.detach(a)};
StickyBar.prototype._onResize=function(a){this.offset=$("header").height()+$("header").offset().top;this._onScroll(a)};StickyBar.prototype.attach=function(a){this.el.parent().addClass("sticky-bar-attached");this.el.addClass("attached")};StickyBar.prototype.detach=function(a){this.el.parent().removeClass("sticky-bar-attached");this.el.removeClass("attached")};StickyBar.prototype._onDocumentSizeChange=function(a){this.detach();this.offset=$("header").height();this._onScroll(a)};
$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.StickyBar=StickyBar;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY;
$namespace.Widgets.TabSwitcher=function(a,b){this.TranslationTexts={
                                                        ACCESSIBILITY_TAB_SELECTED: "- selected",
                                                        ACCESSIBILITY_TAB_NOT_SELECTED: "- not selected"
                                                    };

    var TranslationTexts = this.TranslationTexts;
                                                ;var d=($namespace.Utils||{}).Keyboard;this.el=a;this.options=b||{};this.currentTab=this.el.find("[data-tab].active").attr("data-tab");this.liveContainer=$(".tab-switcher-live-container");0===
this.liveContainer.length?(this.liveContainer=$("<div />",{"class":"ada-screenreader tab-switcher-live-container","aria-live":"polite"}),$(document.body).append(this.liveContainer)):this.liveContainer.text("");this.toString=function(){return"[object TabSwitcher]"};this.getTab=function(a){return this.el.find('[data-tab="'+a+'"]')};this.getPane=function(a){return this.el.find('[data-pane="'+a+'"]')};this.getAll=function(){return this.options.getAllcb?this.options.getAllcb():this.el.find("[data-tab], [data-pane]")};
this.getActivePane=function(){return this.getPane(this.currentTab)};this.getActiveTab=function(){return this.getTab(this.currentTab)};this.deselectAll=function(){this.el.addClass("deselected");this.getAll().removeClass("active");this.currentTab="";"function"===typeof this.onDeselect&&this.onDeselect.call(this)};this.selectTab=function(a){var b=this;this.getAll().each(function(d,e){d=$(e);if(d.attr("data-tab")===a||d.attr("data-pane")===a){d.addClass("active");if("rental-cars"===d.attr("data-pane")||
"vacation-packages"===d.attr("data-pane")||"cruises"===d.attr("data-pane")||"hotels"===d.attr("data-pane"))b.tracking=d.attr("data-pane");d.find(">a").find(">span.ada-screenreader").text(b.TranslationTexts.ACCESSIBILITY_TAB_SELECTED);null!=b.currentTab&&a!=b.currentTab&&(e=d.find(">a").text().replace(/\W+-/," -"))&&0<e.length&&(b.liveContainer.text(e),b.clearLiveText());d.trigger("ct.tabswitcher.open")}else d.removeClass("active"),d.find(">a").find(">span.ada-screenreader").text(b.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED)})};
this.setTab=function(a,b,d){var e=this.getTab(a);a!==this.currentTab&&a||b?e.length&&(this.selectTab(a),this.currentTab=a,this.el.removeClass("deselected"),"function"===typeof this.onSelect&&this.onSelect.call(this,a,b,d)):(a=$namespace.Utils.Breakpoint,b=$.proxy(function(){this.deselectAll()},this),(this.el.hasClass("deselectable")||a.isMobile()&&this.el.hasClass("deselectable-mobile")||a.isDesktop()&&this.el.hasClass("deselectable-desktop"))&&b(),this.currentTab=null)};this._onClick=function(a){this.tracking=
"";var b=this,e=function(){b.setTab($(a.currentTarget).attr("data-tab"));$namespace.TabOrder.updatePageTabOrder();$(window).trigger("resize")};if("click"===a.type)e(),"rental-cars"!==this.tracking&&"vacation-packages"!==this.tracking&&"cruises"!==this.tracking&&"hotels"!==this.tracking||$namespace.SearchWidgetsModule.searchWidgetAnalytics(this.tracking),a.preventDefault();else if("keypress"===a.type)switch(a.which){case d.ENTER:e();a.preventDefault();break;case d.SPACE:a.preventDefault()}a.stopPropagation()};
this.clearLiveText=function(){var a=this;setTimeout(function(){a.liveContainer.text("")},removeLiveTextDelay)};this.initialize=function(){this.selectTab(this.currentTab)};this.el.on("click keypress","[data-tab]",$.proxy(this._onClick,this))};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function Tooltip(a,b){var d=$.extend({},b);this.parentSelector=d.parentSelector||!1;this.enableHideHandler=d.enableHideHandler||!1;this.setFocus="undefined"!==typeof d.setFocus?d.setFocus:!0;this.window=$(window);this.namespace=Date.now();this.trigger=a;this.tooltip=$("."+this.trigger.attr("data-tooltip")).first();this.template=$("#"+this.tooltip.attr("data-template"));this.template.length&&this.tooltip.html(this.template.html());this.close=$.hook("tooltip-close",this.tooltip);this.actualWidth=this.tooltip.outerWidth();
this.trigger.on("click",$.proxy(this._onClick,this));this.close.on("click",$.proxy(this.hide,this));this.isActive=!1;void 0!==this.trigger.attr("data-tooltip-position-type-absolute")?this.isPositionTypeAbsolute=!0:this.isPositionTypeAbsolute=!1;this.parentSelector=null;b&&b.parentSelector&&(this.parentSelector=b.parentSelector);this.enableHideHandler=!0;b&&!1===b.enableHideHandler&&(this.enableHideHandler=b.enableHideHandler);this.tabHandler=new $namespace.TabHandler(this.tooltip,$.proxy(this,"hide"));
this.trigger.addClass("initialized")}Tooltip.currentTooltip=null;Tooltip.showTooltipEvent="showTooltipEvent";Tooltip.hideTooltipEvent="hideTooltipEvent";Tooltip.prototype.actualWidth;Tooltip.prototype._onScroll=function(a){this.isPositionTypeAbsolute&&this.setPosition()};Tooltip.prototype._onResize=function(a){this.isPositionTypeAbsolute&&this.setPosition()};Tooltip.prototype._onKeydown=function(a){27===a.keyCode&&this.isActive&&this.hide()};
Tooltip.prototype._onClick=function(a){a.preventDefault();this.isActive?this.hide():this.show()};Tooltip.prototype._hideTooltip=function(a){a.preventDefault();a.stopPropagation();a.target instanceof Node&&!this.tooltip.get(0).contains(a.target)&&this.isActive&&this.hide()};
Tooltip.prototype.show=function(){this.tooltip.stop(!0,!0).hide();var a=this;this.trigger=arguments.length?$(arguments[0]):this.trigger;this.isActive=!0;this.trigger.addClass("tooltip-active");this.isPositionTypeAbsolute&&this.setPosition();var b=this.tooltip.find(".tab-tooltip-container");b.attr("role","dialog").attr("aria-describedby","dialog-body");var d=b.find("DIV.tooltip-title H3");d.length&&(b.attr("aria-labelledby","dialog-title"),d.attr("id","dialog-title"));b.find("DIV.tooltip-body").attr("id",
"dialog-body");this.tooltip.addClass("active").fadeIn(333,function(){setTimeout(function(){1===d.length?d.focus():a.close.focus()},0)});this.close.focus();this.window.on("scroll."+this.namespace,$.proxy(this._onScroll,this));this.window.on("resize."+this.namespace,$.proxy(this._onResize,this));this.enableHideHandler&&(this.window.on("focusin."+this.namespace,$.proxy(this._hideTooltip,this)),this.window.on("mouseup."+this.namespace,$.proxy(this._hideTooltip,this)));this.tabHandler.setPopupKeydownHandler();
this.tabHandler.setModalTitleTabHandler(d);Tooltip.currentTooltip=this;this.trigger.trigger(Tooltip.showTooltipEvent)};
Tooltip.prototype.hide=function(a){this.isActive&&(this.isActive=!1,this.tooltip.removeClass("active").fadeOut(333),this.tooltip.find(".tab-tooltip-container").find("DIV.tooltip-body").removeAttr("id"),this.window.off("scroll."+this.namespace),this.window.off("resize."+this.namespace),this.enableHideHandler&&(this.window.off("focusin."+this.namespace),this.window.off("mouseup."+this.namespace)),this.tabHandler.destroyPopupEventHandlers(),Tooltip.currentTooltip=null,!this.setFocus||null!=a&&void 0!=
a.setFocus&&!a.setFocus?this.trigger.removeClass("tooltip-active"):this.trigger.removeClass("tooltip-active").focus(),this.trigger.trigger(Tooltip.hideTooltipEvent))};
Tooltip.prototype.setPosition=function(){this.trigger=arguments.length?$(arguments[0]):this.trigger;var a=this.trigger.outerHeight(),b=this.trigger.offset().left,d=this.trigger.offset().top;a=d+a;d=this.actualWidth;$namespace.Utils.Breakpoint.isMobile()&&(d=null!=this.parentSelector&&0<this.trigger.parents(this.parentSelector).length?this.trigger.parents(this.parentSelector).outerWidth():this.trigger.offsetParent().outerWidth(),b=($(window).width()-d)/2);d+b>$(window).width()&&(d=$(window).width()-
b);this.tooltip.css({position:"absolute",left:b,top:a,width:d});this.tooltip.addClass("tooltip-fixed")};$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.Tooltip=Tooltip;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		var desktopMin=$namespace.Config.BREAKPOINTS.DESKTOP_MIN;scrollSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;var defaultAnimationDuration=$namespace.Config.CAROUSEL_ANIMATION_DURATION/1E3;
$namespace.Widgets.InfiniteCarousel=function(a,b){this.$el=a;this.$window=$(window);this.$htmlBody=$("html, body");this.options=$.extend({initialIndex:0,numItemsToAnimate:1,selectorNavPrev:".carousel-button.carousel-previous",selectorNavNext:".carousel-button.carousel-next",selectorOuterMask:".outer-mask",selectorInnerTrack:".inner-track",selectorPanels:".carousel-item",classActiveItem:"active",classNavDisabled:"disabled",classInitialized:"initialized",adjOuterTrack:140,animationDuration:defaultAnimationDuration,
animationEasing:"Power4.easeInOut",topOffset:20,selectorFocusEls:"a, button, input, select, textarea",selectorContentEls:"h2, h3, h4, h5, h6, p, ul, ol, dl, a",customEventPrefix:"ct:InfiniteCarousel:",focusOnTitle:!1},b||{});this.$navPrev=this.$el.find(this.options.selectorNavPrev);this.$navNext=this.$el.find(this.options.selectorNavNext);this.$outerMask=this.$el.find(this.options.selectorOuterMask);this.$innerTrack=this.$el.find(this.options.selectorInnerTrack);this.$panels=this.$el.find(this.options.selectorPanels);
this._length=this.$panels.length;this.currentIndex=this.options.initialIndex+this._length;this.previousIndex=null;this.numItemsToAnimate=this.options.numItemsToAnimate;this.scrollAmt=-100*this.numItemsToAnimate;this.isInitialized=this.isAnimating=!1;this.breakpoint=this.$window.width()<desktopMin?"mobile":"desktop";this.initDOM();this.bindEvents();$.event.trigger(this.options.customEventPrefix+"initialized")};
$namespace.Widgets.InfiniteCarousel.prototype={clonePanels:function(){var a=this.$panels.clone().addClass("clone");a.find("a[data-megatip]").each(function(b,d){b=$(d).attr("data-megatip");a.find("#"+b).removeAttr("id")});a.appendTo(this.$innerTrack);a.clone().prependTo(this.$innerTrack)},setActivePanel:function(){this.deactivatePanels();this.activatePanels();this.setAriaHidden()},initDOM:function(){this.clonePanels();this.$panels=this.$el.find(this.options.selectorPanels);this.$el.attr("tabindex",
"-1");this.$navPrev.attr({role:"button"}).find("img").attr("alt","");this.$navNext.attr({role:"button"}).find("img").attr("alt","");this.$panels.attr("aria-hidden","true");var a=Date.now();$namespace.TabOrder.addCallback("infiniteCarouselCB_"+a,$.proxy(this,"setActivePanel"));this.setBreakpoint();TweenMax.set(this.$outerMask,{x:0});TweenMax.set(this.$innerTrack,{x:this.scrollAmt*this.currentIndex+"%"});this.$el.addClass(this.options.classInitialized);this.isInitialized=!0},uninitDOM:function(){this.$el.removeAttr("role tabindex aria-live").removeClass(this.options.classInitialized);
this.$navPrev.removeAttr("role tabindex");this.$navNext.removeAttr("role tabindex");this.$panels.removeAttr("role aria-hidden").removeClass(this.options.classActiveItem);this.$panels.find(this.options.selectorFocusEls).removeAttr("tabindex");TweenMax.set(this.$outerMask,{x:""});TweenMax.set(this.$innerTrack,{x:""})},bindEvents:function(){var a=this;this.$window.on("resize",this.__resizeWindow.bind(this));this.$navPrev.on("click",this.__clickNavPrev.bind(this));this.$navNext.on("click",this.__clickNavNext.bind(this));
this.$panels.on("click",this.__clickPanel.bind(this));this.$el.hammer().bind("swipeleft",function(b){a.$navNext.click()});this.$el.hammer().bind("swiperight",function(b){a.$navPrev.click()})},unbindEvents:function(){this.$window.off("resize",this.__resizeWindow.bind(this));this.$navPrev.off("click",this.__clickNavPrev.bind(this));this.$navNext.off("click",this.__clickNavNext.bind(this));this.$panels.off("click",this.__clickPanel.bind(this))},reportButtonClickToAnalytics:function(a){var b=this.$panels[this.currentIndex].innerHTML;
b=b.substring(b.indexOf('hotelid="')+9);b=b.substring(0,b.indexOf('"'));$namespace.Analytics.trackEvent("hotel_popup",a,b,null)},__resizeWindow:function(a){this.setBreakpoint()},__clickNavPrev:function(a){a.preventDefault();$("a.megatip-active").size()&&$("a.megatip-active")[0].megatip.hide();this.isAnimating||this.$navPrev.hasClass(this.options.classNavDisabled)||(this.options.autoRotate&&(clearInterval(this.setAutoRotation),this.options.autoRotate=!1),this.previousIndex=this.currentIndex,this.currentIndex-=
this.numItemsToAnimate,this.updateCarousel(a))},__clickNavNext:function(a){a.preventDefault();$("a.megatip-active").size()&&$("a.megatip-active")[0].megatip.hide();this.isAnimating||this.$navNext.hasClass(this.options.classNavDisabled)||(this.options.autoRotate&&(clearInterval(this.setAutoRotation),this.options.autoRotate=!1),this.previousIndex=this.currentIndex,this.currentIndex+=this.numItemsToAnimate,this.updateCarousel(a))},__clickPanel:function(a){var b=$(a.currentTarget),d=this.$panels.index(b);
this.isAnimating||b.hasClass(this.options.classActiveItem)||(a.preventDefault(),this.previousIndex=this.currentIndex,this.currentIndex=d,this.updateCarousel(a))},updateCarousel:function(a,b){var d=this;b="undefined"!==typeof b?b:!0;this.isAnimating=!0;this.adjustPosition();this.deactivatePanels();this.activatePanels();TweenMax.to(this.$innerTrack,this.options.animationDuration,{x:this.scrollAmt*this.currentIndex+"%",ease:this.options.animationEasing,onComplete:function(){d.isAnimating=!1;a&&(d.setAriaHidden(),
b&&("desktop"===d.breakpoint&&d.focusOnPanel(d.$panels.eq(d.currentIndex)),d.options.focusOnTitle&&d.$panels.eq(d.currentIndex).find("h3").attr("tabindex","-1").focus(),d.options.isModalGallery&&d.$outerMask.focus()))}});$.event.trigger(this.options.customEventPrefix+"updated")},adjustPosition:function(){var a=this.options.adjOuterTrack;this.currentIndex<this._length&&(this.previousIndex+=this._length,this.currentIndex+=this._length,"desktop"===this.breakpoint&&TweenMax.fromTo(this.$outerMask,this.options.animationDuration,
{x:-a},{x:0}),TweenMax.set(this.$innerTrack,{x:this.scrollAmt*this.previousIndex+"%"}));this.currentIndex>2*this._length-1&&(this.previousIndex-=this._length,this.currentIndex-=this._length,"desktop"===this.breakpoint&&TweenMax.fromTo(this.$outerMask,this.options.animationDuration,{x:a},{x:0}),TweenMax.set(this.$innerTrack,{x:this.scrollAmt*this.previousIndex+"%"}))},deactivatePanels:function(){this.$panels.find(this.options.selectorFocusEls).each(function(a,b){a=$(b);b=a.attr("tabindex");"-1"!=b&&
a.attr("data-carousel-tabindex",b).attr("tabindex","-1")})},activatePanels:function(){var a=this.$panels.eq(this.currentIndex),b=this.$panels.eq(this.currentIndex-this._length),d=this.$panels.eq(this.currentIndex+this._length);a.find(this.options.selectorFocusEls).each(function(a,b){a=$(b);(b=a.attr("data-carousel-tabindex"))&&"-1"!=b&&a.removeAttr("data-carousel-tabindex").attr("tabindex",b)});b.addClass(this.options.classActiveItem);d.addClass(this.options.classActiveItem)},setAriaHidden:function(){this.$panels.removeClass(this.options.classActiveItem).attr({"aria-hidden":"true"});
this.$panels.eq(this.currentIndex).addClass(this.options.classActiveItem).attr({"aria-hidden":"false"})},focusOnPanel:function(a){var b=a.find(this.options.selectorContentEls).first(),d=this.options.topOffset,e=a.offset().top,f=a.outerHeight(),g=this.$window.scrollTop()+d,h=this.$window.height()-d;b.length||(b=a);e<g||e+f>g+h?this.$htmlBody.animate({scrollTop:e-d},scrollSpeed,function(){b.focus()}):b.focus()},setBreakpoint:function(){this.breakpoint=this.$window.width()<desktopMin?"mobile":"desktop"},
unInitialize:function(){this.unbindEvents();this.uninitDOM();this.$panels=this.$innerTrack=this.$outerMask=this.$navNext=this.$navPrev=this.$el=null;this.isInitialized=!1}};$namespace.Widgets.InfiniteCarousel.prototype.toString=function(){return"[object InfiniteCarousel]"};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		var fadeSpeed=$namespace.Config.STANDARD_ANIMATION_SPEED;$namespace.Widgets.Megatip=function(a){this.window=$(window);this.trigger=a;this.megatip=$("#"+this.trigger.attr("data-megatip"));this.close=$.hook("megatip-close",this.megatip);this.close.on("click",$.proxy(this.hide,this));this.window.on("keydown",$.proxy(this._onKeydown,this));this.isActive=!1;this.trigger[0].megatip=this};$namespace.Widgets.Megatip.prototype._onClick=function(a){a.preventDefault();this.isActive?this.hide():this.show()};
$namespace.Widgets.Megatip.prototype._onKeydown=function(a){27===a.keyCode&&this.isActive&&this.hide()};$namespace.Widgets.Megatip.prototype.show=function(){this.isActive=!0;this.trigger.addClass("megatip-active");var a=this;this.megatip.addClass("active").fadeIn(fadeSpeed,function(){$namespace.TabOrder.updatePageTabOrder();a.close.focus();$(window).trigger("ct.megatip.opened")});$(window).trigger("ct.megatip.opening")};
$namespace.Widgets.Megatip.prototype.hide=function(){this.isActive=!1;this.trigger.removeClass("megatip-active").focus();this.megatip.removeClass("active").fadeOut(fadeSpeed);$(window).trigger("ct.megatip.closing")};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;
function ShowMore(a,b){b=$.extend({},b);this.el=a;this.trigger=$.hook("showmore-trigger",this.el);this.contentEl=$.hook("showmore-content",this.el);this.compareEl=$("#"+this.contentEl.attr("data-compare"));this.defaultHeight=200;b.contentHeight&&(this.defaultHeight=b.contentHeight);b.adjustHeightCallback&&(this.adjustHeightCallback=b.adjustHeightCallback);this.activated=!1;this.adjustHeight();this.trigger.on("click",$.proxy(this._onClick,this));this.el.addClass("initialized");$(window).on("load resize orientationchange",
$.proxy(function(a){setTimeout($.proxy(this._onWindowResize,this),50)},this))}ShowMore.prototype._onWindowResize=function(a){this.activated||this.adjustHeight()};ShowMore.prototype._onClick=function(a){a.preventDefault();this.show()};
ShowMore.prototype.adjustHeight=function(a){a=this.trigger.height();var b=this.contentEl.height("auto").height(),d=this.compareEl.length?this.compareEl.height():this.defaultHeight;b>d?(this.contentEl.height(d-a),this.el.removeClass("active")):this.el.addClass("active");this.adjustHeightCallback&&this.adjustHeightCallback(this.el,this.contentEl)};
ShowMore.prototype.show=function(a){var b=this;a=this.contentEl.height();var d=this.contentEl.height("auto").height();this.contentEl.height(a).animate({height:d},slideSpeed,function(){b.el.addClass("active");b.trigger.remove();b.contentEl.height("");b.el.trigger(ShowMore.showMoreEvent)});this.activated=!0};ShowMore.showMoreEvent="showModeEvent";$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.ShowMore=ShowMore;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};fadeSpeed=$namespace.Config.STANDARD_ANIMATION_SPEED;var carouselSpeed=$namespace.Config.CAROUSEL_SPEED;
$namespace.Widgets.ModalGallery=function(a,b){this.TranslationTexts={
                                                         IMAGE_CAROUSEL_LABEL: "Image carousel",
                                                         MODAL_GALLERY_POPUP_ERROR_MESSAGE: "No images found for the selected item",
                                                         MODAL_GALLERY_POPUP_TITLE: "Error Loading Images"
                                                     };

    var TranslationTexts = this.TranslationTexts;
                                                 ;this.options=b||{};var d=this;b=function(b){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1,!1);var b=d.TranslationTexts;this.message||!this.responseText?$namespace.MessageUtil.showMessage({type:1,text:this.message?this.message.text:b.MODAL_GALLERY_POPUP_ERROR_MESSAGE,title:b.MODAL_GALLERY_POPUP_TITLE}):(d.initModalGallery(this.responseText),d.setItemToFocus(a),d.show())}}(this);this.options.isHotelGallery?(this.defaultAltText="Hotel Image",a=$(a).first().parent().find(".filmStrip").children().first()):this.options.isCruiseGallery&&(this.defaultAltText="Cruise Image");this.carouselImageList=
"undefined"!==typeof a.attr("data-carousel-image-urls")?a.attr("data-carousel-image-urls"):"";this.altTextList="undefined"!==typeof a.attr("data-carousel-alt-texts")?a.attr("data-carousel-alt-texts"):"";var e="ict=LOAD_IMAGE_CAROUSEL_TEMPLATE&carouselImageURLs="+this.carouselImageList+"&carouselAltTexts="+this.altTextList+"&defaultAltText="+this.defaultAltText;$namespace.DomUtil.setElementLoadingMask(!0,null,!1,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("imageCarousel.act",e,null,null,b,null)};
$namespace.Widgets.ModalGallery.prototype.initModalGallery=function(a){this.window=$(window);this.document=$(document);this.body=$(document.body);this.content=utils.isString(a)?$(a):a;this.el=utils.getTemplate($.hook("modal_gallery_template"));this.isActive=!1;this.scrollTop=this.window.scrollTop();this.el.find(".modal-gallery").attr({role:"dialog","aria-modal":"true","aria-label":this.TranslationTexts.IMAGE_CAROUSEL_LABEL});this.el.find(".modal-content").append(this.content);this.el.find('[data-hook="modal-close"]').attr({"data-taborder":"document",
"data-tab-first":"true"});this.el.on("click",'[data-hook="modal-close"]',$.proxy(this.hide,this));this.previousButton=this.el.find("button.carousel-previous");this.closeButton=this.el.find('[data-hook="modal-close"]');this.tabHandler=new $namespace.TabHandler(this.el,$.proxy(this,"hide"));this.tabHandler.setPopupKeydownHandler();$(".dynamicPackageId").first().val();if(utils.isJQueryObject(this.content)||utils.isElement(this.content))this.body.append(this.el),this.el.hide(),this.initCarousels(),this.initImages();
this.document.on("keydown",function(a){this.isActive&&27===a.keyCode&&this.hide()}.bind(this))};$namespace.Widgets.ModalGallery.prototype.initCarousels=function(){this.infiniteCarousel=new $namespace.Widgets.InfiniteCarousel(this.el.find(".infinite-carousel"),{isModalGallery:!0});this.carousel=new $namespace.Widgets.Carousel(this.el.find(".carousel"),{carouselSpeed:carouselSpeed,setLastTab:"true",transitionTime:500,currentIndex:0})};
$namespace.Widgets.ModalGallery.prototype.initImages=function(){$("[data-image-url]").each(function(){var a=$(this).attr("data-image-url");$(this).css("background-image",'url("'+a+'")')})};$namespace.Widgets.ModalGallery.prototype.setItemToFocus=function(a){this.tabHandler&&this.tabHandler.setItemToFocus(a)};
$namespace.Widgets.ModalGallery.prototype.show=function(){this.tabHandler&&this.tabHandler.setTabIndexesForModal();this.isActive=!0;this.el.fadeIn(fadeSpeed,function(){this.body.addClass("scroll-lock");$namespace.TabOrder.updatePopupTabOrder(this.el);var a=this;setTimeout(function(){a.tabHandler.setModalMousedownHandler();$namespace.Utils.Breakpoint.isMobile()?a.closeButton.focus():a.previousButton.focus()},0)}.bind(this))};
$namespace.Widgets.ModalGallery.prototype.hide=function(){this.tabHandler&&(this.tabHandler.destroyPopupEventHandlers(),this.tabHandler.unsetTabIndexesForModal());this.isActive=!1;this.body.removeClass("scroll-lock");this.window.scrollTop(this.scrollTop);this.carousel.destroy();this.el.fadeOut(fadeSpeed,function(){this.el.remove()}.bind(this));var a=this;setTimeout(function(){a.tabHandler.setCloseFocus()},1)};


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.Widgets.FullTermsAndConditions=function(a){this.module=a.module};
$namespace.Widgets.FullTermsAndConditions.prototype.open=function(){var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.TranslationTexts;if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.TERMS_AND_CONDITIONS_POPUP_ERROR_TITLE});else{b=new $namespace.Widgets.Modal(this.responseText);var e=$(".termsAndConditionsModalPopup a");e.attr("data-taborder","document");e.last().attr("data-tab-last","true");e.addClass("external-link text-underline");
e.each(function(a){a=$(this);a.attr("data-url",a.attr("href"));a.removeAttr("href");a.removeAttr("target")});$(".external-link").on("click",function(a){var b=$(a.currentTarget).attr("data-url");$namespace.Navigation.loadExternalUrl(b);a.preventDefault()});$("#termsAndConditionsContent").removeClass("card");$("#cruiseContractLinks").removeClass("card");b.show()}}}(this.module);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("termsAndConditionsContent.act",
"tcc=LOAD_TERMS_AND_CONDITIONS_TEMPLATE_CONTENT",null,null,a,null)};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;
function StickySidebar(a){this.el=a;this.$window=$(window);this.elMaincol=this.el.closest(".main-sidebar-layout").find(".main-column");this.infoBar=$.hook("info-bar");this.smScene=this.smController=null;breakpoint.isWidescreen()?(this.isWidescreen=!0,this.initScrollLock()):this.isWidescreen=!1;this.el.find('[data-hook="accordionMenu"]').each(utils.eachUninitialized(function(a,d){d.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));this.$window.on("load resize orientationchange ct.accordion.opening ct.accordion.closing ct.showmore.opening ct.showmore.closing ct.megatip.opening ct.megatip.closing ct.section.toggling ct.seatMap.loaded",$.proxy(function(a){setTimeout($.proxy(this._onWindowResize,
this),500)},this));this.el.addClass("initialized")}StickySidebar.prototype._onWindowResize=function(a){this.isWidescreen!==breakpoint.isWidescreen()&&((this.isWidescreen=breakpoint.isWidescreen())?this.initScrollLock():this.uninitScrollLock());this.isWidescreen&&this.smScene.duration(this.calcScrollLockDuration())};StickySidebar.prototype.calcScrollLockDuration=function(){var a=this.elMaincol.height(),b=this.el.height();a=a-b-40;1>a&&(a=1);breakpoint.isWidescreen()||(a=1);return a};
StickySidebar.prototype.initScrollLock=function(){this.smController=new ScrollMagic.Controller;this.smScene=(new ScrollMagic.Scene({triggerElement:this.infoBar.get(0),triggerHook:"onLeave",duration:this.calcScrollLockDuration()})).setPin(this.el.get(0)).addTo(this.smController)};
StickySidebar.prototype.uninitScrollLock=function(){if(this.smController){var a=this.$window.scrollTop();this.smController.destroy(!0);this.smScene=this.smController=null;setTimeout(function(){this.$window.scrollTop(a+1)}.bind(this),200)}};$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.StickySidebar=StickySidebar;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		CONFIG=$namespace.CONFIG||{};utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};breakpoint=utils.Breakpoint;var scrollSpeed=CONFIG.QUICKER_ANIMATION_SPEED,defaultSlideSpeed=CONFIG.STANDARD_ANIMATION_SPEED;
function AccordionMenu(a,b){this.$window=$(window);this.el=a;this.options=$.extend({fireEvents:!0,itemSelector:".accordion-item",headerSelector:".accordion-header",buttonSelector:".accordion-button",contentSelector:".accordion-content",activeClass:"active",animatingClass:"animating",slideSpeed:defaultSlideSpeed,scrollToActiveSection:!0},b);this.events={openEventStart:"ct.accordion.openStart",isOpeningEvent:"ct.accordion.opening",openEventEnd:"ct.accordion.openEnd",closeEventStart:"ct.accordion.closeStart",
isClosingEvent:"ct.accordion.closing",closeEventEnd:"ct.accordion.closeEnd"};this.isAnimating=!1;this.$items=this.el.children(this.options.itemSelector);this.$headers=this.$items.children(this.options.headerSelector);this.$buttons=this.$headers.children(this.options.buttonSelector);breakpoint.isMobile()&&this.el.find("[data-accordion-mobile-closed]").removeClass(this.options.activeClass);this.$items.each(function(a){a=this.$items.eq(a);var b=a.children(this.options.headerSelector).children(this.options.buttonSelector),
d=a.children(this.options.contentSelector),g=d.attr("id");a.hasClass(this.options.activeClass)?(d.show(),b.attr("aria-expanded",!0)):(d.hide(),b.attr("aria-expanded",!1));g&&b.attr("aria-controls",g);b.is("button,a")||(b.attr({tabindex:"0"}),b.on("keypress",this._onTriggerKeypress.bind(this)))}.bind(this));this.$buttons.on("click",this._onTriggerClick.bind(this));this.$buttons.on("open-instant",this._onOpenInstantClick.bind(this));this.el.addClass("initialized")}
AccordionMenu.prototype._onOpenInstantClick=function(a){this._onTriggerClick(a,!0)};AccordionMenu.prototype._onTriggerClick=function(a,b){a.preventDefault();if(!$(a.target).hasClass("ignore-accordion-click")){a=$(a.target).closest(this.options.itemSelector);var d=a.children(this.options.headerSelector).children(this.options.buttonSelector),e=a.children(this.options.contentSelector);this.isAnimating||(a.hasClass(this.options.activeClass)?this.close(a,d,e):this.open(a,d,e,b))}};
AccordionMenu.prototype._onTriggerKeypress=function(a){if(0<=$.inArray(a.which,[13,32])){a.preventDefault();a=$(a.target).closest(this.options.itemSelector);var b=a.children(this.options.headerSelector).children(this.options.buttonSelector),d=a.children(this.options.contentSelector);this.isAnimating||(a.hasClass(this.options.activeClass)?this.close(a,b,d):this.open(a,b,d))}};
AccordionMenu.prototype.open=function(a,b,d,e){var f=this;this.isAnimating=!0;a.addClass(this.options.animatingClass);if(this.options.fireEvents){this.el.trigger(this.events.openEventStart,[a]);b.attr("aria-expanded","true");var g=b.find("img");if(1==g.length){var h=g.attr("src").replace("-down-","-up-");_.isEmpty(h)||g.attr("src",h)}}g=function(){a.addClass(f.options.activeClass).removeClass(f.options.animatingClass);var g=d.find("h2, h3, h4, h5, h6, p, ul, ol, dl, table").first();g.length&&g.attr("tabindex");
b.attr("aria-expanded",!0);f.isAnimating=!1;f.options.fireEvents&&f.el.trigger(f.events.openEventEnd,[a]);f.options.scrollToActiveSection&&f.el.animate({scrollTop:a.offset().top+"px"},scrollSpeed);e||f.$window.resize()};e?d.show(0,g):(d.slideDown({duration:this.options.slideSpeed,step:function(){f.options.fireEvents&&f.el.trigger(f.events.isOpeningEvent,[a])},complete:g}),this.$items.each(function(b){b=$(this.$items[b]);var d=b.find(this.options.buttonSelector),e=b.find(this.options.contentSelector);
b!==a&&b.hasClass(this.options.activeClass)&&this.close(b,d,e)}.bind(this)))};
AccordionMenu.prototype.close=function(a,b,d){var e=this;this.isAnimating=!0;a.addClass(this.options.animatingClass);if(this.options.fireEvents){this.el.trigger(this.events.closeEventStart,[a]);b.attr("aria-expanded","true");var f=b.find("img");if(1==f.length){var g=f.attr("src").replace("-up-","-down-");_.isEmpty(g)||f.attr("src",g)}}d.slideUp({duration:this.options.slideSpeed,step:function(){e.options.fireEvents&&e.el.trigger(e.events.isClosingEvent,[a])},complete:function(){a.removeClass(e.options.activeClass).removeClass(e.options.animatingClass);
b.attr("aria-expanded",!1);e.isAnimating=!1;e.options.fireEvents&&e.el.trigger(e.events.closeEventEnd,[a]);e.$window.resize()}})};widgets.AccordionMenu=AccordionMenu;

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		widgets=$namespace.Widgets||{};
function FilterCheckboxes(a,b,d){this.TranslationTexts={
                                            MOVE_TO_NEXT_CHECKBOX_TEXT: "Moved the focus to the next checkbox"
                                        };

    var TranslationTexts = this.TranslationTexts;
                                    ;this.active=!0;this.checkboxContainer=a;this.loadFilterSearchResult=b;this.checkboxInfo=d;this.checkboxAny=this.checkboxContainer.find('input[value="any"]');this.checkboxAlwaysChecked=this.checkboxContainer.find('input[data-always-checked="true"]');this.checkboxOthers=this.checkboxContainer.find('input:not([value="any"]):not([data-always-checked="true"])');
a=this.checkboxContainer.find('input[type="checkbox"]');a.length<=d.minCheckboxes&&(this.checkboxContainer.parent().hide(),this.active=!1);a.on("change",$.proxy(this,"onFilterChange"))}FilterCheckboxes.prototype.close=function(){this.checkboxContainer.find('input[type="checkbox"]').off("change")};
FilterCheckboxes.prototype.preselectCheckboxes=function(a){if(a.length){var b=this;a.forEach(function(a){a=b.checkboxContainer.find('input[value="'+a+'"]');1==a.length&&(a.prop("checked","true"),a.data("always-checked")||b.checkboxAny.prop({checked:!1,disabled:!1}).removeAttr("aria-disabled"))})}};
FilterCheckboxes.prototype.getFilterCategoryForGA=function(){var a=this.checkboxInfo.checkboxStatePropName,b="";"hotelStarRatings"==a?b="Search_Results_Filter_Rating":"hotelPropertyTypes"==a?b="Search_Results_Filter_Hotels_Type":"hotelAreaNames"==a?b="Search_Results_Filter_Hotels_Area":"themeParkIds"==a?b="Search_Results_Filter_Theme_Park":"hotelBrandChainNames"==a&&(b="Search_Results_Filter_Hotels_Brand");$("#hotelOnlySearchFilter").data("hotel-only-filter")&&(b="HO_"+b);return b};
FilterCheckboxes.prototype.updateFilter=function(a){var b=String.fromCharCode(127),d=this.checkboxInfo;"undefined"!=typeof a.hotelStarRatings&&(b=a[d.checkboxStatePropName].length?a[d.checkboxStatePropName].split(b):[],this.preselectCheckboxes(b));"undefined"!=typeof a.selectedStarRatings&&this.preselectCheckboxes(a[d.checkboxStatePropName].length?a[d.checkboxStatePropName]:[]);if("undefined"!=typeof a.hotelsWithQualifiedStarRatingCount){b=this.checkboxContainer.find('input[type="checkbox"]');var e=
parseInt(a.hotelsWithQualifiedStarRatingCount);1==e?$(b[0]).parent().find("label").text($namespace.TranslationUtil.replaceParameters(d.labelAnySingular,{resultNumber:e})):$(b[0]).parent().find("label").text($namespace.TranslationUtil.replaceParameters(d.labelAnyPlural,{resultNumber:e}));b.each(function(b,e){b=$(e);"any"!=b.val()&&(e=a[d.resultCountPropName],0===(e?parseInt(e):0)?b.prop("disabled",!0).attr("aria-disabled","true"):b.prop("disabled",!1).attr("aria-disabled","false"))})}if("object"==
typeof a.packagesByStarRating||typeof a.hotelsByStarRating){b=this.checkboxContainer.find('input[type="checkbox"]');e=parseInt(a[d.resultCountPropName].totalRecords);var f=d.labelAny?!0:!1;f?$(b[0]).parent().find("label").text($namespace.TranslationUtil.replaceParameters(d.labelAny,{resultNumber:e})):1==e?$(b[0]).parent().find("label").text(d.labelAnySingular):$(b[0]).parent().find("label").text($namespace.TranslationUtil.replaceParameters(d.labelAnyPlural,{resultNumber:e}));b.each(function(b,e){b=
$(e);e=b.val();if("any"!=e){var g=a[d.resultCountPropName][e];"object"==$.type(g)?(e=g.name,g=parseInt(g.count)):g=g?parseInt(g):0;0===g?b.prop("disabled",!0).attr("aria-disabled","true"):b.prop("disabled",!1).attr("aria-disabled","false");var h=b.hasClass("hotelBrandRole")?b.parent().parent().find("h3 label"):b.parent().find("label");if(h.length){var p=h.find("img");p.length&&(p=p.clone(),h.find("img").remove());var q=h.find("span.resultsCount");h.find("span.ada-screenreader.disabledText");q.length&&
(f?q.text(e+" ("+g+")"):1==g?(q.text(d.resultTextSingular),"hotelAreaNames"==d.checkboxStatePropName&&b.attr("aria-label",e+" "+d.resultTextSingular)):(q.text($namespace.TranslationUtil.replaceParameters(d.resultTextPlural,{resultNumber:g})),"hotelAreaNames"==d.checkboxStatePropName&&b.attr("aria-label",e+" "+$namespace.TranslationUtil.replaceParameters(d.resultTextPlural,{resultNumber:g}))));p.length&&h.prepend(p)}}})}};
FilterCheckboxes.prototype.getCheckboxValues=function(){var a=[];this.checkboxContainer.find('input[type="checkbox"]').each(function(b,d){b=$(d);d=b.val();"any"!=d&&b.is(":checked")&&a.push(d)});return a};
FilterCheckboxes.prototype.onFilterChange=function(a){var b=$(a.currentTarget).val(),d=$(a.currentTarget).attr("data-filter-name"),e=$(a.currentTarget),f=null;if(e.data("always-checked"))e.prop("checked",!0);else{if("any"===b){var g=null;this.checkboxOthers.prop("checked",!1);$namespace.Analytics.trackEvent(this.getFilterCategoryForGA(),"Click",d);if($namespace.Browser.iPhone||$namespace.Browser.iPad)this.checkboxAny.prop("disabled",!0).attr("aria-disabled","true");else{var h=this;f=function(){h.checkboxAny.prop("disabled",
!0).attr("aria-disabled","true");var a=$(h.checkboxContainer.find('input[type="checkbox"]')[1]),b=a.parent().find("label"),d=$("<span>",{"class":"ada-screenreader"}).text($("#matchingPackageHeading").text()+". "+h.TranslationTexts.MOVE_TO_NEXT_CHECKBOX_TEXT);b.prepend(d);setTimeout(function(){a.focus();setTimeout(function(){d.remove()},300)},300)}}}else{g=[];if(e.hasClass("hotelBrandRole"))b=e.prop("checked"),$(e).parents(".accordion-item:first").find("input.hotelChainRole:checkbox").prop({checked:b,
disabled:b});else if(e.hasClass("hotelChainRole")){b=$(e).parents(".accordion-item:first").find("input.hotelBrandRole:checkbox");var k=$(e).parents(".accordion-item:first").find("input.hotelChainRole:checkbox").length,l=$(e).parents(".accordion-item:first").find("input.hotelChainRole:checkbox:checked").length;k==l?b.prop({checked:!0,disabled:!0}):b.prop({checked:!1,disabled:!1})}this.checkboxOthers.each(function(){var a=$(this);a.prop("checked")&&g.push(a.val())});g.length?(this.checkboxAny.prop({checked:!1,
disabled:!1}).removeAttr("aria-disabled"),b=$("#hotelOnlySearchFilter").data("hotel-only-filter"),a.currentTarget.checked&&(e.hasClass("hotelBrandRole")?(d=$(a.currentTarget).attr("data-ga-value"),$namespace.Analytics.trackEvent(1==b?"HO_Search_Results_Filter_Hotels_Brand":"Search_Results_Filter_Hotels_Brand","Click",d)):e.hasClass("hotelChainRole")?(d=$(a.currentTarget).attr("data-ga-value"),$namespace.Analytics.trackEvent(1==b?"HO_Search_Results_Filter_Hotels_Chain":"Search_Results_Filter_Hotels_Chain",
"Click",d)):$namespace.Analytics.trackEvent(this.getFilterCategoryForGA(),"Click",d))):(g=null,this.checkboxAny.prop({checked:!0,disabled:!0}).attr("aria-disabled","true"))}this.loadFilterSearchResult(f)}};FilterCheckboxes.prototype.reset=function(){this.checkboxAny.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");this.checkboxOthers.prop("checked",!1);this.checkboxAlwaysChecked.prop("checked",!0)};widgets.FilterCheckboxes=FilterCheckboxes;


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		function Advisory(a,b){this.TranslationTexts={ADVISORY_LINK_LABEL: "HOTEL ADVISORY",ACCESSIBILITY_OPEN_A_DIALOG: " - Opens a dialog",HOTEL_ADVISORY_POPUP_ERROR_TITLE: "Hotel Advisory Error"};var TranslationTexts = this.TranslationTexts;
;this.options=b||{};var d={"class":a.attr("data-class-names"),"data-test":"linkHotelAdvisory",
"data-taborder":"document","aria-label":"Hotel Advisory for "+a.attr("data-hotelId"),href:"#","data-hotelId":a.attr("data-hotelId"),"data-startDate":a.attr("data-startDate"),"data-endDate":a.attr("data-endDate"),"data-packageId":a.attr("data-packageId")};d=$("<a>",d).text(this.TranslationTexts.ADVISORY_LINK_LABEL);var e=$("<span>",{"class":"ada-screenreader",role:"link"}).text(this.TranslationTexts.ACCESSIBILITY_OPEN_A_DIALOG);d.append(e);a.replaceWith(d);if("HotelOnlySearchResults"===b.sourcePage)d.on("click",
$.proxy(this,"_onHOBEAdvisoryClick"));else d.on("click",$.proxy(this,"_onAdvisoryClick"))}
Advisory.prototype._onAdvisoryClick=function(a){a.preventDefault();var b=$(a.currentTarget);a=b.attr("data-packageId");""==a&&(a=$("#packageId").val());b="vpc=LOAD_HOTEL_ADVISORIES&hotelId="+b.attr("data-hotelId");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=$namespace.Widgets.Advisory.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:a.HOTEL_ADVISORY_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()},null);this.analyticsTracking(a)};
Advisory.prototype._onHOBEAdvisoryClick=function(a){a.preventDefault();var b=$(a.currentTarget);a=b.attr("data-hotelId");var d=b.attr("data-startDate");b=b.attr("data-endDate");d={hobesrp:"LOAD_HOTEL_ADVISORIES",hotelId:a,startDate:d,endDate:b};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=$namespace.Widgets.Advisory.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:a.HOTEL_ADVISORY_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()},null);$namespace.Analytics.trackEvent("HO_Search_Results_Hotel_Advisory","click",a)};
Advisory.prototype.analyticsTracking=function(a){var b=this.options.sourcePage,d=this.options.hotelId;b&&("PackageSearchResults"==b?$namespace.Analytics.trackEvent("Search_Results_Hotel Advisory","click",a):"PackageOverview"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Hotel Advisory","click",a):"PackageHotelResults"==b?$namespace.Analytics.trackEvent("Hotel_HotelAdvisory","click",a):"PackageRecap"==b?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel Advisory","Click",a):"MulticityPackageOverview"==
b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Hotel Advisory","Click",d):"HobeHotelPage"==b&&$namespace.Analytics.trackEvent("ho_Hotel_HotelAdvisory","click",d))};$namespace.Widgets=$namespace.Widgets||{};$namespace.Widgets.Advisory=Advisory;


	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.CruiseSailingDatePickerCarousel=function(a,b){function d(){var a=(z()?b.ITEMS_IN_MOBILE_VIEW:b.ITEMS_IN_DESKTOP_VIEW)-x;return 0>a?a:0}function e(){return z()?b.ITEMS_IN_MOBILE_VIEW:b.ITEMS_IN_DESKTOP_VIEW}function f(a){setTimeout(function(){a.focus()},60)}function g(){f($(t[e()-B-e()]).find("label"))}function h(){f($(t[e()-B-1]).find("label"))}function k(){var a=$(this).parent().hasClass("prevButtonDiv")?1:-1,e=B;if(0<a){p(y);B++;var f=b.MAX_SCROLL;B>=f&&(B=f,l(w))}else p(w),B--,
f=d(),B<=f&&(B=f,l(y));B!==e&&q(!1,0>a?h:g)}function l(a){a.addClass("disabled").attr({disabled:"disabled","aria-disabled":"true",tabindex:-1}).removeAttr("data-taborder")}function p(a){a.removeClass("disabled").removeAttr("disabled aria-disabled").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()}function q(a,b){n.stop(!0,!0);a?n.css({left:100/e()*B+"%"}):(a={duration:a|0,easing:"linear",done:b?b:function(){return!1}},n.animate({left:100/e()*B+"%"},a))}function r(){v.removeClass("viewable-items-3 viewable-items-4").addClass("viewable-items-"+
e());if(x>e()){var a=u.filter(":checked").parent().data("index")+B-e();B-=Math.max(a,0);y.add(w).parent().removeClass("displayNone");B>d()?p(y):(l(y),B=d())}else B=b.MAX_SCROLL,y.add(w).parent().addClass("displayNone");q(!0)}if($(a).hasClass("initialized"))return null;this.el=$(a);this.close=function(){$(window).off("resize orientationchange",r)};b=$.extend({ITEMS_IN_DESKTOP_VIEW:4,ITEMS_IN_MOBILE_VIEW:3,MAX_SCROLL:0},b);var v=this.el.find(".block-buttons__list--carousel"),n=this.el.find(".block-buttons-track"),
t=this.el.find(".block-buttons__carousel-item"),u=t.find("input.block-buttons__radio"),w=$.hook("carousel-previous",this.el).first(),y=$.hook("carousel-next",this.el).first(),z=$namespace.Utils.Breakpoint.isMobile,x=t.length,B=0;u.filter('[data-selected="true"]').prop("checked",!0);r();n.addClass("total-items-"+x);w.off("click").on("click",k);y.off("click").on("click",k);u.off("click").on("click",function(){u.attr({"data-selected":"false"});$(this).attr({"data-selected":"true"})}).on("keydown",function(a){switch(a.which){case 39:$(t[e()-
B-1]).find("input").data("block-date-item")===$(this).data("block-date-item")?y.trigger("click"):$(this).parent().next().find("input").focus();a.preventDefault();break;case 37:$(t[e()-B-e()]).find("input").data("block-date-item")===$(this).data("block-date-item")?w.trigger("click"):$(this).parent().prev().find("input").focus();a.preventDefault();break;case 32:case 13:$(this).trigger("click"),a.preventDefault()}});$(window).on("resize orientationchange",r);this.el.addClass("initialized");return this};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.CruiseSailingAndStateroomTypeWidget=function(a,b){function d(){h&&q.el.find(h).html(q.el.find("input.cruiseStateroomButton:checked:visible").data("block-formatted-price"))}function e(a,b){$namespace.AjaxUtil.makeAjaxCall("cruiseSearchResults.act","ctcsr=SELECT_ITINERARY_GROUP_SAILING&selectedSailingItemUid="+a+("&selectedStateroomType="+b),null,null,null,null,null,null,null)}function f(){if(k){var a=q.el.find("input.cruiseStateroomButton:checked:visible").data("sailing-tax-and-fee");
q.el.find(k).text(a)}}function g(){if(l){var a=q.getSelectedSailingUid(),b=q.getSelectedStateroomType();a=q.el.find(l+" [data-uid='"+a+"'][data-stateroom='"+b+"']");q.el.find(l+" div.active[data-stateroom]").removeClass("active");a.addClass("active");$namespace.TabOrder.updatePageTabOrder()}}this.el=$(a);b=$.extend({groupID:""},b);var h=b.cruisePriceEl?b.cruisePriceEl:void 0,k=b.taxAndFeesSelector?b.taxAndFeesSelector:void 0,l=b.selectedAmenitiesSelector?b.selectedAmenitiesSelector:void 0,p=b.gaOptions?
b.gaOptions:void 0,q=this;this.datePickerCarousel=new $namespace.Widgets.CruiseSailingDatePickerCarousel(this.el.find('[data-hook="cruise-sailing-date-picker-carousel"]'));this.el.find('input[data-block-price-item][data-selected="true"]').prop("checked","true");this.el.find(".block-buttons__item.disabled input").attr({disabled:"disabled","aria-disabled":"true"});this.getSelectedSailingUid=function(){return this.el.find(".cruiseDatePicker input:checked").data("block-date-item")};this.getSelectedStateroomType=
function(){return this.el.find("input.cruiseStateroomButton:checked:visible").data("stateroom-type")};this.getSelectedSailingDate=function(){return this.el.find('input[type="radio"].itineraryGroupSailingItem:checked').data("date-string")};d();f();g();$(window).load(function(){$('input[data-block-price-item][data-selected="true"]').prop("checked","true")});this.el.find("input.itineraryGroupSailingItem").click(function(a){a=$(a.target);var b=a.data("block-date-item");q.el.find(".cruiseStateroomPicker").addClass("displayNone");
q.el.find('.cruiseStateroomPicker[data-block-prices="'+b+'"]').removeClass("displayNone");var h=q.el.find("input.cruiseStateroomButton:checked:visible");"disabled"==h.attr("disabled")&&(h.prop("checked","false"),q.el.find("input.cruiseStateroomButton:visible:enabled").first().prop("checked","true"));d();f();g();h=q.getSelectedStateroomType();e(b,h);a.focus();p&&$namespace.Analytics.trackEvent(p.departureDateEventCategory,"Change",p.gaCruisePackagePrefix+"/"+q.getSelectedSailingDate(),null)});this.el.find("input.cruiseStateroomButton").click(function(a){a=
$(a.target);var b=q.getSelectedSailingUid(),f=a.data("stateroom-type");q.el.find('input.cruiseStateroomButton[data-stateroom-type="'+f+'"]').prop("checked","true");d();g();e(b,f);a.focus();p&&$namespace.Analytics.trackEvent(p.stateroomEventCategory,"Change",p.gaCruisePackagePrefix+"/"+q.getSelectedSailingDate(),null)});this.close=function(){this.datePickerCarousel.close()}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.TurnToReviewsTeaser=function(a,b){function d(a,b){if(isNaN(a))return 0;switch(b){case "en_US":return a.toLocaleString("en-US");case "en_CA":return a.toLocaleString("en-CA");case "fr_CA":return a.toLocaleString("fr-CA")}return a}this.$el=$(a);this.options=$.extend({style:"default"},b);var e=this.$el.data("sku"),f=this.$el.data("title"),g="#"+e+"_ReviewsAccordionButton",h=0,k=0,l=0,p=!1,q=this;(function(a,b){a=$namespace.GlobalConstants.TURNTO_REVIEWS_COUNTS_ENDPOINT_URL.replace("{sku}",
a)+$namespace.GlobalConstants.LOCALE_CODE;$.get(a,function(a){q.populateTeaser(a);q.paint(b,q.options);p=!0}).always(function(){"function"===typeof q.options.callback?q.options.callback():null})})(e,this.$el);this.$el.addClass("initialized");this.populateTeaser=function(a){h=a.ratingCount;l=a.avgRating;k=a.reviews};this.paint=function(a,b){a.empty();if(h>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_RATINGS_TO_SHOW_RATINGS())switch(a.attr("data-turnto-rating",l),a.attr("data-turnto-ratings-count",h),
b.style){case "no-link":a.append(this.generateCostcoMemberReviewsParagraph());a.append(this.generateNoLinkTeaserStats(l,h));break;default:a.append(this.generateCostcoMemberReviewsParagraph()),a.append(this.generateLinkedTeaserStats(l,h))}};this.generateCostcoMemberReviewsParagraph=function(){return $("<p>"+$namespace.TurnToReviewsUtil.TranslationTexts.COSTCO_MEMBER_REVIEWS+"</p>").attr("data-test","paragraphCostcoMemberRating")};this.generateLinkedTeaserStats=function(a,b){a=a.toFixed(1);b=k>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS()?
'(<a class="text-underline turnToTeaserWidgetLink" data-hotel-id="'+e+'"  role="link"  aria-label="Costco Member Reviews for '+e+'"  data-taborder="document">'+d(b,$namespace.GlobalConstants.LOCALE_CODE)+" "+$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS+"</a>)":"("+d(b,$namespace.GlobalConstants.LOCALE_CODE)+" "+$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS+")";return $('<span data-test="spanCostcoMemberRating"><strong>'+a+"/5</strong> "+b+"</span>")};this.generateNoLinkTeaserStats=
function(a,b){a=a.toFixed(1);b="("+d(b,$namespace.GlobalConstants.LOCALE_CODE)+" "+$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS+")";return $('<span data-test="spanCostcoMemberRating"><strong>'+a+"/5</strong> "+b+"</span>")};this.getRatingsCount=function(){return h};this.getReviewsCount=function(){return k};this.getMaxRating=function(){return 5};this.getAvgRating=function(){return l};this.getSku=function(){return e};this.getTitle=function(){return f};this.getReviewsAccordionId=function(){return g};
this.hasReceivedData=function(){return p}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Widgets.FlightSeatSelector=function(a,b){this.$el=a;this.options=$.extend({translations:b.translations,continueToNextPageElement:b.continueToNextPageElement,continueToNextPageText:b.continueToNextPageText,continueToNextPageFunction:b.continueToNextPageFunction,backLinkElement:b.backNavigationElement,backLinkToPreviousPageFunction:b.backNavigationToPreviousPageFunction,seatInfoJson:b.flightPassengerSeatInfo},b);this.$el.addClass("initialized");this.flightSeatMap=$namespace.FlightSeatMap||
{};this.numberOfSegments=this.initializeComponents().children("option").length;this.currentSegment=1};
$namespace.Widgets.FlightSeatSelector.prototype.initializeComponents=function(){var a=$("#flight-details-megatip");a.find('#flightSeatMapTabPanels div[data-pane="1"]').addClass("active");var b=this.initializeSelectWidget(a);this.initializeContinueButton(a,b);this.initializeBackLink(a,b);this.initializeNavigationButtons(a,b);(this.noPreference=this.initializePreferenceRadioGroup(a,b))?$namespace.DomUtil.setElementLoadingMask(!1):(this.initializeAccordions(),this.initializeSeatMapContainers(a),this.initializePassengerSelection(a,
b),this.initializeSeatMap(),this.smController=new ScrollMagic.Controller,this.initializeScrollController(a,b),this.selectFlightSegment(a,b.find("option:selected"),b));return b};$namespace.Widgets.FlightSeatSelector.prototype.initializeSelectWidget=function(a){var b=this,d=$("#selectFlight");new $namespace.Widgets.SelectWidget(d);d.change(function(){var e=d.find("option:selected");b.selectFlightSegment(a,e,d)});return d};
$namespace.Widgets.FlightSeatSelector.prototype.initializeContinueButton=function(a,b){var d=this;d.continueButton=d.options.continueToNextPageElement;1==d.numberOfSegments?d.continueButton.text(d.options.continueToNextPageText):d.continueButton.text(d.options.translations.CONTINUE_TO_NEXT_FLIGHT).addClass("continueNextFlight");d.continueButton.click(function(e){$(e.target).hasClass("continueNextFlight")?d.continueToNextFlight(a,b):$("#select-no-preferences")[0].checked?d.generateFlightSeatPassengerInfoListAndContinueToNextPage(!1):
0<$(".seat-input-box").filter(":not(.Infant)").not(".has-value").length?d.showUnselectedSeatsConfirmation(a,b):d.generateFlightSeatPassengerInfoListAndContinueToNextPage(!0)})};$namespace.Widgets.FlightSeatSelector.prototype.initializeBackLink=function(a,b){var d=this;d.backLink=d.options.backLinkElement.click(function(e){$(e.target).hasClass("returnPreviousFlight")?d.returnToPreviousFlight(a,b):d.options.backLinkToPreviousPageFunction()})};
$namespace.Widgets.FlightSeatSelector.prototype.initializeNavigationButtons=function(a,b){var d=this;$(".previousFlight").click(function(){d.returnToPreviousFlight(a,b)});$(".nextFlight").click(function(){d.continueToNextFlight(a,b)});b.on("focusin",function(a){a.preventDefault}).on("focusout",function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")}).on("click change keypress",function(a){a=$(a.currentTarget);a.hasClass("active")?
a.removeClass("active"):a.addClass("active")})};
$namespace.Widgets.FlightSeatSelector.prototype.initializeScrollController=function(a,b){var d=this;$(window).on("resize",function(){var e=b.find("option:selected").val(),f=a.find('#flightSeatMapTabPanels div[data-pane="'+e+'"]');e=f.attr("data-segment");f.find("#seatInputsScrolllockTrigger"+e).empty();var g=-1*$('[data-hook="sticky-bar"]').outerHeight(),h=f.find(".seat-inputs-outer-container");f=f.find(".flight-seatmap-container");var k=f.outerHeight(),l=h.outerHeight();k-=l;l="#seatInputsScrolllockTrigger"+
e;0<$(l).length&&(d.seatBoxesScene&&d.seatBoxesScene.removePin(!0),h.height()<f.height()&&(d.seatBoxesScene=new ScrollMagic.Scene({triggerElement:l,triggerHook:"onLeave",offset:g,duration:k}),d.seatBoxesScene.setPin("#seatInputsOuterContainer_"+e,{pushFollowers:!1}).addTo(d.smController)));$namespace.Application.initializeOnMainContentReload();$namespace.TabOrder.updatePageTabOrder()})};
$namespace.Widgets.FlightSeatSelector.prototype.initializeAccordions=function(){this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?b.accordion.open(!0):b.accordion.close(!0)})};
$namespace.Widgets.FlightSeatSelector.prototype.initializePreferenceRadioGroup=function(a,b){var d=this,e=$("#select-no-preferences"),f=e[0].checked,g=$(window);$(".seatSelectPreference").click(function(){if(e[0].checked)$(".specificSeatsTab").removeClass("active"),a.hide(),d.continueButton.removeClass("continueNextFlight").text(d.options.continueToNextPageText),d.backLink.removeClass("returnPreviousFlight"),g.resize();else{d.noPreference&&(d.initializeAccordions(),d.initializeSeatMapContainers(a),
d.initializePassengerSelection(a,b),d.initializeSeatMap(),d.smController=new ScrollMagic.Controller,d.initializeScrollController(a,b),d.noPreference=!1);$(".specificSeatsTab").addClass("active");a.show();var f=b.find("option:selected").index();d.updateFlightNavigation(a,f);setTimeout(function(){g.resize()},300)}});if(f)$(".specificSeatsTab").removeClass("active"),a.hide(),d.continueButton.removeClass("continueNextFlight").text(d.options.continueToNextPageText),d.backLink.removeClass("returnPreviousFlight");
else{$(".specificSeatsTab").addClass("active");a.show();var h=b.find("option:selected").index();d.updateFlightNavigation(a,h)}return f};
$namespace.Widgets.FlightSeatSelector.prototype.initializeSeatMapContainers=function(a){var b=this,d=a.attr("data-uid"),e=$(".flightSeatMapContent");$(".loading_blocker_status_div").text($("#flightDropdownChangeText0").text());e.each(function(e){var f=$(this),g=f.attr("data-segment-uid");e={dataUrl:"flightCardActivity.act?cfca=LOAD_FLIGHT_SEAT_SELECTION_MAP&bookingFlightSegmentItemUid="+g,parentElement:$("#"+f.attr("id")),megatip:a,flightSegmentItemUid:g,selectable:!1,flightItemUid:d,loadUnselectedOptionIndex:e+
1};b.flightSeatMap.loadCurrentSeatMap(e)});$namespace.EnhancedSeatMapUtil.addCallback("seatSelectionMap",$.proxy(b.initializeSeatMap,b));if((e=b.options.seatInfoJson)&&0<e.length)for(var f=0;f<e.length;f++)b.flightSeatMap.setSeatNumber(e[f].flightSegmentItemUid,e[f].passengerIndex,e[f].seatNumber)};
$namespace.Widgets.FlightSeatSelector.prototype.initializeSeatMap=function(){var a=$("#flight-details-megatip"),b=$("#selectFlight"),d=a.find($('[data-pane="'+b.find("option:selected").val()+'"]'));if(!d.hasClass("seatMapInitialized")){var e=this,f=e.options.translations;0===d.find(".seat-input-box.active").length&&d.find(".seat-input-box").first().addClass("active");a=d.find(".seat-button.available");0<a.length&&(a.each(function(){var a=$(this);a.removeAttr("disabled").attr("data-taborder","document").find(".ada-screenreader").html(f.TEXT_SEAT+
" "+a.data("seat-id")+" - "+f.TEXT_AVAILABLE)}),d.find(".lavatory").attr("role","img").attr("aria-label",f.TEXT_LAVATORY_ICON),d.find(".galley").attr("role","img").attr("aria-label",f.TEXT_GALLEY_ICON),d.find(".closet").attr("role","img").attr("aria-label",f.TEXT_CLOSET_ICON),a.click(function(a){e.selectSeat($(a.currentTarget),d,b)}),d.addClass("seatMapInitialized"),e.populateSeatMapFromJson(b.find("option:selected")),$namespace.TabOrder.updatePageTabOrder(),$(".seat-input-box").removeClass("active"),
e.$activePassenger=$(".seat-input-box").not(".has-value").first().addClass("active"),$(window).resize())}};$namespace.Widgets.FlightSeatSelector.prototype.initializePassengerSelection=function(a,b){$(".seat-input-box").click(function(d){d.preventDefault();d=$(d.currentTarget);var e=a.find('#flightSeatMapTabPanels [data-pane="'+b.find("option:selected").val()+'"]');e.find(".seat-input-box.active").removeClass("active");self.$activePassenger=d;d.hasClass("Infant")||(d.addClass("active"),e.find(".seat-button.available").not(".selected").first().focus())})};
$namespace.Widgets.FlightSeatSelector.prototype.returnToPreviousFlight=function(a,b){if(0<this.currentSegment){--this.currentSegment;var d=b.find("option:selected");d.length||(d=b.find("option").first());d="flight-"+d.index()+"-tab";b.val(d);d=b.find('option[value="'+d+'"]').attr("selected",!0);d.siblings().removeAttr("selected");this.selectFlightSegment(a,d,b);this.populateSeatMapFromJson(d)}};
$namespace.Widgets.FlightSeatSelector.prototype.continueToNextFlight=function(a,b){if(this.currentSegment<this.numberOfSegments){this.currentSegment+=1;var d=b.find("option:selected");d.length||(d=b.find("option").first());d="flight-"+(d.index()+2)+"-tab";b.val(d);d=b.find('option[value="'+d+'"]').attr("selected",!0);d.siblings().removeAttr("selected");this.selectFlightSegment(a,d,b);this.populateSeatMapFromJson(d)}};
$namespace.Widgets.FlightSeatSelector.prototype.selectFlightSegment=function(a,b,d){var e=b.index();this.currentSegment=e+1;var f=b.val();f=a.find($('#flightSeatMapTabPanels [data-pane="'+f+'"]'));$(".loading_blocker_status_div").text($("#flightDropdownChangeText"+(e+1)).text());f.siblings().removeClass("active");f.addClass("active");this.flightSeatMap.CurrentSeatMap.updateLegend();this.updateFlightNavigation(a,e);b=$("#flightInfoMobile"+b.data("flight-index"));0<b.siblings("#seatMapAndLegendContainer"+
this.currentSegment).find(".error").length?$(b).removeClass("displayNone"):$(b).addClass("displayNone");var g=$(window);$namespace.Utils.Breakpoint.isMobile()?setTimeout(function(){$("#flightSeatMapTabPanels").find("div.active").find(".seat-inputs-inner-container a").first().focus();g.scrollTop(d.offset().top-200)},300):a.find(".flight-module-title > h4").attr("tabindex","-1").focus();this.initializeSeatMap();$(".seat-input-box").removeClass("active");this.$activePassenger=$(".seat-input-box:visible").not(".has-value").first().addClass("active");
g.resize();$namespace.TabOrder.updatePageTabOrder()};
$namespace.Widgets.FlightSeatSelector.prototype.updateFlightNavigation=function(a,b){var d=a.find(".previousFlight");a=a.find(".nextFlight");$("#select-no-preferences").is(":checked")?this.continueButton.removeClass("continueNextFlight").text(this.options.continueToNextPageText):0===b?(d.hide(),a.show(),this.backLink.removeClass("returnPreviousFlight"),this.continueButton.addClass("continueNextFlight").text(this.options.translations.CONTINUE_TO_NEXT_FLIGHT)):b<this.numberOfSegments-1?(d.show(),a.show(),
this.backLink.addClass("returnPreviousFlight"),this.continueButton.addClass("continueNextFlight").text(this.options.translations.CONTINUE_TO_NEXT_FLIGHT)):(d.show(),a.hide(),this.backLink.addClass("returnPreviousFlight"),this.continueButton.removeClass("continueNextFlight").text(this.options.continueToNextPageText))};
$namespace.Widgets.FlightSeatSelector.prototype.populateSeatMapFromJson=function(a){var b=this.options.seatInfoJson;if(b&&0<b.length){a=a.data("uid");for(var d=0;d<b.length;d++){var e=b[d].flightSegmentItemUid;if(e===a){var f=b[d].passengerIndex,g=b[d].seatNumber,h=$('div[data-segment-id="'+e+'"]').find('[data-seat-id="'+g+'"]');0<h.length&&(h.attr("data-user-id",f).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+(f+1)+"</span>"),h.find(".ada-screenreader").html(this.options.translations.TEXT_SEAT+
" "+g+" "+this.options.translations.TEXT_SELECTED_FOR_PASSENGER+" "+(f+1)),b[d].flightSegmentItemUid="",e=$('a[data-segment-id="'+e+'"]'),$(e[f]).addClass("has-value").find("input").val(g))}}}};
$namespace.Widgets.FlightSeatSelector.prototype.selectSeat=function(a,b,d){var e=this.options.translations,f=b.find('.seat-input-box.active input[type="text"]'),g=b.find('.seat-input-box input[type="text"]');0===f.length&&(f=g.last(),f.closest(".seat-input-box").addClass("active"));var h=a.data("seatId"),k=f.data("userId"),l=a;a.hasClass("seat-button")||(l=a.closest(".flight-seatmap--grid-cell").find(".seat-button"));l.find(".selected-indicator").remove();a=d.find(":selected").data("uid");void 0!==
l.data("user-id")&&this.flightSeatMap.setSeatNumber(a,l.data("user-id"),"");l.removeData("userId");b.find(".seat-button.available.selected").each(function(){var a=$(this);a.attr("data-user-id")==k&&(a.removeAttr("data-user-id").removeData("userId").removeClass("selected").find("ada-screenreader").html(e.TEXT_SEAT+" "+l.data("seat-id")+" - "+e.TEXT_AVAILABLE),a.find(".selected-indicator").remove())});l.attr("data-user-id",k).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+
(k+1)+"</span>");g.each(function(){var a=$(this);if(a.val()===h){var b=a.closest(".seat-input-box");a.val("");b.removeClass("has-value").attr("aria-label",b.data("passenger-info "+e.TEXT_SEAT_NUMBER+" "+h))}});f.val(h);g=e.TEXT_SEAT+" "+h+" "+e.TEXT_SELECTED_FOR_PASSENGER+" "+(k+1);l.find(".ada-screenreader").html(g);$(".loading_blocker_status_div").text(g);this.flightSeatMap.setSeatNumber(a,k,h);g=f.closest(".seat-input-box");f.val().length?(g.addClass("has-value").removeClass("active"),setTimeout(function(){var a=
b.find(".seat-input-box").not(".has-value");0<a.length?a.first().addClass("active").focus():l.focus()}.bind(this),10)):g.removeClass("has-value")};
$namespace.Widgets.FlightSeatSelector.prototype.showUnselectedSeatsConfirmation=function(a,b){var d=this;$namespace.AjaxUtil.makeAjaxCall("flightCardActivity.act",$.param({cfca:"LOAD_SEAT_SELECTION_ACKNOWLEDGEMENT"}),null,null,function(){var e=new $namespace.Widgets.Modal(this.responseText,function(){f&&f.off("click")});var f=$("#acknowledgement-understand-btn").click(function(){e.hide();d.generateFlightSeatPassengerInfoListAndContinueToNextPage(!0)});$(".closeButton").click(function(){var e=$(".seat-input-box").not(".has-value").first().closest(".panel").attr("id");
b.val(e);e=b.find('option[value="'+e+'"]').attr("selected",!0);e.siblings().removeAttr("selected");d.selectFlightSegment(a,e,b);setTimeout(function(){a.find(".flight-module-title > h4").attr("tabindex","-1").focus()},500)});e.show();$(".modal-close").focus()})};
$namespace.Widgets.FlightSeatSelector.prototype.generateFlightSeatPassengerInfoListAndContinueToNextPage=function(a){var b=[],d=0,e;for(e in this.flightSeatMap.getFlightSeatMap()){var f=e.split("_");if(2==f.length){var g=a?this.flightSeatMap.getSeatNumber(f[0],f[1]):"";f[0]&&(b[d++]=new this.flightSeatMap.passengerSeatInfo(f[0],f[1],g))}}a={cfca:"ADD_SEAT_SELECTIONS_TO_SESSION",seatsPreferred:a,flightSeatSelectionMapDetail:JSON.stringify({flightPassengerSeatInfo:b})};$namespace.AjaxUtil.makeAjaxCall("flightCardActivity.act",
$.param(a),null,null,this.options.continueToNextPageFunction)};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.AuthenticateAgentToken=new function(){this.TranslationTexts={TOKEN_ERROR_TITLE:{comments:{defaultComment:"Token Error Encountered"},text:"Error: Session Failed to Authenticate"},TOKEN_ERROR_TEXT:{comments:{defaultComment:"Token Error Text"},text:"The session failed to authenticate properly. Please re-try."}};this.loadErrorPage=function(){$namespace.MessageUtil.showMessage({title:this.TranslationTexts.TOKEN_ERROR_TITLE.text,text:this.TranslationTexts.TOKEN_ERROR_TEXT.text},window.close)}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;var currentBreakpoint=utils.Breakpoint.which();$namespace.View=$namespace.View||{};
$namespace.View.LanguageSelector=Backbone.View.extend({el:"#canadian_language_selector",ui:{languageSelector:null,provinceSelector:null},active:!1,languageSelector:null,provinceSelector:null,events:{"change #viewLanguageSelect":"_onLanguageChange","change #provinceSelection":"_onProvinceChange"},initialize:function(){var a=this;breakpoint.isMobile()?(this.$el=$("#footer_language_selector"),$("body").addClass("lang-select-footer")):(this.$el=$("#canadian_language_selector"),$("body").removeClass("lang-select-footer"));
this.$el.html($(".language-selector"));this.ui.languageSelector=$("#viewLanguageSelectContainer");this.ui.provinceSelector=$("#provinceSelectionContainer");if(this.ui.languageSelector.length||this.ui.provinceSelector.length)this.active=!0,this.ui.languageSelector.length&&(this.languageSelector=new $namespace.Widgets.SelectWidget(this.ui.languageSelector,{taborder:"visual"})),this.ui.provinceSelector.length&&(this.provinceSelector=new $namespace.Widgets.SelectWidget(this.ui.provinceSelector,{taborder:"visual"})),
$(window).on("resize orientationchange",$.proxy(function(b){"orientationchange"===b.type?(clearTimeout(this.rotateTimer),this.rotateTimer=setTimeout(function(){a._onResize()},100)):a._onResize()},this)),this.rotateTimer=setTimeout(function(){a._onResize()},100)},_onResize:function(){if(this.active){var a=utils.Breakpoint.which();if(a!==currentBreakpoint){if(breakpoint.isMobile()){this.$el=$("#footer_language_selector");$("body").addClass("lang-select-footer");var b=$(".language-selector");this.$el.html(b)}else this.$el=
$("#canadian_language_selector"),$("body").removeClass("lang-select-footer"),this.$el.html($(".language-selector"));this.delegateEvents()}currentBreakpoint=a}},_onLanguageChange:function(a){a=this.languageSelector.select.val();this.languageSelector.val(a,1);$namespace.Navigation.setLocale(a)},_onProvinceChange:function(a){a=this.provinceSelector.select.val();this.provinceSelector.val(a,1);$namespace.Navigation.setSelectedProvinceCode(a)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;$namespace.View=$namespace.View||{};
$namespace.View.NavigationView=Backbone.View.extend({el:"#main_navigation",ui:{navMenu:null,navMenuToggle:null,scrollLock:null,dropdownMenu:null},isNavMenuOpen:!1,dropdownMenuHideTimer:null,dropdownMenuShowTimer:null,dropdownMenuHideDebounce:333,dropdownMenuShowDebounce:333,resizeTimer:null,resizeDebounce:333,events:{"click .dropdown span.top-layer":"_onMenuSpanClick","click .dropdown > a":"_onMenuLinkClick","keydown .dropdown > a":"_onMenuLinkKeydown","focus .dropdown > a":"_onMenuLinkFocus","mouseover .dropdown":"_onDropdownMouseover",
"mouseleave .dropdown":"_onDropdownMouseleave","mouseover .dropdown-menu":"_onDropdownMenuMouseover","mouseleave .dropdown-menu":"_onDropdownMenuMouseleave","keydown div.dropdown-menu a":"_onMenuItemKeydown","click div.dropdown-menu a.menuLink":"_onSkipLinkClick","focus #nav_home":"_onDropdownMouseleave","click #dropdown_vacation_packages a":"_onVPDestinationRegionClick"},initialize:function(a){this.module=$.extend({},a).module;var b=this;this.ui.navMenuToggle=$.hook("nav-menu-toggle");this.ui.scrollLock=
$(document.body);this.resetDropdownMenu();this.navMenu=$('[data-hook="nav-menu"]');this.mainHeader=$('[data-hook="main_header"]');this.tabHandler=new $namespace.TabHandler(this.navMenu);this.tabHandlerMainHeader=new $namespace.TabHandler(this.mainHeader);this.tabHandler.disableEscapeEventHandler();this.tabHandlerMainHeader.disableEscapeEventHandler();this.translationTexts=$namespace.HeaderModule.TranslationTexts;window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX&&(this.navButtonSpan=$("<div></div>",
{"aria-live":"assertive","class":"ada-screenreader","aria-atomic":"true"}),$namespace.TabOrder.addCallback("disableTabIndexHamburgeMenu",$.proxy(this.tabHandler,"setTabindexInContainer")),this.navMenu.attr("aria-hidden","true"),this.ui.navMenuToggle.append(this.navButtonSpan),this.navButtonSpan.text(this.translationTexts.CLOSED_NAVMENU));b=this;var d=function(){window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&!$namespace.Browser.isIpadOrAndroid()?(b.$el.find("li.dropdown").each(function(a,
b){$(b).prepend($("<span></span>",{"class":"top-layer"}))}),b.$el.find("li.dropdown .dropdown-menu .menuLinkContainer a.menuLink").removeClass("display"),b.$el.find("li.dropdown > a").attr("aria-expanded","false")):(b.$el.find("li.dropdown span.top-layer").remove(),b.$el.find("li.dropdown .dropdown-menu .menuLinkContainer a.menuLink").addClass("display"),window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX&&b.$el.find("li.dropdown > a").removeAttr("aria-expanded"))};$(window).on("resize orientationchange",
function(){b.$el.removeClass("animate");$(".nav-menu-toggle-close").length&&window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&b.isNavMenuOpen&&($(".emergencyBannerPageContent").removeClass("hide-mobile"),$(".nav-menu-toggle-close").trigger("click"));d()});d();$("#main_navigation > ul > li").click(function(a){a.target==this&&$(a.target).find("A")[0].click()});$("#main_navigation > ul > li").hover(function(){$(this).css("cursor","pointer")});$(document.body).on("click",'[data-hook="nav-menu-toggle"]',
$.proxy(this._onMenuToggleClick,this));this.positionVacationPackageElements("dropdown_vacation_packages");this.positionCruiseElements("dropdown_cruises","destinationcol","col col-2");this.positionCruiseElements("dropdown_cruises","cruiselinecol","col");this.resetActive();this.$el.find("li.dropdown div.dropdown-menu").each(function(a,b){$(b).find("a").last().attr("data-tab-last","true")});this.$el.find('ul[role="menubar"] div.dropdown-menu:last-child').focusout(function(a){var d=$(this);setTimeout(function(){"menuitem"!=
$(document.activeElement).attr("role")&&0==d.has(document.activeElement).length&&b._onDropdownMouseleave(a)},1)});$namespace.Browser.isIpad()&&$("div.iPad-wrapper").css("overflow-y","hidden");this.adjustPackagesFlyout()},adjustPackagesFlyout:function(){var a=$(".packages-flyout");if(0<a.length&&(a=a.find(".col"),0<a.length))for(var b=0;b<a.length;b++){var d=$(a[b]).find(".nav-menu-group");0<d.length&&(d=$(d[d.length-1]).find(".navigation-spacing"),0<d.length&&d.removeAttr("class"))}},positionVacationPackageElements:function(a){a=
$("#"+a).find('DIV[name="destinationColumn"]');if(1==a.length){var b=0,d=$(a[0]);d.children("A").each(function(){var a=$(this),f=a.next("UL"),g=[];0<f.length&&(g=f.find("LI"));g=1.5+g.length;b>=$namespace.GlobalConstants.VP_MENULINE_LENGTH||b+g>=$namespace.GlobalConstants.VP_MENULINE_LENGTH?(b=g,d=$('<DIV CLASS="col" name="destinationColumn"></DIV>').appendTo(d.parent())):b+=g;d.append(a).append(f)})}},positionCruiseElements:function(a,b,d){a=$("#"+a).find('DIV[name="'+b+'"]');var e=0,f=$(a[0]);b=
f.children();1==a.length&&b.each(function(){var a=$(this);e>=$namespace.GlobalConstants.CRUISELINE_MENULINE_LENGTH?(f=$('<div class="'+d+'"></div>').appendTo(f.parent()),e=1):e++;f.append(a)})},setAriaExpanded:function(a,b){window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&a.attr("aria-expanded",b)},showDropdown:function(a){clearTimeout(this.dropdownMenuHideTimer);var b=$(a),d=b.attr("data-hook"),e=b.find(".dropdown-menu"),f=b.offset();b.hasClass("hover")||this.dropdownMenuShowTimer||(this.dropdownMenuShowTimer=
setTimeout($.proxy(function(){clearTimeout(this.dropdownMenuShowTimer);var a=this;this.$el.find("li.dropdown").each(function(b,e){b=$(e);b.attr("data-hook")===d?b.addClass("hover"):(b.removeClass("hover").find(".dropdown-menu").hide(),a.setAriaExpanded(b.find(">a"),!1))});b.addClass("hover");e.css({width:window.innerWidth-20+"px",left:-1*f.left+"px"}).show(0,function(){$namespace.TabOrder.updatePageTabOrder()});$namespace.Widgets.Tooltip.currentTooltip&&$namespace.Widgets.Tooltip.currentTooltip.hide();
setTimeout(function(){a.setAriaExpanded(b.find(">a"),!0)},1)},this),this.dropdownMenuShowDebounce))},hideDropdown:function(){this.$el.find("li.dropdown").removeClass("hover");this.$el.find(".dropdown-menu").hide();var a=this;setTimeout(function(){a.setAriaExpanded(a.$el.find("li.dropdown > a"),!1)},1)},resetActive:function(){if($namespace.Navigation.isWorkflowPage())$(".menu-home").removeClass("active-menu"),$.hook("nav-vacation-packages").removeClass("active-menu"),$.hook("nav-cruises").removeClass("active-menu"),
$.hook("nav-rental-cars").removeClass("active-menu"),$.hook("nav-hotels").removeClass("active-menu"),$.hook("nav-theme-parks").removeClass("active-menu");else{var a=window.location.href;0<=a.indexOf("Vacation-Packages")?$.hook("nav-vacation-packages").addClass("active-menu"):0<=a.indexOf("Cruises")?$.hook("nav-cruises").addClass("active-menu"):0<=a.indexOf("Rental-Cars")?$.hook("nav-rental-cars").addClass("active-menu"):0<=a.indexOf("Theme-Parks")?$.hook("nav-theme-parks").addClass("active-menu"):
0<=a.indexOf("Hotels")?utils.regexHotelDestinationCode(a)?$.hook("nav-vacation-packages").addClass("active-menu"):$.hook("nav-hotels").addClass("active-menu"):$(".menu-home").addClass("active-menu")}},resetDropdownMenu:function(){var a=this.$el.find("li.dropdown.hover"),b=a.find(".dropdown-menu");b.css({width:"auto",left:"auto"});(a=a.offset())&&a.left&&b.css({width:window.innerWidth+"px",left:-1*a.left+"px"})},_delayHideDropdownMenu:function(){this.dropdownMenuHideTimer=setTimeout($.proxy(this.hideDropdown,
this),this.dropdownMenuHideDebounce)},_preventHideDropdownMenu:function(){clearTimeout(this.dropdownMenuHideTimer)},_preventShowDropdownMenu:function(){clearTimeout(this.dropdownMenuShowTimer);this.dropdownMenuShowTimer=null},_onMenuSpanClick:function(a){var b=a.currentTarget.parentNode,d=$(b).find("> a").get(0),e=$(d).data("analytics");e=e&&e.length?e.split("~"):[];window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&($(b).hasClass("hover")?($namespace.Analytics.trackEvent(e[0]||"",e[1]||
"",e[2]||"",""),window.location=d.href):this.showDropdown(b),a.preventDefault())},_onMenuLinkClick:function(a){var b=("A"===a.currentTarget.nodeName?a.currentTarget:a.currentTarget.parentNode).parentNode;window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&($(b).hasClass("hover")?this._onDropdownMouseleave(a):this._onDropdownMouseover(a),a.preventDefault())},_onSkipLinkClick:function(a){a=a.currentTarget;var b=$(a).data("analytics");b=b&&b.length?b.split("~"):[];$namespace.Analytics.trackEvent(b[0]||
"",b[1]||"",b[2]||"","");window.location=a.href},_onMenuToggleClick:function(a){var b=this;this.$el.addClass("animate");this.isNavMenuOpen=!this.isNavMenuOpen;this.ui.navMenuToggle.toggleClass("nav-menu-toggle-close",this.isNavMenuOpen);this.$el.toggleClass("nav-menu-open",this.isNavMenuOpen);($namespace.Browser.iPad||$namespace.Browser.iPhone)&&$("body").toggleClass("iOS",this.isNavMenuOpen);this.ui.scrollLock.toggleClass("scroll-lock",this.isNavMenuOpen);this.isNavMenuOpen?($.datepicker._hideDatepicker(),
$(".emergencyBannerPageContent").addClass("hide-mobile"),this.navButtonSpan.text(this.translationTexts.EXPANDED_NAVMENU),$("#mainContent").attr("aria-hidden","true"),$(".footerbound").attr("aria-hidden","true"),this.tabHandlerMainHeader.setTabIndexesForContainer(),this.navMenu.attr("aria-hidden","false")):(this.navButtonSpan.text(this.translationTexts.CLOSED_NAVMENU),$(".emergencyBannerPageContent").removeClass("hide-mobile"),this.tabHandler.unsetTabIndexesForContainer(),$("#mainContent").attr("aria-hidden",
"false"),$(".footerbound").attr("aria-hidden","false"),this.navMenu.attr("aria-hidden","true"));this.$el.on(utils.getTransitionEndEvent(),function(){b.$el.removeClass("animate")})},_onDropdownMouseover:function(a){a="A"===a.currentTarget.nodeName||"SPAN"===a.currentTarget.nodeName?a.currentTarget.parentNode:a.currentTarget;window.innerWidth>$namespace.Config.BREAKPOINTS.MOBILE_MAX&&($(".date-widget .ui-cal-wrapper").hide(),$(".date-widget").removeClass("active open"),$(".data-list-widget .ui-list-wrapper").hide(),
$(".data-list-widget").removeClass("active list-open"),this.showDropdown(a),$.datepicker._hideDatepicker(),(a=$("select:focus"))&&a.blur())},_onDropdownMouseleave:function(a){this._preventShowDropdownMenu();this._delayHideDropdownMenu()},_onDropdownMenuMouseover:function(a){this._preventShowDropdownMenu();this._preventHideDropdownMenu()},_onDropdownMenuMouseleave:function(a){this._preventShowDropdownMenu();a.relatedTarget&&$(a.relatedTarget).hasClass("dropdown")?this._preventHideDropdownMenu():this._delayHideDropdownMenu()},
_onMenuLinkKeydown:function(a){var b=utils.Keyboard,d=b.getCode(a);if(d==b.TAB&&a.shiftKey)this._onDropdownMouseleave(a);else if(d==b.ENTER||d==b.ESCAPE)$(("A"===a.currentTarget.nodeName?a.currentTarget:a.currentTarget.parentNode).parentNode).hasClass("hover")?this._onDropdownMouseleave(a):d!=b.ESCAPE&&this._onDropdownMouseover(a),a.stopPropagation(),a.preventDefault()},_onMenuItemKeydown:function(a){var b=$(a.currentTarget),d=utils.Keyboard,e=d.getCode(a);b.data("tab-last")&&!a.shiftKey&&e==d.TAB&&
this._onDropdownMouseleave(a);e==d.ESCAPE&&(this._onDropdownMouseleave(a),a=$(a.currentTarget).parents("li.dropdown"),b=a.find(">a"),a.removeClass("hover"),b.focus())},_onMenuLinkFocus:function(a){$(a.currentTarget).parent().hasClass("hover")||this._onDropdownMouseleave(a)},_onVPDestinationRegionClick:function(a){var b=$(document).attr("title").split("|")[0].trim()+" page";a=$(a.currentTarget);var d=a.attr("data-id");"vp-destination"===d?(d=a.attr("data-destination"))&&""!==d&&$namespace.Analytics.track({vendor:"adobe",
type:"ev",events:"6",v5:"top nav|"+d,v1:b}):"vp-region"===d&&(d=a.attr("data-destination"),a=a.attr("data-region"),d&&""!==d&&$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"6",v5:"top nav|"+d+":"+a,v1:b}))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;$namespace.View=$namespace.View||{};$namespace.View.FooterView=Backbone.View.extend({el:"footer",events:{"click .footer-col > ul > li > a":"_onFooterLinkClick"},initialize:function(a){this.module=$.extend({},a).module},_onFooterLinkClick:function(a){a=a.currentTarget;var b=$(a.parentNode.parentNode.firstChild).find("h3").get(0).innerText;$namespace.Analytics.track({vendor:"adobe",type:"event",events:"5",v5:"footer|"+b+"|"+a.innerText})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		
	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};var USER_FORMS={LOGIN_ACCOUNT:0,CREATE_ACCOUNT:1,GUEST_ACCOUNT:2,RECOVER_PASSWORD:3};
$namespace.View.LoginView=Backbone.View.extend({el:"#costco_member_login",ui:{submitButton:null,memberNumber:null,memberPassword:null},events:{'click [data-hook="do_recover_password"]':"_onRecoverPasswordLink",'click [data-hook="do_create_account"]':"_onCreatAccountLink",'click [data-hook="do_login_form"]':"_onLoginLink",'click [data-hook="do_no_account"]':"_onNoAccountLink",'click [data-hook="rememberMeCheckboxWidget"]':"_onRememberMeCheckBox",'click [data-hook="go_back"]':"_onBackLink",submit:"_onSubmit",
'focusin [data-hook="member_login_password"]':"_displayPasswordDisclaimer",'focusout [data-hook="member_login_password"]':"_hidePasswordDisclaimer"},isSubmitting:!1,loginTemplate:null,views:{},options:null,fromYourItinerary:null,expiredPasswordResetToken:null,productTrackingText:null,formsHistory:null,currentFormMode:null,initialize:function(a){var b=this,d=$.extend({},a);this.options=a||{};this.controller=d.controller;this.translations=d.module.TranslationTexts;this.ui.form=$("#costco_member_login");
this.ui.formContainer=$.hook("form_container");this.ui.memberNumber=$.hook("member_login_number");this.ui.memberPassword=$.hook("member_login_password");this.ui.submitButton=$.hook("login_submit");this.expiredPasswordResetToken=$("#expiredPasswordResetToken").val();this.fromYourItinerary=$('INPUT[id="fromYourItinerary"]').val();a=$('INPUT[id="isVPFlow"]').val();d=$('INPUT[id="isCarRentalFlow"]').val();var e=$('INPUT[id="isCruiseFlow"]').val();"true"==d?this.productTrackingText="Car":"true"==a?this.productTrackingText=
"VP":"true"==e&&(this.productTrackingText="Cruise");this.ui.submitButton.on("click",$.proxy(this._onSubmit,this));this.$el.find("input").on("keypress",function(a){var d=utils.Keyboard;d.getCode(a)===d.ENTER&&b._onSubmit()});this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&b.clearError("#"+a.target.id)});this.loginTemplate=this.ui.formContainer[0].innerHTML;"true"==this.expiredPasswordResetToken&&(this._onRecoverPasswordLink(),$.hook("member_recover_number").focus());
this.formsHistory=[];this.currentFormMode=USER_FORMS.LOGIN_ACCOUNT;document.title=this.translations.LOGIN_PAGE_TITLE;$(document).ready(function(){var a=$namespace.DomUtil.readCookie("rmbrid101");a?($("#member_login_number").val(a),$("#rememberMeCheckboxWidget").attr("checked","true")):($("#member_login_number").val(""),$("#rememberMeCheckboxWidget").removeAttr("checked"))});$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"true"==e?"Cruise":"true"==d?"Car":
"true"==a?"VP":"Other",v74:"/memberLogin"})},isTabPressed:function(a){var b=utils.Keyboard;return b.getCode(a)===b.TAB},grecaptchaTaborder:function(a){var b="#"+a+" iframe";$namespace.DomUtil.waitForElement(b,function(){$(b).attr({"data-taborder":"document",id:"captchaIframeContainer",title:"recaptcha"});$namespace.TabOrder.updatePageTabOrder()})},guestLogin:function(){var a=this,b=this.options.module.TranslationMessages;if(this.validateGuestLogin()&&!this.isSubmitting){var d=$.hook("communicationLanguageNoAccount").val(),
e=$.hook("guest_member_login_number").val(),f=$.hook("guest_member_login_lastname").val();this.isSubmitting=!0;$namespace.DomUtil.setElementLoadingMask(!0);f={m:"17",membershipNumber:e,lastName:f.trim(),userType:"guestUser",retrieveBooking:!1,checkMemberInactivity:!0,suppressOutput:!0};d&&(f.communicationLanguage=d);$namespace.AjaxUtil.makeAjaxCall("membership.act",$.param(f),null,null,function(d,f,k,l,p){a.isSubmitting=!1;d?($namespace.DomUtil.setElementLoadingMask(!1),$namespace.MessageUtil.showConfirmationMessage(b.GUEST_LOGIN_EXIST_ACCOUNT,
function(){$namespace.DomUtil.setElementLoadingMask(!0);var a={m:"18",membershipNumber:e,lastName:p.trim(),lc:"ACTION_LOAD_MEMBERSHIP_DETAIL",rc:"LOAD_BOOKING_SUMMARY",retrieveBooking:!1,checkMemberInactivity:!0,suppressOutput:!0};$namespace.AjaxUtil.makeAjaxCall("membership.act",$.param(a),null,null,function(){window.location.reload()})},"OK")):this.message?($namespace.DomUtil.setElementLoadingMask(!1),this.messageCode==$namespace.ErrorCodes.API_LOGIN_SERVICE_DOWN_ERROR?($namespace.DomUtil.setElementLoadingMask(!1,
1),d=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showActionErrorMessage({text:d},null),$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text))):(utils.showErrors({guest_member_login_number:$namespace.MessageUtil.prefixError(this.message.text),guest_member_login_lastname:""}),
utils.focusFirstErrorField(a.ui.form),a._trackEventDetailForLoginGA(this.messageCode))):(window.location.reload(),a._trackSuccessEventForLoginGA("success"))})}},validateGuestLogin:function(){this.clearErrors();var a=this.options.module.TranslationMessages,b=$.hook("communicationLanguageNoAccount").val(),d=$.hook("guest_member_login_number").val(),e=$.hook("guest_member_login_lastname").val(),f=!0;d?12!=d.length&&(utils.showErrors({guest_member_login_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_INVALID.translatedText)}),
f=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_membership_number_")):(utils.showErrors({guest_member_login_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_REQUIRED.translatedText)}),f=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_membership_number_"));e?2>e.length&&(d=$namespace.TranslationUtil.replaceParameters(a.LASTNAME_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:2}),utils.showErrors({guest_member_login_lastname:$namespace.MessageUtil.prefixError(d)}),
f=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_last_name_")):(utils.showErrors({guest_member_login_lastname:$namespace.MessageUtil.prefixError(a.LAST_NAME_REQUIRED.translatedText)}),f=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_last_name_"));""==b&&(utils.showErrors({communicationLanguageNoAccountDiv:$namespace.MessageUtil.prefixError(a.COMMUNICATION_LANGUAGE_REQUIRED.translatedText)}),f=!1,$namespace.Analytics.trackPageView("/er/errorCode/communication_language_required_"));
f||utils.focusFirstErrorField(this.ui.form);return f},createAccount:function(){this.clearErrors();var a=this;if(this.validateCreateAccount()&&!this.isSubmitting){var b=$.hook("member_account_number").val(),d=$.hook("member_account_lastname").val(),e=$.hook("member_account_email").val();$.hook("member_account_email_confirm").val();var f=$namespace.StringUtil.trim($.hook("member_account_password").val());$namespace.StringUtil.trim($.hook("member_account_password_confirm").val());var g=$.hook("communicationLanguage").val(),
h="";h=document.getElementsByName("g-recaptcha-response")[0].value;this.isSubmitting=!0;$namespace.DomUtil.setElementLoadingMask(!0);var k=$("#viewLanguageSelect").val();b={userType:"firstTimeUser",membershipNumber:b,lastName:d.trim(),password:$namespace.SecurityUtil.processPassword(f),emailId:$namespace.StringUtil.escapeNonAsciiChars(e),communicationLanguage:g,captchaCode:h,suppressOutput:!0};"true"==this.fromYourItinerary?(b.lc="LOAD_HOME",b.rc="LOAD_MEMBERSHIP_DETAILS",b.m="10",b.retrieveBooking=
!0,b.checkMemberInactivity=!1,d=$('INPUT[id="bookingId"]').val(),void 0!=d&&null!=d&&0<d.length&&(b.bookingId=d)):(b.m="4",b.checkMemberInactivity=!0,b.lc="ACTION_LOAD_MEMBERSHIP_DETAIL",b.rc="LOAD_BOOKING_SUMMARY");g!=k&&$namespace.Analytics.trackEvent("CreateAccount","CommunicationLanguage",g);$namespace.AjaxUtil.makeAjaxCall("membership.act",$.param(b),null,null,function(){a.isSubmitting=!1;document.getElementsByName("g-recaptcha-response")[0]&&grecaptcha.reset();if(this.message){$namespace.DomUtil.setElementLoadingMask(!1);
if(this.messageCode==$namespace.ErrorCodes.DUPLICATE_EMAIL)utils.showErrors({member_account_email:$namespace.MessageUtil.prefixError(this.message.text)});else if(this.messageCode==$namespace.ErrorCodes.CREATE_ACCOUNT_SPECIFIC_ERROR)utils.Breakpoint.isDesktop()?utils.showErrors({member_account_number_and_lastname_div:$namespace.MessageUtil.prefixError(this.message.text),member_account_number:"",member_account_lastname:""}):utils.showErrors({member_account_number_and_lastname_div:"",member_account_number:$namespace.MessageUtil.prefixError(this.message.text),
member_account_lastname:""});else if(this.messageCode==$namespace.ErrorCodes.PASSWORD_VALIDATION_ERROR||this.messageCode==$namespace.ErrorCodes.STRONG_PASSWORD_VALIDATION_ERROR)utils.showErrors({member_account_password:$namespace.SecurityUtil.getInvalidPasswordMessage()});else if(this.messageCode==$namespace.ErrorCodes.API_LOGIN_SERVICE_DOWN_ERROR){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,
{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text))}else utils.showErrors({member_account_number:$namespace.MessageUtil.prefixError(this.message.text)});utils.focusFirstErrorField(a.ui.form);a._trackEventDetailForLoginGA(this.messageCode)}else"true"==a.fromYourItinerary?$namespace.Navigation.loadPage("h="+
$namespace.PageHistoryConstants.HISTORY_MEMBER_PAGE):window.location.reload(),a._trackSuccessEventForLoginGA("success")})}},validateCreateAccount:function(){var a=this.options.module.TranslationMessages,b=!0,d=$.hook("member_account_number").val(),e=$.hook("member_account_lastname").val(),f=$.hook("member_account_email").val(),g=$.hook("member_account_email_confirm").val(),h=$namespace.StringUtil.trim($.hook("member_account_password").val());$.hook("member_account_password").val(h);var k=$namespace.StringUtil.trim($.hook("member_account_password_confirm").val());
$.hook("member_account_password_confirm").val(k);var l=$.hook("communicationLanguage").val();d?12!=d.length&&(utils.showErrors({member_account_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_INVALID.translatedText)}),b=!1):(utils.showErrors({member_account_number:$namespace.MessageUtil.prefixError(a.COSTCO_MEMBERSHIP_NUMBER_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_membership_number_"));e||(utils.showErrors({member_account_lastname:$namespace.MessageUtil.prefixError(a.LAST_NAME_REQUIRED.translatedText)}),
b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_last_name_"));f?utils.isValidEmail(f)||(utils.showErrors({member_account_email:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_INVALID.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_email_address_")):(utils.showErrors({member_account_email:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_e_mail_address_"));
g?utils.isValidEmail(g)||(utils.showErrors({member_account_email_confirm:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_INVALID.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_confirm_email_address_")):(utils.showErrors({member_account_email_confirm:$namespace.MessageUtil.prefixError(a.CONFIRM_EMAIL_ADDRESS_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_confirm_your_e_mail_address_"));h?$namespace.SecurityUtil.validatePasswordPolicy(h,
d,f)||(utils.showErrors({member_account_password:$namespace.SecurityUtil.getInvalidPasswordMessage()}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/The_password_entered_does_not_meet_requirements__br_/__br_/_Your_password_must_be_6_30_characters_and_may_not_contain_your_email_address_or_membership_number__br_/__br_/_")):(utils.showErrors({member_account_password:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/password_required_"));
k||(utils.showErrors({member_account_password_confirm:$namespace.MessageUtil.prefixError(a.CONFIRM_PASSWORD_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_confirm_password_"));""!=f&&""!=g&&f!==g&&(utils.showErrors({member_account_email_confirm:$namespace.MessageUtil.prefixError(a.EMAIL_CONFIRM_DOESNT_MATCH.translatedText)}),b=!1);""!=h&&""!=k&&h!==k&&($.hook("member_account_password").val(""),$.hook("member_account_password_confirm").val(""),utils.showErrors({member_account_password:$namespace.MessageUtil.prefixError(a.PASSWORD_CONFIRM_DOESNT_MATCH.translatedText)}),
b=!1);l||(utils.showErrors({createAccountCommunicationLanguageDiv:$namespace.MessageUtil.prefixError(a.COMMUNICATION_LANGUAGE_REQUIRED.translatedText)}),b=!1);document.getElementsByName("g-recaptcha-response")[0].value||(utils.showErrors({captchaDivForCreateAccountDiv:$namespace.MessageUtil.prefixError(a.CAPTCHA_VALIDATION_MESSAGE.translatedText)}),$("div.reCaptcha_error_div").append("<span>"+$namespace.MessageUtil.prefixError(a.CAPTCHA_VALIDATION_MESSAGE.translatedText)+"</span>"),setInterval(function(){$("div.reCaptcha_error_div").empty()},
2E3),b=!1,$namespace.Analytics.trackPageView("createAccount/reCaptchaNotSelected"),$namespace.Analytics.trackPageView("/er/errorCode/Please_select_captcha_for_verification_"));b||utils.focusFirstErrorField(this.ui.form);return b},recoverPassword:function(){var a=this.options.module.TranslationMessages,b=this;if(this.validateRecoverPassword()&&!this.isSubmitting){var d="";d=document.getElementsByName("g-recaptcha-response")[0].value;var e=$.hook("member_recover_number").val().trim(),f=$.hook("member_recover_lastname").val().trim();
this.isSubmitting=!0;$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCall("resetPassword.act","rp=RESET_PASSWORD&memberNumber="+e+"&lastName="+f+"&captchaCode="+d+"&suppressOutput=true",null,null,function(){b.isSubmitting=!1;$namespace.DomUtil.setElementLoadingMask(!1);if(this.messageCode==$namespace.ErrorCodes.PASSWORD_RESET_SUCCESS_MESSAGE)$namespace.Analytics.trackEvent("VP_Login","Forgot Password","Success"),$namespace.MessageUtil.showGeneralMessage(this.message);else if(this.messageCode==
$namespace.ErrorCodes.NO_ONLINE_ACCOUNT_MESSAGE)$namespace.Analytics.trackEvent("VP_Login","Forgot Password","No Account"),$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.NO_ACCOUNT_CREATE_ACCOUNT_REQUEST.sourceText)),$namespace.MessageUtil.showConfirmationMessage(a.NO_ACCOUNT_CREATE_ACCOUNT_REQUEST,function(){b._onCreatAccountLink();$("#costco_member_login").find('INPUT[id="member_account_number"]').val(e)},"Continue");
else if(this.messageCode==$namespace.ErrorCodes.API_LOGIN_SERVICE_DOWN_ERROR){$namespace.DomUtil.setElementLoadingMask(!1,1);var d=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:d},null);$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text))}else utils.showErrors({member_recover_number:$namespace.MessageUtil.prefixError(this.message.text)}),
utils.focusFirstErrorField(b.ui.form),$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text)),this.messageCode==$namespace.ErrorCodes.PASSWORD_RESET_INVALID_PARAMETERS_ERROR?$namespace.Analytics.trackEvent("VP_Login","Forgot Password","No Match"):this.messageCode==$namespace.ErrorCodes.INVALID_GOOGLE_CAPTCHA&&$namespace.Analytics.trackEvent("VP_Login","Forgot Password","Wrong Captcha Code");document.getElementsByName("g-recaptcha-response")[0]&&
(grecaptcha.reset(),this.grecaptchaTaborder("captchaDivForRecoverPassword"))});this._trackEventDetailForResetPasswordGA()}},validateRecoverPassword:function(){this.clearErrors();var a=this.options.module.TranslationMessages,b=!0,d=$.hook("member_recover_number").val().trim(),e=$.hook("member_recover_lastname").val().trim();d?12!=d.length&&(utils.showErrors({member_recover_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_INVALID.translatedText)}),b=!1):(utils.showErrors({member_recover_number:$namespace.MessageUtil.prefixError(a.COSTCO_MEMBERSHIP_NUMBER_REQUIRED.translatedText)}),
b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_membership_number_"));e||(utils.showErrors({member_recover_lastname:$namespace.MessageUtil.prefixError(a.LAST_NAME_REQUIRED.translatedText)}),b=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_last_name_"));d=document.getElementsByName("g-recaptcha-response")[0].value;if(void 0==d||""==d)utils.showErrors({captchaDivForRecoverPasswordDiv:$namespace.MessageUtil.prefixError(a.CAPTCHA_VALIDATION_MESSAGE.translatedText)}),
$("div.reCaptcha_error_div").append("<span>"+$namespace.MessageUtil.prefixError(a.CAPTCHA_VALIDATION_MESSAGE.translatedText)+"</span>"),setInterval(function(){$("div.reCaptcha_error_div").empty()},2E3),b=!1,$namespace.Analytics.trackPageView("resetPassword/reCaptchaNotSelected"),$namespace.Analytics.trackPageView("/er/errorCode/Please_select_captcha_for_verification_");b||utils.focusFirstErrorField(this.ui.form);return b},login:function(){var a=this,b=this.options.module.TranslationMessages;$("#member_login_number-error").removeClass("hide-mobile wrap");
$("#member_login_password-error").removeClass("hide-desktop");this.clearErrors();if(this.validateLogin()&&!this.isSubmitting){var d=$.hook("member_login_number").val(),e=$.hook("member_login_password").val(),f="";0<d.indexOf("@")&&(f=d.trim().toLowerCase(),d="");$("#rememberMeCheckboxWidget").prop("checked")?0<f.length?$namespace.DomUtil.createSecureCookie("rmbrid101",f,7300,"/"):$namespace.DomUtil.createSecureCookie("rmbrid101",d,7300,"/"):$namespace.DomUtil.clearCookie("rmbrid101");this.isSubmitting=
!0;$namespace.DomUtil.setElementLoadingMask(!0);e={m:"3",membershipNumber:d,emailId:$namespace.StringUtil.escapeNonAsciiChars(f),password:$namespace.SecurityUtil.processPassword(e),suppressOutput:!0};"true"==this.fromYourItinerary?(e.retrieveBooking=!0,e.checkMemberInactivity=!1,f=$('INPUT[id="bookingId"]').val(),void 0!=f&&null!=f&&0<f.length&&(e.bookingId=f)):(e.userType="returningUser",e.checkMemberInactivity=!0,e.lc="ACTION_LOAD_MEMBERSHIP_DETAIL",e.rc="LOAD_BOOKING_SUMMARY");a.url=window.location.href;
$namespace.AjaxUtil.makeAjaxCall("membership.act",$.param(e),null,null,function(){a.isSubmitting=!1;if(this.message){$namespace.DomUtil.setElementLoadingMask(!1);var e=$namespace.ErrorCodes;this.messageCode==e.CREATE_ACCOUNT_TO_CONTINUE_BOOKING?$namespace.MessageUtil.showConfirmationMessage(b.CONTINUE_BOOKING_CREATE_ACCOUNT_REQUEST,function(){a._onCreatAccountLink();$("#costco_member_login").find('INPUT[id="member_account_number"]').val(d)}):this.messageCode==e.NO_MEMBER_ACCOUNT_AGENT_ERROR?$namespace.MessageUtil.showConfirmationMessage(b.NO_ACCOUNT_CREATE_ACCOUNT_REQUEST,
function(){a._onCreatAccountLink();$("#costco_member_login").find('INPUT[id="member_account_number"]').val(d)},"Continue"):this.messageCode==e.NO_MEMBER_ACCOUNT_GUEST_ERROR?$namespace.MessageUtil.showConfirmationMessage(b.NO_ACCOUNT_CREATE_ACCOUNT_REQUEST,function(){a._onCreatAccountLink();$("#costco_member_login").find('INPUT[id="member_account_number"]').val(d)},"Continue"):this.messageCode==e.API_LOGIN_SERVICE_DOWN_ERROR?($namespace.DomUtil.setElementLoadingMask(!1,1),e=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,
{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showActionErrorMessage({text:e},null),$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text))):(utils.showErrors({member_login_number:$namespace.MessageUtil.prefixError(this.message.text)}),utils.showErrors({member_login_password:$namespace.MessageUtil.prefixError(this.message.text)}),$("#member_login_number-error").addClass("hide-mobile wrap"),
$("#member_login_password-error").addClass("hide-desktop"),$("#member_login_number,#member_login_password").addClass("common-err"),$("#member_login_number-error").addClass("stretch"),utils.focusFirstErrorField(a.ui.form));$("#member_login_number-error").append("<br><b>"+b.NOTE_DIFFERENT_ACCOUNT.translatedText+"</b>");$("#member_login_password-error").append("<br><b>"+b.NOTE_DIFFERENT_ACCOUNT.translatedText+"</b>");a._trackEventDetailForLoginGA(this.messageCode)}else if(4==this.callbackFunctionParams.length&&
"MEMBERSHIP CHANGED"==this.callbackFunctionParams[3]){$namespace.DomUtil.setElementLoadingMask(!1);var f=this.callbackFunctionParams[1],k=this.callbackFunctionParams[2];$namespace.MessageUtil.showConfirmationMessage({text:b.MEMBERSHIP_CHANGED_MESSAGE_1.translatedText+" "+f+" "+b.MEMBERSHIP_CHANGED_MESSAGE_2.translatedText+" "+k+", "+b.MEMBERSHIP_CHANGED_MESSAGE_3.translatedText},function(){var b="m=30&oldMemberId="+f;b+="&newMemberId="+k;$namespace.AjaxUtil.makeAjaxCall("membership.act",b,null,null,
function(){a._onCreatAccountLink();$("#costco_member_login").find('INPUT[id="member_account_number"]').val(k)})})}else 1==this.callbackFunctionParams.length&&"PRINT_ITINERARY"==this.callbackFunctionParams[0]?$namespace.Navigation.loadPage(a.url):(window.location.reload(),a._trackSuccessEventForLoginGA("success"))})}},validateLogin:function(){var a=this.options.module.TranslationMessages,b=!0;""==$.hook("member_login_password").val().trim()&&$.hook("member_login_password").val("");var d=$.hook("member_login_number").val();
$.hook("member_login_password").val()||(utils.showErrors({member_login_password:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)}),$("#member_login_number-error").removeClass("stretch"),$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_Travel_password_"),$namespace.Analytics.trackEvent("Error/Login/Other","Login Attempt",null),b=!1);d?utils.isValidMembershipNumberOrEmail(d)||(utils.showErrors({member_login_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_OR_EMAIL_INVALID.translatedText)}),
b&&(utils.showErrors({member_login_password:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_OR_EMAIL_INVALID.translatedText)}),$("#member_login_number,#member_login_password").addClass("common-err"),$("#member_login_number-error").addClass("hide-mobile"),$("#member_login_password-error").addClass("hide-desktop"),$("#member_login_number-error").addClass("stretch"),$("#member_login_number-error").append("<br><b>"+a.NOTE_DIFFERENT_ACCOUNT.translatedText+"</b>"),$("#member_login_password-error").append("<br><b>"+
a.NOTE_DIFFERENT_ACCOUNT.translatedText+"</b>")),b=!1):(utils.showErrors({member_login_number:$namespace.MessageUtil.prefixError(a.MEMBERSHIP_NUMBER_OR_EMAIL_REQUIRED.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_membership_number_"),$namespace.Analytics.trackEvent("Error/Login/Other","Login Attempt",null),b=!1);b||($("#member_login_number-error").addClass("wrap"),utils.focusFirstErrorField(this.ui.form));return b},clearError:function(a){if($(a).hasClass("common-err")){if(a=
$(".common-err"),a.length){for(var b=[],d=0;d<a.length;d++){var e=$(a[d]).attr("id");b.push(e)}b.length&&($(".common-err").removeClass("common-err"),this.clearErrors(b))}}else this.clearErrors([a])},clearErrors:function(a){if(arguments.length)var b=arguments[0];else b=arguments.length?arguments[0]:"#member_login_number #member_login_password #member_recover_number #member_recover_lastname #guest_member_login_number #guest_member_login_lastname #communicationLanguageNoAccountDiv #captchaDivForRecoverPasswordDiv #member_account_number #member_account_lastname #member_account_email #member_account_email_confirm #member_account_password #member_account_password_confirm #captchaDivForCreateAccountDiv #createAccountCommunicationLanguageDiv #member_account_number_and_lastname_div".split(" "),
$(".common-err").removeClass("common-err");utils.clearErrors(b,this.ui.form)},_onSubmit:function(a){switch($.hook("form_action").val()){case "login":this.login();break;case "guest_account":this.guestLogin();break;case "create_account":this.createAccount();break;case "recover_password":this.recoverPassword()}a&&a.preventDefault()},updateFormsHistory:function(a){if(null!=a&&void 0!=a){a=$(a.target).attr("data-hook");var b=0<this.formsHistory.length?this.formsHistory[this.formsHistory.length-1]:null;
"go_back"!=a&&b!=this.currentFormMode&&this.formsHistory.push(this.currentFormMode)}},_onRecoverPasswordLink:function(a){this.updateFormsHistory(a);this.currentFormMode=USER_FORMS.RECOVER_PASSWORD;var b=this;this.productTrackingText?"Car"==this.productTrackingText?$namespace.Analytics.trackEvent("Login","ForgotPassword","RC"):"Cruise"==this.productTrackingText?$namespace.Analytics.trackEvent("Login","ForgotPassword","Cruise"):"VP"==this.productTrackingText&&$namespace.Analytics.trackEvent("Login",
"ForgotPassword","VP"):$namespace.Analytics.trackEvent("Login","ForgotPassword","Top");this.ui.formContainer[0].innerHTML=(0,$namespace.Templates.recover_password_form)();$namespace.AjaxUtil.makeAjaxCall("centerContent.act","cc=Load_Need_Help_Banner",null,"needHelpBannerDiv");$(window).scrollTop(0);this.clearErrors();grecaptcha.render("captchaDivForRecoverPassword",{sitekey:$namespace.GlobalConstants.CAPTCHA_GOOGLE_SITE_KEY,"expired-callback":function(){b.grecaptchaTaborder("captchaDivForRecoverPassword")}});
this.grecaptchaTaborder("captchaDivForRecoverPassword");this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&b.clearError("#"+a.target.id)});$.hook("member_recover_number").focus().blur(function(){this.value=this.value.replace(/[^0-9]/g,"")}).keypress(function(a){if(!$namespace.EventUtil.isNumericKeystroke(a)&&!b.isTabPressed(a))return a.preventDefault(),!1});$.hook("member_recover_lastname").focus($namespace.EventUtil.selectInputOnFocus).blur($namespace.EventUtil.trimInputValueOnBlur).keypress(function(a){if(!$namespace.Validation.isPersonNameKeyCode(a))return a.preventDefault(),
!1});this.tabReorder();document.title=this.translations.FORGOT_PASSWORD_PAGE_TITLE},_onCreatAccountLink:function(a){this.updateFormsHistory(a);this.currentFormMode=USER_FORMS.CREATE_ACCOUNT;var b=this;this.productTrackingText?"Car"==this.productTrackingText?$namespace.Analytics.trackEvent("Login","CreateTravelAccount","RC"):"Cruise"==this.productTrackingText?$namespace.Analytics.trackEvent("Login","CreateTravelAccount","Cruise"):"VP"==this.productTrackingText&&$namespace.Analytics.trackEvent("Login",
"CreateTravelAccount","VP"):$namespace.Analytics.trackEvent("Login","CreateTravelAccount","Top");this.ui.formContainer[0].innerHTML=(0,$namespace.Templates.create_travel_account_form)();$namespace.AjaxUtil.makeAjaxCall("centerContent.act","cc=Load_Need_Help_Banner",null,"needHelpBannerDiv");a=$("#createAccountCommunicationLanguageDiv");a.length&&(this.ui.communicationLanguage=new $namespace.Widgets.SelectWidget(a,{taborder:"document"}));$(window).scrollTop(0);this.clearErrors();grecaptcha.render("captchaDivForCreateAccount",
{sitekey:$namespace.GlobalConstants.CAPTCHA_GOOGLE_SITE_KEY,"expired-callback":function(){b.grecaptchaTaborder("captchaDivForCreateAccount")}});this.grecaptchaTaborder("captchaDivForCreateAccount");this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&b.clearError("#"+a.target.id)});$("#communicationLanguage").change(function(){b.clearError("#createAccountCommunicationLanguageDiv")});$("#member_account_email_confirm").bind("paste",function(a){a.preventDefault()});
$("#member_account_password_confirm").bind("paste",function(a){a.preventDefault()});$.hook("member_account_number").blur(function(){this.value=this.value.replace(/[^0-9]/g,"")}).keypress(function(a){if(!$namespace.EventUtil.isNumericKeystroke(a)&&!b.isTabPressed(a))return a.preventDefault(),!1});$.hook("member_account_lastname").focus($namespace.EventUtil.selectInputOnFocus).blur($namespace.EventUtil.trimInputValueOnBlur).keypress(function(a){if(!$namespace.Validation.isPersonNameKeyCode(a))return a.preventDefault(),
!1});$("#member_account_password_confirm").keydown(function(a){$("#createAccountInlineError_3").is(":visible")&&$(".password-confirm-error").remove()});this.tabReorder();document.title=this.translations.CREATE_ACCOUNT_PAGE_TITLE},_onLoginLink:function(a){this.updateFormsHistory(a);this.currentFormMode=USER_FORMS.LOGIN_ACCOUNT;var b=this;this.ui.formContainer[0].innerHTML=this.loginTemplate;$namespace.NeedHelpBanner.loadAgentImage();$(window).scrollTop(0);this.clearErrors();this.$el.find("input").on("input",
function(a){$namespace.Utils.hasValueChanged(a.target)&&b.clearError("#"+a.target.id)});$.hook("member_login_number").blur(function(){this.value=this.value.replace(/^\s+|\s+$/g,"")});this.tabReorder();document.title=this.translations.LOGIN_PAGE_TITLE},_onNoAccountLink:function(a){this.updateFormsHistory(a);this.currentFormMode=USER_FORMS.GUEST_ACCOUNT;var b=this;"Car"==this.productTrackingText?$namespace.Analytics.trackEvent("Login","GuestAccount","RC"):"Cruise"==this.productTrackingText?$namespace.Analytics.trackEvent("Login",
"GuestAccount","Cruise"):"VP"==this.productTrackingText&&$namespace.Analytics.trackEvent("Login","GuestAccount","VP");a=utils.getTemplate($.hook("no_travel_account_form"));this.ui.formContainer.html(a);$namespace.AjaxUtil.makeAjaxCall("centerContent.act","cc=Load_Need_Help_Banner",null,"needHelpBannerDiv");this.ui.communicationLanguage=new $namespace.Widgets.SelectWidget($("#communicationLanguageNoAccountDiv"),{taborder:"document"});this.clearErrors();this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&
b.clearError("#"+a.target.id)});$("#communicationLanguageNoAccount").change(function(){b.clearError("#communicationLanguageNoAccountDiv")});$.hook("guest_member_login_number").focus().blur(function(){this.value=this.value.replace(/[^0-9]/g,"")}).keypress(function(a){if(!$namespace.EventUtil.isNumericKeystroke(a)&&!b.isTabPressed(a))return a.preventDefault(),!1});this.tabReorder();document.title=this.translations.GUEST_LOGIN_PAGE_TITLE},_onRememberMeCheckBox:function(a){$("#rememberMeCheckboxWidget").prop("checked")?
$namespace.Analytics.trackEvent("Login","Remember_Me","Yes"):$namespace.Analytics.trackEvent("Login","Remember_Me","No")},_onBackLink:function(a){0<this.formsHistory.length?(this.currentFormMode=this.formsHistory.pop(),this.currentFormMode==USER_FORMS.RECOVER_PASSWORD?this._onRecoverPasswordLink(a):this.currentFormMode==USER_FORMS.CREATE_ACCOUNT?this._onCreatAccountLink(a):this.currentFormMode==USER_FORMS.LOGIN_ACCOUNT?this._onLoginLink(a):this.currentFormMode==USER_FORMS.GUEST_ACCOUNT&&this._onNoAccountLink(a)):
$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS?this.refreshWithHistoryCode($namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS):window.history.back()},refreshWithHistoryCode:function(a){$namespace.HistoryNavigation.replaceHistory(a);$(document).scrollTop(0);window.location.reload()},_trackSuccessEventForLoginGA:function(a){if("false"==this.fromYourItinerary)if("Car"==this.productTrackingText)$namespace.Analytics.trackEvent("Login/RentalCars",
"Login_Attempt",a);else if("Cruise"==this.productTrackingText)$namespace.Analytics.trackEvent("Login/Cruise","Login_Attempt",a);else if("Hotel"==this.productTrackingText)$namespace.Analytics.trackEvent("Login/HO","Login_Attempt",a);else{if("VP"==this.productTrackingText){var b="Login/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase();$namespace.Analytics.trackEvent(b,"Login_Attempt",a)}}else $namespace.Analytics.trackEvent("Login/Other","Login_Attempt",a)},_trackEventDetailForLoginGA:function(a){var b=
null,d=$namespace.ErrorCodes;switch(parseInt(a)){case d.USER_PROFILE_RETRIEVE_ERROR:case d.MEMBERSHIP_VALIDATION_ERROR:case d.INVALID_USER_ERROR:case d.MEMBERSHIP_GENERAL_ERROR:b="Invalid";break;case d.USER_PROFILE_VALIDATION_ERROR:b="Invalid Login";break;case d.USER_DOES_NOT_EXIST:case d.NO_MEMBER_ACCOUNT_ERROR:b="Invalid Login";break;case d.NO_MEMBER_ACCOUNT_AGENT_ERROR:b="NoTravelAccount_AgentYes";break;case d.NO_MEMBER_ACCOUNT_GUEST_ERROR:b="NoTravelAccount_GuestAcctYes";break;case d.MEMBERSHIP_DETAIL_MISTYPED_ERROR:b=
"Invalid Login";break;case d.USER_ACCOUNT_LOCKOUT_ERROR:b="Account_Locked";break;case d.DUPLICATE_EMAIL:b="Duplicate_Email";break;case d.INVALID_GOOGLE_CAPTCHA:b="CaptchaValidationFailed"}""!=b||"MisTyped"==b&&"NoTravelAccount"==b||("false"==this.fromYourItinerary?"Car"==this.productTrackingText?$namespace.Analytics.trackEvent("Error/Login/RentalCars","Login Attempt",b):"Cruise"==this.productTrackingText?$namespace.Analytics.trackEvent("Error/Login/Cruise","Login Attempt",b):"Hotel"==this.productTrackingText?
$namespace.Analytics.trackEvent("Error/Login/HO","Login Attempt",b):"VP"==this.productTrackingText&&(a="Error/Login/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase(),$namespace.Analytics.trackEvent(a,"Login Attempt",b)):$namespace.Analytics.trackEvent("Error/Login/Other","Login Attempt",b))},_trackEventDetailForResetPasswordGA:function(){if("false"==this.fromYourItinerary)if("Car"==this.productTrackingText)$namespace.Analytics.trackEvent("Login","ForgotPassword","RC");
else if("Cruise"==this.productTrackingText)$namespace.Analytics.trackEvent("Login","ForgotPassword","Cruise");else{if("VP"==this.productTrackingText){var a=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle();$namespace.Analytics.trackEvent("Login","ForgotPassword",a.toUpperCase())}}else $namespace.Analytics.trackEvent("Login","ForgotPassword","Top")},onError:function(a){try{console.error(a)}catch(b){}},tabReorder:function(){var a=$("#page_content").find("h2:visible");a.length?($(a[0]).addClass("no-outline").attr("data-taborder",
"document").focus(),$namespace.TabOrder.updatePageTabOrder(),$(a[0]).on("blur",function(b){$(a[0]).attr("tabindex","-1").removeAttr("data-taborder");$(a[0]).off("blur")})):$namespace.TabOrder.updatePageTabOrder()},_displayPasswordDisclaimer:function(){if($namespace.GlobalConstants.LOGIN_PAGE_REDESIGN){var a=$("#passwordDisclaimer").css({display:"block"});$namespace.Utils.Breakpoint.isMobile()?a.insertAfter("#member_login_password"):a.insertAfter(".loginPasswordSection .loginContentRow")}},_hidePasswordDisclaimer:function(){$namespace.GlobalConstants.LOGIN_PAGE_REDESIGN&&
$("#passwordDisclaimer").css({display:"none"})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};
$namespace.View.resetPasswordView=Backbone.View.extend({el:"#reset_password_form",ui:{submitButton:null,memberNumber:null,memberLastName:null,memberAccountNewPassword:null,memberAccountNewPasswordConfirm:null},events:{submit:"_onSubmit"},isSubmitting:!1,views:{},options:null,fromYourItinerary:null,productTrackingText:null,initialize:function(a){var b=this,d=$.extend({},a);this.options=a||{};this.controller=d.controller;this.translations=d.module.TranslationTexts;this.ui.form=$("#reset_password_form");
this.ui.submitButton=$.hook("login_submit");this.ui.submitButton.on("click",$.proxy(this._onSubmit,this));$.hook("member_reset_number").focus().blur(function(){this.value=this.value.replace(/[^0-9]/g,"")}).keypress(function(a){if(!$namespace.EventUtil.isNumericKeystroke(a)&&!b.isTabPressed(a))return a.preventDefault(),!1});$.hook("member_reset_lastname").focus($namespace.EventUtil.selectInputOnFocus).blur($namespace.EventUtil.trimInputValueOnBlur).keypress(function(a){if(!$namespace.Validation.isPersonNameKeyCode(a))return a.preventDefault(),
!1});this.$el.find("input").on("input",function(a){b.clearError("#"+a.target.id)});document.title=this.translations.RESET_PASSWORD_PAGE_TITLE},isTabPressed:function(a){var b=utils.Keyboard;return b.getCode(a)===b.TAB},resetPassword:function(){this.clearErrors();var a=this;if(this.validateResetPassword()&&!this.isSubmitting){this.isSubmitting=!0;$namespace.DomUtil.setElementLoadingMask(!0);var b=$.hook("member_reset_number").val(),d=$.hook("member_reset_lastname").val(),e=$.hook("member_account_reset_new_password").val().trim();
$.hook("member_account_reset_new_password_confirm").val().trim();b="rp=CREATE_NEW_PASSWORD&memberNumber="+b+("&lastName="+d.trim());b+="&password="+$namespace.SecurityUtil.processPassword(e.trim());b+="&id="+$.hook("reset-password-id").val();$namespace.AjaxUtil.makeAjaxCall("resetPassword.act",b,null,null,function(){a.isSubmitting=!1;if(this.message){$namespace.DomUtil.setElementLoadingMask(!1);if(this.messageCode==$namespace.ErrorCodes.PASSWORD_VALIDATION_ERROR||this.messageCode==$namespace.ErrorCodes.STRONG_PASSWORD_VALIDATION_ERROR)utils.showErrors({member_account_reset_new_password:$namespace.SecurityUtil.getInvalidPasswordMessage()});
else if(this.messageCode==$namespace.ErrorCodes.API_LOGIN_SERVICE_DOWN_ERROR){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text))}else utils.showErrors({member_reset_number:$namespace.MessageUtil.prefixError(this.message.text)});
utils.focusFirstErrorField(a.ui.form)}else $namespace.Navigation.loadPage("h=5000")})}},validateResetPassword:function(){this.clearErrors();var a=!0,b=$.hook("member_reset_number").val(),d=$.hook("member_reset_lastname").val(),e=$.hook("member_account_reset_new_password").val().trim(),f=$.hook("member_account_reset_new_password_confirm").val().trim(),g=this.options.module.TranslationMessages;b?12!=b.length&&(utils.showErrors({member_reset_number:$namespace.MessageUtil.prefixError(g.MEMBERSHIP_NUMBER_INVALID.translatedText)}),
a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_membership_number_")):(utils.showErrors({member_reset_number:$namespace.MessageUtil.prefixError(g.COSTCO_MEMBERSHIP_NUMBER_REQUIRED.translatedText)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_your_Costco_membership_number_"));d||(utils.showErrors({member_reset_lastname:$namespace.MessageUtil.prefixError(g.LAST_NAME_REQUIRED.translatedText)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_last_name_"));
e?$namespace.SecurityUtil.validatePasswordPolicy(e,b)||(utils.showErrors({member_account_reset_new_password:$namespace.SecurityUtil.getInvalidPasswordMessage()}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/The_password_entered_does_not_meet_requirements__br_/__br_/_Your_password_must_be_8_30_characters_and_may_not_contain_your_email_address_or_membership_number__br_/__br_/_")):(utils.showErrors({member_account_reset_new_password:$namespace.MessageUtil.prefixError(g.PASSWORD_REQUIRED.translatedText)}),
a=!1,$namespace.Analytics.trackPageView("/er/errorCode/password_required_"));f||(utils.showErrors({member_account_reset_new_password_confirm:$namespace.MessageUtil.prefixError(g.CONFIRM_PASSWORD_REQUIRED.translatedText)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_confirm_password_"));""!=e&&""!=f&&e!==f&&($.hook("member_account_reset_new_password").val(""),$.hook("member_account_reset_new_password_confirm").val(""),utils.showErrors({member_account_reset_new_password:$namespace.MessageUtil.prefixError(g.PASSWORD_CONFIRM_DOESNT_MATCH.translatedText)}),
a=!1,$namespace.Analytics.trackPageView("/er/errorCode/reset_password_confirm_not_match_"));a||utils.focusFirstErrorField(this.ui.form);return a},clearError:function(a){this.clearErrors([a])},clearErrors:function(a){utils.clearErrors(arguments.length?arguments[0]:arguments.length?arguments[0]:["#member_reset_number","#member_reset_lastname","#member_account_reset_new_password","#member_account_reset_new_password_confirm"],this.ui.form)},_onSubmit:function(a){this.resetPassword();a&&a.preventDefault()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};$namespace.View=$namespace.View||{};
$namespace.View.MemberAccountView=Backbone.View.extend({el:"#member_account_page",ui:{tabSwitcher:null},events:{'click [data-hook="edit_email_address"]':"_onEditEmailClick",'click [data-hook="save_email"]':"_onSaveEmailClick",'click [data-hook="cancel_email"]':"_onCancelEmailClick",'click [data-hook="edit_password"]':"_onEditPasswordClick",'click [data-hook="save_password"]':"_onSavePasswordClick",'click [data-hook="cancel_password"]':"_onCancelPasswordClick",'click [data-hook="edit_communication_language"]':"_onEditCommunicationLanguageClick",
'click [data-hook="save_communication_language"]':"_onSaveCommunicationLanguageClick",'click [data-hook="cancel_communication_language"]':"_onCancelCommunicationLanguageClick","input #current_email_field.error":"validateCurrentEmail","input #email_password_field.error":"validateEmailPassword","input #edit_email_field.error":"validateNewEmail","input #edit_email_confirm_field.error":"validateConfirmEmail","input #current_password_field.error":"validateCurrentPassword","input #edit_password_field.error":"validateNewPassword",
"input #edit_password_confirm_field.error":"validateConfirmPassword",'click [data-hook="logout"]':"_onLogoutClick"},isSubmitting:!1,options:null,module:null,initialize:function(a){var b=$.extend({},a);this.options=a||{};this.module=a.module;this.controller=b.controller;this.ui.form=$("#member_account_page");this.ui.emailForm=$.hook("email_form");this.ui.emailTrigger=$.hook("email_trigger");this.ui.saveEmail=$.hook("save_email");this.ui.cancelEmail=$.hook("cancel_email");this.ui.emailValue=$.hook("email_value");
this.ui.currentEmailField=$.hook("current_email_field");this.ui.emailPasswordField=$.hook("email_password_field");this.ui.newEmailField=$.hook("edit_email_field");this.ui.confirmEmailField=$.hook("edit_email_confirm_field");this.ui.currentPasswordField=$.hook("current_password_field");this.ui.editPasswordField=$.hook("edit_password_field");this.ui.editPasswordConfirmField=$.hook("edit_password_confirm_field");this.ui.confirmEmailField.bind("paste",function(a){a.preventDefault()});this.ui.passwordForm=
$.hook("password_form");this.ui.passwordTrigger=$.hook("password_trigger");this.ui.communicationLanguageField=$.hook("communication_language_field");this.ui.communicationLanguageForm=$.hook("communication_language_form");this.ui.communicationLanguageTrigger=$.hook("communication_language_trigger")},validateCurrentEmail:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;var b=this.ui.currentEmailField.val();b?utils.isValidEmail(b)||utils.showErrors({current_email_field:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_INVALID.translatedText)}):
utils.showErrors({current_email_field:$namespace.MessageUtil.prefixError(a.ENTER_CURRENT_EMAIL_ADDRESS_MESSAGE.translatedText)})},validateEmailPassword:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;$namespace.StringUtil.trim(this.ui.emailPasswordField.val())||utils.showErrors({email_password_field:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)})},validateNewEmail:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;
var b=this.ui.newEmailField.val();b?utils.isValidEmail(b)||utils.showErrors({edit_email_field:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_INVALID.translatedText)}):utils.showErrors({edit_email_field:$namespace.MessageUtil.prefixError(a.ENTER_NEW_EMAIL_ADDRESS_MESSAGE.translatedText)})},validateConfirmEmail:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;var b=this.ui.confirmEmailField.val();b?utils.isValidEmail(b)||utils.showErrors({edit_email_confirm_field:$namespace.MessageUtil.prefixError(a.EMAIL_ADDRESS_INVALID.translatedText)}):
utils.showErrors({edit_email_confirm_field:$namespace.MessageUtil.prefixError(a.CONFIRM_EMAIL_ADDRESS_MESSAGE.translatedText)})},validateCurrentPassword:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;$namespace.StringUtil.trim(this.ui.currentPasswordField.val())||utils.showErrors({current_password_field:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)})},validateNewPassword:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;
var b=$namespace.StringUtil.trim(this.ui.editPasswordField.val());b?$namespace.SecurityUtil.validatePasswordPolicy(b)||utils.showErrors({edit_password_field:$namespace.SecurityUtil.getInvalidPasswordMessage()}):utils.showErrors({edit_password_field:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)})},validateConfirmPassword:function(a){this.clearError("#"+a.target.id);a=this.options.module.TranslationMessages;$namespace.StringUtil.trim(this.ui.editPasswordConfirmField.val())||
utils.showErrors({edit_password_confirm_field:$namespace.MessageUtil.prefixError(a.PASSWORD_REQUIRED.translatedText)})},showEmailForm:function(){this.ui.emailForm.show();this.ui.emailTrigger.hide()},hideEmailForm:function(){this.ui.newEmailField.val("");this.ui.currentEmailField.val("");this.ui.emailPasswordField.val("");this.ui.confirmEmailField.val("");this.clearErrors();this.ui.emailForm.hide();this.ui.emailTrigger.show()},showPasswordForm:function(){this.ui.passwordForm.show();this.ui.passwordTrigger.hide()},
hidePasswordForm:function(){this.ui.currentPasswordField.val("");this.ui.editPasswordField.val("");this.ui.editPasswordConfirmField.val("");this.clearErrors();this.ui.passwordForm.hide();this.ui.passwordTrigger.show()},showCommunicationLanguageForm:function(){this.ui.communicationLanguageForm.show();this.ui.communicationLanguageTrigger.hide();$namespace.TabOrder.updatePageTabOrder()},hideCommunicationLanguageForm:function(){this.clearErrors();this.ui.communicationLanguageForm.hide();this.ui.communicationLanguageTrigger.show();
$namespace.TabOrder.updatePageTabOrder()},validateSaveEmail:function(){this.clearErrors();var a=!0,b=this.options.module.TranslationMessages,d=this.ui.currentEmailField.val(),e=this.ui.emailPasswordField.val(),f=this.ui.newEmailField.val(),g=this.ui.confirmEmailField.val(),h={};d?utils.isValidEmail(d)||(a=!1,h["#current_email_field"]=$namespace.MessageUtil.prefixError(b.EMAIL_ADDRESS_INVALID.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.EMAIL_ADDRESS_INVALID.sourceText))):
(h["#current_email_field"]=$namespace.MessageUtil.prefixError(b.ENTER_CURRENT_EMAIL_ADDRESS_MESSAGE.translatedText),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.ENTER_CURRENT_EMAIL_ADDRESS_MESSAGE.sourceText)));e||(a=!1,h["#email_password_field"]=$namespace.MessageUtil.prefixError(b.PASSWORD_REQUIRED.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.prefixError(b.PASSWORD_REQUIRED.sourceText)));
f?utils.isValidEmail(f)||(a=!1,h["#edit_email_field"]=$namespace.MessageUtil.prefixError(b.EMAIL_ADDRESS_INVALID.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.EMAIL_ADDRESS_INVALID.sourceText))):(a=!1,h["#edit_email_field"]=$namespace.MessageUtil.prefixError(b.ENTER_NEW_EMAIL_ADDRESS_MESSAGE.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.ENTER_NEW_EMAIL_ADDRESS_MESSAGE.sourceText)));
g?utils.isValidEmail(g)||(a=!1,h["#edit_email_confirm_field"]=$namespace.MessageUtil.prefixError(b.EMAIL_ADDRESS_INVALID.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.EMAIL_ADDRESS_INVALID.sourceText))):(a=!1,h["#edit_email_confirm_field"]=$namespace.MessageUtil.prefixError(b.CONFIRM_EMAIL_ADDRESS_MESSAGE.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.CONFIRM_EMAIL_ADDRESS_MESSAGE.sourceText)));
""!=d&&utils.isValidEmail(d)&&""!=f&&utils.isValidEmail(f)&&f.toUpperCase()==d.toUpperCase()?(a=!1,h["#edit_email_field"]=$namespace.MessageUtil.prefixError(b.NEW_EMAIL_ADDRESS_SAME_ERROR.translatedText),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.NEW_EMAIL_ADDRESS_SAME_ERROR.sourceText))):""!=g&&utils.isValidEmail(g)&&""!=f&&utils.isValidEmail(f)&&g!=f&&(a=!1,h["#edit_email_confirm_field"]=$namespace.MessageUtil.prefixError(b.CONFIRMED_EMAIL_ADDRESS_MATCH_ERROR.translatedText),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.CONFIRMED_EMAIL_ADDRESS_MATCH_ERROR.sourceText)));a||(utils.showErrors(h),utils.focusFirstErrorField(this.ui.form));return a},clearError:function(a){this.clearErrors([a])},clearErrors:function(a){utils.clearErrors(arguments.length?arguments[0]:arguments.length?arguments[0]:"#current_email_field #email_password_field #edit_email_field #edit_email_confirm_field #current_password_field #edit_password_field #edit_password_confirm_field".split(" "),
this.ui.form)},saveEmail:function(){var a=this;if(this.validateSaveEmail()&&!this.isSubmitting){this.isSubmitting=!0;$namespace.DomUtil.setElementLoadingMask(!0);var b=this.ui.currentEmailField.val(),d=$namespace.StringUtil.trim(this.ui.emailPasswordField.val()),e=this.ui.newEmailField.val();b="m=8&emailId="+$namespace.StringUtil.escapeNonAsciiChars(b);b+="&password="+$namespace.SecurityUtil.processPassword(d);b+="&newEmailId="+$namespace.StringUtil.escapeNonAsciiChars(e);$namespace.AjaxUtil.makeAjaxCall("membership.act",
b,null,null,function(){a.isSubmitting=!1;if(this.messageCode==$namespace.ErrorCodes.INVALID_EXISTING_EMAIL)utils.showErrors({current_email_field:$namespace.MessageUtil.prefixError(this.message.text)}),$namespace.Analytics.trackPageView("/er/errorCode/1008,Current_Email_Address_is_invalid_Please_try_again"),utils.focusFirstErrorField(a.ui.form);else if(this.messageCode==$namespace.ErrorCodes.DUPLICATE_EMAIL)utils.showErrors({current_email_field:$namespace.MessageUtil.prefixError(this.message.text)}),
$namespace.Analytics.trackPageView("/er/errorCode/1077,This_email_is_associated_with_an_existing_Costco_Travel_Account__Please_enter_a_different_email_address"),utils.focusFirstErrorField(a.ui.form);else if(0<this.callbackFunctionParams.length){var b=this.callbackFunctionParams[0],d={text:$namespace.TranslationUtil.replaceParameters(a.module.TranslationMessages.EMAIL_ADDRESS_CHANGE_SUCCESS_MESSAGE.translatedText,{emailAddress:b})};$.hook("email_value").html(b);a.hideEmailForm();$namespace.MessageUtil.showGeneralMessage(d,
$("#edit_email_address"))}else utils.showErrors({email_password_field:$namespace.MessageUtil.prefixError(a.module.TranslationMessages.UNABLE_VERIFY_MEMBERSHIP.translatedText)});$namespace.DomUtil.setElementLoadingMask(!1)})}},validateSavepassword:function(){this.clearErrors();var a=!0,b=this.options.module.TranslationMessages,d=$namespace.StringUtil.trim(this.ui.editPasswordField.val());$.hook("edit_password_field").val(d);var e=$namespace.StringUtil.trim(this.ui.currentPasswordField.val()),f=$namespace.StringUtil.trim(this.ui.editPasswordConfirmField.val()),
g={};e||($namespace.Analytics.trackPageView("/er/errorCode/Please_enter_current_password"),g["#current_password_field"]=$namespace.MessageUtil.prefixError(b.PASSWORD_REQUIRED.translatedText),a=!1);d?$namespace.SecurityUtil.validatePasswordPolicy(d)||($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.PASSWORD_VALIDATION_ERROR_TEXT_1.sourceText+" "+b.PASSWORD_VALIDATION_ERROR_TEXT_2.sourceText)),g["#edit_password_field"]=$namespace.SecurityUtil.getInvalidPasswordMessage(),
a=!1):($namespace.Analytics.trackPageView("/er/errorCode/Please_enter_new_password"),g["#edit_password_field"]=$namespace.MessageUtil.prefixError(b.PASSWORD_REQUIRED.translatedText),a=!1);f||($namespace.Analytics.trackPageView("/er/errorCode/Please_confirm_password"),g["#edit_password_confirm_field"]=$namespace.MessageUtil.prefixError(b.PASSWORD_REQUIRED.translatedText),a=!1);""!=d&&""!=f&&d!=f&&($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.PASSWORD_CONFIRM_DOESNT_MATCH.sourceText)),
g["#edit_password_confirm_field"]=$namespace.MessageUtil.prefixError(b.PASSWORD_CONFIRM_DOESNT_MATCH.translatedText),a=!1);a||(utils.showErrors(g),utils.focusFirstErrorField(this.ui.form));return a},savePassword:function(){var a=this,b=this.options.module.TranslationMessages,d=$namespace.StringUtil.trim(this.ui.editPasswordField.val());$.hook("edit_password_field").val(d);var e=$namespace.StringUtil.trim(this.ui.currentPasswordField.val());this.validateSavepassword()&&this.$el.valid()&&!this.isSubmitting&&
(this.isSubmitting=!0,$namespace.DomUtil.setElementLoadingMask(!0),d="m=7&newPassword="+$namespace.SecurityUtil.processPassword(d),d+="&password="+$namespace.SecurityUtil.processPassword(e),$namespace.AjaxUtil.makeAjaxCall("membership.act",d,null,null,function(){a.isSubmitting=!1;if(this.message)this.messageCode==$namespace.ErrorCodes.PASSWORD_VALIDATION_ERROR||this.messageCode==$namespace.ErrorCodes.STRONG_PASSWORD_VALIDATION_ERROR?(utils.showErrors({edit_password_field:$namespace.SecurityUtil.getInvalidPasswordMessage()}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.PASSWORD_VALIDATION_ERROR_TEXT_1.sourceText+" "+b.PASSWORD_VALIDATION_ERROR_TEXT_2.sourceText))):(utils.showErrors({current_password_field:$namespace.MessageUtil.prefixError(b.UNABLE_VERIFY_MEMBERSHIP.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.UNABLE_VERIFY_MEMBERSHIP.sourceText))),utils.focusFirstErrorField(a.ui.form);
else{var d={text:b.PASSWORD_RESET_SUCCESSFUL.translatedText};a.hidePasswordForm();$namespace.MessageUtil.showGeneralMessage(d,$("#edit_password"))}$namespace.DomUtil.setElementLoadingMask(!1)}))},saveCommunicationLanguage:function(){var a=this,b=this.options.module.TranslationTexts,d=this.options.module.TranslationMessages,e=this.ui.communicationLanguageField.val();this.isSubmitting||(this.isSubmitting=!0,$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCall("membership.act",
"m=22&newCommunicationLanguage="+e,null,null,function(e){a.isSubmitting=!1;a.hideCommunicationLanguageForm();if("ENGLISH"==e.toUpperCase()){e=b.COMMUNICATION_LANGUAGE_ENGLISH;var f=d.COMMUNICATION_LANGUAGE_UPDATE_SUCCESS_MESSAGE_ENGLISH.translatedText}else e=b.COMMUNICATION_LANGUAGE_FRENCH,f=d.COMMUNICATION_LANGUAGE_UPDATE_SUCCESS_MESSAGE_FRENCH.translatedText;$("#communicationLanguage").text(e);$namespace.MessageUtil.showGeneralMessage({text:f},$("#edit_communication_language"));$namespace.DomUtil.setElementLoadingMask(!1)}))},
_onEditEmailClick:function(a){this.showEmailForm();this.hidePasswordForm();this.hideCommunicationLanguageForm();$namespace.TabOrder.updatePageTabOrder();this.ui.currentEmailField.focus()},_onSaveEmailClick:function(a){$("#show_password_edit_form").is(":visible")?this.savePassword():this.saveEmail();a&&a.preventDefault()},_onCancelEmailClick:function(a){this.hideEmailForm();$namespace.TabOrder.updatePageTabOrder();$("#edit_email_address").focus()},_onEditPasswordClick:function(a){this.showPasswordForm();
this.hideEmailForm();this.hideCommunicationLanguageForm();$namespace.TabOrder.updatePageTabOrder();this.ui.currentPasswordField.focus()},_onSavePasswordClick:function(a){this.savePassword();$namespace.TabOrder.updatePageTabOrder();a&&a.preventDefault()},_onCancelPasswordClick:function(a){this.hidePasswordForm();$namespace.TabOrder.updatePageTabOrder();$("#edit_password").focus()},_onEditCommunicationLanguageClick:function(a){this.showCommunicationLanguageForm();this.hidePasswordForm();this.hideEmailForm();
$namespace.TabOrder.updatePageTabOrder();this.ui.communicationLanguageField.focus()},_onCancelCommunicationLanguageClick:function(a){this.hideCommunicationLanguageForm();$namespace.TabOrder.updatePageTabOrder();$("#edit_communication_language").focus()},_onSaveCommunicationLanguageClick:function(a){this.saveCommunicationLanguage();$namespace.TabOrder.updatePageTabOrder();a&&a.preventDefault()},_onLogoutClick:function(a){$namespace.HeaderModule.accountLogout()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};$namespace.View=$namespace.View||{};
$namespace.View.MemberAccountDetailView=Backbone.View.extend({el:"#account_booking_items",ui:{tabSwitcher:null},events:{},options:null,module:null,initialize:function(a){var b=$.extend({},a),d=this;this.options=a||{};this.module=a.module;this.ui.loadvp=$.hook("load_vp_bookings");this.ui.loadcruise=$.hook("load_cruise_bookings");this.ui.loadrentalcar=$.hook("load_rental_car_bookings");document.title=this.module.TranslationTexts.MEMBER_ACCOUNT_PAGE_TITLE;this.controller=b.controller;$(b.currentTab).addClass("active").trigger("click");
$("a[data-id]").click(function(){var a=$(this).data("id"),b=$(this).data("category"),g=$(this).data("departuremonth");"vp"===b?(b=$(this).data("destination"),$namespace.Analytics.trackPageView("vp/memberaccount/reviewConfirmation/"+b+"/"+g),d._loadVpBooking(a,"2008")):"cru"===b?(b=$(this).data("cruiselinename"),$namespace.Analytics.trackPageView("cr/memberaccount/reviewConfirmation/"+b+"/"+g),$namespace.GlobalConstants.RESPONSIVE_MYACCOUNT_CRUISE_CONFIRMATION_PAGE_ENABLED?d._loadCruiseBooking(a,"2612"):
d._loadVpBooking(a,"2504")):"car"===b?(b=$(this).data("vendorname"),$namespace.Analytics.trackPageView("rc/memberaccount/reviewConfirmation/"+b+"/"+g),d._loadCarBooking(a)):"hotel"===b&&(b=$(this).data("destination"),$namespace.Analytics.trackPageView("hotel/memberaccount/reviewConfirmation/"+b+"/"+g),d._loadHotelBooking(a,"3506"))});$("a[data-survey]").click(function(){$namespace.DomUtil.setElementLoadingMask(!0);var a=$(this).data("survey");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("takeASurvey.act",
"sm=0&bookingId="+a,null,null,function(){$namespace.Navigation.loadPage("h=6000")},null,"/gi/memberInfo/MemberSurvey")})},_loadVpBooking:function(a,b){$namespace.DomUtil.setElementLoadingMask(!0);if("2008"==b){var d="vpmbc=LOAD_CHECK_MULTICITY&bookingId="+a;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageMemberBookingConfirmation.act",d,null,null,function(e){e?(d="rc=LOAD_RIGHT_CONTENT_BANNERS&lc=LOAD_BOOKING_SINGLE_SESSION&b=41",d+="&bookingId="+a+"&suppressOutput=true",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("legacy/mainContentBody.act",
d,null,null,function(){$namespace.Navigation.loadPage("h="+b+"_"+a)},null,null)):$namespace.Navigation.loadPage("h=2020_"+a)},null,null)}else d="rc=LOAD_RIGHT_CONTENT_BANNERS&lc=LOAD_BOOKING_SINGLE_SESSION&b=41",d+="&bookingId="+a+"&suppressOutput=true",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("legacy/mainContentBody.act",d,null,null,function(){$namespace.Navigation.loadPage("h="+b+"_"+a)},null,null)},_loadHotelBooking:function(a,b){$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("legacy/mainContentBody.act",
"mcb=18&b=8&bookingId="+(a+"&suppressOutput=true"),null,null,function(){$namespace.Navigation.loadPage("h="+b+"_"+a)},null,null)},_loadCarBooking:function(a){$namespace.Navigation.loadPage("h=3007_"+a+"_1")},_loadCruiseBooking:function(a,b){$namespace.Navigation.loadPage("h="+b+"_"+a)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var model=utils.getNamespace($namespace,"Model",{});widgets=utils.getNamespace($namespace,"Widgets",{});ajax=utils.getNamespace($namespace,"Ajax",{});ajaxUtil=utils.getNamespace($namespace,"AjaxUtil",{});var analytics=$namespace.Analytics||{};
$namespace.View.CruiseSearchWidgetView=Backbone.View.extend({el:"#search_cruises_view",ui:{},model:null,module:null,WIDGET_COOKIE_NAME:"CRUISE_SEARCH_WIDGET_VALUES",events:{'change [name="optCruiseSearchType"]':"_onCruiseChange","change #cruiseDestination":"_onDestinationChange","change #departureDate":"_onDepartureChange","change #cruiseLine":"_onCruiseLineChange","change #cruiseLength":"_onLengthChange",'click [data-hook="submit_cruises"]':"_onSubmit"},initialize:function(a){a=$.extend({},a);this.undelegateEvents();
this.tooltip=new $namespace.Widgets.Tooltip(this.$el.find('A[id="cruise_tooltip"]'));this.module=a.module;this.loadValuesFromCookie();this.ui.form=$("#search_cruises_form");this.ui.cruise=$('input[name="optCruiseSearchType"]');this.ui.destination=new widgets.SelectWidget($("#cruise_destination_widget"),{taborder:"document"});this.ui.departure=new widgets.SelectWidget($("#cruise_departure_widget"),{taborder:"document"});this.ui.cruiseLine=new widgets.SelectWidget($("#cruise_line_widget"),{taborder:"document"});
this.ui.duration=new widgets.SelectWidget($("#cruise_length_widget"),{taborder:"document"});this.ui.submitButton=$.hook("submit_cruises",this.el);this.model=new model.CruiseSearch({cruise:this.ui.cruise&&this.ui.cruise[0].checked?"all":"alaska",destination:this.ui.destination.val(),departure:this.ui.departure.val(),cruiseLine:this.ui.cruiseLine.val(),duration:this.ui.duration.val()});this.validator=this.ui.form.validate({});$("#apiTryAgainLink").on("click",function(a){a.preventDefault();$(this).closest(".search-widget").find('[data-hook="submit_cruises"]').focus()});
this.delegateEvents()},loadValuesFromCookie:function(){var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);if(a)try{a=JSON.parse(a);var b=$(this.el);a.allCruises?b.find('INPUT[type="radio"][name="optCruiseSearchType"]')[0].checked=!0:$("#cruiseTourSearch").click();b.find('SELECT[id="cruiseDestination"]').val(a.destinationCode);b.find('SELECT[id="departureDate"]').val(a.departureMonth);b.find('SELECT[id="cruiseLine"]').val(a.cruiseLineCode);b.find('SELECT[id="cruiseLength"]').val(a.duration)}catch(d){}},
validate:function(){var a=this.module.TranslationMessages;this.clearErrors();var b=!0;this.ui.departure.val()||(utils.showErrors({cruise_departure_widget:$namespace.MessageUtil.prefixError(a.CRUISE_DEPARTURE_REQUIRED.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.CRUISE_DEPARTURE_REQUIRED.sourceText)),b=!1);b||utils.focusFirstErrorField(this.ui.form);return b},showSummaryMode:function(){this.$el.addClass("summary-mode")},
showEditMode:function(){this.$el.removeClass("summary-mode");this.isSubmitting=!1},updateCruiseForm:function(a){var b=this,d=utils.updateSelectOptions(this.ui.destination.select,a.destinations);d&&this.ui.destination.val(d);"alaska"===this.model.get("cruise")&&this.ui.destination.el.find("option").each(function(a,d){if(d)return b.ui.destination.val(d.value),!1});d=this.ui.departure.select.children().first().clone();utils.updateSelectOptions(this.ui.departure.select,a.departureDates,d);(d=utils.updateSelectOptions(this.ui.cruiseLine.select,
a.cruiseLines))&&this.ui.cruiseLine.val(d);(a=utils.updateSelectOptions(this.ui.duration.select,a.durations))&&this.ui.duration.val(a)},errorCruiseForm:function(a){console.error(a)},setProperty:function(a,b){this.model&&this.model.set(a,b)},reset:function(){this.$el.removeClass("summary-mode");this.$el.removeClass("completed")},_onCruiseChange:function(a){a=$(a.currentTarget).val();this.setProperty("cruise",a);a="css=1&sw=POPULATE_CRUISE_DESTINATION_DEPENDENT_FIELDS&cruiseOnlySearch="+this.ui.cruise[0].checked;
a+="&onCruiseChange=true";var b=function(a){return function(b,d,g){var e=a.module.TranslationTexts,f="";b=JSON.parse(b);1==b.length?f=b[0].value:1<b.length&&""!=b[0].value&&b.unshift({value:"",text:e.PLACEHOLDER_ANY_DESTINATION_OPTION});a.ui.destination.replaceOptions(b);b="";d=JSON.parse(d);1==d.length?b=d[0].value:1<d.length&&""!=d[0].value&&d.unshift({value:"",text:e.PLACEHOLDER_ANY_CRUISE_LINE_OPTION});a.ui.cruiseLine.replaceOptions(d);d="";g=JSON.parse(g);1==g.length?d=g[0].value:1<g.length&&
""!=g[0].value&&g.unshift({value:"",text:e.PLEASE_SELECT_DEPARTURE_MONTH});a.ui.departure.replaceOptions(g);a.ui.destination.val(f,1);a.ui.departure.val(d,1);a.ui.cruiseLine.val(b,1)}}(this);this.ui.cruise[0].checked?analytics.trackEvent("Search Cruise","Destination","Any"):analytics.trackEvent("Search Cruise","Destination","Alaska");ajaxUtil.makeAjaxCall("searchWidget.act",a,null,"cruiseLength",b,"")},_onDestinationChange:function(a){a=$(a.currentTarget).val();this.setProperty("destination",a);this.selected=
"true";var b="css=1&sw=POPULATE_CRUISE_DESTINATION_DEPENDENT_FIELDS&destinationCodes="+a+("&cruiseLength="+this.ui.duration.val());b+="&departureDateString="+this.ui.departure.val();b+="&cruiseOnlySearch="+this.ui.cruise[0].checked;var d=function(a){return function(b,d,e){var f=a.module.TranslationTexts;b=JSON.parse(b);1<b.length&&""!=b[0].value&&b.unshift({value:"",text:f.PLACEHOLDER_ANY_DESTINATION_OPTION});a.ui.destination.replaceOptions(b);d=JSON.parse(d);1<d.length&&""!=d[0].value&&d.unshift({value:"",
text:f.PLACEHOLDER_ANY_CRUISE_LINE_OPTION});a.ui.cruiseLine.replaceOptions(d);e=JSON.parse(e);1<e.length&&""!=e[0]&&e.unshift({value:"",text:f.PLEASE_SELECT_DEPARTURE_MONTH});a.ui.departure.replaceOptions(e)}}(this);analytics.trackEvent("Search Cruise","Destination",""==a?"Any":a);ajaxUtil.makeAjaxCall("SearchWidget.act",b,null,null,d,"")},_onDepartureChange:function(a){a=$(a.currentTarget).val();this.setProperty("departure",a);var b="css=1&sw=STORE_WIDGET_SELECTION&destinationCodes="+this.ui.destination.val();
b+="&cruiseLineCodes="+this.ui.cruiseLine.val();b+="&cruiseLength="+this.ui.duration.val();b=b+("&departureDateString="+a)+("&cruiseOnlySearch="+this.ui.cruise[0].checked);this.ui.departure.clearError();this.clearErrors();$("#departureDate_button-error")&&$("#departureDate_button-error").remove();var d=function(a){return function(){}}(this);analytics.trackEvent("Search Cruise","Departure","Select a Month",a);ajaxUtil.makeAjaxCall("SearchWidget.act",b,null,null,d,"")},_onCruiseLineChange:function(a){a=
$(a.currentTarget).val();analytics.trackEvent("Search Cruise","Yes",""!=a?a:"Any")},_onLengthChange:function(a){a=$(a.currentTarget).val();this.setProperty("duration",a);var b="css=1&sw=STORE_WIDGET_SELECTION&destinationCodes="+this.ui.destination.val();b+="&cruiseLineCodes="+this.ui.cruiseLine.val();b=b+("&cruiseLength="+a)+("&departureDateString="+this.ui.departure.val());b+="&cruiseOnlySearch="+this.ui.cruise[0].checked;var d=function(a){return function(){}}(this);analytics.trackEvent("Search Cruise",
"Duration",a+" nights");ajaxUtil.makeAjaxCall("SearchWidget.act",b,null,null,d,"")},_onSubmit:function(a){if(this.validate()){var b={allCruises:this.ui.cruise[0].checked,destinationCode:this.ui.destination.val(),departureMonth:this.ui.departure.val(),cruiseLineCode:this.ui.cruiseLine.val(),duration:this.ui.duration.val()};$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(b),0);$namespace.DomUtil.setElementLoadingMask(!0);b=function(){if($namespace.GlobalConstants.RESPONSIVE_CRUISE_RESULTS_AND_DETAILS_PAGES_ENABLED)if(this.message){$namespace.DomUtil.setElementLoadingMask(!1,
1);var a=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:a},null);$namespace.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(this.message.text));(a=$("#cruiseSearchResultsPage"))&&a.empty()}else $("#searchWidgetTryAgainContainer").addClass("hidden"),$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_SAILING_SEARCH_RESULTS,
[]);else $namespace.Navigation.loadPage(_webLoc+"/h=1501_1")};analytics.trackEvent("Search Cruise","Click","Cruise Search");if($namespace.GlobalConstants.RESPONSIVE_CRUISE_RESULTS_AND_DETAILS_PAGES_ENABLED){var d={cruiseTours:!this.ui.cruise[0].checked,cruiseDurationCodes:[this.ui.duration.val()],cruiseLineCodes:[this.ui.cruiseLine.val()],destinationCodes:[this.ui.destination.val()],departureDateRanges:[this.ui.departure.val()],sortByType:"MINIMUM_PRICE"};try{var e="&ctcs=LOAD_CRUISE_SEARCH_INFO&cruiseSearchInfoJSON="+
JSON.stringify(d);ajaxUtil.makeAjaxCall("cruiseSearch.act",e,null,null,b,"")}catch(f){}}else e="css=1&destinationCodes="+this.ui.destination.val(),e+="&cruiseLineCodes="+this.ui.cruiseLine.val(),e+="&cruiseLength="+this.ui.duration.val(),e+="&departureDateString="+this.ui.departure.val(),e+="&cruiseOnlySearch="+this.ui.cruise[0].checked,e+="&fetchCruiseTours="+!this.ui.cruise[0].checked,ajaxUtil.makeAjaxCallWithWaitingDiv("cruiseFilteredSearchResults.act",e+"&suppressOutput=true&rc=DO_CRUISE_SAILING_SEARCH&cfsr=LOAD_CRUISE_SEARCH_RESULTS",
null,null,b,null,"")}a.preventDefault()},clearErrors:function(){utils.clearErrors(arguments.length?arguments[0]:["#cruise_departure_widget"],this.ui.form)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		ajax=$namespace.Ajax||{};utils=$namespace.Utils||{};
$namespace.View.RentalCarSearchWidgetView=Backbone.View.extend({el:"#search_rental_cars_view",ui:{},model:null,module:null,pickUpDate:null,dropOffDate:null,isSubmitting:!1,sameDropOffLocation:!0,coupon:null,RENTAL_CAR_SELECTED_AGENCIES_CACHE:"RENTAL_CAR_SELECTED_AGENCIES_CACHE",geolocationCoordinates:{lat:null,lng:null,string:null},events:{"change #pickupTimeWidget":"_onPickUpTimeChange","change #dropoffTimeWidget":"_onDropOffTimeChange","change #driversAgeWidget":"_onAgeChange",'click [data-hook="reveal"]':"_onDifferentDropOffLocation",
'click [data-hook="unreveal"]':"_onSameDropOffLocation",'keydown [data-hook="reveal"]':"_onEnterDifferentDropOffLocation",'keydown [data-hook="unreveal"]':"_onEnterSameDropOffLocation","click #rental_car_geolocation":"_onGeoClick",'click [data-hook="submit_rental_car"]':"_onSubmit","click .radio-widget-element":"_onRemoveCouponClick",'click [data-hook="edit_car_info"]':"_onEditCarClick","click .ct-coupon":"_onCouponClick","click #crbe-cross-sell":"_onCrbeCrossSellClick"},initialize:function(a){a=
$.extend({},a);this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.localeTimeFormat=$namespace.GlobalConstants.LOCALE_TIME_FORMAT.replace(/\ba\b/g,"aa");this.cityLocationTypeSearch={CITY_STATE:1,ZIP_CODE:2,STREET_ADDRESS:3};"geolocation"in navigator||$.hook("car_geolocation_wrapper").addClass("no-geolocation");this.undelegateEvents();this.module=a.module;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();
this.ui.couponContainer=this.$el.find(".coupon-container");this.ui.summary=this.$el.find(".summary");this.ui.form=$("#search_rental_cars_form");this.ui.submitButton=$.hook("submit_rental_car");this.ui.careditmode=$(".careditmode");var b=$namespace.Config.carUtilApiKey,d=$.hook("reveal",this.ui.form);d.hasClass("initialized")?this.ui.locationRevealer=d.prop("revealer"):(this.ui.locationRevealer=new $namespace.Widgets.Revealer(d),d.prop("revealer",this.ui.locationRevealer));this.ui.pickUpLocation=new $namespace.Widgets.DataListWidget($("#pickup_location_widget"),
{url:$namespace.GlobalConstants.API_CONNECT_URL+"/api/rentalCars/locations",headers:{apiKey:b,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:$namespace.Utils.parseLocations,noResultsText:this.module.TranslationTexts.NO_LOCATIONS_ERROR_MESSAGE,onSelect:$.proxy(this._onPickUpLocationSelect,this),onLocationBlur:$.proxy(this._onPickLocationBlur,this),useGoogleAPI:!0});this.ui.dropOffLocation=new $namespace.Widgets.DataListWidget($("#dropoff_location_widget"),{url:$namespace.GlobalConstants.API_CONNECT_URL+
"/api/rentalCars/locations",headers:{apiKey:b,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:$namespace.Utils.parseLocations,noResultsText:this.module.TranslationTexts.NO_LOCATIONS_ERROR_MESSAGE,onSelect:$.proxy(this._onDropOffLocationSelect,this),onLocationBlur:$.proxy(this._onDropOffLocationBlur,this),useGoogleAPI:!0});var e=this,f=$namespace,g=f.DateUtil;b=function(a,b){a=$(a);a=/pickUp/.test(a.attr("id"));b.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+
(a?"depart":"return"));e.setDropOffDateCalendarDisplayMonth()};d=function(a){var b=/pickUp/.test($(this).attr("id"));b=$("#"+(b?"dropOffDateWidget":"pickUpDateWidget")).datepicker("getDate");b=null===b||0!=g.getDifferenceInDays(a,b)?"":"date-highlight";var d=f.SearchWidgetsModule.getAccessibleDateLabel(a);null!=e.pickUpDate&&0==g.getDifferenceInDays(a,e.pickUpDate.date)?d=f.TranslationUtil.replaceParameters(f.SearchWidgetsModule.TranslationTexts.PICK_UP_DATE_SELECTED_LABEL,{date:d}):null!=e.dropOffDate&&
0==g.getDifferenceInDays(a,e.dropOffDate.date)&&(d=f.TranslationUtil.replaceParameters(f.SearchWidgetsModule.TranslationTexts.DROP_OFF_DATE_SELECTED_LABEL,{date:d}));a=f.DateUtil.enhanceDateStringReadability(d);return[!0,b,d,a]};var h=function(a,b){e.validateDatesAndTimes();(a=b&&b.input?b.input.attr("id"):a&&a.tagName?a.getAttribute("id"):null)&&/pickUp/.test(a)&&e.autoAdjustDropOffDate()},k=f.DateUtil.getDateDaysFromToday(0);this.ui.pickUpDate=$("#pickUpDateWidget").datepicker({dateFormat:e.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),beforeShow:b,beforeShowDay:d,minDate:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:f.Config.DAY_SHORT_NAMES,monthNames:f.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:f.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:f.SearchWidgetsModule.TranslationTexts.PICK_UP_DATE_CALENDAR_LABEL,prevText:f.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:f.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.dropOffDate=$("#dropOffDateWidget").datepicker({dateFormat:e.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:b,beforeShowDay:d,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:f.Config.DAY_SHORT_NAMES,monthNames:f.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:f.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:f.SearchWidgetsModule.TranslationTexts.DROP_OFF_DATE_CALENDAR_LABEL,
prevText:f.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:f.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});b=$("#pickUpDateWidget, #dropOffDateWidget");this.floatPlaceholders=[];b.each(function(a,b){e.floatPlaceholders.push(new $namespace.FloatPlaceholder(b))});b.on("blur",function(){$(this).datepicker("widget").is(":visible")||h(this)}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),
f.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#search_rental_cars_view div.date-widget").addClass("ctc-jqui");$(window).on("resize orientationchange",function(){var a=f.SearchWidgetsModule.getWindowDimensions();
if(e.win.height!=a.height||e.win.width!=a.width)e.ui.form.find("#pickUpDateWidget, #dropOffDateWidget").datepicker("hide"),e.win=a;e.resize()});this.ui.pickUpTime=new $namespace.Widgets.SelectWidget($("#pickup_time_widget"),{taborder:"document"});this.ui.dropOffTime=new $namespace.Widgets.SelectWidget($("#dropoff_time_widget"),{taborder:"document"});this.ui.over25=$("#driversAgeWidget");this.createModel();a.searchInfo&&(this.model.pickUpLocation=a.searchInfo.pickUpLocation,this.model.dropOffLocation=
a.searchInfo.dropOffLocation,this.model.pickUpDate=a.searchInfo.pickUpDate,this.model.dropOffDate=a.searchInfo.dropOffDate,this.model.pickUpTime=a.searchInfo.pickUpTime||this.model.pickUpTime,this.model.dropOffTime=a.searchInfo.dropOffTime||this.model.dropOffTime,this.model.driverAge=a.searchInfo.driverAge);if(a=$namespace.DateUtil.getDateFromString(this.model.pickUpDate))this.pickUpDate={date:a,className:"departure"};if(a=$namespace.DateUtil.getDateFromString(this.model.dropOffDate))this.dropOffDate=
{date:a,className:"return"};this.delegateEvents();this.sameDropOffLocation=this.model.isSamePickUpAndDropOff();/address|geo|airport|city|zipCode/i.test(this.model.pickUpLocation.type)&&this.ui.pickUpLocation.val(this.model.pickUpLocation.code,this.model.pickUpLocation.name);this.ui.pickUpDate.datepicker("setDate",this.model.pickUpDate);this.ui.pickUpTime.val(this.model.pickUpTime,1);this.ui.dropOffDate.datepicker("setDate",this.model.dropOffDate);this.ui.dropOffTime.val(this.model.dropOffTime,1);
a=25==this.model.driverAge;this.driverAgeScreenreaderText=$("#driversAgeWidget-label span.ada-screenreader");this.driverAgeScreenreaderText.empty();$('INPUT[id="driversAgeWidget"]').prop("checked",a);a&&this.driverAgeScreenreaderText.text(this.module.TranslationTexts.ACCESSIBILITY_SEARCH_DRIVER_AGE);this.model.isSamePickUpAndDropOff()||($.hook("reveal_label").addClass("different"),this.ui.locationRevealer.show());this.sameDropOffLocation||/address|airport|city|zipCode/i.test(this.model.dropOffLocation.type)&&
this.ui.dropOffLocation.val(this.model.dropOffLocation.code,this.model.dropOffLocation.name);a=/^(address|geo)$/;if(a.test(this.model.pickUpLocation.type)||a.test(this.model.dropOffLocation.type))this.geolocationCoordinates.string="popularAddressInfo";this.setPickUpLocationPlaceholder();this.setDropOffLocationPlaceholder();this.pickUpDate&&this.dropOffDate&&(a=new Date(this.pickUpDate.date.getTime()),this.ui.pickUpDate.datepicker("setDate",this.pickUpDate.date),this.ui.dropOffDate.datepicker("setDate",
this.dropOffDate.date).datepicker("option",{suspendAutoUpdate:!0,minDate:a}));$("#pickupLocationTextWidget, #dropoffLocationTextWidget").click(function(){$(this).select()});"true"==$(".careditmode").val()&&this.showSummaryMode();this.resize();$namespace.TabOrder.updatePageTabOrder()},setDropOffDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.pickUpDate&&this.dropOffDate?(b=this.dropOffDate.date.getMonth(),a=this.dropOffDate.date.getFullYear(),this.pickUpDate.date.getTime()>=
this.dropOffDate.date.getTime()&&(b=this.pickUpDate.date.getMonth(),a=this.pickUpDate.date.getFullYear())):this.pickUpDate?(b=this.pickUpDate.date.getMonth(),a=this.pickUpDate.date.getFullYear()):this.dropOffDate&&(b=this.dropOffDate.date.getMonth(),a=this.dropOffDate.date.getFullYear());var d=this.ui.dropOffDate.val();this.ui.dropOffDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.dropOffDate.val(d)},createModel:function(){var a=$namespace.DateUtil.getDateDaysFromToday(1),
b=$namespace.DateUtil.getDateDaysFromToday(2);this.model={pickUpLocation:{type:"",code:"",name:"",cityCode:"",stateCode:"",countryCode:"",latitude:"",longitude:"",selectedAgencyCityCode:"",selectedAgencyStateCode:"",selectedAgencyCountryCode:""},pickUpDate:$namespace.DateUtil.getDateAsString(a),pickUpTime:"12:00 PM",dropOffLocation:{type:"",code:"",name:"",cityCode:"",stateCode:"",countryCode:"",latitude:"",longitude:""},dropOffDate:$namespace.DateUtil.getDateAsString(b),dropOffTime:"12:00 PM",driverAge:25};
this.model.isSamePickUpAndDropOff=function(){return""==this.pickUpLocation.type||""==this.dropOffLocation.type||this.pickUpLocation.type==this.dropOffLocation.type&&this.pickUpLocation.name==this.dropOffLocation.name?!0:!1}},autoAdjustDropOffDate:function(){if(this.pickUpDate){var a=!1;if(this.dropOffDate){var b=$namespace.DateUtil.getTimeFromString(this.ui.pickUpTime.val()),d=$namespace.DateUtil.getTimeFromString(this.ui.dropOffTime.val()),e=$namespace.DateUtil.getDifferenceInDays(this.pickUpDate.date,
this.dropOffDate.date);0==e?b>=d&&(a=!0):0>e&&(a=!0)}else""==$.trim(this.ui.dropOffDate.val())&&(a=!0);a&&(this.clearErrors("#pickUpDateWidget #pickupTimeWidget #pickupTimeWidget_button #dropOffDateWidget #dropoff_time_widget #dropoffTimeWidget_button".split(" ")),this.dropOffDate={date:$namespace.DateUtil.addDaysToDate(this.pickUpDate.date,1),className:"return"},this.model.dropOffDate=$namespace.DateUtil.getDateAsString(this.dropOffDate.date),this.ui.dropOffDate.val($namespace.DateUtil.getDateAsString(this.dropOffDate.date,
this.localeDateFormat)),this.ui.dropOffTime.val("12:00 PM",1),this.model.dropOffTime="12:00 PM")}},removeCoupon:function(a){var b=this,d=this.$el.find(".ct-coupon"),e=d.attr("data-coupon-code"),f=$('[data-coupon-code="'+e+'"]');e=function(){d.remove();f.removeClass("active").find('input[type="radio"]').prop("checked",!1);f.find(".span-as-label span").attr({"aria-hidden":"false"});f.find(".span-as-label span.selected-label").attr({"aria-hidden":"true"});!0===a&&(f.find(".price-offer").focus(),setTimeout(function(){b.$el.find(".couponHasMoved").text("")},
1))};this.coupon=null;!0===a?(d.slideUp(e),b.$el.find(".couponHasMoved").text(b.module.TranslationTexts.ACCESSIBILITY_REMOVE_COUPON)):e()},setCoupon:function(a){this.removeCoupon(!1);var b=this,d=a.offset(),e=$(window).scrollTop(),f=a.clone(),g=d.top-e;e=this.ui.couponContainer.offset();a.addClass("active");f.addClass("floating").css({top:g-16,left:d.left,width:a.width()});var h=(new Date).getTime();d="couponLabel_"+h;f.find("[id]").each(function(){var a=$(this).attr("id")+h;$(this).attr("id",a)});
b.$el.find(".couponHasMoved").text(b.module.TranslationTexts.ACCESSIBILITY_ADD_COUPON);f.find("a").removeAttr("data-tab-initialized");f.find("h3").attr({id:d});f.removeAttr("id data-taborder tabindex");f.find(".price-offer.height-item").removeAttr("data-taborder tabindex role");f.find(".span-as-label").html("");f.find(".radio-widget-element").attr({id:"remove"+d,"aria-labelledby":"remove"+d+"span "+d}).find("span[aria-hidden]").attr({"aria-hidden":"false",id:"remove"+d+"span"});a.find(".span-as-label span").attr({"aria-hidden":"true"});
a.find(".span-as-label span.selected-label").attr({"aria-hidden":"false"});$(document.body).append(f);this.coupon={selectedVendorId:a.attr("data-vendor-id"),selectedCouponCode:a.attr("data-coupon-code"),selectedAgencyId:a.attr("data-agency-id"),carVendorName:a.attr("data-vendor-name")};$namespace.Utils.scrollToTopOfPage();f.animate({top:e.top},400,"swing",function(){b.ui.couponContainer.animate({height:f.height()+16},333,"swing",function(){b.ui.couponContainer.removeAttr("style");var a=$("<img></img>",
{src:_webLoc+"/shared/images/svg/svg-close-round.svg",alt:""});f.find(".radio-widget-element").append(a);f.appendTo(b.ui.couponContainer).removeClass("floating").removeAttr("style").find("IMG").show();b.$el.find(".radio-widget-element").attr({"data-taborder":"document",role:"button"}).keydown(function(a){var d=$namespace.Utils.Keyboard,e=d.getCode(a);if(e===d.ENTER||e===d.SPACE)b._onRemoveCouponClick(a),e===d.SPACE&&a.preventDefault()});a=b.$el.find(".ct-coupon");a.hasClass("active")||a.addClass("active");
a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();a.focus();a.on("blur",function(){$(this).attr("tabindex",-1).removeAttr("data-taborder")});setTimeout(function(){b.$el.find(".couponHasMoved").text("")},1)})});$namespace.Analytics.trackPageView("/rc/booking/"+this.coupon.carVendorName+"/"+this.coupon.selectedCouponCode)},_onCouponClick:function(a){$(a.currentTarget);var b=$(a.target),d=$namespace.Utils.getParentElementOf(b,function(a){return"terms_and_conditions"===a.attr("data-modal")});
if("terms_and_conditions"==b.attr("data-modal")||d)d=b.parents(".ct-coupon"),b="rcbc=LOAD_CAR_COUPON_TERMS_AND_CONDITIONS&carCouponCode="+d.attr("data-coupon-code"),b+="&carCompanyCode="+d.attr("data-vendor-name"),b+="&carAgencyId="+d.attr("data-agency-id"),b+="&carVendorId="+d.attr("data-vendor-id"),d=function(a){return function(){var b=a.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!1,1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_SEARCH_NO_RESULTS_TITLE}):
(b=$namespace.Utils.getTemplate("terms_and_conditions"),b.length&&($.hook("termsAndConditionsContent",b).html(this.responseText),(new $namespace.Widgets.Modal(b)).show()))}}(this),$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarsBrandContent.act",b,null,null,d,null);a.stopPropagation();a.stopImmediatePropagation();a.preventDefault()},reset:function(){this.$el.removeClass("summary-mode");this.$el.removeClass("completed");$namespace.storage.remove("rental-car-equipment");
$namespace.storage.remove("rental-car-search-form")},showSummaryMode:function(){var a=$namespace.DateUtil.getTimeFromString(this.model.pickUpTime),b=$namespace.DateUtil.getTimeFromString(this.model.dropOffTime);a=$namespace.DateUtil.getTimeAsString(a,this.localeTimeFormat);b=$namespace.DateUtil.getTimeAsString(b,this.localeTimeFormat);var d=$namespace.Templates.rental_car_summary_template;this.$el.addClass("summary-mode");var e="airport"==this.model.pickUpLocation.type,f="airport"==this.model.dropOffLocation.type,
g=this.model.pickUpLocation.name;this.model.pickUpLocation.selectedAgencyCityCode&&this.model.pickUpLocation.selectedAgencyCityCode!==this.model.pickUpLocation.cityCode&&(g=this.model.pickUpLocation.selectedAgencyCityCode+" ("+this.model.pickUpLocation.selectedAgencyStateCode+", "+this.model.pickUpLocation.selectedAgencyCountryCode+")");var h=this.sameDropOffLocation?"":this.model.dropOffLocation.name;this.model.dropOffLocation.selectedAgencyCityCode&&this.model.dropOffLocation.selectedAgencyCityCode!==
this.model.dropOffLocation.cityCode&&(h=this.model.dropOffLocation.selectedAgencyCityCode+" ("+this.model.dropOffLocation.selectedAgencyStateCode+", "+this.model.dropOffLocation.selectedAgencyCountryCode+")");a=d({pickUpDate:$namespace.DateUtil.reformatDateString(this.model.pickUpDate,this.defaultDateFormat,this.localeDateFormat),dropOffDate:$namespace.DateUtil.reformatDateString(this.model.dropOffDate,this.defaultDateFormat,this.localeDateFormat),pickUpTime:a,dropOffTime:b,pickUpAddress:g,pickUpAgencyAddress:e?
"":this.model.pickUpLocation.agencyAddress,pickUpAgencyName:e?"":this.model.pickUpLocation.agencyName,dropOffAddress:h,dropOffAgencyAddress:f?"":this.model.dropOffLocation.agencyAddress,dropOffAgencyName:f?"":this.model.dropOffLocation.agencyName});this.ui.summary.html(a)},showEditMode:function(){this.$el.removeClass("summary-mode");this.isSubmitting=!1;$("#pickupLocationTextWidget").focus();$namespace.SearchWidgetsModule.searchWidgetAnalytics("rental-cars")},showAgeRestriction:function(){var a=$namespace.Utils.getTemplate("confirm_rental_car_age_restriction");
(new $namespace.Widgets.Confirm(a)).show()},_onPickUpDateChange:function(a,b,d){this.validateDatesAndTimes();this.autoAdjustDropOffDate();this.pickUpDate&&(a=[this.pickUpDate],this.dropOffDate&&a.push(this.dropOffDate),this.ui.pickUpDate.selectDays(a,!0),this.ui.dropOffDate.selectDays(a))},_onCrbeCrossSellClick:function(a){a.preventDefault();$namespace.SearchWidgetsModule.setTab("vacation-packages");$namespace.Analytics.trackEvent("Search Car","Click","dp/hfc_Redirect");$namespace.SearchWidgetsModule.widgets.vacationPackage._onClickSubHfcTab(void 0,
!0)},_onPickUpTimeChange:function(a){this.validateDatesAndTimes()},_onDropOffDateChange:function(a,b,d){this.validateDatesAndTimes();this.dropOffDate&&(a=[this.dropOffDate],this.pickUpDate&&a.unshift(this.pickUpDate),this.ui.pickUpDate.selectDays(a),this.ui.dropOffDate.selectDays(a,!0))},_onDropOffTimeChange:function(a){this.validateDatesAndTimes()},_onAgeChange:function(a){$(a.currentTarget).is(":checked")?(a=25,this.driverAgeScreenreaderText.text(this.module.TranslationTexts.ACCESSIBILITY_SEARCH_DRIVER_AGE)):
(a=0,this.driverAgeScreenreaderText.empty());(this.model.driverAge=a)?$("#driversAgeWidget-error").remove():($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.ErrorCodes.CAR_VENDOR_DRIVER_UNDERAGE_ERROR+"/For_drivers_who_are_under_the_age_of_25_additional_fees_and/or_restrictions_may_apply_For_information_and_assistance_in_completing_your_reservation_please_call_1-877-849-2730."),this.showAgeRestriction())},_onPickLocationBlur:function(a){this.clearError("#pickupLocationTextWidget");
a=a.target.value.replace(/^\s+|\s+$/g,"");a.length&&3>a.length?(a=$namespace.TranslationUtil.replaceParameters(this.module.TranslationMessages.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({pickupLocationTextWidget:$namespace.MessageUtil.prefixError(a)})):a.length&&!this.ui.pickUpLocation.hasValidSelection()&&$namespace.Utils.showErrors({pickupLocationTextWidget:$namespace.MessageUtil.prefixError(this.module.TranslationMessages.CAR_PICK_UP_LOCATION_REQUIRED.translatedText)})},
_onDropOffLocationBlur:function(a){this.clearError("#dropoffLocationTextWidget");$("#sameDropOffLocationLink").css("bottom","-36px");a=a.target.value.replace(/^\s+|\s+$/g,"");a.length&&3>a.length?(a=$namespace.TranslationUtil.replaceParameters(this.module.TranslationMessages.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.Breakpoint.isMobile()?$("#sameDropOffLocationLink").css("margin-top","25px"):$("#sameDropOffLocationLink").css("bottom","-45px"),$namespace.Utils.showErrors({dropoffLocationTextWidget:$namespace.MessageUtil.prefixError(a)})):
a.length&&!this.ui.dropOffLocation.hasValidSelection()&&($namespace.Utils.Breakpoint.isMobile()?$("#sameDropOffLocationLink").css("margin-top","25px"):$("#sameDropOffLocationLink").css("bottom","-45px"),$namespace.Utils.showErrors({dropoffLocationTextWidget:$namespace.MessageUtil.prefixError(this.module.TranslationMessages.CAR_DROP_OFF_LOCATION_REQUIRED.translatedText)}))},_onEnterDifferentDropOffLocation:function(a){var b=$namespace.Utils.Keyboard;$(a.target);var d=b.getCode(a);b.ENTER==d&&(this.ui.locationRevealer.show(a),
this._onDifferentDropOffLocation(a))},_onEnterSameDropOffLocation:function(a){var b=$namespace.Utils.Keyboard;$(a.target);var d=b.getCode(a);b.ENTER==d&&(this.ui.locationRevealer.hide(a),this._onSameDropOffLocation(a))},_onDifferentDropOffLocation:function(a){$.hook("reveal_label").addClass("different");this.sameDropOffLocation=!1;this.model.dropOffLocation={type:"",code:"",name:"",cityCode:"",stateCode:"",countryCode:"",latitude:"",longitude:""};$("#sameDropOffLocationLink").css("bottom","-36px");
$("#dropoffLocationTextWidget-error").remove();$("#dropoffLocationTextWidget").removeClass();$namespace.TabOrder.updatePageTabOrder();setTimeout(function(){$("#dropoffLocationTextWidget").focus()},1)},_onSameDropOffLocation:function(a){$.hook("reveal_label").removeClass("different");this.sameDropOffLocation=!0;a=this.model.pickUpLocation;this.ui.dropOffLocation.val("");this.model.dropOffLocation={type:a.type,code:a.code,name:a.name,cityCode:a.cityCode,stateCode:a.stateCode,countryCode:a.countryCode,
latitude:a.latitude,longitude:a.longitude};this.setPickUpLocationPlaceholder();$namespace.TabOrder.updatePageTabOrder();$.hook("reveal").focus()},_onPickUpLocationSelect:function(a,b){this.model.pickUpLocation={type:a.type,code:a.value,name:a.title,cityCode:"undefined"==typeof a.city?"":a.city,stateCode:"undefined"==typeof a.state?"":a.state,countryCode:"undefined"==typeof a.country?"":a.country,latitude:"undefined"==typeof a.latitude?"":a.latitude,longitude:"undefined"==typeof a.longitude?"":a.longitude};
"address"===a.type&&(this.geolocationCoordinates.string=a.latitude+""+a.longitude);this.sameDropOffLocation&&(this.model.dropOffLocation={type:a.type,code:a.value,name:a.title,cityCode:"undefined"==typeof a.city?"":a.city,stateCode:"undefined"==typeof a.state?"":a.state,countryCode:"undefined"==typeof a.country?"":a.country,latitude:"undefined"==typeof a.latitude?"":a.latitude,longitude:"undefined"==typeof a.longitude?"":a.longitude});this.setDropOffLocationPlaceholder()},_onDropOffLocationSelect:function(a,
b){this.model.dropOffLocation={type:a.type,code:a.value,name:a.title,cityCode:"undefined"==typeof a.city?"":a.city,stateCode:"undefined"==typeof a.state?"":a.state,countryCode:"undefined"==typeof a.country?"":a.country,latitude:"undefined"==typeof a.latitude?"":a.latitude,longitude:"undefined"==typeof a.longitude?"":a.longitude};"address"===a.type&&(this.geolocationCoordinates.string=a.latitude+""+a.longitude);this.setPickUpLocationPlaceholder()},_onGeoClick:function(a){"geolocation"in navigator&&
navigator.geolocation.getCurrentPosition($.proxy(this.geoSuccess,this),$.proxy(this.geoError,this),{timeOut:3E4,maximumAge:6E5});a.preventDefault()},geoSuccess:function(a){if("string"===typeof a){var b=a.split(",");this.geolocationCoordinates.string=a;this.geolocationCoordinates.lat=b[0];this.geolocationCoordinates.lng=b[1]}else this.geolocationCoordinates.lat=a.coords.latitude,this.geolocationCoordinates.lng=a.coords.longitude,this.geolocationCoordinates.string=a.coords.latitude+","+a.coords.longitude;
b="("+$namespace.Config.CURRENT_LOCATION+")";this.ui.pickUpLocation.val(b,b);this.model.pickUpLocation={type:"geo",code:a.coords.latitude+","+a.coords.longitude,name:b,countryCode:this.model.pickUpLocation.countryCode||this.model.dropOffLocation.countryCode||"US",latitude:a.coords.latitude,longitude:a.coords.longitude};this.sameDropOffLocation&&(this.model.dropOffLocation={type:"geo",code:a.coords.latitude+","+a.coords.longitude,name:b,countryCode:this.model.pickUpLocation.countryCode||this.model.dropOffLocation.countryCode||
"US",latitude:a.coords.latitude,longitude:a.coords.longitude});this.setDropOffLocationPlaceholder()},geoError:function(a){a=$namespace.Utils.getTemplate("confirm_geolocation_error");var b=new $namespace.Widgets.Confirm(a,function(){b.hide()},function(){b.hide()});b.show()},advancePage:function(){var a=this;$namespace.AnalyticsHelper.setRentalCarId();if(this.validate()){window&&window.sessionStorage&&window.sessionStorage.setItem(this.RENTAL_CAR_SELECTED_AGENCIES_CACHE,null);var b=this.model.pickUpLocation.code,
d=this.model.dropOffLocation.code,e=this.model.pickUpDate,f=this.model.pickUpTime,g=this.model.dropOffDate,h=this.model.dropOffTime,k=this.model.driverAge,l=this.model.pickUpLocation.countryCode,p=this.model.dropOffLocation.countryCode,q="airport"==this.model.pickUpLocation.type,r="airport"==this.model.dropOffLocation.type;$namespace.Utils.getUID();if(this.geolocationCoordinates.string){var v=this.model.pickUpLocation.name;var n=this.model.pickUpLocation.latitude;var t=this.model.pickUpLocation.longitude;
var u=this.model.dropOffLocation.name;var w=this.model.dropOffLocation.latitude;var y=this.model.dropOffLocation.longitude}if(this.coupon){var z=this.coupon.selectedVendorId;var x=this.coupon.selectedCouponCode;var B=this.coupon.selectedAgencyId;var G=this.coupon.carVendorName}k="rcs=1&driverAge="+k;if("airport"==this.model.pickUpLocation.type||"city"==this.model.pickUpLocation.type)k+="&pickupCity="+b;var H="";"city"==this.model.pickUpLocation.type?H=this.cityLocationTypeSearch.CITY_STATE:"zipCode"==
this.model.pickUpLocation.type?(H=this.cityLocationTypeSearch.ZIP_CODE,k+="&pickupZip="+b.trim()):"address"==this.model.pickUpLocation.type&&(H=this.cityLocationTypeSearch.STREET_ADDRESS);k+="&pickupCityLocationTypeSearch="+H;if("airport"==this.model.dropOffLocation.type||"city"==this.model.dropOffLocation.type)k+="&dropoffCity="+d;b="";"city"==this.model.dropOffLocation.type?b=this.cityLocationTypeSearch.CITY_STATE:"zipCode"==this.model.dropOffLocation.type?(b=this.cityLocationTypeSearch.ZIP_CODE,
k+="&dropoffZip="+d.trim()):"address"==this.model.dropOffLocation.type&&(b=this.cityLocationTypeSearch.STREET_ADDRESS);k=k+("&dropoffCityLocationTypeSearch="+b)+("&pickupCountry="+l)+("&dropoffCountry="+p);k+="&pickupCityRadius="+$namespace.GlobalConstants.CAR_LOCATION_SEARCH_RADIUS;k+="&dropoffCityRadius="+$namespace.GlobalConstants.CAR_LOCATION_SEARCH_RADIUS;if("address"==this.model.pickUpLocation.type||"geo"==this.model.pickUpLocation.type)k+="&pickupStreetAddress="+$namespace.StringUtil.escapeNonAsciiChars(v),
k+="&pickupLatitude="+n,k+="&pickupLongitude="+t;if("address"==this.model.dropOffLocation.type||"geo"==this.model.dropOffLocation.type)k+="&dropoffStreetAddress="+$namespace.StringUtil.escapeNonAsciiChars(u),k+="&dropoffLatitude="+w,k+="&dropoffLongitude="+y;k+="&pickupAsAirport="+q;k+="&dropoffAsAirport="+r;k+="&pickupDate="+e;k+="&dropoffDate="+g;k+="&pickupTime="+f;k+="&dropoffTime="+h;this.coupon&&(k+="&selectedVendorId="+z,k+="&selectedCouponCode="+x,k+="&selectedAgencyId="+B,k+="&carVendorName="+
G);k+="&pickupLocationCode="+this.model.pickUpLocation.code;k+="&pickupLocationName="+this.model.pickUpLocation.name;k+="&pickupLocationType="+this.model.pickUpLocation.type;k+="&pickupLocationCityCode="+this.model.pickUpLocation.cityCode;k+="&pickupLocationStateCode="+this.model.pickUpLocation.stateCode;k+="&pickupLatitude="+this.model.pickUpLocation.latitude;k+="&pickupLongitude="+this.model.pickUpLocation.longitude;k+="&dropoffLocationCode="+this.model.dropOffLocation.code;k+="&dropoffLocationName="+
this.model.dropOffLocation.name;k+="&dropoffLocationType="+this.model.dropOffLocation.type;k+="&dropoffLocationCityCode="+this.model.dropOffLocation.cityCode;k+="&dropoffLocationStateCode="+this.model.dropOffLocation.stateCode;k+="&dropoffLatitude="+this.model.dropOffLocation.latitude;k+="&dropoffLongitude="+this.model.dropOffLocation.longitude;k+="&fromHomePage=true";k+="&fromCarVendorMainMenu=true";k+="&carSearchInModifyFlow=false";k+="&suppressOutput=true";$namespace.DomUtil.setElementLoadingMask(!0);
d=function(b){return function(){var d=b.model,e=b.module.TranslationTexts;if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,1),$namespace.MessageUtil.showMessage({title:e.CAR_SEARCH_NO_RESULTS_TITLE,text:this.message.text,type:1}),(d=$namespace.AnalyticsHelper.getLastCarSearchValues())&&$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"16",v51:d.locationCode,v52:d.pickUpDate,v53:d.dropOffDate,v54:d.totalDays,v55:d.city,v57:d.country,v58:d.isRoundTrip});else{this.isSubmitting=
!0;e=this.callbackFunctionParams;var f=$namespace.PageHistoryConstants,g=/rental-cars/i.test(window.location.href)?"Rental-Cars/":"";2==e.length&&"cs=12"==e[1]?($namespace.DomUtil.setElementLoadingMask(!1,1),a._showCarCouponError(e[0],e[1])):1!=e.length||e[0]!=f.HISTORY_SEARCH_RESULT_CAR_AGENCY&&e[0]!=f.HISTORY_SEARCH_RESULT_CAR_AGENCY_MATRIX?"airport"==d.pickUpLocation.type&&"airport"==d.dropOffLocation.type?$namespace.Navigation.loadPage(_webLoc+"/"+g+"h="+f.HISTORY_SEARCH_RESULT_CAR_AGENCY_MATRIX):
$namespace.Navigation.loadPage(_webLoc+"/"+g+"h="+f.HISTORY_SEARCH_RESULT_CAR_AGENCY):$namespace.Navigation.loadPage(_webLoc+"/"+g+"h="+e[0])}}}(this);$namespace.Analytics.trackEvent("Search Car","Click","Car Rental Search");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarSearch.act",k,null,null,d,null);d=this.sameDropOffLocation?"yes":"no";e=parseInt((this.dropOffDate.date.getTime()-this.pickUpDate.date.getTime())/864E5);f=this.model.pickUpLocation.code;g=this.model.pickUpLocation.cityCode;
h=this.model.pickUpLocation.countryCode;switch(this.model.pickUpLocation.type){case "address":f=this.model.pickUpLocation.stateCode;l=new RegExp(".*\\b(.+)\\b, "+this.model.pickUpLocation.stateCode+" .+","i");(l=this.model.pickUpLocation.name.match(l))&&l.length&&(g=l[1]);break;case "city":(l=this.model.pickUpLocation.code.match(/.+-([A-Z]{2,3})$/i))&&l.length&&(f=l[1]);break;case "zipCode":l=new RegExp(this.model.pickUpLocation.code+" \\("+this.model.pickUpLocation.cityCode+", ([A-Z0-9]{2,3}), "+
this.model.pickUpLocation.countryCode+"\\)$","i"),(l=this.model.pickUpLocation.name.match(l))&&l.length&&(f=l[1])}$namespace.AnalyticsHelper.setLastCarSearchValues(f,g,h,d,this.model.pickUpDate,this.model.dropOffDate,e);$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"7,18",v51:f,v52:this.model.pickUpDate,v53:this.model.dropOffDate,v54:e,v55:g,v57:h,v58:d})}},_showCarCouponError:function(a,b){var d=this;a="rcs=11&errorMessage="+a+("&carSearchActionCode="+b);b=function(a){return function(){var b=
a.module.TranslationTexts,e={text:this.responseText,title:b.COUPON_OVERRIDE};$namespace.DomUtil.setElementLoadingMask(!1,1);$namespace.MessageUtil.showConfirmationMessage(e,function(){d._continueOverrideCarCoupon()},b.BUTTON_TITLE_CONTINUE,b.BUTTON_TITLE_CLOSE)}}(this);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarSearch.act",a,null,"",b,"")},_continueOverrideCarCoupon:function(){this.coupon=null;this.advancePage()},clearError:function(a){this.clearErrors([a])},clearErrors:function(){if(arguments.length)var a=
arguments[0];else a="#pickupLocationTextWidget #dropoffLocationTextWidget #pickUpDateWidget #pickupTimeWidget #pickupTimeWidget_button #dropOffDateWidget #dropoff_time_widget #dropoffTimeWidget_button #driversAgeWidget".split(" "),$("#sameDropOffLocationLink").css("bottom","-36px");$namespace.Utils.clearErrors(a,this.ui.form)},validate:function(){this.clearErrors();var a=!0,b=this.module.TranslationMessages;""!=this.model.pickUpLocation.code&&this.ui.pickUpLocation.hasValidSelection()||($namespace.Utils.showErrors({pickupLocationTextWidget:$namespace.MessageUtil.prefixError(b.CAR_PICK_UP_LOCATION_REQUIRED.translatedText)}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.CAR_PICK_UP_LOCATION_REQUIRED.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Car pick-up location is required"}),a=!1);this.validateDatesAndTimes(!1)||($namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Invalid pick-up date"}),a=!1);this.sameDropOffLocation||""!=this.model.dropOffLocation.code&&this.ui.dropOffLocation.hasValidSelection()||
($namespace.Utils.Breakpoint.isMobile()?$("#sameDropOffLocationLink").css("margin-top","25px"):$("#sameDropOffLocationLink").css("bottom","-45px"),$namespace.Utils.showErrors({dropoffLocationTextWidget:$namespace.MessageUtil.prefixError(b.CAR_DROP_OFF_LOCATION_REQUIRED.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.CAR_DROP_OFF_LOCATION_REQUIRED.sourceText)),a=!1);$('INPUT[id="driversAgeWidget"]').prop("checked")||($namespace.Utils.showErrors({driversAgeWidget:$namespace.MessageUtil.prefixError(b.DRIVER_AGE_CHECKBOX_REQUIRED.translatedText)}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.DRIVER_AGE_CHECKBOX_REQUIRED.sourceText)),a=!1);a||$namespace.Utils.focusFirstErrorField(this.ui.form);return a},validateDatesAndTimes:function(a){var b=!0;a=arguments.length?a?!0:!1:!0;this.clearErrors("#pickUpDateWidget #pickupTimeWidget #pickupTimeWidget_button #dropOffDateWidget #dropoff_time_widget #dropoffTimeWidget_button".split(" "));var d=this.ui.pickUpDate.val(),e=this.ui.dropOffDate.val(),
f=this.ui.pickUpTime.val(),g=this.ui.dropOffTime.val(),h=$namespace.DateUtil.isValidDateString(d,this.localeDateFormat);f=$namespace.DateUtil.getTimeFromString(f);var k=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat);g=$namespace.DateUtil.getTimeFromString(g);h&&!h.isPastDate?(this.ui.pickUpDate.datepicker("setDate",h.date),this.model.pickUpDate=$namespace.DateUtil.getDateAsString(h.date),this.pickUpDate={className:"departure",date:h.date},h=new Date(h.date.getTime()),this.ui.dropOffDate.datepicker("option",
{suspendAutoUpdate:!0,minDate:h}),$namespace.TabOrder.updatePageTabOrder()):(this.pickUpDate=null,this.model.pickUpDate="",this.ui.dropOffDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(0),suspendAutoUpdate:!0}));this.model.pickUpTime=null===f?null:$namespace.DateUtil.getTimeAsString(f);k&&!k.isPastDate?(this.ui.dropOffDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.dropOffDate.datepicker("setDate",k.date),this.ui.dropOffDate.datepicker("option",
{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.dropOffDate=$namespace.DateUtil.getDateAsString(k.date),this.dropOffDate={className:"return",date:k.date}):(this.model.dropOffDate="",this.dropOffDate=null);this.model.dropOffTime=null===g?null:$namespace.DateUtil.getTimeAsString(g);if(this.pickUpDate&&!1!==f&&this.dropOffDate&&!1!==g){if(d=$namespace.DateUtil.getDifferenceInDays(this.pickUpDate.date,this.dropOffDate.date),0>d||0==d&&f>=g)$namespace.Utils.showErrors({dropOffDateWidget:$namespace.MessageUtil.prefixError(this.module.TranslationMessages.CAR_SEARCH_DATE_TIME_ERROR.translatedText),
dropoffTimeWidget_button:"",dropoff_time_widget:""}),b=!1}else this.pickUpDate||!d.length&&a||($namespace.Utils.showErrors({pickUpDateWidget:$namespace.MessageUtil.prefixError(this.module.TranslationMessages.CAR_INVALID_DATE.translatedText)}),b=!1),this.dropOffDate||!e.length&&a||($namespace.Utils.showErrors({dropOffDateWidget:$namespace.MessageUtil.prefixError(this.module.TranslationMessages.CAR_INVALID_DATE.translatedText)}),b=!1);return b},_onSubmit:function(a){this.isSubmitting||this.advancePage();
a.preventDefault()},onError:function(a){console.error(a)},_onEditCarClick:function(){this.showEditMode();this.ui.careditmode.val("false");$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.scrollToTopOfPage();var a=window.location.href.match(/\bh=(\d{4})/);a=a&&1<a.length?a[1]:"";a==$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_CAR_AGENCY?$namespace.Analytics.trackEvent("rc_event_searchWidget","edit","/rc/booking/searchWidget/rentalLocations/rc_Search_Results"):a==$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_CAR_AGENCY_MATRIX?
$namespace.Analytics.trackEvent("rc_event_searchWidget","edit","/rc/booking/searchWidget/rentalLocations/rc_Low_Price_Finder"):a==$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_CAR_EQUIPMENT?$namespace.Analytics.trackEvent("rc_event_searchWidget","edit","/rc/booking/searchWidget/rentalLocations/rc_Optional_Equipment"):a==$namespace.PageHistoryConstants.HISTORY_CAR_BOOKING_RECAP?$namespace.Analytics.trackEvent("rc_event_searchWidget","edit","/rc/booking/searchWidget/rentalLocations/rc_Upgrade_Selection"):
a==$namespace.PageHistoryConstants.HISTORY_FINALIZE_CAR_BOOKING&&$namespace.Analytics.trackEvent("rc_event_searchWidget","edit","/rc/booking/searchWidget/rentalLocations/rc_Driver_Details")},_onRemoveCouponClick:function(){this.removeCoupon(!0)},resize:function(){var a=$(this.el),b=$namespace.Utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1,d=a.find('INPUT[id="pickUpDateWidget"]');a=a.find('INPUT[id="dropOffDateWidget"]');d.prop("readonly",b);a.prop("readonly",b);d[0].onselectstart=b?a[0].onselectstart=
function(){return!1}:a[0].onselectstart=null},setPickUpLocationPlaceholder:function(){"airport"==this.model.dropOffLocation.type||this.sameDropOffLocation?(this.ui.pickUpLocation.input.attr("placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_CITY_ZIP.translatedText),this.ui.pickUpLocation.input.attr("aria-placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_CITY_ZIP.translatedText),this.ui.pickUpLocation.setParser($namespace.Utils.parseLocations),$.hook("geolocation").removeClass("hidden")):
(this.ui.pickUpLocation.input.attr("placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_ONLY.translatedText),this.ui.pickUpLocation.input.attr("aria-placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_ONLY.translatedText),this.ui.pickUpLocation.setParser($namespace.Utils.parseAirport),$.hook("geolocation").addClass("hidden"))},setDropOffLocationPlaceholder:function(){""==this.model.pickUpLocation.type||"airport"==this.model.pickUpLocation.type?(this.ui.dropOffLocation.input.attr("placeholder",
this.module.TranslationMessages.PLACEHOLDER_AIRPORT_CITY_ZIP.translatedText),this.ui.dropOffLocation.input.attr("aria-placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_CITY_ZIP.translatedText),this.ui.dropOffLocation.setParser($namespace.Utils.parseLocations)):(this.ui.dropOffLocation.input.attr("placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_ONLY.translatedText),this.ui.dropOffLocation.input.attr("aria-placeholder",this.module.TranslationMessages.PLACEHOLDER_AIRPORT_ONLY.translatedText),
this.ui.dropOffLocation.setParser($namespace.Utils.parseAirport))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.View.VacationPackageSearchWidgetView=Backbone.View.extend({el:"#search_vacation_packages_view",ui:{},cache:{},geolocationCoordinates:{lat:null,lng:null,string:null},WIDGET_COOKIE_NAME:"VP_SEARCH_WIDGET_VALUES",departDate:null,returnDate:null,lastDepartureDate:null,lastReturnDate:null,model:null,module:null,events:{"change #destination":"_onDestinationChange","change #region":"_onRegionChange","change #flightItineraryCheckboxWidget":"_onIncludeFlightChange","change #serviceClassWidget":"_onServiceClassChange","change #numberOfRoomsWidget":"_onRoomsChange",
"change .single-child-select":"_onChildrenChange","change .single-adult-select":"_onAdultsChange","change .mr-adults-select":"_onMultiAdultsChange","change .mr-children-select":"_onMultiChildrenChange","change .child-age-select":"_onChildAgeChange","change .child-seat-select":"_onChildSeatChange","keydown #departureCityTextWidget":"_onDepartureCityKeyDown","click #geolocation":"_onGeoClick","submit form":"_onSubmit",'click [data-hook="vacation_package_search_submit"]':"_onSubmit"},initialize:function(a){a=
$.extend({},a);this.module=a.module;this.regions=a.regions||{};this.vp1DestinationLasVegas="";(this.cleanUpHardCodedVpDestinationsFlag=$namespace.GlobalConstants.CLEANUP_HARD_CODED_VP_DESTINATIONS_ENABLED)&&this.getVp1DestinationsLasVegas();$.hook("geolocation_wrapper").addClass("no-geolocation");this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.undelegateEvents();this.ui.form=$("#search_vacation_packages_form");
this.ui.submitButton=$.hook("vacation_package_search_submit",this.el);this.ui.form.find('SELECT[id="destination"]').val("");this.ui.form.find('SELECT[id="region"]').val("");this.ui.expansionContainer=$.hook("multiroom-expansion",this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.createModel();this.loadValuesFromModel();var b=this,d=$namespace,e=d.DateUtil;a=function(a,d){a=$(a);a=/departure/.test(a.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+
(a?"depart":"return"));b.setReturnDateCalendarDisplayMonth()};var f=function(a){var f=/departure/.test($(this).attr("id"));f=$("#"+(f?"returnDateWidget":"departureDateWidget")).datepicker("getDate");f=null===f||0!=e.getDifferenceInDays(a,f)?"":"date-highlight";var g=d.SearchWidgetsModule.getAccessibleDateLabel(a);null!=b.departureDate&&0==e.getDifferenceInDays(a,b.departureDate.date)?g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):
null!=b.returnDate&&0==e.getDifferenceInDays(a,b.returnDate.date)&&(g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));a=d.DateUtil.enhanceDateStringReadability(g);return[!0,f,g,a]},g=function(a,d){b.validateDates()},h=d.DateUtil.getDateDaysFromToday(0),k=d.DateUtil.getDateDaysFromToday(1);this.departureDate&&(k=d.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.ui.form.find("#departureDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),beforeShow:a,beforeShowDay:f,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.returnDate=this.ui.form.find("#returnDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:a,beforeShowDay:f,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,
alignRight:!0,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});a=this.ui.form.find("#departureDateWidget, #returnDateWidget");this.floatPlaceholders=[];a.each(function(a,d){b.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});a.on("blur",function(){$(this).datepicker("widget").is(":visible")||b.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),
d.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#search_vacation_packages_form div.date-widget").addClass("ctc-jqui");this.ui.destination=new $namespace.Widgets.SelectWidget(this.ui.form.find("#destination_widget"),
{taborder:"document"});this.ui.region=new $namespace.Widgets.SelectWidget(this.ui.form.find("#region_widget"),{taborder:"document"});this.ui.includeFlight=this.ui.form.find("#flightItineraryCheckboxWidget");a=$namespace.DomUtil.readCookie("Csrf-token");this.ui.departureLocation=new $namespace.Widgets.DataListWidget(this.ui.form.find("#departure_location_widget"),{url:"searchHelper.act",parser:$namespace.Utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureLocationSelect,this),
onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},noResultsText:this.module.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});
this.ui.serviceClass=new $namespace.Widgets.SelectWidget(this.ui.form.find("#service_class_widget"),{taborder:"document"});this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#number_of_rooms_widget"),{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length||this.model.rooms[0].children.length)for(a=this.model.rooms.length,f=0,g=1;f<a;f++,g++){if(h=this.ui.form.find('SELECT[id="adultsInRoomForWidget_'+g+'"]'),h.length){this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),
{taborder:"document"}));this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="childrenInRoomForWidget_'+g+'"]').parent(),{taborder:"document"}));h=this.model.rooms[f].children.length;k=0;for(var l=1;k<h;k++,l++)new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="vpChildAgeForWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"}),new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="infantSeatSelectWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"})}}else this.ui.adults.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#adults_room_1_widget"),
{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#children_room_1_widget"),{taborder:"document"}));this.ui.geolocation=$.hook("geolocation",this.el);this.delegateEvents();this.ui.form.find("#departureCityTextWidget").focus(function(){this.select()});this.ui.destination.select&&this.ui.destination.select.attr("data-skip-link","true");this.ui.includeFlight.is(":checked")||$namespace.Utils.disableFormField([this.ui.departureLocation,this.ui.serviceClass]);
this.enableOrDisableFieldsBasedOnDestination(this.model.destinationCode);$(window).on("resize orientationchange",function(){var a=d.SearchWidgetsModule.getWindowDimensions();if(b.win.height!=a.height||b.win.width!=a.width)b.ui.form.find("#departureDateWidget, #returnDateWidget").datepicker("hide"),b.win=a;b.resize()});this.resize();$namespace.TabOrder.updatePageTabOrder()},getVp1DestinationsLasVegas:function(){var a=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageSearch.act","ctvps=GET_GLOBAL_CONFIG_VP1SW_DESTINATIONS",
null,null,function(b){b=b.map(function(a){return a.replace(/\s/g,"")});a.vp1DestinationLasVegas=b.pop()},null)},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),
a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},createModel:function(){this.model={destinationCode:"",regionCode:"",departureDate:"",returnDate:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",serviceClass:"",rooms:[{index:0,number:1,adultCount:2,
children:[]}]};try{var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);(a=JSON.parse(a))&&a.destinationCode&&a.departureDate&&a.rooms&&a.rooms.length?this.model=a:$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME)}catch(d){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing VP Search Widget Cookie.")}1>this.model.rooms.length&&(this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}]);a=$namespace.DateUtil.isValidDateString(this.model.departureDate);var b=
$namespace.DateUtil.isValidDateString(this.model.returnDate);!1===a||!1===b||a.isPastDate?(this.model.departureDate=this.lastDepartureDate=this.model.returnDate=this.lastReturnDate="",this.departureDate=this.returnDate=null):(this.model.departureDate=this.lastDepartureDate=$namespace.DateUtil.getDateAsString(a.date),this.departureDate={date:a.date,className:"departure"},this.model.returnDate=this.lastReturnDate=$namespace.DateUtil.getDateAsString(b.date),this.returnDate={date:b.date,className:"return"})},
loadValuesFromModel:function(){if(this.model){this.ui.form.find('SELECT[id="destination"]').val(this.model.destinationCode);var a=this.ui.form.find('SELECT[id="region"]');a[0].options.length=0;var b=this.regions[this.model.destinationCode];if(b)for(var d=0;d<b.length;d++){var e=b[d].value==this.model.regionCode;a[0].options[d]=new Option(b[d].text,b[d].value,e,e)}this.departureDate?this.ui.form.find('INPUT[id="departureDateWidget"]').val($namespace.DateUtil.getDateAsString(this.departureDate.date,
this.localeDateFormat)):this.ui.form.find('INPUT[id="departureDateWidget"]').val("");this.returnDate?this.ui.form.find('INPUT[id="returnDateWidget"]').val($namespace.DateUtil.getDateAsString(this.returnDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="returnDateWidget"]').val("");this.ui.form.find('INPUT[id="flightItineraryCheckboxWidget"]').prop("checked",this.model.includeFlight);this.model.includeFlight?this.ui.form.find('INPUT[id="departureCityTextWidget"]').val(this.model.departureLocationName).attr("default-value",
this.model.departureLocationCode):this.ui.form.find('INPUT[id="departureCityTextWidget"]').val("").attr("default-value","");this.ui.form.find('SELECT[id="serviceClassWidget"]').val(this.model.serviceClass);a=this.model.rooms.length;this.ui.form.find('SELECT[id="numberOfRoomsWidget"]').val(a);b=[];e=[];var f=[],g=[];for(d=0;d<a;d++){var h=this.model.rooms[d];b.push(h.adultCount);e.push(h.children.length);for(var k=0;k<h.children.length;k++)f.push(h.children[k].age),g.push(h.children[k].seat)}d=$namespace.Templates.multiroom_template;
if(1==a&&0==this.model.rooms[0].children.length)this.ui.form.find('SELECT[id="adultsInRoomForWidget_1"]').val(this.model.rooms[0].adultCount).find("option[value="+this.model.rooms[0].adultCount+"]").attr("selected",!0).siblings().removeAttr("selected"),this.ui.form.find('SELECT[id="childrenInRoomForWidget_1"]').val(0).find("option[value=0]").attr("selected",!0).siblings().removeAttr("selected");else{h=0;this.ui.expansionContainer.empty();this.module.el.addClass("expand-multiroom");k=0;for(var l=1;k<
a;k++,l++){var p=$(d({index:l}));this.ui.expansionContainer.append(p);this.ui.form.find('SELECT[id="adultsInRoomForWidget_'+l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.ui.form.find('SELECT[id="childrenInRoomForWidget_'+l+'"]').val(e[k]).find("option[value="+e[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();
for(var v=parseInt(e[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+f[h],w=g[h];p.find('.child-age-select[data-room="'+l+'"][data-child="'+t+'"]').val(u).find("option[value="+u+"]").attr("selected",!0).siblings().removeAttr("selected");p.find('.child-seat-select[data-room="'+l+'"][data-child="'+t+'"]').val(w).find("option[value="+w+"]").attr("selected",!0).siblings().removeAttr("selected");0>u||1<u||!this.model.includeFlight?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+
t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#destination_widget");a.push("#region_widget");a.push("#departureDateWidget");a.push("#returnDateWidget");a.push("#vacationPackageWidgetDates");a.push("#departureCityTextWidget");a.push("#adults_room_1_widget");a.push("#children_room_1_widget");a.push("#adults_room_2_widget");a.push("#children_room_2_widget");
for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=this.ui.form.find('SELECT.child-age-select[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}}$namespace.Utils.clearErrors(a,this.ui.form)},validate:function(){var a=!0,b=this.module.TranslationMessages;this.clearErrors();if(""==this.model.destinationCode||this.model.destinationCode!=this.ui.destination.val()){var d=b.VP_DESTINATION_REQUIRED;$namespace.Utils.showErrors({destination_widget:$namespace.MessageUtil.prefixError(d.translatedText)});
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText));$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Destination not selected"});a=!1}else this.isDestinationOnly(this.model.destinationCode)||this.isNoRegionDestination(this.model.destinationCode)||""!=this.model.regionCode&&this.model.regionCode==this.ui.region.val()||(d=b.VP_REGION_REQUIRED,$namespace.Utils.showErrors({region_widget:$namespace.MessageUtil.prefixError(d.translatedText)}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Region not selected"}),a=!1);this.validateDates(!1)||(a=!1);this.model.includeFlight?(""!=this.model.departureLocationCode&&this.ui.departureLocation.hasValidSelection()||(d=b.VP_INVALID_AIRPORT,$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText)}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"flight departure airport missing"}),a=!1),this.validateAirfarePassengerCount()||(a=!1)):this.validateWithoutAirfarePassengerCount()||(a=!1);d=0;for(var e=1;d<this.model.rooms.length;d++,e++)this.ui.form.find('SELECT.child-age-select[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e=
{},h=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(h.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(h.sourceText));$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Child age not selected"});a=!1}});a||$namespace.Utils.focusFirstErrorField(this.ui.form);return a},validateAirfarePassengerCount:function(){var a=
this.getTotalPassengerCount(),b=this.module.TranslationMessages;this.clearErrors("#passengers_per_room_div_1 #passengers_per_room_div_2 #adults_room_1_widget #children_room_1_widget #adults_room_2_widget #children_room_2_widget".split(" "));if(9<a){a=b.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR;b={passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),adults_room_1_widget:"",children_room_1_widget:""};for(var d=1,e=2;d<this.model.rooms.length;d++,e++)b["passengers_per_room_div_"+
e]=$namespace.MessageUtil.prefixError(a.translatedText),b["adults_room_"+e+"_widget"]="",b["children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){var a=this.getTotalPassengerCount(),b=this.module.TranslationMessages;this.clearErrors("#passengers_per_room_div_1 #passengers_per_room_div_2 #adults_room_1_widget #children_room_1_widget #adults_room_2_widget #children_room_2_widget".split(" "));
if(10<a){a=b.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR;b={passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),adults_room_1_widget:"",children_room_1_widget:""};for(var d=1,e=2;d<this.model.rooms.length;d++,e++)b["passengers_per_room_div_"+e]=$namespace.MessageUtil.prefixError(a.translatedText),b["adults_room_"+e+"_widget"]="",b["children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));
return!1}return!0},validateDates:function(a){var b=!0,d=this.module.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#departureDateWidget","#returnDateWidget","#vacationPackageWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),
this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&($namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Departure_Date",this.model.departureDate):$namespace.Analytics.trackEvent("vp_event_searchWidget","Depart",this.model.departureDate)),this.lastDepartureDate=this.model.departureDate,
$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),
this.returnDate={className:"return",date:h.date},this.lastReturnDate!=this.model.returnDate&&($namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Return_Date",this.model.returnDate):$namespace.Analytics.trackEvent("vp_event_searchWidget","Return",this.model.returnDate)),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(e=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,
this.returnDate.date),1>e?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({vacationPackageWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),departureDateWidget:"",returnDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<e&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({vacationPackageWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),departureDateWidget:"",returnDateWidget:""}),
a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):(this.departureDate||!e.length&&a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({departureDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),e.length?$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",
v13:"Invalid departure date"}):$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Departure date missing"})),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({returnDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),f.length?$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",
v12:"search",v13:"Invalid return date"}):$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Return date missing"})),b=!1));return b},resize:function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1,b=this.ui.form.find('INPUT[id="departureDateWidget"]'),d=this.ui.form.find('INPUT[id="returnDateWidget"]');b.prop("readonly",a);d.prop("readonly",a);b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null},getTotalPassengerCount:function(){for(var a=
0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;return a},isDestinationOnly:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_FIELDS||[]).indexOf(a)},isNoRegionDestination:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_REGIONS||[]).indexOf(a)},setRoomLayout:function(a){var b=this.model.rooms,d=$namespace.Templates.multiroom_template;if(1===b.length&&0==b[0].children.length)this.module.el.hasClass("expand-multiroom")&&
(this.module.el.removeClass("expand-multiroom"),this.ui.expansionContainer.html(this.ui.expansionHTML)),this.ui.form.find('.single-adult-select[data-room="1"]').val(b[0].adultCount),this.ui.form.find('.single-child-select[data-room="1"]').val(b[0].children.length);else{this.module.el.addClass("expand-multiroom");this.ui.expansionContainer.empty();for(var e=0;e<b.length;e++){var f=b[e],g=$(d({index:f.number}));this.ui.expansionContainer.append(g);g.find('.mr-adults-select[data-room="'+f.number+'"]').val(f.adultCount).find("option[value="+
f.adultCount+"]").attr("selected",!0).siblings().removeAttr("selected");g.find('.mr-children-select[data-room="'+f.number+'"]').val(f.children.length).find("option[value="+f.children.length+"]").attr("selected",!0).siblings().removeAttr("selected");this.setRoomChildLayout(f)}}a&&1===b.length&&setTimeout(function(){$("#children_room_1_widget button").focus()},1);this.initFormItems()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.multichild_template,e=$.hook("child_expansion_"+
a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.child-age-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.child-seat-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);0>g.age||1<g.age||!this.ui.includeFlight.is(":checked")?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').hide():h.find('.col-child-seat[data-room="'+
a.number+'"][data-child="'+g.number+'"]').show()}}this.initFormItems()}}},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,
b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,
d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},enableOrDisableFieldsBasedOnDestination:function(a){this.clearErrors();""==a||this.isNoRegionDestination(a)?$namespace.Utils.disableFormField(this.ui.region):this.isDestinationOnly(a)?$namespace.Utils.disableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation]):$namespace.Utils.enableFormField([this.ui.region,
this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation])},geoSuccess:function(a){if("string"===typeof a){var b=a.split(",");this.geolocationCoordinates.string=a;this.geolocationCoordinates.lat=b[0];this.geolocationCoordinates.lng=b[1]}else this.geolocationCoordinates.lat=a.coords.latitude,this.geolocationCoordinates.lng=a.coords.longitude,this.geolocationCoordinates.string=a.coords.latitude+","+a.coords.longitude;this.ui.departureLocation.val("("+
$namespace.Config.CURRENT_LOCATION+")")},geoError:function(a){a=$namespace.Utils.getTemplate("confirm_geolocation_error");var b=new $namespace.Widgets.Confirm(a,function(){b.hide()},function(){b.hide()});b.show()},_isDestinationBookable:function(a){return/escortedVacations|houseboatVacations|lasVegasAndDesert|lionWorldTravel|luxuryVillaRentals|themeParks/i.test(a)?!1:!0},_isRegionRequired:function(a){return $namespace.Utils.regexDestinationCode(a)?!0:!1},_onDestinationChange:function(a){a=$(a.currentTarget).val();
if(this.model.destinationCode!=a){this.clearErrors(["#destination_widget","#region_widget"]);this.model.destinationCode=a;this.model.regionCode="";this.ui.region.val("",1);this.enableOrDisableFieldsBasedOnDestination(a);if(""==a)$namespace.Utils.disableFormField(this.ui.region);else if(this._isDestinationBookable(a)){$namespace.Utils.regexDestinationCode(a)?this._loadCitiesOfSelectedDestination(a):$namespace.Utils.disableFormField(this.ui.region);var b=[this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,
this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms];$namespace.Utils.enableFormField(b);this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label, #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #children_room_1_widget, #adultsInRoomForWidget_1_label, #childrenInRoomForWidget_1_label").removeClass("disabled");this.ui.includeFlight.prop("checked","checked");this.model.includeFlight=!0;this._loadServiceClassesByDestinationCode(a)}else/THEMEPARKS|LIONWORLDTRAVEL|ESCORTEDVACATIONS/i.test(a)&&
(this.ui.numberOfRooms.val("1"),this.updateRoomCount(1),this.updateRoomChildren(this.model.rooms[0],0),this.setRoomLayout(),this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label,  #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #adultsInRoomForWidget_1_label, #children_room_1_widget, #childrenInRoomForWidget_1_label").addClass("disabled"),b=[this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,
this.ui.numberOfRooms],$namespace.Utils.disableFormField(b));""!=a?$namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Destination",a):$namespace.Analytics.trackEvent("vp_event_searchWidget","Destination",a):$namespace.Analytics.trackEvent("vp_event_searchWidget","Destination","Select a destination")}},_onDepartureLocationSelect:function(a,b){this.model.departureLocationCode=a.value;this.model.departureLocationName=$.trim(a.title);$namespace.PackageSearchResultsModule.packageSearched?
$namespace.Analytics.trackEvent("Search_Results_Edit","Departure_City",a.value):$namespace.Analytics.trackEvent("vp_event_searchWidget","Departure_City",a.value)},_onRegionChange:function(a){this.clearErrors(["#region_widget"]);this.model.regionCode=$(a.currentTarget).val();this.model.regionCode&&this.model.regionCode.length&&($namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Region",this.model.regionCode):$namespace.Analytics.trackEvent("vp_event_searchWidget",
"Region",this.model.destinationCode+"/"+this.model.regionCode))},_onDepartureDateChange:function(a,b,d){this.validateDates();this.departureDate&&(a=[this.departureDate],this.returnDate&&a.push(this.returnDate),this.ui.departureDate.selectDays(a,!0),this.ui.returnDate.selectDays(a))},_onReturnDateChange:function(a,b,d){this.validateDates();this.returnDate&&(a=[this.returnDate],this.departureDate&&a.unshift(this.departureDate),this.ui.departureDate.selectDays(a),this.ui.returnDate.selectDays(a,!0))},
_onDepartureCityKeyDown:function(a){this.clearError("#departureCityTextWidget");$(a.target).parent().removeClass("location-airport")},_onDepartureCityBlur:function(a){this.clearError("#departureCityTextWidget");a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=this.module.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(a)})):
this.ui.departureLocation.hasValidSelection()||$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText)})}},_onIncludeFlightChange:function(a){a=$(a.currentTarget).is(":checked");var b=[this.ui.departureLocation,this.ui.geolocation,this.ui.serviceClass];(this.model.includeFlight=a)?($namespace.Utils.enableFormField(b),$("#departureDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#returnDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):
(this.clearError("#departureCityTextWidget"),$namespace.Utils.disableFormField(b),$("#departureDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),$("#returnDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("vp_event_searchWidget","Flight",a?"Yes":"No");a?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},
_onServiceClassChange:function(a){a=$(a.currentTarget).val();this.model.serviceClass=a;$namespace.Analytics.trackEvent("vp_event_searchWidget","Class",a)},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("vp_event_searchWidget","Travelers","Rooms",a);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onChildrenChange:function(a){a=
+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Children","Children",a);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].adultCount=a;$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Adults","Adults",a);this.model.includeFlight?
this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Children","Children",a);this.model.includeFlight?this.validateAirfarePassengerCount():
this.validateWithoutAirfarePassengerCount()},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Adults","Adults",a);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,
a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder();-1<a&&2>a&&this.ui.includeFlight.is(":checked")?$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_LapChildren",
"Lap Children",a):$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Children","Children",a)},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},_onGeoClick:function(a){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition($.proxy(this.geoSuccess,this),$.proxy(this.geoError,this),{timeOut:3E4,maximumAge:6E5});a.preventDefault()},_onSubmit:function(a){this.model.includeFlight=
this.ui.includeFlight.is(":checked");if(/THEMEPARKS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Theme-Parks");else if(/LIONWORLDTRAVEL/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Experiences/Lion-World-Travel");else if(/ESCORTEDVACATIONS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Experiences/Guided-Vacations");else if(this.validate()){for(var b=this.model.rooms,d=0,e=[],f=[],g=[],h=[],k=0,l=0,p=0,q=0,r=0,v=0;v<b.length;v++){var n=
b[v].adultCount,t=b[v].children.length;d+=b[v].adultCount+b[v].children.length;e.push(b[v].adultCount);q+=n;r+=t;f.push(b[v].children.length);k+=b[v].adultCount;l+=b[v].children.length;for(n=0;n<b[v].children.length;n++)g.push(b[v].children[n].age),h.push(b[v].children[n].seat),1>=b[v].children[n].age&&p++}n=!1;for(v=0;v<$namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED.length;v++)if($namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED[v].toLowerCase()==this.model.destinationCode.toLowerCase()){n=
!0;break}var u=this.ui.destination.select[0],w=this.ui.region.select[0];v="";t=u.options[u.selectedIndex].text;b="_"+this.model.departureDate+"_"+this.model.returnDate;q="_"+this.model.rooms.length+"_"+q+"_"+r;this.cleanUpHardCodedVpDestinationsFlag||"lasVegas"!=this.model.destinationCode?this.cleanUpHardCodedVpDestinationsFlag&&this.model.destinationCode.toLowerCase()==this.vp1DestinationLasVegas?(this.model.regionCode=this.vp1DestinationLasVegas.substring(0,3).toUpperCase(),v=$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(0,
3))+" "+$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(3,9))):w.options.length&&(r=-1<w.selectedIndex?w.options[w.selectedIndex]:w.options[0],r.value==this.model.regionCode&&(v=r.text)):(this.model.regionCode="LAS",v="Las Vegas");d={cityCode:this.model.regionCode,cityName:v,destination:this.model.destinationCode,destinationName:u.options[u.selectedIndex].text,departureDate:this.model.departureDate,arrivalDate:this.model.returnDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,
this.returnDate.date),flightChecked:this.model.includeFlight,numberOfPassengers:d,hotelRooms:this.model.rooms.length,adults:e.join(","),children:f.join(","),childrenAges:g.join(","),childSeatFlags:h.join(","),serviceClass:this.model.serviceClass,multiCityPackagesRequested:n};e=t;v&&""!=v&&(e+="-"+v);e+=b;this.model.includeFlight?(d.departureCityCode=this.model.departureLocationCode,d.departureCity=this.model.departureLocationName,e+="_"+this.model.departureLocationCode):e+="_no-flight";e+=q;$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED?
d.ctvps="SEARCH_VACATION_PACKAGES":d.fsr="LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";this.model.includeFlight&&(d.departureCityCode=this.model.departureLocationCode,d.departureCity=this.model.departureLocationName);$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(this.model),0);$namespace.Analytics.trackEvent("vp_event_searchDetails","Click",e.replace(/%2C/g,",").replace(/%20/g," "));$namespace.Analytics.track({vendor:"adobe",type:"event",events:"event7,event30="+d.hotelRooms+
",event32="+d.numberOfPassengers+",event33="+k+",event34="+l+",event35="+d.numberOfNights+",event36="+$namespace.DateUtil.getDifferenceInDays(new Date,this.departureDate.date)+",event37="+p,v34:d.destination,v35:d.cityCode,v37:d.departureDate,v38:d.numberOfNights,v39:$namespace.DateUtil.getDifferenceInDays(new Date,this.departureDate.date),v40:k,v41:0==l?"0":l,v44:d.hotelRooms,v60:d.flightChecked?"Yes":"No",v61:d.multiCityPackagesRequested?"Yes":"No"});d.uid=$namespace.Utils.getUID();this.submitForm(d)}a.preventDefault()},
_loadCitiesOfSelectedDestination:function(a){this.model.regionCode="";if(a=this.regions[a]){var b=a.slice(0);1<a.length&&b[0].text!=this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION?b.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""}):1==a.length&&(this.model.regionCode=a[0].value,this.ui.region.select.val(this.model.regionCode));this.ui.region.replaceOptions(b)}},_loadServiceClassesByDestinationCode:function(a){var b=this;a="sw=LOAD_SERVICE_CLASSES_BY_DESTINATION&destination="+
a+("&serviceClass="+this.ui.serviceClass.val());$namespace.AjaxUtil.makeAjaxCall("searchWidget.act",a,null,"serviceClassWidget",function(a){a=JSON.parse(a);/^any$/i.test(a[0].value)||a.unshift({text:b.module.TranslationTexts.PLACEHOLDER_ANY_OPTION,value:"Any"});b.ui.serviceClass.replaceOptions(a)},"")},submitForm:function(a){var b=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.Storage.set("vacation-packages-search-form",a);$namespace.DomUtil.setElementLoadingMask(!0);
this.isSubmitting=!0;if(this._isDestinationBookable(a.destination)){var d=this._isRegionRequired(a.destination);var e=b?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";d?e+="&cityCode="+a.cityCode:this.cleanUpHardCodedVpDestinationsFlag||"lasVegas"!=a.destination?this.cleanUpHardCodedVpDestinationsFlag&&this.model.destinationCode.toLowerCase()==this.vp1DestinationLasVegas&&(e+="&cityCode="+this.vp1DestinationLasVegas.substring(0,3).toUpperCase()):e+="&cityCode=LAS";
e+="&destination="+a.destination;e+="&flightChecked="+a.flightChecked;e+="&arrivalDate="+a.arrivalDate;e+="&departureDate="+a.departureDate;e+="&numberOfNights="+a.numberOfNights;e+="&numberOfPassengers="+a.numberOfPassengers;e+="&hotelRooms="+a.hotelRooms;e+="&adults="+a.adults;e+="&children="+a.children;e+="&childrenAges="+a.childrenAges;e+="&childSeatFlags="+a.childSeatFlags;e=e+"&fromWidget=true&fromMenu=false&serviceClass="+a.serviceClass;e+="&multiCityPackagesRequested="+a.multiCityPackagesRequested;
e+="&suppressOutput=true";a.flightChecked&&(e+="&departureCity="+a.departureCity,e+="&departureCityCode="+a.departureCityCode);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(b?"vacationPackageSearch.act":"vacationPackageFilteredSearchResults.act",e,null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h=1001")},null,"")}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY;
$namespace.View.VacationPackage2SearchWidgetView=Backbone.View.extend({el:"#search_vacation_packages_2_view",ui:{},cache:{},geolocationCoordinates:{lat:null,lng:null,string:null},WIDGET_COOKIE_NAME:"VP2_SEARCH_WIDGET_VALUES",HOTEL_OFFER_PAGE_WIDGET_COOKIE_NAME:"HOTEL_SEARCH_WIDGET_VALUES",departDate:null,returnDate:null,lastDepartureDate:null,lastReturnDate:null,model:null,module:null,events:{"blur #hotel_package_destination":"_onLocationBlur","change #vacation_package_destination":"_onDestinationChange",
"change #flightItineraryCheckboxWidget":"_onIncludeFlightChange","change #region":"_onRegionChange","change #serviceClassWidget":"_onServiceClassChange","change .numberOfRoomsWidget":"_onRoomsChange","change .single-child-select":"_onChildrenChange","change .single-adult-select":"_onAdultsChange","change .mr-adults-select":"_onMultiAdultsChange","change .mr-children-select":"_onMultiChildrenChange","change .child-age-select":"_onChildAgeChange","change .child-seat-select":"_onChildSeatChange","keydown #departureCityTextWidget":"_onDepartureCityKeyDown",
"click #geolocation":"_onGeoClick",'click [data-hook="package-sub-vp"]':"_onClickSubVptab",'click [data-hook="package-sub-hp"]':"_onClickSubHptab",'click [data-hook="package-sub-hfcp"]':"_onClickSubHfcTab","submit form":"_onSubmit",'click [data-hook="vacation_package_2_search_submit"]':"_onSubmit","change #hfcDriversAgeWidget":"_onHFCAgeChange"},initialize:function(a){a=$.extend({},a);this.initialized=!1;this.module=a.module;this.regions=a.regions||{};this.vp1Destinations=[];this.vp1DestinationLasVegas=
"";(this.cleanUpHardCodedVpDestinationsFlag=$namespace.GlobalConstants.CLEANUP_HARD_CODED_VP_DESTINATIONS_ENABLED)&&this.getVp1DestinationsFromGlobal();$.hook("geolocation_wrapper").addClass("no-geolocation");this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.undelegateEvents();this.ui.form=$("#search_vacation_packages_2_form");this.ui.submitButton=$.hook("vacation_package_2_search_submit",this.el);this.ui.form.find('SELECT[id="vacation_package_destination"]').val("");
this.ui.form.find('SELECT[id="region"]').val("");this.ui.form.find('SELECT[id="hotel_package_destination"]').val("");this.ui.expansionContainer=$.hook("multiroom-expansion",this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.createModel();this.loadValuesFromModel();this.subClicked=!1;var b=this,d=$namespace,e=d.DateUtil;a=$namespace.Config.hotelUtilApiKey;var f=function(a,d){a=$(a);a=/departure/.test(a.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+
(a?"depart":"return"));b.setReturnDateCalendarDisplayMonth()},g=function(a){var f=/departure/.test($(this).attr("id"));f=$("#"+(f?"returnDateWidget":"departureDateWidget")).datepicker("getDate");f=null===f||0!=e.getDifferenceInDays(a,f)?"":"date-highlight";var g=d.SearchWidgetsModule.getAccessibleDateLabel(a);null!=b.departureDate&&0==e.getDifferenceInDays(a,b.departureDate.date)?g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=
b.returnDate&&0==e.getDifferenceInDays(a,b.returnDate.date)&&(g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));a=d.DateUtil.enhanceDateStringReadability(g);return[!0,f,g,a]},h=function(a,d){b.validateDates()},k=d.DateUtil.getDateDaysFromToday(0),l=d.DateUtil.getDateDaysFromToday(1);this.departureDate&&(l=d.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.ui.form.find("#departureDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),beforeShow:f,beforeShowDay:g,inline:!0,minDate:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.returnDate=this.ui.form.find("#returnDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:f,beforeShowDay:g,minDate:l,minDateDefault:l,defaultDate:l,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,
alignRight:!0,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});f=this.ui.form.find("#departureDateWidget, #returnDateWidget");this.floatPlaceholders=[];f.each(function(a,d){b.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});g=this.ui.form.find("#departureCityTextWidget");this.floatPlaceholders.push(new $namespace.FloatPlaceholder(g,!0));f.on("blur",function(){$(this).datepicker("widget").is(":visible")||
b.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),d.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});
$("#search_vacation_packages_2_form div.date-widget").addClass("ctc-jqui");this.ui.includeFlight=this.ui.form.find("#flightItineraryCheckboxWidget");this.ui.hotelpackagedestination=new $namespace.Widgets.DataListWidget(this.ui.form.find("#hotel_package_destination_widget"),{url:$namespace.GlobalConstants.API_CONNECT_URL+"/api/hotels/dynamicLocations",headers:{apiKey:a,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:utils.parseDynamicLocations,noResultsText:this.module.TranslationTexts.NO_LOCATIONS_ERROR_MESSAGE,
showImages:!0,onSelect:$.proxy(this._onLocationSelect,this),onLocationBlur:$.proxy(this._onLocationBlur,this),taborder:"document"});this.ui.vacationpackagedestination=new $namespace.Widgets.SelectWidget(this.ui.form.find("#vacation_package_destination_widget"),{taborder:"document"});this.ui.region=new $namespace.Widgets.SelectWidget(this.ui.form.find("#region_widget"),{taborder:"document"});a=$namespace.DomUtil.readCookie("Csrf-token");this.ui.departureLocation=new $namespace.Widgets.DataListWidget(this.ui.form.find("#departure_location_widget"),
{url:"searchHelper.act",parser:$namespace.Utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureLocationSelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},noResultsText:this.module.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,
headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});this.ui.serviceClass=new $namespace.Widgets.SelectWidget(this.ui.form.find("#service_class_widget"),{taborder:"document"});this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#number_of_rooms_widget"),{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length||this.model.rooms[0].children.length)for(a=this.model.rooms.length,f=0,g=1;f<a;f++,g++){if(h=this.ui.form.find('SELECT[id="adultsInRoomForWidget_'+
g+'"]'),h.length)for(this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="childrenInRoomForWidget_'+g+'"]').parent(),{taborder:"document"})),h=this.model.rooms[f].children.length,k=0,l=1;k<h;k++,l++)new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="vpChildAgeForWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"}),new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="infantSeatSelectWidget_'+
g+"_"+l+'"]').parent(),{taborder:"document"})}else this.ui.adults.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#adults_room_1_widget"),{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#children_room_1_widget"),{taborder:"document"}));this.ui.geolocation=$.hook("geolocation",this.el);this.delegateEvents();this.ui.form.find("#departureCityTextWidget").focus(function(){this.select()});this.ui.includeFlight.is(":checked")||$namespace.Utils.disableFormField([this.ui.departureLocation,
this.ui.serviceClass]);this.enableOrDisableFieldsBasedOnDestination(this.model.destinationCode);$(window).on("resize orientationchange",function(){var a=d.SearchWidgetsModule.getWindowDimensions();if(b.win.height!=a.height||b.win.width!=a.width)b.ui.form.find("#departureDateWidget, #returnDateWidget").datepicker("hide"),b.win=a;b.resize()});this.resize();$namespace.TabOrder.updatePageTabOrder();this.initialized=!0},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();
this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",
{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},_onHFCAgeChange:function(a){$(a.currentTarget).is(":checked")?(a=!0,$("#hfcDriversAgeWidget-error").remove()):a=!1;$('INPUT[id="hfcDriversAgeWidget"]').prop("checked",a);a||(a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(a){a=window.event||a;a.target||(a.target=a.srcElement);var b=a.target.innerText;"View Hotel + Flight Deals"===
b?($namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Continue","25yearcertification"),$('[data-hook="package-sub-hp"]').click()):"Cancel"===b?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Close","25yearcertification"):"close-top-btn"===a.target.parentElement.id&&$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Close","25yearcertification")})).show()}}(this.module),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchWidget.act",
"sw=LOAD_DRIVER_AGE_RESTRICTION_POPUP",null,null,a,null))},createModel:function(){this.model={destinationType:"",destinationCode:"",hpDestinationCode:"",regionCode:"",cityCode:"",latitude:"",longitude:"",locationName:"",city:"",country:"",departureDate:"",returnDate:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",serviceClass:"",isVpSub:"true",isHfcSub:"false",prevDesType:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};try{if(1==$("#hotelOnlySearchResults").data("hotel-type")){var a=
$namespace.DomUtil.readCookie(this.HOTEL_OFFER_PAGE_WIDGET_COOKIE_NAME);a=JSON.parse(a);this.model.locationName=a.locationName.replace(/%2C/g,",").replace(/%20/g," ");this.model.latitude=a.latitude;this.model.longitude=a.longitude;this.model.departureLocationCode=a.cityCode;this.model.departureDate=a.checkInDate;this.model.returnDate=a.checkOutDate;this.model.includeFlight=!1;for(var b=0;b<a.rooms.length;b++){var d={index:0,number:1,adultCount:2,children:[]};d.index=a.rooms[b].numberOfChildren;d.number=
a.rooms[b].roomNumber;d.adultCount=a.rooms[b].numberOfAdults;for(var e=0;e<a.rooms[b].childrenAges.length;e++){var f={index:0,number:1,age:-1,seat:0};f.age=a.rooms[b].childrenAges[e];f.index=e;d.children.push(f)}this.model.rooms[b]=d}}else a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME),(a=JSON.parse(a))&&a.departureDate&&a.rooms&&a.rooms.length&&(a.cityCode||a.locationName)?this.model=a:a&&a.destinationCode&&a.departureDate&&a.rooms&&a.rooms.length?this.model=a:$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME)}catch(g){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing VP2 Search Widget Cookie.")}1>
this.model.rooms.length&&(this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}]);a=$namespace.DateUtil.isValidDateString(this.model.departureDate);b=$namespace.DateUtil.isValidDateString(this.model.returnDate);!1===a||!1===b||a.isPastDate?(this.model.departureDate=this.lastDepartureDate=this.model.returnDate=this.lastReturnDate="",this.departureDate=this.returnDate=null):(this.model.departureDate=this.lastDepartureDate=$namespace.DateUtil.getDateAsString(a.date),this.departureDate={date:a.date,
className:"departure"},this.model.returnDate=this.lastReturnDate=$namespace.DateUtil.getDateAsString(b.date),this.returnDate={date:b.date,className:"return"})},loadValuesFromModel:function(){this.fromvp2EnabledFlag=$('INPUT[id="vp2ActiveFlag"]').val();this.hotelFlightCarTabEnable=$('INPUT[id="hotelFlightCarEnableFlag"]').val();var a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_VALUE_TRAVELLER_INFO_PAGE_POP_UP);$.hook("package-sub-hfcp").hasClass("active");var b=window.navigator.userAgent,
d=!!b.match(/iPad/i)||!!b.match(/iPhone/i),e=!!b.match(/WebKit/i);d&&e&&!b.match(/CriOS/i)&&(this.fromvp2EnabledFlag="false");if(this.model){""==this.model.isVpSub||"true"==this.model.isVpSub&&"false"==this.fromvp2EnabledFlag||"true"==this.model.isVpSub&&"false"==!this.fromvp2EnabledFlag?this._onClickSubVptab(void 0,!0):"true"!=this.model.isHfcSub||void 0!=a&&null!=a&&""!=a?($namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_VALUE_TRAVELLER_INFO_PAGE_POP_UP),this._onClickSubHptab(void 0,
!0)):this._onClickSubHfcTab(void 0,!0);this.model.locationName=this.model.locationName.replace(/<comma>/gi,",");this.model.city=this.model.city.replace(/<comma>/gi,",");this.ui.form.find('INPUT[id="hotel_package_destination"]').val(this.model.locationName);this.ui.form.find('SELECT[id="vacation_package_destination"]').val(this.model.destinationCode);a=this.ui.form.find('SELECT[id="region"]');a[0].options.length=0;if(b=this.regions[this.model.destinationCode]){b.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,
value:""});for(var f=0;f<b.length;f++)d=b[f].value==this.model.regionCode,a[0].options[f]=new Option(b[f].text,b[f].value,d,d)}this.departureDate?this.ui.form.find('INPUT[id="departureDateWidget"]').val($namespace.DateUtil.getDateAsString(this.departureDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="departureDateWidget"]').val("");this.returnDate?this.ui.form.find('INPUT[id="returnDateWidget"]').val($namespace.DateUtil.getDateAsString(this.returnDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="returnDateWidget"]').val("");
this.ui.form.find('INPUT[id="flightItineraryCheckboxWidget"]').prop("checked",this.model.includeFlight);this.model.includeFlight?this.ui.form.find('INPUT[id="departureCityTextWidget"]').val(this.model.departureLocationName).attr("default-value",this.model.departureLocationCode):this.ui.form.find('INPUT[id="departureCityTextWidget"]').val("").attr("default-value","");this.ui.form.find('SELECT[id="serviceClassWidget"]').val(this.model.serviceClass);a=this.model.rooms.length;this.ui.form.find('SELECT[class="numberOfRoomsWidget"]').val(a);
b=[];d=[];e=[];var g=[];for(f=0;f<a;f++){var h=this.model.rooms[f];b.push(h.adultCount);d.push(h.children.length);for(var k=0;k<h.children.length;k++)e.push(h.children[k].age),g.push(h.children[k].seat)}f=$namespace.Templates.multiroom_template;if(1==a&&0==this.model.rooms[0].children.length)this.ui.form.find('SELECT[id="adultsInRoomForWidget_1"]').val(this.model.rooms[0].adultCount).find("option[value="+this.model.rooms[0].adultCount+"]").attr("selected",!0).siblings().removeAttr("selected"),this.ui.form.find('SELECT[id="childrenInRoomForWidget_1"]').val(0).find("option[value=0]").attr("selected",
!0).siblings().removeAttr("selected");else{h=0;this.ui.expansionContainer.empty();this.module.el.addClass("expand-multiroom");k=0;for(var l=1;k<a;k++,l++){var p=$(f({index:l}));this.ui.expansionContainer.append(p);this.ui.form.find('SELECT[id="adultsInRoomForWidget_'+l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.ui.form.find('SELECT[id="childrenInRoomForWidget_'+l+'"]').val(d[k]).find("option[value="+d[k]+"]").attr("selected",!0).siblings().removeAttr("selected");
var q=$namespace.Templates.multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();for(var v=parseInt(d[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+e[h],w=g[h];p.find('.child-age-select[data-room="'+l+'"][data-child="'+t+'"]').val(u).find("option[value="+u+"]").attr("selected",!0).siblings().removeAttr("selected");p.find('.child-seat-select[data-room="'+l+'"][data-child="'+t+'"]').val(w).find("option[value="+w+"]").attr("selected",
!0).siblings().removeAttr("selected");0>u||1<u||!this.model.includeFlight?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#vacation_package_destination_widget");a.push("#hotel_package_destination");a.push("#region_widget");a.push("#departureDateWidget");a.push("#returnDateWidget");
a.push("#vacationPackageWidgetDates");a.push("#departureCityTextWidget");a.push("#hfcDriversAgeWidget");for(var b=0,d=1;b<this.model.rooms.length;b++,d++){a.push("#passengers_per_room_div_"+d);a.push("#adults_room_"+d+"_widget");a.push("#children_room_"+d+"_widget");for(var e=this.ui.form.find('SELECT.child-age-select[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}}}$namespace.Utils.clearErrors(a,this.ui.form)},
clearErrorsAndValue:function(){var a=[];arguments.length?a=arguments[0]:(a.push("#vacation_package_destination_widget"),a.push("#hotel_package_destination"),a.push("#region_widget"),a.push("#departureDateWidget"),a.push("#returnDateWidget"),a.push("#vacationPackageWidgetDates"),a.push("#departureCityTextWidget"),a.push("#hfcDriversAgeWidget"));$namespace.Utils.clearErrors(a,this.ui.form)},validate:function(){var a=!0,b=this.module.TranslationMessages,d=this.module.TranslationTexts;this.clearErrors();
if($("#vacation_package_destination_section").is(":visible"))d=b.VP_DESTINATION_REQUIRED,""==this.model.destinationCode||this.model.destinationCode!=this.ui.vacationpackagedestination.val()?($namespace.Utils.showErrors({vacation_package_destination_widget:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",
v13:"Destination not selected"}),a=!1):this.isDestinationOnly(this.model.destinationCode)||this.isNoRegionDestination(this.model.destinationCode)||""!=this.model.regionCode&&this.model.regionCode==this.ui.region.val()||($namespace.Utils.showErrors({region_widget:$namespace.MessageUtil.prefixError(b.VP_REGION_REQUIRED.translatedText)}),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Region not selected"}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),
a=!1),this.model.includeFlight||this.validateWithoutAirfarePassengerCount()||(a=!1);else{var e={};""==this.model.locationName?(e["#hotel_package_destination"]=$namespace.MessageUtil.prefixError(b.VP_DESTINATION_REQUIRED.translatedText),$namespace.Utils.showErrors(e),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.VP_DESTINATION_REQUIRED.sourceText)),a=!1):3>this.ui.hotelpackagedestination.input.val().length?(e["#hotel_package_destination"]=
$namespace.MessageUtil.prefixError(d.HOBE_SEARCH_MIN_LENGTH),$namespace.Utils.showErrors(e),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.HOBE_SEARCH_MIN_LENGTH)),a=!1):this.ui.hotelpackagedestination.hasValidSelection()||(e["#hotel_package_destination"]=$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText),$namespace.Utils.showErrors(e),a=!1);this.model.includeFlight||"destination"!=this.model.destinationType||this.validateWithoutAirfarePassengerCount()||
(a=!1)}this.validateDates(!1)||(a=!1);this.model.includeFlight&&(""!=this.model.departureLocationCode&&this.ui.departureLocation.hasValidSelection()||(d=b.VP_INVALID_AIRPORT,$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"flight departure airport missing"}),
a=!1),this.validateAirfarePassengerCount()||(a=!1));d=0;for(e=1;d<this.model.rooms.length;d++,e++)this.ui.form.find('SELECT.child-age-select[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},h=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(h.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(h.sourceText));$namespace.Analytics.track({vendor:"adobe",
type:"ev",events:"13",v12:"search",v13:"Child age not selected"});a=!1}});$.hook("package-sub-hfcp").hasClass("active")&&!$('INPUT[id="hfcDriversAgeWidget"]').prop("checked")&&($namespace.Utils.showErrors({hfcDriversAgeWidget:$namespace.MessageUtil.prefixError(b.DRIVER_AGE_CHECKBOX_REQUIRED.translatedText)}),a=!1);a||$namespace.Utils.focusFirstErrorField(this.ui.form);return a},validateAirfarePassengerCount:function(){for(var a=this.getTotalPassengerCount(),b=this.module.TranslationMessages,d=1;d<
this.model.rooms.length+1;d++)this.clearErrors(["#passengers_per_room_div_"+d,"#adults_room_"+d+"_widget","#children_room_"+d+"_widget"]);if(9<a){a=b.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR;b={passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),adults_room_1_widget:"",children_room_1_widget:""};d=1;for(var e=2;d<this.model.rooms.length;d++,e++)b["passengers_per_room_div_"+e]=$namespace.MessageUtil.prefixError(a.translatedText),b["adults_room_"+e+"_widget"]="",b["children_room_"+
e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){for(var a=this.getTotalPassengerCount(),b=this.module.TranslationMessages,d=1;d<this.model.rooms.length+1;d++)this.clearErrors(["#passengers_per_room_div_"+d,"#passengers_per_room_div_"+d,"#adults_room_"+d+"_widget","#children_room_"+d+"_widget","#adults_room_"+d+"_widget",
"#children_room_"+d+"_widget"]);if(10<a){a=b.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR;b={passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),adults_room_1_widget:"",children_room_1_widget:""};d=1;for(var e=2;d<this.model.rooms.length;d++,e++)b["passengers_per_room_div_"+e]=$namespace.MessageUtil.prefixError(a.translatedText),b["adults_room_"+e+"_widget"]="",b["children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+
$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));return!1}return!0},clearRoomErrors:function(){for(var a=1;a<this.model.rooms.length+1;a++)this.clearErrors(["#passengers_per_room_div_"+a,"#adults_room_"+a+"_widget","#children_room_"+a+"_widget"])},validateDates:function(a){var b=!0,d=this.module.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#departureDateWidget","#returnDateWidget","#vacationPackageWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),
g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&(0==this.model.includeFlight?
$namespace.Analytics.trackEvent("ho_event_searchWidget","Check In",this.model.departureDate):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Depart",this.model.departureDate):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Depart",this.model.departureDate):"true"==this.model.isDpSub&&$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Depart",this.model.departureDate)),this.lastDepartureDate=
this.model.departureDate,$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=
$namespace.DateUtil.getDateAsString(h.date),this.returnDate={className:"return",date:h.date},this.lastReturnDate!=this.model.returnDate&&(0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Check Out",this.model.returnDate):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Return",this.model.returnDate):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Return",this.model.returnDate):
"true"==this.model.isDpSub&&$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Return",this.model.returnDate)),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(e=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>e?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({vacationPackageWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),departureDateWidget:"",returnDateWidget:""}),
a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<e&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({vacationPackageWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),departureDateWidget:"",returnDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):(this.departureDate||!e.length&&a||(b=d.VP_INVALID_DEPARTURE,
$namespace.Utils.showErrors({departureDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),e.length?$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Invalid departure date"}):$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Departure date missing"})),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,
$namespace.Utils.showErrors({returnDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||($namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),f.length?$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Invalid return date"}):$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Return date missing"})),b=!1));return b},resize:function(){var a=utils.Breakpoint.isMobile()||
$namespace.Browser.iPad?!0:!1,b=this.ui.form.find('INPUT[id="departureDateWidget"]'),d=this.ui.form.find('INPUT[id="returnDateWidget"]');b.prop("readonly",a);d.prop("readonly",a);b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null;this.ui.vacationpackagedestination.select&&this.ui.vacationpackagedestination.select.attr("data-skip-link","true")},getTotalPassengerCount:function(){for(var a=0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;
return a},isDestinationOnly:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_FIELDS||[]).indexOf(a)},isNoRegionDestination:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_REGIONS||[]).indexOf(a)},setRoomLayout:function(a){var b=this.model.rooms,d=$namespace.Templates.multiroom_template;if(1===b.length&&0==b[0].children.length)this.module.el.hasClass("expand-multiroom")&&(this.module.el.removeClass("expand-multiroom"),this.ui.expansionContainer.html(this.ui.expansionHTML)),
this.ui.form.find('.single-adult-select[data-room="1"]').val(b[0].adultCount),this.ui.form.find('.single-child-select[data-room="1"]').val(b[0].children.length);else{this.module.el.addClass("expand-multiroom");this.ui.expansionContainer.empty();for(var e=0;e<b.length;e++){var f=b[e],g=$(d({index:f.number}));this.ui.expansionContainer.append(g);g.find('.mr-adults-select[data-room="'+f.number+'"]').val(f.adultCount).find("option[value="+f.adultCount+"]").attr("selected",!0).siblings().removeAttr("selected");
g.find('.mr-children-select[data-room="'+f.number+'"]').val(f.children.length).find("option[value="+f.children.length+"]").attr("selected",!0).siblings().removeAttr("selected");this.setRoomChildLayout(f)}}a&&1===b.length&&setTimeout(function(){$("#children_room_1_widget button").focus()},1);this.initFormItems()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.multichild_template,e=$.hook("child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=
0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.child-age-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.child-seat-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);0>g.age||1<g.age||!this.ui.includeFlight.is(":checked")?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+
'"]').show()}}this.initFormItems()}}},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<
b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>
b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},enableOrDisableFieldsBasedOnDestination:function(a){this.clearErrors();""==a||this.isNoRegionDestination(a)?$namespace.Utils.disableFormField(this.ui.region):this.isDestinationOnly(a)?$namespace.Utils.disableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation]):$namespace.Utils.enableFormField([this.ui.region,this.ui.departureDate,
this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation])},geoSuccess:function(a){if("string"===typeof a){var b=a.split(",");this.geolocationCoordinates.string=a;this.geolocationCoordinates.lat=b[0];this.geolocationCoordinates.lng=b[1]}else this.geolocationCoordinates.lat=a.coords.latitude,this.geolocationCoordinates.lng=a.coords.longitude,this.geolocationCoordinates.string=a.coords.latitude+","+a.coords.longitude;this.ui.departureLocation.val("("+$namespace.Config.CURRENT_LOCATION+
")")},geoError:function(a){a=$namespace.Utils.getTemplate("confirm_geolocation_error");var b=new $namespace.Widgets.Confirm(a,function(){b.hide()},function(){b.hide()});b.show()},_isDestinationBookable:function(a){return/escortedVacations|houseboatVacations|lasVegasAndDesert|lionWorldTravel|luxuryVillaRentals|themeParks/i.test(a)?!1:!0},_isRegionRequired:function(a){return $namespace.Utils.regexDestinationCode(a)?!0:!1},_onLocationSelect:function(a,b){$namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);
this.model.destinationType=a.type;this.model.cityCode="city"==a.type||"destination"==a.type?null===a.cityCode||"undefined"==typeof a.cityCode?"":a.cityCode:"airport"==a.type?null===a.value||"undefined"==typeof a.value?"":a.value:"";"city"==a.type||"zipCode"==a.type?(this.model.city=a.city,"undefined"!==typeof a.state&&null!==a.state&&(this.model.city=this.model.city.concat(", "+a.state))):this.model.city="";this.model.hpDestinationCode=a.destinationCode;this.model.locationName=encodeURIComponent(a.title);
this.model.latitude="undefined"==typeof a.latitude?"":a.latitude;this.model.longitude="undefined"==typeof a.longitude?"":a.longitude;this.model.country="undefined"==typeof a.country?"":a.country;0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Destination",decodeURIComponent(this.model.locationName)):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Destination",decodeURIComponent(this.model.locationName)):$namespace.Analytics.trackEvent("dp/hf_event_searchWidget",
"Destination",decodeURIComponent(this.model.locationName));this.clearError("#hotelLocationTextWidget"+this.suffix);this.model.prevDesType!=this.model.destinationType&&this.updateMaxRoomNumber(!0);this.model.prevDesType=this.model.destinationType},_onLocationBlur:function(a){a=$(a.currentTarget);this.model.locationName=a.val();if(!this.suspendValidation){this.clearError("#hotel_package_destination");var b={};a.val().length&&3>a.val().length?(b["#hotel_package_destination"]=$namespace.MessageUtil.prefixError($namespace.SearchWidgetsModule.TranslationTexts.HOBE_SEARCH_MIN_LENGTH),
utils.showErrors(b)):a.val().length&&!this.ui.hotelpackagedestination.hasValidSelection()&&(b["#hotel_package_destination"]=$namespace.MessageUtil.prefixError($namespace.SearchWidgetsModule.TranslationMessages.VP_INVALID_AIRPORT.translatedText),utils.showErrors(b));this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()}},_onDepartureLocationSelect:function(a,b){this.model.departureLocationCode=
a.value;this.model.departureLocationName=$.trim(a.title);""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Departure_City",a.value):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Departure_City",a.value):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Departure_City",a.value))},_onDepartureDateChange:function(a,b,d){this.validateDates();this.departureDate&&(a=
[this.departureDate],this.returnDate&&a.push(this.returnDate),this.ui.departureDate.selectDays(a,!0),this.ui.returnDate.selectDays(a))},_onReturnDateChange:function(a,b,d){this.validateDates();this.returnDate&&(a=[this.returnDate],this.departureDate&&a.unshift(this.departureDate),this.ui.departureDate.selectDays(a),this.ui.returnDate.selectDays(a,!0))},_onDepartureCityKeyDown:function(a){this.clearError("#departureCityTextWidget");$(a.target).parent().removeClass("location-airport")},_onDepartureCityBlur:function(a){this.clearError("#departureCityTextWidget");
a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=this.module.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(a)})):this.ui.departureLocation.hasValidSelection()||$namespace.Utils.showErrors({departureCityTextWidget:$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText)})}},createLiveContainer:function(){this.liveContainer=
$(".tab-switcher-live-container");0===this.liveContainer.length?(this.liveContainer=$("<div />",{"class":"ada-screenreader tab-switcher-live-container","aria-live":"polite"}),$(document.body).append(this.liveContainer)):this.liveContainer.text("")},getVp1DestinationsFromGlobal:function(){var a=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageSearch.act","ctvps=GET_GLOBAL_CONFIG_VP1SW_DESTINATIONS",null,null,function(b){a.vp1Destinations=b.map(function(a){return a.replace(/\s/g,
"")});a.vp1DestinationLasVegas=a.vp1Destinations.pop()},null)},loadDestinationsFromGlobal:function(){if(this.vp1Destinations&&this.vp1Destinations.includes(this.model.destinationCode.toLowerCase())){var a=self.regions[self.model.destinationCode];void 0===a.find(function(a){return a.text==self.module.TranslationTexts.ADDITIONAL_CITIES})&&a.push({text:self.module.TranslationTexts.ADDITIONAL_CITIES,value:"additionalCities"});var b=a.find(function(a){return a.text==self.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION});
self.model.destinationCode.toLowerCase()==this.vp1Destinations[1]&&void 0===b&&(a=a.slice(0),a.unshift({text:self.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""}));self.ui.region&&self.ui.region.replaceOptions(a)}},_onClickSubVptab:function(a,b){var d=this,e=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),f=!0,g=[this.ui.departureLocation,this.ui.geolocation,this.ui.serviceClass];b||($namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),
$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_VACATION_PACKAGE,0));a=$.hook("package-sub-vp").hasClass("active");$.hook("package-sub-vp").addClass("active");$.hook("package-sub-hp").removeClass("active");$.hook("package-sub-vp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_SELECTED);$.hook("package-sub-hp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED);
$(".HFC-driversage").addClass("hidden");this.hotelFlightCarTabEnable=$('INPUT[id="hotelFlightCarEnableFlag"]').val();"true"==this.hotelFlightCarTabEnable&&($.hook("package-sub-hfcp").removeClass("active"),$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children().prop({checked:this.model.includeFlight}),$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").removeClass("hfc-flying-from"),$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children(".checkbox-widget-element").removeClass("hidden"),
$("#flightItineraryCheckboxWidget").removeClass("hidden"),this.model.includeFlight?$namespace.Utils.enableFormField(g):$namespace.Utils.disableFormField(g),$.hook("package-sub-hfcp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED));(g=$.hook("package-sub-vp").text().replace(/\W+-/," -"))&&0<g.length&&(this.createLiveContainer(),this.liveContainer.text(g),this.clearLiveText());$("#vacation_package_destination_section").show();$("#hotel_flight_destination_section").hide();
"additionalDestinations"==this.model.destinationCode&&this.ui.form.find('SELECT[id="vacation_package_destination"]').val("");"additionalCities"==this.model.regionCode&&this.ui.form.find('SELECT[id="region"]').val("");this.model.isVpSub="true";this.model.isHfcSub="false";$('INPUT[id="vp2ActiveFlag"]').val("");b||$namespace.Analytics.trackEvent("WidgetType","Click","VP");e&&e==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_VACATION_PACKAGE&&!this.subClicked&&(f=!1);this.cleanUpHardCodedVpDestinationsFlag||
"florida"!=this.model.destinationCode&&"arizona"!=this.model.destinationCode?this.cleanUpHardCodedVpDestinationsFlag&&this.loadDestinationsFromGlobal():(b=this.regions[this.model.destinationCode],void 0===b.find(function(a){return a.text==d.module.TranslationTexts.ADDITIONAL_CITIES})&&b.push({text:this.module.TranslationTexts.ADDITIONAL_CITIES,value:"additionalCities"}),e=b.find(function(a){return a.text==d.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION}),"arizona"==this.model.destinationCode&&
void 0===e&&(b=b.slice(0),b.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""})),this.ui.region&&this.ui.region.replaceOptions(b));this.updateMaxRoomNumber(f);this.removeWarningMessage("vp2SearchPackageErrorMessageId");f=$(".search-hotel-packages").hasClass("active");!a&&f&&$namespace.SearchWidgetsModule.searchWidgetAnalytics("vacation-packages");a=this.model.destinationCode;if("escortedVacations"==a||"themeParks"==a)this.ui.departureDate.val(""),this.ui.returnDate.val(""),
$namespace.Utils.disableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms]),this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label, #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #children_room_1_widget, #adultsInRoomForWidget_1_label, #childrenInRoomForWidget_1_label").addClass("disabled")},_onClickSubHptab:function(a,b){a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);
var d=!0,e=[this.ui.departureLocation,this.ui.geolocation,this.ui.serviceClass];b||($namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0));$("#hotel_flight_destination_section").removeClass("HFC-Destination");var f=$.hook("package-sub-hp").hasClass("active");$.hook("package-sub-vp").removeClass("active");
$.hook("package-sub-vp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED);$.hook("package-sub-hp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_SELECTED);$(".HFC-driversage").addClass("hidden");this.hotelFlightCarTabEnable=$('INPUT[id="hotelFlightCarEnableFlag"]').val();"true"==this.hotelFlightCarTabEnable&&($.hook("package-sub-hfcp").removeClass("active"),$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children().prop({checked:this.model.includeFlight}),
$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").removeClass("hfc-flying-from"),$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children(".checkbox-widget-element").removeClass("hidden"),$("#flightItineraryCheckboxWidget").removeClass("hidden"),this.model.includeFlight?$namespace.Utils.enableFormField(e):$namespace.Utils.disableFormField(e),$.hook("package-sub-hfcp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED));(e=$.hook("package-sub-hp").text().replace(/\W+-/,
" -"))&&0<e.length&&(this.createLiveContainer(),this.liveContainer.text(e),this.clearLiveText());$("#vacation_package_destination_section").hide();$("#hotel_flight_destination_section").show();this.model.isVpSub="false";this.model.isHfcSub="false";$('INPUT[id="vp2ActiveFlag"]').val("");!a||a!=$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR&&a!=$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT||this.subClicked||(d=!1);b||$namespace.Analytics.trackEvent("WidgetType",
"Click","DP/HF");this.updateMaxRoomNumber(d);$.hook("package-sub-hp").addClass("active").focus();this.removeWarningMessage("vp2SearchPackageErrorMessageId");f||$namespace.SearchWidgetsModule.searchWidgetAnalytics("vacation-packages");b=this.model.destinationCode;if("escortedVacations"==b||"themeParks"==b)$namespace.Utils.enableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms]),this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label, #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #children_room_1_widget, #adultsInRoomForWidget_1_label, #childrenInRoomForWidget_1_label").removeClass("disabled"),
this.model.includeFlight=!0},_onClickSubHfcTab:function(a,b){a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);var d=!0,e=[this.ui.departureLocation,this.ui.geolocation,this.ui.serviceClass];b||($namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR,0));$("#hotel_flight_destination_section").addClass("HFC-Destination");
var f=$.hook("package-sub-hfcp").hasClass("active");$.hook("package-sub-vp").removeClass("active");$.hook("package-sub-hp").removeClass("active");$.hook("package-sub-vp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED);$.hook("package-sub-hp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_NOT_SELECTED);$.hook("package-sub-hfcp").find(">span.ada-screenreader").text(this.module.TranslationTexts.ACCESSIBILITY_TAB_SELECTED);
$(".HFC-driversage").removeClass("hidden");$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children().prop({checked:!0});$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").children(".checkbox-widget-element").addClass("hidden");$("#flightItineraryCheckboxWidget").parent(".checkbox-widget").addClass("hfc-flying-from");$("#flightItineraryCheckboxWidget").addClass("hidden");$namespace.Utils.enableFormField(e);(e=$.hook("package-sub-hfcp").text().replace(/\W+-/," -"))&&0<e.length&&
(this.createLiveContainer(),this.liveContainer.text(e),this.clearLiveText());$("#vacation_package_destination_section").hide();$("#hotel_flight_destination_section").show();this.model.isVpSub="false";this.model.isHfcSub="true";!a||a!=$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR&&a!=$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT||this.subClicked||(d=!1);b||$namespace.Analytics.trackEvent("WidgetType","Click","DP/HFC");this.updateMaxRoomNumber(d);
$.hook("package-sub-hfcp").addClass("active").focus();this.removeWarningMessage("vp2SearchPackageErrorMessageId");f||$namespace.SearchWidgetsModule.searchWidgetAnalytics("vacation-packages");b=this.model.destinationCode;if("escortedVacations"==b||"themeParks"==b)$namespace.Utils.enableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms]),this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label, #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #children_room_1_widget, #adultsInRoomForWidget_1_label, #childrenInRoomForWidget_1_label").removeClass("disabled"),
this.model.includeFlight=!0},clearLiveText:function(){var a=this;setTimeout(function(){a.liveContainer.text("")},removeLiveTextDelay)},_onIncludeFlightChange:function(a){if(!$namespace.GlobalConstants.HFC_FLYING_FROM||$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)!==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR){a=$(a.currentTarget).is(":checked");var b=[this.ui.departureLocation,this.ui.geolocation,this.ui.serviceClass];(this.model.includeFlight=
a)?($namespace.Utils.enableFormField(b),$("#departureDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#returnDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):(this.clearError("#departureCityTextWidget"),$namespace.Utils.disableFormField(b),$("#departureDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),$("#returnDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));
this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Flight",a?"Yes":"No"):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp_event_searchWidget","Flight",a?"Yes":"No"));a?this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()}},
_onServiceClassChange:function(a){a=$(a.currentTarget).val();this.model.serviceClass=a;this.initialized&&(""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Class",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Class",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Class",a)))},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);
this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();this.initialized&&(0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Rooms",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Rooms",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Rooms",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Rooms",a)));this.model.includeFlight?
this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},cleanUpRoom:function(){this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}];this.setRoomLayout();this.ui.form.find('SELECT[class="numberOfRoomsWidget"]').val(this.model.rooms.length)},_onChildrenChange:function(a){a=+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);
$namespace.TabOrder.updatePageTabOrder();this.initialized&&(0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Children",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Children",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Children",a)));this.model.includeFlight?
this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].adultCount=a;this.initialized&&(0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget",
"Adults",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Adults",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Adults",a)));this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();
b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Children",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget",
"Children",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Children",a));this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);0==this.model.includeFlight?
$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Adults",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Adults",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Adults",a));this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType||""==this.model.isVpSub||
"true"==this.model.isVpSub?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():
(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder();0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Child_Age",a):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Child_Age",a):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","Child_Age",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget",
"Child_Age",a))},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a);0==this.model.includeFlight?$namespace.Analytics.trackEvent("ho_event_searchWidget","Infant_Seating",0==a?"lap":"seat"):""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Infant_Seating",0==a?"lap":"seat"):"true"==this.model.isHfcSub?$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget",
"Infant_Seating",0==a?"lap":"seat"):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp/hf_event_searchWidget","Infant_Seating",0==a?"lap":"seat"))},updateMaxRoomNumber:function(a){$("#hp_number_of_rooms").length&&("true"==this.model.isVpSub||"destination"==this.model.destinationType||""==this.model.destinationType?($("#hp_number_of_rooms").hide(),$("#vp_number_of_rooms").show()):($("#hp_number_of_rooms").show(),$("#vp_number_of_rooms").hide()),a&&this.cleanUpRoom())},_onGeoClick:function(a){"geolocation"in
navigator&&navigator.geolocation.getCurrentPosition($.proxy(this.geoSuccess,this),$.proxy(this.geoError,this),{timeOut:3E4,maximumAge:6E5});a.preventDefault()},_onSubmit:function(a){var b=this.model.destinationCode;$("#vacation_package_destination_section").is(":visible")||(b=this.model.hpDestinationCode);this.model.includeFlight=this.ui.includeFlight.is(":checked");if(/THEMEPARKS/i.test(b))window.location.replace(_webLoc+"/Theme-Parks");else if(/LIONWORLDTRAVEL/i.test(b))window.location.replace(_webLoc+
"/Experiences/Lion-World-Travel");else if(/ESCORTEDVACATIONS/i.test(b))window.location.replace(_webLoc+"/Experiences/Guided-Vacations");else if(this.validate()){for(var d=this.model.rooms,e=0,f=[],g=[],h=[],k=[],l=0,p=0,q=0,r=0;r<d.length;r++){var v=d[r].adultCount,n=d[r].children.length;e+=v+n;f.push(v);p+=v;g.push(n);q+=n;for(v=0;v<n;v++)h.push(d[r].children[v].age),k.push(d[r].children[v].seat),1>=d[r].children[v].age&&l++}v=!1;if(b)for(r=0;r<$namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED.length;r++)if($namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED[r].toLowerCase()==
b.toLowerCase()){v=!0;break}r="_"+this.model.departureDate+"_"+this.model.returnDate;this.analyticsRoomInfo=d="_"+this.model.rooms.length+"_"+p+"_"+q;this.analyticsTravelDates=r;if($("#vacation_package_destination_section").is(":visible")){var t=this.ui.vacationpackagedestination.select[0],u=this.ui.region.select[0];n="";t=t.options[t.selectedIndex].text;this.cleanUpHardCodedVpDestinationsFlag||"lasVegas"!=b?this.cleanUpHardCodedVpDestinationsFlag&&b.toLowerCase()==this.vp1DestinationLasVegas?(this.model.regionCode=
this.vp1DestinationLasVegas.substring(0,3).toUpperCase(),n=$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(0,3))+" "+$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(3,9))):u.options.length&&(u=-1<u.selectedIndex?u.options[u.selectedIndex]:u.options[0],u.value==this.model.regionCode&&(n=u.text)):(this.model.regionCode="LAS",n="Las Vegas");b={cityCode:this.model.regionCode,cityName:n,destination:b,destinationName:t,departureDate:this.model.departureDate,
arrivalDate:this.model.returnDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),flightChecked:this.model.includeFlight,numberOfPassengers:e,hotelRooms:this.model.rooms.length,adults:f.join(","),children:g.join(","),childrenAges:h.join(","),childSeatFlags:k.join(","),serviceClass:this.model.serviceClass,multiCityPackagesRequested:v};f=t;n&&""!=n&&(f+="-"+n);f+=r;this.model.includeFlight?(b.departureCityCode=this.model.departureLocationCode,b.departureCity=
this.model.departureLocationName,f+="_"+this.model.departureLocationCode):f+="_no-flight";f+=d;b.uid=$namespace.Utils.getUID();$namespace.Analytics.trackEvent("vp_event_searchWidget","Click","Search");$namespace.Analytics.trackEvent("vp_event_searchDetails","Click",f.replace(/%2C/g,",").replace(/%20/g," "));$namespace.Analytics.track({vendor:"adobe",type:"event",events:"event7,event30="+b.hotelRooms+",event32="+e+",event33="+p+",event34="+q+",event35="+b.numberOfNights+",event36="+$namespace.DateUtil.getDifferenceInDays(new Date,
this.departureDate.date)+",event37="+l,v34:b.destination,v35:b.cityCode,v37:b.departureDate,v38:b.numberOfNights,v39:$namespace.DateUtil.getDifferenceInDays(new Date,this.departureDate.date),v40:p,v41:0==q?"0":q,v44:this.model.rooms.length,v60:this.model.includeFlight?"Yes":"No",v61:b.multiCityPackagesRequested?"Yes":"No"});this.submitForm(b)}else b={destinationType:this.model.destinationType,locationName:this.model.locationName,city:this.model.city,cityCode:this.model.cityCode,latitude:this.model.latitude,
longitude:this.model.longitude,country:this.model.country,cityName:this.ui.hotelpackagedestination.input.val(),destination:b,departureDate:this.model.departureDate,arrivalDate:this.model.returnDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),flightChecked:this.model.includeFlight,numberOfPassengers:e,hotelRooms:this.model.rooms.length,adults:f.join(","),children:g.join(","),childrenAges:h.join(","),childSeatFlags:k.join(","),serviceClass:this.model.serviceClass,
multiCityPackagesRequested:v},f=this.model.locationName+r,this.model.includeFlight?(b.departureCityCode=this.model.departureLocationCode,b.departureCity=this.model.departureLocationName,f+="_"+this.model.departureLocationCode):f+="_no-flight",f+=d,b.uid=$namespace.Utils.getUID(),g=$.hook("package-sub-hfcp").hasClass("active"),h=$.hook("package-sub-hp").hasClass("active"),0!=this.model.includeFlight||h||g?($namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"_event_searchWidget","Click","Search"),$namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"_event_searchDetails","Click",f)):($namespace.Analytics.trackEvent("ho_event_searchWidget","Click","Search"),$namespace.Analytics.trackEvent("ho_event_searchWidget","Click",f)),$namespace.Analytics.track({vendor:"adobe",type:"event",events:"event7,event30="+b.hotelRooms+",event32="+e+",event33="+p+",event34="+q+",event35="+b.numberOfNights+",event36="+$namespace.DateUtil.getDifferenceInDays(new Date,
this.departureDate.date)+",event37="+l,v34:b.destination,v35:b.cityCode,v37:b.departureDate,v38:b.numberOfNights,v39:$namespace.DateUtil.getDifferenceInDays(new Date,this.departureDate.date),v40:p,v41:0==q?"0":q,v44:this.model.rooms.length,v60:this.model.includeFlight?"Yes":"No",v61:b.multiCityPackagesRequested?"Yes":"No"}),this.submitForm(b,!0)}a.preventDefault()},_loadCitiesOfSelectedDestination:function(a){var b=this;this.model.regionCode="";var d=this.regions[a];if(d){var e=d.slice(0);this.cleanUpHardCodedVpDestinationsFlag||
"arizona"!=a?this.cleanUpHardCodedVpDestinationsFlag&&a.toLowerCase()==this.vp1Destinations[1]?(d=e.find(function(a){return a.text==b.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION}),void 0===d&&e.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""})):1<d.length&&e[0].text!=this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION?e.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""}):1==d.length&&(this.model.regionCode=d[0].value,this.ui.region.select.val(this.model.regionCode)):
(d=e.find(function(a){return a.text==b.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION}),void 0===d&&e.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""}));d=e.find(function(a){return a.text==b.module.TranslationTexts.ADDITIONAL_CITIES});this.cleanUpHardCodedVpDestinationsFlag||"florida"!=a&&"arizona"!=a||void 0!==d?this.cleanUpHardCodedVpDestinationsFlag&&this.vp1Destinations.includes(a.toLowerCase())&&void 0===d&&e.push({text:this.module.TranslationTexts.ADDITIONAL_CITIES,
value:"additionalCities"}):e.push({text:this.module.TranslationTexts.ADDITIONAL_CITIES,value:"additionalCities"});this.ui.region.replaceOptions(e)}},_loadServiceClassesByDestinationCode:function(a){var b=this;a="sw=LOAD_SERVICE_CLASSES_BY_DESTINATION&destination="+a+("&serviceClass="+this.ui.serviceClass.val());$namespace.AjaxUtil.makeAjaxCall("searchWidget.act",a,null,"serviceClassWidget",function(a){a=JSON.parse(a);/^any$/i.test(a[0].value)||a.unshift({text:b.module.TranslationTexts.PLACEHOLDER_ANY_OPTION,
value:"Any"});b.ui.serviceClass.replaceOptions(a)},"")},_onRegionChange:function(a){this.clearErrors(["#region_widget"]);this.model.regionCode=$(a.currentTarget).val();"additionalCities"==this.model.regionCode&&this._onClickSubHptab();this.model.regionCode&&this.model.regionCode.length&&($namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Region",this.model.regionCode):$namespace.Analytics.trackEvent("vp_event_searchWidget","Region",this.model.destinationCode+
"/"+this.model.regionCode));this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},removeWarningMessage:function(a){(a=$("#search_widget").find('DIV[id="'+a+'"]'))&&a.removeClass("showPackageWarn")},_onDestinationChange:function(a){a=$(a.currentTarget).val();$("#vacation_package_destination").get(0);"additionalDestinations"==a&&this._onClickSubHptab();if(this.model.destinationCode!=a){this.clearErrors(["#vacation_package_destination_widget","#region_widget"]);
this.model.destinationCode=a;this.model.regionCode="";this.ui.region.val("",1);this.enableOrDisableFieldsBasedOnDestination(a);if(""==a)$namespace.Utils.disableFormField(this.ui.region);else if(this._isDestinationBookable(a)){$namespace.Utils.regexDestinationCode(a)?this._loadCitiesOfSelectedDestination(a):$namespace.Utils.disableFormField(this.ui.region);var b=[this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms];$namespace.Utils.enableFormField(b);
this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label, #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #children_room_1_widget, #adultsInRoomForWidget_1_label, #childrenInRoomForWidget_1_label").removeClass("disabled");this.ui.includeFlight.prop("checked","checked");this.model.includeFlight=!0}else/THEMEPARKS|LIONWORLDTRAVEL|ESCORTEDVACATIONS/i.test(a)&&(this.ui.numberOfRooms.val("1"),this.updateRoomCount(1),this.updateRoomChildren(this.model.rooms[0],
0),this.setRoomLayout(),this.ui.form.find("#departureDateWidget-label, #returnDateWidget-label,  #serviceClassWidgetLabel, #numberOfRoomsWidgetLabel, #adults_room_1_widget, #adultsInRoomForWidget_1_label, #children_room_1_widget, #childrenInRoomForWidget_1_label").addClass("disabled"),b=[this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms],$namespace.Utils.disableFormField(b));this.model.includeFlight?this.validateAirfarePassengerCount():
this.validateWithoutAirfarePassengerCount();""!=a?$namespace.PackageSearchResultsModule.packageSearched?$namespace.Analytics.trackEvent("Search_Results_Edit","Destination",a):$namespace.Analytics.trackEvent("vp_event_searchWidget","Destination",a):$namespace.Analytics.trackEvent("vp_event_searchWidget","Destination","Select a destination")}},submitForm:function(a,b){var d=this;this.model.locationName=this.model.locationName.replace(/,/g,"<comma>");this.model.city=this.model.city.replace(/,/g,"<comma>");
$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME);$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(this.model),0);var e=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.Storage.set("vacation-packages-search-form",a);$namespace.Storage.set("transportation-page",{isVisited:!1});$namespace.DomUtil.setElementLoadingMask(!0);this.isSubmitting=!0;$namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);if(this._isDestinationBookable(a.destination)){var f=
$namespace,g=this._isRegionRequired(a.destination);var h=e?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";if(b){b={domainCode:"",destination:a.locationName,destinationCityCode:a.cityCode,latitude:a.latitude,longitude:a.longitude,country:a.country,travelStartDate:a.departureDate,travelEndDate:a.arrivalDate,numberOfNights:a.numberOfNights,rooms:[],travelerCount:a.numberOfPassengers,childSeatFlags:a.childSeatFlags,originAirports:[{airportName:a.departureCity,
airportCode:a.departureCityCode}],destinationAirports:[],numberOfConnections:-1,flightServiceClass:a.serviceClass};g=a.adults.split(",");for(var k=a.children.split(","),l=a.childrenAges.split(","),p=0,q=0;q<a.hotelRooms;q++){var r=parseInt(k[q]);b.rooms[q]={roomNumber:q,adultCount:parseInt(g[q]),childCount:r,childAges:[]};r+=p;for(var v=b.rooms[q].childAges,n=0,t=p;t<r;n++)v[n]=l[t++],p++}h+="&dynamicSearchInfoJSON="+JSON.stringify(b);$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0);h+="&destinationType="+a.destinationType;h+="&cityCode="+a.cityCode;h+="&latitude="+a.latitude;h+="&country="+a.country;h+="&locationName="+a.locationName;h+="&city="+a.city;h+="&longitude="+a.longitude;var u=$.hook("package-sub-hfcp").hasClass("active"),w=$.hook("package-sub-hp").hasClass("active"),y=a.cityName.split(",");u?(h+="&fromHFC=true",$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR,0)):(h+="&fromHotelPlusFlightSubTab=true",$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0));b=function(b,e,g,h){var k=f.SearchWidgetsModule.TranslationTexts.PRODUCT_SEARCH_NO_RESULTS_TITLE;h=d.model.cityCode?d.model.cityCode:h?h:"NULL";var l=e?e[0]:!1,p=e?e[1]:!1,n="";"city"===a.destinationType?n=y+"_"+h+
d.analyticsTravelDates+"_"+d.model.departureLocationCode+d.analyticsRoomInfo:"airport"===a.destinationType&&(n=a.cityName.replace(a.cityName.substring(0,6),"")+"_"+h+d.analyticsTravelDates+"_"+d.model.departureLocationCode+d.analyticsRoomInfo);if(this.message)d.model.isDpSub="true",$namespace.Analytics.trackEvent("dp_event_searchWidget","No results found",a.locationName.replace(/%2C/g,",").replace(/%20/g," ")),this.message.text===$namespace.ShareableSearch.TranslationTexts.NO_HOTELS_TEXT.text?$namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"_event_searchWidget","NoHotels",n):this.message.text===$namespace.ShareableSearch.TranslationTexts.NO_AIRPORT_TEXT.text&&$namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"_event_searchWidget","NoAirport",n),f.DomUtil.setElementLoadingMask(!1,1),f.MessageUtil.showMessage({type:1,text:this.message.text,title:k});else if("HOBESearchResult"===b)/hotels/i.test(window.location.href)?f.Navigation.loadPage(_webLoc+"/Hotels/h="+f.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):
f.Navigation.loadPage(_webLoc+"/h="+f.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS);else if("MultiCityPackageSearchResult"===b)f.Navigation.loadPage(_webLoc+"/h="+f.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES);else if((p||l)&&(u||w)){b=p?"vplpr=HFC_NO_CAR_AVAILABLE_ERROR_POP_UP":l?"vplpr=HF_HFC_NO_FLIGHT_AVAILABLE_ERROR_POP_UP":"undefined";var q=g[0]?"_AllAgenciesClosed":g[1]?"_NoInventory":"_NoAgency";g=function(){l?$namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"_event_searchWidget","NoFlights",n):p&&$namespace.Analytics.trackEvent("dp/hfc_event_searchWidget","NoCar"+q,n);return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(a){a=window.event||a;a.target||(a.target=a.srcElement);a=a.target.dataset.name;"viewHotelAndFlightDeals"===a?(d.model&&(d.model.isVpSub="false",d.model.isHfcSub="false",$namespace.DomUtil.clearAndCreateCookie(d.WIDGET_COOKIE_NAME,JSON.stringify(d.model),0),$namespace.DomUtil.clearAndCreateCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0)),$namespace.Analytics.trackEvent("Message/Dp/hfc_SearchWidget_Pkg_Redirect"+q,"Continue",n),f.Navigation.loadPage(_webLoc+"/h="+f.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)):"adjustYourSearch"===a?($namespace.Analytics.trackEvent("Message/Dp/hfc_SearchWidget_Pkg_Redirect"+q,"Adjust",n),$("#returnDateWidget").addClass("error"),$("#departureDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top)):
"hfcNocarPopUpClickToClose"===a&&$namespace.Analytics.trackEvent("Message/Dp/hfc_SearchWidget_Pkg_Redirect"+q,"Close",n)})).show()}}(this.module);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act",b,null,null,g,null)}else f.Navigation.loadPage(_webLoc+"/h="+f.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)}}else $namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_VACATION_PACKAGE,
0),g?h+="&cityCode="+a.cityCode:"lasVegas"==a.destination&&(h+="&cityCode=LAS"),b=function(){f.Navigation.loadPage(_webLoc+"/h="+f.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES)};h+="&destination="+a.destination;h+="&flightChecked="+a.flightChecked;h+="&arrivalDate="+a.arrivalDate;h+="&departureDate="+a.departureDate;h+="&numberOfNights="+a.numberOfNights;h+="&numberOfPassengers="+a.numberOfPassengers;h+="&hotelRooms="+a.hotelRooms;h+="&adults="+a.adults;h+="&children="+a.children;h+="&childrenAges="+
a.childrenAges;h+="&childSeatFlags="+a.childSeatFlags;h=h+"&fromWidget=true&fromMenu=false&serviceClass="+a.serviceClass;h+="&multiCityPackagesRequested="+a.multiCityPackagesRequested;h+="&suppressOutput=true";a.flightChecked&&(h+="&departureCity="+a.departureCity,h+="&departureCityCode="+a.departureCityCode);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(e?"vacationPackageSearch.act":"vacationPackageFilteredSearchResults.act",h,null,null,b,null,"")}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.View.HotelSearchWidgetView=Backbone.View.extend({el:"",ui:{},model:null,module:null,WIDGET_COOKIE_NAME:"HOTEL_SEARCH_WIDGET_VALUES",checkInDate:null,checkOutDate:null,events:{},initialize:function(a){a=$.extend({},a);this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.ui={};this.lastCheckOutDate=this.lastCheckInDate=this.checkOutDate=this.checkInDate=this.model=null;this.suspendValidation=!1;this.module=
a.module;this.suffix=(this.modal=a.modal||!1)?"-modal":"";this.translationTexts=a.translationTexts;this.translationMessages=a.translationMessages;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.$el=null;this.events={};this.events["change #numberOfRoomsHobeWidget"+this.suffix]="_onRoomsChange";this.events['change .single-child-select[modal="'+(this.modal?"true":"false")+'"]']="_onChildrenChange";this.events['change .single-adult-select[modal="'+(this.modal?"true":"false")+'"]']=
"_onAdultsChange";this.events['change .mr-adults-select[modal="'+(this.modal?"true":"false")+'"]']="_onMultiAdultsChange";this.events['change .mr-children-select[modal="'+(this.modal?"true":"false")+'"]']="_onMultiChildrenChange";this.events['change .hobe-child-age-select[modal="'+(this.modal?"true":"false")+'"]']="_onChildAgeChange";this.events['click [data-hook="hotel_search_submit'+this.suffix+'"]']="_onSubmit";this.events['click [data-hook="hotel-close-button'+this.suffix+'"]']="_onCloseModalClick";
this.events['mousedown [data-hook="hotel-close-button'+this.suffix+'"]']="_onCloseMouseDown";this.setElement("#search_hotels_view"+this.suffix);this.module&&this.module.initElement&&this.module.initElement();this.undelegateEvents();this.ui={};this.ui.form=$("#search_hotels_form"+this.suffix);this.ui.submitButton=$.hook("hotel_search_submit"+this.suffix,this.el);this.ui.expansionContainer=$.hook("multiroom-expansion"+this.suffix,this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();var b=
$namespace.Config.hotelUtilApiKey;this.createModel();this.modal||this.loadValuesFromModel();this.ui.destination=new $namespace.Widgets.DataListWidget(this.ui.form.find("#hobe_destination_widget"+this.suffix),{url:$namespace.GlobalConstants.API_CONNECT_URL+"/api/hotels/locations",headers:{apiKey:b,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:utils.parseHOBELocations,noResultsText:this.translationTexts.NO_LOCATIONS_ERROR_MESSAGE,showImages:!0,useGoogleAPI:!0,onSelect:$.proxy(this._onLocationSelect,
this),onLocationBlur:$.proxy(this._onLocationBlur,this)});this.modal&&"undefined"!=typeof a.offerSearchInfo&&(this.model.locationName=a.offerSearchInfo.location||"",this.model.latitude=a.offerSearchInfo.latitude||"",this.model.longitude=a.offerSearchInfo.longitude||"",this.model.selectedHotelId=a.offerSearchInfo.selectedHotelId||"",this.model.selectedChainCode=a.offerSearchInfo.selectedChainCode||"",this.model.selectedBrandName=a.offerSearchInfo.selectedBrandName||"",this.model.cityCode=a.offerSearchInfo.cityCode||
"",this.ui.destination.val(this.model.locationName,this.model.locationName),this.ui.destination.input.attr("titletext",this.model.locationName));var d=this,e=$namespace,f=e.DateUtil;a=function(a,b){if(d.modal){var e=$("#search_hotels_view-modal");750>e.height()&&e.height(750)}a=$(a);a=/checkIn/.test(a.attr("id"));b.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"return"));d.setCheckOutDateCalendarDisplayMonth()};b=function(a){var b=
/checkIn/.test($(this).attr("id"));b=d.ui.form.find("#"+(b?"checkOutDateWidget":"checkInDateWidget")+d.suffix).datepicker("getDate");b=null===b||0!=f.getDifferenceInDays(a,b)?"":"date-highlight";var g=e.SearchWidgetsModule.getAccessibleDateLabel(a);null!=d.checkInDate&&0==f.getDifferenceInDays(a,d.checkInDate.date)?g=e.TranslationUtil.replaceParameters(e.SearchWidgetsModule.TranslationTexts.CHECK_IN_DATE_SELECTED_LABEL,{date:g}):null!=d.checkOutDate&&0==f.getDifferenceInDays(a,d.checkOutDate.date)&&
(g=e.TranslationUtil.replaceParameters(e.SearchWidgetsModule.TranslationTexts.CHECK_OUT_DATE_SELECTED_LABEL,{date:g}));a=e.DateUtil.enhanceDateStringReadability(g);return[!0,b,g,a]};var g=function(a,b){d.validateDates()},h=e.DateUtil.getDateDaysFromToday(0),k=e.DateUtil.getDateDaysFromToday(1);this.checkInDate&&(k=e.DateUtil.addDaysToDate(this.checkInDate.date,1));this.ui.checkInDate=this.ui.form.find("#checkInDateWidget"+this.suffix).datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),
beforeShow:a,beforeShowDay:b,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:e.Config.DAY_SHORT_NAMES,monthNames:e.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:e.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:e.SearchWidgetsModule.TranslationTexts.CHECK_IN_DATE_CALENDAR_LABEL,prevText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.checkOutDate=this.ui.form.find("#checkOutDateWidget"+this.suffix).datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:a,beforeShowDay:b,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:e.Config.DAY_SHORT_NAMES,monthNames:e.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:e.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:e.SearchWidgetsModule.TranslationTexts.CHECK_OUT_DATE_CALENDAR_LABEL,
prevText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON,alignRight:!0});a=this.ui.form.find("#checkInDateWidget"+this.suffix+", #checkOutDateWidget"+this.suffix);this.floatPlaceholders=[];a.each(function(a,b){d.floatPlaceholders.push(new $namespace.FloatPlaceholder(b))});a.on("blur",function(){$(this).datepicker("widget").is(":visible")||d.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=
this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),e.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#search_hotels_view div.date-widget, #hotel_offer_price_availability_modal div.date-widget").addClass("ctc-jqui");
this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#number_of_rooms_hobe_widget"+this.suffix),{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length)for(a=parseInt(this.ui.numberOfRooms.val()),b=0,g=1;b<a;b++,g++){if(this.modal&&this.ui.form.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]').val("2"),h=this.ui.form.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]'),h.length&&(this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),
{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="childrenInRoomForHobeWidget_'+g+this.suffix+'"]').parent(),{taborder:"document"})),h=parseInt(this.model.rooms[b].numberOfChildren),0<h)){k=0;for(var l=1;k<h;k++,l++){var p=this.ui.form.find('SELECT[id="hotelChildAgeForWidget_'+g+"_"+l+this.suffix+'"]').parent();new $namespace.Widgets.SelectWidget(p,{taborder:"document"})}}}else this.modal?this.ui.adults.push((new $namespace.Widgets.SelectWidget($("#adults_room_1_hobe_widget"+
this.suffix),{taborder:"document"})).val("2")):this.ui.adults.push(new $namespace.Widgets.SelectWidget($("#adults_room_1_hobe_widget"+this.suffix),{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget($("#children_room_1_hobe_widget"+this.suffix),{taborder:"document"}));$(window).on("resize orientationchange",function(){var a=e.SearchWidgetsModule.getWindowDimensions();if(d.win.height!=a.height||d.win.width!=a.width)d.ui.form.find("#checkInDateWidget"+d.suffix+", #checkOutDateWidget"+
d.suffix).datepicker("hide"),d.win=a;d.resize()});this.delegateEvents();this.resize();$namespace.TabOrder.updatePageTabOrder()},setCheckOutDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.checkInDate&&this.checkOutDate?(b=this.checkOutDate.date.getMonth(),a=this.checkOutDate.date.getFullYear(),this.checkInDate.date.getTime()>=this.checkOutDate.date.getTime()&&(b=this.checkInDate.date.getMonth(),a=this.checkInDate.date.getFullYear())):this.checkInDate?(b=this.checkInDate.date.getMonth(),
a=this.checkInDate.date.getFullYear()):this.checkOutDate&&(b=this.checkOutDate.date.getMonth(),a=this.checkOutDate.date.getFullYear());var d=this.ui.checkOutDate.val();this.ui.checkOutDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.checkOutDate.val(d)},createModel:function(){this.model={locationName:"",latitude:"",longitude:"",numberOfNights:0,cityCode:"",checkInDate:"",checkOutDate:"",selectedHotelId:"",selectedChainCode:"",selectedBrandName:"",rooms:[{numberOfAdults:2,
numberOfChildren:0,childrenAges:[],roomNumber:1}]};if(!this.modal){var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);if(a){var b=null;try{b=JSON.parse(a)}catch(d){}b&&(this.model=b,this.lastCheckInDate=b.checkInDate,this.checkInDate={date:$namespace.DateUtil.getDateFromString(b.checkInDate),className:"departure"},this.lastCheckOutDate=b.checkOutDate,this.checkOutDate={date:$namespace.DateUtil.getDateFromString(b.checkOutDate),className:"return"})}}},loadValuesFromModel:function(){if(this.model){var a=
$(this.el);a.find('INPUT[id="hotelLocationTextWidget'+this.suffix+'"]').val(decodeURIComponent(this.model.locationName));this.model.selectedChainCode="";this.model.selectedBrandName="";this.model.selectedHotelId="";var b=$namespace.DateUtil.reformatDateString(this.model.checkInDate,this.defaultDateFormat,this.localeDateFormat),d=$namespace.DateUtil.reformatDateString(this.model.checkOutDate,this.defaultDateFormat,this.localeDateFormat);a.find('INPUT[id="checkInDateWidget'+this.suffix+'"]').val(b);
a.find('INPUT[id="checkOutDateWidget'+this.suffix+'"]').val(d);b=this.model.rooms?this.model.rooms.length:0;d=this.model.rooms;a.find('SELECT[id="numberOfRoomsHobeWidget'+this.suffix+'"]').val(b).find("option[value="+b+"]").attr("selected",!0).siblings().removeAttr("selected");var e=$namespace.Templates["multiroom_template_hobe"+this.suffix];if(1==b&&0==d[0].numberOfChildren)a.find('SELECT[id="adultsInRoomForHobeWidget_1'+this.suffix+'"]').val(d[0].numberOfAdults).find("option[value="+d[0].numberOfAdults+
"]").attr("selected",!0).siblings().removeAttr("selected"),a.find('SELECT[id="childrenInRoomForHobeWidget_1'+this.suffix+'"]').val(0).find("option[value=0]").attr("selected",!0).siblings().removeAttr("selected");else{this.ui.expansionContainer.empty();this.module.el.addClass("expand-multiroom-hobe");for(var f=0,g=1;f<b;f++,g++){var h=$(e({index:g}));this.ui.expansionContainer.append(h);a.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]').val(d[f].numberOfAdults).find("option[value="+
d[f].numberOfAdults+"]").attr("selected",!0).siblings().removeAttr("selected");a.find('SELECT[id="childrenInRoomForHobeWidget_'+g+this.suffix+'"]').val(d[f].numberOfChildren).find("option[value="+d[f].numberOfChildren+"]").attr("selected",!0).siblings().removeAttr("selected");var k=$namespace.Templates["multichild_template_hobe"+this.suffix],l=$.hook("hobe_child_expansion_"+g+this.suffix,this.ui.expansionContainer);if(l){l.empty();for(var p=parseInt(d[f].numberOfChildren),q=0,r=1;q<p;q++,r++){h=$(k({roomIndex:g,
index:r}));l.append(h);var v=this.model.rooms[f].childrenAges[q];h.find('.hobe-child-age-select[modal="'+(this.modal?"true":"false")+'"][data-room="'+g+'"][data-child="'+r+'"]').val(v).find("option[value="+v+"]").attr("selected",!0).siblings().removeAttr("selected")}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#hotelLocationTextWidget"+this.suffix);a.push("#checkInDateWidget"+this.suffix);a.push("#checkOutDateWidget"+
this.suffix);a.push("#hotelWidgetDates"+this.suffix);for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=0,f=1;e<this.model.rooms[b].numberOfChildren;e++,f++)a.push("#hotelChildAgeForWidget_"+d+"_"+f+this.suffix),a.push("#hotelChildAgeForWidget_"+d+"_"+f+this.suffix+"_button")}utils.clearErrors(a,this.ui.form)},validate:function(){this.clearErrors();var a=!0,b={},d=this.translationMessages,e=$namespace,f=e.MessageUtil;""==this.model.locationName?(b["#hotelLocationTextWidget"+this.suffix]=
f.prefixError(d.VP_DESTINATION_REQUIRED.translatedText),e.Analytics.trackPageView("/er/errorCode/"+f.formatErrorMessageForAnalytics(d.VP_DESTINATION_REQUIRED.sourceText)),a=!1):3>this.ui.destination.input.val().length?(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(this.translationTexts.HOBE_SEARCH_MIN_LENGTH),a=!1):this.ui.destination.hasValidSelection()||(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(d.VP_INVALID_AIRPORT.translatedText),a=!1);this.validateDates(!1)||(a=!1);var g=
[],h=[];e=this.model.rooms?this.model.rooms.length:0;for(var k=this.model.rooms,l=0;l<e;l++){var p=+k[l].numberOfChildren;g.push(p);for(var q=0;q<p;q++)h.push(k[l].childrenAges[q])}g=0;for(h=1;g<e;g++,h++)this.ui.form.find('SELECT.hobe-child-age-select[data-room="'+h+'"][modal="'+(this.modal?"true":"false")+'"]').each(function(){var e=$(this);-1==e.val()&&(e.attr("id"),e=e.parent().attr("id"),b[e]=f.prefixError(d.VP_CHILD_AGE_REQUIRED.translatedText),a=!1)});a||(utils.showErrors(b),utils.focusFirstErrorField(this.ui.form));
return a},validateDates:function(a){var b=!0;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#checkInDateWidget"+this.suffix,"#checkOutDateWidget"+this.suffix,"#hotelWidgetDates"+this.suffix]);var d=this.ui.checkInDate.val(),e=this.ui.checkOutDate.val(),f=$namespace.DateUtil.isValidDateString(d,this.localeDateFormat),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat);f&&!f.isPastDate?(this.ui.checkInDate.datepicker("setDate",f.date),this.model.checkInDate=$namespace.DateUtil.getDateAsString(f.date),
this.checkInDate={className:"departure",date:f.date},f=$namespace.DateUtil.addDaysToDate(f.date,1),this.ui.checkOutDate.datepicker("option",{suspendAutoUpdate:!0,minDate:f}),this.lastCheckInDate!=this.model.checkInDate&&$namespace.Analytics.trackEvent("ho_event_searchWidget","CheckIn",this.model.checkInDate),this.lastCheckInDate=this.model.checkInDate,$namespace.TabOrder.updatePageTabOrder()):(this.checkInDate=null,this.model.checkInDate="",this.ui.checkOutDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),
suspendAutoUpdate:!0}));g&&!g.isPastDate?(this.ui.checkOutDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.checkOutDate.datepicker("setDate",g.date),this.ui.checkOutDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.checkOutDate=$namespace.DateUtil.getDateAsString(g.date),this.checkOutDate={className:"return",date:g.date},this.lastCheckOutDate!=this.model.checkOutDate&&$namespace.Analytics.trackEvent("ho_event_searchWidget","CheckOut",
this.model.checkOutDate),this.lastCheckOutDate=this.model.checkOutDate):(this.model.checkOutDate="",this.checkOutDate=null);this.checkInDate&&this.checkOutDate?(this.model.numberOfNights=$namespace.DateUtil.getDifferenceInDays(this.checkInDate.date,this.checkOutDate.date),1>this.model.numberOfNights?(this.showCheckInAfterCheckOutError(a),b=!1):30<this.model.numberOfNights&&(this.showStayTooLongError(a),b=!1)):(this.checkInDate||!d.length&&a||(this.showInvalidCheckInDate(a),b=!1),this.checkOutDate||
!e.length&&a||(this.showInvalidCheckOutDate(a),b=!1));return b},showInvalidCheckInDate:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#checkInDateWidget"+this.suffix]=e.prefixError(d.HOBE_INVALID_CHECKIN.translatedText);utils.showErrors(b);a||$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.HOBE_INVALID_CHECKIN.sourceText))},showInvalidCheckOutDate:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#checkOutDateWidget"+
this.suffix]=e.prefixError(d.HOBE_INVALID_CHECKOUT.translatedText);utils.showErrors(b);a||$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.HOBE_INVALID_CHECKOUT.sourceText))},showCheckInAfterCheckOutError:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#hotelWidgetDates"+this.suffix]=e.prefixError(d.HOBE_DATE_TIME_ERROR.translatedText);b["#checkInDateWidget"+this.suffix]=b["#checkOutDateWidget"+this.suffix]="";utils.showErrors(b);a||
$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.HOBE_DATE_TIME_ERROR.sourceText))},showStayTooLongError:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#hotelWidgetDates"+this.suffix]=e.prefixError(d.HOBE_DATE_RANGE_ERROR.translatedText);b["#checkInDateWidget"+this.suffix]=b["#checkOutDateWidget"+this.suffix]="";utils.showErrors(b);a||$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.HOBE_DATE_RANGE_ERROR.sourceText))},
getRequiredFields:function(a){var b=[this.ui.destination,this.ui.checkInDate,this.ui.checkOutDate];a=this.ui.form.find('.hobe-child-age-select[modal="'+(this.modal?"true":"false")+'"]');this.ui.destination.val();a.length&&a.each(function(a,e){b.push(e)});return b},setRoomLayout:function(a){var b=this.model.rooms,d=utils.Breakpoint.isMobile();$('DIV[data-hook^="multichild-expansion-modal"]').remove();var e=$namespace.Templates["multiroom_template_hobe"+this.suffix];this.modal?($('DIV[data-hook^="multiroom-expansion-modal"][data-clone]').remove(),
d?this.ui.expansionContainer.attr("data-room",1):this.ui.expansionContainer.removeAttr("data-room")):this.ui.expansionContainer.removeAttr("data-room");if(1===b.length&&0==b[0].numberOfChildren)this.module.el.hasClass("expand-multiroom-hobe")&&(this.module.el.removeClass("expand-multiroom-hobe"),this.ui.expansionContainer.html(this.ui.expansionHTML)),this.ui.form.find('.single-adult-select[data-room="1"][modal="'+(this.modal?"true":"false")+'"]').val(b[0].numberOfAdults),this.ui.form.find('.single-child-select[data-room="1"][modal="'+
(this.modal?"true":"false")+'"]').val(b[0].numberOfChildren);else{this.module.el.addClass("expand-multiroom-hobe");this.ui.expansionContainer.empty();for(var f=0;f<b.length;f++){var g=b[f],h=$(e({index:g.roomNumber}));if(this.modal&&d)if(0==f)this.ui.expansionContainer.append(h);else{var k=$('DIV[data-hook="multichild-expansion-modal"][data-room="'+f+'"]').last();k.length||(k=$('DIV[data-hook="multiroom-expansion-modal"][data-room="'+f+'"]').last());k.length&&this.ui.expansionContainer.clone().attr({"data-room":g.roomNumber,
"data-clone":!0}).empty().append(h).insertAfter(k)}else this.ui.expansionContainer.append(h);h.find('.mr-adults-select[data-room="'+g.roomNumber+'"][modal="'+(this.modal?"true":"false")+'"]').val(g.numberOfAdults).find("option[value="+g.numberOfAdults+"]").attr("selected",!0).siblings().removeAttr("selected");h.find('.mr-children-select[data-room="'+g.roomNumber+'"][modal="'+(this.modal?"true":"false")+'"]').val(g.numberOfChildren).find("option[value="+g.numberOfChildren+"]").attr("selected",!0).siblings().removeAttr("selected");
this.setRoomChildLayout(g,1)}}if(a&&1===b.length){var l="#children_room_1_hobe_widget"+this.suffix+" button";setTimeout(function(){$(l).focus()},1)}this.initFormItems();this.resize()},setRoomChildLayout:function(a){if(a){var b=utils.Breakpoint.isMobile(),d=$namespace.Templates["multichild_template_hobe"+this.suffix],e=null,f=null;this.modal&&(e=$namespace.Templates["additional_multichild_template_hobe"+this.suffix],f=$namespace.Templates["additional_multichild_template_mobile_hobe"+this.suffix]);
var g=$.hook("hobe_child_expansion_"+a.roomNumber+this.suffix,this.ui.expansionContainer),h=$.hook("hobe_additional_child_expansion_"+a.roomNumber+this.suffix,this.ui.expansionContainer);$('DIV[data-hook="multichild-expansion-modal"][data-room="'+a.roomNumber+'"]').remove();if(g){g.empty();h.length&&h.empty();for(var k,l=0,p=1;l<a.numberOfChildren;l++,p++){var q=a.childrenAges[l];if(this.modal&&b){k=$(f({roomIndex:a.roomNumber,index:p}));var r=this.ui.expansionContainer.clone().empty().attr({"data-hook":"multichild-expansion-modal",
"data-room":a.roomNumber,"data-child":p,"data-clone":!0}).append(k);if(1==a.roomNumber&&1==p)r.insertAfter(this.ui.expansionContainer);else{var v=0==l?$('DIV[data-hook="multiroom-expansion-modal"][data-room="'+a.roomNumber+'"]'):$('DIV[data-hook="multichild-expansion-modal"][data-room="'+a.roomNumber+'"][data-child="'+l+'"]');r.insertAfter(v)}}else this.modal?0<l&&h.length&&e?(k=$(e({roomIndex:a.roomNumber,index:p})),h.append(k)):(k=$(d({roomIndex:a.roomNumber,index:p})),b?(r=g.parent().empty(),r.clone().attr("data-hook",
"hobe_child_age_expansion_"+a.roomNumber+this.suffix).insertAfter(r).append(k)):g.append(k)):(k=$(d({roomIndex:a.roomNumber,index:p})),g.append(k));k.find('.hobe-child-age-select[data-room="'+a.roomNumber+'"][data-child="'+p+'"][modal="'+(this.modal?"true":"false")+'"]').val(q)}1==arguments.length&&this.initFormItems()}}},resize:function(){if(this.modal){var a=$('DIV[data-hook="multiroom-expansion-modal"]').find("DIV.row.fourths-lg");utils.Breakpoint.isMobile()?a.addClass("halves"):a.removeClass("halves")}var b=
$(this.el);a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;var d=b.find('INPUT[id="checkInDateWidget'+this.suffix+'"]');b=b.find('INPUT[id="checkOutDateWidget'+this.suffix+'"]');d.prop("readonly",a);b.prop("readonly",a);d[0].onselectstart=a?b[0].onselectstart=function(){return!1}:b[0].onselectstart=null},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),
d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a){var d=a.numberOfChildren;if(d<b)for(a.numberOfChildren=b;d<b;)d++,a.childrenAges.push(-1);else for(;d>b;)d--,a.numberOfChildren--,a.childrenAges.splice(d,1)}},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({roomNumber:b.length+
1,numberOfAdults:2,numberOfChildren:0,childrenAges:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "numberOfAdults":a.numberOfAdults=parseInt(d);break;case "numberOfChildren":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){a&&a.numberOfChildren>b&&a.childrenAges[b]&&(a.childrenAges[b]=parseInt(e))},_onCheckInDateChange:function(a,b,d){this.validateDates();this.checkInDate&&(a=[this.checkInDate],this.checkOutDate&&a.push(this.checkOutDate),
this.ui.checkInDate.selectDays(a,!0),this.ui.checkOutDate.selectDays(a))},_onCheckOutDateChange:function(a,b,d){this.validateDates();this.checkOutDate&&(a=[this.checkOutDate],this.checkInDate&&a.unshift(this.checkInDate),this.ui.checkInDate.selectDays(a),this.ui.checkOutDate.selectDays(a,!0))},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();$namespace.Analytics.trackEvent("ho_event_searchWidget","Rooms",a);$namespace.TabOrder.updatePageTabOrder()},
_onChildrenChange:function(a){a=+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a);$namespace.TabOrder.updatePageTabOrder()},_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].numberOfAdults=a;$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a)},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);
this.updateRoomProperty(b,"numberOfChildren",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a)},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"numberOfAdults",a);$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a)},_onChildAgeChange:function(a){a=
$(a.currentTarget);var b=a.attr("id"),d=a.parent().attr("id");this.clearErrors([b,b+"_button",d]);b=+a.val();d=+a.attr("data-room");a=+a.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,a,"childrenAges",b)},_onLocationSelect:function(a,b){this.model.locationName=encodeURIComponent(a.title);this.model.latitude="undefined"==typeof a.latitude?"":a.latitude;this.model.longitude="undefined"==typeof a.longitude?"":a.longitude;this.model.cityCode="undefined"==typeof a.cityCode?"":a.cityCode;
$namespace.Analytics.trackEvent("ho_event_searchWidget","Destination",decodeURIComponent(this.model.locationName));this.clearError("#hotelLocationTextWidget"+this.suffix)},_onLocationBlur:function(a){a=$(a.currentTarget);if(!this.suspendValidation){this.clearError("#hotelLocationTextWidget"+this.suffix);var b={},d=$namespace;a.val().length&&3>a.val().length?(b["#hotelLocationTextWidget"+this.suffix]=d.MessageUtil.prefixError(this.translationTexts.HOBE_SEARCH_MIN_LENGTH),utils.showErrors(b)):a.val().length&&
!this.ui.destination.hasValidSelection()&&(b["#hotelLocationTextWidget"+this.suffix]=d.MessageUtil.prefixError(this.translationMessages.VP_INVALID_AIRPORT.translatedText),utils.showErrors(b))}},_onCloseModalClick:function(a){$('BUTTON[data-hook="modal-close"]:visible').click()},_onCloseMouseDown:function(){this.suspendValidation=!0;var a=function(a){return function(){a.suspendValidation=!1}}(this);window.setTimeout(a,300)},_onSubmit:function(a){if(this.validate()){$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,
JSON.stringify(this.model),0);for(var b=this.model.rooms.length,d=0,e=0,f=0;f<b;f++)d+=this.model.rooms[f].numberOfAdults,e+=this.model.rooms[f].numberOfChildren;f=decodeURIComponent(this.model.locationName)+"_"+this.model.checkInDate+"_"+this.model.checkOutDate+"_"+b+"_"+d+"_"+e;$namespace.Analytics.trackEvent("ho_event_searchWidget","Click",f);"true"==$('INPUT[id="searchModalAnalyticsFlag"]').val()&&(this.model.selectedHotelId?($namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City",
this.model.cityCode,this.model.selectedHotelId),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City_Depart_Date",this.model.cityCode+"_"+this.model.checkInDate,this.model.selectedHotelId),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.checkInDate+"_"+this.model.checkOutDate,this.model.selectedHotelId),$namespace.Analytics.trackEvent("ho_event_searchDetails_Modal_Offer","Click",this.model.selectedHotelId+"_"+this.model.checkInDate+
"_"+this.model.checkOutDate+"_"+b+"_"+d+"_"+e)):"IHG"==this.model.selectedBrandName.toUpperCase()?($namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City",decodeURIComponent(this.model.locationName),"IHG"),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City_Depart_Date",decodeURIComponent(this.model.locationName)+"_"+this.model.checkInDate,"IHG"),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.checkInDate+
"_"+this.model.checkOutDate,"IHG"),$namespace.Analytics.trackEvent("ho_event_searchDetails_Modal_Offer","Click","IHG_"+this.model.checkInDate+"_"+this.model.checkOutDate+"_"+b+"_"+d+"_"+e)):($namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City",decodeURIComponent(this.model.locationName),this.model.selectedBrandName),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_Destination_City_Depart_Date",decodeURIComponent(this.model.locationName)+"_"+this.model.checkInDate,
this.model.selectedBrandName),$namespace.Analytics.trackEvent("ho_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.checkInDate+"_"+this.model.checkOutDate,this.model.selectedBrandName),$namespace.Analytics.trackEvent("ho_event_searchDetails_Modal_Offer","Click",this.model.selectedBrandName+"_"+this.model.checkInDate+"_"+this.model.checkOutDate+"_"+b+"_"+d+"_"+e)));this.submitForm(this.model)}a.preventDefault()},submitForm:function(a){$namespace.Storage.set("hotels-search-form",a);$namespace.DomUtil.setElementLoadingMask(!0);
this.isSubmitting=!0;var b=!1;if(""!=a.selectedBrandName||""!=a.selectedChainCode||""!=a.selectedHotelId)b=!0;b=$namespace.GlobalConstants.RESPONSIVE_HOBE_RESULTS_PAGE_ENABLED?{hobesrp:"LOAD_SEARCH_HOTELS",fromOfferPage:b}:{hos:"SEARCH_HOTELS"};b.suppressOutput=!0;b.hobeHotelSearchInfo=JSON.stringify(a);a=function(a){return function(){var a=$namespace,b=a.SearchWidgetsModule.TranslationTexts.PRODUCT_SEARCH_NO_RESULTS_TITLE;this.message?(a.DomUtil.setElementLoadingMask(!1,1),a.MessageUtil.showMessage({type:1,
text:this.message.text,title:b}),a.Analytics.trackPageView("/er/errorCode/"+this.messageCode+","+a.MessageUtil.formatErrorMessageForAnalytics(this.message.text))):(/hotels/i.test(window.location.href)?a.Navigation.loadPage(_webLoc+"/Hotels/h="+a.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):a.Navigation.loadPage(_webLoc+"/h="+a.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS),a.Analytics.trackPageView("/ho/booking/searchResults"))}}(this);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(!0===$namespace.GlobalConstants.RESPONSIVE_HOBE_RESULTS_PAGE_ENABLED?
"hotelOnlySearchResultsActivity.act":"hotelOnlySearch.act",$.param(b),null,null,a,null,null)},close:function(){this.modal&&$("#hotel_offer_price_availability_modal").find("#ui-datepicker-div").remove()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.View.DpSearchWidgetView=Backbone.View.extend({el:"",ui:{},model:null,module:null,WIDGET_COOKIE_NAME:"HOTEL_SEARCH_WIDGET_VALUES",checkInDate:null,checkOutDate:null,events:{},initialize:function(a){a=$.extend({},a);this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.ui={};this.lastCheckOutDate=this.lastCheckInDate=this.checkOutDate=this.checkInDate=this.model=null;this.suspendValidation=!1;this.module=a.module;
this.suffix=(this.modal=a.modal||!1)?"-modal":"";this.translationTexts=a.translationTexts;this.translationMessages=a.translationMessages;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.$el=null;this.events={};this.events["change #numberOfRoomsHobeWidget"+this.suffix]="_onRoomsChange";this.events['change .single-child-select[modal="'+(this.modal?"true":"false")+'"]']="_onChildrenChange";this.events['change .single-adult-select[modal="'+(this.modal?"true":"false")+'"]']="_onAdultsChange";
this.events['change .mr-adults-select[modal="'+(this.modal?"true":"false")+'"]']="_onMultiAdultsChange";this.events['change .mr-children-select[modal="'+(this.modal?"true":"false")+'"]']="_onMultiChildrenChange";this.events['change .hobe-child-age-select[modal="'+(this.modal?"true":"false")+'"]']="_onChildAgeChange";this.events['click [data-hook="hotel_search_submit'+this.suffix+'"]']="_onSubmit";this.events['click [data-hook="hotel-close-button'+this.suffix+'"]']="_onCloseModalClick";this.events['mousedown [data-hook="hotel-close-button'+
this.suffix+'"]']="_onCloseMouseDown";this.events["change select.infantSeatSelect"]="_onChildSeatChange";this.setElement("#search_hotels_view"+this.suffix);this.module&&this.module.initElement&&this.module.initElement();this.undelegateEvents();this.ui.form=$("#search_hotels_form"+this.suffix);this.ui.submitButton=$.hook("hotel_search_submit"+this.suffix,this.el);this.ui.expansionContainer=$.hook("multiroom-expansion"+this.suffix,this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();var b=
$namespace.Config.hotelUtilApiKey;this.initElements();this.searchModalAnalytics="true"==$('INPUT[id="searchModalAnalyticsFlag"]').val();this.createModel();this.modal||this.loadValuesFromModel();this._loadServiceClassesByDestinationCode(this.model.departureLocationName);this.hotelFlightCarTabEnable=$('INPUT[id="hotelFlightCarEnableFlag"]').val();this.ui.destination=new $namespace.Widgets.DataListWidget(this.ui.form.find("#hobe_destination_widget"+this.suffix),{url:$namespace.GlobalConstants.API_CONNECT_URL+
"/api/hotels/dynamicLocations",headers:{apiKey:b,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:utils.parseDynamicLocations,noResultsText:this.translationTexts.NO_LOCATIONS_ERROR_MESSAGE,showImages:!0,useGoogleAPI:!0,onSelect:$.proxy(this._onLocationSelect,this),onLocationBlur:$.proxy(this._onLocationBlur,this)});this.modal&&"undefined"!=typeof a.offerSearchInfo&&(this.model.locationName=a.offerSearchInfo.location||"",this.model.latitude=a.offerSearchInfo.latitude||"",this.model.longitude=
a.offerSearchInfo.longitude||"",this.model.country=a.offerSearchInfo.country||"",this.model.cityCode=a.offerSearchInfo.cityCode||"",this.model.city=a.offerSearchInfo.city||"");this.validateDestinationField();var d=this,e=$namespace,f=e.DateUtil;a=function(a,b){if(d.modal){var e=$("#search_hotels_view-modal");750>e.height()&&e.height(750)}a=$(a);a=/checkIn/.test(a.attr("id"));b.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"return"));
d.setCheckOutDateCalendarDisplayMonth()};b=function(a){var b=/checkIn/.test($(this).attr("id"));b=d.ui.form.find("#"+(b?"checkOutDateWidget":"checkInDateWidget")+d.suffix).datepicker("getDate");b=null===b||0!=f.getDifferenceInDays(a,b)?"":"date-highlight";var g=e.SearchWidgetsModule.getAccessibleDateLabel(a);null!=d.checkInDate&&0==f.getDifferenceInDays(a,d.checkInDate.date)?g=e.TranslationUtil.replaceParameters(e.SearchWidgetsModule.TranslationTexts.CHECK_IN_DATE_SELECTED_LABEL,{date:g}):null!=d.checkOutDate&&
0==f.getDifferenceInDays(a,d.checkOutDate.date)&&(g=e.TranslationUtil.replaceParameters(e.SearchWidgetsModule.TranslationTexts.CHECK_OUT_DATE_SELECTED_LABEL,{date:g}));a=e.DateUtil.enhanceDateStringReadability(g);return[!0,b,g,a]};var g=function(a,b){d.validateDates()},h=e.DateUtil.getDateDaysFromToday(0),k=e.DateUtil.getDateDaysFromToday(1);this.checkInDate&&(k=e.DateUtil.addDaysToDate(this.checkInDate.date,1));this.ui.checkInDate=this.ui.form.find("#checkInDateWidget"+this.suffix).datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),beforeShow:a,beforeShowDay:b,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:e.Config.DAY_SHORT_NAMES,monthNames:e.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:e.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:e.SearchWidgetsModule.TranslationTexts.CHECK_IN_DATE_CALENDAR_LABEL,prevText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.checkOutDate=this.ui.form.find("#checkOutDateWidget"+this.suffix).datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:a,beforeShowDay:b,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:e.Config.DAY_SHORT_NAMES,monthNames:e.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:e.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:e.SearchWidgetsModule.TranslationTexts.CHECK_OUT_DATE_CALENDAR_LABEL,
prevText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:e.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON,alignRight:!0});a=this.ui.form.find("#checkInDateWidget"+this.suffix+", #checkOutDateWidget"+this.suffix);this.floatPlaceholders=[];a.each(function(a,b){d.floatPlaceholders.push(new $namespace.FloatPlaceholder(b))});a.on("blur",function(){$(this).datepicker("widget").is(":visible")||d.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=
this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),e.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#search_hotels_view div.date-widget, #dpdeals_offer_price_availability_modal div.date-widget").addClass("ctc-jqui");
this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#number_of_rooms_hobe_widget"+this.suffix),{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length)for(a=parseInt(this.ui.numberOfRooms.val()),b=0,g=1;b<a;b++,g++){if(this.modal&&this.ui.form.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]').val("2"),h=this.ui.form.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]'),h.length&&(this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),
{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="childrenInRoomForHobeWidget_'+g+this.suffix+'"]').parent(),{taborder:"document"})),h=parseInt(this.model.rooms[b].children.length),0<h)){k=0;for(var l=1;k<h;k++,l++){var p=this.ui.form.find('SELECT[id="hotelChildAgeForWidget_'+g+"_"+l+this.suffix+'"]').parent();new $namespace.Widgets.SelectWidget(p,{taborder:"document"})}}}else this.modal?this.ui.adults.push((new $namespace.Widgets.SelectWidget($("#adults_room_1_hobe_widget"+
this.suffix),{taborder:"document"})).val("2")):this.ui.adults.push(new $namespace.Widgets.SelectWidget($("#adults_room_1_hobe_widget"+this.suffix),{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget($("#children_room_1_hobe_widget"+this.suffix),{taborder:"document"}));$(window).on("resize orientationchange",function(){var a=e.SearchWidgetsModule.getWindowDimensions();if(d.win.height!=a.height||d.win.width!=a.width)d.ui.form.find("#checkInDateWidget"+d.suffix+", #checkOutDateWidget"+
d.suffix).datepicker("hide"),d.win=a;d.resize()});a=this.$el.find("#modalDepartureCityText");b=a.val();_.isEmpty(b)||(a={value:a.attr("data-departure-city-code"),title:b},this._onDepartureCitySelect(a,this));"HF"==$("#defaultDPTab").val()&&($("#dpdeals_Rental_Car_Checkbox").click(),$("#dpdealsModalAgeCheckboxSpan").hide());this.delegateEvents();this.resize();$namespace.TabOrder.updatePageTabOrder()},initElements:function(){this.flightItineraryBlock=this.$("#flightItineraryBlock");this.departureCityText=
this.$("#modalDepartureCityText");this.departureOutboundRoundtripSpan=this.$("#departureOutboundRoundtripSpan");this.departureInboundRoundtripSpan=this.$("#departureInboundRoundtripSpan");this.departingCityTGridSectionLastSection=this.$("#tGridSection-last");this.descriptionNumberOfNights=this.$(".description-number-of-nights");this.descriptionOvernightRail=this.$(".description-overnight-rail");var a=$namespace.DomUtil.readCookie("Csrf-token");this.datalistDepartureCity=new $namespace.Widgets.DataListWidget(this.$("#dpdeals_input_departure_city"),
{url:"searchHelper.act",parser:utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureCitySelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:this.transformer,noResultsText:$namespace.SearchWidgetsModule.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});this.ui.serviceClass=new $namespace.Widgets.SelectWidget(this.ui.form.find("#select_service_class"),{taborder:"document"})},
transformer:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},setCheckOutDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.checkInDate&&this.checkOutDate?(b=this.checkOutDate.date.getMonth(),a=this.checkOutDate.date.getFullYear(),this.checkInDate.date.getTime()>=
this.checkOutDate.date.getTime()&&(b=this.checkInDate.date.getMonth(),a=this.checkInDate.date.getFullYear())):this.checkInDate?(b=this.checkInDate.date.getMonth(),a=this.checkInDate.date.getFullYear()):this.checkOutDate&&(b=this.checkOutDate.date.getMonth(),a=this.checkOutDate.date.getFullYear());var d=this.ui.checkOutDate.val();this.ui.checkOutDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.checkOutDate.val(d)},createModel:function(){this.model={locationName:"",
city:"",latitude:"",longitude:"",departcityName:"",serviceClass:"",numberOfNights:0,checkInDate:"",checkOutDate:"",selectedHotelId:"",selectedChainCode:"",selectedBrandName:"",rooms:[{numberOfAdults:2,children:[],roomNumber:1}]};if(!this.modal){var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);if(a){var b=null;try{b=JSON.parse(a)}catch(d){}b&&(this.model=b,this.lastCheckInDate=b.checkInDate,this.checkInDate={date:$namespace.DateUtil.getDateFromString(b.checkInDate),className:"departure"},
this.lastCheckOutDate=b.checkOutDate,this.checkOutDate={date:$namespace.DateUtil.getDateFromString(b.checkOutDate),className:"return"})}}},loadValuesFromModel:function(){if(this.model){var a=$(this.el);a.find('INPUT[id="hotelLocationTextWidget'+this.suffix+'"]').val(decodeURIComponent(this.model.locationName));a.find('INPUT[id="modalDepartureCityText"]').val(decodeURIComponent(this.model.departcityName));this.ui.form.find('SELECT[id="modalServiceClassSelect"]').val(this.model.serviceClass);this.model.selectedChainCode=
"";this.model.selectedBrandName="";this.model.selectedHotelId="";this.model.city=this.model.city.replace(/<comma>/gi,",");var b=$namespace.DateUtil.reformatDateString(this.model.checkInDate,this.defaultDateFormat,this.localeDateFormat),d=$namespace.DateUtil.reformatDateString(this.model.checkOutDate,this.defaultDateFormat,this.localeDateFormat);a.find('INPUT[id="checkInDateWidget'+this.suffix+'"]').val(b);a.find('INPUT[id="checkOutDateWidget'+this.suffix+'"]').val(d);b=this.model.rooms?this.model.rooms.length:
0;d=this.model.rooms;a.find('SELECT[id="numberOfRoomsHobeWidget'+this.suffix+'"]').val(b).find("option[value="+b+"]").attr("selected",!0).siblings().removeAttr("selected");var e=$namespace.Templates["multiroom_template_hobe"+this.suffix];if(1==b&&0==d[0].children.length)a.find('SELECT[id="adultsInRoomForHobeWidget_1'+this.suffix+'"]').val(d[0].numberOfAdults).find("option[value="+d[0].numberOfAdults+"]").attr("selected",!0).siblings().removeAttr("selected"),a.find('SELECT[id="childrenInRoomForHobeWidget_1'+
this.suffix+'"]').val(d[0].children.length).find("option[value=0]").attr("selected",!0).siblings().removeAttr("selected");else{this.ui.expansionContainer.empty();this.module.el.addClass("expand-multiroom-hobe");for(var f=0,g=1;f<b;f++,g++){var h=$(e({index:g}));this.ui.expansionContainer.append(h);a.find('SELECT[id="adultsInRoomForHobeWidget_'+g+this.suffix+'"]').val(d[f].numberOfAdults).find("option[value="+d[f].numberOfAdults+"]").attr("selected",!0).siblings().removeAttr("selected");a.find('SELECT[id="childrenInRoomForHobeWidget_'+
g+this.suffix+'"]').val(d[f].children.length).find("option[value="+d[f].children.length+"]").attr("selected",!0).siblings().removeAttr("selected");var k=$namespace.Templates["multichild_template_hobe"+this.suffix],l=$.hook("hobe_child_expansion_"+g+this.suffix,this.ui.expansionContainer);if(l){l.empty();for(var p=parseInt(d[f].children.length),q=0,r=1;q<p;q++,r++){h=$(k({roomIndex:g,index:r}));l.append(h);var v=this.model.rooms[f].childrenAges[q];h.find('.hobe-child-age-select[modal="'+(this.modal?
"true":"false")+'"][data-room="'+g+'"][data-child="'+r+'"]').val(v).find("option[value="+v+"]").attr("selected",!0).siblings().removeAttr("selected")}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#hotelLocationTextWidget"+this.suffix);a.push("#checkInDateWidget"+this.suffix);a.push("#checkOutDateWidget"+this.suffix);a.push("#hotelWidgetDates"+this.suffix);for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=
0,f=1;e<this.model.rooms[b].children.length;e++,f++)a.push("#hotelChildAgeForWidget_"+d+"_"+f+this.suffix),a.push("#hotelChildAgeForWidget_"+d+"_"+f+this.suffix+"_button")}for(b=1;b<=this.model.rooms.length;b++)d="adultsInRoomForHobeWidget_"+b+"Div-modal",e="adultsInRoomForHobeWidget_"+b+"-modal",f="childrenInRoomForHobeWidget_"+b+"-modal",a.push(e+"_button"),a.push(e),a.push(f+"_button"),a.push(f),a.push(d);utils.clearErrors(a,this.ui.form)},validate:function(){this.clearErrors();var a=!0,b={},d=
this.translationMessages,e=$namespace,f=e.MessageUtil,g=$("#hotelLocationTextWidget-modal").val();"Invalid destination"==this.model.locationName||""==g?(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(d.VP_DESTINATION_REQUIRED.translatedText),e.Analytics.trackPageView("/er/errorCode/"+f.formatErrorMessageForAnalytics(d.VP_DESTINATION_REQUIRED.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Destination not selected"}),a=!1):3>this.ui.destination.input.val().length?
(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(this.translationTexts.HOBE_SEARCH_MIN_LENGTH),a=!1):this.ui.destination.hasValidSelection()||(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(d.VP_INVALID_AIRPORT.translatedText),a=!1);this.validateDates(!1)||(a=!1);g=$("#dpdeals_Include_Flight_Checkbox:checkbox:checked").length;""==$("#modalDepartureCityText").val()&&0<g&&(b["#modalDepartureCityText"]=f.prefixError(d.DP_DEALS_INVALID_AIRPORT.translatedText),e.Analytics.trackPageView("/er/errorCode/"+
f.formatErrorMessageForAnalytics(d.DP_DEALS_INVALID_AIRPORT.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Flight departure airport missing"}),a=!1);g=[];var h=[];e=this.model.rooms?this.model.rooms.length:0;for(var k=this.model.rooms,l=0;l<e;l++){var p=+k[l].children.length;g.push(p);for(var q=0;q<p;q++)h.push(k[l].children[q].age)}g=0;for(h=1;g<e;g++,h++)this.ui.form.find('SELECT.hobe-child-age-select[data-room="'+h+'"][modal="'+(this.modal?"true":
"false")+'"]').each(function(){var e=$(this);-1==e.val()&&(e.attr("id"),e=e.parent().attr("id"),b[e]=f.prefixError(d.VP_CHILD_AGE_REQUIRED.translatedText),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Child age not selected"}),a=!1)});this.hotelFlightCarTabEnable=$('INPUT[id="hotelFlightCarEnableFlag"]').val();"true"!==this.hotelFlightCarTabEnable||$('INPUT[id="dpdealsModalAgeCheckbox"]').prop("checked")||(b["#dpdealsModalAgeCheckboxlabel"]=f.prefixError(d.DP_DEALS_DRIVER_AGE_CHECKBOX_REQUIRED.translatedText),
$("#dpdealsModalAgeCheckboxSpan .checkbox-widget-element").addClass("dp-error"),a=!1);a||(utils.showErrors(b),utils.focusFirstErrorField(this.ui.form));return a},validateDates:function(a){var b=!0;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#checkInDateWidget"+this.suffix,"#checkOutDateWidget"+this.suffix,"#hotelWidgetDates"+this.suffix]);var d=this.ui.checkInDate.val(),e=this.ui.checkOutDate.val(),f=$namespace.DateUtil.isValidDateString(d,this.localeDateFormat),g=$namespace.DateUtil.isValidDateString(e,
this.localeDateFormat);f&&!f.isPastDate?(this.ui.checkInDate.datepicker("setDate",f.date),this.model.checkInDate=$namespace.DateUtil.getDateAsString(f.date),this.checkInDate={className:"departure",date:f.date},f=$namespace.DateUtil.addDaysToDate(f.date,1),this.ui.checkOutDate.datepicker("option",{suspendAutoUpdate:!0,minDate:f}),this.lastCheckInDate!=this.model.checkInDate&&$namespace.Analytics.trackEvent("dp_event_searchWidget","Depart",this.model.checkInDate),this.lastCheckInDate=this.model.checkInDate,
$namespace.TabOrder.updatePageTabOrder()):(this.checkInDate=null,this.model.checkInDate="",this.ui.checkOutDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));g&&!g.isPastDate?(this.ui.checkOutDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.checkOutDate.datepicker("setDate",g.date),this.ui.checkOutDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.checkOutDate=$namespace.DateUtil.getDateAsString(g.date),
this.checkOutDate={className:"return",date:g.date},this.lastCheckOutDate!=this.model.checkOutDate&&$namespace.Analytics.trackEvent("dp_event_searchWidget","Return",this.model.checkOutDate),this.lastCheckOutDate=this.model.checkOutDate):(this.model.checkOutDate="",this.checkOutDate=null);this.checkInDate&&this.checkOutDate?(this.model.numberOfNights=$namespace.DateUtil.getDifferenceInDays(this.checkInDate.date,this.checkOutDate.date),1>this.model.numberOfNights?(this.showCheckInAfterCheckOutError(a),
b=!1):30<this.model.numberOfNights&&(this.showStayTooLongError(a),b=!1)):(this.checkInDate||!d.length&&a||(this.showInvalidCheckInDate(a),b=!1),this.checkOutDate||!e.length&&a||(this.showInvalidCheckOutDate(a),b=!1));return b},showInvalidCheckInDate:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#checkInDateWidget"+this.suffix]=e.prefixError(d.VP_INVALID_DEPARTURE.translatedText);utils.showErrors(b);a||($namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.VP_INVALID_DEPARTURE.sourceText)),
$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",v12:"search",v13:"Invalid departure date"}))},showInvalidCheckOutDate:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#checkOutDateWidget"+this.suffix]=e.prefixError(d.VP_INVALID_RETURN.translatedText);utils.showErrors(b);a||($namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.VP_INVALID_RETURN.sourceText)),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"13",
v12:"search",v13:"Invalid return date"}))},showCheckInAfterCheckOutError:function(a){var b={},d=this.translationMessages,e=$namespace.MessageUtil;b["#hotelWidgetDates"+this.suffix]=e.prefixError(d.VP_DATE_TIME_ERROR.translatedText);b["#checkInDateWidget"+this.suffix]=b["#checkOutDateWidget"+this.suffix]="";utils.showErrors(b);a||$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.VP_DATE_TIME_ERROR.sourceText))},showStayTooLongError:function(a){var b={},d=this.translationMessages,
e=$namespace.MessageUtil;b["#hotelWidgetDates"+this.suffix]=e.prefixError(d.HOBE_DATE_RANGE_ERROR.translatedText);b["#checkInDateWidget"+this.suffix]=b["#checkOutDateWidget"+this.suffix]="";utils.showErrors(b);a||$namespace.Analytics.trackPageView("/er/errorCode/"+e.formatErrorMessageForAnalytics(d.HOBE_DATE_RANGE_ERROR.sourceText))},getRequiredFields:function(a){var b=[this.ui.destination,this.ui.checkInDate,this.ui.checkOutDate];a=this.ui.form.find('.hobe-child-age-select[modal="'+(this.modal?"true":
"false")+'"]');this.ui.destination.val();a.length&&a.each(function(a,e){b.push(e)});return b},setRoomLayout:function(a){for(var b=this.model.rooms,d=utils.Breakpoint.isMobile(),e=this.model.rooms.length,f=[],g=[],h=[],k=[],l=0;l<e;l++){var p=this.model.rooms[l];f.push(p.numberOfAdults);g.push(p.children.length);for(var q=0;q<p.children.length;q++)h.push(p.children[q].age),k.push(p.children[q].seat)}e=0;$('DIV[data-hook^="multichild-expansion-modal"]').remove();f=$namespace.Templates["multiroom_template_hobe"+
this.suffix];this.modal?($('DIV[data-hook^="multiroom-expansion-modal"][data-clone]').remove(),d?this.ui.expansionContainer.attr("data-room",1):this.ui.expansionContainer.removeAttr("data-room")):this.ui.expansionContainer.removeAttr("data-room");if(1===b.length&&0==b[0].children.length)this.module.el.hasClass("expand-multiroom-hobe")&&(this.module.el.removeClass("expand-multiroom-hobe"),this.ui.expansionContainer.html(this.ui.expansionHTML)),this.ui.form.find('.single-adult-select[data-room="1"][modal="'+
(this.modal?"true":"false")+'"]').val(b[0].numberOfAdults),this.ui.form.find('.single-child-select[data-room="1"][modal="'+(this.modal?"true":"false")+'"]').val(b[0].children[0].number);else for(this.module.el.addClass("expand-multiroom-hobe"),this.ui.expansionContainer.empty(),l=0;l<b.length;l++){p=b[l];g=$(f({index:p.roomNumber}));this.modal&&d?0==l?this.ui.expansionContainer.append(g):(q=$('DIV[data-hook="multichild-expansion-modal"][data-room="'+l+'"]').last(),q.length||(q=$('DIV[data-hook="multiroom-expansion-modal"][data-room="'+
l+'"]').last()),q.length&&this.ui.expansionContainer.clone().attr({"data-room":p.roomNumber,"data-clone":!0}).empty().append(g).insertAfter(q)):this.ui.expansionContainer.append(g);q=h[e];var r=k[e];g.find('.mr-adults-select[data-room="'+p.roomNumber+'"][modal="'+(this.modal?"true":"false")+'"]').val(p.numberOfAdults).find("option[value="+p.numberOfAdults+"]").attr("selected",!0).siblings().removeAttr("selected");g.find('.mr-children-select[data-room="'+p.roomNumber+'"][modal="'+(this.modal?"true":
"false")+'"]').val(p.children.length).find("option[value="+p.children.length+"]").attr("selected",!0).siblings().removeAttr("selected");g.find('.infantSeatSelect[data-room="'+p.roomNumber+'"][data-child="'+p.childNumber+'"]').val(r);0>q||1<q?g.find('.col-child-seat[data-room="'+p.roomNumber+'"][data-child="'+p.childNumber+'"]').hide():g.find('.col-child-seat[data-room="'+p.roomNumber+'"][data-child="'+p.childNumber+'"]').show();this.setRoomChildLayout(p,1);e++}if(a&&1===b.length){var v="#children_room_1_hobe_widget"+
this.suffix+" button";setTimeout(function(){$(v).focus()},1)}this.initFormItems();this.resize()},setRoomChildLayout:function(a){if(a){var b=a.children,d=utils.Breakpoint.isMobile(),e=$namespace.Templates["multichild_template_hobe"+this.suffix],f=null,g=null;this.modal&&(f=$namespace.Templates["additional_multichild_template_hobe"+this.suffix],g=$namespace.Templates["additional_multichild_template_mobile_hobe"+this.suffix]);var h=$.hook("hobe_child_expansion_"+a.roomNumber+this.suffix,this.ui.expansionContainer),
k=$.hook("hobe_additional_child_expansion_"+a.roomNumber+this.suffix,this.ui.expansionContainer);$('DIV[data-hook="multichild-expansion-modal"][data-room="'+a.roomNumber+'"]').remove();if(h){h.empty();k.length&&k.empty();for(var l,p=0,q=1;p<b.length;p++,q++){var r=a.children[p];if(this.modal&&d){l=$(g({roomIndex:a.roomNumber,index:q}));var v=this.ui.expansionContainer.clone().empty().attr({"data-hook":"multichild-expansion-modal","data-room":a.roomNumber,"data-child":q,"data-clone":!0}).append(l);
if(1==a.roomNumber&&1==q)v.insertAfter(this.ui.expansionContainer);else{var n=0==p?$('DIV[data-hook="multiroom-expansion-modal"][data-room="'+a.roomNumber+'"]'):$('DIV[data-hook="multichild-expansion-modal"][data-room="'+a.roomNumber+'"][data-child="'+p+'"]');v.insertAfter(n)}}else this.modal?0<p&&k.length&&f?(l=$(f({roomIndex:a.roomNumber,index:q})),k.append(l)):(l=$(e({roomIndex:a.roomNumber,index:q})),d?(v=h.parent().empty(),v.clone().attr("data-hook","hobe_child_age_expansion_"+a.roomNumber+this.suffix).insertAfter(v).append(l)):
h.append(l)):(l=$(e({roomIndex:a.roomNumber,index:q})),h.append(l));l.find('.hobe-child-age-select[data-room="'+a.roomNumber+'"][data-child="'+q+'"][modal="'+(this.modal?"true":"false")+'"]').val(r.age);l.find('.infantSeatSelect[data-room="'+a.roomNumber+'"][data-child="'+r.roomNumber+'"]').val(r.seat);0>r.age||1<r.age?l.find('.col-child-seat[data-room="'+a.roomNumber+'"][data-child="'+r.number+'"]').hide():l.find('.col-child-seat[data-room="'+a.roomNumber+'"][data-child="'+r.number+'"]').show()}1==
arguments.length&&this.initFormItems()}}},resize:function(){if(this.modal){var a=$('DIV[data-hook="multiroom-expansion-modal"]').find("DIV.row.fourths-lg");utils.Breakpoint.isMobile()?a.addClass("halves"):a.removeClass("halves")}var b=$(this.el);a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;var d=b.find('INPUT[id="checkInDateWidget'+this.suffix+'"]');b=b.find('INPUT[id="checkOutDateWidget'+this.suffix+'"]');d.prop("readonly",a);b.prop("readonly",a);d[0].onselectstart=a?b[0].onselectstart=
function(){return!1}:b[0].onselectstart=null},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,
a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({roomNumber:b.length+1,numberOfAdults:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "numberOfAdults":a.numberOfAdults=parseInt(d);break;case "numberOfChildren":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>
b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},_onCheckInDateChange:function(a,b,d){this.validateDates();this.checkInDate&&(a=[this.checkInDate],this.checkOutDate&&a.push(this.checkOutDate),this.ui.checkInDate.selectDays(a,!0),this.ui.checkOutDate.selectDays(a))},_onCheckOutDateChange:function(a,b,d){this.validateDates();this.checkOutDate&&(a=[this.checkOutDate],this.checkInDate&&a.unshift(this.checkInDate),this.ui.checkInDate.selectDays(a),this.ui.checkOutDate.selectDays(a,
!0))},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();this.validateAirfarePassengerCount();$namespace.Analytics.trackEvent("dp_event_searchWidget","Rooms",a);$namespace.TabOrder.updatePageTabOrder()},_onChildrenChange:function(a){a=+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);this.validateAirfarePassengerCount();$namespace.Analytics.trackEvent("dp_event_searchWidget","Children",a);$namespace.TabOrder.updatePageTabOrder()},
_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].numberOfAdults=a;this.validateAirfarePassengerCount();$namespace.Analytics.trackEvent("dp_event_searchWidget","Adults",a)},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"numberOfChildren",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);this.validateAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder();
$namespace.Analytics.trackEvent("dp_event_searchWidget","Children",a)},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"numberOfAdults",a);this.validateAirfarePassengerCount();$namespace.Analytics.trackEvent("dp_event_searchWidget","Adults",a);$namespace.TabOrder.updatePageTabOrder()},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,a+"_button",
d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder()},_onLocationSelect:function(a,b){this.model.cityCode="";switch(a.type){case "airport":this.model.cityCode=this.setDefaultVal(a.value,"");break;case "destination":this.model.cityCode=
this.setDefaultVal(a.cityCode,"");break;case "city":this.model.cityCode=this.setDefaultVal(a.cityCode,"");this.model.city=a.city+", "+a.state;break;case "zipCode":this.model.city=a.city+", "+a.state}this.model.locationName=encodeURIComponent(a.title);this.model.latitude="undefined"==typeof a.latitude?"":a.latitude;this.model.longitude="undefined"==typeof a.longitude?"":a.longitude;this.model.country="undefined"==typeof a.country?"":a.country;$namespace.Analytics.trackEvent("dp_event_searchWidget",
"Destination",decodeURIComponent(this.model.locationName));this.clearError("#hotelLocationTextWidget"+this.suffix)},_onLocationBlur:function(a){a=$(a.currentTarget);if(!this.suspendValidation){this.clearError("#hotelLocationTextWidget"+this.suffix);var b={},d=$namespace;a.val().length&&3>a.val().length?(b["#hotelLocationTextWidget"+this.suffix]=d.MessageUtil.prefixError(this.translationTexts.HOBE_SEARCH_MIN_LENGTH),utils.showErrors(b)):a.val().length&&!this.ui.destination.hasValidSelection()&&(b["#hotelLocationTextWidget"+
this.suffix]=d.MessageUtil.prefixError(this.translationMessages.VP_INVALID_AIRPORT.translatedText),utils.showErrors(b))}},_onCloseModalClick:function(a){$('BUTTON[data-hook="modal-close"]:visible').click()},_onCloseMouseDown:function(){this.suspendValidation=!0;var a=function(a){return function(){a.suspendValidation=!1}}(this);window.setTimeout(a,300)},_onSubmit:function(a){if(this.validate()){for(var b=this.model.rooms,d=0,e=[],f=[],g=[],h=[],k=0,l=0,p=0,q=0;q<b.length;q++){var r=b[q].numberOfAdults,
v=b[q].children.length;d+=r+v;e.push(r);l+=r;f.push(v);p+=v;for(r=0;r<v;r++)g.push(b[q].children[r].age),h.push(b[q].children[r].seat),1>=b[q].children[r].age&&k++}b={};b={locationName:this.model.locationName,city:this.model.city,cityCode:this.model.cityCode,latitude:this.model.latitude,longitude:this.model.longitude,country:this.model.country,departureDate:this.model.checkInDate,arrivalDate:this.model.checkOutDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.checkInDate.date,this.checkOutDate.date),
flightChecked:this.model.includeFlight,numberOfPassengers:d,hotelRooms:this.model.rooms.length,adults:e.join(","),children:f.join(","),childrenAges:g.join(","),childSeatFlags:h.join(","),serviceClass:this.model.serviceClass,departureCityCode:this.model.departureLocationCode,departureCity:this.model.departureLocationName,hotelIDs:$namespace.assestHotelIds,chainCode:$namespace.assestChainCode,brandCode:$namespace.assestBrandCode};g=this.model.rooms.length;h=$('INPUT[id="modalDepartureCityText"]').val();
g="<"+decodeURIComponent(this.model.locationName)+">,<"+this.model.checkInDate+">,<"+this.model.checkOutDate+">,<"+h+">,<"+g+">,<"+l+">,<"+p+">";this.searchModalAnalytics&&(this.adultsAndChildCounts=e.reduce(function(a,b){return a+b},0)+"_"+f.reduce(function(a,b){return a+b},0),this.packageId=document.URL.substring(document.URL.lastIndexOf("/")+1),$('INPUT[id="dpdeals_Rental_Car_Checkbox"]').prop("checked")?this.dpDealsOfferCarIncluded():this.dpDealsOfferNoCar());$namespace.Analytics.trackEvent("dp_event_searchWidget_Check_Availability",
a.currentTarget.formAction.substring(a.currentTarget.formAction.lastIndexOf("/")+1),g);$namespace.Analytics.track({vendor:"adobe",type:"event",events:"event7,event30="+b.hotelRooms+",event32="+d+",event33="+l+",event34="+p+",event35="+b.numberOfNights+",event36="+$namespace.DateUtil.getDifferenceInDays(this.checkInDate.date,this.checkOutDate.date)+",event37="+k,v34:decodeURIComponent(this.model.locationName),v35:b.cityCode,v37:b.departureDate,v38:b.numberOfNights,v39:$namespace.DateUtil.getDifferenceInDays(this.checkInDate.date,
this.checkOutDate.date),v40:l,v41:0==p?"0":p,v44:this.model.rooms.length,v61:b.multiCityPackagesRequested?"Yes":"No"});this.submitForm(b)}a.preventDefault()},dpDealsOfferCarIncluded:function(){$namespace.Analytics.trackEvent("dp/hfc_event_searchModal_Offer_Destination_City",this.model.cityCode,this.packageId);$namespace.Analytics.trackEvent("dp/hfc_event_searchModal_Offer_Destination_City_Depart_Date",this.model.cityCode+"_"+this.model.checkInDate,this.packageId);$namespace.Analytics.trackEvent("dp/hfc_event_searchModal_Offer_Destination_City_Departure_City",
this.model.cityCode+"_"+this.model.departureLocationCode,this.packageId);$namespace.Analytics.trackEvent("dp/hfc_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.checkInDate+"_"+this.model.checkOutDate,this.packageId);$namespace.Analytics.trackEvent("dp/hfc_event_searchDetails_Modal_Offer","Click",this.packageId+"_"+this.model.checkInDate+"_"+this.model.checkOutDate+"_"+this.model.departureLocationCode+"_"+this.model.rooms.length+"_"+this.adultsAndChildCounts)},dpDealsOfferNoCar:function(){$namespace.Analytics.trackEvent("dp/hf_event_searchModal_Offer_Destination_City",
this.model.cityCode,this.packageId);$namespace.Analytics.trackEvent("dp/hf_event_searchModal_Offer_Destination_City_Depart_Date",this.model.cityCode+"_"+this.model.checkInDate,this.packageId);$namespace.Analytics.trackEvent("dp/hf_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.checkInDate+"_"+this.model.checkOutDate,this.packageId);$namespace.Analytics.trackEvent("dp/hf_event_searchDetails_Modal_Offer","Click",this.packageId+"_"+this.model.checkInDate+"_"+this.model.checkOutDate+"_"+
this.model.rooms.length+"_"+this.adultsAndChildCounts)},submitForm:function(a){var b=this;this.model.locationName=this.model.locationName.replace(/,/g,"<comma>");this.model.city=this.model.city.replace(/,/g,"<comma>");var d=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.DomUtil.setElementLoadingMask(!0);this.isSubmitting=!0;var e=$namespace;var f=d?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";for(var g={domainCode:"",destination:a.locationName,
destinationCityCode:a.cityCode,latitude:a.latitude,longitude:a.longitude,country:a.country,travelStartDate:a.departureDate,travelEndDate:a.arrivalDate,numberOfNights:a.numberOfNights,rooms:[],travelerCount:a.numberOfPassengers,childSeatFlags:a.childSeatFlags,originAirports:[{airportName:a.departureCity,airportCode:a.departureCityCode}],destinationAirports:[],numberOfConnections:-1,flightServiceClass:a.serviceClass},h=a.adults.split(","),k=a.children.split(","),l=a.childrenAges.split(","),p=0,q=0;q<
a.hotelRooms;q++){var r=parseInt(k[q]);g.rooms[q]={roomNumber:q,adultCount:parseInt(h[q]),childCount:r,childAges:[]};r+=p;for(var v=g.rooms[q].childAges,n=0,t=p;t<r;n++)v[n]=l[t++],p++}f+="&dynamicSearchInfoJSON="+JSON.stringify(g);$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0);f=f+"&destinationType=city&cityCode="+a.cityCode;f+="&latitude="+a.latitude;f+="&country="+a.country;f+=
"&locationName="+a.locationName;f+="&city="+a.city;f+="&longitude="+a.longitude;$('INPUT[id="dpdeals_Rental_Car_Checkbox"]').prop("checked")?(f=f+"&fromHFC=true&dealsPage=true&brandCode="+a.brandCode,f+="&chainCode="+a.chainCode,f+="&hotelIDs="+a.hotelIDs,$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR,0)):(f=f+"&fromHotelPlusFlightSubTab=true&dealsPage=true&brandCode="+a.brandCode,
f+="&chainCode="+a.chainCode,f+="&hotelIDs="+a.hotelIDs,$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0));f+="&destination="+a.destination;f=""==$("#modalDepartureCityText").val()||"undefined"==$("#modalDepartureCityText").val()?f+"&flightChecked=false":f+"&flightChecked=true";f+="&arrivalDate="+a.arrivalDate;f+="&departureDate="+a.departureDate;f+="&numberOfNights="+a.numberOfNights;
f+="&numberOfPassengers="+a.numberOfPassengers;f+="&hotelRooms="+a.hotelRooms;f+="&adults="+a.adults;f+="&children="+a.children;f+="&childrenAges="+a.childrenAges;f+="&childSeatFlags="+a.childSeatFlags;f=f+"&fromWidget=true&fromMenu=false&serviceClass="+a.serviceClass;f+="&multiCityPackagesRequested="+a.multiCityPackagesRequested;f=f+"&suppressOutput=true&departureCity="+a.departureCity;f+="&departureCityCode="+a.departureCityCode;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(d?"vacationPackageSearch.act":
"vacationPackageFilteredSearchResults.act",f,null,null,function(d){var f=e.SearchWidgetsModule.TranslationTexts.PRODUCT_SEARCH_NO_RESULTS_TITLE;this.message?(b.model.isDpSub="true",$namespace.Analytics.trackEvent("dp_event_searchWidget","No results found",a.locationName.replace(/%2C/g,",").replace(/%20/g," ")),e.DomUtil.setElementLoadingMask(!1,1),e.MessageUtil.showMessage({type:1,text:this.message.text,title:f})):"HOBESearchResult"===d?/hotels/i.test(window.location.href)?e.Navigation.loadPage(_webLoc+
"/Hotels/h="+e.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):"MultiCityPackageSearchResult"===d?e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES):e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)},null,"")},_onDepartureCitySelect:function(a,b){this.model.departureLocationCode=a.value;this.model.departureLocationName=
$.trim(a.title);b=this.departingCityTGridSectionLastSection.attr("aria-label");try{b.substring(0,b.indexOf(", ")+2)}catch(d){}this.clearError("#modalDepartureCityText");this.model.departureLocationName=$.trim(a.title);this._loadServiceClassesByDestinationCode(this.model.departureLocationName)},_onDepartureCityBlur:function(a){this.clearError("#modalDepartureCityText");$("#isIncludeRoundtripFlight").val();$("#modalFlightType").val();this._loadServiceClassesByDestinationCode(this.model.departureLocationName);
a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=$namespace.SearchWidgetsModule.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(a)})):this.datalistDepartureCity.hasValidSelection()||$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(b.DP_DEALS_INVALID_AIRPORT.translatedText)})}},
_loadServiceClassesByDestinationCode:function(a){var b=this;a="sw=LOAD_SERVICE_CLASSES_BY_DESTINATION&destination="+a+("&serviceClass="+this.ui.serviceClass.val());$namespace.AjaxUtil.makeAjaxCall("searchWidget.act",a,null,"modalServiceClassSelect",function(a){a=JSON.parse(a);/^any$/i.test(a[0].value)||a.unshift({text:b.module.TranslationTexts.PLACEHOLDER_ANY_OPTION,value:"Any"});b.ui.serviceClass.replaceOptions(a)},"")},_onServiceClassChange:function(a){a=$(a.currentTarget).val();this.model.serviceClass=
a;""==this.model.isVpSub||"true"==this.model.isVpSub?$namespace.Analytics.trackEvent("vp_event_searchWidget","Class",a):(this.model.isDpSub="true",$namespace.Analytics.trackEvent("dp_event_searchWidget","Class",a))},validateAirfarePassengerCount:function(){var a=$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#hobe_passengers_per_room_div_1 #hobe_passengers_per_room_div_2 #adults_room_1_hobe_widget-modal #adults_room_2_hobe_widget-modal #children_room_1_hobe_widget-modal #children_room_2_hobe_widget-modal".split(" "));
if(9<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR,f="adults_room_"+b+"_hobe_widget-modal",g="children_room_"+b+"_hobe_widget-modal";d["hobe_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},getTotalPassengerCount:function(){for(var a=
0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].numberOfAdults,a+=this.model.rooms[b].children.length;return a},validateDestinationField:function(){var a=!0,b={},d=this.translationMessages,e=$namespace,f=e.MessageUtil;"Invalid destination"==this.model.locationName?(b["#hotelLocationTextWidget"+this.suffix]=f.prefixError(d.VP_INVALID_AIRPORT.translatedText),e.Analytics.trackPageView("/er/errorCode/"+f.formatErrorMessageForAnalytics(d.VP_DESTINATION_REQUIRED.sourceText)),a=!1):this.clearErrors();
a||(utils.showErrors(b),utils.focusFirstErrorField(this.ui.form))},setDefaultVal:function(a,b){return void 0===a?b:a},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},close:function(){this.modal&&$("#dpdeals_offer_price_availability_modal").find("#ui-datepicker-div").remove()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.View.Hotel2SearchWidgetView=Backbone.View.extend({el:"#search_hotels2_view",ui:{},cache:{},geolocationCoordinates:{lat:null,lng:null,string:null},WIDGET_COOKIE_NAME:"SEARCH_HOTELS2_VALUES",HOTEL_OFFER_PAGE_WIDGET_COOKIE_NAME:"HOTEL_SEARCH_WIDGET_VALUES",departDate:null,returnDate:null,lastDepartureDate:null,lastReturnDate:null,model:null,module:null,events:{"blur #hotelDestination":"_onLocationBlur","change #hotelFlightCheckboxWidget":"_onIncludeFlightChange","change #hotelServiceClassWidget":"_onServiceClassChange","change #hotelNumberOfRoomsWidget":"_onRoomsChange",
"change .single-child-select":"_onChildrenChange","change .single-adult-select":"_onAdultsChange","change .mr-adults-select":"_onMultiAdultsChange","change .mr-children-select":"_onMultiChildrenChange","change .child-age-select":"_onChildAgeChange","change .child-seat-select":"_onChildSeatChange","keydown #hotelDepartureCityTextWidget":"_onDepartureCityKeyDown","click #geolocation":"_onGeoClick","submit form":"_onSubmit",'click [data-hook="hotel_2_search_widget_submit"]':"_onSubmit","click #hotel-cross-sell":"_onHotelCrossSellClick"},
initialize:function(a){a=$.extend({},a);this.initialized=!1;this.module=a.module;this.regions=a.regions||{};$.hook("geolocation_wrapper").addClass("no-geolocation");this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.undelegateEvents();this.ui.form=$("#hotel_2_search_widget_form");this.ui.submitButton=$.hook("hotel_2_search_widget_submit",this.el);this.ui.form.find('INPUT[id="hotelDestination"]').val("");this.ui.expansionContainer=
$.hook("multiroom-expansion",this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.createModel();this.loadValuesFromModel();var b=this,d=$namespace,e=d.DateUtil;a=$namespace.Config.hotelUtilApiKey;var f=function(a,d){a=$(a);a=/departure/.test(a.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"return"));b.setReturnDateCalendarDisplayMonth()},g=
function(a){var f=/departure/.test($(this).attr("id"));f=$("#"+(f?"checkOutDateWidget":"checkInDateWidget")).datepicker("getDate");f=null===f||0!=e.getDifferenceInDays(a,f)?"":"date-highlight";var g=d.SearchWidgetsModule.getAccessibleDateLabel(a);null!=b.departureDate&&0==e.getDifferenceInDays(a,b.departureDate.date)?g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=b.returnDate&&0==e.getDifferenceInDays(a,b.returnDate.date)&&
(g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));a=d.DateUtil.enhanceDateStringReadability(g);return[!0,f,g,a]},h=function(a,d){b.validateDates()},k=d.DateUtil.getDateDaysFromToday(0),l=d.DateUtil.getDateDaysFromToday(1);this.departureDate&&(l=d.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.ui.form.find("#checkInDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),
beforeShow:f,beforeShowDay:g,inline:!0,minDate:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.CHECK_IN_DATE_CALENDAR_LABEL,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.returnDate=this.ui.form.find("#checkOutDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:f,beforeShowDay:g,minDate:l,minDateDefault:l,defaultDate:l,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:h,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.CHECK_OUT_DATE_CALENDAR_LABEL,
alignRight:!0,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});f=this.ui.form.find("#checkInDateWidget, #checkOutDateWidget");this.floatPlaceholders=[];f.each(function(a,d){b.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});g=this.ui.form.find("#hotelDepartureCityTextWidget");this.floatPlaceholders.push(new $namespace.FloatPlaceholder(g,!0));f.on("blur",function(){$(this).datepicker("widget").is(":visible")||
b.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),d.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});
$("#hotel_2_search_widget_form div.date-widget").addClass("ctc-jqui");this.ui.includeFlight=this.ui.form.find("#hotelFlightCheckboxWidget");this.ui.hotelDestination=new $namespace.Widgets.DataListWidget(this.ui.form.find("#hotel_destination_widget"),{url:$namespace.GlobalConstants.API_CONNECT_URL+"/api/hotels/dynamicLocations",headers:{apiKey:a,pseudoSessionId:$namespace.GlobalConstants.PSEUDO_SESSION_ID},parser:utils.parseDynamicLocations,noResultsText:this.module.TranslationTexts.NO_LOCATIONS_ERROR_MESSAGE,
showImages:!0,onSelect:$.proxy(this._onLocationSelect,this),onLocationBlur:$.proxy(this._onLocationBlur,this),taborder:"document"});a=$namespace.DomUtil.readCookie("Csrf-token");this.ui.departureLocation=new $namespace.Widgets.DataListWidget(this.ui.form.find("#departure_location_widget"),{url:"searchHelper.act",parser:$namespace.Utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureLocationSelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:function(a){a=
JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},noResultsText:this.module.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});this.ui.hotelServiceClass=new $namespace.Widgets.SelectWidget(this.ui.form.find("#hotel_service_class_widget"),
{taborder:"document"});this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#hotel_number_of_rooms_widget"),{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length||this.model.rooms[0].children.length)for(a=this.model.rooms.length,f=0,g=1;f<a;f++,g++){if(h=this.ui.form.find('SELECT[id="hotelAdultsInRoomForWidget_'+g+'"]'),h.length)for(this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="hotelChildrenInRoomForWidget_'+
g+'"]').parent(),{taborder:"document"})),h=this.model.rooms[f].children.length,k=0,l=1;k<h;k++,l++)new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="hotelChildAgeForWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"}),new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="hotelInfantSeatSelectWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"})}else this.ui.adults.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#adults_room_1_widget"),{taborder:"document"})),
this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#children_room_1_widget"),{taborder:"document"}));this.ui.geolocation=$.hook("geolocation",this.el);this.delegateEvents();this.ui.form.find("#hotelDepartureCityTextWidget").focus(function(){this.select()});this.ui.includeFlight.is(":checked")||$namespace.Utils.disableFormField([this.ui.departureLocation,this.ui.hotelServiceClass]);$(window).on("resize orientationchange",function(){var a=d.SearchWidgetsModule.getWindowDimensions();
if(b.win.height!=a.height||b.win.width!=a.width)b.ui.form.find("#checkInDateWidget, #checkOutDateWidget").datepicker("hide"),b.win=a;b.resize()});this.resize();$namespace.TabOrder.updatePageTabOrder();this.initialized=!0},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),
a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},createModel:function(){this.model={destinationType:"",destinationCode:"",regionCode:"",cityCode:"",latitude:"",longitude:"",
locationName:"",city:"",country:"",departureDate:"",returnDate:"",includeFlight:!1,departureLocationCode:"",departureLocationName:"",serviceClass:"",prevDesType:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};try{if(1==$("#hotelOnlySearchResults").data("hotel-type")){var a=$namespace.DomUtil.readCookie(this.HOTEL_OFFER_PAGE_WIDGET_COOKIE_NAME);a=JSON.parse(a);this.model.locationName=a.locationName;this.model.latitude=a.latitude;this.model.longitude=a.longitude;this.model.departureLocationCode=
a.cityCode;this.model.departureDate=a.checkInDate;this.model.returnDate=a.checkOutDate;for(var b=0;b<a.rooms.length;b++){var d={index:0,number:1,adultCount:2,children:[]};d.index=a.rooms[b].numberOfChildren;d.number=a.rooms[b].roomNumber;d.adultCount=a.rooms[b].numberOfAdults;for(var e=0;e<a.rooms[b].childrenAges.length;e++){var f={index:0,number:1,age:-1,seat:0};f.age=a.rooms[b].childrenAges[e];f.index=e;d.children.push(f)}this.model.rooms[b]=d}}else a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME),
(a=JSON.parse(a))&&a.departureDate&&a.rooms&&a.rooms.length&&(a.cityCode||a.locationName)&&(this.model=a)}catch(g){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing hotel Search Widget Cookie.")}1>this.model.rooms.length&&(this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}]);a=$namespace.DateUtil.isValidDateString(this.model.departureDate);b=$namespace.DateUtil.isValidDateString(this.model.returnDate);!1===a||!1===b||a.isPastDate?(this.model.departureDate=this.lastDepartureDate=
this.model.returnDate=this.lastReturnDate="",this.departureDate=this.returnDate=null):(this.model.departureDate=this.lastDepartureDate=$namespace.DateUtil.getDateAsString(a.date),this.departureDate={date:a.date,className:"departure"},this.model.returnDate=this.lastReturnDate=$namespace.DateUtil.getDateAsString(b.date),this.returnDate={date:b.date,className:"return"})},updateMaxRoomNumber:function(a){$("#hotel_hp_number_of_rooms").length&&("destination"==this.model.destinationType||""==this.model.destinationType?
($("#hotel_hp_number_of_rooms").hide(),$("#hotel_vp_number_of_rooms").show()):($("#hotel_hp_number_of_rooms").show(),$("#hotel_vp_number_of_rooms").hide()),a&&this.cleanUpRoom())},cleanUpRoom:function(){this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}];this.setRoomLayout();this.ui.form.find('SELECT[id="hotelNumberOfRoomsWidget"]').val(this.model.rooms.length)},loadValuesFromModel:function(){if(this.model){this.model.prevDesType==this.model.destinationType?this.updateMaxRoomNumber(!1):
this.updateMaxRoomNumber(!0);this.ui.form.find('INPUT[id="hotelDestination"]').val(decodeURIComponent(this.model.locationName));this.departureDate?this.ui.form.find('INPUT[id="checkInDateWidget"]').val($namespace.DateUtil.getDateAsString(this.departureDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="checkInDateWidget"]').val("");this.returnDate?this.ui.form.find('INPUT[id="checkOutDateWidget"]').val($namespace.DateUtil.getDateAsString(this.returnDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="checkOutDateWidget"]').val("");
this.ui.form.find('INPUT[id="hotelFlightCheckboxWidget"]').prop("checked",this.model.includeFlight);this.model.includeFlight?this.ui.form.find('INPUT[id="hotelDepartureCityTextWidget"]').val(this.model.departureLocationName).attr("default-value",this.model.departureLocationCode):this.ui.form.find('INPUT[id="hotelDepartureCityTextWidget"]').val("").attr("default-value","");this.ui.form.find('SELECT[id="hotelServiceClassWidget"]').val(this.model.serviceClass);var a=this.model.rooms.length;this.ui.form.find('SELECT[id="hotelNumberOfRoomsWidget"]').val(a);
for(var b=[],d=[],e=[],f=[],g=0;g<a;g++){var h=this.model.rooms[g];b.push(h.adultCount);d.push(h.children.length);for(var k=0;k<h.children.length;k++)e.push(h.children[k].age),f.push(h.children[k].seat)}g=$namespace.Templates.hotel_multiroom_template;if(1==a&&0==this.model.rooms[0].children.length)this.ui.form.find('SELECT[id="hotelAdultsInRoomForWidget_1"]').val(this.model.rooms[0].adultCount).find("option[value="+this.model.rooms[0].adultCount+"]").attr("selected",!0).siblings().removeAttr("selected"),
this.ui.form.find('SELECT[id="hotelChildrenInRoomForWidget_1"]').val(0).find("option[value=0]").attr("selected",!0).siblings().removeAttr("selected");else{h=0;this.ui.expansionContainer.empty();this.module.el.addClass("expand-multiroom-hobe");k=0;for(var l=1;k<a;k++,l++){var p=$(g({index:l}));this.ui.expansionContainer.append(p);this.ui.form.find('SELECT[id="hotelAdultsInRoomForWidget_'+l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.ui.form.find('SELECT[id="hotelChildrenInRoomForWidget_'+
l+'"]').val(d[k]).find("option[value="+d[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.hotel_multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();for(var v=parseInt(d[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+e[h],w=f[h];p.find('.child-age-select[data-room="'+l+'"][data-child="'+t+'"]').val(u).find("option[value="+u+"]").attr("selected",!0).siblings().removeAttr("selected");p.find('.child-seat-select[data-room="'+
l+'"][data-child="'+t+'"]').val(w).find("option[value="+w+"]").attr("selected",!0).siblings().removeAttr("selected");0>u||1<u||!this.model.includeFlight?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#hotelDestination");a.push("#region_widget");a.push("#checkInDateWidget");
a.push("#checkOutDateWidget");a.push("#hotelWidgetDates");a.push("#hotelDepartureCityTextWidget");for(var b=0,d=1;b<this.model.rooms.length;b++,d++){a.push("#hotel_passengers_per_room_div_"+d);a.push("#hotel_adults_room_"+d+"_widget");a.push("#hotel_children_room_"+d+"_widget");for(var e=this.ui.form.find('SELECT.child-age-select[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}}b=0;for(d=1;b<this.model.rooms.length;b++,
d++)for(e=this.ui.form.find('SELECT.child-age-select[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++)h=$(e[f]),k=h.attr("id"),h=h.parent().attr("id"),a.push(k+"_button"),a.push(k),a.push(h)}$namespace.Utils.clearErrors(a,this.ui.form)},validate:function(){var a=!0,b=this.module.TranslationMessages,d={};this.clearErrors();""==this.model.locationName?(d["#hotelDestination"]=$namespace.MessageUtil.prefixError(b.VP_DESTINATION_REQUIRED.translatedText),$namespace.Utils.showErrors(d),$namespace.Analytics.trackPageView("/er/errorCode/"+
$namespace.MessageUtil.formatErrorMessageForAnalytics(b.VP_DESTINATION_REQUIRED.sourceText)),a=!1):3>this.ui.hotelDestination.input.val().length?(d["#hotelDestination"]=$namespace.MessageUtil.prefixError(texts.HOBE_SEARCH_MIN_LENGTH),$namespace.Utils.showErrors(d),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(texts.HOBE_SEARCH_MIN_LENGTH.sourceText)),a=!1):this.ui.hotelDestination.hasValidSelection()||(d["#hotelDestination"]=$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText),
$namespace.Utils.showErrors(d),a=!1);this.validateDates(!1)||(a=!1);this.model.includeFlight?(""!=this.model.departureLocationCode&&this.ui.departureLocation.hasValidSelection()||(d=b.VP_INVALID_AIRPORT,$namespace.Utils.showErrors({hotelDepartureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),a=!1),this.validateAirfarePassengerCount()||(a=!1)):"destination"!=
this.model.destinationType||this.validateWithoutAirfarePassengerCount()||(a=!1);d=0;for(var e=1;d<this.model.rooms.length;d++,e++)this.ui.form.find('SELECT.child-age-select[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},h=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(h.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(h.sourceText));
a=!1}});a||$namespace.Utils.focusFirstErrorField(this.ui.form);return a},validateAirfarePassengerCount:function(){var a=this.getTotalPassengerCount(),b=this.module.TranslationMessages;this.clearRoomErrors();if(9<a){a=b.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR;b={hotel_passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),hotel_adults_room_1_widget:"",hotel_children_room_1_widget:""};for(var d=1,e=2;d<this.model.rooms.length;d++,e++)b["hotel_passengers_per_room_div_"+e]=$namespace.MessageUtil.prefixError(a.translatedText),
b["hotel_adults_room_"+e+"_widget"]="",b["hotel_children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){var a=this.getTotalPassengerCount(),b=this.module.TranslationMessages;this.clearRoomErrors();if(10<a){a=b.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR;b={hotel_passengers_per_room_div_1:$namespace.MessageUtil.prefixError(a.translatedText),
hotel_adults_room_1_widget:"",hotel_children_room_1_widget:""};for(var d=1,e=2;d<this.model.rooms.length;d++,e++)b["hotel_passengers_per_room_div_"+e]=$namespace.MessageUtil.prefixError(a.translatedText),b["hotel_adults_room_"+e+"_widget"]="",b["hotel_children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(b);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.sourceText));return!1}return!0},clearRoomErrors:function(){for(var a=1;a<this.model.rooms.length+
1;a++)this.clearErrors(["#hotel_passengers_per_room_div_"+a,"#hotel_adults_room_"+a+"_widget","#hotel_children_room_"+a+"_widget"])},validateDates:function(a){var b=!0,d=this.module.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#checkInDateWidget","#checkOutDateWidget","#hotelWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);
g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&$namespace.Analytics.trackEvent("ho_event_searchWidget","Check In",this.model.departureDate),this.lastDepartureDate=this.model.departureDate,
$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),
this.returnDate={className:"return",date:h.date},this.lastReturnDate!=this.model.returnDate&&$namespace.Analytics.trackEvent("ho_event_searchWidget","Check Out",this.model.returnDate),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(f=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>f?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({hotelWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),
checkInDateWidget:"",checkOutDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<f&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({hotelWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),checkInDateWidget:"",checkOutDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):(this.departureDate||
!e.length&&a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({checkInDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({checkOutDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),
b=!1));return b},resize:function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1,b=this.ui.form.find('INPUT[id="checkInDateWidget"]'),d=this.ui.form.find('INPUT[id="checkOutDateWidget"]');b.prop("readonly",a);d.prop("readonly",a);b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null;this.ui.hotelDestination.input&&this.ui.hotelDestination.input.attr("data-skip-link","true")},getTotalPassengerCount:function(){for(var a=0,b=0;b<this.model.rooms.length;b++)a+=
this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;return a},isDestinationOnly:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_FIELDS||[]).indexOf(a)},isNoRegionDestination:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_REGIONS||[]).indexOf(a)},setRoomLayout:function(a){var b=this.model.rooms,d=$namespace.Templates.hotel_multiroom_template;if(1===b.length&&0==b[0].children.length)this.module.el.hasClass("expand-multiroom-hobe")&&
(this.module.el.removeClass("expand-multiroom-hobe"),this.ui.expansionContainer.html(this.ui.expansionHTML)),this.ui.form.find('.single-adult-select[data-room="1"]').val(b[0].adultCount),this.ui.form.find('.single-child-select[data-room="1"]').val(b[0].children.length);else{this.module.el.addClass("expand-multiroom-hobe");this.ui.expansionContainer.empty();for(var e=0;e<b.length;e++){var f=b[e],g=$(d({index:f.number}));this.ui.expansionContainer.append(g);g.find('.mr-adults-select[data-room="'+f.number+
'"]').val(f.adultCount).find("option[value="+f.adultCount+"]").attr("selected",!0).siblings().removeAttr("selected");g.find('.mr-children-select[data-room="'+f.number+'"]').val(f.children.length).find("option[value="+f.children.length+"]").attr("selected",!0).siblings().removeAttr("selected");this.setRoomChildLayout(f)}}a&&1===b.length&&setTimeout(function(){$("#children_room_1_widget button").focus()},1);this.initFormItems()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.hotel_multichild_template,
e=$.hook("child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.child-age-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.child-seat-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);0>g.age||1<g.age||!this.ui.includeFlight.is(":checked")?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+
g.number+'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').show()}}this.initFormItems()}}},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>
a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;case "childCount":this.updateRoomChildren(a,
d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},enableOrDisableFieldsBasedOnDestination:function(a){this.clearErrors();""==a||this.isNoRegionDestination(a)?$namespace.Utils.disableFormField(this.ui.region):this.isDestinationOnly(a)?$namespace.Utils.disableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation]):
$namespace.Utils.enableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.numberOfRooms,this.ui.geolocation])},geoSuccess:function(a){if("string"===typeof a){var b=a.split(",");this.geolocationCoordinates.string=a;this.geolocationCoordinates.lat=b[0];this.geolocationCoordinates.lng=b[1]}else this.geolocationCoordinates.lat=a.coords.latitude,this.geolocationCoordinates.lng=a.coords.longitude,this.geolocationCoordinates.string=a.coords.latitude+","+a.coords.longitude;
this.ui.departureLocation.val("("+$namespace.Config.CURRENT_LOCATION+")")},geoError:function(a){a=$namespace.Utils.getTemplate("confirm_geolocation_error");var b=new $namespace.Widgets.Confirm(a,function(){b.hide()},function(){b.hide()});b.show()},_isDestinationBookable:function(a){return/escortedVacations|houseboatVacations|lasVegasAndDesert|lionWorldTravel|luxuryVillaRentals|themeParks/i.test(a)?!1:!0},_isRegionRequired:function(a){return $namespace.Utils.regexDestinationCode(a)?!0:!1},_onLocationSelect:function(a,
b){this.model.destinationType=a.type;this.model.cityCode="city"==a.type||"destination"==a.type?null===a.cityCode||"undefined"==typeof a.cityCode?"":a.cityCode:"airport"==a.type?null===a.value||"undefined"==typeof a.value?"":a.value:"";"city"==a.type||"zipCode"==a.type?(this.model.city=a.city,"undefined"!==typeof a.state&&null!==a.state&&(this.model.city=encodeURIComponent(this.model.city.concat(", "+a.state)))):this.model.city="";this.model.destinationCode=a.destinationCode;this.model.locationName=
encodeURIComponent(a.title);this.model.latitude="undefined"==typeof a.latitude?"":a.latitude;this.model.longitude="undefined"==typeof a.longitude?"":a.longitude;this.model.country="undefined"==typeof a.country?"":a.country;$namespace.Analytics.trackEvent("ho_event_searchWidget","Destination",decodeURIComponent(this.model.locationName));this.clearError("#hotelLocationTextWidget"+this.suffix);this.model.prevDesType!=this.model.destinationType&&this.updateMaxRoomNumber(!0);this.model.prevDesType=this.model.destinationType},
_onLocationBlur:function(a){a=$(a.currentTarget);this.model.locationName=encodeURIComponent(a.val());if(!this.suspendValidation){this.clearError("#hotelDestination");var b={};a.val().length&&3>a.val().length?(b["#hotelDestination"]=$namespace.MessageUtil.prefixError($namespace.SearchWidgetsModule.TranslationTexts.HOBE_SEARCH_MIN_LENGTH),utils.showErrors(b)):a.val().length&&!this.ui.hotelDestination.hasValidSelection()&&(b["#hotelDestination"]=$namespace.MessageUtil.prefixError($namespace.SearchWidgetsModule.TranslationMessages.VP_INVALID_AIRPORT.translatedText),
utils.showErrors(b));this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()}},_onDepartureLocationSelect:function(a,b){this.model.departureLocationCode=a.value;this.model.departureLocationName=$.trim(a.title);$namespace.Analytics.trackEvent("ho_event_searchWidget","Departure_City",a.value)},_onDepartureDateChange:function(a,b,d){this.validateDates();this.departureDate&&(a=[this.departureDate],
this.returnDate&&a.push(this.returnDate),this.ui.departureDate.selectDays(a,!0),this.ui.returnDate.selectDays(a))},_onReturnDateChange:function(a,b,d){this.validateDates();this.returnDate&&(a=[this.returnDate],this.departureDate&&a.unshift(this.departureDate),this.ui.departureDate.selectDays(a),this.ui.returnDate.selectDays(a,!0))},_onDepartureCityKeyDown:function(a){this.clearError("#hotelDepartureCityTextWidget");$(a.target).parent().removeClass("location-airport")},_onDepartureCityBlur:function(a){this.clearError("#hotelDepartureCityTextWidget");
a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=this.module.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({hotelDepartureCityTextWidget:$namespace.MessageUtil.prefixError(a)})):this.ui.departureLocation.hasValidSelection()||$namespace.Utils.showErrors({hotelDepartureCityTextWidget:$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText)})}},_onIncludeFlightChange:function(a){a=
$(a.currentTarget).is(":checked");var b=[this.ui.departureLocation,this.ui.geolocation,this.ui.hotelServiceClass];(this.model.includeFlight=a)?($namespace.Utils.enableFormField(b),$("#checkInDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#checkOutDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):(this.clearError("#hotelDepartureCityTextWidget"),$namespace.Utils.disableFormField(b),$("#checkInDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),
$("#checkOutDateWidget-label").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget","Flight",a?"Yes":"No");a?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onServiceClassChange:function(a){a=$(a.currentTarget).val();this.model.serviceClass=a;$namespace.Analytics.trackEvent("ho_event_searchWidget",
"Class",a)},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget","Rooms",a);this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onChildrenChange:function(a){a=+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);
$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a);this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].adultCount=a;$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a);this.model.includeFlight?this.validateAirfarePassengerCount():
"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget","Children",a);this.model.includeFlight?this.validateAirfarePassengerCount():
"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);$namespace.Analytics.trackEvent("ho_event_searchWidget","Adults",a);this.model.includeFlight?this.validateAirfarePassengerCount():"destination"==this.model.destinationType?this.validateWithoutAirfarePassengerCount():this.clearRoomErrors()},
_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("ho_event_searchWidget",
"Child_Age",a)},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a);$namespace.Analytics.trackEvent("ho_event_searchWidget","Infant_Seating",0==a?"lap":"seat")},_onGeoClick:function(a){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition($.proxy(this.geoSuccess,this),$.proxy(this.geoError,this),{timeOut:3E4,maximumAge:6E5});a.preventDefault()},_onSubmit:function(a){this.model.includeFlight=
this.ui.includeFlight.is(":checked");if(/THEMEPARKS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Theme-Parks");else if(/LIONWORLDTRAVEL/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Experiences/Lion-World-Travel");else if(/ESCORTEDVACATIONS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Experiences/Guided-Vacations");else if(this.validate()){for(var b=this.model.rooms,d=0,e=[],f=[],g=[],h=[],k=0,l=0,p=0;p<b.length;p++){var q=b[p].adultCount,
r=b[p].children.length;k+=q;l+=r;d+=q+r;e.push(q);f.push(r);for(q=0;q<r;q++)g.push(b[p].children[q].age),h.push(b[p].children[q].seat)}r=!1;if(this.model.destinationCode)for(p=0;p<$namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED.length;p++)if($namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED[p].toLowerCase()==this.model.destinationCode.toLowerCase()){r=!0;break}d={fsr:"LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES",destinationType:this.model.destinationType,locationName:this.model.locationName,
city:decodeURIComponent(this.model.city),cityCode:this.model.cityCode,latitude:this.model.latitude,longitude:this.model.longitude,country:this.model.country,cityName:this.ui.hotelDestination.input.val(),destinationCode:this.model.destinationCode,departureDate:this.model.departureDate,arrivalDate:this.model.returnDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),flightChecked:this.model.includeFlight,numberOfPassengers:d,hotelRooms:this.model.rooms.length,
adults:e.join(","),children:f.join(","),childrenAges:g.join(","),childSeatFlags:h.join(","),serviceClass:this.model.serviceClass,multiCityPackagesRequested:r};$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED?d.ctvps="SEARCH_VACATION_PACKAGES":d.fsr="LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";e=this.ui.hotelDestination.input.val()+"_"+this.model.departureDate+"_"+this.model.returnDate;b="_"+b.length+"_"+k+"_"+l;this.model.includeFlight?(k=this.model.departureLocationCode,
d.departureCityCode=k,d.departureCity=this.model.departureLocationName,e+="_"+k):e+="_no-flight";e+=b;$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME);$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(this.model),0);$namespace.Analytics.trackEvent("ho_event_searchWidget","Click","Search");$namespace.Analytics.trackEvent("ho_event_searchDetails","Click",e.replace(/%2C/g,",").replace(/%20/g," "));$namespace.Analytics.trackPageView("/ho/booking/searchResults");d.uid=$namespace.Utils.getUID();
this.submitForm(d)}a.preventDefault()},_loadCitiesOfSelectedDestination:function(a){this.model.regionCode="";if(a=this.regions[a]){var b=a.slice(0);1<a.length?b.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,value:""}):1==a.length&&(this.model.regionCode=a[0].value,this.ui.region.select.val(this.model.regionCode));this.ui.region.replaceOptions(b)}},_loadServiceClassesByDestinationCode:function(a){var b=this;a="sw=LOAD_SERVICE_CLASSES_BY_DESTINATION&destination="+a+("&serviceClass="+
this.ui.serviceClass.val());$namespace.AjaxUtil.makeAjaxCall("searchWidget.act",a,null,"hotelServiceClassWidget",function(a){a=JSON.parse(a);/^any$/i.test(a[0].value)||a.unshift({text:b.module.TranslationTexts.PLACEHOLDER_ANY_OPTION,value:"Any"});b.ui.serviceClass.replaceOptions(a)},"")},submitForm:function(a){var b=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.Storage.set("vacation-packages-search-form",a);$namespace.DomUtil.setElementLoadingMask(!0);this.isSubmitting=
!0;if(this._isDestinationBookable(a.destination)){var d="";this._isRegionRequired(a.destination);d=(b?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES")+("&destinationType="+a.destinationType);d+="&cityCode="+a.cityCode;d+="&latitude="+a.latitude;d+="&locationName="+a.locationName;d+="&city="+a.city;d+="&longitude="+a.longitude;d+="&country="+a.country;d+="&destination="+a.destination;d+="&flightChecked="+a.flightChecked;d+="&arrivalDate="+a.arrivalDate;d+=
"&departureDate="+a.departureDate;d+="&numberOfNights="+a.numberOfNights;d+="&numberOfPassengers="+a.numberOfPassengers;d+="&hotelRooms="+a.hotelRooms;d+="&adults="+a.adults;d+="&children="+a.children;d+="&childrenAges="+a.childrenAges;d+="&childSeatFlags="+a.childSeatFlags;d=d+"&fromWidget=true&fromMenu=false&serviceClass="+a.serviceClass;d+="&multiCityPackagesRequested="+a.multiCityPackagesRequested;d+="&suppressOutput=true&fromHotelTab=true";if(a.flightChecked){d+="&departureCity="+a.departureCity;
d+="&departureCityCode="+a.departureCityCode;for(var e={domainCode:"",destination:a.locationName.replace(/%2C/g,",").replace(/%20/g," "),destinationCityCode:a.cityCode,latitude:a.latitude,longitude:a.longitude,country:a.country,travelStartDate:a.departureDate,travelEndDate:a.arrivalDate,numberOfNights:a.numberOfNights,rooms:[],travelerCount:a.numberOfPassengers,childSeatFlags:a.childSeatFlags,originAirports:[{airportName:a.departureCity,airportCode:a.departureCityCode}],destinationAirports:[],numberOfConnections:-1,
flightServiceClass:a.serviceClass},f=a.adults.split(","),g=a.children.split(","),h=a.childrenAges.split(","),k=0,l=0;l<a.hotelRooms;l++){var p=parseInt(g[l]);e.rooms[l]={roomNumber:l,adultCount:parseInt(f[l]),childCount:p,childAges:[]};p+=k;for(var q=e.rooms[l].childAges,r=0,v=k;v<p;r++)q[r]=h[v++],k++}d+="&dynamicSearchInfoJSON="+JSON.stringify(e)}$namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL,0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(b?"vacationPackageSearch.act":"vacationPackageFilteredSearchResults.act",d,null,null,function(b){var d=$namespace,e=d.SearchWidgetsModule.TranslationTexts.PRODUCT_SEARCH_NO_RESULTS_TITLE;this.message?($namespace.Analytics.trackEvent("ho_event_searchWidget","No results found",a.locationName.replace(/%2C/g,",").replace(/%20/g," ")),d.DomUtil.setElementLoadingMask(!1,1),d.MessageUtil.showMessage({type:1,
text:this.message.text,title:e})):"HOBESearchResult"===b?/hotels/i.test(window.location.href)?d.Navigation.loadPage(_webLoc+"/Hotels/h="+d.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):d.Navigation.loadPage(_webLoc+"/h="+d.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):"MultiCityPackageSearchResult"===b?d.Navigation.loadPage(_webLoc+"/h="+d.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES):d.Navigation.loadPage(_webLoc+"/h="+d.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)},
null,"")}},_onHotelCrossSellClick:function(a){a.preventDefault();$namespace.SearchWidgetsModule.setTab("vacation-packages");$namespace.Analytics.trackEvent("Search Hotel","Click","dp/hfc_Redirect");$namespace.SearchWidgetsModule.widgets.vacationPackage._onClickSubHfcTab(void 0,!0)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.View.AllInclusiveSearchWidgetView=Backbone.View.extend({el:"#search_all_inclusive_view",ui:{},cache:{},geolocationCoordinates:{lat:null,lng:null,string:null},WIDGET_COOKIE_NAME:"ALL_INCLUSIVE_SEARCH_WIDGET_VALUES",departDate:null,returnDate:null,lastDepartureDate:null,lastReturnDate:null,model:null,module:null,events:{"change #allInclusive_destination":"_onDestinationChange","change #allInclusive_region":"_onRegionChange","change #allInclusive_serviceClassWidget":"_onServiceClassChange","change #allInclusive_numberOfRoomsWidget":"_onRoomsChange",
"change .single-child-select":"_onChildrenChange","change .single-adult-select":"_onAdultsChange","change .mr-adults-select":"_onMultiAdultsChange","change .mr-children-select":"_onMultiChildrenChange","change .child-age-select":"_onChildAgeChange","change .child-seat-select":"_onChildSeatChange","keydown #allInclusive_departureCityTextWidget":"_onDepartureCityKeyDown","click #allInclusive_geolocation":"_onGeoClick","submit form":"_onSubmit",'click [data-hook="all_inclusive_search_submit"]':"_onSubmit"},
initialize:function(a){a=$.extend({},a);this.module=a.module;this.regions=a.regions||{};this.vp1DestinationLasVegas="";(this.cleanUpHardCodedVpDestinationsFlag=$namespace.GlobalConstants.CLEANUP_HARD_CODED_VP_DESTINATIONS_ENABLED)&&this.getVp1DestinationsLasVegas();$.hook("allInclusive_geolocation_wrapper").addClass("no-geolocation");this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.undelegateEvents();this.ui.form=
$("#search_all_inclusive_form");this.ui.submitButton=$.hook("all_inclusive_search_submit",this.el);this.ui.form.find('SELECT[id="allInclusive_destination"]').val("");this.ui.form.find('SELECT[id="allInclusive_region"]').val("");this.ui.expansionContainer=$.hook("allInclusive_multiroom-expansion",this.el);this.ui.expansionHTML=this.ui.expansionContainer.html();this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.createModel();this.loadValuesFromModel();var b=this,d=$namespace,e=d.DateUtil;
a=function(a,d){a=$(a);a=/departure/.test(a.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"return"));b.setReturnDateCalendarDisplayMonth()};var f=function(a){var f=/departure/.test($(this).attr("id"));f=$("#"+(f?"allInclusive_returnDateWidget":"allInclusive_departureDateWidget")).datepicker("getDate");f=null===f||0!=e.getDifferenceInDays(a,f)?"":"date-highlight";var g=d.SearchWidgetsModule.getAccessibleDateLabel(a);null!=
b.departureDate&&0==e.getDifferenceInDays(a,b.departureDate.date)?g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=b.returnDate&&0==e.getDifferenceInDays(a,b.returnDate.date)&&(g=d.TranslationUtil.replaceParameters(d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));a=d.DateUtil.enhanceDateStringReadability(g);return[!0,f,g,a]},g=function(a,d){b.validateDates()},h=d.DateUtil.getDateDaysFromToday(0),
k=d.DateUtil.getDateDaysFromToday(1);this.departureDate&&(k=d.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.ui.form.find("#allInclusive_departureDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:a,beforeShowDay:f,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+
"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});this.ui.returnDate=this.ui.form.find("#allInclusive_returnDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:a,beforeShowDay:f,minDate:k,minDateDefault:k,defaultDate:k,
numberOfMonths:[2,1],autoSize:!1,dayNamesMin:d.Config.DAY_SHORT_NAMES,monthNames:d.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:d.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:d.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,alignRight:!0,prevText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:d.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});a=this.ui.form.find("#allInclusive_departureDateWidget, #allInclusive_returnDateWidget");
this.floatPlaceholders=[];a.each(function(a,d){b.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});a.on("blur",function(){$(this).datepicker("widget").is(":visible")||b.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),d.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==
a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#search_all_inclusive_form div.date-widget").addClass("ctc-jqui");this.ui.destination=new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_destination_widget"),{taborder:"document"});this.ui.region=new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_region_widget"),{taborder:"document"});this.ui.includeFlight=this.ui.form.find("#allInclusive_flightItineraryCheckboxWidget");
a=$namespace.DomUtil.readCookie("Csrf-token");this.ui.departureLocation=new $namespace.Widgets.DataListWidget(this.ui.form.find("#allInclusive_departure_location_widget"),{url:"searchHelper.act",parser:$namespace.Utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureLocationSelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,
airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},noResultsText:this.module.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});this.ui.serviceClass=new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_service_class_widget"),{taborder:"document"});this.ui.numberOfRooms=new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_number_of_rooms_widget"),
{taborder:"document"});this.ui.adults=[];this.ui.children=[];if(1<this.model.rooms.length||this.model.rooms[0].children.length)for(a=this.model.rooms.length,f=0,g=1;f<a;f++,g++){if(h=this.ui.form.find('SELECT[id="allInclusive_adultsInRoomForWidget_'+g+'"]'),h.length){this.ui.adults.push(new $namespace.Widgets.SelectWidget(h.parent(),{taborder:"document"}));this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="allInclusive_childrenInRoomForWidget_'+g+'"]').parent(),
{taborder:"document"}));h=this.model.rooms[f].children.length;k=0;for(var l=1;k<h;k++,l++)new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="allInclusive_childAgeForWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"}),new $namespace.Widgets.SelectWidget(this.ui.form.find('SELECT[id="allInclusive_infantSeatSelectWidget_'+g+"_"+l+'"]').parent(),{taborder:"document"})}}else this.ui.adults.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_adults_room_1_widget"),
{taborder:"document"})),this.ui.children.push(new $namespace.Widgets.SelectWidget(this.ui.form.find("#allInclusive_children_room_1_widget"),{taborder:"document"}));this.ui.geolocation=$.hook("allInclusive_geolocation",this.el);this.delegateEvents();this.ui.form.find("#allInclusive_departureCityTextWidget").focus(function(){this.select()});this.ui.destination.select&&this.ui.destination.select.attr("data-skip-link","true");this.ui.includeFlight.is(":checked")||$namespace.Utils.disableFormField([this.ui.departureLocation,
this.ui.serviceClass]);this.enableOrDisableFieldsBasedOnDestination(this.model.destinationCode);$(window).on("resize.allInclusive orientationchange.allInclusive",function(){var a=d.SearchWidgetsModule.getWindowDimensions();if(b.win.height!=a.height||b.win.width!=a.width)b.ui.form.find("#allInclusive_departureDateWidget, #allInclusive_returnDateWidget").datepicker("hide"),b.win=a;b.resize()});this.resize();$namespace.TabOrder.updatePageTabOrder()},setReturnDateCalendarDisplayMonth:function(){var a=
new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();
this.ui.returnDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},createModel:function(){this.model={destinationCode:"",regionCode:"",departureDate:"",returnDate:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",serviceClass:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};try{var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);(a=JSON.parse(a))&&a.destinationCode&&a.departureDate&&a.rooms&&a.rooms.length?
this.model=a:$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME)}catch(d){}1>this.model.rooms.length&&(this.model.rooms=[{index:0,number:1,adultCount:2,children:[]}]);a=$namespace.DateUtil.isValidDateString(this.model.departureDate);var b=$namespace.DateUtil.isValidDateString(this.model.returnDate);!1===a||!1===b||a.isPastDate?(this.model.departureDate=this.lastDepartureDate=this.model.returnDate=this.lastReturnDate="",this.departureDate=this.returnDate=null):(this.model.departureDate=this.lastDepartureDate=
$namespace.DateUtil.getDateAsString(a.date),this.departureDate={date:a.date,className:"departure"},this.model.returnDate=this.lastReturnDate=$namespace.DateUtil.getDateAsString(b.date),this.returnDate={date:b.date,className:"return"})},loadValuesFromModel:function(){if(this.model){this.ui.form.find('SELECT[id="allInclusive_destination"]').val(this.model.destinationCode);var a=this.ui.form.find('SELECT[id="allInclusive_region"]');a[0].options.length=0;var b=this.regions[this.model.destinationCode];
if(b)for(var d=0;d<b.length;d++){var e=b[d].value==this.model.regionCode;a[0].options[d]=new Option(b[d].text,b[d].value,e,e)}this.departureDate?this.ui.form.find('INPUT[id="allInclusive_departureDateWidget"]').val($namespace.DateUtil.getDateAsString(this.departureDate.date,this.localeDateFormat)):this.ui.form.find('INPUT[id="allInclusive_departureDateWidget"]').val("");this.returnDate?this.ui.form.find('INPUT[id="allInclusive_returnDateWidget"]').val($namespace.DateUtil.getDateAsString(this.returnDate.date,
this.localeDateFormat)):this.ui.form.find('INPUT[id="allInclusive_returnDateWidget"]').val("");this.ui.form.find('INPUT[id="allInclusive_flightItineraryCheckboxWidget"]').prop("checked",this.model.includeFlight);this.model.includeFlight?this.ui.form.find('INPUT[id="allInclusive_departureCityTextWidget"]').val(this.model.departureLocationName).attr("default-value",this.model.departureLocationCode):this.ui.form.find('INPUT[id="allInclusive_departureCityTextWidget"]').val("").attr("default-value","");
this.ui.form.find('SELECT[id="allInclusive_serviceClassWidget"]').val(this.model.serviceClass);a=this.model.rooms.length;this.ui.form.find('SELECT[id="allInclusive_numberOfRoomsWidget"]').val(a);b=[];e=[];var f=[],g=[];for(d=0;d<a;d++){var h=this.model.rooms[d];b.push(h.adultCount);e.push(h.children.length);for(var k=0;k<h.children.length;k++)f.push(h.children[k].age),g.push(h.children[k].seat)}d=$namespace.Templates.allInclusive_multiroom_template;if(1==a&&0==this.model.rooms[0].children.length)this.ui.form.find('SELECT[id="allInclusive_adultsInRoomForWidget_1"]').val(this.model.rooms[0].adultCount).find("option[value="+
this.model.rooms[0].adultCount+"]").attr("selected",!0).siblings().removeAttr("selected"),this.ui.form.find('SELECT[id="allInclusive_childrenInRoomForWidget_1"]').val(0).find("option[value=0]").attr("selected",!0).siblings().removeAttr("selected");else{h=0;this.ui.expansionContainer.empty();this.module.el.addClass("allInclusive_expand-multiroom");k=0;for(var l=1;k<a;k++,l++){var p=$(d({index:l}));this.ui.expansionContainer.append(p);this.ui.form.find('SELECT[id="allInclusive_adultsInRoomForWidget_'+
l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.ui.form.find('SELECT[id="allInclusive_childrenInRoomForWidget_'+l+'"]').val(e[k]).find("option[value="+e[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.allInclusive_multichild_template,r=$.hook("allInclusive_child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();for(var v=parseInt(e[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);
var u=+f[h],w=g[h];p.find('.child-age-select[data-room="'+l+'"][data-child="'+t+'"]').val(u).find("option[value="+u+"]").attr("selected",!0).siblings().removeAttr("selected");p.find('.child-seat-select[data-room="'+l+'"][data-child="'+t+'"]').val(w).find("option[value="+w+"]").attr("selected",!0).siblings().removeAttr("selected");0>u||1<u||!this.model.includeFlight?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();
h++}}}}}},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#allInclusive_destination_widget");a.push("#allInclusive_region_widget");a.push("#allInclusive_departureDateWidget");a.push("#allInclusive_returnDateWidget");a.push("#allInclusiveWidgetDates");a.push("#allInclusive_departureCityTextWidget");a.push("#allInclusive_adults_room_1_widget");a.push("#allInclusive_children_room_1_widget");a.push("#allInclusive_adults_room_2_widget");
a.push("#allInclusive_children_room_2_widget");for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=this.ui.form.find('SELECT.child-age-select[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}}$namespace.Utils.clearErrors(a,this.ui.form)},validate:function(){var a=!0,b=this.module.TranslationMessages;this.clearErrors();if(""==this.model.destinationCode||this.model.destinationCode!=this.ui.destination.val()){var d=
b.VP_DESTINATION_REQUIRED;$namespace.Utils.showErrors({allInclusive_destination_widget:$namespace.MessageUtil.prefixError(d.translatedText)});$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText));a=!1}else this.isDestinationOnly(this.model.destinationCode)||this.isNoRegionDestination(this.model.destinationCode)||""!=this.model.regionCode&&this.model.regionCode==this.ui.region.val()||(d=b.VP_REGION_REQUIRED,$namespace.Utils.showErrors({allInclusive_region_widget:$namespace.MessageUtil.prefixError(d.translatedText)}),
$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),a=!1);this.validateDates(!1)||(a=!1);if(this.model.includeFlight){""!=this.model.departureLocationCode&&this.ui.departureLocation.hasValidSelection()||(d=b.VP_INVALID_AIRPORT,$namespace.Utils.showErrors({allInclusive_departureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),
a=!1);var e=this.getTotalPassengerCount();if(9<e){d=b.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR;var f={allInclusive_departureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText),adults_room_1_widget:"",children_room_1_widget:""},g=1;for(e=2;g<this.model.rooms.length;g++,e++)f["allInclusive_adults_room_"+e+"_widget"]="",f["allInclusive_children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(f);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText));
a=!1}}else if(10<e){d=b.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR;f={allInclusive_departureCityTextWidget:$namespace.MessageUtil.prefixError(d.translatedText),adults_room_1_widget:"",children_room_1_widget:""};g=1;for(e=2;g<this.model.rooms.length;g++,e++)f["allInclusive_adults_room_"+e+"_widget"]="",f["allInclusive_children_room_"+e+"_widget"]="";$namespace.Utils.showErrors(f);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText));a=
!1}d=0;for(e=1;d<this.model.rooms.length;d++,e++)this.ui.form.find('SELECT.child-age-select[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},f=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(f.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(f.sourceText));a=!1}});a||$namespace.Utils.focusFirstErrorField(this.ui.form);
return a},validateDates:function(a){var b=!0,d=this.module.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#allInclusive_departureDateWidget","#allInclusive_returnDateWidget","#allInclusiveWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",g.date),this.model.departureDate=
$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Depart",this.model.departureDate),this.lastDepartureDate=this.model.departureDate,$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=null,this.model.departureDate=
"",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),this.returnDate={className:"return",date:h.date},this.lastReturnDate!=
this.model.returnDate&&$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Return",this.model.returnDate),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(f=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>f?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({allInclusiveWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),allInclusive_departureDateWidget:"",
allInclusive_returnDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<f&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({allInclusiveWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),allInclusive_departureDateWidget:"",allInclusive_returnDateWidget:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):
(this.departureDate||!e.length&&a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({allInclusive_departureDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({allInclusive_returnDateWidget:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+
$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1));return b},resize:function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1,b=this.ui.form.find('INPUT[id="allInclusive_departureDateWidget"]'),d=this.ui.form.find('INPUT[id="allInclusive_returnDateWidget"]');b.prop("readonly",a);d.prop("readonly",a);b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null},getTotalPassengerCount:function(){for(var a=0,b=0;b<this.model.rooms.length;b++)a+=
this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;return a},isDestinationOnly:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_FIELDS||[]).indexOf(a)},isNoRegionDestination:function(a){return-1!==($namespace.Config.VACATION_PACKAGES.DESTINATIONS_WITHOUT_REGIONS||[]).indexOf(a)},setRoomLayout:function(a){var b=this.model.rooms,d=$namespace.Templates.allInclusive_multiroom_template;if(1===b.length&&0==b[0].children.length)this.module.el.hasClass("allInclusive_expand-multiroom")&&
(this.module.el.removeClass("allInclusive_expand-multiroom"),this.ui.expansionContainer.html(this.ui.expansionHTML)),this.ui.form.find('.single-adult-select[data-room="1"]').val(b[0].adultCount),this.ui.form.find('.single-child-select[data-room="1"]').val(b[0].children.length);else{this.module.el.addClass("allInclusive_expand-multiroom");this.ui.expansionContainer.empty();for(var e=0;e<b.length;e++){var f=b[e],g=$(d({index:f.number}));this.ui.expansionContainer.append(g);g.find('.mr-adults-select[data-room="'+
f.number+'"]').val(f.adultCount).find("option[value="+f.adultCount+"]").attr("selected",!0).siblings().removeAttr("selected");g.find('.mr-children-select[data-room="'+f.number+'"]').val(f.children.length).find("option[value="+f.children.length+"]").attr("selected",!0).siblings().removeAttr("selected");this.setRoomChildLayout(f)}}a&&1===b.length&&setTimeout(function(){$("#allInclusive_children_room_1_widget button").focus()},1);this.initFormItems()},setRoomChildLayout:function(a){if(a){var b=a.children,
d=$namespace.Templates.allInclusive_multichild_template,e=$.hook("allInclusive_child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.child-age-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.child-seat-select[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);0>g.age||1<g.age||!this.ui.includeFlight.is(":checked")?
h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').show()}}this.initFormItems()}}},initFormItems:function(){this.undelegateEvents();var a=[],b=function(b){return function(b,d){b=$(d);b.hasClass("initialized")||(b=new $namespace.Widgets.SelectWidget(b,{taborder:"document"}),d._formWidget=b,a.push(b))}}(this);this.ui.expansionContainer.find(".select-widget").each(b);this.delegateEvents()},
getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=
parseInt(d);break;case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},enableOrDisableFieldsBasedOnDestination:function(a){this.clearErrors();""==a||this.isNoRegionDestination(a)?$namespace.Utils.disableFormField(this.ui.region):this.isDestinationOnly(a)?$namespace.Utils.disableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,
this.ui.numberOfRooms,this.ui.geolocation]):$namespace.Utils.enableFormField([this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.numberOfRooms,this.ui.geolocation])},geoSuccess:function(a){if("string"===typeof a){var b=a.split(",");this.geolocationCoordinates.string=a;this.geolocationCoordinates.lat=b[0];this.geolocationCoordinates.lng=b[1]}else this.geolocationCoordinates.lat=a.coords.latitude,this.geolocationCoordinates.lng=a.coords.longitude,this.geolocationCoordinates.string=a.coords.latitude+
","+a.coords.longitude;this.ui.departureLocation.val("("+$namespace.Config.CURRENT_LOCATION+")")},geoError:function(a){a=$namespace.Utils.getTemplate("confirm_geolocation_error");var b=new $namespace.Widgets.Confirm(a,function(){b.hide()},function(){b.hide()});b.show()},_isDestinationBookable:function(a){return/escortedVacations|houseboatVacations|lasVegasAndDesert|lionWorldTravel|luxuryVillaRentals|themeParks/i.test(a)?!1:!0},_isRegionRequired:function(a){return $namespace.Utils.regexDestinationCode(a)?
!0:!1},_onDestinationChange:function(a){a=$(a.currentTarget).val();if(this.model.destinationCode!=a){this.clearErrors(["#allInclusive_destination_widget","#allInclusive_region_widget"]);this.model.destinationCode=a;this.model.regionCode="";this.ui.region.val("",1);this.enableOrDisableFieldsBasedOnDestination(a);if(""==a)$namespace.Utils.disableFormField(this.ui.region);else if(this._isDestinationBookable(a)){$namespace.Utils.regexDestinationCode(a)?this._loadCitiesOfSelectedDestination(a):$namespace.Utils.disableFormField(this.ui.region);
var b=[this.ui.departureDate,this.ui.returnDate,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms];$namespace.Utils.enableFormField(b);this.ui.form.find("#allInclusive_departureDateWidget-label, #allInclusive_returnDateWidget-label, #allInclusive_serviceClassWidgetLabel, #allInclusive_numberOfRoomsWidgetLabel, #allInclusive_adults_room_1_widget, #allInclusive_children_room_1_widget, #allInclusive_adultsInRoomForWidget_1_label, #allInclusive_childrenInRoomForWidget_1_label").removeClass("disabled");
this.ui.includeFlight.prop("checked","checked");this.model.includeFlight=!0;this._loadServiceClassesByDestinationCode(a)}else/THEMEPARKS|LIONWORLDTRAVEL|ESCORTEDVACATIONS/i.test(a)&&(this.ui.numberOfRooms.val("1"),this.updateRoomCount(1),this.updateRoomChildren(this.model.rooms[0],0),this.setRoomLayout(),this.ui.form.find("#allInclusive_departureDateWidget-label, #allInclusive_returnDateWidget-label,  #allInclusive_serviceClassWidgetLabel, #allInclusive_numberOfRoomsWidgetLabel, #allInclusive_adults_room_1_widget, #allInclusive_adultsInRoomForWidget_1_label, #allInclusive_children_room_1_widget, #allInclusive_childrenInRoomForWidget_1_label").addClass("disabled"),
b=[this.ui.region,this.ui.departureDate,this.ui.returnDate,this.ui.includeFlight,this.ui.departureLocation,this.ui.serviceClass,this.ui.numberOfRooms],$namespace.Utils.disableFormField(b));""!=a&&$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Destination",a)}},_onDepartureLocationSelect:function(a,b){this.model.departureLocationCode=a.value;this.model.departureLocationName=$.trim(a.title);$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Departure_City",a.value)},
_onRegionChange:function(a){this.clearErrors(["#allInclusive_region_widget"]);this.model.regionCode=$(a.currentTarget).val();this.model.regionCode&&this.model.regionCode.length&&$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Region",this.model.destinationCode+"/"+this.model.regionCode)},_onDepartureDateChange:function(a,b,d){this.validateDates();this.departureDate&&(a=[this.departureDate],this.returnDate&&a.push(this.returnDate),this.ui.departureDate.selectDays(a,!0),this.ui.returnDate.selectDays(a))},
_onReturnDateChange:function(a,b,d){this.validateDates();this.returnDate&&(a=[this.returnDate],this.departureDate&&a.unshift(this.departureDate),this.ui.departureDate.selectDays(a),this.ui.returnDate.selectDays(a,!0))},_onDepartureCityKeyDown:function(a){this.clearError("#allInclusive_departureCityTextWidget");$(a.target).parent().removeClass("location-airport")},_onDepartureCityBlur:function(a){this.clearError("#allInclusive_departureCityTextWidget");a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=
this.module.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({allInclusive_departureCityTextWidget:$namespace.MessageUtil.prefixError(a)})):this.ui.departureLocation.hasValidSelection()||$namespace.Utils.showErrors({allInclusive_departureCityTextWidget:$namespace.MessageUtil.prefixError(b.VP_INVALID_AIRPORT.translatedText)})}},_onServiceClassChange:function(a){a=$(a.currentTarget).val();
this.model.serviceClass=a;$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Class",a)},_onRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","Travelers","Rooms",a)},_onChildrenChange:function(a){a=+$(a.currentTarget).val();this.updateRoomChildren(this.model.rooms[0],a);this.setRoomLayout(!0);$namespace.TabOrder.updatePageTabOrder();
$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_Children","Children",a)},_onAdultsChange:function(a){a=+$(a.currentTarget).val();this.model.rooms[0].adultCount=a;$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_Adults","Adults",a)},_onMultiChildrenChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);0==a&&1==this.model.rooms.length?this.setRoomLayout(!0):this.setRoomChildLayout(b);
$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_Children","Children",a)},_onMultiAdultsChange:function(a){var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_Adults","Adults",a)},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,
a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder();-1<a&&2>a&&this.ui.includeFlight.is(":checked")?$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_LapChildren",
"Lap Children",a):$namespace.Analytics.trackEvent("all_inclusive_event_searchWidget","pax_Children","Children",a)},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},_onGeoClick:function(a){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition($.proxy(this.geoSuccess,this),$.proxy(this.geoError,this),{timeOut:3E4,maximumAge:6E5});a.preventDefault()},getVp1DestinationsLasVegas:function(){var a=
this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageSearch.act","ctvps=GET_GLOBAL_CONFIG_VP1SW_DESTINATIONS",null,null,function(b){b=b.map(function(a){return a.replace(/\s/g,"")});a.vp1DestinationLasVegas=b.pop()},null)},_onSubmit:function(a){this.model.includeFlight=this.ui.includeFlight.is(":checked");if(/THEMEPARKS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Theme-Parks");else if(/LIONWORLDTRAVEL/i.test(this.model.destinationCode))window.location.replace(_webLoc+
"/Experiences/Lion-World-Travel");else if(/ESCORTEDVACATIONS/i.test(this.model.destinationCode))window.location.replace(_webLoc+"/Experiences/Guided-Vacations");else if(this.validate()){for(var b=this.model.rooms,d=0,e=[],f=[],g=[],h=[],k=0,l=0,p=0;p<b.length;p++){var q=b[p].adultCount,r=b[p].children.length;d+=b[p].adultCount+b[p].children.length;k+=q;l+=r;e.push(b[p].adultCount);f.push(b[p].children.length);for(q=0;q<b[p].children.length;q++)g.push(b[p].children[q].age),h.push(b[p].children[q].seat)}q=
!1;for(p=0;p<$namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED.length;p++)if($namespace.GlobalConstants.DEFAULT_MULTI_DESTINATIONS_CHECKED[p].toLowerCase()==this.model.destinationCode.toLowerCase()){q=!0;break}var v=this.ui.destination.select[0],n=this.ui.region.select[0];p="";r=v.options[v.selectedIndex].text;b="_"+this.model.departureDate+"_"+this.model.returnDate;k="_"+this.model.rooms.length+"_"+k+"_"+l;this.cleanUpHardCodedVpDestinationsFlag||"lasVegas"!=this.model.destinationCode?
this.cleanUpHardCodedVpDestinationsFlag&&this.model.destinationCode.toLowerCase()==this.vp1DestinationLasVegas?(this.model.regionCode=this.vp1DestinationLasVegas.substring(0,3).toUpperCase(),p=$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(0,3))+" "+$namespace.Utils.capitalizeFirstLetterInString(this.vp1DestinationLasVegas.substring(3,9))):n.options.length&&(l=-1<n.selectedIndex?n.options[n.selectedIndex]:n.options[0],l.value==this.model.regionCode&&(p=l.text)):
(this.model.regionCode="LAS",p="Las Vegas");d={cityCode:this.model.regionCode,cityName:p,destination:this.model.destinationCode,destinationName:v.options[v.selectedIndex].text,departureDate:this.model.departureDate,arrivalDate:this.model.returnDate,numberOfNights:$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),flightChecked:this.model.includeFlight,numberOfPassengers:d,hotelRooms:this.model.rooms.length,adults:e.join(","),children:f.join(","),childrenAges:g.join(","),
childSeatFlags:h.join(","),serviceClass:this.model.serviceClass,multiCityPackagesRequested:q};e=r;p&&""!=p&&(e+="-"+p);e+=b;this.model.includeFlight?(d.departureCityCode=this.model.departureLocationCode,d.departureCity=this.model.departureLocationName,e+="_"+this.model.departureLocationCode):e+="_no-flight";e+=k;$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED?d.ctvps="SEARCH_VACATION_PACKAGES":d.fsr="LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";this.model.includeFlight&&(d.departureCityCode=
this.model.departureLocationCode,d.departureCity=this.model.departureLocationName);$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(this.model),0);$namespace.Analytics.trackEvent("all_inclusive_event_searchDetails","Click",e.replace(/%2C/g,",").replace(/%20/g," "));d.uid=$namespace.Utils.getUID();this.submitForm(d)}a.preventDefault()},_loadCitiesOfSelectedDestination:function(a){this.model.regionCode="";if(a=this.regions[a]){var b=a.slice(0);1<a.length?b.unshift({text:this.module.TranslationTexts.PLACEHOLDER_REGION_SELECTION,
value:""}):1==a.length&&(this.model.regionCode=a[0].value,this.ui.region.select.val(this.model.regionCode));this.ui.region.replaceOptions(b)}},_loadServiceClassesByDestinationCode:function(a){var b=this;a="sw=LOAD_SERVICE_CLASSES_BY_DESTINATION&destination="+a+("&serviceClass="+this.ui.serviceClass.val());$namespace.AjaxUtil.makeAjaxCall("searchWidget.act",a,null,"allInclusive_serviceClassWidget",function(a){a=JSON.parse(a);/^any$/i.test(a[0].value)||a.unshift({text:b.module.TranslationTexts.PLACEHOLDER_ANY_OPTION,
value:"Any"});b.ui.serviceClass.replaceOptions(a)},"")},submitForm:function(a){var b=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.Storage.set("vacation-packages-search-form",a);$namespace.DomUtil.setElementLoadingMask(!0);this.isSubmitting=!0;if(this._isDestinationBookable(a.destination)){var d=this._isRegionRequired(a.destination);var e=b?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";d?e+="&cityCode="+a.cityCode:"lasVegas"==
a.destination&&(e+="&cityCode=LAS");e+="&destination="+a.destination;e+="&flightChecked="+a.flightChecked;e+="&arrivalDate="+a.arrivalDate;e+="&departureDate="+a.departureDate;e+="&numberOfNights="+a.numberOfNights;e+="&numberOfPassengers="+a.numberOfPassengers;e+="&hotelRooms="+a.hotelRooms;e+="&adults="+a.adults;e+="&children="+a.children;e+="&childrenAges="+a.childrenAges;e+="&childSeatFlags="+a.childSeatFlags;e=e+"&fromWidget=true&fromMenu=false&serviceClass="+a.serviceClass;e+="&multiCityPackagesRequested="+
a.multiCityPackagesRequested;e+="&suppressOutput=true&filterPropertyTypes=ALL-INCLUSIVE";a.flightChecked&&(e+="&departureCity="+a.departureCity,e+="&departureCityCode="+a.departureCityCode);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(b?"vacationPackageSearch.act":"vacationPackageFilteredSearchResults.act",e,null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h=1001")},null,"")}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		
	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ShareableSearch=new function(){this.TranslationTexts={NO_RESULTS_TITLE:{comments:{defaultComment:"No Results Found"},text:"No Results Found"},NO_RESULTS_TEXT:{comments:{defaultComment:"No Results Found Text"},text:"Your Search is no longer valid. Plese enter new criteria and search again."},NO_HOTELS_TEXT:{comments:{defaultComment:"No Hotels Found Text"},text:"There are no hotels available for the location you have selected."},NO_AIRPORT_TEXT:{comments:{defaultComment:"No Flights Found Text"},
text:"No flights available for your search criteria."}};this.loadSearchResults=function(a){window&&window.sessionStorage?window.sessionStorage.setItem("SHAREABLE_SEARCH_ENABLED","enabled"):DomUtil.createCookie("SHAREABLE_SEARCH_ENABLED","enabled");$namespace.Analytics.trackEvent("HO_Shared_Search","Click","Success");$namespace.DomUtil.setElementLoadingMask(!0);a=JSON.stringify(a);$namespace.DomUtil.createCookie("HOTEL_SEARCH_WIDGET_VALUES",a,0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearch.act",
"hos=ACTION_SEARCH_HOTELS_FRIENDLY_LINK&hobeHotelSearchInfo="+a,null,null,this.callbackLoadSearch,null,"","Searching, please stand by.Search is loading")};this.callbackLoadSearch=function(a){a?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS+"_"+a):$namespace.ShareableSearch.noHotelsErrorPage()};this.loadErrorPage=function(){$namespace.Analytics.trackEvent("HO_Shared_Search","Click","Error");$namespace.MessageUtil.showNoShareableResultMessage({title:this.TranslationTexts.NO_RESULTS_TITLE.text,
text:this.TranslationTexts.NO_RESULTS_TEXT.text},this.onCloseErrorPage)};this.noHotelsErrorPage=function(){$namespace.DomUtil.setElementLoadingMask(!1,1);$namespace.Analytics.trackEvent("HO_Shared_Search","Click","Error");$namespace.MessageUtil.showNoShareableResultMessage({title:this.TranslationTexts.NO_RESULTS_TITLE.text,text:this.TranslationTexts.NO_HOTELS_TEXT.text},this.onCloseErrorPage)};this.onCloseErrorPage=function(){$namespace.Navigation.loadPage(_webLoc+"/Hotels")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};
$namespace.View.RentalCarBrandView=Backbone.View.extend({el:".car_rental_brand_page",ui:{coupons:null},events:{'change .ct-coupon input[type="radio"]':"_onInputChange","click .ct-coupon":"_onClick"},views:{},initialize:function(a){a=$.extend({},a);this.module=a.module;this.views.search=a.search;var b=this;this.ui.coupons=$("DIV.ct-coupon");this.ui.coupons.each(function(a,e){a=$(e);if(a.find('input[type="radio"]').is(":checked"))return b.setCoupon(a),!1});$(".ct-coupon").keydown(function(a){var d=
$namespace.Utils.Keyboard,f=d.getCode(a);f!==d.ENTER&&f!==d.SPACE||b._onClick(a)})},setCoupon:function(a){this.module.setTab("rental-cars",!0,!0);this.ui.coupons=$(".ct-coupon");this.ui.coupons.removeClass("active");this.ui.coupons.find('input[type="radio"]').prop("checked",!1);a.find('input[type="radio"]').prop("checked",!0);a.addClass("active");$namespace.SearchWidgetsModule.setCarCoupon(a)},_onInputChange:function(a){a.stopPropagation();a.stopImmediatePropagation();a.preventDefault()},_onClick:function(a){var b=
$(a.currentTarget).closest("[data-vendor-id][data-coupon-code]"),d=$(a.target),e=utils.getParentElementOf(d,function(a){return"terms_and_conditions"===a.attr("data-modal")});"terms_and_conditions"==d.attr("data-modal")||e?(d=d.parents(".ct-coupon"),b="rcbc=LOAD_CAR_COUPON_TERMS_AND_CONDITIONS&carCouponCode="+d.attr("data-coupon-code"),b+="&carCompanyCode="+d.attr("data-vendor-name"),b+="&carAgencyId="+d.attr("data-agency-id"),b+="&carVendorId="+d.attr("data-vendor-id"),d=function(a){return function(){var b=
a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_SEARCH_NO_RESULTS_TITLE}):(b=utils.getTemplate("terms_and_conditions"),b.length&&($.hook("termsAndConditionsContent",b).html(this.responseText),(new $namespace.Widgets.Modal(b)).show()))}}(this),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarsBrandContent.act",b,null,null,d,null)):b&&b.length&&this.setCoupon(b);a.stopPropagation();a.stopImmediatePropagation();a.preventDefault()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};breakpoint=utils.Breakpoint;
$namespace.View.RentalCarResultsView=Backbone.View.extend({el:"#car_rental_grid",ui:{mobileGrid:null,resultsSorter:null,submitButton:null},events:{"change #results_sorter select":"_onSortChange","click .car-result-card":"_onClick",'click [data-hook="cancel_matrix_result"]':"_onCancelClick",'click [data-hook="go_back"]':"_onBackLink",'click [data-modal^="rental_car_details_terms_and_conditions_modal"]':"_onTermsConditionsClick",'click [data-hook="submit_matrix_result"]':"_onSubmitMatrixResult"},items:[],
views:{},categoryUid:null,productUid:null,isSubmitting:!1,originalView:null,initialize:function(a){this.module=$.extend({},a).module;this.ui.mobileGrid=$.hook("mobile_grid",this.el);this.ui.resultsSorter=$.hook("results_sorter",this.el);if(breakpoint.isMobile())this.originalView="MOBILE",this.mobileUI();else{this.originalView="DESKTOP";a=$(".carPickupDropoffLocationDetails");for(var b=0;b<a.length;b++){for(var d=$(a[b]).attr("data-location-details").split("|"),e=$(a[b]).attr("aria-label")?$(a[b]).attr("aria-label"):
"",f=0;f<d.length;f++){var g=$("#"+d[f]).text();g&&(e+="\n"+g)}$(a[b]).attr("aria-label",e)}this.setPreselect()}$(window).on("resize orientationchange",$.proxy(this._onResize,this));$namespace.Analytics.trackPageView("/rc/booking/searchWidget/carMatrix/ALL");this._onResize();setTimeout(function(){$("#result_sort_by").trigger("change")},0)},setPreselect:function(){var a=this;$(".car-result-card").each(function(b,d){"true"==$(d).attr("data-selected")&&a.setItem($(d),!1)})},setPreviouslySelectedMobileUI:function(){var a=
this,b=$("a.card.car-result-card.active").attr("id");b&&"DESKTOP"===this.originalView&&$(".car-result-card").each(function(d,e){$(e).attr("id")==b&&a.setItem($(e),!0,!0)})},_onBackLink:function(a){window.history.back()},mobileUI:function(){var a=this,b=[],d=this.ui.resultsSorter.find("select");this.ui.mobileGrid.empty();$(".desktop-grid .car-result-card").each(function(d,e){var f=e.getAttribute("data-brand"),g=e.getAttribute("data-price"),l=utils.String.ucFirst(f);e.setAttribute("data-index",d);-1===
b.indexOf(l)&&b.push(l);a.items.push({price:g,brand:f,index:d,element:e.cloneNode(!0)})});this.items.sort(function(a,b){return parseFloat(a.price)-parseFloat(b.price)||0});for(var e=0;e<this.items.length;e++)$(this.items[e].element).removeClass("active"),this.ui.mobileGrid.append(this.items[e].element);for(e=0;e<b.length;e++)d.append($("<option></option>",{text:b[e],value:b[e].toLowerCase()}));this.setAriaLabelInMobileGrid()},setAriaLabelInMobileGrid:function(){$("div.mobile-grid-container a.car-result-card").each(function(){var a=
"",b=$(this).find("p.selected-offer").html();b&&(a+=b.trim()+" ");(b=$(this).find("div.car-brand img"))&&(a+=b.attr("alt").trim()+" ");(b=$(this).find("div.car-info h3").html())&&(a+=b.trim()+". ");(b=$(this).find("div.car-info span.car-type").html())&&(a+=b.trim()+". ");(b=$("div.pickUpLocationText").html())&&(a+=b.trim()+" ");(b=$("div.car-info span.car-agency-name").html())&&(a+=b.trim()+". ");(b=$(this).find("div.car-capacity div span").html())&&(a+=b.trim()+". ");(b=$(this).find("p.car-price span.rounded-price").html())&&
(a+=b.trim()+" ");(b=$(this).find("div.carAddedValues p.car-discount").html())&&(a+=b.trim()+". ");$(this).attr("aria-label",a);$(this).find("p.car-price").attr("aria-hidden","true");$(this).find("div.carAddedValues").attr("aria-hidden","true")})},setItem:function(a,b,d){var e=null;if(breakpoint.isMobile())e=a.parent();else{var f=$("<div></div>",{"class":"car-rental-info booking-summary","data-taborder":"document",id:"car-rental-info-booking-summary-id"}).append('<div id=selectedCarDetails class="card"></div>');
e=utils.getParentElementOf(a,function(a){return a.hasClass("row-car-grid")})}if(e){$(".car-rental-info").remove();$(".car-result-card").removeClass("active");a.addClass("active");breakpoint.isMobile()||e.append(f);this.categoryUid=a.attr("data-category-id");this.responsiveReferrer=a.attr("data-responsive-referrer");var g=$(e).find("div.car-rental-info.booking-summary");breakpoint.isMobile()?$namespace.DomUtil.setElementLoadingMask(!0):$namespace.DomUtil.setElementLoadingMask(!0,g);f="&categoryItemUid="+
this.categoryUid;f+="&referrer="+this.responsiveReferrer;f+="&rcd=LOAD_RENTAL_CAR_DETAILS";var h=breakpoint.isMobile()?null:"selectedCarDetails";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarDetails.act",f,null,h,function(){breakpoint.isMobile()?$namespace.DomUtil.setElementLoadingMask(!1):$namespace.DomUtil.setElementLoadingMask(!1,g);if(breakpoint.isMobile()){var f=$("<div></div>",{"class":"car-rental-info booking-summary"}),h=$('<div id=selectedCarDetails class="card"></div>');f.append(h);
h.html(this.responseText);e.append(f);$("#categoryImage").on("load",function(){var a=f.height(),b=$(".car-sorting").height();a-=b;$(".mobile-grid-container").css({height:a,padding:0});d?e.find(".car-capacity h2").focus():$("html, body").animate({scrollTop:f.offset().top},500,function(){e.find(".car-capacity h2").focus()})})}else{$("a.card.car-result-card").removeAttr("data-tab-after");h=$("a.card.car-result-card.active").parents("div.row").find("a.card.car-result-card");for(var p="",q=0;q<h.length;q++)""!=
p&&($(h[q]).attr("data-tab-after",p),p=$(h[q]).attr("id")),$(h[q]).hasClass("active")&&(p="submit_matrix_result_id",b&&$(a).focus());$namespace.TabOrder.updatePageTabOrder();setTimeout(function(){$("a.card.car-result-card.active").attr("aria-expanded","true")},100)}},"",null,!1)}},_onSortChange:function(a){var b=(""+$(a.currentTarget).val()).toLowerCase();b?this.ui.mobileGrid.children().each(function(a,e){a=$(e);(""+a.attr("data-brand")).toLowerCase()===b?a.show():a.hide()}):(this.ui.mobileGrid.children().show(),
this.ui.mobileGrid.children().length!==this.ui.mobileGrid.children().not(".lowest-price").length&&this.ui.mobileGrid.children().not(".lowest-price").hide())},_onCancelClick:function(a){var b=$(".car-rental-info"),d=$("a.card.car-result-card.active");$(".car-result-card").removeClass("active");b.fadeOut(function(){$(".mobile-grid-container").removeAttr("style");b.remove()});breakpoint.isMobile()&&setTimeout(function(){d.find("h3").focus()},1E3)},_onClick:function(a){var b=$(a.currentTarget).attr("id"),
d=$("a.card.car-result-card.active").attr("id");b!=d&&$("a.card.car-result-card.active").attr("aria-expanded","false");this.setItem($(a.currentTarget),!0);a.preventDefault()},_onTermsConditionsClick:function(a){var b=$(a.target),d=b.attr("data-brand");b=b.attr("data-modal");$namespace.Analytics.trackPageView("/rc/booking/TermsConditions/"+d);(new $namespace.Widgets.Modal(utils.getTemplate(b))).show();a.preventDefault()},_onResize:function(a){if(breakpoint.isMobile()&&0===this.ui.mobileGrid.children().length)this.mobileUI(),
(a=$("a.card.car-result-card.active").attr("id"))?this.setPreviouslySelectedMobileUI():setTimeout(function(){$("#result_sort_by").trigger("change")},0);else if(breakpoint.isMobile())this.setPreviouslySelectedMobileUI();else if(this.originalView="DESKTOP",a=$("a.card.car-result-card.active").attr("id"))a=$("#"+a),this.setItem(a,!0)},_onSubmitMatrixResult:function(a){var b=$(a.currentTarget);a=b.attr("data-brand");var d=b.attr("data-category-uid"),e=b.attr("data-car-category");b=b.attr("data-car-make-model");
$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act","rcm=SUBMIT_RENTAL_CAR_SELECTION&carCategoryUid="+d,null,null,function(){$namespace.Navigation.loadPage("h="+(this.callbackFunctionParams&&this.callbackFunctionParams.length?this.callbackFunctionParams[0]:$namespace.PageHistoryConstants.HISTORY_CAR_BOOKING_RECAP))});$namespace.Analytics.trackPageView("/rc/booking/searchWidget/carOptions/"+a);$namespace.AnalyticsHelper.setRentalCarId(a,
e,b);$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"19",v33:$namespace.AnalyticsHelper.getRentalCarId()})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};breakpoint=utils.Breakpoint;
$namespace.View.VP2RentalCarResultsView=Backbone.View.extend({el:"#car_rental_grid",ui:{mobileGrid:null,resultsSorter:null,submitButton:null},events:{"change #results_sorter select":"_onSortChange","click .car-result-card":"_onClick",'click [data-hook="cancel_matrix_result"]':"_onCancelClick",'click [data-modal^="rental_car_details_terms_and_conditions_modal"]':"_onTermsConditionsClick",'click [data-hook="vp2_submit_matrix_result"]':"_onSubmitVP2MatrixResult",'click [data-hook="modify_vp2_transportation_details"]':"_onVP2ModifyDetailsClick",
'click [data-hook="update_jdc_modify_details"]':"_updateJDCModifyDetails",'click [data-hook="remove_JDC_rental_car"]':"_onRemoveCarClick",'change [data-hook="selectPickupLocation"]':"_onSelectPickupLocationChange",'change [data-hook="selectDropOffLocation"]':"_onSelectDropOffLocationChange"},items:[],views:{},categoryUid:null,productUid:null,isSubmitting:!1,originalView:null,initialize:function(a){a=$.extend({},a);this.translations=a.module.TranslationTexts;this.module=a.module;$namespace.Storage.set("transportation-page",
{isVisited:!0});this.ui.mobileGrid=$.hook("vp2_mobile_grid",this.el);this.ui.resultsSorter=$.hook("results_sorter",this.el);breakpoint.isMobile()?(this.originalView="MOBILE",this.mobileUI()):(this.originalView="DESKTOP",this.setPreselect());$(window).on("resize orientationchange",$.proxy(this._onResize,this));$namespace.Analytics.trackPageView("/rc/booking/searchWidget/carMatrix/ALL");this._onResize();setTimeout(function(){$("#result_sort_by").trigger("change")},0)},setPreselect:function(){var a=
this;$(".car-result-card").each(function(b,d){"true"==$(d).attr("data-selected")&&a.setItem($(d),!1)})},setPreviouslySelectedMobileUI:function(){var a=this,b=$("a.card.car-result-card.active").attr("id");b&&"DESKTOP"===this.originalView&&$(".car-result-card").each(function(d,e){$(e).attr("id")==b&&a.setItem($(e),!0,!0)})},_onBackLink:function(a){window.history.back()},mobileUI:function(){var a=this,b=[],d=this.ui.resultsSorter.find("select");this.ui.mobileGrid.empty();$(".desktop-grid .car-result-card").each(function(d,
e){var f=e.getAttribute("data-brand"),g=e.getAttribute("data-price"),l=utils.String.ucFirst(f);e.setAttribute("data-index",d);-1===b.indexOf(l)&&b.push(l);a.items.push({price:g,brand:f,index:d,element:e.cloneNode(!0)})});this.items.sort(function(a,b){return parseFloat(a.price)-parseFloat(b.price)||0});for(var e=0;e<this.items.length;e++)$(this.items[e].element).removeClass("active"),this.ui.mobileGrid.append(this.items[e].element);for(e=0;e<b.length;e++)d.append($("<option></option>",{text:b[e],value:b[e].toLowerCase()}));
this.setAriaLabelInMobileGrid()},setAriaLabelInMobileGrid:function(){$("div.mobile-grid-container a.car-result-card").each(function(){var a="",b=$(this).find("p.selected-offer").html();b&&(a+=b.trim()+" ");(b=$(this).find("div.car-brand img"))&&(a+=b.attr("alt").trim()+" ");(b=$(this).find("div.car-info h3").html())&&(a+=b.trim()+" ");(b=$(this).find("div.car-info h4.car-type").html())&&(a+=b.trim()+" ");(b=$(this).find("div.car-capacity div span").html())&&(a+=b.trim()+" ");(b=$(this).find("p.car-price span.rounded-price").html())&&
(a+=b.trim()+" ");(b=$(this).find("p.car-price span.vp2-rounded-price").html())&&(a+=b.trim()+" ");(b=$(this).find(".priceShownOnMatrix").html())&&(a+=b.trim()+" ");(b=$(this).find("div.carAddedValues p.car-discount").html())&&(a+=b.trim()+" ");$(this).attr("aria-label",a);$(this).find("p.car-price").attr("aria-hidden","true");$(this).find("div.carAddedValues").attr("aria-hidden","true")})},setItem:function(a,b,d){var e=null,f=a.attr("data-category-id").replace(/-|:/g,"");f="id"+f.slice(f.length-
4);if(breakpoint.isMobile())e=a.parent();else{var g=$("<div></div>",{"class":"car-rental-info booking-summary",id:f}).append('<div id=selectedCarDetails class="card"></div>');e=utils.getParentElementOf(a,function(a){return a.hasClass("row-car-grid")})}if(e){$(".car-rental-info").remove();$(".car-result-card").removeClass("active");a.addClass("active");breakpoint.isMobile()||e.append(g);this.categoryUid=a.attr("data-category-id");this.responsiveReferrer=a.attr("data-responsive-referrer");f=a.attr("data-relative-price");
var h=a.attr("data-relative-price-isNumber"),k=$(e).find("div.car-rental-info.booking-summary");breakpoint.isMobile()?$namespace.DomUtil.setElementLoadingMask(!0):$namespace.DomUtil.setElementLoadingMask(!0,k);g="&categoryItemUid="+this.categoryUid;g=g+("&relativePrice="+f)+("&relativePriceIsNumber="+h)+("&referrer="+this.responsiveReferrer);g+="&rcd=LOAD_RENTAL_CAR_DETAILS";f=breakpoint.isMobile()?null:"selectedCarDetails";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarDetails.act",g,null,
f,function(){breakpoint.isMobile()?$namespace.DomUtil.setElementLoadingMask(!1):$namespace.DomUtil.setElementLoadingMask(!1,k);if(breakpoint.isMobile()){var f=$("<div></div>",{"class":"car-rental-info booking-summary jdc-car-card-border"}),g=$('<div id=selectedCarDetails class="card"></div>');f.append(g);g.html(this.responseText);e.append(f);$("#categoryImage").on("load",function(){var a=f.height(),b=$(".car-sorting").height();a-=b;$(".mobile-grid-container").css({height:a,padding:0});d?e.find(".car-capacity h2").focus():
$("html, body").animate({scrollTop:f.offset().top},500,function(){e.find(".car-capacity h2").focus()})});$("div.mobile-grid-container a.car-result-card").each(function(){$(this).attr("aria-hidden","true");$(this).hide()})}else{$("a.card.car-result-card").removeAttr("data-tab-after");g=$("a.card.car-result-card.active").parents("div.row").find("a.card.car-result-card");for(var h="",r=0;r<g.length;r++)if(""!=h&&($(g[r]).attr("data-tab-after",h),h=$(g[r]).attr("id")),$(g[r]).hasClass("active")&&(h="Included in Package"==
a.attr("data-relative-price")?"vp2_car_terms_conditions":"submit_matrix_result_id",b)){$(a).focus();var v=$("#selectedCarDetails");v.length&&$namespace.DomUtil.scrollToMiddle(v)}setTimeout(function(){$("a.card.car-result-card.active").attr("aria-expanded","true")},100)}$namespace.TabOrder.updatePageTabOrder()},"",null,!1)}},_onSortChange:function(a){var b=(""+$(a.currentTarget).val()).toLowerCase();b?this.ui.mobileGrid.children().each(function(a,e){a=$(e);(""+a.attr("data-brand")).toLowerCase()===
b?a.show():a.hide()}):(this.ui.mobileGrid.children().show(),this.ui.mobileGrid.children().length!==this.ui.mobileGrid.children().not(".lowest-price").length&&this.ui.mobileGrid.children().not(".lowest-price").hide())},_onCancelClick:function(a){var b=$(".car-rental-info"),d=$("a.card.car-result-card.active");$(".car-result-card").removeClass("active");b.fadeOut(function(){$(".mobile-grid-container").removeAttr("style");b.remove()});breakpoint.isMobile()&&($("div.mobile-grid-container a.car-result-card").each(function(){$(this).attr("aria-hidden",
"false");$(this).show()}),setTimeout(function(){d.find("h3").focus()},1E3))},_onClick:function(a){var b=$(a.currentTarget).attr("id"),d=$("a.card.car-result-card.active").attr("id");b!=d&&$("a.card.car-result-card.active").attr("aria-expanded","false");this.setItem($(a.currentTarget),!0);a.preventDefault()},_onTermsConditionsClick:function(a){var b=$(a.target),d=b.attr("data-brand");b=b.attr("data-modal");$namespace.Analytics.trackPageView("/rc/booking/TermsConditions/"+d);(new $namespace.Widgets.Modal(utils.getTemplate(b))).show();
a.preventDefault()},_onResize:function(a){if(breakpoint.isMobile()&&0===this.ui.mobileGrid.children().length)this.mobileUI(),(a=$("a.card.car-result-card.active").attr("id"))?this.setPreviouslySelectedMobileUI():setTimeout(function(){$("#result_sort_by").trigger("change")},0);else if(breakpoint.isMobile())this.setPreviouslySelectedMobileUI();else if(this.originalView="DESKTOP",a=$("a.card.car-result-card.active").attr("id"))a=$("#"+a),this.setItem(a,!0)},_onSubmitVP2MatrixResult:function(a){var b=
$(a.currentTarget),d=b.attr("data-price-change");a=b.attr("data-category-uid");var e=b.attr("data-jdc-search"),f=b.attr("data-jdc-add-ons-search"),g=b.attr("data-dropFee-price");"No Change in Price"==d?(d=b.attr("data-brand"),f=b.attr("data-car-category"),b=b.attr("data-car-make-model"),$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act","rcm=SUBMIT_RENTAL_CAR_SELECTION&carCategoryUid="+a,null,null,function(){"true"==e?$namespace.Navigation.loadPage("h="+
$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION):($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null))}),$namespace.Analytics.trackPageView("/rc/booking/searchWidget/carOptions/"+
d),$namespace.AnalyticsHelper.setRentalCarId(d,f,b),$namespace.Analytics.track({vendor:"adobe",type:"ev",events:"19",v33:$namespace.AnalyticsHelper.getRentalCarId()})):this._showConfirmationModal(a,d,e,f,g);a=$('INPUT[id="eventLabelId"]').val();$namespace.Analytics.trackEvent("VP_Transportation_Select","Click",a)},_showConfirmationModal:function(a,b,d,e,f){b="rcm=SHOW_CAR_PRICE_CHANGE_CONFIRMATION&carCategoryUid="+a+("&priceChange="+b)+("&changedCarDropFeeAmount="+f);var g=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",
b,null,null,function(){var b=new $namespace.Widgets.Confirm(this.responseText,function(){var e=$('INPUT[id="eventLabelId"]').val();$namespace.Analytics.trackEvent("VP_Transportation","Click",e);g._triggerAnalyticsForTransportationChange();b.hide();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act","rcm=SUBMIT_RENTAL_CAR_SELECTION&carCategoryUid="+a,null,null,function(){"true"==d?$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION):
($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null))},null,"")},function(){b.hide()});b.show()},null,"")},_triggerAnalyticsForTransportationChange:function(){var a=$('INPUT[id="selectedTransferUid"]').val(),
b=$('INPUT[id="displaySelectedItemsOnly"]').val(),d=$('a[data-relative-price="Included in Package"]').data("product-id"),e=$('INPUT[id="carTypeId"]').val(),f=$('INPUT[id="carBrandId"]').val();f=$('INPUT[id="eventLabelId"]').val()+"/"+e+"/"+f;"undefined"===typeof b||"false"==b&&"undefined"==typeof d?$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_NoneToCar","Click",f,null):"undefined"!=e&&"true"===a&&"true"===b&&$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_TransferToCar",
"Click",f,null)},_onVP2ModifyDetailsClick:function(a){a="vptr=SHOW_CAR_MODIFY_DETAILS&uid="+$(a.currentTarget).attr("data-car-category-uid");var b=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Modify_Details","Click",b,null);document.getElementById("midifyDetailsButton").classList.remove("custom-pad-t-m-20");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#vp2-car-modify").html(this.responseText),$("#hideModify").hide(),$("#car-modify").show(),$namespace.TabOrder.updatePageTabOrder(),$('div[data-hook="numberOfCars"]').focus())},null,"")},_onRemoveCarClick:function(a){$(a.currentTarget);var b=$('INPUT[id="eventLabelId"]').val();a=$('INPUT[id="carTypeId"]').val();var d=$('INPUT[id="carBrandId"]').val(),e=b+"/"+a+"/"+d;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",
"rcm=SHOW_CAR_PRICE_CHANGE_CONFIRMATION_TO_REMOVE_CAR",null,null,function(){var a=new $namespace.Widgets.Confirm(this.responseText,function(){a.hide();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act","rcm=SUBMIT_REMOVE_CAR",null,null,function(){$namespace.Analytics.trackEvent("VP_Transportation","Click",b);$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_RemoveCar","Click",e,null);$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},
null,"")},function(){a.hide()});a.show()},null,"");$namespace.Analytics.trackEvent("VP_Transportation_Remove","Click",b)},_updateJDCModifyDetails:function(a){$(a.currentTarget);a=$("#pickUpTimePreValue").val();var b=$("#dropOffTimePreValue").val(),d=$("#pickupLocationPreValue").val(),e=$("#dropoffLocationPreValue").val(),f=0<$("#pickupLocationId").length?$("#pickupLocationId").val():d,g=0<$("#dropoffLocationId").length?$("#dropoffLocationId").val():e,h=!1;if(f!=d||g!=e)h=!0;d=$("#carProductTimeSelected").val();
e=$("#pickupTime").val();var k=$("#dropoffTime").val();0==h&&a==e&&b==k&&"true"==d?$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION):this._showJdcUpdateCarConfirmationModal(e,k,f,g,h)},_showJdcUpdateCarConfirmationModal:function(a,b,d,e,f){d="rcm=UPDATE_PICKUP_DROPOFF_TIME&newPickupTime="+a+("&newDropoffTime="+b)+("&newPickupLocationId="+d);d+="&newDropoffLocationId="+e;d+="&locationChanged="+f;var g=$("#selectedJdcCarCompanyName").val();
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",d,null,null,function(d,e){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if("NewSearchLocationNoCarAvailable"==d){var f=new $namespace.Widgets.Confirm(this.responseText);f.show()}else"false"==d?(d=$("#noCarAvailableImagePath").val(),$("#transportationCarNotAvailableMessage").html("<span>"+e+'</span><img src="'+d+g+'.gif" align="absmiddle" class="vp-jdc-no-car-available-msg-img-label"/>'),
$("#vpJdcNoCarAvailableMsg").removeClass("vp-jdc-no-car-available-msg-hide")):"true"==d?(e="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+a,e+="&newDropoffTime="+b,$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",e,null,null,function(){$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null,"")):(f=new $namespace.Widgets.Confirm(this.responseText,function(){f.hide();var d="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+
a;d+="&newDropoffTime="+b;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",d,null,null,function(){$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null,"")},function(){f.hide()}),f.show())},null,"")},_onSelectPickupLocationChange:function(a){var b=$(a.currentTarget);a=b.val();var d=b.find("option:selected");b=d.attr("agencyAddress");d=d.attr("agencyCityState");$("#pickupLocationAddress1").html(b);$("#pickupLocationCityState").html(d);
0<$("select#pickupTime").length&&$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=LOAD_JDC_CAR_PICK_UP_OPERATION_HOURS&selectedLocationId="+a,null,null,function(){$("#pickupTime").html(this.responseText)},null,"")},_onSelectDropOffLocationChange:function(a){var b=$(a.currentTarget);a=b.val();var d=b.find("option:selected");b=d.attr("agencyAddress");d=d.attr("agencyCityState");$("#dropoffLocationAddress1").html(b);$("#dropoffLocationCityState").html(d);0<$("select#dropoffTime").length&&
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=LOAD_JDC_CAR_DROP_OFF_OPERATION_HOURS&selectedLocationId="+a,null,null,function(){$("#dropoffTime").html(this.responseText)},null,"")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};var CONFIG=$namespace.CONFIG||{};removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY;var MAP_DIV_ENABLED="MAP_DIV_ENABLED";
$namespace.View.RentalCarLocationsView=Backbone.View.extend({el:"#car_rental_map",ui:{map:null,list:null,pageWrap:null,pageHeader:null,sortRow:null,selectionCount:null,resultsList:null,sortMenu:null,pagination:null,viewToggle:null},map:null,location:null,isSubmitting:!1,RENTAL_CAR_SELECTED_AGENCIES_CACHE:"RENTAL_CAR_SELECTED_AGENCIES_CACHE",events:{"change #location_sort":"_onSortChange",'focusin a[data-hook="focus_marker"]':"_onItemFocus","focusin #location_sort_widget":"_onItemFocus","click a[data-location-id]":"_onSelectLocationClick",
"click .pagination-wrapper a":"_onPaginationClick",submit:"_onSubmit",'click [data-hook="go_back"]':"_onBackLink",'click [data-hook="toggle_location_view_desktop"]':"_toggleMobileViewDesktop",'click [data-hook="toggle_location_view"]':"_toggleMobileView",'keydown a[data-hook="focus_marker"]':"_locationResultSelection"},filter:null,selectedLocations:[],currentPage:1,resultsPerPage:10,totalResults:0,featureFlagCRBEResultsMapHideEnable:!1,showMapIfOpenInPrevPage:!1,collection:null,views:{},translations:null,
moveSortRow:function(){utils.Breakpoint.isMobile()||$namespace.Browser.iPad?($(this.ui.sortRow).detach(),$(this.ui.pageWrap).prepend(this.ui.sortRow)):($(this.ui.sortRow).detach(),$(this.ui.list).before(this.ui.sortRow))},initialize:function(a){this.featureFlagCRBEResultsMapHideEnable="true"===a.featureFlagCRBEResultsMapHideEnable;this.showMapIfOpenInPrevPage="true"===a.showMapIfOpenInPrevPage;this.events['click [data-hook="toggle_location_view"]']=this.featureFlagCRBEResultsMapHideEnable?"_toggleMobileViewFlagged":
"_toggleMobileView";this.featureFlagCRBEResultsMapHideEnable?this._checkCookiePageReloaded():$("#toggle_location_view_desktop").remove();var b=$.extend({},a);this.translations=b.module.TranslationTexts;this.controller=b.controller;this.maxAgencyAllowed=a.maxAgencyAllowed?a.maxAgencyAllowed:4;this.undelegateEvents();this.ui.map=$.hook("locations_map");this.ui.list=$.hook("locations_list");this.ui.pageWrap=$.hook("locations_page_wrapper");this.ui.pageHeader=$.hook("locations_header");this.ui.sortRow=
$.hook("locations_sort_row");this.ui.selectionCount=$.hook("selection_count");this.ui.resultsList=$.hook("location_results_list");this.ui.pagination=$.hook("location_pagination");this.ui.viewToggle=$.hook("toggle_location_view");this.ui.locationSortWidget=$("#location_sort_widget");this.ui.sortMenu=new $namespace.Widgets.SelectWidget(this.ui.locationSortWidget,{taborder:"document"});this.ui.sortMenu.val("all");this.ui.submitButton=$.hook("submit_map_results");this.ui.selectionCount.find("span.ada-screenreader").text(this.translations.ACCESSIBILITY_UNSELECTED_RENTAL_CAR_LOCATION);
this.liveContainer=$(".tab-switcher-live-container");this.delegateEvents();this.locationsData=$namespace.locationsData||{};utils.isArray(this.locationsData)&&(this.locationsData.map(function(a,b){a.index=b+1}),this.collection=new $namespace.Collection.RentalCarLocationCollection(this.locationsData));!this.featureFlagCRBEResultsMapHideEnable||this.showMapIfOpenInPrevPage?(this.collection.length?(this.initializeMap(),this.mapDivOpen=!0):this.hideMap(),this.selectPreviousSelection(),this.render()):(this.mapDivOpen=
!1,this.ui.map.hide(),this.selectPreviousSelection(),this.showResults());this.bindMarkers();$(window).on("orientationchange",$.proxy(function(){this._delayedHeightAdjust($.proxy(function(){this._delayedHeightAdjust(this._delayedHeightAdjust)},this))},this));$(window).on("resize",$.proxy(function(){$(window).width()>$namespace.Config.BREAKPOINTS.DESKTOP_MIN?(this.ui.pageWrap.css({height:"auto"}),this.featureFlagCRBEResultsMapHideEnable||$("#car_rental_map").removeClass("list-view")):this._setListViewHeight();
this.moveSortRow()},this));if(0<this.selectedLocations.length){var d=this;setTimeout(function(){d.updateSelectionBar()},250)}document.title=this.getReplacedmessage(this.translations.CAR_AGENCY_SELECTION_PAGE_TITLE,{searchLocation:a.searchLocation});this.featureFlagCRBEResultsMapHideEnable&&!this.showMapIfOpenInPrevPage&&($("#car_rental_map").addClass("list-view"),$(window).trigger("resize"));this.featureFlagCRBEResultsMapHideEnable&&this.showMapIfOpenInPrevPage&&(this.mapDivOpen=!0,this._createMapDivCookie());
this.moveSortRow()},advancePage:function(){if(!this.isSubmitting){var a="rcas=Load_Forword_Navigation_From_Agency_Results&suppressOutput=true&carAgenciesForVendors="+JSON.stringify(this.getSelectedLocations());this.filter&&"airport"==this.filter.type&&(a+="&onlyAirports=true");this.featureFlagCRBEResultsMapHideEnable&&(a+="&mapDivOpen="+this.mapDivOpen,$namespace.DomUtil.clearCookie(MAP_DIV_ENABLED));$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarAgencySelection.act",
a,null,null,function(){$namespace.Navigation.loadPage("h=3002")},null,null);this.isSubmitting=!0}},render:function(){this.showResults();this.showMarkers()},initializeMap:function(){var a,b=this.collection.at(0);b&&(a=new google.maps.LatLng(b.get("latitude"),b.get("longitude")));this.map=new google.maps.Map(this.ui.map[0],{zoom:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.zoom,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,
streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},center:a,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3,maxZoom:18});google.maps.event.addListener(this.map,"tilesloaded",function(){setTimeout(function(){$("#locations_map").find('iframe,a,button, div[tabindex="0"]').attr("tabindex",
"-1")},$namespace.WaitForElement.TIME_TO_WAIT)})},hideMap:function(){$(this.el).addClass("no-map");this.ui.map.hide()},showMarkers:function(a){var b=this;this.collection.each(function(a,e){var d=a.get("marker");a.filterCheck(b.filter)?(d.setMap(b.map),0===e&&b.repositionMap(d)):d.setMap(null)})},bindMarkers:function(){var a=this;this.collection.each(function(b){if(b.get("isOpen")&&!b.get("isExcluded")&&b.get("isValidForSelection")&&"false"==b.get("isAgencyClosed")){var d=b.get("marker");google.maps.event.addListener(d,
"click",function(){a.toggleLocation(b)})}})},showResults:function(a){var b=$namespace.Templates.rental_car_location_item_template;this.filter&&"airport"==this.filter.type?$namespace.Analytics.trackEvent("RC_Locations","Sort",this.filter.type):this.filter&&"alamo"==this.filter.agency?$namespace.Analytics.trackEvent("RC_Locations","Sort",this.filter.agency):this.filter&&"avis"==this.filter.agency?$namespace.Analytics.trackEvent("RC_Locations","Sort",this.filter.agency):this.filter&&"budget"==this.filter.agency?
$namespace.Analytics.trackEvent("RC_Locations","Sort",this.filter.agency):this.filter&&"enterprise"==this.filter.agency?$namespace.Analytics.trackEvent("RC_Locations","Sort",this.filter.agency):($namespace.Analytics.trackEvent("RC_Locations","Sort","All"),$namespace.Analytics.trackPageView("/rc/booking/searchWidget/rentalLocations/all/"));var d=this.collection.where(this.filter);0==d.length&&(d=this.collection.toArray());var e=0;a&&(e=a);this.ui.resultsList.empty();this.totalResults=0;a=e;for(var f=
e+this.resultsPerPage;a<f;a++)d[a]&&this.ui.resultsList.append(b(d[a].attributes));b=$(".location-results").find(".location-result");if(b.length){f="";for(a=0;a<b.length;a++){var g=$(b[a]).attr("id");f+=g;a<b.length-1&&(f+=" ")}$(".location-results").attr("aria-owns",f)}this.totalResults=d.length;this.updateValidSelection();this.showPagination();this._reCenterMap(d[e])},setPreviousNextPageState:function(){var a=Math.ceil(this.totalResults/this.resultsPerPage),b=this.ui.pagination,d=b.parent().find(".previous-page");
b=b.parent().find(".next-page");1===this.totalPages?(d.addClass("disabled"),b.addClass("disabled"),$(d).attr("tabindex","-1"),$(b).attr("tabindex","-1")):(1===this.currentPage?(d.addClass("disabled"),$(d).attr("tabindex","-1")):(d.removeClass("disabled"),$(d).attr("tabindex","0")),this.currentPage===a?(b.addClass("disabled"),$(b).attr("tabindex","-1")):(b.removeClass("disabled"),$(b).attr("tabindex","0")))},_onBackLink:function(a){window.history.back()},showPagination:function(){var a=Math.ceil(this.totalResults/
this.resultsPerPage),b=this.ui.pagination,d,e=this,f=function(a){var d=e.getReplacedmessage(e.translations.ACCESSIBILITY_RENTAL_CAR_PAGE_SEARCH_RESULTS,{pageCount:a}),f=$("<a></a>",{"aria-labelledby":"page_"+a,tabindex:"0","data-page":a,text:a});a=$("<span></span>",{"class":"ada-screenreader",id:"page_"+a});a.text(d);f.append(a);b.append(f)},g=function(){b.append($("<span></span>",{html:"&hellip;"}))};b.empty();this.setPreviousNextPageState();if(9<a)if(3>=this.currentPage){for(d=1;4>=d;d++)f(d);g();
f(a)}else if(this.currentPage>=a-3)for(f(1),g(),d=a-4;d<=a;d++)f(d);else{f(1);g();for(d=this.currentPage-2;d<=this.currentPage+2;d++)f(d);g();f(a)}else if(1<a){f(1);for(d=2;d<=a-1;d++)f(d);f(a)}else f(1);b.find('a[data-page="'+this.currentPage+'"]').addClass("current");a=this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_CURRENT_PAGE_SEARCH_RESULTS,{currentPageIndex:this.currentPage});b.find('a[data-page="'+this.currentPage+'"]').find(".ada-screenreader").text(a);$namespace.DomUtil.updateLinkElements()},
toggleLocation:function(a){a.get("isSelected")?this.deselectLocation(a):this.selectLocation(a);window&&window.sessionStorage&&window.sessionStorage.setItem(this.RENTAL_CAR_SELECTED_AGENCIES_CACHE,JSON.stringify(this.selectedLocations))},selectLocation:function(a){$(".rental-car-selection-alert").find("#rental-car-selection-alert-id").text("");var b=this.selectedLocations;if(a){var d=a.get("id");b.length<this.maxAgencyAllowed?null!==d&&-1===b.indexOf(d)&&(b.push(d),a.set("isSelected",!0),$('.location-result[data-location-id="'+
d+'"]').addClass("active"),this.syncSelectionCount(),$('.location-result[data-location-id="'+d+'"]').find('a[data-hook="focus_marker"]').attr("aria-checked","true"),this.updateAddRemoveLink($('.location-result[data-location-id="'+d+'"]'),this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECTION),this.updateRentalCarSelectionAlertMessage(this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATIONS_SELECTION_MESSAGE,{selectedCount:this.selectedLocations.length})),this.updateAddRemoveImage($('.location-result[data-location-id="'+
d+'"]'),!0)):this.updateRentalCarSelectionAlertMessage(this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_INVALID_SELECT,{maxCount:this.maxAgencyAllowed}));b.length==this.maxAgencyAllowed&&this.updateValidSelection()}this.selectedLocations.length&&this.ui.submitButton.removeClass("disabled").prop("disabled",!1)},deselectLocation:function(a){var b=a.get("id");a.set("isSelected",!1);this.selectedLocations=this.selectedLocations.reduce(function(a,e){e!==b&&a.push(e);return a},
[]);$('.location-result[data-location-id="'+b+'"]').removeClass("active");$('.location-result[data-location-id="'+b+'"]').find('a[data-hook="focus_marker"]').attr("aria-checked","false");this.updateAddRemoveLink($('.location-result[data-location-id="'+b+'"]'),this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECT);this.updateAddRemoveImage($('.location-result[data-location-id="'+b+'"]'),!1);this.syncSelectionCount();this.selectedLocations.length==this.maxAgencyAllowed-1&&this.updateValidSelection();
this.selectedLocations.length||this.ui.submitButton.addClass("disabled").prop("disabled",!0);this.updateRentalCarSelectionAlertMessage(this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATIONS_SELECTION_REMOVED_MESSAGE,{selectedCount:this.selectedLocations.length}))},updateValidSelection:function(){this.nonSelectedItems=$(".location-result");if(null!=this.nonSelectedItems)for(var a=0;a<this.nonSelectedItems.length;a++)if($(this.nonSelectedItems[a]).hasClass("active"))this.updateAddRemoveLink(this.nonSelectedItems[a],
this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECTION);else if(this.selectedLocations.length==this.maxAgencyAllowed){var b=this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_INVALID_SELECT,{maxCount:this.maxAgencyAllowed});this.updateAddRemoveLink(this.nonSelectedItems[a],b)}else this.updateAddRemoveLink(this.nonSelectedItems[a],this.translations.ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECT)},getReplacedmessage:function(a,b){return $namespace.TranslationUtil.replaceParameters(a,
b)},updateRentalCarSelectionAlertMessage:function(a){$(".rental-car-selection-alert").find("#rental-car-selection-alert-id").text(a)},updateAddRemoveImage:function(a,b){a=$(a).find(".add-subtract");void 0!=$(a).attr("data-location-id")&&(b=b?_webLoc+"/shared/images/svg/svg-checkmark-white.svg":_webLoc+"/shared/images/svg/svg-plus-blue.svg",$(a.find(".add-remove-img")).attr("src",b))},updateAddRemoveLink:function(a,b){var d=$(a).find(".add-subtract");void 0!=$(d).attr("data-location-id")&&$(d.find(".add-remove-img")).attr("alt",
b);a=$(a).find(".marker");if(0<a.length&&!$(a).attr("aria-disabled")){b=$(a).attr("data-result-index");d=$(a).attr("data-result-brand");var e=$(a).attr("data-result-location");b=this.getReplacedmessage(this.translations.ACCESSIBILITY_RENTAL_CAR_PAGE_SEARCH_RESULT_LABEL,{resultIndex:b,agencyName:d,agencyLocation:e});$(a).attr("aria-label",b)}},syncSelectionCount:function(){var a=this;this.ui.selectionCount.children().each(function(b,d){var e=$(d);d=e.find("img.selection-icon");a.selectedLocations[b]?
(b=a.selectedLocations[b],e.addClass("active").attr("data-location-id",b),b=a.collection.where({id:b}),1==b.length&&(b=b[0].attributes,b=$namespace.TranslationUtil.replaceParameters(a.translations.ACCESSIBILITY_SELECTED_RENTAL_CAR_LOCATION,{brandName:b.agency,location:b.title,address:b.address,city:b.city,state:b.state,zip:b.zip,country:b.country}),$(d).attr("alt",b).attr("src",_webLoc+"/shared/images/svg/svg-location-checked.svg"))):(e.removeClass("active"),b=a.translations.ACCESSIBILITY_UNSELECTED_RENTAL_CAR_LOCATION,
$(d).attr("alt",b).attr("src",_webLoc+"/shared/images/svg/svg-location-blank.svg"))})},repositionMap:function(a){null!=this.map&&(google.maps.event.trigger(this.map,"resize"),this.map.panTo(a.getPosition()))},getSelectedLocations:function(){var a=this.selectedLocations,b=[],d={},e;if(utils.isArray(a)){for(var f=0,g=a.length;f<g;f++)if(e=this.collection.findWhere({id:a[f]})){var h=e.get("vendorCode");e=e.get("agencyCode");h&&e&&(d[h]||(d[h]=[]),d[h].push(e))}for(var k in d)d.hasOwnProperty(k)&&b.push({vendorId:k,
agencyCodes:d[k]})}return b},goToPage:function(a){var b=Math.ceil(this.totalResults/this.resultsPerPage);a="next"===a?this.currentPage+1:"previous"===a?this.currentPage-1:+a;1>a?a=1:a>b&&(a=b);b=this.currentPage;this.currentPage=a;this.showResults((this.currentPage-1)*this.resultsPerPage);this._setListViewHeight();a=$(".location-result");b!=this.currentPage&&a&&0<a.length&&($(a[0]).find('a[data-hook="focus_marker"]').focus(),this.updateScrollTop($(a[0])));$namespace.Analytics.trackPageView("/rc/booking/searchWidget/rentalLocations/ALL/"+
this.currentPage);try{window.CT.application.notifyDocumentSizeChange()}catch(d){}},_reCenterMap:function(a){var b;a&&(b=new google.maps.LatLng(a.get("latitude"),a.get("longitude")));this.map?this.map.setCenter(b):null},_onItemFocus:function(a){a=$(a.currentTarget);this.updateScrollTop(a)},updateScrollTop:function(a){var b=$(".selection-count-row");if(null!=b&&0<b.length){var d=$(b).offset().top;b=$(b).height();d+b>$(a).offset().top&&(a=$(window).scrollTop()-(2*b+10),$(window).scrollTop(a))}},_onSortChange:function(a){a=
$(a.currentTarget).val();switch(a){case "all":this.filter=null;break;case "airports":this.filter={type:"airport"};break;case "alamo":case "avis":case "budget":case "enterprise":this.filter={agency:a}}this.render();this.goToPage(1)},_locationResultSelection:function(a){32===a.keyCode&&(this._onSelectLocationClick(a),a.preventDefault())},_onSelectLocationClick:function(a){a=$(a.currentTarget).attr("data-location-id");a=this.collection.findWhere({id:a});null!=this.map&&this.repositionMap(a.get("marker"));
this.toggleLocation(a)},selectPreviousSelection:function(){if(window&&window.sessionStorage){var a=JSON.parse(window.sessionStorage.getItem(this.RENTAL_CAR_SELECTED_AGENCIES_CACHE));this.ui.selectionCount.find("li");if(null!=a)for(var b=0;b<a.length;b++){var d=a[b];this.collection.findWhere({id:d}).set("isSelected",!0);this.selectedLocations.push(d)}}},updateSelectionBar:function(){var a=this;this.ui.selectionCount.children().each(function(b,d){var e=$(d);d=e.find("img.selection-icon");a.selectedLocations[b]&&
(b=a.selectedLocations[b],e.addClass("active").attr("data-location-id",b),b=a.collection.where({id:b}),1==b.length&&(b=b[0].attributes,b=$namespace.TranslationUtil.replaceParameters(a.translations.ACCESSIBILITY_SELECTED_RENTAL_CAR_LOCATION,{brandName:b.agency,location:b.title,address:b.address,city:b.city,state:b.state,zip:b.zip,country:b.country}),$(d).attr("alt",b).attr("src",_webLoc+"/shared/images/svg/svg-location-checked.svg")))});this.selectedLocations.length&&this.ui.submitButton.removeClass("disabled").prop("disabled",
!1)},_toggleMobileView:function(a){var b=this.ui,d=utils.getTransitionEndEvent();this.$el.hasClass("list-view")?(this.$el.removeClass("list-view"),b.list.on(d,$.proxy(function(){b.pageWrap.css("height","auto");b.list.off(d)},this))):(this.$el.addClass("list-view"),b.list.on(d,$.proxy(function(){this._setListViewHeight();b.list.off(d)},this)));a.preventDefault()},_toggleMobileViewFlagged:function(a){var b=this.ui,d=utils.getTransitionEndEvent();this.$el.hasClass("list-view")?(this.$el.removeClass("list-view"),
this.mapDivOpen=!0,this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_MAP_VIEW),$namespace.Analytics.trackEvent("RC_Search_Results","Click","Show_Map"),b.list.on(d,$.proxy(function(){b.pageWrap.css("height","auto");b.list.off(d)},this)),this.collection.length&&!this.ui.map.children().length&&this.initializeMap(),this.ui.map.show(),this.showMarkers(),this._createMapDivCookie()):(this.$el.addClass("list-view"),this.mapDivOpen=!1,this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_LIST_VIEW),
$namespace.Analytics.trackEvent("RC_Search_Results","Click","Hide_Map"),b.list.on(d,$.proxy(function(){this._setListViewHeight();b.list.off(d)},this)),this._removeMapDivCookie());this._clearActiveText();a.preventDefault()},_toggleMobileViewDesktop:function(a){var b=this.ui,d=utils.getTransitionEndEvent();this.$el.hasClass("list-view")?(this.$el.removeClass("list-view"),this.mapDivOpen=!0,this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_MAP_VIEW),$namespace.Analytics.trackEvent("RC_Search_Results",
"Click","Show_Map"),b.list.on(d,$.proxy(function(){b.pageWrap.css("height","auto");b.list.off(d)},this)),this.collection.length&&!this.ui.map.children().length&&this.initializeMap(),this.ui.map.show(),this.showMarkers(),this._createMapDivCookie()):(this.$el.addClass("list-view"),this.mapDivOpen=!1,this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_LIST_VIEW),$namespace.Analytics.trackEvent("RC_Search_Results","Click","Hide_Map"),b.list.on(d,$.proxy(function(){this._setListViewHeight();
b.list.off(d)},this)),this.ui.map.hide(),this._removeMapDivCookie());this._clearActiveText();a.preventDefault()},_setListViewHeight:function(){var a=this.ui;if(this.$el.hasClass("list-view")){var b=a.sortRow.outerHeight()+a.list.outerHeight()+a.pageHeader.outerHeight();a.pageWrap.css("height",b+"px")}else a.pageWrap.css("height","auto")},_clearActiveText:function(){setTimeout($.proxy(function(){this.liveContainer.text("")},this),removeLiveTextDelay)},_createMapDivCookie:function(){window&&window.sessionStorage?
window.sessionStorage.setItem(MAP_DIV_ENABLED,"true"):DomUtil.createCookie(MAP_DIV_ENABLED,"true")},_getCookieValue:function(a){var b={};b[0]=window&&window.sessionStorage?window.sessionStorage.getItem(a):DomUtil.readCookie(a);return b},_removeMapDivCookie:function(){window&&window.sessionStorage&&(window.sessionStorage.setItem(MAP_DIV_ENABLED,"false"),$namespace.DomUtil.clearCookie(MAP_DIV_ENABLED))},_checkPageReloaded:function(){var a=!1;window.performance?a=1==performance.navigation.type?!0:!1:
console.info("window.performance doesn't works fine on this browser");return a},_checkCookiePageReloaded:function(){if(this.featureFlagCRBEResultsMapHideEnable&&this._checkPageReloaded()){var a=this._getCookieValue(MAP_DIV_ENABLED);a[0]&&"true"===a[0]&&(this.showMapIfOpenInPrevPage=this.mapDivOpen=!0)}else this._removeMapDivCookie()},_delayedHeightAdjust:function(a){setTimeout($.proxy(function(){this._setListViewHeight();"function"===typeof a&&a.call(this)},this),333)},_onPaginationClick:function(a){a=
$(a.currentTarget).attr("data-page");this.goToPage(a);this.updateValidSelection();this.updateRentalCarSelectionAlertMessage("")},_onSubmit:function(a){this.advancePage();a.preventDefault()},onError:function(a){try{console.error(a)}catch(b){}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;
$namespace.View.RentalCarConfirmationView=Backbone.View.extend({el:"#rental_car_confirmation",events:{'click [data-hook="email_itinerary"]':"_onEmailClick",'click [data-hook="print_itinerary"]':"_onPrintClick",'click [data-hook="cancel_confirmation"]':"_onCancelReservationClick",'click [data-hook="add_hotel"]':"_onAddHotelClick",'click [data-hook="crbe_cross_sell_package_view"]':"_onCRBECrossSellPackageView",'click a[data-modal^="rental_car_details_terms_and_conditions_modal"]':"_onTermsAndConditionsClick"},ui:{emailField:null},
isPrintMode:!1,controller:null,initialize:function(a){a=$.extend({},a);this.module=a.module;var b=a.accordionsToClose;this.ui.emailField=$.hook("email_itinerary",this.$el);$.hook("accordion").each(function(a,d){-1<b.indexOf(d.id)&&d.accordion.close()});var d=[];$("template-search .initialMessage").each(function(a,b){d.push($(b).attr("data-hook"))});this.displayInitialMessages(d);$(".termsAndConditionsAccordion div span.fontBold, .termsAndConditionsAccordion div br+br+b").each(function(){$namespace.Utils.addAriaLevelOrRole($(this),
"4","heading")})},displayInitialMessages:function(a){if(!_.isEmpty(a)){var b=a.splice(0,1);b=utils.getTemplate(b[0]);b=new $namespace.Widgets.Modal(b);var d=this;b.el.on("click",'[data-hook="modal-close"]',function(){d.displayInitialMessages(a)});b.show()}},sendEmail:function(a,b,d){a="rcbcf=EMAIL_ITINERARY&bookingId="+b+("&emailAddress="+$namespace.StringUtil.escapeNonAsciiChars(a));$namespace.AjaxUtil.makeAjaxCall("rentalCarBookingConfirmation.act",a,null,null,d)},cancelReservation:function(a,b){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarBookingConfirmation.act",
"rcbcf=CANCEL_CAR_BOOKING&bookingId="+a,null,null,b)},_onEmailClick:function(a){var b=this,d=$(a.currentTarget).attr("data-booking-id"),e=utils.getTemplate("email_itinerary_modal");(new $namespace.Widgets.Confirm(e,function(a){var e=a.el.find("#email_itinerary").val();a.el.find("button").addClass("disabled").prop("disabled",!0);$namespace.DomUtil.setElementLoadingMask(!0);b.sendEmail(e,d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",!1);$namespace.DomUtil.setElementLoadingMask(!1);
var d=b.module.TranslationTexts,e=$('a[data-hook="email_itinerary"]');this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.CAR_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e}):$namespace.MessageUtil.showMessage({type:0,text:d.CAR_EMAIL_SENT_SUCCESSFUL_MESSAGE,title:d.CAR_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e})})},null,!0)).show();a.preventDefault()},_onCancelReservationClick:function(a){var b=this,d=$(a.currentTarget).attr("data-booking-id"),e=utils.getTemplate("cancel_reservation_modal");
(new $namespace.Widgets.Confirm(e,function(a){a.el.find("button").addClass("disabled").prop("disabled",!0);$namespace.DomUtil.setElementLoadingMask(!0);$namespace.Analytics.trackEvent("Book Car","Click","Cancel Reservation");b.cancelReservation(d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",!1);if(this.message){$namespace.DomUtil.setElementLoadingMask(!1);var d=b.module.TranslationTexts,e=$namespace.TranslationUtil.replaceParameters(b.module.TranslationMessages.CAR_CANCEL_FAILED_CALL_IN_MESSAGE.translatedText,
{bookingPhoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),f=$('a[data-hook="cancel_confirmation"]');$namespace.MessageUtil.showMessage({type:1,text:this.message.text+" "+e,title:d.CAR_CANCEL_MESSAGE_TITLE,itemToFocus:f})}else window.location.href=_secureContextRoot+_webLoc+"/?h=8&_uid="+utils.getUID()})},null,!0)).show();a.preventDefault()},_onPrintClick:function(a){a=$(a.currentTarget).attr("data-booking-id");var b=_secureContextRoot+_webLoc+"/itinerary/"+a+"?printItinerary=true&_uid="+
utils.getUID();window.open(b,"_blank","alwaysLowered=true,width=750,height=500,resizable,scrollbars,left=80,top=80,noopener,noreferrer");window.opener=null;$namespace.AjaxUtil.makeAjaxCall("rentalCarBookingConfirmation.act","rcbcf=PRINT_ITINERARY&bookingId="+a)},_onAddHotelClick:function(a){$namespace.Analytics.trackEvent("Book Car","Click","Add Hotel");$namespace.DomUtil.setElementLoadingMask(!0);$namespace.Navigation.loadPage("Hotels")},_onTermsAndConditionsClick:function(a){var b=$(a.currentTarget).attr("data-modal");
(new $namespace.Widgets.Modal(utils.getTemplate(b))).show();a.preventDefault()},_onCRBECrossSellPackageView:function(a){var b=$(a.currentTarget);a="rcbcf=CRBE_CROSS_SELL_PACKAGE_REDIRECT&carCrossSellType="+b.attr("data-search-type");var d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=a.module.TranslationTexts;if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText);
e.setItemToFocus(b);e.show();setTimeout(function(){a.modalView=new $namespace.View.PackageCrossSellSearchPopupView({controller:a});setTimeout(function(){e.show()},$namespace.Config.STANDARD_ANIMATION_SPEED-33)})}}}(this);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarBookingConfirmation.act",a,null,null,d,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;
$namespace.View.RentalCarEquipmentView=Backbone.View.extend({el:"#rental_car_equipment",ui:{totalPrice:null,itemTemplate:null,optionsLabel:null,optionsCont:null,optionsList:null,taxesAndFees:null,basePrice:null},template:{lineItemTemplate:null},values:{basePrice:0,taxesAndFees:0},events:{"change .car-rental-equip-option .number-widget input":"_onInputChange",'click button[data-hook="submit_optional_equipment"]':"_onSubmit",'click a[data-hook="go_back"]':"_onGoBackClick",'click a[data-hook="optional_equipment_name_link"]':"_onOptionalEquipmentNameLinkClick"},
collection:null,module:null,views:{},selectedEquipment:{},initialize:function(a){a=$.extend({},a);this.module=a.module;this.translations=a.module.TranslationTexts;this.undelegateEvents();this.ui.submitButton=this.$el.find('button[data-hook="submit_optional_equipment"]');this.screenreaderText=this.$el.find("#optionEquipmentButtonText");var b=[],d=this,e=$("div.page-equipment > span.ada-screenreader[aria-live]");this.$el.find(".number-widget").each(function(a,g){a=$(g);var f=a.find("input[data-equipment-id]"),
k=f.data("optional-equipmen-name"),l=d.$el.find('[data-price-for="'+f.attr("id")+'"]').text();g.numberWidget=new $namespace.Widgets.NumberWidget(a,e,{decrementEnabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_DECREMENT_ENABLED,{optionalEquipmentName:k,priceText:l}),decrementDisabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_DECREMENT_DISABLED,{optionalEquipmentName:k,priceText:l}),incrementEnabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_INCREMENT_ENABLED,
{optionalEquipmentName:k,priceText:l}),incrementDisabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_INCREMENT_DISABLED,{optionalEquipmentName:k,priceText:l})});b.push({specialEquipmentUid:f.attr("data-equipment-id"),quantity:f.val()})});this.collection=new $namespace.Collection.RentalCarEquipmentCollection(b)},advancePage:function(){this.isSubmitting||(this.ui.submitButton.addClass("disabled").prop("disabled",!0),this.isSubmitting=!0);$namespace.Navigation.loadPage("h="+
$namespace.PageHistoryConstants.HISTORY_CAR_BOOKING_RECAP)},setInputSelectedState:function(a){var b=utils.getParentElementOfClass(a,"car-rental-equip-option");+a.val()?b.addClass("has-item"):b.removeClass("has-item")},_onInputChange:function(a){a=$(a.currentTarget);var b=a.attr("data-equipment-id");this.collection.get(b).set("quantity",a.val());this.setInputSelectedState(a)},validateQuantity:function(){var a=0;this.$el.find(".car-rental-equip-option input[type=number]").each(function(b,e){a+=parseInt($(e).val())});
if(10<a){var b=this.module.TranslationTexts;$namespace.MessageUtil.showMessage({type:1,text:b.CAR_OPTIONAL_EQUIPMENT_QUANTITY_ERROR,title:b.CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE});return!1}return!0},_onSubmit:function(a){if(this.validateQuantity()){var b="rcoes=SUBMIT_OPTIONAL_EQUIPMENT_SELECTION&specialEquipmentUidsToUpdate="+JSON.stringify(this.collection.toJSON()),d=function(a){return function(){var b=a.module.TranslationTexts;this.message?($namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:b.CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE}),$namespace.DomUtil.setElementLoadingMask(!1)):a.advancePage()}}(this);$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarOptionalEquipmentSelection.act",b,null,null,d,null)}a.preventDefault()},_onGoBackClick:function(a){window.history.back();a.preventDefault()},_onOptionalEquipmentNameLinkClick:function(a){var b=$(a.currentTarget);a=b.attr("data-companyCode");b=b.attr("data-equipmentCode");a="rcoes=DISPLAY_OPTIONAL_EQUIPMENT_NAME_POPUP&companyCode="+
a+"&equipmentCode="+b;b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_OPTIONAL_EQUIPMENT_DESCRIPTION_TITLE}):(new $namespace.Widgets.Modal((0,$namespace.Templates.rental_car_optional_equipment_name_link_modal)({optionalEquipmentDescriptionTitle:b.CAR_OPTIONAL_EQUIPMENT_DESCRIPTION_TITLE,optionalEquipmentDescription:this.responseText}))).show()}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarOptionalEquipmentSelection.act",a,null,null,b,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};var validation=$namespace.Validation||{};
$namespace.View.RentalCarFinalizeDetailsView=Backbone.View.extend({el:"#rental_car_driver_details",ui:{submitButton:null},events:{'click button[data-hook="details_submit"]':"_onSubmit",'click a[data-hook="go_back"]':"_onGoBackClick","change #accept_terms":"_onAcceptTermsChange","change #select_airline":"_airlineHandler","change #select_state":"_selectStateHandler","keyup #flight_number":"_flightNumberKeyUpHandler","keydown #flight_number":"_flightNumberKeyDownHandler","keydown #member_name":"_checkForBackspace",
"keydown #delivery_country":"_checkForBackspace","keyup #phone_number":"_phoneNumberKeyHandler",'click a[data-modal^="rental_car_details_terms_and_conditions_modal"]':"_onTermsAndConditionsClick",'click a[data-modal="rental_car_all_applicable_terms_and_conditions_modal"]':"_onTermsAndConditionsClick",'keypress input[data-hook="input_first_name"]':validation.isPersonNameKeyCode,'keypress input[data-hook="input_last_name"]':validation.isPersonNameKeyCode,'keypress input[data-hook="input_delivery_address1"]':validation.isStreetAddressKeyCode,
'keypress input[data-hook="input_delivery_address2"]':validation.isStreetAddressKeyCode,"keydown #phone_number_extension":"_phoneNumberExtensionKeyDownHandler"},controller:null,isSubmitting:!1,module:null,options:null,translations:null,actionCode:"UPDATE_RENTER_DETAILS",initialize:function(a){var b=$.extend({},a);this.options=a||{};this.module=a.module;this.controller=b.controller;this.ui.submitButton=this.$el.find('button[data-hook="details_submit"]');this.translations=this.module.TranslationTexts;
var d=this;this.ui.form=$("#rental_car_driver_details");this.ui.firstName=$.hook("input_first_name");this.ui.lastName=$.hook("input_last_name");this.ui.phoneNumber=$.hook("input_phone_number");this.ui.phoneNumberExtension=$.hook("input_phone_number_extension");this.ui.emailAddress=$.hook("input_email");this.ui.altEmailAddress=$.hook("input_alt_email");this.ui.loyaltyProgramNumber=$.hook("input_loyalty_program");this.ui.flightNumber=$.hook("input_flight_number");this.ui.selectAirline=new $namespace.Widgets.SelectWidget($("#selectAirlineDiv"),
{taborder:"document"});this.ui.accept_terms=$("#accept_terms");this.ui.delivery_address1=$.hook("input_delivery_address1");this.ui.delivery_city=$.hook("input_delivery_city");this.ui.state=new $namespace.Widgets.SelectWidget($("#selectStateDiv"),{taborder:"document"});this.ui.zipCode=$.hook("input_delivery_zip");this.$el.find("input").on("keypress",function(a){var b=utils.Keyboard;b.getCode(a)===b.ENTER&&d._onSubmit()});this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&
d.clearError("#"+a.target.id)});a="rc/booking/searchWidget/bookingCheckout/"+d.getTrackingData().vendorName;$namespace.Analytics.trackPageView(a);a=this.$el.find(".phone-number-widget");a.get(0).phoneNumberWidget=new $namespace.Widgets.PhoneNumberWidget({el:a,keyboard:utils.Keyboard})},validateDriverDetails:function(){var a=!0;this.clearErrors();var b=this.options.module.TranslationTexts;this.ui.firstName.val()||(utils.showErrors({first_name:$namespace.MessageUtil.prefixError(b.FIRST_NAME_MESSAGE)}),
a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_the_first_name_"));this.ui.lastName.val()||(utils.showErrors({last_name:$namespace.MessageUtil.prefixError(b.LAST_NAME_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_the_last_name_"));var d=this.ui.emailAddress.val();d?utils.isValidEmail(d)||(utils.showErrors({email_address:$namespace.MessageUtil.prefixError(b.VALID_EMAIL_ADDRESS_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_email_address_")):
(utils.showErrors({email_address:$namespace.MessageUtil.prefixError(b.VALID_EMAIL_ADDRESS_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_email_address_"));(d=this.ui.altEmailAddress.val())&&!utils.isValidEmail(d)&&(utils.showErrors({alt_email_address:$namespace.MessageUtil.prefixError(b.VALID_EMAIL_ADDRESS_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_email_address_"));this.ui.loyaltyProgramNumber.val()&&4>this.ui.loyaltyProgramNumber.val().length&&
(a=$namespace.TranslationUtil.replaceParameters(b.LOYALTY_ERROR_MESSAGE,{minLength:4}),utils.showErrors({loyalty_program_num:$namespace.MessageUtil.prefixError(a)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_Loyalty_Program_Number_"));this.ui.selectAirline.val()&&!this.ui.flightNumber.val()&&(utils.showErrors({flight_number:$namespace.MessageUtil.prefixError(b.ARRIVAL_FLIGHT_NUMBER_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_flight_number_"));
this.ui.flightNumber.val()&&1>$("#select_airline")[0].selectedIndex&&(utils.showErrors({select_airline:$namespace.MessageUtil.prefixError(b.SELECT_AIRLINE_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_select_an_airline_"));this.ui.flightNumber.val()&&isNaN(1*this.ui.flightNumber.val())&&(utils.showErrors({flight_number:$namespace.MessageUtil.prefixError(b.NUMERIC_ONLY_FLIGHT_NUMBERS)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_flight_number_"));this.ui.phoneNumber.val()?
utils.isValidPhoneNumber(this.ui.phoneNumber.val())||(utils.showErrors({phone_number:$namespace.MessageUtil.prefixError(b.VALID_PHONE_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_phone_number_")):(utils.showErrors({phone_number:$namespace.MessageUtil.prefixError(b.VALID_PHONE_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_phone_number_"));this.ui.phoneNumberExtension.val()&&this.ui.phoneNumberExtension.val().length!=this.ui.phoneNumberExtension.val().replace(/[^0-9]/g,
"").length&&(utils.showErrors({phone_number_extension:$namespace.MessageUtil.prefixError(b.VALID_PHONE_EXTENTION_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Invalid_phone_number_extension_"));0==this.ui.accept_terms[0].checked&&(utils.showErrors({accept_terms:$namespace.MessageUtil.prefixError(b.TERMS_CONDITIONS_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_accept_the_Terms_&_Conditions_by_selecting_the_checkbox_"));this.ui.delivery_address1.length&&
((this.ui.delivery_address1.val()||(utils.showErrors({delivery_address1:$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_street_")),this.ui.delivery_city.val()||(utils.showErrors({delivery_city:$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_city_")),this.ui.state.val()||(utils.showErrors({selectStateDiv:$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)}),
a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_select_a_state_")),this.ui.zipCode.val())?this.ui.zipCode.val()&&!this.ui.zipCode.val().replace(/[^0-9]/g,"").length&&(utils.showErrors({delivery_zip:$namespace.MessageUtil.prefixError(b.ZIP_VALIDATION_ERROR_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_valid_zip_code_")):(utils.showErrors({delivery_zip:$namespace.MessageUtil.prefixError(b.ZIP_VALIDATION_ERROR_MESSAGE)}),a=!1,$namespace.Analytics.trackPageView("/er/errorCode/Please_enter_valid_zip_code_")));
a||($("#accept_terms").removeAttr("aria-describedby"),utils.focusFirstErrorField(this.ui.form));return a},advancePage:function(){this.isSubmitting||(this.ui.submitButton.addClass("disabled").prop("disabled",!0),this.isSubmitting=!0);$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_CAR_BOOKING_CONFIRMATION)},getTrackingData:function(){return{vendorName:this.$el.attr("data-vendor-name"),departureMonth:this.$el.attr("data-departure-month")}},getMailingAddress:function(){return{address1:$("#delivery_address1").val(),
address2:$("#delivery_address2").val(),city:$("#delivery_city").val(),state:$("#select_state").val(),country:$("#delivery_country").val(),zipCode:$("#delivery_zip").val()}},getRenterDetails:function(){var a=$("#phone_number").val();_.isEmpty(a)||(a=a.replace(/\D/g,""));var b=$("#loyalty_program_num").val();b||(b="");return{firstName:$("#first_name").val(),lastName:$("#last_name").val(),daytimePhone:a,daytimePhoneExtension:$("#phone_number_extension").val(),primaryEmail:$namespace.StringUtil.escapeNonAsciiChars($("#email_address").val()),
alternateEmail:$namespace.StringUtil.escapeNonAsciiChars($("#alt_email_address").val()),loyaltyNumber:b,airline:$("#select_airline").val(),flightNumber:$("#flight_number").val(),mailingAddress:this.getMailingAddress()}},showLoyaltyConfirmation:function(a){var b=$namespace.Templates.loyalty_program_confirm,d=this;this.actionCode="UPDATE_RENTER_DETAILS_AFTER_LOYALTY_ERROR";var e=new $namespace.Widgets.Confirm(b({loyaltyProgramWarningMessage:a}),function(){d._onSubmit({preventDefault:function(){return!1}})},
function(){e.hide()});e.show()},_onSubmit:function(a){if(this.validateDriverDetails()){var b=JSON.stringify(this.getRenterDetails());b="rcbfd="+this.actionCode+"&carRenterDetailsInfo="+b;var d=function(a){return function(b,d){var e=a.module.TranslationTexts;this.message?($namespace.DomUtil.setElementLoadingMask(!1,1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.CAR_SUBMIT_RENTER_DETAILS_ERROR_TITLE})):_.isEmpty(d)?(a.advancePage(),window.opener&&window.opener.postMessage(b,
$namespace.GlobalConstants.AGENT_APPLICATION_DOMAIN_AND_CONTEXT)):($namespace.DomUtil.setElementLoadingMask(!1,1),a.showLoyaltyConfirmation(d))}}(this);$namespace.DomUtil.setElementLoadingMask(!0);$("#loyalty_program_num").val()&&$namespace.Analytics.trackEvent("RentalCar","Booking","LoyaltyProgramNumber");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarBookingFinalizeDetails.act",b,null,null,d,null)}else $("#accept_terms").attr("aria-labelledby","accept_terms-error"),$namespace.DomUtil.scrollWindowTop();
a.preventDefault()},_onGoBackClick:function(a){window.history.back();a.preventDefault()},_onAcceptTermsChange:function(a){var b=$(a.currentTarget);b.is(":checked")&&(b.parent().find("label.error").remove(),this.clearError("#accept_terms"),b.attr("aria-labelledby","textBeforeTermsAndConditionsLink termsAndConditionsLink"));a.preventDefault()},_airlineHandler:function(a){this.clearErrors(["#select_airline","#flight_number"]);a=0<$("#select_airline")[0].selectedIndex;var b=this.ui.flightNumber.val().replace(/[^0-9]/g,
"").length;a||b?($("#select_airline_label").parent().addClass("form-required"),$("#flight_number").parent().addClass("form-required")):($("#select_airline_label").parent().removeClass("form-required"),$("#flight_number").parent().removeClass("form-required"))},_flightNumberKeyUpHandler:function(a){if(13!=a.which){this.clearErrors(["#flight_number","#select_airline"]);a=0<$("#select_airline")[0].selectedIndex;var b=this.ui.flightNumber.val().replace(/[^0-9]/g,"").length;a||b?($("#select_airline_label").parent().addClass("form-required"),
$("#flight_number").parent().addClass("form-required")):($("#select_airline_label").parent().removeClass("form-required"),$("#flight_number").parent().removeClass("form-required"))}},_selectStateHandler:function(a){a=this.options.module.TranslationTexts;this.clearError("#selectStateDiv");0<$("#select_state")[0].selectedIndex||utils.showErrors({selectStateDiv:$namespace.MessageUtil.prefixError(a.STATE_VALIDATION_ERROR_MESSAGE)})},_phoneNumberKeyHandler:function(a){9!=a.which&&this.clearError("#phone_number")},
_phoneNumberExtensionKeyDownHandler:function(a){return 47<a.which&&58>a.which||95<a.which&&106>a.which||8==a.which||9==a.which||46==a.which||37==a.which||39==a.which?!0:!1},_flightNumberKeyDownHandler:function(a){return 47<a.which&&58>a.which||95<a.which&&106>a.which||8==a.which||9==a.which||46==a.which?!0:!1},_checkForBackspace:function(a){utils.Keyboard.getCode(a)==utils.Keyboard.BACKSPACE&&a.preventDefault()},_onTermsAndConditionsClick:function(a){var b=$(a.currentTarget),d=b.attr("data-modal");
d=new $namespace.Widgets.Modal(utils.getTemplate(d));b=b.attr("data-brand");d.show();b?$namespace.Analytics.trackPageView("/rc/bookingCheckout/TermsConditions/"+b):$namespace.Analytics.trackPageView("/rc/booking/DriverDetails/TermsConditions");a.preventDefault()},clearError:function(a){this.clearErrors([a])},clearErrors:function(a){utils.clearErrors(arguments.length?arguments[0]:arguments.length?arguments[0]:"#first_name #last_name #email_address #alt_email_address #loyalty_program_num #select_airline #phone_number #phone_number_extension #accept_terms #delivery_address1 #delivery_city #select_state #delivery_zip".split(" "),
this.ui.form)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};
$namespace.View.RentalCarUpgradesView=Backbone.View.extend({el:"#rental_car_upgrade",ui:{submitButton:null},events:{'click button[data-hook="upgrades_apply"]':"_onUpgradeClick",'click button[data-hook="upgrades_submit"]':"_onSubmit",'click a[data-hook="go_back"]':"_onGoBackClick",'click a[data-hook="edit_car"]':"_onEditCar"},controller:null,isSubmitting:!1,module:null,initialize:function(a){this.module=$.extend({},a).module;this.ui.submitButton=$.hook("upgrades_submit");$(document.body).on("click",
'a[data-modal^="rental_car_details_terms_and_conditions_modal"]',this._onTermsAndConditionsClick)},advancePage:function(a,b){this.isSubmitting||(this.ui.submitButton.addClass("disabled").prop("disabled",!0),this.isSubmitting=!0);a=b.attr("data-display-logon");"true"==a&&(a=b.attr("data-vendor-name"),$namespace.Analytics.trackPageView("/rc/booking/searchWidget/login/"+a));$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarBookingFinalizeDetails.act",
"rcbfd=CREATE_RENTAL_CAR_BOOKING",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!0);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_FINALIZE_CAR_BOOKING)},null)},doUpgrade:function(a,b,d,e,f,g,h,k,l){var p=this,q=null,r=null;r=this.module.TranslationMessages;0==parseFloat(b)?q=r.NO_PRICE_DIFFERENCE_MESSAGE.translatedText:(q=f?$namespace.TranslationUtil.replaceParameters(r.PRICE_DIFFERENCE_TO_ADD_MESSAGE.translatedText,{priceChange:d}):$namespace.TranslationUtil.replaceParameters(r.PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE.translatedText,
{priceChange:d}),r=$namespace.TranslationUtil.replaceParameters(r.NEW_TOTAL_PRICE.translatedText,{totalRentalPrice:e}),q=q+" "+r);var v=new $namespace.Widgets.Confirm((0,$namespace.Templates.upgrade_confirm)({priceChangeMessage:q,displayTermsAndConditionsStyle:h,templateModalIndex:k}),function(){var b="rcu=UPDATE_RENTAL_CAR_UPGRADE_SELECTION&selectedUpsellCategoryUid="+a,d=function(a){$namespace.DomUtil.setElementLoadingMask(!1);return function(){var b=a.module.TranslationTexts;if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,
1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_SUBMIT_UPGRADE_SELECTION_ERROR_TITLE});else{b=l.attr("data-vendor-name");var d=l.attr("data-car-category"),e=l.attr("data-car-make-model");$namespace.Analytics.trackPageView("/rc/booking/ConfirmUpgrade/"+b);$namespace.Analytics.trackEvent("Upgrades","RentalCar",d);$namespace.AnalyticsHelper.setRentalCarId(b,d,e);$namespace.Analytics.track({vendor:"adobe",type:"ev",events:19,v33:$namespace.AnalyticsHelper.getRentalCarId()});
a.advancePage(g,l)}}}(p);$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarBookingUpgradeSelection.act",b,null,null,d,null)},function(){v.hide()});v.show()},_onUpgradeClick:function(a){var b=$(a.currentTarget),d=b.attr("data-price-change-formatted"),e=b.attr("data-price-change"),f=b.attr("data-upsell-category-id"),g=b.attr("data-new-total"),h="true"==b.attr("data-is-price-added"),k="true"==b.attr("data-display-logon"),l="true"==b.attr("data-display-terms-and-conditions")?
"displayBlock":"displayNone",p=b.attr("data-template-modal-index"),q="/rc/booking/UpgradeSelected/"+b.attr("data-vendor-name");$namespace.Analytics.trackPageView(q);this.doUpgrade(f,e,d,g,h,k,l,p,b);a.preventDefault()},_onSubmit:function(a){var b=$(a.currentTarget),d="true"==b.attr("data-display-logon");this.advancePage(d,b);a.preventDefault()},_onGoBackClick:function(a){window.history.back();a.preventDefault()},_onEditCar:function(a){a.preventDefault();$namespace.Navigation.loadPage("h=3002")},_onTermsAndConditionsClick:function(a){var b=
$(a.currentTarget),d=b.attr("data-modal");d=new $namespace.Widgets.Modal(utils.getTemplate(d));b=b.attr("data-brand");$namespace.Analytics.trackPageView("/rc/booking/TermsConditions/"+b);d.show();a.preventDefault()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;
$namespace.View.RentalCarDetailsView=Backbone.View.extend({module:null,selectedEquipment:{},initialize:function(a){a=$.extend({},a);this.module=a.module;this.undelegateEvents();$('div[id^="rental-car-details_"][id$="_'+a.modalIndex+'"] a[data-hook="geographicRestrictions"]').on("click",$.proxy(this._onGeographicRestrictionsClick,this))},_onGeographicRestrictionsClick:function(a){a="rcd=LOAD_GEOGRAPHIC_RESTRICTIONS&categoryItemUid="+$(a.currentTarget).data("category-uid");var b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_GEOGRAPHIC_RESTRICTIONS_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarDetails.act",a,null,null,b,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.SpecialtyOfferDetailsView=Backbone.View.extend({el:"#specialtyOfferContents",events:{"click #fullTermsConditions":"_onFullTermsConditionsClick","click .offer-banner-not-bookable":"_onNonBookableOfferLinkClick","click .banner-info-hook-link":"_onBannerInfoLinkClick","click .availability-continue-button":"_onBannerInfoLinkClick","click .specialty-offer-ga-analytics":"_topContentVideoLinkAnalytics","click .contactUsButton":"_callToBookAnalytics","click .contactUs-link":"_contactUsAnalytics"},
initialize:function(a){a=$.extend({},a);this.module=a.module;this.packageId=a.packageId;this.initPageAnalytics();0<$(".breadcrumb-text").length&&(a=this.module.TranslationTexts.COSTCO_TRAVEL_TITLE,a=$(".breadcrumb-text").text()+" | "+a,""!=a&&($("title").contents().remove(),$("title").append(a)));a=$(".card p.disclaimer");0==a.text().length&&a.hide();a=$(".banner-info-hook-link");var b=$(".availability-continue-button"),d=$("a.contactUsButton");b.attr("data-external-link",a.attr("data-external-link"));
b.attr("data-internal-link",a.attr("data-internal-link"));b.attr("data-external-link")||b.attr("data-internal-link")||(b.hide(),b.next().hide(),d.removeClass("btn-secondary").removeClass("btn-inverse").addClass("btn-blue"));this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});$(document).ready(function(){var a=$("[data-package-id]").attr("data-package-id");$namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_ENABLED?$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",
1],["#offerDetails > div:nth-child(1) > div > div:nth-child(1)",0]],"offer",a):null});window.setTimeout(function(){var a=$("#specialtyOfferContents").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)},_onFullTermsConditionsClick:function(a){this.fullTermsConditions.open()},_onNonBookableOfferLinkClick:function(a){var b=this,d=$("#availableDateAndPrices");b.$el.find(".focusHasMoved").text(b.module.TranslationTexts.ACCESSIBILITY_CALL_TO_BOOK);
setTimeout(function(){b.$el.find(".focusHasMoved").text("")},1);d.on("blur",function(a){b.$el.find(".focusHasMoved").text("");d.off("blur")});d.focus();$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("Hero_Specialty","Click","Available_Prices_And_Dates")},_onBannerInfoLinkClick:function(a){a=$(a.currentTarget);var b=a.attr("data-external-link"),d=a.attr("data-internal-link");""!=b&&""!=d||""!=b?($namespace.Navigation.loadExternalUrl(b),b="Hero_Specialty",a.hasClass("availability-continue-button")&&
(b="Continue_Specialty"),$namespace.Analytics.trackEvent(b,"Click","External_Site")):""!=d&&window.open(d,"_blank")},resize:function(){var a=$("DIV.banner-info");if(breakpoint.isMobile()){var b=a.css("height");a.data("css-height",b);a.css("height","").removeClass("h350")}else(b=a.data("css-height"))&&!a.css("height")&&a.css("height",b),a.addClass("h350")},initPageAnalytics:function(){$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"theme parks"})},_topContentVideoLinkAnalytics:function(a){$namespace.Analytics.trackEvent("Specialty_Offers_Video",
"Click",this.packageId)},_callToBookAnalytics:function(a){$namespace.Analytics.trackEvent("Specialty_Offers_Click_to_Call","Click",this.packageId)},_contactUsAnalytics:function(a){$namespace.Analytics.trackEvent("Specialty_Offers_Click_to_Call","Click",this.packageId)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.AreaView=Backbone.View.extend({el:"#hotelsInCity",events:{"click #vacpacExpandShowNext5Hotels":"_onExpandClick"},controller:null,initialize:function(a){this.controller=$.extend({},a).controller;this.mapScene=this.smController=null;this.initScrollLock();$(window).on("load resize orientationchange",$.proxy(function(a){setTimeout($.proxy(this._onWindowResize,this),50)},this));this.tabSwitcher=new $namespace.Widgets.TabSwitcher(this.$el.find('[data-hook="tab-switcher"]'));this.nestedccordion=
new $namespace.Widgets.Accordion(this.$el.find('[data-hook="nested-accordion"]'));this.legendtooltip=new $namespace.Widgets.Tooltip(this.$el.find('BUTTON[id="map-tooltip"]'));this.ratetooltip=new $namespace.Widgets.Tooltip(this.$el.find('A[id="hotel-ratings-tooltip-desktop"]'));this.ratetooltipmobile=new $namespace.Widgets.Tooltip(this.$el.find('A[id="hotel-ratings-tooltip-mobile"]'));this.showmore=new $namespace.Widgets.ShowMore(this.$el.find('Div[id="showmore"]'))},_onWindowResize:function(a){this.mapScene.duration(this.calcScrollLockDuration())},
_onExpandClick:function(a){setTimeout(function(){this.mapScene.duration(this.calcScrollLockDuration())}.bind(this),400)},calcScrollLockDuration:function(){var a=$("#list-hotels-expander").height(),b=$("#map-with-legend-container").height();a-=b;1>a&&(a=1);breakpoint.isMobile()&&(a=1);return a},initScrollLock:function(){this.smController=new ScrollMagic.Controller;this.mapScene=(new ScrollMagic.Scene({triggerElement:"#map-with-legend-start-trigger",triggerHook:"onLeave",duration:this.calcScrollLockDuration()})).setPin("#map-with-legend-container").addTo(this.smController)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.OfferDetailsView=Backbone.View.extend({el:"#offerDetails",events:{"click .banner-info-hook":"_onBannerInfoLinkClick","click #fullTermsConditions":"_onFullTermsConditionsClick","click a.tours":"_onToursLinkClick","click a.themePark":"_onThemeParkLinkClick","click a.modal-gallery-thumb":"_onGalleryThumbClick","click .offer-banner-not-bookable":"_onNonBookableOfferLinkClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick"},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&
this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():this.hotelRatingsTooltip.show(a)},initialize:function(a){var b=this;this.module=$.extend({},a).module;$('.offerDetails div[data-hook="infinite-carousel"]').each($namespace.Utils.eachUninitialized(function(a,b){b.carousel=window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX?new $namespace.Widgets.InfiniteCarousel(a,{focusOnTitle:!0}):new $namespace.Widgets.InfiniteCarousel(a)}));this.hotelRatingLinks=$(this.el).find(".carousel-item:not(.clone) a[data-tooltip], .singleHotelInfo a[data-tooltip]");
if(this.hotelRatingLinks.length)for(a=$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description-travel-rating",enableHideHandler:!1}),a.off("click"),a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);$(document.body).on("click",function(a){var d=$(a.target).data("tooltip")||$(a.target).parent().data("tooltip"),e=$(".hotel-description-travel-ratings-tooltip")[0];
b.hotelRatingsTooltip&&b.hotelRatingsTooltip.isActive&&"hotel-description-travel-ratings-tooltip"!=d&&!e.contains(a.target)&&b.hotelRatingsTooltip.hide({setFocus:!1})});$("a[data-megatip]").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var a=this,d=$(this).data("destination"),g=$(this).data("citycode"),h=$(this).data("hotelid"),k=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(h),l=$(this).data("megatip");d="vpc=LOAD_OFFER_HOTEL_DETAIL_INFO&destination="+d+("&cityCode="+
g)+("&hotelId="+h);null!=k&&(d+="&displayReviewsAccordion=",d+=k.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());$namespace.Analytics.trackEvent("hotel_popup","click_learn_more",h,null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",d,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+l).html(this.responseText);a.megatip=new $namespace.Widgets.Megatip($(a));
$.hook("accordion").each(utils.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a);a.on("ct.accordion.clicked",$.proxy(b,"_onAccordionClick"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));a.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));a.tabSwitcher.initialize();a.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+h));a.megatip.show();
window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50)},null,"")});a=$("a.callToBook");if(breakpoint.isMobile()){var d=a.text();(d=_.map(d.match(/[\d\-]/g),function(a){return a.replace(/\-/g,"")}))&&0<d.length&&(d=_.max(d,function(a){return a.length}),a.attr("href","tel:"+d));a.removeClass("disabled")}else a.addClass("disabled");this.handleCarousel();this.showCallCenterNumber();this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});
$(document).ready(function(){var a=$("[data-package-id]").attr("data-package-id");$namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_ENABLED?$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],["#vacpac_offer_wrapper > div:nth-child(1) > div > div:nth-child(1)",0]],"offer",a):null});this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"OfferDetails"})})},_onReviewsLinkClick:function(a){a=$(a.currentTarget).data("hotel-id");
var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a),d=this;if(null!=b){d=this;$(window).on("ct.megatip.opened",function(){var a=b.getReviewsAccordionId();$(a).focus();$(a).closest('[data-hook="accordion"]').get(0).accordion.open();d._onAccordionClick({currentTarget:$(a)},"Hotel_Reviews");$(window).off("ct.megatip.opened")});var e=$('a[data-megatip][data-hotelid="'+a+'"]');1<e.length&&(e=$('div.carousel-item.active a[data-megatip][data-hotelid="'+a+'"]'));e.click()}},_onAccordionClick:function(a,
b){a=$(a.currentTarget).closest("[data-hotelid]").data("hotelid");$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS==b&&(b="Hotel_Reviews");$namespace.Analytics.trackEvent("vp_offer_page",b,a,null)},_onBannerInfoLinkClick:function(a){var b=$(a.currentTarget),d="svp=LOAD_PACKAGE_SEARCH&packageId="+b.attr("data-package-id");d+="&fromWidget=false&fromMenu=true";var e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=a.module.TranslationTexts;if(this.message)$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:d.VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText);e.setItemToFocus(b);setTimeout(function(){a.modalView=new $namespace.View.OfferSearchPopupView({controller:a});setTimeout(function(){e.show()},delay)})}}}(this);-1!=a.currentTarget.outerHTML.lastIndexOf('role="button"')?$namespace.Analytics.trackEvent("offer_page","bottom_button",a.currentTarget.dataset.packageId,null):$namespace.Analytics.trackEvent("offer_page","top_button",
a.currentTarget.dataset.packageId,null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",d,null,null,e,null)},closeModal:function(){setTimeout(function(){this.modalView.remove();this.modalView=null}.bind(this),delay)},handleCarousel:function(){$(document).on("ct:InfiniteCarousel:updated",function(a){$(".megatip.active").find('[data-hook="megatip-close"]').click()})},showCallCenterNumber:function(){var a=$("#tollNumber").text();
$(".contactUs-link").text(a);$("a.call_to_book").attr("href","tel:"+a);var b=$("a.contactUsButton"),d=b.text();b.text(d+" "+a);b.attr("href","tel:"+a)},_onFullTermsConditionsClick:function(a){this.fullTermsConditions.open()},_onToursLinkClick:function(a){a="ssc=LOAD_SIGHTSEEING_POPUP&sightseeingId="+$(a.currentTarget).attr("data-tour-id");var b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:b.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal((0,$namespace.Templates.offer_page_tour_detail_modal)({tourDetail:this.responseText}))).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",a,null,null,b,null)},_onThemeParkLinkClick:function(a){a=$(a.currentTarget);var b=JSON.parse(a.attr("data-link-args").trim());a="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+
b.vendorId;var d=this.module.TranslationTexts,e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText,function(){f&&f.off("click")});var f=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');var k=f.length;k&&$(f[k-1]).attr("data-tab-last",!0);f.on("click",function(b){b=
$(b.currentTarget);a.loadParkAndTheaterVenuePopup(JSON.parse(b.attr("data-link-args").trim()),b.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html(b.popupModalTitle);e.show()}}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",a,null,null,e,null)},loadParkAndTheaterVenuePopup:function(a,b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;
d+="&region="+a.region;d+="&area="+a.area;var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=d.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock")}),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,
b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),
e.show(),e.el.attr("data-set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,e,null)},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"})},_onNonBookableOfferLinkClick:function(a){var b=
this,d=$(".focus_on_calltobook");d.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();d.focus();b.$el.find(".focusHasMoved").text(b.module.TranslationTexts.ACCESSIBILITY_CALL_TO_BOOK);setTimeout(function(){b.$el.find(".focusHasMoved").text("")},1);d.on("blur",function(a){b.$el.find(".focusHasMoved").text("");d.attr("tabindex","-1").removeAttr("data-taborder");d.off("blur")});$namespace.Analytics.trackEvent("offer_page","top_button",a.target.dataset.packageId,null)},resize:function(){var a=
$("DIV.banner-info");if(breakpoint.isMobile()){var b=a.css("height");a.data("css-height",b);a.css("height","").removeClass("h350")}else(b=a.data("css-height"))&&!a.css("height")&&a.css("height",b),a.addClass("h350")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;$namespace.View=$namespace.View||{};
$namespace.View.OfferSearchPopupView=Backbone.View.extend({el:"#price_availability_modal",events:{'click [data-hook="modal-close"]':"_onCloseModalClick","change input#modalFlightItineraryCheckbox":"_onFlightItineraryChange","change select#modalFlightType":"_onFlightTypeChange","change select.numberOfNights":"_onNumberOfNightsChange","change select#modalNumberOfRooms":"_onNumberOfRoomsChange","change select.adultsInRoom":"_onMultiAdultsChange","change select.childrenInRoom":"_onMultiChildrenChange",
"change select.childAge":"_onChildAgeChange","change select.infantSeatSelect":"_onChildSeatChange","submit form#formPriceAndAvailability":"_onSubmit","focus button#actionButton":"_onSubmitButtonFocus"},controller:null,ui:null,model:null,departureDate:null,returnDate:null,totalNights:null,minimumNights:null,lastDepartureDate:null,lastReturnDate:null,namespace:"vpOfferModal",initialize:function(a){this.controller=$.extend({},a).controller;this.numberOfOvernightRail=$("#numberOfOvernightRails").val();
this.initElements();this.minimumNights=this.form.data("min-nights");1==$("#multiCity").val()&&$("div.select-nights").hide();"true"==$("#isIncludeFlightItinerary").val()?(this.loadFlightItineraryInformation(),$(".flightCheckboxChecked").show(),$(".flightCheckboxNotchecked").hide()):($(".flightCheckboxChecked").hide(),$(".flightCheckboxNotchecked").show());var b=$("section[id^='tGridSection-']");b.each(function(a){var d=$(this).data("from-cityname"),e=$(this).data("dest-cityname");a=$(this).children("input[id^='numberOfOvernightRails_']").length?
$namespace.TranslationUtil.replaceParameters($namespace.OfferDetailsModule.TranslationTexts.TRANSPORTATION_GRID_OVERNIGHT_RAIL_SECTION_LABEL,{index:a+1,total:b.length,fromcityname:d,destcityname:e}):$namespace.TranslationUtil.replaceParameters($namespace.OfferDetailsModule.TranslationTexts.TRANSPORTATION_GRID_SECTION_LABEL,{index:a+1,total:b.length,cityname:e});$(this).attr("aria-label",a)});"true"==$("#showFlightOnly").val()&&$("div#packageControls").hide();$('input[format-date-input="true"]',this.el).on("input",
function(){utils.formatDateInput($(this))});this.packageId=$('INPUT[id="packageIdVpOffer"]').val();this.searchModalAnalytics="true"==$('INPUT[id="searchModalAnalyticsFlag"]').val();a=this.$el.find("#modalDepartureCityText");var d=a.val();_.isEmpty(d)||(a={value:a.attr("data-departure-city-code"),title:d},this._onDepartureCitySelect(a,this))},_onCloseModalClick:function(a){a.preventDefault();this.uninitElements();this.searchModalAnalytics&&$namespace.Analytics.trackEvent("event_searchModal_Close",
"Close",this.packageId)},_onFlightItineraryChange:function(a){a=$(a.currentTarget).is(":checked");(this.model.includeFlight=a)?(this.flightItineraryBlock.slideDown(slideSpeed),this.departureCityText.prop("required",!0),$(".flightCheckboxChecked").show(),$(".flightCheckboxNotchecked").hide(),$(".flight-connections").css("opacity",""),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):
(this.flightItineraryBlock.slideUp(slideSpeed),this.departureCityText.prop("required",!1),$(".flightCheckboxChecked").hide(),$(".flightCheckboxNotchecked").show(),$(".flight-connections").css("opacity","0.2"),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));this.setRoomLayout();this.initFormElements();this.model.includeFlight?this.validateAirfarePassengerCount():
this.validateWithoutAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder()},_onFlightTypeChange:function(a){a=$(a.currentTarget).val();this.filterFlightType(a)},_onNumberOfRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();this.initFormElements();this.hidePassengersExceededPerRoomMsg();this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder()},_onMultiAdultsChange:function(a){a.preventDefault();
a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);this.showPassengersExceededPerRoomMsg(b);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onMultiChildrenChange:function(a){a.preventDefault();a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;
b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();this.showPassengersExceededPerRoomMsg(b);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.vp_offer_multichild_template,e=$.hook("child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=0;f<b.length;f++){var g=a.children[f];
if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.childAge[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.infantSeatSelect[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);var k=this.ui.includeFlight.is(":checked");0>g.age||1<g.age||!k?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').show()}}this.initFormElements()}}},
setRoomLayout:function(a){a=this.model.rooms.length;this.form.find('SELECT[id="modalNumberOfRooms"]').val(a);for(var b=[],d=[],e=[],f=[],g=0;g<a;g++){var h=this.model.rooms[g];b.push(h.adultCount);d.push(h.children.length);for(var k=0;k<h.children.length;k++)e.push(h.children[k].age),f.push(h.children[k].seat)}g=$namespace.Templates.vp_offer_multiroom_template;h=0;this.ui.expansionContainer.empty();k=0;for(var l=1;k<a;k++,l++){var p=$(g({index:l}));this.ui.expansionContainer.append(p);this.form.find('SELECT[id="modalAdultsInRoom_'+
l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.form.find('SELECT[id="modalChildrenInRoom_'+l+'"]').val(d[k]).find("option[value="+d[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.vp_offer_multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();for(var v=parseInt(d[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+e[h],w=f[h];p.find('.childAge[data-room="'+
l+'"][data-child="'+t+'"]').val(u);p.find('.infantSeatSelect[data-room="'+l+'"][data-child="'+t+'"]').val(w);w=this.ui.includeFlight.is(":checked");0>u||1<u||!w?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");
b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder()},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},_onDepartureCitySelect:function(a,
b){b=a.value;this.departureOutboundRoundtripSpan.text(b);this.departureInboundRoundtripSpan.text(b);var d=this.departingCityTGridSectionLastSection.attr("aria-label");try{d=d.substring(0,d.indexOf(", ")+2)+b}catch(e){}this.departingCityTGridSectionLastSection.attr("aria-label",d);this.model.departureLocationCode=a.value;this.model.departureLocationName=$.trim(a.title);this.loadFlightItineraryInformation()},_onDepartureCityBlur:function(a){this.clearError("#modalDepartureCityText");var b=$("#isIncludeRoundtripFlight").val(),
d=$("#modalFlightType").val();b&&"Intercity"!==d&&(a=a.target.value.replace(/^\s+|\s+$/g,""),a.length&&(b=$namespace.SearchWidgetsModule.TranslationMessages,3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(a)})):this.datalistDepartureCity.hasValidSelection()||$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE.translatedText)})))},
_onNumberOfNightsChange:function(a){a=$(a.currentTarget);var b=$(a);""==b.val()&&(b=b.attr("data-city-index"),0<=b&&$("#descriptionNumberOfNights_"+b).empty());b=a.attr("id");a=a.parent().attr("id");this.clearErrors([b,b+"_button",a]);this.setReturnDate()},_onSubmitButtonFocus:function(a){$(document.body).addClass("scroll-lock")},vpMulticityFlightIncluded:function(a){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_Destination_City",a,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_Destination_City_Depart_Date",
a+"_"+this.model.departureDate,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_Destination_City_Departure_City",a+"_"+this.model.departureLocationCode,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_Offer_MultiCity","Click",this.packageId+"_"+this.model.departureDate+"_"+this.model.returnDate+
"_"+this.model.departureLocationCode+"_"+this.model.rooms.length+"_"+this.adultsAndChildCounts)},vpMulticityNoFlight:function(a){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_Destination_City",a,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_Destination_City_Depart_Date",a+"_"+this.model.departureDate,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_Offer_DepartureDate_ReturnDate",this.model.departureDate+
"_"+this.model.returnDate,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_Offer_MultiCity","Click",this.packageId+"_"+this.model.departureDate+"_"+this.model.returnDate+"__No-Flight_"+this.model.rooms.length+"_"+this.adultsAndChildCounts)},_onSubmit:function(a){$(".showPackageMsg").text("");$("#vpOfferPackageMessageId").removeClass("showPackageWarn");var b=$(a.currentTarget);if(this.validate()){var d=b.attr("data-package-id"),e=b.attr("data-from-menu"),
f=b.attr("data-cities");b=$('INPUT[id="destinationCode"]').val();var g="svp=DO_PACKAGE_SEARCH",h="",k="",l="",p=k="",q=0;k=$("#modalServiceClassSelect").val();this.model.includeFlight&&(h=$("#modalFlightType").val(),"All"===h?q=0:"RoundTrip"===h?q=1:"Intercity"===h&&(q=2),p=this.model.departureLocationCode,h=this.model.departureLocationName,""==h&&(p=""),g=g+("&departureCity="+h)+("&departureCityCode="+p)+"&flightConnections=-1",g+="&serviceClass="+k);$("#modalNumberOfRooms").val();this.form.find("SELECT.numberOfNights").each(function(){var a=
$(this).val();l+=a+","});l=l.substring(0,l.length-1);h=this.model.rooms;p=[];var r=[],v=[];k=[];for(var n=0;n<h.length;n++){p.push(h[n].adultCount);r.push(h[n].children.length);for(var t=0;t<h[n].children.length;t++)v.push(h[n].children[t].age),k.push(h[n].children[t].seat)}this.adultsAndChildCounts=p.reduce(function(a,b){return a+b},0)+"_"+r.reduce(function(a,b){return a+b},0);this.searchModalAnalytics&&(this.model.includeFlight?this.vpMulticityFlightIncluded(b):this.vpMulticityNoFlight(b));g+="&packageId="+
d;g+="&departureDate="+this.model.departureDate;g+="&arrivalDate="+this.model.returnDate;g+="&numberOfNightsInEachCity="+l;g+="&adults="+p.join(",");g+="&children="+r.join(",");g+="&childrenAges="+v.join(",");g+="&childSeatFlags="+k.join(",");g+="&hotelRooms="+this.model.rooms.length;g+="&includeFlightItinerary="+this.model.includeFlight;g+="&fromMenu="+e;g+="&flightChecked="+this.model.includeFlight;g+="&flightType="+q;g+="&roomInfoAvailable=true";var u=this;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",g,null,null,function(a,b,d){this.messageCode==$namespace.ErrorCodes.PACKAGE_DATES_UNAVAILABLE||this.messageCode==$namespace.ErrorCodes.NO_HOTELS_FOUND_FOR_SELECTED_LOCATION?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$(document.body).addClass("scroll-lock"),$(".showPackageMsg").length&&(this.messageCode==$namespace.ErrorCodes.NO_HOTELS_FOUND_FOR_SELECTED_LOCATION?$(".showPackageMsg").addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_HOTEL_NOT_AVAILABLE_MSG):
$(".showPackageMsg").addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_PACKAGE_NOT_AVAILABLE_MSG),$("#vpOfferPackageMessageId").addClass("showPackageWarn"),document.getElementById("vpOfferPackageMessageId").scrollIntoView()),u.searchModalAnalytics&&$namespace.Analytics.trackEvent("Error2034_PackageUnavailable","Click",u.packageId+"_"+u.model.departureDate+"_"+u.model.returnDate+"_"+u.model.rooms.length+"_"+u.adultsAndChildCounts)):this.message?($namespace.DomUtil.setElementLoadingMask(!1,
null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:$namespace.SearchWidgetsModule.TranslationTexts.VP_SEARCH_NO_RESULTS_TITLE})):void 0==a||null==a||""==a?(a="/h=",$namespace.GlobalConstants.RESPONSIVE_VP_PACKAGE_OVERVIEW_PAGE_ENABLED&&1==f?a+=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_PACKAGE_OVERVIEW:$namespace.GlobalConstants.RESPONSIVE_VP_MULTICITY_PACKAGE_OVERVIEW_PAGE_ENABLED&&1<f?a+=$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE:
u.model.includeFlight?0==d&&1==f?($namespace.MessageUtil.setSessionValue("FLIGHT_HOTEL_MESSAGE",$namespace.PackageSearchResultsModule.TranslationTexts.NO_FLIGHT_FOUND),a+=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL):a+=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL:a=1==f?a+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL:a+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_HOTEL,$namespace.DomUtil.createCookie("ga-po-nav",
$("#vacpac_offer_wrapper").length?"OfferPage":"SearchResults",0,"/"),$namespace.Navigation.loadPage(_webLoc+a)):($namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act","svp=LOAD_PACKAGE_VALIDATION_MESSAGE_POP_UP&factsheetHotelId="+b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Confirm(this.responseText,function(){var a=$("#searchPackageValidationModal").attr("data-hotel-id"),b=$("#searchPackageValidationModal").attr("data-destination-code");
$("#searchPackageValidationModal").attr("data-package-id");b="fsr=LOAD_VP_PIMP_SEARCH_RESULTS_AND_UPDATE_FOR_BOOKABLE_PACKAGES&cityCode=&destination="+b.trim();b+="&filterHotelIds="+a.trim();b=b+"&multiCityPackagesRequested=false&fromWidget=true&fromMenu=false&hotelId="+a+"&suppressOutput=true";$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageFilteredSearchResults.act",b,null,null,function(){$namespace.Navigation.loadPage(_webLoc+
"/h=1001");"undefined"!=typeof initPimpSearchFilterList&&(initPimpSearchFilterList(),"undefined"!=typeof updatePimpSearchFilterInfo&&updatePimpSearchFilterInfo())},null)},function(){a.hide()});a.show()},null),$namespace.DomUtil.setElementLoadingMask(!0,null,!1))},null)}a.preventDefault()},loadFlightItineraryInformation:function(){var a=$("#isRoundtripFlightOptional").val(),b=$("#isIntercityFlightsOptional").val(),d=$("#isIncludeRoundtripFlight").val(),e=$("#isIncludeIntercityFlight").val(),f=$("#modalFlightType option[value='All']"),
g=$("#modalFlightType option[value='RoundTrip']"),h=$("#modalFlightType option[value='Intercity']"),k=$("#modalDepartureCityText").val(),l="",p=!1;f.css("display","block");g.css("display","block");h.css("display","block");f.parent().is("span")&&f.unwrap();g.parent().is("span")&&g.unwrap();h.parent().is("span")&&h.unwrap();"true"==d&&"true"==e?"true"==a&&"true"==b?""!=k?l="All":(l="Intercity",f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>")):"true"==a&&"false"==b?""!=
k?l="All":(f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>"),l="Intercity"):"false"==a&&"true"==b?(""!=k?l="All":(f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>"),p=!0),h.css("display","none"),h.wrap("<span>")):"false"==a&&"false"==b&&(""!=k?l="All":(f.css("display","none"),f.wrap("<span>")),g.css("display","none"),h.css("display","none"),h.wrap("<span>"),g.wrap("<span>")):("false"==d&&"true"==e&&(f.css("display","none"),flightTypeRoundtrip.css("display",
"none"),f.wrap("<span>"),g.wrap("<span>"),h.css("display","block"),h.parent().is("span")&&h.unwrap(),l="Intercity"),"false"==e&&"true"==d&&(f.css("display","none"),g.css("display","block"),h.css("display","none"),f.wrap("<span>"),h.wrap("<span>"),g.parent().is("span")&&g.unwrap(),l="RoundTrip"));a=$("#select_flight_type").get(0).selectWidget;p?a.disable():(a.enable(),a.selectItem(l));this.filterFlightType(l)},filterFlightType:function(a){var b=this.$(".flight-table"),d=this.$(".flight-note");"All"===
a&&(b.removeClass("inactive").filter(".flighttype-none").addClass("inactive"),d.removeClass("inactive"));"RoundTrip"===a&&(b.addClass("inactive").filter(".flighttype-roundtrip").removeClass("inactive"),d.addClass("inactive").filter(".flighttype-roundtrip").removeClass("inactive"));"Intercity"===a&&(b.addClass("inactive").filter(".flighttype-intercity").removeClass("inactive"),d.addClass("inactive").filter(".flighttype-intercity").removeClass("inactive"))},setReturnDate:function(){for(var a=0,b=0,
d=this.selectNumberOfNightsWidgets.length;b<d;b++)a+=Number(this.selectNumberOfNightsWidgets[b].val());a+=Number(this.numberOfOvernightRail);this.departureDate&&!this.returnDate&&(this.model.returnDate=$namespace.DateUtil.getDateAsString(this.departureDate.date),this.returnDate={className:"return",date:this.departureDate.date});this.departureDate&&this.returnDate&&(this.clearErrors(["#modalDepartureDate","#modalReturnDate","#vacationPackageModalWidgetDates"]),this.totalNights=a,a=moment(this.departureDate.date).add(this.totalNights,
"days").toDate(),this.returnDate.date=a,this.model.returnDate=$namespace.DateUtil.getDateAsString(this.returnDate.date),this.ui.returnDate.val($namespace.DateUtil.getDateAsString(this.returnDate.date,this.localeDateFormat)),this.formatNumberOfNightDescriptions())},setNumberOfNights:function(){moment(this.departureDate.date);moment(this.returnDate.date);var a=0,b=this.selectNumberOfNightsWidgets.length;this.totalNights=Math.round((this.returnDate.date-this.departureDate.date)/864E5);for(var d=0;d<
b;d++)a+=Number(this.selectNumberOfNightsWidgets[d].val());a+=Number(this.numberOfOvernightRail);if(this.totalNights>a){var e=(this.totalNights-a)%b;b=Math.floor((this.totalNights-a)/b);for(d=0;d<this.selectNumberOfNightsWidgets.length&&(0<b||0<e);d++){a=Number(this.selectNumberOfNightsWidgets[d].val());var f=b;0<e&&(e--,f++);isNaN(a)||(f+=a);var g=$("#modalNumberOfNights_"+d).children("option").length,h=$("#modalNumberOfNights_"+d).children("option")[1].value;g=$("#modalNumberOfNights_"+d).children("option")[g-
1].value;f>=Number(h)&&f<=Number(g)?this.selectNumberOfNightsWidgets[d].val(String(f)):this.selectNumberOfNightsWidgets[d].val("")}}else for(e=a-this.totalNights,d=0;0<e;d++)d==b&&(d=0),a=Number(this.selectNumberOfNightsWidgets[d].val()),isNaN(a)||(a--,g=$("#modalNumberOfNights_"+d).children("option").length,h=$("#modalNumberOfNights_"+d).children("option")[1].value,g=$("#modalNumberOfNights_"+d).children("option")[g-1].value,a>=Number(h)&&a<=Number(g)?this.selectNumberOfNightsWidgets[d].val(String(a)):
this.selectNumberOfNightsWidgets[d].val("")),e--;this.formatNumberOfNightDescriptions()},formatNumberOfNightDescriptions:function(){for(var a=0,b,d,e,f,g,h,k=0,l=0;l<this.selectNumberOfNightsWidgets.length;l++)b=moment(this.departureDate.date).add(a,"days"),d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),$("#numberOfOvernightRails_"+l).length&&(this.descriptionOvernightRail.eq(k).html('<abbr title="'+
e+'">'+b+"</abbr><br />"+d).show(),k+=1,a+=1),(d=Number(this.selectNumberOfNightsWidgets[l].val()))?1===d?(b=moment(this.departureDate.date).add(a,"days"),a+=d,d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),this.descriptionNumberOfNights.eq(l).html('<abbr title="'+e+'">'+b+"</abbr><br />"+d).show()):(b=moment(this.departureDate.date).add(a,"days"),a+=d,f=moment(this.departureDate.date).add(a-
1,"days"),d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),g=$namespace.DateUtil.getDateAsString(f.toDate(),this.localeDateFormat),h=$namespace.DateUtil.getDayOfWeek(f.toDate()),f=$namespace.DateUtil.getDateAsString(f.toDate(),"ddd"),this.descriptionNumberOfNights.eq(l).html('<abbr title="'+e+'">'+b+'</abbr> - <abbr title="'+h+'">'+f+"</abbr><br />"+d+" - "+g).show()):this.descriptionNumberOfNights.eq(l).empty()},
getTotalPassengerCount:function(){for(var a=0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;return a},showPassengersExceededPerRoomMsg:function(a){var b=!1,d=a.adultCount;a=a.children.length;4<d?b=!0:5<d+a&&(b=!0);d=$(".showHotelExceedsMsg");d.length&&(b?(d.addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_NO_OF_TRAVELLERS_PER_ROOM_MSG),window.setTimeout(function(){$("#vpOfferRoomMessageId").addClass("showHotelExceedsWarn").get(0).scrollIntoView()},
500)):this.hidePassengersExceededPerRoomMsg())},hidePassengersExceededPerRoomMsg:function(){for(var a=!0,b=0;b<this.model.rooms.length;b++){var d=this.model.rooms[b].adultCount,e=this.model.rooms[b].children.length;if(4<d||5<d+e)a=!1}a&&($(".showHotelExceedsMsg").text(""),$("#vpOfferRoomMessageId").removeClass("showHotelExceedsWarn"))},validateAirfarePassengerCount:function(){var a=$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#vp_offer_passengers_per_room_div_1 #vp_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));
if(9<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["vp_offer_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){var a=
$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#vp_offer_passengers_per_room_div_1 #vp_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));if(10<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["vp_offer_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);
d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validate:function(){this.clearErrors();var a=!0,b=$namespace.SearchWidgetsModule.TranslationMessages;if(this.model.includeFlight){var d=$("#isIncludeRoundtripFlight").val(),e=$("#modalFlightType").val(),f=$("#modalDepartureCityText").val();""===f&&(this.model.departureLocationCode="",this.model.departureLocationName=
"");""!==f&&this.datalistDepartureCity.hasValidSelection()||!d||"Intercity"===e||(d=b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE,$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),a=!1);this.validateAirfarePassengerCount()||(a=!1);if("true"==$("#showFlightOnly").val())return this.validateDates(!1)||(a=!1),a||$namespace.Utils.focusFirstErrorField(this.form),
a}else this.validateWithoutAirfarePassengerCount()||(a=!1);d=0;for(e=1;d<this.model.rooms.length;d++,e++)this.form.find('SELECT.childAge[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},f=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(f.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(f.sourceText));a=!1}});this.form.find("SELECT.numberOfNights").each(function(){var d=
$(this);if(""==d.val()){var e=d.attr("data-city-name"),f={};e=$namespace.TranslationUtil.replaceParameters(b.VP_SELECT_NUMBER_OF_NIGHTS_FOR_CITY_MESSAGE.translatedText,{cityName:e});d.attr("id");d=d.parent().attr("id");f[d]=$namespace.MessageUtil.prefixError(e);$namespace.Utils.showErrors(f);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e));a=!1}});this.validateDates(!1)||(a=!1);a||$namespace.Utils.focusFirstErrorField(this.form);return a},
transformer:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},createValidTravelDatesTable:function(){var a=[];$("table.availableDatesTable tbody tr").each(function(b,e){b={};b.validThrough=$(e).find("td:first").text();b.nights=$(e).find("td:nth-child(2)").text();a.push(b)});
if(_.isEmpty(a))$(".offerSearchPopup .travel-dates-accordion").hide(),$(".offerSearchPopup .minimum-nights").addClass("mt15");else{var b=$((0,$namespace.Templates.valid_travel_dates_table)({validTravelDates:a}));$(".offerSearchPopup .travel-dates-accordion").append(b)}},loadRoomData:function(){var a={departureDate:"",returnDate:"",includeFlight:"",departureLocationCode:"",departureLocationName:"",rooms:[]},b=function(a){return a?a.split(","):[]},d=this.ui.expansionContainer.attr("data-rooms"),e=b(this.ui.expansionContainer.attr("data-adults")),
f=b(this.ui.expansionContainer.attr("data-children")),g=b(this.ui.expansionContainer.attr("data-childrenages"));b=b(this.ui.expansionContainer.attr("data-childseatflags"));for(var h,k,l=0,p=0;p<d;p++){h={index:p,number:p+1,adultCount:parseInt(e[p]),children:[]};for(var q=0;q<f[p];q++)k={index:q,number:q+1,age:g?parseInt(g[l]):-1,seat:b?parseInt(b[l]):0},h.children.push(k),l++;a.rooms.push(h)}0==a.rooms.length&&a.rooms.push({index:0,number:1,adultCount:2,children:[]});return a},initElements:function(){this.ui=
{};this.ui.expansionContainer=$.hook("multiroom-expansion",this.el);this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.form=this.$("form#formPriceAndAvailability");this.submitButton=this.$("#actionButton");this.flightItineraryBlock=this.$("#flightItineraryBlock");this.departureCityText=this.$("#modalDepartureCityText");this.departureOutboundRoundtripSpan=this.$("#departureOutboundRoundtripSpan");this.departureInboundRoundtripSpan=this.$("#departureInboundRoundtripSpan");this.departingCityTGridSectionLastSection=
this.$("#tGridSection-last");this.descriptionNumberOfNights=this.$(".description-number-of-nights");this.descriptionOvernightRail=this.$(".description-overnight-rail");this.ui.includeFlight=this.form.find("#modalFlightItineraryCheckbox");this.model=this.loadRoomData();this.createValidTravelDatesTable();this.traveldatesAccordion=new widgets.Accordion(this.$(".travel-dates-accordion"));this.traveldatesAccordion.close();var a=$namespace.DomUtil.readCookie("Csrf-token");this.datalistDepartureCity=new $namespace.Widgets.DataListWidget(this.$("#input_departure_city"),
{url:"searchHelper.act",parser:utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureCitySelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:this.transformer,noResultsText:$namespace.SearchWidgetsModule.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});a=this.$(".select-widget.select-number-of-nights");this.selectNumberOfNightsWidgets=[];for(var b=0;b<a.length;b++)this.selectNumberOfNightsWidgets[b]=
new widgets.SelectWidget(a.eq(b),{taborder:"document"});this.model.includeFlight=this.ui.includeFlight.is(":checked");this.initDateWidgets();this.setRoomLayout();this.initFormElements();$(window).on("resize."+this.namespace,$.proxy(this.resize,this));$(window).on("orientationchange."+this.namespace,$.proxy(this.resize,this));this.resize()},initFormElements:function(){this.undelegateEvents();var a=this.$(".select-widget:not(.initialized)");this.selectWidgets=[];for(var b=0;b<a.length;b++)this.selectWidgets[b]=
new widgets.SelectWidget(a.eq(b),{taborder:"document"});this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>
a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),
this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},clearError:function(a){this.clearErrors([a])},
clearErrorAdultsChildrenPerRoom:function(){for(var a=[],b=1;b<=this.model.rooms.length;b++){var d="vp_offer_passengers_per_room_div_"+b,e="modalAdultsInRoom_"+b,f="modalChildrenInRoom_"+b;a.push(e+"_button");a.push(e);a.push(f+"_button");a.push(f);a.push(d)}this.clearErrors(a)},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#modalDepartureDate");a.push("#modalReturnDate");a.push("#vacationPackageModalWidgetDates");for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=
this.form.find('SELECT.childAge[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}for(b=1;b<=this.model.rooms.length;b++)h="vp_offer_passengers_per_room_div_"+b,f="modalAdultsInRoom_"+b,g="modalChildrenInRoom_"+b,a.push(f+"_button"),a.push(f),a.push(g+"_button"),a.push(g),a.push(h);b=this.form.find("SELECT.numberOfNights");f=0;for(g=1;f<b.length;f++,g++)h=$(b[f]),k=h.attr("id"),h=h.parent().attr("id"),a.push(k+
"_button"),a.push(k),a.push(h)}$namespace.Utils.clearErrors(a,this.ui.form)},validateDates:function(a){var b=!0,d=$namespace.SearchWidgetsModule.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#modalDepartureDate","#modalReturnDate","#vacationPackageModalWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",
g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&$namespace.Analytics.trackEvent("vp_event_searchWidget","Depart",this.model.departureDate),this.lastDepartureDate=this.model.departureDate,$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=
null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),this.returnDate={className:"return",date:h.date},
this.lastReturnDate!=this.model.returnDate&&$namespace.Analytics.trackEvent("vp_event_searchWidget","Return",this.model.returnDate),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(f=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>f?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),modalDepartureDate:"",
modalReturnDate:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<f&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),modalDepartureDate:"",modalReturnDate:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):(this.departureDate||!e.length&&
a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({modalDepartureDate:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({modalReturnDate:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),
b=!1));return b},initDateWidgets:function(){var a=this,b=$namespace,d=b.DateUtil;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();var e=function(b,d){b=$(b);b=/departure/i.test(b.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(b?"depart":"return"));a.setReturnDateCalendarDisplayMonth()},f=function(e){var f=/departure/i.test($(this).attr("id"));f=$("#"+(f?"modalReturnDate":"modalDepartureDate")).datepicker("getDate");
f=null===f||0!=d.getDifferenceInDays(e,f)?"":"date-highlight";var g=b.SearchWidgetsModule.getAccessibleDateLabel(e);null!=a.departureDate&&0==d.getDifferenceInDays(e,a.departureDate.date)?g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=a.returnDate&&0==d.getDifferenceInDays(e,a.returnDate.date)&&(g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));e=b.DateUtil.enhanceDateStringReadability(g);
return[!0,f,g,e]},g=function(b,d){var e=a.validateDates();(b=d&&d.input?d.input.attr("id"):b&&b.tagName?b.getAttribute("id"):null)&&/departure/i.test(b)?a.setReturnDate():e&&a.departureDate&&a.returnDate&&a.setNumberOfNights()},h=b.DateUtil.getDateDaysFromToday(0),k=b.DateUtil.getDateDaysFromToday(1);this.departureDate&&(k=b.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.form.find("#modalDepartureDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),
beforeShow:e,beforeShowDay:f,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.returnDate=this.form.find("#modalReturnDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:e,beforeShowDay:f,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,
alignRight:!0,prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});e=$("#modalDepartureDate, #modalReturnDate");this.floatPlaceholders=[];e.each(function(b,d){a.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});e.on("blur",function(){$(this).datepicker("widget").is(":visible")||g(this)}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),
b.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#price_availability_modal div.date-widget").addClass("ctc-jqui");e=$("#modalDepartureDate").val();this.departureDate={className:"departure",date:$namespace.DateUtil.getDateFromString(e,
this.localeDateFormat)};this.setReturnDate()},resize:function(){var a=$namespace.SearchWidgetsModule.getWindowDimensions();if(this.win.height!=a.height||this.win.width!=a.width)this.form.find("#modalDepartureDate,#modalReturnDate").datepicker("hide"),this.win=a;a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;var b=this.form.find('INPUT[id="modalDepartureDate"]'),d=this.form.find('INPUT[id="modalReturnDate"]');b.length&&d.length&&(b.prop("readonly",a),d.prop("readonly",a),b[0].onselectstart=
a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null)},uninitElements:function(){this.win=this.model=this.ui=this.submitButton=this.form=null;$(window).off("resize."+this.namespace);$(window).off("orientationchange."+this.namespace);this.traveldatesAccordion=null;this.datalistDepartureCity.destroyUI();this.lastReturnDate=this.lastDepartureDate=this.datalistDepartureCity=null;for(var a=0;a<this.selectNumberOfNightsWidgets.length;a++)this.selectNumberOfNightsWidgets[a].destroyUI(),this.selectNumberOfNightsWidgets[a]=
null;this.selectNumberOfNightsWidgets=null;for(a=0;a<this.selectWidgets.length;a++)this.selectWidgets[a].destroyUI(),this.selectWidgets[a]=null;this.selectWidgets=null}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.HotelOfferPageView=Backbone.View.extend({el:"#hotel-only-offer-page",events:{'click [data-hook="check_price_availability"]':"_onBannerInfoLinkClick","click a.modal-gallery-thumb":"_onGalleryThumbClick","click #fullTermsConditions":"_onTermsConditionsClick"},initialize:function(a){this.module=$.extend({},a).module;$(this.module.selector).find("#termsAndConditionsAccordion").each(function(a,d){d.accordion&&d.accordion.close()});this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});
this.resize()},_onGalleryThumbClick:function(a){a=$(a.currentTarget);var b=utils.getTemplate("hotel_offer_image_gallery");b=new $namespace.Widgets.ModalGallery(b);b.setItemToFocus(a);b.show()},_onBannerInfoLinkClick:function(a){a.preventDefault();var b=$(a.currentTarget);a=b.attr("hotelId");var d=b.attr("chainCode"),e=b.attr("brandCode");b="hc=LOAD_HOTEL_OFFER_SEARCH_WIDGET";a&&(b+="&hotelId="+a);d&&(b+="&chainCode="+d);e&&(b+="&brandCode="+e);a=function(a){return function(){var b=a.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.HOTEL_OFFER_SEARCH_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),a.modalView=$namespace.Modules.addView(a,$namespace.View.HotelOfferSearchWidgetView,{offerSearchInfo:this.callbackFunctionParams[0],controller:a}),b.show())}}(this);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelContent.act",b,null,null,a,null)},_onTermsConditionsClick:function(a){this.fullTermsConditions.open()},resize:function(){this.modalView&&
this.modalView.resize()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};$namespace.View=$namespace.View||{};
$namespace.View.HotelOfferSearchWidgetView=Backbone.View.extend({el:"#hotel_offer_price_availability_modal",ui:{},model:null,module:null,checkInDate:null,checkOutDate:null,events:{'click [data-hook="modal-close"]':"_onCloseModalClick","change #hotelOfferNumberOfRoomsWidget":"_onRoomsChange","change .single-child-select":"_onChildrenChange","change .single-adult-select":"_onAdultsChange","submit form#formHotelOfferPriceAndAvailability":"_onSubmit"},initialize:function(a){a=$.extend({},a);this.controller=
a.controller;this.initElements();this.widget=$namespace.Modules.addView(this,$namespace.View.HotelSearchWidgetView,{module:$namespace.HotelOfferPageModule,modal:!0,translationTexts:$namespace.SearchWidgetsModule.TranslationTexts,translationMessages:$namespace.SearchWidgetsModule.TranslationMessages,offerSearchInfo:a.offerSearchInfo});this.resize();$('input[format-date-input="true"]',this.el).on("input",function(){utils.formatDateInput($(this))})},createValidTravelDatesTable:function(){var a=[];$(".wrapper table.availableDatesTable tbody tr").each(function(b,
e){b={};b.validThrough=$(e).find("td.validTravelId").text();b.nights=$(e).find("td.nightsId").text();b.bookBy=$(e).find("td.bookById").text();a.push(b)});var b=$((0,$namespace.Templates.valid_travel_dates_table)({validTravelDates:a}));$(".hotelOfferSearchPopup .travel-dates-accordion").append(b)},initElements:function(){this.createValidTravelDatesTable();this.traveldatesAccordion=new widgets.Accordion(this.$(".travel-dates-accordion"));this.traveldatesAccordion.close(!0)},uninitElements:function(){this.traveldatesAccordion=
null},_onCloseModalClick:function(a){a.preventDefault();this.uninitElements();"true"==$('INPUT[id="searchModalAnalyticsFlag"]').val()&&$namespace.Analytics.trackEvent("event_searchModal_Close","Close",this.widget.model.selectedHotelId);$namespace.Modules.closeViews(this)},resize:function(){this.widget&&this.widget.resize()},validate:function(){return this.form[0].checkValidity()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};$namespace.View=$namespace.View||{};
$namespace.View.DpDealsSearchWidgetView=Backbone.View.extend({el:"#dpdeals_offer_price_availability_modal",ui:{},model:null,module:null,checkInDate:null,checkOutDate:null,events:{'click [data-hook="modal-close"]':"_onCloseModalClick","click #dpdeals_Include_Flight_Checkbox":"_onIncludeFlightCheckbox","click #dpdeals_Rental_Car_Checkbox":"_setCarsIncluded","change #dpdealsModalAgeCheckbox":"_onAgeCheckBoxChange"},initialize:function(a){a=$.extend({},a);this.controller=a.controller;this.initElements();
this.widget=$namespace.Modules.addView(this,$namespace.View.DpSearchWidgetView,{module:$namespace.DpDealsModule,modal:!0,translationTexts:$namespace.SearchWidgetsModule.TranslationTexts,translationMessages:$namespace.SearchWidgetsModule.TranslationMessages,offerSearchInfo:a.offerSearchInfo});this.resize();$('input[format-date-input="true"]',this.el).on("input",function(){utils.formatDateInput($(this))})},_onIncludeFlightCheckbox:function(a){this.includeFlight=$("#dpdeals_Include_Flight_Checkbox");
this.includeFlight.get(0).checked?($("#flightItineraryBlock").show(),$namespace.Analytics.trackEvent("dp_event_searchWidget","flight_included",a.currentTarget.formAction.substring(a.currentTarget.formAction.lastIndexOf("/")+1))):($("#flightItineraryBlock").hide(),$namespace.Analytics.trackEvent("dp_event_searchWidget","flight_excluded",a.currentTarget.formAction.substring(a.currentTarget.formAction.lastIndexOf("/")+1)))},_setCarsIncluded:function(a){this.includeCars=$("#dpdeals_Rental_Car_Checkbox");
this.includeCars.get(0).checked?($("#dpdealsModalAgeCheckboxSpan").show(),$namespace.Analytics.trackEvent("dp_event_searchWidget","rental_cars",a.currentTarget.formAction.substring(a.currentTarget.formAction.lastIndexOf("/")+1))):$("#dpdealsModalAgeCheckboxSpan").hide()},_onAgeCheckBoxChange:function(a){$(a.currentTarget).is(":checked")&&($("#dpdealsModalAgeCheckboxlabel-error").remove(),$("#dpdealsModalAgeCheckboxSpan .checkbox-widget-element").removeClass("dp-error"))},createValidTravelDatesTable:function(){var a=
[],b={};$("table.availableDatesTable tbody tr").each(function(d,f){d={};d.validThrough=$(f).find("td:first").text();d.nights=$(f).find("td:nth-child(2)").text();d.bookBy=$(f).find("td.bookById").text();b=d;a.push(d)});var d=$((0,$namespace.Templates.valid_travel_dates_table)({validTravelDates:a}));$(".hotelOfferSearchPopup .travel-dates-accordion").append(d);""==b.bookBy&&($(".bookByCol").remove(),$('td[id="bookByCol"]').attr("aria-hidden","true"),$('td[id="bookByColContent"]').attr("aria-hidden",
"true"))},initElements:function(){this.createValidTravelDatesTable();this.traveldatesAccordion=new widgets.Accordion(this.$(".travel-dates-accordion"));this.traveldatesAccordion.close(!0)},uninitElements:function(){this.traveldatesAccordion=null},_onCloseModalClick:function(a){a.preventDefault();this.uninitElements();$namespace.Modules.closeViews(this);"true"==$('INPUT[id="searchModalAnalyticsFlag"]').val()&&$namespace.Analytics.trackEvent("event_searchModal_Close","Close",a.currentTarget.baseURI.substring(a.currentTarget.baseURI.lastIndexOf("/")+
1))},resize:function(){this.widget&&this.widget.resize()},validate:function(){return this.form[0].checkValidity()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.View=$namespace.View||{};$namespace.View.WorldMapView=Backbone.View.extend({el:"div.map-destination-desktop",events:{'blur div[data-hook="worldMapContainer"]':"_onBlurWorldMap",'focus div[data-hook="worldMapContainer"]':"_onFocusWorldMap"},controller:null,initialize:function(a){},_onBlurWorldMap:function(a){this.$el.removeClass("highlight")},_onFocusWorldMap:function(a){this.$el.addClass("highlight")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		var EVENT_REASON_NO_REPRICE=1;utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};flightSeatMap=$namespace.FlightSeatMap||{};$namespace.View=$namespace.View||{};
$namespace.View.PackageFlightsView=Backbone.View.extend({el:"#flightSearch",ui:{resultsTarget:null,showMoreLink:null,departureTimeOptions:null,returnTimeOptions:null,departureTimeFields:null,returnTimeFields:null,stopsFilters:null,airlinesFilters:null,outboundAirportFilters:null,returnAirportFilters:null},flightsCount:0,selectedPage:1,searchParams:{uid:null,packageId:null,sortType:0,selectedPage:1,departureDateTakeoffLow:null,departureDateTakeoffHigh:null,departureDateArrivalLow:null,departureDateArrivalHigh:null,
returnDateTakeoffLow:null,returnDateTakeoffHigh:null,returnDateArrivalLow:null,returnDateArrivalHigh:null,selectedDepartureTimeOption:null,selectedReturnTimeOption:null,selectedStops:null,selectedAirlines:null,selectedOutboundAirports:null,selectedReturnAirports:null},searchUrl:"/mock_data/additional_flights.html",events:{'click [data-hook="show-more-flights-link"]':"_onShowMoreClick","change select#flightsSelectSortType":"_onFlightsSortTypeChange",'change #flight-departure-date-filters [name="selectedDepartureTimeOption"]':"_onDepartureTimeOptionChange",
'change #flight-return-date-filters [name="selectedReturnTimeOption"]':"_onReturnTimeOptionChange",'change #flights-outbound-airport-filters input[type="checkbox"]':"_onOutboundFlightsAirportFiltersChange",'change #flights-return-airport-filters input[type="checkbox"]':"_onReturnFlightsAirportFiltersChange",'change #flight-departure-date-filters input[type="hidden"]':"_onFlightsTimeFieldsChange",'change #flight-return-date-filters input[type="hidden"]':"_onFlightsTimeFieldsChange",'change #flights-stops-filters input[type="checkbox"]':"_onFlightsStopsFiltersChange",
'change #flights-airlines-filters input[type="checkbox"]':"_onFlightsAirlinesFiltersChange",'click .flight-results-listing [data-hook="flightSelectButton"]':"_onSelectFlightClick","click a#previousFlight":"_onPreviousFlight","click a#nextFlight":"_onNextFlight",'change [id^="selectFlight"]':"_onSelectFlightSegmentClick",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click [data-hook="continue_button"]':"_onContinueClick","click a.megatipLink":"_onClickMegatipLink",'click [data-hook="reset-flights-filters"]':"_onResetFilterClick",
"click span.activate-text":"_onShowFiltersClick","click span.deactivate-text":"_onHideFiltersClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion","click a.btn-change-flight":"_onClickFlightButton",'click [data-hook="apply-flights-filters"]':"_onClickApplyFilters",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip"},controller:null,superBooking:!1,superBookingGAData:[],initialize:function(a){var b=this;a=$.extend({},a);this.controller=a.controller;this.module=a.module;this.$el=
$("#flightSearch");this.superBooking=a.superBooking;this.ui.resultsTarget=$.hook("flights-results-target",this.$el);this.ui.showMoreLink=$.hook("show-more-flights-link",this.$el);this.ui.departureTimeOptions=this.$('#flight-departure-date-filters input[name="selectedDepartureTimeOption"]');this.ui.returnTimeOptions=this.$('#flight-return-date-filters input[name="selectedReturnTimeOption"]');this.ui.departureTimeFields=this.$('#flight-departure-date-filters input[type="hidden"]');this.ui.returnTimeFields=
this.$('#flight-return-date-filters input[type="hidden"]');this.ui.stopsFilters=this.$('#flights-stops-filters input[type="checkbox"]');this.ui.airlinesFilters=this.$('#flights-airlines-filters input[type="checkbox"]');this.ui.outboundAirportFilters=this.$('#flights-outbound-airport-filters input[type="checkbox"]');this.ui.returnAirportFilters=this.$('#flights-return-airport-filters input[type="checkbox"]');this.ui.matchingFlightCount=this.$("#matchingFlightCount");this.superBooking&&(a=$("#cruise-flight-page-json-data").text().trim(),
_.isEmpty(a)||(this.superBookingGAData=JSON.parse(a)));this.selectedFlightItemUid=this.$('input[type="hidden"][name="selectedFlightItemUid"]').val();this.searchParams.packageId=this.$('input[type="hidden"][name="packageId"]').val();this.flightsCount=this.ui.matchingFlightCount.attr("data-flights-count");this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();this.searchParams.selectedReturnTimeOption=this.ui.returnTimeOptions.filter(":checked").val();a=
$namespace.Storage.get("flight-filters","setCarAgencyHours",!1);$namespace.Storage.remove("flight-filters","setCarAgencyHours");var d=$('input[type=hidden][name="carAgencyPickupOpenTimestamp"]').val(),e=$('input[type=hidden][name="carAgencyPickupCloseTimestamp"]').val(),f=$('input[type=hidden][name="carAgencyDropoffOpenTimestamp"]').val(),g=$('input[type=hidden][name="carAgencyDropoffCloseTimestamp"]').val();this.updateFilterValues();var h=this.searchParams.departureDateTakeoffHigh,k=this.searchParams.departureDateTakeoffLow,
l=this.searchParams.departureDateArrivalHigh,p=this.searchParams.departureDateArrivalLow,q=this.searchParams.returnDateTakeoffHigh,r=this.searchParams.returnDateTakeoffLow,v=this.searchParams.returnDateArrivalHigh,n=this.searchParams.returnDateArrivalLow;"true"==a?($("#car-agency-filter-alert").removeClass("hidden"),this.departureTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_takeoff_slider")),this.departureLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_landing_slider"),
{sliderStart:d,sliderEnd:e}),this.returnTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_takeoff_slider"),{sliderStart:f,sliderEnd:g}),this.returnLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_landing_slider"))):(this.departureTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_takeoff_slider"),{sliderStart:k,sliderEnd:h}),this.departureLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_landing_slider"),{sliderStart:p,
sliderEnd:l}),this.returnTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_takeoff_slider"),{sliderStart:r,sliderEnd:q}),this.returnLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_landing_slider"),{sliderStart:n,sliderEnd:v}));this.ui.departureTimeFields.each(function(){var a=$(this),d=b.searchParams[a.attr("name")];_.isEmpty(d)&&(b.searchParams[a.attr("name")]=a.val())});this.ui.returnTimeFields.each(function(){var a=$(this),d=b.searchParams[a.attr("name")];
_.isEmpty(d)&&(b.searchParams[a.attr("name")]=a.val())});this.flightsSelectSortType=new widgets.SelectWidget(this.$("#flights_select_sort_type"));$.each($('div[id^="select_flight-"]'),function(a,b){new widgets.SelectWidget($(b))});this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.hasClass("flightSearchFilter");$namespace.Utils.Breakpoint.isDesktop()&&a?b.accordion.open(!0):b.accordion.close(!0)});
this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",b.getGAPageViewPrefix()+b.getGAPackageId())});h=this.$el.find("#flightListingContainer").attr("data-sort-type");this.$el.find("#flightsSelectSortType").val(h?h:"0");this.selectedPage=parseInt(this.ui.matchingFlightCount.attr("data-selected-page"));this.updateShowMoreButton();utils.updateLiveContainer();h=this.$el.find('[data-megatip="flight-details-megatip"]');
this.initializeMegaTip(h,!0);$("#page_content").on("ct.accordion.opening",$.proxy(this._gaHandler,this));this.initSlider();this.trackPageView();this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);utils.Breakpoint.isDesktop()&&(h=$("#flights-outbound-airport-filters").height(),k=$("#flights-return-airport-filters").height(),l=0,l=h>k?h:k,$("#flights-outbound-airport-filters").height(l),$("#flights-return-airport-filters").height(l));this.initShopCardTooltips();"true"==
a&&($("#departure-landing").click(),this.searchParams.departureDateArrivalLow=d,this.searchParams.departureDateArrivalHigh=e,this.searchParams.returnDateTakeoffLow=f,this.searchParams.returnDateTakeoffHigh=g,this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:null}))},OnContinueClick:function(a,b){this._onContinueClick(a)},_onClickApplyFilters:function(){$('.filter-accordion[data-hook="accordion"]').each(function(){var a=$(this).find(".accordion-item").first();a.length&&a.hasClass("active")&&
(a.closest(".accordion")[0].accordion.close(),$namespace.TabOrder.updatePageTabOrder(),a.find(".accordion-button").focus())})},getPriceChangText:function(){return 0<$("#packagePriceDifference").val()?"Increase":"Decrease"},getGALabel:function(){return this.superBooking?this.getGAPackageId():$("#packageId").val()},getGACategory:function(){var a="true"===$("#packageType").val()?"DP_":"VP_";return this.superBooking?"CR_":a},getGACategoryPrefix:function(){return this.superBooking?"CR_":""},getGAPageViewPrefix:function(){return this.superBooking?
"/cr/booking/"+(this.isOfferPage()?"offerPage":"bookingWidget")+"/viewFlights":"/vp/booking/viewFlights"},isOfferPage:function(){return"true"==this.superBookingGAData[4]?!0:!1},getCruisePackageId:function(){var a=this.superBookingGAData;return"/"+a[0]+"/"+a[1]+"/"+a[2]+"/"+a[3]},getGAPackageId:function(){return this.superBooking?this.getCruisePackageId():"/"+$("#destinationCode").val()+"/"+$("#regionCode").val()+"/"+$("#packageId").val()},getOnlyGAPackageId:function(){return this.superBooking?this.getCruisePackageId():
$("#packageId").val()},trackPageView:function(){if(this.superBooking){var a=this.getGAPageViewPrefix()+this.getGAPackageId();$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a});var b=this.$el.data("page-title");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:b,eVar2:"Cruise",eVar74:a})}else $namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/viewFlights"+this.getGAPackageId())},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?
$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+
"Flights_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Activities","Click","Expand")},initializeMegaTip:function(a,b){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;d.megatip.find('[data-hook="accordion"]').each(function(a,b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));b.accordion.close(!0)});a.addClass("initialized");var e=this;b&&(a.on("click",$.proxy(d._onClick,
d)),a.on("click",function(a){d.isActive&&$namespace.Analytics.trackEvent(e.getGACategoryPrefix()+"Flights_Results_View_Details","Click",e.getOnlyGAPackageId(),null)}));this.initShopCardTooltips();return d},_gaHandler:function(a){a=$(a.target);var b=a.attr("data-ga");b&&(b=b?b.split("~"):["","",""],"expand"===b[2].toLowerCase()&&this._loadSeatmapTo(a),a=this.getOnlyGAPackageId(),"Flights_Results_Preview_Seat_Map"==b[0]&&(a=b[2]),"Flights_Results_Preview_Terms_Conditions"!=b[0]&&"Flights_Results_Flight_Details"!=
b[0]?$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+b[0],b[1],a,null):$namespace.Analytics.trackEvent(b[0],b[1],a,null))},_onClickFlightButton:function(){$("#headingAdditionalFlightsAvailable").focus().get(0).scrollIntoView({behaviour:"smooth",block:"start"});window.scrollBy(0,-120);$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Change_Flight_Button","Click",this.getOnlyGAPackageId(),null)},_loadSeatmapTo:function(a){a=a.closest(".megatip");var b=a.attr("data-uid"),
d=a.find("div.tab-panels div.panel.active div.flight-seatmap table.fuselage"),e=a.find("div.tab-panels div.panel.active div.flight-seatmap div.error");a.find('select[id^="selectFlight"] option[value="flight-1-tab"]').attr("selected",!0).siblings().removeAttr("selected");a.find('div[data-pane="flight-1-tab"]').addClass("active").show().siblings().removeClass("active").hide();a.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top",
"0");if(d.length||e.length){e.length||a.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px");$(window).scrollTop($('div.megatip[data-uid="'+b+'"] div.accordion.seatMap').offset().top);a=this.$el.find('div.megatip[data-uid="'+b+'"]');b=a.find('select[id^="selectFlight"]');d=b.find("option:selected").index();e=b.find("option");var f=a.find("#previousFlight"),g=a.find("#nextFlight");0==d?(f.hide(),1==e.length?g.hide():g.show()):
0<d&&d<e.length-1?(f.show(),g.show()):d==e.length-1&&(f.show(),g.hide());$namespace.Browser.isIpadOrAndroid()&&(a=a.find("p.airlineWarning"),a.is(":visible")?a.attr("tabindex","-1").focus():b.focus())}else a=a.find('select[id^="selectFlight"]').find(":selected").data("uid"),flightSeatMap.loadFlightSeatMapContent(b,a,!0)},_onClickMegatipLink:function(a){var b=$(a.currentTarget);if(b.hasClass("initialized")){var d=b[0].megatip;d.isActive?d.hide():(d.show(),$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+
"Flights_Results_View_Details","Click",this.getOnlyGAPackageId(),null))}else{a=b.attr("data-uid");var e=b.attr("data-for-lip");a="ctfr=LOAD_FLIGHT_MEGATIP_CONTENT&uid="+a+"&forLIP="+e;var f=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("flightResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#"+b.attr("data-megatip")).html(this.responseText),
d=f.initializeMegaTip(b),d.show(),$namespace.Analytics.trackEvent(f.getGACategoryPrefix()+"Flights_Results_View_Details","Click",f.getOnlyGAPackageId(),null))},null)}},_onSelectFlightSegmentClick:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid"),d=this.$el.find('div.megatip[data-uid="'+b+'"]');a=d.find('select[id^="selectFlight"]');var e=a.find("option:selected"),f=e.index(),g=e.val();e=e.text();d.find('div#flightSeatMapTabPanels div[data-pane="'+g+'"]').addClass("active").show().siblings().removeClass("active").hide();
d.find('div#flightSeatMapTabPanels div[data-pane="'+g+'"]').addClass("active").show().siblings().removeClass("active").hide();d.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top","0");g=d.find("div#flightSeatMapTabPanels div.panel.active div#flightSeatMapContent table.fuselage");var h=d.find("div#flightSeatMapTabPanels div.panel.active div#seatMapAndLegendContainer div.error");g.length||h.length?(flightSeatMap.CurrentSeatMap.updateLegend(),
h.length||d.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px"),$(window).scrollTop($('div.megatip[data-uid="'+b+'"] div.accordion.seatMap').offset().top),b=a.find("option"),0==f?(d.find("#previousFlight").hide(),d.find("#nextFlight").show()):0<f&&f<b.length-1?(d.find("#previousFlight").show(),d.find("#nextFlight").show()):f==b.length-1&&(d.find("#previousFlight").show(),d.find("#nextFlight").hide())):(f=d.find('select[id^="selectFlight"]').find(":selected").data("uid"),
flightSeatMap.loadFlightSeatMapContent(b,f,!0));utils.updateLiveContainer("Changed to "+e);$namespace.Browser.isIpadOrAndroid()&&(d=d.find("p.airlineWarning"),d.is(":visible")?d.attr("tabindex","-1").focus():a.focus())},_onPreviousFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');var d=b.find("option:selected").index();0<d&&(d="flight-"+d+"-tab",b.val(d),b.find('option[value="'+d+'"]').attr("selected",
!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Preview_Seat_Map","Click","Previous_Flight")},_onNextFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');var d=b.find("option"),e=b.find("option:selected").index();e<d.length-1&&(d="flight-"+(e+2)+"-tab",b.val(d),b.find('option[value="'+
d+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Preview_Seat_Map","Click","Next_Flight")},confirmSelectionChange:function(a,b){var d=this;b="ctfr=CHANGE_FLIGHT_NEW_CHANGE_ITEM&uid="+a+"&forLIP="+b;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("flightResults.act",b,null,null,function(b,f,g){this.message?($namespace.DomUtil.setElementLoadingMask(!1,
null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):d.validateAndContinue(a,b,f,g)},null)},_onSelectFlightClick:function(a){a.preventDefault();var b=this,d=$(a.currentTarget),e=d.attr("data-uid"),f=d.attr("data-for-lip");a=d.attr("data-airLineName");var g="ctfr=LOAD_FLIGHT_PRICE_DIFF_POPUP&uid="+e+"&forLIP="+f;$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Select","Click",a);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("flightResults.act",
g,null,null,function(a,g,l,p,q){$namespace.DomUtil.setElementLoadingMask(!1,null,!1,q);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("true"==g)if("false"==a)b.confirmSelectionChange(e,f);else{var h=new widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent(b.getGACategoryPrefix()+"Flights_Results","Continue","Change");b.confirmSelectionChange(e,f)},function(){$namespace.Analytics.trackEvent(b.getGACategoryPrefix()+"Flights_Results",
"Continue","No_Thanks");d.focus()});$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){h.show()},300):h.show()}else if("false"==a)b.confirmSelectionChange(p,f);else if("true"==l){a=function(){$namespace.Analytics.trackEvent(b.getGACategory()+"Flights_Results_Flight_Not_Confirmed_Price_"+b.getPriceChangText(),"Close",b.getGALabel());b.loadSingleCitySelectedAndAdditionalFlightsPage()};var k=new widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent(b.getGACategory()+
"Flights_Results_Flight_Not_Confirmed_Price_"+b.getPriceChangText(),"Continue",b.getGALabel());b.confirmSelectionChange(p,f)},a,a);$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){k.show()},300):k.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:"Flight Warning",text:q,button:"Continue"},b.onModalCloseForReason(EVENT_REASON_NO_REPRICE),!1)},null)},updateShowMoreButton:function(){var a=$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE,b=this.selectedPage*a,d=this.ui.matchingFlightCount.attr("data-flights-count");
if(d>b){this.ui.showMoreLink.show();var e=this.module.TranslationTexts;d>=b+a?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(e.SHOW_MORE_RESULTS_BUTTON_TEXT,{amount:a})):this.ui.showMoreLink.find("span").text(e.SHOW_MORE_BUTTON_TEXT)}else this.ui.showMoreLink.hide()},showFlightSearchResults:function(a){1==this.selectedPage?(this.ui.resultsTarget.html(a),$(window).trigger("ct.showmore.closing")):this.ui.resultsTarget.append(a);this.updateShowMoreButton();$namespace.TabOrder.updatePageTabOrder();
this.initShopCardTooltips()},setFocusOnFirstNewlyLoadedFlight:function(){var a=this.ui.resultsTarget.find('div[data-id="flight'+(this.selectedPage-1)*$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE+'"] span.cityNameToFocusOn');a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(){a.attr("tabindex")!=$(document.activeElement).attr("tabindex")&&(a.attr("tabindex","-1").removeAttr("data-taborder"),a.off("blur"))});a.focus()},_onShowMoreClick:function(a){a.preventDefault();
this.selectedPage+=1;this.searchParams.selectedPage=this.selectedPage;var b=this;this.fetchFlightsData({showLoadingMask:!0,callback:function(){$(window).trigger("ct.showmore.opening");b.setFocusOnFirstNewlyLoadedFlight()}});$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Show_More","Click",this.flightsCount)},initSlider:function(){this.departureTakeoffSlider.resetSlider();this.departureLandingSlider.resetSlider();this.returnTakeoffSlider.resetSlider();this.returnLandingSlider.resetSlider()},
_resetSlider:function(){$("#departure-takeoff").click();$("#return-takeoff").click();this.initSlider();$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter","Click","reset")},_onDepartureTimeOptionChange:function(a){this.departureTakeoffSlider.resetSlider();this.departureLandingSlider.resetSlider();this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();var b=this;this.ui.departureTimeFields.each(function(){var a=$(this);b.searchParams[a.attr("name")]=
a.val()});a=$("#departure-takeoff").prop("checked");var d=$("#departure-landing").prop("checked");a&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Outbound","Click","Departure");d&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Outbound","Click","Arrival");this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},
resetTimeValues:function(){var a=this;this.ui.departureTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=b.val()});this.ui.returnTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=b.val()})},_onResetFilterClick:function(a){var b=this;a=this.ui.airlinesFilters.filter('[value="any"]');var d=this.ui.airlinesFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="stopsAny"]');
d=this.ui.stopsFilters.not('[value="stopsAny"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.outboundAirportFilters.filter('[value="outboundone"]');d=this.ui.outboundAirportFilters.not('[value="outboundone"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="any"]');d=this.ui.stopsFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",
!1);this._resetSlider();this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!0,callback:function(){b.resetTimeValues();b.resetFilters();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_onReturnTimeOptionChange:function(a){this.returnTakeoffSlider.resetSlider();this.returnLandingSlider.resetSlider();this.searchParams.selectedReturnTimeOption=this.ui.returnTimeOptions.filter(":checked").val();var b=this;this.ui.returnTimeFields.each(function(){var a=$(this);
b.searchParams[a.attr("name")]=a.val()});a=$("#return-takeoff").prop("checked");var d=$("#return-landing").prop("checked");a&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Return","Click","Departure");d&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Return","Click","Arrival");this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();var a=b.ui.matchingFlightCount.text();
utils.updateLiveContainer(a)}})},_onFlightsTimeFieldsChange:function(a){a=$(a.currentTarget);if(this.searchParams[a.attr("name")]!=a.val()){this.searchParams[a.attr("name")]=a.val();this.selectedPage=1;var b=this;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();setTimeout(function(){var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)},1E3)}})}},_onFlightsSortTypeChange:function(a){var b=this;a=$(a.currentTarget).find(":selected").text();
$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Sort","Click",a);this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!0,callback:function(){var a=b.module.TranslationTexts;switch(b.$el.find("#flightsSelectSortType").val()){case "0":var e=a.SORTED_BY_BEST_VALUE;break;case "1":e=a.SORTED_BY_PRICE;break;case "2":e=a.DORTED_BY_SHORTEST_SLIGHT;break;case "3":e=a.SORTED_BY_DEPARTURE_TIME;break;case "4":e=a.SORTED_BY_ARRIVAL_TIME}utils.updateLiveContainer(e)},resetClicked:!1})},
_onFlightsStopsFiltersChange:function(a){var b=$(a.currentTarget).val(),d=this.ui.stopsFilters.filter('[value="stopsAny"]'),e=this.ui.stopsFilters.not('[value="stopsAny"]'),f={anyIsClicked:!1};"stopsAny"===b?(b="Any",e.prop("checked",!1),f.anyIsClicked=!0,f.others=e,f.any=d,$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Number_Of_Stops","Click",b)):(e=e.filter(":checked"),"0"==b?b="NonStop":"1"==b?b="1 Stop":"2"==b&&(b="2+ Stops"),0<e.length?(d.prop({checked:!1,
disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Number_Of_Stops","Click",b)):d.prop({checked:!0,disabled:!0}).attr("aria-disabled","true"));var g=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){g.updateFilterValues();g.readUpdatedContents(f)},resetClicked:!1})},updateResultCountLabels:function(a,b){var d=this.module.TranslationTexts;
a.find("label span.resultCount").each(function(a,f){a=$(f);f=a.attr("data-value");f=b[f];1===f?a.text(d.RESULT_TEXT_SINGULAR):(f=$namespace.TranslationUtil.replaceParameters(d.RESULT_TEXT_PLURAL,{resultNumber:f}),a.text(f))})},updateFilterCheckBoxes:function(a,b,d,e){e=a.filter('[value="'+d+'"]');a=a.not('[value="'+d+'"]');a.each(function(){var a=$(this),d=a.attr("value");0==b[d]?(a.prop("checked",!1),a.prop("disabled",!0).attr("aria-disabled","true")):a.prop("disabled",!1).attr("aria-disabled","false")});
a=a.filter(":checked");if(0==b[d]||0==a.length)e.prop("checked",!0),e.prop("disabled",!0).attr("aria-disabled","true")},updateFilterValues:function(){if(null!=$namespace.filteredFlightFilterInfoAsJson){var a=JSON.parse($namespace.filteredFlightFilterInfoAsJson),b=a.stops;this.updateResultCountLabels($("#flights-stops-filters"),b);this.updateFilterCheckBoxes(this.ui.stopsFilters,b,"stopsAny");b=a.airlines;this.updateResultCountLabels($("#flights-airlines-filters"),b);this.updateFilterCheckBoxes(this.ui.airlinesFilters,
b,"any");if(b=a.outboundAirports)this.updateResultCountLabels($("#flights-outbound-airport-filters"),b),this.updateFilterCheckBoxes(this.ui.outboundAirportFilters,b,"outboundone");if(b=a.returnAirports)this.updateResultCountLabels($("#flights-return-airport-filters"),b),this.updateFilterCheckBoxes(this.ui.returnAirportFilters,b,"returnone");b=a.sliderTimeValue;this.searchParams.departureDateTakeoffLow=b.departureDateTakeoffLow;this.searchParams.departureDateTakeoffHigh=b.departureDateTakeoffHigh;
this.searchParams.departureDateArrivalLow=b.departureDateArrivalLow;this.searchParams.departureDateArrivalHigh=b.departureDateArrivalHigh;this.searchParams.returnDateTakeoffLow=b.returnDateTakeoffLow;this.searchParams.returnDateTakeoffHigh=b.returnDateTakeoffHigh;this.searchParams.returnDateArrivalLow=b.returnDateArrivalLow;this.searchParams.returnDateArrivalHigh=b.returnDateArrivalHigh;a=b.departureTakeOff;b=b.returnTakeOff;if(!_.isEmpty(a))for(var d=$("input[name=selectedDepartureTimeOption]"),
e=0;e<d.length;e++){var f=d[e],g=f.dataset.tab;g=$("#flightSearch").find("div[data-panel="+g+"]");f.value==a?(g.addClass("active"),g.attr("aria-hidden","false"),g.removeAttr("style"),g.removeClass("displayNone")):(g.removeClass("active"),g.attr("aria-hidden","true"),g.removeAttr("style"),g.addClass("displayNone"))}if(!_.isEmpty(b))for(a=$("input[name=selectedReturnTimeOption]"),e=0;e<a.length;e++)f=a[e],g=f.dataset.tab,g=$("#flightSearch").find("div[data-panel="+g+"]"),f.value==b?(g.addClass("active"),
g.attr("aria-hidden","false"),g.removeAttr("style"),g.removeClass("displayNone")):(g.removeClass("active"),g.attr("aria-hidden","true"),g.removeAttr("style"),g.addClass("displayNone"))}},resetFilters:function(a,b){this.updateFilterValues();a=function(a,b){for(var d=0;d<a.length;d++){var e=$(a[d]);e.attr("value")==b?(e.prop("checked",!0),e.prop("disabled",!0).attr("aria-disabled","true")):e.prop("checked",!1)}};a(this.ui.stopsFilters,"stopsAny");a(this.ui.airlinesFilters,"any");a(this.ui.outboundAirportFilters,
"outboundone");a(this.ui.returnAirportFilters,"returnone");this.reBuildTimeSlider()},reBuildTimeSlider:function(){this.destroySlider(this.departureTakeoffSlider);this.destroySlider(this.departureLandingSlider);this.destroySlider(this.returnTakeoffSlider);this.destroySlider(this.returnLandingSlider);this.departureTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_takeoff_slider"));this.departureLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_landing_slider"));
this.returnTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_takeoff_slider"));this.returnLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_landing_slider"))},destroySlider:function(a){a.slider[0].noUiSlider.destroy()},_onFlightsAirlinesFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.airlinesFilters.filter('[value="any"]'),f=this.ui.airlinesFilters.not('[value="any"]'),g=$(a.currentTarget).attr("data-filter-name"),h={anyIsClicked:!1};
"any"===d?(f.prop("checked",!1),d="Any",h.anyIsClicked=!0,h.others=f,h.any=e,$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Airline","Click",d)):0<f.filter(":checked").length?(e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter_Airline","Click",g)):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=
this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();b.readUpdatedContents(h)},resetClicked:!1})},_onOutboundFlightsAirportFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.outboundAirportFilters.filter('[value="outboundone"]'),f=this.ui.outboundAirportFilters.not('[value="outboundone"]');$(a.currentTarget).attr("data-filter-name");var g={anyIsClicked:!1};"outboundone"===d?(f.prop("checked",!1),d="Any",g.anyIsClicked=!0,g.others=
f,g.any=e):0<f.filter(":checked").length?e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();b.readUpdatedContents(g)},resetClicked:!1})},_onReturnFlightsAirportFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.returnAirportFilters.filter('[value="returnone"]'),
f=this.ui.returnAirportFilters.not('[value="returnone"]');$(a.currentTarget).attr("data-filter-name");var g={anyIsClicked:!1};"returnone"===d?(f.prop("checked",!1),d="Any",g.anyIsClicked=!0,g.others=f,g.any=e):0<f.filter(":checked").length?e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();
b.readUpdatedContents(g)},resetClicked:!1})},readUpdatedContents:function(a){var b=this.module.TranslationTexts,d=this.ui.matchingFlightCount.text();if(a.anyIsClicked)if(a.any.prop("disabled",!0).attr("aria-disabled","true"),$namespace.Browser.iPhone||$namespace.Browser.iPad)utils.updateLiveContainer(d);else{var e=$(a.others.not(":disabled")[0]);if(0<e.length){a=e.parent().find("label");var f=$("<span>",{"class":"ada-screenreader"}).text(d+". "+b.MOVE_TO_NEXT_CHECKBOX_TEXT);a.prepend(f);setTimeout(function(){e.focus();
setTimeout(function(){f.remove()},300)},300)}}else utils.updateLiveContainer(d)},updateMatchingFlightsTitle:function(){var a=this.module.TranslationTexts,b=this.ui.matchingFlightCount.attr("data-flights-count");1==b?this.ui.matchingFlightCount.text(a.MATCHING_FLIGHTS_SINGULAR):(a=$namespace.TranslationUtil.replaceParameters(a.MATCHING_FLIGHTS_PLURAL,{resultNumber:b}),this.ui.matchingFlightCount.text(a))},getCheckboxValues:function(a){var b=[];a.each(function(){var a=$(this);a.is(":checked")&&b.push(a.val())});
return b.length?b.join(","):""},fetchFlightsData:function(a){var b=a?a.showLoadingMask:!0,d=a?a.resetClicked:!1,e=this.searchParams.departureDateTakeoffLow,f=this.searchParams.departureDateTakeoffHigh,g=this.searchParams.departureDateArrivalLow,h=this.searchParams.departureDateArrivalHigh,k=this.searchParams.returnDateTakeoffLow,l=this.searchParams.returnDateTakeoffHigh,p=this.searchParams.returnDateArrivalLow,q=this.searchParams.returnDateArrivalHigh,r=this.searchParams.selectedDepartureTimeOption,
v=this.searchParams.selectedReturnTimeOption,n=this.getCheckboxValues(this.ui.stopsFilters.not('[value="stopsAny"]')),t=this.getCheckboxValues(this.ui.airlinesFilters.not('[value="any"]')),u=this.getCheckboxValues(this.ui.outboundAirportFilters.not('[value="outboundone"]')),w=this.getCheckboxValues(this.ui.returnAirportFilters.not('[value="returnone"]')),y=this.$el.find("#flightListingContainer"),z=y.attr("data-for-LIP"),x=y.attr("data-product-uid"),B=y.attr("data-package-id"),G=this.$el.find("#flightsSelectSortType").val();
y="ctfr=LOAD_ADDITIONAL_FLIGHTS_RESULTS&uid="+x+"&forLip="+z+"&packageId="+B+"&resetClicked="+d+"&sortType="+G+"&selectedPage="+this.selectedPage;d||(y+="&selectedStops="+n+"&selectedAirlines="+t+"&departureDateTakeoffLow="+e+"&departureDateTakeoffHigh="+f+"&departureDateArrivalLow="+g+"&departureDateArrivalHigh="+h+"&returnDateTakeoffLow="+k+"&returnDateTakeoffHigh="+l+"&returnDateArrivalLow="+p+"&returnDateArrivalHigh="+q+"&selectedDepartureTimeOption="+r+"&selectedReturnTimeOption="+v+"&selectedOutboundAirports="+
u+"&selectedReturnAirports="+w);d={};d.productUid=x;d.forLIP=z;d.packageId=B;d.sortType=G;d.selectedPage=this.selectedPage;z=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_WITH_SELECTED_AND_ADDITIONAL_FLIGHTS;this.superBooking&&(z=$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_POST_FLIGHT_RESULTS);$namespace.HistoryNavigation.replaceHistoryWithData(z,d,[d.productUid,d.sortType,d.selectedPage,d.forLIP]);var H=this;utils.updateLiveContainer();b&&$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCall("flightResults.act",y,null,null,function(d){b&&$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(H.ui.matchingFlightCount.attr("data-flights-count",d),H.flightsCount=d,H.updateMatchingFlightsTitle(),H.showFlightSearchResults(this.responseText),"function"===typeof a.callback&&a.callback())},null)},onModalCloseForReason:function(a){var b=this;return function(){b.loadSingleCitySelectedAndAdditionalFlightsPage(a)}},
loadSingleCitySelectedAndAdditionalFlightsPage:function(a){a===EVENT_REASON_NO_REPRICE&&$namespace.Analytics.trackEvent(this.getGACategory()+"Flights_Results_Flight_Not_Confirmed_No_Change","Continue",this.getGALabel());$namespace.AjaxUtil.makeAjaxCall("flightResults.act","ctfr=SHOW_FLIGHT_SEARCH_RESULT_AND_CHANGE_FLIGHT_WORKFLOW",null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.TabOrder.updatePageTabOrder(),
$namespace.Application.initializeOnMainContentReload())},null)},validateAndContinue:function(a,b,d,e){a="ctfr=VALIDATE_PACKAGE_MINIMUM_NIGHTS&uid="+a;var f=b;if(void 0!=d&&void 0!=e)var g=d,h=e;var k=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("flightResults.act",a,null,null,function(a,b,d,e,v,n,t){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(!_.isEmpty(e)&&
_.isEmpty(f)&&(f=e),"false"==a)if($namespace.DomUtil.setElementLoadingMask(!1,null,!0),"true"==v){a=function(){$namespace.Analytics.trackEvent(k.getGACategory()+"Flights_Results_Flight_Not_Confirmed_Price_"+k.getPriceChangText(),"Close",k.getGALabel());k.loadSingleCitySelectedAndAdditionalFlightsPage()};var l=new widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent(k.getGACategory()+"Flights_Results_Flight_Not_Confirmed_Price_"+k.getPriceChangText(),"Continue",k.getGALabel());
null!=t?$namespace.Navigation.loadPage(_webLoc+"/h="+t):$namespace.GlobalConstants.RESPONSIVE_VP_HOTEL_RESULTS_PAGE_ENABLED?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):(DomUtil.disableElement("dataContent",!0),_newSingleCityFlightResultWorkflow&&SearchResults.setNewSingleCityFlightResultWorkflow(!1),HistoryNavigation.addHistory(PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT),AjaxUtil.makeAjaxCallWithWaitingDiv("searchResults.act",
"sr=LOAD_TRIP_SUMMARY_AND_SINGLE_CITY_HOTEL_RESULTS&loadUc=true",null,"mainContent",callbackLoadTripSummary))},a,a);$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){l.show()},300):l.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:"Flight Warning",text:e,button:"Continue"},k.onModalCloseForReason(EVENT_REASON_NO_REPRICE),!1);else null!=t?$namespace.Navigation.loadPage(_webLoc+"/h="+t):(_.isEmpty(f)||$namespace.MessageUtil.setSessionValue("FLIGHT_HOTEL_MESSAGE",
f),g?($namespace.MessageUtil.setSessionValue("No_CAR_AVAILABLE_UPDATING_FLIGHT_WITH_LANDING_TIME",g),$namespace.MessageUtil.setSessionValue("CAR_AGENCY_OPERATIONAL_HOURS",h)):void 0!=g&&$namespace.MessageUtil.setSessionValue("No_CAR_AVAILABLE_UPDATING_FLIGHT_WITH_LANDING_TIME",g.toString()),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT))},null)},_onContinueClick:function(a){a.preventDefault();$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+
"Flights_Results","Continue","Best_Price");this.validateAndContinue(this.selectedFlightItemUid)},onError:function(){},_onShowFiltersClick:function(a){$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter","Click","Show")},_onHideFiltersClick:function(a){$namespace.Analytics.trackEvent(this.getGACategoryPrefix()+"Flights_Results_Filter","Click","Hide")},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},
_resetFlightsAccordion:function(a){a=$(a.target).closest(".megatip").attr("id");a=$("#"+a+" .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_gaForShopCardToolTip:function(){this.superBooking&&$namespace.Analytics.trackEvent("CR_Flights_Shop_Card","ToolTip",this.getCruisePackageId())}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.PackageOverviewView=Backbone.View.extend({el:"#packageOverview",events:{"click a.modal-gallery-thumb":"_onGalleryThumbClick",'click a[data-modal^="includedTicketVendorItemTermsAndConditions"]':"_onIncludedTicketVendorItemTermsAndConditionsClick",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[id="theme_park_read_more"]':"_onThemeParkReadMoreClick",'click a[data-hook="continue_button"]':"_onCustomizePackageClick",
'click a[data-modal="activity-data-modal"]':"_onToursLinkClick","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup",'click [data-hook="megatip-close"]':"_resetFlightsAccordion"},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():
(this.hotelRatingsTooltip.show(a),a=$("#packageId").val(),$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Costco Travel Rating","click",a))},_resetFlightsAccordion:function(a){a=$("#flight-details-megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},initialize:function(a){$("#custompath_package_overview, footer").on("keyup",function(a){a.keyCode||9==a.which?$namespace.DomUtil.scrollFocusedUnderStickyBar():null});var b=this;this.controller=
$.extend({},a).controller;this.module=a.module;a=this.$el.find("[data-megatip='flight-details-megatip']");if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));a.on("click",function(){var a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Overview_Flights_View_Details","click",a,null)});document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}this.$el.find('[data-hook="accordion"]').each(function(a,d){d.accordion.close(!0);
if("baggageAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onBaggageAccordionClick"));else if("termsAndConditionsAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onTermsAndConditionsAccordionClick"));else if("diningAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onTermsAndConditionsAccordionClick"))});$(this.el).find("div.themeParkTickets div.additionalInformation").remove();$(this.el).find("div.themeParkTickets div.resortDetails").remove();
$(this.el).find("div.themeParkTickets ul.themeParkLinks").remove();a=$(this.el).find("div.themeParkTickets div[id^='includedTicketVendorItem'] div[id^='includedTicketVendorItemDescription_']");d=$(a).find("p");var e=$(a).parent();$(e).prepend(d);$(a).remove();this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length)for(a=$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}),a.off("click"),
a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageOverview"})});$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var a=this,d=$(this).data("destination"),e=$(this).data("citycode"),
k=$(this).data("hotelid"),l=$(this).data("megatip"),p="";p="true"!=$(".dynamicPackageId").first().val()?"vpc=LOAD_OFFER_HOTEL_DETAIL_INFO":"vpc=LOAD_DYNAMIC_HOTEL_DETAIL_INFO";p=p+("&destination="+d)+("&cityCode="+e)+("&hotelId="+k);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Learn_More","click",k,null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",p,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);$("#"+l).html(this.responseText);a.megatip=new $namespace.Widgets.Megatip($(a));$.hook("accordion").each(utils.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a);a.on("ct.accordion.clicked",$.proxy(b,"_onAccordionClick"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,b){$(b).on("click",function(a){a=
$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Hotel_Rooms",label:k+"_"+d.innerText})})});a.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));a.tabSwitcher.initialize();a.tabSwitcher.onSelect=function(b,d,e){a.previousTab=a.currentTab;a.currentTab=b;"features-tab"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property_Features",
"click",k,null):"activities-tab"==b&&$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property_Activities","click",k,null)};a.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+k));a.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50);""==$("#hotelRoomFeatureTabData").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden");""==$("#hotelPointOfInterestTabData").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},
null,"")});this.handleCarousel();this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});0<$(".transportation-card").length?$(".transportation-overview").show():$(".transportation-overview").hide();$(".displayMessageOnPackageOverview").show();$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.initShopCardTooltips();0==$("#transportResultArrivalTransfer").length&&($("#DepartureTransferUnavailable").addClass("displayNone"),$("#ArrivalTransferUnavailable").removeClass("displayNone"));
0==$("#transportResultDepartureTransfer").length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").removeClass("displayNone"));1==$("#transportResultArrivalTransfer").length&&1==$("#transportResultDepartureTransfer").length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").addClass("displayNone"))},_onResize:function(){$("img[carImage]").removeAttr("initialized").removeAttr("altsrcattempted");$namespace.ImageUtil.initImages()},
_onAccordionClick:function(a,b){a=$(".hotelIdValue").first().val();"Overview"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Overview","click",a,null):"Property"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property","click",a,null):"Dining"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Dining","click",a,null):"Rooms"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Rooms","click",a,null):"Map"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Map","click",a,
null):"All-Inclusive"==b&&$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_AllInclusive","click",a,null)},closeModal:function(){setTimeout(function(){this.modalView.remove();this.modalView=null}.bind(this),delay)},handleCarousel:function(){$(document).on("ct:InfiniteCarousel:updated",function(a){$(".megatip.active").find('[data-hook="megatip-close"]').click()})},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"});$namespace.Analytics.trackEvent("Hotel_popup",
"photos",a.currentTarget.dataset.hotelid,null)},resize:function(){var a=$("DIV.banner-info");if(breakpoint.isMobile()){var b=a.css("height");a.data("css-height",b);a.css("height","").removeClass("h350")}else(b=a.data("css-height"))&&!a.css("height")&&a.css("height",b),a.addClass("h350")},_onCustomizePackageClick:function(a){a.target.disabled="true";$namespace.DomUtil.setElementLoadingMask(!0);a=$("#isFlightRequired").val();var b=$("#numberOfCities").val(),d=$(".noFlightAvailable"),e="/h=";$("#destinationCode").val();
$("#regionCode").val();$("input#packageId").val();e=0==d.length&&"true"==a?$('input[type="hidden"][name="selectedFlightItemUid"]').length?e+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL:e+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT:1==b?e+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL:e+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_HOTEL;$namespace.Navigation.loadPage(_webLoc+e)},_onIncludedTicketVendorItemTermsAndConditionsClick:function(a){(new $namespace.Widgets.Modal((0,$namespace.Templates.selectedTicketTermsAndConditions)({tourDetail:this.responseText}))).show()},
_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=a.attr("data-includeRemarks"),e=a.attr("data-test"),f=$("#theme_park_read_more").attr("data-vendorid"),g=$("#packageId").val(),h="";h=(d?"cthr=SHOW_FILTERED_ITINERARY_REMARKS":"cthr=SHOW_ITINERARY_REMARKS")+("&itineraryCode="+b);"transportation_additional_informations_modal_id"==a.attr("id")&&(g=$("#packageId").val());$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",
h,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkArrivalTransferDescription"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_Arrival_Transfers",label:g});"linkDepartureTransferDescription"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_Departure_Transfers",label:g});"linkThemeParkTicketCardDescription"==
e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Theme_Parks_Tickets",label:"FLDISNEYWORLD"==f?"WDW":"UO"});"linkAdditionalInformation"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_RentalCar",label:g});"linkDataItineraryModal"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Rate_Information",label:g+"_"+b});d&&"linkThemeParkTicketCardDescription"!=
e&&$namespace.Analytics.trackEvent("Pkg_Overview_Included_Extras","click",g)},_onToursLinkClick:function(a){a=$(a.currentTarget);var b=$("#packageId").val(),d="ssc=LOAD_SIGHTSEEING_POPUP&sightseeingId="+a.attr("data-tour-id"),e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal((0,$namespace.Templates.package_overview_tour_detail_modal)({tourDetail:this.responseText}))).show()}}(this);
$namespace.Analytics.trackEvent("Pkg_Overview_Activities","click",b+"_"+a.attr("data-tour-id"));$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",d,null,null,e,null)},_onThemeParkReadMoreClick:function(a){$("#packageId").val();var b="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+$(a.target).data("vendorid");var d=this.module.TranslationTexts,e=$(a.target).data("vendorid"),f=$(a.target).attr("data-test"),g=function(b){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE});else{b.themeParkDetailModal=new $namespace.Widgets.Modal(this.responseText,function(){e&&e.off("click")});var e=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');var f=e.length;f&&$(e[f-1]).attr("data-tab-last",!0);e.on("click",function(a){a=$(a.currentTarget);b.loadParkAndTheaterVenuePopup(JSON.parse(a.attr("data-link-args").trim()),
a.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html($(a.target).data("title"));b.themeParkDetailModal.show()}}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",b,null,null,g,null);"linkThemeParkTicketCardReadMore"==f&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Theme_Parks",label:"FLDISNEYWORLD"==e?"WDW":"UO"})},loadParkAndTheaterVenuePopup:function(a,
b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;d+="&region="+a.region;d+="&area="+a.area;var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=d.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock");d.themeParkDetailModal.resetFirstAndLastTabs()}),
$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),
$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),e.show(),e.el.attr("data-set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,e,null)},_showCancellationPolicyModal:function(){var a=$("#packageId").val(),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("Pkg_Overview_Cancellation_Policy_Schedule","click",a,null)},_onAirlineBaggagePolicyClick:function(a){a=
$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onBaggageAccordionClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Overview_Flights_Baggage Fees","click",a,null)},_onTermsAndConditionsAccordionClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Overview_Flights_Terms_and_Conditions","click",a,null)},_showCancellationResponsivePopup:function(a){a=$(a.currentTarget).attr("data-iternary-code");
var b=$("#"+a).html();a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var d=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(d=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(b),d.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act","cthr=SHOW_CANCEL_MESSAGE",
null,null,a,null)},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;MAP_DIV_ENABLED="VP_MAP_DIV_ENABLED";var VP_SELECTED_PACKAGE_ID="VP_SELECTED_PACKAGE_ID";removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY;$namespace.View=$namespace.View||{};
$namespace.View.PackageSearchResultsView=Backbone.View.extend({el:"#searchResults",VP1_MAP_SELECTED_MARKER_ID:"VP1_MAP_SELECTED_MARKER",ui:{resultsTarget:null,multiCityBtn:null,showMoreLink:null,ratingFilters:null,typeFilters:null,areaFilters:null,parksFilters:null,brandChainFilters:null},hotelSearchUrl:"/mock_data/hotelOnlySearch.json",searchUrl:"/mock_data/packageSearchResults.html",searchCount:0,selectedPage:1,events:{'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click [data-hook="show-more-link"]':"_onShowMoreClick",
"change select#packagesSelectSortType":"_onPackageSortTypeChange","click a#editSearchLink":"_onEditSearchClick",'click [data-hook="adjust-your-search"]':"_onAdjustSearchOnZeroSRPClick","click button#optBtnMultiCity":"_onMultiCityBtnClick",'click [data-hook="showmore-trigger"]':"_onShowMoreTrigger",'click [data-hook="adjustSearch"]':"_onAdjustSearchClick",'click [data-hook="continueFromSearch"]':"_onContinueButtonClick",'click [data-hook="adjustSearchToAddFlight"]':"_onAdjustSearchToAddFlightClick",
"click a#theme_park_details":"_onThemeParkDetailsClick",'click a[data-tooltip="hotel-description-travel-ratings-tooltip"]':"_onCostcoTravelRatingTooltipClick","click a#costcoRecommends_tooltip":"_onCostcoRecommendsClick",'click [data-hook="label-view-map"]':"_onLabelViewMapClick",'click [data-hook="label-view-list"]':"_onLabelViewListClick","click button#remove-selected-package":"_onRemoveSelectedPackageClick","click a#mapIt":"_onMapItClick","click a.modal-gallery-thumb":"_onGalleryThumbClick","click #showMoreFilter":"_onshowMoreHotelByAreaFilterClick",
'click [data-hook="clear-map-selection-link"]':"_onResetFiltersClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick",'click [data-hook="apply-package-search-filters"]':"_onClickApplyFilters",'click [data-hook="reset-package-search-filters"]':"_onResetFiltersClick"},controller:null,module:null,starRatingFilter:{},hotelsTypeFilter:{},hotelsByAreaFilter:{},hotelsByBrandChainFilter:{},themeParkFilter:{},markerLocationSelectedOnMap:null,selectedLocation:null,initialize:function(a){$("#custompath_search_results, footer").on("keyup",
function(a){a.keyCode||9==a.which?$namespace.DomUtil.scrollFocusedUnderStickyBar():null});var b=$.extend({},a);this.vp2Enabled=a.vp2Enabled;this.controller=b.controller;this.module=b.module;a=this.module.TranslationTexts;this.ui.resultsTarget=$.hook("search-results-target",this.$el);this.ui.showMoreLink=$.hook("show-more-link",this.$el);this.ui.ratingFilters=this.$('#star-rating-filters input[type="checkbox"]');this.ui.typeFilters=this.$('#property-type-filters input[type="checkbox"]');this.ui.areaFilters=
this.$('#area-name-filters input[type="checkbox"]');this.ui.brandChainFilters=this.$('#brand-chain-filter input[type="checkbox"]');this.ui.parksFilters=this.$('#theme-parks-filters input[type="checkbox"]');this.ui.multiCityBtn=this.$("button#optBtnMultiCity");this.ui.map=$.hook("locations_map");this.searchCount=this.ui.showMoreLink.data("searchCount");this.selectedTab=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);this.isMobile=utils.Breakpoint.isMobile()||
$namespace.Browser.iPad?!0:!1;this.addMarkerAgain=this.mapOpen="false";this.mapCreated=!1;this.locationsData=$namespace.locationsData||{};this.liveContainer=$(".tab-switcher-live-container");this.translations=b.module.TranslationTexts;10>=$("#showmorearea").val()&&$("#showmoreId").removeClass("showmore-content");$namespace.PackageSearchResultsModule.packageSearched=!1;this.selectedPage=parseInt($namespace.PageHistory.getSelectedPageFromPath());b=Math.ceil(this.searchCount/$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE);
this.selectedPage>b&&(this.selectedPage=b);0>window.location.href.indexOf("/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)&&$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE);1==this.selectedPage&&$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE,[]);b=0;this.priceRangeMinFilter=new $namespace.Widgets.PriceRangeWidget(this.$el.find("#priceRangeMin"),
$.proxy(this,"loadFilterSearchResult"),{keyboard:utils.Keyboard,initialValue:this.$el.find("#priceRangeMin").data("min-price"),currencyFormat:$namespace.Config.currencyFormat});b+=this.priceRangeMinFilter.active?1:0;this.priceRangeMaxFilter=new $namespace.Widgets.PriceRangeWidget(this.$el.find("#priceRangeMax"),$.proxy(this,"loadFilterSearchResult"),{keyboard:utils.Keyboard,initialValue:this.$el.find("#priceRangeMax").data("max-price"),currencyFormat:$namespace.Config.currencyFormat});b+=this.priceRangeMaxFilter.active?
1:0;this.priceRangeMinFilter.active||this.priceRangeMaxFilter.active||$("#price-range-filters").hide();this.hotelNameFilter=new widgets.DataListFilterWidget(this.$("#hotel-name-filter"),{resultList:this.getHotelNameIdList($namespace.filteredPackageInfoAsJson),onSelect:$.proxy(this._onHotelNameSelect,this),noResultsText:a.NO_HOTELS_FOUND});this.packagesSelectSortType=new widgets.SelectWidget(this.$("#packages_select_sort_type"));var d=this.$el.find("#custompath_search_results").attr("data-sort-type");
this.$el.find("#packagesSelectSortType").val(d?d:"0");this.$el.find('.filter-accordion[data-hook="accordion"], .accordion[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});this.initHotelAdvisoryLinks();this.initHotelRatingTooltips();this.initShopCardTooltips();this.setupShowMoreIncludedExtras();this.starRatingFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#star-rating-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_STAR_RATING_SINGULAR,labelAnyPlural:a.ANY_STAR_RATING_PLURAL,
resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelStarRatings",resultCountPropName:"packagesByStarRating",minCheckboxes:1});b+=this.starRatingFilter.active?1:0;this.hotelsTypeFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#property-type-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_HOTEL_TYPE_LABEL_SINGULAR,labelAnyPlural:a.ANY_HOTEL_TYPE_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,
checkboxStatePropName:"hotelPropertyTypes",resultCountPropName:"packagesByPropertyType",minCheckboxes:1});b+=this.hotelsTypeFilter.active?1:0;this.hotelsByAreaFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#area-name-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_AREA_LABEL_SINGULAR,labelAnyPlural:a.ANY_AREA_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelAreaNames",resultCountPropName:"packagesByAreaName",
minCheckboxes:2});b+=this.hotelsByAreaFilter.active?1:0;this.hotelsByBrandChainFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#brand-chain-filter"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_BRAND_CHAIN_SINGULAR,labelAnyPlural:a.ANY_BRAND_CHAIN_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelBrandChainNames",resultCountPropName:"packagesByBrandChainName",minCheckboxes:2});b+=this.hotelsByBrandChainFilter.active?
1:0;this.themeParkFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#theme-parks-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_THEME_PARK_LABEL_SINGULAR,labelAnyPlural:a.ANY_THEME_PARK_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"themeParkIds",resultCountPropName:"packagesByThemeParkId",minCheckboxes:1});b+=this.themeParkFilter.active?1:0;this.afterSearchUpdateHandler($namespace.filteredPackageInfoAsJson);
0<b?(this.$el.find("#packageSearchFilter").on("ct.accordion.clicked",this._onShowFiltersClick),this.$el.find("#packageSearchFilter").on("ct.accordion.clicked_close",this._onHideFiltersClick)):$("#packageSearchFilter").hide();a=null;if(this._checkPageReloadedOrBack()){b=this._getCookieValue(MAP_DIV_ENABLED);a=this.getVP1MapMarkerSelection();if(null!=a)for(d=0;d<this.locationsData.length;d++)this.locationsData[d].hotelId==a&&(this.locationsData[d].isSelected=!0);b[0]&&"true"===b[0]&&this._onLabelViewMapClick()}else this._removeMapDivCookie(),
sessionStorage.removeItem(VP_SELECTED_PACKAGE_ID),this.removeVP1MapMarkerSelection();this.markerLocationSelectedOnMap||null!=a||$(".clearMapSelection").hide();this._initInnerAccordions();this._disableHoteByAreFadeInCheckbox();"true"===this.$("#dpToVpRedirectId").val()&&this._dpToVpRedirectGaTrack();"true"===$('INPUT[id="noHotelAvailableId"]').val()&&this._noHotelAvailabilityForHFHFCAnalytics()},_noHotelAvailabilityForHFHFCAnalytics:function(){var a=$('INPUT[id="destinationTypeId"]').val(),b=$('INPUT[id="locationName"]').val().replaceAll(/<comma>/gi,
","),d=$('INPUT[id="originalCityCode"]').val(),e=$('INPUT[id="departureDate"]').val()+"_"+$('INPUT[id="arrivalDate"]').val(),f=$('INPUT[id="departureCityCode"]').val(),g=$('INPUT[id="hotelRooms"]').val()+"_"+$('INPUT[id="adults"]').val()+"_"+$('INPUT[id="children"]').val();d=d?d:d?d:"NULL";if(a)switch(a){case "destination":b=b.replace(" (","_").replace(")","");break;case "city":b=b+"_"+d;break;case "airport":b=b.replace(b.substring(0,6),"")+"_"+b.substring(1,4)}a=b+"_"+e+"_"+f+"_"+g;$namespace.Analytics.trackEvent($namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"_event_searchWidget","NoHotels_Availability",a)},_onClickApplyFilters:function(a){$('.filter-accordion[data-hook="accordion"]').each(function(){var a=$(this).find(".accordion-item").first();a.length&&a.hasClass("active")&&(a.closest(".accordion")[0].accordion.close(),$namespace.TabOrder.updatePageTabOrder(),a.find("#filterSearch").focus())})},_onReviewsLinkClick:function(a){a=$(a.currentTarget);$namespace.TurnToReviewsUtil.drawReviewWidgetsInModal(a.data("hotel-id"),a);$namespace.Analytics.trackEvent("Search_Results_Hotel_Reviews",
a.data("hotel-id"),a.closest(".turntoTeaser").data("packageid"))},_dpToVpRedirectGaTrack:function(){switch(this.selectedTab){case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL:var a=this.$("#hotelDestination").val();$namespace.Analytics.trackEvent("Message/VP/Package_Results","Package_inclusions_may_vary_from_your_original_HOBE_search",a);break;case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT:a=this.$("#hotel_package_destination").val();$namespace.Analytics.trackEvent("Message/VP/Package_Results",
"Package_inclusions_may_vary_from_your_original_HF_search",a);break;case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR:a=this.$("#hotel_package_destination").val(),$namespace.Analytics.trackEvent("Message/VP/Package_Results","Package_inclusions_may_vary_from_your_original_HFC_search",a)}},_disableHoteByAreFadeInCheckbox:function(){if($("#showmoreId").hasClass("showmore-content")){var a=$('#showmoreId input[type="checkbox"]').length-4;$('#showmoreId input[type="checkbox"]').each(function(b,
d){b>=a&&$(d).parent().children().prop({disabled:!0})})}},_initInnerAccordions:function(){this.$el.find('[data-hook="hotelBrandAccordian"]').not(".empty").each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}))},createMap:function(){utils.isArray(this.locationsData)&&(null==this.selectedLocation||this.selectedLocationInFilteredList()||(this.selectedLocation.attributes.notInFilteredList=!0,this.locationsData.push(this.selectedLocation.attributes)),this.locationsData.map(function(a,
b){a.index=b+1}),this.collection=new $namespace.Collection.HotelLocationCollection(this.locationsData));this.collection&&this.collection.length?(this.initializeMap(),this.mapDivOpen=!0,this.ui.map.show(),this.showMarkers(),this.bindMarkers()):this.hideMap()},selectedLocationInFilteredList:function(){for(var a=0;a<this.locationsData.length;a++)if(this.locationsData[a].hotelId==this.selectedLocation.attributes.hotelId)return this.locationsData[a].isSelected=!0;return!1},initializeMap:function(){for(var a,
b,d=0;d<this.collection.length;d++)if(0!=this.collection.at(d).get("latitude")&&0!=this.collection.at(d).get("longitude")){b=this.collection.at(d);break}b&&(a=new google.maps.LatLng(b.get("latitude"),b.get("longitude")));this.map=new google.maps.Map(this.ui.map[0],{zoom:10,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},
mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},center:a,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3,maxZoom:18})},hideMap:function(){$(this.el).addClass("no-map");this.ui.map.hide()},showMarkers:function(a){var b=this,d=new google.maps.LatLngBounds;this.collection.each(function(a,f){f=a.get("marker");var e=sessionStorage.getItem(VP_SELECTED_PACKAGE_ID);a.get("hotelId")==e&&(a.set("isSelected",
!0),b.loadSelectedVPPage(a));a.get("isSelected")&&(b.selectedLocation=a,f.setZIndex($namespace.Config.MARKER_INDEX++));d.extend(f.getPosition());f.setMap(b.map)});this.map.fitBounds(d)},bindMarkers:function(){var a=this;this.collection.each(function(b){var d=b.get("marker");google.maps.event.addListener(d,"click",function(){a.selectLocation(b)});a.addInfoWindowToMarker(a.map,d,b)})},addInfoWindowToMarker:function(a,b,d){function e(){if($namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED){var e=k.getAvgRating();
"Undefined"!=typeof e&&null!==e&&0!==e&&(k.getRatingsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_RATINGS_TO_SHOW_RATINGS()?(d.set("memberRating",parseFloat(e)),d.set("maxRating",k.getMaxRating().toString())):(d.set("memberRating",null),d.set("maxRating",null)))}"0.0"!=d.get("hotelRating")&&(g=d.get("vp1Package")?g+f.INFOWINDOW_COSTCO_TRAVEL_RATING+" <img src='"+$namespace.Configuration.webLoc+"/content/_legacy/shared/images/icons/compassRating_0"+d.get("hotelRating")+".png' /><br/>":g+f.INFOWINDOW_COSTCO_HOTEL_RATING+
" <img src='"+$namespace.Configuration.sharedLoc+"/images/icons/starRating_0"+d.get("hotelRating")+".png' /><br/>");d.get("memberRating")&&(g=g+f.INFOWINDOW_COSTCO_MEMBER_RATING+": <span data-test='spanCostcoMemberRating'><strong>"+d.get("memberRating").toFixed(1)+"/");d.get("maxRating")&&(g=g+d.get("maxRating")+"</strong></span><br/>");d.get("packageAvailable")&&(g=g+f.INFOWINDOW_TOTAL_PRICE+": <span class='bold'>"+d.get("packagePrice")+"</span><br/>");g+="</div>";var h=new google.maps.InfoWindow({content:"<div class='border-blue'>"+
g+"</div>"});e="mouseover";"ontouchstart"in document.documentElement&&(e="mousedown");google.maps.event.addListener(b,e,function(){self.activeInfoWindow&&self.activeInfoWindow.close();h.open(a,b);self.activeInfoWindow=h});google.maps.event.addListener(b,"mouseout",function(){h.close()})}var f=this.module.TranslationTexts,g="<div class='marker-description'><span class='blue bold'>"+d.get("hotelName")+"</span><br/>",h="<div data-hook='ttTeaser' data-sku='"+d.get("id")+"'>",k;$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED?
k=new $namespace.Widgets.TurnToReviewsTeaser(h,{callback:e}):e()},_onMapItClick:function(a){"false"==this.mapOpen&&this._onLabelViewMapClick();var b=this;a=$(a.target);var d=a.attr("data-id");a=a.attr("data-package");this.collection.each(function(a){var e=a.get("id");if(d==e)return b.selectLocation(a),b._reCenterMap(a),!1});$("html, body").animate({scrollTop:0},"slow");this.liveContainer.text($namespace.TranslationUtil.replaceParameters(this.translations.ACCESSIBILITY_PACKAGE_SELECTED_TEXT,{packageName:a}));
this._clearLiveText()},selectLocation:function(a){null!=this.selectedLocation&&(this.selectedLocation.set("isSelected",!1),this.selectedLocation.get("notInFilteredList")&&this.selectedLocation.get("marker").setMap(null));a.get("id");a.set("isSelected",!0);this.selectedLocation=a;a.get("vp1Package")?(this.markerLocationSelectedOnMap=a,this.removeVP1MapMarkerSelection(),this.storeVP1MapMarkerSelection(a.get("id")),$(".clearMapSelection").show(),this.loadFilterSearchResult()):this.loadSelectedVPPage(a)},
loadSelectedVPPage:function(a){sessionStorage.setItem(VP_SELECTED_PACKAGE_ID,a.get("hotelId"));a="vplpr=HIGHLIGHT_VP_SELECTED_ON_MAP&selectedPackageHotelId="+a.get("hotelId");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act",a,null,null,function(){$("#selectedPackage").html(this.responseText);$namespace.TabOrder.updatePageTabOrder();$("#filterSearch").focus();$namespace.Application.initTurnToTeasers()},null)},setupShowMoreIncludedExtras:function(){this.$el.find(".package-module").each(function(a,
b){a=$(b).find("ul.includedExtras");b=a.find("li");if(3<b.length){b=$(b[3]);b.attr("aria-hidden","true");var d=b.children("a");1==d.length?(d.removeAttr("data-taborder"),d.attr("tabindex","-1")):b.attr("tabindex","-1");a.get(0).fourthExtra=b}})},initHotelRatingTooltips:function(){this.hotelRatingLinks=$(this.el).find('.search-item.package-module a[data-tooltip="hotel-description-travel-ratings-tooltip"]').add("a#hotelRatingFilterQM[data-tooltip]");if(this.hotelRatingLinks.length){var a=$(this.hotelRatingLinks[0]);
this.hotelRatingsTooltip||(this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}));a.off("click");for(a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}},initHotelAdvisoryLinks:function(){this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);b.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageSearchResults"})})},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&
this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():this.hotelRatingsTooltip.show(a)},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_onPriceRangeChange:function(a){this.loadFilterSearchResult()},_onHotelNameSelect:function(a,b){this.selectedPage=1;this.loadFilterSearchResult()},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");
var d=b.attr("data-includeRemarks"),e=b.attr("data-test");b=b.attr("data-vendorid");var f="";f=d?"cthr=SHOW_FILTERED_ITINERARY_REMARKS":"cthr=SHOW_ITINERARY_REMARKS";e&&(f+="&includedType="+e);f+="&itineraryCode="+a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",f,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkThemeParkDescription"==
e&&$namespace.Analytics.trackEvent("Search_Results_Theme_Park_Tickets","Click","FLDISNEYWORLD"==b?"WDW":"UO")},_onShowMoreClick:function(a){a.preventDefault();this.selectedPage+=1;this.loadSearchResultsPage(this.selectedPage);$namespace.Analytics.trackEvent("Search_Results_Show_More","Click",this.searchCount);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE,null,[this.selectedPage])},loadSearchResultsPage:function(a){var b=
this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act","vplpr=LOAD_PAGED_PACKAGE_RESULTS&selectedPage="+a,null,null,function(a){a=b.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:a.PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE}):(1==b.selectedPage?$.hook("packages-target").html(this.responseText):$.hook("packages-target").append(this.responseText),b.updateShowMoreButton(),b.initHotelRatingTooltips(),b.initHotelAdvisoryLinks(),
b.initShopCardTooltips(),b.setFocusOnFirstNewlyLoadedPackage(),b.setupShowMoreIncludedExtras(),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initTurnToTeasers())},null)},setFocusOnFirstNewlyLoadedPackage:function(){var a=(this.selectedPage-1)*$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE+1;$.hook("packages-target").find('div[data-id="package_'+a+'"] h2').attr("tabindex","-1");$.hook("packages-target").find('div[data-id="package_'+a+'"] h2').focus()},updateSearchResults:function(a){$namespace.application.setLoadingScreen(!1);
a=$(a).find(".search-item");a.addClass("loading");1===this.selectedPage&&this.ui.resultsTarget.empty();this.ui.resultsTarget.append(a);a.each(function(a){var b=$(this);b.delay(100*(a+1)).queue(function(){b.removeClass("loading").dequeue()})});this.reinitWidgets()},_onShowMoreTrigger:function(a){a.preventDefault();var b=$(a.currentTarget).parents(".package-module");if(b){a=b.find("ul.includedExtras");var d=a.get(0).fourthExtra;a.addClass("showmore",slideSpeed,function(){b.find("a.showmore-trigger").hide();
if(d){d.removeAttr("aria-hidden");var a=d.find("a");a.attr("data-taborder","document");a.length?a.focus():d.focus()}$namespace.TabOrder.updatePageTabOrder()})}},reinitWidgets:function(){$("[data-tooltip]",this.ui.resultsTarget).each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));$(window).resize()},onError:function(){$namespace.application.setLoadingScreen(!1)},_onEditSearchClick:function(a){var b=$("section#searchWidget .search-hotel-packages").hasClass("active"),
d=$("section#searchWidget .search-hotels").hasClass("active");a.preventDefault();$namespace.PackageSearchResultsModule.packageSearched=!0;$('section[data-hook="info-bar"]').toggleClass("hidden");$("section#searchWidget").toggleClass("hidden");$(window).scrollTop($("section#searchWidget").offset().top);this.vp2Enabled?this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?d||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),
$("section#searchWidget #hotelDestination").focus()):this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-hp").click(),$("#hotel_package_destination").focus()):this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR?(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():
$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-hfcp").focus()):(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-vp").focus()):(this.isMobile&&$namespace.SearchWidgetsModule.setTab("vacation-packages",!0,!0),$("section#searchWidget #destination").focus());$namespace.Analytics.trackEvent("Search_Results_Edit","Click","Edit");this.selectedTab!=
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL&&$namespace.SearchWidgetsModule.searchWidgetAnalytics("vacation-packages")},_onAdjustSearchOnZeroSRPClick:function(a){a.preventDefault();a=$("section#searchWidget .search-hotel-packages").hasClass("active");var b=$("section#searchWidget .search-hotels").hasClass("active");$namespace.PackageSearchResultsModule.packageSearched=!0;$("section#searchWidget").is(":visible")||($('section[data-hook="info-bar"]').toggleClass("hidden"),$("section#searchWidget").toggleClass("hidden"));
$(window).scrollTop($("section#searchWidget").offset().top);this.vp2Enabled?this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?b||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),$("section#searchWidget #hotelDestination").focus()):this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?(this.isMobile?a||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),
$("section#searchWidget #package-sub-hp").focus()):(this.isMobile?a||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-vp").focus()):(this.isMobile&&$namespace.SearchWidgetsModule.setTab("vacation-packages",!0,!0),$("section#searchWidget #destination").focus())},createAriaLiveAssertContainer:function(){this.liveContainer=$(".loading_blocker_status_div");0===this.liveContainer.length?(this.liveContainer=
$("<div />",{"class":"loading_blocker_status_div","aria-live":"assertive"}),$(document.body).append(this.liveContainer)):this.liveContainer.text("")},_onPackageSortTypeChange:function(a){this.selectedPage=1;this.loadFilterSearchResult();a=this.$el.find("#packagesSelectSortType option:selected").text();$("#packageSearchMap").is(":visible")||(this.mapCreated=!1);this.createAriaLiveAssertContainer();this.liveContainer.text("Sorted by "+a)},_onMultiCityBtnClick:function(){var a=(new Date).toString().match(/:\d{2}:\d{2}/)[0].replace(/[^0-9]/g,
"");$namespace.Navigation.loadPage(_webLoc+"/h="+($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES+"_1_true_"+a));$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Search_Results_Region_Toggle",label:"Multi"})},_onThemeParkDetailsClick:function(a){var b=$(a.target).data("vendorid");var d="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+b;var e=this.module.TranslationTexts,f=function(b){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:e.SEARCH_RESULT_THEME_PARK_POPUP_ERROR_TITLE});else{b.themeParkDetailModal=new $namespace.Widgets.Modal(this.responseText,function(){d&&d.off("click")});var d=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');d.attr("data-taborder","document");var f=d.length;f&&$(d[f-1]).attr("data-tab-last",!0);d.on("click",function(a){a=$(a.currentTarget);b.loadParkAndTheaterVenuePopup(JSON.parse(a.attr("data-link-args").trim()),a.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html($(a.target).data("title"));
b.themeParkDetailModal.show()}}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,f,null);$namespace.Analytics.trackEvent("Search_Results_Theme_Park_Tickets_Resort","Click","FLDISNEYWORLD"==b?"WDW":"UO")},loadParkAndTheaterVenuePopup:function(a,b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;d+="&region="+a.region;d+="&area="+a.area;var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var e=d.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.SEARCH_RESULT_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock");d.themeParkDetailModal.resetFirstAndLastTabs()}),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();
b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),e.show(),e.el.attr("data-set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,e,null)},_onAdjustSearchClick:function(a){a.preventDefault();var b=$("section#searchWidget .search-hotel-packages").hasClass("active"),d=$("section#searchWidget .search-hotels").hasClass("active");$namespace.PackageSearchResultsModule.packageSearched=!0;a=$(a.currentTarget).attr("data-package-id");var e=$("#departureDateWidget").val(),f=$("#returnDateWidget").val();
$namespace.Analytics.trackEvent(e+" - "+f,"Search_Results_Availability",a);$("section#searchWidget").is(":visible")||($('section[data-hook="info-bar"]').toggleClass("hidden"),$("section#searchWidget").toggleClass("hidden"));this.vp2Enabled?(this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?d||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),$("section#searchWidget #checkOutDateWidget").addClass("error"),
$("section#searchWidget #checkInDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top),this.displayWarningMessage("vp2SearchHotelErrorMessageId")):(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #returnDateWidget").addClass("error"),$("section#searchWidget #departureDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top),
this.displayWarningMessage("vp2SearchPackageErrorMessageId")),$.hook("adjustSearch").hide()):(this.displayWarningMessage("vpSearchPackageErrorMessageId"),$("section#searchWidget #returnDateWidget").addClass("error"),$("section#searchWidget #departureDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top))},_onContinueButtonClick:function(a){a.preventDefault();var b=this,d=$(a.currentTarget),e="vplpr=GET_PACKAGE_SPECIFIC_SEARCH_RESULT&packageId="+d.data("package-id"),
f=d.attr("data-costco-recommended"),g=d.data("package-id");d=d.data("hotel-id");e+="&selectedHotelId="+d;"true"==f&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Search_Results",label:g});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act",e,null,null,function(){var d=$namespace.PackageSearchResultsModule.TranslationTexts;this.selectedTab=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.SEARCH_RESULT_ERROR_TITLE}):this.responseText?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Acknowledge(this.responseText,function(){$namespace.DomUtil.setElementLoadingMask(!0);b.navigateToNextPage(a)})).show(),$namespace.Utils.Breakpoint.isDesktop()&&$("#hotelAcknowlegementContentDiv, #hotelTafAcknowlegementContentDiv").find("label").each(function(a,b){b.removeAttribute("for")})):
b.navigateToNextPage(a)},null)},navigateToNextPage:function(a){var b=$(a.currentTarget);a="true"===b.attr("data-flight-included");var d="true"===b.attr("data-flight-searched"),e="true"===b.attr("data-car-included");b.data("package-id");b="h=";var f=$namespace.PackageSearchResultsModule.TranslationTexts;$namespace.GlobalConstants.RESPONSIVE_VP_PACKAGE_OVERVIEW_PAGE_ENABLED?b+=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_PACKAGE_OVERVIEW:a?b=e&&this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR?
b+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL:e?b+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE:b+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL:(d&&$namespace.MessageUtil.setSessionValue("FLIGHT_HOTEL_MESSAGE",f.NO_FLIGHT_FOUND),b+=$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL);$namespace.DomUtil.createCookie("ga-po-nav","SearchResults",0,"/");$namespace.Navigation.loadPage(b)},_onAdjustSearchToAddFlightClick:function(a){$namespace.PackageSearchResultsModule.packageSearched=
!0;var b=$(a.currentTarget),d="svp=LOAD_PACKAGE_SEARCH&showFlightOnly=true&packageId="+b.attr("data-package-id");d+="&fromWidget=true&fromMenu=false";var e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=a.module.TranslationTexts;if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText);e.setItemToFocus(b);setTimeout(function(){a.modalView=
new $namespace.View.OfferSearchPopupView({controller:a});setTimeout(function(){e.show()},delay)})}}}(this);-1!=a.currentTarget.outerHTML.lastIndexOf('role="button"')?$namespace.Analytics.trackEvent("offer_page","bottom_button",a.currentTarget.dataset.packageId,null):$namespace.Analytics.trackEvent("offer_page","top_button",a.currentTarget.dataset.packageId,null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",d,null,null,
e,null)},getHotelNameIdList:function(a){var b=[];if(a){var d=a.filteredHotelIdNameMap;a=a.packagesByHotelId;for(var e in a)"totalRecords"!=e&&0<a[e]&&b.push({title:d[e],value:e})}return b},initialized:!1,afterSearchUpdateHandler:function(a,b){if(a){this.hotelNameFilter.nameValueList=this.getHotelNameIdList(a);this.searchCount=a.packagesWithLeadInPriceCount;var d=this.module.TranslationTexts;String.fromCharCode(127);var e=this.$el.find(".matchingPackageHeading");e&&(1==this.searchCount?(e.text(d.MATCHING_PACKAGE_TEXT_SINGULAR),
b||utils.updateLiveContainer(d.MATCHING_PACKAGE_TEXT_SINGULAR)):(d=$namespace.TranslationUtil.replaceParameters(d.MATCHING_PACKAGE_TEXT_PLURAL,{resultNumber:this.searchCount}),e.text(d),b||utils.updateLiveContainer(d)));this.priceRangeMinFilter.setVal(a.packagePriceRange.lowValue);this.priceRangeMaxFilter.setVal(a.packagePriceRange.highValue);this.starRatingFilter.updateFilter(a);this.hotelsTypeFilter.updateFilter(a);this.hotelsByAreaFilter.updateFilter(a);this.hotelsByBrandChainFilter.updateFilter(a);
this.themeParkFilter.updateFilter(a);this.initHotelRatingTooltips();this.initHotelAdvisoryLinks();this.initShopCardTooltips();this.updateShowMoreButton()}this.initialized=!0},updateShowMoreButton:function(){var a=$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE,b=this.selectedPage*a;if(this.searchCount>b){this.ui.showMoreLink.show();var d=this.module.TranslationTexts;this.searchCount>=b+a?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(d.SHOW_MORE_RESULTS_BUTTON_TEXT,
{amount:a})):this.ui.showMoreLink.find("span").text(d.SHOW_MORE_BUTTON_TEXT)}else this.ui.showMoreLink.hide()},getCheckboxValues:function(a){var b=[];a.each(function(a,e){a=$(e);e=a.val();"any"!=e&&a.is(":checked")&&b.push(e)});return b},getEncodeFilterBrandChainValues:function(a){var b=[];a.forEach(function(a){b.push(cwctravel.core.StringUtil.encodeHTML(a))});return b},loadFilterSearchResult:function(a){var b=String.fromCharCode(127);this.selectedPage=1;var d=this.priceRangeMinFilter.getIntVal(),
e=this.priceRangeMaxFilter.getIntVal(),f=this.themeParkFilter.getCheckboxValues();if(this.markerLocationSelectedOnMap){var g=[this.markerLocationSelectedOnMap.attributes.hotelId];this.hotelNameFilter.val(this.markerLocationSelectedOnMap.attributes.hotelId,this.markerLocationSelectedOnMap.attributes.hotelName)}else g=[this.hotelNameFilter.val()];var h=this.hotelsByAreaFilter.getCheckboxValues(),k=this.getEncodeFilterBrandChainValues(this.hotelsByBrandChainFilter.getCheckboxValues()),l=this.starRatingFilter.getCheckboxValues(),
p=this.hotelsTypeFilter.getCheckboxValues(),q=this.$el.find("#packagesSelectSortType").val();b="vplpr=FILTER_VP_PIMP_PACKAGE_LIST&selectedPage="+this.selectedPage+"&packageType=single&priceRangeLowValue="+d+"&priceRangeHighValue="+e+"&filterThemeParkIds="+(f.length?f.join(b):"")+"&filterHotelIds="+(g.length?g.join(b):"")+"&filterAreaNames="+(h.length?h.join(b):"")+"&filterStarRatings="+(l.length?l.join(b):"")+"&filterPropertyTypes="+(p.length?p.join(b):"")+"&filterRegionNames=&filterRegionCityNames=&filterBrandChainNames="+
(k.length?k.join(b):"")+"&sortType="+(q?q:"0");var r=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act",b,null,null,function(){var b=r.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.SEARCH_RESULT_ERROR_TITLE}):(r.$el.find('div[data-hook="packages-target"]').empty().append(this.responseText),r.locationsData=$namespace.locationsData||{},r.createMap(),r.afterSearchUpdateHandler($namespace.filteredPackageInfoAsJson,
a),a&&a(),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initTurnToTeasers(),r.setupShowMoreIncludedExtras(),$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE,null,[]));if($("#showmoreId").hasClass("showmore-content")){var d=$('#showmoreId input[type="checkbox"]').length-4;$('#showmoreId input[type="checkbox"]').each(function(a,b){a>=d&&$(b).parent().children().prop({disabled:!0})})}},null)},close:function(){this.themeParkFilter.close();
this.hotelsByAreaFilter.close();this.starRatingFilter.close();this.hotelsTypeFilter.close();this.hotelsByBrandChainFilter.close()},displayWarningMessage:function(a){a=$("#search_widget").find('DIV[id="'+a+'"]');a.addClass("showPackageWarn");a.find('DIV[id="showPackageMsg"]').attr("id","warningMsgId")},_onResetFiltersClick:function(a){this.markerLocationSelectedOnMap=null;this.removeVP1MapMarkerSelection();$(".clearMapSelection").hide();this.priceRangeMinFilter.reset();this.priceRangeMaxFilter.reset();
this.themeParkFilter.reset();this.hotelsByAreaFilter.reset();this.hotelsByBrandChainFilter.reset();this.starRatingFilter.reset();this.hotelsTypeFilter.reset();this.hotelNameFilter.reset();this.loadFilterSearchResult();this.selectedLocation=null;$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Reset")},_onCostcoTravelRatingTooltipClick:function(a){$namespace.Analytics.trackEvent("Search_Results_Rating","Click","Tooltip")},_onShowFiltersClick:function(a){$namespace.TabOrder.updatePageTabOrder();
$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Show");$("#area-name-filters").find("div.checkbox-widget").each(function(a,d){a=$(d).find("label")[0];25<$(a).height()&&$(d).addClass("mb20")})},_onHideFiltersClick:function(a){$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Hide")},_onCostcoRecommendsClick:function(a){$namespace.Analytics.trackEvent("Search_Results_Recommends","Click","Open")},_onGalleryThumbClick:function(a){var b=
$(a.currentTarget);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"});$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid)},_onLabelViewMapClick:function(a){this.mapCreated||(this.createMap(),this.mapCreated=!0);$("#label-view-map").hide();$("#label-view-list").css("display","inline-flex");$("#packageSearchMap").show();"true"==this.addMarkerAgain&&this.selectedLocation.get("marker").setMap(this.map);this._createMapDivCookie();this.mapOpen="true";$namespace.TabOrder.updatePageTabOrder();
this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_MAP_VIEW);$namespace.Analytics.trackEvent("Search_Results_Map","Click","Show");this._clearLiveText();$("#label-view-list").focus()},getVP1MapMarkerSelection:function(){return window&&window.sessionStorage?window.sessionStorage.getItem(this.VP1_MAP_SELECTED_MARKER_ID):$namespace.DomUtil.readCookie(this.VP1_MAP_SELECTED_MARKER_ID)},storeVP1MapMarkerSelection:function(a){window&&window.sessionStorage?window.sessionStorage.setItem(this.VP1_MAP_SELECTED_MARKER_ID,
a):$namespace.DomUtil.createCookie(this.VP1_MAP_SELECTED_MARKER_ID,a)},removeVP1MapMarkerSelection:function(){window&&window.sessionStorage&&this.VP1_MAP_SELECTED_MARKER_ID in window.sessionStorage?window.sessionStorage.removeItem(this.VP1_MAP_SELECTED_MARKER_ID):$namespace.DomUtil.clearCookie(this.VP1_MAP_SELECTED_MARKER_ID)},_onLabelViewListClick:function(a){$("#label-view-list").hide();$("#label-view-map").css("display","inline-flex");$("#packageSearchMap").hide();this._removeMapDivCookie();this.mapOpen=
"false";$namespace.TabOrder.updatePageTabOrder();this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_LIST_VIEW);$namespace.Analytics.trackEvent("Search_Results_Map","Click","Hide");this._clearLiveText();$("#label-view-map").focus()},_onRemoveSelectedPackageClick:function(a){$("#selectedPackage").html("");this.selectedLocation.set("isSelected",!1);this.selectedLocation=null;sessionStorage.removeItem(VP_SELECTED_PACKAGE_ID);"false"==this.mapOpen&&(this.selectedLocation.get("marker").setMap(null),
this.addMarkerAgain="true")},_clearLiveText:function(){setTimeout($.proxy(function(){this.liveContainer.text("")},this),removeLiveTextDelay)},_createMapDivCookie:function(){window&&window.sessionStorage?window.sessionStorage.setItem(MAP_DIV_ENABLED,"true"):DomUtil.createCookie(MAP_DIV_ENABLED,"true")},_removeMapDivCookie:function(){window&&window.sessionStorage&&window.sessionStorage.setItem(MAP_DIV_ENABLED,"false");$namespace.DomUtil.clearCookie(MAP_DIV_ENABLED)},_getCookieValue:function(a){var b=
{};b[0]=window&&window.sessionStorage?window.sessionStorage.getItem(a):DomUtil.readCookie(a);return b},_checkPageReloadedOrBack:function(){var a=!1;window.performance?a=1==performance.navigation.type||2==performance.navigation.type?!0:!1:console.info("window.performance doesn't works fine on this browser");return a},_reCenterMap:function(a){var b;a&&(b=new google.maps.LatLng(a.get("latitude"),a.get("longitude")));this.map.setCenter(b)},_onshowMoreHotelByAreaFilterClick:function(){$("#showMoreHotelAreaId").toggle();
$("#showMoreFilter").toggle();$("#showmoreId").removeClass("showmore-content");var a=$('#showmoreId input[type="checkbox"]').length-4;$('#showmoreId input[type="checkbox"]').each(function(b,d){var e=$(d).parent().children().find("span.resultsCount").text().startsWith("(0")?!1:!0;b>=a&&e&&$(d).parent().children().prop({disabled:!1})});$('#showmoreId input[name="hotelArea'+a+'"]:visible:enabled').focus();$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder",
"document");$namespace.TabOrder.updatePageTabOrder()})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.MultiCitySearchResultsView=Backbone.View.extend({el:"#multiCitySearchResults",ui:{showMoreLink:null},searchCount:0,selectedPage:1,events:{"click a#editSearchLink":"_onEditSearchClick","click button#optBtnSingleCity":"_onSingleCityButtonClick",'click [data-hook="packageDetailsSelection"]':"_onPackageDetailsClick",'click [data-hook="show-more-link"]':"_onShowMoreResultsClick",'click [data-hook="continueFromSearch"]':"_onCheckPriceButtonClick",'click [data-hook="adjust-your-search"]':"_onAdjustSearchOnZeroSRClick"},
module:null,initialize:function(a){var b=$.extend({},a);this.vp2Enabled=a.vp2Enabled;this.isMobile=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;this.module=b.module;this.$el.find('.accordion[data-hook="accordion"]').each(function(a,b){b.accordion&&b.accordion.close(!0)});this.ui.showMoreLink=$.hook("show-more-link",this.$el);this.searchCount=this.ui.showMoreLink.attr("data-search-count");this.selectedTab=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);
this.selectedPage=parseInt($namespace.PageHistory.getSelectedPageFromPath());a=Math.ceil(this.searchCount/$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE);this.selectedPage>a&&(this.selectedPage=a);this.updateShowMoreButton();this.replaceHistoryWithData(this.selectedPage);"true"===this.$("#multiCityDpToVpRedirectId").val()&&this._dpToVpRedirectGaTrack()},_dpToVpRedirectGaTrack:function(){switch(this.selectedTab){case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL:var a=this.$("#hotelDestination").val();
$namespace.Analytics.trackEvent("Message/VP/Package_Results","Package_inclusions_may_vary_from_your_original_HOBE_search",a);break;case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT:a=this.$("#hotel_package_destination").val();$namespace.Analytics.trackEvent("Message/VP/Package_Results","Package_inclusions_may_vary_from_your_original_HF_search",a);break;case $namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR:a=this.$("#hotel_package_destination").val(),
$namespace.Analytics.trackEvent("Message/VP/Package_Results","Package_inclusions_may_vary_from_your_original_HFC_search",a)}},_onEditSearchClick:function(a){var b=$("section#searchWidget .search-hotel-packages").hasClass("active"),d=$("section#searchWidget .search-hotels").hasClass("active");a.preventDefault();$namespace.PackageSearchResultsModule.packageSearched=!0;$('section[data-hook="info-bar"]').toggleClass("hidden");$("section#searchWidget").toggleClass("hidden");$(window).scrollTop($("section#searchWidget").offset().top);
this.vp2Enabled?this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?d||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),$("section#searchWidget #hotelDestination").focus()):this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-hp").focus()):
(this.isMobile?b||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-vp").focus()):(this.isMobile&&$namespace.SearchWidgetsModule.setTab("vacation-packages",!0,!0),$("section#searchWidget #destination").focus());$namespace.Analytics.trackEvent("Search_Results_Edit","Click","Edit");$namespace.SearchWidgetsModule.searchWidgetAnalytics("vacation-packages")},_onSingleCityButtonClick:function(a){$(a.currentTarget).val();
var b=$(a.currentTarget);a=b.attr("destination-name");b=b.attr("data-region");$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE+"_true");$namespace.Analytics.trackEvent("Search_Results_Single_City","Click",a+"/"+b)},_onPackageDetailsClick:function(a){var b=$(a.currentTarget);$namespace.DomUtil.setElementLoadingMask(!0);a=b.attr("data-url");var d=b.attr("data-costco-recommended");b=b.data("package-id");"true"==d?$namespace.Analytics.trackEvent("Search_Results_Package_Details",
"Costco_Recommends",b):$namespace.Analytics.trackEvent("Search_Results_Package_Details","Click",b);$namespace.Navigation.loadPage(a)},_onShowMoreResultsClick:function(a){a.preventDefault();$namespace.Analytics.trackEvent("Search_Results_Show_More","Click",this.searchCount);this.loadSearchResultsPage(++this.selectedPage);this.replaceHistoryWithData(this.selectedPage)},_onCheckPriceButtonClick:function(a){a.preventDefault();var b=$(a.currentTarget);a=b.attr("data-costco-recommended");var d=b.data("package-id");
var e="svp=LOAD_PACKAGE_SEARCH&packageId="+d+"&fromWidget=false&fromMenu=false";var f=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=a.module.TranslationTexts;if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText);e.setItemToFocus(b);setTimeout(function(){a.modalView=new $namespace.View.OfferSearchPopupView({controller:a});
setTimeout(function(){e.show()},delay)})}}}(this);"true"==a?$namespace.Analytics.trackEvent("Search_Results_Check_Price","Costco_Recommends",d):$namespace.Analytics.trackEvent("Search_Results_Check_Price","Click",d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",e,null,null,f,null)},loadSearchResultsPage:function(a){var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act","vplpr=LOAD_MULTICITY_PAGED_PACKAGE_RESULTS&selectedPage="+
a,null,null,function(a){a=b.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:a.PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE}):(1==b.selectedPage?$.hook("packages-target").html(this.responseText):$.hook("packages-target").append(this.responseText),b.updateShowMoreButton(),$namespace.TabOrder.updatePageTabOrder(),b.setFocusOnFirstNewlyLoadedPackage())},null)},replaceHistoryWithData:function(a){var b=(new Date).toString().match(/:\d{2}:\d{2}/)[0].replace(/[^0-9]/g,
"");$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES,null,[a,!0,b])},updateShowMoreButton:function(){var a=$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE,b=this.selectedPage*a;this.searchCount=this.ui.showMoreLink.attr("data-search-count");if(this.searchCount>b){this.ui.showMoreLink.parent().show();var d=this.module.TranslationTexts;this.searchCount>=b+a?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(d.SHOW_MORE_RESULTS_BUTTON_TEXT,
{amount:a})):this.ui.showMoreLink.find("span").text(d.SHOW_MORE_BUTTON_TEXT)}else this.ui.showMoreLink.parent().hide()},setFocusOnFirstNewlyLoadedPackage:function(){var a=(this.selectedPage-1)*$namespace.NUMBER_OF_PACKAGE_RESULTS_PER_PAGE+1;$.hook("packages-target").find('div[data-id="package_'+a+'"] h2').attr("tabindex","-1");$.hook("packages-target").find('div[data-id="package_'+a+'"] h2').focus()},_onAdjustSearchOnZeroSRClick:function(a){a.preventDefault();a=$("section#searchWidget .search-hotel-packages").hasClass("active");
var b=$("section#searchWidget .search-hotels").hasClass("active");$("section#searchWidget").is(":visible")||($('section[data-hook="info-bar"]').toggleClass("hidden"),$("section#searchWidget").toggleClass("hidden"));$(window).scrollTop($("section#searchWidget").offset().top);this.vp2Enabled?this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?b||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),$("section#searchWidget #hotelDestination").focus()):
this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?(this.isMobile?a||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-hp").focus()):(this.isMobile?a||$("section#searchWidget #vacation-packages-tab-id").click():$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-vp").focus()):(this.isMobile&&$namespace.SearchWidgetsModule.setTab("vacation-packages",
!0,!0),$("section#searchWidget #destination").focus())}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.MultiCitySearchFilterView=Backbone.View.extend({el:"#multiCitySearchFilter",events:{'change input[type="checkbox"]':"_onMultiCityFiltersChange",'click [data-hook="apply-hotels-filters"]':"_onClickApplyFilters",'click [data-hook="reset-hotels-filters"]':"_onResetFiltersClick"},module:null,initialize:function(a){this.module=$.extend({},a).module;this.resultsView=this.module.multiCitySearchResultsView;this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,d){d.accordion||
(d.accordion=new $namespace.Widgets.Accordion($(d)));d.accordion.close(!0)});this.checkboxAny=this.$el.find('input[type="checkbox"][value="any"]');this.checkboxOthers=this.$el.find('input[type="checkbox"]:not([value="any"])');this.checkboxAll=this.$el.find('input[type="checkbox"]');this.afterSearchUpdateHandler($namespace.filteredPackageInfoAsJson);this.preselectCheckboxes($namespace.filteredPackageInfoAsJson);this.$el.find(".filter-accordion").on("ct.accordion.clicked",this._onShowFiltersClick);
this.$el.find(".filter-accordion").on("ct.accordion.clicked_close",this._onHideFiltersClick)},_onClickApplyFilters:function(a){$('.filter-accordion[data-hook="accordion"]').each(function(){var a=$(this).find(".accordion-item").first();a.length&&a.hasClass("active")&&(a.closest(".accordion")[0].accordion.close(),$namespace.TabOrder.updatePageTabOrder(),a.find("#filterSearch").focus())});$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Apply_Filter")},getCheckedCityRegionNames:function(){var a=
[],b=[];this.$el.find('[data-value-type="region"]:enabled:checked').each(function(d,e){a.push($(e).val());b.push($(e).val())});this.$el.find('[data-value-type="city"]:enabled:checked').each(function(d,e){d=$(e).attr("data-region-name");-1==a.indexOf(d)&&a.push($(e).attr("data-region-name"));b.push($(e).val())});return{checkedRegions:a,checkedCities:b}},loadFilterSearchResult:function(a){var b=String.fromCharCode(127);this.selectedPage=1;var d=this.getCheckedCityRegionNames(),e=d.checkedRegions;d=
d.checkedCities;b="vplpr=FILTER_VP_PIMP_PACKAGE_LIST&selectedPage="+this.selectedPage+"&packageType=multi&priceRangeLowValue=0&priceRangeHighValue=0&filterThemeParkIds=&filterHotelIds=&filterAreaNames=&filterStarRatings=&filterPropertyTypes=&multiCityPackagesRequested=true&filterRegionNames="+(e.length?e.join(b):"")+"&filterRegionCityNames="+(d.length?d.join(b):"");var f=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageResults.act",b,null,null,function(){var b=f.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.SEARCH_RESULT_ERROR_TITLE}):($('#custompath_search_results div[data-hook="packages-target"]'),$('#custompath_search_results div[data-hook="packages-target"]').html(this.responseText),f.afterSearchUpdateHandler($namespace.filteredPackageInfoAsJson),a&&a(),$namespace.TabOrder.updatePageTabOrder(),f.resultsView.selectedPage=f.selectedPage,f.resultsView.replaceHistoryWithData(f.selectedPage),f.resultsView.updateShowMoreButton())},
null)},setAnyCheckboxState:function(){0<this.checkboxOthers.filter(":checked").length?this.checkboxAny.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"):this.checkboxAny.prop({checked:!0,disabled:!0}).attr("aria-disabled","true")},_onMultiCityFiltersChange:function(a){var b=$(a.currentTarget).val(),d=$(a.currentTarget),e=!1;"any"===b?(this.checkboxOthers.prop("checked",!1),e=!0,$namespace.Analytics.trackEvent("Search_Results_Filter_Add_City","Click","Any")):(this.setAnyCheckboxState(),
a.currentTarget.checked&&$namespace.Analytics.trackEvent("Search_Results_Filter_Add_City","Click",this.getDestinationAndRegion(d)));this.loadFilterSearchResult($.proxy(this.readUpdatedContents,this,e))},getDestinationAndRegion:function(a){var b=a.attr("destination-name");a=a.attr("value");return b+"/"+a},_onResetFiltersClick:function(a){this.checkboxAny.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");this.checkboxOthers.prop("checked",!1);this.loadFilterSearchResult($.proxy(this.readUpdatedContents,
this));$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Reset")},afterSearchUpdateHandler:function(a){String.fromCharCode(127);var b=this.module.TranslationTexts,d=this.checkboxOthers.filter('[data-value-type="region"]'),e=this.checkboxOthers.filter('[data-value-type="city"]'),f=this,g=function(a,d,e){e=$(e);d=d[e.val()];if(0<=d){var g=e.parent().find("label span.resultsCount");g.length&&(1==d?g.text(b.RESULT_TEXT_SINGULAR):g.text($namespace.TranslationUtil.replaceParameters(b.RESULT_TEXT_PLURAL,
{resultNumber:d})));0<d?"true"!=e.attr("data-init-disabled")&&e.prop("disabled",!1).removeAttr("aria-disabled"):e.prop("disabled",!0).attr("aria-disabled","true")}e=$("#custompath_search_results .matchingPackageHeading");1==a?e.text(b.MATCHING_PACKAGE_TEXT_SINGULAR):e.text($namespace.TranslationUtil.replaceParameters(b.MATCHING_PACKAGE_TEXT_PLURAL,{resultNumber:a}));f.resultsView.ui.showMoreLink.attr("data-search-count",a)},h=a.packagesWithoutLeadInPriceCount;if(d.length){var k=a.packagesByRegionName;
d.each(function(a,b){g(h,k,b)})}if(e.length){var l=a.packagesByCityName;e.each(function(a,b){g(h,l,b)})}},preselectCheckboxes:function(a){var b=String.fromCharCode(127),d=a.packageRegionNames.length?a.packageRegionNames.split(b):[];a=a.packageCityNames.length?a.packageCityNames.split(b):[];d=d.concat(a);if(d.length){var e=this;d.forEach(function(a){a=e.checkboxAll.filter('input[value="'+a+'"]');1==a.length&&"true"!=a.attr("data-init-disabled")&&a.prop({checked:!0,disabled:!1})})}this.setAnyCheckboxState()},
_onShowFiltersClick:function(a){$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Show")},_onHideFiltersClick:function(a){$namespace.Analytics.trackEvent("Search_Results_Filter","Click","Hide")},readUpdatedContents:function(a){var b=this.module.TranslationTexts,d=$("#custompath_search_results .matchingPackageHeading").text();if(a)if(this.checkboxAny.prop("disabled",!0).attr("aria-disabled","true"),$namespace.Browser.iPhone||$namespace.Browser.iPad)utils.updateLiveContainer(d);else{var e=
$(this.checkboxOthers.not(":disabled")[0]);if(0<e.length){a=e.parent().find("label");var f=$("<span>",{"class":"ada-screenreader"}).text(d+". "+b.MOVE_TO_NEXT_CHECKBOX_TEXT);a.prepend(f);setTimeout(function(){e.focus();setTimeout(function(){f.remove()},300)},300)}}else utils.updateLiveContainer(d)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.PackageHotelView=Backbone.View.extend({el:"#hotelResults",ui:{map:null,showMoreHotelsLink:null,chatLink:null},googleMap:null,numberOfAdditionalHotels:0,collection:null,SEARCH_WIDGET_COOKIE_NAME:"VP_SEARCH_WIDGET_VALUES",WIDGET_COOKIE_NAME:"VP2_SEARCH_WIDGET_VALUES",selectedPage:1,events:{"click a.modal-gallery-thumb":"_onGalleryThumbClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click [data-hook="show-more-hotels-link"]':"_onShowMoreHotelsClick",
'click a[data-hook="modify-room-toggle"]':"_toggleModifyRoom",'click a[data-hook="hotel-room-selection"]':"_onSelectClick",'click [data-hook="update-optional-service"]':"_onUpdateOptionalServiceCheckboxClick",'click a[data-hook="continue_button"]':"_onContinueButtonClick",'click [data-hook="select-service-meal-plan"]':"_onSelectServiceMealPlanClick",'click [data-hook="selectNewHotel"]':"_onSelectNewHotelClick","click a.mealPlan":"_onLoadHotelPopupMealPlans","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",
'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup",'click [data-tab="map-tab"]':"_onMapTabClick",'click a[id^="hotelLearnMore"]':"_onLearnMoreClick",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",'click [data-tab="list-tab"]':"_onListTabClick","change select#selectHotelSort":"_onSelectChange",'click a[data-hook="adjustSearch"]':"_onAdjustSearchClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip"},
controller:null,destination:null,city:null,packageId:null,mapListTabSwitcher:null,initialize:function(a){var b=this;this.opts=$.extend({},a);this.controller=a.controller;this.module=a.module;this.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",this.$el);this.numberOfAdditionalHotels=$.hook("show-more-hotels-link",this.$el).data("additional-hotels-count")?$.hook("show-more-hotels-link",this.$el).data("additional-hotels-count"):0;this.selectedPage=$.hook("show-more-hotels-link",this.$el).data("selected-page")?
$.hook("show-more-hotels-link",this.$el).data("selected-page"):1;this.lastPage=0<this.numberOfAdditionalHotels?Math.ceil(this.numberOfAdditionalHotels/$namespace.NUMBER_OF_HOTELS_PER_PAGE):1;this.destination=$(this.el).data("destination");this.city=$(this.el).data("city");this.hotelId=$(this.el).data("data-hotelId");this.packageId=$(this.el).data("package-id");this.createModel();this.gaValuesForEventLabel();this.dynamicPackageCarIncluded=$("#dynamicPackageCarIncluded").val();this.ui.map=$.hook("hotel_map");
var d=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(d,{getAllcb:function(){return d.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.locationsData={};this.sortType=$("#additionalHotelsContainer").attr("data-sort-type")?$("#additionalHotelsContainer").attr("data-sort-type"):0;this.ascendingOrder=!0;this.selectHotelSort=new $namespace.Widgets.SelectWidget(this.$("#select_hotel_sort"));this.$el.find("select#selectHotelSort").val(this.sortType);
this.initHotelRatingTooltips();this.initShopCardTooltips();this.updateShowMoreButton();this.initLearnMoreLink();this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,b){b.accordion.close(!0)});a=$(".hotelRoomsCard");this.roomAccodionsList=[];for(var e=0;e<a.length;e++){for(var f=$(a[e]).find(".nested-accordion"),g=$(a[e]).attr("id"),h=[],k=0;k<f.length;k++)h[k]=new $namespace.Widgets.Accordion($(f[k]));this.roomAccodionsList[g]=h}this.$el.find('[data-hook="advisory-widget"]').each(function(a,
b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageHotelResults"})});this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var l=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/searchHotels/"+l.destination+"/"+l.city+"/"+l.packageId)})}this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find(".accordion").on("ct.accordion.opening",
this.trackButtonAccordion);this.$el.find(".accordion").on("ct.accordion.clicked",this._trackAllAccordion);f=$namespace.MessageUtil.getSessionValue("FLIGHT_HOTEL_MESSAGE",!0);a=$namespace.MessageUtil.getSessionValue("No_CAR_AVAILABLE_UPDATING_FLIGHT_WITH_LANDING_TIME",!0);e=$namespace.MessageUtil.getSessionValue("CAR_AGENCY_OPERATIONAL_HOURS",!0);e=null!=e?e.replace(",",", "):"";g=$namespace.Storage.get("transportation-page","isVisited",!1);"true"==$("input[type=hidden]#showCarChangeNotification").val()&&
"false"==g?(f="cthr=SHOW_JDC_DEFAULT_CAR_CHANGE_POPUP",g=function(){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(a){a=window.event||a;a.target||(a.target=a.srcElement);a=a.target.id;"jdc-change-flight-popup"===a?($namespace.Analytics.trackEvent("Message/Dp/pkg_No_Car_Redirect","Adjust","/dp/pkg/booking/hotel/"+b.city+"/"+b.destination+"/"+b.packageId),$namespace.Storage.set("flight-filters",{setCarAgencyHours:!0}),$namespace.DomUtil.setElementLoadingMask(!0,
null,!1),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)):"jdc-continue-with-car-popup"!==a&&"jdc-close-popup"!==a||$namespace.Analytics.trackEvent("Message/Dp/pkg_No_Car_Redirect","Continue","/dp/pkg/booking/hotel/"+b.city+"/"+b.destination+"/"+b.packageId)})).show()}}(this.modal),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",f,null,null,g,null)):_.isEmpty(f)||("CAR_REMOVED_FROM_PACKAGE_HOTEL_TRANSFER_AVAILABLE"===
f||"CAR_REMOVED_FROM_PACKAGE_NO_HOTEL_TRANSFER_AVAILABLE"===f||"CAR_REMOVED_FROM_PACKAGE_NO_HOTEL_TRANSFER_AVAILABLE_CAR_REQUIRED"===f||"CAR_UPDATED_IN_PACKAGE"===f?(f="ctfr=NOTIFICATION_AFTER_CHANGE_IN_FLIGHT_CAR_CHANGES_IN_PACKAGE&notificationType="+f,g=function(){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(a){a=window.event||a;a.target||(a.target=a.srcElement);var d=a.target.innerText;a=a.target.dataset.name;"Choose a different flight"===
d?($namespace.Analytics.trackEvent("Message/Dp/pkg_No_Car_Redirect","Adjust","/dp/pkg/booking/hotel/"+b.city+"/"+b.destination+"/"+b.packageId),$namespace.Storage.set("flight-filters",{setCarAgencyHours:!0}),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)):"Continue with hotel transfer"===d||"Continue without car"===d||"Continue with modified car"===d?($namespace.Analytics.trackEvent("Message/Dp/pkg_No_Car_Redirect",
"Continue","/dp/pkg/booking/hotel/"+b.city+"/"+b.destination+"/"+b.packageId),confirm&&confirm.hide()):"clicktoclose"===a&&$namespace.Analytics.trackEvent("Message/Dp/pkg_No_Car_Redirect","Continue","/dp/pkg/booking/hotel/"+b.city+"/"+b.destination+"/"+b.packageId)})).show()}}(this.module),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("flightResults.act",f,null,null,g,null)):$(".hotelAlertMessage").show().find("> div").html(f));"true"===a?(f="ctfr=LOAD_FLIGHT_CHANGE_REMOVE_CAR_PRODUCT&carAgencyOperationalHour="+
e+("&noCarAvailableOnFlightChange="+a),a=function(){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(a){a=window.event||a;a.target||(a.target=a.srcElement);a=a.target.dataset.name;if("flightChange"===a)$namespace.Analytics.trackEvent("Message/Dp/hfc_No_Car_Redirect","Adjust","/dp/hfc/booking/hotel/"+b.gaValues.cityName+"/"+b.gaValues.stateName+"/"+b.gaValues.packageId),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL);
else if("clicktoclose"===a||"ContinueWithoutCarRental"===a)b.model&&b.model.isVpSub&&b.model.isHfcSub&&(b.model.isVpSub="false",b.model.isHfcSub="false",$namespace.DomUtil.clearAndCreateCookie(b.WIDGET_COOKIE_NAME,JSON.stringify(b.model),0),$namespace.DomUtil.clearAndCreateCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0)),$namespace.Analytics.trackEvent("Message/Dp/hfc_No_Car_Redirect","Continue","/dp/hfc/booking/hotel/"+
b.gaValues.cityName+"/"+b.gaValues.stateName+"/"+b.gaValues.packageId)})).show()}}(this.module),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("flightResults.act",f,null,null,a,null)):"false"===a&&null!=a&&b.model&&b.model.isVpSub&&b.model.isHfcSub&&(b.model.isVpSub="false",b.model.isHfcSub="true",$namespace.DomUtil.clearAndCreateCookie(b.WIDGET_COOKIE_NAME,JSON.stringify(b.model),0),$namespace.DomUtil.clearAndCreateCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR,
0));$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this));$namespace.GlobalConstants.FEATURE_FLAG_VP2_ENABLED&&(this.SEARCH_WIDGET_COOKIE_NAME="VP2_SEARCH_WIDGET_VALUES")},createModel:function(){this.model={destinationType:"",destinationCode:"",hpDestinationCode:"",regionCode:"",cityCode:"",
latitude:"",longitude:"",locationName:"",city:"",country:"",departureDate:"",returnDate:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",serviceClass:"",isVpSub:"true",isHfcSub:"false",prevDesType:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};try{var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);this.model=a=JSON.parse(a)}catch(b){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing VP2 Search Widget Cookie.")}},gaValuesForEventLabel:function(){this.gaValues=
{cityName:"",stateName:"",country:"",packageId:""};if(this.model&&this.model.locationName){var a=this.model.locationName.replace(/<comma>/gi,",").split(",");3===a.length&&(this.gaValues.cityName=a[0].split(/\s/).join(""),this.gaValues.stateName=a[1].split(/\s/).join(""),this.gaValues.country=a[2].split(/\s/).join(""),this.gaValues.packageId=this.packageId)}},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},reinitialize:function(){this.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",
this.$el);this.$el.find("select#selectHotelSort").val(this.sortType);this.ui.map=$.hook("hotel_map");var a=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(a,{getAllcb:function(){return a.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.initializeMap();this.initHotelRatingTooltips();this.initShopCardTooltips();this.updateShowMoreButton();this.initLearnMoreLink();this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,
b){b.accordion.close(!0)});var b=$(".hotelRoomsCard");this.roomAccodionsList=[];for(var d=0;d<b.length;d++){for(var e=$(b[d]).find(".nested-accordion"),f=$(b[d]).attr("id"),g=[],h=0;h<e.length;h++)g[h]=new $namespace.Widgets.Accordion($(e[h]));this.roomAccodionsList[f]=g}this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageHotelResults"})});this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,
this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this))},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("Hotel_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("Hotel_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("Hotel_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?
$namespace.Analytics.trackEvent("Hotel_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("Hotel_Results_Activities","Click","Expand")},trackButtonAccordion:function(a,b){b.hasClass("buttonRoomAccordion")&&(a=$("#packageId").val(),$namespace.Analytics.trackEvent("Hotel_Room_Category","Click",a))},_trackAllAccordion:function(a,b){$(a.currentTarget);a=$(".hotelIdValue").first().val();var d=$("#packageId").val();"Overview"==b?$namespace.Analytics.trackEvent("Hotel_Overview",
"click",a):"Property"==b?$namespace.Analytics.trackEvent("Hotel_Property","click",a):"Dining"==b?$namespace.Analytics.trackEvent("Hotel_Dining","click",a):"Rooms"==b?$namespace.Analytics.trackEvent("Hotel_Rooms","click",a):"Map"==b?$namespace.Analytics.trackEvent("Hotel_Map","click",a):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&$namespace.Analytics.trackEvent("Hotel_Hotel_Reviews",a,d)},_onMapTabClick:function(a){a.preventDefault();a.stopPropagation();a=$("#packageId").val();$("#label-view-map").hide();
$("#label-view-list").css("display","inline-flex");$namespace.Analytics.trackEvent("Hotel_Results","Show_Map",a);a="cthr=GET_HOTEL_LOCATIONS_DATA&sortType="+this.sortType;this.ascendingOrder="3"==this.sortType||"4"==this.sortType?!1:!0;a+="&ascendingOrder="+this.ascendingOrder;var b=this;$namespace.AjaxUtil.makeAjaxCall("hotelsResults.act",a,null,null,function(a){b.locationsData=a||{};utils.isArray(a)&&(a.map(function(a,b){a.isSelected=0===b?!0:!1;a.index=b+1}),b.collection=new $namespace.Collection.HotelCollection(a),
b.initializeMap());b.deselectLocation(b.collection.findWhere({isSelected:!0}));b.selectLocation(b.collection.get(0));$(window).trigger("ct.section.toggling");setTimeout(function(){$('a[data-tab="list-tab"]').focus()},1)},null)},_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onListTabClick:function(a){a.preventDefault();a.stopPropagation();a=$("#packageId").val();$namespace.Analytics.trackEvent("Hotel_Results",
"Hide_Map",a);$("#label-view-list").hide();$("#label-view-map").css("display","inline-flex");$(window).trigger("ct.section.toggling");setTimeout(function(){$('a[data-tab="map-tab"]').focus()},1)},initializeMap:function(){if(null!=this.collection&&void 0!=this.collection.get(0)){var a=this.collection.get(0).attributes.latitude;var b=this.collection.get(0).attributes.longitude;a=new google.maps.LatLng(a,b);this.googleMap=new google.maps.Map(this.ui.map[0],{fullscreenControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.fullscreenControl,
mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,zoom:13,zoomControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.zoomControl,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],center:a});
this.showMarkers();this.bindMarkers();this.selectLocation(this.collection.get(0));google.maps.event.addListener(this.googleMap,"tilesloaded",function(){setTimeout(function(){$("#hotel_map").find('iframe,a,button, div[tabindex="0"]').attr("tabindex","-1")},$namespace.WaitForElement.TIME_TO_WAIT)})}},showMarkers:function(){var a=this,b=new google.maps.LatLngBounds;this.collection.each(function(d){d=d.get("marker");b.extend(d.getPosition());d.setMap(a.googleMap)});1<this.collection.length&&this.googleMap.fitBounds(b)},
bindMarkers:function(){var a=this;this.collection.each(function(b){var d=b.get("index");b=b.get("marker");google.maps.event.addListener(b,"click",function(){a.toggleHotels(d)})})},repositionMap:function(a){google.maps.event.trigger(this.googleMap,"resize");this.googleMap.panTo(a.getPosition())},toggleHotels:function(a){this.deselectLocation(this.collection.findWhere({isSelected:!0}));this.selectLocation(this.collection.findWhere({index:a}))},deselectLocation:function(a){a.set("isSelected",!1)},selectLocation:function(a){a.set("isSelected",
!0);var b=a.get("marker");this.repositionMap(b);this.loadSelectedHotelFromMap(a)},loadSelectedHotelFromMap:function(a){a="cthr=SHOW_HOTEL_ITEM_RESULTS&uid="+a.get("uid")+"&updateAllowed=true";var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a+"&hotelDisplayTarget=map",null,"select_hotel_map",function(){b.initHotelRatingTooltips();b.initShopCardTooltips();b.initLearnMoreLink();$(window).trigger("ct.showmore.opening");$namespace.Application.initTurnToTeasers();$namespace.TabOrder.updatePageTabOrder()},
null)},_onContinueButtonClick:function(a){a.preventDefault();a=$("#packageId").val();0!=this.$el.find("div.selectedHotel div[data-defaultHotelAvailable=false]").length?this.$el.find('div.selectedHotel a[data-hook="adjustSearch"]').click():($namespace.Analytics.trackEvent("Hotel_Results","Continue",a),this.validateHotelSelection())},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var b=
this,d=$(this).data("destination"),e=$(this).data("citycode"),f=$(this).data("hotelid"),g=$(this).data("megatip"),h="";h=$(".dynamicPackageId").first().val();var k=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);h=("true"!=h?"vpc=LOAD_OFFER_HOTEL_DETAIL_INFO":"vpc=LOAD_DYNAMIC_HOTEL_DETAIL_INFO")+("&destination="+d)+("&cityCode="+e);h+="&hotelId="+f;null!=k&&(h+="&displayReviewsAccordion=",h+=k.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",h,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+g).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));
$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,b){$(b).on("click",function(a){a=$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Hotel_Rooms",label:f+"_"+d.innerText})})});$('.megatip DIV[data-hook="tab-switcher"]').each(utils.eachUninitialized(function(a,d){b.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));
b.tabSwitcher.currentTab=null}));b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,b,d){"features-tab"==a?$namespace.Analytics.trackEvent("Hotel_Property_Features","click",f):"activities-tab"==a&&$namespace.Analytics.trackEvent("Hotel_Property_Activities","click",f)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f));b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-140)},50);""==$("#hotelRoomFeatureTabData").text()&&
$('li[data-tab="room-features-tab"]').addClass("hidden");""==$("#hotelPointOfInterestTabData").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},null,"")})},_onReviewsLinkClick:function(a){a=$(a.currentTarget).data("hotel-id");var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a);if(null!=b){var d=this;$(window).on("ct.megatip.opened",function(){var a=b.getReviewsAccordionId();$(a).focus();$(a).closest('[data-hook="accordion"]').get(0).accordion.open();d._trackAllAccordion({currentTarget:$(a)},
$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);$(window).off("ct.megatip.opened")});$('a[data-megatip][data-hotelid="'+a+'"]').click();$namespace.Analytics.trackEvent("hotel_factsheet_page","Hotel_Reviews",a,null)}},initHotelRatingTooltips:function(){this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length){var a=$(this.hotelRatingLinks[0]);this.hotelRatingsTooltip||(this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}));
a.off("click");for(a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():(this.hotelRatingsTooltip.show(a),a=$("#packageId").val(),$namespace.Analytics.trackEvent("Hotel_Costco_Travel_Rating","Tooltip",a))},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,
b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_gaForShopCardToolTip:function(){var a=$("#packageId").val();$namespace.Analytics.trackEvent("Hotel_Shop_Card","ToolTip",a)},_onButtonAccordionClick:function(a){a.preventDefault();$("div.accordion-button").hasClass("active")||$namespace.Analytics.trackEvent("Hotel_Room_Rate","Click",this.packageId)},_onUpdateOptionalServiceCheckboxClick:function(a){var b=$(a.currentTarget);a="cthr=INCLUDE_OR_EXCLUDE_OPTIONAL_SERVICE&serviceUid="+
b.attr("data-serviceUid");a+="&uid="+b.attr("data-uid");a+="&serviceItemSelected="+b.is(":checked");a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;var d=b.attr("id"),e=$(".sidebar-column").find("div.active"),f=null;1===e.length&&(f=e.attr("data-id"));b.is(":checked")&&(b=$("#packageId").val(),$namespace.Analytics.trackEvent("Hotel_Optional_Service_Select","Include",b));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();f&&$(".sidebar-column").find("[data-id="+f+"]").find(".accordion-button").trigger("open-instant");var a=$("#"+d);setTimeout(function(){a.focus()},1)},null)},_onSelectServiceMealPlanClick:function(a){var b=$(a.currentTarget);a="cthr=SELECT_SERVICE_MEAL_PLAN_ITEM&serviceUid="+b.attr("data-serviceUid");a+="&uid="+b.attr("data-uid");a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;
var d=b.attr("id");b=$(".sidebar-column").find("div.active");var e=null;1===b.length&&(e=b.attr("data-id"));b=$("#packageId").val();$namespace.Analytics.trackEvent("Hotel_Meal_Plan_Select","Include",b);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();var a=$("#"+d);setTimeout(function(){a.focus()},1);
e&&$(".sidebar-column").find("[data-id="+e+"]").find(".accordion-button").trigger("open-instant")},null)},_onSelectNewHotelClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.attr("data-uid"),e=this,f=b.attr("data-filter-name");a=b.data("price-diff");var g=b.data("new-price-value");b=b.data("total-new-price");var h=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_TITLE,k=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_NEW_PACKAGE_PRICE_LABEL;if(0==a)this._selectNewHotel(d);else{var l=
0<a?this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE:this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE;a=this._populatePriceChangeModalTemplate(a,g,b,k,h,!0,l);var p=new $namespace.Widgets.Confirm(a,function(){e._selectNewHotel(d);$namespace.Analytics.trackEvent("Hotel_Results_Select","Continue",f)},function(){p.hide();$namespace.Analytics.trackEvent("Hotel_Results_Select","No_Thanks",f)});p.show();$namespace.Analytics.trackEvent("Hotels_Results_Select","Click",
f)}},_selectNewHotel:function(a){$namespace.Utils.updateLiveContainer(this.module.TranslationTexts.NEW_HOTEL_SELECTED);a="cthr=SELECT_HOTEL_ITEM&selectedHotelItemUid="+a+("&selectedPage="+this.selectedPage);a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;var b=function(a){return function(b){$(window).scrollTop($("section.info-bar").offset().top);$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$(".info-bar-price-span").text(b);var d=$("h3.card-hotel-name:first");d.addClass("no-outline").attr("data-taborder",
"document");$namespace.TabOrder.updatePageTabOrder();d.on("blur",function(a){d.attr("tabindex","-1").removeAttr("data-taborder");d.off("blur")});a.reinitialize();setTimeout(function(){d.focus()},1);b="hotel-summary-content";$namespace.Utils.Breakpoint.isMobile()&&(b="hotel-summary-content-mobile");$namespace.AjaxUtil.makeAjaxCall("hotelsResults.act","cthr=SHOW_SELECTED_HOTEL_SUMMARY",null,b,function(){$(window).trigger("resize")},null)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a,null,"centerColumn",b,null)},_onGalleryThumbClick:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isHotelGallery:"true"});a=$("#packageId").val();$namespace.Analytics.trackEvent("Hotel_Popup","Image_Carousel",a)},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),d=b.attr("data-iternary-code");a=b.attr("data-test");var e=b.attr("data-includeRemarks"),f=b.attr("id"),g=$("#packageId").val();b=b.attr("data-cancellation");
d={itineraryCode:d};d.cthr=e?"SHOW_FILTERED_ITINERARY_REMARKS":"SHOW_ITINERARY_REMARKS";"true"==b&&(d.itineraryRemarksModalTitle="Rate details and cancellation policy");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkDataItineraryModal"==a&&$namespace.Analytics.trackEvent("Hotel_Room_Rate",
"Click",g);"linkOptionalServiceDescription"==a?$namespace.Analytics.trackEvent("Hotel_Optional_Service","click",g):("true"==e||"IncludedExtra"==f)&&$namespace.Analytics.trackEvent("Hotel_Included_Extras","click",g)},_onShowMoreHotelsClick:function(a){a.preventDefault();this.selectedPage+=1;$('div[data-additional-hotel-page="'+this.selectedPage+'"]').show();this.updateShowMoreButton();$namespace.Analytics.trackEvent("Hotel_Results_Show_More","Click",this.numberOfAdditionalHotels);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),
null,[this.selectedPage])},_onSelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("uid"),e="#"+b.data("room-link"),f=this,g=$("#packageId").val();b.attr("data-filter-name");a=b.data("price-diff");var h=b.data("new-price-value");b=b.data("total-new-price");var k=this.module.TranslationTexts.HOTEL_ROOM_CHANGE_MODAL_TITLE,l=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_NEW_PACKAGE_PRICE_LABEL;if(0==a)this._changeRoomSelection(d,e);else{var p=0<a?this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE:
this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE;a=this._populatePriceChangeModalTemplate(a,h,b,l,k,!1,p);var q=new $namespace.Widgets.Confirm(a,function(){f._changeRoomSelection(d,e);$namespace.Analytics.trackEvent("Hotel_Room_Select","Continue",g)},function(){q.hide();$namespace.Analytics.trackEvent("Hotel_Room_Select","No_Thanks",g)});q.show()}$namespace.Analytics.trackEvent("Hotel_Room_Select","click",g)},_changeRoomSelection:function(a,b){a="cthr=CHANGE_SELECTION&uid="+a+("&selectedPage="+
this.selectedPage);a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;$(window).scrollTop($(b).offset().top-100);var d=$(".sidebar-column").find("div.active"),e=null;1===d.length&&(e=d.attr("data-id"));var f=this.sortType;d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=$(b).find("h3:visible");a.addClass("no-outline").attr("data-taborder","document");$namespace.Application.initializeOnMainContentReload();$("select#selectHotelSort").val(f);
e&&$(".sidebar-column").find("[data-id="+e+"]").find(".accordion-button").trigger("open-instant");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(b){a.attr("tabindex","-1").removeAttr("data-taborder");a.off("blur")});setTimeout(function(){a.focus()},1)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a,null,"mainContent",d,null)},_toggleModifyRoom:function(a){var b=$(a.currentTarget),d=b.attr("data-room-number"),
e="";a.preventDefault();a.stopPropagation();a=b.attr("data-room-link");var f=$("#"+a),g=$("#packageId").val();b.parent().parent().find(".roomRateTaxesAndFees.outer").toggle();$(window).scrollTop($(f).offset().top-100);if(b.hasClass("closed"))b.blur(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT,{roomNumber:d}),b.removeClass("closed").addClass("opened").text(this.module.TranslationTexts.KEEP_CURRENT_SELECTION_BUTTON_TEXT).attr("aria-label",
e).attr("data-test","buttonKeepCurrentSelection"),f.find(".selectedRoomCategory:first").hide(),f.find(".rooms-list:first").show(),$namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){f.find(".accordion-button:first").focus()},1);else for(f.find(".rooms-list:first").hide(),$namespace.TabOrder.updatePageTabOrder(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT,{roomNumber:d}),b.attr("aria-label",e).removeClass("opened").addClass("closed").text(this.module.TranslationTexts.MODIFY_ROOM_BUTTON_TEXT).attr("data-test",
"buttonModifyRoom"),f.find(".selectedRoomCategory:first").show(),b.focus(),$namespace.Analytics.trackEvent(" Hotel_Room_Select","Keep_Selection",g),b=this.roomAccodionsList[a],d=0;d<b.length;d++)b[d].close();$(window).trigger("ct.section.toggling")},loadAdditionalHotelResultsPage:function(a,b){a>this.lastPage&&(a=this.lastPage);if(this.selectedPage<a||b){var d="cthr=SHOW_ADDITIONAL_HOTEL_RESULTS&selectedPage="+(a+"&sortType="+this.sortType+"&ascendingOrder="+this.ascendingOrder);var e=this;this.selectedPage=
a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",d,null,"additionalHotelsSection",function(d){d=e.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.ADDITIONAL_HOTELS_LOADING_ERROR_TITLE}):(e.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",e.$el),e.$el.find("select#selectHotelSort").val(e.sortType),e.initHotelRatingTooltips(),
e.initShopCardTooltips(),e.initLearnMoreLink(),e.updateShowMoreButton(),$(window).trigger("ct.showmore.opening"),$namespace.Application.initTurnToTeasers(),$namespace.TabOrder.updatePageTabOrder(),b?b():e.setFocusOnFirstNewlyLoadedHotel(a))},null)}},setFocusOnFirstNewlyLoadedHotel:function(a){var b=$.hook("hotels-target").children("DIV"),d=$(b[a-1]).find("h3:first");d.addClass("no-outline").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();d.on("blur",function(a){d.attr("tabindex",
"-1").removeAttr("data-taborder");d.off("blur")});d.focus()},updateShowMoreButton:function(){var a=this.numberOfAdditionalHotels-(this.selectedPage*$namespace.NUMBER_OF_HOTELS_PER_PAGE>this.numberOfAdditionalHotels?this.numberOfAdditionalHotels:this.selectedPage*$namespace.NUMBER_OF_HOTELS_PER_PAGE),b=this.module.TranslationTexts;0<a?(a<$namespace.NUMBER_OF_HOTELS_PER_PAGE?this.ui.showMoreHotelsLink.find("span").text(b.SHOW_MORE_HOTELS_BUTTON_TEXT):this.ui.showMoreHotelsLink.find("span").text(b.SHOW_5_MORE_HOTELS_BUTTON_TEXT),
this.ui.showMoreHotelsLink.parent().show()):this.ui.showMoreHotelsLink.parent().hide()},_onLearnMoreClick:function(a){a=$(a.currentTarget).attr("data-hotelId");$namespace.Analytics.trackEvent("Hotels_Learn_More","click",a)},_onLoadHotelPopupMealPlans:function(a){var b=$(a.currentTarget);a="cthtc=LOAD_HOTEL_MEAL_PLANS_POPUP&destination="+b.attr("data-destination");a+="&cityCode="+b.attr("data-citycode");a+="&hotelId="+b.attr("data-hotelid");b=$("#packageId").val();$namespace.Analytics.trackEvent("Hotel_Meal_Plan",
"Click",b);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsTabContent.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_showCancellationPolicyModal:function(){var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null);$namespace.Analytics.trackEvent("Hotel_Results_Cancellation_Policy_Schedule","Click",this.packageId)},_showCancellationResponsivePopup:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),
d=$("#"+b).html();b={cthr:"SHOW_CANCEL_MESSAGE"};"true"==a.attr("data-cancellation")&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(d),b.show())}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(b),null,null,a,null)},validateHotelSelection:function(a,b){var d="cthr=VALIDATE_HOTEL_SELECTION";$namespace.Validation.isBlankOrNull(a)||(d+="&advisoryItemUid="+a);$namespace.Validation.isBlankOrNull(b)||(d+="&roomTaxesAndFeesAcknowledged="+b);var e=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",
d,null,null,function(b){var d=$namespace.Widgets.Advisory.TranslationTexts;var f=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?"Message/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HF_hotel_hotel_advisory":"Message/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"_Hotel_Advisory";this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:d.HOTEL_ADVISORY_POPUP_ERROR_TITLE}):$namespace.Validation.isBlankOrNull(b)?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(e,"validateHotelSelection"))).show(),$("#acknowledgementModalPopup").on("click",function(a){"modal-close"===$(a.target).data("hook")&&$namespace.Analytics.trackEvent(f,"Close",e.packageId)}),$namespace.Utils.Breakpoint.isDesktop()&&$("#hotelAcknowlegementContentDiv, #hotelTafAcknowlegementContentDiv").find("label").each(function(a,
b){b.removeAttribute("for")})):($namespace.Validation.isBlankOrNull(a)||$namespace.Analytics.trackEvent(f,"Continue",e.packageId),$namespace.Navigation.loadPage("h="+b))},null,"")},_onSelectChange:function(a){var b=this;a=$(a.currentTarget);var d=this.$el.find("#selectHotelSort");a=a.find(":selected").text();d.attr("data-product-uid");var e=d.val(),f=$("#packageId").val(),g=function(){var a=b.module.TranslationTexts;e=d.val();switch(e){case "0":var f=a.SORTED_BY_COSTCO_RECOMMENDS;break;case "1":f=
a.SORTED_BY_NAME;break;case "2":f=a.SORTED_BY_PRICE;break;case "3":f=a.SORTED_BY_TRAVEL_RATING;break;case "4":f=a.SORTED_BY_MEMBER_RATING}utils.updateLiveContainer(f);b.reinitializeMap()};this.selectedPage=1;this.sortType=e;this.ascendingOrder=!0;if("3"==e||"4"==e)this.ascendingOrder=!1;a===this.module.TranslationTexts.MEMBER_REVIEW_SORT_TYPE&&$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED?this.sortByMemberRating():this.loadAdditionalHotelResultsPage(this.selectedPage,g);$namespace.Analytics.trackEvent("Hotel_Results_Sort",
a,f)},reinitializeMap:function(){this.ui.map=$.hook("hotel_map");var a=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(a,{getAllcb:function(){return a.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.initializeMap();this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this))},sortByMemberRating:function(){var a=
[],b=this.$el.find("#additionalHotelsContainer");$.each(b.children(),function(b,d){b={};b.hotelCard=d;b.rating=$(d).find(".turntoTeaser").attr("data-turnto-rating");a.push(b);$(d).remove()});a.sort(function(a,b){return a.rating===b.rating?0:null==a.rating?1:null==b.rating?-1:a.rating<b.rating?1:-1});var d=[],e=[];a.forEach(function(a,f){f=a.hotelCard;$(f).removeClass("displayNone").hide();0<$(f).find(".notAvailable").length?d.push(f):null==a.rating?e.push(f):b.append(f)});e.forEach(function(a,d){b.append(a)});
d.forEach(function(a,d){b.append(a)});var f=0,g=1;$.each(b.children(),function(a,b){f>=$namespace.NUMBER_OF_HOTELS_PER_PAGE&&(f=0,g++);1==g&&$(b).show();$(b).attr("data-additional-hotel-page",g);f++});this.initLearnMoreLink()},_onAdjustSearchClick:function(a){var b=$(a.currentTarget),d=$("#packageId").val(),e=$("#carSummary_carPickUpDate").text(),f=$("#carSummary_carDropOffDate").text(),g="svp=LOAD_HOTEL_FACTSHEET_SEARCH_POPUP&factsheetHotelId="+$(a.currentTarget).data("hotelid");g+="&destinationCode="+
$(a.currentTarget).data("destination");g+="&cityCode="+$(a.currentTarget).data("citycode");a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=new $namespace.Widgets.Modal(this.responseText);d.setItemToFocus(b);setTimeout(function(){a.modalView=new $namespace.View.HotelFactsheetSearchPopupView({controller:a,fromVpSearchWorkflow:!0});setTimeout(function(){d.show();try{var b=$namespace.DomUtil.readCookie(a.SEARCH_WIDGET_COOKIE_NAME);if(b=JSON.parse(b)){$("#modalFlightItineraryCheckbox").prop("checked",
b.includeFlight);if(b.includeFlight){if(b.departureLocationName){$("#modalDepartureCityText").val(b.departureLocationName).attr("default-value",b.departureLocationCode);var e={value:b.departureLocationCode,title:b.departureLocationName};$("#modalDepartureCityText").attr("lastSelectedValue",e.title);a.modalView._onDepartureCitySelect(e)}b.serviceClass&&$("#modalServiceClassSelect").val(b.serviceClass)}else $("#modalDepartureCityText").val("").attr("default-value",""),setTimeout(function(){$("#modalFlightItineraryCheckbox").change()},
50);b.rooms&&setTimeout(function(){$("#modalNumberOfRooms").val(b.rooms.length);$("#modalNumberOfRooms").change();for(var a=0;a<b.rooms.length;a++)if($("#modalAdultsInRoom_"+(a+1)).val(b.rooms[a].adultCount),0<b.rooms[a].children.length){$("#modalChildrenInRoom_"+(a+1)).val(b.rooms[a].children.length);$("#modalChildrenInRoom_"+(a+1)).change();for(var d=0;d<b.rooms[a].children.length;d++)$("#childAge_"+(a+1)+"_"+(d+1)).val(b.rooms[a].children[d].age)}},100)}}catch(q){$namespace.Logger.error("packageHotelView: Error parsing VP Search Widget Cookie.")}},
delay);$("#modalDepartureDate").val("");$("#modalReturnDate").val("")})}}(this);$namespace.Analytics.trackEvent(e+" - "+f,"Hotel_Results_Availability",d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",g,null,null,a,null)},_populatePriceChangeModalTemplate:function(a,b,d,e,f,g,h){"content"in document.createElement("template")?(a=$("#confirm_hotel_selection_change"),a=$(a.prop("content")).clone()):(a=$("#confirm_hotel_selection_change div#upgradeConfirmCenterModal"),
a=a.clone());a.find("#priceChangeMessage").html(h);a.find("#priceChangeMessage").find("span").text(b);a.find("#priceChangeModalTitle").text(f);a.find("#newPackagePriceLabel").text(e);a.find("#priceChangeNewPrice").text(d);g&&a.find("#confirmHotelChangePriceMayChangeNote").removeClass("hidden");return a}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.DpDealsView=Backbone.View.extend({el:"#dpDealsId",events:{'click [data-hook ="check_price_availability"]':"_onBannerInfoLinkClick","click #hotel-details-megatip":"_onLearnMoreClick","click a.modal-gallery-thumb":"_onGalleryThumbClick","click #fullTermsConditions":"_onTermsConditionsClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick"},initialize:function(a){this.module=$.extend({},a).module;this.initLearnMoreLink();$('.dpDealsId div[data-hook="infinite-carousel"]').each($namespace.Utils.eachUninitialized(function(a,
d){d.carousel=window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX?new $namespace.Widgets.InfiniteCarousel(a,{focusOnTitle:!0}):new $namespace.Widgets.InfiniteCarousel(a)}));$(this.module.selector).find("#termsAndConditionsAccordion").each(function(a,d){d.accordion&&d.accordion.close()});this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});this.resize();"HFC"==$("#defaultDPTab").val()?$namespace.SearchWidgetsModule.widgets.vacationPackage._onClickSubHfcTab():
$namespace.SearchWidgetsModule.widgets.vacationPackage._onClickSubHptab();this.$el.find('[data-hook="advisory-widget"]').each(function(a,d){a=$(d);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"dpDeals"})});this.handleCarousel()},_onLearnMoreClick:function(a){a=$(a.currentTarget).attr("data-hotelId");$namespace.Analytics.trackEvent("hotel_popup","click_learn_more",a)},_onBannerInfoLinkClick:function(a){a.preventDefault();var b=window.location.href;$(a.currentTarget);var d=$("#dynamicPackageTitle").val(),
e=$("#dynamicPackageCityName").val();d="dc=LOAD_DP_DEALS_SEARCH_PACKAGE&title="+d+("&cityName="+e);e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),a.modalView=$namespace.Modules.addView(a,$namespace.View.DpDealsSearchWidgetView,{offerSearchInfo:this.callbackFunctionParams[0],
controller:a}),b.show())}}(this);-1!=a.currentTarget.outerHTML.lastIndexOf('role="link"')?$namespace.Analytics.trackEvent("offer_page","top_button",b.substring(b.lastIndexOf("/")+1),null):$namespace.Analytics.trackEvent("offer_page","bottom_button",b.substring(b.lastIndexOf("/")+1),null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("dealsContent.act",d,null,null,e,null)},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();
var b=this,d=$(this).data("destination"),e=$(this).data("citycode"),f=$(this).data("hotelid"),g=$(this).data("megatip"),h="";h="vpc=LOAD_DYNAMIC_HOTEL_DETAIL_INFO&destination="+d+("&cityCode="+e)+("&hotelId="+f);h+="&isDealsPage=true";d=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);e="false";null!=d&&(e=d.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());h+="&displayReviewsAccordion="+e;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",
h,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+g).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,
b){$(b).on("click",function(a){a=$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Hotel_Rooms",label:f+"_"+d.innerText})})});b.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));b.tabSwitcher.initialize();b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,d,e){b.currentTab=a;"features-tab"==a?$namespace.Analytics.trackEvent("Hotel_Property_Features",
"click",f):"activities-tab"==a&&$namespace.Analytics.trackEvent("Hotel_Property_Activities","click",f)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f));b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50);""==$("#hotelRoomFeatureTabData").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden")},null,"")})},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);new $namespace.Widgets.ModalGallery(b,
{isHotelGallery:"true"});$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid,null)},_onTermsConditionsClick:function(a){this.fullTermsConditions.open()},handleCarousel:function(){$(document).on("ct:InfiniteCarousel:updated",function(a){$(".megatip.active").find('[data-hook="megatip-close"]').click()})},_onReviewsLinkClick:function(a){a=$(a.currentTarget).data("hotel-id");var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a),d=this;if(null!=b){d=this;$(window).on("ct.megatip.opened",
function(){var a=b.getReviewsAccordionId();$(a).focus();$(a).closest('[data-hook="accordion"]').get(0).accordion.open();d._onAccordionClick({currentTarget:$(a)},"Hotel_Reviews");$(window).off("ct.megatip.opened")});var e=$('a[data-megatip][data-hotelid="'+a+'"]');1<e.length&&(e=$('div.carousel-item.active a[data-megatip][data-hotelid="'+a+'"]'));e.click()}},_onAccordionClick:function(a,b){$(a.currentTarget).closest("[data-hotelid]").data("hotelid")},resize:function(){var a=$("DIV.banner-info"),b=
$("DIV.height-item"),d=$("ul.banner-list"),e=$("ul.banner-list li");if(breakpoint.isMobile()){var f=a.css("height");a.data("css-height",f);a.css("height","").removeClass("h350");0>=e.length&&d.removeClass("banner-mobile")}else(f=a.data("css-height"))&&!a.css("height")&&a.css("height",f),6<=e.length?(a.css("height","").removeClass("h350"),b.addClass("banner-height")):a.addClass("h350")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;$namespace.View=$namespace.View||{};
$namespace.View.PackageCrossSellSearchPopupView=Backbone.View.extend({el:"#package_offer_cross_sell_search_modal",WIDGET_COOKIE_NAME:"VP2_SEARCH_WIDGET_VALUES",events:{'click [data-hook="modal-close"]':"_onCloseModalClick","change input#modalFlightItineraryCheckbox":"_onFlightItineraryChange","change select#modalNumberOfRooms":"_onNumberOfRoomsChange","change select.adultsInRoom":"_onMultiAdultsChange","change select.childrenInRoom":"_onMultiChildrenChange","change select.childAge":"_onChildAgeChange",
"change select.infantSeatSelect":"_onChildSeatChange","submit form#crbeCrossSellPriceAndAvailabilityForm":"_onSubmit","focus button#actionButton":"_onSubmitButtonFocus"},controller:null,ui:null,model:null,departureDate:null,returnDate:null,totalNights:null,minimumNights:null,lastDepartureDate:null,lastReturnDate:null,namespace:"crbeCrossSellOfferVPAndHFModal",initialize:function(a){this.controller=$.extend({},a).controller;this.createModel();this.initElements();$('input[format-date-input="true"]',
this.el).on("input",function(){utils.formatDateInput($(this))});this.isHFSearch=this.ui.isHfsearchType.val();this.cityNameVp=this.ui.city.val().split(",");this.destinationVp=this.cityNameVp[1];this.cityName=this.ui.city.val();this.locationName=this.ui.locationName.val().split(",");this.destinationCode=this.locationName[1].split(/\s/).join("");this.regionVp=this.locationName[0];this.regionCodeVp=this.ui.cityCode.val();this.departureDateStr=this.ui.departureDate.val();this.returnDateStr=this.ui.returnDate.val();
this.packageIdAnalyticsVp=this.destinationCode+"-"+this.regionVp+","+this.destinationVp+" ("+this.regionCodeVp+")";this.pickUpDropOffLocationDates=this.departureDateStr+"_"+this.returnDateStr;"true"==this.isHFSearch?$namespace.Analytics.trackEvent("dp/hf_Rental_Car_Booking_Confirmation_CrossSell","Click",this.ui.locationName.val()+"_"+this.pickUpDropOffLocationDates+"_"+this.ui.locationName.val()):$namespace.Analytics.trackEvent("dp/pkg_Rental_Car_Booking_Confirmation_CrossSell","Click",this.packageIdAnalyticsVp+
"_"+this.pickUpDropOffLocationDates+"_"+this.ui.locationName.val())},createModel:function(){this.model={departureDate:"",destinationCode:"",regionCode:"",returnDate:"",destinationType:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",latitude:"",longitude:"",country:"",serviceClass:"",isVpSub:"true",isHfcSub:"false",isDpSub:"true",prevDesType:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]}},_onCloseModalClick:function(a){a.preventDefault();this.uninitElements();"true"==
this.isHFSearch?$namespace.Analytics.trackEvent("event_searchModal_Close","Close",this.cityName):$namespace.Analytics.trackEvent("event_searchModal_Close","Close",this.packageIdAnalyticsVp)},_onNumberOfRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();this.initFormElements();this.hidePassengersExceededPerRoomMsg();this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder()},
_onMultiAdultsChange:function(a){a.preventDefault();a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);this.showPassengersExceededPerRoomMsg(b);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onMultiChildrenChange:function(a){a.preventDefault();a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();var b=$(a.currentTarget);
a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();this.showPassengersExceededPerRoomMsg(b);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.package_offer_multichild_template,e=$.hook("child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();
for(var f=0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.childAge[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.infantSeatSelect[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);var k=this.ui.includeFlight.is(":checked");0>g.age||1<g.age||!k?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+
g.number+'"]').show()}}this.initFormElements()}}},setRoomLayout:function(a){a=this.model.rooms.length;this.form.find('SELECT[id="modalNumberOfRooms"]').val(a);for(var b=[],d=[],e=[],f=[],g=0;g<a;g++){var h=this.model.rooms[g];b.push(h.adultCount);d.push(h.children.length);for(var k=0;k<h.children.length;k++)e.push(h.children[k].age),f.push(h.children[k].seat)}g=$namespace.Templates.package_offer_multiroom_template;h=0;this.ui.expansionContainer.empty();k=0;for(var l=1;k<a;k++,l++){var p=$(g({index:l}));
this.ui.expansionContainer.append(p);this.form.find('SELECT[id="modalAdultsInRoom_'+l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.form.find('SELECT[id="modalChildrenInRoom_'+l+'"]').val(d[k]).find("option[value="+d[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.package_offer_multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);if(r){r.empty();for(var v=parseInt(d[k]),n=
0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+e[h],w=f[h];p.find('.childAge[data-room="'+l+'"][data-child="'+t+'"]').val(u);p.find('.infantSeatSelect[data-room="'+l+'"][data-child="'+t+'"]').val(w);w=this.ui.includeFlight.is(":checked");0>u||1<u||!w?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}},_onChildAgeChange:function(a){var b=$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");
this.clearErrors([a,a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder()},_onChildSeatChange:function(a){var b=$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-
1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},_onDepartureCitySelect:function(a,b){b=a.value;this.departureOutboundRoundtripSpan.text(b);this.departureInboundRoundtripSpan.text(b);var d=this.departingCityTGridSectionLastSection.attr("aria-label");try{d=d.substring(0,d.indexOf(", ")+2)+b}catch(e){}this.departingCityTGridSectionLastSection.attr("aria-label",d);this.model.departureLocationCode=a.value;this.model.departureLocationName=$.trim(a.title)},_onDepartureCityBlur:function(a){this.clearError("#modalDepartureCityText");
$("#modalFlightType").val();a=a.target.value.replace(/^\s+|\s+$/g,"");if(a.length){var b=$namespace.SearchWidgetsModule.TranslationMessages;3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,{minLength:3}),$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(a)})):this.datalistDepartureCity.hasValidSelection()||$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE.translatedText)})}},
_onServiceClassChange:function(a){a=$(a.currentTarget).val();$namespace.Analytics.trackEvent("event_searchModal","Class",a)},_onSubmitButtonFocus:function(a){$(document.body).addClass("scroll-lock")},_onSubmit:function(a){$(".showPackageMsg").text("");$("#vpOfferPackageMessageId").removeClass("showPackageWarn");$(a.currentTarget);if(this.validate()){var b=this.ui.isHfsearchType.val(),d=$("#modalServiceClassSelect").val();this.model.serviceClass=d;$("#modalNumberOfRooms").val();var e=this.model.rooms;
d=0;for(var f=[],g=[],h=[],k=[],l=0;l<e.length;l++){d+=e[l].adultCount+e[l].children.length;f.push(e[l].adultCount);g.push(e[l].children.length);for(var p=0;p<e[l].children.length;p++)h.push(e[l].children[p].age),k.push(e[l].children[p].seat)}e=this.ui.destinationToSubmitVp1.val();this.model.latitude=this.ui.latitude.val();this.model.longitude=this.ui.longitude.val();this.model.country=this.ui.country.val();this.model.locationName=this.ui.locationName.val();this.model.city=this.ui.city.val();this.model.cityCode=
this.ui.cityCode.val();"true"==b?(this.model.isVpSub="false",this.model.isHfcSub="false",this.model.destinationType=this.ui.destinationType.val(),e={destinationType:this.ui.destinationType.val(),locationName:this.model.locationName,city:this.model.city,cityCode:this.ui.cityCode.val(),cityName:this.ui.locationName.val(),destination:e},this.model.includeFlight?this.gaHfFlightIncluded(e,f,g):this.gaHfNoFlight(e,f,g)):(this.model.isVpSub="true",this.model.isHfcSub="false",this.model.pacakgeCrbecrossSell=
"true",this.model.regionCode=this.ui.cityCode.val(),this.model.destinationType=this.ui.destinationType.val(),p=this.ui.locationName.val().split(","),l=(p[0].charAt(0).toLowerCase()+p[0].slice(1)).split(/\s/).join(""),p=p[1].toLowerCase().split(/\s/).join(""),this.model.destinationCode="lasVegas"===l?l:p,e={destinationType:this.model.destinationType,locationName:this.ui.locationName.val(),city:this.ui.city.val(),cityCode:this.ui.cityCode.val(),cityName:this.ui.locationName.val(),destination:e},this.model.includeFlight?
this.gaVpFlightIncluded(f,g):this.gaVpNoFlight(f,g));e.latitude=this.model.latitude;e.longitude=this.model.longitude;e.country=this.model.country;e.departureDate=this.model.departureDate;e.arrivalDate=this.model.returnDate;e.numberOfNights=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date);e.flightChecked=this.model.includeFlight;e.numberOfPassengers=d;e.hotelRooms=this.model.rooms.length;e.adults=f.join(",");e.children=g.join(",");e.childrenAges=h.join(",");e.childSeatFlags=
k.join(",");e.serviceClass=this.model.serviceClass;e.multiCityPackagesRequested=!1;this.model.includeFlight&&(e.departureCityCode=this.model.departureLocationCode,e.departureCity=this.model.departureLocationName);e.uid=$namespace.Utils.getUID();this.submitForm(e,b)}a.preventDefault()},gaHfFlightIncluded:function(a,b,d){$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_Destination_City",a.cityCode,this.cityName);$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_Destination_City_Depart_Date",
a.cityCode+"_"+this.model.departureDate,this.cityName);$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_Destination_City_Departure_City",a.cityCode+"_"+this.model.departureLocationCode,this.cityName);$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.cityName);$namespace.Analytics.trackEvent("dp/hf_event_searchDetails_Modal_CrossSell","Click",this.cityName+"_"+this.pickUpDropOffLocationDates+
"_"+this.model.departureLocationCode+"_"+this.model.rooms.length+"_"+b.reduce(function(a,b){return a+b},0)+"_"+d.reduce(function(a,b){return a+b},0))},gaHfNoFlight:function(a,b,d){$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_Destination_City",a.cityCode,this.cityName+"_No-Flight");$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_Destination_City_Depart_Date",a.cityCode+"_"+this.model.departureDate,this.cityName+"_No-Flight");$namespace.Analytics.trackEvent("dp/hf_event_searchModal_CrossSell_DepartureDate_ReturnDate",
this.model.departureDate+"_"+this.model.returnDate,this.cityName+"_No-Flight");$namespace.Analytics.trackEvent("dp/hf_event_searchDetails_Modal_CrossSell","Click",this.cityName+"_"+this.pickUpDropOffLocationDates+"_No-Flight_"+this.model.rooms.length+"_"+b.reduce(function(a,b){return a+b},0)+"_"+d.reduce(function(a,b){return a+b},0))},gaVpFlightIncluded:function(a,b){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_Destination_City",this.regionCodeVp,this.packageIdAnalyticsVp);
$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_Destination_City_Depart_Date",this.regionCodeVp+"_"+this.model.departureDate,this.packageIdAnalyticsVp);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_Destination_City_Departure_City",this.regionCodeVp+"_"+this.model.departureLocationCode,this.packageIdAnalyticsVp);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.packageIdAnalyticsVp);
$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_CrossSell","Click",this.packageIdAnalyticsVp+"_"+this.pickUpDropOffLocationDates+"_"+this.model.departureLocationCode+"_"+this.model.rooms.length+"_"+a.reduce(function(a,b){return a+b},0)+"_"+b.reduce(function(a,b){return a+b},0))},gaVpNoFlight:function(a,b){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_Destination_City",this.regionCodeVp,this.packageIdAnalyticsVp+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_Destination_City_Depart_Date",
this.regionCodeVp+"_"+this.model.departureDate,this.packageIdAnalyticsVp+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_CrossSell_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.packageIdAnalyticsVp+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_CrossSell","Click",this.packageIdAnalyticsVp+"_"+this.pickUpDropOffLocationDates+"_No-Flight_"+this.model.rooms.length+"_"+a.reduce(function(a,b){return a+b},0)+"_"+
b.reduce(function(a,b){return a+b},0))},submitForm:function(a,b){this.model.locationName=this.model.locationName.replace(/,/g,"<comma>");this.model.city=this.model.city.replace(/,/g,"<comma>");$namespace.DomUtil.clearCookie(this.WIDGET_COOKIE_NAME);$namespace.DomUtil.createCookie(this.WIDGET_COOKIE_NAME,JSON.stringify(this.model),0);var d=$namespace.GlobalConstants.RESPONSIVE_VP_PIMP_RESULTS_PAGE_ENABLED;$namespace.Storage.set("vacation-packages-search-form",a);$namespace.DomUtil.setElementLoadingMask(!0);
this.isSubmitting=!0;if(this._isDestinationBookable(a.destination)){var e=$namespace,f=this._isRegionRequired(a.destination);var g=d?"&ctvps=SEARCH_VACATION_PACKAGES":"&fsr=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_BOOKABLE_PACKAGES";if(b){b={domainCode:"",destination:a.locationName,destinationCityCode:a.cityCode,latitude:a.latitude,longitude:a.longitude,country:a.country,travelStartDate:a.departureDate,travelEndDate:a.arrivalDate,numberOfNights:a.numberOfNights,rooms:[],travelerCount:a.numberOfPassengers,
childSeatFlags:a.childSeatFlags,originAirports:[{airportName:a.departureCity,airportCode:a.departureCityCode}],destinationAirports:[],numberOfConnections:-1,flightServiceClass:a.serviceClass};f=a.adults.split(",");for(var h=a.children.split(","),k=a.childrenAges.split(","),l=0,p=0;p<a.hotelRooms;p++){var q=parseInt(h[p]);b.rooms[p]={roomNumber:p,adultCount:parseInt(f[p]),childCount:q,childAges:[]};q+=l;for(var r=b.rooms[p].childAges,v=0,n=l;n<q;v++)r[v]=k[n++],l++}g+="&dynamicSearchInfoJSON="+JSON.stringify(b);
g+="&destinationType="+a.destinationType;g+="&cityCode="+a.cityCode;g+="&latitude="+a.latitude;g+="&country="+a.country;g+="&locationName="+a.locationName;g+="&city="+a.city;g+="&longitude="+a.longitude;g+="&fromHotelPlusFlightSubTab=true";b=function(a,b){b=e.SearchWidgetsModule.TranslationTexts.PRODUCT_SEARCH_NO_RESULTS_TITLE;this.message?(e.DomUtil.setElementLoadingMask(!1,1),e.MessageUtil.showMessage({type:1,text:this.message.text,title:b})):"HOBESearchResult"===a?/hotels/i.test(window.location.href)?
e.Navigation.loadPage(_webLoc+"/Hotels/h="+e.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS):"MultiCityPackageSearchResult"===a?e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES):e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES_RESPONSIVE)}}else f?g+="&cityCode="+a.cityCode:"lasVegas"==a.destination&&(g+="&cityCode=LAS"),
b=function(){e.Navigation.loadPage(_webLoc+"/h="+e.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES)};g+="&destination="+a.destination;g+="&flightChecked="+a.flightChecked;g+="&arrivalDate="+a.arrivalDate;g+="&departureDate="+a.departureDate;g+="&numberOfNights="+a.numberOfNights;g+="&numberOfPassengers="+a.numberOfPassengers;g+="&hotelRooms="+a.hotelRooms;g+="&adults="+a.adults;g+="&children="+a.children;g+="&childrenAges="+a.childrenAges;g+="&childSeatFlags="+a.childSeatFlags;g=g+"&fromWidget=true&fromMenu=false&serviceClass="+
a.serviceClass;g+="&multiCityPackagesRequested="+a.multiCityPackagesRequested;g+="&suppressOutput=true";a.flightChecked&&(g+="&departureCity="+a.departureCity,g+="&departureCityCode="+a.departureCityCode);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv(d?"vacationPackageSearch.act":"vacationPackageFilteredSearchResults.act",g,null,null,b,null,"")}},getTotalPassengerCount:function(){for(var a=0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;
return a},showPassengersExceededPerRoomMsg:function(a){var b=!1,d=a.adultCount;a=a.children.length;4<d?b=!0:5<d+a&&(b=!0);d=$(".showHotelExceedsMsg");d.length&&(b?(d.addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_NO_OF_TRAVELLERS_PER_ROOM_MSG),window.setTimeout(function(){$("#vpOfferRoomMessageId").addClass("showHotelExceedsWarn").get(0).scrollIntoView()},500)):this.hidePassengersExceededPerRoomMsg())},hidePassengersExceededPerRoomMsg:function(){for(var a=!0,b=
0;b<this.model.rooms.length;b++){var d=this.model.rooms[b].adultCount,e=this.model.rooms[b].children.length;if(4<d||5<d+e)a=!1}a&&($(".showHotelExceedsMsg").text(""),$("#vpOfferRoomMessageId").removeClass("showHotelExceedsWarn"))},validateAirfarePassengerCount:function(){var a=$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#package_offer_passengers_per_room_div_1 #package_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));
if(9<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["package_offer_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){var a=
$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#package_offer_passengers_per_room_div_1 #package_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));if(10<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["package_offer_passengers_per_room_div_"+
b]=$namespace.MessageUtil.prefixError(e.translatedText);d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validate:function(){this.clearErrors();var a=!0,b=$namespace.SearchWidgetsModule.TranslationMessages;if(this.model.includeFlight){$("#modalFlightType").val();var d=$("#modalDepartureCityText").val();""===d&&(this.model.departureLocationCode="",this.model.departureLocationName=
"");""!==d&&this.datalistDepartureCity.hasValidSelection()||(d=b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE,$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),a=!1);this.validateAirfarePassengerCount()||(a=!1)}else this.validateWithoutAirfarePassengerCount()||(a=!1);d=0;for(var e=1;d<this.model.rooms.length;d++,e++)this.form.find('SELECT.childAge[data-room="'+
e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},h=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(h.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(h.sourceText));a=!1}});this.validateDates(!1)||(a=!1);a||$namespace.Utils.focusFirstErrorField(this.form);return a},transformer:function(a){a=JSON.parse(a).callbackFunctionParameters[0];
for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},loadRoomData:function(){var a=this.model,b=function(a){return a?a.split(","):[]},d=this.ui.expansionContainer.attr("data-rooms"),e=b(this.ui.expansionContainer.attr("data-adults")),f=b(this.ui.expansionContainer.attr("data-children")),g=b(this.ui.expansionContainer.attr("data-childrenages"));
b=b(this.ui.expansionContainer.attr("data-childseatflags"));for(var h,k,l=0,p=0;p<d;p++){h={index:p,number:p+1,adultCount:parseInt(e[p]),children:[]};for(var q=0;q<f[p];q++)k={index:q,number:q+1,age:g?parseInt(g[l]):-1,seat:b?parseInt(b[l]):0},h.children.push(k),l++;a.rooms.push(h)}0==a.rooms.length&&a.rooms.push({index:0,number:1,adultCount:2,children:[]});return a},initElements:function(){this.ui={};this.ui.expansionContainer=$.hook("multiroom-expansion",this.el);this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;
this.form=this.$("form#crbeCrossSellPriceAndAvailabilityForm");this.submitButton=this.$("#actionButton");this.flightItineraryBlock=this.$("#flightItineraryBlock");this.departureCityText=this.$("#modalDepartureCityText");this.departureOutboundRoundtripSpan=this.$("#departureOutboundRoundtripSpan");this.departureInboundRoundtripSpan=this.$("#departureInboundRoundtripSpan");this.departingCityTGridSectionLastSection=this.$("#tGridSection-last");this.descriptionNumberOfNights=this.$(".description-number-of-nights");
this.ui.includeFlight=this.form.find("#modalFlightItineraryCheckbox");this.ui.city=this.form.find("#destination_city");this.ui.cityCode=this.form.find("#destination_cityCode");this.ui.country=this.form.find("#destination_country");this.ui.latitude=this.form.find("#destination_latitude");this.ui.longitude=this.form.find("#destination_longitude");this.ui.locationName=this.form.find("#destination_locationName");this.ui.destinationType=this.form.find("#destination_destinationType");this.ui.isHfsearchType=
this.form.find("#destination_searchType");this.ui.destinationToSubmitVp1=this.form.find("#destination_destinationToSubmit");this.model=this.loadRoomData();var a=$namespace.DomUtil.readCookie("Csrf-token");this.datalistDepartureCity=new $namespace.Widgets.DataListWidget(this.$("#input_departure_city"),{url:"searchHelper.act",parser:utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureCitySelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:this.transformer,
noResultsText:$namespace.SearchWidgetsModule.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});this.model.includeFlight=this.ui.includeFlight.is(":checked");this.initDateWidgets();this.setRoomLayout();this.initFormElements();$(window).on("resize."+this.namespace,$.proxy(this.resize,this));$(window).on("orientationchange."+this.namespace,$.proxy(this.resize,this));this.resize()},initFormElements:function(){this.undelegateEvents();
var a=this.$(".select-widget:not(.initialized)");this.selectWidgets=[];for(var b=0;b<a.length;b++)this.selectWidgets[b]=new widgets.SelectWidget(a.eq(b),{taborder:"document"});this.delegateEvents()},getRoom:function(a){return this.model.rooms&&this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;
if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();
a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",
{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},clearError:function(a){this.clearErrors([a])},clearErrorAdultsChildrenPerRoom:function(){for(var a=[],b=1;b<=this.model.rooms.length;b++){var d="vp_offer_passengers_per_room_div_"+b,e="modalAdultsInRoom_"+b,f="modalChildrenInRoom_"+b;a.push(e+"_button");a.push(e);a.push(f+"_button");a.push(f);a.push(d)}this.clearErrors(a)},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#modalDepartureDate");
a.push("#modalReturnDate");a.push("#vacationPackageModalWidgetDates");for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=this.form.find('SELECT.childAge[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}for(b=1;b<=this.model.rooms.length;b++)h="package_offer_passengers_per_room_div_"+b,f="modalAdultsInRoom_"+b,g="modalChildrenInRoom_"+b,a.push(f+"_button"),a.push(f),a.push(g+"_button"),a.push(g),a.push(h);
b=this.form.find("SELECT.numberOfNights");f=0;for(g=1;f<b.length;f++,g++)h=$(b[f]),k=h.attr("id"),h=h.parent().attr("id"),a.push(k+"_button"),a.push(k),a.push(h)}$namespace.Utils.clearErrors(a,this.ui.form)},validateDates:function(a){var b=!0,d=$namespace.SearchWidgetsModule.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#modalDepartureDate","#modalReturnDate","#vacationPackageModalWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,
this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate=this.model.departureDate,$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=
null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),this.returnDate={className:"return",date:h.date},
this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(f=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>f?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),modalDepartureDate:"",modalReturnDate:""}),b=!1):30<f&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),
modalDepartureDate:"",modalReturnDate:""}),b=!1)):(this.departureDate||!e.length&&a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({modalDepartureDate:$namespace.MessageUtil.prefixError(b.translatedText)}),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({modalReturnDate:$namespace.MessageUtil.prefixError(b.translatedText)}),b=!1));return b},initDateWidgets:function(){var a=this,b=$namespace,d=b.DateUtil;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();
var e=function(b,d){b=$(b);b=/departure/i.test(b.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(b?"depart":"return"));a.setReturnDateCalendarDisplayMonth()},f=function(e){var f=/departure/i.test($(this).attr("id"));f=$("#"+(f?"modalReturnDate":"modalDepartureDate")).datepicker("getDate");f=null===f||0!=d.getDifferenceInDays(e,f)?"":"date-highlight";var g=b.SearchWidgetsModule.getAccessibleDateLabel(e);null!=a.departureDate&&0==d.getDifferenceInDays(e,
a.departureDate.date)?g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=a.returnDate&&0==d.getDifferenceInDays(e,a.returnDate.date)&&(g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));e=b.DateUtil.enhanceDateStringReadability(g);return[!0,f,g,e]},g=function(b,d){a.validateDates()},h=b.DateUtil.getDateDaysFromToday(0),k=b.DateUtil.getDateDaysFromToday(1);this.departureDate&&
(k=b.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.form.find("#modalDepartureDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:e,beforeShowDay:f,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,
prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});this.ui.returnDate=this.form.find("#modalReturnDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:e,beforeShowDay:f,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+
"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,alignRight:!0,prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});e=$("#modalDepartureDate, #modalReturnDate");this.floatPlaceholders=[];e.each(function(b,d){a.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});e.on("blur",function(){$(this).datepicker("widget").is(":visible")||
a.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),b.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});
$("#price_availability_modal div.date-widget").addClass("ctc-jqui");e=$("#modalDepartureDate").val();this.departureDate={className:"departure",date:$namespace.DateUtil.getDateFromString(e,this.localeDateFormat)}},resize:function(){var a=$namespace.SearchWidgetsModule.getWindowDimensions();if(this.win.height!=a.height||this.win.width!=a.width)this.form.find("#modalDepartureDate,#modalReturnDate").datepicker("hide"),this.win=a;a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;var b=this.form.find('INPUT[id="modalDepartureDate"]'),
d=this.form.find('INPUT[id="modalReturnDate"]');b.length&&d.length&&(b.prop("readonly",a),d.prop("readonly",a),b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null)},uninitElements:function(){this.win=this.model=this.ui=this.submitButton=this.form=null;$(window).off("resize."+this.namespace);$(window).off("orientationchange."+this.namespace);this.datalistDepartureCity.destroyUI();this.lastReturnDate=this.lastDepartureDate=this.datalistDepartureCity=null;for(var a=0;a<
this.selectWidgets.length;a++)this.selectWidgets[a].destroyUI(),this.selectWidgets[a]=null;this.selectWidgets=null},_isRegionRequired:function(a){return $namespace.Utils.regexDestinationCode(a)?!0:!1},_onFlightItineraryChange:function(a){a=$(a.currentTarget).is(":checked");(this.model.includeFlight=a)?(this.flightItineraryBlock.slideDown(slideSpeed),this.departureCityText.prop("required",!0),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):
(this.flightItineraryBlock.slideUp(slideSpeed),this.departureCityText.prop("required",!1),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder()},_isDestinationBookable:function(a){return/escortedVacations|houseboatVacations|lasVegasAndDesert|lionWorldTravel|luxuryVillaRentals|themeParks/i.test(a)?
!1:!0}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.HotelFactSheetView=Backbone.View.extend({el:"#hotel-factsheet-page",events:{"click a.modal-gallery-thumb":"_onGalleryThumbClick","click #checkAvailabilityBtn":"openAvailabilityPopup",'click a[data-hook="linkLearnMore"]':"_onLearnMoreClick","click a.turnToTeaserWidgetLink":"_onRatingsLinkClick"},hotelId:null,ttAttempts:0,controller:null,initialize:function(a){var b=this;this.module=$.extend({},a).module;$("body").attr("data-page","hotel");this.hotelRatingLinks=this.$el.find("a[data-tooltip]");
if(this.hotelRatingLinks.length)for(a=0;a<this.hotelRatingLinks.length;a++){var d=$(this.hotelRatingLinks[a]);this.hotelRatingsTooltip||(this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(d,{parentSelector:".travel-description-travel-rating"}));d.off("click");this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}$(".accordion-item").click(function(){var a=$("#hotel-factsheet-page").data("hotelid");if(!$(this).hasClass("active")){var b=
$(this).find(".accordion-header").first().text();"Reviews"==b&&(b="Hotel_Reviews");$namespace.Analytics.trackEvent("hotel_factsheet_page",b,a,null)}});$(".accordion-header").click(function(){this.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.hotel-factsheet DIV[data-hook="tab-switcher"]'))});$.hook("accordion").each(utils.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a);a.on("ct.accordion.clicked",$.proxy(b,"_onAccordionClick"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,
b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));this.hotelId=a=$("#hotel-factsheet-page").data("hotelid");self.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+a));$('.offerDetails div[data-hook="infinite-carousel"]').each($namespace.Utils.eachUninitialized(function(a,b){b.carousel=window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX?new $namespace.Widgets.InfiniteCarousel(a,{focusOnTitle:!0}):new $namespace.Widgets.InfiniteCarousel(a)}));this.otherHotelRatingLinks=
$(this.el).find(".carousel-item:not(.clone) a[data-tooltip], .singleHotelInfo a[data-tooltip]");if(this.otherHotelRatingLinks.length)for(d=$(this.otherHotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(d,{parentSelector:".travel-description-travel-rating",enableHideHandler:!1}),d.off("click"),a=0;a<this.otherHotelRatingLinks.length;a++)this.otherHotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);$(document.body).on("click",
function(a){var d=$(a.target).data("tooltip")||$(a.target).parent().data("tooltip"),e=$(".hotel-description-travel-ratings-tooltip")[0];b.hotelRatingsTooltip&&b.hotelRatingsTooltip.isActive&&"hotel-description-travel-ratings-tooltip"!=d&&!e.contains(a.target)&&b.hotelRatingsTooltip.hide({setFocus:!1})});this.handleCarousel();this.showCallCenterNumber();b.initTurnToReviewsAccordion();this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,
{sourcePage:"OfferDetails"})});$(".modal-gallery-thumb").click(function(){if($("#hotel-factsheet-page").attr("data-hotelid")==$(this).attr("data-hotelid")){var a=$(this).attr("data-hotelid");$namespace.Analytics.trackEvent("hotel_factsheet_imgcarousel","click",a,null)}else a=$(".carousel-item.active").find("a[data-hotelid]").first().data("hotelid"),$namespace.Analytics.trackEvent("hotel_factsheet_hotelcarousel","click",a,null)});$(".infinite-carousel .carousel-next").click(function(){var a=$(".carousel-item.active").find("a[data-hotelid]").first().data("hotelid");
$namespace.Analytics.trackEvent("hotel_factsheet_hotelcarousel","click",a,null)});$(".infinite-carousel .carousel-previous").click(function(){var a=$(".carousel-item.active").find("a[data-hotelid]").first().data("hotelid");$namespace.Analytics.trackEvent("hotel_factsheet_hotelcarousel","click",a,null)});$("#features-tab-id").click(function(){var a=$("#hotel-factsheet-page").data("hotelid");$namespace.Analytics.trackEvent("hotel_factsheet_page","click",a,null)});$("#activities-tab-id").click(function(){var a=
$("#hotel-factsheet-page").data("hotelid");$namespace.Analytics.trackEvent("hotel_factsheet_page","click",a,null)})},_onRatingsLinkClick:function(a){var b=$("#"+this.hotelId+"_ReviewsAccordionButton");b.closest('[data-hook="accordion"]').get(0).accordion.open();this._onAccordionClick(a,"Hotel_Reviews");b.focus()},handleCarousel:function(){$(document).on("ct:InfiniteCarousel:updated",function(a){$(".megatip.active").find('[data-hook="megatip-close"]').click()})},initTurnToReviewsAccordion:function(){var a=
$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(this.hotelId);if(null!=a&&a.hasReceivedData()){var b=$("#"+this.hotelId+"_ReviewsAccordionButton").closest('[data-hook="accordion"]');a.getReviewsCount()<$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS()&&b.remove()}else if(10>this.ttAttempts++){var d=this;setTimeout(function(){d.initTurnToReviewsAccordion()},333)}else b=$("#"+this.hotelId+"_ReviewsAccordionButton").closest('[data-hook="accordion"]'),b.remove()},showCallCenterNumber:function(){var a=
$("#tollNumber").text();$(".contactUs-link").text(a);$("a.call_to_book").attr("href","tel:"+a);var b=$("a.contactUsButton"),d=b.text();b.text(d+" "+a);b.attr("href","tel:"+a)},_onAccordionClick:function(a,b){a=$("#hotel-factsheet-page").data("hotelid");var d="hotel_factsheet_accordion";"Hotel_Reviews"==b&&(d="hotel_factsheet_page");$namespace.Analytics.trackEvent(d,b,a,null)},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():
this.hotelRatingsTooltip.show(a)},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"})},openAvailabilityPopup:function(a){var b=$(a.currentTarget),d="svp=LOAD_HOTEL_FACTSHEET_SEARCH_POPUP&factsheetHotelId="+$(a.currentTarget).data("hotel-factsheet-id");d+="&destinationCode="+$(a.currentTarget).data("destination");d+="&cityCode="+$(a.currentTarget).data("citycode");
var e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var d=new $namespace.Widgets.Modal(this.responseText);d.setItemToFocus(b);setTimeout(function(){a.modalView=new $namespace.View.HotelFactsheetSearchPopupView({controller:a});setTimeout(function(){d.show()},delay)})}}(this);$namespace.Analytics.trackEvent("hotel_factsheet_page","top_button",$(a.currentTarget).data("hotel-factsheet-id"),null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("searchVacationPackage.act",
d,null,null,e,null)},_onLearnMoreClick:function(a){var b=$(a.currentTarget);a=b.data("hotelid");b=b.data("hotelurl");$namespace.Analytics.trackEvent("hotel_factsheet_page","click_learn_more",a,null);$namespace.Navigation.loadPage(b)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};var done=!1;
$namespace.View.CruiseLandingPageView=Backbone.View.extend({mapWidth:0,mapHeight:0,initialize:function(a){a=$("img#mapImageFull")[0];this.mapWidth=a.naturalWidth;this.mapHeight=a.naturalHeight;this.mapMaker()},mapMaker:function(){this._mapDesktopView();this._mapMobileView();this._mapUnhide();$namespace.TabOrder.updatePageTabOrder()},_mapDesktopView:function(){var a=this;$("#WorldMap1 > a").each(function(b){b=$(this).attr("data-x");var d=$(this).attr("data-y");b=(b/a.mapWidth*100).toFixed(2);d=(d/
a.mapHeight*100).toFixed(2);var e={left:"unset",top:"unset",bottom:"unset",right:"unset"};18>=b||47.8<b&&61>=b?e.left=b+"%":e.right=100-b+"%";58>=d?e.top=d+"%":e.bottom=100-d+"%";$(this).css(e)})},_mapMobileView:function(){var a=this,b=[0,35,65,100];$("#mobileMapSubDiv > li .miniMapIcon").each(function(d){var e=$(this).attr("data-x");d=$(this).attr("data-y");var f=(e/a.mapWidth*100).toFixed(2),g=(d/a.mapHeight*100).toFixed(2),h="center",k="center",l=0,p=0;f>b[0]&&f<=b[1]?h="left":f>b[1]&&f<=b[2]?
(h="center",l=.25*a.mapWidth):f>b[2]&&f<=b[3]&&(h="right",l=.5*a.mapWidth);g>b[0]&&g<=b[1]?k="top":g>b[1]&&g<=b[2]?(k="center",p=.25*a.mapHeight):g>b[2]&&g<=b[3]&&(k="bottom",p=.5*a.mapHeight);$(this).css({"background-position-x":h,"background-position-y":k});f=$(this).find(".miniMapPin");e=((e-l)/(a.mapWidth/2)*100).toFixed(2);d=((d-p)/(a.mapHeight/2)*100).toFixed(2);p=10;l=14;5>e?p=0:95>e&&(p/=2);5>d&&(l=0);f.css({left:"calc("+e+"% - "+p+"px)",top:"calc("+d+"% - "+l+"px)"})});$(".mobileMapMainDiv").attr("data-expander-show",
"6");$(".mobileMapMainDiv").attr("data-hook","expander");$(".mobileMapSubDiv").attr("data-hook","expander-mask");$.hook("expander").each(utils.eachUninitialized(function(a,b){b.expander=new $namespace.Widgets.Expander(a)}))},_mapUnhide:function(){$(".silent-load").removeClass("silent-load")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};ajax=$namespace.Ajax||{};slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33;$namespace.View=$namespace.View||{};
$namespace.View.HotelFactsheetSearchPopupView=Backbone.View.extend({el:"#price_availability_modal",events:{'click [data-hook="modal-close"]':"_onCloseModalClick","change input#modalFlightItineraryCheckbox":"_onFlightItineraryChange","change select#modalFlightType":"_onFlightTypeChange","change select.numberOfNights":"_onNumberOfNightsChange","change select#modalNumberOfRooms":"_onNumberOfRoomsChange","change select.adultsInRoom":"_onMultiAdultsChange","change select.childrenInRoom":"_onMultiChildrenChange",
"change select.childAge":"_onChildAgeChange","change select.infantSeatSelect":"_onChildSeatChange","change #modalServiceClassSelect":"_onServiceClassChange","submit form#formPriceAndAvailability":"_onSubmit","focus button#actionButton":"_onSubmitButtonFocus"},controller:null,ui:null,model:null,departureDate:null,returnDate:null,totalNights:null,minimumNights:null,lastDepartureDate:null,lastReturnDate:null,namespace:"vpOfferModal",initialize:function(a){var b=this;$(".travel-dates-accordion").hide();
$(".travel-dates-accordion + .fourths-lg").hide();this.options=$.extend({},a);this.controller=this.options.controller;this.numberOfOvernightRail=$("#numberOfOvernightRails").val();this.initElements();this.minimumNights=this.form.data("min-nights");1==$("#multiCity").val()&&$("div.select-nights").hide();"true"==$("#isIncludeFlightItinerary").val()?(this.loadFlightItineraryInformation(),$(".flightCheckboxChecked").show(),$(".flightCheckboxNotchecked").hide()):($(".flightCheckboxChecked").hide(),$(".flightCheckboxNotchecked").show());
var d=$("section[id^='tGridSection-']");d.each(function(a){var b=$(this).data("from-cityname"),e=$(this).data("dest-cityname");a=$(this).children("input[id^='numberOfOvernightRails_']").length?$namespace.TranslationUtil.replaceParameters($namespace.OfferDetailsModule.TranslationTexts.TRANSPORTATION_GRID_OVERNIGHT_RAIL_SECTION_LABEL,{index:a+1,total:d.length,fromcityname:b,destcityname:e}):$namespace.TranslationUtil.replaceParameters($namespace.OfferDetailsModule.TranslationTexts.TRANSPORTATION_GRID_SECTION_LABEL,
{index:a+1,total:d.length,cityname:e});$(this).attr("aria-label",a)});"true"==$("#showFlightOnly").val()&&$("div#packageControls").hide();$('input[format-date-input="true"]',this.el).on("input",function(){utils.formatDateInput($(this))});0!=$("div[data-defaultHotelAvailable=false]").length&&($(".showPackageMsg").addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_HOTEL_NOT_AVAILABLE_MSG),$("#vpOfferPackageMessageId").addClass("showPackageWarn"),document.getElementById("vpOfferPackageMessageId").scrollIntoView());
this.setDepartureCityValues();this.packageId=$('INPUT[id="factsheetHotelId"]').val();this.searchModalAnalytics="true"==$('INPUT[id="searchModalAnalyticsFlag"]').val();this._onCloseModalClick=function(a){a.preventDefault();if(b.options.fromVpSearchWorkflow&&$("#vpOfferPackageMessageId").hasClass("showPackageWarn"))return location.href=$namespace.Configuration.webLoc,!1;this.uninitElements();this.searchModalAnalytics&&$namespace.Analytics.trackEvent("event_searchModal_Close","Close",this.packageId)}},
setDepartureCityValues:function(){var a=this.$el.find("#modalDepartureCityText"),b=a.val();_.isEmpty(b)||(a={value:a.attr("data-departure-city-code"),title:b},this._onDepartureCitySelect(a,this))},_onFlightItineraryChange:function(a){a=$(a.currentTarget).is(":checked");(this.model.includeFlight=a)?(this.flightItineraryBlock.slideDown(slideSpeed),this.departureCityText.prop("required",!0),$(".flightCheckboxChecked").show(),$(".flightCheckboxNotchecked").hide(),$(".flight-connections").css("opacity",
""),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.DEPARTURE_LABEL),$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.RETURN_LABEL)):(this.flightItineraryBlock.slideUp(slideSpeed),this.departureCityText.prop("required",!1),$(".flightCheckboxChecked").hide(),$(".flightCheckboxNotchecked").show(),$(".flight-connections").css("opacity","0.2"),$("#modalDepartureDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_IN_LABEL),
$("#modalReturnDateLabel").text($namespace.SearchWidgetsModule.TranslationTexts.CHECK_OUT_LABEL));$namespace.Analytics.trackEvent("vp_event_searchWidget","Flight",a?"Yes":"No");this.setRoomLayout();this.initFormElements();this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount();$namespace.TabOrder.updatePageTabOrder()},_onFlightTypeChange:function(a){a=$(a.currentTarget).val();this.filterFlightType(a)},_onServiceClassChange:function(a){a=$(a.currentTarget).val();
this.model.serviceClass=a;$namespace.Analytics.trackEvent("vp_event_searchWidget","Class",a)},_onNumberOfRoomsChange:function(a){a=+$(a.currentTarget).val();this.updateRoomCount(a);this.setRoomLayout();this.initFormElements();this.hidePassengersExceededPerRoomMsg();this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount();$namespace.Analytics.trackEvent("vp_event_searchWidget","Travellers","Rooms",a);$namespace.TabOrder.updatePageTabOrder()},_onMultiAdultsChange:function(a){a.preventDefault();
a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"adultCount",a);this.showPassengersExceededPerRoomMsg(b);$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Adults","Adults",a);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},_onMultiChildrenChange:function(a){a.preventDefault();a.stopPropagation();this.clearErrorAdultsChildrenPerRoom();
var b=$(a.currentTarget);a=+b.val();b=+b.attr("data-room")-1;b=this.getRoom(b);this.updateRoomProperty(b,"childCount",a);this.setRoomChildLayout(b);$namespace.TabOrder.updatePageTabOrder();this.showPassengersExceededPerRoomMsg(b);$namespace.Analytics.trackEvent("vp_event_searchWidget","pax_Children","Children",a);this.model.includeFlight?this.validateAirfarePassengerCount():this.validateWithoutAirfarePassengerCount()},setRoomChildLayout:function(a){if(a){var b=a.children,d=$namespace.Templates.vp_offer_multichild_template,
e=$.hook("child_expansion_"+a.number,this.ui.expansionContainer);if(e){e.empty();for(var f=0;f<b.length;f++){var g=a.children[f];if(g){var h=$(d({roomIndex:a.number,index:g.number}));e.append(h);h.find('.childAge[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.age);h.find('.infantSeatSelect[data-room="'+a.number+'"][data-child="'+g.number+'"]').val(g.seat);var k=this.ui.includeFlight.is(":checked");0>g.age||1<g.age||!k?h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+
'"]').hide():h.find('.col-child-seat[data-room="'+a.number+'"][data-child="'+g.number+'"]').show()}}this.initFormElements()}}},setRoomLayout:function(a){a=this.model.rooms.length;this.form.find('SELECT[id="modalNumberOfRooms"]').val(a);for(var b=[],d=[],e=[],f=[],g=0;g<a;g++){var h=this.model.rooms[g];b.push(h.adultCount);d.push(h.children.length);for(var k=0;k<h.children.length;k++)e.push(h.children[k].age),f.push(h.children[k].seat)}g=$namespace.Templates.vp_offer_multiroom_template;h=0;this.ui.expansionContainer.empty();
k=0;for(var l=1;k<a;k++,l++){var p=$(g({index:l}));this.ui.expansionContainer.append(p);this.form.find('SELECT[id="modalAdultsInRoom_'+l+'"]').val(b[k]).find("option[value="+b[k]+"]").attr("selected",!0).siblings().removeAttr("selected");this.form.find('SELECT[id="modalChildrenInRoom_'+l+'"]').val(d[k]).find("option[value="+d[k]+"]").attr("selected",!0).siblings().removeAttr("selected");var q=$namespace.Templates.vp_offer_multichild_template,r=$.hook("child_expansion_"+l,this.ui.expansionContainer);
if(r){r.empty();for(var v=parseInt(d[k]),n=0,t=1;n<v;n++,t++){p=$(q({roomIndex:l,index:t}));r.append(p);var u=+e[h],w=f[h];p.find('.childAge[data-room="'+l+'"][data-child="'+t+'"]').val(u);p.find('.infantSeatSelect[data-room="'+l+'"][data-child="'+t+'"]').val(w);w=this.ui.includeFlight.is(":checked");0>u||1<u||!w?p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').hide():p.find('.col-child-seat[data-room="'+l+'"][data-child="'+t+'"]').show();h++}}}},_onChildAgeChange:function(a){var b=
$(a.currentTarget);a=b.attr("id");var d=b.parent().attr("id");this.clearErrors([a,a+"_button",d]);a=+b.val();d=+b.attr("data-room");var e=+b.attr("data-child");b=e-1;var f=this.getRoom(d-1);d=$('.col-child-seat[data-room="'+d+'"][data-child="'+e+'"]');d.find(".select-widget");this.updateChildProperty(f,b,"age",a);-1<a&&2>a&&this.ui.includeFlight.is(":checked")?d.show():(d.hide(),this.updateChildProperty(f,b,"seat",0));$namespace.TabOrder.updatePageTabOrder()},_onChildSeatChange:function(a){var b=
$(a.currentTarget);a=+b.val();var d=+b.attr("data-room");b=+b.attr("data-child")-1;d=this.getRoom(d-1);this.updateChildProperty(d,b,"seat",a)},_onDepartureCitySelect:function(a,b){b=a.value;this.departureOutboundRoundtripSpan.text(b);this.departureInboundRoundtripSpan.text(b);var d=this.departingCityTGridSectionLastSection.attr("aria-label");try{d=d.substring(0,d.indexOf(", ")+2)+b}catch(e){}this.departingCityTGridSectionLastSection.attr("aria-label",d);this.model.departureLocationCode=a.value;this.model.departureLocationName=
$.trim(a.title);$namespace.Analytics.trackEvent("vp_event_searchWidget","Departure_City",a.value);this.loadFlightItineraryInformation()},_onDepartureCityBlur:function(a){this.clearError("#modalDepartureCityText");var b=$("#isIncludeRoundtripFlight").val(),d=$("#modalFlightType").val();b&&"Intercity"!==d&&(a=a.target.value.replace(/^\s+|\s+$/g,""),a.length&&(b=$namespace.SearchWidgetsModule.TranslationMessages,3>a.length?(a=$namespace.TranslationUtil.replaceParameters(b.SEARCH_MINIMUM_CHARACTER_REQUIRED.translatedText,
{minLength:3}),$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(a)})):this.datalistDepartureCity.hasValidSelection()||$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE.translatedText)})))},_onNumberOfNightsChange:function(a){a=$(a.currentTarget);var b=$(a);""==b.val()&&(b=b.attr("data-city-index"),0<=b&&$("#descriptionNumberOfNights_"+b).empty());b=a.attr("id");a=a.parent().attr("id");
this.clearErrors([b,b+"_button",a]);this.setReturnDate()},_onSubmitButtonFocus:function(a){$(document.body).addClass("scroll-lock")},vpSingleCityOfferFlightsIncluded:function(a){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_Destination_City",a,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_Destination_City_Depart_Date",a+"_"+this.model.departureDate,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_Destination_City_Departure_City",
a+"_"+this.model.departureLocationCode,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.packageId);$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_SingleCity","Click",this.packageId+"_"+this.model.departureDate+"_"+this.model.returnDate+"_"+this.model.departureLocationCode+"_"+this.model.rooms.length+"_"+this.adultsAndChildCounts)},vpSingleCityOfferNoFlight:function(a){$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_Destination_City",
a,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_Destination_City_Depart_Date",a+"_"+this.model.departureDate,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchModal_SingleCity_DepartureDate_ReturnDate",this.model.departureDate+"_"+this.model.returnDate,this.packageId+"_No-Flight");$namespace.Analytics.trackEvent("dp/pkg_event_searchDetails_Modal_SingleCity","Click",this.packageId+"_"+this.model.departureDate+"_"+this.model.returnDate+
"__No-Flight_"+this.model.rooms.length+"_"+this.adultsAndChildCounts)},_onSubmit:function(a){$(".showPackageMsg").text("");$("#vpOfferPackageMessageId").removeClass("showPackageWarn");$("#vpOfferPackageAirFareMessageId").removeClass("showPackageWarn");var b=$(a.currentTarget);if(this.validate()){var d=b.attr("data-package-id"),e=b.attr("data-hotel-id"),f=b.attr("data-destination"),g=b.attr("data-cityCode"),h=b.attr("data-from-menu");b.attr("data-cities");b="svp=LOAD_VP_PIMP_SEARCH_RESULTS_FOR_HOTEL";
var k="",l="",p="",q=l="",r=0;l=$("#modalServiceClassSelect").val();this.model.includeFlight&&(k=$("#modalFlightType").val(),"All"===k?r=0:"RoundTrip"===k?r=1:"Intercity"===k&&(r=2),q=this.model.departureLocationCode,k=this.model.departureLocationName,""==k&&(q=""),b=b+("&departureCity="+k)+("&departureCityCode="+q)+"&flightConnections=-1",b+="&serviceClass="+l);$("#modalNumberOfRooms").val();this.form.find("SELECT.numberOfNights").each(function(){var a=$(this).val();p+=a+","});p=p.substring(0,p.length-
1);k=this.model.rooms;q=0;var v=[],n=[],t=[];l=[];for(var u=0;u<k.length;u++){q+=k[u].adultCount+k[u].children.length;v.push(k[u].adultCount);n.push(k[u].children.length);for(var w=0;w<k[u].children.length;w++)t.push(k[u].children[w].age),l.push(k[u].children[w].seat)}this.adultsAndChildCounts=v.reduce(function(a,b){return a+b},0)+"_"+n.reduce(function(a,b){return a+b},0);this.searchModalAnalytics&&(this.model.includeFlight?this.vpSingleCityOfferFlightsIncluded(g):this.vpSingleCityOfferNoFlight(g));
b+="&packageId="+d;b+="&departureDate="+this.model.departureDate;b+="&arrivalDate="+this.model.returnDate;b+="&adults="+v.join(",");b+="&children="+n.join(",");b+="&childrenAges="+t.join(",");b+="&childSeatFlags="+l.join(",");b+="&hotelRooms="+this.model.rooms.length;b+="&includeFlightItinerary="+this.model.includeFlight;b+="&fromMenu="+h;b+="&flightChecked="+this.model.includeFlight;b+="&flightType="+r;b+="&roomInfoAvailable=true";b+="&numberOfPassengers="+q;b+="&preferredHotels="+e;b+="&numberOfNights="+
p;b+="&displayMoreSearchOption=true";b+="&destination="+f;b+="&cityCode="+g;b+="&factsheetWorkFlow=true";b+="&factsheetHotelId="+e;b+="&hotelFactsheetId="+e;var y=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("searchVacationPackage.act",b,null,null,function(a,b,d,e,f,g){this.messageCode==$namespace.ErrorCodes.PACKAGE_DATES_UNAVAILABLE?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$(document.body).addClass("scroll-lock"),a=$(".showPackageMsg"),y.searchModalAnalytics&&
$namespace.Analytics.trackEvent("Error2034_PackageUnavailable","Click",y.packageId+"_"+y.model.departureDate+"_"+y.model.returnDate+"_"+y.model.rooms.length+"_"+y.adultsAndChildCounts),a.length&&($(".showPackageMsg").addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_PACKAGE_NOT_AVAILABLE_MSG),$("#vpOfferPackageMessageId").addClass("showPackageWarn"),document.getElementById("vpOfferPackageMessageId").scrollIntoView())):this.messageCode==$namespace.ErrorCodes.FLIGHT_REQUIRED_ERROR?
($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$(document.body).addClass("scroll-lock"),a=$(".showPackageMsg"),a.length&&($(".showPackageMsg").addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_AIRFARE_IS_REQUIRED_MSG),$("#vpOfferPackageAirFareMessageId").addClass("showPackageWarn"),document.getElementById("vpOfferPackageAirFareMessageId").scrollIntoView())):this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:$namespace.SearchWidgetsModule.TranslationTexts.VP_SEARCH_NO_RESULTS_TITLE})):1==a&&""!=b||""==g?$namespace.AjaxUtil.makeAjaxCall("searchVacationPackage.act","svp=LOAD_SEARCH_POPUP_IF_FLIGHT&packageId="+b+("&departureCity="+d+"&includeFlightItinerary=true"),null,null,function(a,b,d,e){$namespace.DomUtil.createCookie("ga-po-nav","factsheet",0,"/");$namespace.Navigation.loadPage(_webLoc+"/h="+e)},null):$namespace.Navigation.loadPage(_webLoc+"/h="+g)},null)}a.preventDefault()},
loadFlightItineraryInformation:function(){var a=$("#isRoundtripFlightOptional").val(),b=$("#isIntercityFlightsOptional").val(),d=$("#isIncludeRoundtripFlight").val(),e=$("#isIncludeIntercityFlight").val(),f=$("#modalFlightType option[value='All']"),g=$("#modalFlightType option[value='RoundTrip']"),h=$("#modalFlightType option[value='Intercity']"),k=$("#modalDepartureCityText").val(),l="";f.css("display","block");g.css("display","block");h.css("display","block");f.parent().is("span")&&f.unwrap();g.parent().is("span")&&
g.unwrap();h.parent().is("span")&&h.unwrap();"true"==d&&"true"==e?"true"==a&&"true"==b?""!=k?l="All":(l="Intercity",f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>")):"true"==a&&"false"==b?""!=k?l="All":(f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>"),l="Intercity"):"false"==a&&"true"==b?(""!=k?l="All":(f.css("display","none"),g.css("display","none"),f.wrap("<span>"),g.wrap("<span>")),h.css("display","none"),h.wrap("<span>")):"false"==
a&&"false"==b&&(""!=k?l="All":(f.css("display","none"),f.wrap("<span>")),g.css("display","none"),h.css("display","none"),h.wrap("<span>"),g.wrap("<span>")):("false"==d&&"true"==e&&(f.css("display","none"),flightTypeRoundtrip.css("display","none"),f.wrap("<span>"),g.wrap("<span>"),h.css("display","block"),h.parent().is("span")&&h.unwrap(),l="Intercity"),"false"==e&&"true"==d&&(f.css("display","none"),g.css("display","block"),h.css("display","none"),f.wrap("<span>"),h.wrap("<span>"),g.parent().is("span")&&
g.unwrap(),l="RoundTrip"));$("#select_flight_type").get(0).selectWidget.selectItem(l);this.filterFlightType(l)},filterFlightType:function(a){var b=this.$(".flight-table"),d=this.$(".flight-note");"All"===a&&(b.removeClass("inactive").filter(".flighttype-none").addClass("inactive"),d.removeClass("inactive"));"RoundTrip"===a&&(b.addClass("inactive").filter(".flighttype-roundtrip").removeClass("inactive"),d.addClass("inactive").filter(".flighttype-roundtrip").removeClass("inactive"));"Intercity"===a&&
(b.addClass("inactive").filter(".flighttype-intercity").removeClass("inactive"),d.addClass("inactive").filter(".flighttype-intercity").removeClass("inactive"))},setReturnDate:function(){for(var a=0,b=0,d=this.selectNumberOfNightsWidgets.length;b<d;b++)a+=Number(this.selectNumberOfNightsWidgets[b].val());a+=Number(this.numberOfOvernightRail);this.departureDate&&this.returnDate&&(this.clearErrors(["#modalDepartureDate","#modalReturnDate","#vacationPackageModalWidgetDates"]),this.totalNights=a,this.model.returnDate=
$namespace.DateUtil.getDateAsString(this.returnDate.date),this.ui.returnDate.val($namespace.DateUtil.getDateAsString(this.returnDate.date,this.localeDateFormat)),this.formatNumberOfNightDescriptions())},setNumberOfNights:function(){moment(this.departureDate.date);moment(this.returnDate.date);var a=0,b=this.selectNumberOfNightsWidgets.length;this.totalNights=Math.round((this.returnDate.date-this.departureDate.date)/864E5);for(var d=0;d<b;d++)a+=Number(this.selectNumberOfNightsWidgets[d].val());a+=
Number(this.numberOfOvernightRail);if(this.totalNights>a){var e=(this.totalNights-a)%b;b=Math.floor((this.totalNights-a)/b);for(d=0;d<this.selectNumberOfNightsWidgets.length&&(0<b||0<e);d++){a=Number(this.selectNumberOfNightsWidgets[d].val());var f=b;0<e&&(e--,f++);isNaN(a)||(f+=a);var g=$("#modalNumberOfNights_"+d).children("option").length,h=$("#modalNumberOfNights_"+d).children("option")[1].value;g=$("#modalNumberOfNights_"+d).children("option")[g-1].value;f>=Number(h)&&f<=Number(g)?this.selectNumberOfNightsWidgets[d].val(String(f)):
this.selectNumberOfNightsWidgets[d].val("")}}else for(e=a-this.totalNights,d=0;0<e;d++)d==b&&(d=0),a=Number(this.selectNumberOfNightsWidgets[d].val()),isNaN(a)||(a--,g=$("#modalNumberOfNights_"+d).children("option").length,h=$("#modalNumberOfNights_"+d).children("option")[1].value,g=$("#modalNumberOfNights_"+d).children("option")[g-1].value,a>=Number(h)&&a<=Number(g)?this.selectNumberOfNightsWidgets[d].val(String(a)):this.selectNumberOfNightsWidgets[d].val("")),e--;this.formatNumberOfNightDescriptions()},
formatNumberOfNightDescriptions:function(){for(var a=0,b,d,e,f,g,h,k=0,l=0;l<this.selectNumberOfNightsWidgets.length;l++)b=moment(this.departureDate.date).add(a,"days"),d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),$("#numberOfOvernightRails_"+l).length&&(this.descriptionOvernightRail.eq(k).html('<abbr title="'+e+'">'+b+"</abbr><br />"+d).show(),k+=1,a+=1),(d=Number(this.selectNumberOfNightsWidgets[l].val()))?
1===d?(b=moment(this.departureDate.date).add(a,"days"),a+=d,d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),this.descriptionNumberOfNights.eq(l).html('<abbr title="'+e+'">'+b+"</abbr><br />"+d).show()):(b=moment(this.departureDate.date).add(a,"days"),a+=d,f=moment(this.departureDate.date).add(a-1,"days"),d=$namespace.DateUtil.getDateAsString(b.toDate(),this.localeDateFormat),
e=$namespace.DateUtil.getDayOfWeek(b.toDate()),b=$namespace.DateUtil.getDateAsString(b.toDate(),"ddd"),g=$namespace.DateUtil.getDateAsString(f.toDate(),this.localeDateFormat),h=$namespace.DateUtil.getDayOfWeek(f.toDate()),f=$namespace.DateUtil.getDateAsString(f.toDate(),"ddd"),this.descriptionNumberOfNights.eq(l).html('<abbr title="'+e+'">'+b+'</abbr> - <abbr title="'+h+'">'+f+"</abbr><br />"+d+" - "+g).show()):this.descriptionNumberOfNights.eq(l).empty()},getTotalPassengerCount:function(){for(var a=
0,b=0;b<this.model.rooms.length;b++)a+=this.model.rooms[b].adultCount,a+=this.model.rooms[b].children.length;return a},showPassengersExceededPerRoomMsg:function(a){var b=!1,d=a.adultCount;a=a.children.length;4<d?b=!0:5<d+a&&(b=!0);d=$(".showHotelExceedsMsg");d.length&&(b?(d.addClass("no-outline").text($namespace.OfferDetailsModule.TranslationTexts.WARNING_NO_OF_TRAVELLERS_PER_ROOM_MSG),$("#vpOfferRoomMessageId").addClass("showHotelExceedsWarn"),document.getElementById("vpOfferRoomMessageId").scrollIntoView()):
this.hidePassengersExceededPerRoomMsg())},hidePassengersExceededPerRoomMsg:function(){for(var a=!0,b=0;b<this.model.rooms.length;b++){var d=this.model.rooms[b].adultCount,e=this.model.rooms[b].children.length;if(4<d||5<d+e)a=!1}a&&($(".showHotelExceedsMsg").text(""),$("#vpOfferRoomMessageId").removeClass("showHotelExceedsWarn"))},validateAirfarePassengerCount:function(){var a=$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#vp_offer_passengers_per_room_div_1 #vp_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));
if(9<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITH_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["vp_offer_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validateWithoutAirfarePassengerCount:function(){var a=
$namespace.SearchWidgetsModule.TranslationMessages;this.clearErrors("#vp_offer_passengers_per_room_div_1 #vp_offer_passengers_per_room_div_2 #select_adults_in_room_1 #select_adults_in_room_2 #select_children_in_room_1 #select_children_in_room_2".split(" "));if(10<this.getTotalPassengerCount()){for(var b=1;b<=this.model.rooms.length;b++){var d={},e=a.VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR,f="select_adults_in_room_"+b,g="select_children_in_room_"+b;d["vp_offer_passengers_per_room_div_"+b]=$namespace.MessageUtil.prefixError(e.translatedText);
d[f]="";d[g]="";$namespace.Utils.showErrors(d)}$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e.sourceText));return!1}return!0},validate:function(){this.clearErrors();var a=!0,b=$namespace.SearchWidgetsModule.TranslationMessages;if(this.model.includeFlight){var d=$("#isIncludeRoundtripFlight").val(),e=$("#modalFlightType").val(),f=$("#modalDepartureCityText").val();""===f&&(this.model.departureLocationCode="",this.model.departureLocationName=
"");""!==f&&this.datalistDepartureCity.hasValidSelection()||!d||"Intercity"===e||(d=b.DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE,$namespace.Utils.showErrors({modalDepartureCityText:$namespace.MessageUtil.prefixError(d.translatedText)}),$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(d.sourceText)),a=!1);this.validateAirfarePassengerCount()||(a=!1);if("true"==$("#showFlightOnly").val())return this.validateDates(!1)||(a=!1),a||$namespace.Utils.focusFirstErrorField(this.form),
a}else this.validateWithoutAirfarePassengerCount()||(a=!1);d=0;for(e=1;d<this.model.rooms.length;d++,e++)this.form.find('SELECT.childAge[data-room="'+e+'"]').each(function(){var d=$(this);if(-1==d.val()){var e={},f=b.VP_CHILD_AGE_REQUIRED;d.attr("id");d=d.parent().attr("id");e[d]=$namespace.MessageUtil.prefixError(f.translatedText);$namespace.Utils.showErrors(e);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(f.sourceText));a=!1}});this.form.find("SELECT.numberOfNights").each(function(){var d=
$(this);if(""==d.val()){var e=d.attr("data-city-name"),f={};e=$namespace.TranslationUtil.replaceParameters(b.VP_SELECT_NUMBER_OF_NIGHTS_FOR_CITY_MESSAGE.translatedText,{cityName:e});d.attr("id");d=d.parent().attr("id");f[d]=$namespace.MessageUtil.prefixError(e);$namespace.Utils.showErrors(f);$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(e));a=!1}});this.validateDates(!1)||(a=!1);a||$namespace.Utils.focusFirstErrorField(this.form);return a},
transformer:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},initElements:function(){this.ui={};this.ui.expansionContainer=$.hook("multiroom-expansion",this.el);this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.form=this.$("form#formPriceAndAvailability");
this.submitButton=this.$("#actionButton");this.flightItineraryBlock=this.$("#flightItineraryBlock");this.departureCityText=this.$("#modalDepartureCityText");this.departureOutboundRoundtripSpan=this.$("#departureOutboundRoundtripSpan");this.departureInboundRoundtripSpan=this.$("#departureInboundRoundtripSpan");this.departingCityTGridSectionLastSection=this.$("#tGridSection-last");this.descriptionNumberOfNights=this.$(".description-number-of-nights");this.descriptionOvernightRail=this.$(".description-overnight-rail");
this.ui.includeFlight=this.form.find("#modalFlightItineraryCheckbox");this.model={departureDate:"",returnDate:"",includeFlight:"",departureLocationCode:"",departureLocationName:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};var a=$namespace.DomUtil.readCookie("Csrf-token");this.datalistDepartureCity=new $namespace.Widgets.DataListWidget(this.$("#input_departure_city"),{url:"searchHelper.act",parser:utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureCitySelect,this),
onLocationBlur:$.proxy(this._onDepartureCityBlur,this),dataTransform:this.transformer,noResultsText:$namespace.SearchWidgetsModule.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":a},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});a=this.$(".select-widget.select-number-of-nights");this.selectNumberOfNightsWidgets=[];for(var b=0;b<a.length;b++)this.selectNumberOfNightsWidgets[b]=new widgets.SelectWidget(a.eq(b),{taborder:"document"});this.model.includeFlight=this.ui.includeFlight.is(":checked");
this.initDateWidgets();this.setRoomLayout();this.initFormElements();$(window).on("resize."+this.namespace,$.proxy(this.resize,this));$(window).on("orientationchange."+this.namespace,$.proxy(this.resize,this));this.resize()},initFormElements:function(){this.undelegateEvents();var a=this.$(".select-widget:not(.initialized)");this.selectWidgets=[];for(var b=0;b<a.length;b++)this.selectWidgets[b]=new widgets.SelectWidget(a.eq(b),{taborder:"document"});this.delegateEvents()},getRoom:function(a){return this.model.rooms&&
this.model.rooms.length>a?this.model.rooms[a]:null},updateRoomChildren:function(a,b){if(a)if(a=a.children,a.length<b)for(;a.length<b;)a.push({index:a.length,number:a.length+1,age:-1,seat:0});else for(;a.length>b;)a.pop()},updateRoomCount:function(a){var b=this.model.rooms;if(b.length<a)for(;b.length<a;)b.push({index:b.length,number:b.length+1,adultCount:2,children:[]});else for(;b.length>a;)b.pop()},updateRoomProperty:function(a,b,d){if(a)switch(b){case "adultCount":a.adultCount=parseInt(d);break;
case "childCount":this.updateRoomChildren(a,d)}},updateChildProperty:function(a,b,d,e){if(a&&(a=a.children.length>b?a.children[b]:null))switch(d){case "age":a.age=parseInt(e);break;case "seat":a.seat=e}},setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate&&this.returnDate.date&&this.departureDate.date?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&
(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate&&this.departureDate.date?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&this.returnDate.date&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());var d=this.ui.returnDate.val();this.ui.returnDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.returnDate.val(d)},clearError:function(a){this.clearErrors([a])},
clearErrorAdultsChildrenPerRoom:function(){for(var a=[],b=1;b<=this.model.rooms.length;b++){var d="vp_offer_passengers_per_room_div_"+b,e="modalAdultsInRoom_"+b,f="modalChildrenInRoom_"+b;a.push(e+"_button");a.push(e);a.push(f+"_button");a.push(f);a.push(d)}this.clearErrors(a)},clearErrors:function(){var a=[];if(arguments.length)a=arguments[0];else{a.push("#modalDepartureDate");a.push("#modalReturnDate");a.push("#vacationPackageModalWidgetDates");for(var b=0,d=1;b<this.model.rooms.length;b++,d++)for(var e=
this.form.find('SELECT.childAge[data-room="'+d+'"]'),f=0,g=1;f<e.length;f++,g++){var h=$(e[f]),k=h.attr("id");h=h.parent().attr("id");a.push(k+"_button");a.push(k);a.push(h)}for(b=1;b<=this.model.rooms.length;b++)h="vp_offer_passengers_per_room_div_"+b,f="modalAdultsInRoom_"+b,g="modalChildrenInRoom_"+b,a.push(f+"_button"),a.push(f),a.push(g+"_button"),a.push(g),a.push(h);b=this.form.find("SELECT.numberOfNights");f=0;for(g=1;f<b.length;f++,g++)h=$(b[f]),k=h.attr("id"),h=h.parent().attr("id"),a.push(k+
"_button"),a.push(k),a.push(h)}$namespace.Utils.clearErrors(a,this.ui.form)},validateDates:function(a){var b=!0,d=$namespace.SearchWidgetsModule.TranslationMessages;a=arguments.length?a?!0:!1:!0;this.clearErrors(["#modalDepartureDate","#modalReturnDate","#vacationPackageModalWidgetDates"]);var e=this.ui.departureDate.val(),f=this.ui.returnDate.val(),g=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat),h=$namespace.DateUtil.isValidDateString(f,this.localeDateFormat);g&&!g.isPastDate?(this.ui.departureDate.datepicker("setDate",
g.date),this.model.departureDate=$namespace.DateUtil.getDateAsString(g.date),this.departureDate={className:"departure",date:g.date},g=$namespace.DateUtil.addDaysToDate(g.date,1),this.ui.returnDate.datepicker("option",{suspendAutoUpdate:!0,minDate:g}),this.lastDepartureDate!=this.model.departureDate&&$namespace.Analytics.trackEvent("vp_event_searchWidget","Depart",this.model.departureDate),this.lastDepartureDate=this.model.departureDate,$namespace.TabOrder.updatePageTabOrder()):(this.departureDate=
null,this.model.departureDate="",this.ui.returnDate.datepicker("option",{minDate:$namespace.DateUtil.getDateDaysFromToday(1),suspendAutoUpdate:!0}));h&&!h.isPastDate?(this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!0,suspendAutoUpdate:!0}),this.ui.returnDate.datepicker("setDate",h.date),this.ui.returnDate.datepicker("option",{suspendDateRestrictions:!1,suspendAutoUpdate:!0}),this.model.returnDate=$namespace.DateUtil.getDateAsString(h.date),this.returnDate={className:"return",date:h.date},
this.lastReturnDate!=this.model.returnDate&&$namespace.Analytics.trackEvent("vp_event_searchWidget","Return",this.model.returnDate),this.lastReturnDate=this.model.returnDate):(this.model.returnDate="",this.returnDate=null);this.departureDate&&this.returnDate?(f=$namespace.DateUtil.getDifferenceInDays(this.departureDate.date,this.returnDate.date),1>f?(b=d.VP_DATE_TIME_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),modalDepartureDate:"",
modalReturnDate:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1):30<f&&(b=d.VP_DATE_RANGE_ERROR,$namespace.Utils.showErrors({vacationPackageModalWidgetDates:$namespace.MessageUtil.prefixError(b.translatedText),modalDepartureDate:"",modalReturnDate:""}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1)):(this.departureDate||!e.length&&
a||(b=d.VP_INVALID_DEPARTURE,$namespace.Utils.showErrors({modalDepartureDate:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),b=!1),this.returnDate||!f.length&&a||(b=d.VP_INVALID_RETURN,$namespace.Utils.showErrors({modalReturnDate:$namespace.MessageUtil.prefixError(b.translatedText)}),a||$namespace.Analytics.trackPageView("/er/errorCode/"+$namespace.MessageUtil.formatErrorMessageForAnalytics(b.sourceText)),
b=!1));return b},initDateWidgets:function(){var a=this,b=$namespace,d=b.DateUtil;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();var e=function(b,d){b=$(b);b=/departure/i.test(b.attr("id"));d.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(b?"depart":"return"));a.setReturnDateCalendarDisplayMonth()},f=function(e){var f=/departure/i.test($(this).attr("id"));f=$("#"+(f?"modalReturnDate":"modalDepartureDate")).datepicker("getDate");
f=null===f||0!=d.getDifferenceInDays(e,f)?"":"date-highlight";var g=b.SearchWidgetsModule.getAccessibleDateLabel(e);null!=a.departureDate&&0==d.getDifferenceInDays(e,a.departureDate.date)?g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:g}):null!=a.returnDate&&0==d.getDifferenceInDays(e,a.returnDate.date)&&(g=b.TranslationUtil.replaceParameters(b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:g}));e=b.DateUtil.enhanceDateStringReadability(g);
return[!0,f,g,e]},g=function(b,d){var e=a.validateDates();(b=d&&d.input?d.input.attr("id"):b&&b.tagName?b.getAttribute("id"):null)&&/departure/i.test(b)&&a.setReturnDate();e&&a.departureDate&&a.returnDate&&a.setNumberOfNights()},h=b.DateUtil.getDateDaysFromToday(0),k=b.DateUtil.getDateDaysFromToday(1);this.departureDate&&(k=b.DateUtil.addDaysToDate(this.departureDate.date,1));this.ui.departureDate=this.form.find("#modalDepartureDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),
beforeShow:e,beforeShowDay:f,inline:!0,minDate:h,defaultDate:h,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
this.ui.returnDate=this.form.find("#modalReturnDate").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:e,beforeShowDay:f,minDate:k,minDateDefault:k,defaultDate:k,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:b.Config.DAY_SHORT_NAMES,monthNames:b.Config.MONTH_NAMES,onClose:g,showOn:"button",showAnim:"",buttonImage:b.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:b.SearchWidgetsModule.TranslationTexts.RETURN_DATE_CALENDAR_LABEL,
alignRight:!0,prevText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:b.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});e=$("#modalDepartureDate, #modalReturnDate");this.floatPlaceholders=[];e.each(function(b,d){a.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});e.on("blur",function(){$(this).datepicker("widget").is(":visible")||g(this)}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),
b.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#price_availability_modal div.date-widget").addClass("ctc-jqui");e=$("#modalDepartureDate").val();this.departureDate={className:"departure",date:$namespace.DateUtil.getDateFromString(e,
this.localeDateFormat)};this.setReturnDate()},resize:function(){var a=$namespace.SearchWidgetsModule.getWindowDimensions();if(this.win.height!=a.height||this.win.width!=a.width)this.form.find("#modalDepartureDate,#modalReturnDate").datepicker("hide"),this.win=a;a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;var b=this.form.find('INPUT[id="modalDepartureDate"]'),d=this.form.find('INPUT[id="modalReturnDate"]');b.length&&d.length&&(b.prop("readonly",a),d.prop("readonly",a),b[0].onselectstart=
a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null)},uninitElements:function(){this.win=this.model=this.ui=this.submitButton=this.form=null;$(window).off("resize."+this.namespace);$(window).off("orientationchange."+this.namespace);this.datalistDepartureCity.destroyUI();this.lastReturnDate=this.lastDepartureDate=this.datalistDepartureCity=null;for(var a=0;a<this.selectNumberOfNightsWidgets.length;a++)this.selectNumberOfNightsWidgets[a]=null;this.selectNumberOfNightsWidgets=null;for(a=
0;a<this.selectWidgets.length;a++)this.selectWidgets[a]=null;this.selectWidgets=null}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};breakpoint=utils.Breakpoint;delay=500;$namespace.View=$namespace.View||{};
$namespace.View.InfoBarView=Backbone.View.extend({el:'[data-hook="info-bar"]',events:{'click [data-hook="go_back"]':"_onBackLink",'click [data-hook="vp_jdc_addons_go_back"]':"_onGoBackFromAddOnsClick"},initialized:!1,backButton:null,stickybarHeight:0,initialize:function(a){var b=this;a.module&&(this.module=a.module);a.accordionClassToActivate&&(this.accordionClassToActivate=a.accordionClassToActivate);this.stickybar=this.$el.find('[data-hook="sticky-bar"]');this.page=$("#page_content");this.isOpen=
!1;this.stickybar.find('[data-hook="accordionMenu"]').each(utils.eachUninitialized(function(a,e){e.accordionMenu=new $namespace.Widgets.AccordionMenu(a);a.on(e.accordionMenu.events.openEventStart,function(a,d){d.hasClass("main-item")&&b.mainItemOpen();b.onOpen(a)});a.on(e.accordionMenu.events.closeEventStart,function(a,d){d.hasClass("main-item")&&b.mainItemClose();b.onClose(a)});a.on(e.accordionMenu.events.closeEventEnd,function(a,b){b.hasClass("main-item")&&(a=b.find("div.accordion-item.active"),
a.length&&a.find("span[role='button']").click())})}));0<$.hook("accordionMenu").length&&(this.minScrollHeight=this.$el.offset().top,this.scrollTop=0,this.window=$(window),this.body=$(document.body),this.accordion=this.$el.find(".accordion").first(),this.classes={expanded:"expanded",invisible:"invisible",scrollLock:"scroll-lock"},this.window.on("resize",$.proxy(this._onResize,this)),this.window.on("orientationchange",$.proxy(this._onOrientationchange,this)),this.$el.addClass("initialized"));this.accordionClassToActivate&&
$(this.accordionClassToActivate).addClass("accordion-item-current");this.initialized=!0;utils.Breakpoint.isMobile()||(a=$.hook("info-bar"),a.css("min-height",a.height()+"px"))},_onBackLink:function(a){$(a.target).data("state")?"default"==$(a.target).data("state")&&window.history.back():window.history.back()},_onGoBackFromAddOnsClick:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act","tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW&vpJdcAddonsFlowEnabled=false",
null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null)},close:function(){},_displayBackButton:function(a){var b=this.$el.find(".info-bar-links-left .btn-back");1==b.length&&(a?b.show():b.hide())},_displayContinueButton:function(a){var b=this.$el.find(".info-bar-links-right .btn-continue");1==b.length&&(a?b.show():b.hide())},onOpen:function(a){$(a.target).is(this.accordion)&&(this.window.scrollTop()<this.minScrollHeight&&
this.window.scrollTop(this.$el.position().top+1),this.scrollTop=this.window.scrollTop(),this.$el.addClass(this.classes.expanded),this.body.addClass(this.classes.scrollLock),this.page.addClass(this.classes.invisible),setTimeout(function(){this.window.scrollTop()<this.minScrollHeight&&this.window.scrollTop(this.$el.position().top+1)}.bind(this),delay));breakpoint.isWidescreen()||this.setStickybarHeight()},onClose:function(a){$(a.target).is(this.accordion)&&(this.$el.removeClass(this.classes.expanded),
this.body.removeClass(this.classes.scrollLock),this.page.removeClass(this.classes.invisible),this.window.scrollTop(this.scrollTop),this.scrollTop=0);this.stickybar.css("height","")},mainItemOpen:function(){this._displayBackButton(!1);this._displayContinueButton(!1);this.page.attr("aria-hidden","true");$("footer, header, #skipDiv").attr("aria-hidden","true");this.stickybar.addClass("sticky-bar-accordion-menu");this.stickybarHeight=this.stickybar.height();this.isOpen=!0},mainItemClose:function(){this._displayBackButton(!0);
this._displayContinueButton(!0);this.page.removeAttr("aria-hidden");$("footer, header, #skipDiv").removeAttr("aria-hidden");this.stickybar.removeClass("sticky-bar-accordion-menu");self.stickybarHeight=0;this.isOpen=!1},_onResize:function(a){this.isOpen&&breakpoint.isWidescreen()&&this.accordion.find(".accordion-button").first().click();this.isOpen&&!breakpoint.isWidescreen()&&this.setStickybarHeight()},_onOrientationchange:function(a){breakpoint.isWidescreen()||setTimeout(function(){this.stickybar.css("height",
"");this.stickybarHeight=this.stickybar.height();this.window.scrollTop(this.$el.position().top+1)}.bind(this),delay)},setStickybarHeight:function(){setTimeout(function(){this.stickybar.find(".info-bar-details").height()>this.stickybarHeight&&this.stickybar.height(this.stickybarHeight-1)}.bind(this),delay)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};$namespace.View=$namespace.View||{};breakpoint=utils.Breakpoint;
$namespace.View.TransportationView=Backbone.View.extend({el:"#transportationResults",events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click [data-hook="continue_button"]':"_onContinueClick",'click [data-hook="continue_add_ons_button"]':"_onContinueAddOnsClick",'click a[data-hook="car-details-in-matrix"]':"_onCarCategoryClick",'click a[data-hook="select_rental_car"]':"_onSelectCarClick",
'click a[data-hook="select_shuttle_transfer"]':"_onSelectShuttleClick",'click a[data-hook="keep-current-car-toggle"]':"_onKeepCurrentCarSelection",'click [data-hook="modify_transportation_details"]':"_onModifyDetailsClick",'click [data-hook="edit_vp_jdc_car_pickup_dropoff_details"]':"_onEditDetailsVPJDCPickUpDropOffClick",'click [data-hook="save_vp_jdc_car_pickup_dropoff_details"]':"_saveVPJDCCARPickupDropOffModifyDetails",'click [data-hook="vp_jdc_pickup_dropoff_edit_cancel"]':"_onCancelVPJDCPickUpDropOffClick",
'click [data-hook="mobile_grid"] [data-hook="cancel_rental_car"]':"_onCancelRentalCar",'click [data-hook="update_modify_details"]':"_updateModifyDetails",'change [data-hook="ChangeAvailableAirport"]':"_changeAvailableAirportChange",'focus [id="ChangeAvailableAirport"]':"_availableAirportFocusIn",'blur [id="ChangeAvailableAirport"]':"_availableAirportFocusOut",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick",'click a[data-hook="go_to_theme_park"]':"_onEditThemeParkLinkClick",
'click [data-hook="remove_rental_car"]':"_removeSelectedTransportationItem","click #vp2_car_category_item_terms_conditions":"_onTermsConditionsClick",'click a[data-hook="jdc_addons_change_rental_car"]':"_onGoBackFromAddOnsClick",'click [data-hook="continue_to_details_button"]':"_onContinueToDetailsClick"},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.jdcAddonsViewButtonClick="false";this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});
$("#car-matrix").hide();a=$("#vp-jdc-car-addons-page-viewbale-flag").val();"true"===$("#vp-jdc-car-details-page-viewbale-flag").val()?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),this._loadJDCCarDetailsSection()):"true"===a&&($namespace.DomUtil.setElementLoadingMask(!0,null,!1),this._loadJDCAddonsAndCarSection());$('a[data-hook="change_rental_car"]').click(function(){var a=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Change_Car","Click",a,null);a="vptr=SHOW_ADDITIONAL_CAR_RESULTS&uid="+
$("#car-matrix").data("car-product-uid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){if(""!=this.responseText){$("#car-matrix").html(this.responseText);$("#hideformatrix").hide();$("#car-matrix").show();$namespace.Utils.Breakpoint.isMobile()||$(".active").attr({"aria-expanded":"true","aria-current":"true"});$("#car-details").hide();$("#hideModify").show();var a=$('[data-hook="mobile_grid"]');
a.empty();$('[data-mobile="true"]').each(function(b,d){b=d.cloneNode(!0);$(b).removeAttr("aria-owns");a.append(b);$(d).removeAttr("aria-label");$(d).find(".car-price").removeAttr("aria-hidden");$(d).find(".text-nochange").removeAttr("aria-hidden")});var b=$(".desktop-grid .card-selected-details").last(),d=$(b).find('.hide-mobile [data-hook="select_rental_car"]').attr("id"),h=$(b).find(".hide-mobile .callToBookLink").attr("id");b=$(b).find('[data-hook="additionalInformation"]').attr("id");var k=d||
h?d?d:h:b;var l;$('.desktop-grid a[data-tabaftersummary="yes"]').each(function(a,b){l?$(b).attr("data-tab-after",l):$(b).attr("data-tab-after",k);l="selectedRowCell"+a;$(b).attr("id",l)});$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isMobile()?($('[data-hook="car-details-in-matrix"]').first().focus(),$('[data-hook="update_modify_details"]').addClass("hide-mobile")):$('.desktop-grid [data-hook="car-details-in-matrix"]').first().focus();$namespace.DomUtil.setElementLoadingMask(!1,
null,!1)}$(".carcategoryname1").focus()},null,"")});$(window).on("resize orientationchange",$.proxy(this._onResize,this));var b=$('[data-hook="mobile_grid"]');b.empty();$('[data-mobile="true"]').each(function(a,e){a=e.cloneNode(!0);b.append(a)});$('[data-hook="rental-car-summary"]').each(function(a,e){b.append(e.cloneNode(!0))});$('[data-multicar="false"]').each(function(a,b){$(b).removeAttr("aria-label")});$namespace.Utils.Breakpoint.isMobile()&&($("#gridOnlyKeepCurrentSelection").hide(),$(".mobile-grid").removeClass("sp-bot-5"),
$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="mobile_grid"] [data-hook="car-details-in-matrix"] [aria-hidden="true"]').each(function(a,b){$(b).removeAttr("aria-hidden")}));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);$("#pickupPointList").val($("#oldValue").val());0!=$("div[id = transportResultArrivalTransfer]").length||$("#TransferItemTypeArrivalTransfer").length||($("[id = DepartureTransferUnavailable]").hide(),$("#ArrivalTransferUnavailable").show());
0!=$("div[id = transportResultDepartureTransfer]").length||$("#TransferItemTypeDepartureTransfer").length||($("[id = ArrivalTransferUnavailable]").hide(),$("#DepartureTransferUnavailable").show());1==$("div[id = transportResultDepartureTransfer]").length&&1==$("div[id = transportResultArrivalTransfer]").length&&($("[id = ArrivalTransferUnavailable]").hide(),$("[id = DepartureTransferUnavailable]").hide());0!=$("div[id = transportResultArrivalTransfer]").length||$("#TransferItemTypeArrivalTransferAdditionalOptions").length||
($("[id = DepartureTransferUnavailableAdditionalOptions]").hide(),$("#ArrivalTransferUnavailableAdditionalOptions").show());0!=$("div[id = transportResultDepartureTransfer]").length||$("#TransferItemTypeDepartureTransferAdditionalOptions").length||($("[id = ArrivalTransferUnavailableAdditionalOptions]").hide(),$("#DepartureTransferUnavailableAdditionalOptions").show());1==$("div[id = transportResultDepartureTransfer]").length&&1==$("div[id = transportResultArrivalTransfer]").length&&($("[id = ArrivalTransferUnavailableAdditionalOptions]").hide(),
$("[id = DepartureTransferUnavailableAdditionalOptions]").hide())},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("Transportation_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("Transportation_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("Transportation_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?
$namespace.Analytics.trackEvent("Transportation_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("Transportation_Results_Activities","Click","Expand")},_loadImageOnAjax:function(){$("img[carImage]").removeAttr("initialized").removeAttr("altsrcattempted");$namespace.ImageUtil.initImages()},_onResize:function(){$namespace.Utils.Breakpoint.isMobile()?(0==$('[data-hook="mobile_grid"] [data-hook="category-selected"]').length||$('[data-hook="mobile_grid"] [data-hook="category-selected"]').hasClass("hide-mobile")||
($("#gridOnlyKeepCurrentSelection").hide(),$(".mobile-grid").removeClass("sp-bot-5"),$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="keep-current-car-toggle"]').addClass("hide-mobile")),$("#midifyDetailsButton").addClass("custom-pad-t-m-20")):($("#gridOnlyKeepCurrentSelection").show(),$(".mobile-grid").addClass("sp-bot-5"),$("#car-matrix").addClass("sp-bot-6"),$("#timeNotSelectedErrorMessage")?$("#midifyDetailsButton").removeClass("custom-pad-t-m-20"):$("#midifyDetailsButton").addClass("custom-pad-t-m-20"));
$('[data-multicar="false"]').each(function(a,b){$(b).removeAttr("aria-label")});$namespace.TabOrder.updatePageTabOrder();this._loadImageOnAjax()},_onCancelRentalCar:function(){$('[data-hook="mobile_grid"] [data-mobile="true"]').each(function(a,b){$(b).removeClass("hide-mobile");$(b).removeClass("active")});$('[data-hook="mobile_grid"] [data-hook="category-selected"]').addClass("hide-mobile");$("#gridOnlyKeepCurrentSelection").show();$(".mobile-grid").addClass("sp-bot-5");$("#car-matrix").addClass("sp-bot-6");
$('[data-hook="keep-current-car-toggle"]').removeClass("hide-mobile")},_onKeepCurrentCarSelection:function(a){$("#car-matrix").hide();$("#hideformatrix").show();$("#car-details").hide();$("#hideModify").show();$(window).scrollTop(0);$namespace.Utils.Breakpoint.isMobile()&&$('[data-hook="update_modify_details"]').addClass("hide-mobile")},_onSelectCarClick:function(a){var b=a.currentTarget.dataset.relativevalue,d=a.currentTarget.dataset.categorystatuswithpriceUid;$("#car-matrix").data("selectedCarCategory");
a=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Select","Click",a,null);0==b?($("#car-matrix").hide(),b="vptr=CHANGE_CAR_CATEGORY_ITEM&uid="+d,a=$("#packageId").val(),$namespace.Analytics.trackEvent("VP_Transportation","Click",a,null),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,null,function(){$("#mainContent").html(this.responseText);$(window).scrollTop(0);$namespace.Application.initializeOnMainContentReload();$namespace.TabOrder.updatePageTabOrder()},
null,""),$("#hideformatrix").show()):this._showConfirmationModal(d)},_onSelectShuttleClick:function(a){var b=a.currentTarget.dataset.relativevalue,d=a.currentTarget.dataset.cityuid,e=a.currentTarget.dataset.transferdaytourid;a=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Select","Click",a,null);0==b?(b="vptr=CHANGE_TRANSFER_ITEM_FOR_SINGLE_CITY&uid="+d+("&transferDayTourId="+e),a=$("#packageId").val(),$namespace.Analytics.trackEvent("VP_Transportation","Click",a,null),
$(window).scrollTop(0),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());$namespace.TabOrder.updatePageTabOrder();$(".transportationCard").focus()},null),$("#transportationResults").show()):
this._showShuttleConfirmationModal(d,e)},_showShuttleConfirmationModal:function(a,b){var d=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=SHOW_CAR_PRICE_CHANGE_CONFIRMATION&uid="+a+("&transferDayTourId="+b),null,null,function(){var e=new $namespace.Widgets.Confirm(this.responseText,function(){var e="vptr=CHANGE_TRANSFER_ITEM_FOR_SINGLE_CITY&uid="+a;e+="&transferDayTourId="+b;var g=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation","Click",
g,null);d._triggerAnalyticsForTransportationChange();$(window).scrollTop(0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",e,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());$namespace.TabOrder.updatePageTabOrder();$(".transportationCard").focus()},null);$("#transportationResults").show()},
function(){e.hide()});e.show()},null,"")},_triggerAnalyticsForTransportationChange:function(){var a=$('INPUT[id="eventLabelId"]').val(),b=$('INPUT[id="carTypeId"]').val(),d=$('INPUT[id="carBrandId"]').val();d=a+"/"+b+"/"+d;var e=$('INPUT[id="selectedTransferUid"]').val(),f=$('INPUT[id="carRemovableId"]').val();$('INPUT[id="displaySelectedItemsOnly"]').val();"false"==e?$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_NoneToTransfer","Click",a,null):"false"==f&&"undefined"!=b&&"true"==
e?$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_CarToTransfer","Click",d,null):"true"==f&&"undefined"!=b&&"true"==e&&$namespace.Analytics.trackEvent("dp/pkg_Transportation_Change_RemoveCar","Click",d,null)},_changeShuttleOrCoupon:function(a,b){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=CHANGE_TRANSFER_ITEM_FOR_SINGLE_CITY&uid="+a+("&transferDayTourId="+b),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload())},null,"");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$("#transportationResults").show();$("#includedTransportationCard").focus()},_changeCarCategory:function(a){$("#car-matrix").hide();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=CHANGE_CAR_CATEGORY_ITEM&uid="+a,null,null,function(){$("#mainContent").html(this.responseText);$namespace.Application.initializeOnMainContentReload()},
null,"");$("#hideformatrix").show();$("#includedTransportationCard").focus()},_onCarCategoryClick:function(a){$(a.currentTarget);var b="vptr=SHOW_ADDITIONAL_CAR_RESULTS&uid="+a.currentTarget.dataset.productUid;b=b+"&displaySelectedItemsOnly=false&cityCounter=1&expandedCarCategoryItemUid="+a.currentTarget.dataset.categorystatuswithpriceUid;$("#car-matrix-add-tran").length&&(b+="&isAdditionalTransportationOption=true");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",
b,null,null,function(){$("#car-matrix-add-tran").length?$("#car-matrix-add-tran").html(this.responseText):$("#car-matrix").html(this.responseText);var a=$('[data-hook="mobile_grid"]');a.empty();$('[data-mobile="true"]').each(function(b,d){b=d.cloneNode(!0);$(b).removeAttr("aria-owns");$(b).addClass("hide-mobile");a.append(b);$(d).removeAttr("aria-label");$(d).find(".car-price").removeAttr("aria-hidden");$(d).find(".text-nochange").removeAttr("aria-hidden")});$('[data-hook="category-selected"]').each(function(b,
d){b=d.cloneNode(!0);$(b).removeAttr("id");a.append(b)});$namespace.Utils.Breakpoint.isMobile()&&($("#gridOnlyKeepCurrentSelection").hide(),$(".mobile-grid").removeClass("sp-bot-5"),$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="keep-current-car-toggle"]').addClass("hide-mobile"),$(window).scrollTop(0));var b=$(".desktop-grid .card-selected-details").last(),f=$(b).find('.hide-mobile [data-hook="select_rental_car"]').attr("id"),g=$(b).find(".hide-mobile .callToBookLink").attr("id");b=$(b).find('[data-hook="additionalInformation"]').attr("id");
var h=f||g?f?f:g:b;var k;$('.desktop-grid a[data-tabaftersummary="yes"]').each(function(a,b){k?$(b).attr("data-tab-after",k):$(b).attr("data-tab-after",h);k="selectedRowCell"+a;$(b).attr("id",k)});$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isMobile()?$('[data-hook="carCategoryName"]').first().focus():$(".carcategoryname1").focus();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null,"")},_showConfirmationModal:function(a){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",
"vptr=SHOW_CAR_PRICE_CHANGE_CONFIRMATION&uid="+a,null,null,function(){var b=new $namespace.Widgets.Confirm(this.responseText,function(){$("#car-matrix").hide();var b="vptr=CHANGE_CAR_CATEGORY_ITEM&uid="+a;var e=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation","Click",e,null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,null,function(){$("#mainContent").html(this.responseText);$(window).scrollTop(0);$namespace.Application.initializeOnMainContentReload();
$namespace.TabOrder.updatePageTabOrder();$(".transportationCard").focus()},null,"");$("#hideformatrix").show()},function(){b.hide()});b.show()},null,"")},_removeSelectedTransportationItem:function(a){var b="vptr=SHOW_PRICE_CONFIRMATION",d=$(a.currentTarget).attr("data-car-category-uid");b+="&uid="+d;a=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Remove","Click",a,null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,null,function(){var a=
function(){var a="vptr=REMOVE_TRANSPORTATION_SELECTION_FOR_CITY&uid="+d;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,"mainContent",function(){$("#mainContent").html(this.responseText);$namespace.DomUtil.setElementLoadingMask(!1,null,!0);$namespace.Application.initializeOnMainContentReload()},null);$("#transportationResults").show();$("#includedTransportationCard").focus()},b=function(){g.hide()};if(0==$(this.responseText).filter("#upgradeConfirmCenterModal").length)$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION);else{var g=new $namespace.Widgets.Confirm(this.responseText,a,b);g.show()}},null,"")},_onContinueAddOnsClick:function(a){this.jdcAddonsViewButtonClick="true";var b=document.getElementById("pickupTimeNotSelected");if(0<$('[data-hook="update_jdc_modify_details"]').length)this._updateJDCModifyDetailsForContinueButton(a);else if(b)$("#pickupTime").val(),$("#dropoffTime").val(),document.getElementById("timeNotSelectedErrorMessage").classList.remove("time-not-selected-no-error"),
document.getElementById("timeNotSelectedErrorMessage").classList.add("time-not-selected-error-message-display"),$namespace.Utils.Breakpoint.isMobile()||document.getElementById("midifyDetailsButton").classList.remove("custom-pad-t-m-20"),document.getElementById("modifyTransportationDetails").focus();else{this._loadJDCAddonsAndCarSection(a);a=$(a.currentTarget).attr("data-addons-btn");b=$('INPUT[id="eventLabelId"]').val();var d="";"continue_add_ons_btn_info_bar"===a?d="VP_Transportation_Add_Ons":"continue_add_ons_btn_bread-crumb"===
a&&(d="VP_Transportation_Add_Ons_Primary");$namespace.Analytics.trackEvent(d,"Click",b)}},_onContinueClick:function(a){if(0<$('[data-hook="submit_optional_equipment"]').length)$('[data-hook="submit_optional_equipment"]').trigger("click");else if(0<$('[data-hook="update_jdc_modify_details"]').length)this._updateJDCModifyDetailsForContinueButton(a);else{var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=VALIDATE_OPTIONAL_TRANPORTATION&cityCounter=1",null,null,
function(d){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(a.preventDefault(),d=document.getElementById("pickupTimeNotSelected")){d=$("#pickupTime").val();var e=$("#dropoffTime").val();null==d&&void 0==d||null==e&&void 0==e?(document.getElementById("timeNotSelectedErrorMessage").classList.remove("time-not-selected-no-error"),document.getElementById("timeNotSelectedErrorMessage").classList.add("time-not-selected-error-message-display"),
$namespace.Utils.Breakpoint.isMobile()||document.getElementById("midifyDetailsButton").classList.remove("custom-pad-t-m-20"),document.getElementById("modifyTransportationDetails").focus()):(d=$("#packageId").val(),$namespace.Analytics.trackEvent("VP_Transportation_Modify_Details","Click",d,null),b._updateModifyDetails(a))}else{d=$("#pickupTime").val();e=$("#dropoffTime").val();var f=$('[data-hook="save_vp_jdc_car_pickup_dropoff_details"]').length;null==d&&void 0==d||null==e&&void 0==e||0!=f?b._NavigateToNextPage():
(d=$("#packageId").val(),$namespace.Analytics.trackEvent("VP_Transportation_Modify_Details","Click",d,null),b._updateModifyDetails(a))}},null)}},_loadJDCAddonsAndCarSection:function(){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act","tc=LOAD_VP_JDC_TRANSPORTATION_WITH_ADD_ONS",null,null,function(){if(""!=this.responseText){var a=$("#vpJdcCarAddOnsView"),b=$("#add-ons-label-container");b.removeClass("hidden");a.insertAfter(b);
a.html(this.responseText);$("#car_rental_grid").hide();$("#vP1JDCPickUpDropOffSection").hide();$("#vP1JDCPickUpDropOffEditSection").hide();$("#vp-jdc-add-ons-continue").addClass("hide-mobile hide-desktop");$("#package-recap-continue").removeClass("hide-mobile hide-desktop");$(".non-jdc-addons-back-sync-btn").addClass("hide-mobile hide-desktop");$("#backButtonForVpsJdcAddons").removeClass("hide-mobile hide-desktop");$(window).scrollTop(0);$namespace.DomUtil.setElementLoadingMask(!1)}a="vptr=SHOW_CAR_RESULTS&uid="+
$('a[data-relative-price="Included in Package"]').data("product-id");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a+"&packageAddOnsRequest=true",null,null,function(){""!=this.responseText&&($("#includedTransportationCard").html(this.responseText),$(window).scrollTop(0));$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1)},null)},null)},_updateJDCModifyDetailsForContinueButton:function(a){$(a.currentTarget);a=$("#pickUpTimePreValue").val();
var b=$("#dropOffTimePreValue").val(),d=$("#pickupLocationPreValue").val(),e=$("#dropoffLocationPreValue").val(),f=0<$("#pickupLocationId").length?$("#pickupLocationId").val():d,g=0<$("#dropoffLocationId").length?$("#dropoffLocationId").val():e,h=!1;if(f!=d||g!=e)h=!0;d=$("#carProductTimeSelected").val();e=$("#pickupTime").val();var k=$("#dropoffTime").val();0==h&&a==e&&b==k&&"true"==d?"true"===this.jdcAddonsViewButtonClick?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act",
"tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW&vpJdcAddonsFlowEnabled=true",null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null)):$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION):this._showJdcUpdateCarConfirmationModalForContinueButton(e,k,f,g,h)},_showJdcUpdateCarConfirmationModalForContinueButton:function(a,b,d,e,f){var g=this;d="rcm=UPDATE_PICKUP_DROPOFF_TIME&newPickupTime="+
a+("&newDropoffTime="+b)+("&newPickupLocationId="+d);d+="&newDropoffLocationId="+e;d+="&locationChanged="+f;var h=$("#selectedJdcCarCompanyName").val();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",d,null,null,function(d,e){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if("false"==d)d=$("#noCarAvailableImagePath").val(),$("#transportationCarNotAvailableMessage").html("<span>"+e+'</span><img src="'+d+h+'.gif" align="absmiddle" class="vp-jdc-no-car-available-msg-img-label"/>'),
$("#vpJdcNoCarAvailableMsg").removeClass("vp-jdc-no-car-available-msg-hide");else if("true"==d)e="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+a,e+="&newDropoffTime="+b,$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",e,null,null,function(){g._ContinueFromJDCUpdate()},null,"");else{var f=new $namespace.Widgets.Confirm(this.responseText,function(){f.hide();var d="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+a;d+="&newDropoffTime="+b;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",
d,null,null,function(){g._ContinueFromJDCUpdate()},null,"")},function(){f.hide()});f.show()}},null,"")},_ContinueFromJDCUpdate:function(){var a=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act","vptr=VALIDATE_OPTIONAL_TRANPORTATION&cityCounter=1",null,null,function(b){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):"true"===a.jdcAddonsViewButtonClick?($namespace.DomUtil.setElementLoadingMask(!0,
null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act","tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW&vpJdcAddonsFlowEnabled=true",null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null)):a._NavigateToNextPage()},null)},_NavigateToNextPage:function(a){"true"==$("#isActivityPresent").val()?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES):
($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null))},_availableAirportFocusIn:function(a){$("#ChangeAvailableAirport").addClass("focus")},_availableAirportFocusOut:function(a){$("#ChangeAvailableAirport").removeClass("focus")},
_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){$("#editFlightLink").length?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},_onEditThemeParkLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS)},_changeAvailableAirportChange:function(a){var b=$(a.currentTarget).attr("data-cityUid"),d=$("#pickupPointList").val(),e=$("#oldValue").val();a="vptr=SHOW_PRICE_CONFIRMATION_SHUTTLE&uid="+(b+"&selectedPickupPoint="+d+"&oldPickupPoint="+e+"&cityCounter=0&totalCities=1");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);var a=function(){if(""!=d){var a="vptr=SEARCH_TRANSFERS_FOR_PICKUP_POINT&uid="+(b+"&selectedPickupPoint="+d+"&cityCounter=0&totalCities=1");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());
$namespace.TabOrder.updatePageTabOrder();$("#ChangeAvailableAirport").toggleClass("focus");$("#pickupPointList").first().focus()},null,"")}},g=function(){h.hide()};if(0==$(this.responseText).filter("#upgradeConfirmCenterModal").length)$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION);else{var h=new $namespace.Widgets.Confirm(this.responseText,a,g);h.show()}$("#pickupPointList").val(e)},null,"")},_updateModifyDetails:function(a){a.preventDefault();
var b=$(a.currentTarget);if("disabled"!==b.attr("disabled")){b.attr("disabled","disabled");var d=$("#pickUpTimePreValue").val(),e=$("#dropOffTimePreValue").val(),f=$("#pickupLocationPreValue").val();a=$("#pickupLocationPreText").val();var g=$("#dropoffLocationPreValue").val(),h=$("#dropoffLocationPreText").val(),k=$("#pickupAgencyUid :selected").text(),l=$("#dropoffAgencyUid :selected").text();$("#timeChangedValue").val();var p=$("#pickupTime").val(),q=$("#dropoffTime").val(),r=$("#carCategoryItemUid").val(),
v=b.attr("data-hook"),n=$("input[name='carCount']:checked")[0];$(n).attr("data-absIncremental-pricing");$(n).attr("data-current-pricing");var t="vptr=CHANGE_CAR_CATEGORY_ITEM";t+="&uid="+r;var u=$("#pickupAgencyUid").val(),w=$("#dropoffAgencyUid").val();t+="&pickupAgencyUid="+u;t+="&dropoffAgencyUid="+w;n=$("input:radio[name=carCount]:checked").val();$("#cityUid").val();t+="&numberOfCars="+n;""!=p&&(t+="&pickupTime="+p);""!=q&&(t+="&dropoffTime="+q);r="vptr=SHOW_CAR_MESSAGE_CONFIRMATION_POPUP&uid="+
r+("&pickupAgencyUid="+u)+("&dropoffAgencyUid="+w);r+="&numberOfCars="+n;""!=p&&(r+="&pickupTime="+p);""!=q&&(r+="&dropoffTime="+q);n=null;if(d&&p||e&&q)n=this.createConfirmMessageForCarTimeChange(d,p,e,q);p=this.createConfirmMessageForCar(p,q);r=n?r+"&timeChanged=true":r+"&timeChanged=false";r=p&&n?r+"&timeChangedMessage=true":r+"&timeChangedMessage=false";p=null;if(a&&k||h&&l)p=this.createConfirmMessageForCarLocation(a,k,h,l);r=p?r+"&locationChanged=true":r+"&locationChanged=false";p=null;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",r,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text}),$("#pickupTime").val(d),$("#dropoffTime").val(e),$("#pickupAgencyUid").val(f),$("#dropoffAgencyUid").val(g),b.removeAttr("disabled");else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var h=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);var a=$("#fromAgencyChanged").val();t+="&fromAgencyChanged="+a;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",t,null,"mainContent",function(){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("update_modify_details"==v)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload();
else{var a=!1;a="true"==$("#isActivityPresent").val();$namespace.DomUtil.setElementLoadingMask(!1,1,!1);a?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES):$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null)}$namespace.TabOrder.updatePageTabOrder();
$(".transportationCard").focus();b.removeAttr("disabled")},null)},function(){k&&($("#pickupTime").val(d),$("#dropoffTime").val(e));l&&($("#pickupAgencyUid").val(f),$("#dropoffAgencyUid").val(g));h.hide();b.removeAttr("disabled")});setTimeout(function(){h.show()},1E3);var k=$(".modal-close").data("is-time-change"),l=$(".modal-close").data("is-location-change");$(".modal-close").on("click",function(){k&&($("#pickupTime").val(d),$("#dropoffTime").val(e));l&&($("#pickupAgencyUid").val(f),$("#dropoffAgencyUid").val(g));
b.removeAttr("disabled")})}else"update_modify_details"==v?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload()):(a=!1,a="true"==$("#isActivityPresent").val(),$namespace.DomUtil.setElementLoadingMask(!1,1,!1),a?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES):$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,
function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null)),$namespace.TabOrder.updatePageTabOrder(),$(".transportationCard").focus(),b.removeAttr("disabled")},null)}},_onCancelVPJDCPickUpDropOffClick:function(a){a="vptr=LOAD_VP1_JDC_PICK_UP_DROP_OFF&uid="+$(a.currentTarget).attr("data-car-category-uid");$("#packageId").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",
a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#vP1JDCPickUpDropOffEditSection").hide(),$("#vpJDCCarPickUpDropOffSectionOnTop").html(this.responseText),$namespace.TabOrder.updatePageTabOrder())},null,"")},_saveVPJDCCARPickupDropOffModifyDetails:function(a){$(a.currentTarget);a=$("#pickUpTimePreValue").val();var b=$("#dropOffTimePreValue").val(),d=$("#pickupLocationPreValue").val(),e=$("#dropoffLocationPreValue").val(),
f=0<$("#pickupLocationId").length?$("#pickupLocationId").val():d,g=0<$("#dropoffLocationId").length?$("#dropoffLocationId").val():e,h=!1;if(f!=d||g!=e)h=!0;d=$("#carProductTimeSelected").val();e=$("#pickupTime").val();var k=$("#dropoffTime").val();0==h&&a==e&&b==k&&"true"==d?$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION):this._showVP1JdcUpdateCarPickUpDropOffConfirmationModal(e,k,f,g,h)},_showVP1JdcUpdateCarPickUpDropOffConfirmationModal:function(a,
b,d,e,f){d="rcm=UPDATE_PICKUP_DROPOFF_TIME&newPickupTime="+a+("&newDropoffTime="+b)+("&newPickupLocationId="+d);d+="&newDropoffLocationId="+e;d+="&locationChanged="+f;var g=$("#selectedJdcCarCompanyName").val();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",d,null,null,function(d,e){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if("NewSearchLocationNoCarAvailable"==d){var f=new $namespace.Widgets.Confirm(this.responseText);
f.show()}else"false"==d?(d=$("#noCarAvailableImagePath").val(),$("#transportationCarNotAvailableMessage").html("<span>"+e+'</span><img src="'+d+g+'.gif" align="absmiddle" class="vp-jdc-no-car-available-msg-img-label"/>'),$("#vpJdcNoCarAvailableMsg").removeClass("vp-jdc-no-car-available-msg-hide")):"true"==d?(e="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+a,e+="&newDropoffTime="+b,$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",e,null,null,function(){$namespace.Navigation.loadPage("h="+
$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null,"")):(f=new $namespace.Widgets.Confirm(this.responseText,function(){f.hide();var d="rcm=SUBMIT_RENTAL_CAR_UPDATE&newPickupTime="+a;d+="&newDropoffTime="+b;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("rentalCarMatrix.act",d,null,null,function(){$namespace.Navigation.loadPage("h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null,"")},function(){f.hide()}),f.show())},null,"")},_onEditDetailsVPJDCPickUpDropOffClick:function(a){a=
"vptr=LOAD_VP1_JDC_PICK_UP_DROP_OFF_MODIFY_DETAILS&uid="+$(a.currentTarget).attr("data-car-category-uid");$("#packageId").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#vpJDCCarPickUpDropOffSectionOnTop").html(this.responseText),$("#vP1JDCPickUpDropOffSection").hide(),$namespace.TabOrder.updatePageTabOrder(),
$('div[data-hook="numberOfCars"]').focus())},null,"")},_onModifyDetailsClick:function(a){a="vptr=SHOW_CAR_MODIFY_DETAILS&uid="+$(a.currentTarget).attr("data-car-category-uid");var b=$("#packageId").val();$namespace.Analytics.trackEvent("VP_Transportation_Modify_Details","Click",b,null);document.getElementById("timeNotSelectedErrorMessage").classList.remove("time-not-selected-error-message-display");document.getElementById("timeNotSelectedErrorMessage").classList.add("time-not-selected-no-error");
document.getElementById("midifyDetailsButton").classList.remove("custom-pad-t-m-20");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#car-modify").html(this.responseText),$("#hideModify").hide(),$("#car-modify").show(),$namespace.TabOrder.updatePageTabOrder(),
$('div[data-hook="numberOfCars"]').focus())},null,"")},_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=a.attr("data-includeRemarks"),e=a.attr("data-test"),f=$("#theme_park_read_more").attr("data-vendorid"),g=$("#packageId").val(),h="";h=(d?"cthr=SHOW_FILTERED_ITINERARY_REMARKS":"cthr=SHOW_ITINERARY_REMARKS")+("&itineraryCode="+b);"transportation_additional_informations_modal_id"==a.attr("id")&&(g=$("#packageId").val());$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",h,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkArrivalTransferDescription"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_Arrival_Transfers",label:g});"linkDepartureTransferDescription"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_Departure_Transfers",
label:g});"linkThemeParkTicketCardDescription"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Theme_Parks_Tickets",label:"FLDISNEYWORLD"==f?"WDW":"UO"});"linkAdditionalInformation"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Transportation_RentalCar",label:g});"linkAdditionalInformationCar"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_RentalCar",
label:g});"linkDataItineraryModal"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Rate_Information",label:g+"_"+b});d&&"linkThemeParkTicketCardDescription"!=e&&$namespace.Analytics.trackEvent("Pkg_Overview_Included_Extras","click",g)},_showCancellationPolicyModal:function(){var a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Overview_Cancellation_Policy_Schedule","click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_onTermsConditionsClick:function(a){var b="vptr=LOAD_RENTAL_CAR_TERMS_AND_CONDITION&selectedCarCategoryItemUid="+
$(a.target).attr("data-selected-uid"),d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText)).show()}}(this.module);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,null,d,null);a.preventDefault()},_onGoBackFromAddOnsClick:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act",
"tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW&vpJdcAddonsFlowEnabled=false",null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},null)},getHoursFromTime:function(a){var b=0,d=0;-1!=a.indexOf("PM")?(d=a.indexOf("PM"),b=12):-1!=a.indexOf("AM")&&(d=a.indexOf("AM"),b=0);a=a.substring(0,d);a=a.split(":");a=parseInt(a[0],10);12==a&&(a=0);return a+b},getMinutesFromTime:function(a){var b=0;-1!=a.indexOf("PM")?b=a.indexOf("PM"):
-1!=a.indexOf("AM")&&(b=a.indexOf("AM"));a=a.substring(0,b);a=a.split(":");return parseInt(a[1],10)},createConfirmMessageForCar:function(a,b){var d=null,e=this.getHoursFromTime(a),f=this.getHoursFromTime(b);a=this.getMinutesFromTime(a);b=this.getMinutesFromTime(b);e=f-e;if(1<e||59<60*e+(b-a))d="The car company calculates a rental day as a 24-hour period. Selecting a return time that is later than your pick-up time will add a day to your rental and you will be charged accordingly.<br/>";return d},
createConfirmMessageForCarLocation:function(a,b,d,e){var f=null;if(a!=b||d!=e)f="Changing the Pick-up of Drop-off location may change the car type.";return f},createConfirmMessageForCarTimeChange:function(a,b,d,e){var f=null;if(a!=b||d!=e)f="Pick-up or dropoff time changed";return f},_onContinueToDetailsClick:function(a){var b=document.getElementById("pickupTimeNotSelected");if(0<$('[data-hook="update_jdc_modify_details"]').length)this._updateJDCModifyDetailsForContinueButton(a);else if(b)b=$("#pickupTime").val(),
$("#dropoffTime").val(),document.getElementById("timeNotSelectedErrorMessage").classList.remove("time-not-selected-no-error"),document.getElementById("timeNotSelectedErrorMessage").classList.add("time-not-selected-error-message-display"),$namespace.Utils.Breakpoint.isMobile()||document.getElementById("midifyDetailsButton").classList.remove("custom-pad-t-m-20"),document.getElementById("modifyTransportationDetails").focus();else{var d=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act",
"tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW&vpJdcAddonsFlowEnabled=true",null,null,function(){d._loadJDCCarDetailsSection()},null)}},_loadJDCCarDetailsSection:function(){var a="vptr=SHOW_CAR_RESULTS&uid="+$('a[data-relative-price="Included in Package"]').data("product-id");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",a+"&packageAddOnsRequest=true",null,null,function(){""!=this.responseText&&($("#includedTransportationCard").html(this.responseText),$(window).scrollTop(0));
$("#car_rental_grid").hide();$("#vP1JDCPickUpDropOffSection").hide();$("#vP1JDCPickUpDropOffEditSection").hide();$("#package-recap-continue").removeClass("hide-mobile hide-desktop");$("#vp-jdc-add-ons-continue").addClass("hide-mobile hide-desktop");$("#vp-jdc-continue-to-details").addClass("hide-mobile hide-desktop");$("#backButtonForVpsJdcAddons").removeClass("hide-mobile hide-desktop");$("#backButton").addClass("hide-mobile hide-desktop");$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1)},
null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;animationSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;var selectedTicket,ticketUpdated=!1,dayUpdated=!1,customizeTicketIds=[],currentPassengerIndex=0,isEachTravelerTicketAdded=!1;$namespace.View=$namespace.View||{};
$namespace.View.ThemeParkView=Backbone.View.extend({el:"#packageThemeParks",ui:{chatLink:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[id="theme_park_read_more"]':"_onThemeParkReadMoreClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click [data-hook="continue_button"]':"_onContinueClick",'click a[data-hook="add-tickets-toggle"]':"_toggleAddTickets",'click a[data-hook="add-tickets-toggle-done"]':"_toggleAddTicketsDone",
'click a[data-hook="customize-tickets-toggle"]':"_toggleModifyRoom",'click a[data-hook="customize-tickets-toggle-done"]':"_toggleCustomizeTickets","click .price-grid-tickets a.price-tab":"_onPriceTabClick",'click #ticket_price_grid_container [data-hook="data-remove-tickets"]':"_onRemoveTicketsClick",'click [data-hook="update-ticket"]':"_showSingleTicketCard",'click [data-hook="select-ticket"]':"_onUpdateTickets",'click [data-hook="remove-ticket"]':"_onRemoveTickets","change #firstDayOfUse":"_onUpdateDay",
"focusin #firstDayOfUseValue":"_onfirstDayOfUseValueFocus","focusout #firstDayOfUseValue":"_onfirstDayOfUseValueFocusOut",'click [role="tab"]':"_onRadioTab",'click [data-hook="all-travelers-radio"]':"_onRadioTab",'click [data-hook="each-travelers-radio"]':"_onRadioTab",'click a[data-hook="each-travelers-accordion"]':"_onAccordionClick",'click a[id="data-remove-tickets"]':"_onRemoveTicketsClick_2",'click [data-hook="nextDay"]':"_nextDay",'click [data-hook="previousDay"]':"_previousDay",'click [data-hook="show-ticket"]':"_showSingleTicketCard",
'click [data-hook="date-select"]':"_onSelectClick",'click [data-hook="show-ticket-info"]':"_onShowTicketInfoClick",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick"},initialize:function(a){$.hook("sticky-bar").each($namespace.Utils.eachUninitialized(function(a,b){b.stickyBar=new $namespace.Widgets.StickyBar(a)}));var b=this;this.controller=$.extend({},a).controller;this.module=a.module;this.$gridContainer=$.hook("ticket_price_grid_container",
this.$el);this.$desktopPriceGrid=this.$gridContainer.find(".desktop-price-grid");this.$mobilePriceGrid=this.$gridContainer.find(".mobile-price-grid");this.$page=$.hook("page_content");this.$innerElement=$.hook("custompath_package_themeparks");this.destination=$(this.el).data("destination");this.city=$(this.el).data("city");this.packageId=$(this.el).data("package-id");this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});$(this.el).find("div.themeParkTickets div.additionalInformation").remove();
$(this.el).find("div.themeParkTickets div.resortDetails").remove();$(this.el).find("div.themeParkTickets ul.themeParkLinks").remove();$("div[id^='includedTicketVendorItemDescription_']").each(function(){var a=$(this).find("p"),b=$(this).parent();$(b).prepend(a);$(this).remove()});this.$page.on("click",".ticket-summary-result .mobile-cta [data-select-tickets]",this._onSelectTicketsClick.bind(this));this.$page.on("click",".ticket-summary-result .mobile-cta [data-cancel]",this._onCancelClick.bind(this));
if((a=breakpoint.isDesktop())||!a&&ticketUpdated||dayUpdated){var d=$("div[id^='includedTicketVendorItem_']");if(d)for(var e=0;e<d.length;e++){var f=d[e];void 0!=$(f).data("included-package")&&$(f).data("current-ticket-uid")==$(f).data("ticket-uid")?(e=5,$("#"+$(f).data("venue-id")).addClass("active"),this._activeCustomizeTicket($(f).data("venue-id"),!0),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).removeClass("active"),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).find("a[data-hook='customize-tickets-toggle']:first").removeClass("closed").addClass("opened"),
$("#defaultCustomizeTickets_"+$(f).data("venue-id")).find("a[data-hook='add-tickets-toggle']:first").removeClass("closed").addClass("opened"),$namespace.TabOrder.updatePageTabOrder(),ticketUpdated&&(ticketUpdated=!1,setTimeout(function(){$("#"+$(f).data("venue-id")).find('[id="currentlyIncludedTicketCell"]').focus();b._setDefaultFocus()},50))):void 0!=$(f).data("included-package")&&""!=$(f).data("included-package")&&""==$(f).data("current-ticket-uid")&&(e=5,$("#"+$(f).data("venue-id")).addClass("active"),
this._activeCustomizeTicket($(f).data("venue-id"),!0),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).removeClass("active"),$("a[data-hook='customize-tickets-toggle']:first").removeClass("closed").addClass("opened"),$namespace.TabOrder.updatePageTabOrder(),ticketUpdated&&(ticketUpdated=!1,setTimeout(function(){$("#"+$(f).data("venue-id")).find('[id="currentlyIncludedTicketCell"]').focus();b._setDefaultFocus()},50)))}}if(!a&&(d=$("div[id^='includedTicketVendorItem_']")))for(e=0;e<d.length;e++)f=
d[e],void 0!=$(f).data("included-package")&&$(f).data("current-ticket-uid")==$(f).data("ticket-uid")&&(e=5,this._activeCustomizeTicket($(f).data("venue-id"),!0),$("#"+$(f).data("venue-id")).addClass("active"),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).removeClass("active"),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).find("a[data-hook='customize-tickets-toggle']:first").removeClass("closed").addClass("opened"),$("#defaultCustomizeTickets_"+$(f).data("venue-id")).find("a[data-hook='add-tickets-toggle']:first").removeClass("closed").addClass("opened"),
$namespace.TabOrder.updatePageTabOrder(),ticketUpdated&&(ticketUpdated=!1,setTimeout(function(){$("#"+$(f).data("venue-id")).find('[id="currentlyIncludedTicketCell"]').focus();b._setDefaultFocus()},50)));$.hook("sticky-sidebar").each(utils.eachUninitialized(function(a,b){b.stickySidebar=new $namespace.Widgets.StickySidebar(a)}));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);
this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var g=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewThemeParks/"+g.destination+"/"+g.city+"/"+g.packageId)})}$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize")},_setDefaultFocus:function(){isEachTravelerTicketAdded&&($("#currentPassengerIndex")&&$("#currentPassengerIndex").val()&&
$("#accordion-"+$("#currentPassengerIndex").val()).parent().hasClass("active")&&($($("#accordion-"+$("#currentPassengerIndex").val()).parent()).removeClass("active"),$("#accordion-"+$("#currentPassengerIndex").val()).attr("aria-expanded","false"),$("#accordion-"+$("#currentPassengerIndex").val()).focus(),$namespace.TabOrder.updatePageTabOrder(),$(window).trigger("resize")),isEachTravelerTicketAdded=!1)},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},trackEventAccordion:function(a,
b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("ThemeParks_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("ThemeParks_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("ThemeParks_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("ThemeParks_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&
$namespace.Analytics.trackEvent("ThemeParks_Results_Activities","Click","Expand")},_onRemoveTicketsClick:function(a){a.preventDefault();a=$(a.currentTarget);var b="cttir=CLEAR_TICKET_SELECTION_FOR_PASSENGER&uid="+a.data("category-id");b+="&selectedPassengerIndex="+a.data("selected-passenger-index");b+="&currentTicketUid="+a.data("current-ticket-uid");b+="&customizeTicketIds="+customizeTicketIds.toString();b+="&currentPassengerIndex="+a.data("selected-passenger-index");$namespace.Analytics.trackEvent("VP_ThemeParks",
a.data("is-optional")?"AdditionalTickets":"IncludedTickets","RemoveTicket",null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",b,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null)},_onPriceTabClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?this.unsetGridItem():(this.unsetGridItem(),this.setGridItem(a))},unsetGridItem:function(){if(breakpoint.isMobile()){$.hook("info-bar").height();
var a=this.$page.children(".ticket-summary-result");$(".price-tab.active").removeClass("active");this.$innerElement.removeClass("hide-mobile");a.fadeOut(function(){a.remove();void 0!=selectedTicket&&(selectedTicket.focus(),selectedTicket=void 0)})}else $(".price-tab.active").removeClass("active"),$(".singleticketsummary").remove(),$(window).trigger("resize")},setGridItem:function(a){var b=breakpoint.isMobile();a.data("product-id");if(b){if(void 0!=a.data("hook")){selectedTicket=a;var d=$.hook("info-bar").height();
var e=$('<div class="ticket-summary-result hide-desktop singleticketsummary" id="singleTicketSummary"></div>');this.$page.append(e)}}else $(".singleticketsummary").remove(),e=$('<div class="ticket-summary-result hide-mobile singleticketsummary" id="singleTicketSummary"></div>'),a.closest(".grid-content-row").append(e);a.addClass("active");var f=e.find("h2, h3, h4, p").first();f.length&&f.attr({tabindex:"-1"}).focus();b&&void 0!=a.data("hook")&&(this.$innerElement.addClass("hide-mobile"),$("html, body").animate({scrollTop:e.offset().top-
d},animationSpeed))},checkForAdvisories:function(){var a=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("themeParkResults.act","tpc=CHECK_ADVISORIES",null,null,function(b,d){b||d?(b="tpc=LOAD_THEME_PARK_ADVISORY&itemUid="+b+("&hasMessage="+d),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("themeParkResults.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=function(){return $("#acknowledgementModalPopup input[type='checkbox']:checked").length==
$("#acknowledgementModalPopup input[type='checkbox']").length},d=new $namespace.Widgets.Modal(this.responseText,function(){g&&g.off("click")});$("#acknowledgementModalPopup input[type='checkbox']").on("click",function(a){b()&&$("#chkErrorMsg").hide()});var g=$("#advisory-understand-btn");g.on("click",function(d){b()?($(d.currentTarget).data("item-id"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("themeParkResults.act","tpc=ACKNOWLEDGE_ADVISORIES",null,null,function(b){b&&($namespace.Analytics.trackEvent("VP_Advisory_Popup",
"Ticket_Advisory","Continue",null),a.navToNextPage())},null)):($("#chkErrorMsg").text($("#mandatoryErrorMsg").text()),$("#chkErrorMsg").attr("data-taborder","document"),$namespace.TabOrder.updatePageTabOrder(),$("#chkErrorMsg").show().focus())});$("#closeTicketAdvisoryButton").on("click",function(a){$namespace.Analytics.trackEvent("VP_Advisory_Popup","Ticket_Advisory","Close",null)});$("#closeTicketAdvisoryX").on("click",function(a){$namespace.Analytics.trackEvent("VP_Advisory_Popup","Ticket_Advisory",
"Close",null)});$namespace.Utils.Breakpoint.isDesktop()&&$("#themeparkAcknowlegementContentDiv").find("label").each(function(a,b){b.removeAttribute("for")});d.show();$(".modal-close").focus()},null)):a.navToNextPage()},null)},navToNextPage:function(){var a=$('a[data-hook="continue_button"]').data("next-page");"PACKAGE_RECAP"==a?($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act","actr=CREATE_BOOKING",null,null,function(a){this.message?
($namespace.DomUtil.setElementLoadingMask(!1,null,!1),a=$namespace.TranslationUtil.replaceParameters($namespace.SearchWidgetsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showActionErrorMessage({text:a},null)):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null)):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.Navigation.getHistoryCodeForPage(a))},_removeIncludedSelectedTicket:function(a,
b,d){var e=this;a="cttir=REMOVE_INCLUDED_SELECTED_TICKET&uid="+a+("&currentTicketUid="+b)+("&customizeTicketIds="+customizeTicketIds.toString());a+="&includedTicketIndex="+d;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",a,null,"mainContent",function(){e.checkForAdvisories()},null)},_onContinueClick:function(a){a.preventDefault();var b=this,d=this.module.TranslationTexts;$namespace.Analytics.trackEvent("ThemeParks_Results","Continue","Best_Price",null);if(void 0!=$("#isUniversalAdditionalTicketIncluded").val()){var e=
0,f=$("#isUniversalAdditionalTicketIncluded").val(),g=$("#isUniversalAdditionalTicketIncluded").data("category-uid");"all"==$("input[data-current-ticket-uid='"+f+"']:checked").val()&&(e=-1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act","cttir=VALIDATE_INCLUDED_TICKET_SELECTION&uid="+g+"&includedTicketIndex="+e,null,null,function(a,k){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(a)b.checkForAdvisories();else{var h=new $namespace.Widgets.Modal((0,$namespace.Templates.themeParkConfirmationPopupModal)({message:d.THEME_PARKS_UNIVERSAL_TICKET_CONFIRMATION_MESSAGE}));
$("button[data-hook='modal-confirmation-yes']").on("click",function(a){$namespace.Analytics.trackEvent("VP_Confirmation_Popup","Ticket_Confirmation","Yes",null);h.hide()});$("button[data-hook='modal-confirmation-no']").on("click",function(a){$namespace.Analytics.trackEvent("VP_Confirmation_Popup","Ticket_Confirmation","No",null);h.hide();b._removeIncludedSelectedTicket(g,f,e)});h.show();setTimeout(function(){$(".modal-close").focus()},50)}},null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1)}else b.checkForAdvisories()},
_onShowTicketInfoClick:function(a){a.preventDefault();a=$(a.currentTarget);var b="cttir=SHOW_TICKET_INFORMATION&rateCode="+a.data("rate-code");b+="&uid="+a.data("category-id");b+="&itineraryCode="+a.data("itinerary-code");$namespace.Analytics.trackEvent("VP_ThemeParks","click",a.data("rate-code"),null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);
(new $namespace.Widgets.Modal(this.responseText,function(){})).show();$(".modal-close").focus()},null)},_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){$("#editFlightLink").length?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},
_onThemeParkReadMoreClick:function(a){$("#packageId").val();var b="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+$(a.target).data("vendorid");var d=this.module.TranslationTexts,e=$(a.target).data("vendorid"),f=$(a.target).data("test"),g=function(b){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE});else{var e=new $namespace.Widgets.Modal(this.responseText,
function(){f&&f.off("click")});var f=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');var g=f.length;g&&$(f[g-1]).data("tab-last",!0);f.on("click",function(a){a=$(a.currentTarget);b.loadParkAndTheaterVenuePopup(JSON.parse(a.attr("data-link-args").trim()),a.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html($(a.target).data("title"));e.show()}}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",
b,null,null,g,null);"linkThemeParkTicketCardReadMore"==f&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"ThemeParks_Read_More",label:"FLDISNEYWORLD"==e?"WDW":"UO"})},loadParkAndTheaterVenuePopup:function(a,b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;d+="&region="+a.region;d+="&area="+a.area;var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=d.module.TranslationTexts;this.message?
$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock")}),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,
b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),e.show(),e.el.data("set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",
d,null,null,e,null)},_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.data("iternary-code"),d="";d=a.data("includeremarks")?"cthr=SHOW_FILTERED_ITINERARY_REMARKS":"cthr=SHOW_ITINERARY_REMARKS";d+="&itineraryCode="+b;$namespace.Analytics.trackEvent("VP_ThemeParks","click",a.data("ticket-info"),null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",d,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_showCancellationPolicyModal:function(){var a=$("#packageId").val(),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("ThemeParks_Results_Cancellation_Policy_Schedule","click",a,null)},_activeCustomizeTicket:function(a,b){if(customizeTicketIds)if(b)customizeTicketIds.includes(a)||customizeTicketIds.push(a);else{if(customizeTicketIds.includes(a)){b=[];for(var d=0;d<customizeTicketIds.length;d++)customizeTicketIds[d]!=a&&b.push(customizeTicketIds[d]);
customizeTicketIds=b}}else b&&(customizeTicketIds=[],customizeTicketIds.push(a))},_toggleModifyRoom:function(a){var b=$(a.currentTarget);a.preventDefault();a.stopPropagation();a="#"+b.data("category-id");var d="#defaultCustomizeTickets_"+b.data("category-id");b.hasClass("closed")?(this._activeCustomizeTicket(b.data("category-id"),!0),b.blur(),b.removeClass("closed").addClass("opened"),$(a).addClass("active"),$(d).removeClass("active"),$namespace.TabOrder.updatePageTabOrder(),$("input[name='selectTravelersTickets"+
b.data("category-id")+"']:checked").focus(),$("input[name='selectTravelersTicketsDisney"+b.data("category-id")+"']:checked").focus(),$(window).trigger("resize"),$namespace.Analytics.trackEvent("VP_ThemeParks",b.data("is-optional")?"AdditionalTickets":"IncludedTickets","ExpandToShowOptions",null)):($(a).removeClass("active"),$(d).addClass("active"),$namespace.TabOrder.updatePageTabOrder(),b.removeClass("opened").addClass("closed"),b.focus())},_toggleAddTickets:function(a){var b=$(a.currentTarget);
a.preventDefault();a.stopPropagation();a="#"+b.data("category-id");var d="#defaultCustomizeTickets_"+b.data("category-id");b.hasClass("closed")?(this._activeCustomizeTicket(b.data("category-id"),!0),b.blur(),b.removeClass("closed").addClass("opened"),$(a).addClass("active"),$(d).removeClass("active"),$namespace.TabOrder.updatePageTabOrder(),$("input[name='selectTravelersTickets"+b.data("category-id")+"']:checked").focus(),$("input[name='selectTravelersTicketsDisney"+b.data("category-id")+"']:checked").focus(),
$(window).trigger("resize"),$namespace.Analytics.trackEvent("VP_ThemeParks",b.data("is-optional")?"AdditionalTickets":"IncludedTickets","ExpandToShowOptions",null)):($(a).removeClass("active"),$(d).addClass("active"),$namespace.TabOrder.updatePageTabOrder(),b.removeClass("opened").addClass("closed"),b.focus())},_toggleAddTicketsDone:function(a){var b=$(a.currentTarget);a.preventDefault();a.stopPropagation();a="#"+b.data("category-id");this._activeCustomizeTicket(b.data("category-id"),!1);var d="#defaultCustomizeTickets_"+
b.data("category-id");$(a).removeClass("active");$(".price-tab.active").removeClass("active");$(".currentlyIncludedInPrice").focus();$(".singleticketsummary").remove();$(d).addClass("active");$('a[data-hook="add-tickets-toggle"]').removeClass("opened").addClass("closed");$(window).trigger("resize");b.focus();$("#btnAddTicket"+b.data("category-id")).focus()},_toggleCustomizeTickets:function(a){a.preventDefault();var b=$(a.currentTarget);a.stopPropagation();a="#"+b.data("category-id");this._activeCustomizeTicket(b.data("category-id"),
!1);var d="#defaultCustomizeTickets_"+b.data("category-id");$(a).removeClass("active");$(".price-tab.active").removeClass("active");$(".currentlyIncludedInPrice").focus();$(".singleticketsummary").remove();$(d).addClass("active");$('a[data-hook="customize-tickets-toggle"]').removeClass("opened").addClass("closed");$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder();$("#btnCustomize"+b.data("category-id")).focus()},_showSingleTicketCard:function(a){var b=$(a.currentTarget);if(void 0==
b.data("hook"))return!1;a="cttir=SHOW_SINGLE_TICKET_CARD&uid="+b.data("category-id");a+="&rateCode="+b.data("rate-code");a+="&day="+b.data("valid-ticket-day");a+="&selectedPassengerIndex="+b.data("selected-passenger-index");a+="&itineraryCode="+b.data("itinerary-code");var d=b.data("rowcol-index"),e=[b.data("aria-owns-id")];$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",a,null,"singleTicketSummary",function(a){$("#singleTicketSummary").attr("id",a);$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);$namespace.TabOrder.updatePageTabOrder();$(window).trigger("resize");var e=$("#"+d);a=$(b).parent().parent().parent().find("[tabindex]");var f,k=0;for(f=0;f<a.size();f++){var l=a[f];0==f&&(k=$(l).attr("tabindex"));void 0==$(l).attr("tabindex-updated")&&($(l).attr("tabindex",k),$(l).attr("tabindex-updated",!0),k++);if($(l).is("a")&&$(l).hasClass("active")){l=$(".ticket-summary-result-content [tabindex]");var p;for(p=0;p<l.size();p++){var q=l[p];if(void 0==$(q).attr("tabindex-updated"))if("select-ticket"==
$(q).data("hook"))var r=q;else $(q).attr("tabindex",k),$(q).attr("tabindex-updated",!0),k++}}r&&void 0==$(r).attr("tabindex-updated")&&($(r).attr("tabindex",k),$(r).attr("tabindex-updated",!0),k++)}for(f=0;f<a.size();f++)l=a[f],void 0!=$(l).attr("tabindex-updated")&&$(l).removeAttr("tabindex-updated");setTimeout(function(){e.focus();$(".ticket-summary-result .title-two-colums-title").focus()},1);$("#singleTicketHeading").attr("tabindex","-1").focus().addClass("focus")},e)},_updateSelectedTicket:function(a){var b=
a.data("selected-passenger-index"),d=a.data("is-disney-pricing");0<=b&&(isEachTravelerTicketAdded=!0);b=(-1==b||d?"cttir=SELECT_TICKET_FOR_ALL_PASSENGERS":"cttir=SELECT_TICKET_FOR_PASSENGER")+("&uid="+a.data("category-id"));b+="&rateCode="+a.data("rate-code");b+="&day="+a.data("valid-ticket-day");b+="&selectedPassengerIndex="+a.data("selected-passenger-index");b+="&currentTicketUid="+$(a).closest("#ticket_price_grid_container").data("current-ticket-uid");b+="&customizeTicketIds="+customizeTicketIds.toString();
b+="&currentPassengerIndex="+currentPassengerIndex;var e=a.attr("class");ticketUpdated=!0;$namespace.Analytics.trackEvent("VP_ThemeParks","Select",a.data("valid-ticket-day")+" Day - "+a.data("rate-code"),null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",b,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();var a=$("#"+e);setTimeout(function(){a.focus();$(window).trigger("resize")},1);$(window).trigger("resize")},
null)},_onUpdateTickets:function(a){this._updateSelectedTicket($(a.currentTarget))},_onUpdateDay:function(a){var b=$(a.currentTarget);a=document.getElementById("firstDayOfUse");var d=a.options[a.selectedIndex].value,e=b.data("ticket-category-item");dayUpdated=!0;b="cttir=SELECT_START_DATE_FOR_ALL_PASSENGERS&uid="+e+("&selectedDate="+d)+("&currentTicketUid="+$(b).closest("#ticket_price_grid_container").data("current-ticket-uid"));b+="&customizeTicketIds="+customizeTicketIds.toString();b+="&currentPassengerIndex="+
currentPassengerIndex;1==a.selectedIndex?$namespace.Analytics.trackEvent("VP_ThemeParks","Ticket_DropDown","Default",null):1<a.selectedIndex?$namespace.Analytics.trackEvent("VP_ThemeParks","Ticket_DropDown","After_Default",null):0==a.selectedIndex&&$namespace.Analytics.trackEvent("VP_ThemeParks","Ticket_DropDown","Before_Default",null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",b,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();
setTimeout(function(){$("#firstDayOfUse").focus()},1)},null)},_onSelectClick:function(a){a=$(a.currentTarget);$(a).hasClass("active")?$(a).removeClass("active"):$(a).addClass("active")},_onfirstDayOfUseValueFocus:function(a){a=$(a.currentTarget);$(a).addClass("focus")},_onfirstDayOfUseValueFocusOut:function(a){a=$(a.currentTarget);$(a).removeClass("focus")},_onRadioTab:function(a){var b=$(a.target);"all"==$(b).val()?($('[data-panel="each-traveler-tab-'+$(b).data("category-uid")+'"]').removeClass("active"),
$('[data-panel="each-traveler-tab-'+$(b).data("category-uid")+'"]').attr("aria-hidden","true"),$('[data-panel="all-travelers-tab-'+$(b).data("category-uid")+'"]').addClass("active"),$('[data-panel="all-travelers-tab-'+$(b).data("category-uid")+'"]').attr("aria-hidden","false")):($('[data-panel="each-traveler-tab-'+$(b).data("category-uid")+'"]').addClass("active"),$('[data-panel="each-traveler-tab-'+$(b).data("category-uid")+'"]').attr("aria-hidden","false"),$('[data-panel="all-travelers-tab-'+$(b).data("category-uid")+
'"]').removeClass("active"),$('[data-panel="all-travelers-tab-'+$(b).data("category-uid")+'"]').attr("aria-hidden","true"));$(".price-tab.active").removeClass("active");$(".singleticketsummary").remove();$namespace.TabOrder.updatePageTabOrder();var d=$(a.currentTarget);a=d.data("selected-passengr-index");if("0"==a||"-1"==a){var e=("-1"==a?"cttir=SELECT_DEFAULT_TICKETS_FOR_ALL_PASSENGERS":"cttir=SELECT_DEFAULT_TICKETS_FOR_EACH_TRAVELERS")+("&uid="+d.data("category-uid"));e=e+("&selectedPassengerIndex="+
a)+("&currentTicketUid="+d.data("current-ticket-uid"));e+="&customizeTicketIds="+customizeTicketIds.toString();e+="&currentPassengerIndex="+currentPassengerIndex;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",e,null,"mainContent",function(){$("input[name='selectTravelersTickets"+d.data("category-id")+"']:checked").focus();$namespace.TabOrder.updatePageTabOrder()},null)}$namespace.Analytics.trackEvent("VP_ThemeParks",$(b).data("is-optional")?"AdditionalTickets":"IncludedTickets",
"all"==$(b).val()?"CustomizeAllTraveler":"CustomizeEachTraveler",null)},_onAccordionClick:function(a){var b=$(a.currentTarget).parent();$(b[0]).hasClass("active")?($(b[0]).removeClass("active"),$(a.currentTarget).attr("aria-expanded","false")):($(".tickets-accordion .accordion-item").removeClass("active"),$(b[0]).addClass("active"),$(a.currentTarget).attr("aria-expanded","true"));currentPassengerIndex=$(a.currentTarget).data("passenger-index");$namespace.TabOrder.updatePageTabOrder();$(window).trigger("resize")},
_onRemoveTicketsClick_2:function(a){$('[data-id="'+$(a.currentTarget).data("remove-tickets")+'"]').remove()},_nextDay:function(a){var b=$(a.currentTarget);a="cttir=SHOW_COMMON_TICKET_SELECTION_GRID_NEXTDAY&uid="+b.data("category-id");a+="&startIndex="+b.data("start-index");a+="&endIndex="+b.data("end-index");a+="&currentTicketUid="+$(b).closest("#ticket_price_grid_container").data("current-ticket-uid");b=b.data("result-div");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",a,null,
b,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder()},null)},_previousDay:function(a){var b=$(a.currentTarget);a="cttir=SHOW_COMMON_TICKET_SELECTION_GRID_PREVIOUS&uid="+b.data("category-id");a+="&startIndex="+b.data("start-index");a+="&endIndex="+b.data("end-index");a+="&currentTicketUid="+$(b).closest("#ticket_price_grid_container").data("current-ticket-uid");b=b.data("result-div");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",
a,null,b,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder()},null)},_onSelectTicketsClick:function(a){this._updateSelectedTicket(selectedTicket)},_onCancelClick:function(a){this.unsetGridItem()},_onRemoveTickets:function(a){var b=$(a.currentTarget);a="cttir=CLEAR_TICKET_SELECTION_FOR_ALL_PASSENGERS&uid="+b.data("category-id")+("&currentTicketUid="+$(b).closest("#ticket_price_grid_container").data("current-ticket-uid"));a+="&customizeTicketIds="+
customizeTicketIds.toString();a+="&currentPassengerIndex="+currentPassengerIndex;$namespace.Analytics.trackEvent("VP_ThemeParks",b.data("is-optional")?"AdditionalTickets":"IncludedTickets","RemoveTicket",null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("ticketsResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$("input[name='selectTravelersTickets"+b.data("venue-id")+"']:checked").focus();$("input[name='selectTravelersTicketsDisney"+
b.data("venue-id")+"']:checked").focus();setTimeout(function(){$(window).trigger("resize")},1)},null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;widgets=$namespace.Widgets||{};var sortBy=0,DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES=5,enableButtons=!1,accordionExpanded=!1,lastEditedActivityId="",VALIDATION_ERROR_TIME_IS_MISSING="Validation error time is missing",VALIDATION_ERROR_MANDATORY_NO_OF_TOURS="Validation error require mandatory number of tour";$namespace.View=$namespace.View||{};
$namespace.View.ActivitiesResultsView=Backbone.View.extend({el:"#activitiesResults",ui:{chatLink:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click [data-hook="continue_button"]':"_onContinueClick","focusin select#selectActivitiesSort":"_onActivitiesSortFocusIn","focusout select#selectActivitiesSort":"_onActivitiesSortFocusOut",'click [data-hook="expander-show-more-link"]':"_onShowMoreResultsClick",
"change select#selectActivitiesSort":"_onActivitiesSortChange",'click [data-hook="select-activity"]':"_onActivitySelectClick",'focusin [data-hook="activity-date-time"]':"_onActivityDateTimeFocusIn",'focusout [data-hook="activity-date-time"]':"_onActivityDateTimeFocusOut",'change [data-hook="activity-date-time"]':"_onActivityDateTimeChange",'click [data-hook="edit-activity"]':"_onActivityEditClick",'click [data-hook="activity-date-time"]':"_onActivityDateTimeClick",'click [data-hook="update-activity"]':"_onActivityUpdateClick",
'click [data-hook="cancel-activity"]':"_onActivityCancelClick",'click [data-hook="remove-activity"]':"_onActivityRemoveClick","click .activitiesSummaryAccordionTab .accordion-button":"_accordionClick",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick",'click a[data-hook="go_to_theme_park"]':"_onEditThemeParkLinkClick",'click a[data-hook="go_to_transportation"]':"_onEditTransportationClick"},initialize:function(a){$.hook("sticky-bar").each($namespace.Utils.eachUninitialized(function(a,
b){b.stickyBar=new $namespace.Widgets.StickyBar(a)}));$.hook("sticky-sidebar").each(utils.eachUninitialized(function(a,b){b.stickySidebar=new $namespace.Widgets.StickySidebar(a)}));a=$.extend({},a);this.controller=a.controller;this.module=a.module;this.$sortItemList=this.$(".sort-list").find(".sort-item");this.selectActivitiesFilter=new widgets.SelectWidget(this.$("#select_activities_sort"));a=this.$("#selected-activities").find(".select-widget:not(.initialized)");this.selectDateTimeWidgets=[];for(var b=
0;b<a.length;b++)this.selectDateTimeWidgets[b]=new widgets.SelectWidget(a.eq(b));DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES=5;""!=$("#includedActivitiesResults").text()&&$("#additionalActivitiesResults").removeClass("no-padding-top");this._expandActivitiesAccordion();$namespace.TabOrder.updatePageTabOrder();this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.destination=$(this.el).data("destination");
this.city=$(this.el).data("city");this.packageId=$(this.el).data("package-id");this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var d=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewActivities/"+d.destination+"/"+d.city+"/"+d.packageId)})}$(window).on("resize orientationchange",$.proxy(this._onResize,this))},_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){$("#editFlightLink").length?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},_onEditThemeParkLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS)},
_onEditTransportationClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Activities_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Activities_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Activities_Results_Theme_Parks",
"Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Activities_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("VP_Activities_Results_Activities","Click","Expand")},_onResize:function(){$("img[tourActivityImage]").removeAttr("initialized").removeAttr("altsrcattempted");$namespace.ImageUtil.initImages();$namespace.TabOrder.updatePageTabOrder()},_showCancellationPolicyModal:function(){var a=
$("#packageId").val();$namespace.Analytics.trackEvent("VP_Activities_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act",
"vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_onToursLinkClick:function(a){a=$(a.currentTarget);var b=a.data("package-id"),d=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Read_More",d,b);$("#packageId").val();a="ssc=LOAD_SIGHTSEEING_POPUP&sightseeingId="+a.data("tour-id")+"&itineraryCode="+a.data("iternary-code");b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:b.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):(b=new $namespace.Widgets.Modal((0,$namespace.Templates.activities_results_tour_detail_modal)({tourDetail:this.responseText})),$("div.b.p05.bgc07.fs12, span.subtitle, span.b").each(function(){$namespace.Utils.addAriaLevelOrRole($(this),"3","heading")}),b.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",a,null,null,b,null)},_onContinueClick:function(a){a.preventDefault();
$namespace.Analytics.trackEvent("VP_Activities_Results","Continue","Best_Price");var b=this.module.TranslationMessages;a="actr=VALIDATE_ACTIVITIES_RESULTS&uid="+$("#cityUID").val()+"&numberOfMandatoryTours="+$("#numberOfMandatoryActivities").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",a,null,null,function(a,e){a?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),a==VALIDATION_ERROR_TIME_IS_MISSING?$namespace.MessageUtil.showMessage({type:1,text:b.ACTIVITY_VALIDATION_ERROR_TIME_IS_MISSING.translatedText}):
a==VALIDATION_ERROR_MANDATORY_NO_OF_TOURS?$namespace.MessageUtil.showMessage({type:1,text:$namespace.TranslationUtil.replaceParameters(b.ACTIVITY_VALIDATION_ERROR_MANDATORY_NO_OF_TOURS.translatedText,{noOfActivity:e})}):$namespace.MessageUtil.showMessage({type:1,text:a})):$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act","actr=CREATE_BOOKING",null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);a&&($namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP),
lastEditedActivityId&&$("#selectActivityDate"+lastEditedActivityId)&&$("#lastSavedActivityDate"+lastEditedActivityId)&&$("#selectActivityDate"+lastEditedActivityId).val($("#lastSavedActivityDate"+lastEditedActivityId).val()))},null)},null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1)},_onActivitiesSortFocusIn:function(a){a.preventDefault();$("#select_activities_sort").addClass("focus")},_onActivitiesSortFocusOut:function(a){a.preventDefault();$("#select_activities_sort").removeClass("focus")},
_onActivitiesSortChange:function(a){var b=$(a.currentTarget).find("option:selected"),d=b.data("selected-page");a=$(a.currentTarget).data("package-id");sortBy=b.val();0<d&&--d;$namespace.Analytics.trackEvent("VP_Activities_"+(1==sortBy?"Name":"Price"),"Sort",a);this.sortItems(d)},sortItems:function(a){var b=this;var d="actr=SHOW_ADDITIONAL_ACTIVITIES_RESULTS&uid="+$("#cityUID").val();d=d+("&selectedPage="+a)+("&sortBy="+sortBy);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",
d,null,"additionalActivitiesResults",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("#selectActivitiesSort").val(sortBy);$(window).trigger("resize");b._enableDisableButtons(enableButtons);$namespace.TabOrder.updatePageTabOrder();$("#selectActivitiesSort").focus()},null)},setFocusOnFirstNewlyLoadedActivitiesCard:function(){var a=$(".sort-list").find('div[data-card-id="'+(DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES+1)+'"] a[data-modal="activity-data-modal"]');$namespace.TabOrder.updatePageTabOrder();
a.focus();DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES+=5},_onShowMoreResultsClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=this;var d="actr=SHOW_ADDITIONAL_ACTIVITIES_RESULTS&uid="+$("#cityUID").val();d+="&selectedPage="+a.data("selected-page");d+="&sortBy="+sortBy;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",d,null,"additionalActivitiesResults",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);
$(window).trigger("resize");$("#selectActivitiesSort").val(sortBy);b.setFocusOnFirstNewlyLoadedActivitiesCard()},null)},_onActivitySelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=this.module.TranslationTexts;$namespace.Analytics.trackEvent("VP_Activities_Select",b.data("activity-name"),b.data("package-id"));a="actr=SHOW_ACTIVITIES_SELECT_CONFIRMATION&activityUid="+b.data("activity-uid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",
a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Confirm(this.responseText,function(){var b=$("#selectActivityDate"),e=$("#selectActivityTime"),h=b.data("package-id"),k=b.data("activity-name");if(""==b.val())return b.attr("aria-describedby","selectActivityDateError"),$("#errorHeadActivityConfirmation").removeClass("hide"),$("#selectActivityDateError").text(d.ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE),b.focus(),!1;if(""==e.val()&&"true"==$("#isActivityTimeOptional").val())return e.attr("aria-describedby",
"selectActivityDateError"),$("#errorHeadActivityConfirmation").removeClass("hide"),$("#selectActivityDateError").text(d.ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE),e.focus(),!1;b="actr=ADD_ADDITIONAL_ACTIVITY_TO_PACKAGE&activityUid="+b.val();""!=e.val()&&"false"==$("#isActivityTimeOptional").val()&&(b+="&selectedTime="+e.val());b+="&selectedPage="+$("#selectActivitiesSort").data("selected-page");b+="&sortBy="+sortBy;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",
b,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);a.hide();$("#titleAdditionalAvailableActivities").attr("tabindex","-1");$("#titleAdditionalAvailableActivities").addClass("outline-none");$("#titleAdditionalAvailableActivities").focus()},null);$namespace.Analytics.trackEvent("VP_Activities_ConfirmAdd",k,h)},function(){a.hide();b.focus();var d=$("#selectActivityDate"),e=d.data("package-id");d=d.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_NoThanksAdd",
d,e)},!0,!0);$("#selectActivityDate, #selectActivityTime").on("focusin",function(a){$(a.currentTarget).parent().addClass("focus")});$("#selectActivityDate, #selectActivityTime").on("click",function(a){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});$("#selectActivityDate, #selectActivityTime").on("change",function(a){$("#"+$(this).attr("id")+"Error").text("");$(this).removeAttr("aria-describedby");$("#errorHeadActivityConfirmation").addClass("hide")});$("#selectActivityDate, #selectActivityTime").on("focusout",
function(a){$(a.currentTarget).parent().removeClass("focus");$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});a.show()},null)},_onActivityDateTimeFocusIn:function(a){a.preventDefault();$(a.currentTarget).parent().addClass("focus")},_onActivityDateTimeFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onActivityDateTimeChange:function(a){a.preventDefault();a=$(a.currentTarget);
$("#errorHeadActivityConfirmation").addClass("hide");$("#errorHeadActivityCard"+a.data("activity-id")).addClass("hide");$("#selectActivityDateTime"+a.data("activity-id")+"Error").text("");a.attr("aria-describedby","selectActivityDateTime"+a.data("activity-id")+"Error")},_onActivityDateTimeClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_enableDisableButtons:function(a){(enableButtons=a)?($.hook("edit-activity").addClass("disabled"),
$.hook("edit-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("edit-activity").attr("data-hook","edit-activity-disabled"),$.hook("remove-activity").addClass("disabled"),$.hook("remove-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("remove-activity").attr("data-hook","remove-activity-disabled"),$.hook("select-activity").addClass("disabled"),$.hook("select-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("select-activity").attr("data-hook",
"select-activity-disabled"),$(".activity-btn-events").each(function(a){$(this).attr("aria-label",$(this).data("unavailable-title"))})):($.hook("edit-activity-disabled").attr("data-hook","edit-activity"),$.hook("edit-activity").removeClass("disabled"),$.hook("edit-activity").attr("data-taborder","document"),$.hook("remove-activity-disabled").attr("data-hook","remove-activity"),$.hook("remove-activity").removeClass("disabled"),$.hook("remove-activity").attr("data-taborder","document"),$.hook("select-activity-disabled").attr("data-hook",
"select-activity"),$.hook("select-activity").removeClass("disabled"),$.hook("select-activity").attr("data-taborder","document"),$(".activity-btn-events").each(function(a){$(this).attr("aria-label",$(this).data("available-title"))}))},_onActivityEditClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.data("package-id"),d=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Edit",d,b);lastEditedActivityId=a.data("activity-id");$(".edit-remove-"+a.data("activity-id")).addClass("hide");
$(".update-cancel-"+a.data("activity-id")).removeClass("hide");$(".enabled-date-time-"+a.data("activity-id")).removeClass("hide");$(".disabled-date-time-"+a.data("activity-id")).addClass("hide");$("#selectActivityDate"+a.data("activity-id")).val($("#defaultActivityDate"+a.data("activity-id")).val());$("#selectActivityTime"+a.data("activity-id")).val($("#defaultActivityTime"+a.data("activity-id")).val());this._enableDisableButtons(!0);$namespace.TabOrder.updatePageTabOrder();$("#selectActivityDate"+
a.data("activity-id")).focus()},_onActivityUpdateClick:function(a){a.preventDefault();var b=this;a=$(a.currentTarget);var d=a.data("package-id"),e=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Edit_Update",e,d);a.data("activity-uid");var f=a.data("activity-id");d=$("#selectActivityDate"+a.data("activity-id"));e=$("#selectActivityTime"+a.data("activity-id"));var g=this.module.TranslationTexts;if(""==d.val())return d.attr("aria-describedby","selectActivityDateTime"+a.data("activity-id")+
"Error"),$("#errorHeadActivityCard"+a.data("activity-id")).removeClass("hide"),$("#selectActivityDateTime"+a.data("activity-id")+"Error").text(g.ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE),d.focus(),!1;if(""==e.val())return e.attr("aria-describedby","selectActivityDateTime"+a.data("activity-id")+"Error"),$("#errorHeadActivityCard"+a.data("activity-id")).removeClass("hide"),$("#selectActivityDateTime"+a.data("activity-id")+"Error").text(g.ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE),e.focus(),!1;var h=
"actr=UPDATE_ADDITIONAL_ACTIVITY_TO_PACKAGE";d.val();h+="&activityUid="+d.val();h+="&selectedTime="+e.val();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",h,null,null,function(){h="actr=SHOW_ACTIVITIES_RESULTS";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",h,null,"mainContent",function(){b._enableDisableButtons(!1);lastEditedActivityId="";$namespace.DomUtil.setElementLoadingMask(!1,null,!1);b._expandActivitiesAccordion();
$namespace.TabOrder.updatePageTabOrder();$("#edit-activity-"+f).focus()},null)},null);$("#lastSavedActivityDate"+lastEditedActivityId).val(d.val())},_onActivityCancelClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.data("package-id"),d=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Edit_Cancel",d,b);a.data("activity-id");$("#errorHeadActivityCard"+a.data("activity-id")).addClass("hide");$("#selectActivityDateTime"+a.data("activity-id")+"Error").text("");$("#selectActivityDate"+
a.data("activity-id")).removeAttr("aria-describedby");$(".edit-remove-"+a.data("activity-id")).removeClass("hide");$(".update-cancel-"+a.data("activity-id")).addClass("hide");$("#selectActivityDate"+a.data("activity-id")).val($("#defaultActivityDate"+a.data("activity-id")).val());$("#selectActivityTime"+a.data("activity-id")).val($("#defaultActivityTime"+a.data("activity-id")).val());$(".enabled-date-time-"+a.data("activity-id")).addClass("hide");$(".disabled-date-time-"+a.data("activity-id")).removeClass("hide");
this._enableDisableButtons(!1);lastEditedActivityId="";$namespace.TabOrder.updatePageTabOrder();$("#edit-activity-"+a.data("activity-id")).focus()},_onActivityRemoveClick:function(a){a.preventDefault();var b=$(a.currentTarget);a="actr=SHOW_ACTIVITIES_REMOVE_CONFIRMATION&activityUid="+b.data("activity-uid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,
!1);var a=new $namespace.Widgets.Confirm(this.responseText,function(){var a="actr=REMOVE_ACTIVITY_FROM_PACKAGE&activityUid="+b.data("activity-uid");a+="&selectedPage="+$("#selectActivitiesSort").data("selected-page");a+="&sortBy="+sortBy;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("activitiesResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("#titleAdditionalAvailableActivities").attr("tabindex","-1");$("#titleAdditionalAvailableActivities").addClass("outline-none");
$("#titleAdditionalAvailableActivities").focus()},null);$namespace.Analytics.trackEvent("VP_Activities_ConfirmRemove",b.data("activity-name"),b.data("package-id"))},function(){a.hide();b.focus();$namespace.Analytics.trackEvent("VP_Activities_NoThanksRemove",b.data("activity-name"),b.data("package-id"))});a.show()},null);$namespace.Analytics.trackEvent("VP_Activities_Remove",b.data("activity-name"),b.data("package-id"))},_expandActivitiesAccordion:function(){breakpoint.isDesktop()&&accordionExpanded&&
$(".activitiesSummaryAccordionTab").find(".accordion-button").click()},_accordionClick:function(a){a.preventDefault();breakpoint.isDesktop()&&(accordionExpanded=accordionExpanded?!1:!0)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseDetailsView=Backbone.View.extend({el:"#cruise-details-page",events:{'click [data-hook="go_back"]':"_onBackLink",'click [data-hook="loginToCheckPrices"]':"_onLoginToCheckPricesClick",'click [data-hook="loginToViewAmenitiesDetails"]':"_onLoginToViewAmenitiesDetailsClick","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary","click a.modal-gallery-thumb-ship-details":"_onGalleryThumbClickShipDetails",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",
'click a[data-hook="continue_button"]':"_onCruiseContinueClick","change #shipDeckPlan":"_onShipDeckPlanChange",'click a[data-hook="show-more-itinerary-link"]':"_onShowMoreItineraryClick",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip","click .travel-description-travel-rating a[data-tooltip]":"_gaForCruiseRatingToolTip"},initialize:function(a){$(".info-bar-title").focus();var b=this;a=$.extend({},a);this.module=a.module;this.cruiseLineName=$("main#cruise-details-page").data("cruise-line-name");
this.cruiseLineCode=$("main#cruise-details-page").data("cruise-line-code");this.shipName=$("main#cruise-details-page").data("cruise-ship-name");this.destination=$("main#cruise-details-page").data("destination");this.shipDeckPlanActive=new $namespace.Widgets.SelectWidget($("#ship_deck_plan_widget"),{taborder:"document"});this.destinationCode=a.destinationCode;document.title=$("input#page_title").val();$(document).scrollTop(0);this.groupID=$("[data-block-group]").data("block-group");a={gaCruisePackagePrefix:this.getGaCruisePackagePrefix(),
stateroomEventCategory:"CR_Details_Stateroom_Type",departureDateEventCategory:"CR_Details_Departure_Date"};this.sailingAndStateroomTypePicker=new $namespace.Widgets.CruiseSailingAndStateroomTypeWidget("[data-block-group]",{groupID:this.groupID,cruisePriceEl:".cruiseSailingPriceLabel",taxAndFeesSelector:"[data-tax-and-fee]",selectedAmenitiesSelector:".amenitiesSection",gaOptions:a});if(this.cruiseRatingLink=$(this.el).find(".travel-description-travel-rating a[data-tooltip]"))this.cruiseRatingsTooltip=
new $namespace.Widgets.Tooltip(this.cruiseRatingLink,{parentSelector:".cruise-item__ratings"});this._loadAmenitiesInView=function(){var a=$(this),e=$("#cruise_details_amenities-section").attr("data-load-count");void 0!=e?(e=+e,a.attr("data-load-count",++e)):(e=0,a.attr("data-load-count",e));var f=b.sailingAndStateroomTypePicker.getSelectedSailingUid();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseDetails.act","ctcd=LOAD_CRUISE_DETAILS_INCLUDED_EXTRAS&selectedSailingItemUid="+f,null,"cruise_details_amenities-section",
function(){this.message?3>e?a.each(b._loadAmenitiesInView):($("#cruise_details_amenities-section-header").removeClass("hidden"),$("#cruise_details_amenities-section-message").append(b.module.TranslationTexts.INCLUDED_EXTRAS_ERROR_MESSAGE),$("#cruise_details_amenities-section-message").removeClass("hidden")):($(".amenitiesSection [data-uid='"+f+"'][data-stateroom='"+b.sailingAndStateroomTypePicker.getSelectedStateroomType()+"']").addClass("active"),b.initShopCardWidget(),$namespace.TabOrder.updatePageTabOrder(),
b.initPageAnalytics())},null,null,null,null)};$(".amenitiesSection").each(b._loadAmenitiesInView);this.stateroomDetailsTabSwitcher=new $namespace.Widgets.TabSwitcher($('DIV[data-hook="tab-switcher"]'));this.stateroomDetailsTabSwitcher.initialize();$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$("[data-color-code]").each(function(a,b){$(b).css("background-color","#"+$(b).data("color-code"))});$(".rooms").each(function(a,
b){a=$(b).find(".roomDescription").find("ul");a.attr({"data-test":"stateroomAmenitiesList"});a.addClass("blue-bullets amenities-list amenities-list-small");1==a.length&&(a=a.remove(),$(b).append(document.createElement("hr")),a.appendTo(b))});this.initAccordionAnalytics()},close:function(){this.sailingAndStateroomTypePicker.close()},_onBackLink:function(a){window.history.back()},_login:function(){var a="/cr/booking/bookingWidget/memberLogin"+this.getGaCruisePackageId();$namespace.Analytics.track({vendor:"google",
type:"pageview",events:"1",text:a});$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS_AUTHENTICATED);$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS_AUTHENTICATED)},_onLoginToCheckPricesClick:function(a){$namespace.Analytics.trackEvent("CR_Details_Login","Stateroom_Pricing",this.getGaCruisePackageId());this._login()},_onLoginToViewAmenitiesDetailsClick:function(a){$namespace.Analytics.trackEvent("CR_Details_Login",
"Card_Credit_Amounts",this.getGaCruisePackageId());this._login()},_showItineraryRemarksModal:function(a){a=$(a.currentTarget);a="ctcd=SHOW_AMENITIES_DESCRIPTION_MODAL&amenityDescriptionKey="+this._createAmenityDescriptionKey(a);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseDetails.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);$namespace.Analytics.trackEvent("CR_Details_Amenity",
"Click",this.getGaCruisePackageId())},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);$namespace.Analytics.trackEvent("CR_Details_Popup","Photos",this.getGaCruisePackageId());new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0});$namespace.Analytics.trackEvent("CR_Details_Popup","Image_Carousel",this.getGaCruisePackageId())},_onGalleryThumbClickShipDetails:function(a){a=$(a.currentTarget);$namespace.Analytics.trackEvent("CR_Details_Popup","Photos",this.getGaCruisePackageId());
new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0});$namespace.Analytics.trackEvent("CR_Details_Popup","Image_Carousel",this.getGaCruisePackageId())},_createAmenityDescriptionKey:function(a){var b=a.parents(".cruise-item__state-room-detail.active"),d=b.data("uid");b=b.data("stateroom");a=a.data("title");return(d+a+b).replace(/[^a-zA-Z0-9]/g,"")},initShopCardWidget:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),
{parentSelector:"li"}))})},_onCruiseContinueClick:function(a){a=0<$("[data-show-acknowledgement='true']",this.el).length;var b=this;$namespace.Analytics.trackEvent("CR_Details_Cruise_Travelers","Click",b.getGaCruisePackageId());a?(a=$namespace.CruiseSearchResultsModule.TranslationTexts,$namespace.MessageUtil.showAcknowledgementsMessage({title:a.MESSAGE_TITLE_ACKNOWLEDGEMENT,header:a.CURRENCY_CONVERSION_WARNING_HEADER,text:a.CURRENCY_CONVERSION_WARNING_MESSAGE},function(){b._continueToTravelers()},
a.BUTTON_TITLE_I_UNDERSTAND,null)):this._continueToTravelers()},_continueToTravelers:function(){var a=this.sailingAndStateroomTypePicker.getSelectedSailingUid();$namespace.GlobalConstants.RESPONSIVE_CRUISE_TRAVELERS_STATEROOM_TYPE_PAGES_ENABLED?(a="ctcsr=LOAD_CRUISE_TRAVELERS&selectedSailingItemUid="+a,$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",a,null,"mainContent",function(){$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO);
$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1)},null,null,null,null)):(a="csr=8&cruiseSailingItemUid="+a+("&displayCruiseTripSummaryUpto="+$namespace.CruiseTripSummaryDisplayConstants.DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_SAILING_INFO),a+="&showMultiStateroomsHelpSection=true",$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCall("legacy/cruiseSailingResults.act",a,null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+
$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO)},null,null,null,null))},_onShipDeckPlanChange:function(a){var b=$(a.currentTarget);a=b.prop("selectedIndex");var d=b.prop("options")[0].text;b=$("option:selected",b).attr("data-ship");$("#deck_plan_image").attr("src",b);$("#ship_image").attr("src",_webLoc+"/shared/images/icons/ship/decks/shipDeckPlan_"+(19-a)+".gif");utils.updateLiveContainer("Showing "+d)},_onShowMoreItineraryClick:function(a){$namespace.Analytics.trackEvent("CR_Details_Itinerary",
"Show More",this.getGaCruisePackageId());$("div.itinerary-box").find(".accordion").removeClass("displayNone");$("div.itinerary-box").find(".itinerary-table").removeClass("itinerary-table-display-none");$namespace.TabOrder.updatePageTabOrder();a=$("div.itinerary-box .first-hidden-item");a.attr("tabindex")||a.attr("tabindex","-1");setTimeout(function(){$("div.itinerary-box .first-hidden-item").focus();$("#showMoreItineraryAccordion").hide()},300)},getGaCruisePackageId:function(a){return this.getGaCruisePackagePrefix()+
"/"+this.sailingAndStateroomTypePicker.getSelectedSailingDate()},getGaCruisePackagePrefix:function(){return"/"+this.destinationCode+"/"+this.cruiseLineCode+"/"+this.shipName},initAccordionAnalytics:function(){var a=this;$(this.el).find(".tourHighlight").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Tour_Highlight","Click",a.getGaCruisePackageId())});$(this.el).find(".sailingItinerary").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Port_of_Call",
"Click",a.getGaCruisePackageId())});$(this.el).find(".cruiseonBoardActivitesAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Onboard_Activities","Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseDiningAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Dining","Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseShipAllInclusiveAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_All-Inclusive",
"Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseStateroomsAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Staterooms","Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseSubStateroomsAccordion").on("ct.accordion.opening",function(b,d){b.stopPropagation();$namespace.Analytics.trackEvent("CR_Details_Category_Description","Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseDeckPlanAccordion").on("ct.accordion.opening",function(b,
d){$namespace.Analytics.trackEvent("CR_Details_Deck_Plan","Open",a.getGaCruisePackageId())});$(this.el).find(".cruiseShipFactsAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Details_Ship_Facts","Open",a.getGaCruisePackageId())})},_gaForShopCardToolTip:function(a){$namespace.Analytics.trackEvent("CR_Details_Shop_Card","ToolTip",this.getGaCruisePackageId())},_gaForCruiseRatingToolTip:function(){$namespace.Analytics.trackEvent("CR_Details_Ship_Rating","ToolTip",
this.getGaCruisePackageId())},initPageAnalytics:function(){var a=document.title,b="/cr/booking/bookingWidget/cruiseDetails"+this.getGaCruisePackageId();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v74:b});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:{page:b,location:window.location.href}})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var widgets=utils.getNamespace($namespace,"Widgets",{});$namespace.View=$namespace.View||{};
$namespace.View.CruiseSearchResultsView=Backbone.View.extend({el:"#cruise-search-results-page",ui:{},WIDGET_COOKIE_NAME:"CRUISE_SEARCH_WIDGET_VALUES",events:{'click [data-hook="edit_search"]':"_onEditSearchClick",'click [data-hook-ga="adjust_search"]':"_gaForAdjustSearchClick","click #showMoreLink":"_onShowMoreClick","click .cruiseDetailsButton":"_onCruiseDetailsClick","click .cruiseContinueButton":"_onCruiseContinueClick","click .cruiseCheckPricesButton":"_onCheckPricesClick","click .cruiseStateroomButton":"_onCruiseStateroomButtonClick",
'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[data-hook="cruise_help_tooltip"]':"_gaForCruiseHelpToolTip",'click [data-hook="loginToViewAmenitiesDetails"]':"_onLoginToViewAmenitiesDetailsClick",'click [data-hook="filter-checkbox"]':"_onFilterCheckboxClick",'click [data-hook="apply-filter"]':"_onApplyFilter",'click [data-hook="reset-filter"]':"_onResetFilter",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip",'change [data-hook="tour-definition-changed"]':"callFilteredSearch",
"change #resultSortSelect":"_onSortOptionChange",'click a[data-tooltip="cruise-description-travel-ratings-tooltip"]':"_gaForShipRatingToolTipClick"},sailingAndStateroomTypePickers:{},filterDates:{},previousSearchCheckboxes:{},sliderUsed:"",initShowMore:function(){$(".search-results-listing div.cruise-item__poc").each(function(){var a=$(this),b=a.find(".ports-of-call-list");a=a.find(".port-show-more-button-container");if(b.length&&b[0].scrollHeight>b.height())a.show().find(".port-show-more-button").on("click",
function(a){a.preventDefault();$(this).parent().hide().prev().addClass("show-all").parent().addClass("show-all")});else a.hide().find(".port-show-more-button").off("click")})},_onResize:function(){if(utils.Breakpoint.isMobile()){if(!this.isMobile){$("#cruiseSearchResults .cruise-item__col2 .accordion, .accordion-filter-group-container").find(".accordion-item").not(".active").find(".accordion-content").hide();var a=$(".accordion-filter-group-container").not("#departure-date-range-filter").find(" > .accordion-item"),
b=a.find(" > .accordion-header img.arrow-image-size"),d=$("#departure-date-range-filter > .accordion-item");a.removeClass("active").find(".accordion-content").hide();a.not(".active").find(".accordion-button").attr("aria-expanded",!1);b.length?b.attr("src",b.attr("src").replace("-up-","-down-")):null;d.find(".accordion-button").attr("aria-expanded",!0);d.addClass("active").find(" > .accordion-content").show();$("#packageSearchFilter > .accordion-item.active").length&&$("body").addClass("scroll-lock");
this.isMobile=!0}}else this.isMobile&&($("#cruiseSearchResults .cruise-item__col2 .accordion-content, .accordion-filter-group-container > .accordion-item > .accordion-content").show(),this.isMobile=!1,$("body").removeClass("scroll-lock"))},initTooltips:function(){$("#cruiseSearchResults").find(".travel-description-travel-rating a[data-tooltip]").not(".initialized").each(function(){new $namespace.Widgets.Tooltip($(this),{parentSelector:".cruise-item__ratings"})})},_initAccordions:function(){this.$el.find(".cruisePickers, .accordion-filter-group-container").not(".initialized").each(function(a,
b){a=$(b);b.accordion||(b.accordion=new $namespace.Widgets.Accordion(a))})},_initInnerAccordions:function(){this.$el.find('[data-hook="departurePortsAccordion"], [data-hook="cruiseLineAccordion"]').not(".empty").each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}))},_initSearchFilterAnalytics:function(){$(this.el).on("ct.accordion.opening",function(a){"packageSearchFilter"==$(a.target).attr("id")&&$namespace.Analytics.trackEvent("CR_Search_Results_Filter",
"Click","Show")})},_initShopCardWidget:function(){$('a[data-hook="shop_card_tooltip"]').not(".initialized").each(function(){this.shopCardTooltip||(this.shopCardTooltip=new $namespace.Widgets.Tooltip($(this),{parentSelector:"li"}))})},_disableZeroCountFilterOptions:function(){$("#packageSearchFilter [data-result-count]").each(function(){0==$(this).attr("data-result-count")&&$(this).prop("disabled",!0)})},_activateCheckedAccordions:function(a,b){b&&$(".innerAccordion").find(".showmore.no-padding .accordion.filter").each(function(){if(!$(this).hasClass("theAnyCheckbox")){var d=
this;b.forEach(function(b,f){$(d).find(".accordion-header").attr("data-cruise-line")!=b&&$(d).find(".accordion-header").attr("data-port-name")!=b||d.accordionMenu.open($(d).find(".accordion-item"),$(d).find(".accordion-button"),$(d).find(".filter-content"),a)})}})},_resetCruiseLineCruiseShip:function(a){$("#cruise-line-ship-filter input.cruiseLineRole:checkbox").each(function(){if(!$(this).hasClass("theAnyCheckbox")){if(a){var b=$(this);a.forEach(function(a,d){b.prop("value")==a&&b.prop("checked",
!0)})}var d=$(this).prop("checked"),e=$(this).parents(".accordion-item:first").find("input.cruiseShipRole:checkbox"),f=e.length,g=$(this).parents(".accordion-item:first").find("input.cruiseShipRole:checkbox:checked").length;d&&0!=g?(f>g?($(this).prop({indeterminate:!0,checked:!1}),$(this).next().addClass("partial")):f==g&&($(this).prop({indeterminate:!1,checked:!0}),$(this).next().removeClass("partial")),e.each(function(a,b){a=$(b).prop("checked");$(b).prop({checked:a,disabled:!1})})):d&&0==g?e.prop({checked:!0,
disabled:!0}):(e.each(function(a,b){a=$(b).prop("checked");$(b).prop({checked:a,disabled:!1})}),f=e.length,g=$(this).parents(".accordion-item:first").find("input.cruiseShipRole:checkbox:checked").length,0<g&&g<f?($(this).prop({indeterminate:!0,checked:!1}),$(this).next().addClass("partial")):0<f&&g==f&&($(this).prop({indeterminate:!1,checked:!0}),$(this).next().removeClass("partial")))}})},_setFilterFocus:function(a){a&&a.length&&(a=$("#"+a),$namespace.Browser.isIE()?$(window).scrollTop(a.first().offset().top-
($("#packageSearchFilter").offset().top+$(".info-bar").offset().top)):a.focus()[0].scrollIntoView({behaviour:"smooth",block:"center"}))},_onCruiseDetailsClick:function(a){var b=$(a.target);var d="ctcsr=LOAD_CRUISE_DETAILS&selectedSailingItemUid="+this.sailingAndStateroomTypePickers[b.data("sailing-uid")].getSelectedSailingUid();var e=b.closest(".cruiseSearchResultCard");b=e.attr("id");$namespace.Analytics.trackEvent("CR_Search_Results_Cruise_Details","Click",this.getGaCruisePackageId(a));$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),
{selectedItinerary:b,navigatedTo:$namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS});a=e.data("page-number");d+="&pageNumberToAuthenticate"+a+"&cruiseCardAnchorTagId="+b;$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",d,null,"mainContent",function(){$namespace.Application.initializeOnMainContentReload();$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_DETAILS);$namespace.DomUtil.setElementLoadingMask(!1)},
null,null,null,null)},_onApplyFilter:function(){$("body").removeClass("scroll-lock");this._onApplyAnalytics();$namespace.Analytics.trackEvent("CR_Search_Results_Filter","Click","Apply_Filter");this._onApplyResetFiltersOrSortResults(!1,!0)},_onApplyResetFiltersOrSortResults:function(a,b,d){$namespace.DomUtil.setElementLoadingMask(!0);var e=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act","ctcsr=LOAD_ALL_CRUISE_SEARCH_RESULT_CARDS&updateMasterSearchResult=true",null,"cruiseSearchResults",
function(f,g){var h=$("#noCruiseResultsMessage");0<g?(h.addClass("hidden"),$(".noCruiseSearchResults").removeClass("hidden")):(h.removeClass("hidden"),$(".noCruiseSearchResults").addClass("hidden"));h=$("#packageSearchFilterAccordionButton");"none"!==h.find(".deactivate-text").css("display")&&h.click();e._removeFocusFromCruiseSearchResultCards();e.initTooltips();e.initShowMore();e._initAccordions();e._initInnerAccordions();e.initDateAndStateroomTypeWidgets();e.saveCurrentCheckboxesForGA();e._disableZeroCountFilterOptions();
h=$("#showMoreLink");f?h&&h.addClass("hidden"):(h.html(e.module.TranslationTexts.SHOW_MORE_RESULTS_TEXT),h.removeClass("hidden"));f=$('[id^="cruiseResultsCountSpan"]');1===g?f.html("1 "+e.module.TranslationTexts.MATCHING_SAILING):f.html(g+" "+e.module.TranslationTexts.MATCHING_SAILINGS);$("#cruise-search-results-page").data("search-result-count",g);$(document).scrollTop(0);$namespace.DomUtil.setElementLoadingMask(!1);a||(f.focus(),b?e.updateFiltersAppliedMessage(e.module.TranslationTexts.FILTERS_APPLIED):
d&&e.updateFiltersAppliedMessage(e.module.TranslationTexts.FILTERS_CLEARED))},null,null,null,null)},updateFiltersAppliedMessage:function(a){$("#filters-applied-reset-screenreader-alert").text(a)},_onResetFilter:function(){$("body").removeClass("scroll-lock");var a=this;$namespace.Analytics.trackEvent("CR_Search_Results_Filter","Click","Reset_Filter");var b="ctcs=RELOAD_ORIGINAL_SEARCH&sortByType="+$("#resultSortSelect").val();$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearch.act",
b,null,"cruiseSearchResults",function(){this.message?a._showErrorModal(this):($("#packageSearchFilterAccordionButton").click(),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act","ctcsr=POPULATE_CRUISE_SEARCH_FILTER_WIDGET",null,"filter-content-div",function(){a._onApplyResetFiltersOrSortResults(!1,!1,!0);a.buildSlider()}))},null,null,null,null)},_proceedToTravelersPage:function(a){var b=this,d=$(a.target);a="ctcsr=LOAD_CRUISE_TRAVELERS&selectedSailingItemUid="+this.sailingAndStateroomTypePickers[d.data("sailing-uid")].getSelectedSailingUid();
var e=d.closest(".cruiseSearchResultCard");d=e.attr("id");e=e.data("page-number");a+="&pageNumberToAuthenticate"+e+"&cruiseCardAnchorTagId="+d;$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),{selectedItinerary:d,navigatedTo:$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO});$namespace.GlobalConstants.RESPONSIVE_CRUISE_TRAVELERS_STATEROOM_TYPE_PAGES_ENABLED?($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",
a,null,"mainContent",function(){this.message?b._showErrorModal(this):($namespace.Application.initializeOnMainContentReload(),$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO),$namespace.DomUtil.setElementLoadingMask(!1))},null,null,null,null)):($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",a,null,null,function(){$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO);
$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO);$namespace.DomUtil.setElementLoadingMask(!1)},null,null,null,null))},_login:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);var b=$(a.target).closest(".cruiseSearchResultCard");a=b.find(".cruise-item").data("block-group");var d=b.attr("id");b=b.data("page-number");a="ctcsr=CRUISE_CARD_ANCHOR_TAG_ID&cruiseCardAnchorTagId="+d+("&pageNumberToAuthenticate="+b)+("&selectedSailingItemUid="+
a);$namespace.AjaxUtil.makeAjaxCall("cruiseSearchResults.act",a,null,null,function(){$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),{selectedItinerary:d});$namespace.HistoryNavigation.addHistoryWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_AUTHENTICATED_SEARCH_RESULTS,{selectedItinerary:d});$(document).scrollTop(0);window.location.reload()});$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:"Log In | Costco Travel",
v2:"Cruise",v67:"1",v74:"/memberLogin"});this.initPageAnalytics("/cr/booking/searchWidget/memberLogin/")},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),d=b.closest(".cruise-item__state-room-detail.active"),e=d.data("uid");d=d.data("stateroom");b=b.data("title");e="ctcd=SHOW_AMENITIES_DESCRIPTION_MODAL&amenityDescriptionKey="+(e+b+d).replace(/[^a-zA-Z0-9]/g,"")+("&selectedSailingItemUid="+e);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Analytics.trackEvent("CR_Search_Results_Amenity",
"Click",this.getGaCruisePackageId(a));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseDetails.act",e,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onSortOptionChange:function(a){var b=$(a.currentTarget),d=b.val(),e=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("cruiseSearch.act","&ctcs=SORT_CRUISE_RESULTS&sortByType="+d,null,null,function(){if(this.message)e._showErrorModal(this);
else{e._onApplyResetFiltersOrSortResults(!0);b.focus();var a=e.module.TranslationTexts;switch(d){case "MINIMUM_PRICE":var g=a.SORTED_BY_MINIMUM_PRICE;break;case "DEPARTURE_DATE":g=a.SORTED_BY_DEPARTURE_DATE;break;case "CRUISE_LINE_NAME":g=a.DORTED_BY_CRUISE_LINE_NAME;break;case "DURATION":g=a.SORTED_BY_DURATION;break;case "SHIP_RATING":g=a.SORTED_BY_SHIP_RATING}utils.updateLiveContainer(g)}},null,null,null,null);$namespace.Analytics.trackEvent("CR_Search_Results_Sort","Click",d)},close:function(){for(var a in this.sailingAndStateroomTypePickers)this.sailingAndStateroomTypePickers.hasOwnProperty(a)&&
this.sailingAndStateroomTypePickers[a].close();$(window).off("resize orientationchange",this._onResize);$(window).off("resize orientationchange",this.initShowMore)},callFilteredSearch:function(){var a=$(".accordion-filter-group-container").map(function(){return $(this).find(" > .accordion-item.active").length?$(this).attr("id"):null}).get(),b=function(a){return"any"!=a},d=$("#destination-name-filters input:checkbox:checked").map(function(){return this.value}).get().filter(b),e=$("#duration-filter input:checkbox:checked").map(function(){return this.value}).get().filter(b),
f=$("#promotions-filter > .accordion-content input:checkbox:checked").map(function(){return this.value}).get(),g=$("#cruise-line-ship-filter input.cruiseLineRole:checkbox:checked").map(function(){return this.value}).get().filter(b),h=$("#cruise-line-ship-filter input.cruiseShipRole:checkbox:checked").not(":disabled").map(function(){return this.value}).get(),k=$("#ship-rating-filters input:checkbox:checked").map(function(){return this.value}).get().filter(b);b=$("#departure-ports-filter input:checkbox:checked").map(function(){return this.value}).get().filter(b);
var l=$(".filter-date-slider-start"),p=$(".filter-date-slider-end");l=l.attr("data-month")+"-"+l.text()+"-"+l.attr("data-year");p=p.attr("data-month")+"-"+p.text()+"-"+p.attr("data-year");var q=$("#cruiseTourSearchHidden").val(),r=$("#tourId").val(),v=null;v=void 0==r||"any"===r?r=void 0:r.split(",");r=$("#tour-direction-filter").find('[data-hook="filter-checkbox"]:checked').val();"any"===r&&(r=void 0);var n=$("#resultSortSelect").val(),t=$(event.target);this.sliderUsed.length&&(t=$("#"+this.sliderUsed));
var u=t.attr("id");this.sliderUsed="";var w=[];$(".innerAccordion").find(".showmore.no-padding .accordion.filter .accordion-item").each(function(){if(!$(this).hasClass("theAnyCheckbox")&&$(this).hasClass("active")){var a=$(this).find(".accordion-header").attr("data-cruise-line");a?w.push(a):(a=$(this).find(".accordion-header").attr("data-port-name"),w.push(a))}});$(".no-ui-slide-departure-date").addClass("requestInitiated");var y=this;t=function(){$(".no-ui-slide-departure-date").removeClass("requestInitiated");
if(this.message)y._showErrorModal(this);else{if(utils.Breakpoint.isMobile()){var b=$(".accordion-filter-group-container");b.find(" > .accordion-item").removeClass("active").find(".accordion-content").hide();b.find(" > .accordion-item img.arrow-image-size").attr("src",$("img.arrow-image-size").attr("src").replace("-up-","-down-"));$.each(a,function(a,b){$("#"+b+" > .accordion-item").addClass("active").find(".accordion-content").show()})}y.buildSlider();y._initAccordions();y._initInnerAccordions();
y._disableZeroCountFilterOptions();y._resetCruiseLineCruiseShip(g);y._activateCheckedAccordions(!0,w);y._setFilterFocus(u);$namespace.TabOrder.updatePageTabOrder()}};d={cruiseDurationCodes:e,cruiseLineCodes:g,destinationCodes:d,ratings:k,portCodes:b,promotionTypes:f,cruiseTours:q,cruiseTourIds:v,cruiseTourType:r,departureDateRanges:[l,p],shipCodes:h,sortByType:n};try{var z={ctcs:"PERFORM_FILTERED_CRUISE_SEARCH",cruiseSearchInfoJSON:JSON.stringify(d)};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearch.act",
$.param(z),null,"filter-content-div",t,null,null,null,null)}catch(x){}},buildSlider:function(a,b){var d=$(".filter-date-slider-start"),e=$(".filter-date-slider-end");a=d.data("firstday");b=e.data("lastday");var f=+d.data("year")==(new Date).getFullYear()&&+d.data("month")-1==(new Date).getMonth()?(new Date).getDate():1,g=(new Date(+e.data("year"),+e.data("month"),0)).getDate(),h=function(a){return Math.round(+a)},k=function(a){var b=$("html").attr("lang").split("-")[0];a=h(a);var d=$("#filter_date_slider_start .monthName").text();
return"en"===b?d+" "+a:a+" "+d};a={behaviour:"none",start:[a,b],margin:1,connect:!0,range:{min:f,max:g},step:1,format:{to:h,from:h},ariaFormat:{to:k,from:k}};b=$(".no-ui-slide-departure-date");this.filterDateSlider=b[0];noUiSlider.create(this.filterDateSlider,a);b.find(".noUi-handle-lower").attr({id:"dateSliderLower","data-taborder":"document"});b.find(".noUi-handle-upper").attr({id:"dateSliderUpper","data-taborder":"document"});this.filterDates={dirty:this.filterDates.dirty||[!1,!1],values:this.filterDates.values||
this.filterDateSlider.noUiSlider.get()};this.filterDateSlider.noUiSlider.on("update",function(a,b){d.text(a[0]);e.text(a[1])});this.filterDateSlider.noUiSlider.on("set",function(){var a=this.filterDateSlider.noUiSlider.get(),b=this.filterDates.values,d="";a[0]!==b[0]&&(this.filterDates.dirty[0]=!0,d="dateSliderLower");a[1]!==b[1]&&(this.filterDates.dirty[1]=!0,d="dateSliderUpper");this.filterDates.values=this.filterDateSlider.noUiSlider.get();$(".no-ui-slide-departure-date").hasClass("requestInitiated")||
(this.sliderUsed=d,this.callFilteredSearch())}.bind(this));$(this.filterDateSlider).on("keyup",".noUi-handle",function(a){if(37===a.which||39===a.which||40===a.which||38===a.which||35===a.which||36===a.which){a.stopPropagation();var b=$(a.currentTarget),d=b.closest(".no-ui-slide-departure-date")[0].noUiSlider;b=b.hasClass("noUi-handle-lower")?0:1;var e=d.options.range,f=d.get();37===a.which||40===a.which?--f[b]:39===a.which||38===a.which?++f[b]:36===a.which?f[b]=e.min:35===a.which&&(f[b]=e.max);if(f[b]===
f[!b|0]||f[b]<e.min||f[b]>e.max)return!1;d.set(f)}})},_showErrorModal:function(a){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseSearchResultsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))},
getGaCruisePackageId:function(a){a=$(a.target).closest(".cruiseSearchResultCard");return this.getGaCruisePackagePrefix(a[0].dataset)+"/"+this.sailingAndStateroomTypePickers[a.find(".cruise-item").data("block-group")].getSelectedSailingDate()},getGaCruisePackagePrefix:function(a){return"/"+a.destinationCode+"/"+a.cruiseLineCode+"/"+a.cruiseShipName},_gaForShopCardToolTip:function(a){$namespace.Analytics.trackEvent("CR_Search_Results_Shop_Card","ToolTip",this.getGaCruisePackageId(a))},_gaForCruiseHelpToolTip:function(a){var b=
"";a=a.currentTarget.dataset.recommendation;null!=a&&("1"===a?b="CR_Search_Results_Buyers_Choice":"2"===a&&(b="CR_Search_Results_Kirkland_Signature"),$namespace.Analytics.trackEvent(b,"Click","Open"))},_gaForAdjustSearchClick:function(a){$namespace.Analytics.trackEvent("CR_Search_Results_Zero",this.ui.destination.value+"_"+this.ui.cruiseLine.value+"_"+this.ui.duration.value,this.ui.departure.select[0].selectedOptions[0].text.replace(" ","_"))},_gaForShipRatingToolTipClick:function(a){$namespace.Analytics.trackEvent("CR_Search_Results_Ship_Rating",
"ToolTip",this.getGaCruisePackageId(a))},_adobeAnalyticsForPageLoad:function(){if(0<$("#cruise-search-results-page").data("search-result-count")){var a="search|cruise:search results";var b="1,15"}else a="search|cruise:zero search results",b="1,16";$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:b,v1:a,v2:"cruise"})},initPageAnalytics:function(a){var b=this.ui.departure.select[0].options[this.ui.departure.select[0].selectedIndex].text.split(" "),d=this.ui.destination.value,e=this.ui.cruiseLine.value,
f=this.ui.duration.value;if(""==d||void 0==d)d="ALL";if(""==e||void 0==e)e="ALL";if("0-0"==f||void 0==f)f="ALL";$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:{page:a+d+"/"+e+"/"+f+"/"+b[1]+b[0],location:window.location.href}})},_onApplyAnalytics:function(){var a={destinationFilter:{selector:"#destination-name-filters input:checkbox:checked",category:"CR_Search_Results_Filter_Destination",values:[]},cruiseLineFilter:{selector:"#cruise-line-ship-filter input:checkbox:checked.cruiseLineRole",
category:"CR_Search_Results_Filter_Cruise_Line",values:[]},cruiseShipFilter:{selector:"#cruise-line-ship-filter input:checkbox:checked.cruiseShipRole:not([disabled])",category:"CR_Search_Results_Filter_Ship_Name",values:[]},durationFilter:{selector:"#duration-filter input:checkbox:checked",category:"CR_Search_Results_Filter_Duration",values:[]},shipRatingFilter:{selector:"#ship-rating-filter input:checkbox:checked",category:"CR_Search_Results_Filter_Ship_Rating",values:[]},departurePortsFilter:{selector:"#departure-ports-filter input:checkbox:checked",
category:"CR_Search_Results_Filter_Departure_Port",values:[]},promotionsFilter:{selector:"#promotions-filter input:checkbox:checked",category:"CR_Search_Results_Filter_Promotions",values:[]}},b;for(b in a){var d=$(a[b].selector).map(function(){return $(this).attr("data-ga-value")}).get();a[b].values=d.filter(function(a){return 0>$.inArray(a,this.previousSearchCheckboxes)}.bind(this))}for(var e in a)a[e].values.length?$namespace.Analytics.trackEvent(a[e].category,"Click",a[e].values.join()):null;this.filterDates.dirty[0]&&
$namespace.Analytics.trackEvent("CR_Search_Results_Filter_Departure_Start","Click","Departure Start Date selected");this.filterDates.dirty[1]&&$namespace.Analytics.trackEvent("CR_Search_Results_Filter_Departure_End","Click","Departure End Date selected");self.filterDates={dirty:!1,values:!1}},_onCheckPricesClick:function(a){$namespace.Analytics.trackEvent("CR_Search_Results_Login","Stateroom Pricing",this.getGaCruisePackageId(a));this._login(a)},_onLoginToViewAmenitiesDetailsClick:function(a){$namespace.Analytics.trackEvent("CR_Search_Results_Login",
"Card_Credit_Amounts",this.getGaCruisePackageId(a));this._login(a)},saveCurrentCheckboxesForGA:function(){this.previousSearchCheckboxes=$("#packageSearchFilter input:checkbox:checked:not(.theAnyCheckbox)").map(function(){return $(this).attr("data-ga-value")}).get();this.previousSearchCheckboxes=this.previousSearchCheckboxes.concat($("#packageSearchFilter .theAnyCheckbox:checked").map(function(){return $(this).attr("data-ga-value")}).get())},initialize:function(a){var b=this;this.module=$.extend({},
a).module;this.isMobile=!1;this._initInnerAccordions();this._disableZeroCountFilterOptions();this._resetCruiseLineCruiseShip();this._activateCheckedAccordions();utils.updateLiveContainer();$("#packageSearchFilter").hasClass("initialized")||$namespace.Application.initializeOnMainContentReload();document.title=$("input#page_title").val();this.saveCurrentCheckboxesForGA();this._removeFocusFromCruiseSearchResultCards=function(){return $(".cruiseSearchResultCard").not(".notFocusable").on("click mousedown",
function(){var a=$(this);a.css({outline:"none"});a.addClass("notFocusable")})};this._removeFocusFromCruiseSearchResultCards();this._loadAmenitiesInView=function(){var a=$(this);a.addClass("loadingAmenities");var d=a.attr("data-load-count");void 0!=d?(d=+d,a.attr("data-load-count",++d)):(d=0,a.attr("data-load-count",d));var e=a.find(".cruiseDatePicker input:checked").data("block-date-item"),k="ctcsr=GET_AMENITIES&selectedSailingItemUid="+e,l=a.find(".cruiseAmenities").data("index"),p="cruiseAmenities_"+
l;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",k,null,p,function(){if(this.message)3>d?a.each(b._loadAmenitiesInView):a.hasClass("failedAmenities")?a.removeClass("loadingAmenities"):($("#cruiseAmenities_"+l).append(b.module.TranslationTexts.INCLUDED_EXTRAS_ERROR_MESSAGE),$("#"+p+"_label").removeClass("hidden"),a.removeClass("loadingAmenities"),a.addClass("failedAmenities"));else{$("#"+p+"_label").addClass("hidden");a.removeClass("failedAmenities");a.removeAttr("data-try-count");
a.addClass("hasAmenities").removeClass("loadingAmenities");var f=a.find(".cruiseStateroomPicker").not(".displayNone").find('[data-selected="true"]').data("blockPriceItem");$("[data-uid='"+e+"'][data-stateroom='"+f+"']").addClass("active");b._initShopCardWidget();$namespace.TabOrder.updatePageTabOrder()}},null,null,null,null)};this._getCruiseAmenities=function(){$(".cruiseSearchResultCard").not(".hasAmenities").not(".loadingAmenities").isInView().each(b._loadAmenitiesInView)};this._onShowMoreClick=
function(){var a=$("#showMoreLink"),d=$("#cruise-search-results-page"),e=d.data("search-result-count");d="&ctcs=LOAD_NEXT_SEARCH_RESULTS_PAGE&selectedSailingItemUid="+d.find(".cruise-item").data("block-group");var k="itinerary_"+($(".cruiseSearchResultCard").length+1);$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearch.act",d,null,null,function(d,e){this.message?b._showErrorModal(this):(d?a.addClass("hidden"):a.removeClass("hidden"),$("#cruiseSearchResults").append(this.responseText),
b._initAccordions(),b.initDateAndStateroomTypeWidgets(),b.initTooltips(),b.initShowMore(),b._removeFocusFromCruiseSearchResultCards(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.TabOrder.updatePageTabOrder(),utils.Breakpoint.isMobile()&&$("#cruiseSearchResults .cruise-item__col2 .accordion").find(".accordion-item").not(".active").find(".accordion-content").hide(),b._getCruiseAmenities(),$("#"+k).focus());e&&($("#packageSearchFilterAccordionButton").click(),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",
"ctcsr=POPULATE_CRUISE_SEARCH_FILTER_WIDGET",null,"filter-content-div",function(){b.buildSlider()}))},null,null,null,null);$namespace.Analytics.trackEvent("CR_Search_Results_Show_More","Click",e)};this._onEditSearchClick=function(a){a.preventDefault();$('section[data-hook="info-bar"]').addClass("hidden");$("section#searchWidget").removeClass("hidden");$(window).scrollTop($("section#searchWidget").offset().top);b.isMobile&&$namespace.SearchWidgetsModule.setTab("cruises",!0,!0);$namespace.TabOrder.updatePageTabOrder();
$("#search_cruises_form .form-required-label").focus();utils.updateLiveContainer();$namespace.Analytics.trackEvent("CR_Search_Results_Edit","Click","Edit")};this._onCruiseContinueClick=function(a){var d=$(a.target).attr("data-show-acknowledgement");$namespace.Analytics.trackEvent("CR_Search_Results_Cruise_Travelers","Click",this.getGaCruisePackageId(a));"true"===d?(d=b.module.TranslationTexts,$namespace.MessageUtil.showAcknowledgementsMessage({title:d.MESSAGE_TITLE_ACKNOWLEDGEMENT,header:d.CURRENCY_CONVERSION_WARNING_HEADER,
text:d.CURRENCY_CONVERSION_WARNING_MESSAGE},function(){b._proceedToTravelersPage(a)},d.BUTTON_TITLE_I_UNDERSTAND,null)):b._proceedToTravelersPage(a)};this.initDateAndStateroomTypeWidgets=function(){$("[data-block-group]").not(".initialized").each(function(a,d){a=$(d);d=a.data("block-group");var e=a.data("tax-fee-included")?".cruiseSailingTaxAndFeeIncluded":".cruiseSailingTaxAndFeeAdditional",f=a.closest(".cruiseSearchResultCard");f={gaCruisePackagePrefix:b.getGaCruisePackagePrefix(f[0].dataset),stateroomEventCategory:"CR_Search_Results_Stateroom_Type",
departureDateEventCategory:"CR_Search_Results_Departure_Date"};try{b.sailingAndStateroomTypePickers[d]=new $namespace.Widgets.CruiseSailingAndStateroomTypeWidget(a,{groupID:d,cruisePriceEl:".cruiseSailingMinimumPrice",selectedAmenitiesSelector:".cruiseAmenities",taxAndFeesSelector:e,gaOptions:f}),a.addClass("initialized")}catch(l){console.error(d+" - "+l)}})};this._onFilterCheckboxClick=function(a){if($namespace.GlobalConstants.RESPONSIVE_CRUISE_RESULTS_AND_DETAILS_PAGES_ENABLED){a=$(a.target);if(a.hasClass("theAnyCheckbox"))1==
a.prop("checked")&&(a.closest(".filterGroup").find("input:checkbox").each(function(a,b){$(b).prop("checked",!1)}),a.prop("checked",!0));else if(a.closest(".filterGroup").find(".theAnyCheckbox").prop("checked",!1),a.hasClass("cruiseLineRole")){var b=a.prop("checked");$(a).parents(".accordion-item:first").find("input.cruiseShipRole:checkbox").prop({checked:b,disabled:b})}this.callFilteredSearch()}};this._initAccordions();this.initDateAndStateroomTypeWidgets();this.initShowMore();this.ui.destination=
$namespace.SearchWidgetsModule.views[0].ui.destination;this.ui.departure=$namespace.SearchWidgetsModule.views[0].ui.departure;this.ui.cruiseLine=$namespace.SearchWidgetsModule.views[0].ui.cruiseLine;this.ui.duration=$namespace.SearchWidgetsModule.views[0].ui.duration;this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});this._initSearchFilterAnalytics();a=$(window);if(this.isMobile)$(document.body).on("touchmove",this._getCruiseAmenities);a.on("resize scroll",
this._getCruiseAmenities);this.buildSlider();this.initTooltips();a.on("resize orientationchange",this._onResize);a.on("resize orientationchange",this.initShowMore);this._onResize();var d=$(document);d.on("ct.accordion.opening","#packageSearchFilter",function(a){b.isMobile&&"packageSearchFilter"===$(a.target).attr("id")&&$("body").addClass("scroll-lock")});d.on("ct.accordion.closed","#packageSearchFilter",function(a){"packageSearchFilter"===$(a.target).attr("id")&&$("body").removeClass("scroll-lock")});
b._getCruiseAmenities();if((a=$namespace.HistoryNavigation.getHistoryData())&&a.selectedItinerary){var e=$("#"+a.selectedItinerary)[0];e&&(setTimeout(function(){e.scrollIntoView({block:"center"});e.focus()},100),$(window).load(function(){setTimeout(function(){e.scrollIntoView({block:"center"});e.focus()},100)}));delete a.selectedItinerary;$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),a)}else $namespace.AjaxUtil.makeAjaxCall("cruiseSearchResults.act",
"ctcsr=CRUISE_CARD_ANCHOR_TAG_ID",null,null,function(a){a?setTimeout(function(){$("#"+a)[0].scrollIntoView({block:"center"})},100):d.scrollTop(0)});this._adobeAnalyticsForPageLoad();this.initPageAnalytics("/cr/booking/searchWidget/sailingResults/");$namespace.Storage.remove($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};COUNTRY_CODE_US=$namespace.Country.US_COUNTRY_CODE;COUNTRY_CODE_CA=$namespace.Country.CANADA_COUNTRY_CODE;$namespace.View=$namespace.View||{};
$namespace.View.CruisePaymentsView=Backbone.View.extend({el:"#cruisePayment",ui:{chatLink:null,form:null,scheduledDueDate:null},events:{'click input[name="selectPaymentOption_ghp"]':"_onPayDepositOrFullRadioClick","click #manage_payments":"_onManagePaymentsClick","click #showmore-trigger":"_readMoreInformation",'change select[data-hook="changeSurveyQuestionOptions"]':"_chooseSurveyOption",'click a[data-hook="show-more-itinerary-link"]':"_onShowMoreSailingItineraryClick","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickSailingItinerary",
"click .print-reservation":"_onPrintReservation",'click [data-hook="email_itinerary"]':"_onEmailReservationClick",'click a[data-hook="shop_card_tooltip"]':"_shopCardTooltip","click .travel-description-travel-rating a[data-tooltip]":"_cruiseRatingToolTip",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",'click a[data-modal="data-itinerary-modal"]':"_onItineraryModalClick","click .shopCardModal":"_onShopCardModalClick",
"click .shipboardCreditModal":"_onShipboardCreditModalClick","click .amenityModal":"_onAmenityModalClick","click .transferTypeLearnMore":"_onTransferTypeLearnMoreClick",'click a[data-hook="trip-protection-link"]':"_onTripProtectionClick",'click [data-hook="add-flight-info"]':"_onAddFlightInfoClick",'click [data-modal-type="RoomRate"]':"_onRoomRateClick",'click [data-modal-type="IncludedExtra"]':"_onIncludedExtraClick",'click [data-modal-type="OptionalServices"]':"_onOptionalServicesClick",'click [data-modal-type="MealPlans"]':"_onMealPlansClick",
'click [data-transfer-type="ArrivalTransfer"]':"_onArrivalLearnMoreClick",'click [data-transfer-type="DepartureTransfer"]':"_onDepartureLearnMoreClick",'click [data-transfer-type="CruiseHotelPierTransfer"]':"_onCruiseHotelPierTransferLearnMoreClick",'click [data-transfer-type="CruisePierHotelTransfer"]':"_onPierHotelTransferLearnMoreClick",'click [data-transfer-type="CruiseAirportPierTransfer"]':"_onCruiseAirportPierTransferLearnMoreClick",'click [data-transfer-type="CruisePierAirportTransfer"]':"_onPierAirportTransferLearnMoreClick",
'click a[id="opc_Disclaimer_Link"]':"_onOpcDisclimerModalClick"},initialize:function(a){var b=this;a=$.extend({},a);b.ui.scheduledDueDate=a.scheduledDueDate;b.ui.grossPaymentAmount=a.grossPaymentAmount;b.ui.minimumDepositAmount=a.minimumDepositAmount;b.module=a.module;b.win=$namespace.SearchWidgetsModule.getWindowDimensions();b.isValidationSuccess=!1;utils.updateLiveContainer();b.ui.form=$("#cruisePayment");b.translations=b.module.TranslationTexts;b.messages=b.module.TranslationMessages;b.initializeComponents();
b.initializeErrorHandlers();b.closeAccordionOnInitialPageLoad();b.setPageTitle(a.fromFinalizePayment);b.loadCruisePaymentPage=function(){$("#payment-and-finalize-payment-and-booking-confirmation").removeClass("confirmation-page");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param({cpp:"LOAD_INFO_BAR_LINKS"}),null,"info-bar-links",function(){b.initializeErrorHandlers();$(".continueToReviewDetails").off("click").on("click",b._onContinueToReviewDetailsClick.bind(b));b.closeAccordionOnInitialPageLoad();
b.module.activePage="cruisePayment";b.initializeComponents();document.title=$("#page_title").html();$("html, body").animate({scrollTop:0},0);$("#paymentPageHeading").focus()})};this.summaryAccordionTracking();b.removeDuplicateTooltips=function(){$namespace.Application.appendTooltipToBody();$('[id="shop_card_help_tooltip"]').not("body > #shop_card_help_tooltip").remove();$('[id="cruise-description-travel-ratings-tooltip"]').not("body > #cruise-description-travel-ratings-tooltip").remove()};b.loadFinalizeBookingPage=
function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param({cpp:"LOAD_INFO_BAR_LINKS",loadFinalizePaymentPage:"true"}),null,"info-bar-links",function(){b.removeDuplicateTooltips();b.initializeShopCardToolTips();$("#infoBarContinueButton").off("click").on("click",b._onContinueToBookingRecap.bind(b));$("#bottomContinueButton").on("click",b._onContinueToBookingRecap.bind(b));b.closeAccordionOnInitialPageLoad();b.module.activePage="cruiseFinalize";$namespace.TabOrder.updatePageTabOrder();
document.title="";$namespace.DomUtil.setElementLoadingMask(!1);setTimeout(function(){document.title=$("#page_title").html();var a=b.getCruiseDocumentPath("finalizeBooking");b.trackPageAnalytics(a,document.title);$("#finalizeBookingHeading").focus()},0);$(window).resize();$("html, body").animate({scrollTop:0},0)})};var d=function(){b.removeDuplicateTooltips();b.closeAccordionOnInitialPageLoad();b.module.activePage="cruiseConfirmation";b.setIdForExternalInfoLink();b.initShipRatingTooltips();b.showSpecialRequestAccordion();
b.initializeShopCardToolTips();b.initializeAccordion();b.initAccordionAnalytics();b.initializeMegaToolTips();document.title="";setTimeout(function(){document.title=$("#page_title").html()},0);$("html, body").animate({scrollTop:0},0);$("#bookingRecapHeading").focus();b.doEmailTracking();$namespace.DomUtil.setElementLoadingMaskForPayment(!1);$(window).resize()};b.loadBookingConfirmationPage=function(a){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseBookingConfirmationActivity.act",$.param({cbca:"CRUISE_ACCOUNT_BOOKING_CONFIRMATION_SIDEBAR_CONTENT"}),
null,"sidebarAccordion",function(){var e={cpp:"LOAD_INFO_BAR_LINKS",loadBookingConfirmationPage:"true"};$("#payment-and-finalize-payment-and-booking-confirmation").addClass("confirmation-page");if(a)e.lastStateroom="true",f=function(){d();$("#infoBarContinueButton").off("click").on("click",b._onGoToYourAccount.bind(b));b.initializeTabSwitcher();$namespace.TabOrder.updatePageTabOrder()};else var f=function(){d();$("#infoBarContinueButton").off("click").on("click",b._onContinueToNextStateroom.bind(b));
$namespace.TabOrder.updatePageTabOrder()};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param(e),null,"info-bar-links",f);e=b.getCruiseDocumentPath("Confirmation");b.trackPageAnalytics(e,document.title);$namespace.Application.initializeOnMainContentReload()})};b.ui.continueButtons.off("click");if("cruisePayment"===b.module.activePage){$(".continueToReviewDetails").on("click",b._onContinueToReviewDetailsClick.bind(b));a.fromFinalizePayment&&($("#paymentPageHeading").focus(),
$("html, body").animate({scrollTop:0},0));a=this.getCruiseDocumentPath("paymentOptions");var e=$("#page_title").html();this.trackPageAnalytics(a,e)}else if("cruiseFinalize"===b.module.activePage)b.initializeShopCardToolTips(),$(".continueToCompleteBooking").on("click",b._onContinueToBookingRecap.bind(b)),a=this.getCruiseDocumentPath("finalizeBooking"),e=$("#page_title").html(),this.trackPageAnalytics(a,e);else{d();$("#payment-and-finalize-payment-and-booking-confirmation").addClass("confirmation-page");
if(0<$(".continueToNextStateroom").length)$("#infoBarContinueButton").off("click").on("click",b._onContinueToNextStateroom.bind(b));else $("#infoBarContinueButton").off("click").on("click",b._onGoToYourAccount.bind(b));a=this.getCruiseDocumentPath("Confirmation");e=$("#page_title").html();this.trackPageAnalytics(a,e);$namespace.TabOrder.updatePageTabOrder()}this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink.length)this.ui.chatLink.on("click",function(){var a=$("#page_title").html();
a="Confirmation - Cruises | Costco Travel"!=a?a.split(" ")[0].toLowerCase()+a.split(" ")[1]:"Booking Confirmation";a="/cr/booking/bookingWidget/"+a;var b=$("#cruisePayment-json-data").text().trim();(b=JSON.parse(b))&&(a=a+"/"+b[6]+"/"+b[0]+"/"+b[1]+"/"+b[2]);$namespace.Analytics.trackEvent("Chat","Initiate_Chat",a)})},_chooseSurveyOption:function(){""!==$("#surveyResponse").val()&&$namespace.Analytics.trackEvent("CR_Payment_Options_How_Did_You_Hear",$("#surveyResponse").val(),this.getCruisePackageId())},
_shopCardTooltip:function(){var a=$("#page_title").html();$namespace.Analytics.trackEvent("CR_"+("Confirmation - Cruises | Costco Travel"!=a?"Payment_Options":"Booking_Confirmation")+"_Shop_Card","ToolTip",this.getCruisePackageId())},_cruiseRatingToolTip:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Ship_Rating","ToolTip",this.getCruisePackageId())},_onShowMoreSailingItineraryClick:function(a){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Itinerary","Show More",this.getCruisePackageId());
$("div.itinerary-box").find(".accordion").removeClass("displayNone");$("div.itinerary-box").find(".itinerary-table").removeClass("itinerary-table-display-none");$namespace.TabOrder.updatePageTabOrder();a=$("div.itinerary-box .first-hidden-item");a.attr("tabindex")||a.attr("tabindex","-1");setTimeout(function(){$("div.itinerary-box .first-hidden-item").focus();$("#showMoreItineraryAccordion").hide()},300)},_onGalleryThumbClickSailingItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,
{isCruiseGallery:!0})},_readMoreInformation:function(a){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Required_Docs_Read_More","Click",this.getCruisePackageId());$(a.target).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false").find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$(window).trigger("resize");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():
$("#desktopReadMoreLink").focus();$namespace.TabOrder.updatePageTabOrder()},setIdForExternalInfoLink:function(){var a=$(".confirmation-req-doc a");$(a).each(function(){var a=$(this);a.addClass("external-link").attr("data-url",a.attr("href")).removeAttr("href").removeAttr("target")});$(".external-link").on("click",this.checkTermsAndConditionLinksClick);$(".showmore-content .blue-bullets li").each(function(a,d){d=$(d);1<=a?(d.attr("aria-hidden","true"),$namespace.TabOrder.updatePageTabOrder(),1==a&&
($namespace.Utils.Breakpoint.isMobile()?d.attr("id","mobileReadMoreLink"):d.attr("id","desktopReadMoreLink"),d.attr("tabindex","-1"))):d.find("a").attr("data-taborder","document")})},checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},getCruisePackageId:function(){var a=this.$el.attr("data-destination"),b=$("#cruisePayment-json-data").text().trim(),d;b&&(d=JSON.parse(b));a="/"+a;this.cruiseLineName=d[0];this.fromOfferPage=
"true"==d[7];d&&(a=a+"/"+this.cruiseLineName+"/"+d[1]+"/"+d[2]);return a},trackFormFieldsAnalytics:function(){var a,b=this;this._zipStateGATracking();this.$el.find(".deposit-payment-credit-card-form .addressForm, .full-payment-credit-card-form .addressForm, .scheduleCreditCardForm .addressForm").each(function(d,e){e.addressForm&&(a="Error/CR/Payment_Options,street_required,"+b.getCruisePackageId(),e.addressForm.streetGATracking(a),a="Error/CR/Payment_Options,city_required,"+b.getCruisePackageId(),
e.addressForm.cityGATracking(a))});this.$el.find(".paymentForm").each(function(d,e){e.paymentForm&&e.paymentForm.shopCardCheckboxGATracking&&(a="Error/CR/Payment_Options,shipping_address_required,"+b.getCruisePackageId(),e.paymentForm.shopCardCheckboxGATracking(a));e.paymentForm&&e.paymentForm.primaryPhoneGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,phone_number_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=
"Error/CR/Payment_Options,phone_number_invalid,"+b.getCruisePackageId(),e.paymentForm.primaryPhoneGATracking(a));e.paymentForm&&e.paymentForm.primaryEmailGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,email_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,email_invalid,"+b.getCruisePackageId(),e.paymentForm.primaryEmailGATracking(a));e.paymentForm&&e.paymentForm.datePickerGATracking&&
(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,scheduled_date_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,scheduled_date_invalid,"+b.getCruisePackageId(),e.paymentForm.datePickerGATracking(a))});this.$el.find(".creditCardForm").each(function(d,e){e.creditCardForm&&(a="Error/CR/Payment_Options,cardholder_name_required,"+b.getCruisePackageId(),e.creditCardForm.cardholderGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=
"Error/CR/Payment_Options,CC_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,CC_invalid,"+b.getCruisePackageId(),e.creditCardForm.creditCardNumberGATracking(a));e.creditCardForm&&e.creditCardForm.cvvCodeGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,CVV_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,CVV_invalid,"+b.getCruisePackageId(),
e.creditCardForm.cvvCodeGATracking(a));e.creditCardForm&&e.creditCardForm.creditCardExpiryMonthGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,expiration_month_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,expiration_month_required,"+b.getCruisePackageId(),e.creditCardForm.creditCardExpiryMonthGATracking(a));e.creditCardForm&&e.creditCardForm.creditCardExpiryYearGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=
"Error/CR/Payment_Options,expiration_year_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,expiration_date_past,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL]="Error/CR/Payment_Options,expiration_before_scheduled_date,"+b.getCruisePackageId(),e.creditCardForm.creditCardExpiryYearGATracking(a))})},_zipStateGATracking:function(){var a,b=this;this.$el.find(".deposit-payment-credit-card-form .addressForm, .full-payment-credit-card-form .addressForm, .scheduleCreditCardForm .addressForm").each(function(d,
e){e.addressForm&&(d=$(e).find(".country").val(),a=d==COUNTRY_CODE_CA?"Error/CR/Payment_Options,province_required,"+b.getCruisePackageId():"Error/CR/Payment_Options,state_required,"+b.getCruisePackageId(),e.addressForm.stateOrProvinceGATracking(a),a={},d==COUNTRY_CODE_CA?(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,postalcode_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,postalcode_invalid,"+b.getCruisePackageId()):
(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/CR/Payment_Options,zipcode_required,"+b.getCruisePackageId(),a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/CR/Payment_Options,zipcode_invalid,"+b.getCruisePackageId()),e.addressForm.zipCodeGATracking(a))})},_onManagePaymentsClick:function(){$namespace.GlobalConstants.RESPONSIVE_MANAGE_AND_REVIEW_PAYMENTS_PAGE_ENABLED?($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("managePaymentsActivity.act",
$.param({mpa:"LOAD_MANAGE_PAYMENTS_PAGE"}),null,"mainContent",function(){$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_CONFIRMATION);$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS);$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1);$(".partial-page-load-heading").focus()})):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS)},
trackPageAnalytics:function(a,b){$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a});$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:b,v2:"Cruise",v74:a})},getCruiseDocumentPath:function(a){var b="bookingWidget",d=this.getCruisePackageId();this.fromOfferPage&&(b="offerPage");return"/cr/booking/"+b+"/"+a+d},summaryAccordionTracking:function(){var a=$("#cruiseSummaryAccordionDesktop");a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryPaymentAccordion,
this));a=$("#cruiseSummaryAccordionMobile");a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryPaymentAccordion,this))},cruiseSummaryPaymentAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Cruise_Summary","Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Travelers","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Stateroom",
"Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Flights","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Hotel","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Payment_Options_Results_Transportation","Click","Expand")},_onPayDepositOrFullRadioClick:function(a){var b=this,d={pfa:"CHANGE_PAYMENT_FORM",
paymentFormTypeValue:"DEPOSIT"};"full"===$(a.target).val()&&(d.paymentFormTypeValue="FULL");var e=function(){b.initializeComponents();b.initializeErrorHandlers();$("#shippingAddressForm").find(".addressForm").trigger("reset")};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(d),null,"deposit-or-full-payment",function(a){a&&(d.pfa="LOAD_PAYMENT_FORM",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(d),null,"deposit-or-full-payment",e))})},
_onContinueToReviewDetailsClick:function(a){$namespace.Widgets.ErrorHandler.uniqueTrackingMessages=[];$(".errorHandlerInitialized").trigger("removeError").trigger("validate",[!0]);$(a.target).trigger("validate");a=$(".errorDetected").filter(":visible");var b=a.first();0<b.length?(b.hasClass("")&&(b=a[1]),b.focus()):this.validateAndSubmit()},_replaceContinueLabel:function(a){$(".continueToCompleteBooking").each(function(){var b=$(this);b.addClass("navigate-my-travel-account");b.html(a);b.addClass("btn-white");
$(".finsih-pay-text").remove()});$("#bottomContinueButton").removeClass("btn-secondary");$("#cruisePaymentBackLink").remove();$(".warningMessage").remove();$("#finalizeStateroomDetails").addClass("pt1");$namespace.TabOrder.updatePageTabOrder()},_updateBlueStickyBar:function(){var a={cpp:"DISPLAY_WIDESCREEN_INFO_BAR"};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param(a),null,"cruise-wide-stickybar",null);a={cpp:"DISPLAY_NARROWSCREEN_INFO_BAR"};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",
$.param(a),null,"cruise-stickybar",null)},_onContinueToBookingRecap:function(){var a=this;$namespace.DomUtil.setElementLoadingMaskForPayment(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseFinalizeBookingActivity.act",$.param({cfbp:"PROCESS_CRUISE_PAYMENT"}),null,"payment-and-finalize-payment-and-booking-confirmation",function(b,d,e){a.removeDuplicateTooltips();var f=JSON.parse(b);if(f.isError){$namespace.DomUtil.setElementLoadingMaskForPayment(!1);var g=function(){"PAYMENT"==f.pageToLoad?
window.history.back():"CONFIRMATION"==f.pageToLoad&&e&&($("#info-bar-links").addClass("info-bar-booking-confirmation"),$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_FINALIZE_BOOKING),$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_CONFIRMATION),$namespace.DomUtil.setElementLoadingMaskForPayment(!0),a.loadBookingConfirmationPage(d),f.superBookingPartialFailure&&a._updateBlueStickyBar());"MYACCOUNT"==f.labelChange&&
a._replaceContinueLabel("My Account");"GO TO MY ACCOUNT"==f.labelChange&&a._replaceContinueLabel("Go to Your Account")};b=f.enableErrorNotes?f.errorMessage+"<br />"+a.module.TranslationTexts.ERROR_NOTE:f.errorMessage;f.isSendingItineraryError?g():$namespace.MessageUtil.showMessage({title:a.module.TranslationTexts.ERROR_TITLE,text:b});$(".modal-close").last().click(g);3512===f.errorCode?$namespace.Analytics.trackEvent("Error/CR/Booking_Confirmation","CRUISE_BOOKING_CONFIRMATION_ERROR = 3512",a.getCruisePackageId()):
"CONFIRMATION"==f.pageToLoad&&f.showErrorCode101?$namespace.Analytics.trackEvent("Error/CR/Booking_Confirmation","Payment_Error_101",a.getCruisePackageId()):f.showErrorCode101&&f.enableErrorNotes?$namespace.Analytics.trackEvent("Error/CR/Finalize_Booking","Payment_Error_101",a.getCruisePackageId()):f.showErrorCode101&&$namespace.Analytics.trackEvent("Error/CR/Finalize_Booking","Payment_Error_101",a.getCruisePackageId())}else e?($("#info-bar-links").addClass("info-bar-booking-confirmation"),$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_FINALIZE_BOOKING),
$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_CONFIRMATION),a.loadBookingConfirmationPage(d)):($namespace.DomUtil.setElementLoadingMaskForPayment(!1),a.loadFinalizeBookingPage())})},_onContinueToNextStateroom:function(){var a=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseMultiStateroomPayment.act",$.param({cmsrp:"LOAD_NEXT_STATEROOM"}),null,"payment-and-finalize-payment-and-booking-confirmation",function(b,d){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSummaryAccordion.act",
$.param({csa:"DISPLAY_CRUISE_SIDEBAR_ACCORDION",includeChatActivity:!0,page:10}),null,"sidebarAccordion",function(){a.initializeComponents();$namespace.Application.initializeOnMainContentReload()});a.removeDuplicateTooltips();$("#info-bar-links").addClass("no-back-link").removeClass("info-bar-booking-confirmation");a.ui.grossPaymentAmount=b;a.ui.minimumDepositAmount=d;a.module.options.grossPaymentAmount=b;a.module.options.minimumDepositAmount=d;$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_CONFIRMATION);
$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PAYMENT);a.loadCruisePaymentPage()})},_onGoToYourAccount:function(){$namespace.AjaxUtil.makeAjaxCall("membership.act",$.param({mb:"27"}))},_onPrintReservation:function(a){a.preventDefault();var b=this;a=$("#payment-and-finalize-payment-and-booking-confirmation").find("#bookingId").html();var d=_secureContextRoot+_webLoc+"/itinerary/"+a+"?printItinerary=true&_uid="+utils.getUID();window.open(d,"_blank","alwaysLowered=true,width=750,height=500,resizable,scrollbars,left=80,top=80");
$namespace.AjaxUtil.makeAjaxCall("emailOrPrintItineraryActivity.act",$.param({epa:"PRINT_ITINERARY",bookingId:a}),null,null,function(){this.message&&$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Print_issue",b.packageId)},null);$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Print_Reservation","Click",b.getCruisePackageId())},_onEmailReservationClick:function(a){a.preventDefault();var b=this;a=$("#emailItineraryPopup").html();
(new $namespace.Widgets.Confirm(a,function(a){var d=a.el.find("#email_itinerary").val(),f=b.module.TranslationTexts,g=$('a[data-hook="email_itinerary"]');""==d?(a.hide(),$namespace.MessageUtil.showMessage({type:1,text:f.EMAIL_ADDRESS_MISSING_MESSAGE,title:f.EMAIL_SENT_MESSAGE_TITLE,itemToFocus:g})):$namespace.Utils.isValidEmail(d)?(a.el.find("button").addClass("disabled").prop("disabled",!0),$namespace.DomUtil.setElementLoadingMask(!0),b.sendEmailItinerary(d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",
!1);$namespace.DomUtil.setElementLoadingMask(!1);var d=b.module.TranslationTexts,e=$('a[data-hook="email_itinerary"]');this.message?($namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e}),$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Email_server_issue",b.packageId)):$namespace.MessageUtil.showMessage({type:0,text:d.EMAIL_SENT_SUCCESSFUL_MESSAGE,title:d.EMAIL_SENT_MESSAGE_TITLE,
itemToFocus:e})})):(a.hide(),$namespace.MessageUtil.showMessage({type:1,text:f.EMAIL_ADDRESS_INVALID_MESSAGE,title:f.EMAIL_SENT_MESSAGE_TITLE,itemToFocus:g}))},null,!0)).show();$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Email_Reservation","Click",b.getCruisePackageId())},sendEmailItinerary:function(a,b){a={epa:"SEND_EMAIL_ITINERARY",emailId:$namespace.StringUtil.escapeNonAsciiChars(a)};$namespace.AjaxUtil.makeAjaxCall("emailOrPrintItineraryActivity.act",$.param(a),null,null,b)},validateAndSubmit:function(){var a=
this,b=$(".paymentForm").trigger("generatePaymentFormDetails").data("paymentFormDetails");b={pfa:"VALIDATE_CREDIT_CARDS_AND_CONTINUE_TO_FINALIZE",paymentFormDetails:JSON.stringify(b)};$namespace.AjaxUtil.makeAjaxCall("paymentFormActivity.act",$.param(b),null,null,function(b){b=JSON.parse(b);a.isValidationSuccess=b.successful;a.isValidationSuccess&&($("html, body").animate({scrollTop:0},0),$namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseFinalizeBookingActivity.act",
$.param({cfbp:"LOAD_CRUISE_FINALIZE_BOOKING_PAGE"}),null,"payment-and-finalize-payment-and-booking-confirmation",function(){$("#info-bar-links").removeClass("no-back-link");$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PAYMENT);$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_FINALIZE_BOOKING);a.loadFinalizeBookingPage()}))})},closeAccordionOnInitialPageLoad:function(){var a=$(".accordion-menu").find(".accordion-item");
a.removeClass("active");a.find(".accordion-content").hide();a.find(".accordion-button").attr("aria-expanded","false");a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")},initializeComponents:function(){$(window).resize();var a="Error/CR/Payment_Options,amount,"+this.getCruisePackageId(),b={scheduledDate:this.ui.scheduledDate,scheduledDueDate:this.ui.scheduledDueDate,translations:this.translations,messages:this.messages,trackingText:a,trackFormFieldsAnalytics:$.proxy(this.trackFormFieldsAnalytics,
this)};$(".paymentForm").each(utils.eachUninitialized(function(a,d){d.paymentForm=new $namespace.Widgets.PaymentForm(a,b)}));var d={translations:this.translations};$(".addressForm").each(utils.eachUninitialized(function(a,b){b.addressForm=new $namespace.Widgets.AddressForm(a,d)}));$(".accordion-menu").each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));var e={grossPaymentAmount:this.ui.grossPaymentAmount,minimumDepositAmount:this.ui.minimumDepositAmount,
amountLessThanMsg:this.messages.AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,totalLessThanMsg:this.messages.TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,amountGreaterThanMsg:this.messages.AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,totalGreaterThanMsg:this.messages.TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,depositMinMaxMsg:this.messages.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE,trackingText:a};this.ui.continueButtons=$(".continueToReviewDetails").not("amountValidatorInitialized");
this.ui.continueButtons.off("validate");this.ui.continueButtons.each(function(a,b){b.amountValidator=new $namespace.Widgets.AmountValidator($(b),e)});this.$el.find(".country").on($namespace.Widgets.AddressForm.countryChangeEvent,$.proxy(this._zipStateGATracking,this));this.initializeTabSwitcher();this.trackFormFieldsAnalytics();this.setIdForExternalInfoLink();this.initAccordionAnalytics();$namespace.TabOrder.updatePageTabOrder()},initializeErrorHandlers:function(){$(".creditCardAmountTextBox").each(function(){var a=
$(this);a.hasClass("errorHandlerInitialized")||new $namespace.Widgets.ErrorHandler(a)})},initializeShopCardToolTips:function(){$('[data-tooltip="shop_card_help_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),{parentSelector:"li"}))})},initializeTabSwitcher:function(){var a=this,b=$('[data-hook="tab-switcher"]');if(0<b.length){a.stateroomTabSwitcher=new $namespace.Widgets.TabSwitcher(b);a.stateroomTabSwitcher.initialize();var d=$(".stateroomTabs");
d.on("click",function(){var b=$(this);if(!b.hasClass("active")){d.removeClass("active");b.addClass("active");var f=$("#"+b.closest("li").data("tab")).find(".cruiseBookingConfirmationContent"),g=f.data("booking"),h=f.data("confirmation"),k=f.data("balance");f=f.data("cancelled");var l=$("#bookingCancelledDiv"),p=$("#successfullyBookedDiv"),q=$("#emailSentConfirmation");$("#bookingId").html(g);$("#cruiseConfirmationNumber").html(h);1==f?(p.addClass("displayNone"),q.addClass("displayNone"),l.removeClass("displayNone")):
(p.removeClass("displayNone"),q.removeClass("displayNone"),l.addClass("displayNone"));h=$("#manage_payments");k&&!f?h.show():h.hide();a.initShipRatingTooltips();a.showSpecialRequestAccordion();a.removeDuplicateTooltips();a.initializeShopCardToolTips();b={cbca:"SWITCH_STATEROOM",stateroomIndex:b.data("stateroom-index")};$namespace.AjaxUtil.makeAjaxCall("cruiseBookingConfirmationActivity.act",$.param(b),null,null,function(){$("#priceSummaryHeading_"+g).focus()});$(window).resize()}})}},initializeAccordion:function(){$(".accordion").each(utils.eachUninitialized(function(a,
b){b.accordion=new $namespace.Widgets.Accordion(a)}))},setPageTitle:function(){setTimeout(function(){document.title=$("#page_title").html()},0)},initShipRatingTooltips:function(){$("#payment-and-finalize-payment-and-booking-confirmation").find(".travel-description-travel-rating a[data-tooltip]").not(".initialized").each(utils.eachUninitialized(function(a,b){new $namespace.Widgets.Tooltip($(a),{parentSelector:".cruise-item__ratings"})}))},showSpecialRequestAccordion:function(a){this.$el.find('[data-hook="special-request-item"]').each(utils.eachUninitialized(function(a,
d){d.accordion=new $namespace.Widgets.Accordion(a)}));this.removeCardStyling();$namespace.TabOrder.updatePageTabOrder()},removeCardStyling:function(){this.$el.find(".cruiseBookingConfirmationContent").each(function(){var a=$(this);a.find(".specialRequestCard").removeClass("card");a.find(".special-request-accordions").each(function(){$(this).find(".accordion").removeClass("card")});a.find("#specialRequestsNoteAndInfotext").parent(".sp-top-1").removeClass("card")})},initializeMegaToolTips:function(){var a=
this,b=function(b){var d=new $namespace.Widgets.Megatip(b);b[0].megatip=d;d.megatip.find('[data-hook="accordion"]').each(function(a,b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));b.accordion.close(!0)});b.addClass("initialized");b.on("click",$.proxy(d._onClick,d));b.on("click",function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Flights_View_Details","Click",a.getCruisePackageId())});return d},d=$("#megaTip_outbound"),e=$("#megaTip_inbound");0<d.length&&b(d);0<e.length&&
b(e)},_resetFlightsAccordion:function(a){a=$(".megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onItineraryModalClick:function(a){this.showItineraryRemarksModal(a)},showItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");b=b.attr("data-cancellation-policy");
a={cppt:"SHOW_ITINERARY_REMARKS",itineraryCode:a,cancellationPolicy:b};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePrePostTransportation.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onShopCardModalClick:function(a){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Shop_Card","Click",this.getCruisePackageId());this.showIncludedExtrasPopup(a,
0)},_onShipboardCreditModalClick:function(a){this.showIncludedExtrasPopup(a,1)},_onAmenityModalClick:function(a){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Amenity","Click",this.getCruisePackageId());var b=$(a.currentTarget).attr("data-amenity-id");this.showIncludedExtrasPopup(a,2,b)},_onTripProtectionClick:function(a){a=$(a.currentTarget).attr("data-link");$namespace.Navigation.loadExternalUrl(a)},showIncludedExtrasPopup:function(a,b,d){a={amenitiesModalActivity:"LOAD_AMENITIES_MODAL_FOR_BOOKING_WORK_FLOW",
stateroomIndex:$(a.currentTarget).attr("data-booking-index"),modalType:b,amenityId:d};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("cruiseAmenitiesModal.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onTransferTypeLearnMoreClick:function(a){this.showItineraryRemarksModal(a)},
_onAddFlightInfoClick:function(a){var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("bookingTransferActivity.act",$.param({bta:"LOAD_CRUISE_SPECIAL_REQUESTS_ADD_FLIGHT_INFO_POPUP"}),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=new $namespace.Widgets.Modal(this.responseText,function(){e&&e.off("click")});$(".flightNumber").on("keypress",function(a){$(a.currentTarget).trigger("removeError");return $namespace.Validation.checkNumericKeyCode(a)&&
4>$(a.target).val().length});$(".addFlightDropDown").on("click keypress",function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active");a.trigger("removeError")});$(".addFlightDropDown").on("focusin",function(a){a.preventDefault()});$(".addFlightDropDown").on("focusout",function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")});$(".noFlightInfo").on("change",function(){var a=$(this),b=a.attr("id").split("_").pop();
a.is(":checked")&&($("#flightInformation_"+b).find(".errorHandlerInitialized").trigger("removeError"),$("#flightInformation_"+b).hide())});$(".yesFlightInfo").on("change",function(){var a=$(this),b=a.attr("id").split("_").pop();a.is(":checked")&&$("#flightInformation_"+b).show()});var e=$("#confirm-flight-btn");e.on("click",function(d){if(!b.hasAddFlightModalErrors()){$(d.currentTarget);var e=[];$(".flightInfoForm").each(function(a,b){a=$(b);b=!1;var d=a.attr("id").split("_").pop(),f=a.find("#airCode_"+
d).val(),g=a.find("#airport_"+d).val(),h=a.find("#airlineNumber_"+d).val(),k=a.find("#transferDate_"+d).val();if("fr_ca"===$namespace.GlobalConstants.LOCALE_CODE.toLowerCase()){var n=$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM"),t=$namespace.DateUtil.getDefaultDateFormat();k=$namespace.DateUtil.reformatDateString(k,n,t)}n=a.find("#transferTime_"+d).val();t=a.find("#bookingItemUid_"+d).val();a.find("#noFlightInfo_"+d).is(":checked")&&(b=!0);e.push({bookingItemUid:t,transferSpecialRequest:{noFlightInfo:b,
airportCode:f,airlineCode:g,airlineNumber:h,airlineDate:k,airlineTime:n}})});d={bta:"UPDATE_SPECIAL_REQUESTS_FLIGHT_INFO_FROM_POPUP",specialRequestDetail:JSON.stringify({BOOKING_SPECIAL_REQUEST_DETAILS:e})};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("bookingTransferActivity.act",$.param(d),null,null,function(){window.history.go(0)},null);a.hide()}});a.show();b.initializeAddFlightModalErrors()},null)},_onRoomRateClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Hotel_Room_Rate_Info",
"Click",this.getCruisePackageId())},_onIncludedExtraClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Included_Extras","Click",this.getCruisePackageId())},_onOptionalServicesClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Hotel_Optional_Service","Click",this.getCruisePackageId())},_onMealPlansClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Hotel_Meal_Plan","Click",this.getCruisePackageId())},_onArrivalLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Arrival_Transfers",
"Click",this.getCruisePackageId())},_onDepartureLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Departure_Transfers","Click",this.getCruisePackageId())},_onCruiseHotelPierTransferLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Hotel-Pier_Transfers","Click",this.getCruisePackageId())},_onPierHotelTransferLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Pier-Hotel_Transfers",
"Click",this.getCruisePackageId())},_onCruiseAirportPierTransferLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Airport-Pier_Transfers","Click",this.getCruisePackageId())},_onPierAirportTransferLearnMoreClick:function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation _Transportation_Pier-Airport_Transfers","Click",this.getCruisePackageId())},initializeAddFlightModalErrors:function(){var a=/[0-9]{1,4}/g,b=this,d={errorValidationType:"text",
checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_AIRLINE_REQUIRED},e={errorValidationType:"text",regex:a,checkEmptyString:!0,matchRegex:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED,regexErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID},f={errorValidationType:"text",regex:a,checkEmptyString:!0,matchRegex:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED,regexErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID},
g={errorValidationType:"text",checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED},h={errorValidationType:"text",checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED};$(".flightInfoForm").each(function(a,l){var k=$(l),q=k.attr("id").split("_").pop();a=k.find("#transferType_"+q).val();l=k.find("#airCode_"+q);var r=k.find("#airlineNumber_"+q);k=k.find("#transferTime_"+q);"Arrival Transfer"==a||"Cruise Airport Pier Transfer"==
a?(b.arrivalAirlineValidator=new $namespace.Widgets.ErrorHandler(l,d),b.arrivalFlightNumberValidator=new $namespace.Widgets.ErrorHandler(r,e),b.arrivalTransferTimeValidator=new $namespace.Widgets.ErrorHandler(k,g)):(b.departureAirlineValidator=new $namespace.Widgets.ErrorHandler(l,d),b.departureFlightNumberValidator=new $namespace.Widgets.ErrorHandler(r,f),b.departureTransferTimeValidator=new $namespace.Widgets.ErrorHandler(k,h))})},initAccordionAnalytics:function(){var a=this;$(this.el).find(".sailingItinerary").on("ct.accordion.opening",
function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Port_of_Call","Click",a.getCruisePackageId())});$(this.el).find(".tourHighlight").on("ct.accordion.opening",function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Tour_Highlight","Click",a.getCruisePackageId())});$(this.el).find(".special-request-accordions").on("ct.accordion.opening",function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Special_Requests","Click",a.getCruisePackageId())});$(this.el).find(".baggageAndFees").on("ct.accordion.opening",
function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Flights_Baggage_Fees","Click",a.getCruisePackageId())});$(this.el).find(".termsAndConditions").on("ct.accordion.opening",function(){$namespace.Analytics.trackEvent("CR_Booking_Confirmation_Flights_Terms_and_Conditions","Click",a.getCruisePackageId())})},hasAddFlightModalErrors:function(){$namespace.Widgets.ErrorHandler.uniqueTrackingMessages=[];$(".errorHandlerInitialized").filter(":visible").trigger("removeError").trigger("validate",
[!0]);var a=$(".errorDetected"),b=a.first();return 0<b.length?(b.hasClass("")&&(b=a[1]),b.focus(),!0):!1},doEmailTracking:function(){var a={category:"Error/CR/Booking_Confirmation",label:this.getCruisePackageId(),_1333:"EMAIL_ITINERARY_FAILED_TO_SEND = 1333",_4002:"EMAIL_SEND_ERROR = 4002",_4005:"HTML_ITINERARY_GENERATE_ERROR = 4005",_1334:"EMAIL_INVALID_SENDER_DOMAIN_ERROR = 1334",_4001:"INVALID_EMAIL_SEND_REQUEST = 4001",_4003:"INVALID_EMAIL_TO_ADDRESS = 4003"},b=$(".emailErrorMessage").first().data("error");
b&&"0"!==b&&a["_"+b]&&$namespace.Analytics.trackEvent(a.category,a["_"+b],a.label)},_onOpcDisclimerModalClick:function(a){a=$(a.currentTarget).attr("data-disclaimer-link");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.PackageRecapView=Backbone.View.extend({el:"#packageRecap",ui:{chatLink:null},events:{"click a.modal-gallery-thumb":"_onGalleryThumbClick","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick",'click a[data-hook="edit_Theme_Park"]':"_onEditThemeParkLinkClick",'click a[data-hook="edit_Transportation"]':"_onEditTransportationLinkClick",'click a[data-hook="edit_Activities"]':"_onEditActivitiesLinkClick",
'click a[data-hook="continue_button"]':"_onContinueClick",'click a[data-hook="SignInAndBook_button"]':"_signInAndBookClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[id^="hotelLearnMore"]':"_onLearnMoreClick",'click a[id="theme_park_read_more"]':"_onThemeParkReadMoreClick",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",
'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation","click a.mealPlan":"_onLoadHotelPopupMealPlans",'click [data-hook="megatip-close"]':"_resetFlightsAccordion","click #vp2_car_category_item_terms_conditions":"_onTermsConditionsClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick"},toggleHotelRatingsTooltip:function(a){if(this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a)this.hotelRatingsTooltip.hide();
else{this.hotelRatingsTooltip.show(a);var b=$("#packageId").val()}$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Costco Travel Rating","Click",b)},_resetFlightsAccordion:function(a){a=$("#flight-details-megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_onTermsConditionsClick:function(a){var b="vptr=LOAD_RENTAL_CAR_TERMS_AND_CONDITION&selectedCarCategoryItemUid="+$(a.target).attr("data-selected-uid"),d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);(new $namespace.Widgets.Modal(this.responseText)).show()}}(this.module);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationResults.act",b,null,null,d,null);a.preventDefault()},initialize:function(a){var b=this;$("#custompath_package_overview, footer").on("keyup",function(a){a.keyCode||9==a.which?$namespace.DomUtil.scrollFocusedUnderStickyBar():null});var d=this;this.controller=$.extend({},a).controller;this.module=a.module;this.initLearnMoreLink();
this.initShopCardTooltips();this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length)for(a=$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}),a.off("click"),a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);a=this.$el.find("[data-megatip='flight-details-megatip']");if(a.length){var e=
new $namespace.Widgets.Megatip(a);a[0].megatip=e;a.on("click",$.proxy(e._onClick,e));a.on("click",function(){var a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_Flights_View_Details","Click",a,null)});document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}$namespace.Application.initializeOnMainContentReload();this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0);if("baggageAccordion"==b.accordion.button.context.id)$(b).on("ct.accordion.clicked",
$.proxy(d,"_onBaggageAccordionClick"));else if("termsAndConditionsAccordion"==b.accordion.button.context.id)$(b).on("ct.accordion.clicked",$.proxy(d,"_onTermsAndConditionsAccordionClick"));else if("diningAccordion"==b.accordion.button.context.id)$(b).on("ct.accordion.clicked",$.proxy(d,"_onTermsAndConditionsAccordionClick"))});this.$el.find('[data-hook="advisory-widget"]').each(function(a,d){a=$(d);b.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageRecap"})});$(window).on("resize orientationchange",
$.proxy(this._onResize,this));$(this.el).find("div.themeParkTickets div.additionalInformation").remove();$(this.el).find("div.themeParkTickets div.resortDetails").remove();$(this.el).find("div.themeParkTickets ul.themeParkLinks").remove();if(e=$(this.el).find("div.themeParkTickets div[id^='includedTicketVendorItem'] div[id^='includedTicketVendorItemDescription_']"))for(a=0;a<e.length;a++){var f=$(e[a]).find("p"),g=$(e[a]).parent();$(g).prepend(f);$(e[a]).remove()}this.destination=$(this.el).data("destination");
this.city=$(this.el).data("city");this.packageId=$(this.el).data("package-id");this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var h=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewPkgRecap/"+h.destination.charAt(0).toUpperCase()+h.destination.substr(1,h.destination.length)+"/"+h.city+"/"+h.packageId)})}$(".requiredDocCard a").addClass("external-link");
$(".requiredDocCard a").attr("id","external_link");$(".requiredDocCard a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".requiredDocCard").on("click",".external-link",b._checkTermsAndConditionLinksClick);$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$(".showmore-content .blue-bullets li").each(function(a,
b){1<=a?($(b).attr("aria-hidden","true"),$(b).find("a").attr("tabindex","-1"),$namespace.TabOrder.updatePageTabOrder(),1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),$(b).attr("tabindex","-1"))):$(b).find("a").attr("data-taborder","document")});0==$(".flight-module").length&&$("#selectedHotel").addClass("no-padding-top");0==$("#transportResultArrivalTransfer").length&&($("#DepartureTransferUnavailable").addClass("displayNone"),
$("#ArrivalTransferUnavailable").removeClass("displayNone"));0==$("#transportResultDepartureTransfer").length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").removeClass("displayNone"));1==$("#transportResultArrivalTransfer").length&&1==$("#transportResultDepartureTransfer").length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").addClass("displayNone"))},_onResize:function(){$("img[carImage]").removeAttr("initialized").removeAttr("altsrcattempted");
$namespace.ImageUtil.initImages();$('[aria-hidden="true"]').each(function(a,b){$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").attr("aria-hidden","true"):$("#mobileReadMoreLink").attr("aria-hidden","false")})},_onReviewsLinkClick:function(a){var b=$(a.currentTarget).data("hotel-id"),d=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(b);if(null!=d){var e=this;$(window).on("ct.megatip.opened",function(){var b=d.getReviewsAccordionId();$(b).focus();$(b).closest('[data-hook="accordion"]').get(0).accordion.open();
e._trackAllAccordion(a,$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);$(window).off("ct.megatip.opened")});$('a[data-megatip][data-hotelid="'+b+'"]').click()}},_checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_trackAllAccordion:function(a,b,d){a=$(".hotelIdValue").first().val();var e=$("#packageId").val();"headerOverview"==d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Overview","Click",a,null):"headerProperty"==
d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Property","Click",a,null):"headerDining"==d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Dining","Click",a,null):"headerRooms"==d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Rooms","Click",a,null):"headerMap"==d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Map","Click",a,null):"headerAllInclusive"==d?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_AllInclusive","Click",a,null):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&
$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Reviews\u200b",a,e,null)},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var b=this,d=$(this).data("destination"),e=$(this).data("citycode"),f=$(this).data("hotelid"),g=$(this).data("megatip"),h="";h=$(".dynamicPackageId").first().val();var k=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);h=("true"!=h?"vpc=LOAD_OFFER_HOTEL_DETAIL_INFO":
"vpc=LOAD_DYNAMIC_HOTEL_DETAIL_INFO")+("&destination="+d)+("&cityCode="+e);h+="&hotelId="+f;null!=k&&(h+="&displayReviewsAccordion=",h+=k.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",h,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+g).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));
$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,b){$(b).on("click",function(a){a=$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&
$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Recap_Hotel_Rooms",label:f+"_"+d.innerText})})});b.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));b.tabSwitcher.initialize();b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,d,e){b.currentTab=a;"features-tab"==a?$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Property_Features","Click",f):"activities-tab"==a&&$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Property_Activities",
"Click",f)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f));$('div[data-test="divFeaturesHeader"], div[data-test="divFeaturesForFeeHeader"], div[data-test="divActivitiesHeader"]').each(function(){$namespace.Utils.addAriaLevelOrRole($(this),"4","heading")});b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-140)},50);""==$("#hotelRoomFeatureTabData").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden");
""==$("#hotelPointOfInterestTabData").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},null,"")})},_onLearnMoreClick:function(a){a=$(a.currentTarget).attr("data-hotelId");$namespace.Analytics.trackEvent("Pkg_Recap_Hotel_Learn_More","Click",a)},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"});$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid)},_showCancellationPolicyModal:function(){var a=
$("#packageId").val(),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",
null,null,b,null);$namespace.Analytics.trackEvent("Pkg_Recap_Cancellation_Policy_Schedule","Click",a)},_onEditFlightLinkClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_edit_Flights","Click",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_edit_ Hotels","Click",a);$("#editFlightLink").length?
$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},_onEditThemeParkLinkClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_edit_Theme_Parks","Click",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS)},
_onEditTransportationLinkClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_edit_Transportation","Click",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},_onEditActivitiesLinkClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_edit_Activities","Click",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES)},
_onContinueClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_Results_continue","Click",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS)},_signInAndBookClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_Results_Sign in and Book","Click",a);$namespace.GlobalConstants.RESPONSIVE_VP_TRAVELER_INFO_PAGE_ENABLED?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS,
[!0]):$namespace.Navigation.loadPage(_webLoc+"/?h=3&checkMemberInactivity=true&_uid="+(new Date).getTime())},_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=a.attr("data-test"),e=a.attr("data-includeRemarks"),f=a.attr("id"),g=$("#packageId").val(),h=a.attr("data-cancellation"),k={itineraryCode:b};k.cthr=e?"SHOW_FILTERED_ITINERARY_REMARKS":"SHOW_ITINERARY_REMARKS";"true"==h&&(k.itineraryRemarksModalTitle="Rate details and cancellation policy");$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(k),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkDataItineraryModal"==d&&$namespace.Analytics.trackEvent("Pkg_Recap_Rate_Information","Click",g+"_"+b);("IncludedExtra"==f||"true"==e&&"linkThemeParkTicketCardDescription"!=d)&&$namespace.Analytics.trackEvent("Pkg_Recap_Included_Extras","Click",g);"linkAdditionalInformation"==
d&&$namespace.Analytics.trackEvent("Pkg_Recap_Transportation_RentalCar","Click",g);"linkThemeParkTicketCardDescription"==d&&$namespace.Analytics.trackEvent("Pkg_Recap_Theme_Parks_Tickets","Click",a.data("ticket-info"),null);"linkArrivalTransferDescription"==d&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Recap_Transportation_Arrival_Transfers",label:g});"linkDepartureTransferDescription"==d&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",
category:"Pkg_Recap_Transportation_Departure_Transfers",label:g})},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");$namespace.Analytics.trackEvent("Pkg_Recap_Flights_Baggage Fees","Click",packageId,null);void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onBaggageAccordionClick:function(a){a=$("#packageId").val();$namespace.Analytics.trackEvent("Pkg_Recap_Flights_Baggage Fees","Click",a,null)},_onTermsAndConditionsAccordionClick:function(a){a=$("#packageId").val();
$namespace.Analytics.trackEvent("Pkg_Recap_Flights_Terms_and_Conditions","Click",a,null)},_onThemeParkReadMoreClick:function(a){$("#packageId").val();var b="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+$(a.target).data("vendorid");var d=this.module.TranslationTexts,e=$(a.target).data("vendorid"),f=$(a.target).attr("data-test"),g=function(b){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE});
else{b.themeParkDetailModal=new $namespace.Widgets.Modal(this.responseText,function(){e&&e.off("click")});var e=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');var f=e.length;f&&$(e[f-1]).attr("data-tab-last",!0);e.on("click",function(a){a=$(a.currentTarget);b.loadParkAndTheaterVenuePopup(JSON.parse(a.attr("data-link-args").trim()),a.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html($(a.target).data("title"));b.themeParkDetailModal.show()}}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",b,null,null,g,null);"linkThemeParkTicketCardReadMore"==f&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Recap_Read_More",label:"FLDISNEYWORLD"==e?"WDW":"UO"})},loadParkAndTheaterVenuePopup:function(a,b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;d+="&region="+a.region;d+="&area="+a.area;
var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=d.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock");d.themeParkDetailModal.resetFirstAndLastTabs()}),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,
b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),
e.show(),e.el.attr("data-set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,e,null)},_showCancellationResponsivePopup:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=$("#"+b).html();b={cthr:"SHOW_CANCEL_MESSAGE"};"true"==a.attr("data-cancellation")&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");
a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(d),b.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(b),null,null,a,null)},_onToursLinkClick:function(a){a=
$(a.currentTarget);var b=$("#packageId").val(),d=a.data("activity-name"),e="ssc=LOAD_RECAP_SIGHTSEEING_POPUP&sightseeingId="+a.attr("data-tour-id")+"&itineraryCode="+a.data("iternary-code");$namespace.Analytics.trackEvent("Pkg_Recap_Activities_Read_More",d,b+"_"+a.attr("data-tour-id"));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",e,null,null,function(){(new $namespace.Widgets.Modal(this.responseText)).show();$("#modalTitleActivitiesDetail").focus()},null)},_showMoreInformation:function(a){a=
$(a.currentTarget);$(a).hide();$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus()},_onLoadHotelPopupMealPlans:function(a){a=$(a.currentTarget);var b="cthtc=LOAD_HOTEL_MEAL_PLANS_POPUP&destination="+a.attr("data-destination");
b+="&cityCode="+a.attr("data-citycode");b+="&hotelId="+a.attr("data-hotelid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsTabContent.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},initShopCardTooltips:function(){$('A[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};isFirstFormFieldFocusActive=isTermsConditionChecked=!1;FREQUENT_FLYER_NUMBER_REGEX=/^[A-Z0-9]{1,32}$/;REDRESS_NUMBER_REGEX=/^[0-9]{7}$/;KNOWN_TRAVELER_NUMBER_REGEX=/^[A-Z0-9]{9}$/;
$namespace.View.TravelerInfoView=Backbone.View.extend({el:"#travelerInformation",WIDGET_COOKIE_NAME:"VP2_SEARCH_WIDGET_VALUES",ui:{chatLink:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="continue_button"]':"_onContinueClick",'click [data-hook="frequentFlyerAccordion"]':"_onAccordionClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation",'click [data-hook="accept-traveler-info-terms"]':"_onTermsAndConditionsClick",'keypress input[data-hook="name-field"]':"_onNameFieldKeyPress",
'click [data-hook="traveler-info-terms-conditions"]':"_onTermsAndConditionsModalClick",'focusout [data-hook="name-field"], [data-hook="frequent-flyer-number"], [data-hook="known-traveler-number"], [data-hook="redress-number"]':"_onInputFocusOut",'change [data-hook="drop-down"]':"_onSelectDropDownChange",'focusin [data-hook="drop-down"]':"_onSelectDropDownFocusIn",'focusout [data-hook="drop-down"]':"_onSelectDropDownFocusOut",'click [data-hook="drop-down"]':"_onSelectDropDownClick",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",
'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick",'click a[data-hook="go_to_theme_park"]':"_onEditThemeParkLinkClick",'click a[data-hook="go_to_transportation"]':"_onEditTransportationClick",'click a[data-hook="go_to_activities"]':"_onEditActivitiesClick",'keypress [data-hook="frequent-flyer-number"]':"_onFrequentFlyerKeyPress",'keyup [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'focusout [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'cut [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",
'paste [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'keypress [data-hook="redress-number"]':"_onRedressNumberKeypress",'keypress [data-hook="known-traveler-number"]':"_onKnownTravelerNumberKeypress"},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;var b=a.gaParams,d=this;this.createModel();totalRooms=a.totalRooms;adultThresholdAge=a.adultThresholdAge;_referenceDate=a.referenceDate;_departureDate=a.departureDate;_returnDate=a.returnDate;
a.gaParams&&(a=JSON.parse(b),2<a.length&&(destination=a[0],city=a[1],packageId=a[2],$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/viewTravelerInformation/"+destination+"/"+city+"/"+packageId),$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+"|traveler information",v2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),v34:destination,v74:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"/booking/viewTravelerInformation/"+destination+"/"+city+"/"+packageId})));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewTravelerInformation/"+
destination+"/"+city+"/"+packageId)});$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&d._removeError($(a.currentTarget))});($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED||$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED)&&this.$el.find('[data-hook="frequentFlyerAccordion"]').each(utils.eachUninitialized(function(a,
b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&this._initTravelerNumberTooltips();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(".traveler-info-tsa a").addClass("external-link");$(".traveler-info-tsa a").attr("id","external_link");$(".traveler-info-tsa a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".external-link").on("click",
d._checkTermsAndConditionLinksClick);$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$(".showmore-content .blue-bullets li").each(function(a,b){$(b).attr("aria-hidden","true");$(b).find("a").attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder();0==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),
$(b).attr("tabindex","-1"))});$(window).load(function(){$("#accept-traveler-info-terms").removeAttr("checked")})},createModel:function(){this.model={destinationType:"",destinationCode:"",hpDestinationCode:"",regionCode:"",cityCode:"",latitude:"",longitude:"",locationName:"",city:"",country:"",departureDate:"",returnDate:"",includeFlight:!0,departureLocationCode:"",departureLocationName:"",serviceClass:"",isVpSub:"true",isHfcSub:"false",prevDesType:"",rooms:[{index:0,number:1,adultCount:2,children:[]}]};
try{var a=$namespace.DomUtil.readCookie(this.WIDGET_COOKIE_NAME);this.model=a=JSON.parse(a)}catch(b){$namespace.Logger.error("AjaxUtil.callbackMakeMultiAjaxCall: Error parsing VP2 Search Widget Cookie.")}},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Hotel",
"Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Activities","Click","Expand")},_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){$("#editFlightLink").length?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},_onEditThemeParkLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS)},
_onEditTransportationClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},_onEditActivitiesClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES)},_onTermsAndConditionsClick:function(a){a=$(a.currentTarget);isTermsConditionChecked=!1;a.is(":checked")&&(isTermsConditionChecked=!0,a.removeClass("error"),$(".termsAndConditions-text-and-links").removeClass("errorRedLabel error"),
$(".termsAndConditions-link").removeClass("errorRedLabel error"),$("#accept-traveler-info-terms-error").remove())},_showCancellationPolicyModal:function(){var a=$("#travelerInformation").data("package-id");$namespace.Analytics.trackEvent("Traveler_Information_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):
(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_addError:function(a,b,d,e,f){var g=a.attr("id").substring(0,a.attr("id").lastIndexOf("_"))+"_error";
this._gaTrackEventError(a,e,f);a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" data-test='+g+' class="error no-outline" id="'+a.attr("id")+'_error">'+b+"</label>");d&&!$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED&&$("#"+a.attr("id")+"_error").addClass("dob-error");$(window).trigger("resize");isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,$namespace.DomUtil.scrollToMiddle(a[0]),a.focus())},_calculateAgeInYears:function(a,
b){var d=a.getFullYear()-b.getFullYear(),e=a.getMonth()-b.getMonth();(0>e||0===e&&a.getDate()<b.getDate())&&d--;return d},_calculateAgeInMonths:function(a,b){var d=12*(a.getFullYear()-b.getFullYear()),e=a.getMonth()-b.getMonth();d+=e;(0>e||0===e&&a.getDate()<b.getDate())&&d--;return d},_addDOBError:function(a,b,d,e){var f=a.attr("id").substring(0,a.attr("id").lastIndexOf("_"))+"_error";this._gaTrackEventError(a,d,e);$(".traveler-dob-drop-down-"+a.data("traveler-count")).removeClass("form-group");
$(".traveler-dob-drop-down-common-error-"+a.data("traveler-count")).html('<label tabindex="-1" class="error no-outline dob-error" data-test='+f+' id="'+a.attr("id")+'_error">'+b+"</label>");a.addClass("error common-error");a.attr("aria-describedby",a.attr("id")+"_error");$("#birth_day_"+a.data("traveler-count")).addClass("error common-error");$("#birth_day_"+a.data("traveler-count")).attr("aria-describedby",a.attr("id")+"_error");$("#birth_year_"+a.data("traveler-count")).addClass("error common-error");
$("#birth_year_"+a.data("traveler-count")).attr("aria-describedby",a.attr("id")+"_error");$(window).trigger("resize");isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,a.data("locale")?$("#birth_day_"+a.data("traveler-count")).focus():a.focus())},_addFlightBasedChildDOBError:function(a,b){var d=this.module.TranslationTexts;1==$("#travelerInformation").data("is-booking-has-flights")?this._addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),
"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_airlines_are_very_strict_about_birthdates_and_ages_change_fees_may_apply_if_the_pnr_is_incorrect_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",b):this._addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT),"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",
b)},_removeDOBError:function(a){$(".traveler-dob-drop-down-"+a.data("traveler-count")).addClass("form-group");$(".traveler-dob-drop-down-common-error-"+a.data("traveler-count")).empty();a.removeClass("error common-error");a.removeClass("common-error");a.removeAttr("aria-describedby");$("#birth_day_"+a.data("traveler-count")).removeClass("error");$("#birth_day_"+a.data("traveler-count")).removeClass("common-error");$("#birth_day_"+a.data("traveler-count")).removeAttr("aria-describedby");$("#birth_year_"+
a.data("traveler-count")).removeClass("error");$("#birth_year_"+a.data("traveler-count")).removeClass("common-error");$("#birth_year_"+a.data("traveler-count")).removeAttr("aria-describedby");$("#birth_month_"+a.data("traveler-count")).removeClass("error");$("#birth_month_"+a.data("traveler-count")).removeClass("common-error");$("#birth_month_"+a.data("traveler-count")).removeAttr("aria-describedby");$(window).trigger("resize")},_gaTrackEventError:function(a,b,d){$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===
$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?a="Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HF/Traveler_Information":($namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),a="Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Traveler_Information");$namespace.Analytics.trackEvent(a,b+"_traveler_"+d,packageId)},_openAccordion:function(a){if(a.length&&!a.hasClass("active")){var b=
a.children(".accordion-header").children(".accordion-button"),d=a.children(".accordion-content");a.closest(".accordion")[0].accordionMenu.open(a,b,d)}},_validateFrequentFlyerNumbers:function(a,b){var d=!0,e=this;$("#frequentFlyerAccordionContent_"+a).find(".frequent-flyer-row").each(function(f,g){f=$(g).find(".frequent-flyer-number input");e._removeError(f);f.val().trim()&&!f.val().trim().match(FREQUENT_FLYER_NUMBER_REGEX)&&(e._openAccordion($(g).closest(".accordion-item")),e._addError(f,$namespace.MessageUtil.prefixError(b.TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE),
!1,"frequent_flyer_number_must_be_alphanumeric_only",a),d=!1)});return d},_validateRedressNumber:function(a,b){var d=!0,e=$("#redress_number_"+a);this._removeError(e);var f=e.length&&e.val().length?e.val().trim():!1;f&&!f.match(REDRESS_NUMBER_REGEX)&&(this._openAccordion(e.closest(".accordion-item")),this._addError(e,$namespace.MessageUtil.prefixError(b.TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE),!1,"redress_number_must_be_7_digits_numbers_only",a),d=!1);return d},_validateKnownTravelerNumber:function(a,
b){var d=!0,e=$("#known_traveler_number_"+a);this._removeError(e);var f=e.length&&e.val().length?e.val().trim():!1;f&&!f.match(KNOWN_TRAVELER_NUMBER_REGEX)&&(this._openAccordion(e.closest(".accordion-item")),this._addError(e,$namespace.MessageUtil.prefixError(b.KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE),!1,"known_traveler_number_must_be_9_characters_alphanumeric_only",a),d=!1);return d},_validateTravelerInfoForm:function(){var a=!0;isFirstFormFieldFocusActive=!1;for(var b=this.module.TranslationTexts,d=
$("#primaryTraveler").data("travelers"),e=1,f=0,g=0;g<d;g++){var h=$("#title_"+e);this._removeError(h);if(null==h.val()||""==h.val())this._addError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_TITLE_ERROR_MESSAGE),!1,"title_is_required",e),a=!1;var k=$("#first_name_"+e);this._removeError(k);""==$.trim(k.val())&&(this._addError(k,$namespace.MessageUtil.prefixError(b.TRAVELER_FIRST_NAME_ERROR_MESSAGE),!1,"first_name_is_required",e),a=!1);var l=$("#last_name_"+e);this._removeError(l);""==$.trim(l.val())?
(this._addError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_LAST_NAME_ERROR_MESSAGE),!1,"last_name_is_required",e),a=!1):2>$.trim(l.val()).length&&(this._addError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE),!1,"last_name_should_contain_at_least_2_characters",e),a=!1);var p=$("#middle_name_"+e),q=$("#suffix_"+e);100<($.trim(h.val())+" "+$.trim(k.val())+" "+$.trim(p.val())+" "+$.trim(l.val())+" "+$.trim(q.val())).length&&(this._removeError(k),this._addError(k,
$namespace.MessageUtil.prefixError(b.TRAVELER_NAME_MAX_CHARACTERS_MESSAGE),!1,"passenger_name_should_not_cross_100_characters",e),a=!1);h=$("#gender_"+e);this._removeError(h);if(null==h.val()||""==h.val())this._addError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_GENDER_ERROR_MESSAGE),!1,"gender_is_required",e),a=!1;k=!0;h=$("#birth_month_"+e);if(h.data("locale")){q=$("#birth_day_"+e);this._removeError(q);if(null==q.val()||""==q.val())this._addError(q,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_DAY_ERROR_MESSAGE),
!0,"day_of_date_of_birth_is_required",e),k=a=!1;this._removeError(h);if(null==h.val()||""==h.val())this._addError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_MONTH_ERROR_MESSAGE),!0,"month_of_date_of_birth_is_required",e),k=a=!1}else{this._removeError(h);if(null==h.val()||""==h.val())this._addError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_MONTH_ERROR_MESSAGE),!0,"month_of_date_of_birth_is_required",e),k=a=!1;q=$("#birth_day_"+e);this._removeError(q);if(null==q.val()||""==q.val())this._addError(q,
$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_DAY_ERROR_MESSAGE),!0,"day_of_date_of_birth_is_required",e),k=a=!1}var r=$("#birth_year_"+e);this._removeError(r);if(null==r.val()||""==r.val())this._addError(r,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_YEAR_ERROR_MESSAGE),!0,"year_of_date_of_birth_is_required",e),k=a=!1;if(k){var v=$("#traveler_"+e).data("traveler-type");k=$("#traveler_"+e).data("traveler-age");var n=$("#dynamicPackageCarIncluded").val();p=new Date(_departureDate);l=new Date(_returnDate);
r=h.val()+"/"+q.val()+"/"+r.val();q=new Date(r);this._removeDOBError(h);if(0==v)l=this._calculateAgeInYears(p,q),0==f&&(f=l),18>l&&(this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",e),a=!1);else if(1==v)l=this._calculateAgeInYears(p,q),$("#traveler_"+e).data("passenger-type"),18<l?(this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),
"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",e),a=!1):l!=k&&(this._addFlightBasedChildDOBError(h,e),a=!1);else{v=$("#travelerInformation").data("is-booking-has-flights");var t=$("#traveler_"+e).data("infant-on-seat");(new Date(r)).setFullYear(q.getFullYear()+2);v?12>k?(k=this._calculateAgeInMonths(p,q),11<k&&(this._addFlightBasedChildDOBError(h,e),a=!1),0>k&&(l=this._calculateAgeInMonths(l,q),0>l&&(this._addDOBError(h,
$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1))):t?(k=this._calculateAgeInMonths(p,q),12>k?(this._addFlightBasedChildDOBError(h,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(h,e),a=!1)):(k=this._calculateAgeInMonths(p,q),l=this._calculateAgeInMonths(l,q),23<l?(this._addFlightBasedChildDOBError(h,e),a=!1):12>k&&(this._addFlightBasedChildDOBError(h,e),a=!1)):"Infant"==$("#traveler_"+e).data("passenger-type")?12>k?
(p.getTime()===q.getTime()&&(this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1),k=this._calculateAgeInMonths(p,q),11<k&&(this._addFlightBasedChildDOBError(h,e),a=!1),0>k&&(l=this._calculateAgeInMonths(l,q),0>l?this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"):this._addFlightBasedChildDOBError(h,e),a=!1)):
(k=this._calculateAgeInMonths(p,q),12>k?(this._addFlightBasedChildDOBError(h,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(h,e),a=!1)):0==k?(p.getTime()===q.getTime()&&(this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1),k=this._calculateAgeInMonths(p,q),11<k&&(this._addFlightBasedChildDOBError(h,e),a=!1),0>k&&(l=this._calculateAgeInMonths(l,q),0>l?this._addDOBError(h,$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),
"date_of_birth_cannot_be_a_future_date"):this._addFlightBasedChildDOBError(h,e),a=!1)):(k=this._calculateAgeInMonths(p,q),12>k?(this._addFlightBasedChildDOBError(h,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(h,e),a=!1))}}$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED&&(this._validateFrequentFlyerNumbers(e,b)||(a=!1));$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&(this._validateRedressNumber(e,b)||(a=!1),this._validateKnownTravelerNumber(e,b)||
(a=!1));e++}if(25>f&&"true"==n&&"true"==this.model.isHfcSub&&a){var u=this;d=function(){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(d){d=window.event||d;d.target||(d.target=d.srcElement);d=d.target.innerText;"View Hotel + Flight Deals"===d?(u.model&&u.model.isVpSub&&u.model.isHfcSub&&(u.model.isVpSub="false",u.model.isHfcSub="false",$namespace.DomUtil.clearCookie(u.WIDGET_COOKIE_NAME),$namespace.DomUtil.createCookie(u.WIDGET_COOKIE_NAME,
JSON.stringify(u.model),0),$namespace.DomUtil.clearCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED,$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT,0)),$namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_VALUE_TRAVELLER_INFO_PAGE_POP_UP),window.location.href=$namespace.Configuration.webLoc+"/"):"Adjust My Age"===d&&(d=$("#birth_month_1"),u._addDOBError(d,
$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",1),a=!1)})).show()}}(this.module);a=!1;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("travelerInfo.act","ti=LOAD_TRAVELER_INFO_DOB_ERROR",null,null,d,null)}isTermsConditionChecked||(d=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?
"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HF/HF_Traveler_Information_Error":$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR?"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HFC_Traveler_Information_Error":"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/VP_Traveler_Information_Error",
$namespace.Analytics.trackEvent(d,"please_accept_the_terms_conditions_by_selecting_the_checkbox",packageId),$("#accept-traveler-info-terms").addClass("errorRedLabel error"),$(".termsAndConditions-text-and-links").addClass("errorRedLabel error"),$(".termsAndConditions-link").addClass("errorRedLabel error"),$("#accept-traveler-info-terms-error").remove(),$("#accept-traveler-info-terms").after('<label tabindex="-1" class="error no-outline" data-test="travelerinfotermserror"  id="accept-traveler-info-terms-error">'+
$namespace.MessageUtil.prefixError(b.TERMS_AND_CONDITIONS_ERROR_MESSAGE)+"</label>"),$("#accept-traveler-info-terms").attr("aria-describedby","accept-traveler-info-terms-error"),$(window).trigger("resize"),isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,$("#accept-traveler-info-terms").focus()),a=!1);return a},_initTravelerNumberTooltips:function(){$('a[data-tooltip="known-traveler-number-tooltip"], a[data-tooltip="redress-number-tooltip"]').each(function(a,b){b.travelerNumberTooltip||
(b.travelerNumberTooltip=new $namespace.Widgets.Tooltip($(b)))})},_initDayDropDown:function(a){if(a.data("show-days")){var b=$("#birth_month_"+a.data("traveler-count")),d=$("#birth_day_"+a.data("traveler-count"));a=$("#birth_year_"+a.data("traveler-count"));var e=d.val(),f=!1;if(""!=b.val()&&""!=a.val()){b=(new Date(a.val(),b.val(),0)).getDate();$("#birth_day_"+a.data("traveler-count")).find("option:not(:first)").remove();for(var g=1;g<=b;g++)d.append("<option value='"+g+"'>"+g+"</option>"),g==e&&
(f=!0)}else if(""!=b.val()&&""==a.val())for(b=(new Date((new Date).getFullYear(),b.val(),0)).getDate(),$("#birth_day_"+a.data("traveler-count")).find("option:not(:first)").remove(),g=1;g<=b;g++)d.append("<option value='"+g+"'>"+g+"</option>"),g==e&&(f=!0);$("#birth_day_"+a.data("traveler-count")).val(f?e:"")}},_onSelectDropDownChange:function(a){a.preventDefault();var b=$(a.currentTarget);""!=b.val()&&(this._removeError(b),b.hasClass("common-error")&&this._removeDOBError(b));"title"==b.attr("name")&&
this._onTravelerTitleChange(a);if(b.hasClass("airline-select")){var d=$(b).val();$(b).children().each(function(a,b){b.value===d?$(b).attr("selected","selected"):$(b).removeAttr("selected")})}this._initDayDropDown(b)},_onSelectDropDownFocusIn:function(a){a.preventDefault();$(a.currentTarget)},_onSelectDropDownFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onSelectDropDownClick:function(a){a.preventDefault();
a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onAccordionClick:function(a){a.preventDefault();$namespace.Analytics.trackEvent("VP_Traveler_Information_Frequent_Traveler_Number","Click",packageId)},_onContinueClick:function(a){a.preventDefault();if(this._validateTravelerInfoForm()){a=0;for(var b=$("#primaryTraveler").data("travelers"),d=[],e=0;e<b;e++){var f=$("#traveler_"+(e+1)).data("traveler-id"),g=$("#traveler_"+(e+1)).data("traveler-type"),h=$("#title_"+
(e+1)),k=$("#first_name_"+(e+1)),l=$("#middle_name_"+(e+1)),p=$("#last_name_"+(e+1)),q=$("#suffix_"+(e+1)),r=$("#gender_"+(e+1)),v=$("#birth_month_"+(e+1)),n=$("#birth_day_"+(e+1)),t=$("#birth_year_"+(e+1)),u=new Date(_referenceDate);v=v.val()+"/"+n.val()+"/"+t.val();u=this._calculateAgeInYears(u,new Date(v));2==g&&(u=0);u&&parseInt(u)>=parseInt(adultThresholdAge)&&a++;f={paxId:f,paxType:g,paxTitle:h.val(),paxFirstName:k.val(),paxMedInitial:l.val(),paxLastName:p.val(),paxSuffix:q.val(),paxDateOfBirth:v,
paxAge:u,paxGender:r.val()};if($namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED){var w=[];$(".frequent-flyer-div-"+(e+1)+" .frequent-flyer-row").each(function(a){var b=$(this).children(".frequent-flyer-number");a=b.find("input.frequent-flyer-airline-hidden-input").val();b=b.find("input.frequent-flyer-number-input").val();w.push({vendor:a,frequentTravelerNumber:b,vendorType:"Flight"})});f.paxFrequentTravelerDetails=w}if($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED){g=
$("#redress_number_"+(e+1));if(g=g.length&&g.val().length?g.val().trim():!1)f.paxRedressNumber=g;g=$("#known_traveler_number_"+(e+1));if(g=g.length&&g.val().length?g.val().trim():!1)f.paxKnownTravelerNumber=g}d.push(f)}var y=JSON.stringify({PASSENGER_INFO:d}),z=this.module.TranslationTexts,x=function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("travelerInfo.act","ti=UPDATE_TRAVELER_INFO&passengerDetail="+a,null,null,function(a){a?1==$("#travelerInformation").data("is-booking-has-flights")?
$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SEAT_MAP_SELECTION,["true"]):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,["true"]):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase(),$namespace.MessageUtil.showMessage({type:1,text:"en_ca"==a||"fr_ca"==a?z.TRAVELER_COMMON_ERROR_MESSAGE_CA:z.TRAVELER_COMMON_ERROR_MESSAGE,title:z.TRAVELER_ERROR_COMMON}))},
null)};0<parseInt(adultThresholdAge)&&totalRooms>a?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("travelerInfo.act","ti=LOAD_ADULT_ACKNOWLEDGEMENT",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Modal(this.responseText,function(){b&&b.off("click")});var b=$("#acknowledgement-understand-btn");b.on("click",function(b){a.hide();x(y)});a.show();$(".modal-close").focus()},null)):x(y)}},_showMoreInformation:function(a){a=
$(a.currentTarget);$(a).hide();$(".showmore-content").removeClass("showmore-content");$namespace.Analytics.trackEvent("VP_Traveler_Information_Read_More","Click",packageId);$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus()},_onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},
_onFrequentFlyerKeyPress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},_onModifyFrequentFlyerNumber:function(a){var b=this;setTimeout(function(){b._modifyFrequentFlyerAirlineError(a)},0)},_modifyFrequentFlyerAirlineError:function(a){a=$(a.currentTarget);a.val(a.val().trim())},_onRedressNumberKeypress:function(a){return $namespace.Validation.checkNumericKeyCode(a)},_onKnownTravelerNumberKeypress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},_onTravelerTitleChange:function(a){a=
$(a.currentTarget);var b=$("#gender_"+a.data("traveler-count"));"Mr"==a.val()||"Master"==a.val()?($(b).val("1"),this._removeError(b)):"Ms"==a.val()||"Mrs"==a.val()||"Miss"==a.val()?($(b).val("2"),this._removeError(b)):"1"!=$(b).val()&&"2"!=$(b).val()&&$(b).val("")},_checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onTermsAndConditionsModalClick:function(a){var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("travelerInfo.act","ti=SHOW_TERMS_AND_CONDITIONS",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Modal(this.responseText);$(".traveler-info-terms-conditions-modal a").addClass("text-underline external-link");$(".traveler-info-terms-conditions-modal a").attr("id","external_link");$(".traveler-info-terms-conditions-modal a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");
$(this).removeAttr("target")});$(".traveler-info-terms-conditions-modal a").attr("data-taborder","document");$(".traveler-info-terms-conditions-modal a").last().attr("data-tab-last","true");$(".traveler-info-terms-conditions-modal").on("click",".external-link",b._checkTermsAndConditionLinksClick);$("br+br+span.fontBold, title+span.fontBold, br+br+b").each(function(){$namespace.Utils.addAriaLevelOrRole($(this),"3","heading")});a.show()},null)},_onInputFocusOut:function(a){a=$(a.currentTarget);a.val(a.val().trim().toUpperCase())}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=utils.getNamespace($namespace,"Widgets",{});var residenceState=[];$namespace.View=$namespace.View||{};
$namespace.View.CruiseTravelerView=Backbone.View.extend({el:"#cruise-traveler-page",ui:{chatLink:null},events:{'click [data-hook="go_backLink"]':"_onBackLink",'click [data-hook="continue_button"]':"_onContinueClick",'click [name="number_stateroom"]':"_onStateroomClick",'click [name="stateroom_tab"]':"_onStateroomTabClick",'click [data-hook="next_stateroom_button"]':"_onContinueClick",'click [data-hook="previous_stateroom_button"]':"_onPreviousButtonClick","change #residencyCity":"_isResidencyCityChanged",
"change .select-dropdown-children":"_onChildrenChange","change .select-dropdown-infant":"_onInfantChange",'click [data-hook="pastPassenger"]':"_onLoyaltyProgramClick",'change [data-hook="pastPassengerField"]':"_onPastPassengerFieldChange",'keypress input[data-fieldtype="name-field"]':"_onNameFieldKeyPress",'keypress input[data-fieldtype="alphanumeric-field"]':"_onAlphaNumericFieldKeyPress"},activateGA:!1,pageUrl:"",fromOfferPage:!1,fromCruiseOffer:!1,initialize:function(a){a=$.extend({},a);var b=
this;this.module=a.module;this.translations=a.module.TranslationTexts;this.pageUrl=window.location.href;this.fromCruiseOffer=a.fromCruiseOffer;if(/\/Offers/i.test(this.pageUrl)||this.fromCruiseOffer)this.fromOfferPage=!0;document.title=this.translations.CRUISE_TRAVELER_PAGE_TITLE;utils.updateLiveContainer();this.initTooltip();this.activateGA=!1;this.initPassengerCounter();this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat",
"Initiate_Chat","/cr/booking/bookingWidget/travelersPage/"+$(b.el).data("destination")+"/"+$(b.el).data("line-name")+"/"+$(b.el).data("ship-name")+"/"+$(b.el).data("departure-date"))});1<$('[name="number_stateroom"]:checked').val()?(this.displayNextStateRoomButton(),$("#addOns-tab").addClass("displayNone"),$.hook("continue_button").text(this.translations.NEXT_STATEROOM)):($.hook("continue_button").text(this.translations.CONTINUE_TO_STATEROOM_TEXT),$("#nextStateRoom").hide(),$("#addOns-tab").removeClass("displayNone"));
$("#prevStateRoom").hide();$(".accordion-item").removeClass("accordion-item-current");$(".cruiseTravelerInformation").addClass("accordion-item-current");this.trackGA();this.trackAdobe();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize");this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);$namespace.TabOrder.updatePageTabOrder()},
_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},initTooltip:function(){this.tooltip=new $namespace.Widgets.Tooltip(this.$el.find('A[id="cruise_tooltip"]'))},initPassengerCounter:function(){var a=this;$("#residencyCityRequired").hide();var b=$("[data-stateroom-card]"),d=b.find("[data-passenger-number]"),e=b.find("[data-passenger-number=adults]"),f=b.find("[data-passenger-number=children]"),g=b.find("[data-passenger-number=infants]"),h=b.find("[data-passenger-button-mode]"),k=b.find("[data-passenger-button-mode=inc]"),
l=b.find("[data-passenger-button-mode=dec][data-passenger-type=adults]"),p=b.find("[data-passenger-button-mode=dec][data-passenger-type=children]"),q=b.find("[data-passenger-button-mode=dec][data-passenger-type=infants]"),r=b.find("[data-extra-panel=children]"),v=b.find("[data-extra-panel=infants]"),n=$(".max-people-warning");r=b.find("[data-extra-panel=children]");v=b.find("[data-extra-panel=infants]");var t=r.find("[data-extra-option]"),u=v.find("[data-extra-option]"),w=$(".max-people-warning p");
new widgets.SelectWidget($("#residencyCitySelect"),{taborder:"document"});new widgets.SelectWidget($("#pastPaxDateOfBirthDate"),{taborder:"document"});new widgets.SelectWidget($("#pastPaxDateOfBirthYear"),{taborder:"document"});new widgets.SelectWidget($("#pastPaxDateOfBirthMonth"),{taborder:"document"});var y=1;1<$('[name="number_stateroom"]:checked').val()&&(b=$(".panel.active"),y=$(b).attr("data-bookingindex"));new widgets.SelectWidget($("#pastPassengerGendar"),{taborder:"document"});b=2;var z=
e.html();parseInt(z)&&(b=parseInt(z));z=0;var x=f.html();parseInt(x)&&(z=parseInt(x));x=0;var B=g.html();parseInt(B)&&(x=parseInt(B));var G=$.extend({},{adults:b,children:z,infants:x}),H=function(a,b,d){G[b]<=d?(G[b]=d,a.addClass("disabled"),a.attr("disabled","disabled")):(a.removeClass("disabled"),a.removeAttr("disabled"))},K=function(b,d){H(l,"adults",1);H(p,"children",0);H(q,"infants",0);5<=G.adults+G.children+G.infants?(d=w.html(),$namespace.Browser.chrome&&(d+=" "+a.translations.UNAVAILABLE_MASSEGE),
"adults"==b?(utils.updateLiveContainer(a.translations.INCREMENT_ADULTS_TEXT+" "+G.adults+" "+a.translations.SELECTED_TEXT+" "+a.translations.WARNING_MASSEGE+" "+d),$("#adultsDec").attr("aria-disabled",!1),$("#adultsDec").removeAttr("disabled")):"children"==b?(utils.updateLiveContainer(a.translations.INCREMENT_CHILDREN_TEXT+" "+G.children+" "+a.translations.SELECTED_TEXT+" "+a.translations.WARNING_MASSEGE+" "+d),$("#childrenDec").attr("aria-disabled",!1),$("#childrenDec").removeAttr("disabled")):"infants"==
b&&(utils.updateLiveContainer(a.translations.INCREMENT_INFANTS_TEXT+" "+G.infants+" "+a.translations.SELECTED_TEXT+" "+a.translations.WARNING_MASSEGE+" "+d),$("#infantsDec").attr("aria-disabled",!1),$("#infantsDec").removeAttr("disabled")),k.addClass("disabled"),k.attr("aria-disabled","true"),k.attr("disabled","disabled"),n.removeClass("displayNone")):(k.removeClass("disabled"),k.removeAttr("aria-describedby"),k.removeAttr("aria-disabled"),k.removeAttr("disabled"),n.addClass("displayNone"),"inc"==
d?"adults"==b?(utils.updateLiveContainer(a.translations.INCREMENT_ADULTS_TEXT+" "+G.adults+" "+a.translations.SELECTED_TEXT),$("#adultsDec").attr("aria-disabled",!1),$("#adultsDec").removeAttr("disabled")):"children"==b?(utils.updateLiveContainer(a.translations.INCREMENT_CHILDREN_TEXT+" "+G.children+" "+a.translations.SELECTED_TEXT),$("#childrenDec").attr("aria-disabled",!1),$("#childrenDec").removeAttr("disabled")):"infants"==b&&(utils.updateLiveContainer(a.translations.INCREMENT_INFANTS_TEXT+" "+
G.infants+" "+a.translations.SELECTED_TEXT),$("#infantsDec").attr("aria-disabled",!1),$("#infantsDec").removeAttr("disabled")):"adults"==b?1==G.adults?(utils.updateLiveContainer(a.translations.MINIMUM_ADULTS_SELECTED_TEXT+" "+G.adults+" "+a.translations.SELECTED_TEXT),$("#adultsDec").attr("aria-disabled",!0),$("#adultsDec").attr("disabled","disabled")):(utils.updateLiveContainer(a.translations.DECREMENT_ADULTS_TEXT+" "+G.adults+" "+a.translations.SELECTED_TEXT),$("#adultsDec").attr("aria-disabled",
!1),$("#adultsDec").removeAttr("disabled")):"children"==b?0==G.children?(utils.updateLiveContainer(a.translations.MINIMUM_CHILDREN_SELECTED_TEXT+" "+G.children+" "+a.translations.SELECTED_TEXT),$("#childrenDec").attr("aria-disabled",!0),$("#childrenDec").attr("disabled","disabled")):utils.updateLiveContainer(a.translations.DECREMENT_CHILDREN_TEXT+" "+G.children+" "+a.translations.SELECTED_TEXT):"infants"==b&&(0==G.infants?(utils.updateLiveContainer(a.translations.MINIMUM_INFANTS_SELECTED_TEXT+" "+
G.infants+" "+a.translations.SELECTED_TEXT),$("#infantsDec").attr("aria-disabled",!0),$("#infantsDec").attr("disabled","disabled")):utils.updateLiveContainer(a.translations.DECREMENT_INFANTS_TEXT+" "+G.infants+" "+a.translations.SELECTED_TEXT)));e.html(G.adults);f.html(G.children);g.html(G.infants);0<G.children?(r.show(),t.each(function(a){G.children>a?($(this).show(),new widgets.SelectWidget($("#childrenAgedropdown_"+y+"_"+G.children),{taborder:"document"})):$(this).hide();$namespace.TabOrder.updatePageTabOrder()})):
r.hide();0<G.infants?(v.show(),u.each(function(a){G.infants>a?($(this).show(),new widgets.SelectWidget($("#infantAgedropdown_"+y+"_"+G.infants),{taborder:"document"})):$(this).hide();$namespace.TabOrder.updatePageTabOrder()})):v.hide();$namespace.TabOrder.updatePageTabOrder()};h.on("click",function(b){b.preventDefault();a.activateGA=!0;if(!$(this).hasClass("disabled")){b=$(this).data("passenger-type");var d=$(this).data("passenger-button-mode");G[b]+=parseInt("inc"===d?1:-1);K(b,d)}});d.on("change",
function(a){a.preventDefault();a=$(this);var b=a.data("passenger-number");G[b]=parseInt(a.val());K()});K();$("#cruise_tooltip").focus(function(){$("#OneAdultText").removeClass("focus")});$("#stateroom_tab_2").focus(function(){$("#OneAdultText").removeClass("focus")})},_isResidencyCityChanged:function(){""!=$("#residencyCity").val()&&($("#residencyCityRequired").hide(),$("#residencyCity").removeClass("error"),$("#residencyCity").attr("aria-describedby",!1))},_onChildrenChange:function(a){a=$(a.currentTarget);
""!=$(a).val()&&($("#childRequired_"+$(a).attr("id")).hide(),$("p#childRequired_"+$(a).attr("id")).removeAttr("tabindex"),a.removeClass("error"),a.removeAttr("aria-describedby"))},_onInfantChange:function(a){a=$(a.currentTarget);""!=$(a).val()&&($("#infantRequired_"+$(a).attr("id")).hide(),$("p#infantRequired_"+$(a).attr("id")).removeAttr("tabindex"),a.removeClass("error"),a.removeAttr("aria-describedby"))},_onBackLink:function(a){a={csr:"SHOW_CRUISE_BOOKING_RESET_WARNING"};var b=$('[name="number_stateroom"]:checked').val(),
d=$(".panel.active");d=$(d).attr("data-bookingindex");1<b&&1!=d?this._onPreviousButtonClick():this.fromOfferPage?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act",$.param(a),null,null,function(a){a?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Resetwarning(this.responseText,$.proxy(self,"cruiseTravelerResetWarning"))).show()):window.history.back()},null,"")):window.history.back()},_setCurrentTabSelected:function(){var a=
this;$(".stateroomTabs").each(function(){$(this).hasClass("active")?$(this).find(".ada-screenreader").text(" - "+a.translations.SELECTED_TEXT):$(this).find(".ada-screenreader").text(" - "+a.translations.NOT_SELECTED_TEXT)})},_onContinueClick:function(a){var b=this;a=$("[data-passenger-number=adults]").html();var d=$("[data-passenger-number=children]").html(),e=$("[data-passenger-number=infants]").html(),f=$('[name="number_stateroom"]:checked').val(),g=$("#isSomeOneSenior").prop("checked"),h=$("#residencyCity").val(),
k=$(this.el).data("line-name"),l=1;if(!this.validateChildAndInfants(d,e))return!1;if(1<f){var p=$(".panel.active");l=$(p).attr("data-bookingindex")}var q=$("select[name=residencyCity_"+l+"]").val();residenceState[l]=q;for(q=1;q<=f;q++)if((""==residenceState[q]||null==residenceState[q])&&l==f)return $namespace.MessageUtil.showMessage({type:1,text:this.module.TranslationTexts.STATE_OF_RESIDENCE_REQUIRED_FOR_ALL}),!1;q=$("#isPastPassenger_"+l).prop("checked");a="csr=SWITCH_STATEROOM&numAdults="+a+"&numChildren="+
d+"&numInfants="+e;a=a+"&bookingIndex="+l;a=a+"&numberOfStaterooms="+f;a=a+"&someOneSenior="+g;a=a+"&residentCityCode="+h;a=a+"&pastPassenger="+q;for(g=1;g<=d;g++)a+="&childrenAges="+$("#child_"+l+"_"+g).val();for(d=1;d<=e;d++)a+="&infantAges="+$("#infant_"+l+"_"+d).val();if(q){e=$("#pastPassengerNumber_"+l);d=$("#pastPassengerFirstName_"+l);g=$("#pastPassengerLastName_"+l);h=$("#pastPaxGender_"+l);q=$("#pastPaxDateOfBirthMonth_"+l);var r=$("#pastPaxDateOfBirthDate_"+l),v=$("#pastPaxDateOfBirthYear_"+
l);0<e.length&&(a=a+"&pastPassengerNumber="+e.val());0<d.length&&(a=a+"&pastPassengerFirstName="+d.val());0<g.length&&(a=a+"&pastPassengerLastName="+g.val());0<h.length&&(a=a+"&pastPassengerGender="+h.val());0<q.length&&0<r.length&&0<v.length&&(e=q.val()+"/"+r.val()+"/"+v.val(),a=a+"&pastPassengerDateOfBirth="+e)}$namespace.DomUtil.setElementLoadingMask(!0,null,!1);a+="&fromOfferPage="+this.fromOfferPage;$namespace.AjaxUtil.makeMultiAjaxCall(Array(new $namespace.AjaxUtil.AsynchronousMultiRequestItem("cruiseTraveler.act",
a,null,null,function(a,d){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text}),$namespace.DomUtil.setElementLoadingMask(!1,null,!1);else if(b.validatePastPassengerResponse(a)){if(1==f||f==l){$namespace.Analytics.trackEvent("Cruise_Travelers","#_of_Staterooms",f);if(d)for(a=JSON.parse(d),0<a.adults&&$namespace.Analytics.trackEvent("Cruise_Travelers","adults",a.adults),0<a.children&&$namespace.Analytics.trackEvent("Cruise_Travelers","children",a.children),0<a.infants&&
$namespace.Analytics.trackEvent("Cruise_Travelers","infants",a.infants),d=0;d<a.seniorCitizen.length;d++)a.seniorCitizen[d]&&$namespace.Analytics.trackEvent("Cruise_Travelers","Senior_Citizen","Yes"),""!=a.residentCity[d]&&$namespace.Analytics.trackEvent("Cruise_Travelers","Member_State",$("#residencyCity option[value='"+a.residentCity[d]+"']").text()),1==a.pastPassenger[d]&&$namespace.Analytics.trackEvent("Cruise_Travelers","Previous_"+k,"Yes");b._setCurrentTabSelected();$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_CATEGORY_GROUP_RESULTS)}else $(p).removeClass("active"),parseInt(),$("#stateroom_tab_"+l).removeClass("active"),$("#OneAdultText").removeClass("focus"),$(".tab-panels").html(this.responseText),a=parseInt(l)+1,$("#stateroom_tab_"+a).addClass("active"),$("#OneAdultText").focus(),$("#OneAdultText").addClass("focus"),b.initTooltip(),b.initPassengerCounter(),f>a?b.displayNextStateRoomButton():b.displayNextStateRoomTypeButton(),$namespace.TabOrder.updatePageTabOrder(),
b._setCurrentTabSelected(),1!=a&&($("#prevStateRoom").show(),$namespace.TabOrder.updatePageTabOrder()),b.setFocusTop(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize")}else $namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null,null)),!0)},_onStateroomClick:function(a){var b=this,d=$(a.currentTarget).val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act","csr=CHANGE_IN_NUMBER_OF_STATEROOMS&numberOfStateroomsSelected=true&numberOfStaterooms="+
d,null,"cruiseStaterooms",function(a){this.message&&b._showErrorModal(this);1<d?(b.displayNextStateRoomButton(),b._setCurrentTabSelected(),$("#addOns-tab").addClass("displayNone")):(b.displayNextStateRoomTypeButton(),$("#addOns-tab").removeClass("displayNone"));$("#prevStateRoom").hide();$(".cruiseTravelerInformation").addClass("displayNone");$(".cruiseTravelerStateroomAccordion").addClass("displayNone");$(".cruiseTravelerFlightAccordion").addClass("displayNone");$(".cruiseTravelerHotelAccordion").addClass("displayNone");
$(".cruiseTravelerTransportAccordion").addClass("displayNone");$("p.info-bar-price").each(function(a){$(this).hide()});$namespace.Utils.Breakpoint.isMobile()&&$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act","csr=SHOW_TRAVELER_PAGE",null,"mainContent",function(){$namespace.Application.initializeOnMainContentReload();$namespace.TabOrder.updatePageTabOrder();$('[name="number_stateroom"]:checked').focus()},null);b.initTooltip();b.initPassengerCounter();$(window).on("resize orientationchange",
$.proxy(this._onResize,this));$(window).trigger("resize")},null)},_onStateroomTabClick:function(a){var b=$(a.currentTarget).data("stateroom-index"),d=this,e=$('[name="number_stateroom"]:checked').val(),f=1;if(1<e){var g=$(".panel.active");f=$(".active").attr("data-stateroom-index")}if(b!=f){a=$("select[name=residencyCity_"+f+"]").val();residenceState[f]=a;a=$("[data-passenger-number=adults]").html();var h=$("[data-passenger-number=children]").html(),k=$("[data-passenger-number=infants]").html();e=
$('[name="number_stateroom"]:checked').val();var l=$("#isSomeOneSenior").prop("checked"),p=$("#residencyCity").val(),q=$("#isPastPassenger_"+f).prop("checked");if(b>f&&!this.validateChildAndInfants(h,k))return!1;a={numAdults:a,numChildren:h,numInfants:k};for(var r=1;r<=h;r++)a.childrenAges=a.childrenAges||[],a.childrenAges.push($("#child_"+f+"_"+r).val());for(h=1;h<=k;h++)a.infantAges=a.infantAges||[],a.infantAges.push($("#infant_"+f+"_"+h).val());a.someOneSenior=l;a.residentCityCode=p;if(a.pastPassenger=
q){k=$("#pastPassengerNumber_"+f);l=$("#pastPassengerFirstName_"+f);p=$("#pastPassengerLastName_"+f);q=$("#pastPaxGender_"+f);h=$("#pastPaxDateOfBirthMonth_"+f);r=$("#pastPaxDateOfBirthDate_"+f);var v=$("#pastPaxDateOfBirthYear_"+f);0<k.length&&(a.pastPassengerNumber=k.val());0<l.length&&(a.pastPassengerFirstName=l.val());0<p.length&&(a.pastPassengerLastName=p.val());0<q.length&&(a.pastPassengerGender=q.val());0<h.length&&0<r.length&&0<v.length&&(k=h.val()+"/"+r.val()+"/"+v.val(),a.pastPassengerDateOfBirth=
k)}b>f?(a.csr="SHOW_STATEROOM_TAB",a.bookingIndex=b,a.numberOfStaterooms=e,k=function(a){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(d.validatePastPassengerResponse(a)){$(g).removeClass("active");$("#OneAdultText").removeClass("focus");$("#stateroom_tab_"+f).removeClass("active");$("#OneAdultText").removeClass("focus");$(".tab-panels").html(this.responseText);a=parseInt(b);var h="#stateroom_tab_"+a;$(h).addClass("active");$(h).blur();$("#OneAdultText").focus();
$("#OneAdultText").addClass("focus");1!=b?$("#prevStateRoom").show():$("#prevStateRoom").hide();d._setCurrentTabSelected();b==e&&b==a?d.displayNextStateRoomTypeButton():d.displayNextStateRoomButton();d.initTooltip();d.initPassengerCounter();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize");d.setFocusTop()}}):(a.csr="SHOW_STATEROOM_TAB",a.bookingIndex=b,a.numberOfStaterooms=e,k=function(a){this.message&&d._showErrorModal(this);$(g).removeClass("active");
$("#stateroom_tab_"+f).removeClass("active");$("#OneAdultText").removeClass("focus");$(".tab-panels").html(this.responseText);a="#stateroom_tab_"+parseInt(b);$(a).addClass("active");$(a).blur();$("#OneAdultText").addClass("focus");$("#OneAdultText").focus();1!=b?$("#prevStateRoom").show():$("#prevStateRoom").hide();d._setCurrentTabSelected();b==e?d.displayNextStateRoomTypeButton():d.displayNextStateRoomButton();d.initTooltip();d.initPassengerCounter();$(window).on("resize orientationchange",$.proxy(this._onResize,
this));$(window).trigger("resize")});$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act",$.param(a,!0),null,null,k,null)}},displayNextStateRoomButton:function(){$("#continueToStateroomType").hide();$("#nextStateRoom").show();$.hook("continue_button").text(this.translations.NEXT_STATEROOM)},displayNextStateRoomTypeButton:function(){$("#continueToStateroomType").show();$("#nextStateRoom").hide();$.hook("continue_button").text(this.translations.CONTINUE_TO_STATEROOM_TEXT)},_onPreviousButtonClick:function(){var a=
this,b=$(".panel.active"),d=$(b).attr("data-bookingindex"),e=parseInt(d)-1,f=$('[name="number_stateroom"]:checked').val();var g="csr=SHOW_STATEROOM_TAB&bookingIndex="+e+"&numberOfStaterooms="+f;var h=$("[data-passenger-number=adults]").html(),k=$("[data-passenger-number=children]").html(),l=$("[data-passenger-number=infants]").html();f=$('[name="number_stateroom"]:checked').val();var p=$("#isSomeOneSenior").prop("checked"),q=$("#residencyCity").val(),r=$("#isPastPassenger_"+d).prop("checked");g=g+
"&numAdults="+h+"&numChildren="+k;g=g+"&numInfants="+l;for(h=1;h<=k;h++)g+="&childrenAges="+$("#child_"+d+"_"+h).val();for(k=1;k<=l;k++)g+="&infantAges="+$("#infant_"+d+"_"+k).val();g=g+"&someOneSenior="+p;g=g+"&residentCityCode="+q;g=g+"&pastPassenger="+r;if(r){l=$("#pastPassengerNumber_"+d);p=$("#pastPassengerFirstName_"+d);q=$("#pastPassengerLastName_"+d);r=$("#pastPaxGender_"+d);k=$("#pastPaxDateOfBirthMonth_"+d);h=$("#pastPaxDateOfBirthDate_"+d);var v=$("#pastPaxDateOfBirthYear_"+d);0<l.length&&
(g=g+"&pastPassengerNumber="+l.val());0<p.length&&(g=g+"&pastPassengerFirstName="+p.val());0<q.length&&(g=g+"&pastPassengerLastName="+q.val());0<r.length&&(g=g+"&pastPassengerGender="+r.val());0<k.length&&0<h.length&&0<v.length&&(l=k.val()+"/"+h.val()+"/"+v.val(),g=g+"&pastPassengerDateOfBirth="+l)}$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act",g,null,null,function(g){this.message&&a._showErrorModal(this);$(b).removeClass("active");$("#stateroom_tab_"+d).removeClass("active");
$("#OneAdultText").removeClass("focus");$(".tab-panels").html(this.responseText);$("#stateroom_tab_"+e).addClass("active");$("#OneAdultText").addClass("focus");1!=e?$("#prevStateRoom").show():$("#prevStateRoom").hide();$("#OneAdultText").attr("tabindex","-1");$("#OneAdultText").focus();a._setCurrentTabSelected();e==f?a.displayNextStateRoomTypeButton():a.displayNextStateRoomButton();a.initTooltip();a.initPassengerCounter();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize");
a.setFocusTop()},null)},setFocusTop:function(){900<$(window).width()?$(window).scrollTop(380):$(window).scrollTop(240)},validateChildAndInfants:function(a,b){var d=!0,e=!0,f=1,g=!0;0<a&&$(".select-dropdown-children").each(function(b){b=$(this);d&&(f==a&&(d=!1),""==b.val()&&($('.accordion-button[aria-expanded="true"]').click(),$("#childRequired_"+b.attr("id")).removeClass("displayNone"),b.attr("aria-describedby","childRequired_"+b.attr("id")),$("p#childRequired_"+b.attr("id")).removeAttr("style"),
b.addClass("error"),g&&($("#"+b.attr("id")).focus(),g=!1),e=!1));f++});f=1;d=!0;0<b&&$(".select-dropdown-infant").each(function(a){a=$(this);d&&(f==b&&(d=!1),""==a.val()&&($('.accordion-button[aria-expanded="true"]').click(),$("#infantRequired_"+a.attr("id")).removeClass("displayNone"),a.attr("aria-describedby","infantRequired_"+a.attr("id")),$("p#infantRequired_"+a.attr("id")).removeAttr("style"),a.addClass("error"),g&&($("#"+a.attr("id")).focus(),g=!1),e=!1));f++});if(""==$("#residencyCity").val()){$('.accordion-button[aria-expanded="true"]').click();
$("#residencyCityRequired").removeClass("displayNone");$("#residencyCity").addClass("error");$("#residencyCityRequired").removeAttr("style");if(g&&(g=!1,$("#residencyCity").focus(),$("#residencyCity").attr("aria-describedby","residencyCityRequired"),$("#residencyCityRequired").removeAttr("style"),1==e)){var h=$(window),k=$("#residencyCity"),l=k.offset().top;k=k.height();var p=h.height();h.scrollTop(l-(p-k)/2)}e=!1}var q=1;1<$('[name="number_stateroom"]:checked').val()&&(h=$(".panel.active"),q=$(h).attr("data-bookingindex"));
$("#isPastPassenger_"+q).prop("checked")&&$.each("#pastPassengerNumber #pastPassengerFirstName #pastPassengerLastName #pastPaxGender #pastPaxDateOfBirthMonth #pastPaxDateOfBirthDate #pastPaxDateOfBirthYear".split(" "),function(a,b){a=b+"_"+q;b=b+"_"+q+"_Error";var d=$(a);if(0<d.length&&""==d.val()){$('.accordion-button[aria-expanded="true"]').click();$(b).show();d.addClass("error");d.attr("aria-describedby",$(b).attr("id"));if(g&&(g=!1,d.focus(),1==e)){b=$(window);d=$(a);a=d.offset().top;d=d.height();
var f=b.height();b.scrollTop(a-(f-d)/2)}e=!1}});return e},trackGA:function(){var a="searchWidget";this.fromOfferPage&&(a="offerPage");a="/cr/booking/"+a+"/travelersPage/"+$(this.el).data("destination")+"/"+$(this.el).data("line-name")+"/"+$(this.el).data("ship-name")+"/"+$(this.el).data("departure-date");$namespace.Analytics.track({vendor:"google",type:"pageview",text:a})},trackAdobe:function(){var a="searchWidget";this.fromOfferPage&&(a="offerPage");a="/cr/booking/"+a+"/travelersPage/"+$(this.el).data("destination")+
"/"+$(this.el).data("line-name")+"/"+$(this.el).data("ship-name")+"/"+$(this.el).data("departure-date");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"Travelers - Cruises | Costco Travel",eVar2:"cruise",eVar74:a})},_onLoyaltyProgramClick:function(){$('[data-hook="pastPassenger"]').prop("checked")?($("#pastPassengerNumberRow").addClass("displayBlock"),$("#pastPassengerNumberRow").removeClass("displayNone")):($("#pastPassengerNumberRow").removeClass("displayBlock"),
$("#pastPassengerNumberRow").addClass("displayNone"),$('[data-hook="loyaltyProgramErrorMessage"]').addClass("displayNone"));$namespace.TabOrder.updatePageTabOrder()},_onPastPassengerFieldChange:function(a){a=$(a.currentTarget);""!=a.val()&&(a.removeClass("error"),a.removeAttr("aria-describedby"),a="#"+a.attr("id")+"_Error",$(a).hide())},_onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},_onAlphaNumericFieldKeyPress:function(a){return 10>$('[data-fieldtype="alphanumeric-field"]').val().length&&
$namespace.Validation.isAlphaNumericKeyCode(a)},validatePastPassengerResponse:function(a){return $('[data-hook="pastPassenger"]').prop("checked")&&void 0!=a&&!a?($('[data-hook="loyaltyProgramErrorMessage"]').removeClass("displayNone").attr("tabindex","-1").focus(),!1):!0},_showErrorModal:function(a){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseTravelerModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});
$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Travelers_Cruise_Summary","Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Travelers_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?
$namespace.Analytics.trackEvent("CR_Travelers_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Travelers_Flights_Summary","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Travelers_Hotel_Summary","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Travelers_Transportation_Summary","Click","Expand")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};validate=$namespace.Validation||{};messageUtil=$namespace.MessageUtil||{};var isFinalTab=!1,selectedStateroomTab=1,notAvailableWarning=!1;$namespace.View=$namespace.View||{};
$namespace.View.CruiseStateroomTypeView=Backbone.View.extend({el:"#cruiseStateroomTypePage",ui:{chatLink:null},events:{'click [data-hook="goBackBtn"]':"_onBackLink",'click [name="stateroom_tab"]':"_onStateroomTabClick",'click [data-hook="continue_stateroomLocation_btn"]':"_continueButtonClick",'click [data-hook="previous_stateroom_btn"]':"_previousStateroomClick",'click [data-hook="stateroom-radio"]':"_onStateroomRadioClick"},stateroomTypeNotAvailable:{INSIDE:!1,BALCONY:!1,OCEAN:!1,SUITE:!1},initialize:function(a){var b=
$.extend({},a);this.controller=b.controller;this.module=b.module;b=$(window);var d=this.module.TranslationTexts,e=$(this.el).data("max-stateroom");1==e?$.hook("continue_stateroomLocation_btn").text(d.CONTINUE_TO_STATEROOM_LOCATION_TEXT):1<e&&$.hook("continue_stateroomLocation_btn").text(d.NEXT_STATEROOM);$("#prev_stateroom").addClass("displayNone");$(".accordion-item").removeClass("accordion-item-current");$(".cruiseTravelerStateroomAccordion").addClass("accordion-item-current");this.trackPageView("true"==
a.cruiseSearchFromOfferPage?!0:!1);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var f=this;f.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",f.getGaEventLabel())})}this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.keyPress();this.noStaterooomAvaiable();$namespace.TabOrder.updatePageTabOrder();b.on("resize orientationchange",
$.proxy(this._onResize,this));b.trigger("resize");a=$(".stateroomTab").attr("data-bookingindex");this.initialGroupCode=$("input[name='stateroom_option_"+a+"']:checked").val()},noStaterooomAvaiable:function(){if(notAvailableWarning="true"==$(".max-people-warning").attr("data-notavailable")?!0:!1)$("#max-people-warning").addClass("focus"),$("#stateroom_roomType").removeClass("focus"),$("#single_stateroom_roomType").removeClass("focus"),this.initializeStateroomNotAvalable(!0);else{var a=$("#insideStateroom").attr("data-stateroomNotAvailable"),
b=$("#balconyStateroom").attr("data-stateroomNotAvailable"),d=$("#oceanViewStateroom").attr("data-stateroomNotAvailable"),e=$("#suiteStateroom").attr("data-stateroomNotAvailable");this.stateroomTypeNotAvailable.INSIDE="true"==a?!0:!1;this.stateroomTypeNotAvailable.BALCONY="true"==b?!0:!1;this.stateroomTypeNotAvailable.OCEAN="true"==d?!0:!1;this.stateroomTypeNotAvailable.SUITE="true"==e?!0:!1}$namespace.TabOrder.updatePageTabOrder()},initializeStateroomNotAvalable:function(a){this.stateroomTypeNotAvailable.INSIDE=
a;this.stateroomTypeNotAvailable.BALCONY=a;this.stateroomTypeNotAvailable.OCEAN=a;this.stateroomTypeNotAvailable.SUITE=a},setNotAvailableStateroomType:function(a,b){for(var d=Object.keys(this.stateroomTypeNotAvailable),e=0;e<d.length;e++){var f=d[e];if(b.includes(f)&&"INSIDE"==f){this.stateroomTypeNotAvailable.INSIDE=a;break}else if(b.includes(f)&&"BALCONY"==f){this.stateroomTypeNotAvailable.BALCONY=a;break}else if(b.includes(f)&&"OCEAN"==f){this.stateroomTypeNotAvailable.OCEAN=a;break}else if(b.includes(f)&&
"SUITE"==f){this.stateroomTypeNotAvailable.SUITE=a;break}}},checkIsAllStateroomNotAvailable:function(){for(var a=!0,b=Object.values(this.stateroomTypeNotAvailable),d=0;d<b.length;d++)if(a&&b[d])a=!0;else{a=!1;break}a&&($("#stateRoomTypeUnavailable").addClass("displayNone"),$("#max-people-warning").removeClass("displayNone"),$("#max-people-warning").addClass("focus"),$("#max-people-warning").attr("data-notavailable","true"));$namespace.TabOrder.updatePageTabOrder()},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},
_onBackLink:function(a){1==selectedStateroomTab?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),window.history.back(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1)):(--selectedStateroomTab,this._showTab())},_showTab:function(){var a=$(this.el).data("max-stateroom");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act","csrt=LOAD_CRUISE_CATEGORY_GROUP_RESULTS_TAB_CONTENT_SESSION_SWITCH&bookingIndex="+selectedStateroomTab,null,"cruiseStateroomTypeResultsTabContent",function(){$("#stateroom_roomType").focus();
$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null);this.switchTabs(a,selectedStateroomTab)},switchTabs:function(a,b){$("a#stateroom_tab_"+b).addClass("active");this.keyPress();1==b?$("#prev_stateroom").addClass("displayNone"):$("#prev_stateroom").removeClass("displayNone");var d=this.module.TranslationTexts;a==b?(isFinalTab=!0,$.hook("continue_stateroomLocation_btn").text(d.CONTINUE_TO_STATEROOM_LOCATION_TEXT)):(isFinalTab=!1,$.hook("continue_stateroomLocation_btn").text(d.NEXT_STATEROOM));
for(d=1;d<=a;d++)d!=b&&($("a#stateroom_tab_"+d+".active").removeClass("active"),this.setCurrentTabSelected());this.initializeStateroomNotAvalable(!1);$namespace.TabOrder.updatePageTabOrder()},_onStateroomTabClick:function(a){a=$(a.currentTarget);var b=$(".stateroomTab").attr("data-bookingindex"),d=a.data("stateroom-index");e="true"==$(".max-people-warning").attr("data-notavailable")?!0:!1;if(d==selectedStateroomTab)$namespace.DomUtil.setElementLoadingMask(!0,null,!1),e?(a.blur(),$("#max-people-warning").addClass("focus")):
($("#stateroom_roomType").focus(),$("#max-people-warning").removeClass("focus")),$namespace.TabOrder.updatePageTabOrder(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1);else if(d>b)this.nextStateroomTabOrCruiseLocationPage(isFinalTab),e?(a.blur(),$("#max-people-warning").removeClass("focus")):(a.blur(),$("#max-people-warning").addClass("focus"));else{selectedStateroomTab=d;var e="true"==$(".max-people-warning").attr("data-notavailable")?!0:!1;e?this._showTab():(this.previousStateroomTab(),e?
(a.blur(),$("#max-people-warning").removeClass("focus")):(a.blur(),$("#max-people-warning").addClass("focus")))}},_continueButtonClick:function(a){1==$(this.el).data("max-stateroom")&&(isFinalTab=!0);this.nextStateroomTabOrCruiseLocationPage(isFinalTab)},_previousStateroomClick:function(a){--selectedStateroomTab;"true"==$(".max-people-warning").attr("data-notavailable")?this._showTab():this.previousStateroomTab()},clearSessionStorageForLocationPage:function(a,b){a!=this.initialGroupCode&&($namespace.Storage.remove($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,
"Stateroom"+b+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_PRICE_KEY),$namespace.Storage.remove($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,"Stateroom"+b+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_PRICE_CHANGED_KEY))},nextStateroomTabOrCruiseLocationPage:function(a){var b=this;$("#stateRoomTypeUnavailable").addClass("displayNone");var d=$(this.el).data("max-stateroom");$(this.el).data("destination");var e=$(".stateroomTab").attr("data-bookingindex"),
f=$("input[name='stateroom_option_"+e+"']:checked").val(),g=$(window);if(validate.isNull(f))this.showValidationMessage(),notAvailableWarning=!0;else{var h=function(a){void 0==a||a?($namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act","csrt=LOAD_CRUISE_CATEGORY_GROUP_RESULTS_TAB_CONTENT_SESSION_SWITCH&bookingIndex="+(selectedStateroomTab+1),null,"cruiseStateroomTypeResultsTabContent",function(){"true"==$(".max-people-warning").attr("data-notavailable")?$("#max-people-warning").addClass("focus"):
$("#stateroom_roomType").focus();$namespace.TabOrder.updatePageTabOrder();b.clearSessionStorageForLocationPage(f,selectedStateroomTab-1);b.initialGroupCode=$("input[name='stateroom_option_"+selectedStateroomTab+"']:checked").val();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null),b.switchTabs(d,selectedStateroomTab+1),selectedStateroomTab+=1):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),b.disableStateroom(e,f),$("#stateRoomTypeUnavailable").removeClass("displayNone").focus(),b.setNotAvailableStateroomType(!a,
f),b.checkIsAllStateroomNotAvailable());g.on("resize orientationchange",$.proxy(this._onResize,this));g.trigger("resize")},k=function(a){void 0==a||a?$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act","csrt=MOVE_TO_NEXT_PAGE",null,"cruiseStateroomTypeResultsTabContent",function(a){var d;for(d in a){var e="Stateroom_"+d+"_"+a[d];$namespace.Analytics.trackEvent("Cruise_Stateroom_Type",e,b.getGaEventLabel())}b.clearSessionStorageForLocationPage(f,d);$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY);$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),b.disableStateroom(e,f),$("#stateRoomTypeUnavailable").removeClass("displayNone").focus(),b.setNotAvailableStateroomType(!a,f),b.checkIsAllStateroomNotAvailable());g.on("resize orientationchange",$.proxy(this._onResize,this));g.trigger("resize")};$namespace.DomUtil.setElementLoadingMask(!0,null,
!1);var l="csrt=DO_CRUISE_MULTICATEGORY_CABIN_SEARCH_MULTI_CABIN_SESSION_SWITCH&bookingIndex="+e+("&cruiseCategoryGroupCode="+f);a?$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act",l,null,"cruiseStateroomTypeResultsTabContent",k,null):a||$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act",l,null,"cruiseStateroomTypeResultsTabContent",h,null)}},previousStateroomTab:function(){var a=this;$("#stateRoomTypeUnavailable").addClass("displayNone");var b=$(this.el).data("max-stateroom"),
d=$(".stateroomTab").attr("data-bookingindex"),e=$("input[name='stateroom_option_"+d+"']:checked").val(),f=$(window);if(validate.isNull(e))this.showValidationMessage(),notAvailableWarning=!0;else{var g="csrt=DO_CRUISE_MULTICATEGORY_CABIN_SEARCH_MULTI_CABIN_SESSION_SWITCH&bookingIndex="+d+("&cruiseCategoryGroupCode="+e);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act",g,null,"cruiseStateroomTypeResultsTabContent",function(g){void 0==
g||g?($namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateRoomType.act","csrt=LOAD_CRUISE_CATEGORY_GROUP_RESULTS_TAB_CONTENT_SESSION_SWITCH&bookingIndex="+selectedStateroomTab,null,"cruiseStateroomTypeResultsTabContent",function(){$("#stateroom_roomType").focus();$namespace.TabOrder.updatePageTabOrder();a.clearSessionStorageForLocationPage(e,selectedStateroomTab+1);a.initialGroupCode=$("input[name='stateroom_option_"+selectedStateroomTab+"']:checked").val();$namespace.DomUtil.setElementLoadingMask(!1,
null,!1)},null),a.switchTabs(b,selectedStateroomTab)):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),a.disableStateroom(d,e),$("#stateRoomTypeUnavailable").removeClass("displayNone").focus(),selectedStateroomTab=d,a.setNotAvailableStateroomType(!g,e),a.checkIsAllStateroomNotAvailable());f.on("resize orientationchange",$.proxy(this._onResize,this));f.trigger("resize")},null)}},disableStateroom:function(a,b){$("#stateroom_roomType").removeClass("focus");var d=this.module.TranslationTexts;"INSIDE"==
b?($("#insideStateroom").addClass("not-avilable"),$("#stateroom_"+a+"_1_subtitle").text(d.NOT_AVAILABLE),$("#stateroom_"+a+"_1").prop("checked",!1),$("#stateroom_"+a+"_1").attr("disabled","disabled")):"OCEAN VIEW"==b?($("#oceanViewStateroom").addClass("not-avilable"),$("#stateroom_"+a+"_2_subtitle").text(d.NOT_AVAILABLE),$("#stateroom_"+a+"_2").prop("checked",!1),$("#stateroom_"+a+"_2").attr("disabled","disabled")):"BALCONY"==b?($("#balconyStateroom").addClass("not-avilable"),$("#stateroom_"+a+"_3_subtitle").text(d.NOT_AVAILABLE),
$("#stateroom_"+a+"_3").prop("checked",!1),$("#stateroom_"+a+"_3").attr("disabled","disabled")):"SUITE"==b&&($("#suiteStateroom").addClass("not-avilable"),$("#stateroom_"+a+"_4_subtitle").text(d.NOT_AVAILABLE),$("#stateroom_"+a+"_4").prop("checked",!1),$("#stateroom_"+a+"_4").attr("disabled","disabled"))},_onStateroomRadioClick:function(a){a=$(a.currentTarget);$("input[name=stateroom_option]").prop("checked",!1);$("#stateroom_"+a.data("tab-counter")).prop("checked",!0);$("#stateroom_"+a.data("tab-counter")).focus();
$namespace.TabOrder.updatePageTabOrder()},trackPageView:function(a){var b="bookingWidget";a&&(b="offerPage");a="/cr/booking/"+b+"/stateroomType"+this.getGaCruisePackagePrefix();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"Cruise",v67:"1",v74:a,v34:$(this.el).data("destination")});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a})},showValidationMessage:function(){var a=this.module.TranslationTexts;messageUtil.showMessage({type:1,
text:a.STATROOM_VALIDATION_MESSAGE,title:a.STATE_ROOM_SELECTION_NOT_VALID})},keyPress:function(){this.$el.find(".stateroom-option").on("keypress keydown",function(a){var b=$(".stateroomTab").attr("data-bookingindex"),d=a.keyCode?a.keyCode:a.which;if(38==d||40==d)a=$(a.currentTarget),$("input[name=stateroom_option"+b+"]").prop("checked",!1),$("#stateroom_"+a.data("tab-counter")).prop("checked",!0),$("#stateroom_"+a.data("tab-counter")).focus()});$namespace.TabOrder.updatePageTabOrder()},setCurrentTabSelected:function(){var a=
this.module.TranslationTexts;$(".stateroomTabs").each(function(){$(this).hasClass("active")?$(this).find(".ada-screenreader").text(" - "+a.SELECTED_TEXT):$(this).find(".ada-screenreader").text(" - "+a.NOT_SELECTED_TEXT)})},trackEventAccordion:function(a,b){var d;b.hasClass("cruiseSummaryAccordion")?d="CR_Stateroom_Type_Cruise_Summary":b.hasClass("cruiseTravelerInformation")?d="CR_Stateroom_Type_Travelers":b.hasClass("cruiseTravelerStateroomAccordion")?d="CR_Stateroom_Type_Stateroom":b.hasClass("cruiseTravelerFlightAccordion")?
d="CR_Stateroom_Type_Flights_Summary":b.hasClass("cruiseTravelerHotelAccordion")?d="CR_Stateroom_Type_Hotel_Summary":b.hasClass("cruiseTravelerTransportAccordion")&&(d="CR_Stateroom_Type_Transportation_Summary");$namespace.Analytics.trackEvent(d,"Click","Expand")},getGaEventLabel:function(){return"/cr/booking/bookingWidget/stateroomType"+this.getGaCruisePackagePrefix()},getGaCruisePackagePrefix:function(){var a=$(this.el);return"/"+a.data("destination")+"/"+a.data("cruise-line-name")+"/"+a.data("cruise-ship-name")+
"/"+a.data("cruise-departure-date")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};AIRLINE_NUMBER_REGEX=/[0-9]{1,4}/g;AIRPORT_CODE_REGEX=/[a-zA-Z0-9]{2,4}/g;AIRPORT_TRANSFER_REGEX=/[0-9][0-9]?:[0-9][0-9]?\s[a-zA-Z][a-zA-Z]/g;HOTEL_REMARKS_REGEX=/[a-zA-Z0-9,@'\.:\-\(\)\s&#\?\$/!%;]{0,512}/g;$namespace.View=$namespace.View||{};
$namespace.View.SpecialRequestsView=Backbone.View.extend({el:"#packageSpecialRequests",ui:{chatLink:null},isFirstFormFieldFocusActive:!1,events:{'click a[data-hook="continue_button"]':"_onContinueClick","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'change [data-hook="ChangeArrivalAirline"]':"_changeArrivalAirline",'change [data-hook="ChangeArrivalTime"]':"_changeArrivalTime",'keypress [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'paste [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",
'change [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeDepartureAirline"]':"_changeDepartureAirline",'change [data-hook="ChangeDepartureTime"]':"_changeDepartureTime",'keypress [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'paste [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ArrivalTransferAirline"]':"_changeArrivalTransferAirline",
'change [data-hook="ArrivalTransferTime"]':"_changeArrivalTransferTime",'keypress [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'paste [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="DepartureTransferAirline"]':"_changeDepartureTransferAirline",'change [data-hook="DepartureTransferTime"]':"_changeDepartureTransferTime",
'keypress [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="SelectedHotelOption"]':"_SelectedHotelOption",'keypress [data-hook="remarks"]':"_SelectedHotelRemarks"},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;var b=$("#selectedHotelRemark_0");
$(".textarea-count-0").html(b.val().length);b.on("change keyup paste",function(){512<b.val().length?(b.val(b.val().substr(0,512)),$(".textarea-count-0").html(512)):$(".textarea-count-0").html(b.val().length)});b.on("keypress",function(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if([42,43,92,91,93,94,95,96,60,62,34].includes(b)||32>b||122<b)return a.preventDefault(),!1});var d=$("#selectedHotelRemark_1");1==d.length&&$(".textarea-count-1").html(d.val().length);d.on("change keyup paste",function(){512<
d.val().length?(d.val(d.val().substr(0,512)),$(".textarea-count-1").html(512)):$(".textarea-count-1").html(d.val().length)});d.on("keypress",function(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;String.fromCharCode(b);if([42,43,92,91,93,94,95,96,60,62,34].includes(b)||32>b||122<b)return a.preventDefault(),!1});$(".flightNumber").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,4),a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:
a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1});$(".flightNumber").on("paste",function(a){window.event.clipboardData.getData("text");a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(4<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),!1});var e="",f="",g="";$("#noFlightInfo_0").change(function(){$("#noFlightInfo_0").is(":checked")?(e=$("#selectedArrivalOption_0_AirCode").val(),f=$("#selectedArrivalOption_0_AirlineNumber").val(),
g=$("#selectedArrivalOption_0_TransferTime").val(),$("#flightInformation_0").hide(),$(".fieldset").removeClass("sp-bot-4"),$("#selectedArrivalOption_0_AirCode").val(""),$("#selectedArrivalOption_0_AirlineNumber").val(""),$("#selectedArrivalOption_0_TransferTime").val("")):($("#flightInformation_0").show(),$("#selectedArrivalOption_0_AirCode").val(e),$("#selectedArrivalOption_0_AirlineNumber").val(f),$("#selectedArrivalOption_0_TransferTime").val(g))});var h="",k="",l="";$("#noFlightInfo_1").change(function(){$("#noFlightInfo_1").is(":checked")?
(h=$("#selectedDepartOption_1_AirCode").val(),k=$("#selectedDepartOption_1_AirlineNumber").val(),l=$("#selectedDepartOption_1_TransferTime").val(),$("#flightInformation_1").hide(),$("#selectedDepartOption_1_AirCode").val(""),$("#selectedDepartOption_1_AirlineNumber").val(""),$("#selectedDepartOption_1_TransferTime").val("")):($("#flightInformation_1").show(),$("#selectedDepartOption_1_AirCode").val(h),$("#selectedDepartOption_1_AirlineNumber").val(k),$("#selectedDepartOption_1_TransferTime").val(l))});
this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.destination=$(this.el).data("destination");this.city=$(this.el).data("city");this.packageId=$(this.el).data("package-id");this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var p=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"/booking/viewSpecialRequests/"+p.destination+"/"+p.city+"/"+p.packageId)})}$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(".blue-bullets li").each(function(a,b){$namespace.Utils.Breakpoint.isMobile()?2<=a&&($(b).attr("aria-hidden","true"),2==a&&($(b).attr("id","mobileReadMoreLink"),$(b).attr("tabindex",
"-1"),$(b).attr("class","no-outline"))):3<=a&&($(b).attr("aria-hidden","true"),3==a&&($(b).attr("tabindex","-1"),$(b).attr("id","desktopReadMoreLink"),$(b).attr("class","no-outline")))});0==$("#rental-car").length&&0==$("#airportComponent").length&&$("#hotel-card").addClass("no-padding-top");0==$("#airportComponent").length&&$("#rental-car").addClass("no-padding-top");if("false"==$("#flightInfoAvailableInAirportTransfer").val())for(a=0;2>a;a++){var q="";q=0==a?"Arrival":"Depart";var r=$("#selected"+
q+"Option_"+a+"_AirlineNumber"),v=$("#selected"+q+"Option_"+a+"_AirCode");q=$("#selected"+q+"Option_"+a+"_TransferTime");$(r).attr("required","true");$(r).attr("aria-required","true");$(v).attr("required","true");$(v).attr("aria-required","true");$(q).attr("required","true");$(q).attr("aria-required","true")}v=$("#numberOfCars").val();for(a=0;a<parseInt(v);a++){q="selectedCarOption_"+a+"_ArrivalAirCode";r=q.replace("_ArrivalAirCode","_ArrivalAirlineNumber");var n=q.replace("_ArrivalAirCode","_ArrivalTime"),
t=q.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),u=q.replace("_ArrivalAirCode","_ArrivalAirlineNumber_Required"),w=q.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=$("#selectedCarOption_"+a+"_ArrivalAirCode").val()&&($("#"+t).text("*"),$("#"+u).text("*"),$("#"+w).text("*"),$("#"+q).attr("required","true"),$("#"+q).attr("aria-required","true"),$("#"+r).attr("required","true"),$("#"+r).attr("aria-required","true"),$("#"+n).attr("required","true"),$("#"+n).attr("aria-required","true"));
r="selectedCarOption_"+a+"_DepartureAirCode";q=r.replace("_DepartureAirCode","_DepartureAirlineNumber");n=r.replace("_DepartureAirCode","_DepartureTime");t=r.replace("_DepartureAirCode","_DepartureAirCode_Required");u=r.replace("_DepartureAirCode","_DepartureAirlineNumber_Required");w=r.replace("_DepartureAirCode","_DepartureTime_Required");""!=$("#selectedCarOption_"+a+"_DepartureAirCode").val()&&($("#"+t).text("*"),$("#"+u).text("*"),$("#"+w).text("*"),$("#"+r).attr("required","true"),$("#"+r).attr("aria-required",
"true"),$("#"+q).attr("required","true"),$("#"+q).attr("aria-required","true"),$("#"+n).attr("required","true"),$("#"+n).attr("aria-required","true"))}v=document.getElementById("noOfProducts").value;for(a=0;a<parseInt(v);a++)if(r=$("#selectedHotelRemark_"+a+"_Required"),q=$("#selectedHotelRemark_"+a),n=document.getElementsByName("selectedHotelOption_"+a),0<n.length)for(t=0;t<n.length;t++)"Accessible Room"==n[t].value&&(n[t].checked?(r.text("*"),q.attr("required","true"),q.attr("aria-required","true")):
(r.text(""),q.removeAttr("required"),q.removeAttr("aria-required")))},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("Special_Requests_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("Special_Requests_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("Special_Requests_Results_Theme_Parks",
"Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("Special_Requests_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("Special_Requests_Results_Activities","Click","Expand")},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+a.attr("id")+'_error" data-test="errorLabel'+
a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_validateSpecialRequests:function(){this.isFirstFormFieldFocusActive=!1;var a=!0,b=this.module.TranslationTexts,d=$("#numberOfCars").val();if(""==$(".selectedFlightItemClass").data("selectedflightitem"))for(var e=
0;e<parseInt(d);e++){if(""!=$("#selectedCarOption_"+e+"_ArrivalTime").val()){var f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);var g=$("#selectedCarOption_"+e+"_ArrivalAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),
a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),a=!1)}else{f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);g=$("#selectedCarOption_"+e+"_ArrivalAirCode");var h=$("#selectedCarOption_"+e+"_ArrivalTime");this._removeError(g);this._removeError(h);""!=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&
(this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1);""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()&&(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),a=!1));if(""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()||""!=
$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val())if(""==h.val()||0<h.length&&!h.val().match(AIRPORT_TRANSFER_REGEX))this._addError(h,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)),a=!1}if(""!=$("#selectedCarOption_"+e+"_DepartureTime").val()){f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber");this._removeError(f);g=$("#selectedCarOption_"+e+"_DepartureAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,
$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),a=!1)}else f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber"),this._removeError(f),g=$("#selectedCarOption_"+e+"_DepartureAirCode"),this._removeError(g),
h=$("#selectedCarOption_"+e+"_DepartureTime"),this._removeError(h),""!=$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&(this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1),""!=$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&
(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),a=!1)),""==$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&""==$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()||""!=h.val()||(this._addError(h,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),a=!1)}for(e=0;2>e;e++)if(d=0==e?"Arrival":"Depart",f=$("#noFlightInfo_"+e),!f.is(":checked")&&0<f.length){$("#arrivalMissing").length&&""!=$("#arrivalMissing").text()&&
(d="Depart");f=$("#selected"+d+"Option_"+e+"_AirlineNumber");this._removeError(f);g=$("#selected"+d+"Option_"+e+"_AirCode");h=$(g).attr("type");this._removeError(g);var k=$("#selected"+d+"Option_"+e+"_TransferTime");this._removeError(k);""==g.val()&&"hidden"!=h&&(this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1);""==f.val()?("Arrival"==d?this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)):this._addError(f,
$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&("Arrival"==d?this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)):this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),a=!1);""==k.val()&&("Arrival"==d?this._addError(k,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)):this._addError(k,
$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),a=!1)}d=document.getElementById("noOfProducts").value;for(e=0;e<parseInt(d);e++)if($("#selectedHotelRemark_"+e+"_Required"),f=$("#selectedHotelRemark_"+e),g=document.getElementsByName("selectedHotelOption_"+e),this._removeError(f),0<g.length)for(h=0;h<g.length;h++)"Accessible Room"==g[h].value&&g[h].checked&&""==$.trim(f.val())&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED)),
a=!1);return a},_SelectedHotelOption:function(a){a=document.getElementById("noOfProducts").value;for(var b=0;b<parseInt(a);b++){var d=$("#selectedHotelRemark_"+b+"_Required"),e=$("#selectedHotelRemark_"+b),f=document.getElementsByName("selectedHotelOption_"+b);if(0<f.length)for(var g=0;g<f.length;g++)"Accessible Room"==f[g].value&&(f[g].checked?(d.text("*"),e.attr("required","true"),e.attr("aria-required","true")):(d.text(""),e.removeAttr("required"),e.removeAttr("aria-required"),this._removeError(e)))}},
_onContinueClick:function(a){if(this._validateSpecialRequests()){a=document.getElementById("noOfProducts").value;for(var b=document.getElementById("FlightIncluded").value,d=[],e=0;e<parseInt(a);e++){var f="",g="",h="",k="",l="",p="",q="",r="",v="",n="",t="",u="",w="",y="false";if(null!=document.getElementById("selectedArrivalOption_"+e+"_AirCode")){if(!b)return!1;h=document.getElementById("selectedArrivalOption_"+e+"_AirCode").value;k=document.getElementById("selectedArrivalOption_"+e+"_Airport").value;
l=document.getElementById("selectedArrivalOption_"+e+"_AirlineNumber").value;p=document.getElementById("selectedArrivalOption_"+e+"_TransferDate").value;q=document.getElementById("selectedArrivalOption_"+e+"_TransferTime").value;null!=document.getElementById("noFlightInfo_"+e)&&document.getElementById("noFlightInfo_"+e).checked&&(y="true")}if(null!=document.getElementById("selectedDepartOption_"+e+"_AirCode")){if(!b)return!1;r=document.getElementById("selectedDepartOption_"+e+"_AirCode").value;v=
document.getElementById("selectedDepartOption_"+e+"_Airport").value;n=document.getElementById("selectedDepartOption_"+e+"_AirlineNumber").value;t=document.getElementById("selectedDepartOption_"+e+"_TransferDate").value;u=document.getElementById("selectedDepartOption_"+e+"_TransferTime").value;null!=document.getElementById("noFlightInfo_"+e)&&document.getElementById("noFlightInfo_"+e).checked&&(y="true")}var z=document.getElementsByName("selectedHotelOption_"+e);if(0<z.length)for(var x=0;x<z.length;x++)z[x].checked&&
(f=""==f?z[x].value:f+", "+z[x].value);null!=document.getElementById("selectedHotelRemark_"+e)&&(g=document.getElementById("selectedHotelRemark_"+e).value,g=g.trim().match(HOTEL_REMARKS_REGEX),g=null!=g?g.join(""):"");z=document.getElementsByName("selectedCarOption_"+e);if(0<z.length)for(x=0;x<z.length;x++)z[x].checked&&(w=""==w?z[x].value:w+", "+z[x].value);null!=document.getElementById("selectedCarOption_"+e+"_ArrivalAirCode")&&(h=document.getElementById("selectedCarOption_"+e+"_ArrivalAirCode").value,
k=document.getElementById("selectedCarOption_"+e+"_ArrivalAirport").value,l=document.getElementById("selectedCarOption_"+e+"_ArrivalAirlineNumber").value,p=document.getElementById("selectedCarOption_"+e+"_ArrivalTransferDate").value,q=document.getElementById("selectedCarOption_"+e+"_ArrivalTime").value);null!=document.getElementById("selectedCarOption_"+e+"_DepartureAirCode")&&(r=document.getElementById("selectedCarOption_"+e+"_DepartureAirCode").value,v=document.getElementById("selectedCarOption_"+
e+"_DepartureAirport").value,n=document.getElementById("selectedCarOption_"+e+"_DepartureAirlineNumber").value,t=document.getElementById("selectedCarOption_"+e+"_DepartureTransferDate").value,u=document.getElementById("selectedCarOption_"+e+"_DepartureTime").value);f={selectedHotelOption:f,selectedOptionHotelRemark:escape(g),selectedArrivalOptionAirCode:h,selectedArrivalOptionAirport:k,selectedArrivalOptionAirlineNumber:l,selectedArrivalOptionTransferDate:p,selectedArrivalOptionTransferTime:q,noFlightInfo:y,
selectedDepartOptionAirCode:r,selectedDepartOptionAirport:v,selectedDepartOptionAirlineNumber:n,selectedDepartOptionTransferDate:t,selectedDepartOptionTransferTime:u,selectedCarOption:w,selectedCarOptionArrivalAirCode:h,selectedCarOptionArrivalAirlineNumber:l,selectedCarOptionArrivalAirport:k,selectedCarOptionArrivalTransferDate:p,selectedCarOptionArrivalTransferTime:q,selectedCarOptionDepartureAirCode:r,selectedCarOptionDepartureAirlineNumber:n,selectedCarOptionDepartureAirport:v,selectedCarOptionDepartureTransferDate:t,
selectedCarOptionDepartureTransferTime:u};d.push(f)}var B=this.module.TranslationTexts;a=JSON.stringify({SPECIAL_REQUEST_DETAILS:d});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageSpecialRequests.act","vpsr=LOAD_CREATE_SPECIAL_REQUESTS&specialRequestInfo="+a,null,null,function(){if(this.message){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();$namespace.MessageUtil.showMessage({type:1,
text:"en_ca"==a||"fr_ca"==a?B.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA:B.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE,title:B.SPECIAL_REQUESTS_ERROR_COMMON})}else $namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_PAYMENT_OPTIONS,["true"])},null)}},_showCancellationPolicyModal:function(){var a=$("#packageId").val(),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("Special_Requests_Cancellation_Policy_Schedule","Click",a)},_changeArrivalAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_ArrivalAirCode",
"_ArrivalAirlineNumber"),e=a.replace("_ArrivalAirCode","_ArrivalTime"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber_Required"),k=a.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),l=a.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=b||""!=f||""!=g?($("#"+k).text("*"),$("#"+h).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),
$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true")):($("#"+k).text(""),$("#"+h).text(""),$("#"+l).text(""));h=$("#"+a);k=$("#"+d);l=$("#"+e);""==b&&""==f&&""==g?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required")):""!=b?this._removeError(h):""!=f&&this._removeError(k);
""!=g&&this._removeError(l)},_changeArrivalTime:function(a){var b=a.target.id;a=$("#"+b).val();var d=b.replace("_ArrivalTime","_ArrivalAirlineNumber"),e=b.replace("_ArrivalTime","_ArrivalAirCode"),f=$("#"+d).val(),g=$("#"+e).val(),h=b.replace("_ArrivalTime","_ArrivalAirlineNumber_Required"),k=b.replace("_ArrivalTime","_ArrivalAirCode_Required"),l=b.replace("_ArrivalTime","_ArrivalTime_Required");""!=a||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+e).attr("required",
"true"),$("#"+e).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+e);k=$("#"+d);b=$("#"+b);""==g&&""==f&&""==a?(this._removeError(h),this._removeError(b),this._removeError(k),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required")):
""!=g&&""==f&&""==a?this._removeError(h):""!=f&&this._removeError(k);""!=a&&this._removeError(b)},_changeArrivalAirlineNumber:function(a){var b=a.target.id,d=$("#"+b).val(),e=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode"),f=$("#"+e).val(),g=b.replace("_ArrivalAirlineNumber","_ArrivalTime"),h=$("#"+g).val(),k=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode_Required"),l=b.replace("_ArrivalAirlineNumber","_ArrivalAirlineNumber_Required"),p=b.replace("_ArrivalAirlineNumber","_ArrivalTime_Required");
""!=d||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+b);l=$("#"+e);g=$("#"+g);""==f&&""==d&&""==h?(this._removeError(l),this._removeError(k),this._removeError(g),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+
b).removeAttr("aria-required")):""!=f&&""==d&&this._removeError(l);$namespace.Validation.isBlankOrNull(a)||this._removeError(k);""!=h&&this._removeError(g)},_changeDepartureAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureAirCode","_DepartureAirlineNumber"),e=$("#"+d).val(),f=a.replace("_DepartureAirCode","_DepartureTime"),g=$("#"+f).val(),h=a.replace("_DepartureAirCode","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureAirCode","_DepartureAirCode_Required"),
l=a.replace("_DepartureAirCode","_DepartureTime_Required");""!=b||""!=e||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+f).attr("required","true"),$("#"+f).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+a);d=$("#"+d);k=$("#"+f);""==b&&""==e&&""==g?(this._removeError(selectedArrivalAirline),
this._removeError(arrivalAirlineNumberId),this._removeError(k),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+f).removeAttr("required"),$("#"+f).removeAttr("aria-required")):""!=b?this._removeError(h):""!=e&&this._removeError(d);""!=g&&this._removeError(k)},_changeDepartureTime:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureTime","_DepartureAirCode"),e=a.replace("_DepartureTime",
"_DepartureAirlineNumber"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_DepartureTime","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureTime","_DepartureAirCode_Required"),l=a.replace("_DepartureTime","_DepartureTime_Required");""!=b||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required",
"true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+d);k=$("#"+e);l=$("#"+a);""==f&&""==g&&""==b?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required")):""!=f?this._removeError(h):""!=g&&this._removeError(k);""!=b&&this._removeError($("#"+a))},_changeDepartureAirlineNumber:function(a){var b=
a.target.id,d=b.replace("_DepartureAirlineNumber","_DepartureAirCode"),e=$("#"+b).val(),f=$("#"+d).val(),g=b.replace("_DepartureAirlineNumber","_DepartureTime"),h=$("#"+g).val(),k=b.replace("_DepartureAirlineNumber","_DepartureAirCode_Required"),l=b.replace("_DepartureAirlineNumber","_DepartureAirlineNumber_Required"),p=b.replace("_DepartureAirlineNumber","_DepartureTime_Required");""!=e||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+d).attr("required","true"),$("#"+
d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+d);l=$("#"+b);p=$("#"+g);""==f&&""==e&&""==h?(this._removeError(k),this._removeError(l),this._removeError(p),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),
$("#"+g).removeAttr("aria-required")):""!=f&&""==e&&this._removeError(k);$namespace.Validation.isBlankOrNull(a)||this._removeError(l);""!=h&&this._removeError(p)},_changeArrivalTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||
this._removeError(b)},_changeDepartureTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_SelectedHotelRemarks:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||
this._removeError(b)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};var flightSeatMap=$namespace.FlightSeatMap||{};$namespace.View=$namespace.View||{};breakpoint=utils.Breakpoint;isFirstFormFieldFocusActive=!1;var translationTexts;
$namespace.View.FlightSeatSelectionView=Backbone.View.extend({el:"#packageFlightSeatSelection",ui:{chatLink:null,currentPassenger:null,initSeatMap:!0,selectedNopreference:!1,flightPassengerSeatInfo:null,isPageLoad:!1,isConfirmationCancelled:!1},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="go_back"]':"_onBackPreviousFlightClick",'click [data-hook="continue_button"]':"_onContinueClick",'click a[data-hook="edit_Flight_Link"]':"_onEditFlightLinkClick",
'click a[data-hook="edit_Hotel_Link"]':"_onEditHotelLinkClick",'click a[data-hook="go_to_theme_park"]':"_onEditThemeParkLinkClick",'click a[data-hook="go_to_transportation"]':"_onEditTransportationClick",'click a[data-hook="go_to_activities"]':"_onEditActivitiesClick",'change [id^="selectFlight"]':"_onSelectFlightSegmentClick","click a#previousFlight":"_onPreviousFlight","click a#nextFlight":"_onNextFlight",'click a[data-hook="passenger"]':"_onPassengerClick",'click [name="selectSeatPreference"]':"_onSelectSeatPreferenceRadio",
"click div.accordion-item":"_onAccordionClick"},seatBoxesScene:null,smController:null,eventTrigger:!1,initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.ui.isPageLoad=!0;this.ui.isConfirmationCancelled=!1;this.ui.flightPassengerSeatInfo=JSON.parse(a.passengerInfoJSON).flightPassengerSeatInfo;this.ui.continueButtonText=$("#continueButton").text();"true"==a.seatsPreferred?($("#select-specific-seats").prop("checked",!0),$("#select-no-preferences").prop("checked",
!1)):($("#select-specific-seats").prop("checked",!1),$("#select-no-preferences").prop("checked",!0));this._onSelectSeatPreferenceRadio("init");if(0<this.ui.flightPassengerSeatInfo.length)for(var b=0;b<this.ui.flightPassengerSeatInfo.length;b++)flightSeatMap.setSeatNumber(this.ui.flightPassengerSeatInfo[b].flightSegmentItemUid,this.ui.flightPassengerSeatInfo[b].passengerIndex,this.ui.flightPassengerSeatInfo[b].seatNumber);translationTexts=this.module.TranslationTexts;a.gaParams&&(a=JSON.parse(a.gaParams),
2<a.length&&(destination=a[0],city=a[1],packageId=a[2],$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/viewFlightSeatSelection/"+destination+"/"+city+"/"+packageId),$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+"|flight seat selection",v2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),v34:destination,v74:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewFlightSeatSelection/"+
destination+"/"+city+"/"+packageId})));$.each($('div[id^="select_flight-"]'),function(a,b){new widgets.SelectWidget($(b))});this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?b.accordion.open(!0):b.accordion.close(!0)});this.currentPassenger=$(".seat-input-box").first();this.currentPassenger.addClass("active");
this.smController=new ScrollMagic.Controller;this._onSelectFlightSegmentClick(event);$(window).on("resize orientationchange",$.proxy(this._onWindowResize,this));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewFlightSeatSelection/"+destination+"/"+city+"/"+packageId)})},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Theme_Parks",
"Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Activities","Click","Expand")},_onEditFlightLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_FLIGHT_HOTEL)},_onEditHotelLinkClick:function(a){$("#editFlightLink").length?
$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL_WITH_FLIGHT):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_SINGLE_CITY_HOTEL)},_onEditThemeParkLinkClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_THEME_PARKS)},_onEditTransportationClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},
_onEditActivitiesClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES)},getActiveSegmentContainer:function(){var a=$("#flight-details-megatip"),b=a.find('select[id^="selectFlight"]').find("option:selected").val();return a.find('div#flightSeatMapTabPanels div[data-pane="'+b+'"]')},_onPassengerClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=this.getActiveSegmentContainer();b.find("a.seat-input-box.active").removeClass("active");
this.currentPassenger=a;this.currentPassenger.hasClass("Infant")||(this.currentPassenger.addClass("active"),b.find(".seat-button.available").not(".selected").first().focus())},_showCancellationPolicyModal:function(){$namespace.Analytics.trackEvent("Flight_Seat_Selection_Cancellation_Policy_Schedule","Click",packageId);var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_swapBackToPreviousFlight:function(a){a?$("#backButton").data("state","previous flight"):$("#backButton").data("state","default")},_onBackPreviousFlightClick:function(a){a.preventDefault();this._onPreviousFlight(a);
this._setPassengerFocusOnMobileView()},_onContinueClick:function(a){a.preventDefault();var b=this,d=-1,e=$(a.currentTarget);if("true"==$(e).data("continue-next-page")){var f=function(){var a=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);a===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_VACATION_PACKAGE?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection","Click","Continue"):a===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?
$namespace.Analytics.trackEvent("dp/hf_Flight_Seat_Selection","Click","Continue"):a===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR&&$namespace.Analytics.trackEvent("dp/hfc_Flight_Seat_Selection","Click","Continue");a="chooseSpecificSeats"==$("input[name='selectSeatPreference']:checked").val()?!0:!1;var b="vpfss=ASSIGN_SEAT_MAP_SELECTION&seatsPreferred="+a;0==a&&$("input[type='text']").val("");var d=[],e=0,f;for(f in flightSeatMap.getFlightSeatMap()){var g=f.split("_");
if(2==g.length){var v=a?flightSeatMap.getSeatNumber(g[0],g[1]):"";g[0]&&(d[e++]=new flightSeatMap.passengerSeatInfo(g[0],g[1],v))}}b+="&flightSeatSelectionMapDetail="+JSON.stringify({flightPassengerSeatInfo:d});$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageFlightSeatSelection.act",b,null,null,function(a){a&&$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,["true"])},null)};if(this.ui.selectedNopreference)f();else{var g="";e=$(".flightsegement");
$(e).each(function(a,b){a=$(b).data("uid");var e=$(b).data("flight-index");b=$(b).data("seat-available");var f=$(".passengeronseat[data-flight-index='"+e+"']").length,h=0,k=flightSeatMap.getFlightSeatMap(),v;for(v in k){var n=v.split("_");2==n.length&&n[0]==a&&k[v]&&h++}1==b&&h!=f&&(g=0==g.length?e:g+","+e,d=-1==d?e-1:d)});g?(e="vpfss=LOAD_UNASSIGNED_FLIGHT_ACKNOWLEDGEMENT&unassignedFlightSegments="+g,$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageFlightSeatSelection.act",
e,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var e=new $namespace.Widgets.Modal(this.responseText,function(){g&&g.off("click")});var g=$("#acknowledgement-understand-btn");g.on("click",function(a){e.hide();f()});$("#close-bottom-btn, #close-top-btn").click(function(){$("#selectFlight>option:eq("+d+")").prop("selected",!0);b.ui.isConfirmationCancelled=!0;b._onSelectFlightSegmentClick(a)});e.show();$(".modal-close").focus()},null)):f()}}else this._onNextFlight(a);this._setPassengerFocusOnMobileView()},
_setPreviousAndNextButtonVisibility:function(a){var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option:selected"),f=d.find("option");a=e.data("uid");var g=e.index();e.val();e=this.module.TranslationTexts;0==g?(b.find(".previousFlight").addClass("hide"),b.find(".nextFlight").removeClass("hide"),$("#continueButton").data("continue-next-page","false"),$("#continueButton").text(e.CONTINUE_TO_NEXT_FLIGHT),this.ui.selectedNopreference&&this.ui.isPageLoad&&($("#continueButton").data("continue-next-page",
"true"),$("#continueButton").text(this.ui.continueButtonText))):0<g&&g<f.length-1?(b.find(".previousFlight").removeClass("hide"),b.find(".nextFlight").removeClass("hide"),$("#continueButton").data("continue-next-page","false"),$("#continueButton").text(e.CONTINUE_TO_NEXT_FLIGHT)):g==f.length-1&&(b.find(".previousFlight").removeClass("hide"),b.find(".nextFlight").addClass("hide"),$("#continueButton").data("continue-next-page","true"),$("#continueButton").text(this.ui.continueButtonText));this._swapBackToPreviousFlight(g);
$namespace.TabOrder.updatePageTabOrder();b.find(".previousFlight").removeAttr("style");b.find(".nextFlight").removeAttr("style");this.eventTrigger&&((f=breakpoint.isDesktop())?$(window).scrollTop(b.offset().top-20):$(window).scrollTop(d.offset().top-200));this.ui.isPageLoad&&((f=breakpoint.isDesktop())?b.find("div.flight-module-title > h3").blur():d.blur(),$("#packageFlightSeatSelection").attr("tabindex","-1").focus(),$("#packageFlightSeatSelection").addClass("no-outline"));this.ui.isPageLoad=!1;
b=this.getActiveSegmentContainer();if(0<this.ui.flightPassengerSeatInfo.length)for(d=0;d<this.ui.flightPassengerSeatInfo.length;d++)g=this.ui.flightPassengerSeatInfo[d].passengerIndex,f=this.ui.flightPassengerSeatInfo[d].seatNumber,this.ui.flightPassengerSeatInfo[d].flightSegmentItemUid==a&&""!=f&&(g=b.find('a.seat-input-box input[data-user-id="'+g+'"]'),e=g.closest("a.seat-input-box"),e.addClass("has-value"),g.val(f),e.attr("aria-label",e.data("passenger-info")+" "+translationTexts.TEXT_SEAT_NUMBER+
" "+f),f=b.find("a.seat-input-box").not(".has-value"),b.find("a.seat-input-box").removeClass("active"),0<f.length?f.first().addClass("active"):b.find("a.seat-input-box").first().addClass("active")),d==this.ui.flightPassengerSeatInfo.length-1&&this._resetSeatMapScrollLock(b);else this._resetSeatMapScrollLock(b);this._setPassengerFocusOnMobileView()},_resetSeatMapScrollLock:function(a){this.ui.initSeatMap?(this.initSeatMap(),this.ui.initSeatMap=!1):(this.initScrollLock(),0<a.find("a.seat-input-box").not(".has-value").length?
(a.find("a.seat-input-box").removeClass("active"),a.find("a.seat-input-box").not(".has-value").first().addClass("active")):a.find("a.seat-input-box").removeClass("active").first().addClass("active"),this.ui.isConfirmationCancelled&&setTimeout(function(){a.find("a.seat-input-box.active").focus()},300),this.ui.isConfirmationCancelled=!1)},seatSelectionMapCallBack:function(){var a=$("#flight-details-megatip");a=a.find('select[id^="selectFlight"]');this.ui.isPageLoad&&a.val(a.find("option").first().val());
this._setPreviousAndNextButtonVisibility();this._populateSeatPassengerInfoFromJSON();$("#flight-details-megatip").attr("data-uid");a=$("#flight-details-megatip");a=a.find('select[id^="selectFlight"]');a="#flightInfoMobile"+a.find("option:selected").data("flight-index");$(a).data("has-error")||($(a).data("has-error","readAlready"),flightSeatMap.hasError()&&$(a).removeClass("displayNone"))},_onSelectFlightSegmentClick:function(a){a=$("#flight-details-megatip").attr("data-uid");var b=$("#flight-details-megatip");
b.find(".previousFlight").addClass("hide");b.find(".nextFlight").addClass("hide");b.find("a.flight-segment-next-previous").removeAttr("data-tab-initialized");var d=b.find('select[id^="selectFlight"]');this.ui.isPageLoad&&d.val(d.find("option").first().val());d=d.find("option:selected");var e=d.index(),f=d.val();d.text();$(".loading_blocker_status_div").text($("#flightDropdownChangeText"+(e+1)).text());b.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').siblings().removeClass("active").addClass("hide");
b.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').addClass("active").removeClass("hide");b.find("div#flightSeatMapTabPanels div.panel.active .flightSeatMapContent table.fuselage").length?(flightSeatMap.CurrentSeatMap.updateLegend(),this.seatSelectionMapCallBack()):(this.ui.initSeatMap=!0,d="#"+f+" .flightSeatMapContent",e=b.find('select[id^="selectFlight"]').find(":selected").data("uid"),a={dataUrl:"packageFlightSeatSelection.act?vpfss=LOAD_SEAT_MAP_DISPLAY_JSON&uid="+a+"&bookingFlightSegmentItemUid="+
e,parentElement:$(d),megatip:b,flightSegmentItemUid:e,selectable:!1,flightItemUid:a},$namespace.EnhancedSeatMapUtil.addCallback("seatSelectionMap",$.proxy(this.seatSelectionMapCallBack,this)),flightSeatMap.loadCurrentSeatMap(a))},_onPreviousFlight:function(a){$("#flight-details-megatip").attr("data-uid");var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option:selected").index();0<e&&(this.eventTrigger=!0,e="flight-"+e+"-tab",d.val(e),d.find('option[value="'+e+'"]').attr("selected",
!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));b.find("div.flight-module-title > h3").attr("tabindex","-1").focus()},_onNextFlight:function(a){$("#flight-details-megatip").attr("data-uid");var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option"),f=d.find("option:selected").index();f<e.length-1&&(this.eventTrigger=!0,e="flight-"+(f+2)+"-tab",d.val(e),d.find('option[value="'+e+'"]').attr("selected",!0).siblings().removeAttr("selected"),
this._onSelectFlightSegmentClick(a));b.find("div.flight-module-title > h3").attr("tabindex","-1").focus();utils.Breakpoint.isMobile()&&$("[id^='seatTravelerList'] a").first().focus()},_onSelectSeatClick:function(a){var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=b.find('div#flightSeatMapTabPanels div[data-pane="'+d.find("option:selected").val()+'"]');a=$(a.currentTarget);this.$activeInput=e.find('a.seat-input-box.active input[type="text"]');0==this.$activeInput.length&&
(this.$activeInput=e.find('a.seat-input-box input[type="text"]').last(),this.$activeInput.closest(".seat-input-box").addClass("active"));var f=a.data("seatId"),g=this.$activeInput.data("userId");var h=a.hasClass("seat-button")?a:a.closest(".flight-seatmap--grid-cell").find(".seat-button");h.find(".selected-indicator").remove();a=$("#selectFlight").find(":selected").data("uid");void 0!==h.data("user-id")&&flightSeatMap.setSeatNumber(a,h.data("user-id"),"");h.removeData("userId");e.find(".seat-button.available.selected").each(function(a){a=
$(this);a.attr("data-user-id")==g&&(a.removeAttr("data-user-id"),a.removeData("userId"),a.removeClass("selected"),a.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+a.data("seat-id")+" - "+translationTexts.TEXT_AVAILABLE),a.find(".selected-indicator").remove())});h.attr({"data-user-id":g}).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+(g+1)+"</span>");e.find('a.seat-input-box input[type="text"]').each(function(a){a=$(this);var b=a.closest(".seat-input-box");
a.val()==f&&(a.val(""),b.removeClass("has-value"),b.attr("aria-label",b.data("passenger-info")))});this.$activeInput.val(f);h.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+f+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(g+1));$(".loading_blocker_status_div").text(translationTexts.TEXT_SEAT+" "+f+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(g+1));flightSeatMap.setSeatNumber(a,g,f);var k;a=this.$activeInput.closest(".seat-input-box");a.attr("aria-label",a.data("passenger-info")+
" "+translationTexts.TEXT_SEAT_NUMBER+" "+f);this.$activeInput.val().length?(a.addClass("has-value"),a.removeClass("active"),setTimeout(function(){k=e.find("a.seat-input-box").not(".has-value");0<k.length?k.first().addClass("active").focus():h.focus()}.bind(this),10)):a.removeClass("has-value")},initSeatMap:function(){var a=this.getActiveSegmentContainer();0==a.find("a.seat-input-box.active").length&&a.find("a.seat-input-box").first().addClass("active");this.ui.isConfirmationCancelled&&setTimeout(function(){a.find("a.seat-input-box.active").focus()},
300);this.ui.isConfirmationCancelled=!1;a.find(".seat-button.available").each(function(a){a=$(this);a.removeAttr("disabled");a.attr("data-taborder","document");a.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+a.data("seat-id")+" - "+translationTexts.TEXT_AVAILABLE)});a.find(".lavatory").attr("role","img");a.find(".lavatory").attr("aria-label",translationTexts.TEXT_LAVATORY_ICON);a.find(".galley").attr("role","img");a.find(".galley").attr("aria-label",translationTexts.TEXT_GALLEY_ICON);
a.find(".closet").attr("role","img");a.find(".closet").attr("aria-label",translationTexts.TEXT_CLOSET_ICON);a.on("click",".seat-button.available",this._onSelectSeatClick);$namespace.TabOrder.updatePageTabOrder();this.initScrollLock()},_onWindowResize:function(a){a=this.getActiveSegmentContainer();a.find("#seatInputsScrolllockTrigger"+a.data("segment")).empty();var b=-1*$('[data-hook="sticky-bar"]').outerHeight(),d=a.find(".flight-seatmap-container").outerHeight(),e=a.find(".seat-inputs-outer-container").outerHeight();
d-=e;this.seatBoxesScene&&this.seatBoxesScene.removePin(!0);e=$(a).data("segment")-1;$($(".seat-inputs-outer-container")[e]).height()<$($(".flight-seatmap-container")[e]).height()&&(this.seatBoxesScene=new ScrollMagic.Scene({triggerElement:"#seatInputsScrolllockTrigger"+a.data("segment"),triggerHook:"onLeave",offset:b,duration:d}),this.seatBoxesScene.setPin("#seatInputsOuterContainer"+a.data("segment"),{pushFollowers:!1}).addTo(this.smController));$namespace.TabOrder.updatePageTabOrder()},initScrollLock:function(){this._onWindowResize();
$(window).on("load resize orientationchange",$.proxy(function(a){setTimeout($.proxy(this._onWindowResize,this),50)},this));$(window).trigger("resize")},_onSelectSeatPreferenceRadio:function(a){var b=this.module.TranslationTexts;if("noPreference"==$("input[name='selectSeatPreference']:checked").val())this.ui.selectedNopreference=!0,$("div[data-panel='specific-seats-tab']").addClass("hide"),$("#flight-details-megatip").addClass("hide"),$("#continueButton").data("continue-next-page","true"),$("a[data-hook='continue_button']").text(this.ui.continueButtonText),
this._swapBackToPreviousFlight(0);else{this.ui.selectedNopreference=!1;$("div[data-panel='specific-seats-tab']").removeClass("hide");"init"!=a&&this.initScrollLock();a=$("#flight-details-megatip");var d=a.find('select[id^="selectFlight"]'),e=d.find("option:selected");d=d.find("option");var f=e.index();e.val();f!=d.length-1&&($("#continueButton").data("continue-next-page","false"),$("a[data-hook='continue_button']").text(b.CONTINUE_TO_NEXT_FLIGHT));this._swapBackToPreviousFlight(f);a.removeClass("hide")}},
_populateSeatPassengerInfoFromJSON:function(){if(0<this.ui.flightPassengerSeatInfo.length)for(var a=$("#flight-details-megatip").find('select[id^="selectFlight"]').find("option:selected").data("uid"),b=0;b<this.ui.flightPassengerSeatInfo.length;b++){var d=this.ui.flightPassengerSeatInfo[b].passengerIndex,e=this.ui.flightPassengerSeatInfo[b].seatNumber,f=this.ui.flightPassengerSeatInfo[b].flightSegmentItemUid;f==a&&(f=$("div[data-segment-id='"+f+"']").find("button[data-seat-id='"+e+"']"),f.attr({"data-user-id":d}).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+
(d+1)+"</span>"),f.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+e+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(d+1)),this.ui.flightPassengerSeatInfo[b].flightSegmentItemUid="")}},_onAccordionClick:function(a){a.preventDefault();var b=$(a.currentTarget);b.parent().hasClass("filter-accordion")&&($namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){b.find(".accordion-button").focus()},500))},_setPassengerFocusOnMobileView:function(){if(utils.Breakpoint.isMobile()){var a=
$("#flightSeatMapTabPanels");setTimeout(function(){a.find("div.active").find("div.seat-inputs-inner-container a").first().focus()},300)}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.themeParkSpecialtyView=Backbone.View.extend({el:"#themeParkSpecialityHome",initialize:function(a){a=$.extend({},a);this.controller=a.controller;this.module=a.module;a=window.location.href.toLowerCase();if(/\/Specialty/i.test(a)||/\/Experiences/i.test(a))$(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=$("div.themeParkSpeciality div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.themeParkSpeciality div.landingPageContent div.hero-secondary").attr("data-image-url"):
"",d=$("#pinterestImageUrl");d=d&&d.val()&&"/"!=d.val()?window.location.origin+d.val():a;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal","Theme-Park",a,d)}}),window.setTimeout(function(){var a=$(".themeParkSpeciality").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.cruiseFlightPageView=Backbone.View.extend({el:"#cruise-flight-page",events:{'click [data-hook="continue_button"]':"_onContinueClick"},initialize:function(a){a=$.extend({},a);this.controller=a.controller;this.module=a.module;this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion)},_onContinueClick:function(a){this.module.packageFlightsView.OnContinueClick(a,"cruiseFlightPageView")},
trackEventAccordion:function(a,b){$("body").removeClass("scroll-lock");b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Flights_Cruise_Summary","Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Flights_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Flights_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Flights_Results_Flights_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Flights_Results_Hotel_Summary","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Flights_Results_Transportation_Summary","Click","Expand")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseCabinResultsView=Backbone.View.extend({el:"#cruise-cabin-results-page",events:{'click [data-hook="goBackBtn"]':"_onBackLink",'click [name="stateroom_tab"]':"_onStateroomTabClick",'click [data-hook="previous_stateroom_btn"]':"_previousStateroomClick",'click [data-hook="continue_stateroomLocation_btn"]':"_continueButtonClick"},initialize:function(a){this.isFinalTab=!1;this.selectedStateroomTab=parseInt(this.$el.attr("data-stateroom-index"));this.module=$.extend({},a).module;this.translations=
this.module.TranslationTexts;this.maxStateroom=this.$el.data("max-stateroom");this.superBooking=this.$el.data("super-booking");this.loggedInUser=this.$el.data("valid-login");this.continueButtonState=null;$("#prev_stateroom").hide();1==this.maxStateroom?(this.isFinalTab=!0,this.superBooking?($.hook("continue_stateroomLocation_btn").text(this.translations.CONTINUE_TO_ADDONS_TEXT),this.continueButtonState="addons"):this.loggedInUser?($.hook("continue_stateroomLocation_btn").text(this.translations.CONTINUE_TO_TRAVELERS_TEXT),
this.continueButtonState="travelers"):($.hook("continue_stateroomLocation_btn").text(this.translations.CONTINUE_TO_LOGIN_TEXT),this.continueButtonState="login")):1<this.maxStateroom&&this.updateTabButtons();$(".accordion-item").removeClass("accordion-item-current");$(".cruiseTravelerStateroomAccordion").addClass("accordion-item-current");a=$("a#chatNowLink");if(1==a.length)a.on(window.ChatApi.chatLinkClickEvent,$.proxy(this.onChatLinkClick,this));$(window).on("orientationchange",function(){$namespace.ImageUtil.reloadMissingImages($("#stateroomLocationDetails"));
$namespace.ImageUtil.reloadMissingImages($("#imgStateroomLocationDetails"))});this.trackPageAnalytics();this.guaranteedOnlyStates={};for(a=1;a<=this.maxStateroom;a++)this.guaranteedOnlyStates["tab"+a]=!1;a=$("#cruise-cabin-results-guaranteed");1==a.length&&"true"===a.attr("data-guaranteedCabinAvailable")&&this.module.currentTabContentView&&this.module.currentTabContentView.guaranteedOnlyAnalytics(this);$namespace.Storage.remove($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_SELECTION_FILTER_STATE)},
getGuaranteedGATrackingState:function(a){return!!this.guaranteedOnlyStates["tab"+a]},setGuaranteedGATrackingState:function(a){this.guaranteedOnlyStates["tab"+a]=!0},getPageAnalyticsInfo:function(a){var b={},d=this.$el.attr("data-destination"),e=$("#cruise-cabin-results-page-json-data").text().trim(),f;e&&(f=JSON.parse(e));e="bookingWidget";"true"===f[6]&&(e="OfferPage");a||(a="stateroom_location");a="/cr/booking/"+e+"/"+a+"/"+d;d="";f&&(d=f[0],a=a+"/"+d+"/"+f[1]+"/"+f[2]);b.trackingText=a;b.cruiseLineName=
d;return b},trackPageAnalytics:function(){var a=this.getPageAnalyticsInfo();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:"Stateroom Location - Cruises | Costco Travel",v2:"Cruise",v74:a.trackingText});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a.trackingText})},onChatLinkClick:function(a){this.module.currentTabContentView&&this.module.currentTabContentView.chatLinkAnalytics(a)},_onBackLink:function(a){a=this.module.currentTabContentView.backButtonHandler;
var b=!1;a&&(b=a.call(this.module.currentTabContentView));b||(1==this.selectedStateroomTab?window.history.back():this._previousStateroomClick())},_onStateroomTabClick:function(a){a=$(a.currentTarget).data("stateroom-index");this.selectedStateroomTab>a?(this.selectedStateroomTab=a,this.switchTabs()):$("#max-people-warning").length?$("#max-people-warning").focus():this.selectedStateroomTab!=a&&this.module.currentTabContentView._validateStateroom(null)&&(this.selectedStateroomTab=a,this.switchTabs())},
updateTabButtons:function(){var a=$namespace.TranslationUtil.replaceParameters(this.translations.STATEROOM_TAB_SELECTED_TEXT,{tabNumber:this.selectedStateroomTab});$("a#stateroom_tab_"+this.selectedStateroomTab).addClass("active").attr("aria-selected","true").attr("aria-label",a);a=$("#prev_stateroom");1==this.selectedStateroomTab?a.hide():a.show();a=$.hook("continue_stateroomLocation_btn");this.maxStateroom==this.selectedStateroomTab?(this.isFinalTab=!0,this.superBooking?(a.text(this.translations.CONTINUE_TO_ADDONS_TEXT),
this.continueButtonState="addons"):this.loggedInUser?(a.text(this.translations.CONTINUE_TO_TRAVELERS_TEXT),this.continueButtonState="travelers"):(a.text(this.translations.CONTINUE_TO_LOGIN_TEXT),this.continueButtonState="login")):(this.isFinalTab=!1,a.text(this.translations.CONTINUE_TO_STATEROOM_TEXT));for(a=1;a<=this.maxStateroom;a++)if(a!=this.selectedStateroomTab){var b=$namespace.TranslationUtil.replaceParameters(this.translations.STATEROOM_TAB_NOT_SELECTED_TEXT,{tabNumber:a});$("a#stateroom_tab_"+
a).removeClass("active").attr("aria-selected","false").attr("aria-label",b)}},switchTabs:function(a){this.updateTabButtons();this.module.currentTabContentView.submitAndContinue(this.selectedStateroomTab,null,a)},getCruisePackageId:function(){var a=this.$el.attr("data-destination"),b=$("#cruise-cabin-results-page-json-data").text().trim(),d;b&&(d=JSON.parse(b));d&&(a=a+"/"+d[0]+"/"+d[1]+"/"+d[2]);return a},_previousStateroomClick:function(a){--this.selectedStateroomTab;this.switchTabs()},loadNextPage:function(a){var b=
"crrb=LOAD_NEXT_PAGE_SESSION_SWITCH",d=this;"login"==d.continueButtonState||"travelers"==d.continueButtonState?b+="&nextPage=LOAD_TRAVELERS_PAGE":"addons"==d.continueButtonState&&(b+="&nextPage=LOAD_ADDONS_PAGE");$namespace.DomUtil.setElementLoadingMask(!0,!0,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseRepriceBooking.act",b,null,null,function(){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(!a&&d.module.currentTabContentView.trackingContinueButton&&
d.module.currentTabContentView.trackingContinueButton(),this.responseText){$("#cruise-cabin-results-page-reallocate-data").text();$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b;if(-1<this.responseText.indexOf("acknowledgementCabiinPricePopUp")){"login"==d.continueButtonState||"travelers"==d.continueButtonState?b="_continueToTravelers":"addons"==d.continueButtonState&&(b="_continueToAddons");b=new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(d,b),$.proxy(d,"reAllocateCabin"));
document.body.style.overflow="hidden";d.$el.append("<div class='trackPriceChangeAlertTempDiv'>"+this.responseText+"</div>");var f=d.$el.find(".modal_price_change");d.$el.find(".trackPriceChangeAlertTempDiv").remove();f.each(function(a,b){b=$(b);a=b.attr("data-pricechange");b=b.attr("data-stateroom-number");$namespace.Analytics.trackEvent("CR_Stateroom_Location_Price_Change","Price_"+a+"_Stateroom_"+b,"/"+d.getCruisePackageId())})}else b=new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(d,
"reAllocateCabin")),document.body.style.overflow="hidden",$namespace.Analytics.trackEvent("Error/Cr/Stateroom_Location","Stateroom_not_available","/"+d.getCruisePackageId());b.show();$("#cruiseAcknowlegementContentDiv").focus()}else d.bestValueAnalytics(),"login"==d.continueButtonState||"travelers"==d.continueButtonState?d._continueToTravelers():"addons"==d.continueButtonState&&d._continueToAddons()},null)},bestValueAnalytics:function(){var a,b=[];for(a=1;a<=this.maxStateroom;a++){var d="Stateroom"+
a+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_PRICE_KEY,e="Stateroom"+a+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_PRICE_CHANGED_KEY,f=$namespace.Storage.get($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,d,null);if(null!=f){var g=$namespace.Storage.get($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,e,null);null==g||g==f?b.push(d):g!=$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_GUARANTEED_SELECTION&&b.push(e)}}_.isEmpty(b)||
$namespace.Analytics.trackEvent("CR_Stateroom_Location","Continue",b.join())},reAllocateCabin:function(a){var b=$("#cruise-modal-held-cabin-start").text(),d=""==b?1:b,e=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",$.param({rcsl:"LOAD_CRUISE_CABIN_RESULTS_TAB_CONTENT_SESSION_SWITCH"}),null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(e.selectedStateroomTab=parseInt(d),document.body.style.overflow="scroll",e.switchTabs(a))},
null)},_continueButtonClick:function(a){$("#max-people-warning").length?$("#max-people-warning").focus():this.module.currentTabContentView._validateStateroom(null)&&this._continueToNextItem()},_continueToNextItem:function(a){this.isFinalTab?($namespace.DomUtil.setElementLoadingMask(!0,!0,!1),this.module.currentTabContentView.submitAndContinue(this.selectedStateroomTab,$.proxy(this.loadNextPage,this),a)):(this.selectedStateroomTab+=1,this.switchTabs(a))},_continueToAddons:function(a){var b=this;$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY+
"_1_0");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",$.param({cpao:"CRUISE_PACKAGE_ADDONS_PAGE",fromSelectionPage:"true"}),null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1);this.message?b._showErrorModal(this):(document.body.style.overflow="scroll",$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_POST_SEARCH),$namespace.Application.initializeOnMainContentReload())},null)},_continueToTravelers:function(a){document.body.style.overflow=
"scroll";$namespace.GlobalConstants.RESPONSIVE_CRUISE_TRAVELER_INFORMATION_PAGE_ENABLED?$namespace.Navigation.loadPage(_webLoc+"/h=2501"):$namespace.Navigation.loadPage(_webLoc+"/?h=3&checkMemberInactivity=true&_uid="+(new Date).getTime())},_showErrorModal:function(a){var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseCabinResultsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},
null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseCabinResultsTabContentView=Backbone.View.extend({el:"#cruise-cabin-results-tab-content",events:{'click [data-hook="guaranteedStateroomLink"]':"_guaranteedStateroomLinkClick",'change [name^="selectableExtras_"]':"_onSelectableExtrasChange","click .shopCardModal":"_onShopCardModalClick","click .shipboardCreditModal":"_onShipboardCreditModalClick","click .amenityModal":"_onAmenityModalClick",'change [data-hook="selected-bed"]':"_changeBedSelection","click .nonMemberLink":"_onNonMemberLinkClick",
'click [data-hook="chooseDifferentStateroom"]':"_onChooseDifferentStateroomClick"},initialize:function(a){$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY&&$namespace.PageHistory.getLocationCodeFromPath()!=$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY&&$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY);
this.module=$.extend({},a).module;this.pageAnalyticsInfo={};this.translations=this.module.TranslationTexts;a=$('a[data-hook="guaranteed_stateroom_tooltip"]');1==a.length&&(a.get(0).guaranteedStateroomTooltip=new $namespace.Widgets.Tooltip(a));a=this.$el.find('DIV[data-hook="showmore"]');1==a.length&&(a.get(0).showmore=new $namespace.Widgets.ShowMore(a,{contentHeight:150,adjustHeightCallback:$.proxy(this.handleAccessibilityAttributes,this)}),a.on($namespace.Widgets.ShowMore.showMoreEvent,$.proxy(this.showMoreHandler,
this)));this.updateStateroomAccordion();this.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,d){d.tooltip=new $namespace.Widgets.Tooltip(a)}));a=this.$el.find('[name^="selectableExtras_"]:checked');0<a.length&&this.highLightSelectableExtras(a);this.cruiseStateroomLocationMapView=$namespace.Modules.addView(this.module,$namespace.View.CruiseStateroomLocationMapView,{view:this,isCruiseCabinResultsTabContentView:!0});this.setFocus();this.$el.find('[data-hook="shop_card_tooltip"]').on($namespace.Widgets.Tooltip.showTooltipEvent,
$.proxy(this.shopCardTooltipAnalytics,this));this.$el.find('[data-hook="guaranteed_stateroom_tooltip"]').on($namespace.Widgets.Tooltip.showTooltipEvent,$.proxy(this.guaranteedTooltipAnalytics,this));a=$('#cruise-cabin-results-page .sidebar-column [data-hook="accordionMenu"]');a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryAccordion,this));a=$('.cruiseSummaryAccordionTypeMobile [data-hook="accordionMenu"]');a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryAccordion,
this));this.extraAccessibility();this.workAroundChromeIssue();this.$el.find(".shopCardModal span, .shipboardCreditModal span, .amenityModal span, .nonMemberLink span").click(function(){});$(window).trigger("resize");this.totalPriceforSingleStateroom();this.storeAllottedCabin();a=this.$el.find(".bed-select-details");1==a.length&&(this.bedArrangement=new $namespace.Widgets.SelectWidget(a))},handleAccessibilityAttributes:function(a,b){a.hasClass("active")?b.removeAttr("aria-hidden aria-label tabindex role"):
b.attr({"aria-hidden":"true","aria-label":this.translations.STATEROOM_DESCRIPTION_TEXT,tabindex:"-1",role:"region"})},storeAllottedCabin:function(){var a=this.$el.attr("data-stateroom-index"),b="Stateroom"+a+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_PRICE_KEY,d=this.$el.attr("data-cabin-number");null==$namespace.Storage.get($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,b,null)&&$namespace.Storage.set($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,
b,d);$namespace.Storage.set($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,"Stateroom"+a+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_PRICE_CHANGED_KEY,d)},setFocus:function(){var a=$(".yourStateroom");$namespace.Browser.isIE()&&$(window).scrollTop(a.first().offset().top-($("#cruise-cabin-results-page").offset().top+$(".info-bar").offset().top));a.focus()},totalPriceforSingleStateroom:function(){var a=this.$el.attr("data-total-price");1==this.$el.attr("data-numberOfStaterooms")&&
($(".custom-price-accordion").removeClass("displayNone"),$(".custom-accordion-text").addClass("displayNone"),$(".custom-info-bar-title").addClass("displayNone"),$(".custom-info-bar-title-1").removeClass("displayNone"),$(".custom-price-desktop").removeClass("displayNone"),$(".single-price-span").removeClass("info-bar-price-span"),$(".single-price-span").text(a),$(".info-bar-price-span").text(a))},workAroundChromeIssue:function(){var a=this;setTimeout(function(){var b=a.$el.find("#selectBedOption");
if(1==b.length){var d=b.find("option[selected]").index();d=-1==d?0:d;0<=d&&(b.get(0).selectedIndex=d)}b=a.$el.find(".includedExtrasContainer input[checked]");1==b.length&&(b.is(":checked")||b.prop("checked",!0))},20)},showMoreHandler:function(a){var b=$(a.currentTarget).parents(".stateroomDescriptionContainer").first().find(".stateroomDescription");1==b.length&&(b.removeAttr("aria-hidden").show(),setTimeout(function(){b.focus()},100))},getCruisePackageId:function(){var a;this.module.cruiseCabinResults&&
(a=this.module.cruiseCabinResults.getCruisePackageId());return a},shopCardTooltipAnalytics:function(a){$namespace.Analytics.trackEvent("CR_Stateroom_Location_Shop_Card","ToolTip",this.getCruisePackageId())},guaranteedTooltipAnalytics:function(a){$namespace.Analytics.trackEvent("CR_Stateroom_Location_Guaranteed","ToolTip",this.getCruisePackageId())},cruiseSummaryAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Stateroom_Location_Cruise_Summary","Click",
"Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Stateroom_Location_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Stateroom_Location_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Stateroom_Location_Flights_Summary","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Stateroom_Location_Hotel_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Stateroom_Location_Transportation_Summary","Click","Expand")},getPageAnalyticsInfo:function(){_.isEmpty(this.pageAnalyticsInfo)&&this.module.cruiseCabinResults&&(this.pageAnalyticsInfo=this.module.cruiseCabinResults.getPageAnalyticsInfo());return this.pageAnalyticsInfo},chatLinkAnalytics:function(a){a=this.getPageAnalyticsInfo();$namespace.Analytics.trackEvent("Chat","Initiate_Chat",a.trackingText)},
_guaranteedStateroomLinkClick:function(a){$namespace.Analytics.trackEvent("CR_Guaranteed_Section_pageview","Click",this.getCruisePackageId());a="rcsl=LOAD_CRUISE_CABIN_RESULTS_TAB_CONTENT_SESSION_SWITCH&displayGuaranteedStaterooms=true&bookingIndex="+$(a.currentTarget).attr("data-stateroom-index");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,"cruiseCabinResultsTabContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($namespace.Application.initializeOnMainContentReload(),$namespace.TabOrder.updatePageTabOrder())},null)},submitAndContinue:function(a,b){var d=$("#selectBedOption").val(),e=this.$el.find('input[name^="selectableExtras_"]:checked'),f="",g="";e.length&&(g=e.val(),f=e.attr("data-category-code"));a=(null==b?"rcsl=UPDATE_SELECTED_STATEROOM_INFO":"rcsl=UPDATE_SELECTED_STATEROOM_AND_CONTINUE_TO_NEXT")+"&bookingIndex="+
a+"&bedConfigSetValue="+d;a=a+"&currentCruiseCategoryCode="+f;a=a+"&currentCruiseCategoryItemUid="+g;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):b?b():($("#cruiseCabinResultsTabContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload(),
$namespace.TabOrder.updatePageTabOrder())},null)},updateStateroomAccordion:function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSummaryAccordion.act","csa=DISPLAY_CRUISE_SEARCH_RESULT_STATEROOM_DETAILS",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{var a=$("#cruise-stateroom-summary"),b=$("#cruise-stateroom-summary-mobile");a.html(this.responseText);b.html(this.responseText)}},
null)},highLightSelectableExtras:function(a){var b=a.parents(".selectableExtrasContainer");this.$el.find(".selectableExtrasContainer").removeClass("selected");a.is(":checked")&&b.addClass("selected")},extraAccessibility:function(){$(".includedExtrasContainer .cruiseStateroomSelectableExtraTableRow").each(function(a,b){b=$(b);a=b.find('input[type="radio"]');1==a.length&&(b=b.find('label, [id^="extraName_"]').map(function(){return $(this).attr("id")}).get().join(" "),a.attr("aria-labelledby",b))})},
trackExtraSelection:function(a){a=a.parents(".cruiseStateroomSelectableExtraTableRow").first().find(".GAExtraName").map(function(){return $(this).text()}).get().join();var b=this.getPageAnalyticsInfo().cruiseLineName;$namespace.Analytics.trackEvent("CR_Stateroom_Location_Included_Extras",a,b)},_onSelectableExtrasChange:function(a){a=$(a.currentTarget);var b=a.parents(".selectableExtrasContainer"),d=this.$el.attr("data-stateroom-index"),e=this;this.trackExtraSelection(a);b.hasClass("selected")||(b=
a.val(),a=a.attr("data-category-code"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act","rcsl=LOAD_INCLUDED_EXTRAS&cruiseCategoryItemUid="+b+"&currentCruiseCategoryCode="+a,null,null,function(){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{e.$el.find(".loadIncludedExtrasDiv").html(this.responseText);var a=e.$el.find('input[name^="selectableExtras_"]:checked'),b=a.attr("data-current-price");e.$el.find(".stateroomPriceAmount").html(b);
$("#cruise-cabin-results-page .stateroom"+d+"_PriceAmount").html(b);e.highLightSelectableExtras(a);e.extraAccessibility();e.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));$namespace.TabOrder.updatePageTabOrder();a.focus()}},null,""))},showIncludedExtrasPopup:function(a,b,d){a="rcsl=LOAD_INCLUDED_EXTRAS_MODAL&cruiseCategoryItemUid="+$(a.currentTarget).attr("data-cruise-category-item-uid")+("&modalType="+b);_.isEmpty(d)||(a+="&amenityId="+
d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},null,"")},_onShopCardModalClick:function(a){this.showIncludedExtrasPopup(a,0);$namespace.Analytics.trackEvent("CR_Stateroom_Location_Costco_Shop_Card","Click",
this.getCruisePackageId())},_onShipboardCreditModalClick:function(a){this.showIncludedExtrasPopup(a,1);$namespace.Analytics.trackEvent("CR_Stateroom_Location_Costco_Shop_Card","Click",this.getCruisePackageId())},_onAmenityModalClick:function(a){var b=$(a.currentTarget).attr("data-amenity-id");this.showIncludedExtrasPopup(a,2,b);$namespace.Analytics.trackEvent("CR_Stateroom_Location_Amenity","Click",this.getCruisePackageId())},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+
"_error");a.after('<label tabindex="-1" class="error no-outline form-group" id="'+a.attr("id")+'_error">'+b+"</label>");$("#"+a.attr("id")+"_error").addClass("bed-error");a.focus()},_removeError:function(a){a.length&&(a.removeClass("error"),$("#"+a.attr("aria-describedby")).remove(),a.removeAttr("aria-describedby"))},_changeBedSelection:function(a){a=$("#"+a.target.id);this._removeError(a)},_validateStateroom:function(){var a=!0,b=this.module.TranslationTexts,d=$("#selectBedOption");this._removeError(d);
var e=$("#selectBedOption").val();if(""==e||"defaultBeddingOption"==e)this._addError(d,$namespace.MessageUtil.prefixError(b.BED_SELECTION_REQUIRED)),a=!1;return a},_onChooseDifferentStateroomClick:function(a){this.updateHisotryCodeWithTabInfo(a);a=$(a.currentTarget).attr("data-stateroom-index");a=$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_STATEROOM_SELECTION+"_"+a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Navigation.loadHistoryCodeWithData(a)},updateHisotryCodeWithTabInfo:function(a){a=
this.$el.attr("data-stateroom-index");$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY+"_"+a+"_0")},_onNonMemberLinkClick:function(a){this.updateHisotryCodeWithTabInfo(a);$namespace.Analytics.trackEvent("CR_Stateroom_Location_Login","Costco_Shop_Card_Amount",this.getCruisePackageId());$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY_AUTHENTICATE)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseCabinResultsGuaranteedView=Backbone.View.extend({el:"#cruise-cabin-results-guaranteed",events:{'change [name^="selectableExtras_"]':"_onSelectableExtrasChange",'change [data-hook="selected-bed"]':"_changeBedSelection","click .shopCardModal":"_onShopCardModalClick","click .shipboardCreditModal":"_onShipboardCreditModalClick","click .amenityModal":"_onAmenityModalClick",'click [data-hook="acknowledgementCheckBox"]':"_acknowledgementCheckBoxClick","click .nonMemberLink":"_onNonMemberLinkClick",
'click [data-hook="cancelGuaranteedStaterromSelection_btn"]':"_cancelGuaranteedStaterromSelectionClick",'click [data-hook="continue_stateroomGuaranteed_btn"]':"_continueStateroomGuaranteedClick"},initialize:function(a){$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY&&$namespace.PageHistory.getLocationCodeFromPath()!=$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY&&$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY);
this.module=$.extend({},a).module;var b=this;this.pageAnalyticsInfo={};this.translations=this.module.TranslationTexts;this.updateStateroomAccordion();this.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));this.$el.find('DIV[data-hook="showmore"]').each(utils.eachUninitialized(function(a,e){e.showmore=new $namespace.Widgets.ShowMore(a,{contentHeight:150,adjustHeightCallback:$.proxy(b.handleAccessibilityAttributes,b)});a.on($namespace.Widgets.ShowMore.showMoreEvent,
$.proxy(b.showMoreHandler,b))}));a=this.$el.find('[name^="selectableExtras_"]:checked');0<a.length&&this.highLightSelectableExtras(a);this.setFocus();this.$el.find('[data-hook="shop_card_tooltip"]').on($namespace.Widgets.Tooltip.showTooltipEvent,$.proxy(this.shopCardTooltipAnalytics,this));this.$el.find('[data-hook="guaranteed_stateroom_tooltip"]').on($namespace.Widgets.Tooltip.showTooltipEvent,$.proxy(this.guaranteedTooltipAnalytics,this));a=$('#cruise-cabin-results-page .sidebar-column [data-hook="accordionMenu"]');
a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryAccordion,this));a=$('.cruiseSummaryAccordionTypeMobile [data-hook="accordionMenu"]');a.off();a.on("ct.accordion.openStart",$.proxy(this.cruiseSummaryAccordion,this));this.extraAccessibility();this.workAroundChromeIssue();this.$el.find(".shopCardModal span, .shipboardCreditModal span, .amenityModal span, .nonMemberLink span").click(function(){});$(window).trigger("resize");"true"===this.$el.attr("data-guaranteedCabinAvailable")&&this.guaranteedOnlyAnalytics();
this.totalPriceforSingleStateroom();this.$el.find(".bed-select").each(utils.eachUninitialized(function(a,b){b.bedArrangement=new $namespace.Widgets.SelectWidget(a)}))},setFocus:function(){var a=$(".guaranteedStateroomCategories");($namespace.Browser.isIE()||$namespace.Browser.isFireFox())&&$(window).scrollTop(a.first().offset().top-($("#cruise-cabin-results-page").offset().top+$(".info-bar").offset().top));a.focus()},handleAccessibilityAttributes:function(a,b){a.hasClass("active")?b.removeAttr("aria-hidden aria-label tabindex role"):
b.attr({"aria-hidden":"true","aria-label":this.translations.STATEROOM_DESCRIPTION_TEXT,tabindex:"-1",role:"region"})},totalPriceforSingleStateroom:function(){var a=this.$el.attr("data-max-stateroom"),b="true"===this.$el.attr("data-cabinHold");1!=a||b||($(".custom-price-accordion").addClass("displayNone"),$(".custom-accordion-text").removeClass("displayNone"),$(".custom-info-bar-title").removeClass("displayNone"),$(".custom-info-bar-title-1").addClass("displayNone"),$(".custom-price-desktop").addClass("displayNone"))},
showMoreHandler:function(a){var b=$(a.currentTarget).parents(".stateroomDescriptionContainer").first().find(".stateroomDescription");1==b.length&&(b.removeAttr("aria-hidden").show(),setTimeout(function(){b.focus()},100))},getPageAnalyticsInfo:function(){_.isEmpty(this.pageAnalyticsInfo)&&this.module.cruiseCabinResults&&(this.pageAnalyticsInfo=this.module.cruiseCabinResults.getPageAnalyticsInfo("guaranteed_section"));return this.pageAnalyticsInfo},guaranteedOnlyAnalytics:function(a){a=a?a:this.module.cruiseCabinResults;
var b=this.$el.attr("data-stateroom-index");a&&!a.getGuaranteedGATrackingState(b)&&($namespace.Analytics.trackEvent("CR_Stateroom_Location","Guaranteed_Only",a.getCruisePackageId()),a.setGuaranteedGATrackingState(b))},chatLinkAnalytics:function(a){a=this.getPageAnalyticsInfo();$namespace.Analytics.trackEvent("Chat","Initiate_Chat",a.trackingText)},cruiseSummaryAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Cruise_Summary","Click",
"Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Flights_Summary","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Hotel_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Transportation_Summary","Click","Expand")},trackingContinueButton:function(){$namespace.Analytics.trackEvent("CR_Guaranteed_Section","Continue","Guaranteed_Stateroom")},getCruisePackageId:function(){var a;this.module.cruiseCabinResults&&(a=this.module.cruiseCabinResults.getCruisePackageId());return a},shopCardTooltipAnalytics:function(a){$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Shop_Card",
"ToolTip",this.getCruisePackageId())},guaranteedTooltipAnalytics:function(a){$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Guaranteed","ToolTip",this.getCruisePackageId())},workAroundChromeIssue:function(){this.$el.find(".guaranteedStateroomCard").each(function(a,b){var d=$(b);setTimeout(function(){var a=d.find('select[name="bedOption"]');if(d.hasClass("selected")){if(a.length){var b=a.find("option[selected]").index();a.get(0).selectedIndex=b}d.find('input[name="acknowledgementCheckBox"]').prop("checked",
!0)}else a.length&&(a.get(0).selectedIndex=0),d.find('input[name="acknowledgementCheckBox"]').prop("checked",!1);a=d.find(".includedExtrasContainer input[checked]");1==a.length&&(a.is(":checked")||a.prop("checked",!0))},20)})},submitAndContinue:function(a,b,d){if(d){var e=$(d.currentTarget),f=e.parents(".guaranteedStateroomCard");d=f.find('select[name^="bedOption"]').val();var g=f.find('input[name^="selectableExtras_"]:checked');f=e.attr("data-category-code");e=e.attr("data-item-uid");g.length&&(e=
g.val(),f=g.attr("data-category-code"));a=(null==b?"rcsg=SELECT_CRUISE_GUARANTEED_STATEROOM":"rcsg=SELECT_CRUISE_GUARANTEED_STATEROOM_CONTINUE_TO_NEXT")+"&bookingIndex="+a+"&bedConfigSetValue="+d;a=a+"&currentCruiseCategoryCode="+f;a=a+"&currentCruiseCategoryItemUid="+e;d=function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):b?b(!0):($("#cruiseCabinResultsTabContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload(),
$namespace.TabOrder.updatePageTabOrder())};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomGuaranteed.act",a,null,null,d,null)}else b?b():(a="rcsl=LOAD_CRUISE_CABIN_RESULTS_TAB_CONTENT_SESSION_SWITCH&bookingIndex="+a,d=function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($namespace.Application.initializeOnMainContentReload(),$namespace.TabOrder.updatePageTabOrder())},
$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,"cruiseCabinResultsTabContent",d,null))},updateStateroomAccordion:function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSummaryAccordion.act","csa=DISPLAY_CRUISE_SEARCH_RESULT_STATEROOM_DETAILS",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{var a=
$("#cruise-stateroom-summary"),b=$("#cruise-stateroom-summary-mobile");a.html(this.responseText);b.html(this.responseText)}},null)},highLightSelectableExtras:function(a){var b=a.parents(".selectableExtrasContainer");b.parents(".includedExtrasContainer").find(".selectableExtrasContainer").removeClass("selected");a.is(":checked")&&b.addClass("selected")},extraAccessibility:function(){$(".includedExtrasContainer .cruiseStateroomSelectableExtraTableRow").each(function(a,b){b=$(b);a=b.find('input[type="radio"]');
1==a.length&&(b=b.find('label, [id^="extraName_"]').map(function(){return $(this).attr("id")}).get().join(" "),a.attr("aria-labelledby",b))})},trackExtraSelection:function(a){a=a.parents(".cruiseStateroomSelectableExtraTableRow").first().find(".GAExtraName").map(function(){return $(this).text()}).get().join();var b=this.getPageAnalyticsInfo().cruiseLineName;$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Included_Extras",a,b)},_onSelectableExtrasChange:function(a){a=$(a.currentTarget);var b=
a.parents(".selectableExtrasContainer"),d=a.parents(".loadIncludedExtrasDiv"),e=this,f=a.parents(".guaranteedStateroomCard");this.trackExtraSelection(a);this._enableSelectCard(f);b.hasClass("selected")||(b=a.val(),a=a.attr("data-category-code"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act","rcsl=LOAD_INCLUDED_EXTRAS&cruiseCategoryItemUid="+b+"&currentCruiseCategoryCode="+a,null,null,function(){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});
else{d.html(this.responseText);var a=d.find('input[name^="selectableExtras_"]:checked'),b=a.attr("data-current-price"),f=a.attr("data-category-code");e.$el.find("#guaranteedStateroom_stateroomPrice_"+f).html(b);e.highLightSelectableExtras(a);e.extraAccessibility();e.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));$namespace.TabOrder.updatePageTabOrder();a.focus()}},null,""))},showIncludedExtrasPopup:function(a,b,d){a="rcsl=LOAD_INCLUDED_EXTRAS_MODAL&cruiseCategoryItemUid="+
$(a.currentTarget).attr("data-cruise-category-item-uid")+("&modalType="+b);_.isEmpty(d)||(a+="&amenityId="+d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},null,"")},_onShopCardModalClick:function(a){this.showIncludedExtrasPopup(a,
0);$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Costco_Shop_Card","Click",this.getCruisePackageId())},_onShipboardCreditModalClick:function(a){this.showIncludedExtrasPopup(a,1);$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Costco_Shop_Card","Click",this.getCruisePackageId())},_onAmenityModalClick:function(a){var b=$(a.currentTarget).attr("data-amenity-id");this.showIncludedExtrasPopup(a,2,b);$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Amenity","Click",this.getCruisePackageId())},
_continueStateroomGuaranteedClick:function(a){if(this._validateStateroom(a)){var b=this.$el.attr("data-stateroom-index");$namespace.Analytics.trackEvent("CR_Guaranteed_Section","Select","Stateroom"+b+"_Guaranteed");b="Stateroom"+$("#cruise-cabin-results-guaranteed").attr("data-stateroom-index")+"_"+$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_PRICE_CHANGED_KEY;$namespace.Storage.set($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_BEST_VALUE_STATE,b,$namespace.CruiseStateroomConstants.CRUISE_STATEROOM_GUARANTEED_SELECTION);
this.module.cruiseCabinResults._continueToNextItem(a)}},_cancelGuaranteedStaterromSelectionClick:function(a){$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Cancel","Click",this.getCruisePackageId());a=$(".stateroomGuaranteedVerbiage");this._removeError(a);this.moveToLocationPageWithCancelOption(!0)},moveToLocationPageWithCancelOption:function(a){var b="rcsg=CANCEL_CRUISE_GUARANTEED_STATEROOM&bookingIndex="+$("#cruise-cabin-results-guaranteed").attr("data-stateroom-index");a&&(b+="&cancelStateroomSelection=true");
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomGuaranteed.act",b,null,"cruiseCabinResultsTabContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($namespace.Application.initializeOnMainContentReload(),$namespace.TabOrder.updatePageTabOrder())},null)},backButtonHandler:function(){var a="true"===this.$el.attr("data-guaranteedCabinAvailable"),
b="true"===this.$el.attr("data-guaranteed-selected");(a=!a&&!b)&&this.moveToLocationPageWithCancelOption(!1);return a},_acknowledgementCheckBoxClick:function(a){var b=$(a.currentTarget).parents(".guaranteedStateroomCard");a=b.find(".align-checkbox");b=b.find('input[name^="acknowledgementCheckBox"]');this._removeTCError(a,b)},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline form-group" id="'+a.attr("id")+
'_error">'+b+"</label>");$("#"+a.attr("id")+"_error").addClass("bed-error");a.focus()},_addTCError:function(a,b,d){a.addClass("darkRedLabel error");b.addClass("error").focus();b.attr("aria-describedby",a.attr("id")+"_error");b.parent().append('<label tabindex="-1" class="error darkRedLabel no-outline form-group" id="'+a.attr("id")+'_error">'+d+"</label>")},_addGSError:function(a,b){a.attr("aria-describedby",a.attr("id")+"_error");a.before('<p tabindex="-1" class="guaranteed-error-msg error no-outline form-group" id="'+
a.attr("id")+'_error">'+b+"</p>");this.setFocus();$("#"+a.attr("id")+"_error").focus()},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby")},_removeTCError:function(a,b){a.removeClass("darkRedLabel error");b.removeClass("error");$("#"+a.attr("id")+"_error").remove()},_changeBedSelection:function(a){var b=$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b);a=$(a.currentTarget).parents(".guaranteedStateroomCard");
this._enableSelectCard(a)},_enableSelectCard:function(a){if(a.hasClass("selected")){a.removeClass("selected");var b=a.find('button[name="btnSelectGuaranteed"]');b.prop("disabled",!1);b.text(this.translations.SELECT_BUTTON_TEXT);a.find('input[name^="acknowledgementCheckBox"]').prop("checked",!1)}},_validateStateroom:function(a){var b=this,d=this.module.TranslationTexts,e=!0,f="true"===this.$el.attr("data-guaranteedCabinAvailable"),g=$(".stateroomGuaranteedVerbiage");this._removeError(g);if(null!=a){g=
$(a.currentTarget).parents(".guaranteedStateroomCard");a=g.find(".align-checkbox");f=g.find('select[name^="bedOption"]');g=g.find('input[name^="acknowledgementCheckBox"]');this._removeError(f);this._removeTCError(a,g);var h=g.is(":checked"),k=f.val();if(""==k||"defaultBeddingOption"==k)this._addError(f,$namespace.MessageUtil.prefixError(d.BED_SELECTION_REQUIRED)),e=!1;h||(this._addTCError(a,g,$namespace.MessageUtil.prefixError(d.CHECKBOX_SELECTION_REQUIRED)),e=!1)}else b.$el.find(".guaranteedStateroomCard").each(function(a,
d){a=$(d);if(e=b._validateGuaranteedStateroom(a))return!1}),e||($namespace.Analytics.trackEvent("Error/Cr/Guaranteed_Section","did_not_click_select",this.getCruisePackageId()),f?this._addGSError(g,$namespace.MessageUtil.prefixError(d.ONLY_GUARANTEED_STATEROOM_SELECTION_REQUIRED)):this._addGSError(g,$namespace.MessageUtil.prefixError(d.GUARANTEED_STATEROOM_SELECTION_REQUIRED)));return e},_validateGuaranteedStateroom:function(a){var b=!1,d=$(".stateroomGuaranteedVerbiage");this._removeError(d);a.hasClass("selected")&&
(b=!0);return b},_onNonMemberLinkClick:function(a){a=this.$el.attr("data-stateroom-index");$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY+"_"+a+"_1");$namespace.Analytics.trackEvent("CR_Guaranteed_Section_Login","Costco_Shop_Card_Amount",this.getCruisePackageId());$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY_AUTHENTICATE)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruisePackageAddonsPageView=Backbone.View.extend({el:"#cruise-package-addons-page",ui:{form:null},departureDate:null,returnDate:null,arrivalDate:null,lastDepartureDate:null,lastReturnDate:null,isFirstFormFieldFocusActive:!1,documentPath:"/cr/booking/bookingWidget/packageAddons/",events:{'click [data-hook="checkFlight"]':"_onIncludeFlightsClick","change #serviceClassWidget":"_onServiceClassChange",'click [data-hook="destinationAirportCheckbox"]':"_airportCheckbox",'click [data-hook="arrivalAirportCheckbox"]':"_airportCheckbox",
"keydown #departureCityTextWidget":"_onDepartureCityKeyDown",'click [data-hook="continueToFlights"]':"_continueToFlights",'click [data-hook="continue_packageAddons_btn"]':"_onContinueClick","change #arrivalDateWidget":"_onArrivalDateWidgetChange","change #departureDateWidget":"_onDepartureDateWidgetChange","click #preCruiseHotelIncluded":"_onPreCruiseHotelClick","click #postCruiseHotelIncluded":"_onPostCruiseHoteClick","click #transportationIncluded":"_onTransportationClick",'click [data-hook="continueToTransportation"]':"_onContinueToTransportationClick",
'change [data-hook="preCruiseHotelNights"]':"_onPreCruiseHotelNightChange",'change [data-hook="preCruiseHotelRooms"]':"_onPreCruiseHotelRoomChange",'change [data-hook="postCruiseHotelNights"]':"_onPostCruiseHotelNightChange",'change [data-hook="postCruiseHotelRooms"]':"_onPostCruiseHotelRoomChange",'click [data-hook="continueToPreCruiseHotel"]':"_onContinueToPreCruiseHotel","change #divPreIncludedHotel":"_onPreCruiseHotelChange",'click [data-hook="continueToPostCruiseHotel"]':"_onContinueToPostCruiseHotel",
"change #divPostIncludedHotel":"_onPostCruiseHotelChange","click .dropDownArrow":"_onSelectDropDownClick","focusin .dropDownArrow":"_onSelectDropDownFocusIn","focusout .dropDownArrow":"_onSelectDropDownFocusOut","keypress .dropDownArrow":"_onSelectDropDownClick"},initialize:function(a){$("#continueTopLinkFlights").hide();$("#continueToFlights").hide();$("#airportServiceRequired").hide();document.title=$("input#packageAddonsPage_title").val();var b=$.extend({},a);this.defaultDepartureDate=this.departureLocationName=
this.departureLocationCode="";this.controller=b.controller;this.cruiseReturnDate="";this.module=b.module;this.departDate=b.flightdepartureDate;this.arrivalDate=b.flightarrivalDate;this.numberOfInfants=b.numberOfInfants;this.numberOfActualAdults=b.numberOfActualAdults;this.numberOfActualChildren=b.numberOfActualChildren;this.cruiseDepartureDate=b.cruiseDepartureDate;this.cruiseReturnDate=b.cruiseReturnDate;this.cruiseEmbarkationCity=b.cruiseEmbarkationCity;this.cruiseDisembarkationCity=b.cruiseDisembarkationCity;
this.seaportName=b.seaportName;this.departureCityName=b.departureCityName;this.departureCityCode=b.departureCityCode;this.arrivalSeaportName=b.arrivalSeaportName;this.shipName=b.shipName;this.cruiseLineName=b.cruiseLineName;this.numAvailableDestinationAirports=b.numAvailableDestinationAirports;this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT;this.eventLabel=$(this.el).data("cruiseline-code");this.eventAction="";this.eventCategory=
"Cr_Package_add_ons";this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/cr/booking/bookingWidget/packageAddons/"+$(f.el).data("destination")+"/"+$(f.el).data("line-name")+"/"+$(f.el).data("ship-name")+"/"+$(f.el).data("departure-date"))});$(".accordion-item").removeClass("accordion-item-current");this.ui.form=$("#cruise-package-addons-page");var d=$("#flightIncluded").prop("checked"),e=
$("#transportationIncluded").prop("checked");a=$("input#superRetainLandComponents").val();"true"!==a?($("input:checkbox:checked").prop("checked",!1),this.postCruiseHotelDepartureDate=this.preCruiseHotelArrivalDate=""):(this.preCruiseHotelArrivalDate=b.preCruiseHotelArrivalDate,this.postCruiseHotelDepartureDate=b.postCruiseHotelDepartureDate);d&&this._onIncludeFlightsClick(!0);this.win=$namespace.SearchWidgetsModule.getWindowDimensions();""!=this.departureCityName&&(d?this.ui.form.find('INPUT[id="departureCityTextWidget"]').val(this.departureCityName).attr("default-value",
this.departureCityCode):this.ui.form.find('INPUT[id="departureCityTextWidget"]').val("").attr("default-value",""));$namespace.TabOrder.updatePageTabOrder();b=$namespace.DomUtil.readCookie("Csrf-token");this.ui.departureLocation=new $namespace.Widgets.DataListWidget(this.ui.form.find("#departure_location_widget"),{url:"searchHelper.act",parser:$namespace.Utils.parseAirport,requestMethod:"POST",onSelect:$.proxy(this._onDepartureLocationSelect,this),onLocationBlur:$.proxy(this._onDepartureCityBlur,this),
dataTransform:function(a){a=JSON.parse(a).callbackFunctionParameters[0];for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({airportCode:e.airportInfo.code,airportName:"("+e.airportInfo.code+") "+e.airportInfo.airportNameDisplay,cityName:e.airportInfo.cityName,country:""})}return{airports:b}},noResultsText:this.module.TranslationTexts.NO_DEPARTURE_CITY_ERROR_MESSAGE,headers:{"X-Csrf-Token":b},params:{sh:"LOAD_DEPARTURE_CITIES",rawOutput:!0}});var f=this,g=$namespace,h=g.DateUtil;b=g.DateUtil.addDaysToDate(new Date(this.cruiseDepartureDate),
-7);d=g.DateUtil.addDaysToDate(new Date(this.cruiseReturnDate),7);var k=function(a){var b=g.DateUtil.getDateFromString($("#arrivalDateWidget").val(),g.GlobalConstants.LOCALE_DATE_FORMAT),d=g.DateUtil.getDateFromString($("#departureDateWidget").val(),g.GlobalConstants.LOCALE_DATE_FORMAT),e=/departure/.test($(this).attr("id"));e=$("#"+(e?"arrivalDateWidget":"departureDateWidget")).datepicker("getDate");e=null===e||0!=h.getDifferenceInDays(a,e)?"":"date-highlight";var k=g.SearchWidgetsModule.getAccessibleDateLabel(a),
l=g.DateUtil.getDateFromString(f.arrivalDate,g.GlobalConstants.LOCALE_DATE_FORMAT),p=g.DateUtil.getDateFromString(f.departDate,g.GlobalConstants.LOCALE_DATE_FORMAT),w=null!=b?b:l,y=null!=d?d:p;return!(a>=(w>l?l:w)&&a<=(y<p?p:y))||a.valueOf()==w.valueOf()&&null!=b||a.valueOf()==y.valueOf()&&null!=d?(null!=f.departureDate&&0==h.getDifferenceInDays(a,f.departureDate.date)?k=g.TranslationUtil.replaceParameters(g.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_SELECTED_LABEL,{date:k}):null!=f.returnDate&&
0==h.getDifferenceInDays(a,f.returnDate.date)&&(k=g.TranslationUtil.replaceParameters(g.SearchWidgetsModule.TranslationTexts.RETURN_DATE_SELECTED_LABEL,{date:k})),a=g.DateUtil.enhanceDateStringReadability(k),[!0,e,k,a]):[!0,"between-date-highlight",""]},l=function(a,b){f.validateDates()};g.DateUtil.getDateDaysFromToday(0);g.DateUtil.getDateDaysFromToday(1);this.departureDate&&g.DateUtil.addDaysToDate(this.departureDate.date,1);this.ui.departureDate=this.ui.form.find("#departureDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),beforeShow:function(a,b){a=$(a);a=/departure/.test(a.attr("id"));b.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"arrival"));null!=this.arrivalDate&&this.ui.arrivalDate.val(arrivalDate);f._resetFlightDateIfAnyInputError()},beforeShowDay:k,inline:!0,minDate:b,maxDate:d,defaultDate:this.departDate,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:g.Config.DAY_SHORT_NAMES,monthNames:g.Config.MONTH_NAMES,onClose:l,showOn:"button",
showAnim:"",buttonImage:g.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:g.SearchWidgetsModule.TranslationTexts.DEPARTURE_DATE_CALENDAR_LABEL,prevText:g.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:g.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});this.ui.arrivalDate=this.ui.form.find("#arrivalDateWidget").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),beforeShow:function(a,b){a=$(a);
a=/arrival/.test(a.attr("id"));b.dpDiv.removeClass("ctc-ui-datepicker-depart ctc-ui-datepicker-return").addClass("ctc-ui-datepicker-"+(a?"depart":"arrival"));null!=this.arrivalDate&&this.ui.arrivalDate.val(arrivalDate);f._resetFlightDateIfAnyInputError()},beforeShowDay:k,inline:!0,minDate:b,maxDate:d,defaultDate:this.arrivalDate,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:g.Config.DAY_SHORT_NAMES,monthNames:g.Config.MONTH_NAMES,onClose:l,showOn:"button",showAnim:"",buttonImage:g.Configuration.webLoc+
"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:"Arrival Date Calender",alignRight:!0,prevText:g.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:g.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});b=this.ui.form.find("#departureDateWidget, #arrivalDateWidget");this.floatPlaceholders=[];b.each(function(a,b){f.floatPlaceholders.push(new $namespace.FloatPlaceholder(b))});d=this.ui.form.find("#departureCityTextWidget");this.floatPlaceholders.push(new $namespace.FloatPlaceholder(d,
!0));b.on("blur",function(){$(this).datepicker("widget").is(":visible")||f.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),g.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");
else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});this.arrivalDate&&this.ui.arrivalDate.datepicker("setDate",new Date(this.arrivalDate));this.departDate&&this.ui.departureDate.datepicker("setDate",new Date(this.departDate));$("#cruise-package-addons-page div.date-widget").addClass("ctc-jqui");$(window).on("resize orientationchange",function(){var a=g.SearchWidgetsModule.getWindowDimensions();if(f.win.height!=a.height||f.win.width!=a.width)f.ui.form.find("#arrivalDateWidget, #departureDateWidget").datepicker("hide"),
f.win=a;f.resize();$namespace.TabOrder.updatePageTabOrder();this.initialized=!0});this.isPreHotelSelected()&&(this._onPreCruiseHotelClick(),this._onPreCruiseHotelRoomChange(event));this.isPostHotelSelected()&&(this._onPostCruiseHoteClick(),this._onPostCruiseHotelRoomChange(event));this.isTransportationSelected()?this._onTransportationClick():$("#divSelecetdTransportationNotRequired").addClass("hide");this.trackGA();this.resize();this.isPreHotelSelected()||this.isPostHotelSelected()||this.isFlightsSelected()?
$("#transportationIncluded").prop("disabled",!1):$("#transportationIncluded").prop("disabled",!0);e||($("#transportationIncluded").attr("checked",!1),$("#divSelecetdTransportationNotRequired").addClass("hide"));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);$("input").on("focus",function(){$("#divPostIncludedHotelNotRequired").removeClass("focus");$("#divPreIncludedHotelNotRequired").removeClass("focus")});
$("#continueToFlights").focus(function(){$("#divPostIncludedHotelNotRequired").removeClass("focus");$("#divPreIncludedHotelNotRequired").removeClass("focus")});"true"!=a&&$(window).load(function(){$("input[type=checkbox]").removeAttr("checked");$(".select-widget").find("select").prop("selectedIndex",0)});1==this.numberOfActualAdults?($("#preCruiseHotelRooms").prop("disabled",!0).addClass("disabled"),$("#postCruiseHotelRooms").prop("disabled",!0).addClass("disabled")):($("#preCruiseHotelRooms").removeAttr("disabled").removeClass("disabled"),
$("#postCruiseHotelRooms").removeAttr("disabled").removeClass("disabled"));$(window).load(function(){e||($("#transportationIncluded").attr("checked",!1),$("#divSelecetdTransportationNotRequired").addClass("hide"))})},isFlightsSelected:function(){return $("#flightIncluded").is(":checked")},isPreHotelSelected:function(){return $("#preCruiseHotelIncluded").is(":checked")},isPostHotelSelected:function(){return $("#postCruiseHotelIncluded").is(":checked")},isTransportationSelected:function(){return $("#transportationIncluded").is(":checked")},
setReturnDateCalendarDisplayMonth:function(){var a=new Date,b=a.getMonth();a=a.getFullYear();this.departureDate&&this.returnDate?(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear(),this.departureDate.date.getTime()>=this.returnDate.date.getTime()&&(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear())):this.departureDate?(b=this.departureDate.date.getMonth(),a=this.departureDate.date.getFullYear()):this.returnDate&&(b=this.returnDate.date.getMonth(),a=this.returnDate.date.getFullYear());
var d=this.ui.arrivalDate.val();this.ui.arrivalDate.datepicker("option",{displayAtMonth:b,displayAtYear:a,suspendAutoUpdate:!0});this.ui.arrivalDate.val(d)},validateDates:function(a){var b=!0;a=arguments.length?a?!0:!1:!0;var d=this.ui.departureDate.val(),e=this.ui.arrivalDate.val();this.departureDate&&this.arrivalDate?(d=$namespace.DateUtil.getDifferenceInDays(this.returnDate.date,this.departureDate.date),1>d?b=!1:30<d&&(b=!1)):(this.departureDate||!e.length&&a||(b=!1),this.returnDate||!d.length&&
a||(b=!1));return b},_onArrivalDateWidgetChange:function(a){this._removeError($("#arrivalDateWidget"));$("#arrivalDateError").addClass("hide");var b=this.module.TranslationTexts;""!=$("#arrivalDateWidget").val()&&this._removeError($("#arrivalDateWidget"));var d=$("#arrivalDateWidget").val();a&&this.preCruiseHotelArrivalDate&&d!=this.preCruiseHotelArrivalDate&&(this.preCruiseHotelArrivalDate="");a=this.cruiseDepartureDate;var e=$namespace.DateUtil.isValidDateString(d,this.localeDateFormat);if(""==
d)this.isFirstFormFieldFocusActive=!1,this._addError($("#arrivalDateWidget"),$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_ARRIVAL_DATE_REQUIRED));else if(e){b=$namespace.DateUtil.getDateAsString(new Date(a),this.localeDateFormat);e=$namespace.DateUtil.addDaysToDate(new Date(b),-7);e=$namespace.DateUtil.getDateAsString(new Date(e),this.localeDateFormat);if(new Date(d)<new Date(e)||new Date(d)>new Date(b))this.isFirstFormFieldFocusActive=!1,$("#arrivalDateError").removeClass("hide"),this._addErrorWithFocus($("#arrivalDateWidget"),
"arrivalDateError");if(this.isPreHotelSelected()||$("#preCruiseHotelIncluded").is(":disabled"))d=$namespace.DateUtil.getDifferenceInDays(new Date(d),new Date(a)),1>d?($("#divPreIncludedHotelNotRequired").removeClass("hide"),$("#preCruiseHotelIncluded").prop("checked",!1),$("#preIncludedHotelNotRequired").focus(),$("#preCruiseHotelIncluded").prop("disabled",!0),$("#preCruiseHotelIncluded").addClass("disabled"),this._addAriaDescribedElement("#preCruiseHotelIncluded","preIncludedHotelNotRequired"),$("#divPreIncludedHotel").addClass("hide"),
$(".preCruiseHotelStay").addClass("hide")):($(".preCruiseHotelStay").removeClass("hide"),$("#preCruiseHotelNights").val(d),$("#preCruiseHotelNoOfNights").text(d),d=new Date(this.ui.arrivalDate.val()),this.preCruiseHotelArrivalDate&&(d=new Date(this.preCruiseHotelArrivalDate),$("#arrivalDateWidget").val(this.preCruiseHotelArrivalDate)),$("#preCruiseHotelCheckInDate").text($namespace.DateUtil.getDateAsString(d,this.localeDateFormat)),$("#divPreIncludedHotel").removeClass("hide"),$("#divPreIncludedHotelNotRequired").addClass("hide"),
$("#preCruiseHotelIncluded").removeAttr("disabled"),$("#preCruiseHotelIncluded").removeClass("disabled"),$("#preCruiseHotelIncluded").prop("checked",!0)),$(window).trigger("resize"),$namespace.TabOrder.updatePageTabOrder()}else this.isFirstFormFieldFocusActive=!1,this._addError($("#arrivalDateWidget"),$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_INVALID_ARRIVAL_DATE))},_onDepartureDateWidgetChange:function(a){this._removeError($("#departureDateWidget"));$("#departureDateError").addClass("hide");
var b=$("#departureDateWidget").val(),d=this.cruiseReturnDate,e=this.module.TranslationTexts,f=$namespace.DateUtil.isValidDateString(b,this.localeDateFormat);a&&this.postCruiseHotelDepartureDate&&b!=this.postCruiseHotelDepartureDate&&(this.postCruiseHotelDepartureDate="");""!=$("#departureDateWidget").val()&&this._removeError($("#departureDateWidget"));if(""==b)this.isFirstFormFieldFocusActive=!1,this._addError($("#departureDateWidget"),$namespace.MessageUtil.prefixError(e.CRUISE_PACKAGE_ADDON_DEPARTURE_DATE_REQUIRED));
else if(f){if(a=new Date(d),e=$namespace.DateUtil.getDateAsString(new Date(a),this.localeDateFormat),d=$namespace.DateUtil.addDaysToDate(new Date(d),7),d=$namespace.DateUtil.getDateAsString(new Date(d),this.localeDateFormat),""!=b&&(new Date(b)<new Date(e)||new Date(b)>new Date(d))&&(this.isFirstFormFieldFocusActive=!1,this._addErrorWithFocus($("#departureDateWidget"),"departureDateError"),$("#departureDateError").removeClass("hide")),this.isPostHotelSelected()||$("#postCruiseHotelIncluded").is(":disabled"))b=
$namespace.DateUtil.getDifferenceInDays(new Date(a),new Date(b)),1>b?($("#divPostIncludedHotelNotRequired").removeClass("hide"),$("#postCruiseHotelIncluded").prop("checked",!1),$("#preIncludedHotelNotRequired").focus(),$("#postCruiseHotelIncluded").prop("disabled",!0),$("#postCruiseHotelIncluded").addClass("disabled"),this._addAriaDescribedElement("#postCruiseHotelIncluded","postIncludedHotelNotRequired"),$("#divPostIncludedHotel").addClass("hide"),$(".postCruiseHotelStay").addClass("hide")):($(".postCruiseHotelStay").removeClass("hide"),
$("#postCruiseHotelNights").val(b),$("#postCruiseHotelNoOfNights").text(b),b=new Date(this.ui.departureDate.val()),this.postCruiseHotelDepartureDate&&(b=new Date(this.postCruiseHotelDepartureDate),$("#departureDateWidget").val(this.postCruiseHotelDepartureDate)),$("#postCruiseHotelCheckOutDate").text($namespace.DateUtil.getDateAsString(b,this.localeDateFormat)),$("#divPostIncludedHotel").removeClass("hide"),$("#divPostIncludedHotelNotRequired").addClass("hide"),$("#postCruiseHotelIncluded").removeAttr("disabled"),
$("#postCruiseHotelIncluded").removeClass("disabled"),$("#postCruiseHotelIncluded").prop("checked",!0)),$(window).trigger("resize"),$namespace.TabOrder.updatePageTabOrder()}else this.isFirstFormFieldFocusActive=!1,this._addError($("#departureDateWidget"),$namespace.MessageUtil.prefixError(e.CRUISE_PACKAGE_ADDON_INVALID_DEPARTURE_DATE))},_onServiceClassChange:function(a){$(a.currentTarget).val()},_onBackLink:function(a){window.history.back()},clearError:function(a){this.clearErrors([a])},clearErrors:function(){var a=
[];arguments.length?a=arguments[0]:a.push("#departureCityTextWidget");$namespace.Utils.clearErrors(a,this.ui.form)},onResize:function(){$namespace.TabOrder.updatePageTabOrder()},_addErrorWithFocus:function(a,b){a.addClass("error");a.attr("aria-describedby",b);this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,setTimeout(function(){a.focus()},200))},_onIncludeFlightsClick:function(){var a=$("#flightIncluded").prop("checked"),b=$("#transportationIncluded"),d=b.is(":checked"),e=$("#preCruiseHotelIncluded").is(":checked"),
f=$("#postCruiseHotelIncluded").is(":checked");this.removeTransportationError();a?($("#continueTopLinkFlights").removeClass("hide"),$("#continueToFlights").removeClass("hide"),$("#flight").addClass("displayBlock").show(),$("#continueToDetails").hide(),$("#continueDetails").hide(),$("#buttonLoginAndBook").hide(),$("#continueTopLinkFlights").show(),$("#continueToFlights").show(),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),
$(".continueToPreCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPreCruiseHotel").addClass("hide"),$(".continueToPostCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPostCruiseHotel").addClass("hide"),b.prop("checked",!0),e&&($("#preCruiseHotelNights").addClass("disabled"),$("#preCruiseHotelNights").attr("disabled",!0),this._onArrivalDateWidgetChange()),f&&($("#postCruiseHotelNights").addClass("disabled"),$("#postCruiseHotelNights").attr("disabled",
!0),this._onDepartureDateWidgetChange()),b.prop("disabled",!1),$("#divSelecetdTransportationNotRequired").removeClass("hide"),$("#divTransportationAvailable").addClass("hide"),$('[data-hook="continueToFlights"]').addClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').removeClass("btn-continue")):($(".preCruiseHotelStay").addClass("hide"),$("#divPreIncludedHotelNotRequired").addClass("hide"),$("#preCruiseHotelIncluded").removeAttr("disabled"),$("#preCruiseHotelIncluded").removeClass("disabled"),
$("#preCruiseHotelNights").removeClass("disabled"),$("#preCruiseHotelNights").removeAttr("disabled"),$(".postCruiseHotelStay").addClass("hide"),$("#divPostIncludedHotelNotRequired").addClass("hide"),$("#postCruiseHotelIncluded").removeAttr("disabled"),$("#postCruiseHotelIncluded").removeClass("disabled"),$("#postCruiseHotelNights").removeClass("disabled"),$("#postCruiseHotelNights").removeAttr("disabled"),$("#flight").hide(),$("#continueTopLinkFlights").hide(),$("#continueToFlights").hide(),$("#preCruiseHotelIncluded").removeAttr("aria-describedby"),
$("#postCruiseHotelIncluded").removeAttr("aria-describedby"),e||f||(b.prop("checked",!1),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),d=!1),e?($("#continueToDetails").hide(),$("#continueDetails").hide(),$("#buttonLoginAndBook").hide(),$(".continueToPreCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPreCruiseHotel").removeClass("hide")):f?($("#continueToDetails").hide(),
$("#continueDetails").hide(),$("#buttonLoginAndBook").hide(),$(".continueToPostCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPostCruiseHotel").removeClass("hide")):d?(b.prop("checked",!0),$("#continueToDetails").hide(),$("#continueDetails").hide(),$("#buttonLoginAndBook").hide(),$(".continueToTransportationInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToTransportation").removeClass("hide")):($("#continueToDetails").show(),$("#continueDetails").show(),
$("#buttonLoginAndBook").show(),this._addAriaDescribedElement(b,"transportationAvailableOtherAddons"),b.prop("disabled",!0),$("#divSelecetdTransportationNotRequired").addClass("hide"),$("#divTransportationAvailable").removeClass("hide")),$('[data-hook="continueToFlights"]').removeClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').addClass("btn-continue"));$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},_onDepartureCityKeyDown:function(a){""!=$("#departureCityTextWidget").val()&&
(this._removeError($("#departureCityTextWidget")),$(a.target).parent().removeClass("location-airport"))},_airportCheckbox:function(a){$("#airportServiceRequired").hide();$('[data-hook="destinationAirportCheckbox"]').removeClass("error");$('[data-hook="arrivalAirportCheckbox"]').removeClass("error")},_onDepartureLocationSelect:function(a,b){this.departureLocationCode=a.value;this.departureLocationName=$.trim(a.title)},_onDepartureCityBlur:function(a){var b=this.module.TranslationTexts;""!=$("#departureCityTextWidget").val()&&
this._removeError($("#departureCityTextWidget"));a=a.target.value.replace(/^\s+|\s+$/g,"");a.length&&(0==a.length?this._addError($("#departureCityTextWidget"),$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_DEPARTURE_CITY_REQUIRED)):this.ui.departureLocation.hasValidSelection()||this._addError($("#departureCityTextWidget"),$namespace.MessageUtil.prefixError(b.NO_DEPARTURE_CITY_ERROR_MESSAGE)))},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");
a.after('<label tabindex="-1" class="error no-outline error-space error-room-static" id="'+a.attr("id")+'_error">'+b+"</label>");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("id")+"_error").remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_resetFlightDateIfAnyInputError:function(){this.ui&&this.ui.departureDate&&this.ui.arrivalDate&&(this.ui.departureDate.hasClass("error")&&""!=
this.ui.departureDate.val()&&(this.ui.departureDate.datepicker("setDate",this.departDate),this._removeError($("#departureDateWidget")),$("#departureDateError").addClass("hide")),this.ui.arrivalDate.hasClass("error")&&""!=this.ui.arrivalDate.val()&&(this.ui.arrivalDate.datepicker("setDate",this.arrivalDate),this._removeError($("#arrivalDateWidget")),$("#arrivalDateError").addClass("hide")))},resize:function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1,b=this.ui.form.find('INPUT[id="departureDateWidget"]'),
d=this.ui.form.find('INPUT[id="arrivalDateWidget"]');b.prop("readonly",a);d.prop("readonly",a);b[0].onselectstart=a?d[0].onselectstart=function(){return!1}:d[0].onselectstart=null},_continueToFlights:function(){this.isFirstFormFieldFocusActive=!1;var a=$("#flightIncluded").is(":checked"),b=!1,d=!1,e=$("#preCruiseHotelIncluded"),f=$("#postCruiseHotelIncluded");e.is(":checked")&&e.is(":visible")&&(b=!0);f.is(":checked")&&f.is(":visible")&&(d=!0);$("#transportationIncluded").is(":checked");$("#departureCityTextWidget").val();
a&&this._validateFlightData()&&(b&&d?(e=this._validatePrePostCruiseHotel(!0,!0,$("#selectedPreCruiseHotelRoomsContainer"),$("#preCruiseHotelNights"),$("#preCruiseHotelRooms"),"#preHotelAdultsRoom","#preHotelChildrenRoom"),f=this._validatePrePostCruiseHotel(e,!0,$("#selectedPostCruiseHotelRoomsContainer"),$("#postCruiseHotelNights"),$("#postCruiseHotelRooms"),"#postHotelAdultsRoom","#postHotelChildrenRoom"),e&&f&&this._isFlightInclude(a,b,d)):b?this._validatePrePostCruiseHotel(!0,!0,$("#selectedPreCruiseHotelRoomsContainer"),
$("#preCruiseHotelNights"),$("#preCruiseHotelRooms"),"#preHotelAdultsRoom","#preHotelChildrenRoom")&&this._isFlightInclude(a,b,d):d?this._validatePrePostCruiseHotel(!0,!0,$("#selectedPostCruiseHotelRoomsContainer"),$("#postCruiseHotelNights"),$("#postCruiseHotelRooms"),"#postHotelAdultsRoom","#postHotelChildrenRoom")&&this._isFlightInclude(a,b,d):this._isFlightInclude(a,b,d))},_validateFlightData:function(){var a=!0,b=this.module.TranslationTexts,d=$("#departureCityTextWidget"),e=d.val();this._removeError(d);
$("#arrivalDateError").addClass("hide");$("#departureDateError").addClass("hide");""==e&&(this.scrollToErrorElement(d),this._addError(d,$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_DEPARTURE_CITY_REQUIRED)),a=!1);e.length&&!this.ui.departureLocation.hasValidSelection()&&(this._addError(d,$namespace.MessageUtil.prefixError(b.NO_DEPARTURE_CITY_ERROR_MESSAGE)),a=!1);var f=$("#arrivalDateWidget"),g=f.val();d=$("#departureDateWidget");e=d.val();var h=$namespace.DateUtil.isValidDateString(g,
this.localeDateFormat);""!=f.val()&&this._removeError(f);if(""==g)this._removeError(f),this.scrollToErrorElement(f),this._addError(f,$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_ARRIVAL_DATE_REQUIRED)),a=!1;else if(h){h=$namespace.DateUtil.getDateAsString(new Date(this.cruiseDepartureDate),this.localeDateFormat);var k=$namespace.DateUtil.addDaysToDate(new Date(h),-7);k=$namespace.DateUtil.getDateAsString(new Date(k),this.localeDateFormat);if(new Date(g)<new Date(k)||new Date(g)>new Date(h))this._addErrorWithFocus(f,
"arrivalDateError"),$("#arrivalDateError").removeClass("hide"),a=!1}else this._addError(f,$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_INVALID_ARRIVAL_DATE)),a=!1;f=$namespace.DateUtil.isValidDateString(e,this.localeDateFormat);""!=d.val()&&this._removeError(d);if(""==e)this.scrollToErrorElement(d),this._removeError(d),this._addError(d,$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_DEPARTURE_DATE_REQUIRED)),a=!1;else if(f){if(f=new Date(this.cruiseReturnDate),b=$namespace.DateUtil.getDateAsString(new Date(new Date(f)),
this.localeDateFormat),f=$namespace.DateUtil.addDaysToDate(new Date(f),7),f=$namespace.DateUtil.getDateAsString(new Date(f),this.localeDateFormat),""!=e&&new Date(e)<new Date(b)||new Date(e)>new Date(f))this._addErrorWithFocus(d,"departureDateError"),$("#departureDateError").removeClass("hide"),a=!1}else this._addError(d,$namespace.MessageUtil.prefixError(b.CRUISE_PACKAGE_ADDON_INVALID_DEPARTURE_DATE));d=$('[data-hook="destinationAirportCheckbox"]').is(":visible");e=$('[data-hook="arrivalAirportCheckbox"]').is(":visible");
d&&!$('[data-hook="destinationAirportCheckbox"]').is(":checked")&&($("#airportServiceRequired").show(),$('[data-hook="destinationAirportCheckbox"]').addClass("error"),this.isFirstFormFieldFocusActive=!0,this._addErrorWithFocus($('[data-hook="destinationAirportCheckbox"]'),"airportServiceRequired"),a&&$('[data-hook="destinationAirportCheckbox"]').first().focus(),a=!1);e&&!$('[data-hook="arrivalAirportCheckbox"]').is(":checked")&&($("#airportServiceRequired").show(),$('[data-hook="arrivalAirportCheckbox"]').addClass("error"),
this.isFirstFormFieldFocusActive=!0,this._addErrorWithFocus($('[data-hook="arrivalAirportCheckbox"]'),"airportServiceRequired"),a&&$('[data-hook="arrivalAirportCheckbox"]').first().focus(),a=!1);a||$('.accordion-button[aria-expanded="true"]').click();return a},_isFlightInclude:function(a,b,d){var e=$("#transportationIncluded").is(":checked"),f=null,g=null,h=null,k=this.cruiseDepartureDate,l=this.cruiseReturnDate,p=null,q=null,r=null,v=parseInt(this.numberOfActualChildren)+parseInt(this.numberOfInfants);
p=this.numberOfActualAdults+v;var n=this.cruiseEmbarkationCity,t=this.cruiseDisembarkationCity,u=$("#serviceClassWidget option:selected").val();$("#departureCityTextWidget").attr("lastSelectedValue");var w=this.numAvailableDestinationAirports;$("#departureCityTextWidget").val();var y=$("#numAvailableArrivalAirports").val();r=""!=this.departureLocationCode?this.departureLocationCode:$("#departureCityTextWidget").attr("default-value");this.SelectedDestinationAirportInfo=function(a){this.airportCode=
a};this.SelectedArrivalAirportInfo=function(a){this.arrivalAirportCode=a};var z=[];if(1<w)for(h=q=0;h<w;h++){var x="#destinationAirportCode_"+h;$(x).prop("checked")&&(z[q]=new this.SelectedDestinationAirportInfo($(x).val()),q++)}w=[];if(1<y)for(h=q=0;h<y;h++)x="#arrivalAirportCode_"+h,$(x).prop("checked")&&(w[q]=new this.SelectedArrivalAirportInfo($(x).val()),q++);this.InfantInfo=function(a,b){this.infantIndex=a;this.infantSeatFlag=b};y=[];for(q=0;q<p;q++)h="#flightPaxType_"+q,x=$("#flightPaxType_"+
q).val(),"#infantSeatFlag_"+q&&h&&"Infant"==x&&(h=$("#infantSeatFlag_"+q).val(),null!=h&&(y[q]=new this.InfantInfo(q,h)));q=this.ui.departureDate.val();p=this.ui.arrivalDate.val();q=$namespace.DateUtil.reformatDateString(q,this.localeDateFormat,this.defaultDateFormat);p=$namespace.DateUtil.reformatDateString(p,this.localeDateFormat,this.defaultDateFormat);this.FlightInfo=function(a,b,d,e,f){this.departureCityCode=a;this.serviceClass=b;this.infantInfos=d;this.selectedDestinationAirportInfos=e;this.selectedArrivalAirportInfos=
f};x=h=0;var B=[];if(b){h=$("#preCruiseHotelNights").val();x=$("#preCruiseHotelRooms").val();if(1==x)B.push({adults:parseInt(this.numberOfActualAdults),children:v});else for(f=1;f<=x;f++)B.push({adults:$("#preHotelAdultsRoom"+f).val(),children:$("#preHotelChildrenRoom"+f).val()});this.PreHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};f=new this.PreHotelInfo(x,h,B)}if(d){h=$("#postCruiseHotelNights").val();x=$("#postCruiseHotelRooms").val();B=[];if(1==x)B.push({adults:parseInt(this.numberOfActualAdults),
children:v});else for(g=1;g<=x;g++)B.push({adults:$("#postHotelAdultsRoom"+g).val(),children:$("#postHotelChildrenRoom"+g).val()});this.PostHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};g=new this.PostHotelInfo(x,h,B)}this.PrePostCruisePackageInfo=function(a,b,d,e,f,g,h,k,l,p,n,q,r){this.isFlightIncluded=a;this.isPreHotelIncluded=b;this.isPostHotelIncluded=d;this.flightInfo=f;this.preHotelInfo=g;this.postHotelInfo=h;this.isTransferIncluded=e;this.cruiseEmbarkationCity=
k;this.cruiseDisembarkationCity=l;this.cruiseDepartureDate=p;this.cruiseReturnDate=n;this.startDate=q;this.endDate=r};r=new this.FlightInfo(r,u,y,z,w);k=new this.PrePostCruisePackageInfo(a,b,d,e,r,f,g,n,t,k,l,p,q);a&&(this.eventAction="Include_Airfare",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));b&&(this.eventAction="Pre_Cruise_Hotel",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));d&&(this.eventAction="Post_Cruise_Hotel",
$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));e&&(this.eventAction="Transportation",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));$namespace.DomUtil.disableElement("dataContent",!0);a={cpao:"PERFORM_SUPER_PNR_SEARCH",superPNRSearchJson:JSON.stringify(k)};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",$.param(a),null,null,this.callbackPerformSuperPNRSearch($namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_POST_FLIGHT_RESULTS,
this.getGaCruisePackagePrefix()),null)},callbackPerformForUnselectedAddons:function(a){return function(b){if(this.message)self._showErrorModal(this);else{var d=function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act","cpao=REMOVE_ADDONS_PRODUCTS",null,"",function(){$namespace.Navigation.loadPage(_webLoc+"/h="+a)});$("input:checkbox:checked").prop("checked",!1);$(window).load(function(){$("input[type=checkbox]").removeAttr("checked");$(".select-widget").find("select").prop("selectedIndex",
0)})},e={cpao:"USER_CLICK_CANCEL"};if(b){if(b=function(){$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param(e),null,"",function(){f.hide();window.location.reload()})},this.responseText){document.body.style.overflow=null;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var f=new $namespace.Widgets.Confirm(this.responseText,d,b);f.show()}}else d()}}},_onContinueClick:function(a){a=$("#flightIncluded").is(":checked");var b=$("#preCruiseHotelIncluded").is(":checked"),d=$("#postCruiseHotelIncluded").is(":checked"),
e=$("#transportationIncluded").is(":checked");a&&this._isFlightInclude(a,b,d);a||b||d||e?(a&&(this.eventAction="Include_Airfare",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel)),b&&(this.eventAction="Pre_Cruise_Hotel",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel)),d&&(this.eventAction="Post_Cruise_Hotel",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel)),isTransferIncluded&&(this.eventAction=
"Transportation",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel)),a={cpao:"PERFORM_SUPER_PNR_SEARCH",superPNRSearchJson:+JSON.stringify({isFlightIncluded:a,isPreHotelIncluded:b,isPostHotelIncluded:d,isTransportationIncluded:e})},$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",$.param(a),null,null,function(a){},null)):($namespace.Analytics.trackEvent("CR_Package_add_ons_Continue","No_Package_add_ons",this.getGaCruisePackagePrefix()),"true"==
$("#superRetainLandComponents").val()?$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",$.param({cpao:"UNSELECTED_ADDONS"}),null,null,this.callbackPerformForUnselectedAddons($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS),null):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS))},_onPreCruiseHotelClick:function(){var a=$("#flightIncluded").prop("checked"),b=$("#transportationIncluded"),d=b.is(":checked"),
e=$("#preCruiseHotelIncluded").is(":checked"),f=$("#postCruiseHotelIncluded").is(":checked");this.removeTransportationError();e?($('[data-hook="continueToPreCruiseHotel"]').addClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').removeClass("btn-continue"),a?($("#preCruiseHotelNights").addClass("disabled"),$("#preCruiseHotelNights").attr("disabled",!0),this._onArrivalDateWidgetChange()):($(".preCruiseHotelStay").addClass("hide"),$("#continueToDetails").hide(),$("#continueDetails").hide(),
$("#buttonLoginAndBook").hide(),$(".continueToPreCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPreCruiseHotel").removeClass("hide"),$(".continueToPostCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPostCruiseHotel").addClass("hide"),$("#preCruiseHotelNights").removeClass("disabled"),$("#preCruiseHotelNights").removeAttr("disabled"),$("#divPreIncludedHotel").removeClass("hide"),$("#divPreIncludedHotelNotRequired").addClass("hide"),
a=new Date(this.ui.arrivalDate.val()),a=this.preCruiseHotelArrivalDate?new Date(this.preCruiseHotelArrivalDate):$namespace.DateUtil.addDaysToDate(a,-1),$("#preCruiseHotelCheckInDate").text($namespace.DateUtil.getDateAsString(a,this.localeDateFormat)),this.ui.arrivalDate.datepicker("setDate",a)),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),b.prop("checked",!0),b.prop("disabled",!1),$("#divSelecetdTransportationNotRequired").removeClass("hide"),
$("#divTransportationAvailable").addClass("hide")):($('[data-hook="continueToPreCruiseHotel"]').removeClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').addClass("btn-continue"),$(".divPreIncludedHotel").addClass("hide"),$("#preCruiseHotelNights").removeClass("disabled"),$("#preCruiseHotelNights").removeAttr("disabled"),$(".continueToPreCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPreCruiseHotel").addClass("hide"),a||f||(b.prop("checked",
!1),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),d=!1),a?($("#flight").addClass("displayBlock").show(),$("#continueToDetails").hide(),$("#continueDetails").hide(),$("#continueTopLinkFlights").show(),$("#continueToFlights").show(),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),$(".continueToPostCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),
$(".continueToPostCruiseHotel").addClass("hide")):f?($("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToPostCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPostCruiseHotel").removeClass("hide")):d?(b.prop("checked",!0),$("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToTransportationInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToTransportation").removeClass("hide")):($("#continueToDetails").show(),
$("#continueDetails").show(),$("#buttonLoginAndBook").show(),this._addAriaDescribedElement(b,"transportationAvailableOtherAddons"),b.prop("disabled",!0),$("#divSelecetdTransportationNotRequired").addClass("hide"),$("#divTransportationAvailable").removeClass("hide")));$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},_onPostCruiseHoteClick:function(){var a=$("#flightIncluded").prop("checked"),b=$("#transportationIncluded"),d=b.is(":checked"),e=$("#preCruiseHotelIncluded").is(":checked"),
f=$("#postCruiseHotelIncluded").is(":checked");this.removeTransportationError();f?($('[data-hook="continueToPostCruiseHotel"]').addClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').removeClass("btn-continue"),a||e||($("#continueToDetails").hide(),$("#continueDetails").hide(),$("#buttonLoginAndBook").hide(),$(".continueToPostCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPostCruiseHotel").removeClass("hide")),a?($("#postCruiseHotelNights").addClass("disabled"),
$("#postCruiseHotelNights").attr("disabled",!0),this._onDepartureDateWidgetChange()):($(".postCruiseHotelStay").addClass("hide"),$("#postCruiseHotelNights").removeClass("disabled"),$("#postCruiseHotelNights").removeAttr("disabled"),$("#divPostIncludedHotel").removeClass("hide"),$("#divPostIncludedHotelNotRequired").addClass("hide"),a=new Date(this.ui.departureDate.val()),a=this.postCruiseHotelDepartureDate?new Date(this.postCruiseHotelDepartureDate):$namespace.DateUtil.addDaysToDate(a,1),$("#postCruiseHotelCheckOutDate").text($namespace.DateUtil.getDateAsString(a,
this.localeDateFormat)),this.ui.departureDate.datepicker("setDate",a)),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),b.prop("checked",!0),b.prop("disabled",!1),$("#divSelecetdTransportationNotRequired").removeClass("hide"),$("#divTransportationAvailable").addClass("hide")):($('[data-hook="continueToPostCruiseHotel"]').removeClass("btn-continue"),$('[data-hook="continue_packageAddons_btn"]').addClass("btn-continue"),
$(".divPostIncludedHotel").addClass("hide"),$("#postCruiseHotelNights").removeClass("disabled"),$("#postCruiseHotelNights").removeAttr("disabled"),$(".continueToPostCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPostCruiseHotel").addClass("hide"),e||a||($("#transportationIncluded").prop("checked",!1),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),d=!1),a?($("#flight").addClass("displayBlock").show(),
$("#continueToDetails").hide(),$("#continueDetails").hide(),$("#continueTopLinkFlights").show(),$("#continueToFlights").show(),$(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),$(".continueToPreCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPreCruiseHotel").addClass("hide")):e?($("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToPreCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),
$(".continueToPreCruiseHotel").removeClass("hide")):d?(b.prop("checked",!0),$("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToTransportationInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToTransportation").removeClass("hide")):($("#continueToDetails").show(),$("#continueDetails").show(),$("#buttonLoginAndBook").show(),this._addAriaDescribedElement(b,"transportationAvailableOtherAddons"),b.prop("disabled",!0),$("#divSelecetdTransportationNotRequired").addClass("hide"),
$("#divTransportationAvailable").removeClass("hide")));$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},_onTransportationClick:function(a){a=$("#transportationIncluded").is(":checked");var b=$("#flightIncluded").is(":checked"),d=$("#preCruiseHotelIncluded").is(":checked"),e=$("#postCruiseHotelIncluded").is(":checked");this.removeTransportationError();a?b||d||e||($("#continueToDetails").show(),$("#continueDetails").hide(),$("#buttonLoginAndBook").show(),$(".continueToTransportationInfoBar").addClass("hide").addClass("info-bar-links-right")):
($(".continueToTransportationInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToTransportation").addClass("hide"),$("#divSelecetdTransportationNotRequired").addClass("hide"),b?($("#flight").addClass("displayBlock").show(),$("#continueToDetails").hide(),$("#continueDetails").hide(),$("#continueTopLinkFlights").show(),$("#continueToFlights").show(),$(".continueToPreCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPreCruiseHotel").addClass("hide"),
$(".continueToPostCruiseHotelInfoBar").removeClass("info-bar-links-right").addClass("hide"),$(".continueToPostCruiseHotel").addClass("hide")):d?($("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToPreCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),$(".continueToPreCruiseHotel").removeClass("hide")):e?($("#continueToDetails").hide(),$("#continueDetails").hide(),$(".continueToPostCruiseHotelInfoBar").removeClass("hide").addClass("info-bar-links-right"),
$(".continueToPostCruiseHotel").removeClass("hide")):($("#continueToDetails").show(),$("#continueDetails").show(),$("#buttonLoginAndBook").show()));$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},removeTransportationError:function(){$("#transportationIncluded").removeClass("error");$("#transportationIncluded").removeAttr("aria-describedby");$("#transportationIncludedError").remove();$(window).trigger("resize")},_onContinueToTransportationClick:function(a){a=this.module.TranslationTexts;
var b=$("#flightIncluded").is(":checked"),d=$("#preCruiseHotelIncluded").is(":checked"),e=$("#postCruiseHotelIncluded").is(":checked"),f=$("#transportationIncluded").is(":checked");this.removeTransportationError();!f||b||d||e||($("#transportationIncluded").addClass("error"),$("#transportationIncludedLabel").after("<label id='transportationIncludedError' class='error no-outline checkbox-error'>"+a.TRANSPORTATION_CHECK_ERROR_MESSAGE+"</label>"),$("#transportationIncluded").attr("aria-describedby","transportationIncludedError"),
$("#transportationIncluded").focus(),$(window).trigger("resize"))},_onPreCruiseHotelNightChange:function(a){this._removeError($("#preCruiseHotelNights"));var b=new Date($(a.currentTarget).data("arrival-date"));a=$(a.currentTarget).val();b.setDate(b.getDate()-a);this.ui.arrivalDate.datepicker("setDate",b);$("#preCruiseHotelCheckInDate").text($namespace.DateUtil.getDateAsString(b,this.localeDateFormat));$("#preCruiseHotelNoOfNights").text(a);this.preCruiseHotelArrivalDate=""},_onPreCruiseHotelRoomChange:function(a){this._removeError($("#preCruiseHotelRooms"));
a=$("#preCruiseHotelRooms").val();var b=$("#preCruiseHotelRooms").data("component-type");1<a?($("#selectedPreCruiseHotelRoomsContainer").removeClass("hide"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act","cpao=LOAD_CRUISE_HOTEL_ROOM_INFORMATION&hotelRooms="+a+("&componentType="+b),null,"selectedPreCruiseHotelRoomsContainer",function(){$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},null)):$("#selectedPreCruiseHotelRoomsContainer").addClass("hide")},
_onPostCruiseHotelNightChange:function(a){var b=new Date($(a.currentTarget).data("departure-date"));a=$(a.currentTarget).val();var d=parseInt(864E5*a,10);b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);b=new Date(b.getTime()+d);this.ui.departureDate.datepicker("setDate",b);$("#postCruiseHotelCheckOutDate").text($namespace.DateUtil.getDateAsString(b,this.localeDateFormat));$("#postCruiseHotelNoOfNights").text(a);this.postCruiseHotelDepartureDate=""},_addAriaDescribedElement:function(a,
b){$(a).attr("aria-describedby",b)},_onPostCruiseHotelRoomChange:function(a){this._removeError($("#postCruiseHotelRooms"));a=$("#postCruiseHotelRooms").val();var b=$("#postCruiseHotelRooms").data("component-type");1<a?($("#selectedPostCruiseHotelRoomsContainer").removeClass("hide"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act","cpao=LOAD_CRUISE_HOTEL_ROOM_INFORMATION&hotelRooms="+a+("&componentType="+b),null,"selectedPostCruiseHotelRoomsContainer",function(){$(window).trigger("resize");
$namespace.TabOrder.updatePageTabOrder()},null)):$("#selectedPostCruiseHotelRoomsContainer").addClass("hide")},_addPrePostError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.append('<label tabindex="-1" class="error no-outline error-space error-room-static" id="'+a.attr("id")+'_error">'+b+"</label>");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_validatePrePostCruiseHotel:function(a,b,d,e,f,g,h){var k=!0,l=0,p=0,q=$("#preCruiseHotelIncluded").is(":checked"),
r=$("#postCruiseHotelIncluded").is(":checked");var v=parseInt(this.numberOfActualChildren)+parseInt(this.numberOfInfants);var n=parseInt(this.numberOfActualAdults)+parseInt(v);v=e.val();var t=f.val();if(1<t)for(var u=1;u<=t;u++){var w=parseInt($(g+u).val()),y=parseInt($(h+u).val());l+=parseInt(w);p+=parseInt(y)}7<v&&(this.isFirstFormFieldFocusActive=!1,g=this.module.TranslationTexts,this._removeError(e),this._addError(e,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_MAX_NUMBER_OF_NIGHTS)),
k=!1);4<t&&(this.isFirstFormFieldFocusActive=!1,g=this.module.TranslationTexts,this._removeError(f),this._addError(f,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_MAX_NUMBER_OF_ROOMS)),k=!1);0==v&&1<t&&n!=l+p?(this.isFirstFormFieldFocusActive=!1,g=this.module.TranslationTexts,this._removeError(d),this._removeError(d.find("label")),this._addError(e,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_NUMBER_OF_NIGHTS_IS_REQUIRED)),this._addPrePostError(d,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_NUMBER_OF_STATEROOMS_DOES_NOT_MATCH_THE_NUMBER_OF_TRAVELERS_IN_THE_HOTEL)),
this._addErrorWithFoucsForGroup(d.find("select"),d.find("select").first()),k=!1):0<v&&1<t&&n!=l+p?(g=this.module.TranslationTexts,this._removeError(d.find("label")),this._removeError(d),this._addPrePostError(d,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_NUMBER_OF_STATEROOMS_DOES_NOT_MATCH_THE_NUMBER_OF_TRAVELERS_IN_THE_HOTEL)),q&&r&&a&&b?this.isFirstFormFieldFocusActive=!1:q&&r&&a&&!b?this.isFirstFormFieldFocusActive=!1:q&&!r&&a?this.isFirstFormFieldFocusActive=!1:!q&&r&&a&&(this.isFirstFormFieldFocusActive=
!1),this._addErrorWithFoucsForGroup(d,d.find("select").first()),k=!1):0==v&&(g=this.module.TranslationTexts,this._removeError(e),this._removeError(d),this.isFirstFormFieldFocusActive=!1,this._addError(e,$namespace.MessageUtil.prefixError(g.CRUISE_PACKAGE_ADDON_NUMBER_OF_NIGHTS_IS_REQUIRED)),k=!1);k||$('.accordion-button[aria-expanded="true"]').click();return k},_onContinueToPreCruiseHotel:function(a){this._removeError($("#preCruiseHotelNights"));this._removeError($("#postCruiseHotelNights"));var b=
$("#preCruiseHotelNights"),d=$("#preCruiseHotelRooms");a=$("#selectedPreCruiseHotelRoomsContainer");var e=!0,f=this._validatePrePostCruiseHotel(e,!0,a,b,d,"#preHotelAdultsRoom","#preHotelChildrenRoom");a=parseInt(this.numberOfActualChildren)+parseInt(this.numberOfInfants);if(this.isPostHotelSelected()){e=$("#postCruiseHotelNights");var g=$("#postCruiseHotelRooms"),h=$("#selectedPostCruiseHotelRoomsContainer");e=this._validatePrePostCruiseHotel(f,!0,h,e,g,"#postHotelAdultsRoom","#postHotelChildrenRoom")}if(f&&
e){f=this.cruiseDepartureDate;e=this.cruiseReturnDate;g=this.cruiseEmbarkationCity;h=this.cruiseDisembarkationCity;b=b.val();d=d.val();var k=[];if(1==d)k.push({adults:parseInt(this.numberOfActualAdults),children:a});else for(var l=1;l<=d;l++)k.push({adults:$("#preHotelAdultsRoom"+l).val(),children:$("#preHotelChildrenRoom"+l).val()});this.PreHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};l=new this.PreHotelInfo(d,b,k);d=null;if(this.isPostHotelSelected()){b=
$("#postCruiseHotelNights").val();d=$("#postCruiseHotelRooms").val();k=[];if(1==d)k.push({adults:parseInt(this.numberOfActualAdults),children:a});else for(a=1;a<=d;a++)k.push({adults:$("#postHotelAdultsRoom"+a).val(),children:$("#postHotelChildrenRoom"+a).val()});this.PostHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};d=new this.PostHotelInfo(d,b,k)}this.PrePostCruisePackageInfo=function(a,b,d,e,f,g,h,k,l,z,x,B,G){this.isFlightIncluded=a;this.isPreHotelIncluded=
b;this.isPostHotelIncluded=d;this.flightInfo=f;this.preHotelInfo=g;this.postHotelInfo=h;this.isTransferIncluded=e;this.cruiseEmbarkationCity=k;this.cruiseDisembarkationCity=l;this.cruiseDepartureDate=z;this.cruiseReturnDate=x;this.startDate=B;this.endDate=G};a=new this.PrePostCruisePackageInfo(!1,!0,this.isPostHotelSelected(),this.isTransportationSelected(),null,l,d,g,h,f,e,null,null);this.eventAction="Pre_Cruise_Hotel";$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel);
this.isPostHotelSelected()&&(this.eventAction="Post_Cruise_Hotel",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));this.isTransportationSelected()&&(this.eventAction="Transportation",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));a={cpao:"PERFORM_SUPER_PNR_SEARCH",superPNRSearchJson:JSON.stringify(a)};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",
$.param(a),null,null,this.callbackPerformSuperPNRSearch($namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_HOTEL_RESULTS,this.getGaCruisePackagePrefix()),null)}},_onContinueToPostCruiseHotel:function(){this._removeError($("#postCruiseHotelNights"));var a=$("#postCruiseHotelNights"),b=$("#postCruiseHotelRooms"),d=$("#preCruiseHotelNights"),e=$("#preCruiseHotelRooms"),f=$("#selectedPostCruiseHotelRoomsContainer"),g=parseInt(this.numberOfActualChildren)+parseInt(this.numberOfInfants);if(this._validatePrePostCruiseHotel(!0,
!0,f,a,b,"#postHotelAdultsRoom","#postHotelChildrenRoom")){a=this.cruiseDepartureDate;b=this.cruiseReturnDate;f=this.cruiseEmbarkationCity;var h=this.cruiseDisembarkationCity;d=d.val();var k=e.val(),l=[];if(1==k)l.push({adults:parseInt(this.numberOfActualAdults),children:g});else for(var p=1;p<=k;p++)l.push({adults:$("#preHotelAdultsRoom"+p).val(),children:$("#preHotelChildrenRoom"+p).val()});this.PreHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};e=new this.PreHotelInfo(k,
d,l);d=null;if(this.isPostHotelSelected()){d=$("#postCruiseHotelNights").val();k=$("#postCruiseHotelRooms").val();l=[];if(1==k)l.push({adults:parseInt(this.numberOfActualAdults),children:g});else for(p=1;p<=k;p++)l.push({adults:$("#postHotelAdultsRoom"+p).val(),children:$("#postHotelChildrenRoom"+p).val()});this.PostHotelInfo=function(a,b,d){this.numberOfRooms=a;this.numberOfNights=b;this.roomInfos=d};d=new this.PostHotelInfo(k,d,l)}this.PrePostCruisePackageInfo=function(a,b,d,e,f,g,h,k,l,p,B,G,H){this.isFlightIncluded=
a;this.isPreHotelIncluded=b;this.isPostHotelIncluded=d;this.flightInfo=f;this.preHotelInfo=g;this.postHotelInfo=h;this.isTransferIncluded=e;this.cruiseEmbarkationCity=k;this.cruiseDisembarkationCity=l;this.cruiseDepartureDate=p;this.cruiseReturnDate=B;this.startDate=G;this.endDate=H};g=new this.PrePostCruisePackageInfo(!1,!1,this.isPostHotelSelected(),this.isTransportationSelected(),null,e,d,f,h,a,b,null,null);this.isPostHotelSelected()&&(this.eventAction="Post_Cruise_Hotel",$namespace.Analytics.trackEvent(this.eventCategory,
this.eventAction,this.eventLabel));this.isTransportationSelected()&&(this.eventAction="Transportation",$namespace.Analytics.trackEvent(this.eventCategory,this.eventAction,this.eventLabel));g={cpao:"PERFORM_SUPER_PNR_SEARCH",superPNRSearchJson:JSON.stringify(g)};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePackageAddons.act",$.param(g),null,null,this.callbackPerformSuperPNRSearch($namespace.PageHistoryConstants.HISTORY_CRUISE_POST_HOTEL_RESULTS,
this.getGaCruisePackagePrefix()),null)}},callbackPerformSuperPNRSearch:function(a,b){var d=this;return function(e,f,g,h,k,l,p,q,r){if(this.message)d._showErrorModal(this);else{var v=$("#flightIncluded").prop("checked"),n=$("#transportationIncluded").is(":checked"),t=$("#preCruiseHotelIncluded").is(":checked"),u=$("#postCruiseHotelIncluded").is(":checked"),w=function(a){var d="";v&&(d="Flights");t&&(d=""!=d?d+"_Pre-Cruise-Hotel":"Pre-Cruise-Hotel");u&&(d=""!=d?d+"_Post-Cruise-Hotel":"Post-Cruise-Hotel");
n&&(d=""!=d?d+"_Transportation":"Transportation");$namespace.Analytics.trackEvent(a,d,b)},y=function(){w("CR_Package_add_ons_Continue");$namespace.DomUtil.setElementLoadingMask(!0,1,!1);$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param({cpao:"AFTER_PERFORM_SUPER_PNR_SEARCH"}),null,"",function(){g&&!h&&(r=g);r?$namespace.Navigation.loadPage(_webLoc+"/h="+r):$namespace.Navigation.loadPage(_webLoc+"/h="+a)})},z={cpao:"USER_CLICK_CANCEL",preCruiseFlightAvailable:k,preCruiseHotelAvailable:l,
postCruiseHotelAvailable:p,cruiseTransportAvailable:q};if(f){if(y=function(){$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param({cpao:"CHECK_PRICE_CHANGE",beforePriceChange:g,afterPriceChange:h,preCruiseFlightAvailable:k,preCruiseHotelAvailable:l,postCruiseHotelAvailable:p,cruiseTransportAvailable:q}),null,"",function(){var b=function(){w("CR_Package_add_ons_Continue");$namespace.DomUtil.setElementLoadingMask(!0,1,!1);$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param({cpao:"AFTER_PERFORM_SUPER_PNR_SEARCH"}),
null,"",function(){r?$namespace.Navigation.loadPage(_webLoc+"/h="+r):$namespace.Navigation.loadPage(_webLoc+"/h="+a)})},d=function(){w("CR_Package_add_ons_No_Thanks");$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param(z),null,"",function(){e.hide();window.location.reload()})};if(this.responseText&&this.pageContent){document.body.style.overflow=null;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var e=new $namespace.Widgets.Confirm(this.responseText,b,d);e.show()}else b()})},
e=function(){$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param(z),null,"",function(){x.hide();window.location.reload()})},this.responseText){document.body.style.overflow=null;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var x=new $namespace.Widgets.Confirm(this.responseText,y,e);x.show()}}else e?(e=function(){w("CR_Package_add_ons_No_Thanks");$namespace.AjaxUtil.makeAjaxCall("cruisePackageAddons.act",$.param(z),null,"",function(){x.hide();window.location.reload()})},this.responseText&&
(document.body.style.overflow=null,$namespace.DomUtil.setElementLoadingMask(!1,null,!1),x=new $namespace.Widgets.Confirm(this.responseText,y,e),x.show())):y()}}},_onPreCruiseHotelChange:function(a){this._removeError($("#preCruiseHotelNights"));a=$("#selectedPreCruiseHotelRoomsContainer");this._removeError(a);this._removeError(a.find("select"))},_onPostCruiseHotelChange:function(a){this._removeError($("#postCruiseHotelNights"));a=$("#selectedPostCruiseHotelRoomsContainer");this._removeError(a);this._removeError(a.find("select"))},
_addErrorWithFoucsForGroup:function(a,b){a.find("select").addClass("error");a.find("select").attr("aria-describedby",a.attr("id")+"_error");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,b.focus())},scrollToErrorElement:function(a){var b=$(window),d=a.offset().top;a=a.height();var e=b.height();b.scrollTop(d-(e-a)/2)},trackGA:function(){var a="/cr/booking/bookingWidget/packageAddons"+this.getGaCruisePackagePrefix();$namespace.Analytics.track({vendor:"adobe",type:"pageView",
events:"event1",eVar1:"Package Add-ons - Cruises | Costco Travel",eVar2:"cruise",eVar34:$(this.el).data("destination"),eVar74:a});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a})},getGaCruisePackagePrefix:function(){var a=$(this.el);return"/"+a.data("destination")+"/"+a.data("line-name")+"/"+a.data("ship-name")+"/"+a.data("departure-date")},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Package_add_ons_Cruise_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Package_add_ons_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Package_add_ons_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Package_add_ons_Flights","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Package_add_ons_Hotel",
"Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Package_add_ons_Transportation","Click","Expand")},_onSelectDropDownFocusIn:function(a){a.preventDefault();$(a.currentTarget)},_onSelectDropDownFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onSelectDropDownClick:function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},
_showErrorModal:function(a){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.CruisePackageAddonsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};
var POSTAL_CODE_REGEX=/^[a-zA-Z][0-9][a-zA-Z](-| |)?[0-9][a-zA-Z][0-9]$/g,POSTAL_CODE_HTML_PATTERN="[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]",ZIPCODE_HTML_PATTERN="\\d*",ZIPCODE_REGEX=/[0-9]{5}/,STREET_REGEX=/[a-zA-Z0-9\/\.,'\-#\s]/g,STREET_NOT_ALLOWED_REGEX=/[!@$%^&*()_+=\[\]{};:"\\|<>?]/g,CITY_REGEX=/[a-zA-Z\.'\-\s]/g,CITY_NOT_ALLOWED_REGEX=/[!@#$%^&*()_+=\[\]{};:"\\|,<>\/?]/g,CREDIT_CARD_HOLDER_NAME_REGEX=/[a-zA-Z\.'\-\s]/g,CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX=/[!@#$%^&*()_+=\[\]{};:"\\|,<>\/?]/g,
US_DATE_REGEX=/[0-9][0-9]?\/[0-9][0-9]?\/[0-9][0-9][0-9][0-9]/g,CA_DATE_REGEX=/[0-9][0-9][0-9][0-9]\-[0-9][0-9]?\-[0-9][0-9]?/g,CREDIT_CARD_NUMBER_REGEX=/^[0-9]*$/g,CREDIT_CARD_EXPIRATION_MONTH_REGEX=/[0-9]{1,2}/g,CREDIT_CARD_EXPIRATION_YEAR_REGEX=/[0-9]{4}/g,_previousDepositAmount,INVALID_DATE="Invalid Date",CA_FR_CURRENCY_FORMAT_REGEX=/^(\d{1,3}[\s](\d{3}[\s])*\d{3}|\d+)([,]\d{1,2})?$/g,US_EN_CURRENCY_FORMAT_REGEX=/^([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(.[0-9][0-9])?$/g,PHONE_EXTENSION_NOT_ALLOWED_REGEX=
/[a-zA-Z\-\s\.,'#\/!@$%^&*()_+=\[\]{};:"\\|<>?]/g,CREDIT_CARD_MAX_LENGTH=16;$namespace.View=$namespace.View||{};
$namespace.View.PaymentOptionsView=Backbone.View.extend({scheduleDate_0:null,scheduleDate_1:null,scheduleDate_2:null,el:"#paymentOptions",ui:{chatLink:null,form:null},isFirstFormFieldFocusActive:!1,events:{'click input[data-hook="showHidePayment"]':"_showHidePayment",'click a[data-hook="continue_button"]':"_onContinueClick","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click button[data-hook="applyPromotionCode"]':"_onApplyPromotionCode",'keyup input[data-hook="promotionCode"]':"_onPromotionCodeChange",
'change select[data-hook="changeDepositAmountBillingCountry"]':"_onCountryChange",'change select[data-hook="changeScheduleAmountBillingCountry"]':"_onScheduleCountryChange",'keypress input[data-hook="checkPersonName"]':"_checkCardholderName",'keyup input[data-hook="checkPersonName"]':"_displayCreditCardInfo",'blur input[data-hook="checkPersonName"]':"_displayCreditCardInfo",'change input[data-hook="checkPersonName"]':"_validatePaymentCardAutofill",'keypress input[data-hook="checkCardNumber"]':"_checkCreditCardNumber",
'keyup input[data-hook="checkCardNumber"]':"_displayCreditCardInfo",'blur input[data-hook="checkCardNumber"]':"_displayCreditCardInfo",'change input[data-hook="checkCardNumber"]':"_validateCreditCardNumber",'input input[data-hook="checkSecurityCode"]':"_checkSecurityCode",'keypress input[data-hook="depositBillingStreet"]':"_checkBillingStreet",'keyup input[data-hook="depositBillingStreet"]':"_displayBillingAddress",'blur input[data-hook="depositBillingStreet"]':"_displayBillingAddress",'change input[data-hook="depositBillingStreet"]':"_validatePaymentCardAutofill",
'keypress input[data-hook="shippingStreet"]':"_checkShippingStreet",'change input[data-hook="shippingStreet"]':"_validateShopCardAutofill",'keypress input[data-hook="depositBillingCity"]':"_checkBillingCity",'keyup input[data-hook="depositBillingCity"]':"_displayBillingAddress",'blur input[data-hook="depositBillingCity"]':"_displayBillingAddress",'change input[data-hook="depositBillingCity"]':"_validatePaymentCardAutofill",'keypress input[data-hook="shippingCity"]':"_checkBillingCity",'change input[data-hook="shippingCity"]':"_validateShopCardAutofill",
'keypress input[data-hook="depositBillingZipcode"]':"_checkZipCode",'keyup input[data-hook="depositBillingZipcode"]':"_displayBillingAddress",'blur input[data-hook="depositBillingZipcode"]':"_displayBillingAddress",'change input[data-hook="depositBillingZipcode"]':"_validatePaymentCardAutofill",'keypress input[data-hook="shopCardZipcode"]':"_checkZipCode",'change input[data-hook="shopCardZipcode"]':"_validateShopCardAutofill",'change select[data-hook="changeFullPaymentBillingState"]':"_onFullPaymentStateChange",
'change select[data-hook="changeDepositBillingState"]':"_onStateChange",'change select[data-hook="changeDepositBillingMonth"]':"_onMonthChange",'change select[data-hook="changeDepositBillingYear"]':"_onYearChange",'blur input[data-hook="validateAmount"]':"_onBlurAmount",'click input[data-hook="useSameCreditCardAsDeposit"]':"_checkUseSameCreditCardAsDeposit",'click input[data-hook="useSameBillingAddressAsDeposit"]':"_checkUseSameBillingAddressAsDeposit",'click input[data-hook="selectShippingAddressAsBilling"]':"_checkUseSameBillingAddressAsFullPayment",
'click a[data-tooltip="cvv_card_help_tooltip"]':"_showCVVModal",'keydown input[data-hook="checkPrimaryPhone"]':"_onKeyPressPrimaryPhone",'keydown input[data-hook="checkAlternatePhone"]':"_onKeyPressAlternatePhone",'keydown input[data-hook="checkEmail"]':"_validateEmail",'click button[data-hook="addAnotherCard"]':"_addAnotherCard",'blur input[data-hook="validateScheduleAmount"]':"_onScheduleAmountChanged",'click button[data-hook="removePaymentCard"]':"_removeCreditCard",'change select[data-hook="changeShippingAddressCountry"]':"_onShippingCountryChange",
'click input[data-hook="sameAsBillingAddress_shipping"]':"_showHideBillingAddressForShipping",'change select[data-hook="changeShippingAddressState"]':"_onShippingAddressStateChange",'click input[data-hook="checkConfirmCashCardShippingAddress"]':"_checkConfirmCashCardShippingAddress",'change select[data-hook="changeSurveyQuestionOptions"]':"chooseSurveyOption",'change input[data-hook="creditCardScheduledDate"]':"_onScheduleDateChange",'change input[data-hook="checkAlternatePhone"]':"_onMemberDetailsAutoFill",
'change input[data-hook="checkPrimaryPhone"]':"_onMemberDetailsAutoFill"},initialize:function(a){a=$.extend({},a);this.controller=a.controller;this.module=a.module;this.numberOfCreditCardsForScheduledPayment=a.numberOfCreditCardsForScheduledPayment;this.numberOfCreditCardsForFullPayment=a.numberOfCreditCardsForFullPayment;this.isSchedulePayment=a.isSchedulePayment;this.maxCreditCards=a.maxCreditCards;this.grossAmount=a.grossAmount;this.depositAmount=a.depositAmount;this.creditCardsAmount=a.creditCardsAmount;
this.numberOfCreditCards=a.numberOfCreditCards;this.creditCardsAmount=a.creditCardsAmount;this.numberOfCreditCards=a.numberOfCreditCards;this.fromConfirmPaymentPage=a.fromConfirmPaymentPage;this.email=a.email;this.isPaymentWithinDueDays=a.isPaymentWithinDueDays;this.surveyDefinitionId=a.surveyDefinitionId;this.scheduledPaymentDate=a.scheduledPaymentDate;this.maxCreditCardExpiryYear=a.maxCreditCardExpiryYear;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.schedulePaymentBlock=$("#schedule-payment-block");
this.addCreditCardButton=$("#schedule-payment-add-card-btn");this.addCreditCardButton.attr("disabled","disabled");this.loadDefaultPaymentInfo();this.loadCountryState();this.loadInititalSchedulePaymentCardCountryState();this.formatPhoneOnFormLoad("primary_phone");this.formatPhoneOnFormLoad("alternate_phone");utils.updateLiveContainer();var b=this;this.ui.form=$("#paymentOptions");this.scheduleDate_0=$("#creditCardScheduledDate_schedulePayment_0");this.scheduleDate_1=$("#creditCardScheduledDate_schedulePayment_1");
this.scheduleDate_2=$("#creditCardScheduledDate_schedulePayment_2");this.defaultDateFormat=$namespace.DateUtil.DEFAULT_DATE_FORMAT;this.localeDateFormat=$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM");this.phoneFormat=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.destination=$(this.el).data("destination");
this.city=$(this.el).data("city");this.packageId=$(this.el).data("package-id");this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var d=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewPaymentOptions/"+d.destination+"/"+d.city+"/"+d.packageId)})}a=function(a,d){b.validateDates()};var e=this.ui.form.find("#creditCardScheduledDate_schedulePayment_0","#creditCardScheduledDate_schedulePayment_1",
"#creditCardScheduledDate_schedulePayment_2");this.floatPlaceholders=[];e.each(function(a,d){b.floatPlaceholders.push(new $namespace.FloatPlaceholder(d))});var f=this.ui.form.find("#departureCityTextWidget");this.floatPlaceholders.push(new $namespace.FloatPlaceholder(f,!0));e.on("blur",function(){$(this).datepicker("widget").is(":visible")||b.validateDates()}).on("click",function(){this.readOnly&&(window._datepickerTriggerElement=this,$(this).parent().find(".ui-datepicker-trigger").trigger("click"),
$namespace.DomUtil.bounceElementFocus(this))}).datepicker("widget").addClass("ctc-ui ctc-ui-datepicker custom-datepicker-crossmark");$(this.el).on("keydown",".ui-datepicker-trigger",function(a){if($("#ui-datepicker-div").is(":visible")){if(13==a.which)$(".ui-datepicker-days-cell-over").trigger("click");else{var b=$(a.target).next();a.target=b[0];b.trigger(a)}a.preventDefault()}});$("#paymentOptions div.date-widget").addClass("ctc-jqui");$(window).on("resize orientationchange",function(){var a=$namespace.SearchWidgetsModule.getWindowDimensions();
if(b.win.height!=a.height||b.win.width!=a.width)b.ui.form.find("#creditCardScheduledDate_schedulePayment_0").datepicker("hide"),b.ui.form.find("#creditCardScheduledDate_schedulePayment_1").datepicker("hide"),b.ui.form.find("#creditCardScheduledDate_schedulePayment_2").datepicker("hide"),b.win=a;b.resize();$namespace.TabOrder.updatePageTabOrder();this.initialized=!0});e=new Date;f=$("#creditCardScheduledDate_schedulePayment_0").val();this.ui.scheduledDate_0=this.ui.form.find("#creditCardScheduledDate_schedulePayment_0").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,
"yy").toLowerCase(),minDate:e,maxDate:f,beforeShowDay:function(a){var b=($("#creditCardScheduledDate_schedulePayment_0").datepicker("getDate"),"");a=$namespace.SearchWidgetsModule.getAccessibleDateLabel(a);var d=$namespace.DateUtil.enhanceDateStringReadability(a);return[!0,b,a,d]},inline:!0,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:$namespace.Config.DAY_SHORT_NAMES,monthNames:$namespace.Config.MONTH_NAMES,onClose:a,showOn:"button",showAnim:"",buttonImage:$namespace.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",
buttonImageOnly:!1,buttonText:$namespace.PaymentOptionsModule.TranslationTexts.SCHEDULE_DATE_CALENDAR_LABEL,prevText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});this.ui.scheduledDate_1=this.ui.form.find("#creditCardScheduledDate_schedulePayment_1").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),minDate:e,maxDate:f,beforeShowDay:function(a){var b=($("#creditCardScheduledDate_schedulePayment_1").datepicker("getDate"),
"");a=$namespace.SearchWidgetsModule.getAccessibleDateLabel(a);var d=$namespace.DateUtil.enhanceDateStringReadability(a);return[!0,b,a,d]},inline:!0,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:$namespace.Config.DAY_SHORT_NAMES,monthNames:$namespace.Config.MONTH_NAMES,onClose:a,showOn:"button",showAnim:"",buttonImage:$namespace.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:$namespace.PaymentOptionsModule.TranslationTexts.SCHEDULE_DATE_CALENDAR_LABEL,prevText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,
nextText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});this.ui.scheduledDate_2=this.ui.form.find("#creditCardScheduledDate_schedulePayment_2").datepicker({dateFormat:this.localeDateFormat.replace(/yyyy/,"yy").toLowerCase(),minDate:e,maxDate:f,beforeShowDay:function(a){var b=($("#creditCardScheduledDate_schedulePayment_2").datepicker("getDate"),"");a=$namespace.SearchWidgetsModule.getAccessibleDateLabel(a);var d=$namespace.DateUtil.enhanceDateStringReadability(a);return[!0,
b,a,d]},inline:!0,numberOfMonths:[2,1],autoSize:!1,dayNamesMin:$namespace.Config.DAY_SHORT_NAMES,monthNames:$namespace.Config.MONTH_NAMES,onClose:a,showOn:"button",showAnim:"",buttonImage:$namespace.Configuration.webLoc+"/shared/images/svg/svg-calendar.svg",buttonImageOnly:!1,buttonText:$namespace.PaymentOptionsModule.TranslationTexts.SCHEDULE_DATE_CALENDAR_LABEL,prevText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_PREV_BUTTON,nextText:$namespace.SearchWidgetsModule.TranslationTexts.DATE_PICKER_NEXT_BUTTON});
$(".addPromotionCode").on("keypress keyup blur",function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)});$(".creditCardHolderName").on("keypress keyup blur",function(a){return $namespace.Validation.isPersonNameKeyCode(a)});$(".creditCardNumber").on("keypress keyup blur",function(a){return $namespace.Validation.checkNumericKeyCode(a)});$(".creditCardCheckSecurityCode").on("keypress keyup blur",function(a){return $namespace.Validation.checkNumericKeyCode(a)});$(".depositBillingStreet").on("keypress keyup blur",
function(a){return $namespace.Validation.isStreetAddressKeyCode(a)});$(".depositBillingCity").on("keypress keyup blur",function(a){return $namespace.Validation.isCityNameKeyCode(a)});$(".paymentOptionsSelectDropdown").on("click focusin focusout",this._onDropDownSelect);$(".depositBillingZipcode").on("keypress keyup blur",function(a){return 5==$(this).attr("maxlength")?$namespace.Validation.checkNumericKeyCode(a):$namespace.Validation.isAlphaNumericKeyCode(a)||32==a.key});$(".shopCardZipcode").on("keypress keyup blur",
function(a){return $("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?$namespace.Validation.isAlphaNumericKeyCode(a)||32==a.keyCode:$namespace.Validation.checkNumericKeyCode(a)});$(".primary_phone").on("keypress keyup blur",function(a){return $namespace.Validation.checkNumericKeyCode(a)});$(".alternate_phone").on("keypress keyup blur",function(a){return $namespace.Validation.checkNumericKeyCode(a)});$(".alternate_phone_extension").on("keypress keyup blur",function(a){return $namespace.Validation.checkNumericKeyCode(a)});
0==$("#promotionDetails").length&&$("#paymentOptionsCard").addClass("no-padding-top");this.updateCurrency();this.resize();0<$("#promotion-entry-form").length?($("#promotion-apply-result").hide(),$("#promotinDetailsDiv").hide(),$("#promotionCodeEntry").val("")):0<$("#promotionDetails").length&&($("#promotionDetails").addClass("promotion-success").removeClass("feature-box"),$("#promotionDetails div:first-child").removeClass("feature-box"));this._OnShopCardCountryLoad();this.initShopCardTooltips();this._initializeShippingAddressCard()},
updateCurrency:function(){$(".amount-currency-mask").each(function(){var a=$(this).attr("data-currencyCode");$(this).maskMoney({thousands:$namespace.GlobalConstants.CURRENCY_MASKS[a].thousands,decimal:$namespace.GlobalConstants.CURRENCY_MASKS[a].decimal,precision:$namespace.GlobalConstants.CURRENCY_MASKS[a].precision,allowZero:!0});a=$(this).val();var b=$(this).attr("id");$namespace.Validation.isCurrencyValueMasked(b)||$(this).maskMoney("mask",parseFloat(a))})},resize:function(){var a=utils.Breakpoint.isMobile()||
$namespace.Browser.iPad?!0:!1;this.ui.form.find('INPUT[id="creditCardScheduledDate_schedulePayment_0"]')[0].onselectstart=a?function(){return!1}:null},trackEventAccordion:function(a,b){a=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase();b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent(a+"_Payment_Options_Results_Flights","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent(a+"_Payment_Options_Results_Hotel","Click",
"Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent(a+"_Payment_Options_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent(a+"_Payment_Options_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")&&$namespace.Analytics.trackEvent(a+"_Payment_Options_Results_Activities","Click","Expand")},_showCVVModal:function(a){$(a.currentTarget).attr("id");$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentOptions.act","vppm=LOAD_SHOW_CVV_CODE_POPUP",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_formatCurrencyOnNewCard:function(a){a=$("#"+a);var b=a.attr("data-currencyCode");$(a).maskMoney({thousands:$namespace.GlobalConstants.CURRENCY_MASKS[b].thousands,decimal:$namespace.GlobalConstants.CURRENCY_MASKS[b].decimal,precision:$namespace.GlobalConstants.CURRENCY_MASKS[b].precision,
allowZero:!0});(b=$(this).val())&&$(a).maskMoney("mask",b)},validateDates:function(a){return!0},loadDefaultPaymentInfo:function(a){a=this.module.TranslationTexts;var b=this.currentPaymentOption();if("SCHEDULED_PAYMENT"==b){this.isSchedulePayment=!0;$("#creditCardAmount_fullPayment_0").attr("aria-describedby","paymentAmountDiv");b=document.getElementById("creditCardAmount_fullPayment_0").value;var d=document.getElementById("creditCardAmount_schedulePayment_0").value;document.getElementById("paymentHeaderDivLabel").innerText=
a.PAY_THE_DEPOSIT_AMOUNT;document.getElementById("paymentHeaderDiv").style.display="block";document.getElementById("paymentAmountDiv").style.display="block";document.getElementById("schedulePaymentHeaderDiv").style.display="block";this.schedulePaymentBlock.hasClass("displayNone")&&(this.schedulePaymentBlock.removeClass("displayNone"),this.schedulePaymentBlock.addClass("displayBlock"));for(var e=0;e<this.numberOfCreditCardsForScheduledPayment;e++)0==e?(document.getElementById("currentPaymentDataDiv_"+
e).style.display="block",document.getElementById("schedulePaymentDataDiv_"+e).style.display="block",$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_fullPayment_"+e,this.depositAmount)):document.getElementById("schedulePaymentDataDiv_"+e).style.display="block",document.getElementById("legendScheduleFinalPayment_"+e).innerText=a.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendScheduleBillingAddress_"+e).innerHTML=a.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE;b==d&&d.replace(/,/,
"")==parseFloat(grossAmount).toFixed(2)&&$("#creditCardAmount_fullPayment_0").val(parseFloat(this.depositAmount).toFixed(2));1<=this.numberOfCreditCardsForFullPayment&&($("#creditCardAmount_fullPayment_0").val(parseFloat(this.depositAmount).toFixed(2)),document.getElementById("legendFullPayment_0").innerText=a.PAY_THE_DEPOSIT_AMOUNT_CREDIT_CARD,document.getElementById("legendUseBillingAddress_0").innerHTML=a.PAY_THE_DEPOSIT_AMOUNT_BILLING_ADDRESS)}else if("FULL_PAYMENT"==b){this.isSchedulePayment=
!1;$("#creditCardAmount_fullPayment_0").attr("aria-describedby",!1);document.getElementById("paymentHeaderDivLabel").innerText=a.PAY_THE_FULL_AMOUNT;document.getElementById("paymentAmountDiv").style.display="none";document.getElementById("schedulePaymentHeaderDiv").style.display="none";for(e=0;e<this.numberOfCreditCardsForScheduledPayment;e++)document.getElementById("schedulePaymentDataDiv_"+e).style.display="none";if(1<=this.numberOfCreditCardsForFullPayment)for(e=0;e<this.numberOfCreditCardsForFullPayment;e++)document.getElementById("currentPaymentDataDiv_"+
e).style.display="block",$("#creditCardAmount_fullPayment_"+e).val(parseFloat(this.grossAmount).toFixed(2)),document.getElementById("legendFullPayment_"+e).innerText=a.PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendUseBillingAddress_"+e).innerHTML=a.PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE;this.schedulePaymentBlock.hasClass("displayBlock")&&(this.schedulePaymentBlock.removeClass("displayBlock"),this.schedulePaymentBlock.addClass("displayNone"));this.addCreditCardButton.show()}},
currentPaymentOption:function(){for(var a="",b=document.getElementsByName("currentPayment"),d=0;d<b.length;d++)1==b[d].checked&&(a=b[d].value);return a},_showHidePayment:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);a=this.module.TranslationTexts;var b=this.module.TranslationMessages;this.clearDepositCardValidations(0);var d=this.currentPaymentOption();if("SCHEDULED_PAYMENT"==d){this.isSchedulePayment=!0;this.addCreditCardButton.show();d=this.depositAmount;$("#creditCardAmount_fullPayment_0").attr("aria-describedby",
"paymentAmountDiv");var e=document.getElementById("creditCardAmount_fullPayment_0").value,f=document.getElementById("creditCardAmount_schedulePayment_0").value;document.getElementById("paymentHeaderDivLabel").innerText=a.PAY_THE_DEPOSIT_AMOUNT;document.getElementById("paymentHeaderDiv").style.display="block";document.getElementById("paymentAmountDiv").style.display="block";document.getElementById("schedulePaymentHeaderDiv").style.display="block";this.schedulePaymentBlock.hasClass("displayNone")&&
(this.schedulePaymentBlock.removeClass("displayNone"),this.schedulePaymentBlock.addClass("displayBlock"));for(var g=0;g<this.numberOfCreditCardsForScheduledPayment;g++)document.getElementById("schedulePaymentDataDiv_"+g).style.display="block",1==this.numberOfCreditCardsForScheduledPayment?(document.getElementById("legendScheduleFinalPayment_0").innerText=a.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendScheduleBillingAddress_0").innerHTML=a.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE):
(document.getElementById("legendScheduleFinalPayment_"+g).innerText=$namespace.TranslationUtil.replaceParameters(b.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD.translatedText,{cardIndex:g+1}),document.getElementById("legendScheduleBillingAddress_"+g).innerHTML=$namespace.TranslationUtil.replaceParameters(b.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS.translatedText,{cardIndex:g+1}));for(g=1;g<this.numberOfCreditCardsForFullPayment;g++)this.clearDepositCardValidations(g),document.getElementById("currentPaymentDataDiv_"+
g).style.display="none";e==f&&f.replace(/,/,"")==parseFloat(grossAmount).toFixed(2)&&($("#creditCardAmount_fullPayment_0").val(parseFloat(this.depositAmount).toFixed(2)),this.validateAndAdjustScheduledOrFullPaymentAmount());1<=this.numberOfCreditCardsForFullPayment&&($("#creditCardAmount_fullPayment_0").val(parseFloat(this.depositAmount).toFixed(2)),document.getElementById("legendFullPayment_0").innerText=a.PAY_THE_DEPOSIT_AMOUNT_CREDIT_CARD,document.getElementById("legendUseBillingAddress_0").innerHTML=
a.PAY_THE_DEPOSIT_AMOUNT_BILLING_ADDRESS,this.validateAndAdjustScheduledOrFullPaymentAmount());parseFloat(this.depositAmount)<parseFloat(d)?($("#creditCardAmount_fullPayment_0").val(parseFloat(d).toFixed(2)),this.validateAndAdjustScheduledOrFullPaymentAmount()):$("#creditCardAmount_fullPayment_0").val(parseFloat(this.depositAmount).toFixed(2));this.numberOfCreditCardsForScheduledPayment==this.maxCreditCards&&this.addCreditCardButton.hide();this.numberOfCreditCardsForFullPayment=1;this.updateCurrency();
this.enumerateCreditCardLabel()}else if("FULL_PAYMENT"==d){this.isSchedulePayment=!1;this.addCreditCardButton.show();$("#creditCardAmount_fullPayment_0").attr("aria-describedby",!1);document.getElementById("paymentHeaderDivLabel").innerText=a.PAY_THE_FULL_AMOUNT;document.getElementById("paymentAmountDiv").style.display="none";document.getElementById("schedulePaymentHeaderDiv").style.display="none";for(g=0;g<this.numberOfCreditCardsForScheduledPayment;g++)this.clearScheduleCardValidations(g),document.getElementById("schedulePaymentDataDiv_"+
g).style.display="none";if(1<=this.numberOfCreditCardsForFullPayment)for(g=0;g<this.numberOfCreditCardsForFullPayment;g++)document.getElementById("currentPaymentDataDiv_"+g).style.display="block",$("#creditCardAmount_fullPayment_"+g).val(parseFloat(this.grossAmount).toFixed(2)),document.getElementById("legendFullPayment_"+g).innerText=a.PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendUseBillingAddress_"+g).innerHTML=a.PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE;this.schedulePaymentBlock.hasClass("displayBlock")&&
(this.schedulePaymentBlock.removeClass("displayBlock"),this.schedulePaymentBlock.addClass("displayNone"));1==this.numberOfCreditCardsForFullPayment&&Math.round(100*parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0")))/100==Math.round(100*parseFloat(this.grossAmount))/100&&this.addCreditCardButton.attr("disabled","disabled");this.updateCurrency()}$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},validateAndAdjustScheduledOrFullPaymentAmount:function(){var a=this.currentPaymentOption(),
b=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0");if("true"!=document.getElementById("isDepositModified").value)var d=document.getElementById("depositAmount").value;if($namespace.Validation.isFloat(b)){if("SCHEDULED_PAYMENT"==a){var e=parseFloat(b).toFixed(2);parseFloat(d).toFixed(2);d=parseFloat(this.grossAmount).toFixed(2);if(parseFloat(e)>parseFloat(d)){$namespace.CurrencyUtil.formatCurrency({amount:this.grossAmount});return}if(1==this.numberOfCreditCardsForScheduledPayment&&
parseFloat(e)!==parseFloat(d))e=parseFloat(this.grossAmount-b).toFixed(2),$("#creditCardAmount_schedulePayment_0").val(e),this.addCreditCardButton.attr("disabled","disabled");else if(parseFloat(e)==parseFloat(d))this._showHideSchedulePaymentOnDepositChange(!0);else{var f=-1,g=0;var h=void 0!=this._previousDepositAmount?b-this._previousDepositAmount:b-this.depositAmount;for(var k=0;k<this.numberOfCreditCardsForScheduledPayment;k++){var l=parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+
k));l>=h&&l>g&&(f=k,g=l)}-1!=f?(e=parseFloat(parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+f))-h).toFixed(2),$("#creditCardAmount_schedulePayment_"+f).val(e)):-1==f&&0==this.numberOfCreditCardsForScheduledPayment&&(e=parseFloat(d-e).toFixed(2),$("#creditCardAmount_schedulePayment_0").val(e));0==this.numberOfCreditCardsForScheduledPayment&&this._showHideSchedulePaymentOnDepositChange(!1)}$("#creditCardAmount_fullPayment_"+f).val(b)}"SCHEDULED_PAYMENT"==a&&
(this._previousDepositAmount=b)}else this.depositAmount=$("#depositAmount").val()},getMailingAddress:function(){if(""==$namespace.StringUtil.trim($("#streetAddress1").val())||""==$namespace.StringUtil.trim($("#cityCashCardSection").val())||""==$namespace.StringUtil.trim($("#shopCardCountry").val())||$namespace.StringUtil.trim(""==$("#stateCashCardSection").val())||$namespace.StringUtil.trim(""==$("#zipCode").val())){var a={},b="",d="",e="",f="",g="",h="";""!=$namespace.StringUtil.trim($("#streetAddress1").val())&&
(b=$namespace.StringUtil.trim($("#streetAddress1").val()));""!=$namespace.StringUtil.trim($("#streetAddress2").val())&&(d=$namespace.StringUtil.trim($("#streetAddress2").val()));""!=$namespace.StringUtil.trim($("#cityCashCardSection").val())&&(e=$namespace.StringUtil.trim($("#cityCashCardSection").val()));""!=$namespace.StringUtil.trim($("#shopCardCountry").val())&&(f=$namespace.StringUtil.trim($("#shopCardCountry").val()));""!=$namespace.StringUtil.trim($("#stateCashCardSection").val())&&(g=$namespace.StringUtil.trim($("#stateCashCardSection").val()));
""!=$namespace.StringUtil.trim($("#zipCode").val())&&(h=$namespace.StringUtil.trim($("#zipCode").val()));a.address1=b;a.address2=d;a.city=e;a.country=f;a.state=g;a.zipCode=h;return JSON.stringify(a)}return null},chooseSurveyOption:function(a){a=$("#"+a.target.id);var b=this.surveyDefinitionId,d=$("#columnTitle OPTION:selected");$("#surveyResponse").val(a.val());$("#isUserDefinedResponse").val(d.attr("isUserDefinedResponse"));$("#questionId").val(b)},paddingZerosForMonth:function(a,b){for(a+="";a.length<
b;)a="0"+a;return a},_onScheduleDateChange:function(a){a=a.target.id.split("_").pop();var b="";switch(a){case "0":b=this.ui.scheduledDate_0;break;case "1":b=this.ui.scheduledDate_1;break;case "2":b=this.ui.scheduledDate_2}0<$("#creditCardScheduledDate_schedulePayment_"+a+"_error").length&&(this._removeError(b),$("#creditCardScheduledDate_schedulePayment_"+a+"_error").parent().parent().removeClass("sp-bot-0-mb").removeClass("sp-bot-10").addClass("sp-bot-0-mb"),$("#creditCardScheduledDate_schedulePayment_"+
a+"_error").remove())},createPayment:function(){var a="",b="",d="",e="",f="",g="",h="",k="",l="",p="",q="",r="",v="true"==this.isPaymentWithinDueDays?!0:!1,n="",t="",u="",w="",y="",z="",x="",B=new Date;B.getMonth();B.getFullYear();B=[];var G=y=!1,H=0,K=0,F=0,D={fullPaymentCard:[]};D.fullPaymentCard[0]=!1;D.scheduledPaymentCard=[];D.shipping=G;D.fullPaymentCreditCardInfo=[];D.fullPaymentCreditCardInfo[0]=!1;D.scheduledPaymentCreditCardInfo=[];for(var A=0;A<this.numberOfCreditCardsForFullPayment;A++)if(w=
$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+A),0<w){t=$("#creditCardExpirationMonth_fullPayment_"+A).val();u=$("#creditCardExpirationYear_fullPayment_"+A).val();y=$("#creditCardSecurityCode_fullPayment_"+A).val();z=$("#creditCardHolderName_fullPayment_"+A).val();n=$("#creditCardNumber_fullPayment_"+A).val();x=this.checkCreditCard(n);var C=$("#sameAsCreditCardForPreviousStateroom_fullPayment").is(":checked"),J=!1;C&&(J=$("#sameAsCreditCard_fullPayment_"+A).is(":checked"));
a=$("#street1_fullPayment_"+A).val();b=$("#street2_fullPayment_"+A).val();d=$("#city_fullPayment_"+A).val();e=$("#state_fullPayment_"+A).val();f=$("#country_fullPayment_"+A).val();g=$("#zip_fullPayment_"+A).val();0==A&&($("#sameAsBillingAddress_shipping").prop("checked")&&(G=!0,h=a,k=b,l=d,p=e,q=f,r=g),F=this.isSchedulePayment?w:this.depositAmount);var E={};E.creditCardNumber=n;E.cardType=x;E.cardHolderName=z;E.creditCardExpirationMonth=this.paddingZerosForMonth(t);E.creditCardExpirationYear=u;E.creditCardAmount=
parseFloat(w);E.creditCardSecurityCode=y;E.street1=a;E.street2=b;E.city=d;E.state=e;E.country=f;E.isSchedulePayment=!1;E.zip=g;E.isSameCardAsPreviousSession=!1;E.isSameAsPreviousCard=!1;t="#sameAsBillingAddress_fullPayment_"+A;u="#sameAsCreditCard_fullPayment_"+A;0<A&&(0<$(t).length&&$(t).prop("checked")?D.fullPaymentCard[H]=!0:D.fullPaymentCard[H]=!1,0<$(u).length&&$(u).prop("checked")?D.fullPaymentCreditCardInfo[H]=!0:D.fullPaymentCreditCardInfo[H]=!1);H+=1;B.push(E)}if(this.isSchedulePayment)for(A=
0;A<this.numberOfCreditCardsForScheduledPayment;A++)if(w=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+A),0<w){y=!1;t=$("#creditCardExpirationMonth_schedulePayment_"+A).val();u=$("#creditCardExpirationYear_schedulePayment_"+A).val();var N=$namespace.DateUtil.reformatDateString($("#creditCardScheduledDate_schedulePayment_"+A).val(),this.localeDateFormat,$namespace.DateUtil.getDefaultDateFormat());E=new Date(N);E.getMonth();E.getFullYear();a=$("#street1_schedulePayment_"+
A).val();b=$("#street2_schedulePayment_"+A).val();d=$("#city_schedulePayment_"+A).val();e=$("#state_schedulePayment_"+A).val();f=$("#country_schedulePayment_"+A).val();g=$("#zip_schedulePayment_"+A).val();n=$("#creditCardNumber_schedulePayment_"+A).val();z=$("#creditCardHolderName_schedulePayment_"+A).val();J=C=!1;x=this.checkCreditCard(n);E={};E.isAmexTransitionAuthorized=y;E.creditCardNumber=n;E.cardType=x;E.cardHolderName=z;E.creditCardExpirationMonth=this.paddingZerosForMonth(t);E.creditCardExpirationYear=
u;E.creditCardAmount=w;E.creditCardScheduledDate=N;E.street1=a;E.street2=b;E.city=d;E.state=e;E.country=f;E.isSchedulePayment=!0;E.zip=g;E.isSameCardAsPreviousSession=C;E.isSameAsPreviousCard=J;t="#sameAsBillingAddress_schedulePayment_"+A;u="#sameAsCreditCard_schedulePayment_"+A;0<$(t).length&&$(t).prop("checked")?D.scheduledPaymentCard[K]=!0:D.scheduledPaymentCard[K]=!1;0<$(u).length&&$(u).prop("checked")?D.scheduledPaymentCreditCardInfo[K]=!0:D.scheduledPaymentCreditCardInfo[K]=!1;K+=1;B.push(E)}$("#sameAsBillingAddress_shipping").prop("checked")||
(G=!1,h=$("#street1").val(),k=$("#street2").val(),l=$("#city").val(),p=$("#state").val(),q=$("#country").val(),r=$("#zip").val());A=$("#primary_phone").val();A=A.replace(/-/g,"");E=$("#alternate_phone").val();E=E.replace(/-/g,"");t=$("#alternate_phone_extension").val();u=this.email;w=$("#alternate_email").val();u=$("#primary_email").val();D.street1=h;D.street2=k;D.city=l;D.state=p;D.country=q;D.zip=r;D.primaryPhone=A;D.alternatePhone=E;D.alternatePhoneExtension=t;D.email=$namespace.StringUtil.escapeNonAsciiChars(u);
D.alternateEmail=$namespace.StringUtil.escapeNonAsciiChars(w);D.isSchedulePayment=this.isSchedulePayment;D.isFirstTime=!1;D._grossAmount=this.grossAmount;D._depositAmount=F;D.isPaymentWithinDueDays=v;D.numberOfCreditCardsForFullPayment=H;D.numberOfCreditCardsForScheduledPayment=K;D.shipping=G;k=h="";0<$("#isPromotionApplied").length?"true"==$("#isPromotionApplied").val()?(h=$("#promotionCode").val(),k=$("#promotionAmount").val(),D.promotionCode=h,D.promotionAmount=k,D.isPromotionExist=!0,D.isDepositModified=
!1):D.isPromotionExist=!1:D.isPromotionExist=!1;h=$("#surveyResponse").val();k=this.surveyDefinitionId;l=$("#questionId").val();p=$("#isUserDefinedResponse").val();q={};q.surveyResponse=h;q.surveyDefinitionId=k;q.questionId=l;q.userDefinedResponse=p;q.comments="";q.matrixQuestion="";q.productId="";q.query_mode="CREATE";D={CREDITCARD_INFO:B,PAYMENT_ADDRESS:D,SURVEY_RESPONSE:q};B=this.getMailingAddress();D="vppm=CREATE_PAYMENT_INFO&paymentDetail="+JSON.stringify(D);B&&(D+="&mailingAddress="+B);$namespace.Validation.isNull(document.getElementById("confirmCashCardShippingAddress"))||
(D+="&confirmCCShippingAddress="+document.getElementById("confirmCashCardShippingAddress").checked);var I=this.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentOptions.act",D,null,null,function(){if(this.message){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();$namespace.MessageUtil.showMessage({type:1,text:"en_ca"==a||"fr_ca"==a?I.PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE_CA:
I.PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE,title:I.PAYMENT_OPTIONS_ERROR_COMMON})}else $namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_FINALIZE_BOOKING,["true"])},null)},_onContinueClick:function(a){this._validatePaymentOptions()&&this.createPayment()},_getFormattedDate:function(a){var b=a.getFullYear(),d=(1+a.getMonth()).toString();d=1<d.length?d:"0"+d;a=a.getDate().toString();a=1<a.length?a:"0"+a;return d+"/"+a+"/"+b},_validatePaymentOptions:function(){$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);this.isFirstFormFieldFocusActive=!1;var a=!0,b=new Date,d=b.getMonth(),e=b.getFullYear(),f=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase(),g=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase(),h=document.getElementById("country_fullPayment_0").value,k=$("#creditCardAmount_fullPayment_0"),l=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0"),p=$("#creditCardHolderName_fullPayment_0"),q=$("#creditCardNumber_fullPayment_0"),r=$("#creditCardExpirationMonth_fullPayment_0"),
v=$("#creditCardExpirationYear_fullPayment_0"),n=$("#creditCardSecurityCode_fullPayment_0"),t=$("#street1_fullPayment_0"),u=$("#street2_fullPayment_0"),w=$("#city_fullPayment_0"),y=$("#zip_fullPayment_0"),z=$("#state_fullPayment_0"),x=this.module.TranslationTexts,B=this.module.TranslationMessages;this._removeError(p);this._removeError(q);this._removeError(r);this._removeError(v);this._removeError(n);this._removeError(t);this._removeError(u);this._removeError(w);this._removeError(y);this._removeError(z);
this._removeError(k);var G=l,H=this.depositAmount,K=this.grossAmount,F=$namespace.CurrencyUtil.formatCurrency({amount:H}),D=$namespace.CurrencyUtil.formatCurrency({amount:K}),A=this.checkCreditCard(q.val()),C=this.currentPaymentOption();$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT&&(g+="/HF");if("SCHEDULED_PAYMENT"==C)if(null==k.val().trim().match(US_EN_CURRENCY_FORMAT_REGEX)&&("en_ca"==
f||"en_us"==f)||null==k.val().trim().match(CA_FR_CURRENCY_FORMAT_REGEX)&&"fr_ca"==f)this._addError(k,$namespace.MessageUtil.prefixError(x.AMOUNT_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount_invalid",this.packageId),a=!1;else if(0==l)a=$namespace.TranslationUtil.replaceParameters(B.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE.translatedText,{minAmount:F,maxAmount:D}),this._addError(k,$namespace.MessageUtil.prefixError(a)),a=!1;else{if(l<Number(H)||l>Number(K))a=
$namespace.TranslationUtil.replaceParameters(B.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE.translatedText,{minAmount:F,maxAmount:D}),this._addError(k,$namespace.MessageUtil.prefixError(a)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount",this.packageId),a=!1}else"FULL_PAYMENT"==C&&(null==k.val().trim().match(US_EN_CURRENCY_FORMAT_REGEX)&&("en_ca"==f||"en_us"==f)||null==k.val().trim().match(CA_FR_CURRENCY_FORMAT_REGEX)&&"fr_ca"==f)&&(this._addError(k,$namespace.MessageUtil.prefixError(x.AMOUNT_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount_invalid",this.packageId),a=!1);if("SCHEDULED_PAYMENT"==C||"FULL_PAYMENT"==C&&0<l){""==p.val().trim()?(this._addError(p,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","cardholder_name_required",this.packageId),a=!1):CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX.test(p.val().trim())&&(this._addError(p,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Cardholder_Name_invalid",this.packageId),a=!1);""!=q.val()&&null==q.val().trim().match(CREDIT_CARD_NUMBER_REGEX)?(this._addError(q,$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_number_invalid",this.packageId),a=!1):""==q.val()||q.val().length<CREDIT_CARD_MAX_LENGTH&&13!==q.val().length?(q.val().length<CREDIT_CARD_MAX_LENGTH&&0<q.val().length?this._addError(q,
$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)):this._addError(q,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_required",this.packageId),a=!1):"UNKNOWN"==A&&(this._addError(q,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_invalid",this.packageId),a=!1);k=!1;""==
r.val()?(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_month_required",this.packageId),a=!1,k=!0):null==r.val().trim().match(CREDIT_CARD_EXPIRATION_MONTH_REGEX)&&(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_month_required",this.packageId),a=!1,k=
!0);if(""==v.val())this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_year_required",this.packageId),a=!1;else if(null==v.val().trim().match(CREDIT_CARD_EXPIRATION_YEAR_REGEX)||parseInt(v.val())>parseInt(this.maxCreditCardExpiryYear))this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options",
"expiration_year_required",this.packageId),a=!1;else if(parseInt(v.val())<e||e==parseInt(v.val())&&parseInt(r.val())<=d)parseInt(v.val())<e?(this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_date_past",this.packageId),a=!1):k||(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options",
"expiration_date_past",this.packageId),a=!1);""==n.val()?(this._addCVVError(n,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CVV_required",this.packageId),a=!1):n.val().match(/[0-9]{3}/g)&&3==n.val().trim().length||(this._addCVVError(n,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CVV_invalid",this.packageId),
a=!1);""==t.val().trim()?(this._addError(t,$namespace.MessageUtil.prefixError(x.STREET_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","street_required",this.packageId),a=!1):STREET_NOT_ALLOWED_REGEX.test(t.val().trim())&&(this._addError(t,$namespace.MessageUtil.prefixError(x.STREET_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street_invalid",this.packageId),a=!1);""!=u.val().trim()&&STREET_NOT_ALLOWED_REGEX.test(u.val().trim())&&
(this._addError(u,$namespace.MessageUtil.prefixError(x.STREET2_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street2/Apt._invalid",this.packageId),a=!1);""==w.val().trim()?(this._addError(w,$namespace.MessageUtil.prefixError(x.CITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","city_required",this.packageId),a=!1):CITY_NOT_ALLOWED_REGEX.test(w.val().trim())&&(this._addError(w,$namespace.MessageUtil.prefixError(x.CITY_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","City_invalid",this.packageId),a=!1);if(h==$namespace.Country.CANADA_COUNTRY_CODE)""==z.val()&&(this._addError(z,$namespace.MessageUtil.prefixError(x.PROVINCE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","province_required",this.packageId),a=!1),h=y.val(),""==h?(this._addError(y,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
g+"/Payment_Options","postalcode_required",this.packageId),a=!1):h.match(POSTAL_CODE_REGEX)||(this._addError(y,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","postalcode_invalid",this.packageId),a=!1);else if(""==z.val()&&(this._addError(z,$namespace.MessageUtil.prefixError(x.STATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","state_required",this.packageId),a=!1),h=
y.val(),""==h)this._addError(y,$namespace.MessageUtil.prefixError(x.ZIP_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_required",this.packageId),a=!1;else if(!h.match(ZIPCODE_REGEX)||5>h.length)this._addError(y,$namespace.MessageUtil.prefixError(x.ZIP_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_invalid",this.packageId),a=!1}if("SCHEDULED_PAYMENT"==C)for(C=0;C<this.numberOfCreditCardsForScheduledPayment;C++){if(x=
this.module.TranslationTexts,z=$("#creditCardAmount_schedulePayment_"+C),1==z.length){k=$("#creditCardHolderName_schedulePayment_"+C);l=$("#creditCardNumber_schedulePayment_"+C);e=$("#creditCardExpirationMonth_schedulePayment_"+C);y=$("#creditCardExpirationYear_schedulePayment_"+C);w=$("#creditCardScheduledDate_schedulePayment_"+C);h=document.getElementById("country_schedulePayment_"+C).value;r=$("#street1_schedulePayment_"+C);v=$("#street2_schedulePayment_"+C);n=$("#city_schedulePayment_"+C);d=$("#zip_schedulePayment_"+
C);t=$("#state_schedulePayment_"+C);this._removeError(k);this._removeError(l);this._removeError(e);this._removeError(y);this._removeError(z);this._removeError(r);this._removeError(v);this._removeError(n);this._removeError(d);this._removeError(t);u="";switch(C){case 0:u=this.ui.scheduledDate_0;break;case 1:u=this.ui.scheduledDate_1;break;case 2:u=this.ui.scheduledDate_2}0<$("#creditCardScheduledDate_schedulePayment_"+C+"_error").length&&($("#creditCardScheduledDate_schedulePayment_"+C+"_error").parent().parent().removeClass("sp-bot-0-mb").removeClass("sp-bot-10").addClass("sp-bot-0-mb"),
$("#creditCardScheduledDate_schedulePayment_"+C+"_error").remove(),this._removeError(u));p=this.checkCreditCard(l.val());A=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+C);G+=A;if(0<A){if(null==z.val().trim().match(US_EN_CURRENCY_FORMAT_REGEX)&&("en_ca"==f||"en_us"==f)||null==z.val().trim().match(CA_FR_CURRENCY_FORMAT_REGEX)&&"fr_ca"==f)this._addError(z,$namespace.MessageUtil.prefixError(x.AMOUNT_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options",
"Amount_invalid",this.packageId),a=!1;""==k.val().trim()?(this._addError(k,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","cardholder_name_required",this.packageId),a=!1):CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX.test(k.val().trim())&&(this._addError(k,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Cardholder_Name_invalid",
this.packageId),a=!1);""!=l.val()&&null==q.val().trim().match(CREDIT_CARD_NUMBER_REGEX)?(this._addError(l,$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_number_invalid",this.packageId),a=!1):""==l.val()||l.val().length<CREDIT_CARD_MAX_LENGTH&&13!==l.val().length?(0<l.val().length&&l.length<CREDIT_CARD_MAX_LENGTH&&13!==l.val().length?this._addError(l,$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)):
this._addError(l,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_required",this.packageId),a=!1):"UNKNOWN"==p&&(this._addError(l,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_invalid",this.packageId),a=!1);if(""==w.val())this._addError(u,$namespace.MessageUtil.prefixError(B.SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE.translatedText)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","scheduled_date_required",this.packageId),a=!1;else if(k=this._getFormattedDate(new Date),l=this._getFormattedDate(new Date(this.scheduledPaymentDate)),"en_ca"==f||"en_us"==f){if(p=new Date(w.val()),z=new Date(this.scheduledPaymentDate),A=new Date(this._getFormattedDate(b)),p>z||p<A||null==w.val().match(US_DATE_REGEX)||p==INVALID_DATE)a=$namespace.TranslationUtil.replaceParameters(B.SCHEDULE_DATE_RANGE_ERROR_MESSAGE.translatedText,{minDate:k,
maxDate:l}),this._addError(u,$namespace.MessageUtil.prefixError(a)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","scheduled_date_invalid",this.packageId),$("#"+u.attr("id")).parent().parent().removeClass("sp-bot-0-mb").addClass("sp-bot-10"),a=!1}else"fr_ca"==f&&(z=$namespace.DateUtil.reformatDateString(document.getElementById("creditCardScheduledDate_schedulePayment_"+C).value,this.localeDateFormat,$namespace.DateUtil.getDefaultDateFormat()),p=new Date(z),z=$namespace.DateUtil.reformatDateString(this.scheduledPaymentDate,
this.localeDateFormat,$namespace.DateUtil.getDefaultDateFormat()),z=new Date(z),k=$namespace.DateUtil.reformatDateString({dateString:k,inputFormat:$namespace.DateUtil.getDefaultDateFormat(),outputFormat:this.localeDateFormat}),l=this.scheduledPaymentDate,A=new Date(this._getFormattedDate(b)),""!=p&&p!=this.localeDateFormat&&(p>z||p<A||null==w.val().match(CA_DATE_REGEX)||p==INVALID_DATE)&&(a=$namespace.TranslationUtil.replaceParameters(B.SCHEDULE_DATE_RANGE_ERROR_MESSAGE.translatedText,{minDate:k,
maxDate:l}),this._addError(u,$namespace.MessageUtil.prefixError(a)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","scheduled_date_invalid",this.packageId),$("#"+u.attr("id")).parent().parent().removeClass("sp-bot-0-mb").addClass("sp-bot-10"),a=!1));u=!1;""==e.val()?(this._addError(e,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_month_required",this.packageId),a=!1,u=!0):null==
e.val().trim().match(CREDIT_CARD_EXPIRATION_MONTH_REGEX)&&(this._addError(e,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_month_required",this.packageId),a=!1,u=!0);if(""==y.val())this._addError(y,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_year_required",this.packageId),a=!1;else if(null==
y.val().trim().match(CREDIT_CARD_EXPIRATION_YEAR_REGEX)||parseInt(y.val())>parseInt(this.maxCreditCardExpiryYear))this._addError(y,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_year_required",this.packageId),a=!1;else if(z=$namespace.DateUtil.reformatDateString(document.getElementById("creditCardScheduledDate_schedulePayment_"+C).value,this.localeDateFormat,$namespace.DateUtil.getDefaultDateFormat()),
z==INVALID_DATE)this._addError(y,$namespace.MessageUtil.prefixError(x.SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_date_before_scheduled_date",this.packageId),a=!1;else if(z=new Date(z),w=z.getFullYear(),z=z.getMonth(),parseInt(y.val())<w||w==parseInt(y.val())&&parseInt(e.val())<=z)parseInt(y.val())<w?(this._addError(y,$namespace.MessageUtil.prefixError(x.SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
g+"/Payment_Options","expiration_date_before_scheduled_date",this.packageId),a=!1):u||(this._addError(e,$namespace.MessageUtil.prefixError(x.SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_date_before_scheduled_date",this.packageId),a=!1);""==r.val().trim()?(this._addError(r,$namespace.MessageUtil.prefixError(x.STREET_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","street_required",
this.packageId),a=!1):STREET_NOT_ALLOWED_REGEX.test(r.val().trim())&&(this._addError(r,$namespace.MessageUtil.prefixError(x.STREET_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street_invalid",this.packageId),a=!1);""!=v.val().trim()&&STREET_NOT_ALLOWED_REGEX.test(v.val().trim())&&(this._addError(v,$namespace.MessageUtil.prefixError(x.STREET2_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street2/Apt._invalid",this.packageId),
a=!1);""==n.val().trim()?(this._addError(n,$namespace.MessageUtil.prefixError(x.CITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","city_required",this.packageId),a=!1):CITY_NOT_ALLOWED_REGEX.test(n.val().trim())&&(this._addError(n,$namespace.MessageUtil.prefixError(x.CITY_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","City_invalid",this.packageId),a=!1);if(h==$namespace.Country.CANADA_COUNTRY_CODE)""==t.val()&&(this._addError(t,
$namespace.MessageUtil.prefixError(x.PROVINCE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","province_required",this.packageId),a=!1),h=d.val(),""==h?(this._addError(d,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","postalcode_required",this.packageId),a=!1):h.match(POSTAL_CODE_REGEX)||(this._addError(d,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","postalcode_invalid",this.packageId),a=!1);else if(""==t.val()&&(this._addError(t,$namespace.MessageUtil.prefixError(x.STATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","state_required",this.packageId),a=!1),h=d.val(),""==h)this._addError(d,$namespace.MessageUtil.prefixError(x.ZIP_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_required",this.packageId),
a=!1;else if(!h.match(ZIPCODE_REGEX)||5>h.length)this._addError(d,$namespace.MessageUtil.prefixError(x.ZIP_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_invalid",this.packageId),a=!1}}}else if("FULL_PAYMENT"==C)for(C=1;C<this.numberOfCreditCardsForFullPayment;C++)if(x=this.module.TranslationTexts,k=$("#creditCardAmount_fullPayment_"+C),1==k.length&&(l=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+C),h=document.getElementById("country_fullPayment_"+
C).value,p=$("#creditCardHolderName_fullPayment_"+C),q=$("#creditCardNumber_fullPayment_"+C),r=$("#creditCardExpirationMonth_fullPayment_"+C),v=$("#creditCardExpirationYear_fullPayment_"+C),n=$("#creditCardSecurityCode_fullPayment_"+C),t=$("#street1_fullPayment_"+C),u=$("#street2_fullPayment_"+C),w=$("#city_fullPayment_"+C),y=$("#zip_fullPayment_"+C),z=$("#state_fullPayment_"+C),this._removeError(k),this._removeError(p),this._removeError(q),this._removeError(r),this._removeError(v),this._removeError(n),
this._removeError(t),this._removeError(u),this._removeError(w),this._removeError(y),this._removeError(z),A=this.checkCreditCard(q.val()),G+=l,0<l)){if(null==k.val().trim().match(US_EN_CURRENCY_FORMAT_REGEX)&&("en_ca"==f||"en_us"==f)||null==k.val().trim().match(CA_FR_CURRENCY_FORMAT_REGEX)&&"fr_ca"==f)this._addError(k,$namespace.MessageUtil.prefixError(x.AMOUNT_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount_invalid",this.packageId),a=!1;""==p.val().trim()?
(this._addError(p,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","cardholder_name_required",this.packageId),a=!1):CREDIT_CARD_HOLDER_NAME_NOT_ALLOWED_REGEX.test(p.val().trim())&&(this._addError(p,$namespace.MessageUtil.prefixError(x.CARDHOLDER_NAME_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Cardholder_Name_invalid",this.packageId),a=!1);""!=q.val()&&null==q.val().trim().match(CREDIT_CARD_NUMBER_REGEX)?
(this._addError(q,$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_number_invalid",this.packageId),a=!1):""==q.val()||q.val().length<CREDIT_CARD_MAX_LENGTH&&13!==q.val().length?(0<q.val().length&&q.val().length<CREDIT_CARD_MAX_LENGTH&&13!==q.val().length?this._addError(q,$namespace.MessageUtil.prefixError(x.CARD_NUMBER_INVALID_ERROR_MESSAGE)):this._addError(q,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_required",this.packageId),a=!1):"UNKNOWN"==A&&(this._addError(q,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CC_invalid",this.packageId),a=!1);b=!1;""==r.val()?(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options",
"expiration_month_required",this.packageId),a=!1,b=!0):null==r.val().trim().match(CREDIT_CARD_EXPIRATION_MONTH_REGEX)&&(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_month_required",this.packageId),a=!1,b=!0);if(""==v.val())this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options",
"expiration_year_required",this.packageId),a=!1;else if(null==v.val().trim().match(CREDIT_CARD_EXPIRATION_YEAR_REGEX)||parseInt(v.val())>parseInt(this.maxCreditCardExpiryYear))this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_year_required",this.packageId),a=!1;else if(parseInt(v.val())<e||e==parseInt(v.val())&&parseInt(r.val())<=d)parseInt(v.val())<e?(this._addError(v,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_date_past",this.packageId),a=!1):b||(this._addError(r,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","expiration_date_past",this.packageId),a=!1);""==n.val()?(this._addError(n,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CVV_required",
this.packageId),a=!1):n.val().match(/[0-9]{3}/g)&&3==n.val().trim().length||(this._addCVVError(n,$namespace.MessageUtil.prefixError(x.CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","CVV_invalid",this.packageId),a=!1);""==t.val().trim()?(this._addError(t,$namespace.MessageUtil.prefixError(x.STREET_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","street_required",this.packageId),a=!1):STREET_NOT_ALLOWED_REGEX.test(t.val().trim())&&
(this._addError(t,$namespace.MessageUtil.prefixError(x.STREET_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street_invalid",this.packageId),a=!1);""!=u.val().trim()&&STREET_NOT_ALLOWED_REGEX.test(u.val().trim())&&(this._addError(u,$namespace.MessageUtil.prefixError(x.STREET2_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Street2/Apt._invalid",this.packageId),a=!1);""==w.val().trim()?(this._addError(w,$namespace.MessageUtil.prefixError(x.CITY_VALIDATION_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","city_required",this.packageId),a=!1):CITY_NOT_ALLOWED_REGEX.test(w.val().trim())&&(this._addError(w,$namespace.MessageUtil.prefixError(x.CITY_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","City_invalid",this.packageId),a=!1);if(h==$namespace.Country.CANADA_COUNTRY_CODE)""==z.val()&&(this._addError(z,$namespace.MessageUtil.prefixError(x.PROVINCE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
g+"/Payment_Options","province_required",this.packageId),a=!1),h=y.val(),""==h?(this._addError(y,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","postalcode_required",this.packageId),a=!1):h.match(POSTAL_CODE_REGEX)||(this._addError(y,$namespace.MessageUtil.prefixError(x.POSTAL_CODE_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","postalcode_invalid",this.packageId),a=!1);
else if(""==z.val()&&(this._addError(z,$namespace.MessageUtil.prefixError(x.STATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","state_required",this.packageId),a=!1),h=y.val(),""==h)this._addError(y,$namespace.MessageUtil.prefixError(x.ZIP_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_required",this.packageId),a=!1;else if(!h.match(ZIPCODE_REGEX)||5>h.length)this._addError(y,$namespace.MessageUtil.prefixError(x.ZIP_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","zipcode_invalid",this.packageId),a=!1}parseFloat(G).toFixed(2)>Number(K)?(f=$namespace.CurrencyUtil.formatCurrency({amount:G-K}),a=$namespace.TranslationUtil.replaceParameters(B.TOTAL_AMOUNT_GREATER_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE.translatedText,{maxAmount:D,diffAmount:f}),this._addPackagePriceErrors(a),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount",this.packageId),a=!1):parseFloat(G).toFixed(2)<Number(K)&&
(f=$namespace.CurrencyUtil.formatCurrency({amount:K-G}),a=$namespace.TranslationUtil.replaceParameters(B.TOTAL_AMOUNT_LESS_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE.translatedText,{maxAmount:D,diffAmount:f}),this._addPackagePriceErrors(a),$namespace.Analytics.trackEvent("Error/"+g+"/Payment_Options","Amount",this.packageId),a=!1);this._validateMemberDetails()||(a=!1);0<$("#costcoShopCardDiv").length&&(this._validateCostcoShopCard()||(a=!1));this._validateShippingAddress()||(a=!1);$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);return a},_addPackagePriceErrors:function(a){var b=this.currentPaymentOption();if("SCHEDULED_PAYMENT"==b)for(this._removeError($("#creditCardAmount_fullPayment_0")),this._addError($("#creditCardAmount_fullPayment_0"),$namespace.MessageUtil.prefixError(a)),b=0;b<this.numberOfCreditCardsForScheduledPayment;b++)this._removeError($("#creditCardAmount_schedulePayment_"+b)),this._addError($("#creditCardAmount_schedulePayment_"+b),$namespace.MessageUtil.prefixError(a));else if("FULL_PAYMENT"==b)for(b=
0;b<this.numberOfCreditCardsForFullPayment;b++)this._removeError($("#creditCardAmount_fullPayment_"+b)),this._addError($("#creditCardAmount_fullPayment_"+b),$namespace.MessageUtil.prefixError(a))},_validateMemberDetails:function(){var a=!0,b=$("#primary_phone"),d=$("#primary_email"),e=$("#alternate_email"),f=$("#alternate_phone"),g=$("#alternate_phone_extension"),h=this.module.TranslationTexts,k=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase();this._removeError(b);this._removeError(d);
this._removeError(f);this._removeError(g);this._removeError(e);$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT&&(k+="/HF");""==b.val()&&(this._addError(b,$namespace.MessageUtil.prefixError(h.PRIMARY_PHONE_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","phone_number_required",this.packageId),a=!1);12>b.val().length&&""!==b.val()&&null==b.val().match(this.phoneFormat)&&
(this._addError(b,$namespace.MessageUtil.prefixError(h.PRIMARY_PHONE_10_DIGIT_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","phone_number_invalid",this.packageId),a=!1);""==d.val()&&(this._addError(d,$namespace.MessageUtil.prefixError(h.PRIMARY_EMAIL_MISSING_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","email_required",this.packageId),a=!1);$namespace.Validation.validateEmail(d.attr("id"),d.parent())||""===d.val()||(this._addError(d,
$namespace.MessageUtil.prefixError(h.PRIMARY_EMAIL_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","email_invalid",this.packageId),a=!1);""===e.val()||$namespace.Validation.validateEmail(e.attr("id"),e.parent())||(this._addError(e,$namespace.MessageUtil.prefixError(h.PRIMARY_EMAIL_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","email_invalid",this.packageId),a=!1);12>f.val().length&&""!==f.val()&&null==f.val().match(this.phoneFormat)&&
(this._addError(f,$namespace.MessageUtil.prefixError(h.PRIMARY_PHONE_10_DIGIT_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","phone_number_invalid",this.packageId),a=!1);""!=g.val()&&PHONE_EXTENSION_NOT_ALLOWED_REGEX.test(g.val())&&(this._addError(g,$namespace.MessageUtil.prefixError(h.EXT_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+k+"/Payment_Options","Ext_number_invalid",this.packageId),a=!1);return a},_validateShippingAddress:function(){var a=
!0,b=this.module.TranslationTexts,d=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase();$("#sameAsBillingAddress_shipping").prop("checked");var e=document.getElementById("country").value,f=$("#street1"),g=$("#street2"),h=$("#city"),k=$("#zip"),l=$("#state");this._removeError(f);this._removeError(h);this._removeError(k);this._removeError(l);this._removeError(g);$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT&&
(d+="/HF");""==f.val().trim()?(this._addError(f,$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","street_required",this.packageId),a=!1):STREET_NOT_ALLOWED_REGEX.test(f.val().trim())&&(this._addError(f,$namespace.MessageUtil.prefixError(b.STREET_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","Street_invalid",this.packageId),a=!1);""!=g.val().trim()&&STREET_NOT_ALLOWED_REGEX.test(g.val().trim())&&
(this._addError(g,$namespace.MessageUtil.prefixError(b.STREET2_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","Street2/Apt._invalid",this.packageId),a=!1);""==h.val().trim()?(this._addError(h,$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","city_required",this.packageId),a=!1):CITY_NOT_ALLOWED_REGEX.test(h.val().trim())&&(this._addError(h,$namespace.MessageUtil.prefixError(b.CITY_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","City_invalid",this.packageId),a=!1);if(e==$namespace.Country.CANADA_COUNTRY_CODE)""==l.val()&&(this._addError(l,$namespace.MessageUtil.prefixError(b.PROVINCE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","province_required",this.packageId),a=!1),e=k.val(),""==e?(this._addError(k,$namespace.MessageUtil.prefixError(b.POSTAL_CODE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
d+"/Payment_Options","postalcode_required",this.packageId),a=!1):e.match(POSTAL_CODE_REGEX)||(this._addError(k,$namespace.MessageUtil.prefixError(b.POSTAL_CODE_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","postalcode_invalid",this.packageId),a=!1);else if(""==l.val()&&(this._addError(l,$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","state_required",this.packageId),a=!1),e=
k.val(),""==e)this._addError(k,$namespace.MessageUtil.prefixError(b.ZIP_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","zipcode_required",this.packageId),a=!1;else if(!e.match(ZIPCODE_REGEX)||5>e.length)this._addError(k,$namespace.MessageUtil.prefixError(b.ZIP_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+d+"/Payment_Options","zipcode_invalid",this.packageId),a=!1;return a},_validateCostcoShopCard:function(){var a=!0,b=this.module.TranslationTexts,
d=this.module.TranslationMessages,e=$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase(),f=$("#confirmCashCardShippingAddress"),g=$("#confirmCashCardShippingAddress").prop("checked"),h=document.getElementById("shopCardCountry").value,k=$("#streetAddress1"),l=$("#streetAddress2"),p=$("#cityCashCardSection"),q=$("#zipCode"),r=$("#stateCashCardSection");this._removeError(k);this._removeError(p);this._removeError(q);this._removeError(r);this._removeError(f);this._removeError(l);
$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT&&(e+="/HF");""==k.val().trim()?(this._addError(k,$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","street_required",this.packageId),a=!1):STREET_NOT_ALLOWED_REGEX.test(k.val().trim())&&(this._addError(k,$namespace.MessageUtil.prefixError(b.STREET_INVALID_ERROR_MESSAGE)),
$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","Street_invalid",this.packageId),a=!1);""!=l.val().trim()&&STREET_NOT_ALLOWED_REGEX.test(l.val().trim())&&(this._addError(l,$namespace.MessageUtil.prefixError(b.STREET2_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","Street2/Apt._invalid",this.packageId),a=!1);""==p.val().trim()?(this._addError(p,$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
e+"/Payment_Options","city_required",this.packageId),a=!1):CITY_NOT_ALLOWED_REGEX.test(p.val().trim())&&(this._addError(p,$namespace.MessageUtil.prefixError(b.CITY_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","City_invalid",this.packageId),a=!1);if(h==$namespace.Country.CANADA_COUNTRY_CODE)""==r.val()&&(this._addError(r,$namespace.MessageUtil.prefixError(b.PROVINCE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","province_required",
this.packageId),a=!1),h=q.val(),""==h?(this._addError(q,$namespace.MessageUtil.prefixError(b.POSTAL_CODE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","postalcode_required",this.packageId),a=!1):h.match(POSTAL_CODE_REGEX)||(this._addError(q,$namespace.MessageUtil.prefixError(b.POSTAL_CODE_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","postalcode_invalid",this.packageId),a=!1);else if(""==r.val()&&(this._addError(r,
$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","state_required",this.packageId),a=!1),h=q.val(),""==h)this._addError(q,$namespace.MessageUtil.prefixError(b.ZIP_VALIDATION_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","zipcode_required",this.packageId),a=!1;else if(!h.match(ZIPCODE_REGEX)||5>h.length)this._addError(q,$namespace.MessageUtil.prefixError(b.ZIP_INVALID_ERROR_MESSAGE)),$namespace.Analytics.trackEvent("Error/"+
e+"/Payment_Options","zipcode_invalid",this.packageId),a=!1;g||($("#confirmCCShippingAddress").addClass("sp-bot-6 sp-bot-8-mb"),this._addError(f,$namespace.MessageUtil.prefixError(d.COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE.translatedText)),$namespace.Analytics.trackEvent("Error/"+e+"/Payment_Options","shipping_address_required",this.packageId),a=!1);return a},_addError:function(a,b){if("SELECT"==a.get(0).tagName){var d=$(a).closest(".selectWidgetWrapper");a.addClass("error");a.attr("aria-describedby",
a.attr("id")+"_error");d.after('<label tabindex="-1" class="error no-outline" data-test="'+a.attr("id")+'_error" id="'+a.attr("id")+'_error">'+b+"</label>")}else a.addClass("error"),"creditCardAmount_fullPayment_0"==a.attr("id")?a.attr("aria-describedby",a.attr("id")+"_error paymentAmountDiv"):"creditCardHolderName_fullPayment_0"==a.attr("id")||"creditCardHolderName_fullPayment_1"==a.attr("id")||"creditCardHolderName_fullPayment_2"==a.attr("id")?a.attr("aria-describedby",a.attr("id")+"_error helperTextAsItAppears"):
"creditCardHolderName_schedulePayment_0"==a.attr("id")||"creditCardHolderName_schedulePayment_1"==a.attr("id")||"creditCardHolderName_schedulePayment_2"==a.attr("id")?a.attr("aria-describedby",a.attr("id")+"_error helperTextAsItAppears"):"creditCardScheduledDate_schedulePayment_0"==a.attr("id")||"creditCardScheduledDate_schedulePayment_1"==a.attr("id")||"creditCardScheduledDate_schedulePayment_2"==a.attr("id")?a.attr("aria-describedby",a.attr("id")+"_error scheduleDateHelperText"):a.attr("aria-describedby",
a.attr("id")+"_error"),a.after('<label tabindex="-1" class="error no-outline" data-test="'+a.attr("id")+'_error" id="'+a.attr("id")+'_error">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_addCVVError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error cvv-error no-outline creditCardCheckSecurityCode" data-test="'+a.attr("id")+'_error" id="'+a.attr("id")+
'_error">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("id")+"_error").remove();"creditCardAmount_fullPayment_0"==a.attr("id")?a.attr("aria-describedby","paymentAmountDiv"):"creditCardHolderName_fullPayment_0"==a.attr("id")||"creditCardHolderName_fullPayment_1"==a.attr("id")||"creditCardHolderName_fullPayment_2"==a.attr("id")?a.attr("aria-describedby","helperTextAsItAppears"):
"creditCardHolderName_schedulePayment_0"==a.attr("id")||"creditCardHolderName_schedulePayment_1"==a.attr("id")||"creditCardHolderName_schedulePayment_2"==a.attr("id")?a.attr("aria-describedby","helperTextAsItAppears"):"creditCardScheduledDate_schedulePayment_0"==a.attr("id")||"creditCardScheduledDate_schedulePayment_1"==a.attr("id")||"creditCardScheduledDate_schedulePayment_2"==a.attr("id")?a.attr("aria-describedby","scheduleDateHelperText"):a.attr("aria-describedby",!1);$(window).trigger("resize")},
checkCreditCard:function(a){for(var b=[{name:"VisaCard",length:"13,16",prefixes:"4"},{name:"MasterCard",length:"16",prefixes:"51,52,53,54,55"}],d=b.length,e=!1,f=0;f<d&&!e;++f){var g=b[f].prefixes.split(",");for(var h=0;h<g.length;h++){var k=new RegExp("^"+g[h]);if(k.test(a)){e=!0;break}}}e&&(f=parseInt(f-1));e&&(k=/\D/,k.test(a)&&(e=!1));if(f<d&&e){d=b[f].length.split(",");e=!1;for(g=0;g<d.length&&!e;++g)if(parseInt(a.length)==parseInt(d[g])){e=!0;break}return e?b[f].name:"UNKNOWN"}return"UNKNOWN"},
_showCancellationPolicyModal:function(){var a=$("#packageId").val(),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Analytics.trackEvent("Payment_Options_Cancellation_Policy_Schedule",
"Click",a);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null)},_onApplyPromotionCode:function(a){var b=$(this.el).data("package-id");utils.updateLiveContainer();var d=$("#"+a.target.id);a=$("#promotionCodeEntry").val();a=a.toUpperCase();var e=d.attr("data-promotionModule");d=d.attr("data-bookingId");a="proms=VALIDATE_PROMOTION_CODE&promotionCode="+a+("&promotionModule="+e)+("&bookingId="+d);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("promotion.act",a,null,"promotinDetailsDiv",function(a){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.messageCode==$namespace.BookingPromotionConstants.BOOKING_PROMOTION_APPLICABLE?($("#promotionDetails").addClass("promotion-success").removeClass("feature-box"),$("#promotionDetails div:first-child").removeClass("feature-box"),$("#promotionCodeEntry").removeAttr("aria-describedby"),$("#promotion-apply-result").remove(),$("#promotion-entry-form").remove(),
$("#promotinDetailsDiv").show(),a=$("#appliedPromotionsSuccessMessage").html(),utils.updateLiveContainer(a.trim()),4711==this.messageCode?$namespace.Analytics.trackEvent("Success/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_applied",b):4714==this.messageCode&&$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_already_applied",b),
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentOptions.act","vppm=LOAD_COSTCO_SHOP_CARD",null,"costcoShopCardPromoDiv",function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),{parentSelector:"li"}))});if(0<$("#shopCardCountry").length&&$("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE){var a=$("#zipCode").val();a=a.toUpperCase().replace(/\W/g,"");if(3<=a.length){var b=a.substring(0,
3);a=a.substring(3);a=b+" "+a}$("#zipCode").val(a)}},null)):(4713==this.messageCode?$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_invalid",b):4714==this.messageCode&&$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_already_applied",b),$("#promotionCodeEntry").attr("aria-describedby","promotion-apply-result"),
$("#promotionCodeEntry").addClass("error"),$("#promotionCodeEntry").focus(),$("#promotion-apply-result").html(this.message.text).addClass("error"),$("#promotion-apply-result").show());return!0})},loadCountryState:function(a){var b=this.module.TranslationTexts;$("select[data-hook='changeDepositAmountBillingCountry']").each(function(){var a=$(this).attr("data-ccIndex"),e=$(this).val();$("#state_fullPayment_"+a).val();e==$namespace.Country.CANADA_COUNTRY_CODE?(document.getElementById("depositBillingStateOrProvinceSpan"+
a).innerHTML=b.PROVINCE_LABEL,document.getElementById("depositBillingZipOrPostalSpan"+a).innerHTML=b.POSTALCODE_LABEL,$("#zip_fullPayment_"+a).attr("maxlength",7),$("#zip_fullPayment_"+a).attr("pattern",POSTAL_CODE_HTML_PATTERN)):(document.getElementById("depositBillingStateOrProvinceSpan"+a).innerHTML=b.STATE_LABEL,document.getElementById("depositBillingZipOrPostalSpan"+a).innerHTML=b.ZIPCODE_LABEL,$("#zip_fullPayment_"+a).attr("maxlength",5),$("#zip_fullPayment_"+a).attr("pattern",ZIPCODE_HTML_PATTERN))})},
loadInititalSchedulePaymentCardCountryState:function(a){var b=this.module.TranslationTexts;$("select[data-hook='changeScheduleAmountBillingCountry']").each(function(){var a=$(this).attr("data-ccIndex"),e=$(this).val();$("#state_schedulePayment_"+a).val();e==$namespace.Country.CANADA_COUNTRY_CODE?($("#scheduleBillingStateOrProvinceSpan"+a).html(b.PROVINCE_LABEL),$("#scheduleBillingZipOrPostalSpan"+a).html(b.POSTALCODE_LABEL),$("#zip_schedulePayment_"+a).attr("maxlength",7),$("#zip_schedulePayment_"+
a).attr("pattern",POSTAL_CODE_HTML_PATTERN)):($("#scheduleBillingStateOrProvinceSpan"+a).html(b.STATE_LABEL),$("#scheduleBillingZipOrPostalSpan"+a).html(b.ZIPCODE_LABEL),$("#zip_schedulePayment_"+a).attr("maxlength",5),$("#zip_schedulePayment_"+a).attr("pattern",ZIPCODE_HTML_PATTERN))})},_onCountryChange:function(a){a=a.target.id.split("_").pop();var b=this.module.TranslationTexts,d=$("#country_fullPayment_"+a).val(),e=$("#state_fullPayment_"+a).val(),f=$("#zip_fullPayment_"+a);d==$namespace.Country.CANADA_COUNTRY_CODE?
($("#depositBillingStateOrProvinceSpan"+a).html(b.PROVINCE_LABEL),$("#depositBillingZipOrPostalSpan"+a).html(b.POSTALCODE_LABEL),f.attr("maxlength",7),f.attr("pattern",POSTAL_CODE_HTML_PATTERN)):($("#depositBillingStateOrProvinceSpan"+a).html(b.STATE_LABEL),$("#depositBillingZipOrPostalSpan"+a).html(b.ZIPCODE_LABEL),f.attr("maxlength",5),f.attr("pattern",ZIPCODE_HTML_PATTERN));f.val("");if(0==a){for(f=0;f<this.numberOfCreditCardsForScheduledPayment;f++)$("#sameAsBillingAddress_schedulePayment_"+f).prop("checked")&&
($("#country_schedulePayment_"+f).val(d),$("#zip_schedulePayment_"+f).val(""),this.loadStates("SCHEDULED_AND_FULL_PAYMENT",f));for(f=1;f<this.numberOfCreditCardsForFullPayment;f++)$("#sameAsBillingAddress_fullPayment_"+f).prop("checked")&&($("#country_fullPayment_"+f).val(d),$("#zip_fullPayment_"+f).val(""),this.loadStates("FULL_PAYMENT",f));$("#sameAsBillingAddress_shipping").prop("checked")&&($("#country").val(d),$("#zip").val(""),this.loadStates("SHIPPING",0))}this._removeError($("#street1_fullPayment_"+
a));this._removeError($("#city_fullPayment_"+a));this._removeError($("#zip_fullPayment_"+a));this._removeError($("#state_fullPayment_"+a));$namespace.AjaxUtil.makeAjaxCall("paymentOptions.act","vppm=LOAD_STATES_PROVINCES_FOR_COUNTRY&country="+d+("&state="+e),null,null,function(a,d){a=JSON.parse(a);a.unshift({value:"",text:b.SELECT_TEXT});a=JSON.stringify(a);$namespace.DomUtil.replaceOptions("state_fullPayment_"+d,a);return!0},"",[a])},_onShippingCountryChange:function(a){var b=this.module.TranslationTexts;
a=$("#country").val();var d=$("#state").val(),e=$("#zip");a==$namespace.Country.CANADA_COUNTRY_CODE?($("#shippingStateOrProvinceSpan").html(b.PROVINCE_LABEL),$("#shippingZipOrPostalSpan").html(b.POSTALCODE_LABEL),e.attr("maxlength",7),e.attr("pattern",POSTAL_CODE_HTML_PATTERN)):($("#shippingStateOrProvinceSpan").html(b.STATE_LABEL),$("#shippingZipOrPostalSpan").html(b.ZIPCODE_LABEL),e.attr("maxlength",5),e.attr("pattern",ZIPCODE_HTML_PATTERN));e.val("");this._removeError($("#street1"));this._removeError($("#city"));
this._removeError($("#zip"));this._removeError($("#state"));$namespace.AjaxUtil.makeAjaxCall("paymentOptions.act","vppm=LOAD_STATES_PROVINCES_FOR_COUNTRY&country="+a+("&state="+d),null,null,function(a){a=JSON.parse(a);a.unshift({value:"",text:b.SELECT_TEXT});a=JSON.stringify(a);$namespace.DomUtil.replaceOptions("state",a);return!0})},_onScheduleCountryChange:function(a){a=a.target.id.split("_").pop();var b=this.module.TranslationTexts,d=$("#country_schedulePayment_"+a),e=$("#state_schedulePayment_"+
a),f=$("#zip_schedulePayment_"+a);1==d.length&&(d.val()==$namespace.Country.CANADA_COUNTRY_CODE?(document.getElementById("scheduleBillingStateOrProvinceSpan"+a).innerHTML=b.PROVINCE_LABEL,document.getElementById("scheduleBillingZipOrPostalSpan"+a).innerHTML=b.POSTALCODE_LABEL,f.attr("maxlength",7),f.attr("pattern",POSTAL_CODE_HTML_PATTERN)):(document.getElementById("scheduleBillingStateOrProvinceSpan"+a).innerHTML=b.STATE_LABEL,document.getElementById("scheduleBillingZipOrPostalSpan"+a).innerHTML=
b.ZIPCODE_LABEL,f.attr("maxlength",5),f.attr("pattern",ZIPCODE_HTML_PATTERN)),f.val(""),this._removeError($("#street1_schedulePayment_"+a)),this._removeError($("#city_schedulePayment_"+a)),this._removeError($("#state_schedulePayment_"+a)),this._removeError($("#zip_schedulePayment_"+a)),d="vppm=LOAD_STATES_PROVINCES_FOR_COUNTRY&country="+d.val(),d+="&state="+e.val(),$namespace.AjaxUtil.makeAjaxCall("paymentOptions.act",d,null,null,function(a,d){a=JSON.parse(a);a.unshift({value:"",text:b.SELECT_TEXT});
a=JSON.stringify(a);$namespace.DomUtil.replaceOptions("state_schedulePayment_"+d,a);return!0},"",[a]))},_validatePaymentCardAutofill:function(a){var b=this.module.TranslationTexts,d=$("#"+a.target.id);a=a.target.id.split("_");var e=a.pop(),f=a.pop();this._removeError(d);switch(a[0]){case "creditCardHolderName":""!=d.val().trim()&&(b=d.val().trim().match(CREDIT_CARD_HOLDER_NAME_REGEX),null==b?d.val(""):(b=b.join(""),d.val(b.trim().substring(0,30))));break;case "street1":""==d.val().trim()?this._addError(d,
$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)):(b=d.val().trim().match(STREET_REGEX),null==b?d.val(""):(b=b.join(""),d.val(b.trim().substring(0,30))));break;case "street2":""!=d.val().trim()&&(b=d.val().trim().match(STREET_REGEX),null==b?d.val(""):(b=b.join(""),d.val(b.trim().substring(0,30))));break;case "city":""==d.val().trim()?this._addError(d,$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)):(b=d.val().trim().match(CITY_REGEX),null==b?d.val(""):(b=b.join(""),
d.val(b.trim().substring(0,20))));break;case "state":$("#country_"+f+"_"+e).val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(a=d.val(),""==a&&(this._addError(d,$namespace.MessageUtil.prefixError(b.PROVINCE_VALIDATION_ERROR_MESSAGE)),status=!1)):(a=d.val(),""==a&&(this._addError(d,$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)),status=!1));break;case "zip":$("#country_"+f+"_"+e).val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(b=d.val(),""!=b&&(b=d.val().trim().match(/[a-zA-Z0-9\s]{0,7}/g),
null!=b&&0<b.length?(b=b.join(""),d.val(b.trim().substring(0,7))):d.val(""))):(b=d.val(),""!=b&&(b=d.val().trim().match(/[0-9]{0,5}/g),null!=b&&0<b.length?(b=b.join(""),d.val(b.trim().substring(0,5))):d.val("")))}},_validateShopCardAutofill:function(a){var b=this.module.TranslationTexts,d=a.target.id,e=$("#"+d);a.target.id.split("_");this._removeError(e);switch(d){case "street1":""==e.val().trim()?this._addError(e,$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)):(b=e.val().trim().match(STREET_REGEX),
null==b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,30))));break;case "streetAddress1":""==e.val().trim()?this._addError(e,$namespace.MessageUtil.prefixError(b.STREET_VALIDATION_ERROR_MESSAGE)):(b=e.val().trim().match(STREET_REGEX),null==b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,30))));break;case "street2":""!=e.val().trim()&&(b=e.val().trim().match(STREET_REGEX),null==b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,30))));break;case "streetAddress2":""!=e.val().trim()&&(b=
e.val().trim().match(STREET_REGEX),null==b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,30))));break;case "city":""==e.val().trim()?this._addError(e,$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)):(b=e.val().trim().match(CITY_REGEX),null==b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,20))));break;case "cityCashCardSection":""==e.val().trim()?this._addError(e,$namespace.MessageUtil.prefixError(b.CITY_VALIDATION_ERROR_MESSAGE)):(b=e.val().trim().match(CITY_REGEX),null==
b?e.val(""):(b=b.join(""),e.val(b.trim().substring(0,20))));break;case "state":$("#country").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(a=e.val(),""==a&&(this._addError(e,$namespace.MessageUtil.prefixError(b.PROVINCE_VALIDATION_ERROR_MESSAGE)),status=!1)):(a=e.val(),""==a&&(this._addError(e,$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)),status=!1));break;case "stateCashCardSection":$("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(a=e.val(),
""==a&&(this._addError(e,$namespace.MessageUtil.prefixError(b.PROVINCE_VALIDATION_ERROR_MESSAGE)),status=!1)):(a=e.val(),""==a&&(this._addError(e,$namespace.MessageUtil.prefixError(b.STATE_VALIDATION_ERROR_MESSAGE)),status=!1));break;case "zip":$("#country").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(b=e.val(),""!=b&&(b=/[a-zA-Z0-9\s]{0,7}/g,b=e.val().trim().match(b),null!=b&&0<b.length?(b=b.join(""),e.val(b.trim().substring(0,7))):e.val(""))):(b=e.val(),""!=b&&(b=/[0-9]{0,5}/g,b=e.val().trim().match(b),
null!=b&&0<b.length?(b=b.join(""),e.val(b.trim().substring(0,5))):e.val("")));break;case "zipCode":$("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?(b=e.val(),""!=b&&(b=/[a-zA-Z0-9\s]{0,7}/g,b=e.val().trim().match(b),null!=b&&0<b.length?(b=b.join(""),e.val(b.trim().substring(0,7))):e.val(""))):(b=e.val(),""!=b&&(b=/[0-9]{0,5}/g,b=e.val().trim().match(b),null!=b&&0<b.length?(b=b.join(""),e.val(b.trim().substring(0,5))):e.val("")))}},_checkCardholderName:function(a){var b=
$("#"+a.target.id);if($namespace.Validation.isSpaceInFirstInput(a))return a.preventDefault(),!1;$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_checkCreditCardNumber:function(a){var b=$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_checkSecurityCode:function(a){var b=$("#"+a.target.id),d=a.keyCode||a.which;($namespace.Validation.checkNumericKeyCode(a)||$namespace.Validation.isDeleteKey(a)||$namespace.Validation.isBackspaceOrArrow(a)||127==d||8==d||
0==d)&&this._removeError(b)},_checkBillingStreet:function(a){var b=$("#"+a.target.id);if($namespace.Validation.isSpaceInFirstInput(a))return a.preventDefault(),!1;$namespace.Validation.isStreetAddressKeyCode(a)&&this._removeError(b)},_checkShippingStreet:function(a){var b=$("#"+a.target.id);if($namespace.Validation.isSpaceInFirstInput(a))return a.preventDefault(),!1;$namespace.Validation.isStreetAddressKeyCode(a)&&this._removeError(b)},_checkBillingCity:function(a){var b=$("#"+a.target.id);if($namespace.Validation.isSpaceInFirstInput(a))return a.preventDefault(),
!1;$namespace.Validation.isCityNameKeyCode(a)&&this._removeError(b)},_checkZipCode:function(a){var b=this.module.TranslationTexts,d=a.target.id;"zipCode"==d&&($("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE?$("#zipCode").attr("maxlength","7"):$("#zipCode").attr("maxlength","5"));d=$("#"+d);5==d.attr("maxlength")?$namespace.Validation.checkNumericKeyCode(a)&&this._removeError(d):"focusout"==a.type?(a=d.val(),a=a.toUpperCase(),d.val(a),a.match(POSTAL_CODE_REGEX)?this._removeError(d):
this._addError(d,$namespace.MessageUtil.prefixError(b.POSTAL_CODE_VALIDATION_ERROR_MESSAGE))):!$namespace.Validation.isAlphaNumericKeyCode(a)&&32!=a.keyCode||$namespace.Validation.isBackspaceKey(a)||(a=d.val(),a=a.toUpperCase().replace(/\W/g,""),3<=a.length&&(b=a.substring(0,3),a=a.substring(3),a=b+" "+a),d.val(a),this._removeError(d))},_OnShopCardCountryLoad:function(a){if(0<$("#shopCardCountry").length)if($("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE){$("#zipCode").attr("maxlength",
"7");var b=$("#zipCode").val();b=b.toUpperCase().replace(/\W/g,"");3<=b.length&&(a=b.substring(0,3),b=b.substring(3),b=a+" "+b);$("#zipCode").val(b);$("#zipCode").attr("pattern",POSTAL_CODE_HTML_PATTERN);this._removeError($("#zipCode"))}else $("#zipCode").attr("maxlength","5"),$("#zipCode").attr("pattern",ZIPCODE_HTML_PATTERN)},_onStateChange:function(a){var b=$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b);this._validatePaymentCardAutofill(a)},_onFullPaymentStateChange:function(a){var b=
$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b);if(0==$(b).attr("data-ccIndex")){var d=this.currentPaymentOption();if("SCHEDULED_PAYMENT"==d)for(d=0;d<this.numberOfCreditCardsForScheduledPayment;d++)$("#sameAsBillingAddress_schedulePayment_"+d).prop("checked")&&($("#state_schedulePayment_"+d).val(b.val()),this._removeError($("#state_schedulePayment_"+d)));else if("FULL_PAYMENT"==d)for(d=1;d<this.numberOfCreditCardsForFullPayment;d++)$("#sameAsBillingAddress_fullPayment_"+
d).prop("checked")&&($("#state_fullPayment_"+d).val(b.val()),this._removeError($("#state_fullPayment_"+d)));$("#sameAsBillingAddress_shipping").prop("checked")&&($("#state").val(b.val()),this._removeError($("#state")))}this._validatePaymentCardAutofill(a)},_onShippingAddressStateChange:function(a){var b=$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b);this._validateShopCardAutofill(a)},_onMonthChange:function(a){var b=a.target.id,d=b.split("_"),e=d.pop();d=d.pop();e=
$("#creditCardExpirationYear_"+d+"_"+e);b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b);0<e.length&&""!=e.val()&&this._removeError(e);if("SCHEDULED_PAYMENT"==this.currentPaymentOption()&&"creditCardExpirationMonth_fullPayment_0"==b.attr("id"))for(a=0;a<this.numberOfCreditCardsForScheduledPayment;a++)$("#sameAsCreditCard_schedulePayment_"+a).prop("checked")&&($("#creditCardExpirationMonth_schedulePayment_"+a).val(b.val()),this._removeError($("#creditCardExpirationMonth_schedulePayment_"+
a)))},_onYearChange:function(a){var b=a.target.id,d=$("#"+b),e=b.split("_");b=e.pop();e=e.pop();b=$("#creditCardExpirationMonth_"+e+"_"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(d);0<b.length&&""!=b.val()&&this._removeError(b);if("SCHEDULED_PAYMENT"==this.currentPaymentOption()&&"creditCardExpirationYear_fullPayment_0"==d.attr("id"))for(a=0;a<this.numberOfCreditCardsForScheduledPayment;a++)$("#sameAsCreditCard_schedulePayment_"+a).prop("checked")&&($("#creditCardExpirationYear_schedulePayment_"+
a).val(d.val()),this._removeError($("#creditCardExpirationYear_schedulePayment_"+a)))},_onBlurAmount:function(a){var b=this.module.TranslationMessages,d=this.currentPaymentOption(),e=a.target.id;a=$("#"+e);e=$namespace.CurrencyUtil.getUnMaskedValue("#"+e);var f=this.depositAmount,g=this.grossAmount,h=$namespace.CurrencyUtil.formatCurrency({amount:f}),k=$namespace.CurrencyUtil.formatCurrency({amount:g});this._removeError(a);$namespace.CurrencyUtil.formatCurrency({amount:e-g});$namespace.CurrencyUtil.formatCurrency({amount:g-
e});if("SCHEDULED_PAYMENT"==d){for(d=0;d<this.numberOfCreditCardsForScheduledPayment;d++)this._removeError($("#creditCardAmount_schedulePayment_"+d));if(""==a.val()||0==e)b=$namespace.TranslationUtil.replaceParameters(b.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE.translatedText,{minAmount:h,maxAmount:k}),this._addError(a,$namespace.MessageUtil.prefixError(b)),status=!1;else if(e<Number(f)||e>Number(g))b=$namespace.TranslationUtil.replaceParameters(b.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE.translatedText,
{minAmount:h,maxAmount:k}),this._addError(a,$namespace.MessageUtil.prefixError(b)),$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","Amount",this.packageId),status=!1;this.validateAndAdjustScheduledOrFullPaymentAmount();this.updateCurrency()}else if("FULL_PAYMENT"==d){for(d=b=0;d<this.numberOfCreditCardsForFullPayment;d++)this._removeError($("#creditCardAmount_fullPayment_"+d)),a=parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+
d)),b=parseFloat(b)+a;Math.round(100*parseFloat(b))/100<Math.round(100*parseFloat(this.grossAmount))/100&&this.numberOfCreditCardsForFullPayment!==parseInt(this.maxCreditCards)?(this.addCreditCardButton.show(),this.addCreditCardButton.removeAttr("disabled")):this.addCreditCardButton.attr("disabled","disabled")}},_checkUseSameCreditCardAsDeposit:function(a){var b=a.target.id;a=$("#"+b).prop("checked");b=$("#"+b).attr("data-ccIndex");this.clearScheduleCardValidations(b);a?(this.displayInitialCreditCard(b,
"SCHEDULED_PAYMENT"),this.setDisabledValueForCreditCard(b,"SCHEDULED_PAYMENT",!0),$("#sameAsBillingAddress_schedulePayment_"+b).prop("checked",!0),$("#sameAsBillingAddress_schedulePayment_"+b).attr("disabled",!0),this.displayInitialBillingAddress(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",!0)):(this.clearUpInitialCreditCard(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForCreditCard(b,"SCHEDULED_PAYMENT",!1),$("#sameAsBillingAddress_schedulePayment_"+b).prop("checked",
!1),$("#sameAsBillingAddress_schedulePayment_"+b).removeAttr("disabled"),this.clearUpInitialBillingAddress(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",!1))},_checkUseSameBillingAddressAsDeposit:function(a){var b=a.target.id;a=$("#"+b).prop("checked");b=$("#"+b).attr("data-ccIndex");this.clearScheduleCardBillingAddressValidations(b,"SCHEDULED_PAYMENT");a?(this.displayInitialBillingAddress(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",
!0)):(this.clearUpInitialBillingAddress(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",!1))},_checkUseSameBillingAddressAsFullPayment:function(a){var b=a.target.id;a=$("#"+b).prop("checked");b=$("#"+b).attr("data-ccIndex");a?(this.clearScheduleCardBillingAddressValidations(b,"FULL_PAYMENT"),this.displayInitialBillingAddress(b,"FULL_PAYMENT"),this.setDisabledValueForBillingAddress(b,"FULL_PAYMENT",!0)):(this.clearUpInitialBillingAddress(b,"FULL_PAYMENT"),this.setDisabledValueForBillingAddress(b,
"FULL_PAYMENT",!1))},_checkConfirmCashCardShippingAddress:function(a){a=$("#confirmCashCardShippingAddress");$("#confirmCashCardShippingAddress").prop("checked")&&(this._removeError(a),$("#confirmCCShippingAddress").removeClass("sp-bot-6 sp-bot-8-mb"))},displayInitialCreditCard:function(a,b){"SCHEDULED_PAYMENT"==b&&($("#creditCardHolderName_schedulePayment_"+a).val($("#creditCardHolderName_fullPayment_0").val()),$("#creditCardNumber_schedulePayment_"+a).val($("#creditCardNumber_fullPayment_0").val()),
$("#creditCardExpirationMonth_schedulePayment_"+a).val($("#creditCardExpirationMonth_fullPayment_0").val()),$("#creditCardExpirationYear_schedulePayment_"+a).val($("#creditCardExpirationYear_fullPayment_0").val()))},clearUpInitialBillingAddress:function(a,b){"SCHEDULED_PAYMENT"==b?($("#street1_schedulePayment_"+a).val(""),$("#street2_schedulePayment_"+a).val(""),$("#city_schedulePayment_"+a).val(""),$("#state_schedulePayment_"+a).val(""),$("#zip_schedulePayment_"+a).val("")):"FULL_PAYMENT"==b?($("#street1_fullPayment_"+
a).val(""),$("#street2_fullPayment_"+a).val(""),$("#city_fullPayment_"+a).val(""),$("#state_fullPayment_"+a).val(""),$("#zip_fullPayment_"+a).val("")):"SHIPPING"==b&&($("#street1").val(""),$("#street2").val(""),$("#city").val(""),$("#state").val(""),$("#zip").val(""));this.loadStates(b,a)},loadStates:function(a,b,d,e){var f=null,g=null,h=null,k=null,l=this.module.TranslationTexts;""==a||"sameAsShippingAddress"==d?(f=document.getElementById("country").value,g=document.getElementById("state").value,
h=document.getElementById("shippingStateOrProvinceSpan"),k=document.getElementById("shippingZipOrPostalSpan")):""==a||"sameAsBillingAddress"==d?(f=document.getElementById("country_fullPayment_0").value,g=document.getElementById("state_fullPayment_0").value,h=document.getElementById("depositBillingStateOrProvinceSpan"+b),k=document.getElementById("depositBillingZipOrPostalSpan"+b)):"SCHEDULED_PAYMENT"==a||"SCHEDULED_AND_FULL_PAYMENT"==a?(f=document.getElementById("country_schedulePayment_"+b).value,
g=document.getElementById("state_schedulePayment_"+b).value,h=document.getElementById("scheduleBillingStateOrProvinceSpan"+b),k=document.getElementById("scheduleBillingZipOrPostalSpan"+b)):"FULL_PAYMENT"==a?(f=document.getElementById("country_fullPayment_"+b).value,g=document.getElementById("state_fullPayment_"+b).value,h=document.getElementById("depositBillingStateOrProvinceSpan"+b),k=document.getElementById("depositBillingZipOrPostalSpan"+b)):"SHIPPING"==a&&(f=document.getElementById("country").value,
g=-1==b?document.getElementById("state_fullPayment_0").value:document.getElementById("state").value,h=document.getElementById("shippingStateOrProvinceSpan"),k=document.getElementById("shippingZipOrPostalSpan"));f==$namespace.Country.CANADA_COUNTRY_CODE?(h.innerHTML=l.PROVINCE_LABEL,k.innerHTML=l.POSTALCODE_LABEL):(h.innerHTML=l.STATE_LABEL,k.innerHTML=l.ZIPCODE_LABEL);$namespace.AjaxUtil.makeAjaxCall("paymentOptions.act","vppm=LOAD_STATES_PROVINCES_FOR_COUNTRY&country="+f+("&state="+g),null,null,
function(b,d){if("SCHEDULED_PAYMENT"==a)b=JSON.parse(b),b.unshift({value:"",text:l.SELECT_TEXT}),b=JSON.stringify(b),$namespace.DomUtil.replaceOptions("state_schedulePayment_"+d,b),"SAME AS PERVIOUS CARD"==e&&$("#state_schedulePayment_"+d).val($("#state_fullPayment_0").val());else if("FULL_PAYMENT"==a)b=JSON.parse(b),b.unshift({value:"",text:l.SELECT_TEXT}),b=JSON.stringify(b),$namespace.DomUtil.replaceOptions("state_fullPayment_"+d,b),document.getElementById("sameAsBillingAddress_shipping").checked&&
(document.getElementById("country").value=document.getElementById("country_fullPayment_0").value,$namespace.DomUtil.replaceOptions("state",b));else if("SHIPPING"==a)b=JSON.parse(b),b.unshift({value:"",text:l.SELECT_TEXT}),b=JSON.stringify(b),$namespace.DomUtil.replaceOptions("state_fullPayment_"+d,b),$namespace.DomUtil.replaceOptions("state",b);else if("SCHEDULED_AND_FULL_PAYMENT"==a){b=JSON.parse(b);b.unshift({value:"",text:l.SELECT_TEXT});b=JSON.stringify(b);for(var f=0;f<=d;f++)$namespace.DomUtil.replaceOptions("state_schedulePayment_"+
f,b);$namespace.DomUtil.replaceOptions("state_fullPayment_0",b);document.getElementById("country").value=document.getElementById("country_fullPayment_0").value;$namespace.DomUtil.replaceOptions("state",b)}return!0},"",[b])},clearDepositCardValidations:function(a){var b=$("#creditCardAmount_fullPayment_"+a),d=$("#creditCardHolderName_fullPayment_"+a),e=$("#creditCardNumber_fullPayment_"+a),f=$("#creditCardExpirationMonth_fullPayment_"+a),g=$("#creditCardExpirationYear_fullPayment_"+a),h=$("#creditCardSecurityCode_fullPayment_"+
a),k=$("#street1_fullPayment_"+a),l=$("#city_fullPayment_"+a),p=$("#zip_fullPayment_"+a);a=$("#state_fullPayment_"+a);this._removeError(b);this._removeError(d);this._removeError(e);this._removeError(f);this._removeError(g);this._removeError(h);this._removeError(k);this._removeError(l);this._removeError(p);this._removeError(a)},clearScheduleCardValidations:function(a){var b=$("#creditCardAmount_schedulePayment_"+a),d=$("#creditCardHolderName_schedulePayment_"+a),e=$("#creditCardNumber_schedulePayment_"+
a),f=$("#creditCardExpirationMonth_schedulePayment_"+a),g=$("#creditCardExpirationYear_schedulePayment_"+a),h=$("#street1_schedulePayment_"+a),k=$("#city_schedulePayment_"+a),l=$("#zip_schedulePayment_"+a);a=$("#state_schedulePayment_"+a);this._removeError(b);this._removeError(d);this._removeError(e);this._removeError(f);this._removeError(g);this._removeError(h);this._removeError(k);this._removeError(l);this._removeError(a)},clearScheduleCardBillingAddressValidations:function(a,b){if("SCHEDULED_PAYMENT"==
b){var d=$("#street1_schedulePayment_"+a);var e=$("#city_schedulePayment_"+a);var f=$("#zip_schedulePayment_"+a);var g=$("#state_schedulePayment_"+a)}else"FULL_PAYMENT"==b&&(d=$("#street1_fullPayment_"+a),e=$("#city_fullPayment_"+a),f=$("#zip_fullPayment_"+a),g=$("#state_fullPayment_"+a));this._removeError(d);this._removeError(e);this._removeError(f);this._removeError(g)},_displayBillingAddress:function(a){a=$("#"+a.target.id);this.updateBillingAddress(a)},updateBillingAddress:function(a){var b=this.currentPaymentOption();
if("SCHEDULED_PAYMENT"==b)if(b=this.numberOfCreditCardsForScheduledPayment,"street1_fullPayment_0"==a.attr("id"))for(var d=0;d<b;d++)$("#sameAsBillingAddress_schedulePayment_"+d).prop("checked")&&($("#street1_schedulePayment_"+d).val(a.val()),this._removeError($("#street1_schedulePayment_"+d)));else if("street2_fullPayment_0"==a.attr("id"))for(d=0;d<b;d++)$("#sameAsBillingAddress_schedulePayment_"+d).prop("checked")&&$("#street2_schedulePayment_"+d).val(a.val());else if("city_fullPayment_0"==a.attr("id"))for(d=
0;d<b;d++)$("#sameAsBillingAddress_schedulePayment_"+d).prop("checked")&&($("#city_schedulePayment_"+d).val(a.val()),this._removeError($("#city_schedulePayment_"+d)));else{if("zip_fullPayment_0"==a.attr("id"))for(d=0;d<b;d++)$("#sameAsBillingAddress_schedulePayment_"+d).prop("checked")&&($("#zip_schedulePayment_"+d).val(a.val()),this._removeError($("#zip_schedulePayment_"+d)))}else if("FULL_PAYMENT"==b)if("street1_fullPayment_0"==a.attr("id"))for(d=1;d<this.numberOfCreditCardsForFullPayment;d++)$("#sameAsBillingAddress_fullPayment_"+
d).prop("checked")&&($("#street1_fullPayment_"+d).val(a.val()),this._removeError($("#street1_fullPayment_"+d)));else if("street2_fullPayment_0"==a.attr("id"))for(d=1;d<this.numberOfCreditCardsForFullPayment;d++)$("#sameAsBillingAddress_fullPayment_"+d).prop("checked")&&$("#street2_fullPayment_"+d).val(a.val());else if("city_fullPayment_0"==a.attr("id"))for(d=1;d<this.numberOfCreditCardsForFullPayment;d++)$("#sameAsBillingAddress_fullPayment_"+d).prop("checked")&&($("#city_fullPayment_"+d).val(a.val()),
this._removeError($("#city_fullPayment_"+d)));else if("zip_fullPayment_0"==a.attr("id"))for(d=1;d<this.numberOfCreditCardsForFullPayment;d++)$("#sameAsBillingAddress_fullPayment_"+d).prop("checked")&&($("#zip_fullPayment_"+d).val(a.val()),this._removeError($("#zip_fullPayment_"+d)));$("#sameAsBillingAddress_shipping").prop("checked")&&("street1_fullPayment_0"==a.attr("id")?($("#street1").val(a.val()),this._removeError($("#street1"))):"street2_fullPayment_0"==a.attr("id")?$("#street2").val(a.val()):
"city_fullPayment_0"==a.attr("id")?($("#city").val(a.val()),this._removeError($("#city"))):"zip_fullPayment_0"==a.attr("id")&&($("#zip").val(a.val()),this._removeError($("#zip"))))},_addAnotherCard:function(){if(this.isSchedulePayment)if(1<=this.numberOfCreditCardsForScheduledPayment&&this.numberOfCreditCardsForScheduledPayment<this.maxCreditCards){var a=this.numberOfCreditCardsForScheduledPayment-1;if("AmExCard"==this.checkCreditCard(document.getElementById("creditCardNumber_schedulePayment_"+a).value)){var b=
[];b.push(a);AjaxUtil.makeAjaxCall("paymentOptions.act","pm=7&scheduledDate="+cardScheduledDate,null,null,callbackAddAnotherCard,"",b)}else this.addCreditCard()}else this.addCreditCard();else this.addCreditCard()},addCreditCard:function(){var a=0,b=this.module.TranslationMessages;if(this.isSchedulePayment){if(1<=this.numberOfCreditCardsForScheduledPayment&&this.numberOfCreditCardsForScheduledPayment<this.maxCreditCards){for(var d=0;d<this.numberOfCreditCardsForScheduledPayment;d++){var e=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+
d);a=parseFloat(a+parseFloat(e))}document.getElementById("schedulePaymentDataDiv_"+this.numberOfCreditCardsForScheduledPayment).style.display="block";document.getElementById("remove_schedulePayment_"+this.numberOfCreditCardsForScheduledPayment).style.display="inline-block";a=parseFloat(this.grossAmount-$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0")-parseFloat(a)).toFixed(2);1==isNaN(a)&&(a="");$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_schedulePayment_"+
this.numberOfCreditCardsForScheduledPayment,a);a=document.getElementById("sameAsCreditCard_schedulePayment_"+this.numberOfCreditCardsForScheduledPayment);a.checked=!1;a.disabled=!1;this.showHideCreditCardForSchedulePayment(a,this.numberOfCreditCardsForScheduledPayment);this.numberOfCreditCardsForScheduledPayment++;this.enumerateCreditCardLabel();this.updateCurrency();for(d=0;d<this.numberOfCreditCardsForScheduledPayment;d++)document.getElementById("legendScheduleFinalPayment_"+d).innerText=$namespace.TranslationUtil.replaceParameters(b.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD.translatedText,
{cardIndex:d+1}),document.getElementById("legendScheduleBillingAddress_"+d).innerHTML=$namespace.TranslationUtil.replaceParameters(b.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS.translatedText,{cardIndex:d+1})}this.numberOfCreditCardsForScheduledPayment==this.maxCreditCards?this.addCreditCardButton.hide():this.addCreditCardButton.attr("disabled","disabled")}else{if(1<=this.numberOfCreditCardsForFullPayment&&this.numberOfCreditCardsForFullPayment<this.maxCreditCards){for(d=0;d<this.numberOfCreditCardsForFullPayment;d++)e=
$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+d),a=parseFloat(a+parseFloat(e));document.getElementById("currentPaymentDataDiv_"+this.numberOfCreditCardsForFullPayment).style.display="block";document.getElementById("remove_fullPayment_"+this.numberOfCreditCardsForFullPayment).style.display="block";$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_fullPayment_"+this.numberOfCreditCardsForFullPayment,0);a=parseFloat(this.grossAmount-parseFloat(a)).toFixed(2);1==isNaN(a)&&
(a="");$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_fullPayment_"+this.numberOfCreditCardsForFullPayment,a);this.numberOfCreditCardsForFullPayment++;this.enumerateCreditCardLabel();this.updateCurrency();for(d=0;d<this.numberOfCreditCardsForFullPayment;d++)document.getElementById("legendFullPayment_"+d).innerText=$namespace.TranslationUtil.replaceParameters(b.PAY_THE_FULL_AMOUNT_CREDIT_CARD.translatedText,{cardIndex:d+1}),document.getElementById("legendUseBillingAddress_"+d).innerHTML=
$namespace.TranslationUtil.replaceParameters(b.PAY_THE_FULL_AMOUNT_BILLING_ADDRESS.translatedText,{cardIndex:d+1})}this.numberOfCreditCardsForFullPayment==this.maxCreditCards?this.addCreditCardButton.hide():this.addCreditCardButton.attr("disabled","disabled")}return!0},showHideCreditCardForSchedulePayment:function(a,b){a.checked?(this.displayInitialCreditCard(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForCreditCard(b,"SCHEDULED_PAYMENT",!0),document.getElementById("sameAsBillingAddress_schedulePayment_"+
b).checked=!0,document.getElementById("sameAsBillingAddress_schedulePayment_"+b).disabled=!0,this.displayInitialBillingAddress(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",!0)):(this.clearUpInitialCreditCard(b,"SCHEDULED_PAYMENT"),this.setDisabledValueForCreditCard(b,"SCHEDULED_PAYMENT",!1),document.getElementById("sameAsBillingAddress_schedulePayment_"+b).checked=!1,document.getElementById("sameAsBillingAddress_schedulePayment_"+b).disabled=!1,this.clearUpInitialBillingAddress(b,
"SCHEDULED_PAYMENT"),this.setDisabledValueForBillingAddress(b,"SCHEDULED_PAYMENT",!1))},clearUpInitialCreditCard:function(a,b){"FULL_PAYMENT"==b?(document.getElementById("creditCardHolderName_fullPayment_"+a).value="",document.getElementById("creditCardNumber_fullPayment_"+a).value="",document.getElementById("creditCardExpirationMonth_fullPayment_"+a).value="",document.getElementById("creditCardExpirationYear_fullPayment_"+a).value="",document.getElementById("creditCardSecurityCode_fullPayment_"+
a).value=""):"SCHEDULED_PAYMENT"==b&&(document.getElementById("creditCardHolderName_schedulePayment_"+a).value="",document.getElementById("creditCardNumber_schedulePayment_"+a).value="",document.getElementById("creditCardExpirationMonth_schedulePayment_"+a).value="",document.getElementById("creditCardExpirationYear_schedulePayment_"+a).value="")},setDisabledValueForCreditCard:function(a,b,d){"FULL_PAYMENT"==b?(document.getElementById("creditCardHolderName_fullPayment_"+a).disabled=d,document.getElementById("creditCardNumber_fullPayment_"+
a).disabled=d,document.getElementById("creditCardExpirationMonth_fullPayment_"+a).disabled=d,document.getElementById("creditCardExpirationYear_fullPayment_"+a).disabled=d,document.getElementById("creditCardSecurityCode_fullPayment_"+a).disabled=d):"SCHEDULED_PAYMENT"==b&&(document.getElementById("creditCardHolderName_schedulePayment_"+a).disabled=d,document.getElementById("creditCardNumber_schedulePayment_"+a).disabled=d,document.getElementById("creditCardExpirationMonth_schedulePayment_"+a).disabled=
d,document.getElementById("creditCardExpirationYear_schedulePayment_"+a).disabled=d)},displayInitialBillingAddress:function(a,b){"FULL_PAYMENT"==b?(document.getElementById("street1_fullPayment_"+a).value=document.getElementById("street1_fullPayment_0").value,document.getElementById("street2_fullPayment_"+a).value=document.getElementById("street2_fullPayment_0").value,document.getElementById("city_fullPayment_"+a).value=document.getElementById("city_fullPayment_0").value,document.getElementById("country_fullPayment_"+
a).value=document.getElementById("country_fullPayment_0").value,this.loadStates(b,a,"sameAsBillingAddress"),document.getElementById("state_fullPayment_"+a).value=document.getElementById("state_fullPayment_0").value,document.getElementById("zip_fullPayment_"+a).value=document.getElementById("zip_fullPayment_0").value):"SCHEDULED_PAYMENT"==b?(document.getElementById("street1_schedulePayment_"+a).value=document.getElementById("street1_fullPayment_0").value,document.getElementById("street2_schedulePayment_"+
a).value=document.getElementById("street2_fullPayment_0").value,document.getElementById("city_schedulePayment_"+a).value=document.getElementById("city_fullPayment_0").value,document.getElementById("country_schedulePayment_"+a).value=document.getElementById("country_fullPayment_0").value,this.loadStates(b,a,"","SAME AS PERVIOUS CARD"),document.getElementById("zip_schedulePayment_"+a).value=document.getElementById("zip_fullPayment_0").value):"SHIPPING"==b&&(document.getElementById("street1").value=
document.getElementById("street1_fullPayment_0").value,document.getElementById("street2").value=document.getElementById("street2_fullPayment_0").value,document.getElementById("city").value=document.getElementById("city_fullPayment_0").value,document.getElementById("country").value=document.getElementById("country_fullPayment_0").value,this.loadStates(b,a,""),-1!=a&&(document.getElementById("state").value=document.getElementById("state_fullPayment_0").value),document.getElementById("zip").value=document.getElementById("zip_fullPayment_0").value)},
setDisabledValueForBillingAddress:function(a,b,d){"FULL_PAYMENT"==b?(document.getElementById("street1_fullPayment_"+a).disabled=d,document.getElementById("street2_fullPayment_"+a).disabled=d,document.getElementById("city_fullPayment_"+a).disabled=d,document.getElementById("state_fullPayment_"+a).disabled=d,document.getElementById("country_fullPayment_"+a).disabled=d,document.getElementById("zip_fullPayment_"+a).disabled=d):"SCHEDULED_PAYMENT"==b?(document.getElementById("street1_schedulePayment_"+
a).disabled=d,document.getElementById("street2_schedulePayment_"+a).disabled=d,document.getElementById("city_schedulePayment_"+a).disabled=d,document.getElementById("state_schedulePayment_"+a).disabled=d,document.getElementById("country_schedulePayment_"+a).disabled=d,document.getElementById("zip_schedulePayment_"+a).disabled=d):"SHIPPING"==b&&(document.getElementById("street1").disabled=d,document.getElementById("street2").disabled=d,document.getElementById("city").disabled=d,document.getElementById("state").disabled=
d,document.getElementById("country").disabled=d,document.getElementById("zip").disabled=d)},_onScheduleAmountChanged:function(a){a=$("#"+a.target.id);this._removeError(a);a=0;var b=parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0"));for(var d=parseFloat(this.grossAmount)-parseFloat(b),e=0;e<this.numberOfCreditCardsForScheduledPayment;e++)b=parseFloat($namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+e)),a=parseFloat(a)+b;Math.round(100*
parseFloat(a))/100<Math.round(100*parseFloat(d))/100&&this.numberOfCreditCardsForScheduledPayment!==parseInt(this.maxCreditCards)?(this.addCreditCardButton.show(),this.addCreditCardButton.removeAttr("disabled")):this.addCreditCardButton.attr("disabled","disabled")},_displayCreditCardInfo:function(a){a=$("#"+a.target.id);this.updateSchedulePaymentCard(a)},updateSchedulePaymentCard:function(a){if("creditCardHolderName_fullPayment_0"==a.attr("id"))for(var b=0;b<this.numberOfCreditCardsForScheduledPayment;b++)$("#sameAsCreditCard_schedulePayment_"+
b).prop("checked")&&($("#creditCardHolderName_schedulePayment_"+b).val(a.val()),this._removeError($("#creditCardHolderName_schedulePayment_"+b)));if("creditCardNumber_fullPayment_0"==a.attr("id"))for(b=0;b<this.numberOfCreditCardsForScheduledPayment;b++)$("#sameAsCreditCard_schedulePayment_"+b).prop("checked")&&($("#creditCardNumber_schedulePayment_"+b).val(a.val()),this._removeError($("#creditCardNumber_schedulePayment_"+b)))},_removeCreditCard:function(a){var b=0;var d="";utils.updateLiveContainer();
this.isSchedulePayment?d="SCHEDULED_PAYMENT":this.isSchedulePayment||(d="FULL_PAYMENT");var e=a.target.id.split("-").pop();e=parseInt(e);var f=this.module.TranslationTexts,g=this.module.TranslationMessages;if("SCHEDULED_PAYMENT"==d){a="Schedule Payment";document.getElementById("schedulePaymentDataDiv_"+e).style.display="none";this.numberOfCreditCardsForScheduledPayment--;for(var h=0;h<this.maxCreditCards;h++)"block"==$("#schedulePaymentDataDiv_"+h).css("display")&&(d=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+
h),b=parseFloat(b+parseFloat(d)));d=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+(e-1));b=parseFloat(this.grossAmount-$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_0")-parseFloat(b)).toFixed(2);d=parseFloat(b)+parseFloat(d);1==isNaN(d)&&(d="");1==e&&"block"==$("#schedulePaymentDataDiv_2").css("display")?(b=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_schedulePayment_"+(e+1)),$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_schedulePayment_"+
e,b.toFixed(2)),this.updateCreditCardAmount(e,d),document.getElementById("schedulePaymentDataDiv_"+e).style.display="block",$("#schedulePaymentDataDiv_"+(e+1)).hide()):(this.updateCreditCardAmount(e,d),this.enumerateCreditCardLabel());this._setFocusOnRemovingCard(e,this.numberOfCreditCardsForScheduledPayment);this.updateCurrency();0<=e-1&&(this.addCreditCardButton.show(),this.addCreditCardButton.attr("disabled","disabled"));for(e=0;e<this.numberOfCreditCardsForScheduledPayment;e++)1==this.numberOfCreditCardsForScheduledPayment?
(document.getElementById("legendScheduleFinalPayment_0").innerText=f.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendScheduleBillingAddress_0").innerHTML=f.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE):(document.getElementById("legendScheduleFinalPayment_"+e).innerText=$namespace.TranslationUtil.replaceParameters(g.PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD.translatedText,{cardIndex:e+1}),document.getElementById("legendScheduleBillingAddress_"+e).innerHTML=$namespace.TranslationUtil.replaceParameters(g.PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS.translatedText,
{cardIndex:e+1}));e=$("#creditCardAmount_schedulePayment_"+(this.numberOfCreditCardsForScheduledPayment-1)).removeAttr("aria-labelledby");f=e.val();g=$namespace.TranslationUtil.replaceParameters(g.PAYMENT_AMOUNT_CHANGE_CREDIT_CARD_TEXT.translatedText,{paymentType:a,creditCardIndex:this.numberOfCreditCardsForScheduledPayment,currentValue:f});utils.updateLiveContainer(g);e.attr("aria-labelledby","final_amount_"+(this.numberOfCreditCardsForScheduledPayment-1))}else if("FULL_PAYMENT"==d){e=a.target.id.split("-").pop();
e=parseInt(e);a="Full Payment";document.getElementById("currentPaymentDataDiv_"+e).style.display="none";this.numberOfCreditCardsForFullPayment--;for(h=0;h<this.maxCreditCards;h++)"block"==$("#currentPaymentDataDiv_"+h).css("display")&&(d=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+h),b=parseFloat(b+parseFloat(d)));d=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+(e-1));b=parseFloat(this.grossAmount-parseFloat(b)).toFixed(2);d=parseFloat(b)+
parseFloat(d);1==isNaN(d)&&(d="");1==e&&"block"==$("#currentPaymentDataDiv_2").css("display")?(b=$namespace.CurrencyUtil.getUnMaskedValue("#creditCardAmount_fullPayment_"+(e+1)),$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_fullPayment_"+e,b.toFixed(2)),this.updateCreditCardAmount(e,d),document.getElementById("currentPaymentDataDiv_"+e).style.display="block",$("#currentPaymentDataDiv_"+(e+1)).hide()):(this.updateCreditCardAmount(e,d),this.enumerateCreditCardLabel());this._setFocusOnRemovingCard(e,
this.numberOfCreditCardsForFullPayment);this.updateCurrency();0<=e-1&&(this.addCreditCardButton.show(),this.addCreditCardButton.attr("disabled","disabled"));for(e=0;e<this.numberOfCreditCardsForFullPayment;e++)1==this.numberOfCreditCardsForFullPayment?(document.getElementById("legendFullPayment_0").innerText=f.PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE,document.getElementById("legendUseBillingAddress_0").innerHTML=f.PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE):(document.getElementById("legendFullPayment_"+e).innerText=
$namespace.TranslationUtil.replaceParameters(g.PAY_THE_FULL_AMOUNT_CREDIT_CARD.translatedText,{cardIndex:e+1}),document.getElementById("legendUseBillingAddress_"+e).innerHTML=$namespace.TranslationUtil.replaceParameters(g.PAY_THE_FULL_AMOUNT_BILLING_ADDRESS.translatedText,{cardIndex:e+1}));e=$("#creditCardAmount_fullPayment_"+(this.numberOfCreditCardsForFullPayment-1)).removeAttr("aria-labelledby");f=e.val();g=$namespace.TranslationUtil.replaceParameters(g.PAYMENT_AMOUNT_CHANGE_CREDIT_CARD_TEXT.translatedText,
{paymentType:a,creditCardIndex:this.numberOfCreditCardsForFullPayment,currentValue:f});utils.updateLiveContainer(g);e.attr("aria-labelledby","creditCardAmount_fullPayment_"+(this.numberOfCreditCardsForFullPayment-1))}$(window).trigger("resize")},_validateCreditCardNumber:function(a){a=$("#"+a.target.id);var b=this.module.TranslationTexts;this._removeError(a);var d=this.checkCreditCard(a.val());""!=a.val()&&null==a.val().trim().match(CREDIT_CARD_NUMBER_REGEX)?(this._addError(a,$namespace.MessageUtil.prefixError(b.CARD_NUMBER_INVALID_ERROR_MESSAGE)),
status=!1):""==a.val()||a.val().length<CREDIT_CARD_MAX_LENGTH&&13!==a.val().length?(a.val().length<CREDIT_CARD_MAX_LENGTH&&0<a.val().length?this._addError(a,$namespace.MessageUtil.prefixError(b.CARD_NUMBER_INVALID_ERROR_MESSAGE)):this._addError(a,$namespace.MessageUtil.prefixError(b.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE)),status=!1):"UNKNOWN"==d&&(this._addError(a,$namespace.MessageUtil.prefixError(b.CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER)),$namespace.Analytics.trackEvent("Error/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","CC_invalid",this.packageId),status=!1)},_onKeyPressPrimaryPhone:function(a){var b=a.charCode||a.keyCode||0,d=$("#primary_phone");$namespace.Validation.isBlankOrNull(a)||this._removeError(d);8!==b&&9!==b&&(3===d.val().length?d.val(d.val()+"-"):7===d.val().length&&d.val(d.val()+"-"))},_onKeyPressAlternatePhone:function(a){var b=a.charCode||a.keyCode||0,d=$("#alternate_phone");$namespace.Validation.isBlankOrNull(a)||
this._removeError(d);8!==b&&9!==b&&(3===d.val().length?d.val(d.val()+"-"):7===d.val().length&&d.val(d.val()+"-"))},formatPhoneOnFormLoad:function(a){var b=$("#"+a),d=$("#"+a).val();d=d.replace(/\W/g,"");d=d.replace(/[A-Za-z]/g,"");var e=d.substring(0,3);a=d.substring(3,6);d=d.substring(6,10);e=""+e;0<a.length&&(e=e+"-"+a);0<d.length&&(e=e+"-"+d);b.val(e)},_validateEmail:function(a){a=$("#"+a.target.id);this._removeError(a)},updateCreditCardAmount:function(a,b){if(this.isSchedulePayment){var d=$("#schedulePaymentDataDiv_1"),
e=$("#schedulePaymentDataDiv_2");a="none"==d.css("display")&&1==a?0:"none"==e.css("display")&&2==a&&"block"==d.css("display")?1:0;isNaN(a)||$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_schedulePayment_"+a,b)}else this.isSchedulePayment||(d=$("#currentPaymentDataDiv_1"),e=$("#currentPaymentDataDiv_2"),a="none"==d.css("display")&&1==a?0:"none"==e.css("display")&&2==a&&"block"==d.css("display")?1:0,isNaN(a)||$namespace.CurrencyUtil.setMaskedValue("#creditCardAmount_fullPayment_"+a,b))},
enumerateCreditCardLabel:function(){var a=this.module.TranslationTexts,b=this.module.TranslationMessages;if(this.isSchedulePayment){var d=0;var e=this.numberOfCreditCardsForScheduledPayment;for(var f=0;f<=e;f++)"block"==$("#schedulePaymentDataDiv_"+f).css("display")&&d++;"Credit-Card-1"==$("#titleFullPaymentCreditCardLabelHeading_0").attr("data-fullPaymentCardLabel")&&$("#titleFullPaymentCreditCardLabelHeading_0").html(a.CREDIT_CARD_TEXT);if(1==d)e=$("#titleSchedulePaymentCreditCardLabelHeading_0"),
e.html(a.CREDIT_CARD_TEXT),$("#titleFullPaymentCreditCardLabelHeading_0").attr("data-fullPaymentCardLabel","Credit-Card");else for(a=0;a<d;a++)e=$("#titleSchedulePaymentCreditCardLabelHeading_"+a),f=$namespace.TranslationUtil.replaceParameters(b.CREDIT_CARD_ENUMERATED_TEXT.translatedText,{creditCardIndex:a+1}),e.html(f),$("#titleFullPaymentCreditCardLabelHeading_"+a).attr("data-fullPaymentCardLabel","Credit-Card-"+(a+1))}else if(!this.isSchedulePayment){d=0;e=this.numberOfCreditCardsForFullPayment;
for(f=0;f<=e;f++)"block"==$("#currentPaymentDataDiv_"+f).css("display")&&d++;if(1==d)e=$("#titleFullPaymentCreditCardLabelHeading_0"),e.text(a.CREDIT_CARD_TEXT),$("#titleFullPaymentCreditCardLabelHeading_0").attr("data-schedulePaymentCardLabel","Credit-Card");else for(a=0;a<d;a++)e=$("#titleFullPaymentCreditCardLabelHeading_"+a),f=$namespace.TranslationUtil.replaceParameters(b.CREDIT_CARD_ENUMERATED_TEXT.translatedText,{creditCardIndex:a+1}),e.text(f),$("#titleFullPaymentCreditCardLabelHeading_"+
a).attr("data-fullPaymentCardLabel","Credit-Card-"+(a+1))}},_showHideBillingAddressForShipping:function(a){a=$("#"+a.target.id);if(a.prop("checked")){a=$("#street1");var b=$("#street2"),d=$("#city"),e=$("#zip"),f=$("#state");this._removeError(a);this._removeError(d);this._removeError(e);this._removeError(f);this._removeError(b);this.displayInitialBillingAddress(-1,"SHIPPING");this.setDisabledValueForBillingAddress(-1,"SHIPPING",!0)}else this.clearUpInitialBillingAddress(-1,"SHIPPING"),this.setDisabledValueForBillingAddress(-1,
"SHIPPING",!1),a=a.attr("data-default-country"),$("#country").val(a),this._onShippingCountryChange()},_initializeShippingAddressCard:function(){$("#sameAsBillingAddress_shipping").prop("checked",!0);this.displayInitialBillingAddress(-1,"SHIPPING");this.setDisabledValueForBillingAddress(-1,"SHIPPING",!0)},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),{parentSelector:"li"}))})},_showHideSchedulePaymentOnDepositChange:function(a){a?
(this.schedulePaymentBlock.hasClass("displayBlock")&&(this.schedulePaymentBlock.removeClass("displayBlock"),this.schedulePaymentBlock.addClass("displayNone")),this.addCreditCardButton.hide(),this.numberOfCreditCardsForScheduledPayment=0):(this.schedulePaymentBlock.hasClass("displayNone")&&(this.schedulePaymentBlock.removeClass("displayNone"),this.schedulePaymentBlock.addClass("displayBlock")),this.addCreditCardButton.show(),this.numberOfCreditCardsForScheduledPayment=1,document.getElementById("schedulePaymentDataDiv_1").style.display=
"none",document.getElementById("schedulePaymentDataDiv_2").style.display="none",this.enumerateCreditCardLabel(),this.addCreditCardButton.attr("disabled","disabled"))},_onMemberDetailsAutoFill:function(a){this.formatPhoneOnFormLoad("alternate_phone");this.formatPhoneOnFormLoad("primary_phone")},_onDropDownSelect:function(a){a.preventDefault();var b=a.target.id;"focusout"==a.type?(a=$(a.currentTarget),$("#"+b).hasClass("active")?($("#"+b).removeClass("active"),a.parent().removeClass("focus")):a.parent().hasClass("focus")?
a.parent().removeClass("focus"):$("#"+b).addClass("active")):"focusin"==a.type?(a=$(a.currentTarget),a.parent().addClass("focus")):"click"==a.type&&($("#"+b).hasClass("active")?$("#"+b).removeClass("active"):$("#"+b).addClass("active"))},_onPromotionCodeChange:function(a){$("#promotionCodeEntry").removeClass("error")},_setFocusOnRemovingCard:function(a,b){var d=$("#memberContactDetailsCardHeading");if(this.isSchedulePayment){var e=$("#titleSchedulePaymentCreditCardLabelHeading_1");1==a&&2==b?(e.attr("tabindex")&&
e.removeAttr("tabindex"),e.attr("tabindex","-1").focus()):d.attr("tabindex","-1").focus()}else 1==a&&2==b?(a=$("#titleFullPaymentCreditCardLabelHeading_1"),a.attr("tabindex")&&a.removeAttr("tabindex"),a.attr("tabindex","-1").focus()):d.attr("tabindex","-1").focus()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};$namespace.View=$namespace.View||{};
$namespace.View.FinalizeBookingSummaryView=Backbone.View.extend({el:"#vpFinalizeBookingSummary",ui:{chatLink:null,translationTexts:null,packageId:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="edit_Shipping_Address_Link"]':"_onEditShippingAddressClick",'click [data-hook="edit_Payment_Link"]':"_onEditPaymentClick",'click [data-hook="edit_Travelers_Link"]':"_onEditTravelersClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",
'click [data-hook="edit_Flight_Link"]':"_onEditFlightClick",'click [data-hook="info-bar"]':"_onInfoBarAccordionClick",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click a[id="theme_park_read_more"]':"_onThemeParkReadMoreClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click [data-hook="edit_Special_Request_Link"]':"_onEditSpecialRequestClick",
'click [data-hook="edit_Special_Request_Link_Transportation_Card"]':"_onEditSpecialRequestClickTransportationCard","click a.mealPlan":"_onLoadHotelPopupMealPlans",'click [data-hook="complete_booking"]':"_onCompleteBookingClick",'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup"},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this._initShopCardTooltips();$(window).on("resize orientationchange",$.proxy(this._onWindowResize,this));
$(window).trigger("resize");this.ui.translationTexts=this.module.TranslationTexts;var b=this.$el.find("[data-megatip='flight-details-megatip']");if(b.length){var d=new $namespace.Widgets.Megatip(b);b[0].megatip=d;b.on("click",$.proxy(d._onClick,d));document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});$("#themeParkCardTitle").text(this.ui.translationTexts.THEME_PARK_CARD_TITLE);$(this.el).find('a[id="editThemeParkLink"]').remove();
$(this.el).find("div.themeParkTickets div.additionalInformation").remove();$(this.el).find("div.themeParkTickets div.resortDetails").remove();$(this.el).find("div.themeParkTickets ul.themeParkLinks").remove();if(b=$(this.el).find("div.themeParkTickets div[id^='includedTicketVendorItem'] div[id^='includedTicketVendorItemDescription_']"))for(d=0;d<b.length;d++){var e=$(b[d]).find("p"),f=$(b[d]).parent();$(f).prepend(e);$(b[d]).remove()}$(this.el).find('a[id="editActivitiesButton"]').remove();$("#activitiesCardHeading").text(this.ui.translationTexts.ACTIVITIES_CARD_TITLE);
if(a.gaParams&&(a=JSON.parse(a.gaParams),2<a.length)){var g=a[0],h=a[1];this.ui.packageId=a[2];$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/finalizeBooking/"+g+"/"+h+"/"+this.ui.packageId);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+"|Finalize Booking",v2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),v34:g,v74:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+
"/booking/finalizeBooking/"+g+"/"+h+"/"+this.ui.packageId})}this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/finalizeBooking/"+g+"/"+h+"/"+packageId)});a=$("#transportResultArrivalTransfer");b=$("#transportResultDepartureTransfer");0==a.length&&($("#DepartureTransferUnavailable").addClass("displayNone"),$("#ArrivalTransferUnavailable").removeClass("displayNone"));
0==b.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").removeClass("displayNone"));1==a.length&&1==b.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").addClass("displayNone"))},_onWindowResize:function(a){$namespace.TabOrder.updatePageTabOrder()},_showCancellationPolicyModal:function(a){$namespace.Analytics.trackEvent("Finalize_Booking_Cancellation_Policy_Schedule","Click",this.ui.packageId);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_onEditTravelersClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS,
["true"])},_initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_onEditPaymentClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_PAYMENT_OPTIONS,["true"])},_onEditShippingAddressClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_PAYMENT_OPTIONS,["true","#costcoShopCardPromoDiv"])},
_onEditSpecialRequestClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,["true"])},_onEditSpecialRequestClickTransportationCard:function(a){$namespace.Analytics.trackEvent("Finalize_Booking_Transportation_EditSpecialRequests","Click",this.ui.packageId);$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,["true"])},_resetFlightsAccordion:function(a){a=$("#flight-details-megatip .accordion-item.active .accordion-button");
0<a.size()&&a.each(function(){$(this).trigger("click")})},_onEditFlightClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SEAT_MAP_SELECTION,["true"])},_onInfoBarAccordionClick:function(a){$("#info-bar-content").hide();this.$el.find(".info-bar-links-left .btn-back").show();$("body").removeClass("scroll-lock");$("#page_content").removeClass("invisible");$("#page_content").addClass("visible");$("footer, header, #skipDiv, #page_content").removeAttr("aria-hidden");
this.$el.find(".sticky-bar-accordion-menu").removeClass("sticky-bar-accordion-menu");utils.Breakpoint.isMobile()&&(this.$el.find(".info-bar").removeClass("expanded"),this.$el.find(".info-bar").addClass("sticky-bar-attached"),this.$el.find("[data-hook='sticky-bar']").addClass("attached"))},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onThemeParkReadMoreClick:function(a){$("#packageId").val();var b=
$(a.target);a="ppt=LOAD_THEME_PARK_VENDOR_POPUP&vendorId="+b.data("vendorid");var d=this.module.TranslationTexts,e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE});else{a.themeParkDetailModal=new $namespace.Widgets.Modal(this.responseText,function(){e&&e.off("click")});var e=$('.themeParkDetailModalPopup div[id*="additionalInformation"] ul>li>a');
var f=e.length;f&&$(e[f-1]).attr("data-tab-last",!0);e.on("click",function(b){b=$(b.currentTarget);a.loadParkAndTheaterVenuePopup(JSON.parse(b.attr("data-link-args").trim()),b.text())});$("div.themeParkVendorPopup .themeParkDetailModalPopup div.modal-title > h2").html(b.data("title"));a.themeParkDetailModal.show()}}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",a,null,null,e,null)},loadParkAndTheaterVenuePopup:function(a,
b){var d="ppt=LOAD_THEME_PARK_VENUE_POPUP&venueId="+a.venueId;d+="&destination="+a.destination;d+="&region="+a.region;d+="&area="+a.area;var e=function(d){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=d.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText,function(){$(document.body).addClass("scroll-lock")}),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,
b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);$(a).removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(b),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(a.parkName),
e.show(),e.el.attr("data-set-tab-stops","true"),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",d,null,null,e,null)},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),d=b.attr("data-iternary-code");b.attr("data-test");a=b.attr("data-includeRemarks");b.attr("id");$("#packageId").val();b=b.attr("data-rate-info-title");d={itineraryCode:d};d.cthr=a?"SHOW_FILTERED_ITINERARY_REMARKS":
"SHOW_ITINERARY_REMARKS";"true"==b&&(d.itineraryRemarksModalTitle="Rate details and cancellation policy");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onToursLinkClick:function(a){a=$(a.currentTarget);$("#packageId").val();a.data("activity-name");a="ssc=LOAD_RECAP_SIGHTSEEING_POPUP&sightseeingId="+
a.attr("data-tour-id")+"&itineraryCode="+a.data("iternary-code");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",a,null,null,function(){(new $namespace.Widgets.Modal(this.responseText)).show();$("#modalTitleActivitiesDetail").focus()},null)},_onLoadHotelPopupMealPlans:function(a){a=$(a.currentTarget);var b="cthtc=LOAD_HOTEL_MEAL_PLANS_POPUP&destination="+a.attr("data-destination");b+="&cityCode="+a.attr("data-citycode");b+="&hotelId="+a.attr("data-hotelid");$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsTabContent.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onCompleteBookingClick:function(a){a.preventDefault();var b=this.module.TranslationTexts;a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();var d="en_ca"==a||"fr_ca"==a?b.BOOKING_COMMON_ERROR_MESSAGE_CA:b.BOOKING_COMMON_ERROR_MESSAGE;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("finalizeBookingSummary.act","fbs=CONFIRM_PAYMENT_INFO",null,null,function(a){if(!0===a)a=this.callbackFunctionParams[1],$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_HOME),$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_FINAL_BOOKING_CONFIRMATION,[""+a]);else if(void 0==a||void 0==this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,
text:d,title:b.BOOKING_COMMON_ERROR_MODAL_TITLE});else if($namespace.DomUtil.setElementLoadingMask(!1,null,!1),this.message&&($namespace.MessageUtil.showMessage({type:this.messageType,text:this.message,title:b.BOOKING_COMMON_ERROR_MODAL_TITLE}),this.messageCode==$namespace.ErrorCodes.PAYMENT_TRANSACTION_AVS_ERROR||this.messageCode==$namespace.ErrorCodes.PAYMENT_CREDIT_CARD_INFO_MISMATCH))$("button[data-hook='modal-close']").on("click",function(a){a.preventDefault();$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SINGLE_CITY_PAYMENT_OPTIONS,
["true"])})},null)},_showCancellationResponsivePopup:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=$("#"+b).html();b={cthr:"SHOW_CANCEL_MESSAGE"};"true"==a.attr("data-rate-info-title")&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):
(b=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(d),b.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(b),null,null,a,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.FinalBookingConfirmationView=Backbone.View.extend({el:"#finalBookingConfirmation",ui:{chatLink:null,form:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[data-hook="trip-protection-link"]':"_onTripProtectionClick",'click [data-hook="print_itinerary"]':"_onPrintClick",'click [data-hook="email_itinerary"]':"_onEmailClick",'click [data-hook="manage_payments"]':"_onManagePaymentsClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation",
'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup",'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click [data-hook="add-flight-info"]':"_addFlightInfo",
"click a.mealPlan":"_onLoadHotelPopupMealPlans"},initialize:function(a){var b=$.extend({},a);this.module=b.module;this._initShopCardTooltips();a=this.$el.find("[data-megatip='flight-details-megatip']");if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});this.win=$namespace.SearchWidgetsModule.getWindowDimensions();
utils.updateLiveContainer();a=this;this.ui.form=$("#finalBookingConfirmation");this.destination=b.destinationCode;this.regionCode=b.regionCode;this.packageId=b.packageId;this.newBooking=b.newBooking;d=$namespace.AnalyticsHelper.getVacationPackageTagForAdobe();this.adobeValueUpperCase=d.charAt(0).toUpperCase()+d.substr(1,d.length);this.ui.chatLink=this.$el.find("#chatNowLink");this.ui.chatLink&&(a=this,this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewConfirmation/"+b.destinationCode+"/"+b.regionCode+"/"+b.packageId)}));$(".requiredDocCard a").addClass("external-link");$(".requiredDocCard a").attr("id","external_link");$(".requiredDocCard a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".requiredDocCard").on("click",".external-link",a._checkTermsAndConditionLinksClick);$(".showmore-content").find(".blue-bullets").height()<
$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$("#emailItineraryPopup").hide();$(".showmore-content .blue-bullets li").each(function(a,b){1<=a?($(b).attr("aria-hidden","true"),$(b).find("a").attr("tabindex","-1"),$namespace.TabOrder.updatePageTabOrder(),1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),$(b).attr("tabindex","-1"))):$(b).find("a").attr("data-taborder",
"document")});a="";a="true"===this.newBooking?"/booking/viewConfirmation/":"/memberaccount/viewConfirmation/";$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle(a+b.destinationCode+"/"+b.regionCode+"/"+b.packageId);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:this.adobeValueUpperCase+"|Confirmation",v2:this.adobeValueUpperCase,v34:b.destinationCode,v74:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+a+b.destinationCode+"/"+b.regionCode+
"/"+b.packageId});a=$("#transportResultArrivalTransfer");d=$("#transportResultDepartureTransfer");0==a.length&&($("#DepartureTransferUnavailable").addClass("displayNone"),$("#ArrivalTransferUnavailable").removeClass("displayNone"));0==d.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").removeClass("displayNone"));1==a.length&&1==d.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").addClass("displayNone"))},
_onLoadHotelPopupMealPlans:function(a){a=$(a.currentTarget);var b="cthtc=LOAD_HOTEL_MEAL_PLANS_POPUP&destination="+this.destination;b+="&cityCode="+this.regionCode;b+="&hotelId="+a.attr("data-hotelid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsTabContent.act",b,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_checkTermsAndConditionLinksClick:function(a){a=
$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onManagePaymentsClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS)},_onPrintClick:function(a){a.preventDefault();var b=this;$namespace.Analytics.trackEvent("Confirmation_Print_Reservation","Click",b.packageId);a=$(a.currentTarget).attr("data-booking-id");var d=_secureContextRoot+_webLoc+"/itinerary/"+a+"?printItinerary=true&_uid="+utils.getUID();
window.open(d,"_blank","alwaysLowered=true,width=750,height=500,resizable,scrollbars,left=80,top=80");$namespace.AjaxUtil.makeAjaxCall("finalBookingConfirmation.act","vpfbc=PRINT_ITINERARY&bookingId="+a,null,null,function(){this.message&&$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Print_issue",b.packageId)},null)},sendEmail:function(a,b,d){a="vpfbc=SEND_EMAIL_ITINERARY&bookingId="+b+("&emailId="+$namespace.StringUtil.escapeNonAsciiChars(a));
$namespace.AjaxUtil.makeAjaxCall("finalBookingConfirmation.act",a,null,null,d)},_onEmailClick:function(a){a.preventDefault();var b=this,d=$(a.currentTarget).attr("data-booking-id");a=$("#emailItineraryPopup").html();$namespace.Analytics.trackEvent("Confirmation_Email_Reservation","Click",b.packageId);(new $namespace.Widgets.Confirm(a,function(a){var e=a.el.find("#email_itinerary").val();a.el.find("button").addClass("disabled").prop("disabled",!0);$namespace.DomUtil.setElementLoadingMask(!0);b.sendEmail(e,
d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",!1);$namespace.DomUtil.setElementLoadingMask(!1);var d=b.module.TranslationTexts,e=$('a[data-hook="email_itinerary"]');this.message?($namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.VP_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e}),$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Email_server_issue",b.packageId)):$namespace.MessageUtil.showMessage({type:0,
text:d.VP_EMAIL_SENT_SUCCESSFUL_MESSAGE,title:d.VP_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e})})},null,!0)).show()},_showCancellationPolicyModal:function(){$("#packageId").val();var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null);$namespace.Analytics.trackEvent("Confirmation_Cancellation_Policy_Schedule","Click",this.packageId)},_onTripProtectionClick:function(a){a=$(a.currentTarget).attr("data-link");$namespace.Analytics.trackEvent("Confirmation_Add_Trip_Protection","Click",this.packageId);$namespace.Navigation.loadExternalUrl(a)},_showMoreInformation:function(a){a=$(a.currentTarget);
$(a).hide();$(".showmore-content").removeClass("showmore-content");$('.requiredDocumets [aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus()},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},
_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),d=b.attr("data-iternary-code");b.attr("data-test");a=b.attr("data-includeRemarks");b.attr("id");$("#packageId").val();b=b.attr("data-rate-info-title");d={itineraryCode:d};d.cthr=a?"SHOW_FILTERED_ITINERARY_REMARKS":"SHOW_ITINERARY_REMARKS";"true"==b&&(d.itineraryRemarksModalTitle="Rate details and cancellation policy");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",
$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_resetFlightsAccordion:function(a){a=$("#flight-details-megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_showCancellationResponsivePopup:function(a){a=
$(a.currentTarget);var b=a.attr("data-iternary-code"),d=$("#"+b).html();b={cthr:"SHOW_CANCEL_MESSAGE"};"true"==a.attr("data-rate-info-title")&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),
$(".modal-body").html(d),b.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(b),null,null,a,null)},_onToursLinkClick:function(a){a=$(a.currentTarget);$("#packageId").val();a.data("activity-name");a="ssc=LOAD_RECAP_SIGHTSEEING_POPUP&sightseeingId="+a.attr("data-tour-id")+"&itineraryCode="+a.data("iternary-code");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",a,null,null,function(){(new $namespace.Widgets.Modal(this.responseText)).show();
$("#modalTitleActivitiesDetail").focus()},null)},_addFlightInfo:function(a){a=$(a.currentTarget).attr("data-model-type");var b={};"transfer"==a?b={vpfbcsr:"LOAD_FINAL_CONFIRMATION_SPECIAL_REQUESTS_TRANSFER_POPUP"}:"rental-car"==a&&(b={vpfbcsr:"LOAD_FINAL_CONFIRMATION_SPECIAL_REQUESTS_RENTAL_CAR_POPUP"});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("finalBookingSpecialRequest.act",$.param(b),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.CruiseStateroomSelectionView=Backbone.View.extend({el:"#cruise-cabin-results-selection-page",events:{'click [data-hook="goBackButton"]':"_onBackLinkBn",'change [name^="selectableExtras_"]':"_onSelectableExtrasChange","click .shopCardModal":"_onShopCardModalClick","click .shipboardCreditModal":"_onShipboardCreditModalClick","click .amenityModal":"_onAmenityModalClick",'change [data-hook="selected-bed"]':"_changeBedSelection","click .nonMemberLink":"_onNonMemberLinkClick","change #deckSelection":"_onChooseDeckChange",
"click .select-button":"_onSelectButtonClick",'change #divCruiseFilterByCategory input[type="checkbox"]':"filterCabins","click #applyCategoryFilters":"onApplyCategoryFiltersClick"},initialize:function(a){this.module=$.extend({},a).module;this.cruiseLineName="";a=$namespace.PageHistory.getHistoryCodeAndParametersFromPath();3<=a.length&&$namespace.HistoryNavigation.replaceHistory(a[0],[a[1]]);this.cruiseStateroomLocationMapView=$namespace.Modules.addView(this.module,$namespace.View.CruiseStateroomLocationMapView,
{view:this});this.translations=this.module.TranslationTexts;this.trackPageAnalytics();a=$("a#chatNowLink");if(1==a.length)a.on(window.ChatApi.chatLinkClickEvent,$.proxy(this.chatLinkAnalytics,this));this.initElements();this.setFilterState();this.workAroundChromeIssue();this.initializeSelectionDetail(!0);this.selectWidgetForDeckSelection()},selectWidgetForDeckSelection:function(){this.$el.find(".availableDecksSelectionWidget").each(utils.eachUninitialized(function(a,b){b.availableDeck=new $namespace.Widgets.SelectWidget(a,
{notFireChange:!0})}))},workAroundChromeIssue:function(){var a=this;setTimeout(function(){a.$el.find('[name="deckSelection"]').each(function(a,b){a=$(b);b=a.find("option[selected]").index();0<=b&&(a.get(0).selectedIndex=b)});var b=a.$el.find("#selectBedOption");if(1==b.length){var d=b.find("option[selected]").index();d=-1==d?0:d;0<=d&&(b.get(0).selectedIndex=d)}b=a.$el.find(".includedExtrasContainer input[checked]");1==b.length&&(b.is(":checked")||b.prop("checked",!0),a.highLightSelectableExtras(b))},
200)},handleAccessibilityAttributes:function(a,b){a.hasClass("active")?b.removeAttr("aria-hidden aria-label tabindex role"):b.attr({"aria-hidden":"true","aria-label":this.translations.STATEROOM_DESCRIPTION_TEXT,tabindex:"-1",role:"region"})},initElements:function(){var a=$("#deckLegendAccordion");a.attr("data-hook","accordion");this.deckLegendAccordion=new $namespace.Widgets.Accordion(a,{scrollToActiveSection:!1})},onApplyCategoryFiltersClick:function(){this.$el.find('[data-hook="accordion"]#deckAndCategoryFilter').each(function(a,
b){b.accordion.close(!0)})},addShowMore:function(){var a=this.$el.find('DIV[data-hook="showmore"]');1==a.length&&(a.get(0).showmore=new $namespace.Widgets.ShowMore(a,{contentHeight:150,adjustHeightCallback:$.proxy(this.handleAccessibilityAttributes,this)}),a.on($namespace.Widgets.ShowMore.showMoreEvent,$.proxy(this.showMoreHandler,this)))},showMoreHandler:function(a){var b=$(a.currentTarget).parents(".stateroomDescriptionContainer").first().find(".stateroomDescription");1==b.length&&(b.removeAttr("aria-hidden").show(),
setTimeout(function(){b.focus()},100))},chatLinkAnalytics:function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",this.getCruiseDocumentPath())},_onBackLinkBn:function(){window.history.back()},setSelectButtonPosition:function(){var a=this.$el.find(".cruiseStateroomSelectionDetail"),b=a.offset(),d=a.outerHeight()+b.top,e=$(window).scrollTop()+$(window).height();a=this.$el.find(".selectButtonContainer");var f=a.height(),g=a.width();e<d?(b=e-f-b.top,0>b&&(b=0),a.css({position:"absolute",top:b+
"px",width:g+"px"})):a.css({position:"relative",top:"0px",width:"100%"})},resetSelectionButton:function(){this.$el.find(".selectButtonContainer").css({position:"relative",top:"0px",width:"100%"});setTimeout($.proxy(this.setSelectButtonPosition,this),0)},setupStickySelectButton:function(){$(window).on("scroll",$.proxy(this.setSelectButtonPosition,this));$(window).on("orientationchange resize",$.proxy(this.resetSelectionButton,this))},loadStateroomSelectionDetail:function(a){a="rcss=LOAD_CRUISE_STATEROOM_SELECTION_DETAIL&requestedCabinNumber="+
a;var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomSelection.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(b.$el.find(".cruiseStateroomSelectionDetail").html(this.responseText),$namespace.Application.initializeOnMainContentReload(),b.initializeSelectionDetail())},null)},selectionDetailSetfocus:function(a){var b=
this.$el.find(".selectionDetailCategoryImage");1==b.length&&(a=a&&breakpoint.isMobile()?500:300,setTimeout(function(){b.focus()},a))},initializeSelectionDetail:function(a){if(!this.$el.find(".cruiseStateroomSelectionDetail").is(":empty")){$namespace.TabOrder.updatePageTabOrder();var b=this.$el.find(".bed-select-details");1==b.length&&(this.bedArrangement=new $namespace.Widgets.SelectWidget(b));b=this.$el.find('[name^="selectableExtras_"]:checked');0<b.length&&this.highLightSelectableExtras(b);this.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,
b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));this.showmore=new $namespace.Widgets.ShowMore(this.$el.find('DIV[data-hook="showmore"]'),{contentHeight:150});this.setupStickySelectButton();this.setSelectButtonPosition();this.extraAccessibility();this.addShowMore();this.selectionDetailSetfocus(a);a=this.$el.find(".categoryColorIcon");a.css("background-color",a.attr("data-color-code"));this.$el.find(".shopCardModal span, .shipboardCreditModal span, .amenityModal span, .nonMemberLink span").click(function(){})}},
highLightSelectableExtras:function(a){var b=a.parents(".selectableExtrasContainer");this.$el.find(".selectableExtrasContainer").removeClass("selected");a.is(":checked")&&b.addClass("selected")},trackExtraSelection:function(a){a=a.parents(".cruiseStateroomSelectableExtraTableRow").first().find(".GAExtraName").map(function(){return $(this).text()}).get().join();$namespace.Analytics.trackEvent("CR_Stateroom_Selection_Included_Extras",a,this.cruiseLineName)},_onSelectableExtrasChange:function(a){a=$(a.currentTarget);
var b=a.parents(".selectableExtrasContainer"),d=this.$el.attr("data-stateroom-index"),e=this;this.trackExtraSelection(a);b.hasClass("selected")||(b=a.val(),a=a.attr("data-category-code"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act","rcsl=LOAD_INCLUDED_EXTRAS&cruiseCategoryItemUid="+b+"&currentCruiseCategoryCode="+a,null,null,function(){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{e.$el.find(".loadIncludedExtrasDiv").html(this.responseText);
var a=e.$el.find('input[name^="selectableExtras_"]:checked'),b=a.attr("data-current-price");e.$el.find(".stateroomPriceAmount").html(b);$("#cruise-cabin-results-page .stateroom"+d+"_PriceAmount").html(b);e.highLightSelectableExtras(a);e.extraAccessibility();e.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));$namespace.TabOrder.updatePageTabOrder();a.focus()}},null,""))},showIncludedExtrasPopup:function(a,b,d){a="rcsl=LOAD_INCLUDED_EXTRAS_MODAL&cruiseCategoryItemUid="+
$(a.currentTarget).attr("data-cruise-category-item-uid")+("&modalType="+b);_.isEmpty(d)||(a+="&amenityId="+d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomLocation.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},null,"")},_onShopCardModalClick:function(a){this.showIncludedExtrasPopup(a,
0);$namespace.Analytics.trackEvent("CR_Stateroom_Selection_Costco_Shop_Card","Click",this.getCruisePackageId())},_onShipboardCreditModalClick:function(a){this.showIncludedExtrasPopup(a,1);$namespace.Analytics.trackEvent("CR_Stateroom_Selection_Costco_Shop_Card","Click",this.getCruisePackageId())},_onAmenityModalClick:function(a){var b=$(a.currentTarget).attr("data-amenity-id");this.showIncludedExtrasPopup(a,2,b);$namespace.Analytics.trackEvent("CR_Stateroom_Selection_Amenity","Click",this.getCruisePackageId())},
_changeBedSelection:function(a){a=$("#"+a.target.id);this._removeError(a)},trackPageAnalytics:function(){var a=this.getCruiseDocumentPath();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:"Selection - Cruises | Costco Travel",v2:"Cruise",v74:a});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a})},getCruiseDocumentPath:function(){var a=this.$el.attr("data-destination"),b=$("#cruise-cabin-results-selection-page-json-data").text().trim(),d;b&&(d=
JSON.parse(b));b="bookingWidget";"true"===d[6]&&(b="OfferPage");a="/cr/booking/"+b+"/stateroom_selection/"+a;this.cruiseLineName=d[0];d&&(a=a+"/"+this.cruiseLineName+"/"+d[1]+"/"+d[2]);return a},getCruisePackageId:function(){var a=this.$el.attr("data-destination"),b=$("#cruise-cabin-results-selection-page-json-data").text().trim(),d;b&&(d=JSON.parse(b));d&&(a=a+"/"+d[0]+"/"+d[1]+"/"+d[2]);return a},disableStateroomsOnShipMap:function(){($namespace.Utils.Breakpoint.isDesktop()?$(".hide-mobile input[data-currentcruisecategorycode]"):
$(".hide-desktop input[data-currentcruisecategorycode]")).each(function(){var a=$(this);a.is(":checked")||(a=a.attr("data-currentcruisecategorycode"),$(".availableCabinsOnMap."+a).each(function(){var a=$(this);"false"===a.attr("data-selecteditem")&&(a.removeClass("availableCabinsOnMap"),a.addClass("unavailableCabinItem"),a.data("maphilight",{fillColor:"AAAAAA",fillOpacity:.8,stroke:!1}).trigger("alwaysOn.maphilight"))}))})},_onChooseDeckChange:function(){var a=null;a=utils.Breakpoint.isDesktop()?
$(".hide-mobile #deckSelection"):$(".hide-desktop #deckSelection");a="&selectedDeckName="+$namespace.StringUtil.escapeNonAsciiChars($(a).val());a+="&bookingIndex="+$("#cruise-stateroom-selection").attr("data-tabindex");var b=this.$el.find(".selectionDetailContainer").attr("data-requested-cabin-number");_.isEmpty(b)||(a+="&requestedCabinNumber="+b);b="rcss=LOAD_CRUISE_STATEROOM_SELECTION_LEFT_CONTENT&initialPageLoad=false&deckChanged=true"+a;var d="rcss=LOAD_CRUISE_STATEROOM_SELECTION_DECK_MAP";d+=
"&deckChanged=true";d+=a;var e=this,f=function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($(".shipMap").html(this.responseText),e.setFilterState(),$namespace.TabOrder.updatePageTabOrder(),e.selectWidgetForDeckSelection())};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("cruiseStateroomSelection.act",b,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text}):($(".leftContentFilters").html(this.responseText),$namespace.AjaxUtil.makeAjaxCall("cruiseStateroomSelection.act",d,null,null,f))})},filterCabins:function(a){a=$(a.currentTarget).attr("data-currentcruisecategorycode");var b="filterByCategoryCheckBox_"+a;(utils.Breakpoint.isDesktop()?$(".hide-mobile #"+b):$(".hide-desktop #"+b)).is(":checked")?($namespace.Analytics.trackEvent("Cr_Stateroom_Selection_Filter","Select","Yes"),$(".unavailableCabinItem."+a).each(function(){if("false"===
$(this).attr("data-selecteditem")){$(this).removeClass("unavailableCabinItem");$(this).addClass("availableCabinsOnMap");var a=$(this).attr("original-data-maphilight");a=JSON.parse(a);$(this).data("maphilight",{fillColor:a.fillColor,fillOpacity:a.fillOpacity,fill:!1,stroke:a.stroke,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth}).trigger("alwaysOn.maphilight")}}),$namespace.Storage.set($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_SELECTION_FILTER_STATE,b,!0)):($namespace.Analytics.trackEvent("Cr_Stateroom_Selection_Filter",
"Select","No"),$(".availableCabinsOnMap."+a).each(function(){"false"===$(this).attr("data-selecteditem")&&($(this).removeClass("availableCabinsOnMap"),$(this).addClass("unavailableCabinItem"),$(this).data("maphilight",{fillColor:"AAAAAA",fillOpacity:.8,stroke:!1}).trigger("alwaysOn.maphilight"))}),$namespace.Storage.set($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_SELECTION_FILTER_STATE,b,!1))},deckClickHandler:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("unavailableCabinItem")||
a.attr("data-cabintabnumber").match(/[1-5]/)||this.selectStateroom(a)},getSelectedStateroom:function(){return $(".availableCabinsOnMap[data-selecteditem='true']").filter(function(){return!$(this).attr("data-cabintabnumber").match(/[1-5]/)})},selectStateroom:function(a){var b=$namespace.CruiseStateroomSelectionModule.cruiseStateroomSelectionView.cruiseStateroomLocationMapView,d=a.attr("coords"),e=a.attr("shape"),f=this.getSelectedStateroom();if(f.length){var g=f.data("maphilight")||{};g.stroke=!1;
g.strokeColor="0055ff";g.strokeOpacity=1;g.strokeWidth=3;g.fill=!1;f.data("maphilight",g).trigger("alwaysOn.maphilight");f.attr("data-selecteditem","false");($namespace.Utils.Breakpoint.isDesktop()?$(".hide-mobile input[data-currentcruisecategorycode]"):$(".hide-desktop input[data-currentcruisecategorycode]")).each(function(){if(!$(this).is(":checked")&&f.hasClass($(this).attr("data-currentcruisecategorycode"))&&f.attr("id")!=a.attr("id"))return f.removeClass("availableCabinsOnMap"),f.addClass("unavailableCabinItem"),
f.data("maphilight",{fillColor:"AAAAAA",fillOpacity:.8,stroke:!1}).trigger("alwaysOn.maphilight"),!1})}g=a.data("maphilight")||{};g.stroke=!0;g.strokeColor="0055ff";g.strokeOpacity=1;g.strokeWidth=3;g.fill=!0;a.data("maphilight",g).trigger("alwaysOn.maphilight");a.attr("data-selecteditem","true");b.removeCabinTabNumber($namespace.bookingIndex);b.showSelectedCabin(d,e,$namespace.bookingIndex,$namespace.numberOfStaterooms);this.loadStateroomSelectionDetail(a.attr("data-id"))},extraAccessibility:function(){$(".includedExtrasContainer .cruiseStateroomSelectableExtraTableRow").each(function(a,
b){b=$(b);a=b.find('input[type="radio"]');1==a.length&&(b=b.find('label, [id^="extraName_"]').map(function(){return $(this).attr("id")}).get().join(" "),a.attr("aria-labelledby",b))})},setFilterState:function(){this.$el.find('.filterCategoryCheckBox .checkbox-widget input[type="checkbox"]').each(function(a,b){a=$(b);b=$namespace.Storage.get($namespace.CruiseStateroomConstants.CRUISE_STATEROOM_SELECTION_FILTER_STATE,a.attr("id"),null);null!=b&&a.prop("checked","true"==b)});this.disableStateroomsOnShipMap()},
_onNonMemberLinkClick:function(a){a=this.$el.attr("data-stateroom-index");a=$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_STATEROOM_SELECTION+"_"+a;var b=this.$el.find(".selectionDetailContainer").attr("data-requested-cabin-number");_.isEmpty(b)||(a+="_0_"+b);$namespace.HistoryNavigation.replaceHistory(a);$namespace.Analytics.trackEvent("CR_Stateroom_Selection_Login","Costco_Shop_Card_Amount",this.getCruisePackageId());a=$namespace.PageHistoryConstants.HISTORY_CRUISE_CABIN_RESULTS_INTERACTIVE_MULTI_CATEGORY_AUTHENTICATE+
"_true";$namespace.Navigation.loadHistoryCodeWithData(a)},adjustBeddingDropdownPosition:function(a,b){var d=$(window),e=d.height()+d.scrollTop();a=a.offset().top+a.outerHeight();var f=this.$el.find(".select-button").outerHeight(),g=Math.abs(a-e);b=b.height();g<=f?(e=f+g+b,d.scrollTop(d.scrollTop()+e)):e>a&&g-f<b&&d.scrollTop(d.scrollTop()+b)},_addError:function(a,b){a.addClass("error").attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline form-group" id="'+
a.attr("id")+'_error">'+b+"</label>");b=$("#"+a.attr("id")+"_error");b.addClass("bed-error");a.focus();this.adjustBeddingDropdownPosition(a,b)},_removeError:function(a){a.length&&(a.removeClass("error"),$("#"+a.attr("aria-describedby")).remove(),a.removeAttr("aria-describedby"))},_validateStateroom:function(){var a=!0,b=this.module.TranslationTexts,d=$("#selectBedOption");this._removeError(d);var e=$("#selectBedOption").val();if(""==e||"defaultBeddingOption"==e)this._addError(d,$namespace.MessageUtil.prefixError(b.BED_SELECTION_REQUIRED)),
a=!1;return a},_onSelectButtonClick:function(a){if(this._validateStateroom()){a="rcss=UPDATE_STATEROOM_SELECTION";var b=this.$el.find(".selectionDetailContainer"),d=b.attr("data-stateroom-uid"),e=b.attr("data-category-code");b=b.attr("data-category-item-uid");var f=$("#selectBedOption").val(),g=this.$el.find('input[name^="selectableExtras_"]:checked');1==g.length&&(b=g.val(),e=g.attr("data-category-code"));a=a+"&bedConfigSetValue="+f+"&currentCruiseCabinItemUid="+d+"&currentCruiseCategoryCode="+e;
a=a+"&currentCruiseCategoryItemUid="+b;$namespace.Analytics.trackEvent("CR_Stateroom_Selection","Select_Different_Stateroom",this.getCruisePackageId());$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseStateroomSelection.act",a,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):window.history.back()},null)}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseStateroomLocationMapView=Backbone.View.extend({el:"#ship-map-div",events:{},initialize:function(a){$.extend({},a)},getCabinNumberDisplayPosition:function(a,b){var d={left:0,top:0},e=a.split(",");if(0==e.length||0!=e.length%2)return d;for(var f=e.length/2,g=Number.MAX_VALUE,h=0,k=Number.MAX_VALUE,l=0,p,q,r=0;r<f;r++)q=2*r,p=parseInt(e[q]),q=parseInt(e[q+1]),p<g&&(g=p),p>h&&(h=p),q<k&&(k=q),q>l&&(l=q);d.left=(h-g)/2+g-2;d.top=(l-k-13)/2+k;"poly"==b&&(a=$namespace.PolygonUtil.getPolygonCenter(a))&&
(d.top=a.y-6,d.left=a.x-3);return d},displayCabinTabNumberOnSelectedCabin:function(a,b){a=function(a){return function(){$("div.selectedDeckImg").append(a)}}($('<div id="cabinTabNumber_'+b+'" class="yourStateroomLabel" aria-hidden="true" >'+b+"</div>").css({top:a.top+"px",left:a.left+"px"}));setTimeout(a,500)},positionSelectedCabinInView:function(a){a=function(a){return function(){$("div.scrollable").scrollTop(a)}}(Math.round(a.top)-250);setTimeout(a,200)},showSelectedCabin:function(a,b,d,e,f){var g=
this.getCabinNumberDisplayPosition(a,b);1<e&&this.displayCabinTabNumberOnSelectedCabin(g,d);3<arguments.length&&f&&this.positionSelectedCabinInView(g)},removeCabinTabNumber:function(a){$("div#cabinTabNumber_"+a).remove()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};validate=$namespace.Validation||{};messageUtil=$namespace.MessageUtil||{};isFinalTab=isFirstFormFieldFocusActive=!1;var oldSelectedStateroomTab=1,isFlightSelected=!1;FREQUENT_FLYER_NUMBER_REGEX=/^[A-Z0-9]{1,32}$/;REDRESS_NUMBER_REGEX=/^[0-9]{7}$/;KNOWN_TRAVELER_NUMBER_REGEX=/^[A-Z0-9]{9}$/;$namespace.View=$namespace.View||{};
$namespace.View.cruiseTravelerInfoView=Backbone.View.extend({el:"#cruiseTravelerInfo",events:{'click [data-hook="goBackBtn"]':"_onBackLink",'click [data-hook="continue_SpecialRequests_btn"]':"_continueButtonClick",'click [data-hook="traveler-info-terms-conditions"]':"_onTermsAndConditionsClick",'click [name="stateroom_tab"]':"_onStateroomTabClick",'click [data-hook="showmore-trigger"]':"_readMoreInformation",'click [data-hook="showless-trigger"]':"_readLessInformation",'click [data-hook="previous_stateroom_btn"]':"_previousButtonClick",
"click .dropDownArrow":"_onSelectDropDownClick","focusin .dropDownArrow":"_onSelectDropDownFocusIn","focusout .dropDownArrow":"_onSelectDropDownFocusOut","change .valueRequired":"_onSelectDropDownChange","keypress .dropDownArrow":"_onSelectDropDownClick","click #accept_terms":"_termsAndConditionCkeck",'keypress input[data-hook="name-field"]':"_onNameFieldKeyPress",'focusout [data-hook="name-field"]':"_onInputFocusOut","keypress .accordion-button":"_openCloseTravelerAccordionOnEnterEvent","click .accordion-button":"_openCloseTravelerAccordionOnClick",
'click [data-hook="frequentFlyerAccordion"]':"_onAccordionClick",'keypress [data-hook="frequent-flyer-number"]':"_onFrequentFlyerKeyPress",'keyup [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'focusout [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'cut [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'paste [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'keypress [data-hook="redress-number"]':"_onRedressNumberKeypress",
'keypress [data-hook="known-traveler-number"]':"_onKnownTravelerNumberKeypress"},ui:{chatLink:null},setErrorFocus:null,validator:{type:{pattern:/^[0-9]+/},id:{pattern:/^[0-9]*/},title:{pattern:/^[a-zA-Z\.]{0,6}$/},firstName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},middleName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},lastName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},suffix:{pattern:/^[a-zA-Z\.]{0,5}$/},citizenship:{pattern:/^[a-zA-Z]{0,2}$/},age:{pattern:/^[0-9]*/},gender:{pattern:/^[1-2]$/},
dateOfBirth:{pattern:/^([1-9]|1[012])\/([1-9]|[12][0-9]|3[01])\/(19|20)\d\d$/},cruiseLineCode:{pattern:/[a-zA-Z0-9]*/},pastPassengerNumber:{pattern:/^[a-zA-Z0-9]{0,50}$/},frequentTravellerId:{pattern:/^[0-9]*/}},initialize:function(a){var b=$.extend({},a),d=$(window);this.controller=b.controller;this.module=b.module;b=this.module.TranslationTexts;var e=$(this.el).data("number-of-stateroom");_referenceDate=a.referenceDate;_departureDate=a.departureDate;_returnDate=a.returnDate;isFlightSelected="true"==
a.isFlightSelected?!0:!1;$("#prev_stateroom").addClass("displayNone");$(".error").hide();$(".accordion-item").removeClass("accordion-item-current");this.trackPageView("true"==a.cruiseSearchFromOfferPage?!0:!1);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var f=this;f.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",f.getGaEventLabel())})}this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",
this.trackEventAccordion);1==e&&0==isFlightSelected&&$.hook("continue_SpecialRequests_btn").text(b.CONTINUE_TO_SPECIAL_REQUEST_TEXT);1==e&&1==isFlightSelected?$.hook("continue_SpecialRequests_btn").text(b.CONTINUE_TO_FLIGHT_SEAT_SELECTION_TEXT):1<e&&$.hook("continue_SpecialRequests_btn").text(b.NEXT_STATEROOM);this.setIdForExternalInfoLink();this.updateTravelerAccordionState();this.resetTravelerValues();($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED||$namespace.GlobalConstants.CONSUMER_SUPER_PNR_FTI_ENABLED)&&
this.$el.find('[data-hook="frequentFlyerAccordion"]').each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&this._initTravelerNumberTooltips();d.on("resize orientationchange",$.proxy(this._onResize,this));d.trigger("resize");$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS_WITHOUT_BOOKING,null)},setIdForExternalInfoLink:function(){var a=
$(".traveler-info-tsa a");$(a).addClass("external-link");$(a).each(function(a){a=$(this);a.attr("data-url",a.attr("href"));a.removeAttr("href");a.removeAttr("target")});$(".external-link").on("click",this.checkTermsAndConditionLinksClick);$(".showmore-content .blue-bullets li").each(function(a,d){$(d).attr("aria-hidden","true");$(d).find("a").attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder();0==a&&($namespace.Utils.Breakpoint.isMobile()?$(d).attr("id","mobileReadMoreLink"):$(d).attr("id",
"desktopReadMoreLink"),$(d).attr("tabindex","-1"))})},resetTravelerValues:function(){$(window).load(function(){for(var a=$("#allTravelers").data("travelers"),b=1;b<=a;b++){var d=$("#travelerInfoSection_"+b),e=d.data("booking-title"),f=d.data("booking-suffix"),g=d.data("booking-gender"),h=d.data("booking-citizenship"),k=d.data("booking-dob-day"),l=d.data("booking-dob-month");d=d.data("booking-dob-year");void 0!=e&&""!=e&&$("#title_"+b+' option[value="'+e+'"]').prop("selected",!0);void 0!=f&&""!=f&&
$("#suffix_"+b+' option[value="'+f+'"]').prop("selected",!0);void 0!=g&&""!=g&&$("#gender_"+b+' option[value="'+g+'"]').prop("selected",!0);void 0!=h&&""!=h&&$("#citizenship_"+b+' option[value="'+h+'"]').prop("selected",!0);void 0!=k&&""!=k&&$("#birth_day_"+b+' option[value="'+k+'"]').prop("selected",!0);void 0!=l&&""!=l&&$("#birth_month_"+b+' option[value="'+l+'"]').prop("selected",!0);void 0!=d&&""!=d&&$("#birth_year_"+b+' option[value="'+d+'"]').prop("selected",!0)}})},updateTravelerAccordionState:function(){var a=
$("#primaryTraveler");utils.Breakpoint.isMobile()?(a.removeClass("active"),a.find(".accordion-button:first").attr("aria-expanded","false"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")):(a.addClass("active"),a.find(".accordion-button:first").attr("aria-expanded","true"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg"))},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},showHideTravlerInfoAccordion:function(a){this.$el.find('[data-hook="accordionTravelMenu"]').each(utils.eachUninitialized(function(a,
d){d.cardaccoidonmenu=new $namespace.Widgets.AccordionMenu(a)}));$namespace.TabOrder.updatePageTabOrder()},_onBackLink:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);1==oldSelectedStateroomTab?(window.history.back(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1)):(--oldSelectedStateroomTab,this._showTab())},_showTab:function(){var a=this;$(this.el).data("max-stateroom");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTravelerInfo.act","tinfo=LOAD_CRUISE_TRAVELER_INFO_TAB_CONTENT_SESSION_SWITCH&bookingIndex="+
oldSelectedStateroomTab,null,"cruiseTravelerInfoTabContent",function(){a.switchTabs(oldSelectedStateroomTab);$("#requiredDocLabel").focus();var b=$(window);b.on("resize orientationchange",$.proxy(this._onResize,this));b.trigger("resize");$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null)},_continueButtonClick:function(a){this.nextStateroomTabOrNextPage(oldSelectedStateroomTab+1)},_previousButtonClick:function(a){$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);--oldSelectedStateroomTab;this._showTab()},_onStateroomTabClick:function(a){var b=$(a.currentTarget);a=$(".stateroomTab").attr("data-bookingindex");b=b.data("stateroom-index");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);b==oldSelectedStateroomTab?($("#requiredDocLabel").focus(),$namespace.TabOrder.updatePageTabOrder(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1)):b>a?this.nextStateroomTabOrNextPage(oldSelectedStateroomTab+1):(oldSelectedStateroomTab=b,this._showTab())},nextStateroomTabOrNextPage:function(a){var b=
$(window),d=this,e=this.module.TranslationTexts,f=this.module.TranslationMessages,g=$(this.el).data("number-of-stateroom"),h=$(".stateroomTab").attr("data-bookingindex");1==g&&(isFinalTab=!0);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);if(g=this.validateTravelerInfoForm())g=JSON.stringify({PASSENGER_INFO:g}),h="tinfo=ASSIGN_TRAVELLERS_TO_CRUISE_BOOKING&bookingIndex="+h+"&previousTab=false&passengerDetail="+g,$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTravelerInfo.act",h,null,"cruiseTravelerInfoTabContent",
function(g){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),g=$namespace.TranslationUtil.replaceParameters(f.TRAVELER_ERROR_MESSAGE.translatedText,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showMessage({type:1,text:g,title:e.TRAVELER_ERROR_COMMON})):void 0!=g&&null!=g&&0<g.length?d.populateInvalidTravelerPassengerNumber(g):isFinalTab?isFinalTab&&(1==isFlightSelected?$namespace.GlobalConstants.RESPONSIVE_CRUISE_SUPERBOOKING_FLIGHT_SEAT_SELECTION_PAGE_ENABLED?
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseFlightSeatSelectionActivity.act",$.param({cfssa:"LOAD_CRUISE_FLIGHT_SEAT_SELECTION"}),null,"mainContent",function(){$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS_WITHOUT_BOOKING);$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_FLIGHT_SEAT_SELECTION);$namespace.Application.initializeOnMainContentReload();$("html, body").animate({scrollTop:0},0);
$(window).resize()}):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEAT_MAP_SELECTION):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_SPECIAL_REQUESTS)):(d.switchTabs(a),oldSelectedStateroomTab+=1,$("#requiredDocLabel").focus(),b.on("resize orientationchange",$.proxy(this._onResize,this)),b.trigger("resize"),$namespace.DomUtil.setElementLoadingMask(!1,null,!1))},null)},previousStateroomTab:function(a){var b=this,d=
this.module.TranslationTexts,e=this.module.TranslationMessages,f=$(window);$(this.el).data("number-of-stateroom");var g=$(".stateroomTab").attr("data-bookingindex");if(a=this.validateTravelerInfoForm())a=JSON.stringify({PASSENGER_INFO:a}),g="tinfo=ASSIGN_TRAVELLERS_TO_CRUISE_BOOKING&bookingIndex="+g+"&previousTab=true&passengerDetail="+a,$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTravelerInfo.act",g,null,"cruiseTravelerInfoTabContent",function(a){this.message?($namespace.DomUtil.setElementLoadingMask(!1,
null,!1),a=$namespace.TranslationUtil.replaceParameters(e.TRAVELER_ERROR_MESSAGE.translatedText,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showMessage({type:1,text:a,title:d.TRAVELER_ERROR_COMMON})):void 0!=a||null!=a?b.populateInvalidTravelerPassengerNumber(a):(b.switchTabs(oldSelectedStateroomTab),$("#requiredDocLabel").focus(),f.on("resize orientationchange",$.proxy(this._onResize,this)),f.trigger("resize"));$namespace.DomUtil.setElementLoadingMask(!1,
null,!0)},null)},populateInvalidTravelerPassengerNumber:function(a){for(var b=this,d=this.module.TranslationTexts,e=$("#allTravelers").data("travelers"),f=1;f<=e;f++){var g=$("#past_passenger_"+f),h=g.val();$.each(a,function(e,l){a[e].pastPassengerNumber==h&&0==a[e].pastPassengerValid&&(b.addError(g,$namespace.MessageUtil.prefixError(d.INVALID_PAST_PASSENGER_NUMBER)),b.gaTrackEventError("invalid_past_passenger_number_traveler_"+f),b.showAccordionFocus(f))})}},switchTabs:function(a){var b=$(this.el).data("number-of-stateroom");
this.updateTravelerAccordionState();$("a#stateroom_tab_"+a).addClass("active");1==a?$("#prev_stateroom").addClass("displayNone"):$("#prev_stateroom").removeClass("displayNone");var d=this.module.TranslationTexts;b==a?(isFinalTab=!0,1==isFlightSelected?$.hook("continue_SpecialRequests_btn").text(d.CONTINUE_TO_FLIGHT_SEAT_SELECTION_TEXT):$.hook("continue_SpecialRequests_btn").text(d.CONTINUE_TO_SPECIAL_REQUEST_TEXT)):(isFinalTab=!1,$.hook("continue_SpecialRequests_btn").text(d.NEXT_STATEROOM));for(d=
1;d<=b;d++)d!=a&&($("a#stateroom_tab_"+d+".active").removeClass("active"),this.setCurrentTabSelected());this.setIdForExternalInfoLink();a=$("#allTravelers").data("travelers");for(b=1;b<=a;b++){var e=$("#travelerInfoSection_"+b);d=e.data("booking-title");e=e.data("booking-suffix");void 0!=d&&""!=d&&$("#title_"+b+' option[value="'+d+'"]').prop("selected",!0);void 0!=e&&""!=e&&$("#suffix_"+b+' option[value="'+e+'"]').prop("selected",!0)}$namespace.TabOrder.updatePageTabOrder()},setCurrentTabSelected:function(){var a=
this.module.TranslationTexts;$(".stateroomTabs").each(function(){$(this).hasClass("active")?$(this).find(".ada-screenreader").text(" - "+a.SELECTED_TEXT):$(this).find(".ada-screenreader").text(" - "+a.NOT_SELECTED_TEXT)})},removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");
var d=a.selector;d.includes("birth_day")||d.includes("birth_month")||d.includes("birth_year")?a.after('<label tabindex="-1" class="error no-outline error-relative" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>"):a.after('<label tabindex="-1" class="error no-outline" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");isFirstFormFieldFocusActive||(a.parent().removeClass("focus"),isFirstFormFieldFocusActive=
!0,a.focus(),this.setErrorFocus=a);$namespace.TabOrder.updatePageTabOrder()},removeDOBError:function(a){$(".traveler-dob-drop-down-"+a.data("pax-number")).addClass("form-group");$(".traveler-dob-drop-down-common-error-"+a.data("pax-number")).empty();a.removeClass("error common-error");a.removeAttr("aria-describedby");var b=$("#birth_day_"+a.data("pax-number")),d=$("#birth_month_"+a.data("pax-number"));a=$("#birth_year_"+a.data("pax-number"));b.removeClass("error common-error");b.removeAttr("aria-describedby");
a.removeClass("error common-error");a.removeAttr("aria-describedby");d.removeClass("error common-error");d.removeAttr("aria-describedby");$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},addDOBError:function(a,b){$(".traveler-dob-drop-down-"+a.data("pax-number")).removeClass("form-group");$(".traveler-dob-drop-down-common-error-"+a.data("pax-number")).html('<label tabindex="-1" class="error no-outline dob-error" id="'+a.attr("id")+'_error">'+b+"</label>");a.addClass("error common-error");
a.attr("aria-describedby",a.attr("id")+"_error");b=$("#birth_day_"+a.data("pax-number"));var d=$("#birth_year_"+a.data("pax-number"));b.addClass("error common-error");b.attr("aria-describedby",a.attr("id")+"_error");d.addClass("error common-error");d.attr("aria-describedby",a.attr("id")+"_error");$(window).trigger("resize");isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,a.data("locale")?(b.focus(),this.setErrorFocus=b):(a.focus(),this.setErrorFocus=a));$namespace.TabOrder.updatePageTabOrder()},
addFlightBasedChildDOBError:function(a,b){var d=this.module.TranslationTexts;1==$("#cruiseTravelerInfo").data("is-booking-has-flights")?this.addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_airlines_are_very_strict_about_birthdates_and_ages_change_fees_may_apply_if_the_pnr_is_incorrect_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",
b):this.addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT),"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",b)},calculateAgeInYears:function(a,b){var d=a.getFullYear()-b.getFullYear(),e=a.getMonth()-b.getMonth();(0>e||0===e&&a.getDate()<b.getDate())&&d--;return d},calculateAgeInMonths:function(a,
b){var d=12*(a.getFullYear()-b.getFullYear()),e=a.getMonth()-b.getMonth(),f=a.getDate()-b.getDate();d+=e;(0>f||0===e&&a.getDate()<b.getDate())&&d--;return d},addAndTrackFormError:function(a,b,d){this.addError(a,b);this.gaTrackEventError(d)},openAccordion:function(a){if(a.length&&!a.hasClass("active")){var b=a.children(".accordion-header").children(".accordion-button"),d=a.children(".accordion-content");a.closest(".accordion")[0].accordionMenu.open(a,b,d)}},validateFrequentFlyerNumbers:function(a,
b){var d=!0,e=this;$("#frequent_flyer_accordion_div_"+a).find(".frequent-flyer-row").each(function(a,g){a=$(g).find(".frequent-flyer-number-input");var f=a.val();f.trim()&&!f.trim().match(FREQUENT_FLYER_NUMBER_REGEX)&&(e.openAccordion($(g).closest(".accordion-item")),e.addError(a,$namespace.MessageUtil.prefixError(b.TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE)),d=!1)});return d},validateRedressNumber:function(a,b){var d=!0;a=$("#redress_number_"+a);this.removeError(a);var e=a.length&&a.val().length?
a.val().trim():!1;e&&!e.match(REDRESS_NUMBER_REGEX)&&(this.openAccordion(a.closest(".accordion-item")),this.addError(a,$namespace.MessageUtil.prefixError(b.TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE)),d=!1);return d},validateKnownTravelerNumber:function(a,b){var d=!0;a=$("#known_traveler_number_"+a);this.removeError(a);var e=a.length&&a.val().length?a.val().trim():!1;e&&!e.match(KNOWN_TRAVELER_NUMBER_REGEX)&&(this.openAccordion(a.closest(".accordion-item")),this.addError(a,$namespace.MessageUtil.prefixError(b.KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE)),
d=!1);return d},onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},onFrequentFlyerKeyPress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},onModifyFrequentFlyerNumber:function(a){var b=this;setTimeout(function(){b._modifyFrequentFlyerAirlineError(a)},0)},modifyFrequentFlyerAirlineError:function(a){a=$(a.currentTarget);a.val(a.val().trim());a.val()?a.closest(".row").prev().addClass("form-required"):(a.closest(".row").prev().removeClass("form-required"),
this._removeError(a.closest(".row").find(".airline-select")))},onRedressNumberKeypress:function(a){return $namespace.Validation.checkNumericKeyCode(a)},onKnownTravelerNumberKeypress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},validateTravelerInfoForm:function(){var a=!0;isFirstFormFieldFocusActive=!1;for(var b=this.module.TranslationTexts,d=$("#allTravelers").data("travelers"),e=[],f="",g=this.validator,h=1;h<=d;h++){var k=$("#title_"+h),l=k.val();this.removeError(k);null==
l||""==l?(a=!1,f="title_is_required_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.REQUIRED_TITLE),f)):g.title.pattern.test(l)||(a=!1,f="title_is_invalid_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.INVALID_TITLE),f));var p=$("#first_name_"+h),q=$.trim(p.val());this.removeError(p);""==q?(a=!1,f="first_name_is_required_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.REQUIRED_FIRST_NAME),f)):g.firstName.pattern.test(q)||
(a=!1,f="first_name_is_invalid_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.INVALID_FIRST_NAME),f));p=$("#last_name_"+h);var r=$.trim(p.val());this.removeError(p);""==r?(a=!1,f="last_name_is_required_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.REQUIRED_LAST_NAME),f)):g.lastName.pattern.test(r)?2>r.length&&(a=!1,f="last_name_must_be_greater_than_2_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE),
f)):(a=!1,f="last_name_is_invalid_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.INVALID_LAST_NAME),f));p=$("#middle_name_"+h);var v=$.trim(p.val());null==v||""==v||g.lastName.pattern.test(v)||(a=!1,f="middle_name_initial_is_invalid_traveler_"+h,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(b.INVALID_MIDDLE_INITIAL_NAME),f));var n=$("#gender_"+h);p=$.trim(n.val());this.removeError(n);null==p||""==p?(a=!1,f="gender_is_required_traveler_"+h,this.addAndTrackFormError(n,
$namespace.MessageUtil.prefixError(b.REQUIRED_GENDER),f)):g.gender.pattern.test(p)||(a=!1,f="gender_is_invalid_traveler_"+h,this.addAndTrackFormError(n,$namespace.MessageUtil.prefixError(b.INVALID_GENDER),f));if(("Mr."==l||"Master"==l)&&"1"!=p||("Ms."==l||"Mrs."==l||"Miss"==l)&&"2"!=p)a=!1,f="gender_should_matched_with_title_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.REQUIRED_GENDER_TITLE),f);k=$("#suffix_"+h);var t=$.trim(k.val());this.removeError(k);null==t&&""==
t||g.suffix.pattern.test(t)||(a=!1,f="suffix_is_invalid_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.INVALID_SUFFIX),f));k=$("#citizenship_"+h);var u=$.trim(k.val());this.removeError(k);null==u||""==u?(a=!1,f="citizenship_is_required_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.REQUIRED_CITIZENSHIP),f)):g.citizenship.pattern.test(u)||(a=!1,f="citizenship_is_invalid_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.INVALID_CITIZENSHIP),
f));k=$("#past_passenger_"+h);var w=$.trim(k.val());this.removeError(k);g.pastPassengerNumber.pattern.test(w)||(a=!1,f="past_passenger_number_is_invalid_traveler_"+h,this.addAndTrackFormError(k,$namespace.MessageUtil.prefixError(b.INVALID_PAST_PASSENGER_NUMBER),f));var y=this.validateAndGetDataOfBirth(h);!y&&a&&(a=y);if(f=$("#cruiseTravelerInfo").data("is-booking-has-flights"))$namespace.GlobalConstants.CONSUMER_SUPER_PNR_FTI_ENABLED&&(this.validateFrequentFlyerNumbers(h,b)||(a=!1)),$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&
(this.validateRedressNumber(h,b)||(a=!1),this.validateKnownTravelerNumber(h,b)||(a=!1));if(a){k=$("#travelerInfoSection_"+h).data("booking-passenger-info-id");n=$("#traveler_"+h).data("traveler-type");var z=$("#past_passenger_"+h).data("frequent-traveller-id"),x=$("#allTravelers").data("cruise-line-code");p={paxId:this.isEmpty(k),paxTitle:this.isEmpty(l),paxType:this.isEmpty(n),paxFirstName:this.isEmpty(q),paxMedInitial:this.isEmpty(v),paxLastName:this.isEmpty(r),paxCitizenship:this.isEmpty(u),paxSuffix:this.isEmpty(t),
paxDateOfBirth:this.isEmpty(y),paxGender:this.isEmpty(p),pastPassengerNumber:this.isEmpty(w),frequentTravellerId:this.isEmpty(z),cruiseLineCode:this.isEmpty(x)};if(f){if($namespace.GlobalConstants.CONSUMER_SUPER_PNR_FTI_ENABLED){var B=[];$("#frequent_flyer_accordion_div_"+h).find(".frequent-flyer-row").each(function(a,b){a=$(b).find(".frequent-flyer-number-input").val().trim();b=$(b).find("input.frequent-flyer-airline-hidden-input").val();B.push({vendor:b,frequentTravelerNumber:a,vendorType:"Flight"})});
p.paxFrequentTravelerDetails=B}if($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED){f=$("#redress_number_"+h);if(f=f.length&&f.val().length?f.val().trim():!1)p.paxRedressNumber=f;f=$("#known_traveler_number_"+h);if(f=f.length&&f.val().length?f.val().trim():!1)p.paxKnownTravelerNumber=f}}e[h-1]=p}a||(e=[],this.showAccordionFocus(h),$namespace.DomUtil.setElementLoadingMask(!1,null,!1))}d=$("#accept_terms");this.removeError(d);d.is(":checked")||(d.addClass("darkRedLabel"),$(".termsAndConditions-text-and-links").addClass("darkRedLabel error"),
$(".termsAndConditions-link").addClass("darkRedLabel error"),a=!1,f="terms_and_conditions_check_is_required_stateroom_"+$(".stateroomTab").attr("data-bookingindex"),this.addAndTrackFormError(d,$namespace.MessageUtil.prefixError(b.TERMS_AND_CONDITIONS_ERROR_MESSAGE),f));if(a)return e;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);return a},_termsAndConditionCkeck:function(){$("#accept_terms").is(":checked")&&($("#accept_terms").removeClass("darkRedLabel error"),$(".termsAndConditions-text-and-links").removeClass("darkRedLabel error"),
$(".termsAndConditions-link").removeClass("darkRedLabel error"),$("#accept_terms_error").remove())},validateAndGetDataOfBirth:function(a){var b=!0,d=this.module.TranslationTexts,e=this.validator;if($("#birth_month_"+a).data("locale")){var f=$("#birth_day_"+a),g=f.val();this.removeError(f);if(null==g||""==g){b=!1;var h="date_of_birth_day_is_required_traveler_"+a;this.addError(f,$namespace.MessageUtil.prefixError(d.REQUIRED_DOB_DAY));this.gaTrackEventError(h)}var k=$("#birth_month_"+a),l=k.val();this.removeError(k);
if(null==l||""==l)b=!1,h="date_of_birth_month_is_required_traveler_"+a,this.addError(k,$namespace.MessageUtil.prefixError(d.REQUIRED_DOB_MONTH)),this.gaTrackEventError(h)}else{k=$("#birth_month_"+a);l=k.val();this.removeError(k);if(null==l||""==l)b=!1,h="date_of_birth_month_is_required_traveler_"+a,this.addError(k,$namespace.MessageUtil.prefixError(d.REQUIRED_DOB_MONTH)),this.gaTrackEventError(h);f=$("#birth_day_"+a);g=f.val();this.removeError(f);if(null==g||""==g)b=!1,h="date_of_birth_day_is_required_traveler_"+
a,this.addError(f,$namespace.MessageUtil.prefixError(d.REQUIRED_DOB_DAY)),this.gaTrackEventError(h)}var p=$("#birth_year_"+a);f=p.val();this.removeError(p);if(null==f||""==f)b=!1,h="date_of_birth_year_is_required_traveler_"+a,this.addError(p,$namespace.MessageUtil.prefixError(d.REQUIRED_DOB_YEAR)),this.gaTrackEventError(h);if(b){var q=$("#traveler_"+a).data("traveler-type");h=$("#traveler_"+a).data("traveler-age");var r=new Date(_departureDate);p=new Date(_returnDate);var v=l+"/"+g+"/"+f,n=new Date(v);
this.removeDOBError(k);if(!e.dateOfBirth.pattern.test(v))return h="date_of_birth_is_invalid_traveler_"+a,this.addDOBError(k,$namespace.MessageUtil.prefixError(d.INVALID_DOB)),this.gaTrackEventError(h),!1;e=isFlightSelected?$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_AIRLINE_VALIDATION_ERROR_MESSAGE):$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_CRUISE_VALIDATION_ERROR_MESSAGE);if(0==q)p=this.calculateAgeInYears(r,n),18>p&&(this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE)),
b=!1);else if(1==q)p=this.calculateAgeInYears(r,n),$("#traveler_"+a).data("passenger-type"),18<p?(this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE)),b=!1):p!=h&&(this.addDOBError(k,e),b=!1);else if(q=$("#cruiseTravelerInfo").data("is-booking-has-flights"),v=$("#traveler_"+a).data("infant-on-seat"),q)12>h?(r=this.calculateAgeInMonths(r,n),11<r?(this.addFlightBasedChildDOBError(k,a),b=!1):r!=h&&(this.addDOBError(k,e),b=!1),0>r&&(p=this.calculateAgeInMonths(p,
n),0>p&&(this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),b=!1))):v?(r=this.calculateAgeInMonths(r,n),12>r?(this.addFlightBasedChildDOBError(k,a),b=!1):23<r?(this.addFlightBasedChildDOBError(k,a),b=!1):r!=h&&(this.addDOBError(k,e),b=!1)):(r=this.calculateAgeInMonths(r,n),p=this.calculateAgeInMonths(p,n),23<p?(this.addFlightBasedChildDOBError(k,a),b=!1):12>r?(this.addFlightBasedChildDOBError(k,a),b=!1):r!=
h&&(this.addDOBError(k,e),b=!1));else if("Infant"==$("#traveler_"+a).data("passenger-type"))this.isFutureDate(n)?(this.addDOBError(k,$namespace.MessageUtil.prefixError($namespace.TranslationUtil.replaceParameters(d.INFANT_CRUISE_LINE_POLICIES_ERROR_MESSAGE,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}))),b=!1):12>h?(r.getTime()===n.getTime()&&(this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE)),b=!1),r=this.calculateAgeInMonths(r,
n),11<r?(this.addDOBError(k,e),b=!1):r!=h&&(this.addDOBError(k,e),b=!1),0>r&&(p=this.calculateAgeInMonths(p,n),0>p?this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE)):this.addDOBError(k,e),b=!1)):(r=this.calculateAgeInMonths(r,n),12>r||23<r?(this.addDOBError(k,e),b=!1):r!=h&&(this.addDOBError(k,e),b=!1));else if(0==h)r.getTime()===n.getTime()&&(this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE)),
b=!1),r=this.calculateAgeInMonths(r,n),11<r&&(this.addDOBError(k,e),b=!1),0>r&&(p=this.calculateAgeInMonths(p,n),0>p?this.addDOBError(k,$namespace.MessageUtil.prefixError(d.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE)):this.addDOBError(k,e),b=!1);else if(r=this.calculateAgeInMonths(r,n),12>r||23<r)this.addDOBError(k,e),b=!1;if(b)return l+"/"+g+"/"+f;this.gaTrackEventError("please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler_traveler"+
a)}else $("#erro-space-"+a).remove();return b},isFutureDate:function(a){a=new Date(a);var b=new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);return a>b?!0:!1},isEmpty:function(a){return void 0===a||null==a?"":a},checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onTermsAndConditionsClick:function(a){var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTravelerInfo.act",
"tinfo=SHOW_TERMS_AND_CONDITIONS",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Modal(this.responseText),e=$(".traveler-info-terms-conditions-modal a"),f=$(".modal-close");e.addClass("text-underline external-link");e.each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});e.attr("data-taborder","document");e.last().attr("data-tab-last","true");$(".traveler-info-terms-conditions-modal").on("click",
".external-link",b.checkTermsAndConditionLinksClick);a.show();f.focus();f.attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder()},null)},trackPageView:function(a){var b="bookingWidget";a&&(b="offerPage");a=document.title;b="/cr/booking/"+b+"/travelerInformation"+this.getGaCruisePackagePrefix();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v67:"1",v74:b,v34:$(this.el).data("destination")});$namespace.Analytics.track({vendor:"google",type:"pageview",
events:"1",text:b})},trackEventAccordion:function(a,b){var d;b.hasClass("cruiseSummaryAccordion")?d="CR_Traveler_Information_Cruise_Summary":b.hasClass("cruiseTravelerInformation")?d="CR_Traveler_Information_Travelers_Summary":b.hasClass("cruiseTravelerStateroomAccordion")?d="CR_Traveler_Information_Stateroom_Summary":b.hasClass("cruiseTravelerFlightAccordion")?d="CR_Traveler_Information_Flights_Summary":b.hasClass("cruiseTravelerHotelAccordion")?d="CR_Traveler_Information_Hotel_Summary":b.hasClass("cruiseTravelerTransportAccordion")&&
(d="CR_Traveler_Information_Transportation_Summary");$namespace.Analytics.trackEvent(d,"Click","Expand")},_readMoreInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showless-trigger"]').removeClass("displayNone");$(window).trigger("resize");
$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();$namespace.TabOrder.updatePageTabOrder()},_readLessInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$('[data-hook="showmore-content"]').addClass("showmore-content");$('[aria-hidden="false"]').each(function(a,d){$(d).attr("aria-hidden","true");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showmore-trigger"]').removeClass("displayNone");
$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},_onSelectDropDownClick:function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onSelectDropDownFocusIn:function(a){a.preventDefault();$(a.currentTarget)},_onSelectDropDownFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onTravelerTitleChange:function(a){a=$(a.currentTarget);var b=$("#gender_"+
a.data("traveler-count"));"Mr."==a.val()||"Master"==a.val()?($(b).val("1"),this.removeError(b)):"Ms."==a.val()||"Mrs."==a.val()||"Miss"==a.val()?($(b).val("2"),this.removeError(b)):"1"!=$(b).val()&&"2"!=$(b).val()&&$(b).val("")},_onSelectDropDownChange:function(a){a.preventDefault();var b=$(a.currentTarget);""!=b.val()?(this.removeError(b),b.hasClass("common-error")&&this.removeDOBError(b)):"middle_name"!=b.attr("name")&&"past_passenger"!=b.attr("name")||""!=b.val()||this.removeError(b);"title"==
b.attr("name")&&this._onTravelerTitleChange(a);this._initDayDropDown(b);a=$("#"+a.target.id).data("pax-number");b=$("#birth_day_"+a).val();var d=$("#birth_month_"+a).val(),e=$("#birth_year_"+a).val();this.isUndefinedOrBlank(b)||this.isUndefinedOrBlank(d)||this.isUndefinedOrBlank(e)||($("#erro-space-"+a).remove(),$(window).trigger("resize"));$namespace.TabOrder.updatePageTabOrder()},_initDayDropDown:function(a){if(a.data("show-days")){a=a.data("pax-number");var b=$("#birth_month_"+a),d=$("#birth_day_"+
a),e=$("#birth_year_"+a),f=d.val(),g=!1;if(""!=b.val()&&""!=e.val())for(b=(new Date(e.val(),b.val(),0)).getDate(),$("#birth_day_"+a).find("option:not(:first)").remove(),e=1;e<=b;e++)d.append("<option value='"+e+"'>"+e+"</option>"),e==f&&(g=!0);else if(""!=b.val()&&""==e.val())for(b=(new Date((new Date).getFullYear(),b.val(),0)).getDate(),$("#birth_day_"+a).find("option:not(:first)").remove(),e=1;e<=b;e++)d.append("<option value='"+e+"'>"+e+"</option>"),e==f&&(g=!0);$("#birth_day_"+a).val(g?f:"")}},
isUndefinedOrBlank:function(a){return void 0===a||""==a?!0:!1},_openCloseTravelerAccordion:function(a){a=$(a.currentTarget);var b=a.data("pax-number");this.setErrorFocus=null;a.closest("div.accordion-item").hasClass("active")?this.hideAccordionFocus(b):this.showAccordionFocus(b);$namespace.TabOrder.updatePageTabOrder()},_openCloseTravelerAccordionOnEnterEvent:function(a){var b=a.which;if(13==b||32==b)a.preventDefault(),this._openCloseTravelerAccordion(a)},_openCloseTravelerAccordionOnClick:function(a){this._openCloseTravelerAccordion(a)},
showAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.addClass("active");a.find(".accordion-content:first").show();a.find(".accordion-button:first").attr("aria-expanded","true");a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg");null!=this.setErrorFocus&&this.setErrorFocus.focus()},hideAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.removeClass("active");a.find(".accordion-content:first").hide();a.find(".accordion-button:first").attr("aria-expanded",
"false");a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")},_onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},_onInputFocusOut:function(a){a=$(a.currentTarget);a.val(a.val().trim().toUpperCase())},gaTrackEventError:function(a){$namespace.Analytics.trackEvent("Error/Cr/Traveler_Information",a,this.getGaCruisePackagePrefix())},getGaEventLabel:function(){return"/cr/booking/bookingWidget/travelerInformation"+this.getGaCruisePackagePrefix()},
getGaCruisePackagePrefix:function(){var a=$(this.el);return"/"+a.data("destination")+"/"+a.data("cruise-line-name")+"/"+a.data("cruise-ship-name")+"/"+a.data("cruise-departure-date")},_initTravelerNumberTooltips:function(){$('a[data-tooltip="known-traveler-number-tooltip"], a[data-tooltip="redress-number-tooltip"]').each(function(a,b){b.travelerNumberTooltip||(b.travelerNumberTooltip=new $namespace.Widgets.Tooltip($(b)))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};widgets=$namespace.Widgets||{};
$namespace.View.MultiCityPackageOverviewView=Backbone.View.extend({el:"#multiCityPackageOverview",documentPath:"/vp/booking/pkgoverview/",previousPageURL:null,HOURS_ALLOWED_WITHOUT_EXTRA_CHARGE:1,MINUTES_ALLOWED_WITHOUT_EXTRA_CHARGE:59,ui:{map:null},googleMap:null,events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="editBtnTripFlights"]':"_continueToFlights",'click [data-hook="loginAndBook"]':"_loginAndBookClick",'click [data-hook="continueToNext"]':"_continueToNextClick",
'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click a[data-hook="productItineraryInfo"]':"_showItineraryRemarksModal",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",'click [data-hook="hotel-details-megatip"]':"_clickHotelCardLearnMore","click a.modal-gallery-thumb":"_onGalleryThumbClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal","click span.accordion-button":"_clickItineraryAccordion","click a.airline_baggage_policy":"_onAirlineBaggagePolicyClick",
'click [data-hook="editBtnCityActivities"]':"_editBtnCityActivities",'click [data-hook="editBtnCityHotel"]':"_editBtnCityHotel",'change [data-hook="activity-date-time"]':"_onActivityUpdateClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation",'change [data-hook="transfer-airport"]':"_onTransferAirportChange",'change [data-hook="carPickupAndDropoffTime"]':"_onCarPickupAndDropoffTimeChange","focusin select.dataList":"_onSelectFocusIn","focusout select.dataList":"_onSelectFocusOut","click select.dataList":"_onSelectClick",
'click [data-hook="goBack"]':"_onBackLink",'click [data-hook="editBtnIntercityFlight"]':"_editBtnIntercityFlight",'click [data-hook="editBtnCityTransportation"]':"_editBtnCityTransportationClick",'click [data-hook="editBtnCityLinkTransportation"]':"_editBtnCityLinkTransportation","click a.interCityMegaTipLink":"_onInterCityFlightMegaTipClick",'click [data-hook="update-optional-service"]':"_onUpdateOptionalServiceCheckboxClick",'click [data-hook="editCityHotelRoom"]':"_editCityHotelRoom","click .turnToTeaserWidgetLink":"_onReviewsLinkClick"},
_onBackLink:function(a){$namespace.Navigation.loadPage(_webLoc+this.previousPageURL)},itineraryAccordion:!1,_onReviewsLinkClick:function(a){a=$(a.currentTarget).data("hotel-id");var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a),d=$(this.el).data("package-id");if(null!=b){var e=this;$(window).on("ct.megatip.opened",function(){var a=b.getReviewsAccordionId();$(a).focus();$(a).closest('[data-hook="accordion"]').get(0).accordion.open();e._onAccordionClick({currentTarget:$(a)},$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);
$(window).off("ct.megatip.opened")});$('a[data-megatip][data-hotelid="'+a+'"]').click();$namespace.Analytics.trackEvent("Package_Overview_factsheet_page","click",d,null)}},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():(this.hotelRatingsTooltip.show(a),a=$(this.el).data("package-id"),$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Costco Travel Rating","click",a))},_showMoreInformation:function(a){a=
$(a.currentTarget);$(".showmore-content").find("a").attr("data-taborder","document");$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$(".showmore .blue-bullets li").attr("aria-hidden","false");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},fromOfferPage:!1,initialize:function(a){var b=this;this.controller=$.extend({},a).controller;this.module=
a.module;this.ui.map=$.hook("cityMap");this.eventLabel=$(this.el).data("package-id");this.eventAction="";this.eventCategory="Pkg_Overview_Flights_View_Details";$(this.el).data("offer-page")?(this.fromOfferPage=!0,this.previousPageURL="/Vacation-Packages/"+$(this.el).data("destination-name")+"/Offers/"+$(this.el).data("package-id")):this.previousPageURL="/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_ALL_PACKAGES;this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,
b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?b.accordion.open(!0):b.accordion.close(!0)});a=this.$el.find("[data-megatip='flight-details-megatip']");if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));a.on("click",function(a){$namespace.Analytics.trackEvent("Pkg_Overview_Flights_View_Details","click",$("#multiCityPackageOverview").data("package-id"),
null)})}this.$el.find('[data-hook="accordion"]').each(function(a,d){d.accordion||(d.accordion=new $namespace.Widgets.Accordion($(d)));if(d.accordion)if(d.accordion.close(!0),"baggageAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onBaggageAccordionClick"));else if("termsAndConditionsAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onTermsAndConditionsAccordionClick"));else if("diningAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",
$.proxy(b,"_onTermsAndConditionsAccordionClick"))});$.hook("parent-accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a)}));this.$el.find('[data-hook="parent-accordion"],[data-hook="accordion"]').each(function(a,b){b.accordion&&b.accordion.close(!0)});this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length)for(a=$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,
{parentSelector:".travel-description"}),a.off("click"),a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"MulticityPackageOverview",hotelId:$(".hotelIdValue").first().val()})});$(".requiredDocCard h2").addClass("displayNone");$(".requiredDocCard a").addClass("external-link");
$(".requiredDocCard a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".requiredDocCard").on("click",".external-link",this._onExternalLinkClick);$(".showmore-content .blue-bullets li").each(function(a,b){$(b).attr("aria-hidden","true");1<=a?($(b).attr("aria-hidden","true"),$namespace.TabOrder.updatePageTabOrder(),1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),
$(b).attr("tabindex","-1"))):$(b).find("a").attr("data-taborder","document")});$namespace.Application.initTurnToTeasers();this.itineraryAccordion=!1;this.initShopCardTooltips();this.$el.find("select").addClass("dataList");$(".readMore").removeAttr("role");$(".backtopreviouspage").removeAttr("role");this._addAriaLevelOrRole(this.$el.find("div.airLineTermAndCondions h3"),"5","heading");this._addAriaLevelOrRole(this.$el.find("div.interCityFlightDetailsMegatip div.airLineTermAndCondions h3"),"6","heading");
this.getCitiesMap();$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.trackGA();this.trackAdobe();$(window).load(function(){$("form").get(0).reset();$("html, body").animate({scrollTop:$("#multiCityPackageOverview").offset().top-400},100)});$("#flight-details-megatip .termsAndConditions a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")});$("#flight-details-megatip .termsAndConditions").on("click",
".external-link",this._onExternalLinkClick);$(".external-link").removeAttr("data-taborder").attr("tabindex","-1")},_addAriaLevelOrRole:function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onExternalLinkClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onBaggageAccordionClick:function(a){a=$(this.el).data("package-id");$namespace.Analytics.trackEvent("Pkg_Overview_Flights_Baggage Fees","click",a,null)},_onTermsAndConditionsAccordionClick:function(a){a=
$(this.el).data("package-id");$namespace.Analytics.trackEvent("Pkg_Overview_Flights_Terms_and_Conditions","click",a,null)},_onResize:function(){$namespace.ImageUtil.initImages();$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").attr("aria-hidden","true"):$("#mobileReadMoreLink").attr("aria-hidden","false")},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},
_showCancellationPolicyModal:function(){var a=$(this.el).data("package-id"),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act",
"vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("Pkg_Overview_Cancellation_Policy_Schedule","click",a,null)},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");_.isEmpty(a)||$namespace.Navigation.loadExternalUrl(a)},_editBtnCityActivities:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_ACTIVITY_RESPONSIVE+"_"+$(a.currentTarget).data("next-city-count"))},_continueToFlights:function(a){$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION)},_editBtnCityHotel:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_HOTEL_RESULTS+"_"+$(a.currentTarget).data("city-index"))},_editBtnIntercityFlight:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_MULTICITY_INTERCITY_FLIGHTS_RESULT+"_"+$(a.currentTarget).data("city-index")+
"_"+$(a.currentTarget).data("flight-uid"))},_editBtnCityTransportationClick:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS+"_"+$(a.currentTarget).data("city-index")+"_"+$(a.currentTarget).data("transfer-type"))},_editBtnCityLinkTransportation:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS+"_"+$(a.currentTarget).data("city-index")+
"_"+$(a.currentTarget).data("transfer-type")+"_"+$(a.currentTarget).data("click-link"))},_editCityHotelRoom:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_HOTEL_RESULTS+"_"+$(a.currentTarget).data("city-index")+"_"+$(a.currentTarget).data("room"))},_onToursLinkClick:function(a){var b=$(this.el).data("package-id");a=$(a.currentTarget);a="mcac=LOAD_ACTIVITIES_CARD_POPUP&sightseeingId="+
a.data("tour-id")+"&itineraryCode="+a.data("iternary-code");$namespace.Analytics.trackEvent("Pkg_Overview_Activity_Read_More","click",b,null);b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):((new $namespace.Widgets.Modal(this.responseText)).show(),$(".tourDetailModalPopup").find("table").attr("role","presentation"))}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivitiesCard.act",a,null,null,b,null)},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),d=b.attr("data-iternary-code");a=b.attr("data-includeRemarks");var e=b.attr("data-product");$("#theme_park_read_more").attr("data-vendorid");var f=$(this.el).data("package-id");b=b.attr("data-rate-info-title");d={itineraryCode:d};d.mctc=a?"LOAD_FILTERED_ITINERARY_REMARKS":"LOAD_ITINERARY_REMARKS";
"true"==b&&(d.itineraryRemarksModalTitle="Rate details and cancellation policy");b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_ITINERARY_REMARKS_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",
$.param(d),null,null,b,null);"ArrivalTransfer"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"MultiCity_Pkg_Overview_Arrival_Transfer",label:f});"DepartureTransfer"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"MultiCity_Pkg_Overview_Departure_Transfer",label:f});"Car"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"MultiCity_Pkg_Overview_Rental_Car",label:f});"Rail"==e&&$namespace.Analytics.track({vendor:"google",
type:"ev",action:"Click",category:"MultiCity_Pkg_Overview_Rail",label:f});"Ferry"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"MultiCity_Pkg_Overview_Ferry",label:f});"Hotel"==e&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Hotel_Room_Rate",label:f});a&&"linkThemeParkTicketCardDescription"!=e&&$namespace.Analytics.trackEvent("Pkg_Overview_Included_Extras","click",f)},_resetFlightsAccordion:function(a){a=$(a.target).closest(".megatip").attr("id");
a=$("#"+a+" .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")});$namespace.TabOrder.updatePageTabOrder()},_clickHotelCardLearnMore:function(a){var b=$(a.currentTarget),d=this,e=$(b).data("destination"),f=$(b).data("citycode"),g=$(b).data("hotelid"),h=$(b).data("megatip");if(void 0!=$(b).attr("data-hotelName"))var k=$(b).attr("data-hotelName").split(",")[0];var l="";l=$(b).data("dynamic-package");var p=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(g);
a=$(this.el).data("package-id");l=("true"!=l?"mcoh=SHOW_OFFER_HOTEL_DETAIL_INFO":"mcoh=SHOW_DYNAMIC_HOTEL_DETAIL_INFO")+("&destination="+e)+("&cityCode="+f);l+="&hotelId="+g;l+="&hotelName="+k;null!=p&&(l+="&displayReviewsAccordion=",l+=p.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());k=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:e.VACATION_PACKGE_HOTEL_DETAIL_POPUP_ERROR_TITLE}):($("#"+h).html(this.responseText),e=new $namespace.Widgets.Megatip($(b)),$("div.hotelDetailAccordions h3, h4, h5").each(function(){d._addAriaLevelOrRole($(this),"6","heading")}),$.hook("accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a);a.on("ct.accordion.clicked",$.proxy(d,"_onAccordionClick"))})),$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)})),
$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,b){$(b).on("click",function(a){a=$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Pkg_Overview_Hotel_Rooms",label:g+"_"+d.innerText})})}),$('.megatip DIV[data-hook="tab-switcher"]').each(utils.eachUninitialized(function(a,b){d.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));
d.tabSwitcher.currentTab=null})),d.tabSwitcher&&(d.tabSwitcher.onSelect=function(a,b,d){!0!==d&&$(".panel.active").focus();"features-tab"==a?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property_Features","click",g,null):"activities-tab"==a&&$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property_Activities","click",g,null)}),new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+g)),e.show(),window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50),
d._onResize())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Analytics.trackEvent("Package_Overview_Learn_More","click",a,null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityOverviewHotels.act",l,null,null,k,null,"")},_onGalleryThumbClick:function(a){var b=$(a.currentTarget);new $namespace.Widgets.ModalGallery(b,{isHotelGallery:"true"});$namespace.Analytics.trackEvent("Hotel_popup","photos",a.currentTarget.dataset.hotelid)},_onAccordionClick:function(a,b){a=$(".hotelIdValue").first().val();
var d=$(this.el).data("package-id");"Overview"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Overview","click",a,null):"Property"==b?($namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Property","click",a,null),$("#features-tab-id").attr("data-taborder","document"),$namespace.TabOrder.updatePageTabOrder()):"Dining"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Dining","click",a,null):"Rooms"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Rooms","click",a,null):"Map"==b?
$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_Map","click",a,null):"All-Inclusive"==b?$namespace.Analytics.trackEvent("Pkg_Overview_Hotel_AllInclusive","click",a,null):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&$namespace.Analytics.trackEvent("Package_Overview_Hotel_Reviews",a,d)},_clickItineraryAccordion:function(a){a=$(a.currentTarget);this.itineraryAccordion&&$(a).parent().parent().parent().hasClass("parent-accordion")&&$(a).parent().parent().find("[data-hook='hotel-details-megatip']").hasClass("megatip-active")&&
($(a).parent().parent().find("[data-hook='hotel-details-megatip']").removeClass("megatip-active"),$(a).parent().parent().find(".megatip").hide());this.itineraryAccordion=!0},_isLoginAndBookClick:!1,_isFirstFormFieldFocusActive:!1,_createBooking:function(){var a=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityPackageOverview.act","mcpo=CREATE_BOOKING",null,null,function(b){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);b?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS,
["true"]):$namespace.MessageUtil.showMessage({type:1,text:this.message.text});a._isLoginAndBookClick=!1},null)},_checkFlightRePrice:function(){this.validateAndContinue(this.selectedFlightItemUid)},validateAndContinue:function(a,b){a={mcfc:"VALIDATE_FLIGHT_ITEM_SELECTION",uid:a,showAdditionalRepriceInfo:"true"};var d=this,e=this.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFlightCards.act",$.param(a),null,null,
function(a,b,h,k){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("false"==a)if($namespace.DomUtil.setElementLoadingMask(!1,null,!0),"true"==k){var f=new widgets.Confirm(this.responseText,function(){f.hide();d._createBooking()},d.loadMultiCitySelectedAndAdditionalFlightsPage);$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){f.show()},300):f.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:e.FLIGHT_WARNING_TITLE,
text:e.FLIGHT_CHANGED_WARNING_MESSAGE,button:e.FLIGHT_WARNING_CONTINUE_TEXT},d.loadMultiCitySelectedAndAdditionalFlightsPage,!1);else d._createBooking()},null)},loadMultiCitySelectedAndAdditionalFlightsPage:function(){$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act","mcfc=SHOW_FLIGHT_SEARCH_RESULT_AND_CHANGE_PACKAGE_OVERVIEW",null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.TabOrder.updatePageTabOrder(),
$namespace.Application.initializeOnMainContentReload())},null)},validateHotelSelection:function(a,b){var d="mchc=VALIDATE_HOTEL_SELECTION";$namespace.Validation.isBlankOrNull(a)||(d+="&advisoryItemUid="+a);$namespace.Validation.isBlankOrNull(b)||(d+="&roomTaxesAndFeesAcknowledged="+b);var e=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelCards.act",d,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);a?
e._checkFlightRePrice():((new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(e,"validateHotelSelection"))).show(),$namespace.Utils.Breakpoint.isDesktop()&&$("#hotelAcknowlegementContentDiv, #hotelTafAcknowlegementContentDiv").find("label").each(function(a,b){b.removeAttribute("for")}))},null)},_removeErrorFromSelect:function(a){a.closest(".select-widget").removeClass("error");a.closest("div.select-widget").removeClass("focus");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");
$(window).trigger("resize")},_expandCityAccordionByInnerElement:function(a){a=$("#"+a.closest("div.accordion-item").attr("id"));a.addClass("active");a.find("span.accordion-button").attr("aria-expanded","true");a.find("div.accordion-content").css("display","block");a.find("span.accordion-button").find("img").attr({src:$namespace.Configuration.webLoc+"/shared/images/svg/svg-caret-up-blue.svg"});$namespace.TabOrder.updatePageTabOrder();setTimeout(function(){$(window).trigger("resize")},100)},_addErrorOnSelect:function(a,
b){this._expandCityAccordionByInnerElement(a);a.closest("div.select-widget").addClass("error");a.closest("div.select-widget").after('<label tabindex="-1" class="error no-outline" id="'+a.attr("id")+'_error">'+b+"</label>");a.attr("aria-describedby",a.attr("id")+"_error");this._isFirstFormFieldFocusActive||(this._isFirstFormFieldFocusActive=!0,$namespace.DomUtil.scrollToMiddle(a[0]),a.closest("div.select-widget").addClass("focus"),a.focus())},_validatePackageOverview:function(){var a=this.module.TranslationTexts,
b=!0;this._isFirstFormFieldFocusActive=!1;var d=this;$(".intineraryCitiesAccordion").find("[data-hook='activity-date-time']").each(function(e){e=$(this).val();d._removeErrorFromSelect($(this));_.isEmpty(e)&&(d._addErrorOnSelect($(this),$namespace.MessageUtil.prefixError(a.ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE)),b=!1);$(this).data("activity-time-optional")||(e=$("#selectActivityTime"+$(this).data("activity-id")),d._removeErrorFromSelect(e),_.isEmpty($(e).val())&&(d._addErrorOnSelect(e,$namespace.MessageUtil.prefixError(a.ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE)),
b=!1))});$(".intineraryCitiesAccordion").find("[data-hook='transfer-airport']").each(function(e){e=$(this).val();d._removeErrorFromSelect($(this));_.isEmpty(e)&&(d._addErrorOnSelect($(this),$namespace.MessageUtil.prefixError(a.TRANSFER_AIRPORT_ERROR_MESSAGE)),b=!1)});$(".intineraryCitiesAccordion").find("[data-hook='carPickupAndDropoffTime']").each(function(e){e=$(this).val();d._removeErrorFromSelect($(this));_.isEmpty(e)&&(d._addErrorOnSelect($(this),$namespace.MessageUtil.prefixError(a.RENTAL_CAR_PICK_DROP_TIME_ERROR_MESSAGE)),
b=!1)});return b?this._validateRailFerry():b},_validateRailFerry:function(){var a=this.module.TranslationTexts,b=!0;$(".intineraryCitiesAccordion").find("[data-hook='editBtnCityTransportation']").each(function(d){void 0!=$(this).attr("data-rail-required")&&b?($namespace.MessageUtil.showMessage({type:1,text:a.RAIL_UNAVAILABLE}),b=!1):void 0!=$(this).attr("data-ferry-required")&&b&&($namespace.MessageUtil.showMessage({type:1,text:a.FERRY_UNAVAILABLE}),b=!1)});return b},_loginAndBookClick:function(){$namespace.Analytics.trackEvent("Pkg_Overview_Sign in and Book",
"click",this.eventLabel);this._validatePackageOverview()&&(this._isLoginAndBookClick=!0,this.validateHotelSelection())},_continueToNextClick:function(a){$namespace.Analytics.trackEvent("Pkg_Overview_Continue","click",this.eventLabel);$(a.currentTarget);this._validatePackageOverview()&&(this._isLoginAndBookClick=!1,this.validateHotelSelection())},_onActivityUpdateClick:function(a){a.preventDefault();a=$(a.currentTarget);a.data("city-uid");a.data("activity-id");var b=$("#selectActivityDate"+a.data("activity-id")),
d=$("#selectActivityTime"+a.data("activity-id")),e=$("#labelActivityTime"+a.data("activity-id")),f=$("#labelActivityDate"+a.data("activity-id")),g="mcac=UPDATE_ACTIVITIES";_.isEmpty(b.val())?_.isEmpty(f)||(g+="&activityUid="+f.data("uid")):g+="&activityUid="+b.val();_.isEmpty(d.val())?_.isEmpty(e)||(g+="&selectedTime="+e.text().trim()):g+="&selectedTime="+d.val();this._removeErrorFromSelect(a);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivitiesCard.act",g,null,null,function(a){a||
$namespace.MessageUtil.showMessage({type:1,text:this.message.text});$(window).trigger("resize")},null)},_onAirportTransferChangeRefreshScreen:function(a){var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityPackageOverview.act","mcpo=LOAD_PACKAGE_OVERVIEW",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("#mainContent").html(this.responseText);$namespace.Application.initializeOnMainContentReload();setTimeout(function(){b._expandCityAccordionByInnerElement(a);
$("[id='"+a.attr("id")+"']").closest("div.select-widget").addClass("focus");$("[id='"+a.attr("id")+"']").focus();$("[id='"+a.attr("id")+"']").each(function(){$(this).hasClass("disabled")&&$(this).closest("div.select-widget").removeClass("focus")})},100)},null)},_changeCityAirportTransfer:function(a,b){var d=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityOverviewTransportation.act",a,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):a&&d._onAirportTransferChangeRefreshScreen(b)},null)},_resetTransferAirport:function(a,b){$("[id='"+a.attr("id")+"']").val(b);$("[id='"+a.attr("id")+"']").closest("div.select-widget").addClass("focus");$("[id='"+a.attr("id")+"']").focus()},_onTransferAirportChange:function(a){a.preventDefault();var b=this,d=$(a.currentTarget),e=d.data("city-uid"),f=d.data("city-index"),g=d.data("pickup-point"),h="mcot=SHOW_CITY_TRANSFERS_CONFIRMATION";
h+="&uid="+e;h+="&cityIndex="+f;h+="&selectedPickupPoint="+d.val();_.isEmpty(d.val())||(b._removeErrorFromSelect($(a.currentTarget)),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityOverviewTransportation.act",h,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var k=
new $namespace.Widgets.Confirm(this.responseText,function(){h="mcot=UPDATE_CITY_TRANSFERS";h+="&uid="+e;h+="&cityIndex="+f;h+="&selectedPickupPoint="+d.val();b._changeCityAirportTransfer(h,d)},function(){b._resetTransferAirport(d,g);k.hide()});k.show();$(".airportTransferModal .modal-close").on("click",function(){b._resetTransferAirport(d,g)})}else b._onAirportTransferChangeRefreshScreen(d)},null))},_getHoursFromTime:function(a){var b=0,d=0;-1!=a.indexOf("PM")?(d=a.indexOf("PM"),b=12):-1!=a.indexOf("AM")&&
(d=a.indexOf("AM"),b=0);a=a.substring(0,d);a=a.split(":");a=parseInt(a[0],10);12==a&&(a="00");return a+b},_getMinutesFromTime:function(a){var b=0;-1!=a.indexOf("PM")?b=a.indexOf("PM"):-1!=a.indexOf("AM")&&(b=a.indexOf("AM"));a=a.substring(0,b);a=a.split(":");return parseInt(a[1],10)},_showConfirmation:function(a,b){var d=!1,e=this._getHoursFromTime(a),f=this._getHoursFromTime(b);a=this._getMinutesFromTime(a);b=this._getMinutesFromTime(b);e=f-e;if(e>this.HOURS_ALLOWED_WITHOUT_EXTRA_CHARGE||60*e+(b-
a)>this.MINUTES_ALLOWED_WITHOUT_EXTRA_CHARGE)d=!0;return d},createConfirmMessageForCarTimeChange:function(a,b,d,e){var f=null;if(a!=d||b!=e)f=!0;return f},_onCarPickupAndDropoffTimeChange:function(a){a.preventDefault();var b=this,d=$(a.currentTarget),e=d.data("city-code"),f=$("#pickupTime"+e),g=$("#dropoffTime"+e),h=d.data("car-cat-uid");a=$("#defaultDropTime"+e);var k=$("#defaultPickTime"+e).data("pickup-time"),l=a.data("dropoff-time");a="mctrr=SHOW_CAR_MESSAGE_CONFIRMATION_POPUP&uid="+h+"&fromPackageOverview=true";
var p=$("#pickupAgencyUid"+e).val(),q=$("#dropoffAgencyUid"+e).val(),r=!1;a=a+("&pickupAgencyUid="+p)+("&dropoffAgencyUid="+q);a+="&pickupTime="+f.val();a+="&dropoffTime="+g.val();var v=null;if(f.length&&g.length){if(k&&f.val()||l&&g.val())v=this.createConfirmMessageForCarTimeChange(k,l,f.val(),g.val());var n=this._showConfirmation(f.val(),g.val())}v?(a+="&timeChanged=true",r=!0):(a+="&timeChanged=false",r=!1);a=n&&v?a+"&timeChangedMessage=true":a+"&timeChangedMessage=false";var t=function(a){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text}),$("#pickupTime"+e).val(k),$("#dropoffTime"+e).val(l);else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var n=new $namespace.Widgets.Confirm(this.responseText,function(){var a="mctrr=CHANGE_CAR_CATEGORY_ITEM&fromAgencyChanged=true&uid="+h;a+="&pickupAgencyUid="+p;a+="&dropoffAgencyUid="+q;a=a+"&fromPackageOverview=true&pickupTime="+f.val();a+="&dropoffTime="+g.val();a+="&timeChanged="+r;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,t,null)},function(){$("#pickupTime"+e).val(k);$("#dropoffTime"+e).val(l);n.hide()});setTimeout(function(){n.show()},1E3);$(".modal-close").on("click",function(){$("#pickupTime"+e).val(k);$("#dropoffTime"+e).val(l)})}else $namespace.DomUtil.setElementLoadingMask(!1,null,!1),$("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload(),setTimeout(function(){b._expandCityAccordionByInnerElement(d);
$("#"+d.attr("id")).closest("div.select-widget").addClass("focus");$("#"+d.attr("id")).focus()},100)};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,t,null)},_onSelectFocusIn:function(a){a.preventDefault();$(a.currentTarget).parent().addClass("focus")},_onSelectFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},
trackGA:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id"),e="searchResults";this.fromOfferPage&&(e="offerPage");$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/vp/booking/"+e+"/pkgoverview/"+a+"/"+b+"/"+d})},trackAdobe:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id"),e="searchResults";this.fromOfferPage&&(e="offerPage");$namespace.Analytics.track({vendor:"adobe",
type:"pageView",events:"event1",eVar1:"vacation package|Package Overview",eVar2:"vacation package",eVar34:a,eVar74:"/vp/booking/"+e+"/pkgoverview/"+a+"/"+b+"/"+d})},_onSelectClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onInterCityFlightMegaTipClick:function(a){$namespace.Analytics.trackEvent("Pkg_Overview_Intercity_Flights_View_Details","click",$(this.el).data("package-id"));a=$(a.currentTarget);var b=new $namespace.Widgets.Megatip(a);
a[0].megatip=b;b=a[0].megatip;b.show()},_refreshBlueRibbon:function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCitySideBarAndInfoBar.act",$.param({mcsbib:"DISPLAY_VP_INFOBAR",page:"packageOverview"}),null,"multiCityPackageOverviewBlueRibbon",function(){$.hook("sticky-bar").each($namespace.Utils.eachUninitialized(function(a,b){b.stickyBar=new $namespace.Widgets.StickyBar(a)}))},null)},_onUpdateOptionalServiceCheckboxClick:function(a){var b=this;a=$(a.currentTarget);var d="mchr=SHOW_HOTEL_INCLUDE_OR_EXCLUDE_OPTIONAL_SERVICE&loadOverview=true&serviceUid="+
a.data("serviceuid");d+="&uid="+a.data("uid");d+="&cityCounter="+a.data("city-index");d+="&serviceItemSelected="+a.is(":checked");d+="&sortType="+this.sortType;d+="&ascendingOrder="+this.ascendingOrder;var e="mcPOHotelOptionalServices"+a.data("city-index"),f=$("#"+e),g=a.attr("id"),h={mchr:"SHOW_HOTEL_OPTIONAL_SERVICES",uid:f.data("subcat-uid"),roomuid:f.data("room-uid"),cityCounter:a.data("city-index")};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",d,null,null,function(){this.message?
$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",$.param(h),null,e,function(){b._refreshBlueRibbon();$namespace.TabOrder.updatePageTabOrder();setTimeout(function(){$("input[data-hook='update-optional-service']").each(function(){$(this).attr("id")==g&&$(this).focus()})},100)},null)},null)},getCitiesMap:function(a){var b=this;$namespace.AjaxUtil.makeAjaxCall("multiCityPackageOverview.act","mcpo=GET_CITY_LOCATIONS_DATA",
null,null,function(a){b.locationsData=a||{};utils.isArray(a)&&(a.map(function(a,b){a.isSelected=0===b?!0:!1;a.index=b+1}),b.collection=new $namespace.Collection.HotelCollection(a),b.initializeMap());$(window).trigger("ct.section.toggling")},null)},initializeMap:function(){var a;if(null!=this.collection){for(var b=a=0,d=0;d<this.collection.length;d++)a+=this.collection.get(d).attributes.latitude,b+=this.collection.get(d).attributes.longitude;a/=this.collection.length;b/=this.collection.length;a=new google.maps.LatLng(a,
b);this.googleMap=new google.maps.Map(this.ui.map[0],{zoom:5,center:a,mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],disableDefaultUI:!0,zoomControl:!0});a={url:_webLoc+"/shared/images/svg/svg-location-full.svg",
scaledSize:new google.maps.Size(26,37)};b=new google.maps.LatLngBounds;for(d=0;d<this.collection.length;d++){var e=d+1,f={lat:this.collection.get(d).attributes.latitude,lng:this.collection.get(d).attributes.longitude};e=new google.maps.Marker({position:f,labelInBackground:!1,label:{text:""+e,color:"#FFFFFF"},icon:a,title:""+this.collection.get(d).attributes.title});b.extend(f);e.setMap(this.googleMap)}this.googleMap.fitBounds(b);setTimeout(function(){$("#cityMap").addClass("cityMap");$("#cityMap a").each(function(a){$(this).attr("data-url",
$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")});$("#cityMap").on("click",".external-link",function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)})},2E3)}}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};flightSeatMap=$namespace.FlightSeatMap||{};widgets=$namespace.Widgets||{};
$namespace.View.flightResultsView=Backbone.View.extend({el:"#multiCityFlights",ui:{resultsTarget:null,showMoreLink:null,departureTimeOptions:null,returnTimeOptions:null,departureTimeFields:null,returnTimeFields:null,stopsFilters:null,airlinesFilters:null,outboundAirportFilters:null,returnAirportFilters:null},flightsCount:0,selectedPage:1,searchParams:{uid:null,packageId:null,sortType:0,selectedPage:1,departureDateTakeoffLow:null,departureDateTakeoffHigh:null,departureDateArrivalLow:null,departureDateArrivalHigh:null,
returnDateTakeoffLow:null,returnDateTakeoffHigh:null,returnDateArrivalLow:null,returnDateArrivalHigh:null,selectedDepartureTimeOption:null,selectedReturnTimeOption:null,selectedStops:null,selectedAirlines:null,selectedOutboundAirports:null,selectedReturnAirports:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal","click a.airline_baggage_policy":"_showExternalLinkPopup",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",'change [id^="selectFlight"]':"_onSelectFlightSegmentClick",
"click a#previousFlight":"_onPreviousFlight","click a#nextFlight":"_onNextFlight",'click [data-hook="reset-flights-filters"]':"_onResetFilterClick",'click [data-hook="show-more-flights-link"]':"_onShowMoreClick","click a.megatipLink":"_onClickMegatipLink","change select#flightsSelectSortType":"_onFlightsSortTypeChange",'change #flight-departure-date-filters [name="selectedDepartureTimeOption"]':"_onDepartureTimeOptionChange",'change #flight-return-date-filters [name="selectedReturnTimeOption"]':"_onReturnTimeOptionChange",
'change #flights-stops-filters input[type="checkbox"]':"_onFlightsStopsFiltersChange",'change #flights-airlines-filters input[type="checkbox"]':"_onFlightsAirlinesFiltersChange",'change #flight-departure-date-filters input[type="hidden"]':"_onFlightsTimeFieldsChange",'change #flight-return-date-filters input[type="hidden"]':"_onFlightsTimeFieldsChange",'click .flight-results-listing [data-hook="flightSelectButton"]':"_onSelectFlightClick",'click [data-hook="continue_button"]':"_onContinueClick",'click [data-hook="backToPackageOverview"]':"_onContinueClickTop",
"click a.btn-change-flight":"_onClickFlightButton",'change #flights-outbound-airport-filters input[type="checkbox"]':"_onOutboundFlightsAirportFiltersChange",'change #flights-return-airport-filters input[type="checkbox"]':"_onReturnFlightsAirportFiltersChange","focusin select.dataList":"_onSelectFocusIn","focusout select.dataList":"_onSelectFocusOut",'click [data-hook="apply-flights-filters"]':"_onClickApplyFilters","click div.accordion-item ":"_onShowFiltersClick","click a.external-link ":"_onExternalLinkClick",
'click [data-id="arrow"]':"_onselectFocusclick"},initialize:function(a){var b=$.extend({},a);this.controller=b.controller;this.module=a.module;this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?b.accordion.open(!0):b.accordion.close(!0)});this.ui.resultsTarget=$.hook("flights-results-target",this.$el);
this.ui.matchingFlightCount=this.$("#matchingFlightCount");a=this.$el.find('[data-megatip="flight-details-megatip"]');this.initializeMegaTip(a,!0);this.ui.outboundAirportFilters=this.$('#flights-outbound-airport-filters input[type="checkbox"]');this.ui.returnAirportFilters=this.$('#flights-return-airport-filters input[type="checkbox"]');this.ui.stopsFilters=this.$('#flights-stops-filters input[type="checkbox"]');this.ui.airlinesFilters=this.$('#flights-airlines-filters input[type="checkbox"]');this.ui.showMoreLink=
$.hook("show-more-flights-link",this.$el);this.selectedFlightItemUid=this.$('input[type="hidden"][name="selectedFlightItemUid"]').val();this.searchParams.packageId=this.$('input[type="hidden"][name="packageId"]').val();this.flightsCount=this.ui.matchingFlightCount.attr("data-flights-count");this.departureTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_takeoff_slider"));this.departureLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_landing_slider"));this.returnTakeoffSlider=
new $namespace.Widgets.DateRangeSlider(this.$("#return_takeoff_slider"));this.returnLandingSlider=new $namespace.Widgets.DateRangeSlider(this.$("#return_landing_slider"));this.ui.departureTimeFields=this.$('#flight-departure-date-filters input[type="hidden"]');this.ui.returnTimeFields=this.$('#flight-return-date-filters input[type="hidden"]');this.ui.stopsFilters=this.$('#flights-stops-filters input[type="checkbox"]');this.ui.airlinesFilters=this.$('#flights-airlines-filters input[type="checkbox"]');
this.selectedPage=parseInt(this.ui.matchingFlightCount.attr("data-selected-page"));this.ui.departureTimeOptions=this.$('#flight-departure-date-filters input[name="selectedDepartureTimeOption"]');this.ui.returnTimeOptions=this.$('#flight-return-date-filters input[name="selectedReturnTimeOption"]');this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();this.searchParams.selectedReturnTimeOption=this.ui.returnTimeOptions.filter(":checked").val();this.updateShowMoreButton();
this.$el.attr("data-package-id");if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}$.each($('div[id^="select_flight-"]'),function(a,b){new widgets.SelectWidget($(b))});$(window).on("resize orientationchange",$.proxy(this._onResize,this));$("#page_content").on("ct.accordion.opening",$.proxy(this._gaHandler,this));this.initSlider();this.updateFilterValues();a=this.$el.find("#flightListingContainer").attr("data-sort-type");
this.flightsSelectSortType=new widgets.SelectWidget(this.$("#flights_select_sort_type"));this.$el.find("#flightsSelectSortType").val(a?a:"0");if(utils.Breakpoint.isDesktop()){a=$("#flights-outbound-airport-filters").height();d=$("#flights-return-airport-filters").height();var e=0;e=a>d?a:d;$("#flights-outbound-airport-filters").height(e);$("#flights-return-airport-filters").height(e)}utils.Breakpoint.isDesktop()&&(a=$("#flights-outbound-airport-filters").height(),d=$("#flights-return-airport-filters").height(),
e=0,e=a>d?a:d,$("#flights-outbound-airport-filters").height(e),$("#flights-return-airport-filters").height(e));$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/viewFlights/"+b.destinationCode+"/"+b.regionCode+"/"+b.packageId);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+"|flights",v2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),v34:b.destinationCode,v74:"/vp/booking/viewFlights/"+
b.destinationCode+"/"+b.regionCode+"/"+b.packageId});this.$el.find("select").addClass("dataList");b=$namespace.MessageUtil.getSessionValue("FLIGHT_HOTEL_MESSAGE",!0);if(!_.isEmpty(b)){var f=$(".hotelAlertMessage").removeClass("displayNone");f.find("> div").html(b);setTimeout(function(){f.find("> div").addClass("no-outline");f.find("> div").attr("tabindex","-1").focus()},100)}b=$namespace.MessageUtil.getSessionValue("FLIGHT_CHANGED",!0);_.isEmpty(b)||setTimeout(function(){$("h2.roundTripFlightHeader").attr("tab-taborder",
"document");$namespace.TabOrder.updatePageTabOrder();$("h2.roundTripFlightHeader").attr("tabindex","-1").focus();$("h2.roundTripFlightHeader").focus();$("h2.roundTripFlightHeader").addClass("no-outline");$(document).scrollTop(0)},100);$("#flight-details-megatip .airLineTermAndCondions a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")})},_onExternalLinkClick:function(a){a=$(a.currentTarget).data("url").trim();
$namespace.Navigation.loadExternalUrl(a)},_onClickApplyFilters:function(a){$('.filter-accordion[data-hook="accordion"]').each(function(){var a=$(this).find(".accordion-item").first();a.length&&a.hasClass("active")&&(a.closest(".accordion")[0].accordion.close(),$namespace.TabOrder.updatePageTabOrder(),a.find(".accordion-button").focus())})},_addAriaLevelOrRole:function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onSelectFocusIn:function(a){a.preventDefault();
$(a.currentTarget).parent().addClass("focus")},_onSelectFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.removeClass("active")},_onClickFlightButton:function(){$("#headingAdditionalFlightsAvailable").attr("tabindex","-1");$("#headingAdditionalFlightsAvailable").focus().get(0).scrollIntoView({behaviour:"smooth",block:"start"});window.scrollBy(0,-120);$namespace.Analytics.trackEvent("Flights_Results_Change_Flight_Button","Click",$("#flightListingContainer").data("package-id"),
null);utils.Breakpoint.isDesktop()||$("#headingAdditionalFlightsAvailable").addClass("no-outline")},_onContinueClickTop:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE,[])},loadMultiCitySelectedAndAdditionalFlightsPage:function(){var a=$("#flightListingContainer").attr("data-for-LIP"),b=$("#flightsSelectSortType").val();$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act","mcfc=SHOW_FLIGHT_SEARCH_RESULT_AND_CHANGE_FLIGHT_WORKFLOW&sortType="+
b+"&forLip="+a,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initializeOnMainContentReload())},null);$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_No_Change","Continue",$("#flightListingContainer").data("package-id"))},validateAndContinue:function(a,b){a="mcfc=VALIDATE_FLIGHT_ITEM_SELECTION&uid="+a;var d=this,
e=this.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFlightCards.act",a,null,null,function(a,g,h,k){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("false"==a)if($namespace.DomUtil.setElementLoadingMask(!1,null,!0),"true"==k){var f=new widgets.Confirm(this.responseText,function(){f.hide();$namespace.GlobalConstants.RESPONSIVE_VP_HOTEL_RESULTS_PAGE_ENABLED?
$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION):(DomUtil.disableElement("dataContent",!0),_newSingleCityFlightResultWorkflow&&SearchResults.setNewSingleCityFlightResultWorkflow(!1),HistoryNavigation.addHistory(PageHistoryConstants.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION),AjaxUtil.makeAjaxCallWithWaitingDiv("searchResults.act","sr=LOAD_TRIP_SUMMARY_AND_SINGLE_CITY_HOTEL_RESULTS&loadUc=true",null,"mainContent",callbackLoadTripSummary))},
d.loadMultiCitySelectedAndAdditionalFlightsPage);$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){f.show()},300):f.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:e.FLIGHT_WARNING_TITLE,text:e.FLIGHT_CHANGED_WARNING_MESSAGE,button:e.FLIGHT_WARNING_CONTINUE_TEXT},d.loadMultiCitySelectedAndAdditionalFlightsPage,!1);else _.isEmpty(b)?$namespace.MessageUtil.setSessionValue("FLIGHT_CHANGED","FLIGHT_CHANGED"):$namespace.MessageUtil.setSessionValue("FLIGHT_HOTEL_MESSAGE",
b),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION)},null)},confirmSelectionChange:function(a,b){var d=this,e=$(this.el).data("package-id"),f=$(".package_diffrence").find('button[data-test="buttonModalContinue"]').data("package-diffrence");b="mcfc=CHANGE_FLIGHT_NEW_CHANGE_ITEM&uid="+a+"&forLIP="+b;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",b,null,null,function(b){this.message?
($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):d.validateAndContinue(a,b)},null);0<f?$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Increase","Continue",e,null):$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Decrease","Continue",e,null)},_onContinueClick:function(a){a.preventDefault();$namespace.Analytics.trackEvent("Flights_Results","Continue","Best_Price");
this.validateAndContinue(this.selectedFlightItemUid)},_onSelectFlightClick:function(a){a.preventDefault();var b=this;a=$(a.currentTarget);var d=a.attr("data-uid"),e=a.attr("data-for-lip");a.attr("data-destinationCode");a.attr("data-regionCode");a.attr("data-packageId");a=a.attr("data-airLineName");var f=this.module.TranslationTexts,g="mcfc=LOAD_FLIGHT_PRICE_DIFF_POPUP&uid="+d+"&forLIP="+e;$namespace.Analytics.trackEvent("Flights_Results_Select","Click",a);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",g,null,null,function(a,g,l,p,q){$namespace.DomUtil.setElementLoadingMask(!1,null,!1,q);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("true"==g)if("false"==a)b.confirmSelectionChange(d,e);else{var h=new widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("Flights_Results","Continue","Change");h.hide();b.confirmSelectionChange(d,e)},function(){var a=$("#flightListingContainer").data("package-id");
0<$(".package_diffrence").find('button[data-test="buttonModalNoThanks"]').data("package-diffrence")?$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Increase","Close",a,null):$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Decrease","Close",a,null);h.hide()});$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){h.show()},300):h.show()}else if("false"==a)b.confirmSelectionChange(p,e);else if("true"==l){a=b.loadMultiCitySelectedAndAdditionalFlightsPage;
var k=new widgets.Confirm(this.responseText,function(){b.confirmSelectionChange(p,e)},a,a);$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){k.show()},300):k.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:f.FLIGHT_WARNING_TITLE,text:f.FLIGHT_CHANGED_WARNING_MESSAGE,button:f.FLIGHT_WARNING_CONTINUE_TEXT},b.loadMultiCitySelectedAndAdditionalFlightsPage,!1)},null)},_onFlightsStopsFiltersChange:function(a){var b=$(a.currentTarget).val(),d=this.ui.stopsFilters.filter('[value="stopsAny"]'),
e=this.ui.stopsFilters.not('[value="stopsAny"]'),f={anyIsClicked:!1};"stopsAny"===b?(b="Any",e.prop("checked",!1),f.anyIsClicked=!0,f.others=e,f.any=d,$namespace.Analytics.trackEvent("Flights_Results_Filter_Number_Of_Stops","Click",b)):(e=e.filter(":checked"),"0"==b?b="NonStop":"1"==b?b="1 Stop":"2"==b&&(b="2+ Stops"),0<e.length?(d.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Number_Of_Stops","Click",
b)):d.prop({checked:!0,disabled:!0}).attr("aria-disabled","true"));var g=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){g.updateFilterValues();g.readUpdatedContents(f)},resetClicked:!1})},_onFlightsTimeFieldsChange:function(a){a=$(a.currentTarget);if(this.searchParams[a.attr("name")]!=a.val()){this.searchParams[a.attr("name")]=a.val();this.selectedPage=1;var b=this;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,
callback:function(){b.updateFilterValues();setTimeout(function(){var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)},1E3)}})}},_onFlightsAirlinesFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.airlinesFilters.filter('[value="any"]'),f=this.ui.airlinesFilters.not('[value="any"]'),g=$(a.currentTarget).attr("data-filter-name"),h={anyIsClicked:!1};"any"===d?(f.prop("checked",!1),h.anyIsClicked=!0,h.others=f,h.any=e,$namespace.Analytics.trackEvent("Flights_Results_Filter_Airline",
"Click","Any")):0<f.filter(":checked").length?(e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Airline","Click",g)):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();b.readUpdatedContents(h)},resetClicked:!1})},initSlider:function(){this.departureTakeoffSlider.resetSlider();
this.departureLandingSlider.resetSlider();this.returnTakeoffSlider.resetSlider();this.returnLandingSlider.resetSlider()},_resetSlider:function(){$("#departure-takeoff").click();$("#return-takeoff").click();this.initSlider();$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","reset")},_showExternalLinkPopup:function(a){a=$(a.currentTarget).data("airline-policy").trim();$namespace.Navigation.loadExternalUrl(a)},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},_showCancellationPolicyModal:function(){var a=
this.$el.attr("data-package-id");$namespace.Analytics.trackEvent("Flights_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act",
"vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_gaHandler:function(a){a=$(a.target);var b=a.attr("data-ga");b&&(b=b?b.split("~"):["","",""],"expand"===b[2].toLowerCase()&&this._loadSeatmapTo(a),$namespace.Analytics.trackEvent(b[0],b[1],b[2],null))},_loadSeatmapTo:function(a){var b=a.closest(".megatip");a=b.attr("data-uid");var d=b.find("div.tab-panels div.panel.active div.flight-seatmap table.fuselage"),e=b.find("div.tab-panels div.panel.active div.flight-seatmap div.error");b.find('select[id^="selectFlight"] option[value="flight-1-tab"]').attr("selected",
!0).siblings().removeAttr("selected");this._selectedMegatipId=a;b.find('div[data-pane="flight-1-tab"]').addClass("active").show().siblings().removeClass("active").hide();b.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top","0");d.length||e.length?(e.length||b.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px"),$(window).scrollTop($('div.megatip[data-uid="'+
a+'"] div.accordion.seatMap').offset().top),this.seatSelectionMapCallBack()):(b=b.find('select[id^="selectFlight"]').find(":selected").data("uid"),flightSeatMap.loadFlightSeatMapContent(a,b,!0))},_selectedMegatipId:null,_onSelectFlightSegmentClick:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");this._selectedMegatipId=b;var d=this.$el.find('div.megatip[data-uid="'+b+'"]');a=d.find('select[id^="selectFlight"]');var e=a.find("option:selected");e.index();var f=e.val();e=e.text();
d.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').addClass("active").show().siblings().removeClass("active").hide();d.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').addClass("active").show().siblings().removeClass("active").hide();d.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top","0");f=d.find("div#flightSeatMapTabPanels div.panel.active div#flightSeatMapContent table.fuselage");var g=d.find("div#flightSeatMapTabPanels div.panel.active div#seatMapAndLegendContainer div.error");
f.length||g.length?(flightSeatMap.CurrentSeatMap.updateLegend(),g.length||d.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px"),$(window).scrollTop($('div.megatip[data-uid="'+b+'"] div.accordion.seatMap').offset().top),this.seatSelectionMapCallBack()):(f=d.find('select[id^="selectFlight"]').find(":selected").data("uid"),$namespace.EnhancedSeatMapUtil.addCallback("seatSelectionMap",$.proxy(this.seatSelectionMapCallBack,
this)),flightSeatMap.loadFlightSeatMapContent(b,f,!0));utils.updateLiveContainer(this.module.TranslationTexts.CHANGED_TO_TEXT+" "+e);$namespace.Browser.isIpadOrAndroid()&&(b=d.find("p.airlineWarning"),b.is(":visible")?b.attr("tabindex","-1").focus():a.focus())},seatSelectionMapCallBack:function(){var a=this.$el.find('div.megatip[data-uid="'+this._selectedMegatipId+'"]'),b=a.find('select[id^="selectFlight"]'),d=b.find("option:selected").index(),e=b.find("option"),f=a.find("#previousFlight"),g=a.find("#nextFlight");
0==d?(f.hide(),1==e.length?g.hide():g.show()):0<d&&d<e.length-1?(f.show(),g.show()):d==e.length-1&&(f.show(),g.hide());$namespace.TabOrder.updatePageTabOrder();utils.Breakpoint.isDesktop()?(a.find("div.flight-module-title > h3").attr("tabindex","-1").focus(),a.find("div.flight-module-title > h3").addClass("no-outline")):b.focus()},_onPreviousFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');
var d=b.find("option:selected").index();0<d&&(d="flight-"+d+"-tab",b.val(d),b.find('option[value="'+d+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent("Flights_Results_Preview_Seat_Map","Click","Previous_Flight")},_onNextFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');var d=b.find("option"),e=b.find("option:selected").index();
e<d.length-1&&(d="flight-"+(e+2)+"-tab",b.val(d),b.find('option[value="'+d+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent("Flights_Results_Preview_Seat_Map","Click","Next_Flight")},_resetFlightsAccordion:function(a){a=$(a.target).closest(".megatip").attr("id");a=$("#"+a+" .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_onReturnTimeOptionChange:function(a){this.returnTakeoffSlider.resetSlider();
this.returnLandingSlider.resetSlider();this.searchParams.selectedReturnTimeOption=this.ui.returnTimeOptions.filter(":checked").val();var b=this;this.ui.returnTimeFields.each(function(){var a=$(this);b.searchParams[a.attr("name")]=a.val()});a=$("#return-takeoff").prop("checked");var d=$("#return-landing").prop("checked");a&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Return","Click","Departure");d&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Return","Click","Arrival");this.selectedPage=
1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_onResetFilterClick:function(a){var b=this;a=this.ui.airlinesFilters.filter('[value="any"]');var d=this.ui.airlinesFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="stopsAny"]');d=this.ui.stopsFilters.not('[value="stopsAny"]');
a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.outboundAirportFilters.filter('[value="outboundone"]');d=this.ui.outboundAirportFilters.not('[value="outboundone"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="any"]');d=this.ui.stopsFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);this._resetSlider();this.selectedPage=
1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!0,callback:function(){b.resetTimeValues();b.resetFilters();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_onDepartureTimeOptionChange:function(a){this.departureTakeoffSlider.resetSlider();this.departureLandingSlider.resetSlider();this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();var b=this;this.ui.departureTimeFields.each(function(){var a=$(this);b.searchParams[a.attr("name")]=
a.val()});a=$("#departure-takeoff").prop("checked");var d=$("#departure-landing").prop("checked");a&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Outbound","Click","Departure");d&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Outbound","Click","Arrival");this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_onShowMoreClick:function(a){a.preventDefault();
this.selectedPage+=1;this.searchParams.selectedPage=this.selectedPage;var b=this;this.fetchFlightsData({showLoadingMask:!0,callback:function(){$(window).trigger("ct.showmore.opening");b.setFocusOnFirstNewlyLoadedFlight()}});$namespace.Analytics.trackEvent("Flights_Results_Show_More","Click",this.flightsCount)},setFocusOnFirstNewlyLoadedFlight:function(){var a=this.ui.resultsTarget.find('div[data-id="flight'+(this.selectedPage-1)*$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE+'"] div.cityNameToFocusOn');
a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(){a.attr("tabindex")!=$(document.activeElement).attr("tabindex")&&(a.attr("tabindex","-1").removeAttr("data-taborder"),a.off("blur"))});a.focus();utils.Breakpoint.isDesktop()||a.addClass("no-outline")},updateShowMoreButton:function(){var a=$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE,b=this.selectedPage*a,d=this.ui.matchingFlightCount.attr("data-flights-count");if(d>b){this.ui.showMoreLink.show();var e=
this.module.TranslationTexts;d>=b+a?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(e.SHOW_MORE_RESULTS_BUTTON_TEXT,{amount:a})):this.ui.showMoreLink.find("span").text(e.SHOW_MORE_BUTTON_TEXT)}else this.ui.showMoreLink.hide()},initializeMegaTip:function(a,b){var d=this,e=new $namespace.Widgets.Megatip(a);a[0].megatip=e;e.megatip.find('[data-hook="accordion"]').each(function(a,b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));b.accordion.close(!0)});
a.addClass("initialized");b&&(a.on("click",$.proxy(e._onClick,e)),a.on("click",function(a){e.isActive&&(d._addAriaLevelOrRole(d.$el.find("div.airLineTermAndCondions h3"),"5","heading"),$namespace.Analytics.trackEvent("Flights_Results_View_Details","Click",$("#flightListingContainer").data("package-id"),null))}));this.initShopCardTooltips();return e},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},
fetchFlightsData:function(a){var b=a?a.showLoadingMask:!0,d=a?a.resetClicked:!1,e=this.searchParams.departureDateTakeoffLow,f=this.searchParams.departureDateTakeoffHigh,g=this.searchParams.departureDateArrivalLow,h=this.searchParams.departureDateArrivalHigh,k=this.searchParams.returnDateTakeoffLow,l=this.searchParams.returnDateTakeoffHigh,p=this.searchParams.returnDateArrivalLow,q=this.searchParams.returnDateArrivalHigh,r=this.searchParams.selectedDepartureTimeOption,v=this.searchParams.selectedReturnTimeOption,
n=this.getCheckboxValues(this.ui.stopsFilters.not('[value="stopsAny"]')),t=this.getCheckboxValues(this.ui.airlinesFilters.not('[value="any"]')),u=this.getCheckboxValues(this.ui.outboundAirportFilters.not('[value="outboundone"]')),w=this.getCheckboxValues(this.ui.returnAirportFilters.not('[value="returnone"]')),y=this.$el.find("#flightListingContainer"),z=y.attr("data-for-LIP"),x=y.attr("data-product-uid");y=y.attr("data-package-id");var B=this.$el.find("#flightsSelectSortType").val(),G="mcfc=LOAD_ADDITIONAL_FLIGHTS_RESULTS&uid="+
x+"&forLip="+z+"&packageId="+y+"&resetClicked="+d+"&sortType="+B+"&selectedPage="+this.selectedPage;d||(G+="&selectedStops="+n+"&selectedAirlines="+t+"&departureDateTakeoffLow="+e+"&departureDateTakeoffHigh="+f+"&departureDateArrivalLow="+g+"&departureDateArrivalHigh="+h+"&returnDateTakeoffLow="+k+"&returnDateTakeoffHigh="+l+"&returnDateArrivalLow="+p+"&returnDateArrivalHigh="+q+"&selectedDepartureTimeOption="+r+"&selectedReturnTimeOption="+v+"&selectedOutboundAirports="+u+"&selectedReturnAirports="+
w);d={};d.productUid=x;d.forLIP=z;d.packageId=y;d.sortType=B;d.selectedPage=this.selectedPage;$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_WITH_SELECTED_AND_ADDITIONAL_FLIGHTS_MULTICITY,d,[d.productUid,d.sortType,d.selectedPage,d.forLIP,d.packageId]);var H=this;utils.updateLiveContainer();b&&$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",G,null,null,function(d){b&&$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(H.ui.matchingFlightCount.attr("data-flights-count",d),H.flightsCount=d,H.updateMatchingFlightsTitle(),H.showFlightSearchResults(this.responseText),"function"===typeof a.callback&&a.callback())},null)},updateMatchingFlightsTitle:function(){var a=this.module.TranslationTexts,b=this.ui.matchingFlightCount.attr("data-flights-count");1==b?this.ui.matchingFlightCount.text(a.MATCHING_FLIGHTS_SINGULAR):(a=$namespace.TranslationUtil.replaceParameters(a.MATCHING_FLIGHTS_PLURAL,
{resultNumber:b}),this.ui.matchingFlightCount.text(a))},showFlightSearchResults:function(a){1==this.selectedPage?(this.ui.resultsTarget.html(a),$(window).trigger("ct.showmore.closing")):this.ui.resultsTarget.append(a);this.updateShowMoreButton();$namespace.TabOrder.updatePageTabOrder();this.initShopCardTooltips()},getCheckboxValues:function(a){var b=[];a.each(function(){var a=$(this);a.is(":checked")&&b.push(a.val())});return b.length?b.join(","):""},_onClickMegatipLink:function(a){var b=$(a.currentTarget);
if(b.hasClass("initialized")){var d=b[0].megatip;d.isActive?d.hide():(d.show(),$namespace.Analytics.trackEvent("Flights_Results_View_Details","Click",$("#flightListingContainer").data("package-id"),null))}else{a=b.attr("data-uid");var e=b.attr("data-for-lip");a="mcfc=LOAD_FLIGHT_MEGATIP_CONTENT&uid="+a+"&forLIP="+e;var f=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{var a=$("#"+b.attr("data-megatip"));a.html(this.responseText);d=f.initializeMegaTip(b);a.find("select").addClass("dataList");d.show();f._addAriaLevelOrRole(a.find("h2, h3"),"3","heading");$(".termsAndConditions a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")});$namespace.Analytics.trackEvent("Flights_Results_View_Details",
"Click",$("#flightListingContainer").data("package-id"),null)}},null)}},_onFlightsSortTypeChange:function(a){var b=this;a=$(a.currentTarget).find(":selected").text();$namespace.Analytics.trackEvent("Flights_Results_Sort","Click",a);this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!0,callback:function(){var a=b.module.TranslationTexts;switch(b.$el.find("#flightsSelectSortType").val()){case "0":var e=a.SORTED_BY_PRICE;break;case "1":e=a.SORTED_BY_COSTCO_RECOMMENDS;break;case "2":e=a.DORTED_BY_SHORTEST_SLIGHT;
break;case "3":e=a.SORTED_BY_DEPARTURE_TIME;break;case "4":e=a.SORTED_BY_ARRIVAL_TIME}utils.updateLiveContainer(e)},resetClicked:!1})},updateFilterValues:function(){if(null!=$namespace.filteredFlightFilterInfoAsJson){var a=JSON.parse($namespace.filteredFlightFilterInfoAsJson),b=a.stops;this.updateResultCountLabels($("#flights-stops-filters"),b);this.updateFilterCheckBoxes(this.ui.stopsFilters,b,"stopsAny");b=a.airlines;this.updateResultCountLabels($("#flights-airlines-filters"),b);this.updateFilterCheckBoxes(this.ui.airlinesFilters,
b,"any");if(b=a.outboundAirports)this.updateResultCountLabels($("#flights-outbound-airport-filters"),b),this.updateFilterCheckBoxes(this.ui.outboundAirportFilters,b,"outboundone");if(a=a.returnAirports)this.updateResultCountLabels($("#flights-return-airport-filters"),a),this.updateFilterCheckBoxes(this.ui.returnAirportFilters,a,"returnone")}},updateResultCountLabels:function(a,b){var d=this.module.TranslationTexts;a.find("label span.resultCount").each(function(a,f){a=$(f);f=a.attr("data-value");f=
b[f];1===f?a.text(d.RESULT_TEXT_SINGULAR):(f=$namespace.TranslationUtil.replaceParameters(d.RESULT_TEXT_PLURAL,{resultNumber:f}),a.text(f))})},updateFilterCheckBoxes:function(a,b,d,e){e=a.filter('[value="'+d+'"]');a=a.not('[value="'+d+'"]');a.each(function(){var a=$(this),d=a.attr("value");0==b[d]?(a.prop("checked",!1),a.prop("disabled",!0).attr("aria-disabled","true")):a.prop("disabled",!1).attr("aria-disabled","false")});a=a.filter(":checked");if(0==b[d]||0==a.length)e.prop("checked",!0),e.prop("disabled",
!0).attr("aria-disabled","true")},readUpdatedContents:function(a){var b=this.module.TranslationTexts,d=this.ui.matchingFlightCount.text();if(a.anyIsClicked)if(a.any.prop("disabled",!0).attr("aria-disabled","true"),$namespace.Browser.iPhone||$namespace.Browser.iPad)utils.updateLiveContainer(d);else{var e=$(a.others.not(":disabled")[0]);if(0<e.length){a=e.parent().find("label");var f=$("<span>",{"class":"ada-screenreader"}).text(d+". "+b.MOVE_TO_NEXT_CHECKBOX_TEXT);a.prepend(f);setTimeout(function(){e.focus();
setTimeout(function(){f.remove()},300)},300)}}else utils.updateLiveContainer(d)},resetTimeValues:function(){var a=this;this.ui.departureTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=b.val()});this.ui.returnTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=b.val()})},resetFilters:function(a,b){this.updateFilterValues();a=function(a,b){for(var d=0;d<a.length;d++){var e=$(a[d]);e.attr("value")==b?(e.prop("checked",!0),e.prop("disabled",!0).attr("aria-disabled",
"true")):e.prop("checked",!1)}};a(this.ui.stopsFilters,"stopsAny");a(this.ui.airlinesFilters,"any");a(this.ui.outboundAirportFilters,"outboundone");a(this.ui.returnAirportFilters,"returnone")},_onOutboundFlightsAirportFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.outboundAirportFilters.filter('[value="outboundone"]'),f=this.ui.outboundAirportFilters.not('[value="outboundone"]');$(a.currentTarget).attr("data-filter-name");var g={anyIsClicked:!1};"outboundone"===d?(f.prop("checked",
!1),d="Any",g.anyIsClicked=!0,g.others=f,g.any=e):0<f.filter(":checked").length?e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();b.readUpdatedContents(g)},resetClicked:!1})},_onReturnFlightsAirportFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.returnAirportFilters.filter('[value="returnone"]'),
f=this.ui.returnAirportFilters.not('[value="returnone"]');$(a.currentTarget).attr("data-filter-name");var g={anyIsClicked:!1};"returnone"===d?(f.prop("checked",!1),d="Any",g.anyIsClicked=!0,g.others=f,g.any=e):0<f.filter(":checked").length?e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();
b.readUpdatedContents(g)},resetClicked:!1})},_onShowFiltersClick:function(a){-1!=$(".accordion-item").attr("class").indexOf("activated")?($(".accordion-item").removeClass("activated"),$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","Show")):($(".accordion-item").addClass("activated"),$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","Hide"))},_onselectFocusclick:function(a){-1!=$(a.currentTarget).attr("class").indexOf("active")?$(a.currentTarget).removeClass("active"):
$(a.currentTarget).addClass("active")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var specialOccasions=[],medicalRequests=[],specialRequests=[],SPECIAL_REQUESTS_SERVICE_DATE_MISMATCH_ERROR="4604",SPECIAL_REQUESTS_SERVICE_YEAR_MISMATCH_ERROR="4605";$namespace.View=$namespace.View||{};
$namespace.View.CruiseSpecialRequestPageView=Backbone.View.extend({el:"#cruise-package-special-request-page",isTransportationIncluded:!1,isPreHotelIncluded:!1,isPostHotelIncluded:!1,diningRequestValues:null,documentPath:"/cr/booking/bookingWidget/SpecialRequest/",events:{'click [data-hook="goBackBtn"]':"_onBackLink",'click [data-hook="continue_SpecialRequests_btn"]':"_onContinueClick",'click [data-hook="continue_next_stateroom"]':"_onNextStateRoomClick",'click [data-hook="previous_stateroom_btn"]':"_onPreviousButtonClick",
'keypress [data-hook="birthday-years"]':"_onYearsAndDateChange",'keypress [data-hook="year-celebrating"]':"_onYearsAndDateChange",'click [name="stateroom_tab"]':"_onStateroomTabClick",'change [data-hook="selected-request"]':"_changeDiningRequestSelection",'change [data-hook="selected-tableSize"]':"_changeDiningTableSizeSelection","click .dropDownArrow":"_onSelectDropDownClick","focusin .dropDownArrow":"_onSelectDropDownFocusIn","focusout .dropDownArrow":"_onSelectDropDownFocusOut","keypress .dropDownArrow":"_onSelectDropDownClick",
'change [data-hook="anniversary-date"]':"_onYearsAndDateChange",'keydown [data-hook="year-celebrating"]':"_onYearsAndDateChange","keypress .accordion-button":"_openCloseTravelerAccordionOnEnterEvent","click .accordion-button":"_openCloseTravelerAccordionOnClick",'click [data-hook="cruise-mobile-accordion-button"]':"_onAccordionClick",'change [data-hook="birthday-date"]':"_onYearsAndDateChange"},ui:{chatLink:null},initialize:function(a){var b=$.extend({},a);a=$(window);this.module=b.module;this.translations=
this.module.TranslationTexts;document.title=this.translations.CRUISE_SPECIAL_REQUEST_PAGE_TITLE;this.isPreHotelIncluded=b.isPreHotelIncluded;this.isPostHotelIncluded=b.isPostHotelIncluded;this.isTransportationIncluded=b.isTransportationIncluded;this.diningRequestValues=b.diningRequestValues;$(".accordion-item").removeClass("accordion-item-current");b=$("#page_content").data("cabin-count");$('[data-hook="continue_SpecialRequests_btn"]').addClass("btn-continue");1<b&&($("#prev_stateroom").hide(),$('[data-hook="continue_SpecialRequests_btn"]').hide(),
$('[data-hook="continue_SpecialRequests_btn"]').removeClass("btn-continue"),$("#continueToSpecialRequests").hide(),$('[data-hook="continue_next_stateroom"]').addClass("btn-continue"));b=$("#cruiseDiningSeatings").data("selecteddining");$('#diningSeat option[value="'+b+'"]').prop("selected",!0);var d=$("#diningSeat option:selected").val();$("[data-diningtiming]").each(function(a){$(this).data("diningtiming")==d?$(this).removeClass("displayNone"):$(this).addClass("displayNone")});this.ui.chatLink=this.$el.find("#chatNowLink");
var e=this.getGaEventLabel();if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",e)});this.notAllowAlphabetValuesInYearsField();$(window).load(function(){var a=document.querySelector("#diningSeat option[selected]");null!=a&&(a.removeAttribute("selected"),a.setAttribute("selected","selected"))});$('[name="stateroom_tab"]').focus(function(){$("#diningPreferences").removeClass("focus")});this.trackGA();this.updateTravelerAccordionState();
this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);a.on("resize orientationchange",$.proxy(this._onResize,this));a.trigger("resize");$(".stateroomTab").data("dining-seating-codes")||(a=$namespace.TranslationUtil.replaceParameters($namespace.CruiseSpecialRequestPageModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showMessage({type:1,
text:a}))},_onBackLink:function(a){1==$(".stateroomTab").data("stateroom-content")?window.history.back():this._onPreviousButtonClick(a)},_onResize:function(){$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},_onYearsAndDateChange:function(a){for(var b=$("#passengerCount").val(),d=1;d<=b;d++)"#birthdayYears_"+d==="#"+a.target.id&&this._removeError($("#birthdayYears_"+d)),"#anniversaryYears_"+d==="#"+a.target.id&&this._removeError($("#anniversaryYears_"+
d)),"#anniversaryDate_"+d==="#"+a.target.id&&this._removeError($("#anniversaryDate_"+d)),"#birthdayDate_"+d==="#"+a.target.id&&this._removeError($("#birthdayDate_"+d))},_stateroomQueryData:function(a,b,d){var e=$(".stateroomTab").data("stateroom-content"),f=$("#diningSeat option:selected").val(),g=$("#tableSize option:selected").val(),h=$("#cruiseSpecialRequest_diningCrossReference").is(":checked");a={cpsr:"UPDATE_CRUISE_SPECIAL_REQUESTS",diningTableSize:g,diningSeatingUid:f,bookingIndex:e,specialOccasion:escape(JSON.stringify(a)),
medicalRequest:escape(JSON.stringify(b)),specialRequest:escape(JSON.stringify(d)),diningCrossReference:h};var k=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param(a),null,null,function(a){if(void 0!=this.message){if(this.messageCode===SPECIAL_REQUESTS_SERVICE_YEAR_MISMATCH_ERROR)return k.showErrorForAnnaversaryDatesMissMatch("anniversaryYears"),!1;if(this.messageCode===SPECIAL_REQUESTS_SERVICE_DATE_MISMATCH_ERROR)return k.showErrorForAnnaversaryDatesMissMatch("anniversaryDate"),
!1;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.MessageUtil.showMessage({type:1,text:this.message.text})}else k.isTransportationIncluded||k.isPreHotelIncluded||k.isPostHotelIncluded?$namespace.GlobalConstants.RESPONSIVE_CRUISE_SUPERBOOKING_ADD_ON_REQUESTS_ENABLED?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_ADD_ON_SPECIAL_REQUESTS):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS):
($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param({cpsr:"UPDATE_CRUISE_PRICE_SPECIAL_REQUESTS"}),null,null,function(a){a?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_RECAP):($namespace.DomUtil.setElementLoadingMask(!1),k._showErrorModal(a))},null))},null);k._setCurrentTabSelected()},_onContinueClick:function(a){this._validateDiningPreferences(a)&&(this._prepareSpecialRequestData(),
this._stateroomQueryData(specialOccasions,medicalRequests,specialRequests))},_onNextStateRoomClick:function(a){var b=this,d=$(".stateroomTab").data("stateroom-content"),e=$("#page_content").data("cabin-count");if(d<e){var f=d+1,g=$("#diningSeat option:selected").val(),h=$("#tableSize option:selected").val(),k=$("#cruiseSpecialRequest_diningCrossReference").is(":checked");this._prepareSpecialRequestData();g={cpsr:"UPDATE_CRUISE_SPECIAL_REQUESTS",diningTableSize:h,diningSeatingUid:g,bookingIndex:d,
specialOccasion:escape(JSON.stringify(specialOccasions)),medicalRequest:escape(JSON.stringify(medicalRequests)),specialRequest:escape(JSON.stringify(specialRequests)),diningCrossReference:k};h=function(){if(void 0!=this.message){if(this.messageCode===SPECIAL_REQUESTS_SERVICE_YEAR_MISMATCH_ERROR)return b.showErrorForAnnaversaryDatesMissMatch("anniversaryYears"),!1;this.messageCode===SPECIAL_REQUESTS_SERVICE_DATE_MISMATCH_ERROR?b.showErrorForAnnaversaryDatesMissMatch("anniversaryDate"):($namespace.DomUtil.setElementLoadingMask(!1,
null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text}));return!1}$(".tab-panels").html(this.responseText);b.notAllowAlphabetValuesInYearsField();$('[data-stateroom-index="'+f+'"]').addClass("active");$('[data-stateroom-index="'+d+'"]').removeClass("active");$("#prev_stateroom").show();$("#diningPreferences").removeClass("focus");$("#diningPreferences").addClass("focus");$("#diningPreferences").focus();var a=$("#diningSeat option:selected").val();$("[data-diningtiming]").each(function(b){$(this).data("diningtiming")==
a?$(this).removeClass("displayNone"):$(this).addClass("displayNone")});b.updateTravelerAccordionState();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(window).trigger("resize");b.setFocusTop();b._setCurrentTabSelected();d===e-1?($('[data-hook="continue_SpecialRequests_btn"]').show(),$('[data-hook="continue_next_stateroom"]').hide(),$("#continueToSpecialRequests").show(),$('[data-hook="continue_SpecialRequests_btn"]').addClass("btn-continue"),$('[data-hook="continue_next_stateroom"]').removeClass("btn-continue")):
($('[data-hook="continue_SpecialRequests_btn"]').hide(),$('[data-hook="continue_next_stateroom"]').show(),$("#continueToSpecialRequests").hide(),$('[data-hook="continue_SpecialRequests_btn"]').removeClass("btn-continue"),$('[data-hook="continue_next_stateroom"]').addClass("btn-continue"));$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1,null,!1);b.updateDiningRequestOptionsDisabledState()};this._validateDiningPreferences(a)&&$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",
$.param(g),null,null,h,null)}},updateTravelerAccordionState:function(){var a=$("#primaryTraveler_active");utils.Breakpoint.isMobile()?(a.removeClass("active"),a.find(".accordion-button").attr("aria-expanded","false"),a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")):(a.addClass("active"),a.find(".accordion-button").attr("aria-expanded","true"),a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg"))},setFocusTop:function(){900<$(window).width()?$(window).scrollTop(380):
$(window).scrollTop(240)},_prepareSpecialRequestData:function(a){specialOccasions=[];medicalRequests=[];specialRequests=[];a=$("#passengerCount").val();for(var b=1;b<=a;b++){if(0<$("#birthdayDate_"+b).length){$("#passengerName_"+b).val();var d=$("#birthdayCodeType").val(),e=$("#birthdayDate_"+b).val(),f=$("#birthdayYears_"+b).val();""!=e&&specialOccasions.push({requestCodeType:d,yearsToCelebrate:f,passengerIndex:b,occasionDate:e})}0<$("#anniversaryDate_"+b).length&&($("#paxName_"+b).val(),d=$("#anniversaryCodeType").val(),
e=$("#anniversaryDate_"+b).val(),f=$("#anniversaryYears_"+b).val(),""!=e&&specialOccasions.push({requestCodeType:d,yearsToCelebrate:f,passengerIndex:b,occasionDate:e}));$("#honeymoon_"+b).prop("checked")&&document.getElementById("honeymoon_"+b).checked&&(d=document.getElementById("honeymoonCodeType").value,specialOccasions.push({requestCodeType:d,passengerIndex:b}));d=$("#specialRequestsCount").val();for(e=0;e<d;e++)(f=document.getElementById("specialRequest_"+e+"_"+b))&&f.checked&&specialRequests.push({requestCodeType:f.value,
passengerIndex:b});d=$("#medicalRequestsCount_"+b).val();for(e=0;e<d;e++)(f=document.getElementById("medicalRequest_"+e+"_"+b))&&f.checked&&medicalRequests.push({requestCodeType:f.value,passengerIndex:b})}},_onStateroomTabClick:function(a){var b=$(a.currentTarget).data("stateroom-index"),d=this,e=$("#page_content").data("cabin-count"),f=1;1<e&&(f=$(".active").attr("data-stateroom-index"));if(b!=f){this._prepareSpecialRequestData();var g=$(".stateroomTab").data("stateroom-content"),h=$("#diningSeat option:selected").val(),
k=$("#tableSize option:selected").val(),l=$("#cruiseSpecialRequest_diningCrossReference").is(":checked");h={cpsr:"SHOW_STATEROOM_TAB",diningTableSize:k,diningSeatingUid:h,bookingIndex:b,diningCrossReference:l,specialOccasion:escape(JSON.stringify(specialOccasions)),medicalRequest:escape(JSON.stringify(medicalRequests)),specialRequest:escape(JSON.stringify(specialRequests))};k=function(){if(void 0!=this.message){if(this.messageCode===SPECIAL_REQUESTS_SERVICE_YEAR_MISMATCH_ERROR)return d.showErrorForAnnaversaryDatesMissMatch("anniversaryYears"),
!1;this.messageCode===SPECIAL_REQUESTS_SERVICE_DATE_MISMATCH_ERROR?d.showErrorForAnnaversaryDatesMissMatch("anniversaryDate"):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text}));return!1}$(".tab-panels").html(this.responseText);d.notAllowAlphabetValuesInYearsField();$('[data-stateroom-index="'+b+'"]').addClass("active");$('[data-stateroom-index="'+g+'"]').removeClass("active");var a=$("#diningSeat option:selected").val();$("[data-diningtiming]").each(function(b){$(this).data("diningtiming")==
a?$(this).removeClass("displayNone"):$(this).addClass("displayNone")});1==b?$("#prev_stateroom").hide():$("#prev_stateroom").show();var f=parseInt(b);$("#stateroom_tab_"+f).blur();d._setCurrentTabSelected();d.updateTravelerAccordionState();b==e?($("#diningPreferences").removeClass("focus"),$("#diningPreferences").addClass("focus"),$("#diningPreferences").focus(),$('[data-hook="continue_SpecialRequests_btn"]').show(),$('[data-hook="continue_next_stateroom"]').hide(),$("#continueToSpecialRequests").show(),
$('[data-hook="continue_SpecialRequests_btn"]').addClass("btn-continue"),$('[data-hook="continue_next_stateroom"]').removeClass("btn-continue")):($("#diningPreferences").removeClass("focus"),$("#diningPreferences").addClass("focus"),$("#diningPreferences").focus(),$('[data-hook="continue_SpecialRequests_btn"]').hide(),$('[data-hook="continue_next_stateroom"]').show(),$("#continueToSpecialRequests").hide(),$('[data-hook="continue_SpecialRequests_btn"]').removeClass("btn-continue"),$('[data-hook="continue_next_stateroom"]').addClass("btn-continue"));
$namespace.TabOrder.updatePageTabOrder();$namespace.DomUtil.setElementLoadingMask(!1,null,!1);d.updateDiningRequestOptionsDisabledState()};(b>f?this._validateDiningPreferences(a):this._validateDiningRequestCrossReferenceSelection(a))&&$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param(h),null,null,k,null)}},_setCurrentTabSelected:function(){var a=this;$(".stateroomTabs").each(function(){$(this).hasClass("active")?$(this).find(".ada-screenreader").text(" - "+a.translations.SELECTED_TEXT):
$(this).find(".ada-screenreader").text(" - "+a.translations.NOT_SELECTED_TEXT)})},_onPreviousButtonClick:function(a){var b=this,d=$(".stateroomTab").data("stateroom-content");$("#page_content").data("cabin-count");this._prepareSpecialRequestData();var e=d-1,f=$("#diningSeat option:selected").val(),g=$("#tableSize option:selected").val(),h=$("#cruiseSpecialRequest_diningCrossReference").is(":checked");f={cpsr:"SHOW_STATEROOM_TAB",bookingIndex:e,diningTableSize:g,diningSeatingUid:f,diningCrossReference:h,
specialOccasion:escape(JSON.stringify(specialOccasions)),medicalRequest:escape(JSON.stringify(medicalRequests)),specialRequest:escape(JSON.stringify(specialRequests))};g=function(){if(void 0!=this.message){if(this.messageCode===SPECIAL_REQUESTS_SERVICE_YEAR_MISMATCH_ERROR)return b.showErrorForAnnaversaryDatesMissMatch("anniversaryYears"),!1;if(this.messageCode===SPECIAL_REQUESTS_SERVICE_DATE_MISMATCH_ERROR)return b.showErrorForAnnaversaryDatesMissMatch("anniversaryDate"),!1;$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);$namespace.MessageUtil.showMessage({type:1,text:this.message.text})}else $(".tab-panels").html(this.responseText),$('[data-stateroom-index="'+e+'"]').addClass("active"),$('[data-stateroom-index="'+d+'"]').removeClass("active"),2<d?$("#prev_stateroom").show():$("#prev_stateroom").hide(),b.notAllowAlphabetValuesInYearsField(),$('[data-hook="continue_SpecialRequests_btn"]').hide(),$('[data-hook="continue_next_stateroom"]').show(),$("#continueToSpecialRequests").hide(),$("#diningPreferences").removeClass("focus"),
$("#diningPreferences").addClass("focus"),$("#diningPreferences").focus(),$('[data-hook="continue_SpecialRequests_btn"]').removeClass("btn-continue"),$('[data-hook="continue_next_stateroom"]').addClass("btn-continue"),$(window).on("resize orientationchange",$.proxy(this._onResize,this)),$(window).trigger("resize"),b.setFocusTop(),b._setCurrentTabSelected(),b.updateTravelerAccordionState(),$namespace.TabOrder.updatePageTabOrder(),$namespace.DomUtil.setElementLoadingMask(!1,null,!1),b.updateDiningRequestOptionsDisabledState()};
this._validateDiningRequestCrossReferenceSelection(a)&&$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param(f),null,null,g,null)},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline form-group" id="'+a.attr("id")+'_error">'+b+"</label>");"#cruiseSpecialRequest_diningCrossReference"!=a.selector&&$("#"+a.attr("id")+"_error").addClass("bed-error");$(window).trigger("resize");this.isFirstFormFieldFocusActive||
(a.parent().removeClass("focus"),this.isFirstFormFieldFocusActive=!0,a.focus(),this.setErrorFoucs=a);$namespace.TabOrder.updatePageTabOrder()},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby")},_changeDiningRequestSelection:function(a){var b=$("#diningSeat option:selected").val();a=$(a.currentTarget).parents(".cruise-page-wrapper").find('select[id^="diningSeat"]');this._removeError(a);this._removeError($("#cruiseSpecialRequest_diningCrossReference"));
$("[data-diningtiming]").each(function(a){$(this).data("diningtiming")==b?$(this).removeClass("displayNone"):$(this).addClass("displayNone")})},_changeDiningTableSizeSelection:function(a){a=$(a.currentTarget).parents(".cruise-page-wrapper").find('select[id^="tableSize"]');this._removeError(a);this._removeError($("#cruiseSpecialRequest_diningCrossReference"))},_validateDiningPreferences:function(a){var b=!0;this.isFirstFormFieldFocusActive=!1;var d=this.module.TranslationTexts;if(null!=a){var e=$(a.currentTarget).parents(".cruise-page-wrapper");
a=e.find('select[id^="diningSeat"]');e=e.find('select[id^="tableSize"]');this._removeError(a);this._removeError(e);var f=a.val(),g=e.val();if("undefined"==typeof f||null==f)b=$namespace.MessageUtil.prefixError(d.INVALID_DINING_REQUEST),$namespace.MessageUtil.showActionErrorMessage({text:b},null),b=!1;!$(".stateroomTab").data("table-size-available")||"undefined"!=typeof g&&null!=g||(b=$namespace.MessageUtil.prefixError(d.INVALID_TABLE_SIZE),$namespace.MessageUtil.showActionErrorMessage({text:b},null),
b=!1);for(var h=$(".stateroomTab").data("dining-seating-codes").split(","),k=!1,l=0;l<h.length;l++)h[l]==f&&(k=!0);k||(this._addError(a,$namespace.MessageUtil.prefixError(d.INVALID_DINING_REQUEST)),b=!1);if(""==f&&""==g)this._addError(a,$namespace.MessageUtil.prefixError(d.DINING_REQUEST_REQUIRED)),this._addError(e,$namespace.MessageUtil.prefixError(d.DINING_TABLE_SIZE_REQUIRED)),b=!1;else if(""==g)this._addError(e,$namespace.MessageUtil.prefixError(d.DINING_TABLE_SIZE_REQUIRED)),b=!1;else if(void 0===
f||""==f)this._addError(a,$namespace.MessageUtil.prefixError(d.DINING_REQUEST_REQUIRED)),b=!1;e=document.getElementById("cruiseDate").innerHTML.split("-");a=new Date(e[0]);e=new Date(e[1]);f=$("#passengerCount").val();for(g=1;g<=f;g++){if($("#birthdayDate_"+g)&&(k=$("#birthdayDate_"+g).val(),h=$("#birthdayYears_"+g).val(),this._removeError($("#birthdayYears_"+g)),this._removeError($("#birthdayDate_"+g)),""!=k)){k=new Date(k);if(k>e||k<a)this._addError($("#birthdayDate_"+g),$namespace.MessageUtil.prefixError(d.INVALID_BIRTHDAY_DATE)),
b=!1;if(""==cwctravel.core.StringUtil.trim(h)||"0"==h)this._addError($("#birthdayYears_"+g),$namespace.MessageUtil.prefixError(d.YEARS_CELEBRATING_BIRTHDAY)),b=!1,this.showAccordionFocus(g)}if($("#anniversaryDate_"+g)&&(k=$("#anniversaryDate_"+g).val(),h=$("#anniversaryYears_"+g).val(),this._removeError($("#anniversaryYears_"+g)),this._removeError($("#anniversaryDate_"+g)),""!=k)){k=new Date(k);if(k>e||k<a)this._addError($("#anniversaryDate_"+g),$namespace.MessageUtil.prefixError(d.INVALID_ANNIVERSARY_DATE)),
b=!1;if(""==cwctravel.core.StringUtil.trim(h)||"0"==h)this._addError($("#anniversaryYears_"+g),$namespace.MessageUtil.prefixError(d.YEARS_CELEBRATING_ANNIVERSARY)),b=!1,this.showAccordionFocus(g)}}return b}},_validateDiningRequestCrossReferenceSelection:function(a){var b=this.module.TranslationTexts,d=!0,e=$("#cruiseSpecialRequest_diningCrossReference");if(!0===e.is(":checked")&&null!=a){var f=$(a.currentTarget).parents(".cruise-page-wrapper");a=f.find('select[id^="diningSeat"]');f=f.find('select[id^="tableSize"]');
this._removeError(e);""===a.val()&&(this._addError(a,""),d=!1);""===f.val()&&(this._addError(f,""),d=!1);d||this._addError(e,$namespace.MessageUtil.prefixError(b.DINING_OPTIONS_REQUIRED))}return d},showAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.addClass("active");a.find(".accordion-content").show();a.find(".accordion-button").attr("aria-expanded","true");a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg");null!=this.setErrorFoucs&&this.setErrorFoucs.focus()},
hideAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.removeClass("active");a.find(".accordion-content").hide();a.find(".accordion-button").attr("aria-expanded","false");a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")},_onSelectDropDownFocusIn:function(a){$("#diningPreferences").removeClass("focus");a.preventDefault();$(a.currentTarget)},_onSelectDropDownFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&
a.removeClass("active")},_onSelectDropDownClick:function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onAccordionClick:function(){var a=this.$el.find(".info-bar-links-right .btn-continue");$(a).is(":hidden")?$("#continueToSpecialRequests").attr("aria-hidden","true"):$("#continueToSpecialRequests").removeAttr("aria-hidden")},_openCloseTravelerAccordionOnClick:function(a){this._openCloseTravelerAccordion(a)},_openCloseTravelerAccordion:function(a){a=$(a.currentTarget);
var b=a.data("pax-number");this.setErrorFocus=null;a.closest("div.accordion-item").hasClass("active")?this.hideAccordionFocus(b):this.showAccordionFocus(b);$namespace.TabOrder.updatePageTabOrder()},_openCloseTravelerAccordionOnEnterEvent:function(a){var b=a.which;if(13==b||32==b)a.preventDefault(),this._openCloseTravelerAccordion(a)},_showErrorModal:function(a){var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseSpecialRequestPageModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});
$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))},showErrorForAnnaversaryDatesMissMatch:function(a){this.isFirstFormFieldFocusActive=!1;for(var b=this.module.TranslationTexts,d=$("#passengerCount").val(),e=1;e<=d;e++)this._removeError($("#anniversaryDate_"+e)),this._removeError($("#anniversaryYears_"+e)),"anniversaryDate"===a&&this._addError($("#anniversaryDate_"+
e),$namespace.MessageUtil.prefixError(b.ANNIVERSARY_DATES_MISMATCH)),"anniversaryYears"===a&&this._addError($("#anniversaryYears_"+e),$namespace.MessageUtil.prefixError(b.ANNIVERSARY_YEARS_MISMATCH)),this.showAccordionFocus(e)},notAllowAlphabetValuesInYearsField:function(){$(".year-celebrating").on("paste",function(a){window.event.clipboardData.getData("text");a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(3<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),
!1});$(".year-celebrating").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,3),a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1})},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Special_Requests_Cruise Summary","Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Special_Requests_Travelers_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Special_Requests_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Special_Requests_Flights","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Special_Requests_Hotel","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Special_Requests_Transportation",
"Click","Expand")},trackGA:function(){var a="/cr/booking/bookingWidget/Specialrequest"+this.getGaCruisePackagePrefix();$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"1",eVar1:"Cruise Special Requests - Cruises | Costco Travel",eVar2:"cruise",eVar34:$(this.el).data("destination"),eVar74:a});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a})},getGaEventLabel:function(){return"/cr/booking/bookingWidget/Specialrequest"+this.getGaCruisePackagePrefix()},
getGaCruisePackagePrefix:function(){var a=$(this.el);return"/"+a.data("destination")+"/"+a.data("line-name")+"/"+a.data("cruiseline-code")+"/"+a.data("ship-name")+"/"+a.data("departure-date")},updateDiningRequestOptionsDisabledState:function(){var a=$("#cruiseSpecialRequest_diningCrossReference");a.is(":checked")&&a.is(":disabled")&&($("#diningSeat").attr("disabled","disabled"),$("#tableSize").attr("disabled","disabled"))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;var animationSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED;$namespace.View=$namespace.View||{};
$namespace.View.CruiseOfferPageView=Backbone.View.extend({el:"#cruise-offer-page",events:{"click a.modal-gallery-thumb-ship-details":"_onGalleryThumbClickShipDetails","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary",'click a[data-hook="show-more-itinerary-link"]':"_onShowMoreItineraryClick",'click [data-hook="price_matrix"]':"_goToAvailableDateSection","change #shipDeckPlan":"_onShipDeckPlanChange","click a.price-tab":"_onPriceTabClick",'click [data-hook="show_price_details"]':"_showSinglePriceCard",
'click [data-hook="show-more-price-link"]':"_onShowMorePriceDetails",'click [data-hook="terms-and-conditions-pop-up"]':"_showTermsAndConditions",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip","focusin select#shipDeckPlan":"_onShipDeckPlanFocusIn","focusout select#shipDeckPlan":"_onShipDeckPlanFocusOut",'click [data-hook="redirectToLogin"]':"_onLoginToViewPrices",'click [data-hook="tabexpand"]':"_tabExpand"},initialize:function(a){this.module=a.module;this.$page=$.hook("page_content");
if(this.cruiseRatingLink=$(this.el).find(".travel-description-travel-rating a[data-tooltip]"))this.cruiseRatingsTooltip=new $namespace.Widgets.Tooltip(this.cruiseRatingLink,{parentSelector:".cruise-item__ratings"});this.stateroomDetailsTabSwitcher=new $namespace.Widgets.TabSwitcher($('DIV[data-hook="tab-switcher"]'));this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));
$("[data-color-code]").each(function(a,b){$(b).css("background-color","#"+$(b).data("color-code"))});$(".rooms").each(function(a,b){a=$(b).find(".roomDescription").find("ul");a.addClass("blue-bullets amenities-list amenities-list-small");1==a.length&&(a=a.remove(),$(b).append(document.createElement("hr")),a.appendTo(b))});a=$.extend({},a);this.destinationCode=a.destinationCode;this.cruiseLineCode=a.cruiseLineCode;this.shipName=a.shipName;this.packageId=a.packageId;this.showError=a.showError;this.module=
a.module;this.loginFocus=a.loginFocus;this.lowestLeadInPriceWhichIncludesTaxesAsNeeded=a.lowestLeadInPriceWhichIncludesTaxesAsNeeded;this._initPageAnalytics();this._initAccordionAnalytics();$(window).on("resize orientationchange",$.proxy(this._onResize,this));a=this.module.TranslationTexts;var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseSearchResultsModule.TranslationTexts.ACTION_ERROR,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});this.showError&&$namespace.MessageUtil.showMessage({type:1,
text:b,title:a.COMMON_ERROR_MODAL_TITLE});$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",0],[".socialMediaTargetMobile",1]],"cruise-offer-page",this._getGaCruisePackageId(this));this.loginFocus&&$("html, body").animate({scrollTop:$("#availableDatesAndPrices").offset().top-50},1E3,function(){$("#availableDatesAndPrices").focus()});breakpoint.isMobile()||this._initializeLowestPriceCell();this._onResize()},_initializeLowestPriceCell:function(){var a=this,b=$("#lowestPriceCell"),d=
b.parent();b=b.parent().parent();this.lastSelected=d;if(void 0==d.data("hook"))return!1;d&&b&&b.attr("aria-owns",d.data("aria-owns-id"));d.hasClass("active")?this.unsetGridItem():(this.unsetGridItem(),this.setGridItem(d,!1));b={coc:"LOAD_CRUISE_OFFER_PRICE_SUMMARY",packageId:d.data("package-id"),selectedStateroomType:d.data("stateroom"),selectedDepartureDate:d.data("departure-date"),showAcknowledgement:d.data("show-acknowledgement"),selectedAmount:d.data("amount"),selectedStateroomImage:d.data("stateroomimage"),
selectedTaxLowBound:d.data("taxlowerbound"),selectedTaxUpperBound:d.data("taxupperbound"),selectedSailingLength:d.data("sailinglength"),selectedShipName:d.data("shipname"),selectedStateroomCategoryName:d.data("stateroomcategoryname"),selectedCruiseTourSearch:d.data("cruisetoursearch"),selectedCruiseLineBookableByConsumer:d.data("cruiselinebookablebyconsumer"),departureDate:d.data("departuredate"),selectedShipLine:d.data("shipline"),selectedSailingUid:d.data("sailinguid"),selectedPackageName:d.data("packagename"),
selectedStateroomTypeCode:d.data("stateroomcode")};d=[d.data("aria-owns-id")];$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseOfferContent.act",$.param(b),null,"cruiseOfferPriceSummary",function(b){$("#cruiseOfferPriceSummary").attr("id",b);$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("a[data-hook='onMobilePriceSummaryCancel']").on("click",function(b){a.unsetGridItem();null!=a.lastSelected?null==this.lastSelected:a._goToAvailableDateSection()});$("a[data-hook='loginToViewAmenitiesDetails']").on("click",
function(b){a._onLoginToViewAmenitiesDetailsClick()});$("a[data-modal='data-itinerary-modal']").on("click",function(b){a._showItineraryRemarksModal(b)});$("[data-hook='buttonContinue']").on("click",function(b){a._onContinueButtonClick(b)});a._initShopCardTooltips();$namespace.TabOrder.updatePageTabOrder()},d)},_tabExpand:function(a){var b=$(a.currentTarget).data("tabpane");setTimeout(function(){$("#"+b).focus()},100)},_initAccordionAnalytics:function(){var a=this;$(this.el).find(".sailingItinerary").on("ct.accordion.opening",
function(b,d){$namespace.Analytics.trackEvent("CR_Details_Port_of_Call","Click",a._getGaCruisePackageId())});$(this.el).find(".ship-facts-accordion").on("ct.accordion.opening",function(b,d){$("[data-hook='tabexpand']").on("click",function(b){a._tabExpand(b)});$namespace.TabOrder.updatePageTabOrder();d.data("event-category")&&$namespace.Analytics.trackEvent(d.data("event-category"),"Click",a._getGaCruisePackageId())})},_gaForShopCardToolTip:function(a){$namespace.Analytics.trackEvent("CR_Details_Shop_Card",
"ToolTip",this._getGaCruisePackageId())},_initPageAnalytics:function(){var a="/Cruises/Offers/"+this.packageId;$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"Cruise",v74:a});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:{page:a,location:window.location.href}})},_getGaCruisePackageId:function(a){return"/"+this.destinationCode+"/"+this.cruiseLineCode+"/"+this.shipName+"/"+this.packageId},_showItineraryRemarksModal:function(a){a=
$(a.currentTarget);var b=this._createAmenityDescriptionKey(a);$namespace.Analytics.trackEvent("CR_Cruise_OfferPage_Included_Extras",a.data("action"),this._getGaCruisePackageId());a={coc:"SHOW_AMENITIES_DESCRIPTION_MODAL",packageId:a.data("package-id"),amenityDescriptionKey:b,selectedDepartureDate:a.data("departure-date")};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseOfferContent.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_createAmenityDescriptionKey:function(a){var b=a.parents(".cruise-extras").data("stateroom");return(a.data("title")+b).replace(/[^a-zA-Z0-9]/g,"")},_showTermsAndConditions:function(a){a.preventDefault();this.fullTermsConditions.open()},_onLoginToViewAmenitiesDetailsClick:function(a){$namespace.Analytics.trackEvent("CR_Cruise_OfferPage_Result_Login","Card_Credit_Amounts",this._getGaCruisePackageId());$namespace.Navigation.loadPage(document.location.href+
"_true")},_onContinueButtonClick:function(a){var b=this;a=$(a.target);var d=a.attr("data-show-acknowledgement"),e=a.data("sailing-uid"),f=a.data("stateroomtypecode");$namespace.Analytics.trackEvent("CR_Cruise_OfferPage_Onboard_Continue",a.data("action"),this._getGaCruisePackageId());b=this;"true"===d?(a=b.module.TranslationTexts,$namespace.MessageUtil.showAcknowledgementsMessage({title:a.MESSAGE_TITLE_ACKNOWLEDGEMENT,header:a.CURRENCY_CONVERSION_WARNING_HEADER,text:a.CURRENCY_CONVERSION_WARNING_MESSAGE},
function(){b._proceedToTravelersPage(e,f)},a.BUTTON_TITLE_I_UNDERSTAND,null)):b._proceedToTravelersPage(e,f)},_proceedToTravelersPage:function(a,b){var d={};$namespace.GlobalConstants.RESPONSIVE_CRUISE_TRAVELERS_STATEROOM_TYPE_PAGES_ENABLED?(d.ctcsr="LOAD_CRUISE_TRAVELERS",d.selectedSailingItemUid=a,d.selectedStateroomType=b,d.fromCruiseOffer="true",$namespace.DomUtil.setElementLoadingMask(!0),a=function(){$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO);
$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1)},$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",$.param(d),null,"mainContent",a,null,null,null,null)):(d.csr="8",d.cruiseSailingItemUid=a,d.displayCruiseTripSummaryUpto=$namespace.CruiseTripSummaryDisplayConstants.DISPLAY_CRUISE_TRIP_SUMMARY_UPTO_SAILING_INFO,d.showMultiStateroomsHelpSection="true",$namespace.DomUtil.setElementLoadingMask(!0),a=function(){$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO)},$namespace.AjaxUtil.makeAjaxCall("legacy/cruiseSailingResults.act",$.param(d),null,"",a,null,null,null,null))},_onShipDeckPlanChange:function(a){var b=$(a.currentTarget);a=b.prop("selectedIndex");var d=b.prop("options")[a].text;b=$("option:selected",b).attr("data-ship");$("#deck_plan_image").attr("src",b);$("#ship_image").attr("src",_webLoc+"/shared/images/icons/ship/decks/shipDeckPlan_"+(19-a)+".gif");utils.updateLiveContainer("Showing "+
d)},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0})},_onShowMoreItineraryClick:function(a){$("div.itinerary-box").find(".accordion").removeClass("displayNone");$("div.itinerary-box").find(".itinerary-table").removeClass("itinerary-table-display-none");$namespace.TabOrder.updatePageTabOrder();a=$("div.itinerary-box .first-hidden-item");a.attr("tabindex")||a.attr("tabindex","-1");setTimeout(function(){$("div.itinerary-box .first-hidden-item").focus();
$("#showMoreItineraryAccordion").hide()},300)},_onGalleryThumbClickShipDetails:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0})},_goToAvailableDateSection:function(a){$("html, body").animate({scrollTop:$("#cruiseOfferLeadinPrices").offset().top-50},1E3,function(){$("#cruiseOfferLeadinPrices").focus();$namespace.TabOrder.updatePageTabOrder()})},_initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=
new $namespace.Widgets.Tooltip($(b)))})},_showSinglePriceCard:function(a){var b=this;a=$(a.currentTarget);this.lastSelected&&this.lastSelected.parent()&&this.lastSelected.parent().removeAttr("aria-owns");var d=a.parent();d&&d.attr("aria-owns",a.data("aria-owns-id"));this.lastSelected=a;if(void 0==a.data("hook"))return!1;$namespace.Analytics.trackEvent("CR_Cruise_OfferPage_View_Prices","Click",this._getGaCruisePackageId());d={coc:"LOAD_CRUISE_OFFER_PRICE_SUMMARY",packageId:a.data("package-id"),selectedStateroomType:a.data("stateroom"),
selectedDepartureDate:a.data("departure-date"),showAcknowledgement:a.data("show-acknowledgement"),selectedAmount:a.data("amount"),selectedStateroomImage:a.data("stateroomimage"),selectedTaxLowBound:a.data("taxlowerbound"),selectedTaxUpperBound:a.data("taxupperbound"),selectedSailingLength:a.data("sailinglength"),selectedShipName:a.data("shipname"),selectedStateroomCategoryName:a.data("stateroomcategoryname"),selectedCruiseTourSearch:a.data("cruisetoursearch"),selectedCruiseLineBookableByConsumer:a.data("cruiselinebookablebyconsumer"),
departureDate:a.data("departuredate"),selectedShipLine:a.data("shipline"),selectedSailingUid:a.data("sailinguid"),selectedPackageName:a.data("packagename"),selectedStateroomTypeCode:a.data("stateroomcode")};var e=[a.data("aria-owns-id")],f=parseInt(a.attr("tabindex"));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseOfferContent.act",$.param(d),null,"cruiseOfferPriceSummary",function(a){$("#cruiseOfferPriceSummary").attr("id",a);$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("a[data-hook='onMobilePriceSummaryCancel']").on("click",
function(a){b.unsetGridItem();null!=b.lastSelected?(b.lastSelected.focus(),null==this.lastSelected):b._goToAvailableDateSection()});$("a[data-hook='loginToViewAmenitiesDetails']").on("click",function(a){b._onLoginToViewAmenitiesDetailsClick()});$("a[data-modal='data-itinerary-modal']").on("click",function(a){b._showItineraryRemarksModal(a)});$("[data-hook='buttonContinue']").on("click",function(a){b._onContinueButtonClick(a)});b._initShopCardTooltips();$("#cruiseOfferSinglePriceCardTitle").focus();
$namespace.TabOrder.updatePageTabOrder();breakpoint.isMobile()||$(".singlecardlink").each(function(a){f+=.1;$(this).attr("tabindex",f)});$("#cruise-offer-page .cruise-extras").is(":empty")&&$("#cruise-offer-page .cruise-extras").removeClass("cruise-extras")},e)},_onPriceTabClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?this.unsetGridItem():(this.unsetGridItem(),this.setGridItem(a,!0))},unsetGridItem:function(){if(breakpoint.isMobile()){$.hook("info-bar").height();var a=
this.$page.children(".cruise-summary");$(".price-tab.active").removeClass("active");$(".cruise-summary").remove();$("#search_widget").removeClass("displayNone");this.$el.removeClass("hide-mobile");a.fadeOut(function(){a.remove()})}else $(".price-tab.active").removeClass("active"),$(".cruise-summary").remove()},setGridItem:function(a,b){var d=breakpoint.isMobile();a.data("product-id");if(d){if(void 0!=a.data("hook")){var e=$.hook("info-bar").height();var f=$('<div class="cruise-summary hide-desktop" id="cruiseOfferPriceSummary"></div>');
this.$page.append(f);$("#search_widget").addClass("displayNone")}}else $(".cruiseOfferPriceSummary").remove(),f=$('<div class="cruise-summary hide-mobile" id="cruiseOfferPriceSummary"></div>'),a.closest(".grid-content-row").append(f);a.addClass("active");b&&(b=f.find("h2, h3, h4, p").first(),b.length&&b.attr({tabindex:"-1"}).focus0(),d&&void 0!=a.data("hook")&&(this.$el.addClass("hide-mobile"),$("html, body").animate({scrollTop:f.offset().top-e},animationSpeed)))},_onShowMorePriceDetails:function(){$("div.price-grid.mobile-price-grid").find(".grid-group").removeClass("displayNone");
$namespace.TabOrder.updatePageTabOrder();var a=$("div.grid-group.first-hidden-item");a.attr("tabindex")||a.attr("tabindex","-1");setTimeout(function(){$("div.grid-group .first-hidden-item").focus();$("#showMoreDatePrice").hide()},300)},_onResize:function(){$namespace.TabOrder.updatePageTabOrder();breakpoint.isMobile()?($("#bannerImage").removeClass("h350"),$("#bannerImage").css("height","auto"),this.$el.removeClass("hide-mobile")):$("#bannerImage").addClass("h350")},_onShipDeckPlanFocusIn:function(a){a.preventDefault();
$("#ship_deck_plan_widget").addClass("focus");$("#shipDeckPlan").addClass("active")},_onShipDeckPlanFocusOut:function(a){a.preventDefault();$("#ship_deck_plan_widget").removeClass("focus");$("#shipDeckPlan").removeClass("active")},_onLoginToViewPrices:function(a){$namespace.Analytics.trackEvent("CR_Cruise_OfferPage_Result_Login","stateroom Pricing",this._getGaCruisePackageId());$namespace.Navigation.loadPage(document.location.href+"_true")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseBookingRecapView=Backbone.View.extend({el:"#cruise-booking-recap-page",events:{"click #goBackBtn":"_onBackLink","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary",'click a[data-hook="continue_to_payments"]':"_onContinueToPaymentsClick",'click a[data-hook="show-more-itinerary-link"]':"_onShowMoreItineraryClick","click .shopCardModal":"_onShopCardModalClick","click .shipboardCreditModal":"_onShipboardCreditModalClick","click .amenityModal":"_onAmenityModalClick",
'click a[data-modal="data-itinerary-modal"]':"_onItineraryModalClick",'click a[data-hook="transportation_additional_informations_modal"]':"_onTransportationModalClick","click .stateroomOnlyModal":"_onStateroomOnlyModalClick",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick","click a.megatipLink":"_onClickMegatipLink",'click [data-hook="showmore-trigger"]':"_showMoreInformation","click .travel-description-travel-rating a[data-tooltip]":"_gaForCruiseRatingToolTip",'click a[data-hook="shop_card_tooltip"]':"_gaForCruiseShopCardToolTip"},
initialize:function(a){var b=this;a=$.extend({},a);this.module=a.module;this.destinationCode=a.destinationCode;this.cruiseLineCode=a.cruiseLineCode;this.shipName=a.shipName;this.sailingDate=a.sailingDate;document.title=$("input#page_title").val();a=this.$el.find("#megaTip1");var d=this.$el.find("#megaTip2");0!==a.length&&this.initializeMegaTip(a);0!==d.length&&this.initializeMegaTip(d);a=$("a#chatNowLink");if(1==a.length)a.on(window.ChatApi.chatLinkClickEvent,$.proxy(this.chatLinkAnalytics,this));
b.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));this.initRatingsTooltips();$(".requiredDocCard h2").addClass("displayNone");$(".requiredDocCard a").addClass("external-link");$(".requiredDocCard a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".requiredDocCard").on("click",".external-link",this._checkTermsAndConditionLinksClick);$(".showmore-content .blue-bullets li").each(function(a,
b){1<=a?($(b).attr("aria-hidden","true"),$namespace.TabOrder.updatePageTabOrder(),1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),$(b).attr("tabindex","-1"))):$(b).find("a").attr("data-taborder","document")});this.showSpecialRequestAccordion();b=this;var e=0;$(".price-summary-container-card").each(function(){e+=1;3<$("#columnCount_"+e).data("column-count")&&($(".price-summary-container").removeClass("price-summary-container-flex3"),
$(".price-summary-container").addClass("price-summary-container-flex2"))});$namespace.Analytics.trackPageView(b.getGaCruisePackageId());this.initAccordionAnalytics();this.initPageAnalytics()},_checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},initializeMegaTip:function(a){var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b.megatip.find('[data-hook="accordion"]').each(function(a,b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));
b.accordion.close(!0)});a.addClass("initialized");a.on("click",$.proxy(b._onClick,b));return b},_onClickMegatipLink:function(a){$namespace.Analytics.trackEvent("CR_Booking_Recap_Flights_View_Details","Click",this.getGaCruisePackageId());a=$(a.currentTarget);var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b=a[0].megatip;b.show()},_showMoreInformation:function(a){$namespace.Analytics.trackEvent("CR_Booking_Recap_Required_Docs_Read_More","Click",this.getGaCruisePackageId());a=$(a.currentTarget);
$(a).hide();$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus()},initRatingsTooltips:function(){$("#bookingRecapCruiseCard").find(".travel-description-travel-rating a[data-tooltip]").not(".initialized").each(function(){new $namespace.Widgets.Tooltip($(this),
{parentSelector:".cruise-item__ratings"})})},_onBackLink:function(a){window.history.back()},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0});$namespace.Analytics.trackEvent("CR_Booking_Recap_Popup","Image_Carousel",this.getGaCruisePackageId())},_onContinueToPaymentsClick:function(){$namespace.GlobalConstants.RESPONSIVE_CRUISE_PAYMENT_PAGE_ENABLED&&($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",
$.param({cpp:"LOAD_CRUISE_PAYMENT_PAGE"}),null,"mainContent",function(){$("html, body").animate({scrollTop:0},0);$namespace.HistoryNavigation.replaceHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_RECAP);$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_PAYMENT);$namespace.DomUtil.setElementLoadingMask(!1);$namespace.Application.initializeOnMainContentReload();$(window).resize()}))},_onShowMoreItineraryClick:function(a){$namespace.Analytics.trackEvent("CR_Booking_Recap_Itinerary",
"Show More",this.getGaCruisePackageId());$("div.itinerary-box").find(".accordion").removeClass("displayNone");$("div.itinerary-box").find(".itinerary-table").removeClass("itinerary-table-display-none");$namespace.TabOrder.updatePageTabOrder();a=$("div.itinerary-box .first-hidden-item");a.attr("tabindex")||a.attr("tabindex","-1");setTimeout(function(){$("div.itinerary-box .first-hidden-item").focus();$("#showMoreItineraryAccordion").hide()},300)},showIncludedExtrasPopup:function(a,b,d){a=$(a.currentTarget);
var e=a.attr("data-cruise-category-item-uid");b={cpla:"LOAD_INCLUDED_EXTRAS_MODAL",bookingIndex:a.attr("data-booking-index"),cruiseCategoryItemUid:e,modalType:b,amenityId:d};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePostLoginAmenities.act",$.param(b),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},
null,"")},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");b=b.attr("data-cancellation-policy");a={cppt:"SHOW_ITINERARY_REMARKS",itineraryCode:a,cancellationPolicy:b};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePrePostTransportation.act",$.param(a),
null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onItineraryModalClick:function(a){switch($(a.currentTarget).attr("data-modal-type")){case "RoomRate":var b="CR_Booking_Recap_Hotel_Room_Rate_Info";break;case "IncludedExtra":b="CR_Booking_Recap_Included_Extras";break;case "OptionalServices":b="CR_Booking_Recap_Hotel_Optional_Service";break;case "MealPlans":b="CR_Booking_Recap_Hotel_Meal_Plan"}$namespace.Analytics.trackEvent(b,
"Click",this.getGaCruisePackageId());this._showItineraryRemarksModal(a)},_onTransportationModalClick:function(a){switch($(a.currentTarget).attr("data-transfer-type")){case "Arrival_Transfer":var b="CR_Booking_Recap_Transportation_Arrival_Transfers";break;case "Departure_Transfer":b="CR_Booking_Recap_Transportation_Departure_Transfers";break;case "Cruise_Airport_Pier_Transfer":b="CR_Booking_Recap_Transportation_Airport-Pier_Transfers";break;case "Cruise_Pier_Airport_Transfer":b="CR_Booking_Recap_Transportation_Pier-Airport_Transfers";
break;case "Cruise_Hotel_Pier_Transfer":b="CR_Booking_Recap_Transportation_Hotel-Pier_Transfers";break;case "Cruise_Pier_Hotel_Transfer":b="CR_Booking_Recap_Transportation_Pier-Hotel_Transfers"}$namespace.Analytics.trackEvent(b,"Click",this.getGaCruisePackageId());this._showItineraryRemarksModal(a)},showSpecialRequestAccordion:function(a){this.$el.find('[data-hook="special-request-item"]').each(utils.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a)}));$namespace.TabOrder.updatePageTabOrder()},
_onShopCardModalClick:function(a){$namespace.Analytics.trackEvent("CR_Booking_Recap_Shop_Card","Click",this.getGaCruisePackageId());this.showIncludedExtrasPopup(a,0)},_onShipboardCreditModalClick:function(a){this.showIncludedExtrasPopup(a,1)},_onAmenityModalClick:function(a){var b=$(a.currentTarget).attr("data-amenity-id");$namespace.Analytics.trackEvent("CR_Booking_Recap_Amenity","Click",this.getGaCruisePackageId());this.showIncludedExtrasPopup(a,2,b)},_onStateroomOnlyModalClick:function(a){this.showIncludedExtrasPopup(a,
3)},getGaCruisePackageId:function(a){return"/"+this.destinationCode+"/"+this.cruiseLineCode+"/"+this.shipName+"/"+this.sailingDate},_gaForCruiseRatingToolTip:function(){$namespace.Analytics.trackEvent("CR_Booking_Recap_Ship_Rating","ToolTip",this.getGaCruisePackageId())},_gaForCruiseShopCardToolTip:function(){$namespace.Analytics.trackEvent("CR_Booking_Recap_Shop_Card","ToolTip",this.getGaCruisePackageId())},chatLinkAnalytics:function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/cr/booking/bookingWidget/bookingRecap"+
this.getGaCruisePackageId())},initAccordionAnalytics:function(){var a=this;$(this.el).find(".sailingItinerary").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Booking_Recap_Port_of_Call","Click",a.getGaCruisePackageId())});$(this.el).find(".tourHighlight").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Booking_Recap_Tour_Highlight","Click",a.getGaCruisePackageId())});$(this.el).find(".special-request-accordions").on("ct.accordion.opening",
function(b,d){$namespace.Analytics.trackEvent("CR_Booking_Recap_Special_Requests","Click",a.getGaCruisePackageId())});$(this.el).find(".baggageAndFees").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Booking_Recap_Flights_Baggage_Fees","Click",a.getGaCruisePackageId())});$(this.el).find(".termsAndConditions").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_Booking_Recap_Flights_Terms_and_Conditions","Click",a.getGaCruisePackageId())})},initPageAnalytics:function(){var a=
document.title,b="/cr/booking/bookingWidget/bookingRecap"+this.getGaCruisePackageId();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v74:b});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:{page:b,location:window.location.href}})},close:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};enableButtons=!1;sortBy=0;lastEditedActivityId="";DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES=10;$namespace.View=$namespace.View||{};VALIDATION_ERROR_TIME_IS_MISSING="Validation error time is missing";VALIDATION_ERROR_MANDATORY_NO_OF_TOURS="Validation error require mandatory number of tour";
$namespace.View.MultiCityActivityView=Backbone.View.extend({el:"#multiCityActivity",events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal","change select#selectActivitiesSort":"_onActivitiesSortChange",'click [data-hook="backToPackageOverview"]':"_backToPackageOverview",'click [data-hook="edit-activity"]':"_onActivityEditClick",'click [data-hook="update-activity"]':"_onActivityUpdateClick",'click [data-hook="cancel-activity"]':"_onActivityCancelClick",'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",
'click [data-hook="remove-activity"]':"_onActivityRemoveClick",'focusin [data-hook="activity-date-time"]':"_onActivityDateTimeFocusIn",'focusout [data-hook="activity-date-time"]':"_onActivityDateTimeFocusOut",'change [data-hook="activity-date-time"]':"_onActivityDateTimeChange",'click [data-hook="activity-date-time"]':"_onActivityDateTimeClick",'click [data-hook="expander-show-more-link"]':"_onShowMoreResultsClick",'click [data-hook="select-activity"]':"_onActivitySelectClick","focusin select#selectActivitiesSort":"_onActivitiesSortFocusIn",
"focusout select#selectActivitiesSort":"_onActivitiesSortFocusOut"},initialize:function(a){$.hook("sticky-bar").each($namespace.Utils.eachUninitialized(function(a,b){b.stickyBar=new $namespace.Widgets.StickyBar(a)}));$.hook("sticky-sidebar").each(utils.eachUninitialized(function(a,b){b.stickySidebar=new $namespace.Widgets.StickySidebar(a)}));this.controller=$.extend({},a).controller;this.module=a.module;this.$el.find('.accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=
new $namespace.Widgets.Accordion($(b)));$namespace.Utils.Breakpoint.isDesktop()?b.accordion.open(!0):b.accordion.close(!0)});this.$sortItemList=this.$(".sort-list").find(".sort-item");a=this.$("#selected-activities").find(".select-widget:not(.initialized)");this.selectDateTimeWidgets=[];for(var b=0;b<a.length;b++)this.selectDateTimeWidgets[b]=new widgets.SelectWidget(a.eq(b));DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES=10;_.isEmpty($("#includedActivitiesResults").text())||$("#additionalActivitiesResults").removeClass("no-padding-top");
_.isEmpty($("#additionalActivitiesResults").text())&&$("#additionalActivitiesResults").addClass("displayNone");$namespace.TabOrder.updatePageTabOrder();$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.trackGAAdobe()},_onResize:function(){$("img[tourActivityImage]").removeAttr("initialized").removeAttr("altsrcattempted");$namespace.ImageUtil.initImages();$namespace.TabOrder.updatePageTabOrder()},includedAdditionalImageAllign:function(){setTimeout(function(){$("#additionalActivitiesResults").find('div[class="gallery-thumb"] img[data-test="imgActivityCardLogo"]').addClass("block image-no-margin-mobile tourActivityImage");
$("#sightseeingSummaryContentDiv").find('div[class="gallery-thumb"] img[data-test="imgActivityCardLogo"]').addClass("block image-no-margin-mobile tourActivityImage")},300)},_showCancellationPolicyModal:function(){var a=$(this.el).data("package-id"),b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("VP_Activities_Cancellation_Policy_Schedule","click",a,null)},_onActivitiesSortChange:function(a){var b=$(a.currentTarget).data("next-city-count"),d=$(a.currentTarget).find("option:selected"),e=d.data("selected-page");a=$(a.currentTarget).data("package-id");sortBy=d.val();0<e&&--e;$namespace.Analytics.trackEvent("VP_Activities_"+
(1==sortBy?"Name":"Price"),"Sort",a);this.sortItems(e,b)},sortItems:function(a,b){var d=this;var e="mca=SHOW_ADDITIONAL_ACTIVITIES_RESULTS&uid="+$("#cityUID").val();e=e+("&selectedPage="+a)+("&sortBy="+sortBy);e+="&cityCounter="+b;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",e,null,"additionalActivitiesResults",function(){d.includedAdditionalImageAllign();$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$("#selectActivitiesSort").val(sortBy);
$(window).trigger("resize");d._enableDisableButtons(enableButtons);$namespace.TabOrder.updatePageTabOrder();var a=d.module.TranslationTexts;switch(d.$el.find("#selectActivitiesSort").val()){case "0":var b=a.ACTIVITY_SORTED_BY_PRICE;break;case "1":b=a.ACTIVITY_SORTED_BY_NAME}utils.updateLiveContainer(b);$("#selectActivitiesSort").focus()},null)},_backToPackageOverview:function(a){a.preventDefault();a=$(event.currentTarget).data("package-id");$namespace.Analytics.trackEvent("Activities","Back_To_Overview",
a);var b=this.module.TranslationMessages;a="mca=LOAD_MULTICITY_ACTIVITY&cityCounter="+$("#cityCounter").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",a,null,null,function(){var a="mca=VALIDATE_ACTIVITIES_RESULTS&cityCounter="+$("#cityCounter").val()+"&numberOfMandatoryTours="+$("#numberOfMandatoryActivities").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",a,null,null,function(a,d){a?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),
a==VALIDATION_ERROR_TIME_IS_MISSING?$namespace.MessageUtil.showMessage({type:1,text:b.ACTIVITY_VALIDATION_ERROR_TIME_IS_MISSING.translatedText}):a==VALIDATION_ERROR_MANDATORY_NO_OF_TOURS?$namespace.MessageUtil.showMessage({type:1,text:$namespace.TranslationUtil.replaceParameters(b.ACTIVITY_VALIDATION_ERROR_MANDATORY_NO_OF_TOURS.translatedText,{noOfActivity:d})}):$namespace.MessageUtil.showMessage({type:1,text:a})):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE)},
null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1)},null)},_onActivityEditClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.data("package-id"),d=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Edit",d,b);lastEditedActivityId=a.data("activity-id");$(".edit-remove-"+a.data("activity-id")).addClass("displayNone");$(".act-date-time-"+a.data("activity-id")).addClass("col");$(".update-cancel-"+a.data("activity-id")).removeClass("displayNone");$(".enabled-date-time-"+
a.data("activity-id")).removeClass("displayNone");$(".disabled-date-time-"+a.data("activity-id")).removeClass("col");$(".disabled-date-time-"+a.data("activity-id")).addClass("displayNone");$("#selectActivityDate"+a.data("activity-id")).val($("#defaultActivityDate"+a.data("activity-id")).val());_.isEmpty($("#defaultActivityTime"+a.data("activity-id")).val())||$("#selectActivityTime"+a.data("activity-id")).val($("#defaultActivityTime"+a.data("activity-id")).val());this._enableDisableButtons(!0);$namespace.TabOrder.updatePageTabOrder();
$("#selectActivityDate"+a.data("activity-id")).focus()},_enableDisableButtons:function(a){(enableButtons=a)?($.hook("edit-activity").addClass("disabled"),$.hook("edit-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("edit-activity").attr("data-hook","edit-activity-disabled"),$.hook("remove-activity").addClass("disabled"),$.hook("remove-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("remove-activity").attr("data-hook","remove-activity-disabled"),$.hook("select-activity").addClass("disabled"),
$.hook("select-activity").removeAttr("tabindex").removeAttr("data-taborder"),$.hook("select-activity").attr("data-hook","select-activity-disabled"),$(".activity-btn-events").each(function(a){$(this).attr("aria-label",$(this).data("unavailable-title"))})):($.hook("edit-activity-disabled").attr("data-hook","edit-activity"),$.hook("edit-activity").removeClass("disabled"),$.hook("edit-activity").attr("data-taborder","document"),$.hook("remove-activity-disabled").attr("data-hook","remove-activity"),$.hook("remove-activity").removeClass("disabled"),
$.hook("remove-activity").attr("data-taborder","document"),$.hook("select-activity-disabled").attr("data-hook","select-activity"),$.hook("select-activity").removeClass("disabled"),$.hook("select-activity").attr("data-taborder","document"),$(".activity-btn-events").each(function(a){$(this).attr("aria-label",$(this).data("available-title"))}))},_refreshInfoBarAndPageContent:function(a){var b=this,d="mcsbib=DISPLAY_VP_INFOBAR";d="mcsbib=DISPLAY_VP_INFOBAR";d+="&page=multiCityActivity";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCitySideBarAndInfoBar.act",
d,null,"multiCityActivityInfoBar",function(){$.hook("sticky-bar").each($namespace.Utils.eachUninitialized(function(a,b){b.stickyBar=new $namespace.Widgets.StickyBar(a)}));d="mca=SHOW_CITY_ACTIVITIES_RESULTS";d+="&uid="+$("#multiCityActivity").data("city-uid");d+="&cityCounter="+$("#cityCounter").val();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",d,null,"multiCityActivityContent",function(){b.includedAdditionalImageAllign();$namespace.DomUtil.setElementLoadingMask(!1,null,
!1);$("#titleAdditionalAvailableActivities").attr("tabindex","-1");$("#titleAdditionalAvailableActivities").focus();$("#titleAdditionalAvailableActivities").attr("data-taborder","document");var a=$("h3.headActivityCard:first");a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();setTimeout(function(){a.focus()},1)},null)},null)},_onActivityUpdateClick:function(a){a.preventDefault();var b=this,d=$(a.currentTarget);a=d.data("package-id");var e=d.data("activity-name"),f=d.data("next-city-count");
$namespace.Analytics.trackEvent("VP_Activities_Edit_Update",e,a);d.data("activity-uid");d.data("activity-id");a=$("#selectActivityDate"+d.data("activity-id"));e=$("#selectActivityTime"+d.data("activity-id"));var g=this.module.TranslationTexts;if(""==a.val())return a.attr("aria-describedby","selectActivityDateTime"+d.data("activity-id")+"Error"),$("#errorHeadActivityCard"+d.data("activity-id")).removeClass("displayNone"),$("#selectActivityDateTime"+d.data("activity-id")+"Error").text($namespace.MessageUtil.prefixError(g.ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE)),
a.focus(),!1;if(""==e.val())return e.attr("aria-describedby","selectActivityDateTime"+d.data("activity-id")+"Error"),$("#errorHeadActivityCard"+d.data("activity-id")).removeClass("displayNone"),$("#selectActivityDateTime"+d.data("activity-id")+"Error").text($namespace.MessageUtil.prefixError(g.ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE)),e.focus(),!1;var h="mca=UPDATE_ADDITIONAL_ACTIVITY_TO_PACKAGE";a.val();h+="&activityUid="+a.val();h+="&selectedTime="+e.val();h+="&cityCounter="+f;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",h,null,null,function(){b.includedAdditionalImageAllign();h="mca=LOAD_MULTICITY_ACTIVITY";h+="&cityCounter="+f;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",h,null,"mainContent",function(){b._enableDisableButtons(!1);lastEditedActivityId="";$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();b.includedAdditionalImageAllign();$namespace.Utils.Breakpoint.isDesktop()?
$("#edit-activity-desktop-"+d.data("activity-id")).focus():$(".btn-edit-activity-mobile").focus()},null)},null);$("#lastSavedActivityDate"+lastEditedActivityId).val(a.val())},_onActivityCancelClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.data("package-id"),d=a.data("activity-name");a.data("activity-id");$namespace.Analytics.trackEvent("VP_Activities_Edit_Cancel",d,b);$("#errorHeadActivityCard"+a.data("activity-id")).addClass("displayNone");$("#selectActivityDateTime"+a.data("activity-id")+
"Error").text("");$("#selectActivityDate"+a.data("activity-id")).removeAttr("aria-describedby");$(".edit-remove-"+a.data("activity-id")).removeClass("displayNone");$(".update-cancel-"+a.data("activity-id")).addClass("displayNone");$("#selectActivityDate"+a.data("activity-id")).val($("#defaultActivityDate"+a.data("activity-id")).val());_.isEmpty($("#defaultActivityTime"+a.data("activity-id")).val())||$("#selectActivityTime"+a.data("activity-id")).val($("#defaultActivityTime"+a.data("activity-id")).val());
$(".enabled-date-time-"+a.data("activity-id")).addClass("displayNone");$(".disabled-date-time-"+a.data("activity-id")).removeClass("displayNone");$(".disabled-date-time-"+a.data("activity-id")).addClass("col");this._enableDisableButtons(!1);lastEditedActivityId="";$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isDesktop()?$("#edit-activity-desktop-"+a.data("activity-id")).focus():$(".btn-edit-activity-mobile").focus()},_onToursLinkClick:function(a){a=$(a.currentTarget);var b=
a.data("package-id"),d=a.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_Read_More",d,b);a="mcac=LOAD_ACTIVITIES_CARD_POPUP&sightseeingId="+a.data("tour-id")+"&itineraryCode="+a.data("iternary-code");b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):((new $namespace.Widgets.Modal(this.responseText)).show(),
$(".tourDetailModalPopup").find("table").attr("role","presentation"))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivitiesCard.act",a,null,null,b,null)},_onActivityRemoveClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("next-city-count"),e=this;a="mca=SHOW_ACTIVITIES_REMOVE_CONFIRMATION&activityUid="+b.data("activity-uid");a+="&cityCounter="+d;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",
a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Confirm(this.responseText,function(){var a="mca=REMOVE_ACTIVITY_FROM_PACKAGE&activityUid="+b.data("activity-uid");a+="&selectedPage="+$("#selectActivitiesSort").data("selected-page");a+="&sortBy="+sortBy;a+="&cityCounter="+d;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",a,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:translations.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):e._refreshInfoBarAndPageContent()},null);$namespace.Analytics.trackEvent("VP_Activities_ConfirmRemove",b.data("activity-name"),b.data("package-id"))},function(){a.hide();b.focus();$namespace.Analytics.trackEvent("VP_Activities_NoThanksRemove",b.data("activity-name"),b.data("package-id"))});a.show()},null);$namespace.Analytics.trackEvent("VP_Activities_Remove",b.data("activity-name"),b.data("package-id"))},_onActivityDateTimeFocusIn:function(a){a.preventDefault();
$(a.currentTarget).parent().addClass("focus")},_onActivityDateTimeFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onActivityDateTimeChange:function(a){a.preventDefault();a=$(a.currentTarget);$("#errorHeadActivityConfirmation").addClass("displayNone");$("#errorHeadActivityCard"+a.data("activity-id")).addClass("displayNone");$("#selectActivityDateTime"+a.data("activity-id")+"Error").text("");a.attr("aria-describedby",
"selectActivityDateTime"+a.data("activity-id")+"Error")},_onActivityDateTimeClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onShowMoreResultsClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.data("next-city-count"),d=this;var e="mca=SHOW_ADDITIONAL_ACTIVITIES_RESULTS&uid="+$("#cityUID").val();e+="&selectedPage="+a.data("selected-page");e+="&sortBy="+sortBy;e+="&cityCounter="+b;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",e,null,"additionalActivitiesResults",function(){d.includedAdditionalImageAllign();$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$(window).trigger("resize");$("#selectActivitiesSort").val(sortBy);d.setFocusOnFirstNewlyLoadedActivitiesCard()},null)},setFocusOnFirstNewlyLoadedActivitiesCard:function(){var a=$.hook("expander-mask").find('div[data-card-id="'+(DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES+1)+'"] h3.heading-additional');
a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(){a.attr("tabindex")!=$(document.activeElement).attr("tabindex")&&(a.attr("tabindex","-1").removeAttr("data-taborder"),a.off("blur"))});a.focus();DEFAULT_PER_PAGE_ADDITIONAL_ACTIVITIES+=5},_onActivitySelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("next-city-count"),e=this,f=this.module.TranslationTexts;$namespace.Analytics.trackEvent("VP_Activities_Select",b.data("activity-name"),
b.data("package-id"));a="mca=SHOW_ACTIVITIES_SELECT_CONFIRMATION&activityUid="+b.data("activity-uid");a+="&cityCounter="+d;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Confirm(this.responseText,function(){var b=$("#selectActivityDate"),g=$("#selectActivityTime"),l=b.data("package-id"),p=b.data("activity-name");if(""==
b.val())return b.attr("aria-describedby","selectActivityDateError"),$("#errorHeadActivityConfirmation").removeClass("displayNone"),$("#selectActivityDateError").text($namespace.MessageUtil.prefixError(f.ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE)),b.focus(),!1;if(""==g.val()&&"true"==$("#isActivityTimeOptional").val())return g.attr("aria-describedby","selectActivityDateError"),$("#errorHeadActivityConfirmation").removeClass("displayNone"),$("#selectActivityDateError").text($namespace.MessageUtil.prefixError(f.ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE)),
g.focus(),!1;b="mca=ADD_ADDITIONAL_ACTIVITY_TO_PACKAGE&activityUid="+b.val();b+="&cityCounter="+d;""!=g.val()&&"false"==$("#isActivityTimeOptional").val()&&(b+="&selectedTime="+g.val());b+="&selectedPage="+$("#selectActivitiesSort").data("selected-page");b+="&sortBy="+sortBy;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityActivity.act",b,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:f.VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE}):(a.hide(),e._refreshInfoBarAndPageContent())},null);$namespace.Analytics.trackEvent("VP_Activities_ConfirmAdd",p,l)},function(){a.hide();b.focus();var d=$("#selectActivityDate"),e=d.data("package-id");d=d.data("activity-name");$namespace.Analytics.trackEvent("VP_Activities_NoThanksAdd",d,e)},!0);$("#selectActivityDate, #selectActivityTime").on("focusin",function(a){$(a.currentTarget).parent().addClass("focus")});$("#selectActivityDate, #selectActivityTime").on("click",
function(a){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});$("#selectActivityDate, #selectActivityTime").on("change",function(a){$("#"+$(this).attr("id")+"Error").text("");$(this).removeAttr("aria-describedby");$("#errorHeadActivityConfirmation").addClass("displayNone")});$("#selectActivityDate, #selectActivityTime").on("focusout",function(a){$(a.currentTarget).parent().removeClass("focus");$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});
a.show()},null)},_onActivitiesSortFocusIn:function(a){a.preventDefault();$("#select_activities_sort").addClass("focus")},_onActivitiesSortFocusOut:function(a){a.preventDefault();$("#select_activities_sort").removeClass("focus")},trackGAAdobe:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");b="/vp/booking/searchSightSeeing/"+a+"/"+b+"/"+d;$namespace.Analytics.track({vendor:"google",type:"pageview",text:b});$namespace.Analytics.track({vendor:"adobe",
type:"pageView",events:"event1",eVar1:"vacation package|activities",eVar2:"vacation package",eVar34:a,eVar74:b})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};widgets=$namespace.Widgets||{};removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY;
$namespace.View.CityHotelResultsView=Backbone.View.extend({el:"#multiCityHotelResults",ui:{map:null,showMoreHotelsLink:null,chatLink:null},googleMap:null,numberOfAdditionalHotels:0,collection:null,SEARCH_WIDGET_COOKIE_NAME:"VP_SEARCH_WIDGET_VALUES",selectedPage:1,events:{'click [data-hook="backToPackageOverview"]':"_backToPackageOverview","click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal","click a.modal-gallery-thumb":"_onGalleryThumbClick",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",
'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click [data-hook="hotel-details-megatip"]':"_clickHotelCardLearnMore",'click a[data-hook="modify-room-toggle"]':"_toggleModifyRoom",'click a[data-hook="hotel-room-selection"]':"_onSelectClick",'click [data-hook="update-optional-service"]':"_onUpdateOptionalServiceCheckboxClick","change select#selectHotelSort":"_onSelectChange",'click [data-hook="showMoreHotelsLink"]':"_onShowMoreHotelsClick",'click [data-tab="map-tab"]':"_onMapTabClick",
'click [data-tab="list-tab"]':"_onListTabClick",'click [data-hook="selectNewHotel"]':"_onSelectNewHotelClick",'click [data-hook="select-service-meal-plan"]':"_onSelectServiceMealPlanClick","click .turnToTeaserWidgetLink":"_onReviewsLinkClick"},mapListTabSwitcher:null,itineraryAccordion:!1,toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():(this.hotelRatingsTooltip.show(a),a=$(this.el).data("package-id"),$namespace.Analytics.trackEvent("Hotel_Costco Travel rating",
"click",a))},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.sortType=$("#additionalHotelsContainer").data("sort-type")?$("#additionalHotelsContainer").data("sort-type"):0;this.ascendingOrder=!0;this.ui.map=$.hook("hotel_map");var b=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(b,{getAllcb:function(){return b.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.locationsData={};
this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length)for(a=$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}),a.off("click"),a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this);this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,b){b.accordion.close(!0)});
var d=$(".hotelRoomsCard");this.roomAccodionsList=[];for(a=0;a<d.length;a++){for(var e=$(d[a]).find(".nested-accordion"),f=$(d[a]).attr("id"),g=[],h=0;h<e.length;h++)g[h]=new $namespace.Widgets.Accordion($(e[h]));this.roomAccodionsList[f]=g}this.$el.find(".accordion").on("ct.accordion.opening",this.trackButtonAccordion);this.$el.find(".accordion").on("ct.accordion.clicked",this._trackAllAccordion);this.ui.showMoreHotelsLink=$.hook("showMoreHotelsLink",this.$el);this.numberOfAdditionalHotels=$.hook("showMoreHotelsLink",
this.$el).data("additional-hotels-count")?$.hook("showMoreHotelsLink",this.$el).data("additional-hotels-count"):0;this.selectedPage=$.hook("showMoreHotelsLink",this.$el).data("selected-page")?$.hook("showMoreHotelsLink",this.$el).data("selected-page"):1;this.lastPage=0<this.numberOfAdditionalHotels?Math.ceil(this.numberOfAdditionalHotels/$namespace.NUMBER_OF_HOTELS_PER_PAGE):1;$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",
$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this));$namespace.GlobalConstants.FEATURE_FLAG_VP2_ENABLED&&(this.SEARCH_WIDGET_COOKIE_NAME="VP2_SEARCH_WIDGET_VALUES");this.selectHotelSort=new $namespace.Widgets.SelectWidget(this.$("#select_hotel_sort"));this.$el.find("select#selectHotelSort").val(this.sortType);this.initializeHotelAdvisary();this.initializeChatLink();this.initHotelRatingTooltips();this.initShopCardTooltips();
this.updateShowMoreButton();this.initLearnMoreLink();this.trackAdobe();this.trackGA();this.initializeMap();$namespace.Application.initTurnToTeasers();this._loadMap();this.liveContainer=$(".tab-switcher-live-container");0!=this.$el.find(".roomCategorySelection").data("show-rooms")&&($namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_HOTEL_RESULTS+"_"+this.$el.find(".roomCategorySelection").data("city-index"),null),this._showModifyRoom(this.$el.find(".roomCategorySelection").data("show-rooms")))},
_showModifyRoom:function(a){a=$("#modifyHotelRoom"+a);var b=a.attr("data-room-number"),d="",e=a.attr("data-room-link"),f=$("#"+e);a.parent().parent().find(".roomRateTaxesAndFees.outer").toggle();$(window).scrollTop($(f).offset().top-100);if(a.hasClass("closed"))a.blur(),d=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT,{roomNumber:b}),a.removeClass("closed").addClass("opened").text(this.module.TranslationTexts.KEEP_CURRENT_SELECTION_BUTTON_TEXT).attr("aria-label",
d).attr("data-test","buttonKeepCurrentSelection"),f.find(".selectedRoomCategory:first").hide(),f.find(".rooms-list:first").show(),$namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){f.find(".accordion-button:first").focus()},1);else{f.find(".rooms-list:first").hide();$namespace.TabOrder.updatePageTabOrder();d=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT,{roomNumber:b});a.attr("aria-label",d).removeClass("opened").addClass("closed").text(this.module.TranslationTexts.MODIFY_ROOM_BUTTON_TEXT).attr("data-test",
"buttonModifyRoom");f.find(".selectedRoomCategory:first").show();a.focus();a=this.roomAccodionsList[e];for(b=0;b<a.length;b++)a[b].close();$namespace.Analytics.trackEvent("Hotels_Results","Continue","Keep_Selection")}$(window).trigger("ct.section.toggling")},reInitialize:function(){this.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",this.$el);this.selectHotelSort=new $namespace.Widgets.SelectWidget(this.$("#select_hotel_sort"));this.ui.map=$.hook("hotel_map");var a=$(".map-list-tab-switcher");
this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(a,{getAllcb:function(){return a.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.initializeMap();this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this));this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");
if(this.hotelRatingLinks.length){var b=$(this.hotelRatingLinks[0]);this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(b,{parentSelector:".travel-description"});b.off("click");for(b=0;b<this.hotelRatingLinks.length;b++)this.hotelRatingLinks[b].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,b){b.accordion.close(!0)});this.initHotelRatingTooltips();this.initLearnMoreLink();
this.initShopCardTooltips();$namespace.Application.initTurnToTeasers();var d=$(".hotelRoomsCard");this.roomAccodionsList=[];for(b=0;b<d.length;b++){for(var e=$(d[b]).find(".nested-accordion"),f=$(d[b]).attr("id"),g=[],h=0;h<e.length;h++)g[h]=new $namespace.Widgets.Accordion($(e[h]));this.roomAccodionsList[f]=g}this.$el.find(".accordion").on("ct.accordion.opening",this.trackButtonAccordion);this.$el.find(".accordion").on("ct.accordion.clicked",this._trackAllAccordion);this.ui.showMoreHotelsLink=$.hook("showMoreHotelsLink",
this.$el);this.numberOfAdditionalHotels=$.hook("showMoreHotelsLink",this.$el).data("additional-hotels-count")?$.hook("showMoreHotelsLink",this.$el).data("additional-hotels-count"):0;this.selectedPage=1;this.lastPage=0<this.numberOfAdditionalHotels?Math.ceil(this.numberOfAdditionalHotels/$namespace.NUMBER_OF_HOTELS_PER_PAGE):1;this.initializeHotelAdvisary();this.initializeChatLink();this.updateShowMoreButton();this._loadMap();this.liveContainer=$(".tab-switcher-live-container")},_onReviewsLinkClick:function(a){a=
$(a.currentTarget).data("hotel-id");var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a);if(null!=b){var d=this;$(window).on("ct.megatip.opened",function(){var a=b.getReviewsAccordionId();setTimeout(function(){$(a).focus()},1);$(a).closest('[data-hook="accordion"]').get(0).accordion.open();d._trackAllAccordion({currentTarget:$(a)},$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);$(window).off("ct.megatip.opened")});$('a[data-megatip][data-hotelid="'+a+'"]').click();$namespace.Analytics.trackEvent("hotel_factsheet_page",
"click",a,null)}},_onSelectNewHotelClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.attr("data-uid"),e=this;a=b.attr("data-filter-name");var f=b.data("price-diff"),g=b.data("new-price-value"),h=b.data("total-new-price"),k=b.data("city-index");b=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_TITLE;var l=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_TITLE_DETAIL;if(0==f)this._selectNewHotel(d,k);else{var p="";p=0<f?$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE,
{priceChange:g}):$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE,{priceChange:g});f="mchr=SHOW_CHANGE_ROOM_CONFIRM_MODAL&modalTitle="+b+("&modalDetailTitle="+l)+("&changeInPrice="+p);f+="&newPrice="+h;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",f,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,
text:this.message.text});else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=new $namespace.Widgets.Confirm(this.responseText,function(){e._selectNewHotel(d,k);$namespace.Analytics.trackEvent("Hotels_Results","Continue","change")},function(){b.hide();$namespace.Analytics.trackEvent("Hotels_Results","Click","No_Thanks")});b.show()}},null)}$namespace.Analytics.trackEvent("Hotels_Results_Select","Click",a+" selected")},_selectNewHotel:function(a,b){$namespace.Utils.updateLiveContainer(this.module.TranslationTexts.NEW_HOTEL_SELECTED);
a="mchr=SELECT_HOTEL_ITEM&selectedHotelItemUid="+a+("&cityCounter="+b)+("&selectedPage="+this.selectedPage);a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;var d=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",a,null,"centerColumn",function(a){if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text}),$namespace.DomUtil.setElementLoadingMask(!1,null,!1);else{$(window).scrollTop($(".info-bar").offset().top);
$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$(".info-bar-price-span").text(a);var b=$("h3.card-hotel-name:first");b.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();b.on("blur",function(a){b.attr("tabindex","-1").removeAttr("data-taborder");b.off("blur")});d.reInitialize();setTimeout(function(){b.focus()},1)}},null)},_toggleModifyRoom:function(a){var b=$(a.currentTarget),d=b.attr("data-room-number"),e="";a.preventDefault();a.stopPropagation();a=b.attr("data-room-link");
var f=$("#"+a);b.parent().parent().find(".roomRateTaxesAndFees.outer").toggle();$(window).scrollTop($(f).offset().top-100);if(b.hasClass("closed"))b.blur(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT,{roomNumber:d}),b.removeClass("closed").addClass("opened").text(this.module.TranslationTexts.KEEP_CURRENT_SELECTION_BUTTON_TEXT).attr("aria-label",e).attr("data-test","buttonKeepCurrentSelection").attr("aria-expanded","true"),
f.find(".selectedRoomCategory:first").hide(),f.find(".rooms-list:first").show(),$namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){f.find(".accordion-button:first").focus()},1);else{f.find(".rooms-list:first").hide();$namespace.TabOrder.updatePageTabOrder();e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT,{roomNumber:d});b.attr("aria-label",e).removeClass("opened").addClass("closed").text(this.module.TranslationTexts.MODIFY_ROOM_BUTTON_TEXT).attr("data-test",
"buttonModifyRoom").attr("aria-expanded","false");f.find(".selectedRoomCategory:first").show();b.focus();b=this.roomAccodionsList[a];for(d=0;d<b.length;d++)b[d].close();$namespace.Analytics.trackEvent("Hotels_Results","Continue","Keep_Selection")}$(window).trigger("ct.section.toggling")},_backToPackageOverview:function(a){a=$(this.el).data("package-id");$namespace.Analytics.trackEvent("Hotel","Back_To_Overview",a);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE)},
_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=a.attr("data-includeRemarks"),e=a.attr("data-rate-info-title");a="";b={itineraryCode:b};d?(b.mctc="LOAD_FILTERED_ITINERARY_REMARKS",a="Hotel_Included_Extras"):(b.mctc="LOAD_ITINERARY_REMARKS",a="Hotel_Room_Rate");"true"==e&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_ITINERARY_REMARKS_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);e=$(this.el).data("package-id");$namespace.Analytics.trackEvent(a,"click",e);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",$.param(b),null,null,d,null)},_showCancellationPolicyModal:function(){var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this),b=$(this.el).data("package-id");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null);$namespace.Analytics.trackEvent("Hotel_Results_Cancellation_Policy_Schedule",
"Click",b)},_onResize:function(){$namespace.ImageUtil.initImages();$namespace.TabOrder.updatePageTabOrder()},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_clickHotelCardLearnMore:function(a){var b=$(a.currentTarget),d=this;a=$(b).data("destination");var e=$(b).data("citycode"),f=$(b).data("hotelid"),g=$(b).data("megatip");if(void 0!=$(b).attr("data-hotelName"))var h=$(b).attr("data-hotelName").split(",")[0];
var k="";k=$(b).data("dynamic-package");var l=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);k=("true"!=k?"mcoh=SHOW_OFFER_HOTEL_DETAIL_INFO":"mcoh=SHOW_DYNAMIC_HOTEL_DETAIL_INFO")+("&destination="+a)+("&cityCode="+e);k+="&hotelId="+f;k+="&hotelName="+h;null!=l&&(k+="&displayReviewsAccordion=",k+=l.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());h=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=a.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_HOTEL_DETAIL_POPUP_ERROR_TITLE}):($("#"+g).html(this.responseText),e=new $namespace.Widgets.Megatip($(b)),$("div.accordion-item h3, h4, h5").each(function(){d._addAriaLevelOrRole($(this),"5","heading")}),$("div.accordion-content h3, h4, h5").each(function(){d._addAriaLevelOrRole($(this),"6","heading")}),$.hook("accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a);
a.on("ct.accordion.clicked",$.proxy(d,"_trackAllAccordion"))})),$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)})),(new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'))).initialize(),new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f)),e.show(),window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50),d._onResize())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityOverviewHotels.act",k,null,null,h,null,"");$namespace.Analytics.trackEvent("Hotels_Learn_More","click",f)},_addAriaLevelOrRole:function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onGalleryThumbClick:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isHotelGallery:"true"})},_onSelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("uid"),e="#"+b.data("room-link"),
f=this;a=b.attr("data-filter-name");var g=b.data("price-diff"),h=b.data("new-price-value"),k=b.data("total-new-price"),l=b.data("city-index");b=this.module.TranslationTexts.HOTEL_ROOM_CHANGE_MODAL_TITLE;var p=this.module.TranslationTexts.HOTEL_ROOM_CHANGE_MODAL_TITLE_DETAIL;if(0==g)this._changeRoomSelection(d,e,l);else{var q="";q=0<g?$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE,{priceChange:h}):$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE,
{priceChange:h});g="mchr=SHOW_CHANGE_ROOM_CONFIRM_MODAL&modalTitle="+b+("&modalDetailTitle="+p)+("&changeInPrice="+q);g+="&newPrice="+k;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",g,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=new $namespace.Widgets.Confirm(this.responseText,
function(){f._changeRoomSelection(d,e,l);$namespace.Analytics.trackEvent("Hotels_Results","Continue","Change")},function(){b.hide();$namespace.Analytics.trackEvent("Hotels_Results","Continue","No_Thanks")});b.show()}},null)}$namespace.Analytics.trackEvent("Hotels_Results_Select","click",a)},_onUpdateOptionalServiceCheckboxClick:function(a){var b=$(a.currentTarget);a="mchr=SHOW_HOTEL_INCLUDE_OR_EXCLUDE_OPTIONAL_SERVICE&serviceUid="+b.data("serviceuid");a+="&uid="+b.data("uid");a+="&cityCounter="+b.data("city-index");
a+="&serviceItemSelected="+b.is(":checked");a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;var d=b.attr("id");b=$(".sidebar-column").find("div.active");var e=null;1===b.length&&(e=b.data("id"));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();e&&$(".sidebar-column").find("[data-id="+
e+"]").find(".accordion-button").trigger("open-instant");var a=$("#"+d);setTimeout(function(){a.focus()},1)},null)},_changeRoomSelection:function(a,b,d){a="mchr=CHANGE_ROOM_SELECTION&uid="+a+("&selectedPage="+this.selectedPage);a+="&sortType="+this.sortType;a=a+("&cityCounter="+d)+("&ascendingOrder="+this.ascendingOrder);var e=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",a,null,"centerColumn",function(a){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{var d=$(b).find("h3:visible");d.attr("data-taborder","document");$(".info-bar-price-span").text(a);$namespace.TabOrder.updatePageTabOrder();d.on("blur",function(a){d.attr("tabindex","-1").removeAttr("data-taborder");d.off("blur")});e.reInitialize();setTimeout(function(){d.focus()},1);$namespace.DomUtil.setElementLoadingMask(!1,1,!1)}},null)},_onButtonAccordionClick:function(a){a.preventDefault();$("div.accordion-button").hasClass("active")||
(a=$(this.el).data("package-id"),$namespace.Analytics.trackEvent("Hotel_Room_Rate","Click",a))},_onShowMoreHotelsClick:function(a){a.preventDefault();this.selectedPage+=1;$('div[data-additional-hotel-page="'+this.selectedPage+'"]').show();this.updateShowMoreButton();$namespace.Analytics.trackEvent("Hotel_Results_Show_More","Click",this.numberOfAdditionalHotels)},sortByMemberRating:function(){var a=[],b=this.$el.find("#additionalHotelsContainer");$.each(b.children(),function(b,d){b={};b.hotelCard=
d;b.rating=$(d).find(".turntoTeaser").attr("data-turnto-rating");a.push(b);$(d).remove()});a.sort(function(a,b){return a.rating===b.rating?0:null==a.rating?1:null==b.rating?-1:a.rating<b.rating?1:-1});var d=[];a.forEach(function(a,e){e=a.hotelCard;$(e).removeClass("displayNone").hide();null==a.rating?d.push(e):b.append(e)});d.forEach(function(a,d){b.append(a)});var e=0,f=1;$.each(b.children(),function(a,b){e>=$namespace.NUMBER_OF_HOTELS_PER_PAGE&&(e=0,f++);1==f&&$(b).show();$(b).attr("data-additional-hotel-page",
f);e++});this.initLearnMoreLink()},_onSelectChange:function(a){var b=this,d=$(a.currentTarget),e=this.$el.find("#selectHotelSort"),f=d.find(":selected").text();d=$(d).data("city-index");e.attr("data-product-uid");var g=e.val(),h=function(){var a=b.module.TranslationTexts;g=e.val();switch(g){case "0":var d=a.SORTED_BY_COSTCO_RECOMMENDS;break;case "1":d=a.SORTED_BY_PRICE;break;case "2":d=a.SORTED_BY_NAME;break;case "3":d=a.SORTED_BY_TRAVEL_RATING;break;case "4":d=a.SORTED_BY_MEMBER_RATING}utils.updateLiveContainer(d)};
this.selectedPage=1;this.sortType=g;this.ascendingOrder=!0;if("3"==g||"4"==g)this.ascendingOrder=!1;a.originalEvent&&$namespace.Analytics.trackEvent("Hotel_Results_Sort","Click",f);f===this.module.TranslationTexts.MEMBER_REVIEW_SORT_TYPE&&$namespace.GlobalConstants.TURNTO_REVIEWS_MULTICITY_ENABLED?this.sortByMemberRating():this.loadAdditionalHotelResultsPage(this.selectedPage,h,d)},updateShowMoreButton:function(){var a=this.numberOfAdditionalHotels-(this.selectedPage*$namespace.NUMBER_OF_HOTELS_PER_PAGE>
this.numberOfAdditionalHotels?this.numberOfAdditionalHotels:this.selectedPage*$namespace.NUMBER_OF_HOTELS_PER_PAGE),b=this.module.TranslationTexts;0<a?(a<$namespace.NUMBER_OF_HOTELS_PER_PAGE?this.ui.showMoreHotelsLink.find("span").text(b.SHOW_MORE_HOTELS_BUTTON_TEXT):this.ui.showMoreHotelsLink.find("span").text(b.SHOW_5_MORE_HOTELS_BUTTON_TEXT),this.ui.showMoreHotelsLink.parent().show()):this.ui.showMoreHotelsLink.parent().hide()},loadAdditionalHotelResultsPage:function(a,b,d){a>this.lastPage&&(a=
this.lastPage);if(this.selectedPage<a||b){d="mchr=SHOW_MULTICITY_ADDITIONAL_HOTEL_RESULTS&selectedPage="+(a+"&sortType="+this.sortType+"&ascendingOrder="+this.ascendingOrder+"&cityCounter="+d);var e=this;this.selectedPage=a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",d,null,null,function(d){d=e.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text,title:d.ADDITIONAL_HOTELS_LOADING_ERROR_TITLE}):(b?$.hook("hotels-target").html(this.responseText):$.hook("hotels-target").append(this.responseText),e.initHotelRatingTooltips(),e.initShopCardTooltips(),e.initLearnMoreLink(),e.updateShowMoreButton(),e.initializeHotelAdvisary(),e.initializeChatLink(),e._loadMap(),$(window).trigger("ct.showmore.opening"),$namespace.Application.initTurnToTeasers(),$namespace.TabOrder.updatePageTabOrder(),b?b():e.setFocusOnFirstNewlyLoadedHotel(a))},
null)}},setFocusOnFirstNewlyLoadedHotel:function(a){var b=$.hook("hotels-target").children("DIV"),d=$(b[a-1]).find("h3:first");d.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();d.focus();d.on("blur",function(a){d.attr("tabindex","-1").removeAttr("data-taborder");d.off("blur")})},_loadMap:function(){var a="mchr=SHOW_MULTICITY_HOTEL_LOCATIONS_DATA&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;a+="&cityCounter="+$('a[data-tab="map-tab"]').data("city-index");
var b=this;this.ascendingOrder="3"==this.sortType||"4"==this.sortType?!1:!0;$namespace.AjaxUtil.makeAjaxCall("multiCityHotelResults.act",a,null,null,function(a){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(b.locationsData=a||{},utils.isArray(a)&&(a.map(function(a,b){a.isSelected=0===b?!0:!1;a.index=b+1}),b.collection=new $namespace.Collection.HotelCollection(a),b.initializeMap()),b.deselectLocation(b.collection.findWhere({isSelected:!0})),b.selectLocation(b.collection.get(0)))},
null)},_onMapTabClick:function(a){a.preventDefault();a.stopPropagation();$("#label-view-map").hide();$("#label-view-map").attr("tabindex","-1");$("#label-view-list").css("display","inline-flex");$("#packageSearchMap").show();$(window).trigger("ct.section.toggling");this.liveContainer.text(this.module.TranslationTexts.ACCESSIBILITY_SELECTED_MAP_VIEW);this._clearLiveText();$namespace.Analytics.trackEvent("Hotel_Results","Click","Map_Icon");setTimeout(function(){$('a[data-tab="list-tab"]').focus()},
1)},_onListTabClick:function(a){a.preventDefault();a.stopPropagation();$("#label-view-list").hide();$("#label-view-map").css("display","inline-flex");$("#packageSearchMap").hide();$(window).trigger("ct.section.toggling");this.liveContainer.text(this.module.TranslationTexts.ACCESSIBILITY_SELECTED_LIST_VIEW);this._clearLiveText();$namespace.Analytics.trackEvent("Hotel_Results","Click","List_Icon");setTimeout(function(){$('a[data-tab="map-tab"]').focus()},1)},_clearLiveText:function(){setTimeout($.proxy(function(){this.liveContainer.text("")},
this),removeLiveTextDelay)},initializeMap:function(){if(null!=this.collection&&void 0!=this.collection.get(0)){var a=this.collection.get(0).attributes.latitude;var b=this.collection.get(0).attributes.longitude;a=new google.maps.LatLng(a,b);this.googleMap=new google.maps.Map(this.ui.map[0],{mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,zoom:13,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,
fullscreenControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.fullscreenControl,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,zoomControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.zoomControl,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],center:a});this.showMarkers();this.bindMarkers();this.selectLocation(this.collection.get(0));google.maps.event.addListener(this.googleMap,"tilesloaded",
function(){setTimeout(function(){$("#hotel_map").find('iframe,a,button, div[tabindex="0"]').attr("tabindex","-1")},$namespace.WaitForElement.TIME_TO_WAIT)})}},showMarkers:function(){var a=this,b=new google.maps.LatLngBounds;this.collection.each(function(d){d=d.get("marker");b.extend(d.getPosition());d.setMap(a.googleMap)})},bindMarkers:function(){var a=this;this.collection.each(function(b){var d=b.get("index");b=b.get("marker");google.maps.event.addListener(b,"click",function(){a.toggleHotels(d)})})},
repositionMap:function(a){google.maps.event.trigger(this.googleMap,"resize");this.googleMap.panTo(a.getPosition())},toggleHotels:function(a){this.deselectLocation(this.collection.findWhere({isSelected:!0}));this.selectLocation(this.collection.findWhere({index:a}))},deselectLocation:function(a){a.set("isSelected",!1)},selectLocation:function(a){a.set("isSelected",!0);var b=a.get("marker");this.repositionMap(b);this.loadSelectedHotelFromMap(a)},loadSelectedHotelFromMap:function(a){a="mchr=SHOW_MULTICITY_MAP_SELECTED_HOTEL_DISPLAY&uid="+
a.get("uid")+"&updateAllowed=true";a=a+"&hotelDisplayTarget=map&cityCounter="+$('*[data-tab="map-tab"]').data("city-index");var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",a,null,"select_hotel_map",function(){b.initHotelRatingTooltips();b.initShopCardTooltips();b.initLearnMoreLink();$(window).trigger("ct.showmore.opening");$namespace.Application.initTurnToTeasers();$namespace.TabOrder.updatePageTabOrder()},null)},initHotelRatingTooltips:function(){this.hotelRatingLinks=
$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length){var a=$(this.hotelRatingLinks[0]);this.hotelRatingsTooltip||(this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}));a.off("click");for(a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}},_onSelectServiceMealPlanClick:function(a){var b=$(a.currentTarget);a="mchr=SELECT_MULTICITY_SERVICE_MEAL_PLAN&serviceUid="+
b.data("serviceuid");a+="&uid="+b.data("uid");a+="&cityCounter="+b.data("city-index");a+="&sortType="+this.sortType;a+="&ascendingOrder="+this.ascendingOrder;var d=b.attr("id");b=$(".sidebar-column").find("div.active");var e=null;1===b.length&&(e=b.attr("data-id"));$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityHotelResults.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();
var a=$("#"+d);setTimeout(function(){a.focus()},1);e&&$(".sidebar-column").find("[data-id="+e+"]").find(".accordion-button").trigger("open-instant")},null)},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var b=this,d=$(this).data("destination"),e=$(this).data("citycode"),f=$(this).data("hotelid");if(void 0!=$(target).attr("data-hotelName"))var g=$(target).attr("data-hotelName").split(",")[0];
var h=$(this).data("megatip"),k="";k=$(".dynamicPackageId").first().val();var l=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);k=("true"!=k?"mcoh=SHOW_OFFER_HOTEL_DETAIL_INFO":"mcoh=SHOW_DYNAMIC_HOTEL_DETAIL_INFO")+("&destination="+d)+("&cityCode="+e);k+="&hotelId="+f;k+="&hotelName="+g;null!=l&&(k+="&displayReviewsAccordion=",k+=l.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityOverviewHotels.act",
k,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+h).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,
b){$(b).on("click",function(a){a=$(b).find("div.accordion-item")[0];var d=$(b).find("div.headers")[0];a&&!$(a).hasClass("active")&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"Hotel_Rooms",label:f+"_"+d.innerText})})});b.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));b.tabSwitcher.initialize();b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,d,e){b.currentTab=a;!0!==e&&$(".panel.active").focus();"features-tab"==a?$namespace.Analytics.trackEvent("Hotel_Property_Features",
"click",f):"activities-tab"==a&&$namespace.Analytics.trackEvent("Hotel_Property_Activities","click",f)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f));b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-70)},50);""==$("#hotelRoomFeatureTabData").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden");""==$("#hotelPointOfInterestTabData").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},
null,"")})},trackGA:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/vp/booking/searchHotels/"+a+"/"+b+"/"+d})},trackAdobe:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"vacation package|Hotels",eVar2:"vacation package",eVar74:"/vp/booking/searchHotels/"+
a+"/"+b+"/"+d})},_trackAllAccordion:function(a,b){$(a.currentTarget);a=$(".hotelIdValue").first().val();var d=$("#multiCityHotelResults").data("package-id");"Overview"==b?$namespace.Analytics.trackEvent("Hotel_Overview","click",a):"Property"==b?$namespace.Analytics.trackEvent("Hotel_Property","click",a):"Dining"==b?$namespace.Analytics.trackEvent("Hotel_Dining","click",a):"Rooms"==b?$namespace.Analytics.trackEvent("Hotel_Rooms","click",a):"Map"==b?$namespace.Analytics.trackEvent("Hotel_Map","click",
a):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&$namespace.Analytics.trackEvent("Hotel_Hotel_Reviews",a,d)},trackButtonAccordion:function(a,b){b.hasClass("buttonRoomAccordion")&&(a=$("#multiCityHotelResults").data("package-id"),$namespace.Analytics.trackEvent("Hotel_Room_Rate","Click",a))},initializeHotelAdvisary:function(){this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageHotelResults",hotelId:$(".hotelIdValue").first().val()})})},
initializeChatLink:function(){this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/searchHotels/"+$("#multiCityHotelResults").data("destination")+"/"+$("#multiCityHotelResults").data("region")+"/"+$("#multiCityHotelResults").data("package-id"))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};validate=$namespace.Validation||{};var isTermsConditionChecked=!1,isFirstFormFieldFocusActive=!1,destination,city,packageId,totalRooms,adultThresholdAge,_referenceDate,_departureDate,_returnDate,FREQUENT_FLYER_NUMBER_REGEX=/^[A-Z0-9]{1,32}$/,REDRESS_NUMBER_REGEX=/^[0-9]{7}$/,KNOWN_TRAVELER_NUMBER_REGEX=/^[A-Z0-9]{9}$/,MARGIN_TOP_PIXEL=400;$namespace.View=$namespace.View||{};
$namespace.View.MultiCityTravelerInfoView=Backbone.View.extend({el:"#multiCityTravelerInfo",ui:{chatLink:null},isFirstFormFieldFocusActive:!1,events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="continueToNext"]':"_onContinueClick",'click [data-hook="frequentFlyerAccordion"]':"_onAccordionClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation",'click [data-hook="showless-trigger"]':"_readLessInformation",'click [data-hook="accept-traveler-info-terms"]':"_onTermsAndConditionsClick",
'keypress input[data-hook="name-field"]':"_onNameFieldKeyPress",'click [data-hook="traveler-info-terms-conditions"]':"_onTermsAndConditionsModalClick",'focusout [data-hook="name-field"], [data-hook="frequent-flyer-number"], [data-hook="known-traveler-number"], [data-hook="redress-number"]':"_onInputFocusOut",'change [data-hook="drop-down"]':"_onSelectDropDownChange",'focusin [data-hook="drop-down"]':"_onSelectDropDownFocusIn",'focusout [data-hook="drop-down"]':"_onSelectDropDownFocusOut",'click [data-hook="drop-down"]':"_onSelectDropDownClick",
'keypress [data-hook="frequent-flyer-number"]':"_onFrequentFlyerKeyPress",'keyup [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'focusout [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'cut [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'paste [data-hook="frequent-flyer-number"]':"_onModifyFrequentFlyerNumber",'keypress [data-hook="redress-number"]':"_onRedressNumberKeypress",'keypress [data-hook="known-traveler-number"]':"_onKnownTravelerNumberKeypress",
'click [id^="traveler_accordion-button"]':"_openCloseTravelerAccordionOnClick",'keypress [id^="traveler_accordion-button"]':"_openCloseTravelerAccordionOnEnterEvent",'click [data-hook="continueToNextFromBottom"]':"_onContinueClick",'click [data-hook="go_back"]':"_onBackLinkTraveler"},validator:{title:{pattern:/^[a-zA-Z\\.]{0,6}$/},firstName:{pattern:/^[A-Z_ \\'\\.\\-]{1,50}$/},middleName:{pattern:/^[A-Z_ \\'\\.\\-]{1,50}$/},lastName:{pattern:/^[A-Z_ \\'\\.\\-]{1,50}$/},suffix:{pattern:/^[a-zA-Z\\.]{0,5}$/},
gender:{pattern:/^[1-2]$/},dateOfBirth:{pattern:/^([1-9]|1[012])\/([1-9]|[12][0-9]|3[01])\/(19|20)\d\d$/}},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;var b=this;totalRooms=a.totalRooms;adultThresholdAge=a.adultThresholdAge;_referenceDate=a.referenceDate;_departureDate=a.departureDate;_returnDate=a.returnDate;this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",
this.trackEventAccordion);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink)this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewTravelerInformation/"+destination+"/"+city+"/"+packageId)});$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));
this.$el.find("input").on("input",function(a){$namespace.Utils.hasValueChanged(a.target)&&b._removeError($(a.currentTarget))});this.$el.find('[data-hook="frequentFlyerAccordion"]').each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED||$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED)&&this.$el.find('[data-hook="frequentFlyerAccordion"]').each(utils.eachUninitialized(function(a,
b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&this._initTravelerNumberTooltips();$(window).on("resize orientationchange",$.proxy(this._onResize,this));$(".traveler-info-tsa h2").addClass("displayNone");$(".traveler-info-tsa a").addClass("external-link");$(".traveler-info-tsa a").attr("id","external_link");$(".traveler-info-tsa a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");
$(this).removeAttr("target")});$(".external-link").on("click",b._checkTermsAndConditionLinksClick);$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$(".showmore-content .blue-bullets li").each(function(a,b){$(b).find("a").attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder();1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):
$(b).attr("id","desktopReadMoreLink"),$(b).attr("tabindex","-1"))});$(window).load(function(){$("#accept-traveler-info-terms").removeAttr("checked")});$(".accordion-item").removeClass("accordion-item-current");$(window).load(function(){$("form").get(0).reset();$("html, body").animate({scrollTop:$("#multiCityTravelerInfo").offset().top-MARGIN_TOP_PIXEL},100)});this.updateTravelerAccordionState();this.trackAdobe();this.trackGA();$('[data-hook="go_back"]').attr("data-state","traveler");$(".termsAndConditions-text-and-links").attr("id",
"termsAndConditions-text-and-links");$(".termsAndConditions-link").removeAttr("id");$(".termsAndConditions-link").removeAttr("role");$(".readMore").removeAttr("role");$(".readLess").removeAttr("role");$(".backtopreviouspage").removeAttr("role");$("#external_link").removeAttr("role")},_onBackLinkTraveler:function(a){a.preventDefault();"true"==sessionStorage.visitedFightOrSpl?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multicityTravelerInfo.act",
"mcti=SHOW_RESET_WARNING",null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=new $namespace.Widgets.Confirm(this.responseText,function(){sessionStorage.visitedFightOrSpl=!1;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE,
["true"])},function(){b.hide()});b.show();setTimeout(function(){$(".stayOnButton").focus()},0)}},null)):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE,["true"])},_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Round-Trip","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?
$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Hotel","Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Activities","Click",
"Expand"):b.hasClass("multitiCityTIAccordionTab")&&$namespace.Analytics.trackEvent("VP_Traveler_Information_Results_Multi-City","Click","Expand")},_onTermsAndConditionsClick:function(a){a=$(a.currentTarget);isTermsConditionChecked=!1;a.is(":checked")&&(isTermsConditionChecked=!0,a.removeClass("error"),$(".termsAndConditions-text-and-links").removeClass("darkRedLabel error"),$(".termsAndConditions-link").removeClass("darkRedLabel error"),$("#accept-traveler-info-terms-error").remove())},_showCancellationPolicyModal:function(){var a=
$("#multiCityTravelerInfo").data("package-id");$namespace.Analytics.trackEvent("Traveler_Information_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_addError:function(a,b,d,e,f){var g=a.attr("id").substring(0,a.attr("id").lastIndexOf("_"))+"_error";this._gaTrackEventError(a,e,f);a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" data-test='+
g+' class="error no-outline" id="'+a.attr("id")+'_error">'+b+"</label>");d&&!$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED&&$("#"+a.attr("id")+"_error").addClass("dob-error");$(window).trigger("resize");isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,$namespace.DomUtil.scrollToMiddle(a[0]),a.focus())},_calculateAgeInYears:function(a,b){var d=a.getFullYear()-b.getFullYear(),e=a.getMonth()-b.getMonth();(0>e||0===e&&a.getDate()<b.getDate())&&d--;return d},_calculateAgeInMonths:function(a,
b){var d=12*(a.getFullYear()-b.getFullYear()),e=a.getMonth()-b.getMonth();d+=e;(0>e||0===e&&a.getDate()<b.getDate())&&d--;return d},_addDOBError:function(a,b,d,e){var f=a.attr("id").substring(0,a.attr("id").lastIndexOf("_"))+"_error";this._gaTrackEventError(a,d,e);$(".traveler-dob-drop-down-"+a.data("traveler-count")).removeClass("form-group");$(".traveler-dob-drop-down-common-error-"+a.data("traveler-count")).html('<label tabindex="-1" class="error no-outline dob-error" data-test='+f+' id="'+a.attr("id")+
'_error">'+b+"</label>");a.addClass("error common-error");a.attr("aria-describedby",a.attr("id")+"_error");$("#birth_day_"+a.data("traveler-count")).addClass("error common-error");$("#birth_day_"+a.data("traveler-count")).attr("aria-describedby",a.attr("id")+"_error");$("#birth_year_"+a.data("traveler-count")).addClass("error common-error");$("#birth_year_"+a.data("traveler-count")).attr("aria-describedby",a.attr("id")+"_error");$(window).trigger("resize");isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=
!0,a.data("locale")?$("#birth_day_"+a.data("traveler-count")).focus():a.focus())},_addFlightBasedChildDOBError:function(a,b){var d=this.module.TranslationTexts;1==$("#multiCityTravelerInfo").data("is-booking-has-flights")?this._addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_airlines_are_very_strict_about_birthdates_and_ages_change_fees_may_apply_if_the_pnr_is_incorrect_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",
b):this._addDOBError(a,$namespace.MessageUtil.prefixError(d.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT),"there_is_a_discrepancy_between_the_age_provided_at_search_and_the_date_of_birth_please_correct_the_date_of_birth_if_the_date_of_birth_is_correct_please_return_to_the_search_screen_and_correct_the_age",b)},_removeDOBError:function(a){$(".traveler-dob-drop-down-"+a.data("traveler-count")).addClass("form-group");$(".traveler-dob-drop-down-common-error-"+a.data("traveler-count")).empty();
a.removeClass("error common-error");a.removeClass("common-error");a.removeAttr("aria-describedby");$("#birth_day_"+a.data("traveler-count")).removeClass("error");$("#birth_day_"+a.data("traveler-count")).removeClass("common-error");$("#birth_day_"+a.data("traveler-count")).removeAttr("aria-describedby");$("#birth_year_"+a.data("traveler-count")).removeClass("error");$("#birth_year_"+a.data("traveler-count")).removeClass("common-error");$("#birth_year_"+a.data("traveler-count")).removeAttr("aria-describedby");
$("#birth_month_"+a.data("traveler-count")).removeClass("error");$("#birth_month_"+a.data("traveler-count")).removeClass("common-error");$("#birth_month_"+a.data("traveler-count")).removeAttr("aria-describedby");$(window).trigger("resize")},_gaTrackEventError:function(a,b,d){$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?a="Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+
"/HF/Traveler_Information":($namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED),a="Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Traveler_Information");b=b+"_traveler_"+d;d=$("#multiCityTravelerInfo").data("package-id");$namespace.Analytics.trackEvent(a,b,d)},_openAccordion:function(a){if(a.length&&!a.hasClass("active")){var b=a.children(".accordion-header").children(".accordion-button"),d=a.children(".accordion-content");
a.closest(".accordion")[0].accordionMenu.open(a,b,d)}},_validateFrequentFlyerNumbers:function(a,b){var d=!0,e=this;$("#frequentFlyerAccordionContent_"+a).find(".frequent-flyer-row").each(function(f,g){f=$(g).find(".frequent-flyer-number input");e._removeError(f);f.val().trim()&&!f.val().trim().match(FREQUENT_FLYER_NUMBER_REGEX)&&(e._openAccordion($(g).closest(".accordion-item")),e._addError(f,$namespace.MessageUtil.prefixError(b.TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE),!1,"frequent_flyer_number_must_be_alphanumeric_only",
a),d=!1)});return d},_validateRedressNumber:function(a,b){var d=!0,e=$("#redress_number_"+a);this._removeError(e);var f=e.length&&e.val().length?e.val().trim():!1;f&&!f.match(REDRESS_NUMBER_REGEX)&&(this._openAccordion(e.closest(".accordion-item")),this._addError(e,$namespace.MessageUtil.prefixError(b.TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE),!1,"redress_number_must_be_7_digits_numbers_only",a),d=!1);return d},_validateKnownTravelerNumber:function(a,b){var d=!0,e=$("#known_traveler_number_"+a);this._removeError(e);
var f=e.length&&e.val().length?e.val().trim():!1;f&&!f.match(KNOWN_TRAVELER_NUMBER_REGEX)&&(this._openAccordion(e.closest(".accordion-item")),this._addError(e,$namespace.MessageUtil.prefixError(b.KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE),!1,"known_traveler_number_must_be_9_characters_alphanumeric_only",a),d=!1);return d},_validateTravelerInfoForm:function(){var a=!0;isFirstFormFieldFocusActive=!1;for(var b=this.module.TranslationTexts,d=$("#leadTraveler").data("travelers"),e=1,f=0,g=this.validator,h=0;h<
d;h++){var k=$("#title_"+e),l=$.trim(k.val());this._removeError(k);null==l||""==l?(this._addError(k,$namespace.MessageUtil.prefixError(b.TRAVELER_TITLE_ERROR_MESSAGE),!1,"title_is_required",e),a=!1):g.title.pattern.test(l)||(a=!1,this._addError(k,$namespace.MessageUtil.prefixError(b.INVALID_TITLE),!1,"title_is_invalid_traveler",e));k=$("#first_name_"+e);var p=$.trim(k.val());this._removeError(k);if(null==p||""==p)this._addError(k,$namespace.MessageUtil.prefixError(b.TRAVELER_FIRST_NAME_ERROR_MESSAGE),
!1,"first_name_is_required",e),a=!1;var q=$("#last_name_"+e),r=$.trim(q.val());this._removeError(q);""==r||null==r?(this._addError(q,$namespace.MessageUtil.prefixError(b.TRAVELER_LAST_NAME_ERROR_MESSAGE),!1,"last_name_is_required",e),a=!1):2>r.length&&(this._addError(q,$namespace.MessageUtil.prefixError(b.TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE),!1,"last_name_should_contain_at_least_2_characters",e),a=!1);q=$("#middle_name_"+e);var v=$.trim(q.val());q=$("#suffix_"+e);100<(l+" "+p+" "+v+" "+r+" "+
$.trim(q.val())).length&&(this._removeError(k),this._addError(k,$namespace.MessageUtil.prefixError(b.TRAVELER_NAME_MAX_CHARACTERS_MESSAGE),!1,"passenger_name_should_not_cross_100_characters",e),a=!1);l=$("#gender_"+e);k=$.trim(l.val());this._removeError(l);null==k||""==k?(this._addError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_GENDER_ERROR_MESSAGE),!1,"gender_is_required",e),a=!1):g.gender.pattern.test(k)||(a=!1,this._addError(l,$namespace.MessageUtil.prefixError(b.INVALID_GENDER),!1,"gender_is_invalid_traveler",
e));l=$("#suffix_"+e);q=$.trim(l.val());this._removeError(l);null==q&&""==q||g.suffix.pattern.test(q)||(a=!1,this._addError(l,$namespace.MessageUtil.prefixError(b.INVALID_SUFFIX),!1,"suffix_is_invalid_traveler",e));k=!0;l=$("#birth_month_"+e);if(l.data("locale")){q=$("#birth_day_"+e);this._removeError(q);if(null==q.val()||""==q.val())this._addError(q,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_DAY_ERROR_MESSAGE),!0,"day_of_date_of_birth_is_required",e),k=a=!1;this._removeError(l);if(null==l.val()||
""==l.val())this._addError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_MONTH_ERROR_MESSAGE),!0,"month_of_date_of_birth_is_required",e),k=a=!1}else{this._removeError(l);if(null==l.val()||""==l.val())this._addError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_MONTH_ERROR_MESSAGE),!0,"month_of_date_of_birth_is_required",e),k=a=!1;q=$("#birth_day_"+e);this._removeError(q);if(null==q.val()||""==q.val())this._addError(q,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_DAY_ERROR_MESSAGE),
!0,"day_of_date_of_birth_is_required",e),k=a=!1}var n=$("#birth_year_"+e);this._removeError(n);if(null==n.val()||""==n.val())this._addError(n,$namespace.MessageUtil.prefixError(b.TRAVELER_DOB_YEAR_ERROR_MESSAGE),!0,"year_of_date_of_birth_is_required",e),k=a=!1;if(k){v=$("#traveler_"+e).data("traveler-type");k=$("#traveler_"+e).data("traveler-age");var t=$("#dynamicPackageCarIncluded").val();r=new Date(_departureDate);p=new Date(_returnDate);n=l.val()+"/"+q.val()+"/"+n.val();q=new Date(n);this._removeDOBError(l);
g.dateOfBirth.pattern.test(n)||(a=!1,this._addDOBError(l,$namespace.MessageUtil.prefixError(b.INVALID_DOB),"date_of_Birth_is_invalid",e));if(0==v)p=this._calculateAgeInYears(r,q),0==f&&(f=p),18>p&&(this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",e),a=!1);else if(1==v)p=this._calculateAgeInYears(r,q),$("#traveler_"+e).data("passenger-type"),
18<p?(this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",e),a=!1):p!=k&&(this._addFlightBasedChildDOBError(l,e),a=!1);else{v=$("#multiCityTravelerInfo").data("is-booking-has-flights");var u=$("#traveler_"+e).data("infant-on-seat");(new Date(n)).setFullYear(q.getFullYear()+2);v?12>k?(k=this._calculateAgeInMonths(r,q),11<k&&(this._addFlightBasedChildDOBError(l,
e),a=!1),0>k&&(p=this._calculateAgeInMonths(p,q),0>p&&(this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1))):u?(k=this._calculateAgeInMonths(r,q),12>k?(this._addFlightBasedChildDOBError(l,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(l,e),a=!1)):(k=this._calculateAgeInMonths(r,q),p=this._calculateAgeInMonths(p,q),23<p?(this._addFlightBasedChildDOBError(l,e),a=!1):12>k&&(this._addFlightBasedChildDOBError(l,
e),a=!1)):"Infant"==$("#traveler_"+e).data("passenger-type")?12>k?(r.getTime()===q.getTime()&&(this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1),k=this._calculateAgeInMonths(r,q),11<k&&(this._addFlightBasedChildDOBError(l,e),a=!1),0>k&&(p=this._calculateAgeInMonths(p,q),0>p?this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"):
this._addFlightBasedChildDOBError(l,e),a=!1)):(k=this._calculateAgeInMonths(r,q),12>k?(this._addFlightBasedChildDOBError(l,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(l,e),a=!1)):0==k?(r.getTime()===q.getTime()&&(this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"),a=!1),k=this._calculateAgeInMonths(r,q),11<k&&(this._addFlightBasedChildDOBError(l,e),a=!1),0>k&&(p=this._calculateAgeInMonths(p,q),0>p?
this._addDOBError(l,$namespace.MessageUtil.prefixError(b.TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE),"date_of_birth_cannot_be_a_future_date"):this._addFlightBasedChildDOBError(l,e),a=!1)):(k=this._calculateAgeInMonths(r,q),12>k?(this._addFlightBasedChildDOBError(l,e),a=!1):23<k&&(this._addFlightBasedChildDOBError(l,e),a=!1))}}$namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED&&(this._validateFrequentFlyerNumbers(e,b)||(a=!1));$namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED&&
(this._validateRedressNumber(e,b)||(a=!1),this._validateKnownTravelerNumber(e,b)||(a=!1));a||this.showAccordionFocus(e);e++}if(25>f&&"true"==t&&a){var w=this;d=function(){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText,function(d){d=window.event||d;d.target||(d.target=d.srcElement);d=d.target.innerText;"View Hotel + Flight Deals"===d?($namespace.DomUtil.createCookie($namespace.CookieConstants.COOKIE_VALUE_TRAVELLER_INFO_PAGE_POP_UP),
window.location.href=$namespace.Configuration.webLoc+"/"):"Adjust My Age"===d&&(d=$("#birth_month_1"),w._addDOBError(d,$namespace.MessageUtil.prefixError(b.TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE),"please_verify_that_the_date_of_birth_entered_for_this_traveler_is_correct_the_age_does_not_match_the_type_for_the_traveler",1),a=!1)})).show()}}(this.module);a=!1;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multicityTravelerInfo.act","mcti=LOAD_TRAVELER_INFO_DOB_ERROR",null,null,d,null)}isTermsConditionChecked||
(d=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HF/HF_Traveler_Information_Error":$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT_CAR?"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+
"/HFC_Traveler_Information_Error":"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/VP_Traveler_Information_Error",e=$("#multiCityTravelerInfo").data("package-id"),$namespace.Analytics.trackEvent(d,"please_accept_the_terms_conditions_by_selecting_the_checkbox",e),$("#accept-traveler-info-terms").addClass("darkRedLabel error"),$(".termsAndConditions-text-and-links").addClass("darkRedLabel error"),$(".termsAndConditions-link").addClass("darkRedLabel error"),$("#accept-traveler-info-terms-error").remove(),
$("#accept-traveler-info-terms").after('<label tabindex="-1" class="darkRedLabel error no-outline" data-test="travelerinfotermserror"  id="accept-traveler-info-terms-error">'+$namespace.MessageUtil.prefixError(b.TERMS_AND_CONDITIONS_ERROR_MESSAGE)+"</label>"),$("#accept-traveler-info-terms").attr("aria-describedby","accept-traveler-info-terms-error"),$(window).trigger("resize"),isFirstFormFieldFocusActive||(isFirstFormFieldFocusActive=!0,$("#accept-traveler-info-terms").focus()),a=!1);return a},_initDayDropDown:function(a){if(a.data("show-days")){var b=
$("#birth_month_"+a.data("traveler-count")),d=$("#birth_day_"+a.data("traveler-count"));a=$("#birth_year_"+a.data("traveler-count"));var e=d.val(),f=!1;if(""!=b.val()&&""!=a.val()){b=(new Date(a.val(),b.val(),0)).getDate();$("#birth_day_"+a.data("traveler-count")).find("option:not(:first)").remove();for(var g=1;g<=b;g++)d.append("<option value='"+g+"'>"+g+"</option>"),g==e&&(f=!0)}else if(""!=b.val()&&""==a.val())for(b=(new Date((new Date).getFullYear(),b.val(),0)).getDate(),$("#birth_day_"+a.data("traveler-count")).find("option:not(:first)").remove(),
g=1;g<=b;g++)d.append("<option value='"+g+"'>"+g+"</option>"),g==e&&(f=!0);$("#birth_day_"+a.data("traveler-count")).val(f?e:"")}},_onSelectDropDownChange:function(a){a.preventDefault();var b=$(a.currentTarget);""!=b.val()&&(this._removeError(b),b.hasClass("common-error")&&this._removeDOBError(b));"title"==b.attr("name")&&this._onTravelerTitleChange(a);if(b.hasClass("airline-select")){var d=$(b).val();$(b).children().each(function(a,b){b.value===d?$(b).attr("selected","selected"):$(b).removeAttr("selected")})}this._initDayDropDown(b)},
_onSelectDropDownFocusIn:function(a){a.preventDefault()},_onSelectDropDownFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onSelectDropDownClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onAccordionClick:function(a){a.preventDefault();a=$("#multiCityTravelerInfo").data("package-id");$namespace.Analytics.trackEvent("VP_Traveler_Information_Frequent_Traveler_Number",
"Click",a)},_onContinueClick:function(a){a.preventDefault();if(this._validateTravelerInfoForm()){a=0;for(var b=$("#leadTraveler").data("travelers"),d=[],e=0;e<b;e++){var f=$("#traveler_"+(e+1)).data("traveler-id"),g=$("#traveler_"+(e+1)).data("traveler-type"),h=$("#title_"+(e+1)),k=$("#first_name_"+(e+1)),l=$("#middle_name_"+(e+1)),p=$("#last_name_"+(e+1)),q=$("#suffix_"+(e+1)),r=$("#gender_"+(e+1)),v=$("#birth_month_"+(e+1)),n=$("#birth_day_"+(e+1)),t=$("#birth_year_"+(e+1)),u=new Date(_referenceDate);
v=v.val()+"/"+n.val()+"/"+t.val();u=this._calculateAgeInYears(u,new Date(v));2==g&&(u=0);u&&parseInt(u)>=parseInt(adultThresholdAge)&&a++;f={paxId:f,paxType:g,paxTitle:h.val(),paxFirstName:k.val(),paxMedInitial:l.val(),paxLastName:p.val(),paxSuffix:q.val(),paxDateOfBirth:v,paxAge:u,paxGender:r.val()};if($namespace.GlobalConstants.CONSUMER_AIR_FREQUENT_FLYER_NUMBER_ENABLED){var w=[];$(".frequent-flyer-div-"+(e+1)+" .frequent-flyer-row").each(function(a){var b=$(this).children(".frequent-flyer-number");
a=b.find("input.frequent-flyer-airline-hidden-input").val();b=b.find("input.frequent-flyer-number-input").val();w.push({vendor:a,frequentTravelerNumber:b,vendorType:"Flight"})});f.paxFrequentTravelerDetails=w}if($namespace.GlobalConstants.CONSUMER_AIR_KNOWN_TRAVELER_NUMBER_ENABLED){g=$("#redress_number_"+(e+1));if(g=g.length&&g.val().length?g.val().trim():!1)f.paxRedressNumber=g;g=$("#known_traveler_number_"+(e+1));if(g=g.length&&g.val().length?g.val().trim():!1)f.paxKnownTravelerNumber=g}d.push(f)}var y=
JSON.stringify({PASSENGER_INFO:d}),z=this.module.TranslationTexts,x=function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multicityTravelerInfo.act","mcti=UPDATE_TRAVELER_INFO&passengerDetail="+a,null,null,function(a){a?(sessionStorage.visitedFightOrSpl=!0,1==$("#multiCityTravelerInfo").data("is-booking-has-flights")?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SEAT_MAP_SELECTION,["true"]):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,
["true"])):($namespace.DomUtil.setElementLoadingMask(!1,null,!1),a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase(),$namespace.MessageUtil.showMessage({type:1,text:"en_ca"==a||"fr_ca"==a?z.TRAVELER_COMMON_ERROR_MESSAGE_CA:z.TRAVELER_COMMON_ERROR_MESSAGE,title:z.TRAVELER_ERROR_COMMON}))},null)};0<parseInt(adultThresholdAge)&&totalRooms>a?($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multicityTravelerInfo.act","mcti=LOAD_ADULT_ACKNOWLEDGEMENT",
null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Modal(this.responseText,function(){b&&b.off("click")});var b=$("#acknowledgement-understand-btn");b.on("click",function(b){a.hide();x(y)});a.show();$(".modal-close").focus()},null)):x(y)}},_showMoreInformation:function(a){a=$(a.currentTarget);var b=$("#multiCityTravelerInfo").data("package-id");$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$namespace.Analytics.trackEvent("VP_Traveler_Information_Read More",
"Click",b);$(".blue-bullets li").each(function(a,b){$(b).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showless-trigger"]').removeClass("displayNone");$(window).trigger("resize");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();$(".external-link").removeAttr("role")},_readLessInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$(".external-link").removeAttr("data-taborder",
"document");$(".external-link").attr("tabindex","-1");$('[data-hook="showmore-content"]').addClass("showmore-content");$(".blue-bullets li").each(function(a,d){$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showmore-trigger"]').removeClass("displayNone");$(window).trigger("resize");$("#showMoreTrigger").focus();a=$("#multiCityTravelerInfo").data("package-id");$namespace.Analytics.trackEvent("VP_Traveler_Information_Read less","Click",a)},_onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},
_onFrequentFlyerKeyPress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},_onModifyFrequentFlyerNumber:function(a){var b=this;setTimeout(function(){b._modifyFrequentFlyerAirlineError(a)},0)},_modifyFrequentFlyerAirlineError:function(a){a=$(a.currentTarget);a.val(a.val().trim());a.val()?a.closest(".row").prev().addClass("form-required"):(a.closest(".row").prev().removeClass("form-required"),this._removeError(a.closest(".row").find(".airline-select")))},_onRedressNumberKeypress:function(a){return $namespace.Validation.checkNumericKeyCode(a)},
_onKnownTravelerNumberKeypress:function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)},_onTravelerTitleChange:function(a){a=$(a.currentTarget);var b=$("#gender_"+a.data("traveler-count"));"Mr"==a.val()||"Master"==a.val()?($(b).val("1"),this._removeError(b)):"Ms"==a.val()||"Mrs"==a.val()||"Miss"==a.val()?($(b).val("2"),this._removeError(b)):"1"!=$(b).val()&&"2"!=$(b).val()&&$(b).val("")},_checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},
_onTermsAndConditionsModalClick:function(a){var b=this;a=$(this.el).data("package-id");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multicityTravelerInfo.act","mcti=SHOW_TERMS_AND_CONDITIONS",null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=new $namespace.Widgets.Modal(this.responseText);$(".traveler-info-terms-conditions-modal a").addClass("text-underline external-link");$(".traveler-info-terms-conditions-modal a").attr("id",
"external_link");$(".traveler-info-terms-conditions-modal a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".traveler-info-terms-conditions-modal a").attr("data-taborder","document");$(".traveler-info-terms-conditions-modal a").last().attr("data-tab-last","true");$(".traveler-info-terms-conditions-modal").on("click",".external-link",b._checkTermsAndConditionLinksClick);a.show()},null);$namespace.Analytics.trackEvent("VP_Traveler_Information_Terms",
"Read",a)},_onInputFocusOut:function(a){a=$(a.currentTarget);a.val(a.val().trim().toUpperCase())},_initTravelerNumberTooltips:function(){$('a[data-tooltip="known-traveler-number-tooltip"], a[data-tooltip="redress-number-tooltip"]').each(function(a,b){b.travelerNumberTooltip||(b.travelerNumberTooltip=new $namespace.Widgets.Tooltip($(b)))})},updateTravelerAccordionState:function(){var a=$("#primaryTravelerContent");utils.Breakpoint.isMobile()?(a.removeClass("active"),a.find(".accordion-button:first").attr("aria-expanded",
"false"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")):(a.addClass("active"),a.find(".accordion-button:first").attr("aria-expanded","true"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg"))},trackAdobe:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"vacation package|Traveler Information",
eVar2:"vacation package",eVar74:"/vp/booking/viewTravelerInformation/"+a+"/"+b+"/"+d})},_openCloseTravelerAccordionOnEnterEvent:function(a){var b=a.which;if(13==b||32==b)a.preventDefault(),this._openCloseTravelerAccordion(a)},_openCloseTravelerAccordionOnClick:function(a){this._openCloseTravelerAccordion(a)},_openCloseTravelerAccordion:function(a){a=$(a.currentTarget);var b=a.data("pax-number");this.setErrorFocus=null;a.closest("div.accordion-item").hasClass("active")?this.hideAccordionFocus(b):this.showAccordionFocus(b);
$namespace.TabOrder.updatePageTabOrder()},showAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.addClass("active");a.find(".accordion-content:first").show();a.find(".accordion-button:first").attr("aria-expanded","true");a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg");null!=this.setErrorFocus&&this.setErrorFocus.focus()},hideAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.removeClass("active");a.find(".accordion-content:first").hide();
a.find(".accordion-button:first").attr("aria-expanded","false");a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")},trackGA:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/vp/booking/viewTravelerInformation/"+a+"/"+b+"/"+d})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};flightSeatMap=$namespace.FlightSeatMap||{};$namespace.View=$namespace.View||{};
$namespace.View.InterCityFlightResultsView=Backbone.View.extend({el:"#interCityFlightResult",ui:{resultsTarget:null,showMoreLink:null,departureTimeOptions:null,returnTimeOptions:null,departureTimeFields:null,returnTimeFields:null,stopsFilters:null,airlinesFilters:null,outboundAirportFilters:null,returnAirportFilters:null},flightsCount:0,selectedPage:1,searchParams:{uid:null,packageId:null,sortType:0,selectedPage:1,departureDateTakeoffLow:null,departureDateTakeoffHigh:null,departureDateArrivalLow:null,
departureDateArrivalHigh:null,returnDateTakeoffLow:null,returnDateTakeoffHigh:null,returnDateArrivalLow:null,returnDateArrivalHigh:null,selectedDepartureTimeOption:null,selectedReturnTimeOption:null,selectedStops:null,selectedAirlines:null,selectedOutboundAirports:null,selectedReturnAirports:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="backToPackageOverview"]':"_backToPackageOverview","click a#previousFlight":"_onPreviousFlight","click a#nextFlight":"_onNextFlight",
"click a.megatipLink":"_onClickMegatipLink",'change [id^="selectFlight"]':"_onSelectFlightSegmentClick",'click .flight-results-listing [data-hook="flightSelectButton"]':"_onSelectFlightClick","click a.btn-change-flight":"_onClickFlightButton","change select#flightsSelectSortType":"_onFlightsSortTypeChange",'click [data-hook="megatip-close"]':"_resetFlightsAccordion","click a.airline_baggage_policy":"_showExternalLinkPopup",'click [data-hook="show-more-flights-link"]':"_onShowMoreClick",'change #flights-airlines-filters input[type="checkbox"]':"_onFlightsAirlinesFiltersChange",
'click [data-hook="reset-flights-filters"]':"_onResetFilterClick",'change #flight-departure-date-filters [name="selectedDepartureTimeOption"]':"_onDepartureTimeOptionChange",'change #flight-departure-date-filters input[type="hidden"]':"_onFlightsTimeFieldsChange",'change #flights-stops-filters input[type="checkbox"]':"_onFlightsStopsFiltersChange","focusin select.dataList":"_onSelectFocusIn","focusout select.dataList":"_onSelectFocusOut",'change #flights-outbound-airport-filters input[type="checkbox"]':"_onOutboundFlightsAirportFiltersChange",
'click [data-hook="apply-flights-filters"]':"_closeFilterAcordian","click div.accordion-item ":"_onShowFiltersClick","click a.external-link ":"_onExternalLinkClick",'click [data-id="arrow"]':"_onselectFocusclick"},initialize:function(a){var b=$.extend({},a);this.controller=b.controller;this.module=a.module;this.$el.find("select").addClass("dataList");this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));a=b.accordion.content.attr("data-test");
$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?b.accordion.open(!0):b.accordion.close(!0)});this.$el.attr("data-package-id");this.ui.resultsTarget=$.hook("flights-results-target",this.$el);this.ui.matchingFlightCount=this.$("#matchingFlightCount");a=this.$el.find("[data-megatip='flight-details-megatip']");this.initializeInterCityMegaTip(a,!0);if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}$.each($('div[id^="select_flight-"]'),
function(a,b){new widgets.SelectWidget($(b))});$("#page_content").on("ct.accordion.opening",$.proxy(this._gaHandler,this));$.hook("parent-accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a)}));this.ui.outboundAirportFilters=this.$('#flights-outbound-airport-filters input[type="checkbox"]');this.ui.returnAirportFilters=this.$('#flights-return-airport-filters input[type="checkbox"]');this.ui.stopsFilters=this.$('#flights-stops-filters input[type="checkbox"]');
this.ui.airlinesFilters=this.$('#flights-airlines-filters input[type="checkbox"]');this.ui.showMoreLink=$.hook("show-more-flights-link",this.$el);this.selectedFlightItemUid=this.$('input[type="hidden"][name="selectedFlightItemUid"]').val();this.searchParams.packageId=this.$('input[type="hidden"][name="packageId"]').val();this.flightsCount=this.ui.matchingFlightCount.attr("data-flights-count");this.departureTakeoffSlider=new $namespace.Widgets.DateRangeSlider(this.$("#departure_takeoff_slider"));this.departureLandingSlider=
new $namespace.Widgets.DateRangeSlider(this.$("#departure_landing_slider"));this.ui.departureTimeFields=this.$('#flight-departure-date-filters input[type="hidden"]');this.ui.returnTimeFields=this.$('#flight-return-date-filters input[type="hidden"]');this.ui.stopsFilters=this.$('#flights-stops-filters input[type="checkbox"]');this.ui.airlinesFilters=this.$('#flights-airlines-filters input[type="checkbox"]');this.selectedPage=parseInt(this.ui.matchingFlightCount.attr("data-selected-page"));this.ui.departureTimeOptions=
this.$('#flight-departure-date-filters input[name="selectedDepartureTimeOption"]');this.ui.returnTimeOptions=this.$('#flight-return-date-filters input[name="selectedReturnTimeOption"]');this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();this.searchParams.selectedReturnTimeOption=this.ui.returnTimeOptions.filter(":checked").val();$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.updateShowMoreButton();this.initSlider();this.updateFilterValues();
a=this.$el.find("#flightListingContainer").attr("data-sort-type");this.flightsSelectSortType=new widgets.SelectWidget(this.$("#flights_select_sort_type"));this.$el.find("#flightsSelectSortType").val(a?a:"0");$("#includedFlightTo").attr("tabindex","-1").focus();a=$namespace.MessageUtil.getSessionValue("FLIGHT_HOTEL_MESSAGE",!0);if(!_.isEmpty(a)){var e=$(".hotelAlertMessage").removeClass("displayNone");e.find("> div").html(a);setTimeout(function(){e.find("> div").addClass("no-outline");e.find("> div").attr("tabindex",
"-1").focus()},100)}$("#flight-details-megatip .airLineTermAndCondions a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")});$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle("/booking/viewFlights/"+b.destinationCode+"/"+b.regionCode+"/"+b.packageId);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+
"|flights",v2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),v34:b.destinationCode,v74:"/vp/booking/viewFlights/"+b.destinationCode+"/"+b.regionCode+"/"+b.packageId})},_onExternalLinkClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_backToPackageOverview:function(a){$namespace.Analytics.trackEvent("Flights","Back_To_Overview",$("#flightListingContainer").data("package-id"),null);$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_PACKAGE_OVERVIEW_RESPONSIVE)},
_onResize:function(){$namespace.TabOrder.updatePageTabOrder()},_showExternalLinkPopup:function(a){a=$(a.currentTarget).data("airline-policy").trim();$namespace.Navigation.loadExternalUrl(a)},_gaHandler:function(a){a=$(a.target);var b=a.attr("data-ga");b&&(b=b?b.split("~"):["","",""],"expand"===b[2].toLowerCase()&&this._loadSeatmapTo(a),$namespace.Analytics.trackEvent(b[0],b[1],b[2],null))},_onClickFlightButton:function(){$("#headingAdditionalFlightsAvailable").focus().get(0).scrollIntoView({behaviour:"smooth",
block:"start"});window.scrollBy(0,-120);$namespace.Analytics.trackEvent("Flights_Results_Change_Flight_Button","Click",$("#flightListingContainer").data("package-id"),null);$("#headingAdditionalFlightsAvailable").attr("tabindex","-1");$("#headingAdditionalFlightsAvailable").focus();setTimeout(function(){$("#headingAdditionalFlightsAvailable").removeAttr("tabindex")},50);utils.Breakpoint.isDesktop()||$("#headingAdditionalFlightsAvailable").addClass("no-outline")},_resetFlightsAccordion:function(a){a=
$(a.target).closest(".megatip").attr("id");a=$("#"+a+" .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_loadSeatmapTo:function(a){a=a.closest(".megatip");var b=a.attr("data-uid"),d=a.find("div.tab-panels div.panel.active div.flight-seatmap table.fuselage"),e=a.find("div.tab-panels div.panel.active div.flight-seatmap div.error");a.find('select[id^="selectFlight"] option[value="flight-1-tab"]').attr("selected",!0).siblings().removeAttr("selected");
a.find('div[data-pane="flight-1-tab"]').addClass("active").show().siblings().removeClass("active").hide();a.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top","0");if(d.length||e.length){flightSeatMap.CurrentSeatMap.updateLegend();e.length||a.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px");$(window).scrollTop($('div.megatip[data-uid="'+b+'"] div.accordion.seatMap').offset().top);
a=this.$el.find('div.megatip[data-uid="'+b+'"]');b=a.find('select[id^="selectFlight"]');d=b.find("option:selected").index();e=b.find("option");var f=a.find("#previousFlight"),g=a.find("#nextFlight");0==d?(f.hide(),1==e.length?g.hide():g.show()):0<d&&d<e.length-1?(f.show(),g.show()):d==e.length-1&&(f.show(),g.hide());$namespace.Browser.isIpadOrAndroid()&&(a=a.find("p.airlineWarning"),a.is(":visible")?a.attr("tabindex","-1").focus():b.focus())}else a=a.find('select[id^="selectFlight"]').find(":selected").data("uid"),
flightSeatMap.loadFlightSeatMapContent(b,a,!0)},_onShowMoreClick:function(a){a.preventDefault();this.selectedPage+=1;this.searchParams.selectedPage=this.selectedPage;var b=this;this.fetchFlightsData({showLoadingMask:!0,callback:function(){$(window).trigger("ct.showmore.opening");b.setFocusOnFirstNewlyLoadedFlight()}});$namespace.Analytics.trackEvent("Flights_Results_Show_More","Click",this.flightsCount)},_onSelectFlightSegmentClick:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid"),
d=this.$el.find('div.megatip[data-uid="'+b+'"]');a=d.find('select[id^="selectFlight"]');var e=a.find("option:selected"),f=e.index(),g=e.val();e=e.text();d.find('div#flightSeatMapTabPanels div[data-pane="'+g+'"]').addClass("active").show().siblings().removeClass("active").hide();d.find("p.airlineWarning").hide().closest(".accordion-content").css("padding-top","0").find("label:first").css("margin-top","0");g=d.find("div#flightSeatMapTabPanels div.panel.active div#flightSeatMapContent table.fuselage");
var h=d.find("div#flightSeatMapTabPanels div.panel.active div#seatMapAndLegendContainer div.error");g.length||h.length?(flightSeatMap.CurrentSeatMap.updateLegend(),h.length||d.find("p.airlineWarning").show().closest(".accordion-content").css("padding-top","10px").find("label:first").css("margin-top","10px"),$(window).scrollTop($('div.megatip[data-uid="'+b+'"] div.accordion.seatMap').offset().top),b=a.find("option"),g=d.find("#previousFlight"),h=d.find("#nextFlight"),0==f?(g.hide(),1==b.length?h.hide():
h.show()):0<f&&f<b.length-1?(g.show(),h.show()):f==b.length-1&&(g.show(),h.hide()),utils.Breakpoint.isDesktop()?(d.find("div.flight-module-title > h3").attr("tabindex","-1").focus(),d.find("div.flight-module-title > h3").addClass("no-outline")):a.focus()):(f=d.find('select[id^="selectFlight"]').find(":selected").data("uid"),flightSeatMap.loadFlightSeatMapContent(b,f,!0));utils.updateLiveContainer("Changed to "+e);$namespace.Browser.isIpadOrAndroid()&&(d=d.find("p.airlineWarning"),d.is(":visible")?
d.attr("tabindex","-1").focus():a.focus())},_onSelectFlightClick:function(a){a.preventDefault();var b=this;a=$(a.currentTarget);var d=a.attr("data-uid"),e=a.attr("data-for-lip");a.attr("data-destinationCode");a.attr("data-regionCode");a.attr("data-packageId");var f=a.attr("data-airLineName"),g=$("#interCityFlightResult").attr("data-includedCity-index"),h=this.module.TranslationTexts;a="mcfc=LOAD_FLIGHT_PRICE_DIFF_POPUP&uid="+d+"&forLIP="+e;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",
a,null,null,function(a,l,p,q,r){$namespace.DomUtil.setElementLoadingMask(!1,null,!1,r);"true"==a?$namespace.Analytics.trackEvent("Flights_Results_Select","Click",f):$namespace.Analytics.trackEvent("Flights_Results_Select","Click",f+" - No change in price");if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("true"==l)if("false"==a)b.confirmSelectionChange(d,e,g);else{var k=new widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("Flights_Results",
"Continue","Change");k.hide();b.confirmSelectionChange(d,e,g)},function(){var a=$("#flightListingContainer").data("package-id");0<$(".package_diffrence").find('button[data-test="buttonModalNoThanks"]').data("package-diffrence")?$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Increase","Close",a,null):$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Decrease","Close",a,null);k.hide()});$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){k.show()},
300):k.show()}else"false"==a?b.confirmSelectionChange(q,e,g):"true"==p?(k=new widgets.Confirm(this.responseText,function(){k.hide();b.confirmSelectionChange(q,e,g)},b.loadMultiCitySelectedAndAdditionalFlightsPage(d,g)),$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){k.show()},300):k.show()):$namespace.MessageUtil.showSessionWarningMessage({title:h.FLIGHT_WARNING_TITLE,text:h.FLIGHT_CHANGED_WARNING_MESSAGE,button:h.FLIGHT_WARNING_CONTINUE_TEXT},b.loadMultiCitySelectedAndAdditionalFlightsPage,
!1)},null)},initializeInterCityMegaTip:function(a,b){var d=this,e=new $namespace.Widgets.Megatip(a);a[0].megatip=e;e.megatip.find('[data-hook="accordion"]').each(function(a,b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));b.accordion.close(!0)});a.addClass("initialized");b&&(a.on("click",$.proxy(e._onClick,e)),a.on("click",function(a){e.isActive&&(d._addAriaLevelOrRole(d.$el.find("div.airLineTermAndCondions h5"),"5","heading"),$namespace.Analytics.trackEvent("Flights_Results_View_Details",
"Click",$("#flightListingContainer").data("package-id"),null))}));this.initShopCardTooltips();return e},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_onPreviousFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');var d=b.find("option:selected").index();0<d&&(d="flight-"+
d+"-tab",b.val(d),b.find('option[value="'+d+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent("Flights_Results_Preview_Seat_Map","Click","Previous_Flight")},_onNextFlight:function(a){var b=$(a.currentTarget).closest(".megatip").attr("data-uid");b=this.$el.find('div.megatip[data-uid="'+b+'"]').find('select[id^="selectFlight"]');var d=b.find("option"),e=b.find("option:selected").index();e<d.length-1&&(d="flight-"+(e+2)+"-tab",
b.val(d),b.find('option[value="'+d+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));$namespace.Analytics.trackEvent("Flights_Results_Preview_Seat_Map","Click","Next_Flight")},_showCancellationPolicyModal:function(){var a=this.$el.attr("data-package-id");$namespace.Analytics.trackEvent("Flights_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?
$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},fetchFlightsData:function(a){var b=a?a.showLoadingMask:!0,d=a?a.resetClicked:!1,e=this.searchParams.departureDateTakeoffLow,f=this.searchParams.departureDateTakeoffHigh,
g=this.searchParams.departureDateArrivalLow,h=this.searchParams.departureDateArrivalHigh,k=this.searchParams.returnDateTakeoffLow,l=this.searchParams.returnDateTakeoffHigh,p=this.searchParams.returnDateArrivalLow,q=this.searchParams.returnDateArrivalHigh,r=this.searchParams.selectedDepartureTimeOption,v=this.searchParams.selectedReturnTimeOption,n=this.getCheckboxValues(this.ui.stopsFilters.not('[value="stopsAny"]')),t=this.getCheckboxValues(this.ui.airlinesFilters.not('[value="any"]')),u=this.getCheckboxValues(this.ui.outboundAirportFilters.not('[value="outboundone"]')),
w=this.getCheckboxValues(this.ui.returnAirportFilters.not('[value="returnone"]')),y=this.$el.find("#flightListingContainer"),z=y.attr("data-for-LIP"),x=y.attr("data-product-uid"),B=y.attr("data-package-id");y=this.$el.find("#flightsSelectSortType").val();var G=$("#interCityFlightResult"),H=G.attr("data-includedCity-index");G=G.attr("data-flight-uid");x="mcfc=LOAD_ADDITIONAL_FLIGHTS_RESULTS&uid="+x+"&forLip="+z+"&packageId="+B+"&resetClicked="+d+"&sortType="+y+"&selectedPage="+this.selectedPage;d||
(x+="&selectedStops="+n+"&selectedAirlines="+t+"&departureDateTakeoffLow="+e+"&departureDateTakeoffHigh="+f+"&departureDateArrivalLow="+g+"&departureDateArrivalHigh="+h+"&returnDateTakeoffLow="+k+"&returnDateTakeoffHigh="+l+"&returnDateArrivalLow="+p+"&returnDateArrivalHigh="+q+"&selectedDepartureTimeOption="+r+"&selectedReturnTimeOption="+v+"&selectedOutboundAirports="+u+"&selectedReturnAirports="+w);d={};d.cityCounter=H;d.flightItemUid=G;d.sortType=y;d.forLIP=z;d.selectedPage=this.selectedPage;
$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_MULTICITY_INTERCITY_FLIGHTS_RESULT,d,[d.cityCounter,d.flightItemUid,d.forLIP,d.sortType,d.selectedPage]);var K=this;utils.updateLiveContainer();b&&$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",x,null,null,function(d){b&&$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):
(K.ui.matchingFlightCount.attr("data-flights-count",d),K.flightsCount=d,K.updateMatchingFlightsTitle(),K.showFlightSearchResults(this.responseText),"function"===typeof a.callback&&a.callback())},null)},updateMatchingFlightsTitle:function(){var a=this.module.TranslationTexts,b=this.ui.matchingFlightCount.attr("data-flights-count");1==b?this.ui.matchingFlightCount.text(a.MATCHING_FLIGHTS_SINGULAR):(a=$namespace.TranslationUtil.replaceParameters(a.MATCHING_FLIGHTS_PLURAL,{resultNumber:b}),this.ui.matchingFlightCount.text(a))},
showFlightSearchResults:function(a){1==this.selectedPage?(this.ui.resultsTarget.html(a),$(window).trigger("ct.showmore.closing")):this.ui.resultsTarget.append(a);this.updateShowMoreButton();$namespace.TabOrder.updatePageTabOrder();this.initShopCardTooltips()},updateShowMoreButton:function(){var a=$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE,b=this.selectedPage*a,d=this.ui.matchingFlightCount.attr("data-flights-count");if(d>b){this.ui.showMoreLink.show();var e=this.module.TranslationTexts;d>=b+a?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(e.SHOW_MORE_RESULTS_BUTTON_TEXT,
{amount:a})):this.ui.showMoreLink.find("span").text(e.SHOW_MORE_BUTTON_TEXT)}else this.ui.showMoreLink.hide()},getCheckboxValues:function(a){var b=[];a.each(function(){var a=$(this);a.is(":checked")&&b.push(a.val())});return b.length?b.join(","):""},initSlider:function(){this.departureTakeoffSlider.resetSlider();this.departureLandingSlider.resetSlider()},updateFilterValues:function(){if(null!=$namespace.filteredFlightFilterInfoAsJson){var a=JSON.parse($namespace.filteredFlightFilterInfoAsJson),b=
a.stops;this.updateResultCountLabels($("#flights-stops-filters"),b);this.updateFilterCheckBoxes(this.ui.stopsFilters,b,"stopsAny");b=a.airlines;this.updateResultCountLabels($("#flights-airlines-filters"),b);this.updateFilterCheckBoxes(this.ui.airlinesFilters,b,"any");if(b=a.outboundAirports)this.updateResultCountLabels($("#flights-outbound-airport-filters"),b),this.updateFilterCheckBoxes(this.ui.outboundAirportFilters,b,"outboundone");if(a=a.returnAirports)this.updateResultCountLabels($("#flights-return-airport-filters"),
a),this.updateFilterCheckBoxes(this.ui.returnAirportFilters,a,"returnone")}},updateResultCountLabels:function(a,b){var d=this.module.TranslationTexts;a.find("label span.resultCount").each(function(a,f){a=$(f);f=a.attr("data-value");f=b[f];1===f?a.text(d.RESULT_TEXT_SINGULAR):(f=$namespace.TranslationUtil.replaceParameters(d.RESULT_TEXT_PLURAL,{resultNumber:f}),a.text(f))})},updateFilterCheckBoxes:function(a,b,d,e){e=a.filter('[value="'+d+'"]');a=a.not('[value="'+d+'"]');a.each(function(){var a=$(this),
d=a.attr("value");0==b[d]?(a.prop("checked",!1),a.prop("disabled",!0).attr("aria-disabled","true")):a.prop("disabled",!1).attr("aria-disabled","false")});a=a.filter(":checked");if(0==b[d]||0==a.length)e.prop("checked",!0),e.prop("disabled",!0).attr("aria-disabled","true")},_onFlightsSortTypeChange:function(a){var b=this;a=$(a.currentTarget).find(":selected").text();$namespace.Analytics.trackEvent("Flights_Results_Sort","Click",a);this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!0,callback:function(){var a=
b.module.TranslationTexts;switch(b.$el.find("#flightsSelectSortType").val()){case "0":var e=a.SORTED_BY_PRICE;break;case "1":e=a.SORTED_BY_COSTCO_RECOMMENDS;break;case "2":e=a.SORTED_BY_SHORTEST_FLIGHT;break;case "3":e=a.SORTED_BY_DEPARTURE_TIME;break;case "4":e=a.SORTED_BY_ARRIVAL_TIME}utils.updateLiveContainer(e)},resetClicked:!1})},confirmSelectionChange:function(a,b,d){var e=this,f=$(this.el).data("package-id"),g=$(".package_diffrence").find('button[data-test="buttonModalContinue"]').data("package-diffrence");
b="mcfc=CHANGE_FLIGHT_NEW_CHANGE_ITEM&uid="+a+"&forLIP="+b;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",b,null,null,function(b){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):e.validateAndContinue(a,b,d)},null);0<g?$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Increase","Continue",f,null):$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_Price_Decrease",
"Continue",f,null)},loadMultiCitySelectedAndAdditionalFlightsPage:function(){var a=$("#interCityFlightResult").attr("data-includedCity-index"),b=$("#interCityFlightResult").attr("data-flight-uid"),d=$("#interCityFlightResult"),e=$("#flightListingContainer").attr("data-for-LIP");d=d.attr("data-flight-uid");var f=$("#flightsSelectSortType").val();$namespace.AjaxUtil.makeAjaxCall("multiCityInterCityFlights.act","mcicf=LOAD_INTERCITY_FLIGHTS_RESULT&itemUid="+b+"&cityCounter="+a+"&selectedItemUid="+d+
"&sortType="+f+"&selectedPage="+this.selectedPage+"&forLip="+e,null,null,function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initializeOnMainContentReload())},null);$namespace.Analytics.trackEvent("VP_Flights_Results_Flight_Not_Confirmed_No_Change","Continue",$("#flightListingContainer").data("package-id"))},validateAndContinue:function(a,b,d){var e="mcfc=VALIDATE_INTERCITY_FLIGHT_ITEM_SELECTION&uid="+
a+"&cityCounter="+d,f=this,g=this.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFlightCards.act",e,null,null,function(e,k,l,p){if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else if("false"==e)if($namespace.DomUtil.setElementLoadingMask(!1,null,!0),"true"==p){var h=new widgets.Confirm(this.responseText,function(){h.hide();
$namespace.GlobalConstants.RESPONSIVE_VP_HOTEL_RESULTS_PAGE_ENABLED?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_MULTICITY_INTERCITY_FLIGHTS_RESULT+"_"+d+"_"+a):(DomUtil.disableElement("dataContent",!0),_newSingleCityFlightResultWorkflow&&SearchResults.setNewSingleCityFlightResultWorkflow(!1),HistoryNavigation.addHistory(PageHistoryConstants.HISTORY_SEARCH_RESULT_FLIGHT_TRANSPORTATION),AjaxUtil.makeAjaxCallWithWaitingDiv("searchResults.act","sr=LOAD_TRIP_SUMMARY_AND_SINGLE_CITY_HOTEL_RESULTS&loadUc=true",
null,"mainContent",callbackLoadTripSummary))},f.loadMultiCitySelectedAndAdditionalFlightsPage(a,d));$namespace.Browser.iPhone||$namespace.Browser.iPad?setTimeout(function(){h.show()},300):h.show()}else $namespace.MessageUtil.showSessionWarningMessage({title:g.FLIGHT_WARNING_TITLE,text:g.FLIGHT_CHANGED_WARNING_MESSAGE,button:g.FLIGHT_WARNING_CONTINUE_TEXT},f.loadMultiCitySelectedAndAdditionalFlightsPage(a,d),!1);else _.isEmpty(b)||$namespace.MessageUtil.setSessionValue("FLIGHT_HOTEL_MESSAGE",b),$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_MULTICITY_INTERCITY_FLIGHTS_RESULT+"_"+d+"_"+a)},null)},_onClickMegatipLink:function(a){var b=$(a.currentTarget);if(b.hasClass("initialized")){var d=b[0].megatip;d.isActive?d.hide():(d.show(),$namespace.Analytics.trackEvent("Flights_Results_View_Details","Click",$("#flightListingContainer").data("package-id"),null))}else{a=b.attr("data-uid");var e=b.attr("data-for-lip");a="mcfc=LOAD_FLIGHT_MEGATIP_CONTENT&uid="+a+"&forLIP="+e;var f=this;$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCall("multiCityFlightCards.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text});else{var a=$("#"+b.attr("data-megatip"));a.html(this.responseText);d=f.initializeInterCityMegaTip(b);a.find("select").addClass("dataList");d.show();f._addAriaLevelOrRole(f.$el.find("h2, h3"),"3","heading");$(".termsAndConditions a").each(function(a){$(this).attr("data-url",
$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link")});$namespace.Analytics.trackEvent("Flights_Results_View_Details","Click",$("#flightListingContainer").data("package-id"),null)}},null)}},_onFlightsAirlinesFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.airlinesFilters.filter('[value="any"]'),f=this.ui.airlinesFilters.not('[value="any"]'),g=$(a.currentTarget).attr("data-filter-name"),h={anyIsClicked:!1};"any"===
d?(f.prop("checked",!1),h.anyIsClicked=!0,h.others=f,h.any=e,$namespace.Analytics.trackEvent("Flights_Results_Filter_Airline","Click","Any")):0<f.filter(":checked").length?(e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Airline","Click",g)):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,
callback:function(){b.updateFilterValues();b.readUpdatedContents(h)},resetClicked:!1})},readUpdatedContents:function(a){var b=this.module.TranslationTexts,d=this.ui.matchingFlightCount.text();if(a.anyIsClicked)if(a.any.prop("disabled",!0).attr("aria-disabled","true"),$namespace.Browser.iPhone||$namespace.Browser.iPad)utils.updateLiveContainer(d);else{var e=$(a.others.not(":disabled")[0]);if(0<e.length){a=e.parent().find("label");var f=$("<span>",{"class":"ada-screenreader"}).text(d+". "+b.MOVE_TO_NEXT_CHECKBOX_TEXT);
a.prepend(f);setTimeout(function(){e.focus();setTimeout(function(){f.remove()},300)},300)}}else utils.updateLiveContainer(d)},_onResetFilterClick:function(a){var b=this;a=this.ui.airlinesFilters.filter('[value="any"]');var d=this.ui.airlinesFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="stopsAny"]');d=this.ui.stopsFilters.not('[value="stopsAny"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled",
"true");d.prop("checked",!1);a=this.ui.outboundAirportFilters.filter('[value="outboundone"]');d=this.ui.outboundAirportFilters.not('[value="outboundone"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);a=this.ui.stopsFilters.filter('[value="any"]');d=this.ui.stopsFilters.not('[value="any"]');a.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");d.prop("checked",!1);this._resetSlider();this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!0,
callback:function(){b.resetTimeValues();b.resetFilters();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_resetSlider:function(){$("#departure-takeoff").click();$("#return-takeoff").click();this.initSlider();$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","reset")},resetTimeValues:function(){var a=this;this.ui.departureTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=b.val()});this.ui.returnTimeFields.each(function(){var b=$(this);a.searchParams[b.attr("name")]=
b.val()})},resetFilters:function(a,b){this.updateFilterValues();a=function(a,b){for(var d=0;d<a.length;d++){var e=$(a[d]);e.attr("value")==b?(e.prop("checked",!0),e.prop("disabled",!0).attr("aria-disabled","true")):e.prop("checked",!1)}};a(this.ui.stopsFilters,"stopsAny");a(this.ui.airlinesFilters,"any");a(this.ui.outboundAirportFilters,"outboundone");a(this.ui.returnAirportFilters,"returnone")},_onDepartureTimeOptionChange:function(a){this.departureTakeoffSlider.resetSlider();this.departureLandingSlider.resetSlider();
this.searchParams.selectedDepartureTimeOption=this.ui.departureTimeOptions.filter(":checked").val();var b=this;this.ui.departureTimeFields.each(function(){var a=$(this);b.searchParams[a.attr("name")]=a.val()});a=$("#departure-takeoff").prop("checked");var d=$("#departure-landing").prop("checked");a&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Outbound","Click","Departure");d&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Outbound","Click","Arrival");this.selectedPage=1;this.fetchFlightsData({showLoadingMask:!1,
resetClicked:!1,callback:function(){b.updateFilterValues();var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)}})},_onFlightsStopsFiltersChange:function(a){var b=$(a.currentTarget).val(),d=this.ui.stopsFilters.filter('[value="stopsAny"]'),e=this.ui.stopsFilters.not('[value="stopsAny"]'),f={anyIsClicked:!1};"stopsAny"===b?(b="Any",e.prop("checked",!1),f.anyIsClicked=!0,f.others=e,f.any=d,$namespace.Analytics.trackEvent("Flights_Results_Filter_Number_Of_Stops","Click",b)):(e=e.filter(":checked"),
"0"==b?b="NonStop":"1"==b?b="1 Stop":"2"==b&&(b="2+ Stops"),0<e.length?(d.prop({checked:!1,disabled:!1}).attr("aria-disabled","false"),a.currentTarget.checked&&$namespace.Analytics.trackEvent("Flights_Results_Filter_Number_Of_Stops","Click",b)):d.prop({checked:!0,disabled:!0}).attr("aria-disabled","true"));var g=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){g.updateFilterValues();g.readUpdatedContents(f)},resetClicked:!1})},
_onFlightsTimeFieldsChange:function(a){a=$(a.currentTarget);if(this.searchParams[a.attr("name")]!=a.val()){this.searchParams[a.attr("name")]=a.val();this.selectedPage=1;var b=this;this.fetchFlightsData({showLoadingMask:!1,resetClicked:!1,callback:function(){b.updateFilterValues();setTimeout(function(){var a=b.ui.matchingFlightCount.text();utils.updateLiveContainer(a)},1E3)}})}},_onSelectFocusIn:function(a){a.preventDefault();$(a.currentTarget).parent().addClass("focus")},_onSelectFocusOut:function(a){a.preventDefault();
a=$(a.currentTarget);a.parent().removeClass("focus");a.removeClass("active")},_onOutboundFlightsAirportFiltersChange:function(a){var b=this,d=$(a.currentTarget).val(),e=this.ui.outboundAirportFilters.filter('[value="outboundone"]'),f=this.ui.outboundAirportFilters.not('[value="outboundone"]'),g=$(a.currentTarget).attr("data-filter-name"),h={anyIsClicked:!1};"outboundone"===d?(f.prop("checked",!1),d="Any",h.anyIsClicked=!0,h.others=f,h.any=e):0<f.filter(":checked").length?(a.currentTarget.checked&&
$namespace.Analytics.trackEvent("Flights_Results_Filter_Airport","Click",g),e.prop({checked:!1,disabled:!1}).attr("aria-disabled","false")):e.prop({checked:!0,disabled:!0}).attr("aria-disabled","true");b=this;this.selectedPage=1;this.searchParams.selectedPage=this.selectedPage;this.fetchFlightsData({showLoadingMask:!1,callback:function(){b.updateFilterValues();b.readUpdatedContents(h)},resetClicked:!1})},setFocusOnFirstNewlyLoadedFlight:function(){var a=this.ui.resultsTarget.find('div[data-id="flight'+
(this.selectedPage-1)*$namespace.NUMBER_OF_FLIGHT_RESULTS_PER_PAGE+'"] div.cityNameToFocusOn');a.attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(){a.attr("tabindex")!=$(document.activeElement).attr("tabindex")&&(a.attr("tabindex","-1").removeAttr("data-taborder"),a.off("blur"))});a.focus();utils.Breakpoint.isMobile()&&a.addClass("no-outline")},_closeFilterAcordian:function(){$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","apply");$("#interCityfilterAccordian").click()},
_addAriaLevelOrRole:function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onShowFiltersClick:function(a){-1!=$(".accordion-item").attr("class").indexOf("activated")?($(".accordion-item").removeClass("activated"),$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","Show")):($(".accordion-item").addClass("activated"),$namespace.Analytics.trackEvent("Flights_Results_Filter","Click","Hide"))},_onselectFocusclick:function(a){-1!=$(a.currentTarget).attr("class").indexOf("active")?
$(a.currentTarget).removeClass("active"):$(a.currentTarget).addClass("active")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var selectedCar,locationChange=!1;$namespace.View=$namespace.View||{};
$namespace.View.TransportationResultsView=Backbone.View.extend({el:"#multiCityTransportationResults",events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="backToPackageOverview"]':"_backToPackageOverview",'click a[data-hook="changeRailTransportation"]':"_onSelectRailItem",'click a[data-hook="productItineraryInfo"]':"_showItineraryRemarksModal",'click a[data-hook="changeFerryTransportation"]':"_onSelectFerryItem",'click [data-hook="modify_transportation_details"]':"_onModifyDetailsClick",
'click [data-hook="update_modify_details"]':"_updateModifyDetails",'click a[data-hook="change_rental_car"]':"_onChangeCar",'click a[data-hook="car-details-in-matrix"]':"_onCarCategoryClick",'click [data-hook="mobile_grid"] [data-hook="cancel_rental_car"]':"_onCancelRentalCar",'click a[data-hook="keep-current-car-toggle"]':"_onKeepCurrentCarSelection",'click a[data-hook="select_rental_car"]':"_onSelectCarClick",'click a[data-hook="select_shuttle_transfer"]':"_onSelectShuttleClick",'change [data-hook="ChangeAvailableAirport"]':"_changeAvailableAirportChange",
'focus [data-focus="addFocus"]':"_addFocus",'blur [data-focus="addFocus"]':"_removeFocus",'click [data-hook="remove_rental_car"]':"_removeSelectedTransportationItem"},initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));b.accordion.close(!0)});$(window).on("resize orientationchange",$.proxy(this._onResize,this));var b=$('[data-hook="mobile_grid"]');
b.empty();$('[data-mobile="true"]').each(function(a,e){a=e.cloneNode(!0);b.append(a)});$('[data-hook="rental-car-summary"]').each(function(a,e){b.append(e.cloneNode(!0))});$('[data-multicar="false"]').each(function(a,b){$(b).removeAttr("aria-label")});$namespace.Utils.Breakpoint.isMobile()&&($("#gridOnlyKeepCurrentSelection").hide(),$(".mobile-grid").removeClass("sp-bot-5"),$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="mobile_grid"] [data-hook="car-details-in-matrix"] [aria-hidden="true"]').each(function(a,
b){$(b).removeAttr("aria-hidden")}));"true"===window.location.href.split("_").pop()&&setTimeout(function(){$namespace.TabOrder.updatePageTabOrder();$(".heading-CarTransfer").attr("tabindex","-1");$(".heading-CarTransfer").focus()},1);this.googleAnalyticsPageView()},_onResize:function(){$namespace.Utils.Breakpoint.isMobile()?(0==$('[data-hook="mobile_grid"] [data-hook="category-selected"]').length||$('[data-hook="mobile_grid"] [data-hook="category-selected"]').hasClass("hide-mobile")||($("#gridOnlyKeepCurrentSelection").hide(),
$(".mobile-grid").removeClass("sp-bot-5"),$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="keep-current-car-toggle"]').addClass("hide-mobile")),$("#midifyDetailsButton").addClass("custom-pad-t-m-20")):($("#gridOnlyKeepCurrentSelection").show(),$(".mobile-grid").addClass("sp-bot-5"),$("#car-matrix").addClass("sp-bot-6"),$("#timeNotSelectedErrorMessage")?$("#midifyDetailsButton").removeClass("custom-pad-t-m-20"):$("#midifyDetailsButton").addClass("custom-pad-t-m-20"));$('[data-multicar="false"]').each(function(a,
b){$(b).removeAttr("aria-label")});$namespace.TabOrder.updatePageTabOrder()},_backToPackageOverview:function(a){var b=$("#pickupTime").val(),d=$("#dropoffTime").val();null==b&&void 0==b||null==d&&void 0==d?window.history.back():this._updateModifyDetails(a)},_onSelectRailItem:function(a){var b=this.$el.attr("data-package-id");$namespace.Analytics.trackEvent("VP_Transportation_Select","Click",b);var d=a.currentTarget.dataset.relativevalue,e=a.currentTarget.dataset.railuid,f=$("[data-citycounter]").data("citycounter"),
g=this;0!=d?$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityRailResults.act","mcrr=SHOW_PRICE_CHANGE_CONFIRMATION&uid="+e,null,null,function(){var a=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","Continue",b);g._changeRailItem(e,f)},function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","No_Thanks",b);a.hide()});a.show()},null,""):g._changeRailItem(e,f)},_changeRailItem:function(a,b){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityRailResults.act",
"mcrr=CHANGE_RAIL_TRANSPORTATION&uid="+a,null,null,function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationResults.act","mctr=LOAD_TRANSPORTATION_RESULTS&transferType=Rail&cityCounter="+b,null,null,function(){$("#mainContent").html(this.responseText);$namespace.Application.initializeOnMainContentReload();$(".heading-label").focus()},null)},null,"")},_onSelectFerryItem:function(a){var b=this.$el.attr("data-package-id");$namespace.Analytics.trackEvent("VP_Transportation_Select",
"Click",b);var d=a.currentTarget.dataset.relativevalue,e=a.currentTarget.dataset.ferryuid,f=$("[data-citycounter]").data("citycounter"),g=this;0!=d?$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFerryResults.act","mcf=SHOW_PRICE_CHANGE_CONFIRMATION&uid="+e,null,null,function(){var a=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","Continue",b);g._changeFerryItem(e,f)},function(){$namespace.Analytics.trackEvent("VP_Transportation_Select",
"No_Thanks",b);a.hide()});a.show()},null,""):g._changeFerryItem(e,f)},_changeFerryItem:function(a,b){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFerryResults.act","mcf=CHANGE_FERRY_TRANSPORTATION&uid="+a,null,null,function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationResults.act","mctr=LOAD_TRANSPORTATION_RESULTS&transferType=Ferry&cityCounter="+b,null,null,function(){$("#mainContent").html(this.responseText);$namespace.Application.initializeOnMainContentReload();
$(".heading-label").focus()},null)},null,"")},_showCancellationPolicyModal:function(){var a=$(this.el).data("package-id");$namespace.Analytics.trackEvent("VP_Transportation_Cancellation_Policy_Schedule","Click",a,null);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code");a=a.attr("data-product");var d=$(this.el).data("package-id");b="mctc=LOAD_ITINERARY_REMARKS&itineraryCode="+b;var e=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",b,null,null,e,null);"Rail"==a&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_Rail",label:d});"Car"==a&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_RentalCar",label:d});"Ferry"==a&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_Ferry",
label:d});"ArrivalTransfer"==a&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_Arrival_Transfer",label:d});"DepartureTransfer"==a&&$namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:"VP_Transportation_Departure_Transfer",label:d})},_onModifyDetailsClick:function(a){a="mctrr=SHOW_CAR_MODIFY_DETAILS&uid="+$(a.currentTarget).attr("data-car-category-uid");var b=$(this.el).data("package-id");$namespace.Analytics.trackEvent("VP_Transportation_Modify_Details",
"Click",b,null);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#car-modify").html(this.responseText),$("#hideModify").hide(),$("#car-modify").show(),$namespace.TabOrder.updatePageTabOrder(),$('div[data-hook="numberOfCars"]').attr("tabindex","-1").focus())},
null,"")},_updateModifyDetails:function(a){var b=$(this.el).data("package-id");$namespace.Analytics.trackEvent("VP_Transportation_Update","Click",b,null);a.preventDefault();var d=$(a.currentTarget),e=this,f=$("#pickUpTimePreValue").val(),g=$("#dropOffTimePreValue").val(),h=$("#pickupLocationPreValue").val();a=$("#pickupLocationPreText").val();var k=$("#dropoffLocationPreValue").val(),l=$("#dropoffLocationPreText").val(),p=!1,q=$("#pickupAgencyUid :selected").text(),r=$("#dropoffAgencyUid :selected").text();
$("#timeChangedValue").val();var v=$("#pickupTime").val(),n=$("#dropoffTime").val(),t=$("#carCategoryItemUid").val(),u=d.attr("data-hook");d=$("input[name='carCount']:checked")[0];var w=$("#selectedNumberOfCars").val();$(d).attr("data-absIncremental-pricing");$(d).attr("data-current-pricing");var y=$(".car-summary, .car-summary-transportation").data("citycounter"),z="mctrr=CHANGE_CAR_CATEGORY_ITEM";z+="&uid="+t;d=$("#pickupAgencyUid").val();var x=$("#dropoffAgencyUid").val();z+="&pickupAgencyUid="+
d;z+="&dropoffAgencyUid="+x;z+="&cityCounter="+y;var B=$("input:radio[name=carCount]:checked").val();$("#cityUid").val();z+="&numberOfCars="+B;""!=v&&(z+="&pickupTime="+v);""!=n&&(z+="&dropoffTime="+n);t="mctrr=SHOW_CAR_MESSAGE_CONFIRMATION_POPUP&uid="+t+("&numberOfCars="+B)+("&cityCounter="+y);""!=v&&(t+="&pickupTime="+v);""!=n&&(t+="&dropoffTime="+n);y=null;if(f&&v||g&&n)y=this.createConfirmMessageForCarTimeChange(f,v,g,n);v=this.createConfirmMessageForCar(v,n);y?(t+="&timeChanged=true",p=!0):(t+=
"&timeChanged=false",p=!1);t=v&&y?t+"&timeChangedMessage=true":t+"&timeChangedMessage=false";v=null;if(a&&q||l&&r)v=this.createConfirmMessageForCarLocation(a,q,l,r);v?(t+="&locationChanged=true",t+="&pickupAgencyUid="+d,t+="&dropoffAgencyUid="+x,locationChange=!0):(t+="&locationChanged=false",t+="&pickupAgencyUid="+d,t+="&dropoffAgencyUid="+x);v=null;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",t,null,null,
function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text}),e._resetCarFieldValues(w,f,g,h,k);else if(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var d=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("VP_Transportation_Update","Continue",b);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);var a=$("#fromAgencyChanged").val();z+="&fromAgencyChanged="+a;
z+="&locationChanged="+locationChange;z+="&timeChanged="+p;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",z,null,"mainContent",function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):"update_modify_details"==u?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload()):window.history.back();
$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus()},null)},function(){$namespace.Analytics.trackEvent("VP_Transportation_Update","No_Thanks",b);"update_modify_details"==u?(e._resetCarFieldValues(w,f,g,h,k),d.hide()):window.history.back()});setTimeout(function(){d.show()},1E3);$(".modal-close").data("is-time-change");$(".modal-close").data("is-location-change");$(".modal-close").on("click",function(){"update_modify_details"==u?e._resetCarFieldValues(w,f,g,h,k):window.history.back()})}else"update_modify_details"==
u?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),$("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload(),$namespace.TabOrder.updatePageTabOrder(),$(".heading-label").focus()):window.history.back()},null)},_resetCarFieldValues:function(a,b,d,e,f){$("#numberOfCars"+a).prop("checked",!0);$("#pickupTime")&&$("#pickupTime").val(b);$("#dropoffTime")&&$("#dropoffTime").val(d);$("#pickupAgencyUid")&&$("#pickupAgencyUid").val(e);$("#dropoffAgencyUid")&&$("#dropoffAgencyUid").val(f)},
createConfirmMessageForCar:function(a,b){var d=null,e=this.getHoursFromTime(a),f=this.getHoursFromTime(b);a=this.getMinutesFromTime(a);b=this.getMinutesFromTime(b);e=f-e;if(1<e||59<60*e+(b-a))d=!0;return d},_onChangeCar:function(a){a="mctrr=SHOW_ADDITIONAL_CAR_RESULTS&uid="+$(".car-summary").data("car-product-uid");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,function(){if(""!=this.responseText){$("#car-matrix").html(this.responseText);
$("#hideformatrix").hide();$("#car-matrix").show();$namespace.Utils.Breakpoint.isMobile()||$(".active").attr({"aria-expanded":"true","aria-current":"true"});$("#car-details").hide();$("#hideModify").show();var a=$('[data-hook="mobile_grid"]');a.empty();$('[data-mobile="true"]').each(function(b,d){b=d.cloneNode(!0);$(b).removeAttr("aria-owns");a.append(b);$(d).removeAttr("aria-label");$(d).find(".car-price").removeAttr("aria-hidden");$(d).find(".text-nochange").removeAttr("aria-hidden")});var d=$(".desktop-grid .card-selected-details").last(),
e=$(d).find('.hide-mobile [data-hook="select_rental_car"]').attr("id"),f=$(d).find(".hide-mobile .callToBookLink").attr("id");d=$(d).find('[data-hook="productItineraryInfo"]').attr("id");var g=e||f?e?e:f:d;var h;$('.desktop-grid a[data-tabaftersummary="yes"]').each(function(a,b){h?$(b).attr("data-tab-after",h):$(b).attr("data-tab-after",g);h="selectedRowCell"+a;$(b).attr("id",h)});$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isMobile()?($('[data-hook="car-details-in-matrix"]').first().focus(),
$('[data-hook="update_modify_details"]').addClass("hide-mobile")):$('.desktop-grid [data-hook="car-details-in-matrix"]').first().focus();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)}$(".carcategoryname1").focus()},null,"")},createConfirmMessageForCarLocation:function(a,b,d,e){var f=null;""!=b&&a!=b&&(f=!0);d!=e&&(f=!0);return f},createConfirmMessageForCarTimeChange:function(a,b,d,e){var f=null;if(a!=b||d!=e)f=!0;return f},getHoursFromTime:function(a){var b=0,d=0;-1!=a.indexOf("PM")?(d=a.indexOf("PM"),
b=12):-1!=a.indexOf("AM")&&(d=a.indexOf("AM"),b=0);a=a.substring(0,d);a=a.split(":");a=parseInt(a[0],10);12==a&&(a=0);return a+b},getMinutesFromTime:function(a){var b=0;-1!=a.indexOf("PM")?b=a.indexOf("PM"):-1!=a.indexOf("AM")&&(b=a.indexOf("AM"));a=a.substring(0,b);a=a.split(":");return parseInt(a[1],10)},_onCarCategoryClick:function(a){selectedCar=$(a.currentTarget);var b=$(".car-summary, .car-summary-transportation").data("citycounter");var d="mctrr=SHOW_ADDITIONAL_CAR_RESULTS&uid="+a.currentTarget.dataset.productUid;
d=d+"&displaySelectedItemsOnly=false&cityCounter=1&expandedCarCategoryItemUid="+a.currentTarget.dataset.categorystatuswithpriceUid;$("#car-matrix-add-tran").length&&(d+="&isAdditionalTransportationOption=true");$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",d,null,null,function(){$("#car-matrix-add-tran").length?$("#car-matrix-add-tran").html(this.responseText):$("#car-matrix").html(this.responseText);var a=
$('[data-hook="mobile_grid"]');a.empty();$('[data-mobile="true"]').each(function(b,d){b=d.cloneNode(!0);$(b).removeAttr("aria-owns");$(b).addClass("hide-mobile");a.append(b);$(d).removeAttr("aria-label");$(d).find(".car-price").removeAttr("aria-hidden");$(d).find(".text-nochange").removeAttr("aria-hidden")});$('[data-hook="category-selected"]').each(function(b,d){b=d.cloneNode(!0);$(b).removeAttr("id");a.append(b)});$namespace.Utils.Breakpoint.isMobile()&&($("#gridOnlyKeepCurrentSelection").hide(),
$(".mobile-grid").removeClass("sp-bot-5"),$("#car-matrix").removeClass("sp-bot-6"),$('[data-hook="keep-current-car-toggle"]').addClass("hide-mobile"),$(window).scrollTop(0));var d=$(".desktop-grid .card-selected-details").last(),g=$(d).find('.hide-mobile [data-hook="select_rental_car"]').attr("id"),h=$(d).find(".hide-mobile .callToBookLink").attr("id");d=$(d).find('[data-hook="additionalInformation"]').attr("id");var k=g||h?g?g:h:d;var l;$('.desktop-grid a[data-tabaftersummary="yes"]').each(function(a,
b){l?$(b).attr("data-tab-after",l):$(b).attr("data-tab-after",k);l="selectedRowCell"+a;$(b).attr("id",l)});$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,null,[b,"Transfer"]);$namespace.TabOrder.updatePageTabOrder();$namespace.Utils.Breakpoint.isMobile()?setTimeout(function(){$('[data-hook="carCategoryName"]').first().focus()},1):$(".carcategoryname1").focus();$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null,
"")},_onCancelRentalCar:function(){$('[data-hook="mobile_grid"] [data-mobile="true"]').each(function(a,b){$(b).removeClass("hide-mobile");$(b).removeClass("active")});$('[data-hook="mobile_grid"] [data-hook="category-selected"]').addClass("hide-mobile");$("#gridOnlyKeepCurrentSelection").show();$(".mobile-grid").addClass("sp-bot-5");$("#car-matrix").addClass("sp-bot-6");$('[data-hook="keep-current-car-toggle"]').removeClass("hide-mobile");$namespace.Utils.Breakpoint.isMobile()&&($namespace.TabOrder.updatePageTabOrder(),
$(selectedCar).focus())},_onKeepCurrentCarSelection:function(a){$("#car-matrix").hide();$("#hideformatrix").show();$("#car-details").hide();$("#hideModify").show();$(window).scrollTop(0);$namespace.Utils.Breakpoint.isMobile()&&$('[data-hook="update_modify_details"]').addClass("hide-mobile");$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus()},_onSelectCarClick:function(a){var b=this.$el.attr("data-package-id");$namespace.Analytics.trackEvent("VP_Transportation_Select","Click",b);
b=a.currentTarget.dataset.relativevalue;a=a.currentTarget.dataset.categorystatuswithpriceUid;$("#car-matrix").data("selectedCarCategory");var d=$(".car-summary, .car-summary-transportation").data("citycounter");0==b?($("#car-matrix").hide(),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act","mctrr=CHANGE_CAR_CATEGORY_ITEM&uid="+(a+"&cityCounter="+d),null,null,function(){$("#mainContent").html(this.responseText);$(window).scrollTop(0);$namespace.Application.initializeOnMainContentReload();
$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus();$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,null,[d,"Car"])},null,""),$("#hideformatrix").show()):this._showConfirmationModal(a)},_showConfirmationModal:function(a){var b="mctrr=SHOW_CAR_PRICE_CHANGE_CONFIRMATION&uid="+a;var d=$(".car-summary, .car-summary-transportation").data("citycounter"),e=this.$el.attr("data-package-id");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",
b,null,null,function(){var b=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","Continue",e);$("#car-matrix").hide();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act","mctrr=CHANGE_CAR_CATEGORY_ITEM&uid="+(a+"&cityCounter="+d),null,null,function(){$("#mainContent").html(this.responseText);$(window).scrollTop(0);$namespace.Application.initializeOnMainContentReload();$namespace.TabOrder.updatePageTabOrder();
$(".heading-label").focus();$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,null,[d,"Car"])},null,"");$("#hideformatrix").show()},function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","No_Thanks",e);b.hide()});b.show()},null,"")},_onSelectShuttleClick:function(a){var b=$(this.el).data("package-id");$namespace.Analytics.trackEvent("VP_Transportation_Select","click",b);b=a.currentTarget.dataset.relativevalue;
var d=a.currentTarget.dataset.cityuid,e=$(a.currentTarget).attr("data-citytransfer");a=a.currentTarget.dataset.transferdaytourid;var f=$(".car-summary, .car-summary-transportation").data("citycounter");0==b?(a="mctrr=CHANGE_TRANSFER_ITEM_FOR_MULTI_CITY&uid="+(d+"&cityCounter="+f)+("&transferDayTourId="+a),$(window).scrollTop(0),$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus();$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,null,[f,"Transfer"])},null),$("#transportationResults").show()):this._showShuttleConfirmationModal(d,a,e)},_showShuttleConfirmationModal:function(a,
b,d){d="mctrr=SHOW_CAR_PRICE_CHANGE_CONFIRMATION&uid="+a+("&transferDayTourId="+b)+("&cityTransfer="+d);var e=$(".car-summary, .car-summary-transportation").data("citycounter"),f=$(this.el).data("package-id");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",d,null,null,function(){var d=new $namespace.Widgets.Confirm(this.responseText,function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","Continue",f);var d="mctrr=CHANGE_TRANSFER_ITEM_FOR_MULTI_CITY&uid="+
(a+"&cityCounter="+e);d+="&transferDayTourId="+b;$(window).scrollTop(0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",d,null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus()},null);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,
null,[e,"Transfer"]);$("#transportationResults").show()},function(){$namespace.Analytics.trackEvent("VP_Transportation_Select","No_Thanks",f);d.hide()});d.show()},null,"")},_changeAvailableAirportChange:function(a){var b=this;a=$(a.currentTarget);var d=$(".car-summary, .car-summary-transportation").data("citycounter"),e=a.attr("data-cityUid"),f=$("#pickupPointList").val(),g=$("#oldValue").val();a="mctrr=SHOW_PRICE_CONFIRMATION_SHUTTLE&uid="+(e+"&selectedPickupPoint="+f+"&oldPickupPoint="+g+"&cityCounter="+
d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,function(a){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var h=function(){if(""!=f){var a="mctrr=SEARCH_TRANSFERS_FOR_PICKUP_POINT&uid="+(e+"&selectedPickupPoint="+f+"&cityCounter="+d);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",a,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($("#mainContent").html(this.responseText),$namespace.Application.initializeOnMainContentReload());$namespace.TabOrder.updatePageTabOrder();$("#ChangeAvailableAirport").toggleClass("focus");$("#pickupPointList").first().focus()},null,"")}},l=function(){p.hide();b._resetAirportField(g)};if(a){var p=new $namespace.Widgets.Confirm(this.responseText,h,l);p.show();$(".modal-close").on("click",function(){b._resetAirportField(g)})}else $("#mainContent").html(this.responseText),
$namespace.Application.initializeOnMainContentReload()},null,"")},_resetAirportField:function(a){$("#pickupPointList").val(a);$("#ChangeAvailableAirport").toggleClass("focus");$("#pickupPointList").first().focus()},_addFocus:function(a){$(a.currentTarget).addClass("focus")},_removeFocus:function(a){$(a.currentTarget).removeClass("focus")},_changeCarCallBack:function(a){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationResults.act","mctr=LOAD_TRANSPORTATION_RESULTS&transferType=Car&cityCounter="+
a,null,null,function(){$("#mainContent").html(this.responseText);$(window).scrollTop(0);$namespace.Application.initializeOnMainContentReload();$namespace.TabOrder.updatePageTabOrder();$(".heading-label").focus()},null);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_VP_MULTICITY_TRANSPORTATION_RESULTS,null,[a,"Car"])},googleAnalyticsPageView:function(){if(1!=document.visited){document.visited=1;var a=this.$el.data("destination"),b=this.$el.data("region"),
d=this.$el.data("package-id");b="/vp/booking/viewTransportation/"+a+"/"+b+"/"+d;$namespace.Analytics.track({vendor:"google",type:"pageview",text:b});$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"vacation package|Transportation",eVar2:"vacation package",eVar34:a,eVar74:b})}},_removeSelectedTransportationItem:function(a){var b="mctrr=SHOW_PRICE_CONFIRMATION",d=$(a.currentTarget),e=$(".car-summary, .car-summary-transportation").data("citycounter"),f=d.attr("data-city-uid");
a=$(a.currentTarget).attr("data-citytransfer");b=b+("&uid="+f)+("&cityCounter="+e)+("&cityTransfer="+a);a=this.$el.data("package-id");$namespace.Analytics.trackEvent("VP_Transportation_Remove","Click",a,null);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",b,null,null,function(){var a=function(){var a="mctrr=REMOVE_TRANSPORTATION_SELECTION_FOR_CITY&uid="+f;a+="&cityCounter="+e;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransferResultsActivity.act",
a,null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h=1021_"+e+"_Transfer")},null)},b=function(){d.hide()};if(0==$(this.responseText).filter("#upgradeConfirmCenterModal").length)$namespace.Navigation.loadPage(_webLoc+"/h=1021_"+e+"_Transfer");else{var d=new $namespace.Widgets.Confirm(this.responseText,a,b);d.show()}},null,"")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;AIRLINE_NUMBER_REGEX=/[0-9]{1,4}/g;AIRPORT_CODE_REGEX=/[a-zA-Z0-9]{2,4}/g;AIRPORT_TRANSFER_REGEX=/[0-9][0-9]?:[0-9][0-9]?\s[a-zA-Z][a-zA-Z]/g;$namespace.View=$namespace.View||{};
$namespace.View.finalBookingSpecialRequestView=Backbone.View.extend({el:"#specialRequestsPopupDiv",ui:{form:null},isFirstFormFieldFocusActive:!1,events:{'click [data-hook="update_flight_info"]':"_updateFlightInfo",'click [data-hook="update_rental_car_flight_info"]':"_updateRentalCarFlightInfo",'change [data-hook="ArrivalTransferAirline"]':"_changeArrivalTransferAirline",'keypress [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'paste [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",
'change [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="ArrivalTransferTime"]':"_changeArrivalTransferTime",'change [data-hook="DepartureTransferAirline"]':"_changeDepartureTransferAirline",'change [data-hook="DepartureTransferTime"]':"_changeDepartureTransferTime",'keypress [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",
'change [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="ChangeArrivalAirline"]':"_changeArrivalAirline",'change [data-hook="ChangeArrivalTime"]':"_changeArrivalTime",'keypress [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'paste [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeDepartureAirline"]':"_changeDepartureAirline",
'change [data-hook="ChangeDepartureTime"]':"_changeDepartureTime",'keypress [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'paste [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber"},initialize:function(a){this.module=$.extend({},a).module;$(".flightNumber").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,4),
a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1});$(".flightNumber").on("paste",function(a){window.event.clipboardData.getData("text");a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(4<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),!1});$("#yesFlightInfo_0").change(function(a){$("#yesFlightInfo_0").is(":checked")&&$("#flightInformation_0").show()});
$("#noFlightInfo_0").change(function(a){$("#noFlightInfo_0").is(":checked")&&$("#flightInformation_0").hide()});$("#yesFlightInfo_1").change(function(a){$("#yesFlightInfo_1").is(":checked")&&$("#flightInformation_1").show()});$("#noFlightInfo_1").change(function(a){$("#noFlightInfo_1").is(":checked")&&$("#flightInformation_1").hide()});$namespace.TabOrder.updatePageTabOrder()},validateArrivalAndDepartureTransfers:function(a){var b=this.module.TranslationTexts;this.isFirstFormFieldFocusActive=!1;var d=
!0;if($("#yesFlightInfo_"+a).is(":checked")){var e=$("#"+a+"_AirlineNumber");this._removeError(e);var f=$("#"+a+"_AirCode");this._removeError(f);var g=$("#"+a+"_TransferTime");this._removeError(g);""==f.val()&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),d=!1);""==e.val()?(0==a?this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)):this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),
d=!1):0<e.length&&!e.val().match(AIRLINE_NUMBER_REGEX)&&(0==a?this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)):this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),d=!1);""==g.val()&&(0==a?this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)):this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),d=!1)}return d},
validateCarRentalSpecialRequests:function(){var a=this.module.TranslationTexts;this.isFirstFormFieldFocusActive=!1;var b=!0,d=$("#numberOfCars").val();if(""==$(".selectedFlightItemClass").data("selectedflightitem"))for(var e=0;e<parseInt(d);e++){if(""!=$("#selectedCarOption_"+e+"_ArrivalTime").val()){var f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);var g=$("#selectedCarOption_"+e+"_ArrivalAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,
$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),b=!1)}else{f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);g=$("#selectedCarOption_"+e+"_ArrivalAirCode");var h=$("#selectedCarOption_"+
e+"_ArrivalTime");this._removeError(g);this._removeError(h);""!=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&(this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1);""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()&&(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&
(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),b=!1));if(""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()||""!=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val())if(""==h.val()||0<h.length&&!h.val().match(AIRPORT_TRANSFER_REGEX))this._addError(h,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)),b=!1}if(""!=$("#selectedCarOption_"+e+"_DepartureTime").val()){f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber");
this._removeError(f);g=$("#selectedCarOption_"+e+"_DepartureAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),
b=!1)}else f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber"),this._removeError(f),g=$("#selectedCarOption_"+e+"_DepartureAirCode"),this._removeError(g),h=$("#selectedCarOption_"+e+"_DepartureTime"),this._removeError(h),""!=$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&(this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1),""!=$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&
(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),b=!1)),""==$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&""==$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()||""!=h.val()||(this._addError(h,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),
b=!1)}return b},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},
_updateFlightInfo:function(a){var b=$(a.currentTarget);b.data("addflight-bookingid");a=b.data("transfercount");b=b.data("isflightincluded");for(var d=[],e=0;e<parseInt(a);e++)if(!$namespace.Validation.isNull(document.getElementById("uid_"+e))){var f=document.getElementById("uid_"+e).value,g=!1;if(null!=document.getElementById(e+"_AirCode")){if(!b&&!this.validateArrivalAndDepartureTransfers(e))return!1;var h=document.getElementById(e+"_AirCode").value,k=document.getElementById(e+"_Airport").value,
l=document.getElementById(e+"_AirlineNumber").value,p=document.getElementById(e+"_TransferDate").value,q=document.getElementById(e+"_TransferTime").value;null!=document.getElementById("noFlightInfo_"+e)&&document.getElementById("noFlightInfo_"+e).checked&&(g=!0);h={noFlightInfo:g,airportCode:h,airlineCode:k,airlineNumber:l,airlineDate:p,airlineTime:q}}d.push({bookingItemUid:f,transferSpecialRequest:h})}a={vpfbcsr:"UPDATE_FINAL_CONFIRMATION_TRANSFER_SPECIAL_REQUESTS_INFO_FROM_POPUP",specialRequestDetail:JSON.stringify({BOOKING_SPECIAL_REQUEST_DETAILS:d})};
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("finalBookingSpecialRequest.act",$.param(a),null,null,function(){window.history.go(0)},null)},_updateRentalCarFlightInfo:function(a){$(a.currentTarget).data("addflight-bookingid");a=$("#numberOfCars").val();if(this.validateCarRentalSpecialRequests()){for(var b=document.getElementById("bookingHasValidFlights").value,d=[],e=0;e<parseInt(a);e++){var f="",g="",h="",k="",l="",p="",q="",r="",v="",n="",t=
"false";if(null!=document.getElementById("selectedArrivalOption_"+e+"_AirCode")){if(!b)return!1;f=document.getElementById("selectedArrivalOption_"+e+"_AirCode").value;g=document.getElementById("selectedArrivalOption_"+e+"_Airport").value;h=document.getElementById("selectedArrivalOption_"+e+"_AirlineNumber").value;k=document.getElementById("selectedArrivalOption_"+e+"_TransferDate").value;l=document.getElementById("selectedArrivalOption_"+e+"_TransferTime").value;null!=document.getElementById("noFlightInfo_"+
e)&&document.getElementById("noFlightInfo_"+e).checked&&(t="true")}if(null!=document.getElementById("selectedDepartOption_"+e+"_AirCode")){if(!b)return!1;p=document.getElementById("selectedDepartOption_"+e+"_AirCode").value;q=document.getElementById("selectedDepartOption_"+e+"_Airport").value;r=document.getElementById("selectedDepartOption_"+e+"_AirlineNumber").value;v=document.getElementById("selectedDepartOption_"+e+"_TransferDate").value;n=document.getElementById("selectedDepartOption_"+e+"_TransferTime").value;
null!=document.getElementById("noFlightInfo_"+e)&&document.getElementById("noFlightInfo_"+e).checked&&(t="true")}null!=document.getElementById("selectedCarOption_"+e+"_ArrivalAirCode")&&(f=document.getElementById("selectedCarOption_"+e+"_ArrivalAirCode").value,g=document.getElementById("selectedCarOption_"+e+"_ArrivalAirport").value,h=document.getElementById("selectedCarOption_"+e+"_ArrivalAirlineNumber").value,k=document.getElementById("selectedCarOption_"+e+"_ArrivalTransferDate").value,l=document.getElementById("selectedCarOption_"+
e+"_ArrivalTime").value);null!=document.getElementById("selectedCarOption_"+e+"_DepartureAirCode")&&(p=document.getElementById("selectedCarOption_"+e+"_DepartureAirCode").value,q=document.getElementById("selectedCarOption_"+e+"_DepartureAirport").value,r=document.getElementById("selectedCarOption_"+e+"_DepartureAirlineNumber").value,v=document.getElementById("selectedCarOption_"+e+"_DepartureTransferDate").value,n=document.getElementById("selectedCarOption_"+e+"_DepartureTime").value);d.push({selectedArrivalOptionAirCode:f,
selectedArrivalOptionAirport:g,selectedArrivalOptionAirlineNumber:h,selectedArrivalOptionTransferDate:k,selectedArrivalOptionTransferTime:l,noFlightInfo:t,selectedDepartOptionAirCode:p,selectedDepartOptionAirport:q,selectedDepartOptionAirlineNumber:r,selectedDepartOptionTransferDate:v,selectedDepartOptionTransferTime:n,selectedCarOptionArrivalAirCode:f,selectedCarOptionArrivalAirlineNumber:h,selectedCarOptionArrivalAirport:g,selectedCarOptionArrivalTransferDate:k,selectedCarOptionArrivalTransferTime:l,
selectedCarOptionDepartureAirCode:p,selectedCarOptionDepartureAirlineNumber:r,selectedCarOptionDepartureAirport:q,selectedCarOptionDepartureTransferDate:v,selectedCarOptionDepartureTransferTime:n})}a={vpfbcsr:"UPDATE_FINAL_CONFIRMATION_RENTAL_CAR_SPECIAL_REQUESTS_INFO_FROM_POPUP",rentalCarSpecialRequestDetail:JSON.stringify({SPECIAL_REQUEST_DETAILS:d})};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("finalBookingSpecialRequest.act",$.param(a),null,
null,function(){window.history.go(0)},null)}},_changeArrivalAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber"),e=a.replace("_ArrivalAirCode","_ArrivalTime"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber_Required"),k=a.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),l=a.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=b||""!=f||""!=g?($("#"+k).text("*"),$("#"+h).text("*"),$("#"+l).text("*"),
$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true")):($("#"+k).text(""),$("#"+h).text(""),$("#"+l).text(""));h=$("#"+a);k=$("#"+d);l=$("#"+e);""==b&&""==f&&""==g?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),
$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required")):""!=b?this._removeError(h):""!=f&&this._removeError(k);""!=g&&this._removeError(l)},_changeArrivalTime:function(a){var b=a.target.id;a=$("#"+b).val();var d=b.replace("_ArrivalTime","_ArrivalAirlineNumber"),e=b.replace("_ArrivalTime","_ArrivalAirCode"),f=$("#"+d).val(),g=$("#"+e).val(),h=b.replace("_ArrivalTime","_ArrivalAirlineNumber_Required"),k=b.replace("_ArrivalTime","_ArrivalAirCode_Required"),l=b.replace("_ArrivalTime","_ArrivalTime_Required");
""!=a||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+e);k=$("#"+d);b=$("#"+b);""==g&&""==f&&""==a?(this._removeError(h),this._removeError(b),this._removeError(k),$("#"+e).removeAttr("required"),$("#"+
e).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required")):""!=g&&""==f&&""==a?this._removeError(h):""!=f&&this._removeError(k);""!=a&&this._removeError(b)},_changeArrivalAirlineNumber:function(a){var b=a.target.id,d=$("#"+b).val(),e=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode"),f=$("#"+e).val(),g=b.replace("_ArrivalAirlineNumber","_ArrivalTime"),h=$("#"+g).val(),k=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode_Required"),l=b.replace("_ArrivalAirlineNumber",
"_ArrivalAirlineNumber_Required"),p=b.replace("_ArrivalAirlineNumber","_ArrivalTime_Required");""!=d||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+b);l=$("#"+e);g=$("#"+g);""==f&&""==d&&""==h?(this._removeError(l),this._removeError(k),this._removeError(g),$("#"+e).removeAttr("required"),
$("#"+e).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required")):""!=f&&""==d&&this._removeError(l);$namespace.Validation.isBlankOrNull(a)||this._removeError(k);""!=h&&this._removeError(g)},_changeDepartureAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureAirCode","_DepartureAirlineNumber"),e=$("#"+d).val(),f=a.replace("_DepartureAirCode","_DepartureTime"),g=$("#"+f).val(),h=a.replace("_DepartureAirCode","_DepartureAirlineNumber_Required"),
k=a.replace("_DepartureAirCode","_DepartureAirCode_Required"),l=a.replace("_DepartureAirCode","_DepartureTime_Required");""!=b||""!=e||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+f).attr("required","true"),$("#"+f).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+a);d=$("#"+d);k=$("#"+f);
""==b&&""==e&&""==g?(this._removeError(selectedArrivalAirline),this._removeError(arrivalAirlineNumberId),this._removeError(k),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+f).removeAttr("required"),$("#"+f).removeAttr("aria-required")):""!=b?this._removeError(h):""!=e&&this._removeError(d);""!=g&&this._removeError(k)},_changeDepartureTime:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureTime",
"_DepartureAirCode"),e=a.replace("_DepartureTime","_DepartureAirlineNumber"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_DepartureTime","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureTime","_DepartureAirCode_Required"),l=a.replace("_DepartureTime","_DepartureTime_Required");""!=b||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required",
"true"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+d);k=$("#"+e);l=$("#"+a);""==f&&""==g&&""==b?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required")):""!=f?this._removeError(h):""!=g&&this._removeError(k);
""!=b&&this._removeError($("#"+a))},_changeDepartureAirlineNumber:function(a){var b=a.target.id,d=b.replace("_DepartureAirlineNumber","_DepartureAirCode"),e=$("#"+b).val(),f=$("#"+d).val(),g=b.replace("_DepartureAirlineNumber","_DepartureTime"),h=$("#"+g).val(),k=b.replace("_DepartureAirlineNumber","_DepartureAirCode_Required"),l=b.replace("_DepartureAirlineNumber","_DepartureAirlineNumber_Required"),p=b.replace("_DepartureAirlineNumber","_DepartureTime_Required");""!=e||""!=f||""!=h?($("#"+k).text("*"),
$("#"+l).text("*"),$("#"+p).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+d);l=$("#"+b);p=$("#"+g);""==f&&""==e&&""==h?(this._removeError(k),this._removeError(l),this._removeError(p),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+b).removeAttr("required"),
$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),$("#"+g).removeAttr("aria-required")):""!=f&&""==e&&this._removeError(k);$namespace.Validation.isBlankOrNull(a)||this._removeError(l);""!=h&&this._removeError(p)},_changeArrivalTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},
_changeArrivalTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};flightSeatMap=$namespace.FlightSeatMap||{};$namespace.View=$namespace.View||{};breakpoint=utils.Breakpoint;var region;MARGIN_TOP_PIXEL=400;var NO_PREFERENCES="noPreferences",ACKNOWLEDGMENT="acknowledgment",CHOOSE_SPECIFIC_SEATS="chooseSpecificSeats";
$namespace.View.MultiCityFlightSeatSelectionView=Backbone.View.extend({el:"#multiCityFlightSeatSelection",ui:{chatLink:null,currentPassenger:null,initSeatMap:!0,selectedNopreference:!1,flightPassengerSeatInfo:null,isPageLoad:!1,isConfirmationCancelled:!1},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="go_back"]':"_onBackPreviousFlightClick",'click [data-hook="continueToNext"]':"_onContinueClick",'click [data-hook="continueToNextBottom"]':"_onContinueClick",
'change [id^="selectFlight"]':"_onSelectFlightSegmentClick","click a#previousFlight":"_onPreviousFlight","click a#nextFlight":"_onNextFlight",'click a[data-hook="passenger"]':"_onPassengerClick",'click [name="selectSeatPreference"]':"_onSelectSeatPreferenceRadio","click div.accordion-item":"_onAccordionClick"},seatBoxesScene:null,smController:null,eventTrigger:!1,initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.ui.isPageLoad=!0;this.ui.isConfirmationCancelled=
!1;this.ui.flightPassengerSeatInfo=JSON.parse(a.passengerInfoJSON).flightPassengerSeatInfo;this.ui.continueButtonText=$("#continueButton").text();"true"==a.seatsPreferred?($("#select-specific-seats").prop("checked",!0),$("#select-no-preferences").prop("checked",!1)):($("#select-specific-seats").prop("checked",!1),$("#select-no-preferences").prop("checked",!0));this._onSelectSeatPreferenceRadio("init");if(0<this.ui.flightPassengerSeatInfo.length)for(a=0;a<this.ui.flightPassengerSeatInfo.length;a++)flightSeatMap.setSeatNumber(this.ui.flightPassengerSeatInfo[a].flightSegmentItemUid,
this.ui.flightPassengerSeatInfo[a].passengerIndex,this.ui.flightPassengerSeatInfo[a].seatNumber);translationTexts=this.module.TranslationTexts;$.each($('div[id^="select_flight-"]'),function(a,d){new widgets.SelectWidget($(d))});this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,d){d.accordion||(d.accordion=new $namespace.Widgets.Accordion($(d)));a=d.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===a?d.accordion.open(!0):d.accordion.close(!0)});
this.currentPassenger=$(".seat-input-box").first();this.currentPassenger.addClass("active");$("div[id^='seatTravelerList']").each(function(a,d){1==$(d).find("a.seat-input-box.active").length?$("a.seat-input-box.active").first().attr({"aria-current":"true"}):$("a.seat-input-box.pageload").attr({"aria-current":"false"});$namespace.TabOrder.updatePageTabOrder()});this.smController=new ScrollMagic.Controller;this._onSelectFlightSegmentClick(event);$(window).on("resize orientationchange",$.proxy(this._onWindowResize,
this));this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.ui.chatLink=this.$el.find("#chatNowLink");$(window).load(function(){$("html, body").animate({scrollTop:$("#multiCityFlightSeatSelection").offset().top-MARGIN_TOP_PIXEL},100)});destination=$(this.el).data("destination");region=$(this.el).data("region");packageId=$(this.el).data("package-id");if(this.ui.chatLink)this.ui.chatLink.on("click",
function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewFlightSeatSelection/"+destination+"/"+region+"/"+packageId)});this.trackGAAdobe();$(".backtopreviouspage").removeAttr("role")},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Round-Trip","Click","Expand"):b.hasClass("hotelSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Hotel",
"Click","Expand"):b.hasClass("themeparksSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Theme_Parks","Click","Expand"):b.hasClass("transportationSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Transportation","Click","Expand"):b.hasClass("activitiesSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Activities","Click","Expand"):b.hasClass("multitiCityTIAccordionTab")&&$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Results_Multi-City",
"Click","Expand")},getActiveSegmentContainer:function(){var a=$("#flight-details-megatip"),b=a.find('select[id^="selectFlight"]').find("option:selected").val();return a.find('div#flightSeatMapTabPanels div[data-pane="'+b+'"]')},_onPassengerClick:function(a){a.preventDefault();a=$(a.currentTarget);var b=this.getActiveSegmentContainer();$("a.seat-input-box.active").attr({"aria-current":"false"});b.find("a.seat-input-box.active").removeClass("active");this.currentPassenger=a;this.currentPassenger.hasClass("Infant")||
(this.currentPassenger.addClass("active"),$("a.seat-input-box.active").attr({"aria-current":"true"}),b.find(".seat-button.available").not(".selected").first().focus())},_showCancellationPolicyModal:function(){$namespace.Analytics.trackEvent("Flight_Seat_Selection_Cancellation_Policy_Schedule","Click",packageId);var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act",$.param({vcp:"VIEW_CANCELLATION_PENALTIES"}),null,null,a,null)},_swapBackToPreviousFlight:function(a){a?$('[data-hook="go_back"]').data("state","previous flight"):$('[data-hook="go_back"]').data("state","default")},_onBackPreviousFlightClick:function(a){a.preventDefault();
this._onPreviousFlight(a);this._setPassengerFocusOnMobileView()},_onContinueClick:function(a){a.preventDefault();var b=this,d=-1,e=$(a.currentTarget);if("true"==$(e).data("continue-next-page")){var f=function(a){a===NO_PREFERENCES?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Preference","No_Preference",packageId):a===CHOOSE_SPECIFIC_SEATS?$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Preference ","Choose_Specific_Seats",packageId):a===ACKNOWLEDGMENT&&$namespace.Analytics.trackEvent("VP_Flight_Seat_Selection_Acknowledgement",
"Click","Continue");a="chooseSpecificSeats"==$("input[name='selectSeatPreference']:checked").val()?!0:!1;0==a&&$("input[type='text']").val("");var b=[],d=0;for(g in flightSeatMap.getFlightSeatMap()){var e=g.split("_");if(2==e.length){var f=a?flightSeatMap.getSeatNumber(e[0],e[1]):"";e[0]&&(b[d++]=new flightSeatMap.passengerSeatInfo(e[0],e[1],f))}}var g={mcfss:"ASSIGN_SEAT_MAP_SELECTION",seatsPreferred:a,flightSeatSelectionMapDetail:JSON.stringify({flightPassengerSeatInfo:b})};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFlightSeatSelectionActivity.act",
$.param(g),null,null,function(a){a&&$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS,["true"])},null)};if(this.ui.selectedNopreference)f(NO_PREFERENCES);else{var g="";e=$(".flightsegement");$(e).each(function(a,b){a=$(b).data("uid");var e=$(b).data("flight-index");b=$(b).data("seat-available");var f=$(".passengeronseat[data-flight-index='"+e+"']").length,h=0,k=flightSeatMap.getFlightSeatMap(),v;for(v in k){var n=v.split("_");2==n.length&&n[0]==
a&&k[v]&&h++}1==b&&h!=f&&(g=0==g.length?e:g+","+e,d=-1==d?e-1:d)});g?(e={mcfss:"LOAD_UNASSIGNED_FLIGHT_ACKNOWLEDGEMENT",unassignedFlightSegments:g},$namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFlightSeatSelectionActivity.act",$.param(e),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var e=new $namespace.Widgets.Modal(this.responseText,function(){g&&g.off("click")});var g=$("#acknowledgement-understand-btn");
g.on("click",function(a){e.hide();f(ACKNOWLEDGMENT)});$("#close-bottom-btn, #close-top-btn").click(function(){$("#selectFlight>option:eq("+d+")").prop("selected",!0);b.ui.isConfirmationCancelled=!0;b._onSelectFlightSegmentClick(a)});e.show();$(".modal-close").focus()},null)):f(CHOOSE_SPECIFIC_SEATS)}}else this._onNextFlight(a);this._setPassengerFocusOnMobileView()},_setPreviousAndNextButtonVisibility:function(a){var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option:selected"),
f=d.find("option");a=e.data("uid");var g=e.index();e.val();e=this.module.TranslationTexts;1==f.length?(b.find(".previousFlight").addClass("hide"),b.find(".nextFlight").addClass("hide"),this._updateContinueButtons("true",this.ui.continueButtonText)):0==g?(b.find(".previousFlight").addClass("hide"),b.find(".nextFlight").removeClass("hide"),this._updateContinueButtons("false",e.CONTINUE_TO_NEXT_FLIGHT),this.ui.selectedNopreference&&this.ui.isPageLoad&&this._updateContinueButtons("true",this.ui.continueButtonText)):
0<g&&g<f.length-1?(b.find(".previousFlight").removeClass("hide"),b.find(".nextFlight").removeClass("hide"),this._updateContinueButtons("false",e.CONTINUE_TO_NEXT_FLIGHT)):g==f.length-1&&(b.find(".previousFlight").removeClass("hide"),b.find(".nextFlight").addClass("hide"),this._updateContinueButtons("true",this.ui.continueButtonText));this._swapBackToPreviousFlight(g);$namespace.TabOrder.updatePageTabOrder();b.find(".previousFlight").removeAttr("style");b.find(".nextFlight").removeAttr("style");this.eventTrigger&&
$(window).scrollTop(d.offset().top-200);this.ui.isPageLoad&&(breakpoint.isDesktop()||d.blur(),$("#multiCityFlightSeatSelection").attr("tabindex","-1").focus(),$("#multiCityFlightSeatSelection").addClass("no-outline"));this.ui.isPageLoad=!1;b=this.getActiveSegmentContainer();if(0<this.ui.flightPassengerSeatInfo.length)for(d=0;d<this.ui.flightPassengerSeatInfo.length;d++)g=this.ui.flightPassengerSeatInfo[d].passengerIndex,f=this.ui.flightPassengerSeatInfo[d].seatNumber,this.ui.flightPassengerSeatInfo[d].flightSegmentItemUid==
a&&""!=f&&(g=b.find('a.seat-input-box input[data-user-id="'+g+'"]'),e=g.closest("a.seat-input-box"),e.addClass("has-value").attr({"aria-current":"false"}),g.val(f),e.attr("aria-label",e.data("passenger-info")+" "+translationTexts.TEXT_SEAT_NUMBER+" "+f),f=b.find("a.seat-input-box").not(".has-value"),b.find("a.seat-input-box").removeClass("active").attr({"aria-current":"false"}),0<f.length?f.first().addClass("active").attr({"aria-current":"true"}):(b.find("a.seat-input-box").first().addClass("active"),
b.find("a.seat-input-box.active").attr({"aria-current":"true"}))),d==this.ui.flightPassengerSeatInfo.length-1&&this._resetSeatMapScrollLock(b);else this._resetSeatMapScrollLock(b);this._setPassengerFocusOnMobileView()},_updateContinueButtons:function(a,b){$("#continueButton").data("continue-next-page",a);$("#continueButton").text(b);$("#bottomContinueButton").data("continue-next-page",a);$("#bottomContinueButton").text(b)},_resetSeatMapScrollLock:function(a){this.ui.initSeatMap?(this.initSeatMap(),
this.ui.initSeatMap=!1):(this.initScrollLock(),0<a.find("a.seat-input-box").not(".has-value").length?(a.find("a.seat-input-box").removeClass("active").attr({"aria-current":"false"}),a.find("a.seat-input-box").not(".has-value").first().addClass("active").attr({"aria-current":"true"})):a.find("a.seat-input-box").removeClass("active").first().addClass("active").attr({"aria-current":"true"}),this.ui.isConfirmationCancelled&&setTimeout(function(){a.find("a.seat-input-box.active").focus()},300),this.ui.isConfirmationCancelled=
!1)},seatSelectionMapCallBack:function(){var a=$("#flight-details-megatip");a=a.find('select[id^="selectFlight"]');this.ui.isPageLoad&&a.val(a.find("option").first().val());this._setPreviousAndNextButtonVisibility();this._populateSeatPassengerInfoFromJSON();$("#flight-details-megatip").attr("data-uid");a=$("#flight-details-megatip");a=a.find('select[id^="selectFlight"]');a="#flightInfoMobile"+a.find("option:selected").data("flight-index");$(a).data("has-error")||($(a).data("has-error","readAlready"),
flightSeatMap.hasError()&&$(a).removeClass("displayNone"))},_onSelectFlightSegmentClick:function(a){a=$("#flight-details-megatip").attr("data-uid");var b=$("#flight-details-megatip");b.find(".previousFlight").addClass("hide");b.find(".nextFlight").addClass("hide");b.find("a.flight-segment-next-previous").removeAttr("data-tab-initialized");var d=b.find('select[id^="selectFlight"]');this.ui.isPageLoad&&d.val(d.find("option").first().val());d=d.find("option:selected");var e=d.index(),f=d.val();d.text();
$(".loading_blocker_status_div").text($("#flightDropdownChangeText"+(e+1)).text());b.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').siblings().removeClass("active").addClass("hide");b.find('div#flightSeatMapTabPanels div[data-pane="'+f+'"]').addClass("active").removeClass("hide");b.find("div#flightSeatMapTabPanels div.panel.active .flightSeatMapContent table.fuselage").length?(flightSeatMap.CurrentSeatMap.updateLegend(),this.seatSelectionMapCallBack()):(this.ui.initSeatMap=!0,d="#"+f+" .flightSeatMapContent",
e=b.find('select[id^="selectFlight"]').find(":selected").data("uid"),a={dataUrl:"multiCityFlightSeatSelectionActivity.act?mcfss=LOAD_SEAT_MAP_DISPLAY_JSON&uid="+a+"&bookingFlightSegmentItemUid="+e,parentElement:$(d),megatip:b,flightSegmentItemUid:e,selectable:!1,flightItemUid:a},$namespace.EnhancedSeatMapUtil.ignorePageScroll(!0),$namespace.EnhancedSeatMapUtil.addCallback("seatSelectionMap",$.proxy(this.seatSelectionMapCallBack,this)),flightSeatMap.loadCurrentSeatMap(a))},_onPreviousFlight:function(a){$("#flight-details-megatip").attr("data-uid");
var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option:selected").index();0==e?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS,["true"]):0<e&&(this.eventTrigger=!0,e="flight-"+e+"-tab",d.val(e),d.find('option[value="'+e+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));b.find("div.flight-module-title > h3").attr("tabindex","-1").focus()},_onNextFlight:function(a){$("#flight-details-megatip").attr("data-uid");
var b=$("#flight-details-megatip"),d=b.find('select[id^="selectFlight"]'),e=d.find("option"),f=d.find("option:selected").index();f<e.length-1&&(this.eventTrigger=!0,e="flight-"+(f+2)+"-tab",d.val(e),d.find('option[value="'+e+'"]').attr("selected",!0).siblings().removeAttr("selected"),this._onSelectFlightSegmentClick(a));b.find("div.flight-module-title > h3").attr("tabindex","-1").focus();utils.Breakpoint.isMobile()&&$("#seatTravelerList a").first().focus()},_onSelectSeatClick:function(a){var b=$("#flight-details-megatip"),
d=b.find('select[id^="selectFlight"]'),e=b.find('div#flightSeatMapTabPanels div[data-pane="'+d.find("option:selected").val()+'"]');a=$(a.currentTarget);this.$activeInput=e.find('a.seat-input-box.active input[type="text"]');0==this.$activeInput.length&&(this.$activeInput=e.find('a.seat-input-box input[type="text"]').last(),this.$activeInput.closest(".seat-input-box").addClass("active"),this.$activeInput.closest("seat-input-box.active").attr({"aria-current":"true"}));var f=a.data("seatId"),g=this.$activeInput.data("userId");
var h=a.hasClass("seat-button")?a:a.closest(".flight-seatmap--grid-cell").find(".seat-button");h.find(".selected-indicator").remove();a=$("#selectFlight").find(":selected").data("uid");void 0!==h.data("user-id")&&flightSeatMap.setSeatNumber(a,h.data("user-id"),"");h.removeData("userId");e.find(".seat-button.available.selected").each(function(a){a=$(this);a.attr("data-user-id")==g&&(a.removeAttr("data-user-id"),a.removeData("userId"),a.removeClass("selected"),a.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+
" "+a.data("seat-id")+" - "+translationTexts.TEXT_AVAILABLE),a.find(".selected-indicator").remove())});h.attr({"data-user-id":g}).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+(g+1)+"</span>");e.find('a.seat-input-box input[type="text"]').each(function(a){a=$(this);var b=a.closest(".seat-input-box");a.val()==f&&(a.val(""),b.removeClass("has-value").attr({"aria-current":"true"}),b.attr("aria-label",b.data("passenger-info")))});this.$activeInput.val(f);h.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+
" "+f+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(g+1));$(".loading_blocker_status_div").text(translationTexts.TEXT_SEAT+" "+f+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(g+1));flightSeatMap.setSeatNumber(a,g,f);var k;a=this.$activeInput.closest(".seat-input-box");a.attr("aria-label",a.data("passenger-info")+" "+translationTexts.TEXT_SEAT_NUMBER+" "+f);this.$activeInput.val().length?(a.addClass("has-value"),a.removeClass("active").attr({"aria-current":"false"}),setTimeout(function(){k=
e.find("a.seat-input-box").not(".has-value");0<k.length?k.first().addClass("active").attr({"aria-current":"true"}).focus():h.focus()}.bind(this),10)):a.removeClass("has-value").attr({"aria-current":"true"})},initSeatMap:function(){var a=this.getActiveSegmentContainer();0==a.find("a.seat-input-box.active").length&&(a.find("a.seat-input-box").first().addClass("active"),a.find("a.seat-input-box.active").attr({"aria-current":"true"}));this.ui.isConfirmationCancelled&&setTimeout(function(){a.find("a.seat-input-box.active").focus()},
300);this.ui.isConfirmationCancelled=!1;a.find(".seat-button.available").each(function(a){a=$(this);a.removeAttr("disabled");a.attr("data-taborder","document");a.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+a.data("seat-id")+" - "+translationTexts.TEXT_AVAILABLE)});a.find(".lavatory").attr("role","img");a.find(".lavatory").attr("aria-label",translationTexts.TEXT_LAVATORY_ICON);a.find(".galley").attr("role","img");a.find(".galley").attr("aria-label",translationTexts.TEXT_GALLEY_ICON);
a.find(".closet").attr("role","img");a.find(".closet").attr("aria-label",translationTexts.TEXT_CLOSET_ICON);a.on("click",".seat-button.available",this._onSelectSeatClick);$namespace.TabOrder.updatePageTabOrder();this.initScrollLock()},_onWindowResize:function(a){a=this.getActiveSegmentContainer();a.find("#seatInputsScrolllockTrigger"+a.data("segment")).empty();var b=-1*$('[data-hook="sticky-bar"]').outerHeight(),d=a.find(".flight-seatmap-container").outerHeight(),e=a.find(".seat-inputs-outer-container").outerHeight();
d-=e;this.seatBoxesScene&&this.seatBoxesScene.removePin(!0);e=$(a).data("segment");$($("#seatInputsOuterContainer"+e)).height()<$($("#flightSeatmapContainer"+e)).height()&&(this.seatBoxesScene=new ScrollMagic.Scene({triggerElement:"#seatInputsScrolllockTrigger"+a.data("segment"),triggerHook:"onLeave",offset:b,duration:d}),this.seatBoxesScene.setPin("#seatInputsOuterContainer"+a.data("segment"),{pushFollowers:!1}).addTo(this.smController));$namespace.TabOrder.updatePageTabOrder()},initScrollLock:function(){this._onWindowResize();
$(window).on("load resize orientationchange",$.proxy(function(a){setTimeout($.proxy(this._onWindowResize,this),50)},this));$(window).trigger("resize")},_onSelectSeatPreferenceRadio:function(a){var b=this.module.TranslationTexts;if("noPreference"==$("input[name='selectSeatPreference']:checked").val())this.ui.selectedNopreference=!0,$("div[data-panel='specific-seats-tab']").addClass("hide"),$("#flight-details-megatip").addClass("hide"),this._updateContinueButtons("true",this.ui.continueButtonText),
this._swapBackToPreviousFlight(0);else{this.ui.selectedNopreference=!1;$("div[data-panel='specific-seats-tab']").removeClass("hide");$("#flight-details-megatip").removeClass("hide");"init"!=a&&this.initScrollLock();var d=$("#flight-details-megatip").find('select[id^="selectFlight"]');a=d.find("option:selected");d=d.find("option");var e=a.index();a.val();e!=d.length-1&&($("#continueButton").data("continue-next-page","false"),$("#bottomContinueButton").data("continue-next-page","false"),$("a[data-hook='continueToNext']").text(b.CONTINUE_TO_NEXT_FLIGHT),
$("a[data-hook='continueToNextBottom']").text(b.CONTINUE_TO_NEXT_FLIGHT));this._swapBackToPreviousFlight(e)}},_populateSeatPassengerInfoFromJSON:function(){if(0<this.ui.flightPassengerSeatInfo.length)for(var a=$("#flight-details-megatip").find('select[id^="selectFlight"]').find("option:selected").data("uid"),b=0;b<this.ui.flightPassengerSeatInfo.length;b++){var d=this.ui.flightPassengerSeatInfo[b].passengerIndex,e=this.ui.flightPassengerSeatInfo[b].seatNumber,f=this.ui.flightPassengerSeatInfo[b].flightSegmentItemUid;
f==a&&(f=$("div[data-segment-id='"+f+"']").find("button[data-seat-id='"+e+"']"),f.attr({"data-user-id":d}).addClass("selected").append('<span class="selected-indicator" aria-hidden="true">'+(d+1)+"</span>"),f.find(".ada-screenreader").html(translationTexts.TEXT_SEAT+" "+e+" "+translationTexts.TEXT_SELECTED_FOR_PASSENGER+" "+(d+1)),this.ui.flightPassengerSeatInfo[b].flightSegmentItemUid="")}},_onAccordionClick:function(a){a.preventDefault();var b=$(a.currentTarget);b.parent().hasClass("filter-accordion")&&
($namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){b.find(".accordion-button").focus()},500))},_setPassengerFocusOnMobileView:function(){if(utils.Breakpoint.isMobile()){var a=$("#flightSeatMapTabPanels");setTimeout(function(){a.find("div.active").find("div.seat-inputs-inner-container a").first().focus()},300)}},trackGAAdobe:function(){var a="/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewFlightSeatSelection/"+destination+"/"+region+"/"+packageId,b=$namespace.AnalyticsHelper.getVacationPackageTagForAdobe()+
"|Flight Seat Selection";$namespace.Analytics.track({vendor:"google",type:"pageview",text:a});$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:b,eVar2:$namespace.AnalyticsHelper.getVacationPackageTagForAdobe(),eVar34:destination,eVar74:a})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		AIRLINE_NUMBER_REGEX=/[0-9]{1,4}/g;AIRPORT_CODE_REGEX=/[a-zA-Z0-9]{2,4}/g;AIRPORT_TRANSFER_REGEX=/[0-9][0-9]?:[0-9][0-9]?\s[a-zA-Z][a-zA-Z]/g;var HOTEL_REMARKS_REGEX=/[a-zA-Z0-9,@'\.:\-\(\)\s&#\?\$/!%;]{0,512}/g,errIdWiseArr=[];utils=$namespace.Utils||{};validate=$namespace.Validation||{};messageUtil=$namespace.MessageUtil||{};$namespace.View=$namespace.View||{};
$namespace.View.MultiCitySpecialRequestsView=Backbone.View.extend({el:"#multiCitySpecialRequests",previousPageURL:null,ui:{isPageLoad:!1},isFirstFormFieldFocusActive:!1,events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="continueToNext"]':"_onContinueClick","click span.accordion-button":"_clickItineraryAccordion",'change [data-hook="TransferCheckBox"]':"_changeTransferCheckBox",'change [data-hook="ArrivalTransferAirline"]':"_changeArrivalTransferAirline",
'change [data-hook="ArrivalTransferTime"]':"_changeArrivalTransferTime",'keypress [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'paste [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="DepartureTransferAirline"]':"_changeDepartureTransferAirline",'change [data-hook="DepartureTransferTime"]':"_changeDepartureTransferTime",
'keypress [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'click [data-hook="go_back"]':"_onBackLink",'change [data-hook="SelectedHotelOption"]':"_SelectedHotelOption",'keypress [data-hook="remarks"]':"_selectedHotelRemarks",'input [data-hook="remarks"]':"_selectedHotelRemarks",
'keypress [data-hook="railRemarks"]':"_selectedRailRemarks",'input [data-hook="railRemarks"]':"_selectedRailRemarks",'change [data-hook="ChangeArrivalAirline"]':"_changeArrivalAirline",'change [data-hook="ChangeArrivalTime"]':"_changeArrivalTime",'keypress [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'paste [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeDepartureAirline"]':"_changeDepartureAirline",
'change [data-hook="ChangeDepartureTime"]':"_changeDepartureTime",'keypress [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'paste [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'focusin [data-hook="drop-down"]':"_onSelectFocusIn",'focusout [data-hook="drop-down"]':"_onSelectFocusOut",'click [data-hook="drop-down"]':"_onSelectDropDownClick",'click [data-hook="continueToNextFromBottom"]':"_onContinueClick",
'change\t [data-hook="drop-down"]':"_onChangeRailTime"},_onBackLink:function(a){1==$("#page_content").data("is-booking-has-flights")?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_SEAT_MAP_SELECTION,["true"]):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PASSENGER_DETAILS,["true"])},itineraryAccordion:!1,initialize:function(a){this.controller=$.extend({},a).controller;this.module=a.module;this.ui.isPageLoad=!0;this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",
this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);$("div[id^='cardHotelRequest_']").each(function(a,d){a=$(d).find('input:checkbox:checked[name^="selectedHotelOption_"]');d=$(d).find('textarea[id^="selectedHotelRemark_"]');if(null!=a)for(var b=0;b<a.length;b++){var f=d[0].name.replace(/[^0-9]/g,""),g=$("#selectedHotelRemark_"+f+"_Required"),h=$("#selectedHotelRemark_"+f);"Accessible Room"==a[b].value&&(a[b].checked?(g.text("*"),h.attr("required",
"true"),h.attr("aria-required","true")):(g.text(""),h.removeAttr("required"),h.removeAttr("aria-required"),this._removeError(h)));$("#textarea-count-"+f).html(h.val().length)}});$(".flightNumber").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,4),a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1});$(".flightNumber").on("paste",function(a){window.event.clipboardData.getData("text");
a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(4<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),!1});this.$el.find('[data-hook="accordion"]').each(function(a,d){d.accordion.close(!0)});this.$el.find('.filter-accordion[data-hook="accordion"]').each(function(a,d){d.accordion||(d.accordion=new $namespace.Widgets.Accordion($(d)));a=d.accordion.content.attr("data-test");$namespace.Utils.Breakpoint.isDesktop()&&"flightSearchFilter"===
a?d.accordion.open(!0):d.accordion.close(!0)});$(window).load(function(){$("form").get(0).reset();$("html, body").animate({scrollTop:$("#multiCitySpecialRequests").offset().top-400},100)});$.hook("parent-accordion").each(utils.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a)}));this.$el.find('[data-hook="parent-accordion"],[data-hook="accordion"]').each(function(a,d){d.accordion&&d.accordion.close(!0)});$("div[id^='cardRailRequests_']").each(function(a,d){d=$(d).attr("data-id");
a=$("#railTextArea-count-"+d);d=$("#selectedRailRemark_"+d)[0].value;a.html(d.length)});this.updateCityAccordionState();this.trackAdobeAndGA();$(".backtopreviouspage").removeAttr("role")},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Special _Request_Results_Round-Trip","Click","Expand"):b.hasClass("multitiCityTIAccordionTab")&&$namespace.Analytics.trackEvent("VP_Special_Request_Results_Multi-City","Click","Expand")},updateCityAccordionState:function(){var a=
$("#mainContentAccordion_0");utils.Breakpoint.isMobile()?(a.find(".accordion-item:first").removeClass("active"),a.find(".accordion-button:first").attr("aria-expanded","false"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")):(a.find(".accordion-item:first").addClass("active"),a.find(".accordion-button:first").attr("aria-expanded","true"),a.find(".accordion-content:first").removeAttr("style"),a.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg"))},
_clickItineraryAccordion:function(a){$(a.currentTarget);this.itineraryAccordion=!0},_changeTransferCheckBox:function(a){a=a.target.id.replace(/[^0-9]/g,"");$("#noFlightInfo_"+a).is(":checked")?$("#flightInformation_"+a).hide():$("#flightInformation_"+a).show();$(window).trigger("resize")},_showCancellationPolicyModal:function(){var a=$("#multiCitySpecialRequests").data("package-id");$namespace.Analytics.trackEvent("Special_Request_Cancellation_Policy_Schedule","Click",a);a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_SelectedHotelOption:function(a){var b=a.target.id.replace(/[^0-9]/g,"");a=$("#selectedHotelRemark_"+
b+"_Required");var d=$("#selectedHotelRemark_"+b);b=$('[name="selectedHotelOption_'+b+'"]');if(0<b.length)for(var e=0;e<b.length;e++)"Accessible Room"==b[e].value&&(b[e].checked?(a.text("*"),d.attr("required","true"),d.attr("aria-required","true")):(a.text(""),d.removeAttr("required"),d.removeAttr("aria-required"),this._removeError(d)))},_onContinueClick:function(a){if(this._validateSpecialRequests()){var b=this,d=[];$("div[id^='cardTransferRequest_']").each(function(a,e){b.prepareTransferItemData(e,
d)});$("div[id^='cardHotelRequest_']").each(function(a,e){b.prepareHotelItemData(e,d)});$("div[id^='cardCarRequest_']").each(function(a,e){b.prepareCarItemData(e,d)});$("div[id^='cardRailRequests_']").each(function(a,e){b.prepareRailItemData(e,d)});var e=this.module.TranslationTexts;a=JSON.stringify({SPECIAL_REQUEST_DETAILS:d});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCitySpecialRequestsActivity.act",$.param({mcsr:"CREATE_SPECIAL_REQUESTS",
specialRequestInfo:a}),null,null,function(){if(this.message){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();$namespace.MessageUtil.showMessage({type:1,text:"en_ca"==a||"fr_ca"==a?e.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA:e.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE,title:e.SPECIAL_REQUESTS_ERROR_COMMON})}else $namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_PAYMENT,["true"])},null)}else for(a=0;a<errIdWiseArr.length;++a){var f=
$("[data-city-id="+errIdWiseArr[a]+"]");f.addClass("active");f.find(".accordion-content:first").show();f.find(".accordion-button:first").attr("aria-expanded","true");f.find("img:first").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg")}$namespace.TabOrder.updatePageTabOrder()},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+a.attr("id")+'_error" data-test="errorLabel'+
a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_validateSpecialRequests:function(){var a=this;this.isFirstFormFieldFocusActive=!1;var b=!0,d=this.module.TranslationTexts;errIdWiseArr=[];for(var e=$("#specialRequestTotalCityCount").val(),f=0;f<=parseInt(e);f++)for(var g=
0;2>g;g++)if(!$("#noFlightInfo_"+g+f).is(":checked")){var h=!0,k=$("#selectedArrivalOption_"+g+"_AirlineNumber_"+f),l=$("#selectedDepartOption_"+g+"_AirlineNumber_"+f);this._removeError(k);this._removeError(l);var p=$("#selectedArrivalOption_"+g+"_AirCode_"+f),q=$(p).attr("type"),r=$("#selectedDepartOption_"+g+"_AirCode_"+f),v=$(r).attr("type");this._removeError(p);this._removeError(r);var n=$("#selectedArrivalOption_"+g+"_TransferTime_"+f);this._removeError(n);var t=$("#selectedDepartOption_"+g+
"_TransferTime_"+f);this._removeError(t);""==p.val()&&"hidden"!=q&&(this._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),h=b=!1);""==r.val()&&"hidden"!=v&&(this._addError(r,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),h=b=!1);""==k.val()?(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),h=b=!1):0<k.length&&!k.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),
h=b=!1);""==l.val()?(this._addError(l,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),h=b=!1):0<l.length&&!l.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(l,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),h=b=!1);""==n.val()&&(this._addError(n,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)),h=b=!1);""==t.val()&&(this._addError(t,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),
h=b=!1);h||errIdWiseArr.push(f)}for(f=0;f<=parseInt(e);f++)for(k=$('input[name="noOfProducts_0"]').val(),g=0;g<parseInt(k);g++)if(p=$("#selectedHotelRemark_"+g+f),h=$('[name="selectedHotelOption_'+g+f+'"]'),this._removeError(p),0<h.length)for(l=0;l<h.length;l++)"Accessible Room"==h[l].value&&(q=!0,h[l].checked&&""==$.trim(p.val())&&(this._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED)),q=b=!1),q||errIdWiseArr.push(f));h=$('input[name="numberOfCars"]').val();
for(f=0;f<=parseInt(e);f++)for(g=0;g<=parseInt(h);g++){l=!0;if(""!=$("#selectedCarOption_"+g+f+"_ArrivalTime").val()){k=$("#selectedCarOption_"+g+f+"_ArrivalAirlineNumber");this._removeError(k);p=$("#selectedCarOption_"+g+f+"_ArrivalAirCode");this._removeError(p);if(""==p.val()||0<p.length&&!p.val().match(AIRPORT_CODE_REGEX))this._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),l=b=!1;""==k.val()?(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),
l=b=!1):0<k.length&&!k.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),l=b=!1)}else if(k=$("#selectedCarOption_"+g+f+"_ArrivalAirlineNumber"),this._removeError(k),p=$("#selectedCarOption_"+g+f+"_ArrivalAirCode"),q=$("#selectedCarOption_"+g+f+"_ArrivalTime"),this._removeError(p),this._removeError(q),""!=$("#selectedCarOption_"+g+f+"_ArrivalAirlineNumber").val()&&(""==p.val()||0<p.length&&!p.val().match(AIRPORT_CODE_REGEX))&&
(this._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),l=b=!1),""!=$("#selectedCarOption_"+g+f+"_ArrivalAirCode").val()&&(""==k.val()?(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),l=b=!1):0<k.length&&!k.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),l=b=!1)),""!=$("#selectedCarOption_"+g+f+"_ArrivalAirCode").val()||
""!=$("#selectedCarOption_"+g+f+"_ArrivalAirlineNumber").val())if(""==q.val()||0<q.length&&!q.val().match(AIRPORT_TRANSFER_REGEX))this._addError(q,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)),l=b=!1;if(""!=$("#selectedCarOption_"+g+f+"_DepartureTime").val()){k=$("#selectedCarOption_"+g+f+"_DepartureAirlineNumber");this._removeError(k);p=$("#selectedCarOption_"+g+f+"_DepartureAirCode");this._removeError(p);if(""==p.val()||0<p.length&&!p.val().match(AIRPORT_CODE_REGEX))this._addError(p,
$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),l=b=!1;""==k.val()?(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),l=b=!1):0<k.length&&!k.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),l=b=!1)}else k=$("#selectedCarOption_"+g+f+"_DepartureAirlineNumber"),this._removeError(k),p=$("#selectedCarOption_"+g+f+"_DepartureAirCode"),
this._removeError(p),q=$("#selectedCarOption_"+g+f+"_DepartureTime"),this._removeError(q),""!=$("#selectedCarOption_"+g+f+"_DepartureAirlineNumber").val()&&(""==p.val()||0<p.length&&!p.val().match(AIRPORT_CODE_REGEX))&&(this._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),l=b=!1),""!=$("#selectedCarOption_"+g+f+"_DepartureAirCode").val()&&(""==k.val()?(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),l=b=
!1):0<k.length&&!k.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(k,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),l=b=!1)),""==$("#selectedCarOption_"+g+f+"_DepartureAirCode").val()&&""==$("#selectedCarOption_"+g+f+"_DepartureAirlineNumber").val()||""!=q.val()||(this._addError(q,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),l=b=!1);l||errIdWiseArr.push(f)}$("div[id^='cardRailRequests_']").each(function(e,f){e=!0;var g=
$("#rail-card").data("cityid"),h=$(f).find('select[id^="selectedRailOption_"]');if(null!=h&&0<h.size()){f=h[0];var k=h[1];h=h[2];var l=$("#"+f.id),p=$("#"+k.id),n=$("#"+h.id);if(null!=f&&null!=k&&null!=h)if(a._removeError(l),a._removeError(p),a._removeError(n),f.value==k.value&&k.value==h.value)a._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)),a._addError(n,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)),
e=b=!1;else if(f.value==k.value)a._addError(p,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)),e=b=!1;else if(k.value==h.value||f.value==h.value)a._addError(n,$namespace.MessageUtil.prefixError(d.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)),e=b=!1;e||errIdWiseArr.push(g)}});return b},_changeArrivalTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferTime:function(a){var b=
a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferAirlineNumber:function(a){var b=$("#"+a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_changeDepartureTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirlineNumber:function(a){var b=$("#"+
a.target.id);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_selectedHotelRemarks:function(a){this.upadateCommentTextCount(a,"textarea-count-");var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_selectedRailRemarks:function(a){this.upadateCommentTextCount(a,"railTextArea-count-")},upadateCommentTextCount:function(a,b){a=$(a.currentTarget).attr("id");var d=a.split("_"),e=$("#"+a),f=$("#"+b+d[1]);f.html(e.val().length);e.on("input",
function(){512<e.val().length?(e.val(e.val().substr(0,512)),f.html(512)):f.html(e.val().length)});e.on("keypress",function(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if([42,43,92,91,93,94,95,96,60,62,34].includes(b)||32>b||122<b)return a.preventDefault(),!1})},_changeArrivalAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber"),e=a.replace("_ArrivalAirCode","_ArrivalTime"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_ArrivalAirCode",
"_ArrivalAirlineNumber_Required"),k=a.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),l=a.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=b||""!=f||""!=g?($("#"+k).text("*"),$("#"+h).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true")):($("#"+k).text(""),$("#"+h).text(""),$("#"+l).text(""));h=$("#"+
a);k=$("#"+d);l=$("#"+e);""==b&&""==f&&""==g?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required")):""!=b?this._removeError(h):""!=f&&this._removeError(k);""!=g&&this._removeError(l)},_changeArrivalTime:function(a){var b=a.target.id;a=$("#"+b).val();var d=b.replace("_ArrivalTime","_ArrivalAirlineNumber"),
e=b.replace("_ArrivalTime","_ArrivalAirCode"),f=$("#"+d).val(),g=$("#"+e).val(),h=b.replace("_ArrivalTime","_ArrivalAirlineNumber_Required"),k=b.replace("_ArrivalTime","_ArrivalAirCode_Required"),l=b.replace("_ArrivalTime","_ArrivalTime_Required");""!=a||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),
$("#"+b).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+e);k=$("#"+d);b=$("#"+b);""==g&&""==f&&""==a?(this._removeError(h),this._removeError(b),this._removeError(k),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required")):""!=g&&""==f&&""==a?this._removeError(h):""!=f&&this._removeError(k);""!=a&&this._removeError(b)},_changeArrivalAirlineNumber:function(a){var b=a.target.id,
d=$("#"+b).val(),e=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode"),f=$("#"+e).val(),g=b.replace("_ArrivalAirlineNumber","_ArrivalTime"),h=$("#"+g).val(),k=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode_Required"),l=b.replace("_ArrivalAirlineNumber","_ArrivalAirlineNumber_Required"),p=b.replace("_ArrivalAirlineNumber","_ArrivalTime_Required");""!=d||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),
$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+b);l=$("#"+e);p=$("#"+g);""==f&&""==d&&""==h?(this._removeError(l),this._removeError(k),this._removeError(p),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),$("#"+g).removeAttr("aria-required")):
""!=f&&""==d&&this._removeError(l);$namespace.Validation.isBlankOrNull(a)||this._removeError(k);""!=h&&this._removeError(p)},_changeDepartureAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureAirCode","_DepartureAirlineNumber"),e=$("#"+d).val(),f=a.replace("_DepartureAirCode","_DepartureTime"),g=$("#"+f).val(),h=a.replace("_DepartureAirCode","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureAirCode","_DepartureAirCode_Required"),l=a.replace("_DepartureAirCode",
"_DepartureTime_Required");""!=b||""!=e||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+f).attr("required","true"),$("#"+f).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+a);d=$("#"+d);k=$("#"+f);""==b&&""==e&&""==g?(this._removeError(selectedArrivalAirline),this._removeError(arrivalAirlineNumberId),
this._removeError(k),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+f).removeAttr("required"),$("#"+f).removeAttr("aria-required")):""!=b?this._removeError(h):""!=e&&this._removeError(d);""!=g&&this._removeError(k)},_changeDepartureTime:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureTime","_DepartureAirCode"),e=a.replace("_DepartureTime","_DepartureAirlineNumber"),f=$("#"+d).val(),
g=$("#"+e).val(),h=a.replace("_DepartureTime","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureTime","_DepartureAirCode_Required"),l=a.replace("_DepartureTime","_DepartureTime_Required");""!=b||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true")):($("#"+h).text(""),
$("#"+k).text(""),$("#"+l).text(""));h=$("#"+d);k=$("#"+e);l=$("#"+a);""==f&&""==g&&""==b?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required")):""!=f?this._removeError(h):""!=g&&this._removeError(k);""!=b&&this._removeError($("#"+a))},_changeDepartureAirlineNumber:function(a){var b=
a.target.id,d=b.replace("_DepartureAirlineNumber","_DepartureAirCode"),e=$("#"+b).val(),f=$("#"+d).val(),g=b.replace("_DepartureAirlineNumber","_DepartureTime"),h=$("#"+g).val(),k=b.replace("_DepartureAirlineNumber","_DepartureAirCode_Required"),l=b.replace("_DepartureAirlineNumber","_DepartureAirlineNumber_Required"),p=b.replace("_DepartureAirlineNumber","_DepartureTime_Required");""!=e||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+d).attr("required","true"),$("#"+
d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+d);l=$("#"+b);p=$("#"+g);""==f&&""==e&&""==h?(this._removeError(k),this._removeError(l),this._removeError(p),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),
$("#"+g).removeAttr("aria-required")):""!=f&&""==e&&this._removeError(k);$namespace.Validation.isBlankOrNull(a)||this._removeError(l);""!=h&&this._removeError(p)},prepareRailItemData:function(a,b){var d=a.id.split("_"),e=$(a).attr("data-id"),f=$(a).find('select[id^="selectedRailOption_"]');a=$(a).find('textarea[id^="selectedRailRemark_"]');if(null!=f&&0<f.size()){var g="",h="",k="",l="",p="",q="",r=f[0],v=f[1];f=f[2];null!=r&&null!=v&&null!=f&&(g=d[1],k=r.value,l=v.value,p=f.value,q=a[0].value,h=
"Rail");b.push({itemType:h,itemId:e,city:g,preferredTimeChoice1:k,preferredTimeChoice2:l,preferredTimeChoice3:p,railRemarks:q})}},prepareHotelItemData:function(a,b){var d=a.id.split("_"),e=$(a).attr("data-id"),f=$(a).find('input:checkbox:checked[name^="selectedHotelOption_"]'),g=$(a).find('textarea[id^="selectedHotelRemark_"]');if(null!=f){a="";for(var h=0;h<f.length;h++)a=""==a?f[h].value:a+","+f[h].value;d=d[1];f=g[0].value;f=f.trim().match(HOTEL_REMARKS_REGEX);f=null!=f?f.join(""):"";b.push({itemType:"Hotel",
itemId:e,city:d,selectedHotelOption:a,selectedOptionHotelRemark:f})}},prepareCarItemData:function(a,b){var d=a.id.split("_"),e=$(a).attr("data-id"),f=$(a).find('input:checkbox:checked[name^="selectedCarOption_"]'),g=$(a).find('select[id^="selectedCarOption_"]');a=$(a).find('input:text[id^="selectedCarOption_"]');if(null!=f){for(var h="",k="",l="",p="",q="",r="",v="",n=0;n<f.length;n++)h=""==h?f[n].value:h+","+f[n].value;for(f=0;f<g.length;f++){n=g[f];var t=n.id.split("_")[2];"ArrivalTime"==t?p=n.value:
"DepartureTime"==t?v=n.value:"ArrivalAirCode"==t?k=n.value:"DepartureAirCode"==t&&(q=n.value)}for(g=0;g<a.length;g++)f=a[g],n=f.id.split("_")[2],"ArrivalAirlineNumber"==n?l=f.value:"DepartureAirlineNumber"==n&&(r=f.value);b.push({itemType:"Car",itemId:e,city:d[1],selectedCarOption:h,selectedCarOptionArrivalAirCode:k,selectedCarOptionArrivalAirlineNumber:l,selectedCarOptionArrivalTransferTime:p,selectedCarOptionDepartureAirCode:q,selectedCarOptionDepartureAirlineNumber:r,selectedCarOptionDepartureTransferTime:v})}},
prepareTransferItemData:function(a,b){var d=a.id.split("_"),e=$(a).attr("data-id"),f=$(a).find('select[id^="selectedArrivalOption_"]'),g=$(a).find('input:text[id^="selectedArrivalOption_"]'),h=$(a).find('select[id^="selectedDepartOption_"]'),k=$(a).find('input:text[id^="selectedDepartOption_"]'),l=$(a).find('input:checkbox[id^="noFlightInfo"]');if(null!=f||null!=h){for(var p=a="",q="",r="",v="",n="",t="false",u=0;u<l.length;u++)l[u].checked&&(t="true");if(null!=f&&"false"==t){for(l=0;l<f.length;l++){u=
f[l];var w=u.id.split("_")[2];"AirCode"==w?a=u.value:"TransferTime"==w&&(q=u.value)}for(f=0;f<g.length;f++)if(l=g[f],"AirlineNumber"==l.id.split("_")[2]){p=l.value;break}}if(null!=h&&"false"==t){for(g=0;g<h.length;g++)f=h[g],l=f.id.split("_")[2],"AirCode"==l?r=f.value:"TransferTime"==l&&(n=f.value);for(h=0;h<k.length;h++)if(g=k[h],"AirlineNumber"==g.id.split("_")[2]){v=g.value;break}}b.push({itemType:"Transfer",itemId:e,city:d[1],selectedArrivalOptionAirCode:a,selectedArrivalOptionAirlineNumber:p,
selectedArrivalOptionTransferTime:q,noFlightInfo:t,selectedDepartOptionAirCode:r,selectedDepartOptionAirlineNumber:v,selectedDepartOptionTransferTime:n})}},_onSelectFocusIn:function(a){a.preventDefault()},_onSelectFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onSelectDropDownClick:function(a){a.preventDefault();a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")},_onChangeRailTime:function(a){a.preventDefault();
var b=this.module.TranslationTexts;a=$(a.currentTarget).attr("id").split("_");var d=a[0]+"_"+a[1];a=$("#"+d+"_1");var e=$("#"+d+"_2");d=$("#"+d+"_3");this._removeError(e);this._removeError(d);a.val()==e.val()&&e.val()==d.val()?(this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)),this._addError(d,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE))):a.val()==e.val()?this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE)):
(e.val()==d.val()||a.val()==d.val())&&this._addError(d,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE))},trackAdobeAndGA:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id");a="/vp/booking/viewSpecialRequests/"+a+"/"+b+"/"+d;$namespace.Analytics.track({vendor:"google",type:"pageview",text:a});$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"vacation package|Special Requests",
eVar2:"vacation package",eVar74:a})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};COUNTRY_CODE_US=$namespace.Country.US_COUNTRY_CODE;COUNTRY_CODE_CA=$namespace.Country.CANADA_COUNTRY_CODE;
$namespace.View.MultiCityPaymentOptionsView=Backbone.View.extend({el:"#multiCityPaymentOptions",ui:{chatLink:null,form:null,scheduledDueDate:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="continueToNext"]':"_onContinueClick",'click [data-hook="go_back"]':"_onBackLink",'click input[name="selectPaymentOption_ghp"]':"_onPayDepositOrFullRadioClick",'click button[data-hook="applyPromotionCode"]':"_onApplyPromotionCode",'keyup input[data-hook="promotionCode"]':"_onPromotionCodeChange"},
initialize:function(a){var b=$.extend({},a);this.module=b.module;this.controller=b.controller;this.module=a.module;this.packageId=$(this.el).data("package-id");this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});this.ui.scheduledDueDate=b.scheduledDueDate;this.ui.grossPaymentAmount=b.grossPaymentAmount;this.ui.minimumDepositAmount=b.minimumDepositAmount;this.module.options.grossPaymentAmount=b.grossPaymentAmount;this.module.options.minimumDepositAmount=b.minimumDepositAmount;
this.win=$namespace.SearchWidgetsModule.getWindowDimensions();this.isValidationSuccess=!1;utils.updateLiveContainer();this.ui.form=$("#multiCityPaymentOptions");this.translations=this.module.TranslationTexts;this.messages=this.module.TranslationMessages;this.initializeComponents();this.initializeErrorHandlers();$(".addPromotionCode").on("keypress keyup blur",function(a){return $namespace.Validation.isAlphaNumericKeyCode(a)});1==$("#promotionDetails").length&&($("#promotionDetails").addClass("sp-bot-4"),
0<$("#promotinDetailsDiv").has("#appliedPromotions").length&&($("#promotionDetails .card").addClass("alert"),$("#promotionDetails .card").addClass("alert-confirmation"),$("#promotionDetails .card").removeClass("card")));this.trackAdobe();this.trackGA();this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);$(".backtopreviouspage").removeAttr("role");$(window).load(function(){$("html, body").animate({scrollTop:$("#multiCityPaymentOptions").offset().top-
400},50)})},trackEventAccordion:function(a,b){b.hasClass("flightsSummaryAccordionTab")?$namespace.Analytics.trackEvent("VP_Payment _Option_Results_Round-Trip","Click","Expand"):b.hasClass("multitiCityTIAccordionTab")&&$namespace.Analytics.trackEvent("VP_Payment_Option_Results_Multi-City","Click","Expand")},_onBackLink:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SPECIAL_REQUESTS)},_validateAndSubmit:function(){var a=this,b=$(".paymentForm").trigger("generatePaymentFormDetails").data("paymentFormDetails");
b={pfa:"VALIDATE_CREDIT_CARDS_AND_CONTINUE_TO_FINALIZE",paymentFormDetails:JSON.stringify(b)};$namespace.AjaxUtil.makeAjaxCall("paymentFormActivity.act",$.param(b),null,null,function(b){b=JSON.parse(b);a.isValidationSuccess=b.successful;a.isValidationSuccess&&$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_PAYMENT_SUMMARY)})},_onPayDepositOrFullRadioClick:function(a){var b=this,d={pfa:"CHANGE_PAYMENT_FORM",paymentFormTypeValue:"DEPOSIT"};"full"===$(a.target).val()&&
(d.paymentFormTypeValue="FULL");var e=function(){b.initializeComponents();b.initializeErrorHandlers();$("#shippingAddressForm").find(".addressForm").trigger("reset")};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(d),null,"deposit-or-full-payment",function(a){a&&(d.pfa="LOAD_PAYMENT_FORM",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(d),null,"deposit-or-full-payment",e))})},_showCancellationPolicyModal:function(){var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null)},_onContinueClick:function(a){$(".errorHandlerInitialized").trigger("removeError").trigger("validate");
$(a.target).trigger("validate");a=$(".errorDetected").filter(":visible");var b=a.first();0<b.length?(b.hasClass("")&&(b=a[1]),b.focus(),$namespace.DomUtil.scrollToMiddle(b[0])):this._validateAndSubmit()},_onApplyPromotionCode:function(a){var b=$(this.el).data("package-id");utils.updateLiveContainer();var d=this,e=$("#"+a.target.id);a=$("#promotionCodeEntry").val();a=a.toUpperCase();var f=e.attr("data-promotionModule");e=e.attr("data-bookingId");a="proms=VALIDATE_PROMOTION_CODE&promotionCode="+a+("&promotionModule="+
f)+("&bookingId="+e);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("promotion.act",a,null,"promotinDetailsDiv",function(a){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);this.messageCode==$namespace.BookingPromotionConstants.BOOKING_PROMOTION_APPLICABLE?($("#promotionDetails").addClass("promotion-success").removeClass("feature-box"),$("#promotionDetails div:first-child").removeClass("feature-box"),$("#promotionCodeEntry").removeAttr("aria-describedby"),
$("#promotion-apply-result").remove(),$("#promotion-entry-form").remove(),$("#promotinDetailsDiv").show(),$("#promotionDetails .card").addClass("alert"),$("#promotionDetails .card").addClass("alert-confirmation"),$("#promotionDetails .card").removeClass("card"),a=$("#appliedPromotionsSuccessMessage").html(),utils.updateLiveContainer(a.trim()),4711==this.messageCode?$namespace.Analytics.trackEvent("Success/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options",
"promotion_code_applied",b):4714==this.messageCode&&$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_already_applied",b),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("costcoShopCardActivity.act","csca=LOAD_COSTCO_SHOP_CARD_FORM_FOR_BOOKING_WORKFLOW",null,"costcoShopCardFormContainer",function(){$(".paymentForm").removeClass("initialized");setTimeout(function(){d.initializeComponents();d.initializeErrorHandlers()},
300);if(0<$("#shopCardCountry").length&&$("#shopCardCountry").val().trim()==$namespace.Country.CANADA_COUNTRY_CODE){var a=$("#zipCode").val();a=a.toUpperCase().replace(/\W/g,"");if(3<=a.length){var b=a.substring(0,3);a=a.substring(3);a=b+" "+a}$("#zipCode").val(a)}},null)):(4713==this.messageCode?$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_invalid",b):4714==this.messageCode&&$namespace.Analytics.trackEvent("Error/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/Payment_Options","promotion_code_already_applied",b),$("#promotionCodeEntry").attr("aria-describedby","promotion-apply-result"),$("#promotionCodeEntry").addClass("error"),$("#promotionCodeEntry").focus(),$("#promotion-apply-result").html(this.message.text).addClass("error"),$("#promotion-apply-result").show());return!0})},_onPromotionCodeChange:function(a){$("#promotionCodeEntry").removeClass("error")},initializeComponents:function(){$(window).resize();
var a="Error/VP/Payment_Options,amount,"+$(this.el).data("package-id"),b={scheduledDate:this.ui.scheduledDate,scheduledDueDate:this.ui.scheduledDueDate,translations:this.translations,messages:this.messages,trackingText:a,trackFormFieldsAnalytics:$.proxy(this.trackFormFieldsAnalytics,this)};$(".paymentForm").each(utils.eachUninitialized(function(a,d){d.paymentForm=new $namespace.Widgets.PaymentForm(a,b)}));var d={translations:this.translations};$(".addressForm").each(utils.eachUninitialized(function(a,
b){b.addressForm=new $namespace.Widgets.AddressForm(a,d)}));var e={grossPaymentAmount:this.ui.grossPaymentAmount,minimumDepositAmount:this.ui.minimumDepositAmount,amountLessThanMsg:this.messages.AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,totalLessThanMsg:this.messages.TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,amountGreaterThanMsg:this.messages.AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,totalGreaterThanMsg:this.messages.TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,depositMinMaxMsg:this.messages.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE,
trackingText:a};this.ui.continueButtons=$('a[data-hook="continueToNext"]').not("amountValidatorInitialized");this.ui.continueButtons.each(function(a,b){b.amountValidator=new $namespace.Widgets.AmountValidator($(b),e)});this.$el.find(".country").on($namespace.Widgets.AddressForm.countryChangeEvent,$.proxy(this._zipStateGATracking,this));this.trackFormFieldsAnalytics();$namespace.TabOrder.updatePageTabOrder()},trackAdobe:function(){var a=$(this.el).data("destination-name"),b=$(this.el).data("region"),
d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"vacation package|Payment Options",eVar2:"vacation package",eVar74:"/vp/booking/viewPaymentOptions/"+a+"/"+b+"/"+d})},trackGA:function(){var a=$(this.el).data("destination-name"),b=$(this.el).data("region"),d=$(this.el).data("package-id");$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/vp/booking/viewPaymentOptions/"+a+"/"+b+"/"+d})},initializeErrorHandlers:function(){$(".creditCardAmountTextBox").each(function(){var a=
$(this);a.hasClass("errorHandlerInitialized")||new $namespace.Widgets.ErrorHandler(a)})},trackFormFieldsAnalytics:function(){var a;this._zipStateGATracking();var b=$(this.el).data("package-id");this.$el.find(".addressForm").each(function(d,e){e.addressForm&&(a="Error/VP/Payment_Options,street_required,"+b,e.addressForm.streetGATracking(a),a="Error/VP/Payment_Options,city_required,"+b,e.addressForm.cityGATracking(a))});this.$el.find(".paymentForm").each(function(d,e){e.paymentForm&&e.paymentForm.shopCardCheckboxGATracking&&
(a="Error/VP/Payment_Options,shipping_address_required,"+b,e.paymentForm.shopCardCheckboxGATracking(a));e.paymentForm&&e.paymentForm.primaryPhoneGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,phone_number_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,phone_number_invalid,"+b,e.paymentForm.primaryPhoneGATracking(a));e.paymentForm&&e.paymentForm.alternatePhoneGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=
"Error/VP/Payment_Options,phone_number_invalid,"+b,e.paymentForm.alternatePhoneGATracking(a));e.paymentForm&&e.paymentForm.primaryEmailGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,email_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,email_invalid,"+b,e.paymentForm.primaryEmailGATracking(a));e.paymentForm&&e.paymentForm.alternateEmailGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=
"Error/VP/Payment_Options,email_invalid,"+b,e.paymentForm.alternateEmailGATracking(a));e.paymentForm&&e.paymentForm.datePickerGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,scheduled_date_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,scheduled_date_invalid,"+b,e.paymentForm.datePickerGATracking(a))});this.$el.find(".creditCardForm").each(function(d,e){e.creditCardForm&&(a="Error/VP/Payment_Options,cardholder_name_required,"+
b,e.creditCardForm.cardholderGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,CC_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,CC_invalid,"+b,e.creditCardForm.creditCardNumberGATracking(a));e.creditCardForm&&e.creditCardForm.cvvCodeGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,CVV_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,CVV_invalid,"+
b,e.creditCardForm.cvvCodeGATracking(a));e.creditCardForm&&e.creditCardForm.creditCardExpiryMonthGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,expiration_month_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,expiration_month_required,"+b,e.creditCardForm.creditCardExpiryMonthGATracking(a));e.creditCardForm&&e.creditCardForm.creditCardExpiryYearGATracking&&(a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=
"Error/VP/Payment_Options,expiration_year_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,expiration_date_past,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL]="Error/VP/Payment_Options,expiration_before_scheduled_date,"+b,e.creditCardForm.creditCardExpiryYearGATracking(a))})},_zipStateGATracking:function(){var a,b=$(this.el).data("package-id");this.$el.find(".addressForm").each(function(d,e){e.addressForm&&(d=$(e).find(".country").val(),a=d==
COUNTRY_CODE_CA?"Error/VP/Payment_Options,province_required,"+b:"Error/VP/Payment_Options,state_required,"+b,e.addressForm.stateOrProvinceGATracking(a),a={},d==COUNTRY_CODE_CA?(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,postalcode_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]="Error/VP/Payment_Options,postalcode_invalid,"+b):(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]="Error/VP/Payment_Options,zipcode_required,"+b,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=
"Error/VP/Payment_Options,zipcode_invalid,"+b),e.addressForm.zipCodeGATracking(a))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var validate=$namespace.Validation||{},messageUtil=$namespace.MessageUtil||{};$namespace.View=$namespace.View||{};
$namespace.View.MultiCityFinalizeBookingView=Backbone.View.extend({el:"#multiCityFinalizeBooking",events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click [data-hook="continueToNext"]':"_onContinueClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion","click a.airline_baggage_policy":"_onAirlineBaggagePolicyClick",'click a[data-modal="dataItineraryModal"]':"_showItineraryRemarksModal",'click a[data-modal="activityDataModal"]':"_onToursLinkClick",'click a[data-hook="productItineraryInfo"]':"_showAdditionalInformation",
"click a.interCityMegaTipLink":"_onInterCityFlightMegaTipClick",'click [data-hook="go_back"]':"_onBackLink"},initialize:function(a){var b=this;this.controller=$.extend({},a).controller;this.module=a.module;this._initShopCardTooltips();this.trackGA();this.trackAdobe();$namespace.Widgets.Accordion.accIDCounter=10;a=this.$el.find("[data-megatip='flightDetailsMegatip']");if(a.length){var d=new $namespace.Widgets.Megatip(a);a[0].megatip=d;a.on("click",$.proxy(d._onClick,d));document.getElementById("flightDetailsMegatip").scrollIntoView({block:"center"})}$.hook("parent-accordion").each(utils.eachUninitialized(function(a,
b){$namespace.Widgets.Accordion.accIDCounter+=1;b.accordion=new $namespace.Widgets.Accordion(a)}));this.$el.find('[data-hook="parent-accordion"],[data-hook="accordion"]').each(function(a,b){b.accordion&&b.accordion.close(!0)});$("#flightDetailsMegatip .termsAndConditions a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target");$(this).addClass("external-link bold")});$("#flightDetailsMegatip .termsAndConditions").on("click",".external-link",
this._onExternalLinkClick);this._addAriaLevelOrRole($("#flightDetailsMegatip .termsAndConditions h3"),"5","heading");this._addAriaLevelOrRole($(".interCityFlightDetailsMegatip .termsAndConditions h3"),"6","heading");$(".interCityFlightDetailsMegatip .termsAndConditions h3").each(function(a){_.isEmpty($(this).text())&&$(this).remove()});setTimeout(function(){b._makeAccordionContentIdUnique()},100);$(".backtopreviouspage").removeAttr("role")},_makeAccordionContentIdUnique:function(){var a=1;$("div.accordion-content").each(function(b){b=
"accContent"+a;$(this).attr("id",b);$(this).closest("div.accordion-item").find("span.accordion-button").attr("aria-controls",b);a++})},_addAriaLevelOrRole:function(a,b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onInterCityFlightMegaTipClick:function(a){a=$(a.currentTarget);var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b=a[0].megatip;b.show()},_onBackLink:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_PAYMENT)},
_showItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=a.attr("data-includeRemarks"),e=a.attr("data-rate-info-title");a="";b={itineraryCode:b};d?(b.mctc="LOAD_FILTERED_ITINERARY_REMARKS",a="Hotel_Included_Extras"):(b.mctc="LOAD_ITINERARY_REMARKS",a="Hotel_Room_Rate");"true"==e&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;
this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_ITINERARY_REMARKS_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);e=$(this.el).data("package-id");$namespace.Analytics.trackEvent(a,"click",e);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",$.param(b),null,null,d,null)},_showCancellationPolicyModal:function(){var a=$(this.el).data("package-id"),
b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,b,null);$namespace.Analytics.trackEvent("Finalize_Booking_Cancellation_Policy_Schedule",
"click",a,null)},_resetFlightsAccordion:function(a){a=$(a.target).closest(".megatip").attr("id");a=$("#"+a+" .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")});$namespace.TabOrder.updatePageTabOrder()},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||
(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))});$(".shopCardToolTip").each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b),{parentSelector:"li"}))})},_onToursLinkClick:function(a){a=$(a.currentTarget);$("#packageId").val();a.data("activity-name");a={ssc:"LOAD_RECAP_SIGHTSEEING_POPUP",sightseeingId:a.attr("data-tour-id"),itineraryCode:a.data("iternary-code")};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",$.param(a),null,null,
function(){(new $namespace.Widgets.Modal(this.responseText)).show();$("#modalTitleActivitiesDetail").focus();$(".tourDetailModalPopup").find("table").attr("role","presentation")},null)},_showAdditionalInformation:function(a){a=$(a.currentTarget);a.attr("data-product");$(this.el).data("package-id");a={mctc:"LOAD_ITINERARY_REMARKS",itineraryCode:a.data("iternary-code")};var b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,
text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",$.param(a),null,null,b,null)},messageModalCloseHandler:function(a){a!=$namespace.ErrorCodes.PAYMENT_TRANSACTION_CVV_ERROR&&a!=$namespace.ErrorCodes.PAYMENT_TRANSACTION_AVS_ERROR&&a!=$namespace.ErrorCodes.PAYMENT_CREDIT_CARD_INFO_MISMATCH&&a!=$namespace.ErrorCodes.PAYMENT_TRANSACTION_PROCESSING_ERROR||
window.history.back()},_onContinueClick:function(a){a.preventDefault();var b=this;$namespace.DomUtil.setElementLoadingMaskForPayment(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityBookingConfirmation.act",$.param({mcbca:"CONFIRM_BOOKING_PAYMENT_INFO"}),null,null,function(a){!0===a?(a=this.callbackFunctionParams[1],$namespace.DomUtil.setElementLoadingMaskForPayment(!1),$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_HOME),$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_ORDER_CONFIRMATION,
[""+a])):this.message&&($namespace.DomUtil.setElementLoadingMaskForPayment(!1),this.messageCode==$namespace.ErrorCodes.PROCESSING_ERROR?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):$namespace.MessageUtil.showMessage({type:1,text:this.message,closeHandler:$.proxy(b.messageModalCloseHandler,b,this.messageCode)}),$namespace.DomUtil.setElementLoadingMask(!1,null,!1))},null)},trackGA:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id"),
e="finalizeBooking";this.fromOfferPage&&(e="offerPage");$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/vp/booking/"+e+"/"+a+"/"+b+"/"+d})},trackAdobe:function(){var a=$(this.el).data("destination"),b=$(this.el).data("region"),d=$(this.el).data("package-id"),e="finalizeBooking";this.fromOfferPage&&(e="offerPage");$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:"Finalize Booking - Packages|Costco Travel ",eVar2:"vacation package",eVar34:a,eVar74:"/vp/booking/"+
e+"/"+a+"/"+b+"/"+d})},_onExternalLinkClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};breakpoint=utils.Breakpoint;MARGIN_TOP_PIXEL=400;$namespace.View=$namespace.View||{};
$namespace.View.MultiCityFinalBookingConfirmationView=Backbone.View.extend({el:"#multiCityFinalBookingConfirmation",ui:{chatLink:null,form:null},events:{"click #cancellation_policy_schedule_modal_id":"_showCancellationPolicyModal",'click a[data-hook="trip-protection-link"]':"_onTripProtectionClick",'click [data-hook="print_itinerary"]':"_onPrintClick",'click [data-hook="email_itinerary"]':"_onEmailClick",'click [data-hook="manage_payments"]':"_onManagePaymentsClick",'click [data-hook="showmore-trigger"]':"_showMoreInformation",
'click [data-hook="showless-trigger"]':"_readLessInformation",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click a[data-hook="productItineraryInfo"]':"_showItineraryRemarksModal","click a.airline_baggage_policy":"_onAirlineBaggagePolicyClick",'click a[id^="transportation_additional_informations_modal_id"]':"_showItineraryRemarksModal",'click [data-hook="megatip-close"]':"_resetFlightsAccordion",'click a[data-modal="responsive-popup-data-modal"]':"_showCancellationResponsivePopup",
'click a[data-modal="activity-data-modal"]':"_onToursLinkClick",'click [data-hook="add-flight-info"]':"_addFlightInfo",'click [data-hook="intercity-flight-megatip"]':"_onInterCityFlightMegaTipClick"},initialize:function(a){var b=this,d=$.extend({},a);this.controller=d.controller;this.module=a.module;this._initShopCardTooltips();a=this.$el.find("[data-megatip='flight-details-megatip']");if(a.length){var e=new $namespace.Widgets.Megatip(a);a[0].megatip=e;a.on("click",$.proxy(e._onClick,e));document.getElementById("flight-details-megatip").scrollIntoView({block:"center"})}this.$el.find('[data-hook="accordion"]').each(function(a,
d){d.accordion||(d.accordion=new $namespace.Widgets.Accordion($(d)));if(d.accordion)if(d.accordion.close(!0),"baggageAccordion"==$(d.accordion.button.context).data("id"))$(d).on("ct.accordion.clicked",$.proxy(b,"_onBaggageAccordionClick"));else if("termsAndConditionsAccordion"==$(d.accordion.button.context).data("id"))$(d).on("ct.accordion.clicked",$.proxy(b,"_onTermsAndConditionsAccordionClick"));else if("diningAccordion"==d.accordion.button.context.id)$(d).on("ct.accordion.clicked",$.proxy(b,"_onTermsAndConditionsAccordionClick"))});
$.hook("parent-accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a)}));this.$el.find('[data-hook="parent-accordion"],[data-hook="accordion"]').each(function(a,b){b.accordion&&b.accordion.close(!0)});this.win=$namespace.SearchWidgetsModule.getWindowDimensions();utils.updateLiveContainer();var f=this;this.ui.form=$("#multiCityFinalBookingConfirmation");this.destination=d.destinationCode;this.regionCode=d.regionCode;this.packageId=d.packageId;this.newBooking=
$(".bookingvalue").attr("data-id");a=$namespace.AnalyticsHelper.getVacationPackageTagForAdobe();this.adobeValueUpperCase=a.charAt(0).toUpperCase()+a.substr(1,a.length);this.ui.chatLink=this.$el.find("#chatNowLink");this.ui.chatLink&&(f=this,this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/booking/viewConfirmation/"+d.destinationCode+"/"+d.regionCode+"/"+d.packageId)}));$(".requiredDocCard h2").addClass("displayNone");
$(".requiredDocCard a").addClass("external-link");$(".requiredDocCard a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});$(".requiredDocCard").on("click",".external-link",f._checkTermsAndConditionLinksClick);$(".showmore-content").find(".blue-bullets").height()<$(".showmore-content").height()&&($(".showmore-trigger").parent().remove(),$(".showmore-content").removeClass("showmore-content"));$("#emailItineraryPopup").hide();$(".showmore-content .blue-bullets li").each(function(a,
b){1<=a?($(b).attr("aria-hidden","true"),$(b).find("a").attr("tabindex","-1"),$namespace.TabOrder.updatePageTabOrder(),1==a&&($namespace.Utils.Breakpoint.isMobile()?$(b).attr("id","mobileReadMoreLink"):$(b).attr("id","desktopReadMoreLink"),$(b).attr("tabindex","-1"))):$(b).find("a").attr("data-taborder","document")});a="";a="true"==this.newBooking?"/booking/viewConfirmation/":"/memberaccount/viewConfirmation/";$namespace.AnalyticsHelper.trackVacationPackagePageViewForGoogle(a+d.destinationCode+"/"+
d.regionCode+"/"+d.packageId);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:this.adobeValueUpperCase+"|Confirmation",v2:this.adobeValueUpperCase,v34:d.destinationCode,v74:"/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+a+d.destinationCode+"/"+d.regionCode+"/"+d.packageId});a=$("#transportResultArrivalTransfer");e=$("#transportResultDepartureTransfer");0==a.length&&($("#DepartureTransferUnavailable").addClass("displayNone"),$("#ArrivalTransferUnavailable").removeClass("displayNone"));
0==e.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").removeClass("displayNone"));1==a.length&&1==e.length&&($("#ArrivalTransferUnavailable").addClass("displayNone"),$("#DepartureTransferUnavailable").addClass("displayNone"));$(window).load(function(){$("html, body").animate({scrollTop:$("#multiCityFinalBookingConfirmation").offset().top-MARGIN_TOP_PIXEL},100);setTimeout(function(){f._makeAccordionContentIdUnique()},100)});this._addAriaLevelOrRole($("#flight-details-megatip .termsAndConditions h3"),
"5","heading");this._addAriaLevelOrRole($(".interCityFlightCard h4"),"6","heading");this._addAriaLevelOrRole($(".interCityFlightDetailsMegatip .termsAndConditions h3"),"6","heading");$("#showMoreTrigger").removeAttr("role");$("#showLessTrigger").removeAttr("role")},_makeAccordionContentIdUnique:function(){var a=1;$("div.accordion-content").each(function(b){b="accContent"+a;$(this).attr("id",b);$(this).closest("div.accordion-item").find("span.accordion-button").attr("aria-controls",b);a++})},_addAriaLevelOrRole:function(a,
b,d){_.isEmpty(b)||$(a).attr("aria-level",b);_.isEmpty(d)||$(a).attr("role",d)},_onInterCityFlightMegaTipClick:function(a){a=$(a.currentTarget);var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b=a[0].megatip;b.show()},_checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onManagePaymentsClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS)},_onPrintClick:function(a){a.preventDefault();
var b=this;$namespace.Analytics.trackEvent("Confirmation_Print_Reservation","Click",b.packageId);a=$(a.currentTarget).attr("data-booking-id");var d=_secureContextRoot+_webLoc+"/itinerary/"+a+"?printItinerary=true&_uid="+utils.getUID();window.open(d,"_blank","alwaysLowered=true,width=750,height=500,resizable,scrollbars,left=80,top=80");$namespace.AjaxUtil.makeAjaxCall("multiCityFinalBookingConfirmationActivity.act","mcfbc=PRINT_ITINERARY&bookingId="+a,null,null,function(){this.message&&$namespace.Analytics.trackEvent("Error/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Print_issue",b.packageId)},null)},sendEmail:function(a,b,d){a="mcfbc=SEND_EMAIL_ITINERARY&bookingId="+b+("&emailId="+$namespace.StringUtil.escapeNonAsciiChars(a));$namespace.AjaxUtil.makeAjaxCall("multiCityFinalBookingConfirmationActivity.act",a,null,null,d)},_onEmailClick:function(a){a.preventDefault();var b=this,d=$(a.currentTarget).attr("data-booking-id");a=$("#emailItineraryPopup").html();$namespace.Analytics.trackEvent("Confirmation_Email_Reservation",
"Click",b.packageId);(new $namespace.Widgets.Confirm(a,function(a){var e=a.el.find("#email_itinerary").val();a.el.find("button").addClass("disabled").prop("disabled",!0);$namespace.DomUtil.setElementLoadingMask(!0);b.sendEmail(e,d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",!1);$namespace.DomUtil.setElementLoadingMask(!1);var d=b.module.TranslationTexts,e=$('a[data-hook="email_itinerary"]');this.message?($namespace.MessageUtil.showMessage({type:1,text:this.message.text,
title:d.VP_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e}),$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Email_server_issue",b.packageId)):$namespace.MessageUtil.showMessage({type:0,text:d.VP_EMAIL_SENT_SUCCESSFUL_MESSAGE,title:d.VP_EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e})})},null,!0)).show()},_showCancellationPolicyModal:function(){$("#packageId").val();var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,
1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("viewCancellationPenalties.act","vcp=VIEW_CANCELLATION_PENALTIES",null,null,a,null);$namespace.Analytics.trackEvent("Confirmation_Cancellation_Policy_Schedule","Click",
this.packageId)},_onTripProtectionClick:function(a){a=$(a.currentTarget).attr("data-link");$namespace.Analytics.trackEvent("Confirmation_Add_Trip_Protection","Click",this.packageId);$namespace.Navigation.loadExternalUrl(a)},_showMoreInformation:function(a){a=$(a.currentTarget);$("#multiCityFinalBookingConfirmation").data("package-id");$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$('.blue-bullets li[aria-hidden="true"]').each(function(a,d){$(d).removeAttr("aria-hidden");
$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showless-trigger"]').removeClass("displayNone");$(window).trigger("resize");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();$namespace.TabOrder.updatePageTabOrder()},_readLessInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$('[data-hook="showmore-content"]').addClass("showmore-content");$(".blue-bullets li").each(function(a,
d){$(d).attr("aria-hidden","true");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showmore-trigger"]').removeClass("displayNone");$(window).trigger("resize");$("#showMoreTrigger").focus();$namespace.TabOrder.updatePageTabOrder()},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget),
d=b.attr("data-iternary-code");a=b.attr("data-includeRemarks");var e=b.attr("data-product");$("#theme_park_read_more").attr("data-vendorid");var f=$(this.el).data("package-id"),g=b.attr("data-rate-info-title");b={itineraryCode:d};b.mctc=a?"LOAD_FILTERED_ITINERARY_REMARKS":"LOAD_ITINERARY_REMARKS";"true"==g&&(b.itineraryRemarksModalTitle="Rate details and cancellation policy");g=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?
$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_ITINERARY_REMARKS_POPUP_ERROR_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityTransportationCard.act",$.param(b),null,null,g,null);d={ArrivalTransfer:{category:"MultiCity_Confirmation_Arrival_Transfer",label:f},DepartureTransfer:{category:"MultiCity_Confirmation_Departure_Transfer",
label:f},Car:{category:"MultiCity_Confirmation_Rental_Car",label:f},Rail:{category:"MultiCity_Confirmation_Rail",label:f},Ferry:{category:"MultiCity_Confirmation_Ferry",label:f},Hotel:{category:"MultiCity_Confirmation__Rate_Information",label:f+"_"+d}};e&&($namespace.Analytics.track({vendor:"google",type:"ev",action:"Click",category:d[e].category,label:d[e].label}),a&&"linkThemeParkTicketCardDescription"!=e&&$namespace.Analytics.trackEvent("MultiCity_Confirmation_Included_Extras","click",f))},_resetFlightsAccordion:function(a){a=
$("#flight-details-megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},_initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_showCancellationResponsivePopup:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code"),d=$("#"+b).html();b={cthr:"SHOW_CANCEL_MESSAGE"};"true"==a.attr("data-rate-info-title")&&(b.itineraryRemarksModalTitle=
"Rate details and cancellation policy");a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE}):(b=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(d),b.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",
$.param(b),null,null,a,null)},_onToursLinkClick:function(a){a=$(a.currentTarget);$("#packageId").val();a.data("activity-name");a="ssc=LOAD_RECAP_SIGHTSEEING_POPUP&sightseeingId="+a.attr("data-tour-id")+"&itineraryCode="+a.data("iternary-code");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("sightseeingContent.act",a,null,null,function(){(new $namespace.Widgets.Modal(this.responseText)).show();$("#modalTitleActivitiesDetail").focus();$(".tourDetailModalPopup").find("table").attr("role","presentation")},
null)},_addFlightInfo:function(a){a=$(a.currentTarget);var b=a.attr("data-model-type"),d=a.data("city-code"),e=a.data("city-index"),f=a.data("previouscity-has-car"),g=a.data("number-of-cars"),h=a.data("show-specialrequest-popuplink"),k=a.data("arrival-flight"),l=a.data("departure-flight");if("transfer"==b)var p="mcfbcsr=LOAD_FINAL_CONFIRMATION_SPECIAL_REQUESTS_TRANSFER_POPUP&transferItemId="+a.attr("data-booking-itemid");else"rental-car"==b&&(e=a.attr("data-city-index"),p="mcfbcsr=LOAD_FINAL_CONFIRMATION_SPECIAL_REQUESTS_RENTAL_CAR_POPUP&cityIndex="+
e);p+="&cityCode="+d;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingSpecialRequestActivity.act",p,null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);(new $namespace.Widgets.Modal(this.responseText)).show();$("#multiCitySpecialRequestsPopupDiv").attr("data-city-code",d);$("#multiCitySpecialRequestsPopupDiv").attr("data-city-index",e);$("#multiCitySpecialRequestsPopupDiv").attr("data-previouscity-has-car",
f);$("#multiCitySpecialRequestsPopupDiv").attr("data-number-of-cars",g);$("#multiCitySpecialRequestsPopupDiv").attr("data-show-specialrequest-popuplink",h);$("#multiCitySpecialRequestsPopupDiv").attr("data-arrival-flight",k);$("#multiCitySpecialRequestsPopupDiv").attr("data-departure-flight",l)},null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;widgets=$namespace.Widgets||{};$namespace.View=$namespace.View||{};
$namespace.View.VacationPackageBrowsePageView=Backbone.View.extend({el:"#vacation-package-browse-page",ui:{$carousel:null,$map:null},googleMap:null,collection:null,showMap:!1,showHotel:!1,events:{'click [data-hook="toggleArea"]':"showAreaList","click a.modal-gallery-thumb":"_onGalleryThumbClick",'keypress [data-hook="toggleArea"]':"showAreaList",'click a[data-hook="showVenueDetails"]':"loadParkAndTheaterVenuePopup",'click a[data-hook="showExternalPopup"]':"_showExternalPopup",'click a[data-hook="learnmore_click"]':"_onLearnMoreClick",
'click a[data-hook="showRegionArea"]':"_showRegionArea",'click a[data-hook="loadRegionArea"]':"_loadRegionArea"},initialize:function(a){a=$.extend({},a);this.module=a.module;this.destination=a.destination;this.area=a.area;this.region=a.region;this.destinationCode=a.destinationCode;this.regionCode=a.regionCode;this.locationCode=a.locationCode;this._initPageAnalytics();this._setDefaultValuesForSearchWidget();this.hotelRatingLinks=$(this.el).find(".travel-description a[data-tooltip]");if(this.hotelRatingLinks.length)for(a=
$(this.hotelRatingLinks[0]),this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}),a.off("click"),a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=function(a){return function(){a._toggleHotelRatingsTooltip(this);return!1}}(this);$('div[data-hook="infinite-carousel"]').each($namespace.Utils.eachUninitialized(function(a,b){b.carousel=window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX?new $namespace.Widgets.InfiniteCarousel(a,
{focusOnTitle:!1}):new $namespace.Widgets.InfiniteCarousel(a)}));this.$el.find('[data-hook="advisory-widget"]').each(function(a,b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"VacationPackageBrowsePage"})});this.rentalCarsTabSwitcher=new $namespace.Widgets.TabSwitcher($('div[data-hook="tab-switcher"]'));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));this._initAccordionAnalytics();this.ui.$map=
$.hook("hotel_map");this.ui.$map&&0<this.ui.$map.length&&(this.showMap=!0);this.ui.$carousel=this.$("#featuredHotelCarousel");this.showMap&&this.ui.$carousel&&0<this.ui.$carousel.length&&(this.carouselInstance=this.ui.$carousel[0].carousel,this.carouselLength=this.carouselInstance._length,this.handleCarousel());this.showMap&&this.loadMap();breakpoint.isMobile()?1==$("#destinationListMobile .destination-grouping").length&&$("#destinationListMobile .destination-title").addClass("no-margin"):1==$("#destinationListDesktop .destination-grouping").length&&
$("#columnContent").removeClass("col-lg-6").addClass("col-lg-3");a=$("#offers-description a");""==a.attr("href")&&(a.attr("href","#featuredDealsTopContent"),$("div.homePageContent").first().attr("id","featuredDealsTopContent"));$.hook("loadRegionArea").each(function(a,b){b.setAttribute("data-url",b.getAttribute("href"));b.removeAttribute("href")});setTimeout(function(){var a=$("div.turntoTeaser a.turnToTeaserWidgetLink");a.removeClass("text-underline");a.addClass("cursor-context-menu")},$namespace.WaitForElement.TIME_TO_WAIT);
a=$("#themeParkTab_FLDISNEYWORLD  a");var b=$("#themeParkTab_FLUNIVERSAL a"),d=$("#themeParkTabPanels_FLDISNEYWORLD #themeParkTitle"),e=$("#themeParkTabPanels_FLUNIVERSAL #themeParkTitle");a&&0<a.length&&a.text(d.val());b&&0<b.length&&b.text(e.val())},_onLearnMoreClick:function(a){a=$(a.currentTarget);$namespace.Analytics.trackEvent("Vacation_Packages_hotelfactsheet","click_learn_more",a.data("hotelid"))},_initAccordionAnalytics:function(){var a=this;$(this.el).find(".tabcontents").on("ct.accordion.opening",
function(b,d){d.data("event-category")&&$namespace.Analytics.trackEvent(d.data("event-category"),"Click",a.gaEventLabel)})},handleCarousel:function(){var a=this;$(document).on("ct:InfiniteCarousel:updated",function(b){a.toggleHotels(a.carouselInstance.currentIndex-a.carouselLength+1)})},controlCarousel:function(a){this.carouselInstance.currentIndex=a;this.carouselInstance.updateCarousel(!0,!1)},loadMap:function(a){a=[];var b=0;$(".featuredHotel").each(function(d,e){d={id:b,uid:e.getAttribute("data-hotelid"),
type:"Hotel",title:e.getAttribute("data-title"),latitude:parseFloat(e.getAttribute("data-latitude")),longitude:parseFloat(e.getAttribute("data-longitude"))};b++;a.push(d)});this.showHotel=0<a.length;$(".markerlink").each(function(d,e){d={id:b,type:e.getAttribute("data-type"),title:e.getAttribute("data-title"),latitude:parseFloat(e.getAttribute("data-latitude")),longitude:parseFloat(e.getAttribute("data-longitude")),target:e.getAttribute("data-target"),linkToValue:e.getAttribute("data-linkTo")};b++;
a.push(d)});utils.isArray(a)&&(a.map(function(a,b){a.isSelected=0===b?!0:!1;a.index=b+1;a.hotelAvailable=!0}),this.collection=new $namespace.Collection.MapMarkerCollection(a),this.initializeMap());this.showHotel&&(this.deselectLocation(this.collection.findWhere({isSelected:!0})),this.selectLocation(this.collection.get(0)))},_initPageAnalytics:function(){var a=document.title;this.gaEventLabel=a;this.gaEventCategory=$("#vacation-package-browse-page")[0].getAttribute("data-location");$namespace.Analytics.track({vendor:"adobe",
type:"pageview",events:"1",v1:a,v2:"Vacation Packages",v74:document.URL})},initializeMap:function(){if(this.showHotel){if(null!=this.collection&&void 0!=this.collection.get(0)){var a=this.collection.get(0).attributes.latitude,b=this.collection.get(0).attributes.longitude;new google.maps.LatLng(a,b)}}else a=null==this.ui.$map[0].getAttribute("data-latitude")&&null!=this.collection&&void 0!=this.collection.get(0)?this.collection.get(0).attributes.latitude:parseFloat(this.ui.$map[0].getAttribute("data-latitude")),
b=null==this.ui.$map[0].getAttribute("data-longitude")&&null!=this.collection&&void 0!=this.collection.get(0)?this.collection.get(0).attributes.longitude:parseFloat(this.ui.$map[0].getAttribute("data-longitude")),new google.maps.LatLng(a,b);this.googleMap=new google.maps.Map(this.ui.$map[0],{mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,fullscreenControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.fullscreenControl,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,
mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});this.showMarkers();this.showHotel&&(this.bindMarkers(),this.selectLocation(this.collection.get(0)));google.maps.event.addListener(this.googleMap,
"tilesloaded",function(){setTimeout(function(){$("#hotel_map").find('iframe,a,button, div[tabindex="0"]').attr("tabindex","-1")},$namespace.WaitForElement.TIME_TO_WAIT)})},showMarkers:function(){var a=this,b=new google.maps.LatLngBounds;this.collection.each(function(d){var e=d.get("marker");b.extend(e.getPosition());e.setMap(a.googleMap);a.addInfoWindowToMarker(a.map,e,d)});setTimeout(function(){a.googleMap.fitBounds(b)},$namespace.WaitForElement.TIME_TO_WAIT)},bindMarkers:function(){var a=this;this.collection.each(function(b){if("Hotel"==
b.get("type")){var d=b.get("index")-1+a.carouselLength;b=b.get("marker");google.maps.event.addListener(b,"click",function(b){0<=d&&a.controlCarousel(d);b=$(b.currentTarget)[0].children[0].getAttribute("data-hotelid");$namespace.Analytics.trackEvent(a.gaEventCategory+"_Map","Click",b)})}})},addInfoWindowToMarker:function(a,b,d){d="<div class='marker-description'>"+d.get("title")+"</div>";var e=new google.maps.InfoWindow({content:"<div class='border-blue'>"+d+"</div>"});d="mouseover";"ontouchstart"in
document.documentElement&&(d="mousedown");google.maps.event.addListener(b,d,function(){self.activeInfoWindow&&self.activeInfoWindow.close();e.open(a,b);self.activeInfoWindow=e});google.maps.event.addListener(b,"mouseout",function(){e.close()})},repositionMap:function(a){google.maps.event.trigger(this.googleMap,"resize");this.googleMap.panTo(a.getPosition())},toggleHotels:function(a){this.deselectLocation(this.collection.findWhere({isSelected:!0}));this.selectLocation(this.collection.findWhere({index:a}))},
deselectLocation:function(a){a.set("isSelected",!1)},selectLocation:function(a){a.set("isSelected",!0);a=a.get("marker");this.repositionMap(a)},_toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():this.hotelRatingsTooltip.show(a)},_setDefaultValuesForSearchWidget:function(){$("#vacation_package_destination").val(this.destinationCode);$("#vacation_package_destination").change();$("#destination").val(this.destinationCode);
$("#destination").change();$("#region").val(this.regionCode);$("#region").change()},showAreaList:function(a){a.preventDefault();a=$(a.currentTarget);var b=a.next(".regionlist"),d=a.find("img");b.next("a").focus();this._updateULAttributes(b,d);"false"===a.attr("aria-expanded")?a.attr("aria-expanded",!0):a.attr("aria-expanded",!1);$namespace.TabOrder.updatePageTabOrder()},_onGalleryThumbClick:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isHotelGallery:"true"})},_updateULAttributes:function(a,
b){a.hasClass("displayNone")?(a.removeClass("displayNone"),this._replaceImageSrcPath(b,"down","up")):(a.addClass("displayNone"),this._replaceImageSrcPath(b,"up","down"))},_replaceImageSrcPath:function(a,b,d){a.attr("src")&&(b=a.attr("src").replace(b,d),a.attr("src",b))},_showExternalPopup:function(a){a=$(a.currentTarget).data("url");$namespace.Analytics.trackEvent(this.gaEventCategory+"_Map","Click","Costco_Warehouse");$namespace.Navigation.loadExternalUrl(a)},_showRegionArea:function(a){a=$(a.currentTarget).data("location");
$namespace.Analytics.trackEvent(this.gaEventCategory+"_Map","Click",a)},_loadRegionArea:function(a){var b=$(a.currentTarget);a=b.data("target");var d=this.gaEventCategory+"_Accordion";b=b.data("url").trim();$namespace.Analytics.trackEvent(d,"Click",a);$namespace.Navigation.loadPage(b)},loadParkAndTheaterVenuePopup:function(a){a=$(a.currentTarget);var b=a.data("link-args"),d=a.text();a={ppt:"LOAD_THEME_PARK_VENUE_POPUP",destination:b.destination,region:b.region,area:b.area,venueId:b.venueId};var e=
function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var e=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText),$('.themeParkDetailModalPopup div[data-hook="accordion"]:not(.nested)').each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);a.removeClass("active").find(".accordion-content").hide();
b.accordion.close();a.find(".accordion.card.nested").each(utils.eachUninitialized(function(a,b,d){b.accordion=new $namespace.Widgets.Accordion(a);a.removeClass("active").find(".accordion-content").hide();b.accordion.close()}))})),$("div.themeParkVenuePopup .themeParkDetailModalPopup div.modal-title > h2").html(d),$(".themeParkDetailModalPopup div.modal-body > h2.accordion-header").html(b.parkName),e.show(),$namespace.TabOrder.updatePageTabOrder(e.el))}}(this);$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("packageParkAndTheater.act",$.param(a),null,null,e,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};validate=$namespace.Validation||{};messageUtil=$namespace.MessageUtil||{};$namespace.View=$namespace.View||{};
$namespace.View.cruiseAccountBookingConfirmationView=Backbone.View.extend({el:"#cruiseAccountBookingConfirmation",events:{'click [data-hook="print_itinerary"]':"_onPrintClick",'click [data-hook="email_itinerary"]':"_onEmailClick",'click [data-hook="manage_payments"]':"_onManagePaymentsClick",'click [data-hook="showmore-trigger"]':"_readMoreInformation",'click a[data-hook="show-more-itinerary-link"]':"_onShowMoreItineraryClick","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary",
"click .shopCardModal":"_onShopCardModalClick","click .shipboardCreditModal":"_onShipboardCreditModalClick",'click a[data-modal="data-itinerary-modal"]':"_onItineraryModalClick","click .amenityModal":"_onAmenityModalClick",'click a[id^="airline_baggage_policy"]':"_onAirlineBaggagePolicyClick",'click a[id="opc_Disclaimer_Link"]':"_onOpcDisclimerModalClick",'click [data-hook="megatip-close"]':"_resetFlightsAccordion","click .transferTypeLearnMore":"_onTransportationModalClick",'click a[data-hook="trip-protection-link"]':"_onTripProtectionClick",
"click a.megatipLink":"_onClickMegatipLink",'click a[data-hook="shop_card_tooltip"]':"_gaForCruiseShopCardToolTip",'click [data-hook="add-flight-info"]':"_onAddFlightInfoClick","click .travel-description-travel-rating a[data-tooltip]":"_gaForCruiseRatingToolTip"},cruiseLineName:null,sailingId:null,destinationName:null,initialize:function(a){var b=$.extend({},a);a=$(window);this.controller=b.controller;this.module=b.module;this.cruiseLineName=b.cruiseLineName;this.sailingId=b.sailingId;this.destinationName=
b.destinationName;$("#emailItineraryPopup").addClass("displayNone");this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});b=this.$el.find("#megaTip1");var d=this.$el.find("#megaTip2");0!==b.length&&this.initializeMegaTip(b);0!==d.length&&this.initializeMegaTip(d);this.setIdForExternalInfoLink();this.initShipRatingTooltip();this.showTravelerSpecialRequestAccordion();this.initCards();this.$el.find("[data-tooltip]").each(utils.eachUninitialized(function(a,b){b.tooltip=new $namespace.Widgets.Tooltip(a)}));
this.initPageAnalytics();this.initAccordionAnalytics();b=$("a#chatNowLink");if(1==b.length)b.on(window.ChatApi.chatLinkClickEvent,$.proxy(this.chatLinkAnalytics,this));this.removeDuplicateShopCardTooltips();a.on("resize orientationchange",$.proxy(this._onResize,this));a.trigger("resize")},removeDuplicateShopCardTooltips:function(){$namespace.Application.appendTooltipToBody();$('[id="shop_card_help_tooltip"]').not("body > #shop_card_help_tooltip").remove()},_onAddFlightInfoClick:function(a){var b=
this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("bookingTransferActivity.act",$.param({bta:"LOAD_CRUISE_SPECIAL_REQUESTS_ADD_FLIGHT_INFO_POPUP"}),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=new $namespace.Widgets.Modal(this.responseText,function(){e&&e.off("click")});$(".flightNumber").on("keypress",function(a){return $namespace.Validation.checkNumericKeyCode(a)&&4>$(a.target).val().length?($(a.currentTarget).trigger("removeError"),
!0):!1});$(".addFlightDropDown").on("click keypress",function(a){a=$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active");""!=$.trim(a.val())&&a.trigger("removeError")});$(".addFlightDropDown").on("focusin",function(a){a.preventDefault()});$(".addFlightDropDown").on("focusout",function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");a.hasClass("active")&&a.removeClass("active")});$(".noFlightInfo").on("change",function(){var a=$(this),b=a.attr("id").split("_").pop();
a.is(":checked")&&($("#flightInformation_"+b).find(".errorHandlerInitialized").trigger("removeError"),$("#airCode_"+b).val(""),$("#airlineNumber_"+b).val(""),$("#transferTime_"+b).val(""),$("#flightInformation_"+b).hide())});$(".yesFlightInfo").on("change",function(){var a=$(this),b=a.attr("id").split("_").pop();a.is(":checked")&&$("#flightInformation_"+b).show()});var e=$("#confirm-flight-btn");e.on("click",function(d){if(!b.hasAddFlightModalErrors()){$(d.currentTarget);var e=[];$(".flightInfoForm").each(function(a,
b){a=$(b);b=!1;var d=a.attr("id").split("_").pop(),f=a.find("#airCode_"+d).val(),g=a.find("#airport_"+d).val(),h=a.find("#airlineNumber_"+d).val(),k=a.find("#transferDate_"+d).val();if("fr_ca"===$namespace.GlobalConstants.LOCALE_CODE.toLowerCase()){var n=$namespace.GlobalConstants.LOCALE_DATE_FORMAT.replace(/mm/,"MM"),t=$namespace.DateUtil.getDefaultDateFormat();k=$namespace.DateUtil.reformatDateString(k,n,t)}n=a.find("#transferTime_"+d).val();t=a.find("#bookingItemUid_"+d).val();a.find("#noFlightInfo_"+
d).is(":checked")&&(b=!0);e.push({bookingItemUid:t,transferSpecialRequest:{noFlightInfo:b,airportCode:f,airlineCode:g,airlineNumber:h,airlineDate:k,airlineTime:n}})});d={bta:"UPDATE_SPECIAL_REQUESTS_FLIGHT_INFO_FROM_POPUP",specialRequestDetail:JSON.stringify({BOOKING_SPECIAL_REQUEST_DETAILS:e})};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("bookingTransferActivity.act",$.param(d),null,null,function(){window.history.go(0)},null);a.hide()}});a.show();
b.initializeAddFlightModalErrors()},null)},initializeAddFlightModalErrors:function(){var a=/[0-9]{1,4}/g,b=this,d={errorValidationType:"text",checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_AIRLINE_REQUIRED},e={errorValidationType:"text",regex:a,checkEmptyString:!0,matchRegex:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED,regexErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID},f={errorValidationType:"text",
regex:a,checkEmptyString:!0,matchRegex:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED,regexErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID},g={errorValidationType:"text",checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED},h={errorValidationType:"text",checkEmptyString:!0,blankErrMsg:b.module.TranslationTexts.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED};$(".flightInfoForm").each(function(a,
l){var k=$(l),q=k.attr("id").split("_").pop();a=k.find("#transferType_"+q).val();l=k.find("#airCode_"+q);var r=k.find("#airlineNumber_"+q);k=k.find("#transferTime_"+q);"Arrival Transfer"==a||"Cruise Airport Pier Transfer"==a?(b.arrivalAirlineValidator=new $namespace.Widgets.ErrorHandler(l,d),b.arrivalFlightNumberValidator=new $namespace.Widgets.ErrorHandler(r,e),b.arrivalTransferTimeValidator=new $namespace.Widgets.ErrorHandler(k,g)):(b.departureAirlineValidator=new $namespace.Widgets.ErrorHandler(l,
d),b.departureFlightNumberValidator=new $namespace.Widgets.ErrorHandler(r,f),b.departureTransferTimeValidator=new $namespace.Widgets.ErrorHandler(k,h))})},hasAddFlightModalErrors:function(){$namespace.Widgets.ErrorHandler.uniqueTrackingMessages=[];$(".errorHandlerInitialized").filter(":visible").trigger("removeError").trigger("validate",[!0]);var a=$(".errorDetected"),b=a.first();return 0<b.length?(b.hasClass("")&&(b=a[1]),b.focus(),!0):!1},initCards:function(){$(".req-doc-margin > div > h2").remove()},
_onTripProtectionClick:function(a){a=$(a.currentTarget).attr("data-link");$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Add_Trip_Protection","Click",this.getGaCruisePackageId());$namespace.Navigation.loadExternalUrl(a)},_resetFlightsAccordion:function(a){a=$(".megatip .accordion-item.active .accordion-button");0<a.size()&&a.each(function(){$(this).trigger("click")})},initializeMegaTip:function(a){var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b.megatip.find('[data-hook="accordion"]').each(function(a,
b){b.accordion=b.accordion||new $namespace.Widgets.Accordion($(b));b.accordion.close(!0)});a.addClass("initialized");a.on("click",$.proxy(b._onClick,b));return b},_onAirlineBaggagePolicyClick:function(a){a=$(a.currentTarget).attr("data-airline-policy");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onOpcDisclimerModalClick:function(a){a=$(a.currentTarget).attr("data-disclaimer-link");void 0!=a&&""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onShowMoreItineraryClick:function(a){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Itinerary",
"Show More",this.getGaCruisePackageId());a=$("div.itinerary-box");a.find(".accordion").removeClass("displayNone");a.find(".itinerary-table").removeClass("itinerary-table-display-none");$namespace.TabOrder.updatePageTabOrder();var b=$("div.itinerary-box .first-hidden-item");b.attr("tabindex")||b.attr("tabindex","-1");setTimeout(function(){b.focus();$("#showMoreItineraryAccordion").hide()},300)},setIdForExternalInfoLink:function(){var a=$(".confirmation-req-doc a");$(a).addClass("external-link");$(a).each(function(a){a=
$(this);a.attr("data-url",a.attr("href"));a.removeAttr("href");a.removeAttr("target")});$(".external-link").on("click",this.checkTermsAndConditionLinksClick);$(".showmore-content .blue-bullets li").each(function(a,d){$(d).attr("aria-hidden","true");$(d).find("a").attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder();0==a&&($namespace.Utils.Breakpoint.isMobile()?$(d).attr("id","mobileReadMoreLink"):$(d).attr("id","desktopReadMoreLink"),$(d).attr("tabindex","-1"))})},_onPrintClick:function(a){a.preventDefault();
var b=this;$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Print_Reservation","Click",b.getGaCruisePackageId());a=$(a.currentTarget).attr("data-booking-id");a=_secureContextRoot+_webLoc+"/itinerary/"+a+"?printItinerary=true&_uid="+utils.getUID();window.open(a,"_blank","alwaysLowered=true,width=750,height=500,resizable,scrollbars,left=80,top=80");$namespace.AjaxUtil.makeAjaxCall("emailOrPrintItineraryActivity.act",$.param({epa:"PRINT_ITINERARY"}),null,null,function(){this.message&&
$namespace.Analytics.trackEvent("Error/"+$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle()+"/Confirmation","Print_issue",b.packageId)},null)},_onEmailClick:function(a){a.preventDefault();var b=this;a=$("#emailItineraryPopup").html();$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Email_Reservation","Click",b.getGaCruisePackageId());(new $namespace.Widgets.Confirm(a,function(a){var d=a.el.find("#email_itinerary").val();a.el.find("button").addClass("disabled").prop("disabled",
!0);$namespace.DomUtil.setElementLoadingMask(!0);b.sendEmail(d,function(){a.hide();a.el.find("button").removeClass("disabled").prop("disabled",!1);$namespace.DomUtil.setElementLoadingMask(!1);if(void 0!=this.messageCode&&null!=this.messageCode)if(this.messageCode==$namespace.ErrorCodes.EMAIL_SEND_ERROR){var d="EMAIL_SEND_ERROR = "+$namespace.ErrorCodes.EMAIL_SEND_ERROR;$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId())}else this.messageCode==$namespace.ErrorCodes.EMAIL_ITINERARY_FAILED_TO_SEND?
(d="EMAIL_ITINERARY_FAILED_TO_SEND = "+$namespace.ErrorCodes.EMAIL_ITINERARY_FAILED_TO_SEND,$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId())):this.messageCode==$namespace.ErrorCodes.HTML_ITINERARY_GENERATE_ERROR?(d="HTML_ITINERARY_GENERATE_ERROR = "+$namespace.ErrorCodes.HTML_ITINERARY_GENERATE_ERROR,$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId())):this.messageCode==$namespace.ErrorCodes.EMAIL_INVALID_SENDER_DOMAIN_ERROR?
(d="EMAIL_INVALID_SENDER_DOMAIN_ERROR = "+$namespace.ErrorCodes.EMAIL_INVALID_SENDER_DOMAIN_ERROR,$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId())):this.messageCode==$namespace.ErrorCodes.INVALID_EMAIL_SEND_REQUEST?(d="INVALID_EMAIL_SEND_REQUEST = "+$namespace.ErrorCodes.INVALID_EMAIL_SEND_REQUEST,$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId())):this.messageCode==$namespace.ErrorCodes.INVALID_EMAIL_TO_ADDRESS&&
(d="INVALID_EMAIL_TO_ADDRESS = "+$namespace.ErrorCodes.INVALID_EMAIL_TO_ADDRESS,$namespace.Analytics.trackEvent("Error/CR/Member_Account_Confirmation",d,b.getGaCruisePackageId()));d=b.module.TranslationTexts;var e=$('a[data-hook="email_itinerary"]');this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e}):$namespace.MessageUtil.showMessage({type:0,text:d.EMAIL_SENT_SUCCESSFUL_MESSAGE,title:d.EMAIL_SENT_MESSAGE_TITLE,itemToFocus:e})})},
null,!0)).show()},sendEmail:function(a,b){a={epa:"SEND_EMAIL_ITINERARY",emailId:$namespace.StringUtil.escapeNonAsciiChars(a)};$namespace.AjaxUtil.makeAjaxCall("emailOrPrintItineraryActivity.act",$.param(a),null,null,b)},_readMoreInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});
$(window).trigger("resize");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Required_Docs","Click",this.getGaCruisePackageId());$namespace.TabOrder.updatePageTabOrder()},checkTermsAndConditionLinksClick:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onManagePaymentsClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS)},
initShipRatingTooltip:function(){(this.cruiseRatingLink=$(this.el).find(".travel-description-travel-rating a[data-tooltip]"))&&new $namespace.Widgets.Tooltip(this.cruiseRatingLink,{parentSelector:".cruise-item__ratings"})},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0})},showTravelerSpecialRequestAccordion:function(a){this.$el.find('[data-hook="special-request-item"]').each(utils.eachUninitialized(function(a,d){d.accordion=
new $namespace.Widgets.Accordion(a)}));$namespace.TabOrder.updatePageTabOrder()},_onShopCardModalClick:function(){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Shop_Card","Click",this.getGaCruisePackageId());this.showIncludedExtrasPopup(0)},_onShipboardCreditModalClick:function(){this.showIncludedExtrasPopup(1)},_onAmenityModalClick:function(a){a=$(a.currentTarget).attr("data-amenity-id");$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Amenity","Click",this.getGaCruisePackageId());
this.showIncludedExtrasPopup(2,a)},showIncludedExtrasPopup:function(a,b){a={amenitiesModalActivity:"LOAD_AMENITIES_MODAL_FOR_BOOKING_WORK_FLOW",modalType:a,amenityId:b};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCall("cruiseAmenitiesModal.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(new $namespace.Widgets.Modal(this.responseText)).show()},
null)},_onTransportationModalClick:function(a){switch($(a.currentTarget).attr("data-transfer-type")){case "ArrivalTransfer":var b="CR_Member_Account_Confirmation_Transportation_Arrival_Transfers";break;case "DepartureTransfer":b="CR_Member_Account_Confirmation_Transportation_Departure_Transfers";break;case "CruiseHotelPierTransfer":b="CR_Member_Account_Confirmation_Transportation_Hotel-Pier_Transfers";break;case "CruisePierHotelTransfer":b="CR_Member_Account_Confirmation_Transportation_Pier-Hotel_Transfers";
break;case "CruiseAirportPierTransfer":b="CR_Member_Account_Confirmation_Transportation_Airport_Pier_Transfer";break;case "CruisePierAirportTransfer":b="CR_Member_Account_Confirmation_Transportation_Pier_Airport_Transfer"}$namespace.Analytics.trackEvent(b,"Click",this.getGaCruisePackageId());this.showItineraryRemarksModal(a)},showItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");b=b.attr("data-cancellation-policy");a={cppt:"SHOW_ITINERARY_REMARKS",itineraryCode:a,
cancellationPolicy:b};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePrePostTransportation.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onItineraryModalClick:function(a){switch($(a.currentTarget).attr("data-modal-type")){case "RoomRate":var b="CR_Member_Account_Confirmation_Hotel_Room_Rate_Info";break;case "IncludedExtra":b="CR_Member_Account_Confirmation_Included_Extras";
break;case "OptionalServices":b="CR_Member_Account_Confirmation_Hotel_Optional_Service";break;case "MealPlans":b="CR_Member_Account_Confirmation_Hotel_Meal_Plan"}$namespace.Analytics.trackEvent(b,"Click",this.getGaCruisePackageId());this.showItineraryRemarksModal(a)},getGaCruisePackageId:function(){return"cr/memberaccount/viewConfirmation/"+this.cruiseLineName+"/"+this.sailingId},initPageAnalytics:function(){var a=document.title,b=this.getGaCruisePackageId();$namespace.Analytics.track({vendor:"adobe",
type:"pageview",events:"1",v1:a,v2:"Cruise",v34:this.destinationName,v67:"2",v68:"n/a",v74:b});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:b})},_onClickMegatipLink:function(a){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Flights_View_Details","Click",this.getGaCruisePackageId());a=$(a.currentTarget);var b=new $namespace.Widgets.Megatip(a);a[0].megatip=b;b=a[0].megatip;b.show()},initAccordionAnalytics:function(){var a=this,b=$(this.el);b.find(".baggageAndFees").on("ct.accordion.opening",
function(b,e){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Flights_Baggage_Fees","Click",a.getGaCruisePackageId())});b.find(".termsAndConditions").on("ct.accordion.opening",function(b,e){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Flights_Terms_and_Conditions","Click",a.getGaCruisePackageId())});b.find(".sailingItinerary").on("ct.accordion.opening",function(b,e){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Port_of_Call","Click",a.getGaCruisePackageId())});
b.find(".tourHighlight").on("ct.accordion.opening",function(b,e){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Tour_Highlight","Click",a.getGaCruisePackageId())});b.find(".special-request-accordions").on("ct.accordion.opening",function(b,e){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Special_Requests","Click",a.getGaCruisePackageId())})},_gaForCruiseShopCardToolTip:function(){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Shop_Card","ToolTip",
this.getGaCruisePackageId())},_gaForCruiseRatingToolTip:function(){$namespace.Analytics.trackEvent("CR_Member_Account_Confirmation_Ship_Rating","ToolTip",this.getGaCruisePackageId())},chatLinkAnalytics:function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",this.getGaCruisePackageId())}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseLineContentView=Backbone.View.extend({el:"#cruiseLine-content",events:{"click #showmorebutton":"_showMoreDetails","click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary","click a.modal-gallery-thumb-ship-details":"_onGalleryThumbClickShipDetails","change #resultSortSelect":"_onSortOptionChange","click .travel-description-travel-rating a[data-tooltip]":"_gaForCruiseRatingToolTip","click .dropDownArrow":"_onSelectDropDownClick","focusin #resultSortContainer":"_onSelectFocusIn",
"focusout #resultSortContainer":"_onSelectFocusOut","keypress .dropDownArrow":"_onSelectDropDownClick","click #heroImageDetailsLink":"_heroImageDetailsLinkClick","keydown #heroImageDetailsLink":"_heroImageDetailsLinkKeyDown"},initialize:function(a){var b=$.extend({},a);this.module=b.module;this.cruiseLineCode=b.cruiseLineCode;this.cruiseLineName=b.cruiseLineName;this.updateCruiseLineSearchSelector(b.cruiseLineCode);$(window).on("load",function(){var a=$("#heroImageDetailsLink");""==$("#heroImageDetailsLink").attr("href")&&
(a.attr("href","#primaryOfferRegion"),$("div.feature-box > div.feature-heading > h2").first().attr("id","primaryOfferRegion"));a=$(".hotel-card");a.slice(5,a.length).hide();var e=b.cruiseLineName;$(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=$("div.cruises div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.cruises div.landingPageContent div.hero-secondary").attr("data-image-url"):"";$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",
1],[".socialMediaTargetMobile",0]],"deal",e,a)}})});this.initTooltips();this.initPageAnalytics();window.setTimeout(function(){var a=0==$(".blastOffer").length?0:$(".blastOffer").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500);(a=$("#resultSortSelect").attr("data-sortByType"))&&$("#resultSortSelect").val(a)},updateCruiseLineSearchSelector:function(a){(a=$('#cruiseLine option[value="'+a+'"]'))&&a.prop("selected",!0)},initTooltips:function(){$("#cruiseLine-content").find(".travel-description-travel-rating a[data-tooltip]").not(".initialized").each(function(){new $namespace.Widgets.Tooltip($(this),
{parentSelector:".cruise-item__ratings"})})},initPageAnalytics:function(){var a=$(document).attr("title").split("|")[0].trim(),b="/Cruises/"+$(this.el).data("cruiseline-name");$namespace.Analytics.track({vendor:"google",type:"pageview",text:b},{vendor:"adobe",type:"pv",events:"event3",v1:a+" | Costco Travel",v2:"cruise"})},_showMoreDetails:function(a){a=$("#cruiseShipList .hotel-card:visible").length;$("#cruiseShipList .hotel-card:hidden").slice(0,5).show();$("#cruiseShipList .hotel-card").length==
$("#cruiseShipList .hotel-card:visible").length&&$("#showmorebutton").hide();$namespace.TabOrder.updatePageTabOrder();$("#shipcard_"+(a+1)).find("a").first().focus()},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0})},_gaForCruiseRatingToolTip:function(){var a=$(document).attr("title").split("|")[0].trim();$namespace.Analytics.trackEvent("CR_"+a+"_Ship_Rating","ToolTip","/Cruises/"+this.cruiseLineName)},_onGalleryThumbClickShipDetails:function(a){a=
$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0});a="/Cruises/"+$(this.el).data("cruiseline-name");var b=this.cruiseLineName.replace(" ","_");$namespace.Analytics.trackEvent("CR_"+b+"_cruises","Photos",a)},_heroImageDetailsLinkClick:function(){$namespace.Analytics.trackEvent("Hero_cruise","Click","Cruise_line");$("#primaryOfferRegion").focus();$namespace.TabOrder.updatePageTabOrder()},_heroImageDetailsLinkKeyDown:function(a){32===a.keyCode&&($("#primaryOfferRegion").focus(),
$namespace.TabOrder.updatePageTabOrder(),a.preventDefault())},_onSortOptionChange:function(a){var b=$(a.currentTarget),d=b.val(),e=this;b.find(":selected").text();$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseLineContent.act","&clpc=SORT_EXPLORE_CRUISE_SHIPS&sortByType="+d+"&cruiseLine="+this.cruiseLineCode,null,"cruiseShipList",function(){var a=e.module.TranslationTexts;switch(b.find(":selected").val()){case "name":var g=a.SORTED_BY_ALPHABETICALLY;break;case "ratingFrom":g=a.SORTED_BY_SHIP_RATING;
break;case "memberRating":g=a.SORTED_BY_COSTCO_MEMBER_RATING}utils.updateLiveContainer(g);this.message?e._showErrorModal(this):($("#resultSortSelect").val(d),e.initTooltips(),a=$(".hotel-card"),a.slice(5,a.length).hide());$("#resultSortSelect").focus()},null,null,null,null);$namespace.Analytics.trackEvent("CruiseLine_Ship_Sort","Click",d)},_showErrorModal:function(a){$namespace.DomUtil.setElementLoadingMask(!1,1);var b=$namespace.TranslationUtil.replaceParameters($namespace.CruiseSearchResultsModule.TranslationTexts.ACTION_ERROR,
{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER});$namespace.MessageUtil.showActionErrorMessage({text:b},null);$namespace.Analytics.trackPageView("/er/errorCode/"+a.messageCode+","+$namespace.MessageUtil.formatErrorMessageForAnalytics(a.message.text))},_onSelectFocusIn:function(a){a.preventDefault();$(a.currentTarget).addClass("focus")},_onSelectFocusOut:function(a){a.preventDefault();a=$(a.currentTarget);a.removeClass("focus");a.hasClass("active")&&a.removeClass("active")},_onSelectDropDownClick:function(a){a=
$(a.currentTarget);a.hasClass("active")?a.removeClass("active"):a.addClass("active")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseDestinationContentView=Backbone.View.extend({el:"#cruise-destination-page",events:{"click #heroImageDetailsLink":"_onheroImageDetailsClick"},initialize:function(a){this.initPageAnalytics();var b=$(".breadcrumb-text").text();$("#cruiseDestinationName").text(b);$namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED&&(b=$("div.cruises div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.cruises div.landingPageContent div.hero-secondary").attr("data-image-url"):"",
$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal",a.cruiseDestination,b));window.setTimeout(function(){var a=$(".cruises").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500);0<$(".bottomDescription").length&&$(".bottomDescription").attr("data-taborder","document");a=$("#heroImageDetailsLink");""==$("#heroImageDetailsLink").attr("href")&&(a.attr("href","#primaryOfferRegion"),
$("div.feature-box > div.feature-heading > h2").first().attr("id","primaryOfferRegion"))},initPageAnalytics:function(){$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"cruise"})},_onheroImageDetailsClick:function(a){$namespace.Analytics.trackEvent("Hero_Destination","Click","Cruise_Destination")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var COUNTRY_CODE_US=$namespace.Country.US_COUNTRY_CODE,COUNTRY_CODE_CA=$namespace.Country.CANADA_COUNTRY_CODE,BALANCE_PAYMENT_FORM="BALANCE",ADDITIONAL_PAYMENT_FORM="ADDITIONAL",SCHEDULED_PAYMENT_FORM="UPDATE_SCHEDULED",MASKED_CREDIT_CARD_NUMBER_REGEX=/(^[X]{12}[0-9]{4})|(^[X]{9}[0-9]{4})$/g;$namespace.View=$namespace.View||{};
$namespace.View.ManagePaymentsView=Backbone.View.extend({el:"#managePayments",ui:{chatLink:null,form:null},events:{'click input[name="selectPaymentOption_ghp"]':"_onChangePaymentOptionClick",'click a[data-hook="trip-protection-link"]':"_onTripProtectionClick",'click [data-hook="reviewAndConfirmbtn"]':"_reviewAndConfirmbtnClick",'click [data-hook="editPaymentBtn"]':"_editPaymentbtnClick","change .expirationMonthUtilityClass":"_expirationMonthChange","change .expirationYearUtilityClass":"_expirationYearChange",
"change .countryStateUtilityClass":"_countryStateUtilityClass","keyup .streetCityZipUtilityClass":"_streetCityZipUtilityClass","click .creditCardNumber":"_creditCardNumberClick","keyup .creditCardNumber":"_creditCardNumberKeyPress","blur .creditCardNumber":"_creditCardNumberBlur"},initialize:function(a){this.options=$.extend({},a);this.module=this.options.module;this.translations=this.module.TranslationTexts;this.paymentFormTypeValue=BALANCE_PAYMENT_FORM;this.creditCardUuid=null;this.initializeComponents();
this.trackPageAnalytics();this.onLiveChatLinkClick();this.pageLoadCountryChange=this.reset=!1},onLiveChatLinkClick:function(){var a=this.getParsedAnalyticsVars(),b=this.trackingText(a);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink.length)this.ui.chatLink.on("click",function(){$namespace.Analytics.trackEvent("Chat","Initiate_Chat",b)})},_creditCardNumberClick:function(a){this.isScheduledPaymentForm()&&!this.reset&&this.wipeOff()},_creditCardNumberKeyPress:function(a){this.isScheduledPaymentForm()&&
a.keyCode!=utils.Keyboard.TAB&&!this.reset&&this.wipeOff()},_creditCardNumberBlur:function(a){this.isScheduledPaymentForm()&&this.reset&&(a=this.$el.find(".creditCardNumber").val(),a=a.replace(/[^\d]/g,""),this.$el.find(".creditCardNumber").val(a))},_streetCityZipUtilityClass:function(a){var b=this.getParsedAnalyticsVars();b=this.getWorkFlow(b);!this.isScheduledPaymentForm()||a.keyCode==utils.Keyboard.TAB||this.reset||"CR"==b&&("CR"!=b||this.isAddressNotEmpty())||this.wipeOff()},_countryStateUtilityClass:function(a){var b=
this.getParsedAnalyticsVars();b=this.getWorkFlow(b);!this.isScheduledPaymentForm()||a.keyCode==utils.Keyboard.TAB||this.reset||this.pageLoadCountryChange||"CR"==b&&("CR"!=b||this.isAddressNotEmpty())||this.wipeOff();this.pageLoadCountryChange=!1},isAddressNotEmpty:function(){return $(".isAddressNotEmpty").data("address")},wipeOff:function(){var a=this.getCcuuid();$("#cardNumber_"+a).val("");$("#expirationYear_"+a).val("year");$("#expirationMonth_"+a).val("month");this.enableCvv();this.reset=!0},_expirationMonthChange:function(a){this.isScheduledPaymentForm()&&
!this.reset&&(a=this.getCcuuid(),$("#cardNumber_"+a).val(""),$("#expirationYear_"+a).val("year"),this.enableCvv(),this.reset=!0)},_expirationYearChange:function(a){this.isScheduledPaymentForm()&&!this.reset&&(a=this.getCcuuid(),$("#cardNumber_"+a).val(""),$("#expirationMonth_"+a).val("month"),this.enableCvv(),this.reset=!0)},isScheduledPaymentForm:function(){return this.paymentFormTypeValue==SCHEDULED_PAYMENT_FORM?!0:!1},getCcuuid:function(){return $("#paymentCreditCard").data("uuid")},enableCvv:function(){var a=
this.getCcuuid();$(".creditCardCheckSecurityCode").prop("disabled",!1);$("#cvv_"+a).val("");$(".cvvAsterix").show()},trackPageAnalytics:function(){var a=this.getParsedAnalyticsVars(),b=this.trackingText(a);$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:"managePayments"===a.page?"Manage Payments | Costco Travel":"review&Confirm"===a.page?"Review & Confirm | Costco Travel":"",v2:a.workflow,v74:b});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:b})},
trackingText:function(a){var b="",d=["vacation package","Cruise","dynamic package"];switch(a.workflow){case d[0]:b="/vp/booking/"+a.page+"/"+a.destination+"/"+a.regionCode+"/"+a.packageId;break;case d[1]:b="/cr/booking/bookingWidget/"+a.page+"/"+a.destination+"/"+a.cruiseLineName+"/"+a.shipName+"/"+a.departureDate;break;case d[2]:b="/dp/booking/"+a.page+"/"+a.destination+"/"+a.airportCode+"/"+a.packageId}return b},getParsedAnalyticsVars:function(){var a=$("#analyticsVars").text().trim();return JSON.parse(a)},
disableErrorHandler:function(a){return this.paymentFormTypeValue==SCHEDULED_PAYMENT_FORM&&(a.hasClass("creditCardCheckSecurityCode")&&a.prop("disabled")||a.hasClass("creditCardNumber")&&null!=a.val().trim().match(MASKED_CREDIT_CARD_NUMBER_REGEX))?!0:!1},initializeComponents:function(){var a=this.getParsedAnalyticsVars(),b=this.getWorkFlow(a),d="Error/"+b+"/Manage_Payments,";a=this.getPackageID(b,a);d=d+"Amount,"+a;var e={translations:this.module.TranslationTexts,messages:this.module.TranslationMessages,
disableErrorHandler:$.proxy(this.disableErrorHandler,this),trackingText:d};this.$el.find(".paymentForm").each(utils.eachUninitialized(function(a,b){b.paymentForm=new $namespace.Widgets.PaymentForm(a,e)}));this.$continueButtonErrors=this.$el.find(".managePaymentsContinue").siblings(".errorSelector");this.$continueButtonErrors.html("");this.$continueButtonErrors.empty().show();this.trackFormFieldsAnalytics();this.$el.find(".country").on($namespace.Widgets.AddressForm.countryChangeEvent,$.proxy(this._zipStateGATracking,
this));document.title=$("input#page_title").val()},completePayment:function(){var a={mpa:"CONFIRM_BALANCE_PAYMENT_INFO",paymentFormTypeValue:this.paymentFormTypeValue};$namespace.DomUtil.setElementLoadingMaskForPayment(!0,!0,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("managePaymentsActivity.act",$.param(a),null,null,this.redirectToConfirmationPage(),null)},submitPayment:function(){var a={mpa:"SAVE_SCHEDULED_PAYMENT",creditCardUuid:this.creditCardUuid};$namespace.DomUtil.setElementLoadingMask(!0,
!0,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("managePaymentsActivity.act",$.param(a),null,null,this.redirectToConfirmationPage(),null)},messageModalCloseHandler:function(a){a!=$namespace.ErrorCodes.PROCESSING_ERROR&&window.history.back()},trackErrors:function(a){var b=this.getParsedAnalyticsVars(),d="/"+b.destination+"/"+b.cruiseLineName+"/"+b.shipName+"/"+b.departureDate;$namespace.Analytics.trackEvent("Error/"+("vacation package"===b.workflow?"VP":"dynamic package"===b.workflow?"DP":"CR")+
"/Review_&_Confirm",a,"vacation package"===b.workflow||"dynamic package"===b.workflow?b.packageId:d)},redirectToConfirmationPage:function(){var a=this;return function(b,d){this.message?($namespace.DomUtil.setElementLoadingMask(!1),$namespace.DomUtil.setElementLoadingMaskForPayment(!1),this.messageCode!=$namespace.ErrorCodes.PROCESSING_ERROR&&this.messageCode!=$namespace.ErrorCodes.SCHEDULE_PAYMENT_ERROR_FOR_COSTCO_TRAVEL_MERCHANT&&this.messageCode!=$namespace.ErrorCodes.SCHEDULE_PAYMENT_ERROR_FOR_CRUISE_LINE_MERCHANT||
a.trackErrors($namespace.AnalyticsConstants.GOOGLE_ANALYTICS_ERROR_101_EVENT_ACTION),$namespace.MessageUtil.showMessage({type:1,text:this.message.text?this.message.text:this.message,closeHandler:$.proxy(a.messageModalCloseHandler,a,this.messageCode)})):$namespace.Navigation.loadPage(_webLoc+"/h="+b+"_"+d)}},_reviewAndConfirmbtnClick:function(a){var b=this.$el.find(".main-column");b.hasClass("managePaymentsForm")?($namespace.DomUtil.setElementLoadingMask(!0,!0,!1),this.$el.find(".errorHandlerInitialized").trigger("removeError"),
this.paymentFormTypeValue==ADDITIONAL_PAYMENT_FORM?this.$el.find(".creditCardAmountTextBox").one($namespace.Widgets.PaymentForm.amountChangeDoneEvent,$.proxy(this.validationContinue,this)).trigger("blur"):this.validationContinue(a)):b.hasClass("reviewAndConfirm")&&(this.paymentFormTypeValue==SCHEDULED_PAYMENT_FORM?this.submitPayment():this.completePayment())},validationContinue:function(a){if(this.paymentFormTypeValue!=SCHEDULED_PAYMENT_FORM||this.changeToFields()){this.$el.find(".errorHandlerInitialized").trigger("validate");
a=this.$el.find(".errorDetected:visible");var b=a.first();0<b.length?($namespace.DomUtil.setElementLoadingMask(!1),b.hasClass("")&&(b=a[1]),b.focus()):this.reviewAndConfirmContinue()}else $namespace.DomUtil.setElementLoadingMask(!1),this.addContinueButtonError()},reviewAndConfirmContinue:function(){var a=this,b=$(".paymentForm").trigger("generatePaymentFormDetails").data("paymentFormDetails"),d={pfa:"VALIDATE_CREDIT_CARDS_AND_CONTINUE_TO_REVIEWANDCONFIRM",paymentFormTypeValue:this.paymentFormTypeValue,
paymentFormDetails:JSON.stringify(b)};a=this;var e=this.paymentFormTypeValue,f=b.creditCards[0].creditCardInfoUuid;this.creditCardUuid=f;$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS);$namespace.AjaxUtil.makeAjaxCall("paymentFormActivity.act",$.param(d),null,null,function(b){b=JSON.parse(b);a.isValidationSuccess=b.successful;a.isValidationSuccess?(b={mpa:"LOAD_REVIEW_AND_CONFIRM_PAGE",paymentFormTypeValue:e,creditCardUuid:f},$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_MANAGE_MY_PAYMENTS+
"_1"),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("managePaymentsActivity.act",$.param(b),null,"page-content",a.updateButtonName(),null)):$namespace.DomUtil.setElementLoadingMask(!1)})},updateButtonName:function(){var a=this;return function(){$namespace.DomUtil.setElementLoadingMask(!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):($namespace.Application.initializeOnMainContentReload(),a.paymentFormTypeValue==SCHEDULED_PAYMENT_FORM?$(".continueReviewAndConfirm").text(a.translations.CONTINUE_TO_SUBMIT_UPDATE):
$(".continueReviewAndConfirm").text(a.translations.CONTINUE_TO_COMPLETE_PAYMENT),document.title=$("input#page_title").val(),a.trackPageAnalytics(),a.onLiveChatLinkClick(),$namespace.TabOrder.updatePageTabOrder(),$(".reviewAndConfirmFocus").focus())}},_editPaymentbtnClick:function(a){window.history.back()},_onTripProtectionClick:function(a){a=$(a.currentTarget);var b=$("#analyticsVars").text().trim();this.trackingText(JSON.parse(b));a=a.attr("data-link");b=this.getParsedAnalyticsVars();var d="managePayments"===
b.page?"Manage_Payments_Add_Trip_Protection":"review&Confirm"===b.page?"Review_&_Confirm_Add_Trip_Protection":"";"Cruise"!==b.workflow?$namespace.Analytics.trackEvent(d,"Click",b.packageId):$namespace.Analytics.trackEvent(d,"Click","/"+b.destination+"/"+b.cruiseLineName+"/"+b.shipName+"/"+b.departureDate);$namespace.Navigation.loadExternalUrl(a)},_onChangePaymentOptionClick:function(a){var b=this,d=$(a.target).val();this.paymentFormTypeValue=d;a={pfa:"LOAD_PAYMENT_FORM",paymentFormTypeValue:d,creditCardInfoUuid:$(a.target).data("ccuuid")};
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",$.param(a),null,"deposit-or-full-payment",function(){this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):(b.initializeComponents(),b.initializeErrorHandlers(),d==SCHEDULED_PAYMENT_FORM&&b.initializeScheduledPaymentForm())})},initializeErrorHandlers:function(){$(".creditCardAmountTextBox").each(function(){var a=$(this);a.hasClass("errorHandlerInitialized")||new $namespace.Widgets.ErrorHandler(a)})},
saveFieldState:function(){this.fieldState=[];var a=this;this.$el.find(".creditCardForm input, .creditCardForm select").each(function(b,d){a.fieldState.push($(d).val())})},changeToFields:function(){var a=this,b=!1;this.$el.find(".creditCardForm input, .creditCardForm select").each(function(d,e){b||a.fieldState[d]===$(e).val()||(b=!0)});return b},addContinueButtonError:function(){var a=$namespace.MessageUtil.prefixError(this.translations.CONTINUE_BUTTON_ERROR_MESSAGE);this.$continueButtonErrors.html(a).filter(":visible").show().focus();
var b=this;this.$el.find(".creditCardForm input, .creditCardForm select").one("keydown change",function(a){b.removeContinueButtonError(a)})},removeContinueButtonError:function(a){this.$continueButtonErrors.empty().hide()},initializeScheduledPaymentForm:function(){this.reset=!1;if(-1<this.$el.find(".creditCardNumber").val().indexOf("X")){$(".creditCardCheckSecurityCode").prop("disabled",!0);$(".cvvAsterix").hide();this.$el.find(".ui-datepicker-trigger").prop("disabled",!0);var a=this.$el.find(".stateOrProvince "),
b=a.val(),d=this.$el.find(".zipCode ").val();this.pageLoadCountryChange=!0;this.$el.find(".country").change();this.$el.find(".zipCode ").val(d);setTimeout(function(){a.val(b)},500)}this.saveFieldState()},getWorkFlow:function(a){return"vacation package"==a.workflow?"VP":"Cruise"==a.workflow?"CR":"DP"},getPackageID:function(a,b){return"VP"==a||"DP"==a?b.packageId:"/"+b.destination+"/"+b.cruiseLineName+"/"+b.shipName+"/"+b.departureDate},trackFormFieldsAnalytics:function(){var a;this._zipStateGATracking();
var b=this.getParsedAnalyticsVars(),d=this.getWorkFlow(b),e="Error/"+d+"/Manage_Payments,",f=this.getPackageID(d,b);this.$el.find(".creditCardForm").each(function(b,d){d.creditCardForm&&(a=e+"cardholder_name_required,"+f,d.creditCardForm.cardholderGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=e+"CC_required,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=e+"CC_invalid,"+f,d.creditCardForm.creditCardNumberGATracking(a),a=e+"expiration_month_required,"+f,d.creditCardForm.creditCardExpiryMonthGATracking(a),
a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=e+"expiration_year_required,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=e+"expiration_date_past,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL]=e+"expiration_before_scheduled_date,"+f,d.creditCardForm.creditCardExpiryYearGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=e+"CVV_required,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=e+"CVV_invalid,"+f,d.creditCardForm.cvvCodeGATracking(a))});
this.$el.find(".deposit-payment-credit-card-form .addressForm, .full-payment-credit-card-form .addressForm, .scheduleCreditCardForm .addressForm").each(function(b,d){d.addressForm&&(a=e+"street_required,"+f,d.addressForm.streetGATracking(a),a=e+"city_required,"+f,d.addressForm.cityGATracking(a))})},_zipStateGATracking:function(){var a,b=this.getParsedAnalyticsVars(),d=this.getWorkFlow(b),e="Error/"+d+"/Manage_Payments,",f=this.getPackageID(d,b);this.$el.find(".deposit-payment-credit-card-form .addressForm, .full-payment-credit-card-form .addressForm, .scheduleCreditCardForm .addressForm").each(function(b,
d){d.addressForm&&(b=$(d).find(".country").val(),a=b==COUNTRY_CODE_CA?e+"province_required,"+f:e+"state_required,"+f,d.addressForm.stateOrProvinceGATracking(a),a={},b==COUNTRY_CODE_CA?(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=e+"postalcode_required,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=e+"postalcode_invalid,"+f):(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=e+"zipcode_required,"+f,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=e+"zipcode_invalid,"+f),d.addressForm.zipCodeGATracking(a))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseSuperBookingPrePostCruiseHotelView=Backbone.View.extend({el:"#super-booking-cruise-hotel-page",ui:{map:null,showMoreHotelsLink:null,chatLink:null},googleMap:null,numberOfAdditionalHotels:0,collection:null,NUMBER_OF_HOTELS_PER_PAGE:5,selectedPage:1,events:{'click a[data-hook="continueToNextPage"]':"_onContinueToNextPageClick",'click [data-hook="show-more-hotels-link"]':"_onShowMoreHotelsClick","click a.modal-gallery-thumb":"_onGalleryThumbClick",'click [data-tab="map-tab"]':"_onMapTabClick",
'click [data-tab="list-tab"]':"_onListTabClick",'click a[data-modal="data-itinerary-modal"]':"_showItineraryRemarksModal",'click [data-hook="update-optional-service"]':"_onUpdateOptionalServiceCheckboxClick",'click [data-hook="selectNewHotel"]':"_onSelectNewHotelClick","change select#selectHotelSort":"_onSelectChange",'click a[data-hook="modify-room-toggle"]':"_toggleModifyRoom",'click a[data-hook="hotel-room-selection"]':"_onSelectClick",'click [data-hook="select-service-meal-plan"]':"_onSelectServiceMealPlanClick",
"click a.mealPlan":"_onLoadHotelPopupMealPlans","click .turnToTeaserWidgetLink":"_onReviewsLinkClick",'click a[id^="hotelLearnMore"]':"_onLearnMoreClick",'click a[data-hook="shop_card_tooltip"]':"_gaForShopCardToolTip","click a.hotel-advisory-link":"_onAdvisoryClickGA"},controller:null,destination:null,city:null,packageId:null,mapListTabSwitcher:null,initialize:function(a){var b=this;a=$.extend({},a);this.module=a.module;this.destinationCode=a.destinationCode;this.cruiseLineCode=a.cruiseLineCode;
this.shipName=a.shipName;this.sailingDate=a.sailingDate;this.pageType=a.pageType;document.title=$("input#page_title").val();this.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",this.$el);this.numberOfAdditionalHotels=$.hook("show-more-hotels-link",this.$el).data("additional-hotels-count")?$.hook("show-more-hotels-link",this.$el).data("additional-hotels-count"):0;this.selectedPage=$.hook("show-more-hotels-link",this.$el).data("selected-page")?$.hook("show-more-hotels-link",this.$el).data("selected-page"):
1;this.lastPage=0<this.numberOfAdditionalHotels?Math.ceil(this.numberOfAdditionalHotels/this.NUMBER_OF_HOTELS_PER_PAGE):1;$(".accordion-item").removeClass("accordion-item-current");$(".cruiseTravelerHotelAccordion").addClass("accordion-item-current");this.initLearnMoreLink();this.updateShowMoreButton();this.initHotelRatingTooltips();this.initShopCardTooltips();this.$el.find('[data-hook="advisory-widget"]').each(function(a,d){a=$(d);b.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"CruiseSuperBookingHotel"})});
this.ui.map=$.hook("hotel_map");var d=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(d,{getAllcb:function(){return d.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});this.locationsData={};this.sortType=$("#additionalHotelsContainer").attr("data-sort-type")?$("#additionalHotelsContainer").attr("data-sort-type"):0;this.ascendingOrder=!0;this.selectHotelSort=new $namespace.Widgets.SelectWidget(this.$("#select_hotel_sort"));this.$el.find("select#selectHotelSort").val(this.sortType);
this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,b){b.accordion.close(!0)});a=$(".hotelRoomsCard");this.roomAccodionsList=[];for(var e=0;e<a.length;e++){for(var f=$(a[e]).find(".nested-accordion"),g=$(a[e]).attr("id"),h=[],k=0;k<f.length;k++)h[k]=new $namespace.Widgets.Accordion($(f[k]));this.roomAccodionsList[g]=h}this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var l=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat",
"Initiate_Chat","/cr/booking/bookingWidget/"+l.pageType+"CruiseHotel"+l.getGaCruisePackageId())})}this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",$.proxy(this.trackEventAccordion,this));this.$el.find(".accordion").on("ct.accordion.opening",$.proxy(this.trackButtonAccordion,this));this.$el.find(".accordion").on("ct.accordion.clicked",this._trackAllAccordion);a=$namespace.MessageUtil.getSessionValue("FLIGHT_HOTEL_MESSAGE",!0);e=$namespace.MessageUtil.getSessionValue("No_CAR_AVAILABLE_UPDATING_FLIGHT_WITH_LANDING_TIME",
!0);_.isEmpty(a)||$(".hotelAlertMessage").show().find("> div").html(a);_.isEmpty(e)||($namespace.Analytics.trackEvent("Message/dp/hfc/Flights_Results","Due_to_the_change_in_flight_times_the_rental_car_has_been_removed_from_this_package/dp/hf/Hotel",this.packageId),$(".hfcNocarAvailableFlightChange").show().find("> div").html(e));$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",
$.proxy(this._onListTabClick,this));$namespace.GlobalConstants.FEATURE_FLAG_VP2_ENABLED&&(this.SEARCH_WIDGET_COOKIE_NAME="VP2_SEARCH_WIDGET_VALUES");$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged||this.initPageAnalytics()},trackButtonAccordion:function(a,b){b.hasClass("buttonRoomAccordion")&&(a=b.attr("data-hotel-item-id"),$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Room_Category","Click",this.getGaCruisePackageId()+"_"+a))},_trackAllAccordion:function(a,b){a=
$(a.currentTarget).closest("[data-hotelid]").data("hotelid");"Overview"==b?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Overview","click",this.getGaCruisePackageId()+"_"+a):"Property"==b?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Property","click",this.getGaCruisePackageId()+"_"+a):"Dining"==b?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Dining","click",this.getGaCruisePackageId()+"_"+a):"Rooms"==b?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Rooms",
"click",this.getGaCruisePackageId()+"_"+a):"Map"==b?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Map","click",this.getGaCruisePackageId()+"_"+a):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&$namespace.Analytics.trackEvent("Hotel_Hotel_Reviews",a,this.getGaCruisePackageId(),null)},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var b=this,d=$(this).data("destination"),
e=$(this).data("citycode"),f=$(this).data("hotelid"),g=$(this).data("megatip"),h=$(".dynamicPackageId").first().val(),k=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(f);d={vpc:"LOAD_OFFER_HOTEL_DETAIL_INFO",destination:d,cityCode:e,hotelId:f,displayReviewsAccordion:"false"};"true"==h&&(d.vpc="LOAD_DYNAMIC_HOTEL_DETAIL_INFO");null!=k&&(d.displayReviewsAccordion=k.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());$namespace.DomUtil.setElementLoadingMask(!0,
null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("vacationPackageContent.act",$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+g).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=
new $namespace.Widgets.Accordion(a)}));$('div[data-test="divHotelRoomInformationContainer"]').children().each(function(a,b){$(b).on("click",function(a){$(b).find("div.accordion-item");$(b).find("div.headers")})});$('.megatip DIV[data-hook="tab-switcher"]').each(utils.eachUninitialized(function(a,d){b.tabSwitcher=new $namespace.Widgets.TabSwitcher($('.megatip DIV[data-hook="tab-switcher"]'));b.tabSwitcher.currentTab=null}));b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,b,d){"features-tab"==a?$namespace.Analytics.trackEvent("Hotel_Property_Features",
"click",f):"activities-tab"==a&&$namespace.Analytics.trackEvent("Hotel_Property_Activities","click",f)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+f));b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-140)},50);""==$("#hotelRoomFeatureTabData").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden");""==$("#hotelPointOfInterestTabData").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},
null,"")})},_onLearnMoreClick:function(a){a=$(a.currentTarget).attr("data-hotelId");$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Learn_More","click",this.getGaCruisePackageId()+"_"+a)},_onAdvisoryClickGA:function(a){a=$(a.currentTarget).attr("data-hotelId");$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Advisory","click",this.getGaCruisePackageId()+"_"+a)},_onContinueToNextPageClick:function(a){a.preventDefault();a=$(a.currentTarget);this.nextPageName=a.attr("data-next-page-name");
this.currentPage=a.attr("data-current-page");a=$(".hotelIdValue").first().val();0!=this.$el.find("div.selectedHotel div[data-defaultHotelAvailable=false]").length?this.$el.find('div.selectedHotel a[data-hook="adjustSearch"]').click():($namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Results","Continue",this.getGaCruisePackageId()+"_"+a),this.validateHotelSelection())},validateHotelSelection:function(a,b){var d=this;var e="csbpph=VALIDATE_HOTEL_SELECTION&currentPage="+d.currentPage;$namespace.Validation.isBlankOrNull(a)||
(e+="&advisoryItemUid="+a);$namespace.Validation.isBlankOrNull(b)||(e+="&roomTaxesAndFeesAcknowledged="+b);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperBookingPrePostCruiseHotel.act",e,null,null,function(b){var e=$namespace.Widgets.Advisory.TranslationTexts;var f=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED)===$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT?"Message/"+
$namespace.AnalyticsHelper.getVacationPackagePrefixForGoogle().toUpperCase()+"/HF_hotel_hotel_advisory":"Message/"+d.getPageType()+"Hotel_Advisory";if(this.message)$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.HOTEL_ADVISORY_POPUP_ERROR_TITLE});else{var k=$(".hotelIdValue").first().val();if($namespace.Validation.isBlankOrNull(b))$namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(d,"validateHotelSelection"))).show(),
$("#acknowledgementModalPopup").on("click",function(a){"modal-close"===$(a.target).data("hook")&&$namespace.Analytics.trackEvent(f,"Close",d.getGaCruisePackageId()+"_"+k)}),$namespace.Utils.Breakpoint.isDesktop()&&$("#hotelAcknowlegementContentDiv, #hotelTafAcknowlegementContentDiv").find("label").each(function(a,b){b.removeAttribute("for")});else switch($namespace.Validation.isBlankOrNull(a)||$namespace.Analytics.trackEvent(f,"Continue",d.getGaCruisePackageId()+"_"+k),d.nextPageName){case "Details":$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS);break;case "PostCruiseHotel":$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_POST_HOTEL_RESULTS);break;case "Transportation":$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_POST_TRANSFER_RESULTS);break;case "LoginAndBook":$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS)}}},null,
"")},_onGalleryThumbClick:function(a){a=$(a.currentTarget);var b=a.attr("data-hotelId");new $namespace.Widgets.ModalGallery(a,{isHotelGallery:!0});$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Popup","Image_Carousel",this.getGaCruisePackageId()+"_"+b)},updateShowMoreButton:function(){var a=this.numberOfAdditionalHotels-(this.selectedPage*this.NUMBER_OF_HOTELS_PER_PAGE>this.numberOfAdditionalHotels?this.numberOfAdditionalHotels:this.selectedPage*this.NUMBER_OF_HOTELS_PER_PAGE),b=this.module.TranslationTexts;
0<a?(a<this.NUMBER_OF_HOTELS_PER_PAGE?this.ui.showMoreHotelsLink.find("span").text(b.SHOW_MORE_HOTELS_BUTTON_TEXT):this.ui.showMoreHotelsLink.find("span").text(b.SHOW_5_MORE_HOTELS_BUTTON_TEXT),this.ui.showMoreHotelsLink.parent().show()):this.ui.showMoreHotelsLink.parent().hide()},loadAdditionalHotelResultsPage:function(a,b){a>this.lastPage&&(a=this.lastPage);if(this.selectedPage<a||b){var d={cthr:"SHOW_ADDITIONAL_HOTEL_RESULTS",selectedPage:a,sortType:this.sortType,ascendingOrder:this.ascendingOrder},
e=this;this.selectedPage=a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(d),null,"additionalHotelsSection",function(d){d=e.module.TranslationTexts;$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:d.ADDITIONAL_HOTELS_LOADING_ERROR_TITLE}):(e.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",e.$el),e.$el.find("select#selectHotelSort").val(e.sortType),
e.initHotelRatingTooltips(),e.initShopCardTooltips(),e.initLearnMoreLink(),e.updateShowMoreButton(),$(window).trigger("ct.showmore.opening"),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initTurnToTeasers(),b?b():e.setFocusOnFirstNewlyLoadedHotel(a))},null)}},_onShowMoreHotelsClick:function(a){a.preventDefault();this.selectedPage+=1;$('div[data-additional-hotel-page="'+this.selectedPage+'"]').show();this.updateShowMoreButton();$namespace.Analytics.trackEvent("Hotel_Results_Show_More",
"Click",this.numberOfAdditionalHotels);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath(),null,[this.selectedPage])},initHotelRatingTooltips:function(){this.hotelRatingLinks=$(this.el).find(".travel-info-hotel a[data-tooltip]");if(this.hotelRatingLinks.length){var a=$(this.hotelRatingLinks[0]);this.hotelRatingsTooltip||(this.hotelRatingsTooltip=new $namespace.Widgets.Tooltip(a,{parentSelector:".travel-description"}));a.off("click");for(a=0;a<this.hotelRatingLinks.length;a++)this.hotelRatingLinks[a].onclick=
function(a){return function(){a.toggleHotelRatingsTooltip(this);return!1}}(this)}},_onMapTabClick:function(a){a.preventDefault();a.stopPropagation();$("#label-view-map").hide();$("#label-view-list").css("display","inline-flex");a=$(".hotelIdValue").first().val();$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Results","Show_Map",this.getGaCruisePackageId()+"_"+a);this.ascendingOrder="3"==this.sortType||"4"==this.sortType?!1:!0;var b=this;$namespace.AjaxUtil.makeAjaxCall("hotelsResults.act",
$.param({cthr:"GET_HOTEL_LOCATIONS_DATA",sortType:this.sortType,ascendingOrder:this.ascendingOrder}),null,null,function(a){b.locationsData=a||{};utils.isArray(a)&&(a.map(function(a,b){a.isSelected=0===b?!0:!1;a.index=b+1}),b.collection=new $namespace.Collection.HotelCollection(a),b.initializeMap());b.deselectLocation(b.collection.findWhere({isSelected:!0}));b.selectLocation(b.collection.get(0));$(window).trigger("ct.section.toggling");setTimeout(function(){$('a[data-tab="list-tab"]').focus()},1)},
null)},_onListTabClick:function(a){a.preventDefault();a.stopPropagation();a=$(".hotelIdValue").first().val();$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Results","Hide_Map",this.getGaCruisePackageId()+"_"+a);$("#label-view-list").hide();$("#label-view-map").css("display","inline-flex");$(window).trigger("ct.section.toggling");setTimeout(function(){$('a[data-tab="map-tab"]').focus()},1)},initializeMap:function(){if(null!=this.collection&&void 0!=this.collection.get(0)){var a=this.collection.get(0).attributes.latitude;
var b=this.collection.get(0).attributes.longitude;a=new google.maps.LatLng(a,b);this.googleMap=new google.maps.Map(this.ui.map[0],{fullscreenControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.fullscreenControl,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,zoom:13,zoomControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.zoomControl,
styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],center:a});this.showMarkers();this.bindMarkers();this.selectLocation(this.collection.get(0));google.maps.event.addListener(this.googleMap,"tilesloaded",function(){setTimeout(function(){$("#hotel_map").find('iframe,a,button, div[tabindex="0"]').attr("tabindex","-1")},$namespace.WaitForElement.TIME_TO_WAIT)})}},showMarkers:function(){var a=this,b=new google.maps.LatLngBounds;this.collection.each(function(d){d=d.get("marker");
b.extend(d.getPosition());d.setMap(a.googleMap)});1<this.collection.length&&this.googleMap.fitBounds(b)},bindMarkers:function(){var a=this;this.collection.each(function(b){var d=b.get("index");b=b.get("marker");google.maps.event.addListener(b,"click",function(){a.toggleHotels(d)})})},repositionMap:function(a){google.maps.event.trigger(this.googleMap,"resize");this.googleMap.panTo(a.getPosition())},toggleHotels:function(a){this.deselectLocation(this.collection.findWhere({isSelected:!0}));this.selectLocation(this.collection.findWhere({index:a}))},
deselectLocation:function(a){a.set("isSelected",!1)},selectLocation:function(a){a.set("isSelected",!0);var b=a.get("marker");this.repositionMap(b);this.loadSelectedHotelFromMap(a)},loadSelectedHotelFromMap:function(a){a="cthr=SHOW_HOTEL_ITEM_RESULTS&uid="+a.get("uid")+"&updateAllowed=true";var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",a+"&hotelDisplayTarget=map",null,"select_hotel_map",function(){b.initHotelRatingTooltips();b.initShopCardTooltips();b.initLearnMoreLink();
$(window).trigger("ct.showmore.opening");$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initTurnToTeasers()},null)},toggleHotelRatingsTooltip:function(a){this.hotelRatingsTooltip.isActive&&this.hotelRatingsTooltip.trigger[0]==a?this.hotelRatingsTooltip.hide():(this.hotelRatingsTooltip.show(a),a=$(".hotelIdValue").first().val(),$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Costco_Travel_Rating","Click",this.getGaCruisePackageId()+"_"+a))},initShopCardTooltips:function(){$('a[data-hook="shop_card_tooltip"]').each(function(a,
b){b.shopCardTooltip||(b.shopCardTooltip=new $namespace.Widgets.Tooltip($(b)))})},_gaForShopCardToolTip:function(){$("#packageId").val();var a=$(".hotelIdValue").first().val();$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Shop_Card","ToolTip",this.getGaCruisePackageId()+"_"+a)},setFocusOnFirstNewlyLoadedHotel:function(a){var b=$.hook("hotels-target").children("DIV"),d=$(b[a-1]).find("h3:first");d.addClass("no-outline").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder();
d.on("blur",function(a){d.attr("tabindex","-1").removeAttr("data-taborder");d.off("blur")});d.focus()},_showItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");var d=b.attr("data-test"),e=b.attr("data-includeRemarks"),f=b.attr("id"),g=$(".hotelIdValue").first().val();b=b.attr("data-cancellation");$("#packageId").val();var h={};e?h.cthr="SHOW_FILTERED_ITINERARY_REMARKS":(b&&(h.itineraryRemarksModalTitle="Rate details and cancellation policy"),h.cthr="SHOW_ITINERARY_REMARKS");
h.itineraryCode=a;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(h),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"linkDataItineraryModal"==d&&$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Room_Rate","Click",this.getGaCruisePackageId()+"_"+g);"linkOptionalServiceDescription"==d?$namespace.Analytics.trackEvent(this.getPageType()+
"Hotel_Optional_Service","Click",this.getGaCruisePackageId()+"_"+g):("true"==e||"IncludedExtra"==f)&&$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Included_Extras","Click",this.getGaCruisePackageId()+"_"+g)},reinitialize:function(){this.ui.showMoreHotelsLink=$.hook("show-more-hotels-link",this.$el);this.$el.find("select#selectHotelSort").val(this.sortType);this.ui.map=$.hook("hotel_map");var a=$(".map-list-tab-switcher");this.mapListTabSwitcher=new $namespace.Widgets.TabSwitcher(a,{getAllcb:function(){return a.find("[data-tab], > .tab-panels > [data-pane]").not("div.tab-panels [data-tab]")}});
this.initializeMap();this.initHotelRatingTooltips();this.initShopCardTooltips();this.updateShowMoreButton();this.initLearnMoreLink();this.$el.find('.accordionspan[data-test="buttonRoomsAccordion"]').each(function(a,b){b.accordion.close(!0)});var b=$(".hotelRoomsCard");this.roomAccodionsList=[];for(var d=0;d<b.length;d++){for(var e=$(b[d]).find(".nested-accordion"),f=$(b[d]).attr("id"),g=[],h=0;h<e.length;h++)g[h]=new $namespace.Widgets.Accordion($(e[h]));this.roomAccodionsList[f]=g}this.$el.find('[data-hook="advisory-widget"]').each(function(a,
b){a=$(b);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"PackageHotelResults"})});this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this))},_onSelectChange:function(a){var b=this;a=$(a.currentTarget);var d=this.$el.find("#selectHotelSort");a=a.find(":selected").text();d.attr("data-product-uid");var e=d.val(),f=function(){var a=b.module.TranslationTexts;
e=d.val();switch(e){case "0":var f=a.SORTED_BY_COSTCO_RECOMMENDS;break;case "1":f=a.SORTED_BY_NAME;break;case "2":f=a.SORTED_BY_PRICE;break;case "3":f=a.SORTED_BY_TRAVEL_RATING;break;case "4":f=a.SORTED_BY_MEMBER_RATING}utils.updateLiveContainer(f)};this.selectedPage=1;this.sortType=e;this.ascendingOrder=!0;if("3"==e||"4"==e)this.ascendingOrder=!1;a===this.module.TranslationTexts.MEMBER_REVIEW_SORT_TYPE&&$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED?this.sortByMemberRating():this.loadAdditionalHotelResultsPage(this.selectedPage,
f);f=$(".hotelIdValue").first().val();$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Results_Sort",a,this.getGaCruisePackageId()+"_"+f)},sortByMemberRating:function(){var a=[],b=$("#additionalHotelsContainer");$.each(b.children(),function(b,d){b={};b.hotelCard=d;b.rating=$(d).find(".turntoTeaser").attr("data-turnto-rating");a.push(b);$(d).remove()});a.sort(function(a,b){return a.rating===b.rating?0:null==a.rating?1:null==b.rating?-1:a.rating<b.rating?1:-1});var d=[],e=[];a.forEach(function(a,
f){f=a.hotelCard;$(f).removeClass("displayNone").hide();0<$(f).find(".notAvailable").length?d.push(f):null==a.rating?e.push(f):b.append(f)});e.forEach(function(a,d){b.append(a)});d.forEach(function(a,d){b.append(a)});var f=0,g=1,h=this;$.each(b.children(),function(a,b){f>=h.NUMBER_OF_HOTELS_PER_PAGE&&(f=0,g++);1==g&&$(b).show();$(b).attr("data-additional-hotel-page",g);f++});this.initLearnMoreLink()},_onUpdateOptionalServiceCheckboxClick:function(a){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged=
!0;a=$(a.currentTarget);var b=a.attr("data-serviceUid"),d=a.attr("data-uid"),e=a.is(":checked");b={csbpph:"INCLUDE_OR_EXCLUDE_OPTIONAL_SERVICE",serviceUid:b,uid:d,serviceItemSelected:e,sortType:this.sortType,ascendingOrder:this.ascendingOrder};$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_HOTEL_RESULTS?b.componentType="preHotel":b.componentType="postHotel";var f=a.attr("id");d=$(".sidebar-column").find("div.active");var g=null;1===d.length&&(g=
d.attr("data-id"));e&&(a=a.attr("data-hotelid"),$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Optional_Service_Select","Include",this.getGaCruisePackageId()+"_"+a));a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();g&&$(".sidebar-column").find("[data-id="+g+"]").find(".accordion-button").trigger("open-instant");var a=$("#"+f);setTimeout(function(){a.focus()},
1)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperBookingPrePostCruiseHotel.act",$.param(b),null,"mainContent",a,null)},_onSelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("uid"),e="#"+b.data("room-link"),f=this,g=b.attr("data-filter-name");a=b.data("price-diff");var h=b.data("new-price-value");b=b.data("total-new-price");var k=this.module.TranslationTexts.HOTEL_ROOM_CHANGE_MODAL_TITLE,l=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_NEW_TOTAL_PRICE_LABEL;
if(0==a)this._changeRoomSelection(d,e);else{var p=0<a?this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE:this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE;a=this._populatePriceChangeModalTemplate(a,h,b,l,k,!1,p);var q=new $namespace.Widgets.Confirm(a,function(){f._changeRoomSelection(d,e);$namespace.Analytics.trackEvent(f.getPageType()+"Hotel_Room_Select","Continue",f.getGaCruisePackageId()+"_"+g)},function(){q.hide();$namespace.Analytics.trackEvent(f.getPageType()+
"Hotel_Room_Select","No_Thanks",f.getGaCruisePackageId()+"_"+g)});q.show()}$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Room_Select","Click",this.getGaCruisePackageId()+"_"+g)},_changeRoomSelection:function(a,b){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged=!0;a={csbpph:"CHANGE_SELECTION",uid:a,selectedPage:this.selectedPage,sortType:this.sortType,ascendingOrder:this.ascendingOrder};$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_HOTEL_RESULTS?
a.componentType="preHotel":a.componentType="postHotel";$(window).scrollTop($(b).offset().top-100);var d=$(".sidebar-column").find("div.active"),e=null;1===d.length&&(e=d.attr("data-id"));var f=this.sortType;d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=$(b).find("h3:visible");a.addClass("no-outline").attr("data-taborder","document");$namespace.Application.initializeOnMainContentReload();$("select#selectHotelSort").val(f);e&&$(".sidebar-column").find("[data-id="+
e+"]").find(".accordion-button").trigger("open-instant");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(b){a.attr("tabindex","-1").removeAttr("data-taborder");a.off("blur")});setTimeout(function(){a.focus()},1)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperBookingPrePostCruiseHotel.act",$.param(a),null,"mainContent",d,null)},_toggleModifyRoom:function(a){var b=$(a.currentTarget),d=b.attr("data-room-number"),e=
"";a.preventDefault();a.stopPropagation();a=b.attr("data-room-link");var f=$("#"+a);b.parent().parent().find(".roomRateTaxesAndFees.outer").toggle();$(window).scrollTop($(f).offset().top-100);if(b.hasClass("closed"))b.blur(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT,{roomNumber:d}),b.removeClass("closed").addClass("opened").text(this.module.TranslationTexts.KEEP_CURRENT_SELECTION_BUTTON_TEXT).attr("aria-label",e).attr("data-test",
"buttonKeepCurrentSelection"),f.find(".selectedRoomCategory:first").hide(),f.find(".rooms-list:first").show(),$namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){f.find(".accordion-button:first").focus()},1);else for(f.find(".rooms-list:first").hide(),$namespace.TabOrder.updatePageTabOrder(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT,{roomNumber:d}),b.attr("aria-label",e).removeClass("opened").addClass("closed").text(this.module.TranslationTexts.MODIFY_ROOM_BUTTON_TEXT).attr("data-test",
"buttonModifyRoom"),f.find(".selectedRoomCategory:first").show(),b.focus(),$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Room_Select","Keep_Selection",this.getGaCruisePackageId()+"_"+hotelId),b=this.roomAccodionsList[a],d=0;d<b.length;d++)b[d].close();$(window).trigger("ct.section.toggling")},_populatePriceChangeModalTemplate:function(a,b,d,e,f,g,h){"content"in document.createElement("template")?(a=$("#confirm_hotel_selection_change"),a=$(a.prop("content")).clone()):(a=$("#confirm_hotel_selection_change #upgradeConfirmCenterModal"),
a=a.clone());a.find("#priceChangeMessage").html(h);a.find("#priceChangeMessage").find("span").text(b);a.find("#priceChangeModalTitle").text(f);a.find("#newPackagePriceLabel").text(e);a.find("#priceChangeNewPrice").text(d);a.find("#confirmHotelChangeCancellationNote").addClass("hidden");g&&a.find("#confirmHotelChangePriceMayChangeNote").removeClass("hidden");return a},_onSelectNewHotelClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.attr("data-uid"),e=this,f=b.attr("data-filter-name");
a=b.data("price-diff");var g=b.data("new-price-value");b=b.data("total-new-price");var h=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_TITLE,k=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_NEW_TOTAL_PRICE_LABEL;if(0==a)this._selectNewHotel(d);else{var l=0<a?this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE:this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE;a=this._populatePriceChangeModalTemplate(a,g,b,k,h,!0,l);var p=new $namespace.Widgets.Confirm(a,function(){e._selectNewHotel(d);
$namespace.Analytics.trackEvent(e.getPageType()+"Hotel_Results_Select","Continue",e.getGaCruisePackageId()+"_"+f)},function(){p.hide();$namespace.Analytics.trackEvent(e.getPageType()+"Hotel_Results_Select","No_Thanks",e.getGaCruisePackageId()+"_"+f)});p.show()}$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Results_Select","Click",this.getGaCruisePackageId()+"_"+f)},_selectNewHotel:function(a){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged=!0;$namespace.Utils.updateLiveContainer(this.module.TranslationTexts.NEW_HOTEL_SELECTED);
var b=$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_HOTEL_RESULTS?"preHotel":"postHotel";a={csbpph:"SELECT_HOTEL_ITEM",selectedHotelItemUid:a,selectedPage:this.selectedPage,sortType:this.sortType,ascendingOrder:this.ascendingOrder,componentType:b};b=$(".sidebar-column").find("div.active");var d=null;1===b.length&&(d=b.attr("data-id"));b=function(a){return function(){$(window).scrollTop($("section.info-bar").offset().top);$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);var a=$("h3.card-hotel-name:first");a.addClass("no-outline").attr("data-taborder","document");$namespace.Application.initializeOnMainContentReload();d&&$(".sidebar-column").find("[data-id="+d+"]").find(".accordion-button").trigger("open-instant");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(b){a.attr("tabindex","-1").removeAttr("data-taborder");a.off("blur")});setTimeout(function(){a.focus()},1)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperBookingPrePostCruiseHotel.act",
$.param(a),null,"mainContent",b,null)},_onSelectServiceMealPlanClick:function(a){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged=!0;a=$(a.currentTarget);var b=$namespace.PageHistory.getHistoryCodeFromPath()==$namespace.PageHistoryConstants.HISTORY_CRUISE_PRE_HOTEL_RESULTS?"preHotel":"postHotel";b={csbpph:"SELECT_SERVICE_MEAL_PLAN_ITEM",serviceUid:a.attr("data-serviceUid"),uid:a.attr("data-uid"),sortType:this.sortType,ascendingOrder:this.ascendingOrder,componentType:b};var d=
a.attr("id"),e=$(".sidebar-column").find("div.active"),f=null;1===e.length&&(f=e.attr("data-id"));a=a.attr("data-hotelid");$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Meal_Plan_Select","Include",this.getGaCruisePackageId()+"_"+a);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperBookingPrePostCruiseHotel.act",$.param(b),null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);$namespace.TabOrder.updatePageTabOrder();$namespace.Application.initializeOnMainContentReload();
var a=$("#"+d);setTimeout(function(){a.focus()},1);f&&$(".sidebar-column").find("[data-id="+f+"]").find(".accordion-button").trigger("open-instant")},null)},_onLoadHotelPopupMealPlans:function(a){var b=$(a.currentTarget);a=b.attr("data-hotelid");b={cthtc:"LOAD_HOTEL_MEAL_PLANS_POPUP",destination:b.attr("data-destination"),cityCode:b.attr("data-citycode"),hotelId:b.attr("data-hotelid")};$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Meal_Plan","Click",this.getGaCruisePackageId()+"_"+a);
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsTabContent.act",$.param(b),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onReviewsLinkClick:function(a){var b=$(a.currentTarget).data("hotel-id"),d=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(b);if(null!=d){var e=this;$(window).on("ct.megatip.opened",function(){var b=d.getReviewsAccordionId();
$(b).focus();$(b).closest('[data-hook="accordion"]').get(0).accordion.open();e._trackAllAccordion(a,$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);$(window).off("ct.megatip.opened")});var f=$('a[data-megatip][data-hotelid="'+b+'"]');1<f.length&&(f=$('div.carousel-item.active a[data-megatip][data-hotelid="'+b+'"]'));f.click()}},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?($namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged||$namespace.Analytics.trackEvent(this.getPageType()+
"Hotel_Cruise_Summary","Click","Expand"),$namespace.CruiseSuperBookingPrePostCruiseHotelModule.isPageViewGALogged=!1):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Flights_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Summary","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent(this.getPageType()+"Hotel_Transportation_Summary","Click","Expand")},initPageAnalytics:function(){var a=document.title,b="/cr/booking/bookingWidget/preCruiseHotel"+this.getGaCruisePackageId();"post"===this.pageType&&(b="/cr/booking/bookingWidget/postCruiseHotel"+this.getGaCruisePackageId());
$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v74:b});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:{page:b,location:window.location.href}})},getPageType:function(a){a="CR_PreCruise_";"post"===this.pageType&&(a="CR_PostCruise_");return a},getGaCruisePackageId:function(a){return"/"+this.destinationCode+"/"+this.cruiseLineCode+"/"+this.shipName+"/"+this.sailingDate},close:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};AIRLINE_NUMBER_REGEX=/[0-9]{1,4}/g;AIRPORT_CODE_REGEX=/[a-zA-Z0-9]{2,4}/g;AIRPORT_TRANSFER_REGEX=/[0-9][0-9]?:[0-9][0-9]?\s[a-zA-Z][a-zA-Z]/g;HOTEL_REMARKS_REGEX=/[a-zA-Z0-9,@'\.:\-\(\)\s&#\?\$/!%;]{0,512}/g;$namespace.View=$namespace.View||{};
$namespace.View.CruiseHotelSpecialRequestView=Backbone.View.extend({el:"#cruise-hotel-special-request-page",ui:{},isFirstFormFieldFocusActive:!1,events:{'change [data-hook="SelectedHotelOption"]':"_selectedHotelOption",'keypress [data-hook="remarks"]':"_selectedHotelRemarks",'input [data-hook="remarks"]':"_selectedHotelRemarks",'click a[data-hook="continueToNextPage"]':"_onContinueToBookingRecapClick",'change [data-hook="ChangeArrivalAirline"]':"_changeArrivalAirline",'change [data-hook="ChangeArrivalTime"]':"_changeArrivalTime",
'keypress [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'paste [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeDepartureAirline"]':"_changeDepartureAirline",'change [data-hook="ChangeDepartureTime"]':"_changeDepartureTime",'keypress [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'paste [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",
'change [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ArrivalTransferAirline"]':"_changeArrivalTransferAirline",'change [data-hook="ArrivalTransferTime"]':"_changeArrivalTransferTime",'keypress [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'paste [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",
'change [data-hook="DepartureTransferAirline"]':"_changeDepartureTransferAirline",'change [data-hook="DepartureTransferTime"]':"_changeDepartureTransferTime",'keypress [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="CruisePierAirportTransferAirline"]':"_changeDepartureTransferAirline",
'change [data-hook="CruisePierAirportTransferTime"]':"_changeDepartureTransferTime",'keypress [data-hook="CruisePierAirportTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="CruisePierAirportTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="CruisePierAirportTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber"},initialize:function(a){a=$.extend({},a);this.module=a.module;this.destinationCode=a.destinationCode;this.cruiseLineCode=
a.cruiseLineCode;this.shipName=a.shipName;this.sailingDate=a.sailingDate;document.title=$("#page_title").val();$("div[id^='cardHotelRequest_']").each(function(a,b){a=$(b).find('input:checkbox:checked[name^="selectedHotelOption_"]');b=$(b).find('textarea[id^="selectedHotelRemark_"]');if(null!=a)for(var d=0;d<a.length;d++){var e=b[0].name.replace(/[^0-9]/g,""),f=$("#selectedHotelRemark_"+e+"_Required"),g=$("#selectedHotelRemark_"+e);"Accessible Room"==a[d].value&&(a[d].checked?(f.text("*"),g.attr("required",
"true"),g.attr("aria-required","true")):(f.text(""),g.removeAttr("required"),g.removeAttr("aria-required"),this._removeError(g)));$("#textarea-count-"+e).html(g.val().length)}});$(".flightNumber").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,4),a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1});$(".flightNumber").on("paste",function(a){window.event.clipboardData.getData("text");
a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(4<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),!1});var b="",d="",e="";$("#noFlightInfo_Arrival").change(function(){$("#noFlightInfo_Arrival").is(":checked")?(b=$("#selectedArrivalOption_AirCode").val(),d=$("#selectedArrivalOption_AirlineNumber").val(),e=$("#selectedArrivalOption_TransferTime").val(),$("#flightInformation_Arrival").hide(),$(".fieldset").removeClass("sp-bot-4"),$("#selectedArrivalOption_AirCode").val(""),
$("#selectedArrivalOption_AirlineNumber").val(""),$("#selectedArrivalOption_TransferTime").val("")):($("#flightInformation_Arrival").show(),$("#selectedArrivalOption_AirCode").val(b),$("#selectedArrivalOption_AirlineNumber").val(d),$("#selectedArrivalOption_TransferTime").val(e))});var f="",g="",h="";$("#noFlightInfo_Depart").change(function(){$("#noFlightInfo_Depart").is(":checked")?(f=$("#selectedDepartOption_AirCode").val(),g=$("#selectedDepartOption_AirlineNumber").val(),h=$("#selectedDepartOption_TransferTime").val(),
$("#flightInformation_Depart").hide(),$("#selectedDepartOption_AirCode").val(""),$("#selectedDepartOption_AirlineNumber").val(""),$("#selectedDepartOption_TransferTime").val("")):($("#flightInformation_Depart").show(),$("#selectedDepartOption_AirCode").val(f),$("#selectedDepartOption_AirlineNumber").val(g),$("#selectedDepartOption_TransferTime").val(h))});$("#noFlightInfo_Arrival").is(":checked")&&$("#flightInformation_Arrival").hide();$("#noFlightInfo_Depart").is(":checked")&&$("#flightInformation_Depart").hide();
this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.ui.chatLink=this.$el.find("#chatNowLink");if(this.ui.chatLink){var k=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/cr/booking/bookingWidget/addonRequests"+k.getGaCruisePackageId())})}this.initPageAnalytics()},_selectedHotelOption:function(a){var b=a.target.id.replace(/[^0-9]/g,
"");a=$("#selectedHotelRemark_"+b+"_Required");var d=$("#selectedHotelRemark_"+b);b=$('[name="selectedHotelOption_'+b+'"]');if(0<b.length)for(var e=0;e<b.length;e++)"Accessible Room"==b[e].value&&(b[e].checked?(a.text("*"),d.attr("required","true"),d.attr("aria-required","true")):(a.text(""),d.removeAttr("required"),d.removeAttr("aria-required"),this._removeError(d)))},_selectedHotelRemarks:function(a){this.updateCommentTextCount(a,"textarea-count-");var b=$("#"+a.target.id);b.val();$namespace.Validation.isBlankOrNull(a)||
this._removeError(b)},updateCommentTextCount:function(a,b){a=$(a.currentTarget).attr("id");var d=a.split("_"),e=$("#"+a),f=$("."+b+d[1]);f.html(e.val().length);e.on("input",function(){512<e.val().length?(e.val(e.val().substr(0,512)),f.html(512)):f.html(e.val().length)});e.on("keypress",function(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if([42,43,92,91,93,94,95,96,60,62,34].includes(b)||32>b||122<b)return a.preventDefault(),!1})},_onContinueToBookingRecapClick:function(){if(this._validateSpecialRequests()){var a=
this,b=[];$("div[id^='cardHotelRequest_']").each(function(d,e){a.prepareHotelItemData(e,b)});$("div[data-component='airportComponent']").each(function(d,e){a.prepareTransferItemData(e,b)});var d=this.module.TranslationTexts,e=JSON.stringify({SPECIAL_REQUEST_DETAILS:b});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseAddOnSpecialRequests.act",$.param({cthsr:"LOAD_CREATE_SPECIAL_REQUESTS",specialRequestInfo:e}),null,null,function(){if(this.message){$namespace.DomUtil.setElementLoadingMask(!1,
null,!1);var a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();$namespace.MessageUtil.showMessage({type:1,text:"en_ca"==a||"fr_ca"==a?d.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA:d.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE,title:d.SPECIAL_REQUESTS_ERROR_COMMON})}else $namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_CRUISE_BOOKING_RECAP,["true"])},null)}},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+
a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_validateSpecialRequests:function(){this.isFirstFormFieldFocusActive=!1;for(var a=!0,b=this.module.TranslationTexts,d=(0!==$("#PRE_noOfRooms").length?$("#PRE_noOfRooms").val():
0)+(0!==$("#POST_noOfRooms").length?$("#POST_noOfRooms").val():0),e=0;e<parseInt(d);e++){$("#selectedHotelRemark_"+e+"_Required");var f=$("#selectedHotelRemark_"+e),g=document.getElementsByName("selectedHotelOption_"+e);this._removeError(f);if(0<g.length)for(var h=0;h<g.length;h++)"Accessible Room"==g[h].value&&g[h].checked&&""==$.trim(f.val())&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED)),a=!1)}for(e=0;2>e;e++)if(d=0==e?"Arrival":"Depart",f=$("#noFlightInfo_"+
d),!f.is(":checked")&&0<f.length){$("#arrivalMissing").length&&""!=$("#arrivalMissing").text()&&(d="Depart");f=$("#selected"+d+"Option_AirlineNumber");this._removeError(f);g=$("#selected"+d+"Option_AirCode");h=$(g).attr("type");this._removeError(g);var k=$("#selected"+d+"Option_TransferTime");this._removeError(k);""==g.val()&&"hidden"!=h&&(this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),a=!1);""==f.val()?("Arrival"==d?this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)):
this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),a=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&("Arrival"==d?this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)):this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),a=!1);""==k.val()&&("Arrival"==d?this._addError(k,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)):
this._addError(k,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),a=!1)}return a},prepareHotelItemData:function(a,b){a=$(a);var d=a.find('input:checkbox:checked[name^="selectedHotelOption_"]'),e=a.find('textarea[id^="selectedHotelRemark_"]');a=a.data("uid");if(null!=d){for(var f="",g=0;g<d.length;g++)f=""==f?d[g].value:f+","+d[g].value;d=e[0].value;d=d.trim().match(HOTEL_REMARKS_REGEX);d=null!=d?d.join(""):"";b.push({itemType:"Hotel",selectedHotelOption:f,selectedOptionHotelRemark:d,
itemUid:a})}},prepareTransferItemData:function(a,b){var d=$(a),e=d.find("#FlightIncluded").val(),f="false";a="false";var g=d.data("uid");if(0<d.find("#selectedArrivalOption_AirCode").length){if(!e)return!1;var h=d.find("#selectedArrivalOption_AirCode").val();var k=d.find("#selectedArrivalOption_Airport").val();var l=d.find("#selectedArrivalOption_AirlineNumber").val();var p=d.find("#selectedArrivalOption_TransferDate").val();var q=d.find("#selectedArrivalOption_TransferTime").val();var r=d.find("#noFlightInfo_Arrival");
0<r.length&&r.is(":checked")&&(f="true");h={itemUid:g,selectedArrivalOptionAirCode:h,selectedArrivalOptionAirport:k,selectedArrivalOptionAirlineNumber:l,selectedArrivalOptionTransferDate:p,selectedArrivalOptionTransferTime:q,noFlightInfo:f};b.push(h)}if(0<d.find("#selectedDepartOption_AirCode").length){if(!e)return!1;e=d.find("#selectedDepartOption_AirCode").val();h=d.find("#selectedDepartOption_Airport").val();k=d.find("#selectedDepartOption_AirlineNumber").val();l=d.find("#selectedDepartOption_TransferDate").val();
p=d.find("#selectedDepartOption_TransferTime").val();d=d.find("#noFlightInfo_Depart");0<d.length&&d.is(":checked")&&(a="true");h={itemUid:g,selectedDepartOptionAirCode:e,selectedDepartOptionAirport:h,selectedDepartOptionAirlineNumber:k,selectedDepartOptionTransferDate:l,selectedDepartOptionTransferTime:p,noFlightInfo:a};b.push(h)}},_changeArrivalAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber"),e=a.replace("_ArrivalAirCode","_ArrivalTime"),
f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber_Required"),k=a.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),l=a.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=b||""!=f||""!=g?($("#"+k).text("*"),$("#"+h).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true")):
($("#"+k).text(""),$("#"+h).text(""),$("#"+l).text(""));h=$("#"+a);k=$("#"+d);l=$("#"+e);""==b&&""==f&&""==g?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required")):""!=b?this._removeError(h):""!=f&&this._removeError(k);""!=g&&this._removeError(l)},_changeArrivalTime:function(a){var b=
a.target.id;a=$("#"+b).val();var d=b.replace("_ArrivalTime","_ArrivalAirlineNumber"),e=b.replace("_ArrivalTime","_ArrivalAirCode"),f=$("#"+d).val(),g=$("#"+e).val(),h=b.replace("_ArrivalTime","_ArrivalAirlineNumber_Required"),k=b.replace("_ArrivalTime","_ArrivalAirCode_Required"),l=b.replace("_ArrivalTime","_ArrivalTime_Required");""!=a||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+d).attr("required",
"true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+e);k=$("#"+d);b=$("#"+b);""==g&&""==f&&""==a?(this._removeError(h),this._removeError(b),this._removeError(k),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required")):""!=g&&""==f&&""==a?this._removeError(h):""!=f&&this._removeError(k);""!=
a&&this._removeError(b)},_changeArrivalAirlineNumber:function(a){var b=a.target.id,d=$("#"+b).val(),e=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode"),f=$("#"+e).val(),g=b.replace("_ArrivalAirlineNumber","_ArrivalTime"),h=$("#"+g).val(),k=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode_Required"),l=b.replace("_ArrivalAirlineNumber","_ArrivalAirlineNumber_Required"),p=b.replace("_ArrivalAirlineNumber","_ArrivalTime_Required");""!=d||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+
p).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+b);l=$("#"+e);g=$("#"+g);""==f&&""==d&&""==h?(this._removeError(l),this._removeError(k),this._removeError(g),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required")):""!=f&&""==d&&this._removeError(l);
$namespace.Validation.isBlankOrNull(a)||this._removeError(k);""!=h&&this._removeError(g)},_changeDepartureAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureAirCode","_DepartureAirlineNumber"),e=$("#"+d).val(),f=a.replace("_DepartureAirCode","_DepartureTime"),g=$("#"+f).val(),h=a.replace("_DepartureAirCode","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureAirCode","_DepartureAirCode_Required"),l=a.replace("_DepartureAirCode","_DepartureTime_Required");""!=b||""!=
e||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+f).attr("required","true"),$("#"+f).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+a);d=$("#"+d);k=$("#"+f);""==b&&""==e&&""==g?(this._removeError(selectedArrivalAirline),this._removeError(arrivalAirlineNumberId),this._removeError(k),$("#"+
a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+f).removeAttr("required"),$("#"+f).removeAttr("aria-required")):""!=b?this._removeError(h):""!=e&&this._removeError(d);""!=g&&this._removeError(k)},_changeDepartureTime:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureTime","_DepartureAirCode"),e=a.replace("_DepartureTime","_DepartureAirlineNumber"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_DepartureTime",
"_DepartureAirlineNumber_Required"),k=a.replace("_DepartureTime","_DepartureAirCode_Required"),l=a.replace("_DepartureTime","_DepartureTime_Required");""!=b||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=
$("#"+d);k=$("#"+e);l=$("#"+a);""==f&&""==g&&""==b?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required")):""!=f?this._removeError(h):""!=g&&this._removeError(k);""!=b&&this._removeError($("#"+a))},_changeDepartureAirlineNumber:function(a){var b=a.target.id,d=b.replace("_DepartureAirlineNumber",
"_DepartureAirCode"),e=$("#"+b).val(),f=$("#"+d).val(),g=b.replace("_DepartureAirlineNumber","_DepartureTime"),h=$("#"+g).val(),k=b.replace("_DepartureAirlineNumber","_DepartureAirCode_Required"),l=b.replace("_DepartureAirlineNumber","_DepartureAirlineNumber_Required"),p=b.replace("_DepartureAirlineNumber","_DepartureTime_Required");""!=e||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required",
"true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+d);l=$("#"+b);p=$("#"+g);""==f&&""==e&&""==h?(this._removeError(k),this._removeError(l),this._removeError(p),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),$("#"+g).removeAttr("aria-required")):""!=
f&&""==e&&this._removeError(k);$namespace.Validation.isBlankOrNull(a)||this._removeError(l);""!=h&&this._removeError(p)},_changeArrivalTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},
_changeDepartureTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Add_on_Requests_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Add_on_Requests_Travelers_Summary","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Add_on_Requests_Stateroom_Summary","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?$namespace.Analytics.trackEvent("CR_Add_on_Requests_Flights_Summary","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Add_on_Requests_Hotel_Summary",
"Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Add_on_Requests_Transportation_Summary","Click","Expand")},initPageAnalytics:function(){var a=document.title,b="/cr/booking/bookingWidget/addonRequests"+this.getGaCruisePackageId();"post"===this.pageType&&(b="/cr/booking/bookingWidget/addonRequests"+this.getGaCruisePackageId());$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v74:b});$namespace.Analytics.track({vendor:"google",
type:"pageview",events:"1",text:{page:b,location:window.location.href}})},getGaCruisePackageId:function(a){return"/"+this.destinationCode+"/"+this.cruiseLineCode+"/"+this.shipName+"/"+this.sailingDate},close:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseShipContentView=Backbone.View.extend({el:"#cruiseship-content",events:{"click a.modal-gallery-thumb-itinerary":"_onGalleryThumbClickItinerary","click a.modal-gallery-thumb-ship-details":"_onGalleryThumbClickShipDetails","change #shipDeckPlan":"_onShipDeckPlanChange","click .travel-description-travel-rating a[data-tooltip]":"_gaForCruiseShipRatingToolTip",'click [data-hook="tabexpand"]':"_tabExpand","click #heroImageDetailsLink":"_heroImageDetailsLinkClick"},initialize:function(a){var b=
$.extend({},a);this.module=b.module;this.shipName=b.shipName;this.cruiseLineName=b.cruiseLineName;this.updateCruiseLineSearchSelector(b.cruiseLineCode);$(window).on("load",function(){var a=$("#heroImageDetailsLink");""==$("#heroImageDetailsLink").attr("href")&&(a.attr("href","#primaryOfferRegion"),$("div.feature-box > div.feature-heading > h2").first().attr("id","primaryOfferRegion"));var e=b.cruiseLineName+" | "+b.shipName+" | Cruise";$(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=
$("div.cruises div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.cruises div.landingPageContent div.hero-secondary").attr("data-image-url"):"";$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal",e,a)}})});this.initTooltips();this.initPageAnalytics();this.initAccordionAnalytics();window.setTimeout(function(){var a=0==$(".blastOffer").length?0:$(".blastOffer").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&
$("#pageContent").offset({top:0})},500);this.shipDeckPlanActive=new $namespace.Widgets.SelectWidget($("#ship_deck_plan_widget"),{taborder:"document"});this.stateroomDetailsTabSwitcher=new $namespace.Widgets.TabSwitcher($('DIV[data-hook="tab-switcher"]'));this.fullTermsConditions=new $namespace.Widgets.FullTermsAndConditions({module:this.module});$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$("[data-color-code]").each(function(a,
b){$(b).css("background-color","#"+$(b).data("color-code"))});$(".rooms").each(function(a,b){a=$(b).find(".roomDescription").find("ul");a.addClass("blue-bullets amenities-list amenities-list-small");1==a.length&&(a=a.remove(),$(b).append(document.createElement("hr")),a.appendTo(b))});$('.cruiseShipList div[data-hook="infinite-carousel"]').each($namespace.Utils.eachUninitialized(function(a,b){b.carousel=window.innerWidth<$namespace.Config.BREAKPOINTS.MOBILE_MAX?new $namespace.Widgets.InfiniteCarousel(a,
{focusOnTitle:!0}):new $namespace.Widgets.InfiniteCarousel(a)}))},updateCruiseLineSearchSelector:function(a){(a=$('#cruiseLine option[value="'+a+'"]'))&&a.prop("selected",!0)},_onGalleryThumbClickShipDetails:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{isCruiseGallery:!0});var b=a.parent().next("div").children(".travel-description").find(".travel-description-headline").text();a=this.shipName.replace(/ /g,"-");b=b.replace(/ /g,"_");var d=this.cruiseLineName.replace(/ /g,
"-");$namespace.Analytics.trackEvent("CR_"+b+"_Ship","Photos","/Cruises/"+d+"/"+a)},_onGalleryThumbClickItinerary:function(a){a=$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{useNewImageCarouselActivity:!0,defaultAltText:"Cruise Image"})},initTooltips:function(){$("#cruiseship-content").find(".travel-description-travel-rating a[data-tooltip]").not(".initialized").each(function(){new $namespace.Widgets.Tooltip($(this),{parentSelector:".cruise-item__ratings"})})},_onShipDeckPlanChange:function(a){var b=
$(a.currentTarget);a=b.prop("selectedIndex");var d=b.prop("options")[a].text;b=$("option:selected",b).attr("data-ship");$("#deck_plan_image").attr("src",b);$("#ship_image").attr("src",_webLoc+"/shared/images/icons/ship/decks/shipDeckPlan_"+(19-a)+".gif");$("#deck_plan_image").attr("alt",d);utils.updateLiveContainer("Showing "+d)},_heroImageDetailsLinkClick:function(){$namespace.Analytics.trackEvent("Hero_cruise","Click","Cruise_ship")},_gaForCruiseShipRatingToolTip:function(a){a=$(a.currentTarget).closest(".travel-description").find(".travel-description-headline").text().replace(/ /g,
"_");$namespace.Analytics.trackEvent("CR_"+a+"_Ship_Rating","ToolTip","/Cruises/"+this.cruiseLineName)},initPageAnalytics:function(){var a=$(document).attr("title");$namespace.Analytics.track({vendor:"google",type:"pageview"},{vendor:"adobe",type:"pv",events:"event3",v1:a,v2:"cruise"})},getEventLabel:function(a){return this.cruiseLineName+" | "+this.shipName+" | Cruise"},getShipName:function(a){return this.shipName.replace(/ /g,"_")},initAccordionAnalytics:function(){var a=this;$(this.el).find(".ship-facts-accordion").on("ct.accordion.opening",
function(b,d){$("[data-hook='tabexpand']").on("click",function(b){a._tabExpand(b)});$namespace.TabOrder.updatePageTabOrder()});$(this.el).find(".cruiseonBoardActivitesAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Onboard_Activities","Open",a.getEventLabel())});$(this.el).find(".cruiseDiningAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Dining","Open",a.getEventLabel())});$(this.el).find(".cruiseShipAllInclusiveAccordion").on("ct.accordion.opening",
function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_All_Inclusive","Open",a.getEventLabel())});$(this.el).find(".cruiseStateroomsAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Staterooms","Open",a.getEventLabel())});$(this.el).find(".cruiseSubStateroomsAccordion").on("ct.accordion.opening",function(b,d){b.stopPropagation();$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Category_Description","Open",a.getEventLabel())});
$(this.el).find(".cruiseDeckPlanAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Deck_Plan","Open",a.getEventLabel())});$(this.el).find(".cruiseShipFactsAccordion").on("ct.accordion.opening",function(b,d){$namespace.Analytics.trackEvent("CR_"+a.getShipName()+"_Ship_Facts","Open",a.getEventLabel())})},_tabExpand:function(a){var b=$(a.currentTarget).data("tabpane");setTimeout(function(){$("#"+b).focus()},100)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};$namespace.View.SiteMapContentView=Backbone.View.extend({el:"#site-map-content",initialize:function(a){this.module=$.extend({},a).module;this.initPageAnalytics()},initPageAnalytics:function(){var a=$(document).attr("title");$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:a,v2:"Site map"});utils.Breakpoint.isMobile()&&$("a[href]").each(function(a,d){-1!=$(d).text().indexOf("continued")&&$(d).remove()})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};var ajax=$namespace.Ajax||{},slideSpeed=$namespace.Config.QUICKER_ANIMATION_SPEED,delay=$namespace.Config.STANDARD_ANIMATION_SPEED-33,removeLiveTextDelay=$namespace.Config.REMOVE_LIVE_TEXT_DELAY,HOBE_SELECTED_HOTEL_ID="HOBE_SELECTED_HOTEL_ID";$namespace.View=$namespace.View||{};
$namespace.View.HotelOnlySearchResultsView=Backbone.View.extend({el:"#hotelOnlySearchResults",HOTEL_ONLY_MAP_SELECTED_MARKER_ID:"HOTEL_ONLY_MAP_SELECTED_MARKER",MAP_DIV_ENABLED:"MAP_DIV_ENABLED",HOBE_SELECTED_HOTEL_NO:"HOBE_SELECTED_HOTEL_NO",ui:{showMoreLink:null},selectedPage:1,searchCount:0,events:{"click .editSearchLink,#editSearchLink":"_onEditSearchClick","click a.modal-gallery-thumb":"_onGalleryThumbClick",'click [data-hook="label-view-map"]':"_onLabelViewMapClick",'click [data-hook="label-view-list"]':"_onLabelViewListClick",
'click [data-hook="show-more-link"]':"_onShowMoreClick","focusin #hotel_select_sort_type":"_onSelectFocusIn","focusout #hotel_select_sort_type":"_onSelectFocusOut","change #hotelSortType":"_sortHotels","click .cruiseCheckPricesButton":"_onCheckPricesClick","click .cruiseContinueButton":"_onContinueClick",'click a[data-modal="data-itinerary-modal"]':"_showIncludeExtrasItineraryRemarksModal","click .turnToTeaserWidgetLink":"_onReviewsLinkClick",'click [data-hook="adjustSearch"]':"_onAdjustSearchClick",
"click .map-it":"_onMapItClick","click button#remove-selected-hotel":"_onRemoveSelectedPackageClick","click #showMoreFilter":"_onshowMoreHotelByAreaFilterClick",'click [data-hook="apply-hotels-filters"]':"_onClickApplyFilters",'click [data-hook="reset-hotels-filters"]':"_onClickResetFilters"},markerLocationSelectedOnMap:null,selectedLocation:null,selectedHotelId:null,starRatingFilter:{},hotelsByAreaFilter:{},hotelsByBrandChainFilter:{},fromOfferPage:!1,initialize:function(a){this.module=a.module;
var b=$.extend({},a);this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion.close(!0)});$(this.el).data("hotel-type")&&(this.fromOfferPage=!0);this.destination=b.destination;this.trackGA();this.trackAdobe();this.selectedTab=$namespace.DomUtil.readCookie($namespace.CookieConstants.COOKIE_NAME_WIDGET_TAB_SELECTED);this.isMobile=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;this.ui.showMoreLink=$.hook("show-more-link",this.$el);this.searchCount=this.ui.showMoreLink.data("search-count");
this.numberOfHotelsPerPage=b.numberOfHotelsPerPage;this.selectedPage=parseInt($namespace.PageHistory.getSelectedPageFromPath());this.liveContainer=$(".tab-switcher-live-container");a=this.module.TranslationTexts;this.translations=b.module.TranslationTexts;this.fromMapIt="false";this.ui.map=$.hook("locations_map");this.mapOpen="false";this.displayHotelByArea=10;this.addMarkerAgain="false";this.hotelIdSelected=null;this.locationsData=$namespace.locationsData||{};b=Math.ceil(this.searchCount/this.numberOfHotelsPerPage);
this.selectedPage>b&&(this.selectedPage=b);b=$(this.el).data("hotel-Sort-Type");$("#hotelSortType").val(b);this.ui.adjustSearch=$.hook("adjustSearch");this.initHotelAdvisoryLinks();b=null;if(this._checkPageReloadedOrBack()){var d=this._getCookieValue(this.MAP_DIV_ENABLED);b=this.getHotelOnlyMapMarkerSelection();if(null!=b)for(var e=0;e<this.locationsData.length;e++)this.locationsData[e].hotelId==b&&(this.locationsData[e].isSelected=!0);d[0]&&"true"===d[0]&&this._onLabelViewMapClick()}else this._removeMapDivCookie(),
sessionStorage.removeItem(HOBE_SELECTED_HOTEL_ID),sessionStorage.removeItem(this.HOBE_SELECTED_HOTEL_NO),this.removeHotelOnlyMapMarkerSelection();b=$(this.el).data("hotel-id");""!=b&&this.loadSelectedHotelSearchResultMap(b,!1);this._initInnerAccordions();$("#hotelOnlySearchFilter").data("hotel-counts-by-area")<=this.displayHotelByArea&&$("#showmoreId").removeClass("showmore-content");b=0;this.priceRangeMinFilter=new $namespace.Widgets.PriceRangeWidget(this.$el.find("#priceRangeMin"),$.proxy(this,
"loadFilterSearchResult"),{keyboard:utils.Keyboard,initialValue:this.$el.find("#priceRangeMin").data("min-price"),currencyFormat:$namespace.Config.currencyFormat});b+=this.priceRangeMinFilter.active?1:0;this.priceRangeMaxFilter=new $namespace.Widgets.PriceRangeWidget(this.$el.find("#priceRangeMax"),$.proxy(this,"loadFilterSearchResult"),{keyboard:utils.Keyboard,initialValue:this.$el.find("#priceRangeMax").data("max-price"),currencyFormat:$namespace.Config.currencyFormat});b+=this.priceRangeMaxFilter.active?
1:0;this.priceRangeMinFilter.active||this.priceRangeMaxFilter.active||$("#price-range-filters").hide();this.starRatingFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#star-rating-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_STAR_RATING_SINGULAR,labelAnyPlural:a.ANY_STAR_RATING_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelStarRatings",resultCountPropName:"hotelsByStarRating",minCheckboxes:1});
b+=this.starRatingFilter.active?1:0;this.hotelsByAreaFilter=new $namespace.Widgets.FilterCheckboxes(this.$el.find("#area-name-filters"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_AREA_LABEL_SINGULAR,labelAnyPlural:a.ANY_AREA_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelAreaNames",resultCountPropName:"hotelByAreaName",minCheckboxes:2});b+=this.hotelsByAreaFilter.active?1:0;this.hotelsByBrandChainFilter=
new $namespace.Widgets.FilterCheckboxes(this.$el.find("#brand-chain-filter"),$.proxy(this,"loadFilterSearchResult"),{labelAnySingular:a.ANY_BRAND_CHAIN_SINGULAR,labelAnyPlural:a.ANY_BRAND_CHAIN_LABEL_PLURAL,resultTextSingular:a.RESULT_TEXT_SINGULAR,resultTextPlural:a.RESULT_TEXT_PLURAL,checkboxStatePropName:"hotelBrandChainNames",resultCountPropName:"hotelByBrandChainName",minCheckboxes:2});b+=this.hotelsByBrandChainFilter.active?1:0;this.hotelNameFilter=new widgets.DataListFilterWidget(this.$("#hotel-name-filter"),
{resultList:this.getHotelNameIdList($namespace.filteredHotelInfoAsJson),onSelect:$.proxy(this._onHotelNameSelect,this),noResultsText:a.NO_HOTELS_FOUND});this.afterSearchUpdateHandler($namespace.filteredHotelInfoAsJson);this._makeAccordionContentIdUnique();0<b?(this.$el.find("#hotelOnlySearchFilter").on("ct.accordion.clicked",this._onShowFiltersClick),this.$el.find("#hotelOnlySearchFilter").on("ct.accordion.clicked_close",this._onHideFiltersClick)):$("#hotelOnlySearchFilter").hide();this._disableHotelByAreaFadeInCheckbox();
this.fromOfferPage&&(a=$(this.el).data("offer-brand-name"),$("#brand_"+a).click());var f=sessionStorage.getItem(this.HOBE_SELECTED_HOTEL_NO);f&&$(window).load(function(){setTimeout(function(){$.hook("hotel-target").find('div[data-id="hotel_'+f+'"]')[0].scrollIntoView({block:"center"});$.hook("hotel-target").find('div[data-id="hotel_'+f+'"]').attr("tabindex","-1").focus()},100)})},_makeAccordionContentIdUnique:function(){var a=1;$("div.accordion-content").each(function(b){b="accContent"+a;$(this).attr("id",
b);$(this).closest("div.accordion-item").find("span.accordion-button").attr("aria-controls",b);a++})},trackGA:function(){var a=this.destination,b=$(this.el).data("hotel-id"),d="searchWidget/";this.fromOfferPage&&(d="offerPage/");a="/ho/booking/"+d+a;""!=b&&(a=a+"/"+b);$namespace.Analytics.track({vendor:"google",type:"pageview",text:a})},trackAdobe:function(){$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:document.title,eVar2:"Hotels",eVar34:this.destination,eVar67:"01"})},
_onClickResetFilters:function(a){this.priceRangeMinFilter.reset();this.priceRangeMaxFilter.reset();this.starRatingFilter.reset();this.hotelsByAreaFilter.reset();this.hotelsByBrandChainFilter.reset();this.hotelNameFilter.reset();this.loadFilterSearchResult();$namespace.Analytics.trackEvent("HO_Search_Results_Filter","Click","Reset")},_onClickApplyFilters:function(a){$('.filter-accordion[data-hook="accordion"]').each(function(){var a=$(this).find(".accordion-item").first();a.length&&a.hasClass("active")&&
(a.closest(".accordion")[0].accordion.close(),$namespace.TabOrder.updatePageTabOrder(),a.find("#filterSearch").focus())});$namespace.Analytics.trackEvent("HO_Search_Results_Filter","Click","Apply_Filter")},_initInnerAccordions:function(){this.$el.find('[data-hook="hotelBrandAccordian"]').not(".empty").each(utils.eachUninitialized(function(a,b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}))},initHotelAdvisoryLinks:function(){this.$el.find('[data-hook="advisory-widget"]').each(function(a,
b){a=$(b);b.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"HotelOnlySearchResults"})})},getHotelNameIdList:function(a){var b=[];if(a){var d=a.filteredHotelIdNameMap;a=a.hotelsByHotelId;for(var e in a)"totalRecords"!=e&&0<a[e]&&b.push({title:d[e],value:e})}return b},_onEditSearchClick:function(a){a.preventDefault();var b=$("#searchWidget .search-hotel-packages");a=$("#searchWidget .search-hotels");b=b.hasClass("active");var d=a.hasClass("active"),e=$("section#searchWidget .search-cruises");
$("section#searchWidget").is(":visible")||($('section[data-hook="info-bar"]').toggleClass("hidden"),$("section#searchWidget").toggleClass("hidden"));this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL?(this.isMobile?d||$("#hotels-tab-id").click():a.click(),$("#hotelDestination").focus()):this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL_FLIGHT&&(this.isMobile?b||$("#vacation-packages-tab-id").click():(e.click(),$("section#searchWidget .search-hotel-packages").click(),
a=_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS,window.history.pushState({path:a},"",a)),$("section#searchWidget #package-sub-hp").click(),$("#hotel_package_destination").focus());$namespace.Analytics.trackEvent("HO_Search_Results_Edit","Click","Edit")},_onLabelViewListClick:function(a){$("#label-view-list").hide();$("#label-view-map").css("display","inline-flex");$("#packageSearchMap").hide();this._removeMapDivCookie();this.mapOpen="false";$namespace.TabOrder.updatePageTabOrder();
this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_LIST_VIEW);$namespace.Analytics.trackEvent("HO_Search_Results_Map","Click","Hide");this._clearLiveText();$("#label-view-map").focus()},_onLabelViewMapClick:function(a){this.createMap();this.mapDivOpen=!0;$("#label-view-map").hide();$("#label-view-list").css("display","inline-flex");$("#packageSearchMap").show();"true"==this.addMarkerAgain&&this.selectedLocation.get("marker").setMap(this.map);this._createMapDivCookie();this.mapOpen="true";
$namespace.TabOrder.updatePageTabOrder();this.liveContainer.text(this.translations.ACCESSIBILITY_SELECTED_MAP_VIEW);$namespace.Analytics.trackEvent("HO_Search_Results_Map","Click","Show");this._clearLiveText();$("#label-view-list").focus()},_onGalleryThumbClick:function(a){a=$(a.currentTarget);$namespace.Analytics.trackEvent("HO_Search_Results_popup","photos",a.data("hotelid"));new $namespace.Widgets.ModalGallery(a,{defaultAltText:"Hotel Image",isHotelGallery:"true"})},_onHotelNameSelect:function(a,
b){this.selectedPage=1;this.loadFilterSearchResult()},_onShowMoreClick:function(a){a.preventDefault();this.selectedPage+=1;this.loadSearchResultsPage(this.selectedPage);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS,null,[this.selectedPage])},loadSearchResultsPage:function(a){var b=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param({hobesrp:"LOAD_HOTEL_SEARCH_RESULTS_LIST",selectedPage:a}),
null,null,function(a){a=b.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:a.PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE}):(1==b.selectedPage?$.hook("hotel-target").html(this.responseText):$.hook("hotel-target").append(this.responseText),b.updateShowMoreButton(),b.initHotelAdvisoryLinks(),b.setFocusOnFirstNewlyLoadedHotel(),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initTurnToTeasers())},null);$namespace.Analytics.trackEvent("HO_Search_Results_Show_More",
"Click",this.searchCount)},updateShowMoreButton:function(){var a=this.numberOfHotelsPerPage,b=this.selectedPage*a,d=b+parseInt(a,10),e=$("#otherHotels").data("filtered-hotel-count");e>b?(this.ui.showMoreLink.show(),b=this.module.TranslationTexts,e>=d?this.ui.showMoreLink.find("span").text($namespace.TranslationUtil.replaceParameters(b.SHOW_MORE_RESULTS_BUTTON_TEXT,{count:a})):this.ui.showMoreLink.find("span").text(b.SHOW_MORE_BUTTON_TEXT)):this.ui.showMoreLink.hide()},setFocusOnFirstNewlyLoadedHotel:function(){var a=
(this.selectedPage-1)*this.numberOfHotelsPerPage+1;$.hook("hotel-target").find('div[data-id="hotel_'+a+'"] h2').attr("tabindex","-1");$.hook("hotel-target").find('div[data-id="hotel_'+a+'"] h2').focus()},_sortHotels:function(a){var b=$(a.currentTarget),d=b.val(),e=this;this.selectedPage=1;b.find(":selected").val();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param({hobesrp:"SORT_HOTEL_SEARCH_RESULTS",sortBy:d}),
null,"hotelSearchList",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=e.module.TranslationTexts;switch(b.find(":selected").val()){case "DISTANCE":var g=a.SORTED_BY_DISTANCE;$namespace.Analytics.trackEvent("HO_Search_Results_Sort","Click","Distance");break;case "PRICE_ASC":g=a.SORTED_BY_PRICE_ASC;$namespace.Analytics.trackEvent("HO_Search_Results_Sort","Click","Price - Low To High");break;case "PRICE_DESC":g=a.SORTED_BY_COSTCO_MEMBER_RATING,$namespace.Analytics.trackEvent("HO_Search_Results_Sort",
"Click","Price - High To Low")}utils.updateLiveContainer(g);$namespace.Application.initTurnToTeasers();e.initHotelAdvisoryLinks();e.updateShowMoreButton();$namespace.TabOrder.updatePageTabOrder();$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS,null,null);this.message?e._showErrorModal(this):$("#hotelSortType").val(d);$("#hotelSortType").focus()},null,null,null,null)},_onSelectFocusIn:function(a){a.preventDefault();$(a.currentTarget).addClass("focus")},
_onSelectFocusOut:function(a){a.preventDefault();$(a.currentTarget).removeClass("focus").removeClass("active")},_onCheckPricesClick:function(a){this._login(a)},_login:function(a){a=$(a.currentTarget).closest("[data-id-number]").attr("data-id-number");sessionStorage.setItem(this.HOBE_SELECTED_HOTEL_NO,a);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistory.getHistoryCodeFromPath());$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_AUTHENTICATED_SEARCH_RESULTS);
$namespace.Analytics.trackEvent("HO_Search_Results","Click","Check_Prices")},_onContinueClick:function(a){var b=$(a.currentTarget);a=b.attr("data-hotelUid");var d=b.attr("data-selectedPage");b=b.closest("[data-id-number]").attr("data-id-number");sessionStorage.setItem(this.HOBE_SELECTED_HOTEL_NO,b);a={uid:a,selectedPage:d};this.removeHotelOnlyMapMarkerSelection();d=function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_CATEGORY_SELECTION)};$namespace.DomUtil.setElementLoadingMask(!0);
$namespace.GlobalConstants.RESPONSIVE_HOBE_HOTEL_PAGE_ENABLED?(a.hobehp="LOAD_HOBE_HOTEL_ITEM_INFO",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelPageActivity.act",$.param(a),null,null,d,null,null)):(a.hoc="DISPLAY_HOTEL_CATEGORY_RESULTS",$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelCategory.act",$.param(a),null,null,d,null,null))},_showIncludeExtrasItineraryRemarksModal:function(a){a=$(a.currentTarget);var b=a.attr("data-iternary-code");a.attr("data-includeRemarks");var d=a.attr("data-filterRemarks"),
e={cthr:"SHOW_ITINERARY_REMARKS"};void 0!=d&&d&&(e={cthr:"SHOW_FILTERED_ITINERARY_REMARKS"});e.itineraryCode=b;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(e),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);$namespace.Analytics.trackEvent("HO_Search_Results_popup",a.data("included-extas-text"),a.data("hotelid"))},_onReviewsLinkClick:function(a){a=
$(a.currentTarget);$namespace.TurnToReviewsUtil.drawReviewWidgetsInModal(a.data("hotel-id"),a);$namespace.Analytics.trackEvent("HO_Search_Results_Hotel_Reviews",a.data("hotel-id"),a.data("hotel-id")+"HOBE")},_onAdjustSearchClick:function(a){a.preventDefault();var b=$("#searchWidget .search-hotel-packages").hasClass("active"),d=$("#searchWidget .search-hotels").hasClass("active"),e=$("section#searchWidget .search-cruises");$("section#searchWidget").is(":visible")||($('section[data-hook="info-bar"]').toggleClass("hidden"),
$("section#searchWidget").toggleClass("hidden"));null==this.selectedTab&&(this.selectedTab="HOTEL");this.selectedTab==$namespace.CookieConstants.COOKIE_VALUE_WIDGET_TAB_SELECTED_HOTEL||this.fromOfferPage?(this.isMobile?d||$("section#searchWidget #hotels-tab-id").click():$("section#searchWidget .search-hotels").click(),$("section#searchWidget #checkOutDateWidget").addClass("error"),$("section#searchWidget #checkInDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top),
this.displayWarningMessage("vp2SearchHotelErrorMessageId")):(this.isMobile?b||($("section#searchWidget #vacation-packages-tab-id").click(),$("section#searchWidget #package-sub-hp").click()):(e.click(),$("section#searchWidget .search-hotel-packages").click(),$("section#searchWidget #package-sub-hp").click()),$("section#searchWidget #returnDateWidget").addClass("error"),$("section#searchWidget #departureDateWidget").addClass("error").focus(),$(window).scrollTop($("section#searchWidget").offset().top),
this.displayWarningMessage("vp2SearchPackageErrorMessageId"));b=$(a.currentTarget).attr("data-hotel-id");d=$("#departureDateWidget").val();e=$("#returnDateWidget").val();var f=$("#checkInDateWidget").val(),g=$("#checkOutDateWidget").val();$namespace.Analytics.trackEvent("HO_Search_Results_Availability",(""!=d?d:f)+" - "+(""!=e?e:g),b+"HOBE");$(a.currentTarget).hide()},displayWarningMessage:function(a){var b=this.module.TranslationTexts;$("#searchWidget").find('DIV[id="'+a+'"]').addClass("showPackageWarn").find('DIV[id="showPackageMsg"]').attr("id",
"warningMsgId");this.$el.find(".warningMsgText").text(b.HOTEL_WARNING_MSG)},createMap:function(){utils.isArray(this.locationsData)&&(null==this.selectedLocation||this.selectedLocationInFilteredList()||this.locationsData.push(this.selectedLocation.attributes),this.locationsData.map(function(a,b){a.index=b+1}),this.collection=new $namespace.Collection.HotelOnlySearchLocationCollection(this.locationsData));this.collection&&this.collection.length?(this.initializeMap(),this.mapDivOpen=!0,this.ui.map.show(),
this.showMarkers(),this.bindMarkers()):this.hideMap()},initializeMap:function(){for(var a,b,d=0;d<this.collection.length;d++)if(0!=this.collection.at(d).get("latitude")&&0!=this.collection.at(d).get("longitude")){b=this.collection.at(d);break}b&&(a=new google.maps.LatLng(b.get("latitude"),b.get("longitude")));this.map=new google.maps.Map(this.ui.map[0],{zoom:10,scrollwheel:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.scrollwheel,mapTypeControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeControl,
streetViewControl:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.streetViewControl,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:$namespace.Config.LOCATIONS_MAP.MAP_OPTIONS.mapTypeId,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite"]},center:a,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3,maxZoom:18})},hideMap:function(){$(this.el).addClass("no-map");this.ui.map.hide()},showMarkers:function(a){var b=this,d=new google.maps.LatLngBounds;
this.collection.each(function(a,f){f=a.get("marker");var e=sessionStorage.getItem(HOBE_SELECTED_HOTEL_ID);a.get("id")==e&&(a.set("isSelected",!0),b.loadSelectedHotelSearchResultMap(e,!0));a.get("isSelected")&&(b.selectedLocation=a,f.setZIndex($namespace.Config.MARKER_INDEX++));d.extend(f.getPosition());f.setMap(b.map)});this.map.fitBounds(d)},bindMarkers:function(){var a=this;this.collection.each(function(b){var d=b.get("marker");google.maps.event.addListener(d,"click",function(){a.selectLocation(b)});
a.addInfoWindowToMarker(a.map,d,b)})},addInfoWindowToMarker:function(a,b,d){function e(){if($namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED){var e=k.getAvgRating();"Undefined"!=typeof e&&null!==e&&0!==e&&(k.getRatingsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_RATINGS_TO_SHOW_RATINGS()?(d.set("memberRating",parseFloat(e)),d.set("maxRating",k.getMaxRating().toString())):(d.set("memberRating",null),d.set("maxRating",null)))}"0.0"!=d.get("hotelRating")&&(g=g+f.INFOWINDOW_COSTCO_HOTEL_RATING+
" <img src='"+$namespace.Configuration.sharedLoc+"/images/icons/starRating_0"+d.get("hotelRating")+".png' /><br/>");d.get("memberRating")&&(g=g+f.INFOWINDOW_COSTCO_MEMBER_RATING+": <span data-test='spanCostcoMemberRating'><strong>"+d.get("memberRating")+"/");d.get("maxRating")&&(g=g+d.get("maxRating")+"</strong></span><br/>");d.get("hotelAvailable")&&null!==d.get("hotelPrice")&&(g=g+f.INFOWINDOW_TOTAL_PRICE+": <span class='bold'>"+d.get("hotelPrice")+"</span><br/>");g+="</div>";var h=new google.maps.InfoWindow({content:"<div class='border-blue'>"+
g+"</div>"});e="mouseover";"ontouchstart"in document.documentElement&&(e="mousedown");google.maps.event.addListener(b,e,function(){self.activeInfoWindow&&self.activeInfoWindow.close();h.open(a,b);self.activeInfoWindow=h});google.maps.event.addListener(b,"mouseout",function(){h.close()})}var f=this.module.TranslationTexts,g="<div class='marker-description'><span class='blue bold'>"+d.get("hotelName")+"</span><br/>",h="<div data-hook='ttTeaser' data-sku='"+d.get("id")+"'>",k;$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED?
k=new $namespace.Widgets.TurnToReviewsTeaser(h,{callback:e}):e()},selectLocation:function(a){null!=this.selectedLocation&&(this.selectedLocation.set("isSelected",!1),this.selectedLocation.get("notInFilteredList")&&this.selectedLocation.get("marker").setMap(null));var b=a.get("id");a.set("isSelected",!0);this.markerLocationSelectedOnMap=this.selectedLocation=a;this.removeHotelOnlyMapMarkerSelection();this.storeHotelOnlyMapMarkerSelection(a.get("id"));this.loadSelectedHotelSearchResultMap(b,!0)},loadSelectedHotelSearchResultMap:function(a,
b){sessionStorage.setItem(HOBE_SELECTED_HOTEL_ID,a);var d=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param({hobesrp:"LOAD_SELECTED_HOTEL_ON_MAP",hotelId:a}),null,"selecetdHotel",function(){$namespace.Application.initTurnToTeasers();$("#selecetdHotel").show();null==d.hotelIdSelected?(d.hotelIdSelected=a,$("#"+a).hide()):($("#"+d.hotelIdSelected).show(),d.hotelIdSelected=a,$("#"+d.hotelIdSelected).hide());1==b&&$("#filterSearch").focus();$namespace.TabOrder.updatePageTabOrder()},
null)},_onRemoveSelectedPackageClick:function(){this.markerLocationSelectedOnMap=null;this.removeHotelOnlyMapMarkerSelection();this.selectedLocation=null;var a=this,b=sessionStorage.getItem(HOBE_SELECTED_HOTEL_ID);sessionStorage.removeItem(HOBE_SELECTED_HOTEL_ID);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param({hobesrp:"CLEAR_MAP_SELECTION"}),null,null,function(){a.updateShowMoreButton();a.locationsData=$namespace.locationsData||{};a.createMap();$("#selecetdHotel").html("");
$("#"+b).show();a.selectedLocation.set("isSelected",!1);a.selectedLocation=null;"false"==this.mapOpen&&(this.selectedLocation.get("marker").setMap(null),this.addMarkerAgain="true");$namespace.TabOrder.updatePageTabOrder()},null)},_onMapItClick:function(a){"false"==this.mapOpen&&this._onLabelViewMapClick();this.fromMapIt="true";var b=this;a=$(a.target);var d=a.attr("data-id");a=a.attr("data-hotel");this.collection.each(function(a){var e=a.get("id");if(d==e)return b.selectLocation(a),b._reCenterMap(a),
!1});$("html, body").animate({scrollTop:0},"slow");this.liveContainer.text($namespace.TranslationUtil.replaceParameters(this.translations.ACCESSIBILITY_PACKAGE_SELECTED_TEXT,{hotelName:a}));this._clearLiveText();$namespace.Analytics.trackEvent("HO_Search_Results_Map","Click","Map_It")},_clearLiveText:function(){setTimeout($.proxy(function(){this.liveContainer.text("")},this),removeLiveTextDelay)},_checkPageReloadedOrBack:function(){var a=!1;window.performance?a=1==performance.navigation.type||2==
performance.navigation.type?!0:!1:console.info("window.performance doesn't works fine on this browser");return a},_createMapDivCookie:function(){window&&window.sessionStorage?window.sessionStorage.setItem(this.MAP_DIV_ENABLED,"true"):DomUtil.createCookie(this.MAP_DIV_ENABLED,"true")},_removeMapDivCookie:function(){window&&window.sessionStorage&&window.sessionStorage.setItem(this.MAP_DIV_ENABLED,"false");$namespace.DomUtil.clearCookie(this.MAP_DIV_ENABLED)},_getCookieValue:function(a){var b={};b[0]=
window&&window.sessionStorage?window.sessionStorage.getItem(a):DomUtil.readCookie(a);return b},_reCenterMap:function(a){var b;a&&(b=new google.maps.LatLng(a.get("latitude"),a.get("longitude")));this.map.setCenter(b)},getHotelOnlyMapMarkerSelection:function(){return window&&window.sessionStorage?window.sessionStorage.getItem(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID):$namespace.DomUtil.readCookie(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID)},storeHotelOnlyMapMarkerSelection:function(a){window&&window.sessionStorage?
window.sessionStorage.setItem(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID,a):$namespace.DomUtil.createCookie(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID,a)},removeHotelOnlyMapMarkerSelection:function(){sessionStorage.removeItem(HOBE_SELECTED_HOTEL_ID);window&&window.sessionStorage&&this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID in window.sessionStorage?window.sessionStorage.removeItem(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID):$namespace.DomUtil.clearCookie(this.HOTEL_ONLY_MAP_SELECTED_MARKER_ID)},selectedLocationInFilteredList:function(){for(var a=
0;a<this.locationsData.length;a++)if(this.locationsData[a].hotelId==this.selectedLocation.attributes.hotelId)return this.locationsData[a].isSelected=!0;return!1},_disableHotelByAreaFadeInCheckbox:function(){if($("#showmoreId").hasClass("showmore-content")){var a=$('#showmoreId input[type="checkbox"]').length-4;$('#showmoreId input[type="checkbox"]').each(function(b,d){b>=a&&$(d).parent().children().prop({disabled:!0})})}},_onshowMoreHotelByAreaFilterClick:function(){$("#showMoreHotelAreaId").toggle();
$("#showMoreFilter").toggle();$("#showmoreId").removeClass("showmore-content");var a=$('#showmoreId input[type="checkbox"]'),b=a.length-4;a.each(function(a,e){e=$(e).parent().children();var d=e.find("span.resultsCount").text().startsWith("(0")?!1:!0;a>=b&&d&&e.prop({disabled:!1})});$('#showmoreId input[name="hotelArea'+b+'"]:visible:enabled').focus();$('[aria-hidden="true"]').each(function(a,b){$(b).attr("aria-hidden","false").find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()})},
getEncodeFilterBrandChainValues:function(a){var b=[];a.forEach(function(a){b.push(cwctravel.core.StringUtil.encodeHTML(a))});return b},loadFilterSearchResult:function(a){var l;var b=String.fromCharCode(127);this.selectedPage=1;var d=this.hotelsByAreaFilter.getCheckboxValues(),e=this.starRatingFilter.getCheckboxValues(),f=this.$el.find("#hotelSortType").val(),g=this.getEncodeFilterBrandChainValues(this.hotelsByBrandChainFilter.getCheckboxValues()),h=this.priceRangeMinFilter.getIntVal(),k=this.priceRangeMaxFilter.getIntVal();
this.markerLocationSelectedOnMap=!1,l=[this.hotelNameFilter.val()];b={hobesrp:"LOAD_FILTER_HOTEL_SEARCH_RESULTS",priceRangeLowValue:h,priceRangeHighValue:k,selectedPage:this.selectedPage,filterHotelIds:l.length?l.join(b):"",filterStarRatings:e.length?e.join(b):"",sortType:f?f:"0",filterBrandChainNames:g.length?g.join(b):"",filterHotelAreaNames:d.length?d.join(b):""};var p=this;$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelOnlySearchResultsActivity.act",$.param(b),null,null,function(){var b=
p.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.SEARCH_RESULT_ERROR_TITLE}):($.hook("hotel-target").empty().append(this.responseText),p.locationsData=$namespace.locationsData||{},p.createMap(),p.afterSearchUpdateHandler($namespace.filteredHotelInfoAsJson,a),a&&a(),$namespace.TabOrder.updatePageTabOrder(),$namespace.Application.initTurnToTeasers(),$namespace.HistoryNavigation.replaceHistoryWithData($namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_RESULTS,
null,[]))},null)},afterSearchUpdateHandler:function(a,b){if(a){this.hotelNameFilter.nameValueList=this.getHotelNameIdList(a);this.searchCount=a.numberOfhotels;var d=this.module.TranslationTexts,e=this.$el.find(".matchingPackageHeading");e&&(1==this.searchCount?(e.text(d.MATCHING_HOTELS_TEXT_SINGULAR),b||utils.updateLiveContainer(d.MATCHING_HOTELS_TEXT_SINGULAR)):(d=$namespace.TranslationUtil.replaceParameters(d.MATCHING_HOTELS_TEXT_PLURAL,{resultNumber:this.searchCount}),e.text(d),b||utils.updateLiveContainer(d)));
this.priceRangeMinFilter.setVal(a.hotelPriceRange.lowValue);this.priceRangeMaxFilter.setVal(a.hotelPriceRange.highValue);this.starRatingFilter.updateFilter(a);this.hotelsByAreaFilter.updateFilter(a);this.hotelsByBrandChainFilter.updateFilter(a);this.initHotelAdvisoryLinks();this.updateShowMoreButton()}this.initialized=!0},updateBrandChainFilter:function(a){a.selectedOfferChainNames.forEach(function(a){$("#brand-chain-filter").find('.hotelChainRole[value="CHAIN_'+a+'"]').each(function(a,b){b.checked=
!0})});$("#brand-chain-filter").find(".accordion-item").each(function(a,d){d=d.getElementsByClassName("hotelChainRole");for(var b=!0,f=0;f<d.length;f++)if(!d[f].checked){b=!1;break}b&&(document.getElementById("hotelBranAny").checked=!1,document.getElementById("hotelBranAny").disabled=!1,$(".brand_"+a).checked=!0)})},close:function(){this.starRatingFilter.close()},_onShowFiltersClick:function(a){$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("HO_Search_Results_Filter","Click",
"Show");$("#area-name-filters").find("div.checkbox-widget").each(function(a,d){a=$(d).find("label")[0];25<$(a).height()&&$(d).addClass("mb20")})},_onHideFiltersClick:function(a){$namespace.TabOrder.updatePageTabOrder();$namespace.Analytics.trackEvent("HO_Search_Results_Filter","Click","Hide")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajax=$namespace.Ajax||{};var innerhtml;$namespace.View=$namespace.View||{};breakpoint=utils.Breakpoint;
$namespace.View.TransportationJdcCarAddOnsResultsView=Backbone.View.extend({el:"#carSpecialEquipmentJdc",events:{'click a[data-hook="optional_equipment_name_link"]':"_onOptionalEquipmentNameLinkClick","change .car-rental-equip-option .number-widget input":"_onInputChange",'click a[data-hook="go_back"]':"_onGoBackClick",'click button[data-hook="submit_optional_equipment"]':"_onSubmit"},initialize:function(a){a=$.extend({},a);this.module=a.module;this.translations=a.module.TranslationTexts;this.undelegateEvents();
var b=[],d=this,e=$("div.page-equipment > span.ada-screenreader[aria-live]");this.$el.find(".number-widget").each(function(a,g){a=$(g);var f=a.find("input[data-equipment-id]"),k=f.data("optional-equipmen-name"),l=d.$el.find('[data-price-for="'+f.attr("id")+'"]').text();g.numberWidget=new $namespace.Widgets.NumberWidget(a,e,{decrementEnabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_DECREMENT_ENABLED,{optionalEquipmentName:k,priceText:l}),decrementDisabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_DECREMENT_DISABLED,
{optionalEquipmentName:k,priceText:l}),incrementEnabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_INCREMENT_ENABLED,{optionalEquipmentName:k,priceText:l}),incrementDisabled:$namespace.TranslationUtil.replaceParameters(d.translations.CAR_OPTIONAL_EQUIPMENT_INCREMENT_DISABLED,{optionalEquipmentName:k,priceText:l})});b.push({specialEquipmentUid:f.attr("data-equipment-id"),quantity:f.val()})});this.collection=new $namespace.Collection.RentalCarEquipmentCollection(b);
$("#vp-jdc-add-ons-view-web").text($("#packageTotalPriceAdd").val())},_onInputChange:function(a){a=$(a.currentTarget);var b=a.attr("data-equipment-id");this.collection.get(b).set("quantity",a.val());this.setInputSelectedState(a)},_onGoBackClick:function(a){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act","tc=UPDATE_VP_JDC_ADDONS_PAGE_VIEWABLE_FLOW",null,null,function(){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_TRANSPORTATION)},
null)},_navigateToNextPage:function(a){"true"==$("#isActivityPresent").val()?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_SEARCH_RESULT_PACKAGE_ACTIVITIES):($namespace.DomUtil.setElementLoadingMask(!0,null,!1),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("booking.act","b=2",null,null,function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text})):$namespace.Navigation.loadPage(_webLoc+
"/h="+$namespace.PageHistoryConstants.HISTORY_BOOKING_RECAP)},null))},setInputSelectedState:function(a){var b=utils.getParentElementOfClass(a,"car-rental-equip-option");+a.val()?b.addClass("has-item"):b.removeClass("has-item")},validateQuantity:function(){var a=0;this.$el.find(".car-rental-equip-option input[type=number]").each(function(b,e){a+=parseInt($(e).val())});if(10<a){var b=this.module.TranslationTexts;$namespace.MessageUtil.showMessage({type:1,text:b.CAR_OPTIONAL_EQUIPMENT_QUANTITY_ERROR,
title:b.CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE});return!1}return!0},_onSubmit:function(a){var b=this;if(this.validateQuantity()){var d=JSON.stringify(this.collection.toJSON()),e="tc=DISPLAY_ADD_ONS_PRICE_DIFFERENCE&specialEquipmentUidsToUpdate="+d,f=function(a){return function(){var e=a.module.TranslationTexts;if(this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!0),$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE});
else if(this.responseText){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var f=new $namespace.Widgets.Confirm(this.responseText,function(){f.hide();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);1===g?$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Continue","price_increase"):-1===g&&$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Continue","price_decrease");$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act","tc=SUBMIT_OPTIONAL_EQUIPMENT_SELECTION&specialEquipmentUidsToUpdate="+
d,null,null,function(){this.message&&$namespace.MessageUtil.showMessage({type:1,text:this.message.text})},null);b._navigateToNextPage()},function(){f.hide();1===g?$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Close","price_increase"):-1===g&&$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Close","price_decrease")});f.show();var g=parseInt($("#add-ons-relative-value").val());$("#upgradeConfirmCenterModal").on("click",function(a){a=$(a.target).data("hook");
"modal-close"===a&&1===g?$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Close","price_increase"):"modal-close"===a&&-1===g&&$namespace.Analytics.trackEvent("dp/pkg_event_addOns_price_change","Close","price_decrease")})}else b._navigateToNextPage()}}(this);$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act",e,null,null,f,null)}a.preventDefault()},_onOptionalEquipmentNameLinkClick:function(a){var b=$(a.currentTarget);
a=b.attr("data-companyCode");b=b.attr("data-equipmentCode");a="tc=DISPLAY_ADD_ON_NAME_POPUP&companyCode="+a+"&equipmentCode="+b;b=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var b=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.CAR_OPTIONAL_EQUIPMENT_DESCRIPTION_TITLE}):(new $namespace.Widgets.Modal(this.responseText)).show()}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("transportationContent.act",
a,null,null,b,null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.infoPageContentView=Backbone.View.extend({el:"#infoPageContent",events:{"click .external-link-event-class":"_onImageLinkClick","click .blog-inlineilink":"_onInlineLinkClick"},initialize:function(a){a=$.extend({},a);this.module=a.module;this.infoPageName=a.infoPageName;this.initPageAnalytics();window.setTimeout(function(){var a=$("#infoPageContent").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)},_onImageLinkClick:function(a){a.preventDefault();
a=$(a.currentTarget).attr("data-external-link");""!=a&&$namespace.Navigation.loadExternalUrl(a)},_onInlineLinkClick:function(a){"true"===$(a.currentTarget).attr("data-is-external-link")&&a.preventDefault()},initPageAnalytics:function(){$('meta[property="og:title"]').attr("content",document.title);$namespace.Analytics.track({vendor:"google",type:"pageview",text:"/Info/"+this.infoPageName},{vendor:"adobe",type:"pageView",events:"event1",v1:"Info|"+this.infoPageName,eVar2:"Info"})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};var ajaxUtil=$namespace.AjaxUtil||{},breakpoint=utils.Breakpoint,AIRLINE_NUMBER_REGEX=/[0-9]{1,4}/g,AIRPORT_CODE_REGEX=/[a-zA-Z0-9]{2,4}/g,AIRPORT_TRANSFER_REGEX=/[0-9][0-9]?:[0-9][0-9]?\s[a-zA-Z][a-zA-Z]/g;$namespace.View=$namespace.View||{};
$namespace.View.MultiCityFinalBookingSpecialRequestView=Backbone.View.extend({el:"#multiCitySpecialRequestsPopupDiv",ui:{form:null},isFirstFormFieldFocusActive:!1,events:{'click [data-hook="update_flight_info"]':"_updateFlightInfo",'click [data-hook="update_rental_car_flight_info"]':"_updateRentalCarFlightInfo",'change [data-hook="ArrivalTransferAirline"]':"_changeArrivalTransferAirline",'keypress [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'paste [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",
'change [data-hook="ArrivalTransferAirlineNumber"]':"_changeArrivalTransferAirlineNumber",'change [data-hook="ArrivalTransferTime"]':"_changeArrivalTransferTime",'change [data-hook="DepartureTransferAirline"]':"_changeDepartureTransferAirline",'change [data-hook="DepartureTransferTime"]':"_changeDepartureTransferTime",'keypress [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'paste [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",
'change [data-hook="DepartureTransferAirlineNumber"]':"_changeDepartureTransferAirlineNumber",'change [data-hook="ChangeArrivalAirline"]':"_changeArrivalAirline",'change [data-hook="ChangeArrivalTime"]':"_changeArrivalTime",'keypress [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'paste [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeArrivalAirlineNumber"]':"_changeArrivalAirlineNumber",'change [data-hook="ChangeDepartureAirline"]':"_changeDepartureAirline",
'change [data-hook="ChangeDepartureTime"]':"_changeDepartureTime",'keypress [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'paste [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber",'change [data-hook="ChangeDepartureAirlineNumber"]':"_changeDepartureAirlineNumber"},initialize:function(a){this.module=$.extend({},a).module;$(".flightNumber").on("keypress keyup blur",function(a){if(4<=this.value.length)return this.value=this.value.substring(0,4),
a.preventDefault(),!1;a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(8!=b&&0!=b&&(48>b||57<b))return a.preventDefault(),!1});$(".flightNumber").on("paste",function(a){window.event.clipboardData.getData("text");a.originalEvent.clipboardData.getData("Text").match(/[^\d]/)&&a.preventDefault();if(4<a.originalEvent.clipboardData.getData("Text").length)return a.preventDefault(),!1});$("#yesFlightInfo_0").change(function(a){$("#yesFlightInfo_0").is(":checked")&&$("#flightInformation_0").show()});
$("#noFlightInfo_0").change(function(a){$("#noFlightInfo_0").is(":checked")&&$("#flightInformation_0").hide()});$("#yesFlightInfo_1").change(function(a){$("#yesFlightInfo_1").is(":checked")&&$("#flightInformation_1").show()});$("#noFlightInfo_1").change(function(a){$("#noFlightInfo_1").is(":checked")&&$("#flightInformation_1").hide()});$namespace.TabOrder.updatePageTabOrder()},validateArrivalAndDepartureTransfers:function(a){var b=this.module.TranslationTexts;this.isFirstFormFieldFocusActive=!1;var d=
!0;if($("#yesFlightInfo_"+a).is(":checked")){var e=$("#"+a+"_AirlineNumber");this._removeError(e);var f=$("#"+a+"_AirCode");this._removeError(f);var g=$("#"+a+"_TransferTime");this._removeError(g);""==f.val()&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),d=!1);""==e.val()?(0==a?this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)):this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),
d=!1):0<e.length&&!e.val().match(AIRLINE_NUMBER_REGEX)&&(0==a?this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)):this._addError(e,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),d=!1);""==g.val()&&(0==a?this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)):this._addError(g,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),d=!1)}return d},
validateCarRentalSpecialRequests:function(){var a=this.module.TranslationTexts;this.isFirstFormFieldFocusActive=!1;var b=!0,d=$("#numberOfCars").val();if(""==$(".selectedFlightItemClass").data("selectedflightitem"))for(var e=0;e<parseInt(d);e++){if(""!=$("#selectedCarOption_"+e+"_ArrivalTime").val()){var f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);var g=$("#selectedCarOption_"+e+"_ArrivalAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,
$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),b=!1)}else{f=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber");this._removeError(f);g=$("#selectedCarOption_"+e+"_ArrivalAirCode");var h=$("#selectedCarOption_"+
e+"_ArrivalTime");this._removeError(g);this._removeError(h);""!=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&(this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1);""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()&&(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&
(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID)),b=!1));if(""!=$("#selectedCarOption_"+e+"_ArrivalAirCode").val()||""!=$("#selectedCarOption_"+e+"_ArrivalAirlineNumber").val())if(""==h.val()||0<h.length&&!h.val().match(AIRPORT_TRANSFER_REGEX))this._addError(h,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED)),b=!1}if(""!=$("#selectedCarOption_"+e+"_DepartureTime").val()){f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber");
this._removeError(f);g=$("#selectedCarOption_"+e+"_DepartureAirCode");this._removeError(g);if(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1;""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),
b=!1)}else f=$("#selectedCarOption_"+e+"_DepartureAirlineNumber"),this._removeError(f),g=$("#selectedCarOption_"+e+"_DepartureAirCode"),this._removeError(g),h=$("#selectedCarOption_"+e+"_DepartureTime"),this._removeError(h),""!=$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()&&(""==g.val()||0<g.length&&!g.val().match(AIRPORT_CODE_REGEX))&&(this._addError(g,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_AIRLINE_REQUIRED)),b=!1),""!=$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&
(""==f.val()?(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED)),b=!1):0<f.length&&!f.val().match(AIRLINE_NUMBER_REGEX)&&(this._addError(f,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID)),b=!1)),""==$("#selectedCarOption_"+e+"_DepartureAirCode").val()&&""==$("#selectedCarOption_"+e+"_DepartureAirlineNumber").val()||""!=h.val()||(this._addError(h,$namespace.MessageUtil.prefixError(a.SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED)),
b=!1)}return b},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},
_updateFlightInfo:function(a){var b=$(a.currentTarget);b.data("addflight-bookingid");a=b.data("transfercount");b=b.data("isflightincluded");for(var d=[],e=0;e<parseInt(a);e++)if(!$namespace.Validation.isNull(document.getElementById("uid_"+e))){var f=document.getElementById("uid_"+e).value,g=!1;if(null!=document.getElementById(e+"_AirCode")){if(!b&&!this.validateArrivalAndDepartureTransfers(e))return!1;var h=document.getElementById(e+"_AirCode").value,k=document.getElementById(e+"_Airport").value,
l=document.getElementById(e+"_AirlineNumber").value,p=document.getElementById(e+"_TransferDate").value,q=document.getElementById(e+"_TransferTime").value;null!=document.getElementById("noFlightInfo_"+e)&&document.getElementById("noFlightInfo_"+e).checked&&(g=!0);h={noFlightInfo:g,airportCode:h,airlineCode:k,airlineNumber:l,airlineDate:p,airlineTime:q}}d.push({bookingItemUid:f,transferSpecialRequest:h})}a={mcfbcsr:"UPDATE_FINAL_CONFIRMATION_TRANSFER_SPECIAL_REQUESTS_INFO_FROM_POPUP",specialRequestDetail:JSON.stringify({BOOKING_SPECIAL_REQUEST_DETAILS:d})};
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingSpecialRequestActivity.act",$.param(a),null,null,function(){var a=$("#arrivalTransferCard"+$("#multiCitySpecialRequestsPopupDiv").data("city-code")+"_"+$("#multiCitySpecialRequestsPopupDiv").data("city-index"));if("Arrival Transfer"==$("h3.pagetitle").text()){var b={mcfbc:"LOAD_FINAL_BOOKING_TRANSPORTATION_DETAILS",page:"multiCityFinalBookingConfirmation",itemId:$(a).data("product-id")};
$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingConfirmationActivity.act",$.param(b),null,$(a).attr("id"),function(){$namespace.TabOrder.updatePageTabOrder();$(a).find(".flightDetails").attr("tabindex","-1");$(a).find(".flightDetails").focus();$(a).find(".flightDetails").addClass("no-outline")},null)}var d=$("#departureTransferCard"+$("#multiCitySpecialRequestsPopupDiv").data("city-code")+"_"+$("#multiCitySpecialRequestsPopupDiv").data("city-index"));"Departure Transfer"==$("h3.pagetitle").text()&&
(b={mcfbc:"LOAD_FINAL_BOOKING_TRANSPORTATION_DETAILS",page:"multiCityFinalBookingConfirmation",itemId:$(d).data("product-id")},$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingConfirmationActivity.act",$.param(b),null,$(d).attr("id"),function(){$namespace.TabOrder.updatePageTabOrder();$(d).find(".flightDetails").attr("tabindex","-1");$(d).find(".flightDetails").focus();$(d).find(".flightDetails").addClass("no-outline")},null));$('BUTTON[data-hook="modal-close"]:visible').click();
$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null)},_updateRentalCarFlightInfo:function(a){$(a.currentTarget).data("addflight-bookingid");$("#numberOfCars").val();if(this.validateCarRentalSpecialRequests()){var b=this,d=[];$("div[id^='cardCarRequest_']").each(function(a,f){b.prepareCarItemData(f,d)});a=JSON.stringify({SPECIAL_REQUEST_DETAILS:d});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);a={mcfbcsr:"UPDATE_FINAL_CONFIRMATION_RENTAL_CAR_SPECIAL_REQUESTS_INFO_FROM_POPUP",rentalCarSpecialRequestDetail:a};
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingSpecialRequestActivity.act",$.param(a),null,null,function(){var a=$("#rentalCarCard"+$("#multiCitySpecialRequestsPopupDiv").data("city-code")+"_"+$("#multiCitySpecialRequestsPopupDiv").data("city-index")),b={mcfbc:"LOAD_FINAL_CONFIRMATION_RENTAL_CAR_RESULTS",page:"multiCityFinalBookingConfirmation",cityIndex:$(a).data("product-id"),numberOfCars:$("#multiCitySpecialRequestsPopupDiv").data("number-of-cars"),
previousCityHasCar:$("#multiCitySpecialRequestsPopupDiv").data("previouscity-has-car"),showSpecialRequestPopupLink:$("#multiCitySpecialRequestsPopupDiv").data("show-specialrequest-popuplink"),arrivalFlight:$("#multiCitySpecialRequestsPopupDiv").data("arrival-flight"),departureFlight:$("#multiCitySpecialRequestsPopupDiv").data("departure-flight")};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("multiCityFinalBookingConfirmationActivity.act",$.param(b),null,$(a).attr("id"),null,null);$('BUTTON[data-hook="modal-close"]:visible').click();
$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null)}},prepareCarItemData:function(a,b){var d=a.id.split("_"),e=$(a).attr("data-id"),f=$(a).find('input:checkbox:checked[name^="selectedCarOption_"]'),g=$(a).find('input:hidden[name^="selectedCarOption_"]'),h=$(a).find('select[id^="selectedCarOption_"]');a=$(a).find('input:text[id^="selectedCarOption_"]');if(null!=f){for(var k="",l="",p="",q="",r="",v="",n="",t="",u="",w="",y="",z=0;z<f.length;z++)k=""==k?f[z].value:k+","+f[z].value;for(f=0;f<
g.length;f++){z=g[f];var x=z.id.split("_")[2];"DepartureAirport"==x?u=z.value:"DepartureTransferDate"==x?w=z.value:"ArrivalAirport"==x?q=z.value:"ArrivalTransferDate"==x&&(r=z.value)}for(g=0;g<h.length;g++)f=h[g],z=f.id.split("_")[2],"ArrivalTime"==z?v=f.value:"DepartureTime"==z?y=f.value:"ArrivalAirCode"==z?l=f.value:"DepartureAirCode"==z&&(n=f.value);for(h=0;h<a.length;h++)g=a[h],f=g.id.split("_")[2],"ArrivalAirlineNumber"==f?p=g.value:"DepartureAirlineNumber"==f&&(t=g.value);b.push({itemType:"Car",
itemId:e,city:d[1],selectedCarOption:k,selectedCarOptionArrivalAirCode:l,selectedCarOptionArrivalAirlineNumber:p,selectedCarOptionArrivalAirport:q,selectedCarOptionArrivalTransferDate:r,selectedCarOptionArrivalTransferTime:v,selectedCarOptionDepartureAirCode:n,selectedCarOptionDepartureAirlineNumber:t,selectedCarOptionDepartureAirport:u,selectedCarOptionDepartureTransferDate:w,selectedCarOptionDepartureTransferTime:y})}},_changeArrivalAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_ArrivalAirCode",
"_ArrivalAirlineNumber"),e=a.replace("_ArrivalAirCode","_ArrivalTime"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_ArrivalAirCode","_ArrivalAirlineNumber_Required"),k=a.replace("_ArrivalAirCode","_ArrivalAirCode_Required"),l=a.replace("_ArrivalAirCode","_ArrivalTime_Required");""!=b||""!=f||""!=g?($("#"+k).text("*"),$("#"+h).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),
$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true")):($("#"+k).text(""),$("#"+h).text(""),$("#"+l).text(""));h=$("#"+a);k=$("#"+d);l=$("#"+e);""==b&&""==f&&""==g?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required")):""!=b?this._removeError(h):""!=f&&this._removeError(k);
""!=g&&this._removeError(l)},_changeArrivalTime:function(a){var b=a.target.id;a=$("#"+b).val();var d=b.replace("_ArrivalTime","_ArrivalAirlineNumber"),e=b.replace("_ArrivalTime","_ArrivalAirCode"),f=$("#"+d).val(),g=$("#"+e).val(),h=b.replace("_ArrivalTime","_ArrivalAirlineNumber_Required"),k=b.replace("_ArrivalTime","_ArrivalAirCode_Required"),l=b.replace("_ArrivalTime","_ArrivalTime_Required");""!=a||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+e).attr("required",
"true"),$("#"+e).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+e);k=$("#"+d);b=$("#"+b);""==g&&""==f&&""==a?(this._removeError(h),this._removeError(b),this._removeError(k),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required")):
""!=g&&""==f&&""==a?this._removeError(h):""!=f&&this._removeError(k);""!=a&&this._removeError(b)},_changeArrivalAirlineNumber:function(a){var b=a.target.id,d=$("#"+b).val(),e=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode"),f=$("#"+e).val(),g=b.replace("_ArrivalAirlineNumber","_ArrivalTime"),h=$("#"+g).val(),k=b.replace("_ArrivalAirlineNumber","_ArrivalAirCode_Required"),l=b.replace("_ArrivalAirlineNumber","_ArrivalAirlineNumber_Required"),p=b.replace("_ArrivalAirlineNumber","_ArrivalTime_Required");
""!=d||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+b);l=$("#"+e);g=$("#"+g);""==f&&""==d&&""==h?(this._removeError(l),this._removeError(k),this._removeError(g),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+
b).removeAttr("aria-required")):""!=f&&""==d&&this._removeError(l);$namespace.Validation.isBlankOrNull(a)||this._removeError(k);""!=h&&this._removeError(g)},_changeDepartureAirline:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureAirCode","_DepartureAirlineNumber"),e=$("#"+d).val(),f=a.replace("_DepartureAirCode","_DepartureTime"),g=$("#"+f).val(),h=a.replace("_DepartureAirCode","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureAirCode","_DepartureAirCode_Required"),
l=a.replace("_DepartureAirCode","_DepartureTime_Required");""!=b||""!=e||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required","true"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+f).attr("required","true"),$("#"+f).attr("aria-required","true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+a);d=$("#"+d);k=$("#"+f);""==b&&""==e&&""==g?(this._removeError(selectedArrivalAirline),
this._removeError(arrivalAirlineNumberId),this._removeError(k),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required"),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+f).removeAttr("required"),$("#"+f).removeAttr("aria-required")):""!=b?this._removeError(h):""!=e&&this._removeError(d);""!=g&&this._removeError(k)},_changeDepartureTime:function(a){a=a.target.id;var b=$("#"+a).val(),d=a.replace("_DepartureTime","_DepartureAirCode"),e=a.replace("_DepartureTime",
"_DepartureAirlineNumber"),f=$("#"+d).val(),g=$("#"+e).val(),h=a.replace("_DepartureTime","_DepartureAirlineNumber_Required"),k=a.replace("_DepartureTime","_DepartureAirCode_Required"),l=a.replace("_DepartureTime","_DepartureTime_Required");""!=b||""!=f||""!=g?($("#"+h).text("*"),$("#"+k).text("*"),$("#"+l).text("*"),$("#"+d).attr("required","true"),$("#"+d).attr("aria-required","true"),$("#"+e).attr("required","true"),$("#"+e).attr("aria-required","true"),$("#"+a).attr("required","true"),$("#"+a).attr("aria-required",
"true")):($("#"+h).text(""),$("#"+k).text(""),$("#"+l).text(""));h=$("#"+d);k=$("#"+e);l=$("#"+a);""==f&&""==g&&""==b?(this._removeError(h),this._removeError(k),this._removeError(l),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+e).removeAttr("required"),$("#"+e).removeAttr("aria-required"),$("#"+a).removeAttr("required"),$("#"+a).removeAttr("aria-required")):""!=f?this._removeError(h):""!=g&&this._removeError(k);""!=b&&this._removeError($("#"+a))},_changeDepartureAirlineNumber:function(a){var b=
a.target.id,d=b.replace("_DepartureAirlineNumber","_DepartureAirCode"),e=$("#"+b).val(),f=$("#"+d).val(),g=b.replace("_DepartureAirlineNumber","_DepartureTime"),h=$("#"+g).val(),k=b.replace("_DepartureAirlineNumber","_DepartureAirCode_Required"),l=b.replace("_DepartureAirlineNumber","_DepartureAirlineNumber_Required"),p=b.replace("_DepartureAirlineNumber","_DepartureTime_Required");""!=e||""!=f||""!=h?($("#"+k).text("*"),$("#"+l).text("*"),$("#"+p).text("*"),$("#"+d).attr("required","true"),$("#"+
d).attr("aria-required","true"),$("#"+b).attr("required","true"),$("#"+b).attr("aria-required","true"),$("#"+g).attr("required","true"),$("#"+g).attr("aria-required","true")):($("#"+k).text(""),$("#"+l).text(""),$("#"+p).text(""));k=$("#"+d);l=$("#"+b);p=$("#"+g);""==f&&""==e&&""==h?(this._removeError(k),this._removeError(l),this._removeError(p),$("#"+d).removeAttr("required"),$("#"+d).removeAttr("aria-required"),$("#"+b).removeAttr("required"),$("#"+b).removeAttr("aria-required"),$("#"+g).removeAttr("required"),
$("#"+g).removeAttr("aria-required")):""!=f&&""==e&&this._removeError(k);$namespace.Validation.isBlankOrNull(a)||this._removeError(l);""!=h&&this._removeError(p)},_changeArrivalTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeArrivalTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},_changeArrivalTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();
b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirline:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferTime:function(a){var b=a.target.id;a=$("#"+b).val();b=$("#"+b);""!=a&&this._removeError(b)},_changeDepartureTransferAirlineNumber:function(a){var b=a.target.id;$("#"+b).val();b=$("#"+b);$namespace.Validation.isBlankOrNull(a)||this._removeError(b)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.View=$namespace.View||{};
$namespace.View.CruiseSuperbookingTransportationView=Backbone.View.extend({el:"#super-booking-cruise-transport",events:{'click [data-hook="continueToNextPage"]':"_continueToNextPage","click .transferTypeLearnMore":"_onTransportationModalClick",'click a[data-hook="remove_transfer"]':"_onRemoveTransferClick",'click a[data-hook="select_transfer"]':"_onSelectTransferClick"},cruiseLineName:null,shipName:null,destinationName:null,departureDate:null,initialize:function(a){var b=$.extend({},a),d=$(window);
this.controller=b.controller;this.module=b.module;this.cruiseLineName=b.cruiseLineName;this.shipName=b.shipName;this.destinationName=b.destinationName;this.departureDate=b.departureDate;$(".cruiseTravelerTransportAccordion").addClass("accordion-item-current");this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.trackPageView("true"==a.cruiseSearchFromOfferPage?!0:!1);d.on("resize orientationchange",
$.proxy(this._onResize,this));d.trigger("resize")},_continueToNextPage:function(a){$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS)},_onTransportationModalClick:function(a){var b=$(a.currentTarget),d=b.attr("data-transfer-type");b=b.attr("included-transfer")?"CR_Transportation_Included_Transportation_Learn_More":"CR_Transportation_Additional_Transportation_Learn_More";switch(d){case "ArrivalTransfer":var e="Arrival_Transfer";break;case "DepartureTransfer":e=
"Departure_Transfer";break;case "CruiseHotelPierTransfer":e="Hotel_Pier_Transfer";break;case "CruisePierHotelTransfer":e="Pier_Hotel_Transfer";break;case "CruiseAirportPierTransfer":e="Airport_Pier_Transfer";break;case "CruisePierAirportTransfer":e="Pier_Airport_Transfer"}$namespace.Analytics.trackEvent(b,e,this.getGaCruisePackageId());this.showItineraryRemarksModal(a)},showItineraryRemarksModal:function(a){a={cppt:"SHOW_ITINERARY_REMARKS",itineraryCode:$(a.currentTarget).attr("data-iternary-code")};
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePrePostTransportation.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null)},_onRemoveTransferClick:function(a){var b=$(a.currentTarget);a=b.data("price-difference");var d=b.data("current-package-price");b=b.data("is-remove");$namespace.Analytics.trackEvent("CR_Transportation_Included_Transfer",
"Remove",this.getGaCruisePackageId());this.showConfirmationModal(a,d,b,null,null)},_onSelectTransferClick:function(a){var b=$(a.currentTarget);a=parseFloat(b.data("price-difference").replace(/[^\d.-]/g,""));var d=b.data("current-package-price"),e=b.data("is-remove"),f=b.data("city-id");b=b.data("transfer-day-tour-id");$namespace.Analytics.trackEvent("CR_Transportation_Additional_Transfer","Select",this.getGaCruisePackageId());this.showConfirmationModal(a,d,e,f,b)},showConfirmationModal:function(a,
b,d,e,f){a={csbt:"DISPLAY_PRICE_CONFIRMATION_POPUP",priceDifference:a,currentPackagePrice:b};var g=this.getGaCruisePackageId();$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperbookingTransportationActivity.act",$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);var a=function(){d?$namespace.Analytics.trackEvent("CR_Transportation_Included_Transfer","No_Thanks",g):d||$namespace.Analytics.trackEvent("CR_Transportation_Additional_Transfer",
"No_Thanks",g)};(new $namespace.Widgets.Confirm(this.responseText,function(){var a="";d?($namespace.Analytics.trackEvent("CR_Transportation_Included_Transfer","Continue",g),a={csbt:"SELECT_REMOVE_TRANSPORTATION"}):d||($namespace.Analytics.trackEvent("CR_Transportation_Additional_Transfer","Continue",g),a={csbt:"SELECT_REMOVE_TRANSPORTATION",cityId:e,transferDayTourId:f});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSuperbookingTransportationActivity.act",
$.param(a),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1);this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text}):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_DETAILS)},null)},a,a)).show()},null,"")},trackEventAccordion:function(a,b){var d;b.hasClass("cruiseSummaryAccordion")?d="CR_Transportation_Cruise_Summary":b.hasClass("cruiseTravelerInformation")?d="CR_Transportation_Travelers_Summary":
b.hasClass("cruiseTravelerStateroomAccordion")?d="CR_Transportation_Stateroom_Summary":b.hasClass("cruiseTravelerFlightAccordion")?d="CR_Transportation_Flights_Summary":b.hasClass("cruiseTravelerHotelAccordion")?d="CR_Transportation_Hotel_Summary":b.hasClass("cruiseTravelerTransportAccordion")&&(d="CR_Transportation_Transportation_Summary");$namespace.Analytics.trackEvent(d,"Click","Expand")},getGaCruisePackageId:function(){return"/cr/booking/bookingWidget/Transportation"+this.getGaCruisePackagePrefix()},
getGaCruisePackagePrefix:function(){return"/"+this.destinationName+"/"+this.cruiseLineName+"/"+this.shipName+"/"+this.departureDate},trackPageView:function(a){var b="bookingWidget";a&&(b="offerPage");a=document.title;b="/cr/booking/"+b+"/Transportation"+this.getGaCruisePackagePrefix();$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:a,v2:"Cruise",v67:"1",v74:b,v34:$(this.el).data("destination")});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:b})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.termsAndConditionsView=Backbone.View.extend({el:"#terms-and-conditions-page",events:{'click a[data-hook="showExternalPopup"]':"_showExternalPopup"},initialize:function(a){$(this);this.module=$.extend({},a).module;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"terms-and-conditions-page","Terms_And_Conditions");a=$("#termsAndConditionContent a");a.attr("data-taborder","document");a.addClass("external-link text-underline");a.attr("data-hook",
"_showExternalPopup");a.each(function(a){a=$(this);a.attr("data-url",a.attr("href"));a.removeAttr("href");a.removeAttr("target")});$(".external-link").on("click",this._showExternalPopup)},_showExternalPopup:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};COUNTRY_CODE_US=$namespace.Country.US_COUNTRY_CODE;COUNTRY_CODE_CA=$namespace.Country.CANADA_COUNTRY_CODE;
$namespace.View.HobeHotelPaymentOptionsView=Backbone.View.extend({el:"#hobeHotelPaymentOptions",ui:{chatLink:null,form:null},isFirstFormFieldFocusActive:!1,events:{'click a[data-hook="go_back"]':"_onGoBackClick",'click a[data-hook="continue_button"]':"_onContinueClick","change #surveyResponse":"_onSurveyResponseChange"},initialize:function(a){var b=$.extend({},a);this.module=b.module;this.controller=b.controller;this.module=a.module;this.gaVars=a.gaVars;this.trackingText="";this.$el.find('[data-hook="accordion"]').each(function(a,
b){b.accordion.close(!0)});this.ui.grossPaymentAmount=b.grossPaymentAmount;this.module.options.grossPaymentAmount=b.grossPaymentAmount;this.win=$namespace.SearchWidgetsModule.getWindowDimensions();utils.updateLiveContainer();this.ui.form=$("#hobeHotelPaymentOptions");this.translations=this.module.TranslationTexts;this.messages=this.module.TranslationMessages;$(window).load(function(){$("html, body").animate({scrollTop:$("#hobeHotelPaymentOptions").offset().top-400},50)});$("#hobeHotelPaymentOptions #anotherCardDiv").addClass("hide");
this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion);this.hotelId=$(this.el).data("hotel-id");this.workflow="Error/HO/Payment_Options,";this.initializeComponents();this.initializeErrorHandlers();this.trackGA();this.trackAdobe()},trackGA:function(){var a=this.gaVars.destination,b=this.gaVars.city,d=this.gaVars.state,e=this.gaVars.fromOffer;this.trackingText+="/ho/booking/";"true"==
e&&(this.trackingText+="offerPage/");this.trackingText+="viewPaymentOptions/";this.trackingText+=a+","+d+"/"+b+"/"+this.hotelId;$namespace.Analytics.track({vendor:"google",type:"pageview",text:this.trackingText})},trackAdobe:function(){$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar2:"HOTELS",eVar67:"01",eVar74:this.trackingText})},trackEventAccordion:function(a,b){b.hasClass("hotelSummaryAccordionTab")&&$namespace.Analytics.trackEvent("HO_Payment_Options_Results_Hotel_Summary",
"Click","Expand")},_onSurveyResponseChange:function(a){a=$(a.currentTarget).val();$namespace.Analytics.trackEvent("HO_Payment_Options_How_Did_You_Hear",a,this.hotelId)},_onGoBackClick:function(a){$namespace.GlobalConstants.RESPONSIVE_HOBE_SPECIAL_REQUESTS_PAGE_ENABLED?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_SPECIAL_REQUESTS):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_TRAVELER_INFO_PAGE)},_onContinueClick:function(a){$(".errorHandlerInitialized").trigger("removeError").trigger("validate");
$(a.target).trigger("validate");a=$(".errorDetected").filter(":visible");var b=a.first();0<b.length?(b.hasClass("")&&(b=a[1]),b.focus(),$namespace.DomUtil.scrollToMiddle(b[0])):this._validateAndSubmit()},initializeErrorHandlers:function(){$(".creditCardAmountTextBox").each(function(){var a=$(this);a.hasClass("errorHandlerInitialized")||new $namespace.Widgets.ErrorHandler(a)})},initializeComponents:function(){$(window).resize();var a=this.workflow+"amount,"+this.hotelId,b={scheduledDate:this.ui.scheduledDate,
scheduledDueDate:this.ui.scheduledDueDate,translations:this.translations,messages:this.messages,trackFormFieldsAnalytics:$.proxy(this.trackFormFieldsAnalytics,this)};$(".paymentForm").each(utils.eachUninitialized(function(a,d){d.paymentForm=new $namespace.Widgets.PaymentForm(a,b)}));var d={translations:this.translations};$(".addressForm").each(utils.eachUninitialized(function(a,b){b.addressForm=new $namespace.Widgets.AddressForm(a,d)}));var e={grossPaymentAmount:this.ui.grossPaymentAmount,amountLessThanMsg:this.messages.AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,
totalLessThanMsg:this.messages.TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE,amountGreaterThanMsg:this.messages.AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,totalGreaterThanMsg:this.messages.TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE,depositMinMaxMsg:this.messages.CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE,trackingText:a};this.ui.continueButtons=$('a[data-hook="continue_button"]').not("amountValidatorInitialized");this.ui.continueButtons.each(function(a,b){b.amountValidator=new $namespace.Widgets.AmountValidator($(b),
e)});this.$el.find(".country").on($namespace.Widgets.AddressForm.countryChangeEvent,$.proxy(this.trackFormFieldsAnalytics,this));this.trackFormFieldsAnalytics();$namespace.TabOrder.updatePageTabOrder()},_validateAndSubmit:function(){var a=this,b=$(".paymentForm").trigger("generatePaymentFormDetails").data("paymentFormDetails");b={pfa:"VALIDATE_CREDIT_CARDS_AND_CONTINUE_TO_FINALIZE",paymentFormDetails:JSON.stringify(b)};$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("paymentFormActivity.act",
$.param(b),null,"mainContent",function(b){b=JSON.parse(b);a.isValidationSuccess=b.successful;a.isValidationSuccess&&($namespace.Application.initializeOnMainContentReload(),$namespace.DomUtil.setElementLoadingMask(!1),$(".partial-page-load-heading").focus(),$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_REVIEW_AND_CONFIRM))})},trackFormFieldsAnalytics:function(){var a,b=this;this.$el.find(".creditCardForm").each(function(d,e){e.creditCardForm&&(a=b.workflow+
"cardholder_name_required,"+b.hotelId,e.creditCardForm.cardholderGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=b.workflow+"CC_required,"+b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=b.workflow+"CC_invalid,"+b.hotelId,e.creditCardForm.creditCardNumberGATracking(a),a=b.workflow+"expiration_month_required,"+b.hotelId,e.creditCardForm.creditCardExpiryMonthGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=b.workflow+"expiration_year_required,"+
b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=b.workflow+"expiration_date_past,"+b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_SPECIAL]=b.workflow+"expiration_before_scheduled_date,"+b.hotelId,e.creditCardForm.creditCardExpiryYearGATracking(a),a={},a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=b.workflow+"CVV_required,"+b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=b.workflow+"CVV_invalid,"+b.hotelId,e.creditCardForm.cvvCodeGATracking(a))});this.$el.find(".addressForm").each(function(d,
e){e.addressForm&&(a=b.workflow+"street_required,"+b.hotelId,e.addressForm.streetGATracking(a),a=b.workflow+"city_required,"+b.hotelId,e.addressForm.cityGATracking(a))});this.$el.find(".addressForm").each(function(d,e){e.addressForm&&(d=$(e).find(".country").val(),a=d==COUNTRY_CODE_CA?b.workflow+"province_required,"+b.hotelId:b.workflow+"state_required,"+b.hotelId,e.addressForm.stateOrProvinceGATracking(a),a={},d==COUNTRY_CODE_CA?(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=b.workflow+"postalcode_required,"+
b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=b.workflow+"postalcode_invalid,"+b.hotelId):(a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_BLANK]=b.workflow+"zipcode_required,"+b.hotelId,a[$namespace.Widgets.ErrorHandler.ERROR_TYPE_INVALID]=b.workflow+"zipcode_invalid,"+b.hotelId),e.addressForm.zipCodeGATracking(a))})}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};breakpoint=utils.Breakpoint;$namespace.View=$namespace.View||{};
$namespace.View.HobeHotelPageView=Backbone.View.extend({el:"#hobeHotelPage",ui:{chatLink:null},events:{"click a.modal-gallery-thumb":"_onGalleryThumbClick",'click a[data-modal="responsive-popup-data-modal"]':"_showRateDetailsAndCancellationPopup",'click a[data-modal="data-itinerary-modal"]':"_showIncludeExtrasItineraryRemarksModal",'click a[data-hook="modify-room-toggle"]':"_toggleModifyRoom",'click a[data-hook="SignInAndBook_button"]':"_onContinueClick",'click a[data-hook="continue_button"]':"_onContinueClick",
"click .turnToTeaserWidgetLink":"_onReviewsLinkClick",'click a[id^="hotelLearnMore"]':"_onLearnMoreClick",'click a[data-hook="hotel-room-selection"]':"_onSelectClick"},initialize:function(a){this.module=$.extend({},a).module;this.fromHotelOffers=$(this.el).data("from-hotel-offers");this.city=$(this.el).data("city");this.trackingPage=1==this.fromHotelOffers?"offerPage/searchHotels":"searchHotels";this.$el.find('[data-hook="accordion"]').each(function(a,b){b.accordion||(b.accordion=new $namespace.Widgets.Accordion($(b)));
b.accordion&&b.accordion.close(!0)});this.initLearnMoreLink();var b=$(this.el).data("hotel-id");""!=b&&this.$el.find('[data-hook="advisory-widget"]').each(function(a,d){a=$(d);self.advisoryWidget=new $namespace.Widgets.Advisory(a,{sourcePage:"HobeHotelPage",hotelId:b})});this.hotelId=$(this.el).data("hotel-id");a=$(".hotelRoomsCard");this.roomAccodionsList=[];for(var d=0;d<a.length;d++){for(var e=$(a[d]).find(".nested-accordion"),f=$(a[d]).attr("id"),g=[],h=0;h<e.length;h++)g[h]=new $namespace.Widgets.Accordion($(e[h]));
this.roomAccodionsList[f]=g}this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find(".accordion").on("ct.accordion.opening",this.trackButtonAccordion);$(window).on("resize orientationchange",$.proxy(this._onResize,this));this.$el.find('[data-tab="map-tab"]').on("ct.tabswitcher.open",$.proxy(this._onMapTabClick,this));this.$el.find('[data-tab="list-tab"]').on("ct.tabswitcher.open",$.proxy(this._onListTabClick,this));this.ui.chatLink=this.$el.find("#chatNowLink");
if(this.ui.chatLink){var k=this;this.ui.chatLink.on("click",function(a){$namespace.Analytics.trackEvent("Chat","Initiate_Chat","/ho/booking/"+k.trackingPage+"/"+k.city+"/"+b)})}this.trackingText="/ho/booking/"+this.trackingPage+"/"+this.city+"/"+b;$namespace.Analytics.track({vendor:"google",type:"pageview",text:this.trackingText});$namespace.Analytics.track({vendor:"adobe",type:"pageView",events:"event1",eVar1:document.title,eVar2:"HOTELS",eVar67:"01",eVar74:this.trackingText})},_onGalleryThumbClick:function(a){a=
$(a.currentTarget);new $namespace.Widgets.ModalGallery(a,{defaultAltText:"Hotel Image",isHotelGallery:"true"});a=$(".hotelIdValue").first().val();$namespace.Analytics.trackEvent("ho_Hotel_popup","Image_Carousel",a)},callbackCreateBookingAndLoadTravelerInformationPage:function(a,b,d,e){a=$(".hotelIdValue").val();"continue"==$('a[data-hook="continue_button"]').attr("data-button-label")?$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_TRAVELER_INFO_PAGE):($namespace.Analytics.trackEvent("ho_Hotels_Sign in and Book",
"click",a),$namespace.GlobalConstants.RESPONSIVE_HOBE_TRAVELER_INFORMATION_PAGE_ENABLED?$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_TRAVELER_INFO_PAGE,[!0]):$namespace.Navigation.loadPage(_webLoc+"/?h=3&checkMemberInactivity=true&_uid="+(new Date).getTime()));return!0},createBookingAndLoadTravelerInformationPage:function(){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelPageActivity.act",$.param({hobehp:"CREATE_BOOKING"}),
null,"mainContent",this.callbackCreateBookingAndLoadTravelerInformationPage,null)},initLearnMoreLink:function(){var a=this;$("a[data-hook='hotel-details-megatip']").click(function(){$(".megatip.active").find('[data-hook="megatip-close"]').click();var b=this,d=$(b),e=d.data("hotelid"),f=d.data("megatip");d=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(e);var g="false";null!=d&&(g=d.getReviewsCount()>=$namespace.TurnToReviewsUtil.MIN_NUMBER_OF_REVIEWS_TO_SHOW_REVIEWS());d={hotelId:e,displayReviewsAccordion:g,
hobehp:"LOAD_HOBE_HOTEL_DETAIL_INFO"};$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelPageActivity.act",$.param(d),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);$("#"+f).html(this.responseText);b.megatip=new $namespace.Widgets.Megatip($(b));$.hook("accordion").each(utils.eachUninitialized(function(b,d){d.accordion=new $namespace.Widgets.Accordion(b);b.on("ct.accordion.clicked",$.proxy(a,"_trackAllAccordion"))}));
$.hook("nested-accordion").each(utils.eachUninitialized(function(a,b){b.nestedccordion=new $namespace.Widgets.Accordion(a)}));$('.megatip DIV[data-hook="tab-switcher"]').each(utils.eachUninitialized(function(a,d){b.tabSwitcher=new $namespace.Widgets.TabSwitcher($(d));b.tabSwitcher.currentTab=null}));b.tabSwitcher&&(b.tabSwitcher.onSelect=function(a,b,d){"hotel-features-tab"!=a&&"room-features-tab"!=a&&"points-of-interest-tab"!=a||$namespace.Analytics.trackEvent("ho_Hotel_Property_Activities","click",
e)});b.legendtooltip=new $namespace.Widgets.Tooltip($("#map-legend-tooltip-"+e));b.megatip.show();$namespace.Browser.isSafari()&&window.setTimeout(function(){$(window).scrollTop($(".megatip.active").offset().top-140)},50);""==$("#hotelRoomFeatureTabContent").text()&&$('li[data-tab="room-features-tab"]').addClass("hidden");""==$("#hotelPointOfInterestTabContent").text()&&$('li[data-tab="points-of-interest-tab"]').addClass("hidden")},null,"")})},_showRateDetailsAndCancellationPopup:function(a){var b=
$(a.currentTarget);a=b.data("iternary-code");var d=$("#"+a).html();a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,b,!1);var e=a.module.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:e.HOTEL_RATE_DETAILS_AND_CANCELLATION_POLICY_ERROR_TITLE}):(e=new $namespace.Widgets.Modal(this.responseText),$(".modal-body").html(d),e.show())}}(this);$namespace.DomUtil.setElementLoadingMask(!0,b,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",
$.param({cthr:"SHOW_CANCEL_MESSAGE",itineraryRemarksModalTitle:"Rate details and cancellation policy"}),null,null,a,null);$namespace.Analytics.trackEvent("ho_Hotel_Room_Rate","click",this.hotelId)},_showIncludeExtrasItineraryRemarksModal:function(a){var b=$(a.currentTarget);a=b.attr("data-iternary-code");var d=b.attr("data-includeRemarks"),e=b.attr("data-filterRemarks"),f=b.attr("id"),g={cthr:"SHOW_ITINERARY_REMARKS"};void 0!=e&&e&&(g={cthr:"SHOW_FILTERED_ITINERARY_REMARKS"});g.itineraryCode=a;$namespace.DomUtil.setElementLoadingMask(!0,
b,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hotelsResults.act",$.param(g),null,null,function(){$namespace.DomUtil.setElementLoadingMask(!1,b,!1);(new $namespace.Widgets.Modal(this.responseText)).show()},null);"true"!=d&&"IncludedExtra"!=f||$namespace.Analytics.trackEvent("ho_Hotel_Included_Extras","click",this.hotelId)},_toggleModifyRoom:function(a){var b=$(a.currentTarget),d=b.attr("data-room-number"),e="";a.preventDefault();a.stopPropagation();a=b.attr("data-room-link");var f=$("#"+a);
b.parent().parent().find(".roomRateTaxesAndFees.outer").toggle();$(window).scrollTop($(f).offset().top-100);if(b.hasClass("closed"))b.blur(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT,{roomNumber:d}),b.removeClass("closed").addClass("opened").text(this.module.TranslationTexts.KEEP_CURRENT_SELECTION_BUTTON_TEXT).attr("aria-label",e).attr("data-test","buttonKeepCurrentSelection"),f.find(".selectedRoomCategory:first").hide(),
f.find(".rooms-list:first").show(),$namespace.TabOrder.updatePageTabOrder(),setTimeout(function(){f.find(".accordion-button:first").focus()},1);else for(f.find(".rooms-list:first").hide(),$namespace.TabOrder.updatePageTabOrder(),e=$namespace.TranslationUtil.replaceParameters(this.module.TranslationTexts.ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT,{roomNumber:d}),b.attr("aria-label",e).removeClass("opened").addClass("closed").text(this.module.TranslationTexts.MODIFY_ROOM_BUTTON_TEXT).attr("data-test","buttonModifyRoom"),
f.find(".selectedRoomCategory:first").show(),b.focus(),$namespace.Analytics.trackEvent("ho_Hotel_Room_Select","Keep_Selection",this.hotelId),b=this.roomAccodionsList[a],d=0;d<b.length;d++)b[d].close();$(window).trigger("ct.section.toggling")},_onReviewsLinkClick:function(a){$(".megatip.active").find('[data-hook="megatip-close"]').click();a=$(a.currentTarget).data("hotel-id");var b=$namespace.TurnToReviewsUtil.getTeaserWidgetBySku(a);if(null!=b){var d=this;$(window).on("ct.megatip.opened",function(){var a=
b.getReviewsAccordionId();$(a).focus();$(a).closest('[data-hook="accordion"]').get(0).accordion.open();d._trackAllAccordion({currentTarget:$(a)},$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS);$(window).off("ct.megatip.opened")});$('a[data-megatip][data-hotelid="'+a+'"]').click()}},_onContinueClick:function(a){this.validateHotelSelection()},validateHotelSelection:function(a){var b="hobehp=VALIDATE_HOTEL_SELECTION";$namespace.Validation.isBlankOrNull(a)||(b+="&advisoryItemUid="+a);var d=this;
$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelPageActivity.act",b,null,null,function(a){var b=$namespace.Widgets.Advisory.TranslationTexts;this.message?$namespace.MessageUtil.showMessage({type:1,text:this.message.text,title:b.HOTEL_ADVISORY_POPUP_ERROR_TITLE}):$namespace.Validation.isBlankOrNull(a)?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Acknowledge(this.responseText,$.proxy(d,"validateHotelSelection"))).show(),
$namespace.Utils.Breakpoint.isDesktop()&&$("#hotelAcknowlegementContentDiv, #hotelTafAcknowlegementContentDiv").find("label").each(function(a,b){b.removeAttribute("for")})):d.createBookingAndLoadTravelerInformationPage()},null,"")},_changeRoomSelection:function(a,b){a={hobehp:"CHANGE_SELECTION",uid:a,selectedPage:this.selectedPage,sortType:this.sortType,ascendingOrder:this.ascendingOrder};$(window).scrollTop($(b).offset().top-100);var d=$(".sidebar-column").find("div.active"),e=null;1===d.length&&
(e=d.attr("data-id"));var f=this.sortType;d=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1,!1);var a=$(b).find("h3:visible");a.addClass("no-outline").attr("data-taborder","document");$namespace.Application.initializeOnMainContentReload();$("select#selectHotelSort").val(f);e&&$(".sidebar-column").find("[data-id="+e+"]").find(".accordion-button").trigger("open-instant");$namespace.TabOrder.updatePageTabOrder();a.on("blur",function(b){a.attr("tabindex","-1").removeAttr("data-taborder");
a.off("blur")});setTimeout(function(){a.focus()},1)}}(this);$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelPageActivity.act",$.param(a),null,"mainContent",d,null)},_onSelectClick:function(a){a.preventDefault();var b=$(a.currentTarget),d=b.data("uid"),e="#"+b.data("room-link"),f=this;a=b.data("price-diff");var g=b.data("new-price-value");b=b.data("total-new-price");var h=this.module.TranslationTexts.HOTEL_ROOM_CHANGE_MODAL_TITLE,k=this.module.TranslationTexts.HOTEL_CHANGE_MODAL_NEW_PACKAGE_PRICE_LABEL;
if(0==a)this._changeRoomSelection(d,e);else{var l=0<a?this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE:this.module.TranslationTexts.HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE;a=this._populatePriceChangeModalTemplate(a,g,b,k,h,!1,l);var p=new $namespace.Widgets.Confirm(a,function(){f._changeRoomSelection(d,e);$namespace.Analytics.trackEvent("ho_Hotel_Room_Select","continue",f.hotelId)},function(){p.hide();$namespace.Analytics.trackEvent("ho_Hotel_Room_Select","No_Thanks",f.hotelId)});
p.show()}$namespace.Analytics.trackEvent("ho_Hotel_Room_Select","click",f.hotelId)},_populatePriceChangeModalTemplate:function(a,b,d,e,f,g,h){"content"in document.createElement("template")?(a=$("#confirm_hotel_selection_change"),a=$(a.prop("content")).clone()):(a=$("#confirm_hotel_selection_change div#upgradeConfirmCenterModal"),a=a.clone());a.find("#priceChangeMessage").html(h);a.find("#priceChangeMessage").find("span").text(b);a.find("#priceChangeModalTitle").text(f);a.find("#newPackagePriceLabel").text(e);
a.find("#priceChangeNewPrice").text(d);g&&a.find("#confirmHotelChangePriceMayChangeNote").removeClass("hidden");return a},_onLearnMoreClick:function(a){$namespace.Analytics.trackEvent("ho_Hotel_Learn_More","click",this.hotelId)},_trackAllAccordion:function(a,b){$(a.currentTarget);a=$(".hotelIdValue").first().val();var d=this.module.TranslationTexts;b==d.OVERVIEW?$namespace.Analytics.trackEvent("ho_Hotel_Overview","click",a):b==d.PROPERTY?$namespace.Analytics.trackEvent("ho_Hotel_Property","click",
a):b==$namespace.TurnToReviewsUtil.TranslationTexts.REVIEWS&&$namespace.Analytics.trackEvent("ho_Hotel_Hotel_Reviews",a,a+"HOBE",null)},trackButtonAccordion:function(a,b){b.hasClass("buttonRoomAccordion")&&(a=$(".hotelIdValue").first().val(),$namespace.Analytics.trackEvent("ho_Hotel_Room_Category","click",a))}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.HobeTravelerInformationView=Backbone.View.extend({el:"#hobeTravelerInformation",events:{'click [data-hook="check_price_availability"]':"_onBannerInfoLinkClick","click a.modal-gallery-thumb":"_onGalleryThumbClick","click #fullTermsConditions":"_onTermsConditionsClick","keypress .accordion-button":"_openCloseTravelerAccordionOnEnterEvent","click .accordion-button":"_openCloseTravelerAccordionOnClick",'click [data-hook="continue_button"]':"_continueButtonClick",'click [data-hook="showmore-trigger"]':"_readMoreInformation",
'click [data-hook="showless-trigger"]':"_readLessInformation",'keypress input[data-hook="name-field"]':"_onNameFieldKeyPress",'keypress input[data-hook="input_reward_club"]':"_onRewardFieldKeyPress",'focusout [data-hook="name-field"]':"_onInputFocusOut","change .valueRequired":"_onSelectDropDownChange"},isFirstFormFieldFocusActive:!1,regexp:{type:{pattern:/^[0-9]+/},id:{pattern:/^[0-9]*/},title:{pattern:/^[a-zA-Z\.]{0,6}$/},firstName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},middleName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},
lastName:{pattern:/^[A-Z\u00C0-\u017A_ '\.\-]{1,50}$/},suffix:{pattern:/^[a-zA-Z\.]{0,5}$/},rewards:{pattern:/^[a-zA-Z]{0,50}$/}},initialize:function(a){a=$.extend({},a);this.module=a.module;this.totalRooms=parseInt(a.totalRooms,10);this.showAccordionFocus(1);this.setIdForExternalInfoLink()},resize:function(){this.modalView&&this.modalView.resize()},_openCloseTravelerAccordionOnEnterEvent:function(a){var b=a.which;if(13==b||32==b)a.preventDefault(),this.openCloseTravelerAccordion(a)},_openCloseTravelerAccordionOnClick:function(a){this.openCloseTravelerAccordion(a)},
_continueButtonClick:function(a){this.validateAndGoToNextPage()},_onNameFieldKeyPress:function(a){return $namespace.Validation.isPersonNameKeyCode(a)},_onRewardFieldKeyPress:function(a){a=a||window.event;a=void 0==a.charCode||0==a.charCode?a.keyCode:a.charCode;return 64<a&&91>a?!0:96<a&&123>a?!0:!1},_onInputFocusOut:function(a){a=$(a.currentTarget);a.val(a.val().trim().toUpperCase())},openCloseTravelerAccordion:function(a){a=$(a.currentTarget);var b=a.data("pax-number");this.setErrorFocus=null;a.closest("div.accordion-item").hasClass("active")?
this.hideAccordionFocus(b):this.showAccordionFocus(b);$namespace.TabOrder.updatePageTabOrder()},showAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.addClass("active");a.find(".accordion-content").show();a.find(".accordion-button").attr("aria-expanded","true");a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-up-blue.svg");null!=this.setErrorFocus&&this.setErrorFocus.focus()},hideAccordionFocus:function(a){a=$("[data-accordionfocus="+a+"]");a.removeClass("active");a.find(".accordion-content").hide();
a.find(".accordion-button").attr("aria-expanded","false");a.find("img").attr("src",_webLoc+"/shared/images/svg/svg-caret-down-blue.svg")},setInvalidRewardsError:function(a){for(var b=this.module.TranslationTexts,d=this,e={$jscomp$loop$prop$traveler$43:1};e.$jscomp$loop$prop$traveler$43<=this.totalRooms;e={$jscomp$loop$prop$rewardNumber$41:e.$jscomp$loop$prop$rewardNumber$41,$jscomp$loop$prop$rewardElement$42:e.$jscomp$loop$prop$rewardElement$42,$jscomp$loop$prop$traveler$43:e.$jscomp$loop$prop$traveler$43},
e.$jscomp$loop$prop$traveler$43++)e.$jscomp$loop$prop$rewardElement$42=$("#input_reward_club_"+e.$jscomp$loop$prop$traveler$43),e.$jscomp$loop$prop$rewardNumber$41=e.$jscomp$loop$prop$rewardElement$42.val(),$.each(a,function(e){return function(f,h){a[f].rewardNumber==e.$jscomp$loop$prop$rewardNumber$41&&0==a[f].rewardNumberValid&&(d.addError(e.$jscomp$loop$prop$rewardElement$42,$namespace.MessageUtil.prefixError(b.INVALID_REWARDS_NUMBER)),d.showAccordionFocus(e.$jscomp$loop$prop$traveler$43))}}(e))},
validateAndGoToNextPage:function(){var a=this.validateTravelerInfoForm();a.length===this.totalRooms&&this.submitTravelerInfoForm(a)},submitTravelerInfoForm:function(a){a={hobetrinfo:"ASSIGN_TRAVELLERS_TO_HOBE_BOOKING",passengerDetail:JSON.stringify({PASSENGER_INFO:a})};var b=this;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeTravelerInformationActivity.act",$.param(a),null,"hobeTravelerInformationTabContent",function(a){this.message?($namespace.DomUtil.setElementLoadingMask(!1,
null,!1),a=$namespace.TranslationUtil.replaceParameters(messages.TRAVELER_ERROR_MESSAGE.translatedText,{phoneNumber:$namespace.GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showMessage({type:1,text:a?a:"Unknown server error",title:translations.TRAVELER_ERROR_COMMON})):a&&0<a.length?(b.setInvalidRewardsError(invalidTravelers),$namespace.DomUtil.setElementLoadingMask(!1,null,!1)):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_HOBE_SPECIAL_REQUESTS)},
null)},removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},addAndTrackFormError:function(a,b,d){this.addError(a,b)},addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+b+"</label>");$(window).trigger("resize");
this.isFirstFormFieldFocusActive||(a.parent().removeClass("focus"),this.isFirstFormFieldFocusActive=!0,a.focus(),this.setErrorFocus=a);$namespace.TabOrder.updatePageTabOrder()},validateTravelerInfoForm:function(){for(var a=this.module.TranslationTexts,b=this.regexp,d=[],e=!0,f,g=1;g<=this.totalRooms;g++){var h=$("#title_"+g),k=h.val();this.removeError(h);null==k||""==k?(e=!1,f="title_is_required_traveler_"+g,this.addAndTrackFormError(h,$namespace.MessageUtil.prefixError(a.REQUIRED_TITLE),f)):b.title.pattern.test(k)||
(e=!1,f="title_is_invalid_traveler_"+g,this.addAndTrackFormError(h,$namespace.MessageUtil.prefixError(a.INVALID_TITLE),f));var l=$("#first_name_"+g);h=$.trim(l.val());this.removeError(l);""==h?(e=!1,f="first_name_is_required_traveler_"+g,this.addAndTrackFormError(l,$namespace.MessageUtil.prefixError(a.REQUIRED_FIRST_NAME),f)):b.firstName.pattern.test(h)||(e=!1,f="first_name_is_invalid_traveler_"+g,this.addAndTrackFormError(l,$namespace.MessageUtil.prefixError(a.INVALID_FIRST_NAME),f));var p=$("#last_name_"+
g);l=$.trim(p.val());this.removeError(p);""==l?(e=!1,f="last_name_is_required_traveler_"+g,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(a.REQUIRED_LAST_NAME),f)):b.lastName.pattern.test(l)?2>l.length&&(e=!1,f="last_name_must_be_greater_than_2_traveler_"+g,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(a.TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE),f)):(e=!1,f="last_name_is_invalid_traveler_"+g,this.addAndTrackFormError(p,$namespace.MessageUtil.prefixError(a.INVALID_LAST_NAME),
f));var q=$("#middle_name_"+g);p=$.trim(q.val());null==p||""==p||b.lastName.pattern.test(p)||(e=!1,f="middle_name_initial_is_invalid_traveler_"+g,this.addAndTrackFormError(q,$namespace.MessageUtil.prefixError(a.INVALID_MIDDLE_INITIAL_NAME),f));var r=$("#suffix_"+g);q=$.trim(r.val());this.removeError(r);null==q&&""==q||b.suffix.pattern.test(q)||(e=!1,f="suffix_is_invalid_traveler_"+g,this.addAndTrackFormError(r,$namespace.MessageUtil.prefixError(a.INVALID_SUFFIX),f));r=$("#input_reward_club_"+g);f=
$.trim(r.val());this.removeError(r);null==f&&""==f||b.rewards.pattern.test(f)||(e=!1,f="rewards_is_invalid_traveler_"+g,this.addAndTrackFormError(r,$namespace.MessageUtil.prefixError(a.INVALID_REWARDS_NUMBER),f));e&&(f=$("#travelerInfoSection_"+g).data("booking-passenger-info-id"),r=$("#traveler_"+g).data("traveler-type"),d[g-1]={paxId:f,paxTitle:k,paxType:r,paxFirstName:h,paxMedInitial:p,paxLastName:l,paxSuffix:q,ihgRewardsClubNo:"placeholder"});e||(this.showAccordionFocus(g),$namespace.DomUtil.setElementLoadingMask(!1,
null,!1))}b=$("#accept_terms");this.removeError(b);b.is(":checked")||(b.addClass("darkRedLabel"),$(".termsAndConditions-text-and-links").addClass("darkRedLabel error"),$(".termsAndConditions-link").addClass("darkRedLabel error"),e=!1,f="terms_and_conditions_check_is_required_stateroom_"+$(".stateroomTab").attr("data-bookingindex"),this.addAndTrackFormError(b,$namespace.MessageUtil.prefixError(a.TERMS_AND_CONDITIONS_ERROR_MESSAGE),f));e||(d=[],$namespace.DomUtil.setElementLoadingMask(!1,null,!1));
return d},_readMoreInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$(".showmore-content").removeClass("showmore-content");$('[aria-hidden="true"]').each(function(a,d){$(d).attr("aria-hidden","false");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showless-trigger"]').removeClass("displayNone");$(window).trigger("resize");$namespace.Utils.Breakpoint.isMobile()?$("#mobileReadMoreLink").focus():$("#desktopReadMoreLink").focus();
$namespace.TabOrder.updatePageTabOrder()},_readLessInformation:function(a){a=$(a.currentTarget);$(a).addClass("displayNone");$('[data-hook="showmore-content"]').addClass("showmore-content");$('[aria-hidden="false"]').each(function(a,d){$(d).attr("aria-hidden","true");$(d).find("a").attr("data-taborder","document");$namespace.TabOrder.updatePageTabOrder()});$('[data-hook="showmore-trigger"]').removeClass("displayNone");$(window).trigger("resize");$namespace.TabOrder.updatePageTabOrder()},setIdForExternalInfoLink:function(){$(".traveler-info-tsa a").addClass("external-link");
$(".traveler-info-tsa a").attr("id","external_link");$(".traveler-info-tsa a").each(function(a){$(this).attr("data-url",$(this).attr("href"));$(this).removeAttr("href");$(this).removeAttr("target")});var a=$(".traveler-info-tsa a");$(a).addClass("external-link");$(a).each(function(a){a=$(this);a.attr("data-url",a.attr("href"));a.removeAttr("href");a.removeAttr("target")});$(".external-link").on("click",this._showModalToExternalLink);$(".showmore-content .blue-bullets li").each(function(a,d){$(d).attr("aria-hidden",
"true");$(d).find("a").attr("tabindex","-1");$namespace.TabOrder.updatePageTabOrder();0==a&&($namespace.Utils.Breakpoint.isMobile()?$(d).attr("id","mobileReadMoreLink"):$(d).attr("id","desktopReadMoreLink"),$(d).attr("tabindex","-1"))})},_showModalToExternalLink:function(a){a=$(a.currentTarget).data("url").trim();$namespace.Navigation.loadExternalUrl(a)},_onSelectDropDownChange:function(a){a.preventDefault();a=$(a.currentTarget);""!=a.val()?this.removeError(a):"middle_name"==a.attr("name")&&""==a.val()&&
this.removeError(a);$namespace.TabOrder.updatePageTabOrder()}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};$namespace.View=$namespace.View||{};
$namespace.View.HobeHotelSpecialRequestsView=Backbone.View.extend({el:"#hobe-hotel-special-requests-page",events:{'change [data-hook="SelectedHotelOption"]':"_selectedHotelOption",'keypress [data-hook="remarks"]':"_selectedHotelRemarks",'input [data-hook="remarks"]':"_selectedHotelRemarks","click .hotelSummaryAccordionTab":"_onHotelSummaryAccordionClick","click #chatNowLink":"_onChatNowLinkClick",'click a[data-hook="continue_button"]':"_onContinueToPaymentsClick"},initialize:function(a){this.module=
$.extend({},a).module;this.gaVars=a.gaVars;this.trackingText="";this.trackGA();this.trackAdobe()},trackGA:function(){var a=this.gaVars.destination,b=this.gaVars.state,d=this.gaVars.fromOffer;this.trackingText+="/ho/booking/";"true"==d&&(this.trackingText+="offerPage/");this.trackingText+="viewSpecialRequests/";this.trackingText+=a+","+b+"/"+this.gaVars.hotelId;$namespace.Analytics.track({vendor:"google",type:"pageview",text:this.trackingText})},trackAdobe:function(){$namespace.Analytics.track({vendor:"adobe",
type:"pageView",events:"event1",eVar1:"Special Requests - Hotels | Costco Travel",eVar2:"HOTELS",eVar74:this.trackingText})},_onContinueToPaymentsClick:function(a){if(this._validateSpecialRequests(a)){var b=this,d=[];$("div[id^='cardHotelRequest_']").each(function(a,e){b.prepareHotelItemData(e,d)});var e=this.module.TranslationTexts;a=JSON.stringify({SPECIAL_REQUEST_DETAILS:d});$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeHotelSpecialRequestsActivity.act",
$.param({hobesr:"LOAD_CREATE_SPECIAL_REQUESTS",specialRequestInfo:a}),null,null,function(){this.message?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),TranslationUtil.replaceParameters(e.SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE,{tollFreeNumber:GlobalConstants.BOOKING_PHONE_NUMBER}),$namespace.MessageUtil.showMessage({type:1,text:genericErrorMsg,title:e.SPECIAL_REQUESTS_ERROR_COMMON})):$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_PAYMENT_PAGE,["true"])},
null)}},_onHotelSummaryAccordionClick:function(){$namespace.Analytics.trackEvent("HO_Special_Requests_Hotel_Summary","Click","Expand")},_onChatNowLinkClick:function(){$namespace.Analytics.trackEvent("Initiate_Chat","Chat",this.trackingText)},_selectedHotelOption:function(a){var b=a.target.id.replace(/[^0-9]/g,"");a=$("#selectedHotelRemark_"+b+"_Required");var d=$("#selectedHotelRemark_"+b);b=$('[name="selectedHotelOption_'+b+'"]');if(0<b.length)for(var e=0;e<b.length;e++)"Accessible Room"==b[e].value&&
(b[e].checked?(a.text("*"),d.attr("required","true"),d.attr("aria-required","true")):(a.text(""),d.removeAttr("required"),d.removeAttr("aria-required"),this._removeError(d)))},_selectedHotelRemarks:function(a){this.updateCommentTextCount(a,"textarea-count-");var b=$("#"+a.target.id);b.val();$namespace.Validation.isBlankOrNull(a)||this._removeError(b)},updateCommentTextCount:function(a,b){a=$(a.currentTarget).attr("id");var d=a.split("_"),e=$("#"+a),f=$("."+b+d[1]);f.html(e.val().length);e.on("input",
function(){512<e.val().length?(e.val(e.val().substr(0,512)),f.html(512)):f.html(e.val().length)});e.on("keypress",function(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if([42,43,92,91,93,94,95,96,60,62,34].includes(b)||32>b||122<b)return a.preventDefault(),!1})},_addError:function(a,b){a.addClass("error");a.attr("aria-describedby",a.attr("id")+"_error");a.after('<label tabindex="-1" class="error no-outline error-space" id="'+a.attr("id")+'_error" data-test="errorLabel'+a.attr("id")+'">'+
b+"</label>");$(window).trigger("resize");this.isFirstFormFieldFocusActive||(this.isFirstFormFieldFocusActive=!0,a.focus())},_removeError:function(a){a.removeClass("error");$("#"+a.attr("aria-describedby")).remove();a.removeAttr("aria-describedby");$(window).trigger("resize")},_validateSpecialRequests:function(a){$(a.currentTarget);this.isFirstFormFieldFocusActive=!1;a=!0;for(var b=this.module.TranslationTexts,d=$(".cardHotelRoomRequests").attr("data-no-of-rooms"),e=0;e<parseInt(d);e++){$("#selectedHotelRemark_"+
e+"_Required");var f=$("#selectedHotelRemark_"+e),g=document.getElementsByName("selectedHotelOption_"+e);this._removeError(f);if(0<g.length)for(var h=0;h<g.length;h++)"Accessible Room"==g[h].value&&g[h].checked&&""==$.trim(f.val())&&(this._addError(f,$namespace.MessageUtil.prefixError(b.SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED)),a=!1)}return a},prepareHotelItemData:function(a,b){var d=/[a-zA-Z0-9,@'\.:\-\(\)\s&#\?\$/!%;]{0,512}/g;a=$(a);var e=a.find('input:checkbox:checked[name^="selectedHotelOption_"]'),
f=a.find('textarea[id^="selectedHotelRemark_"]');a=a.data("uid");if(null!=e){for(var g="",h=0;h<e.length;h++)g=""==g?e[h].value:g+","+e[h].value;e=f[0].value;d=e.trim().match(d);e=null!=d?d.join(""):"";b.push({itemType:"Hotel",selectedHotelOption:g,selectedOptionHotelRemark:e,itemUid:a})}},close:function(){}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};ajaxUtil=$namespace.AjaxUtil||{};$namespace.View=$namespace.View||{};
$namespace.View.CruiseFlightSeatSelectionView=Backbone.View.extend({el:"#cruiseTravelerInfo",events:{},initialize:function(a){a=$.extend({},a);var b=$(window);document.title=$("#page_title").html();this.controller=a.controller;this.module=a.module;this.initializeComponents(this.module.TranslationTexts,a);b.on("resize orientationchange",$.proxy(this._onResize,this));b.trigger("resize");this.trackPageAnalytics()},initializeComponents:function(a,b){var d=$(".btn-back"),e=$(".btn-continue");if(b.flightSeatMapInfoJSON)try{var f=
JSON.parse(b.flightSeatMapInfoJSON).flightPassengerSeatInfo}catch(h){}var g={translations:a,continueToNextPageElement:e,continueToNextPageText:a.CONTINUE_TO_SPECIAL_REQUEST_TEXT,continueToNextPageFunction:this.continueToNextPage,backNavigationElement:d,backLinkToPreviousPageFunction:this.backToPreviousPage,flightPassengerSeatInfo:f};$(".flightSeatSelector").each(utils.eachUninitialized(function(a,b){b.flightSeatSelector=new $namespace.Widgets.FlightSeatSelector(a,g)}));$(".accordion-menu").each(utils.eachUninitialized(function(a,
b){b.accordionMenu=new $namespace.Widgets.AccordionMenu(a)}));$(".accordion").each(utils.eachUninitialized(function(a,b){b.accordion=new $namespace.Widgets.Accordion(a)}));$(".loading_blocker_status_div").addClass("ada-screenreader");this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",this.trackEventAccordion)},continueToNextPage:function(){$namespace.DomUtil.setElementLoadingMask(!0);$("html, body").animate({scrollTop:0},
0);ajaxUtil.makeAjaxCallWithWaitingDiv("cruiseSpecialRequest.act",$.param({cpsr:"LOAD_CRUISE_SPECIAL_REQUESTS"}),null,"mainContent",function(){$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_CRUISE_SPECIAL_REQUESTS);$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1);$(".partial-page-load-heading").focus()});this.$el.find(".sticky-sidebar").on("ct.accordion.openStart",this.trackEventAccordion);this.$el.find("#info-bar-content").on("ct.accordion.openStart",
this.trackEventAccordion)},trackEventAccordion:function(a,b){b.hasClass("cruiseSummaryAccordion")?$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Results_Cruise_Summary","Click","Expand"):b.hasClass("cruiseTravelerInformation")?$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Results_Travelers","Click","Expand"):b.hasClass("cruiseTravelerStateroomAccordion")?$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Results_Stateroom","Click","Expand"):b.hasClass("cruiseTravelerFlightAccordion")?
$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Results_Flights","Click","Expand"):b.hasClass("cruiseTravelerHotelAccordion")?$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Results_Hotel","Click","Expand"):b.hasClass("cruiseTravelerTransportAccordion")&&$namespace.Analytics.trackEvent("CR_Flight_Seat_Selection_Transportation","Click","Expand")},backToPreviousPage:function(){$("html, body").animate({scrollTop:0},0);window.history.back()},trackPageAnalytics:function(){var a=this.getAnalyticsDocumentPath();
$namespace.Analytics.track({vendor:"adobe",type:"pageview",events:"1",v1:document.title,v2:"cruise",v74:a});$namespace.Analytics.track({vendor:"google",type:"pageview",events:"1",text:a})},getAnalyticsDocumentPath:function(){var a=$(this.el);return"/cr/booking/bookingWidget/FlightSeatSelection/"+a.data("destination")+"/"+a.data("cruise-line-code")+"/"+a.data("cruise-ship-name")+"/"+a.data("cruise-departure-date")}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils||{};widgets=$namespace.Widgets||{};$namespace.View=$namespace.View||{};
$namespace.View.HobeFinalizeBookingView=Backbone.View.extend({el:"#hobe-Finalize-booking-page",events:{'click a[data-hook="go_back"]':"_onGoBackClick",'click [data-hook="continue_button"]':"_onCompleteBookingClick"},initialize:function(a){$.extend({},a);this.module=a.module;a=this.module.TranslationTexts;$(".btn-continue").text(a.FINISH_AND_BOOK_BUTTON_TEXT)},_onGoBackClick:function(a){$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_PAYMENT_PAGE)},_onCompleteBookingClick:function(a){a.preventDefault();
var b=this.module.TranslationTexts;a=$namespace.GlobalConstants.LOCALE_CODE.toLowerCase();var d="en_ca"==a||"fr_ca"==a?b.BOOKING_COMMON_ERROR_MESSAGE_CA:b.BOOKING_COMMON_ERROR_MESSAGE;$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("hobeFinalizeBookingActivity.act",$.param({hobefb:"CONFIRM_PAYMENT_INFO"}),null,null,function(a){if(!0===a)a=this.callbackFunctionParams[1],$namespace.HistoryNavigation.addHistory($namespace.PageHistoryConstants.HISTORY_HOME),
$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_BOOKING_CONFIRMATION,[""+a]);else if(void 0==a||void 0==this.message)$namespace.DomUtil.setElementLoadingMask(!1,null,!1),$namespace.MessageUtil.showMessage({type:1,text:d,title:b.BOOKING_COMMON_ERROR_MODAL_TITLE});else if($namespace.DomUtil.setElementLoadingMask(!1,null,!1),this.message&&($namespace.MessageUtil.showMessage({type:this.messageType,text:this.message,title:b.BOOKING_COMMON_ERROR_MODAL_TITLE}),
this.messageCode==$namespace.ErrorCodes.PAYMENT_TRANSACTION_AVS_ERROR||this.messageCode==$namespace.ErrorCodes.PAYMENT_CREDIT_CARD_INFO_MISMATCH))$("button[data-hook='modal-close']").on("click",function(a){a.preventDefault();$namespace.Navigation.loadHistoryCodeWithData($namespace.PageHistoryConstants.HISTORY_HOBE_PAYMENT_PAGE,["true"])})},null)}});

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SurveyModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {SURVEY_SUBMITTED_SUCCESSFUL_MESSAGE : {sourceText: "Thank you for taking the time to complete this survey.",translatedText: "Thank you for taking the time to complete this survey."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){};this.isActive=function(){return $("DIV.some-element").length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.FooterModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {EXAMPLE_TRANSLATION_KEY : {sourceText: "Example translation string",translatedText: "Example translation string"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.selector="footer";this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.FooterView,a)};this.isActive=function(){return $(this.selector).length};
this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HeaderModule=new function(){this.TranslationTexts={EXPANDED_NAVMENU: "Navigation menu button, expanded",CLOSED_NAVMENU: "Navigation menu button"};var TranslationTexts = this.TranslationTexts;
;this.name="HeaderModule";this.bindEventHandlers=function(){$.hook("top_link_login").click(this.onTopLinkLogin);$.hook("my_travel_account").click(this.onTravelAccount);$.hook("skip_link").click(this.onSkipLinkClick);$.hook("online_help").click(this.onOpenHelp);
$.hook("top_link_logout").click(this.accountLogout)};var a=function(){window.location.href=$namespace.Configuration.webLoc+"/"};this.accountLogout=function(b){$namespace.AjaxUtil.makeAjaxCall("home.act","h=4",null,null,a,null,null,!1)};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.selector='DIV[id="utility-links"]';this.el=$(this.selector);this.bindEventHandlers()};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=
function(){$.hook("top_link_login").unbind("click",this.onTopLinkLogin);$.hook("my_travel_account").unbind("click",this.onTravelAccount);$.hook("skip_link").unbind("click",this.onSkipLinkClick);$.hook("online_help").unbind("click",this.onOpenHelp);$.hook("top_link_logout").unbind("click",this.accountLogout)};this.onSkipLinkClick=function(a){$namespace.DomUtil.findAndSetfocus(a)};this.onTopLinkLogin=function(a){a=window.location.href;a.match(/\/\?h=12&_uid=/g)?window.location.href=a:window.location.href=
$namespace.Configuration.webLoc+"/?h=12&_uid="+$namespace.Utils.getUID()};this.onTravelAccount=function(a){window.location.href=$namespace.Configuration.webLoc+"/?h=2&_uid="+$namespace.Utils.getUID()};this.gotoAccountPage=function(){$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("home.act","h=12&suppressOutput=true",null,null,function(){window.location.href=$namespace.Configuration.webLoc+"/?h=2&_uid="+$namespace.Utils.getUID()},null,"")};this.onOpenHelp=function(a){var b=$(window).width();a=$(window).height();
b=window.screenX+(b-460-50);a=window.screenY+(a-510);$namespace.Utils.Breakpoint.isMobile()?window.open("http://costco-travel-us-mbr.custhelp.com","Online Help","noopener,noreferrer"):window.open("http://costco-travel-us-mbr.custhelp.com","Online Help","toolbar=yes,scrollbars=yes,resizable=yes,top="+a+",left="+b+",width=460,height=510,noopener,noreferrer");window.opener=null;$namespace.Analytics.trackEvent("online help","click",window.location.pathname);var e=new Date;a=function(a){$namespace.Analytics.trackEvent("online help",
"return click",window.location.pathname,Math.round((new Date-e)/1E3));$(document.body).off("mousedown.onlineHelp");$(document.body).off("keydown.onlineHelp");window.clearTimeout(f)};$(document.body).one("mousedown.onlineHelp",a);$(document.body).one("keydown.onlineHelp",a);var f=setTimeout(function(){$(document.body).off("mousedown.onlineHelp");$(document.body).off("keydown.onlineHelp");$namespace.Analytics.trackEvent("online help","return click",window.location.pathname,900)},9E5)}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HomePageCarouselModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this);this.carousel.destroy()};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector=$('DIV[data-id="offers_carousel"]');this.carousel=new $namespace.Widgets.Carousel(this.selector,{carouselSpeed:a.carouselSpeed,transitionTime:a.transitionTime})};this.getCurrentImageTitle=function(a){var b=
$namespace.Analytics.filterChars($("UL.carousel-items > LI.active > DIV.bound > DIV.offers > DIV.offers-description > H3").text());!a||null!=b&&b.length||console.log("HomePageImageCarouselModule ERROR: Carousel slide title not found!");return b};this.stopAutoRotation=function(){try{this.carousel.stopAutoRotationOutside()}catch(a){}};this.isActive=function(){return this.selector.length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PopularItemsModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {EXAMPLE_TRANSLATION_KEY : {sourceText: "Example translation string",translatedText: "Example translation string"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers()};this.isActive=function(){return $("DIV.some-element").length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SearchWidgetsModule=new function(){this.TranslationTexts={NO_DEPARTURE_CITY_ERROR_MESSAGE: "No departure cities found with given criteria.",PLACEHOLDER_REGION_SELECTION: "Please select a city",PLACEHOLDER_ANY_OPTION: "Any",PLACEHOLDER_ANY_DESTINATION_OPTION: "Any Destination",PLACEHOLDER_ANY_CRUISE_LINE_OPTION: "Any Cruise Line",PLEASE_SELECT_DEPARTURE_MONTH: "Please select departure month",NO_LOCATIONS_ERROR_MESSAGE: "No locations found with given criteria.",PRODUCT_SEARCH_NO_RESULTS_TITLE: "No Results Found",HOBE_SEARCH_MIN_LENGTH: "Please enter at least 3 characters.",CAR_SEARCH_NO_RESULTS_TITLE: "No Results Found",VP_SEARCH_NO_RESULTS_TITLE: "No Results Found",COUPON_OVERRIDE: "Coupon Override",BUTTON_TITLE_CONTINUE: "Continue",BUTTON_TITLE_CLOSE: "Close",ACCESSIBILITY_SEARCH_DRIVER_AGE: " - Opens a dialog when deselected",ACCESSIBILITY_ADD_COUPON: "Coupon addded and focus moved to rental cars region.",ACCESSIBILITY_REMOVE_COUPON: "Coupon removed from rental cars region and focus moved back to coupons region.",ACCESSIBILITY_TO_CLOSE: "Click to close",DEPARTURE_DATE_CALENDAR_LABEL: "Departure date calendar",RETURN_DATE_CALENDAR_LABEL: "Return date calendar",PICK_UP_DATE_CALENDAR_LABEL: "Pick-Up date calendar",DROP_OFF_DATE_CALENDAR_LABEL: "Drop-Off date calendar",CHECK_IN_DATE_CALENDAR_LABEL: "Check in date calendar",CHECK_OUT_DATE_CALENDAR_LABEL: "Check out date calendar",DEPARTURE_DATE_SELECTED_LABEL: "Departure date selected: $date",RETURN_DATE_SELECTED_LABEL: "Return date selected: $date",PICK_UP_DATE_SELECTED_LABEL: "Pick-Up date selected: $date",DROP_OFF_DATE_SELECTED_LABEL: "Drop-Off date selected: $date",CHECK_IN_DATE_SELECTED_LABEL: "Check in date selected: $date",CHECK_OUT_DATE_SELECTED_LABEL: "Check out date selected: $date",DATE_PICKER_PREV_BUTTON: "Previous month",DATE_PICKER_NEXT_BUTTON: "Next month",ADDITIONAL_CITIES: "Additional Cities",ACCESSIBILITY_TAB_SELECTED: "- selected",ACCESSIBILITY_TAB_NOT_SELECTED: "- not selected",DEPARTURE_LABEL: "Departure",RETURN_LABEL: "Return",CHECK_IN_LABEL: "Check In",CHECK_OUT_LABEL: "Check Out",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {SELECT_RETURN_DATE_MESSAGE : {sourceText: "Please select a return date.",translatedText: "Please select a return date."},SELECT_DEPARTURE_DATE_MESSAGE : {sourceText: "Please select departure date.",translatedText: "Please select departure date."},VP_DATE_TIME_ERROR : {sourceText: "Return Date should be after Departure Date.",translatedText: "Return Date should be after Departure Date."},VP_DATE_RANGE_ERROR : {sourceText: "Trip exceeds 30 days",translatedText: "Trip exceeds 30 days"},VP_MAX_PASSENGER_WITH_AIRFARE_ERROR : {sourceText: "The maximum number of passengers we can book with airfare at one time is 9.",translatedText: "The maximum number of passengers we can book with airfare at one time is 9."},VP_MAX_PASSENGER_WITHOUT_AIRFARE_ERROR : {sourceText: "The maximum number of passengers we can book at one time is 10.",translatedText: "The maximum number of passengers we can book at one time is 10."},INVALID_DATE_FORMAT : {sourceText: "Invalid date format",translatedText: "Invalid date format"},CAR_PICK_UP_LOCATION_REQUIRED : {sourceText: "Car Pick-Up location is required",translatedText: "Car Pick-Up location is required"},CAR_DROP_OFF_LOCATION_REQUIRED : {sourceText: "Car Drop-Off location is required",translatedText: "Car Drop-Off location is required"},CAR_INVALID_LOCATION : {sourceText: "Invalid location",translatedText: "Invalid location"},VP_DESTINATION_REQUIRED : {sourceText: "Destination is required.",translatedText: "Destination is required."},VP_REGION_REQUIRED : {sourceText: "Region is required.",translatedText: "Region is required."},VP_INVALID_DEPARTURE : {sourceText: "Invalid departure date.",translatedText: "Invalid departure date."},VP_INVALID_AIRPORT : {sourceText: "Invalid airport or city.",translatedText: "Invalid airport or city."},DP_DEALS_INVALID_AIRPORT : {sourceText: "Invalid airport.",translatedText: "Invalid airport."},DEPARTURE_CITY_REQUIRED_ERROR_MESSAGE : {sourceText: "Departing city required.",translatedText: "Departing city required."},VP_CHILD_AGE_REQUIRED : {sourceText: "Child age is required",translatedText: "Child age is required"},VP_INVALID_RETURN : {sourceText: "Invalid return date.",translatedText: "Invalid return date."},CAR_SEARCH_DATE_TIME_ERROR : {sourceText: "Car Drop-Off time should be after Pick-Up time.",translatedText: "Car Drop-Off time should be after Pick-Up time."},CAR_INVALID_DATE : {sourceText: "Please enter a valid date",translatedText: "Please enter a valid date"},CAR_INVALID_FUTURE_DATE : {sourceText: "Please enter a future date",translatedText: "Please enter a future date"},DRIVER_AGE_CHECKBOX_REQUIRED : {sourceText: "Checkbox is required",translatedText: "Checkbox is required"},DP_DEALS_DRIVER_AGE_CHECKBOX_REQUIRED : {sourceText: " Checkbox is required for Rental Car.",translatedText: " Checkbox is required for Rental Car."},PLACEHOLDER_AIRPORT_CITY_ZIP : {sourceText: "Airport, City, Zip Code or Address",translatedText: "Airport, City, Zip Code or Address"},PLACEHOLDER_AIRPORT_ONLY : {sourceText: "Airport Only",translatedText: "Airport Only"},CRUISE_DEPARTURE_REQUIRED : {sourceText: "Departure is required",translatedText: "Departure is required"},HOBE_INVALID_CHECKIN : {sourceText: "Invalid check in date.",translatedText: "Invalid check in date."},HOBE_INVALID_CHECKOUT : {sourceText: "Invalid check out date.",translatedText: "Invalid check out date."},HOBE_DATE_TIME_ERROR : {sourceText: "Check Out Date should be after Check In Date.",translatedText: "Check Out Date should be after Check In Date."},HOBE_DATE_RANGE_ERROR : {sourceText: "Stay exceeds 30 days",translatedText: "Stay exceeds 30 days"},SEARCH_MINIMUM_CHARACTER_REQUIRED : {sourceText: "Please enter at least $minLength characters.",translatedText: "Please enter at least $minLength characters."},VP_SELECT_NUMBER_OF_NIGHTS_FOR_CITY_MESSAGE : {sourceText: "Select number of nights for $cityName.",translatedText: "Select number of nights for $cityName."}};var TranslationMessages = this.TranslationMessages;var a=$namespace.Utils.Breakpoint;this.name="SearchWidgetsModule";this.carCouponsView=
null;this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.SearchWidgetsModule.resize()})};this.close=function(){this.unbindEventHandlers();this.carCouponsView&&(this.carCouponsView.close(),this.carCouponsView=null);$namespace.Modules.closeViews(this)};this.deselectTabs=function(){this.tabSwitcher.deselectAll();this.previousTab=this.currentTab};this.focusFirstInput=function(){$namespace.Utils.Breakpoint.isMobile()||$namespace.Browser.iPad||this.tabSwitcher.getActivePane().find('input[type="text"], select,input[type="radio"], button.ui-input').each(function(a,
d){a=$(d);if(a.is(":visible"))return a.focus(),!1})};this.setDefaultTab=function(){var a=window.location.href.toLowerCase(),d=a.match(/h=(\d+)/);d=d&&d.length?d[1]:null;/^(4000|100[1-9]|101[0-2])$/.test(d)?this.currentTab="vacation-packages":/^(400[12]|15[01][0-9]|250[1-5]|260[1-8])$/.test(d)?this.currentTab="cruises":/^(4005|300[1-7])$/.test(d)?this.currentTab="rental-cars":/^(4006|350[1-6])$/.test(d)&&this.hobeEnabled?this.currentTab="hotels":/^4007$/.test(d)&&this.allInclusiveEnabled?this.currentTab=
"all-inclusive":/hotels.Offers/i.test(a)&&this.hobeEnabled?this.currentTab="hotels":/vacation-packages/i.test(a)||/\/Specialty\/Offers/i.test(a)||/\/Travel-Offers/i.test(a)||/hotels\/[a-z-]+\/[a-z-]+(\/[A-Z-]+)*/i.test(a)?this.currentTab="vacation-packages":/cruise/i.test(a)?this.currentTab="cruises":/\/blog/i.test(a)?this.currentTab="vacation-packages":/rental-cars/i.test(a)?this.currentTab="rental-cars":/hotels/i.test(a)&&this.hobeEnabled?this.currentTab="hotels":/all-inclusive/i.test(a)&&this.allInclusiveEnabled&&
(this.currentTab="all-inclusive");arguments.length&&this.currentTab&&(a=this.tabSwitcher.onSelect,this.tabSwitcher.onSelect=null,this.setTab(this.currentTab,d),this.tabSwitcher.onSelect=a)};this.initialize=function(b){var d=this;b=b||{};this.currentTab=this.defaultTab=b.defaultTab||"vacation-packages";this.previousTab=null;this.hobeEnabled=b.hobeEnabled;this.allInclusiveEnabled=b.allInclusiveEnabled;this.vp2Enabled=b.vp2Enabled;this.setDefaultTab();this.selector='DIV[id="search_widget"]';this.el=
$(this.selector);this.el.click(function(){$namespace.HomePageCarouselModule.stopAutoRotation()});this.tabSwitcher=new $namespace.Widgets.TabSwitcher(this.el.find('[data-hook="tab-switcher"]'));var e=window.location.pathname.replace($namespace.Configuration.webLoc,"");!a.isMobile()||!$namespace.GlobalConstants.RESPONSIVE_COLLAPSE_SEARCH_WIDGETS_ON_MOBILE_ENABLED||$namespace.Navigation.isWorkflowPage()&&/\/h=300[1-9]/i.test(e)?this.currentTab&&this.setTab(this.currentTab):this.deselectTabs();this.tabSwitcher.onSelect=
function(a,b,e){d.previousTab=d.currentTab;!0!==e&&d.focusFirstInput();d.currentTab=a;b=null;"cruises"==a?(b=$namespace.PageHistoryConstants.HISTORY_CRUISE_SAILING_SEARCH_TAB,$namespace.Analytics.trackEvent("WidgetType","Click","CR")):"rental-cars"==a?(b=$namespace.PageHistoryConstants.HISTORY_CAR_SEARCH_TAB,$namespace.Analytics.trackEvent("WidgetType","Click","RC")):"hotels"==a&&d.hobeEnabled?(b=$namespace.PageHistoryConstants.HISTORY_HOBE_SEARCH_TAB,$namespace.Analytics.trackEvent("WidgetType",
"Click","Hotels")):"vacation-packages"==a?(b=$namespace.PageHistoryConstants.HISTORY_VP_SEARCH_TAB,d.vp2Enabled?$namespace.Analytics.trackEvent("WidgetType","Click","Packages"):$namespace.Analytics.trackEvent("WidgetType","Click","VP")):"all-inclusive"==a&&(b=$namespace.PageHistoryConstants.HISTORY_ALL_INCLUSIVE_SEARCH_TAB,$namespace.Analytics.trackEvent("WidgetType","Click","ALL_INCLUSIVE"));b&&$namespace.HistoryNavigation.addHistory(b)};this.bindEventHandlers();($namespace.Utils.Breakpoint.isMobile()||
$namespace.Browser.iPad)&&-1!=window.location.href.indexOf("source=collapse")&&this.tabSwitcher.deselectAll();window.setTimeout($.proxy(function(){this.el.addClass("initialized")},this),1);this.widgets={cruise:$namespace.Modules.addView(this,$namespace.View.CruiseSearchWidgetView,{module:this}),rentalCar:$namespace.Modules.addView(this,$namespace.View.RentalCarSearchWidgetView,{module:this,searchInfo:b.carSearchInfo||null})};this.widgets.vacationPackage=this.vp2Enabled?$namespace.Modules.addView(this,
$namespace.View.VacationPackage2SearchWidgetView,{module:this,regions:b.vpRegions||{}}):$namespace.Modules.addView(this,$namespace.View.VacationPackageSearchWidgetView,{module:this,regions:b.vpRegions||{}});this.hobeEnabled&&(this.widgets.hotel=this.vp2Enabled?$namespace.Modules.addView(this,$namespace.View.Hotel2SearchWidgetView,{module:this,translationTexts:this.TranslationTexts,translationMessages:this.TranslationMessages}):$namespace.Modules.addView(this,$namespace.View.HotelSearchWidgetView,
{module:this,translationTexts:this.TranslationTexts,translationMessages:this.TranslationMessages}));this.allInclusiveEnabled&&(this.widgets.allInclusive=$namespace.Modules.addView(this,$namespace.View.AllInclusiveSearchWidgetView,{module:this,regions:b.allInclusiveRegions||{}}));this.carCouponsView&&(this.carCouponsView.close(),this.carCouponsView=null);$("DIV.ct-coupon").length&&(this.carCouponsView=new $namespace.View.RentalCarBrandView({module:this}));$.hook("main_header").addClass("has-search-widget");
b=window.location.href.toLowerCase();/\/travel-offers/i.test(b)||/\/cruise-travel-offers/i.test(b)?($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=$("div.blastOffer").attr("blastOfferId"),b=$("div.blastOffer div.wrapper div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.blastOffer div.wrapper div.landingPageContent div.hero-secondary").attr("data-image-url"):"",d=$("#pinterestImageUrl");d=d&&d.val()&&"/"!=d.val()?
window.location.origin+d.val():b;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal",a,b,d)}}),window.setTimeout(function(){var a=0==$(".blastOffer").length?0:$(".blastOffer").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)):/\/vacation-packages/i.test(b)?($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_ENABLED){var a=document.URL,
b=$("div.blog div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.blog div.landingPageContent div.hero-secondary").attr("data-image-url"):"",d=$("#pinterestImageUrl");d=d&&d.val()&&"/"!=d.val()?window.location.origin+d.val():b;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal",a,b,d)}}),window.setTimeout(function(){var a=0==$(".blastOffer").length?0:$(".blastOffer").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&
$("#pageContent").offset({top:0})},500)):/\/blog/i.test(b)||/\/info/i.test(b)?($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=$("div.blog").attr("blogId"),b=$("div.blog div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.blog div.landingPageContent div.hero-secondary").attr("data-image-url"):"",d=$("#pinterestImageUrl");d=d&&d.val()&&"/"!=d.val()?window.location.origin+d.val():b;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",
1],[".socialMediaTargetMobile",0]],"deal",a,b,d)}}),window.setTimeout(function(){var a=$(".blog").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)):/\/Build-Your-Own-Package/i.test(b)?($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=window.location.href;a=a.substring(a.lastIndexOf("/")+1);var b=$("div.bundles div.landingPageContent div.hero-secondary").length?window.location.origin+
$("div.bundles div.landingPageContent div.hero-secondary").attr("data-image-url"):"",d=$("#pinterestImageUrl");d=d&&d.val()&&"/"!=d.val()?window.location.origin+d.val():b;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal",a,b,d)}}),window.setTimeout(function(){var a=$(".bundles").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500)):/\/Theme-Parks/i.test(b)?($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=
$("div.theme-park div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.theme-park div.landingPageContent div.hero-secondary").attr("data-image-url"):"",b=$("#pinterestImageUrl");b=b&&b.val()&&"/"!=b.val()?window.location.origin+b.val():a;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",1],[".socialMediaTargetMobile",0]],"deal","Theme-Park",a,b)}}),window.setTimeout(function(){var a=$(".theme-park").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&
$("#pageContent").offset({top:0})},500)):/\/Offers/i.test(b)&&!/\/Specialty/i.test(b)&&($(document).ready(function(){if($namespace.GlobalConstants.SOCIAL_MEDIA_SHARING_DEALS_ENABLED){var a=$("div.blastOffer div.landingPageContent div.hero-secondary").length?window.location.origin+$("div.blastOffer div.landingPageContent div.hero-secondary").attr("data-image-url"):"",b=$("#pinterestImageUrl");b=b&&b.val()&&"/"!=b.val()?window.location.origin+b.val():a;$namespace.SocialMediaSharing.AppendSocial([[".socialMediaTarget",
2],[".socialMediaTargetMobile",0]],"deal","cruise_offer",a,b)}}),window.setTimeout(function(){var a=0==$(".blastOffer").length?0:$(".blastOffer").offset().top;window.scrollTo(0,a);window.matchMedia("(orientation: landscape)").matches&&$("#pageContent").offset({top:0})},500));this.resize();("rental-cars"===this.currentTab&&!$("#search_rental_cars_view").hasClass("summary-mode")||"vacation-packages"===this.currentTab&&!$("section#searchWidget").hasClass("hidden")||"cruises"===this.currentTab||"hotels"===
this.currentTab)&&this.searchWidgetAnalytics(this.currentTab)};this.initElement=function(){this.el&&0!=this.el.length||(this.el=$(this.selector))};this.isActive=function(){return $(this.selector).length};this.onSearch=function(a){this.page&&this.page.showPage(a)};this.reset=function(){this.$el.removeClass("completed")};this.setCompleted=function(a){this.$el.addClass("completed");this.page&&this.page.clearPageStack()};this.setTab=function(a,d,e){this.tabSwitcher.setTab(a,d,e);this.previousTab=this.currentTab};
this.resize=function(){a.isMobile()?this.hobeEnabled||this.allInclusiveEnabled?this.el.find('DIV[class="search-nav"] ul li').css("width","25%"):this.el.find('DIV[class="search-nav"] ul li').css("width","33.333%"):(this.el.find('DIV[class="search-nav"] ul li').css("width","auto"),this.setDefaultTab(1))};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.SearchWidgetsModule.resize()})};this.setCarCoupon=function(a){try{this.widgets.rentalCar.setCoupon(a)}catch(d){}};
this.getAccessibleDateLabel=function(a){var b=/^en/i.test($namespace.GlobalConstants.LOCALE_CODE)?"dddd MMMM d yyyy":"dddd d MMMM yyyy";return $namespace.DateUtil.getDateAsString(a,b)};this.isMobileDevice=function(){return $namespace.Utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1};this.getWindowDimensions=function(){var a=$(window);return{height:a.height(),width:a.width()}};this.searchWidgetAnalytics=function(a){"rental-cars"===a?$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",
v1:"widget|Car Search",v2:"widget"}):"cruises"===a?/\/Cruises\/Destinations/i.test(window.location.pathname)||/\/Cruises\/Azam|\/Cruises\/Carniv|\/Cruises\/Celeb|\/Cruises\/Cryst|\/Cruises\/Cunar|\/Cruises\/Disn|\/Cruises\/Holla|\/Cruises\/Norw|\/Cruises\/Royal|\/Cruises\/Princ|\/Cruises\/Regen|\/Cruises\/Uniwo/i.test(window.location.pathname)||(a=$(document).attr("title"),a=a.split("|")[0].trim()+" page",$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:"widget|Cruises",v2:a})):
"hotels"===a?(a=$(document).attr("title"),a=a.split("|")[0].trim()+" page",$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:"widget|Hotels",v2:a})):"vacation-packages"===a&&($("#package-sub-hp").hasClass("active")?$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:"widget|Dynamic packaging",v2:"widget"}):$("#package-sub-hfcp").hasClass("active")?$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:"widget|Dynamic Packaging HFC",v2:"widget"}):
$namespace.Analytics.track({vendor:"adobe",type:"pv",events:"event3",v1:"widget|Vacation Packages",v2:"widget"}))}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.LoginModule=new function(){this.TranslationTexts={LOGIN_PAGE_TITLE: "Log In | Costco Travel",FORGOT_PASSWORD_PAGE_TITLE: "Forgot Password | Costco Travel",CREATE_ACCOUNT_PAGE_TITLE: "Create Account | Costco Travel",GUEST_LOGIN_PAGE_TITLE: "Proceed As Guest Member | Costco Travel",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {EMAIL_CONFIRM_DOESNT_MATCH : {sourceText: "Email address must match.",translatedText: "Email address must match."},PASSWORD_CONFIRM_DOESNT_MATCH : {sourceText: "Passwords must match.",translatedText: "Passwords must match."},MEMBERSHIP_NUMBER_OR_EMAIL_REQUIRED : {sourceText: "Membership Number or Email is required.",translatedText: "Membership Number or Email is required."},MEMBERSHIP_NUMBER_OR_EMAIL_INVALID : {sourceText: "The information entered is incorrect and does not match a Travel account.",translatedText: "The information entered is incorrect and does not match a Travel account."},PASSWORD_VALIDATION_ERROR_TEXT_1 : {sourceText: "The password entered does not meet requirements.",translatedText: "The password entered does not meet requirements."},PASSWORD_VALIDATION_ERROR_TEXT_2 : {sourceText: "Your password must be 8-128 characters and may not contain your email address or membership number.",translatedText: "Your password must be 8-128 characters and may not contain your email address or membership number."},PASSWORD_VALIDATION_ERROR_TEXT_3 : {sourceText: "The password must:",translatedText: "The password must:"},PASSWORD_VALIDATION_ERROR_TEXT_4 : {sourceText: "Contain 8-128 characters with no spaces",translatedText: "Contain 8-128 characters with no spaces"},PASSWORD_VALIDATION_ERROR_TEXT_5 : {sourceText: "Include at least one uppercase and one lowercase letter",translatedText: "Include at least one uppercase and one lowercase letter"},PASSWORD_VALIDATION_ERROR_TEXT_6 : {sourceText: "Include at least one number",translatedText: "Include at least one number"},PASSWORD_VALIDATION_ERROR_TEXT_7 : {sourceText: "Include one of these characters: ! @ # $ ~",translatedText: "Include one of these characters: ! @ # $ ~"},PASSWORD_VALIDATION_ERROR_TEXT_8 : {sourceText: "Not contain your email address or membership number",translatedText: "Not contain your email address or membership number"},PASSWORD_REQUIRED : {sourceText: "Password is required.",translatedText: "Password is required."},COSTCO_MEMBERSHIP_NUMBER_REQUIRED : {sourceText: "Please enter your Costco membership number.",translatedText: "Please enter your Costco membership number."},COMMUNICATION_LANGUAGE_REQUIRED : {sourceText: "Please select a preferred communication language.",translatedText: "Please select a preferred communication language."},LAST_NAME_REQUIRED : {sourceText: "Please enter last name.",translatedText: "Please enter last name."},EMAIL_ADDRESS_REQUIRED : {sourceText: "Please enter your email address.",translatedText: "Please enter your email address."},EMAIL_ADDRESS_INVALID : {sourceText: "Email address is invalid.",translatedText: "Email address is invalid."},CONFIRM_EMAIL_ADDRESS_REQUIRED : {sourceText: "Please confirm your email address.",translatedText: "Please confirm your email address."},CONFIRM_PASSWORD_REQUIRED : {sourceText: "Please confirm password.",translatedText: "Please confirm password."},MEMBERSHIP_NUMBER_REQUIRED : {sourceText: "Membership Number is required.",translatedText: "Membership Number is required."},MEMBERSHIP_NUMBER_INVALID : {sourceText: "Invalid membership number.",translatedText: "Invalid membership number."},CAPTCHA_VALIDATION_MESSAGE : {sourceText: "Please verify that you are not a robot.",translatedText: "Please verify that you are not a robot."},GUEST_LOGIN_EXIST_ACCOUNT : {sourceText: "An account already exists for your membership number. Select OK to proceed without logging in or select Cancel to change your login option.",translatedText: "An account already exists for your membership number. Select OK to proceed without logging in or select Cancel to change your login option."},NO_ACCOUNT_CREATE_ACCOUNT_REQUEST : {sourceText: "To view a reservation(s) made through our call center or as a guest online will require a Costco Travel account. Select continue to create a Costco Travel account. Note: Costco Travel requires a separate account from that of Costco.com.",translatedText: "To view a reservation(s) made through our call center or as a guest online will require a Costco Travel account. Select continue to create a Costco Travel account. Note: Costco Travel requires a separate account from that of Costco.com."},CONTINUE_BOOKING_CREATE_ACCOUNT_REQUEST : {sourceText: "To continue booking, please create a Costco Travel account. Note: Costco Travel requires a separate account from that of Costco.com.",translatedText: "To continue booking, please create a Costco Travel account. Note: Costco Travel requires a separate account from that of Costco.com."},INVALID_EMAIL_MEMBER_NUMBER_PASSWORD : {sourceText: "The information entered is incorrect and does not match a Travel account.",translatedText: "The information entered is incorrect and does not match a Travel account."},MEMBERSHIP_CHANGED_MESSAGE_1 : {sourceText: "The membership number",translatedText: "The membership number"},MEMBERSHIP_CHANGED_MESSAGE_2 : {sourceText: "has changed to",translatedText: "has changed to"},MEMBERSHIP_CHANGED_MESSAGE_3 : {sourceText: "you will need to create an account for the new membership number to view your reservation(s).",translatedText: "you will need to create an account for the new membership number to view your reservation(s)."},NOTE_DIFFERENT_ACCOUNT : {sourceText: "Note: Your Travel account is different than your Costco.com account.",translatedText: "Note: Your Travel account is different than your Costco.com account."},LASTNAME_MINIMUM_CHARACTER_REQUIRED : {sourceText: "Please enter at least $minLength characters.",translatedText: "Please enter at least $minLength characters."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};
this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.memberLoginView=$namespace.Modules.addView(this,$namespace.View.LoginView,{module:this})};this.isActive=function(){return $("#costco_member_login").length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarLocationsModule=new function(){this.TranslationTexts={ACCESSIBILITY_UNSELECTED_RENTAL_CAR_LOCATION: "Rental car location is not selected",ACCESSIBILITY_SELECTED_RENTAL_CAR_LOCATION: "$brandName rental car at $location $address $city, $state $zip, $country is selected",ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECT: "Click to select this location",ACCESSIBILITY_RENTAL_CAR_LOCATION_SELECTION: " Location selected",ACCESSIBILITY_RENTAL_CAR_LOCATION_INVALID_SELECT: "Cannot select more than $maxCount locations. Please deselect any selected location in order to add this one ",ACCESSIBILITY_RENTAL_CAR_LOCATIONS_SELECTION_MESSAGE: "Number of Locations currently selected: $selectedCount . Please select Continue button.",ACCESSIBILITY_RENTAL_CAR_LOCATIONS_SELECTION_REMOVED_MESSAGE: " Location deselected. Number of Locations currently selected: $selectedCount. Please select Continue button.",CAR_AGENCY_SELECTION_PAGE_TITLE: "Car Rental Locations for $searchLocation | Costco Travel",ACCESSIBILITY_RENTAL_CAR_PAGE_SEARCH_RESULTS: "Page $pageCount of search results",ACCESSIBILITY_RENTAL_CAR_CURRENT_PAGE_SEARCH_RESULTS: "Currently on page $currentPageIndex of search results",ACCESSIBILITY_RENTAL_CAR_PAGE_SEARCH_RESULT_LABEL: "Location $resultIndex $agencyName rental car at $agencyLocation. ",ACCESSIBILITY_SELECTED_LIST_VIEW: "Switched to list view",ACCESSIBILITY_SELECTED_MAP_VIEW: "Switched to map view"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.rentalCarLocationView=$namespace.Modules.addView(this,$namespace.View.RentalCarLocationsView,{maxAgencyAllowed:a.maxAgencyAllowed,featureFlagCRBEResultsMapHideEnable:a.featureFlagCRBEResultsMapHideEnable,
showMapIfOpenInPrevPage:a.showMapIfOpenInPrevPage,searchLocation:a.searchLocation,module:this})};this.isActive=function(){return $("DIV.some-element").length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarMatrixModule=new function(){this.TranslationTexts={NO_CAR_AVAILABLE_TITLE: "Message",NO_CAR_AVAILABLE_MESSAGE: "Closed for the time searched."};var TranslationTexts = this.TranslationTexts;
;this.name="RentalCarMatrixModule";this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.RentalCarMatrixModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};
this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="car_rental_grid"]';this.el=$(this.selector);this.bindEventHandlers();this.workflow=a.carMatrixType;this.matrix="vp2"==this.workflow?$namespace.Modules.addView(this,$namespace.View.VP2RentalCarResultsView,a):$namespace.Modules.addView(this,$namespace.View.RentalCarResultsView,a);this.resize()};this.isActive=function(){return $(this.selector).length};this.resize=function(){$namespace.Utils.Breakpoint.isMobile()};this.unbindEventHandlers=
function(){$(window).off("resize",function(){$namespace.RentalCarMatrixModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarConfirmationModule=new function(){this.TranslationTexts={CAR_EMAIL_SENT_MESSAGE_TITLE: "Email Itinerary",CAR_EMAIL_SENT_SUCCESSFUL_MESSAGE: "Booking Itinerary has been mailed to your email address.",CAR_CANCEL_MESSAGE_TITLE: "Cancel Booking",CAR_CANCEL_FAILED_MESSAGE: "Unable to cancel the booking."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {CAR_CANCEL_FAILED_CALL_IN_MESSAGE : {sourceText: "For assistance, please call Costco Travel at $bookingPhoneNumber.",translatedText: "For assistance, please call Costco Travel at $bookingPhoneNumber."}};var TranslationMessages = this.TranslationMessages;this.name="RentalCarConfirmationModule";this.bindEventHandlers=function(){$(window).on("resize",
function(){$namespace.RentalCarConfirmationModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="rental_car_confirmation"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.RentalCarConfirmationView,a);this.resize()};this.isActive=function(){return $(this.selector).length};this.resize=function(){$namespace.Utils.Breakpoint.isMobile()};
this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.RentalCarConfirmationModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.RentalCarEquipmentModule=new function(){this.TranslationTexts={
                                                              CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE: "Optional Equipment Error",
                                                              CAR_OPTIONAL_EQUIPMENT_QUANTITY_ERROR: "Please select 10 or fewer total optional equipment items.",
                                                              CAR_OPTIONAL_EQUIPMENT_DESCRIPTION_TITLE: "Optional Equipment Description",
                                                              CAR_OPTIONAL_EQUIPMENT_DECREMENT_ENABLED: "Decrease optional equipment quantity for $optionalEquipmentName $priceText",
                                                              CAR_OPTIONAL_EQUIPMENT_DECREMENT_DISABLED: "No $optionalEquipmentName selected $priceText",
                                                              CAR_OPTIONAL_EQUIPMENT_INCREMENT_ENABLED: "Increase optional equipment quantity for $optionalEquipmentName $priceText",
                                                              CAR_OPTIONAL_EQUIPMENT_INCREMENT_DISABLED: "Max $optionalEquipmentName selected $priceText"
                                                          };

    var TranslationTexts = this.TranslationTexts;
                                                      ;
this.name="RentalCarEquipmentModule";this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.RentalCarEquipmentModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="rental_car_equipment"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.RentalCarEquipmentView,a);this.resize()};this.isActive=function(){return $(this.selector).length};
this.resize=function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;$(this.selector).find("DIV.number-widget > input").prop("readonly",a)};this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.RentalCarEquipmentModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarDetailsModule=new function(){this.TranslationTexts={CAR_GEOGRAPHIC_RESTRICTIONS_ERROR_TITLE: "Geographic Restrictions Error"};var TranslationTexts = this.TranslationTexts;
;this.name="RentalCarDetailsModule";this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.RentalCarDetailsModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};
a.module=this;this.selector='DIV[id^="rental-car-details'+a.modalIndex+'"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.RentalCarDetailsView,a)};this.isActive=function(){return $(this.selector).length};this.resize=function(){$namespace.Utils.Breakpoint.isMobile()};this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.RentalCarDetailsModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarFinalizeDetailsModule=new function(){this.TranslationTexts={FIRST_NAME_MESSAGE: "Please enter a first name.",LAST_NAME_MESSAGE: "Please enter a last name.",VALID_PHONE_MESSAGE: "Please enter a valid ten digit phone number.",VALID_PHONE_EXTENTION_MESSAGE: "Please enter a valid number.",VALID_EMAIL_ADDRESS_MESSAGE: "Please enter a valid email address.",LOYALTY_ERROR_MESSAGE: "Loyalty program name requires at least 4 characters.",ARRIVAL_FLIGHT_NUMBER_MESSAGE: "Please enter your arrival flight number.",STREET_VALIDATION_ERROR_MESSAGE: "Please enter street.",CITY_VALIDATION_ERROR_MESSAGE: "Please enter city.",STATE_VALIDATION_ERROR_MESSAGE: "Please select a state.",ZIP_VALIDATION_ERROR_MESSAGE: "Please enter valid zip code.",CAR_SUBMIT_RENTER_DETAILS_ERROR_TITLE: "Finalize Booking Error",SELECT_AIRLINE_MESSAGE: "Please select an airline.",NUMERIC_ONLY_FLIGHT_NUMBERS: "Flight number must be numeric.",TERMS_CONDITIONS_MESSAGE: "Please accept the Terms & Conditions by selecting the checkbox"};var TranslationTexts = this.TranslationTexts;
;this.name="RentalCarFinalizeDetailsModule";
this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.RentalCarFinalizeDetailsModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="rental_car_upgrade"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.RentalCarFinalizeDetailsView,a);this.resize()};this.isActive=function(){return $(this.selector).length};
this.resize=function(){$namespace.Utils.Breakpoint.isMobile()};this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.RentalCarFinalizeDetailsModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.RentalCarUpgradesModule=new function(){this.TranslationTexts={CAR_SUBMIT_UPGRADE_SELECTION_ERROR_TITLE: "Upgrade Selection Error"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {PRICE_DIFFERENCE_TO_ADD_MESSAGE : {sourceText: "This change will  <span><strong>Add </strong><strong> $priceChange</strong></span> to your total rental price.",translatedText: "This change will  <span><strong>Add </strong><strong> $priceChange</strong></span> to your total rental price."},PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE : {sourceText: "This change will  <span><strong>Subtract </strong><strong> $priceChange</strong></span> from your total rental price.",translatedText: "This change will  <span><strong>Subtract </strong><strong> $priceChange</strong></span> from your total rental price."},NEW_TOTAL_PRICE : {sourceText: " New Rental Price <strong>$totalRentalPrice</strong>",translatedText: " New Rental Price <strong>$totalRentalPrice</strong>"},NO_PRICE_DIFFERENCE_MESSAGE : {sourceText: "This change  <span><strong>Does Not Affect</strong></span> your total rental price.",translatedText: "This change  <span><strong>Does Not Affect</strong></span> your total rental price."}};var TranslationMessages = this.TranslationMessages;this.name="RentalCarUpgradesModule";this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.RentalCarUpgradesModule.resize()})};this.close=function(){this.unbindEventHandlers();
$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="rental_car_upgrade"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.RentalCarUpgradesView,a);this.resize()};this.isActive=function(){return $(this.selector).length};this.resize=function(){$namespace.Utils.Breakpoint.isMobile()};this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.RentalCarUpgradesModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.resetPasswordModule=new function(){this.TranslationTexts={RESET_PASSWORD_PAGE_TITLE: "Reset Password | Costco Travel"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {PASSWORD_CONFIRM_DOESNT_MATCH : {sourceText: "Passwords must match.",translatedText: "Passwords must match."},PASSWORD_VALIDATION_ERROR_TEXT_1 : {sourceText: "The password entered does not meet requirements.",translatedText: "The password entered does not meet requirements."},PASSWORD_VALIDATION_ERROR_TEXT_2 : {sourceText: "Your password must be 8-128 characters and may not contain your email address or membership number.",translatedText: "Your password must be 8-128 characters and may not contain your email address or membership number."},PASSWORD_REQUIRED : {sourceText: "Password is required.",translatedText: "Password is required."},COSTCO_MEMBERSHIP_NUMBER_REQUIRED : {sourceText: "Please enter your Costco membership number.",translatedText: "Please enter your Costco membership number."},LAST_NAME_REQUIRED : {sourceText: "Please enter last name.",translatedText: "Please enter last name."},CONFIRM_PASSWORD_REQUIRED : {sourceText: "Please confirm password.",translatedText: "Please confirm password."},MEMBERSHIP_NUMBER_REQUIRED : {sourceText: "Membership Number is required.",translatedText: "Membership Number is required."},MEMBERSHIP_NUMBER_INVALID : {sourceText: "Invalid membership number.",translatedText: "Invalid membership number."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};
this.initialize=function(a){this.bindEventHandlers();this.resetPasswordView=$namespace.Modules.addView(this,$namespace.View.resetPasswordView,{module:this})};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MemberAccountModule=new function(){this.TranslationTexts={COMMUNICATION_LANGUAGE_ENGLISH: "English",COMMUNICATION_LANGUAGE_FRENCH: "French",MEMBER_ACCOUNT_PAGE_TITLE: "Member Account | Costco Travel"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {ENTER_CURRENT_EMAIL_ADDRESS_MESSAGE : {sourceText: "Please enter current email address.",translatedText: "Please enter current email address."},ENTER_NEW_EMAIL_ADDRESS_MESSAGE : {sourceText: "Please enter new email address.",translatedText: "Please enter new email address."},CONFIRM_EMAIL_ADDRESS_MESSAGE : {sourceText: "Please confirm email address.",translatedText: "Please confirm email address."},EMAIL_ADDRESS_INVALID : {sourceText: "Email address is invalid.",translatedText: "Email address is invalid."},CONFIRMED_EMAIL_ADDRESS_MATCH_ERROR : {sourceText: "The e-mail address you entered does not match your confirmed e-mail address. Please try again.",translatedText: "The e-mail address you entered does not match your confirmed e-mail address. Please try again."},NEW_EMAIL_ADDRESS_SAME_ERROR : {sourceText: "New email address has to be different than current email address. Please try again.",translatedText: "New email address has to be different than current email address. Please try again."},EMAIL_ADDRESS_CHANGE_SUCCESS_MESSAGE : {sourceText: "Email Address successfully changed to $emailAddress",translatedText: "Email Address successfully changed to $emailAddress"},PASSWORD_CONFIRM_DOESNT_MATCH : {sourceText: "Passwords do not match. Please type your password again and confirm it.",translatedText: "Passwords do not match. Please type your password again and confirm it."},PASSWORD_VALIDATION_ERROR_TEXT_1 : {sourceText: "The password entered does not meet requirements.",translatedText: "The password entered does not meet requirements."},PASSWORD_VALIDATION_ERROR_TEXT_2 : {sourceText: "Your password must be 8-128 characters and may not contain your email address or membership number.",translatedText: "Your password must be 8-128 characters and may not contain your email address or membership number."},PASSWORD_REQUIRED : {sourceText: "Password is required.",translatedText: "Password is required."},CONFIRM_PASSWORD_REQUIRED : {sourceText: "Please confirm password.",translatedText: "Please confirm password."},UNABLE_VERIFY_MEMBERSHIP : {sourceText: "We are unable to verify your password.",translatedText: "We are unable to verify your password."},PASSWORD_RESET_SUCCESSFUL : {sourceText: "Your password has been successfully changed.",translatedText: "Your password has been successfully changed."},COMMUNICATION_LANGUAGE_UPDATE_SUCCESS_MESSAGE_ENGLISH : {sourceText: "Communication Language successfully changed to English",translatedText: "Communication Language successfully changed to English"},COMMUNICATION_LANGUAGE_UPDATE_SUCCESS_MESSAGE_FRENCH : {sourceText: "Communication Language successfully changed to French",translatedText: "Communication Language successfully changed to French"}};var TranslationMessages = this.TranslationMessages;this.name="memberAccountModule";this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.deselectTabs=function(){this.tabSwitcher.deselectAll();this.previousTab=this.currentTab};this.focusFirstInput=function(){$namespace.Utils.Breakpoint.isMobile()||$namespace.Browser.iPad||this.tabSwitcher.getActivePane().find('input[type="text"], select').each(function(a,b){a=$(b);if(a.is(":visible"))return a.focus(),
!1})};this.setTab=function(a,b,d){this.tabSwitcher.setTab(a,b,d);this.previousTab=this.currentTab};this.initialize=function(a){var b=this;a=a||{};this.currentTab=this.defaultTab=a.defaultTab||"vacation-packages-tab";this.previousTab=null;this.selector='FORM[id="member_account_page"]';this.el=$(this.selector);this.tabSwitcher=new $namespace.Widgets.TabSwitcher(this.el.find('[data-hook="tab-switcher"]')),this.tabSwitcher.onSelect=function(a,e,f){b.previousTab=b.currentTab;b.currentTab=a},this.currentTab?
this.setTab(this.currentTab):this.defaultTab&&(this.setTab(this.defaultTab),this.currentTab=this.defaultTab);this.bindEventHandlers();window.setTimeout($.proxy(function(){this.el.addClass("initialized")},this),1);this.widgets={memberAccount:$namespace.Modules.addView(this,$namespace.View.MemberAccountView,{module:this}),memberDetailAccount:$namespace.Modules.addView(this,$namespace.View.MemberAccountDetailView,{module:this})}};this.isActive=function(){return $("DIV.some-element").length};this.unbindEventHandlers=
function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SpecialtyOfferDetailsModule=new function(){this.TranslationTexts={ACCESSIBILITY_CALL_TO_BOOK: "Focus moved to Available Dates and Prices matrix.",COSTCO_TRAVEL_TITLE: "Costco Travel"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){var a=this;$(window).on("resize.offer orientationchange.offer",function(){a.resize()})};this.close=function(){this.unbindEventHandlers();
$namespace.Modules.closeViews(this);this.carousel.destroy()};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#specialtyOfferContents";this.offerDetails=$namespace.Modules.addView(this,$namespace.View.SpecialtyOfferDetailsView,{module:this,packageId:a.packageId});this.resize()};this.stopAutoRotation=function(){try{this.carousel.stopAutoRotation()}catch(a){}};this.isActive=function(){return $(this.selector).length};this.resize=function(){this.offerDetails.resize()};this.unbindEventHandlers=
function(){$(window).off("resize.offer orientationchange.offer")}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.AreaModule=new function(){this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.area=$namespace.Modules.addView(this,$namespace.View.AreaView,{module:this})};this.isActive=function(){return $("DIV.some-element").length};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.DestinationRegionModule=new function(){this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.tooltip=new $namespace.Widgets.Tooltip($('BUTTON[id="map-tooltip"]'));this.showmore=new $namespace.Widgets.ShowMore($('Div[id="showmore"]'))};this.isActive=function(){return $("DIV.hero").length};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.OfferDetailsModule=new function(){this.TranslationTexts={VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE: "Package Search Error",TERMS_AND_CONDITIONS_POPUP_ERROR_TITLE: "Terms & Conditions Error",VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE: "Tour Error",VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE: "Theme Park Error",VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",COSTCO_TRAVEL_TITLE: "Costco Travel",HOT_DEALS_TITLE: "Deals",OFFERS_TITLE: "Offers",ACCESSIBILITY_CALL_TO_BOOK: "Focus moved to Available Dates and Prices matrix.",TRANSPORTATION_GRID_SECTION_LABEL: "Section $index of $total, $cityname",TRANSPORTATION_GRID_OVERNIGHT_RAIL_SECTION_LABEL: "Section $index of $total, overnight rail from $fromcityname to $destcityname",WARNING_PACKAGE_NOT_AVAILABLE_MSG: "Warning: Package not available on dates selected. Please enter alternative dates.",WARNING_NO_OF_TRAVELLERS_PER_ROOM_MSG: "Warning: Many hotel rooms accommodate up to four travelers. If you do not receive your desired results, try searching again using two or more rooms.",WARNING_AIRFARE_IS_REQUIRED_MSG: "Warning: Airfare is required. Please select the \"Include Flights with your package\" checkbox and search again.",WARNING_HOTEL_NOT_AVAILABLE_MSG: "Packages require a hotel to be booked with them.  There is not a hotel on your package.  This could be because of dates or occupancy, please change your dates and search again."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {NO_DEPARTURE_CITY_ERROR_MESSAGE : {sourceText: "No departure cities found with given criteria.",translatedText: "No departure cities found with given criteria."},VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){var a=this;$(window).on("resize.offer orientationchange.offer",function(){a.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this);this.carousel.destroy()};
this.initialize=function(a){this.bindEventHandlers();this.selector="#offerDetails";this.offerDetails=$namespace.Modules.addView(this,$namespace.View.OfferDetailsView,{module:this});window.setTimeout(function(){var a=$($namespace.Utils.Breakpoint.isMobile()?document.getElementById("offerDetails"):document.getElementById("vpBreadCrumbs")).offset().top;window.scrollTo(0,a)},500);this.resize()};this.stopAutoRotation=function(){try{this.carousel.stopAutoRotation()}catch(a){}};this.isActive=function(){return $(this.selector).length};
this.resize=function(){this.offerDetails.resize()};this.unbindEventHandlers=function(){$(window).off("resize.offer orientationchange.offer")}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HotelOfferPageModule=new function(){this.TranslationTexts={HOTEL_OFFER_SEARCH_ERROR_TITLE: "Offer Search Error",TERMS_AND_CONDITIONS_POPUP_ERROR_TITLE: "Terms & Conditions Error"};var TranslationTexts = this.TranslationTexts;
;this.name="HotelOfferPageModule";this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.HotelOfferPageModule.resize()})};
this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.selector='DIV[id="search-widget-modal"]';this.el=$(this.selector);this.bindEventHandlers();this.selector="#hotel_offer_price_availability_modal";this.el=$(this.selector);this.showmore=new $namespace.Widgets.ShowMore($('DIV[data-hook="showmore"]'));this.offerDetails=$namespace.Modules.addView(this,$namespace.View.HotelOfferPageView,{module:this})};this.initElement=function(){this.el&&
0!=this.el.length||(this.el=$(this.selector))};this.isActive=function(){return $(this.selector).length};this.resize=function(){this.offerDetails.resize()};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.HotelOfferPageModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.WorldMapModule=new function(){this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.area=$namespace.Modules.addView(this,$namespace.View.WorldMapView,{module:this})};this.isActive=function(){return $("DIV.map-destination-desktop").length};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PackageFlightsModule=new function(){this.TranslationTexts={SHOW_MORE_BUTTON_TEXT: "Show More Flights",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $amount More Flights",MATCHING_FLIGHTS_SINGULAR: "1 Matching Flight",MATCHING_FLIGHTS_PLURAL: "$resultNumber Matching Flights",MOVE_TO_NEXT_CHECKBOX_TEXT: "Moved the focus to the next checkbox",RESULT_TEXT_SINGULAR: "(1 result)",RESULT_TEXT_PLURAL: "($resultNumber results)",SORTED_BY_BEST_VALUE: "Flights sorted by Best Value",SORTED_BY_PRICE: "Flights sorted by Price",DORTED_BY_SHORTEST_SLIGHT: "Flights sorted by Shortest Flight",SORTED_BY_DEPARTURE_TIME: "Flights sorted by Departure Time",SORTED_BY_ARRIVAL_TIME: "Flights sorted by Arrival Time"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector='DIV[id="flightSearch"]';a.superBooking||(this.infobarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,
accordionClassToActivate:".flightsSummaryAccordionTab"}));this.packageFlightsView=$namespace.Modules.addView(this,$namespace.View.PackageFlightsView,{module:this,superBooking:a.superBooking})};this.getDefaultView=function(){return this.packageFlightsView};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PackageOverviewModule=new function(){this.TranslationTexts={VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",VACATION_PACKGE_THEME_PARK_POPUP_ERROR_TITLE: "Theme Park Error",VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#packageOverview";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.packageOverview=
$namespace.Modules.addView(this,$namespace.View.PackageOverviewView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PackageSearchResultsModule=new function(){this.TranslationTexts={SEARCH_RESULT_ERROR_TITLE: "Search Result Error",SHOW_MORE_BUTTON_TEXT: "Show More Results",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $amount More Results",PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE: "Error Loading Search Results",ANY_THEME_PARK_LABEL_SINGULAR: "Any Theme Park (1 result)",ANY_THEME_PARK_LABEL_PLURAL: "Any Theme Park ($resultNumber results)",ANY_AREA_LABEL_SINGULAR: "Any Area (1 result)",ANY_AREA_LABEL_PLURAL: "Any Area ($resultNumber results)",ANY_BRAND_CHAIN_SINGULAR: "Any Brand (1 result)",ANY_BRAND_CHAIN_LABEL_PLURAL: "Any Brand ($resultNumber results)",ANY_HOTEL_TYPE_LABEL_SINGULAR: "Any Hotel Type (1 result)",ANY_HOTEL_TYPE_LABEL_PLURAL: "Any Hotel Type ($resultNumber results)",ANY_HOTEL: "Any Hotel ($resultNumber)",ANY_STAR_RATING_SINGULAR: "Any Rating (1 result)",ANY_STAR_RATING_PLURAL: "Any Rating ($resultNumber results)",RESULT_TEXT_SINGULAR: "(1 result)",RESULT_TEXT_PLURAL: "($resultNumber results)",MATCHING_PACKAGE_TEXT_SINGULAR: "1 Matching Package",MATCHING_PACKAGE_TEXT_PLURAL: "$resultNumber Matching Packages",SEARCH_RESULT_THEME_PARK_POPUP_ERROR_TITLE: "Theme Park Error",NO_HOTELS_FOUND: "No hotels found with given criteria.",ACCESSIBILITY_SELECTED_LIST_VIEW: "Switched to list view",ACCESSIBILITY_SELECTED_MAP_VIEW: "Switched to map view",ACCESSIBILITY_PACKAGE_SELECTED_TEXT: "$packageName is selected",INFOWINDOW_COSTCO_TRAVEL_RATING: "Costco Travel Rating",INFOWINDOW_COSTCO_MEMBER_RATING: "Costco Member Reviews",INFOWINDOW_COSTCO_HOTEL_RATING: "Hotel Rating",INFOWINDOW_TOTAL_PRICE: "Total Price",NO_FLIGHT_FOUND: "Based on your search criteria, no flights are available with the airlines we offer."};var TranslationTexts = this.TranslationTexts;
;this.packageSearched=!1;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this);this.carousel.destroy()};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.packageSearched=!1;this.vp2Enabled=a.vp2Enabled;this.selector='DIV[id="searchResults"]';this.InfoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});
this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.PackageSearchResultsView,{module:this,vp2Enabled:this.vp2Enabled})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCitySearchResultsModule=new function(){this.TranslationTexts={MATCHING_PACKAGE_TEXT_SINGULAR: "1 Matching Package",MATCHING_PACKAGE_TEXT_PLURAL: "$resultNumber Matching Packages",RESULT_TEXT_SINGULAR: "1 result",RESULT_TEXT_PLURAL: "$resultNumber results",MOVE_TO_NEXT_CHECKBOX_TEXT: "Moved the focus to the next checkbox",SHOW_MORE_BUTTON_TEXT: "Show More Results",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $amount More Results",PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE: "Error Loading Search Results"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this);this.carousel.destroy()};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.vp2Enabled=a.vp2Enabled;this.selector='DIV[id="multiCitySearchResults"]';
this.InfoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multiCitySearchResultsView=$namespace.Modules.addView(this,$namespace.View.MultiCitySearchResultsView,{module:this,vp2Enabled:this.vp2Enabled});this.multiCitySearchFilterView=$namespace.Modules.addView(this,$namespace.View.MultiCitySearchFilterView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PackageHotelModule=new function(){this.TranslationTexts={HOTELS_PAGE_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",ADDITIONAL_HOTELS_LOADING_ERROR_TITLE: "Error Loading Additional Hotels.",SHOW_MORE_HOTELS_BUTTON_TEXT: "Show More Hotels",SHOW_5_MORE_HOTELS_BUTTON_TEXT: "Show 5 More Hotels",MODIFY_ROOM_BUTTON_TEXT: "Modify Room",KEEP_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection",ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT: "Modify room $roomNumber",ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection for room $roomNumber",HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE: "This change will <strong>add <span data-test='priceChangeDifference'>$priceChange</span></strong> to your total package price.",HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE: "This change will <strong>subtract <span data-test='priceChangeDifference'>$priceChange</span></strong> from your total package price.",HOTEL_ROOM_CHANGE_MODAL_TITLE: "Confirm Hotel Room Change",HOTEL_CHANGE_MODAL_TITLE: "Confirm Hotel Change",HOTEL_CHANGE_MODAL_NEW_PACKAGE_PRICE_LABEL: "New Package Price:",NEW_HOTEL_SELECTED: "New Hotel Selected",MEMBER_REVIEW_SORT_TYPE: "Costco Member Review",SORTED_BY_COSTCO_RECOMMENDS: "Hotels sorted by Costco Recommends",SORTED_BY_NAME: "Hotels sorted by Name",SORTED_BY_PRICE: "Hotels sorted by Price",SORTED_BY_TRAVEL_RATING: "Hotels sorted by Travel Rating",SORTED_BY_MEMBER_RATING: "Hotels sorted by Member Rating"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {HOTELS_PAGE_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector='DIV[id="hotelResults"]';this.infobarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,accordionClassToActivate:".hotelSummaryAccordionTab"});this.packageHotelView=
$namespace.Modules.addView(this,$namespace.View.PackageHotelView,{module:this})};this.loadAdditionalHotelResultsPage=function(a){this.packageHotelView.loadAdditionalHotelResultsPage(a)};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HotelFactSheetModule=new function(){this.TranslationTexts={HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {HOTEL_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){var a=this;$(window).on("resize.offer orientationchange.offer",function(){a.resize()})};this.close=
function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector='DIV[id="hotel-factsheet-page"]';$namespace.Modules.addView(this,$namespace.View.HotelFactSheetView,{module:this})};this.isActive=function(){return $(this.selector).length};this.resize=function(){};this.unbindEventHandlers=function(){$(window).off("resize.offer orientationchange.offer")}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseLandingPageModule=new function(){this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector='DIV[id="browse-destination"]';this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.CruiseLandingPageView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.transportationModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",CAR_CHANGE_MODAL_TITLE: "Confirm Transportation Changes",CAR_PRICE_DIFFERENCE_TO_ADD_MESSAGE: "This transportation change will <strong>add $priceChange</strong> to your total package price.",CAR_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE: "This transportation change will <strong>subtract $priceChange</strong> from your total package price."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();
this.selector="#transportationResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,accordionClassToActivate:".transportationSummaryAccordionTab"});this.transportationResults=$namespace.Modules.addView(this,$namespace.View.TransportationView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.themeParkModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",THEME_PARKS_UNIVERSAL_TICKET_CONFIRMATION_MESSAGE: "No Tickets were selected for Universal Orlando Resort. Do you want to add Universal Orlando Resort tickets?"};var TranslationTexts = this.TranslationTexts;
;
this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#themeParkResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,accordionClassToActivate:".themeparksSummaryAccordionTab"});this.themeParkResults=$namespace.Modules.addView(this,$namespace.View.ThemeParkView,{module:this})};this.isActive=function(){return $(this.selector).length};
this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.activitiesResultsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE: "Select a date for this Activity.",ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE: "Select a time for this Activity."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {ACTIVITY_VALIDATION_ERROR_TIME_IS_MISSING : {sourceText: "One or more of your included activities requires a time to be selected. Select the 'Edit' button to pick a time for the included activities.",translatedText: "One or more of your included activities requires a time to be selected. Select the 'Edit' button to pick a time for the included activities."},ACTIVITY_VALIDATION_ERROR_MANDATORY_NO_OF_TOURS : {sourceText: "This package requires a selection of at least $noOfActivity activity item(s)",translatedText: "This package requires a selection of at least $noOfActivity activity item(s)"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#activitiesResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,accordionClassToActivate:".activitiesSummaryAccordionTab"});this.activitiesResults=
$namespace.Modules.addView(this,$namespace.View.ActivitiesResultsView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseDetailsModule=new function(){this.TranslationTexts={N_A: "N/A",INCLUDED_EXTRAS_ERROR_MESSAGE: "Something went wrong while loading Included Extra.  All Included Extras will still be included with purchase."};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseDetailsModule";this.active=!1;this.initialize=
function(a){a=a||{};this.selector="#cruise-details-page";this.bindEventHandlers();this.offerDetails=$namespace.Modules.addView(this,$namespace.View.CruiseDetailsView,{module:this,destinationCode:a.destinationCode})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseDetailsModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",
function(){$namespace.CruiseDetailsModule.resize()})};this.isActive=function(){return $(this.selector).length};this.reloadCruiseDetailsPage=function(){$namespace.DomUtil.setElementLoadingMask(!0);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseDetails.act","ctcd=LOAD_CRUISE_DETAILS",null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1);a()},null,null,null,null)};var a=function(){$namespace.AjaxUtil.makeAjaxCall("home.act","h=22",null,"utility-links",function(){$namespace.Application.initializeOnMainContentReload()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseSearchResultsModule=new function(){this.TranslationTexts={SHOW_MORE_RESULTS_TEXT: "Show More Results",PLACEHOLDER_ANY_DESTINATION_OPTION: "Any Destination",PLACEHOLDER_ANY_CRUISE_LINE_OPTION: "Any Cruise Line",PLEASE_SELECT_DEPARTURE_MONTH: "Please select departure month",ADDITIONAL_TAXES_AND_FEES: "Additional government taxes, fees and port expenses per person may apply.",N_A: "N/A",MESSAGE_TITLE_ACKNOWLEDGEMENT: "Acknowledgements",BUTTON_TITLE_I_UNDERSTAND: "I Understand",CURRENCY_CONVERSION_WARNING_HEADER: "Payment Currency and Transaction Fees <br />",CURRENCY_CONVERSION_WARNING_MESSAGE: "The cruise line you selected only accepts payment in U.S. dollars. On subsequent pages, all prices for this cruise line will be displayed and charged in U.S. dollars.<br /><br />Foreign transaction fees may apply. For more information, consult your credit card company.",INCLUDED_EXTRAS_ERROR_MESSAGE: "Something went wrong while loading Included Extras.  All Included Extras will still be included with purchase.",MATCHING_SAILING: "Matching Sailing",MATCHING_SAILINGS: "Matching Sailings",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists.",SORTED_BY_MINIMUM_PRICE: "Results sorted by Minimum Price",SORTED_BY_DEPARTURE_DATE: "Results sorted by Departure Date",DORTED_BY_CRUISE_LINE_NAME: "Results sorted by Cruise Line Name",SORTED_BY_DURATION: "Results sorted by Duration",SORTED_BY_SHIP_RATING: "Results sorted by Ship Rating",FILTERS_APPLIED: "Filters applied. Filter section collapsed.",FILTERS_CLEARED: "Filters cleared."};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseSearchResultsModule";this.active=!1;this.initialize=function(a){this.selector="#cruise-search-results-page";this.bindEventHandlers();this.offerDetails=$namespace.Modules.addView(this,$namespace.View.CruiseSearchResultsView,{module:this})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};
this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseSearchResultsModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseSearchResultsModule.resize()})};this.isActive=function(){return $(this.selector).length};this.reloadCruiseSearchResultsPage=function(){var a=function(){$namespace.DomUtil.setElementLoadingMask(!0,null,!1);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act",
"ctcsr=LOAD_CRUISE_SEARCH_RESULTS_PAGE",null,"mainContent",function(){$namespace.DomUtil.setElementLoadingMask(!1,null,!1)},null,null,null,null)};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseSearchResults.act","ctcsr=SHOW_CRUISE_BOOKING_RESET_WARNING",null,null,function(b){b?($namespace.DomUtil.setElementLoadingMask(!1,null,!1),(new $namespace.Widgets.Confirm(this.responseText,function(){a()},function(){var a=$namespace.HistoryNavigation.getHistoryData();$namespace.HistoryNavigation.addHistory(a.navigatedTo)})).show()):
a()},null,"")}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruisePaymentsModule=new function(){this.TranslationTexts={CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER: "Invalid number. At this time, we only accept Visa and MasterCard&reg;.",COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE: "Confirmation of mailing address for the Costco Shop Card(s) is required.",REVIEW_DETAILS: "Review Details",COMPLETE_BOOKING: "Complete Booking",SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE: "Scheduled Date is required.",SCHEDULE_DATE_INVALID_ERROR_MESSAGE: "Invalid date.",GO_TO_ACCOUNT: "Go To Your Account",STATE_LABEL: "State",PROVINCE_LABEL: "Province",ZIPCODE_LABEL: "Zip Code",POSTALCODE_LABEL: "Postal Code",SELECT_TEXT: "Select",CREDIT_CARD_LABEL: "Credit Card",ZIP_VALIDATION_ERROR_MESSAGE: "Zip Code is required.",ZIP_INVALID_ERROR_MESSAGE: "Zip Code must be 5 digits.",STATE_VALIDATION_ERROR_MESSAGE: "State is required.",PROVINCE_VALIDATION_ERROR_MESSAGE: "Province is required.",POSTAL_CODE_VALIDATION_ERROR_MESSAGE: "Postal Code is required.",POSTAL_CODE_INVALID_ERROR_MESSAGE: "Invalid Postal Code.",CITY_VALIDATION_ERROR_MESSAGE: "City is required.",CITY_INVALID_ERROR_MESSAGE: "Invalid City entered.",STREET_VALIDATION_ERROR_MESSAGE: "Street is required.",STREET_INVALID_ERROR_MESSAGE: "Invalid Street entered.",STREET2_INVALID_ERROR_MESSAGE: "Invalid Street2/Apt. entered.",CREDIT_CARD_AMOUNT_INVALID_ERROR_MESSAGE: "Amount entered is not valid.",CARDHOLDER_NAME_INVALID_ERROR_MESSAGE: "Invalid Cardholder Name.",CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE: "Cardholder Name is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE: "Credit Card Number is required.",CARD_NUMBER_INVALID_ERROR_MESSAGE: "Invalid Credit Card Number.",CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE: "Month of expiration is required.",CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE: "Year of expiration is required.",CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date entered is in the past.",SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date is before the scheduled date.",CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE: "CVV is required.",CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE: "CVV must be 3 digits.",PRIMARY_PHONE_INVALID_ERROR_MESSAGE: "Phone number is required.",PHONE_10_DIGIT_ERROR_MESSAGE: "Invalid phone number.",EMAIL_INVALID_ERROR_MESSAGE: "Invalid email format.",PRIMARY_EMAIL_MISSING_ERROR_MESSAGE: "Email is required.",EXT_INVALID_ERROR_MESSAGE: "Invalid Ext. number.",SCHEDULE_DATE_CALENDAR_LABEL: "Schedule date calendar",ERROR_NOTE: "Note: Your previous stateroom(s) booked successfully.",ERROR_TITLE: "Error",EMAIL_SENT_MESSAGE_TITLE: "Email Itinerary",EMAIL_ADDRESS_MISSING_MESSAGE: "Please enter email address.",EMAIL_ADDRESS_INVALID_MESSAGE: "Email address is invalid.",EMAIL_SENT_SUCCESSFUL_MESSAGE: "Booking Itinerary has been mailed to your email address.",SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},SCHEDULE_DATE_RANGE_ERROR_MESSAGE : {sourceText: "Scheduled date must be between <span class=\"nowrap\">$minDate</span> and <span class=\"nowrap\">$maxDate</span>.",translatedText: "Scheduled date must be between <span class=\"nowrap\">$minDate</span> and <span class=\"nowrap\">$maxDate</span>."},CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE : {sourceText: "Amount must be between <span class=\"nowrap\">$minAmount</span> and <span class=\"nowrap\">$maxAmount</span>.",translatedText: "Amount must be between <span class=\"nowrap\">$minAmount</span> and <span class=\"nowrap\">$maxAmount</span>."},CONTINUE_TO_STATEROOM : {sourceText: "Continue to Stateroom $stateroomNumber",translatedText: "Continue to Stateroom $stateroomNumber"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=
function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.options=a||{};this.bindEventHandlers();this.selector="#cruisePayment";a=this.options.bookingConfirmationPageActive;this.activePage="true"===this.options.finalizeBookingPageActive?"cruiseFinalize":"true"===a?"cruiseConfirmation":"cruisePayment";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruisePayments=$namespace.Modules.addView(this,$namespace.View.CruisePaymentsView,
{module:this,scheduledDueDate:this.options.scheduledDueDate,grossPaymentAmount:this.options.grossPaymentAmount,minimumDepositAmount:this.options.minimumDepositAmount})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){};this.reloadCruisePaymentsPage=function(){$namespace.DomUtil.setElementLoadingMask(!0);var a=this,b=function(b){a.activePage="cruisePayment";b||$("#info-bar-links").addClass("no-back-link");a.cruisePayments=$namespace.Modules.addView(a,$namespace.View.CruisePaymentsView,
{module:a,scheduledDueDate:a.options.scheduledDueDate,grossPaymentAmount:a.options.grossPaymentAmount,minimumDepositAmount:a.options.minimumDepositAmount,fromFinalizePayment:!0});$namespace.DomUtil.setElementLoadingMask(!1)},d={cpp:"LOAD_CRUISE_PAYMENT_PAGE_PAYMENT_CONTENT"};$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",$.param(d),null,"payment-and-finalize-payment-and-booking-confirmation",function(){d.cpp="LOAD_INFO_BAR_LINKS";$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruisePaymentActivity.act",
$.param(d),null,"info-bar-links",b)})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PackageRecapModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#packageRecap";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,
{module:this});this.packageRecap=$namespace.Modules.addView(this,$namespace.View.PackageRecapView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.travelerInfoModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",TERMS_AND_CONDITIONS_ERROR_MESSAGE: "Terms & Conditions is required.",TRAVELER_ERROR_COMMON: "Error",TRAVELER_TITLE_ERROR_MESSAGE: "Title is required.",TRAVELER_FIRST_NAME_ERROR_MESSAGE: "First Name is required.",TRAVELER_LAST_NAME_ERROR_MESSAGE: "Last Name is required.",TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE: "The last name should contain at least 2 characters.",TRAVELER_NAME_MAX_CHARACTERS_MESSAGE: "Title,first name,middle name,last name and suffix all together should not cross 100 characters.",TRAVELER_GENDER_ERROR_MESSAGE: "Gender is required.",TRAVELER_DOB_MONTH_ERROR_MESSAGE: "Month of Date of Birth is required.",TRAVELER_DOB_DAY_ERROR_MESSAGE: "Day of Date of Birth is required.",TRAVELER_DOB_YEAR_ERROR_MESSAGE: "Year of Date of Birth is required.",TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE: "Please verify that the date of birth entered for this traveler is correct. The age does not match the type for the traveler.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE: "There is a discrepancy between the age provided at search and the date of birth. Airlines are very strict about birthdates and ages. Change fees may apply if the PNR is incorrect. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT: "There is a discrepancy between the age provided at search and the date of birth. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE: "Date of birth cannot be a future date.",TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE: "Must be alphanumeric only.",TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE: "Must be 7 digits, numbers only.",KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE: "Must be 9 characters, alphanumeric only.",TRAVELER_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",TRAVELER_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking."};var TranslationTexts = this.TranslationTexts;
;
this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#travelerInformation";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.travelerInfo=$namespace.Modules.addView(this,$namespace.View.TravelerInfoView,{module:this,gaParams:a.gaParams,totalRooms:a.totalRooms,adultThresholdAge:a.adultThresholdAge,referenceDate:a.referenceDate,
departureDate:a.departureDate,returnDate:a.returnDate})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseTravelerModule=new function(){this.TranslationTexts={INCREMENT_ADULTS_TEXT: "Total Adults",INCREMENT_CHILDREN_TEXT: "Total children",INCREMENT_INFANTS_TEXT: "Total infants",DECREMENT_ADULTS_TEXT: "Total Adults",DECREMENT_CHILDREN_TEXT: "Total children",DECREMENT_INFANTS_TEXT: "Total infants",SELECTED_TEXT: "Selected",MINIMUM_ADULTS_SELECTED_TEXT: "Total Adults",MINIMUM_CHILDREN_SELECTED_TEXT: "Total children",MINIMUM_INFANTS_SELECTED_TEXT: "Total infants",WARNING_MASSEGE: "Warning",UNAVAILABLE_MASSEGE: "Unavailable",NOT_SELECTED_TEXT: "not selected",CONTINUE_TO_STATEROOM_TEXT: "Continue to Stateroom Type",NEXT_STATEROOM: "Next Stateroom",CRUISE_TRAVELER_PAGE_TITLE: "Travelers - Cruises | Costco Travel",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists.",STATE_OF_RESIDENCE_REQUIRED_FOR_ALL: "State of Residence is not selected for all starerooms."};var TranslationTexts = this.TranslationTexts;
;
this.name="CruiseTravelerModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#cruise-traveler-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.offerDetails=$namespace.Modules.addView(this,$namespace.View.CruiseTravelerView,{module:this,fromCruiseOffer:a.fromCruiseOffer})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=
function(){$(window).on("resize orientationchange",function(){$namespace.CruiseTravelerModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseTravelerModule.resize()})};this.isActive=function(){return $(this.selector).length};this.reloadCruiseTravelersPage=function(){$namespace.GlobalConstants.RESPONSIVE_CRUISE_TRAVELERS_STATEROOM_TYPE_PAGES_ENABLED?($namespace.DomUtil.setElementLoadingMask(!0),$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("cruiseTraveler.act",
"csr=SHOW_TRAVELER_PAGE",null,"mainContent",function(){$namespace.Application.initializeOnMainContentReload();$namespace.DomUtil.setElementLoadingMask(!1)},null,null,null,null)):$namespace.Navigation.loadPage(_webLoc+"/h="+$namespace.PageHistoryConstants.HISTORY_CRUISE_PASSENGER_INFO)}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseStateroomTypeModule=new function(){this.TranslationTexts={CONTINUE_TO_STATEROOM_LOCATION_TEXT: "Continue to Stateroom Location",CONTINUE_TO_STATEROOM_TEXT: "Continue to Stateroom",NEXT_STATEROOM: "Next Stateroom",STATE_ROOM_SELECTION_NOT_VALID: "Invalid State Room Type Selection",STATROOM_VALIDATION_MESSAGE: "Please select a stateroom type to continue.",SELECTED_TEXT: "Selected",NOT_SELECTED_TEXT: "not selected",NOT_AVAILABLE: "Not Available"};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseStateroomTypeModule";this.active=!1;this.initialize=
function(a){a=a||{};this.selector="#cruiseStateroomTypePage";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.offerDetails=$namespace.Modules.addView(this,$namespace.View.CruiseStateroomTypeView,{module:this,cruiseSearchFromOfferPage:a.cruiseSearchFromOfferPage})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",
function(){$namespace.CruiseStateroomTypeModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseStateroomTypeModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SpecialRequestsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required.",SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED: "In order to better accommodate your needs, we need a description of the type(s) of accessible features needed.",SPECIAL_REQUESTS_ERROR_COMMON: "Error",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#packageSpecialRequests";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});
this.packageRecap=$namespace.Modules.addView(this,$namespace.View.SpecialRequestsView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.flightSeatSelectionModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",CONTINUE: "Continue",CONTINUE_TO_NEXT_FLIGHT: "Continue to Next Flight",TEXT_SEAT: "Seat",TEXT_AVAILABLE: "Available",TEXT_SELECTED_FOR_PASSENGER: "selected for passenger",TEXT_SEAT_NUMBER: "Seat Number",ACKNOWLEDGEMENT_MODAL_TITLE: "Acknowledgement",SEAT_NOT_SELECTED_FOR_ALL_PASSENGER: "Not all passengers have assigned seats. Continue without assigning seats?",TEXT_LAVATORY_ICON: "Lavatory Icon",TEXT_GALLEY_ICON: "Galley Icon",TEXT_CLOSET_ICON: "Closet Icon"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#packageFlightSeatSelection";this.infoBarView=$namespace.Modules.addView(this,
$namespace.View.InfoBarView,{module:this});this.flightSeatSelectionView=$namespace.Modules.addView(this,$namespace.View.FlightSeatSelectionView,{module:this,gaParams:a.gaParams,passengerInfoJSON:a.passengerInfoJSON,seatsPreferred:a.seatsPreferred})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.themeParkSpecialityModule=new function(){this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#themeParkSpecialityHome";this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.themeParkSpecialtyView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseFlightPageModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
;this.name="cruiseFlightPageModule";this.active=!1;this.initialize=function(a){this.selector="#cruise-flight-page";this.bindEventHandlers();this.offerDetails=$namespace.Modules.addView(this,$namespace.View.cruiseFlightPageView,{module:this});a=$namespace.PackageFlightsModule;$namespace.Modules.activate(a,{superBooking:!0});this.packageFlightsView=a.getDefaultView();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,
{module:this,accordionClassToActivate:".cruiseTravelerFlightAccordion"})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseFlightPageModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseFlightPageModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseCabinResultsModule=new function(){this.TranslationTexts={CONTINUE_TO_ADDONS_TEXT: "Continue to Add-ons",CONTINUE_TO_LOGIN_TEXT: "Login and Book",CONTINUE_TO_TRAVELERS_TEXT: "Continue to Details",CONTINUE_TO_STATEROOM_TEXT: "Next Stateroom",STATE_ROOM_SELECTION_NOT_VALID: "Invalid State Room Type",BED_SELECTION_REQUIRED: "Select a bedding configuration.",CHECKBOX_SELECTION_REQUIRED: "Checkbox is required.",GUARANTEED_STATEROOM_SELECTION_REQUIRED: "Select a Guaranteed Stateroom below or select the \"Cancel Guaranteed Stateroom\" button to go back to the allocated stateroom.",ONLY_GUARANTEED_STATEROOM_SELECTION_REQUIRED: "Select a Guaranteed Stateroom below.",SELECT_BUTTON_TEXT: "Select",STATEROOM_DESCRIPTION_TEXT: "stateroom description",STATEROOM_TAB_SELECTED_TEXT: "stateroom $tabNumber selected",STATEROOM_TAB_NOT_SELECTED_TEXT: "stateroom $tabNumber not selected",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists."};var TranslationTexts = this.TranslationTexts;
;
this.name="CruiseCabinResultsModule";this.active=!1;this.currentTabContentView=null;this.initialize=function(a){this.selector="#cruise-cabin-results-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this})};this.addCruiseCabinResultsView=function(a){a=a||{};this.cruiseCabinResults=$namespace.Modules.addView(this,$namespace.View.CruiseCabinResultsView,{module:this,gaParams:a.gaParams})};this.addCruiseCabinResultsTabContentView=function(){this.removeOldView(this.currentTabContentView);
this.currentTabContentView=$namespace.Modules.addView(this,$namespace.View.CruiseCabinResultsTabContentView,{module:this})};this.addCruiseCabinResultsGuaranteedView=function(){this.removeOldView(this.currentTabContentView);this.currentTabContentView=$namespace.Modules.addView(this,$namespace.View.CruiseCabinResultsGuaranteedView,{module:this})};this.removeOldView=function(a){if(a)for(var b=0;b<this.views.length;b++)if(this.views[b]===a){a.close();this.views.splice(b,1);break}};this.close=function(){this.unbindEventHandlers();
$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseCabinResultsModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseCabinResultsModule.resize()})};this.isActive=function(){return $(this.selector).length};this.reloadStateroomLocation=function(a){1<a.length&&(a=a.join("_"),window.location.replace(_webLoc+"/h="+a))}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruisePackageAddonsModule=new function(){this.TranslationTexts={CRUISE_PACKAGE_ADDON_DEPARTURE_CITY_REQUIRED: "Departure city is required.",CRUISE_PACKAGE_ADDON_DEPARTURE_CITY_NOT_FOUND: "Departure city not found.",CRUISE_PACKAGE_ADDON_ARRIVAL_DATE_REQUIRED: "Arrival Date is required.",CRUISE_PACKAGE_ADDON_DEPARTURE_DATE_SHOULD_NOT_LESS_THAN_RETURN_DATE: "Departure date should not be less than cruise return date.",CRUISE_PACKAGE_ADDON_ARRIVAL_DATE_SHOULD_NOT_LESS_DEPARTURE_DATE: "Arrival date should not be greater than cruise departure date.",CRUISE_PACKAGE_ADDON_DEPARTURE_DATE_REQUIRED: "Departure Date is required.",CRUISE_PACKAGE_ADDON_SERVICE_REQUIRED: "More than one airport services the Miami cruise port. Select your preferred arrival airport(s) and try again.",TRANSPORTATION_CHECK_ERROR_MESSAGE: "Error: Transfers are only available if a flight and/or hotel is included in your cruise booking.",NO_DEPARTURE_CITY_ERROR_MESSAGE: "No departure cities found with given criteria.",CRUISE_PACKAGE_ADDON_INVALID_ARRIVAL_DATE: "Invalid arrival date.",CRUISE_PACKAGE_ADDON_INVALID_DEPARTURE_DATE: "Invalid departure date.",CRUISE_PACKAGE_ADDON_NUMBER_OF_NIGHTS_IS_REQUIRED: "Number of nights is required.",CRUISE_PACKAGE_ADDON_NUMBER_OF_STATEROOMS_DOES_NOT_MATCH_THE_NUMBER_OF_TRAVELERS_IN_THE_HOTEL: "The number of travelers in Staterooms does not match the number of travelers in the hotel.",CRUISE_PACKAGE_ADDON_MAX_NUMBER_OF_ROOMS: "Rooms should not be greater than 4.",CRUISE_PACKAGE_ADDON_MAX_NUMBER_OF_NIGHTS: "Nights should not be greater than 7.",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists."};var TranslationTexts = this.TranslationTexts;
;
this.name="cruisePackageAddonsModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#cruise-package-addons-page";this.bindEventHandlers();this.infoBarCruisePackageAddon=$namespace.Modules.addView(this,$namespace.View.CruisePackageAddonsPageView,{module:this,flightdepartureDate:a.flightdepartureDate,flightarrivalDate:a.flightarrivalDate,preCruiseHotelArrivalDate:a.preCruiseHotelArrivalDate,postCruiseHotelDepartureDate:a.postCruiseHotelDepartureDate,numberOfInfants:a.numberOfInfants,
numberOfActualAdults:a.numberOfActualAdults,numberOfActualChildren:a.numberOfActualChildren,cruiseDepartureDate:a.cruiseDepartureDate,cruiseReturnDate:a.cruiseReturnDate,cruiseEmbarkationCity:a.cruiseEmbarkationCity,cruiseDisembarkationCity:a.cruiseDisembarkationCity,seaportName:a.seaportName,arrivalSeaportName:a.arrivalSeaportName,shipName:a.shipName,cruiseLineName:a.cruiseLineName,numAvailableDestinationAirports:a.numAvailableDestinationAirports,departureCityName:a.departureCityName,departureCityCode:a.departureCityCode});
this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruisePackageAddonsModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruisePackageAddonsModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.DpDealsModule=new function(){this.TranslationTexts={HOTEL_OFFER_SEARCH_ERROR_TITLE: "Offer Search Error",TERMS_AND_CONDITIONS_POPUP_ERROR_TITLE: "Terms & Conditions Error",VACATION_PACKGE_SEARCH_POPUP_ERROR_TITLE: "Package Search Error",VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.name="DpDealsModule";this.bindEventHandlers=function(){$(window).on("resize.offer orientationchange.offer",function(){$namespace.DpDealsModule.resize()})};this.close=
function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.selector='DIV[id="dpdeals-search-widget-modal"]';this.el=$(this.selector);this.bindEventHandlers();this.selector="#dpdeals_offer_price_availability_modal";this.el=$(this.selector);this.showmore=new $namespace.Widgets.ShowMore($('DIV[data-hook="showmore"]'));this.offerDetails=$namespace.Modules.addView(this,$namespace.View.DpDealsView,{module:this})};this.initElement=function(){this.el&&0!=this.el.length||
(this.el=$(this.selector))};this.isActive=function(){return $(this.selector).length};this.resize=function(){this.offerDetails.resize()};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.DpDealsModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.PaymentOptionsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",PROMOTION_CODE_LENGTH_ERROR_TITLE: "Promotion code cannot be more than 22 characters",PROMOTION_CODE_ALPHANUMERIC_ERROR_TITLE: "Promotion code can only have letters, numbers, and underscores",PAY_THE_DEPOSIT_AMOUNT: "Pay the Deposit Amount",PAY_THE_FULL_AMOUNT: "Pay the Full Amount",PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE: "Pay the Full Amount Credit Card",PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE: "Pay the Full Amount Credit Card Billing Address",PAY_THE_DEPOSIT_AMOUNT_CREDIT_CARD: "Pay the Deposit Amount Credit Card",PAY_THE_DEPOSIT_AMOUNT_BILLING_ADDRESS: "Pay the Deposit Amount Credit Card Billing Address",PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE: "Schedule Final Payment Credit Card",PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE: "Schedule Final Payment Credit Card Billing Address",STREET_LABEL: "Street",CITY_LABEL: "City",ZIP_LABEL: "Zip Code",ZIP_VALIDATION_ERROR_MESSAGE: "Zip Code is required.",ZIP_INVALID_ERROR_MESSAGE: "Zip Code must be 5 digits.",STATE_VALIDATION_ERROR_MESSAGE: "State is required.",PROVINCE_VALIDATION_ERROR_MESSAGE: "Province is required.",POSTAL_CODE_VALIDATION_ERROR_MESSAGE: "Postal Code is required.",CITY_VALIDATION_ERROR_MESSAGE: "City is required.",STREET_VALIDATION_ERROR_MESSAGE: "Street is required.",SELECT_TEXT: "Select",STATE_LABEL: "State",PROVINCE_LABEL: "Province",ZIPCODE_LABEL: "Zip Code",POSTALCODE_LABEL: "Postal Code",CREDIT_CARD_AMOUNT_INVALID_ERROR_MESSAGE: "Amount entered is not valid.",CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE: "Cardholder Name is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE: "Credit Card Number is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER: "Invalid number. At this time, we only accept Visa and MasterCard&reg;.",CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE: "Month of expiration is required.",CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE: "Year of expiration is required.",CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date entered is in the past.",SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date is before the scheduled date.",CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE: "CVV is required.",PRIMARY_PHONE_INVALID_ERROR_MESSAGE: "Phone number is required.",PRIMARY_PHONE_10_DIGIT_ERROR_MESSAGE: "Invalid phone number.",PRIMARY_EMAIL_INVALID_ERROR_MESSAGE: "Invalid email format.",PRIMARY_EMAIL_MISSING_ERROR_MESSAGE: "Email is required.",SCHEDULE_DATE_CALENDAR_LABEL: "Schedule date calendar",ONLY_3_CARDS_ALLOWED_ERROR_MESSAGE: "You are allowed only 3 credit cards",PAYMENT_OPTIONS_ERROR_COMMON: "Error",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",AMOUNT_INVALID_ERROR_MESSAGE: "Invalid Amount entered.",CARDHOLDER_NAME_INVALID_ERROR_MESSAGE: "Invalid Cardholder Name.",CARD_NUMBER_INVALID_ERROR_MESSAGE: "Invalid Credit Card Number.",CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE: "CVV must be 3 digits.",STREET_INVALID_ERROR_MESSAGE: "Invalid Street entered.",STREET2_INVALID_ERROR_MESSAGE: "Invalid Street2/Apt. entered.",CITY_INVALID_ERROR_MESSAGE: "Invalid City entered.",POSTAL_CODE_INVALID_ERROR_MESSAGE: "Invalid Postal Code.",ZIPCODE_INVALID_ERROR_MESSAGE: "Invalid Zip code.",EXT_INVALID_ERROR_MESSAGE: "Invalid Ext. number.",PHONE_NUMBER_INVALID_ERROR_MESSAGE: "Invalid phone number.",CREDIT_CARD_TEXT: "Credit Card"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {PAY_THE_FULL_AMOUNT_CREDIT_CARD : {sourceText: "Pay the Full Amount Credit Card $cardIndex",translatedText: "Pay the Full Amount Credit Card $cardIndex"},PAY_THE_FULL_AMOUNT_BILLING_ADDRESS : {sourceText: "Pay the Full Amount Credit Card $cardIndex Billing Address",translatedText: "Pay the Full Amount Credit Card $cardIndex Billing Address"},PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD : {sourceText: "Schedule Final Payment Credit Card $cardIndex",translatedText: "Schedule Final Payment Credit Card $cardIndex"},PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS : {sourceText: "Schedule Final Payment Credit Card $cardIndex Billing Address",translatedText: "Schedule Final Payment Credit Card $cardIndex Billing Address"},CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE : {sourceText: "Amount must be between $minAmount and $maxAmount",translatedText: "Amount must be between $minAmount and $maxAmount"},AMOUNT_IS_ZERO_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount.",translatedText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount."},AMOUNT_LESS_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount.",translatedText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount."},AMOUNT_GREATER_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal $maxAmount. You are currently over that amount by $diffAmount.",translatedText: "The total amount must equal $maxAmount. You are currently over that amount by $diffAmount."},TOTAL_AMOUNT_LESS_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal $maxAmount. You are currently short of that amount by $diffAmount.",translatedText: "The total amount for all Amount fields must equal $maxAmount. You are currently short of that amount by $diffAmount."},TOTAL_AMOUNT_GREATER_THAN_GROSS_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal $maxAmount. You are currently over that amount by $diffAmount.",translatedText: "The total amount for all Amount fields must equal $maxAmount. You are currently over that amount by $diffAmount."},SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE : {sourceText: "Scheduled Date is required.",translatedText: "Scheduled Date is required."},SCHEDULE_DATE_RANGE_ERROR_MESSAGE : {sourceText: "Scheduled date must be between $minDate and $maxDate.",translatedText: "Scheduled date must be between $minDate and $maxDate."},COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE : {sourceText: "Confirmation of shipping address for the Costco Shop Card(s) is required.",translatedText: "Confirmation of shipping address for the Costco Shop Card(s) is required."},PAYMENT_AMOUNT_CHANGE_CREDIT_CARD_TEXT : {sourceText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue.",translatedText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue."},CREDIT_CARD_ENUMERATED_TEXT : {sourceText: "Credit Card $creditCardIndex",translatedText: "Credit Card $creditCardIndex"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();
this.selector="#paymentOptions";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.packageRecap=$namespace.Modules.addView(this,$namespace.View.PaymentOptionsView,{module:this,numberOfCreditCardsForScheduledPayment:a.numberOfCreditCardsForScheduledPayment,numberOfCreditCardsForFullPayment:a.numberOfCreditCardsForFullPayment,isSchedulePayment:a.isSchedulePayment,maxCreditCards:a.maxCreditCards,grossAmount:a.grossAmount,depositAmount:a.depositAmount,creditCardsAmount:a.creditCardsAmount,
numberOfCreditCards:a.numberOfCreditCards,fromConfirmPaymentPage:a.fromConfirmPaymentPage,email:a.email,isPaymentWithinDueDays:a.isPaymentWithinDueDays,surveyDefinitionId:a.surveyDefinitionId,scheduledPaymentDate:a.scheduledPaymentDate,maxCreditCardExpiryYear:a.maxCreditCardExpiryYear})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.finalBookingConfirmationModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",VP_EMAIL_SENT_MESSAGE_TITLE: "Email Itinerary",VP_EMAIL_SENT_SUCCESSFUL_MESSAGE: "Booking Itinerary has been mailed to your email address."};var TranslationTexts = this.TranslationTexts;
;
this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#finalBookingConfirmation";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.finalBookingConfirmation=$namespace.Modules.addView(this,$namespace.View.FinalBookingConfirmationView,{module:this,destinationCode:a.destinationCode,regionCode:a.regionCode,packageId:a.packageId,
newBooking:a.newBooking})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.finalizeBookingSummaryModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",EDIT_FLIGHT_SEAT_SELECTION_BUTTON_TITLE: "Edit Seat Selections",ACTIVITIES_CARD_TITLE: "Activities",THEME_PARK_CARD_TITLE: "Theme Park Tickets",BOOKING_COMMON_ERROR_MODAL_TITLE: "Error",BOOKING_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",BOOKING_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=
function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#vpFinalizeBookingSummary";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.finalizeBookingSummaryView=$namespace.Modules.addView(this,$namespace.View.FinalizeBookingSummaryView,{module:this,gaParams:a.gaParams})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseStateroomSelectionModule=new function(){this.TranslationTexts={BED_SELECTION_REQUIRED: "Select a bedding configuration.",STATEROOM_DESCRIPTION_TEXT: "stateroom description"};var TranslationTexts = this.TranslationTexts;
;this.name="cruiseStateroomSelectionModule";this.active=!1;this.initialize=function(a){this.selector="#cruise-stateroom-selection";this.bindEventHandlers();this.cruiseStateroomSelectionView=
$namespace.Modules.addView(this,$namespace.View.CruiseStateroomSelectionView,{module:this})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseStateroomSelectionModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseStateroomSelectionModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.cruiseTravelerInfoModule=new function(){this.TranslationTexts={NEXT_STATEROOM: "Next Stateroom",CONTINUE_TO_SPECIAL_REQUEST_TEXT: "Continue to Special Requests",SELECTED_TEXT: "Selected",NOT_SELECTED_TEXT: "not selected",REQUIRED_TITLE: "Title is required.",INVALID_TITLE: "Title is Invalid.",REQUIRED_FIRST_NAME: "First Name is required.",INVALID_FIRST_NAME: "First Name Is Invalid.",REQUIRED_LAST_NAME: "Last Name is required.",INVALID_LAST_NAME: "Last Name is Invalid.",INVALID_MIDDLE_INITIAL_NAME: "Middle Name/Initial is Invalid.",REQUIRED_GENDER: "Gender is required.",REQUIRED_CITIZENSHIP: "Citizenship is required.",INVALID_CITIZENSHIP: "Citizenship is invalid.",REQUIRED_DOB_DAY: "Day of Date of Birth is required.",REQUIRED_DOB_MONTH: "Month of Date of Birth is required.",REQUIRED_DOB_YEAR: "Year of Date of Birth is required.",INVALID_DOB: "Date of Birth is invalid.",TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE: "The last name should contain at least 2 characters.",TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE: "Please verify that the date of birth entered for this traveler is correct. The age does not match the type for the traveler.",TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE: "Date of birth cannot be a future date.",TRAVELER_CHILDREN_DOB_CRUISE_VALIDATION_ERROR_MESSAGE: "There is a discrepancy between the age provided at search and the date of birth. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_CHILDREN_DOB_AIRLINE_VALIDATION_ERROR_MESSAGE: "There is a discrepancy between the age provided at search and the date of birth. Airlines are very strict about birthdates and ages. Change fees may apply if the PNR is incorrect. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",INFANT_CRUISE_LINE_POLICIES_ERROR_MESSAGE: "Policies regarding infants vary by cruise line. In all cases, infants may not be booked prior to their official date of birth and must be at least six months old at time of sailing. If you wish to add an infant to your booking, you must do so prior to making final payment. For assistance, please call Costco Travel at $phoneNumber.",TERMS_AND_CONDITIONS_ERROR_MESSAGE: "Terms & Conditions is required.",TRAVELER_ERROR_COMMON: "Error",INVALID_GENDER: "Gender is invalid.",CONTINUE_TO_FLIGHT_SEAT_SELECTION_TEXT: "Continue to Flight Seat Selection",INVALID_PAST_PASSENGER_NUMBER: "Past Passenger Number is Invalid.",INVALID_SUFFIX: "Suffix is invalid.",REQUIRED_GENDER_TITLE: "Selected title and gender is mismatch.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE: "There is a discrepancy between the age provided at search and the date of birth. Airlines are very strict about birthdates and ages. Change fees may apply if the PNR is incorrect. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT: "There is a discrepancy between the age provided at search and the date of birth. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE: "Must be alphanumeric only.",TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE: "Must be 7 digits, numbers only.",KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE: "Must be 9 characters, alphanumeric only."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {TRAVELER_ERROR_MESSAGE : {sourceText: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at $phoneNumber so we may assist you with the booking.",translatedText: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at $phoneNumber so we may assist you with the booking."}};var TranslationMessages = this.TranslationMessages;this.name="cruiseTravelerInfoModule";this.active=!1;this.initialize=function(a){a=
a||{};this.selector="#cruiseTravelerInfo";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.travelerInfoView=$namespace.Modules.addView(this,$namespace.View.cruiseTravelerInfoView,{module:this,referenceDate:a.referenceDate,departureDate:a.departureDate,returnDate:a.returnDate,isFlightSelected:a.isFlightSelected,cruiseSearchFromOfferPage:a.cruiseSearchFromOfferPage})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};
this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.cruiseTravelerInfoModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.cruiseTravelerInfoModule.resize()})};this.isActive=function(){return $(this.selector).length};this.showTermsAndConditionsError=function(a){if(a){a.addClass("darkRedLabel");$(".termsAndConditions-text-and-links").addClass("darkRedLabel error");$(".termsAndConditions-link").addClass("darkRedLabel error");
var b="terms_and_conditions_check_is_required_stateroom_"+$(".stateroomTab").attr("data-bookingindex");this.travelerInfoView.addAndTrackFormError(a,$namespace.MessageUtil.prefixError(this.TranslationTexts.TERMS_AND_CONDITIONS_ERROR_MESSAGE),b);a.focus()}}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultyCityPackageOverviewModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",VACATION_PACKGE_TOUR_POPUP_ERROR_TITLE: "Tour Error",VACATION_PACKGE_HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",VACATION_PACKGE_HOTEL_DETAIL_POPUP_ERROR_TITLE: "Hotel Detail Error",VACATION_PACKGE_ITINERARY_REMARKS_POPUP_ERROR_TITLE: "Itinerary Remarks Error",ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE: "Select a date for this Activity.",ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE: "Select a time for this Activity.",TRANSFER_AIRPORT_ERROR_MESSAGE: "Select a Airport for Transfer.",RENTAL_CAR_PICK_DROP_TIME_ERROR_MESSAGE: "Select a time for Car.",FERRY_UNAVAILABLE: "Ferry is not available for the date(s) you are searching. Please change your dates and search again.",RAIL_UNAVAILABLE: "Rail is not available for the date(s) you are searching. Please change your dates and search again.",FLIGHT_WARNING_TITLE: "Flight Warning",FLIGHT_WARNING_CONTINUE_TEXT: "Continue",FLIGHT_CHANGED_WARNING_MESSAGE: "One or more flights in this package cannot be confirmed by the airline. Those flights have been replaced. Please note, the price may have changed."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCityPackageOverview";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multiCityPackageOverviewView=$namespace.Modules.addView(this,
$namespace.View.MultiCityPackageOverviewView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.flightResultsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",SHOW_MORE_BUTTON_TEXT: "Show More Flights",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $amount More Flights",MATCHING_FLIGHTS_SINGULAR: "1 Matching Flight",MATCHING_FLIGHTS_PLURAL: "$resultNumber Matching Flights",MOVE_TO_NEXT_CHECKBOX_TEXT: "Moved the focus to the next checkbox",RESULT_TEXT_SINGULAR: "(1 result)",RESULT_TEXT_PLURAL: "($resultNumber results)",SORTED_BY_BEST_VALUE: "Flights sorted by Best Value",SORTED_BY_PRICE: "Flights sorted by Price",SORTED_BY_COSTCO_RECOMMENDS: "Flights sorted by Costco Recommends",DORTED_BY_SHORTEST_SLIGHT: "Flights sorted by Shortest Flight",SORTED_BY_DEPARTURE_TIME: "Flights sorted by Departure Time",SORTED_BY_ARRIVAL_TIME: "Flights sorted by Arrival Time",CHANGED_TO_TEXT: "Changed to",FLIGHT_WARNING_TITLE: "Flight Warning",FLIGHT_WARNING_CONTINUE_TEXT: "Continue",FLIGHT_CHANGED_WARNING_MESSAGE: "One or more flights in this package cannot be confirmed by the airline. Those flights have been replaced. Please note, the price may have changed."};var TranslationTexts = this.TranslationTexts;
;
this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#multiCityFlights";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.flightResultsView=$namespace.Modules.addView(this,$namespace.View.flightResultsView,{module:this,destinationCode:a.destinationCode,regionCode:a.regionCode,packageId:a.packageId})};this.isActive=
function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseSpecialRequestPageModule=new function(){this.TranslationTexts={DINING_REQUEST_REQUIRED: "Select dining preference.",DINING_TABLE_SIZE_REQUIRED: "Select a table size.",YEARS_CELEBRATING_BIRTHDAY: "Enter years celebrating birthday.",YEARS_CELEBRATING_ANNIVERSARY: "Enter years celebrating anniversary.",CRUISE_SPECIAL_REQUEST_PAGE_TITLE: "Cruise Special Requests - Cruises | Costco Travel",ANNIVERSARY_DATES_MISMATCH: "For Anniversary, the date must match for each guest.",SELECTED_TEXT: "Selected",NOT_SELECTED_TEXT: "not selected",ANNIVERSARY_YEARS_MISMATCH: "For Anniversary, the number of years must match for each guest.",DINING_OPTIONS_REQUIRED: "Select a dining requests above.",INVALID_ANNIVERSARY_DATE: "Invalid Anniversary date.",INVALID_BIRTHDAY_DATE: "Invalid birthday date.",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists.",INVALID_DINING_REQUEST: "Invalid Dining Request.",INVALID_TABLE_SIZE: "Invalid Table Size."};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseSpecialRequestPageModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#cruise-package-special-request-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruiseSpecialRequest=$namespace.Modules.addView(this,$namespace.View.CruiseSpecialRequestPageView,{module:this,isTransportationIncluded:a.isTransportationIncluded,isPreHotelIncluded:a.isPreHotelIncluded,
isPostHotelIncluded:a.isPostHotelIncluded})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseSpecialRequestPageModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseSpecialRequestPageModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseOfferPageModule=new function(){this.TranslationTexts={MESSAGE_TITLE_ACKNOWLEDGEMENT: "Acknowledgements",BUTTON_TITLE_I_UNDERSTAND: "I Understand",CURRENCY_CONVERSION_WARNING_HEADER: "Payment Currency and Transaction Fees <br />",CURRENCY_CONVERSION_WARNING_MESSAGE: "The cruise line you selected only accepts payment in U.S. dollars. On subsequent pages, all prices for this cruise line will be displayed and charged in U.S. dollars.<br /><br />Foreign transaction fees may apply. For more information, consult your credit card company.",COMMON_ERROR_MODAL_TITLE: "Error",ACTION_ERROR: "We are currently unable to perform this action. Please try again later. Call <div class='nowrap displayInline'>$phoneNumber</div> if the problem persists."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();
this.selector="#cruise-offer-page";this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.CruiseOfferPageView,{module:this,destinationCode:a.destinationCode,cruiseLineCode:a.cruiseLineCode,shipName:a.shipName,packageId:a.packageId,showError:a.showError,loginFocus:a.loginFocus,lowestLeadInPriceWhichIncludesTaxesAsNeeded:a.lowestLeadInPriceWhichIncludesTaxesAsNeeded})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseBookingRecapModule=new function(){this.name="CruiseBookingRecapModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#cruise-booking-recap-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruiseBookingRecap=$namespace.Modules.addView(this,$namespace.View.CruiseBookingRecapView,{module:this,destinationCode:a.destinationCode,cruiseLineCode:a.cruiseLineCode,shipName:a.shipName,sailingDate:a.sailingDate})};
this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseBookingRecapModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseBookingRecapModule.resize()})};this.isActive=function(){return $(this.selector).length}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultyCityActivityModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",ACTIVITY_DATE_CONFIRMATION_ERROR_MESSAGE: "Select a date for this Activity.",ACTIVITY_TIME_CONFIRMATION_ERROR_MESSAGE: "Select a time for this Activity.",ACTIVITY_SORTED_BY_PRICE: "activities sorted by price.",ACTIVITY_SORTED_BY_NAME: "activities sorted by name."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {ACTIVITY_VALIDATION_ERROR_TIME_IS_MISSING : {sourceText: "One or more of your included activities requires a time to be selected. Select the 'Edit' button to pick a time for the included activities.",translatedText: "One or more of your included activities requires a time to be selected. Select the 'Edit' button to pick a time for the included activities."},ACTIVITY_VALIDATION_ERROR_MANDATORY_NO_OF_TOURS : {sourceText: "This package requires a selection of at least $noOfActivity Activity item(s)",translatedText: "This package requires a selection of at least $noOfActivity Activity item(s)"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCityActivity";
this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.activityView=$namespace.Modules.addView(this,$namespace.View.MultiCityActivityView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CityHotelResultsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",KEEP_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection",MODIFY_ROOM_BUTTON_TEXT: "Modify Room",ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT: "Modify room $roomNumber",ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection for room $roomNumber",HOTEL_ROOM_CHANGE_MODAL_TITLE: "Confirm Hotel Room Change",HOTEL_CHANGE_MODAL_TITLE: "Confirm Hotel Change",HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE: "This change will <strong>add <span data-test='priceChangeDifference'>$priceChange</span></strong> to your total package price.",HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE: "This change will <strong>subtract <span data-test='priceChangeDifference'>$priceChange</span></strong> from your total package price.",SHOW_MORE_HOTELS_BUTTON_TEXT: "Show More Hotels",SHOW_5_MORE_HOTELS_BUTTON_TEXT: "Show 5 More Hotels",NEW_HOTEL_SELECTED: "New Hotel Selected",SORTED_BY_COSTCO_RECOMMENDS: "Hotels sorted by Costco Recommends",SORTED_BY_NAME: "Hotels sorted by Name",SORTED_BY_PRICE: "Hotels sorted by Price",SORTED_BY_TRAVEL_RATING: "Hotels sorted by Travel Rating",SORTED_BY_MEMBER_RATING: "Hotels sorted by Member Rating",ADDITIONAL_HOTELS_LOADING_ERROR_TITLE: "Error Loading Additional Hotels.",HOTEL_ROOM_CHANGE_MODAL_TITLE_DETAIL: "Changing your Hotel Room may impact the pricing of other components in your vacation package.",HOTEL_CHANGE_MODAL_TITLE_DETAIL: "Changing your Hotel may impact the pricing of other components in your vacation package.",ACCESSIBILITY_SELECTED_LIST_VIEW: "Switched to list view",ACCESSIBILITY_SELECTED_MAP_VIEW: "Switched to map view",MEMBER_REVIEW_SORT_TYPE: "Costco Member Review"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCityHotelResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cityHotelResultsView=$namespace.Modules.addView(this,$namespace.View.CityHotelResultsView,
{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCityTravelerInfoModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",TERMS_AND_CONDITIONS_ERROR_MESSAGE: "Terms & Conditions is required.",TRAVELER_ERROR_COMMON: "Error",TRAVELER_TITLE_ERROR_MESSAGE: "Title is required.",TRAVELER_FIRST_NAME_ERROR_MESSAGE: "First Name is required.",TRAVELER_LAST_NAME_ERROR_MESSAGE: "Last Name is required.",TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE: "The last name should contain at least 2 characters.",TRAVELER_GENDER_ERROR_MESSAGE: "Gender is required.",TRAVELER_DOB_MONTH_ERROR_MESSAGE: "Month of Date of Birth is required.",TRAVELER_DOB_DAY_ERROR_MESSAGE: "Day of Date of Birth is required.",TRAVELER_DOB_YEAR_ERROR_MESSAGE: "Year of Date of Birth is required.",TRAVELER_ADULT_DOB_VALIDATION_ERROR_MESSAGE: "Please verify that the date of birth entered for this traveler is correct. The age does not match the type for the traveler.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE: "There is a discrepancy between the age provided at search and the date of birth. Airlines are very strict about birthdates and ages. Change fees may apply if the PNR is incorrect. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_CHILDREN_DOB_VALIDATION_ERROR_MESSAGE_WITHOUT_FLIGHT: "There is a discrepancy between the age provided at search and the date of birth. Please correct the date of birth. If the date of birth is correct, please return to the search screen and correct the age.",TRAVELER_FUTURE_DOB_VALIDATION_ERROR_MESSAGE: "Date of birth cannot be a future date.",TRAVELER_FREQUENT_FLYER_AIRLINE_ERROR_MESSAGE: "Airline must be selected.",TRAVELER_NUMBER_ALPHANUMERIC_ERROR_MESSAGE: "Must be alphanumeric only.",TRAVELER_REDRESS_NUMBER_ERROR_MESSAGE: "Must be 7 digits, numbers only.",KNOWN_TRAVELER_NUMBER_ERROR_MESSAGE: "Must be 9 characters, alphanumeric only.",TRAVELER_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",INVALID_TITLE: "Title is Invalid.",INVALID_FIRST_NAME: "First Name Is Invalid.",INVALID_MIDDLE_INITIAL_NAME: "Middle Name/Initial is Invalid.",INVALID_LAST_NAME: "Last Name is Invalid.",INVALID_SUFFIX: "Suffix is invalid.",INVALID_GENDER: "Gender is invalid.",INVALID_DOB: "Date of Birth is invalid.",TRAVELER_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",TRAVELER_NAME_MAX_CHARACTERS_MESSAGE: "Title,first name,middle name,last name and suffix all together should not cross 100 characters."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){};this.initialize=function(a){a=
a||{};this.bindEventHandlers();this.selector="#multiCityTravelerInfo";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.travelerInfoView=$namespace.Modules.addView(this,$namespace.View.MultiCityTravelerInfoView,{module:this,totalRooms:a.totalRooms,adultThresholdAge:a.adultThresholdAge,referenceDate:a.referenceDate,departureDate:a.departureDate,returnDate:a.returnDate})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=
function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.InterCityFilghtResultsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",SHOW_MORE_BUTTON_TEXT: "Show More Flights",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $amount More Flights",MATCHING_FLIGHTS_SINGULAR: "1 Matching Flight",MATCHING_FLIGHTS_PLURAL: "$resultNumber Matching Flights",MOVE_TO_NEXT_CHECKBOX_TEXT: "Moved the focus to the next checkbox",RESULT_TEXT_SINGULAR: "(1 result)",RESULT_TEXT_PLURAL: "($resultNumber results)",SORTED_BY_BEST_VALUE: "Flights sorted by Best Value",SORTED_BY_PRICE: "Flights sorted by Price",SORTED_BY_SHORTEST_FLIGHT: "Flights sorted by Shortest Flight",SORTED_BY_DEPARTURE_TIME: "Flights sorted by Departure Time",SORTED_BY_COSTCO_RECOMMENDS: "Flights sorted by Costco Recommends",SORTED_BY_ARRIVAL_TIME: "Flights sorted by Arrival Time",FLIGHT_WARNING_TITLE: "Flight Warning",FLIGHT_WARNING_CONTINUE_TEXT: "Continue",FLIGHT_CHANGED_WARNING_MESSAGE: "One or more flights in this package cannot be confirmed by the airline. Those flights have been replaced. Please note, the price may have changed."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};
this.close=function(){};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#interCityFlightResult";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.interCityFlightResultsView=$namespace.Modules.addView(this,$namespace.View.InterCityFlightResultsView,{module:this,destinationCode:a.destinationCode,regionCode:a.regionCode,packageId:a.packageId})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=
function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.TransportationResultsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCityTransportationResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multicityTransportation=
$namespace.Modules.addView(this,$namespace.View.TransportationResultsView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.finalBookingSpecialRequestModule=new function(){this.TranslationTexts={SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#specialRequestsPopupDiv";this.finalBookingSpecialRequestView=$namespace.Modules.addView(this,$namespace.View.finalBookingSpecialRequestView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.multiCityFlightSeatSelectionModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",CONTINUE: "Continue",CONTINUE_TO_NEXT_FLIGHT: "Continue to Next Flight",TEXT_SEAT: "Seat",TEXT_AVAILABLE: "Available",TEXT_SELECTED_FOR_PASSENGER: "selected for passenger",TEXT_SEAT_NUMBER: "Seat Number",ACKNOWLEDGEMENT_MODAL_TITLE: "Acknowledgement",SEAT_NOT_SELECTED_FOR_ALL_PASSENGER: "Not all passengers have assigned seats. Continue without assigning seats?",TEXT_LAVATORY_ICON: "Lavatory Icon",TEXT_GALLEY_ICON: "Galley Icon",TEXT_CLOSET_ICON: "Closet Icon"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#multiCityFlightSeatSelection";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multiCityFlightSeatSelectionView=
$namespace.Modules.addView(this,$namespace.View.MultiCityFlightSeatSelectionView,{module:this,gaParams:a.gaParams,passengerInfoJSON:a.passengerInfoJSON,seatsPreferred:a.seatsPreferred})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCitySpecialRequestsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required.",SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED: "In order to better accommodate your needs, we need a description of the type(s) of accessible features needed.",SPECIAL_REQUESTS_ERROR_COMMON: "Error",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",SPECIAL_REQUESTS_RAIL_DEPARTING_TIME_OPTION_ERROR_MESSAGE: "Rail Preferred Times should have different timings, Please select different timings."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=
function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCitySpecialRequests";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multiCitySpecialRequestsView=$namespace.Modules.addView(this,$namespace.View.MultiCitySpecialRequestsView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCityPaymentOptionsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",PROMOTION_CODE_LENGTH_ERROR_TITLE: "Promotion code cannot be more than 22 characters",PROMOTION_CODE_ALPHANUMERIC_ERROR_TITLE: "Promotion code can only have letters, numbers, and underscores",PAY_THE_DEPOSIT_AMOUNT: "Pay the Deposit Amount",PAY_THE_FULL_AMOUNT: "Pay the Full Amount",PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE: "Pay the Full Amount Credit Card",PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE: "Pay the Full Amount Credit Card Billing Address",PAY_THE_DEPOSIT_AMOUNT_CREDIT_CARD: "Pay the Deposit Amount Credit Card",PAY_THE_DEPOSIT_AMOUNT_BILLING_ADDRESS: "Pay the Deposit Amount Credit Card Billing Address",PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE: "Schedule Final Payment Credit Card",PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE: "Schedule Final Payment Credit Card Billing Address",STREET_LABEL: "Street",CITY_LABEL: "City",ZIP_LABEL: "Zip Code",ZIP_VALIDATION_ERROR_MESSAGE: "Zip Code is required.",ZIP_INVALID_ERROR_MESSAGE: "Zip Code must be 5 digits.",STATE_VALIDATION_ERROR_MESSAGE: "State is required.",PROVINCE_VALIDATION_ERROR_MESSAGE: "Province is required.",POSTAL_CODE_VALIDATION_ERROR_MESSAGE: "Postal Code is required.",CITY_VALIDATION_ERROR_MESSAGE: "City is required.",STREET_VALIDATION_ERROR_MESSAGE: "Street is required.",SELECT_TEXT: "Select",STATE_LABEL: "State",PROVINCE_LABEL: "Province",ZIPCODE_LABEL: "Zip Code",POSTALCODE_LABEL: "Postal Code",CREDIT_CARD_AMOUNT_INVALID_ERROR_MESSAGE: "Amount entered is not valid.",CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE: "Cardholder Name is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE: "Credit Card Number is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER: "Invalid number. At this time, we only accept Visa and MasterCard&reg;.",CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE: "Month of expiration is required.",CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE: "Year of expiration is required.",CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date entered is in the past.",SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date is before the scheduled date.",CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE: "CVV is required.",PRIMARY_PHONE_INVALID_ERROR_MESSAGE: "Phone number is required.",PHONE_10_DIGIT_ERROR_MESSAGE: "Invalid phone number.",EMAIL_INVALID_ERROR_MESSAGE: "Invalid email format.",PRIMARY_EMAIL_MISSING_ERROR_MESSAGE: "Email is required.",SCHEDULE_DATE_CALENDAR_LABEL: "Schedule date calendar",SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE: "Scheduled Date is required.",SCHEDULE_DATE_INVALID_ERROR_MESSAGE: "Invalid date.",ONLY_3_CARDS_ALLOWED_ERROR_MESSAGE: "You are allowed only 3 credit cards",PAYMENT_OPTIONS_ERROR_COMMON: "Error",COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE: "Confirmation of shipping address for the Costco Shop Card(s) is required.",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",AMOUNT_INVALID_ERROR_MESSAGE: "Invalid Amount entered.",CARDHOLDER_NAME_INVALID_ERROR_MESSAGE: "Invalid Cardholder Name.",CARD_NUMBER_INVALID_ERROR_MESSAGE: "Invalid Credit Card Number.",CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE: "CVV must be 3 digits.",STREET_INVALID_ERROR_MESSAGE: "Invalid Street entered.",STREET2_INVALID_ERROR_MESSAGE: "Invalid Street2/Apt. entered.",CITY_INVALID_ERROR_MESSAGE: "Invalid City entered.",POSTAL_CODE_INVALID_ERROR_MESSAGE: "Invalid Postal Code.",ZIPCODE_INVALID_ERROR_MESSAGE: "Invalid Zip code.",EXT_INVALID_ERROR_MESSAGE: "Invalid Ext. number.",PHONE_NUMBER_INVALID_ERROR_MESSAGE: "Invalid phone number.",CREDIT_CARD_LABEL: "Credit Card"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {PAY_THE_FULL_AMOUNT_CREDIT_CARD : {sourceText: "Pay the Full Amount Credit Card $cardIndex",translatedText: "Pay the Full Amount Credit Card $cardIndex"},PAY_THE_FULL_AMOUNT_BILLING_ADDRESS : {sourceText: "Pay the Full Amount Credit Card $cardIndex Billing Address",translatedText: "Pay the Full Amount Credit Card $cardIndex Billing Address"},PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD : {sourceText: "Schedule Final Payment Credit Card $cardIndex",translatedText: "Schedule Final Payment Credit Card $cardIndex"},PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS : {sourceText: "Schedule Final Payment Credit Card $cardIndex Billing Address",translatedText: "Schedule Final Payment Credit Card $cardIndex Billing Address"},CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE : {sourceText: "Amount must be between $minAmount and $maxAmount",translatedText: "Amount must be between $minAmount and $maxAmount"},AMOUNT_IS_ZERO_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount.",translatedText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount."},AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},SCHEDULE_DATE_RANGE_ERROR_MESSAGE : {sourceText: "Scheduled date must be between $minDate and $maxDate.",translatedText: "Scheduled date must be between $minDate and $maxDate."},PAYMENT_AMOUNT_CHANGE_CREDIT_CARD_TEXT : {sourceText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue.",translatedText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue."},CREDIT_CARD_ENUMERATED_TEXT : {sourceText: "Credit Card $creditCardIndex",translatedText: "Credit Card $creditCardIndex"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.options=a||{};this.bindEventHandlers();this.selector="#multiCityPaymentOptions";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.MultiCityPaymentOptionsView=$namespace.Modules.addView(this,$namespace.View.MultiCityPaymentOptionsView,{module:this,scheduledDueDate:this.options.scheduledDueDate,
grossPaymentAmount:this.options.grossPaymentAmount,minimumDepositAmount:this.options.minimumDepositAmount})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCityFinalizeBookingModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error"};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCityFinalizeBooking";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.multiCityFinalizeBookingView=
$namespace.Modules.addView(this,$namespace.View.MultiCityFinalizeBookingView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCityFinalBookingConfirmationModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",VP_EMAIL_SENT_MESSAGE_TITLE: "Email Itinerary",VP_EMAIL_SENT_SUCCESSFUL_MESSAGE: "Booking Itinerary has been mailed to your email address."};var TranslationTexts = this.TranslationTexts;
;
this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#multiCityFinalBookingConfirmation";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this,destinationCode:a.destinationCode,regionCode:a.regionCode,packageId:a.packageId});this.finalBookingConfirmationView=$namespace.Modules.addView(this,$namespace.View.MultiCityFinalBookingConfirmationView,
{module:this,destinationCode:a.destinationCode,regionCode:a.regionCode,packageId:a.packageId})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.VacationPackageBrowsePageModule=new function(){this.TranslationTexts={HOTEL_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {HOTEL_CAROUSEL_POPUP_ERROR_MESSAGE : {sourceText: "No hotel image found for the selected hotel.",translatedText: "No hotel image found for the selected hotel."}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};
this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#vacation-package-browse-page";this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.VacationPackageBrowsePageView,{module:this,destination:a.destination,area:a.area,region:a.region,destinationCode:a.destinationCode,regionCode:a.regionCode,locationCode:a.locationCode})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.cruiseAccountBookingConfirmationModule=new function(){this.TranslationTexts={EMAIL_SENT_MESSAGE_TITLE: "Email Itinerary",EMAIL_SENT_SUCCESSFUL_MESSAGE: "Booking Itinerary has been mailed to your email address.",SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required."};var TranslationTexts = this.TranslationTexts;
;this.name="cruiseAccountBookingConfirmationModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#cruiseAccountBookingConfirmation";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,
{module:this});this.offerDetails=$namespace.Modules.addView(this,$namespace.View.cruiseAccountBookingConfirmationView,{module:this,cruiseLineName:a.cruiseLineName,sailingId:a.sailingId,destinationName:a.destinationName})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.cruiseAccountBookingConfirmationModule.resize()})};this.unbindEventHandlers=
function(){$(window).off("resize orientationchange",function(){$namespace.cruiseAccountBookingConfirmationModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseLineContentModule=new function(){this.TranslationTexts={SORTED_BY_ALPHABETICALLY: "Ships sorted by Alphabetically",SORTED_BY_SHIP_RATING: "Ships sorted by Ship Rating",SORTED_BY_COSTCO_MEMBER_RATING: "Ships sorted by Costco Member Rating"};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseLineContentModule";
this.initialize=function(a){a=a||{};this.cruiseLineContentView=$namespace.Modules.addView(this,$namespace.View.CruiseLineContentView,{module:this,cruiseLineCode:a.cruiseLineCode,cruiseLineName:a.cruiseLineName})};this.close=function(){$namespace.Modules.closeViews(this)}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseDestinationContentModule=new function(){this.name="CruiseDestinationContentModule";this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#cruise-destination-page";this.cruiseDestinationContentView=$namespace.Modules.addView(this,$namespace.View.CruiseDestinationContentView,{module:this,cruiseDestination:a.cruiseDestination})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.isActive=function(){return $(this.selector).length};
this.bindEventHandlers=function(){};this.unbindEventHandlers=function(){}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ManagePaymentsModule=new function(){this.TranslationTexts={SCHEDULE_DATE_INVALID_ERROR_MESSAGE: "Invalid date.",REVIEW_DETAILS: "Review Details",COMPLETE_BOOKING: "Complete Booking",GO_TO_ACCOUNT: "Go To Your Account",STATE_LABEL: "State",PROVINCE_LABEL: "Province",ZIPCODE_LABEL: "Zip Code",POSTALCODE_LABEL: "Postal Code",SELECT_TEXT: "Select",CREDIT_CARD_LABEL: "Credit Card",ZIP_VALIDATION_ERROR_MESSAGE: "Zip Code is required.",ZIP_INVALID_ERROR_MESSAGE: "Zip Code must be 5 digits.",STATE_VALIDATION_ERROR_MESSAGE: "State is required.",PROVINCE_VALIDATION_ERROR_MESSAGE: "Province is required.",POSTAL_CODE_VALIDATION_ERROR_MESSAGE: "Postal Code is required.",POSTAL_CODE_INVALID_ERROR_MESSAGE: "Invalid Postal Code.",CITY_VALIDATION_ERROR_MESSAGE: "City is required.",CITY_INVALID_ERROR_MESSAGE: "Invalid City entered.",STREET_VALIDATION_ERROR_MESSAGE: "Street is required.",STREET_INVALID_ERROR_MESSAGE: "Invalid Street entered.",STREET2_INVALID_ERROR_MESSAGE: "Invalid Street2/Apt. entered.",CREDIT_CARD_AMOUNT_INVALID_ERROR_MESSAGE: "Amount entered is not valid.",CARDHOLDER_NAME_INVALID_ERROR_MESSAGE: "Invalid Cardholder Name.",CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE: "Cardholder Name is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE: "Credit Card Number is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER: "Invalid number. At this time, we only accept Visa and MasterCard&reg;.",CARD_NUMBER_INVALID_ERROR_MESSAGE: "Invalid Credit Card Number.",CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE: "Month of expiration is required.",CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE: "Year of expiration is required.",CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date entered is in the past.",SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date is before the scheduled date.",CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE: "CVV is required.",CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE: "CVV must be 3 digits.",PRIMARY_PHONE_INVALID_ERROR_MESSAGE: "Phone number is required.",PHONE_10_DIGIT_ERROR_MESSAGE: "Invalid phone number.",EMAIL_INVALID_ERROR_MESSAGE: "Invalid email format.",PRIMARY_EMAIL_MISSING_ERROR_MESSAGE: "Email is required.",EXT_INVALID_ERROR_MESSAGE: "Invalid Ext. number.",SCHEDULE_DATE_CALENDAR_LABEL: "Schedule date calendar",CONTINUE_BUTTON_ERROR_MESSAGE: "You must make a change to your credit card or billing address before you can continue.",CONTINUE_TO_COMPLETE_PAYMENT: "Complete Payment",CONTINUE_TO_SUBMIT_UPDATE: "Submit Update"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE : {sourceText: "Scheduled Date is required.",translatedText: "Scheduled Date is required."},SCHEDULE_DATE_RANGE_ERROR_MESSAGE : {sourceText: "Scheduled date must be between $minDate and $maxDate.",translatedText: "Scheduled date must be between $minDate and $maxDate."},CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE : {sourceText: "Amount must be between <span class=\"nowrap\">$minAmount</span> and <span class=\"nowrap\">$maxAmount</span>.",translatedText: "Amount must be between <span class=\"nowrap\">$minAmount</span> and <span class=\"nowrap\">$maxAmount</span>."},CONTINUE_TO_STATEROOM : {sourceText: "Continue to Stateroom $stateroomNumber",translatedText: "Continue to Stateroom $stateroomNumber"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.options=a||{};this.bindEventHandlers();this.selector="#managePayments";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruisePayments=$namespace.Modules.addView(this,$namespace.View.ManagePaymentsView,
{module:this,scheduledDueDate:this.options.scheduledDueDate,grossPaymentAmount:this.options.grossPaymentAmount})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseSuperBookingPrePostCruiseHotelModule=new function(){this.name="CruiseSuperBookingPrePostCruiseHotelModule";this.isPageViewGALogged=this.active=!1;this.TranslationTexts={HOTELS_PAGE_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",SHOW_MORE_HOTELS_BUTTON_TEXT: "Show More Hotels",SHOW_5_MORE_HOTELS_BUTTON_TEXT: "Show 5 More Hotels",NEW_HOTEL_SELECTED: "New Hotel Selected",SORTED_BY_COSTCO_RECOMMENDS: "Hotels sorted by Costco Recommends",SORTED_BY_NAME: "Hotels sorted by Name",SORTED_BY_PRICE: "Hotels sorted by Price",SORTED_BY_TRAVEL_RATING: "Hotels sorted by Travel Rating",SORTED_BY_MEMBER_RATING: "Hotels sorted by Member Rating",HOTEL_ROOM_CHANGE_MODAL_TITLE: "Confirm Hotel Room Change",MEMBER_REVIEW_SORT_TYPE: "Costco Member Review",HOTEL_CHANGE_MODAL_TITLE: "Confirm Hotel Change",HOTEL_CHANGE_MODAL_NEW_TOTAL_PRICE_LABEL: "New Total Price:",HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE: "This change will <strong>add <span data-test='priceChangeDifference'>$priceChange</span></strong> to your total price.",HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE: "This change will <strong>subtract <span data-test='priceChangeDifference'>$priceChange</span></strong> from your total price.",MODIFY_ROOM_BUTTON_TEXT: "Modify Room",KEEP_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection",ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT: "Modify room $roomNumber",ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection for room $roomNumber"};var TranslationTexts = this.TranslationTexts;
;this.initialize=function(a){a=a||{};this.selector="#super-booking-cruise-hotel-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruiseSuperBookingHotel=$namespace.Modules.addView(this,$namespace.View.CruiseSuperBookingPrePostCruiseHotelView,{module:this,destinationCode:a.destinationCode,cruiseLineCode:a.cruiseLineCode,
shipName:a.shipName,sailingDate:a.sailingDate,pageType:a.pageType})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseSuperBookingPrePostCruiseHotelModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseHotelSpecialRequestModule=new function(){this.name="CruiseHotelSpecialRequestModule";this.active=!1;this.TranslationTexts={SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED: "In order to better accommodate your needs, we need a description of the type(s) of accessible features needed.",SPECIAL_REQUESTS_ERROR_COMMON: "Error",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required."};var TranslationTexts = this.TranslationTexts;
;this.initialize=function(a){a=a||{};this.selector="#cruise-hotel-special-request-page";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruiseHotelSpecialRequest=$namespace.Modules.addView(this,$namespace.View.CruiseHotelSpecialRequestView,{module:this,destinationCode:a.destinationCode,cruiseLineCode:a.cruiseLineCode,shipName:a.shipName,sailingDate:a.sailingDate})};this.close=function(){this.unbindEventHandlers();
$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseHotelSpecialRequestModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseHotelSpecialRequestModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseShipContentModule=new function(){this.name="CruiseShipContentModule";this.initialize=function(a){a=a||{};this.cruiseShipContentView=$namespace.Modules.addView(this,$namespace.View.CruiseShipContentView,{module:this,cruiseLineCode:a.cruiseLineCode,shipName:a.shipName,cruiseLineName:a.cruiseLineName})};this.close=function(){$namespace.Modules.closeViews(this)}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.SiteMapContentModule=new function(){this.name="SiteMapContentModule";this.initialize=function(a){this.siteMapContentView=$namespace.Modules.addView(this,$namespace.View.SiteMapContentView,{module:this})};this.close=function(){$namespace.Modules.closeViews(this)}};

	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HotelOnlySearchResultsModule=new function(){this.TranslationTexts={HOTELS_PAGE_CAROUSEL_POPUP_ERROR_MESSAGE: "No hotel image found for the selected hotel.",HOTELS_PAGE_CAROUSEL_POPUP_ERROR_TITLE: "Hotel Image Error",PAGED_SEARCH_RESULT_LOADING_ERROR_TITLE: "Error Loading Search Results",SHOW_MORE_BUTTON_TEXT: "Show More Results",SHOW_MORE_RESULTS_BUTTON_TEXT: "Show $count More Results",SORTED_BY_DISTANCE: "Sort by Distance - Closest To Farthest.",SORTED_BY_PRICE_ASC: "Sort by Price - Low To High.",SORTED_BY_PRICE_DESC: "Sort by Price - High To Low.",NO_HOTELS_FOUND: "No hotels found with given criteria.",ACCESSIBILITY_SELECTED_LIST_VIEW: "Switched to list view",ACCESSIBILITY_SELECTED_MAP_VIEW: "Switched to map view",ACCESSIBILITY_PACKAGE_SELECTED_TEXT: "$hotelName is selected",INFOWINDOW_COSTCO_TRAVEL_RATING: "Costco Travel Rating",INFOWINDOW_COSTCO_MEMBER_RATING: "Costco Member Reviews",INFOWINDOW_COSTCO_HOTEL_RATING: "Hotel Rating",INFOWINDOW_TOTAL_PRICE: "Total Price",NO_FLIGHT_FOUND: "Based on your search criteria, no flights are available with the airlines we offer.",ANY_STAR_RATING_SINGULAR: "Any Rating (1 result)",ANY_STAR_RATING_PLURAL: "Any Rating ($resultNumber results)",RESULT_TEXT_SINGULAR: "(1 result)",RESULT_TEXT_PLURAL: "($resultNumber results)",MATCHING_HOTELS_TEXT_SINGULAR: "1 Matching Hotel",MATCHING_HOTELS_TEXT_PLURAL: "$resultNumber Matching Hotels",HOTEL_WARNING_MSG: "Hotel not available on dates selected. Please enter alternative dates.",ANY_AREA_LABEL_SINGULAR: "Any Area (1 result)",ANY_AREA_LABEL_PLURAL: "Any Area ($resultNumber results)",ANY_BRAND_CHAIN_SINGULAR: "Any Brand (1 result)",ANY_BRAND_CHAIN_LABEL_PLURAL: "Any Brand ($resultNumber results)",ANY_HOTEL_TYPE_LABEL_SINGULAR: "Any Hotel Type (1 result)",ANY_HOTEL_TYPE_LABEL_PLURAL: "Any Hotel Type ($resultNumber results)",ANY_HOTEL: "Any Hotel ($resultNumber)"};var TranslationTexts = this.TranslationTexts;
;this.name="HotelOnlySearchResultsModule";
this.active=!1;this.initialize=function(a){a=a||{};this.selector="#hotelOnlySearchResults";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.HotelOnlySearchResults=$namespace.Modules.addView(this,$namespace.View.HotelOnlySearchResultsView,{module:this,numberOfHotelsPerPage:a.numberOfHotelsPerPage,destination:a.destination})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		utils=$namespace.Utils;
$namespace.TransportationJdcCarAddOnsResultsModule=new function(){this.TranslationTexts={
                                                                             CAR_SUBMIT_OPTIONAL_EQUIPMENT_ERROR_TITLE: "Optional Equipment Error",
                                                                             CAR_OPTIONAL_EQUIPMENT_QUANTITY_ERROR: "Please select 10 or fewer total optional equipment items.",
                                                                             CAR_OPTIONAL_EQUIPMENT_DESCRIPTION_TITLE: "Optional Equipment Description",
                                                                             CAR_OPTIONAL_EQUIPMENT_DECREMENT_ENABLED: "Decrease optional equipment quantity for $optionalEquipmentName $priceText",
                                                                             CAR_OPTIONAL_EQUIPMENT_DECREMENT_DISABLED: "No $optionalEquipmentName selected $priceText",
                                                                             CAR_OPTIONAL_EQUIPMENT_INCREMENT_ENABLED: "Increase optional equipment quantity for $optionalEquipmentName $priceText",
                                                                             CAR_OPTIONAL_EQUIPMENT_INCREMENT_DISABLED: "Max $optionalEquipmentName selected $priceText"
                                                                         };

    var TranslationTexts = this.TranslationTexts;
                                                                     ;
this.name="TransportationJdcCarAddOnsResultsModule";this.bindEventHandlers=function(){$(window).on("resize",function(){$namespace.TransportationJdcCarAddOnsResultsModule.resize()})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};a.module=this;this.selector='DIV[id="carSpecialEquipmentJdc"]';this.el=$(this.selector);this.bindEventHandlers();$namespace.Modules.addView(this,$namespace.View.TransportationJdcCarAddOnsResultsView,
a);this.resize()};this.isActive=function(){return $(this.selector).length};this.resize=function(){var a=utils.Breakpoint.isMobile()||$namespace.Browser.iPad?!0:!1;$(this.selector).find("DIV.number-widget > input").prop("readonly",a)};this.unbindEventHandlers=function(){$(window).off("resize",function(){$namespace.TransportationJdcCarAddOnsResultsModule.resize()})}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.infoPageContentModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){a=a||{};this.bindEventHandlers();this.selector="#infoPageContent";this.offerDetails=$namespace.Modules.addView(this,$namespace.View.infoPageContentView,{module:this,infoPageName:a.infoPageName})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=
function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.MultiCityFinalBookingSpecialRequestModule=new function(){this.TranslationTexts={SPECIAL_REQUESTS_AIRLINE_REQUIRED: "Airline is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_REQUIRED: "Arrival flight number is required.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_REQUIRED: "Departure flight number is required.",SPECIAL_REQUESTS_ARRIVAL_FLIGHT_NUMBER_INVALID: "Invalid arrival flight number.",SPECIAL_REQUESTS_DEPARTURE_FLIGHT_NUMBER_INVALID: "Invalid departure flight number.",SPECIAL_REQUESTS_ARRIVAL_TIME_REQUIRED: "Arrival time is required.",SPECIAL_REQUESTS_DEPARTURE_TIME_REQUIRED: "Departure time is required."};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#multiCitySpecialRequestsPopupDiv";this.multiCityFinalBookingSpecialRequestView=$namespace.Modules.addView(this,$namespace.View.MultiCityFinalBookingSpecialRequestView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseSuperbookingTransportationModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseSuperbookingTransportationModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="#super-booking-cruise-transport";this.bindEventHandlers();this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.cruiseSuperBookingTransportation=$namespace.Modules.addView(this,$namespace.View.CruiseSuperbookingTransportationView,{module:this,destinationName:a.destinationName,
cruiseLineName:a.cruiseLineName,shipName:a.shipName,departureDate:a.departureDate,cruiseSearchFromOfferPage:a.cruiseSearchFromOfferPage})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseSuperbookingTransportationModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseSuperbookingTransportationModule.resize()})};
this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.termsAndConditionsModule=new function(){this.TranslationTexts={};var TranslationTexts = this.TranslationTexts;
;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.bindEventHandlers();this.selector="#terms-and-conditions-page";this.offerDetails=$namespace.Modules.addView(this,$namespace.View.termsAndConditionsView,{module:this})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HobeHotelPaymentOptionsModule=new function(){this.TranslationTexts={VACATION_PACKGE_CANCELLATION_POLICY_ERROR_TITLE: "Cancellation Policy Error",PROMOTION_CODE_LENGTH_ERROR_TITLE: "Promotion code cannot be more than 22 characters",PROMOTION_CODE_ALPHANUMERIC_ERROR_TITLE: "Promotion code can only have letters, numbers, and underscores",PAY_THE_DEPOSIT_AMOUNT: "Pay the Deposit Amount",PAY_THE_FULL_AMOUNT: "Pay the Full Amount",PAY_THE_FULL_AMOUNT_CREDIT_CARD_ONE: "Pay the Full Amount Credit Card",PAY_THE_FULL_AMOUNT_BILLING_ADDRESS_ONE: "Pay the Full Amount Credit Card Billing Address",PAY_THE_DEPOSIT_AMOUNT_CREDIT_CARD: "Pay the Deposit Amount Credit Card",PAY_THE_DEPOSIT_AMOUNT_BILLING_ADDRESS: "Pay the Deposit Amount Credit Card Billing Address",PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD_ONE: "Schedule Final Payment Credit Card",PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS_ONE: "Schedule Final Payment Credit Card Billing Address",STREET_LABEL: "Street",CITY_LABEL: "City",ZIP_LABEL: "Zip Code",ZIP_VALIDATION_ERROR_MESSAGE: "Zip Code is required.",ZIP_INVALID_ERROR_MESSAGE: "Zip Code must be 5 digits.",STATE_VALIDATION_ERROR_MESSAGE: "State is required.",PROVINCE_VALIDATION_ERROR_MESSAGE: "Province is required.",POSTAL_CODE_VALIDATION_ERROR_MESSAGE: "Postal Code is required.",CITY_VALIDATION_ERROR_MESSAGE: "City is required.",STREET_VALIDATION_ERROR_MESSAGE: "Street is required.",SELECT_TEXT: "Select",STATE_LABEL: "State",PROVINCE_LABEL: "Province",ZIPCODE_LABEL: "Zip Code",POSTALCODE_LABEL: "Postal Code",CREDIT_CARD_AMOUNT_INVALID_ERROR_MESSAGE: "Amount entered is not valid.",CARDHOLDER_NAME_VALIDATION_ERROR_MESSAGE: "Cardholder Name is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE: "Credit Card Number is required.",CREDIT_CARD_NUMBER_VALIDATION_ERROR_MESSAGE_VISA_MASTER: "Invalid number. At this time, we only accept Visa and MasterCard&reg;.",CREDIT_CARD_MONTH_VALIDATION_ERROR_MESSAGE: "Month of expiration is required.",CREDIT_CARD_YEAR_VALIDATION_ERROR_MESSAGE: "Year of expiration is required.",CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date entered is in the past.",SCHEDULE_CREDIT_CARD_DATE_VALIDATION_ERROR_MESSAGE: "Expiration Date is before the scheduled date.",CREDIT_CARD_SECURITY_VALIDATION_ERROR_MESSAGE: "CVV is required.",PRIMARY_PHONE_INVALID_ERROR_MESSAGE: "Phone number is required.",PHONE_10_DIGIT_ERROR_MESSAGE: "Invalid phone number.",EMAIL_INVALID_ERROR_MESSAGE: "Invalid email format.",PRIMARY_EMAIL_MISSING_ERROR_MESSAGE: "Email is required.",SCHEDULE_DATE_CALENDAR_LABEL: "Schedule date calendar",SCHEDULE_DATE_REQUIRED_ERROR_MESSAGE: "Scheduled Date is required.",SCHEDULE_DATE_INVALID_ERROR_MESSAGE: "Invalid date.",ONLY_3_CARDS_ALLOWED_ERROR_MESSAGE: "You are allowed only 3 credit cards",PAYMENT_OPTIONS_ERROR_COMMON: "Error",COSTCO_SHOP_CARD_CONFIRMATION_ERROR_MESSAGE: "Confirmation of shipping address for the Costco Shop Card(s) is required.",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",PAYMENT_OPTIONS_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the payment information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",AMOUNT_INVALID_ERROR_MESSAGE: "Invalid Amount entered.",CARDHOLDER_NAME_INVALID_ERROR_MESSAGE: "Invalid Cardholder Name.",CARD_NUMBER_INVALID_ERROR_MESSAGE: "Invalid Credit Card Number.",CREDIT_CARD_SECURITY_INVALID_ERROR_MESSAGE: "CVV must be 3 digits.",STREET_INVALID_ERROR_MESSAGE: "Invalid Street entered.",STREET2_INVALID_ERROR_MESSAGE: "Invalid Street2/Apt. entered.",CITY_INVALID_ERROR_MESSAGE: "Invalid City entered.",POSTAL_CODE_INVALID_ERROR_MESSAGE: "Invalid Postal Code.",ZIPCODE_INVALID_ERROR_MESSAGE: "Invalid Zip code.",EXT_INVALID_ERROR_MESSAGE: "Invalid Ext. number.",PHONE_NUMBER_INVALID_ERROR_MESSAGE: "Invalid phone number.",CREDIT_CARD_LABEL: "Credit Card"};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {PAY_THE_FULL_AMOUNT_CREDIT_CARD : {sourceText: "Pay the Full Amount Credit Card $cardIndex",translatedText: "Pay the Full Amount Credit Card $cardIndex"},PAY_THE_FULL_AMOUNT_BILLING_ADDRESS : {sourceText: "Pay the Full Amount Credit Card $cardIndex Billing Address",translatedText: "Pay the Full Amount Credit Card $cardIndex Billing Address"},PAY_THE_SCHEDULE_AMOUNT_CREDIT_CARD : {sourceText: "Schedule Final Payment Credit Card $cardIndex",translatedText: "Schedule Final Payment Credit Card $cardIndex"},PAY_THE_SCHEDULE_AMOUNT_BILLING_ADDRESS : {sourceText: "Schedule Final Payment Credit Card $cardIndex Billing Address",translatedText: "Schedule Final Payment Credit Card $cardIndex Billing Address"},CREDIT_CARD_AMOUNT_EMPTY_ERROR_MESSAGE : {sourceText: "Amount must be between $minAmount and $maxAmount",translatedText: "Amount must be between $minAmount and $maxAmount"},AMOUNT_IS_ZERO_FULL_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount.",translatedText: "The total amount must equal $maxAmount. You are currently short of that amount by $diffAmount."},AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_LESS_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently short of that amount by <span class=\"nowrap\">$diffAmount</span>."},TOTAL_AMOUNT_GREATER_THAN_GROSS_PAYMENT_ERROR_MESSAGE : {sourceText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>.",translatedText: "The total amount for all Amount fields must equal <span class=\"nowrap\">$maxAmount</span>. You are currently over that amount by <span class=\"nowrap\">$diffAmount</span>."},SCHEDULE_DATE_RANGE_ERROR_MESSAGE : {sourceText: "Scheduled date must be between $minDate and $maxDate.",translatedText: "Scheduled date must be between $minDate and $maxDate."},PAYMENT_AMOUNT_CHANGE_CREDIT_CARD_TEXT : {sourceText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue.",translatedText: "The amount field under $paymentType Credit Card $creditCardIndex section is now $currentValue."},CREDIT_CARD_ENUMERATED_TEXT : {sourceText: "Credit Card $creditCardIndex",translatedText: "Credit Card $creditCardIndex"}};var TranslationMessages = this.TranslationMessages;this.bindEventHandlers=function(){};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.initialize=function(a){this.options=a||{};this.bindEventHandlers();this.selector="#hobeHotelPaymentOptions";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.searchResultsView=$namespace.Modules.addView(this,$namespace.View.HobeHotelPaymentOptionsView,{module:this,grossPaymentAmount:this.options.grossPaymentAmount,
gaVars:this.options.gaVars})};this.isActive=function(){return $(this.selector).length};this.unbindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HobeTravelerInformationModule=new function(){this.TranslationTexts={CONTINUE_TO_SPECIAL_REQUEST_TEXT: "Continue to Special Requests",SELECTED_TEXT: "Selected",NOT_SELECTED_TEXT: "not selected",REQUIRED_TITLE: "Title is required.",INVALID_TITLE: "Title is Invalid.",REQUIRED_FIRST_NAME: "First Name is required.",INVALID_FIRST_NAME: "First Name Is Invalid.",REQUIRED_LAST_NAME: "Last Name is required.",INVALID_LAST_NAME: "Last Name is Invalid.",INVALID_MIDDLE_INITIAL_NAME: "Middle Name/Initial is Invalid.",TRAVELER_LAST_NAME_MIN_CHARACTERS_MESSAGE: "The last name should contain at least 2 characters.",TERMS_AND_CONDITIONS_ERROR_MESSAGE: "Terms & Conditions is required.",TRAVELER_ERROR_COMMON: "Error",INVALID_REWARDS_NUMBER: "Rewards Number is Invalid.",INVALID_SUFFIX: "Suffix is invalid."};var TranslationTexts = this.TranslationTexts;
this.TranslationMessages = {TRAVELER_ERROR_MESSAGE : {sourceText: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at $phoneNumber so we may assist you with the booking.",translatedText: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at $phoneNumber so we may assist you with the booking."}};var TranslationMessages = this.TranslationMessages;this.name="HobeTravelerInformationModule";this.initialize=function(a){a=a||{};this.selector="#hobeTravelerInformation";this.bindEventHandlers();this.showmore=new $namespace.Widgets.ShowMore($('DIV[data-hook="showmore"]'),
{adjustHeightCallback:function(a,d){d=d.height("auto").height();""!==a.children(":first").attr("class")&&(d=200);200<=d?(this.contentEl.height(d),this.el.removeClass("active")):this.el.addClass("active")}});this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.hobeTravelerInformationPageView=$namespace.Modules.addView(this,$namespace.View.HobeTravelerInformationView,{module:this,totalRooms:a.totalRooms})};this.initElement=function(){this.el&&0!=this.el.length||
(this.el=$(this.selector))};this.isActive=function(){return $(this.selector).length};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){this.hobeTravelerInformationPageView.resize()};this.unbindEventHandlers=function(){};this.bindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HobeHotelPageModule=new function(){this.TranslationTexts={MODIFY_ROOM_BUTTON_TEXT: "Modify Room",KEEP_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection",ACCESSIBILTY_MODIFY_ROOM_BUTTON_TEXT: "Modify room $roomNumber",ACCESSIBILTY_CURRENT_SELECTION_BUTTON_TEXT: "Keep Current Selection for room $roomNumber",HOTEL_ROOM_CHANGE_MODAL_TITLE: "Confirm Hotel Room Change",HOTEL_CHANGE_MODAL_NEW_PACKAGE_PRICE_LABEL: "New Package Price:",HOTEL_PRICE_DIFFERENCE_TO_ADD_MESSAGE: "This change will <strong>add <span data-test='priceChangeDifference'>$priceChange</span></strong> to your total package price.",HOTEL_PRICE_DIFFERENCE_TO_SUBTRACT_MESSAGE: "This change will <strong>subtract <span data-test='priceChangeDifference'>$priceChange</span></strong> from your total package price.",HOTEL_RATE_DETAILS_AND_CANCELLATION_POLICY_ERROR_TITLE: "Rate Details & Cancellation Policy Error",OVERVIEW: "Overview",PROPERTY: "Property"};var TranslationTexts = this.TranslationTexts;
;this.name="HobeHotelPageModule";this.initialize=function(a){this.selector='DIV[id="search-widget-modal"]';this.el=$(this.selector);this.bindEventHandlers();this.selector="#hobeHotelPage";this.el=$(this.selector);this.showmore=new $namespace.Widgets.ShowMore($('DIV[data-hook="showmore"]'));this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,
{module:this});this.hobeHotelPageView=$namespace.Modules.addView(this,$namespace.View.HobeHotelPageView,{module:this})};this.initElement=function(){this.el&&0!=this.el.length||(this.el=$(this.selector))};this.isActive=function(){return $(this.selector).length};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){this.hobeHotelPageView.resize()};this.unbindEventHandlers=function(){};this.bindEventHandlers=function(){}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HobeHotelSpecialRequestsModule=new function(){this.name="HobeHotelSpecialRequestsModule";this.active=!1;this.TranslationTexts={SPECIAL_REQUESTS_HOTEL_COMMENTS_REQUIRED: "In order to better accommodate your needs, we need a description of the type(s) of accessible features needed.",SPECIAL_REQUESTS_ERROR_COMMON: "Error",SPECIAL_REQUESTS_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the special requests. Please call Costco Travel at $tollFreeNumber so we may assist you with the booking."};var TranslationTexts = this.TranslationTexts;
;this.initialize=function(a){a=a||{};this.selector="#hobe-hotel-special-requests-page";this.bindEventHandlers();
this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.hobeHotelSpecialRequests=$namespace.Modules.addView(this,$namespace.View.HobeHotelSpecialRequestsView,{module:this,gaVars:a.gaVars})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.HobeHotelSpecialRequestsModule.resize()})};this.unbindEventHandlers=
function(){$(window).off("resize orientationchange",function(){$namespace.HobeHotelSpecialRequestsModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.CruiseFlightSeatSelectionModule=new function(){this.TranslationTexts={CONTINUE_TO_SPECIAL_REQUEST_TEXT: "Continue to Special Requests",CONTINUE: "Continue",CONTINUE_TO_NEXT_FLIGHT: "Continue to Next Flight",TEXT_SEAT: "Seat",TEXT_AVAILABLE: "Available",TEXT_SELECTED_FOR_PASSENGER: "selected for passenger",TEXT_SEAT_NUMBER: "Seat Number",ACKNOWLEDGEMENT_MODAL_TITLE: "Acknowledgement",SEAT_NOT_SELECTED_FOR_ALL_PASSENGER: "Not all passengers have assigned seats. Continue without assigning seats?",TEXT_LAVATORY_ICON: "Lavatory Icon",TEXT_GALLEY_ICON: "Galley Icon",TEXT_CLOSET_ICON: "Closet Icon"};var TranslationTexts = this.TranslationTexts;
;this.name="CruiseFlightSeatSelectionModule";this.active=!1;this.initialize=function(a){a=a||{};this.selector="cruiseTravelerInfo";this.bindEventHandlers();self.infoBarView=$namespace.Modules.addView(self,$namespace.View.InfoBarView,{module:self});this.offerDetails=$namespace.Modules.addView(this,$namespace.View.CruiseFlightSeatSelectionView,
{module:this,flightSeatMapInfoJSON:a.flightSeatMapInfoJSON})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.bindEventHandlers=function(){$(window).on("resize orientationchange",function(){$namespace.CruiseFlightSeatSelectionModule.resize()})};this.unbindEventHandlers=function(){$(window).off("resize orientationchange",function(){$namespace.CruiseFlightSeatSelectionModule.resize()})};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.HobeFinalizeBookingModule=new function(){this.TranslationTexts={BOOKING_COMMON_ERROR_MODAL_TITLE: "Error",BOOKING_COMMON_ERROR_MESSAGE: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-866-921-7925 so we may assist you with the booking.",BOOKING_COMMON_ERROR_MESSAGE_CA: "There is a problem completing the booking because an error occurred while processing the passenger information. Please call Costco Travel at 1-855-863-0357 so we may assist you with the booking.",FINISH_AND_BOOK_BUTTON_TEXT: "Finish and Book"};var TranslationTexts = this.TranslationTexts;
;this.name="HobeFinalizeBookingModule";this.active=!1;this.initialize=function(a){this.selector="#hobe-Finalize-booking-page";this.infoBarView=$namespace.Modules.addView(this,$namespace.View.InfoBarView,{module:this});this.HobeFinalizeBooking=$namespace.Modules.addView(this,$namespace.View.HobeFinalizeBookingView,{module:this})};this.close=function(){this.unbindEventHandlers();$namespace.Modules.closeViews(this)};this.resize=function(){};this.isActive=function(){return $(this.selector).length}};


	})(CT, {"webloc":""});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.ProvinceSelectPopup=new function(){var a=null;this.showProvinceSelectionPopup=function(){var b=this,d=function(){var d=$("#provincePopupDiv"),e=d.find(".modal-shade");d.find(".modal-content").attr("role","dialog").attr("aria-modal","true").attr("aria-labelledby","dialog-title");d.find(".modal-content").attr("aria-describedby","dialog-description");d.find(".modal-body >p").attr("id","dialog-description");d.find(".modal-title >H2").attr("id","dialog-title");a=new $namespace.TabHandler(e,
$.proxy(b,"hideProvinceSelectPopup"));a.setPopupKeydownHandler();a.setTabIndexesForModal();$("body").addClass("scroll-lock").attr("data-scrolltop",$(window).scrollTop());d.show(0,function(){var b=d.find("div.modal-content");1==b.size()&&setTimeout(function(){a.setModalMousedownHandler();b.find("div.modal-selection-block input:checked").focus()},0)})};if("CAN"==$namespace.GlobalConstants.APPLICATION_DOMAIN){var e=$namespace.Navigation.getSelectedProvinceCode();null!=e&&""!=e||$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("home.act",
"h=17",null,"provincePopupDiv",d,null,"","GET")}};this.hideProvinceSelectPopup=function(){a&&(a.destroyPopupEventHandlers(),a.unsetTabIndexesForModal());$("#provincePopupDiv").empty().hide();$(window).scrollTop($("body").attr("data-scrolltop"));$("body").removeClass("scroll-lock");setTimeout(function(){$(document.body).focus().blur()},1)};this.setProvince=function(){var a=$("input[name=provinceRadio]:checked","#provincePopupDiv").val();""!=a&&null!=a&&($namespace.Navigation.setSelectedProvinceCode(a,
1),this.hideProvinceSelectPopup())}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.TranslationSettings=new function(){this.popupShowing=!1;this.selector='DIV[id="translationSettingsPopupDiv"]';this.bindEventHandlers=function(){var a=$(this.selector);a.get(0).onselectstart=function(){return!1};var b=function(a){return function(){a.hidePopup()}}(this);a.find("BUTTON.modal-close").click(b);a.find('BUTTON[data-id="close_button"]').click(b);b=function(a){return function(){a.updateSettings()}}(this);a.find('BUTTON[data-id="update_button"]').click(b)};this.hidePopup=function(){$(this.selector).empty().hide();
$(window).scrollTop($("body").attr("data-scrolltop"));$("body").removeClass("scroll-lock");this.popupShowing=!1};this.showPopup=function(){if(!this.popupShowing){this.popupShowing=!0;$namespace.DomUtil.setElementLoadingMask(!0,1);var a=function(a){return function(){$namespace.DomUtil.setElementLoadingMask(!1,1);$("body").addClass("scroll-lock").attr("data-scrolltop",$(window).scrollTop());$(a.selector).show();a.bindEventHandlers()}}(this);$namespace.AjaxUtil.makeAjaxCallWithWaitingDiv("translationSettings.act",
"ts=LOAD_TRANSLATION_SETTINGS_POPUP",null,"translationSettingsPopupDiv",a)}};this.updateSettings=function(){$namespace.DomUtil.setElementLoadingMask(!0,1);var a=$(this.selector),b=a.find('SELECT[id="translationCategory"]').val();a=a.find('INPUT[id="enableFallBackCategories"]').is(":checked");$namespace.AjaxUtil.makeAjaxCall("translationSettings.act","ts=UPDATE_TRANSLATION_SETTINGS&translationCategory="+b+("&fallbackTranslationCategoriesEnabled="+a),null,null,function(){window.location.reload()})}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.UnsupportedBrowserPopup=new function(){var a=function(a){0==a?$namespace.ProvinceSelectPopup.showProvinceSelectionPopup():($("body").addClass("scroll-lock").attr("data-scrolltop",$(window).scrollTop()),$("#unsupportedBrowserPopup").show(),$namespace.Analytics.trackPageView("/msg/alert/unsupported_Browser"))};this.showUnsupportedBrowserPopup=function(){$("#unsupportedBrowserPopup");$namespace.AjaxUtil.makeAjaxCall("unsupportedBrowser.act","usb=LOAD_UNSUPPORTED_BROWSER_POPUP",null,"unsupportedBrowserPopup",
a)};var b=function(){$("#unsupportedBrowserPopup").empty().hide();$(window).scrollTop($("body").attr("data-scrolltop"));$("body").removeClass("scroll-lock");$namespace.ProvinceSelectPopup.showProvinceSelectionPopup()};this.closeUnsupportedBrowserPopup=function(){$namespace.AjaxUtil.makeAjaxCall("unsupportedBrowser.act","usb=CLOSE_UNSUPPORTED_BROWSER_POPUP",null,null,b,"")}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.NeedHelpBanner=new function(){this.loadAgentImage=function(){var a=document.getElementById("needHelpAgentImage"),b=Math.ceil(4*Math.random());10>b&&(b="0"+b);a.onload=function(){$(this).addClass("displayBlock")};a.src=$namespace.GlobalConstants.NEED_HELP_BANNER_IMAGE_PATH+b+".png"}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		$namespace.Application=new function(){var a=$namespace.Utils;this.isInitialized=!1;this.scrollTimer=null;this.ui={};this.router={};this.views={};this.page={};this.getCurrentPath=function(){return window.location.pathname.toLowerCase().replace(/^\//,"").replace(/(\/|\.html)$/,"").split("/").shift()};this.path=this.getCurrentPath();this.initializeOnMainContentReload=function(){this.initWidgets();this.initChrome()};this.initialize=function(){($namespace.Browser.iPad||$namespace.Browser.iPhone)&&$("body").addClass("iOS");
var b=this,d=a.Breakpoint,e=d.which();this.isInitialized||(this.ui.alert=$(".ct-alert"),$.hook("current-year").text((new Date).getFullYear()),this.initWidgets(),this.initChrome(),$(window).on("resize orientationchange",function(a){var f=d.which();f!==e?(setTimeout($namespace.Widgets.setEqualHeights,10),"orientationchange"===a.type&&$namespace.SearchWidgetsModule.setDefaultTab()):$namespace.Widgets.setEqualHeights();e=f;b.notifyDocumentSizeChange()}),$(document.body).on("click","[data-modal]",function(b){var d=
$(b.currentTarget).attr("data-modal"),e=$(b.currentTarget).attr("data-modal-title-text");if(-1==d.indexOf("terms_and_conditions")){var f=a.getTemplate(d);f.length&&(d=b.currentTarget,d.id&&"login_tooltip"==d.id&&$namespace.Analytics.trackPageView("/memberLogin/MembershipNumberPopup"),e&&f.find("DIV.modal-title H2").html(e),e=new $namespace.Widgets.Modal(f),e.show(),d.id&&"login_tooltip"==d.id&&$namespace.UnsupportedBrowserPopup.showUnsupportedBrowserPopup())}b.preventDefault()}),$(document.body).on("click",
'[data-hook="launch_chat"]',function(a){a.preventDefault()}),this.isInitialized=!0)};this.notifyDocumentSizeChange=function(){$.hook("sticky-bar").each(function(a,d){d.stickyBar&&d.stickyBar._onDocumentSizeChange&&d.stickyBar._onDocumentSizeChange()})};this.initWidgets=function(){setTimeout($namespace.Widgets.setEqualHeights,200);$.hook("accordion").each(a.eachUninitialized(function(a,d){d.accordion=new $namespace.Widgets.Accordion(a)}));$.hook("expander").each(a.eachUninitialized(function(a,d){d.expander=
new $namespace.Widgets.Expander(a)}));setTimeout(function(){$.hook("sticky-bar").each(a.eachUninitialized(function(a,d){d.stickyBar=new $namespace.Widgets.StickyBar(a)}))},100);$.hook("sticky-sidebar").each(a.eachUninitialized(function(a,d){d.stickySidebar=new $namespace.Widgets.StickySidebar(a)}));$.hook("radio-switcher").each(a.eachUninitialized(function(a,d){d.radioSwitcher=new $namespace.Widgets.RadioSwitcher(a)}));this.initTurnToTeasers();$('input[format-date-input="true"]').on("input",function(){a.formatDateInput($(this))});
this.appendTooltipToBody()};this.initChrome=function(){this.views.languageSelector||(this.views.languageSelector=new $namespace.View.LanguageSelector);this.views.navigation=new $namespace.View.NavigationView({module:this});var b=a.Cookies.get($namespace.Config.ALERT_CLOSE_COOKIE);b&&b===this.ui.alert.attr("data-alert")&&this.ui.alert.hide()};this.initTurnToTeasers=function(){$namespace.GlobalConstants.TURNTO_REVIEWS_ENABLED&&$(".turntoTeaser").each(a.eachUninitialized(function(a,d){d.turnToTeaser=
new $namespace.Widgets.TurnToReviewsTeaser(a,{style:a.data("tt-teaser-style"),callback:$namespace.TurnToReviewsUtil.updatePageTabOrder});$namespace.TurnToReviewsUtil.addTeaserWidget(d.turnToTeaser)}))};this.expireSessionScreen=function(){var b=a.getTemplate($.hook("confirm_session_expired")),d=function(){e&&e.hide();window.location="/"+this.path},e=new $namespace.Widgets.Confirm(b,d,d);e.show()};this.appendTooltipToBody=function(){var a=[];$("a[data-tooltip][data-tooltip-position-type-absolute]").each(function(b){b=
$(this).attr("data-tooltip");-1===a.indexOf(b)&&a.push(b)});a.forEach(function(a){a="."+a;var b=$(a).first();if(1<b.length||1===b.length&&!b.parent().is("body"))b=$(document.body).children(a),0<b.length&&b.remove(),a=$(a),0<a.length&&$(document.body).append(a)})}};

	})(CT, {});
		
	
	
	var CT = CT || {};
	CT.View = CT.View || {};
	( function($namespace, $arguments) {
		window.console||(window.console={error:function(){},log:function(){},warn:function(){}});
$(document).ready(function(){$.validator.addMethod("date-string-validator",function(a,b){return $namespace.DateUtil.isValidDateString(value,$namespace.GlobalConstants.LOCALE_DATE_FORMAT)?!0:!1},"Please enter a valid date.");$.validator.addMethod("past-date-validator",function(a,b){return(a=$namespace.DateUtil.isValidDateString(a,$namespace.GlobalConstants.LOCALE_DATE_FORMAT))&&!a.isPastDate?!0:!1},"Please enter a future date.");$namespace.Application.initialize()});

	})(CT, {});
		
	