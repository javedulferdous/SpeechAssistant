(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1173:function(e,_,t){"use strict";(function(e){var o,a=t(1174),r=t(0),n=t(73);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,l,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(_,t){_({type:r.g.fetchBookings,options:e});var o=t().app.apiRequestConfig;return a.a.fetch(o).then((function(e){return _(c(e))}),(function(e){return _(Object(n.b)(e,u))}))}},c=function(e){return{type:r.g.fetchBookingsSuccess,bookings:e.body}},u=function(e){return{type:r.g.fetchBookingsFailure,error:e}},d={fetchBookings:s,fetchBookingsSuccess:c,fetchBookingsFailure:u};_.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(s,"fetchBookings","/usr/src/app/app/actions/BookingsActions.js"),i.register(c,"fetchBookingsSuccess","/usr/src/app/app/actions/BookingsActions.js"),i.register(u,"fetchBookingsFailure","/usr/src/app/app/actions/BookingsActions.js"),i.register(d,"default","/usr/src/app/app/actions/BookingsActions.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(2)(e))},1174:function(e,_,t){"use strict";(function(e){var o,a=t(27),r=t(24),n=t(23);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,l,s={fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=Object(r.a)(e.ENV||HT.ENV),t=_.host,o=t+a.a.BOOKINGS_PATH,i=new n.b({},o,e);return i.get()}},c=s;_.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(s,"BookingsFetcher","/usr/src/app/app/fetchers/BookingsFetcher.js"),i.register(c,"default","/usr/src/app/app/fetchers/BookingsFetcher.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(2)(e))},143:function(e,_,t){"use strict";t.r(_),function(e){var o,a=t(1),r=t.n(a),n=t(20),i=t(170),l=t(1173),s=t(1550),c=t(36);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,d,p=function(e){return r.a.createElement(s.a,e)},E=function(e){return{actions:{handleBookingClick:function(_){return e(i.a.viewBooking(_)).then((function(){return Object(c.J)(_.id)}))},fetchBookings:function(){e(l.a.fetchBookings({blockSpinner:!0}))}}}},b=function(e){var _=e.customer;return{largeScreen:e.app.largeScreen,bookings:e.bookings,unauthorized:_.initialAuthAttempted&&!_.id}},f=Object(n.b)(b,E)(p);_.default=f,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(p,"BookingsContainer","/usr/src/app/app/components/bookings/BookingsContainer.js"),u.register(E,"mapDispatchToProps","/usr/src/app/app/components/bookings/BookingsContainer.js"),u.register(b,"mapStateToProps","/usr/src/app/app/components/bookings/BookingsContainer.js"),u.register(f,"default","/usr/src/app/app/components/bookings/BookingsContainer.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}.call(this,t(2)(e))},1550:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(31),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(35),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(37),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(22),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(168),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__),lodash_partition__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(991),lodash_partition__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_partition__WEBPACK_IMPORTED_MODULE_7__),lodash_orderBy__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(992),lodash_orderBy__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_orderBy__WEBPACK_IMPORTED_MODULE_8__),lodash_map__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(100),lodash_map__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(lodash_map__WEBPACK_IMPORTED_MODULE_9__),moment__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32),moment__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__),react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__),react_loadable__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7),react_loadable__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_12__),_shared_components_HeaderContainer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(308),_shared_components_Spinner__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(302),_loading_LoadingController__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9),_components_Booking__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(1552),_helpers_NavigationHelper__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(36),_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1551),_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4),_utils_withI18n__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(29),enterModule;function _createSuper(e){var _=_isNativeReflectConstruct();return function(){var t,o=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(e);if(_){var a=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ReceiptController=react_loadable__WEBPACK_IMPORTED_MODULE_12___default()({loader:function(){return Promise.all([__webpack_require__.e(2),__webpack_require__.e(10),__webpack_require__.e(12),__webpack_require__.e(13),__webpack_require__.e(101)]).then(__webpack_require__.bind(null,226))},modules:["../receipt/ReceiptController"],webpack:function(){return[226]},loading:_loading_LoadingController__WEBPACK_IMPORTED_MODULE_15__.a}),splitBookings=function(e){var _=lodash_partition__WEBPACK_IMPORTED_MODULE_7___default()(e,(function(e){return moment__WEBPACK_IMPORTED_MODULE_10___default()(e.checkout_at).isAfter(moment__WEBPACK_IMPORTED_MODULE_10___default()())})),t=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6___default()(_,2),o=t[0],a=t[1];return{currentBookings:o=lodash_orderBy__WEBPACK_IMPORTED_MODULE_8___default()(o,"checkin_at"),pastBookings:a}},Bookings=function(_Component){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(Bookings,_Component);var _super=_createSuper(Bookings);function Bookings(e){var _;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,Bookings),(_=_super.call(this,e)).state={bookingsFetchAttempted:!1},_}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Bookings,[{key:"componentDidMount",value:function(){window.requestIdleCallback((function(){return ReceiptController.preload()})),this.props.actions.fetchBookings(),this.setState({bookingsFetchAttempted:!0})}},{key:"componentDidUpdate",value:function(){this.props.unauthorized&&Object(_helpers_NavigationHelper__WEBPACK_IMPORTED_MODULE_17__.K)()}},{key:"renderCurrentBookings",value:function(e){if(!e.length)return null;var _=this.props,t=_.i18n,o=_.actions;return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("h1",{className:Object(_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__.c)(_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__.a.title)},t.current_bookings),lodash_map__WEBPACK_IMPORTED_MODULE_9___default()(e,(function(e,_){return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_components_Booking__WEBPACK_IMPORTED_MODULE_16__.a,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({actions:o,booking:e},{key:_,index:_}))})))}},{key:"renderPastBookings",value:function(e){if(!e.length)return null;var _=this.props,t=_.i18n,o=_.actions;return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("h1",{className:Object(_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__.c)(_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__.a.title)},t.past_bookings),lodash_map__WEBPACK_IMPORTED_MODULE_9___default()(e,(function(e,_){return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_components_Booking__WEBPACK_IMPORTED_MODULE_16__.a,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({actions:o,booking:e},{key:_,index:_}))})))}},{key:"renderNoBookings",value:function(e){if(e.length)return null;var _=this.props.i18n;return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("h1",{className:Object(_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__.c)(_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__.a.title)},_.bookings),_.no_bookings)}},{key:"render",value:function(){var e=this.props,_=e.largeScreen,t=e.bookings,o=e.i18n,a=t.bookings,r=splitBookings(a),n=r.currentBookings,i=r.pastBookings;return!this.state.bookingsFetchAttempted||t.fetching&&!a.length?react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",{className:Object(_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__.c)(_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__.a.container)},react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_shared_components_Spinner__WEBPACK_IMPORTED_MODULE_14__.a,{spinner:{visible:!0},message:o.loading,position:"absolute"})):react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",{className:Object(_utils_aphrodite__WEBPACK_IMPORTED_MODULE_19__.c)(_styles_BookingsStyles__WEBPACK_IMPORTED_MODULE_18__.a.container)},!_&&react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_shared_components_HeaderContainer__WEBPACK_IMPORTED_MODULE_13__.a,null),this.renderNoBookings(a),this.renderCurrentBookings(n),this.renderPastBookings(i))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Bookings}(react__WEBPACK_IMPORTED_MODULE_11__.Component),_default=Object(_utils_withI18n__WEBPACK_IMPORTED_MODULE_20__.b)(Bookings),reactHotLoader,leaveModule;__webpack_exports__.a=_default,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(ReceiptController,"ReceiptController","/usr/src/app/app/components/bookings/Bookings.js"),reactHotLoader.register(splitBookings,"splitBookings","/usr/src/app/app/components/bookings/Bookings.js"),reactHotLoader.register(Bookings,"Bookings","/usr/src/app/app/components/bookings/Bookings.js"),reactHotLoader.register(_default,"default","/usr/src/app/app/components/bookings/Bookings.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(2)(module))},1551:function(e,_,t){"use strict";(function(e){var o,a=t(18),r=t(4);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var n,i,l=a.a.app,s=r.b.create({container:{height:"100%",padding:"0 ".concat(l.gutter8),position:"relative"},title:{fontSize:l.fontSizes.heading2,fontWeight:l.fontWeight.bolder,margin:0,padding:l.gutter12}});_.a=s,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(n.register(l,"app","/usr/src/app/app/components/bookings/styles/BookingsStyles.js"),n.register(s,"default","/usr/src/app/app/components/bookings/styles/BookingsStyles.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,t(2)(e))},1552:function(e,_,t){"use strict";(function(e){var o,a=t(1),r=t.n(a),n=t(6),i=t.n(n),l=t(21),s=t(116),c=t(4),u=t(1553);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=function(e,_,t){var o=l.a.dateInTimeZone(e,t),a=l.a.dateInTimeZone(_,t),n=o.year()===a.year()?"short":"long";return r.a.createElement("span",null,r.a.createElement(s.a,{date:e,timezone:t,format:n})," - ",r.a.createElement(s.a,{date:_,timezone:t,format:"long"}))},p=function(e){var _=e.actions,t=e.booking,o=e.index,a=t.hotel,n=a.photos.banner?a.photos.banner.replace("http://","https://").concat("?h=100&w=130&fit=crop&hotel_id=".concat(t.hotel.id)):null;return r.a.createElement("div",{className:Object(c.c)(u.a.container),onClick:_.handleBookingClick.bind(null,t),"data-aid":"booking-".concat(o)},r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:a.name,className:Object(c.c)(u.a.image)})),r.a.createElement("div",{className:Object(c.c)(u.a.details)},r.a.createElement("div",{className:Object(c.c)(u.a.hotelName),"data-aid":"booking-hotel-name"},a.name),r.a.createElement("div",{className:Object(c.c)(u.a.subtitle),"data-aid":"booking-city"},"".concat(a.city,", ").concat(a.state||a.country_name)),r.a.createElement("div",{className:Object(c.c)(u.a.subtitle),"data-aid":"booking-date"},d(t.checkin_at,t.checkout_at,t.hotel.iana_time_zone))))};p.propTypes={actions:i.a.object,booking:i.a.object,index:i.a.number};var E,b,f=p;_.a=f,(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(d,"buildBookingDates","/usr/src/app/app/components/bookings/components/Booking.js"),E.register(p,"Booking","/usr/src/app/app/components/bookings/components/Booking.js"),E.register(f,"default","/usr/src/app/app/components/bookings/components/Booking.js")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}).call(this,t(2)(e))},1553:function(e,_,t){"use strict";(function(e){var o,a=t(18),r=t(5),n=t(4);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,l,s=a.a.app,c=n.b.create({container:{marginBottom:s.gutter8,height:a.a.getREMSize(100),cursor:"pointer",display:"flex",alignItems:"center",backgroundColor:r.a.charcoalGrey},details:{padding:"0 ".concat(s.gutter16),overflow:"hidden"},hotelName:{fontWeight:s.fontWeight.bolder,fontSize:s.fontSizes.bodyXl,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},subtitle:{fontSize:s.fontSizes.small,marginTop:s.gutter8},image:{display:"block"}});_.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(s,"app","/usr/src/app/app/components/bookings/styles/BookingStyles.js"),i.register(c,"default","/usr/src/app/app/components/bookings/styles/BookingStyles.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(2)(e))}}]);
//# sourceMappingURL=bookings-8eeb7b1c04a9198a9a73.bundle.js.map