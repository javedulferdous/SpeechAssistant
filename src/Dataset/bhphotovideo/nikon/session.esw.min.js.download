window.esw.defineFeature("Session",function(c){function g(){this.trackedKeys=[];c.addMessageHandler("session.set",this.setSessionData.bind(this));c.addMessageHandler("session.get",function(a,b){parent.postMessage({method:"session.sessionData",data:this.getSessionData(a,b)},c.parentOrigin)}.bind(this));c.addMessageHandler("session.delete",this.deleteSessionData.bind(this));c.addMessageHandler("session.deleteAllKeys",function(a){this.deleteAllSessionData(a)}.bind(this))}g.prototype.getKeyName=function(a,
b){if(void 0!==b&&null!==b&&"string"===typeof b)return a+b;throw Error("key is a required parameter must be a string, cannot be undefined or null");};g.prototype.getSessionData=function(a,b,h){var f={};try{var d=h?localStorage:sessionStorage}catch(e){c.log("Allow or enable third-party cookies for Chat to work.");return}if(a&&b)b.forEach(function(e){f[e]=d.getItem(this.getKeyName(a,e))}.bind(this));else throw Error("getSessionData requires two non-null arguments (domain, keys).");return f};g.prototype.deleteSessionData=
function(a,b,h){var f;var d=h?localStorage:sessionStorage;if(a&&b)b.forEach(function(e){-1<this.trackedKeys.indexOf(e)&&(f=this.trackedKeys.indexOf(e),this.trackedKeys.splice(f,1));d.removeItem(this.getKeyName(a,e));"MASTER_DEPLOYMENT_ID"===e&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!1}},c.parentOrigin)}.bind(this)),parent.postMessage({method:"session.deletedSessionData",data:b},c.parentOrigin);else throw Error("deleteSessionData requires two non-null arguments (domain, keys).");
};g.prototype.deleteAllSessionData=function(a){this.deleteSessionData(a,this.trackedKeys,!0);this.deleteSessionData(a,this.trackedKeys,!1);parent.postMessage({method:"session.deletedAllSessionData"},c.parentOrigin)};g.prototype.setSessionData=function(a,b,h){var f=h?localStorage:sessionStorage;if(a&&b)Object.keys(b).forEach(function(d){this.trackedKeys.push(d);f.setItem(this.getKeyName(a,d),b[d]);"MASTER_DEPLOYMENT_ID"===d&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!0}},c.parentOrigin)}.bind(this));
else throw Error("setSessionData requires two non-null arguments (domain, data).");};c.sessionAPI=new g});
