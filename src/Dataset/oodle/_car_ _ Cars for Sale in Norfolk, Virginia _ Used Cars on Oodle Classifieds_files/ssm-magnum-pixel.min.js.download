var SSMGF=SSMGF||{};SSMGF.rid=SSMGF.rid||"";SSMGF.u=SSMGF.u||{};SSMGF.u.guid=SSMGF.u.guid||"";SSMGF.u.has_dnt=SSMGF.u.has_dnt||false;SSMGF.u.is_ready=SSMGF.u.is_ready||false;SSMGF.u.on_ready=SSMGF.u.on_ready||null;SSMGF.u.sid=SSMGF.u.sid||"";var SSMMAG=SSMMAG||{};SSMMAG.guid=SSMMAG.guid||"";SSMMAG.is_ready=SSMMAG.is_ready||false;SSMMAG.on_ready=SSMMAG.on_ready||null;SSMMAG.go=SSMMAG.go||null;SSMMAG.ssmgf_script=SSMMAG.ssmgf_script||"services.cdn.speedshiftmedia.com/gf/core.min.js";SSMMAG.util=SSMMAG.util||{};SSMMAG.util.text=SSMMAG.util.text||{};SSMMAG.util.text.truncate=function(a,b){var d=a;if(SSMGF.util.is.undefined(b)){var b=0}try{if(b>0&&d.length>b){d=d.substring(0,b-3)+"..."}}catch(c){}return d};SSMMAG.util.text.sanitize=function(a){var c=a;try{c=escape(c)}catch(b){}return c};SSMMAG.util.text.sanitize_url=function(b){var a=b;try{a=escape(a)}catch(c){}return a};SSMMAG.fn=SSMMAG.fn||(function(l,j){var p="magnum.cdn.speedshiftmedia.com";var m={};var f=Array();var g=false;var u=false;var h=false;var q={v:19010100,private_errors:Array(),private_load_time:new Date().getTime()};var b=0;function n(v){if(g){v.call(l,[])}else{f.push(function(){return v.call(l,[])})}}function d(){if(typeof(SSMGF)==="undefined"||SSMGF===j||!("util" in SSMGF)){if(!h){var B=document.createElement("script");B.type="text/javascript";B.src=document.location.protocol+"//"+SSMMAG.ssmgf_script;if(B.addEventListener){B.onload=function(){SSMMAG.fn.init()}}else{if(B.readyState){B.onreadystatechange=function(){if(B.readyState in {loaded:1,complete:1}){B.onreadystagechange=null;SSMMAG.fn.init()}}}}var A=document.body.appendChild(B);h=true}return false}else{h=true}if(!SSMGF.u.is_ready){SSMGF.u.on_ready(function(){SSMMAG.fn.init()});SSMGF.u.fn.init();return false}if(u){return false}u=true;if(SSMGF.u.has_dnt||SSMGF.u.guid==""){return false}q.private_init_time=new Date().getTime();SSMMAG.guid=SSMGF.u.guid;q.uid=SSMMAG.guid;q.private_tu=new Date().getTime()-q.private_init_time;q.sid=SSMGF.u.sid;q.rid=SSMGF.rid;if(SSMGF.util.is.undefined(q.u)&&SSMGF.util.is.defined(document.location.href)&&document.location.href.length>0){q.u=SSMMAG.util.text.sanitize_url(document.location.href)}if(SSMGF.util.is.undefined(q.r)){if(SSMGF.util.is.defined(document.referrer)&&document.referrer.length>0){q.r=SSMMAG.util.text.sanitize_url(document.referrer)}if((SSMGF.util.is.undefined(q.r)||q.r=="")&&SSMGF.util.is.defined(l.History)){var w=l.History;try{q.r=SSMMAG.util.text.sanitize_url(w.getPrevious())}catch(v){}}}var y=document.getElementsByTagName("meta");for(i=0;i<y.length;i++){var x=SSMMAG.util.text.sanitize(y[i].getAttribute("content"));switch(y[i].getAttribute("property")){case"keywords":if(SSMGF.util.is.undefined(q.mkw)&&x!=""){q.mkw=x}break;case"description":if(SSMGF.util.is.undefined(q.md)&&x!=""){q.md=x}break}}if(SSMGF.util.is.undefined(q.mt)&&SSMGF.util.is.defined(document.getElementsByTagName("title"))&&SSMGF.util.is.defined(document.getElementsByTagName("title")[0])){q.mt=SSMMAG.util.text.sanitize(document.getElementsByTagName("title")[0].innerHTML)}g=true;SSMMAG.is_ready=true;k();return true}function t(x){if(!SSMMAG.is_ready){SSMMAG.on_ready(function(){SSMMAG.go(x)});SSMMAG.fn.init();return false}var w=s(x);var y=w.private_this_call;w=r(w);if(w.private_errors.length){o(w);return false}var v=a(w);return v}function s(z){b++;var y=q;y.private_this_call=b;y.private_call_time=new Date().getTime();if(SSMGF.util.is.undefined(z)){var z={}}for(var x in z){switch(x){case"t":case"e":case"s":case"a":case"i":case"c":case"u":case"r":case"mt":case"mkw":case"md":var w=z[x];if(x=="u"||x=="r"){w=SSMMAG.util.text.sanitize_url(w)}else{if(x=="mt"||x=="mkw"||x=="md"){w=SSMMAG.util.text.truncate(w,255);w=SSMMAG.util.text.sanitize(w)}}y[x]=w;break;default:break}}return y}function r(v){if(SSMGF.util.is.undefined(v.e)||v.e<1){v.private_errors.push("An event is required, and must be greater or equal to 1.")}return v}function a(y){if(SSMGF.u.has_dnt||SSMGF.u.guid==""){return false}if(SSMGF.util.is.undefined(y)){y.private_errors.push("No pixel object to attach.");return false}var w=y.private_this_call;var C=c();var x=document.createElement("img");var A=C.scheme+"://"+C.host+"/p/magnum.gif?";for(var D in y){if(y.hasOwnProperty(D)&&D.indexOf("private_")<0&&y[D]){A=A+D+"="+y[D]+"&"}}A=A.slice(0,-1);var B=document.getElementsByTagName("body")[0];var z=B.getElementsByTagName("img");var E=false;for(i in z){if(z[i].className!=="ssm-magnum-pixel"){continue}var v=z[i].src;if(SSMGF.util.is.defined(v)&&typeof(v)=="string"){v=v.replace(/&tu=\w+&tp=\w+/g,"")}if(v==A){E=true;break}}if(E){y.private_errors.push("Duplicate pixel request.",w)}else{y.private_tp=new Date().getTime()-y.private_init_time;A=A+"&tu="+y.private_tu+"&tp="+y.private_tp;x.setAttribute("src",A);x.setAttribute("class","ssm-magnum-pixel");x.setAttribute("style","display:none;");B.appendChild(x)}if(y.private_errors.length){o(y);return false}return true}function k(){if(f.length>0){for(var v=0;v<f.length;v++){try{f[v].call(l,[])}catch(w){}}f=Array()}}function o(w){var y=w.private_errors,v=10;while(y.length&&v>0){var x=y.shift();i--}w.private_errors=Array();return true}function e(){var x=document.getElementsByTagName("script"),C="ssm-magnum-pixel",w=p,y="http",B="scripts/"+C+".min.js",A={};for(i=x.length;i>0;i--){var z=x[i];if(SSMGF.util.is.defined(z)&&(z.src.indexOf(C+".")>=0)){var v=z.src.split("/");y=v.shift();y=y.substring(0,y.length-1);v.shift();w=v.shift();B=v.join("/");break}}A.host=w;A.scheme=y;A.path=B;return A}function c(){var w=e();var v=w.host.replace("cdn.","");v=v.replace("tracking.","");if(v.indexOf(".dev.")!==-1){v="tracking."+v}w.host=v;return w}return{init:function(){return d()},go:function(v){return t(v)},add_callback:function(w,v){return n(w,v)}}})(window);if(SSMMAG.on_ready==null){SSMMAG.on_ready=SSMMAG.fn.add_callback}if(SSMMAG.go==null){SSMMAG.go=SSMMAG.fn.go}var ssm_magnum_pixel=SSMMAG;SSMMAG.initialize=SSMMAG.go;SSMMAG.fn.init();